var fT=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var dT=fT((exports,module)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(a,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var g in l)g!=="key"&&(u[g]=l[g])}else u=l;return l=u.ref,{$$typeof:t,type:a,key:d,ref:l!==void 0?l:null,props:u}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=r,reactJsxRuntime_production.jsxs=r,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),me=Symbol.iterator;function _e(e1){return e1===null||typeof e1!="object"?null:(e1=me&&e1[me]||e1["@@iterator"],typeof e1=="function"?e1:null)}var He={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xe=Object.assign,wt={};function Do(e1,s1,b1){this.props=e1,this.context=s1,this.refs=wt,this.updater=b1||He}Do.prototype.isReactComponent={},Do.prototype.setState=function(e1,s1){if(typeof e1!="object"&&typeof e1!="function"&&e1!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e1,s1,"setState")},Do.prototype.forceUpdate=function(e1){this.updater.enqueueForceUpdate(this,e1,"forceUpdate")};function sr(){}sr.prototype=Do.prototype;function Ko(e1,s1,b1){this.props=e1,this.context=s1,this.refs=wt,this.updater=b1||He}var Bs=Ko.prototype=new sr;Bs.constructor=Ko,Xe(Bs,Do.prototype),Bs.isPureReactComponent=!0;var th=Array.isArray,pf={H:null,A:null,T:null,S:null,V:null},_h=Object.prototype.hasOwnProperty;function cf(e1,s1,b1,_1,V1,I1){return b1=I1.ref,{$$typeof:t,type:e1,key:s1,ref:b1!==void 0?b1:null,props:I1}}function df(e1,s1){return cf(e1.type,s1,void 0,void 0,void 0,e1.props)}function uf(e1){return typeof e1=="object"&&e1!==null&&e1.$$typeof===t}function li(e1){var s1={"=":"=0",":":"=2"};return"$"+e1.replace(/[=:]/g,function(b1){return s1[b1]})}var Vc=/\/+/g;function Rs(e1,s1){return typeof e1=="object"&&e1!==null&&e1.key!=null?li(""+e1.key):s1.toString(36)}function qc(){}function Qp(e1){switch(e1.status){case"fulfilled":return e1.value;case"rejected":throw e1.reason;default:switch(typeof e1.status=="string"?e1.then(qc,qc):(e1.status="pending",e1.then(function(s1){e1.status==="pending"&&(e1.status="fulfilled",e1.value=s1)},function(s1){e1.status==="pending"&&(e1.status="rejected",e1.reason=s1)})),e1.status){case"fulfilled":return e1.value;case"rejected":throw e1.reason}}throw e1}function n1(e1,s1,b1,_1,V1){var I1=typeof e1;(I1==="undefined"||I1==="boolean")&&(e1=null);var i2=!1;if(e1===null)i2=!0;else switch(I1){case"bigint":case"string":case"number":i2=!0;break;case"object":switch(e1.$$typeof){case t:case e:i2=!0;break;case Z:return i2=e1._init,n1(i2(e1._payload),s1,b1,_1,V1)}}if(i2)return V1=V1(e1),i2=_1===""?"."+Rs(e1,0):_1,th(V1)?(b1="",i2!=null&&(b1=i2.replace(Vc,"$&/")+"/"),n1(V1,s1,b1,"",function(X1){return X1})):V1!=null&&(uf(V1)&&(V1=df(V1,b1+(V1.key==null||e1&&e1.key===V1.key?"":(""+V1.key).replace(Vc,"$&/")+"/")+i2)),s1.push(V1)),1;i2=0;var R2=_1===""?".":_1+":";if(th(e1))for(var F2=0;F2<e1.length;F2++)_1=e1[F2],I1=R2+Rs(_1,F2),i2+=n1(_1,s1,b1,I1,V1);else if(F2=_e(e1),typeof F2=="function")for(e1=F2.call(e1),F2=0;!(_1=e1.next()).done;)_1=_1.value,I1=R2+Rs(_1,F2++),i2+=n1(_1,s1,b1,I1,V1);else if(I1==="object"){if(typeof e1.then=="function")return n1(Qp(e1),s1,b1,_1,V1);throw s1=String(e1),Error("Objects are not valid as a React child (found: "+(s1==="[object Object]"?"object with keys {"+Object.keys(e1).join(", ")+"}":s1)+"). If you meant to render a collection of children, use an array instead.")}return i2}function wh(e1,s1,b1){if(e1==null)return e1;var _1=[],V1=0;return n1(e1,_1,"","",function(I1){return s1.call(b1,I1,V1++)}),_1}function gf(e1){if(e1._status===-1){var s1=e1._result;s1=s1(),s1.then(function(b1){(e1._status===0||e1._status===-1)&&(e1._status=1,e1._result=b1)},function(b1){(e1._status===0||e1._status===-1)&&(e1._status=2,e1._result=b1)}),e1._status===-1&&(e1._status=0,e1._result=s1)}if(e1._status===1)return e1._result.default;throw e1._result}var yh=typeof reportError=="function"?reportError:function(e1){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s1=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e1=="object"&&e1!==null&&typeof e1.message=="string"?String(e1.message):String(e1),error:e1});if(!window.dispatchEvent(s1))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e1);return}console.error(e1)};function ff(){}return react_production.Children={map:wh,forEach:function(e1,s1,b1){wh(e1,function(){s1.apply(this,arguments)},b1)},count:function(e1){var s1=0;return wh(e1,function(){s1++}),s1},toArray:function(e1){return wh(e1,function(s1){return s1})||[]},only:function(e1){if(!uf(e1))throw Error("React.Children.only expected to receive a single React element child.");return e1}},react_production.Component=Do,react_production.Fragment=r,react_production.Profiler=l,react_production.PureComponent=Ko,react_production.StrictMode=a,react_production.Suspense=E,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=pf,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(e1){return pf.H.useMemoCache(e1)}},react_production.cache=function(e1){return function(){return e1.apply(null,arguments)}},react_production.cloneElement=function(e1,s1,b1){if(e1==null)throw Error("The argument must be a React element, but you passed "+e1+".");var _1=Xe({},e1.props),V1=e1.key,I1=void 0;if(s1!=null)for(i2 in s1.ref!==void 0&&(I1=void 0),s1.key!==void 0&&(V1=""+s1.key),s1)!_h.call(s1,i2)||i2==="key"||i2==="__self"||i2==="__source"||i2==="ref"&&s1.ref===void 0||(_1[i2]=s1[i2]);var i2=arguments.length-2;if(i2===1)_1.children=b1;else if(1<i2){for(var R2=Array(i2),F2=0;F2<i2;F2++)R2[F2]=arguments[F2+2];_1.children=R2}return cf(e1.type,V1,void 0,void 0,I1,_1)},react_production.createContext=function(e1){return e1={$$typeof:d,_currentValue:e1,_currentValue2:e1,_threadCount:0,Provider:null,Consumer:null},e1.Provider=e1,e1.Consumer={$$typeof:u,_context:e1},e1},react_production.createElement=function(e1,s1,b1){var _1,V1={},I1=null;if(s1!=null)for(_1 in s1.key!==void 0&&(I1=""+s1.key),s1)_h.call(s1,_1)&&_1!=="key"&&_1!=="__self"&&_1!=="__source"&&(V1[_1]=s1[_1]);var i2=arguments.length-2;if(i2===1)V1.children=b1;else if(1<i2){for(var R2=Array(i2),F2=0;F2<i2;F2++)R2[F2]=arguments[F2+2];V1.children=R2}if(e1&&e1.defaultProps)for(_1 in i2=e1.defaultProps,i2)V1[_1]===void 0&&(V1[_1]=i2[_1]);return cf(e1,I1,void 0,void 0,null,V1)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(e1){return{$$typeof:g,render:e1}},react_production.isValidElement=uf,react_production.lazy=function(e1){return{$$typeof:Z,_payload:{_status:-1,_result:e1},_init:gf}},react_production.memo=function(e1,s1){return{$$typeof:P,type:e1,compare:s1===void 0?null:s1}},react_production.startTransition=function(e1){var s1=pf.T,b1={};pf.T=b1;try{var _1=e1(),V1=pf.S;V1!==null&&V1(b1,_1),typeof _1=="object"&&_1!==null&&typeof _1.then=="function"&&_1.then(ff,yh)}catch(I1){yh(I1)}finally{pf.T=s1}},react_production.unstable_useCacheRefresh=function(){return pf.H.useCacheRefresh()},react_production.use=function(e1){return pf.H.use(e1)},react_production.useActionState=function(e1,s1,b1){return pf.H.useActionState(e1,s1,b1)},react_production.useCallback=function(e1,s1){return pf.H.useCallback(e1,s1)},react_production.useContext=function(e1){return pf.H.useContext(e1)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(e1,s1){return pf.H.useDeferredValue(e1,s1)},react_production.useEffect=function(e1,s1,b1){var _1=pf.H;if(typeof b1=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return _1.useEffect(e1,s1)},react_production.useId=function(){return pf.H.useId()},react_production.useImperativeHandle=function(e1,s1,b1){return pf.H.useImperativeHandle(e1,s1,b1)},react_production.useInsertionEffect=function(e1,s1){return pf.H.useInsertionEffect(e1,s1)},react_production.useLayoutEffect=function(e1,s1){return pf.H.useLayoutEffect(e1,s1)},react_production.useMemo=function(e1,s1){return pf.H.useMemo(e1,s1)},react_production.useOptimistic=function(e1,s1){return pf.H.useOptimistic(e1,s1)},react_production.useReducer=function(e1,s1,b1){return pf.H.useReducer(e1,s1,b1)},react_production.useRef=function(e1){return pf.H.useRef(e1)},react_production.useState=function(e1){return pf.H.useState(e1)},react_production.useSyncExternalStore=function(e1,s1,b1){return pf.H.useSyncExternalStore(e1,s1,b1)},react_production.useTransition=function(){return pf.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(t){function e(wh,gf){var yh=wh.length;wh.push(gf);e:for(;0<yh;){var ff=yh-1>>>1,e1=wh[ff];if(0<l(e1,gf))wh[ff]=gf,wh[yh]=e1,yh=ff;else break e}}function r(wh){return wh.length===0?null:wh[0]}function a(wh){if(wh.length===0)return null;var gf=wh[0],yh=wh.pop();if(yh!==gf){wh[0]=yh;e:for(var ff=0,e1=wh.length,s1=e1>>>1;ff<s1;){var b1=2*(ff+1)-1,_1=wh[b1],V1=b1+1,I1=wh[V1];if(0>l(_1,yh))V1<e1&&0>l(I1,_1)?(wh[ff]=I1,wh[V1]=yh,ff=V1):(wh[ff]=_1,wh[b1]=yh,ff=b1);else if(V1<e1&&0>l(I1,yh))wh[ff]=I1,wh[V1]=yh,ff=V1;else break e}}return gf}function l(wh,gf){var yh=wh.sortIndex-gf.sortIndex;return yh!==0?yh:wh.id-gf.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();t.unstable_now=function(){return d.now()-g}}var E=[],P=[],Z=1,me=null,_e=3,He=!1,Xe=!1,wt=!1,Do=!1,sr=typeof setTimeout=="function"?setTimeout:null,Ko=typeof clearTimeout=="function"?clearTimeout:null,Bs=typeof setImmediate<"u"?setImmediate:null;function th(wh){for(var gf=r(P);gf!==null;){if(gf.callback===null)a(P);else if(gf.startTime<=wh)a(P),gf.sortIndex=gf.expirationTime,e(E,gf);else break;gf=r(P)}}function pf(wh){if(wt=!1,th(wh),!Xe)if(r(E)!==null)Xe=!0,_h||(_h=!0,Rs());else{var gf=r(P);gf!==null&&n1(pf,gf.startTime-wh)}}var _h=!1,cf=-1,df=5,uf=-1;function li(){return Do?!0:!(t.unstable_now()-uf<df)}function Vc(){if(Do=!1,_h){var wh=t.unstable_now();uf=wh;var gf=!0;try{e:{Xe=!1,wt&&(wt=!1,Ko(cf),cf=-1),He=!0;var yh=_e;try{t:{for(th(wh),me=r(E);me!==null&&!(me.expirationTime>wh&&li());){var ff=me.callback;if(typeof ff=="function"){me.callback=null,_e=me.priorityLevel;var e1=ff(me.expirationTime<=wh);if(wh=t.unstable_now(),typeof e1=="function"){me.callback=e1,th(wh),gf=!0;break t}me===r(E)&&a(E),th(wh)}else a(E);me=r(E)}if(me!==null)gf=!0;else{var s1=r(P);s1!==null&&n1(pf,s1.startTime-wh),gf=!1}}break e}finally{me=null,_e=yh,He=!1}gf=void 0}}finally{gf?Rs():_h=!1}}}var Rs;if(typeof Bs=="function")Rs=function(){Bs(Vc)};else if(typeof MessageChannel<"u"){var qc=new MessageChannel,Qp=qc.port2;qc.port1.onmessage=Vc,Rs=function(){Qp.postMessage(null)}}else Rs=function(){sr(Vc,0)};function n1(wh,gf){cf=sr(function(){wh(t.unstable_now())},gf)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(wh){wh.callback=null},t.unstable_forceFrameRate=function(wh){0>wh||125<wh?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):df=0<wh?Math.floor(1e3/wh):5},t.unstable_getCurrentPriorityLevel=function(){return _e},t.unstable_next=function(wh){switch(_e){case 1:case 2:case 3:var gf=3;break;default:gf=_e}var yh=_e;_e=gf;try{return wh()}finally{_e=yh}},t.unstable_requestPaint=function(){Do=!0},t.unstable_runWithPriority=function(wh,gf){switch(wh){case 1:case 2:case 3:case 4:case 5:break;default:wh=3}var yh=_e;_e=wh;try{return gf()}finally{_e=yh}},t.unstable_scheduleCallback=function(wh,gf,yh){var ff=t.unstable_now();switch(typeof yh=="object"&&yh!==null?(yh=yh.delay,yh=typeof yh=="number"&&0<yh?ff+yh:ff):yh=ff,wh){case 1:var e1=-1;break;case 2:e1=250;break;case 5:e1=1073741823;break;case 4:e1=1e4;break;default:e1=5e3}return e1=yh+e1,wh={id:Z++,callback:gf,priorityLevel:wh,startTime:yh,expirationTime:e1,sortIndex:-1},yh>ff?(wh.sortIndex=yh,e(P,wh),r(E)===null&&wh===r(P)&&(wt?(Ko(cf),cf=-1):wt=!0,n1(pf,yh-ff))):(wh.sortIndex=e1,e(E,wh),Xe||He||(Xe=!0,_h||(_h=!0,Rs()))),wh},t.unstable_shouldYield=li,t.unstable_wrapCallback=function(wh){var gf=_e;return function(){var yh=_e;_e=gf;try{return wh.apply(this,arguments)}finally{_e=yh}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(E){var P="https://react.dev/errors/"+E;if(1<arguments.length){P+="?args[]="+encodeURIComponent(arguments[1]);for(var Z=2;Z<arguments.length;Z++)P+="&args[]="+encodeURIComponent(arguments[Z])}return"Minified React error #"+E+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(E,P,Z){var me=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:me==null?null:""+me,children:E,containerInfo:P,implementation:Z}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(E,P){if(E==="font")return"";if(typeof P=="string")return P==="use-credentials"?P:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,reactDom_production.createPortal=function(E,P){var Z=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P||P.nodeType!==1&&P.nodeType!==9&&P.nodeType!==11)throw Error(e(299));return u(E,P,null,Z)},reactDom_production.flushSync=function(E){var P=d.T,Z=a.p;try{if(d.T=null,a.p=2,E)return E()}finally{d.T=P,a.p=Z,a.d.f()}},reactDom_production.preconnect=function(E,P){typeof E=="string"&&(P?(P=P.crossOrigin,P=typeof P=="string"?P==="use-credentials"?P:"":void 0):P=null,a.d.C(E,P))},reactDom_production.prefetchDNS=function(E){typeof E=="string"&&a.d.D(E)},reactDom_production.preinit=function(E,P){if(typeof E=="string"&&P&&typeof P.as=="string"){var Z=P.as,me=g(Z,P.crossOrigin),_e=typeof P.integrity=="string"?P.integrity:void 0,He=typeof P.fetchPriority=="string"?P.fetchPriority:void 0;Z==="style"?a.d.S(E,typeof P.precedence=="string"?P.precedence:void 0,{crossOrigin:me,integrity:_e,fetchPriority:He}):Z==="script"&&a.d.X(E,{crossOrigin:me,integrity:_e,fetchPriority:He,nonce:typeof P.nonce=="string"?P.nonce:void 0})}},reactDom_production.preinitModule=function(E,P){if(typeof E=="string")if(typeof P=="object"&&P!==null){if(P.as==null||P.as==="script"){var Z=g(P.as,P.crossOrigin);a.d.M(E,{crossOrigin:Z,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0})}}else P==null&&a.d.M(E)},reactDom_production.preload=function(E,P){if(typeof E=="string"&&typeof P=="object"&&P!==null&&typeof P.as=="string"){var Z=P.as,me=g(Z,P.crossOrigin);a.d.L(E,Z,{crossOrigin:me,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0,type:typeof P.type=="string"?P.type:void 0,fetchPriority:typeof P.fetchPriority=="string"?P.fetchPriority:void 0,referrerPolicy:typeof P.referrerPolicy=="string"?P.referrerPolicy:void 0,imageSrcSet:typeof P.imageSrcSet=="string"?P.imageSrcSet:void 0,imageSizes:typeof P.imageSizes=="string"?P.imageSizes:void 0,media:typeof P.media=="string"?P.media:void 0})}},reactDom_production.preloadModule=function(E,P){if(typeof E=="string")if(P){var Z=g(P.as,P.crossOrigin);a.d.m(E,{as:typeof P.as=="string"&&P.as!=="script"?P.as:void 0,crossOrigin:Z,integrity:typeof P.integrity=="string"?P.integrity:void 0})}else a.d.m(E)},reactDom_production.requestFormReset=function(E){a.d.r(E)},reactDom_production.unstable_batchedUpdates=function(E,P){return E(P)},reactDom_production.useFormState=function(E,P,Z){return d.H.useFormState(E,P,Z)},reactDom_production.useFormStatus=function(){return d.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),r=requireReactDom();function a(y){var W="https://react.dev/errors/"+y;if(1<arguments.length){W+="?args[]="+encodeURIComponent(arguments[1]);for(var ve=2;ve<arguments.length;ve++)W+="&args[]="+encodeURIComponent(arguments[ve])}return"Minified React error #"+y+"; visit "+W+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)}function u(y){var W=y,ve=y;if(y.alternate)for(;W.return;)W=W.return;else{y=W;do W=y,(W.flags&4098)!==0&&(ve=W.return),y=W.return;while(y)}return W.tag===3?ve:null}function d(y){if(y.tag===13){var W=y.memoizedState;if(W===null&&(y=y.alternate,y!==null&&(W=y.memoizedState)),W!==null)return W.dehydrated}return null}function g(y){if(u(y)!==y)throw Error(a(188))}function E(y){var W=y.alternate;if(!W){if(W=u(y),W===null)throw Error(a(188));return W!==y?null:y}for(var ve=y,Ge=W;;){var To=ve.return;if(To===null)break;var Mh=To.alternate;if(Mh===null){if(Ge=To.return,Ge!==null){ve=Ge;continue}break}if(To.child===Mh.child){for(Mh=To.child;Mh;){if(Mh===ve)return g(To),y;if(Mh===Ge)return g(To),W;Mh=Mh.sibling}throw Error(a(188))}if(ve.return!==Ge.return)ve=To,Ge=Mh;else{for(var f1=!1,S1=To.child;S1;){if(S1===ve){f1=!0,ve=To,Ge=Mh;break}if(S1===Ge){f1=!0,Ge=To,ve=Mh;break}S1=S1.sibling}if(!f1){for(S1=Mh.child;S1;){if(S1===ve){f1=!0,ve=Mh,Ge=To;break}if(S1===Ge){f1=!0,Ge=Mh,ve=To;break}S1=S1.sibling}if(!f1)throw Error(a(189))}}if(ve.alternate!==Ge)throw Error(a(190))}if(ve.tag!==3)throw Error(a(188));return ve.stateNode.current===ve?y:W}function P(y){var W=y.tag;if(W===5||W===26||W===27||W===6)return y;for(y=y.child;y!==null;){if(W=P(y),W!==null)return W;y=y.sibling}return null}var Z=Object.assign,me=Symbol.for("react.element"),_e=Symbol.for("react.transitional.element"),He=Symbol.for("react.portal"),Xe=Symbol.for("react.fragment"),wt=Symbol.for("react.strict_mode"),Do=Symbol.for("react.profiler"),sr=Symbol.for("react.provider"),Ko=Symbol.for("react.consumer"),Bs=Symbol.for("react.context"),th=Symbol.for("react.forward_ref"),pf=Symbol.for("react.suspense"),_h=Symbol.for("react.suspense_list"),cf=Symbol.for("react.memo"),df=Symbol.for("react.lazy"),uf=Symbol.for("react.activity"),li=Symbol.for("react.memo_cache_sentinel"),Vc=Symbol.iterator;function Rs(y){return y===null||typeof y!="object"?null:(y=Vc&&y[Vc]||y["@@iterator"],typeof y=="function"?y:null)}var qc=Symbol.for("react.client.reference");function Qp(y){if(y==null)return null;if(typeof y=="function")return y.$$typeof===qc?null:y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case Xe:return"Fragment";case Do:return"Profiler";case wt:return"StrictMode";case pf:return"Suspense";case _h:return"SuspenseList";case uf:return"Activity"}if(typeof y=="object")switch(y.$$typeof){case He:return"Portal";case Bs:return(y.displayName||"Context")+".Provider";case Ko:return(y._context.displayName||"Context")+".Consumer";case th:var W=y.render;return y=y.displayName,y||(y=W.displayName||W.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case cf:return W=y.displayName||null,W!==null?W:Qp(y.type)||"Memo";case df:W=y._payload,y=y._init;try{return Qp(y(W))}catch{}}return null}var n1=Array.isArray,wh=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gf=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yh={pending:!1,data:null,method:null,action:null},ff=[],e1=-1;function s1(y){return{current:y}}function b1(y){0>e1||(y.current=ff[e1],ff[e1]=null,e1--)}function _1(y,W){e1++,ff[e1]=y.current,y.current=W}var V1=s1(null),I1=s1(null),i2=s1(null),R2=s1(null);function F2(y,W){switch(_1(i2,W),_1(I1,y),_1(V1,null),W.nodeType){case 9:case 11:y=(y=W.documentElement)&&(y=y.namespaceURI)?Bw(y):0;break;default:if(y=W.tagName,W=W.namespaceURI)W=Bw(W),y=qw(W,y);else switch(y){case"svg":y=1;break;case"math":y=2;break;default:y=0}}b1(V1),_1(V1,y)}function X1(){b1(V1),b1(I1),b1(i2)}function W2(y){y.memoizedState!==null&&_1(R2,y);var W=V1.current,ve=qw(W,y.type);W!==ve&&(_1(I1,y),_1(V1,ve))}function N2(y){I1.current===y&&(b1(V1),b1(I1)),R2.current===y&&(b1(R2),S9._currentValue=yh)}var V2=Object.prototype.hasOwnProperty,q2=t.unstable_scheduleCallback,B2=t.unstable_cancelCallback,K2=t.unstable_shouldYield,S2=t.unstable_requestPaint,E1=t.unstable_now,F1=t.unstable_getCurrentPriorityLevel,K1=t.unstable_ImmediatePriority,N1=t.unstable_UserBlockingPriority,J1=t.unstable_NormalPriority,E2=t.unstable_LowPriority,n2=t.unstable_IdlePriority,D1=t.log,i1=t.unstable_setDisableYieldValue,g1=null,u1=null;function L1(y){if(typeof D1=="function"&&i1(y),u1&&typeof u1.setStrictMode=="function")try{u1.setStrictMode(g1,y)}catch{}}var B1=Math.clz32?Math.clz32:A1,Q1=Math.log,Z1=Math.LN2;function A1(y){return y>>>=0,y===0?32:31-(Q1(y)/Z1|0)|0}var a2=256,v2=4194304;function A2(y){var W=y&42;if(W!==0)return W;switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return y&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return y}}function l2(y,W,ve){var Ge=y.pendingLanes;if(Ge===0)return 0;var To=0,Mh=y.suspendedLanes,f1=y.pingedLanes;y=y.warmLanes;var S1=Ge&134217727;return S1!==0?(Ge=S1&~Mh,Ge!==0?To=A2(Ge):(f1&=S1,f1!==0?To=A2(f1):ve||(ve=S1&~y,ve!==0&&(To=A2(ve))))):(S1=Ge&~Mh,S1!==0?To=A2(S1):f1!==0?To=A2(f1):ve||(ve=Ge&~y,ve!==0&&(To=A2(ve)))),To===0?0:W!==0&&W!==To&&(W&Mh)===0&&(Mh=To&-To,ve=W&-W,Mh>=ve||Mh===32&&(ve&4194048)!==0)?W:To}function x2(y,W){return(y.pendingLanes&~(y.suspendedLanes&~y.pingedLanes)&W)===0}function u2(y,W){switch(y){case 1:case 2:case 4:case 8:case 64:return W+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return W+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s2(){var y=a2;return a2<<=1,(a2&4194048)===0&&(a2=256),y}function j2(){var y=v2;return v2<<=1,(v2&62914560)===0&&(v2=4194304),y}function h2(y){for(var W=[],ve=0;31>ve;ve++)W.push(y);return W}function k2(y,W){y.pendingLanes|=W,W!==268435456&&(y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0)}function a4(y,W,ve,Ge,To,Mh){var f1=y.pendingLanes;y.pendingLanes=ve,y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0,y.expiredLanes&=ve,y.entangledLanes&=ve,y.errorRecoveryDisabledLanes&=ve,y.shellSuspendCounter=0;var S1=y.entanglements,H1=y.expirationTimes,y2=y.hiddenUpdates;for(ve=f1&~ve;0<ve;){var U2=31-B1(ve),Q2=1<<U2;S1[U2]=0,H1[U2]=-1;var d2=y2[U2];if(d2!==null)for(y2[U2]=null,U2=0;U2<d2.length;U2++){var M2=d2[U2];M2!==null&&(M2.lane&=-536870913)}ve&=~Q2}Ge!==0&&n4(y,Ge,0),Mh!==0&&To===0&&y.tag!==0&&(y.suspendedLanes|=Mh&~(f1&~W))}function n4(y,W,ve){y.pendingLanes|=W,y.suspendedLanes&=~W;var Ge=31-B1(W);y.entangledLanes|=W,y.entanglements[Ge]=y.entanglements[Ge]|1073741824|ve&4194090}function o4(y,W){var ve=y.entangledLanes|=W;for(y=y.entanglements;ve;){var Ge=31-B1(ve),To=1<<Ge;To&W|y[Ge]&W&&(y[Ge]|=W),ve&=~To}}function P4(y){switch(y){case 2:y=1;break;case 8:y=4;break;case 32:y=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:y=128;break;case 268435456:y=134217728;break;default:y=0}return y}function v4(y){return y&=-y,2<y?8<y?(y&134217727)!==0?32:268435456:8:2}function P1(){var y=gf.p;return y!==0?y:(y=window.event,y===void 0?32:iS(y.type))}function z1(y,W){var ve=gf.p;try{return gf.p=y,W()}finally{gf.p=ve}}var e2=Math.random().toString(36).slice(2),b2="__reactFiber$"+e2,P2="__reactProps$"+e2,c2="__reactContainer$"+e2,$2="__reactEvents$"+e2,Z2="__reactListeners$"+e2,Ym="__reactHandles$"+e2,o1="__reactResources$"+e2,a1="__reactMarker$"+e2;function l1(y){delete y[b2],delete y[P2],delete y[$2],delete y[Z2],delete y[Ym]}function w1(y){var W=y[b2];if(W)return W;for(var ve=y.parentNode;ve;){if(W=ve[c2]||ve[b2]){if(ve=W.alternate,W.child!==null||ve!==null&&ve.child!==null)for(y=Ex(y);y!==null;){if(ve=y[b2])return ve;y=Ex(y)}return W}y=ve,ve=y.parentNode}return null}function h1(y){if(y=y[b2]||y[c2]){var W=y.tag;if(W===5||W===6||W===13||W===26||W===27||W===3)return y}return null}function C1(y){var W=y.tag;if(W===5||W===26||W===27||W===6)return y.stateNode;throw Error(a(33))}function q1(y){var W=y[o1];return W||(W=y[o1]={hoistableStyles:new Map,hoistableScripts:new Map}),W}function $1(y){y[a1]=!0}var W1=new Set,Y1={};function _2(y,W){O2(y,W),O2(y+"Capture",W)}function O2(y,W){for(Y1[y]=W,y=0;y<W.length;y++)W1.add(W[y])}var u4=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),p4={},l4={};function A4(y){return V2.call(l4,y)?!0:V2.call(p4,y)?!1:u4.test(y)?l4[y]=!0:(p4[y]=!0,!1)}function h3(y,W,ve){if(A4(W))if(ve===null)y.removeAttribute(W);else{switch(typeof ve){case"undefined":case"function":case"symbol":y.removeAttribute(W);return;case"boolean":var Ge=W.toLowerCase().slice(0,5);if(Ge!=="data-"&&Ge!=="aria-"){y.removeAttribute(W);return}}y.setAttribute(W,""+ve)}}function s3(y,W,ve){if(ve===null)y.removeAttribute(W);else{switch(typeof ve){case"undefined":case"function":case"symbol":case"boolean":y.removeAttribute(W);return}y.setAttribute(W,""+ve)}}function y4(y,W,ve,Ge){if(Ge===null)y.removeAttribute(ve);else{switch(typeof Ge){case"undefined":case"function":case"symbol":case"boolean":y.removeAttribute(ve);return}y.setAttributeNS(W,ve,""+Ge)}}var r4,z4;function e4(y){if(r4===void 0)try{throw Error()}catch(ve){var W=ve.stack.trim().match(/\n( *(at )?)/);r4=W&&W[1]||"",z4=-1<ve.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ve.stack.indexOf("@")?"@unknown:0:0":""}return`
`+r4+y+z4}var O4=!1;function C4(y,W){if(!y||O4)return"";O4=!0;var ve=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Ge={DetermineComponentFrameRoot:function(){try{if(W){var Q2=function(){throw Error()};if(Object.defineProperty(Q2.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q2,[])}catch(M2){var d2=M2}Reflect.construct(y,[],Q2)}else{try{Q2.call()}catch(M2){d2=M2}y.call(Q2.prototype)}}else{try{throw Error()}catch(M2){d2=M2}(Q2=y())&&typeof Q2.catch=="function"&&Q2.catch(function(){})}}catch(M2){if(M2&&d2&&typeof M2.stack=="string")return[M2.stack,d2.stack]}return[null,null]}};Ge.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var To=Object.getOwnPropertyDescriptor(Ge.DetermineComponentFrameRoot,"name");To&&To.configurable&&Object.defineProperty(Ge.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Mh=Ge.DetermineComponentFrameRoot(),f1=Mh[0],S1=Mh[1];if(f1&&S1){var H1=f1.split(`
`),y2=S1.split(`
`);for(To=Ge=0;Ge<H1.length&&!H1[Ge].includes("DetermineComponentFrameRoot");)Ge++;for(;To<y2.length&&!y2[To].includes("DetermineComponentFrameRoot");)To++;if(Ge===H1.length||To===y2.length)for(Ge=H1.length-1,To=y2.length-1;1<=Ge&&0<=To&&H1[Ge]!==y2[To];)To--;for(;1<=Ge&&0<=To;Ge--,To--)if(H1[Ge]!==y2[To]){if(Ge!==1||To!==1)do if(Ge--,To--,0>To||H1[Ge]!==y2[To]){var U2=`
`+H1[Ge].replace(" at new "," at ");return y.displayName&&U2.includes("<anonymous>")&&(U2=U2.replace("<anonymous>",y.displayName)),U2}while(1<=Ge&&0<=To);break}}}finally{O4=!1,Error.prepareStackTrace=ve}return(ve=y?y.displayName||y.name:"")?e4(ve):""}function H2(y){switch(y.tag){case 26:case 27:case 5:return e4(y.type);case 16:return e4("Lazy");case 13:return e4("Suspense");case 19:return e4("SuspenseList");case 0:case 15:return C4(y.type,!1);case 11:return C4(y.type.render,!1);case 1:return C4(y.type,!0);case 31:return e4("Activity");default:return""}}function x1(y){try{var W="";do W+=H2(y),y=y.return;while(y);return W}catch(ve){return`
Error generating stack: `+ve.message+`
`+ve.stack}}function A3(y){switch(typeof y){case"bigint":case"boolean":case"number":case"string":case"undefined":return y;case"object":return y;default:return""}}function V6(y){var W=y.type;return(y=y.nodeName)&&y.toLowerCase()==="input"&&(W==="checkbox"||W==="radio")}function K4(y){var W=V6(y)?"checked":"value",ve=Object.getOwnPropertyDescriptor(y.constructor.prototype,W),Ge=""+y[W];if(!y.hasOwnProperty(W)&&typeof ve<"u"&&typeof ve.get=="function"&&typeof ve.set=="function"){var To=ve.get,Mh=ve.set;return Object.defineProperty(y,W,{configurable:!0,get:function(){return To.call(this)},set:function(f1){Ge=""+f1,Mh.call(this,f1)}}),Object.defineProperty(y,W,{enumerable:ve.enumerable}),{getValue:function(){return Ge},setValue:function(f1){Ge=""+f1},stopTracking:function(){y._valueTracker=null,delete y[W]}}}}function c3(y){y._valueTracker||(y._valueTracker=K4(y))}function b4(y){if(!y)return!1;var W=y._valueTracker;if(!W)return!0;var ve=W.getValue(),Ge="";return y&&(Ge=V6(y)?y.checked?"true":"false":y.value),y=Ge,y!==ve?(W.setValue(y),!0):!1}function Y4(y){if(y=y||(typeof document<"u"?document:void 0),typeof y>"u")return null;try{return y.activeElement||y.body}catch{return y.body}}var z3=/[\n"\\]/g;function d6(y){return y.replace(z3,function(W){return"\\"+W.charCodeAt(0).toString(16)+" "})}function G6(y,W,ve,Ge,To,Mh,f1,S1){y.name="",f1!=null&&typeof f1!="function"&&typeof f1!="symbol"&&typeof f1!="boolean"?y.type=f1:y.removeAttribute("type"),W!=null?f1==="number"?(W===0&&y.value===""||y.value!=W)&&(y.value=""+A3(W)):y.value!==""+A3(W)&&(y.value=""+A3(W)):f1!=="submit"&&f1!=="reset"||y.removeAttribute("value"),W!=null?De(y,f1,A3(W)):ve!=null?De(y,f1,A3(ve)):Ge!=null&&y.removeAttribute("value"),To==null&&Mh!=null&&(y.defaultChecked=!!Mh),To!=null&&(y.checked=To&&typeof To!="function"&&typeof To!="symbol"),S1!=null&&typeof S1!="function"&&typeof S1!="symbol"&&typeof S1!="boolean"?y.name=""+A3(S1):y.removeAttribute("name")}function H4(y,W,ve,Ge,To,Mh,f1,S1){if(Mh!=null&&typeof Mh!="function"&&typeof Mh!="symbol"&&typeof Mh!="boolean"&&(y.type=Mh),W!=null||ve!=null){if(!(Mh!=="submit"&&Mh!=="reset"||W!=null))return;ve=ve!=null?""+A3(ve):"",W=W!=null?""+A3(W):ve,S1||W===y.value||(y.value=W),y.defaultValue=W}Ge=Ge??To,Ge=typeof Ge!="function"&&typeof Ge!="symbol"&&!!Ge,y.checked=S1?y.checked:!!Ge,y.defaultChecked=!!Ge,f1!=null&&typeof f1!="function"&&typeof f1!="symbol"&&typeof f1!="boolean"&&(y.name=f1)}function De(y,W,ve){W==="number"&&Y4(y.ownerDocument)===y||y.defaultValue===""+ve||(y.defaultValue=""+ve)}function Fc(y,W,ve,Ge){if(y=y.options,W){W={};for(var To=0;To<ve.length;To++)W["$"+ve[To]]=!0;for(ve=0;ve<y.length;ve++)To=W.hasOwnProperty("$"+y[ve].value),y[ve].selected!==To&&(y[ve].selected=To),To&&Ge&&(y[ve].defaultSelected=!0)}else{for(ve=""+A3(ve),W=null,To=0;To<y.length;To++){if(y[To].value===ve){y[To].selected=!0,Ge&&(y[To].defaultSelected=!0);return}W!==null||y[To].disabled||(W=y[To])}W!==null&&(W.selected=!0)}}function hf(y,W,ve){if(W!=null&&(W=""+A3(W),W!==y.value&&(y.value=W),ve==null)){y.defaultValue!==W&&(y.defaultValue=W);return}y.defaultValue=ve!=null?""+A3(ve):""}function r1(y,W,ve,Ge){if(W==null){if(Ge!=null){if(ve!=null)throw Error(a(92));if(n1(Ge)){if(1<Ge.length)throw Error(a(93));Ge=Ge[0]}ve=Ge}ve==null&&(ve=""),W=ve}ve=A3(W),y.defaultValue=ve,Ge=y.textContent,Ge===ve&&Ge!==""&&Ge!==null&&(y.value=Ge)}function d1(y,W){if(W){var ve=y.firstChild;if(ve&&ve===y.lastChild&&ve.nodeType===3){ve.nodeValue=W;return}}y.textContent=W}var y1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function v1(y,W,ve){var Ge=W.indexOf("--")===0;ve==null||typeof ve=="boolean"||ve===""?Ge?y.setProperty(W,""):W==="float"?y.cssFloat="":y[W]="":Ge?y.setProperty(W,ve):typeof ve!="number"||ve===0||y1.has(W)?W==="float"?y.cssFloat=ve:y[W]=(""+ve).trim():y[W]=ve+"px"}function O1(y,W,ve){if(W!=null&&typeof W!="object")throw Error(a(62));if(y=y.style,ve!=null){for(var Ge in ve)!ve.hasOwnProperty(Ge)||W!=null&&W.hasOwnProperty(Ge)||(Ge.indexOf("--")===0?y.setProperty(Ge,""):Ge==="float"?y.cssFloat="":y[Ge]="");for(var To in W)Ge=W[To],W.hasOwnProperty(To)&&ve[To]!==Ge&&v1(y,To,Ge)}else for(var Mh in W)W.hasOwnProperty(Mh)&&v1(y,Mh,W[Mh])}function m2(y){if(y.indexOf("-")===-1)return!1;switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),w2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function d4(y){return w2.test(""+y)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":y}var z2=null;function i4(y){return y=y.target||y.srcElement||window,y.correspondingUseElement&&(y=y.correspondingUseElement),y.nodeType===3?y.parentNode:y}var E4=null,w4=null;function $4(y){var W=h1(y);if(W&&(y=W.stateNode)){var ve=y[P2]||null;e:switch(y=W.stateNode,W.type){case"input":if(G6(y,ve.value,ve.defaultValue,ve.defaultValue,ve.checked,ve.defaultChecked,ve.type,ve.name),W=ve.name,ve.type==="radio"&&W!=null){for(ve=y;ve.parentNode;)ve=ve.parentNode;for(ve=ve.querySelectorAll('input[name="'+d6(""+W)+'"][type="radio"]'),W=0;W<ve.length;W++){var Ge=ve[W];if(Ge!==y&&Ge.form===y.form){var To=Ge[P2]||null;if(!To)throw Error(a(90));G6(Ge,To.value,To.defaultValue,To.defaultValue,To.checked,To.defaultChecked,To.type,To.name)}}for(W=0;W<ve.length;W++)Ge=ve[W],Ge.form===y.form&&b4(Ge)}break e;case"textarea":hf(y,ve.value,ve.defaultValue);break e;case"select":W=ve.value,W!=null&&Fc(y,!!ve.multiple,W,!1)}}}var U4=!1;function X2(y,W,ve){if(U4)return y(W,ve);U4=!0;try{var Ge=y(W);return Ge}finally{if(U4=!1,(E4!==null||w4!==null)&&(Gb(),E4&&(W=E4,y=w4,w4=E4=null,$4(W),y)))for(W=0;W<y.length;W++)$4(y[W])}}function f3(y,W){var ve=y.stateNode;if(ve===null)return null;var Ge=ve[P2]||null;if(Ge===null)return null;ve=Ge[W];e:switch(W){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Ge=!Ge.disabled)||(y=y.type,Ge=!(y==="button"||y==="input"||y==="select"||y==="textarea")),y=!Ge;break e;default:y=!1}if(y)return null;if(ve&&typeof ve!="function")throw Error(a(231,W,typeof ve));return ve}var a3=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),D4=!1;if(a3)try{var F3={};Object.defineProperty(F3,"passive",{get:function(){D4=!0}}),window.addEventListener("test",F3,F3),window.removeEventListener("test",F3,F3)}catch{D4=!1}var Z3=null,U3=null,o3=null;function v3(){if(o3)return o3;var y,W=U3,ve=W.length,Ge,To="value"in Z3?Z3.value:Z3.textContent,Mh=To.length;for(y=0;y<ve&&W[y]===To[y];y++);var f1=ve-y;for(Ge=1;Ge<=f1&&W[ve-Ge]===To[Mh-Ge];Ge++);return o3=To.slice(y,1<Ge?1-Ge:void 0)}function g3(y){var W=y.keyCode;return"charCode"in y?(y=y.charCode,y===0&&W===13&&(y=13)):y=W,y===10&&(y=13),32<=y||y===13?y:0}function k3(){return!0}function t6(){return!1}function l3(y){function W(ve,Ge,To,Mh,f1){this._reactName=ve,this._targetInst=To,this.type=Ge,this.nativeEvent=Mh,this.target=f1,this.currentTarget=null;for(var S1 in y)y.hasOwnProperty(S1)&&(ve=y[S1],this[S1]=ve?ve(Mh):Mh[S1]);return this.isDefaultPrevented=(Mh.defaultPrevented!=null?Mh.defaultPrevented:Mh.returnValue===!1)?k3:t6,this.isPropagationStopped=t6,this}return Z(W.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ve=this.nativeEvent;ve&&(ve.preventDefault?ve.preventDefault():typeof ve.returnValue!="unknown"&&(ve.returnValue=!1),this.isDefaultPrevented=k3)},stopPropagation:function(){var ve=this.nativeEvent;ve&&(ve.stopPropagation?ve.stopPropagation():typeof ve.cancelBubble!="unknown"&&(ve.cancelBubble=!0),this.isPropagationStopped=k3)},persist:function(){},isPersistent:k3}),W}var j4={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(y){return y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},g6=l3(j4),j3=Z({},j4,{view:0,detail:0}),i5=l3(j3),K6,n5,A6,u3=Z({},j3,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:H3,button:0,buttons:0,relatedTarget:function(y){return y.relatedTarget===void 0?y.fromElement===y.srcElement?y.toElement:y.fromElement:y.relatedTarget},movementX:function(y){return"movementX"in y?y.movementX:(y!==A6&&(A6&&y.type==="mousemove"?(K6=y.screenX-A6.screenX,n5=y.screenY-A6.screenY):n5=K6=0,A6=y),K6)},movementY:function(y){return"movementY"in y?y.movementY:n5}}),r6=l3(u3),d5=Z({},u3,{dataTransfer:0}),Rv=l3(d5),w5=Z({},j3,{relatedTarget:0}),S5=l3(w5),W6=Z({},j4,{animationName:0,elapsedTime:0,pseudoElement:0}),a5=l3(W6),R4=Z({},j4,{clipboardData:function(y){return"clipboardData"in y?y.clipboardData:window.clipboardData}}),x6=l3(R4),p5=Z({},j4,{data:0}),i6=l3(p5),R3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O5(y){var W=this.nativeEvent;return W.getModifierState?W.getModifierState(y):(y=y3[y])?!!W[y]:!1}function H3(){return O5}var l6=Z({},j3,{key:function(y){if(y.key){var W=R3[y.key]||y.key;if(W!=="Unidentified")return W}return y.type==="keypress"?(y=g3(y),y===13?"Enter":String.fromCharCode(y)):y.type==="keydown"||y.type==="keyup"?m5[y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:H3,charCode:function(y){return y.type==="keypress"?g3(y):0},keyCode:function(y){return y.type==="keydown"||y.type==="keyup"?y.keyCode:0},which:function(y){return y.type==="keypress"?g3(y):y.type==="keydown"||y.type==="keyup"?y.keyCode:0}}),j5=l3(l6),ev=Z({},u3,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qy=l3(ev),O3=Z({},j3,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:H3}),I4=l3(O3),G7=Z({},j4,{propertyName:0,elapsedTime:0,pseudoElement:0}),K7=l3(G7),W7=Z({},u3,{deltaX:function(y){return"deltaX"in y?y.deltaX:"wheelDeltaX"in y?-y.wheelDeltaX:0},deltaY:function(y){return"deltaY"in y?y.deltaY:"wheelDeltaY"in y?-y.wheelDeltaY:"wheelDelta"in y?-y.wheelDelta:0},deltaZ:0,deltaMode:0}),sy=l3(W7),D3=Z({},j4,{newState:0,oldState:0}),X7=l3(D3),$y=[9,13,27,32],tv=a3&&"CompositionEvent"in window,Os=null;a3&&"documentMode"in document&&(Os=document.documentMode);var t1=a3&&"TextEvent"in window&&!Os,c1=a3&&(!tv||Os&&8<Os&&11>=Os),k1=" ",f2=!1;function L2(y,W){switch(y){case"keyup":return $y.indexOf(W.keyCode)!==-1;case"keydown":return W.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function g4(y){return y=y.detail,typeof y=="object"&&"data"in y?y.data:null}var C3=!1;function n6(y,W){switch(y){case"compositionend":return g4(W);case"keypress":return W.which!==32?null:(f2=!0,k1);case"textInput":return y=W.data,y===k1&&f2?null:y;default:return null}}function E3(y,W){if(C3)return y==="compositionend"||!tv&&L2(y,W)?(y=v3(),o3=U3=Z3=null,C3=!1,y):null;switch(y){case"paste":return null;case"keypress":if(!(W.ctrlKey||W.altKey||W.metaKey)||W.ctrlKey&&W.altKey){if(W.char&&1<W.char.length)return W.char;if(W.which)return String.fromCharCode(W.which)}return null;case"compositionend":return c1&&W.locale!=="ko"?null:W.data;default:return null}}var Q4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P6(y){var W=y&&y.nodeName&&y.nodeName.toLowerCase();return W==="input"?!!Q4[y.type]:W==="textarea"}function s5(y,W,ve,Ge){E4?w4?w4.push(Ge):w4=[Ge]:E4=Ge,W=q7(W,"onChange"),0<W.length&&(ve=new g6("onChange","change",null,ve,Ge),y.push({event:ve,listeners:W}))}var An=null,eh=null;function m1(y){Vw(y,0)}function T1(y){var W=C1(y);if(b4(W))return y}function U1(y,W){if(y==="change")return W}var r2=!1;if(a3){var p2;if(a3){var C2="oninput"in document;if(!C2){var Y2=document.createElement("div");Y2.setAttribute("oninput","return;"),C2=typeof Y2.oninput=="function"}p2=C2}else p2=!1;r2=p2&&(!document.documentMode||9<document.documentMode)}function J2(){An&&(An.detachEvent("onpropertychange",S4),eh=An=null)}function S4(y){if(y.propertyName==="value"&&T1(eh)){var W=[];s5(W,eh,y,i4(y)),X2(m1,W)}}function D2(y,W,ve){y==="focusin"?(J2(),An=W,eh=ve,An.attachEvent("onpropertychange",S4)):y==="focusout"&&J2()}function F4(y){if(y==="selectionchange"||y==="keyup"||y==="keydown")return T1(eh)}function M4(y,W){if(y==="click")return T1(W)}function V4(y,W){if(y==="input"||y==="change")return T1(W)}function W4(y,W){return y===W&&(y!==0||1/y===1/W)||y!==y&&W!==W}var X4=typeof Object.is=="function"?Object.is:W4;function p3(y,W){if(X4(y,W))return!0;if(typeof y!="object"||y===null||typeof W!="object"||W===null)return!1;var ve=Object.keys(y),Ge=Object.keys(W);if(ve.length!==Ge.length)return!1;for(Ge=0;Ge<ve.length;Ge++){var To=ve[Ge];if(!V2.call(W,To)||!X4(y[To],W[To]))return!1}return!0}function h4(y){for(;y&&y.firstChild;)y=y.firstChild;return y}function x4(y,W){var ve=h4(y);y=0;for(var Ge;ve;){if(ve.nodeType===3){if(Ge=y+ve.textContent.length,y<=W&&Ge>=W)return{node:ve,offset:W-y};y=Ge}e:{for(;ve;){if(ve.nextSibling){ve=ve.nextSibling;break e}ve=ve.parentNode}ve=void 0}ve=h4(ve)}}function x3(y,W){return y&&W?y===W?!0:y&&y.nodeType===3?!1:W&&W.nodeType===3?x3(y,W.parentNode):"contains"in y?y.contains(W):y.compareDocumentPosition?!!(y.compareDocumentPosition(W)&16):!1:!1}function I2(y){y=y!=null&&y.ownerDocument!=null&&y.ownerDocument.defaultView!=null?y.ownerDocument.defaultView:window;for(var W=Y4(y.document);W instanceof y.HTMLIFrameElement;){try{var ve=typeof W.contentWindow.location.href=="string"}catch{ve=!1}if(ve)y=W.contentWindow;else break;W=Y4(y.document)}return W}function s4(y){var W=y&&y.nodeName&&y.nodeName.toLowerCase();return W&&(W==="input"&&(y.type==="text"||y.type==="search"||y.type==="tel"||y.type==="url"||y.type==="password")||W==="textarea"||y.contentEditable==="true")}var j1=a3&&"documentMode"in document&&11>=document.documentMode,L4=null,L3=null,_4=null,p6=!1;function u6(y,W,ve){var Ge=ve.window===ve?ve.document:ve.nodeType===9?ve:ve.ownerDocument;p6||L4==null||L4!==Y4(Ge)||(Ge=L4,"selectionStart"in Ge&&s4(Ge)?Ge={start:Ge.selectionStart,end:Ge.selectionEnd}:(Ge=(Ge.ownerDocument&&Ge.ownerDocument.defaultView||window).getSelection(),Ge={anchorNode:Ge.anchorNode,anchorOffset:Ge.anchorOffset,focusNode:Ge.focusNode,focusOffset:Ge.focusOffset}),_4&&p3(_4,Ge)||(_4=Ge,Ge=q7(L3,"onSelect"),0<Ge.length&&(W=new g6("onSelect","select",null,W,ve),y.push({event:W,listeners:Ge}),W.target=L4)))}function G3(y,W){var ve={};return ve[y.toLowerCase()]=W.toLowerCase(),ve["Webkit"+y]="webkit"+W,ve["Moz"+y]="moz"+W,ve}var c6={animationend:G3("Animation","AnimationEnd"),animationiteration:G3("Animation","AnimationIteration"),animationstart:G3("Animation","AnimationStart"),transitionrun:G3("Transition","TransitionRun"),transitionstart:G3("Transition","TransitionStart"),transitioncancel:G3("Transition","TransitionCancel"),transitionend:G3("Transition","TransitionEnd")},Z4={},K3={};a3&&(K3=document.createElement("div").style,"AnimationEvent"in window||(delete c6.animationend.animation,delete c6.animationiteration.animation,delete c6.animationstart.animation),"TransitionEvent"in window||delete c6.transitionend.transition);function w6(y){if(Z4[y])return Z4[y];if(!c6[y])return y;var W=c6[y],ve;for(ve in W)if(W.hasOwnProperty(ve)&&ve in K3)return Z4[y]=W[ve];return y}var E5=w6("animationend"),X6=w6("animationiteration"),i3=w6("animationstart"),t3=w6("transitionrun"),h6=w6("transitionstart"),T5=w6("transitioncancel"),Z6=w6("transitionend"),g5=new Map,Pv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pv.push("scrollEnd");function C6(y,W){g5.set(y,W),_2(W,[y])}var Iv=new WeakMap;function M6(y,W){if(typeof y=="object"&&y!==null){var ve=Iv.get(y);return ve!==void 0?ve:(W={value:y,source:W,stack:x1(W)},Iv.set(y,W),W)}return{value:y,source:W,stack:x1(W)}}var Y3=[],dv=0,pv=0;function mv(){for(var y=dv,W=pv=dv=0;W<y;){var ve=Y3[W];Y3[W++]=null;var Ge=Y3[W];Y3[W++]=null;var To=Y3[W];Y3[W++]=null;var Mh=Y3[W];if(Y3[W++]=null,Ge!==null&&To!==null){var f1=Ge.pending;f1===null?To.next=To:(To.next=f1.next,f1.next=To),Ge.pending=To}Mh!==0&&T4(ve,To,Mh)}}function Kv(y,W,ve,Ge){Y3[dv++]=y,Y3[dv++]=W,Y3[dv++]=ve,Y3[dv++]=Ge,pv|=Ge,y.lanes|=Ge,y=y.alternate,y!==null&&(y.lanes|=Ge)}function v6(y,W,ve,Ge){return Kv(y,W,ve,Ge),p7(y)}function oy(y,W){return Kv(y,null,null,W),p7(y)}function T4(y,W,ve){y.lanes|=ve;var Ge=y.alternate;Ge!==null&&(Ge.lanes|=ve);for(var To=!1,Mh=y.return;Mh!==null;)Mh.childLanes|=ve,Ge=Mh.alternate,Ge!==null&&(Ge.childLanes|=ve),Mh.tag===22&&(y=Mh.stateNode,y===null||y._visibility&1||(To=!0)),y=Mh,Mh=Mh.return;return y.tag===3?(Mh=y.stateNode,To&&W!==null&&(To=31-B1(ve),y=Mh.hiddenUpdates,Ge=y[To],Ge===null?y[To]=[W]:Ge.push(W),W.lane=ve|536870912),Mh):null}function p7(y){if(50<ky)throw ky=0,jb=null,Error(a(185));for(var W=y.return;W!==null;)y=W,W=y.return;return y.tag===3?y.stateNode:null}var H5={};function w3(y,W,ve,Ge){this.tag=y,this.key=ve,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=W,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ge,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function A5(y,W,ve,Ge){return new w3(y,W,ve,Ge)}function ly(y){return y=y.prototype,!(!y||!y.isReactComponent)}function a6(y,W){var ve=y.alternate;return ve===null?(ve=A5(y.tag,W,y.key,y.mode),ve.elementType=y.elementType,ve.type=y.type,ve.stateNode=y.stateNode,ve.alternate=y,y.alternate=ve):(ve.pendingProps=W,ve.type=y.type,ve.flags=0,ve.subtreeFlags=0,ve.deletions=null),ve.flags=y.flags&65011712,ve.childLanes=y.childLanes,ve.lanes=y.lanes,ve.child=y.child,ve.memoizedProps=y.memoizedProps,ve.memoizedState=y.memoizedState,ve.updateQueue=y.updateQueue,W=y.dependencies,ve.dependencies=W===null?null:{lanes:W.lanes,firstContext:W.firstContext},ve.sibling=y.sibling,ve.index=y.index,ve.ref=y.ref,ve.refCleanup=y.refCleanup,ve}function gv(y,W){y.flags&=65011714;var ve=y.alternate;return ve===null?(y.childLanes=0,y.lanes=W,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=ve.childLanes,y.lanes=ve.lanes,y.child=ve.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=ve.memoizedProps,y.memoizedState=ve.memoizedState,y.updateQueue=ve.updateQueue,y.type=ve.type,W=ve.dependencies,y.dependencies=W===null?null:{lanes:W.lanes,firstContext:W.firstContext}),y}function Nv(y,W,ve,Ge,To,Mh){var f1=0;if(Ge=y,typeof y=="function")ly(y)&&(f1=1);else if(typeof y=="string")f1=Jw(y,ve,V1.current)?26:y==="html"||y==="head"||y==="body"?27:5;else e:switch(y){case uf:return y=A5(31,ve,W,To),y.elementType=uf,y.lanes=Mh,y;case Xe:return zy(ve.children,To,Mh,W);case wt:f1=8,To|=24;break;case Do:return y=A5(12,ve,W,To|2),y.elementType=Do,y.lanes=Mh,y;case pf:return y=A5(13,ve,W,To),y.elementType=pf,y.lanes=Mh,y;case _h:return y=A5(19,ve,W,To),y.elementType=_h,y.lanes=Mh,y;default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case sr:case Bs:f1=10;break e;case Ko:f1=9;break e;case th:f1=11;break e;case cf:f1=14;break e;case df:f1=16,Ge=null;break e}f1=29,ve=Error(a(130,y===null?"null":typeof y,"")),Ge=null}return W=A5(f1,ve,W,To),W.elementType=y,W.type=Ge,W.lanes=Mh,W}function zy(y,W,ve,Ge){return y=A5(7,y,Ge,W),y.lanes=ve,y}function N9(y,W,ve){return y=A5(6,y,null,W),y.lanes=ve,y}function D9(y,W,ve){return W=A5(4,y.children!==null?y.children:[],y.key,W),W.lanes=ve,W.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},W}var Z7=[],Y7=0,m7=null,z8=0,G5=[],rv=0,g7=null,uy=1,cy="";function v7(y,W){Z7[Y7++]=z8,Z7[Y7++]=m7,m7=y,z8=W}function $x(y,W,ve){G5[rv++]=uy,G5[rv++]=cy,G5[rv++]=g7,g7=y;var Ge=uy;y=cy;var To=32-B1(Ge)-1;Ge&=~(1<<To),ve+=1;var Mh=32-B1(W)+To;if(30<Mh){var f1=To-To%5;Mh=(Ge&(1<<f1)-1).toString(32),Ge>>=f1,To-=f1,uy=1<<32-B1(W)+To|ve<<To|Ge,cy=Mh+y}else uy=1<<Mh|ve<<To|Ge,cy=y}function f_(y){y.return!==null&&(v7(y,1),$x(y,1,0))}function d_(y){for(;y===m7;)m7=Z7[--Y7],Z7[Y7]=null,z8=Z7[--Y7],Z7[Y7]=null;for(;y===g7;)g7=G5[--rv],G5[rv]=null,cy=G5[--rv],G5[rv]=null,uy=G5[--rv],G5[rv]=null}var F5=null,k6=null,P3=!1,y7=null,Wv=!1,b7=Error(a(519));function _7(y){var W=Error(a(418,""));throw U8(M6(W,y)),b7}function p_(y){var W=y.stateNode,ve=y.type,Ge=y.memoizedProps;switch(W[b2]=y,W[P2]=Ge,ve){case"dialog":T3("cancel",W),T3("close",W);break;case"iframe":case"object":case"embed":T3("load",W);break;case"video":case"audio":for(ve=0;ve<q5.length;ve++)T3(q5[ve],W);break;case"source":T3("error",W);break;case"img":case"image":case"link":T3("error",W),T3("load",W);break;case"details":T3("toggle",W);break;case"input":T3("invalid",W),H4(W,Ge.value,Ge.defaultValue,Ge.checked,Ge.defaultChecked,Ge.type,Ge.name,!0),c3(W);break;case"select":T3("invalid",W);break;case"textarea":T3("invalid",W),r1(W,Ge.value,Ge.defaultValue,Ge.children),c3(W)}ve=Ge.children,typeof ve!="string"&&typeof ve!="number"&&typeof ve!="bigint"||W.textContent===""+ve||Ge.suppressHydrationWarning===!0||yx(W.textContent,ve)?(Ge.popover!=null&&(T3("beforetoggle",W),T3("toggle",W)),Ge.onScroll!=null&&T3("scroll",W),Ge.onScrollEnd!=null&&T3("scrollend",W),Ge.onClick!=null&&(W.onclick=t_),W=!0):W=!1,W||_7(y)}function zx(y){for(F5=y.return;F5;)switch(F5.tag){case 5:case 13:Wv=!1;return;case 27:case 3:Wv=!0;return;default:F5=F5.return}}function Q7(y){if(y!==F5)return!1;if(!P3)return zx(y),P3=!0,!1;var W=y.tag,ve;if((ve=W!==3&&W!==27)&&((ve=W===5)&&(ve=y.type,ve=!(ve!=="form"&&ve!=="button")||_x(y.type,y.memoizedProps)),ve=!ve),ve&&k6&&_7(y),zx(y),W===13){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(a(317));e:{for(y=y.nextSibling,W=0;y;){if(y.nodeType===8)if(ve=y.data,ve==="/$"){if(W===0){k6=Cv(y.nextSibling);break e}W--}else ve!=="$"&&ve!=="$!"&&ve!=="$?"||W++;y=y.nextSibling}k6=null}}else W===27?(W=k6,Ny(y.type)?(y=L8,L8=null,k6=y):k6=W):k6=F5?Cv(y.stateNode.nextSibling):null;return!0}function x7(){k6=F5=null,P3=!1}function Ux(){var y=y7;return y!==null&&(q3===null?q3=y:q3.push.apply(q3,y),y7=null),y}function U8(y){y7===null?y7=[y]:y7.push(y)}var m_=s1(null),Uy=null,Xv=null;function hy(y,W,ve){_1(m_,W._currentValue),W._currentValue=ve}function iv(y){y._currentValue=m_.current,b1(m_)}function J7(y,W,ve){for(;y!==null;){var Ge=y.alternate;if((y.childLanes&W)!==W?(y.childLanes|=W,Ge!==null&&(Ge.childLanes|=W)):Ge!==null&&(Ge.childLanes&W)!==W&&(Ge.childLanes|=W),y===ve)break;y=y.return}}function j8(y,W,ve,Ge){var To=y.child;for(To!==null&&(To.return=y);To!==null;){var Mh=To.dependencies;if(Mh!==null){var f1=To.child;Mh=Mh.firstContext;e:for(;Mh!==null;){var S1=Mh;Mh=To;for(var H1=0;H1<W.length;H1++)if(S1.context===W[H1]){Mh.lanes|=ve,S1=Mh.alternate,S1!==null&&(S1.lanes|=ve),J7(Mh.return,ve,y),Ge||(f1=null);break e}Mh=S1.next}}else if(To.tag===18){if(f1=To.return,f1===null)throw Error(a(341));f1.lanes|=ve,Mh=f1.alternate,Mh!==null&&(Mh.lanes|=ve),J7(f1,ve,y),f1=null}else f1=To.child;if(f1!==null)f1.return=To;else for(f1=To;f1!==null;){if(f1===y){f1=null;break}if(To=f1.sibling,To!==null){To.return=f1.return,f1=To;break}f1=f1.return}To=f1}}function fy(y,W,ve,Ge){y=null;for(var To=W,Mh=!1;To!==null;){if(!Mh){if((To.flags&524288)!==0)Mh=!0;else if((To.flags&262144)!==0)break}if(To.tag===10){var f1=To.alternate;if(f1===null)throw Error(a(387));if(f1=f1.memoizedProps,f1!==null){var S1=To.type;X4(To.pendingProps.value,f1.value)||(y!==null?y.push(S1):y=[S1])}}else if(To===R2.current){if(f1=To.alternate,f1===null)throw Error(a(387));f1.memoizedState.memoizedState!==To.memoizedState.memoizedState&&(y!==null?y.push(S9):y=[S9])}To=To.return}y!==null&&j8(W,y,ve,Ge),W.flags|=262144}function Zv(y){for(y=y.firstContext;y!==null;){if(!X4(y.context._currentValue,y.memoizedValue))return!0;y=y.next}return!1}function vv(y){Uy=y,Xv=null,y=y.dependencies,y!==null&&(y.firstContext=null)}function Y6(y){return Dv(Uy,y)}function e8(y,W){return Uy===null&&vv(y),Dv(y,W)}function Dv(y,W){var ve=W._currentValue;if(W={context:W,memoizedValue:ve,next:null},Xv===null){if(y===null)throw Error(a(308));Xv=W,y.dependencies={lanes:0,firstContext:W},y.flags|=524288}else Xv=Xv.next=W;return ve}var fS=typeof AbortController<"u"?AbortController:function(){var y=[],W=this.signal={aborted:!1,addEventListener:function(ve,Ge){y.push(Ge)}};this.abort=function(){W.aborted=!0,y.forEach(function(ve){return ve()})}},dy=t.unstable_scheduleCallback,dS=t.unstable_NormalPriority,Q6={$$typeof:Bs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function g_(){return{controller:new fS,data:new Map,refCount:0}}function nv(y){y.refCount--,y.refCount===0&&dy(dS,function(){y.controller.abort()})}var H8=null,L9=0,t8=0,r8=null;function O9(y,W){if(H8===null){var ve=H8=[];L9=0,t8=fx(),r8={status:"pending",value:void 0,then:function(Ge){ve.push(Ge)}}}return L9++,W.then(G8,G8),W}function G8(){if(--L9===0&&H8!==null){r8!==null&&(r8.status="fulfilled");var y=H8;H8=null,t8=0,r8=null;for(var W=0;W<y.length;W++)(0,y[W])()}}function v_(y,W){var ve=[],Ge={status:"pending",value:null,reason:null,then:function(To){ve.push(To)}};return y.then(function(){Ge.status="fulfilled",Ge.value=W;for(var To=0;To<ve.length;To++)(0,ve[To])(W)},function(To){for(Ge.status="rejected",Ge.reason=To,To=0;To<ve.length;To++)(0,ve[To])(void 0)}),Ge}var F9=wh.S;wh.S=function(y,W){typeof W=="object"&&W!==null&&typeof W.then=="function"&&O9(y,W),F9!==null&&F9(y,W)};var w7=s1(null);function Lv(){var y=w7.current;return y!==null?y:Q3.pooledCache}function yv(y,W){W===null?_1(w7,w7.current):_1(w7,W.pool)}function y_(){var y=Lv();return y===null?null:{parent:Q6._currentValue,pool:y}}var K8=Error(a(460)),i8=Error(a(474)),v5=Error(a(542)),b_={then:function(){}};function B4(y){return y=y.status,y==="fulfilled"||y==="rejected"}function V9(){}function jx(y,W,ve){switch(ve=y[ve],ve===void 0?y.push(W):ve!==W&&(W.then(V9,V9),W=ve),W.status){case"fulfilled":return W.value;case"rejected":throw y=W.reason,__(y),y;default:if(typeof W.status=="string")W.then(V9,V9);else{if(y=Q3,y!==null&&100<y.shellSuspendCounter)throw Error(a(482));y=W,y.status="pending",y.then(function(Ge){if(W.status==="pending"){var To=W;To.status="fulfilled",To.value=Ge}},function(Ge){if(W.status==="pending"){var To=W;To.status="rejected",To.reason=Ge}})}switch(W.status){case"fulfilled":return W.value;case"rejected":throw y=W.reason,__(y),y}throw n8=W,K8}}var n8=null;function S7(){if(n8===null)throw Error(a(459));var y=n8;return n8=null,y}function __(y){if(y===K8||y===v5)throw Error(a(483))}var jy=!1;function x_(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ov(y,W){y=y.updateQueue,W.updateQueue===y&&(W.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,callbacks:null})}function py(y){return{lane:y,tag:0,payload:null,callback:null,next:null}}function Hy(y,W,ve){var Ge=y.updateQueue;if(Ge===null)return null;if(Ge=Ge.shared,(B3&2)!==0){var To=Ge.pending;return To===null?W.next=W:(W.next=To.next,To.next=W),Ge.pending=W,W=p7(y),T4(y,null,ve),W}return Kv(y,Ge,W,ve),p7(y)}function a8(y,W,ve){if(W=W.updateQueue,W!==null&&(W=W.shared,(ve&4194048)!==0)){var Ge=W.lanes;Ge&=y.pendingLanes,ve|=Ge,W.lanes=ve,o4(y,ve)}}function w_(y,W){var ve=y.updateQueue,Ge=y.alternate;if(Ge!==null&&(Ge=Ge.updateQueue,ve===Ge)){var To=null,Mh=null;if(ve=ve.firstBaseUpdate,ve!==null){do{var f1={lane:ve.lane,tag:ve.tag,payload:ve.payload,callback:null,next:null};Mh===null?To=Mh=f1:Mh=Mh.next=f1,ve=ve.next}while(ve!==null);Mh===null?To=Mh=W:Mh=Mh.next=W}else To=Mh=W;ve={baseState:Ge.baseState,firstBaseUpdate:To,lastBaseUpdate:Mh,shared:Ge.shared,callbacks:Ge.callbacks},y.updateQueue=ve;return}y=ve.lastBaseUpdate,y===null?ve.firstBaseUpdate=W:y.next=W,ve.lastBaseUpdate=W}var S_=!1;function av(){if(S_){var y=r8;if(y!==null)throw y}}function W8(y,W,ve,Ge){S_=!1;var To=y.updateQueue;jy=!1;var Mh=To.firstBaseUpdate,f1=To.lastBaseUpdate,S1=To.shared.pending;if(S1!==null){To.shared.pending=null;var H1=S1,y2=H1.next;H1.next=null,f1===null?Mh=y2:f1.next=y2,f1=H1;var U2=y.alternate;U2!==null&&(U2=U2.updateQueue,S1=U2.lastBaseUpdate,S1!==f1&&(S1===null?U2.firstBaseUpdate=y2:S1.next=y2,U2.lastBaseUpdate=H1))}if(Mh!==null){var Q2=To.baseState;f1=0,U2=y2=H1=null,S1=Mh;do{var d2=S1.lane&-536870913,M2=d2!==S1.lane;if(M2?(I3&d2)===d2:(Ge&d2)===d2){d2!==0&&d2===t8&&(S_=!0),U2!==null&&(U2=U2.next={lane:0,tag:S1.tag,payload:S1.payload,callback:null,next:null});e:{var n3=y,J4=S1;d2=W;var X3=ve;switch(J4.tag){case 1:if(n3=J4.payload,typeof n3=="function"){Q2=n3.call(X3,Q2,d2);break e}Q2=n3;break e;case 3:n3.flags=n3.flags&-65537|128;case 0:if(n3=J4.payload,d2=typeof n3=="function"?n3.call(X3,Q2,d2):n3,d2==null)break e;Q2=Z({},Q2,d2);break e;case 2:jy=!0}}d2=S1.callback,d2!==null&&(y.flags|=64,M2&&(y.flags|=8192),M2=To.callbacks,M2===null?To.callbacks=[d2]:M2.push(d2))}else M2={lane:d2,tag:S1.tag,payload:S1.payload,callback:S1.callback,next:null},U2===null?(y2=U2=M2,H1=Q2):U2=U2.next=M2,f1|=d2;if(S1=S1.next,S1===null){if(S1=To.shared.pending,S1===null)break;M2=S1,S1=M2.next,M2.next=null,To.lastBaseUpdate=M2,To.shared.pending=null}}while(!0);U2===null&&(H1=Q2),To.baseState=H1,To.firstBaseUpdate=y2,To.lastBaseUpdate=U2,Mh===null&&(To.shared.lanes=0),Ay|=f1,y.lanes=f1,y.memoizedState=Q2}}function Hx(y,W){if(typeof y!="function")throw Error(a(191,y));y.call(W)}function Gx(y,W){var ve=y.callbacks;if(ve!==null)for(y.callbacks=null,y=0;y<ve.length;y++)Hx(ve[y],W)}var E7=s1(null),X8=s1(0);function E_(y,W){y=X5,_1(X8,y),_1(E7,W),X5=y|W.baseLanes}function T_(){_1(X8,X5),_1(E7,E7.current)}function A_(){X5=X8.current,b1(E7),b1(X8)}var Gy=0,b3=null,V3=null,B6=null,B9=!1,s8=!1,Ky=!1,T7=0,A7=0,C7=null,q9=0;function I6(){throw Error(a(321))}function Z8(y,W){if(W===null)return!1;for(var ve=0;ve<W.length&&ve<y.length;ve++)if(!X4(y[ve],W[ve]))return!1;return!0}function Y8(y,W,ve,Ge,To,Mh){return Gy=Mh,b3=W,W.memoizedState=null,W.updateQueue=null,W.lanes=0,wh.H=y===null||y.memoizedState===null?V_:B_,Ky=!1,Mh=ve(Ge,To),Ky=!1,s8&&(Mh=Wx(W,ve,Ge,To)),Kx(y),Mh}function Kx(y){wh.H=ov;var W=V3!==null&&V3.next!==null;if(Gy=0,B6=V3=b3=null,B9=!1,A7=0,C7=null,W)throw Error(a(300));y===null||l5||(y=y.dependencies,y!==null&&Zv(y)&&(l5=!0))}function Wx(y,W,ve,Ge){b3=y;var To=0;do{if(s8&&(C7=null),A7=0,s8=!1,25<=To)throw Error(a(301));if(To+=1,B6=V3=null,y.updateQueue!=null){var Mh=y.updateQueue;Mh.lastEffect=null,Mh.events=null,Mh.stores=null,Mh.memoCache!=null&&(Mh.memoCache.index=0)}wh.H=S6,Mh=W(ve,Ge)}while(s8);return Mh}function pS(){var y=wh.H,W=y.useState()[0];return W=typeof W.then=="function"?Q8(W):W,y=y.useState()[0],(V3!==null?V3.memoizedState:null)!==y&&(b3.flags|=1024),W}function $9(){var y=T7!==0;return T7=0,y}function C_(y,W,ve){W.updateQueue=y.updateQueue,W.flags&=-2053,y.lanes&=~ve}function M_(y){if(B9){for(y=y.memoizedState;y!==null;){var W=y.queue;W!==null&&(W.pending=null),y=y.next}B9=!1}Gy=0,B6=V3=b3=null,s8=!1,A7=T7=0,C7=null}function C5(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return B6===null?b3.memoizedState=B6=y:B6=B6.next=y,B6}function q6(){if(V3===null){var y=b3.alternate;y=y!==null?y.memoizedState:null}else y=V3.next;var W=B6===null?b3.memoizedState:B6.next;if(W!==null)B6=W,V3=y;else{if(y===null)throw b3.alternate===null?Error(a(467)):Error(a(310));V3=y,y={memoizedState:V3.memoizedState,baseState:V3.baseState,baseQueue:V3.baseQueue,queue:V3.queue,next:null},B6===null?b3.memoizedState=B6=y:B6=B6.next=y}return B6}function o5(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Q8(y){var W=A7;return A7+=1,C7===null&&(C7=[]),y=jx(C7,y,W),W=b3,(B6===null?W.memoizedState:B6.next)===null&&(W=W.alternate,wh.H=W===null||W.memoizedState===null?V_:B_),y}function J8(y){if(y!==null&&typeof y=="object"){if(typeof y.then=="function")return Q8(y);if(y.$$typeof===Bs)return Y6(y)}throw Error(a(438,String(y)))}function z9(y){var W=null,ve=b3.updateQueue;if(ve!==null&&(W=ve.memoCache),W==null){var Ge=b3.alternate;Ge!==null&&(Ge=Ge.updateQueue,Ge!==null&&(Ge=Ge.memoCache,Ge!=null&&(W={data:Ge.data.map(function(To){return To.slice()}),index:0})))}if(W==null&&(W={data:[],index:0}),ve===null&&(ve=o5(),b3.updateQueue=ve),ve.memoCache=W,ve=W.data[W.index],ve===void 0)for(ve=W.data[W.index]=Array(y),Ge=0;Ge<y;Ge++)ve[Ge]=li;return W.index++,ve}function my(y,W){return typeof W=="function"?W(y):W}function U9(y){var W=q6();return k_(W,V3,y)}function k_(y,W,ve){var Ge=y.queue;if(Ge===null)throw Error(a(311));Ge.lastRenderedReducer=ve;var To=y.baseQueue,Mh=Ge.pending;if(Mh!==null){if(To!==null){var f1=To.next;To.next=Mh.next,Mh.next=f1}W.baseQueue=To=Mh,Ge.pending=null}if(Mh=y.baseState,To===null)y.memoizedState=Mh;else{W=To.next;var S1=f1=null,H1=null,y2=W,U2=!1;do{var Q2=y2.lane&-536870913;if(Q2!==y2.lane?(I3&Q2)===Q2:(Gy&Q2)===Q2){var d2=y2.revertLane;if(d2===0)H1!==null&&(H1=H1.next={lane:0,revertLane:0,action:y2.action,hasEagerState:y2.hasEagerState,eagerState:y2.eagerState,next:null}),Q2===t8&&(U2=!0);else if((Gy&d2)===d2){y2=y2.next,d2===t8&&(U2=!0);continue}else Q2={lane:0,revertLane:y2.revertLane,action:y2.action,hasEagerState:y2.hasEagerState,eagerState:y2.eagerState,next:null},H1===null?(S1=H1=Q2,f1=Mh):H1=H1.next=Q2,b3.lanes|=d2,Ay|=d2;Q2=y2.action,Ky&&ve(Mh,Q2),Mh=y2.hasEagerState?y2.eagerState:ve(Mh,Q2)}else d2={lane:Q2,revertLane:y2.revertLane,action:y2.action,hasEagerState:y2.hasEagerState,eagerState:y2.eagerState,next:null},H1===null?(S1=H1=d2,f1=Mh):H1=H1.next=d2,b3.lanes|=Q2,Ay|=Q2;y2=y2.next}while(y2!==null&&y2!==W);if(H1===null?f1=Mh:H1.next=S1,!X4(Mh,y.memoizedState)&&(l5=!0,U2&&(ve=r8,ve!==null)))throw ve;y.memoizedState=Mh,y.baseState=f1,y.baseQueue=H1,Ge.lastRenderedState=Mh}return To===null&&(Ge.lanes=0),[y.memoizedState,Ge.dispatch]}function e9(y){var W=q6(),ve=W.queue;if(ve===null)throw Error(a(311));ve.lastRenderedReducer=y;var Ge=ve.dispatch,To=ve.pending,Mh=W.memoizedState;if(To!==null){ve.pending=null;var f1=To=To.next;do Mh=y(Mh,f1.action),f1=f1.next;while(f1!==To);X4(Mh,W.memoizedState)||(l5=!0),W.memoizedState=Mh,W.baseQueue===null&&(W.baseState=Mh),ve.lastRenderedState=Mh}return[Mh,Ge]}function R_(y,W,ve){var Ge=b3,To=q6(),Mh=P3;if(Mh){if(ve===void 0)throw Error(a(407));ve=ve()}else ve=W();var f1=!X4((V3||To).memoizedState,ve);f1&&(To.memoizedState=ve,l5=!0),To=To.queue;var S1=P_.bind(null,Ge,To,y);if(M5(2048,8,S1,[y]),To.getSnapshot!==W||f1||B6!==null&&B6.memoizedState.tag&1){if(Ge.flags|=2048,f6(9,i9(),M7.bind(null,Ge,To,ve,W),null),Q3===null)throw Error(a(349));Mh||(Gy&124)!==0||$6(Ge,W,ve)}return ve}function $6(y,W,ve){y.flags|=16384,y={getSnapshot:W,value:ve},W=b3.updateQueue,W===null?(W=o5(),b3.updateQueue=W,W.stores=[y]):(ve=W.stores,ve===null?W.stores=[y]:ve.push(y))}function M7(y,W,ve,Ge){W.value=ve,W.getSnapshot=Ge,o8(W)&&I_(y)}function P_(y,W,ve){return ve(function(){o8(W)&&I_(y)})}function o8(y){var W=y.getSnapshot;y=y.value;try{var ve=W();return!X4(y,ve)}catch{return!0}}function I_(y){var W=oy(y,2);W!==null&&o6(W,y,2)}function l8(y){var W=C5();if(typeof y=="function"){var ve=y;if(y=ve(),Ky){L1(!0);try{ve()}finally{L1(!1)}}}return W.memoizedState=W.baseState=y,W.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:my,lastRenderedState:y},W}function N_(y,W,ve,Ge){return y.baseState=ve,k_(y,V3,typeof Ge=="function"?Ge:my)}function mS(y,W,ve,Ge,To){if(d3(y))throw Error(a(485));if(y=W.action,y!==null){var Mh={payload:To,action:y,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f1){Mh.listeners.push(f1)}};wh.T!==null?ve(!0):Mh.isTransition=!1,Ge(Mh),ve=W.pending,ve===null?(Mh.next=W.pending=Mh,y5(W,Mh)):(Mh.next=ve.next,W.pending=ve.next=Mh)}}function y5(y,W){var ve=W.action,Ge=W.payload,To=y.state;if(W.isTransition){var Mh=wh.T,f1={};wh.T=f1;try{var S1=ve(To,Ge),H1=wh.S;H1!==null&&H1(f1,S1),t9(y,W,S1)}catch(y2){r9(y,W,y2)}finally{wh.T=Mh}}else try{Mh=ve(To,Ge),t9(y,W,Mh)}catch(y2){r9(y,W,y2)}}function t9(y,W,ve){ve!==null&&typeof ve=="object"&&typeof ve.then=="function"?ve.then(function(Ge){Wy(y,W,Ge)},function(Ge){return r9(y,W,Ge)}):Wy(y,W,ve)}function Wy(y,W,ve){W.status="fulfilled",W.value=ve,N6(W),y.state=ve,W=y.pending,W!==null&&(ve=W.next,ve===W?y.pending=null:(ve=ve.next,W.next=ve,y5(y,ve)))}function r9(y,W,ve){var Ge=y.pending;if(y.pending=null,Ge!==null){Ge=Ge.next;do W.status="rejected",W.reason=ve,N6(W),W=W.next;while(W!==Ge)}y.action=null}function N6(y){y=y.listeners;for(var W=0;W<y.length;W++)(0,y[W])()}function Xx(y,W){return W}function D_(y,W){if(P3){var ve=Q3.formState;if(ve!==null){e:{var Ge=b3;if(P3){if(k6){t:{for(var To=k6,Mh=Wv;To.nodeType!==8;){if(!Mh){To=null;break t}if(To=Cv(To.nextSibling),To===null){To=null;break t}}Mh=To.data,To=Mh==="F!"||Mh==="F"?To:null}if(To){k6=Cv(To.nextSibling),Ge=To.data==="F!";break e}}_7(Ge)}Ge=!1}Ge&&(W=ve[0])}}return ve=C5(),ve.memoizedState=ve.baseState=W,Ge={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xx,lastRenderedState:W},ve.queue=Ge,ve=R7.bind(null,b3,Ge),Ge.dispatch=ve,Ge=l8(!1),Mh=R6.bind(null,b3,!1,Ge.queue),Ge=C5(),To={state:W,dispatch:null,action:y,pending:null},Ge.queue=To,ve=mS.bind(null,b3,To,Mh,ve),To.dispatch=ve,Ge.memoizedState=y,[W,ve,!1]}function u8(y){var W=q6();return Zx(W,V3,y)}function Zx(y,W,ve){if(W=k_(y,W,Xx)[0],y=U9(my)[0],typeof W=="object"&&W!==null&&typeof W.then=="function")try{var Ge=Q8(W)}catch(f1){throw f1===K8?v5:f1}else Ge=W;W=q6();var To=W.queue,Mh=To.dispatch;return ve!==W.memoizedState&&(b3.flags|=2048,f6(9,i9(),L_.bind(null,To,ve),null)),[Ge,Mh,y]}function L_(y,W){y.action=W}function k7(y){var W=q6(),ve=V3;if(ve!==null)return Zx(W,ve,y);q6(),W=W.memoizedState,ve=q6();var Ge=ve.queue.dispatch;return ve.memoizedState=y,[W,Ge,!1]}function f6(y,W,ve,Ge){return y={tag:y,create:ve,deps:Ge,inst:W,next:null},W=b3.updateQueue,W===null&&(W=o5(),b3.updateQueue=W),ve=W.lastEffect,ve===null?W.lastEffect=y.next=y:(Ge=ve.next,ve.next=y,y.next=Ge,W.lastEffect=y),y}function i9(){return{destroy:void 0,resource:void 0}}function gy(){return q6().memoizedState}function n9(y,W,ve,Ge){var To=C5();Ge=Ge===void 0?null:Ge,b3.flags|=y,To.memoizedState=f6(1|W,i9(),ve,Ge)}function M5(y,W,ve,Ge){var To=q6();Ge=Ge===void 0?null:Ge;var Mh=To.memoizedState.inst;V3!==null&&Ge!==null&&Z8(Ge,V3.memoizedState.deps)?To.memoizedState=f6(W,Mh,ve,Ge):(b3.flags|=y,To.memoizedState=f6(1|W,Mh,ve,Ge))}function j9(y,W){n9(8390656,8,y,W)}function c8(y,W){M5(2048,8,y,W)}function Yx(y,W){return M5(4,2,y,W)}function Qx(y,W){return M5(4,4,y,W)}function Jx(y,W){if(typeof W=="function"){y=y();var ve=W(y);return function(){typeof ve=="function"?ve():W(null)}}if(W!=null)return y=y(),W.current=y,function(){W.current=null}}function h8(y,W,ve){ve=ve!=null?ve.concat([y]):null,M5(4,4,Jx.bind(null,W,y),ve)}function Xy(){}function a9(y,W){var ve=q6();W=W===void 0?null:W;var Ge=ve.memoizedState;return W!==null&&Z8(W,Ge[1])?Ge[0]:(ve.memoizedState=[y,W],y)}function ew(y,W){var ve=q6();W=W===void 0?null:W;var Ge=ve.memoizedState;if(W!==null&&Z8(W,Ge[1]))return Ge[0];if(Ge=y(),Ky){L1(!0);try{y()}finally{L1(!1)}}return ve.memoizedState=[Ge,W],Ge}function O_(y,W,ve){return ve===void 0||(Gy&1073741824)!==0?y.memoizedState=W:(y.memoizedState=ve,y=Hb(),b3.lanes|=y,Ay|=y,ve)}function F_(y,W,ve,Ge){return X4(ve,W)?ve:E7.current!==null?(y=O_(y,ve,Ge),X4(y,W)||(l5=!0),y):(Gy&42)===0?(l5=!0,y.memoizedState=ve):(y=Hb(),b3.lanes|=y,Ay|=y,W)}function H9(y,W,ve,Ge,To){var Mh=gf.p;gf.p=Mh!==0&&8>Mh?Mh:8;var f1=wh.T,S1={};wh.T=S1,R6(y,!1,W,ve);try{var H1=To(),y2=wh.S;if(y2!==null&&y2(S1,H1),H1!==null&&typeof H1=="object"&&typeof H1.then=="function"){var U2=v_(H1,Ge);f8(y,W,U2,U6(y))}else f8(y,W,Ge,U6(y))}catch(Q2){f8(y,W,{then:function(){},status:"rejected",reason:Q2},U6())}finally{gf.p=Mh,wh.T=f1}}function gS(){}function D6(y,W,ve,Ge){if(y.tag!==5)throw Error(a(476));var To=tw(y).queue;H9(y,To,W,yh,ve===null?gS:function(){return s9(y),ve(Ge)})}function tw(y){var W=y.memoizedState;if(W!==null)return W;W={memoizedState:yh,baseState:yh,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:my,lastRenderedState:yh},next:null};var ve={};return W.next={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:my,lastRenderedState:ve},next:null},y.memoizedState=W,y=y.alternate,y!==null&&(y.memoizedState=W),W}function s9(y){var W=tw(y).next.queue;f8(y,W,{},U6())}function k5(){return Y6(S9)}function rw(){return q6().memoizedState}function sv(){return q6().memoizedState}function b5(y){for(var W=y.return;W!==null;){switch(W.tag){case 24:case 3:var ve=U6();y=py(ve);var Ge=Hy(W,y,ve);Ge!==null&&(o6(Ge,W,ve),a8(Ge,W,ve)),W={cache:g_()},y.payload=W;return}W=W.return}}function Zy(y,W,ve){var Ge=U6();ve={lane:Ge,revertLane:0,action:ve,hasEagerState:!1,eagerState:null,next:null},d3(y)?z6(W,ve):(ve=v6(y,W,ve,Ge),ve!==null&&(o6(ve,y,Ge),K5(ve,W,Ge)))}function R7(y,W,ve){var Ge=U6();f8(y,W,ve,Ge)}function f8(y,W,ve,Ge){var To={lane:Ge,revertLane:0,action:ve,hasEagerState:!1,eagerState:null,next:null};if(d3(y))z6(W,To);else{var Mh=y.alternate;if(y.lanes===0&&(Mh===null||Mh.lanes===0)&&(Mh=W.lastRenderedReducer,Mh!==null))try{var f1=W.lastRenderedState,S1=Mh(f1,ve);if(To.hasEagerState=!0,To.eagerState=S1,X4(S1,f1))return Kv(y,W,To,0),Q3===null&&mv(),!1}catch{}finally{}if(ve=v6(y,W,To,Ge),ve!==null)return o6(ve,y,Ge),K5(ve,W,Ge),!0}return!1}function R6(y,W,ve,Ge){if(Ge={lane:2,revertLane:fx(),action:Ge,hasEagerState:!1,eagerState:null,next:null},d3(y)){if(W)throw Error(a(479))}else W=v6(y,ve,Ge,2),W!==null&&o6(W,y,2)}function d3(y){var W=y.alternate;return y===b3||W!==null&&W===b3}function z6(y,W){s8=B9=!0;var ve=y.pending;ve===null?W.next=W:(W.next=ve.next,ve.next=W),y.pending=W}function K5(y,W,ve){if((ve&4194048)!==0){var Ge=W.lanes;Ge&=y.pendingLanes,ve|=Ge,W.lanes=ve,o4(y,ve)}}var ov={readContext:Y6,use:J8,useCallback:I6,useContext:I6,useEffect:I6,useImperativeHandle:I6,useLayoutEffect:I6,useInsertionEffect:I6,useMemo:I6,useReducer:I6,useRef:I6,useState:I6,useDebugValue:I6,useDeferredValue:I6,useTransition:I6,useSyncExternalStore:I6,useId:I6,useHostTransitionStatus:I6,useFormState:I6,useActionState:I6,useOptimistic:I6,useMemoCache:I6,useCacheRefresh:I6},V_={readContext:Y6,use:J8,useCallback:function(y,W){return C5().memoizedState=[y,W===void 0?null:W],y},useContext:Y6,useEffect:j9,useImperativeHandle:function(y,W,ve){ve=ve!=null?ve.concat([y]):null,n9(4194308,4,Jx.bind(null,W,y),ve)},useLayoutEffect:function(y,W){return n9(4194308,4,y,W)},useInsertionEffect:function(y,W){n9(4,2,y,W)},useMemo:function(y,W){var ve=C5();W=W===void 0?null:W;var Ge=y();if(Ky){L1(!0);try{y()}finally{L1(!1)}}return ve.memoizedState=[Ge,W],Ge},useReducer:function(y,W,ve){var Ge=C5();if(ve!==void 0){var To=ve(W);if(Ky){L1(!0);try{ve(W)}finally{L1(!1)}}}else To=W;return Ge.memoizedState=Ge.baseState=To,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:To},Ge.queue=y,y=y.dispatch=Zy.bind(null,b3,y),[Ge.memoizedState,y]},useRef:function(y){var W=C5();return y={current:y},W.memoizedState=y},useState:function(y){y=l8(y);var W=y.queue,ve=R7.bind(null,b3,W);return W.dispatch=ve,[y.memoizedState,ve]},useDebugValue:Xy,useDeferredValue:function(y,W){var ve=C5();return O_(ve,y,W)},useTransition:function(){var y=l8(!1);return y=H9.bind(null,b3,y.queue,!0,!1),C5().memoizedState=y,[!1,y]},useSyncExternalStore:function(y,W,ve){var Ge=b3,To=C5();if(P3){if(ve===void 0)throw Error(a(407));ve=ve()}else{if(ve=W(),Q3===null)throw Error(a(349));(I3&124)!==0||$6(Ge,W,ve)}To.memoizedState=ve;var Mh={value:ve,getSnapshot:W};return To.queue=Mh,j9(P_.bind(null,Ge,Mh,y),[y]),Ge.flags|=2048,f6(9,i9(),M7.bind(null,Ge,Mh,ve,W),null),ve},useId:function(){var y=C5(),W=Q3.identifierPrefix;if(P3){var ve=cy,Ge=uy;ve=(Ge&~(1<<32-B1(Ge)-1)).toString(32)+ve,W=""+W+"R"+ve,ve=T7++,0<ve&&(W+="H"+ve.toString(32)),W+=""}else ve=q9++,W=""+W+"r"+ve.toString(32)+"";return y.memoizedState=W},useHostTransitionStatus:k5,useFormState:D_,useActionState:D_,useOptimistic:function(y){var W=C5();W.memoizedState=W.baseState=y;var ve={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return W.queue=ve,W=R6.bind(null,b3,!0,ve),ve.dispatch=W,[y,W]},useMemoCache:z9,useCacheRefresh:function(){return C5().memoizedState=b5.bind(null,b3)}},B_={readContext:Y6,use:J8,useCallback:a9,useContext:Y6,useEffect:c8,useImperativeHandle:h8,useInsertionEffect:Yx,useLayoutEffect:Qx,useMemo:ew,useReducer:U9,useRef:gy,useState:function(){return U9(my)},useDebugValue:Xy,useDeferredValue:function(y,W){var ve=q6();return F_(ve,V3.memoizedState,y,W)},useTransition:function(){var y=U9(my)[0],W=q6().memoizedState;return[typeof y=="boolean"?y:Q8(y),W]},useSyncExternalStore:R_,useId:rw,useHostTransitionStatus:k5,useFormState:u8,useActionState:u8,useOptimistic:function(y,W){var ve=q6();return N_(ve,V3,y,W)},useMemoCache:z9,useCacheRefresh:sv},S6={readContext:Y6,use:J8,useCallback:a9,useContext:Y6,useEffect:c8,useImperativeHandle:h8,useInsertionEffect:Yx,useLayoutEffect:Qx,useMemo:ew,useReducer:e9,useRef:gy,useState:function(){return e9(my)},useDebugValue:Xy,useDeferredValue:function(y,W){var ve=q6();return V3===null?O_(ve,y,W):F_(ve,V3.memoizedState,y,W)},useTransition:function(){var y=e9(my)[0],W=q6().memoizedState;return[typeof y=="boolean"?y:Q8(y),W]},useSyncExternalStore:R_,useId:rw,useHostTransitionStatus:k5,useFormState:k7,useActionState:k7,useOptimistic:function(y,W){var ve=q6();return V3!==null?N_(ve,V3,y,W):(ve.baseState=y,[y,ve.queue.dispatch])},useMemoCache:z9,useCacheRefresh:sv},bv=null,d8=0;function o9(y){var W=d8;return d8+=1,bv===null&&(bv=[]),jx(bv,y,W)}function Yv(y,W){W=W.props.ref,y.ref=W!==void 0?W:null}function Yy(y,W){throw W.$$typeof===me?Error(a(525)):(y=Object.prototype.toString.call(W),Error(a(31,y==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":y)))}function R5(y){var W=y._init;return W(y._payload)}function G9(y){function W(o2,t2){if(y){var g2=o2.deletions;g2===null?(o2.deletions=[t2],o2.flags|=16):g2.push(t2)}}function ve(o2,t2){if(!y)return null;for(;t2!==null;)W(o2,t2),t2=t2.sibling;return null}function Ge(o2){for(var t2=new Map;o2!==null;)o2.key!==null?t2.set(o2.key,o2):t2.set(o2.index,o2),o2=o2.sibling;return t2}function To(o2,t2){return o2=a6(o2,t2),o2.index=0,o2.sibling=null,o2}function Mh(o2,t2,g2){return o2.index=g2,y?(g2=o2.alternate,g2!==null?(g2=g2.index,g2<t2?(o2.flags|=67108866,t2):g2):(o2.flags|=67108866,t2)):(o2.flags|=1048576,t2)}function f1(o2){return y&&o2.alternate===null&&(o2.flags|=67108866),o2}function S1(o2,t2,g2,G2){return t2===null||t2.tag!==6?(t2=N9(g2,o2.mode,G2),t2.return=o2,t2):(t2=To(t2,g2),t2.return=o2,t2)}function H1(o2,t2,g2,G2){var k4=g2.type;return k4===Xe?U2(o2,t2,g2.props.children,G2,g2.key):t2!==null&&(t2.elementType===k4||typeof k4=="object"&&k4!==null&&k4.$$typeof===df&&R5(k4)===t2.type)?(t2=To(t2,g2.props),Yv(t2,g2),t2.return=o2,t2):(t2=Nv(g2.type,g2.key,g2.props,null,o2.mode,G2),Yv(t2,g2),t2.return=o2,t2)}function y2(o2,t2,g2,G2){return t2===null||t2.tag!==4||t2.stateNode.containerInfo!==g2.containerInfo||t2.stateNode.implementation!==g2.implementation?(t2=D9(g2,o2.mode,G2),t2.return=o2,t2):(t2=To(t2,g2.children||[]),t2.return=o2,t2)}function U2(o2,t2,g2,G2,k4){return t2===null||t2.tag!==7?(t2=zy(g2,o2.mode,G2,k4),t2.return=o2,t2):(t2=To(t2,g2),t2.return=o2,t2)}function Q2(o2,t2,g2){if(typeof t2=="string"&&t2!==""||typeof t2=="number"||typeof t2=="bigint")return t2=N9(""+t2,o2.mode,g2),t2.return=o2,t2;if(typeof t2=="object"&&t2!==null){switch(t2.$$typeof){case _e:return g2=Nv(t2.type,t2.key,t2.props,null,o2.mode,g2),Yv(g2,t2),g2.return=o2,g2;case He:return t2=D9(t2,o2.mode,g2),t2.return=o2,t2;case df:var G2=t2._init;return t2=G2(t2._payload),Q2(o2,t2,g2)}if(n1(t2)||Rs(t2))return t2=zy(t2,o2.mode,g2,null),t2.return=o2,t2;if(typeof t2.then=="function")return Q2(o2,o9(t2),g2);if(t2.$$typeof===Bs)return Q2(o2,e8(o2,t2),g2);Yy(o2,t2)}return null}function d2(o2,t2,g2,G2){var k4=t2!==null?t2.key:null;if(typeof g2=="string"&&g2!==""||typeof g2=="number"||typeof g2=="bigint")return k4!==null?null:S1(o2,t2,""+g2,G2);if(typeof g2=="object"&&g2!==null){switch(g2.$$typeof){case _e:return g2.key===k4?H1(o2,t2,g2,G2):null;case He:return g2.key===k4?y2(o2,t2,g2,G2):null;case df:return k4=g2._init,g2=k4(g2._payload),d2(o2,t2,g2,G2)}if(n1(g2)||Rs(g2))return k4!==null?null:U2(o2,t2,g2,G2,null);if(typeof g2.then=="function")return d2(o2,t2,o9(g2),G2);if(g2.$$typeof===Bs)return d2(o2,t2,e8(o2,g2),G2);Yy(o2,g2)}return null}function M2(o2,t2,g2,G2,k4){if(typeof G2=="string"&&G2!==""||typeof G2=="number"||typeof G2=="bigint")return o2=o2.get(g2)||null,S1(t2,o2,""+G2,k4);if(typeof G2=="object"&&G2!==null){switch(G2.$$typeof){case _e:return o2=o2.get(G2.key===null?g2:G2.key)||null,H1(t2,o2,G2,k4);case He:return o2=o2.get(G2.key===null?g2:G2.key)||null,y2(t2,o2,G2,k4);case df:var _3=G2._init;return G2=_3(G2._payload),M2(o2,t2,g2,G2,k4)}if(n1(G2)||Rs(G2))return o2=o2.get(g2)||null,U2(t2,o2,G2,k4,null);if(typeof G2.then=="function")return M2(o2,t2,g2,o9(G2),k4);if(G2.$$typeof===Bs)return M2(o2,t2,g2,e8(t2,G2),k4);Yy(t2,G2)}return null}function n3(o2,t2,g2,G2){for(var k4=null,_3=null,q4=t2,r3=t2=0,H6=null;q4!==null&&r3<g2.length;r3++){q4.index>r3?(H6=q4,q4=null):H6=q4.sibling;var N3=d2(o2,q4,g2[r3],G2);if(N3===null){q4===null&&(q4=H6);break}y&&q4&&N3.alternate===null&&W(o2,q4),t2=Mh(N3,t2,r3),_3===null?k4=N3:_3.sibling=N3,_3=N3,q4=H6}if(r3===g2.length)return ve(o2,q4),P3&&v7(o2,r3),k4;if(q4===null){for(;r3<g2.length;r3++)q4=Q2(o2,g2[r3],G2),q4!==null&&(t2=Mh(q4,t2,r3),_3===null?k4=q4:_3.sibling=q4,_3=q4);return P3&&v7(o2,r3),k4}for(q4=Ge(q4);r3<g2.length;r3++)H6=M2(q4,o2,r3,g2[r3],G2),H6!==null&&(y&&H6.alternate!==null&&q4.delete(H6.key===null?r3:H6.key),t2=Mh(H6,t2,r3),_3===null?k4=H6:_3.sibling=H6,_3=H6);return y&&q4.forEach(function(Q5){return W(o2,Q5)}),P3&&v7(o2,r3),k4}function J4(o2,t2,g2,G2){if(g2==null)throw Error(a(151));for(var k4=null,_3=null,q4=t2,r3=t2=0,H6=null,N3=g2.next();q4!==null&&!N3.done;r3++,N3=g2.next()){q4.index>r3?(H6=q4,q4=null):H6=q4.sibling;var Q5=d2(o2,q4,N3.value,G2);if(Q5===null){q4===null&&(q4=H6);break}y&&q4&&Q5.alternate===null&&W(o2,q4),t2=Mh(Q5,t2,r3),_3===null?k4=Q5:_3.sibling=Q5,_3=Q5,q4=H6}if(N3.done)return ve(o2,q4),P3&&v7(o2,r3),k4;if(q4===null){for(;!N3.done;r3++,N3=g2.next())N3=Q2(o2,N3.value,G2),N3!==null&&(t2=Mh(N3,t2,r3),_3===null?k4=N3:_3.sibling=N3,_3=N3);return P3&&v7(o2,r3),k4}for(q4=Ge(q4);!N3.done;r3++,N3=g2.next())N3=M2(q4,o2,r3,N3.value,G2),N3!==null&&(y&&N3.alternate!==null&&q4.delete(N3.key===null?r3:N3.key),t2=Mh(N3,t2,r3),_3===null?k4=N3:_3.sibling=N3,_3=N3);return y&&q4.forEach(function(LS){return W(o2,LS)}),P3&&v7(o2,r3),k4}function X3(o2,t2,g2,G2){if(typeof g2=="object"&&g2!==null&&g2.type===Xe&&g2.key===null&&(g2=g2.props.children),typeof g2=="object"&&g2!==null){switch(g2.$$typeof){case _e:e:{for(var k4=g2.key;t2!==null;){if(t2.key===k4){if(k4=g2.type,k4===Xe){if(t2.tag===7){ve(o2,t2.sibling),G2=To(t2,g2.props.children),G2.return=o2,o2=G2;break e}}else if(t2.elementType===k4||typeof k4=="object"&&k4!==null&&k4.$$typeof===df&&R5(k4)===t2.type){ve(o2,t2.sibling),G2=To(t2,g2.props),Yv(G2,g2),G2.return=o2,o2=G2;break e}ve(o2,t2);break}else W(o2,t2);t2=t2.sibling}g2.type===Xe?(G2=zy(g2.props.children,o2.mode,G2,g2.key),G2.return=o2,o2=G2):(G2=Nv(g2.type,g2.key,g2.props,null,o2.mode,G2),Yv(G2,g2),G2.return=o2,o2=G2)}return f1(o2);case He:e:{for(k4=g2.key;t2!==null;){if(t2.key===k4)if(t2.tag===4&&t2.stateNode.containerInfo===g2.containerInfo&&t2.stateNode.implementation===g2.implementation){ve(o2,t2.sibling),G2=To(t2,g2.children||[]),G2.return=o2,o2=G2;break e}else{ve(o2,t2);break}else W(o2,t2);t2=t2.sibling}G2=D9(g2,o2.mode,G2),G2.return=o2,o2=G2}return f1(o2);case df:return k4=g2._init,g2=k4(g2._payload),X3(o2,t2,g2,G2)}if(n1(g2))return n3(o2,t2,g2,G2);if(Rs(g2)){if(k4=Rs(g2),typeof k4!="function")throw Error(a(150));return g2=k4.call(g2),J4(o2,t2,g2,G2)}if(typeof g2.then=="function")return X3(o2,t2,o9(g2),G2);if(g2.$$typeof===Bs)return X3(o2,t2,e8(o2,g2),G2);Yy(o2,g2)}return typeof g2=="string"&&g2!==""||typeof g2=="number"||typeof g2=="bigint"?(g2=""+g2,t2!==null&&t2.tag===6?(ve(o2,t2.sibling),G2=To(t2,g2),G2.return=o2,o2=G2):(ve(o2,t2),G2=N9(g2,o2.mode,G2),G2.return=o2,o2=G2),f1(o2)):ve(o2,t2)}return function(o2,t2,g2,G2){try{d8=0;var k4=X3(o2,t2,g2,G2);return bv=null,k4}catch(q4){if(q4===K8||q4===v5)throw q4;var _3=A5(29,q4,null,o2.mode);return _3.lanes=G2,_3.return=o2,_3}finally{}}}var Fv=G9(!0),iw=G9(!1),_v=s1(null),xv=null;function vy(y){var W=y.alternate;_1(L6,L6.current&1),_1(_v,y),xv===null&&(W===null||E7.current!==null||W.memoizedState!==null)&&(xv=y)}function q_(y){if(y.tag===22){if(_1(L6,L6.current),_1(_v,y),xv===null){var W=y.alternate;W!==null&&W.memoizedState!==null&&(xv=y)}}else y6()}function y6(){_1(L6,L6.current),_1(_v,_v.current)}function Qv(y){b1(_v),xv===y&&(xv=null),b1(L6)}var L6=s1(0);function p8(y){for(var W=y;W!==null;){if(W.tag===13){var ve=W.memoizedState;if(ve!==null&&(ve=ve.dehydrated,ve===null||ve.data==="$?"||a_(ve)))return W}else if(W.tag===19&&W.memoizedProps.revealOrder!==void 0){if((W.flags&128)!==0)return W}else if(W.child!==null){W.child.return=W,W=W.child;continue}if(W===y)break;for(;W.sibling===null;){if(W.return===null||W.return===y)return null;W=W.return}W.sibling.return=W.return,W=W.sibling}return null}function K9(y,W,ve,Ge){W=y.memoizedState,ve=ve(Ge,W),ve=ve==null?W:Z({},W,ve),y.memoizedState=ve,y.lanes===0&&(y.updateQueue.baseState=ve)}var $_={enqueueSetState:function(y,W,ve){y=y._reactInternals;var Ge=U6(),To=py(Ge);To.payload=W,ve!=null&&(To.callback=ve),W=Hy(y,To,Ge),W!==null&&(o6(W,y,Ge),a8(W,y,Ge))},enqueueReplaceState:function(y,W,ve){y=y._reactInternals;var Ge=U6(),To=py(Ge);To.tag=1,To.payload=W,ve!=null&&(To.callback=ve),W=Hy(y,To,Ge),W!==null&&(o6(W,y,Ge),a8(W,y,Ge))},enqueueForceUpdate:function(y,W){y=y._reactInternals;var ve=U6(),Ge=py(ve);Ge.tag=2,W!=null&&(Ge.callback=W),W=Hy(y,Ge,ve),W!==null&&(o6(W,y,ve),a8(W,y,ve))}};function W9(y,W,ve,Ge,To,Mh,f1){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(Ge,Mh,f1):W.prototype&&W.prototype.isPureReactComponent?!p3(ve,Ge)||!p3(To,Mh):!0}function Qy(y,W,ve,Ge){y=W.state,typeof W.componentWillReceiveProps=="function"&&W.componentWillReceiveProps(ve,Ge),typeof W.UNSAFE_componentWillReceiveProps=="function"&&W.UNSAFE_componentWillReceiveProps(ve,Ge),W.state!==y&&$_.enqueueReplaceState(W,W.state,null)}function W5(y,W){var ve=W;if("ref"in W){ve={};for(var Ge in W)Ge!=="ref"&&(ve[Ge]=W[Ge])}if(y=y.defaultProps){ve===W&&(ve=Z({},ve));for(var To in y)ve[To]===void 0&&(ve[To]=y[To])}return ve}var P7=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)};function l9(y){P7(y)}function Jv(y){console.error(y)}function m8(y){P7(y)}function X9(y,W){try{var ve=y.onUncaughtError;ve(W.value,{componentStack:W.stack})}catch(Ge){setTimeout(function(){throw Ge})}}function wv(y,W,ve){try{var Ge=y.onCaughtError;Ge(ve.value,{componentStack:ve.stack,errorBoundary:W.tag===1?W.stateNode:null})}catch(To){setTimeout(function(){throw To})}}function z_(y,W,ve){return ve=py(ve),ve.tag=3,ve.payload={element:null},ve.callback=function(){X9(y,W)},ve}function nw(y){return y=py(y),y.tag=3,y}function aw(y,W,ve,Ge){var To=ve.type.getDerivedStateFromError;if(typeof To=="function"){var Mh=Ge.value;y.payload=function(){return To(Mh)},y.callback=function(){wv(W,ve,Ge)}}var f1=ve.stateNode;f1!==null&&typeof f1.componentDidCatch=="function"&&(y.callback=function(){wv(W,ve,Ge),typeof To!="function"&&(Cy===null?Cy=new Set([this]):Cy.add(this));var S1=Ge.stack;this.componentDidCatch(Ge.value,{componentStack:S1!==null?S1:""})})}function sw(y,W,ve,Ge,To){if(ve.flags|=32768,Ge!==null&&typeof Ge=="object"&&typeof Ge.then=="function"){if(W=ve.alternate,W!==null&&fy(W,ve,To,!0),ve=_v.current,ve!==null){switch(ve.tag){case 13:return xv===null?ry():ve.alternate===null&&b6===0&&(b6=3),ve.flags&=-257,ve.flags|=65536,ve.lanes=To,Ge===b_?ve.flags|=16384:(W=ve.updateQueue,W===null?ve.updateQueue=new Set([Ge]):W.add(Ge),M8(y,Ge,To)),!1;case 22:return ve.flags|=65536,Ge===b_?ve.flags|=16384:(W=ve.updateQueue,W===null?(W={transitions:null,markerInstances:null,retryQueue:new Set([Ge])},ve.updateQueue=W):(ve=W.retryQueue,ve===null?W.retryQueue=new Set([Ge]):ve.add(Ge)),M8(y,Ge,To)),!1}throw Error(a(435,ve.tag))}return M8(y,Ge,To),ry(),!1}if(P3)return W=_v.current,W!==null?((W.flags&65536)===0&&(W.flags|=256),W.flags|=65536,W.lanes=To,Ge!==b7&&(y=Error(a(422),{cause:Ge}),U8(M6(y,ve)))):(Ge!==b7&&(W=Error(a(423),{cause:Ge}),U8(M6(W,ve))),y=y.current.alternate,y.flags|=65536,To&=-To,y.lanes|=To,Ge=M6(Ge,ve),To=z_(y.stateNode,Ge,To),w_(y,To),b6!==4&&(b6=2)),!1;var Mh=Error(a(520),{cause:Ge});if(Mh=M6(Mh,ve),p9===null?p9=[Mh]:p9.push(Mh),b6!==4&&(b6=2),W===null)return!0;Ge=M6(Ge,ve),ve=W;do{switch(ve.tag){case 3:return ve.flags|=65536,y=To&-To,ve.lanes|=y,y=z_(ve.stateNode,Ge,y),w_(ve,y),!1;case 1:if(W=ve.type,Mh=ve.stateNode,(ve.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Mh!==null&&typeof Mh.componentDidCatch=="function"&&(Cy===null||!Cy.has(Mh))))return ve.flags|=65536,To&=-To,ve.lanes|=To,To=nw(To),aw(To,y,ve,Ge),w_(ve,To),!1}ve=ve.return}while(ve!==null);return!1}var ow=Error(a(461)),l5=!1;function u5(y,W,ve,Ge){W.child=y===null?iw(W,null,ve,Ge):Fv(W,y.child,ve,Ge)}function U_(y,W,ve,Ge,To){ve=ve.render;var Mh=W.ref;if("ref"in Ge){var f1={};for(var S1 in Ge)S1!=="ref"&&(f1[S1]=Ge[S1])}else f1=Ge;return vv(W),Ge=Y8(y,W,ve,f1,Mh,To),S1=$9(),y!==null&&!l5?(C_(y,W,To),by(y,W,To)):(P3&&S1&&f_(W),W.flags|=1,u5(y,W,Ge,To),W.child)}function j_(y,W,ve,Ge,To){if(y===null){var Mh=ve.type;return typeof Mh=="function"&&!ly(Mh)&&Mh.defaultProps===void 0&&ve.compare===null?(W.tag=15,W.type=Mh,Z9(y,W,Mh,Ge,To)):(y=Nv(ve.type,null,Ge,W,W.mode,To),y.ref=W.ref,y.return=W,W.child=y)}if(Mh=y.child,!Q9(y,To)){var f1=Mh.memoizedProps;if(ve=ve.compare,ve=ve!==null?ve:p3,ve(f1,Ge)&&y.ref===W.ref)return by(y,W,To)}return W.flags|=1,y=a6(Mh,Ge),y.ref=W.ref,y.return=W,W.child=y}function Z9(y,W,ve,Ge,To){if(y!==null){var Mh=y.memoizedProps;if(p3(Mh,Ge)&&y.ref===W.ref)if(l5=!1,W.pendingProps=Ge=Mh,Q9(y,To))(y.flags&131072)!==0&&(l5=!0);else return W.lanes=y.lanes,by(y,W,To)}return u9(y,W,ve,Ge,To)}function lw(y,W,ve){var Ge=W.pendingProps,To=Ge.children,Mh=y!==null?y.memoizedState:null;if(Ge.mode==="hidden"){if((W.flags&128)!==0){if(Ge=Mh!==null?Mh.baseLanes|ve:ve,y!==null){for(To=W.child=y.child,Mh=0;To!==null;)Mh=Mh|To.lanes|To.childLanes,To=To.sibling;W.childLanes=Mh&~Ge}else W.childLanes=0,W.child=null;return H_(y,W,Ge,ve)}if((ve&536870912)!==0)W.memoizedState={baseLanes:0,cachePool:null},y!==null&&yv(W,Mh!==null?Mh.cachePool:null),Mh!==null?E_(W,Mh):T_(),q_(W);else return W.lanes=W.childLanes=536870912,H_(y,W,Mh!==null?Mh.baseLanes|ve:ve,ve)}else Mh!==null?(yv(W,Mh.cachePool),E_(W,Mh),y6(),W.memoizedState=null):(y!==null&&yv(W,null),T_(),y6());return u5(y,W,To,ve),W.child}function H_(y,W,ve,Ge){var To=Lv();return To=To===null?null:{parent:Q6._currentValue,pool:To},W.memoizedState={baseLanes:ve,cachePool:To},y!==null&&yv(W,null),T_(),q_(W),y!==null&&fy(y,W,Ge,!0),null}function g8(y,W){var ve=W.ref;if(ve===null)y!==null&&y.ref!==null&&(W.flags|=4194816);else{if(typeof ve!="function"&&typeof ve!="object")throw Error(a(284));(y===null||y.ref!==ve)&&(W.flags|=4194816)}}function u9(y,W,ve,Ge,To){return vv(W),ve=Y8(y,W,ve,Ge,void 0,To),Ge=$9(),y!==null&&!l5?(C_(y,W,To),by(y,W,To)):(P3&&Ge&&f_(W),W.flags|=1,u5(y,W,ve,To),W.child)}function uw(y,W,ve,Ge,To,Mh){return vv(W),W.updateQueue=null,ve=Wx(W,Ge,ve,To),Kx(y),Ge=$9(),y!==null&&!l5?(C_(y,W,Mh),by(y,W,Mh)):(P3&&Ge&&f_(W),W.flags|=1,u5(y,W,ve,Mh),W.child)}function cw(y,W,ve,Ge,To){if(vv(W),W.stateNode===null){var Mh=H5,f1=ve.contextType;typeof f1=="object"&&f1!==null&&(Mh=Y6(f1)),Mh=new ve(Ge,Mh),W.memoizedState=Mh.state!==null&&Mh.state!==void 0?Mh.state:null,Mh.updater=$_,W.stateNode=Mh,Mh._reactInternals=W,Mh=W.stateNode,Mh.props=Ge,Mh.state=W.memoizedState,Mh.refs={},x_(W),f1=ve.contextType,Mh.context=typeof f1=="object"&&f1!==null?Y6(f1):H5,Mh.state=W.memoizedState,f1=ve.getDerivedStateFromProps,typeof f1=="function"&&(K9(W,ve,f1,Ge),Mh.state=W.memoizedState),typeof ve.getDerivedStateFromProps=="function"||typeof Mh.getSnapshotBeforeUpdate=="function"||typeof Mh.UNSAFE_componentWillMount!="function"&&typeof Mh.componentWillMount!="function"||(f1=Mh.state,typeof Mh.componentWillMount=="function"&&Mh.componentWillMount(),typeof Mh.UNSAFE_componentWillMount=="function"&&Mh.UNSAFE_componentWillMount(),f1!==Mh.state&&$_.enqueueReplaceState(Mh,Mh.state,null),W8(W,Ge,Mh,To),av(),Mh.state=W.memoizedState),typeof Mh.componentDidMount=="function"&&(W.flags|=4194308),Ge=!0}else if(y===null){Mh=W.stateNode;var S1=W.memoizedProps,H1=W5(ve,S1);Mh.props=H1;var y2=Mh.context,U2=ve.contextType;f1=H5,typeof U2=="object"&&U2!==null&&(f1=Y6(U2));var Q2=ve.getDerivedStateFromProps;U2=typeof Q2=="function"||typeof Mh.getSnapshotBeforeUpdate=="function",S1=W.pendingProps!==S1,U2||typeof Mh.UNSAFE_componentWillReceiveProps!="function"&&typeof Mh.componentWillReceiveProps!="function"||(S1||y2!==f1)&&Qy(W,Mh,Ge,f1),jy=!1;var d2=W.memoizedState;Mh.state=d2,W8(W,Ge,Mh,To),av(),y2=W.memoizedState,S1||d2!==y2||jy?(typeof Q2=="function"&&(K9(W,ve,Q2,Ge),y2=W.memoizedState),(H1=jy||W9(W,ve,H1,Ge,d2,y2,f1))?(U2||typeof Mh.UNSAFE_componentWillMount!="function"&&typeof Mh.componentWillMount!="function"||(typeof Mh.componentWillMount=="function"&&Mh.componentWillMount(),typeof Mh.UNSAFE_componentWillMount=="function"&&Mh.UNSAFE_componentWillMount()),typeof Mh.componentDidMount=="function"&&(W.flags|=4194308)):(typeof Mh.componentDidMount=="function"&&(W.flags|=4194308),W.memoizedProps=Ge,W.memoizedState=y2),Mh.props=Ge,Mh.state=y2,Mh.context=f1,Ge=H1):(typeof Mh.componentDidMount=="function"&&(W.flags|=4194308),Ge=!1)}else{Mh=W.stateNode,Ov(y,W),f1=W.memoizedProps,U2=W5(ve,f1),Mh.props=U2,Q2=W.pendingProps,d2=Mh.context,y2=ve.contextType,H1=H5,typeof y2=="object"&&y2!==null&&(H1=Y6(y2)),S1=ve.getDerivedStateFromProps,(y2=typeof S1=="function"||typeof Mh.getSnapshotBeforeUpdate=="function")||typeof Mh.UNSAFE_componentWillReceiveProps!="function"&&typeof Mh.componentWillReceiveProps!="function"||(f1!==Q2||d2!==H1)&&Qy(W,Mh,Ge,H1),jy=!1,d2=W.memoizedState,Mh.state=d2,W8(W,Ge,Mh,To),av();var M2=W.memoizedState;f1!==Q2||d2!==M2||jy||y!==null&&y.dependencies!==null&&Zv(y.dependencies)?(typeof S1=="function"&&(K9(W,ve,S1,Ge),M2=W.memoizedState),(U2=jy||W9(W,ve,U2,Ge,d2,M2,H1)||y!==null&&y.dependencies!==null&&Zv(y.dependencies))?(y2||typeof Mh.UNSAFE_componentWillUpdate!="function"&&typeof Mh.componentWillUpdate!="function"||(typeof Mh.componentWillUpdate=="function"&&Mh.componentWillUpdate(Ge,M2,H1),typeof Mh.UNSAFE_componentWillUpdate=="function"&&Mh.UNSAFE_componentWillUpdate(Ge,M2,H1)),typeof Mh.componentDidUpdate=="function"&&(W.flags|=4),typeof Mh.getSnapshotBeforeUpdate=="function"&&(W.flags|=1024)):(typeof Mh.componentDidUpdate!="function"||f1===y.memoizedProps&&d2===y.memoizedState||(W.flags|=4),typeof Mh.getSnapshotBeforeUpdate!="function"||f1===y.memoizedProps&&d2===y.memoizedState||(W.flags|=1024),W.memoizedProps=Ge,W.memoizedState=M2),Mh.props=Ge,Mh.state=M2,Mh.context=H1,Ge=U2):(typeof Mh.componentDidUpdate!="function"||f1===y.memoizedProps&&d2===y.memoizedState||(W.flags|=4),typeof Mh.getSnapshotBeforeUpdate!="function"||f1===y.memoizedProps&&d2===y.memoizedState||(W.flags|=1024),Ge=!1)}return Mh=Ge,g8(y,W),Ge=(W.flags&128)!==0,Mh||Ge?(Mh=W.stateNode,ve=Ge&&typeof ve.getDerivedStateFromError!="function"?null:Mh.render(),W.flags|=1,y!==null&&Ge?(W.child=Fv(W,y.child,null,To),W.child=Fv(W,null,ve,To)):u5(y,W,ve,To),W.memoizedState=Mh.state,y=W.child):y=by(y,W,To),y}function hw(y,W,ve,Ge){return x7(),W.flags|=256,u5(y,W,ve,Ge),W.child}var G_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yy(y){return{baseLanes:y,cachePool:y_()}}function K_(y,W,ve){return y=y!==null?y.childLanes&~ve:0,W&&(y|=Ev),y}function W_(y,W,ve){var Ge=W.pendingProps,To=!1,Mh=(W.flags&128)!==0,f1;if((f1=Mh)||(f1=y!==null&&y.memoizedState===null?!1:(L6.current&2)!==0),f1&&(To=!0,W.flags&=-129),f1=(W.flags&32)!==0,W.flags&=-33,y===null){if(P3){if(To?vy(W):y6(),P3){var S1=k6,H1;if(H1=S1){e:{for(H1=S1,S1=Wv;H1.nodeType!==8;){if(!S1){S1=null;break e}if(H1=Cv(H1.nextSibling),H1===null){S1=null;break e}}S1=H1}S1!==null?(W.memoizedState={dehydrated:S1,treeContext:g7!==null?{id:uy,overflow:cy}:null,retryLane:536870912,hydrationErrors:null},H1=A5(18,null,null,0),H1.stateNode=S1,H1.return=W,W.child=H1,F5=W,k6=null,H1=!0):H1=!1}H1||_7(W)}if(S1=W.memoizedState,S1!==null&&(S1=S1.dehydrated,S1!==null))return a_(S1)?W.lanes=32:W.lanes=536870912,null;Qv(W)}return S1=Ge.children,Ge=Ge.fallback,To?(y6(),To=W.mode,S1=Y9({mode:"hidden",children:S1},To),Ge=zy(Ge,To,ve,null),S1.return=W,Ge.return=W,S1.sibling=Ge,W.child=S1,To=W.child,To.memoizedState=yy(ve),To.childLanes=K_(y,f1,ve),W.memoizedState=G_,Ge):(vy(W),v8(W,S1))}if(H1=y.memoizedState,H1!==null&&(S1=H1.dehydrated,S1!==null)){if(Mh)W.flags&256?(vy(W),W.flags&=-257,W=y8(y,W,ve)):W.memoizedState!==null?(y6(),W.child=y.child,W.flags|=128,W=null):(y6(),To=Ge.fallback,S1=W.mode,Ge=Y9({mode:"visible",children:Ge.children},S1),To=zy(To,S1,ve,null),To.flags|=2,Ge.return=W,To.return=W,Ge.sibling=To,W.child=Ge,Fv(W,y.child,null,ve),Ge=W.child,Ge.memoizedState=yy(ve),Ge.childLanes=K_(y,f1,ve),W.memoizedState=G_,W=To);else if(vy(W),a_(S1)){if(f1=S1.nextSibling&&S1.nextSibling.dataset,f1)var y2=f1.dgst;f1=y2,Ge=Error(a(419)),Ge.stack="",Ge.digest=f1,U8({value:Ge,source:null,stack:null}),W=y8(y,W,ve)}else if(l5||fy(y,W,ve,!1),f1=(ve&y.childLanes)!==0,l5||f1){if(f1=Q3,f1!==null&&(Ge=ve&-ve,Ge=(Ge&42)!==0?1:P4(Ge),Ge=(Ge&(f1.suspendedLanes|ve))!==0?0:Ge,Ge!==0&&Ge!==H1.retryLane))throw H1.retryLane=Ge,oy(y,Ge),o6(f1,y,Ge),ow;S1.data==="$?"||ry(),W=y8(y,W,ve)}else S1.data==="$?"?(W.flags|=192,W.child=y.child,W=null):(y=H1.treeContext,k6=Cv(S1.nextSibling),F5=W,P3=!0,y7=null,Wv=!1,y!==null&&(G5[rv++]=uy,G5[rv++]=cy,G5[rv++]=g7,uy=y.id,cy=y.overflow,g7=W),W=v8(W,Ge.children),W.flags|=4096);return W}return To?(y6(),To=Ge.fallback,S1=W.mode,H1=y.child,y2=H1.sibling,Ge=a6(H1,{mode:"hidden",children:Ge.children}),Ge.subtreeFlags=H1.subtreeFlags&65011712,y2!==null?To=a6(y2,To):(To=zy(To,S1,ve,null),To.flags|=2),To.return=W,Ge.return=W,Ge.sibling=To,W.child=Ge,Ge=To,To=W.child,S1=y.child.memoizedState,S1===null?S1=yy(ve):(H1=S1.cachePool,H1!==null?(y2=Q6._currentValue,H1=H1.parent!==y2?{parent:y2,pool:y2}:H1):H1=y_(),S1={baseLanes:S1.baseLanes|ve,cachePool:H1}),To.memoizedState=S1,To.childLanes=K_(y,f1,ve),W.memoizedState=G_,Ge):(vy(W),ve=y.child,y=ve.sibling,ve=a6(ve,{mode:"visible",children:Ge.children}),ve.return=W,ve.sibling=null,y!==null&&(f1=W.deletions,f1===null?(W.deletions=[y],W.flags|=16):f1.push(y)),W.child=ve,W.memoizedState=null,ve)}function v8(y,W){return W=Y9({mode:"visible",children:W},y.mode),W.return=y,y.child=W}function Y9(y,W){return y=A5(22,y,null,W),y.lanes=0,y.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},y}function y8(y,W,ve){return Fv(W,y.child,null,ve),y=v8(W,W.pendingProps.children),y.flags|=2,W.memoizedState=null,y}function X_(y,W,ve){y.lanes|=W;var Ge=y.alternate;Ge!==null&&(Ge.lanes|=W),J7(y.return,W,ve)}function b8(y,W,ve,Ge,To){var Mh=y.memoizedState;Mh===null?y.memoizedState={isBackwards:W,rendering:null,renderingStartTime:0,last:Ge,tail:ve,tailMode:To}:(Mh.isBackwards=W,Mh.rendering=null,Mh.renderingStartTime=0,Mh.last=Ge,Mh.tail=ve,Mh.tailMode=To)}function I7(y,W,ve){var Ge=W.pendingProps,To=Ge.revealOrder,Mh=Ge.tail;if(u5(y,W,Ge.children,ve),Ge=L6.current,(Ge&2)!==0)Ge=Ge&1|2,W.flags|=128;else{if(y!==null&&(y.flags&128)!==0)e:for(y=W.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&X_(y,ve,W);else if(y.tag===19)X_(y,ve,W);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===W)break e;for(;y.sibling===null;){if(y.return===null||y.return===W)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}Ge&=1}switch(_1(L6,Ge),To){case"forwards":for(ve=W.child,To=null;ve!==null;)y=ve.alternate,y!==null&&p8(y)===null&&(To=ve),ve=ve.sibling;ve=To,ve===null?(To=W.child,W.child=null):(To=ve.sibling,ve.sibling=null),b8(W,!1,To,ve,Mh);break;case"backwards":for(ve=null,To=W.child,W.child=null;To!==null;){if(y=To.alternate,y!==null&&p8(y)===null){W.child=To;break}y=To.sibling,To.sibling=ve,ve=To,To=y}b8(W,!0,ve,null,Mh);break;case"together":b8(W,!1,null,null,void 0);break;default:W.memoizedState=null}return W.child}function by(y,W,ve){if(y!==null&&(W.dependencies=y.dependencies),Ay|=W.lanes,(ve&W.childLanes)===0)if(y!==null){if(fy(y,W,ve,!1),(ve&W.childLanes)===0)return null}else return null;if(y!==null&&W.child!==y.child)throw Error(a(153));if(W.child!==null){for(y=W.child,ve=a6(y,y.pendingProps),W.child=ve,ve.return=W;y.sibling!==null;)y=y.sibling,ve=ve.sibling=a6(y,y.pendingProps),ve.return=W;ve.sibling=null}return W.child}function Q9(y,W){return(y.lanes&W)!==0?!0:(y=y.dependencies,!!(y!==null&&Zv(y)))}function fw(y,W,ve){switch(W.tag){case 3:F2(W,W.stateNode.containerInfo),hy(W,Q6,y.memoizedState.cache),x7();break;case 27:case 5:W2(W);break;case 4:F2(W,W.stateNode.containerInfo);break;case 10:hy(W,W.type,W.memoizedProps.value);break;case 13:var Ge=W.memoizedState;if(Ge!==null)return Ge.dehydrated!==null?(vy(W),W.flags|=128,null):(ve&W.child.childLanes)!==0?W_(y,W,ve):(vy(W),y=by(y,W,ve),y!==null?y.sibling:null);vy(W);break;case 19:var To=(y.flags&128)!==0;if(Ge=(ve&W.childLanes)!==0,Ge||(fy(y,W,ve,!1),Ge=(ve&W.childLanes)!==0),To){if(Ge)return I7(y,W,ve);W.flags|=128}if(To=W.memoizedState,To!==null&&(To.rendering=null,To.tail=null,To.lastEffect=null),_1(L6,L6.current),Ge)break;return null;case 22:case 23:return W.lanes=0,lw(y,W,ve);case 24:hy(W,Q6,y.memoizedState.cache)}return by(y,W,ve)}function Z_(y,W,ve){if(y!==null)if(y.memoizedProps!==W.pendingProps)l5=!0;else{if(!Q9(y,ve)&&(W.flags&128)===0)return l5=!1,fw(y,W,ve);l5=(y.flags&131072)!==0}else l5=!1,P3&&(W.flags&1048576)!==0&&$x(W,z8,W.index);switch(W.lanes=0,W.tag){case 16:e:{y=W.pendingProps;var Ge=W.elementType,To=Ge._init;if(Ge=To(Ge._payload),W.type=Ge,typeof Ge=="function")ly(Ge)?(y=W5(Ge,y),W.tag=1,W=cw(null,W,Ge,y,ve)):(W.tag=0,W=u9(null,W,Ge,y,ve));else{if(Ge!=null){if(To=Ge.$$typeof,To===th){W.tag=11,W=U_(null,W,Ge,y,ve);break e}else if(To===cf){W.tag=14,W=j_(null,W,Ge,y,ve);break e}}throw W=Qp(Ge)||Ge,Error(a(306,W,""))}}return W;case 0:return u9(y,W,W.type,W.pendingProps,ve);case 1:return Ge=W.type,To=W5(Ge,W.pendingProps),cw(y,W,Ge,To,ve);case 3:e:{if(F2(W,W.stateNode.containerInfo),y===null)throw Error(a(387));Ge=W.pendingProps;var Mh=W.memoizedState;To=Mh.element,Ov(y,W),W8(W,Ge,null,ve);var f1=W.memoizedState;if(Ge=f1.cache,hy(W,Q6,Ge),Ge!==Mh.cache&&j8(W,[Q6],ve,!0),av(),Ge=f1.element,Mh.isDehydrated)if(Mh={element:Ge,isDehydrated:!1,cache:f1.cache},W.updateQueue.baseState=Mh,W.memoizedState=Mh,W.flags&256){W=hw(y,W,Ge,ve);break e}else if(Ge!==To){To=M6(Error(a(424)),W),U8(To),W=hw(y,W,Ge,ve);break e}else{switch(y=W.stateNode.containerInfo,y.nodeType){case 9:y=y.body;break;default:y=y.nodeName==="HTML"?y.ownerDocument.body:y}for(k6=Cv(y.firstChild),F5=W,P3=!0,y7=null,Wv=!0,ve=iw(W,null,Ge,ve),W.child=ve;ve;)ve.flags=ve.flags&-3|4096,ve=ve.sibling}else{if(x7(),Ge===To){W=by(y,W,ve);break e}u5(y,W,Ge,ve)}W=W.child}return W;case 26:return g8(y,W),y===null?(ve=Zw(W.type,null,W.pendingProps,null))?W.memoizedState=ve:P3||(ve=W.type,y=W.pendingProps,Ge=i_(i2.current).createElement(ve),Ge[b2]=W,Ge[P2]=y,x5(Ge,ve,y),$1(Ge),W.stateNode=Ge):W.memoizedState=Zw(W.type,y.memoizedProps,W.pendingProps,y.memoizedState),null;case 27:return W2(W),y===null&&P3&&(Ge=W.stateNode=Tx(W.type,W.pendingProps,i2.current),F5=W,Wv=!0,To=k6,Ny(W.type)?(L8=To,k6=Cv(Ge.firstChild)):k6=To),u5(y,W,W.pendingProps.children,ve),g8(y,W),y===null&&(W.flags|=4194304),W.child;case 5:return y===null&&P3&&((To=Ge=k6)&&(Ge=wx(Ge,W.type,W.pendingProps,Wv),Ge!==null?(W.stateNode=Ge,F5=W,k6=Cv(Ge.firstChild),Wv=!1,To=!0):To=!1),To||_7(W)),W2(W),To=W.type,Mh=W.pendingProps,f1=y!==null?y.memoizedProps:null,Ge=Mh.children,_x(To,Mh)?Ge=null:f1!==null&&_x(To,f1)&&(W.flags|=32),W.memoizedState!==null&&(To=Y8(y,W,pS,null,null,ve),S9._currentValue=To),g8(y,W),u5(y,W,Ge,ve),W.child;case 6:return y===null&&P3&&((y=ve=k6)&&(ve=Sx(ve,W.pendingProps,Wv),ve!==null?(W.stateNode=ve,F5=W,k6=null,y=!0):y=!1),y||_7(W)),null;case 13:return W_(y,W,ve);case 4:return F2(W,W.stateNode.containerInfo),Ge=W.pendingProps,y===null?W.child=Fv(W,null,Ge,ve):u5(y,W,Ge,ve),W.child;case 11:return U_(y,W,W.type,W.pendingProps,ve);case 7:return u5(y,W,W.pendingProps,ve),W.child;case 8:return u5(y,W,W.pendingProps.children,ve),W.child;case 12:return u5(y,W,W.pendingProps.children,ve),W.child;case 10:return Ge=W.pendingProps,hy(W,W.type,Ge.value),u5(y,W,Ge.children,ve),W.child;case 9:return To=W.type._context,Ge=W.pendingProps.children,vv(W),To=Y6(To),Ge=Ge(To),W.flags|=1,u5(y,W,Ge,ve),W.child;case 14:return j_(y,W,W.type,W.pendingProps,ve);case 15:return Z9(y,W,W.type,W.pendingProps,ve);case 19:return I7(y,W,ve);case 31:return Ge=W.pendingProps,ve=W.mode,Ge={mode:Ge.mode,children:Ge.children},y===null?(ve=Y9(Ge,ve),ve.ref=W.ref,W.child=ve,ve.return=W,W=ve):(ve=a6(y.child,Ge),ve.ref=W.ref,W.child=ve,ve.return=W,W=ve),W;case 22:return lw(y,W,ve);case 24:return vv(W),Ge=Y6(Q6),y===null?(To=Lv(),To===null&&(To=Q3,Mh=g_(),To.pooledCache=Mh,Mh.refCount++,Mh!==null&&(To.pooledCacheLanes|=ve),To=Mh),W.memoizedState={parent:Ge,cache:To},x_(W),hy(W,Q6,To)):((y.lanes&ve)!==0&&(Ov(y,W),W8(W,null,null,ve),av()),To=y.memoizedState,Mh=W.memoizedState,To.parent!==Ge?(To={parent:Ge,cache:Ge},W.memoizedState=To,W.lanes===0&&(W.memoizedState=W.updateQueue.baseState=To),hy(W,Q6,Ge)):(Ge=Mh.cache,hy(W,Q6,Ge),Ge!==To.cache&&j8(W,[Q6],ve,!0))),u5(y,W,W.pendingProps.children,ve),W.child;case 29:throw W.pendingProps}throw Error(a(156,W.tag))}function Vv(y){y.flags|=4}function dw(y,W){if(W.type!=="stylesheet"||(W.state.loading&4)!==0)y.flags&=-16777217;else if(y.flags|=16777216,!Rx(W)){if(W=_v.current,W!==null&&((I3&4194048)===I3?xv!==null:(I3&62914560)!==I3&&(I3&536870912)===0||W!==xv))throw n8=b_,i8;y.flags|=8192}}function Bv(y,W){W!==null&&(y.flags|=4),y.flags&16384&&(W=y.tag!==22?j2():536870912,y.lanes|=W,Z5|=W)}function ey(y,W){if(!P3)switch(y.tailMode){case"hidden":W=y.tail;for(var ve=null;W!==null;)W.alternate!==null&&(ve=W),W=W.sibling;ve===null?y.tail=null:ve.sibling=null;break;case"collapsed":ve=y.tail;for(var Ge=null;ve!==null;)ve.alternate!==null&&(Ge=ve),ve=ve.sibling;Ge===null?W||y.tail===null?y.tail=null:y.tail.sibling=null:Ge.sibling=null}}function s6(y){var W=y.alternate!==null&&y.alternate.child===y.child,ve=0,Ge=0;if(W)for(var To=y.child;To!==null;)ve|=To.lanes|To.childLanes,Ge|=To.subtreeFlags&65011712,Ge|=To.flags&65011712,To.return=y,To=To.sibling;else for(To=y.child;To!==null;)ve|=To.lanes|To.childLanes,Ge|=To.subtreeFlags,Ge|=To.flags,To.return=y,To=To.sibling;return y.subtreeFlags|=Ge,y.childLanes=ve,W}function pw(y,W,ve){var Ge=W.pendingProps;switch(d_(W),W.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return s6(W),null;case 1:return s6(W),null;case 3:return ve=W.stateNode,Ge=null,y!==null&&(Ge=y.memoizedState.cache),W.memoizedState.cache!==Ge&&(W.flags|=2048),iv(Q6),X1(),ve.pendingContext&&(ve.context=ve.pendingContext,ve.pendingContext=null),(y===null||y.child===null)&&(Q7(W)?Vv(W):y===null||y.memoizedState.isDehydrated&&(W.flags&256)===0||(W.flags|=1024,Ux())),s6(W),null;case 26:return ve=W.memoizedState,y===null?(Vv(W),ve!==null?(s6(W),dw(W,ve)):(s6(W),W.flags&=-16777217)):ve?ve!==y.memoizedState?(Vv(W),s6(W),dw(W,ve)):(s6(W),W.flags&=-16777217):(y.memoizedProps!==Ge&&Vv(W),s6(W),W.flags&=-16777217),null;case 27:N2(W),ve=i2.current;var To=W.type;if(y!==null&&W.stateNode!=null)y.memoizedProps!==Ge&&Vv(W);else{if(!Ge){if(W.stateNode===null)throw Error(a(166));return s6(W),null}y=V1.current,Q7(W)?p_(W):(y=Tx(To,Ge,ve),W.stateNode=y,Vv(W))}return s6(W),null;case 5:if(N2(W),ve=W.type,y!==null&&W.stateNode!=null)y.memoizedProps!==Ge&&Vv(W);else{if(!Ge){if(W.stateNode===null)throw Error(a(166));return s6(W),null}if(y=V1.current,Q7(W))p_(W);else{switch(To=i_(i2.current),y){case 1:y=To.createElementNS("http://www.w3.org/2000/svg",ve);break;case 2:y=To.createElementNS("http://www.w3.org/1998/Math/MathML",ve);break;default:switch(ve){case"svg":y=To.createElementNS("http://www.w3.org/2000/svg",ve);break;case"math":y=To.createElementNS("http://www.w3.org/1998/Math/MathML",ve);break;case"script":y=To.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof Ge.is=="string"?To.createElement("select",{is:Ge.is}):To.createElement("select"),Ge.multiple?y.multiple=!0:Ge.size&&(y.size=Ge.size);break;default:y=typeof Ge.is=="string"?To.createElement(ve,{is:Ge.is}):To.createElement(ve)}}y[b2]=W,y[P2]=Ge;e:for(To=W.child;To!==null;){if(To.tag===5||To.tag===6)y.appendChild(To.stateNode);else if(To.tag!==4&&To.tag!==27&&To.child!==null){To.child.return=To,To=To.child;continue}if(To===W)break e;for(;To.sibling===null;){if(To.return===null||To.return===W)break e;To=To.return}To.sibling.return=To.return,To=To.sibling}W.stateNode=y;e:switch(x5(y,ve,Ge),ve){case"button":case"input":case"select":case"textarea":y=!!Ge.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&Vv(W)}}return s6(W),W.flags&=-16777217,null;case 6:if(y&&W.stateNode!=null)y.memoizedProps!==Ge&&Vv(W);else{if(typeof Ge!="string"&&W.stateNode===null)throw Error(a(166));if(y=i2.current,Q7(W)){if(y=W.stateNode,ve=W.memoizedProps,Ge=null,To=F5,To!==null)switch(To.tag){case 27:case 5:Ge=To.memoizedProps}y[b2]=W,y=!!(y.nodeValue===ve||Ge!==null&&Ge.suppressHydrationWarning===!0||yx(y.nodeValue,ve)),y||_7(W)}else y=i_(y).createTextNode(Ge),y[b2]=W,W.stateNode=y}return s6(W),null;case 13:if(Ge=W.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(To=Q7(W),Ge!==null&&Ge.dehydrated!==null){if(y===null){if(!To)throw Error(a(318));if(To=W.memoizedState,To=To!==null?To.dehydrated:null,!To)throw Error(a(317));To[b2]=W}else x7(),(W.flags&128)===0&&(W.memoizedState=null),W.flags|=4;s6(W),To=!1}else To=Ux(),y!==null&&y.memoizedState!==null&&(y.memoizedState.hydrationErrors=To),To=!0;if(!To)return W.flags&256?(Qv(W),W):(Qv(W),null)}if(Qv(W),(W.flags&128)!==0)return W.lanes=ve,W;if(ve=Ge!==null,y=y!==null&&y.memoizedState!==null,ve){Ge=W.child,To=null,Ge.alternate!==null&&Ge.alternate.memoizedState!==null&&Ge.alternate.memoizedState.cachePool!==null&&(To=Ge.alternate.memoizedState.cachePool.pool);var Mh=null;Ge.memoizedState!==null&&Ge.memoizedState.cachePool!==null&&(Mh=Ge.memoizedState.cachePool.pool),Mh!==To&&(Ge.flags|=2048)}return ve!==y&&ve&&(W.child.flags|=8192),Bv(W,W.updateQueue),s6(W),null;case 4:return X1(),y===null&&y9(W.stateNode.containerInfo),s6(W),null;case 10:return iv(W.type),s6(W),null;case 19:if(b1(L6),To=W.memoizedState,To===null)return s6(W),null;if(Ge=(W.flags&128)!==0,Mh=To.rendering,Mh===null)if(Ge)ey(To,!1);else{if(b6!==0||y!==null&&(y.flags&128)!==0)for(y=W.child;y!==null;){if(Mh=p8(y),Mh!==null){for(W.flags|=128,ey(To,!1),y=Mh.updateQueue,W.updateQueue=y,Bv(W,y),W.subtreeFlags=0,y=ve,ve=W.child;ve!==null;)gv(ve,y),ve=ve.sibling;return _1(L6,L6.current&1|2),W.child}y=y.sibling}To.tail!==null&&E1()>L7&&(W.flags|=128,Ge=!0,ey(To,!1),W.lanes=4194304)}else{if(!Ge)if(y=p8(Mh),y!==null){if(W.flags|=128,Ge=!0,y=y.updateQueue,W.updateQueue=y,Bv(W,y),ey(To,!0),To.tail===null&&To.tailMode==="hidden"&&!Mh.alternate&&!P3)return s6(W),null}else 2*E1()-To.renderingStartTime>L7&&ve!==536870912&&(W.flags|=128,Ge=!0,ey(To,!1),W.lanes=4194304);To.isBackwards?(Mh.sibling=W.child,W.child=Mh):(y=To.last,y!==null?y.sibling=Mh:W.child=Mh,To.last=Mh)}return To.tail!==null?(W=To.tail,To.rendering=W,To.tail=W.sibling,To.renderingStartTime=E1(),W.sibling=null,y=L6.current,_1(L6,Ge?y&1|2:y&1),W):(s6(W),null);case 22:case 23:return Qv(W),A_(),Ge=W.memoizedState!==null,y!==null?y.memoizedState!==null!==Ge&&(W.flags|=8192):Ge&&(W.flags|=8192),Ge?(ve&536870912)!==0&&(W.flags&128)===0&&(s6(W),W.subtreeFlags&6&&(W.flags|=8192)):s6(W),ve=W.updateQueue,ve!==null&&Bv(W,ve.retryQueue),ve=null,y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(ve=y.memoizedState.cachePool.pool),Ge=null,W.memoizedState!==null&&W.memoizedState.cachePool!==null&&(Ge=W.memoizedState.cachePool.pool),Ge!==ve&&(W.flags|=2048),y!==null&&b1(w7),null;case 24:return ve=null,y!==null&&(ve=y.memoizedState.cache),W.memoizedState.cache!==ve&&(W.flags|=2048),iv(Q6),s6(W),null;case 25:return null;case 30:return null}throw Error(a(156,W.tag))}function c9(y,W){switch(d_(W),W.tag){case 1:return y=W.flags,y&65536?(W.flags=y&-65537|128,W):null;case 3:return iv(Q6),X1(),y=W.flags,(y&65536)!==0&&(y&128)===0?(W.flags=y&-65537|128,W):null;case 26:case 27:case 5:return N2(W),null;case 13:if(Qv(W),y=W.memoizedState,y!==null&&y.dehydrated!==null){if(W.alternate===null)throw Error(a(340));x7()}return y=W.flags,y&65536?(W.flags=y&-65537|128,W):null;case 19:return b1(L6),null;case 4:return X1(),null;case 10:return iv(W.type),null;case 22:case 23:return Qv(W),A_(),y!==null&&b1(w7),y=W.flags,y&65536?(W.flags=y&-65537|128,W):null;case 24:return iv(Q6),null;case 25:return null;default:return null}}function Y_(y,W){switch(d_(W),W.tag){case 3:iv(Q6),X1();break;case 26:case 27:case 5:N2(W);break;case 4:X1();break;case 13:Qv(W);break;case 19:b1(L6);break;case 10:iv(W.type);break;case 22:case 23:Qv(W),A_(),y!==null&&b1(w7);break;case 24:iv(Q6)}}function _8(y,W){try{var ve=W.updateQueue,Ge=ve!==null?ve.lastEffect:null;if(Ge!==null){var To=Ge.next;ve=To;do{if((ve.tag&y)===y){Ge=void 0;var Mh=ve.create,f1=ve.inst;Ge=Mh(),f1.destroy=Ge}ve=ve.next}while(ve!==To)}}catch(S1){J3(W,W.return,S1)}}function _y(y,W,ve){try{var Ge=W.updateQueue,To=Ge!==null?Ge.lastEffect:null;if(To!==null){var Mh=To.next;Ge=Mh;do{if((Ge.tag&y)===y){var f1=Ge.inst,S1=f1.destroy;if(S1!==void 0){f1.destroy=void 0,To=W;var H1=ve,y2=S1;try{y2()}catch(U2){J3(To,H1,U2)}}}Ge=Ge.next}while(Ge!==Mh)}}catch(U2){J3(W,W.return,U2)}}function J9(y){var W=y.updateQueue;if(W!==null){var ve=y.stateNode;try{Gx(W,ve)}catch(Ge){J3(y,y.return,Ge)}}}function mw(y,W,ve){ve.props=W5(y.type,y.memoizedProps),ve.state=y.memoizedState;try{ve.componentWillUnmount()}catch(Ge){J3(y,W,Ge)}}function N7(y,W){try{var ve=y.ref;if(ve!==null){switch(y.tag){case 26:case 27:case 5:var Ge=y.stateNode;break;case 30:Ge=y.stateNode;break;default:Ge=y.stateNode}typeof ve=="function"?y.refCleanup=ve(Ge):ve.current=Ge}}catch(To){J3(y,W,To)}}function ty(y,W){var ve=y.ref,Ge=y.refCleanup;if(ve!==null)if(typeof Ge=="function")try{Ge()}catch(To){J3(y,W,To)}finally{y.refCleanup=null,y=y.alternate,y!=null&&(y.refCleanup=null)}else if(typeof ve=="function")try{ve(null)}catch(To){J3(y,W,To)}else ve.current=null}function Ib(y){var W=y.type,ve=y.memoizedProps,Ge=y.stateNode;try{e:switch(W){case"button":case"input":case"select":case"textarea":ve.autoFocus&&Ge.focus();break e;case"img":ve.src?Ge.src=ve.src:ve.srcSet&&(Ge.srcset=ve.srcSet)}}catch(To){J3(y,y.return,To)}}function Q_(y,W,ve){try{var Ge=y.stateNode;D8(Ge,y.type,ve,W),Ge[P2]=W}catch(To){J3(y,y.return,To)}}function Nb(y){return y.tag===5||y.tag===3||y.tag===26||y.tag===27&&Ny(y.type)||y.tag===4}function J_(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||Nb(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.tag===27&&Ny(y.type)||y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function h9(y,W,ve){var Ge=y.tag;if(Ge===5||Ge===6)y=y.stateNode,W?(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).insertBefore(y,W):(W=ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve,W.appendChild(y),ve=ve._reactRootContainer,ve!=null||W.onclick!==null||(W.onclick=t_));else if(Ge!==4&&(Ge===27&&Ny(y.type)&&(ve=y.stateNode,W=null),y=y.child,y!==null))for(h9(y,W,ve),y=y.sibling;y!==null;)h9(y,W,ve),y=y.sibling}function Fb(y,W,ve){var Ge=y.tag;if(Ge===5||Ge===6)y=y.stateNode,W?ve.insertBefore(y,W):ve.appendChild(y);else if(Ge!==4&&(Ge===27&&Ny(y.type)&&(ve=y.stateNode),y=y.child,y!==null))for(Fb(y,W,ve),y=y.sibling;y!==null;)Fb(y,W,ve),y=y.sibling}function gw(y){var W=y.stateNode,ve=y.memoizedProps;try{for(var Ge=y.type,To=W.attributes;To.length;)W.removeAttributeNode(To[0]);x5(W,Ge,ve),W[b2]=y,W[P2]=ve}catch(Mh){J3(y,y.return,Mh)}}var xy=!1,O6=!1,$b=!1,yw=typeof WeakSet=="function"?WeakSet:Set,c5=null;function bw(y,W){if(y=y.containerInfo,r_=u_,y=I2(y),s4(y)){if("selectionStart"in y)var ve={start:y.selectionStart,end:y.selectionEnd};else e:{ve=(ve=y.ownerDocument)&&ve.defaultView||window;var Ge=ve.getSelection&&ve.getSelection();if(Ge&&Ge.rangeCount!==0){ve=Ge.anchorNode;var To=Ge.anchorOffset,Mh=Ge.focusNode;Ge=Ge.focusOffset;try{ve.nodeType,Mh.nodeType}catch{ve=null;break e}var f1=0,S1=-1,H1=-1,y2=0,U2=0,Q2=y,d2=null;t:for(;;){for(var M2;Q2!==ve||To!==0&&Q2.nodeType!==3||(S1=f1+To),Q2!==Mh||Ge!==0&&Q2.nodeType!==3||(H1=f1+Ge),Q2.nodeType===3&&(f1+=Q2.nodeValue.length),(M2=Q2.firstChild)!==null;)d2=Q2,Q2=M2;for(;;){if(Q2===y)break t;if(d2===ve&&++y2===To&&(S1=f1),d2===Mh&&++U2===Ge&&(H1=f1),(M2=Q2.nextSibling)!==null)break;Q2=d2,d2=Q2.parentNode}Q2=M2}ve=S1===-1||H1===-1?null:{start:S1,end:H1}}else ve=null}ve=ve||{start:0,end:0}}else ve=null;for(bx={focusedElem:y,selectionRange:ve},u_=!1,c5=W;c5!==null;)if(W=c5,y=W.child,(W.subtreeFlags&1024)!==0&&y!==null)y.return=W,c5=y;else for(;c5!==null;){switch(W=c5,Mh=W.alternate,y=W.flags,W.tag){case 0:break;case 11:case 15:break;case 1:if((y&1024)!==0&&Mh!==null){y=void 0,ve=W,To=Mh.memoizedProps,Mh=Mh.memoizedState,Ge=ve.stateNode;try{var n3=W5(ve.type,To,ve.elementType===ve.type);y=Ge.getSnapshotBeforeUpdate(n3,Mh),Ge.__reactInternalSnapshotBeforeUpdate=y}catch(J4){J3(ve,ve.return,J4)}}break;case 3:if((y&1024)!==0){if(y=W.stateNode.containerInfo,ve=y.nodeType,ve===9)$7(y);else if(ve===1)switch(y.nodeName){case"HEAD":case"HTML":case"BODY":$7(y);break;default:y.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((y&1024)!==0)throw Error(a(163))}if(y=W.sibling,y!==null){y.return=W.return,c5=y;break}c5=W.return}}function F6(y,W,ve){var Ge=ve.flags;switch(ve.tag){case 0:case 11:case 15:Sy(y,ve),Ge&4&&_8(5,ve);break;case 1:if(Sy(y,ve),Ge&4)if(y=ve.stateNode,W===null)try{y.componentDidMount()}catch(f1){J3(ve,ve.return,f1)}else{var To=W5(ve.type,W.memoizedProps);W=W.memoizedState;try{y.componentDidUpdate(To,W,y.__reactInternalSnapshotBeforeUpdate)}catch(f1){J3(ve,ve.return,f1)}}Ge&64&&J9(ve),Ge&512&&N7(ve,ve.return);break;case 3:if(Sy(y,ve),Ge&64&&(y=ve.updateQueue,y!==null)){if(W=null,ve.child!==null)switch(ve.child.tag){case 27:case 5:W=ve.child.stateNode;break;case 1:W=ve.child.stateNode}try{Gx(y,W)}catch(f1){J3(ve,ve.return,f1)}}break;case 27:W===null&&Ge&4&&gw(ve);case 26:case 5:Sy(y,ve),W===null&&Ge&4&&Ib(ve),Ge&512&&N7(ve,ve.return);break;case 12:Sy(y,ve);break;case 13:Sy(y,ve),Ge&4&&ex(y,ve),Ge&64&&(y=ve.memoizedState,y!==null&&(y=y.dehydrated,y!==null&&(ve=cx.bind(null,ve),jw(y,ve))));break;case 22:if(Ge=ve.memoizedState!==null||xy,!Ge){W=W!==null&&W.memoizedState!==null||O6,To=xy;var Mh=O6;xy=Ge,(O6=W)&&!Mh?Ty(y,ve,(ve.subtreeFlags&8772)!==0):Sy(y,ve),xy=To,O6=Mh}break;case 30:break;default:Sy(y,ve)}}function _w(y){var W=y.alternate;W!==null&&(y.alternate=null,_w(W)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(W=y.stateNode,W!==null&&l1(W)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}var m6=null,h5=!1;function wy(y,W,ve){for(ve=ve.child;ve!==null;)xw(y,W,ve),ve=ve.sibling}function xw(y,W,ve){if(u1&&typeof u1.onCommitFiberUnmount=="function")try{u1.onCommitFiberUnmount(g1,ve)}catch{}switch(ve.tag){case 26:O6||ty(ve,W),wy(y,W,ve),ve.memoizedState?ve.memoizedState.count--:ve.stateNode&&(ve=ve.stateNode,ve.parentNode.removeChild(ve));break;case 27:O6||ty(ve,W);var Ge=m6,To=h5;Ny(ve.type)&&(m6=ve.stateNode,h5=!1),wy(y,W,ve),Dy(ve.stateNode),m6=Ge,h5=To;break;case 5:O6||ty(ve,W);case 6:if(Ge=m6,To=h5,m6=null,wy(y,W,ve),m6=Ge,h5=To,m6!==null)if(h5)try{(m6.nodeType===9?m6.body:m6.nodeName==="HTML"?m6.ownerDocument.body:m6).removeChild(ve.stateNode)}catch(Mh){J3(ve,W,Mh)}else try{m6.removeChild(ve.stateNode)}catch(Mh){J3(ve,W,Mh)}break;case 18:m6!==null&&(h5?(y=m6,xx(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,ve.stateNode),k9(y)):xx(m6,ve.stateNode));break;case 4:Ge=m6,To=h5,m6=ve.stateNode.containerInfo,h5=!0,wy(y,W,ve),m6=Ge,h5=To;break;case 0:case 11:case 14:case 15:O6||_y(2,ve,W),O6||_y(4,ve,W),wy(y,W,ve);break;case 1:O6||(ty(ve,W),Ge=ve.stateNode,typeof Ge.componentWillUnmount=="function"&&mw(ve,W,Ge)),wy(y,W,ve);break;case 21:wy(y,W,ve);break;case 22:O6=(Ge=O6)||ve.memoizedState!==null,wy(y,W,ve),O6=Ge;break;default:wy(y,W,ve)}}function ex(y,W){if(W.memoizedState===null&&(y=W.alternate,y!==null&&(y=y.memoizedState,y!==null&&(y=y.dehydrated,y!==null))))try{k9(y)}catch(ve){J3(W,W.return,ve)}}function ww(y){switch(y.tag){case 13:case 19:var W=y.stateNode;return W===null&&(W=y.stateNode=new yw),W;case 22:return y=y.stateNode,W=y._retryCache,W===null&&(W=y._retryCache=new yw),W;default:throw Error(a(435,y.tag))}}function tx(y,W){var ve=ww(y);W.forEach(function(Ge){var To=hx.bind(null,y,Ge);ve.has(Ge)||(ve.add(Ge),Ge.then(To,To))})}function P5(y,W){var ve=W.deletions;if(ve!==null)for(var Ge=0;Ge<ve.length;Ge++){var To=ve[Ge],Mh=y,f1=W,S1=f1;e:for(;S1!==null;){switch(S1.tag){case 27:if(Ny(S1.type)){m6=S1.stateNode,h5=!1;break e}break;case 5:m6=S1.stateNode,h5=!1;break e;case 3:case 4:m6=S1.stateNode.containerInfo,h5=!0;break e}S1=S1.return}if(m6===null)throw Error(a(160));xw(Mh,f1,To),m6=null,h5=!1,Mh=To.alternate,Mh!==null&&(Mh.return=null),To.return=null}if(W.subtreeFlags&13878)for(W=W.child;W!==null;)rx(W,y),W=W.sibling}var lv=null;function rx(y,W){var ve=y.alternate,Ge=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:P5(W,y),uv(y),Ge&4&&(_y(3,y,y.return),_8(3,y),_y(5,y,y.return));break;case 1:P5(W,y),uv(y),Ge&512&&(O6||ve===null||ty(ve,ve.return)),Ge&64&&xy&&(y=y.updateQueue,y!==null&&(Ge=y.callbacks,Ge!==null&&(ve=y.shared.hiddenCallbacks,y.shared.hiddenCallbacks=ve===null?Ge:ve.concat(Ge))));break;case 26:var To=lv;if(P5(W,y),uv(y),Ge&512&&(O6||ve===null||ty(ve,ve.return)),Ge&4){var Mh=ve!==null?ve.memoizedState:null;if(Ge=y.memoizedState,ve===null)if(Ge===null)if(y.stateNode===null){e:{Ge=y.type,ve=y.memoizedProps,To=To.ownerDocument||To;t:switch(Ge){case"title":Mh=To.getElementsByTagName("title")[0],(!Mh||Mh[a1]||Mh[b2]||Mh.namespaceURI==="http://www.w3.org/2000/svg"||Mh.hasAttribute("itemprop"))&&(Mh=To.createElement(Ge),To.head.insertBefore(Mh,To.querySelector("head > title"))),x5(Mh,Ge,ve),Mh[b2]=y,$1(Mh),Ge=Mh;break e;case"link":var f1=Mx("link","href",To).get(Ge+(ve.href||""));if(f1){for(var S1=0;S1<f1.length;S1++)if(Mh=f1[S1],Mh.getAttribute("href")===(ve.href==null||ve.href===""?null:ve.href)&&Mh.getAttribute("rel")===(ve.rel==null?null:ve.rel)&&Mh.getAttribute("title")===(ve.title==null?null:ve.title)&&Mh.getAttribute("crossorigin")===(ve.crossOrigin==null?null:ve.crossOrigin)){f1.splice(S1,1);break t}}Mh=To.createElement(Ge),x5(Mh,Ge,ve),To.head.appendChild(Mh);break;case"meta":if(f1=Mx("meta","content",To).get(Ge+(ve.content||""))){for(S1=0;S1<f1.length;S1++)if(Mh=f1[S1],Mh.getAttribute("content")===(ve.content==null?null:""+ve.content)&&Mh.getAttribute("name")===(ve.name==null?null:ve.name)&&Mh.getAttribute("property")===(ve.property==null?null:ve.property)&&Mh.getAttribute("http-equiv")===(ve.httpEquiv==null?null:ve.httpEquiv)&&Mh.getAttribute("charset")===(ve.charSet==null?null:ve.charSet)){f1.splice(S1,1);break t}}Mh=To.createElement(Ge),x5(Mh,Ge,ve),To.head.appendChild(Mh);break;default:throw Error(a(468,Ge))}Mh[b2]=y,$1(Mh),Ge=Mh}y.stateNode=Ge}else kx(To,y.type,y.stateNode);else y.stateNode=Qw(To,Ge,y.memoizedProps);else Mh!==Ge?(Mh===null?ve.stateNode!==null&&(ve=ve.stateNode,ve.parentNode.removeChild(ve)):Mh.count--,Ge===null?kx(To,y.type,y.stateNode):Qw(To,Ge,y.memoizedProps)):Ge===null&&y.stateNode!==null&&Q_(y,y.memoizedProps,ve.memoizedProps)}break;case 27:P5(W,y),uv(y),Ge&512&&(O6||ve===null||ty(ve,ve.return)),ve!==null&&Ge&4&&Q_(y,y.memoizedProps,ve.memoizedProps);break;case 5:if(P5(W,y),uv(y),Ge&512&&(O6||ve===null||ty(ve,ve.return)),y.flags&32){To=y.stateNode;try{d1(To,"")}catch(M2){J3(y,y.return,M2)}}Ge&4&&y.stateNode!=null&&(To=y.memoizedProps,Q_(y,To,ve!==null?ve.memoizedProps:To)),Ge&1024&&($b=!0);break;case 6:if(P5(W,y),uv(y),Ge&4){if(y.stateNode===null)throw Error(a(162));Ge=y.memoizedProps,ve=y.stateNode;try{ve.nodeValue=Ge}catch(M2){J3(y,y.return,M2)}}break;case 3:if(x9=null,To=lv,lv=Mv(W.containerInfo),P5(W,y),lv=To,uv(y),Ge&4&&ve!==null&&ve.memoizedState.isDehydrated)try{k9(W.containerInfo)}catch(M2){J3(y,y.return,M2)}$b&&($b=!1,Sw(y));break;case 4:Ge=lv,lv=Mv(y.stateNode.containerInfo),P5(W,y),uv(y),lv=Ge;break;case 12:P5(W,y),uv(y);break;case 13:P5(W,y),uv(y),y.child.flags&8192&&y.memoizedState!==null!=(ve!==null&&ve.memoizedState!==null)&&(Tv=E1()),Ge&4&&(Ge=y.updateQueue,Ge!==null&&(y.updateQueue=null,tx(y,Ge)));break;case 22:To=y.memoizedState!==null;var H1=ve!==null&&ve.memoizedState!==null,y2=xy,U2=O6;if(xy=y2||To,O6=U2||H1,P5(W,y),O6=U2,xy=y2,uv(y),Ge&8192)e:for(W=y.stateNode,W._visibility=To?W._visibility&-2:W._visibility|1,To&&(ve===null||H1||xy||O6||Ey(y)),ve=null,W=y;;){if(W.tag===5||W.tag===26){if(ve===null){H1=ve=W;try{if(Mh=H1.stateNode,To)f1=Mh.style,typeof f1.setProperty=="function"?f1.setProperty("display","none","important"):f1.display="none";else{S1=H1.stateNode;var Q2=H1.memoizedProps.style,d2=Q2!=null&&Q2.hasOwnProperty("display")?Q2.display:null;S1.style.display=d2==null||typeof d2=="boolean"?"":(""+d2).trim()}}catch(M2){J3(H1,H1.return,M2)}}}else if(W.tag===6){if(ve===null){H1=W;try{H1.stateNode.nodeValue=To?"":H1.memoizedProps}catch(M2){J3(H1,H1.return,M2)}}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===y)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===y)break e;for(;W.sibling===null;){if(W.return===null||W.return===y)break e;ve===W&&(ve=null),W=W.return}ve===W&&(ve=null),W.sibling.return=W.return,W=W.sibling}Ge&4&&(Ge=y.updateQueue,Ge!==null&&(ve=Ge.retryQueue,ve!==null&&(Ge.retryQueue=null,tx(y,ve))));break;case 19:P5(W,y),uv(y),Ge&4&&(Ge=y.updateQueue,Ge!==null&&(y.updateQueue=null,tx(y,Ge)));break;case 30:break;case 21:break;default:P5(W,y),uv(y)}}function uv(y){var W=y.flags;if(W&2){try{for(var ve,Ge=y.return;Ge!==null;){if(Nb(Ge)){ve=Ge;break}Ge=Ge.return}if(ve==null)throw Error(a(160));switch(ve.tag){case 27:var To=ve.stateNode,Mh=J_(y);Fb(y,Mh,To);break;case 5:var f1=ve.stateNode;ve.flags&32&&(d1(f1,""),ve.flags&=-33);var S1=J_(y);Fb(y,S1,f1);break;case 3:case 4:var H1=ve.stateNode.containerInfo,y2=J_(y);h9(y,y2,H1);break;default:throw Error(a(161))}}catch(U2){J3(y,y.return,U2)}y.flags&=-3}W&4096&&(y.flags&=-4097)}function Sw(y){if(y.subtreeFlags&1024)for(y=y.child;y!==null;){var W=y;Sw(W),W.tag===5&&W.flags&1024&&W.stateNode.reset(),y=y.sibling}}function Sy(y,W){if(W.subtreeFlags&8772)for(W=W.child;W!==null;)F6(y,W.alternate,W),W=W.sibling}function Ey(y){for(y=y.child;y!==null;){var W=y;switch(W.tag){case 0:case 11:case 14:case 15:_y(4,W,W.return),Ey(W);break;case 1:ty(W,W.return);var ve=W.stateNode;typeof ve.componentWillUnmount=="function"&&mw(W,W.return,ve),Ey(W);break;case 27:Dy(W.stateNode);case 26:case 5:ty(W,W.return),Ey(W);break;case 22:W.memoizedState===null&&Ey(W);break;case 30:Ey(W);break;default:Ey(W)}y=y.sibling}}function Ty(y,W,ve){for(ve=ve&&(W.subtreeFlags&8772)!==0,W=W.child;W!==null;){var Ge=W.alternate,To=y,Mh=W,f1=Mh.flags;switch(Mh.tag){case 0:case 11:case 15:Ty(To,Mh,ve),_8(4,Mh);break;case 1:if(Ty(To,Mh,ve),Ge=Mh,To=Ge.stateNode,typeof To.componentDidMount=="function")try{To.componentDidMount()}catch(y2){J3(Ge,Ge.return,y2)}if(Ge=Mh,To=Ge.updateQueue,To!==null){var S1=Ge.stateNode;try{var H1=To.shared.hiddenCallbacks;if(H1!==null)for(To.shared.hiddenCallbacks=null,To=0;To<H1.length;To++)Hx(H1[To],S1)}catch(y2){J3(Ge,Ge.return,y2)}}ve&&f1&64&&J9(Mh),N7(Mh,Mh.return);break;case 27:gw(Mh);case 26:case 5:Ty(To,Mh,ve),ve&&Ge===null&&f1&4&&Ib(Mh),N7(Mh,Mh.return);break;case 12:Ty(To,Mh,ve);break;case 13:Ty(To,Mh,ve),ve&&f1&4&&ex(To,Mh);break;case 22:Mh.memoizedState===null&&Ty(To,Mh,ve),N7(Mh,Mh.return);break;case 30:break;default:Ty(To,Mh,ve)}W=W.sibling}}function ix(y,W){var ve=null;y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(ve=y.memoizedState.cachePool.pool),y=null,W.memoizedState!==null&&W.memoizedState.cachePool!==null&&(y=W.memoizedState.cachePool.pool),y!==ve&&(y!=null&&y.refCount++,ve!=null&&nv(ve))}function f9(y,W){y=null,W.alternate!==null&&(y=W.alternate.memoizedState.cache),W=W.memoizedState.cache,W!==y&&(W.refCount++,y!=null&&nv(y))}function Sv(y,W,ve,Ge){if(W.subtreeFlags&10256)for(W=W.child;W!==null;)Ew(y,W,ve,Ge),W=W.sibling}function Ew(y,W,ve,Ge){var To=W.flags;switch(W.tag){case 0:case 11:case 15:Sv(y,W,ve,Ge),To&2048&&_8(9,W);break;case 1:Sv(y,W,ve,Ge);break;case 3:Sv(y,W,ve,Ge),To&2048&&(y=null,W.alternate!==null&&(y=W.alternate.memoizedState.cache),W=W.memoizedState.cache,W!==y&&(W.refCount++,y!=null&&nv(y)));break;case 12:if(To&2048){Sv(y,W,ve,Ge),y=W.stateNode;try{var Mh=W.memoizedProps,f1=Mh.id,S1=Mh.onPostCommit;typeof S1=="function"&&S1(f1,W.alternate===null?"mount":"update",y.passiveEffectDuration,-0)}catch(H1){J3(W,W.return,H1)}}else Sv(y,W,ve,Ge);break;case 13:Sv(y,W,ve,Ge);break;case 23:break;case 22:Mh=W.stateNode,f1=W.alternate,W.memoizedState!==null?Mh._visibility&2?Sv(y,W,ve,Ge):d9(y,W):Mh._visibility&2?Sv(y,W,ve,Ge):(Mh._visibility|=2,x8(y,W,ve,Ge,(W.subtreeFlags&10256)!==0)),To&2048&&ix(f1,W);break;case 24:Sv(y,W,ve,Ge),To&2048&&f9(W.alternate,W);break;default:Sv(y,W,ve,Ge)}}function x8(y,W,ve,Ge,To){for(To=To&&(W.subtreeFlags&10256)!==0,W=W.child;W!==null;){var Mh=y,f1=W,S1=ve,H1=Ge,y2=f1.flags;switch(f1.tag){case 0:case 11:case 15:x8(Mh,f1,S1,H1,To),_8(8,f1);break;case 23:break;case 22:var U2=f1.stateNode;f1.memoizedState!==null?U2._visibility&2?x8(Mh,f1,S1,H1,To):d9(Mh,f1):(U2._visibility|=2,x8(Mh,f1,S1,H1,To)),To&&y2&2048&&ix(f1.alternate,f1);break;case 24:x8(Mh,f1,S1,H1,To),To&&y2&2048&&f9(f1.alternate,f1);break;default:x8(Mh,f1,S1,H1,To)}W=W.sibling}}function d9(y,W){if(W.subtreeFlags&10256)for(W=W.child;W!==null;){var ve=y,Ge=W,To=Ge.flags;switch(Ge.tag){case 22:d9(ve,Ge),To&2048&&ix(Ge.alternate,Ge);break;case 24:d9(ve,Ge),To&2048&&f9(Ge.alternate,Ge);break;default:d9(ve,Ge)}W=W.sibling}}var Jy=8192;function e7(y){if(y.subtreeFlags&Jy)for(y=y.child;y!==null;)Tw(y),y=y.sibling}function Tw(y){switch(y.tag){case 26:e7(y),y.flags&Jy&&y.memoizedState!==null&&PS(lv,y.memoizedState,y.memoizedProps);break;case 5:e7(y);break;case 3:case 4:var W=lv;lv=Mv(y.stateNode.containerInfo),e7(y),lv=W;break;case 22:y.memoizedState===null&&(W=y.alternate,W!==null&&W.memoizedState!==null?(W=Jy,Jy=16777216,e7(y),Jy=W):e7(y));break;default:e7(y)}}function nx(y){var W=y.alternate;if(W!==null&&(y=W.child,y!==null)){W.child=null;do W=y.sibling,y.sibling=null,y=W;while(y!==null)}}function w8(y){var W=y.deletions;if((y.flags&16)!==0){if(W!==null)for(var ve=0;ve<W.length;ve++){var Ge=W[ve];c5=Ge,Aw(Ge,y)}nx(y)}if(y.subtreeFlags&10256)for(y=y.child;y!==null;)D7(y),y=y.sibling}function D7(y){switch(y.tag){case 0:case 11:case 15:w8(y),y.flags&2048&&_y(9,y,y.return);break;case 3:w8(y);break;case 12:w8(y);break;case 22:var W=y.stateNode;y.memoizedState!==null&&W._visibility&2&&(y.return===null||y.return.tag!==13)?(W._visibility&=-3,S8(y)):w8(y);break;default:w8(y)}}function S8(y){var W=y.deletions;if((y.flags&16)!==0){if(W!==null)for(var ve=0;ve<W.length;ve++){var Ge=W[ve];c5=Ge,Aw(Ge,y)}nx(y)}for(y=y.child;y!==null;){switch(W=y,W.tag){case 0:case 11:case 15:_y(8,W,W.return),S8(W);break;case 22:ve=W.stateNode,ve._visibility&2&&(ve._visibility&=-3,S8(W));break;default:S8(W)}y=y.sibling}}function Aw(y,W){for(;c5!==null;){var ve=c5;switch(ve.tag){case 0:case 11:case 15:_y(8,ve,W);break;case 23:case 22:if(ve.memoizedState!==null&&ve.memoizedState.cachePool!==null){var Ge=ve.memoizedState.cachePool.pool;Ge!=null&&Ge.refCount++}break;case 24:nv(ve.memoizedState.cache)}if(Ge=ve.child,Ge!==null)Ge.return=ve,c5=Ge;else e:for(ve=y;c5!==null;){Ge=c5;var To=Ge.sibling,Mh=Ge.return;if(_w(Ge),Ge===ve){c5=null;break e}if(To!==null){To.return=Mh,c5=To;break e}c5=Mh}}}var V5={getCacheForType:function(y){var W=Y6(Q6),ve=W.data.get(y);return ve===void 0&&(ve=y(),W.data.set(y,ve)),ve}},zb=typeof WeakMap=="function"?WeakMap:Map,B3=0,Q3=null,S3=null,I3=0,W3=0,cv=null,qv=!1,t7=!1,E8=!1,X5=0,b6=0,Ay=0,r7=0,Ub=0,Ev=0,Z5=0,p9=null,q3=null,ax=!1,Tv=0,L7=1/0,i7=null,Cy=null,_5=0,My=null,n7=null,T8=0,Av=0,m9=null,Cw=null,ky=0,jb=null;function U6(){if((B3&2)!==0&&I3!==0)return I3&-I3;if(wh.T!==null){var y=t8;return y!==0?y:fx()}return P1()}function Hb(){Ev===0&&(Ev=(I3&536870912)===0||P3?s2():536870912);var y=_v.current;return y!==null&&(y.flags|=32),Ev}function o6(y,W,ve){(y===Q3&&(W3===2||W3===9)||y.cancelPendingCommit!==null)&&(O7(y,0),I5(y,I3,Ev,!1)),k2(y,ve),((B3&2)===0||y!==Q3)&&(y===Q3&&((B3&2)===0&&(r7|=ve),b6===4&&I5(y,I3,Ev,!1)),hv(y))}function Mw(y,W,ve){if((B3&6)!==0)throw Error(a(327));var Ge=!ve&&(W&124)===0&&(W&y.expiredLanes)===0||x2(y,W),To=Ge?Pw(y,W):Wb(y,W,!0),Mh=Ge;do{if(To===0){t7&&!Ge&&I5(y,W,0,!1);break}else{if(ve=y.current.alternate,Mh&&!vS(ve)){To=Wb(y,W,!1),Mh=!1;continue}if(To===2){if(Mh=W,y.errorRecoveryDisabledLanes&Mh)var f1=0;else f1=y.pendingLanes&-536870913,f1=f1!==0?f1:f1&536870912?536870912:0;if(f1!==0){W=f1;e:{var S1=y;To=p9;var H1=S1.current.memoizedState.isDehydrated;if(H1&&(O7(S1,f1).flags|=256),f1=Wb(S1,f1,!1),f1!==2){if(E8&&!H1){S1.errorRecoveryDisabledLanes|=Mh,r7|=Mh,To=4;break e}Mh=q3,q3=To,Mh!==null&&(q3===null?q3=Mh:q3.push.apply(q3,Mh))}To=f1}if(Mh=!1,To!==2)continue}}if(To===1){O7(y,0),I5(y,W,0,!0);break}e:{switch(Ge=y,Mh=To,Mh){case 0:case 1:throw Error(a(345));case 4:if((W&4194048)!==W)break;case 6:I5(Ge,W,Ev,!qv);break e;case 2:q3=null;break;case 3:case 5:break;default:throw Error(a(329))}if((W&62914560)===W&&(To=Tv+300-E1(),10<To)){if(I5(Ge,W,Ev,!qv),l2(Ge,0,!0)!==0)break e;Ge.timeoutHandle=$w(Y5.bind(null,Ge,ve,q3,i7,ax,W,Ev,r7,Z5,qv,Mh,2,-0,0),To);break e}Y5(Ge,ve,q3,i7,ax,W,Ev,r7,Z5,qv,Mh,0,-0,0)}}break}while(!0);hv(y)}function Y5(y,W,ve,Ge,To,Mh,f1,S1,H1,y2,U2,Q2,d2,M2){if(y.timeoutHandle=-1,Q2=W.subtreeFlags,(Q2&8192||(Q2&16785408)===16785408)&&(w9={stylesheets:null,count:0,unsuspend:RS},Tw(W),Q2=l_(),Q2!==null)){y.cancelPendingCommit=Q2(Iw.bind(null,y,W,Mh,ve,Ge,To,f1,S1,H1,U2,1,d2,M2)),I5(y,Mh,f1,!y2);return}Iw(y,W,Mh,ve,Ge,To,f1,S1,H1)}function vS(y){for(var W=y;;){var ve=W.tag;if((ve===0||ve===11||ve===15)&&W.flags&16384&&(ve=W.updateQueue,ve!==null&&(ve=ve.stores,ve!==null)))for(var Ge=0;Ge<ve.length;Ge++){var To=ve[Ge],Mh=To.getSnapshot;To=To.value;try{if(!X4(Mh(),To))return!1}catch{return!1}}if(ve=W.child,W.subtreeFlags&16384&&ve!==null)ve.return=W,W=ve;else{if(W===y)break;for(;W.sibling===null;){if(W.return===null||W.return===y)return!0;W=W.return}W.sibling.return=W.return,W=W.sibling}}return!0}function I5(y,W,ve,Ge){W&=~Ub,W&=~r7,y.suspendedLanes|=W,y.pingedLanes&=~W,Ge&&(y.warmLanes|=W),Ge=y.expirationTimes;for(var To=W;0<To;){var Mh=31-B1(To),f1=1<<Mh;Ge[Mh]=-1,To&=~f1}ve!==0&&n4(y,ve,W)}function Gb(){return(B3&6)===0?(k8(0),!1):!0}function A8(){if(S3!==null){if(W3===0)var y=S3.return;else y=S3,Xv=Uy=null,M_(y),bv=null,d8=0,y=S3;for(;y!==null;)Y_(y.alternate,y),y=y.return;S3=null}}function O7(y,W){var ve=y.timeoutHandle;ve!==-1&&(y.timeoutHandle=-1,wS(ve)),ve=y.cancelPendingCommit,ve!==null&&(y.cancelPendingCommit=null,ve()),A8(),Q3=y,S3=ve=a6(y.current,null),I3=W,W3=0,cv=null,qv=!1,t7=x2(y,W),E8=!1,Z5=Ev=Ub=r7=Ay=b6=0,q3=p9=null,ax=!1,(W&8)!==0&&(W|=W&32);var Ge=y.entangledLanes;if(Ge!==0)for(y=y.entanglements,Ge&=W;0<Ge;){var To=31-B1(Ge),Mh=1<<To;W|=y[To],Ge&=~Mh}return X5=W,mv(),ve}function kw(y,W){b3=null,wh.H=ov,W===K8||W===v5?(W=S7(),W3=3):W===i8?(W=S7(),W3=4):W3=W===ow?8:W!==null&&typeof W=="object"&&typeof W.then=="function"?6:1,cv=W,S3===null&&(b6=1,X9(y,M6(W,y.current)))}function m3(){var y=wh.H;return wh.H=ov,y===null?ov:y}function Rw(){var y=wh.A;return wh.A=V5,y}function ry(){b6=4,qv||(I3&4194048)!==I3&&_v.current!==null||(t7=!0),(Ay&134217727)===0&&(r7&134217727)===0||Q3===null||I5(Q3,I3,Ev,!1)}function Wb(y,W,ve){var Ge=B3;B3|=2;var To=m3(),Mh=Rw();(Q3!==y||I3!==W)&&(i7=null,O7(y,W)),W=!1;var f1=b6;e:do try{if(W3!==0&&S3!==null){var S1=S3,H1=cv;switch(W3){case 8:A8(),f1=6;break e;case 3:case 2:case 9:case 6:_v.current===null&&(W=!0);var y2=W3;if(W3=0,cv=null,F7(y,S1,H1,y2),ve&&t7){f1=0;break e}break;default:y2=W3,W3=0,cv=null,F7(y,S1,H1,y2)}}$v(),f1=b6;break}catch(U2){kw(y,U2)}while(!0);return W&&y.shellSuspendCounter++,Xv=Uy=null,B3=Ge,wh.H=To,wh.A=Mh,S3===null&&(Q3=null,I3=0,mv()),f1}function $v(){for(;S3!==null;)sx(S3)}function Pw(y,W){var ve=B3;B3|=2;var Ge=m3(),To=Rw();Q3!==y||I3!==W?(i7=null,L7=E1()+500,O7(y,W)):t7=x2(y,W);e:do try{if(W3!==0&&S3!==null){W=S3;var Mh=cv;t:switch(W3){case 1:W3=0,cv=null,F7(y,W,Mh,1);break;case 2:case 9:if(B4(Mh)){W3=0,cv=null,ox(W);break}W=function(){W3!==2&&W3!==9||Q3!==y||(W3=7),hv(y)},Mh.then(W,W);break e;case 3:W3=7;break e;case 4:W3=5;break e;case 7:B4(Mh)?(W3=0,cv=null,ox(W)):(W3=0,cv=null,F7(y,W,Mh,7));break;case 5:var f1=null;switch(S3.tag){case 26:f1=S3.memoizedState;case 5:case 27:var S1=S3;if(!f1||Rx(f1)){W3=0,cv=null;var H1=S1.sibling;if(H1!==null)S3=H1;else{var y2=S1.return;y2!==null?(S3=y2,Ry(y2)):S3=null}break t}}W3=0,cv=null,F7(y,W,Mh,5);break;case 6:W3=0,cv=null,F7(y,W,Mh,6);break;case 8:A8(),b6=6;break e;default:throw Error(a(462))}}J6();break}catch(U2){kw(y,U2)}while(!0);return Xv=Uy=null,wh.H=Ge,wh.A=To,B3=ve,S3!==null?0:(Q3=null,I3=0,mv(),b6)}function J6(){for(;S3!==null&&!K2();)sx(S3)}function sx(y){var W=Z_(y.alternate,y,X5);y.memoizedProps=y.pendingProps,W===null?Ry(y):S3=W}function ox(y){var W=y,ve=W.alternate;switch(W.tag){case 15:case 0:W=uw(ve,W,W.pendingProps,W.type,void 0,I3);break;case 11:W=uw(ve,W,W.pendingProps,W.type.render,W.ref,I3);break;case 5:M_(W);default:Y_(ve,W),W=S3=gv(W,X5),W=Z_(ve,W,X5)}y.memoizedProps=y.pendingProps,W===null?Ry(y):S3=W}function F7(y,W,ve,Ge){Xv=Uy=null,M_(W),bv=null,d8=0;var To=W.return;try{if(sw(y,To,W,ve,I3)){b6=1,X9(y,M6(ve,y.current)),S3=null;return}}catch(Mh){if(To!==null)throw S3=To,Mh;b6=1,X9(y,M6(ve,y.current)),S3=null;return}W.flags&32768?(P3||Ge===1?y=!0:t7||(I3&536870912)!==0?y=!1:(qv=y=!0,(Ge===2||Ge===9||Ge===3||Ge===6)&&(Ge=_v.current,Ge!==null&&Ge.tag===13&&(Ge.flags|=16384))),lx(W,y)):Ry(W)}function Ry(y){var W=y;do{if((W.flags&32768)!==0){lx(W,qv);return}y=W.return;var ve=pw(W.alternate,W,X5);if(ve!==null){S3=ve;return}if(W=W.sibling,W!==null){S3=W;return}S3=W=y}while(W!==null);b6===0&&(b6=5)}function lx(y,W){do{var ve=c9(y.alternate,y);if(ve!==null){ve.flags&=32767,S3=ve;return}if(ve=y.return,ve!==null&&(ve.flags|=32768,ve.subtreeFlags=0,ve.deletions=null),!W&&(y=y.sibling,y!==null)){S3=y;return}S3=y=ve}while(y!==null);b6=6,S3=null}function Iw(y,W,ve,Ge,To,Mh,f1,S1,H1){y.cancelPendingCommit=null;do C8();while(_5!==0);if((B3&6)!==0)throw Error(a(327));if(W!==null){if(W===y.current)throw Error(a(177));if(Mh=W.lanes|W.childLanes,Mh|=pv,a4(y,ve,Mh,f1,S1,H1),y===Q3&&(S3=Q3=null,I3=0),n7=W,My=y,T8=ve,Av=Mh,m9=To,Cw=Ge,(W.subtreeFlags&10256)!==0||(W.flags&10256)!==0?(y.callbackNode=null,y.callbackPriority=0,j6(J1,function(){return Xb(),null})):(y.callbackNode=null,y.callbackPriority=0),Ge=(W.flags&13878)!==0,(W.subtreeFlags&13878)!==0||Ge){Ge=wh.T,wh.T=null,To=gf.p,gf.p=2,f1=B3,B3|=4;try{bw(y,W,ve)}finally{B3=f1,gf.p=To,wh.T=Ge}}_5=1,Nw(),V7(),e5()}}function Nw(){if(_5===1){_5=0;var y=My,W=n7,ve=(W.flags&13878)!==0;if((W.subtreeFlags&13878)!==0||ve){ve=wh.T,wh.T=null;var Ge=gf.p;gf.p=2;var To=B3;B3|=4;try{rx(W,y);var Mh=bx,f1=I2(y.containerInfo),S1=Mh.focusedElem,H1=Mh.selectionRange;if(f1!==S1&&S1&&S1.ownerDocument&&x3(S1.ownerDocument.documentElement,S1)){if(H1!==null&&s4(S1)){var y2=H1.start,U2=H1.end;if(U2===void 0&&(U2=y2),"selectionStart"in S1)S1.selectionStart=y2,S1.selectionEnd=Math.min(U2,S1.value.length);else{var Q2=S1.ownerDocument||document,d2=Q2&&Q2.defaultView||window;if(d2.getSelection){var M2=d2.getSelection(),n3=S1.textContent.length,J4=Math.min(H1.start,n3),X3=H1.end===void 0?J4:Math.min(H1.end,n3);!M2.extend&&J4>X3&&(f1=X3,X3=J4,J4=f1);var o2=x4(S1,J4),t2=x4(S1,X3);if(o2&&t2&&(M2.rangeCount!==1||M2.anchorNode!==o2.node||M2.anchorOffset!==o2.offset||M2.focusNode!==t2.node||M2.focusOffset!==t2.offset)){var g2=Q2.createRange();g2.setStart(o2.node,o2.offset),M2.removeAllRanges(),J4>X3?(M2.addRange(g2),M2.extend(t2.node,t2.offset)):(g2.setEnd(t2.node,t2.offset),M2.addRange(g2))}}}}for(Q2=[],M2=S1;M2=M2.parentNode;)M2.nodeType===1&&Q2.push({element:M2,left:M2.scrollLeft,top:M2.scrollTop});for(typeof S1.focus=="function"&&S1.focus(),S1=0;S1<Q2.length;S1++){var G2=Q2[S1];G2.element.scrollLeft=G2.left,G2.element.scrollTop=G2.top}}u_=!!r_,bx=r_=null}finally{B3=To,gf.p=Ge,wh.T=ve}}y.current=W,_5=2}}function V7(){if(_5===2){_5=0;var y=My,W=n7,ve=(W.flags&8772)!==0;if((W.subtreeFlags&8772)!==0||ve){ve=wh.T,wh.T=null;var Ge=gf.p;gf.p=2;var To=B3;B3|=4;try{F6(y,W.alternate,W)}finally{B3=To,gf.p=Ge,wh.T=ve}}_5=3}}function e5(){if(_5===4||_5===3){_5=0,S2();var y=My,W=n7,ve=T8,Ge=Cw;(W.subtreeFlags&10256)!==0||(W.flags&10256)!==0?_5=5:(_5=0,n7=My=null,B7(y,y.pendingLanes));var To=y.pendingLanes;if(To===0&&(Cy=null),v4(ve),W=W.stateNode,u1&&typeof u1.onCommitFiberRoot=="function")try{u1.onCommitFiberRoot(g1,W,void 0,(W.current.flags&128)===128)}catch{}if(Ge!==null){W=wh.T,To=gf.p,gf.p=2,wh.T=null;try{for(var Mh=y.onRecoverableError,f1=0;f1<Ge.length;f1++){var S1=Ge[f1];Mh(S1.value,{componentStack:S1.stack})}}finally{wh.T=W,gf.p=To}}(T8&3)!==0&&C8(),hv(y),To=y.pendingLanes,(ve&4194090)!==0&&(To&42)!==0?y===jb?ky++:(ky=0,jb=y):ky=0,k8(0)}}function B7(y,W){(y.pooledCacheLanes&=W)===0&&(W=y.pooledCache,W!=null&&(y.pooledCache=null,nv(W)))}function C8(y){return Nw(),V7(),e5(),Xb()}function Xb(){if(_5!==5)return!1;var y=My,W=Av;Av=0;var ve=v4(T8),Ge=wh.T,To=gf.p;try{gf.p=32>ve?32:ve,wh.T=null,ve=m9,m9=null;var Mh=My,f1=T8;if(_5=0,n7=My=null,T8=0,(B3&6)!==0)throw Error(a(331));var S1=B3;if(B3|=4,D7(Mh.current),Ew(Mh,Mh.current,f1,ve),B3=S1,k8(0,!1),u1&&typeof u1.onPostCommitFiberRoot=="function")try{u1.onPostCommitFiberRoot(g1,Mh)}catch{}return!0}finally{gf.p=To,wh.T=Ge,B7(y,W)}}function Dw(y,W,ve){W=M6(ve,W),W=z_(y.stateNode,W,2),y=Hy(y,W,2),y!==null&&(k2(y,2),hv(y))}function J3(y,W,ve){if(y.tag===3)Dw(y,y,ve);else for(;W!==null;){if(W.tag===3){Dw(W,y,ve);break}else if(W.tag===1){var Ge=W.stateNode;if(typeof W.type.getDerivedStateFromError=="function"||typeof Ge.componentDidCatch=="function"&&(Cy===null||!Cy.has(Ge))){y=M6(ve,y),ve=nw(2),Ge=Hy(W,ve,2),Ge!==null&&(aw(ve,Ge,W,y),k2(Ge,2),hv(Ge));break}}W=W.return}}function M8(y,W,ve){var Ge=y.pingCache;if(Ge===null){Ge=y.pingCache=new zb;var To=new Set;Ge.set(W,To)}else To=Ge.get(W),To===void 0&&(To=new Set,Ge.set(W,To));To.has(ve)||(E8=!0,To.add(ve),y=ux.bind(null,y,W,ve),W.then(y,y))}function ux(y,W,ve){var Ge=y.pingCache;Ge!==null&&Ge.delete(W),y.pingedLanes|=y.suspendedLanes&ve,y.warmLanes&=~ve,Q3===y&&(I3&ve)===ve&&(b6===4||b6===3&&(I3&62914560)===I3&&300>E1()-Tv?(B3&2)===0&&O7(y,0):Ub|=ve,Z5===I3&&(Z5=0)),hv(y)}function a7(y,W){W===0&&(W=j2()),y=oy(y,W),y!==null&&(k2(y,W),hv(y))}function cx(y){var W=y.memoizedState,ve=0;W!==null&&(ve=W.retryLane),a7(y,ve)}function hx(y,W){var ve=0;switch(y.tag){case 13:var Ge=y.stateNode,To=y.memoizedState;To!==null&&(ve=To.retryLane);break;case 19:Ge=y.stateNode;break;case 22:Ge=y.stateNode._retryCache;break;default:throw Error(a(314))}Ge!==null&&Ge.delete(W),a7(y,ve)}function j6(y,W){return q2(y,W)}var E6=null,Py=null,zv=!1,B5=!1,t5=!1,Iy=0;function hv(y){y!==Py&&y.next===null&&(Py===null?E6=Py=y:Py=Py.next=y),B5=!0,zv||(zv=!0,R8())}function k8(y,W){if(!t5&&B5){t5=!0;do for(var ve=!1,Ge=E6;Ge!==null;){if(y!==0){var To=Ge.pendingLanes;if(To===0)var Mh=0;else{var f1=Ge.suspendedLanes,S1=Ge.pingedLanes;Mh=(1<<31-B1(42|y)+1)-1,Mh&=To&~(f1&~S1),Mh=Mh&201326741?Mh&201326741|1:Mh?Mh|2:0}Mh!==0&&(ve=!0,Yb(Ge,Mh))}else Mh=I3,Mh=l2(Ge,Ge===Q3?Mh:0,Ge.cancelPendingCommit!==null||Ge.timeoutHandle!==-1),(Mh&3)===0||x2(Ge,Mh)||(ve=!0,Yb(Ge,Mh));Ge=Ge.next}while(ve);t5=!1}}function yS(){Lw()}function Lw(){B5=zv=!1;var y=0;Iy!==0&&(xS()&&(y=Iy),Iy=0);for(var W=E1(),ve=null,Ge=E6;Ge!==null;){var To=Ge.next,Mh=Uv(Ge,W);Mh===0?(Ge.next=null,ve===null?E6=To:ve.next=To,To===null&&(Py=ve)):(ve=Ge,(y!==0||(Mh&3)!==0)&&(B5=!0)),Ge=To}k8(y)}function Uv(y,W){for(var ve=y.suspendedLanes,Ge=y.pingedLanes,To=y.expirationTimes,Mh=y.pendingLanes&-62914561;0<Mh;){var f1=31-B1(Mh),S1=1<<f1,H1=To[f1];H1===-1?((S1&ve)===0||(S1&Ge)!==0)&&(To[f1]=u2(S1,W)):H1<=W&&(y.expiredLanes|=S1),Mh&=~S1}if(W=Q3,ve=I3,ve=l2(y,y===W?ve:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),Ge=y.callbackNode,ve===0||y===W&&(W3===2||W3===9)||y.cancelPendingCommit!==null)return Ge!==null&&Ge!==null&&B2(Ge),y.callbackNode=null,y.callbackPriority=0;if((ve&3)===0||x2(y,ve)){if(W=ve&-ve,W===y.callbackPriority)return W;switch(Ge!==null&&B2(Ge),v4(ve)){case 2:case 8:ve=N1;break;case 32:ve=J1;break;case 268435456:ve=n2;break;default:ve=J1}return Ge=Zb.bind(null,y),ve=q2(ve,Ge),y.callbackPriority=W,y.callbackNode=ve,W}return Ge!==null&&Ge!==null&&B2(Ge),y.callbackPriority=2,y.callbackNode=null,2}function Zb(y,W){if(_5!==0&&_5!==5)return y.callbackNode=null,y.callbackPriority=0,null;var ve=y.callbackNode;if(C8()&&y.callbackNode!==ve)return null;var Ge=I3;return Ge=l2(y,y===Q3?Ge:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),Ge===0?null:(Mw(y,Ge,W),Uv(y,E1()),y.callbackNode!=null&&y.callbackNode===ve?Zb.bind(null,y):null)}function Yb(y,W){if(C8())return null;Mw(y,W,!0)}function R8(){ES(function(){(B3&6)!==0?q2(K1,yS):Lw()})}function fx(){return Iy===0&&(Iy=s2()),Iy}function Ow(y){return y==null||typeof y=="symbol"||typeof y=="boolean"?null:typeof y=="function"?y:d4(""+y)}function dx(y,W){var ve=W.ownerDocument.createElement("input");return ve.name=W.name,ve.value=W.value,y.id&&ve.setAttribute("form",y.id),W.parentNode.insertBefore(ve,W),y=new FormData(y),ve.parentNode.removeChild(ve),y}function Qb(y,W,ve,Ge,To){if(W==="submit"&&ve&&ve.stateNode===To){var Mh=Ow((To[P2]||null).action),f1=Ge.submitter;f1&&(W=(W=f1[P2]||null)?Ow(W.formAction):f1.getAttribute("formAction"),W!==null&&(Mh=W,f1=null));var S1=new g6("action","action",null,Ge,To);y.push({event:S1,listeners:[{instance:null,listener:function(){if(Ge.defaultPrevented){if(Iy!==0){var H1=f1?dx(To,f1):new FormData(To);D6(ve,{pending:!0,data:H1,method:To.method,action:Mh},null,H1)}}else typeof Mh=="function"&&(S1.preventDefault(),H1=f1?dx(To,f1):new FormData(To),D6(ve,{pending:!0,data:H1,method:To.method,action:Mh},Mh,H1))},currentTarget:To}]})}}for(var Jb=0;Jb<Pv.length;Jb++){var g9=Pv[Jb],bS=g9.toLowerCase(),_S=g9[0].toUpperCase()+g9.slice(1);C6(bS,"on"+_S)}C6(E5,"onAnimationEnd"),C6(X6,"onAnimationIteration"),C6(i3,"onAnimationStart"),C6("dblclick","onDoubleClick"),C6("focusin","onFocus"),C6("focusout","onBlur"),C6(t3,"onTransitionRun"),C6(h6,"onTransitionStart"),C6(T5,"onTransitionCancel"),C6(Z6,"onTransitionEnd"),O2("onMouseEnter",["mouseout","mouseover"]),O2("onMouseLeave",["mouseout","mouseover"]),O2("onPointerEnter",["pointerout","pointerover"]),O2("onPointerLeave",["pointerout","pointerover"]),_2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_2("onBeforeInput",["compositionend","keypress","textInput","paste"]),_2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var q5="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(q5));function Vw(y,W){W=(W&4)!==0;for(var ve=0;ve<y.length;ve++){var Ge=y[ve],To=Ge.event;Ge=Ge.listeners;e:{var Mh=void 0;if(W)for(var f1=Ge.length-1;0<=f1;f1--){var S1=Ge[f1],H1=S1.instance,y2=S1.currentTarget;if(S1=S1.listener,H1!==Mh&&To.isPropagationStopped())break e;Mh=S1,To.currentTarget=y2;try{Mh(To)}catch(U2){P7(U2)}To.currentTarget=null,Mh=H1}else for(f1=0;f1<Ge.length;f1++){if(S1=Ge[f1],H1=S1.instance,y2=S1.currentTarget,S1=S1.listener,H1!==Mh&&To.isPropagationStopped())break e;Mh=S1,To.currentTarget=y2;try{Mh(To)}catch(U2){P7(U2)}To.currentTarget=null,Mh=H1}}}}function T3(y,W){var ve=W[$2];ve===void 0&&(ve=W[$2]=new Set);var Ge=y+"__bubble";ve.has(Ge)||(gx(W,y,2,!1),ve.add(Ge))}function mx(y,W,ve){var Ge=0;W&&(Ge|=4),gx(ve,y,Ge,W)}var v9="_reactListening"+Math.random().toString(36).slice(2);function y9(y){if(!y[v9]){y[v9]=!0,W1.forEach(function(ve){ve!=="selectionchange"&&(Fw.has(ve)||mx(ve,!1,y),mx(ve,!0,y))});var W=y.nodeType===9?y:y.ownerDocument;W===null||W[v9]||(W[v9]=!0,mx("selectionchange",!1,W))}}function gx(y,W,ve,Ge){switch(iS(W)){case 2:var To=Dx;break;case 8:To=u7;break;default:To=c_}ve=To.bind(null,W,ve,y),To=void 0,!D4||W!=="touchstart"&&W!=="touchmove"&&W!=="wheel"||(To=!0),Ge?To!==void 0?y.addEventListener(W,ve,{capture:!0,passive:To}):y.addEventListener(W,ve,!0):To!==void 0?y.addEventListener(W,ve,{passive:To}):y.addEventListener(W,ve,!1)}function vx(y,W,ve,Ge,To){var Mh=Ge;if((W&1)===0&&(W&2)===0&&Ge!==null)e:for(;;){if(Ge===null)return;var f1=Ge.tag;if(f1===3||f1===4){var S1=Ge.stateNode.containerInfo;if(S1===To)break;if(f1===4)for(f1=Ge.return;f1!==null;){var H1=f1.tag;if((H1===3||H1===4)&&f1.stateNode.containerInfo===To)return;f1=f1.return}for(;S1!==null;){if(f1=w1(S1),f1===null)return;if(H1=f1.tag,H1===5||H1===6||H1===26||H1===27){Ge=Mh=f1;continue e}S1=S1.parentNode}}Ge=Ge.return}X2(function(){var y2=Mh,U2=i4(ve),Q2=[];e:{var d2=g5.get(y);if(d2!==void 0){var M2=g6,n3=y;switch(y){case"keypress":if(g3(ve)===0)break e;case"keydown":case"keyup":M2=j5;break;case"focusin":n3="focus",M2=S5;break;case"focusout":n3="blur",M2=S5;break;case"beforeblur":case"afterblur":M2=S5;break;case"click":if(ve.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M2=r6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M2=Rv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M2=I4;break;case E5:case X6:case i3:M2=a5;break;case Z6:M2=K7;break;case"scroll":case"scrollend":M2=i5;break;case"wheel":M2=sy;break;case"copy":case"cut":case"paste":M2=x6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M2=qy;break;case"toggle":case"beforetoggle":M2=X7}var J4=(W&4)!==0,X3=!J4&&(y==="scroll"||y==="scrollend"),o2=J4?d2!==null?d2+"Capture":null:d2;J4=[];for(var t2=y2,g2;t2!==null;){var G2=t2;if(g2=G2.stateNode,G2=G2.tag,G2!==5&&G2!==26&&G2!==27||g2===null||o2===null||(G2=f3(t2,o2),G2!=null&&J4.push(P8(t2,G2,g2))),X3)break;t2=t2.return}0<J4.length&&(d2=new M2(d2,n3,null,ve,U2),Q2.push({event:d2,listeners:J4}))}}if((W&7)===0){e:{if(d2=y==="mouseover"||y==="pointerover",M2=y==="mouseout"||y==="pointerout",d2&&ve!==z2&&(n3=ve.relatedTarget||ve.fromElement)&&(w1(n3)||n3[c2]))break e;if((M2||d2)&&(d2=U2.window===U2?U2:(d2=U2.ownerDocument)?d2.defaultView||d2.parentWindow:window,M2?(n3=ve.relatedTarget||ve.toElement,M2=y2,n3=n3?w1(n3):null,n3!==null&&(X3=u(n3),J4=n3.tag,n3!==X3||J4!==5&&J4!==27&&J4!==6)&&(n3=null)):(M2=null,n3=y2),M2!==n3)){if(J4=r6,G2="onMouseLeave",o2="onMouseEnter",t2="mouse",(y==="pointerout"||y==="pointerover")&&(J4=qy,G2="onPointerLeave",o2="onPointerEnter",t2="pointer"),X3=M2==null?d2:C1(M2),g2=n3==null?d2:C1(n3),d2=new J4(G2,t2+"leave",M2,ve,U2),d2.target=X3,d2.relatedTarget=g2,G2=null,w1(U2)===y2&&(J4=new J4(o2,t2+"enter",n3,ve,U2),J4.target=g2,J4.relatedTarget=X3,G2=J4),X3=G2,M2&&n3)t:{for(J4=M2,o2=n3,t2=0,g2=J4;g2;g2=s7(g2))t2++;for(g2=0,G2=o2;G2;G2=s7(G2))g2++;for(;0<t2-g2;)J4=s7(J4),t2--;for(;0<g2-t2;)o2=s7(o2),g2--;for(;t2--;){if(J4===o2||o2!==null&&J4===o2.alternate)break t;J4=s7(J4),o2=s7(o2)}J4=null}else J4=null;M2!==null&&I8(Q2,d2,M2,J4,!1),n3!==null&&X3!==null&&I8(Q2,X3,n3,J4,!0)}}e:{if(d2=y2?C1(y2):window,M2=d2.nodeName&&d2.nodeName.toLowerCase(),M2==="select"||M2==="input"&&d2.type==="file")var k4=U1;else if(P6(d2))if(r2)k4=V4;else{k4=F4;var _3=D2}else M2=d2.nodeName,!M2||M2.toLowerCase()!=="input"||d2.type!=="checkbox"&&d2.type!=="radio"?y2&&m2(y2.elementType)&&(k4=U1):k4=M4;if(k4&&(k4=k4(y,y2))){s5(Q2,k4,ve,U2);break e}_3&&_3(y,d2,y2),y==="focusout"&&y2&&d2.type==="number"&&y2.memoizedProps.value!=null&&De(d2,"number",d2.value)}switch(_3=y2?C1(y2):window,y){case"focusin":(P6(_3)||_3.contentEditable==="true")&&(L4=_3,L3=y2,_4=null);break;case"focusout":_4=L3=L4=null;break;case"mousedown":p6=!0;break;case"contextmenu":case"mouseup":case"dragend":p6=!1,u6(Q2,ve,U2);break;case"selectionchange":if(j1)break;case"keydown":case"keyup":u6(Q2,ve,U2)}var q4;if(tv)e:{switch(y){case"compositionstart":var r3="onCompositionStart";break e;case"compositionend":r3="onCompositionEnd";break e;case"compositionupdate":r3="onCompositionUpdate";break e}r3=void 0}else C3?L2(y,ve)&&(r3="onCompositionEnd"):y==="keydown"&&ve.keyCode===229&&(r3="onCompositionStart");r3&&(c1&&ve.locale!=="ko"&&(C3||r3!=="onCompositionStart"?r3==="onCompositionEnd"&&C3&&(q4=v3()):(Z3=U2,U3="value"in Z3?Z3.value:Z3.textContent,C3=!0)),_3=q7(y2,r3),0<_3.length&&(r3=new i6(r3,y,null,ve,U2),Q2.push({event:r3,listeners:_3}),q4?r3.data=q4:(q4=g4(ve),q4!==null&&(r3.data=q4)))),(q4=t1?n6(y,ve):E3(y,ve))&&(r3=q7(y2,"onBeforeInput"),0<r3.length&&(_3=new i6("onBeforeInput","beforeinput",null,ve,U2),Q2.push({event:_3,listeners:r3}),_3.data=q4)),Qb(Q2,y,y2,ve,U2)}Vw(Q2,W)})}function P8(y,W,ve){return{instance:y,listener:W,currentTarget:ve}}function q7(y,W){for(var ve=W+"Capture",Ge=[];y!==null;){var To=y,Mh=To.stateNode;if(To=To.tag,To!==5&&To!==26&&To!==27||Mh===null||(To=f3(y,ve),To!=null&&Ge.unshift(P8(y,To,Mh)),To=f3(y,W),To!=null&&Ge.push(P8(y,To,Mh))),y.tag===3)return Ge;y=y.return}return[]}function s7(y){if(y===null)return null;do y=y.return;while(y&&y.tag!==5&&y.tag!==27);return y||null}function I8(y,W,ve,Ge,To){for(var Mh=W._reactName,f1=[];ve!==null&&ve!==Ge;){var S1=ve,H1=S1.alternate,y2=S1.stateNode;if(S1=S1.tag,H1!==null&&H1===Ge)break;S1!==5&&S1!==26&&S1!==27||y2===null||(H1=y2,To?(y2=f3(ve,Mh),y2!=null&&f1.unshift(P8(ve,y2,H1))):To||(y2=f3(ve,Mh),y2!=null&&f1.push(P8(ve,y2,H1)))),ve=ve.return}f1.length!==0&&y.push({event:W,listeners:f1})}var b9=/\r\n?/g,e_=/\u0000|\uFFFD/g;function N8(y){return(typeof y=="string"?y:""+y).replace(b9,`
`).replace(e_,"")}function yx(y,W){return W=N8(W),N8(y)===W}function t_(){}function e6(y,W,ve,Ge,To,Mh){switch(ve){case"children":typeof Ge=="string"?W==="body"||W==="textarea"&&Ge===""||d1(y,Ge):(typeof Ge=="number"||typeof Ge=="bigint")&&W!=="body"&&d1(y,""+Ge);break;case"className":s3(y,"class",Ge);break;case"tabIndex":s3(y,"tabindex",Ge);break;case"dir":case"role":case"viewBox":case"width":case"height":s3(y,ve,Ge);break;case"style":O1(y,Ge,Mh);break;case"data":if(W!=="object"){s3(y,"data",Ge);break}case"src":case"href":if(Ge===""&&(W!=="a"||ve!=="href")){y.removeAttribute(ve);break}if(Ge==null||typeof Ge=="function"||typeof Ge=="symbol"||typeof Ge=="boolean"){y.removeAttribute(ve);break}Ge=d4(""+Ge),y.setAttribute(ve,Ge);break;case"action":case"formAction":if(typeof Ge=="function"){y.setAttribute(ve,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Mh=="function"&&(ve==="formAction"?(W!=="input"&&e6(y,W,"name",To.name,To,null),e6(y,W,"formEncType",To.formEncType,To,null),e6(y,W,"formMethod",To.formMethod,To,null),e6(y,W,"formTarget",To.formTarget,To,null)):(e6(y,W,"encType",To.encType,To,null),e6(y,W,"method",To.method,To,null),e6(y,W,"target",To.target,To,null)));if(Ge==null||typeof Ge=="symbol"||typeof Ge=="boolean"){y.removeAttribute(ve);break}Ge=d4(""+Ge),y.setAttribute(ve,Ge);break;case"onClick":Ge!=null&&(y.onclick=t_);break;case"onScroll":Ge!=null&&T3("scroll",y);break;case"onScrollEnd":Ge!=null&&T3("scrollend",y);break;case"dangerouslySetInnerHTML":if(Ge!=null){if(typeof Ge!="object"||!("__html"in Ge))throw Error(a(61));if(ve=Ge.__html,ve!=null){if(To.children!=null)throw Error(a(60));y.innerHTML=ve}}break;case"multiple":y.multiple=Ge&&typeof Ge!="function"&&typeof Ge!="symbol";break;case"muted":y.muted=Ge&&typeof Ge!="function"&&typeof Ge!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(Ge==null||typeof Ge=="function"||typeof Ge=="boolean"||typeof Ge=="symbol"){y.removeAttribute("xlink:href");break}ve=d4(""+Ge),y.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ve);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":Ge!=null&&typeof Ge!="function"&&typeof Ge!="symbol"?y.setAttribute(ve,""+Ge):y.removeAttribute(ve);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":Ge&&typeof Ge!="function"&&typeof Ge!="symbol"?y.setAttribute(ve,""):y.removeAttribute(ve);break;case"capture":case"download":Ge===!0?y.setAttribute(ve,""):Ge!==!1&&Ge!=null&&typeof Ge!="function"&&typeof Ge!="symbol"?y.setAttribute(ve,Ge):y.removeAttribute(ve);break;case"cols":case"rows":case"size":case"span":Ge!=null&&typeof Ge!="function"&&typeof Ge!="symbol"&&!isNaN(Ge)&&1<=Ge?y.setAttribute(ve,Ge):y.removeAttribute(ve);break;case"rowSpan":case"start":Ge==null||typeof Ge=="function"||typeof Ge=="symbol"||isNaN(Ge)?y.removeAttribute(ve):y.setAttribute(ve,Ge);break;case"popover":T3("beforetoggle",y),T3("toggle",y),h3(y,"popover",Ge);break;case"xlinkActuate":y4(y,"http://www.w3.org/1999/xlink","xlink:actuate",Ge);break;case"xlinkArcrole":y4(y,"http://www.w3.org/1999/xlink","xlink:arcrole",Ge);break;case"xlinkRole":y4(y,"http://www.w3.org/1999/xlink","xlink:role",Ge);break;case"xlinkShow":y4(y,"http://www.w3.org/1999/xlink","xlink:show",Ge);break;case"xlinkTitle":y4(y,"http://www.w3.org/1999/xlink","xlink:title",Ge);break;case"xlinkType":y4(y,"http://www.w3.org/1999/xlink","xlink:type",Ge);break;case"xmlBase":y4(y,"http://www.w3.org/XML/1998/namespace","xml:base",Ge);break;case"xmlLang":y4(y,"http://www.w3.org/XML/1998/namespace","xml:lang",Ge);break;case"xmlSpace":y4(y,"http://www.w3.org/XML/1998/namespace","xml:space",Ge);break;case"is":h3(y,"is",Ge);break;case"innerText":case"textContent":break;default:(!(2<ve.length)||ve[0]!=="o"&&ve[0]!=="O"||ve[1]!=="n"&&ve[1]!=="N")&&(ve=T2.get(ve)||ve,h3(y,ve,Ge))}}function M3(y,W,ve,Ge,To,Mh){switch(ve){case"style":O1(y,Ge,Mh);break;case"dangerouslySetInnerHTML":if(Ge!=null){if(typeof Ge!="object"||!("__html"in Ge))throw Error(a(61));if(ve=Ge.__html,ve!=null){if(To.children!=null)throw Error(a(60));y.innerHTML=ve}}break;case"children":typeof Ge=="string"?d1(y,Ge):(typeof Ge=="number"||typeof Ge=="bigint")&&d1(y,""+Ge);break;case"onScroll":Ge!=null&&T3("scroll",y);break;case"onScrollEnd":Ge!=null&&T3("scrollend",y);break;case"onClick":Ge!=null&&(y.onclick=t_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Y1.hasOwnProperty(ve))e:{if(ve[0]==="o"&&ve[1]==="n"&&(To=ve.endsWith("Capture"),W=ve.slice(2,To?ve.length-7:void 0),Mh=y[P2]||null,Mh=Mh!=null?Mh[ve]:null,typeof Mh=="function"&&y.removeEventListener(W,Mh,To),typeof Ge=="function")){typeof Mh!="function"&&Mh!==null&&(ve in y?y[ve]=null:y.hasAttribute(ve)&&y.removeAttribute(ve)),y.addEventListener(W,Ge,To);break e}ve in y?y[ve]=Ge:Ge===!0?y.setAttribute(ve,""):h3(y,ve,Ge)}}}function x5(y,W,ve){switch(W){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":T3("error",y),T3("load",y);var Ge=!1,To=!1,Mh;for(Mh in ve)if(ve.hasOwnProperty(Mh)){var f1=ve[Mh];if(f1!=null)switch(Mh){case"src":Ge=!0;break;case"srcSet":To=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,W));default:e6(y,W,Mh,f1,ve,null)}}To&&e6(y,W,"srcSet",ve.srcSet,ve,null),Ge&&e6(y,W,"src",ve.src,ve,null);return;case"input":T3("invalid",y);var S1=Mh=f1=To=null,H1=null,y2=null;for(Ge in ve)if(ve.hasOwnProperty(Ge)){var U2=ve[Ge];if(U2!=null)switch(Ge){case"name":To=U2;break;case"type":f1=U2;break;case"checked":H1=U2;break;case"defaultChecked":y2=U2;break;case"value":Mh=U2;break;case"defaultValue":S1=U2;break;case"children":case"dangerouslySetInnerHTML":if(U2!=null)throw Error(a(137,W));break;default:e6(y,W,Ge,U2,ve,null)}}H4(y,Mh,S1,H1,y2,f1,To,!1),c3(y);return;case"select":T3("invalid",y),Ge=f1=Mh=null;for(To in ve)if(ve.hasOwnProperty(To)&&(S1=ve[To],S1!=null))switch(To){case"value":Mh=S1;break;case"defaultValue":f1=S1;break;case"multiple":Ge=S1;default:e6(y,W,To,S1,ve,null)}W=Mh,ve=f1,y.multiple=!!Ge,W!=null?Fc(y,!!Ge,W,!1):ve!=null&&Fc(y,!!Ge,ve,!0);return;case"textarea":T3("invalid",y),Mh=To=Ge=null;for(f1 in ve)if(ve.hasOwnProperty(f1)&&(S1=ve[f1],S1!=null))switch(f1){case"value":Ge=S1;break;case"defaultValue":To=S1;break;case"children":Mh=S1;break;case"dangerouslySetInnerHTML":if(S1!=null)throw Error(a(91));break;default:e6(y,W,f1,S1,ve,null)}r1(y,Ge,To,Mh),c3(y);return;case"option":for(H1 in ve)if(ve.hasOwnProperty(H1)&&(Ge=ve[H1],Ge!=null))switch(H1){case"selected":y.selected=Ge&&typeof Ge!="function"&&typeof Ge!="symbol";break;default:e6(y,W,H1,Ge,ve,null)}return;case"dialog":T3("beforetoggle",y),T3("toggle",y),T3("cancel",y),T3("close",y);break;case"iframe":case"object":T3("load",y);break;case"video":case"audio":for(Ge=0;Ge<q5.length;Ge++)T3(q5[Ge],y);break;case"image":T3("error",y),T3("load",y);break;case"details":T3("toggle",y);break;case"embed":case"source":case"link":T3("error",y),T3("load",y);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(y2 in ve)if(ve.hasOwnProperty(y2)&&(Ge=ve[y2],Ge!=null))switch(y2){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,W));default:e6(y,W,y2,Ge,ve,null)}return;default:if(m2(W)){for(U2 in ve)ve.hasOwnProperty(U2)&&(Ge=ve[U2],Ge!==void 0&&M3(y,W,U2,Ge,ve,void 0));return}}for(S1 in ve)ve.hasOwnProperty(S1)&&(Ge=ve[S1],Ge!=null&&e6(y,W,S1,Ge,ve,null))}function D8(y,W,ve,Ge){switch(W){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var To=null,Mh=null,f1=null,S1=null,H1=null,y2=null,U2=null;for(M2 in ve){var Q2=ve[M2];if(ve.hasOwnProperty(M2)&&Q2!=null)switch(M2){case"checked":break;case"value":break;case"defaultValue":H1=Q2;default:Ge.hasOwnProperty(M2)||e6(y,W,M2,null,Ge,Q2)}}for(var d2 in Ge){var M2=Ge[d2];if(Q2=ve[d2],Ge.hasOwnProperty(d2)&&(M2!=null||Q2!=null))switch(d2){case"type":Mh=M2;break;case"name":To=M2;break;case"checked":y2=M2;break;case"defaultChecked":U2=M2;break;case"value":f1=M2;break;case"defaultValue":S1=M2;break;case"children":case"dangerouslySetInnerHTML":if(M2!=null)throw Error(a(137,W));break;default:M2!==Q2&&e6(y,W,d2,M2,Ge,Q2)}}G6(y,f1,S1,H1,y2,U2,Mh,To);return;case"select":M2=f1=S1=d2=null;for(Mh in ve)if(H1=ve[Mh],ve.hasOwnProperty(Mh)&&H1!=null)switch(Mh){case"value":break;case"multiple":M2=H1;default:Ge.hasOwnProperty(Mh)||e6(y,W,Mh,null,Ge,H1)}for(To in Ge)if(Mh=Ge[To],H1=ve[To],Ge.hasOwnProperty(To)&&(Mh!=null||H1!=null))switch(To){case"value":d2=Mh;break;case"defaultValue":S1=Mh;break;case"multiple":f1=Mh;default:Mh!==H1&&e6(y,W,To,Mh,Ge,H1)}W=S1,ve=f1,Ge=M2,d2!=null?Fc(y,!!ve,d2,!1):!!Ge!=!!ve&&(W!=null?Fc(y,!!ve,W,!0):Fc(y,!!ve,ve?[]:"",!1));return;case"textarea":M2=d2=null;for(S1 in ve)if(To=ve[S1],ve.hasOwnProperty(S1)&&To!=null&&!Ge.hasOwnProperty(S1))switch(S1){case"value":break;case"children":break;default:e6(y,W,S1,null,Ge,To)}for(f1 in Ge)if(To=Ge[f1],Mh=ve[f1],Ge.hasOwnProperty(f1)&&(To!=null||Mh!=null))switch(f1){case"value":d2=To;break;case"defaultValue":M2=To;break;case"children":break;case"dangerouslySetInnerHTML":if(To!=null)throw Error(a(91));break;default:To!==Mh&&e6(y,W,f1,To,Ge,Mh)}hf(y,d2,M2);return;case"option":for(var n3 in ve)if(d2=ve[n3],ve.hasOwnProperty(n3)&&d2!=null&&!Ge.hasOwnProperty(n3))switch(n3){case"selected":y.selected=!1;break;default:e6(y,W,n3,null,Ge,d2)}for(H1 in Ge)if(d2=Ge[H1],M2=ve[H1],Ge.hasOwnProperty(H1)&&d2!==M2&&(d2!=null||M2!=null))switch(H1){case"selected":y.selected=d2&&typeof d2!="function"&&typeof d2!="symbol";break;default:e6(y,W,H1,d2,Ge,M2)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var J4 in ve)d2=ve[J4],ve.hasOwnProperty(J4)&&d2!=null&&!Ge.hasOwnProperty(J4)&&e6(y,W,J4,null,Ge,d2);for(y2 in Ge)if(d2=Ge[y2],M2=ve[y2],Ge.hasOwnProperty(y2)&&d2!==M2&&(d2!=null||M2!=null))switch(y2){case"children":case"dangerouslySetInnerHTML":if(d2!=null)throw Error(a(137,W));break;default:e6(y,W,y2,d2,Ge,M2)}return;default:if(m2(W)){for(var X3 in ve)d2=ve[X3],ve.hasOwnProperty(X3)&&d2!==void 0&&!Ge.hasOwnProperty(X3)&&M3(y,W,X3,void 0,Ge,d2);for(U2 in Ge)d2=Ge[U2],M2=ve[U2],!Ge.hasOwnProperty(U2)||d2===M2||d2===void 0&&M2===void 0||M3(y,W,U2,d2,Ge,M2);return}}for(var o2 in ve)d2=ve[o2],ve.hasOwnProperty(o2)&&d2!=null&&!Ge.hasOwnProperty(o2)&&e6(y,W,o2,null,Ge,d2);for(Q2 in Ge)d2=Ge[Q2],M2=ve[Q2],!Ge.hasOwnProperty(Q2)||d2===M2||d2==null&&M2==null||e6(y,W,Q2,d2,Ge,M2)}var r_=null,bx=null;function i_(y){return y.nodeType===9?y:y.ownerDocument}function Bw(y){switch(y){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qw(y,W){if(y===0)switch(W){case"svg":return 1;case"math":return 2;default:return 0}return y===1&&W==="foreignObject"?0:y}function _x(y,W){return y==="textarea"||y==="noscript"||typeof W.children=="string"||typeof W.children=="number"||typeof W.children=="bigint"||typeof W.dangerouslySetInnerHTML=="object"&&W.dangerouslySetInnerHTML!==null&&W.dangerouslySetInnerHTML.__html!=null}var n_=null;function xS(){var y=window.event;return y&&y.type==="popstate"?y===n_?!1:(n_=y,!0):(n_=null,!1)}var $w=typeof setTimeout=="function"?setTimeout:void 0,wS=typeof clearTimeout=="function"?clearTimeout:void 0,zw=typeof Promise=="function"?Promise:void 0,ES=typeof queueMicrotask=="function"?queueMicrotask:typeof zw<"u"?function(y){return zw.resolve(null).then(y).catch(Uw)}:$w;function Uw(y){setTimeout(function(){throw y})}function Ny(y){return y==="head"}function xx(y,W){var ve=W,Ge=0,To=0;do{var Mh=ve.nextSibling;if(y.removeChild(ve),Mh&&Mh.nodeType===8)if(ve=Mh.data,ve==="/$"){if(0<Ge&&8>Ge){ve=Ge;var f1=y.ownerDocument;if(ve&1&&Dy(f1.documentElement),ve&2&&Dy(f1.body),ve&4)for(ve=f1.head,Dy(ve),f1=ve.firstChild;f1;){var S1=f1.nextSibling,H1=f1.nodeName;f1[a1]||H1==="SCRIPT"||H1==="STYLE"||H1==="LINK"&&f1.rel.toLowerCase()==="stylesheet"||ve.removeChild(f1),f1=S1}}if(To===0){y.removeChild(Mh),k9(W);return}To--}else ve==="$"||ve==="$?"||ve==="$!"?To++:Ge=ve.charCodeAt(0)-48;else Ge=0;ve=Mh}while(ve);k9(W)}function $7(y){var W=y.firstChild;for(W&&W.nodeType===10&&(W=W.nextSibling);W;){var ve=W;switch(W=W.nextSibling,ve.nodeName){case"HTML":case"HEAD":case"BODY":$7(ve),l1(ve);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(ve.rel.toLowerCase()==="stylesheet")continue}y.removeChild(ve)}}function wx(y,W,ve,Ge){for(;y.nodeType===1;){var To=ve;if(y.nodeName.toLowerCase()!==W.toLowerCase()){if(!Ge&&(y.nodeName!=="INPUT"||y.type!=="hidden"))break}else if(Ge){if(!y[a1])switch(W){case"meta":if(!y.hasAttribute("itemprop"))break;return y;case"link":if(Mh=y.getAttribute("rel"),Mh==="stylesheet"&&y.hasAttribute("data-precedence"))break;if(Mh!==To.rel||y.getAttribute("href")!==(To.href==null||To.href===""?null:To.href)||y.getAttribute("crossorigin")!==(To.crossOrigin==null?null:To.crossOrigin)||y.getAttribute("title")!==(To.title==null?null:To.title))break;return y;case"style":if(y.hasAttribute("data-precedence"))break;return y;case"script":if(Mh=y.getAttribute("src"),(Mh!==(To.src==null?null:To.src)||y.getAttribute("type")!==(To.type==null?null:To.type)||y.getAttribute("crossorigin")!==(To.crossOrigin==null?null:To.crossOrigin))&&Mh&&y.hasAttribute("async")&&!y.hasAttribute("itemprop"))break;return y;default:return y}}else if(W==="input"&&y.type==="hidden"){var Mh=To.name==null?null:""+To.name;if(To.type==="hidden"&&y.getAttribute("name")===Mh)return y}else return y;if(y=Cv(y.nextSibling),y===null)break}return null}function Sx(y,W,ve){if(W==="")return null;for(;y.nodeType!==3;)if((y.nodeType!==1||y.nodeName!=="INPUT"||y.type!=="hidden")&&!ve||(y=Cv(y.nextSibling),y===null))return null;return y}function a_(y){return y.data==="$!"||y.data==="$?"&&y.ownerDocument.readyState==="complete"}function jw(y,W){var ve=y.ownerDocument;if(y.data!=="$?"||ve.readyState==="complete")W();else{var Ge=function(){W(),ve.removeEventListener("DOMContentLoaded",Ge)};ve.addEventListener("DOMContentLoaded",Ge),y._reactRetry=Ge}}function Cv(y){for(;y!=null;y=y.nextSibling){var W=y.nodeType;if(W===1||W===3)break;if(W===8){if(W=y.data,W==="$"||W==="$!"||W==="$?"||W==="F!"||W==="F")break;if(W==="/$")return null}}return y}var L8=null;function Ex(y){y=y.previousSibling;for(var W=0;y;){if(y.nodeType===8){var ve=y.data;if(ve==="$"||ve==="$!"||ve==="$?"){if(W===0)return y;W--}else ve==="/$"&&W++}y=y.previousSibling}return null}function Tx(y,W,ve){switch(W=i_(ve),y){case"html":if(y=W.documentElement,!y)throw Error(a(452));return y;case"head":if(y=W.head,!y)throw Error(a(453));return y;case"body":if(y=W.body,!y)throw Error(a(454));return y;default:throw Error(a(451))}}function Dy(y){for(var W=y.attributes;W.length;)y.removeAttributeNode(W[0]);l1(y)}var fv=new Map,Hw=new Set;function Mv(y){return typeof y.getRootNode=="function"?y.getRootNode():y.nodeType===9?y:y.ownerDocument}var Ly=gf.d;gf.d={f:Gw,r:Kw,D:Xw,C:TS,L:s_,m:AS,X:MS,S:CS,M:kS};function Gw(){var y=Ly.f(),W=Gb();return y||W}function Kw(y){var W=h1(y);W!==null&&W.tag===5&&W.type==="form"?s9(W):Ly.r(y)}var O8=typeof document>"u"?null:document;function Ww(y,W,ve){var Ge=O8;if(Ge&&typeof W=="string"&&W){var To=d6(W);To='link[rel="'+y+'"][href="'+To+'"]',typeof ve=="string"&&(To+='[crossorigin="'+ve+'"]'),Hw.has(To)||(Hw.add(To),y={rel:y,crossOrigin:ve,href:W},Ge.querySelector(To)===null&&(W=Ge.createElement("link"),x5(W,"link",y),$1(W),Ge.head.appendChild(W)))}}function Xw(y){Ly.D(y),Ww("dns-prefetch",y,null)}function TS(y,W){Ly.C(y,W),Ww("preconnect",y,W)}function s_(y,W,ve){Ly.L(y,W,ve);var Ge=O8;if(Ge&&y&&W){var To='link[rel="preload"][as="'+d6(W)+'"]';W==="image"&&ve&&ve.imageSrcSet?(To+='[imagesrcset="'+d6(ve.imageSrcSet)+'"]',typeof ve.imageSizes=="string"&&(To+='[imagesizes="'+d6(ve.imageSizes)+'"]')):To+='[href="'+d6(y)+'"]';var Mh=To;switch(W){case"style":Mh=N5(y);break;case"script":Mh=D5(y)}fv.has(Mh)||(y=Z({rel:"preload",href:W==="image"&&ve&&ve.imageSrcSet?void 0:y,as:W},ve),fv.set(Mh,y),Ge.querySelector(To)!==null||W==="style"&&Ge.querySelector(iy(Mh))||W==="script"&&Ge.querySelector(_9(Mh))||(W=Ge.createElement("link"),x5(W,"link",y),$1(W),Ge.head.appendChild(W)))}}function AS(y,W){Ly.m(y,W);var ve=O8;if(ve&&y){var Ge=W&&typeof W.as=="string"?W.as:"script",To='link[rel="modulepreload"][as="'+d6(Ge)+'"][href="'+d6(y)+'"]',Mh=To;switch(Ge){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Mh=D5(y)}if(!fv.has(Mh)&&(y=Z({rel:"modulepreload",href:y},W),fv.set(Mh,y),ve.querySelector(To)===null)){switch(Ge){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(ve.querySelector(_9(Mh)))return}Ge=ve.createElement("link"),x5(Ge,"link",y),$1(Ge),ve.head.appendChild(Ge)}}}function CS(y,W,ve){Ly.S(y,W,ve);var Ge=O8;if(Ge&&y){var To=q1(Ge).hoistableStyles,Mh=N5(y);W=W||"default";var f1=To.get(Mh);if(!f1){var S1={loading:0,preload:null};if(f1=Ge.querySelector(iy(Mh)))S1.loading=5;else{y=Z({rel:"stylesheet",href:y,"data-precedence":W},ve),(ve=fv.get(Mh))&&Ax(y,ve);var H1=f1=Ge.createElement("link");$1(H1),x5(H1,"link",y),H1._p=new Promise(function(y2,U2){H1.onload=y2,H1.onerror=U2}),H1.addEventListener("load",function(){S1.loading|=1}),H1.addEventListener("error",function(){S1.loading|=2}),S1.loading|=4,o_(f1,W,Ge)}f1={type:"stylesheet",instance:f1,count:1,state:S1},To.set(Mh,f1)}}}function MS(y,W){Ly.X(y,W);var ve=O8;if(ve&&y){var Ge=q1(ve).hoistableScripts,To=D5(y),Mh=Ge.get(To);Mh||(Mh=ve.querySelector(_9(To)),Mh||(y=Z({src:y,async:!0},W),(W=fv.get(To))&&Cx(y,W),Mh=ve.createElement("script"),$1(Mh),x5(Mh,"link",y),ve.head.appendChild(Mh)),Mh={type:"script",instance:Mh,count:1,state:null},Ge.set(To,Mh))}}function kS(y,W){Ly.M(y,W);var ve=O8;if(ve&&y){var Ge=q1(ve).hoistableScripts,To=D5(y),Mh=Ge.get(To);Mh||(Mh=ve.querySelector(_9(To)),Mh||(y=Z({src:y,async:!0,type:"module"},W),(W=fv.get(To))&&Cx(y,W),Mh=ve.createElement("script"),$1(Mh),x5(Mh,"link",y),ve.head.appendChild(Mh)),Mh={type:"script",instance:Mh,count:1,state:null},Ge.set(To,Mh))}}function Zw(y,W,ve,Ge){var To=(To=i2.current)?Mv(To):null;if(!To)throw Error(a(446));switch(y){case"meta":case"title":return null;case"style":return typeof ve.precedence=="string"&&typeof ve.href=="string"?(W=N5(ve.href),ve=q1(To).hoistableStyles,Ge=ve.get(W),Ge||(Ge={type:"style",instance:null,count:0,state:null},ve.set(W,Ge)),Ge):{type:"void",instance:null,count:0,state:null};case"link":if(ve.rel==="stylesheet"&&typeof ve.href=="string"&&typeof ve.precedence=="string"){y=N5(ve.href);var Mh=q1(To).hoistableStyles,f1=Mh.get(y);if(f1||(To=To.ownerDocument||To,f1={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Mh.set(y,f1),(Mh=To.querySelector(iy(y)))&&!Mh._p&&(f1.instance=Mh,f1.state.loading=5),fv.has(y)||(ve={rel:"preload",as:"style",href:ve.href,crossOrigin:ve.crossOrigin,integrity:ve.integrity,media:ve.media,hrefLang:ve.hrefLang,referrerPolicy:ve.referrerPolicy},fv.set(y,ve),Mh||Yw(To,y,ve,f1.state))),W&&Ge===null)throw Error(a(528,""));return f1}if(W&&Ge!==null)throw Error(a(529,""));return null;case"script":return W=ve.async,ve=ve.src,typeof ve=="string"&&W&&typeof W!="function"&&typeof W!="symbol"?(W=D5(ve),ve=q1(To).hoistableScripts,Ge=ve.get(W),Ge||(Ge={type:"script",instance:null,count:0,state:null},ve.set(W,Ge)),Ge):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,y))}}function N5(y){return'href="'+d6(y)+'"'}function iy(y){return'link[rel="stylesheet"]['+y+"]"}function z7(y){return Z({},y,{"data-precedence":y.precedence,precedence:null})}function Yw(y,W,ve,Ge){y.querySelector('link[rel="preload"][as="style"]['+W+"]")?Ge.loading=1:(W=y.createElement("link"),Ge.preload=W,W.addEventListener("load",function(){return Ge.loading|=1}),W.addEventListener("error",function(){return Ge.loading|=2}),x5(W,"link",ve),$1(W),y.head.appendChild(W))}function D5(y){return'[src="'+d6(y)+'"]'}function _9(y){return"script[async]"+y}function Qw(y,W,ve){if(W.count++,W.instance===null)switch(W.type){case"style":var Ge=y.querySelector('style[data-href~="'+d6(ve.href)+'"]');if(Ge)return W.instance=Ge,$1(Ge),Ge;var To=Z({},ve,{"data-href":ve.href,"data-precedence":ve.precedence,href:null,precedence:null});return Ge=(y.ownerDocument||y).createElement("style"),$1(Ge),x5(Ge,"style",To),o_(Ge,ve.precedence,y),W.instance=Ge;case"stylesheet":To=N5(ve.href);var Mh=y.querySelector(iy(To));if(Mh)return W.state.loading|=4,W.instance=Mh,$1(Mh),Mh;Ge=z7(ve),(To=fv.get(To))&&Ax(Ge,To),Mh=(y.ownerDocument||y).createElement("link"),$1(Mh);var f1=Mh;return f1._p=new Promise(function(S1,H1){f1.onload=S1,f1.onerror=H1}),x5(Mh,"link",Ge),W.state.loading|=4,o_(Mh,ve.precedence,y),W.instance=Mh;case"script":return Mh=D5(ve.src),(To=y.querySelector(_9(Mh)))?(W.instance=To,$1(To),To):(Ge=ve,(To=fv.get(Mh))&&(Ge=Z({},ve),Cx(Ge,To)),y=y.ownerDocument||y,To=y.createElement("script"),$1(To),x5(To,"link",Ge),y.head.appendChild(To),W.instance=To);case"void":return null;default:throw Error(a(443,W.type))}else W.type==="stylesheet"&&(W.state.loading&4)===0&&(Ge=W.instance,W.state.loading|=4,o_(Ge,ve.precedence,y));return W.instance}function o_(y,W,ve){for(var Ge=ve.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),To=Ge.length?Ge[Ge.length-1]:null,Mh=To,f1=0;f1<Ge.length;f1++){var S1=Ge[f1];if(S1.dataset.precedence===W)Mh=S1;else if(Mh!==To)break}Mh?Mh.parentNode.insertBefore(y,Mh.nextSibling):(W=ve.nodeType===9?ve.head:ve,W.insertBefore(y,W.firstChild))}function Ax(y,W){y.crossOrigin==null&&(y.crossOrigin=W.crossOrigin),y.referrerPolicy==null&&(y.referrerPolicy=W.referrerPolicy),y.title==null&&(y.title=W.title)}function Cx(y,W){y.crossOrigin==null&&(y.crossOrigin=W.crossOrigin),y.referrerPolicy==null&&(y.referrerPolicy=W.referrerPolicy),y.integrity==null&&(y.integrity=W.integrity)}var x9=null;function Mx(y,W,ve){if(x9===null){var Ge=new Map,To=x9=new Map;To.set(ve,Ge)}else To=x9,Ge=To.get(ve),Ge||(Ge=new Map,To.set(ve,Ge));if(Ge.has(y))return Ge;for(Ge.set(y,null),ve=ve.getElementsByTagName(y),To=0;To<ve.length;To++){var Mh=ve[To];if(!(Mh[a1]||Mh[b2]||y==="link"&&Mh.getAttribute("rel")==="stylesheet")&&Mh.namespaceURI!=="http://www.w3.org/2000/svg"){var f1=Mh.getAttribute(W)||"";f1=y+f1;var S1=Ge.get(f1);S1?S1.push(Mh):Ge.set(f1,[Mh])}}return Ge}function kx(y,W,ve){y=y.ownerDocument||y,y.head.insertBefore(ve,W==="title"?y.querySelector("head > title"):null)}function Jw(y,W,ve){if(ve===1||W.itemProp!=null)return!1;switch(y){case"meta":case"title":return!0;case"style":if(typeof W.precedence!="string"||typeof W.href!="string"||W.href==="")break;return!0;case"link":if(typeof W.rel!="string"||typeof W.href!="string"||W.href===""||W.onLoad||W.onError)break;switch(W.rel){case"stylesheet":return y=W.disabled,typeof W.precedence=="string"&&y==null;default:return!0}case"script":if(W.async&&typeof W.async!="function"&&typeof W.async!="symbol"&&!W.onLoad&&!W.onError&&W.src&&typeof W.src=="string")return!0}return!1}function Rx(y){return!(y.type==="stylesheet"&&(y.state.loading&3)===0)}var w9=null;function RS(){}function PS(y,W,ve){if(w9===null)throw Error(a(475));var Ge=w9;if(W.type==="stylesheet"&&(typeof ve.media!="string"||matchMedia(ve.media).matches!==!1)&&(W.state.loading&4)===0){if(W.instance===null){var To=N5(ve.href),Mh=y.querySelector(iy(To));if(Mh){y=Mh._p,y!==null&&typeof y=="object"&&typeof y.then=="function"&&(Ge.count++,Ge=o7.bind(Ge),y.then(Ge,Ge)),W.state.loading|=4,W.instance=Mh,$1(Mh);return}Mh=y.ownerDocument||y,ve=z7(ve),(To=fv.get(To))&&Ax(ve,To),Mh=Mh.createElement("link"),$1(Mh);var f1=Mh;f1._p=new Promise(function(S1,H1){f1.onload=S1,f1.onerror=H1}),x5(Mh,"link",ve),W.instance=Mh}Ge.stylesheets===null&&(Ge.stylesheets=new Map),Ge.stylesheets.set(W,y),(y=W.state.preload)&&(W.state.loading&3)===0&&(Ge.count++,W=o7.bind(Ge),y.addEventListener("load",W),y.addEventListener("error",W))}}function l_(){if(w9===null)throw Error(a(475));var y=w9;return y.stylesheets&&y.count===0&&Px(y,y.stylesheets),0<y.count?function(W){var ve=setTimeout(function(){if(y.stylesheets&&Px(y,y.stylesheets),y.unsuspend){var Ge=y.unsuspend;y.unsuspend=null,Ge()}},6e4);return y.unsuspend=W,function(){y.unsuspend=null,clearTimeout(ve)}}:null}function o7(){if(this.count--,this.count===0){if(this.stylesheets)Px(this,this.stylesheets);else if(this.unsuspend){var y=this.unsuspend;this.unsuspend=null,y()}}}var F8=null;function Px(y,W){y.stylesheets=null,y.unsuspend!==null&&(y.count++,F8=new Map,W.forEach(IS,y),F8=null,o7.call(y))}function IS(y,W){if(!(W.state.loading&4)){var ve=F8.get(y);if(ve)var Ge=ve.get(null);else{ve=new Map,F8.set(y,ve);for(var To=y.querySelectorAll("link[data-precedence],style[data-precedence]"),Mh=0;Mh<To.length;Mh++){var f1=To[Mh];(f1.nodeName==="LINK"||f1.getAttribute("media")!=="not all")&&(ve.set(f1.dataset.precedence,f1),Ge=f1)}Ge&&ve.set(null,Ge)}To=W.instance,f1=To.getAttribute("data-precedence"),Mh=ve.get(f1)||Ge,Mh===Ge&&ve.set(null,To),ve.set(f1,To),this.count++,Ge=o7.bind(this),To.addEventListener("load",Ge),To.addEventListener("error",Ge),Mh?Mh.parentNode.insertBefore(To,Mh.nextSibling):(y=y.nodeType===9?y.head:y,y.insertBefore(To,y.firstChild)),W.state.loading|=4}}var S9={$$typeof:Bs,Provider:null,Consumer:null,_currentValue:yh,_currentValue2:yh,_threadCount:0};function T6(y,W,ve,Ge,To,Mh,f1,S1){this.tag=1,this.containerInfo=y,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=h2(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h2(0),this.hiddenUpdates=h2(null),this.identifierPrefix=Ge,this.onUncaughtError=To,this.onCaughtError=Mh,this.onRecoverableError=f1,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S1,this.incompleteTransitions=new Map}function Ix(y,W,ve,Ge,To,Mh,f1,S1,H1,y2,U2,Q2){return y=new T6(y,W,ve,f1,S1,H1,y2,Q2),W=1,Mh===!0&&(W|=24),Mh=A5(3,null,null,W),y.current=Mh,Mh.stateNode=y,W=g_(),W.refCount++,y.pooledCache=W,W.refCount++,Mh.memoizedState={element:Ge,isDehydrated:ve,cache:W},x_(Mh),y}function eS(y){return y?(y=H5,y):H5}function l7(y,W,ve,Ge,To,Mh){To=eS(To),Ge.context===null?Ge.context=To:Ge.pendingContext=To,Ge=py(W),Ge.payload={element:ve},Mh=Mh===void 0?null:Mh,Mh!==null&&(Ge.callback=Mh),ve=Hy(y,Ge,W),ve!==null&&(o6(ve,y,W),a8(ve,y,W))}function tS(y,W){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var ve=y.retryLane;y.retryLane=ve!==0&&ve<W?ve:W}}function Nx(y,W){tS(y,W),(y=y.alternate)&&tS(y,W)}function rS(y){if(y.tag===13){var W=oy(y,67108864);W!==null&&o6(W,y,67108864),Nx(y,67108864)}}var u_=!0;function Dx(y,W,ve,Ge){var To=wh.T;wh.T=null;var Mh=gf.p;try{gf.p=2,c_(y,W,ve,Ge)}finally{gf.p=Mh,wh.T=To}}function u7(y,W,ve,Ge){var To=wh.T;wh.T=null;var Mh=gf.p;try{gf.p=8,c_(y,W,ve,Ge)}finally{gf.p=Mh,wh.T=To}}function c_(y,W,ve,Ge){if(u_){var To=V8(Ge);if(To===null)vx(y,W,Ge,h_,ve),kv(y,Ge);else if(f7(To,y,W,ve,Ge))Ge.stopPropagation();else if(kv(y,Ge),W&4&&-1<Hv.indexOf(y)){for(;To!==null;){var Mh=h1(To);if(Mh!==null)switch(Mh.tag){case 3:if(Mh=Mh.stateNode,Mh.current.memoizedState.isDehydrated){var f1=A2(Mh.pendingLanes);if(f1!==0){var S1=Mh;for(S1.pendingLanes|=2,S1.entangledLanes|=2;f1;){var H1=1<<31-B1(f1);S1.entanglements[1]|=H1,f1&=~H1}hv(Mh),(B3&6)===0&&(L7=E1()+500,k8(0))}}break;case 13:S1=oy(Mh,2),S1!==null&&o6(S1,Mh,2),Gb(),Nx(Mh,2)}if(Mh=V8(Ge),Mh===null&&vx(y,W,Ge,h_,ve),Mh===To)break;To=Mh}To!==null&&Ge.stopPropagation()}else vx(y,W,Ge,null,ve)}}function V8(y){return y=i4(y),Lx(y)}var h_=null;function Lx(y){if(h_=null,y=w1(y),y!==null){var W=u(y);if(W===null)y=null;else{var ve=W.tag;if(ve===13){if(y=d(W),y!==null)return y;y=null}else if(ve===3){if(W.stateNode.current.memoizedState.isDehydrated)return W.tag===3?W.stateNode.containerInfo:null;y=null}else W!==y&&(y=null)}}return h_=y,null}function iS(y){switch(y){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(F1()){case K1:return 2;case N1:return 8;case J1:case E2:return 32;case n2:return 268435456;default:return 32}default:return 32}}var Ox=!1,c7=null,jv=null,h7=null,E9=new Map,T9=new Map,Oy=[],Hv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kv(y,W){switch(y){case"focusin":case"focusout":c7=null;break;case"dragenter":case"dragleave":jv=null;break;case"mouseover":case"mouseout":h7=null;break;case"pointerover":case"pointerout":E9.delete(W.pointerId);break;case"gotpointercapture":case"lostpointercapture":T9.delete(W.pointerId)}}function A9(y,W,ve,Ge,To,Mh){return y===null||y.nativeEvent!==Mh?(y={blockedOn:W,domEventName:ve,eventSystemFlags:Ge,nativeEvent:Mh,targetContainers:[To]},W!==null&&(W=h1(W),W!==null&&rS(W)),y):(y.eventSystemFlags|=Ge,W=y.targetContainers,To!==null&&W.indexOf(To)===-1&&W.push(To),y)}function f7(y,W,ve,Ge,To){switch(W){case"focusin":return c7=A9(c7,y,W,ve,Ge,To),!0;case"dragenter":return jv=A9(jv,y,W,ve,Ge,To),!0;case"mouseover":return h7=A9(h7,y,W,ve,Ge,To),!0;case"pointerover":var Mh=To.pointerId;return E9.set(Mh,A9(E9.get(Mh)||null,y,W,ve,Ge,To)),!0;case"gotpointercapture":return Mh=To.pointerId,T9.set(Mh,A9(T9.get(Mh)||null,y,W,ve,Ge,To)),!0}return!1}function U7(y){var W=w1(y.target);if(W!==null){var ve=u(W);if(ve!==null){if(W=ve.tag,W===13){if(W=d(ve),W!==null){y.blockedOn=W,z1(y.priority,function(){if(ve.tag===13){var Ge=U6();Ge=P4(Ge);var To=oy(ve,Ge);To!==null&&o6(To,ve,Ge),Nx(ve,Ge)}});return}}else if(W===3&&ve.stateNode.current.memoizedState.isDehydrated){y.blockedOn=ve.tag===3?ve.stateNode.containerInfo:null;return}}}y.blockedOn=null}function Fy(y){if(y.blockedOn!==null)return!1;for(var W=y.targetContainers;0<W.length;){var ve=V8(y.nativeEvent);if(ve===null){ve=y.nativeEvent;var Ge=new ve.constructor(ve.type,ve);z2=Ge,ve.target.dispatchEvent(Ge),z2=null}else return W=h1(ve),W!==null&&rS(W),y.blockedOn=ve,!1;W.shift()}return!0}function C9(y,W,ve){Fy(y)&&ve.delete(W)}function NS(){Ox=!1,c7!==null&&Fy(c7)&&(c7=null),jv!==null&&Fy(jv)&&(jv=null),h7!==null&&Fy(h7)&&(h7=null),E9.forEach(C9),T9.forEach(C9)}function $5(y,W){y.blockedOn===W&&(y.blockedOn=null,Ox||(Ox=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,NS)))}var z5=null;function M9(y){z5!==y&&(z5=y,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){z5===y&&(z5=null);for(var W=0;W<y.length;W+=3){var ve=y[W],Ge=y[W+1],To=y[W+2];if(typeof Ge!="function"){if(Lx(Ge||ve)===null)continue;break}var Mh=h1(ve);Mh!==null&&(y.splice(W,3),W-=3,D6(Mh,{pending:!0,data:To,method:ve.method,action:Ge},Ge,To))}}))}function k9(y){function W(H1){return $5(H1,y)}c7!==null&&$5(c7,y),jv!==null&&$5(jv,y),h7!==null&&$5(h7,y),E9.forEach(W),T9.forEach(W);for(var ve=0;ve<Oy.length;ve++){var Ge=Oy[ve];Ge.blockedOn===y&&(Ge.blockedOn=null)}for(;0<Oy.length&&(ve=Oy[0],ve.blockedOn===null);)U7(ve),ve.blockedOn===null&&Oy.shift();if(ve=(y.ownerDocument||y).$$reactFormReplay,ve!=null)for(Ge=0;Ge<ve.length;Ge+=3){var To=ve[Ge],Mh=ve[Ge+1],f1=To[P2]||null;if(typeof Mh=="function")f1||M9(ve);else if(f1){var S1=null;if(Mh&&Mh.hasAttribute("formAction")){if(To=Mh,f1=Mh[P2]||null)S1=f1.formAction;else if(Lx(To)!==null)continue}else S1=f1.action;typeof S1=="function"?ve[Ge+1]=S1:(ve.splice(Ge,3),Ge-=3),M9(ve)}}}function R9(y){this._internalRoot=y}B8.prototype.render=R9.prototype.render=function(y){var W=this._internalRoot;if(W===null)throw Error(a(409));var ve=W.current,Ge=U6();l7(ve,Ge,y,W,null,null)},B8.prototype.unmount=R9.prototype.unmount=function(){var y=this._internalRoot;if(y!==null){this._internalRoot=null;var W=y.containerInfo;l7(y.current,2,null,y,null,null),Gb(),W[c2]=null}};function B8(y){this._internalRoot=y}B8.prototype.unstable_scheduleHydration=function(y){if(y){var W=P1();y={blockedOn:null,target:y,priority:W};for(var ve=0;ve<Oy.length&&W!==0&&W<Oy[ve].priority;ve++);Oy.splice(ve,0,y),ve===0&&U7(y)}};var Fx=e.version;if(Fx!=="19.1.1")throw Error(a(527,Fx,"19.1.1"));gf.findDOMNode=function(y){var W=y._reactInternals;if(W===void 0)throw typeof y.render=="function"?Error(a(188)):(y=Object.keys(y).join(","),Error(a(268,y)));return y=E(W),y=y!==null?P(y):null,y=y===null?null:y.stateNode,y};var DS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:wh,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var P9=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!P9.isDisabled&&P9.supportsFiber)try{g1=P9.inject(DS),u1=P9}catch{}}return reactDomClient_production.createRoot=function(y,W){if(!l(y))throw Error(a(299));var ve=!1,Ge="",To=l9,Mh=Jv,f1=m8,S1=null;return W!=null&&(W.unstable_strictMode===!0&&(ve=!0),W.identifierPrefix!==void 0&&(Ge=W.identifierPrefix),W.onUncaughtError!==void 0&&(To=W.onUncaughtError),W.onCaughtError!==void 0&&(Mh=W.onCaughtError),W.onRecoverableError!==void 0&&(f1=W.onRecoverableError),W.unstable_transitionCallbacks!==void 0&&(S1=W.unstable_transitionCallbacks)),W=Ix(y,1,!1,null,null,ve,Ge,To,Mh,f1,S1,null),y[c2]=W.current,y9(y),new R9(W)},reactDomClient_production.hydrateRoot=function(y,W,ve){if(!l(y))throw Error(a(299));var Ge=!1,To="",Mh=l9,f1=Jv,S1=m8,H1=null,y2=null;return ve!=null&&(ve.unstable_strictMode===!0&&(Ge=!0),ve.identifierPrefix!==void 0&&(To=ve.identifierPrefix),ve.onUncaughtError!==void 0&&(Mh=ve.onUncaughtError),ve.onCaughtError!==void 0&&(f1=ve.onCaughtError),ve.onRecoverableError!==void 0&&(S1=ve.onRecoverableError),ve.unstable_transitionCallbacks!==void 0&&(H1=ve.unstable_transitionCallbacks),ve.formState!==void 0&&(y2=ve.formState)),W=Ix(y,1,!0,W,ve??null,Ge,To,Mh,f1,S1,H1,y2),W.context=eS(null),ve=W.current,Ge=U6(),Ge=P4(Ge),To=py(Ge),To.callback=null,Hy(ve,To,Ge),ve=Ge,W.current.lanes=ve,k2(W,ve),hv(W),y[c2]=W.current,y9(y),new B8(W)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const UserContext=reactExports.createContext({user:{uid:"",username:"",email:"",picture:"",friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,questionStreak:0,savedQuestions:[],decks:[]},setUser:()=>{}}),OptionsContext=reactExports.createContext({options:{theme:"light"},setOptions:()=>{}});/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var __typeError=t=>{throw TypeError(t)},__accessCheck=(t,e,r)=>e.has(t)||__typeError("Cannot "+r),__privateGet=(t,e,r)=>(__accessCheck(t,e,"read from private field"),r?r.call(t):e.get(t)),__privateAdd=(t,e,r)=>e.has(t)?__typeError("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),PopStateEventType="popstate";function createBrowserHistory(t={}){function e(a,l){let{pathname:u,search:d,hash:g}=a.location;return createLocation("",{pathname:u,search:d,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(a,l){return typeof l=="string"?l:createPath(l)}return getUrlBasedHistory(e,r,null,t)}function invariant$1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,r=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:r,key:e&&e.key||a||createKey()}}function createPath({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function parsePath(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,r,a={}){let{window:l=document.defaultView,v5Compat:u=!1}=a,d=l.history,g="POP",E=null,P=Z();P==null&&(P=0,d.replaceState({...d.state,idx:P},""));function Z(){return(d.state||{idx:null}).idx}function me(){g="POP";let Do=Z(),sr=Do==null?null:Do-P;P=Do,E&&E({action:g,location:wt.location,delta:sr})}function _e(Do,sr){g="PUSH";let Ko=createLocation(wt.location,Do,sr);P=Z()+1;let Bs=getHistoryState(Ko,P),th=wt.createHref(Ko);try{d.pushState(Bs,"",th)}catch(pf){if(pf instanceof DOMException&&pf.name==="DataCloneError")throw pf;l.location.assign(th)}u&&E&&E({action:g,location:wt.location,delta:1})}function He(Do,sr){g="REPLACE";let Ko=createLocation(wt.location,Do,sr);P=Z();let Bs=getHistoryState(Ko,P),th=wt.createHref(Ko);d.replaceState(Bs,"",th),u&&E&&E({action:g,location:wt.location,delta:0})}function Xe(Do){return createBrowserURLImpl(Do)}let wt={get action(){return g},get location(){return t(l,d)},listen(Do){if(E)throw new Error("A history only accepts one active listener");return l.addEventListener(PopStateEventType,me),E=Do,()=>{l.removeEventListener(PopStateEventType,me),E=null}},createHref(Do){return e(l,Do)},createURL:Xe,encodeLocation(Do){let sr=Xe(Do);return{pathname:sr.pathname,search:sr.search,hash:sr.hash}},push:_e,replace:He,go(Do){return d.go(Do)}};return wt}function createBrowserURLImpl(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(r,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:createPath(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=r+a),new URL(a,r)}var _map,unstable_RouterContextProvider=class{constructor(t){if(__privateAdd(this,_map,new Map),t)for(let[e,r]of t)this.set(e,r)}get(t){if(__privateGet(this,_map).has(t))return __privateGet(this,_map).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){__privateGet(this,_map).set(t,e)}};_map=new WeakMap;var unsupportedLazyRouteObjectKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isUnsupportedLazyRouteObjectKey(t){return unsupportedLazyRouteObjectKeys.has(t)}var unsupportedLazyRouteFunctionKeys=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function isUnsupportedLazyRouteFunctionKey(t){return unsupportedLazyRouteFunctionKeys.has(t)}function isIndexRoute(t){return t.index===!0}function convertRoutesToDataRoutes(t,e,r=[],a={},l=!1){return t.map((u,d)=>{let g=[...r,String(d)],E=typeof u.id=="string"?u.id:g.join("-");if(invariant$1(u.index!==!0||!u.children,"Cannot specify children on an index route"),invariant$1(l||!a[E],`Found a route id collision on id "${E}".  Route id's must be globally unique within Data Router usages`),isIndexRoute(u)){let P={...u,...e(u),id:E};return a[E]=P,P}else{let P={...u,...e(u),id:E,children:void 0};return a[E]=P,u.children&&(P.children=convertRoutesToDataRoutes(u.children,e,g,a,l)),P}})}function matchRoutes(t,e,r="/"){return matchRoutesImpl(t,e,r,!1)}function matchRoutesImpl(t,e,r,a){let l=typeof e=="string"?parsePath(e):e,u=stripBasename(l.pathname||"/",r);if(u==null)return null;let d=flattenRoutes(t);rankRouteBranches(d);let g=null;for(let E=0;g==null&&E<d.length;++E){let P=decodePath(u);g=matchRouteBranch(d[E],P,a)}return g}function convertRouteMatchToUiMatch(t,e){let{route:r,pathname:a,params:l}=t;return{id:r.id,pathname:a,params:l,data:e[r.id],handle:r.handle}}function flattenRoutes(t,e=[],r=[],a=""){let l=(u,d,g)=>{let E={relativePath:g===void 0?u.path||"":g,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};E.relativePath.startsWith("/")&&(invariant$1(E.relativePath.startsWith(a),`Absolute route path "${E.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(a.length));let P=joinPaths([a,E.relativePath]),Z=r.concat(E);u.children&&u.children.length>0&&(invariant$1(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${P}".`),flattenRoutes(u.children,e,Z,P)),!(u.path==null&&!u.index)&&e.push({path:P,score:computeScore(P,u.index),routesMeta:Z})};return t.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))l(u,d);else for(let g of explodeOptionalSegments(u.path))l(u,d,g)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[r,...a]=e,l=r.endsWith("?"),u=r.replace(/\?$/,"");if(a.length===0)return l?[u,""]:[u];let d=explodeOptionalSegments(a.join("/")),g=[];return g.push(...d.map(E=>E===""?u:[u,E].join("/"))),l&&g.push(...d),g.map(E=>t.startsWith("/")&&E===""?"/":E)}function rankRouteBranches(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:compareIndexes(e.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let r=t.split("/"),a=r.length;return r.some(isSplat)&&(a+=splatPenalty),e&&(a+=indexRouteValue),r.filter(l=>!isSplat(l)).reduce((l,u)=>l+(paramRe.test(u)?dynamicSegmentValue:u===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((a,l)=>a===e[l])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,r=!1){let{routesMeta:a}=t,l={},u="/",d=[];for(let g=0;g<a.length;++g){let E=a[g],P=g===a.length-1,Z=u==="/"?e:e.slice(u.length)||"/",me=matchPath({path:E.relativePath,caseSensitive:E.caseSensitive,end:P},Z),_e=E.route;if(!me&&P&&r&&!a[a.length-1].route.index&&(me=matchPath({path:E.relativePath,caseSensitive:E.caseSensitive,end:!1},Z)),!me)return null;Object.assign(l,me.params),d.push({params:l,pathname:joinPaths([u,me.pathname]),pathnameBase:normalizePathname(joinPaths([u,me.pathnameBase])),route:_e}),me.pathnameBase!=="/"&&(u=joinPaths([u,me.pathnameBase]))}return d}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=compilePath(t.path,t.caseSensitive,t.end),l=e.match(r);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),g=l.slice(1);return{params:a.reduce((P,{paramName:Z,isOptional:me},_e)=>{if(Z==="*"){let Xe=g[_e]||"";d=u.slice(0,u.length-Xe.length).replace(/(.)\/+$/,"$1")}const He=g[_e];return me&&!He?P[Z]=void 0:P[Z]=(He||"").replace(/%2F/g,"/"),P},{}),pathname:u,pathnameBase:d,pattern:t}}function compilePath(t,e=!1,r=!0){warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,E)=>(a.push({paramName:g,isOptional:E!=null}),E?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),a]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}function prependBasename({basename:t,pathname:e}){return e==="/"?t:joinPaths([t,e])}function resolvePath(t,e="/"){let{pathname:r,search:a="",hash:l=""}=typeof t=="string"?parsePath(t):t;return{pathname:r?r.startsWith("/")?r:resolvePathname(r,e):e,search:normalizeSearch(a),hash:normalizeHash(l)}}function resolvePathname(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function getInvalidPathError(t,e,r,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t){let e=getPathContributingMatches(t);return e.map((r,a)=>a===e.length-1?r.pathname:r.pathnameBase)}function resolveTo(t,e,r,a=!1){let l;typeof t=="string"?l=parsePath(t):(l={...t},invariant$1(!l.pathname||!l.pathname.includes("?"),getInvalidPathError("?","pathname","search",l)),invariant$1(!l.pathname||!l.pathname.includes("#"),getInvalidPathError("#","pathname","hash",l)),invariant$1(!l.search||!l.search.includes("#"),getInvalidPathError("#","search","hash",l)));let u=t===""||l.pathname==="",d=u?"/":l.pathname,g;if(d==null)g=r;else{let me=e.length-1;if(!a&&d.startsWith("..")){let _e=d.split("/");for(;_e[0]==="..";)_e.shift(),me-=1;l.pathname=_e.join("/")}g=me>=0?e[me]:"/"}let E=resolvePath(l,g),P=d&&d!=="/"&&d.endsWith("/"),Z=(u||d===".")&&r.endsWith("/");return!E.pathname.endsWith("/")&&(P||Z)&&(E.pathname+="/"),E}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,ErrorResponseImpl=class{constructor(t,e,r,a=!1){this.status=t,this.statusText=e||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["GET",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=t=>ABSOLUTE_URL_REGEX.test(t),defaultMapRouteProperties=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions",ResetLoaderDataSymbol=Symbol("ResetLoaderData");function createRouter(t){const e=t.window?t.window:typeof window<"u"?window:void 0,r=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";invariant$1(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=t.hydrationRouteProperties||[],l=t.mapRouteProperties||defaultMapRouteProperties,u={},d=convertRoutesToDataRoutes(t.routes,l,void 0,u),g,E=t.basename||"/",P=t.dataStrategy||defaultDataStrategyWithMiddleware,Z={unstable_middleware:!1,...t.future},me=null,_e=new Set,He=null,Xe=null,wt=null,Do=t.hydrationData!=null,sr=matchRoutes(d,t.history.location,E),Ko=!1,Bs=null,th;if(sr==null&&!t.patchRoutesOnNavigation){let P1=getInternalRouterError(404,{pathname:t.history.location.pathname}),{matches:z1,route:e2}=getShortCircuitMatches(d);th=!0,sr=z1,Bs={[e2.id]:P1}}else if(sr&&!t.hydrationData&&n4(sr,d,t.history.location.pathname).active&&(sr=null),sr)if(sr.some(P1=>P1.route.lazy))th=!1;else if(!sr.some(P1=>P1.route.loader))th=!0;else{let P1=t.hydrationData?t.hydrationData.loaderData:null,z1=t.hydrationData?t.hydrationData.errors:null;if(z1){let e2=sr.findIndex(b2=>z1[b2.route.id]!==void 0);th=sr.slice(0,e2+1).every(b2=>!shouldLoadRouteOnHydration(b2.route,P1,z1))}else th=sr.every(e2=>!shouldLoadRouteOnHydration(e2.route,P1,z1))}else{th=!1,sr=[];let P1=n4(null,d,t.history.location.pathname);P1.active&&P1.matches&&(Ko=!0,sr=P1.matches)}let pf,_h={historyAction:t.history.action,location:t.history.location,matches:sr,initialized:th,navigation:IDLE_NAVIGATION,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||Bs,fetchers:new Map,blockers:new Map},cf="POP",df=!1,uf,li=!1,Vc=new Map,Rs=null,qc=!1,Qp=!1,n1=new Set,wh=new Map,gf=0,yh=-1,ff=new Map,e1=new Set,s1=new Map,b1=new Map,_1=new Set,V1=new Map,I1,i2=null;function R2(){if(me=t.history.listen(({action:P1,location:z1,delta:e2})=>{if(I1){I1(),I1=void 0;return}warning(V1.size===0||e2!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let b2=u2({currentLocation:_h.location,nextLocation:z1,historyAction:P1});if(b2&&e2!=null){let P2=new Promise(c2=>{I1=c2});t.history.go(e2*-1),x2(b2,{state:"blocked",location:z1,proceed(){x2(b2,{state:"proceeding",proceed:void 0,reset:void 0,location:z1}),P2.then(()=>t.history.go(e2))},reset(){let c2=new Map(_h.blockers);c2.set(b2,IDLE_BLOCKER),W2({blockers:c2})}});return}return B2(P1,z1)}),r){restoreAppliedTransitions(e,Vc);let P1=()=>persistAppliedTransitions(e,Vc);e.addEventListener("pagehide",P1),Rs=()=>e.removeEventListener("pagehide",P1)}return _h.initialized||B2("POP",_h.location,{initialHydration:!0}),pf}function F2(){me&&me(),Rs&&Rs(),_e.clear(),uf&&uf.abort(),_h.fetchers.forEach((P1,z1)=>B1(z1)),_h.blockers.forEach((P1,z1)=>l2(z1))}function X1(P1){return _e.add(P1),()=>_e.delete(P1)}function W2(P1,z1={}){P1.matches&&(P1.matches=P1.matches.map(P2=>{let c2=u[P2.route.id],$2=P2.route;return $2.element!==c2.element||$2.errorElement!==c2.errorElement||$2.hydrateFallbackElement!==c2.hydrateFallbackElement?{...P2,route:c2}:P2})),_h={..._h,...P1};let e2=[],b2=[];_h.fetchers.forEach((P2,c2)=>{P2.state==="idle"&&(_1.has(c2)?e2.push(c2):b2.push(c2))}),_1.forEach(P2=>{!_h.fetchers.has(P2)&&!wh.has(P2)&&e2.push(P2)}),[..._e].forEach(P2=>P2(_h,{deletedFetchers:e2,viewTransitionOpts:z1.viewTransitionOpts,flushSync:z1.flushSync===!0})),e2.forEach(P2=>B1(P2)),b2.forEach(P2=>_h.fetchers.delete(P2))}function N2(P1,z1,{flushSync:e2}={}){let b2=_h.actionData!=null&&_h.navigation.formMethod!=null&&isMutationMethod(_h.navigation.formMethod)&&_h.navigation.state==="loading"&&P1.state?._isRedirect!==!0,P2;z1.actionData?Object.keys(z1.actionData).length>0?P2=z1.actionData:P2=null:b2?P2=_h.actionData:P2=null;let c2=z1.loaderData?mergeLoaderData(_h.loaderData,z1.loaderData,z1.matches||[],z1.errors):_h.loaderData,$2=_h.blockers;$2.size>0&&($2=new Map($2),$2.forEach((a1,l1)=>$2.set(l1,IDLE_BLOCKER)));let Z2=qc?!1:a4(P1,z1.matches||_h.matches),Ym=df===!0||_h.navigation.formMethod!=null&&isMutationMethod(_h.navigation.formMethod)&&P1.state?._isRedirect!==!0;g&&(d=g,g=void 0),qc||cf==="POP"||(cf==="PUSH"?t.history.push(P1,P1.state):cf==="REPLACE"&&t.history.replace(P1,P1.state));let o1;if(cf==="POP"){let a1=Vc.get(_h.location.pathname);a1&&a1.has(P1.pathname)?o1={currentLocation:_h.location,nextLocation:P1}:Vc.has(P1.pathname)&&(o1={currentLocation:P1,nextLocation:_h.location})}else if(li){let a1=Vc.get(_h.location.pathname);a1?a1.add(P1.pathname):(a1=new Set([P1.pathname]),Vc.set(_h.location.pathname,a1)),o1={currentLocation:_h.location,nextLocation:P1}}W2({...z1,actionData:P2,loaderData:c2,historyAction:cf,location:P1,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Z2,preventScrollReset:Ym,blockers:$2},{viewTransitionOpts:o1,flushSync:e2===!0}),cf="POP",df=!1,li=!1,qc=!1,Qp=!1,i2?.resolve(),i2=null}async function V2(P1,z1){if(typeof P1=="number"){t.history.go(P1);return}let e2=normalizeTo(_h.location,_h.matches,E,P1,z1?.fromRouteId,z1?.relative),{path:b2,submission:P2,error:c2}=normalizeNavigateOptions(!1,e2,z1),$2=_h.location,Z2=createLocation(_h.location,b2,z1&&z1.state);Z2={...Z2,...t.history.encodeLocation(Z2)};let Ym=z1&&z1.replace!=null?z1.replace:void 0,o1="PUSH";Ym===!0?o1="REPLACE":Ym===!1||P2!=null&&isMutationMethod(P2.formMethod)&&P2.formAction===_h.location.pathname+_h.location.search&&(o1="REPLACE");let a1=z1&&"preventScrollReset"in z1?z1.preventScrollReset===!0:void 0,l1=(z1&&z1.flushSync)===!0,w1=u2({currentLocation:$2,nextLocation:Z2,historyAction:o1});if(w1){x2(w1,{state:"blocked",location:Z2,proceed(){x2(w1,{state:"proceeding",proceed:void 0,reset:void 0,location:Z2}),V2(P1,z1)},reset(){let h1=new Map(_h.blockers);h1.set(w1,IDLE_BLOCKER),W2({blockers:h1})}});return}await B2(o1,Z2,{submission:P2,pendingError:c2,preventScrollReset:a1,replace:z1&&z1.replace,enableViewTransition:z1&&z1.viewTransition,flushSync:l1})}function q2(){i2||(i2=createDeferred()),i1(),W2({revalidation:"loading"});let P1=i2.promise;return _h.navigation.state==="submitting"?P1:_h.navigation.state==="idle"?(B2(_h.historyAction,_h.location,{startUninterruptedRevalidation:!0}),P1):(B2(cf||_h.historyAction,_h.navigation.location,{overrideNavigation:_h.navigation,enableViewTransition:li===!0}),P1)}async function B2(P1,z1,e2){uf&&uf.abort(),uf=null,cf=P1,qc=(e2&&e2.startUninterruptedRevalidation)===!0,k2(_h.location,_h.matches),df=(e2&&e2.preventScrollReset)===!0,li=(e2&&e2.enableViewTransition)===!0;let b2=g||d,P2=e2&&e2.overrideNavigation,c2=e2?.initialHydration&&_h.matches&&_h.matches.length>0&&!Ko?_h.matches:matchRoutes(b2,z1,E),$2=(e2&&e2.flushSync)===!0;if(c2&&_h.initialized&&!Qp&&isHashChangeOnly(_h.location,z1)&&!(e2&&e2.submission&&isMutationMethod(e2.submission.formMethod))){N2(z1,{matches:c2},{flushSync:$2});return}let Z2=n4(c2,b2,z1.pathname);if(Z2.active&&Z2.matches&&(c2=Z2.matches),!c2){let{error:q1,notFoundMatches:$1,route:W1}=s2(z1.pathname);N2(z1,{matches:$1,loaderData:{},errors:{[W1.id]:q1}},{flushSync:$2});return}uf=new AbortController;let Ym=createClientSideRequest(t.history,z1,uf.signal,e2&&e2.submission),o1=new unstable_RouterContextProvider(t.unstable_getContext?await t.unstable_getContext():void 0),a1;if(e2&&e2.pendingError)a1=[findNearestBoundary(c2).route.id,{type:"error",error:e2.pendingError}];else if(e2&&e2.submission&&isMutationMethod(e2.submission.formMethod)){let q1=await K2(Ym,z1,e2.submission,c2,o1,Z2.active,e2&&e2.initialHydration===!0,{replace:e2.replace,flushSync:$2});if(q1.shortCircuited)return;if(q1.pendingActionResult){let[$1,W1]=q1.pendingActionResult;if(isErrorResult(W1)&&isRouteErrorResponse(W1.error)&&W1.error.status===404){uf=null,N2(z1,{matches:q1.matches,loaderData:{},errors:{[$1]:W1.error}});return}}c2=q1.matches||c2,a1=q1.pendingActionResult,P2=getLoadingNavigation(z1,e2.submission),$2=!1,Z2.active=!1,Ym=createClientSideRequest(t.history,Ym.url,Ym.signal)}let{shortCircuited:l1,matches:w1,loaderData:h1,errors:C1}=await S2(Ym,z1,c2,o1,Z2.active,P2,e2&&e2.submission,e2&&e2.fetcherSubmission,e2&&e2.replace,e2&&e2.initialHydration===!0,$2,a1);l1||(uf=null,N2(z1,{matches:w1||c2,...getActionDataForCommit(a1),loaderData:h1,errors:C1}))}async function K2(P1,z1,e2,b2,P2,c2,$2,Z2={}){i1();let Ym=getSubmittingNavigation(z1,e2);if(W2({navigation:Ym},{flushSync:Z2.flushSync===!0}),c2){let l1=await o4(b2,z1.pathname,P1.signal);if(l1.type==="aborted")return{shortCircuited:!0};if(l1.type==="error"){let w1=findNearestBoundary(l1.partialMatches).route.id;return{matches:l1.partialMatches,pendingActionResult:[w1,{type:"error",error:l1.error}]}}else if(l1.matches)b2=l1.matches;else{let{notFoundMatches:w1,error:h1,route:C1}=s2(z1.pathname);return{matches:w1,pendingActionResult:[C1.id,{type:"error",error:h1}]}}}let o1,a1=getTargetMatch(b2,z1);if(!a1.route.action&&!a1.route.lazy)o1={type:"error",error:getInternalRouterError(405,{method:P1.method,pathname:z1.pathname,routeId:a1.route.id})};else{let l1=getTargetedDataStrategyMatches(l,u,P1,b2,a1,$2?[]:a,P2),w1=await n2(P1,l1,P2,null);if(o1=w1[a1.route.id],!o1){for(let h1 of b2)if(w1[h1.route.id]){o1=w1[h1.route.id];break}}if(P1.signal.aborted)return{shortCircuited:!0}}if(isRedirectResult(o1)){let l1;return Z2&&Z2.replace!=null?l1=Z2.replace:l1=normalizeRedirectLocation(o1.response.headers.get("Location"),new URL(P1.url),E)===_h.location.pathname+_h.location.search,await E2(P1,o1,!0,{submission:e2,replace:l1}),{shortCircuited:!0}}if(isErrorResult(o1)){let l1=findNearestBoundary(b2,a1.route.id);return(Z2&&Z2.replace)!==!0&&(cf="PUSH"),{matches:b2,pendingActionResult:[l1.route.id,o1,a1.route.id]}}return{matches:b2,pendingActionResult:[a1.route.id,o1]}}async function S2(P1,z1,e2,b2,P2,c2,$2,Z2,Ym,o1,a1,l1){let w1=c2||getLoadingNavigation(z1,$2),h1=$2||Z2||getSubmissionFromNavigation(w1),C1=!qc&&!o1;if(P2){if(C1){let r4=E1(l1);W2({navigation:w1,...r4!==void 0?{actionData:r4}:{}},{flushSync:a1})}let y4=await o4(e2,z1.pathname,P1.signal);if(y4.type==="aborted")return{shortCircuited:!0};if(y4.type==="error"){let r4=findNearestBoundary(y4.partialMatches).route.id;return{matches:y4.partialMatches,loaderData:{},errors:{[r4]:y4.error}}}else if(y4.matches)e2=y4.matches;else{let{error:r4,notFoundMatches:z4,route:e4}=s2(z1.pathname);return{matches:z4,loaderData:{},errors:{[e4.id]:r4}}}}let q1=g||d,{dsMatches:$1,revalidatingFetchers:W1}=getMatchesToLoad(P1,b2,l,u,t.history,_h,e2,h1,z1,o1?[]:a,o1===!0,Qp,n1,_1,s1,e1,q1,E,t.patchRoutesOnNavigation!=null,l1);if(yh=++gf,!t.dataStrategy&&!$1.some(y4=>y4.shouldLoad)&&W1.length===0){let y4=a2();return N2(z1,{matches:e2,loaderData:{},errors:l1&&isErrorResult(l1[1])?{[l1[0]]:l1[1].error}:null,...getActionDataForCommit(l1),...y4?{fetchers:new Map(_h.fetchers)}:{}},{flushSync:a1}),{shortCircuited:!0}}if(C1){let y4={};if(!P2){y4.navigation=w1;let r4=E1(l1);r4!==void 0&&(y4.actionData=r4)}W1.length>0&&(y4.fetchers=F1(W1)),W2(y4,{flushSync:a1})}W1.forEach(y4=>{Z1(y4.key),y4.controller&&wh.set(y4.key,y4.controller)});let Y1=()=>W1.forEach(y4=>Z1(y4.key));uf&&uf.signal.addEventListener("abort",Y1);let{loaderResults:_2,fetcherResults:O2}=await D1($1,W1,P1,b2);if(P1.signal.aborted)return{shortCircuited:!0};uf&&uf.signal.removeEventListener("abort",Y1),W1.forEach(y4=>wh.delete(y4.key));let u4=findRedirect(_2);if(u4)return await E2(P1,u4.result,!0,{replace:Ym}),{shortCircuited:!0};if(u4=findRedirect(O2),u4)return e1.add(u4.key),await E2(P1,u4.result,!0,{replace:Ym}),{shortCircuited:!0};let{loaderData:p4,errors:l4}=processLoaderData(_h,e2,_2,l1,W1,O2);o1&&_h.errors&&(l4={..._h.errors,...l4});let A4=a2(),h3=v2(yh),s3=A4||h3||W1.length>0;return{matches:e2,loaderData:p4,errors:l4,...s3?{fetchers:new Map(_h.fetchers)}:{}}}function E1(P1){if(P1&&!isErrorResult(P1[1]))return{[P1[0]]:P1[1].data};if(_h.actionData)return Object.keys(_h.actionData).length===0?null:_h.actionData}function F1(P1){return P1.forEach(z1=>{let e2=_h.fetchers.get(z1.key),b2=getLoadingFetcher(void 0,e2?e2.data:void 0);_h.fetchers.set(z1.key,b2)}),new Map(_h.fetchers)}async function K1(P1,z1,e2,b2){Z1(P1);let P2=(b2&&b2.flushSync)===!0,c2=g||d,$2=normalizeTo(_h.location,_h.matches,E,e2,z1,b2?.relative),Z2=matchRoutes(c2,$2,E),Ym=n4(Z2,c2,$2);if(Ym.active&&Ym.matches&&(Z2=Ym.matches),!Z2){u1(P1,z1,getInternalRouterError(404,{pathname:$2}),{flushSync:P2});return}let{path:o1,submission:a1,error:l1}=normalizeNavigateOptions(!0,$2,b2);if(l1){u1(P1,z1,l1,{flushSync:P2});return}let w1=new unstable_RouterContextProvider(t.unstable_getContext?await t.unstable_getContext():void 0),h1=(b2&&b2.preventScrollReset)===!0;if(a1&&isMutationMethod(a1.formMethod)){await N1(P1,z1,o1,Z2,w1,Ym.active,P2,h1,a1);return}s1.set(P1,{routeId:z1,path:o1}),await J1(P1,z1,o1,Z2,w1,Ym.active,P2,h1,a1)}async function N1(P1,z1,e2,b2,P2,c2,$2,Z2,Ym){i1(),s1.delete(P1);let o1=_h.fetchers.get(P1);g1(P1,getSubmittingFetcher(Ym,o1),{flushSync:$2});let a1=new AbortController,l1=createClientSideRequest(t.history,e2,a1.signal,Ym);if(c2){let O4=await o4(b2,new URL(l1.url).pathname,l1.signal,P1);if(O4.type==="aborted")return;if(O4.type==="error"){u1(P1,z1,O4.error,{flushSync:$2});return}else if(O4.matches)b2=O4.matches;else{u1(P1,z1,getInternalRouterError(404,{pathname:e2}),{flushSync:$2});return}}let w1=getTargetMatch(b2,e2);if(!w1.route.action&&!w1.route.lazy){let O4=getInternalRouterError(405,{method:Ym.formMethod,pathname:e2,routeId:z1});u1(P1,z1,O4,{flushSync:$2});return}wh.set(P1,a1);let h1=gf,C1=getTargetedDataStrategyMatches(l,u,l1,b2,w1,a,P2),$1=(await n2(l1,C1,P2,P1))[w1.route.id];if(l1.signal.aborted){wh.get(P1)===a1&&wh.delete(P1);return}if(_1.has(P1)){if(isRedirectResult($1)||isErrorResult($1)){g1(P1,getDoneFetcher(void 0));return}}else{if(isRedirectResult($1))if(wh.delete(P1),yh>h1){g1(P1,getDoneFetcher(void 0));return}else return e1.add(P1),g1(P1,getLoadingFetcher(Ym)),E2(l1,$1,!1,{fetcherSubmission:Ym,preventScrollReset:Z2});if(isErrorResult($1)){u1(P1,z1,$1.error);return}}let W1=_h.navigation.location||_h.location,Y1=createClientSideRequest(t.history,W1,a1.signal),_2=g||d,O2=_h.navigation.state!=="idle"?matchRoutes(_2,_h.navigation.location,E):_h.matches;invariant$1(O2,"Didn't find any matches after fetcher action");let u4=++gf;ff.set(P1,u4);let p4=getLoadingFetcher(Ym,$1.data);_h.fetchers.set(P1,p4);let{dsMatches:l4,revalidatingFetchers:A4}=getMatchesToLoad(Y1,P2,l,u,t.history,_h,O2,Ym,W1,a,!1,Qp,n1,_1,s1,e1,_2,E,t.patchRoutesOnNavigation!=null,[w1.route.id,$1]);A4.filter(O4=>O4.key!==P1).forEach(O4=>{let C4=O4.key,H2=_h.fetchers.get(C4),x1=getLoadingFetcher(void 0,H2?H2.data:void 0);_h.fetchers.set(C4,x1),Z1(C4),O4.controller&&wh.set(C4,O4.controller)}),W2({fetchers:new Map(_h.fetchers)});let h3=()=>A4.forEach(O4=>Z1(O4.key));a1.signal.addEventListener("abort",h3);let{loaderResults:s3,fetcherResults:y4}=await D1(l4,A4,Y1,P2);if(a1.signal.aborted)return;if(a1.signal.removeEventListener("abort",h3),ff.delete(P1),wh.delete(P1),A4.forEach(O4=>wh.delete(O4.key)),_h.fetchers.has(P1)){let O4=getDoneFetcher($1.data);_h.fetchers.set(P1,O4)}let r4=findRedirect(s3);if(r4)return E2(Y1,r4.result,!1,{preventScrollReset:Z2});if(r4=findRedirect(y4),r4)return e1.add(r4.key),E2(Y1,r4.result,!1,{preventScrollReset:Z2});let{loaderData:z4,errors:e4}=processLoaderData(_h,O2,s3,void 0,A4,y4);v2(u4),_h.navigation.state==="loading"&&u4>yh?(invariant$1(cf,"Expected pending action"),uf&&uf.abort(),N2(_h.navigation.location,{matches:O2,loaderData:z4,errors:e4,fetchers:new Map(_h.fetchers)})):(W2({errors:e4,loaderData:mergeLoaderData(_h.loaderData,z4,O2,e4),fetchers:new Map(_h.fetchers)}),Qp=!1)}async function J1(P1,z1,e2,b2,P2,c2,$2,Z2,Ym){let o1=_h.fetchers.get(P1);g1(P1,getLoadingFetcher(Ym,o1?o1.data:void 0),{flushSync:$2});let a1=new AbortController,l1=createClientSideRequest(t.history,e2,a1.signal);if(c2){let W1=await o4(b2,new URL(l1.url).pathname,l1.signal,P1);if(W1.type==="aborted")return;if(W1.type==="error"){u1(P1,z1,W1.error,{flushSync:$2});return}else if(W1.matches)b2=W1.matches;else{u1(P1,z1,getInternalRouterError(404,{pathname:e2}),{flushSync:$2});return}}let w1=getTargetMatch(b2,e2);wh.set(P1,a1);let h1=gf,C1=getTargetedDataStrategyMatches(l,u,l1,b2,w1,a,P2),$1=(await n2(l1,C1,P2,P1))[w1.route.id];if(wh.get(P1)===a1&&wh.delete(P1),!l1.signal.aborted){if(_1.has(P1)){g1(P1,getDoneFetcher(void 0));return}if(isRedirectResult($1))if(yh>h1){g1(P1,getDoneFetcher(void 0));return}else{e1.add(P1),await E2(l1,$1,!1,{preventScrollReset:Z2});return}if(isErrorResult($1)){u1(P1,z1,$1.error);return}g1(P1,getDoneFetcher($1.data))}}async function E2(P1,z1,e2,{submission:b2,fetcherSubmission:P2,preventScrollReset:c2,replace:$2}={}){z1.response.headers.has("X-Remix-Revalidate")&&(Qp=!0);let Z2=z1.response.headers.get("Location");invariant$1(Z2,"Expected a Location header on the redirect Response"),Z2=normalizeRedirectLocation(Z2,new URL(P1.url),E);let Ym=createLocation(_h.location,Z2,{_isRedirect:!0});if(r){let C1=!1;if(z1.response.headers.has("X-Remix-Reload-Document"))C1=!0;else if(isAbsoluteUrl(Z2)){const q1=createBrowserURLImpl(Z2,!0);C1=q1.origin!==e.location.origin||stripBasename(q1.pathname,E)==null}if(C1){$2?e.location.replace(Z2):e.location.assign(Z2);return}}uf=null;let o1=$2===!0||z1.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:a1,formAction:l1,formEncType:w1}=_h.navigation;!b2&&!P2&&a1&&l1&&w1&&(b2=getSubmissionFromNavigation(_h.navigation));let h1=b2||P2;if(redirectPreserveMethodStatusCodes.has(z1.response.status)&&h1&&isMutationMethod(h1.formMethod))await B2(o1,Ym,{submission:{...h1,formAction:Z2},preventScrollReset:c2||df,enableViewTransition:e2?li:void 0});else{let C1=getLoadingNavigation(Ym,b2);await B2(o1,Ym,{overrideNavigation:C1,fetcherSubmission:P2,preventScrollReset:c2||df,enableViewTransition:e2?li:void 0})}}async function n2(P1,z1,e2,b2){let P2,c2={};try{P2=await callDataStrategyImpl(P,P1,z1,b2,e2,!1)}catch($2){return z1.filter(Z2=>Z2.shouldLoad).forEach(Z2=>{c2[Z2.route.id]={type:"error",error:$2}}),c2}if(P1.signal.aborted)return c2;for(let[$2,Z2]of Object.entries(P2))if(isRedirectDataStrategyResult(Z2)){let Ym=Z2.result;c2[$2]={type:"redirect",response:normalizeRelativeRoutingRedirectResponse(Ym,P1,$2,z1,E)}}else c2[$2]=await convertDataStrategyResultToDataResult(Z2);return c2}async function D1(P1,z1,e2,b2){let P2=n2(e2,P1,b2,null),c2=Promise.all(z1.map(async Ym=>{if(Ym.matches&&Ym.match&&Ym.request&&Ym.controller){let a1=(await n2(Ym.request,Ym.matches,b2,Ym.key))[Ym.match.route.id];return{[Ym.key]:a1}}else return Promise.resolve({[Ym.key]:{type:"error",error:getInternalRouterError(404,{pathname:Ym.path})}})})),$2=await P2,Z2=(await c2).reduce((Ym,o1)=>Object.assign(Ym,o1),{});return{loaderResults:$2,fetcherResults:Z2}}function i1(){Qp=!0,s1.forEach((P1,z1)=>{wh.has(z1)&&n1.add(z1),Z1(z1)})}function g1(P1,z1,e2={}){_h.fetchers.set(P1,z1),W2({fetchers:new Map(_h.fetchers)},{flushSync:(e2&&e2.flushSync)===!0})}function u1(P1,z1,e2,b2={}){let P2=findNearestBoundary(_h.matches,z1);B1(P1),W2({errors:{[P2.route.id]:e2},fetchers:new Map(_h.fetchers)},{flushSync:(b2&&b2.flushSync)===!0})}function L1(P1){return b1.set(P1,(b1.get(P1)||0)+1),_1.has(P1)&&_1.delete(P1),_h.fetchers.get(P1)||IDLE_FETCHER}function B1(P1){let z1=_h.fetchers.get(P1);wh.has(P1)&&!(z1&&z1.state==="loading"&&ff.has(P1))&&Z1(P1),s1.delete(P1),ff.delete(P1),e1.delete(P1),_1.delete(P1),n1.delete(P1),_h.fetchers.delete(P1)}function Q1(P1){let z1=(b1.get(P1)||0)-1;z1<=0?(b1.delete(P1),_1.add(P1)):b1.set(P1,z1),W2({fetchers:new Map(_h.fetchers)})}function Z1(P1){let z1=wh.get(P1);z1&&(z1.abort(),wh.delete(P1))}function A1(P1){for(let z1 of P1){let e2=L1(z1),b2=getDoneFetcher(e2.data);_h.fetchers.set(z1,b2)}}function a2(){let P1=[],z1=!1;for(let e2 of e1){let b2=_h.fetchers.get(e2);invariant$1(b2,`Expected fetcher: ${e2}`),b2.state==="loading"&&(e1.delete(e2),P1.push(e2),z1=!0)}return A1(P1),z1}function v2(P1){let z1=[];for(let[e2,b2]of ff)if(b2<P1){let P2=_h.fetchers.get(e2);invariant$1(P2,`Expected fetcher: ${e2}`),P2.state==="loading"&&(Z1(e2),ff.delete(e2),z1.push(e2))}return A1(z1),z1.length>0}function A2(P1,z1){let e2=_h.blockers.get(P1)||IDLE_BLOCKER;return V1.get(P1)!==z1&&V1.set(P1,z1),e2}function l2(P1){_h.blockers.delete(P1),V1.delete(P1)}function x2(P1,z1){let e2=_h.blockers.get(P1)||IDLE_BLOCKER;invariant$1(e2.state==="unblocked"&&z1.state==="blocked"||e2.state==="blocked"&&z1.state==="blocked"||e2.state==="blocked"&&z1.state==="proceeding"||e2.state==="blocked"&&z1.state==="unblocked"||e2.state==="proceeding"&&z1.state==="unblocked",`Invalid blocker state transition: ${e2.state} -> ${z1.state}`);let b2=new Map(_h.blockers);b2.set(P1,z1),W2({blockers:b2})}function u2({currentLocation:P1,nextLocation:z1,historyAction:e2}){if(V1.size===0)return;V1.size>1&&warning(!1,"A router only supports one blocker at a time");let b2=Array.from(V1.entries()),[P2,c2]=b2[b2.length-1],$2=_h.blockers.get(P2);if(!($2&&$2.state==="proceeding")&&c2({currentLocation:P1,nextLocation:z1,historyAction:e2}))return P2}function s2(P1){let z1=getInternalRouterError(404,{pathname:P1}),e2=g||d,{matches:b2,route:P2}=getShortCircuitMatches(e2);return{notFoundMatches:b2,route:P2,error:z1}}function j2(P1,z1,e2){if(He=P1,wt=z1,Xe=e2||null,!Do&&_h.navigation===IDLE_NAVIGATION){Do=!0;let b2=a4(_h.location,_h.matches);b2!=null&&W2({restoreScrollPosition:b2})}return()=>{He=null,wt=null,Xe=null}}function h2(P1,z1){return Xe&&Xe(P1,z1.map(b2=>convertRouteMatchToUiMatch(b2,_h.loaderData)))||P1.key}function k2(P1,z1){if(He&&wt){let e2=h2(P1,z1);He[e2]=wt()}}function a4(P1,z1){if(He){let e2=h2(P1,z1),b2=He[e2];if(typeof b2=="number")return b2}return null}function n4(P1,z1,e2){if(t.patchRoutesOnNavigation)if(P1){if(Object.keys(P1[0].params).length>0)return{active:!0,matches:matchRoutesImpl(z1,e2,E,!0)}}else return{active:!0,matches:matchRoutesImpl(z1,e2,E,!0)||[]};return{active:!1,matches:null}}async function o4(P1,z1,e2,b2){if(!t.patchRoutesOnNavigation)return{type:"success",matches:P1};let P2=P1;for(;;){let c2=g==null,$2=g||d,Z2=u;try{await t.patchRoutesOnNavigation({signal:e2,path:z1,matches:P2,fetcherKey:b2,patch:(a1,l1)=>{e2.aborted||patchRoutesImpl(a1,l1,$2,Z2,l,!1)}})}catch(a1){return{type:"error",error:a1,partialMatches:P2}}finally{c2&&!e2.aborted&&(d=[...d])}if(e2.aborted)return{type:"aborted"};let Ym=matchRoutes($2,z1,E);if(Ym)return{type:"success",matches:Ym};let o1=matchRoutesImpl($2,z1,E,!0);if(!o1||P2.length===o1.length&&P2.every((a1,l1)=>a1.route.id===o1[l1].route.id))return{type:"success",matches:null};P2=o1}}function P4(P1){u={},g=convertRoutesToDataRoutes(P1,l,void 0,u)}function v4(P1,z1,e2=!1){let b2=g==null;patchRoutesImpl(P1,z1,g||d,u,l,e2),b2&&(d=[...d],W2({}))}return pf={get basename(){return E},get future(){return Z},get state(){return _h},get routes(){return d},get window(){return e},initialize:R2,subscribe:X1,enableScrollRestoration:j2,navigate:V2,fetch:K1,revalidate:q2,createHref:P1=>t.history.createHref(P1),encodeLocation:P1=>t.history.encodeLocation(P1),getFetcher:L1,deleteFetcher:Q1,dispose:F2,getBlocker:A2,deleteBlocker:l2,patchRoutes:v4,_internalFetchControllers:wh,_internalSetRoutes:P4,_internalSetStateDoNotUseOrYouWillBreakYourApp(P1){W2(P1)}},pf}function isSubmissionNavigation(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function normalizeTo(t,e,r,a,l,u){let d,g;if(l){d=[];for(let P of e)if(d.push(P),P.route.id===l){g=P;break}}else d=e,g=e[e.length-1];let E=resolveTo(a||".",getResolveToMatches(d),stripBasename(t.pathname,r)||t.pathname,u==="path");if(a==null&&(E.search=t.search,E.hash=t.hash),(a==null||a===""||a===".")&&g){let P=hasNakedIndexQuery(E.search);if(g.route.index&&!P)E.search=E.search?E.search.replace(/^\?/,"?index&"):"?index";else if(!g.route.index&&P){let Z=new URLSearchParams(E.search),me=Z.getAll("index");Z.delete("index"),me.filter(He=>He).forEach(He=>Z.append("index",He));let _e=Z.toString();E.search=_e?`?${_e}`:""}}return r!=="/"&&(E.pathname=prependBasename({basename:r,pathname:E.pathname})),createPath(E)}function normalizeNavigateOptions(t,e,r){if(!r||!isSubmissionNavigation(r))return{path:e};if(r.formMethod&&!isValidMethod(r.formMethod))return{path:e,error:getInternalRouterError(405,{method:r.formMethod})};let a=()=>({path:e,error:getInternalRouterError(400,{type:"invalid-body"})}),u=(r.formMethod||"get").toUpperCase(),d=stripHashFromPath(e);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!isMutationMethod(u))return a();let me=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_e,[He,Xe])=>`${_e}${He}=${Xe}
`,""):String(r.body);return{path:e,submission:{formMethod:u,formAction:d,formEncType:r.formEncType,formData:void 0,json:void 0,text:me}}}else if(r.formEncType==="application/json"){if(!isMutationMethod(u))return a();try{let me=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:e,submission:{formMethod:u,formAction:d,formEncType:r.formEncType,formData:void 0,json:me,text:void 0}}}catch{return a()}}}invariant$1(typeof FormData=="function","FormData is not available in this environment");let g,E;if(r.formData)g=convertFormDataToSearchParams(r.formData),E=r.formData;else if(r.body instanceof FormData)g=convertFormDataToSearchParams(r.body),E=r.body;else if(r.body instanceof URLSearchParams)g=r.body,E=convertSearchParamsToFormData(g);else if(r.body==null)g=new URLSearchParams,E=new FormData;else try{g=new URLSearchParams(r.body),E=convertSearchParamsToFormData(g)}catch{return a()}let P={formMethod:u,formAction:d,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:E,json:void 0,text:void 0};if(isMutationMethod(P.formMethod))return{path:e,submission:P};let Z=parsePath(e);return t&&Z.search&&hasNakedIndexQuery(Z.search)&&g.append("index",""),Z.search=`?${g}`,{path:createPath(Z),submission:P}}function getMatchesToLoad(t,e,r,a,l,u,d,g,E,P,Z,me,_e,He,Xe,wt,Do,sr,Ko,Bs){let th=Bs?isErrorResult(Bs[1])?Bs[1].error:Bs[1].data:void 0,pf=l.createURL(u.location),_h=l.createURL(E),cf;if(Z&&u.errors){let qc=Object.keys(u.errors)[0];cf=d.findIndex(Qp=>Qp.route.id===qc)}else if(Bs&&isErrorResult(Bs[1])){let qc=Bs[0];cf=d.findIndex(Qp=>Qp.route.id===qc)-1}let df=Bs?Bs[1].statusCode:void 0,uf=df&&df>=400,li={currentUrl:pf,currentParams:u.matches[0]?.params||{},nextUrl:_h,nextParams:d[0].params,...g,actionResult:th,actionStatus:df},Vc=d.map((qc,Qp)=>{let{route:n1}=qc,wh=null;if(cf!=null&&Qp>cf?wh=!1:n1.lazy?wh=!0:n1.loader==null?wh=!1:Z?wh=shouldLoadRouteOnHydration(n1,u.loaderData,u.errors):isNewLoader(u.loaderData,u.matches[Qp],qc)&&(wh=!0),wh!==null)return getDataStrategyMatch(r,a,t,qc,P,e,wh);let gf=uf?!1:me||pf.pathname+pf.search===_h.pathname+_h.search||pf.search!==_h.search||isNewRouteInstance(u.matches[Qp],qc),yh={...li,defaultShouldRevalidate:gf},ff=shouldRevalidateLoader(qc,yh);return getDataStrategyMatch(r,a,t,qc,P,e,ff,yh)}),Rs=[];return Xe.forEach((qc,Qp)=>{if(Z||!d.some(b1=>b1.route.id===qc.routeId)||He.has(Qp))return;let n1=u.fetchers.get(Qp),wh=n1&&n1.state!=="idle"&&n1.data===void 0,gf=matchRoutes(Do,qc.path,sr);if(!gf){if(Ko&&wh)return;Rs.push({key:Qp,routeId:qc.routeId,path:qc.path,matches:null,match:null,request:null,controller:null});return}if(wt.has(Qp))return;let yh=getTargetMatch(gf,qc.path),ff=new AbortController,e1=createClientSideRequest(l,qc.path,ff.signal),s1=null;if(_e.has(Qp))_e.delete(Qp),s1=getTargetedDataStrategyMatches(r,a,e1,gf,yh,P,e);else if(wh)me&&(s1=getTargetedDataStrategyMatches(r,a,e1,gf,yh,P,e));else{let b1={...li,defaultShouldRevalidate:uf?!1:me};shouldRevalidateLoader(yh,b1)&&(s1=getTargetedDataStrategyMatches(r,a,e1,gf,yh,P,e,b1))}s1&&Rs.push({key:Qp,routeId:qc.routeId,path:qc.path,matches:s1,match:yh,request:e1,controller:ff})}),{dsMatches:Vc,revalidatingFetchers:Rs}}function shouldLoadRouteOnHydration(t,e,r){if(t.lazy)return!0;if(!t.loader)return!1;let a=e!=null&&t.id in e,l=r!=null&&r[t.id]!==void 0;return!a&&l?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!a&&!l}function isNewLoader(t,e,r){let a=!e||r.route.id!==e.route.id,l=!t.hasOwnProperty(r.route.id);return a||l}function isNewRouteInstance(t,e){let r=t.route.path;return t.pathname!==e.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==e.params["*"]}function shouldRevalidateLoader(t,e){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(e);if(typeof r=="boolean")return r}return e.defaultShouldRevalidate}function patchRoutesImpl(t,e,r,a,l,u){let d;if(t){let P=a[t];invariant$1(P,`No route found to patch children into: routeId = ${t}`),P.children||(P.children=[]),d=P.children}else d=r;let g=[],E=[];if(e.forEach(P=>{let Z=d.find(me=>isSameRoute(P,me));Z?E.push({existingRoute:Z,newRoute:P}):g.push(P)}),g.length>0){let P=convertRoutesToDataRoutes(g,l,[t||"_","patch",String(d?.length||"0")],a);d.push(...P)}if(u&&E.length>0)for(let P=0;P<E.length;P++){let{existingRoute:Z,newRoute:me}=E[P],_e=Z,[He]=convertRoutesToDataRoutes([me],l,[],{},!0);Object.assign(_e,{element:He.element?He.element:_e.element,errorElement:He.errorElement?He.errorElement:_e.errorElement,hydrateFallbackElement:He.hydrateFallbackElement?He.hydrateFallbackElement:_e.hydrateFallbackElement})}}function isSameRoute(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((r,a)=>e.children?.some(l=>isSameRoute(r,l))):!1}var lazyRoutePropertyCache=new WeakMap,loadLazyRouteProperty=({key:t,route:e,manifest:r,mapRouteProperties:a})=>{let l=r[e.id];if(invariant$1(l,"No route found in manifest"),!l.lazy||typeof l.lazy!="object")return;let u=l.lazy[t];if(!u)return;let d=lazyRoutePropertyCache.get(l);d||(d={},lazyRoutePropertyCache.set(l,d));let g=d[t];if(g)return g;let E=(async()=>{let P=isUnsupportedLazyRouteObjectKey(t),me=l[t]!==void 0&&t!=="hasErrorBoundary";if(P)warning(!P,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),d[t]=Promise.resolve();else if(me)warning(!1,`Route "${l.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let _e=await u();_e!=null&&(Object.assign(l,{[t]:_e}),Object.assign(l,a(l)))}typeof l.lazy=="object"&&(l.lazy[t]=void 0,Object.values(l.lazy).every(_e=>_e===void 0)&&(l.lazy=void 0))})();return d[t]=E,E},lazyRouteFunctionCache=new WeakMap;function loadLazyRoute(t,e,r,a,l){let u=r[t.id];if(invariant$1(u,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let Z=lazyRouteFunctionCache.get(u);if(Z)return{lazyRoutePromise:Z,lazyHandlerPromise:Z};let me=(async()=>{invariant$1(typeof t.lazy=="function","No lazy route function found");let _e=await t.lazy(),He={};for(let Xe in _e){let wt=_e[Xe];if(wt===void 0)continue;let Do=isUnsupportedLazyRouteFunctionKey(Xe),Ko=u[Xe]!==void 0&&Xe!=="hasErrorBoundary";Do?warning(!Do,"Route property "+Xe+" is not a supported property to be returned from a lazy route function. This property will be ignored."):Ko?warning(!Ko,`Route "${u.id}" has a static property "${Xe}" defined but its lazy function is also returning a value for this property. The lazy route property "${Xe}" will be ignored.`):He[Xe]=wt}Object.assign(u,He),Object.assign(u,{...a(u),lazy:void 0})})();return lazyRouteFunctionCache.set(u,me),me.catch(()=>{}),{lazyRoutePromise:me,lazyHandlerPromise:me}}let d=Object.keys(t.lazy),g=[],E;for(let Z of d){if(l&&l.includes(Z))continue;let me=loadLazyRouteProperty({key:Z,route:t,manifest:r,mapRouteProperties:a});me&&(g.push(me),Z===e&&(E=me))}let P=g.length>0?Promise.all(g).then(()=>{}):void 0;return P?.catch(()=>{}),E?.catch(()=>{}),{lazyRoutePromise:P,lazyHandlerPromise:E}}async function defaultDataStrategy(t){let e=t.matches.filter(l=>l.shouldLoad),r={};return(await Promise.all(e.map(l=>l.resolve()))).forEach((l,u)=>{r[e[u].route.id]=l}),r}async function defaultDataStrategyWithMiddleware(t){return t.matches.some(e=>e.route.unstable_middleware)?runMiddlewarePipeline(t,!1,()=>defaultDataStrategy(t),(e,r)=>({[r]:{type:"error",result:e}})):defaultDataStrategy(t)}async function runMiddlewarePipeline(t,e,r,a){let{matches:l,request:u,params:d,context:g}=t,E={handlerResult:void 0};try{let P=l.flatMap(me=>me.route.unstable_middleware?me.route.unstable_middleware.map(_e=>[me.route.id,_e]):[]),Z=await callRouteMiddleware({request:u,params:d,context:g},P,e,E,r);return e?Z:E.handlerResult}catch(P){if(!E.middlewareError)throw P;let Z=await a(E.middlewareError.error,E.middlewareError.routeId);return E.handlerResult?Object.assign(E.handlerResult,Z):Z}}async function callRouteMiddleware(t,e,r,a,l,u=0){let{request:d}=t;if(d.signal.aborted)throw d.signal.reason?d.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${d.method} ${d.url}`);let g=e[u];if(!g)return a.handlerResult=await l(),a.handlerResult;let[E,P]=g,Z=!1,me,_e=async()=>{if(Z)throw new Error("You may only call `next()` once per middleware");Z=!0,await callRouteMiddleware(t,e,r,a,l,u+1)};try{let He=await P({request:t.request,params:t.params,context:t.context},_e);return Z?He===void 0?me:He:_e()}catch(He){throw a.middlewareError?a.middlewareError.error!==He&&(a.middlewareError={routeId:E,error:He}):a.middlewareError={routeId:E,error:He},He}}function getDataStrategyMatchLazyPromises(t,e,r,a,l){let u=loadLazyRouteProperty({key:"unstable_middleware",route:a.route,manifest:e,mapRouteProperties:t}),d=loadLazyRoute(a.route,isMutationMethod(r.method)?"action":"loader",e,t,l);return{middleware:u,route:d.lazyRoutePromise,handler:d.lazyHandlerPromise}}function getDataStrategyMatch(t,e,r,a,l,u,d,g=null){let E=!1,P=getDataStrategyMatchLazyPromises(t,e,r,a,l);return{...a,_lazyPromises:P,shouldLoad:d,unstable_shouldRevalidateArgs:g,unstable_shouldCallHandler(Z){return E=!0,g?typeof Z=="boolean"?shouldRevalidateLoader(a,{...g,defaultShouldRevalidate:Z}):shouldRevalidateLoader(a,g):d},resolve(Z){return E||d||Z&&!isMutationMethod(r.method)&&(a.route.lazy||a.route.loader)?callLoaderOrAction({request:r,match:a,lazyHandlerPromise:P?.handler,lazyRoutePromise:P?.route,handlerOverride:Z,scopedContext:u}):Promise.resolve({type:"data",result:void 0})}}}function getTargetedDataStrategyMatches(t,e,r,a,l,u,d,g=null){return a.map(E=>E.route.id!==l.route.id?{...E,shouldLoad:!1,unstable_shouldRevalidateArgs:g,unstable_shouldCallHandler:()=>!1,_lazyPromises:getDataStrategyMatchLazyPromises(t,e,r,E,u),resolve:()=>Promise.resolve({type:"data",result:void 0})}:getDataStrategyMatch(t,e,r,E,u,d,!0,g))}async function callDataStrategyImpl(t,e,r,a,l,u){r.some(P=>P._lazyPromises?.middleware)&&await Promise.all(r.map(P=>P._lazyPromises?.middleware));let d={request:e,params:r[0].params,context:l,matches:r},E=await t({...d,fetcherKey:a,unstable_runClientMiddleware:P=>{let Z=d;return runMiddlewarePipeline(Z,!1,()=>P({...Z,fetcherKey:a,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(me,_e)=>({[_e]:{type:"error",result:me}}))}});try{await Promise.all(r.flatMap(P=>[P._lazyPromises?.handler,P._lazyPromises?.route]))}catch{}return E}async function callLoaderOrAction({request:t,match:e,lazyHandlerPromise:r,lazyRoutePromise:a,handlerOverride:l,scopedContext:u}){let d,g,E=isMutationMethod(t.method),P=E?"action":"loader",Z=me=>{let _e,He=new Promise((Do,sr)=>_e=sr);g=()=>_e(),t.signal.addEventListener("abort",g);let Xe=Do=>typeof me!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${P}" [routeId: ${e.route.id}]`)):me({request:t,params:e.params,context:u},...Do!==void 0?[Do]:[]),wt=(async()=>{try{return{type:"data",result:await(l?l(sr=>Xe(sr)):Xe())}}catch(Do){return{type:"error",result:Do}}})();return Promise.race([wt,He])};try{let me=E?e.route.action:e.route.loader;if(r||a)if(me){let _e,[He]=await Promise.all([Z(me).catch(Xe=>{_e=Xe}),r,a]);if(_e!==void 0)throw _e;d=He}else{await r;let _e=E?e.route.action:e.route.loader;if(_e)[d]=await Promise.all([Z(_e),a]);else if(P==="action"){let He=new URL(t.url),Xe=He.pathname+He.search;throw getInternalRouterError(405,{method:t.method,pathname:Xe,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(me)d=await Z(me);else{let _e=new URL(t.url),He=_e.pathname+_e.search;throw getInternalRouterError(404,{pathname:He})}}catch(me){return{type:"error",result:me}}finally{g&&t.signal.removeEventListener("abort",g)}return d}async function convertDataStrategyResultToDataResult(t){let{result:e,type:r}=t;if(isResponse(e)){let a;try{let l=e.headers.get("Content-Type");l&&/\bapplication\/json\b/.test(l)?e.body==null?a=null:a=await e.json():a=await e.text()}catch(l){return{type:"error",error:l}}return r==="error"?{type:"error",error:new ErrorResponseImpl(e.status,e.statusText,a),statusCode:e.status,headers:e.headers}:{type:"data",data:a,statusCode:e.status,headers:e.headers}}return r==="error"?isDataWithResponseInit(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new ErrorResponseImpl(e.init?.status||500,void 0,e.data),statusCode:isRouteErrorResponse(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:isRouteErrorResponse(e)?e.status:void 0}:isDataWithResponseInit(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function normalizeRelativeRoutingRedirectResponse(t,e,r,a,l){let u=t.headers.get("Location");if(invariant$1(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!isAbsoluteUrl(u)){let d=a.slice(0,a.findIndex(g=>g.route.id===r)+1);u=normalizeTo(new URL(e.url),d,l,u),t.headers.set("Location",u)}return t}function normalizeRedirectLocation(t,e,r){if(isAbsoluteUrl(t)){let a=t,l=a.startsWith("//")?new URL(e.protocol+a):new URL(a),u=stripBasename(l.pathname,r)!=null;if(l.origin===e.origin&&u)return l.pathname+l.search+l.hash}return t}function createClientSideRequest(t,e,r,a){let l=t.createURL(stripHashFromPath(e)).toString(),u={signal:r};if(a&&isMutationMethod(a.formMethod)){let{formMethod:d,formEncType:g}=a;u.method=d.toUpperCase(),g==="application/json"?(u.headers=new Headers({"Content-Type":g}),u.body=JSON.stringify(a.json)):g==="text/plain"?u.body=a.text:g==="application/x-www-form-urlencoded"&&a.formData?u.body=convertFormDataToSearchParams(a.formData):u.body=a.formData}return new Request(l,u)}function convertFormDataToSearchParams(t){let e=new URLSearchParams;for(let[r,a]of t.entries())e.append(r,typeof a=="string"?a:a.name);return e}function convertSearchParamsToFormData(t){let e=new FormData;for(let[r,a]of t.entries())e.append(r,a);return e}function processRouteLoaderData(t,e,r,a=!1,l=!1){let u={},d=null,g,E=!1,P={},Z=r&&isErrorResult(r[1])?r[1].error:void 0;return t.forEach(me=>{if(!(me.route.id in e))return;let _e=me.route.id,He=e[_e];if(invariant$1(!isRedirectResult(He),"Cannot handle redirect results in processLoaderData"),isErrorResult(He)){let Xe=He.error;if(Z!==void 0&&(Xe=Z,Z=void 0),d=d||{},l)d[_e]=Xe;else{let wt=findNearestBoundary(t,_e);d[wt.route.id]==null&&(d[wt.route.id]=Xe)}a||(u[_e]=ResetLoaderDataSymbol),E||(E=!0,g=isRouteErrorResponse(He.error)?He.error.status:500),He.headers&&(P[_e]=He.headers)}else u[_e]=He.data,He.statusCode&&He.statusCode!==200&&!E&&(g=He.statusCode),He.headers&&(P[_e]=He.headers)}),Z!==void 0&&r&&(d={[r[0]]:Z},r[2]&&(u[r[2]]=void 0)),{loaderData:u,errors:d,statusCode:g||200,loaderHeaders:P}}function processLoaderData(t,e,r,a,l,u){let{loaderData:d,errors:g}=processRouteLoaderData(e,r,a);return l.filter(E=>!E.matches||E.matches.some(P=>P.shouldLoad)).forEach(E=>{let{key:P,match:Z,controller:me}=E,_e=u[P];if(invariant$1(_e,"Did not find corresponding fetcher result"),!(me&&me.signal.aborted))if(isErrorResult(_e)){let He=findNearestBoundary(t.matches,Z?.route.id);g&&g[He.route.id]||(g={...g,[He.route.id]:_e.error}),t.fetchers.delete(P)}else if(isRedirectResult(_e))invariant$1(!1,"Unhandled fetcher revalidation redirect");else{let He=getDoneFetcher(_e.data);t.fetchers.set(P,He)}}),{loaderData:d,errors:g}}function mergeLoaderData(t,e,r,a){let l=Object.entries(e).filter(([,u])=>u!==ResetLoaderDataSymbol).reduce((u,[d,g])=>(u[d]=g,u),{});for(let u of r){let d=u.route.id;if(!e.hasOwnProperty(d)&&t.hasOwnProperty(d)&&u.route.loader&&(l[d]=t[d]),a&&a.hasOwnProperty(d))break}return l}function getActionDataForCommit(t){return t?isErrorResult(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function findNearestBoundary(t,e){return(e?t.slice(0,t.findIndex(a=>a.route.id===e)+1):[...t]).reverse().find(a=>a.route.hasErrorBoundary===!0)||t[0]}function getShortCircuitMatches(t){let e=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function getInternalRouterError(t,{pathname:e,routeId:r,method:a,type:l,message:u}={}){let d="Unknown Server Error",g="Unknown @remix-run/router error";return t===400?(d="Bad Request",a&&e&&r?g=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:l==="invalid-body"&&(g="Unable to encode submission body")):t===403?(d="Forbidden",g=`Route "${r}" does not match URL "${e}"`):t===404?(d="Not Found",g=`No route matches URL "${e}"`):t===405&&(d="Method Not Allowed",a&&e&&r?g=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:a&&(g=`Invalid request method "${a.toUpperCase()}"`)),new ErrorResponseImpl(t||500,d,new Error(g),!0)}function findRedirect(t){let e=Object.entries(t);for(let r=e.length-1;r>=0;r--){let[a,l]=e[r];if(isRedirectResult(l))return{key:a,result:l}}}function stripHashFromPath(t){let e=typeof t=="string"?parsePath(t):t;return createPath({...e,hash:""})}function isHashChangeOnly(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function isRedirectDataStrategyResult(t){return isResponse(t.result)&&redirectStatusCodes.has(t.result.status)}function isErrorResult(t){return t.type==="error"}function isRedirectResult(t){return(t&&t.type)==="redirect"}function isDataWithResponseInit(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function isResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function isValidMethod(t){return validRequestMethods.has(t.toUpperCase())}function isMutationMethod(t){return validMutationMethods.has(t.toUpperCase())}function hasNakedIndexQuery(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function getTargetMatch(t,e){let r=typeof e=="string"?parsePath(e).search:e.search;if(t[t.length-1].route.index&&hasNakedIndexQuery(r||""))return t[t.length-1];let a=getPathContributingMatches(t);return a[a.length-1]}function getSubmissionFromNavigation(t){let{formMethod:e,formAction:r,formEncType:a,text:l,formData:u,json:d}=t;if(!(!e||!r||!a)){if(l!=null)return{formMethod:e,formAction:r,formEncType:a,formData:void 0,json:void 0,text:l};if(u!=null)return{formMethod:e,formAction:r,formEncType:a,formData:u,json:void 0,text:void 0};if(d!==void 0)return{formMethod:e,formAction:r,formEncType:a,formData:void 0,json:d,text:void 0}}}function getLoadingNavigation(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function getLoadingFetcher(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function getSubmittingFetcher(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function getDoneFetcher(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function restoreAppliedTransitions(t,e){try{let r=t.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(r){let a=JSON.parse(r);for(let[l,u]of Object.entries(a||{}))u&&Array.isArray(u)&&e.set(l,new Set(u||[]))}}catch{}}function persistAppliedTransitions(t,e){if(e.size>0){let r={};for(let[a,l]of e)r[a]=[...l];try{t.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(r))}catch(a){warning(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function createDeferred(){let t,e,r=new Promise((a,l)=>{t=async u=>{a(u);try{await r}catch{}},e=async u=>{l(u);try{await r}catch{}}});return{promise:r,resolve:t,reject:e}}var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(t,{relative:e}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=reactExports.useContext(NavigationContext),{hash:l,pathname:u,search:d}=useResolvedPath(t,{relative:e}),g=u;return r!=="/"&&(g=u==="/"?r:joinPaths([r,u])),a.createHref({pathname:g,search:d,hash:l})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:r}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:l}=useLocation(),u=JSON.stringify(getResolveToMatches(a)),d=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{d.current=!0}),reactExports.useCallback((E,P={})=>{if(warning(d.current,navigateEffectWarning),!d.current)return;if(typeof E=="number"){r.go(E);return}let Z=resolveTo(E,JSON.parse(u),l,P.relative==="path");t==null&&e!=="/"&&(Z.pathname=Z.pathname==="/"?e:joinPaths([e,Z.pathname])),(P.replace?r.replace:r.push)(Z,P.state,P)},[e,r,u,l,t])}reactExports.createContext(null);function useParams(){let{matches:t}=reactExports.useContext(RouteContext),e=t[t.length-1];return e?e.params:{}}function useResolvedPath(t,{relative:e}={}){let{matches:r}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),l=JSON.stringify(getResolveToMatches(r));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(l),a,e==="path"),[t,l,a,e])}function useRoutesImpl(t,e,r,a){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=reactExports.useContext(NavigationContext),{matches:u}=reactExports.useContext(RouteContext),d=u[u.length-1],g=d?d.params:{},E=d?d.pathname:"/",P=d?d.pathnameBase:"/",Z=d&&d.route;{let sr=Z&&Z.path||"";warningOnce(E,!Z||sr.endsWith("*")||sr.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${sr}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${sr}"> to <Route path="${sr==="/"?"*":`${sr}/*`}">.`)}let me=useLocation(),_e;_e=me;let He=_e.pathname||"/",Xe=He;if(P!=="/"){let sr=P.replace(/^\//,"").split("/");Xe="/"+He.replace(/^\//,"").split("/").slice(sr.length).join("/")}let wt=matchRoutes(t,{pathname:Xe});return warning(Z||wt!=null,`No routes matched location "${_e.pathname}${_e.search}${_e.hash}" `),warning(wt==null||wt[wt.length-1].route.element!==void 0||wt[wt.length-1].route.Component!==void 0||wt[wt.length-1].route.lazy!==void 0,`Matched leaf route at location "${_e.pathname}${_e.search}${_e.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(wt&&wt.map(sr=>Object.assign({},sr,{params:Object.assign({},g,sr.params),pathname:joinPaths([P,l.encodeLocation?l.encodeLocation(sr.pathname).pathname:sr.pathname]),pathnameBase:sr.pathnameBase==="/"?P:joinPaths([P,l.encodeLocation?l.encodeLocation(sr.pathnameBase).pathname:sr.pathnameBase])})),u,r,a)}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",t),d=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:u},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:u},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),r?reactExports.createElement("pre",{style:l},r):null,d)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:t,match:e,children:r}){let a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:t},r)}function _renderMatches(t,e=[],r=null,a=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,u=r?.errors;if(u!=null){let E=l.findIndex(P=>P.route.id&&u?.[P.route.id]!==void 0);invariant$1(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,E+1))}let d=!1,g=-1;if(r)for(let E=0;E<l.length;E++){let P=l[E];if((P.route.HydrateFallback||P.route.hydrateFallbackElement)&&(g=E),P.route.id){let{loaderData:Z,errors:me}=r,_e=P.route.loader&&!Z.hasOwnProperty(P.route.id)&&(!me||me[P.route.id]===void 0);if(P.route.lazy||_e){d=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}return l.reduceRight((E,P,Z)=>{let me,_e=!1,He=null,Xe=null;r&&(me=u&&P.route.id?u[P.route.id]:void 0,He=P.route.errorElement||defaultErrorElement,d&&(g<0&&Z===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_e=!0,Xe=null):g===Z&&(_e=!0,Xe=P.route.hydrateFallbackElement||null)));let wt=e.concat(l.slice(0,Z+1)),Do=()=>{let sr;return me?sr=He:_e?sr=Xe:P.route.Component?sr=reactExports.createElement(P.route.Component,null):P.route.element?sr=P.route.element:sr=E,reactExports.createElement(RenderedRoute,{match:P,routeContext:{outlet:E,matches:wt,isDataRoute:r!=null},children:sr})};return r&&(P.route.ErrorBoundary||P.route.errorElement||Z===0)?reactExports.createElement(RenderErrorBoundary,{location:r.location,revalidation:r.revalidation,component:He,error:me,children:Do(),routeContext:{outlet:null,matches:wt,isDataRoute:!0}}):Do()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useCurrentRouteId(t){let e=useRouteContext(t),r=e.matches[e.matches.length-1];return invariant$1(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let t=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),r=useCurrentRouteId("useRouteError");return t!==void 0?t:e.errors?.[r]}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),r=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{r.current=!0}),reactExports.useCallback(async(l,u={})=>{warning(r.current,navigateEffectWarning),r.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:e,...u}))},[t,e])}var alreadyWarned={};function warningOnce(t,e,r){!e&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning(!1,r))}var alreadyWarned2={};function warnOnce(t,e){!t&&!alreadyWarned2[e]&&(alreadyWarned2[e]=!0,console.warn(e))}function mapRouteProperties(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&warning(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:reactExports.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&warning(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:reactExports.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&warning(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:reactExports.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var hydrationRouteProperties=["HydrateFallback","hydrateFallbackElement"],Deferred$1=class{constructor(){this.status="pending",this.promise=new Promise((e,r)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",r(a))}})}};function RouterProvider({router:t,flushSync:e}){let[r,a]=reactExports.useState(t.state),[l,u]=reactExports.useState(),[d,g]=reactExports.useState({isTransitioning:!1}),[E,P]=reactExports.useState(),[Z,me]=reactExports.useState(),[_e,He]=reactExports.useState(),Xe=reactExports.useRef(new Map),wt=reactExports.useCallback((Bs,{deletedFetchers:th,flushSync:pf,viewTransitionOpts:_h})=>{Bs.fetchers.forEach((df,uf)=>{df.data!==void 0&&Xe.current.set(uf,df.data)}),th.forEach(df=>Xe.current.delete(df)),warnOnce(pf===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let cf=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(warnOnce(_h==null||cf,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!_h||!cf){e&&pf?e(()=>a(Bs)):reactExports.startTransition(()=>a(Bs));return}if(e&&pf){e(()=>{Z&&(E&&E.resolve(),Z.skipTransition()),g({isTransitioning:!0,flushSync:!0,currentLocation:_h.currentLocation,nextLocation:_h.nextLocation})});let df=t.window.document.startViewTransition(()=>{e(()=>a(Bs))});df.finished.finally(()=>{e(()=>{P(void 0),me(void 0),u(void 0),g({isTransitioning:!1})})}),e(()=>me(df));return}Z?(E&&E.resolve(),Z.skipTransition(),He({state:Bs,currentLocation:_h.currentLocation,nextLocation:_h.nextLocation})):(u(Bs),g({isTransitioning:!0,flushSync:!1,currentLocation:_h.currentLocation,nextLocation:_h.nextLocation}))},[t.window,e,Z,E]);reactExports.useLayoutEffect(()=>t.subscribe(wt),[t,wt]),reactExports.useEffect(()=>{d.isTransitioning&&!d.flushSync&&P(new Deferred$1)},[d]),reactExports.useEffect(()=>{if(E&&l&&t.window){let Bs=l,th=E.promise,pf=t.window.document.startViewTransition(async()=>{reactExports.startTransition(()=>a(Bs)),await th});pf.finished.finally(()=>{P(void 0),me(void 0),u(void 0),g({isTransitioning:!1})}),me(pf)}},[l,E,t.window]),reactExports.useEffect(()=>{E&&l&&r.location.key===l.location.key&&E.resolve()},[E,Z,r.location,l]),reactExports.useEffect(()=>{!d.isTransitioning&&_e&&(u(_e.state),g({isTransitioning:!0,flushSync:!1,currentLocation:_e.currentLocation,nextLocation:_e.nextLocation}),He(void 0))},[d.isTransitioning,_e]);let Do=reactExports.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:Bs=>t.navigate(Bs),push:(Bs,th,pf)=>t.navigate(Bs,{state:th,preventScrollReset:pf?.preventScrollReset}),replace:(Bs,th,pf)=>t.navigate(Bs,{replace:!0,state:th,preventScrollReset:pf?.preventScrollReset})}),[t]),sr=t.basename||"/",Ko=reactExports.useMemo(()=>({router:t,navigator:Do,static:!1,basename:sr}),[t,Do,sr]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:Ko},reactExports.createElement(DataRouterStateContext.Provider,{value:r},reactExports.createElement(FetchersContext.Provider,{value:Xe.current},reactExports.createElement(ViewTransitionContext.Provider,{value:d},reactExports.createElement(Router,{basename:sr,location:r.location,navigationType:r.historyAction,navigator:Do},reactExports.createElement(MemoizedDataRoutes,{routes:t.routes,future:t.future,state:r})))))),null)}var MemoizedDataRoutes=reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:e,state:r}){return useRoutesImpl(t,void 0,r,e)}function Router({basename:t="/",children:e=null,location:r,navigationType:a="POP",navigator:l,static:u=!1}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),g=reactExports.useMemo(()=>({basename:d,navigator:l,static:u,future:{}}),[d,l,u]);typeof r=="string"&&(r=parsePath(r));let{pathname:E="/",search:P="",hash:Z="",state:me=null,key:_e="default"}=r,He=reactExports.useMemo(()=>{let Xe=stripBasename(E,d);return Xe==null?null:{location:{pathname:Xe,search:P,hash:Z,state:me,key:_e},navigationType:a}},[d,E,P,Z,me,_e,a]);return warning(He!=null,`<Router basename="${d}"> is not able to match the URL "${E}${P}${Z}" because it does not start with the basename, so the <Router> won't render anything.`),He==null?null:reactExports.createElement(NavigationContext.Provider,{value:g},reactExports.createElement(LocationContext.Provider,{children:e,value:He}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return t!=null&&typeof t.tagName=="string"}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,e){let r,a,l,u,d;if(isFormElement(t)){let g=t.getAttribute("action");a=g?stripBasename(g,e):null,r=t.getAttribute("method")||defaultMethod,l=getFormEncType(t.getAttribute("enctype"))||defaultEncType,u=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let g=t.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let E=t.getAttribute("formaction")||g.getAttribute("action");if(a=E?stripBasename(E,e):null,r=t.getAttribute("formmethod")||g.getAttribute("method")||defaultMethod,l=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(g.getAttribute("enctype"))||defaultEncType,u=new FormData(g,t),!isFormDataSubmitterSupported()){let{name:P,type:Z,value:me}=t;if(Z==="image"){let _e=P?`${P}.`:"";u.append(`${_e}x`,"0"),u.append(`${_e}y`,"0")}else P&&u.append(P,me)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=defaultMethod,a=null,l=defaultEncType,d=t}return u&&l==="text/plain"&&(d=u,u=void 0),{action:a,method:r.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function singleFetchUrl(t,e,r){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a.pathname==="/"?a.pathname=`_root.${r}`:e&&stripBasename(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function loadRouteModule(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,e,r){let a=await Promise.all(t.map(async l=>{let u=e.routes[l.route.id];if(u){let d=await loadRouteModule(u,r);return d.links?d.links():[]}return[]}));return dedupeLinkDescriptors(a.flat(1).filter(isHtmlLinkDescriptor).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function getNewMatchesForLinks(t,e,r,a,l,u){let d=(E,P)=>r[P]?E.route.id!==r[P].route.id:!0,g=(E,P)=>r[P].pathname!==E.pathname||r[P].route.path?.endsWith("*")&&r[P].params["*"]!==E.params["*"];return u==="assets"?e.filter((E,P)=>d(E,P)||g(E,P)):u==="data"?e.filter((E,P)=>{let Z=a.routes[E.route.id];if(!Z||!Z.hasLoader)return!1;if(d(E,P)||g(E,P))return!0;if(E.route.shouldRevalidate){let me=E.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:E.params,defaultShouldRevalidate:!0});if(typeof me=="boolean")return me}return!0}):[]}function getModuleLinkHrefs(t,e,{includeHydrateFallback:r}={}){return dedupeHrefs(t.map(a=>{let l=e.routes[a.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let e={},r=Object.keys(t).sort();for(let a of r)e[a]=t[a];return e}function dedupeLinkDescriptors(t,e){let r=new Set;return new Set(e),t.reduce((a,l)=>{let u=JSON.stringify(sortKeys(l));return r.has(u)||(r.add(u),a.push({key:u,link:l})),a},[])}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,e){let r=reactExports.useContext(FrameworkContext),[a,l]=reactExports.useState(!1),[u,d]=reactExports.useState(!1),{onFocus:g,onBlur:E,onMouseEnter:P,onMouseLeave:Z,onTouchStart:me}=e,_e=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&d(!0),t==="viewport"){let wt=sr=>{sr.forEach(Ko=>{d(Ko.isIntersecting)})},Do=new IntersectionObserver(wt,{threshold:.5});return _e.current&&Do.observe(_e.current),()=>{Do.disconnect()}}},[t]),reactExports.useEffect(()=>{if(a){let wt=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(wt)}}},[a]);let He=()=>{l(!0)},Xe=()=>{l(!1),d(!1)};return r?t!=="intent"?[u,_e,{}]:[u,_e,{onFocus:composeEventHandlers(g,He),onBlur:composeEventHandlers(E,Xe),onMouseEnter:composeEventHandlers(P,He),onMouseLeave:composeEventHandlers(Z,Xe),onTouchStart:composeEventHandlers(me,He)}]:[!1,_e,{}]}function composeEventHandlers(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function PrefetchPageLinks({page:t,...e}){let{router:r}=useDataRouterContext2(),a=reactExports.useMemo(()=>matchRoutes(r.routes,t,r.basename),[r.routes,t,r.basename]);return a?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:a,...e}):null}function useKeyedPrefetchLinks(t){let{manifest:e,routeModules:r}=useFrameworkContext(),[a,l]=reactExports.useState([]);return reactExports.useEffect(()=>{let u=!1;return getKeyedPrefetchLinks(t,e,r).then(d=>{u||l(d)}),()=>{u=!0}},[t,e,r]),a}function PrefetchPageLinksImpl({page:t,matches:e,...r}){let a=useLocation(),{manifest:l,routeModules:u}=useFrameworkContext(),{basename:d}=useDataRouterContext2(),{loaderData:g,matches:E}=useDataRouterStateContext(),P=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,E,l,a,"data"),[t,e,E,l,a]),Z=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,E,l,a,"assets"),[t,e,E,l,a]),me=reactExports.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let Xe=new Set,wt=!1;if(e.forEach(sr=>{let Ko=l.routes[sr.route.id];!Ko||!Ko.hasLoader||(!P.some(Bs=>Bs.route.id===sr.route.id)&&sr.route.id in g&&u[sr.route.id]?.shouldRevalidate||Ko.hasClientLoader?wt=!0:Xe.add(sr.route.id))}),Xe.size===0)return[];let Do=singleFetchUrl(t,d,"data");return wt&&Xe.size>0&&Do.searchParams.set("_routes",e.filter(sr=>Xe.has(sr.route.id)).map(sr=>sr.route.id).join(",")),[Do.pathname+Do.search]},[d,g,a,l,P,e,t,u]),_e=reactExports.useMemo(()=>getModuleLinkHrefs(Z,l),[Z,l]),He=useKeyedPrefetchLinks(Z);return reactExports.createElement(reactExports.Fragment,null,me.map(Xe=>reactExports.createElement("link",{key:Xe,rel:"prefetch",as:"fetch",href:Xe,...r})),_e.map(Xe=>reactExports.createElement("link",{key:Xe,rel:"modulepreload",href:Xe,...r})),He.map(({key:Xe,link:wt})=>reactExports.createElement("link",{key:Xe,...wt})))}function mergeRefs(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$1&&(window.__reactRouterVersion="7.7.1")}catch{}function createBrowserRouter(t,e){return createRouter({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:createBrowserHistory({window:e?.window}),hydrationData:parseHydrationData(),routes:t,mapRouteProperties,hydrationRouteProperties,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function parseHydrationData(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:deserializeErrors(t.errors)}),t}function deserializeErrors(t){if(!t)return null;let e=Object.entries(t),r={};for(let[a,l]of e)if(l&&l.__type==="RouteErrorResponse")r[a]=new ErrorResponseImpl(l.status,l.statusText,l.data,l.internal===!0);else if(l&&l.__type==="Error"){if(l.__subType){let u=window[l.__subType];if(typeof u=="function")try{let d=new u(l.message);d.stack="",r[a]=d}catch{}}if(r[a]==null){let u=new Error(l.message);u.stack="",r[a]=u}}else r[a]=l;return r}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:r="render",prefetch:a="none",relative:l,reloadDocument:u,replace:d,state:g,target:E,to:P,preventScrollReset:Z,viewTransition:me,..._e},He){let{basename:Xe}=reactExports.useContext(NavigationContext),wt=typeof P=="string"&&ABSOLUTE_URL_REGEX2.test(P),Do,sr=!1;if(typeof P=="string"&&wt&&(Do=P,isBrowser$1))try{let uf=new URL(window.location.href),li=P.startsWith("//")?new URL(uf.protocol+P):new URL(P),Vc=stripBasename(li.pathname,Xe);li.origin===uf.origin&&Vc!=null?P=Vc+li.search+li.hash:sr=!0}catch{warning(!1,`<Link to="${P}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Ko=useHref(P,{relative:l}),[Bs,th,pf]=usePrefetchBehavior(a,_e),_h=useLinkClickHandler(P,{replace:d,state:g,target:E,preventScrollReset:Z,relative:l,viewTransition:me});function cf(uf){e&&e(uf),uf.defaultPrevented||_h(uf)}let df=reactExports.createElement("a",{..._e,...pf,href:Do||Ko,onClick:sr||u?e:cf,ref:mergeRefs(He,th),target:E,"data-discover":!wt&&r==="render"?"true":void 0});return Bs&&!wt?reactExports.createElement(reactExports.Fragment,null,df,reactExports.createElement(PrefetchPageLinks,{page:Ko})):df});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:a="",end:l=!1,style:u,to:d,viewTransition:g,children:E,...P},Z){let me=useResolvedPath(d,{relative:P.relative}),_e=useLocation(),He=reactExports.useContext(DataRouterStateContext),{navigator:Xe,basename:wt}=reactExports.useContext(NavigationContext),Do=He!=null&&useViewTransitionState(me)&&g===!0,sr=Xe.encodeLocation?Xe.encodeLocation(me).pathname:me.pathname,Ko=_e.pathname,Bs=He&&He.navigation&&He.navigation.location?He.navigation.location.pathname:null;r||(Ko=Ko.toLowerCase(),Bs=Bs?Bs.toLowerCase():null,sr=sr.toLowerCase()),Bs&&wt&&(Bs=stripBasename(Bs,wt)||Bs);const th=sr!=="/"&&sr.endsWith("/")?sr.length-1:sr.length;let pf=Ko===sr||!l&&Ko.startsWith(sr)&&Ko.charAt(th)==="/",_h=Bs!=null&&(Bs===sr||!l&&Bs.startsWith(sr)&&Bs.charAt(sr.length)==="/"),cf={isActive:pf,isPending:_h,isTransitioning:Do},df=pf?e:void 0,uf;typeof a=="function"?uf=a(cf):uf=[a,pf?"active":null,_h?"pending":null,Do?"transitioning":null].filter(Boolean).join(" ");let li=typeof u=="function"?u(cf):u;return reactExports.createElement(Link,{...P,"aria-current":df,className:uf,ref:Z,style:li,to:d,viewTransition:g},typeof E=="function"?E(cf):E)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:a,replace:l,state:u,method:d=defaultMethod,action:g,onSubmit:E,relative:P,preventScrollReset:Z,viewTransition:me,..._e},He)=>{let Xe=useSubmit(),wt=useFormAction(g,{relative:P}),Do=d.toLowerCase()==="get"?"get":"post",sr=typeof g=="string"&&ABSOLUTE_URL_REGEX2.test(g),Ko=Bs=>{if(E&&E(Bs),Bs.defaultPrevented)return;Bs.preventDefault();let th=Bs.nativeEvent.submitter,pf=th?.getAttribute("formmethod")||d;Xe(th||Bs.currentTarget,{fetcherKey:e,method:pf,navigate:r,replace:l,state:u,relative:P,preventScrollReset:Z,viewTransition:me})};return reactExports.createElement("form",{ref:He,method:Do,action:wt,onSubmit:a?E:Ko,..._e,"data-discover":!sr&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError2(t)),e}function useLinkClickHandler(t,{target:e,replace:r,state:a,preventScrollReset:l,relative:u,viewTransition:d}={}){let g=useNavigate(),E=useLocation(),P=useResolvedPath(t,{relative:u});return reactExports.useCallback(Z=>{if(shouldProcessLinkClick(Z,e)){Z.preventDefault();let me=r!==void 0?r:createPath(E)===createPath(P);g(t,{replace:me,state:a,preventScrollReset:l,relative:u,viewTransition:d})}},[E,g,P,r,a,e,t,l,u,d])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),r=useRouteId();return reactExports.useCallback(async(a,l={})=>{let{action:u,method:d,encType:g,formData:E,body:P}=getFormSubmissionInfo(a,e);if(l.navigate===!1){let Z=l.fetcherKey||getUniqueFetcherId();await t.fetch(Z,r,l.action||u,{preventScrollReset:l.preventScrollReset,formData:E,body:P,formMethod:l.method||d,formEncType:l.encType||g,flushSync:l.flushSync})}else await t.navigate(l.action||u,{preventScrollReset:l.preventScrollReset,formData:E,body:P,formMethod:l.method||d,formEncType:l.encType||g,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,e,r])}function useFormAction(t,{relative:e}={}){let{basename:r}=reactExports.useContext(NavigationContext),a=reactExports.useContext(RouteContext);invariant$1(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),u={...useResolvedPath(t||".",{relative:e})},d=useLocation();if(t==null){u.search=d.search;let g=new URLSearchParams(u.search),E=g.getAll("index");if(E.some(Z=>Z==="")){g.delete("index"),E.filter(me=>me).forEach(me=>g.append("index",me));let Z=g.toString();u.search=Z?`?${Z}`:""}}return(!t||t===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:joinPaths([r,u.pathname])),createPath(u)}function useViewTransitionState(t,{relative:e}={}){let r=reactExports.useContext(ViewTransitionContext);invariant$1(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=useDataRouterContext3("useViewTransitionState"),l=useResolvedPath(t,{relative:e});if(!r.isTransitioning)return!1;let u=stripBasename(r.currentLocation.pathname,a)||r.currentLocation.pathname,d=stripBasename(r.nextLocation.pathname,a)||r.nextLocation.pathname;return matchPath(l.pathname,d)!=null||matchPath(l.pathname,u)!=null}var reactDomExports=requireReactDom();function RouterProvider2(t){return reactExports.createElement(RouterProvider,{flushSync:reactDomExports.flushSync,...t})}const crown="/assets/Rank6-Cr9dJ75F.png",getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(t){const e=[];let r=0;for(let a=0;a<t.length;a++){let l=t.charCodeAt(a);l<128?e[r++]=l:l<2048?(e[r++]=l>>6|192,e[r++]=l&63|128):(l&64512)===55296&&a+1<t.length&&(t.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++a)&1023),e[r++]=l>>18|240,e[r++]=l>>12&63|128,e[r++]=l>>6&63|128,e[r++]=l&63|128):(e[r++]=l>>12|224,e[r++]=l>>6&63|128,e[r++]=l&63|128)}return e},byteArrayToString=function(t){const e=[];let r=0,a=0;for(;r<t.length;){const l=t[r++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){const u=t[r++];e[a++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=t[r++],d=t[r++],g=t[r++],E=((l&7)<<18|(u&63)<<12|(d&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(E>>10)),e[a++]=String.fromCharCode(56320+(E&1023))}else{const u=t[r++],d=t[r++];e[a++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<t.length;l+=3){const u=t[l],d=l+1<t.length,g=d?t[l+1]:0,E=l+2<t.length,P=E?t[l+2]:0,Z=u>>2,me=(u&3)<<4|g>>4;let _e=(g&15)<<2|P>>6,He=P&63;E||(He=64,d||(_e=64)),a.push(r[Z],r[me],r[_e],r[He])}return a.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(stringToByteArray$1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):byteArrayToString(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<t.length;){const u=r[t.charAt(l++)],g=l<t.length?r[t.charAt(l)]:0;++l;const P=l<t.length?r[t.charAt(l)]:64;++l;const me=l<t.length?r[t.charAt(l)]:64;if(++l,u==null||g==null||P==null||me==null)throw new DecodeBase64StringError;const _e=u<<2|g>>4;if(a.push(_e),P!==64){const He=g<<4&240|P>>2;if(a.push(He),me!==64){const Xe=P<<6&192|me;a.push(Xe)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(t){const e=stringToByteArray$1(t);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(t){return base64Encode(t).replace(/\./g,"")},base64Decode=function(t){try{return base64.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const t=define_process_env_default.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&base64Decode(t[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},getDefaultEmulatorHost=t=>getDefaults()?.emulatorHosts?.[t],getDefaultEmulatorHostnameAndPort=t=>{const e=getDefaultEmulatorHost(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),a]:[e.substring(0,r),a]},getDefaultAppConfig=()=>getDefaults()?.config,getExperimentalSetting=t=>getDefaults()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},a=e||"demo-project",l=t.iat||0,u=t.sub||t.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...t};return[base64urlEncodeWithoutPadding(JSON.stringify(r)),base64urlEncodeWithoutPadding(JSON.stringify(d)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const t={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?t.emulator.push(e):t.prod.push(e);return t}function getOrCreateEl(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(t,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[t]===e||emulatorStatus[t]||previouslyDismissed)return;emulatorStatus[t]=e;function r(_e){return`__firebase__banner__${_e}`}const a="__firebase__banner",u=getEmulatorSummary().prod.length>0;function d(){const _e=document.getElementById(a);_e&&_e.remove()}function g(_e){_e.style.display="flex",_e.style.background="#7faaf0",_e.style.position="fixed",_e.style.bottom="5px",_e.style.left="5px",_e.style.padding=".5em",_e.style.borderRadius="5px",_e.style.alignItems="center"}function E(_e,He){_e.setAttribute("width","24"),_e.setAttribute("id",He),_e.setAttribute("height","24"),_e.setAttribute("viewBox","0 0 24 24"),_e.setAttribute("fill","none"),_e.style.marginLeft="-6px"}function P(){const _e=document.createElement("span");return _e.style.cursor="pointer",_e.style.marginLeft="16px",_e.style.fontSize="24px",_e.innerHTML=" &times;",_e.onclick=()=>{previouslyDismissed=!0,d()},_e}function Z(_e,He){_e.setAttribute("id",He),_e.innerText="Learn more",_e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_e.setAttribute("target","__blank"),_e.style.paddingLeft="5px",_e.style.textDecoration="underline"}function me(){const _e=getOrCreateEl(a),He=r("text"),Xe=document.getElementById(He)||document.createElement("span"),wt=r("learnmore"),Do=document.getElementById(wt)||document.createElement("a"),sr=r("preprendIcon"),Ko=document.getElementById(sr)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_e.created){const Bs=_e.element;g(Bs),Z(Do,wt);const th=P();E(Ko,sr),Bs.append(Ko,Xe,Do,th),document.body.appendChild(Bs)}u?(Xe.innerText="Preview backend disconnected.",Ko.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ko.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Xe.innerText="Preview backend running in this workspace."),Xe.setAttribute("id",He)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",me):me()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){const t=getDefaults()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const t=getUA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((t,e)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),r||self.indexedDB.deleteDatabase(a),t(!0)},l.onupgradeneeded=()=>{r=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,r,a){super(r),this.code=e,this.customData=a,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,r,a){this.service=e,this.serviceName=r,this.errors=a}create(e,...r){const a=r[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?replaceTemplate(u,a):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new FirebaseError(l,g,a)}}function replaceTemplate(t,e){return t.replace(PATTERN,(r,a)=>{const l=e[a];return l!=null?String(l):`<${a}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function deepEqual(t,e){if(t===e)return!0;const r=Object.keys(t),a=Object.keys(e);for(const l of r){if(!a.includes(l))return!1;const u=t[l],d=e[l];if(isObject$2(u)&&isObject$2(d)){if(!deepEqual(u,d))return!1}else if(u!==d)return!1}for(const l of a)if(!r.includes(l))return!1;return!0}function isObject$2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(t){const e=[];for(const[r,a]of Object.entries(t))Array.isArray(a)?a.forEach(l=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function querystringDecode(t){const e={};return t.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[l,u]=a.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function extractQuerystring(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function createSubscribe(t,e){const r=new ObserverProxy(t,e);return r.subscribe.bind(r)}class ObserverProxy{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,a){let l;if(e===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?l=e:l={next:e,error:r,complete:a},l.next===void 0&&(l.next=noop$1),l.error===void 0&&(l.error=noop$1),l.complete===void 0&&(l.complete=noop$1);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function noop$1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(t){return t&&t._delegate?t._delegate:t}class Component{constructor(e,r,a){this.name=e,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const a=new Deferred;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:r});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);try{const u=this.getOrInitializeService({instanceIdentifier:l});a.resolve(u)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[u,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&d.resolve(l)}return l}onInit(e,r){const a=this.normalizeInstanceIdentifier(r),l=this.onInitCallbacks.get(a)??new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,r){const a=this.onInitCallbacks.get(r);if(a)for(const l of a)try{l(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:r}),this.instances.set(e,a),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(t){return t===DEFAULT_ENTRY_NAME$1?void 0:t}function isComponentEager(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Provider(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(t,e,...r)=>{if(e<t.logLevel)return;const a=new Date().toISOString(),l=ConsoleMethod[e];if(l)console[l](`[${a}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(t,e)=>e.some(r=>t instanceof r);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(t){const e=new Promise((r,a)=>{const l=()=>{t.removeEventListener("success",u),t.removeEventListener("error",d)},u=()=>{r(wrap(t.result)),l()},d=()=>{a(t.error),l()};t.addEventListener("success",u),t.addEventListener("error",d)});return e.then(r=>{r instanceof IDBCursor&&cursorRequestMap.set(r,t)}).catch(()=>{}),reverseTransformCache.set(e,t),e}function cacheDonePromiseForTransaction(t){if(transactionDoneMap.has(t))return;const e=new Promise((r,a)=>{const l=()=>{t.removeEventListener("complete",u),t.removeEventListener("error",d),t.removeEventListener("abort",d)},u=()=>{r(),l()},d=()=>{a(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",u),t.addEventListener("error",d),t.addEventListener("abort",d)});transactionDoneMap.set(t,e)}let idbProxyTraps={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||transactionStoreNamesMap.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wrap(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps(t){idbProxyTraps=t(idbProxyTraps)}function wrapFunction(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const a=t.call(unwrap(this),e,...r);return transactionStoreNamesMap.set(a,e.sort?e.sort():[e]),wrap(a)}:getCursorAdvanceMethods().includes(t)?function(...e){return t.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(t.apply(unwrap(this),e))}}function transformCachableValue(t){return typeof t=="function"?wrapFunction(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction(t),instanceOfAny(t,getIdbProxyableTypes())?new Proxy(t,idbProxyTraps):t)}function wrap(t){if(t instanceof IDBRequest)return promisifyRequest(t);if(transformCache.has(t))return transformCache.get(t);const e=transformCachableValue(t);return e!==t&&(transformCache.set(t,e),reverseTransformCache.set(e,t)),e}const unwrap=t=>reverseTransformCache.get(t);function openDB(t,e,{blocked:r,upgrade:a,blocking:l,terminated:u}={}){const d=indexedDB.open(t,e),g=wrap(d);return a&&d.addEventListener("upgradeneeded",E=>{a(wrap(d.result),E.oldVersion,E.newVersion,wrap(d.transaction),E)}),r&&d.addEventListener("blocked",E=>r(E.oldVersion,E.newVersion,E)),g.then(E=>{u&&E.addEventListener("close",()=>u()),l&&E.addEventListener("versionchange",P=>l(P.oldVersion,P.newVersion,P))}).catch(()=>{}),g}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const r=e.replace(/FromIndex$/,""),a=e!==r,l=writeMethods.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(l||readMethods.includes(r)))return;const u=async function(d,...g){const E=this.transaction(d,l?"readwrite":"readonly");let P=E.store;return a&&(P=P.index(g.shift())),(await Promise.all([P[r](...g),l&&E.done]))[0]};return cachedMethods.set(e,u),u}replaceTraps(t=>({...t,get:(e,r,a)=>getMethod(e,r)||t.get(e,r,a),has:(e,r)=>!!getMethod(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(isVersionServiceProvider(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function isVersionServiceProvider(t){return t.getComponent()?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$4="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(t,e){try{t.container.addComponent(e)}catch(r){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function _registerComponent(t){const e=t.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,t);for(const r of _apps.values())_addComponent(r,t);for(const r of _serverApps.values())_addComponent(r,t);return!0}function _getProvider(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function _isFirebaseServerApp(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,r,a){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$4;function initializeApp(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const a={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...e},l=a.name;if(typeof l!="string"||!l)throw ERROR_FACTORY.create("bad-app-name",{appName:String(l)});if(r||(r=getDefaultAppConfig()),!r)throw ERROR_FACTORY.create("no-options");const u=_apps.get(l);if(u){if(deepEqual(r,u.options)&&deepEqual(a,u.config))return u;throw ERROR_FACTORY.create("duplicate-app",{appName:l})}const d=new ComponentContainer(l);for(const E of _components.values())d.addComponent(E);const g=new FirebaseAppImpl(r,a,d);return _apps.set(l,g),g}function getApp(t=DEFAULT_ENTRY_NAME){const e=_apps.get(t);if(!e&&t===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:t});return e}function registerVersion(t,e,r){let a=PLATFORM_LOG_STRING[t]??t;r&&(a+=`-${r}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(d.join(" "));return}_registerComponent(new Component(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(STORE_NAME)}catch(r){console.warn(r)}}}}).catch(t=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:t.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(t){try{const r=(await getDbPromise()).transaction(STORE_NAME),a=await r.objectStore(STORE_NAME).get(computeKey(t));return await r.done,a}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const r=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e?.message});logger.warn(r.message)}}}async function writeHeartbeatsToIndexedDB(t,e){try{const a=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await a.objectStore(STORE_NAME).put(e,computeKey(t)),await a.done}catch(r){if(r instanceof FirebaseError)logger.warn(r.message);else{const a=ERROR_FACTORY.create("idb-set",{originalErrorMessage:r?.message});logger.warn(a.message)}}}function computeKey(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=getUTCDateString();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const l=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){logger.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=getUTCDateString(),{heartbeatsToSend:r,unsentEntries:a}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),l=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return logger.warn(e),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(t,e=MAX_HEADER_BYTES){const r=[];let a=t.slice();for(const l of t){const u=r.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),countBytes(r)>e){u.dates.pop();break}}else if(r.push({agent:l.agent,dates:[l.date]}),countBytes(r)>e){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await readHeartbeatsFromIndexedDB(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function countBytes(t){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}function getEarliestHeartbeatIdx(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let a=1;a<t.length;a++)t[a].date<r&&(r=t[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(t){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,t),registerVersion(name$q,version$1$1,"esm2020"),registerVersion("fire-js","")}registerCoreComponents("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=120*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StorageError extends FirebaseError{constructor(e,r,a=0){super(prependCode(e),`Firebase Storage: ${r} (${prependCode(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return prependCode(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(t){return"storage/"+t}function unknown(){const t="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,t)}function objectNotFound(t){return new StorageError(StorageErrorCode.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function quotaExceeded(t){return new StorageError(StorageErrorCode.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function unauthenticated(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new StorageError(StorageErrorCode.UNAUTHENTICATED,t)}function unauthorizedApp(){return new StorageError(StorageErrorCode.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function unauthorized(t){return new StorageError(StorageErrorCode.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(t){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+t+"'.")}function invalidDefaultBucket(t){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function noDefaultBucket(){return new StorageError(StorageErrorCode.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CONFIG_STORAGE_BUCKET_KEY+"' property when initializing the app?")}function noDownloadURL(){return new StorageError(StorageErrorCode.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function invalidArgument(t){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,t)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(t){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function internalError(t){throw new StorageError(StorageErrorCode.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Location{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let a;try{a=Location.makeFromUrl(e,r)}catch{return new Location(e,"")}if(a.path==="")return a;throw invalidDefaultBucket(e)}static makeFromUrl(e,r){let a=null;const l="([A-Za-z0-9.\\-_]+)";function u(th){th.path.charAt(th.path.length-1)==="/"&&(th.path_=th.path_.slice(0,-1))}const d="(/(.*))?$",g=new RegExp("^gs://"+l+d,"i"),E={bucket:1,path:3};function P(th){th.path_=decodeURIComponent(th.path)}const Z="v[A-Za-z0-9_]+",me=r.replace(/[.]/g,"\\."),_e="(/([^?#]*).*)?$",He=new RegExp(`^https?://${me}/${Z}/b/${l}/o${_e}`,"i"),Xe={bucket:1,path:3},wt=r===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":r,Do="([^?#]*)",sr=new RegExp(`^https?://${wt}/${l}/${Do}`,"i"),Bs=[{regex:g,indices:E,postModify:u},{regex:He,indices:Xe,postModify:P},{regex:sr,indices:{bucket:1,path:2},postModify:P}];for(let th=0;th<Bs.length;th++){const pf=Bs[th],_h=pf.regex.exec(e);if(_h){const cf=_h[pf.indices.bucket];let df=_h[pf.indices.path];df||(df=""),a=new Location(cf,df),pf.postModify(a);break}}if(a==null)throw invalidUrl(e);return a}}class FailRequest{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start(t,e,r){let a=1,l=null,u=null,d=!1,g=0;function E(){return g===2}let P=!1;function Z(...Do){P||(P=!0,e.apply(null,Do))}function me(Do){l=setTimeout(()=>{l=null,t(He,E())},Do)}function _e(){u&&clearTimeout(u)}function He(Do,...sr){if(P){_e();return}if(Do){_e(),Z.call(null,Do,...sr);return}if(E()||d){_e(),Z.call(null,Do,...sr);return}a<64&&(a*=2);let Bs;g===1?(g=2,Bs=0):Bs=(a+Math.random())*1e3,me(Bs)}let Xe=!1;function wt(Do){Xe||(Xe=!0,_e(),!P&&(l!==null?(Do||(g=2),clearTimeout(l),me(0)):Do||(g=1)))}return me(0),u=setTimeout(()=>{d=!0,wt(!0)},r),wt}function stop(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(t){return t!==void 0}function isNonArrayObject(t){return typeof t=="object"&&!Array.isArray(t)}function isString(t){return typeof t=="string"||t instanceof String}function validateNumber(t,e,r,a){if(a<e)throw invalidArgument(`Invalid value for '${t}'. Expected ${e} or greater.`);if(a>r)throw invalidArgument(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function makeUrl(t,e,r){let a=e;return r==null&&(a=`https://${e}`),`${r}://${a}/v0${t}`}function makeQueryString(t){const e=encodeURIComponent;let r="?";for(const a in t)if(t.hasOwnProperty(a)){const l=e(a)+"="+e(t[a]);r=r+l+"&"}return r=r.slice(0,-1),r}var ErrorCode$1;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ErrorCode$1||(ErrorCode$1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isRetryStatusCode(t,e){const r=t>=500&&t<600,l=[408,429].indexOf(t)!==-1,u=e.indexOf(t)!==-1;return r||l||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NetworkRequest{constructor(e,r,a,l,u,d,g,E,P,Z,me,_e=!0,He=!1){this.url_=e,this.method_=r,this.headers_=a,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=g,this.errorCallback_=E,this.timeout_=P,this.progressCallback_=Z,this.connectionFactory_=me,this.retry=_e,this.isUsingEmulator=He,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Xe,wt)=>{this.resolve_=Xe,this.reject_=wt,this.start_()})}start_(){const e=(a,l)=>{if(l){a(!1,new RequestEndStatus(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=g=>{const E=g.loaded,P=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(E,P)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const g=u.getErrorCode()===ErrorCode$1.NO_ERROR,E=u.getStatus();if(!g||isRetryStatusCode(E,this.additionalRetryCodes_)&&this.retry){const Z=u.getErrorCode()===ErrorCode$1.ABORT;a(!1,new RequestEndStatus(!1,null,Z));return}const P=this.successCodes_.indexOf(E)!==-1;a(!0,new RequestEndStatus(P,u))})},r=(a,l)=>{const u=this.resolve_,d=this.reject_,g=l.connection;if(l.wasSuccessCode)try{const E=this.callback_(g,g.getResponse());isJustDef(E)?u(E):u()}catch(E){d(E)}else if(g!==null){const E=unknown();E.serverResponse=g.getErrorText(),this.errorCallback_?d(this.errorCallback_(g,E)):d(E)}else if(l.canceled){const E=this.appDelete_?appDeleted():canceled();d(E)}else{const E=retryLimitExceeded();d(E)}};this.canceled_?r(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(e,r,a){this.wasSuccessCode=e,this.connection=r,this.canceled=!!a}}function addAuthHeader_(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function addVersionHeader_(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function addGmpidHeader_(t,e){e&&(t["X-Firebase-GMPID"]=e)}function addAppCheckHeader_(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function makeRequest(t,e,r,a,l,u,d=!0,g=!1){const E=makeQueryString(t.urlParams),P=t.url+E,Z=Object.assign({},t.headers);return addGmpidHeader_(Z,e),addAuthHeader_(Z,r),addVersionHeader_(Z,u),addAppCheckHeader_(Z,a),new NetworkRequest(P,t.method,Z,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,l,d,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonObjectOrNull(t){let e;try{e=JSON.parse(t)}catch{return null}return isNonArrayObject(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function child(t,e){const r=e.split("/").filter(a=>a.length>0).join("/");return t.length===0?r:t+"/"+r}function lastComponent(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noXform_(t,e){return e}class Mapping{constructor(e,r,a,l){this.server=e,this.local=r||e,this.writable=!!a,this.xform=l||noXform_}}let mappings_=null;function xformPath(t){return!isString(t)||t.length<2?t:lastComponent(t)}function getMappings(){if(mappings_)return mappings_;const t=[];t.push(new Mapping("bucket")),t.push(new Mapping("generation")),t.push(new Mapping("metageneration")),t.push(new Mapping("name","fullPath",!0));function e(u,d){return xformPath(d)}const r=new Mapping("name");r.xform=e,t.push(r);function a(u,d){return d!==void 0?Number(d):d}const l=new Mapping("size");return l.xform=a,t.push(l),t.push(new Mapping("timeCreated")),t.push(new Mapping("updated")),t.push(new Mapping("md5Hash",null,!0)),t.push(new Mapping("cacheControl",null,!0)),t.push(new Mapping("contentDisposition",null,!0)),t.push(new Mapping("contentEncoding",null,!0)),t.push(new Mapping("contentLanguage",null,!0)),t.push(new Mapping("contentType",null,!0)),t.push(new Mapping("metadata","customMetadata",!0)),mappings_=t,mappings_}function addRef(t,e){function r(){const a=t.bucket,l=t.fullPath,u=new Location(a,l);return e._makeStorageReference(u)}Object.defineProperty(t,"ref",{get:r})}function fromResource(t,e,r){const a={};a.type="file";const l=r.length;for(let u=0;u<l;u++){const d=r[u];a[d.local]=d.xform(a,e[d.server])}return addRef(a,t),a}function fromResourceString(t,e,r){const a=jsonObjectOrNull(e);return a===null?null:fromResource(t,a,r)}function downloadUrlFromResourceString(t,e,r,a){const l=jsonObjectOrNull(e);if(l===null||!isString(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(P=>{const Z=t.bucket,me=t.fullPath,_e="/b/"+d(Z)+"/o/"+d(me),He=makeUrl(_e,r,a),Xe=makeQueryString({alt:"media",token:P});return He+Xe})[0]}class RequestInfo{constructor(e,r,a,l){this.url=e,this.method=r,this.handler=a,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function handlerCheck(t){if(!t)throw unknown()}function downloadUrlHandler(t,e){function r(a,l){const u=fromResourceString(t,l,e);return handlerCheck(u!==null),downloadUrlFromResourceString(u,l,t.host,t._protocol)}return r}function sharedErrorHandler(t){function e(r,a){let l;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?l=unauthorizedApp():l=unauthenticated():r.getStatus()===402?l=quotaExceeded(t.bucket):r.getStatus()===403?l=unauthorized(t.path):l=a,l.status=r.getStatus(),l.serverResponse=a.serverResponse,l}return e}function objectErrorHandler(t){const e=sharedErrorHandler(t);function r(a,l){let u=e(a,l);return a.getStatus()===404&&(u=objectNotFound(t.path)),u.serverResponse=l.serverResponse,u}return r}function getDownloadUrl(t,e,r){const a=e.fullServerUrl(),l=makeUrl(a,t.host,t._protocol),u="GET",d=t.maxOperationRetryTime,g=new RequestInfo(l,u,downloadUrlHandler(t,r),d);return g.errorHandler=objectErrorHandler(e),g}class XhrConnection{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ErrorCode$1.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ErrorCode$1.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ErrorCode$1.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,a,l,u){if(this.sent_)throw internalError("cannot .send() more than once");if(isCloudWorkstation(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw internalError("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw internalError("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XhrTextConnection extends XhrConnection{initXhr(){this.xhr_.responseType="text"}}function newTextConnection(){return new XhrTextConnection}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(e,r){this._service=e,r instanceof Location?this._location=r:this._location=Location.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Reference(e,r)}get root(){const e=new Location(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const e=parent(this._location.path);if(e===null)return null;const r=new Location(this._location.bucket,e);return new Reference(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw invalidRootOperation(e)}}function getDownloadURL$1(t){t._throwIfRoot("getDownloadURL");const e=getDownloadUrl(t.storage,t._location,getMappings());return t.storage.makeRequestWithTokens(e,newTextConnection).then(r=>{if(r===null)throw noDownloadURL();return r})}function _getChild$1(t,e){const r=child(t._location.path,e),a=new Location(t._location.bucket,r);return new Reference(t.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isUrl(t){return/^[A-Za-z]+:\/\//.test(t)}function refFromURL(t,e){return new Reference(t,e)}function refFromPath(t,e){if(t instanceof FirebaseStorageImpl){const r=t;if(r._bucket==null)throw noDefaultBucket();const a=new Reference(r,r._bucket);return e!=null?refFromPath(a,e):a}else return e!==void 0?_getChild$1(t,e):t}function ref$1(t,e){if(e&&isUrl(e)){if(t instanceof FirebaseStorageImpl)return refFromURL(t,e);throw invalidArgument("To use ref(service, url), the first argument must be a Storage instance.")}else return refFromPath(t,e)}function extractBucket(t,e){const r=e?.[CONFIG_STORAGE_BUCKET_KEY];return r==null?null:Location.makeFromBucketSpec(r,t)}function connectStorageEmulator$1(t,e,r,a={}){t.host=`${e}:${r}`;const l=isCloudWorkstation(e);l&&(pingServer(`https://${t.host}/b`),updateEmulatorBanner("Storage",!0)),t._isUsingEmulator=!0,t._protocol=l?"https":"http";const{mockUserToken:u}=a;u&&(t._overrideAuthToken=typeof u=="string"?u:createMockUserToken(u,t.app.options.projectId))}class FirebaseStorageImpl{constructor(e,r,a,l,u,d=!1){this.app=e,this._authProvider=r,this._appCheckProvider=a,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,l!=null?this._bucket=Location.makeFromBucketSpec(l,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,e):this._bucket=extractBucket(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Reference(this,e)}_makeRequest(e,r,a,l,u=!0){if(this._deleted)return new FailRequest(appDeleted());{const d=makeRequest(e,this._appId,a,l,r,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,r){const[a,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,a,l).getPromise()}}const name$2="@firebase/storage",version$3="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STORAGE_TYPE="storage";function getDownloadURL(t){return t=getModularInstance(t),getDownloadURL$1(t)}function ref(t,e){return t=getModularInstance(t),ref$1(t,e)}function getStorage(t=getApp(),e){t=getModularInstance(t);const a=_getProvider(t,STORAGE_TYPE).getImmediate({identifier:e}),l=getDefaultEmulatorHostnameAndPort("storage");return l&&connectStorageEmulator(a,...l),a}function connectStorageEmulator(t,e,r,a={}){connectStorageEmulator$1(t,e,r,a)}function factory(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),a=t.getProvider("auth-internal"),l=t.getProvider("app-check-internal");return new FirebaseStorageImpl(r,a,l,e,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),registerVersion(name$2,version$3,""),registerVersion(name$2,version$3,"esm2020")}registerStorage();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(cf,df){function uf(){}uf.prototype=df.prototype,cf.D=df.prototype,cf.prototype=new uf,cf.prototype.constructor=cf,cf.C=function(li,Vc,Rs){for(var qc=Array(arguments.length-2),Qp=2;Qp<arguments.length;Qp++)qc[Qp-2]=arguments[Qp];return df.prototype[Vc].apply(li,qc)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(cf,df,uf){uf||(uf=0);var li=Array(16);if(typeof df=="string")for(var Vc=0;16>Vc;++Vc)li[Vc]=df.charCodeAt(uf++)|df.charCodeAt(uf++)<<8|df.charCodeAt(uf++)<<16|df.charCodeAt(uf++)<<24;else for(Vc=0;16>Vc;++Vc)li[Vc]=df[uf++]|df[uf++]<<8|df[uf++]<<16|df[uf++]<<24;df=cf.g[0],uf=cf.g[1],Vc=cf.g[2];var Rs=cf.g[3],qc=df+(Rs^uf&(Vc^Rs))+li[0]+3614090360&4294967295;df=uf+(qc<<7&4294967295|qc>>>25),qc=Rs+(Vc^df&(uf^Vc))+li[1]+3905402710&4294967295,Rs=df+(qc<<12&4294967295|qc>>>20),qc=Vc+(uf^Rs&(df^uf))+li[2]+606105819&4294967295,Vc=Rs+(qc<<17&4294967295|qc>>>15),qc=uf+(df^Vc&(Rs^df))+li[3]+3250441966&4294967295,uf=Vc+(qc<<22&4294967295|qc>>>10),qc=df+(Rs^uf&(Vc^Rs))+li[4]+4118548399&4294967295,df=uf+(qc<<7&4294967295|qc>>>25),qc=Rs+(Vc^df&(uf^Vc))+li[5]+1200080426&4294967295,Rs=df+(qc<<12&4294967295|qc>>>20),qc=Vc+(uf^Rs&(df^uf))+li[6]+2821735955&4294967295,Vc=Rs+(qc<<17&4294967295|qc>>>15),qc=uf+(df^Vc&(Rs^df))+li[7]+4249261313&4294967295,uf=Vc+(qc<<22&4294967295|qc>>>10),qc=df+(Rs^uf&(Vc^Rs))+li[8]+1770035416&4294967295,df=uf+(qc<<7&4294967295|qc>>>25),qc=Rs+(Vc^df&(uf^Vc))+li[9]+2336552879&4294967295,Rs=df+(qc<<12&4294967295|qc>>>20),qc=Vc+(uf^Rs&(df^uf))+li[10]+4294925233&4294967295,Vc=Rs+(qc<<17&4294967295|qc>>>15),qc=uf+(df^Vc&(Rs^df))+li[11]+2304563134&4294967295,uf=Vc+(qc<<22&4294967295|qc>>>10),qc=df+(Rs^uf&(Vc^Rs))+li[12]+1804603682&4294967295,df=uf+(qc<<7&4294967295|qc>>>25),qc=Rs+(Vc^df&(uf^Vc))+li[13]+4254626195&4294967295,Rs=df+(qc<<12&4294967295|qc>>>20),qc=Vc+(uf^Rs&(df^uf))+li[14]+2792965006&4294967295,Vc=Rs+(qc<<17&4294967295|qc>>>15),qc=uf+(df^Vc&(Rs^df))+li[15]+1236535329&4294967295,uf=Vc+(qc<<22&4294967295|qc>>>10),qc=df+(Vc^Rs&(uf^Vc))+li[1]+4129170786&4294967295,df=uf+(qc<<5&4294967295|qc>>>27),qc=Rs+(uf^Vc&(df^uf))+li[6]+3225465664&4294967295,Rs=df+(qc<<9&4294967295|qc>>>23),qc=Vc+(df^uf&(Rs^df))+li[11]+643717713&4294967295,Vc=Rs+(qc<<14&4294967295|qc>>>18),qc=uf+(Rs^df&(Vc^Rs))+li[0]+3921069994&4294967295,uf=Vc+(qc<<20&4294967295|qc>>>12),qc=df+(Vc^Rs&(uf^Vc))+li[5]+3593408605&4294967295,df=uf+(qc<<5&4294967295|qc>>>27),qc=Rs+(uf^Vc&(df^uf))+li[10]+38016083&4294967295,Rs=df+(qc<<9&4294967295|qc>>>23),qc=Vc+(df^uf&(Rs^df))+li[15]+3634488961&4294967295,Vc=Rs+(qc<<14&4294967295|qc>>>18),qc=uf+(Rs^df&(Vc^Rs))+li[4]+3889429448&4294967295,uf=Vc+(qc<<20&4294967295|qc>>>12),qc=df+(Vc^Rs&(uf^Vc))+li[9]+568446438&4294967295,df=uf+(qc<<5&4294967295|qc>>>27),qc=Rs+(uf^Vc&(df^uf))+li[14]+3275163606&4294967295,Rs=df+(qc<<9&4294967295|qc>>>23),qc=Vc+(df^uf&(Rs^df))+li[3]+4107603335&4294967295,Vc=Rs+(qc<<14&4294967295|qc>>>18),qc=uf+(Rs^df&(Vc^Rs))+li[8]+1163531501&4294967295,uf=Vc+(qc<<20&4294967295|qc>>>12),qc=df+(Vc^Rs&(uf^Vc))+li[13]+2850285829&4294967295,df=uf+(qc<<5&4294967295|qc>>>27),qc=Rs+(uf^Vc&(df^uf))+li[2]+4243563512&4294967295,Rs=df+(qc<<9&4294967295|qc>>>23),qc=Vc+(df^uf&(Rs^df))+li[7]+1735328473&4294967295,Vc=Rs+(qc<<14&4294967295|qc>>>18),qc=uf+(Rs^df&(Vc^Rs))+li[12]+2368359562&4294967295,uf=Vc+(qc<<20&4294967295|qc>>>12),qc=df+(uf^Vc^Rs)+li[5]+4294588738&4294967295,df=uf+(qc<<4&4294967295|qc>>>28),qc=Rs+(df^uf^Vc)+li[8]+2272392833&4294967295,Rs=df+(qc<<11&4294967295|qc>>>21),qc=Vc+(Rs^df^uf)+li[11]+1839030562&4294967295,Vc=Rs+(qc<<16&4294967295|qc>>>16),qc=uf+(Vc^Rs^df)+li[14]+4259657740&4294967295,uf=Vc+(qc<<23&4294967295|qc>>>9),qc=df+(uf^Vc^Rs)+li[1]+2763975236&4294967295,df=uf+(qc<<4&4294967295|qc>>>28),qc=Rs+(df^uf^Vc)+li[4]+1272893353&4294967295,Rs=df+(qc<<11&4294967295|qc>>>21),qc=Vc+(Rs^df^uf)+li[7]+4139469664&4294967295,Vc=Rs+(qc<<16&4294967295|qc>>>16),qc=uf+(Vc^Rs^df)+li[10]+3200236656&4294967295,uf=Vc+(qc<<23&4294967295|qc>>>9),qc=df+(uf^Vc^Rs)+li[13]+681279174&4294967295,df=uf+(qc<<4&4294967295|qc>>>28),qc=Rs+(df^uf^Vc)+li[0]+3936430074&4294967295,Rs=df+(qc<<11&4294967295|qc>>>21),qc=Vc+(Rs^df^uf)+li[3]+3572445317&4294967295,Vc=Rs+(qc<<16&4294967295|qc>>>16),qc=uf+(Vc^Rs^df)+li[6]+76029189&4294967295,uf=Vc+(qc<<23&4294967295|qc>>>9),qc=df+(uf^Vc^Rs)+li[9]+3654602809&4294967295,df=uf+(qc<<4&4294967295|qc>>>28),qc=Rs+(df^uf^Vc)+li[12]+3873151461&4294967295,Rs=df+(qc<<11&4294967295|qc>>>21),qc=Vc+(Rs^df^uf)+li[15]+530742520&4294967295,Vc=Rs+(qc<<16&4294967295|qc>>>16),qc=uf+(Vc^Rs^df)+li[2]+3299628645&4294967295,uf=Vc+(qc<<23&4294967295|qc>>>9),qc=df+(Vc^(uf|~Rs))+li[0]+4096336452&4294967295,df=uf+(qc<<6&4294967295|qc>>>26),qc=Rs+(uf^(df|~Vc))+li[7]+1126891415&4294967295,Rs=df+(qc<<10&4294967295|qc>>>22),qc=Vc+(df^(Rs|~uf))+li[14]+2878612391&4294967295,Vc=Rs+(qc<<15&4294967295|qc>>>17),qc=uf+(Rs^(Vc|~df))+li[5]+4237533241&4294967295,uf=Vc+(qc<<21&4294967295|qc>>>11),qc=df+(Vc^(uf|~Rs))+li[12]+1700485571&4294967295,df=uf+(qc<<6&4294967295|qc>>>26),qc=Rs+(uf^(df|~Vc))+li[3]+2399980690&4294967295,Rs=df+(qc<<10&4294967295|qc>>>22),qc=Vc+(df^(Rs|~uf))+li[10]+4293915773&4294967295,Vc=Rs+(qc<<15&4294967295|qc>>>17),qc=uf+(Rs^(Vc|~df))+li[1]+2240044497&4294967295,uf=Vc+(qc<<21&4294967295|qc>>>11),qc=df+(Vc^(uf|~Rs))+li[8]+1873313359&4294967295,df=uf+(qc<<6&4294967295|qc>>>26),qc=Rs+(uf^(df|~Vc))+li[15]+4264355552&4294967295,Rs=df+(qc<<10&4294967295|qc>>>22),qc=Vc+(df^(Rs|~uf))+li[6]+2734768916&4294967295,Vc=Rs+(qc<<15&4294967295|qc>>>17),qc=uf+(Rs^(Vc|~df))+li[13]+1309151649&4294967295,uf=Vc+(qc<<21&4294967295|qc>>>11),qc=df+(Vc^(uf|~Rs))+li[4]+4149444226&4294967295,df=uf+(qc<<6&4294967295|qc>>>26),qc=Rs+(uf^(df|~Vc))+li[11]+3174756917&4294967295,Rs=df+(qc<<10&4294967295|qc>>>22),qc=Vc+(df^(Rs|~uf))+li[2]+718787259&4294967295,Vc=Rs+(qc<<15&4294967295|qc>>>17),qc=uf+(Rs^(Vc|~df))+li[9]+3951481745&4294967295,cf.g[0]=cf.g[0]+df&4294967295,cf.g[1]=cf.g[1]+(Vc+(qc<<21&4294967295|qc>>>11))&4294967295,cf.g[2]=cf.g[2]+Vc&4294967295,cf.g[3]=cf.g[3]+Rs&4294967295}a.prototype.u=function(cf,df){df===void 0&&(df=cf.length);for(var uf=df-this.blockSize,li=this.B,Vc=this.h,Rs=0;Rs<df;){if(Vc==0)for(;Rs<=uf;)l(this,cf,Rs),Rs+=this.blockSize;if(typeof cf=="string"){for(;Rs<df;)if(li[Vc++]=cf.charCodeAt(Rs++),Vc==this.blockSize){l(this,li),Vc=0;break}}else for(;Rs<df;)if(li[Vc++]=cf[Rs++],Vc==this.blockSize){l(this,li),Vc=0;break}}this.h=Vc,this.o+=df},a.prototype.v=function(){var cf=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);cf[0]=128;for(var df=1;df<cf.length-8;++df)cf[df]=0;var uf=8*this.o;for(df=cf.length-8;df<cf.length;++df)cf[df]=uf&255,uf/=256;for(this.u(cf),cf=Array(16),df=uf=0;4>df;++df)for(var li=0;32>li;li+=8)cf[uf++]=this.g[df]>>>li&255;return cf};function u(cf,df){var uf=g;return Object.prototype.hasOwnProperty.call(uf,cf)?uf[cf]:uf[cf]=df(cf)}function d(cf,df){this.h=df;for(var uf=[],li=!0,Vc=cf.length-1;0<=Vc;Vc--){var Rs=cf[Vc]|0;li&&Rs==df||(uf[Vc]=Rs,li=!1)}this.g=uf}var g={};function E(cf){return-128<=cf&&128>cf?u(cf,function(df){return new d([df|0],0>df?-1:0)}):new d([cf|0],0>cf?-1:0)}function P(cf){if(isNaN(cf)||!isFinite(cf))return me;if(0>cf)return Do(P(-cf));for(var df=[],uf=1,li=0;cf>=uf;li++)df[li]=cf/uf|0,uf*=4294967296;return new d(df,0)}function Z(cf,df){if(cf.length==0)throw Error("number format error: empty string");if(df=df||10,2>df||36<df)throw Error("radix out of range: "+df);if(cf.charAt(0)=="-")return Do(Z(cf.substring(1),df));if(0<=cf.indexOf("-"))throw Error('number format error: interior "-" character');for(var uf=P(Math.pow(df,8)),li=me,Vc=0;Vc<cf.length;Vc+=8){var Rs=Math.min(8,cf.length-Vc),qc=parseInt(cf.substring(Vc,Vc+Rs),df);8>Rs?(Rs=P(Math.pow(df,Rs)),li=li.j(Rs).add(P(qc))):(li=li.j(uf),li=li.add(P(qc)))}return li}var me=E(0),_e=E(1),He=E(16777216);t=d.prototype,t.m=function(){if(wt(this))return-Do(this).m();for(var cf=0,df=1,uf=0;uf<this.g.length;uf++){var li=this.i(uf);cf+=(0<=li?li:4294967296+li)*df,df*=4294967296}return cf},t.toString=function(cf){if(cf=cf||10,2>cf||36<cf)throw Error("radix out of range: "+cf);if(Xe(this))return"0";if(wt(this))return"-"+Do(this).toString(cf);for(var df=P(Math.pow(cf,6)),uf=this,li="";;){var Vc=th(uf,df).g;uf=sr(uf,Vc.j(df));var Rs=((0<uf.g.length?uf.g[0]:uf.h)>>>0).toString(cf);if(uf=Vc,Xe(uf))return Rs+li;for(;6>Rs.length;)Rs="0"+Rs;li=Rs+li}},t.i=function(cf){return 0>cf?0:cf<this.g.length?this.g[cf]:this.h};function Xe(cf){if(cf.h!=0)return!1;for(var df=0;df<cf.g.length;df++)if(cf.g[df]!=0)return!1;return!0}function wt(cf){return cf.h==-1}t.l=function(cf){return cf=sr(this,cf),wt(cf)?-1:Xe(cf)?0:1};function Do(cf){for(var df=cf.g.length,uf=[],li=0;li<df;li++)uf[li]=~cf.g[li];return new d(uf,~cf.h).add(_e)}t.abs=function(){return wt(this)?Do(this):this},t.add=function(cf){for(var df=Math.max(this.g.length,cf.g.length),uf=[],li=0,Vc=0;Vc<=df;Vc++){var Rs=li+(this.i(Vc)&65535)+(cf.i(Vc)&65535),qc=(Rs>>>16)+(this.i(Vc)>>>16)+(cf.i(Vc)>>>16);li=qc>>>16,Rs&=65535,qc&=65535,uf[Vc]=qc<<16|Rs}return new d(uf,uf[uf.length-1]&-2147483648?-1:0)};function sr(cf,df){return cf.add(Do(df))}t.j=function(cf){if(Xe(this)||Xe(cf))return me;if(wt(this))return wt(cf)?Do(this).j(Do(cf)):Do(Do(this).j(cf));if(wt(cf))return Do(this.j(Do(cf)));if(0>this.l(He)&&0>cf.l(He))return P(this.m()*cf.m());for(var df=this.g.length+cf.g.length,uf=[],li=0;li<2*df;li++)uf[li]=0;for(li=0;li<this.g.length;li++)for(var Vc=0;Vc<cf.g.length;Vc++){var Rs=this.i(li)>>>16,qc=this.i(li)&65535,Qp=cf.i(Vc)>>>16,n1=cf.i(Vc)&65535;uf[2*li+2*Vc]+=qc*n1,Ko(uf,2*li+2*Vc),uf[2*li+2*Vc+1]+=Rs*n1,Ko(uf,2*li+2*Vc+1),uf[2*li+2*Vc+1]+=qc*Qp,Ko(uf,2*li+2*Vc+1),uf[2*li+2*Vc+2]+=Rs*Qp,Ko(uf,2*li+2*Vc+2)}for(li=0;li<df;li++)uf[li]=uf[2*li+1]<<16|uf[2*li];for(li=df;li<2*df;li++)uf[li]=0;return new d(uf,0)};function Ko(cf,df){for(;(cf[df]&65535)!=cf[df];)cf[df+1]+=cf[df]>>>16,cf[df]&=65535,df++}function Bs(cf,df){this.g=cf,this.h=df}function th(cf,df){if(Xe(df))throw Error("division by zero");if(Xe(cf))return new Bs(me,me);if(wt(cf))return df=th(Do(cf),df),new Bs(Do(df.g),Do(df.h));if(wt(df))return df=th(cf,Do(df)),new Bs(Do(df.g),df.h);if(30<cf.g.length){if(wt(cf)||wt(df))throw Error("slowDivide_ only works with positive integers.");for(var uf=_e,li=df;0>=li.l(cf);)uf=pf(uf),li=pf(li);var Vc=_h(uf,1),Rs=_h(li,1);for(li=_h(li,2),uf=_h(uf,2);!Xe(li);){var qc=Rs.add(li);0>=qc.l(cf)&&(Vc=Vc.add(uf),Rs=qc),li=_h(li,1),uf=_h(uf,1)}return df=sr(cf,Vc.j(df)),new Bs(Vc,df)}for(Vc=me;0<=cf.l(df);){for(uf=Math.max(1,Math.floor(cf.m()/df.m())),li=Math.ceil(Math.log(uf)/Math.LN2),li=48>=li?1:Math.pow(2,li-48),Rs=P(uf),qc=Rs.j(df);wt(qc)||0<qc.l(cf);)uf-=li,Rs=P(uf),qc=Rs.j(df);Xe(Rs)&&(Rs=_e),Vc=Vc.add(Rs),cf=sr(cf,qc)}return new Bs(Vc,cf)}t.A=function(cf){return th(this,cf).h},t.and=function(cf){for(var df=Math.max(this.g.length,cf.g.length),uf=[],li=0;li<df;li++)uf[li]=this.i(li)&cf.i(li);return new d(uf,this.h&cf.h)},t.or=function(cf){for(var df=Math.max(this.g.length,cf.g.length),uf=[],li=0;li<df;li++)uf[li]=this.i(li)|cf.i(li);return new d(uf,this.h|cf.h)},t.xor=function(cf){for(var df=Math.max(this.g.length,cf.g.length),uf=[],li=0;li<df;li++)uf[li]=this.i(li)^cf.i(li);return new d(uf,this.h^cf.h)};function pf(cf){for(var df=cf.g.length+1,uf=[],li=0;li<df;li++)uf[li]=cf.i(li)<<1|cf.i(li-1)>>>31;return new d(uf,cf.h)}function _h(cf,df){var uf=df>>5;df%=32;for(var li=cf.g.length-uf,Vc=[],Rs=0;Rs<li;Rs++)Vc[Rs]=0<df?cf.i(Rs+uf)>>>df|cf.i(Rs+uf+1)<<32-df:cf.i(Rs+uf);return new d(Vc,cf.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,Md5=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=P,d.fromString=Z,Integer=d}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(Os,t1,c1){return Os==Array.prototype||Os==Object.prototype||(Os[t1]=c1.value),Os};function r(Os){Os=[typeof globalThis=="object"&&globalThis,Os,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var t1=0;t1<Os.length;++t1){var c1=Os[t1];if(c1&&c1.Math==Math)return c1}throw Error("Cannot find global object")}var a=r(this);function l(Os,t1){if(t1)e:{var c1=a;Os=Os.split(".");for(var k1=0;k1<Os.length-1;k1++){var f2=Os[k1];if(!(f2 in c1))break e;c1=c1[f2]}Os=Os[Os.length-1],k1=c1[Os],t1=t1(k1),t1!=k1&&t1!=null&&e(c1,Os,{configurable:!0,writable:!0,value:t1})}}function u(Os,t1){Os instanceof String&&(Os+="");var c1=0,k1=!1,f2={next:function(){if(!k1&&c1<Os.length){var L2=c1++;return{value:t1(L2,Os[L2]),done:!1}}return k1=!0,{done:!0,value:void 0}}};return f2[Symbol.iterator]=function(){return f2},f2}l("Array.prototype.values",function(Os){return Os||function(){return u(this,function(t1,c1){return c1})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function E(Os){var t1=typeof Os;return t1=t1!="object"?t1:Os?Array.isArray(Os)?"array":t1:"null",t1=="array"||t1=="object"&&typeof Os.length=="number"}function P(Os){var t1=typeof Os;return t1=="object"&&Os!=null||t1=="function"}function Z(Os,t1,c1){return Os.call.apply(Os.bind,arguments)}function me(Os,t1,c1){if(!Os)throw Error();if(2<arguments.length){var k1=Array.prototype.slice.call(arguments,2);return function(){var f2=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(f2,k1),Os.apply(t1,f2)}}return function(){return Os.apply(t1,arguments)}}function _e(Os,t1,c1){return _e=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Z:me,_e.apply(null,arguments)}function He(Os,t1){var c1=Array.prototype.slice.call(arguments,1);return function(){var k1=c1.slice();return k1.push.apply(k1,arguments),Os.apply(this,k1)}}function Xe(Os,t1){function c1(){}c1.prototype=t1.prototype,Os.aa=t1.prototype,Os.prototype=new c1,Os.prototype.constructor=Os,Os.Qb=function(k1,f2,L2){for(var g4=Array(arguments.length-2),C3=2;C3<arguments.length;C3++)g4[C3-2]=arguments[C3];return t1.prototype[f2].apply(k1,g4)}}function wt(Os){const t1=Os.length;if(0<t1){const c1=Array(t1);for(let k1=0;k1<t1;k1++)c1[k1]=Os[k1];return c1}return[]}function Do(Os,t1){for(let c1=1;c1<arguments.length;c1++){const k1=arguments[c1];if(E(k1)){const f2=Os.length||0,L2=k1.length||0;Os.length=f2+L2;for(let g4=0;g4<L2;g4++)Os[f2+g4]=k1[g4]}else Os.push(k1)}}class sr{constructor(t1,c1){this.i=t1,this.j=c1,this.h=0,this.g=null}get(){let t1;return 0<this.h?(this.h--,t1=this.g,this.g=t1.next,t1.next=null):t1=this.i(),t1}}function Ko(Os){return/^[\s\xa0]*$/.test(Os)}function Bs(){var Os=g.navigator;return Os&&(Os=Os.userAgent)?Os:""}function th(Os){return th[" "](Os),Os}th[" "]=function(){};var pf=Bs().indexOf("Gecko")!=-1&&!(Bs().toLowerCase().indexOf("webkit")!=-1&&Bs().indexOf("Edge")==-1)&&!(Bs().indexOf("Trident")!=-1||Bs().indexOf("MSIE")!=-1)&&Bs().indexOf("Edge")==-1;function _h(Os,t1,c1){for(const k1 in Os)t1.call(c1,Os[k1],k1,Os)}function cf(Os,t1){for(const c1 in Os)t1.call(void 0,Os[c1],c1,Os)}function df(Os){const t1={};for(const c1 in Os)t1[c1]=Os[c1];return t1}const uf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function li(Os,t1){let c1,k1;for(let f2=1;f2<arguments.length;f2++){k1=arguments[f2];for(c1 in k1)Os[c1]=k1[c1];for(let L2=0;L2<uf.length;L2++)c1=uf[L2],Object.prototype.hasOwnProperty.call(k1,c1)&&(Os[c1]=k1[c1])}}function Vc(Os){var t1=1;Os=Os.split(":");const c1=[];for(;0<t1&&Os.length;)c1.push(Os.shift()),t1--;return Os.length&&c1.push(Os.join(":")),c1}function Rs(Os){g.setTimeout(()=>{throw Os},0)}function qc(){var Os=ff;let t1=null;return Os.g&&(t1=Os.g,Os.g=Os.g.next,Os.g||(Os.h=null),t1.next=null),t1}class Qp{constructor(){this.h=this.g=null}add(t1,c1){const k1=n1.get();k1.set(t1,c1),this.h?this.h.next=k1:this.g=k1,this.h=k1}}var n1=new sr(()=>new wh,Os=>Os.reset());class wh{constructor(){this.next=this.g=this.h=null}set(t1,c1){this.h=t1,this.g=c1,this.next=null}reset(){this.next=this.g=this.h=null}}let gf,yh=!1,ff=new Qp,e1=()=>{const Os=g.Promise.resolve(void 0);gf=()=>{Os.then(s1)}};var s1=()=>{for(var Os;Os=qc();){try{Os.h.call(Os.g)}catch(c1){Rs(c1)}var t1=n1;t1.j(Os),100>t1.h&&(t1.h++,Os.next=t1.g,t1.g=Os)}yh=!1};function b1(){this.s=this.s,this.C=this.C}b1.prototype.s=!1,b1.prototype.ma=function(){this.s||(this.s=!0,this.N())},b1.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _1(Os,t1){this.type=Os,this.g=this.target=t1,this.defaultPrevented=!1}_1.prototype.h=function(){this.defaultPrevented=!0};var V1=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var Os=!1,t1=Object.defineProperty({},"passive",{get:function(){Os=!0}});try{const c1=()=>{};g.addEventListener("test",c1,t1),g.removeEventListener("test",c1,t1)}catch{}return Os}();function I1(Os,t1){if(_1.call(this,Os?Os.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,Os){var c1=this.type=Os.type,k1=Os.changedTouches&&Os.changedTouches.length?Os.changedTouches[0]:null;if(this.target=Os.target||Os.srcElement,this.g=t1,t1=Os.relatedTarget){if(pf){e:{try{th(t1.nodeName);var f2=!0;break e}catch{}f2=!1}f2||(t1=null)}}else c1=="mouseover"?t1=Os.fromElement:c1=="mouseout"&&(t1=Os.toElement);this.relatedTarget=t1,k1?(this.clientX=k1.clientX!==void 0?k1.clientX:k1.pageX,this.clientY=k1.clientY!==void 0?k1.clientY:k1.pageY,this.screenX=k1.screenX||0,this.screenY=k1.screenY||0):(this.clientX=Os.clientX!==void 0?Os.clientX:Os.pageX,this.clientY=Os.clientY!==void 0?Os.clientY:Os.pageY,this.screenX=Os.screenX||0,this.screenY=Os.screenY||0),this.button=Os.button,this.key=Os.key||"",this.ctrlKey=Os.ctrlKey,this.altKey=Os.altKey,this.shiftKey=Os.shiftKey,this.metaKey=Os.metaKey,this.pointerId=Os.pointerId||0,this.pointerType=typeof Os.pointerType=="string"?Os.pointerType:i2[Os.pointerType]||"",this.state=Os.state,this.i=Os,Os.defaultPrevented&&I1.aa.h.call(this)}}Xe(I1,_1);var i2={2:"touch",3:"pen",4:"mouse"};I1.prototype.h=function(){I1.aa.h.call(this);var Os=this.i;Os.preventDefault?Os.preventDefault():Os.returnValue=!1};var R2="closure_listenable_"+(1e6*Math.random()|0),F2=0;function X1(Os,t1,c1,k1,f2){this.listener=Os,this.proxy=null,this.src=t1,this.type=c1,this.capture=!!k1,this.ha=f2,this.key=++F2,this.da=this.fa=!1}function W2(Os){Os.da=!0,Os.listener=null,Os.proxy=null,Os.src=null,Os.ha=null}function N2(Os){this.src=Os,this.g={},this.h=0}N2.prototype.add=function(Os,t1,c1,k1,f2){var L2=Os.toString();Os=this.g[L2],Os||(Os=this.g[L2]=[],this.h++);var g4=q2(Os,t1,k1,f2);return-1<g4?(t1=Os[g4],c1||(t1.fa=!1)):(t1=new X1(t1,this.src,L2,!!k1,f2),t1.fa=c1,Os.push(t1)),t1};function V2(Os,t1){var c1=t1.type;if(c1 in Os.g){var k1=Os.g[c1],f2=Array.prototype.indexOf.call(k1,t1,void 0),L2;(L2=0<=f2)&&Array.prototype.splice.call(k1,f2,1),L2&&(W2(t1),Os.g[c1].length==0&&(delete Os.g[c1],Os.h--))}}function q2(Os,t1,c1,k1){for(var f2=0;f2<Os.length;++f2){var L2=Os[f2];if(!L2.da&&L2.listener==t1&&L2.capture==!!c1&&L2.ha==k1)return f2}return-1}var B2="closure_lm_"+(1e6*Math.random()|0),K2={};function S2(Os,t1,c1,k1,f2){if(Array.isArray(t1)){for(var L2=0;L2<t1.length;L2++)S2(Os,t1[L2],c1,k1,f2);return null}return c1=i1(c1),Os&&Os[R2]?Os.K(t1,c1,P(k1)?!!k1.capture:!1,f2):E1(Os,t1,c1,!1,k1,f2)}function E1(Os,t1,c1,k1,f2,L2){if(!t1)throw Error("Invalid event type");var g4=P(f2)?!!f2.capture:!!f2,C3=n2(Os);if(C3||(Os[B2]=C3=new N2(Os)),c1=C3.add(t1,c1,k1,g4,L2),c1.proxy)return c1;if(k1=F1(),c1.proxy=k1,k1.src=Os,k1.listener=c1,Os.addEventListener)V1||(f2=g4),f2===void 0&&(f2=!1),Os.addEventListener(t1.toString(),k1,f2);else if(Os.attachEvent)Os.attachEvent(J1(t1.toString()),k1);else if(Os.addListener&&Os.removeListener)Os.addListener(k1);else throw Error("addEventListener and attachEvent are unavailable.");return c1}function F1(){function Os(c1){return t1.call(Os.src,Os.listener,c1)}const t1=E2;return Os}function K1(Os,t1,c1,k1,f2){if(Array.isArray(t1))for(var L2=0;L2<t1.length;L2++)K1(Os,t1[L2],c1,k1,f2);else k1=P(k1)?!!k1.capture:!!k1,c1=i1(c1),Os&&Os[R2]?(Os=Os.i,t1=String(t1).toString(),t1 in Os.g&&(L2=Os.g[t1],c1=q2(L2,c1,k1,f2),-1<c1&&(W2(L2[c1]),Array.prototype.splice.call(L2,c1,1),L2.length==0&&(delete Os.g[t1],Os.h--)))):Os&&(Os=n2(Os))&&(t1=Os.g[t1.toString()],Os=-1,t1&&(Os=q2(t1,c1,k1,f2)),(c1=-1<Os?t1[Os]:null)&&N1(c1))}function N1(Os){if(typeof Os!="number"&&Os&&!Os.da){var t1=Os.src;if(t1&&t1[R2])V2(t1.i,Os);else{var c1=Os.type,k1=Os.proxy;t1.removeEventListener?t1.removeEventListener(c1,k1,Os.capture):t1.detachEvent?t1.detachEvent(J1(c1),k1):t1.addListener&&t1.removeListener&&t1.removeListener(k1),(c1=n2(t1))?(V2(c1,Os),c1.h==0&&(c1.src=null,t1[B2]=null)):W2(Os)}}}function J1(Os){return Os in K2?K2[Os]:K2[Os]="on"+Os}function E2(Os,t1){if(Os.da)Os=!0;else{t1=new I1(t1,this);var c1=Os.listener,k1=Os.ha||Os.src;Os.fa&&N1(Os),Os=c1.call(k1,t1)}return Os}function n2(Os){return Os=Os[B2],Os instanceof N2?Os:null}var D1="__closure_events_fn_"+(1e9*Math.random()>>>0);function i1(Os){return typeof Os=="function"?Os:(Os[D1]||(Os[D1]=function(t1){return Os.handleEvent(t1)}),Os[D1])}function g1(){b1.call(this),this.i=new N2(this),this.M=this,this.F=null}Xe(g1,b1),g1.prototype[R2]=!0,g1.prototype.removeEventListener=function(Os,t1,c1,k1){K1(this,Os,t1,c1,k1)};function u1(Os,t1){var c1,k1=Os.F;if(k1)for(c1=[];k1;k1=k1.F)c1.push(k1);if(Os=Os.M,k1=t1.type||t1,typeof t1=="string")t1=new _1(t1,Os);else if(t1 instanceof _1)t1.target=t1.target||Os;else{var f2=t1;t1=new _1(k1,Os),li(t1,f2)}if(f2=!0,c1)for(var L2=c1.length-1;0<=L2;L2--){var g4=t1.g=c1[L2];f2=L1(g4,k1,!0,t1)&&f2}if(g4=t1.g=Os,f2=L1(g4,k1,!0,t1)&&f2,f2=L1(g4,k1,!1,t1)&&f2,c1)for(L2=0;L2<c1.length;L2++)g4=t1.g=c1[L2],f2=L1(g4,k1,!1,t1)&&f2}g1.prototype.N=function(){if(g1.aa.N.call(this),this.i){var Os=this.i,t1;for(t1 in Os.g){for(var c1=Os.g[t1],k1=0;k1<c1.length;k1++)W2(c1[k1]);delete Os.g[t1],Os.h--}}this.F=null},g1.prototype.K=function(Os,t1,c1,k1){return this.i.add(String(Os),t1,!1,c1,k1)},g1.prototype.L=function(Os,t1,c1,k1){return this.i.add(String(Os),t1,!0,c1,k1)};function L1(Os,t1,c1,k1){if(t1=Os.i.g[String(t1)],!t1)return!0;t1=t1.concat();for(var f2=!0,L2=0;L2<t1.length;++L2){var g4=t1[L2];if(g4&&!g4.da&&g4.capture==c1){var C3=g4.listener,n6=g4.ha||g4.src;g4.fa&&V2(Os.i,g4),f2=C3.call(n6,k1)!==!1&&f2}}return f2&&!k1.defaultPrevented}function B1(Os,t1,c1){if(typeof Os=="function")c1&&(Os=_e(Os,c1));else if(Os&&typeof Os.handleEvent=="function")Os=_e(Os.handleEvent,Os);else throw Error("Invalid listener argument");return 2147483647<Number(t1)?-1:g.setTimeout(Os,t1||0)}function Q1(Os){Os.g=B1(()=>{Os.g=null,Os.i&&(Os.i=!1,Q1(Os))},Os.l);const t1=Os.h;Os.h=null,Os.m.apply(null,t1)}class Z1 extends b1{constructor(t1,c1){super(),this.m=t1,this.l=c1,this.h=null,this.i=!1,this.g=null}j(t1){this.h=arguments,this.g?this.i=!0:Q1(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function A1(Os){b1.call(this),this.h=Os,this.g={}}Xe(A1,b1);var a2=[];function v2(Os){_h(Os.g,function(t1,c1){this.g.hasOwnProperty(c1)&&N1(t1)},Os),Os.g={}}A1.prototype.N=function(){A1.aa.N.call(this),v2(this)},A1.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var A2=g.JSON.stringify,l2=g.JSON.parse,x2=class{stringify(Os){return g.JSON.stringify(Os,void 0)}parse(Os){return g.JSON.parse(Os,void 0)}};function u2(){}u2.prototype.h=null;function s2(Os){return Os.h||(Os.h=Os.i())}function j2(){}var h2={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function k2(){_1.call(this,"d")}Xe(k2,_1);function a4(){_1.call(this,"c")}Xe(a4,_1);var n4={},o4=null;function P4(){return o4=o4||new g1}n4.La="serverreachability";function v4(Os){_1.call(this,n4.La,Os)}Xe(v4,_1);function P1(Os){const t1=P4();u1(t1,new v4(t1))}n4.STAT_EVENT="statevent";function z1(Os,t1){_1.call(this,n4.STAT_EVENT,Os),this.stat=t1}Xe(z1,_1);function e2(Os){const t1=P4();u1(t1,new z1(t1,Os))}n4.Ma="timingevent";function b2(Os,t1){_1.call(this,n4.Ma,Os),this.size=t1}Xe(b2,_1);function P2(Os,t1){if(typeof Os!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){Os()},t1)}function c2(){this.g=!0}c2.prototype.xa=function(){this.g=!1};function $2(Os,t1,c1,k1,f2,L2){Os.info(function(){if(Os.g)if(L2)for(var g4="",C3=L2.split("&"),n6=0;n6<C3.length;n6++){var E3=C3[n6].split("=");if(1<E3.length){var Q4=E3[0];E3=E3[1];var P6=Q4.split("_");g4=2<=P6.length&&P6[1]=="type"?g4+(Q4+"="+E3+"&"):g4+(Q4+"=redacted&")}}else g4=null;else g4=L2;return"XMLHTTP REQ ("+k1+") [attempt "+f2+"]: "+t1+`
`+c1+`
`+g4})}function Z2(Os,t1,c1,k1,f2,L2,g4){Os.info(function(){return"XMLHTTP RESP ("+k1+") [ attempt "+f2+"]: "+t1+`
`+c1+`
`+L2+" "+g4})}function Ym(Os,t1,c1,k1){Os.info(function(){return"XMLHTTP TEXT ("+t1+"): "+a1(Os,c1)+(k1?" "+k1:"")})}function o1(Os,t1){Os.info(function(){return"TIMEOUT: "+t1})}c2.prototype.info=function(){};function a1(Os,t1){if(!Os.g)return t1;if(!t1)return null;try{var c1=JSON.parse(t1);if(c1){for(Os=0;Os<c1.length;Os++)if(Array.isArray(c1[Os])){var k1=c1[Os];if(!(2>k1.length)){var f2=k1[1];if(Array.isArray(f2)&&!(1>f2.length)){var L2=f2[0];if(L2!="noop"&&L2!="stop"&&L2!="close")for(var g4=1;g4<f2.length;g4++)f2[g4]=""}}}}return A2(c1)}catch{return t1}}var l1={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},w1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},h1;function C1(){}Xe(C1,u2),C1.prototype.g=function(){return new XMLHttpRequest},C1.prototype.i=function(){return{}},h1=new C1;function q1(Os,t1,c1,k1){this.j=Os,this.i=t1,this.l=c1,this.R=k1||1,this.U=new A1(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $1}function $1(){this.i=null,this.g="",this.h=!1}var W1={},Y1={};function _2(Os,t1,c1){Os.L=1,Os.v=r1(G6(t1)),Os.m=c1,Os.P=!0,O2(Os,null)}function O2(Os,t1){Os.F=Date.now(),l4(Os),Os.A=G6(Os.v);var c1=Os.A,k1=Os.R;Array.isArray(k1)||(k1=[String(k1)]),$4(c1.i,"t",k1),Os.C=0,c1=Os.j.J,Os.h=new $1,Os.g=K7(Os.j,c1?t1:null,!Os.m),0<Os.O&&(Os.M=new Z1(_e(Os.Y,Os,Os.g),Os.O)),t1=Os.U,c1=Os.g,k1=Os.ca;var f2="readystatechange";Array.isArray(f2)||(f2&&(a2[0]=f2.toString()),f2=a2);for(var L2=0;L2<f2.length;L2++){var g4=S2(c1,f2[L2],k1||t1.handleEvent,!1,t1.h||t1);if(!g4)break;t1.g[g4.key]=g4}t1=Os.H?df(Os.H):{},Os.m?(Os.u||(Os.u="POST"),t1["Content-Type"]="application/x-www-form-urlencoded",Os.g.ea(Os.A,Os.u,Os.m,t1)):(Os.u="GET",Os.g.ea(Os.A,Os.u,null,t1)),P1(),$2(Os.i,Os.u,Os.A,Os.l,Os.R,Os.m)}q1.prototype.ca=function(Os){Os=Os.target;const t1=this.M;t1&&r6(Os)==3?t1.j():this.Y(Os)},q1.prototype.Y=function(Os){try{if(Os==this.g)e:{const P6=r6(this.g);var t1=this.g.Ba();const s5=this.g.Z();if(!(3>P6)&&(P6!=3||this.g&&(this.h.h||this.g.oa()||d5(this.g)))){this.J||P6!=4||t1==7||(t1==8||0>=s5?P1(3):P1(2)),h3(this);var c1=this.g.Z();this.X=c1;t:if(u4(this)){var k1=d5(this.g);Os="";var f2=k1.length,L2=r6(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){y4(this),s3(this);var g4="";break t}this.h.i=new g.TextDecoder}for(t1=0;t1<f2;t1++)this.h.h=!0,Os+=this.h.i.decode(k1[t1],{stream:!(L2&&t1==f2-1)});k1.length=0,this.h.g+=Os,this.C=0,g4=this.h.g}else g4=this.g.oa();if(this.o=c1==200,Z2(this.i,this.u,this.A,this.l,this.R,P6,c1),this.o){if(this.T&&!this.K){t:{if(this.g){var C3,n6=this.g;if((C3=n6.g?n6.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ko(C3)){var E3=C3;break t}}E3=null}if(c1=E3)Ym(this.i,this.l,c1,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,r4(this,c1);else{this.o=!1,this.s=3,e2(12),y4(this),s3(this);break e}}if(this.P){c1=!0;let An;for(;!this.J&&this.C<g4.length;)if(An=p4(this,g4),An==Y1){P6==4&&(this.s=4,e2(14),c1=!1),Ym(this.i,this.l,null,"[Incomplete Response]");break}else if(An==W1){this.s=4,e2(15),Ym(this.i,this.l,g4,"[Invalid Chunk]"),c1=!1;break}else Ym(this.i,this.l,An,null),r4(this,An);if(u4(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),P6!=4||g4.length!=0||this.h.h||(this.s=1,e2(16),c1=!1),this.o=this.o&&c1,!c1)Ym(this.i,this.l,g4,"[Invalid Chunked Response]"),y4(this),s3(this);else if(0<g4.length&&!this.W){this.W=!0;var Q4=this.j;Q4.g==this&&Q4.ba&&!Q4.M&&(Q4.j.info("Great, no buffering proxy detected. Bytes received: "+g4.length),H3(Q4),Q4.M=!0,e2(11))}}else Ym(this.i,this.l,g4,null),r4(this,g4);P6==4&&y4(this),this.o&&!this.J&&(P6==4?ev(this.j,this):(this.o=!1,l4(this)))}else Rv(this.g),c1==400&&0<g4.indexOf("Unknown SID")?(this.s=3,e2(12)):(this.s=0,e2(13)),y4(this),s3(this)}}}catch{}finally{}};function u4(Os){return Os.g?Os.u=="GET"&&Os.L!=2&&Os.j.Ca:!1}function p4(Os,t1){var c1=Os.C,k1=t1.indexOf(`
`,c1);return k1==-1?Y1:(c1=Number(t1.substring(c1,k1)),isNaN(c1)?W1:(k1+=1,k1+c1>t1.length?Y1:(t1=t1.slice(k1,k1+c1),Os.C=k1+c1,t1)))}q1.prototype.cancel=function(){this.J=!0,y4(this)};function l4(Os){Os.S=Date.now()+Os.I,A4(Os,Os.I)}function A4(Os,t1){if(Os.B!=null)throw Error("WatchDog timer not null");Os.B=P2(_e(Os.ba,Os),t1)}function h3(Os){Os.B&&(g.clearTimeout(Os.B),Os.B=null)}q1.prototype.ba=function(){this.B=null;const Os=Date.now();0<=Os-this.S?(o1(this.i,this.A),this.L!=2&&(P1(),e2(17)),y4(this),this.s=2,s3(this)):A4(this,this.S-Os)};function s3(Os){Os.j.G==0||Os.J||ev(Os.j,Os)}function y4(Os){h3(Os);var t1=Os.M;t1&&typeof t1.ma=="function"&&t1.ma(),Os.M=null,v2(Os.U),Os.g&&(t1=Os.g,Os.g=null,t1.abort(),t1.ma())}function r4(Os,t1){try{var c1=Os.j;if(c1.G!=0&&(c1.g==Os||H2(c1.h,Os))){if(!Os.K&&H2(c1.h,Os)&&c1.G==3){try{var k1=c1.Da.g.parse(t1)}catch{k1=null}if(Array.isArray(k1)&&k1.length==3){var f2=k1;if(f2[0]==0){e:if(!c1.u){if(c1.g)if(c1.g.F+3e3<Os.F)j5(c1),a5(c1);else break e;O5(c1),e2(18)}}else c1.za=f2[1],0<c1.za-c1.T&&37500>f2[2]&&c1.F&&c1.v==0&&!c1.C&&(c1.C=P2(_e(c1.Za,c1),6e3));if(1>=C4(c1.h)&&c1.ca){try{c1.ca()}catch{}c1.ca=void 0}}else O3(c1,11)}else if((Os.K||c1.g==Os)&&j5(c1),!Ko(t1))for(f2=c1.Da.g.parse(t1),t1=0;t1<f2.length;t1++){let E3=f2[t1];if(c1.T=E3[0],E3=E3[1],c1.G==2)if(E3[0]=="c"){c1.K=E3[1],c1.ia=E3[2];const Q4=E3[3];Q4!=null&&(c1.la=Q4,c1.j.info("VER="+c1.la));const P6=E3[4];P6!=null&&(c1.Aa=P6,c1.j.info("SVER="+c1.Aa));const s5=E3[5];s5!=null&&typeof s5=="number"&&0<s5&&(k1=1.5*s5,c1.L=k1,c1.j.info("backChannelRequestTimeoutMs_="+k1)),k1=c1;const An=Os.g;if(An){const eh=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eh){var L2=k1.h;L2.g||eh.indexOf("spdy")==-1&&eh.indexOf("quic")==-1&&eh.indexOf("h2")==-1||(L2.j=L2.l,L2.g=new Set,L2.h&&(x1(L2,L2.h),L2.h=null))}if(k1.D){const m1=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;m1&&(k1.ya=m1,hf(k1.I,k1.D,m1))}}c1.G=3,c1.l&&c1.l.ua(),c1.ba&&(c1.R=Date.now()-Os.F,c1.j.info("Handshake RTT: "+c1.R+"ms")),k1=c1;var g4=Os;if(k1.qa=G7(k1,k1.J?k1.ia:null,k1.W),g4.K){A3(k1.h,g4);var C3=g4,n6=k1.L;n6&&(C3.I=n6),C3.B&&(h3(C3),l4(C3)),k1.g=g4}else y3(k1);0<c1.i.length&&x6(c1)}else E3[0]!="stop"&&E3[0]!="close"||O3(c1,7);else c1.G==3&&(E3[0]=="stop"||E3[0]=="close"?E3[0]=="stop"?O3(c1,7):W6(c1):E3[0]!="noop"&&c1.l&&c1.l.ta(E3),c1.v=0)}}P1(4)}catch{}}var z4=class{constructor(Os,t1){this.g=Os,this.map=t1}};function e4(Os){this.l=Os||10,g.PerformanceNavigationTiming?(Os=g.performance.getEntriesByType("navigation"),Os=0<Os.length&&(Os[0].nextHopProtocol=="hq"||Os[0].nextHopProtocol=="h2")):Os=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=Os?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function O4(Os){return Os.h?!0:Os.g?Os.g.size>=Os.j:!1}function C4(Os){return Os.h?1:Os.g?Os.g.size:0}function H2(Os,t1){return Os.h?Os.h==t1:Os.g?Os.g.has(t1):!1}function x1(Os,t1){Os.g?Os.g.add(t1):Os.h=t1}function A3(Os,t1){Os.h&&Os.h==t1?Os.h=null:Os.g&&Os.g.has(t1)&&Os.g.delete(t1)}e4.prototype.cancel=function(){if(this.i=V6(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const Os of this.g.values())Os.cancel();this.g.clear()}};function V6(Os){if(Os.h!=null)return Os.i.concat(Os.h.D);if(Os.g!=null&&Os.g.size!==0){let t1=Os.i;for(const c1 of Os.g.values())t1=t1.concat(c1.D);return t1}return wt(Os.i)}function K4(Os){if(Os.V&&typeof Os.V=="function")return Os.V();if(typeof Map<"u"&&Os instanceof Map||typeof Set<"u"&&Os instanceof Set)return Array.from(Os.values());if(typeof Os=="string")return Os.split("");if(E(Os)){for(var t1=[],c1=Os.length,k1=0;k1<c1;k1++)t1.push(Os[k1]);return t1}t1=[],c1=0;for(k1 in Os)t1[c1++]=Os[k1];return t1}function c3(Os){if(Os.na&&typeof Os.na=="function")return Os.na();if(!Os.V||typeof Os.V!="function"){if(typeof Map<"u"&&Os instanceof Map)return Array.from(Os.keys());if(!(typeof Set<"u"&&Os instanceof Set)){if(E(Os)||typeof Os=="string"){var t1=[];Os=Os.length;for(var c1=0;c1<Os;c1++)t1.push(c1);return t1}t1=[],c1=0;for(const k1 in Os)t1[c1++]=k1;return t1}}}function b4(Os,t1){if(Os.forEach&&typeof Os.forEach=="function")Os.forEach(t1,void 0);else if(E(Os)||typeof Os=="string")Array.prototype.forEach.call(Os,t1,void 0);else for(var c1=c3(Os),k1=K4(Os),f2=k1.length,L2=0;L2<f2;L2++)t1.call(void 0,k1[L2],c1&&c1[L2],Os)}var Y4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function z3(Os,t1){if(Os){Os=Os.split("&");for(var c1=0;c1<Os.length;c1++){var k1=Os[c1].indexOf("="),f2=null;if(0<=k1){var L2=Os[c1].substring(0,k1);f2=Os[c1].substring(k1+1)}else L2=Os[c1];t1(L2,f2?decodeURIComponent(f2.replace(/\+/g," ")):"")}}}function d6(Os){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,Os instanceof d6){this.h=Os.h,H4(this,Os.j),this.o=Os.o,this.g=Os.g,De(this,Os.s),this.l=Os.l;var t1=Os.i,c1=new z2;c1.i=t1.i,t1.g&&(c1.g=new Map(t1.g),c1.h=t1.h),Fc(this,c1),this.m=Os.m}else Os&&(t1=String(Os).match(Y4))?(this.h=!1,H4(this,t1[1]||"",!0),this.o=d1(t1[2]||""),this.g=d1(t1[3]||"",!0),De(this,t1[4]),this.l=d1(t1[5]||"",!0),Fc(this,t1[6]||"",!0),this.m=d1(t1[7]||"")):(this.h=!1,this.i=new z2(null,this.h))}d6.prototype.toString=function(){var Os=[],t1=this.j;t1&&Os.push(y1(t1,O1,!0),":");var c1=this.g;return(c1||t1=="file")&&(Os.push("//"),(t1=this.o)&&Os.push(y1(t1,O1,!0),"@"),Os.push(encodeURIComponent(String(c1)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c1=this.s,c1!=null&&Os.push(":",String(c1))),(c1=this.l)&&(this.g&&c1.charAt(0)!="/"&&Os.push("/"),Os.push(y1(c1,c1.charAt(0)=="/"?T2:m2,!0))),(c1=this.i.toString())&&Os.push("?",c1),(c1=this.m)&&Os.push("#",y1(c1,d4)),Os.join("")};function G6(Os){return new d6(Os)}function H4(Os,t1,c1){Os.j=c1?d1(t1,!0):t1,Os.j&&(Os.j=Os.j.replace(/:$/,""))}function De(Os,t1){if(t1){if(t1=Number(t1),isNaN(t1)||0>t1)throw Error("Bad port number "+t1);Os.s=t1}else Os.s=null}function Fc(Os,t1,c1){t1 instanceof z2?(Os.i=t1,X2(Os.i,Os.h)):(c1||(t1=y1(t1,w2)),Os.i=new z2(t1,Os.h))}function hf(Os,t1,c1){Os.i.set(t1,c1)}function r1(Os){return hf(Os,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),Os}function d1(Os,t1){return Os?t1?decodeURI(Os.replace(/%25/g,"%2525")):decodeURIComponent(Os):""}function y1(Os,t1,c1){return typeof Os=="string"?(Os=encodeURI(Os).replace(t1,v1),c1&&(Os=Os.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Os):null}function v1(Os){return Os=Os.charCodeAt(0),"%"+(Os>>4&15).toString(16)+(Os&15).toString(16)}var O1=/[#\/\?@]/g,m2=/[#\?:]/g,T2=/[#\?]/g,w2=/[#\?@]/g,d4=/#/g;function z2(Os,t1){this.h=this.g=null,this.i=Os||null,this.j=!!t1}function i4(Os){Os.g||(Os.g=new Map,Os.h=0,Os.i&&z3(Os.i,function(t1,c1){Os.add(decodeURIComponent(t1.replace(/\+/g," ")),c1)}))}t=z2.prototype,t.add=function(Os,t1){i4(this),this.i=null,Os=U4(this,Os);var c1=this.g.get(Os);return c1||this.g.set(Os,c1=[]),c1.push(t1),this.h+=1,this};function E4(Os,t1){i4(Os),t1=U4(Os,t1),Os.g.has(t1)&&(Os.i=null,Os.h-=Os.g.get(t1).length,Os.g.delete(t1))}function w4(Os,t1){return i4(Os),t1=U4(Os,t1),Os.g.has(t1)}t.forEach=function(Os,t1){i4(this),this.g.forEach(function(c1,k1){c1.forEach(function(f2){Os.call(t1,f2,k1,this)},this)},this)},t.na=function(){i4(this);const Os=Array.from(this.g.values()),t1=Array.from(this.g.keys()),c1=[];for(let k1=0;k1<t1.length;k1++){const f2=Os[k1];for(let L2=0;L2<f2.length;L2++)c1.push(t1[k1])}return c1},t.V=function(Os){i4(this);let t1=[];if(typeof Os=="string")w4(this,Os)&&(t1=t1.concat(this.g.get(U4(this,Os))));else{Os=Array.from(this.g.values());for(let c1=0;c1<Os.length;c1++)t1=t1.concat(Os[c1])}return t1},t.set=function(Os,t1){return i4(this),this.i=null,Os=U4(this,Os),w4(this,Os)&&(this.h-=this.g.get(Os).length),this.g.set(Os,[t1]),this.h+=1,this},t.get=function(Os,t1){return Os?(Os=this.V(Os),0<Os.length?String(Os[0]):t1):t1};function $4(Os,t1,c1){E4(Os,t1),0<c1.length&&(Os.i=null,Os.g.set(U4(Os,t1),wt(c1)),Os.h+=c1.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const Os=[],t1=Array.from(this.g.keys());for(var c1=0;c1<t1.length;c1++){var k1=t1[c1];const L2=encodeURIComponent(String(k1)),g4=this.V(k1);for(k1=0;k1<g4.length;k1++){var f2=L2;g4[k1]!==""&&(f2+="="+encodeURIComponent(String(g4[k1]))),Os.push(f2)}}return this.i=Os.join("&")};function U4(Os,t1){return t1=String(t1),Os.j&&(t1=t1.toLowerCase()),t1}function X2(Os,t1){t1&&!Os.j&&(i4(Os),Os.i=null,Os.g.forEach(function(c1,k1){var f2=k1.toLowerCase();k1!=f2&&(E4(this,k1),$4(this,f2,c1))},Os)),Os.j=t1}function f3(Os,t1){const c1=new c2;if(g.Image){const k1=new Image;k1.onload=He(D4,c1,"TestLoadImage: loaded",!0,t1,k1),k1.onerror=He(D4,c1,"TestLoadImage: error",!1,t1,k1),k1.onabort=He(D4,c1,"TestLoadImage: abort",!1,t1,k1),k1.ontimeout=He(D4,c1,"TestLoadImage: timeout",!1,t1,k1),g.setTimeout(function(){k1.ontimeout&&k1.ontimeout()},1e4),k1.src=Os}else t1(!1)}function a3(Os,t1){const c1=new c2,k1=new AbortController,f2=setTimeout(()=>{k1.abort(),D4(c1,"TestPingServer: timeout",!1,t1)},1e4);fetch(Os,{signal:k1.signal}).then(L2=>{clearTimeout(f2),L2.ok?D4(c1,"TestPingServer: ok",!0,t1):D4(c1,"TestPingServer: server error",!1,t1)}).catch(()=>{clearTimeout(f2),D4(c1,"TestPingServer: error",!1,t1)})}function D4(Os,t1,c1,k1,f2){try{f2&&(f2.onload=null,f2.onerror=null,f2.onabort=null,f2.ontimeout=null),k1(c1)}catch{}}function F3(){this.g=new x2}function Z3(Os,t1,c1){const k1=c1||"";try{b4(Os,function(f2,L2){let g4=f2;P(f2)&&(g4=A2(f2)),t1.push(k1+L2+"="+encodeURIComponent(g4))})}catch(f2){throw t1.push(k1+"type="+encodeURIComponent("_badmap")),f2}}function U3(Os){this.l=Os.Ub||null,this.j=Os.eb||!1}Xe(U3,u2),U3.prototype.g=function(){return new o3(this.l,this.j)},U3.prototype.i=function(Os){return function(){return Os}}({});function o3(Os,t1){g1.call(this),this.D=Os,this.o=t1,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Xe(o3,g1),t=o3.prototype,t.open=function(Os,t1){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=Os,this.A=t1,this.readyState=1,k3(this)},t.send=function(Os){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t1={headers:this.u,method:this.B,credentials:this.m,cache:void 0};Os&&(t1.body=Os),(this.D||g).fetch(new Request(this.A,t1)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,g3(this)),this.readyState=0},t.Sa=function(Os){if(this.g&&(this.l=Os,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=Os.headers,this.readyState=2,k3(this)),this.g&&(this.readyState=3,k3(this),this.g)))if(this.responseType==="arraybuffer")Os.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in Os){if(this.j=Os.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;v3(this)}else Os.text().then(this.Ra.bind(this),this.ga.bind(this))};function v3(Os){Os.j.read().then(Os.Pa.bind(Os)).catch(Os.ga.bind(Os))}t.Pa=function(Os){if(this.g){if(this.o&&Os.value)this.response.push(Os.value);else if(!this.o){var t1=Os.value?Os.value:new Uint8Array(0);(t1=this.v.decode(t1,{stream:!Os.done}))&&(this.response=this.responseText+=t1)}Os.done?g3(this):k3(this),this.readyState==3&&v3(this)}},t.Ra=function(Os){this.g&&(this.response=this.responseText=Os,g3(this))},t.Qa=function(Os){this.g&&(this.response=Os,g3(this))},t.ga=function(){this.g&&g3(this)};function g3(Os){Os.readyState=4,Os.l=null,Os.j=null,Os.v=null,k3(Os)}t.setRequestHeader=function(Os,t1){this.u.append(Os,t1)},t.getResponseHeader=function(Os){return this.h&&this.h.get(Os.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const Os=[],t1=this.h.entries();for(var c1=t1.next();!c1.done;)c1=c1.value,Os.push(c1[0]+": "+c1[1]),c1=t1.next();return Os.join(`\r
`)};function k3(Os){Os.onreadystatechange&&Os.onreadystatechange.call(Os)}Object.defineProperty(o3.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(Os){this.m=Os?"include":"same-origin"}});function t6(Os){let t1="";return _h(Os,function(c1,k1){t1+=k1,t1+=":",t1+=c1,t1+=`\r
`}),t1}function l3(Os,t1,c1){e:{for(k1 in c1){var k1=!1;break e}k1=!0}k1||(c1=t6(c1),typeof Os=="string"?c1!=null&&encodeURIComponent(String(c1)):hf(Os,t1,c1))}function j4(Os){g1.call(this),this.headers=new Map,this.o=Os||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Xe(j4,g1);var g6=/^https?$/i,j3=["POST","PUT"];t=j4.prototype,t.Ha=function(Os){this.J=Os},t.ea=function(Os,t1,c1,k1){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+Os);t1=t1?t1.toUpperCase():"GET",this.D=Os,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():h1.g(),this.v=this.o?s2(this.o):s2(h1),this.g.onreadystatechange=_e(this.Ea,this);try{this.B=!0,this.g.open(t1,String(Os),!0),this.B=!1}catch(L2){i5(this,L2);return}if(Os=c1||"",c1=new Map(this.headers),k1)if(Object.getPrototypeOf(k1)===Object.prototype)for(var f2 in k1)c1.set(f2,k1[f2]);else if(typeof k1.keys=="function"&&typeof k1.get=="function")for(const L2 of k1.keys())c1.set(L2,k1.get(L2));else throw Error("Unknown input type for opt_headers: "+String(k1));k1=Array.from(c1.keys()).find(L2=>L2.toLowerCase()=="content-type"),f2=g.FormData&&Os instanceof g.FormData,!(0<=Array.prototype.indexOf.call(j3,t1,void 0))||k1||f2||c1.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L2,g4]of c1)this.g.setRequestHeader(L2,g4);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{u3(this),this.u=!0,this.g.send(Os),this.u=!1}catch(L2){i5(this,L2)}};function i5(Os,t1){Os.h=!1,Os.g&&(Os.j=!0,Os.g.abort(),Os.j=!1),Os.l=t1,Os.m=5,K6(Os),A6(Os)}function K6(Os){Os.A||(Os.A=!0,u1(Os,"complete"),u1(Os,"error"))}t.abort=function(Os){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=Os||7,u1(this,"complete"),u1(this,"abort"),A6(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),A6(this,!0)),j4.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?n5(this):this.bb())},t.bb=function(){n5(this)};function n5(Os){if(Os.h&&typeof d<"u"&&(!Os.v[1]||r6(Os)!=4||Os.Z()!=2)){if(Os.u&&r6(Os)==4)B1(Os.Ea,0,Os);else if(u1(Os,"readystatechange"),r6(Os)==4){Os.h=!1;try{const g4=Os.Z();e:switch(g4){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t1=!0;break e;default:t1=!1}var c1;if(!(c1=t1)){var k1;if(k1=g4===0){var f2=String(Os.D).match(Y4)[1]||null;!f2&&g.self&&g.self.location&&(f2=g.self.location.protocol.slice(0,-1)),k1=!g6.test(f2?f2.toLowerCase():"")}c1=k1}if(c1)u1(Os,"complete"),u1(Os,"success");else{Os.m=6;try{var L2=2<r6(Os)?Os.g.statusText:""}catch{L2=""}Os.l=L2+" ["+Os.Z()+"]",K6(Os)}}finally{A6(Os)}}}}function A6(Os,t1){if(Os.g){u3(Os);const c1=Os.g,k1=Os.v[0]?()=>{}:null;Os.g=null,Os.v=null,t1||u1(Os,"ready");try{c1.onreadystatechange=k1}catch{}}}function u3(Os){Os.I&&(g.clearTimeout(Os.I),Os.I=null)}t.isActive=function(){return!!this.g};function r6(Os){return Os.g?Os.g.readyState:0}t.Z=function(){try{return 2<r6(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(Os){if(this.g){var t1=this.g.responseText;return Os&&t1.indexOf(Os)==0&&(t1=t1.substring(Os.length)),l2(t1)}};function d5(Os){try{if(!Os.g)return null;if("response"in Os.g)return Os.g.response;switch(Os.H){case"":case"text":return Os.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in Os.g)return Os.g.mozResponseArrayBuffer}return null}catch{return null}}function Rv(Os){const t1={};Os=(Os.g&&2<=r6(Os)&&Os.g.getAllResponseHeaders()||"").split(`\r
`);for(let k1=0;k1<Os.length;k1++){if(Ko(Os[k1]))continue;var c1=Vc(Os[k1]);const f2=c1[0];if(c1=c1[1],typeof c1!="string")continue;c1=c1.trim();const L2=t1[f2]||[];t1[f2]=L2,L2.push(c1)}cf(t1,function(k1){return k1.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function w5(Os,t1,c1){return c1&&c1.internalChannelParams&&c1.internalChannelParams[Os]||t1}function S5(Os){this.Aa=0,this.i=[],this.j=new c2,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=w5("failFast",!1,Os),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=w5("baseRetryDelayMs",5e3,Os),this.cb=w5("retryDelaySeedMs",1e4,Os),this.Wa=w5("forwardChannelMaxRetries",2,Os),this.wa=w5("forwardChannelRequestTimeoutMs",2e4,Os),this.pa=Os&&Os.xmlHttpFactory||void 0,this.Xa=Os&&Os.Tb||void 0,this.Ca=Os&&Os.useFetchStreams||!1,this.L=void 0,this.J=Os&&Os.supportsCrossDomainXhr||!1,this.K="",this.h=new e4(Os&&Os.concurrentRequestLimit),this.Da=new F3,this.P=Os&&Os.fastHandshake||!1,this.O=Os&&Os.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=Os&&Os.Rb||!1,Os&&Os.xa&&this.j.xa(),Os&&Os.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&Os&&Os.detectBufferingProxy||!1,this.ja=void 0,Os&&Os.longPollingTimeout&&0<Os.longPollingTimeout&&(this.ja=Os.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=S5.prototype,t.la=8,t.G=1,t.connect=function(Os,t1,c1,k1){e2(0),this.W=Os,this.H=t1||{},c1&&k1!==void 0&&(this.H.OSID=c1,this.H.OAID=k1),this.F=this.X,this.I=G7(this,null,this.W),x6(this)};function W6(Os){if(R4(Os),Os.G==3){var t1=Os.U++,c1=G6(Os.I);if(hf(c1,"SID",Os.K),hf(c1,"RID",t1),hf(c1,"TYPE","terminate"),R3(Os,c1),t1=new q1(Os,Os.j,t1),t1.L=2,t1.v=r1(G6(c1)),c1=!1,g.navigator&&g.navigator.sendBeacon)try{c1=g.navigator.sendBeacon(t1.v.toString(),"")}catch{}!c1&&g.Image&&(new Image().src=t1.v,c1=!0),c1||(t1.g=K7(t1.j,null),t1.g.ea(t1.v)),t1.F=Date.now(),l4(t1)}I4(Os)}function a5(Os){Os.g&&(H3(Os),Os.g.cancel(),Os.g=null)}function R4(Os){a5(Os),Os.u&&(g.clearTimeout(Os.u),Os.u=null),j5(Os),Os.h.cancel(),Os.s&&(typeof Os.s=="number"&&g.clearTimeout(Os.s),Os.s=null)}function x6(Os){if(!O4(Os.h)&&!Os.s){Os.s=!0;var t1=Os.Ga;gf||e1(),yh||(gf(),yh=!0),ff.add(t1,Os),Os.B=0}}function p5(Os,t1){return C4(Os.h)>=Os.h.j-(Os.s?1:0)?!1:Os.s?(Os.i=t1.D.concat(Os.i),!0):Os.G==1||Os.G==2||Os.B>=(Os.Va?0:Os.Wa)?!1:(Os.s=P2(_e(Os.Ga,Os,t1),qy(Os,Os.B)),Os.B++,!0)}t.Ga=function(Os){if(this.s)if(this.s=null,this.G==1){if(!Os){this.U=Math.floor(1e5*Math.random()),Os=this.U++;const f2=new q1(this,this.j,Os);let L2=this.o;if(this.S&&(L2?(L2=df(L2),li(L2,this.S)):L2=this.S),this.m!==null||this.O||(f2.H=L2,L2=null),this.P)e:{for(var t1=0,c1=0;c1<this.i.length;c1++){t:{var k1=this.i[c1];if("__data__"in k1.map&&(k1=k1.map.__data__,typeof k1=="string")){k1=k1.length;break t}k1=void 0}if(k1===void 0)break;if(t1+=k1,4096<t1){t1=c1;break e}if(t1===4096||c1===this.i.length-1){t1=c1+1;break e}}t1=1e3}else t1=1e3;t1=m5(this,f2,t1),c1=G6(this.I),hf(c1,"RID",Os),hf(c1,"CVER",22),this.D&&hf(c1,"X-HTTP-Session-Id",this.D),R3(this,c1),L2&&(this.O?t1="headers="+encodeURIComponent(String(t6(L2)))+"&"+t1:this.m&&l3(c1,this.m,L2)),x1(this.h,f2),this.Ua&&hf(c1,"TYPE","init"),this.P?(hf(c1,"$req",t1),hf(c1,"SID","null"),f2.T=!0,_2(f2,c1,null)):_2(f2,c1,t1),this.G=2}}else this.G==3&&(Os?i6(this,Os):this.i.length==0||O4(this.h)||i6(this))};function i6(Os,t1){var c1;t1?c1=t1.l:c1=Os.U++;const k1=G6(Os.I);hf(k1,"SID",Os.K),hf(k1,"RID",c1),hf(k1,"AID",Os.T),R3(Os,k1),Os.m&&Os.o&&l3(k1,Os.m,Os.o),c1=new q1(Os,Os.j,c1,Os.B+1),Os.m===null&&(c1.H=Os.o),t1&&(Os.i=t1.D.concat(Os.i)),t1=m5(Os,c1,1e3),c1.I=Math.round(.5*Os.wa)+Math.round(.5*Os.wa*Math.random()),x1(Os.h,c1),_2(c1,k1,t1)}function R3(Os,t1){Os.H&&_h(Os.H,function(c1,k1){hf(t1,k1,c1)}),Os.l&&b4({},function(c1,k1){hf(t1,k1,c1)})}function m5(Os,t1,c1){c1=Math.min(Os.i.length,c1);var k1=Os.l?_e(Os.l.Na,Os.l,Os):null;e:{var f2=Os.i;let L2=-1;for(;;){const g4=["count="+c1];L2==-1?0<c1?(L2=f2[0].g,g4.push("ofs="+L2)):L2=0:g4.push("ofs="+L2);let C3=!0;for(let n6=0;n6<c1;n6++){let E3=f2[n6].g;const Q4=f2[n6].map;if(E3-=L2,0>E3)L2=Math.max(0,f2[n6].g-100),C3=!1;else try{Z3(Q4,g4,"req"+E3+"_")}catch{k1&&k1(Q4)}}if(C3){k1=g4.join("&");break e}}}return Os=Os.i.splice(0,c1),t1.D=Os,k1}function y3(Os){if(!Os.g&&!Os.u){Os.Y=1;var t1=Os.Fa;gf||e1(),yh||(gf(),yh=!0),ff.add(t1,Os),Os.v=0}}function O5(Os){return Os.g||Os.u||3<=Os.v?!1:(Os.Y++,Os.u=P2(_e(Os.Fa,Os),qy(Os,Os.v)),Os.v++,!0)}t.Fa=function(){if(this.u=null,l6(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var Os=2*this.R;this.j.info("BP detection timer enabled: "+Os),this.A=P2(_e(this.ab,this),Os)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,e2(10),a5(this),l6(this))};function H3(Os){Os.A!=null&&(g.clearTimeout(Os.A),Os.A=null)}function l6(Os){Os.g=new q1(Os,Os.j,"rpc",Os.Y),Os.m===null&&(Os.g.H=Os.o),Os.g.O=0;var t1=G6(Os.qa);hf(t1,"RID","rpc"),hf(t1,"SID",Os.K),hf(t1,"AID",Os.T),hf(t1,"CI",Os.F?"0":"1"),!Os.F&&Os.ja&&hf(t1,"TO",Os.ja),hf(t1,"TYPE","xmlhttp"),R3(Os,t1),Os.m&&Os.o&&l3(t1,Os.m,Os.o),Os.L&&(Os.g.I=Os.L);var c1=Os.g;Os=Os.ia,c1.L=1,c1.v=r1(G6(t1)),c1.m=null,c1.P=!0,O2(c1,Os)}t.Za=function(){this.C!=null&&(this.C=null,a5(this),O5(this),e2(19))};function j5(Os){Os.C!=null&&(g.clearTimeout(Os.C),Os.C=null)}function ev(Os,t1){var c1=null;if(Os.g==t1){j5(Os),H3(Os),Os.g=null;var k1=2}else if(H2(Os.h,t1))c1=t1.D,A3(Os.h,t1),k1=1;else return;if(Os.G!=0){if(t1.o)if(k1==1){c1=t1.m?t1.m.length:0,t1=Date.now()-t1.F;var f2=Os.B;k1=P4(),u1(k1,new b2(k1,c1)),x6(Os)}else y3(Os);else if(f2=t1.s,f2==3||f2==0&&0<t1.X||!(k1==1&&p5(Os,t1)||k1==2&&O5(Os)))switch(c1&&0<c1.length&&(t1=Os.h,t1.i=t1.i.concat(c1)),f2){case 1:O3(Os,5);break;case 4:O3(Os,10);break;case 3:O3(Os,6);break;default:O3(Os,2)}}}function qy(Os,t1){let c1=Os.Ta+Math.floor(Math.random()*Os.cb);return Os.isActive()||(c1*=2),c1*t1}function O3(Os,t1){if(Os.j.info("Error code "+t1),t1==2){var c1=_e(Os.fb,Os),k1=Os.Xa;const f2=!k1;k1=new d6(k1||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||H4(k1,"https"),r1(k1),f2?f3(k1.toString(),c1):a3(k1.toString(),c1)}else e2(2);Os.G=0,Os.l&&Os.l.sa(t1),I4(Os),R4(Os)}t.fb=function(Os){Os?(this.j.info("Successfully pinged google.com"),e2(2)):(this.j.info("Failed to ping google.com"),e2(1))};function I4(Os){if(Os.G=0,Os.ka=[],Os.l){const t1=V6(Os.h);(t1.length!=0||Os.i.length!=0)&&(Do(Os.ka,t1),Do(Os.ka,Os.i),Os.h.i.length=0,wt(Os.i),Os.i.length=0),Os.l.ra()}}function G7(Os,t1,c1){var k1=c1 instanceof d6?G6(c1):new d6(c1);if(k1.g!="")t1&&(k1.g=t1+"."+k1.g),De(k1,k1.s);else{var f2=g.location;k1=f2.protocol,t1=t1?t1+"."+f2.hostname:f2.hostname,f2=+f2.port;var L2=new d6(null);k1&&H4(L2,k1),t1&&(L2.g=t1),f2&&De(L2,f2),c1&&(L2.l=c1),k1=L2}return c1=Os.D,t1=Os.ya,c1&&t1&&hf(k1,c1,t1),hf(k1,"VER",Os.la),R3(Os,k1),k1}function K7(Os,t1,c1){if(t1&&!Os.J)throw Error("Can't create secondary domain capable XhrIo object.");return t1=Os.Ca&&!Os.pa?new j4(new U3({eb:c1})):new j4(Os.pa),t1.Ha(Os.J),t1}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function W7(){}t=W7.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sy(){}sy.prototype.g=function(Os,t1){return new D3(Os,t1)};function D3(Os,t1){g1.call(this),this.g=new S5(t1),this.l=Os,this.h=t1&&t1.messageUrlParams||null,Os=t1&&t1.messageHeaders||null,t1&&t1.clientProtocolHeaderRequired&&(Os?Os["X-Client-Protocol"]="webchannel":Os={"X-Client-Protocol":"webchannel"}),this.g.o=Os,Os=t1&&t1.initMessageHeaders||null,t1&&t1.messageContentType&&(Os?Os["X-WebChannel-Content-Type"]=t1.messageContentType:Os={"X-WebChannel-Content-Type":t1.messageContentType}),t1&&t1.va&&(Os?Os["X-WebChannel-Client-Profile"]=t1.va:Os={"X-WebChannel-Client-Profile":t1.va}),this.g.S=Os,(Os=t1&&t1.Sb)&&!Ko(Os)&&(this.g.m=Os),this.v=t1&&t1.supportsCrossDomainXhr||!1,this.u=t1&&t1.sendRawJson||!1,(t1=t1&&t1.httpSessionIdParam)&&!Ko(t1)&&(this.g.D=t1,Os=this.h,Os!==null&&t1 in Os&&(Os=this.h,t1 in Os&&delete Os[t1])),this.j=new tv(this)}Xe(D3,g1),D3.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},D3.prototype.close=function(){W6(this.g)},D3.prototype.o=function(Os){var t1=this.g;if(typeof Os=="string"){var c1={};c1.__data__=Os,Os=c1}else this.u&&(c1={},c1.__data__=A2(Os),Os=c1);t1.i.push(new z4(t1.Ya++,Os)),t1.G==3&&x6(t1)},D3.prototype.N=function(){this.g.l=null,delete this.j,W6(this.g),delete this.g,D3.aa.N.call(this)};function X7(Os){k2.call(this),Os.__headers__&&(this.headers=Os.__headers__,this.statusCode=Os.__status__,delete Os.__headers__,delete Os.__status__);var t1=Os.__sm__;if(t1){e:{for(const c1 in t1){Os=c1;break e}Os=void 0}(this.i=Os)&&(Os=this.i,t1=t1!==null&&Os in t1?t1[Os]:void 0),this.data=t1}else this.data=Os}Xe(X7,k2);function $y(){a4.call(this),this.status=1}Xe($y,a4);function tv(Os){this.g=Os}Xe(tv,W7),tv.prototype.ua=function(){u1(this.g,"a")},tv.prototype.ta=function(Os){u1(this.g,new X7(Os))},tv.prototype.sa=function(Os){u1(this.g,new $y)},tv.prototype.ra=function(){u1(this.g,"b")},sy.prototype.createWebChannel=sy.prototype.g,D3.prototype.send=D3.prototype.o,D3.prototype.open=D3.prototype.m,D3.prototype.close=D3.prototype.close,createWebChannelTransport=function(){return new sy},getStatEventTarget=function(){return P4()},Event$1=n4,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},l1.NO_ERROR=0,l1.TIMEOUT=8,l1.HTTP_ERROR=6,ErrorCode=l1,w1.COMPLETE="complete",EventType=w1,j2.EventType=h2,h2.OPEN="a",h2.CLOSE="b",h2.ERROR="c",h2.MESSAGE="d",g1.prototype.listen=g1.prototype.K,WebChannel=j2,j4.prototype.listenOnce=j4.prototype.L,j4.prototype.getLastError=j4.prototype.Ka,j4.prototype.getLastErrorCode=j4.prototype.Ba,j4.prototype.getStatus=j4.prototype.Z,j4.prototype.getResponseJson=j4.prototype.Oa,j4.prototype.getResponseText=j4.prototype.oa,j4.prototype.send=j4.prototype.ea,j4.prototype.setWithCredentials=j4.prototype.Ha,XhrIo=j4}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F="@firebase/firestore",M="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$1=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O$1.logLevel}function __PRIVATE_logDebug(t,...e){if(O$1.logLevel<=LogLevel.DEBUG){const r=e.map(__PRIVATE_argToString);O$1.debug(`Firestore (${x}): ${t}`,...r)}}function __PRIVATE_logError(t,...e){if(O$1.logLevel<=LogLevel.ERROR){const r=e.map(__PRIVATE_argToString);O$1.error(`Firestore (${x}): ${t}`,...r)}}function __PRIVATE_logWarn(t,...e){if(O$1.logLevel<=LogLevel.WARN){const r=e.map(__PRIVATE_argToString);O$1.warn(`Firestore (${x}): ${t}`,...r)}}function __PRIVATE_argToString(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(t,e,r){let a="Unexpected state";typeof e=="string"?a=e:r=e,__PRIVATE__fail(t,a,r)}function __PRIVATE__fail(t,e,r){let a=`FIRESTORE (${x}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{a+=" CONTEXT: "+JSON.stringify(r)}catch{a+=" CONTEXT: "+r}throw __PRIVATE_logError(a),new Error(a)}function __PRIVATE_hardAssert(t,e,r,a){let l="Unexpected state";typeof r=="string"?l=r:a=r,t||__PRIVATE__fail(e,l,a)}function __PRIVATE_debugCast(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){__PRIVATE_hardAssert(this.o===void 0,42304);let a=this.i;const l=E=>this.i!==a?(a=this.i,r(E)):Promise.resolve();let u=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new __PRIVATE_Deferred,e.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const E=u;e.enqueueRetryable(async()=>{await E.promise,await l(this.currentUser)})},g=E=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(E=>g(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?g(E):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new __PRIVATE_Deferred)}},0),d()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(__PRIVATE_hardAssert(typeof a.accessToken=="string",31837,{l:a}),new __PRIVATE_OAuthToken(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,r,a){this.P=e,this.T=r,this.I=a,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,r,a){this.P=e,this.T=r,this.I=a}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){__PRIVATE_hardAssert(this.o===void 0,3512);const a=u=>{u.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?r(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>a(u))};const l=u=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>l(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(__PRIVATE_hardAssert(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new AppCheckToken(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let a=0;a<t;a++)r[a]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=__PRIVATE_randomBytes(40);for(let u=0;u<l.length;++u)a.length<20&&l[u]<r&&(a+=e.charAt(l[u]%62))}return a}}function __PRIVATE_primitiveComparator(t,e){return t<e?-1:t>e?1:0}function __PRIVATE_compareUtf8Strings(t,e){const r=Math.min(t.length,e.length);for(let a=0;a<r;a++){const l=t.charAt(a),u=e.charAt(a);if(l!==u)return __PRIVATE_isSurrogate(l)===__PRIVATE_isSurrogate(u)?__PRIVATE_primitiveComparator(l,u):__PRIVATE_isSurrogate(l)?1:-1}return __PRIVATE_primitiveComparator(t.length,e.length)}const B=55296,L=57343;function __PRIVATE_isSurrogate(t){const e=t.charCodeAt(0);return e>=B&&e<=L}function __PRIVATE_arrayEquals(t,e,r){return t.length===e.length&&t.every((a,l)=>r(a,e[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k="__name__";class BasePath{constructor(e,r,a){r===void 0?r=0:r>e.length&&fail(637,{offset:r,range:e.length}),a===void 0?a=e.length-r:a>e.length-r&&fail(1746,{length:a,range:e.length-r}),this.segments=e,this.offset=r,this.len=a}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(a=>{r.push(a)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,a=this.limit();r<a;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const a=Math.min(e.length,r.length);for(let l=0;l<a;l++){const u=BasePath.compareSegments(e.get(l),r.get(l));if(u!==0)return u}return __PRIVATE_primitiveComparator(e.length,r.length)}static compareSegments(e,r){const a=BasePath.isNumericId(e),l=BasePath.isNumericId(r);return a&&!l?-1:!a&&l?1:a&&l?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(r)):__PRIVATE_compareUtf8Strings(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,r,a){return new ResourcePath(e,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const a of e){if(a.indexOf("//")>=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(l=>l.length>0))}return new ResourcePath(r)}static emptyPath(){return new ResourcePath([])}}const q$1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,r,a){return new FieldPath$1(e,r,a)}static isValidIdentifier(e){return q$1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k}static keyField(){return new FieldPath$1([k])}static fromServerFormat(e){const r=[];let a="",l=0;const u=()=>{if(a.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let d=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[l+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=E,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(a+=g,l++):(u(),l++)}if(u(),d)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(r)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ResourcePath.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(t,e,r){if(!r)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(t,e,r,a){if(e===!0&&a===!0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function __PRIVATE_validateDocumentPath(t){if(!DocumentKey.isDocumentKey(t))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_validateCollectionPath(t){if(DocumentKey.isDocumentKey(t))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_isPlainObject(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function __PRIVATE_valueDescription(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fail(12329,{type:typeof t})}function __PRIVATE_cast(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=__PRIVATE_valueDescription(t);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function __PRIVATE_validatePositiveNumber(t,e){if(e<=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property$1(t,e){const r={typeString:t};return e&&(r.value=e),r}function __PRIVATE_validateJSON(t,e){if(!__PRIVATE_isPlainObject(t))throw new FirestoreError(N$1.INVALID_ARGUMENT,"JSON must be an object");let r;for(const a in e)if(e[a]){const l=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in t)){r=`JSON missing required field: '${a}'`;break}const d=t[a];if(l&&typeof d!==l){r=`JSON field '${a}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){r=`Expected '${a}' field to equal '${u.value}'`;break}}if(r)throw new FirestoreError(N$1.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$1=-62135596800,$$1=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),a=Math.floor((e-1e3*r)*$$1);return new Timestamp(r,a)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Q$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$$1}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q$1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property$1("string",Timestamp._jsonSchemaVersion),seconds:property$1("number"),nanoseconds:property$1("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$1=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(t,e){const r=t.toTimestamp().seconds,a=t.toTimestamp().nanoseconds+1,l=SnapshotVersion.fromTimestamp(a===1e9?new Timestamp(r+1,0):new Timestamp(r,a));return new IndexOffset(l,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(t){return new IndexOffset(t.readTime,t.key,U$1)}class IndexOffset{constructor(e,r,a){this.readTime=e,this.documentKey=r,this.largestBatchId=a}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),U$1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),U$1)}}function __PRIVATE_indexOffsetComparator(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=DocumentKey.comparator(t.documentKey,e.documentKey),r!==0?r:__PRIVATE_primitiveComparator(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(t){if(t.code!==N$1.FAILED_PRECONDITION||t.message!==K)throw t;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((a,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,l)},this.catchCallback=u=>{this.wrapFailure(r,u).next(a,l)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof PersistencePromise?r:PersistencePromise.resolve(r)}catch(r){return PersistencePromise.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):PersistencePromise.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):PersistencePromise.reject(r)}static resolve(e){return new PersistencePromise((r,a)=>{r(e)})}static reject(e){return new PersistencePromise((r,a)=>{a(e)})}static waitFor(e){return new PersistencePromise((r,a)=>{let l=0,u=0,d=!1;e.forEach(g=>{++l,g.next(()=>{++u,d&&u===l&&r()},E=>a(E))}),d=!0,u===l&&r()})}static or(e){let r=PersistencePromise.resolve(!1);for(const a of e)r=r.next(l=>l?PersistencePromise.resolve(l):a());return r}static forEach(e,r){const a=[];return e.forEach((l,u)=>{a.push(r.call(this,l,u))}),this.waitFor(a)}static mapArray(e,r){return new PersistencePromise((a,l)=>{const u=e.length,d=new Array(u);let g=0;for(let E=0;E<u;E++){const P=E;r(e[P]).next(Z=>{d[P]=Z,++g,g===u&&a(d)},Z=>l(Z))}})}static doWhile(e,r){return new PersistencePromise((a,l)=>{const u=()=>{e()===!0?r().next(()=>{u()},l):a()};u()})}}function __PRIVATE_getAndroidVersion(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function __PRIVATE_isIndexedDbTransactionError(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>r.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}__PRIVATE_ListenSequence.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$1=-1;function __PRIVATE_isNullOrUndefined(t){return t==null}function __PRIVATE_isNegativeZero(t){return t===0&&1/t==-1/0}function isSafeInteger(t){return typeof t=="number"&&Number.isInteger(t)&&!__PRIVATE_isNegativeZero(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J="";function __PRIVATE_encodeResourcePath(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(t.get(r),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(t,e){let r=e;const a=t.length;for(let l=0;l<a;l++){const u=t.charAt(l);switch(u){case"\0":r+="";break;case J:r+="";break;default:r+=u}}return r}function __PRIVATE_encodeSeparator(t){return t+J+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function forEach$1(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function __PRIVATE_mapToArray(t,e){const r=[];for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&r.push(e(t[a],a,t));return r}function isEmpty(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,r){this.comparator=e,this.root=r||LLRBNode.EMPTY}insert(e,r){return new SortedMap(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(e){let r=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(e,a.key);if(l===0)return r+a.left.size;l<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,a)=>(e(r,a),!1))}toString(){const e=[];return this.inorderTraversal((r,a)=>(e.push(`${r}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,r,a,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=r?a(e.key,r):1,r&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,r,a,l,u){this.key=e,this.value=r,this.color=a??LLRBNode.RED,this.left=l??LLRBNode.EMPTY,this.right=u??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,a,l,u){return new LLRBNode(e??this.key,r??this.value,a??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let l=this;const u=a(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,r,a),null):u===0?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(e,r,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let a,l=this;if(r(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),r(e,l.key)===0){if(l.right.isEmpty())return LLRBNode.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,r,a,l,u){return this}insert(e,r,a){return new LLRBNode(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,a)=>(e(r),!1))}forEachInRange(e,r){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,e[1])>=0)return;r(l.key)}}forEachWhile(e,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(a=>{r=r.add(a)}),r}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const r=this.data.getIterator(),a=e.data.getIterator();for(;r.hasNext();){const l=r.getNext().key,u=a.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new SortedSet(this.comparator);return r.data=e,r}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let r=new SortedSet(FieldPath$1.comparator);for(const a of this.fields)r=r.add(a);for(const a of e)r=r.add(a);return new FieldMask(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(r,a)=>r.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+u):u}}(e);return new ByteString(r)}static fromUint8Array(e){const r=function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u}(e);return new ByteString(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const a=new Uint8Array(r.length);for(let l=0;l<r.length;l++)a[l]=r.charCodeAt(l);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ot$1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(t){if(__PRIVATE_hardAssert(!!t,39018),typeof t=="string"){let e=0;const r=ot$1.exec(t);if(__PRIVATE_hardAssert(!!r,46558,{timestamp:t}),r[1]){let l=r[1];l=(l+"000000000").substr(0,9),e=Number(l)}const a=new Date(t);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(t.seconds),nanos:__PRIVATE_normalizeNumber(t.nanos)}}function __PRIVATE_normalizeNumber(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function __PRIVATE_normalizeByteString(t){return typeof t=="string"?ByteString.fromBase64String(t):ByteString.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t$1="server_timestamp",at$1="__type__",ut$1="__previous_value__",ct$1="__local_write_time__";function __PRIVATE_isServerTimestamp(t){return(t?.mapValue?.fields||{})[at$1]?.stringValue===_t$1}function __PRIVATE_getPreviousValue(t){const e=t.mapValue.fields[ut$1];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(t){const e=__PRIVATE_normalizeTimestamp(t.mapValue.fields[ct$1].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,r,a,l,u,d,g,E,P,Z){this.databaseId=e,this.appId=r,this.persistenceKey=a,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=E,this.useFetchStreams=P,this.isUsingEmulator=Z}}const lt$1="(default)";class DatabaseId{constructor(e,r){this.projectId=e,this.database=r||lt$1}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===lt$1}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht$1="__type__",Pt$1="__max__",Tt$1={mapValue:{}},It$1="__vector__",Et$1="value";function __PRIVATE_typeOrder(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?__PRIVATE_isServerTimestamp(t)?4:__PRIVATE_isMaxValue(t)?9007199254740991:__PRIVATE_isVectorValue(t)?10:11:fail(28295,{value:t})}function __PRIVATE_valueEquals(t,e){if(t===e)return!0;const r=__PRIVATE_typeOrder(t);if(r!==__PRIVATE_typeOrder(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(t).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=__PRIVATE_normalizeTimestamp(l.timestampValue),g=__PRIVATE_normalizeTimestamp(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(l,u){return __PRIVATE_normalizeByteString(l.bytesValue).isEqual(__PRIVATE_normalizeByteString(u.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(l,u){return __PRIVATE_normalizeNumber(l.geoPointValue.latitude)===__PRIVATE_normalizeNumber(u.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(l.geoPointValue.longitude)===__PRIVATE_normalizeNumber(u.geoPointValue.longitude)}(t,e);case 2:return function(l,u){if("integerValue"in l&&"integerValue"in u)return __PRIVATE_normalizeNumber(l.integerValue)===__PRIVATE_normalizeNumber(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=__PRIVATE_normalizeNumber(l.doubleValue),g=__PRIVATE_normalizeNumber(u.doubleValue);return d===g?__PRIVATE_isNegativeZero(d)===__PRIVATE_isNegativeZero(g):isNaN(d)&&isNaN(g)}return!1}(t,e);case 9:return __PRIVATE_arrayEquals(t.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(l,u){const d=l.mapValue.fields||{},g=u.mapValue.fields||{};if(__PRIVATE_objectSize(d)!==__PRIVATE_objectSize(g))return!1;for(const E in d)if(d.hasOwnProperty(E)&&(g[E]===void 0||!__PRIVATE_valueEquals(d[E],g[E])))return!1;return!0}(t,e);default:return fail(52216,{left:t})}}function __PRIVATE_arrayValueContains(t,e){return(t.values||[]).find(r=>__PRIVATE_valueEquals(r,e))!==void 0}function __PRIVATE_valueCompare(t,e){if(t===e)return 0;const r=__PRIVATE_typeOrder(t),a=__PRIVATE_typeOrder(e);if(r!==a)return __PRIVATE_primitiveComparator(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(t.booleanValue,e.booleanValue);case 2:return function(u,d){const g=__PRIVATE_normalizeNumber(u.integerValue||u.doubleValue),E=__PRIVATE_normalizeNumber(d.integerValue||d.doubleValue);return g<E?-1:g>E?1:g===E?0:isNaN(g)?isNaN(E)?0:-1:1}(t,e);case 3:return __PRIVATE_compareTimestamps(t.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(t),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(t.stringValue,e.stringValue);case 6:return function(u,d){const g=__PRIVATE_normalizeByteString(u),E=__PRIVATE_normalizeByteString(d);return g.compareTo(E)}(t.bytesValue,e.bytesValue);case 7:return function(u,d){const g=u.split("/"),E=d.split("/");for(let P=0;P<g.length&&P<E.length;P++){const Z=__PRIVATE_primitiveComparator(g[P],E[P]);if(Z!==0)return Z}return __PRIVATE_primitiveComparator(g.length,E.length)}(t.referenceValue,e.referenceValue);case 8:return function(u,d){const g=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(u.latitude),__PRIVATE_normalizeNumber(d.latitude));return g!==0?g:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(u.longitude),__PRIVATE_normalizeNumber(d.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(t.arrayValue,e.arrayValue);case 10:return function(u,d){const g=u.fields||{},E=d.fields||{},P=g[Et$1]?.arrayValue,Z=E[Et$1]?.arrayValue,me=__PRIVATE_primitiveComparator(P?.values?.length||0,Z?.values?.length||0);return me!==0?me:__PRIVATE_compareArrays(P,Z)}(t.mapValue,e.mapValue);case 11:return function(u,d){if(u===Tt$1.mapValue&&d===Tt$1.mapValue)return 0;if(u===Tt$1.mapValue)return 1;if(d===Tt$1.mapValue)return-1;const g=u.fields||{},E=Object.keys(g),P=d.fields||{},Z=Object.keys(P);E.sort(),Z.sort();for(let me=0;me<E.length&&me<Z.length;++me){const _e=__PRIVATE_compareUtf8Strings(E[me],Z[me]);if(_e!==0)return _e;const He=__PRIVATE_valueCompare(g[E[me]],P[Z[me]]);if(He!==0)return He}return __PRIVATE_primitiveComparator(E.length,Z.length)}(t.mapValue,e.mapValue);default:throw fail(23264,{he:r})}}function __PRIVATE_compareTimestamps(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return __PRIVATE_primitiveComparator(t,e);const r=__PRIVATE_normalizeTimestamp(t),a=__PRIVATE_normalizeTimestamp(e),l=__PRIVATE_primitiveComparator(r.seconds,a.seconds);return l!==0?l:__PRIVATE_primitiveComparator(r.nanos,a.nanos)}function __PRIVATE_compareArrays(t,e){const r=t.values||[],a=e.values||[];for(let l=0;l<r.length&&l<a.length;++l){const u=__PRIVATE_valueCompare(r[l],a[l]);if(u)return u}return __PRIVATE_primitiveComparator(r.length,a.length)}function canonicalId(t){return __PRIVATE_canonifyValue(t)}function __PRIVATE_canonifyValue(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const a=__PRIVATE_normalizeTimestamp(r);return`time(${a.seconds},${a.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return __PRIVATE_normalizeByteString(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return DocumentKey.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let a="[",l=!0;for(const u of r.values||[])l?l=!1:a+=",",a+=__PRIVATE_canonifyValue(u);return a+"]"}(t.arrayValue):"mapValue"in t?function(r){const a=Object.keys(r.fields||{}).sort();let l="{",u=!0;for(const d of a)u?u=!1:l+=",",l+=`${d}:${__PRIVATE_canonifyValue(r.fields[d])}`;return l+"}"}(t.mapValue):fail(61005,{value:t})}function __PRIVATE_estimateByteSize(t){switch(__PRIVATE_typeOrder(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(t);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*t.stringValue.length;case 6:return __PRIVATE_normalizeByteString(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((l,u)=>l+__PRIVATE_estimateByteSize(u),0)}(t.arrayValue);case 10:case 11:return function(a){let l=0;return forEach$1(a.fields,(u,d)=>{l+=u.length+__PRIVATE_estimateByteSize(d)}),l}(t.mapValue);default:throw fail(13486,{value:t})}}function __PRIVATE_refValue(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function isInteger(t){return!!t&&"integerValue"in t}function isArray$1(t){return!!t&&"arrayValue"in t}function __PRIVATE_isNullValue(t){return!!t&&"nullValue"in t}function __PRIVATE_isNanValue(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function __PRIVATE_isMapValue(t){return!!t&&"mapValue"in t}function __PRIVATE_isVectorValue(t){return(t?.mapValue?.fields||{})[ht$1]?.stringValue===It$1}function __PRIVATE_deepClone(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return forEach$1(t.mapValue.fields,(r,a)=>e.mapValue.fields[r]=__PRIVATE_deepClone(a)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=__PRIVATE_deepClone(t.arrayValue.values[r]);return e}return{...t}}function __PRIVATE_isMaxValue(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Pt$1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let a=0;a<e.length-1;++a)if(r=(r.mapValue.fields||{})[e.get(a)],!__PRIVATE_isMapValue(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(r)}setAll(e){let r=FieldPath$1.emptyPath(),a={},l=[];e.forEach((d,g)=>{if(!r.isImmediateParentOf(g)){const E=this.getFieldsMap(r);this.applyChanges(E,a,l),a={},l=[],r=g.popLast()}d?a[g.lastSegment()]=__PRIVATE_deepClone(d):l.push(g.lastSegment())});const u=this.getFieldsMap(r);this.applyChanges(u,a,l)}delete(e){const r=this.field(e.popLast());__PRIVATE_isMapValue(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<e.length;++a){let l=r.mapValue.fields[e.get(a)];__PRIVATE_isMapValue(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[e.get(a)]=l),r=l}return r.mapValue.fields}applyChanges(e,r,a){forEach$1(r,(l,u)=>e[l]=u);for(const l of a)delete e[l]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(t){const e=[];return forEach$1(t.fields,(r,a)=>{const l=new FieldPath$1([r]);if(__PRIVATE_isMapValue(a)){const u=__PRIVATE_extractFieldMask(a.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,r,a,l,u,d,g){this.key=e,this.documentType=r,this.version=a,this.readTime=l,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,r,a,l){return new MutableDocument(e,1,r,SnapshotVersion.min(),a,l,0)}static newNoDocument(e,r){return new MutableDocument(e,2,r,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,r){return new MutableDocument(e,3,r,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,r){this.position=e,this.inclusive=r}}function __PRIVATE_boundCompareToDocument(t,e,r){let a=0;for(let l=0;l<t.position.length;l++){const u=e[l],d=t.position[l];if(u.field.isKeyField()?a=DocumentKey.comparator(DocumentKey.fromName(d.referenceValue),r.key):a=__PRIVATE_valueCompare(d,r.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function __PRIVATE_boundEquals(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!__PRIVATE_valueEquals(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,r="asc"){this.field=e,this.dir=r}}function __PRIVATE_orderByEquals(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,r,a){super(),this.field=e,this.op=r,this.value=a}static create(e,r,a){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,a):new __PRIVATE_KeyFieldFilter(e,r,a):r==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,a):r==="in"?new __PRIVATE_InFilter(e,a):r==="not-in"?new __PRIVATE_NotInFilter(e,a):r==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,a):new FieldFilter(e,r,a)}static createKeyFieldInFilter(e,r,a){return r==="in"?new __PRIVATE_KeyFieldInFilter(e,a):new __PRIVATE_KeyFieldNotInFilter(e,a)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(r,this.value)):r!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(r)&&this.matchesComparison(__PRIVATE_valueCompare(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new CompositeFilter(e,r)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(t){return t.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(t){return __PRIVATE_compositeFilterIsFlat(t)&&__PRIVATE_compositeFilterIsConjunction(t)}function __PRIVATE_compositeFilterIsFlat(t){for(const e of t.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(t){if(t instanceof FieldFilter)return t.field.canonicalString()+t.op.toString()+canonicalId(t.value);if(__PRIVATE_compositeFilterIsFlatConjunction(t))return t.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=t.filters.map(r=>__PRIVATE_canonifyFilter(r)).join(",");return`${t.op}(${e})`}}function __PRIVATE_filterEquals(t,e){return t instanceof FieldFilter?function(a,l){return l instanceof FieldFilter&&a.op===l.op&&a.field.isEqual(l.field)&&__PRIVATE_valueEquals(a.value,l.value)}(t,e):t instanceof CompositeFilter?function(a,l){return l instanceof CompositeFilter&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce((u,d,g)=>u&&__PRIVATE_filterEquals(d,l.filters[g]),!0):!1}(t,e):void fail(19439)}function __PRIVATE_stringifyFilter(t){return t instanceof FieldFilter?function(r){return`${r.field.canonicalString()} ${r.op} ${canonicalId(r.value)}`}(t):t instanceof CompositeFilter?function(r){return r.op.toString()+" {"+r.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(t):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,r,a){super(e,r,a),this.key=DocumentKey.fromName(a.referenceValue)}matches(e){const r=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(r)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,r){super(e,"in",r),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,r){super(e,"not-in",r),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(t,e){return(e.arrayValue?.values||[]).map(r=>DocumentKey.fromName(r.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return isArray$1(r)&&__PRIVATE_arrayValueContains(r.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,r)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,r){super(e,"not-in",r)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,r)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!isArray$1(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>__PRIVATE_arrayValueContains(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,r=null,a=[],l=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=r,this.orderBy=a,this.filters=l,this.limit=u,this.startAt=d,this.endAt=g,this.Te=null}}function __PRIVATE_newTarget(t,e=null,r=[],a=[],l=null,u=null,d=null){return new __PRIVATE_TargetImpl(t,e,r,a,l,u,d)}function __PRIVATE_canonifyTarget(t){const e=__PRIVATE_debugCast(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(a=>__PRIVATE_canonifyFilter(a)).join(","),r+="|ob:",r+=e.orderBy.map(a=>function(u){return u.field.canonicalString()+u.dir}(a)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(a=>canonicalId(a)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(a=>canonicalId(a)).join(",")),e.Te=r}return e.Te}function __PRIVATE_targetEquals(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!__PRIVATE_orderByEquals(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!__PRIVATE_filterEquals(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(t.startAt,e.startAt)&&__PRIVATE_boundEquals(t.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(t){return DocumentKey.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,r=null,a=[],l=[],u=null,d="F",g=null,E=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=l,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=E,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(t,e,r,a,l,u,d,g){return new __PRIVATE_QueryImpl(t,e,r,a,l,u,d,g)}function __PRIVATE_newQueryForPath(t){return new __PRIVATE_QueryImpl(t)}function __PRIVATE_queryMatchesAllDocuments(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(t){return t.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(t){const e=__PRIVATE_debugCast(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),r.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new SortedSet(FieldPath$1.comparator);return d.filters.forEach(E=>{E.getFlattenedFilters().forEach(P=>{P.isInequality()&&(g=g.add(P.field))})}),g})(e).forEach(u=>{r.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new OrderBy(u,a))}),r.has(FieldPath$1.keyField().canonicalString())||e.Ie.push(new OrderBy(FieldPath$1.keyField(),a))}return e.Ie}function __PRIVATE_queryToTarget(t){const e=__PRIVATE_debugCast(t);return e.Ee||(e.Ee=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(t))),e.Ee}function __PRIVATE_queryToAggregateTarget(t){const e=__PRIVATE_debugCast(t);return e.de||(e.de=__PRIVATE__queryToTarget(e,t.explicitOrderBy)),e.de}function __PRIVATE__queryToTarget(t,e){if(t.limitType==="F")return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(l=>{const u=l.dir==="desc"?"asc":"desc";return new OrderBy(l.field,u)});const r=t.endAt?new Bound(t.endAt.position,t.endAt.inclusive):null,a=t.startAt?new Bound(t.startAt.position,t.startAt.inclusive):null;return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,r,a)}}function __PRIVATE_queryWithAddedFilter(t,e){const r=t.filters.concat([e]);return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function __PRIVATE_queryWithLimit(t,e,r){return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function __PRIVATE_queryEquals(t,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(t),__PRIVATE_queryToTarget(e))&&t.limitType===e.limitType}function __PRIVATE_canonifyQuery(t){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(t))}|lt:${t.limitType}`}function __PRIVATE_stringifyQuery(t){return`Query(target=${function(r){let a=r.path.canonicalString();return r.collectionGroup!==null&&(a+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(a+=`, filters: [${r.filters.map(l=>__PRIVATE_stringifyFilter(l)).join(", ")}]`),__PRIVATE_isNullOrUndefined(r.limit)||(a+=", limit: "+r.limit),r.orderBy.length>0&&(a+=`, orderBy: [${r.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),r.startAt&&(a+=", startAt: ",a+=r.startAt.inclusive?"b:":"a:",a+=r.startAt.position.map(l=>canonicalId(l)).join(",")),r.endAt&&(a+=", endAt: ",a+=r.endAt.inclusive?"a:":"b:",a+=r.endAt.position.map(l=>canonicalId(l)).join(",")),`Target(${a})`}(__PRIVATE_queryToTarget(t))}; limitType=${t.limitType})`}function __PRIVATE_queryMatches(t,e){return e.isFoundDocument()&&function(a,l){const u=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):DocumentKey.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)}(t,e)&&function(a,l){for(const u of __PRIVATE_queryNormalizedOrderBy(a))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0}(t,e)&&function(a,l){for(const u of a.filters)if(!u.matches(l))return!1;return!0}(t,e)&&function(a,l){return!(a.startAt&&!function(d,g,E){const P=__PRIVATE_boundCompareToDocument(d,g,E);return d.inclusive?P<=0:P<0}(a.startAt,__PRIVATE_queryNormalizedOrderBy(a),l)||a.endAt&&!function(d,g,E){const P=__PRIVATE_boundCompareToDocument(d,g,E);return d.inclusive?P>=0:P>0}(a.endAt,__PRIVATE_queryNormalizedOrderBy(a),l))}(t,e)}function __PRIVATE_queryCollectionGroup(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function __PRIVATE_newQueryComparator(t){return(e,r)=>{let a=!1;for(const l of __PRIVATE_queryNormalizedOrderBy(t)){const u=__PRIVATE_compareDocs(l,e,r);if(u!==0)return u;a=a||l.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(t,e,r){const a=t.field.isKeyField()?DocumentKey.comparator(e.key,r.key):function(u,d,g){const E=d.data.field(u),P=g.data.field(u);return E!==null&&P!==null?__PRIVATE_valueCompare(E,P):fail(42886)}(t.field,e,r);switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return fail(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),a=this.inner[r];if(a!==void 0){for(const[l,u]of a)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,r){const a=this.mapKeyFn(e),l=this.inner[a];if(l===void 0)return this.inner[a]=[[e,r]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,r]);l.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return a.length===1?delete this.inner[r]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(e){forEach$1(this.inner,(r,a)=>{for(const[l,u]of a)e(l,u)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt$1=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Rt$1}const Vt$1=new SortedMap(DocumentKey.comparator);function documentMap(...t){let e=Vt$1;for(const r of t)e=e.insert(r.key,r);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(t){let e=Vt$1;return t.forEach((r,a)=>e=e.insert(r,a.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(t=>t.toString(),(t,e)=>t.isEqual(e))}const mt$1=new SortedMap(DocumentKey.comparator),ft$1=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...t){let e=ft$1;for(const r of t)e=e.add(r);return e}const gt$1=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return gt$1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(t){return{integerValue:""+t}}function toNumber$1(t,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(t,e,r){return t instanceof __PRIVATE_ServerTimestampTransform?function(l,u){const d={fields:{[at$1]:{stringValue:_t$1},[ct$1]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&__PRIVATE_isServerTimestamp(u)&&(u=__PRIVATE_getPreviousValue(u)),u&&(d.fields[ut$1]=u),{mapValue:d}}(r,e):t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):function(l,u){const d=__PRIVATE_computeTransformOperationBaseValue(l,u),g=asNumber$1(d)+asNumber$1(l.Ae);return isInteger(d)&&isInteger(l.Ae)?__PRIVATE_toInteger(g):__PRIVATE_toDouble(l.serializer,g)}(t,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(t,e,r){return t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):r}function __PRIVATE_computeTransformOperationBaseValue(t,e){return t instanceof __PRIVATE_NumericIncrementTransformOperation?function(a){return isInteger(a)||function(u){return!!u&&"doubleValue"in u}(a)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(t,e){const r=__PRIVATE_coercedFieldValuesArray(e);for(const a of t.elements)r.some(l=>__PRIVATE_valueEquals(l,a))||r.push(a);return{arrayValue:{values:r}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(t,e){let r=__PRIVATE_coercedFieldValuesArray(e);for(const a of t.elements)r=r.filter(l=>!__PRIVATE_valueEquals(l,a));return{arrayValue:{values:r}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function asNumber$1(t){return __PRIVATE_normalizeNumber(t.integerValue||t.doubleValue)}function __PRIVATE_coercedFieldValuesArray(t){return isArray$1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldTransform{constructor(e,r){this.field=e,this.transform=r}}function __PRIVATE_fieldTransformEquals(t,e){return t.field.isEqual(e.field)&&function(a,l){return a instanceof __PRIVATE_ArrayUnionTransformOperation&&l instanceof __PRIVATE_ArrayUnionTransformOperation||a instanceof __PRIVATE_ArrayRemoveTransformOperation&&l instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(a.elements,l.elements,__PRIVATE_valueEquals):a instanceof __PRIVATE_NumericIncrementTransformOperation&&l instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(a.Ae,l.Ae):a instanceof __PRIVATE_ServerTimestampTransform&&l instanceof __PRIVATE_ServerTimestampTransform}(t.transform,e.transform)}class MutationResult{constructor(e,r){this.version=e,this.transformResults=r}}class Precondition{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new __PRIVATE_DeleteMutation(t.key,Precondition.none()):new __PRIVATE_SetMutation(t.key,t.data,Precondition.none());{const r=t.data,a=ObjectValue.empty();let l=new SortedSet(FieldPath$1.comparator);for(let u of e.fields)if(!l.has(u)){let d=r.field(u);d===null&&u.length>1&&(u=u.popLast(),d=r.field(u)),d===null?a.delete(u):a.set(u,d),l=l.add(u)}return new __PRIVATE_PatchMutation(t.key,a,new FieldMask(l.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(t,e,r){t instanceof __PRIVATE_SetMutation?function(l,u,d){const g=l.value.clone(),E=__PRIVATE_serverTransformResults(l.fieldTransforms,u,d.transformResults);g.setAll(E),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(t,e,r):t instanceof __PRIVATE_PatchMutation?function(l,u,d){if(!__PRIVATE_preconditionIsValidForDocument(l.precondition,u))return void u.convertToUnknownDocument(d.version);const g=__PRIVATE_serverTransformResults(l.fieldTransforms,u,d.transformResults),E=u.data;E.setAll(__PRIVATE_getPatch(l)),E.setAll(g),u.convertToFoundDocument(d.version,E).setHasCommittedMutations()}(t,e,r):function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,r)}function __PRIVATE_mutationApplyToLocalView(t,e,r,a){return t instanceof __PRIVATE_SetMutation?function(u,d,g,E){if(!__PRIVATE_preconditionIsValidForDocument(u.precondition,d))return g;const P=u.value.clone(),Z=__PRIVATE_localTransformResults(u.fieldTransforms,E,d);return P.setAll(Z),d.convertToFoundDocument(d.version,P).setHasLocalMutations(),null}(t,e,r,a):t instanceof __PRIVATE_PatchMutation?function(u,d,g,E){if(!__PRIVATE_preconditionIsValidForDocument(u.precondition,d))return g;const P=__PRIVATE_localTransformResults(u.fieldTransforms,E,d),Z=d.data;return Z.setAll(__PRIVATE_getPatch(u)),Z.setAll(P),d.convertToFoundDocument(d.version,Z).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(me=>me.field))}(t,e,r,a):function(u,d,g){return __PRIVATE_preconditionIsValidForDocument(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(t,e,r)}function __PRIVATE_mutationExtractBaseValue(t,e){let r=null;for(const a of t.fieldTransforms){const l=e.data.field(a.field),u=__PRIVATE_computeTransformOperationBaseValue(a.transform,l||null);u!=null&&(r===null&&(r=ObjectValue.empty()),r.set(a.field,u))}return r||null}function __PRIVATE_mutationEquals(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&__PRIVATE_arrayEquals(a,l,(u,d)=>__PRIVATE_fieldTransformEquals(u,d))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,r,a,l=[]){super(),this.key=e,this.value=r,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,r,a,l,u=[]){super(),this.key=e,this.data=r,this.fieldMask=a,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=t.data.field(r);e.set(r,a)}}),e}function __PRIVATE_serverTransformResults(t,e,r){const a=new Map;__PRIVATE_hardAssert(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let l=0;l<r.length;l++){const u=t[l],d=u.transform,g=e.data.field(u.field);a.set(u.field,__PRIVATE_applyTransformOperationToRemoteDocument(d,g,r[l]))}return a}function __PRIVATE_localTransformResults(t,e,r){const a=new Map;for(const l of t){const u=l.transform,d=r.data.field(l.field);a.set(l.field,__PRIVATE_applyTransformOperationToLocalView(u,d,e))}return a}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,r,a,l){this.batchId=e,this.localWriteTime=r,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(e,r){const a=r.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(u,e,a[l])}}applyToLocalView(e,r){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(r=__PRIVATE_mutationApplyToLocalView(a,e,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(r=__PRIVATE_mutationApplyToLocalView(a,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const a=__PRIVATE_newMutationMap();return this.mutations.forEach(l=>{const u=e.get(l.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=r.has(l.key)?null:g;const E=__PRIVATE_calculateOverlayMutation(d,g);E!==null&&a.set(l.key,E),d.isValidDocument()||d.convertToNoDocument(SnapshotVersion.min())}),a}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(r,a)=>__PRIVATE_mutationEquals(r,a))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(r,a)=>__PRIVATE_mutationEquals(r,a))}}class MutationBatchResult{constructor(e,r,a,l){this.batch=e,this.commitVersion=r,this.mutationResults=a,this.docVersions=l}static from(e,r,a){__PRIVATE_hardAssert(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let l=function(){return mt$1}();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,a[d].version);return new MutationBatchResult(e,r,a,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AggregateImpl{constructor(e,r,a){this.alias=e,this.aggregateType=r,this.fieldPath=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt$1,yt$1;function __PRIVATE_isPermanentError(t){switch(t){case N$1.OK:return fail(64938);case N$1.CANCELLED:case N$1.UNKNOWN:case N$1.DEADLINE_EXCEEDED:case N$1.RESOURCE_EXHAUSTED:case N$1.INTERNAL:case N$1.UNAVAILABLE:case N$1.UNAUTHENTICATED:return!1;case N$1.INVALID_ARGUMENT:case N$1.NOT_FOUND:case N$1.ALREADY_EXISTS:case N$1.PERMISSION_DENIED:case N$1.FAILED_PRECONDITION:case N$1.ABORTED:case N$1.OUT_OF_RANGE:case N$1.UNIMPLEMENTED:case N$1.DATA_LOSS:return!0;default:return fail(15467,{code:t})}}function __PRIVATE_mapCodeFromRpcCode(t){if(t===void 0)return __PRIVATE_logError("GRPC error has no .code"),N$1.UNKNOWN;switch(t){case pt$1.OK:return N$1.OK;case pt$1.CANCELLED:return N$1.CANCELLED;case pt$1.UNKNOWN:return N$1.UNKNOWN;case pt$1.DEADLINE_EXCEEDED:return N$1.DEADLINE_EXCEEDED;case pt$1.RESOURCE_EXHAUSTED:return N$1.RESOURCE_EXHAUSTED;case pt$1.INTERNAL:return N$1.INTERNAL;case pt$1.UNAVAILABLE:return N$1.UNAVAILABLE;case pt$1.UNAUTHENTICATED:return N$1.UNAUTHENTICATED;case pt$1.INVALID_ARGUMENT:return N$1.INVALID_ARGUMENT;case pt$1.NOT_FOUND:return N$1.NOT_FOUND;case pt$1.ALREADY_EXISTS:return N$1.ALREADY_EXISTS;case pt$1.PERMISSION_DENIED:return N$1.PERMISSION_DENIED;case pt$1.FAILED_PRECONDITION:return N$1.FAILED_PRECONDITION;case pt$1.ABORTED:return N$1.ABORTED;case pt$1.OUT_OF_RANGE:return N$1.OUT_OF_RANGE;case pt$1.UNIMPLEMENTED:return N$1.UNIMPLEMENTED;case pt$1.DATA_LOSS:return N$1.DATA_LOSS;default:return fail(39323,{code:t})}}(yt$1=pt$1||(pt$1={}))[yt$1.OK=0]="OK",yt$1[yt$1.CANCELLED=1]="CANCELLED",yt$1[yt$1.UNKNOWN=2]="UNKNOWN",yt$1[yt$1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt$1[yt$1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt$1[yt$1.NOT_FOUND=5]="NOT_FOUND",yt$1[yt$1.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt$1[yt$1.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt$1[yt$1.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt$1[yt$1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt$1[yt$1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt$1[yt$1.ABORTED=10]="ABORTED",yt$1[yt$1.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt$1[yt$1.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt$1[yt$1.INTERNAL=13]="INTERNAL",yt$1[yt$1.UNAVAILABLE=14]="UNAVAILABLE",yt$1[yt$1.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St$1=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(t){const e=__PRIVATE_newTextEncoder().encode(t),r=new Md5;return r.update(e),new Uint8Array(r.digest())}function __PRIVATE_get64BitUints(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),a=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Integer([r,a],0),new Integer([l,u],0)]}class BloomFilter{constructor(e,r,a){if(this.bitmap=e,this.padding=r,this.hashCount=a,r<0||r>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${r}`);if(a<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${a}`);if(e.length===0&&r!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Integer.fromNumber(this.ge)}ye(e,r,a){let l=e.add(r.multiply(Integer.fromNumber(a)));return l.compare(St$1)===1&&(l=new Integer([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=__PRIVATE_getMd5HashValue(e),[a,l]=__PRIVATE_get64BitUints(r);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,l,u);if(!this.we(d))return!1}return!0}static create(e,r,a){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new BloomFilter(u,l,r);return a.forEach(g=>d.insert(g)),d}insert(e){if(this.ge===0)return;const r=__PRIVATE_getMd5HashValue(e),[a,l]=__PRIVATE_get64BitUints(r);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,l,u);this.Se(d)}}Se(e){const r=Math.floor(e/8),a=e%8;this.bitmap[r]|=1<<a}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,r,a,l,u){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,r,a){const l=new Map;return l.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,r,a)),new RemoteEvent(SnapshotVersion.min(),l,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,r,a,l,u){this.resumeToken=e,this.current=r,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,r,a){return new TargetChange(a,r,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,r,a,l){this.be=e,this.removedTargetIds=r,this.key=a,this.De=l}}class __PRIVATE_ExistenceFilterChange{constructor(e,r){this.targetId=e,this.Ce=r}}class __PRIVATE_WatchTargetChange{constructor(e,r,a=ByteString.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=r,this.resumeToken=a,this.cause=l}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Fe=__PRIVATE_snapshotChangesMap(),this.Me=ByteString.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=__PRIVATE_documentKeySet(),r=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();return this.Fe.forEach((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:r=r.add(l);break;case 1:a=a.add(l);break;default:fail(38017,{changeType:u})}}),new TargetChange(this.Me,this.xe,e,r,a)}qe(){this.Oe=!1,this.Fe=__PRIVATE_snapshotChangesMap()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.Ge=e,this.ze=new Map,this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const a=this.nt(r);switch(e.state){case 0:this.rt(r)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),a.Le(e.resumeToken));break;default:fail(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((a,l)=>{this.rt(l)&&r(l)})}st(e){const r=e.targetId,a=e.Ce.count,l=this.ot(r);if(l){const u=l.target;if(__PRIVATE_targetIsDocumentTarget(u))if(a===0){const d=new DocumentKey(u.path);this.et(r,d,MutableDocument.newNoDocument(d,SnapshotVersion.min()))}else __PRIVATE_hardAssert(a===1,20013,{expectedCount:a});else{const d=this._t(r);if(d!==a){const g=this.ut(e),E=g?this.ct(g,e,d):1;if(E!==0){this.it(r);const P=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,P)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:u=0}=r;let d,g;try{d=__PRIVATE_normalizeByteString(a).toUint8Array()}catch(E){if(E instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{g=new BloomFilter(d,l,u)}catch(E){return __PRIVATE_logWarn(E instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return g.ge===0?null:g}ct(e,r,a){return r.Ce.count===a-this.Pt(e,r.targetId)?0:2}Pt(e,r){const a=this.Ge.getRemoteKeysForTarget(r);let l=0;return a.forEach(u=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(r,u,null),l++)}),l}Tt(e){const r=new Map;this.ze.forEach((u,d)=>{const g=this.ot(d);if(g){if(u.current&&__PRIVATE_targetIsDocumentTarget(g.target)){const E=new DocumentKey(g.target.path);this.It(E).has(d)||this.Et(d,E)||this.et(d,E,MutableDocument.newNoDocument(E,e))}u.Be&&(r.set(d,u.ke()),u.qe())}});let a=__PRIVATE_documentKeySet();this.He.forEach((u,d)=>{let g=!0;d.forEachWhile(E=>{const P=this.ot(E);return!P||P.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(a=a.add(u))}),this.je.forEach((u,d)=>d.setReadTime(e));const l=new RemoteEvent(e,r,this.Ye,this.je,a);return this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator),l}Xe(e,r){if(!this.rt(e))return;const a=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,a),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,a){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,r)?l.Qe(r,1):l.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),a&&(this.je=this.je.insert(r,a))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new __PRIVATE_TargetState,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new SortedSet(__PRIVATE_primitiveComparator),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new __PRIVATE_TargetState),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const bt$1={asc:"ASCENDING",desc:"DESCENDING"},Dt$1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ct$1={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function __PRIVATE_toInt32Proto(t,e){return t.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(t,e){return toTimestamp(t,e.toTimestamp())}function __PRIVATE_fromVersion(t){return __PRIVATE_hardAssert(!!t,49232),SnapshotVersion.fromTimestamp(function(r){const a=__PRIVATE_normalizeTimestamp(r);return new Timestamp(a.seconds,a.nanos)}(t))}function __PRIVATE_toResourceName(t,e){return __PRIVATE_toResourcePath(t,e).canonicalString()}function __PRIVATE_toResourcePath(t,e){const r=function(l){return new ResourcePath(["projects",l.projectId,"databases",l.database])}(t).child("documents");return e===void 0?r:r.child(e)}function __PRIVATE_fromResourceName(t){const e=ResourcePath.fromString(t);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(t,e){return __PRIVATE_toResourceName(t.databaseId,e.path)}function fromName(t,e){const r=__PRIVATE_fromResourceName(e);if(r.get(1)!==t.databaseId.projectId)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(r))}function __PRIVATE_toQueryPath(t,e){return __PRIVATE_toResourceName(t.databaseId,e)}function __PRIVATE_fromQueryPath(t){const e=__PRIVATE_fromResourceName(t);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(t){return new ResourcePath(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(t){return __PRIVATE_hardAssert(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function __PRIVATE_toMutationDocument(t,e,r){return{name:__PRIVATE_toName(t,e),fields:r.value.mapValue.fields}}function __PRIVATE_fromWatchChange(t,e){let r;if("targetChange"in e){e.targetChange;const a=function(P){return P==="NO_CHANGE"?0:P==="ADD"?1:P==="REMOVE"?2:P==="CURRENT"?3:P==="RESET"?4:fail(39313,{state:P})}(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=function(P,Z){return P.useProto3Json?(__PRIVATE_hardAssert(Z===void 0||typeof Z=="string",58123),ByteString.fromBase64String(Z||"")):(__PRIVATE_hardAssert(Z===void 0||Z instanceof Buffer||Z instanceof Uint8Array,16193),ByteString.fromUint8Array(Z||new Uint8Array))}(t,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(P){const Z=P.code===void 0?N$1.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(P.code);return new FirestoreError(Z,P.message||"")}(d);r=new __PRIVATE_WatchTargetChange(a,l,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const l=fromName(t,a.document.name),u=__PRIVATE_fromVersion(a.document.updateTime),d=a.document.createTime?__PRIVATE_fromVersion(a.document.createTime):SnapshotVersion.min(),g=new ObjectValue({mapValue:{fields:a.document.fields}}),E=MutableDocument.newFoundDocument(l,u,d,g),P=a.targetIds||[],Z=a.removedTargetIds||[];r=new __PRIVATE_DocumentWatchChange(P,Z,E.key,E)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const l=fromName(t,a.document),u=a.readTime?__PRIVATE_fromVersion(a.readTime):SnapshotVersion.min(),d=MutableDocument.newNoDocument(l,u),g=a.removedTargetIds||[];r=new __PRIVATE_DocumentWatchChange([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const l=fromName(t,a.document),u=a.removedTargetIds||[];r=new __PRIVATE_DocumentWatchChange([],u,l,null)}else{if(!("filter"in e))return fail(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:l=0,unchangedNames:u}=a,d=new ExistenceFilter(l,u),g=a.targetId;r=new __PRIVATE_ExistenceFilterChange(g,d)}}return r}function toMutation(t,e){let r;if(e instanceof __PRIVATE_SetMutation)r={update:__PRIVATE_toMutationDocument(t,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)r={delete:__PRIVATE_toName(t,e.key)};else if(e instanceof __PRIVATE_PatchMutation)r={update:__PRIVATE_toMutationDocument(t,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{Vt:e.type});r={verify:__PRIVATE_toName(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(a=>function(u,d){const g=d.transform;if(g instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw fail(20930,{transform:d.transform})}(0,a))),e.precondition.isNone||(r.currentDocument=function(l,u){return u.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:fail(27497)}(t,e.precondition)),r}function __PRIVATE_fromWriteResults(t,e){return t&&t.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),t.map(r=>function(l,u){let d=l.updateTime?__PRIVATE_fromVersion(l.updateTime):__PRIVATE_fromVersion(u);return d.isEqual(SnapshotVersion.min())&&(d=__PRIVATE_fromVersion(u)),new MutationResult(d,l.transformResults||[])}(r,e))):[]}function __PRIVATE_toDocumentsTarget(t,e){return{documents:[__PRIVATE_toQueryPath(t,e.path)]}}function __PRIVATE_toQueryTarget(t,e){const r={structuredQuery:{}},a=e.path;let l;e.collectionGroup!==null?(l=a,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=a.popLast(),r.structuredQuery.from=[{collectionId:a.lastSegment()}]),r.parent=__PRIVATE_toQueryPath(t,l);const u=function(P){if(P.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(P,"and"))}(e.filters);u&&(r.structuredQuery.where=u);const d=function(P){if(P.length!==0)return P.map(Z=>function(_e){return{field:__PRIVATE_toFieldPathReference(_e.field),direction:__PRIVATE_toDirection(_e.dir)}}(Z))}(e.orderBy);d&&(r.structuredQuery.orderBy=d);const g=__PRIVATE_toInt32Proto(t,e.limit);return g!==null&&(r.structuredQuery.limit=g),e.startAt&&(r.structuredQuery.startAt=function(P){return{before:P.inclusive,values:P.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(P){return{before:!P.inclusive,values:P.position}}(e.endAt)),{ft:r,parent:l}}function __PRIVATE_toRunAggregationQueryRequest(t,e,r,a){const{ft:l,parent:u}=__PRIVATE_toQueryTarget(t,e),d={},g=[];let E=0;return r.forEach(P=>{const Z="aggregate_"+E++;d[Z]=P.alias,P.aggregateType==="count"?g.push({alias:Z,count:{}}):P.aggregateType==="avg"?g.push({alias:Z,avg:{field:__PRIVATE_toFieldPathReference(P.fieldPath)}}):P.aggregateType==="sum"&&g.push({alias:Z,sum:{field:__PRIVATE_toFieldPathReference(P.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:g,structuredQuery:l.structuredQuery},parent:l.parent},gt:d,parent:u}}function __PRIVATE_convertQueryTargetToQuery(t){let e=__PRIVATE_fromQueryPath(t.parent);const r=t.structuredQuery,a=r.from?r.from.length:0;let l=null;if(a>0){__PRIVATE_hardAssert(a===1,65062);const Z=r.from[0];Z.allDescendants?l=Z.collectionId:e=e.child(Z.collectionId)}let u=[];r.where&&(u=function(me){const _e=__PRIVATE_fromFilter(me);return _e instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(_e)?_e.getFilters():[_e]}(r.where));let d=[];r.orderBy&&(d=function(me){return me.map(_e=>function(Xe){return new OrderBy(__PRIVATE_fromFieldPathReference(Xe.field),function(Do){switch(Do){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Xe.direction))}(_e))}(r.orderBy));let g=null;r.limit&&(g=function(me){let _e;return _e=typeof me=="object"?me.value:me,__PRIVATE_isNullOrUndefined(_e)?null:_e}(r.limit));let E=null;r.startAt&&(E=function(me){const _e=!!me.before,He=me.values||[];return new Bound(He,_e)}(r.startAt));let P=null;return r.endAt&&(P=function(me){const _e=!me.before,He=me.values||[];return new Bound(He,_e)}(r.endAt)),__PRIVATE_newQuery(e,l,d,u,g,"F",E,P)}function __PRIVATE_toListenRequestLabels(t,e){const r=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:l})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function __PRIVATE_fromFilter(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const a=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(t):t.fieldFilter!==void 0?function(r){return FieldFilter.create(__PRIVATE_fromFieldPathReference(r.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return CompositeFilter.create(r.compositeFilter.filters.map(a=>__PRIVATE_fromFilter(a)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(r.compositeFilter.op))}(t):fail(30097,{filter:t})}function __PRIVATE_toDirection(t){return bt$1[t]}function __PRIVATE_toOperatorName(t){return Dt$1[t]}function __PRIVATE_toCompositeOperatorName(t){return Ct$1[t]}function __PRIVATE_toFieldPathReference(t){return{fieldPath:t.canonicalString()}}function __PRIVATE_fromFieldPathReference(t){return FieldPath$1.fromServerFormat(t.fieldPath)}function __PRIVATE_toFilter(t){return t instanceof FieldFilter?function(r){if(r.op==="=="){if(__PRIVATE_isNanValue(r.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(r.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(r.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(__PRIVATE_isNanValue(r.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(r.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(r.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(r.field),op:__PRIVATE_toOperatorName(r.op),value:r.value}}}(t):t instanceof CompositeFilter?function(r){const a=r.getFilters().map(l=>__PRIVATE_toFilter(l));return a.length===1?a[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(r.op),filters:a}}}(t):fail(54877,{filter:t})}function __PRIVATE_toDocumentMask(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,r,a,l,u=SnapshotVersion.min(),d=SnapshotVersion.min(),g=ByteString.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=r,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=E}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.yt=e}}function __PRIVATE_fromBundledQuery(t){const e=__PRIVATE_convertQueryTargetToQuery({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,r){return this.Cn.add(r),PersistencePromise.resolve()}getCollectionParents(e,r){return PersistencePromise.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return PersistencePromise.resolve()}deleteFieldIndex(e,r){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,r){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,r){return PersistencePromise.resolve(null)}getIndexType(e,r){return PersistencePromise.resolve(0)}getFieldIndexes(e,r){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,r){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,r){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,r,a){return PersistencePromise.resolve()}updateIndexEntries(e,r){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const r=e.lastSegment(),a=e.popLast(),l=this.index[r]||new SortedSet(ResourcePath.comparator),u=!l.has(a);return this.index[r]=l.add(a),u}has(e){const r=e.lastSegment(),a=e.popLast(),l=this.index[r];return l&&l.has(a)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt$1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ot$1=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Ot$1,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new __PRIVATE_TargetIdGenerator(0)}static cr(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt$1="LruGarbageCollector",Bt$1=1048576;function __PRIVATE_bufferEntryComparator([t,e],[r,a]){const l=__PRIVATE_primitiveComparator(t,r);return l===0?__PRIVATE_primitiveComparator(e,a):l}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Ir=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();__PRIVATE_bufferEntryComparator(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,r,a){this.garbageCollector=e,this.asyncQueue=r,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){__PRIVATE_logDebug(Nt$1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){__PRIVATE_isIndexedDbTransactionError(r)?__PRIVATE_logDebug(Nt$1,"Ignoring IndexedDB error during garbage collection: ",r):await __PRIVATE_ignoreIfPrimaryLeaseLoss(r)}await this.Vr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(a=>Math.floor(r/100*a))}nthSequenceNumber(e,r){if(r===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ce);const a=new __PRIVATE_RollingSequenceNumberBuffer(r);return this.mr.forEachTarget(e,l=>a.Ar(l.sequenceNumber)).next(()=>this.mr.pr(e,l=>a.Ar(l))).next(()=>a.maxValue)}removeTargets(e,r,a){return this.mr.removeTargets(e,r,a)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(xt$1)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xt$1):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let a,l,u,d,g,E,P;const Z=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(me=>(me>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${me}`),l=this.params.maximumSequenceNumbersToCollect):l=me,d=Date.now(),this.nthSequenceNumber(e,l))).next(me=>(a=me,g=Date.now(),this.removeTargets(e,a,r))).next(me=>(u=me,E=Date.now(),this.removeOrphanedDocuments(e,a))).next(me=>(P=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-Z}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${u} targets in `+(E-g)+`ms
	Removed ${me} documents in `+(P-E)+`ms
Total Duration: ${P-Z}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:me})))}}function __PRIVATE_newLruGarbageCollector(t,e){return new __PRIVATE_LruGarbageCollectorImpl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const a=this.changes.get(r);return a!==void 0?PersistencePromise.resolve(a):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,r,a,l){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=l}getDocument(e,r){let a=null;return this.documentOverlayCache.getOverlay(e,r).next(l=>(a=l,this.remoteDocumentCache.getEntry(e,r))).next(l=>(a!==null&&__PRIVATE_mutationApplyToLocalView(a.mutation,l,FieldMask.empty(),Timestamp.now()),l))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.getLocalViewOfDocuments(e,a,__PRIVATE_documentKeySet()).next(()=>a))}getLocalViewOfDocuments(e,r,a=__PRIVATE_documentKeySet()){const l=__PRIVATE_newOverlayMap();return this.populateOverlays(e,l,r).next(()=>this.computeViews(e,r,l,a).next(u=>{let d=documentMap();return u.forEach((g,E)=>{d=d.insert(g,E.overlayedDocument)}),d}))}getOverlayedDocuments(e,r){const a=__PRIVATE_newOverlayMap();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,__PRIVATE_documentKeySet()))}populateOverlays(e,r,a){const l=[];return a.forEach(u=>{r.has(u)||l.push(u)}),this.documentOverlayCache.getOverlays(e,l).next(u=>{u.forEach((d,g)=>{r.set(d,g)})})}computeViews(e,r,a,l){let u=__PRIVATE_mutableDocumentMap();const d=__PRIVATE_newDocumentKeyMap(),g=function(){return __PRIVATE_newDocumentKeyMap()}();return r.forEach((E,P)=>{const Z=a.get(P.key);l.has(P.key)&&(Z===void 0||Z.mutation instanceof __PRIVATE_PatchMutation)?u=u.insert(P.key,P):Z!==void 0?(d.set(P.key,Z.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(Z.mutation,P,Z.mutation.getFieldMask(),Timestamp.now())):d.set(P.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,u).next(E=>(E.forEach((P,Z)=>d.set(P,Z)),r.forEach((P,Z)=>g.set(P,new OverlayedDocument(Z,d.get(P)??null))),g))}recalculateAndSaveOverlays(e,r){const a=__PRIVATE_newDocumentKeyMap();let l=new SortedMap((d,g)=>d-g),u=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(d=>{for(const g of d)g.keys().forEach(E=>{const P=r.get(E);if(P===null)return;let Z=a.get(E)||FieldMask.empty();Z=g.applyToLocalView(P,Z),a.set(E,Z);const me=(l.get(g.batchId)||__PRIVATE_documentKeySet()).add(E);l=l.insert(g.batchId,me)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const E=g.getNext(),P=E.key,Z=E.value,me=__PRIVATE_newMutationMap();Z.forEach(_e=>{if(!u.has(_e)){const He=__PRIVATE_calculateOverlayMutation(r.get(_e),a.get(_e));He!==null&&me.set(_e,He),u=u.add(_e)}}),d.push(this.documentOverlayCache.saveOverlays(e,P,me))}return PersistencePromise.waitFor(d)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,r,a,l){return function(d){return DocumentKey.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):__PRIVATE_isCollectionGroupQuery(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,a,l):this.getDocumentsMatchingCollectionQuery(e,r,a,l)}getNextDocuments(e,r,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,a,l).next(u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,a.largestBatchId,l-u.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let g=U$1,E=u;return d.next(P=>PersistencePromise.forEach(P,(Z,me)=>(g<me.largestBatchId&&(g=me.largestBatchId),u.get(Z)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,Z).next(_e=>{E=E.insert(Z,_e)}))).next(()=>this.populateOverlays(e,P,u)).next(()=>this.computeViews(e,E,P,__PRIVATE_documentKeySet())).next(Z=>({batchId:g,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(Z)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new DocumentKey(r)).next(a=>{let l=documentMap();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l})}getDocumentsMatchingCollectionGroupQuery(e,r,a,l){const u=r.collectionGroup;let d=documentMap();return this.indexManager.getCollectionParents(e,u).next(g=>PersistencePromise.forEach(g,E=>{const P=function(me,_e){return new __PRIVATE_QueryImpl(_e,null,me.explicitOrderBy.slice(),me.filters.slice(),me.limit,me.limitType,me.startAt,me.endAt)}(r,E.child(u));return this.getDocumentsMatchingCollectionQuery(e,P,a,l).next(Z=>{Z.forEach((me,_e)=>{d=d.insert(me,_e)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,r,a,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,a.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,a,u,l))).next(d=>{u.forEach((E,P)=>{const Z=P.getKey();d.get(Z)===null&&(d=d.insert(Z,MutableDocument.newInvalidDocument(Z)))});let g=documentMap();return d.forEach((E,P)=>{const Z=u.get(E);Z!==void 0&&__PRIVATE_mutationApplyToLocalView(Z.mutation,P,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(r,P)&&(g=g.insert(E,P))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return PersistencePromise.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(l){return{id:l.id,version:l.version,createTime:__PRIVATE_fromVersion(l.createTime)}}(r)),PersistencePromise.resolve()}getNamedQuery(e,r){return PersistencePromise.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(l){return{name:l.name,query:__PRIVATE_fromBundledQuery(l.bundledQuery),readTime:__PRIVATE_fromVersion(l.readTime)}}(r)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.qr=new Map}getOverlay(e,r){return PersistencePromise.resolve(this.overlays.get(r))}getOverlays(e,r){const a=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(r,l=>this.getOverlay(e,l).next(u=>{u!==null&&a.set(l,u)})).next(()=>a)}saveOverlays(e,r,a){return a.forEach((l,u)=>{this.St(e,r,u)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,r,a){const l=this.qr.get(a);return l!==void 0&&(l.forEach(u=>this.overlays=this.overlays.remove(u)),this.qr.delete(a)),PersistencePromise.resolve()}getOverlaysForCollection(e,r,a){const l=__PRIVATE_newOverlayMap(),u=r.length+1,d=new DocumentKey(r.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const E=g.getNext().value,P=E.getKey();if(!r.isPrefixOf(P.path))break;P.path.length===u&&E.largestBatchId>a&&l.set(E.getKey(),E)}return PersistencePromise.resolve(l)}getOverlaysForCollectionGroup(e,r,a,l){let u=new SortedMap((P,Z)=>P-Z);const d=this.overlays.getIterator();for(;d.hasNext();){const P=d.getNext().value;if(P.getKey().getCollectionGroup()===r&&P.largestBatchId>a){let Z=u.get(P.largestBatchId);Z===null&&(Z=__PRIVATE_newOverlayMap(),u=u.insert(P.largestBatchId,Z)),Z.set(P.getKey(),P)}}const g=__PRIVATE_newOverlayMap(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((P,Z)=>g.set(P,Z)),!(g.size()>=l)););return PersistencePromise.resolve(g)}St(e,r,a){const l=this.overlays.get(a.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(a.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new Overlay(r,a));let u=this.qr.get(r);u===void 0&&(u=__PRIVATE_documentKeySet(),this.qr.set(r,u)),this.qr.set(r,u.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Qr=new SortedSet(__PRIVATE_DocReference.$r),this.Ur=new SortedSet(__PRIVATE_DocReference.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const a=new __PRIVATE_DocReference(e,r);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,r){e.forEach(a=>this.addReference(a,r))}removeReference(e,r){this.Gr(new __PRIVATE_DocReference(e,r))}zr(e,r){e.forEach(a=>this.removeReference(a,r))}jr(e){const r=new DocumentKey(new ResourcePath([])),a=new __PRIVATE_DocReference(r,e),l=new __PRIVATE_DocReference(r,e+1),u=[];return this.Ur.forEachInRange([a,l],d=>{this.Gr(d),u.push(d.key)}),u}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new DocumentKey(new ResourcePath([])),a=new __PRIVATE_DocReference(r,e),l=new __PRIVATE_DocReference(r,e+1);let u=__PRIVATE_documentKeySet();return this.Ur.forEachInRange([a,l],d=>{u=u.add(d.key)}),u}containsKey(e){const r=new __PRIVATE_DocReference(e,0),a=this.Qr.firstAfterOrEqual(r);return a!==null&&e.isEqual(a.key)}}class __PRIVATE_DocReference{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return DocumentKey.comparator(e.key,r.key)||__PRIVATE_primitiveComparator(e.Yr,r.Yr)}static Kr(e,r){return __PRIVATE_primitiveComparator(e.Yr,r.Yr)||DocumentKey.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new SortedSet(__PRIVATE_DocReference.$r)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,a,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new MutationBatch(u,r,a,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new __PRIVATE_DocReference(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return PersistencePromise.resolve(d)}lookupMutationBatch(e,r){return PersistencePromise.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const a=r+1,l=this.ei(a),u=l<0?0:l;return PersistencePromise.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?j$1:this.tr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const a=new __PRIVATE_DocReference(r,0),l=new __PRIVATE_DocReference(r,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([a,l],d=>{const g=this.Xr(d.Yr);u.push(g)}),PersistencePromise.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new SortedSet(__PRIVATE_primitiveComparator);return r.forEach(l=>{const u=new __PRIVATE_DocReference(l,0),d=new __PRIVATE_DocReference(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],g=>{a=a.add(g.Yr)})}),PersistencePromise.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,l=a.length+1;let u=a;DocumentKey.isDocumentKey(u)||(u=u.child(""));const d=new __PRIVATE_DocReference(new DocumentKey(u),0);let g=new SortedSet(__PRIVATE_primitiveComparator);return this.Zr.forEachWhile(E=>{const P=E.key.path;return!!a.isPrefixOf(P)&&(P.length===l&&(g=g.add(E.Yr)),!0)},d),PersistencePromise.resolve(this.ti(g))}ti(e){const r=[];return e.forEach(a=>{const l=this.Xr(a);l!==null&&r.push(l)}),r}removeMutationBatch(e,r){__PRIVATE_hardAssert(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return PersistencePromise.forEach(r.mutations,l=>{const u=new __PRIVATE_DocReference(l.key,r.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Zr=a})}ir(e){}containsKey(e,r){const a=new __PRIVATE_DocReference(r,0),l=this.Zr.firstAfterOrEqual(a);return PersistencePromise.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ri=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const a=r.key,l=this.docs.get(a),u=l?l.size:0,d=this.ri(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const a=this.docs.get(r);return PersistencePromise.resolve(a?a.document.mutableCopy():MutableDocument.newInvalidDocument(r))}getEntries(e,r){let a=__PRIVATE_mutableDocumentMap();return r.forEach(l=>{const u=this.docs.get(l);a=a.insert(l,u?u.document.mutableCopy():MutableDocument.newInvalidDocument(l))}),PersistencePromise.resolve(a)}getDocumentsMatchingQuery(e,r,a,l){let u=__PRIVATE_mutableDocumentMap();const d=r.path,g=new DocumentKey(d.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(g);for(;E.hasNext();){const{key:P,value:{document:Z}}=E.getNext();if(!d.isPrefixOf(P.path))break;P.path.length>d.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(Z),a)<=0||(l.has(Z.key)||__PRIVATE_queryMatches(r,Z))&&(u=u.insert(Z.key,Z.mutableCopy()))}return PersistencePromise.resolve(u)}getAllFromCollectionGroup(e,r,a,l){fail(9500)}ii(e,r){return PersistencePromise.forEach(this.docs,a=>r(a))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((a,l)=>{l.isValidDocument()?r.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(a)}),PersistencePromise.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.si=new ObjectMap(r=>__PRIVATE_canonifyTarget(r),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.oi=0,this._i=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ai=__PRIVATE_TargetIdGenerator.ur()}forEachTarget(e,r){return this.si.forEach((a,l)=>r(l)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.oi&&(this.oi=r),PersistencePromise.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new __PRIVATE_TargetIdGenerator(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,r){return this.Pr(r),PersistencePromise.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,r,a){let l=0;const u=[];return this.si.forEach((d,g)=>{g.sequenceNumber<=r&&a.get(g.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)}),PersistencePromise.waitFor(u).next(()=>l)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,r){const a=this.si.get(r)||null;return PersistencePromise.resolve(a)}addMatchingKeys(e,r,a){return this._i.Wr(r,a),PersistencePromise.resolve()}removeMatchingKeys(e,r,a){this._i.zr(r,a);const l=this.persistence.referenceDelegate,u=[];return l&&r.forEach(d=>{u.push(l.markPotentiallyOrphaned(e,d))}),PersistencePromise.waitFor(u)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,r){const a=this._i.Hr(r);return PersistencePromise.resolve(a)}containsKey(e,r){return PersistencePromise.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,r){this.ui={},this.overlays={},this.ci=new __PRIVATE_ListenSequence(0),this.li=!1,this.li=!0,this.hi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Pi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(l){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(l)}(a=>this.referenceDelegate.Ti(a)),this.serializer=new __PRIVATE_LocalSerializer(r),this.Ii=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let a=this.ui[e.toKey()];return a||(a=new __PRIVATE_MemoryMutationQueue(r,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,a){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const l=new __PRIVATE_MemoryTransaction(this.ci.next());return this.referenceDelegate.Ei(),a(l).next(u=>this.referenceDelegate.di(l).next(()=>u)).toPromise().then(u=>(l.raiseOnCommittedEvent(),u))}Ai(e,r){return PersistencePromise.or(Object.values(this.ui).map(a=>()=>a.containsKey(e,r)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ri=new __PRIVATE_ReferenceSet,this.Vi=null}static mi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get fi(){if(this.Vi)return this.Vi;throw fail(60996)}addReference(e,r,a){return this.Ri.addReference(a,r),this.fi.delete(a.toString()),PersistencePromise.resolve()}removeReference(e,r,a){return this.Ri.removeReference(a,r),this.fi.add(a.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),PersistencePromise.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(l=>this.fi.add(l.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,r.targetId).next(l=>{l.forEach(u=>this.fi.add(u.toString()))}).next(()=>a.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.fi,a=>{const l=DocumentKey.fromPath(a);return this.gi(e,l).next(u=>{u||r.removeEntry(l,SnapshotVersion.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(a=>{a?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,r){this.persistence=e,this.pi=new ObjectMap(a=>__PRIVATE_encodeResourcePath(a.path),(a,l)=>a.isEqual(l)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,r)}static mi(e,r){return new __PRIVATE_MemoryLruDelegate(e,r)}Ei(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>r.next(l=>a+l))}wr(e){let r=0;return this.pr(e,a=>{r++}).next(()=>r)}pr(e,r){return PersistencePromise.forEach(this.pi,(a,l)=>this.br(e,a,l).next(u=>u?PersistencePromise.resolve():r(l)))}removeTargets(e,r,a){return this.persistence.getTargetCache().removeTargets(e,r,a)}removeOrphanedDocuments(e,r){let a=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,d=>this.br(e,d,r).next(g=>{g||(a++,u.removeEntry(d,SnapshotVersion.min()))})).next(()=>u.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,r){const a=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,r,a){return this.pi.set(a,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,r,a){return this.pi.set(a,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),PersistencePromise.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=__PRIVATE_estimateByteSize(e.data.value)),r}br(e,r,a){return PersistencePromise.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const l=this.pi.get(r);return PersistencePromise.resolve(l!==void 0&&l>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,r,a,l){this.targetId=e,this.fromCache=r,this.Es=a,this.ds=l}static As(e,r){let a=__PRIVATE_documentKeySet(),l=__PRIVATE_documentKeySet();for(const u of r.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new __PRIVATE_LocalViewChanges(e,r.fromCache,a,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,a,l){const u={result:null};return this.ys(e,r).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.ws(e,r,l,a).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new QueryContext;return this.Ss(e,r,d).next(g=>{if(u.result=g,this.Vs)return this.bs(e,r,d,g.size)})}).next(()=>u.result)}bs(e,r,a,l){return a.documentReadCount<this.fs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(r),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.gs*l?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(r))):PersistencePromise.resolve())}ys(e,r){if(__PRIVATE_queryMatchesAllDocuments(r))return PersistencePromise.resolve(null);let a=__PRIVATE_queryToTarget(r);return this.indexManager.getIndexType(e,a).next(l=>l===0?null:(r.limit!==null&&l===1&&(r=__PRIVATE_queryWithLimit(r,null,"F"),a=__PRIVATE_queryToTarget(r)),this.indexManager.getDocumentsMatchingTarget(e,a).next(u=>{const d=__PRIVATE_documentKeySet(...u);return this.ps.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,a).next(E=>{const P=this.Ds(r,g);return this.Cs(r,P,d,E.readTime)?this.ys(e,__PRIVATE_queryWithLimit(r,null,"F")):this.vs(e,P,r,E)}))})))}ws(e,r,a,l){return __PRIVATE_queryMatchesAllDocuments(r)||l.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ps.getDocuments(e,a).next(u=>{const d=this.Ds(r,u);return this.Cs(r,d,a,l)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),__PRIVATE_stringifyQuery(r)),this.vs(e,d,r,__PRIVATE_newIndexOffsetSuccessorFromReadTime(l,U$1)).next(g=>g))})}Ds(e,r){let a=new SortedSet(__PRIVATE_newQueryComparator(e));return r.forEach((l,u)=>{__PRIVATE_queryMatches(e,u)&&(a=a.add(u))}),a}Cs(e,r,a,l){if(e.limit===null)return!1;if(a.size!==r.size)return!0;const u=e.limitType==="F"?r.last():r.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,r,a){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(r)),this.ps.getDocumentsMatchingQuery(e,r,IndexOffset.min(),a)}vs(e,r,a,l){return this.ps.getDocumentsMatchingQuery(e,a,l).next(u=>(r.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut$1="LocalStore",Kt$1=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,r,a,l){this.persistence=e,this.Fs=r,this.serializer=l,this.Ms=new SortedMap(__PRIVATE_primitiveComparator),this.xs=new ObjectMap(u=>__PRIVATE_canonifyTarget(u),__PRIVATE_targetEquals),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function __PRIVATE_newLocalStore(t,e,r,a){return new __PRIVATE_LocalStoreImpl(t,e,r,a)}async function __PRIVATE_localStoreHandleUserChange(t,e){const r=__PRIVATE_debugCast(t);return await r.persistence.runTransaction("Handle user change","readonly",a=>{let l;return r.mutationQueue.getAllMutationBatches(a).next(u=>(l=u,r.Bs(e),r.mutationQueue.getAllMutationBatches(a))).next(u=>{const d=[],g=[];let E=__PRIVATE_documentKeySet();for(const P of l){d.push(P.batchId);for(const Z of P.mutations)E=E.add(Z.key)}for(const P of u){g.push(P.batchId);for(const Z of P.mutations)E=E.add(Z.key)}return r.localDocuments.getDocuments(a,E).next(P=>({Ls:P,removedBatchIds:d,addedBatchIds:g}))})})}function __PRIVATE_localStoreAcknowledgeBatch(t,e){const r=__PRIVATE_debugCast(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const l=e.batch.keys(),u=r.Ns.newChangeBuffer({trackRemovals:!0});return function(g,E,P,Z){const me=P.batch,_e=me.keys();let He=PersistencePromise.resolve();return _e.forEach(Xe=>{He=He.next(()=>Z.getEntry(E,Xe)).next(wt=>{const Do=P.docVersions.get(Xe);__PRIVATE_hardAssert(Do!==null,48541),wt.version.compareTo(Do)<0&&(me.applyToRemoteDocument(wt,P),wt.isValidDocument()&&(wt.setReadTime(P.commitVersion),Z.addEntry(wt)))})}),He.next(()=>g.mutationQueue.removeMutationBatch(E,me))}(r,a,e,u).next(()=>u.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,l,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(g){let E=__PRIVATE_documentKeySet();for(let P=0;P<g.mutationResults.length;++P)g.mutationResults[P].transformResults.length>0&&(E=E.add(g.batch.mutations[P].key));return E}(e))).next(()=>r.localDocuments.getDocuments(a,l))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t){const e=__PRIVATE_debugCast(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(t,e){const r=__PRIVATE_debugCast(t),a=e.snapshotVersion;let l=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=r.Ns.newChangeBuffer({trackRemovals:!0});l=r.Ms;const g=[];e.targetChanges.forEach((Z,me)=>{const _e=l.get(me);if(!_e)return;g.push(r.Pi.removeMatchingKeys(u,Z.removedDocuments,me).next(()=>r.Pi.addMatchingKeys(u,Z.addedDocuments,me)));let He=_e.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(me)!==null?He=He.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):Z.resumeToken.approximateByteSize()>0&&(He=He.withResumeToken(Z.resumeToken,a)),l=l.insert(me,He),function(wt,Do,sr){return wt.resumeToken.approximateByteSize()===0||Do.snapshotVersion.toMicroseconds()-wt.snapshotVersion.toMicroseconds()>=Kt$1?!0:sr.addedDocuments.size+sr.modifiedDocuments.size+sr.removedDocuments.size>0}(_e,He,Z)&&g.push(r.Pi.updateTargetData(u,He))});let E=__PRIVATE_mutableDocumentMap(),P=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach(Z=>{e.resolvedLimboDocuments.has(Z)&&g.push(r.persistence.referenceDelegate.updateLimboDocument(u,Z))}),g.push(__PRIVATE_populateDocumentChangeBuffer(u,d,e.documentUpdates).next(Z=>{E=Z.ks,P=Z.qs})),!a.isEqual(SnapshotVersion.min())){const Z=r.Pi.getLastRemoteSnapshotVersion(u).next(me=>r.Pi.setTargetsMetadata(u,u.currentSequenceNumber,a));g.push(Z)}return PersistencePromise.waitFor(g).next(()=>d.apply(u)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,E,P)).next(()=>E)}).then(u=>(r.Ms=l,u))}function __PRIVATE_populateDocumentChangeBuffer(t,e,r){let a=__PRIVATE_documentKeySet(),l=__PRIVATE_documentKeySet();return r.forEach(u=>a=a.add(u)),e.getEntries(t,a).next(u=>{let d=__PRIVATE_mutableDocumentMap();return r.forEach((g,E)=>{const P=u.get(g);E.isFoundDocument()!==P.isFoundDocument()&&(l=l.add(g)),E.isNoDocument()&&E.version.isEqual(SnapshotVersion.min())?(e.removeEntry(g,E.readTime),d=d.insert(g,E)):!P.isValidDocument()||E.version.compareTo(P.version)>0||E.version.compareTo(P.version)===0&&P.hasPendingWrites?(e.addEntry(E),d=d.insert(g,E)):__PRIVATE_logDebug(Ut$1,"Ignoring outdated watch update for ",g,". Current version:",P.version," Watch version:",E.version)}),{ks:d,qs:l}})}function __PRIVATE_localStoreGetNextMutationBatch(t,e){const r=__PRIVATE_debugCast(t);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=j$1),r.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function __PRIVATE_localStoreAllocateTarget(t,e){const r=__PRIVATE_debugCast(t);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let l;return r.Pi.getTargetData(a,e).next(u=>u?(l=u,PersistencePromise.resolve(l)):r.Pi.allocateTargetId(a).next(d=>(l=new TargetData(e,d,"TargetPurposeListen",a.currentSequenceNumber),r.Pi.addTargetData(a,l).next(()=>l))))}).then(a=>{const l=r.Ms.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(a.targetId,a),r.xs.set(e,a.targetId)),a})}async function __PRIVATE_localStoreReleaseTarget(t,e,r){const a=__PRIVATE_debugCast(t),l=a.Ms.get(e),u=r?"readwrite":"readwrite-primary";try{r||await a.persistence.runTransaction("Release target",u,d=>a.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!__PRIVATE_isIndexedDbTransactionError(d))throw d;__PRIVATE_logDebug(Ut$1,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(l.target)}function __PRIVATE_localStoreExecuteQuery(t,e,r){const a=__PRIVATE_debugCast(t);let l=SnapshotVersion.min(),u=__PRIVATE_documentKeySet();return a.persistence.runTransaction("Execute query","readwrite",d=>function(E,P,Z){const me=__PRIVATE_debugCast(E),_e=me.xs.get(Z);return _e!==void 0?PersistencePromise.resolve(me.Ms.get(_e)):me.Pi.getTargetData(P,Z)}(a,d,__PRIVATE_queryToTarget(e)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,g.targetId).next(E=>{u=E})}).next(()=>a.Fs.getDocumentsMatchingQuery(d,e,r?l:SnapshotVersion.min(),r?u:__PRIVATE_documentKeySet())).next(g=>(__PRIVATE_setMaxReadTime(a,__PRIVATE_queryCollectionGroup(e),g),{documents:g,Qs:u})))}function __PRIVATE_setMaxReadTime(t,e,r){let a=t.Os.get(e)||SnapshotVersion.min();r.forEach((l,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)}),t.Os.set(e,a)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Mo=new __PRIVATE_LocalClientState,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,a){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,a){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,r,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt$1="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){__PRIVATE_logDebug(Jt$1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){__PRIVATE_logDebug(Jt$1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht$1=null;function __PRIVATE_generateUniqueDebugId(){return Ht$1===null?Ht$1=function(){return 268435456+Math.round(2147483648*Math.random())}():Ht$1++,"0x"+Ht$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt$1="RestConnection",Zt$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${a}/databases/${l}`,this.Wo=this.databaseId.database===lt$1?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Go(e,r,a,l,u){const d=__PRIVATE_generateUniqueDebugId(),g=this.zo(e,r.toUriEncodedString());__PRIVATE_logDebug(Yt$1,`Sending RPC '${e}' ${d}:`,g,a);const E={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(E,l,u);const{host:P}=new URL(g),Z=isCloudWorkstation(P);return this.Jo(e,g,E,a,Z).then(me=>(__PRIVATE_logDebug(Yt$1,`Received RPC '${e}' ${d}: `,me),me),me=>{throw __PRIVATE_logWarn(Yt$1,`RPC '${e}' ${d} failed with error: `,me,"url: ",g,"request:",a),me})}Ho(e,r,a,l,u,d){return this.Go(e,r,a,l,u)}jo(e,r,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((l,u)=>e[u]=l),a&&a.headers.forEach((l,u)=>e[u]=l)}zo(e,r){const a=Zt$1[e];return`${this.Uo}/v1/${r}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt$1="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,a,l,u){const d=__PRIVATE_generateUniqueDebugId();return new Promise((g,E)=>{const P=new XhrIo;P.setWithCredentials(!0),P.listenOnce(EventType.COMPLETE,()=>{try{switch(P.getLastErrorCode()){case ErrorCode.NO_ERROR:const me=P.getResponseJson();__PRIVATE_logDebug(Xt$1,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(me)),g(me);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${d} timed out`),E(new FirestoreError(N$1.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const _e=P.getStatus();if(__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${d} failed with status:`,_e,"response text:",P.getResponseText()),_e>0){let He=P.getResponseJson();Array.isArray(He)&&(He=He[0]);const Xe=He?.error;if(Xe&&Xe.status&&Xe.message){const wt=function(sr){const Ko=sr.toLowerCase().replace(/_/g,"-");return Object.values(N$1).indexOf(Ko)>=0?Ko:N$1.UNKNOWN}(Xe.status);E(new FirestoreError(wt,Xe.message))}else E(new FirestoreError(N$1.UNKNOWN,"Server responded with status "+P.getStatus()))}else E(new FirestoreError(N$1.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{l_:e,streamId:d,h_:P.getLastErrorCode(),P_:P.getLastError()})}}finally{__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${d} completed.`)}});const Z=JSON.stringify(l);__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${d} sending request:`,l),P.send(r,"POST",Z,a,15)})}T_(e,r,a){const l=__PRIVATE_generateUniqueDebugId(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=createWebChannelTransport(),g=getStatEventTarget(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},P=this.longPollingOptions.timeoutSeconds;P!==void 0&&(E.longPollingTimeout=Math.round(1e3*P)),this.useFetchStreams&&(E.useFetchStreams=!0),this.jo(E.initMessageHeaders,r,a),E.encodeInitMessageHeaders=!0;const Z=u.join("");__PRIVATE_logDebug(Xt$1,`Creating RPC '${e}' stream ${l}: ${Z}`,E);const me=d.createWebChannel(Z,E);this.I_(me);let _e=!1,He=!1;const Xe=new __PRIVATE_StreamBridge({Yo:Do=>{He?__PRIVATE_logDebug(Xt$1,`Not sending because RPC '${e}' stream ${l} is closed:`,Do):(_e||(__PRIVATE_logDebug(Xt$1,`Opening RPC '${e}' stream ${l} transport.`),me.open(),_e=!0),__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${l} sending:`,Do),me.send(Do))},Zo:()=>me.close()}),wt=(Do,sr,Ko)=>{Do.listen(sr,Bs=>{try{Ko(Bs)}catch(th){setTimeout(()=>{throw th},0)}})};return wt(me,WebChannel.EventType.OPEN,()=>{He||(__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${l} transport opened.`),Xe.o_())}),wt(me,WebChannel.EventType.CLOSE,()=>{He||(He=!0,__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${l} transport closed`),Xe.a_(),this.E_(me))}),wt(me,WebChannel.EventType.ERROR,Do=>{He||(He=!0,__PRIVATE_logWarn(Xt$1,`RPC '${e}' stream ${l} transport errored. Name:`,Do.name,"Message:",Do.message),Xe.a_(new FirestoreError(N$1.UNAVAILABLE,"The operation could not be completed")))}),wt(me,WebChannel.EventType.MESSAGE,Do=>{if(!He){const sr=Do.data[0];__PRIVATE_hardAssert(!!sr,16349);const Ko=sr,Bs=Ko?.error||Ko[0]?.error;if(Bs){__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${l} received error:`,Bs);const th=Bs.status;let pf=function(df){const uf=pt$1[df];if(uf!==void 0)return __PRIVATE_mapCodeFromRpcCode(uf)}(th),_h=Bs.message;pf===void 0&&(pf=N$1.INTERNAL,_h="Unknown error status: "+th+" with message "+Bs.message),He=!0,Xe.a_(new FirestoreError(pf,_h)),me.close()}else __PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${l} received:`,sr),Xe.u_(sr)}}),wt(g,Event$1.STAT_EVENT,Do=>{Do.stat===Stat.PROXY?__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${l} detected buffering proxy`):Do.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{Xe.__()},0),Xe}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(t){return new JsonProtoSerializer(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,r,a=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=r,this.d_=a,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,r-a);l>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en$1="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,r,a,l,u,d,g,E){this.Mi=e,this.S_=a,this.b_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new __PRIVATE_ExponentialBackoff(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===N$1.RESOURCE_EXHAUSTED?(__PRIVATE_logError(r.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===N$1.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,l])=>{this.D_===r&&this.G_(a,l)},a=>{e(()=>{const l=new FirestoreError(N$1.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)})})}G_(e,r){const a=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{a(()=>this.listener.Xo())}),this.stream.t_(()=>{a(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(l=>{a(()=>this.z_(l))}),this.stream.onMessage(l=>{a(()=>++this.F_==1?this.J_(l):this.onNext(l))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return __PRIVATE_logDebug(en$1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(__PRIVATE_logDebug(en$1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,r,a,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,l,d),this.serializer=u}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=__PRIVATE_fromWatchChange(this.serializer,e),a=function(u){if(!("targetChange"in u))return SnapshotVersion.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?SnapshotVersion.min():d.readTime?__PRIVATE_fromVersion(d.readTime):SnapshotVersion.min()}(e);return this.listener.H_(r,a)}Y_(e){const r={};r.database=__PRIVATE_getEncodedDatabaseId(this.serializer),r.addTarget=function(u,d){let g;const E=d.target;if(g=__PRIVATE_targetIsDocumentTarget(E)?{documents:__PRIVATE_toDocumentsTarget(u,E)}:{query:__PRIVATE_toQueryTarget(u,E).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=__PRIVATE_toBytes(u,d.resumeToken);const P=__PRIVATE_toInt32Proto(u,d.expectedCount);P!==null&&(g.expectedCount=P)}else if(d.snapshotVersion.compareTo(SnapshotVersion.min())>0){g.readTime=toTimestamp(u,d.snapshotVersion.toTimestamp());const P=__PRIVATE_toInt32Proto(u,d.expectedCount);P!==null&&(g.expectedCount=P)}return g}(this.serializer,e);const a=__PRIVATE_toListenRequestLabels(this.serializer,e);a&&(r.labels=a),this.q_(r)}Z_(e){const r={};r.database=__PRIVATE_getEncodedDatabaseId(this.serializer),r.removeTarget=e,this.q_(r)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,r,a,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,l,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),a=__PRIVATE_fromVersion(e.commitTime);return this.listener.na(a,r)}ra(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(a=>toMutation(this.serializer,a))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,r,a,l){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Go(e,__PRIVATE_toResourcePath(r,a),l,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new FirestoreError(N$1.UNKNOWN,u.toString())})}Ho(e,r,a,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Ho(e,__PRIVATE_toResourcePath(r,a),l,d,g,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new FirestoreError(N$1.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(__PRIVATE_logError(r),this.aa=!1):__PRIVATE_logDebug("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn$1="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,r,a,l,u){this.localStore=e,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo(d=>{a.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(tn$1,"Restarting streams for network reachability change."),await async function(E){const P=__PRIVATE_debugCast(E);P.Ea.add(4),await __PRIVATE_disableNetworkInternal(P),P.Ra.set("Unknown"),P.Ea.delete(4),await __PRIVATE_enableNetworkInternal(P)}(this))})}),this.Ra=new __PRIVATE_OnlineStateTracker(a,l)}}async function __PRIVATE_enableNetworkInternal(t){if(__PRIVATE_canUseNetwork(t))for(const e of t.da)await e(!0)}async function __PRIVATE_disableNetworkInternal(t){for(const e of t.da)await e(!1)}function __PRIVATE_remoteStoreListen(t,e){const r=__PRIVATE_debugCast(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(r)?__PRIVATE_startWatchStream(r):__PRIVATE_ensureWatchStream(r).O_()&&__PRIVATE_sendWatchRequest(r,e))}function __PRIVATE_remoteStoreUnlisten(t,e){const r=__PRIVATE_debugCast(t),a=__PRIVATE_ensureWatchStream(r);r.Ia.delete(e),a.O_()&&__PRIVATE_sendUnwatchRequest(r,e),r.Ia.size===0&&(a.O_()?a.L_():__PRIVATE_canUseNetwork(r)&&r.Ra.set("Unknown"))}function __PRIVATE_sendWatchRequest(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}__PRIVATE_ensureWatchStream(t).Y_(e)}function __PRIVATE_sendUnwatchRequest(t,e){t.Va.Ue(e),__PRIVATE_ensureWatchStream(t).Z_(e)}function __PRIVATE_startWatchStream(t){t.Va=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(t).start(),t.Ra.ua()}function __PRIVATE_shouldStartWatchStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWatchStream(t).x_()&&t.Ia.size>0}function __PRIVATE_canUseNetwork(t){return __PRIVATE_debugCast(t).Ea.size===0}function __PRIVATE_cleanUpWatchStreamState(t){t.Va=void 0}async function __PRIVATE_onWatchStreamConnected(t){t.Ra.set("Online")}async function __PRIVATE_onWatchStreamOpen(t){t.Ia.forEach((e,r)=>{__PRIVATE_sendWatchRequest(t,e)})}async function __PRIVATE_onWatchStreamClose(t,e){__PRIVATE_cleanUpWatchStreamState(t),__PRIVATE_shouldStartWatchStream(t)?(t.Ra.ha(e),__PRIVATE_startWatchStream(t)):t.Ra.set("Unknown")}async function __PRIVATE_onWatchStreamChange(t,e,r){if(t.Ra.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(l,u){const d=u.cause;for(const g of u.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))}(t,e)}catch(a){__PRIVATE_logDebug(tn$1,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await __PRIVATE_disableNetworkUntilRecovery(t,a)}else if(e instanceof __PRIVATE_DocumentWatchChange?t.Va.Ze(e):e instanceof __PRIVATE_ExistenceFilterChange?t.Va.st(e):t.Va.tt(e),!r.isEqual(SnapshotVersion.min()))try{const a=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore);r.compareTo(a)>=0&&await function(u,d){const g=u.Va.Tt(d);return g.targetChanges.forEach((E,P)=>{if(E.resumeToken.approximateByteSize()>0){const Z=u.Ia.get(P);Z&&u.Ia.set(P,Z.withResumeToken(E.resumeToken,d))}}),g.targetMismatches.forEach((E,P)=>{const Z=u.Ia.get(E);if(!Z)return;u.Ia.set(E,Z.withResumeToken(ByteString.EMPTY_BYTE_STRING,Z.snapshotVersion)),__PRIVATE_sendUnwatchRequest(u,E);const me=new TargetData(Z.target,E,P,Z.sequenceNumber);__PRIVATE_sendWatchRequest(u,me)}),u.remoteSyncer.applyRemoteEvent(g)}(t,r)}catch(a){__PRIVATE_logDebug(tn$1,"Failed to raise snapshot:",a),await __PRIVATE_disableNetworkUntilRecovery(t,a)}}async function __PRIVATE_disableNetworkUntilRecovery(t,e,r){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;t.Ea.add(1),await __PRIVATE_disableNetworkInternal(t),t.Ra.set("Offline"),r||(r=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(tn$1,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await __PRIVATE_enableNetworkInternal(t)})}function __PRIVATE_executeWithRecovery(t,e){return e().catch(r=>__PRIVATE_disableNetworkUntilRecovery(t,r,e))}async function __PRIVATE_fillWritePipeline(t){const e=__PRIVATE_debugCast(t),r=__PRIVATE_ensureWriteStream(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j$1;for(;__PRIVATE_canAddToWritePipeline(e);)try{const l=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,a);if(l===null){e.Ta.length===0&&r.L_();break}a=l.batchId,__PRIVATE_addToWritePipeline(e,l)}catch(l){await __PRIVATE_disableNetworkUntilRecovery(e,l)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(t){return __PRIVATE_canUseNetwork(t)&&t.Ta.length<10}function __PRIVATE_addToWritePipeline(t,e){t.Ta.push(e);const r=__PRIVATE_ensureWriteStream(t);r.O_()&&r.X_&&r.ea(e.mutations)}function __PRIVATE_shouldStartWriteStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWriteStream(t).x_()&&t.Ta.length>0}function __PRIVATE_startWriteStream(t){__PRIVATE_ensureWriteStream(t).start()}async function __PRIVATE_onWriteStreamOpen(t){__PRIVATE_ensureWriteStream(t).ra()}async function __PRIVATE_onWriteHandshakeComplete(t){const e=__PRIVATE_ensureWriteStream(t);for(const r of t.Ta)e.ea(r.mutations)}async function __PRIVATE_onMutationResult(t,e,r){const a=t.Ta.shift(),l=MutationBatchResult.from(a,e,r);await __PRIVATE_executeWithRecovery(t,()=>t.remoteSyncer.applySuccessfulWrite(l)),await __PRIVATE_fillWritePipeline(t)}async function __PRIVATE_onWriteStreamClose(t,e){e&&__PRIVATE_ensureWriteStream(t).X_&&await async function(a,l){if(function(d){return __PRIVATE_isPermanentError(d)&&d!==N$1.ABORTED}(l.code)){const u=a.Ta.shift();__PRIVATE_ensureWriteStream(a).B_(),await __PRIVATE_executeWithRecovery(a,()=>a.remoteSyncer.rejectFailedWrite(u.batchId,l)),await __PRIVATE_fillWritePipeline(a)}}(t,e),__PRIVATE_shouldStartWriteStream(t)&&__PRIVATE_startWriteStream(t)}async function __PRIVATE_remoteStoreHandleCredentialChange(t,e){const r=__PRIVATE_debugCast(t);r.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(tn$1,"RemoteStore received new credentials");const a=__PRIVATE_canUseNetwork(r);r.Ea.add(3),await __PRIVATE_disableNetworkInternal(r),a&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await __PRIVATE_enableNetworkInternal(r)}async function __PRIVATE_remoteStoreApplyPrimaryState(t,e){const r=__PRIVATE_debugCast(t);e?(r.Ea.delete(2),await __PRIVATE_enableNetworkInternal(r)):e||(r.Ea.add(2),await __PRIVATE_disableNetworkInternal(r),r.Ra.set("Unknown"))}function __PRIVATE_ensureWatchStream(t){return t.ma||(t.ma=function(r,a,l){const u=__PRIVATE_debugCast(r);return u.sa(),new __PRIVATE_PersistentListenStream(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)}(t.datastore,t.asyncQueue,{Xo:__PRIVATE_onWatchStreamConnected.bind(null,t),t_:__PRIVATE_onWatchStreamOpen.bind(null,t),r_:__PRIVATE_onWatchStreamClose.bind(null,t),H_:__PRIVATE_onWatchStreamChange.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),__PRIVATE_shouldStartWatchStream(t)?__PRIVATE_startWatchStream(t):t.Ra.set("Unknown")):(await t.ma.stop(),__PRIVATE_cleanUpWatchStreamState(t))})),t.ma}function __PRIVATE_ensureWriteStream(t){return t.fa||(t.fa=function(r,a,l){const u=__PRIVATE_debugCast(r);return u.sa(),new __PRIVATE_PersistentWriteStream(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:__PRIVATE_onWriteStreamOpen.bind(null,t),r_:__PRIVATE_onWriteStreamClose.bind(null,t),ta:__PRIVATE_onWriteHandshakeComplete.bind(null,t),na:__PRIVATE_onMutationResult.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await __PRIVATE_fillWritePipeline(t)):(await t.fa.stop(),t.Ta.length>0&&(__PRIVATE_logDebug(tn$1,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,r,a,l,u){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=a,this.op=l,this.removalCallback=u,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,a,l,u){const d=Date.now()+a,g=new DelayedOperation(e,r,d,l,u);return g.start(a),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N$1.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(t,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${t}`),__PRIVATE_isIndexedDbTransactionError(t))return new FirestoreError(N$1.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(r,a)=>e(r,a)||DocumentKey.comparator(r.key,a.key):(r,a)=>DocumentKey.comparator(r.key,a.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,a)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;r.hasNext();){const l=r.getNext().key,u=a.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const a=new DocumentSet;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=r,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.ga=new SortedMap(DocumentKey.comparator)}track(e){const r=e.doc.key,a=this.ga.get(r);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(r,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(r,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(r):e.type===1&&a.type===2?this.ga=this.ga.insert(r,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):fail(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,a)=>{e.push(a)}),e}}class ViewSnapshot{constructor(e,r,a,l,u,d,g,E,P){this.query=e,this.docs=r,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=E,this.hasCachedResults=P}static fromInitialDocuments(e,r,a,l,u){const d=[];return r.forEach(g=>{d.push({type:0,doc:g})}),new ViewSnapshot(e,r,DocumentSet.emptySet(r),d,a,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,a=e.docChanges;if(r.length!==a.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==a[l].type||!r[l].doc.isEqual(a[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,a){const l=__PRIVATE_debugCast(r),u=l.queries;l.queries=__PRIVATE_newQueriesObjectMap(),u.forEach((d,g)=>{for(const E of g.Sa)E.onError(a)})})(this,new FirestoreError(N$1.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(t=>__PRIVATE_canonifyQuery(t),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(t,e){const r=__PRIVATE_debugCast(t);let a=3;const l=e.query;let u=r.queries.get(l);u?!u.ba()&&e.Da()&&(a=2):(u=new __PRIVATE_QueryListenersInfo,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await r.onListen(l,!0);break;case 1:u.wa=await r.onListen(l,!1);break;case 2:await r.onFirstRemoteStoreListen(l)}}catch(d){const g=__PRIVATE_wrapInUserErrorIfRecoverable(d,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(g)}r.queries.set(l,u),u.Sa.push(e),e.va(r.onlineState),u.wa&&e.Fa(u.wa)&&__PRIVATE_raiseSnapshotsInSyncEvent(r)}async function __PRIVATE_eventManagerUnlisten(t,e){const r=__PRIVATE_debugCast(t),a=e.query;let l=3;const u=r.queries.get(a);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return r.queries.delete(a),r.onUnlisten(a,!0);case 1:return r.queries.delete(a),r.onUnlisten(a,!1);case 2:return r.onLastRemoteStoreUnlisten(a);default:return}}function __PRIVATE_eventManagerOnWatchChange(t,e){const r=__PRIVATE_debugCast(t);let a=!1;for(const l of e){const u=l.query,d=r.queries.get(u);if(d){for(const g of d.Sa)g.Fa(l)&&(a=!0);d.wa=l}}a&&__PRIVATE_raiseSnapshotsInSyncEvent(r)}function __PRIVATE_eventManagerOnWatchError(t,e,r){const a=__PRIVATE_debugCast(t),l=a.queries.get(e);if(l)for(const u of l.Sa)u.onError(r);a.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(t){t.Ca.forEach(e=>{e.next()})}var nn$1,rn$1;(rn$1=nn$1||(nn$1={})).Ma="default",rn$1.Cache="cache";class __PRIVATE_QueryListener{constructor(e,r,a){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const l of e.docChanges)l.type!==3&&a.push(l);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const a=r!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nn$1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.eu=__PRIVATE_newQueryComparator(e),this.tu=new DocumentSet(this.eu)}get nu(){return this.Ya}ru(e,r){const a=r?r.iu:new __PRIVATE_DocumentChangeSet,l=r?r.tu:this.tu;let u=r?r.mutatedKeys:this.mutatedKeys,d=l,g=!1;const E=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,P=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((Z,me)=>{const _e=l.get(Z),He=__PRIVATE_queryMatches(this.query,me)?me:null,Xe=!!_e&&this.mutatedKeys.has(_e.key),wt=!!He&&(He.hasLocalMutations||this.mutatedKeys.has(He.key)&&He.hasCommittedMutations);let Do=!1;_e&&He?_e.data.isEqual(He.data)?Xe!==wt&&(a.track({type:3,doc:He}),Do=!0):this.su(_e,He)||(a.track({type:2,doc:He}),Do=!0,(E&&this.eu(He,E)>0||P&&this.eu(He,P)<0)&&(g=!0)):!_e&&He?(a.track({type:0,doc:He}),Do=!0):_e&&!He&&(a.track({type:1,doc:_e}),Do=!0,(E||P)&&(g=!0)),Do&&(He?(d=d.add(He),u=wt?u.add(Z):u.delete(Z)):(d=d.delete(Z),u=u.delete(Z)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const Z=this.query.limitType==="F"?d.last():d.first();d=d.delete(Z.key),u=u.delete(Z.key),a.track({type:1,doc:Z})}return{tu:d,iu:a,Cs:g,mutatedKeys:u}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,a,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort((Z,me)=>function(He,Xe){const wt=Do=>{switch(Do){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Rt:Do})}};return wt(He)-wt(Xe)}(Z.type,me.type)||this.eu(Z.doc,me.doc)),this.ou(a),l=l??!1;const g=r&&!l?this._u():[],E=this.Xa.size===0&&this.current&&!l?1:0,P=E!==this.Za;return this.Za=E,d.length!==0||P?{snapshot:new ViewSnapshot(this.query,e.tu,u,d,e.mutatedKeys,E===0,P,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=__PRIVATE_documentKeySet(),this.tu.forEach(a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))});const r=[];return e.forEach(a=>{this.Xa.has(a)||r.push(new __PRIVATE_RemovedLimboDocument(a))}),this.Xa.forEach(a=>{e.has(a)||r.push(new __PRIVATE_AddedLimboDocument(a))}),r}cu(e){this.Ya=e.Qs,this.Xa=__PRIVATE_documentKeySet();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return ViewSnapshot.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sn$1="SyncEngine";class __PRIVATE_QueryView{constructor(e,r,a){this.query=e,this.targetId=r,this.view=a}}class LimboResolution{constructor(e){this.key=e,this.hu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,r,a,l,u,d){this.localStore=e,this.remoteStore=r,this.eventManager=a,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ObjectMap(g=>__PRIVATE_canonifyQuery(g),__PRIVATE_queryEquals),this.Iu=new Map,this.Eu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Au=new Map,this.Ru=new __PRIVATE_ReferenceSet,this.Vu={},this.mu=new Map,this.fu=__PRIVATE_TargetIdGenerator.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function __PRIVATE_syncEngineListen(t,e,r=!0){const a=__PRIVATE_ensureWatchCallbacks(t);let l;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await __PRIVATE_allocateTargetAndMaybeListen(a,e,r,!0),l}async function __PRIVATE_triggerRemoteStoreListen(t,e){const r=__PRIVATE_ensureWatchCallbacks(t);await __PRIVATE_allocateTargetAndMaybeListen(r,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(t,e,r,a){const l=await __PRIVATE_localStoreAllocateTarget(t.localStore,__PRIVATE_queryToTarget(e)),u=l.targetId,d=t.sharedClientState.addLocalQueryTarget(u,r);let g;return a&&(g=await __PRIVATE_initializeViewAndComputeSnapshot(t,e,u,d==="current",l.resumeToken)),t.isPrimaryClient&&r&&__PRIVATE_remoteStoreListen(t.remoteStore,l),g}async function __PRIVATE_initializeViewAndComputeSnapshot(t,e,r,a,l){t.pu=(me,_e,He)=>async function(wt,Do,sr,Ko){let Bs=Do.view.ru(sr);Bs.Cs&&(Bs=await __PRIVATE_localStoreExecuteQuery(wt.localStore,Do.query,!1).then(({documents:cf})=>Do.view.ru(cf,Bs)));const th=Ko&&Ko.targetChanges.get(Do.targetId),pf=Ko&&Ko.targetMismatches.get(Do.targetId)!=null,_h=Do.view.applyChanges(Bs,wt.isPrimaryClient,th,pf);return __PRIVATE_updateTrackedLimbos(wt,Do.targetId,_h.au),_h.snapshot}(t,me,_e,He);const u=await __PRIVATE_localStoreExecuteQuery(t.localStore,e,!0),d=new __PRIVATE_View(e,u.Qs),g=d.ru(u.documents),E=TargetChange.createSynthesizedTargetChangeForCurrentChange(r,a&&t.onlineState!=="Offline",l),P=d.applyChanges(g,t.isPrimaryClient,E);__PRIVATE_updateTrackedLimbos(t,r,P.au);const Z=new __PRIVATE_QueryView(e,r,d);return t.Tu.set(e,Z),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),P.snapshot}async function __PRIVATE_syncEngineUnlisten(t,e,r){const a=__PRIVATE_debugCast(t),l=a.Tu.get(e),u=a.Iu.get(l.targetId);if(u.length>1)return a.Iu.set(l.targetId,u.filter(d=>!__PRIVATE_queryEquals(d,e))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await __PRIVATE_localStoreReleaseTarget(a.localStore,l.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(l.targetId),r&&__PRIVATE_remoteStoreUnlisten(a.remoteStore,l.targetId),__PRIVATE_removeAndCleanupTarget(a,l.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(a,l.targetId),await __PRIVATE_localStoreReleaseTarget(a.localStore,l.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(t,e){const r=__PRIVATE_debugCast(t),a=r.Tu.get(e),l=r.Iu.get(a.targetId);r.isPrimaryClient&&l.length===1&&(r.sharedClientState.removeLocalQueryTarget(a.targetId),__PRIVATE_remoteStoreUnlisten(r.remoteStore,a.targetId))}async function __PRIVATE_syncEngineWrite(t,e,r){const a=__PRIVATE_syncEngineEnsureWriteCallbacks(t);try{const l=await function(d,g){const E=__PRIVATE_debugCast(d),P=Timestamp.now(),Z=g.reduce((He,Xe)=>He.add(Xe.key),__PRIVATE_documentKeySet());let me,_e;return E.persistence.runTransaction("Locally write mutations","readwrite",He=>{let Xe=__PRIVATE_mutableDocumentMap(),wt=__PRIVATE_documentKeySet();return E.Ns.getEntries(He,Z).next(Do=>{Xe=Do,Xe.forEach((sr,Ko)=>{Ko.isValidDocument()||(wt=wt.add(sr))})}).next(()=>E.localDocuments.getOverlayedDocuments(He,Xe)).next(Do=>{me=Do;const sr=[];for(const Ko of g){const Bs=__PRIVATE_mutationExtractBaseValue(Ko,me.get(Ko.key).overlayedDocument);Bs!=null&&sr.push(new __PRIVATE_PatchMutation(Ko.key,Bs,__PRIVATE_extractFieldMask(Bs.value.mapValue),Precondition.exists(!0)))}return E.mutationQueue.addMutationBatch(He,P,sr,g)}).next(Do=>{_e=Do;const sr=Do.applyToLocalDocumentSet(me,wt);return E.documentOverlayCache.saveOverlays(He,Do.batchId,sr)})}).then(()=>({batchId:_e.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(me)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(l.batchId),function(d,g,E){let P=d.Vu[d.currentUser.toKey()];P||(P=new SortedMap(__PRIVATE_primitiveComparator)),P=P.insert(g,E),d.Vu[d.currentUser.toKey()]=P}(a,l.batchId,r),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(a,l.changes),await __PRIVATE_fillWritePipeline(a.remoteStore)}catch(l){const u=__PRIVATE_wrapInUserErrorIfRecoverable(l,"Failed to persist write");r.reject(u)}}async function __PRIVATE_syncEngineApplyRemoteEvent(t,e){const r=__PRIVATE_debugCast(t);try{const a=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(r.localStore,e);e.targetChanges.forEach((l,u)=>{const d=r.Au.get(u);d&&(__PRIVATE_hardAssert(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?__PRIVATE_hardAssert(d.hu,14607):l.removedDocuments.size>0&&(__PRIVATE_hardAssert(d.hu,42227),d.hu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,a,e)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}function __PRIVATE_syncEngineApplyOnlineStateChange(t,e,r){const a=__PRIVATE_debugCast(t);if(a.isPrimaryClient&&r===0||!a.isPrimaryClient&&r===1){const l=[];a.Tu.forEach((u,d)=>{const g=d.view.va(e);g.snapshot&&l.push(g.snapshot)}),function(d,g){const E=__PRIVATE_debugCast(d);E.onlineState=g;let P=!1;E.queries.forEach((Z,me)=>{for(const _e of me.Sa)_e.va(g)&&(P=!0)}),P&&__PRIVATE_raiseSnapshotsInSyncEvent(E)}(a.eventManager,e),l.length&&a.Pu.H_(l),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(t,e,r){const a=__PRIVATE_debugCast(t);a.sharedClientState.updateQueryState(e,"rejected",r);const l=a.Au.get(e),u=l&&l.key;if(u){let d=new SortedMap(DocumentKey.comparator);d=d.insert(u,MutableDocument.newNoDocument(u,SnapshotVersion.min()));const g=__PRIVATE_documentKeySet().add(u),E=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),d,g);await __PRIVATE_syncEngineApplyRemoteEvent(a,E),a.du=a.du.remove(u),a.Au.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(a)}else await __PRIVATE_localStoreReleaseTarget(a.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(a,e,r)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(t,e){const r=__PRIVATE_debugCast(t),a=e.batch.batchId;try{const l=await __PRIVATE_localStoreAcknowledgeBatch(r.localStore,e);__PRIVATE_processUserCallback(r,a,null),__PRIVATE_triggerPendingWritesCallbacks(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,l)}catch(l){await __PRIVATE_ignoreIfPrimaryLeaseLoss(l)}}async function __PRIVATE_syncEngineRejectFailedWrite(t,e,r){const a=__PRIVATE_debugCast(t);try{const l=await function(d,g){const E=__PRIVATE_debugCast(d);return E.persistence.runTransaction("Reject batch","readwrite-primary",P=>{let Z;return E.mutationQueue.lookupMutationBatch(P,g).next(me=>(__PRIVATE_hardAssert(me!==null,37113),Z=me.keys(),E.mutationQueue.removeMutationBatch(P,me))).next(()=>E.mutationQueue.performConsistencyCheck(P)).next(()=>E.documentOverlayCache.removeOverlaysForBatchId(P,Z,g)).next(()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(P,Z)).next(()=>E.localDocuments.getDocuments(P,Z))})}(a.localStore,e);__PRIVATE_processUserCallback(a,e,r),__PRIVATE_triggerPendingWritesCallbacks(a,e),a.sharedClientState.updateMutationState(e,"rejected",r),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(a,l)}catch(l){await __PRIVATE_ignoreIfPrimaryLeaseLoss(l)}}function __PRIVATE_triggerPendingWritesCallbacks(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function __PRIVATE_processUserCallback(t,e,r){const a=__PRIVATE_debugCast(t);let l=a.Vu[a.currentUser.toKey()];if(l){const u=l.get(e);u&&(r?u.reject(r):u.resolve(),l=l.remove(e)),a.Vu[a.currentUser.toKey()]=l}}function __PRIVATE_removeAndCleanupTarget(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const a of t.Iu.get(e))t.Tu.delete(a),r&&t.Pu.yu(a,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(a=>{t.Ru.containsKey(a)||__PRIVATE_removeLimboTarget(t,a)})}function __PRIVATE_removeLimboTarget(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(__PRIVATE_remoteStoreUnlisten(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_updateTrackedLimbos(t,e,r){for(const a of r)a instanceof __PRIVATE_AddedLimboDocument?(t.Ru.addReference(a.key,e),__PRIVATE_trackLimboChange(t,a)):a instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(sn$1,"Document no longer in limbo: "+a.key),t.Ru.removeReference(a.key,e),t.Ru.containsKey(a.key)||__PRIVATE_removeLimboTarget(t,a.key)):fail(19791,{wu:a})}function __PRIVATE_trackLimboChange(t,e){const r=e.key,a=r.path.canonicalString();t.du.get(r)||t.Eu.has(a)||(__PRIVATE_logDebug(sn$1,"New document in limbo: "+r),t.Eu.add(a),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_pumpEnqueuedLimboResolutions(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new DocumentKey(ResourcePath.fromString(e)),a=t.fu.next();t.Au.set(a,new LimboResolution(r)),t.du=t.du.insert(r,a),__PRIVATE_remoteStoreListen(t.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(r.path)),a,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ce))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,e,r){const a=__PRIVATE_debugCast(t),l=[],u=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach((g,E)=>{d.push(a.pu(E,e,r).then(P=>{if((P||r)&&a.isPrimaryClient){const Z=P?!P.fromCache:r?.targetChanges.get(E.targetId)?.current;a.sharedClientState.updateQueryState(E.targetId,Z?"current":"not-current")}if(P){l.push(P);const Z=__PRIVATE_LocalViewChanges.As(E.targetId,P);u.push(Z)}}))}),await Promise.all(d),a.Pu.H_(l),await async function(E,P){const Z=__PRIVATE_debugCast(E);try{await Z.persistence.runTransaction("notifyLocalViewChanges","readwrite",me=>PersistencePromise.forEach(P,_e=>PersistencePromise.forEach(_e.Es,He=>Z.persistence.referenceDelegate.addReference(me,_e.targetId,He)).next(()=>PersistencePromise.forEach(_e.ds,He=>Z.persistence.referenceDelegate.removeReference(me,_e.targetId,He)))))}catch(me){if(!__PRIVATE_isIndexedDbTransactionError(me))throw me;__PRIVATE_logDebug(Ut$1,"Failed to update sequence numbers: "+me)}for(const me of P){const _e=me.targetId;if(!me.fromCache){const He=Z.Ms.get(_e),Xe=He.snapshotVersion,wt=He.withLastLimboFreeSnapshotVersion(Xe);Z.Ms=Z.Ms.insert(_e,wt)}}}(a.localStore,u))}async function __PRIVATE_syncEngineHandleCredentialChange(t,e){const r=__PRIVATE_debugCast(t);if(!r.currentUser.isEqual(e)){__PRIVATE_logDebug(sn$1,"User change. New user:",e.toKey());const a=await __PRIVATE_localStoreHandleUserChange(r.localStore,e);r.currentUser=e,function(u,d){u.mu.forEach(g=>{g.forEach(E=>{E.reject(new FirestoreError(N$1.CANCELLED,d))})}),u.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,a.Ls)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(t,e){const r=__PRIVATE_debugCast(t),a=r.Au.get(e);if(a&&a.hu)return __PRIVATE_documentKeySet().add(a.key);{let l=__PRIVATE_documentKeySet();const u=r.Iu.get(e);if(!u)return l;for(const d of u){const g=r.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function __PRIVATE_ensureWatchCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.Pu.H_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.Pu.yu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Cu(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.mi,this.serializer)}Du(e){return new __PRIVATE_MemorySharedClientState}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(a,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(a=>__PRIVATE_MemoryLruDelegate.mi(a,r),this.serializer)}}class OnlineComponentProvider{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const r=__PRIVATE_newSerializer(e.databaseInfo.databaseId),a=function(u){return new __PRIVATE_WebChannelConnection(u)}(e.databaseInfo);return function(u,d,g,E){return new __PRIVATE_DatastoreImpl(u,d,g,E)}(e.authCredentials,e.appCheckCredentials,a,r)}createRemoteStore(e){return function(a,l,u,d,g){return new __PRIVATE_RemoteStoreImpl(a,l,u,d,g)}(this.localStore,this.datastore,e.asyncQueue,r=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,r,0),function(){return __PRIVATE_BrowserConnectivityMonitor.v()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,r){return function(l,u,d,g,E,P,Z){const me=new __PRIVATE_SyncEngineImpl(l,u,d,g,E,P);return Z&&(me.gu=!0),me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){await async function(r){const a=__PRIVATE_debugCast(r);__PRIVATE_logDebug(tn$1,"RemoteStore shutting down."),a.Ea.add(5),await __PRIVATE_disableNetworkInternal(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on$1="FirestoreClient";class FirestoreClient{constructor(e,r,a,l,u){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=l,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,async d=>{__PRIVATE_logDebug(on$1,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(a,d=>(__PRIVATE_logDebug(on$1,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const a=__PRIVATE_wrapInUserErrorIfRecoverable(r,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(on$1,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let a=r.initialUser;t.setCredentialChangeListener(async l=>{a.isEqual(l)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,l),a=l)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress();const r=await __PRIVATE_ensureOfflineComponents(t);__PRIVATE_logDebug(on$1,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(a=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,a)),t.setAppCheckTokenChangeListener((a,l)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,l)),t._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){__PRIVATE_logDebug(on$1,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(l){return l.name==="FirebaseError"?l.code===N$1.FAILED_PRECONDITION||l.code===N$1.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(r))throw r;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+r),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(on$1,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return t._offlineComponents}async function __PRIVATE_ensureOnlineComponents(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(__PRIVATE_logDebug(on$1,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,t._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(on$1,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,new OnlineComponentProvider))),t._onlineComponents}function __PRIVATE_getSyncEngine(t){return __PRIVATE_ensureOnlineComponents(t).then(e=>e.syncEngine)}function __PRIVATE_getDatastore(t){return __PRIVATE_ensureOnlineComponents(t).then(e=>e.datastore)}async function __PRIVATE_getEventManager(t){const e=await __PRIVATE_ensureOnlineComponents(t),r=e.eventManager;return r.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),r.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),r}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(t,e,r={}){const a=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>function(u,d,g,E,P){const Z=new __PRIVATE_AsyncObserver({next:_e=>{Z.Nu(),d.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(u,me));const He=_e.docs.has(g);!He&&_e.fromCache?P.reject(new FirestoreError(N$1.UNAVAILABLE,"Failed to get document because the client is offline.")):He&&_e.fromCache&&E&&E.source==="server"?P.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):P.resolve(_e)},error:_e=>P.reject(_e)}),me=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(g.path),Z,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(u,me)}(await __PRIVATE_getEventManager(t),t.asyncQueue,e,r,a)),a.promise}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(t,e,r={}){const a=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>function(u,d,g,E,P){const Z=new __PRIVATE_AsyncObserver({next:_e=>{Z.Nu(),d.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(u,me)),_e.fromCache&&E.source==="server"?P.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):P.resolve(_e)},error:_e=>P.reject(_e)}),me=new __PRIVATE_QueryListener(g,Z,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(u,me)}(await __PRIVATE_getEventManager(t),t.asyncQueue,e,r,a)),a.promise}function __PRIVATE_firestoreClientRunAggregateQuery(t,e,r){const a=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>{try{const l=await __PRIVATE_getDatastore(t);a.resolve(async function(d,g,E){const P=__PRIVATE_debugCast(d),{request:Z,gt:me,parent:_e}=__PRIVATE_toRunAggregationQueryRequest(P.serializer,__PRIVATE_queryToAggregateTarget(g),E);P.connection.$o||delete Z.parent;const He=(await P.Ho("RunAggregationQuery",P.serializer.databaseId,_e,Z,1)).filter(wt=>!!wt.result);__PRIVATE_hardAssert(He.length===1,64727);const Xe=He[0].result?.aggregateFields;return Object.keys(Xe).reduce((wt,Do)=>(wt[me[Do]]=Xe[Do],wt),{})}(l,e,r))}catch(l){a.reject(l)}}),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n$1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an$1="firestore.googleapis.com",un$1=!0;class FirestoreSettingsImpl{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=an$1,this.ssl=un$1}else this.host=e.host,this.ssl=e.ssl??un$1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ot$1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bt$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions(e.experimentalLongPollingOptions??{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,l){return a.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,r,a,l){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(a.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new FirestoreError(N$1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const a=_n$1.get(r);a&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),_n$1.delete(r),a.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(t,e,r,a={}){t=__PRIVATE_cast(t,Firestore$1);const l=isCloudWorkstation(e),u=t._getSettings(),d={...u,emulatorOptions:t._getEmulatorOptions()},g=`${e}:${r}`;l&&(pingServer(`https://${g}`),updateEmulatorBanner("Firestore",!0)),u.host!==an$1&&u.host!==g&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...u,host:g,ssl:l,emulatorOptions:a};if(!deepEqual(E,d)&&(t._setSettings(E),a.mockUserToken)){let P,Z;if(typeof a.mockUserToken=="string")P=a.mockUserToken,Z=User.MOCK_USER;else{P=createMockUserToken(a.mockUserToken,t._app?.options.projectId);const me=a.mockUserToken.sub||a.mockUserToken.user_id;if(!me)throw new FirestoreError(N$1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Z=new User(me)}t._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(P,Z))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,a){if(__PRIVATE_validateJSON(r,DocumentReference._jsonSchema))return new DocumentReference(e,a||null,new DocumentKey(ResourcePath.fromString(r.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property$1("string",DocumentReference._jsonSchemaVersion),referencePath:property$1("string")};class CollectionReference extends Query{constructor(e,r,a){super(e,r,__PRIVATE_newQueryForPath(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(t,e,...r){if(t=getModularInstance(t),__PRIVATE_validateNonEmptyArgument("collection","path",e),t instanceof Firestore$1){const a=ResourcePath.fromString(e,...r);return __PRIVATE_validateCollectionPath(a),new CollectionReference(t,null,a)}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=t._path.child(ResourcePath.fromString(e,...r));return __PRIVATE_validateCollectionPath(a),new CollectionReference(t.firestore,null,a)}}function doc(t,e,...r){if(t=getModularInstance(t),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),t instanceof Firestore$1){const a=ResourcePath.fromString(e,...r);return __PRIVATE_validateDocumentPath(a),new DocumentReference(t,null,new DocumentKey(a))}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=t._path.child(ResourcePath.fromString(e,...r));return __PRIVATE_validateDocumentPath(a),new DocumentReference(t.firestore,t instanceof CollectionReference?t.converter:null,new DocumentKey(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn$1="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._c=()=>{const a=getDocument();a&&__PRIVATE_logDebug(cn$1,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const r=getDocument();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=getDocument();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new __PRIVATE_Deferred;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(cn$1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(a=>{throw this.nc=a,this.rc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(a)),a}).then(a=>(this.rc=!1,a))));return this.ac=r,r}enqueueAfterDelay(e,r,a){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const l=DelayedOperation.createAndSchedule(this,e,r,a,u=>this.hc(u));return this.tc.push(l),l}uc(){this.nc&&fail(47125,{Pc:__PRIVATE_getMessageOrStack(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function __PRIVATE_getMessageOrStack(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isPartialObserver(t){return function(r,a){if(typeof r!="object"||r===null)return!1;const l=r;for(const u of a)if(u in l&&typeof l[u]=="function")return!0;return!1}(t,["next","error","complete"])}class Firestore extends Firestore$1{constructor(e,r,a,l){super(e,r,a,l),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(t,e){const r=typeof t=="object"?t:getApp(),a=typeof t=="string"?t:lt$1,l=_getProvider(r,"firestore").getImmediate({identifier:a});if(!l._initialized){const u=getDefaultEmulatorHostnameAndPort("firestore");u&&connectFirestoreEmulator(l,...u)}return l}function ensureFirestoreConfigured(t){if(t._terminated)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||__PRIVATE_configureFirestore(t),t._firestoreClient}function __PRIVATE_configureFirestore(t){const e=t._freezeSettings(),r=function(l,u,d,g){return new DatabaseInfo(l,u,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new FirestoreClient(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AggregateField{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class AggregateQuerySnapshot{constructor(e,r,a){this._userDataWriter=r,this._data=a,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(r){throw new FirestoreError(N$1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property$1("string",Bytes._jsonSchemaVersion),bytes:property$1("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property$1("string",GeoPoint._jsonSchemaVersion),latitude:property$1("number"),longitude:property$1("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,l){if(a.length!==l.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==l[u])return!1;return!0}(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new VectorValue(e.vectorValues);throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property$1("string",VectorValue._jsonSchemaVersion),vectorValues:property$1("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn$1=/^__.*__$/;class ParsedSetData{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,r,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,r,this.fieldTransforms)}}class ParsedUpdateData{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function __PRIVATE_isWrite(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ac:t})}}class __PRIVATE_ParseContextImpl{constructor(e,r,a,l,u,d){this.settings=e,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new __PRIVATE_ParseContextImpl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const r=this.path?.child(e),a=this.Vc({path:r,fc:!1});return a.gc(e),a}yc(e){const r=this.path?.child(e),a=this.Vc({path:r,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ac)&&hn$1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,r,a){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=a||__PRIVATE_newSerializer(e)}Cc(e,r,a,l=!1){return new __PRIVATE_ParseContextImpl({Ac:e,methodName:r,Dc:a,path:FieldPath$1.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(t){const e=t._freezeSettings(),r=__PRIVATE_newSerializer(t._databaseId);return new __PRIVATE_UserDataReader(t._databaseId,!!e.ignoreUndefinedProperties,r)}function __PRIVATE_parseSetData(t,e,r,a,l,u={}){const d=t.Cc(u.merge||u.mergeFields?2:0,e,r,l);__PRIVATE_validatePlainObject("Data must be an object, but it was:",d,a);const g=__PRIVATE_parseObject(a,d);let E,P;if(u.merge)E=new FieldMask(d.fieldMask),P=d.fieldTransforms;else if(u.mergeFields){const Z=[];for(const me of u.mergeFields){const _e=__PRIVATE_fieldPathFromArgument$1(e,me,r);if(!d.contains(_e))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Field '${_e}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(Z,_e)||Z.push(_e)}E=new FieldMask(Z),P=d.fieldTransforms.filter(me=>E.covers(me.field))}else E=null,P=d.fieldTransforms;return new ParsedSetData(new ObjectValue(g),E,P)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}function __PRIVATE_createSentinelChildContext(t,e,r){return new __PRIVATE_ParseContextImpl({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class __PRIVATE_ServerTimestampFieldValueImpl extends FieldValue{_toFieldTransform(e){return new FieldTransform(e.path,new __PRIVATE_ServerTimestampTransform)}isEqual(e){return e instanceof __PRIVATE_ServerTimestampFieldValueImpl}}class __PRIVATE_ArrayUnionFieldValueImpl extends FieldValue{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=__PRIVATE_createSentinelChildContext(this,e,!0),a=this.vc.map(u=>__PRIVATE_parseData(u,r)),l=new __PRIVATE_ArrayUnionTransformOperation(a);return new FieldTransform(e.path,l)}isEqual(e){return e instanceof __PRIVATE_ArrayUnionFieldValueImpl&&deepEqual(this.vc,e.vc)}}class __PRIVATE_ArrayRemoveFieldValueImpl extends FieldValue{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=__PRIVATE_createSentinelChildContext(this,e,!0),a=this.vc.map(u=>__PRIVATE_parseData(u,r)),l=new __PRIVATE_ArrayRemoveTransformOperation(a);return new FieldTransform(e.path,l)}isEqual(e){return e instanceof __PRIVATE_ArrayRemoveFieldValueImpl&&deepEqual(this.vc,e.vc)}}function __PRIVATE_parseUpdateData(t,e,r,a){const l=t.Cc(1,e,r);__PRIVATE_validatePlainObject("Data must be an object, but it was:",l,a);const u=[],d=ObjectValue.empty();forEach$1(a,(E,P)=>{const Z=__PRIVATE_fieldPathFromDotSeparatedString(e,E,r);P=getModularInstance(P);const me=l.yc(Z);if(P instanceof __PRIVATE_DeleteFieldValueImpl)u.push(Z);else{const _e=__PRIVATE_parseData(P,me);_e!=null&&(u.push(Z),d.set(Z,_e))}});const g=new FieldMask(u);return new ParsedUpdateData(d,g,l.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(t,e,r,a,l,u){const d=t.Cc(1,e,r),g=[__PRIVATE_fieldPathFromArgument$1(e,a,r)],E=[l];if(u.length%2!=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _e=0;_e<u.length;_e+=2)g.push(__PRIVATE_fieldPathFromArgument$1(e,u[_e])),E.push(u[_e+1]);const P=[],Z=ObjectValue.empty();for(let _e=g.length-1;_e>=0;--_e)if(!__PRIVATE_fieldMaskContains(P,g[_e])){const He=g[_e];let Xe=E[_e];Xe=getModularInstance(Xe);const wt=d.yc(He);if(Xe instanceof __PRIVATE_DeleteFieldValueImpl)P.push(He);else{const Do=__PRIVATE_parseData(Xe,wt);Do!=null&&(P.push(He),Z.set(He,Do))}}const me=new FieldMask(P);return new ParsedUpdateData(Z,me,d.fieldTransforms)}function __PRIVATE_parseQueryValue(t,e,r,a=!1){return __PRIVATE_parseData(r,t.Cc(a?4:3,e))}function __PRIVATE_parseData(t,e){if(__PRIVATE_looksLikeJsonObject(t=getModularInstance(t)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,t),__PRIVATE_parseObject(t,e);if(t instanceof FieldValue)return function(a,l){if(!__PRIVATE_isWrite(l.Ac))throw l.Sc(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(l);u&&l.fieldTransforms.push(u)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(a,l){const u=[];let d=0;for(const g of a){let E=__PRIVATE_parseData(g,l.wc(d));E==null&&(E={nullValue:"NULL_VALUE"}),u.push(E),d++}return{arrayValue:{values:u}}}(t,e)}return function(a,l){if((a=getModularInstance(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return toNumber$1(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=Timestamp.fromDate(a);return{timestampValue:toTimestamp(l.serializer,u)}}if(a instanceof Timestamp){const u=new Timestamp(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:toTimestamp(l.serializer,u)}}if(a instanceof GeoPoint)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(l.serializer,a._byteString)};if(a instanceof DocumentReference){const u=l.databaseId,d=a.firestore._databaseId;if(!d.isEqual(u))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:__PRIVATE_toResourceName(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof VectorValue)return function(d,g){return{mapValue:{fields:{[ht$1]:{stringValue:It$1},[Et$1]:{arrayValue:{values:d.toArray().map(P=>{if(typeof P!="number")throw g.Sc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(g.serializer,P)})}}}}}}(a,l);throw l.Sc(`Unsupported field value: ${__PRIVATE_valueDescription(a)}`)}(t,e)}function __PRIVATE_parseObject(t,e){const r={};return isEmpty(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach$1(t,(a,l)=>{const u=__PRIVATE_parseData(l,e.mc(a));u!=null&&(r[a]=u)}),{mapValue:{fields:r}}}function __PRIVATE_looksLikeJsonObject(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Timestamp||t instanceof GeoPoint||t instanceof Bytes||t instanceof DocumentReference||t instanceof FieldValue||t instanceof VectorValue)}function __PRIVATE_validatePlainObject(t,e,r){if(!__PRIVATE_looksLikeJsonObject(r)||!__PRIVATE_isPlainObject(r)){const a=__PRIVATE_valueDescription(r);throw a==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+a)}}function __PRIVATE_fieldPathFromArgument$1(t,e,r){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(t,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",t,!1,void 0,r)}const Pn$1=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(t,e,r){if(e.search(Pn$1)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function __PRIVATE_createError(t,e,r,a,l){const u=a&&!a.isEmpty(),d=l!==void 0;let g=`Function ${e}() called with invalid data`;r&&(g+=" (via `toFirestore()`)"),g+=". ";let E="";return(u||d)&&(E+=" (found",u&&(E+=` in field ${a}`),d&&(E+=` in document ${l}`),E+=")"),new FirestoreError(N$1.INVALID_ARGUMENT,g+t+E)}function __PRIVATE_fieldMaskContains(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,r,a,l,u){this._firestore=e,this._userDataWriter=r,this._key=a,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(t,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(t,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new FirestoreError(N$1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(t,e,...r){let a=[];e instanceof AppliableConstraint&&a.push(e),a=a.concat(r),function(u){const d=u.filter(E=>E instanceof QueryCompositeFilterConstraint).length,g=u.filter(E=>E instanceof QueryFieldFilterConstraint).length;if(d>1||d>0&&g>0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const l of a)t=l._apply(t);return t}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,r,a){super(),this._field=e,this._op=r,this._value=a,this.type="where"}static _create(e,r,a){return new QueryFieldFilterConstraint(e,r,a)}_apply(e){const r=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,r),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,r))}_parse(e){const r=__PRIVATE_newUserDataReader(e.firestore);return function(u,d,g,E,P,Z,me){let _e;if(P.isKeyField()){if(Z==="array-contains"||Z==="array-contains-any")throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Z}' queries on documentId().`);if(Z==="in"||Z==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(me,Z);const Xe=[];for(const wt of me)Xe.push(__PRIVATE_parseDocumentIdValue(E,u,wt));_e={arrayValue:{values:Xe}}}else _e=__PRIVATE_parseDocumentIdValue(E,u,me)}else Z!=="in"&&Z!=="not-in"&&Z!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(me,Z),_e=__PRIVATE_parseQueryValue(g,d,me,Z==="in"||Z==="not-in");return FieldFilter.create(P,Z,_e)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function where(t,e,r){const a=e,l=__PRIVATE_fieldPathFromArgument("where",t);return QueryFieldFilterConstraint._create(l,a,r)}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new QueryCompositeFilterConstraint(e,r)}_parse(e){const r=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:CompositeFilter.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(l,u){let d=l;const g=u.getFlattenedFilters();for(const E of g)__PRIVATE_validateNewFieldFilter(d,E),d=__PRIVATE_queryWithAddedFilter(d,E)}(e._query,r),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new QueryOrderByConstraint(e,r)}_apply(e){const r=function(l,u,d){if(l.startAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(u,d)}(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,function(l,u){const d=l.explicitOrderBy.concat([u]);return new __PRIVATE_QueryImpl(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(e._query,r))}}function orderBy(t,e="asc"){const r=e,a=__PRIVATE_fieldPathFromArgument("orderBy",t);return QueryOrderByConstraint._create(a,r)}class QueryLimitConstraint extends QueryConstraint{constructor(e,r,a){super(),this.type=e,this._limit=r,this._limitType=a}static _create(e,r,a){return new QueryLimitConstraint(e,r,a)}_apply(e){return new Query(e.firestore,e.converter,__PRIVATE_queryWithLimit(e._query,this._limit,this._limitType))}}function limit(t){return __PRIVATE_validatePositiveNumber("limit",t),QueryLimitConstraint._create("limit",t,"F")}function __PRIVATE_parseDocumentIdValue(t,e,r){if(typeof(r=getModularInstance(r))=="string"){if(r==="")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&r.indexOf("/")!==-1)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=e.path.child(ResourcePath.fromString(r));if(!DocumentKey.isDocumentKey(a))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return __PRIVATE_refValue(t,new DocumentKey(a))}if(r instanceof DocumentReference)return __PRIVATE_refValue(t,r._key);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(r)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(t,e){if(!Array.isArray(t)||t.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(t,e){const r=function(l,u){for(const d of l)for(const g of d.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null}(t.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,r="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const a={};return forEach$1(e,(l,u)=>{a[l]=this.convertValue(u,r)}),a}convertVectorValue(e){const r=e.fields?.[Et$1].arrayValue?.values?.map(a=>__PRIVATE_normalizeNumber(a.doubleValue));return new VectorValue(r)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,r){return(e.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(e,r){switch(r){case"previous":const a=__PRIVATE_getPreviousValue(e);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const r=__PRIVATE_normalizeTimestamp(e);return new Timestamp(r.seconds,r.nanos)}convertDocumentKey(e,r){const a=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(a),9688,{name:e});const l=new DatabaseId(a.get(1),a.get(3)),u=new DocumentKey(a.popFirst(5));return l.isEqual(r)||__PRIVATE_logError(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(t,e,r){let a;return a=t?t.toFirestore(e):e,a}function count(){return new AggregateField("count")}class SnapshotMetadata{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,r,a,l,u,d){super(e,r,a,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const a=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=DocumentSnapshot._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property$1("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property$1("string","DocumentSnapshot"),bundleName:property$1("string"),bundle:property$1("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,r,a,l){this._firestore=e,this._userDataWriter=r,this._snapshot=l,this.metadata=new SnapshotMetadata(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(a=>{e.call(r,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,a.key,a,new SnapshotMetadata(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N$1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map(g=>{const E=new QueryDocumentSnapshot(l._firestore,l._userDataWriter,g.doc.key,g.doc,new SnapshotMetadata(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:E,oldIndex:-1,newIndex:d++}})}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>u||g.type!==3).map(g=>{const E=new QueryDocumentSnapshot(l._firestore,l._userDataWriter,g.doc.key,g.doc,new SnapshotMetadata(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let P=-1,Z=-1;return g.type!==0&&(P=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),Z=d.indexOf(g.doc.key)),{type:__PRIVATE_resultChangeType(g.type),doc:E,oldIndex:P,newIndex:Z}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],a=[],l=[];return this.docs.forEach(u=>{u._document!==null&&(r.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(t){t=__PRIVATE_cast(t,DocumentReference);const e=__PRIVATE_cast(t.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),t._key).then(r=>__PRIVATE_convertToDocSnapshot(e,t,r))}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property$1("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property$1("string","QuerySnapshot"),bundleName:property$1("string"),bundle:property$1("string")};class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,r)}}function getDocs(t){t=__PRIVATE_cast(t,Query);const e=__PRIVATE_cast(t.firestore,Firestore),r=ensureFirestoreConfigured(e),a=new __PRIVATE_ExpUserDataWriter(e);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(t._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(r,t._query).then(l=>new QuerySnapshot(e,a,t,l))}function setDoc(t,e,r){t=__PRIVATE_cast(t,DocumentReference);const a=__PRIVATE_cast(t.firestore,Firestore),l=__PRIVATE_applyFirestoreDataConverter(t.converter,e);return executeWrite(a,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(a),"setDoc",t._key,l,t.converter!==null,r).toMutation(t._key,Precondition.none())])}function updateDoc(t,e,r,...a){t=__PRIVATE_cast(t,DocumentReference);const l=__PRIVATE_cast(t.firestore,Firestore),u=__PRIVATE_newUserDataReader(l);let d;return d=typeof(e=getModularInstance(e))=="string"||e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(u,"updateDoc",t._key,e,r,a):__PRIVATE_parseUpdateData(u,"updateDoc",t._key,e),executeWrite(l,[d.toMutation(t._key,Precondition.exists(!0))])}function deleteDoc(t){return executeWrite(__PRIVATE_cast(t.firestore,Firestore),[new __PRIVATE_DeleteMutation(t._key,Precondition.none())])}function addDoc(t,e){const r=__PRIVATE_cast(t.firestore,Firestore),a=doc(t),l=__PRIVATE_applyFirestoreDataConverter(t.converter,e);return executeWrite(r,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(t.firestore),"addDoc",a._key,l,t.converter!==null,{}).toMutation(a._key,Precondition.exists(!1))]).then(()=>a)}function onSnapshot(t,...e){t=getModularInstance(t);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||__PRIVATE_isPartialObserver(e[a])||(r=e[a++]);const l={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(__PRIVATE_isPartialObserver(e[a])){const E=e[a];e[a]=E.next?.bind(E),e[a+1]=E.error?.bind(E),e[a+2]=E.complete?.bind(E)}let u,d,g;if(t instanceof DocumentReference)d=__PRIVATE_cast(t.firestore,Firestore),g=__PRIVATE_newQueryForPath(t._key.path),u={next:E=>{e[a]&&e[a](__PRIVATE_convertToDocSnapshot(d,t,E))},error:e[a+1],complete:e[a+2]};else{const E=__PRIVATE_cast(t,Query);d=__PRIVATE_cast(E.firestore,Firestore),g=E._query;const P=new __PRIVATE_ExpUserDataWriter(d);u={next:Z=>{e[a]&&e[a](new QuerySnapshot(d,P,E,Z))},error:e[a+1],complete:e[a+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(t._query)}return function(P,Z,me,_e){const He=new __PRIVATE_AsyncObserver(_e),Xe=new __PRIVATE_QueryListener(Z,He,me);return P.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(P),Xe)),()=>{He.Nu(),P.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(P),Xe))}}(ensureFirestoreConfigured(d),g,l,u)}function executeWrite(t,e){return function(a,l){const u=new __PRIVATE_Deferred;return a.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(a),l,u)),u.promise}(ensureFirestoreConfigured(t),e)}function __PRIVATE_convertToDocSnapshot(t,e,r){const a=r.docs.get(e._key),l=new __PRIVATE_ExpUserDataWriter(t);return new DocumentSnapshot(t,l,e._key,a,new SnapshotMetadata(r.hasPendingWrites,r.fromCache),e.converter)}function getCountFromServer(t){return getAggregateFromServer(t,{count:count()})}function getAggregateFromServer(t,e){const r=__PRIVATE_cast(t.firestore,Firestore),a=ensureFirestoreConfigured(r),l=__PRIVATE_mapToArray(e,(u,d)=>new __PRIVATE_AggregateImpl(d,u.aggregateType,u._internalFieldPath));return __PRIVATE_firestoreClientRunAggregateQuery(a,t._query,l).then(u=>function(g,E,P){const Z=new __PRIVATE_ExpUserDataWriter(g);return new AggregateQuerySnapshot(E,Z,P)}(r,t,u))}function serverTimestamp(){return new __PRIVATE_ServerTimestampFieldValueImpl("serverTimestamp")}function arrayUnion(...t){return new __PRIVATE_ArrayUnionFieldValueImpl("arrayUnion",t)}function arrayRemove(...t){return new __PRIVATE_ArrayRemoveFieldValueImpl("arrayRemove",t)}(function(e,r=!0){(function(l){x=l})(SDK_VERSION),_registerComponent(new Component("firestore",(a,{instanceIdentifier:l,options:u})=>{const d=a.getProvider("app").getImmediate(),g=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(a.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(d,a.getProvider("app-check-internal")),function(P,Z){if(!Object.prototype.hasOwnProperty.apply(P.options,["projectId"]))throw new FirestoreError(N$1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(P.options.projectId,Z)}(d,l),d);return u={useFetchStreams:r,...u},g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),registerVersion(F,M,e),registerVersion(F,M,"esm2020")})();var name$1="firebase",version$2="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$1,version$2,"app");function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(t,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${t}`,...e)}function _logError(t,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(t,...e){throw createErrorInternal(t,...e)}function _createError(t,...e){return createErrorInternal(t,...e)}function _errorWithCustomMessage(t,e,r){const a={...prodErrorMap(),[e]:r};return new ErrorFactory("auth","Firebase",a).create(e,{appName:t.name})}function _serverAppCurrentUserOperationNotSupportedError(t){return _errorWithCustomMessage(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(t,e,r){const a=r;if(!(e instanceof a))throw a.name!==e.constructor.name&&_fail(t,"argument-error"),_errorWithCustomMessage(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(t,...e){if(typeof t!="string"){const r=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=t.name),t._errorFactory.create(r,...a)}return _DEFAULT_AUTH_ERROR_FACTORY.create(t,...e)}function _assert(t,e,...r){if(!t)throw createErrorInternal(e,...r)}function debugFail(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _logError(e),new Error(e)}function debugAssert(t,e){t||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){return typeof self<"u"&&self.location?.href||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,r){this.shortDelay=e,this.longDelay=r,debugAssert(r>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(t,e){debugAssert(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,r,a){this.fetchImpl=e,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function _performApiRequest(t,e,r,a,l={}){return _performFetchWithErrorHandling(t,l,async()=>{let u={},d={};a&&(e==="GET"?d=a:u={body:JSON.stringify(a)});const g=querystring({key:t.config.apiKey,...d}).slice(1),E=await t._getAdditionalHeaders();E["Content-Type"]="application/json",t.languageCode&&(E["X-Firebase-Locale"]=t.languageCode);const P={method:e,headers:E,...u};return isCloudflareWorker()||(P.referrerPolicy="no-referrer"),t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(P.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(t,t.config.apiHost,r,g),P)})}async function _performFetchWithErrorHandling(t,e,r){t._canInitEmulator=!1;const a={...SERVER_ERROR_MAP,...e};try{const l=new NetworkTimeout(t),u=await Promise.race([r(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw _makeTaggedError(t,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const g=u.ok?d.errorMessage:d.error.message,[E,P]=g.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(t,"credential-already-in-use",d);if(E==="EMAIL_EXISTS")throw _makeTaggedError(t,"email-already-in-use",d);if(E==="USER_DISABLED")throw _makeTaggedError(t,"user-disabled",d);const Z=a[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(P)throw _errorWithCustomMessage(t,Z,P);_fail(t,Z)}}catch(l){if(l instanceof FirebaseError)throw l;_fail(t,"network-request-failed",{message:String(l)})}}async function _performSignInRequest(t,e,r,a,l={}){const u=await _performApiRequest(t,e,r,a,l);return"mfaPendingCredential"in u&&_fail(t,"multi-factor-auth-required",{_serverResponse:u}),u}async function _getFinalTarget(t,e,r,a){const l=`${e}${r}?${a}`,u=t,d=u.config.emulator?_emulatorUrl(t.config,l):`${t.config.apiScheme}://${l}`;return CookieAuthProxiedEndpoints.includes(r)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function _parseEnforcementState(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(t,e,r){const a={appName:t.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const l=_createError(t,e,a);return l.customData._tokenResponse=r,l}function isEnterprise(t){return t!==void 0&&t.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return _parseEnforcementState(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(t,e){return _performApiRequest(t,"GET","/v2/recaptchaConfig",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(t,e){return _performApiRequest(t,"POST","/v1/accounts:delete",e)}async function getAccountInfo(t,e){return _performApiRequest(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(t,e=!1){const r=getModularInstance(t),a=await r.getIdToken(e),l=_parseToken(a);_assert(l&&l.exp&&l.auth_time&&l.iat,r.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:a,authTime:utcTimestampToDateString(secondsStringToMilliseconds(l.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(l.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function secondsStringToMilliseconds(t){return Number(t)*1e3}function _parseToken(t){const[e,r,a]=t.split(".");if(e===void 0||r===void 0||a===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const l=base64Decode(r);return l?JSON.parse(l):(_logError("Failed to decode base64 JWT payload"),null)}catch(l){return _logError("Caught error parsing JWT payload as JSON",l?.toString()),null}}function _tokenExpiresIn(t){const e=_parseToken(t);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(t,e,r=!1){if(r)return e;try{return await e}catch(a){throw a instanceof FirebaseError&&isUserInvalidated(a)&&t.auth.currentUser===t&&await t.auth.signOut(),a}}function isUserInvalidated({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(t){const e=t.auth,r=await t.getIdToken(),a=await _logoutIfInvalidated(t,getAccountInfo(e,{idToken:r}));_assert(a?.users.length,e,"internal-error");const l=a.users[0];t._notifyReloadListener(l);const u=l.providerUserInfo?.length?extractProviderData(l.providerUserInfo):[],d=mergeProviderData(t.providerData,u),g=t.isAnonymous,E=!(t.email&&l.passwordHash)&&!d?.length,P=g?E:!1,Z={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new UserMetadata(l.createdAt,l.lastLoginAt),isAnonymous:P};Object.assign(t,Z)}async function reload(t){const e=getModularInstance(t);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(t,e){return[...t.filter(a=>!e.some(l=>l.providerId===a.providerId)),...e]}function extractProviderData(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(t,e){const r=await _performFetchWithErrorHandling(t,{},async()=>{const a=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=t.config,d=await _getFinalTarget(t,l,"/v1/token",`key=${u}`),g=await t._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:g,body:a};return t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(E.credentials="include"),FetchProvider.fetch()(d,E)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function revokeToken(t,e){return _performApiRequest(t,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const r=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:a,refreshToken:l,expiresIn:u}=await requestStsToken(e,r);this.updateTokensAndExpiration(a,l,Number(u))}updateTokensAndExpiration(e,r,a){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,r){const{refreshToken:a,accessToken:l,expirationTime:u}=r,d=new StsTokenManager;return a&&(_assert(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),l&&(_assert(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(_assert(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(t,e){_assert(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class UserImpl{constructor({uid:e,auth:r,stsTokenManager:a,...l}){this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new UserMetadata(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const r=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new UserImpl({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),r&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const a=r.displayName??void 0,l=r.email??void 0,u=r.phoneNumber??void 0,d=r.photoURL??void 0,g=r.tenantId??void 0,E=r._redirectEventId??void 0,P=r.createdAt??void 0,Z=r.lastLoginAt??void 0,{uid:me,emailVerified:_e,isAnonymous:He,providerData:Xe,stsTokenManager:wt}=r;_assert(me&&wt,e,"internal-error");const Do=StsTokenManager.fromJSON(this.name,wt);_assert(typeof me=="string",e,"internal-error"),assertStringOrUndefined(a,e.name),assertStringOrUndefined(l,e.name),_assert(typeof _e=="boolean",e,"internal-error"),_assert(typeof He=="boolean",e,"internal-error"),assertStringOrUndefined(u,e.name),assertStringOrUndefined(d,e.name),assertStringOrUndefined(g,e.name),assertStringOrUndefined(E,e.name),assertStringOrUndefined(P,e.name),assertStringOrUndefined(Z,e.name);const sr=new UserImpl({uid:me,auth:e,email:l,emailVerified:_e,displayName:a,isAnonymous:He,photoURL:d,phoneNumber:u,tenantId:g,stsTokenManager:Do,createdAt:P,lastLoginAt:Z});return Xe&&Array.isArray(Xe)&&(sr.providerData=Xe.map(Ko=>({...Ko}))),E&&(sr._redirectEventId=E),sr}static async _fromIdTokenResponse(e,r,a=!1){const l=new StsTokenManager;l.updateFromServerResponse(r);const u=new UserImpl({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a});return await _reloadWithoutSaving(u),u}static async _fromGetAccountInfoResponse(e,r,a){const l=r.users[0];_assert(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?extractProviderData(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,g=new StsTokenManager;g.updateFromIdToken(a);const E=new UserImpl({uid:l.localId,auth:e,stsTokenManager:g,isAnonymous:d}),P={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new UserMetadata(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(E,P),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(t){debugAssert(t instanceof Function,"Expected a class definition");let e=instanceCache.get(t);return e?(debugAssert(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,instanceCache.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(t,e,r){return`firebase:${t}:${e}:${r}`}class PersistenceUserManager{constructor(e,r,a){this.persistence=e,this.auth=r,this.userKey=a;const{config:l,name:u}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,l.apiKey,u),this.fullPersistenceKey=_persistenceKeyName("persistence",l.apiKey,u),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return r?UserImpl._fromGetAccountInfoResponse(this.auth,r,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,a="authUser"){if(!r.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,a);const l=(await Promise.all(r.map(async P=>{if(await P._isAvailable())return P}))).filter(P=>P);let u=l[0]||_getInstance(inMemoryPersistence);const d=_persistenceKeyName(a,e.config.apiKey,e.name);let g=null;for(const P of r)try{const Z=await P._get(d);if(Z){let me;if(typeof Z=="string"){const _e=await getAccountInfo(e,{idToken:Z}).catch(()=>{});if(!_e)break;me=await UserImpl._fromGetAccountInfoResponse(e,_e,Z)}else me=UserImpl._fromJSON(e,Z);P!==u&&(g=me),u=P;break}}catch{}const E=l.filter(P=>P._shouldAllowMigration);return!u._shouldAllowMigration||!E.length?new PersistenceUserManager(u,e,a):(u=E[0],g&&await u._set(d,g.toJSON()),await Promise.all(r.map(async P=>{if(P!==u)try{await P._remove(d)}catch{}})),new PersistenceUserManager(u,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=t.match(r);if(a?.length===2)return a[1]}return"Other"}function _isFirefox(t=getUA()){return/firefox\//i.test(t)}function _isSafari(t=getUA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(t=getUA()){return/crios\//i.test(t)}function _isIEMobile(t=getUA()){return/iemobile/i.test(t)}function _isAndroid(t=getUA()){return/android/i.test(t)}function _isBlackBerry(t=getUA()){return/blackberry/i.test(t)}function _isWebOS(t=getUA()){return/webos/i.test(t)}function _isIOS(t=getUA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _isIOSStandalone(t=getUA()){return _isIOS(t)&&!!window.navigator?.standalone}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(t=getUA()){return _isIOS(t)||_isAndroid(t)||_isWebOS(t)||_isBlackBerry(t)||/windows phone/i.test(t)||_isIEMobile(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(t,e=[]){let r;switch(t){case"Browser":r=_getBrowserName(getUA());break;case"Worker":r=`${_getBrowserName(getUA())}-${t}`;break;default:r=t}const a=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${SDK_VERSION}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const a=u=>new Promise((d,g)=>{try{const E=e(u);d(E)}catch(E){g(E)}});a.onAbort=r,this.queue.push(a);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const a of this.queue)await a(e),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const l of r)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(t,e={}){return _performApiRequest(t,"GET","/v2/passwordPolicy",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??MINIMUM_MIN_PASSWORD_LENGTH,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const a=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=e.length>=a),l&&(r.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let l=0;l<e.length;l++)a=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,r,a,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,r,a,l){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=_getInstance(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await getAccountInfo(this,{idToken:e}),a=await UserImpl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_isFirebaseServerApp(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=a?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&g?.user&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const r=e?getModularInstance(e):null;return r&&_assert(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),r=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,r,a){return this.registerStateListener(this.authStateSubscription,e,r,a)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,a){return this.registerStateListener(this.idTokenSubscription,e,r,a)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await revokeToken(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const a=await this.getOrInitRedirectPersistenceManager(r);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&_getInstance(e)||this._popupRedirectResolver;_assert(r,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,a,l){if(this._deleted)return()=>{};const u=typeof r=="function"?r:r.next.bind(r);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(g,this,"internal-error"),g.then(()=>{d||u(this.currentUser)}),typeof r=="function"){const E=e.addObserver(r,a,l);return()=>{d=!0,E()}}else{const E=e.addObserver(r);return()=>{d=!0,E()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_logWarn(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _castAuth(t){return getModularInstance(t)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(r=>this.observer=r)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(t){externalJSProvider=t}function _loadJS(t){return externalJSProvider.loadJS(t)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class MockGreCAPTCHA{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",r=!1){async function a(u){if(!r){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,g)=>{getRecaptchaConfig(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(E=>{if(E.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const P=new RecaptchaConfig(E);return u.tenantId==null?u._agentRecaptchaConfig=P:u._tenantRecaptchaConfigs[u.tenantId]=P,d(P.siteKey)}}).catch(E=>{g(E)})})}function l(u,d,g){const E=window.grecaptcha;isEnterprise(E)?E.enterprise.ready(()=>{E.enterprise.execute(u,{action:e}).then(P=>{d(P)}).catch(()=>{d(FAKE_TOKEN)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{a(this.auth).then(g=>{if(!r&&isEnterprise(window.grecaptcha))l(g,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let E=_recaptchaEnterpriseScriptUrl();E.length!==0&&(E+=g),_loadJS(E).then(()=>{l(g,u,d)}).catch(P=>{d(P)})}}).catch(g=>{d(g)})})}}async function injectRecaptchaFields(t,e,r,a=!1,l=!1){const u=new RecaptchaEnterpriseVerifier(t);let d;if(l)d=FAKE_TOKEN;else try{d=await u.verify(r)}catch{d=await u.verify(r,!0)}const g={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const E=g.phoneEnrollmentInfo.phoneNumber,P=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:E,recaptchaToken:P,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const E=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:E,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function handleRecaptchaFlow(t,e,r,a,l){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await injectRecaptchaFields(t,e,r,r==="getOobCode");return a(t,u)}else return a(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await injectRecaptchaFields(t,e,r,r==="getOobCode");return a(t,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(t,e){const r=_getProvider(t,"auth");if(r.isInitialized()){const l=r.getImmediate(),u=r.getOptions();if(deepEqual(u,e??{}))return l;_fail(l,"already-initialized")}return r.initialize({options:e})}function _initializeAuthInstance(t,e){const r=e?.persistence||[],a=(Array.isArray(r)?r:[r]).map(_getInstance);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(a,e?.popupRedirectResolver)}function connectAuthEmulator(t,e,r){const a=_castAuth(t);_assert(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const l=!1,u=extractProtocol(e),{host:d,port:g}=extractHostAndPort(e),E=g===null?"":`:${g}`,P={url:`${u}//${d}${E}/`},Z=Object.freeze({host:d,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!a._canInitEmulator){_assert(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),_assert(deepEqual(P,a.config.emulator)&&deepEqual(Z,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=P,a.emulatorConfig=Z,a.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(d)?(pingServer(`${u}//${d}${E}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function extractHostAndPort(t){const e=extractProtocol(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(a);if(l){const u=l[1];return{host:u,port:parsePort(a.substr(u.length+1))}}else{const[u,d]=a.split(":");return{host:u,port:parsePort(d)}}}function parsePort(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function emitEmulatorWarning(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,r){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function linkEmailPassword(t,e){return _performApiRequest(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}async function signInWithEmailLinkForLinking(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(e,r,a,l=null){super("password",a),this._email=e,this._password=r,this._tenantId=l}static _fromEmailAndPassword(e,r){return new EmailAuthCredential(e,r,"password")}static _fromEmailAndCode(e,r,a=null){return new EmailAuthCredential(e,r,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,r,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const a={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,a,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:r,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):_fail("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:l,...u}=r;if(!a||!l)return null;const d=new OAuthCredential(a,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const r=this.buildRequest();return signInWithIdp(e,r)}_linkToIdToken(e,r){const a=this.buildRequest();return a.idToken=r,signInWithIdp(e,a)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,signInWithIdp(e,r)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=querystring(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(t){const e=querystringDecode(extractQuerystring(t)).link,r=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,a=querystringDecode(extractQuerystring(t)).deep_link_id;return(a?querystringDecode(extractQuerystring(a)).link:null)||a||r||e||t}class ActionCodeURL{constructor(e){const r=querystringDecode(extractQuerystring(e)),a=r.apiKey??null,l=r.oobCode??null,u=parseMode(r.mode??null);_assert(a&&l&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=l,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=parseDeepLink(e);try{return new ActionCodeURL(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,r){return EmailAuthCredential._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const a=ActionCodeURL.parseLink(r);return _assert(a,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,a.code,a.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:a}=e;if(!r&&!a)return null;try{return GoogleAuthProvider.credential(r,a)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,r){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=e;if(!r||!a)return null;try{return TwitterAuthProvider.credential(r,a)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signUp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,a,l=!1){const u=await UserImpl._fromIdTokenResponse(e,a,l),d=providerIdForResponse(a);return new UserCredentialImpl({user:u,providerId:d,_tokenResponse:a,operationType:r})}static async _forOperation(e,r,a){await e._updateTokensIfNecessary(a,!0);const l=providerIdForResponse(a);return new UserCredentialImpl({user:e,providerId:l,_tokenResponse:a,operationType:r})}}function providerIdForResponse(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,r,a,l){super(r.code,r.message),this.operationType=a,this.user=l,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,r,a,l){return new MultiFactorError(e,r,a,l)}}function _processCredentialSavingMfaContextIfNecessary(t,e,r,a){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(t,u,e,a):u})}async function _link$1(t,e,r=!1){const a=await _logoutIfInvalidated(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return UserCredentialImpl._forOperation(t,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(t,e,r=!1){const{auth:a}=t;if(_isFirebaseServerApp(a.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(a));const l="reauthenticate";try{const u=await _logoutIfInvalidated(t,_processCredentialSavingMfaContextIfNecessary(a,l,e,t),r);_assert(u.idToken,a,"internal-error");const d=_parseToken(u.idToken);_assert(d,a,"internal-error");const{sub:g}=d;return _assert(t.uid===g,a,"user-mismatch"),UserCredentialImpl._forOperation(t,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&_fail(a,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(t,e,r=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const a="signIn",l=await _processCredentialSavingMfaContextIfNecessary(t,a,e),u=await UserCredentialImpl._fromIdTokenResponse(t,a,l);return r||await t._updateCurrentUser(u.user),u}async function signInWithCredential(t,e){return _signInWithCredential(_castAuth(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(t){const e=_castAuth(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function createUserWithEmailAndPassword(t,e,r){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const a=_castAuth(t),d=await handleRecaptchaFlow(a,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(E=>{throw E.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),E}),g=await UserCredentialImpl._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(g.user),g}function signInWithEmailAndPassword(t,e,r){return _isFirebaseServerApp(t.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t)):signInWithCredential(getModularInstance(t),EmailAuthProvider.credential(e,r)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),a})}function onIdTokenChanged(t,e,r,a){return getModularInstance(t).onIdTokenChanged(e,r,a)}function beforeAuthStateChanged(t,e,r){return getModularInstance(t).beforeAuthStateChanged(e,r)}function onAuthStateChanged(t,e,r,a){return getModularInstance(t).onAuthStateChanged(e,r,a)}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),l=this.localCache[r];a!==l&&e(r,l,a)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((d,g,E)=>{this.notifyListeners(d,E)});return}const a=e.key;r?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(a);!r&&this.localCache[a]===d||this.notifyListeners(a,d)},u=this.storage.getItem(a);_isIE10()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,IE10_LOCAL_STORAGE_SYNC_DELAY):l()}notifyListeners(e,r){this.localCache[e]=r;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:a}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(l=>l.isListeningto(e));if(r)return r;const a=new Receiver(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:a,eventType:l,data:u}=r.data,d=this.handlersMap[l];if(!d?.size)return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const g=Array.from(d).map(async P=>P(r.origin,u)),E=await _allSettled(g);r.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:E})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(t="",e=10){let r="";for(let a=0;a<e;a++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,a=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((g,E)=>{const P=_generateEventId("",20);l.port1.start();const Z=setTimeout(()=>{E(new Error("unsupported_event"))},a);d={messageChannel:l,onMessage(me){const _e=me;if(_e.data.eventId===P)switch(_e.data.status){case"ack":clearTimeout(Z),u=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(_e.data.response);break;default:clearTimeout(Z),clearTimeout(u),E(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:P,data:r},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(t){_window().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){return navigator?.serviceWorker?.controller||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function getObjectStore(t,e){return t.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const t=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(t).toPromise()}function _openDatabase(){const t=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const a=t.result;try{a.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(l){r(l)}}),t.addEventListener("success",async()=>{const a=t.result;a.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(a):(a.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(t,e,r){const a=getObjectStore(t,!0).put({[DB_DATA_KEYPATH]:e,value:r});return new DBPromise(a).toPromise()}async function getObject(t,e){const r=getObjectStore(t,!1).get(e),a=await new DBPromise(r).toPromise();return a===void 0?null:a.value}function _deleteObject(t,e){const r=getObjectStore(t,!0).delete(e);return new DBPromise(r).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let r=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(r++>_TRANSACTION_RETRY_COUNT)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>_putObject(a,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(a=>getObject(a,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>_deleteObject(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=getObjectStore(l,!1).getAll();return new DBPromise(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)a.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),r.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!a.has(l)&&(this.notifyListeners(l,null),r.push(l));return r}notifyListeners(e,r){this.localCache[e]=r;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(t,e){return e?_getInstance(e):(_assert(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,r){return signInWithIdp(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function _signIn(t){return _signInWithCredential(t.auth,new IdpCredential(t),t.bypassAuthState)}function _reauth(t){const{auth:e,user:r}=t;return _assert(r,e,"internal-error"),_reauthenticate(r,new IdpCredential(t),t.bypassAuthState)}async function _link(t){const{auth:e,user:r}=t;return _assert(r,e,"internal-error"),_link$1(r,new IdpCredential(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,r,a,l,u=!1){this.auth=e,this.resolver=a,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:a,postBody:l,tenantId:u,error:d,type:g}=e;if(d){this.reject(d);return}const E={auth:this.auth,requestUri:r,sessionId:a,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(E))}catch(P){this.reject(P)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(t,e,r){if(_isFirebaseServerApp(t.app))return Promise.reject(_createError(t,"operation-not-supported-in-this-environment"));const a=_castAuth(t);_assertInstanceOf(t,e,FederatedAuthProvider);const l=_withDefaultResolver(a,r);return new PopupOperation(a,"signInViaPopup",e,l).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,r,a,l,u){super(e,r,l,u),this.provider=a,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,r,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const a=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(r){e=()=>Promise.reject(r)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(t,e){const r=pendingRedirectKey(e),a=resolverPersistence(t);if(!await a._isAvailable())return!1;const l=await a._get(r)==="true";return await a._remove(r),l}function _overrideRedirectResult(t,e){redirectOutcomeMap.set(t._key(),e)}function resolverPersistence(t){return _getInstance(t._redirectPersistence)}function pendingRedirectKey(t){return _persistenceKeyName(PENDING_REDIRECT_KEY,t.config.apiKey,t.name)}async function _getRedirectResult(t,e,r=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const a=_castAuth(t),l=_withDefaultResolver(a,e),d=await new RedirectAction(a,l,r).execute();return d&&!r&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=600*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(r=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!isNullRedirectEvent(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";r.onError(_createError(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const a=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function isRedirectEvent(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(t,e={}){return _performApiRequest(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(t);for(const r of e)try{if(matchDomain(r))return}catch{}_fail(t,"unauthorized-domain")}function matchDomain(t){const e=_getCurrentUrl(),{protocol:r,hostname:a}=new URL(e);if(t.startsWith("chrome-extension://")){const d=new URL(t);return d.hostname===""&&a===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&d.hostname===a}if(!HTTP_REGEX.test(r))return!1;if(IP_ADDRESS_REGEX.test(t))return a===t;const l=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const t=_window().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function loadGapi(t){return new Promise((e,r)=>{function a(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),r(_createError(t,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(_window().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_window().gapi?.load)a();else{const l=_generateCallbackName("iframefcb");return _window()[l]=()=>{gapi.load?a():r(_createError(t,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(t){return cachedGApiLoader=cachedGApiLoader||loadGapi(t),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(t){const e=t.config;_assert(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${t.config.authDomain}/${IFRAME_PATH}`,a={apiKey:e.apiKey,appName:t.name,v:SDK_VERSION},l=EID_FROM_APIHOST.get(t.config.apiHost);l&&(a.eid=l);const u=t._getFrameworks();return u.length&&(a.fw=u.join(",")),`${r}?${querystring(a).slice(1)}`}async function _openIframe(t){const e=await _loadGapi(t),r=_window().gapi;return _assert(r,t,"internal-error"),e.open({where:document.body,url:getIframeUrl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},a=>new Promise(async(l,u)=>{await a.restyle({setHideOnLeave:!1});const d=_createError(t,"network-request-failed"),g=_window().setTimeout(()=>{u(d)},PING_TIMEOUT.get());function E(){_window().clearTimeout(g),l(a)}a.ping(E).then(E,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(t,e,r,a=DEFAULT_WIDTH,l=DEFAULT_HEIGHT){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const E={...BASE_POPUP_OPTIONS,width:a.toString(),height:l.toString(),top:u,left:d},P=getUA().toLowerCase();r&&(g=_isChromeIOS(P)?TARGET_BLANK:r),_isFirefox(P)&&(e=e||FIREFOX_EMPTY_URL,E.scrollbars="yes");const Z=Object.entries(E).reduce((_e,[He,Xe])=>`${_e}${He}=${Xe},`,"");if(_isIOSStandalone(P)&&g!=="_self")return openAsNewWindowIOS(e||"",g),new AuthPopup(null);const me=window.open(e||"",g,Z);_assert(me,t,"popup-blocked");try{me.focus()}catch{}return new AuthPopup(me)}function openAsNewWindowIOS(t,e){const r=document.createElement("a");r.href=t,r.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(t,e,r,a,l,u){_assert(t.config.authDomain,t,"auth-domain-config-required"),_assert(t.config.apiKey,t,"invalid-api-key");const d={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:a,v:SDK_VERSION,eventId:l};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(t.languageCode),d.providerId=e.providerId||"",isEmpty$1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[Z,me]of Object.entries({}))d[Z]=me}if(e instanceof BaseOAuthProvider){const Z=e.getScopes().filter(me=>me!=="");Z.length>0&&(d.scopes=Z.join(","))}t.tenantId&&(d.tid=t.tenantId);const g=d;for(const Z of Object.keys(g))g[Z]===void 0&&delete g[Z];const E=await t._getAppCheckToken(),P=E?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(E)}`:"";return`${getHandlerBase(t)}?${querystring(g).slice(1)}${P}`}function getHandlerBase({config:t}){return t.emulator?_emulatorUrl(t,EMULATOR_WIDGET_PATH):`https://${t.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,r,a,l){debugAssert(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await _getRedirectUrl(e,r,a,_getCurrentUrl(),l);return _open(e,u,_generateEventId())}async _openRedirect(e,r,a,l){await this._originValidation(e);const u=await _getRedirectUrl(e,r,a,_getCurrentUrl(),l);return _setWindowLocation(u),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:l,promise:u}=this.eventManagers[r];return l?Promise.resolve(l):(debugAssert(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(e){const r=await _openIframe(e),a=new AuthEventManager(e);return r.register("authEvent",l=>(_assert(l?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=r,a}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},l=>{const u=l?.[0]?.[WEB_STORAGE_SUPPORT_KEY];u!==void 0&&r(!!u),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=_validateOrigin(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name="@firebase/auth",version$1="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(t){_registerComponent(new Component("auth",(e,{options:r})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=a.options;_assert(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const E={apiKey:d,authDomain:g,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(t)},P=new AuthImpl(a,l,u,E);return _initializeAuthInstance(P,r),P},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,a)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const r=_castAuth(e.getProvider("auth").getImmediate());return(a=>new AuthInterop(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name,version$1,getVersionForPlatform(t)),registerVersion(name,version$1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=300,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=t=>async e=>{const r=e&&await e.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>authIdTokenMaxAge)return;const l=r?.token;lastPostedIdToken!==l&&(lastPostedIdToken=l,await fetch(t,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function getAuth(t=getApp()){const e=_getProvider(t,"auth");if(e.isInitialized())return e.getImmediate();const r=initializeAuth(t,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),a=getExperimentalSetting("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const d=mintCookieFactory(u.toString());beforeAuthStateChanged(r,d,()=>d(r.currentUser)),onIdTokenChanged(r,g=>d(g))}}const l=getDefaultEmulatorHost("auth");return l&&connectAuthEmulator(r,`http://${l}`),r}function getScriptParentElement(){return document.getElementsByTagName("head")?.[0]??document}_setExternalJSProvider({loadJS(t){return new Promise((e,r)=>{const a=document.createElement("script");a.setAttribute("src",t),a.onload=e,a.onerror=l=>{const u=_createError("internal-error");u.customData=l,r(u)},a.type="text/javascript",a.charset="UTF-8",getScriptParentElement().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");const firebaseConfig={apiKey:"AIzaSyBuJhHXA4rtD1w3cHXtvOPgnDhcWsRfrtU",authDomain:"certchamps-a7527.firebaseapp.com",databaseURL:"https://certchamps-a7527-default-rtdb.firebaseio.com",projectId:"certchamps-a7527",storageBucket:"certchamps-a7527.firebasestorage.app",messagingSenderId:"433584407503",appId:"1:433584407503:web:dabeb6a07906ae0d6ac8ba",measurementId:"G-7SKFDGYV8J"},app=initializeApp(firebaseConfig),auth=getAuth(app),db$1=getFirestore(app),storage=getStorage(app);function useAuthentication(){const{setUser:t}=reactExports.useContext(UserContext),e=getStorage(),r=useNavigate(),a=async(P,Z,me)=>{const _e=await getDownloadURL(ref(e,"crown.png"));t({uid:P,username:Z,email:me,picture:_e,friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,questionStreak:0,savedQuestions:[],decks:[]}),await setDoc(doc(db$1,"user-data",P),{uid:P,username:Z,email:me,picture:"crown.png",friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,questionStreak:0,savedQuestions:[]}),r("/questions")},l=async(P,Z,me)=>{try{const _e=await getDoc(doc(db$1,"user-data",P)),He=collection(db$1,"user-data",P,"decks"),wt=(await getDocs(He)).docs.map(Do=>({id:Do.id,...Do.data()}));if(_e.exists()){const Do=await getDownloadURL(ref(e,_e.data().picture));t({uid:_e.id,username:_e.data().username,email:_e.data().email,picture:Do,friends:_e.data().friends,pendingFriends:_e.data().pendingFriends,notifications:_e.data().notifications,rank:_e.data().rank,xp:_e.data().xp,questionStreak:_e.data().questionStreak,savedQuestions:_e.data().savedQuestions,decks:wt})}else a(P,Z,me)}catch(_e){console.log(_e)}r("/practice")},u=async()=>{const P=new GoogleAuthProvider;try{const me=(await signInWithPopup(auth,P)).user;me&&me.email&&l(me.uid,me.displayName??"newUser",me.email)}catch(Z){console.log(Z)}},d=async(P,Z,me)=>{try{const He=(await createUserWithEmailAndPassword(auth,Z,me)).user;He&&a(He.uid,P,Z)}catch(_e){console.log(_e)}},g=async(P,Z)=>{try{const _e=(await signInWithEmailAndPassword(auth,P,Z)).user;_e&&l(_e.uid,"",P)}catch(me){console.log(me)}};reactExports.useEffect(()=>{const P=onAuthStateChanged(auth,Z=>{E(Z)});return()=>P()},[]);const E=async P=>{P&&P.email&&P.uid&&(await l(P.uid,"",P.email),r("/practice"),console.log(`User Exists : ${P.uid}`))};return{loginWithGoogle:u,signUpWithEmail:d,signInWithEmail:g,userSetup:l}}function Login(){const{signInWithEmail:t,signUpWithEmail:e,loginWithGoogle:r}=useAuthentication(),[a,l]=reactExports.useState(),[u,d]=reactExports.useState(),[g,E]=reactExports.useState();return jsxRuntimeExports.jsx("div",{className:" h-full flex justify-center items-center w-full",children:jsxRuntimeExports.jsxs("div",{className:" h-11/12 w-72 shadow-small rounded-out border-3 ",children:[jsxRuntimeExports.jsx("img",{src:crown,className:"w-34 m-auto"}),jsxRuntimeExports.jsx("h1",{className:"txt-heading-colour text-center",children:"Log In"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"email",className:"txtbox mx-auto my-2 w-9/12",onChange:P=>{l(P.target.value),console.log(P.target.value)}}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"password",className:"txtbox mx-auto my-2 w-9/12",onChange:P=>{d(P.target.value)}}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"username",className:"txtbox mx-auto my-2 w-9/12",onChange:P=>{E(P.target.value)}}),jsxRuntimeExports.jsx("p",{className:"blue-btn mx-auto my-2 w-9/12 text-center",onClick:()=>{t(a??"",u??"")},children:"Login"}),jsxRuntimeExports.jsx("p",{className:"blue-btn mx-auto my-2 w-9/12 text-center",onClick:()=>{e(g??"",a??"",u??"")},children:"Sign Up"}),jsxRuntimeExports.jsx("p",{className:"red-btn mx-auto my-2 w-9/12 text-center",onClick:()=>{r()},children:"Google"})]})})}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded$2=["attr","size","title"];function _objectWithoutProperties$1(t,e){if(t==null)return{};var r=_objectWithoutPropertiesLoose$1(t,e),a,l;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(l=0;l<u.length;l++)a=u[l],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function _objectWithoutPropertiesLoose$1(t,e){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;r[a]=t[a]}return r}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},_extends$9.apply(this,arguments)}function ownKeys$1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),r.push.apply(r,a)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(r),!0).forEach(function(a){_defineProperty$3(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function _defineProperty$3(t,e,r){return e=_toPropertyKey$1(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toPropertyKey$1(t){var e=_toPrimitive$1(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$1(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tree2Element(t){return t&&t.map((e,r)=>React.createElement(e.tag,_objectSpread({key:r},e.attr),Tree2Element(e.child)))}function GenIcon(t){return e=>React.createElement(IconBase,_extends$9({attr:_objectSpread({},t.attr)},e),Tree2Element(t.child))}function IconBase(t){var e=r=>{var{attr:a,size:l,title:u}=t,d=_objectWithoutProperties$1(t,_excluded$2),g=l||r.size||"1em",E;return r.className&&(E=r.className),t.className&&(E=(E?E+" ":"")+t.className),React.createElement("svg",_extends$9({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,d,{className:E,style:_objectSpread(_objectSpread({color:t.color||r.color},r.style),t.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),u&&React.createElement("title",null,u),t.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,r=>e(r)):e(DefaultContext)}function LuArrowLeft(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 19-7-7 7-7"},child:[]},{tag:"path",attr:{d:"M19 12H5"},child:[]}]})(t)}function LuChevronRight(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m9 18 6-6-6-6"},child:[]}]})(t)}function LuFilter(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function LuGamepad2(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"6",x2:"10",y1:"11",y2:"11"},child:[]},{tag:"line",attr:{x1:"8",x2:"8",y1:"9",y2:"13"},child:[]},{tag:"line",attr:{x1:"15",x2:"15.01",y1:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",x2:"18.01",y1:"10",y2:"10"},child:[]},{tag:"path",attr:{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"},child:[]}]})(t)}function LuMessageSquareText(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]},{tag:"path",attr:{d:"M13 8H7"},child:[]},{tag:"path",attr:{d:"M17 12H7"},child:[]}]})(t)}function LuPencil(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"},child:[]},{tag:"path",attr:{d:"m15 5 4 4"},child:[]}]})(t)}function LuSearch(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"path",attr:{d:"m21 21-4.3-4.3"},child:[]}]})(t)}function LuSettings(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function LuShare2(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49"},child:[]}]})(t)}function LuTrash(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 6h18"},child:[]},{tag:"path",attr:{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"},child:[]},{tag:"path",attr:{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},child:[]}]})(t)}function LuUserPlus(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"19",x2:"19",y1:"8",y2:"14"},child:[]},{tag:"line",attr:{x1:"22",x2:"16",y1:"11",y2:"11"},child:[]}]})(t)}function LuUsers(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function LuX(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(t)}function useFetch(){const t=getStorage(),e=async u=>{try{return await getDownloadURL(ref(t,u))}catch(d){return console.log(d),null}},r=async(u,d)=>{const g=await a(u);if(!g.friends)return;const E=g.friends.map(async P=>{try{const me=(await getDoc(doc(db$1,"user-data",P))).data();if(!me)return null;const _e=await e(me.picture);return{...me,...d,picture:_e}}catch(Z){return console.log(Z),null}});return(await Promise.all(E)).filter(P=>P!==null)},a=async(u,d)=>{try{const g=(await getDoc(doc(db$1,"user-data",u))).data(),E=await e(g?.picture);return{...g,...d,picture:E}}catch(g){return console.log(g),null}};return{fetchImage:e,fetchFriends:r,fetchUser:a,fetchDecks:async u=>{try{return(await getDocs(collection(db$1,"user-data",u,"decks"))).docs.map(E=>({id:E.id,...E.data()}))}catch(d){return console.log(d),null}}}}function useQuestions(t){const{fetchImage:e}=useFetch(),r=E=>Math.floor(Math.random()*E)+1,a=E=>`CCQ${r(E).toString().padStart(8,"0")}`,l=async E=>{const P=query(collection(db$1,"certchamps-questions")),Z=await getCountFromServer(P),me=a(Z.data().count);let _e=query(collection(db$1,"certchamps-questions"),where("id","<=",me),where("id","!=",E),orderBy("id","desc"),limit(1));return(await getDocs(_e)).empty&&(_e=query(collection(db$1,"certchamps-questions"),where("id",">=",me),where("id","!=",E),orderBy("id","asc"),limit(1))),(await getDocs(_e)).docs[0].id},u=async E=>{const P=(await getDoc(doc(db$1,"certchamps-questions",E))).data(),me=(await getDocs(collection(db$1,"certchamps-questions",E,"content"))).docs.map(async He=>{const Xe=He.data();if(Xe.image){const wt=await e(Xe.image);Xe.image=wt}return console.log(Xe),Xe}),_e=await Promise.all(me);return{id:E,properties:P,content:_e}},d=async()=>{const E=await u(await l(""));t?.setQuestions(P=>[...P,E])};function g(E){return{1:"i",2:"ii",3:"iii",4:"iv",5:"v",6:"vi",7:"vii",8:"viii",9:"ix",10:"x"}[E]??null}return{getRandomQuestion:l,fetchQuestion:u,loadQuestions:d,toRoman:g}}function TbCards(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3.604 7.197l7.138 -3.109a.96 .96 0 0 1 1.27 .527l4.924 11.902a1 1 0 0 1 -.514 1.304l-7.137 3.109a.96 .96 0 0 1 -1.271 -.527l-4.924 -11.903a1 1 0 0 1 .514 -1.304z"},child:[]},{tag:"path",attr:{d:"M15 4h1a1 1 0 0 1 1 1v3.5"},child:[]},{tag:"path",attr:{d:"M20 6c.264 .112 .52 .217 .768 .315a1 1 0 0 1 .53 1.311l-2.298 5.374"},child:[]}]})(t)}var lottie$2={exports:{}},lottie$1=lottie$2.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,function(module,exports){typeof document<"u"&&typeof navigator<"u"&&function(t,e){module.exports=e()}(lottie$1,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(t){return document.createElement(t)}function extendPrototype(t,e){var r,a=t.length,l;for(r=0;r<a;r+=1){l=t[r].prototype;for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(e.prototype[u]=l[u])}}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}var audioControllerFactory=function(){function t(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(r){this.audios.push(r)},pause:function(){var r,a=this.audios.length;for(r=0;r<a;r+=1)this.audios[r].pause()},resume:function(){var r,a=this.audios.length;for(r=0;r<a;r+=1)this.audios[r].resume()},setRate:function(r){var a,l=this.audios.length;for(a=0;a<l;a+=1)this.audios[a].setRate(r)},createAudio:function(r){return this.audioFactory?this.audioFactory(r):window.Howl?new window.Howl({src:[r]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(r){this.audioFactory=r},setVolume:function(r){this._volume=r,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var r,a=this.audios.length;for(r=0;r<a;r+=1)this.audios[r].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),createTypedArray=function(){function t(r,a){var l=0,u=[],d;switch(r){case"int16":case"uint8c":d=1;break;default:d=1.1;break}for(l=0;l<a;l+=1)u.push(d);return u}function e(r,a){return r==="float32"?new Float32Array(a):r==="int16"?new Int16Array(a):r==="uint8c"?new Uint8ClampedArray(a):t(r,a)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?e:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function _typeof$6(t){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(t)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e,r=t.length;for(e=0;e<r;e+=1)BMMath[t[e]]=Math[t[e]]})(),BMMath.random=Math.random,BMMath.abs=function(t){var e=_typeof$6(t);if(e==="object"&&t.length){var r=createSizedArray(t.length),a,l=t.length;for(a=0;a<l;a+=1)r[a]=Math.abs(t[a]);return r}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,r,a){this.type=t,this.currentTime=e,this.totalTime=r,this.direction=a<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,r,a){this.type=t,this.currentLoop=r,this.totalLoops=e,this.direction=a<0?-1:1}function BMSegmentStartEvent(t,e,r){this.type=t,this.firstFrame=e,this.totalFrames=r}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}var createElementID=function(){var t=0;return function(){return t+=1,idPrefix$1+"__lottie_element_"+t}}();function HSVtoRGB(t,e,r){var a,l,u,d,g,E,P,Z;switch(d=Math.floor(t*6),g=t*6-d,E=r*(1-e),P=r*(1-g*e),Z=r*(1-(1-g)*e),d%6){case 0:a=r,l=Z,u=E;break;case 1:a=P,l=r,u=E;break;case 2:a=E,l=r,u=Z;break;case 3:a=E,l=P,u=r;break;case 4:a=Z,l=E,u=r;break;case 5:a=r,l=E,u=P;break}return[a,l,u]}function RGBtoHSV(t,e,r){var a=Math.max(t,e,r),l=Math.min(t,e,r),u=a-l,d,g=a===0?0:u/a,E=a/255;switch(a){case l:d=0;break;case t:d=e-r+u*(e<r?6:0),d/=6*u;break;case e:d=r-t+u*2,d/=6*u;break;case r:d=t-e+u*4,d/=6*u;break}return[d,g,E]}function addSaturationToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[1]+=e,r[1]>1?r[1]=1:r[1]<=0&&(r[1]=0),HSVtoRGB(r[0],r[1],r[2])}function addBrightnessToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[2]+=e,r[2]>1?r[2]=1:r[2]<0&&(r[2]=0),HSVtoRGB(r[0],r[1],r[2])}function addHueToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[0]+=e/360,r[0]>1?r[0]-=1:r[0]<0&&(r[0]+=1),HSVtoRGB(r[0],r[1],r[2])}var rgbToHex=function(){var t=[],e,r;for(e=0;e<256;e+=1)r=e.toString(16),t[e]=r.length===1?"0"+r:r;return function(a,l,u){return a<0&&(a=0),l<0&&(l=0),u<0&&(u=0),"#"+t[a]+t[l]+t[u]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e};function createNS(t){return document.createElementNS(svgNS,t)}function _typeof$5(t){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(t)}var dataManager=function(){var t=1,e=[],r,a,l={onmessage:function(){},postMessage:function(He){r({data:He})}},u={postMessage:function(He){l.onmessage({data:He})}};function d(_e){if(window.Worker&&window.Blob&&getWebWorker()){var He=new Blob(["var _workerSelf = self; self.onmessage = ",_e.toString()],{type:"text/javascript"}),Xe=URL.createObjectURL(He);return new Worker(Xe)}return r=_e,l}function g(){a||(a=d(function(He){function Xe(){function Do(n1,wh){var gf,yh,ff=n1.length,e1,s1,b1,_1;for(yh=0;yh<ff;yh+=1)if(gf=n1[yh],"ks"in gf&&!gf.completed){if(gf.completed=!0,gf.hasMask){var V1=gf.masksProperties;for(s1=V1.length,e1=0;e1<s1;e1+=1)if(V1[e1].pt.k.i)pf(V1[e1].pt.k);else for(_1=V1[e1].pt.k.length,b1=0;b1<_1;b1+=1)V1[e1].pt.k[b1].s&&pf(V1[e1].pt.k[b1].s[0]),V1[e1].pt.k[b1].e&&pf(V1[e1].pt.k[b1].e[0])}gf.ty===0?(gf.layers=Bs(gf.refId,wh),Do(gf.layers,wh)):gf.ty===4?th(gf.shapes):gf.ty===5&&qc(gf)}}function sr(n1,wh){if(n1){var gf=0,yh=n1.length;for(gf=0;gf<yh;gf+=1)n1[gf].t===1&&(n1[gf].data.layers=Bs(n1[gf].data.refId,wh),Do(n1[gf].data.layers,wh))}}function Ko(n1,wh){for(var gf=0,yh=wh.length;gf<yh;){if(wh[gf].id===n1)return wh[gf];gf+=1}return null}function Bs(n1,wh){var gf=Ko(n1,wh);return gf?gf.layers.__used?JSON.parse(JSON.stringify(gf.layers)):(gf.layers.__used=!0,gf.layers):null}function th(n1){var wh,gf=n1.length,yh,ff;for(wh=gf-1;wh>=0;wh-=1)if(n1[wh].ty==="sh")if(n1[wh].ks.k.i)pf(n1[wh].ks.k);else for(ff=n1[wh].ks.k.length,yh=0;yh<ff;yh+=1)n1[wh].ks.k[yh].s&&pf(n1[wh].ks.k[yh].s[0]),n1[wh].ks.k[yh].e&&pf(n1[wh].ks.k[yh].e[0]);else n1[wh].ty==="gr"&&th(n1[wh].it)}function pf(n1){var wh,gf=n1.i.length;for(wh=0;wh<gf;wh+=1)n1.i[wh][0]+=n1.v[wh][0],n1.i[wh][1]+=n1.v[wh][1],n1.o[wh][0]+=n1.v[wh][0],n1.o[wh][1]+=n1.v[wh][1]}function _h(n1,wh){var gf=wh?wh.split("."):[100,100,100];return n1[0]>gf[0]?!0:gf[0]>n1[0]?!1:n1[1]>gf[1]?!0:gf[1]>n1[1]?!1:n1[2]>gf[2]?!0:gf[2]>n1[2]?!1:null}var cf=function(){var n1=[4,4,14];function wh(yh){var ff=yh.t.d;yh.t.d={k:[{s:ff,t:0}]}}function gf(yh){var ff,e1=yh.length;for(ff=0;ff<e1;ff+=1)yh[ff].ty===5&&wh(yh[ff])}return function(yh){if(_h(n1,yh.v)&&(gf(yh.layers),yh.assets)){var ff,e1=yh.assets.length;for(ff=0;ff<e1;ff+=1)yh.assets[ff].layers&&gf(yh.assets[ff].layers)}}}(),df=function(){var n1=[4,7,99];return function(wh){if(wh.chars&&!_h(n1,wh.v)){var gf,yh=wh.chars.length;for(gf=0;gf<yh;gf+=1){var ff=wh.chars[gf];ff.data&&ff.data.shapes&&(th(ff.data.shapes),ff.data.ip=0,ff.data.op=99999,ff.data.st=0,ff.data.sr=1,ff.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},wh.chars[gf].t||(ff.data.shapes.push({ty:"no"}),ff.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),uf=function(){var n1=[5,7,15];function wh(yh){var ff=yh.t.p;typeof ff.a=="number"&&(ff.a={a:0,k:ff.a}),typeof ff.p=="number"&&(ff.p={a:0,k:ff.p}),typeof ff.r=="number"&&(ff.r={a:0,k:ff.r})}function gf(yh){var ff,e1=yh.length;for(ff=0;ff<e1;ff+=1)yh[ff].ty===5&&wh(yh[ff])}return function(yh){if(_h(n1,yh.v)&&(gf(yh.layers),yh.assets)){var ff,e1=yh.assets.length;for(ff=0;ff<e1;ff+=1)yh.assets[ff].layers&&gf(yh.assets[ff].layers)}}}(),li=function(){var n1=[4,1,9];function wh(yh){var ff,e1=yh.length,s1,b1;for(ff=0;ff<e1;ff+=1)if(yh[ff].ty==="gr")wh(yh[ff].it);else if(yh[ff].ty==="fl"||yh[ff].ty==="st")if(yh[ff].c.k&&yh[ff].c.k[0].i)for(b1=yh[ff].c.k.length,s1=0;s1<b1;s1+=1)yh[ff].c.k[s1].s&&(yh[ff].c.k[s1].s[0]/=255,yh[ff].c.k[s1].s[1]/=255,yh[ff].c.k[s1].s[2]/=255,yh[ff].c.k[s1].s[3]/=255),yh[ff].c.k[s1].e&&(yh[ff].c.k[s1].e[0]/=255,yh[ff].c.k[s1].e[1]/=255,yh[ff].c.k[s1].e[2]/=255,yh[ff].c.k[s1].e[3]/=255);else yh[ff].c.k[0]/=255,yh[ff].c.k[1]/=255,yh[ff].c.k[2]/=255,yh[ff].c.k[3]/=255}function gf(yh){var ff,e1=yh.length;for(ff=0;ff<e1;ff+=1)yh[ff].ty===4&&wh(yh[ff].shapes)}return function(yh){if(_h(n1,yh.v)&&(gf(yh.layers),yh.assets)){var ff,e1=yh.assets.length;for(ff=0;ff<e1;ff+=1)yh.assets[ff].layers&&gf(yh.assets[ff].layers)}}}(),Vc=function(){var n1=[4,4,18];function wh(yh){var ff,e1=yh.length,s1,b1;for(ff=e1-1;ff>=0;ff-=1)if(yh[ff].ty==="sh")if(yh[ff].ks.k.i)yh[ff].ks.k.c=yh[ff].closed;else for(b1=yh[ff].ks.k.length,s1=0;s1<b1;s1+=1)yh[ff].ks.k[s1].s&&(yh[ff].ks.k[s1].s[0].c=yh[ff].closed),yh[ff].ks.k[s1].e&&(yh[ff].ks.k[s1].e[0].c=yh[ff].closed);else yh[ff].ty==="gr"&&wh(yh[ff].it)}function gf(yh){var ff,e1,s1=yh.length,b1,_1,V1,I1;for(e1=0;e1<s1;e1+=1){if(ff=yh[e1],ff.hasMask){var i2=ff.masksProperties;for(_1=i2.length,b1=0;b1<_1;b1+=1)if(i2[b1].pt.k.i)i2[b1].pt.k.c=i2[b1].cl;else for(I1=i2[b1].pt.k.length,V1=0;V1<I1;V1+=1)i2[b1].pt.k[V1].s&&(i2[b1].pt.k[V1].s[0].c=i2[b1].cl),i2[b1].pt.k[V1].e&&(i2[b1].pt.k[V1].e[0].c=i2[b1].cl)}ff.ty===4&&wh(ff.shapes)}}return function(yh){if(_h(n1,yh.v)&&(gf(yh.layers),yh.assets)){var ff,e1=yh.assets.length;for(ff=0;ff<e1;ff+=1)yh.assets[ff].layers&&gf(yh.assets[ff].layers)}}}();function Rs(n1){n1.__complete||(li(n1),cf(n1),df(n1),uf(n1),Vc(n1),Do(n1.layers,n1.assets),sr(n1.chars,n1.assets),n1.__complete=!0)}function qc(n1){n1.t.a.length===0&&"m"in n1.t.p}var Qp={};return Qp.completeData=Rs,Qp.checkColors=li,Qp.checkChars=df,Qp.checkPathProperties=uf,Qp.checkShapes=Vc,Qp.completeLayers=Do,Qp}if(u.dataManager||(u.dataManager=Xe()),u.assetLoader||(u.assetLoader=function(){function Do(Ko){var Bs=Ko.getResponseHeader("content-type");return Bs&&Ko.responseType==="json"&&Bs.indexOf("json")!==-1||Ko.response&&_typeof$5(Ko.response)==="object"?Ko.response:Ko.response&&typeof Ko.response=="string"?JSON.parse(Ko.response):Ko.responseText?JSON.parse(Ko.responseText):null}function sr(Ko,Bs,th,pf){var _h,cf=new XMLHttpRequest;try{cf.responseType="json"}catch{}cf.onreadystatechange=function(){if(cf.readyState===4)if(cf.status===200)_h=Do(cf),th(_h);else try{_h=Do(cf),th(_h)}catch(df){pf&&pf(df)}};try{cf.open(["G","E","T"].join(""),Ko,!0)}catch{cf.open(["G","E","T"].join(""),Bs+"/"+Ko,!0)}cf.send()}return{load:sr}}()),He.data.type==="loadAnimation")u.assetLoader.load(He.data.path,He.data.fullPath,function(Do){u.dataManager.completeData(Do),u.postMessage({id:He.data.id,payload:Do,status:"success"})},function(){u.postMessage({id:He.data.id,status:"error"})});else if(He.data.type==="complete"){var wt=He.data.animation;u.dataManager.completeData(wt),u.postMessage({id:He.data.id,payload:wt,status:"success"})}else He.data.type==="loadData"&&u.assetLoader.load(He.data.path,He.data.fullPath,function(Do){u.postMessage({id:He.data.id,payload:Do,status:"success"})},function(){u.postMessage({id:He.data.id,status:"error"})})}),a.onmessage=function(_e){var He=_e.data,Xe=He.id,wt=e[Xe];e[Xe]=null,He.status==="success"?wt.onComplete(He.payload):wt.onError&&wt.onError()})}function E(_e,He){t+=1;var Xe="processId_"+t;return e[Xe]={onComplete:_e,onError:He},Xe}function P(_e,He,Xe){g();var wt=E(He,Xe);a.postMessage({type:"loadAnimation",path:_e,fullPath:window.location.origin+window.location.pathname,id:wt})}function Z(_e,He,Xe){g();var wt=E(He,Xe);a.postMessage({type:"loadData",path:_e,fullPath:window.location.origin+window.location.pathname,id:wt})}function me(_e,He,Xe){g();var wt=E(He,Xe);a.postMessage({type:"complete",animation:_e,id:wt})}return{loadAnimation:P,loadData:Z,completeAnimation:me}}(),ImagePreloader=function(){var t=function(){var sr=createTag("canvas");sr.width=1,sr.height=1;var Ko=sr.getContext("2d");return Ko.fillStyle="rgba(0,0,0,0)",Ko.fillRect(0,0,1,1),sr}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function a(sr,Ko,Bs){var th="";if(sr.e)th=sr.p;else if(Ko){var pf=sr.p;pf.indexOf("images/")!==-1&&(pf=pf.split("/")[1]),th=Ko+pf}else th=Bs,th+=sr.u?sr.u:"",th+=sr.p;return th}function l(sr){var Ko=0,Bs=setInterval((function(){var th=sr.getBBox();(th.width||Ko>500)&&(this._imageLoaded(),clearInterval(Bs)),Ko+=1}).bind(this),50)}function u(sr){var Ko=a(sr,this.assetsPath,this.path),Bs=createNS("image");isSafari?this.testImageLoaded(Bs):Bs.addEventListener("load",this._imageLoaded,!1),Bs.addEventListener("error",(function(){th.img=t,this._imageLoaded()}).bind(this),!1),Bs.setAttributeNS("http://www.w3.org/1999/xlink","href",Ko),this._elementHelper.append?this._elementHelper.append(Bs):this._elementHelper.appendChild(Bs);var th={img:Bs,assetData:sr};return th}function d(sr){var Ko=a(sr,this.assetsPath,this.path),Bs=createTag("img");Bs.crossOrigin="anonymous",Bs.addEventListener("load",this._imageLoaded,!1),Bs.addEventListener("error",(function(){th.img=t,this._imageLoaded()}).bind(this),!1),Bs.src=Ko;var th={img:Bs,assetData:sr};return th}function g(sr){var Ko={assetData:sr},Bs=a(sr,this.assetsPath,this.path);return dataManager.loadData(Bs,(function(th){Ko.img=th,this._footageLoaded()}).bind(this),(function(){Ko.img={},this._footageLoaded()}).bind(this)),Ko}function E(sr,Ko){this.imagesLoadedCb=Ko;var Bs,th=sr.length;for(Bs=0;Bs<th;Bs+=1)sr[Bs].layers||(!sr[Bs].t||sr[Bs].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(sr[Bs]))):sr[Bs].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(sr[Bs]))))}function P(sr){this.path=sr||""}function Z(sr){this.assetsPath=sr||""}function me(sr){for(var Ko=0,Bs=this.images.length;Ko<Bs;){if(this.images[Ko].assetData===sr)return this.images[Ko].img;Ko+=1}return null}function _e(){this.imagesLoadedCb=null,this.images.length=0}function He(){return this.totalImages===this.loadedAssets}function Xe(){return this.totalFootages===this.loadedFootagesCount}function wt(sr,Ko){sr==="svg"?(this._elementHelper=Ko,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Do(){this._imageLoaded=e.bind(this),this._footageLoaded=r.bind(this),this.testImageLoaded=l.bind(this),this.createFootageData=g.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Do.prototype={loadAssets:E,setAssetsPath:Z,setPath:P,loadedImages:He,loadedFootages:Xe,destroy:_e,getAsset:me,createImgData:d,createImageData:u,imageLoaded:e,footageLoaded:r,setCacheType:wt},Do}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,r){if(this._cbs[e])for(var a=this._cbs[e],l=0;l<a.length;l+=1)a[l](r)},addEventListener:function(e,r){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(r),(function(){this.removeEventListener(e,r)}).bind(this)},removeEventListener:function(e,r){if(!r)this._cbs[e]=null;else if(this._cbs[e]){for(var a=0,l=this._cbs[e].length;a<l;)this._cbs[e][a]===r&&(this._cbs[e].splice(a,1),a-=1,l-=1),a+=1;this._cbs[e].length||(this._cbs[e]=null)}}};var markerParser=function(){function t(e){for(var r=e.split(`\r
`),a={},l,u=0,d=0;d<r.length;d+=1)l=r[d].split(":"),l.length===2&&(a[l[0]]=l[1].trim(),u+=1);if(u===0)throw new Error;return a}return function(e){for(var r=[],a=0;a<e.length;a+=1){var l=e[a],u={time:l.tm,duration:l.dr};try{u.payload=JSON.parse(e[a].cm)}catch{try{u.payload=t(e[a].cm)}catch{u.payload={name:e[a].cm}}}r.push(u)}return r}}(),ProjectInterface=function(){function t(e){this.compositions.push(e)}return function(){function e(r){for(var a=0,l=this.compositions.length;a<l;){if(this.compositions[a].data&&this.compositions[a].data.nm===r)return this.compositions[a].prepareFrame&&this.compositions[a].data.xt&&this.compositions[a].prepareFrame(this.currentFrame),this.compositions[a].compInterface;a+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),renderers={},registerRenderer=function(e,r){renderers[e]=r};function getRenderer(t){return renderers[t]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var t in renderers)if(renderers[t])return t;return""}function _typeof$4(t){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(t)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";t.animType?e=t.animType:t.renderer&&(e=t.renderer);var r=getRenderer(e);this.renderer=new r(this,t.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,t.loop===""||t.loop===null||t.loop===void 0||t.loop===!0?this.loop=!0:t.loop===!1?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay="autoplay"in t?t.autoplay:!0,this.name=t.name?t.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(t,"autoloadSegments")?t.autoloadSegments:!0,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(t.path.lastIndexOf("\\")!==-1?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(t){dataManager.completeAnimation(t,this.configAnimation)},AnimationItem.prototype.setData=function(t,e){e&&_typeof$4(e)!=="object"&&(e=JSON.parse(e));var r={wrapper:t,animationData:e},a=t.attributes;r.path=a.getNamedItem("data-animation-path")?a.getNamedItem("data-animation-path").value:a.getNamedItem("data-bm-path")?a.getNamedItem("data-bm-path").value:a.getNamedItem("bm-path")?a.getNamedItem("bm-path").value:"",r.animType=a.getNamedItem("data-anim-type")?a.getNamedItem("data-anim-type").value:a.getNamedItem("data-bm-type")?a.getNamedItem("data-bm-type").value:a.getNamedItem("bm-type")?a.getNamedItem("bm-type").value:a.getNamedItem("data-bm-renderer")?a.getNamedItem("data-bm-renderer").value:a.getNamedItem("bm-renderer")?a.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var l=a.getNamedItem("data-anim-loop")?a.getNamedItem("data-anim-loop").value:a.getNamedItem("data-bm-loop")?a.getNamedItem("data-bm-loop").value:a.getNamedItem("bm-loop")?a.getNamedItem("bm-loop").value:"";l==="false"?r.loop=!1:l==="true"?r.loop=!0:l!==""&&(r.loop=parseInt(l,10));var u=a.getNamedItem("data-anim-autoplay")?a.getNamedItem("data-anim-autoplay").value:a.getNamedItem("data-bm-autoplay")?a.getNamedItem("data-bm-autoplay").value:a.getNamedItem("bm-autoplay")?a.getNamedItem("bm-autoplay").value:!0;r.autoplay=u!=="false",r.name=a.getNamedItem("data-name")?a.getNamedItem("data-name").value:a.getNamedItem("data-bm-name")?a.getNamedItem("data-bm-name").value:a.getNamedItem("bm-name")?a.getNamedItem("bm-name").value:"";var d=a.getNamedItem("data-anim-prerender")?a.getNamedItem("data-anim-prerender").value:a.getNamedItem("data-bm-prerender")?a.getNamedItem("data-bm-prerender").value:a.getNamedItem("bm-prerender")?a.getNamedItem("bm-prerender").value:"";d==="false"&&(r.prerender=!1),r.path?this.setParams(r):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e=this.animationData.layers,r,a=e.length,l=t.layers,u,d=l.length;for(u=0;u<d;u+=1)for(r=0;r<a;){if(e[r].id===l[u].id){e[r]=l[u];break}r+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(a=t.assets.length,r=0;r<a;r+=1)this.animationData.assets.push(t.assets[r]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(t){this.animationData=t;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||t.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var e=t.shift();this.timeCompleted=e.time*this.frameRate;var r=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(r,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var t=this.animationData.segments;t||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(t,e){var r=typeof t=="number"?t:void 0,a=typeof e=="number"?e:void 0;this.renderer.updateContainerSize(r,a)},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,r=0;r<this.markers.length;r+=1)if(e=this.markers[r],e.payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,r){if(!(r&&this.name!==r)){var a=Number(t);if(isNaN(a)){var l=this.getMarkerData(t);l&&this.goToAndStop(l.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,r){if(!(r&&this.name!==r)){var a=Number(t);if(isNaN(a)){var l=this.getMarkerData(t);l&&(l.duration?this.playSegments([l.time,l.time+l.duration],!0):this.goToAndStop(l.time,!0))}else this.goToAndStop(a,e,r);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!(this.isPaused===!0||this.isLoaded===!1)){var e=this.currentRawFrame+t*this.frameModifier,r=!1;e>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(r=!0,e=this.totalFrames-1):e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):e<0?this.checkSegments(e%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(r=!0,e=0)):this.setCurrentRawFrameValue(e),r&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var r=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?r=t:this.currentRawFrame+this.firstFrame>e&&(r=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,r!==-1&&this.goToAndStop(r,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),_typeof$4(t[0])==="object"){var r,a=t.length;for(r=0;r<a;r+=1)this.segments.push(t[r])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return this.segments.length?(this.adjustSegment(this.segments.shift(),t),!0):!1},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(t){this.loop=t},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var r=t.p;r.indexOf("images/")!==-1&&(r=r.split("/")[1]),e=this.assetsPath+r}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,r=this.assets.length;e<r;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(t,e,r){try{var a=this.renderer.getElementByPath(t);a.updateDocumentData(e,r)}catch{}},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(t,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}t==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),t==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),t==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),t==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),t==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var t={},e=[],r=0,a=0,l=0,u=!0,d=!1;function g(wh){for(var gf=0,yh=wh.target;gf<a;)e[gf].animation===yh&&(e.splice(gf,1),gf-=1,a-=1,yh.isPaused||me()),gf+=1}function E(wh,gf){if(!wh)return null;for(var yh=0;yh<a;){if(e[yh].elem===wh&&e[yh].elem!==null)return e[yh].animation;yh+=1}var ff=new AnimationItem;return _e(ff,wh),ff.setData(wh,gf),ff}function P(){var wh,gf=e.length,yh=[];for(wh=0;wh<gf;wh+=1)yh.push(e[wh].animation);return yh}function Z(){l+=1,li()}function me(){l-=1}function _e(wh,gf){wh.addEventListener("destroy",g),wh.addEventListener("_active",Z),wh.addEventListener("_idle",me),e.push({elem:gf,animation:wh}),a+=1}function He(wh){var gf=new AnimationItem;return _e(gf,null),gf.setParams(wh),gf}function Xe(wh,gf){var yh;for(yh=0;yh<a;yh+=1)e[yh].animation.setSpeed(wh,gf)}function wt(wh,gf){var yh;for(yh=0;yh<a;yh+=1)e[yh].animation.setDirection(wh,gf)}function Do(wh){var gf;for(gf=0;gf<a;gf+=1)e[gf].animation.play(wh)}function sr(wh){var gf=wh-r,yh;for(yh=0;yh<a;yh+=1)e[yh].animation.advanceTime(gf);r=wh,l&&!d?window.requestAnimationFrame(sr):u=!0}function Ko(wh){r=wh,window.requestAnimationFrame(sr)}function Bs(wh){var gf;for(gf=0;gf<a;gf+=1)e[gf].animation.pause(wh)}function th(wh,gf,yh){var ff;for(ff=0;ff<a;ff+=1)e[ff].animation.goToAndStop(wh,gf,yh)}function pf(wh){var gf;for(gf=0;gf<a;gf+=1)e[gf].animation.stop(wh)}function _h(wh){var gf;for(gf=0;gf<a;gf+=1)e[gf].animation.togglePause(wh)}function cf(wh){var gf;for(gf=a-1;gf>=0;gf-=1)e[gf].animation.destroy(wh)}function df(wh,gf,yh){var ff=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),e1,s1=ff.length;for(e1=0;e1<s1;e1+=1)yh&&ff[e1].setAttribute("data-bm-type",yh),E(ff[e1],wh);if(gf&&s1===0){yh||(yh="svg");var b1=document.getElementsByTagName("body")[0];b1.innerText="";var _1=createTag("div");_1.style.width="100%",_1.style.height="100%",_1.setAttribute("data-bm-type",yh),b1.appendChild(_1),E(_1,wh)}}function uf(){var wh;for(wh=0;wh<a;wh+=1)e[wh].animation.resize()}function li(){!d&&l&&u&&(window.requestAnimationFrame(Ko),u=!1)}function Vc(){d=!0}function Rs(){d=!1,li()}function qc(wh,gf){var yh;for(yh=0;yh<a;yh+=1)e[yh].animation.setVolume(wh,gf)}function Qp(wh){var gf;for(gf=0;gf<a;gf+=1)e[gf].animation.mute(wh)}function n1(wh){var gf;for(gf=0;gf<a;gf+=1)e[gf].animation.unmute(wh)}return t.registerAnimation=E,t.loadAnimation=He,t.setSpeed=Xe,t.setDirection=wt,t.play=Do,t.pause=Bs,t.stop=pf,t.togglePause=_h,t.searchAnimations=df,t.resize=uf,t.goToAndStop=th,t.destroy=cf,t.freeze=Vc,t.unfreeze=Rs,t.setVolume=qc,t.mute=Qp,t.unmute=n1,t.getRegisteredAnimations=P,t}(),BezierFactory=function(){var t={};t.getBezierEasing=r;var e={};function r(Ko,Bs,th,pf,_h){var cf=_h||("bez_"+Ko+"_"+Bs+"_"+th+"_"+pf).replace(/\./g,"p");if(e[cf])return e[cf];var df=new sr([Ko,Bs,th,pf]);return e[cf]=df,df}var a=4,l=.001,u=1e-7,d=10,g=11,E=1/(g-1),P=typeof Float32Array=="function";function Z(Ko,Bs){return 1-3*Bs+3*Ko}function me(Ko,Bs){return 3*Bs-6*Ko}function _e(Ko){return 3*Ko}function He(Ko,Bs,th){return((Z(Bs,th)*Ko+me(Bs,th))*Ko+_e(Bs))*Ko}function Xe(Ko,Bs,th){return 3*Z(Bs,th)*Ko*Ko+2*me(Bs,th)*Ko+_e(Bs)}function wt(Ko,Bs,th,pf,_h){var cf,df,uf=0;do df=Bs+(th-Bs)/2,cf=He(df,pf,_h)-Ko,cf>0?th=df:Bs=df;while(Math.abs(cf)>u&&++uf<d);return df}function Do(Ko,Bs,th,pf){for(var _h=0;_h<a;++_h){var cf=Xe(Bs,th,pf);if(cf===0)return Bs;var df=He(Bs,th,pf)-Ko;Bs-=df/cf}return Bs}function sr(Ko){this._p=Ko,this._mSampleValues=P?new Float32Array(g):new Array(g),this._precomputed=!1,this.get=this.get.bind(this)}return sr.prototype={get:function(Bs){var th=this._p[0],pf=this._p[1],_h=this._p[2],cf=this._p[3];return this._precomputed||this._precompute(),th===pf&&_h===cf?Bs:Bs===0?0:Bs===1?1:He(this._getTForX(Bs),pf,cf)},_precompute:function(){var Bs=this._p[0],th=this._p[1],pf=this._p[2],_h=this._p[3];this._precomputed=!0,(Bs!==th||pf!==_h)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Bs=this._p[0],th=this._p[2],pf=0;pf<g;++pf)this._mSampleValues[pf]=He(pf*E,Bs,th)},_getTForX:function(Bs){for(var th=this._p[0],pf=this._p[2],_h=this._mSampleValues,cf=0,df=1,uf=g-1;df!==uf&&_h[df]<=Bs;++df)cf+=E;--df;var li=(Bs-_h[df])/(_h[df+1]-_h[df]),Vc=cf+li*E,Rs=Xe(Vc,th,pf);return Rs>=l?Do(Bs,Vc,th,pf):Rs===0?Vc:wt(Bs,cf,cf+E,th,pf)}},t}(),pooling=function(){function t(e){return e.concat(createSizedArray(e.length))}return{double:t}}(),poolFactory=function(){return function(t,e,r){var a=0,l=t,u=createSizedArray(l),d={newElement:g,release:E};function g(){var P;return a?(a-=1,P=u[a]):P=e(),P}function E(P){a===l&&(u=pooling.double(u),l*=2),r&&r(P),u[a]=P,a+=1}return d}}(),bezierLengthPool=function(){function t(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,t)}(),segmentsLengthPool=function(){function t(){return{lengths:[],totalLength:0}}function e(r){var a,l=r.lengths.length;for(a=0;a<l;a+=1)bezierLengthPool.release(r.lengths[a]);r.lengths.length=0}return poolFactory(8,t,e)}();function bezFunction(){var t=Math;function e(_e,He,Xe,wt,Do,sr){var Ko=_e*wt+He*Do+Xe*sr-Do*wt-sr*_e-Xe*He;return Ko>-.001&&Ko<.001}function r(_e,He,Xe,wt,Do,sr,Ko,Bs,th){if(Xe===0&&sr===0&&th===0)return e(_e,He,wt,Do,Ko,Bs);var pf=t.sqrt(t.pow(wt-_e,2)+t.pow(Do-He,2)+t.pow(sr-Xe,2)),_h=t.sqrt(t.pow(Ko-_e,2)+t.pow(Bs-He,2)+t.pow(th-Xe,2)),cf=t.sqrt(t.pow(Ko-wt,2)+t.pow(Bs-Do,2)+t.pow(th-sr,2)),df;return pf>_h?pf>cf?df=pf-_h-cf:df=cf-_h-pf:cf>_h?df=cf-_h-pf:df=_h-pf-cf,df>-1e-4&&df<1e-4}var a=function(){return function(_e,He,Xe,wt){var Do=getDefaultCurveSegments(),sr,Ko,Bs,th,pf,_h=0,cf,df=[],uf=[],li=bezierLengthPool.newElement();for(Bs=Xe.length,sr=0;sr<Do;sr+=1){for(pf=sr/(Do-1),cf=0,Ko=0;Ko<Bs;Ko+=1)th=bmPow(1-pf,3)*_e[Ko]+3*bmPow(1-pf,2)*pf*Xe[Ko]+3*(1-pf)*bmPow(pf,2)*wt[Ko]+bmPow(pf,3)*He[Ko],df[Ko]=th,uf[Ko]!==null&&(cf+=bmPow(df[Ko]-uf[Ko],2)),uf[Ko]=df[Ko];cf&&(cf=bmSqrt(cf),_h+=cf),li.percents[sr]=pf,li.lengths[sr]=_h}return li.addedLength=_h,li}}();function l(_e){var He=segmentsLengthPool.newElement(),Xe=_e.c,wt=_e.v,Do=_e.o,sr=_e.i,Ko,Bs=_e._length,th=He.lengths,pf=0;for(Ko=0;Ko<Bs-1;Ko+=1)th[Ko]=a(wt[Ko],wt[Ko+1],Do[Ko],sr[Ko+1]),pf+=th[Ko].addedLength;return Xe&&Bs&&(th[Ko]=a(wt[Ko],wt[0],Do[Ko],sr[0]),pf+=th[Ko].addedLength),He.totalLength=pf,He}function u(_e){this.segmentLength=0,this.points=new Array(_e)}function d(_e,He){this.partialLength=_e,this.point=He}var g=function(){var _e={};return function(He,Xe,wt,Do){var sr=(He[0]+"_"+He[1]+"_"+Xe[0]+"_"+Xe[1]+"_"+wt[0]+"_"+wt[1]+"_"+Do[0]+"_"+Do[1]).replace(/\./g,"p");if(!_e[sr]){var Ko=getDefaultCurveSegments(),Bs,th,pf,_h,cf,df=0,uf,li,Vc=null;He.length===2&&(He[0]!==Xe[0]||He[1]!==Xe[1])&&e(He[0],He[1],Xe[0],Xe[1],He[0]+wt[0],He[1]+wt[1])&&e(He[0],He[1],Xe[0],Xe[1],Xe[0]+Do[0],Xe[1]+Do[1])&&(Ko=2);var Rs=new u(Ko);for(pf=wt.length,Bs=0;Bs<Ko;Bs+=1){for(li=createSizedArray(pf),cf=Bs/(Ko-1),uf=0,th=0;th<pf;th+=1)_h=bmPow(1-cf,3)*He[th]+3*bmPow(1-cf,2)*cf*(He[th]+wt[th])+3*(1-cf)*bmPow(cf,2)*(Xe[th]+Do[th])+bmPow(cf,3)*Xe[th],li[th]=_h,Vc!==null&&(uf+=bmPow(li[th]-Vc[th],2));uf=bmSqrt(uf),df+=uf,Rs.points[Bs]=new d(uf,li),Vc=li}Rs.segmentLength=df,_e[sr]=Rs}return _e[sr]}}();function E(_e,He){var Xe=He.percents,wt=He.lengths,Do=Xe.length,sr=bmFloor((Do-1)*_e),Ko=_e*He.addedLength,Bs=0;if(sr===Do-1||sr===0||Ko===wt[sr])return Xe[sr];for(var th=wt[sr]>Ko?-1:1,pf=!0;pf;)if(wt[sr]<=Ko&&wt[sr+1]>Ko?(Bs=(Ko-wt[sr])/(wt[sr+1]-wt[sr]),pf=!1):sr+=th,sr<0||sr>=Do-1){if(sr===Do-1)return Xe[sr];pf=!1}return Xe[sr]+(Xe[sr+1]-Xe[sr])*Bs}function P(_e,He,Xe,wt,Do,sr){var Ko=E(Do,sr),Bs=1-Ko,th=t.round((Bs*Bs*Bs*_e[0]+(Ko*Bs*Bs+Bs*Ko*Bs+Bs*Bs*Ko)*Xe[0]+(Ko*Ko*Bs+Bs*Ko*Ko+Ko*Bs*Ko)*wt[0]+Ko*Ko*Ko*He[0])*1e3)/1e3,pf=t.round((Bs*Bs*Bs*_e[1]+(Ko*Bs*Bs+Bs*Ko*Bs+Bs*Bs*Ko)*Xe[1]+(Ko*Ko*Bs+Bs*Ko*Ko+Ko*Bs*Ko)*wt[1]+Ko*Ko*Ko*He[1])*1e3)/1e3;return[th,pf]}var Z=createTypedArray("float32",8);function me(_e,He,Xe,wt,Do,sr,Ko){Do<0?Do=0:Do>1&&(Do=1);var Bs=E(Do,Ko);sr=sr>1?1:sr;var th=E(sr,Ko),pf,_h=_e.length,cf=1-Bs,df=1-th,uf=cf*cf*cf,li=Bs*cf*cf*3,Vc=Bs*Bs*cf*3,Rs=Bs*Bs*Bs,qc=cf*cf*df,Qp=Bs*cf*df+cf*Bs*df+cf*cf*th,n1=Bs*Bs*df+cf*Bs*th+Bs*cf*th,wh=Bs*Bs*th,gf=cf*df*df,yh=Bs*df*df+cf*th*df+cf*df*th,ff=Bs*th*df+cf*th*th+Bs*df*th,e1=Bs*th*th,s1=df*df*df,b1=th*df*df+df*th*df+df*df*th,_1=th*th*df+df*th*th+th*df*th,V1=th*th*th;for(pf=0;pf<_h;pf+=1)Z[pf*4]=t.round((uf*_e[pf]+li*Xe[pf]+Vc*wt[pf]+Rs*He[pf])*1e3)/1e3,Z[pf*4+1]=t.round((qc*_e[pf]+Qp*Xe[pf]+n1*wt[pf]+wh*He[pf])*1e3)/1e3,Z[pf*4+2]=t.round((gf*_e[pf]+yh*Xe[pf]+ff*wt[pf]+e1*He[pf])*1e3)/1e3,Z[pf*4+3]=t.round((s1*_e[pf]+b1*Xe[pf]+_1*wt[pf]+V1*He[pf])*1e3)/1e3;return Z}return{getSegmentsLength:l,getNewSegment:me,getPointInSegment:P,buildBezierData:g,pointOnLine2D:e,pointOnLine3D:r}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(t,e){var r=this.offsetTime,a;this.propType==="multidimensional"&&(a=createTypedArray("float32",this.pv.length));for(var l=e.lastIndex,u=l,d=this.keyframes.length-1,g=!0,E,P,Z;g;){if(E=this.keyframes[u],P=this.keyframes[u+1],u===d-1&&t>=P.t-r){E.h&&(E=P),l=0;break}if(P.t-r>t){l=u;break}u<d-1?u+=1:(l=0,g=!1)}Z=this.keyframesMetadata[u]||{};var me,_e,He,Xe,wt,Do,sr=P.t-r,Ko=E.t-r,Bs;if(E.to){Z.bezierData||(Z.bezierData=bez.buildBezierData(E.s,P.s||E.e,E.to,E.ti));var th=Z.bezierData;if(t>=sr||t<Ko){var pf=t>=sr?th.points.length-1:0;for(_e=th.points[pf].point.length,me=0;me<_e;me+=1)a[me]=th.points[pf].point[me]}else{Z.__fnct?Do=Z.__fnct:(Do=BezierFactory.getBezierEasing(E.o.x,E.o.y,E.i.x,E.i.y,E.n).get,Z.__fnct=Do),He=Do((t-Ko)/(sr-Ko));var _h=th.segmentLength*He,cf,df=e.lastFrame<t&&e._lastKeyframeIndex===u?e._lastAddedLength:0;for(wt=e.lastFrame<t&&e._lastKeyframeIndex===u?e._lastPoint:0,g=!0,Xe=th.points.length;g;){if(df+=th.points[wt].partialLength,_h===0||He===0||wt===th.points.length-1){for(_e=th.points[wt].point.length,me=0;me<_e;me+=1)a[me]=th.points[wt].point[me];break}else if(_h>=df&&_h<df+th.points[wt+1].partialLength){for(cf=(_h-df)/th.points[wt+1].partialLength,_e=th.points[wt].point.length,me=0;me<_e;me+=1)a[me]=th.points[wt].point[me]+(th.points[wt+1].point[me]-th.points[wt].point[me])*cf;break}wt<Xe-1?wt+=1:g=!1}e._lastPoint=wt,e._lastAddedLength=df-th.points[wt].partialLength,e._lastKeyframeIndex=u}}else{var uf,li,Vc,Rs,qc;if(d=E.s.length,Bs=P.s||E.e,this.sh&&E.h!==1)if(t>=sr)a[0]=Bs[0],a[1]=Bs[1],a[2]=Bs[2];else if(t<=Ko)a[0]=E.s[0],a[1]=E.s[1],a[2]=E.s[2];else{var Qp=createQuaternion(E.s),n1=createQuaternion(Bs),wh=(t-Ko)/(sr-Ko);quaternionToEuler(a,slerp(Qp,n1,wh))}else for(u=0;u<d;u+=1)E.h!==1&&(t>=sr?He=1:t<Ko?He=0:(E.o.x.constructor===Array?(Z.__fnct||(Z.__fnct=[]),Z.__fnct[u]?Do=Z.__fnct[u]:(uf=E.o.x[u]===void 0?E.o.x[0]:E.o.x[u],li=E.o.y[u]===void 0?E.o.y[0]:E.o.y[u],Vc=E.i.x[u]===void 0?E.i.x[0]:E.i.x[u],Rs=E.i.y[u]===void 0?E.i.y[0]:E.i.y[u],Do=BezierFactory.getBezierEasing(uf,li,Vc,Rs).get,Z.__fnct[u]=Do)):Z.__fnct?Do=Z.__fnct:(uf=E.o.x,li=E.o.y,Vc=E.i.x,Rs=E.i.y,Do=BezierFactory.getBezierEasing(uf,li,Vc,Rs).get,E.keyframeMetadata=Do),He=Do((t-Ko)/(sr-Ko)))),Bs=P.s||E.e,qc=E.h===1?E.s[u]:E.s[u]+(Bs[u]-E.s[u])*He,this.propType==="multidimensional"?a[u]=qc:a=qc}return e.lastIndex=l,a}function slerp(t,e,r){var a=[],l=t[0],u=t[1],d=t[2],g=t[3],E=e[0],P=e[1],Z=e[2],me=e[3],_e,He,Xe,wt,Do;return He=l*E+u*P+d*Z+g*me,He<0&&(He=-He,E=-E,P=-P,Z=-Z,me=-me),1-He>1e-6?(_e=Math.acos(He),Xe=Math.sin(_e),wt=Math.sin((1-r)*_e)/Xe,Do=Math.sin(r*_e)/Xe):(wt=1-r,Do=r),a[0]=wt*l+Do*E,a[1]=wt*u+Do*P,a[2]=wt*d+Do*Z,a[3]=wt*g+Do*me,a}function quaternionToEuler(t,e){var r=e[0],a=e[1],l=e[2],u=e[3],d=Math.atan2(2*a*u-2*r*l,1-2*a*a-2*l*l),g=Math.asin(2*r*a+2*l*u),E=Math.atan2(2*r*u-2*a*l,1-2*r*r-2*l*l);t[0]=d/degToRads,t[1]=g/degToRads,t[2]=E/degToRads}function createQuaternion(t){var e=t[0]*degToRads,r=t[1]*degToRads,a=t[2]*degToRads,l=Math.cos(e/2),u=Math.cos(r/2),d=Math.cos(a/2),g=Math.sin(e/2),E=Math.sin(r/2),P=Math.sin(a/2),Z=l*u*d-g*E*P,me=g*E*d+l*u*P,_e=g*u*d+l*E*P,He=l*E*d-g*u*P;return[me,_e,He,Z]}function getValueAtCurrentTime(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=r&&t>=r||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var a=this.interpolateValue(t,this._caching);this.pv=a}return this._caching.lastFrame=t,this.pv}function setVValue(t){var e;if(this.propType==="unidimensional")e=t*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var r=0,a=this.v.length;r<a;)e=t[r]*this.mult,mathAbs(this.v[r]-e)>1e-5&&(this.v[r]=e,this._mdf=!0),r+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var t,e=this.effectsSequence.length,r=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)r=this.effectsSequence[t](r);this.setVValue(r),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function ValueProperty(t,e,r,a){this.propType="unidimensional",this.mult=r||1,this.data=e,this.v=r?e.k*r:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=a,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(t,e,r,a){this.propType="multidimensional",this.mult=r||1,this.data=e,this._mdf=!1,this.elem=t,this.container=a,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var l,u=e.k.length;for(this.v=createTypedArray("float32",u),this.pv=createTypedArray("float32",u),this.vel=createTypedArray("float32",u),l=0;l<u;l+=1)this.v[l]=e.k[l]*this.mult,this.pv[l]=e.k[l];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(t,e,r,a){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=r||1,this.elem=t,this.container=a,this.comp=t.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(t,e,r,a){this.propType="multidimensional";var l,u=e.k.length,d,g,E,P;for(l=0;l<u-1;l+=1)e.k[l].to&&e.k[l].s&&e.k[l+1]&&e.k[l+1].s&&(d=e.k[l].s,g=e.k[l+1].s,E=e.k[l].to,P=e.k[l].ti,(d.length===2&&!(d[0]===g[0]&&d[1]===g[1])&&bez.pointOnLine2D(d[0],d[1],g[0],g[1],d[0]+E[0],d[1]+E[1])&&bez.pointOnLine2D(d[0],d[1],g[0],g[1],g[0]+P[0],g[1]+P[1])||d.length===3&&!(d[0]===g[0]&&d[1]===g[1]&&d[2]===g[2])&&bez.pointOnLine3D(d[0],d[1],d[2],g[0],g[1],g[2],d[0]+E[0],d[1]+E[1],d[2]+E[2])&&bez.pointOnLine3D(d[0],d[1],d[2],g[0],g[1],g[2],g[0]+P[0],g[1]+P[1],g[2]+P[2]))&&(e.k[l].to=null,e.k[l].ti=null),d[0]===g[0]&&d[1]===g[1]&&E[0]===0&&E[1]===0&&P[0]===0&&P[1]===0&&(d.length===2||d[2]===g[2]&&E[2]===0&&P[2]===0)&&(e.k[l].to=null,e.k[l].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=r||1,this.elem=t,this.container=a,this.comp=t.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Z=e.k[0].s.length;for(this.v=createTypedArray("float32",Z),this.pv=createTypedArray("float32",Z),l=0;l<Z;l+=1)this.v[l]=initFrame,this.pv[l]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Z)},this.addEffect=addEffect}var PropertyFactory=function(){function t(r,a,l,u,d){a.sid&&(a=r.globalData.slotManager.getProp(a));var g;if(!a.k.length)g=new ValueProperty(r,a,u,d);else if(typeof a.k[0]=="number")g=new MultiDimensionalProperty(r,a,u,d);else switch(l){case 0:g=new KeyframedValueProperty(r,a,u,d);break;case 1:g=new KeyframedMultidimensionalProperty(r,a,u,d);break}return g.effectsSequence.length&&d.addDynamicProperty(g),g}var e={getProp:t};return e}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var e,r=this.dynamicProperties.length;for(e=0;e<r;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function t(){return createTypedArray("float32",2)}return poolFactory(8,t)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var r=0;r<e;)this.v[r]=pointPool.newElement(),this.o[r]=pointPool.newElement(),this.i[r]=pointPool.newElement(),r+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,r,a,l){var u;switch(this._length=Math.max(this._length,a+1),this._length>=this._maxLength&&this.doubleArrayLength(),r){case"v":u=this.v;break;case"i":u=this.i;break;case"o":u=this.o;break;default:u=[];break}(!u[a]||u[a]&&!l)&&(u[a]=pointPool.newElement()),u[a][0]=t,u[a][1]=e},ShapePath.prototype.setTripleAt=function(t,e,r,a,l,u,d,g){this.setXYAt(t,e,"v",d,g),this.setXYAt(r,a,"o",d,g),this.setXYAt(l,u,"i",d,g)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,r=this.o,a=this.i,l=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],a[0][0],a[0][1],r[0][0],r[0][1],0,!1),l=1);var u=this._length-1,d=this._length,g;for(g=l;g<d;g+=1)t.setTripleAt(e[u][0],e[u][1],a[u][0],a[u][1],r[u][0],r[u][1],g,!1),u-=1;return t},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function t(){return new ShapePath}function e(l){var u=l._length,d;for(d=0;d<u;d+=1)pointPool.release(l.v[d]),pointPool.release(l.i[d]),pointPool.release(l.o[d]),l.v[d]=null,l.i[d]=null,l.o[d]=null;l._length=0,l.c=!1}function r(l){var u=a.newElement(),d,g=l._length===void 0?l.v.length:l._length;for(u.setLength(g),u.c=l.c,d=0;d<g;d+=1)u.setTripleAt(l.v[d][0],l.v[d][1],l.o[d][0],l.o[d][1],l.i[d][0],l.i[d][1],d);return u}var a=poolFactory(4,t,e);return a.clone=r,a}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0};var shapeCollectionPool=function(){var t={newShapeCollection:l,release:u},e=0,r=4,a=createSizedArray(r);function l(){var d;return e?(e-=1,d=a[e]):d=new ShapeCollection,d}function u(d){var g,E=d._length;for(g=0;g<E;g+=1)shapePool.release(d.shapes[g]);d._length=0,e===r&&(a=pooling.double(a),r*=2),a[e]=d,e+=1}return t}(),ShapePropertyFactory=function(){var t=-999999;function e(sr,Ko,Bs){var th=Bs.lastIndex,pf,_h,cf,df,uf,li,Vc,Rs,qc,Qp=this.keyframes;if(sr<Qp[0].t-this.offsetTime)pf=Qp[0].s[0],cf=!0,th=0;else if(sr>=Qp[Qp.length-1].t-this.offsetTime)pf=Qp[Qp.length-1].s?Qp[Qp.length-1].s[0]:Qp[Qp.length-2].e[0],cf=!0;else{for(var n1=th,wh=Qp.length-1,gf=!0,yh,ff,e1;gf&&(yh=Qp[n1],ff=Qp[n1+1],!(ff.t-this.offsetTime>sr));)n1<wh-1?n1+=1:gf=!1;if(e1=this.keyframesMetadata[n1]||{},cf=yh.h===1,th=n1,!cf){if(sr>=ff.t-this.offsetTime)Rs=1;else if(sr<yh.t-this.offsetTime)Rs=0;else{var s1;e1.__fnct?s1=e1.__fnct:(s1=BezierFactory.getBezierEasing(yh.o.x,yh.o.y,yh.i.x,yh.i.y).get,e1.__fnct=s1),Rs=s1((sr-(yh.t-this.offsetTime))/(ff.t-this.offsetTime-(yh.t-this.offsetTime)))}_h=ff.s?ff.s[0]:yh.e[0]}pf=yh.s[0]}for(li=Ko._length,Vc=pf.i[0].length,Bs.lastIndex=th,df=0;df<li;df+=1)for(uf=0;uf<Vc;uf+=1)qc=cf?pf.i[df][uf]:pf.i[df][uf]+(_h.i[df][uf]-pf.i[df][uf])*Rs,Ko.i[df][uf]=qc,qc=cf?pf.o[df][uf]:pf.o[df][uf]+(_h.o[df][uf]-pf.o[df][uf])*Rs,Ko.o[df][uf]=qc,qc=cf?pf.v[df][uf]:pf.v[df][uf]+(_h.v[df][uf]-pf.v[df][uf])*Rs,Ko.v[df][uf]=qc}function r(){var sr=this.comp.renderedFrame-this.offsetTime,Ko=this.keyframes[0].t-this.offsetTime,Bs=this.keyframes[this.keyframes.length-1].t-this.offsetTime,th=this._caching.lastFrame;return th!==t&&(th<Ko&&sr<Ko||th>Bs&&sr>Bs)||(this._caching.lastIndex=th<sr?this._caching.lastIndex:0,this.interpolateShape(sr,this.pv,this._caching)),this._caching.lastFrame=sr,this.pv}function a(){this.paths=this.localShapeCollection}function l(sr,Ko){if(sr._length!==Ko._length||sr.c!==Ko.c)return!1;var Bs,th=sr._length;for(Bs=0;Bs<th;Bs+=1)if(sr.v[Bs][0]!==Ko.v[Bs][0]||sr.v[Bs][1]!==Ko.v[Bs][1]||sr.o[Bs][0]!==Ko.o[Bs][0]||sr.o[Bs][1]!==Ko.o[Bs][1]||sr.i[Bs][0]!==Ko.i[Bs][0]||sr.i[Bs][1]!==Ko.i[Bs][1])return!1;return!0}function u(sr){l(this.v,sr)||(this.v=shapePool.clone(sr),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function d(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var sr;this.kf?sr=this.pv:this.data.ks?sr=this.data.ks.k:sr=this.data.pt.k;var Ko,Bs=this.effectsSequence.length;for(Ko=0;Ko<Bs;Ko+=1)sr=this.effectsSequence[Ko](sr);this.setVValue(sr),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function g(sr,Ko,Bs){this.propType="shape",this.comp=sr.comp,this.container=sr,this.elem=sr,this.data=Ko,this.k=!1,this.kf=!1,this._mdf=!1;var th=Bs===3?Ko.pt.k:Ko.ks.k;this.v=shapePool.clone(th),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=a,this.effectsSequence=[]}function E(sr){this.effectsSequence.push(sr),this.container.addDynamicProperty(this)}g.prototype.interpolateShape=e,g.prototype.getValue=d,g.prototype.setVValue=u,g.prototype.addEffect=E;function P(sr,Ko,Bs){this.propType="shape",this.comp=sr.comp,this.elem=sr,this.container=sr,this.offsetTime=sr.data.st,this.keyframes=Bs===3?Ko.pt.k:Ko.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var th=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,th),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=a,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[r.bind(this)]}P.prototype.getValue=d,P.prototype.interpolateShape=e,P.prototype.setVValue=u,P.prototype.addEffect=E;var Z=function(){var sr=roundCorner;function Ko(Bs,th){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=th.d,this.elem=Bs,this.comp=Bs.comp,this.frameId=-1,this.initDynamicPropertyContainer(Bs),this.p=PropertyFactory.getProp(Bs,th.p,1,0,this),this.s=PropertyFactory.getProp(Bs,th.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Ko.prototype={reset:a,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var th=this.p.v[0],pf=this.p.v[1],_h=this.s.v[0]/2,cf=this.s.v[1]/2,df=this.d!==3,uf=this.v;uf.v[0][0]=th,uf.v[0][1]=pf-cf,uf.v[1][0]=df?th+_h:th-_h,uf.v[1][1]=pf,uf.v[2][0]=th,uf.v[2][1]=pf+cf,uf.v[3][0]=df?th-_h:th+_h,uf.v[3][1]=pf,uf.i[0][0]=df?th-_h*sr:th+_h*sr,uf.i[0][1]=pf-cf,uf.i[1][0]=df?th+_h:th-_h,uf.i[1][1]=pf-cf*sr,uf.i[2][0]=df?th+_h*sr:th-_h*sr,uf.i[2][1]=pf+cf,uf.i[3][0]=df?th-_h:th+_h,uf.i[3][1]=pf+cf*sr,uf.o[0][0]=df?th+_h*sr:th-_h*sr,uf.o[0][1]=pf-cf,uf.o[1][0]=df?th+_h:th-_h,uf.o[1][1]=pf+cf*sr,uf.o[2][0]=df?th-_h*sr:th+_h*sr,uf.o[2][1]=pf+cf,uf.o[3][0]=df?th-_h:th+_h,uf.o[3][1]=pf-cf*sr}},extendPrototype([DynamicPropertyContainer],Ko),Ko}(),me=function(){function sr(Ko,Bs){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Ko,this.comp=Ko.comp,this.data=Bs,this.frameId=-1,this.d=Bs.d,this.initDynamicPropertyContainer(Ko),Bs.sy===1?(this.ir=PropertyFactory.getProp(Ko,Bs.ir,0,0,this),this.is=PropertyFactory.getProp(Ko,Bs.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Ko,Bs.pt,0,0,this),this.p=PropertyFactory.getProp(Ko,Bs.p,1,0,this),this.r=PropertyFactory.getProp(Ko,Bs.r,0,degToRads,this),this.or=PropertyFactory.getProp(Ko,Bs.or,0,0,this),this.os=PropertyFactory.getProp(Ko,Bs.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return sr.prototype={reset:a,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Bs=Math.floor(this.pt.v)*2,th=Math.PI*2/Bs,pf=!0,_h=this.or.v,cf=this.ir.v,df=this.os.v,uf=this.is.v,li=2*Math.PI*_h/(Bs*2),Vc=2*Math.PI*cf/(Bs*2),Rs,qc,Qp,n1,wh=-Math.PI/2;wh+=this.r.v;var gf=this.data.d===3?-1:1;for(this.v._length=0,Rs=0;Rs<Bs;Rs+=1){qc=pf?_h:cf,Qp=pf?df:uf,n1=pf?li:Vc;var yh=qc*Math.cos(wh),ff=qc*Math.sin(wh),e1=yh===0&&ff===0?0:ff/Math.sqrt(yh*yh+ff*ff),s1=yh===0&&ff===0?0:-yh/Math.sqrt(yh*yh+ff*ff);yh+=+this.p.v[0],ff+=+this.p.v[1],this.v.setTripleAt(yh,ff,yh-e1*n1*Qp*gf,ff-s1*n1*Qp*gf,yh+e1*n1*Qp*gf,ff+s1*n1*Qp*gf,Rs,!0),pf=!pf,wh+=th*gf}},convertPolygonToPath:function(){var Bs=Math.floor(this.pt.v),th=Math.PI*2/Bs,pf=this.or.v,_h=this.os.v,cf=2*Math.PI*pf/(Bs*4),df,uf=-Math.PI*.5,li=this.data.d===3?-1:1;for(uf+=this.r.v,this.v._length=0,df=0;df<Bs;df+=1){var Vc=pf*Math.cos(uf),Rs=pf*Math.sin(uf),qc=Vc===0&&Rs===0?0:Rs/Math.sqrt(Vc*Vc+Rs*Rs),Qp=Vc===0&&Rs===0?0:-Vc/Math.sqrt(Vc*Vc+Rs*Rs);Vc+=+this.p.v[0],Rs+=+this.p.v[1],this.v.setTripleAt(Vc,Rs,Vc-qc*cf*_h*li,Rs-Qp*cf*_h*li,Vc+qc*cf*_h*li,Rs+Qp*cf*_h*li,df,!0),uf+=th*li}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],sr),sr}(),_e=function(){function sr(Ko,Bs){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Ko,this.comp=Ko.comp,this.frameId=-1,this.d=Bs.d,this.initDynamicPropertyContainer(Ko),this.p=PropertyFactory.getProp(Ko,Bs.p,1,0,this),this.s=PropertyFactory.getProp(Ko,Bs.s,1,0,this),this.r=PropertyFactory.getProp(Ko,Bs.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return sr.prototype={convertRectToPath:function(){var Bs=this.p.v[0],th=this.p.v[1],pf=this.s.v[0]/2,_h=this.s.v[1]/2,cf=bmMin(pf,_h,this.r.v),df=cf*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Bs+pf,th-_h+cf,Bs+pf,th-_h+cf,Bs+pf,th-_h+df,0,!0),this.v.setTripleAt(Bs+pf,th+_h-cf,Bs+pf,th+_h-df,Bs+pf,th+_h-cf,1,!0),cf!==0?(this.v.setTripleAt(Bs+pf-cf,th+_h,Bs+pf-cf,th+_h,Bs+pf-df,th+_h,2,!0),this.v.setTripleAt(Bs-pf+cf,th+_h,Bs-pf+df,th+_h,Bs-pf+cf,th+_h,3,!0),this.v.setTripleAt(Bs-pf,th+_h-cf,Bs-pf,th+_h-cf,Bs-pf,th+_h-df,4,!0),this.v.setTripleAt(Bs-pf,th-_h+cf,Bs-pf,th-_h+df,Bs-pf,th-_h+cf,5,!0),this.v.setTripleAt(Bs-pf+cf,th-_h,Bs-pf+cf,th-_h,Bs-pf+df,th-_h,6,!0),this.v.setTripleAt(Bs+pf-cf,th-_h,Bs+pf-df,th-_h,Bs+pf-cf,th-_h,7,!0)):(this.v.setTripleAt(Bs-pf,th+_h,Bs-pf+df,th+_h,Bs-pf,th+_h,2),this.v.setTripleAt(Bs-pf,th-_h,Bs-pf,th-_h+df,Bs-pf,th-_h,3))):(this.v.setTripleAt(Bs+pf,th-_h+cf,Bs+pf,th-_h+df,Bs+pf,th-_h+cf,0,!0),cf!==0?(this.v.setTripleAt(Bs+pf-cf,th-_h,Bs+pf-cf,th-_h,Bs+pf-df,th-_h,1,!0),this.v.setTripleAt(Bs-pf+cf,th-_h,Bs-pf+df,th-_h,Bs-pf+cf,th-_h,2,!0),this.v.setTripleAt(Bs-pf,th-_h+cf,Bs-pf,th-_h+cf,Bs-pf,th-_h+df,3,!0),this.v.setTripleAt(Bs-pf,th+_h-cf,Bs-pf,th+_h-df,Bs-pf,th+_h-cf,4,!0),this.v.setTripleAt(Bs-pf+cf,th+_h,Bs-pf+cf,th+_h,Bs-pf+df,th+_h,5,!0),this.v.setTripleAt(Bs+pf-cf,th+_h,Bs+pf-df,th+_h,Bs+pf-cf,th+_h,6,!0),this.v.setTripleAt(Bs+pf,th+_h-cf,Bs+pf,th+_h-cf,Bs+pf,th+_h-df,7,!0)):(this.v.setTripleAt(Bs-pf,th-_h,Bs-pf+df,th-_h,Bs-pf,th-_h,1,!0),this.v.setTripleAt(Bs-pf,th+_h,Bs-pf,th+_h-df,Bs-pf,th+_h,2,!0),this.v.setTripleAt(Bs+pf,th+_h,Bs+pf-df,th+_h,Bs+pf,th+_h,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:a},extendPrototype([DynamicPropertyContainer],sr),sr}();function He(sr,Ko,Bs){var th;if(Bs===3||Bs===4){var pf=Bs===3?Ko.pt:Ko.ks,_h=pf.k;_h.length?th=new P(sr,Ko,Bs):th=new g(sr,Ko,Bs)}else Bs===5?th=new _e(sr,Ko):Bs===6?th=new Z(sr,Ko):Bs===7&&(th=new me(sr,Ko));return th.k&&sr.addDynamicProperty(th),th}function Xe(){return g}function wt(){return P}var Do={};return Do.getShapeProp=He,Do.getConstructorFunction=Xe,Do.getKeyframedConstructorFunction=wt,Do}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var t=Math.cos,e=Math.sin,r=Math.tan,a=Math.round;function l(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function u(yh){if(yh===0)return this;var ff=t(yh),e1=e(yh);return this._t(ff,-e1,0,0,e1,ff,0,0,0,0,1,0,0,0,0,1)}function d(yh){if(yh===0)return this;var ff=t(yh),e1=e(yh);return this._t(1,0,0,0,0,ff,-e1,0,0,e1,ff,0,0,0,0,1)}function g(yh){if(yh===0)return this;var ff=t(yh),e1=e(yh);return this._t(ff,0,e1,0,0,1,0,0,-e1,0,ff,0,0,0,0,1)}function E(yh){if(yh===0)return this;var ff=t(yh),e1=e(yh);return this._t(ff,-e1,0,0,e1,ff,0,0,0,0,1,0,0,0,0,1)}function P(yh,ff){return this._t(1,ff,yh,1,0,0)}function Z(yh,ff){return this.shear(r(yh),r(ff))}function me(yh,ff){var e1=t(ff),s1=e(ff);return this._t(e1,s1,0,0,-s1,e1,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,r(yh),1,0,0,0,0,1,0,0,0,0,1)._t(e1,-s1,0,0,s1,e1,0,0,0,0,1,0,0,0,0,1)}function _e(yh,ff,e1){return!e1&&e1!==0&&(e1=1),yh===1&&ff===1&&e1===1?this:this._t(yh,0,0,0,0,ff,0,0,0,0,e1,0,0,0,0,1)}function He(yh,ff,e1,s1,b1,_1,V1,I1,i2,R2,F2,X1,W2,N2,V2,q2){return this.props[0]=yh,this.props[1]=ff,this.props[2]=e1,this.props[3]=s1,this.props[4]=b1,this.props[5]=_1,this.props[6]=V1,this.props[7]=I1,this.props[8]=i2,this.props[9]=R2,this.props[10]=F2,this.props[11]=X1,this.props[12]=W2,this.props[13]=N2,this.props[14]=V2,this.props[15]=q2,this}function Xe(yh,ff,e1){return e1=e1||0,yh!==0||ff!==0||e1!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,yh,ff,e1,1):this}function wt(yh,ff,e1,s1,b1,_1,V1,I1,i2,R2,F2,X1,W2,N2,V2,q2){var B2=this.props;if(yh===1&&ff===0&&e1===0&&s1===0&&b1===0&&_1===1&&V1===0&&I1===0&&i2===0&&R2===0&&F2===1&&X1===0)return B2[12]=B2[12]*yh+B2[15]*W2,B2[13]=B2[13]*_1+B2[15]*N2,B2[14]=B2[14]*F2+B2[15]*V2,B2[15]*=q2,this._identityCalculated=!1,this;var K2=B2[0],S2=B2[1],E1=B2[2],F1=B2[3],K1=B2[4],N1=B2[5],J1=B2[6],E2=B2[7],n2=B2[8],D1=B2[9],i1=B2[10],g1=B2[11],u1=B2[12],L1=B2[13],B1=B2[14],Q1=B2[15];return B2[0]=K2*yh+S2*b1+E1*i2+F1*W2,B2[1]=K2*ff+S2*_1+E1*R2+F1*N2,B2[2]=K2*e1+S2*V1+E1*F2+F1*V2,B2[3]=K2*s1+S2*I1+E1*X1+F1*q2,B2[4]=K1*yh+N1*b1+J1*i2+E2*W2,B2[5]=K1*ff+N1*_1+J1*R2+E2*N2,B2[6]=K1*e1+N1*V1+J1*F2+E2*V2,B2[7]=K1*s1+N1*I1+J1*X1+E2*q2,B2[8]=n2*yh+D1*b1+i1*i2+g1*W2,B2[9]=n2*ff+D1*_1+i1*R2+g1*N2,B2[10]=n2*e1+D1*V1+i1*F2+g1*V2,B2[11]=n2*s1+D1*I1+i1*X1+g1*q2,B2[12]=u1*yh+L1*b1+B1*i2+Q1*W2,B2[13]=u1*ff+L1*_1+B1*R2+Q1*N2,B2[14]=u1*e1+L1*V1+B1*F2+Q1*V2,B2[15]=u1*s1+L1*I1+B1*X1+Q1*q2,this._identityCalculated=!1,this}function Do(yh){var ff=yh.props;return this.transform(ff[0],ff[1],ff[2],ff[3],ff[4],ff[5],ff[6],ff[7],ff[8],ff[9],ff[10],ff[11],ff[12],ff[13],ff[14],ff[15])}function sr(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Ko(yh){for(var ff=0;ff<16;){if(yh.props[ff]!==this.props[ff])return!1;ff+=1}return!0}function Bs(yh){var ff;for(ff=0;ff<16;ff+=1)yh.props[ff]=this.props[ff];return yh}function th(yh){var ff;for(ff=0;ff<16;ff+=1)this.props[ff]=yh[ff]}function pf(yh,ff,e1){return{x:yh*this.props[0]+ff*this.props[4]+e1*this.props[8]+this.props[12],y:yh*this.props[1]+ff*this.props[5]+e1*this.props[9]+this.props[13],z:yh*this.props[2]+ff*this.props[6]+e1*this.props[10]+this.props[14]}}function _h(yh,ff,e1){return yh*this.props[0]+ff*this.props[4]+e1*this.props[8]+this.props[12]}function cf(yh,ff,e1){return yh*this.props[1]+ff*this.props[5]+e1*this.props[9]+this.props[13]}function df(yh,ff,e1){return yh*this.props[2]+ff*this.props[6]+e1*this.props[10]+this.props[14]}function uf(){var yh=this.props[0]*this.props[5]-this.props[1]*this.props[4],ff=this.props[5]/yh,e1=-this.props[1]/yh,s1=-this.props[4]/yh,b1=this.props[0]/yh,_1=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/yh,V1=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/yh,I1=new Matrix;return I1.props[0]=ff,I1.props[1]=e1,I1.props[4]=s1,I1.props[5]=b1,I1.props[12]=_1,I1.props[13]=V1,I1}function li(yh){var ff=this.getInverseMatrix();return ff.applyToPointArray(yh[0],yh[1],yh[2]||0)}function Vc(yh){var ff,e1=yh.length,s1=[];for(ff=0;ff<e1;ff+=1)s1[ff]=li(yh[ff]);return s1}function Rs(yh,ff,e1){var s1=createTypedArray("float32",6);if(this.isIdentity())s1[0]=yh[0],s1[1]=yh[1],s1[2]=ff[0],s1[3]=ff[1],s1[4]=e1[0],s1[5]=e1[1];else{var b1=this.props[0],_1=this.props[1],V1=this.props[4],I1=this.props[5],i2=this.props[12],R2=this.props[13];s1[0]=yh[0]*b1+yh[1]*V1+i2,s1[1]=yh[0]*_1+yh[1]*I1+R2,s1[2]=ff[0]*b1+ff[1]*V1+i2,s1[3]=ff[0]*_1+ff[1]*I1+R2,s1[4]=e1[0]*b1+e1[1]*V1+i2,s1[5]=e1[0]*_1+e1[1]*I1+R2}return s1}function qc(yh,ff,e1){var s1;return this.isIdentity()?s1=[yh,ff,e1]:s1=[yh*this.props[0]+ff*this.props[4]+e1*this.props[8]+this.props[12],yh*this.props[1]+ff*this.props[5]+e1*this.props[9]+this.props[13],yh*this.props[2]+ff*this.props[6]+e1*this.props[10]+this.props[14]],s1}function Qp(yh,ff){if(this.isIdentity())return yh+","+ff;var e1=this.props;return Math.round((yh*e1[0]+ff*e1[4]+e1[12])*100)/100+","+Math.round((yh*e1[1]+ff*e1[5]+e1[13])*100)/100}function n1(){for(var yh=0,ff=this.props,e1="matrix3d(",s1=1e4;yh<16;)e1+=a(ff[yh]*s1)/s1,e1+=yh===15?")":",",yh+=1;return e1}function wh(yh){var ff=1e4;return yh<1e-6&&yh>0||yh>-1e-6&&yh<0?a(yh*ff)/ff:yh}function gf(){var yh=this.props,ff=wh(yh[0]),e1=wh(yh[1]),s1=wh(yh[4]),b1=wh(yh[5]),_1=wh(yh[12]),V1=wh(yh[13]);return"matrix("+ff+","+e1+","+s1+","+b1+","+_1+","+V1+")"}return function(){this.reset=l,this.rotate=u,this.rotateX=d,this.rotateY=g,this.rotateZ=E,this.skew=Z,this.skewFromAxis=me,this.shear=P,this.scale=_e,this.setTransform=He,this.translate=Xe,this.transform=wt,this.multiply=Do,this.applyToPoint=pf,this.applyToX=_h,this.applyToY=cf,this.applyToZ=df,this.applyToPointArray=qc,this.applyToTriplePoints=Rs,this.applyToPointStringified=Qp,this.toCSS=n1,this.to2dCSS=gf,this.clone=Bs,this.cloneFromProps=th,this.equals=Ko,this.inversePoints=Vc,this.inversePoint=li,this.getInverseMatrix=uf,this._t=this.transform,this.isIdentity=sr,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(t){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(t)}var lottie={};function setLocation(t){setLocationHref(t)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(t){setSubframeEnabled(t)}function setPrefix(t){setIdPrefix(t)}function loadAnimation(t){return animationManager.loadAnimation(t)}function setQuality(t){if(typeof t=="string")switch(t){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(t)&&t>1&&setDefaultCurveSegments(t)}function inBrowser(){return typeof navigator<"u"}function installPlugin(t,e){t==="expressions"&&setExpressionsPlugin(e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),r=0;r<e.length;r+=1){var a=e[r].split("=");if(decodeURIComponent(a[0])==t)return decodeURIComponent(a[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(t){}var ShapeModifiers=function(){var t={},e={};t.registerModifier=r,t.getModifier=a;function r(l,u){e[l]||(e[l]=u)}function a(l,u,d){return new e[l](u,d)}return t}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,r,a,l){var u=[];e<=1?u.push({s:t,e}):t>=1?u.push({s:t-1,e:e-1}):(u.push({s:t,e:1}),u.push({s:0,e:e-1}));var d=[],g,E=u.length,P;for(g=0;g<E;g+=1)if(P=u[g],!(P.e*l<a||P.s*l>a+r)){var Z,me;P.s*l<=a?Z=0:Z=(P.s*l-a)/r,P.e*l>=a+r?me=1:me=(P.e*l-a)/r,d.push([Z,me])}return d.length||d.push([0,0]),d},TrimModifier.prototype.releasePathsData=function(t){var e,r=t.length;for(e=0;e<r;e+=1)segmentsLengthPool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,r;if(this._mdf||t){var a=this.o.v%360/360;if(a<0&&(a+=1),this.s.v>1?e=1+a:this.s.v<0?e=0+a:e=this.s.v+a,this.e.v>1?r=1+a:this.e.v<0?r=0+a:r=this.e.v+a,e>r){var l=e;e=r,r=l}e=Math.round(e*1e4)*1e-4,r=Math.round(r*1e4)*1e-4,this.sValue=e,this.eValue=r}else e=this.sValue,r=this.eValue;var u,d,g=this.shapes.length,E,P,Z,me,_e,He=0;if(r===e)for(d=0;d<g;d+=1)this.shapes[d].localShapeCollection.releaseShapes(),this.shapes[d].shape._mdf=!0,this.shapes[d].shape.paths=this.shapes[d].localShapeCollection,this._mdf&&(this.shapes[d].pathsData.length=0);else if(r===1&&e===0||r===0&&e===1){if(this._mdf)for(d=0;d<g;d+=1)this.shapes[d].pathsData.length=0,this.shapes[d].shape._mdf=!0}else{var Xe=[],wt,Do;for(d=0;d<g;d+=1)if(wt=this.shapes[d],!wt.shape._mdf&&!this._mdf&&!t&&this.m!==2)wt.shape.paths=wt.localShapeCollection;else{if(u=wt.shape.paths,P=u._length,_e=0,!wt.shape._mdf&&wt.pathsData.length)_e=wt.totalShapeLength;else{for(Z=this.releasePathsData(wt.pathsData),E=0;E<P;E+=1)me=bez.getSegmentsLength(u.shapes[E]),Z.push(me),_e+=me.totalLength;wt.totalShapeLength=_e,wt.pathsData=Z}He+=_e,wt.shape._mdf=!0}var sr=e,Ko=r,Bs=0,th;for(d=g-1;d>=0;d-=1)if(wt=this.shapes[d],wt.shape._mdf){for(Do=wt.localShapeCollection,Do.releaseShapes(),this.m===2&&g>1?(th=this.calculateShapeEdges(e,r,wt.totalShapeLength,Bs,He),Bs+=wt.totalShapeLength):th=[[sr,Ko]],P=th.length,E=0;E<P;E+=1){sr=th[E][0],Ko=th[E][1],Xe.length=0,Ko<=1?Xe.push({s:wt.totalShapeLength*sr,e:wt.totalShapeLength*Ko}):sr>=1?Xe.push({s:wt.totalShapeLength*(sr-1),e:wt.totalShapeLength*(Ko-1)}):(Xe.push({s:wt.totalShapeLength*sr,e:wt.totalShapeLength}),Xe.push({s:0,e:wt.totalShapeLength*(Ko-1)}));var pf=this.addShapes(wt,Xe[0]);if(Xe[0].s!==Xe[0].e){if(Xe.length>1){var _h=wt.shape.paths.shapes[wt.shape.paths._length-1];if(_h.c){var cf=pf.pop();this.addPaths(pf,Do),pf=this.addShapes(wt,Xe[1],cf)}else this.addPaths(pf,Do),pf=this.addShapes(wt,Xe[1])}this.addPaths(pf,Do)}}wt.shape.paths=Do}}},TrimModifier.prototype.addPaths=function(t,e){var r,a=t.length;for(r=0;r<a;r+=1)e.addShape(t[r])},TrimModifier.prototype.addSegment=function(t,e,r,a,l,u,d){l.setXYAt(e[0],e[1],"o",u),l.setXYAt(r[0],r[1],"i",u+1),d&&l.setXYAt(t[0],t[1],"v",u),l.setXYAt(a[0],a[1],"v",u+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,r,a){e.setXYAt(t[1],t[5],"o",r),e.setXYAt(t[2],t[6],"i",r+1),a&&e.setXYAt(t[0],t[4],"v",r),e.setXYAt(t[3],t[7],"v",r+1)},TrimModifier.prototype.addShapes=function(t,e,r){var a=t.pathsData,l=t.shape.paths.shapes,u,d=t.shape.paths._length,g,E,P=0,Z,me,_e,He,Xe=[],wt,Do=!0;for(r?(me=r._length,wt=r._length):(r=shapePool.newElement(),me=0,wt=0),Xe.push(r),u=0;u<d;u+=1){for(_e=a[u].lengths,r.c=l[u].c,E=l[u].c?_e.length:_e.length+1,g=1;g<E;g+=1)if(Z=_e[g-1],P+Z.addedLength<e.s)P+=Z.addedLength,r.c=!1;else if(P>e.e){r.c=!1;break}else e.s<=P&&e.e>=P+Z.addedLength?(this.addSegment(l[u].v[g-1],l[u].o[g-1],l[u].i[g],l[u].v[g],r,me,Do),Do=!1):(He=bez.getNewSegment(l[u].v[g-1],l[u].v[g],l[u].o[g-1],l[u].i[g],(e.s-P)/Z.addedLength,(e.e-P)/Z.addedLength,_e[g-1]),this.addSegmentFromArray(He,r,me,Do),Do=!1,r.c=!1),P+=Z.addedLength,me+=1;if(l[u].c&&_e.length){if(Z=_e[g-1],P<=e.e){var sr=_e[g-1].addedLength;e.s<=P&&e.e>=P+sr?(this.addSegment(l[u].v[g-1],l[u].o[g-1],l[u].i[0],l[u].v[0],r,me,Do),Do=!1):(He=bez.getNewSegment(l[u].v[g-1],l[u].v[0],l[u].o[g-1],l[u].i[0],(e.s-P)/sr,(e.e-P)/sr,_e[g-1]),this.addSegmentFromArray(He,r,me,Do),Do=!1,r.c=!1)}else r.c=!1;P+=Z.addedLength,me+=1}if(r._length&&(r.setXYAt(r.v[wt][0],r.v[wt][1],"i",wt),r.setXYAt(r.v[r._length-1][0],r.v[r._length-1][1],"o",r._length-1)),P>e.e)break;u<d-1&&(r=shapePool.newElement(),Do=!0,Xe.push(r),me=0)}return Xe};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var r=e/100,a=[0,0],l=t._length,u=0;for(u=0;u<l;u+=1)a[0]+=t.v[u][0],a[1]+=t.v[u][1];a[0]/=l,a[1]/=l;var d=shapePool.newElement();d.c=t.c;var g,E,P,Z,me,_e;for(u=0;u<l;u+=1)g=t.v[u][0]+(a[0]-t.v[u][0])*r,E=t.v[u][1]+(a[1]-t.v[u][1])*r,P=t.o[u][0]+(a[0]-t.o[u][0])*-r,Z=t.o[u][1]+(a[1]-t.o[u][1])*-r,me=t.i[u][0]+(a[0]-t.i[u][0])*-r,_e=t.i[u][1]+(a[1]-t.i[u][1])*-r,d.setTripleAt(g,E,P,Z,me,_e,u);return d},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,r,a=this.shapes.length,l,u,d=this.amount.v;if(d!==0){var g,E;for(r=0;r<a;r+=1){if(g=this.shapes[r],E=g.localShapeCollection,!(!g.shape._mdf&&!this._mdf&&!t))for(E.releaseShapes(),g.shape._mdf=!0,e=g.shape.paths.shapes,u=g.shape.paths._length,l=0;l<u;l+=1)E.addShape(this.processPath(e[l],d));g.shape.paths=g.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var t=[0,0];function e(E){var P=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||P,this.a&&E.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&E.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&E.skewFromAxis(-this.sk.v,this.sa.v),this.r?E.rotate(-this.r.v):E.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?E.translate(this.px.v,this.py.v,-this.pz.v):E.translate(this.px.v,this.py.v,0):E.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function r(E){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||E){var P;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Z,me;if(P=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Z=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/P,0),me=this.p.getValueAtTime(this.p.keyframes[0].t/P,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Z=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/P,0),me=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/P,0)):(Z=this.p.pv,me=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/P,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Z=[],me=[];var _e=this.px,He=this.py;_e._caching.lastFrame+_e.offsetTime<=_e.keyframes[0].t?(Z[0]=_e.getValueAtTime((_e.keyframes[0].t+.01)/P,0),Z[1]=He.getValueAtTime((He.keyframes[0].t+.01)/P,0),me[0]=_e.getValueAtTime(_e.keyframes[0].t/P,0),me[1]=He.getValueAtTime(He.keyframes[0].t/P,0)):_e._caching.lastFrame+_e.offsetTime>=_e.keyframes[_e.keyframes.length-1].t?(Z[0]=_e.getValueAtTime(_e.keyframes[_e.keyframes.length-1].t/P,0),Z[1]=He.getValueAtTime(He.keyframes[He.keyframes.length-1].t/P,0),me[0]=_e.getValueAtTime((_e.keyframes[_e.keyframes.length-1].t-.01)/P,0),me[1]=He.getValueAtTime((He.keyframes[He.keyframes.length-1].t-.01)/P,0)):(Z=[_e.pv,He.pv],me[0]=_e.getValueAtTime((_e._caching.lastFrame+_e.offsetTime-.01)/P,_e.offsetTime),me[1]=He.getValueAtTime((He._caching.lastFrame+He.offsetTime-.01)/P,He.offsetTime))}else me=t,Z=me;this.v.rotate(-Math.atan2(Z[1]-me[1],Z[0]-me[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function a(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function l(){}function u(E){this._addDynamicProperty(E),this.elem.addDynamicProperty(E),this._isDirty=!0}function d(E,P,Z){if(this.elem=E,this.frameId=-1,this.propType="transform",this.data=P,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Z||E),P.p&&P.p.s?(this.px=PropertyFactory.getProp(E,P.p.x,0,0,this),this.py=PropertyFactory.getProp(E,P.p.y,0,0,this),P.p.z&&(this.pz=PropertyFactory.getProp(E,P.p.z,0,0,this))):this.p=PropertyFactory.getProp(E,P.p||{k:[0,0,0]},1,0,this),P.rx){if(this.rx=PropertyFactory.getProp(E,P.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(E,P.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(E,P.rz,0,degToRads,this),P.or.k[0].ti){var me,_e=P.or.k.length;for(me=0;me<_e;me+=1)P.or.k[me].to=null,P.or.k[me].ti=null}this.or=PropertyFactory.getProp(E,P.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(E,P.r||{k:0},0,degToRads,this);P.sk&&(this.sk=PropertyFactory.getProp(E,P.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(E,P.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(E,P.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(E,P.s||{k:[100,100,100]},1,.01,this),P.o?this.o=PropertyFactory.getProp(E,P.o,0,.01,E):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}d.prototype={applyToMatrix:e,getValue:r,precalculateMatrix:a,autoOrient:l},extendPrototype([DynamicPropertyContainer],d),d.prototype.addDynamicProperty=u,d.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function g(E,P,Z){return new d(E,P,Z)}return{getTransformProperty:g}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,r,a,l,u){var d=u?-1:1,g=a.s.v[0]+(1-a.s.v[0])*(1-l),E=a.s.v[1]+(1-a.s.v[1])*(1-l);t.translate(a.p.v[0]*d*l,a.p.v[1]*d*l,a.p.v[2]),e.translate(-a.a.v[0],-a.a.v[1],a.a.v[2]),e.rotate(-a.r.v*d*l),e.translate(a.a.v[0],a.a.v[1],a.a.v[2]),r.translate(-a.a.v[0],-a.a.v[1],a.a.v[2]),r.scale(u?1/g:g,u?1/E:E),r.translate(a.a.v[0],a.a.v[1],a.a.v[2])},RepeaterModifier.prototype.init=function(t,e,r,a){for(this.elem=t,this.arr=e,this.pos=r,this.elemsData=a,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[r]);r>0;)r-=1,this._elements.unshift(e[r]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e]._processed=!1,t[e].ty==="gr"&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var r,a=t.length;for(r=0;r<a;r+=1)t[r]._render=e,t[r].ty==="gr"&&this.changeGroupRender(t[r].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,r,a,l,u,d=!1;if(this._mdf||t){var g=Math.ceil(this.c.v);if(this._groups.length<g){for(;this._groups.length<g;){var E={it:this.cloneElements(this._elements),ty:"gr"};E.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,E),this._groups.splice(0,0,E),this._currentCopies+=1}this.elem.reloadShapes(),d=!0}u=0;var P;for(a=0;a<=this._groups.length-1;a+=1){if(P=u<g,this._groups[a]._render=P,this.changeGroupRender(this._groups[a].it,P),!P){var Z=this.elemsData[a].it,me=Z[Z.length-1];me.transform.op.v!==0?(me.transform.op._mdf=!0,me.transform.op.v=0):me.transform.op._mdf=!1}u+=1}this._currentCopies=g;var _e=this.o.v,He=_e%1,Xe=_e>0?Math.floor(_e):Math.ceil(_e),wt=this.pMatrix.props,Do=this.rMatrix.props,sr=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Ko=0;if(_e>0){for(;Ko<Xe;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Ko+=1;He&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,He,!1),Ko+=He)}else if(_e<0){for(;Ko>Xe;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Ko-=1;He&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-He,!0),Ko-=He)}a=this.data.m===1?0:this._currentCopies-1,l=this.data.m===1?1:-1,u=this._currentCopies;for(var Bs,th;u;){if(e=this.elemsData[a].it,r=e[e.length-1].transform.mProps.v.props,th=r.length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(a/(this._currentCopies-1)),Ko!==0){for((a!==0&&l===1||a!==this._currentCopies-1&&l===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Do[0],Do[1],Do[2],Do[3],Do[4],Do[5],Do[6],Do[7],Do[8],Do[9],Do[10],Do[11],Do[12],Do[13],Do[14],Do[15]),this.matrix.transform(sr[0],sr[1],sr[2],sr[3],sr[4],sr[5],sr[6],sr[7],sr[8],sr[9],sr[10],sr[11],sr[12],sr[13],sr[14],sr[15]),this.matrix.transform(wt[0],wt[1],wt[2],wt[3],wt[4],wt[5],wt[6],wt[7],wt[8],wt[9],wt[10],wt[11],wt[12],wt[13],wt[14],wt[15]),Bs=0;Bs<th;Bs+=1)r[Bs]=this.matrix.props[Bs];this.matrix.reset()}else for(this.matrix.reset(),Bs=0;Bs<th;Bs+=1)r[Bs]=this.matrix.props[Bs];Ko+=1,u-=1,a+=l}}else for(u=this._currentCopies,a=0,l=1;u;)e=this.elemsData[a].it,r=e[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,u-=1,a+=l;return d},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var r=shapePool.newElement();r.c=t.c;var a,l=t._length,u,d,g,E,P,Z,me=0,_e,He,Xe,wt,Do,sr;for(a=0;a<l;a+=1)u=t.v[a],g=t.o[a],d=t.i[a],u[0]===g[0]&&u[1]===g[1]&&u[0]===d[0]&&u[1]===d[1]?(a===0||a===l-1)&&!t.c?(r.setTripleAt(u[0],u[1],g[0],g[1],d[0],d[1],me),me+=1):(a===0?E=t.v[l-1]:E=t.v[a-1],P=Math.sqrt(Math.pow(u[0]-E[0],2)+Math.pow(u[1]-E[1],2)),Z=P?Math.min(P/2,e)/P:0,Do=u[0]+(E[0]-u[0])*Z,_e=Do,sr=u[1]-(u[1]-E[1])*Z,He=sr,Xe=_e-(_e-u[0])*roundCorner,wt=He-(He-u[1])*roundCorner,r.setTripleAt(_e,He,Xe,wt,Do,sr,me),me+=1,a===l-1?E=t.v[0]:E=t.v[a+1],P=Math.sqrt(Math.pow(u[0]-E[0],2)+Math.pow(u[1]-E[1],2)),Z=P?Math.min(P/2,e)/P:0,Xe=u[0]+(E[0]-u[0])*Z,_e=Xe,wt=u[1]+(E[1]-u[1])*Z,He=wt,Do=_e-(_e-u[0])*roundCorner,sr=He-(He-u[1])*roundCorner,r.setTripleAt(_e,He,Xe,wt,Do,sr,me),me+=1):(r.setTripleAt(t.v[a][0],t.v[a][1],t.o[a][0],t.o[a][1],t.i[a][0],t.i[a][1],me),me+=1);return r},RoundCornersModifier.prototype.processShapes=function(t){var e,r,a=this.shapes.length,l,u,d=this.rd.v;if(d!==0){var g,E;for(r=0;r<a;r+=1){if(g=this.shapes[r],E=g.localShapeCollection,!(!g.shape._mdf&&!this._mdf&&!t))for(E.releaseShapes(),g.shape._mdf=!0,e=g.shape.paths.shapes,u=g.shape.paths._length,l=0;l<u;l+=1)E.addShape(this.processPath(e[l],d));g.shape.paths=g.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(t,e){return Math.abs(t-e)*1e5<=Math.min(Math.abs(t),Math.abs(e))}function floatZero(t){return Math.abs(t)<=1e-5}function lerp(t,e,r){return t*(1-r)+e*r}function lerpPoint(t,e,r){return[lerp(t[0],e[0],r),lerp(t[1],e[1],r)]}function quadRoots(t,e,r){if(t===0)return[];var a=e*e-4*t*r;if(a<0)return[];var l=-e/(2*t);if(a===0)return[l];var u=Math.sqrt(a)/(2*t);return[l-u,l+u]}function polynomialCoefficients(t,e,r,a){return[-t+3*e-3*r+a,3*t-6*e+3*r,-3*t+3*e,t]}function singlePoint(t){return new PolynomialBezier(t,t,t,t,!1)}function PolynomialBezier(t,e,r,a,l){l&&pointEqual(t,e)&&(e=lerpPoint(t,a,1/3)),l&&pointEqual(r,a)&&(r=lerpPoint(t,a,2/3));var u=polynomialCoefficients(t[0],e[0],r[0],a[0]),d=polynomialCoefficients(t[1],e[1],r[1],a[1]);this.a=[u[0],d[0]],this.b=[u[1],d[1]],this.c=[u[2],d[2]],this.d=[u[3],d[3]],this.points=[t,e,r,a]}PolynomialBezier.prototype.point=function(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]},PolynomialBezier.prototype.derivative=function(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(t){var e=this.derivative(t);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(t){var e=this.derivative(t);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(t))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,r=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(r<0)return[];var a=Math.sqrt(r);return floatZero(a)?a>0&&a<1?[e]:[]:[e-a,e+a].filter(function(l){return l>0&&l<1})},PolynomialBezier.prototype.split=function(t){if(t<=0)return[singlePoint(this.points[0]),this];if(t>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],t),r=lerpPoint(this.points[1],this.points[2],t),a=lerpPoint(this.points[2],this.points[3],t),l=lerpPoint(e,r,t),u=lerpPoint(r,a,t),d=lerpPoint(l,u,t);return[new PolynomialBezier(this.points[0],e,l,d,!0),new PolynomialBezier(d,u,a,this.points[3],!0)]};function extrema(t,e){var r=t.points[0][e],a=t.points[t.points.length-1][e];if(r>a){var l=a;a=r,r=l}for(var u=quadRoots(3*t.a[e],2*t.b[e],t.c[e]),d=0;d<u.length;d+=1)if(u[d]>0&&u[d]<1){var g=t.point(u[d])[e];g<r?r=g:g>a&&(a=g)}return{min:r,max:a}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var t=this.bounds();return{left:t.x.min,right:t.x.max,top:t.y.min,bottom:t.y.max,width:t.x.max-t.x.min,height:t.y.max-t.y.min,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2}};function intersectData(t,e,r){var a=t.boundingBox();return{cx:a.cx,cy:a.cy,width:a.width,height:a.height,bez:t,t:(e+r)/2,t1:e,t2:r}}function splitData(t){var e=t.bez.split(.5);return[intersectData(e[0],t.t1,t.t),intersectData(e[1],t.t,t.t2)]}function boxIntersect(t,e){return Math.abs(t.cx-e.cx)*2<t.width+e.width&&Math.abs(t.cy-e.cy)*2<t.height+e.height}function intersectsImpl(t,e,r,a,l,u){if(boxIntersect(t,e)){if(r>=u||t.width<=a&&t.height<=a&&e.width<=a&&e.height<=a){l.push([t.t,e.t]);return}var d=splitData(t),g=splitData(e);intersectsImpl(d[0],g[0],r+1,a,l,u),intersectsImpl(d[0],g[1],r+1,a,l,u),intersectsImpl(d[1],g[0],r+1,a,l,u),intersectsImpl(d[1],g[1],r+1,a,l,u)}}PolynomialBezier.prototype.intersections=function(t,e,r){e===void 0&&(e=2),r===void 0&&(r=7);var a=[];return intersectsImpl(intersectData(this,0,1),intersectData(t,0,1),0,e,a,r),a},PolynomialBezier.shapeSegment=function(t,e){var r=(e+1)%t.length();return new PolynomialBezier(t.v[e],t.o[e],t.i[r],t.v[r],!0)},PolynomialBezier.shapeSegmentInverted=function(t,e){var r=(e+1)%t.length();return new PolynomialBezier(t.v[r],t.i[r],t.o[e],t.v[e],!0)};function crossProduct(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function lineIntersection(t,e,r,a){var l=[t[0],t[1],1],u=[e[0],e[1],1],d=[r[0],r[1],1],g=[a[0],a[1],1],E=crossProduct(crossProduct(l,u),crossProduct(d,g));return floatZero(E[2])?null:[E[0]/E[2],E[1]/E[2]]}function polarOffset(t,e,r){return[t[0]+Math.cos(e)*r,t[1]-Math.sin(e)*r]}function pointDistance(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1])}function pointEqual(t,e){return floatEqual(t[0],e[0])&&floatEqual(t[1],e[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(t,e.s,0,null,this),this.frequency=PropertyFactory.getProp(t,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(t,e.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(t,e,r,a,l,u,d){var g=r-Math.PI/2,E=r+Math.PI/2,P=e[0]+Math.cos(r)*a*l,Z=e[1]-Math.sin(r)*a*l;t.setTripleAt(P,Z,P+Math.cos(g)*u,Z-Math.sin(g)*u,P+Math.cos(E)*d,Z-Math.sin(E)*d,t.length())}function getPerpendicularVector(t,e){var r=[e[0]-t[0],e[1]-t[1]],a=-Math.PI*.5,l=[Math.cos(a)*r[0]-Math.sin(a)*r[1],Math.sin(a)*r[0]+Math.cos(a)*r[1]];return l}function getProjectingAngle(t,e){var r=e===0?t.length()-1:e-1,a=(e+1)%t.length(),l=t.v[r],u=t.v[a],d=getPerpendicularVector(l,u);return Math.atan2(0,1)-Math.atan2(d[1],d[0])}function zigZagCorner(t,e,r,a,l,u,d){var g=getProjectingAngle(e,r),E=e.v[r%e._length],P=e.v[r===0?e._length-1:r-1],Z=e.v[(r+1)%e._length],me=u===2?Math.sqrt(Math.pow(E[0]-P[0],2)+Math.pow(E[1]-P[1],2)):0,_e=u===2?Math.sqrt(Math.pow(E[0]-Z[0],2)+Math.pow(E[1]-Z[1],2)):0;setPoint(t,e.v[r%e._length],g,d,a,_e/((l+1)*2),me/((l+1)*2))}function zigZagSegment(t,e,r,a,l,u){for(var d=0;d<a;d+=1){var g=(d+1)/(a+1),E=l===2?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,P=e.normalAngle(g),Z=e.point(g);setPoint(t,Z,P,u,r,E/((a+1)*2),E/((a+1)*2)),u=-u}return u}ZigZagModifier.prototype.processPath=function(t,e,r,a){var l=t._length,u=shapePool.newElement();if(u.c=t.c,t.c||(l-=1),l===0)return u;var d=-1,g=PolynomialBezier.shapeSegment(t,0);zigZagCorner(u,t,0,e,r,a,d);for(var E=0;E<l;E+=1)d=zigZagSegment(u,g,e,r,a,-d),E===l-1&&!t.c?g=null:g=PolynomialBezier.shapeSegment(t,(E+1)%l),zigZagCorner(u,t,E+1,e,r,a,d);return u},ZigZagModifier.prototype.processShapes=function(t){var e,r,a=this.shapes.length,l,u,d=this.amplitude.v,g=Math.max(0,Math.round(this.frequency.v)),E=this.pointsType.v;if(d!==0){var P,Z;for(r=0;r<a;r+=1){if(P=this.shapes[r],Z=P.localShapeCollection,!(!P.shape._mdf&&!this._mdf&&!t))for(Z.releaseShapes(),P.shape._mdf=!0,e=P.shape.paths.shapes,u=P.shape.paths._length,l=0;l<u;l+=1)Z.addShape(this.processPath(e[l],d,g,E));P.shape.paths=P.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(t,e,r){var a=Math.atan2(e[0]-t[0],e[1]-t[1]);return[polarOffset(t,a,r),polarOffset(e,a,r)]}function offsetSegment(t,e){var r,a,l,u,d,g,E;E=linearOffset(t.points[0],t.points[1],e),r=E[0],a=E[1],E=linearOffset(t.points[1],t.points[2],e),l=E[0],u=E[1],E=linearOffset(t.points[2],t.points[3],e),d=E[0],g=E[1];var P=lineIntersection(r,a,l,u);P===null&&(P=a);var Z=lineIntersection(d,g,l,u);return Z===null&&(Z=d),new PolynomialBezier(r,P,Z,g)}function joinLines(t,e,r,a,l){var u=e.points[3],d=r.points[0];if(a===3||pointEqual(u,d))return u;if(a===2){var g=-e.tangentAngle(1),E=-r.tangentAngle(0)+Math.PI,P=lineIntersection(u,polarOffset(u,g+Math.PI/2,100),d,polarOffset(d,g+Math.PI/2,100)),Z=P?pointDistance(P,u):pointDistance(u,d)/2,me=polarOffset(u,g,2*Z*roundCorner);return t.setXYAt(me[0],me[1],"o",t.length()-1),me=polarOffset(d,E,2*Z*roundCorner),t.setTripleAt(d[0],d[1],d[0],d[1],me[0],me[1],t.length()),d}var _e=pointEqual(u,e.points[2])?e.points[0]:e.points[2],He=pointEqual(d,r.points[1])?r.points[3]:r.points[1],Xe=lineIntersection(_e,u,d,He);return Xe&&pointDistance(Xe,u)<l?(t.setTripleAt(Xe[0],Xe[1],Xe[0],Xe[1],Xe[0],Xe[1],t.length()),Xe):u}function getIntersection(t,e){var r=t.intersections(e);return r.length&&floatEqual(r[0][0],1)&&r.shift(),r.length?r[0]:null}function pruneSegmentIntersection(t,e){var r=t.slice(),a=e.slice(),l=getIntersection(t[t.length-1],e[0]);return l&&(r[t.length-1]=t[t.length-1].split(l[0])[0],a[0]=e[0].split(l[1])[1]),t.length>1&&e.length>1&&(l=getIntersection(t[0],e[e.length-1]),l)?[[t[0].split(l[0])[0]],[e[e.length-1].split(l[1])[1]]]:[r,a]}function pruneIntersections(t){for(var e,r=1;r<t.length;r+=1)e=pruneSegmentIntersection(t[r-1],t[r]),t[r-1]=e[0],t[r]=e[1];return t.length>1&&(e=pruneSegmentIntersection(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t}function offsetSegmentSplit(t,e){var r=t.inflectionPoints(),a,l,u,d;if(r.length===0)return[offsetSegment(t,e)];if(r.length===1||floatEqual(r[1],1))return u=t.split(r[0]),a=u[0],l=u[1],[offsetSegment(a,e),offsetSegment(l,e)];u=t.split(r[0]),a=u[0];var g=(r[1]-r[0])/(1-r[0]);return u=u[1].split(g),d=u[0],l=u[1],[offsetSegment(a,e),offsetSegment(d,e),offsetSegment(l,e)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(t,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(t,e,r,a){var l=shapePool.newElement();l.c=t.c;var u=t.length();t.c||(u-=1);var d,g,E,P=[];for(d=0;d<u;d+=1)E=PolynomialBezier.shapeSegment(t,d),P.push(offsetSegmentSplit(E,e));if(!t.c)for(d=u-1;d>=0;d-=1)E=PolynomialBezier.shapeSegmentInverted(t,d),P.push(offsetSegmentSplit(E,e));P=pruneIntersections(P);var Z=null,me=null;for(d=0;d<P.length;d+=1){var _e=P[d];for(me&&(Z=joinLines(l,me,_e[0],r,a)),me=_e[_e.length-1],g=0;g<_e.length;g+=1)E=_e[g],Z&&pointEqual(E.points[0],Z)?l.setXYAt(E.points[1][0],E.points[1][1],"o",l.length()-1):l.setTripleAt(E.points[0][0],E.points[0][1],E.points[1][0],E.points[1][1],E.points[0][0],E.points[0][1],l.length()),l.setTripleAt(E.points[3][0],E.points[3][1],E.points[3][0],E.points[3][1],E.points[2][0],E.points[2][1],l.length()),Z=E.points[3]}return P.length&&joinLines(l,me,P[0][0],r,a),l},OffsetPathModifier.prototype.processShapes=function(t){var e,r,a=this.shapes.length,l,u,d=this.amount.v,g=this.miterLimit.v,E=this.lineJoin;if(d!==0){var P,Z;for(r=0;r<a;r+=1){if(P=this.shapes[r],Z=P.localShapeCollection,!(!P.shape._mdf&&!this._mdf&&!t))for(Z.releaseShapes(),P.shape._mdf=!0,e=P.shape.paths.shapes,u=P.shape.paths._length,l=0;l<u;l+=1)Z.addShape(this.processPath(e[l],d,E,g));P.shape.paths=P.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],r="normal",a="normal",l=e.length,u,d=0;d<l;d+=1)switch(u=e[d].toLowerCase(),u){case"italic":a="italic";break;case"bold":r="700";break;case"black":r="900";break;case"medium":r="500";break;case"regular":case"normal":r="400";break;case"light":case"thin":r="200";break}return{style:a,weight:t.fWeight||r}}var FontManager=function(){var t=5e3,e={w:0,size:0,shapes:[],data:{shapes:[]}},r=[];r=r.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var a=127988,l=917631,u=917601,d=917626,g=65039,E=8205,P=127462,Z=127487,me=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function _e(wh){var gf=wh.split(","),yh,ff=gf.length,e1=[];for(yh=0;yh<ff;yh+=1)gf[yh]!=="sans-serif"&&gf[yh]!=="monospace"&&e1.push(gf[yh]);return e1.join(",")}function He(wh,gf){var yh=createTag("span");yh.setAttribute("aria-hidden",!0),yh.style.fontFamily=gf;var ff=createTag("span");ff.innerText="giItT1WQy@!-/#",yh.style.position="absolute",yh.style.left="-10000px",yh.style.top="-10000px",yh.style.fontSize="300px",yh.style.fontVariant="normal",yh.style.fontStyle="normal",yh.style.fontWeight="normal",yh.style.letterSpacing="0",yh.appendChild(ff),document.body.appendChild(yh);var e1=ff.offsetWidth;return ff.style.fontFamily=_e(wh)+", "+gf,{node:ff,w:e1,parent:yh}}function Xe(){var wh,gf=this.fonts.length,yh,ff,e1=gf;for(wh=0;wh<gf;wh+=1)this.fonts[wh].loaded?e1-=1:this.fonts[wh].fOrigin==="n"||this.fonts[wh].origin===0?this.fonts[wh].loaded=!0:(yh=this.fonts[wh].monoCase.node,ff=this.fonts[wh].monoCase.w,yh.offsetWidth!==ff?(e1-=1,this.fonts[wh].loaded=!0):(yh=this.fonts[wh].sansCase.node,ff=this.fonts[wh].sansCase.w,yh.offsetWidth!==ff&&(e1-=1,this.fonts[wh].loaded=!0)),this.fonts[wh].loaded&&(this.fonts[wh].sansCase.parent.parentNode.removeChild(this.fonts[wh].sansCase.parent),this.fonts[wh].monoCase.parent.parentNode.removeChild(this.fonts[wh].monoCase.parent)));e1!==0&&Date.now()-this.initTime<t?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function wt(wh,gf){var yh=document.body&&gf?"svg":"canvas",ff,e1=getFontProperties(wh);if(yh==="svg"){var s1=createNS("text");s1.style.fontSize="100px",s1.setAttribute("font-family",wh.fFamily),s1.setAttribute("font-style",e1.style),s1.setAttribute("font-weight",e1.weight),s1.textContent="1",wh.fClass?(s1.style.fontFamily="inherit",s1.setAttribute("class",wh.fClass)):s1.style.fontFamily=wh.fFamily,gf.appendChild(s1),ff=s1}else{var b1=new OffscreenCanvas(500,500).getContext("2d");b1.font=e1.style+" "+e1.weight+" 100px "+wh.fFamily,ff=b1}function _1(V1){return yh==="svg"?(ff.textContent=V1,ff.getComputedTextLength()):ff.measureText(V1).width}return{measureText:_1}}function Do(wh,gf){if(!wh){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=wh.list;return}if(!document.body){this.isLoaded=!0,wh.list.forEach(function(F2){F2.helper=wt(F2),F2.cache={}}),this.fonts=wh.list;return}var yh=wh.list,ff,e1=yh.length,s1=e1;for(ff=0;ff<e1;ff+=1){var b1=!0,_1,V1;if(yh[ff].loaded=!1,yh[ff].monoCase=He(yh[ff].fFamily,"monospace"),yh[ff].sansCase=He(yh[ff].fFamily,"sans-serif"),!yh[ff].fPath)yh[ff].loaded=!0,s1-=1;else if(yh[ff].fOrigin==="p"||yh[ff].origin===3){if(_1=document.querySelectorAll('style[f-forigin="p"][f-family="'+yh[ff].fFamily+'"], style[f-origin="3"][f-family="'+yh[ff].fFamily+'"]'),_1.length>0&&(b1=!1),b1){var I1=createTag("style");I1.setAttribute("f-forigin",yh[ff].fOrigin),I1.setAttribute("f-origin",yh[ff].origin),I1.setAttribute("f-family",yh[ff].fFamily),I1.type="text/css",I1.innerText="@font-face {font-family: "+yh[ff].fFamily+"; font-style: normal; src: url('"+yh[ff].fPath+"');}",gf.appendChild(I1)}}else if(yh[ff].fOrigin==="g"||yh[ff].origin===1){for(_1=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),V1=0;V1<_1.length;V1+=1)_1[V1].href.indexOf(yh[ff].fPath)!==-1&&(b1=!1);if(b1){var i2=createTag("link");i2.setAttribute("f-forigin",yh[ff].fOrigin),i2.setAttribute("f-origin",yh[ff].origin),i2.type="text/css",i2.rel="stylesheet",i2.href=yh[ff].fPath,document.body.appendChild(i2)}}else if(yh[ff].fOrigin==="t"||yh[ff].origin===2){for(_1=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),V1=0;V1<_1.length;V1+=1)yh[ff].fPath===_1[V1].src&&(b1=!1);if(b1){var R2=createTag("link");R2.setAttribute("f-forigin",yh[ff].fOrigin),R2.setAttribute("f-origin",yh[ff].origin),R2.setAttribute("rel","stylesheet"),R2.setAttribute("href",yh[ff].fPath),gf.appendChild(R2)}}yh[ff].helper=wt(yh[ff],gf),yh[ff].cache={},this.fonts.push(yh[ff])}s1===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function sr(wh){if(wh){this.chars||(this.chars=[]);var gf,yh=wh.length,ff,e1=this.chars.length,s1;for(gf=0;gf<yh;gf+=1){for(ff=0,s1=!1;ff<e1;)this.chars[ff].style===wh[gf].style&&this.chars[ff].fFamily===wh[gf].fFamily&&this.chars[ff].ch===wh[gf].ch&&(s1=!0),ff+=1;s1||(this.chars.push(wh[gf]),e1+=1)}}}function Ko(wh,gf,yh){for(var ff=0,e1=this.chars.length;ff<e1;){if(this.chars[ff].ch===wh&&this.chars[ff].style===gf&&this.chars[ff].fFamily===yh)return this.chars[ff];ff+=1}return(typeof wh=="string"&&wh.charCodeAt(0)!==13||!wh)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",wh,gf,yh)),e}function Bs(wh,gf,yh){var ff=this.getFontByName(gf),e1=wh;if(!ff.cache[e1]){var s1=ff.helper;if(wh===" "){var b1=s1.measureText("|"+wh+"|"),_1=s1.measureText("||");ff.cache[e1]=(b1-_1)/100}else ff.cache[e1]=s1.measureText(wh)/100}return ff.cache[e1]*yh}function th(wh){for(var gf=0,yh=this.fonts.length;gf<yh;){if(this.fonts[gf].fName===wh)return this.fonts[gf];gf+=1}return this.fonts[0]}function pf(wh){var gf=0,yh=wh.charCodeAt(0);if(yh>=55296&&yh<=56319){var ff=wh.charCodeAt(1);ff>=56320&&ff<=57343&&(gf=(yh-55296)*1024+ff-56320+65536)}return gf}function _h(wh,gf){var yh=wh.toString(16)+gf.toString(16);return me.indexOf(yh)!==-1}function cf(wh){return wh===E}function df(wh){return wh===g}function uf(wh){var gf=pf(wh);return gf>=P&&gf<=Z}function li(wh){return uf(wh.substr(0,2))&&uf(wh.substr(2,2))}function Vc(wh){return r.indexOf(wh)!==-1}function Rs(wh,gf){var yh=pf(wh.substr(gf,2));if(yh!==a)return!1;var ff=0;for(gf+=2;ff<5;){if(yh=pf(wh.substr(gf,2)),yh<u||yh>d)return!1;ff+=1,gf+=2}return pf(wh.substr(gf,2))===l}function qc(){this.isLoaded=!0}var Qp=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Qp.isModifier=_h,Qp.isZeroWidthJoiner=cf,Qp.isFlagEmoji=li,Qp.isRegionalCode=uf,Qp.isCombinedCharacter=Vc,Qp.isRegionalFlag=Rs,Qp.isVariationSelector=df,Qp.BLACK_FLAG_CODE_POINT=a;var n1={addChars:sr,addFonts:Do,getCharData:Ko,getFontByName:th,measureText:Bs,checkLoadedFonts:Xe,setIsLoaded:qc};return Qp.prototype=n1,Qp}();function SlotManager(t){this.animationData=t}SlotManager.prototype.getProp=function(t){return this.animationData.slots&&this.animationData.slots[t.sid]?Object.assign(t,this.animationData.slots[t.sid].p):t};function slotFactory(t){return new SlotManager(t)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){this.renderableComponents.indexOf(e)===-1&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){this.renderableComponents.indexOf(e)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,r=this.renderableComponents.length;for(e=0;e<r;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var t={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(e){return t[e]||""}}();function SliderEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function AngleEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function ColorEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function PointEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function LayerIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function MaskIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function CheckboxEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var r=t.ef||[];this.effectElements=[];var a,l=r.length,u;for(a=0;a<l;a+=1)u=new GroupEffect(r[a],e),this.effectElements.push(u)}function GroupEffect(t,e){this.init(t,e)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var r,a=this.data.ef.length,l,u=this.data.ef;for(r=0;r<a;r+=1){switch(l=null,u[r].ty){case 0:l=new SliderEffect(u[r],e,this);break;case 1:l=new AngleEffect(u[r],e,this);break;case 2:l=new ColorEffect(u[r],e,this);break;case 3:l=new PointEffect(u[r],e,this);break;case 4:case 7:l=new CheckboxEffect(u[r],e,this);break;case 10:l=new LayerIndexEffect(u[r],e,this);break;case 11:l=new MaskIndexEffect(u[r],e,this);break;case 5:l=new EffectsManager(u[r],e);break;default:l=new NoValueEffect(u[r]);break}l&&this.effectElements.push(l)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,r=this.data.masksProperties.length;e<r;){if(this.data.masksProperties[e].mode!=="n"&&this.data.masksProperties[e].cl!==!1)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var r=e("layer"),a=e("effects"),l=e("shape"),u=e("text"),d=e("comp");this.layerInterface=r(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var g=a.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(g),this.data.ty===0||this.data.xt?this.compInterface=d(this):this.data.ty===4?(this.layerInterface.shapeInterface=l(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=u(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm),r=this.baseElement||this.layerElement;r.style["mix-blend-mode"]=e},initBaseData:function(e,r,a){this.globalData=r,this.comp=a,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,r){var a,l=this.dynamicProperties.length;for(a=0;a<l;a+=1)(r||this._isParent&&this.dynamicProperties[a].propType==="transform")&&(this.dynamicProperties[a].getValue(),this.dynamicProperties[a]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&this.dynamicProperties.push(e)}};function FootageElement(t,e,r){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,r)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var t=getExpressionInterfaces();if(t){var e=t("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(t,e,r){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,r),this._isPlaying=!1,this._canPlay=!1;var a=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(a),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,t.au&&t.au.lv?t.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var r=this._volume*this._volumeMultiplier;this._previousVolume!==r&&(this._previousVolume=r,this.audio.volume(r))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(t){var e,r=this.layers.length,a;for(this.completeLayers=!0,e=r-1;e>=0;e-=1)this.elements[e]||(a=this.layers[e],a.ip-a.st<=t-this.layers[e].st&&a.op-a.st>t-this.layers[e].st&&this.buildItem(e)),this.completeLayers=this.elements[e]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t);default:return this.createNull(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;var e,r=t.length,a,l=this.layers.length;for(e=0;e<r;e+=1)for(a=0;a<l;){if(this.layers[a].id===t[e].id){this.layers[a]=t[e];break}a+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,r){for(var a=this.elements,l=this.layers,u=0,d=l.length;u<d;)l[u].ind==e&&(!a[u]||a[u]===!0?(this.buildItem(u),this.addPendingElement(t)):(r.push(a[u]),a[u].setAsParent(),l[u].parent!==void 0?this.buildElementParenting(t,l[u].parent,r):t.setHierarchy(r))),u+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,r=t.length;for(e=0;e<r;e+=1)if(t[e].xt){var a=this.createComp(t[e]);a.initExpressions(),this.globalData.projectInterface.registerComposition(a)}},BaseRenderer.prototype.getElementById=function(t){var e,r=this.elements.length;for(e=0;e<r;e+=1)if(this.elements[e].data.ind===t)return this.elements[e];return null},BaseRenderer.prototype.getElementByPath=function(t){var e=t.shift(),r;if(typeof e=="number")r=this.elements[e];else{var a,l=this.elements.length;for(a=0;a<l;a+=1)if(this.elements[a].data.nm===e){r=this.elements[a];break}}return t.length===0?r:r.getElementByPath(t)},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(t),this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,r=this.finalTransform.mat,a=0,l=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;a<l;){if(this.hierarchy[a].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}a+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,r.cloneFromProps(e),a=0;a<l;a+=1)r.multiply(this.hierarchy[a].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,r=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<r;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var a=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(a),e=1;e<r;e+=1){var l=this.localTransforms[e].matrix;a.multiply(l)}a.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var u=this.finalTransform.localOpacity;for(e=0;e<r;e+=1)u*=this.localTransforms[e].opacity*.01;this.finalTransform.localOpacity=u}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var r=0,a=e.length;for(r=0;r<a;r+=1)this.localTransforms.push(e[r])}}},globalToLocal:function(e){var r=[];r.push(this.finalTransform);for(var a=!0,l=this.comp;a;)l.finalTransform?(l.data.hasMask&&r.splice(0,0,l.finalTransform),l=l.comp):a=!1;var u,d=r.length,g;for(u=0;u<d;u+=1)g=r[u].mat.applyToPointArray(0,0,0),e=[e[0]-g[0],e[1]-g[1],0];return e},mHelper:new Matrix};function MaskElement(t,e,r){this.data=t,this.element=e,this.globalData=r,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var a=this.globalData.defs,l,u=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(u),this.solidPath="";var d,g=this.masksProperties,E=0,P=[],Z,me,_e=createElementID(),He,Xe,wt,Do,sr="clipPath",Ko="clip-path";for(l=0;l<u;l+=1)if((g[l].mode!=="a"&&g[l].mode!=="n"||g[l].inv||g[l].o.k!==100||g[l].o.x)&&(sr="mask",Ko="mask"),(g[l].mode==="s"||g[l].mode==="i")&&E===0?(He=createNS("rect"),He.setAttribute("fill","#ffffff"),He.setAttribute("width",this.element.comp.data.w||0),He.setAttribute("height",this.element.comp.data.h||0),P.push(He)):He=null,d=createNS("path"),g[l].mode==="n")this.viewData[l]={op:PropertyFactory.getProp(this.element,g[l].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,g[l],3),elem:d,lastPath:""},a.appendChild(d);else{E+=1,d.setAttribute("fill",g[l].mode==="s"?"#000000":"#ffffff"),d.setAttribute("clip-rule","nonzero");var Bs;if(g[l].x.k!==0?(sr="mask",Ko="mask",Do=PropertyFactory.getProp(this.element,g[l].x,0,null,this.element),Bs=createElementID(),Xe=createNS("filter"),Xe.setAttribute("id",Bs),wt=createNS("feMorphology"),wt.setAttribute("operator","erode"),wt.setAttribute("in","SourceGraphic"),wt.setAttribute("radius","0"),Xe.appendChild(wt),a.appendChild(Xe),d.setAttribute("stroke",g[l].mode==="s"?"#000000":"#ffffff")):(wt=null,Do=null),this.storedData[l]={elem:d,x:Do,expan:wt,lastPath:"",lastOperator:"",filterId:Bs,lastRadius:0},g[l].mode==="i"){me=P.length;var th=createNS("g");for(Z=0;Z<me;Z+=1)th.appendChild(P[Z]);var pf=createNS("mask");pf.setAttribute("mask-type","alpha"),pf.setAttribute("id",_e+"_"+E),pf.appendChild(d),a.appendChild(pf),th.setAttribute("mask","url("+getLocationHref()+"#"+_e+"_"+E+")"),P.length=0,P.push(th)}else P.push(d);g[l].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[l]={elem:d,lastPath:"",op:PropertyFactory.getProp(this.element,g[l].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,g[l],3),invRect:He},this.viewData[l].prop.k||this.drawPath(g[l],this.viewData[l].prop.v,this.viewData[l])}for(this.maskElement=createNS(sr),u=P.length,l=0;l<u;l+=1)this.maskElement.appendChild(P[l]);E>0&&(this.maskElement.setAttribute("id",_e),this.element.maskedElement.setAttribute(Ko,"url("+getLocationHref()+"#"+_e+")"),a.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e=this.element.finalTransform.mat,r,a=this.masksProperties.length;for(r=0;r<a;r+=1)if((this.viewData[r].prop._mdf||t)&&this.drawPath(this.masksProperties[r],this.viewData[r].prop.v,this.viewData[r]),(this.viewData[r].op._mdf||t)&&this.viewData[r].elem.setAttribute("fill-opacity",this.viewData[r].op.v),this.masksProperties[r].mode!=="n"&&(this.viewData[r].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[r].invRect.setAttribute("transform",e.getInverseMatrix().to2dCSS()),this.storedData[r].x&&(this.storedData[r].x._mdf||t))){var l=this.storedData[r].expan;this.storedData[r].x.v<0?(this.storedData[r].lastOperator!=="erode"&&(this.storedData[r].lastOperator="erode",this.storedData[r].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[r].filterId+")")),l.setAttribute("radius",-this.storedData[r].x.v)):(this.storedData[r].lastOperator!=="dilate"&&(this.storedData[r].lastOperator="dilate",this.storedData[r].elem.setAttribute("filter",null)),this.storedData[r].elem.setAttribute("stroke-width",this.storedData[r].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" ",t},MaskElement.prototype.drawPath=function(t,e,r){var a=" M"+e.v[0][0]+","+e.v[0][1],l,u;for(u=e._length,l=1;l<u;l+=1)a+=" C"+e.o[l-1][0]+","+e.o[l-1][1]+" "+e.i[l][0]+","+e.i[l][1]+" "+e.v[l][0]+","+e.v[l][1];if(e.c&&u>1&&(a+=" C"+e.o[l-1][0]+","+e.o[l-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),r.lastPath!==a){var d="";r.elem&&(e.c&&(d=t.inv?this.solidPath+a:a),r.elem.setAttribute("d",d)),r.lastPath=a}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var t={};t.createFilter=e,t.createAlphaToLuminanceFilter=r;function e(a,l){var u=createNS("filter");return u.setAttribute("id",a),l!==!0&&(u.setAttribute("filterUnits","objectBoundingBox"),u.setAttribute("x","0%"),u.setAttribute("y","0%"),u.setAttribute("width","100%"),u.setAttribute("height","100%")),u}function r(){var a=createNS("feColorMatrix");return a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),a}return t}(),featureSupport=function(){var t={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),/firefox/i.test(navigator.userAgent)&&(t.svgLumaHidden=!1),t}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(t){var e,r="SourceGraphic",a=t.data.ef?t.data.ef.length:0,l=createElementID(),u=filtersFactory.createFilter(l,!0),d=0;this.filters=[];var g;for(e=0;e<a;e+=1){g=null;var E=t.data.ef[e].ty;if(registeredEffects$1[E]){var P=registeredEffects$1[E].effect;g=new P(u,t.effectsManager.effectElements[e],t,idPrefix+d,r),r=idPrefix+d,registeredEffects$1[E].countsAsEffect&&(d+=1)}g&&this.filters.push(g)}d&&(t.globalData.defs.appendChild(u),t.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+l+")")),this.filters.length&&t.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(t){var e,r=this.filters.length;for(e=0;e<r;e+=1)this.filters[e].renderFrame(t)},SVGEffects.prototype.getEffects=function(t){var e,r=this.filters.length,a=[];for(e=0;e<r;e+=1)this.filters[e].type===t&&a.push(this.filters[e]);return a};function registerEffect$1(t,e,r){registeredEffects$1[t]={effect:e,countsAsEffect:r}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var r=createNS("g");r.setAttribute("id",this.layerId),r.appendChild(this.layerElement),e=r,this.globalData.defs.appendChild(r)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var a=createNS("clipPath"),l=createNS("path");l.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var u=createElementID();if(a.setAttribute("id",u),a.appendChild(l),this.globalData.defs.appendChild(a),this.checkMasks()){var d=createNS("g");d.setAttribute("clip-path","url("+getLocationHref()+"#"+u+")"),d.appendChild(this.layerElement),this.transformedElement=d,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+u+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var r=this.layerId+"_"+e,a,l,u,d;if(e===1||e===3){var g=createNS("mask");g.setAttribute("id",r),g.setAttribute("mask-type",e===3?"luminance":"alpha"),u=createNS("use"),u.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),g.appendChild(u),this.globalData.defs.appendChild(g),!featureSupport.maskType&&e===1&&(g.setAttribute("mask-type","luminance"),a=createElementID(),l=filtersFactory.createFilter(a),this.globalData.defs.appendChild(l),l.appendChild(filtersFactory.createAlphaToLuminanceFilter()),d=createNS("g"),d.appendChild(u),g.appendChild(d),d.setAttribute("filter","url("+getLocationHref()+"#"+a+")"))}else if(e===2){var E=createNS("mask");E.setAttribute("id",r),E.setAttribute("mask-type","alpha");var P=createNS("g");E.appendChild(P),a=createElementID(),l=filtersFactory.createFilter(a);var Z=createNS("feComponentTransfer");Z.setAttribute("in","SourceGraphic"),l.appendChild(Z);var me=createNS("feFuncA");me.setAttribute("type","table"),me.setAttribute("tableValues","1.0 0.0"),Z.appendChild(me),this.globalData.defs.appendChild(l);var _e=createNS("rect");_e.setAttribute("width",this.comp.data.w),_e.setAttribute("height",this.comp.data.h),_e.setAttribute("x","0"),_e.setAttribute("y","0"),_e.setAttribute("fill","#ffffff"),_e.setAttribute("opacity","0"),P.setAttribute("filter","url("+getLocationHref()+"#"+a+")"),P.appendChild(_e),u=createNS("use"),u.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),P.appendChild(u),featureSupport.maskType||(E.setAttribute("mask-type","luminance"),l.appendChild(filtersFactory.createAlphaToLuminanceFilter()),d=createNS("g"),P.appendChild(_e),d.appendChild(this.layerElement),P.appendChild(d)),this.globalData.defs.appendChild(E)}this.matteMasks[e]=r}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var t={initElement:function(r,a,l){this.initFrame(),this.initBaseData(r,a,l),this.initTransform(r,a,l),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var r=this.baseElement||this.layerElement;r.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var r=this.baseElement||this.layerElement;r.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(r){this._mdf=!1,this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(t)],RenderableDOMElement)})();function IImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(t,e,r),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(t,e){this.elem=t,this.pos=e}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(e){var r,a=this.shapeModifiers.length;for(r=0;r<a;r+=1)this.shapeModifiers[r].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var r=0,a=this.shapeModifiers.length;r<a;)if(this.shapeModifiers[r].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,r=this.shapes.length;for(e=0;e<r;e+=1)this.shapes[e].sh.reset();r=this.shapeModifiers.length;var a;for(e=r-1;e>=0&&(a=this.shapeModifiers[e].processShapes(this._isFirstFrame),!a);e-=1);}},searchProcessedElement:function(e){for(var r=this.processedElements,a=0,l=r.length;a<l;){if(r[a].elem===e)return r[a].pos;a+=1}return 0},addProcessedElement:function(e,r){for(var a=this.processedElements,l=a.length;l;)if(l-=1,a[l].elem===e){a[l].pos=r;return}a.push(new ProcessedElement(e,r))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(t,e,r){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=r,this.lvl=e,this._isAnimated=!!r.k;for(var a=0,l=t.length;a<l;){if(t[a].mProps.dynamicProperties.length){this._isAnimated=!0;break}a+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=t.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(t,e,r,a){this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=r,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(a);var l,u=e.length||0,d;for(l=0;l<u;l+=1)d=PropertyFactory.getProp(t,e[l].v,0,0,this),this.k=d.k||this.k,this.dataProps[l]={n:e[l].n,p:d};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(t){if(!(this.elem.globalData.frameId===this.frameId&&!t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,r=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),e=0;e<r;e+=1)this.dataProps[e].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=r}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(t,e,r){this.data=e,this.c=createTypedArray("uint8c",e.p*4);var a=e.k.k[0].s?e.k.k[0].s.length-e.p*4:e.k.k.length-e.p*4;this.o=createTypedArray("float32",a),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=a,this.initDynamicPropertyContainer(r),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(t,e){for(var r=0,a=this.o.length/2,l;r<a;){if(l=Math.abs(t[r*4]-t[e*4+r*2]),l>.01)return!1;r+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,r=this.data.p*4,a,l;for(e=0;e<r;e+=1)a=e%4===0?100:255,l=Math.round(this.prop.v[e]*a),this.c[e]!==l&&(this.c[e]=l,this._cmdf=!t);if(this.o.length)for(r=this.prop.v.length,e=this.data.p*4;e<r;e+=1)a=e%2===0?100:1,l=e%2===0?Math.round(this.prop.v[e]*100):this.prop.v[e],this.o[e-this.data.p*4]!==l&&(this.o[e-this.data.p*4]=l,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,r)}SVGGradientFillStyleData.prototype.initGradientData=function(t,e,r){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=r,this.stops=[],this.setGradientData(r.pElem,e),this.setGradientOpacity(e,r),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var r=createElementID(),a=createNS(e.t===1?"linearGradient":"radialGradient");a.setAttribute("id",r),a.setAttribute("spreadMethod","pad"),a.setAttribute("gradientUnits","userSpaceOnUse");var l=[],u,d,g;for(g=e.g.p*4,d=0;d<g;d+=4)u=createNS("stop"),a.appendChild(u),l.push(u);t.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+r+")"),this.gf=a,this.cst=l},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var r,a,l,u=createNS("mask"),d=createNS("path");u.appendChild(d);var g=createElementID(),E=createElementID();u.setAttribute("id",E);var P=createNS(t.t===1?"linearGradient":"radialGradient");P.setAttribute("id",g),P.setAttribute("spreadMethod","pad"),P.setAttribute("gradientUnits","userSpaceOnUse"),l=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var Z=this.stops;for(a=t.g.p*4;a<l;a+=2)r=createNS("stop"),r.setAttribute("stop-color","rgb(255,255,255)"),P.appendChild(r),Z.push(r);d.setAttribute(t.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+g+")"),t.ty==="gs"&&(d.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),d.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),t.lj===1&&d.setAttribute("stroke-miterlimit",t.ml)),this.of=P,this.ms=u,this.ost=Z,this.maskId=E,e.msElem=d}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,r),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(t,e,r){this.transform={mProps:t,op:e,container:r},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(e,r,a,l){if(r===0)return"";var u=e.o,d=e.i,g=e.v,E,P=" M"+l.applyToPointStringified(g[0][0],g[0][1]);for(E=1;E<r;E+=1)P+=" C"+l.applyToPointStringified(u[E-1][0],u[E-1][1])+" "+l.applyToPointStringified(d[E][0],d[E][1])+" "+l.applyToPointStringified(g[E][0],g[E][1]);return a&&r&&(P+=" C"+l.applyToPointStringified(u[E-1][0],u[E-1][1])+" "+l.applyToPointStringified(d[0][0],d[0][1])+" "+l.applyToPointStringified(g[0][0],g[0][1]),P+="z"),P},SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix,r={createRenderFunction:a};function a(me){switch(me.ty){case"fl":return g;case"gf":return P;case"gs":return E;case"st":return Z;case"sh":case"el":case"rc":case"sr":return d;case"tr":return l;case"no":return u;default:return null}}function l(me,_e,He){(He||_e.transform.op._mdf)&&_e.transform.container.setAttribute("opacity",_e.transform.op.v),(He||_e.transform.mProps._mdf)&&_e.transform.container.setAttribute("transform",_e.transform.mProps.v.to2dCSS())}function u(){}function d(me,_e,He){var Xe,wt,Do,sr,Ko,Bs,th=_e.styles.length,pf=_e.lvl,_h,cf,df,uf;for(Bs=0;Bs<th;Bs+=1){if(sr=_e.sh._mdf||He,_e.styles[Bs].lvl<pf){for(cf=e.reset(),df=pf-_e.styles[Bs].lvl,uf=_e.transformers.length-1;!sr&&df>0;)sr=_e.transformers[uf].mProps._mdf||sr,df-=1,uf-=1;if(sr)for(df=pf-_e.styles[Bs].lvl,uf=_e.transformers.length-1;df>0;)cf.multiply(_e.transformers[uf].mProps.v),df-=1,uf-=1}else cf=t;if(_h=_e.sh.paths,wt=_h._length,sr){for(Do="",Xe=0;Xe<wt;Xe+=1)Ko=_h.shapes[Xe],Ko&&Ko._length&&(Do+=buildShapeString(Ko,Ko._length,Ko.c,cf));_e.caches[Bs]=Do}else Do=_e.caches[Bs];_e.styles[Bs].d+=me.hd===!0?"":Do,_e.styles[Bs]._mdf=sr||_e.styles[Bs]._mdf}}function g(me,_e,He){var Xe=_e.style;(_e.c._mdf||He)&&Xe.pElem.setAttribute("fill","rgb("+bmFloor(_e.c.v[0])+","+bmFloor(_e.c.v[1])+","+bmFloor(_e.c.v[2])+")"),(_e.o._mdf||He)&&Xe.pElem.setAttribute("fill-opacity",_e.o.v)}function E(me,_e,He){P(me,_e,He),Z(me,_e,He)}function P(me,_e,He){var Xe=_e.gf,wt=_e.g._hasOpacity,Do=_e.s.v,sr=_e.e.v;if(_e.o._mdf||He){var Ko=me.ty==="gf"?"fill-opacity":"stroke-opacity";_e.style.pElem.setAttribute(Ko,_e.o.v)}if(_e.s._mdf||He){var Bs=me.t===1?"x1":"cx",th=Bs==="x1"?"y1":"cy";Xe.setAttribute(Bs,Do[0]),Xe.setAttribute(th,Do[1]),wt&&!_e.g._collapsable&&(_e.of.setAttribute(Bs,Do[0]),_e.of.setAttribute(th,Do[1]))}var pf,_h,cf,df;if(_e.g._cmdf||He){pf=_e.cst;var uf=_e.g.c;for(cf=pf.length,_h=0;_h<cf;_h+=1)df=pf[_h],df.setAttribute("offset",uf[_h*4]+"%"),df.setAttribute("stop-color","rgb("+uf[_h*4+1]+","+uf[_h*4+2]+","+uf[_h*4+3]+")")}if(wt&&(_e.g._omdf||He)){var li=_e.g.o;for(_e.g._collapsable?pf=_e.cst:pf=_e.ost,cf=pf.length,_h=0;_h<cf;_h+=1)df=pf[_h],_e.g._collapsable||df.setAttribute("offset",li[_h*2]+"%"),df.setAttribute("stop-opacity",li[_h*2+1])}if(me.t===1)(_e.e._mdf||He)&&(Xe.setAttribute("x2",sr[0]),Xe.setAttribute("y2",sr[1]),wt&&!_e.g._collapsable&&(_e.of.setAttribute("x2",sr[0]),_e.of.setAttribute("y2",sr[1])));else{var Vc;if((_e.s._mdf||_e.e._mdf||He)&&(Vc=Math.sqrt(Math.pow(Do[0]-sr[0],2)+Math.pow(Do[1]-sr[1],2)),Xe.setAttribute("r",Vc),wt&&!_e.g._collapsable&&_e.of.setAttribute("r",Vc)),_e.s._mdf||_e.e._mdf||_e.h._mdf||_e.a._mdf||He){Vc||(Vc=Math.sqrt(Math.pow(Do[0]-sr[0],2)+Math.pow(Do[1]-sr[1],2)));var Rs=Math.atan2(sr[1]-Do[1],sr[0]-Do[0]),qc=_e.h.v;qc>=1?qc=.99:qc<=-1&&(qc=-.99);var Qp=Vc*qc,n1=Math.cos(Rs+_e.a.v)*Qp+Do[0],wh=Math.sin(Rs+_e.a.v)*Qp+Do[1];Xe.setAttribute("fx",n1),Xe.setAttribute("fy",wh),wt&&!_e.g._collapsable&&(_e.of.setAttribute("fx",n1),_e.of.setAttribute("fy",wh))}}}function Z(me,_e,He){var Xe=_e.style,wt=_e.d;wt&&(wt._mdf||He)&&wt.dashStr&&(Xe.pElem.setAttribute("stroke-dasharray",wt.dashStr),Xe.pElem.setAttribute("stroke-dashoffset",wt.dashoffset[0])),_e.c&&(_e.c._mdf||He)&&Xe.pElem.setAttribute("stroke","rgb("+bmFloor(_e.c.v[0])+","+bmFloor(_e.c.v[1])+","+bmFloor(_e.c.v[2])+")"),(_e.o._mdf||He)&&Xe.pElem.setAttribute("stroke-opacity",_e.o.v),(_e.w._mdf||He)&&(Xe.pElem.setAttribute("stroke-width",_e.w.v),Xe.msElem&&Xe.msElem.setAttribute("stroke-width",_e.w.v))}return r}();function SVGShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,r),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e=this.shapes.length,r,a,l=this.stylesList.length,u,d=[],g=!1;for(a=0;a<l;a+=1){for(u=this.stylesList[a],g=!1,d.length=0,t=0;t<e;t+=1)r=this.shapes[t],r.styles.indexOf(u)!==-1&&(d.push(r),g=r._isAnimated||g);d.length>1&&g&&this.setShapesAsAnimated(d)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var r,a=new SVGStyleData(t,e),l=a.pElem;if(t.ty==="st")r=new SVGStrokeStyleData(this,t,a);else if(t.ty==="fl")r=new SVGFillStyleData(this,t,a);else if(t.ty==="gf"||t.ty==="gs"){var u=t.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;r=new u(this,t,a),this.globalData.defs.appendChild(r.gf),r.maskId&&(this.globalData.defs.appendChild(r.ms),this.globalData.defs.appendChild(r.of),l.setAttribute("mask","url("+getLocationHref()+"#"+r.maskId+")"))}else t.ty==="no"&&(r=new SVGNoStyleData(this,t,a));return(t.ty==="st"||t.ty==="gs")&&(l.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),l.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),l.setAttribute("fill-opacity","0"),t.lj===1&&l.setAttribute("stroke-miterlimit",t.ml)),t.r===2&&l.setAttribute("fill-rule","evenodd"),t.ln&&l.setAttribute("id",t.ln),t.cl&&l.setAttribute("class",t.cl),t.bm&&(l.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(a),this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var r=TransformPropertyFactory.getTransformProperty(this,t,this),a=new SVGTransformData(r,r.o,e);return this.addToAnimatedContents(t,a),a},SVGShapeElement.prototype.createShapeElement=function(t,e,r){var a=4;t.ty==="rc"?a=5:t.ty==="el"?a=6:t.ty==="sr"&&(a=7);var l=ShapePropertyFactory.getShapeProp(this,t,a,this),u=new SVGShapeData(e,r,l);return this.shapes.push(u),this.addShapeToModifiers(u),this.addToAnimatedContents(t,u),u},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var r=0,a=this.animatedContents.length;r<a;){if(this.animatedContents[r].element===e)return;r+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e=t.styles,r,a=this.stylesList.length;for(r=0;r<a;r+=1)e.indexOf(this.stylesList[r])===-1&&!this.stylesList[r].closed&&e.push(this.stylesList[r])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,r,a,l,u,d){var g=[].concat(u),E,P=t.length-1,Z,me,_e=[],He=[],Xe,wt,Do;for(E=P;E>=0;E-=1){if(Do=this.searchProcessedElement(t[E]),Do?e[E]=r[Do-1]:t[E]._render=d,t[E].ty==="fl"||t[E].ty==="st"||t[E].ty==="gf"||t[E].ty==="gs"||t[E].ty==="no")Do?e[E].style.closed=t[E].hd:e[E]=this.createStyleElement(t[E],l),t[E]._render&&e[E].style.pElem.parentNode!==a&&a.appendChild(e[E].style.pElem),_e.push(e[E].style);else if(t[E].ty==="gr"){if(!Do)e[E]=this.createGroupElement(t[E]);else for(me=e[E].it.length,Z=0;Z<me;Z+=1)e[E].prevViewData[Z]=e[E].it[Z];this.searchShapes(t[E].it,e[E].it,e[E].prevViewData,e[E].gr,l+1,g,d),t[E]._render&&e[E].gr.parentNode!==a&&a.appendChild(e[E].gr)}else t[E].ty==="tr"?(Do||(e[E]=this.createTransformElement(t[E],a)),Xe=e[E].transform,g.push(Xe)):t[E].ty==="sh"||t[E].ty==="rc"||t[E].ty==="el"||t[E].ty==="sr"?(Do||(e[E]=this.createShapeElement(t[E],g,l)),this.setElementStyles(e[E])):t[E].ty==="tm"||t[E].ty==="rd"||t[E].ty==="ms"||t[E].ty==="pb"||t[E].ty==="zz"||t[E].ty==="op"?(Do?(wt=e[E],wt.closed=!1):(wt=ShapeModifiers.getModifier(t[E].ty),wt.init(this,t[E]),e[E]=wt,this.shapeModifiers.push(wt)),He.push(wt)):t[E].ty==="rp"&&(Do?(wt=e[E],wt.closed=!0):(wt=ShapeModifiers.getModifier(t[E].ty),e[E]=wt,wt.init(this,t,E,e),this.shapeModifiers.push(wt),d=!1),He.push(wt));this.addProcessedElement(t[E],E+1)}for(P=_e.length,E=0;E<P;E+=1)_e[E].closed=!0;for(P=He.length,E=0;E<P;E+=1)He[E].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e=this.animatedContents.length,r;for(t=0;t<e;t+=1)r=this.animatedContents[t],(this._isFirstFrame||r.element._isAnimated)&&r.data!==!0&&r.fn(r.data,r.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(t,e,r,a,l,u){this.o=t,this.sw=e,this.sc=r,this.fc=a,this.m=l,this.p=u,this._mdf={o:!0,sw:!!e,sc:!!r,fc:!!a,m:!0,p:!0}}LetterProps.prototype.update=function(t,e,r,a,l,u){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var d=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,d=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,d=!0),this.sc!==r&&(this.sc=r,this._mdf.sc=!0,d=!0),this.fc!==a&&(this.fc=a,this._mdf.fc=!0,d=!0),this.m!==l&&(this.m=l,this._mdf.m=!0,d=!0),u.length&&(this.p[0]!==u[0]||this.p[1]!==u[1]||this.p[4]!==u[4]||this.p[5]!==u[5]||this.p[12]!==u[12]||this.p[13]!==u[13])&&(this.p=u,this._mdf.p=!0,d=!0),d};function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=t.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!t)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,r=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var a,l=this.effectsSequence.length,u=t||this.data.d.k[this.keysIndex].s;for(a=0;a<l;a+=1)r!==this.keysIndex?u=this.effectsSequence[a](u,u.t):u=this.effectsSequence[a](this.currentData,u.t);e!==u&&this.setCurrentData(u),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,r=0,a=t.length;r<=a-1&&!(r===a-1||t[r+1].t>e);)r+=1;return this.keysIndex!==r&&(this.keysIndex=r),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e=[],r=0,a=t.length,l,u,d=!1,g=!1,E="";r<a;)d=g,g=!1,l=t.charCodeAt(r),E=t.charAt(r),FontManager.isCombinedCharacter(l)?d=!0:l>=55296&&l<=56319?FontManager.isRegionalFlag(t,r)?E=t.substr(r,14):(u=t.charCodeAt(r+1),u>=56320&&u<=57343&&(FontManager.isModifier(l,u)?(E=t.substr(r,2),d=!0):FontManager.isFlagEmoji(t.substr(r,4))?E=t.substr(r,4):E=t.substr(r,2))):l>56319?(u=t.charCodeAt(r+1),FontManager.isVariationSelector(l)&&(d=!0)):FontManager.isZeroWidthJoiner(l)&&(d=!0,g=!0),d?(e[e.length-1]+=E,d=!1):e.push(E),r+=E.length;return e},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e=this.elem.globalData.fontManager,r=this.data,a=[],l,u,d,g=0,E,P=r.m.g,Z=0,me=0,_e=0,He=[],Xe=0,wt=0,Do,sr,Ko=e.getFontByName(t.f),Bs,th=0,pf=getFontProperties(Ko);t.fWeight=pf.weight,t.fStyle=pf.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),u=t.finalText.length,t.finalLineHeight=t.lh;var _h=t.tr/1e3*t.finalSize,cf;if(t.sz)for(var df=!0,uf=t.sz[0],li=t.sz[1],Vc,Rs;df;){Rs=this.buildFinalText(t.t),Vc=0,Xe=0,u=Rs.length,_h=t.tr/1e3*t.finalSize;var qc=-1;for(l=0;l<u;l+=1)cf=Rs[l].charCodeAt(0),d=!1,Rs[l]===" "?qc=l:(cf===13||cf===3)&&(Xe=0,d=!0,Vc+=t.finalLineHeight||t.finalSize*1.2),e.chars?(Bs=e.getCharData(Rs[l],Ko.fStyle,Ko.fFamily),th=d?0:Bs.w*t.finalSize/100):th=e.measureText(Rs[l],t.f,t.finalSize),Xe+th>uf&&Rs[l]!==" "?(qc===-1?u+=1:l=qc,Vc+=t.finalLineHeight||t.finalSize*1.2,Rs.splice(l,qc===l?1:0,"\r"),qc=-1,Xe=0):(Xe+=th,Xe+=_h);Vc+=Ko.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&li<Vc?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=Rs,u=t.finalText.length,df=!1)}Xe=-_h,th=0;var Qp=0,n1;for(l=0;l<u;l+=1)if(d=!1,n1=t.finalText[l],cf=n1.charCodeAt(0),cf===13||cf===3?(Qp=0,He.push(Xe),wt=Xe>wt?Xe:wt,Xe=-2*_h,E="",d=!0,_e+=1):E=n1,e.chars?(Bs=e.getCharData(n1,Ko.fStyle,e.getFontByName(t.f).fFamily),th=d?0:Bs.w*t.finalSize/100):th=e.measureText(E,t.f,t.finalSize),n1===" "?Qp+=th+_h:(Xe+=th+_h+Qp,Qp=0),a.push({l:th,an:th,add:Z,n:d,anIndexes:[],val:E,line:_e,animatorJustifyOffset:0}),P==2){if(Z+=th,E===""||E===" "||l===u-1){for((E===""||E===" ")&&(Z-=th);me<=l;)a[me].an=Z,a[me].ind=g,a[me].extra=th,me+=1;g+=1,Z=0}}else if(P==3){if(Z+=th,E===""||l===u-1){for(E===""&&(Z-=th);me<=l;)a[me].an=Z,a[me].ind=g,a[me].extra=th,me+=1;Z=0,g+=1}}else a[g].ind=g,a[g].extra=0,g+=1;if(t.l=a,wt=Xe>wt?Xe:wt,He.push(Xe),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=wt,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=He;var wh=r.a,gf,yh;sr=wh.length;var ff,e1,s1=[];for(Do=0;Do<sr;Do+=1){for(gf=wh[Do],gf.a.sc&&(t.strokeColorAnim=!0),gf.a.sw&&(t.strokeWidthAnim=!0),(gf.a.fc||gf.a.fh||gf.a.fs||gf.a.fb)&&(t.fillColorAnim=!0),e1=0,ff=gf.s.b,l=0;l<u;l+=1)yh=a[l],yh.anIndexes[Do]=e1,(ff==1&&yh.val!==""||ff==2&&yh.val!==""&&yh.val!==" "||ff==3&&(yh.n||yh.val==" "||l==u-1)||ff==4&&(yh.n||l==u-1))&&(gf.s.rn===1&&s1.push(e1),e1+=1);r.a[Do].s.totalChars=e1;var b1=-1,_1;if(gf.s.rn===1)for(l=0;l<u;l+=1)yh=a[l],b1!=yh.anIndexes[Do]&&(b1=yh.anIndexes[Do],_1=s1.splice(Math.floor(Math.random()*s1.length),1)[0]),yh.anIndexes[Do]=_1}t.yOffset=t.finalLineHeight||t.finalSize*1.2,t.ls=t.ls||0,t.ascent=Ko.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=e===void 0?this.keysIndex:e;var r=this.copyData({},this.data.d.k[e].s);r=this.copyData(r,t),this.data.d.k[e].s=r,this.recalculate(e),this.setCurrentData(r),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,r=Math.floor;function a(u,d){this._currentTextLength=-1,this.k=!1,this.data=d,this.elem=u,this.comp=u.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(u),this.s=PropertyFactory.getProp(u,d.s||{k:0},0,0,this),"e"in d?this.e=PropertyFactory.getProp(u,d.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(u,d.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(u,d.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(u,d.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(u,d.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(u,d.a,0,.01,this),this.dynamicProperties.length||this.getValue()}a.prototype={getMult:function(d){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var g=0,E=0,P=1,Z=1;this.ne.v>0?g=this.ne.v/100:E=-this.ne.v/100,this.xe.v>0?P=1-this.xe.v/100:Z=1+this.xe.v/100;var me=BezierFactory.getBezierEasing(g,E,P,Z).get,_e=0,He=this.finalS,Xe=this.finalE,wt=this.data.sh;if(wt===2)Xe===He?_e=d>=Xe?1:0:_e=t(0,e(.5/(Xe-He)+(d-He)/(Xe-He),1)),_e=me(_e);else if(wt===3)Xe===He?_e=d>=Xe?0:1:_e=1-t(0,e(.5/(Xe-He)+(d-He)/(Xe-He),1)),_e=me(_e);else if(wt===4)Xe===He?_e=0:(_e=t(0,e(.5/(Xe-He)+(d-He)/(Xe-He),1)),_e<.5?_e*=2:_e=1-2*(_e-.5)),_e=me(_e);else if(wt===5){if(Xe===He)_e=0;else{var Do=Xe-He;d=e(t(0,d+.5-He),Xe-He);var sr=-Do/2+d,Ko=Do/2;_e=Math.sqrt(1-sr*sr/(Ko*Ko))}_e=me(_e)}else wt===6?(Xe===He?_e=0:(d=e(t(0,d+.5-He),Xe-He),_e=(1+Math.cos(Math.PI+Math.PI*2*d/(Xe-He)))/2),_e=me(_e)):(d>=r(He)&&(d-He<0?_e=t(0,e(e(Xe,1)-(He-d),1)):_e=t(0,e(Xe-d,1))),_e=me(_e));if(this.sm.v!==100){var Bs=this.sm.v*.01;Bs===0&&(Bs=1e-8);var th=.5-Bs*.5;_e<th?_e=0:(_e=(_e-th)/Bs,_e>1&&(_e=1))}return _e*this.a.v},getValue:function(d){this.iterateDynamicProperties(),this._mdf=d||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,d&&this.data.r===2&&(this.e.v=this._currentTextLength);var g=this.data.r===2?1:100/this.data.totalChars,E=this.o.v/g,P=this.s.v/g+E,Z=this.e.v/g+E;if(P>Z){var me=P;P=Z,Z=me}this.finalS=P,this.finalE=Z}},extendPrototype([DynamicPropertyContainer],a);function l(u,d,g){return new a(u,d)}return{getTextSelectorProp:l}}();function TextAnimatorDataProperty(t,e,r){var a={propType:!1},l=PropertyFactory.getProp,u=e.a;this.a={r:u.r?l(t,u.r,0,degToRads,r):a,rx:u.rx?l(t,u.rx,0,degToRads,r):a,ry:u.ry?l(t,u.ry,0,degToRads,r):a,sk:u.sk?l(t,u.sk,0,degToRads,r):a,sa:u.sa?l(t,u.sa,0,degToRads,r):a,s:u.s?l(t,u.s,1,.01,r):a,a:u.a?l(t,u.a,1,0,r):a,o:u.o?l(t,u.o,0,.01,r):a,p:u.p?l(t,u.p,1,0,r):a,sw:u.sw?l(t,u.sw,0,0,r):a,sc:u.sc?l(t,u.sc,1,0,r):a,fc:u.fc?l(t,u.fc,1,0,r):a,fh:u.fh?l(t,u.fh,0,0,r):a,fs:u.fs?l(t,u.fs,0,.01,r):a,fb:u.fb?l(t,u.fb,0,.01,r):a,t:u.t?l(t,u.t,0,0,r):a},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,r),this.s.t=e.s.t}function TextAnimatorProperty(t,e,r){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=r,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(r)}TextAnimatorProperty.prototype.searchProperties=function(){var t,e=this._textData.a.length,r,a=PropertyFactory.getProp;for(t=0;t<e;t+=1)r=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,r,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:a(this._elem,this._textData.p.a,0,0,this),f:a(this._elem,this._textData.p.f,0,0,this),l:a(this._elem,this._textData.p.l,0,0,this),r:a(this._elem,this._textData.p.r,0,0,this),p:a(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=a(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,!(!this._mdf&&!this._isFirstFrame&&!e&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var r=this._moreOptions.alignment.v,a=this._animatorsData,l=this._textData,u=this.mHelper,d=this._renderType,g=this.renderedLetters.length,E,P,Z,me,_e=t.l,He,Xe,wt,Do,sr,Ko,Bs,th,pf,_h,cf,df,uf,li,Vc;if(this._hasMaskedPath){if(Vc=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Rs=Vc.v;this._pathData.r.v&&(Rs=Rs.reverse()),He={tLength:0,segments:[]},me=Rs._length-1;var qc;for(df=0,Z=0;Z<me;Z+=1)qc=bez.buildBezierData(Rs.v[Z],Rs.v[Z+1],[Rs.o[Z][0]-Rs.v[Z][0],Rs.o[Z][1]-Rs.v[Z][1]],[Rs.i[Z+1][0]-Rs.v[Z+1][0],Rs.i[Z+1][1]-Rs.v[Z+1][1]]),He.tLength+=qc.segmentLength,He.segments.push(qc),df+=qc.segmentLength;Z=me,Vc.v.c&&(qc=bez.buildBezierData(Rs.v[Z],Rs.v[0],[Rs.o[Z][0]-Rs.v[Z][0],Rs.o[Z][1]-Rs.v[Z][1]],[Rs.i[0][0]-Rs.v[0][0],Rs.i[0][1]-Rs.v[0][1]]),He.tLength+=qc.segmentLength,He.segments.push(qc),df+=qc.segmentLength),this._pathData.pi=He}if(He=this._pathData.pi,Xe=this._pathData.f.v,Bs=0,Ko=1,Do=0,sr=!0,_h=He.segments,Xe<0&&Vc.v.c)for(He.tLength<Math.abs(Xe)&&(Xe=-Math.abs(Xe)%He.tLength),Bs=_h.length-1,pf=_h[Bs].points,Ko=pf.length-1;Xe<0;)Xe+=pf[Ko].partialLength,Ko-=1,Ko<0&&(Bs-=1,pf=_h[Bs].points,Ko=pf.length-1);pf=_h[Bs].points,th=pf[Ko-1],wt=pf[Ko],cf=wt.partialLength}me=_e.length,E=0,P=0;var Qp=t.finalSize*1.2*.714,n1=!0,wh,gf,yh,ff,e1;ff=a.length;var s1,b1=-1,_1,V1,I1,i2=Xe,R2=Bs,F2=Ko,X1=-1,W2,N2,V2,q2,B2,K2,S2,E1,F1="",K1=this.defaultPropsArray,N1;if(t.j===2||t.j===1){var J1=0,E2=0,n2=t.j===2?-.5:-1,D1=0,i1=!0;for(Z=0;Z<me;Z+=1)if(_e[Z].n){for(J1&&(J1+=E2);D1<Z;)_e[D1].animatorJustifyOffset=J1,D1+=1;J1=0,i1=!0}else{for(yh=0;yh<ff;yh+=1)wh=a[yh].a,wh.t.propType&&(i1&&t.j===2&&(E2+=wh.t.v*n2),gf=a[yh].s,s1=gf.getMult(_e[Z].anIndexes[yh],l.a[yh].s.totalChars),s1.length?J1+=wh.t.v*s1[0]*n2:J1+=wh.t.v*s1*n2);i1=!1}for(J1&&(J1+=E2);D1<Z;)_e[D1].animatorJustifyOffset=J1,D1+=1}for(Z=0;Z<me;Z+=1){if(u.reset(),W2=1,_e[Z].n)E=0,P+=t.yOffset,P+=n1?1:0,Xe=i2,n1=!1,this._hasMaskedPath&&(Bs=R2,Ko=F2,pf=_h[Bs].points,th=pf[Ko-1],wt=pf[Ko],cf=wt.partialLength,Do=0),F1="",E1="",K2="",N1="",K1=this.defaultPropsArray;else{if(this._hasMaskedPath){if(X1!==_e[Z].line){switch(t.j){case 1:Xe+=df-t.lineWidths[_e[Z].line];break;case 2:Xe+=(df-t.lineWidths[_e[Z].line])/2;break}X1=_e[Z].line}b1!==_e[Z].ind&&(_e[b1]&&(Xe+=_e[b1].extra),Xe+=_e[Z].an/2,b1=_e[Z].ind),Xe+=r[0]*_e[Z].an*.005;var g1=0;for(yh=0;yh<ff;yh+=1)wh=a[yh].a,wh.p.propType&&(gf=a[yh].s,s1=gf.getMult(_e[Z].anIndexes[yh],l.a[yh].s.totalChars),s1.length?g1+=wh.p.v[0]*s1[0]:g1+=wh.p.v[0]*s1),wh.a.propType&&(gf=a[yh].s,s1=gf.getMult(_e[Z].anIndexes[yh],l.a[yh].s.totalChars),s1.length?g1+=wh.a.v[0]*s1[0]:g1+=wh.a.v[0]*s1);for(sr=!0,this._pathData.a.v&&(Xe=_e[0].an*.5+(df-this._pathData.f.v-_e[0].an*.5-_e[_e.length-1].an*.5)*b1/(me-1),Xe+=this._pathData.f.v);sr;)Do+cf>=Xe+g1||!pf?(uf=(Xe+g1-Do)/wt.partialLength,V1=th.point[0]+(wt.point[0]-th.point[0])*uf,I1=th.point[1]+(wt.point[1]-th.point[1])*uf,u.translate(-r[0]*_e[Z].an*.005,-(r[1]*Qp)*.01),sr=!1):pf&&(Do+=wt.partialLength,Ko+=1,Ko>=pf.length&&(Ko=0,Bs+=1,_h[Bs]?pf=_h[Bs].points:Vc.v.c?(Ko=0,Bs=0,pf=_h[Bs].points):(Do-=wt.partialLength,pf=null)),pf&&(th=wt,wt=pf[Ko],cf=wt.partialLength));_1=_e[Z].an/2-_e[Z].add,u.translate(-_1,0,0)}else _1=_e[Z].an/2-_e[Z].add,u.translate(-_1,0,0),u.translate(-r[0]*_e[Z].an*.005,-r[1]*Qp*.01,0);for(yh=0;yh<ff;yh+=1)wh=a[yh].a,wh.t.propType&&(gf=a[yh].s,s1=gf.getMult(_e[Z].anIndexes[yh],l.a[yh].s.totalChars),(E!==0||t.j!==0)&&(this._hasMaskedPath?s1.length?Xe+=wh.t.v*s1[0]:Xe+=wh.t.v*s1:s1.length?E+=wh.t.v*s1[0]:E+=wh.t.v*s1));for(t.strokeWidthAnim&&(V2=t.sw||0),t.strokeColorAnim&&(t.sc?N2=[t.sc[0],t.sc[1],t.sc[2]]:N2=[0,0,0]),t.fillColorAnim&&t.fc&&(q2=[t.fc[0],t.fc[1],t.fc[2]]),yh=0;yh<ff;yh+=1)wh=a[yh].a,wh.a.propType&&(gf=a[yh].s,s1=gf.getMult(_e[Z].anIndexes[yh],l.a[yh].s.totalChars),s1.length?u.translate(-wh.a.v[0]*s1[0],-wh.a.v[1]*s1[1],wh.a.v[2]*s1[2]):u.translate(-wh.a.v[0]*s1,-wh.a.v[1]*s1,wh.a.v[2]*s1));for(yh=0;yh<ff;yh+=1)wh=a[yh].a,wh.s.propType&&(gf=a[yh].s,s1=gf.getMult(_e[Z].anIndexes[yh],l.a[yh].s.totalChars),s1.length?u.scale(1+(wh.s.v[0]-1)*s1[0],1+(wh.s.v[1]-1)*s1[1],1):u.scale(1+(wh.s.v[0]-1)*s1,1+(wh.s.v[1]-1)*s1,1));for(yh=0;yh<ff;yh+=1){if(wh=a[yh].a,gf=a[yh].s,s1=gf.getMult(_e[Z].anIndexes[yh],l.a[yh].s.totalChars),wh.sk.propType&&(s1.length?u.skewFromAxis(-wh.sk.v*s1[0],wh.sa.v*s1[1]):u.skewFromAxis(-wh.sk.v*s1,wh.sa.v*s1)),wh.r.propType&&(s1.length?u.rotateZ(-wh.r.v*s1[2]):u.rotateZ(-wh.r.v*s1)),wh.ry.propType&&(s1.length?u.rotateY(wh.ry.v*s1[1]):u.rotateY(wh.ry.v*s1)),wh.rx.propType&&(s1.length?u.rotateX(wh.rx.v*s1[0]):u.rotateX(wh.rx.v*s1)),wh.o.propType&&(s1.length?W2+=(wh.o.v*s1[0]-W2)*s1[0]:W2+=(wh.o.v*s1-W2)*s1),t.strokeWidthAnim&&wh.sw.propType&&(s1.length?V2+=wh.sw.v*s1[0]:V2+=wh.sw.v*s1),t.strokeColorAnim&&wh.sc.propType)for(B2=0;B2<3;B2+=1)s1.length?N2[B2]+=(wh.sc.v[B2]-N2[B2])*s1[0]:N2[B2]+=(wh.sc.v[B2]-N2[B2])*s1;if(t.fillColorAnim&&t.fc){if(wh.fc.propType)for(B2=0;B2<3;B2+=1)s1.length?q2[B2]+=(wh.fc.v[B2]-q2[B2])*s1[0]:q2[B2]+=(wh.fc.v[B2]-q2[B2])*s1;wh.fh.propType&&(s1.length?q2=addHueToRGB(q2,wh.fh.v*s1[0]):q2=addHueToRGB(q2,wh.fh.v*s1)),wh.fs.propType&&(s1.length?q2=addSaturationToRGB(q2,wh.fs.v*s1[0]):q2=addSaturationToRGB(q2,wh.fs.v*s1)),wh.fb.propType&&(s1.length?q2=addBrightnessToRGB(q2,wh.fb.v*s1[0]):q2=addBrightnessToRGB(q2,wh.fb.v*s1))}}for(yh=0;yh<ff;yh+=1)wh=a[yh].a,wh.p.propType&&(gf=a[yh].s,s1=gf.getMult(_e[Z].anIndexes[yh],l.a[yh].s.totalChars),this._hasMaskedPath?s1.length?u.translate(0,wh.p.v[1]*s1[0],-wh.p.v[2]*s1[1]):u.translate(0,wh.p.v[1]*s1,-wh.p.v[2]*s1):s1.length?u.translate(wh.p.v[0]*s1[0],wh.p.v[1]*s1[1],-wh.p.v[2]*s1[2]):u.translate(wh.p.v[0]*s1,wh.p.v[1]*s1,-wh.p.v[2]*s1));if(t.strokeWidthAnim&&(K2=V2<0?0:V2),t.strokeColorAnim&&(S2="rgb("+Math.round(N2[0]*255)+","+Math.round(N2[1]*255)+","+Math.round(N2[2]*255)+")"),t.fillColorAnim&&t.fc&&(E1="rgb("+Math.round(q2[0]*255)+","+Math.round(q2[1]*255)+","+Math.round(q2[2]*255)+")"),this._hasMaskedPath){if(u.translate(0,-t.ls),u.translate(0,r[1]*Qp*.01+P,0),this._pathData.p.v){li=(wt.point[1]-th.point[1])/(wt.point[0]-th.point[0]);var u1=Math.atan(li)*180/Math.PI;wt.point[0]<th.point[0]&&(u1+=180),u.rotate(-u1*Math.PI/180)}u.translate(V1,I1,0),Xe-=r[0]*_e[Z].an*.005,_e[Z+1]&&b1!==_e[Z+1].ind&&(Xe+=_e[Z].an/2,Xe+=t.tr*.001*t.finalSize)}else{switch(u.translate(E,P,0),t.ps&&u.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:u.translate(_e[Z].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[_e[Z].line]),0,0);break;case 2:u.translate(_e[Z].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[_e[Z].line])/2,0,0);break}u.translate(0,-t.ls),u.translate(_1,0,0),u.translate(r[0]*_e[Z].an*.005,r[1]*Qp*.01,0),E+=_e[Z].l+t.tr*.001*t.finalSize}d==="html"?F1=u.toCSS():d==="svg"?F1=u.to2dCSS():K1=[u.props[0],u.props[1],u.props[2],u.props[3],u.props[4],u.props[5],u.props[6],u.props[7],u.props[8],u.props[9],u.props[10],u.props[11],u.props[12],u.props[13],u.props[14],u.props[15]],N1=W2}g<=Z?(e1=new LetterProps(N1,K2,S2,E1,F1,K1),this.renderedLetters.push(e1),g+=1,this.lettersChangedFlag=!0):(e1=this.renderedLetters[Z],this.lettersChangedFlag=e1.update(N1,K2,S2,E1,F1,K1)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(t,e,r){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,r),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)},ITextElement.prototype.createPathShape=function(t,e){var r,a=e.length,l,u="";for(r=0;r<a;r+=1)e[r].ty==="sh"&&(l=e[r].ks.k,u+=buildShapeString(l,l.i.length,!0,t));return u},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,r,a,l){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r])/2,0,0);break}e.translate(a,l,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(t[0]*255)+","+Math.round(t[1]*255)+","+Math.round(t[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(t,e,r){this.textSpans=[],this.renderType="svg",this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,r=t.length,a=[],l="";e<r;)t[e]==="\r"||t[e]===""?(a.push(l),l=""):l+=t[e],e+=1;return a.push(l),a},SVGTextLottieElement.prototype.buildShapeData=function(t,e){if(t.shapes&&t.shapes.length){var r=t.shapes[0];if(r.it){var a=r.it[r.it.length-1];a.s&&(a.s.k[0]=e,a.s.k[1]=e)}}return t},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var t,e,r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r?r.l.length:0),r.fc?this.layerElement.setAttribute("fill",this.buildColor(r.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),r.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(r.sc)),this.layerElement.setAttribute("stroke-width",r.sw)),this.layerElement.setAttribute("font-size",r.finalSize);var a=this.globalData.fontManager.getFontByName(r.f);if(a.fClass)this.layerElement.setAttribute("class",a.fClass);else{this.layerElement.setAttribute("font-family",a.fFamily);var l=r.fWeight,u=r.fStyle;this.layerElement.setAttribute("font-style",u),this.layerElement.setAttribute("font-weight",l)}this.layerElement.setAttribute("aria-label",r.t);var d=r.l||[],g=!!this.globalData.fontManager.chars;e=d.length;var E,P=this.mHelper,Z="",me=this.data.singleShape,_e=0,He=0,Xe=!0,wt=r.tr*.001*r.finalSize;if(me&&!g&&!r.sz){var Do=this.textContainer,sr="start";switch(r.j){case 1:sr="end";break;case 2:sr="middle";break;default:sr="start";break}Do.setAttribute("text-anchor",sr),Do.setAttribute("letter-spacing",wt);var Ko=this.buildTextContents(r.finalText);for(e=Ko.length,He=r.ps?r.ps[1]+r.ascent:0,t=0;t<e;t+=1)E=this.textSpans[t].span||createNS("tspan"),E.textContent=Ko[t],E.setAttribute("x",0),E.setAttribute("y",He),E.style.display="inherit",Do.appendChild(E),this.textSpans[t]||(this.textSpans[t]={span:null,glyph:null}),this.textSpans[t].span=E,He+=r.finalLineHeight;this.layerElement.appendChild(Do)}else{var Bs=this.textSpans.length,th;for(t=0;t<e;t+=1){if(this.textSpans[t]||(this.textSpans[t]={span:null,childSpan:null,glyph:null}),!g||!me||t===0){if(E=Bs>t?this.textSpans[t].span:createNS(g?"g":"text"),Bs<=t){if(E.setAttribute("stroke-linecap","butt"),E.setAttribute("stroke-linejoin","round"),E.setAttribute("stroke-miterlimit","4"),this.textSpans[t].span=E,g){var pf=createNS("g");E.appendChild(pf),this.textSpans[t].childSpan=pf}this.textSpans[t].span=E,this.layerElement.appendChild(E)}E.style.display="inherit"}if(P.reset(),me&&(d[t].n&&(_e=-wt,He+=r.yOffset,He+=Xe?1:0,Xe=!1),this.applyTextPropertiesToMatrix(r,P,d[t].line,_e,He),_e+=d[t].l||0,_e+=wt),g){th=this.globalData.fontManager.getCharData(r.finalText[t],a.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily);var _h;if(th.t===1)_h=new SVGCompElement(th.data,this.globalData,this);else{var cf=emptyShapeData;th.data&&th.data.shapes&&(cf=this.buildShapeData(th.data,r.finalSize)),_h=new SVGShapeElement(cf,this.globalData,this)}if(this.textSpans[t].glyph){var df=this.textSpans[t].glyph;this.textSpans[t].childSpan.removeChild(df.layerElement),df.destroy()}this.textSpans[t].glyph=_h,_h._debug=!0,_h.prepareFrame(0),_h.renderFrame(),this.textSpans[t].childSpan.appendChild(_h.layerElement),th.t===1&&this.textSpans[t].childSpan.setAttribute("transform","scale("+r.finalSize/100+","+r.finalSize/100+")")}else me&&E.setAttribute("transform","translate("+P.props[12]+","+P.props[13]+")"),E.textContent=d[t].val,E.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}me&&E&&E.setAttribute("d",Z)}for(;t<this.textSpans.length;)this.textSpans[t].span.style.display="none",t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var t,e=this.textSpans.length,r;for(this.renderedFrame=this.comp.renderedFrame,t=0;t<e;t+=1)r=this.textSpans[t].glyph,r&&(r.prepareFrame(this.comp.renderedFrame-this.data.st),r._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var t,e,r=this.textAnimator.renderedLetters,a=this.textProperty.currentData.l;e=a.length;var l,u,d;for(t=0;t<e;t+=1)a[t].n||(l=r[t],u=this.textSpans[t].span,d=this.textSpans[t].glyph,d&&d.renderFrame(),l._mdf.m&&u.setAttribute("transform",l.m),l._mdf.o&&u.setAttribute("opacity",l.o),l._mdf.sw&&u.setAttribute("stroke-width",l.sw),l._mdf.sc&&u.setAttribute("stroke",l.sc),l._mdf.fc&&u.setAttribute("fill",l.fc))}};function ISolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)};function NullElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initFrame(),this.initTransform(t,e,r),this.initHierarchy()}NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRendererBase.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRendererBase.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRendererBase.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var r=createNS("clipPath"),a=createNS("rect");a.setAttribute("width",t.w),a.setAttribute("height",t.h),a.setAttribute("x",0),a.setAttribute("y",0);var l=createElementID();r.setAttribute("id",l),r.appendChild(a),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+l+")"),e.appendChild(r),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(t){var e=0,r=this.layers.length;for(e=0;e<r;e+=1)if(this.layers[e].ind===t)return e;return-1},SVGRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty===99)){e[t]=!0;var r=this.createItem(this.layers[t]);if(e[t]=r,getExpressionsPlugin()&&(this.layers[t].ty===0&&this.globalData.projectInterface.registerComposition(r),r.initExpressions()),this.appendElementInPos(r,t),this.layers[t].tt){var a="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(a===-1)return;if(!this.elements[a]||this.elements[a]===!0)this.buildItem(a),this.addPendingElement(r);else{var l=e[a],u=l.getMatte(this.layers[t].tt);r.setMatte(u)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,r=this.elements.length;e<r;){if(this.elements[e]===t){var a="tp"in t.data?this.findIndexByInd(t.data.tp):e-1,l=this.elements[a],u=l.getMatte(this.layers[e].tt);t.setMatte(u);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(t){if(!(this.renderedFrame===t||this.destroyed)){t===null?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var e,r=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=r-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<r;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(r){for(var a=0,l;a<e;)this.elements[a]&&this.elements[a]!==!0&&this.elements[a].getBaseElement()&&(l=this.elements[a].getBaseElement()),a+=1;l?this.layerElement.insertBefore(r,l):this.layerElement.appendChild(r)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initTransform(t,e,r),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!e.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var r,a=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),r=a-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&(this.elements[r].prepareFrame(this.renderedFrame-this.layers[r].st),this.elements[r]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(t,e,r){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)};function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var r="";if(e&&e.title){var a=createNS("title"),l=createElementID();a.setAttribute("id",l),a.textContent=e.title,this.svgElement.appendChild(a),r+=l}if(e&&e.description){var u=createNS("desc"),d=createElementID();u.setAttribute("id",d),u.textContent=e.description,this.svgElement.appendChild(u),r+=" "+d}r&&this.svgElement.setAttribute("aria-labelledby",r);var g=createNS("defs");this.svgElement.appendChild(g);var E=createNS("g");this.svgElement.appendChild(E),this.layerElement=E,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&e.hideOnTransparent===!1),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:g,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(e){var r,a=e.length,l="_";for(r=0;r<a;r+=1)l+=e[r].transform.key+"_";var u=this.sequences[l];return u||(u={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[l]=u,this.sequenceList.push(u)),u},processSequence:function(e,r){for(var a=0,l=e.transforms.length,u=r;a<l&&!r;){if(e.transforms[a].transform.mProps._mdf){u=!0;break}a+=1}if(u)for(e.finalTransform.reset(),a=l-1;a>=0;a-=1)e.finalTransform.multiply(e.transforms[a].transform.mProps.v);e._mdf=u},processSequences:function(e){var r,a=this.sequenceList.length;for(r=0;r<a;r+=1)this.processSequence(this.sequenceList[r],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",r=null,a=null,l=null;function u(){var E=createNS("svg"),P=createNS("filter"),Z=createNS("feColorMatrix");return P.setAttribute("id",e),Z.setAttribute("type","matrix"),Z.setAttribute("color-interpolation-filters","sRGB"),Z.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),P.appendChild(Z),E.appendChild(P),E.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(E.style.display="none"),E}function d(){r||(l=u(),document.body.appendChild(l),r=createTag("canvas"),a=r.getContext("2d"),a.filter="url(#"+e+")",a.fillStyle="rgba(0,0,0,0)",a.fillRect(0,0,1,1))}function g(E){return r||d(),r.width=E.width,r.height=E.height,a.filter="url(#"+e+")",r}return{load:d,get:g}};function createCanvas(t,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(t,e);var r=createTag("canvas");return r.width=t,r.height=e,r}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(t){var e,r=t.data.ef?t.data.ef.length:0;this.filters=[];var a;for(e=0;e<r;e+=1){a=null;var l=t.data.ef[e].ty;if(registeredEffects[l]){var u=registeredEffects[l].effect;a=new u(t.effectsManager.effectElements[e],t)}a&&this.filters.push(a)}this.filters.length&&t.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(t){var e,r=this.filters.length;for(e=0;e<r;e+=1)this.filters[e].renderFrame(t)},CVEffects.prototype.getEffects=function(t){var e,r=this.filters.length,a=[];for(e=0;e<r;e+=1)this.filters[e].type===t&&a.push(this.filters[e]);return a};function registerEffect(t,e){registeredEffects[t]={effect:e}}function CVMaskElement(t,e){this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r,a=this.masksProperties.length,l=!1;for(r=0;r<a;r+=1)this.masksProperties[r].mode!=="n"&&(l=!0),this.viewData[r]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[r],3);this.hasMasks=l,l&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t=this.element.finalTransform.mat,e=this.element.canvasContext,r,a=this.masksProperties.length,l,u,d;for(e.beginPath(),r=0;r<a;r+=1)if(this.masksProperties[r].mode!=="n"){this.masksProperties[r].inv&&(e.moveTo(0,0),e.lineTo(this.element.globalData.compSize.w,0),e.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),e.lineTo(0,this.element.globalData.compSize.h),e.lineTo(0,0)),d=this.viewData[r].v,l=t.applyToPointArray(d.v[0][0],d.v[0][1],0),e.moveTo(l[0],l[1]);var g,E=d._length;for(g=1;g<E;g+=1)u=t.applyToTriplePoints(d.o[g-1],d.i[g],d.v[g]),e.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5]);u=t.applyToTriplePoints(d.o[g-1],d.i[0],d.v[0]),e.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5])}this.element.globalData.renderer.save(!0),e.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,r=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(r);var a=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(a),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var r=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=r}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0],r=e.getContext("2d");this.clearCanvas(r),r.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],r=e.getContext("2d");this.clearCanvas(r),r.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var a=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(a.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var l=assetLoader.getLumaCanvas(this.canvasContext.canvas),u=l.getContext("2d");u.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(l,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var r=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(r),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(r),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(t,e,r,a){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var l=4;e.ty==="rc"?l=5:e.ty==="el"?l=6:e.ty==="sr"&&(l=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,l,t);var u,d=r.length,g;for(u=0;u<d;u+=1)r[u].closed||(g={transforms:a.addTransformSequence(r[u].transforms),trNodes:[]},this.styledShapes.push(g),r[u].elements.push(g))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var r={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:t.hd===!0},a={};if(t.ty==="fl"||t.ty==="st"?(a.c=PropertyFactory.getProp(this,t.c,1,255,this),a.c.k||(r.co="rgb("+bmFloor(a.c.v[0])+","+bmFloor(a.c.v[1])+","+bmFloor(a.c.v[2])+")")):(t.ty==="gf"||t.ty==="gs")&&(a.s=PropertyFactory.getProp(this,t.s,1,null,this),a.e=PropertyFactory.getProp(this,t.e,1,null,this),a.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),a.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),a.g=new GradientProperty(this,t.g,this)),a.o=PropertyFactory.getProp(this,t.o,0,.01,this),t.ty==="st"||t.ty==="gs"){if(r.lc=lineCapEnum[t.lc||2],r.lj=lineJoinEnum[t.lj||2],t.lj==1&&(r.ml=t.ml),a.w=PropertyFactory.getProp(this,t.w,0,null,this),a.w.k||(r.wi=a.w.v),t.d){var l=new DashProperty(this,t.d,"canvas",this);a.d=l,a.d.k||(r.da=a.d.dashArray,r.do=a.d.dashoffset[0])}}else r.r=t.r===2?"evenodd":"nonzero";return this.stylesList.push(r),a.style=r,a},CVShapeElement.prototype.createGroupElement=function(){var t={it:[],prevViewData:[]};return t},CVShapeElement.prototype.createTransformElement=function(t){var e={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}};return e},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,r=this.stylesList.length;for(e=0;e<r;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,r,a,l){var u,d=t.length-1,g,E,P=[],Z=[],me,_e,He,Xe=[].concat(l);for(u=d;u>=0;u-=1){if(me=this.searchProcessedElement(t[u]),me?e[u]=r[me-1]:t[u]._shouldRender=a,t[u].ty==="fl"||t[u].ty==="st"||t[u].ty==="gf"||t[u].ty==="gs")me?e[u].style.closed=!1:e[u]=this.createStyleElement(t[u],Xe),P.push(e[u].style);else if(t[u].ty==="gr"){if(!me)e[u]=this.createGroupElement(t[u]);else for(E=e[u].it.length,g=0;g<E;g+=1)e[u].prevViewData[g]=e[u].it[g];this.searchShapes(t[u].it,e[u].it,e[u].prevViewData,a,Xe)}else t[u].ty==="tr"?(me||(He=this.createTransformElement(t[u]),e[u]=He),Xe.push(e[u]),this.addTransformToStyleList(e[u])):t[u].ty==="sh"||t[u].ty==="rc"||t[u].ty==="el"||t[u].ty==="sr"?me||(e[u]=this.createShapeElement(t[u])):t[u].ty==="tm"||t[u].ty==="rd"||t[u].ty==="pb"||t[u].ty==="zz"||t[u].ty==="op"?(me?(_e=e[u],_e.closed=!1):(_e=ShapeModifiers.getModifier(t[u].ty),_e.init(this,t[u]),e[u]=_e,this.shapeModifiers.push(_e)),Z.push(_e)):t[u].ty==="rp"&&(me?(_e=e[u],_e.closed=!0):(_e=ShapeModifiers.getModifier(t[u].ty),e[u]=_e,_e.init(this,t,u,e),this.shapeModifiers.push(_e),a=!1),Z.push(_e));this.addProcessedElement(t[u],u+1)}for(this.removeTransformFromStyleList(),this.closeStyles(P),d=Z.length,u=0;u<d;u+=1)Z[u].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e=this.stylesList.length,r,a,l,u,d,g,E=this.globalData.renderer,P=this.globalData.canvasContext,Z,me;for(t=0;t<e;t+=1)if(me=this.stylesList[t],Z=me.type,!((Z==="st"||Z==="gs")&&me.wi===0||!me.data._shouldRender||me.coOp===0||this.globalData.currentGlobalAlpha===0)){for(E.save(),d=me.elements,Z==="st"||Z==="gs"?(E.ctxStrokeStyle(Z==="st"?me.co:me.grd),E.ctxLineWidth(me.wi),E.ctxLineCap(me.lc),E.ctxLineJoin(me.lj),E.ctxMiterLimit(me.ml||0)):E.ctxFillStyle(Z==="fl"?me.co:me.grd),E.ctxOpacity(me.coOp),Z!=="st"&&Z!=="gs"&&P.beginPath(),E.ctxTransform(me.preTransforms.finalTransform.props),a=d.length,r=0;r<a;r+=1){for((Z==="st"||Z==="gs")&&(P.beginPath(),me.da&&(P.setLineDash(me.da),P.lineDashOffset=me.do)),g=d[r].trNodes,u=g.length,l=0;l<u;l+=1)g[l].t==="m"?P.moveTo(g[l].p[0],g[l].p[1]):g[l].t==="c"?P.bezierCurveTo(g[l].pts[0],g[l].pts[1],g[l].pts[2],g[l].pts[3],g[l].pts[4],g[l].pts[5]):P.closePath();(Z==="st"||Z==="gs")&&(E.ctxStroke(),me.da&&P.setLineDash(this.dashResetter))}Z!=="st"&&Z!=="gs"&&this.globalData.renderer.ctxFill(me.r),E.restore()}},CVShapeElement.prototype.renderShape=function(t,e,r,a){var l,u=e.length-1,d;for(d=t,l=u;l>=0;l-=1)e[l].ty==="tr"?(d=r[l].transform,this.renderShapeTransform(t,d)):e[l].ty==="sh"||e[l].ty==="el"||e[l].ty==="rc"||e[l].ty==="sr"?this.renderPath(e[l],r[l]):e[l].ty==="fl"?this.renderFill(e[l],r[l],d):e[l].ty==="st"?this.renderStroke(e[l],r[l],d):e[l].ty==="gf"||e[l].ty==="gs"?this.renderGradientFill(e[l],r[l],d):e[l].ty==="gr"?this.renderShape(d,e[l].it,r[l].it):e[l].ty;a&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var r=t.trNodes,a=e.paths,l,u,d,g=a._length;r.length=0;var E=t.transforms.finalTransform;for(d=0;d<g;d+=1){var P=a.shapes[d];if(P&&P.v){for(u=P._length,l=1;l<u;l+=1)l===1&&r.push({t:"m",p:E.applyToPointArray(P.v[0][0],P.v[0][1],0)}),r.push({t:"c",pts:E.applyToTriplePoints(P.o[l-1],P.i[l],P.v[l])});u===1&&r.push({t:"m",p:E.applyToPointArray(P.v[0][0],P.v[0][1],0)}),P.c&&u&&(r.push({t:"c",pts:E.applyToTriplePoints(P.o[l-1],P.i[0],P.v[0])}),r.push({t:"z"}))}}t.trNodes=r}},CVShapeElement.prototype.renderPath=function(t,e){if(t.hd!==!0&&t._shouldRender){var r,a=e.styledShapes.length;for(r=0;r<a;r+=1)this.renderStyledShape(e.styledShapes[r],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,r){var a=e.style;(e.c._mdf||this._isFirstFrame)&&(a.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(a.coOp=e.o.v*r.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,r){var a=e.style,l;if(!a.grd||e.g._mdf||e.s._mdf||e.e._mdf||t.t!==1&&(e.h._mdf||e.a._mdf)){var u=this.globalData.canvasContext,d=e.s.v,g=e.e.v;if(t.t===1)l=u.createLinearGradient(d[0],d[1],g[0],g[1]);else{var E=Math.sqrt(Math.pow(d[0]-g[0],2)+Math.pow(d[1]-g[1],2)),P=Math.atan2(g[1]-d[1],g[0]-d[0]),Z=e.h.v;Z>=1?Z=.99:Z<=-1&&(Z=-.99);var me=E*Z,_e=Math.cos(P+e.a.v)*me+d[0],He=Math.sin(P+e.a.v)*me+d[1];l=u.createRadialGradient(_e,He,0,d[0],d[1],E)}var Xe,wt=t.g.p,Do=e.g.c,sr=1;for(Xe=0;Xe<wt;Xe+=1)e.g._hasOpacity&&e.g._collapsable&&(sr=e.g.o[Xe*2+1]),l.addColorStop(Do[Xe*4]/100,"rgba("+Do[Xe*4+1]+","+Do[Xe*4+2]+","+Do[Xe*4+3]+","+sr+")");a.grd=l}a.coOp=e.o.v*r.opacity},CVShapeElement.prototype.renderStroke=function(t,e,r){var a=e.style,l=e.d;l&&(l._mdf||this._isFirstFrame)&&(a.da=l.dashArray,a.do=l.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(a.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(a.coOp=e.o.v*r.opacity),(e.w._mdf||this._isFirstFrame)&&(a.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(t,e,r){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var r=!1;t.sc&&(r=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var a=this.globalData.fontManager.getFontByName(t.f),l,u,d=t.l,g=this.mHelper;this.stroke=r,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,u=t.finalText.length;var E,P,Z,me,_e,He,Xe,wt,Do,sr,Ko=this.data.singleShape,Bs=t.tr*.001*t.finalSize,th=0,pf=0,_h=!0,cf=0;for(l=0;l<u;l+=1){E=this.globalData.fontManager.getCharData(t.finalText[l],a.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),P=E&&E.data||{},g.reset(),Ko&&d[l].n&&(th=-Bs,pf+=t.yOffset,pf+=_h?1:0,_h=!1),_e=P.shapes?P.shapes[0].it:[],Xe=_e.length,g.scale(t.finalSize/100,t.finalSize/100),Ko&&this.applyTextPropertiesToMatrix(t,g,d[l].line,th,pf),Do=createSizedArray(Xe-1);var df=0;for(He=0;He<Xe;He+=1)if(_e[He].ty==="sh"){for(me=_e[He].ks.k.i.length,wt=_e[He].ks.k,sr=[],Z=1;Z<me;Z+=1)Z===1&&sr.push(g.applyToX(wt.v[0][0],wt.v[0][1],0),g.applyToY(wt.v[0][0],wt.v[0][1],0)),sr.push(g.applyToX(wt.o[Z-1][0],wt.o[Z-1][1],0),g.applyToY(wt.o[Z-1][0],wt.o[Z-1][1],0),g.applyToX(wt.i[Z][0],wt.i[Z][1],0),g.applyToY(wt.i[Z][0],wt.i[Z][1],0),g.applyToX(wt.v[Z][0],wt.v[Z][1],0),g.applyToY(wt.v[Z][0],wt.v[Z][1],0));sr.push(g.applyToX(wt.o[Z-1][0],wt.o[Z-1][1],0),g.applyToY(wt.o[Z-1][0],wt.o[Z-1][1],0),g.applyToX(wt.i[0][0],wt.i[0][1],0),g.applyToY(wt.i[0][0],wt.i[0][1],0),g.applyToX(wt.v[0][0],wt.v[0][1],0),g.applyToY(wt.v[0][0],wt.v[0][1],0)),Do[df]=sr,df+=1}Ko&&(th+=d[l].l,th+=Bs),this.textSpans[cf]?this.textSpans[cf].elem=Do:this.textSpans[cf]={elem:Do},cf+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var t=this.canvasContext;t.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var e,r,a,l,u,d,g=this.textAnimator.renderedLetters,E=this.textProperty.currentData.l;r=E.length;var P,Z=null,me=null,_e=null,He,Xe,wt=this.globalData.renderer;for(e=0;e<r;e+=1)if(!E[e].n){if(P=g[e],P&&(wt.save(),wt.ctxTransform(P.p),wt.ctxOpacity(P.o)),this.fill){for(P&&P.fc?Z!==P.fc&&(wt.ctxFillStyle(P.fc),Z=P.fc):Z!==this.values.fill&&(Z=this.values.fill,wt.ctxFillStyle(this.values.fill)),He=this.textSpans[e].elem,l=He.length,this.globalData.canvasContext.beginPath(),a=0;a<l;a+=1)for(Xe=He[a],d=Xe.length,this.globalData.canvasContext.moveTo(Xe[0],Xe[1]),u=2;u<d;u+=6)this.globalData.canvasContext.bezierCurveTo(Xe[u],Xe[u+1],Xe[u+2],Xe[u+3],Xe[u+4],Xe[u+5]);this.globalData.canvasContext.closePath(),wt.ctxFill()}if(this.stroke){for(P&&P.sw?_e!==P.sw&&(_e=P.sw,wt.ctxLineWidth(P.sw)):_e!==this.values.sWidth&&(_e=this.values.sWidth,wt.ctxLineWidth(this.values.sWidth)),P&&P.sc?me!==P.sc&&(me=P.sc,wt.ctxStrokeStyle(P.sc)):me!==this.values.stroke&&(me=this.values.stroke,wt.ctxStrokeStyle(this.values.stroke)),He=this.textSpans[e].elem,l=He.length,this.globalData.canvasContext.beginPath(),a=0;a<l;a+=1)for(Xe=He[a],d=Xe.length,this.globalData.canvasContext.moveTo(Xe[0],Xe[1]),u=2;u<d;u+=6)this.globalData.canvasContext.bezierCurveTo(Xe[u],Xe[u+1],Xe[u+2],Xe[u+3],Xe[u+4],Xe[u+5]);this.globalData.canvasContext.closePath(),wt.ctxStroke()}P&&this.globalData.renderer.restore()}};function CVImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e=t.getContext("2d"),r=this.img.width,a=this.img.height,l=r/a,u=this.assetData.w/this.assetData.h,d,g,E=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;l>u&&E==="xMidYMid slice"||l<u&&E!=="xMidYMid slice"?(g=a,d=g*u):(d=r,g=d/u),e.drawImage(this.img,(r-d)/2,(a-g)/2,d,g,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRendererBase.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(t){t[0]===1&&t[1]===0&&t[4]===0&&t[5]===1&&t[12]===0&&t[13]===0||this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRendererBase.prototype.ctxOpacity=function(t){this.canvasContext.globalAlpha*=t<0?0:t},CanvasRendererBase.prototype.ctxFillStyle=function(t){this.canvasContext.fillStyle=t},CanvasRendererBase.prototype.ctxStrokeStyle=function(t){this.canvasContext.strokeStyle=t},CanvasRendererBase.prototype.ctxLineWidth=function(t){this.canvasContext.lineWidth=t},CanvasRendererBase.prototype.ctxLineCap=function(t){this.canvasContext.lineCap=t},CanvasRendererBase.prototype.ctxLineJoin=function(t){this.canvasContext.lineJoin=t},CanvasRendererBase.prototype.ctxMiterLimit=function(t){this.canvasContext.miterLimit=t},CanvasRendererBase.prototype.ctxFill=function(t){this.canvasContext.fill(t)},CanvasRendererBase.prototype.ctxFillRect=function(t,e,r,a){this.canvasContext.fillRect(t,e,r,a)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(t){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}t&&(this.globalData.blendMode="source-over"),this.contextData.restore(t)},CanvasRendererBase.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var r="0px 0px 0px";e.transformOrigin=r,e.mozTransformOrigin=r,e.webkitTransformOrigin=r,e["-webkit-transform"]=r,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(t,e){this.reset();var r,a;t?(r=t,a=e,this.canvasContext.canvas.width=r,this.canvasContext.canvas.height=a):(this.animationItem.wrapper&&this.animationItem.container?(r=this.animationItem.wrapper.offsetWidth,a=this.animationItem.wrapper.offsetHeight):(r=this.canvasContext.canvas.width,a=this.canvasContext.canvas.height),this.canvasContext.canvas.width=r*this.renderConfig.dpr,this.canvasContext.canvas.height=a*this.renderConfig.dpr);var l,u;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var d=this.renderConfig.preserveAspectRatio.split(" "),g=d[1]||"meet",E=d[0]||"xMidYMid",P=E.substr(0,4),Z=E.substr(4);l=r/a,u=this.transformCanvas.w/this.transformCanvas.h,u>l&&g==="meet"||u<l&&g==="slice"?(this.transformCanvas.sx=r/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=a/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=a/(this.transformCanvas.h/this.renderConfig.dpr)),P==="xMid"&&(u<l&&g==="meet"||u>l&&g==="slice")?this.transformCanvas.tx=(r-this.transformCanvas.w*(a/this.transformCanvas.h))/2*this.renderConfig.dpr:P==="xMax"&&(u<l&&g==="meet"||u>l&&g==="slice")?this.transformCanvas.tx=(r-this.transformCanvas.w*(a/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Z==="YMid"&&(u>l&&g==="meet"||u<l&&g==="slice")?this.transformCanvas.ty=(a-this.transformCanvas.h*(r/this.transformCanvas.w))/2*this.renderConfig.dpr:Z==="YMax"&&(u>l&&g==="meet"||u<l&&g==="slice")?this.transformCanvas.ty=(a-this.transformCanvas.h*(r/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=r/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=a/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var t,e=this.layers?this.layers.length:0;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(t,e){if(!(this.renderedFrame===t&&this.renderConfig.clearCanvas===!0&&!e||this.destroyed||t===-1)){this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var r,a=this.layers.length;for(this.completeLayers||this.checkLayers(t),r=a-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(t-this.layers[r].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),r=a-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty===99)){var r=this.createItem(this.layers[t],this,this.globalData);e[t]=r,r.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var t,e=15;for(t=0;t<e;t+=1){var r=new CanvasContext;this.stack[t]=r}this._length=e,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var t=this._length*2,e=0;for(e=this._length;e<t;e+=1)this.stack[e]=new CanvasContext;this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(t){this.cArrPos-=1;var e=this.stack[this.cArrPos],r=e.transform,a,l=this.cTr.props;for(a=0;a<16;a+=1)l[a]=r[a];if(t){this.nativeContext.restore();var u=this.stack[this.cArrPos+1];this.appliedFillStyle=u.fillStyle,this.appliedStrokeStyle=u.strokeStyle,this.appliedLineWidth=u.lineWidth,this.appliedLineCap=u.lineCap,this.appliedLineJoin=u.lineJoin,this.appliedMiterLimit=u.miterLimit}this.nativeContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),(t||e.opacity!==-1&&this.currentOpacity!==e.opacity)&&(this.nativeContext.globalAlpha=e.opacity,this.currentOpacity=e.opacity),this.currentFillStyle=e.fillStyle,this.currentStrokeStyle=e.strokeStyle,this.currentLineWidth=e.lineWidth,this.currentLineCap=e.lineCap,this.currentLineJoin=e.lineJoin,this.currentMiterLimit=e.miterLimit},CVContextData.prototype.save=function(t){t&&this.nativeContext.save();var e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var r=this.stack[this.cArrPos],a;for(a=0;a<16;a+=1)r.transform[a]=e[a];this.cArrPos+=1;var l=this.stack[this.cArrPos];l.opacity=r.opacity,l.fillStyle=r.fillStyle,l.strokeStyle=r.strokeStyle,l.lineWidth=r.lineWidth,l.lineCap=r.lineCap,l.lineJoin=r.lineJoin,l.miterLimit=r.miterLimit},CVContextData.prototype.setOpacity=function(t){this.stack[this.cArrPos].opacity=t},CVContextData.prototype.setContext=function(t){this.nativeContext=t},CVContextData.prototype.fillStyle=function(t){this.stack[this.cArrPos].fillStyle!==t&&(this.currentFillStyle=t,this.stack[this.cArrPos].fillStyle=t)},CVContextData.prototype.strokeStyle=function(t){this.stack[this.cArrPos].strokeStyle!==t&&(this.currentStrokeStyle=t,this.stack[this.cArrPos].strokeStyle=t)},CVContextData.prototype.lineWidth=function(t){this.stack[this.cArrPos].lineWidth!==t&&(this.currentLineWidth=t,this.stack[this.cArrPos].lineWidth=t)},CVContextData.prototype.lineCap=function(t){this.stack[this.cArrPos].lineCap!==t&&(this.currentLineCap=t,this.stack[this.cArrPos].lineCap=t)},CVContextData.prototype.lineJoin=function(t){this.stack[this.cArrPos].lineJoin!==t&&(this.currentLineJoin=t,this.stack[this.cArrPos].lineJoin=t)},CVContextData.prototype.miterLimit=function(t){this.stack[this.cArrPos].miterLimit!==t&&(this.currentMiterLimit=t,this.stack[this.cArrPos].miterLimit=t)},CVContextData.prototype.transform=function(t){this.transformMat.cloneFromProps(t);var e=this.cTr;this.transformMat.multiply(e),e.cloneFromProps(this.transformMat.props);var r=e.props;this.nativeContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13])},CVContextData.prototype.opacity=function(t){var e=this.stack[this.cArrPos].opacity;e*=t<0?0:t,this.stack[this.cArrPos].opacity!==e&&(this.currentOpacity!==t&&(this.nativeContext.globalAlpha=t,this.currentOpacity=t),this.stack[this.cArrPos].opacity=e)},CVContextData.prototype.fill=function(t){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(t)},CVContextData.prototype.fillRect=function(t,e,r,a){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(t,e,r,a)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(t,e,r){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip();var e,r=this.layers.length;for(e=r-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var t,e=this.layers.length;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)};function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:e&&e.clearCanvas!==void 0?e.clearCanvas:!0,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var r=this.finalTransform.mat.toCSS();e.transform=r,e.webkitTransform=r}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?(t=createNS("rect"),t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(t=createTag("div"),t.style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)};function HShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,r),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var r,a=t.length;for(r=0;r<a;r+=1)e=t[r].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var r=t.sh.v,a=t.transformers,l,u=r._length,d,g,E,P;if(!(u<=1)){for(l=0;l<u-1;l+=1)d=this.getTransformedPoint(a,r.v[l]),g=this.getTransformedPoint(a,r.o[l]),E=this.getTransformedPoint(a,r.i[l+1]),P=this.getTransformedPoint(a,r.v[l+1]),this.checkBounds(d,g,E,P,e);r.c&&(d=this.getTransformedPoint(a,r.v[l]),g=this.getTransformedPoint(a,r.o[l]),E=this.getTransformedPoint(a,r.i[0]),P=this.getTransformedPoint(a,r.v[0]),this.checkBounds(d,g,E,P,e))}},HShapeElement.prototype.checkBounds=function(t,e,r,a,l){this.getBoundsOfCurve(t,e,r,a);var u=this.shapeBoundingBox;l.x=bmMin(u.left,l.x),l.xMax=bmMax(u.right,l.xMax),l.y=bmMin(u.top,l.y),l.yMax=bmMax(u.bottom,l.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,r,a){for(var l=[[t[0],a[0]],[t[1],a[1]]],u,d,g,E,P,Z,me,_e=0;_e<2;++_e)d=6*t[_e]-12*e[_e]+6*r[_e],u=-3*t[_e]+9*e[_e]-9*r[_e]+3*a[_e],g=3*e[_e]-3*t[_e],d|=0,u|=0,g|=0,u===0&&d===0||(u===0?(E=-g/d,E>0&&E<1&&l[_e].push(this.calculateF(E,t,e,r,a,_e))):(P=d*d-4*g*u,P>=0&&(Z=(-d+bmSqrt(P))/(2*u),Z>0&&Z<1&&l[_e].push(this.calculateF(Z,t,e,r,a,_e)),me=(-d-bmSqrt(P))/(2*u),me>0&&me<1&&l[_e].push(this.calculateF(me,t,e,r,a,_e)))));this.shapeBoundingBox.left=bmMin.apply(null,l[0]),this.shapeBoundingBox.top=bmMin.apply(null,l[1]),this.shapeBoundingBox.right=bmMax.apply(null,l[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,l[1])},HShapeElement.prototype.calculateF=function(t,e,r,a,l,u){return bmPow(1-t,3)*e[u]+3*bmPow(1-t,2)*t*r[u]+3*(1-t)*bmPow(t,2)*a[u]+bmPow(t,3)*l[u]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var r,a=t.length;for(r=0;r<a;r+=1)t[r]&&t[r].sh?this.calculateShapeBoundingBox(t[r],e):t[r]&&t[r].it?this.calculateBoundingBox(t[r].it,e):t[r]&&t[r].style&&t[r].w&&this.expandStrokeBoundingBox(t[r].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(t,e){var r=0;if(t.keyframes){for(var a=0;a<t.keyframes.length;a+=1){var l=t.keyframes[a].s;l>r&&(r=l)}r*=t.mult}else r=t.v*t.mult;e.x-=r,e.xMax+=r,e.y-=r,e.yMax+=r},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var r=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),r=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),r=!0),r||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var a=this.shapeCont.style,l="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";a.transform=l,a.webkitTransform=l}}};function HTextElement(t,e,r){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,r=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=r,e.color=r,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var a=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",a.fClass)this.innerElem.className=a.fClass;else{e.fontFamily=a.fFamily;var l=t.fWeight,u=t.fStyle;e.fontStyle=u,e.fontWeight=l}var d,g,E=t.l;g=E.length;var P,Z,me,_e=this.mHelper,He,Xe="",wt=0;for(d=0;d<g;d+=1){if(this.globalData.fontManager.chars?(this.textPaths[wt]?P=this.textPaths[wt]:(P=createNS("path"),P.setAttribute("stroke-linecap",lineCapEnum[1]),P.setAttribute("stroke-linejoin",lineJoinEnum[2]),P.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[wt]?(Z=this.textSpans[wt],me=Z.children[0]):(Z=createTag("div"),Z.style.lineHeight=0,me=createNS("svg"),me.appendChild(P),styleDiv(Z)))):this.isMasked?P=this.textPaths[wt]?this.textPaths[wt]:createNS("text"):this.textSpans[wt]?(Z=this.textSpans[wt],P=this.textPaths[wt]):(Z=createTag("span"),styleDiv(Z),P=createTag("span"),styleDiv(P),Z.appendChild(P)),this.globalData.fontManager.chars){var Do=this.globalData.fontManager.getCharData(t.finalText[d],a.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),sr;if(Do?sr=Do.data:sr=null,_e.reset(),sr&&sr.shapes&&sr.shapes.length&&(He=sr.shapes[0].it,_e.scale(t.finalSize/100,t.finalSize/100),Xe=this.createPathShape(_e,He),P.setAttribute("d",Xe)),this.isMasked)this.innerElem.appendChild(P);else{if(this.innerElem.appendChild(Z),sr&&sr.shapes){document.body.appendChild(me);var Ko=me.getBBox();me.setAttribute("width",Ko.width+2),me.setAttribute("height",Ko.height+2),me.setAttribute("viewBox",Ko.x-1+" "+(Ko.y-1)+" "+(Ko.width+2)+" "+(Ko.height+2));var Bs=me.style,th="translate("+(Ko.x-1)+"px,"+(Ko.y-1)+"px)";Bs.transform=th,Bs.webkitTransform=th,E[d].yOffset=Ko.y-1}else me.setAttribute("width",1),me.setAttribute("height",1);Z.appendChild(me)}}else if(P.textContent=E[d].val,P.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(P);else{this.innerElem.appendChild(Z);var pf=P.style,_h="translate3d(0,"+-t.finalSize/1.2+"px,0)";pf.transform=_h,pf.webkitTransform=_h}this.isMasked?this.textSpans[wt]=P:this.textSpans[wt]=Z,this.textSpans[wt].style.display="block",this.textPaths[wt]=P,wt+=1}for(;wt<this.textSpans.length;)this.textSpans[wt].style.display="none",wt+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var t;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";t.transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var r,a,l=0,u=this.textAnimator.renderedLetters,d=this.textProperty.currentData.l;a=d.length;var g,E,P;for(r=0;r<a;r+=1)d[r].n?l+=1:(E=this.textSpans[r],P=this.textPaths[r],g=u[l],l+=1,g._mdf.m&&(this.isMasked?E.setAttribute("transform",g.m):(E.style.webkitTransform=g.m,E.style.transform=g.m)),E.style.opacity=g.o,g.sw&&g._mdf.sw&&P.setAttribute("stroke-width",g.sw),g.sc&&g._mdf.sc&&P.setAttribute("stroke",g.sc),g.fc&&g._mdf.fc&&(P.setAttribute("fill",g.fc),P.style.color=g.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Z=this.innerElem.getBBox();this.currentBBox.w!==Z.width&&(this.currentBBox.w=Z.width,this.svgElement.setAttribute("width",Z.width)),this.currentBBox.h!==Z.height&&(this.currentBBox.h=Z.height,this.svgElement.setAttribute("height",Z.height));var me=1;if(this.currentBBox.w!==Z.width+me*2||this.currentBBox.h!==Z.height+me*2||this.currentBBox.x!==Z.x-me||this.currentBBox.y!==Z.y-me){this.currentBBox.w=Z.width+me*2,this.currentBBox.h=Z.height+me*2,this.currentBBox.x=Z.x-me,this.currentBBox.y=Z.y-me,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style;var _e="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=_e,t.webkitTransform=_e}}}};function HCameraElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initHierarchy();var a=PropertyFactory.getProp;if(this.pe=a(this,t.pe,0,0,this),t.ks.p.s?(this.px=a(this,t.ks.p.x,1,0,this),this.py=a(this,t.ks.p.y,1,0,this),this.pz=a(this,t.ks.p.z,1,0,this)):this.p=a(this,t.ks.p,1,0,this),t.ks.a&&(this.a=a(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var l,u=t.ks.or.k.length;for(l=0;l<u;l+=1)t.ks.or.k[l].to=null,t.ks.or.k[l].ti=null}this.or=a(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=a(this,t.ks.rx,0,degToRads,this),this.ry=a(this,t.ks.ry,0,degToRads,this),this.rz=a(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e=this.comp.threeDElements.length,r,a,l;for(t=0;t<e;t+=1)if(r=this.comp.threeDElements[t],r.type==="3d"){a=r.perspectiveElem.style,l=r.container.style;var u=this.pe.v+"px",d="0px 0px 0px",g="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";a.perspective=u,a.webkitPerspective=u,l.transformOrigin=d,l.mozTransformOrigin=d,l.webkitTransformOrigin=d,a.transform=g,a.webkitTransform=g}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t=this._isFirstFrame,e,r;if(this.hierarchy)for(r=this.hierarchy.length,e=0;e<r;e+=1)t=this.hierarchy[e].finalTransform.mProp._mdf||t;if(t||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(r=this.hierarchy.length-1,e=r;e>=0;e-=1){var a=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-a.p.v[0],-a.p.v[1],a.p.v[2]),this.mat.rotateX(-a.or.v[0]).rotateY(-a.or.v[1]).rotateZ(a.or.v[2]),this.mat.rotateX(-a.rx.v).rotateY(-a.ry.v).rotateZ(a.rz.v),this.mat.scale(1/a.s.v[0],1/a.s.v[1],1/a.s.v[2]),this.mat.translate(a.a.v[0],a.a.v[1],a.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var l;this.p?l=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:l=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var u=Math.sqrt(Math.pow(l[0],2)+Math.pow(l[1],2)+Math.pow(l[2],2)),d=[l[0]/u,l[1]/u,l[2]/u],g=Math.sqrt(d[2]*d[2]+d[0]*d[0]),E=Math.atan2(d[1],g),P=Math.atan2(d[0],-d[2]);this.mat.rotateY(P).rotateX(-E)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Z=!this._prevMat.equals(this.mat);if((Z||this.pe._mdf)&&this.comp.threeDElements){r=this.comp.threeDElements.length;var me,_e,He;for(e=0;e<r;e+=1)if(me=this.comp.threeDElements[e],me.type==="3d"){if(Z){var Xe=this.mat.toCSS();He=me.container.style,He.transform=Xe,He.webkitTransform=Xe}this.pe._mdf&&(_e=me.perspectiveElem.style,_e.perspective=this.pe.v+"px",_e.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(r){var a=this.layers[e];if(!a.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(r,e);else{for(var l=0,u,d,g;l<e;)this.elements[l]&&this.elements[l]!==!0&&this.elements[l].getBaseElement&&(d=this.elements[l],g=this.layers[l].ddd?this.getThreeDContainerByPos(l):d.getBaseElement(),u=g||u),l+=1;u?(!a.ddd||!this.supports3d)&&this.layerElement.insertBefore(r,u):(!a.ddd||!this.supports3d)&&this.layerElement.appendChild(r)}else this.addTo3dContainer(r,e)}},HybridRendererBase.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRendererBase.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(t){for(var e=0,r=this.threeDElements.length;e<r;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(t,e){var r=createTag("div"),a,l;styleDiv(r);var u=createTag("div");if(styleDiv(u),e==="3d"){a=r.style,a.width=this.globalData.compSize.w+"px",a.height=this.globalData.compSize.h+"px";var d="50% 50%";a.webkitTransformOrigin=d,a.mozTransformOrigin=d,a.transformOrigin=d,l=u.style;var g="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";l.transform=g,l.webkitTransform=g}r.appendChild(u);var E={container:u,perspectiveElem:r,startPos:t,endPos:t,type:e};return this.threeDElements.push(E),E},HybridRendererBase.prototype.build3dContainers=function(){var t,e=this.layers.length,r,a="";for(t=0;t<e;t+=1)this.layers[t].ddd&&this.layers[t].ty!==3?(a!=="3d"&&(a="3d",r=this.createThreeDContainer(t,"3d")),r.endPos=Math.max(r.endPos,t)):(a!=="2d"&&(a="2d",r=this.createThreeDContainer(t,"2d")),r.endPos=Math.max(r.endPos,t));for(e=this.threeDElements.length,t=e-1;t>=0;t-=1)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(t,e){for(var r=0,a=this.threeDElements.length;r<a;){if(e<=this.threeDElements[r].endPos){for(var l=this.threeDElements[r].startPos,u;l<e;)this.elements[l]&&this.elements[l].getBaseElement&&(u=this.elements[l].getBaseElement()),l+=1;u?this.threeDElements[r].container.insertBefore(t,u):this.threeDElements[r].container.appendChild(t);break}r+=1}},HybridRendererBase.prototype.configAnimation=function(t){var e=createTag("div"),r=this.animationItem.wrapper,a=e.style;a.width=t.w+"px",a.height=t.h+"px",this.resizerElem=e,styleDiv(e),a.transformStyle="flat",a.mozTransformStyle="flat",a.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),r.appendChild(e),a.overflow="hidden";var l=createNS("svg");l.setAttribute("width","1"),l.setAttribute("height","1"),styleDiv(l),this.resizerElem.appendChild(l);var u=createNS("defs");l.appendChild(u),this.data=t,this.setupGlobalData(t,l),this.globalData.defs=u,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,r=t/e,a=this.globalData.compSize.w/this.globalData.compSize.h,l,u,d,g;a>r?(l=t/this.globalData.compSize.w,u=t/this.globalData.compSize.w,d=0,g=(e-this.globalData.compSize.h*(t/this.globalData.compSize.w))/2):(l=e/this.globalData.compSize.h,u=e/this.globalData.compSize.h,d=(t-this.globalData.compSize.w*(e/this.globalData.compSize.h))/2,g=0);var E=this.resizerElem.style;E.webkitTransform="matrix3d("+l+",0,0,0,0,"+u+",0,0,0,0,1,0,"+d+","+g+",0,1)",E.transform=E.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t=this.globalData.compSize.w,e=this.globalData.compSize.h,r,a=this.threeDElements.length;for(r=0;r<a;r+=1){var l=this.threeDElements[r].perspectiveElem.style;l.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))+"px",l.perspective=l.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(t){var e,r=t.length,a=createTag("div");for(e=0;e<r;e+=1)if(t[e].xt){var l=this.createComp(t[e],a,this.globalData.comp,null);l.initExpressions(),this.globalData.projectInterface.registerComposition(l)}};function HCompElement(t,e,r){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var r=0,a;r<e;)this.elements[r]&&this.elements[r].getBaseElement&&(a=this.elements[r].getBaseElement()),r+=1;a?this.layerElement.insertBefore(t,a):this.layerElement.appendChild(t)},HCompElement.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};var CompExpressionInterface=function(){return function(t){function e(r){for(var a=0,l=t.layers.length;a<l;){if(t.layers[a].nm===r||t.layers[a].ind===r)return t.elements[a].layerInterface;a+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e}}();function _typeof$2(t){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(t)}function seedRandom(t,e){var r=this,a=256,l=6,u=52,d="random",g=e.pow(a,l),E=e.pow(2,u),P=E*2,Z=a-1,me;function _e(Bs,th,pf){var _h=[];th=th===!0?{entropy:!0}:th||{};var cf=Do(wt(th.entropy?[Bs,Ko(t)]:Bs===null?sr():Bs,3),_h),df=new He(_h),uf=function(){for(var Vc=df.g(l),Rs=g,qc=0;Vc<E;)Vc=(Vc+qc)*a,Rs*=a,qc=df.g(1);for(;Vc>=P;)Vc/=2,Rs/=2,qc>>>=1;return(Vc+qc)/Rs};return uf.int32=function(){return df.g(4)|0},uf.quick=function(){return df.g(4)/4294967296},uf.double=uf,Do(Ko(df.S),t),(th.pass||pf||function(li,Vc,Rs,qc){return qc&&(qc.S&&Xe(qc,df),li.state=function(){return Xe(df,{})}),Rs?(e[d]=li,Vc):li})(uf,cf,"global"in th?th.global:this==e,th.state)}e["seed"+d]=_e;function He(Bs){var th,pf=Bs.length,_h=this,cf=0,df=_h.i=_h.j=0,uf=_h.S=[];for(pf||(Bs=[pf++]);cf<a;)uf[cf]=cf++;for(cf=0;cf<a;cf++)uf[cf]=uf[df=Z&df+Bs[cf%pf]+(th=uf[cf])],uf[df]=th;_h.g=function(li){for(var Vc,Rs=0,qc=_h.i,Qp=_h.j,n1=_h.S;li--;)Vc=n1[qc=Z&qc+1],Rs=Rs*a+n1[Z&(n1[qc]=n1[Qp=Z&Qp+Vc])+(n1[Qp]=Vc)];return _h.i=qc,_h.j=Qp,Rs}}function Xe(Bs,th){return th.i=Bs.i,th.j=Bs.j,th.S=Bs.S.slice(),th}function wt(Bs,th){var pf=[],_h=_typeof$2(Bs),cf;if(th&&_h=="object")for(cf in Bs)try{pf.push(wt(Bs[cf],th-1))}catch{}return pf.length?pf:_h=="string"?Bs:Bs+"\0"}function Do(Bs,th){for(var pf=Bs+"",_h,cf=0;cf<pf.length;)th[Z&cf]=Z&(_h^=th[Z&cf]*19)+pf.charCodeAt(cf++);return Ko(th)}function sr(){try{var Bs=new Uint8Array(a);return(r.crypto||r.msCrypto).getRandomValues(Bs),Ko(Bs)}catch{var th=r.navigator,pf=th&&th.plugins;return[+new Date,r,pf,r.screen,Ko(t)]}}function Ko(Bs){return String.fromCharCode.apply(0,Bs)}Do(e.random(),t)}function initialize$2(t){seedRandom([],t)}var propTypes={SHAPE:"shape"};function _typeof$1(t){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(t)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return t==="number"||e instanceof Number||t==="boolean"||t==="string"}function $bm_neg(t){var e=_typeof$1(t);if(e==="number"||t instanceof Number||e==="boolean")return-t;if($bm_isInstanceOfArray(t)){var r,a=t.length,l=[];for(r=0;r<a;r+=1)l[r]=-t[r];return l}return t.propType?t.v:-t}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var r=_typeof$1(t),a=_typeof$1(e);if(isNumerable(r,t)&&isNumerable(a,e)||r==="string"||a==="string")return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e))return t=t.slice(0),t[0]+=e,t;if(isNumerable(r,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var l=0,u=t.length,d=e.length,g=[];l<u||l<d;)(typeof t[l]=="number"||t[l]instanceof Number)&&(typeof e[l]=="number"||e[l]instanceof Number)?g[l]=t[l]+e[l]:g[l]=e[l]===void 0?t[l]:t[l]||e[l],l+=1;return g}return 0}var add=sum;function sub(t,e){var r=_typeof$1(t),a=_typeof$1(e);if(isNumerable(r,t)&&isNumerable(a,e))return r==="string"&&(t=parseInt(t,10)),a==="string"&&(e=parseInt(e,10)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e))return t=t.slice(0),t[0]-=e,t;if(isNumerable(r,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var l=0,u=t.length,d=e.length,g=[];l<u||l<d;)(typeof t[l]=="number"||t[l]instanceof Number)&&(typeof e[l]=="number"||e[l]instanceof Number)?g[l]=t[l]-e[l]:g[l]=e[l]===void 0?t[l]:t[l]||e[l],l+=1;return g}return 0}function mul(t,e){var r=_typeof$1(t),a=_typeof$1(e),l;if(isNumerable(r,t)&&isNumerable(a,e))return t*e;var u,d;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(d=t.length,l=createTypedArray("float32",d),u=0;u<d;u+=1)l[u]=t[u]*e;return l}if(isNumerable(r,t)&&$bm_isInstanceOfArray(e)){for(d=e.length,l=createTypedArray("float32",d),u=0;u<d;u+=1)l[u]=t*e[u];return l}return 0}function div(t,e){var r=_typeof$1(t),a=_typeof$1(e),l;if(isNumerable(r,t)&&isNumerable(a,e))return t/e;var u,d;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(d=t.length,l=createTypedArray("float32",d),u=0;u<d;u+=1)l[u]=t[u]/e;return l}if(isNumerable(r,t)&&$bm_isInstanceOfArray(e)){for(d=e.length,l=createTypedArray("float32",d),u=0;u<d;u+=1)l[u]=t/e[u];return l}return 0}function mod(t,e){return typeof t=="string"&&(t=parseInt(t,10)),typeof e=="string"&&(e=parseInt(e,10)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,r){if(e>r){var a=r;r=e,e=a}return Math.min(Math.max(t,e),r)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if(typeof t=="number"||t instanceof Number)return e=e||0,Math.abs(t-e);e||(e=helperLengthArray);var r,a=Math.min(t.length,e.length),l=0;for(r=0;r<a;r+=1)l+=Math.pow(e[r]-t[r],2);return Math.sqrt(l)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e=t[0],r=t[1],a=t[2],l=Math.max(e,r,a),u=Math.min(e,r,a),d,g,E=(l+u)/2;if(l===u)d=0,g=0;else{var P=l-u;switch(g=E>.5?P/(2-l-u):P/(l+u),l){case e:d=(r-a)/P+(r<a?6:0);break;case r:d=(a-e)/P+2;break;case a:d=(e-r)/P+4;break}d/=6}return[d,g,E,t[3]]}function hue2rgb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function hslToRgb(t){var e=t[0],r=t[1],a=t[2],l,u,d;if(r===0)l=a,d=a,u=a;else{var g=a<.5?a*(1+r):a+r-a*r,E=2*a-g;l=hue2rgb(E,g,e+1/3),u=hue2rgb(E,g,e),d=hue2rgb(E,g,e-1/3)}return[l,u,d,t[3]]}function linear(t,e,r,a,l){if((a===void 0||l===void 0)&&(a=e,l=r,e=0,r=1),r<e){var u=r;r=e,e=u}if(t<=e)return a;if(t>=r)return l;var d=r===e?0:(t-e)/(r-e);if(!a.length)return a+(l-a)*d;var g,E=a.length,P=createTypedArray("float32",E);for(g=0;g<E;g+=1)P[g]=a[g]+(l[g]-a[g])*d;return P}function random(t,e){if(e===void 0&&(t===void 0?(t=0,e=1):(e=t,t=void 0)),e.length){var r,a=e.length;t||(t=createTypedArray("float32",a));var l=createTypedArray("float32",a),u=BMMath.random();for(r=0;r<a;r+=1)l[r]=t[r]+u*(e[r]-t[r]);return l}t===void 0&&(t=0);var d=BMMath.random();return t+d*(e-t)}function createPath(t,e,r,a){var l,u=t.length,d=shapePool.newElement();d.setPathData(!!a,u);var g=[0,0],E,P;for(l=0;l<u;l+=1)E=e&&e[l]?e[l]:g,P=r&&r[l]?r[l]:g,d.setTripleAt(t[l][0],t[l][1],P[0]+t[l][0],P[1]+t[l][1],E[0]+t[l][0],E[1]+t[l][1],l,!0);return d}function initiateExpression(elem,data,property){function noOp(t){return t}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function t(e,r){var a,l,u=this.pv.length?this.pv.length:1,d=createTypedArray("float32",u);e=5;var g=Math.floor(time*e);for(a=0,l=0;a<g;){for(l=0;l<u;l+=1)d[l]+=-r+r*2*BMMath.random();a+=1}var E=time*e,P=E-Math.floor(E),Z=createTypedArray("float32",u);if(u>1){for(l=0;l<u;l+=1)Z[l]=this.pv[l]+d[l]+(-r+r*2*BMMath.random())*P;return Z}return this.pv+d[0]+(-r+r*2*BMMath.random())*P}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(t,e){var r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],a=Math.atan2(r[0],Math.sqrt(r[1]*r[1]+r[2]*r[2]))/degToRads,l=-Math.atan2(r[1],r[2])/degToRads;return[l,a,0]}function easeOut(t,e,r,a,l){return applyEase(easeOutBez,t,e,r,a,l)}function easeIn(t,e,r,a,l){return applyEase(easeInBez,t,e,r,a,l)}function ease(t,e,r,a,l){return applyEase(easeInOutBez,t,e,r,a,l)}function applyEase(t,e,r,a,l,u){l===void 0?(l=r,u=a):e=(e-r)/(a-r),e>1?e=1:e<0&&(e=0);var d=t(e);if($bm_isInstanceOfArray(l)){var g,E=l.length,P=createTypedArray("float32",E);for(g=0;g<E;g+=1)P[g]=(u[g]-l[g])*d+l[g];return P}return(u-l)*d+l}function nearestKey(t){var e,r=data.k.length,a,l;if(!data.k.length||typeof data.k[0]=="number")a=0,l=0;else if(a=-1,t*=elem.comp.globalData.frameRate,t<data.k[0].t)a=1,l=data.k[0].t;else{for(e=0;e<r-1;e+=1)if(t===data.k[e].t){a=e+1,l=data.k[e].t;break}else if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(a=e+2,l=data.k[e+1].t):(a=e+1,l=data.k[e].t);break}a===-1&&(a=e+1,l=data.k[e].t)}var u={};return u.index=a,u.time=l/elem.comp.globalData.frameRate,u}function key(t){var e,r,a;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var l=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(a=l.length,r=0;r<a;r+=1)e[r]=l[r],e.value[r]=l[r];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return!t&&t!==0&&(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return typeof value=="string"?e===void 0?value.substring(t):value.substring(t,e):""}function substr(t,e){return typeof value=="string"?e===void 0?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=t===0?0:Math.floor(time*t)/t,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(t){return value=t,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var t={};t.initExpressions=e,t.resetFrame=ExpressionManager.resetFrame;function e(r){var a=0,l=[];function u(){a+=1}function d(){a-=1,a===0&&E()}function g(P){l.indexOf(P)===-1&&l.push(P)}function E(){var P,Z=l.length;for(P=0;P<Z;P+=1)l[P].release();l.length=0}r.renderer.compInterface=CompExpressionInterface(r.renderer),r.renderer.globalData.projectInterface.registerComposition(r.renderer),r.renderer.globalData.pushExpression=u,r.renderer.globalData.popExpression=d,r.renderer.globalData.registerExpressionProperty=g}return t}(),MaskManagerInterface=function(){function t(r,a){this._mask=r,this._data=a}Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var e=function(a){var l=createSizedArray(a.viewData.length),u,d=a.viewData.length;for(u=0;u<d;u+=1)l[u]=new t(a.viewData[u],a.masksProperties[u]);var g=function(P){for(u=0;u<d;){if(a.masksProperties[u].nm===P)return l[u];u+=1}return null};return g};return e}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function r(d,g,E){Object.defineProperty(d,"velocity",{get:function(){return g.getVelocityAtTime(g.comp.currentFrame)}}),d.numKeys=g.keyframes?g.keyframes.length:0,d.key=function(P){if(!d.numKeys)return 0;var Z="";"s"in g.keyframes[P-1]?Z=g.keyframes[P-1].s:"e"in g.keyframes[P-2]?Z=g.keyframes[P-2].e:Z=g.keyframes[P-2].s;var me=E==="unidimensional"?new Number(Z):Object.assign({},Z);return me.time=g.keyframes[P-1].t/g.elem.comp.globalData.frameRate,me.value=E==="unidimensional"?Z[0]:Z,me},d.valueAtTime=g.getValueAtTime,d.speedAtTime=g.getSpeedAtTime,d.velocityAtTime=g.getVelocityAtTime,d.propertyGroup=g.propertyGroup}function a(d){(!d||!("pv"in d))&&(d=t);var g=1/d.mult,E=d.pv*g,P=new Number(E);return P.value=E,r(P,d,"unidimensional"),function(){return d.k&&d.getValue(),E=d.v*g,P.value!==E&&(P=new Number(E),P.value=E,P[0]=E,r(P,d,"unidimensional")),P}}function l(d){(!d||!("pv"in d))&&(d=e);var g=1/d.mult,E=d.data&&d.data.l||d.pv.length,P=createTypedArray("float32",E),Z=createTypedArray("float32",E);return P.value=Z,r(P,d,"multidimensional"),function(){d.k&&d.getValue();for(var me=0;me<E;me+=1)Z[me]=d.v[me]*g,P[me]=Z[me];return P}}function u(){return t}return function(d){return d?d.propType==="unidimensional"?a(d):l(d):u}}(),TransformExpressionInterface=function(){return function(t){function e(d){switch(d){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)});var r,a,l,u;return t.p?u=ExpressionPropertyInterface(t.p):(r=ExpressionPropertyInterface(t.px),a=ExpressionPropertyInterface(t.py),t.pz&&(l=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?u():[r(),a(),l?l():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e}}(),LayerExpressionInterface=function(){function t(P){var Z=new Matrix;if(P!==void 0){var me=this._elem.finalTransform.mProp.getValueAtTime(P);me.clone(Z)}else{var _e=this._elem.finalTransform.mProp;_e.applyToMatrix(Z)}return Z}function e(P,Z){var me=this.getMatrix(Z);return me.props[12]=0,me.props[13]=0,me.props[14]=0,this.applyPoint(me,P)}function r(P,Z){var me=this.getMatrix(Z);return this.applyPoint(me,P)}function a(P,Z){var me=this.getMatrix(Z);return me.props[12]=0,me.props[13]=0,me.props[14]=0,this.invertPoint(me,P)}function l(P,Z){var me=this.getMatrix(Z);return this.invertPoint(me,P)}function u(P,Z){if(this._elem.hierarchy&&this._elem.hierarchy.length){var me,_e=this._elem.hierarchy.length;for(me=0;me<_e;me+=1)this._elem.hierarchy[me].finalTransform.mProp.applyToMatrix(P)}return P.applyToPointArray(Z[0],Z[1],Z[2]||0)}function d(P,Z){if(this._elem.hierarchy&&this._elem.hierarchy.length){var me,_e=this._elem.hierarchy.length;for(me=0;me<_e;me+=1)this._elem.hierarchy[me].finalTransform.mProp.applyToMatrix(P)}return P.inversePoint(Z)}function g(P){var Z=new Matrix;if(Z.reset(),this._elem.finalTransform.mProp.applyToMatrix(Z),this._elem.hierarchy&&this._elem.hierarchy.length){var me,_e=this._elem.hierarchy.length;for(me=0;me<_e;me+=1)this._elem.hierarchy[me].finalTransform.mProp.applyToMatrix(Z);return Z.inversePoint(P)}return Z.inversePoint(P)}function E(){return[1,1,1,1]}return function(P){var Z;function me(wt){He.mask=new MaskManagerInterface(wt,P)}function _e(wt){He.effect=wt}function He(wt){switch(wt){case"ADBE Root Vectors Group":case"Contents":case 2:return He.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Z;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return He.effect;case"ADBE Text Properties":return He.textInterface;default:return null}}He.getMatrix=t,He.invertPoint=d,He.applyPoint=u,He.toWorld=r,He.toWorldVec=e,He.fromWorld=l,He.fromWorldVec=a,He.toComp=r,He.fromComp=g,He.sampleImage=E,He.sourceRectAtTime=P.sourceRectAtTime.bind(P),He._elem=P,Z=TransformExpressionInterface(P.finalTransform.mProp);var Xe=getDescriptor(Z,"anchorPoint");return Object.defineProperties(He,{hasParent:{get:function(){return P.hierarchy.length}},parent:{get:function(){return P.hierarchy[0].layerInterface}},rotation:getDescriptor(Z,"rotation"),scale:getDescriptor(Z,"scale"),position:getDescriptor(Z,"position"),opacity:getDescriptor(Z,"opacity"),anchorPoint:Xe,anchor_point:Xe,transform:{get:function(){return Z}},active:{get:function(){return P.isInRange}}}),He.startTime=P.data.st,He.index=P.data.ind,He.source=P.data.refId,He.height=P.data.ty===0?P.data.h:100,He.width=P.data.ty===0?P.data.w:100,He.inPoint=P.data.ip/P.comp.globalData.frameRate,He.outPoint=P.data.op/P.comp.globalData.frameRate,He._name=P.data.nm,He.registerMaskInterface=me,He.registerEffectsInterface=_e,He}}(),propertyGroupFactory=function(){return function(t,e){return function(r){return r=r===void 0?1:r,r<=0?t:e(r-1)}}}(),PropertyInterface=function(){return function(t,e){var r={_name:t};function a(l){return l=l===void 0?1:l,l<=0?r:e(l-1)}return a}}(),EffectsExpressionInterface=function(){var t={createEffectsInterface:e};function e(l,u){if(l.effectsManager){var d=[],g=l.data.ef,E,P=l.effectsManager.effectElements.length;for(E=0;E<P;E+=1)d.push(r(g[E],l.effectsManager.effectElements[E],u,l));var Z=l.data.ef||[],me=function(He){for(E=0,P=Z.length;E<P;){if(He===Z[E].nm||He===Z[E].mn||He===Z[E].ix)return d[E];E+=1}return null};return Object.defineProperty(me,"numProperties",{get:function(){return Z.length}}),me}return null}function r(l,u,d,g){function E(He){for(var Xe=l.ef,wt=0,Do=Xe.length;wt<Do;){if(He===Xe[wt].nm||He===Xe[wt].mn||He===Xe[wt].ix)return Xe[wt].ty===5?Z[wt]:Z[wt]();wt+=1}throw new Error}var P=propertyGroupFactory(E,d),Z=[],me,_e=l.ef.length;for(me=0;me<_e;me+=1)l.ef[me].ty===5?Z.push(r(l.ef[me],u.effectElements[me],u.effectElements[me].propertyGroup,g)):Z.push(a(u.effectElements[me],l.ef[me].ty,g,P));return l.mn==="ADBE Color Control"&&Object.defineProperty(E,"color",{get:function(){return Z[0]()}}),Object.defineProperties(E,{numProperties:{get:function(){return l.np}},_name:{value:l.nm},propertyGroup:{value:P}}),E.enabled=l.en!==0,E.active=E.enabled,E}function a(l,u,d,g){var E=ExpressionPropertyInterface(l.p);function P(){return u===10?d.comp.compInterface(l.p.v):E()}return l.p.setGroupProperty&&l.p.setGroupProperty(PropertyInterface("",g)),P}return t}(),ShapePathInterface=function(){return function(e,r,a){var l=r.sh;function u(g){return g==="Shape"||g==="shape"||g==="Path"||g==="path"||g==="ADBE Vector Shape"||g===2?u.path:null}var d=propertyGroupFactory(u,a);return l.setGroupProperty(PropertyInterface("Path",d)),Object.defineProperties(u,{path:{get:function(){return l.k&&l.getValue(),l}},shape:{get:function(){return l.k&&l.getValue(),l}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:a}}),u}}(),ShapeExpressionInterface=function(){function t(Xe,wt,Do){var sr=[],Ko,Bs=Xe?Xe.length:0;for(Ko=0;Ko<Bs;Ko+=1)Xe[Ko].ty==="gr"?sr.push(r(Xe[Ko],wt[Ko],Do)):Xe[Ko].ty==="fl"?sr.push(a(Xe[Ko],wt[Ko],Do)):Xe[Ko].ty==="st"?sr.push(d(Xe[Ko],wt[Ko],Do)):Xe[Ko].ty==="tm"?sr.push(g(Xe[Ko],wt[Ko],Do)):Xe[Ko].ty==="tr"||(Xe[Ko].ty==="el"?sr.push(P(Xe[Ko],wt[Ko],Do)):Xe[Ko].ty==="sr"?sr.push(Z(Xe[Ko],wt[Ko],Do)):Xe[Ko].ty==="sh"?sr.push(ShapePathInterface(Xe[Ko],wt[Ko],Do)):Xe[Ko].ty==="rc"?sr.push(me(Xe[Ko],wt[Ko],Do)):Xe[Ko].ty==="rd"?sr.push(_e(Xe[Ko],wt[Ko],Do)):Xe[Ko].ty==="rp"?sr.push(He(Xe[Ko],wt[Ko],Do)):Xe[Ko].ty==="gf"?sr.push(l(Xe[Ko],wt[Ko],Do)):sr.push(u(Xe[Ko],wt[Ko])));return sr}function e(Xe,wt,Do){var sr,Ko=function(pf){for(var _h=0,cf=sr.length;_h<cf;){if(sr[_h]._name===pf||sr[_h].mn===pf||sr[_h].propertyIndex===pf||sr[_h].ix===pf||sr[_h].ind===pf)return sr[_h];_h+=1}return typeof pf=="number"?sr[pf-1]:null};Ko.propertyGroup=propertyGroupFactory(Ko,Do),sr=t(Xe.it,wt.it,Ko.propertyGroup),Ko.numProperties=sr.length;var Bs=E(Xe.it[Xe.it.length-1],wt.it[wt.it.length-1],Ko.propertyGroup);return Ko.transform=Bs,Ko.propertyIndex=Xe.cix,Ko._name=Xe.nm,Ko}function r(Xe,wt,Do){var sr=function(pf){switch(pf){case"ADBE Vectors Group":case"Contents":case 2:return sr.content;default:return sr.transform}};sr.propertyGroup=propertyGroupFactory(sr,Do);var Ko=e(Xe,wt,sr.propertyGroup),Bs=E(Xe.it[Xe.it.length-1],wt.it[wt.it.length-1],sr.propertyGroup);return sr.content=Ko,sr.transform=Bs,Object.defineProperty(sr,"_name",{get:function(){return Xe.nm}}),sr.numProperties=Xe.np,sr.propertyIndex=Xe.ix,sr.nm=Xe.nm,sr.mn=Xe.mn,sr}function a(Xe,wt,Do){function sr(Ko){return Ko==="Color"||Ko==="color"?sr.color:Ko==="Opacity"||Ko==="opacity"?sr.opacity:null}return Object.defineProperties(sr,{color:{get:ExpressionPropertyInterface(wt.c)},opacity:{get:ExpressionPropertyInterface(wt.o)},_name:{value:Xe.nm},mn:{value:Xe.mn}}),wt.c.setGroupProperty(PropertyInterface("Color",Do)),wt.o.setGroupProperty(PropertyInterface("Opacity",Do)),sr}function l(Xe,wt,Do){function sr(Ko){return Ko==="Start Point"||Ko==="start point"?sr.startPoint:Ko==="End Point"||Ko==="end point"?sr.endPoint:Ko==="Opacity"||Ko==="opacity"?sr.opacity:null}return Object.defineProperties(sr,{startPoint:{get:ExpressionPropertyInterface(wt.s)},endPoint:{get:ExpressionPropertyInterface(wt.e)},opacity:{get:ExpressionPropertyInterface(wt.o)},type:{get:function(){return"a"}},_name:{value:Xe.nm},mn:{value:Xe.mn}}),wt.s.setGroupProperty(PropertyInterface("Start Point",Do)),wt.e.setGroupProperty(PropertyInterface("End Point",Do)),wt.o.setGroupProperty(PropertyInterface("Opacity",Do)),sr}function u(){function Xe(){return null}return Xe}function d(Xe,wt,Do){var sr=propertyGroupFactory(cf,Do),Ko=propertyGroupFactory(_h,sr);function Bs(df){Object.defineProperty(_h,Xe.d[df].nm,{get:ExpressionPropertyInterface(wt.d.dataProps[df].p)})}var th,pf=Xe.d?Xe.d.length:0,_h={};for(th=0;th<pf;th+=1)Bs(th),wt.d.dataProps[th].p.setGroupProperty(Ko);function cf(df){return df==="Color"||df==="color"?cf.color:df==="Opacity"||df==="opacity"?cf.opacity:df==="Stroke Width"||df==="stroke width"?cf.strokeWidth:null}return Object.defineProperties(cf,{color:{get:ExpressionPropertyInterface(wt.c)},opacity:{get:ExpressionPropertyInterface(wt.o)},strokeWidth:{get:ExpressionPropertyInterface(wt.w)},dash:{get:function(){return _h}},_name:{value:Xe.nm},mn:{value:Xe.mn}}),wt.c.setGroupProperty(PropertyInterface("Color",sr)),wt.o.setGroupProperty(PropertyInterface("Opacity",sr)),wt.w.setGroupProperty(PropertyInterface("Stroke Width",sr)),cf}function g(Xe,wt,Do){function sr(Bs){return Bs===Xe.e.ix||Bs==="End"||Bs==="end"?sr.end:Bs===Xe.s.ix?sr.start:Bs===Xe.o.ix?sr.offset:null}var Ko=propertyGroupFactory(sr,Do);return sr.propertyIndex=Xe.ix,wt.s.setGroupProperty(PropertyInterface("Start",Ko)),wt.e.setGroupProperty(PropertyInterface("End",Ko)),wt.o.setGroupProperty(PropertyInterface("Offset",Ko)),sr.propertyIndex=Xe.ix,sr.propertyGroup=Do,Object.defineProperties(sr,{start:{get:ExpressionPropertyInterface(wt.s)},end:{get:ExpressionPropertyInterface(wt.e)},offset:{get:ExpressionPropertyInterface(wt.o)},_name:{value:Xe.nm}}),sr.mn=Xe.mn,sr}function E(Xe,wt,Do){function sr(Bs){return Xe.a.ix===Bs||Bs==="Anchor Point"?sr.anchorPoint:Xe.o.ix===Bs||Bs==="Opacity"?sr.opacity:Xe.p.ix===Bs||Bs==="Position"?sr.position:Xe.r.ix===Bs||Bs==="Rotation"||Bs==="ADBE Vector Rotation"?sr.rotation:Xe.s.ix===Bs||Bs==="Scale"?sr.scale:Xe.sk&&Xe.sk.ix===Bs||Bs==="Skew"?sr.skew:Xe.sa&&Xe.sa.ix===Bs||Bs==="Skew Axis"?sr.skewAxis:null}var Ko=propertyGroupFactory(sr,Do);return wt.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Ko)),wt.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Ko)),wt.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Ko)),wt.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Ko)),wt.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Ko)),wt.transform.mProps.sk&&(wt.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Ko)),wt.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Ko))),wt.transform.op.setGroupProperty(PropertyInterface("Opacity",Ko)),Object.defineProperties(sr,{opacity:{get:ExpressionPropertyInterface(wt.transform.mProps.o)},position:{get:ExpressionPropertyInterface(wt.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(wt.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(wt.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(wt.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(wt.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(wt.transform.mProps.sa)},_name:{value:Xe.nm}}),sr.ty="tr",sr.mn=Xe.mn,sr.propertyGroup=Do,sr}function P(Xe,wt,Do){function sr(th){return Xe.p.ix===th?sr.position:Xe.s.ix===th?sr.size:null}var Ko=propertyGroupFactory(sr,Do);sr.propertyIndex=Xe.ix;var Bs=wt.sh.ty==="tm"?wt.sh.prop:wt.sh;return Bs.s.setGroupProperty(PropertyInterface("Size",Ko)),Bs.p.setGroupProperty(PropertyInterface("Position",Ko)),Object.defineProperties(sr,{size:{get:ExpressionPropertyInterface(Bs.s)},position:{get:ExpressionPropertyInterface(Bs.p)},_name:{value:Xe.nm}}),sr.mn=Xe.mn,sr}function Z(Xe,wt,Do){function sr(th){return Xe.p.ix===th?sr.position:Xe.r.ix===th?sr.rotation:Xe.pt.ix===th?sr.points:Xe.or.ix===th||th==="ADBE Vector Star Outer Radius"?sr.outerRadius:Xe.os.ix===th?sr.outerRoundness:Xe.ir&&(Xe.ir.ix===th||th==="ADBE Vector Star Inner Radius")?sr.innerRadius:Xe.is&&Xe.is.ix===th?sr.innerRoundness:null}var Ko=propertyGroupFactory(sr,Do),Bs=wt.sh.ty==="tm"?wt.sh.prop:wt.sh;return sr.propertyIndex=Xe.ix,Bs.or.setGroupProperty(PropertyInterface("Outer Radius",Ko)),Bs.os.setGroupProperty(PropertyInterface("Outer Roundness",Ko)),Bs.pt.setGroupProperty(PropertyInterface("Points",Ko)),Bs.p.setGroupProperty(PropertyInterface("Position",Ko)),Bs.r.setGroupProperty(PropertyInterface("Rotation",Ko)),Xe.ir&&(Bs.ir.setGroupProperty(PropertyInterface("Inner Radius",Ko)),Bs.is.setGroupProperty(PropertyInterface("Inner Roundness",Ko))),Object.defineProperties(sr,{position:{get:ExpressionPropertyInterface(Bs.p)},rotation:{get:ExpressionPropertyInterface(Bs.r)},points:{get:ExpressionPropertyInterface(Bs.pt)},outerRadius:{get:ExpressionPropertyInterface(Bs.or)},outerRoundness:{get:ExpressionPropertyInterface(Bs.os)},innerRadius:{get:ExpressionPropertyInterface(Bs.ir)},innerRoundness:{get:ExpressionPropertyInterface(Bs.is)},_name:{value:Xe.nm}}),sr.mn=Xe.mn,sr}function me(Xe,wt,Do){function sr(th){return Xe.p.ix===th?sr.position:Xe.r.ix===th?sr.roundness:Xe.s.ix===th||th==="Size"||th==="ADBE Vector Rect Size"?sr.size:null}var Ko=propertyGroupFactory(sr,Do),Bs=wt.sh.ty==="tm"?wt.sh.prop:wt.sh;return sr.propertyIndex=Xe.ix,Bs.p.setGroupProperty(PropertyInterface("Position",Ko)),Bs.s.setGroupProperty(PropertyInterface("Size",Ko)),Bs.r.setGroupProperty(PropertyInterface("Rotation",Ko)),Object.defineProperties(sr,{position:{get:ExpressionPropertyInterface(Bs.p)},roundness:{get:ExpressionPropertyInterface(Bs.r)},size:{get:ExpressionPropertyInterface(Bs.s)},_name:{value:Xe.nm}}),sr.mn=Xe.mn,sr}function _e(Xe,wt,Do){function sr(th){return Xe.r.ix===th||th==="Round Corners 1"?sr.radius:null}var Ko=propertyGroupFactory(sr,Do),Bs=wt;return sr.propertyIndex=Xe.ix,Bs.rd.setGroupProperty(PropertyInterface("Radius",Ko)),Object.defineProperties(sr,{radius:{get:ExpressionPropertyInterface(Bs.rd)},_name:{value:Xe.nm}}),sr.mn=Xe.mn,sr}function He(Xe,wt,Do){function sr(th){return Xe.c.ix===th||th==="Copies"?sr.copies:Xe.o.ix===th||th==="Offset"?sr.offset:null}var Ko=propertyGroupFactory(sr,Do),Bs=wt;return sr.propertyIndex=Xe.ix,Bs.c.setGroupProperty(PropertyInterface("Copies",Ko)),Bs.o.setGroupProperty(PropertyInterface("Offset",Ko)),Object.defineProperties(sr,{copies:{get:ExpressionPropertyInterface(Bs.c)},offset:{get:ExpressionPropertyInterface(Bs.o)},_name:{value:Xe.nm}}),sr.mn=Xe.mn,sr}return function(Xe,wt,Do){var sr;function Ko(th){if(typeof th=="number")return th=th===void 0?1:th,th===0?Do:sr[th-1];for(var pf=0,_h=sr.length;pf<_h;){if(sr[pf]._name===th)return sr[pf];pf+=1}return null}function Bs(){return Do}return Ko.propertyGroup=propertyGroupFactory(Ko,Bs),sr=t(Xe,wt,Ko.propertyGroup),Ko.numProperties=sr.length,Ko._name="Contents",Ko}}(),TextExpressionInterface=function(){return function(t){var e;function r(a){switch(a){case"ADBE Text Document":return r.sourceText;default:return null}}return Object.defineProperty(r,"sourceText",{get:function(){t.textProperty.getValue();var l=t.textProperty.currentData.t;return(!e||l!==e.value)&&(e=new String(l),e.value=l||new String(l),Object.defineProperty(e,"style",{get:function(){return{fillColor:t.textProperty.currentData.fc}}})),e}}),r}}();function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}var FootageInterface=function(){var t=function(a){var l="",u=a.getFootageData();function d(){return l="",u=a.getFootageData(),g}function g(E){if(u[E])return l=E,u=u[E],_typeof(u)==="object"?g:u;var P=E.indexOf(l);if(P!==-1){var Z=parseInt(E.substr(P+l.length),10);return u=u[Z],_typeof(u)==="object"?g:u}return""}return d},e=function(a){function l(u){return u==="Outline"?l.outlineInterface():null}return l._name="Outline",l.outlineInterface=t(a),l};return function(r){function a(l){return l==="Data"?a.dataInterface:null}return a._name="Data",a.dataInterface=e(r),a}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(t){return interfaces[t]||null}var expressionHelpers=function(){function t(d,g,E){g.x&&(E.k=!0,E.x=!0,E.initiateExpression=ExpressionManager.initiateExpression,E.effectsSequence.push(E.initiateExpression(d,g,E).bind(E)))}function e(d){return d*=this.elem.globalData.frameRate,d-=this.offsetTime,d!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<d?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(d,this._cachingAtTime),this._cachingAtTime.lastFrame=d),this._cachingAtTime.value}function r(d){var g=-.01,E=this.getValueAtTime(d),P=this.getValueAtTime(d+g),Z=0;if(E.length){var me;for(me=0;me<E.length;me+=1)Z+=Math.pow(P[me]-E[me],2);Z=Math.sqrt(Z)*100}else Z=0;return Z}function a(d){if(this.vel!==void 0)return this.vel;var g=-.001,E=this.getValueAtTime(d),P=this.getValueAtTime(d+g),Z;if(E.length){Z=createTypedArray("float32",E.length);var me;for(me=0;me<E.length;me+=1)Z[me]=(P[me]-E[me])/g}else Z=(P-E)/g;return Z}function l(){return this.pv}function u(d){this.propertyGroup=d}return{searchExpressions:t,getSpeedAtTime:r,getVelocityAtTime:a,getValueAtTime:e,getStaticValueAtTime:l,setGroupProperty:u}}();function addPropertyDecorator(){function t(_e,He,Xe){if(!this.k||!this.keyframes)return this.pv;_e=_e?_e.toLowerCase():"";var wt=this.comp.renderedFrame,Do=this.keyframes,sr=Do[Do.length-1].t;if(wt<=sr)return this.pv;var Ko,Bs;Xe?(He?Ko=Math.abs(sr-this.elem.comp.globalData.frameRate*He):Ko=Math.max(0,sr-this.elem.data.ip),Bs=sr-Ko):((!He||He>Do.length-1)&&(He=Do.length-1),Bs=Do[Do.length-1-He].t,Ko=sr-Bs);var th,pf,_h;if(_e==="pingpong"){var cf=Math.floor((wt-Bs)/Ko);if(cf%2!==0)return this.getValueAtTime((Ko-(wt-Bs)%Ko+Bs)/this.comp.globalData.frameRate,0)}else if(_e==="offset"){var df=this.getValueAtTime(Bs/this.comp.globalData.frameRate,0),uf=this.getValueAtTime(sr/this.comp.globalData.frameRate,0),li=this.getValueAtTime(((wt-Bs)%Ko+Bs)/this.comp.globalData.frameRate,0),Vc=Math.floor((wt-Bs)/Ko);if(this.pv.length){for(_h=new Array(df.length),pf=_h.length,th=0;th<pf;th+=1)_h[th]=(uf[th]-df[th])*Vc+li[th];return _h}return(uf-df)*Vc+li}else if(_e==="continue"){var Rs=this.getValueAtTime(sr/this.comp.globalData.frameRate,0),qc=this.getValueAtTime((sr-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(_h=new Array(Rs.length),pf=_h.length,th=0;th<pf;th+=1)_h[th]=Rs[th]+(Rs[th]-qc[th])*((wt-sr)/this.comp.globalData.frameRate)/5e-4;return _h}return Rs+(Rs-qc)*((wt-sr)/.001)}return this.getValueAtTime(((wt-Bs)%Ko+Bs)/this.comp.globalData.frameRate,0)}function e(_e,He,Xe){if(!this.k)return this.pv;_e=_e?_e.toLowerCase():"";var wt=this.comp.renderedFrame,Do=this.keyframes,sr=Do[0].t;if(wt>=sr)return this.pv;var Ko,Bs;Xe?(He?Ko=Math.abs(this.elem.comp.globalData.frameRate*He):Ko=Math.max(0,this.elem.data.op-sr),Bs=sr+Ko):((!He||He>Do.length-1)&&(He=Do.length-1),Bs=Do[He].t,Ko=Bs-sr);var th,pf,_h;if(_e==="pingpong"){var cf=Math.floor((sr-wt)/Ko);if(cf%2===0)return this.getValueAtTime(((sr-wt)%Ko+sr)/this.comp.globalData.frameRate,0)}else if(_e==="offset"){var df=this.getValueAtTime(sr/this.comp.globalData.frameRate,0),uf=this.getValueAtTime(Bs/this.comp.globalData.frameRate,0),li=this.getValueAtTime((Ko-(sr-wt)%Ko+sr)/this.comp.globalData.frameRate,0),Vc=Math.floor((sr-wt)/Ko)+1;if(this.pv.length){for(_h=new Array(df.length),pf=_h.length,th=0;th<pf;th+=1)_h[th]=li[th]-(uf[th]-df[th])*Vc;return _h}return li-(uf-df)*Vc}else if(_e==="continue"){var Rs=this.getValueAtTime(sr/this.comp.globalData.frameRate,0),qc=this.getValueAtTime((sr+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(_h=new Array(Rs.length),pf=_h.length,th=0;th<pf;th+=1)_h[th]=Rs[th]+(Rs[th]-qc[th])*(sr-wt)/.001;return _h}return Rs+(Rs-qc)*(sr-wt)/.001}return this.getValueAtTime((Ko-((sr-wt)%Ko+sr))/this.comp.globalData.frameRate,0)}function r(_e,He){if(!this.k)return this.pv;if(_e=(_e||.4)*.5,He=Math.floor(He||5),He<=1)return this.pv;var Xe=this.comp.renderedFrame/this.comp.globalData.frameRate,wt=Xe-_e,Do=Xe+_e,sr=He>1?(Do-wt)/(He-1):1,Ko=0,Bs=0,th;this.pv.length?th=createTypedArray("float32",this.pv.length):th=0;for(var pf;Ko<He;){if(pf=this.getValueAtTime(wt+Ko*sr),this.pv.length)for(Bs=0;Bs<this.pv.length;Bs+=1)th[Bs]+=pf[Bs];else th+=pf;Ko+=1}if(this.pv.length)for(Bs=0;Bs<this.pv.length;Bs+=1)th[Bs]/=He;else th/=He;return th}function a(_e){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var He=this._transformCachingAtTime.v;if(He.cloneFromProps(this.pre.props),this.appliedTransformations<1){var Xe=this.a.getValueAtTime(_e);He.translate(-Xe[0]*this.a.mult,-Xe[1]*this.a.mult,Xe[2]*this.a.mult)}if(this.appliedTransformations<2){var wt=this.s.getValueAtTime(_e);He.scale(wt[0]*this.s.mult,wt[1]*this.s.mult,wt[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Do=this.sk.getValueAtTime(_e),sr=this.sa.getValueAtTime(_e);He.skewFromAxis(-Do*this.sk.mult,sr*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Ko=this.r.getValueAtTime(_e);He.rotate(-Ko*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Bs=this.rz.getValueAtTime(_e),th=this.ry.getValueAtTime(_e),pf=this.rx.getValueAtTime(_e),_h=this.or.getValueAtTime(_e);He.rotateZ(-Bs*this.rz.mult).rotateY(th*this.ry.mult).rotateX(pf*this.rx.mult).rotateZ(-_h[2]*this.or.mult).rotateY(_h[1]*this.or.mult).rotateX(_h[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var cf=this.px.getValueAtTime(_e),df=this.py.getValueAtTime(_e);if(this.data.p.z){var uf=this.pz.getValueAtTime(_e);He.translate(cf*this.px.mult,df*this.py.mult,-uf*this.pz.mult)}else He.translate(cf*this.px.mult,df*this.py.mult,0)}else{var li=this.p.getValueAtTime(_e);He.translate(li[0]*this.p.mult,li[1]*this.p.mult,-li[2]*this.p.mult)}return He}function l(){return this.v.clone(new Matrix)}var u=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(_e,He,Xe){var wt=u(_e,He,Xe);return wt.dynamicProperties.length?wt.getValueAtTime=a.bind(wt):wt.getValueAtTime=l.bind(wt),wt.setGroupProperty=expressionHelpers.setGroupProperty,wt};var d=PropertyFactory.getProp;PropertyFactory.getProp=function(_e,He,Xe,wt,Do){var sr=d(_e,He,Xe,wt,Do);sr.kf?sr.getValueAtTime=expressionHelpers.getValueAtTime.bind(sr):sr.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(sr),sr.setGroupProperty=expressionHelpers.setGroupProperty,sr.loopOut=t,sr.loopIn=e,sr.smooth=r,sr.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(sr),sr.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(sr),sr.numKeys=He.a===1?He.k.length:0,sr.propertyIndex=He.ix;var Ko=0;return Xe!==0&&(Ko=createTypedArray("float32",He.a===1?He.k[0].s.length:He.k.length)),sr._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Ko},expressionHelpers.searchExpressions(_e,He,sr),sr.k&&Do.addDynamicProperty(sr),sr};function g(_e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),_e*=this.elem.globalData.frameRate,_e-=this.offsetTime,_e!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<_e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=_e,this.interpolateShape(_e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var E=ShapePropertyFactory.getConstructorFunction(),P=ShapePropertyFactory.getKeyframedConstructorFunction();function Z(){}Z.prototype={vertices:function(He,Xe){this.k&&this.getValue();var wt=this.v;Xe!==void 0&&(wt=this.getValueAtTime(Xe,0));var Do,sr=wt._length,Ko=wt[He],Bs=wt.v,th=createSizedArray(sr);for(Do=0;Do<sr;Do+=1)He==="i"||He==="o"?th[Do]=[Ko[Do][0]-Bs[Do][0],Ko[Do][1]-Bs[Do][1]]:th[Do]=[Ko[Do][0],Ko[Do][1]];return th},points:function(He){return this.vertices("v",He)},inTangents:function(He){return this.vertices("i",He)},outTangents:function(He){return this.vertices("o",He)},isClosed:function(){return this.v.c},pointOnPath:function(He,Xe){var wt=this.v;Xe!==void 0&&(wt=this.getValueAtTime(Xe,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(wt));for(var Do=this._segmentsLength,sr=Do.lengths,Ko=Do.totalLength*He,Bs=0,th=sr.length,pf=0,_h;Bs<th;){if(pf+sr[Bs].addedLength>Ko){var cf=Bs,df=wt.c&&Bs===th-1?0:Bs+1,uf=(Ko-pf)/sr[Bs].addedLength;_h=bez.getPointInSegment(wt.v[cf],wt.v[df],wt.o[cf],wt.i[df],uf,sr[Bs]);break}else pf+=sr[Bs].addedLength;Bs+=1}return _h||(_h=wt.c?[wt.v[0][0],wt.v[0][1]]:[wt.v[wt._length-1][0],wt.v[wt._length-1][1]]),_h},vectorOnPath:function(He,Xe,wt){He==1?He=this.v.c:He==0&&(He=.999);var Do=this.pointOnPath(He,Xe),sr=this.pointOnPath(He+.001,Xe),Ko=sr[0]-Do[0],Bs=sr[1]-Do[1],th=Math.sqrt(Math.pow(Ko,2)+Math.pow(Bs,2));if(th===0)return[0,0];var pf=wt==="tangent"?[Ko/th,Bs/th]:[-Bs/th,Ko/th];return pf},tangentOnPath:function(He,Xe){return this.vectorOnPath(He,Xe,"tangent")},normalOnPath:function(He,Xe){return this.vectorOnPath(He,Xe,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Z],E),extendPrototype([Z],P),P.prototype.getValueAtTime=g,P.prototype.initiateExpression=ExpressionManager.initiateExpression;var me=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(_e,He,Xe,wt,Do){var sr=me(_e,He,Xe,wt,Do);return sr.propertyIndex=He.ix,sr.lock=!1,Xe===3?expressionHelpers.searchExpressions(_e,He.pt,sr):Xe===4&&expressionHelpers.searchExpressions(_e,He.ks,sr),sr.k&&_e.addDynamicProperty(sr),sr}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function t(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(e,r){var a=this.calculateExpression(r);if(e.t!==a){var l={};return this.copyData(l,e),l.t=a.toString(),l.__complete=!1,l}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),r=this.searchExpressions();return this.kf=e||r,this.kf},TextProperty.prototype.searchExpressions=t}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function t(e,r){var a=createNS("feMerge");a.setAttribute("result",e);var l,u;for(u=0;u<r.length;u+=1)l=createNS("feMergeNode"),l.setAttribute("in",r[u]),a.appendChild(l),a.appendChild(l);return a}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(t,e,r,a,l){this.filterManager=e;var u=createNS("feColorMatrix");u.setAttribute("type","matrix"),u.setAttribute("color-interpolation-filters","linearRGB"),u.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=u,u.setAttribute("result",a+"_tint_1"),t.appendChild(u),u=createNS("feColorMatrix"),u.setAttribute("type","matrix"),u.setAttribute("color-interpolation-filters","sRGB"),u.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),u.setAttribute("result",a+"_tint_2"),t.appendChild(u),this.matrixFilter=u;var d=this.createMergeNode(a,[l,a+"_tint_1",a+"_tint_2"]);t.appendChild(d)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,a=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+a+" 0"),this.matrixFilter.setAttribute("values",r[0]-e[0]+" 0 0 0 "+e[0]+" "+(r[1]-e[1])+" 0 0 0 "+e[1]+" "+(r[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}};function SVGFillFilter(t,e,r,a){this.filterManager=e;var l=createNS("feColorMatrix");l.setAttribute("type","matrix"),l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),l.setAttribute("result",a),t.appendChild(l),this.matrixFilter=l}SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,r=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+r+" 0")}};function SVGStrokeEffect(t,e,r){this.initialized=!1,this.filterManager=e,this.elem=r,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var t=this.elem.layerElement.children||this.elem.layerElement.childNodes,e,r,a,l;for(this.filterManager.effectElements[1].p.v===1?(l=this.elem.maskManager.masksProperties.length,a=0):(a=this.filterManager.effectElements[0].p.v-1,l=a+1),r=createNS("g"),r.setAttribute("fill","none"),r.setAttribute("stroke-linecap","round"),r.setAttribute("stroke-dashoffset",1),a;a<l;a+=1)e=createNS("path"),r.appendChild(e),this.paths.push({p:e,m:a});if(this.filterManager.effectElements[10].p.v===3){var u=createNS("mask"),d=createElementID();u.setAttribute("id",d),u.setAttribute("mask-type","alpha"),u.appendChild(r),this.elem.globalData.defs.appendChild(u);var g=createNS("g");for(g.setAttribute("mask","url("+getLocationHref()+"#"+d+")");t[0];)g.appendChild(t[0]);this.elem.layerElement.appendChild(g),this.masker=u,r.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(t=this.elem.layerElement.children||this.elem.layerElement.childNodes;t.length;)this.elem.layerElement.removeChild(t[0]);this.elem.layerElement.appendChild(r),this.elem.layerElement.removeAttribute("mask"),r.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=r},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,r=this.paths.length,a,l;for(e=0;e<r;e+=1)if(this.paths[e].m!==-1&&(a=this.elem.maskManager.viewData[this.paths[e].m],l=this.paths[e].p,(t||this.filterManager._mdf||a.prop._mdf)&&l.setAttribute("d",a.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||a.prop._mdf)){var u;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var d=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,g=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,E=l.getTotalLength();u="0 0 0 "+E*d+" ";var P=E*(g-d),Z=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,me=Math.floor(P/Z),_e;for(_e=0;_e<me;_e+=1)u+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";u+="0 "+E*10+" 0 0"}else u="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;l.setAttribute("stroke-dasharray",u)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(t||this.filterManager.effectElements[3].p._mdf)){var He=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(He[0]*255)+","+bmFloor(He[1]*255)+","+bmFloor(He[2]*255)+")")}};function SVGTritoneFilter(t,e,r,a){this.filterManager=e;var l=createNS("feColorMatrix");l.setAttribute("type","matrix"),l.setAttribute("color-interpolation-filters","linearRGB"),l.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),t.appendChild(l);var u=createNS("feComponentTransfer");u.setAttribute("color-interpolation-filters","sRGB"),u.setAttribute("result",a),this.matrixFilter=u;var d=createNS("feFuncR");d.setAttribute("type","table"),u.appendChild(d),this.feFuncR=d;var g=createNS("feFuncG");g.setAttribute("type","table"),u.appendChild(g),this.feFuncG=g;var E=createNS("feFuncB");E.setAttribute("type","table"),u.appendChild(E),this.feFuncB=E,t.appendChild(u)}SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,a=this.filterManager.effectElements[2].p.v,l=a[0]+" "+r[0]+" "+e[0],u=a[1]+" "+r[1]+" "+e[1],d=a[2]+" "+r[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",l),this.feFuncG.setAttribute("tableValues",u),this.feFuncB.setAttribute("tableValues",d)}};function SVGProLevelsFilter(t,e,r,a){this.filterManager=e;var l=this.filterManager.effectElements,u=createNS("feComponentTransfer");(l[10].p.k||l[10].p.v!==0||l[11].p.k||l[11].p.v!==1||l[12].p.k||l[12].p.v!==1||l[13].p.k||l[13].p.v!==0||l[14].p.k||l[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",u)),(l[17].p.k||l[17].p.v!==0||l[18].p.k||l[18].p.v!==1||l[19].p.k||l[19].p.v!==1||l[20].p.k||l[20].p.v!==0||l[21].p.k||l[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",u)),(l[24].p.k||l[24].p.v!==0||l[25].p.k||l[25].p.v!==1||l[26].p.k||l[26].p.v!==1||l[27].p.k||l[27].p.v!==0||l[28].p.k||l[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",u)),(l[31].p.k||l[31].p.v!==0||l[32].p.k||l[32].p.v!==1||l[33].p.k||l[33].p.v!==1||l[34].p.k||l[34].p.v!==0||l[35].p.k||l[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",u)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(u.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(u)),(l[3].p.k||l[3].p.v!==0||l[4].p.k||l[4].p.v!==1||l[5].p.k||l[5].p.v!==1||l[6].p.k||l[6].p.v!==0||l[7].p.k||l[7].p.v!==1)&&(u=createNS("feComponentTransfer"),u.setAttribute("color-interpolation-filters","sRGB"),u.setAttribute("result",a),t.appendChild(u),this.feFuncRComposed=this.createFeFunc("feFuncR",u),this.feFuncGComposed=this.createFeFunc("feFuncG",u),this.feFuncBComposed=this.createFeFunc("feFuncB",u))}SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var r=createNS(t);return r.setAttribute("type","table"),e.appendChild(r),r},SVGProLevelsFilter.prototype.getTableValue=function(t,e,r,a,l){for(var u=0,d=256,g,E=Math.min(t,e),P=Math.max(t,e),Z=Array.call(null,{length:d}),me,_e=0,He=l-a,Xe=e-t;u<=256;)g=u/256,g<=E?me=Xe<0?l:a:g>=P?me=Xe<0?a:l:me=a+He*Math.pow((g-t)/Xe,1/r),Z[_e]=me,_e+=1,u+=256/(d-1);return Z.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,r=this.filterManager.effectElements;this.feFuncRComposed&&(t||r[3].p._mdf||r[4].p._mdf||r[5].p._mdf||r[6].p._mdf||r[7].p._mdf)&&(e=this.getTableValue(r[3].p.v,r[4].p.v,r[5].p.v,r[6].p.v,r[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||r[10].p._mdf||r[11].p._mdf||r[12].p._mdf||r[13].p._mdf||r[14].p._mdf)&&(e=this.getTableValue(r[10].p.v,r[11].p.v,r[12].p.v,r[13].p.v,r[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||r[17].p._mdf||r[18].p._mdf||r[19].p._mdf||r[20].p._mdf||r[21].p._mdf)&&(e=this.getTableValue(r[17].p.v,r[18].p.v,r[19].p.v,r[20].p.v,r[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||r[24].p._mdf||r[25].p._mdf||r[26].p._mdf||r[27].p._mdf||r[28].p._mdf)&&(e=this.getTableValue(r[24].p.v,r[25].p.v,r[26].p.v,r[27].p.v,r[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||r[31].p._mdf||r[32].p._mdf||r[33].p._mdf||r[34].p._mdf||r[35].p._mdf)&&(e=this.getTableValue(r[31].p.v,r[32].p.v,r[33].p.v,r[34].p.v,r[35].p.v),this.feFuncA.setAttribute("tableValues",e))}};function SVGDropShadowEffect(t,e,r,a,l){var u=e.container.globalData.renderConfig.filterSize,d=e.data.fs||u;t.setAttribute("x",d.x||u.x),t.setAttribute("y",d.y||u.y),t.setAttribute("width",d.width||u.width),t.setAttribute("height",d.height||u.height),this.filterManager=e;var g=createNS("feGaussianBlur");g.setAttribute("in","SourceAlpha"),g.setAttribute("result",a+"_drop_shadow_1"),g.setAttribute("stdDeviation","0"),this.feGaussianBlur=g,t.appendChild(g);var E=createNS("feOffset");E.setAttribute("dx","25"),E.setAttribute("dy","0"),E.setAttribute("in",a+"_drop_shadow_1"),E.setAttribute("result",a+"_drop_shadow_2"),this.feOffset=E,t.appendChild(E);var P=createNS("feFlood");P.setAttribute("flood-color","#00ff00"),P.setAttribute("flood-opacity","1"),P.setAttribute("result",a+"_drop_shadow_3"),this.feFlood=P,t.appendChild(P);var Z=createNS("feComposite");Z.setAttribute("in",a+"_drop_shadow_3"),Z.setAttribute("in2",a+"_drop_shadow_2"),Z.setAttribute("operator","in"),Z.setAttribute("result",a+"_drop_shadow_4"),t.appendChild(Z);var me=this.createMergeNode(a,[a+"_drop_shadow_4",l]);t.appendChild(me)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(e[0]*255),Math.round(e[1]*255),Math.round(e[2]*255)))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var r=this.filterManager.effectElements[3].p.v,a=(this.filterManager.effectElements[2].p.v-90)*degToRads,l=r*Math.cos(a),u=r*Math.sin(a);this.feOffset.setAttribute("dx",l),this.feOffset.setAttribute("dy",u)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,r){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=r,r.matteElement=createNS("g"),r.matteElement.appendChild(r.layerElement),r.matteElement.appendChild(r.transformedElement),r.baseElement=r.matteElement}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,r=_svgMatteSymbols.length;e<r;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var r=t.layerElement.parentNode;if(r){for(var a=r.children,l=0,u=a.length;l<u&&a[l]!==t.layerElement;)l+=1;var d;l<=u-2&&(d=a[l+1]);var g=createNS("use");g.setAttribute("href","#"+e),d?r.insertBefore(g,d):r.appendChild(g)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var r=createElementID(),a=createNS("mask");a.setAttribute("id",e.layerId),a.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var l=t.globalData.defs;l.appendChild(a);var u=createNS("symbol");u.setAttribute("id",r),this.replaceInParent(e,r),u.appendChild(e.layerElement),l.appendChild(u);var d=createNS("use");d.setAttribute("href","#"+r),a.appendChild(d),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,r=0,a=e.length;r<a;)e[r]&&e[r].data.ind===t&&this.setElementAsMask(this.elem,e[r]),r+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(t,e,r,a){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var l=createNS("feGaussianBlur");l.setAttribute("result",a),t.appendChild(l),this.feGaussianBlur=l}SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3,r=this.filterManager.effectElements[0].p.v*e,a=this.filterManager.effectElements[1].p.v,l=a==3?0:r,u=a==2?0:r;this.feGaussianBlur.setAttribute("stdDeviation",l+" "+u);var d=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",d)}};function TransformEffect(){}TransformEffect.prototype.init=function(t){this.effectsManager=t,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(t){if(this._opMdf=!1,this._mdf=!1,t||this.effectsManager._mdf){var e=this.effectsManager.effectElements,r=e[0].p.v,a=e[1].p.v,l=e[2].p.v===1,u=e[3].p.v,d=l?u:e[4].p.v,g=e[5].p.v,E=e[6].p.v,P=e[7].p.v;this.matrix.reset(),this.matrix.translate(-r[0],-r[1],r[2]),this.matrix.scale(d*.01,u*.01,1),this.matrix.rotate(-P*degToRads),this.matrix.skewFromAxis(-g*degToRads,(E+90)*degToRads),this.matrix.translate(a[0],a[1],0),this._mdf=!0,this.opacity!==e[8].p.v&&(this.opacity=e[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(t,e){this.init(e)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(t){this.init(t)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})}(lottie$2,lottie$2.exports)),lottie$2.exports}var lottieExports=requireLottie();const lottie=getDefaultExportFromCjs(lottieExports);function _arrayLikeToArray(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,a=Array(e);r<e;r++)a[r]=t[r];return a}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _defineProperty$2(t,e,r){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _iterableToArrayLimit(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,l,u,d,g=[],E=!0,P=!1;try{if(u=(r=r.call(t)).next,e!==0)for(;!(E=(a=u.call(r)).done)&&(g.push(a.value),g.length!==e);E=!0);}catch(Z){P=!0,l=Z}finally{try{if(!E&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(P)throw l}}return g}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),r.push.apply(r,a)}return r}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(a){_defineProperty$2(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function _objectWithoutProperties(t,e){if(t==null)return{};var r,a,l=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(a=0;a<u.length;a++)r=u[a],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(l[r]=t[r])}return l}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var r={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.includes(a))continue;r[a]=t[a]}return r}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _toPrimitive(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return typeof e=="symbol"?e:e+""}function _unsupportedIterableToArray(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function t(e,r){var a=e.animationData,l=e.loop,u=e.autoplay,d=e.initialSegment,g=e.onComplete,E=e.onLoopComplete,P=e.onEnterFrame,Z=e.onSegmentStart,me=e.onConfigReady,_e=e.onDataReady,He=e.onDataFailed,Xe=e.onLoadedImages,wt=e.onDOMLoaded,Do=e.onDestroy;e.lottieRef,e.renderer,e.name,e.assetsPath,e.rendererSettings;var sr=_objectWithoutProperties(e,_excluded$1),Ko=reactExports.useState(!1),Bs=_slicedToArray(Ko,2),th=Bs[0],pf=Bs[1],_h=reactExports.useRef(),cf=reactExports.useRef(null),df=function(){var b1;(b1=_h.current)===null||b1===void 0||b1.play()},uf=function(){var b1;(b1=_h.current)===null||b1===void 0||b1.stop()},li=function(){var b1;(b1=_h.current)===null||b1===void 0||b1.pause()},Vc=function(b1){var _1;(_1=_h.current)===null||_1===void 0||_1.setSpeed(b1)},Rs=function(b1,_1){var V1;(V1=_h.current)===null||V1===void 0||V1.goToAndPlay(b1,_1)},qc=function(b1,_1){var V1;(V1=_h.current)===null||V1===void 0||V1.goToAndStop(b1,_1)},Qp=function(b1){var _1;(_1=_h.current)===null||_1===void 0||_1.setDirection(b1)},n1=function(b1,_1){var V1;(V1=_h.current)===null||V1===void 0||V1.playSegments(b1,_1)},wh=function(b1){var _1;(_1=_h.current)===null||_1===void 0||_1.setSubframe(b1)},gf=function(b1){var _1;return(_1=_h.current)===null||_1===void 0?void 0:_1.getDuration(b1)},yh=function(){var b1;(b1=_h.current)===null||b1===void 0||b1.destroy(),_h.current=void 0},ff=function(){var b1=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_1;if(cf.current){(_1=_h.current)===null||_1===void 0||_1.destroy();var V1=_objectSpread2(_objectSpread2(_objectSpread2({},e),b1),{},{container:cf.current});return _h.current=lottie.loadAnimation(V1),pf(!!_h.current),function(){var I1;(I1=_h.current)===null||I1===void 0||I1.destroy(),_h.current=void 0}}};reactExports.useEffect(function(){var s1=ff();return function(){return s1?.()}},[a,l]),reactExports.useEffect(function(){_h.current&&(_h.current.autoplay=!!u)},[u]),reactExports.useEffect(function(){if(_h.current){if(!d){_h.current.resetSegments(!0);return}!Array.isArray(d)||!d.length||((_h.current.currentRawFrame<d[0]||_h.current.currentRawFrame>d[1])&&(_h.current.currentRawFrame=d[0]),_h.current.setSegment(d[0],d[1]))}},[d]),reactExports.useEffect(function(){var s1=[{name:"complete",handler:g},{name:"loopComplete",handler:E},{name:"enterFrame",handler:P},{name:"segmentStart",handler:Z},{name:"config_ready",handler:me},{name:"data_ready",handler:_e},{name:"data_failed",handler:He},{name:"loaded_images",handler:Xe},{name:"DOMLoaded",handler:wt},{name:"destroy",handler:Do}],b1=s1.filter(function(V1){return V1.handler!=null});if(b1.length){var _1=b1.map(function(V1){var I1;return(I1=_h.current)===null||I1===void 0||I1.addEventListener(V1.name,V1.handler),function(){var i2;(i2=_h.current)===null||i2===void 0||i2.removeEventListener(V1.name,V1.handler)}});return function(){_1.forEach(function(V1){return V1()})}}},[g,E,P,Z,me,_e,He,Xe,wt,Do]);var e1=React.createElement("div",_objectSpread2({style:r,ref:cf},sr));return{View:e1,play:df,stop:uf,pause:li,setSpeed:Vc,goToAndStop:qc,goToAndPlay:Rs,setDirection:Qp,playSegments:n1,setSubframe:wh,getDuration:gf,destroy:yh,animationContainerRef:cf,animationLoaded:th,animationItem:_h.current}};function getContainerVisibility(t){var e=t.getBoundingClientRect(),r=e.top,a=e.height,l=window.innerHeight-r,u=window.innerHeight+a;return l/u}function getContainerCursorPosition(t,e,r){var a=t.getBoundingClientRect(),l=a.top,u=a.left,d=a.width,g=a.height,E=(e-u)/d,P=(r-l)/g;return{x:E,y:P}}var useInitInteractivity=function t(e){var r=e.wrapperRef,a=e.animationItem,l=e.mode,u=e.actions;reactExports.useEffect(function(){var d=r.current;if(!(!d||!a||!u.length)){a.stop();var g=function(){var Z=null,me=function(){var He=getContainerVisibility(d),Xe=u.find(function(Do){var sr=Do.visibility;return sr&&He>=sr[0]&&He<=sr[1]});if(Xe){if(Xe.type==="seek"&&Xe.visibility&&Xe.frames.length===2){var wt=Xe.frames[0]+Math.ceil((He-Xe.visibility[0])/(Xe.visibility[1]-Xe.visibility[0])*Xe.frames[1]);//! goToAndStop must be relative to the start of the current segment
a.goToAndStop(wt-a.firstFrame-1,!0)}Xe.type==="loop"&&(Z===null||Z!==Xe.frames||a.isPaused)&&(a.playSegments(Xe.frames,!0),Z=Xe.frames),Xe.type==="play"&&a.isPaused&&(a.resetSegments(!0),a.play()),Xe.type==="stop"&&a.goToAndStop(Xe.frames[0]-a.firstFrame-1,!0)}};return document.addEventListener("scroll",me),function(){document.removeEventListener("scroll",me)}},E=function(){var Z=function(Xe,wt){var Do=Xe,sr=wt;if(Do!==-1&&sr!==-1){var Ko=getContainerCursorPosition(d,Do,sr);Do=Ko.x,sr=Ko.y}var Bs=u.find(function(_h){var cf=_h.position;return cf&&Array.isArray(cf.x)&&Array.isArray(cf.y)?Do>=cf.x[0]&&Do<=cf.x[1]&&sr>=cf.y[0]&&sr<=cf.y[1]:cf&&!Number.isNaN(cf.x)&&!Number.isNaN(cf.y)?Do===cf.x&&sr===cf.y:!1});if(Bs){if(Bs.type==="seek"&&Bs.position&&Array.isArray(Bs.position.x)&&Array.isArray(Bs.position.y)&&Bs.frames.length===2){var th=(Do-Bs.position.x[0])/(Bs.position.x[1]-Bs.position.x[0]),pf=(sr-Bs.position.y[0])/(Bs.position.y[1]-Bs.position.y[0]);a.playSegments(Bs.frames,!0),a.goToAndStop(Math.ceil((th+pf)/2*(Bs.frames[1]-Bs.frames[0])),!0)}Bs.type==="loop"&&a.playSegments(Bs.frames,!0),Bs.type==="play"&&(a.isPaused&&a.resetSegments(!1),a.playSegments(Bs.frames)),Bs.type==="stop"&&a.goToAndStop(Bs.frames[0],!0)}},me=function(Xe){Z(Xe.clientX,Xe.clientY)},_e=function(){Z(-1,-1)};return d.addEventListener("mousemove",me),d.addEventListener("mouseout",_e),function(){d.removeEventListener("mousemove",me),d.removeEventListener("mouseout",_e)}};switch(l){case"scroll":return g();case"cursor":return E()}}},[l,a])},useLottieInteractivity=function t(e){var r=e.actions,a=e.mode,l=e.lottieObj,u=l.animationItem,d=l.View,g=l.animationContainerRef;return useInitInteractivity({actions:r,animationItem:u,mode:a,wrapperRef:g}),d},_excluded=["style","interactivity"],Lottie=function t(e){var r,a,l,u=e.style,d=e.interactivity,g=_objectWithoutProperties(e,_excluded),E=useLottie(g,u),P=E.View,Z=E.play,me=E.stop,_e=E.pause,He=E.setSpeed,Xe=E.goToAndStop,wt=E.goToAndPlay,Do=E.setDirection,sr=E.playSegments,Ko=E.setSubframe,Bs=E.getDuration,th=E.destroy,pf=E.animationContainerRef,_h=E.animationLoaded,cf=E.animationItem;return reactExports.useEffect(function(){e.lottieRef&&(e.lottieRef.current={play:Z,stop:me,pause:_e,setSpeed:He,goToAndPlay:wt,goToAndStop:Xe,setDirection:Do,playSegments:sr,setSubframe:Ko,getDuration:Bs,destroy:th,animationContainerRef:pf,animationLoaded:_h,animationItem:cf})},[(r=e.lottieRef)===null||r===void 0?void 0:r.current]),useLottieInteractivity({lottieObj:{View:P,play:Z,stop:me,pause:_e,setSpeed:He,goToAndStop:Xe,goToAndPlay:wt,setDirection:Do,playSegments:sr,setSubframe:Ko,getDuration:Bs,destroy:th,animationContainerRef:pf,animationLoaded:_h,animationItem:cf},actions:(a=d?.actions)!==null&&a!==void 0?a:[],mode:(l=d?.mode)!==null&&l!==void 0?l:"scroll"})};const v$1="5.5.5",fr$1=25,ip$1=0,op$2=79,w=300,h=150,nm$1="Loading-2",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"icon 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:39,s:[-90]},{t:79,s:[270]}],ix:10},p:{a:0,k:[150,75,0],ix:2},a:{a:0,k:[53,53,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[28,-15.464],[15.464,28],[-28,15.464],[-15.464,-28]],o:[[28,15.464],[-15.464,28],[-28,-15.464],[15.464,-28]],v:[[28,0],[0,28],[-28,0],[0,-28]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1,_render:!0},{ty:"st",c:{a:0,k:[.349,.3529,.3647,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:10,ix:5},lc:2,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1,_render:!0},{ty:"tr",p:{a:0,k:[53,53],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform",_render:!0}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1,_render:!0},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:51,s:[0]},{t:79,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:39,s:[0]},{t:64,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1,_render:!0}],ip:39,op:79,st:39,bm:0,completed:!0},{ddd:0,ind:2,ty:4,nm:"icon",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[-90]},{t:40,s:[270]}],ix:10},p:{a:0,k:[150,75,0],ix:2},a:{a:0,k:[53,53,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[28,-15.464],[15.464,28],[-28,15.464],[-15.464,-28]],o:[[28,15.464],[-15.464,28],[-28,-15.464],[15.464,-28]],v:[[28,0],[0,28],[-28,0],[0,-28]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1,_render:!0},{ty:"st",c:{a:0,k:[.349,.3529,.3647,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:10,ix:5},lc:2,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1,_render:!0},{ty:"tr",p:{a:0,k:[53,53],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform",_render:!0}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1,_render:!0},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:12,s:[0]},{t:40,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:25,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1,_render:!0}],ip:0,op:40,st:0,bm:0,completed:!0}],markers=[],__complete=!0,loadingAnim={v:v$1,fr:fr$1,ip:ip$1,op:op$2,w,h,nm:nm$1,ddd,assets,layers,markers,__complete};class SourceLocation{constructor(e,r,a){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=a}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new SourceLocation(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Token{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new Token(r,SourceLocation.range(this,e))}}class ParseError{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var a="KaTeX parse error: "+e,l,u,d=r&&r.loc;if(d&&d.start<=d.end){var g=d.lexer.input;l=d.start,u=d.end,l===g.length?a+=" at end of input: ":a+=" at position "+(l+1)+": ";var E=g.slice(l,u).replace(/[^]/g,"$&"),P;l>15?P=""+g.slice(l-15,l):P=g.slice(0,l);var Z;u+15<g.length?Z=g.slice(u,u+15)+"":Z=g.slice(u),a+=P+E+Z}var me=new Error(a);return me.name="ParseError",me.__proto__=ParseError.prototype,me.position=l,l!=null&&u!=null&&(me.length=u-l),me.rawMessage=e,me}}ParseError.prototype.__proto__=Error.prototype;var contains=function t(e,r){return e.indexOf(r)!==-1},deflt=function t(e,r){return e===void 0?r:e},uppercase=/([A-Z])/g,hyphenate=function t(e){return e.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape(t){return String(t).replace(ESCAPE_REGEX,e=>ESCAPE_LOOKUP[e])}var getBaseElem=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},isCharacterBox=function t(e){var r=getBaseElem(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},assert=function t(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},protocolFromUrl=function t(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},utils={contains,deflt,escape,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl},SETTINGS_SCHEMA={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function getDefaultValue(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}let Settings$1=class{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in SETTINGS_SCHEMA)if(SETTINGS_SCHEMA.hasOwnProperty(r)){var a=SETTINGS_SCHEMA[r];this[r]=e[r]!==void 0?a.processor?a.processor(e[r]):e[r]:getDefaultValue(a)}}reportNonstrict(e,r,a){var l=this.strict;if(typeof l=="function"&&(l=l(e,r,a)),!(!l||l==="ignore")){if(l===!0||l==="error")throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),a);l==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+l+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,a){var l=this.strict;if(typeof l=="function")try{l=l(e,r,a)}catch{l="error"}return!l||l==="ignore"?!1:l===!0||l==="error"?!0:l==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+l+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=utils.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var a=typeof this.trust=="function"?this.trust(e):this.trust;return!!a}};class Style{constructor(e,r,a){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=a}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D=0,Dc$1=1,T$1=2,Tc$1=3,S$1=4,Sc$1=5,SS=6,SSc=7,styles=[new Style(D,0,!1),new Style(Dc$1,0,!0),new Style(T$1,1,!1),new Style(Tc$1,1,!0),new Style(S$1,2,!1),new Style(Sc$1,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S$1,Sc$1,S$1,Sc$1,SS,SSc,SS,SSc],sub=[Sc$1,Sc$1,Sc$1,Sc$1,SSc,SSc,SSc,SSc],fracNum=[T$1,Tc$1,S$1,Sc$1,SS,SSc,SS,SSc],fracDen=[Tc$1,Tc$1,Sc$1,Sc$1,SSc,SSc,SSc,SSc],cramp=[Dc$1,Dc$1,Tc$1,Tc$1,Sc$1,Sc$1,SSc,SSc],text$1=[D,Dc$1,T$1,Tc$1,T$1,Tc$1,T$1,Tc$1],Style$1={DISPLAY:styles[D],TEXT:styles[T$1],SCRIPT:styles[S$1],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(t){for(var e=0;e<scriptData.length;e++)for(var r=scriptData[e],a=0;a<r.blocks.length;a++){var l=r.blocks[a];if(t>=l[0]&&t<=l[1])return r.name}return null}var allBlocks=[];scriptData.forEach(t=>t.blocks.forEach(e=>allBlocks.push(...e)));function supportedCodepoint(t){for(var e=0;e<allBlocks.length;e+=2)if(t>=allBlocks[e]&&t<=allBlocks[e+1])return!0;return!1}var hLinePad=80,sqrtMain=function t(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},sqrtSize1=function t(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},sqrtSize2=function t(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},sqrtSize3=function t(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},sqrtSize4=function t(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},phasePath=function t(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},sqrtTall=function t(e,r,a){var l=a-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+l+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},sqrtPath=function t(e,r,a){r=1e3*r;var l="";switch(e){case"sqrtMain":l=sqrtMain(r,hLinePad);break;case"sqrtSize1":l=sqrtSize1(r,hLinePad);break;case"sqrtSize2":l=sqrtSize2(r,hLinePad);break;case"sqrtSize3":l=sqrtSize3(r,hLinePad);break;case"sqrtSize4":l=sqrtSize4(r,hLinePad);break;case"sqrtTall":l=sqrtTall(r,hLinePad,a)}return l},innerPath=function t(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},path={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function t(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class DocumentFragment{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return utils.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sigmasAndXis={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},extraCharacterMap={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function setFontMetrics(t,e){fontMetricsData[t]=e}function getCharacterMetrics(t,e,r){if(!fontMetricsData[e])throw new Error("Font metrics not found for font: "+e+".");var a=t.charCodeAt(0),l=fontMetricsData[e][a];if(!l&&t[0]in extraCharacterMap&&(a=extraCharacterMap[t[0]].charCodeAt(0),l=fontMetricsData[e][a]),!l&&r==="text"&&supportedCodepoint(a)&&(l=fontMetricsData[e][77]),l)return{depth:l[0],height:l[1],italic:l[2],skew:l[3],width:l[4]}}var fontMetricsBySizeIndex={};function getGlobalMetrics(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!fontMetricsBySizeIndex[e]){var r=fontMetricsBySizeIndex[e]={cssEmPerMu:sigmasAndXis.quad[e]/18};for(var a in sigmasAndXis)sigmasAndXis.hasOwnProperty(a)&&(r[a]=sigmasAndXis[a][e])}return fontMetricsBySizeIndex[e]}var sizeStyleMap=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],sizeMultipliers=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],sizeAtStyle=function t(e,r){return r.size<2?e:sizeStyleMap[e-1][r.size-1]};class Options{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Options.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=sizeMultipliers[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);return new Options(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:sizeAtStyle(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:sizeMultipliers[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=sizeAtStyle(Options.BASESIZE,e);return this.size===r&&this.textSize===Options.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Options.BASESIZE?["sizing","reset-size"+this.size,"size"+Options.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=getGlobalMetrics(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Options.BASESIZE=6;var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function t(e){return typeof e!="string"&&(e=e.unit),e in ptPerUnit||e in relativeUnit||e==="ex"},calculateSize=function t(e,r){var a;if(e.unit in ptPerUnit)a=ptPerUnit[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")a=r.fontMetrics().cssEmPerMu;else{var l;if(r.style.isTight()?l=r.havingStyle(r.style.text()):l=r,e.unit==="ex")a=l.fontMetrics().xHeight;else if(e.unit==="em")a=l.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+e.unit+"'");l!==r&&(a*=l.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*a,r.maxSize)},makeEm=function t(e){return+e.toFixed(4)+"em"},createClass=function t(e){return e.filter(r=>r).join(" ")},initNode=function t(e,r,a){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=a||{},r){r.style.isTight()&&this.classes.push("mtight");var l=r.getColor();l&&(this.style.color=l)}},toNode=function t(e){var r=document.createElement(e);r.className=createClass(this.classes);for(var a in this.style)this.style.hasOwnProperty(a)&&(r.style[a]=this.style[a]);for(var l in this.attributes)this.attributes.hasOwnProperty(l)&&r.setAttribute(l,this.attributes[l]);for(var u=0;u<this.children.length;u++)r.appendChild(this.children[u].toNode());return r},invalidAttributeNameRegex=/[\s"'>/=\x00-\x1f]/,toMarkup=function t(e){var r="<"+e;this.classes.length&&(r+=' class="'+utils.escape(createClass(this.classes))+'"');var a="";for(var l in this.style)this.style.hasOwnProperty(l)&&(a+=utils.hyphenate(l)+":"+this.style[l]+";");a&&(r+=' style="'+utils.escape(a)+'"');for(var u in this.attributes)if(this.attributes.hasOwnProperty(u)){if(invalidAttributeNameRegex.test(u))throw new ParseError("Invalid attribute name '"+u+"'");r+=" "+u+'="'+utils.escape(this.attributes[u])+'"'}r+=">";for(var d=0;d<this.children.length;d++)r+=this.children[d].toMarkup();return r+="</"+e+">",r};class Span{constructor(e,r,a,l){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,e,a,l),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(e,r,a,l){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,r,l),this.children=a||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(e,r,a){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=a}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+utils.escape(this.src)+'"'+(' alt="'+utils.escape(this.alt)+'"'),r="";for(var a in this.style)this.style.hasOwnProperty(a)&&(r+=utils.hyphenate(a)+":"+this.style[a]+";");return r&&(e+=' style="'+utils.escape(r)+'"'),e+="'/>",e}}var iCombinations={:"",:"",:"",:""};class SymbolNode{constructor(e,r,a,l,u,d,g,E){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=a||0,this.italic=l||0,this.skew=u||0,this.width=d||0,this.classes=g||[],this.style=E||{},this.maxFontSize=0;var P=scriptFromCodepoint(this.text.charCodeAt(0));P&&this.classes.push(P+"_fallback"),/[]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=createClass(this.classes));for(var a in this.style)this.style.hasOwnProperty(a)&&(r=r||document.createElement("span"),r.style[a]=this.style[a]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=utils.escape(createClass(this.classes)),r+='"');var a="";this.italic>0&&(a+="margin-right:"+this.italic+"em;");for(var l in this.style)this.style.hasOwnProperty(l)&&(a+=utils.hyphenate(l)+":"+this.style[l]+";");a&&(e=!0,r+=' style="'+utils.escape(a)+'"');var u=utils.escape(this.text);return e?(r+=">",r+=u,r+="</span>",r):u}}class SvgNode{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&r.setAttribute(a,this.attributes[a]);for(var l=0;l<this.children.length;l++)r.appendChild(this.children[l].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+utils.escape(this.attributes[r])+'"');e+=">";for(var a=0;a<this.children.length;a++)e+=this.children[a].toMarkup();return e+="</svg>",e}}class PathNode{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",path[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path[this.pathName])+'"/>'}}class LineNode{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&r.setAttribute(a,this.attributes[a]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+utils.escape(this.attributes[r])+'"');return e+="/>",e}}function assertSymbolDomNode(t){if(t instanceof SymbolNode)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function assertSpan(t){if(t instanceof Span)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var ATOMS={bin:1,close:1,inner:1,open:1,punct:1,rel:1},NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(t,e,r,a,l,u){symbols[t][l]={font:e,group:r,replace:a},u&&a&&(symbols[t][a]=symbols[t][l])}var math="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op$1="op-token",open="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math,main,rel,"","\\equiv",!0);defineSymbol(math,main,rel,"","\\prec",!0);defineSymbol(math,main,rel,"","\\succ",!0);defineSymbol(math,main,rel,"","\\sim",!0);defineSymbol(math,main,rel,"","\\perp");defineSymbol(math,main,rel,"","\\preceq",!0);defineSymbol(math,main,rel,"","\\succeq",!0);defineSymbol(math,main,rel,"","\\simeq",!0);defineSymbol(math,main,rel,"","\\mid",!0);defineSymbol(math,main,rel,"","\\ll",!0);defineSymbol(math,main,rel,"","\\gg",!0);defineSymbol(math,main,rel,"","\\asymp",!0);defineSymbol(math,main,rel,"","\\parallel");defineSymbol(math,main,rel,"","\\bowtie",!0);defineSymbol(math,main,rel,"","\\smile",!0);defineSymbol(math,main,rel,"","\\sqsubseteq",!0);defineSymbol(math,main,rel,"","\\sqsupseteq",!0);defineSymbol(math,main,rel,"","\\doteq",!0);defineSymbol(math,main,rel,"","\\frown",!0);defineSymbol(math,main,rel,"","\\ni",!0);defineSymbol(math,main,rel,"","\\propto",!0);defineSymbol(math,main,rel,"","\\vdash",!0);defineSymbol(math,main,rel,"","\\dashv",!0);defineSymbol(math,main,rel,"","\\owns");defineSymbol(math,main,punct,".","\\ldotp");defineSymbol(math,main,punct,"","\\cdotp");defineSymbol(math,main,textord,"#","\\#");defineSymbol(text,main,textord,"#","\\#");defineSymbol(math,main,textord,"&","\\&");defineSymbol(text,main,textord,"&","\\&");defineSymbol(math,main,textord,"","\\aleph",!0);defineSymbol(math,main,textord,"","\\forall",!0);defineSymbol(math,main,textord,"","\\hbar",!0);defineSymbol(math,main,textord,"","\\exists",!0);defineSymbol(math,main,textord,"","\\nabla",!0);defineSymbol(math,main,textord,"","\\flat",!0);defineSymbol(math,main,textord,"","\\ell",!0);defineSymbol(math,main,textord,"","\\natural",!0);defineSymbol(math,main,textord,"","\\clubsuit",!0);defineSymbol(math,main,textord,"","\\wp",!0);defineSymbol(math,main,textord,"","\\sharp",!0);defineSymbol(math,main,textord,"","\\diamondsuit",!0);defineSymbol(math,main,textord,"","\\Re",!0);defineSymbol(math,main,textord,"","\\heartsuit",!0);defineSymbol(math,main,textord,"","\\Im",!0);defineSymbol(math,main,textord,"","\\spadesuit",!0);defineSymbol(math,main,textord,"","\\S",!0);defineSymbol(text,main,textord,"","\\S");defineSymbol(math,main,textord,"","\\P",!0);defineSymbol(text,main,textord,"","\\P");defineSymbol(math,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\textdagger");defineSymbol(math,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\textdaggerdbl");defineSymbol(math,main,close,"","\\rmoustache",!0);defineSymbol(math,main,open,"","\\lmoustache",!0);defineSymbol(math,main,close,"","\\rgroup",!0);defineSymbol(math,main,open,"","\\lgroup",!0);defineSymbol(math,main,bin,"","\\mp",!0);defineSymbol(math,main,bin,"","\\ominus",!0);defineSymbol(math,main,bin,"","\\uplus",!0);defineSymbol(math,main,bin,"","\\sqcap",!0);defineSymbol(math,main,bin,"","\\ast");defineSymbol(math,main,bin,"","\\sqcup",!0);defineSymbol(math,main,bin,"","\\bigcirc",!0);defineSymbol(math,main,bin,"","\\bullet",!0);defineSymbol(math,main,bin,"","\\ddagger");defineSymbol(math,main,bin,"","\\wr",!0);defineSymbol(math,main,bin,"","\\amalg");defineSymbol(math,main,bin,"&","\\And");defineSymbol(math,main,rel,"","\\longleftarrow",!0);defineSymbol(math,main,rel,"","\\Leftarrow",!0);defineSymbol(math,main,rel,"","\\Longleftarrow",!0);defineSymbol(math,main,rel,"","\\longrightarrow",!0);defineSymbol(math,main,rel,"","\\Rightarrow",!0);defineSymbol(math,main,rel,"","\\Longrightarrow",!0);defineSymbol(math,main,rel,"","\\leftrightarrow",!0);defineSymbol(math,main,rel,"","\\longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\Leftrightarrow",!0);defineSymbol(math,main,rel,"","\\Longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\mapsto",!0);defineSymbol(math,main,rel,"","\\longmapsto",!0);defineSymbol(math,main,rel,"","\\nearrow",!0);defineSymbol(math,main,rel,"","\\hookleftarrow",!0);defineSymbol(math,main,rel,"","\\hookrightarrow",!0);defineSymbol(math,main,rel,"","\\searrow",!0);defineSymbol(math,main,rel,"","\\leftharpoonup",!0);defineSymbol(math,main,rel,"","\\rightharpoonup",!0);defineSymbol(math,main,rel,"","\\swarrow",!0);defineSymbol(math,main,rel,"","\\leftharpoondown",!0);defineSymbol(math,main,rel,"","\\rightharpoondown",!0);defineSymbol(math,main,rel,"","\\nwarrow",!0);defineSymbol(math,main,rel,"","\\rightleftharpoons",!0);defineSymbol(math,ams,rel,"","\\nless",!0);defineSymbol(math,ams,rel,"","\\@nleqslant");defineSymbol(math,ams,rel,"","\\@nleqq");defineSymbol(math,ams,rel,"","\\lneq",!0);defineSymbol(math,ams,rel,"","\\lneqq",!0);defineSymbol(math,ams,rel,"","\\@lvertneqq");defineSymbol(math,ams,rel,"","\\lnsim",!0);defineSymbol(math,ams,rel,"","\\lnapprox",!0);defineSymbol(math,ams,rel,"","\\nprec",!0);defineSymbol(math,ams,rel,"","\\npreceq",!0);defineSymbol(math,ams,rel,"","\\precnsim",!0);defineSymbol(math,ams,rel,"","\\precnapprox",!0);defineSymbol(math,ams,rel,"","\\nsim",!0);defineSymbol(math,ams,rel,"","\\@nshortmid");defineSymbol(math,ams,rel,"","\\nmid",!0);defineSymbol(math,ams,rel,"","\\nvdash",!0);defineSymbol(math,ams,rel,"","\\nvDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleleft");defineSymbol(math,ams,rel,"","\\ntrianglelefteq",!0);defineSymbol(math,ams,rel,"","\\subsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneq");defineSymbol(math,ams,rel,"","\\subsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneqq");defineSymbol(math,ams,rel,"","\\ngtr",!0);defineSymbol(math,ams,rel,"","\\@ngeqslant");defineSymbol(math,ams,rel,"","\\@ngeqq");defineSymbol(math,ams,rel,"","\\gneq",!0);defineSymbol(math,ams,rel,"","\\gneqq",!0);defineSymbol(math,ams,rel,"","\\@gvertneqq");defineSymbol(math,ams,rel,"","\\gnsim",!0);defineSymbol(math,ams,rel,"","\\gnapprox",!0);defineSymbol(math,ams,rel,"","\\nsucc",!0);defineSymbol(math,ams,rel,"","\\nsucceq",!0);defineSymbol(math,ams,rel,"","\\succnsim",!0);defineSymbol(math,ams,rel,"","\\succnapprox",!0);defineSymbol(math,ams,rel,"","\\ncong",!0);defineSymbol(math,ams,rel,"","\\@nshortparallel");defineSymbol(math,ams,rel,"","\\nparallel",!0);defineSymbol(math,ams,rel,"","\\nVDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleright");defineSymbol(math,ams,rel,"","\\ntrianglerighteq",!0);defineSymbol(math,ams,rel,"","\\@nsupseteqq");defineSymbol(math,ams,rel,"","\\supsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneq");defineSymbol(math,ams,rel,"","\\supsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneqq");defineSymbol(math,ams,rel,"","\\nVdash",!0);defineSymbol(math,ams,rel,"","\\precneqq",!0);defineSymbol(math,ams,rel,"","\\succneqq",!0);defineSymbol(math,ams,rel,"","\\@nsubseteqq");defineSymbol(math,ams,bin,"","\\unlhd");defineSymbol(math,ams,bin,"","\\unrhd");defineSymbol(math,ams,rel,"","\\nleftarrow",!0);defineSymbol(math,ams,rel,"","\\nrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftarrow",!0);defineSymbol(math,ams,rel,"","\\nRightarrow",!0);defineSymbol(math,ams,rel,"","\\nleftrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftrightarrow",!0);defineSymbol(math,ams,rel,"","\\vartriangle");defineSymbol(math,ams,textord,"","\\hslash");defineSymbol(math,ams,textord,"","\\triangledown");defineSymbol(math,ams,textord,"","\\lozenge");defineSymbol(math,ams,textord,"","\\circledS");defineSymbol(math,ams,textord,"","\\circledR");defineSymbol(text,ams,textord,"","\\circledR");defineSymbol(math,ams,textord,"","\\measuredangle",!0);defineSymbol(math,ams,textord,"","\\nexists");defineSymbol(math,ams,textord,"","\\mho");defineSymbol(math,ams,textord,"","\\Finv",!0);defineSymbol(math,ams,textord,"","\\Game",!0);defineSymbol(math,ams,textord,"","\\backprime");defineSymbol(math,ams,textord,"","\\blacktriangle");defineSymbol(math,ams,textord,"","\\blacktriangledown");defineSymbol(math,ams,textord,"","\\blacksquare");defineSymbol(math,ams,textord,"","\\blacklozenge");defineSymbol(math,ams,textord,"","\\bigstar");defineSymbol(math,ams,textord,"","\\sphericalangle",!0);defineSymbol(math,ams,textord,"","\\complement",!0);defineSymbol(math,ams,textord,"","\\eth",!0);defineSymbol(text,main,textord,"","");defineSymbol(math,ams,textord,"","\\diagup");defineSymbol(math,ams,textord,"","\\diagdown");defineSymbol(math,ams,textord,"","\\square");defineSymbol(math,ams,textord,"","\\Box");defineSymbol(math,ams,textord,"","\\Diamond");defineSymbol(math,ams,textord,"","\\yen",!0);defineSymbol(text,ams,textord,"","\\yen",!0);defineSymbol(math,ams,textord,"","\\checkmark",!0);defineSymbol(text,ams,textord,"","\\checkmark");defineSymbol(math,ams,textord,"","\\beth",!0);defineSymbol(math,ams,textord,"","\\daleth",!0);defineSymbol(math,ams,textord,"","\\gimel",!0);defineSymbol(math,ams,textord,"","\\digamma",!0);defineSymbol(math,ams,textord,"","\\varkappa");defineSymbol(math,ams,open,"","\\@ulcorner",!0);defineSymbol(math,ams,close,"","\\@urcorner",!0);defineSymbol(math,ams,open,"","\\@llcorner",!0);defineSymbol(math,ams,close,"","\\@lrcorner",!0);defineSymbol(math,ams,rel,"","\\leqq",!0);defineSymbol(math,ams,rel,"","\\leqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantless",!0);defineSymbol(math,ams,rel,"","\\lesssim",!0);defineSymbol(math,ams,rel,"","\\lessapprox",!0);defineSymbol(math,ams,rel,"","\\approxeq",!0);defineSymbol(math,ams,bin,"","\\lessdot");defineSymbol(math,ams,rel,"","\\lll",!0);defineSymbol(math,ams,rel,"","\\lessgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqqgtr",!0);defineSymbol(math,ams,rel,"","\\doteqdot");defineSymbol(math,ams,rel,"","\\risingdotseq",!0);defineSymbol(math,ams,rel,"","\\fallingdotseq",!0);defineSymbol(math,ams,rel,"","\\backsim",!0);defineSymbol(math,ams,rel,"","\\backsimeq",!0);defineSymbol(math,ams,rel,"","\\subseteqq",!0);defineSymbol(math,ams,rel,"","\\Subset",!0);defineSymbol(math,ams,rel,"","\\sqsubset",!0);defineSymbol(math,ams,rel,"","\\preccurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqprec",!0);defineSymbol(math,ams,rel,"","\\precsim",!0);defineSymbol(math,ams,rel,"","\\precapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleleft");defineSymbol(math,ams,rel,"","\\trianglelefteq");defineSymbol(math,ams,rel,"","\\vDash",!0);defineSymbol(math,ams,rel,"","\\Vvdash",!0);defineSymbol(math,ams,rel,"","\\smallsmile");defineSymbol(math,ams,rel,"","\\smallfrown");defineSymbol(math,ams,rel,"","\\bumpeq",!0);defineSymbol(math,ams,rel,"","\\Bumpeq",!0);defineSymbol(math,ams,rel,"","\\geqq",!0);defineSymbol(math,ams,rel,"","\\geqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantgtr",!0);defineSymbol(math,ams,rel,"","\\gtrsim",!0);defineSymbol(math,ams,rel,"","\\gtrapprox",!0);defineSymbol(math,ams,bin,"","\\gtrdot");defineSymbol(math,ams,rel,"","\\ggg",!0);defineSymbol(math,ams,rel,"","\\gtrless",!0);defineSymbol(math,ams,rel,"","\\gtreqless",!0);defineSymbol(math,ams,rel,"","\\gtreqqless",!0);defineSymbol(math,ams,rel,"","\\eqcirc",!0);defineSymbol(math,ams,rel,"","\\circeq",!0);defineSymbol(math,ams,rel,"","\\triangleq",!0);defineSymbol(math,ams,rel,"","\\thicksim");defineSymbol(math,ams,rel,"","\\thickapprox");defineSymbol(math,ams,rel,"","\\supseteqq",!0);defineSymbol(math,ams,rel,"","\\Supset",!0);defineSymbol(math,ams,rel,"","\\sqsupset",!0);defineSymbol(math,ams,rel,"","\\succcurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqsucc",!0);defineSymbol(math,ams,rel,"","\\succsim",!0);defineSymbol(math,ams,rel,"","\\succapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleright");defineSymbol(math,ams,rel,"","\\trianglerighteq");defineSymbol(math,ams,rel,"","\\Vdash",!0);defineSymbol(math,ams,rel,"","\\shortmid");defineSymbol(math,ams,rel,"","\\shortparallel");defineSymbol(math,ams,rel,"","\\between",!0);defineSymbol(math,ams,rel,"","\\pitchfork",!0);defineSymbol(math,ams,rel,"","\\varpropto");defineSymbol(math,ams,rel,"","\\blacktriangleleft");defineSymbol(math,ams,rel,"","\\therefore",!0);defineSymbol(math,ams,rel,"","\\backepsilon");defineSymbol(math,ams,rel,"","\\blacktriangleright");defineSymbol(math,ams,rel,"","\\because",!0);defineSymbol(math,ams,rel,"","\\llless");defineSymbol(math,ams,rel,"","\\gggtr");defineSymbol(math,ams,bin,"","\\lhd");defineSymbol(math,ams,bin,"","\\rhd");defineSymbol(math,ams,rel,"","\\eqsim",!0);defineSymbol(math,main,rel,"","\\Join");defineSymbol(math,ams,rel,"","\\Doteq",!0);defineSymbol(math,ams,bin,"","\\dotplus",!0);defineSymbol(math,ams,bin,"","\\smallsetminus");defineSymbol(math,ams,bin,"","\\Cap",!0);defineSymbol(math,ams,bin,"","\\Cup",!0);defineSymbol(math,ams,bin,"","\\doublebarwedge",!0);defineSymbol(math,ams,bin,"","\\boxminus",!0);defineSymbol(math,ams,bin,"","\\boxplus",!0);defineSymbol(math,ams,bin,"","\\divideontimes",!0);defineSymbol(math,ams,bin,"","\\ltimes",!0);defineSymbol(math,ams,bin,"","\\rtimes",!0);defineSymbol(math,ams,bin,"","\\leftthreetimes",!0);defineSymbol(math,ams,bin,"","\\rightthreetimes",!0);defineSymbol(math,ams,bin,"","\\curlywedge",!0);defineSymbol(math,ams,bin,"","\\curlyvee",!0);defineSymbol(math,ams,bin,"","\\circleddash",!0);defineSymbol(math,ams,bin,"","\\circledast",!0);defineSymbol(math,ams,bin,"","\\centerdot");defineSymbol(math,ams,bin,"","\\intercal",!0);defineSymbol(math,ams,bin,"","\\doublecap");defineSymbol(math,ams,bin,"","\\doublecup");defineSymbol(math,ams,bin,"","\\boxtimes",!0);defineSymbol(math,ams,rel,"","\\dashrightarrow",!0);defineSymbol(math,ams,rel,"","\\dashleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftleftarrows",!0);defineSymbol(math,ams,rel,"","\\leftrightarrows",!0);defineSymbol(math,ams,rel,"","\\Lleftarrow",!0);defineSymbol(math,ams,rel,"","\\twoheadleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowleft",!0);defineSymbol(math,ams,rel,"","\\leftrightharpoons",!0);defineSymbol(math,ams,rel,"","\\curvearrowleft",!0);defineSymbol(math,ams,rel,"","\\circlearrowleft",!0);defineSymbol(math,ams,rel,"","\\Lsh",!0);defineSymbol(math,ams,rel,"","\\upuparrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonleft",!0);defineSymbol(math,ams,rel,"","\\downharpoonleft",!0);defineSymbol(math,main,rel,"","\\origof",!0);defineSymbol(math,main,rel,"","\\imageof",!0);defineSymbol(math,ams,rel,"","\\multimap",!0);defineSymbol(math,ams,rel,"","\\leftrightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\rightrightarrows",!0);defineSymbol(math,ams,rel,"","\\rightleftarrows",!0);defineSymbol(math,ams,rel,"","\\twoheadrightarrow",!0);defineSymbol(math,ams,rel,"","\\rightarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowright",!0);defineSymbol(math,ams,rel,"","\\curvearrowright",!0);defineSymbol(math,ams,rel,"","\\circlearrowright",!0);defineSymbol(math,ams,rel,"","\\Rsh",!0);defineSymbol(math,ams,rel,"","\\downdownarrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonright",!0);defineSymbol(math,ams,rel,"","\\downharpoonright",!0);defineSymbol(math,ams,rel,"","\\rightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\leadsto");defineSymbol(math,ams,rel,"","\\Rrightarrow",!0);defineSymbol(math,ams,rel,"","\\restriction");defineSymbol(math,main,textord,"","`");defineSymbol(math,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\textdollar");defineSymbol(math,main,textord,"%","\\%");defineSymbol(text,main,textord,"%","\\%");defineSymbol(math,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\textunderscore");defineSymbol(math,main,textord,"","\\angle",!0);defineSymbol(math,main,textord,"","\\infty",!0);defineSymbol(math,main,textord,"","\\prime");defineSymbol(math,main,textord,"","\\triangle");defineSymbol(math,main,textord,"","\\Gamma",!0);defineSymbol(math,main,textord,"","\\Delta",!0);defineSymbol(math,main,textord,"","\\Theta",!0);defineSymbol(math,main,textord,"","\\Lambda",!0);defineSymbol(math,main,textord,"","\\Xi",!0);defineSymbol(math,main,textord,"","\\Pi",!0);defineSymbol(math,main,textord,"","\\Sigma",!0);defineSymbol(math,main,textord,"","\\Upsilon",!0);defineSymbol(math,main,textord,"","\\Phi",!0);defineSymbol(math,main,textord,"","\\Psi",!0);defineSymbol(math,main,textord,"","\\Omega",!0);defineSymbol(math,main,textord,"A","");defineSymbol(math,main,textord,"B","");defineSymbol(math,main,textord,"E","");defineSymbol(math,main,textord,"Z","");defineSymbol(math,main,textord,"H","");defineSymbol(math,main,textord,"I","");defineSymbol(math,main,textord,"K","");defineSymbol(math,main,textord,"M","");defineSymbol(math,main,textord,"N","");defineSymbol(math,main,textord,"O","");defineSymbol(math,main,textord,"P","");defineSymbol(math,main,textord,"T","");defineSymbol(math,main,textord,"X","");defineSymbol(math,main,textord,"","\\neg",!0);defineSymbol(math,main,textord,"","\\lnot");defineSymbol(math,main,textord,"","\\top");defineSymbol(math,main,textord,"","\\bot");defineSymbol(math,main,textord,"","\\emptyset");defineSymbol(math,ams,textord,"","\\varnothing");defineSymbol(math,main,mathord,"","\\alpha",!0);defineSymbol(math,main,mathord,"","\\beta",!0);defineSymbol(math,main,mathord,"","\\gamma",!0);defineSymbol(math,main,mathord,"","\\delta",!0);defineSymbol(math,main,mathord,"","\\epsilon",!0);defineSymbol(math,main,mathord,"","\\zeta",!0);defineSymbol(math,main,mathord,"","\\eta",!0);defineSymbol(math,main,mathord,"","\\theta",!0);defineSymbol(math,main,mathord,"","\\iota",!0);defineSymbol(math,main,mathord,"","\\kappa",!0);defineSymbol(math,main,mathord,"","\\lambda",!0);defineSymbol(math,main,mathord,"","\\mu",!0);defineSymbol(math,main,mathord,"","\\nu",!0);defineSymbol(math,main,mathord,"","\\xi",!0);defineSymbol(math,main,mathord,"","\\omicron",!0);defineSymbol(math,main,mathord,"","\\pi",!0);defineSymbol(math,main,mathord,"","\\rho",!0);defineSymbol(math,main,mathord,"","\\sigma",!0);defineSymbol(math,main,mathord,"","\\tau",!0);defineSymbol(math,main,mathord,"","\\upsilon",!0);defineSymbol(math,main,mathord,"","\\phi",!0);defineSymbol(math,main,mathord,"","\\chi",!0);defineSymbol(math,main,mathord,"","\\psi",!0);defineSymbol(math,main,mathord,"","\\omega",!0);defineSymbol(math,main,mathord,"","\\varepsilon",!0);defineSymbol(math,main,mathord,"","\\vartheta",!0);defineSymbol(math,main,mathord,"","\\varpi",!0);defineSymbol(math,main,mathord,"","\\varrho",!0);defineSymbol(math,main,mathord,"","\\varsigma",!0);defineSymbol(math,main,mathord,"","\\varphi",!0);defineSymbol(math,main,bin,"","*",!0);defineSymbol(math,main,bin,"+","+");defineSymbol(math,main,bin,"","-",!0);defineSymbol(math,main,bin,"","\\cdot",!0);defineSymbol(math,main,bin,"","\\circ",!0);defineSymbol(math,main,bin,"","\\div",!0);defineSymbol(math,main,bin,"","\\pm",!0);defineSymbol(math,main,bin,"","\\times",!0);defineSymbol(math,main,bin,"","\\cap",!0);defineSymbol(math,main,bin,"","\\cup",!0);defineSymbol(math,main,bin,"","\\setminus",!0);defineSymbol(math,main,bin,"","\\land");defineSymbol(math,main,bin,"","\\lor");defineSymbol(math,main,bin,"","\\wedge",!0);defineSymbol(math,main,bin,"","\\vee",!0);defineSymbol(math,main,textord,"","\\surd");defineSymbol(math,main,open,"","\\langle",!0);defineSymbol(math,main,open,"","\\lvert");defineSymbol(math,main,open,"","\\lVert");defineSymbol(math,main,close,"?","?");defineSymbol(math,main,close,"!","!");defineSymbol(math,main,close,"","\\rangle",!0);defineSymbol(math,main,close,"","\\rvert");defineSymbol(math,main,close,"","\\rVert");defineSymbol(math,main,rel,"=","=");defineSymbol(math,main,rel,":",":");defineSymbol(math,main,rel,"","\\approx",!0);defineSymbol(math,main,rel,"","\\cong",!0);defineSymbol(math,main,rel,"","\\ge");defineSymbol(math,main,rel,"","\\geq",!0);defineSymbol(math,main,rel,"","\\gets");defineSymbol(math,main,rel,">","\\gt",!0);defineSymbol(math,main,rel,"","\\in",!0);defineSymbol(math,main,rel,"","\\@not");defineSymbol(math,main,rel,"","\\subset",!0);defineSymbol(math,main,rel,"","\\supset",!0);defineSymbol(math,main,rel,"","\\subseteq",!0);defineSymbol(math,main,rel,"","\\supseteq",!0);defineSymbol(math,ams,rel,"","\\nsubseteq",!0);defineSymbol(math,ams,rel,"","\\nsupseteq",!0);defineSymbol(math,main,rel,"","\\models");defineSymbol(math,main,rel,"","\\leftarrow",!0);defineSymbol(math,main,rel,"","\\le");defineSymbol(math,main,rel,"","\\leq",!0);defineSymbol(math,main,rel,"<","\\lt",!0);defineSymbol(math,main,rel,"","\\rightarrow",!0);defineSymbol(math,main,rel,"","\\to");defineSymbol(math,ams,rel,"","\\ngeq",!0);defineSymbol(math,ams,rel,"","\\nleq",!0);defineSymbol(math,main,spacing,"","\\ ");defineSymbol(math,main,spacing,"","\\space");defineSymbol(math,main,spacing,"","\\nobreakspace");defineSymbol(text,main,spacing,"","\\ ");defineSymbol(text,main,spacing,""," ");defineSymbol(text,main,spacing,"","\\space");defineSymbol(text,main,spacing,"","\\nobreakspace");defineSymbol(math,main,spacing,null,"\\nobreak");defineSymbol(math,main,spacing,null,"\\allowbreak");defineSymbol(math,main,punct,",",",");defineSymbol(math,main,punct,";",";");defineSymbol(math,ams,bin,"","\\barwedge",!0);defineSymbol(math,ams,bin,"","\\veebar",!0);defineSymbol(math,main,bin,"","\\odot",!0);defineSymbol(math,main,bin,"","\\oplus",!0);defineSymbol(math,main,bin,"","\\otimes",!0);defineSymbol(math,main,textord,"","\\partial",!0);defineSymbol(math,main,bin,"","\\oslash",!0);defineSymbol(math,ams,bin,"","\\circledcirc",!0);defineSymbol(math,ams,bin,"","\\boxdot",!0);defineSymbol(math,main,bin,"","\\bigtriangleup");defineSymbol(math,main,bin,"","\\bigtriangledown");defineSymbol(math,main,bin,"","\\dagger");defineSymbol(math,main,bin,"","\\diamond");defineSymbol(math,main,bin,"","\\star");defineSymbol(math,main,bin,"","\\triangleleft");defineSymbol(math,main,bin,"","\\triangleright");defineSymbol(math,main,open,"{","\\{");defineSymbol(text,main,textord,"{","\\{");defineSymbol(text,main,textord,"{","\\textbraceleft");defineSymbol(math,main,close,"}","\\}");defineSymbol(text,main,textord,"}","\\}");defineSymbol(text,main,textord,"}","\\textbraceright");defineSymbol(math,main,open,"{","\\lbrace");defineSymbol(math,main,close,"}","\\rbrace");defineSymbol(math,main,open,"[","\\lbrack",!0);defineSymbol(text,main,textord,"[","\\lbrack",!0);defineSymbol(math,main,close,"]","\\rbrack",!0);defineSymbol(text,main,textord,"]","\\rbrack",!0);defineSymbol(math,main,open,"(","\\lparen",!0);defineSymbol(math,main,close,")","\\rparen",!0);defineSymbol(text,main,textord,"<","\\textless",!0);defineSymbol(text,main,textord,">","\\textgreater",!0);defineSymbol(math,main,open,"","\\lfloor",!0);defineSymbol(math,main,close,"","\\rfloor",!0);defineSymbol(math,main,open,"","\\lceil",!0);defineSymbol(math,main,close,"","\\rceil",!0);defineSymbol(math,main,textord,"\\","\\backslash");defineSymbol(math,main,textord,"","|");defineSymbol(math,main,textord,"","\\vert");defineSymbol(text,main,textord,"|","\\textbar",!0);defineSymbol(math,main,textord,"","\\|");defineSymbol(math,main,textord,"","\\Vert");defineSymbol(text,main,textord,"","\\textbardbl");defineSymbol(text,main,textord,"~","\\textasciitilde");defineSymbol(text,main,textord,"\\","\\textbackslash");defineSymbol(text,main,textord,"^","\\textasciicircum");defineSymbol(math,main,rel,"","\\uparrow",!0);defineSymbol(math,main,rel,"","\\Uparrow",!0);defineSymbol(math,main,rel,"","\\downarrow",!0);defineSymbol(math,main,rel,"","\\Downarrow",!0);defineSymbol(math,main,rel,"","\\updownarrow",!0);defineSymbol(math,main,rel,"","\\Updownarrow",!0);defineSymbol(math,main,op$1,"","\\coprod");defineSymbol(math,main,op$1,"","\\bigvee");defineSymbol(math,main,op$1,"","\\bigwedge");defineSymbol(math,main,op$1,"","\\biguplus");defineSymbol(math,main,op$1,"","\\bigcap");defineSymbol(math,main,op$1,"","\\bigcup");defineSymbol(math,main,op$1,"","\\int");defineSymbol(math,main,op$1,"","\\intop");defineSymbol(math,main,op$1,"","\\iint");defineSymbol(math,main,op$1,"","\\iiint");defineSymbol(math,main,op$1,"","\\prod");defineSymbol(math,main,op$1,"","\\sum");defineSymbol(math,main,op$1,"","\\bigotimes");defineSymbol(math,main,op$1,"","\\bigoplus");defineSymbol(math,main,op$1,"","\\bigodot");defineSymbol(math,main,op$1,"","\\oint");defineSymbol(math,main,op$1,"","\\oiint");defineSymbol(math,main,op$1,"","\\oiiint");defineSymbol(math,main,op$1,"","\\bigsqcup");defineSymbol(math,main,op$1,"","\\smallint");defineSymbol(text,main,inner,"","\\textellipsis");defineSymbol(math,main,inner,"","\\mathellipsis");defineSymbol(text,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\@cdots",!0);defineSymbol(math,main,inner,"","\\ddots",!0);defineSymbol(math,main,textord,"","\\varvdots");defineSymbol(text,main,textord,"","\\varvdots");defineSymbol(math,main,accent,"","\\acute");defineSymbol(math,main,accent,"","\\grave");defineSymbol(math,main,accent,"","\\ddot");defineSymbol(math,main,accent,"~","\\tilde");defineSymbol(math,main,accent,"","\\bar");defineSymbol(math,main,accent,"","\\breve");defineSymbol(math,main,accent,"","\\check");defineSymbol(math,main,accent,"^","\\hat");defineSymbol(math,main,accent,"","\\vec");defineSymbol(math,main,accent,"","\\dot");defineSymbol(math,main,accent,"","\\mathring");defineSymbol(math,main,mathord,"","\\@imath");defineSymbol(math,main,mathord,"","\\@jmath");defineSymbol(math,main,textord,"","");defineSymbol(math,main,textord,"","");defineSymbol(text,main,textord,"","\\i",!0);defineSymbol(text,main,textord,"","\\j",!0);defineSymbol(text,main,textord,"","\\ss",!0);defineSymbol(text,main,textord,"","\\ae",!0);defineSymbol(text,main,textord,"","\\oe",!0);defineSymbol(text,main,textord,"","\\o",!0);defineSymbol(text,main,textord,"","\\AE",!0);defineSymbol(text,main,textord,"","\\OE",!0);defineSymbol(text,main,textord,"","\\O",!0);defineSymbol(text,main,accent,"","\\'");defineSymbol(text,main,accent,"","\\`");defineSymbol(text,main,accent,"","\\^");defineSymbol(text,main,accent,"","\\~");defineSymbol(text,main,accent,"","\\=");defineSymbol(text,main,accent,"","\\u");defineSymbol(text,main,accent,"","\\.");defineSymbol(text,main,accent,"","\\c");defineSymbol(text,main,accent,"","\\r");defineSymbol(text,main,accent,"","\\v");defineSymbol(text,main,accent,"",'\\"');defineSymbol(text,main,accent,"","\\H");defineSymbol(text,main,accent,"","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"","--",!0);defineSymbol(text,main,textord,"","\\textendash");defineSymbol(text,main,textord,"","---",!0);defineSymbol(text,main,textord,"","\\textemdash");defineSymbol(text,main,textord,"","`",!0);defineSymbol(text,main,textord,"","\\textquoteleft");defineSymbol(text,main,textord,"","'",!0);defineSymbol(text,main,textord,"","\\textquoteright");defineSymbol(text,main,textord,"","``",!0);defineSymbol(text,main,textord,"","\\textquotedblleft");defineSymbol(text,main,textord,"","''",!0);defineSymbol(text,main,textord,"","\\textquotedblright");defineSymbol(math,main,textord,"","\\degree",!0);defineSymbol(text,main,textord,"","\\degree");defineSymbol(text,main,textord,"","\\textdegree",!0);defineSymbol(math,main,textord,"","\\pounds");defineSymbol(math,main,textord,"","\\mathsterling",!0);defineSymbol(text,main,textord,"","\\pounds");defineSymbol(text,main,textord,"","\\textsterling",!0);defineSymbol(math,ams,textord,"","\\maltese");defineSymbol(text,ams,textord,"","\\maltese");var mathTextSymbols='0123456789/@."';for(var i=0;i<mathTextSymbols.length;i++){var ch$1=mathTextSymbols.charAt(i);defineSymbol(math,main,textord,ch$1,ch$1)}var textSymbols='0123456789!@*()-=+";:?/.,';for(var _i$1=0;_i$1<textSymbols.length;_i$1++){var _ch=textSymbols.charAt(_i$1);defineSymbol(text,main,textord,_ch,_ch)}var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math,ams,textord,"C","");defineSymbol(text,ams,textord,"C","");defineSymbol(math,ams,textord,"H","");defineSymbol(text,ams,textord,"H","");defineSymbol(math,ams,textord,"N","");defineSymbol(text,ams,textord,"N","");defineSymbol(math,ams,textord,"P","");defineSymbol(text,ams,textord,"P","");defineSymbol(math,ams,textord,"Q","");defineSymbol(text,ams,textord,"Q","");defineSymbol(math,ams,textord,"R","");defineSymbol(text,ams,textord,"R","");defineSymbol(math,ams,textord,"Z","");defineSymbol(text,ams,textord,"Z","");defineSymbol(math,main,mathord,"h","");defineSymbol(text,main,mathord,"h","");var wideChar="";for(var _i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="";defineSymbol(math,main,mathord,"k",wideChar);defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}var extraLatin="";for(var _i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function t(e,r){var a=e.charCodeAt(0),l=e.charCodeAt(1),u=(a-55296)*1024+(l-56320)+65536,d=r==="math"?0:1;if(119808<=u&&u<120484){var g=Math.floor((u-119808)/26);return[wideLatinLetterData[g][2],wideLatinLetterData[g][d]]}else if(120782<=u&&u<=120831){var E=Math.floor((u-120782)/10);return[wideNumeralData[E][2],wideNumeralData[E][d]]}else{if(u===120485||u===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][d]];if(120486<u&&u<120782)return["",""];throw new ParseError("Unsupported character: "+e)}},lookupSymbol=function t(e,r,a){return symbols[a][e]&&symbols[a][e].replace&&(e=symbols[a][e].replace),{value:e,metrics:getCharacterMetrics(e,r,a)}},makeSymbol=function t(e,r,a,l,u){var d=lookupSymbol(e,r,a),g=d.metrics;e=d.value;var E;if(g){var P=g.italic;(a==="text"||l&&l.font==="mathit")&&(P=0),E=new SymbolNode(e,g.height,g.depth,P,g.skew,g.width,u)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+a+"'")),E=new SymbolNode(e,0,0,0,0,0,u);if(l){E.maxFontSize=l.sizeMultiplier,l.style.isTight()&&E.classes.push("mtight");var Z=l.getColor();Z&&(E.style.color=Z)}return E},mathsym=function t(e,r,a,l){return l===void 0&&(l=[]),a.font==="boldsymbol"&&lookupSymbol(e,"Main-Bold",r).metrics?makeSymbol(e,"Main-Bold",r,a,l.concat(["mathbf"])):e==="\\"||symbols[r][e].font==="main"?makeSymbol(e,"Main-Regular",r,a,l):makeSymbol(e,"AMS-Regular",r,a,l.concat(["amsrm"]))},boldsymbol=function t(e,r,a,l,u){return u!=="textord"&&lookupSymbol(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function t(e,r,a){var l=e.mode,u=e.text,d=["mord"],g=l==="math"||l==="text"&&r.font,E=g?r.font:r.fontFamily,P="",Z="";if(u.charCodeAt(0)===55349&&([P,Z]=wideCharacterFont(u,l)),P.length>0)return makeSymbol(u,P,l,r,d.concat(Z));if(E){var me,_e;if(E==="boldsymbol"){var He=boldsymbol(u,l,r,d,a);me=He.fontName,_e=[He.fontClass]}else g?(me=fontMap[E].fontName,_e=[E]):(me=retrieveTextFontName(E,r.fontWeight,r.fontShape),_e=[E,r.fontWeight,r.fontShape]);if(lookupSymbol(u,me,l).metrics)return makeSymbol(u,me,l,r,d.concat(_e));if(ligatures.hasOwnProperty(u)&&me.slice(0,10)==="Typewriter"){for(var Xe=[],wt=0;wt<u.length;wt++)Xe.push(makeSymbol(u[wt],me,l,r,d.concat(_e)));return makeFragment(Xe)}}if(a==="mathord")return makeSymbol(u,"Math-Italic",l,r,d.concat(["mathnormal"]));if(a==="textord"){var Do=symbols[l][u]&&symbols[l][u].font;if(Do==="ams"){var sr=retrieveTextFontName("amsrm",r.fontWeight,r.fontShape);return makeSymbol(u,sr,l,r,d.concat("amsrm",r.fontWeight,r.fontShape))}else if(Do==="main"||!Do){var Ko=retrieveTextFontName("textrm",r.fontWeight,r.fontShape);return makeSymbol(u,Ko,l,r,d.concat(r.fontWeight,r.fontShape))}else{var Bs=retrieveTextFontName(Do,r.fontWeight,r.fontShape);return makeSymbol(u,Bs,l,r,d.concat(Bs,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+a+" in makeOrd")},canCombine=(t,e)=>{if(createClass(t.classes)!==createClass(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var a in t.style)if(t.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;for(var l in e.style)if(e.style.hasOwnProperty(l)&&t.style[l]!==e.style[l])return!1;return!0},tryCombineChars=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],a=t[e+1];r instanceof SymbolNode&&a instanceof SymbolNode&&canCombine(r,a)&&(r.text+=a.text,r.height=Math.max(r.height,a.height),r.depth=Math.max(r.depth,a.depth),r.italic=a.italic,t.splice(e+1,1),e--)}return t},sizeElementFromChildren=function t(e){for(var r=0,a=0,l=0,u=0;u<e.children.length;u++){var d=e.children[u];d.height>r&&(r=d.height),d.depth>a&&(a=d.depth),d.maxFontSize>l&&(l=d.maxFontSize)}e.height=r,e.depth=a,e.maxFontSize=l},makeSpan$2=function t(e,r,a,l){var u=new Span(e,r,a,l);return sizeElementFromChildren(u),u},makeSvgSpan=(t,e,r,a)=>new Span(t,e,r,a),makeLineSpan=function t(e,r,a){var l=makeSpan$2([e],[],r);return l.height=Math.max(a||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),l.style.borderBottomWidth=makeEm(l.height),l.maxFontSize=1,l},makeAnchor=function t(e,r,a,l){var u=new Anchor(e,r,a,l);return sizeElementFromChildren(u),u},makeFragment=function t(e){var r=new DocumentFragment(e);return sizeElementFromChildren(r),r},wrapFragment=function t(e,r){return e instanceof DocumentFragment?makeSpan$2([],[e],r):e},getVListChildrenAndDepth=function t(e){if(e.positionType==="individualShift"){for(var r=e.children,a=[r[0]],l=-r[0].shift-r[0].elem.depth,u=l,d=1;d<r.length;d++){var g=-r[d].shift-u-r[d].elem.depth,E=g-(r[d-1].elem.height+r[d-1].elem.depth);u=u+g,a.push({type:"kern",size:E}),a.push(r[d])}return{children:a,depth:l}}var P;if(e.positionType==="top"){for(var Z=e.positionData,me=0;me<e.children.length;me++){var _e=e.children[me];Z-=_e.type==="kern"?_e.size:_e.elem.height+_e.elem.depth}P=Z}else if(e.positionType==="bottom")P=-e.positionData;else{var He=e.children[0];if(He.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")P=-He.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")P=-He.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:P}},makeVList=function t(e,r){for(var{children:a,depth:l}=getVListChildrenAndDepth(e),u=0,d=0;d<a.length;d++){var g=a[d];if(g.type==="elem"){var E=g.elem;u=Math.max(u,E.maxFontSize,E.height)}}u+=2;var P=makeSpan$2(["pstrut"],[]);P.style.height=makeEm(u);for(var Z=[],me=l,_e=l,He=l,Xe=0;Xe<a.length;Xe++){var wt=a[Xe];if(wt.type==="kern")He+=wt.size;else{var Do=wt.elem,sr=wt.wrapperClasses||[],Ko=wt.wrapperStyle||{},Bs=makeSpan$2(sr,[P,Do],void 0,Ko);Bs.style.top=makeEm(-u-He-Do.depth),wt.marginLeft&&(Bs.style.marginLeft=wt.marginLeft),wt.marginRight&&(Bs.style.marginRight=wt.marginRight),Z.push(Bs),He+=Do.height+Do.depth}me=Math.min(me,He),_e=Math.max(_e,He)}var th=makeSpan$2(["vlist"],Z);th.style.height=makeEm(_e);var pf;if(me<0){var _h=makeSpan$2([],[]),cf=makeSpan$2(["vlist"],[_h]);cf.style.height=makeEm(-me);var df=makeSpan$2(["vlist-s"],[new SymbolNode("")]);pf=[makeSpan$2(["vlist-r"],[th,df]),makeSpan$2(["vlist-r"],[cf])]}else pf=[makeSpan$2(["vlist-r"],[th])];var uf=makeSpan$2(["vlist-t"],pf);return pf.length===2&&uf.classes.push("vlist-t2"),uf.height=_e,uf.depth=-me,uf},makeGlue=(t,e)=>{var r=makeSpan$2(["mspace"],[],e),a=calculateSize(t,e);return r.style.marginRight=makeEm(a),r},retrieveTextFontName=function t(e,r,a){var l="";switch(e){case"amsrm":l="AMS";break;case"textrm":l="Main";break;case"textsf":l="SansSerif";break;case"texttt":l="Typewriter";break;default:l=e}var u;return r==="textbf"&&a==="textit"?u="BoldItalic":r==="textbf"?u="Bold":r==="textit"?u="Italic":u="Regular",l+"-"+u},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function t(e,r){var[a,l,u]=svgData[e],d=new PathNode(a),g=new SvgNode([d],{width:makeEm(l),height:makeEm(u),style:"width:"+makeEm(l),viewBox:"0 0 "+1e3*l+" "+1e3*u,preserveAspectRatio:"xMinYMin"}),E=makeSvgSpan(["overlay"],[g],r);return E.height=u,E.style.height=makeEm(u),E.style.width=makeEm(l),E},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(t){for(var{type:e,names:r,props:a,handler:l,htmlBuilder:u,mathmlBuilder:d}=t,g={type:e,numArgs:a.numArgs,argTypes:a.argTypes,allowedInArgument:!!a.allowedInArgument,allowedInText:!!a.allowedInText,allowedInMath:a.allowedInMath===void 0?!0:a.allowedInMath,numOptionalArgs:a.numOptionalArgs||0,infix:!!a.infix,primitive:!!a.primitive,handler:l},E=0;E<r.length;++E)_functions[r[E]]=g;e&&(u&&(_htmlGroupBuilders[e]=u),d&&(_mathmlGroupBuilders[e]=d))}function defineFunctionBuilders(t){var{type:e,htmlBuilder:r,mathmlBuilder:a}=t;defineFunction({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:a})}var normalizeArgument=function t(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ordargument=function t(e){return e.type==="ordgroup"?e.body:[e]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function t(e,r,a,l){l===void 0&&(l=[null,null]);for(var u=[],d=0;d<e.length;d++){var g=buildGroup$1(e[d],r);if(g instanceof DocumentFragment){var E=g.children;u.push(...E)}else u.push(g)}if(buildCommon.tryCombineChars(u),!a)return u;var P=r;if(e.length===1){var Z=e[0];Z.type==="sizing"?P=r.havingSize(Z.size):Z.type==="styling"&&(P=r.havingStyle(styleMap$1[Z.style]))}var me=makeSpan$1([l[0]||"leftmost"],[],r),_e=makeSpan$1([l[1]||"rightmost"],[],r),He=a==="root";return traverseNonSpaceNodes(u,(Xe,wt)=>{var Do=wt.classes[0],sr=Xe.classes[0];Do==="mbin"&&utils.contains(binRightCanceller,sr)?wt.classes[0]="mord":sr==="mbin"&&utils.contains(binLeftCanceller,Do)&&(Xe.classes[0]="mord")},{node:me},_e,He),traverseNonSpaceNodes(u,(Xe,wt)=>{var Do=getTypeOfDomTree(wt),sr=getTypeOfDomTree(Xe),Ko=Do&&sr?Xe.hasClass("mtight")?tightSpacings[Do][sr]:spacings[Do][sr]:null;if(Ko)return buildCommon.makeGlue(Ko,P)},{node:me},_e,He),u},traverseNonSpaceNodes=function t(e,r,a,l,u){l&&e.push(l);for(var d=0;d<e.length;d++){var g=e[d],E=checkPartialGroup(g);if(E){t(E.children,r,a,null,u);continue}var P=!g.hasClass("mspace");if(P){var Z=r(g,a.node);Z&&(a.insertAfter?a.insertAfter(Z):(e.unshift(Z),d++))}P?a.node=g:u&&g.hasClass("newline")&&(a.node=makeSpan$1(["leftmost"])),a.insertAfter=(me=>_e=>{e.splice(me+1,0,_e),d++})(d)}l&&e.pop()},checkPartialGroup=function t(e){return e instanceof DocumentFragment||e instanceof Anchor||e instanceof Span&&e.hasClass("enclosing")?e:null},getOutermostNode=function t(e,r){var a=checkPartialGroup(e);if(a){var l=a.children;if(l.length){if(r==="right")return t(l[l.length-1],"right");if(r==="left")return t(l[0],"left")}}return e},getTypeOfDomTree=function t(e,r){return e?(r&&(e=getOutermostNode(e,r)),DomEnum[e.classes[0]]||null):null},makeNullDelimiter=function t(e,r){var a=["nulldelimiter"].concat(e.baseSizingClasses());return makeSpan$1(r.concat(a))},buildGroup$1=function t(e,r,a){if(!e)return makeSpan$1();if(_htmlGroupBuilders[e.type]){var l=_htmlGroupBuilders[e.type](e,r);if(a&&r.size!==a.size){l=makeSpan$1(r.sizingClasses(a),[l],r);var u=r.sizeMultiplier/a.sizeMultiplier;l.height*=u,l.depth*=u}return l}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildHTMLUnbreakable(t,e){var r=makeSpan$1(["base"],t,e),a=makeSpan$1(["strut"]);return a.style.height=makeEm(r.height+r.depth),r.depth&&(a.style.verticalAlign=makeEm(-r.depth)),r.children.unshift(a),r}function buildHTML(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var a=buildExpression$1(t,e,"root"),l;a.length===2&&a[1].hasClass("tag")&&(l=a.pop());for(var u=[],d=[],g=0;g<a.length;g++)if(d.push(a[g]),a[g].hasClass("mbin")||a[g].hasClass("mrel")||a[g].hasClass("allowbreak")){for(var E=!1;g<a.length-1&&a[g+1].hasClass("mspace")&&!a[g+1].hasClass("newline");)g++,d.push(a[g]),a[g].hasClass("nobreak")&&(E=!0);E||(u.push(buildHTMLUnbreakable(d,e)),d=[])}else a[g].hasClass("newline")&&(d.pop(),d.length>0&&(u.push(buildHTMLUnbreakable(d,e)),d=[]),u.push(a[g]));d.length>0&&u.push(buildHTMLUnbreakable(d,e));var P;r?(P=buildHTMLUnbreakable(buildExpression$1(r,e,!0)),P.classes=["tag"],u.push(P)):l&&u.push(l);var Z=makeSpan$1(["katex-html"],u);if(Z.setAttribute("aria-hidden","true"),P){var me=P.children[0];me.style.height=makeEm(Z.height+Z.depth),Z.depth&&(me.style.verticalAlign=makeEm(-Z.depth))}return Z}function newDocumentFragment(t){return new DocumentFragment(t)}class MathNode{constructor(e,r,a){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=a||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=createClass(this.classes));for(var a=0;a<this.children.length;a++)if(this.children[a]instanceof TextNode&&this.children[a+1]instanceof TextNode){for(var l=this.children[a].toText()+this.children[++a].toText();this.children[a+1]instanceof TextNode;)l+=this.children[++a].toText();e.appendChild(new TextNode(l).toNode())}else e.appendChild(this.children[a].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=utils.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+utils.escape(createClass(this.classes))+'"'),e+=">";for(var a=0;a<this.children.length;a++)e+=this.children[a].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class TextNode{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",makeEm(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function t(e,r,a){return symbols[r][e]&&symbols[r][e].replace&&e.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(e)&&a&&(a.fontFamily&&a.fontFamily.slice(4,6)==="tt"||a.font&&a.font.slice(4,6)==="tt"))&&(e=symbols[r][e].replace),new mathMLTree.TextNode(e)},makeRow=function t(e){return e.length===1?e[0]:new mathMLTree.MathNode("mrow",e)},getVariant=function t(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var a=r.font;if(!a||a==="mathnormal")return null;var l=e.mode;if(a==="mathit")return"italic";if(a==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(a==="mathbf")return"bold";if(a==="mathbb")return"double-struck";if(a==="mathsfit")return"sans-serif-italic";if(a==="mathfrak")return"fraktur";if(a==="mathscr"||a==="mathcal")return"script";if(a==="mathsf")return"sans-serif";if(a==="mathtt")return"monospace";var u=e.text;if(utils.contains(["\\imath","\\jmath"],u))return null;symbols[l][u]&&symbols[l][u].replace&&(u=symbols[l][u].replace);var d=buildCommon.fontMap[a].fontName;return getCharacterMetrics(u,d,l)?buildCommon.fontMap[a].variant:null};function isNumberPunctuation(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof TextNode&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof TextNode&&r.text===","}else return!1}var buildExpression=function t(e,r,a){if(e.length===1){var l=buildGroup(e[0],r);return a&&l instanceof MathNode&&l.type==="mo"&&(l.setAttribute("lspace","0em"),l.setAttribute("rspace","0em")),[l]}for(var u=[],d,g=0;g<e.length;g++){var E=buildGroup(e[g],r);if(E instanceof MathNode&&d instanceof MathNode){if(E.type==="mtext"&&d.type==="mtext"&&E.getAttribute("mathvariant")===d.getAttribute("mathvariant")){d.children.push(...E.children);continue}else if(E.type==="mn"&&d.type==="mn"){d.children.push(...E.children);continue}else if(isNumberPunctuation(E)&&d.type==="mn"){d.children.push(...E.children);continue}else if(E.type==="mn"&&isNumberPunctuation(d))E.children=[...d.children,...E.children],u.pop();else if((E.type==="msup"||E.type==="msub")&&E.children.length>=1&&(d.type==="mn"||isNumberPunctuation(d))){var P=E.children[0];P instanceof MathNode&&P.type==="mn"&&(P.children=[...d.children,...P.children],u.pop())}else if(d.type==="mi"&&d.children.length===1){var Z=d.children[0];if(Z instanceof TextNode&&Z.text===""&&(E.type==="mo"||E.type==="mi"||E.type==="mn")){var me=E.children[0];me instanceof TextNode&&me.text.length>0&&(me.text=me.text.slice(0,1)+""+me.text.slice(1),u.pop())}}}u.push(E),d=E}return u},buildExpressionRow=function t(e,r,a){return makeRow(buildExpression(e,r,a))},buildGroup=function t(e,r){if(!e)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[e.type]){var a=_mathmlGroupBuilders[e.type](e,r);return a}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildMathML(t,e,r,a,l){var u=buildExpression(t,r),d;u.length===1&&u[0]instanceof MathNode&&utils.contains(["mrow","mtable"],u[0].type)?d=u[0]:d=new mathMLTree.MathNode("mrow",u);var g=new mathMLTree.MathNode("annotation",[new mathMLTree.TextNode(e)]);g.setAttribute("encoding","application/x-tex");var E=new mathMLTree.MathNode("semantics",[d,g]),P=new mathMLTree.MathNode("math",[E]);P.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),a&&P.setAttribute("display","block");var Z=l?"katex":"katex-mathml";return buildCommon.makeSpan([Z],[P])}var optionsFromSettings=function t(e){return new Options({style:e.displayMode?Style$1.DISPLAY:Style$1.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},displayWrap=function t(e,r){if(r.displayMode){var a=["katex-display"];r.leqno&&a.push("leqno"),r.fleqn&&a.push("fleqn"),e=buildCommon.makeSpan(a,[e])}return e},buildTree=function t(e,r,a){var l=optionsFromSettings(a),u;if(a.output==="mathml")return buildMathML(e,r,l,a.displayMode,!0);if(a.output==="html"){var d=buildHTML(e,l);u=buildCommon.makeSpan(["katex"],[d])}else{var g=buildMathML(e,r,l,a.displayMode,!1),E=buildHTML(e,l);u=buildCommon.makeSpan(["katex"],[g,E])}return displayWrap(u,a)},buildHTMLTree=function t(e,r,a){var l=optionsFromSettings(a),u=buildHTML(e,l),d=buildCommon.makeSpan(["katex"],[u]);return displayWrap(d,a)},stretchyCodePoint={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},mathMLnode=function t(e){var r=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function t(e){return e.type==="ordgroup"?e.body.length:1},svgSpan=function t(e,r){function a(){var g=4e5,E=e.label.slice(1);if(utils.contains(["widehat","widecheck","widetilde","utilde"],E)){var P=e,Z=groupLength(P.base),me,_e,He;if(Z>5)E==="widehat"||E==="widecheck"?(me=420,g=2364,He=.42,_e=E+"4"):(me=312,g=2340,He=.34,_e="tilde4");else{var Xe=[1,1,2,2,3,3][Z];E==="widehat"||E==="widecheck"?(g=[0,1062,2364,2364,2364][Xe],me=[0,239,300,360,420][Xe],He=[0,.24,.3,.3,.36,.42][Xe],_e=E+Xe):(g=[0,600,1033,2339,2340][Xe],me=[0,260,286,306,312][Xe],He=[0,.26,.286,.3,.306,.34][Xe],_e="tilde"+Xe)}var wt=new PathNode(_e),Do=new SvgNode([wt],{width:"100%",height:makeEm(He),viewBox:"0 0 "+g+" "+me,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[Do],r),minWidth:0,height:He}}else{var sr=[],Ko=katexImagesData[E],[Bs,th,pf]=Ko,_h=pf/1e3,cf=Bs.length,df,uf;if(cf===1){var li=Ko[3];df=["hide-tail"],uf=[li]}else if(cf===2)df=["halfarrow-left","halfarrow-right"],uf=["xMinYMin","xMaxYMin"];else if(cf===3)df=["brace-left","brace-center","brace-right"],uf=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+cf+" children.");for(var Vc=0;Vc<cf;Vc++){var Rs=new PathNode(Bs[Vc]),qc=new SvgNode([Rs],{width:"400em",height:makeEm(_h),viewBox:"0 0 "+g+" "+pf,preserveAspectRatio:uf[Vc]+" slice"}),Qp=buildCommon.makeSvgSpan([df[Vc]],[qc],r);if(cf===1)return{span:Qp,minWidth:th,height:_h};Qp.style.height=makeEm(_h),sr.push(Qp)}return{span:buildCommon.makeSpan(["stretchy"],sr,r),minWidth:th,height:_h}}}var{span:l,minWidth:u,height:d}=a();return l.height=d,l.style.height=makeEm(d),u>0&&(l.style.minWidth=makeEm(u)),l},encloseSpan=function t(e,r,a,l,u){var d,g=e.height+e.depth+a+l;if(/fbox|color|angl/.test(r)){if(d=buildCommon.makeSpan(["stretchy",r],[],u),r==="fbox"){var E=u.color&&u.getColor();E&&(d.style.borderColor=E)}}else{var P=[];/^[bx]cancel$/.test(r)&&P.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&P.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var Z=new SvgNode(P,{width:"100%",height:makeEm(g)});d=buildCommon.makeSvgSpan([],[Z],u)}return d.height=g,d.style.height=makeEm(g),d},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function assertSymbolNodeType(t){var e=checkSymbolNodeType(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function checkSymbolNodeType(t){return t&&(t.type==="atom"||NON_ATOMS.hasOwnProperty(t.type))?t:null}var htmlBuilder$a=(t,e)=>{var r,a,l;t&&t.type==="supsub"?(a=assertNodeType(t.base,"accent"),r=a.base,t.base=r,l=assertSpan(buildGroup$1(t,e)),t.base=a):(a=assertNodeType(t,"accent"),r=a.base);var u=buildGroup$1(r,e.havingCrampedStyle()),d=a.isShifty&&utils.isCharacterBox(r),g=0;if(d){var E=utils.getBaseElem(r),P=buildGroup$1(E,e.havingCrampedStyle());g=assertSymbolDomNode(P).skew}var Z=a.label==="\\c",me=Z?u.height+u.depth:Math.min(u.height,e.fontMetrics().xHeight),_e;if(a.isStretchy)_e=stretchy.svgSpan(a,e),_e=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:u},{type:"elem",elem:_e,wrapperClasses:["svg-align"],wrapperStyle:g>0?{width:"calc(100% - "+makeEm(2*g)+")",marginLeft:makeEm(2*g)}:void 0}]},e);else{var He,Xe;a.label==="\\vec"?(He=buildCommon.staticSvg("vec",e),Xe=buildCommon.svgData.vec[1]):(He=buildCommon.makeOrd({mode:a.mode,text:a.label},e,"textord"),He=assertSymbolDomNode(He),He.italic=0,Xe=He.width,Z&&(me+=He.depth)),_e=buildCommon.makeSpan(["accent-body"],[He]);var wt=a.label==="\\textcircled";wt&&(_e.classes.push("accent-full"),me=u.height);var Do=g;wt||(Do-=Xe/2),_e.style.left=makeEm(Do),a.label==="\\textcircled"&&(_e.style.top=".2em"),_e=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:u},{type:"kern",size:-me},{type:"elem",elem:_e}]},e)}var sr=buildCommon.makeSpan(["mord","accent"],[_e],e);return l?(l.children[0]=sr,l.height=Math.max(sr.height,l.height),l.classes[0]="mord",l):sr},mathmlBuilder$9=(t,e)=>{var r=t.isStretchy?stretchy.mathMLnode(t.label):new mathMLTree.MathNode("mo",[makeText(t.label,t.mode)]),a=new mathMLTree.MathNode("mover",[buildGroup(t.base,e),r]);return a.setAttribute("accent","true"),a},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=normalizeArgument(e[0]),a=!NON_STRETCHY_ACCENT_REGEX.test(t.funcName),l=!a||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:a,isShifty:l,base:r}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],a=t.parser.mode;return a==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),a="text"),{type:"accent",mode:a,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:a}=t,l=e[0];return{type:"accentUnder",mode:r.mode,label:a,base:l}},htmlBuilder:(t,e)=>{var r=buildGroup$1(t.base,e),a=stretchy.svgSpan(t,e),l=t.label==="\\utilde"?.12:0,u=buildCommon.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:a,wrapperClasses:["svg-align"]},{type:"kern",size:l},{type:"elem",elem:r}]},e);return buildCommon.makeSpan(["mord","accentunder"],[u],e)},mathmlBuilder:(t,e)=>{var r=stretchy.mathMLnode(t.label),a=new mathMLTree.MathNode("munder",[buildGroup(t.base,e),r]);return a.setAttribute("accentunder","true"),a}});var paddedNode=t=>{var e=new mathMLTree.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:a,funcName:l}=t;return{type:"xArrow",mode:a.mode,label:l,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,a=e.havingStyle(r.sup()),l=buildCommon.wrapFragment(buildGroup$1(t.body,a,e),e),u=t.label.slice(0,2)==="\\x"?"x":"cd";l.classes.push(u+"-arrow-pad");var d;t.below&&(a=e.havingStyle(r.sub()),d=buildCommon.wrapFragment(buildGroup$1(t.below,a,e),e),d.classes.push(u+"-arrow-pad"));var g=stretchy.svgSpan(t,e),E=-e.fontMetrics().axisHeight+.5*g.height,P=-e.fontMetrics().axisHeight-.5*g.height-.111;(l.depth>.25||t.label==="\\xleftequilibrium")&&(P-=l.depth);var Z;if(d){var me=-e.fontMetrics().axisHeight+d.height+.5*g.height+.111;Z=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:P},{type:"elem",elem:g,shift:E},{type:"elem",elem:d,shift:me}]},e)}else Z=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:P},{type:"elem",elem:g,shift:E}]},e);return Z.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[Z],e)},mathmlBuilder(t,e){var r=stretchy.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var a;if(t.body){var l=paddedNode(buildGroup(t.body,e));if(t.below){var u=paddedNode(buildGroup(t.below,e));a=new mathMLTree.MathNode("munderover",[r,u,l])}else a=new mathMLTree.MathNode("mover",[r,l])}else if(t.below){var d=paddedNode(buildGroup(t.below,e));a=new mathMLTree.MathNode("munder",[r,d])}else a=paddedNode(),a=new mathMLTree.MathNode("mover",[r,a]);return a}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(t,e){var r=buildExpression$1(t.body,e,!0);return makeSpan([t.mclass],r,e)}function mathmlBuilder$8(t,e){var r,a=buildExpression(t.body,e);return t.mclass==="minner"?r=new mathMLTree.MathNode("mpadded",a):t.mclass==="mord"?t.isCharacterBox?(r=a[0],r.type="mi"):r=new mathMLTree.MathNode("mi",a):(t.isCharacterBox?(r=a[0],r.type="mo"):r=new mathMLTree.MathNode("mo",a),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:a}=t,l=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+a.slice(5),body:ordargument(l),isCharacterBox:utils.isCharacterBox(l)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:binrelClass(e[0]),body:ordargument(e[1]),isCharacterBox:utils.isCharacterBox(e[1])}}});defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:a}=t,l=e[1],u=e[0],d;a!=="\\stackrel"?d=binrelClass(l):d="mrel";var g={type:"op",mode:l.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:a!=="\\stackrel",body:ordargument(l)},E={type:"supsub",mode:u.mode,base:g,sup:a==="\\underset"?null:u,sub:a==="\\underset"?u:null};return{type:"mclass",mode:r.mode,mclass:d,body:[E],isCharacterBox:utils.isCharacterBox(E)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:binrelClass(e[0]),body:ordargument(e[0])}},htmlBuilder(t,e){var r=buildExpression$1(t.body,e,!0),a=buildCommon.makeSpan([t.mclass],r,e);return a.style.textShadow="0.02em 0.01em 0.04px",a},mathmlBuilder(t,e){var r=buildExpression(t.body,e),a=new mathMLTree.MathNode("mstyle",r);return a.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),a}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=t=>t.type==="textord"&&t.text==="@",isLabelEnd=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function cdArrow(t,e,r){var a=cdArrowFunctionName[t];switch(a){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(a,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var l=r.callFunction("\\\\cdleft",[e[0]],[]),u={type:"atom",text:a,mode:"math",family:"rel"},d=r.callFunction("\\Big",[u],[]),g=r.callFunction("\\\\cdright",[e[1]],[]),E={type:"ordgroup",mode:"math",body:[l,d,g]};return r.callFunction("\\\\cdparent",[E],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var P={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[P],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var a=[],l=[a],u=0;u<e.length;u++){for(var d=e[u],g=newCell(),E=0;E<d.length;E++)if(!isStartOfArrow(d[E]))g.body.push(d[E]);else{a.push(g),E+=1;var P=assertSymbolNodeType(d[E]).text,Z=new Array(2);if(Z[0]={type:"ordgroup",mode:"math",body:[]},Z[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(P)>-1))if("<>AV".indexOf(P)>-1)for(var me=0;me<2;me++){for(var _e=!0,He=E+1;He<d.length;He++){if(isLabelEnd(d[He],P)){_e=!1,E=He;break}if(isStartOfArrow(d[He]))throw new ParseError("Missing a "+P+" character to complete a CD arrow.",d[He]);Z[me].body.push(d[He])}if(_e)throw new ParseError("Missing a "+P+" character to complete a CD arrow.",d[E])}else throw new ParseError('Expected one of "<>AV=|." after @',d[E]);var Xe=cdArrow(P,Z,t),wt={type:"styling",body:[Xe],mode:"math",style:"display"};a.push(wt),g=newCell()}u%2===0?a.push(g):a.shift(),a=[],l.push(a)}t.gullet.endGroup(),t.gullet.endGroup();var Do=new Array(l[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:l,arraystretch:1,addJot:!0,rowGaps:[null],cols:Do,colSeparationType:"CD",hLinesBeforeRow:new Array(l.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:a}=t;return{type:"cdlabel",mode:r.mode,side:a.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),a=buildCommon.wrapFragment(buildGroup$1(t.label,r,e),e);return a.classes.push("cd-label-"+t.side),a.style.bottom=makeEm(.8-a.depth),a.height=0,a.depth=0,a},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mrow",[buildGroup(t.label,e)]);return r=new mathMLTree.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new mathMLTree.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=buildCommon.wrapFragment(buildGroup$1(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new mathMLTree.MathNode("mrow",[buildGroup(t.fragment,e)])}});defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,a=assertNodeType(e[0],"ordgroup"),l=a.body,u="",d=0;d<l.length;d++){var g=assertNodeType(l[d],"textord");u+=g.text}var E=parseInt(u),P;if(isNaN(E))throw new ParseError("\\@char has non-numeric argument "+u);if(E<0||E>=1114111)throw new ParseError("\\@char with invalid code point "+u);return E<=65535?P=String.fromCharCode(E):(E-=65536,P=String.fromCharCode((E>>10)+55296,(E&1023)+56320)),{type:"textord",mode:r.mode,text:P}}});var htmlBuilder$8=(t,e)=>{var r=buildExpression$1(t.body,e.withColor(t.color),!1);return buildCommon.makeFragment(r)},mathmlBuilder$7=(t,e)=>{var r=buildExpression(t.body,e.withColor(t.color)),a=new mathMLTree.MathNode("mstyle",r);return a.setAttribute("mathcolor",t.color),a};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,a=assertNodeType(e[0],"color-token").color,l=e[1];return{type:"color",mode:r.mode,color:a,body:ordargument(l)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:a}=t,l=assertNodeType(e[0],"color-token").color;r.gullet.macros.set("\\current@color",l);var u=r.parseExpression(!0,a);return{type:"color",mode:r.mode,color:l,body:u}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:a}=t,l=a.gullet.future().text==="["?a.parseSizeGroup(!0):null,u=!a.settings.displayMode||!a.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:a.mode,newLine:u,size:l&&assertNodeType(l,"size").value}},htmlBuilder(t,e){var r=buildCommon.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=makeEm(calculateSize(t.size,e)))),r},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",makeEm(calculateSize(t.size,e)))),r}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ParseError("Expected a control sequence",t);return e},getRHS=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},letCommand=(t,e,r,a)=>{var l=t.gullet.macros.get(r.text);l==null&&(r.noexpand=!0,l={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,l,a)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var a=e.fetch();if(globalMap[a.text])return(r==="\\global"||r==="\\\\globallong")&&(a.text=globalMap[a.text]),assertNodeType(e.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",a)}});defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,a=e.gullet.popToken(),l=a.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(l))throw new ParseError("Expected a control sequence",a);for(var u=0,d,g=[[]];e.gullet.future().text!=="{";)if(a=e.gullet.popToken(),a.text==="#"){if(e.gullet.future().text==="{"){d=e.gullet.future(),g[u].push("{");break}if(a=e.gullet.popToken(),!/^[1-9]$/.test(a.text))throw new ParseError('Invalid argument number "'+a.text+'"');if(parseInt(a.text)!==u+1)throw new ParseError('Argument number "'+a.text+'" out of order');u++,g.push([])}else{if(a.text==="EOF")throw new ParseError("Expected a macro definition");g[u].push(a.text)}var{tokens:E}=e.gullet.consumeArg();return d&&E.unshift(d),(r==="\\edef"||r==="\\xdef")&&(E=e.gullet.expandTokens(E),E.reverse()),e.gullet.macros.set(l,{tokens:E,numArgs:u,delimiters:g},r===globalMap[r]),{type:"internal",mode:e.mode}}});defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,a=checkControlSequence(e.gullet.popToken());e.gullet.consumeSpaces();var l=getRHS(e);return letCommand(e,a,l,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,a=checkControlSequence(e.gullet.popToken()),l=e.gullet.popToken(),u=e.gullet.popToken();return letCommand(e,a,u,r==="\\\\globalfuture"),e.gullet.pushToken(u),e.gullet.pushToken(l),{type:"internal",mode:e.mode}}});var getMetrics=function t(e,r,a){var l=symbols.math[e]&&symbols.math[e].replace,u=getCharacterMetrics(l||e,r,a);if(!u)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return u},styleWrap=function t(e,r,a,l){var u=a.havingBaseStyle(r),d=buildCommon.makeSpan(l.concat(u.sizingClasses(a)),[e],a),g=u.sizeMultiplier/a.sizeMultiplier;return d.height*=g,d.depth*=g,d.maxFontSize=u.sizeMultiplier,d},centerSpan=function t(e,r,a){var l=r.havingBaseStyle(a),u=(1-r.sizeMultiplier/l.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=makeEm(u),e.height-=u,e.depth+=u},makeSmallDelim=function t(e,r,a,l,u,d){var g=buildCommon.makeSymbol(e,"Main-Regular",u,l),E=styleWrap(g,r,l,d);return a&&centerSpan(E,l,r),E},mathrmSize=function t(e,r,a,l){return buildCommon.makeSymbol(e,"Size"+r+"-Regular",a,l)},makeLargeDelim=function t(e,r,a,l,u,d){var g=mathrmSize(e,r,u,l),E=styleWrap(buildCommon.makeSpan(["delimsizing","size"+r],[g],l),Style$1.TEXT,l,d);return a&&centerSpan(E,l,Style$1.TEXT),E},makeGlyphSpan=function t(e,r,a){var l;r==="Size1-Regular"?l="delim-size1":l="delim-size4";var u=buildCommon.makeSpan(["delimsizinginner",l],[buildCommon.makeSpan([],[buildCommon.makeSymbol(e,r,a)])]);return{type:"elem",elem:u}},makeInner=function t(e,r,a){var l=fontMetricsData["Size4-Regular"][e.charCodeAt(0)]?fontMetricsData["Size4-Regular"][e.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][e.charCodeAt(0)][4],u=new PathNode("inner",innerPath(e,Math.round(1e3*r))),d=new SvgNode([u],{width:makeEm(l),height:makeEm(r),style:"width:"+makeEm(l),viewBox:"0 0 "+1e3*l+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),g=buildCommon.makeSvgSpan([],[d],a);return g.height=r,g.style.height=makeEm(r),g.style.width=makeEm(l),{type:"elem",elem:g}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function t(e,r,a,l,u,d){var g,E,P,Z,me="",_e=0;g=P=Z=e,E=null;var He="Size1-Regular";e==="\\uparrow"?P=Z="":e==="\\Uparrow"?P=Z="":e==="\\downarrow"?g=P="":e==="\\Downarrow"?g=P="":e==="\\updownarrow"?(g="\\uparrow",P="",Z="\\downarrow"):e==="\\Updownarrow"?(g="\\Uparrow",P="",Z="\\Downarrow"):utils.contains(verts,e)?(P="",me="vert",_e=333):utils.contains(doubleVerts,e)?(P="",me="doublevert",_e=556):e==="["||e==="\\lbrack"?(g="",P="",Z="",He="Size4-Regular",me="lbrack",_e=667):e==="]"||e==="\\rbrack"?(g="",P="",Z="",He="Size4-Regular",me="rbrack",_e=667):e==="\\lfloor"||e===""?(P=g="",Z="",He="Size4-Regular",me="lfloor",_e=667):e==="\\lceil"||e===""?(g="",P=Z="",He="Size4-Regular",me="lceil",_e=667):e==="\\rfloor"||e===""?(P=g="",Z="",He="Size4-Regular",me="rfloor",_e=667):e==="\\rceil"||e===""?(g="",P=Z="",He="Size4-Regular",me="rceil",_e=667):e==="("||e==="\\lparen"?(g="",P="",Z="",He="Size4-Regular",me="lparen",_e=875):e===")"||e==="\\rparen"?(g="",P="",Z="",He="Size4-Regular",me="rparen",_e=875):e==="\\{"||e==="\\lbrace"?(g="",E="",Z="",P="",He="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(g="",E="",Z="",P="",He="Size4-Regular"):e==="\\lgroup"||e===""?(g="",Z="",P="",He="Size4-Regular"):e==="\\rgroup"||e===""?(g="",Z="",P="",He="Size4-Regular"):e==="\\lmoustache"||e===""?(g="",Z="",P="",He="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(g="",Z="",P="",He="Size4-Regular");var Xe=getMetrics(g,He,u),wt=Xe.height+Xe.depth,Do=getMetrics(P,He,u),sr=Do.height+Do.depth,Ko=getMetrics(Z,He,u),Bs=Ko.height+Ko.depth,th=0,pf=1;if(E!==null){var _h=getMetrics(E,He,u);th=_h.height+_h.depth,pf=2}var cf=wt+Bs+th,df=Math.max(0,Math.ceil((r-cf)/(pf*sr))),uf=cf+df*pf*sr,li=l.fontMetrics().axisHeight;a&&(li*=l.sizeMultiplier);var Vc=uf/2-li,Rs=[];if(me.length>0){var qc=uf-wt-Bs,Qp=Math.round(uf*1e3),n1=tallDelim(me,Math.round(qc*1e3)),wh=new PathNode(me,n1),gf=(_e/1e3).toFixed(3)+"em",yh=(Qp/1e3).toFixed(3)+"em",ff=new SvgNode([wh],{width:gf,height:yh,viewBox:"0 0 "+_e+" "+Qp}),e1=buildCommon.makeSvgSpan([],[ff],l);e1.height=Qp/1e3,e1.style.width=gf,e1.style.height=yh,Rs.push({type:"elem",elem:e1})}else{if(Rs.push(makeGlyphSpan(Z,He,u)),Rs.push(lap),E===null){var s1=uf-wt-Bs+2*lapInEms;Rs.push(makeInner(P,s1,l))}else{var b1=(uf-wt-Bs-th)/2+2*lapInEms;Rs.push(makeInner(P,b1,l)),Rs.push(lap),Rs.push(makeGlyphSpan(E,He,u)),Rs.push(lap),Rs.push(makeInner(P,b1,l))}Rs.push(lap),Rs.push(makeGlyphSpan(g,He,u))}var _1=l.havingBaseStyle(Style$1.TEXT),V1=buildCommon.makeVList({positionType:"bottom",positionData:Vc,children:Rs},_1);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[V1],_1),Style$1.TEXT,l,d)},vbPad=80,emPad=.08,sqrtSvg=function t(e,r,a,l,u){var d=sqrtPath(e,l,a),g=new PathNode(e,d),E=new SvgNode([g],{width:"400em",height:makeEm(r),viewBox:"0 0 400000 "+a,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[E],u)},makeSqrtImage=function t(e,r){var a=r.havingBaseSizing(),l=traverseSequence("\\surd",e*a.sizeMultiplier,stackLargeDelimiterSequence,a),u=a.sizeMultiplier,d=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),g,E=0,P=0,Z=0,me;return l.type==="small"?(Z=1e3+1e3*d+vbPad,e<1?u=1:e<1.4&&(u=.7),E=(1+d+emPad)/u,P=(1+d)/u,g=sqrtSvg("sqrtMain",E,Z,d,r),g.style.minWidth="0.853em",me=.833/u):l.type==="large"?(Z=(1e3+vbPad)*sizeToMaxHeight[l.size],P=(sizeToMaxHeight[l.size]+d)/u,E=(sizeToMaxHeight[l.size]+d+emPad)/u,g=sqrtSvg("sqrtSize"+l.size,E,Z,d,r),g.style.minWidth="1.02em",me=1/u):(E=e+d+emPad,P=e+d,Z=Math.floor(1e3*e+d)+vbPad,g=sqrtSvg("sqrtTall",E,Z,d,r),g.style.minWidth="0.742em",me=1.056),g.height=P,g.style.height=makeEm(E),{span:g,advanceWidth:me,ruleWidth:(r.fontMetrics().sqrtRuleThickness+d)*u}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function t(e,r,a,l,u){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),utils.contains(stackLargeDelimiters,e)||utils.contains(stackNeverDelimiters,e))return makeLargeDelim(e,r,!1,a,l,u);if(utils.contains(stackAlwaysDelimiters,e))return makeStackedDelim(e,sizeToMaxHeight[r],!1,a,l,u);throw new ParseError("Illegal delimiter: '"+e+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function t(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},traverseSequence=function t(e,r,a,l){for(var u=Math.min(2,3-l.style.size),d=u;d<a.length&&a[d].type!=="stack";d++){var g=getMetrics(e,delimTypeToFont(a[d]),"math"),E=g.height+g.depth;if(a[d].type==="small"){var P=l.havingBaseStyle(a[d].style);E*=P.sizeMultiplier}if(E>r)return a[d]}return a[a.length-1]},makeCustomSizedDelim=function t(e,r,a,l,u,d){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var g;utils.contains(stackNeverDelimiters,e)?g=stackNeverDelimiterSequence:utils.contains(stackLargeDelimiters,e)?g=stackLargeDelimiterSequence:g=stackAlwaysDelimiterSequence;var E=traverseSequence(e,r,g,l);return E.type==="small"?makeSmallDelim(e,E.style,a,l,u,d):E.type==="large"?makeLargeDelim(e,E.size,a,l,u,d):makeStackedDelim(e,r,a,l,u,d)},makeLeftRightDelim=function t(e,r,a,l,u,d){var g=l.fontMetrics().axisHeight*l.sizeMultiplier,E=901,P=5/l.fontMetrics().ptPerEm,Z=Math.max(r-g,a+g),me=Math.max(Z/500*E,2*Z-P);return makeCustomSizedDelim(e,me,!0,l,u,d)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(t,e){var r=checkSymbolNodeType(t);if(r&&utils.contains(delimiters,r.text))return r;throw r?new ParseError("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new ParseError("Invalid delimiter type '"+t.type+"'",t)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=checkDelimiter(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:delimiterSizes[t.funcName].size,mclass:delimiterSizes[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?buildCommon.makeSpan([t.mclass]):delimiter.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(makeText(t.delim,t.mode));var r=new mathMLTree.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var a=makeEm(delimiter.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",a),r.setAttribute("maxsize",a),r}});function assertParsed(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:checkDelimiter(e[0],t).text,color:r}}});defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=checkDelimiter(e[0],t),a=t.parser;++a.leftrightDepth;var l=a.parseExpression(!1);--a.leftrightDepth,a.expect("\\right",!1);var u=assertNodeType(a.parseFunction(),"leftright-right");return{type:"leftright",mode:a.mode,body:l,left:r.text,right:u.delim,rightColor:u.color}},htmlBuilder:(t,e)=>{assertParsed(t);for(var r=buildExpression$1(t.body,e,!0,["mopen","mclose"]),a=0,l=0,u=!1,d=0;d<r.length;d++)r[d].isMiddle?u=!0:(a=Math.max(r[d].height,a),l=Math.max(r[d].depth,l));a*=e.sizeMultiplier,l*=e.sizeMultiplier;var g;if(t.left==="."?g=makeNullDelimiter(e,["mopen"]):g=delimiter.leftRightDelim(t.left,a,l,e,t.mode,["mopen"]),r.unshift(g),u)for(var E=1;E<r.length;E++){var P=r[E],Z=P.isMiddle;Z&&(r[E]=delimiter.leftRightDelim(Z.delim,a,l,Z.options,t.mode,[]))}var me;if(t.right===".")me=makeNullDelimiter(e,["mclose"]);else{var _e=t.rightColor?e.withColor(t.rightColor):e;me=delimiter.leftRightDelim(t.right,a,l,_e,t.mode,["mclose"])}return r.push(me),buildCommon.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{assertParsed(t);var r=buildExpression(t.body,e);if(t.left!=="."){var a=new mathMLTree.MathNode("mo",[makeText(t.left,t.mode)]);a.setAttribute("fence","true"),r.unshift(a)}if(t.right!=="."){var l=new mathMLTree.MathNode("mo",[makeText(t.right,t.mode)]);l.setAttribute("fence","true"),t.rightColor&&l.setAttribute("mathcolor",t.rightColor),r.push(l)}return makeRow(r)}});defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=checkDelimiter(e[0],t);if(!t.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=makeNullDelimiter(e,[]);else{r=delimiter.sizedDelim(t.delim,1,e,t.mode,[]);var a={delim:t.delim,options:e};r.isMiddle=a}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?makeText("|","text"):makeText(t.delim,t.mode),a=new mathMLTree.MathNode("mo",[r]);return a.setAttribute("fence","true"),a.setAttribute("lspace","0.05em"),a.setAttribute("rspace","0.05em"),a}});var htmlBuilder$7=(t,e)=>{var r=buildCommon.wrapFragment(buildGroup$1(t.body,e),e),a=t.label.slice(1),l=e.sizeMultiplier,u,d=0,g=utils.isCharacterBox(t.body);if(a==="sout")u=buildCommon.makeSpan(["stretchy","sout"]),u.height=e.fontMetrics().defaultRuleThickness/l,d=-.5*e.fontMetrics().xHeight;else if(a==="phase"){var E=calculateSize({number:.6,unit:"pt"},e),P=calculateSize({number:.35,unit:"ex"},e),Z=e.havingBaseSizing();l=l/Z.sizeMultiplier;var me=r.height+r.depth+E+P;r.style.paddingLeft=makeEm(me/2+E);var _e=Math.floor(1e3*me*l),He=phasePath(_e),Xe=new SvgNode([new PathNode("phase",He)],{width:"400em",height:makeEm(_e/1e3),viewBox:"0 0 400000 "+_e,preserveAspectRatio:"xMinYMin slice"});u=buildCommon.makeSvgSpan(["hide-tail"],[Xe],e),u.style.height=makeEm(me),d=r.depth+E+P}else{/cancel/.test(a)?g||r.classes.push("cancel-pad"):a==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var wt=0,Do=0,sr=0;/box/.test(a)?(sr=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),wt=e.fontMetrics().fboxsep+(a==="colorbox"?0:sr),Do=wt):a==="angl"?(sr=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),wt=4*sr,Do=Math.max(0,.25-r.depth)):(wt=g?.2:0,Do=wt),u=stretchy.encloseSpan(r,a,wt,Do,e),/fbox|boxed|fcolorbox/.test(a)?(u.style.borderStyle="solid",u.style.borderWidth=makeEm(sr)):a==="angl"&&sr!==.049&&(u.style.borderTopWidth=makeEm(sr),u.style.borderRightWidth=makeEm(sr)),d=r.depth+Do,t.backgroundColor&&(u.style.backgroundColor=t.backgroundColor,t.borderColor&&(u.style.borderColor=t.borderColor))}var Ko;if(t.backgroundColor)Ko=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:d},{type:"elem",elem:r,shift:0}]},e);else{var Bs=/cancel|phase/.test(a)?["svg-align"]:[];Ko=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:u,shift:d,wrapperClasses:Bs}]},e)}return/cancel/.test(a)&&(Ko.height=r.height,Ko.depth=r.depth),/cancel/.test(a)&&!g?buildCommon.makeSpan(["mord","cancel-lap"],[Ko],e):buildCommon.makeSpan(["mord"],[Ko],e)},mathmlBuilder$6=(t,e)=>{var r=0,a=new mathMLTree.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(t.body,e)]);switch(t.label){case"\\cancel":a.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":a.setAttribute("notation","downdiagonalstrike");break;case"\\phase":a.setAttribute("notation","phasorangle");break;case"\\sout":a.setAttribute("notation","horizontalstrike");break;case"\\fbox":a.setAttribute("notation","box");break;case"\\angl":a.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,a.setAttribute("width","+"+2*r+"pt"),a.setAttribute("height","+"+2*r+"pt"),a.setAttribute("lspace",r+"pt"),a.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var l=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);a.setAttribute("style","border: "+l+"em solid "+String(t.borderColor))}break;case"\\xcancel":a.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&a.setAttribute("mathbackground",t.backgroundColor),a};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:a,funcName:l}=t,u=assertNodeType(e[0],"color-token").color,d=e[1];return{type:"enclose",mode:a.mode,label:l,backgroundColor:u,body:d}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:a,funcName:l}=t,u=assertNodeType(e[0],"color-token").color,d=assertNodeType(e[1],"color-token").color,g=e[2];return{type:"enclose",mode:a.mode,label:l,backgroundColor:d,borderColor:u,body:g}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:a}=t,l=e[0];return{type:"enclose",mode:r.mode,label:a,body:l}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var _environments={};function defineEnvironment(t){for(var{type:e,names:r,props:a,handler:l,htmlBuilder:u,mathmlBuilder:d}=t,g={type:e,numArgs:a.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:l},E=0;E<r.length;++E)_environments[r[E]]=g;u&&(_htmlGroupBuilders[e]=u),d&&(_mathmlGroupBuilders[e]=d)}var _macros={};function defineMacro(t,e){_macros[t]=e}function getHLines(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var validateAmsEnvironmentContext=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ParseError("{"+t.envName+"} can be used only in display mode.")};function getAutoTag(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function parseArray(t,e,r){var{hskipBeforeAndAfter:a,addJot:l,cols:u,arraystretch:d,colSeparationType:g,autoTag:E,singleRow:P,emptySingleRow:Z,maxNumCols:me,leqno:_e}=e;if(t.gullet.beginGroup(),P||t.gullet.macros.set("\\cr","\\\\\\relax"),!d){var He=t.gullet.expandMacroAsText("\\arraystretch");if(He==null)d=1;else if(d=parseFloat(He),!d||d<0)throw new ParseError("Invalid \\arraystretch: "+He)}t.gullet.beginGroup();var Xe=[],wt=[Xe],Do=[],sr=[],Ko=E!=null?[]:void 0;function Bs(){E&&t.gullet.macros.set("\\@eqnsw","1",!0)}function th(){Ko&&(t.gullet.macros.get("\\df@tag")?(Ko.push(t.subparse([new Token("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):Ko.push(!!E&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(Bs(),sr.push(getHLines(t));;){var pf=t.parseExpression(!1,P?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),pf={type:"ordgroup",mode:t.mode,body:pf},r&&(pf={type:"styling",mode:t.mode,style:r,body:[pf]}),Xe.push(pf);var _h=t.fetch().text;if(_h==="&"){if(me&&Xe.length===me){if(P||g)throw new ParseError("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(_h==="\\end"){th(),Xe.length===1&&pf.type==="styling"&&pf.body[0].body.length===0&&(wt.length>1||!Z)&&wt.pop(),sr.length<wt.length+1&&sr.push([]);break}else if(_h==="\\\\"){t.consume();var cf=void 0;t.gullet.future().text!==" "&&(cf=t.parseSizeGroup(!0)),Do.push(cf?cf.value:null),th(),sr.push(getHLines(t)),Xe=[],wt.push(Xe),Bs()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:l,arraystretch:d,body:wt,cols:u,rowGaps:Do,hskipBeforeAndAfter:a,hLinesBeforeRow:sr,colSeparationType:g,tags:Ko,leqno:_e}}function dCellStyle(t){return t.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function t(e,r){var a,l,u=e.body.length,d=e.hLinesBeforeRow,g=0,E=new Array(u),P=[],Z=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),me=1/r.fontMetrics().ptPerEm,_e=5*me;if(e.colSeparationType&&e.colSeparationType==="small"){var He=r.havingStyle(Style$1.SCRIPT).sizeMultiplier;_e=.2778*(He/r.sizeMultiplier)}var Xe=e.colSeparationType==="CD"?calculateSize({number:3,unit:"ex"},r):12*me,wt=3*me,Do=e.arraystretch*Xe,sr=.7*Do,Ko=.3*Do,Bs=0;function th(F1){for(var K1=0;K1<F1.length;++K1)K1>0&&(Bs+=.25),P.push({pos:Bs,isDashed:F1[K1]})}for(th(d[0]),a=0;a<e.body.length;++a){var pf=e.body[a],_h=sr,cf=Ko;g<pf.length&&(g=pf.length);var df=new Array(pf.length);for(l=0;l<pf.length;++l){var uf=buildGroup$1(pf[l],r);cf<uf.depth&&(cf=uf.depth),_h<uf.height&&(_h=uf.height),df[l]=uf}var li=e.rowGaps[a],Vc=0;li&&(Vc=calculateSize(li,r),Vc>0&&(Vc+=Ko,cf<Vc&&(cf=Vc),Vc=0)),e.addJot&&(cf+=wt),df.height=_h,df.depth=cf,Bs+=_h,df.pos=Bs,Bs+=cf+Vc,E[a]=df,th(d[a+1])}var Rs=Bs/2+r.fontMetrics().axisHeight,qc=e.cols||[],Qp=[],n1,wh,gf=[];if(e.tags&&e.tags.some(F1=>F1))for(a=0;a<u;++a){var yh=E[a],ff=yh.pos-Rs,e1=e.tags[a],s1=void 0;e1===!0?s1=buildCommon.makeSpan(["eqn-num"],[],r):e1===!1?s1=buildCommon.makeSpan([],[],r):s1=buildCommon.makeSpan([],buildExpression$1(e1,r,!0),r),s1.depth=yh.depth,s1.height=yh.height,gf.push({type:"elem",elem:s1,shift:ff})}for(l=0,wh=0;l<g||wh<qc.length;++l,++wh){for(var b1=qc[wh]||{},_1=!0;b1.type==="separator";){if(_1||(n1=buildCommon.makeSpan(["arraycolsep"],[]),n1.style.width=makeEm(r.fontMetrics().doubleRuleSep),Qp.push(n1)),b1.separator==="|"||b1.separator===":"){var V1=b1.separator==="|"?"solid":"dashed",I1=buildCommon.makeSpan(["vertical-separator"],[],r);I1.style.height=makeEm(Bs),I1.style.borderRightWidth=makeEm(Z),I1.style.borderRightStyle=V1,I1.style.margin="0 "+makeEm(-Z/2);var i2=Bs-Rs;i2&&(I1.style.verticalAlign=makeEm(-i2)),Qp.push(I1)}else throw new ParseError("Invalid separator type: "+b1.separator);wh++,b1=qc[wh]||{},_1=!1}if(!(l>=g)){var R2=void 0;(l>0||e.hskipBeforeAndAfter)&&(R2=utils.deflt(b1.pregap,_e),R2!==0&&(n1=buildCommon.makeSpan(["arraycolsep"],[]),n1.style.width=makeEm(R2),Qp.push(n1)));var F2=[];for(a=0;a<u;++a){var X1=E[a],W2=X1[l];if(W2){var N2=X1.pos-Rs;W2.depth=X1.depth,W2.height=X1.height,F2.push({type:"elem",elem:W2,shift:N2})}}F2=buildCommon.makeVList({positionType:"individualShift",children:F2},r),F2=buildCommon.makeSpan(["col-align-"+(b1.align||"c")],[F2]),Qp.push(F2),(l<g-1||e.hskipBeforeAndAfter)&&(R2=utils.deflt(b1.postgap,_e),R2!==0&&(n1=buildCommon.makeSpan(["arraycolsep"],[]),n1.style.width=makeEm(R2),Qp.push(n1)))}}if(E=buildCommon.makeSpan(["mtable"],Qp),P.length>0){for(var V2=buildCommon.makeLineSpan("hline",r,Z),q2=buildCommon.makeLineSpan("hdashline",r,Z),B2=[{type:"elem",elem:E,shift:0}];P.length>0;){var K2=P.pop(),S2=K2.pos-Rs;K2.isDashed?B2.push({type:"elem",elem:q2,shift:S2}):B2.push({type:"elem",elem:V2,shift:S2})}E=buildCommon.makeVList({positionType:"individualShift",children:B2},r)}if(gf.length===0)return buildCommon.makeSpan(["mord"],[E],r);var E1=buildCommon.makeVList({positionType:"individualShift",children:gf},r);return E1=buildCommon.makeSpan(["tag"],[E1],r),buildCommon.makeFragment([E,E1])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function t(e,r){for(var a=[],l=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),u=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),d=0;d<e.body.length;d++){for(var g=e.body[d],E=[],P=0;P<g.length;P++)E.push(new mathMLTree.MathNode("mtd",[buildGroup(g[P],r)]));e.tags&&e.tags[d]&&(E.unshift(l),E.push(l),e.leqno?E.unshift(u):E.push(u)),a.push(new mathMLTree.MathNode("mtr",E))}var Z=new mathMLTree.MathNode("mtable",a),me=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);Z.setAttribute("rowspacing",makeEm(me));var _e="",He="";if(e.cols&&e.cols.length>0){var Xe=e.cols,wt="",Do=!1,sr=0,Ko=Xe.length;Xe[0].type==="separator"&&(_e+="top ",sr=1),Xe[Xe.length-1].type==="separator"&&(_e+="bottom ",Ko-=1);for(var Bs=sr;Bs<Ko;Bs++)Xe[Bs].type==="align"?(He+=alignMap[Xe[Bs].align],Do&&(wt+="none "),Do=!0):Xe[Bs].type==="separator"&&Do&&(wt+=Xe[Bs].separator==="|"?"solid ":"dashed ",Do=!1);Z.setAttribute("columnalign",He.trim()),/[sd]/.test(wt)&&Z.setAttribute("columnlines",wt.trim())}if(e.colSeparationType==="align"){for(var th=e.cols||[],pf="",_h=1;_h<th.length;_h++)pf+=_h%2?"0em ":"1em ";Z.setAttribute("columnspacing",pf.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?Z.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?Z.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?Z.setAttribute("columnspacing","0.5em"):Z.setAttribute("columnspacing","1em");var cf="",df=e.hLinesBeforeRow;_e+=df[0].length>0?"left ":"",_e+=df[df.length-1].length>0?"right ":"";for(var uf=1;uf<df.length-1;uf++)cf+=df[uf].length===0?"none ":df[uf][0]?"dashed ":"solid ";return/[sd]/.test(cf)&&Z.setAttribute("rowlines",cf.trim()),_e!==""&&(Z=new mathMLTree.MathNode("menclose",[Z]),Z.setAttribute("notation",_e.trim())),e.arraystretch&&e.arraystretch<1&&(Z=new mathMLTree.MathNode("mstyle",[Z]),Z.setAttribute("scriptlevel","1")),Z},alignedHandler=function t(e,r){e.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(e);var a=[],l=e.envName.indexOf("at")>-1?"alignat":"align",u=e.envName==="split",d=parseArray(e.parser,{cols:a,addJot:!0,autoTag:u?void 0:getAutoTag(e.envName),emptySingleRow:!0,colSeparationType:l,maxNumCols:u?2:void 0,leqno:e.parser.settings.leqno},"display"),g,E=0,P={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var Z="",me=0;me<r[0].body.length;me++){var _e=assertNodeType(r[0].body[me],"textord");Z+=_e.text}g=Number(Z),E=g*2}var He=!E;d.body.forEach(function(sr){for(var Ko=1;Ko<sr.length;Ko+=2){var Bs=assertNodeType(sr[Ko],"styling"),th=assertNodeType(Bs.body[0],"ordgroup");th.body.unshift(P)}if(He)E<sr.length&&(E=sr.length);else{var pf=sr.length/2;if(g<pf)throw new ParseError("Too many math in a row: "+("expected "+g+", but got "+pf),sr[0])}});for(var Xe=0;Xe<E;++Xe){var wt="r",Do=0;Xe%2===1?wt="l":Xe>0&&He&&(Do=1),a[Xe]={type:"align",align:wt,pregap:Do,postgap:0}}return d.colSeparationType=He?"align":"alignat",d};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=checkSymbolNodeType(e[0]),a=r?[e[0]]:assertNodeType(e[0],"ordgroup").body,l=a.map(function(d){var g=assertSymbolNodeType(d),E=g.text;if("lcr".indexOf(E)!==-1)return{type:"align",align:E};if(E==="|")return{type:"separator",separator:"|"};if(E===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+E,d)}),u={cols:l,hskipBeforeAndAfter:!0,maxNumCols:l.length};return parseArray(t.parser,u,dCellStyle(t.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",a={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var l=t.parser;if(l.consumeSpaces(),l.fetch().text==="["){if(l.consume(),l.consumeSpaces(),r=l.fetch().text,"lcr".indexOf(r)===-1)throw new ParseError("Expected l or c or r",l.nextToken);l.consume(),l.consumeSpaces(),l.expect("]"),l.consume(),a.cols=[{type:"align",align:r}]}}var u=parseArray(t.parser,a,dCellStyle(t.envName)),d=Math.max(0,...u.body.map(g=>g.length));return u.cols=new Array(d).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[u],left:e[0],right:e[1],rightColor:void 0}:u},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=parseArray(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=checkSymbolNodeType(e[0]),a=r?[e[0]]:assertNodeType(e[0],"ordgroup").body,l=a.map(function(d){var g=assertSymbolNodeType(d),E=g.text;if("lc".indexOf(E)!==-1)return{type:"align",align:E};throw new ParseError("Unknown column alignment: "+E,d)});if(l.length>1)throw new ParseError("{subarray} can contain only one column");var u={cols:l,hskipBeforeAndAfter:!1,arraystretch:.5};if(u=parseArray(t.parser,u,"script"),u.body.length>0&&u.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return u},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=parseArray(t.parser,e,dCellStyle(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){utils.contains(["gather","gather*"],t.envName)&&validateAmsEnvironmentContext(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return parseArray(t.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){validateAmsEnvironmentContext(t);var e={autoTag:getAutoTag(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return parseArray(t.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(t){return validateAmsEnvironmentContext(t),parseCD(t.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineMacro("\\nonumber","\\gdef\\@eqnsw{0}");defineMacro("\\notag","\\nonumber");defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ParseError(t.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:a}=t,l=e[0];if(l.type!=="ordgroup")throw new ParseError("Invalid environment name",l);for(var u="",d=0;d<l.body.length;++d)u+=assertNodeType(l.body[d],"textord").text;if(a==="\\begin"){if(!environments.hasOwnProperty(u))throw new ParseError("No such environment: "+u,l);var g=environments[u],{args:E,optArgs:P}=r.parseArguments("\\begin{"+u+"}",g),Z={mode:r.mode,envName:u,parser:r},me=g.handler(Z,E,P);r.expect("\\end",!1);var _e=r.nextToken,He=assertNodeType(r.parseFunction(),"environment");if(He.name!==u)throw new ParseError("Mismatch: \\begin{"+u+"} matched by \\end{"+He.name+"}",_e);return me}return{type:"environment",mode:r.mode,name:u,nameGroup:l}}});var htmlBuilder$5=(t,e)=>{var r=t.font,a=e.withFont(r);return buildGroup$1(t.body,a)},mathmlBuilder$4=(t,e)=>{var r=t.font,a=e.withFont(r);return buildGroup(t.body,a)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:a}=t,l=normalizeArgument(e[0]),u=a;return u in fontAliases&&(u=fontAliases[u]),{type:"font",mode:r.mode,font:u.slice(1),body:l}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,a=e[0],l=utils.isCharacterBox(a);return{type:"mclass",mode:r.mode,mclass:binrelClass(a),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:a}],isCharacterBox:l}}});defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:a,breakOnTokenText:l}=t,{mode:u}=r,d=r.parseExpression(!0,l),g="math"+a.slice(1);return{type:"font",mode:u,font:g,body:{type:"ordgroup",mode:r.mode,body:d}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(t,e)=>{var r=e;return t==="display"?r=r.id>=Style$1.SCRIPT.id?r.text():Style$1.DISPLAY:t==="text"&&r.size===Style$1.DISPLAY.size?r=Style$1.TEXT:t==="script"?r=Style$1.SCRIPT:t==="scriptscript"&&(r=Style$1.SCRIPTSCRIPT),r},htmlBuilder$4=(t,e)=>{var r=adjustStyle(t.size,e.style),a=r.fracNum(),l=r.fracDen(),u;u=e.havingStyle(a);var d=buildGroup$1(t.numer,u,e);if(t.continued){var g=8.5/e.fontMetrics().ptPerEm,E=3.5/e.fontMetrics().ptPerEm;d.height=d.height<g?g:d.height,d.depth=d.depth<E?E:d.depth}u=e.havingStyle(l);var P=buildGroup$1(t.denom,u,e),Z,me,_e;t.hasBarLine?(t.barSize?(me=calculateSize(t.barSize,e),Z=buildCommon.makeLineSpan("frac-line",e,me)):Z=buildCommon.makeLineSpan("frac-line",e),me=Z.height,_e=Z.height):(Z=null,me=0,_e=e.fontMetrics().defaultRuleThickness);var He,Xe,wt;r.size===Style$1.DISPLAY.size||t.size==="display"?(He=e.fontMetrics().num1,me>0?Xe=3*_e:Xe=7*_e,wt=e.fontMetrics().denom1):(me>0?(He=e.fontMetrics().num2,Xe=_e):(He=e.fontMetrics().num3,Xe=3*_e),wt=e.fontMetrics().denom2);var Do;if(Z){var Ko=e.fontMetrics().axisHeight;He-d.depth-(Ko+.5*me)<Xe&&(He+=Xe-(He-d.depth-(Ko+.5*me))),Ko-.5*me-(P.height-wt)<Xe&&(wt+=Xe-(Ko-.5*me-(P.height-wt)));var Bs=-(Ko-.5*me);Do=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:P,shift:wt},{type:"elem",elem:Z,shift:Bs},{type:"elem",elem:d,shift:-He}]},e)}else{var sr=He-d.depth-(P.height-wt);sr<Xe&&(He+=.5*(Xe-sr),wt+=.5*(Xe-sr)),Do=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:P,shift:wt},{type:"elem",elem:d,shift:-He}]},e)}u=e.havingStyle(r),Do.height*=u.sizeMultiplier/e.sizeMultiplier,Do.depth*=u.sizeMultiplier/e.sizeMultiplier;var th;r.size===Style$1.DISPLAY.size?th=e.fontMetrics().delim1:r.size===Style$1.SCRIPTSCRIPT.size?th=e.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:th=e.fontMetrics().delim2;var pf,_h;return t.leftDelim==null?pf=makeNullDelimiter(e,["mopen"]):pf=delimiter.customSizedDelim(t.leftDelim,th,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?_h=buildCommon.makeSpan([]):t.rightDelim==null?_h=makeNullDelimiter(e,["mclose"]):_h=delimiter.customSizedDelim(t.rightDelim,th,!0,e.havingStyle(r),t.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(u.sizingClasses(e)),[pf,buildCommon.makeSpan(["mfrac"],[Do]),_h],e)},mathmlBuilder$3=(t,e)=>{var r=new mathMLTree.MathNode("mfrac",[buildGroup(t.numer,e),buildGroup(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var a=calculateSize(t.barSize,e);r.setAttribute("linethickness",makeEm(a))}var l=adjustStyle(t.size,e.style);if(l.size!==e.style.size){r=new mathMLTree.MathNode("mstyle",[r]);var u=l.size===Style$1.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",u),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var d=[];if(t.leftDelim!=null){var g=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(t.leftDelim.replace("\\",""))]);g.setAttribute("fence","true"),d.push(g)}if(d.push(r),t.rightDelim!=null){var E=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(t.rightDelim.replace("\\",""))]);E.setAttribute("fence","true"),d.push(E)}return makeRow(d)}return r};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:a}=t,l=e[0],u=e[1],d,g=null,E=null,P="auto";switch(a){case"\\dfrac":case"\\frac":case"\\tfrac":d=!0;break;case"\\\\atopfrac":d=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":d=!1,g="(",E=")";break;case"\\\\bracefrac":d=!1,g="\\{",E="\\}";break;case"\\\\brackfrac":d=!1,g="[",E="]";break;default:throw new Error("Unrecognized genfrac command")}switch(a){case"\\dfrac":case"\\dbinom":P="display";break;case"\\tfrac":case"\\tbinom":P="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:l,denom:u,hasBarLine:d,leftDelim:g,rightDelim:E,size:P,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:a}=t,l=e[0],u=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:l,denom:u,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:a}=t,l;switch(r){case"\\over":l="\\frac";break;case"\\choose":l="\\binom";break;case"\\atop":l="\\\\atopfrac";break;case"\\brace":l="\\\\bracefrac";break;case"\\brack":l="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:l,token:a}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function t(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,a=e[4],l=e[5],u=normalizeArgument(e[0]),d=u.type==="atom"&&u.family==="open"?delimFromValue(u.text):null,g=normalizeArgument(e[1]),E=g.type==="atom"&&g.family==="close"?delimFromValue(g.text):null,P=assertNodeType(e[2],"size"),Z,me=null;P.isBlank?Z=!0:(me=P.value,Z=me.number>0);var _e="auto",He=e[3];if(He.type==="ordgroup"){if(He.body.length>0){var Xe=assertNodeType(He.body[0],"textord");_e=stylArray[Number(Xe.text)]}}else He=assertNodeType(He,"textord"),_e=stylArray[Number(He.text)];return{type:"genfrac",mode:r.mode,numer:a,denom:l,continued:!1,hasBarLine:Z,barSize:me,leftDelim:d,rightDelim:E,size:_e}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:a,token:l}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(e[0],"size").value,token:l}}});defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:a}=t,l=e[0],u=assert(assertNodeType(e[1],"infix").size),d=e[2],g=u.number>0;return{type:"genfrac",mode:r.mode,numer:l,denom:d,continued:!1,hasBarLine:g,barSize:u,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(t,e)=>{var r=e.style,a,l;t.type==="supsub"?(a=t.sup?buildGroup$1(t.sup,e.havingStyle(r.sup()),e):buildGroup$1(t.sub,e.havingStyle(r.sub()),e),l=assertNodeType(t.base,"horizBrace")):l=assertNodeType(t,"horizBrace");var u=buildGroup$1(l.base,e.havingBaseStyle(Style$1.DISPLAY)),d=stretchy.svgSpan(l,e),g;if(l.isOver?(g=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:u},{type:"kern",size:.1},{type:"elem",elem:d}]},e),g.children[0].children[0].children[1].classes.push("svg-align")):(g=buildCommon.makeVList({positionType:"bottom",positionData:u.depth+.1+d.height,children:[{type:"elem",elem:d},{type:"kern",size:.1},{type:"elem",elem:u}]},e),g.children[0].children[0].children[0].classes.push("svg-align")),a){var E=buildCommon.makeSpan(["mord",l.isOver?"mover":"munder"],[g],e);l.isOver?g=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:E},{type:"kern",size:.2},{type:"elem",elem:a}]},e):g=buildCommon.makeVList({positionType:"bottom",positionData:E.depth+.2+a.height+a.depth,children:[{type:"elem",elem:a},{type:"kern",size:.2},{type:"elem",elem:E}]},e)}return buildCommon.makeSpan(["mord",l.isOver?"mover":"munder"],[g],e)},mathmlBuilder$2=(t,e)=>{var r=stretchy.mathMLnode(t.label);return new mathMLTree.MathNode(t.isOver?"mover":"munder",[buildGroup(t.base,e),r])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:a}=t;return{type:"horizBrace",mode:r.mode,label:a,isOver:/^\\over/.test(a),base:e[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2});defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,a=e[1],l=assertNodeType(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:l})?{type:"href",mode:r.mode,href:l,body:ordargument(a)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=buildExpression$1(t.body,e,!1);return buildCommon.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=buildExpressionRow(t.body,e);return r instanceof MathNode||(r=new MathNode("mrow",[r])),r.setAttribute("href",t.href),r}});defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,a=assertNodeType(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:a}))return r.formatUnsupportedCmd("\\url");for(var l=[],u=0;u<a.length;u++){var d=a[u];d==="~"&&(d="\\textasciitilde"),l.push({type:"textord",mode:"text",text:d})}var g={type:"text",mode:r.mode,font:"\\texttt",body:l};return{type:"href",mode:r.mode,href:a,body:ordargument(g)}}});defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:ordargument(e[0])}},htmlBuilder(t,e){var r=buildExpression$1(t.body,e,!1);return buildCommon.makeFragment(r)},mathmlBuilder(t,e){return new mathMLTree.MathNode("mrow",buildExpression(t.body,e))}});defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:a,token:l}=t,u=assertNodeType(e[0],"raw").string,d=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var g,E={};switch(a){case"\\htmlClass":E.class=u,g={command:"\\htmlClass",class:u};break;case"\\htmlId":E.id=u,g={command:"\\htmlId",id:u};break;case"\\htmlStyle":E.style=u,g={command:"\\htmlStyle",style:u};break;case"\\htmlData":{for(var P=u.split(","),Z=0;Z<P.length;Z++){var me=P[Z].split("=");if(me.length!==2)throw new ParseError("Error parsing key-value for \\htmlData");E["data-"+me[0].trim()]=me[1].trim()}g={command:"\\htmlData",attributes:E};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(g)?{type:"html",mode:r.mode,attributes:E,body:ordargument(d)}:r.formatUnsupportedCmd(a)},htmlBuilder:(t,e)=>{var r=buildExpression$1(t.body,e,!1),a=["enclosing"];t.attributes.class&&a.push(...t.attributes.class.trim().split(/\s+/));var l=buildCommon.makeSpan(a,r,e);for(var u in t.attributes)u!=="class"&&t.attributes.hasOwnProperty(u)&&l.setAttribute(u,t.attributes[u]);return l},mathmlBuilder:(t,e)=>buildExpressionRow(t.body,e)});defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:ordargument(e[0]),mathml:ordargument(e[1])}},htmlBuilder:(t,e)=>{var r=buildExpression$1(t.html,e,!1);return buildCommon.makeFragment(r)},mathmlBuilder:(t,e)=>buildExpressionRow(t.mathml,e)});var sizeData=function t(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new ParseError("Invalid size: '"+e+"' in \\includegraphics");var a={number:+(r[1]+r[2]),unit:r[3]};if(!validUnit(a))throw new ParseError("Invalid unit: '"+a.unit+"' in \\includegraphics.");return a};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:a}=t,l={number:0,unit:"em"},u={number:.9,unit:"em"},d={number:0,unit:"em"},g="";if(r[0])for(var E=assertNodeType(r[0],"raw").string,P=E.split(","),Z=0;Z<P.length;Z++){var me=P[Z].split("=");if(me.length===2){var _e=me[1].trim();switch(me[0].trim()){case"alt":g=_e;break;case"width":l=sizeData(_e);break;case"height":u=sizeData(_e);break;case"totalheight":d=sizeData(_e);break;default:throw new ParseError("Invalid key: '"+me[0]+"' in \\includegraphics.")}}}var He=assertNodeType(e[0],"url").url;return g===""&&(g=He,g=g.replace(/^.*[\\/]/,""),g=g.substring(0,g.lastIndexOf("."))),a.settings.isTrusted({command:"\\includegraphics",url:He})?{type:"includegraphics",mode:a.mode,alt:g,width:l,height:u,totalheight:d,src:He}:a.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=calculateSize(t.height,e),a=0;t.totalheight.number>0&&(a=calculateSize(t.totalheight,e)-r);var l=0;t.width.number>0&&(l=calculateSize(t.width,e));var u={height:makeEm(r+a)};l>0&&(u.width=makeEm(l)),a>0&&(u.verticalAlign=makeEm(-a));var d=new Img(t.src,t.alt,u);return d.height=r,d.depth=a,d},mathmlBuilder:(t,e)=>{var r=new mathMLTree.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var a=calculateSize(t.height,e),l=0;if(t.totalheight.number>0&&(l=calculateSize(t.totalheight,e)-a,r.setAttribute("valign",makeEm(-l))),r.setAttribute("height",makeEm(a+l)),t.width.number>0){var u=calculateSize(t.width,e);r.setAttribute("width",makeEm(u))}return r.setAttribute("src",t.src),r}});defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:a}=t,l=assertNodeType(e[0],"size");if(r.settings.strict){var u=a[1]==="m",d=l.value.unit==="mu";u?(d||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" supports only mu units, "+("not "+l.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" works only in math mode")):d&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:l.value}},htmlBuilder(t,e){return buildCommon.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=calculateSize(t.dimension,e);return new mathMLTree.SpaceNode(r)}});defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:a}=t,l=e[0];return{type:"lap",mode:r.mode,alignment:a.slice(5),body:l}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=buildCommon.makeSpan([],[buildGroup$1(t.body,e)]),r=buildCommon.makeSpan(["inner"],[r],e)):r=buildCommon.makeSpan(["inner"],[buildGroup$1(t.body,e)]);var a=buildCommon.makeSpan(["fix"],[]),l=buildCommon.makeSpan([t.alignment],[r,a],e),u=buildCommon.makeSpan(["strut"]);return u.style.height=makeEm(l.height+l.depth),l.depth&&(u.style.verticalAlign=makeEm(-l.depth)),l.children.unshift(u),l=buildCommon.makeSpan(["thinbox"],[l],e),buildCommon.makeSpan(["mord","vbox"],[l],e)},mathmlBuilder:(t,e)=>{var r=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)]);if(t.alignment!=="rlap"){var a=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",a+"width")}return r.setAttribute("width","0px"),r}});defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:a}=t,l=a.mode;a.switchMode("math");var u=r==="\\("?"\\)":"$",d=a.parseExpression(!1,u);return a.expect(u),a.switchMode(l),{type:"styling",mode:a.mode,style:"text",body:d}}});defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ParseError("Mismatched "+t.funcName)}});var chooseMathStyle=(t,e)=>{switch(e.style.size){case Style$1.DISPLAY.size:return t.display;case Style$1.TEXT.size:return t.text;case Style$1.SCRIPT.size:return t.script;case Style$1.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:ordargument(e[0]),text:ordargument(e[1]),script:ordargument(e[2]),scriptscript:ordargument(e[3])}},htmlBuilder:(t,e)=>{var r=chooseMathStyle(t,e),a=buildExpression$1(r,e,!1);return buildCommon.makeFragment(a)},mathmlBuilder:(t,e)=>{var r=chooseMathStyle(t,e);return buildExpressionRow(r,e)}});var assembleSupSub=(t,e,r,a,l,u,d)=>{t=buildCommon.makeSpan([],[t]);var g=r&&utils.isCharacterBox(r),E,P;if(e){var Z=buildGroup$1(e,a.havingStyle(l.sup()),a);P={elem:Z,kern:Math.max(a.fontMetrics().bigOpSpacing1,a.fontMetrics().bigOpSpacing3-Z.depth)}}if(r){var me=buildGroup$1(r,a.havingStyle(l.sub()),a);E={elem:me,kern:Math.max(a.fontMetrics().bigOpSpacing2,a.fontMetrics().bigOpSpacing4-me.height)}}var _e;if(P&&E){var He=a.fontMetrics().bigOpSpacing5+E.elem.height+E.elem.depth+E.kern+t.depth+d;_e=buildCommon.makeVList({positionType:"bottom",positionData:He,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:E.elem,marginLeft:makeEm(-u)},{type:"kern",size:E.kern},{type:"elem",elem:t},{type:"kern",size:P.kern},{type:"elem",elem:P.elem,marginLeft:makeEm(u)},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}else if(E){var Xe=t.height-d;_e=buildCommon.makeVList({positionType:"top",positionData:Xe,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:E.elem,marginLeft:makeEm(-u)},{type:"kern",size:E.kern},{type:"elem",elem:t}]},a)}else if(P){var wt=t.depth+d;_e=buildCommon.makeVList({positionType:"bottom",positionData:wt,children:[{type:"elem",elem:t},{type:"kern",size:P.kern},{type:"elem",elem:P.elem,marginLeft:makeEm(u)},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}else return t;var Do=[_e];if(E&&u!==0&&!g){var sr=buildCommon.makeSpan(["mspace"],[],a);sr.style.marginRight=makeEm(u),Do.unshift(sr)}return buildCommon.makeSpan(["mop","op-limits"],Do,a)},noSuccessor=["\\smallint"],htmlBuilder$2=(t,e)=>{var r,a,l=!1,u;t.type==="supsub"?(r=t.sup,a=t.sub,u=assertNodeType(t.base,"op"),l=!0):u=assertNodeType(t,"op");var d=e.style,g=!1;d.size===Style$1.DISPLAY.size&&u.symbol&&!utils.contains(noSuccessor,u.name)&&(g=!0);var E;if(u.symbol){var P=g?"Size2-Regular":"Size1-Regular",Z="";if((u.name==="\\oiint"||u.name==="\\oiiint")&&(Z=u.name.slice(1),u.name=Z==="oiint"?"\\iint":"\\iiint"),E=buildCommon.makeSymbol(u.name,P,"math",e,["mop","op-symbol",g?"large-op":"small-op"]),Z.length>0){var me=E.italic,_e=buildCommon.staticSvg(Z+"Size"+(g?"2":"1"),e);E=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:E,shift:0},{type:"elem",elem:_e,shift:g?.08:0}]},e),u.name="\\"+Z,E.classes.unshift("mop"),E.italic=me}}else if(u.body){var He=buildExpression$1(u.body,e,!0);He.length===1&&He[0]instanceof SymbolNode?(E=He[0],E.classes[0]="mop"):E=buildCommon.makeSpan(["mop"],He,e)}else{for(var Xe=[],wt=1;wt<u.name.length;wt++)Xe.push(buildCommon.mathsym(u.name[wt],u.mode,e));E=buildCommon.makeSpan(["mop"],Xe,e)}var Do=0,sr=0;return(E instanceof SymbolNode||u.name==="\\oiint"||u.name==="\\oiiint")&&!u.suppressBaseShift&&(Do=(E.height-E.depth)/2-e.fontMetrics().axisHeight,sr=E.italic),l?assembleSupSub(E,r,a,e,d,sr,Do):(Do&&(E.style.position="relative",E.style.top=makeEm(Do)),E)},mathmlBuilder$1=(t,e)=>{var r;if(t.symbol)r=new MathNode("mo",[makeText(t.name,t.mode)]),utils.contains(noSuccessor,t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new MathNode("mo",buildExpression(t.body,e));else{r=new MathNode("mi",[new TextNode(t.name.slice(1))]);var a=new MathNode("mo",[makeText("","text")]);t.parentIsSupSub?r=new MathNode("mrow",[r,a]):r=newDocumentFragment([r,a])}return r},singleCharBigOps={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:a}=t,l=a;return l.length===1&&(l=singleCharBigOps[l]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:l}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,a=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(a)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t,a=r;return a.length===1&&(a=singleCharIntegrals[a]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(t,e)=>{var r,a,l=!1,u;t.type==="supsub"?(r=t.sup,a=t.sub,u=assertNodeType(t.base,"operatorname"),l=!0):u=assertNodeType(t,"operatorname");var d;if(u.body.length>0){for(var g=u.body.map(me=>{var _e=me.text;return typeof _e=="string"?{type:"textord",mode:me.mode,text:_e}:me}),E=buildExpression$1(g,e.withFont("mathrm"),!0),P=0;P<E.length;P++){var Z=E[P];Z instanceof SymbolNode&&(Z.text=Z.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}d=buildCommon.makeSpan(["mop"],E,e)}else d=buildCommon.makeSpan(["mop"],[],e);return l?assembleSupSub(d,r,a,e,e.style,0,0):d},mathmlBuilder=(t,e)=>{for(var r=buildExpression(t.body,e.withFont("mathrm")),a=!0,l=0;l<r.length;l++){var u=r[l];if(!(u instanceof mathMLTree.SpaceNode))if(u instanceof mathMLTree.MathNode)switch(u.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var d=u.children[0];u.children.length===1&&d instanceof mathMLTree.TextNode?d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):a=!1;break}default:a=!1}else a=!1}if(a){var g=r.map(Z=>Z.toText()).join("");r=[new mathMLTree.TextNode(g)]}var E=new mathMLTree.MathNode("mi",r);E.setAttribute("mathvariant","normal");var P=new mathMLTree.MathNode("mo",[makeText("","text")]);return t.parentIsSupSub?new mathMLTree.MathNode("mrow",[E,P]):mathMLTree.newDocumentFragment([E,P])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:a}=t,l=e[0];return{type:"operatorname",mode:r.mode,body:ordargument(l),alwaysHandleSupSub:a==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder});defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");defineFunctionBuilders({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?buildCommon.makeFragment(buildExpression$1(t.body,e,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(t.body,e,!0),e)},mathmlBuilder(t,e){return buildExpressionRow(t.body,e,!0)}});defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,a=e[0];return{type:"overline",mode:r.mode,body:a}},htmlBuilder(t,e){var r=buildGroup$1(t.body,e.havingCrampedStyle()),a=buildCommon.makeLineSpan("overline-line",e),l=e.fontMetrics().defaultRuleThickness,u=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*l},{type:"elem",elem:a},{type:"kern",size:l}]},e);return buildCommon.makeSpan(["mord","overline"],[u],e)},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);r.setAttribute("stretchy","true");var a=new mathMLTree.MathNode("mover",[buildGroup(t.body,e),r]);return a.setAttribute("accent","true"),a}});defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,a=e[0];return{type:"phantom",mode:r.mode,body:ordargument(a)}},htmlBuilder:(t,e)=>{var r=buildExpression$1(t.body,e.withPhantom(),!1);return buildCommon.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=buildExpression(t.body,e);return new mathMLTree.MathNode("mphantom",r)}});defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,a=e[0];return{type:"hphantom",mode:r.mode,body:a}},htmlBuilder:(t,e)=>{var r=buildCommon.makeSpan([],[buildGroup$1(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var a=0;a<r.children.length;a++)r.children[a].height=0,r.children[a].depth=0;return r=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),buildCommon.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=buildExpression(ordargument(t.body),e),a=new mathMLTree.MathNode("mphantom",r),l=new mathMLTree.MathNode("mpadded",[a]);return l.setAttribute("height","0px"),l.setAttribute("depth","0px"),l}});defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,a=e[0];return{type:"vphantom",mode:r.mode,body:a}},htmlBuilder:(t,e)=>{var r=buildCommon.makeSpan(["inner"],[buildGroup$1(t.body,e.withPhantom())]),a=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[r,a],e)},mathmlBuilder:(t,e)=>{var r=buildExpression(ordargument(t.body),e),a=new mathMLTree.MathNode("mphantom",r),l=new mathMLTree.MathNode("mpadded",[a]);return l.setAttribute("width","0px"),l}});defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,a=assertNodeType(e[0],"size").value,l=e[1];return{type:"raisebox",mode:r.mode,dy:a,body:l}},htmlBuilder(t,e){var r=buildGroup$1(t.body,e),a=calculateSize(t.dy,e);return buildCommon.makeVList({positionType:"shift",positionData:-a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)]),a=t.dy.number+t.dy.unit;return r.setAttribute("voffset",a),r}});defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:a}=t,l=r[0],u=assertNodeType(e[0],"size"),d=assertNodeType(e[1],"size");return{type:"rule",mode:a.mode,shift:l&&assertNodeType(l,"size").value,width:u.value,height:d.value}},htmlBuilder(t,e){var r=buildCommon.makeSpan(["mord","rule"],[],e),a=calculateSize(t.width,e),l=calculateSize(t.height,e),u=t.shift?calculateSize(t.shift,e):0;return r.style.borderRightWidth=makeEm(a),r.style.borderTopWidth=makeEm(l),r.style.bottom=makeEm(u),r.width=a,r.height=l+u,r.depth=-u,r.maxFontSize=l*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=calculateSize(t.width,e),a=calculateSize(t.height,e),l=t.shift?calculateSize(t.shift,e):0,u=e.color&&e.getColor()||"black",d=new mathMLTree.MathNode("mspace");d.setAttribute("mathbackground",u),d.setAttribute("width",makeEm(r)),d.setAttribute("height",makeEm(a));var g=new mathMLTree.MathNode("mpadded",[d]);return l>=0?g.setAttribute("height",makeEm(l)):(g.setAttribute("height",makeEm(l)),g.setAttribute("depth",makeEm(-l))),g.setAttribute("voffset",makeEm(l)),g}});function sizingGroup(t,e,r){for(var a=buildExpression$1(t,e,!1),l=e.sizeMultiplier/r.sizeMultiplier,u=0;u<a.length;u++){var d=a[u].classes.indexOf("sizing");d<0?Array.prototype.push.apply(a[u].classes,e.sizingClasses(r)):a[u].classes[d+1]==="reset-size"+e.size&&(a[u].classes[d+1]="reset-size"+r.size),a[u].height*=l,a[u].depth*=l}return buildCommon.makeFragment(a)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(t,e)=>{var r=e.havingSize(t.size);return sizingGroup(t.body,r,e)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:a,parser:l}=t,u=l.parseExpression(!1,r);return{type:"sizing",mode:l.mode,size:sizeFuncs.indexOf(a)+1,body:u}},htmlBuilder,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),a=buildExpression(t.body,r),l=new mathMLTree.MathNode("mstyle",a);return l.setAttribute("mathsize",makeEm(r.sizeMultiplier)),l}});defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:a}=t,l=!1,u=!1,d=r[0]&&assertNodeType(r[0],"ordgroup");if(d)for(var g="",E=0;E<d.body.length;++E){var P=d.body[E];if(g=P.text,g==="t")l=!0;else if(g==="b")u=!0;else{l=!1,u=!1;break}}else l=!0,u=!0;var Z=e[0];return{type:"smash",mode:a.mode,body:Z,smashHeight:l,smashDepth:u}},htmlBuilder:(t,e)=>{var r=buildCommon.makeSpan([],[buildGroup$1(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var l=0;l<r.children.length;l++)r.children[l].depth=0;var u=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return buildCommon.makeSpan(["mord"],[u],e)},mathmlBuilder:(t,e)=>{var r=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:a}=t,l=r[0],u=e[0];return{type:"sqrt",mode:a.mode,body:u,index:l}},htmlBuilder(t,e){var r=buildGroup$1(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=buildCommon.wrapFragment(r,e);var a=e.fontMetrics(),l=a.defaultRuleThickness,u=l;e.style.id<Style$1.TEXT.id&&(u=e.fontMetrics().xHeight);var d=l+u/4,g=r.height+r.depth+d+l,{span:E,ruleWidth:P,advanceWidth:Z}=delimiter.sqrtImage(g,e),me=E.height-P;me>r.height+r.depth+d&&(d=(d+me-r.height-r.depth)/2);var _e=E.height-r.height-d-P;r.style.paddingLeft=makeEm(Z);var He=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+_e)},{type:"elem",elem:E},{type:"kern",size:P}]},e);if(t.index){var Xe=e.havingStyle(Style$1.SCRIPTSCRIPT),wt=buildGroup$1(t.index,Xe,e),Do=.6*(He.height-He.depth),sr=buildCommon.makeVList({positionType:"shift",positionData:-Do,children:[{type:"elem",elem:wt}]},e),Ko=buildCommon.makeSpan(["root"],[sr]);return buildCommon.makeSpan(["mord","sqrt"],[Ko,He],e)}else return buildCommon.makeSpan(["mord","sqrt"],[He],e)},mathmlBuilder(t,e){var{body:r,index:a}=t;return a?new mathMLTree.MathNode("mroot",[buildGroup(r,e),buildGroup(a,e)]):new mathMLTree.MathNode("msqrt",[buildGroup(r,e)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:a,parser:l}=t,u=l.parseExpression(!0,r),d=a.slice(1,a.length-5);return{type:"styling",mode:l.mode,style:d,body:u}},htmlBuilder(t,e){var r=styleMap[t.style],a=e.havingStyle(r).withFont("");return sizingGroup(t.body,a,e)},mathmlBuilder(t,e){var r=styleMap[t.style],a=e.havingStyle(r),l=buildExpression(t.body,a),u=new mathMLTree.MathNode("mstyle",l),d={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},g=d[t.style];return u.setAttribute("scriptlevel",g[0]),u.setAttribute("displaystyle",g[1]),u}});var htmlBuilderDelegate=function t(e,r){var a=e.base;if(a)if(a.type==="op"){var l=a.limits&&(r.style.size===Style$1.DISPLAY.size||a.alwaysHandleSupSub);return l?htmlBuilder$2:null}else if(a.type==="operatorname"){var u=a.alwaysHandleSupSub&&(r.style.size===Style$1.DISPLAY.size||a.limits);return u?htmlBuilder$1:null}else{if(a.type==="accent")return utils.isCharacterBox(a.base)?htmlBuilder$a:null;if(a.type==="horizBrace"){var d=!e.sub;return d===a.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(t,e){var r=htmlBuilderDelegate(t,e);if(r)return r(t,e);var{base:a,sup:l,sub:u}=t,d=buildGroup$1(a,e),g,E,P=e.fontMetrics(),Z=0,me=0,_e=a&&utils.isCharacterBox(a);if(l){var He=e.havingStyle(e.style.sup());g=buildGroup$1(l,He,e),_e||(Z=d.height-He.fontMetrics().supDrop*He.sizeMultiplier/e.sizeMultiplier)}if(u){var Xe=e.havingStyle(e.style.sub());E=buildGroup$1(u,Xe,e),_e||(me=d.depth+Xe.fontMetrics().subDrop*Xe.sizeMultiplier/e.sizeMultiplier)}var wt;e.style===Style$1.DISPLAY?wt=P.sup1:e.style.cramped?wt=P.sup3:wt=P.sup2;var Do=e.sizeMultiplier,sr=makeEm(.5/P.ptPerEm/Do),Ko=null;if(E){var Bs=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(d instanceof SymbolNode||Bs)&&(Ko=makeEm(-d.italic))}var th;if(g&&E){Z=Math.max(Z,wt,g.depth+.25*P.xHeight),me=Math.max(me,P.sub2);var pf=P.defaultRuleThickness,_h=4*pf;if(Z-g.depth-(E.height-me)<_h){me=_h-(Z-g.depth)+E.height;var cf=.8*P.xHeight-(Z-g.depth);cf>0&&(Z+=cf,me-=cf)}var df=[{type:"elem",elem:E,shift:me,marginRight:sr,marginLeft:Ko},{type:"elem",elem:g,shift:-Z,marginRight:sr}];th=buildCommon.makeVList({positionType:"individualShift",children:df},e)}else if(E){me=Math.max(me,P.sub1,E.height-.8*P.xHeight);var uf=[{type:"elem",elem:E,marginLeft:Ko,marginRight:sr}];th=buildCommon.makeVList({positionType:"shift",positionData:me,children:uf},e)}else if(g)Z=Math.max(Z,wt,g.depth+.25*P.xHeight),th=buildCommon.makeVList({positionType:"shift",positionData:-Z,children:[{type:"elem",elem:g,marginRight:sr}]},e);else throw new Error("supsub must have either sup or sub.");var li=getTypeOfDomTree(d,"right")||"mord";return buildCommon.makeSpan([li],[d,buildCommon.makeSpan(["msupsub"],[th])],e)},mathmlBuilder(t,e){var r=!1,a,l;t.base&&t.base.type==="horizBrace"&&(l=!!t.sup,l===t.base.isOver&&(r=!0,a=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var u=[buildGroup(t.base,e)];t.sub&&u.push(buildGroup(t.sub,e)),t.sup&&u.push(buildGroup(t.sup,e));var d;if(r)d=a?"mover":"munder";else if(t.sub)if(t.sup){var P=t.base;P&&P.type==="op"&&P.limits&&e.style===Style$1.DISPLAY||P&&P.type==="operatorname"&&P.alwaysHandleSupSub&&(e.style===Style$1.DISPLAY||P.limits)?d="munderover":d="msubsup"}else{var E=t.base;E&&E.type==="op"&&E.limits&&(e.style===Style$1.DISPLAY||E.alwaysHandleSupSub)||E&&E.type==="operatorname"&&E.alwaysHandleSupSub&&(E.limits||e.style===Style$1.DISPLAY)?d="munder":d="msub"}else{var g=t.base;g&&g.type==="op"&&g.limits&&(e.style===Style$1.DISPLAY||g.alwaysHandleSupSub)||g&&g.type==="operatorname"&&g.alwaysHandleSupSub&&(g.limits||e.style===Style$1.DISPLAY)?d="mover":d="msup"}return new mathMLTree.MathNode(d,u)}});defineFunctionBuilders({type:"atom",htmlBuilder(t,e){return buildCommon.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mo",[makeText(t.text,t.mode)]);if(t.family==="bin"){var a=getVariant(t,e);a==="bold-italic"&&r.setAttribute("mathvariant",a)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(t,e){return buildCommon.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mi",[makeText(t.text,t.mode,e)]),a=getVariant(t,e)||"italic";return a!==defaultVariant[r.type]&&r.setAttribute("mathvariant",a),r}});defineFunctionBuilders({type:"textord",htmlBuilder(t,e){return buildCommon.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=makeText(t.text,t.mode,e),a=getVariant(t,e)||"normal",l;return t.mode==="text"?l=new mathMLTree.MathNode("mtext",[r]):/[0-9]/.test(t.text)?l=new mathMLTree.MathNode("mn",[r]):t.text==="\\prime"?l=new mathMLTree.MathNode("mo",[r]):l=new mathMLTree.MathNode("mi",[r]),a!==defaultVariant[l.type]&&l.setAttribute("mathvariant",a),l}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(t,e){if(regularSpace.hasOwnProperty(t.text)){var r=regularSpace[t.text].className||"";if(t.mode==="text"){var a=buildCommon.makeOrd(t,e,"textord");return a.classes.push(r),a}else return buildCommon.makeSpan(["mspace",r],[buildCommon.mathsym(t.text,t.mode,e)],e)}else{if(cssSpace.hasOwnProperty(t.text))return buildCommon.makeSpan(["mspace",cssSpace[t.text]],[],e);throw new ParseError('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(regularSpace.hasOwnProperty(t.text))r=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode("")]);else{if(cssSpace.hasOwnProperty(t.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+t.text+'"')}return r}});var pad=()=>{var t=new mathMLTree.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};defineFunctionBuilders({type:"tag",mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(t.body,e)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(t,e)=>{var r=t.font;if(r){if(textFontFamilies[r])return e.withTextFontFamily(textFontFamilies[r]);if(textFontWeights[r])return e.withTextFontWeight(textFontWeights[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(textFontShapes[r])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:a}=t,l=e[0];return{type:"text",mode:r.mode,body:ordargument(l),font:a}},htmlBuilder(t,e){var r=optionsWithFont(t,e),a=buildExpression$1(t.body,r,!0);return buildCommon.makeSpan(["mord","text"],a,r)},mathmlBuilder(t,e){var r=optionsWithFont(t,e);return buildExpressionRow(t.body,r)}});defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=buildGroup$1(t.body,e),a=buildCommon.makeLineSpan("underline-line",e),l=e.fontMetrics().defaultRuleThickness,u=buildCommon.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:l},{type:"elem",elem:a},{type:"kern",size:3*l},{type:"elem",elem:r}]},e);return buildCommon.makeSpan(["mord","underline"],[u],e)},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);r.setAttribute("stretchy","true");var a=new mathMLTree.MathNode("munder",[buildGroup(t.body,e),r]);return a.setAttribute("accentunder","true"),a}});defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=buildGroup$1(t.body,e),a=e.fontMetrics().axisHeight,l=.5*(r.height-a-(r.depth+a));return buildCommon.makeVList({positionType:"shift",positionData:l,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)],["vcenter"])}});defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=makeVerb(t),a=[],l=e.havingStyle(e.style.text()),u=0;u<r.length;u++){var d=r[u];d==="~"&&(d="\\textasciitilde"),a.push(buildCommon.makeSymbol(d,"Typewriter-Regular",t.mode,l,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(l.sizingClasses(e)),buildCommon.tryCombineChars(a),l)},mathmlBuilder(t,e){var r=new mathMLTree.TextNode(makeVerb(t)),a=new mathMLTree.MathNode("mtext",[r]);return a.setAttribute("mathvariant","monospace"),a}});var makeVerb=t=>t.body.replace(/ /g,t.star?"":""),functions=_functions,spaceRegexString=`[ \r
	]`,controlWordRegexString="\\\\[a-zA-Z@]+",controlSymbolRegexString="\\\\[^\uD800-\uDFFF]",controlWordWhitespaceRegexString="("+controlWordRegexString+")"+spaceRegexString+"*",controlSpaceRegexString=`\\\\(
|[ \r	]+
?)[ \r	]*`,combiningDiacriticalMarkString="[-]",combiningDiacriticalMarksEndRegex=new RegExp(combiningDiacriticalMarkString+"+$"),tokenRegexString="("+spaceRegexString+"+)|"+(controlSpaceRegexString+"|")+"([!-\\[\\]---]"+(combiningDiacriticalMarkString+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(combiningDiacriticalMarkString+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+controlWordWhitespaceRegexString)+("|"+controlSymbolRegexString+")");class Lexer{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(tokenRegexString,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Token("EOF",new SourceLocation(this,r,r));var a=this.tokenRegex.exec(e);if(a===null||a.index!==r)throw new ParseError("Unexpected character: '"+e[r]+"'",new Token(e[r],new SourceLocation(this,r,r+1)));var l=a[6]||a[3]||(a[2]?"\\ ":" ");if(this.catcodes[l]===14){var u=e.indexOf(`
`,this.tokenRegex.lastIndex);return u===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=u+1,this.lex()}return new Token(l,new SourceLocation(this,r,this.tokenRegex.lastIndex))}}class Namespace{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ParseError("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,a){if(a===void 0&&(a=!1),a){for(var l=0;l<this.undefStack.length;l++)delete this.undefStack[l][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var u=this.undefStack[this.undefStack.length-1];u&&!u.hasOwnProperty(e)&&(u[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var macros=_macros;defineMacro("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});defineMacro("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});defineMacro("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});defineMacro("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});defineMacro("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");defineMacro("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(t){var e=t.popToken(),r,a="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")a=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ParseError("\\char` missing argument");a=e.text.charCodeAt(0)}else r=10;if(r){if(a=digitToNumber[e.text],a==null||a>=r)throw new ParseError("Invalid base-"+r+" digit "+e.text);for(var l;(l=digitToNumber[t.future().text])!=null&&l<r;)a*=r,a+=l,t.popToken()}return"\\@char{"+a+"}"});var newcommand=(t,e,r,a)=>{var l=t.consumeArg().tokens;if(l.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var u=l[0].text,d=t.isDefined(u);if(d&&!e)throw new ParseError("\\newcommand{"+u+"} attempting to redefine "+(u+"; use \\renewcommand"));if(!d&&!r)throw new ParseError("\\renewcommand{"+u+"} when command "+u+" does not yet exist; use \\newcommand");var g=0;if(l=t.consumeArg().tokens,l.length===1&&l[0].text==="["){for(var E="",P=t.expandNextToken();P.text!=="]"&&P.text!=="EOF";)E+=P.text,P=t.expandNextToken();if(!E.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+E);g=parseInt(E),l=t.consumeArg().tokens}return d&&a||t.macros.set(u,{tokens:l,numArgs:g}),""};defineMacro("\\newcommand",t=>newcommand(t,!1,!0,!1));defineMacro("\\renewcommand",t=>newcommand(t,!0,!1,!1));defineMacro("\\providecommand",t=>newcommand(t,!0,!0,!0));defineMacro("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});defineMacro("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});defineMacro("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),functions[r],symbols.math[r],symbols.text[r]),""});defineMacro("\\bgroup","{");defineMacro("\\egroup","}");defineMacro("~","\\nobreakspace");defineMacro("\\lq","`");defineMacro("\\rq","'");defineMacro("\\aa","\\r a");defineMacro("\\AA","\\r A");defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");defineMacro("","\\mathscr{B}");defineMacro("","\\mathscr{E}");defineMacro("","\\mathscr{F}");defineMacro("","\\mathscr{H}");defineMacro("","\\mathscr{I}");defineMacro("","\\mathscr{L}");defineMacro("","\\mathscr{M}");defineMacro("","\\mathscr{R}");defineMacro("","\\mathfrak{C}");defineMacro("","\\mathfrak{H}");defineMacro("","\\mathfrak{Z}");defineMacro("\\Bbbk","\\Bbb{k}");defineMacro("","\\cdotp");defineMacro("\\llap","\\mathllap{\\textrm{#1}}");defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}");defineMacro("\\clap","\\mathclap{\\textrm{#1}}");defineMacro("\\mathstrut","\\vphantom{(}");defineMacro("\\underbar","\\underline{\\text{#1}}");defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");defineMacro("\\ne","\\neq");defineMacro("","\\neq");defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");defineMacro("","\\notin");defineMacro("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");defineMacro("","\\perp");defineMacro("","\\mathclose{!\\mkern-0.8mu!}");defineMacro("","\\notni");defineMacro("","\\ulcorner");defineMacro("","\\urcorner");defineMacro("","\\llcorner");defineMacro("","\\lrcorner");defineMacro("","\\copyright");defineMacro("","\\textregistered");defineMacro("","\\textregistered");defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');defineMacro("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");defineMacro("","\\vdots");defineMacro("\\varGamma","\\mathit{\\Gamma}");defineMacro("\\varDelta","\\mathit{\\Delta}");defineMacro("\\varTheta","\\mathit{\\Theta}");defineMacro("\\varLambda","\\mathit{\\Lambda}");defineMacro("\\varXi","\\mathit{\\Xi}");defineMacro("\\varPi","\\mathit{\\Pi}");defineMacro("\\varSigma","\\mathit{\\Sigma}");defineMacro("\\varUpsilon","\\mathit{\\Upsilon}");defineMacro("\\varPhi","\\mathit{\\Phi}");defineMacro("\\varPsi","\\mathit{\\Psi}");defineMacro("\\varOmega","\\mathit{\\Omega}");defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}");defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}");defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;");defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");defineMacro("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");defineMacro("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in dotsByToken?e=dotsByToken[r]:(r.slice(0,4)==="\\not"||r in symbols.math&&utils.contains(["bin","rel"],symbols.math[r].group))&&(e="\\dotsb"),e});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(t){var e=t.future().text;return e in spaceAfterDots?"\\ldots\\,":"\\ldots"});defineMacro("\\dotsc",function(t){var e=t.future().text;return e in spaceAfterDots&&e!==","?"\\ldots\\,":"\\ldots"});defineMacro("\\cdots",function(t){var e=t.future().text;return e in spaceAfterDots?"\\@cdots\\,":"\\@cdots"});defineMacro("\\dotsb","\\cdots");defineMacro("\\dotsm","\\cdots");defineMacro("\\dotsi","\\!\\cdots");defineMacro("\\dotsx","\\ldots\\,");defineMacro("\\DOTSI","\\relax");defineMacro("\\DOTSB","\\relax");defineMacro("\\DOTSX","\\relax");defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");defineMacro("\\,","\\tmspace+{3mu}{.1667em}");defineMacro("\\thinspace","\\,");defineMacro("\\>","\\mskip{4mu}");defineMacro("\\:","\\tmspace+{4mu}{.2222em}");defineMacro("\\medspace","\\:");defineMacro("\\;","\\tmspace+{5mu}{.2777em}");defineMacro("\\thickspace","\\;");defineMacro("\\!","\\tmspace-{3mu}{.1667em}");defineMacro("\\negthinspace","\\!");defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}");defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}");defineMacro("\\enspace","\\kern.5em ");defineMacro("\\enskip","\\hskip.5em\\relax");defineMacro("\\quad","\\hskip1em\\relax");defineMacro("\\qquad","\\hskip2em\\relax");defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren");defineMacro("\\tag@paren","\\tag@literal{({#1})}");defineMacro("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");defineMacro("\\newline","\\\\\\relax");defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace");defineMacro("\\@hspace","\\hskip #1\\relax");defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");defineMacro("\\ordinarycolon",":");defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');defineMacro("","\\dblcolon");defineMacro("","\\eqcolon");defineMacro("","\\coloneqq");defineMacro("","\\eqqcolon");defineMacro("","\\Coloneqq");defineMacro("\\ratio","\\vcentcolon");defineMacro("\\coloncolon","\\dblcolon");defineMacro("\\colonequals","\\coloneqq");defineMacro("\\coloncolonequals","\\Coloneqq");defineMacro("\\equalscolon","\\eqqcolon");defineMacro("\\equalscoloncolon","\\Eqqcolon");defineMacro("\\colonminus","\\coloneq");defineMacro("\\coloncolonminus","\\Coloneq");defineMacro("\\minuscolon","\\eqcolon");defineMacro("\\minuscoloncolon","\\Eqcolon");defineMacro("\\coloncolonapprox","\\Colonapprox");defineMacro("\\coloncolonsim","\\Colonsim");defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{}");defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{}");defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{}");defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{}");defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");defineMacro("\\imath","\\html@mathml{\\@imath}{}");defineMacro("\\jmath","\\html@mathml{\\@jmath}{}");defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");defineMacro("","\\llbracket");defineMacro("","\\rrbracket");defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");defineMacro("","\\lBrace");defineMacro("","\\rBrace");defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");defineMacro("","\\minuso");defineMacro("\\darr","\\downarrow");defineMacro("\\dArr","\\Downarrow");defineMacro("\\Darr","\\Downarrow");defineMacro("\\lang","\\langle");defineMacro("\\rang","\\rangle");defineMacro("\\uarr","\\uparrow");defineMacro("\\uArr","\\Uparrow");defineMacro("\\Uarr","\\Uparrow");defineMacro("\\N","\\mathbb{N}");defineMacro("\\R","\\mathbb{R}");defineMacro("\\Z","\\mathbb{Z}");defineMacro("\\alef","\\aleph");defineMacro("\\alefsym","\\aleph");defineMacro("\\Alpha","\\mathrm{A}");defineMacro("\\Beta","\\mathrm{B}");defineMacro("\\bull","\\bullet");defineMacro("\\Chi","\\mathrm{X}");defineMacro("\\clubs","\\clubsuit");defineMacro("\\cnums","\\mathbb{C}");defineMacro("\\Complex","\\mathbb{C}");defineMacro("\\Dagger","\\ddagger");defineMacro("\\diamonds","\\diamondsuit");defineMacro("\\empty","\\emptyset");defineMacro("\\Epsilon","\\mathrm{E}");defineMacro("\\Eta","\\mathrm{H}");defineMacro("\\exist","\\exists");defineMacro("\\harr","\\leftrightarrow");defineMacro("\\hArr","\\Leftrightarrow");defineMacro("\\Harr","\\Leftrightarrow");defineMacro("\\hearts","\\heartsuit");defineMacro("\\image","\\Im");defineMacro("\\infin","\\infty");defineMacro("\\Iota","\\mathrm{I}");defineMacro("\\isin","\\in");defineMacro("\\Kappa","\\mathrm{K}");defineMacro("\\larr","\\leftarrow");defineMacro("\\lArr","\\Leftarrow");defineMacro("\\Larr","\\Leftarrow");defineMacro("\\lrarr","\\leftrightarrow");defineMacro("\\lrArr","\\Leftrightarrow");defineMacro("\\Lrarr","\\Leftrightarrow");defineMacro("\\Mu","\\mathrm{M}");defineMacro("\\natnums","\\mathbb{N}");defineMacro("\\Nu","\\mathrm{N}");defineMacro("\\Omicron","\\mathrm{O}");defineMacro("\\plusmn","\\pm");defineMacro("\\rarr","\\rightarrow");defineMacro("\\rArr","\\Rightarrow");defineMacro("\\Rarr","\\Rightarrow");defineMacro("\\real","\\Re");defineMacro("\\reals","\\mathbb{R}");defineMacro("\\Reals","\\mathbb{R}");defineMacro("\\Rho","\\mathrm{P}");defineMacro("\\sdot","\\cdot");defineMacro("\\sect","\\S");defineMacro("\\spades","\\spadesuit");defineMacro("\\sub","\\subset");defineMacro("\\sube","\\subseteq");defineMacro("\\supe","\\supseteq");defineMacro("\\Tau","\\mathrm{T}");defineMacro("\\thetasym","\\vartheta");defineMacro("\\weierp","\\wp");defineMacro("\\Zeta","\\mathrm{Z}");defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");defineMacro("\\bra","\\mathinner{\\langle{#1}|}");defineMacro("\\ket","\\mathinner{|{#1}\\rangle}");defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}");defineMacro("\\Bra","\\left\\langle#1\\right|");defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=t=>e=>{var r=e.consumeArg().tokens,a=e.consumeArg().tokens,l=e.consumeArg().tokens,u=e.consumeArg().tokens,d=e.macros.get("|"),g=e.macros.get("\\|");e.macros.beginGroup();var E=me=>_e=>{t&&(_e.macros.set("|",d),l.length&&_e.macros.set("\\|",g));var He=me;if(!me&&l.length){var Xe=_e.future();Xe.text==="|"&&(_e.popToken(),He=!0)}return{tokens:He?l:a,numArgs:0}};e.macros.set("|",E(!1)),l.length&&e.macros.set("\\|",E(!0));var P=e.consumeArg().tokens,Z=e.expandTokens([...u,...P,...r]);return e.macros.endGroup(),{tokens:Z.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1));defineMacro("\\bra@set",braketHelper(!0));defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");defineMacro("\\angln","{\\angl n}");defineMacro("\\blue","\\textcolor{##6495ed}{#1}");defineMacro("\\orange","\\textcolor{##ffa500}{#1}");defineMacro("\\pink","\\textcolor{##ff00af}{#1}");defineMacro("\\red","\\textcolor{##df0030}{#1}");defineMacro("\\green","\\textcolor{##28ae7b}{#1}");defineMacro("\\gray","\\textcolor{gray}{#1}");defineMacro("\\purple","\\textcolor{##9d38bd}{#1}");defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}");defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}");defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}");defineMacro("\\blueD","\\textcolor{##11accd}{#1}");defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}");defineMacro("\\tealA","\\textcolor{##94fff5}{#1}");defineMacro("\\tealB","\\textcolor{##26edd5}{#1}");defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}");defineMacro("\\tealD","\\textcolor{##01a995}{#1}");defineMacro("\\tealE","\\textcolor{##208170}{#1}");defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}");defineMacro("\\greenB","\\textcolor{##8af281}{#1}");defineMacro("\\greenC","\\textcolor{##74cf70}{#1}");defineMacro("\\greenD","\\textcolor{##1fab54}{#1}");defineMacro("\\greenE","\\textcolor{##0d923f}{#1}");defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}");defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}");defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}");defineMacro("\\goldD","\\textcolor{##e07d10}{#1}");defineMacro("\\goldE","\\textcolor{##a75a05}{#1}");defineMacro("\\redA","\\textcolor{##fca9a9}{#1}");defineMacro("\\redB","\\textcolor{##ff8482}{#1}");defineMacro("\\redC","\\textcolor{##f9685d}{#1}");defineMacro("\\redD","\\textcolor{##e84d39}{#1}");defineMacro("\\redE","\\textcolor{##bc2612}{#1}");defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}");defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}");defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}");defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}");defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}");defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}");defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}");defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}");defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}");defineMacro("\\purpleE","\\textcolor{##543b78}{#1}");defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}");defineMacro("\\mintB","\\textcolor{##edf2df}{#1}");defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}");defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}");defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}");defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}");defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}");defineMacro("\\grayE","\\textcolor{##babec2}{#1}");defineMacro("\\grayF","\\textcolor{##888d93}{#1}");defineMacro("\\grayG","\\textcolor{##626569}{#1}");defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}");defineMacro("\\grayI","\\textcolor{##21242c}{#1}");defineMacro("\\kaBlue","\\textcolor{##314453}{#1}");defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");var implicitCommands={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class MacroExpander{constructor(e,r,a){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Namespace(macros,r.macros),this.mode=a,this.stack=[]}feed(e){this.lexer=new Lexer(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,a,l;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:l,end:a}=this.consumeArg(["]"])}else({tokens:l,start:r,end:a}=this.consumeArg());return this.pushToken(new Token("EOF",a.loc)),this.pushTokens(l),r.range(a,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],a=e&&e.length>0;a||this.consumeSpaces();var l=this.future(),u,d=0,g=0;do{if(u=this.popToken(),r.push(u),u.text==="{")++d;else if(u.text==="}"){if(--d,d===-1)throw new ParseError("Extra }",u)}else if(u.text==="EOF")throw new ParseError("Unexpected end of input in a macro argument, expected '"+(e&&a?e[g]:"}")+"'",u);if(e&&a)if((d===0||d===1&&e[g]==="{")&&u.text===e[g]){if(++g,g===e.length){r.splice(-g,g);break}}else g=0}while(d!==0||a);return l.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:l,end:u}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new ParseError("The length of delimiters doesn't match the number of args!");for(var a=r[0],l=0;l<a.length;l++){var u=this.popToken();if(a[l]!==u.text)throw new ParseError("Use of the macro doesn't match its definition",u)}}for(var d=[],g=0;g<e;g++)d.push(this.consumeArg(r&&r[g+1]).tokens);return d}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ParseError("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),a=r.text,l=r.noexpand?null:this._getExpansion(a);if(l==null||e&&l.unexpandable){if(e&&l==null&&a[0]==="\\"&&!this.isDefined(a))throw new ParseError("Undefined control sequence: "+a);return this.pushToken(r),!1}this.countExpansion(1);var u=l.tokens,d=this.consumeArgs(l.numArgs,l.delimiters);if(l.numArgs){u=u.slice();for(var g=u.length-1;g>=0;--g){var E=u[g];if(E.text==="#"){if(g===0)throw new ParseError("Incomplete placeholder at end of macro body",E);if(E=u[--g],E.text==="#")u.splice(g+1,1);else if(/^[1-9]$/.test(E.text))u.splice(g,2,...d[+E.text-1]);else throw new ParseError("Not a valid argument number",E)}}}return this.pushTokens(u),u.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Token(e)]):void 0}expandTokens(e){var r=[],a=this.stack.length;for(this.pushTokens(e);this.stack.length>a;)if(this.expandOnce(!0)===!1){var l=this.stack.pop();l.treatAsRelax&&(l.noexpand=!1,l.treatAsRelax=!1),r.push(l)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(a=>a.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var a=this.lexer.catcodes[e];if(a!=null&&a!==13)return}var l=typeof r=="function"?r(this):r;if(typeof l=="string"){var u=0;if(l.indexOf("#")!==-1)for(var d=l.replace(/##/g,"");d.indexOf("#"+(u+1))!==-1;)++u;for(var g=new Lexer(l,this.settings),E=[],P=g.lex();P.text!=="EOF";)E.push(P),P=g.lex();E.reverse();var Z={tokens:E,numArgs:u};return Z}return l}isDefined(e){return this.macros.has(e)||functions.hasOwnProperty(e)||symbols.math.hasOwnProperty(e)||symbols.text.hasOwnProperty(e)||implicitCommands.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:functions.hasOwnProperty(e)&&!functions[e].primitive}}var unicodeSubRegEx=/^[]/,uSubsAndSups=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),unicodeAccents={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},unicodeSymbols={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Parser{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new MacroExpander(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new ParseError("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Token("}")),this.gullet.pushTokens(e);var a=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,a}parseExpression(e,r){for(var a=[];;){this.mode==="math"&&this.consumeSpaces();var l=this.fetch();if(Parser.endOfExpression.indexOf(l.text)!==-1||r&&l.text===r||e&&functions[l.text]&&functions[l.text].infix)break;var u=this.parseAtom(r);if(u){if(u.type==="internal")continue}else break;a.push(u)}return this.mode==="text"&&this.formLigatures(a),this.handleInfixNodes(a)}handleInfixNodes(e){for(var r=-1,a,l=0;l<e.length;l++)if(e[l].type==="infix"){if(r!==-1)throw new ParseError("only one infix operator per group",e[l].token);r=l,a=e[l].replaceWith}if(r!==-1&&a){var u,d,g=e.slice(0,r),E=e.slice(r+1);g.length===1&&g[0].type==="ordgroup"?u=g[0]:u={type:"ordgroup",mode:this.mode,body:g},E.length===1&&E[0].type==="ordgroup"?d=E[0]:d={type:"ordgroup",mode:this.mode,body:E};var P;return a==="\\\\abovefrac"?P=this.callFunction(a,[u,e[r],d],[]):P=this.callFunction(a,[u,d],[]),[P]}else return e}handleSupSubscript(e){var r=this.fetch(),a=r.text;this.consume(),this.consumeSpaces();var l;do{var u;l=this.parseGroup(e)}while(((u=l)==null?void 0:u.type)==="internal");if(!l)throw new ParseError("Expected group after '"+a+"'",r);return l}formatUnsupportedCmd(e){for(var r=[],a=0;a<e.length;a++)r.push({type:"textord",mode:"text",text:e[a]});var l={type:"text",mode:this.mode,body:r},u={type:"color",mode:this.mode,color:this.settings.errorColor,body:[l]};return u}parseAtom(e){var r=this.parseGroup("atom",e);if(r?.type==="internal"||this.mode==="text")return r;for(var a,l;;){this.consumeSpaces();var u=this.fetch();if(u.text==="\\limits"||u.text==="\\nolimits"){if(r&&r.type==="op"){var d=u.text==="\\limits";r.limits=d,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=u.text==="\\limits");else throw new ParseError("Limit controls must follow a math operator",u);this.consume()}else if(u.text==="^"){if(a)throw new ParseError("Double superscript",u);a=this.handleSupSubscript("superscript")}else if(u.text==="_"){if(l)throw new ParseError("Double subscript",u);l=this.handleSupSubscript("subscript")}else if(u.text==="'"){if(a)throw new ParseError("Double superscript",u);var g={type:"textord",mode:this.mode,text:"\\prime"},E=[g];for(this.consume();this.fetch().text==="'";)E.push(g),this.consume();this.fetch().text==="^"&&E.push(this.handleSupSubscript("superscript")),a={type:"ordgroup",mode:this.mode,body:E}}else if(uSubsAndSups[u.text]){var P=unicodeSubRegEx.test(u.text),Z=[];for(Z.push(new Token(uSubsAndSups[u.text])),this.consume();;){var me=this.fetch().text;if(!uSubsAndSups[me]||unicodeSubRegEx.test(me)!==P)break;Z.unshift(new Token(uSubsAndSups[me])),this.consume()}var _e=this.subparse(Z);P?l={type:"ordgroup",mode:"math",body:_e}:a={type:"ordgroup",mode:"math",body:_e}}else break}return a||l?{type:"supsub",mode:this.mode,base:r,sup:a,sub:l}:r}parseFunction(e,r){var a=this.fetch(),l=a.text,u=functions[l];if(!u)return null;if(this.consume(),r&&r!=="atom"&&!u.allowedInArgument)throw new ParseError("Got function '"+l+"' with no arguments"+(r?" as "+r:""),a);if(this.mode==="text"&&!u.allowedInText)throw new ParseError("Can't use function '"+l+"' in text mode",a);if(this.mode==="math"&&u.allowedInMath===!1)throw new ParseError("Can't use function '"+l+"' in math mode",a);var{args:d,optArgs:g}=this.parseArguments(l,u);return this.callFunction(l,d,g,a,e)}callFunction(e,r,a,l,u){var d={funcName:e,parser:this,token:l,breakOnTokenText:u},g=functions[e];if(g&&g.handler)return g.handler(d,r,a);throw new ParseError("No function handler for "+e)}parseArguments(e,r){var a=r.numArgs+r.numOptionalArgs;if(a===0)return{args:[],optArgs:[]};for(var l=[],u=[],d=0;d<a;d++){var g=r.argTypes&&r.argTypes[d],E=d<r.numOptionalArgs;(r.primitive&&g==null||r.type==="sqrt"&&d===1&&u[0]==null)&&(g="primitive");var P=this.parseGroupOfType("argument to '"+e+"'",g,E);if(E)u.push(P);else if(P!=null)l.push(P);else throw new ParseError("Null argument, please report this as a bug")}return{args:l,optArgs:u}}parseGroupOfType(e,r,a){switch(r){case"color":return this.parseColorGroup(a);case"size":return this.parseSizeGroup(a);case"url":return this.parseUrlGroup(a);case"math":case"text":return this.parseArgumentGroup(a,r);case"hbox":{var l=this.parseArgumentGroup(a,"text");return l!=null?{type:"styling",mode:l.mode,body:[l],style:"text"}:null}case"raw":{var u=this.parseStringGroup("raw",a);return u!=null?{type:"raw",mode:"text",string:u.text}:null}case"primitive":{if(a)throw new ParseError("A primitive argument cannot be optional");var d=this.parseGroup(e);if(d==null)throw new ParseError("Expected group as "+e,this.fetch());return d}case"original":case null:case void 0:return this.parseArgumentGroup(a);default:throw new ParseError("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var a=this.gullet.scanArgument(r);if(a==null)return null;for(var l="",u;(u=this.fetch()).text!=="EOF";)l+=u.text,this.consume();return this.consume(),a.text=l,a}parseRegexGroup(e,r){for(var a=this.fetch(),l=a,u="",d;(d=this.fetch()).text!=="EOF"&&e.test(u+d.text);)l=d,u+=l.text,this.consume();if(u==="")throw new ParseError("Invalid "+r+": '"+a.text+"'",a);return a.range(l,u)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var a=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!a)throw new ParseError("Invalid color: '"+r.text+"'",r);var l=a[0];return/^[0-9a-f]{6}$/i.test(l)&&(l="#"+l),{type:"color-token",mode:this.mode,color:l}}parseSizeGroup(e){var r,a=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",a=!0);var l=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!l)throw new ParseError("Invalid size: '"+r.text+"'",r);var u={number:+(l[1]+l[2]),unit:l[3]};if(!validUnit(u))throw new ParseError("Invalid unit: '"+u.unit+"'",r);return{type:"size",mode:this.mode,value:u,isBlank:a}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var a=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:a}}parseArgumentGroup(e,r){var a=this.gullet.scanArgument(e);if(a==null)return null;var l=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var u=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var d={type:"ordgroup",mode:this.mode,loc:a.loc,body:u};return r&&this.switchMode(l),d}parseGroup(e,r){var a=this.fetch(),l=a.text,u;if(l==="{"||l==="\\begingroup"){this.consume();var d=l==="{"?"}":"\\endgroup";this.gullet.beginGroup();var g=this.parseExpression(!1,d),E=this.fetch();this.expect(d),this.gullet.endGroup(),u={type:"ordgroup",mode:this.mode,loc:SourceLocation.range(a,E),body:g,semisimple:l==="\\begingroup"||void 0}}else if(u=this.parseFunction(r,e)||this.parseSymbol(),u==null&&l[0]==="\\"&&!implicitCommands.hasOwnProperty(l)){if(this.settings.throwOnError)throw new ParseError("Undefined control sequence: "+l,a);u=this.formatUnsupportedCmd(l),this.consume()}return u}formLigatures(e){for(var r=e.length-1,a=0;a<r;++a){var l=e[a],u=l.text;u==="-"&&e[a+1].text==="-"&&(a+1<r&&e[a+2].text==="-"?(e.splice(a,3,{type:"textord",mode:"text",loc:SourceLocation.range(l,e[a+2]),text:"---"}),r-=2):(e.splice(a,2,{type:"textord",mode:"text",loc:SourceLocation.range(l,e[a+1]),text:"--"}),r-=1)),(u==="'"||u==="`")&&e[a+1].text===u&&(e.splice(a,2,{type:"textord",mode:"text",loc:SourceLocation.range(l,e[a+1]),text:u+u}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var a=r.slice(5),l=a.charAt(0)==="*";if(l&&(a=a.slice(1)),a.length<2||a.charAt(0)!==a.slice(-1))throw new ParseError(`\\verb assertion failed --
                    please report what input caused this bug`);return a=a.slice(1,-1),{type:"verb",mode:"text",body:a,star:l}}unicodeSymbols.hasOwnProperty(r[0])&&!symbols[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=unicodeSymbols[r[0]]+r.slice(1));var u=combiningDiacriticalMarksEndRegex.exec(r);u&&(r=r.substring(0,u.index),r==="i"?r="":r==="j"&&(r=""));var d;if(symbols[this.mode][r]){this.settings.strict&&this.mode==="math"&&extraLatin.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var g=symbols[this.mode][r].group,E=SourceLocation.range(e),P;if(ATOMS.hasOwnProperty(g)){var Z=g;P={type:"atom",mode:this.mode,family:Z,loc:E,text:r}}else P={type:g,mode:this.mode,loc:E,text:r};d=P}else if(r.charCodeAt(0)>=128)this.settings.strict&&(supportedCodepoint(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),d={type:"textord",mode:"text",loc:SourceLocation.range(e),text:r};else return null;if(this.consume(),u)for(var me=0;me<u[0].length;me++){var _e=u[0][me];if(!unicodeAccents[_e])throw new ParseError("Unknown accent ' "+_e+"'",e);var He=unicodeAccents[_e][this.mode]||unicodeAccents[_e].text;if(!He)throw new ParseError("Accent "+_e+" unsupported in "+this.mode+" mode",e);d={type:"accent",mode:this.mode,loc:SourceLocation.range(e),label:He,isStretchy:!1,isShifty:!0,base:d}}return d}}Parser.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var parseTree=function t(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var a=new Parser(e,r);delete a.gullet.macros.current["\\df@tag"];var l=a.parse();if(delete a.gullet.macros.current["\\current@color"],delete a.gullet.macros.current["\\color"],a.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new ParseError("\\tag works only in display equations");l=[{type:"tag",mode:"text",body:l,tag:a.subparse([new Token("\\df@tag")])}]}return l},render$1=function t(e,r,a){r.textContent="";var l=renderToDomTree(e,a).toNode();r.appendChild(l)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),render$1=function(){throw new ParseError("KaTeX doesn't work in quirks mode.")});var renderToString=function t(e,r){var a=renderToDomTree(e,r).toMarkup();return a},generateParseTree=function t(e,r){var a=new Settings$1(r);return parseTree(e,a)},renderError=function t(e,r,a){if(a.throwOnError||!(e instanceof ParseError))throw e;var l=buildCommon.makeSpan(["katex-error"],[new SymbolNode(r)]);return l.setAttribute("title",e.toString()),l.setAttribute("style","color:"+a.errorColor),l},renderToDomTree=function t(e,r){var a=new Settings$1(r);try{var l=parseTree(e,a);return buildTree(l,e,a)}catch(u){return renderError(u,e,a)}},renderToHTMLTree=function t(e,r){var a=new Settings$1(r);try{var l=parseTree(e,a);return buildHTMLTree(l,e,a)}catch(u){return renderError(u,e,a)}},version="0.16.22",__domTree={Span,Anchor,SymbolNode,SvgNode,PathNode,LineNode},katex={version,render:render$1,renderToString,ParseError,SETTINGS_SCHEMA,__parse:generateParseTree,__renderToDomTree:renderToDomTree,__renderToHTMLTree:renderToHTMLTree,__setFontMetrics:setFontMetrics,__defineSymbol:defineSymbol,__defineFunction:defineFunction,__defineMacro:defineMacro,__domTree};const ESCAPED_DOLLAR="__ESCAPED_DOLLAR__";function escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function tokenizeSingleDollar(t){const e=t.replace(/\\\$/g,ESCAPED_DOLLAR),r=[],a=/\$([\s\S]+?)\$/g;let l=0,u;for(;(u=a.exec(e))!==null;)u.index>l&&r.push({type:"text",content:e.slice(l,u.index)}),r.push({type:"math",content:u[1]}),l=a.lastIndex;return l<e.length&&r.push({type:"text",content:e.slice(l)}),r.map(d=>({...d,content:d.content.replace(new RegExp(ESCAPED_DOLLAR,"g"),"$")}))}function RenderMath({text:t,className:e,katexOptions:r}){const a=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!a.current)return;const l={throwOnError:!1,displayMode:!1,...r},d=tokenizeSingleDollar(t).map(g=>{if(g.type==="text")return escapeHtml(g.content);try{return katex.renderToString(g.content,l)}catch{return`<code class="katex-error">${escapeHtml(g.content)}</code>`}});a.current.innerHTML=d.join("")},[t,r]),jsxRuntimeExports.jsx("div",{ref:a,className:e})}var kh=Object.defineProperty,Sh=Object.defineProperties,Lh=Object.getOwnPropertyDescriptors,Oo=Object.getOwnPropertySymbols,Uc=Object.prototype.hasOwnProperty,jc=Object.prototype.propertyIsEnumerable,Wc=(t,e,r)=>e in t?kh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p=(t,e)=>{for(var r in e||(e={}))Uc.call(e,r)&&Wc(t,r,e[r]);if(Oo)for(var r of Oo(e))jc.call(e,r)&&Wc(t,r,e[r]);return t},f=(t,e)=>Sh(t,Lh(e)),Ps=t=>typeof t=="symbol"?t:t+"",ki=(t,e)=>{var r={};for(var a in t)Uc.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&Oo)for(var a of Oo(t))e.indexOf(a)<0&&jc.call(t,a)&&(r[a]=t[a]);return r};function Y(t){return Array.isArray(t)}var Jc={en:{"keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.alphabetic":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.menu":"Menu","tooltip.undo":"Undo","menu.borders":"Borders","menu.insert matrix":"Insert Matrix","menu.array.add row above":"Add Row Before","menu.array.add row below":"Add Row After","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","menu.insert":"Insert","menu.insert.abs":"Absolute Value","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"n<sup>th</sup> Root","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarithm base a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Calculus","menu.insert.derivative":"Derivative","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"n<sup>th</sup> derivative","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Integral","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Sum","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Product","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Complex Numbers","menu.insert.modulus":"Modulus","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Real Part","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Imaginary Part","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Conjugate","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Blackboard","tooltip.bold":"Bold","tooltip.italic":"Italic","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligraphic","tooltip.typewriter":"Typewriter","tooltip.roman-upright":"Roman Upright","tooltip.row-by-col":"%@  %@","menu.font-style":"Font Style","menu.accent":"Accent","menu.decoration":"Decoration","menu.color":"Color","menu.background-color":"Background","menu.evaluate":"Evaluate","menu.simplify":"Simplify","menu.solve":"Solve","menu.solve-for":"Solve for %@","menu.cut":"Cut","menu.copy":"Copy","menu.copy-as-latex":"Copy as LaTeX","menu.copy-as-typst":"Copy as Typst","menu.copy-as-ascii-math":"Copy as ASCII Math","menu.copy-as-mathml":"Copy as MathML","menu.paste":"Paste","menu.select-all":"Select All","color.red":"Red","color.orange":"Orange","color.yellow":"Yellow","color.lime":"Lime","color.green":"Green","color.teal":"Teal","color.cyan":"Cyan","color.blue":"Blue","color.indigo":"Indigo","color.purple":"Purple","color.magenta":"Magenta","color.black":"Black","color.dark-grey":"Dark Grey","color.grey":"Grey","color.light-grey":"Light Grey","color.white":"White"},ar:{"keyboard.tooltip.symbols":"  ","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"  ","tooltip.copy to clipboard":"  ","tooltip.cut to clipboard":"  ","tooltip.paste from clipboard":"  ","tooltip.redo":"","tooltip.toggle virtual keyboard":"   ","tooltip.undo":"","menu.insert matrix":" ","menu.borders":" ","menu.array.add row above":"   ","menu.array.add row below":"  ","menu.array.add column after":"   ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":" ","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":"  LaTeX","menu.copy-as-ascii-math":"  ASCII Math","menu.copy-as-mathml":"  MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":" ","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},de:{"keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.alphabetic":"Rmische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einfgen","menu.borders":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzufgen nach","menu.array.add row below":"Zeile hinzufgen vor","menu.array.add column after":"Spalte hinzufgen nach","menu.array.add column before":"Spalte hinzufgen vor","menu.array.delete row":"Zeile lschen","menu.array.delete rows":"Ausgewhlte Zeilen lschen","menu.array.delete column":"Spalte lschen","menu.array.delete columns":"Ausgewhlte Spalten lschen","menu.mode":"Modus","menu.mode-math":"Mathematik","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tafel","tooltip.bold":"Fett","tooltip.italic":"Kursiv","tooltip.fraktur":"Fraktur","tooltip.script":"Skript","tooltip.caligraphic":"Kalligraphie","tooltip.typewriter":"Schreibmaschine","tooltip.roman-upright":"Rmisch aufrecht","tooltip.row-by-col":"%@  %@","menu.font-style":"Schriftstil","menu.accent":"Akzent","menu.decoration":"Dekoration","menu.color":"Farbe","menu.background-color":"Hintergrund","menu.evaluate":"Auswerten","menu.simplify":"Vereinfachen","menu.solve":"Lsen","menu.solve-for":"Lsen fr %@","menu.cut":"Ausschneiden","menu.copy":"Kopieren","menu.copy-as-latex":"Als LaTeX kopieren","menu.copy-as-ascii-math":"Als ASCII Math kopieren","menu.copy-as-mathml":"Als MathML kopieren","menu.paste":"Einfgen","menu.select-all":"Alles auswhlen","color.red":"Rot","color.orange":"Orange","color.yellow":"Gelb","color.lime":"Limette","color.green":"Grn","color.teal":"Blaugrn","color.cyan":"Cyan","color.blue":"Blau","color.indigo":"Indigo","color.purple":"Lila","color.magenta":"Magenta","color.black":"Schwarz","color.dark-grey":"Dunkelgrau","color.grey":"Grau","color.light-grey":"Hellgrau","color.white":"Wei"},el:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":"  ","tooltip.redo":"","tooltip.toggle virtual keyboard":"  ","tooltip.undo":"","menu.insert matrix":" ","menu.borders":" ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":" ","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":" ","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":"  LaTeX","menu.copy-as-ascii-math":"  ASCII Math","menu.copy-as-mathml":"  MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},es:{"keyboard.tooltip.symbols":"Smbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.numeric":"Numrico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"Aadir Matriz","menu.borders":"Delimitadores de Matriz","menu.array.add row above":"Aadir Lnea Antes","menu.array.add row below":"Aadir Lnea Despues","menu.array.add column after":"Aadir Columna Despues","menu.array.add column before":"Aadir Columna Antes","menu.array.delete row":"Borrar Lnea","menu.array.delete rows":"Borrar Lneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","menu.mode":"Modo","menu.mode-math":"Matemticas","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Pizarra","tooltip.bold":"Negrita","tooltip.italic":"Cursiva","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligrfico","tooltip.typewriter":"Mquina de escribir","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@  %@","menu.font-style":"Estilo de fuente","menu.accent":"Acento","menu.decoration":"Decoracin","menu.color":"Color","menu.background-color":"Fondo","menu.evaluate":"Evaluar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Cortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Pegar","menu.select-all":"Seleccionar todo","color.red":"Rojo","color.orange":"Naranja","color.yellow":"Amarillo","color.lime":"Lima","color.green":"Verde","color.teal":"Verde azulado","color.cyan":"Cian","color.blue":"Azul","color.indigo":"ndigo","color.purple":"Morado","color.magenta":"Magenta","color.black":"Negro","color.dark-grey":"Gris oscuro","color.grey":"Gris","color.light-grey":"Gris claro","color.white":"Blanco"},fr:{"keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.numeric":"Numrique","keyboard.tooltip.alphabetic":"Lettres romaines","tooltip.menu":"Menu","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"Rtablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Insrer une Matrice","menu.borders":"Bords","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Aprs","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Aprs","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes Slectiones","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes Slectiones","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tableau noir","tooltip.bold":"Gras","tooltip.italic":"Italique","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligraphique","tooltip.typewriter":"Machine  crire","tooltip.roman-upright":"Romain droit","tooltip.row-by-col":"%@  %@","menu.font-style":"Style de police","menu.accent":"Accent","menu.decoration":"Dcoration","menu.color":"Couleur","menu.background-color":"Arrire-plan","menu.evaluate":"valuer","menu.simplify":"Simplifier","menu.solve":"Rsoudre","menu.solve-for":"Rsoudre pour %@","menu.cut":"Couper","menu.copy":"Copier","menu.copy-as-latex":"Copier en LaTeX","menu.copy-as-ascii-math":"Copier en ASCII Math","menu.copy-as-mathml":"Copier en MathML","menu.paste":"Coller","menu.select-all":"Slectionner tout","color.red":"Rouge","color.orange":"Orange","color.yellow":"Jaune","color.lime":"Citron vert","color.green":"Vert","color.teal":"Turquoise","color.cyan":"Cyan","color.blue":"Bleu","color.indigo":"Indigo","color.purple":"Violet","color.magenta":"Magenta","color.black":"Noir","color.dark-grey":"Gris fonc","color.grey":"Gris","color.light-grey":"Gris clair","color.white":"Blanc"},he:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":" ","tooltip.redo":" ","tooltip.toggle virtual keyboard":"   ","tooltip.undo":"","menu.insert matrix":" ","menu.borders":" ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":" ","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":" ","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":" LaTeX","menu.copy-as-ascii-math":" ASCII Math","menu.copy-as-mathml":" MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":" ","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},it:{"keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere Greche","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.alphabetic":"Lettere Romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.cut to clipboard":"Taglia negli appunti","tooltip.paste from clipboard":"Incolla dagli appunti","tooltip.redo":"Ripeti","tooltip.toggle virtual keyboard":"Attiva/Disattiva Tastiera Virtuale","tooltip.menu":"Menu","tooltip.undo":"Annulla","menu.borders":"Bordi","menu.insert matrix":"Inserisci Matrice","menu.array.add row above":"Aggiungi Riga Prima","menu.array.add row below":"Aggiungi Riga Dopo","menu.array.add column after":"Aggiungi Colonna Dopo","menu.array.add column before":"Aggiungi Colonna Prima","menu.array.delete row":"Elimina Riga","menu.array.delete rows":"Elimina Righe Selezionate","menu.array.delete column":"Elimina Colonna","menu.array.delete columns":"Elimina Colonne Selezionate","menu.mode":"Modalit","menu.mode-math":"Matematica","menu.mode-text":"Testo","menu.mode-latex":"LaTeX","menu.insert":"Inserisci","menu.insert.abs":"Valore Assoluto","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Radice n-esima","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logaritmo in base a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Calcolo","menu.insert.derivative":"Derivata","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Derivata n-esima","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Integrale","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Somma","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Prodotto","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Numeri Complessi","menu.insert.modulus":"Modulo","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argomento","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Parte Reale","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Parte Immaginaria","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Coniugato","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Lavagna","tooltip.bold":"Grassetto","tooltip.italic":"Corsivo","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligrafico","tooltip.typewriter":"Macchina da Scrivere","tooltip.roman-upright":"Romano Dritto","tooltip.row-by-col":"%@  %@","menu.font-style":"Stile del Carattere","menu.accent":"Accento","menu.decoration":"Decorazione","menu.color":"Colore","menu.background-color":"Sfondo","menu.evaluate":"Valuta","menu.simplify":"Semplifica","menu.solve":"Risolvi","menu.solve-for":"Risolvi per %@","menu.cut":"Taglia","menu.copy":"Copia","menu.copy-as-latex":"Copia come LaTeX","menu.copy-as-ascii-math":"Copia come ASCII Math","menu.copy-as-mathml":"Copia come MathML","menu.paste":"Incolla","menu.select-all":"Seleziona Tutto","color.red":"Rosso","color.orange":"Arancione","color.yellow":"Giallo","color.lime":"Lime","color.green":"Verde","color.teal":"Verde Acqua","color.cyan":"Ciano","color.blue":"Blu","color.indigo":"Indaco","color.purple":"Viola","color.magenta":"Magenta","color.black":"Nero","color.dark-grey":"Grigio Scuro","color.grey":"Grigio","color.light-grey":"Grigio Chiaro","color.white":"Bianco"},ja:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":"","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"","tooltip.menu":"","tooltip.copy to clipboard":"","tooltip.redo":"","tooltip.toggle virtual keyboard":"","tooltip.undo":"","menu.insert matrix":"","menu.borders":"","menu.array.add row above":"","menu.array.add row below":"","menu.array.add column after":"","menu.array.add column before":"","menu.array.delete row":"","menu.array.delete rows":"","menu.array.delete column":"","menu.array.delete columns":"","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":"","tooltip.row-by-col":"%@  %@","menu.font-style":"","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"%@ ","menu.cut":"","menu.copy":"","menu.copy-as-latex":"LaTeX","menu.copy-as-ascii-math":"ASCII Math","menu.copy-as-mathml":"MathML","menu.paste":"","menu.select-all":"","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"","color.grey":"","color.light-grey":"","color.white":""},ko:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":"  ","tooltip.redo":" ","tooltip.toggle virtual keyboard":"  ","tooltip.undo":" ","menu.insert matrix":" ","menu.borders":"  ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"%@  ","menu.cut":"","menu.copy":"","menu.copy-as-latex":"LaTeX ","menu.copy-as-ascii-math":"ASCII Math ","menu.copy-as-mathml":"MathML ","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},pl:{"keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.alphabetic":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.cut to clipboard":"Wytnij ze Schowka","tooltip.paste from clipboard":"Wklej ze Schowka","tooltip.redo":"Przywr","tooltip.toggle virtual keyboard":"Przecz klawiatur wirtualn","tooltip.menu":"Menu","tooltip.undo":"Cofnij","menu.borders":"Ograniczniki macierzy","menu.insert matrix":"Wstaw macierz","menu.array.add row above":"Dodaj wiersz przed","menu.array.add row below":"Dodaj wiersz po","menu.array.add column after":"Dodaj kolumn po","menu.array.add column before":"Dodaj kolumn przed","menu.array.delete row":"Usu wiersz","menu.array.delete rows":"Usu wybrane wiersze","menu.array.delete column":"Usu kolumn","menu.array.delete columns":"Usu wybrane kolumny","menu.mode":"Tryb","menu.mode-math":"Formua","menu.mode-text":"Tekst","menu.mode-latex":"LaTeX","menu.insert":"Wstaw","menu.insert.abs":"Warto bezwzgldna","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Pierwiastek n-tego stopnia","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarytm o podstawie a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Rachunek rniczkowy i cakowy","menu.insert.derivative":"Pochodna","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Pochodna n-tego rzdu","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Caka","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Suma","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Iloczyn","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Liczby zespolone","menu.insert.modulus":"Modu","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Cz rzeczywista","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Cz urojona","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Sprzenie","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Tablica","tooltip.bold":"Pogrubienie","tooltip.italic":"Kursywa","tooltip.fraktur":"Fraktura","tooltip.script":"Skrypt","tooltip.caligraphic":"Kaligraficzny","tooltip.typewriter":"Maszynowy","tooltip.roman-upright":"Rzymski prosto","tooltip.row-by-col":"%@  %@","menu.font-style":"Styl czcionki","menu.accent":"Akcent","menu.decoration":"Dekoracja","menu.color":"Kolor","menu.background-color":"To","menu.evaluate":"Oblicz","menu.simplify":"Upro","menu.solve":"Rozwi","menu.solve-for":"Rozwi dla %@","menu.cut":"Wytnij","menu.copy":"Kopiuj","menu.copy-as-latex":"Kopiuj jako LaTeX","menu.copy-as-ascii-math":"Kopiuj jako ASCII Math","menu.copy-as-mathml":"Kopiuj jako MathML","menu.paste":"Wklej","menu.select-all":"Zaznacz wszystko","color.red":"Czerwony","color.orange":"Pomaraczowy","color.yellow":"ty","color.lime":"Limetkowy","color.green":"Zielony","color.teal":"Turkusowy","color.cyan":"Cyjan","color.blue":"Niebieski","color.indigo":"Indygo","color.purple":"Fioletowy","color.magenta":"Magenta","color.black":"Czarny","color.dark-grey":"Ciemnoszary","color.grey":"Szary","color.light-grey":"Jasnoszary","color.white":"Biay"},pt:{"keyboard.tooltip.symbols":"Smbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.numeric":"Numrico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar para rea de transferncia","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.borders":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","menu.mode":"Modo","menu.mode-math":"Frmula","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Quadro Negro","tooltip.bold":"Negrito","tooltip.italic":"Itlico","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligrfico","tooltip.typewriter":"Mquina de Escrever","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@  %@","menu.font-style":"Estilo da Fonte","menu.accent":"Acento","menu.decoration":"Decorao","menu.color":"Cor","menu.background-color":"Cor de Fundo","menu.evaluate":"Avaliar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Recortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Colar","menu.select-all":"Selecionar Tudo","color.red":"Vermelho","color.orange":"Laranja","color.yellow":"Amarelo","color.lime":"Verde Lima","color.green":"Verde","color.teal":"Verde-azulado","color.cyan":"Ciano","color.blue":"Azul","color.indigo":"ndigo","color.purple":"Roxo","color.magenta":"Magenta","color.black":"Preto","color.dark-grey":"Cinza Escuro","color.grey":"Cinza","color.light-grey":"Cinza Claro","color.white":"Branco"},uk:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":"   ","tooltip.cut to clipboard":"   ","tooltip.paste from clipboard":"   ","tooltip.redo":"","tooltip.toggle virtual keyboard":"  ","tooltip.menu":"","tooltip.undo":"","menu.borders":"","menu.insert matrix":" ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","menu.insert":"","menu.insert.abs":" ","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":" n- ","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"   a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"","menu.insert.derivative":"","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":" n- ","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":" ","menu.insert.modulus":"","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":" ","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":" ","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":" ","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":"  LaTeX","menu.copy-as-ascii-math":"  ASCII Math","menu.copy-as-mathml":"  MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"-","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"-","color.grey":"","color.light-grey":"-","color.white":""},"zh-cn":{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":"","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"","tooltip.copy to clipboard":"","tooltip.redo":"","tooltip.toggle virtual keyboard":"","tooltip.undo":"","menu.insert matrix":"","menu.borders":"","menu.array.add row above":"","menu.array.add row below":"","menu.array.add column after":"r","menu.array.add column before":"","menu.array.delete row":"","menu.array.delete rows":"","menu.array.delete column":"","menu.array.delete columns":"","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"Fraktur","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":"","tooltip.row-by-col":"%@  %@","menu.font-style":"","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":" %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":" LaTeX","menu.copy-as-ascii-math":" ASCII Math","menu.copy-as-mathml":" MathML","menu.paste":"","menu.select-all":"","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"","color.grey":"","color.light-grey":"","color.white":""},"zh-tw":{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":"","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"","tooltip.copy to clipboard":"","tooltip.redo":"","tooltip.toggle virtual keyboard":"","tooltip.undo":"","menu.insert matrix":"","menu.borders":"","menu.array.add row above":"","menu.array.add row below":"","menu.array.add column after":"","menu.array.add column before":"","menu.array.delete row":"","menu.array.delete rows":"","menu.array.delete column":"","menu.array.delete columns":"","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"Fraktur","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":"","tooltip.row-by-col":"%@  %@","menu.font-style":"","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":" %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":" LaTeX","menu.copy-as-ascii-math":" ASCII Math","menu.copy-as-mathml":" MathML","menu.paste":"","menu.select-all":"","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"","color.grey":"","color.light-grey":"","color.white":""}};function Me(){return"window"in globalThis&&"document"in globalThis}function Bo(){return"matchMedia"in window?window.matchMedia("(pointer: coarse)").matches:"ontouchstart"in window||navigator.maxTouchPoints>0}function Gc(){try{return window.self!==window.top}catch{return!0}}function Ro(){return typeof navigator.vibrate=="function"}function kt(){var t,e;if(!Me())return"other";let r=(e=(t=navigator.userAgentData)==null?void 0:t.platform)!=null?e:navigator.platform;return/^mac/i.test(r)?navigator.maxTouchPoints===5?"ios":"macos":/^win/i.test(r)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}function Xc(){if(!Me())return!0;if(/firefox/i.test(navigator.userAgent)){let t=navigator.userAgent.match(/firefox\/(\d+)/i);return t?parseInt(t[1])>=78:!1}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let t=navigator.userAgent.match(/edg\/(\d+)/i);return t?parseInt(t[1])>=79:!1}return!0}function zs(){return HTMLElement.prototype.hasOwnProperty("popover")}var N={strings:Jc,_locale:"",_dirty:!1,_subscribers:[],_numberFormatter:void 0,get locale(){return N._locale||(N._locale=Me()?navigator.language.slice(0,5):"en-US"),N._locale},set locale(t){N._locale=t,N._numberFormatter=void 0,N.dirty=!0},get numberFormatter(){if(!N._numberFormatter)try{N._numberFormatter=new Intl.NumberFormat(N.locale)}catch{try{N._numberFormatter=new Intl.NumberFormat(N.locale.slice(0,2))}catch{N._numberFormatter=new Intl.NumberFormat("en-US")}}return N._numberFormatter},merge(t,e){if(typeof t=="string"&&e)N.strings[t]=p(p({},N.strings[t]),e),N.dirty=!0;else for(let r of Object.keys(t))N.merge(r,t[r])},get dirty(){return N._dirty},set dirty(t){N._dirty||N._dirty===t||(N._dirty=!0,setTimeout(()=>{N._dirty=!1,this._subscribers.forEach(e=>e?.())},0))},subscribe(t){return N._subscribers.push(t),N._subscribers.length-1},unsubscribe(t){t<0||t>=N._subscribers.length||(N._subscribers[t]=void 0)},update(t){let e=t.querySelectorAll("[data-l10n-tooltip]");for(let r of e){let a=r.getAttribute("data-l10n-tooltip");if(a){let l=z(a);l&&r.setAttribute("data-tooltip",l)}}e=t.querySelectorAll("[data-l10n-arial-label]");for(let r of e){let a=r.getAttribute("data-l10n-arial-label");if(a){let l=z(a);l&&r.setAttribute("aria-label",l)}}}};function z(t,...e){if(t===void 0)return;let r="",a=N.locale;N.strings[a]&&(r=N.strings[a][t]);let l=a.slice(0,2);if(!r&&N.strings[l]&&(r=N.strings[l][t]),r||(r=N.strings.en[t]),!r)return;let u=/(%@|%([0-9]+)\$@)/g,d=u.exec(r),g=0;for(;d;){if(e[g++]){let E=d[2]?parseInt(d[2],10)-1:g-1,P=e[E];typeof P=="number"&&(P=N.numberFormatter.format(P)),r=r.replace(d[1],P)}d=u.exec(r)}return r=r.replace(/%%/g,"%"),r}var Ah={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},Ch={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},Ut={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",cyan:"#b8e5c9",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},jt={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",cyan:"#13a7ec",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},Zc={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},Eh={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function Hr(t){var e,r,a,l,u,d;let g=t.split("!"),E,P,Z,me=255,_e=255,He=255,Xe=-1,wt=g.length>0&&g[0].startsWith("-");wt&&(g[0]=g[0].slice(1));for(let Do=0;Do<g.length;Do++){E=me,P=_e,Z=He;let sr=(e=g[Do].trim().match(/^([A-Za-z\d-]+)/))==null?void 0:e[1],Ko=sr?.toLowerCase(),Bs=sr&&(d=(u=(l=(a=(r=jt[Ko])!=null?r:jt[Zc[sr]])!=null?a:Ch[sr])!=null?l:Eh[sr])!=null?u:Ah[sr])!=null?d:g[Do].trim(),th=Bs.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(th!=null&&th[1]&&th[2]&&th[3])me=Math.max(0,Math.min(255,Number.parseInt(th[1],16))),_e=Math.max(0,Math.min(255,Number.parseInt(th[2],16))),He=Math.max(0,Math.min(255,Number.parseInt(th[3],16)));else if(th=Bs.match(/^#([\da-f]{3})$/i),th!=null&&th[1]){let pf=Number.parseInt(th[1][0],16),_h=Number.parseInt(th[1][1],16),cf=Number.parseInt(th[1][2],16);me=Math.max(0,Math.min(255,pf*16+pf)),_e=Math.max(0,Math.min(255,_h*16+_h)),He=Math.max(0,Math.min(255,cf*16+cf))}else if(th=Bs.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),th!=null&&th[1]&&th[2]&&th[3])me=Math.max(0,Math.min(255,Number.parseInt(th[1]))),_e=Math.max(0,Math.min(255,Number.parseInt(th[2]))),He=Math.max(0,Math.min(255,Number.parseInt(th[3])));else return;Xe>=0&&(me=(1-Xe)*me+Xe*E,_e=(1-Xe)*_e+Xe*P,He=(1-Xe)*He+Xe*Z,Xe=-1),Do+1<g.length&&(Xe=Math.max(0,Math.min(100,Number.parseInt(g[++Do])))/100)}return Xe>=0&&(me=Xe*me+(1-Xe)*E,_e=Xe*_e+(1-Xe)*P,He=Xe*He+(1-Xe)*Z),wt&&(me=255-me,_e=255-_e,He=255-He),"#"+("00"+Math.round(me).toString(16)).slice(-2)+("00"+Math.round(_e).toString(16)).slice(-2)+("00"+Math.round(He).toString(16)).slice(-2)}function Si(t){var e,r;return t=t.trim(),(r=(e=Ut[t.toLowerCase()])!=null?e:Ut[Zc[t]])!=null?r:Hr(t)}function Th(t){if(!t||t[0]!=="#")return;t=t.slice(1);let e;return t.length<=4?(e={r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)},t.length===4&&(e.a=parseInt(t[3]+t[3],16)/255)):(e={r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)},t.length===8&&(e.a=parseInt(t[6]+t[7],16)/255)),e&&e.a===void 0&&(e.a=1),e}function Is(t,e,r){return r<0&&(r+=6),r>=6&&(r-=6),r<1?(e-t)*r+t:r<3?e:r<4?(e-t)*(4-r)+t:t}function Dh(t){let[e,r,a]=[t.h,t.s,t.l];e=(e+360)%360/60,a=Math.max(0,Math.min(a,1)),r=Math.max(0,Math.min(r,1));let l=a<=.5?a*(r+1):a+r-a*r,u=a*2-l;return{r:Math.round(255*Is(u,l,e+2)),g:Math.round(255*Is(u,l,e)),b:Math.round(255*Is(u,l,e-2))}}function Ns(t){return t<0?0:t>255?255:Math.round(t)}function Kh(t){let{r:e,g:r,b:a}=t,l=((1<<24)+(Ns(e)<<16)+(Ns(r)<<8)+Ns(a)).toString(16).slice(1);return l[0]===l[1]&&l[2]===l[3]&&l[4]===l[5]&&l[6]===l[7]&&(l=l[0]+l[2]+l[4]),"#"+l}function Oh(t){let{r:e,g:r,b:a}=t;e=e/255,r=r/255,a=a/255;let l=Math.min(e,r,a),u=Math.max(e,r,a),d=u-l,g,E;u===l?g=0:e===u?g=(r-a)/d:r===u?g=2+(a-e)/d:a===u&&(g=4+(e-r)/d),g=Math.min(g*60,360),g<0&&(g+=360);let P=(l+u)/2;return u===l?E=0:P<=.5?E=d/(u+l):E=d/(2-u-l),{h:g,s:E,l:P}}function Yc(t){let e=Th(t);if(!e)return t;let{h:r,s:a,l}=Oh(e);return a+=.1,l-=.1,Kh(Dh({h:r,s:a,l}))}var Fs={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10178:"\\perp",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},$s={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},Qc=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120822,len:10,offset:48,variant:"monospace"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"}];function Cn(t,e,r){if(!/[A-Za-z\d]/.test(t)||(r==="up"&&(r=void 0),!e&&!r))return;let a=t.codePointAt(0);if(a===void 0)return t;for(let l of Qc)if((!e||l.variant===e)&&(!r||l.style===r)&&a>=l.offset&&a<l.offset+l.len){let u=l.start+a-l.offset;return String.fromCodePoint($s[u]||u)}}function Bh(t){var e;if((t<119808||t>120831)&&(t<8448||t>8527))return{char:String.fromCodePoint(t)};for(let r in $s)if($s[r]===t){t=(e=r.codePointAt(0))!=null?e:0;break}for(let r of Qc)if(t>=r.start&&t<r.start+r.len)return{char:String.fromCodePoint(t-r.start+r.offset),variant:r.variant,style:r.style};return{char:String.fromCodePoint(t)}}function eu(t){var e;if("{}<>[]$&*#^_%:'".includes(t)||t.length>1)return;let r=(e=t.codePointAt(0))!=null?e:0,a=Fs[r];if(a)return a;let{char:l,variant:u,style:d}=Bh(r);if(!(!u&&!d)){switch(a=l,u){case"double-struck":a=`\\mathbb{${a}}`;break;case"fraktur":a=`\\mathfrak{${a}}`;break;case"script":a=`\\mathscr{${a}}`;break;case"sans-serif":a=`\\mathsf{${a}}`;break;case"monospace":a=`\\mathtt{${a}}`;break;case"calligraphic":a=`\\mathcal{${a}}`;break}switch(d){case"bold":a=`\\mathbf{${a}}`;break;case"italic":a=`\\mathit{${a}}`;break;case"bolditalic":a=`\\mathbfit{${a}}`;break}return a}}function C(t){return t?Array.isArray(t)?t:typeof t=="object"&&"group"in t?t.group:[]:[]}var En={},zo=p({},Fs),Ai={},qs={},Rh={darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",C:"\\mathbb{C}",H:"\\mathbb{H}",N:"\\mathbb{N}",Q:"\\mathbb{Q}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",doublecap:"\\Cap",doublecup:"\\Cup",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",hArr:"\\Leftrightarrow",harr:"\\leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",Larr:"\\Leftarrow",lArr:"\\Leftarrow",lrarr:"\\leftrightarrow",Lrarr:"\\Leftrightarrow",lrArr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",part:"\\partial",plusmn:"\\pm",rarr:"\\rightarrow",Rarr:"\\Rightarrow",rArr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",restriction:"\\upharpoonright",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",varcoppa:"\\coppa",weierp:"\\wp",Zeta:"\\mathrm{Z}"},Ph={varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1,captureSelection:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},zh={bra:{def:"\\mathinner{\\langle{#1}|}",args:1,captureSelection:!1},ket:{def:"\\mathinner{|{#1}\\rangle}",args:1,captureSelection:!1},braket:{def:"\\mathinner{\\langle{#1}\\rangle}",args:1,captureSelection:!1},set:{def:"\\mathinner{\\lbrace #1 \\rbrace}",args:1,captureSelection:!1},Bra:{def:"\\left\\langle #1\\right|",args:1,captureSelection:!1},Ket:{def:"\\left|#1\\right\\rangle",args:1,captureSelection:!1},Braket:{def:"\\left\\langle{#1}\\right\\rangle",args:1,captureSelection:!1},Set:{def:"\\left\\lbrace #1 \\right\\rbrace",args:1,captureSelection:!1}},Ih={strut:{primitive:!0,def:"\\phantom{\\rule[0.3\\baselineskip]{0}{0.7\\baselineskip}}",args:0,captureSelection:!0},iff:{primitive:!0,captureSelection:!0,def:"\\;\\Longleftrightarrow\\;"},nicefrac:"^{#1}\\!\\!/\\!_{#2}",phase:{def:"\\enclose{phasorangle}{#1}",args:1,captureSelection:!1},rd:"\\mathrm{d}",rD:"\\mathrm{D}",odif:"\\mathrm{d}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}",mathstrut:{def:"\\vphantom{(}",primitive:!0},angl:"\\enclose{actuarial}{#1}",angln:"\\enclose{actuarial}{n}",anglr:"\\enclose{actuarial}{r}",anglk:"\\enclose{actuarial}{k}",mathtools:{primitive:!0,package:{ordinarycolon:":",vcentcolon:"\\mathrel{\\mathop\\ordinarycolon}",dblcolon:'{\\mathop{\\char"2237}}',coloneqq:'{\\mathop{\\char"2254}}',Coloneqq:'{\\mathop{\\char"2A74}}',coloneq:'{\\mathop{\\char"2254}}',Coloneq:'{\\mathop{\\char"2A74}}',eqqcolon:'{\\mathop{\\char"2255}}',Eqqcolon:'{\\mathop{\\char"3D\\char"2237}}',eqcolon:'{\\mathop{\\char"2255}}',Eqcolon:'{\\mathop{\\char"3D\\char"2237}}',colonapprox:'{\\mathop{\\char"003A\\char"2248}}',Colonapprox:'{\\mathop{\\char"2237\\char"2248}}',colonsim:'{\\mathop{\\char"3A\\char"223C}}',Colonsim:'{\\mathop{\\char"2237\\char"223C}}',colondash:"\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",Colondash:"\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}"}},ratio:"\\vcentcolon",coloncolon:"\\dblcolon",colonequals:"\\coloneq",coloncolonequals:"\\Coloneq",equalscolon:"\\eqcolon",equalscoloncolon:"\\Eqcolon",colonminus:"\\colondash",coloncolonminus:"\\Colondash",minuscolon:"\\dashcolon",minuscoloncolon:"\\Dashcolon",coloncolonapprox:"\\Colonapprox",coloncolonsim:"\\Colonsim",simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",simcoloncolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcoloncolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",notni:"\\mathrel{\\char`}",limsup:"\\operatorname*{lim\\,sup}",liminf:"\\operatorname*{lim\\,inf}",injlim:"\\operatorname*{inj\\,lim}",projlim:"\\operatorname*{proj\\,lim}",varlimsup:"\\operatorname*{\\overline{lim}}",varliminf:"\\operatorname*{\\underline{lim}}",varinjlim:"\\operatorname*{\\underrightarrow{lim}}",varprojlim:"\\operatorname*{\\underleftarrow{lim}}",argmin:"\\operatorname*{arg\\,min}",argmax:"\\operatorname*{arg\\,max}",plim:"\\mathop{\\operatorname{plim}}\\limits",tripledash:{def:"\\vphantom{-}\\raise{4mu}{\\mkern1.5mu\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2mu}}",expand:!0},"braket.sty":{package:zh},"amsmath.sty":{package:Ph,primitive:!0},"texvc.sty":{package:Rh,primitive:!1}},Li={" ":32,"\\!":33,"\\#":35,"\\$":36,"\\%":37,"\\&":38,"\\_":95,"-":45,"\\textunderscore":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\textbraceleft":123,"\\textbraceright":125,"\\lbrace":123,"\\rbrace":125,"\\lbrack":91,"\\rbrack":93,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"":8211,"":8212,"":8216,"":8217,"":8220,"":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},iu=/[\w!@*()-=+{}\[\]\\';:?/.,~<>`|$%#&^" ]/,Io,Wr;Xc()?(Io=new RegExp("\\p{Letter}","u"),Wr=new RegExp("[0-9\\p{Letter}]","u")):(Io=/[a-zA-Z]/,Wr=/[\da-zA-Z]/);function Vs(t,e,r="mord",a){e!==void 0&&(En[t]={definitionType:"symbol",type:r,variant:a,codepoint:e},zo[e]||(zo[e]=t))}function ye(t,e,r){if(typeof t=="string"){for(let a=0;a<t.length;a++){let l=t.charAt(a);Vs(l,l.codePointAt(0))}return}for(let[a,l,u,d]of t)Vs(a,l,u??e,d??r)}function Hs(t,e){for(let r=t;r<=e;r++)Vs(String.fromCodePoint(r),r)}function nu(t){var e;return(e=qs[t])!=null?e:null}function ou(t,e){var r,a;if(e.length===0||e==="\\"||!e.startsWith("\\"))return[];let l=[];for(let d in Ai)d.startsWith(e)&&!Ai[d].infix&&l.push({match:d,frequency:(r=Ai[d].frequency)!=null?r:0});for(let d in En)d.startsWith(e)&&l.push({match:d,frequency:(a=En[d].frequency)!=null?a:0});let u=e.substring(1);for(let d of Object.keys(t.options.macros))d.startsWith(u)&&l.push({match:"\\"+d,frequency:0});return l.sort((d,g)=>{var E,P;return d.frequency===g.frequency?d.match.length===g.match.length?d.match<g.match?-1:1:d.match.length-g.match.length:((E=g.frequency)!=null?E:0)-((P=d.frequency)!=null?P:0)}),l.map(d=>d.match)}function tu(t){let e="auto",r=t.match(/:([^=]+)/);return r&&(e=r[1].trim()),e}function No(t){if(!t)return[];let e=[],r=t.split("]");if(r[0].startsWith("[")){e.push({isOptional:!0,type:tu(r[0].slice(1))});for(let a=1;a<=r.length;a++)e.push(...No(r[a]))}else if(r=t.split("}"),r[0].startsWith("{")){e.push({isOptional:!1,type:tu(r[0].slice(1))});for(let a=1;a<=r.length;a++)e.push(...No(r[a]))}return e}function Ws(t){if(!t)return"";let e="",r=!0;for(let a of t)typeof a.value=="string"?e+=a.value:r=!1;return r?e:""}function St(t,e,r){typeof t=="string"&&(t=[t]);let a={tabular:!0,rootOnly:!1,params:No(e),createAtom:r};for(let l of t)qs[l]=a}function $o(t,e,r){var a;typeof t=="string"&&(t=[t]);let l={tabular:(a=r?.tabular)!=null?a:!1,rootOnly:!0,params:[],createAtom:e};for(let u of t)qs[u]=l}function v(t,e,r){var a,l;r||(r={});let u={definitionType:"function",params:No(e),ifMode:r.ifMode,isFunction:(a=r.isFunction)!=null?a:!1,applyMode:r.applyMode,infix:(l=r.infix)!=null?l:!1,parse:r.parse,createAtom:r.createAtom,applyStyle:r.applyStyle,serialize:r.serialize,render:r.render};if(typeof t=="string")Ai["\\"+t]=u;else for(let d of t)Ai["\\"+d]=u}var Po;function Ei(t){return Po||(Po=Ci(Ih)),t?Ci(p(p({},Po),t)):Po}function ru(t,e){var r,a,l,u;if(typeof t=="string"){let d=0,g=t;return/(^|[^\\])#1/.test(g)&&(d=1),/(^|[^\\])#2/.test(g)&&(d=2),/(^|[^\\])#3/.test(g)&&(d=3),/(^|[^\\])#4/.test(g)&&(d=4),/(^|[^\\])#5/.test(g)&&(d=5),/(^|[^\\])#6/.test(g)&&(d=6),/(^|[^\\])#7/.test(g)&&(d=7),/(^|[^\\])#8/.test(g)&&(d=8),/(^|[^\\])#9/.test(g)&&(d=9),{expand:(r=e?.expand)!=null?r:!0,captureSelection:(a=e?.captureSelection)!=null?a:!0,args:d,def:g}}return p({expand:(l=e?.expand)!=null?l:!0,captureSelection:(u=e?.captureSelection)!=null?u:!0,args:0},t)}function Ci(t){if(!t)return{};let e={};for(let r of Object.keys(t)){let a=t[r];if(a==null)delete e[r];else if(typeof a=="object"&&"package"in a)for(let l of Object.keys(a.package))e[l]=ru(a.package[l],{expand:!a.primitive,captureSelection:a.captureSelection});else e[r]=ru(a)}return e}function se(t,e="math"){if(!t||t.length===0)return null;let r=null;if(t.startsWith("\\")){if(r=Ai[t],r)return!r.ifMode||r.ifMode===e?r:null;e==="math"?r=En[t]:Li[t]&&(r={definitionType:"symbol",type:"mord",codepoint:Li[t]})}else if(e==="math"){if(r=En[t],!r&&t.length===1){let a=Us("math",t.codePointAt(0));return a.startsWith("\\")?f(p({},se(a,"math")),{command:a}):null}}else Li[t]?r={definitionType:"symbol",type:"mord",codepoint:Li[t]}:e==="text"&&(r={definitionType:"symbol",type:"mord",codepoint:t.codePointAt(0)});return r??null}function Ti(t,e){if(!t.startsWith("\\"))return null;let r=t.slice(1);return e[r]}function Us(t,e){return e===void 0?"":t==="math"&&zo[e]?zo[e]:t==="text"&&Object.keys(Li).find(a=>Li[a]===e)||String.fromCodePoint(e)}var Ze=[0,.68889,0,0,.72222],Ur=[0,.68889,0,0,.66667],js=[0,.68889,0,0,.77778],Fo=[0,.68889,0,0,.61111],au=[.16667,.68889,0,0,.77778],Tn=[0,.68889,0,0,.55556],j=[0,0,0,0,.25],su=[0,.825,0,0,2.33334],lu=[0,.9,0,0,2.33334],Vo=[0,.68889,0,0,.54028],Js=[-.03598,.46402,0,0,.5],Ce=[-.13313,.36687,0,0,1],qo=[.01354,.52239,0,0,1],cu=[.01354,.52239,0,0,1.11111],uu=[0,.54986,0,0,1],Ho=[0,.69224,0,0,.5],Gs=[0,.43056,0,0,1],lr=[.08198,.58198,0,0,.77778],Wo=[.19444,.69224,0,0,.41667],Uo=[.1808,.675,0,0,1],du=[.19444,.69224,0,0,.83334],mu=[.13667,.63667,0,0,1],pu=[-.064,.437,0,0,1.334],cr=[.08167,.58167,0,0,.77778],Dn=[0,.69224,0,0,.72222],Xs=[0,.69224,0,0,.66667],jo=[-.13313,.36687,0,0,.77778],hu=[.06062,.54986,0,0,.77778],Jo=[0,.69224,0,0,.77778],Di=[.25583,.75583,0,0,.77778],Lt=[.25142,.75726,0,0,.77778],Ki=[.20576,.70576,0,0,.77778],at=[.30274,.79383,0,0,.77778],Kn=[.22958,.72958,0,0,.77778],fu=[.1808,.675,0,0,.77778],At=[.13667,.63667,0,0,.77778],Ie=[.13597,.63597,0,0,.77778],ur=[.03517,.54986,0,0,.77778],Oi=[0,.675,0,0,.77778],gu=[.19444,.69224,0,0,.61111],bu=[0,.54986,0,0,.76042],yu=[0,.54986,0,0,.66667],dr=[.0391,.5391,0,0,.77778],xu=[.03517,.54986,0,0,1.33334],vu=[.38569,.88569,0,0,.77778],Go=[.23222,.74111,0,0,.77778],_u=[.19444,.69224,0,0,.77778],Mu=[0,.37788,0,0,.5],Xo=[0,.54986,0,0,.72222],wu=[0,.69224,0,0,.83334],ku=[.11111,.69224,0,0,.66667],Bi=[.26167,.75726,0,0,.77778],Su=[.48256,.98256,0,0,.77778],Lu=[.28481,.79383,0,0,.77778],Au=[.08167,.58167,0,0,.22222],Cu=[.08167,.58167,0,0,.38889],Eu=[0,.43056,.04028,0,.66667],Tu=[.41951,.91951,0,0,.77778],Du=[.24982,.74947,0,0,.38865],Ku=[.08319,.58283,0,0,.75623],Ou=[0,.10803,0,0,.27764],Zs=[0,.47534,0,0,.50181],On=[.18906,.47534,0,0,.50181],Bu=[0,.69141,0,0,.50181],Ru=[.24982,.74947,0,0,.27764],Ys=[0,.69141,0,0,.21471],Zo=[.25,.75,0,0,.44722],Ye=[0,.64444,0,0,.575],Ri=[.08556,.58556,0,0,.89444],Yo=[0,.69444,0,0,.89444],Qo=[0,.68611,0,0,.9],Qs=[0,.68611,0,0,.86944],mr=[.25,.75,0,0,.575],ea=[.25,.75,0,0,.31944],jr=[0,.69444,0,0,.63889],Pi=[0,.69444,0,0,.31944],Pu=[0,.44444,0,0,.63889],zu=[0,.44444,0,0,.51111],pr=[0,.69444,0,0,.575],st=[.13333,.63333,0,0,.89444],Iu=[0,.44444,0,0,.31944],Nu=[0,.69444,0,0,.86944],$u=[0,.68611,0,0,.69166],ta=[0,.68611,0,0,.83055],el=[0,.68611,0,0,.89444],tl=[0,.69444,0,0,.60278],Fu=[.19444,.69444,0,0,.51111],Vu=[0,.69444,0,0,.83055],Ct=[-.10889,.39111,0,0,1.14999],qu=[.19444,.69444,0,0,.575],Bn=[.19444,.69444,0,0,1.14999],Hu=[.19444,.69444,0,0,.70277],Wu=[.05556,.75,0,0,.575],rl=[0,.68611,0,0,.95833],Uu=[.08556,.58556,0,0,.76666],il=[-.02639,.47361,0,0,.575],ju=[0,.44444,0,0,.89444],Jr=[0,.55556,0,0,.76666],Ju=[-.10889,.39111,0,0,.89444],nl=[.00222,.50222,0,0,.89444],hr=[.19667,.69667,0,0,.89444],Gu=[.08556,.58556,0,0,1.14999],ol=[0,.69444,0,0,.70277],ra=[-.02778,.47222,0,0,.575],ia=[.25,.75,0,0,.51111],Xu=[-.13889,.36111,0,0,1.14999],Zu=[.19444,.69444,0,0,1.02222],na=[.12963,.69444,0,0,.89444],Yu=[.19444,.69444,0,0,.44722],fr=[0,.64444,.13167,0,.59111],Qu=[.19444,.64444,.13167,0,.59111],al=[0,.68611,.17208,0,.8961],ed=[.19444,.44444,.105,0,.53222],td=[0,.44444,.085,0,.82666],rd=[0,.69444,.06709,0,.59111],oa=[0,.69444,.12945,0,.35555],id$2=[0,.69444,0,0,.94888],sl=[0,.69444,.11472,0,.59111],nd=[0,.68611,.10778,0,.88555],od=[0,.69444,.07939,0,.62055],aa=[0,.69444,.12417,0,.30667],gr=[0,.64444,.13556,0,.51111],ad=[.19444,.64444,.13556,0,.51111],sa=[0,.68333,.16389,0,.74333],sd=[.19444,.43056,.08847,0,.46],ld=[0,.43056,.07514,0,.71555],cd=[0,.69444,.06646,0,.51111],ud=[0,.69444,0,0,.83129],dd=[0,.69444,.1225,0,.51111],md=[0,.68333,.09403,0,.76666],pd=[0,.68333,.11111,0,.76666],hd=[0,.69444,.06961,0,.51444],Jt=[0,.69444,0,0,.27778],zi=[.25,.75,0,0,.38889],Qe=[0,.64444,0,0,.5],Gr=[0,.69444,0,0,.77778],Xr=[0,.68333,0,0,.75],Rn=[0,.68333,0,0,.77778],fd=[0,.68333,0,0,.68056],Pn=[0,.68333,0,0,.72222],Gt=[.25,.75,0,0,.5],la=[.25,.75,0,0,.27778],xe=[0,.69444,0,0,.5],Ii=[0,.69444,0,0,.55556],ll=[0,.43056,0,0,.44445],zn=[0,.43056,0,0,.5],gd=[.19444,.43056,0,0,.55556],bd=[0,.43056,0,0,.55556],et=[.08333,.58333,0,0,.77778],yd=[0,.43056,0,0,.27778],xd=[0,.66786,0,0,.27778],vd=[0,.69444,0,0,.75],_d=[0,.66786,0,0,.5],Md=[0,.68333,0,0,.625],cl=[.19444,.69444,0,0,.44445],In=[0,.69444,0,0,.72222],wd=[.19444,.69444,0,0,.5],Nn=[.19444,.69444,0,0,1],kd=[.011,.511,0,0,1.126],ul=[.19444,.69444,0,0,.61111],dl=[.05556,.75,0,0,.5],Sd=[0,.68333,0,0,.83334],Ld=[.0391,.5391,0,0,.66667],ml=[-.05555,.44445,0,0,.5],Ad=[0,.43056,0,0,.77778],Zr=[0,.55556,0,0,.66667],ca=[-.03625,.46375,0,0,.77778],Cd=[-.01688,.48312,0,0,.77778],Ed=[.0391,.5391,0,0,1],br=[0,.69444,0,0,.61111],ua=[-.03472,.46528,0,0,.5],da=[.25,.75,0,0,.44445],Td=[-.14236,.35764,0,0,1],ma=[.244,.744,0,0,.412],Dd=[.19444,.69444,0,0,.88889],pa=[.12963,.69444,0,0,.77778],Kd=[.19444,.69444,0,0,.38889],Od=[.011,.511,0,0,1.638],Bd=[.19444,.69444,0,0,0],ha=[0,.44444,0,0,.575],$n=[.19444,.44444,0,0,.575],Rd=[0,.68611,0,0,.75555],Pd=[0,.69444,0,0,.66759],zd=[0,.68611,0,0,.80555],Id=[0,.68611,.08229,0,.98229],Nd=[0,.68611,0,0,.76666],$d=[0,.44444,0,0,.58472],Fd=[.19444,.44444,0,0,.6118],Fn=[.19444,.43056,0,0,.5],Vd=[0,.68333,.02778,.08334,.76278],qd=[0,.68333,.08125,.05556,.83125],Hd=[0,.43056,0,.05556,.48472],Wd=[.19444,.43056,0,.08334,.51702],Ud=[.25,.75,0,0,.42778],ke=[0,.69444,0,0,.55],Xt=[0,.69444,0,0,.73334],yr=[0,.69444,0,0,.79445],jd=[0,.69444,0,0,.51945],pl=[0,.69444,0,0,.70278],Jd=[0,.69444,0,0,.76389],Gd=[.25,.75,0,0,.34306],hl=[0,.69444,0,0,.56111],Xd=[0,.69444,0,0,.25556],Zd=[.19444,.45833,0,0,.56111],Yd=[0,.45833,0,0,.56111],fa=[0,.69444,0,0,.30556],Qd=[0,.69444,0,0,.58056],e0=[0,.69444,0,0,.67223],fl=[0,.69444,0,0,.85556],gl=[0,.69444,0,0,.55834],Et=[0,.65556,.11156,0,.5],bl=[0,.69444,.08094,0,.70834],yl=[.17014,0,0,0,.44445],t0=[0,.69444,.0799,0,.5],r0=[0,.69444,0,0,.73752],i0=[0,.69444,.09205,0,.5],n0=[0,.69444,.09031,0,.77778],xl=[0,.69444,.07816,0,.27778],o0=[0,.69444,.00316,0,.5],a0=[.19444,.69444,0,0,.83334],s0=[.05556,.75,0,0,.83334],l0=[0,.75,0,0,.5],c0=[.125,.08333,0,0,.27778],u0=[0,.08333,0,0,.27778],Tt=[0,.65556,0,0,.5],vl=[0,.69444,0,0,.47222],Zt=[0,.69444,0,0,.66667],d0=[0,.69444,0,0,.59722],_l=[0,.69444,0,0,.54167],Ml=[0,.69444,0,0,.70834],m0=[.25,.75,0,0,.28889],wl=[0,.69444,0,0,.51667],p0=[0,.44444,0,0,.44445],h0=[.19444,.44444,0,0,.51667],f0=[0,.44444,0,0,.38333],g0=[0,.44444,0,0,.51667],b0=[0,.69444,0,0,.83334],y0=[.35001,.85,0,0,.45834],x0=[.35001,.85,0,0,.57778],v0=[.35001,.85,0,0,.41667],_0=[.35001,.85,0,0,.58334],ga=[0,.72222,0,0,.55556],M0=[1e-5,.6,0,0,.66667],w0=[1e-5,.6,0,0,.77778],k0=[.25001,.75,0,0,.94445],S0=[.306,.805,.19445,0,.47222],L0=[.30612,.805,.19445,0,.47222],Ni=[.25001,.75,0,0,.83334],$i=[.35001,.85,0,0,.47222],kl=[.25001,.75,0,0,1.11111],A0=[.65002,1.15,0,0,.59722],C0=[.65002,1.15,0,0,.81111],E0=[.65002,1.15,0,0,.47222],T0=[.65002,1.15,0,0,.66667],ba=[0,.75,0,0,1],D0=[.55001,1.05,0,0,1.27778],K0=[.862,1.36,.44445,0,.55556],O0=[.86225,1.36,.44445,0,.55556],Fi=[.55001,1.05,0,0,1.11111],ya=[.65002,1.15,0,0,.52778],B0=[.65002,1.15,0,0,.61111],Sl=[.55001,1.05,0,0,1.51112],R0=[.95003,1.45,0,0,.73611],P0=[.95003,1.45,0,0,1.04445],z0=[.95003,1.45,0,0,.52778],xa=[.95003,1.45,0,0,.75],va=[0,.75,0,0,1.44445],_a=[.95003,1.45,0,0,.58334],I0=[1.25003,1.75,0,0,.79167],N0=[1.25003,1.75,0,0,1.27778],$0=[1.25003,1.75,0,0,.58334],Ma=[1.25003,1.75,0,0,.80556],wa=[0,.825,0,0,1.8889],ka=[1.25003,1.75,0,0,.63889],Sa=[.64502,1.155,0,0,.875],F0=[1e-5,.6,0,0,.875],Ll=[-99e-5,.601,0,0,.66667],La=[.64502,1.155,0,0,.66667],V0=[1e-5,.9,0,0,.88889],q0=[.65002,1.15,0,0,.88889],H0=[.90001,0,0,0,.88889],W0=[-.00499,.605,0,0,1.05556],Aa=[0,.12,0,0,.45],T=[0,.61111,0,0,.525],lt=[.08333,.69444,0,0,.525],U0=[-.08056,.53055,0,0,.525],j0=[-.05556,.55556,0,0,.525],Ke=[0,.43056,0,0,.525],Vn=[.22222,.43056,0,0,.525],J0=[0,0,0,0,.525],G0={"AMS-Regular":{32:j,65:Ze,66:Ur,67:Ze,68:Ze,69:Ur,70:Fo,71:js,72:js,73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:js,76:Ur,77:[0,.68889,0,0,.94445],78:Ze,79:au,80:Fo,81:au,82:Ze,83:Tn,84:Ur,85:Ze,86:Ze,87:[0,.68889,0,0,1],88:Ze,89:Ze,90:Ur,107:Tn,160:j,165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:Tn,295:Vo,710:su,732:lu,770:su,771:lu,989:cr,1008:Eu,8245:[0,.54986,0,0,.275],8463:Vo,8487:Ze,8498:Tn,8502:Ur,8503:[0,.68889,0,0,.44445],8504:Ur,8513:[0,.68889,0,0,.63889],8592:Js,8594:Js,8602:Ce,8603:Ce,8606:qo,8608:qo,8610:cu,8611:cu,8619:uu,8620:uu,8621:[-.13313,.37788,0,0,1.38889],8622:Ce,8624:Ho,8625:Ho,8630:Gs,8631:Gs,8634:lr,8635:lr,8638:Wo,8639:Wo,8642:Wo,8643:Wo,8644:Uo,8646:Uo,8647:Uo,8648:du,8649:Uo,8650:du,8651:qo,8652:qo,8653:Ce,8654:Ce,8655:Ce,8666:mu,8667:mu,8669:[-.13313,.37788,0,0,1],8672:pu,8674:pu,8705:[0,.825,0,0,.5],8708:Tn,8709:cr,8717:[0,.43056,0,0,.42917],8722:Js,8724:[.08198,.69224,0,0,.77778],8726:cr,8733:Jo,8736:Dn,8737:Dn,8738:[.03517,.52239,0,0,.72222],8739:Au,8740:[.25142,.74111,0,0,.27778],8741:Cu,8742:[.25142,.74111,0,0,.5],8756:Xs,8757:Xs,8764:jo,8765:[-.13313,.37788,0,0,.77778],8769:jo,8770:ca,8774:at,8776:Cd,8778:cr,8782:hu,8783:hu,8785:lr,8786:lr,8787:lr,8790:Jo,8791:Kn,8796:[.08198,.91667,0,0,.77778],8806:Di,8807:Di,8808:Lt,8809:Lt,8812:[.25583,.75583,0,0,.5],8814:Ki,8815:Ki,8816:at,8817:at,8818:Kn,8819:Kn,8822:fu,8823:fu,8828:At,8829:At,8830:Kn,8831:Kn,8832:Ki,8833:Ki,8840:at,8841:at,8842:Ie,8843:Ie,8847:ur,8848:ur,8858:lr,8859:lr,8861:lr,8862:Oi,8863:Oi,8864:Oi,8865:Oi,8872:[0,.69224,0,0,.61111],8873:Dn,8874:[0,.69224,0,0,.88889],8876:Fo,8877:Fo,8878:Ze,8879:Ze,8882:ur,8883:ur,8884:At,8885:At,8888:[0,.54986,0,0,1.11111],8890:gd,8891:gu,8892:gu,8901:[0,.54986,0,0,.27778],8903:cr,8905:cr,8906:cr,8907:Jo,8908:Jo,8909:[-.03598,.46402,0,0,.77778],8910:bu,8911:bu,8912:ur,8913:ur,8914:yu,8915:yu,8916:Xs,8918:dr,8919:dr,8920:xu,8921:xu,8922:vu,8923:vu,8926:At,8927:At,8928:at,8929:at,8934:Go,8935:Go,8936:Go,8937:Go,8938:Ki,8939:Ki,8940:at,8941:at,8994:_u,8995:_u,9416:[.15559,.69224,0,0,.90222],9484:Ho,9488:Ho,9492:Mu,9496:Mu,9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:Oi,9633:Oi,9650:Xo,9651:Xo,9654:ur,9660:Xo,9661:Xo,9664:ur,9674:ku,9733:[.19444,.69224,0,0,.94445],10003:wu,10016:wu,10731:ku,10846:[.19444,.75583,0,0,.61111],10877:At,10878:At,10885:Di,10886:Di,10887:Ie,10888:Ie,10889:Bi,10890:Bi,10891:Su,10892:Su,10901:At,10902:At,10933:Lt,10934:Lt,10935:Bi,10936:Bi,10937:Bi,10938:Bi,10949:Di,10950:Di,10955:Lu,10956:Lu,57350:Au,57351:Cu,57352:cr,57353:Eu,57356:Lt,57357:Lt,57358:Tu,57359:at,57360:at,57361:Tu,57366:Lt,57367:Lt,57368:Lt,57369:Lt,57370:Ie,57371:Ie},"Caligraphic-Regular":{32:j,65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:j},"Fraktur-Regular":{32:j,33:[0,.69141,0,0,.29574],34:Ys,38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:Du,41:Du,42:[0,.62119,0,0,.27764],43:Ku,44:Ou,45:Ku,46:Ou,47:[.24982,.74947,0,0,.50181],48:Zs,49:Zs,50:Zs,51:On,52:On,53:On,54:Bu,55:On,56:Bu,57:On,58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:Ru,93:Ru,94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:j,8216:Ys,8217:Ys,58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:j,33:[0,.69444,0,0,.35],34:tl,35:[.19444,.69444,0,0,.95833],36:Wu,37:[.05556,.75,0,0,.95833],38:Yo,39:Pi,40:Zo,41:Zo,42:[0,.75,0,0,.575],43:st,44:[.19444,.15556,0,0,.31944],45:f0,46:[0,.15556,0,0,.31944],47:mr,48:Ye,49:Ye,50:Ye,51:Ye,52:Ye,53:Ye,54:Ye,55:Ye,56:Ye,57:Ye,58:Iu,59:[.19444,.44444,0,0,.31944],60:Ri,61:Ju,62:Ri,63:[0,.69444,0,0,.54305],64:Yo,65:Qs,66:[0,.68611,0,0,.81805],67:ta,68:[0,.68611,0,0,.88194],69:Rd,70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:Qo,73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:$u,77:[0,.68611,0,0,1.09166],78:Qo,79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:Qs,89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:ea,92:mr,93:ea,94:pr,95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:jr,99:zu,100:jr,101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:jr,105:Pi,106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:Pi,109:[0,.44444,0,0,.95833],110:Pu,111:ha,112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:Pu,118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:zu,123:mr,124:ea,125:mr,126:[.35,.34444,0,0,.575],160:j,163:[0,.69444,0,0,.86853],168:pr,172:[0,.44444,0,0,.76666],176:Nu,177:st,184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:st,216:[.04861,.73472,0,0,.89444],223:d0,230:[0,.44444,0,0,.83055],247:st,248:[.09722,.54167,0,0,.575],305:Iu,338:[0,.68611,0,0,1.16944],339:ju,567:[.19444,.44444,0,0,.35139],710:pr,711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:pr,715:pr,728:pr,729:Pi,730:Nu,732:pr,733:pr,915:$u,916:rl,920:el,923:zd,926:Nd,928:Qo,931:ta,933:el,934:ta,936:el,937:ta,8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:Pi,8217:Pi,8220:tl,8221:tl,8224:Fu,8225:Fu,8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:Pd,8465:Vu,8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:Vu,8501:ol,8592:Ct,8593:qu,8594:Ct,8595:qu,8596:Ct,8597:mr,8598:Bn,8599:Bn,8600:Bn,8601:Bn,8636:Ct,8637:Ct,8640:Ct,8641:Ct,8656:Ct,8657:Hu,8658:Ct,8659:Hu,8660:Ct,8661:[.25,.75,0,0,.70277],8704:jr,8706:[0,.69444,.06389,0,.62847],8707:jr,8709:Wu,8711:rl,8712:Uu,8715:Uu,8722:st,8723:st,8725:mr,8726:mr,8727:ra,8728:il,8729:il,8730:[.18,.82,0,0,.95833],8733:ju,8734:[0,.44444,0,0,1.14999],8736:Dn,8739:ea,8741:mr,8743:Jr,8744:Jr,8745:Jr,8746:Jr,8747:[.19444,.69444,.12778,0,.56875],8764:Ju,8768:[.19444,.69444,0,0,.31944],8771:nl,8776:[.02444,.52444,0,0,.89444],8781:nl,8801:nl,8804:hr,8805:hr,8810:Gu,8811:Gu,8826:Ri,8827:Ri,8834:Ri,8835:Ri,8838:hr,8839:hr,8846:Jr,8849:hr,8850:hr,8851:Jr,8852:Jr,8853:st,8854:st,8855:st,8856:st,8857:st,8866:ol,8867:ol,8868:Yo,8869:Yo,8900:il,8901:[-.02639,.47361,0,0,.31944],8902:ra,8968:ia,8969:ia,8970:ia,8971:ia,8994:Xu,8995:Xu,9651:Zu,9657:ra,9661:Zu,9667:ra,9711:Bn,9824:na,9825:na,9826:na,9827:na,9837:[0,.75,0,0,.44722],9838:Yu,9839:Yu,10216:Zo,10217:Zo,10815:Qo,10927:hr,10928:hr,57376:Bd},"Main-BoldItalic":{32:j,33:[0,.69444,.11417,0,.38611],34:od,35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:oa,40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:fr,49:fr,50:fr,51:fr,52:Qu,53:fr,54:fr,55:Qu,56:fr,57:fr,58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:sl,64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:al,73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:al,79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:rd,95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:ed,104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:ed,114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:j,168:[0,.69444,.11473,0,.59111],176:id$2,184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:td,248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:td,567:[.19444,.44444,.04611,0,.385],710:rd,711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:oa,730:id$2,732:sl,733:sl,915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:al,931:[0,.68611,.11431,0,.82666],933:nd,934:[0,.68611,.05632,0,.82666],936:nd,937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:oa,8217:oa,8220:[0,.69444,.16772,0,.62055],8221:od},"Main-Italic":{32:j,33:aa,34:hd,35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:aa,40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:gr,49:gr,50:gr,51:gr,52:ad,53:gr,54:gr,55:ad,56:gr,57:gr,58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:dd,64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:sa,73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:sa,79:md,80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:sa,86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:cd,95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:sd,104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:sd,114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:j,168:[0,.66786,.10474,0,.51111],176:ud,184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:ld,248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:ld,710:cd,711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:ud,732:[0,.66786,.11585,0,.51111],733:dd,915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:md,923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:sa,931:[0,.68333,.12028,0,.71555],933:pd,934:[0,.68333,.05986,0,.71555],936:pd,937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:aa,8217:aa,8220:[0,.69444,.1685,0,.51444],8221:hd,8463:Vo},"Main-Regular":{32:j,33:Jt,34:xe,35:a0,36:dl,37:s0,38:Gr,39:Jt,40:zi,41:zi,42:l0,43:et,44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:Gt,48:Qe,49:Qe,50:Qe,51:Qe,52:Qe,53:Qe,54:Qe,55:Qe,56:Qe,57:Qe,58:yd,59:[.19444,.43056,0,0,.27778],60:dr,61:jo,62:dr,63:vl,64:Gr,65:Xr,66:[0,.68333,0,0,.70834],67:Pn,68:[0,.68333,0,0,.76389],69:fd,70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:Xr,73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:Rn,76:Md,77:[0,.68333,0,0,.91667],78:Xr,79:Rn,80:fd,81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:Pn,85:Xr,86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:Xr,89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:la,92:Gt,93:la,94:xe,95:[.31,.12056,.02778,0,.5],97:zn,98:Ii,99:ll,100:Ii,101:ll,102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:Ii,105:xd,106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:Jt,109:[0,.43056,0,0,.83334],110:bd,111:zn,112:gd,113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:bd,118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:ll,123:Gt,124:la,125:Gt,126:[.35,.31786,0,0,.5],160:j,163:[0,.69444,0,0,.76909],167:cl,168:_d,172:[0,.43056,0,0,.66667],176:vd,177:et,182:ul,184:yl,198:[0,.68333,0,0,.90278],215:et,216:[.04861,.73194,0,0,.77778],223:xe,230:[0,.43056,0,0,.72222],247:et,248:[.09722,.52778,0,0,.5],305:yd,338:[0,.68333,0,0,1.01389],339:Ad,567:[.19444,.43056,0,0,.30556],710:xe,711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:xe,715:xe,728:xe,729:xd,730:vd,732:_d,733:xe,915:Md,916:Sd,920:Rn,923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:Xr,931:Pn,933:Rn,934:Pn,936:Rn,937:Pn,8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:Jt,8217:Jt,8220:xe,8221:xe,8224:cl,8225:cl,8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:Vo,8465:In,8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:In,8501:br,8592:Ce,8593:wd,8594:Ce,8595:wd,8596:Ce,8597:Gt,8598:Nn,8599:Nn,8600:Nn,8601:Nn,8614:[.011,.511,0,0,1],8617:kd,8618:kd,8636:Ce,8637:Ce,8640:Ce,8641:Ce,8652:[.011,.671,0,0,1],8656:Ce,8657:ul,8658:Ce,8659:ul,8660:Ce,8661:[.25,.75,0,0,.61111],8704:Ii,8706:[0,.69444,.05556,.08334,.5309],8707:Ii,8709:dl,8711:Sd,8712:Ld,8715:Ld,8722:et,8723:et,8725:Gt,8726:Gt,8727:ua,8728:ml,8729:ml,8730:[.2,.8,0,0,.83334],8733:Ad,8734:Gs,8736:Dn,8739:la,8741:Gt,8743:Zr,8744:Zr,8745:Zr,8746:Zr,8747:[.19444,.69444,.11111,0,.41667],8764:jo,8768:[.19444,.69444,0,0,.27778],8771:ca,8773:[-.022,.589,0,0,1],8776:Cd,8781:ca,8784:[-.133,.67,0,0,.778],8801:ca,8804:Ie,8805:Ie,8810:Ed,8811:Ed,8826:dr,8827:dr,8834:dr,8835:dr,8838:Ie,8839:Ie,8846:Zr,8849:Ie,8850:Ie,8851:Zr,8852:Zr,8853:et,8854:et,8855:et,8856:et,8857:et,8866:br,8867:br,8868:Gr,8869:Gr,8872:[.249,.75,0,0,.867],8900:ml,8901:[-.05555,.44445,0,0,.27778],8902:ua,8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:da,8969:da,8970:da,8971:da,8994:Td,8995:Td,9136:ma,9137:ma,9651:Dd,9657:ua,9661:Dd,9667:ua,9711:Nn,9824:pa,9825:pa,9826:pa,9827:pa,9837:[0,.75,0,0,.38889],9838:Kd,9839:Kd,10216:zi,10217:zi,10222:ma,10223:ma,10229:[.011,.511,0,0,1.609],10230:Od,10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:Od,10815:Xr,10927:Ie,10928:Ie,57376:Bd},"Math-BoldItalic":{32:j,48:ha,49:ha,50:ha,51:$n,52:$n,53:$n,54:Ye,55:$n,56:Ye,57:$n,65:Qs,66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:Id,73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:Rd,77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:Pd,105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:$d,112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:j,915:[0,.68611,.15972,0,.65694],916:rl,920:[0,.68611,.03194,0,.86722],923:zd,926:[0,.68611,.07458,0,.84125],928:Id,931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:Nd,936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:$d,960:[0,.44444,.03704,0,.68241],961:Fd,962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:Fd,1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:j,48:zn,49:zn,50:zn,51:Fn,52:Fn,53:Fn,54:Qe,55:Fn,56:Qe,57:Fn,65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:qd,73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:Vd,80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:Hd,112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:j,915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:Vd,923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:qd,931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:Hd,960:[0,.43056,.03588,0,.57003],961:Wd,962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:Wd,1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:j,33:[0,.69444,0,0,.36667],34:gl,35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:fa,40:Ud,41:Ud,42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:ke,49:ke,50:ke,51:ke,52:ke,53:ke,54:ke,55:ke,56:ke,57:ke,58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:jd,64:Xt,65:Xt,66:Xt,67:pl,68:yr,69:[0,.69444,0,0,.64167],70:br,71:Xt,72:yr,73:[0,.69444,0,0,.33056],74:jd,75:Jd,76:Qd,77:[0,.69444,0,0,.97778],78:yr,79:yr,80:pl,81:[.10556,.69444,0,0,.79445],82:pl,83:br,84:Xt,85:Jd,86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:Xt,89:[0,.69444,.0275,0,.73334],90:e0,91:Gd,93:Gd,94:ke,95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:hl,99:[0,.45833,0,0,.48889],100:hl,101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:hl,105:Xd,106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:Xd,109:[0,.45833,0,0,.86667],110:Yd,111:[0,.45833,0,0,.55],112:Zd,113:Zd,114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:Yd,118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:j,168:ke,176:Xt,180:ke,184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:ke,711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:ke,729:fa,730:Xt,732:ke,733:ke,915:Qd,916:[0,.69444,0,0,.91667],920:fl,923:e0,926:Xt,928:yr,931:yr,933:fl,934:yr,936:fl,937:yr,8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:fa,8217:fa,8220:gl,8221:gl},"SansSerif-Italic":{32:j,33:[0,.69444,.05733,0,.31945],34:o0,35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:xl,40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:c0,45:[0,.44444,.01946,0,.33333],46:u0,47:[.25,.75,.13164,0,.5],48:Et,49:Et,50:Et,51:Et,52:Et,53:Et,54:Et,55:Et,56:Et,57:Et,58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:Zt,66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:bl,73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:_l,77:[0,.69444,.08094,0,.875],78:bl,79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:t0,95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:j,168:[0,.67937,.06385,0,.5],176:r0,184:yl,305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:t0,711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:i0,715:xe,728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:r0,732:[0,.67659,.08826,0,.5],733:i0,915:[0,.69444,.13372,0,.54167],916:b0,920:[0,.69444,.07555,0,.77778],923:br,926:[0,.69444,.12816,0,.66667],928:bl,931:[0,.69444,.11983,0,.72222],933:n0,934:[0,.69444,.04603,0,.72222],936:n0,937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:xl,8217:xl,8220:[0,.69444,.14205,0,.5],8221:o0},"SansSerif-Regular":{32:j,33:[0,.69444,0,0,.31945],34:xe,35:a0,36:dl,37:s0,38:[0,.69444,0,0,.75834],39:Jt,40:zi,41:zi,42:l0,43:et,44:c0,45:[0,.44444,0,0,.33333],46:u0,47:Gt,48:Tt,49:Tt,50:Tt,51:Tt,52:Tt,53:Tt,54:Tt,55:Tt,56:Tt,57:Tt,58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:vl,64:Zt,65:Zt,66:Zt,67:jr,68:[0,.69444,0,0,.72223],69:d0,70:[0,.69444,0,0,.56945],71:Zt,72:Ml,73:Jt,74:vl,75:[0,.69444,0,0,.69445],76:_l,77:[0,.69444,0,0,.875],78:Ml,79:[0,.69444,0,0,.73611],80:jr,81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:Ii,84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:Zt,89:[0,.69444,.025,0,.66667],90:br,91:m0,93:m0,94:xe,95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:wl,99:p0,100:wl,101:p0,102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:wl,105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:g0,111:[0,.44444,0,0,.5],112:h0,113:h0,114:[0,.44444,.01389,0,.34167],115:f0,116:[0,.57143,0,0,.36111],117:g0,118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:j,168:[0,.67937,0,0,.5],176:Zt,184:yl,305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:xe,711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:xe,715:xe,728:xe,729:[0,.67937,0,0,.27778],730:Zt,732:[0,.67659,0,0,.5],733:xe,915:_l,916:b0,920:Gr,923:br,926:Zt,928:Ml,931:In,933:Gr,934:In,936:Gr,937:In,8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:Jt,8217:Jt,8220:xe,8221:xe},"Script-Regular":{32:j,65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:j},"Size1-Regular":{32:j,40:y0,41:y0,47:x0,91:v0,92:x0,93:v0,123:_0,125:_0,160:j,710:ga,732:ga,770:ga,771:ga,8214:[-99e-5,.601,0,0,.77778],8593:M0,8595:M0,8657:w0,8659:w0,8719:k0,8720:k0,8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:L0,8748:S0,8749:S0,8750:L0,8896:Ni,8897:Ni,8898:Ni,8899:Ni,8968:$i,8969:$i,8970:$i,8971:$i,9168:Ll,10216:$i,10217:$i,10752:kl,10753:kl,10754:kl,10756:Ni,10758:Ni},"Size2-Regular":{32:j,40:A0,41:A0,47:C0,91:E0,92:C0,93:E0,123:T0,125:T0,160:j,710:ba,732:ba,770:ba,771:ba,8719:D0,8720:D0,8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:O0,8748:K0,8749:K0,8750:O0,8896:Fi,8897:Fi,8898:Fi,8899:Fi,8968:ya,8969:ya,8970:ya,8971:ya,10216:B0,10217:B0,10752:Sl,10753:Sl,10754:Sl,10756:Fi,10758:Fi},"Size3-Regular":{32:j,40:R0,41:R0,47:P0,91:z0,92:P0,93:z0,123:xa,125:xa,160:j,710:va,732:va,770:va,771:va,8730:[.95003,1.45,0,0,1],8968:_a,8969:_a,8970:_a,8971:_a,10216:xa,10217:xa},"Size4-Regular":{32:j,40:I0,41:I0,47:N0,91:$0,92:N0,93:$0,123:Ma,125:Ma,160:j,710:wa,732:wa,770:wa,771:wa,8730:[1.25003,1.75,0,0,1],8968:ka,8969:ka,8970:ka,8971:ka,9115:Sa,9116:F0,9117:Sa,9118:Sa,9119:F0,9120:Sa,9121:La,9122:Ll,9123:La,9124:La,9125:Ll,9126:La,9127:V0,9128:q0,9129:H0,9130:[0,.3,0,0,.88889],9131:V0,9132:q0,9133:H0,9143:[.88502,.915,0,0,1.05556],10216:Ma,10217:Ma,57344:W0,57345:W0,57680:Aa,57681:Aa,57682:Aa,57683:Aa},"Typewriter-Regular":{32:J0,33:T,34:T,35:T,36:lt,37:lt,38:T,39:T,40:lt,41:lt,42:[0,.52083,0,0,.525],43:U0,44:[.13889,.125,0,0,.525],45:U0,46:[0,.125,0,0,.525],47:lt,48:T,49:T,50:T,51:T,52:T,53:T,54:T,55:T,56:T,57:T,58:Ke,59:[.13889,.43056,0,0,.525],60:j0,61:[-.19549,.41562,0,0,.525],62:j0,63:T,64:T,65:T,66:T,67:T,68:T,69:T,70:T,71:T,72:T,73:T,74:T,75:T,76:T,77:T,78:T,79:T,80:T,81:[.13889,.61111,0,0,.525],82:T,83:T,84:T,85:T,86:T,87:T,88:T,89:T,90:T,91:lt,92:lt,93:lt,94:T,95:[.09514,0,0,0,.525],96:T,97:Ke,98:T,99:Ke,100:T,101:Ke,102:T,103:Vn,104:T,105:T,106:[.22222,.61111,0,0,.525],107:T,108:T,109:Ke,110:Ke,111:Ke,112:Vn,113:Vn,114:Ke,115:Ke,116:[0,.55358,0,0,.525],117:Ke,118:Ke,119:Ke,120:Ke,121:Vn,122:Ke,123:lt,124:lt,125:lt,126:T,127:T,160:J0,176:T,184:[.19445,0,0,0,.525],305:Ke,567:Vn,711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:T,715:T,728:T,730:T,770:T,771:T,776:T,915:T,916:T,920:T,923:T,926:T,928:T,931:T,933:T,934:T,936:T,937:T,8216:T,8217:T,8242:T,9251:[.11111,.21944,0,0,.525]}},Nh=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,Dt=10,Oe=.25,Z0=1.2,tt=.431,Al={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[tt,tt,tt],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.5,.732,.925],num2:[.394,.384,.5],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[Oe,Oe,Oe],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},qn=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Vi=5,X0={"":" ","":" ",:"A",:"C",:"D",:"o",:"a",:"c",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function xr(t,e){t===void 0&&(t=77);let r=G0[e][t];if(r)return{defaultMetrics:!1,depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]};if(t===11034)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0,width:.8};let a=String.fromCodePoint(t);if(a in X0)t=X0[a].codePointAt(0);else if(Nh.test(a))return t=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0,width:1};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0,width:.8}}var Cl={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],longrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],longleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],longleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],longrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],longleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],longleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],longRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716],longLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},El={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},Y0={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:`m 529 160
  c -179 0 -524 -115 -524 -115
  c -5 -1 -9 -5 -9 -10
  c 0 -1 1 -2 1 -3
  l 4 -22
  c 1 -5 5 -9 11 -9
  h 2
  s 338 93 512 92
  c 174 0 513 -92 513 -92
  h 2
  c 5 0 9 4 11 9
  l 5 22
  c 1 6 -2 12 -8 13
  c 0 0 -342 115 -520 115
  z
  `,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,widetilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,widetilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,widetilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,widetilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`};function Q0(t){if(El[t]){let[P,Z,me]=El[t],_e=`<span class="ML__stretchy" style="height:${me}em"><svg width="100%" height="${me}em" viewBox="0 0 ${P} ${Z}" preserveAspectRatio="none" ><path fill="currentcolor" d="${Y0[t]}"></path></svg></span>`;return`<span style="display:inline-block;height:${Math.floor(100*me/2)/100}em;min-width:0">${_e}</span>`}let[e,r,a,l]=Cl[t],u,d,g=a/1e3;e.length===3?(u=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],d=["xMinYMin","xMidYMin","xMaxYMin"]):e.length===2?(u=["slice-1-of-2","slice-2-of-2"],d=["xMinYMin","xMaxYMin"]):(u=["slice-1-of-1"],d=[l]);let E=e.map((P,Z)=>`<span class="${u[Z]}" style=height:${g}em><svg width=400em height=${g}em viewBox="0 0 400000 ${a}" preserveAspectRatio="${d[Z]} slice"><path fill="currentcolor" d="${Y0[P]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${g}em;min-width:${r}em;">${E}</span>`}function em(t){return Cl[t]?Cl[t][2]/1e3:El[t][2]}function $h(t){let e=[];for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);if(a===13&&t.charCodeAt(r+1)===10&&(a=10,r++),(a===13||a===12)&&(a=10),a===0&&(a=65533),a>=55296&&a<=56319){let l=t.charCodeAt(r+1);if(l>=56320&&l<=57343){let u=a-55296,d=l-56320;a=2**16+u*2**10+d,r++}}e.push(a)}return e}var Ea=8205,Fh=[[Ea,1],[65038,2],[127995,5],[129456,4],[917536,96]],Ca,tm=[127462,127487];function rm(t){var e;if(Ca===void 0){Ca={};for(let r of Fh)for(let a=r[0];a<=r[0]+r[1]-1;a++)Ca[a]=!0}return(e=Ca[t])!=null?e:!1}function Vh(t){return t>=tm[0]&&t<=tm[1]}function Ta(t){if(/^[\u0020-\u00FF]*$/.test(t))return t;let e=[],r=$h(t),a=0;for(;a<r.length;){let l=r[a++],u=r[a];if(u===Ea){let d=a-1;for(a+=2;r[a]===Ea;)a+=2;e.push(String.fromCodePoint(...r.slice(d,a-d+1)))}else if(rm(u)){let d=a-1;for(;rm(r[a]);)a+=r[a]===Ea?2:1;e.push(String.fromCodePoint(...r.slice(d,2*a-d-1)))}else Vh(l)?(a+=1,e.push(String.fromCodePoint(...r.slice(a-2,2)))):e.push(String.fromCodePoint(l))}return e}var Tl=class{constructor(t){this.obeyspaces=!1,this.pos=0,this.s=Ta(t)}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(t){let e=typeof this.s=="string"?t.exec(this.s.slice(this.pos)):t.exec(this.s.slice(this.pos).join(""));return e!=null&&e[0]?(this.pos+=e[0].length,e[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let t=this.get();if(t==="\\"){if(!this.end()){let e=this.match(/^[a-zA-Z\*]+/);return e?this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/):e=this.get(),"\\"+e}}else{if(t==="{")return"<{>";if(t==="}")return"<}>";if(t==="^"){if(this.peek()==="^"){this.get();let e=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(e)return String.fromCodePoint(Number.parseInt(e.slice(e.lastIndexOf("^")+1),16))}return t}else if(t==="#"){if(!this.end()){let e=!1;if(/[\d?@]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){let r=this.s[this.pos+1];e=/[^\dA-Za-z]/.test(r)}return e?"#"+this.get():"#"}}else if(t==="$")return this.peek()==="$"?(this.get(),"<$$>"):"<$>"}return t}};function qh(t,e){var r,a,l,u;let d=[],g=t.next();if(g&&g!=="\\relax"){if(g==="\\noexpand")g=t.next(),g&&d.push(g);else if(g==="\\obeyspaces")t.obeyspaces=!0;else if(g==="\\bgroup")d.push("<{>");else if(g==="\\egroup")d.push("<}>");else if(g==="\\string"){if(g=t.next(),g)if(g.startsWith("\\"))for(let E of g)d.push(E==="\\"?"\\backslash":E);else g==="<{>"?d.push("\\{"):g==="<space>"?d.push("~"):g==="<}>"&&d.push("\\}")}else if(g==="\\csname"){for(;t.peek()==="<space>";)t.next();let E="",P=!1,Z=[];do{if(Z.length===0)if(/^#[\d?@]$/.test(t.peek())){let me=t.get().slice(1);Z=qi((a=(r=e?.(me))!=null?r:e?.("?"))!=null?a:"\\placeholder{}",e),g=Z[0]}else g=t.next(),Z=g?[g]:[];P=Z.length===0,!P&&g==="\\endcsname"&&(P=!0,Z.shift()),P||(P=g==="<$>"||g==="<$$>"||g==="<{>"||g==="<}>"||typeof g=="string"&&g.length>1&&g.startsWith("\\")),P||(E+=Z.shift())}while(!P);E&&d.push("\\"+E),d.push(...Z)}else if(g!=="\\endcsname")if(g.length>1&&g.startsWith("#")){let E=g.slice(1);d.push(...qi((u=(l=e?.(E))!=null?l:e?.("?"))!=null?u:"\\placeholder{}",e))}else d.push(g)}return d}function qi(t,e=null){if(!t)return[];let r=[],a="";for(let d of t.toString().split(/\r?\n/)){a&&r.push(a),a=" ";let g=d.match(/((?:\\%)|[^%])*/);g!==null&&r.push(g[0])}let l=new Tl(r.join("")),u=[];do u.push(...qh(l,e));while(!l.end());return u}function R(t){let e="",r=[];for(let a of t)a&&(e&&/^[a-zA-Z\*]/.test(a)&&r.push(e),r.push(a),/^\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(a)&&r.push(" "),e=/\\[a-zA-Z]+\*?$/.test(a)?" ":"");return r.join("")}function q(t,...e){return t.startsWith("\\"),e.length===0?t:R([t,...e.map(r=>`{${r}}`)])}function vr(t){return R(t.map(e=>{var r;return(r={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])!=null?r:e}))}var Yr=class Bx{constructor(e){Bx._registry[e]=this}static createAtom(e,r,a){return Bx._registry[e].createAtom(r,se(r,e),a)}static serialize(e,r){var a;if(!e||e.length===0)return"";if((a=r.skipStyles)!=null&&a){let l=[];for(let u of nm(e)){let d=Bx._registry[u[0].mode];l.push(...d.serialize(u,r))}return R(l)}return R(Wh(e,r))}static getFont(e,r,a){return Bx._registry[e].getFont(r,a)}};Yr._registry={};var ge=Yr;function nm(t){let e=[],r=[],a="NONE";for(let l of t)l.type!=="first"&&(l.mode!==a?(r.length>0&&e.push(r),r=[l],a=l.mode):r.push(l));return r.length>0&&e.push(r),e}function Da(t){if(!t||t.mode!=="math")return"";let{style:e}=t;return!e||!e.variantStyle?"":e.variantStyle==="bold"||e.variantStyle==="bolditalic"?"bold":""}function Ka(t){if(!t)return"";let{style:e}=t;if(!e)return"";let r=e.variant;return r===void 0?"normal":(!["calligraphic","fraktur","double-struck","script","monospace","sans-serif"].includes(r)&&e.variantStyle&&e.variantStyle!=="up"&&(r+="-"+e.variantStyle),r)}function ct(t,e){let r=[],a=[],l;for(let u of t){if(u.type==="first")continue;let d;e==="variant"?d=Ka(u):e==="bold"?d=Da(u):d=u.style[e],d===l?a.push(u):(a.length>0&&r.push(a),a=[u],l=d)}return a.length>0&&r.push(a),r}function im(t,e){var r;let{parent:a}=t[0],l=a?.style.color,u=[];for(let d of nm(t)){let g=e.defaultMode;for(let E of ct(d,"color")){let P=E[0].style,Z=ge._registry[E[0].mode].serialize(E,f(p({},e),{defaultMode:g==="text"?"text":"math"}));!e.skipStyles&&P.color&&P.color!=="none"&&(!a||l!==P.color)?u.push(q("\\textcolor",(r=P.verbatimColor)!=null?r:P.color,R(Z))):u.push(R(Z))}}return u}function Hh(t,e){let{parent:r}=t[0],a=r?.style.backgroundColor;return ct(t,"backgroundColor").map(l=>{var u;if(l.length>0||l[0].type!=="box"){let d=l[0].style;if(d.backgroundColor&&d.backgroundColor!=="none"&&(!r||a!==d.backgroundColor))return q("\\colorbox",(u=d.verbatimBackgroundColor)!=null?u:d.backgroundColor,R(im(l,f(p({},e),{defaultMode:"text"}))))}return R(im(l,e))})}function Wh(t,e){if(t.length===0)return[];let{parent:r}=t[0],a=r?.style.fontSize,l=[];for(let u of ct(t,"fontSize")){let d=u[0].style.fontSize,g=Hh(u,e);g&&(d&&d!=="auto"&&(!r||a!==d)?l.push(["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][d],...g):l.push(...g))}return l}function Oa(t){return t?{mord:"ord",mbin:"bin",mop:"op",mrel:"rel",mopen:"open",mclose:"close",mpunct:"punct",minner:"inner",spacing:"ignore",latex:"latex",composition:"inner",error:"inner",placeholder:"ord",supsub:"ignore"}[t]:void 0}function Qr(t){if(t.length===0)return"ord";let e=Oa(t[0].type),r=Oa(t[t.length-1].type);return e&&e===r?e:"ord"}function Hn(t,e){if(typeof t=="string")return t;if(typeof t=="number"){let r=Math.ceil(100*t)/100;return r===0?"0":r.toString()+(e??"")}return""}var _=class sE{constructor(e,r){var a,l,u,d,g;if(typeof e=="number"?this.value=String.fromCodePoint(e):typeof e=="string"?this.value=e:Y(e)?this.children=e.filter(P=>P!==null):e&&e instanceof sE&&(this.children=[e]),this.children)for(let P of this.children)P.parent=this;this.type=(a=r?.type)!=null?a:"ignore",this.isSelected=r?.isSelected===!0,r!=null&&r.caret&&(this.caret=r.caret),this.classes=(l=r?.classes)!=null?l:"",this.isTight=(u=r?.isTight)!=null?u:!1,r!=null&&r.attributes&&(this.attributes=r.attributes);let E=r?.fontFamily;r!=null&&r.style&&this.value&&(E=(g=ge.getFont((d=r.mode)!=null?d:"math",this,f(p({variant:"normal"},r.style),{letterShapeStyle:r.letterShapeStyle})))!=null?g:void 0),E||(E="Main-Regular"),this._height=0,this._depth=0,this._width=0,this.hasExplicitWidth=!1,this.skew=0,this.italic=0,this.maxFontSize=0,this.scale=1,r?.maxFontSize!==void 0&&(this.maxFontSize=r.maxFontSize),Uh(this,E)}set atomID(e){e===void 0||e.length===0||(this.id=e)}selected(e){if(this.isSelected!==e&&(this.isSelected=e,this.children))for(let r of this.children)r.selected(e)}setStyle(e,r,a){if(r===void 0)return;let l=Hn(r,a);l.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[e]=l)}setTop(e){Number.isFinite(e)&&Math.abs(e)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=Hn(e,"em"),this.height-=e,this.depth+=e)}get left(){var e;return(e=this.cssProperties)!=null&&e["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=Hn(e,"em")))}set right(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=Hn(e,"em")))}set bottom(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-bottom"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-bottom"]=Hn(e,"em")))}get width(){return this._width*this.scale}set width(e){this._width=e,this.hasExplicitWidth=!0}set softWidth(e){}get height(){return this._height*this.scale}set height(e){this._height=e}get depth(){return this._depth*this.scale}set depth(e){this._depth=e}wrap(e){let r=e.parent;if(!r)return this;e.isPhantom&&this.setStyle("opacity",0);let a=e.color;a&&a!==r.color&&this.setStyle("color",a);let l=e.backgroundColor;this.isSelected&&(l=Yc(l)),l&&l!==r.backgroundColor&&(this.setStyle("background-color",l),this.setStyle("display","inline-block"));let u=e.scalingFactor;return this.scale=u,this.skew*=u,this.italic*=u,this}toMarkup(){var e,r,a,l;let u=(e=this.value)!=null?e:"";if(this.children)for(let He of this.children)u+=He.toMarkup();let d="";if(this.svgBody)d=Q0(this.svgBody);else if(this.svgOverlay){d='<span style="',d+="display: inline-block;",d+=`height:${Math.floor(100*(this.height+this.depth))/100}em;`,d+=`vertical-align:${Math.floor(100*this.depth)/100}em;`,d+='">',d+=u,d+="</span>",d+='<svg style="position:absolute;overflow:visible;',d+=`height:${Math.floor(100*(this.height+this.depth))/100}em;`;let He=(r=this.cssProperties)==null?void 0:r.padding;He?(d+=`top:${He};`,d+=`left:${He};`,d+=`width:calc(100% - 2 * ${He} );`):d+="top:0;left:0;width:100%;",d+="z-index:2;",d+='"',this.svgStyle&&(d+=this.svgStyle),d+=` viewBox="0 0 ${Math.floor(100*this.width)/100} ${Math.floor(100*(this.height+this.depth))/100}"`,d+=`>${this.svgOverlay}</svg>`}let g=[],E=this.classes.split(" ");E.push((a={latex:"ML__raw-latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])!=null?a:""),this.caret==="latex"&&E.push("ML__latex-caret"),this.isSelected&&E.push("ML__selected");let P=E.length===1?E[0]:E.filter((He,Xe,wt)=>He.length>0&&wt.indexOf(He)===Xe).join(" ");if(P.length>0&&g.push(`class=${Hi(`"${P}"`)}`),this.id&&g.push(` data-atom-id=${Hi(this.id)}`),this.cssId&&g.push(` id=${Hi(`"${this.cssId.replace(/ /g,"-")}"`)}`),this.attributes&&g.concat(Object.keys(this.attributes).map(He=>`${Dl(He)}=${Hi(this.attributes[He])}`)),this.htmlData){let He=this.htmlData.split(",");for(let Xe of He){let wt=Xe.match(/([^=]+)=(.+$)/);if(wt){let Do=Dl(wt[1]);if(Do)if(Do==="href"){let sr=new URL(wt[2]);if(sr.protocol!=="http:"&&sr.protocol!=="https:")throw new Error(`Invalid URL: ${wt[2]}`);g.push(`href="${wt[2].replace(/"/g,"&quot;")}"`)}else g.push(`data-${Do}=${Hi(wt[2])}`)}else{let Do=Dl(Xe);Do&&g.push(`data-${Do} `)}}}let Z=(l=this.cssProperties)!=null?l:{};this.hasExplicitWidth&&Z.width===void 0&&(Z.width=`${Math.ceil(this._width*100)/100}em`);let me=Object.keys(Z).map(He=>`${He}:${Z[He]}`);if(this.scale!==void 0&&this.scale!==1&&(u.length>0||d.length>0)&&me.push(`font-size: ${Math.ceil(this.scale*1e4)/100}%`),this.htmlStyle)for(let He of this.htmlStyle.split(";")){let Xe=He.match(/([^:]+):(.+$)/);if(Xe){let wt=Xe[1].trim().replace(/ /g,"-");wt&&me.push(`${wt}:${Xe[2]}`)}}me.length>0&&g.push(`style=${Hi(me.join(";"))}`);let _e="";return g.length>0||d.length>0?_e=`<span ${g.join(" ")}>${u}${d}</span>`:_e=u,this.caret==="text"?_e+='<span class="ML__text-caret"></span>':this.caret==="math"&&(_e+='<span class="ML__caret"></span>'),_e}tryCoalesceWith(e){if(this.svgBody||!this.value||e.svgBody||!e.value)return!1;let r=this.children&&this.children.length>0,a=e.children&&e.children.length>0;if(r||a)return!1;if(e.cssProperties||this.cssProperties){for(let E of["border","border-left","border-right","border-right-width","left","margin","margin-left","margin-right","padding","position","width"])if(e.cssProperties&&E in e.cssProperties||this.cssProperties&&E in this.cssProperties)return!1}let l=this.cssProperties?Object.keys(this.cssProperties).length:0,u=e.cssProperties?Object.keys(e.cssProperties).length:0;if(l!==u)return!1;if(l>0){for(let E of Object.keys(this.cssProperties))if(this.cssProperties[E]!==e.cssProperties[E])return!1}let d=this.classes.trim().replace(/\s+/g," ").split(" "),g=e.classes.trim().replace(/\s+/g," ").split(" ");if(d.length!==g.length)return!1;d.sort(),g.sort();for(let[E,P]of d.entries())if(P==="ML__vertical-separator"||P!==g[E])return!1;return this.value+=e.value,this.height=Math.max(this.height,e.height),this.depth=Math.max(this.depth,e.depth),this._width=this._width+e._width,this.maxFontSize=Math.max(this.maxFontSize,e.maxFontSize),this.italic=e.italic,!0}};function Kl(t){if(!t||t.length===0)return[];t[0].children=Kl(t[0].children);let e=[t[0]];for(let r=1;r<t.length;r++)e[e.length-1].tryCoalesceWith(t[r])||(t[r].children=Kl(t[r].children),e.push(t[r]));return e}function _r(t){return t.children&&(t.children=Kl(t.children)),t}function Mr(t,e){if(!t)return new _(null,e);let r=new _(null,{classes:"ML__strut",type:"ignore"});r.setStyle("height",Math.max(0,t.height),"em");let a=[r];if(t.depth!==0){let l=new _(null,{classes:"ML__strut--bottom",type:"ignore"});l.setStyle("height",t.height+t.depth,"em"),l.setStyle("vertical-align",-t.depth,"em"),a.push(l)}return a.push(t),new _(a,f(p({},e),{type:"lift"}))}function Wi(t){let e=em(t)/2,r=new _(null,{maxFontSize:0});return r.height=e+.166,r.depth=e-.166,r.svgBody=t,r}function Uh(t,e){var r;if(t.type==="latex"){t.height=.9,t.depth=.2,t._width=1;return}if(t.value){t.height=-1/0,t.depth=-1/0,t._width=0,t.skew=-1/0,t.italic=-1/0;for(let a=0;a<t.value.length;a++){let l=xr(t.value.codePointAt(a),e);t.height=Math.max(t.height,l.height),t.depth=Math.max(t.depth,l.depth),t._width+=l.width,t.skew=l.skew,t.italic=l.italic}return}if(t.children&&t.children.length>0){let a=-1/0,l=-1/0,u=0;for(let d of t.children)d.height>a&&(a=d.height),d.depth>l&&(l=d.depth),u=Math.max(u,(r=d.maxFontSize)!=null?r:0);t.height=a,t.depth=l,t._width=t.children.reduce((d,g)=>d+g.width,0),t.maxFontSize=u}}function Dl(t){if(t=t.trim().replace(/ /g,"-"),t.length===0)throw new Error("Invalid empty attribute name");if(/[\x20\x09\x0a\x0c\x0d"'>/=\x00-\x1f]/.test(t))throw new Error(`Invalid attribute name "${t}"`);return t}function Hi(t){if(t=t.trim(),t.startsWith('"')&&t.endsWith('"')){if(/"/.test(t.slice(1,-1)))throw new Error(`Invalid attribute value: ${t}`);return t}if(t.startsWith("'")&&t.endsWith("'")){if(/'/.test(t.slice(1,-1)))throw new Error(`Invalid attribute value: ${t}`);return t}if(t.length===0)throw new Error("Invalid empty attribute value");return`"${t.replace(/"/g,"&quot;")}"`}function jh(t){if("individualShift"in t){let e=t.individualShift,r=e[0];if(r==null)return[null,0];let a=[r],l=-r.shift-r.box.depth,u=l;for(let d=1;d<e.length;d++){let g=e[d],E=-g.shift-u-g.box.depth,P=E-(r.box.height+r.box.depth);u=u+E,a.push(P),a.push(g),r=g}return[a,l]}if("top"in t){let e=t.top;for(let r of t.children)e-=typeof r=="number"?r:r.box.height+r.box.depth;return[t.children,e]}else{if("bottom"in t)return[t.children,-t.bottom];if("firstBaseline"in t){let e=t.firstBaseline[0];if(typeof e=="number")throw new Error("First child must be an element.");return[t.firstBaseline,-e.box.depth]}else if("shift"in t){let e=t.children[0];if(typeof e=="number")throw new Error("First child must be an element.");return[t.children,-e.box.depth-t.shift]}}return[null,0]}function Jh(t){var e;let[r,a]=jh(t);if(!r)return[[],0,0];let l=new _(null,{classes:"ML__pstrut"}),u=0;for(let Xe of r)if(typeof Xe!="number"){let wt=Xe.box;u=Math.max(u,wt.maxFontSize,wt.height)}u+=2,l.height=u,l.setStyle("height",u,"em");let d=[],g=a,E=a,P=a,Z=0;for(let Xe of r){if(typeof Xe=="number")P+=Xe;else{let wt=Xe.box,Do=(e=Xe.classes)!=null?e:[],sr=new _([l,wt],{classes:Do.join(" "),style:Xe.style});wt.setStyle("height",wt.height+wt.depth,"em"),wt.setStyle("display","inline-block"),sr.setStyle("top",-u-P-wt.depth,"em"),Xe.marginLeft&&sr.setStyle("margin-left",Xe.marginLeft,"em"),Xe.marginRight&&sr.setStyle("margin-right",Xe.marginRight,"em"),d.push(sr),P+=wt.height+wt.depth,Z=Math.max(Z,sr.width)}g=Math.min(g,P),E=Math.max(E,P)}d.forEach(Xe=>{Xe.softWidth=Z});let me=new _(d,{classes:"ML__vlist"});if(me.softWidth=Z,me.height=E,me.setStyle("height",E,"em"),g>=0)return[[new _(me,{classes:"ML__vlist-r"})],E,-g];let _e=new _(new _(null),{classes:"ML__vlist"});_e.height=-g,_e.setStyle("height",-g,"em");let He=new _(8203,{classes:"ML__vlist-s",maxFontSize:0});return He.softWidth=0,He.height=0,He.depth=0,[[new _([me,He],{classes:"ML__vlist-r"}),new _(_e,{classes:"ML__vlist-r"})],E,-g]}var Q=class extends _{constructor(t,e){var r;let[a,l,u]=Jh(t);super(a.length===1?a[0]:a,{type:e?.type,classes:((r=e?.classes)!=null?r:"")+" ML__vlist-t"+(a.length===2?" ML__vlist-t2":"")}),this.height=l,this.depth=u,this.softWidth=a.reduce((d,g)=>Math.max(d,g.width),0)}};function om(t,e){var r,a,l,u,d;let g=t.metrics,E=new _(e.base),P=(r=e.baseShift)!=null?r:0,Z=(a=e.slant)!=null?a:0,me=0,_e=0;e.above&&(me=(l=e.aboveShift)!=null?l:Math.max(g.bigOpSpacing1,g.bigOpSpacing3-e.above.depth)),e.below&&(_e=(u=e.belowShift)!=null?u:Math.max(g.bigOpSpacing2,g.bigOpSpacing4-e.below.height));let He=null;if(e.below&&e.above){let Xe=g.bigOpSpacing5+e.below.height+e.below.depth+_e+E.depth+P;He=new Q({bottom:Xe,children:[g.bigOpSpacing5,{box:e.below,marginLeft:-Z,classes:["ML__center"]},_e,{box:E,classes:["ML__center"]},me,{box:e.above,marginLeft:Z,classes:["ML__center"]},g.bigOpSpacing5]}).wrap(t)}else if(e.below&&!e.above)He=new Q({top:E.height-P,children:[g.bigOpSpacing5,{box:e.below,marginLeft:-Z,classes:["ML__center"]},_e,{box:E,classes:["ML__center"]}]}).wrap(t);else if(!e.below&&e.above){let Xe=E.depth+P;He=new Q({bottom:Xe,children:[{box:E,classes:["ML__center"]},me,{box:e.above,marginLeft:Z,classes:["ML__center"]},g.bigOpSpacing5]}).wrap(t)}else{let Xe=E.depth+P;He=new Q({bottom:Xe,children:[{box:E},g.bigOpSpacing5]}).wrap(t)}return new _(He,{type:(d=e.type)!=null?d:"op"})}var Ba=7,Un=6,jn=5,wr=4,ei=3,Ne=2,kr=1,Se=0,Kt=class{constructor(t,e,r){this.id=t,this.sizeDelta=e,this.cramped=r;let a={"-4":2,"-3":1,0:0}[e];this.metrics=Object.keys(Al).reduce((l,u)=>f(p({},l),{[u]:Al[u][a]}),{})}getFontSize(t){return Math.max(1,t+this.sizeDelta)}get sup(){return ut[[Se,kr,Se,kr,Ne,ei,Ne,ei][this.id]]}get sub(){return ut[[Se,Se,Se,Se,Ne,Ne,Ne,Ne][this.id]]}get fracNum(){return ut[[Se,kr,Se,kr,Ne,ei,wr,jn][this.id]]}get fracDen(){return ut[[Se,Se,Se,Se,Ne,Ne,wr,wr][this.id]]}get cramp(){return ut[[Se,Se,Ne,Ne,wr,wr,Un,Un][this.id]]}get isTight(){return this.sizeDelta<0}},Wn={7:new Kt(Ba,0,!1),6:new Kt(Un,0,!0),5:new Kt(jn,0,!1),4:new Kt(wr,0,!0),3:new Kt(ei,-3,!1),2:new Kt(Ne,-3,!0),1:new Kt(kr,-4,!1),0:new Kt(Se,-4,!0)},ut=f(p({},Wn),{displaystyle:Wn[Ba],textstyle:Wn[jn],scriptstyle:Wn[ei],scriptscriptstyle:Wn[kr]});function Bl(t,e){var r;if(!t)return 0;let a={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:Dt,bp:803/800,dd:1238/1157,pc:12,in:72.27,mu:10/18}[(r=t.unit)!=null?r:"pt"];if(Number.isFinite(e)){let l=10**e;return Math.round(t.dimension/Dt*a*l)/l}return t.dimension*a}function Ra(t,e){if(t===null)return 0;let r=Bl(t)/Dt;if(Number.isFinite(e)){let a=10**e;return Math.round(r*a)/a}return r}function Ol(t){var e;return`${t.dimension}${(e=t.unit)!=null?e:"pt"}`}function Gh(t){let e=Ol(t.glue);return t.grow&&t.grow.dimension!==0&&(e+=` plus ${Ol(t.grow)}`),t.shrink&&t.shrink.dimension!==0&&(e+=` minus ${Ol(t.shrink)}`),e}function be(t){var e,r;if(t==null)return null;let a="";if("dimension"in t&&(a=`${t.dimension}${(e=t.unit)!=null?e:"pt"}`),"glue"in t&&(a=Gh(t)),"number"in t)if(!("base"in t)||t.base==="decimal")a=Number(t.number).toString();else if(t.base==="alpha")a=`\`${String.fromCodePoint(t.number)}`;else{let l=Math.round(t.number)>>>0;t.base==="hexadecimal"?(a=Number(l).toString(16).toUpperCase(),l<=255?a=a.padStart(2,"0"):l<=65535?a=a.padStart(4,"0"):l<=16777215?a=a.padStart(6,"0"):a=a.padStart(8,"0"),a=`"${a}`):t.base==="octal"&&(a=Number(l).toString(8),l<=63?a=a.padStart(2,"0"):l<=30583?a=a.padStart(4,"0"):a=a.padStart(8,"0"),a=`'${a}`)}return"register"in t&&("factor"in t&&(t.factor===-1?a="-":t.factor!==1&&(a=Number(t.factor).toString())),"global"in t&&t.global&&(a+="\\global"),a+=`\\${t.register}`),"string"in t&&(a=t.string),(r=t.relax)!=null&&r&&(a+="\\relax"),a}function dt(t,e){return t==null?null:"number"in t?f(p({},t),{number:t.number*e}):"register"in t?"factor"in t&&t.factor?f(p({},t),{factor:t.factor*e}):f(p({},t),{factor:e}):"dimension"in t?f(p({},t),{dimension:t.dimension*e}):"glue"in t?t.shrink&&t.grow?{glue:dt(t.glue,e),shrink:dt(t.shrink,e),grow:dt(t.grow,e)}:t.shrink?{glue:dt(t.glue,e),shrink:dt(t.shrink,e)}:t.grow?{glue:dt(t.glue,e),grow:dt(t.grow,e)}:{glue:dt(t.glue,e)}:null}var Xh={"p@":{dimension:1},"z@":{dimension:0},maxdimen:{dimension:16383.99999},hfuzz:{dimension:.1},vfuzz:{dimension:.1},overfullrule:{dimension:5},hsize:{dimension:6.5,unit:"in"},vsize:{dimension:8.9,unit:"in"},parindent:{dimension:20},maxdepth:{dimension:4},splitmaxdepth:{register:"maxdimen"},boxmaxdepth:{register:"maxdimen"},delimitershortfall:{dimension:5},nulldelimiterspace:{dimension:1.2,unit:"pt"},scriptspace:{dimension:.5},topskip:{dimension:10},splittopskip:{dimension:10},normalbaselineskip:{dimension:12},normallineskip:{dimension:1},normallineskiplimit:{dimension:0},jot:{dimension:3},doublerulesep:{dimension:2},arrayrulewidth:{dimension:.4},arraycolsep:{dimension:5},fboxsep:{dimension:3},fboxrule:{dimension:.4},"z@skip":{glue:{dimension:0},shrink:{dimension:0},grow:{dimension:0}},hideskip:{glue:{dimension:-1e3},grow:{dimension:1,unit:"fill"}},"@flushglue":{glue:{dimension:0},grow:{dimension:1,unit:"fill"}},parskip:{glue:{dimension:0},grow:{dimension:1}},abovedisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},abovedisplayshortskip:{glue:{dimension:0},grow:{dimension:3}},belowdisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},belowdisplayshortskip:{glue:{dimension:7},grow:{dimension:3},shrink:{dimension:4}},parfillskip:{glue:{dimension:0},grow:{dimension:1,unit:"fil"}},thinmuskip:{glue:{dimension:3,unit:"mu"}},medmuskip:{glue:{dimension:4,unit:"mu"},grow:{dimension:2,unit:"mu"},shrink:{dimension:4,unit:"mu"}},thickmuskip:{glue:{dimension:5,unit:"mu"},grow:{dimension:5,unit:"mu"}},smallskipamount:{glue:{dimension:3},grow:{dimension:1},shrink:{dimension:1}},medskipamount:{glue:{dimension:6},grow:{dimension:2},shrink:{dimension:3}},bigskipamount:{glue:{dimension:12},grow:{dimension:2},shrink:{dimension:4}},pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:1,month:new Date().getMonth()+1,day:new Date().getDate(),year:new Date().getFullYear()};function Pa(){return p({},Xh)}function Jn(){return{registers:Pa(),smartFence:!1,renderPlaceholder:void 0,placeholderSymbol:"",letterShapeStyle:N.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,colorMap:Hr,backgroundColorMap:Si,getMacro:t=>Ti(t,Ei())}}var O=class oE{constructor(e,r){var a,l,u,d,g,E,P,Z,me,_e,He,Xe,wt,Do,sr;let Ko;e!=null&&e.parent?(this.parent=e.parent,Ko=e.parent,this.registers={}):(Ko=p(p({},Jn()),(a=e?.from)!=null?a:{}),this.registers=Ko.registers),Ko.atomIdsSettings&&(this.atomIdsSettings=p({},Ko.atomIdsSettings)),this.renderPlaceholder=Ko.renderPlaceholder,this.isPhantom=(d=(u=e?.isPhantom)!=null?u:(l=this.parent)==null?void 0:l.isPhantom)!=null?d:!1,this.letterShapeStyle=Ko.letterShapeStyle,this.minFontScale=Ko.minFontScale,this.maxMatrixCols=Ko.maxMatrixCols,r!=null&&r.color&&r.color!=="none"?this.color=r.color:this.color=(E=(g=this.parent)==null?void 0:g.color)!=null?E:"",r!=null&&r.backgroundColor&&r.backgroundColor!=="none"?this.backgroundColor=r.backgroundColor:this.backgroundColor=(Z=(P=this.parent)==null?void 0:P.backgroundColor)!=null?Z:"",r!=null&&r.fontSize&&r.fontSize!=="auto"&&r.fontSize!==((me=this.parent)==null?void 0:me.size)?this.size=r.fontSize:this.size=(He=(_e=this.parent)==null?void 0:_e.size)!=null?He:Vi;let Bs=(wt=(Xe=this.parent)==null?void 0:Xe.mathstyle)!=null?wt:ut.displaystyle;if(typeof e?.mathstyle=="string"){if(Ko instanceof oE)switch(e.mathstyle){case"cramp":Bs=Bs.cramp;break;case"superscript":Bs=Bs.sup;break;case"subscript":Bs=Bs.sub;break;case"numerator":Bs=Bs.fracNum;break;case"denominator":Bs=Bs.fracDen;break}switch(e.mathstyle){case"textstyle":Bs=ut.textstyle;break;case"displaystyle":Bs=ut.displaystyle;break;case"scriptstyle":Bs=ut.scriptstyle;break;case"scriptscriptstyle":Bs=ut.scriptscriptstyle;break}}this.mathstyle=Bs,this.smartFence=Ko.smartFence,this.placeholderSymbol=Ko.placeholderSymbol,this.colorMap=(Do=Ko.colorMap)!=null?Do:th=>th,this.backgroundColorMap=(sr=Ko.backgroundColorMap)!=null?sr:th=>th,this.getMacro=Ko.getMacro,this.parent!==void 0||this.registers}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if(typeof this.atomIdsSettings.seed!="number")return`${Date.now().toString(36).slice(-2)}${Math.floor(Math.random()*1e5).toString(36)}`;let e=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,e}scale(e){return e*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return this.mathstyle.id===Ba||this.mathstyle.id===Un}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get metrics(){return this.mathstyle.metrics}get effectiveFontSize(){return Math.max(qn[Math.max(1,this.size+this.mathstyle.sizeDelta)],this.minFontScale)}getRegister(e){var r;if((r=this.registers)!=null&&r[e])return this.registers[e];if(this.parent)return this.parent.getRegister(e)}getRegisterAsNumber(e){let r=this.getRegister(e);if(typeof r=="number")return r;if(typeof r=="string")return Number(r)}getRegisterAsGlue(e){var r;if((r=this.registers)!=null&&r[e]){let a=this.registers[e];return typeof a=="object"&&"glue"in a?a:typeof a=="object"&&"dimension"in a?{glue:{dimension:a.dimension}}:typeof a=="number"?{glue:{dimension:a}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(e)}getRegisterAsEm(e,r){return Ra(this.getRegisterAsDimension(e),r)}getRegisterAsDimension(e){var r;if((r=this.registers)!=null&&r[e]){let a=this.registers[e];return typeof a=="object"&&"glue"in a?a.glue:typeof a=="object"&&"dimension"in a?a:typeof a=="number"?{dimension:a}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(e)}setRegister(e,r){if(r===void 0){delete this.registers[e];return}this.registers[e]=r}evaluate(e){if(!e||!("register"in e))return e;let r=this;if("global"in e&&e.global)for(;r.parent;)r=r.parent;let a=1;"factor"in e&&e.factor!==1&&e.factor!==void 0&&(a=e.factor);let l=r.getRegister(e.register);if(l===void 0)return;if(typeof l=="string")return{string:Number(l).toString()+l};if(typeof l=="number")return{number:a*l};let u=r.evaluate(l);if(u!==void 0)return"string"in u?{string:Number(l).toString()+u.string}:"number"in u?{number:a*u.number}:"dimension"in u?f(p({},u),{dimension:a*u.dimension}):"glue"in u?f(p({},u),{glue:f(p({},u.glue),{dimension:a*u.glue.dimension}),shrink:u.shrink?f(p({},u.shrink),{dimension:a*u.shrink.dimension}):void 0,grow:u.grow?f(p({},u.grow),{dimension:a*u.grow.dimension}):void 0}):e}toDimension(e){let r=this.evaluate(e);if(r===void 0)return null;if("dimension"in r)return r;if("glue"in r)return r.glue;if("number"in r)return{dimension:r.number};if("string"in r){let a=parseFloat(r.string),l=r.string.match(/(mm|cm|ex|px|em|bp|dd|pc|in|mu)$/);return l?{dimension:a,unit:l[0]}:{dimension:a}}return null}toEm(e,r){if(e===null)return 0;let a=this.toDimension(e);return a===null?0:Bl(a,r)/Dt}toNumber(e){if(e===null)return null;let r=this.evaluate(e);return r===void 0?null:"number"in r?r.number:"dimension"in r?r.dimension:"glue"in r?r.glue.dimension:"string"in r?Number(r.string):null}toColor(e){var r,a;if(e===null)return null;let l=this.evaluate(e);return l===void 0?null:"string"in l?(a=(r=this.colorMap)==null?void 0:r.call(this,l.string))!=null?a:l.string:null}toBackgroundColor(e){var r,a;if(e===null)return null;let l=this.evaluate(e);return l===void 0?null:"string"in l?(a=(r=this.backgroundColorMap)==null?void 0:r.call(this,l.string))!=null?a:l.string:null}},Lr=["body","above","below","superscript","subscript"];function Sr(t){return typeof t=="string"&&Lr.includes(t)}function We(t){return t!==void 0&&Array.isArray(t)&&t.length===2}var b=class j7{constructor(e){this.isRoot=!1;var r,a,l,u,d,g,E;this.type=e.type,typeof e.value=="string"&&(this.value=e.value),this.command=(a=(r=e.command)!=null?r:this.value)!=null?a:"",this.mode=(l=e.mode)!=null?l:"math",e.isFunction&&(this.isFunction=!0),(e.isRoot||this.type==="root")&&(this.isRoot=!0),e.limits&&(this.subsupPlacement=e.limits),this.style=p({},(u=e.style)!=null?u:{}),this.displayContainsHighlight=(d=e.displayContainsHighlight)!=null?d:!1,this.captureSelection=(g=e.captureSelection)!=null?g:!1,this.skipBoundary=(E=e.skipBoundary)!=null?E:!1,e.verbatimLatex!==void 0&&e.verbatimLatex!==null&&(this.verbatimLatex=e.verbatimLatex),e.args&&(this.args=e.args),e.body&&(this.body=e.body),this._changeCounter=0}static createBox(e,r,a){var l;if(!r)return null;let u=Zh(r),d=[];for(let E of u){let P=E[0].style,Z=Yh(e,E,{style:{color:P.color,backgroundColor:P.backgroundColor,fontSize:P.fontSize}});Z&&d.push(Z)}if(d.length===0)return null;let g=((l=a?.classes)!=null?l:"").trim();return d.length===1&&!g&&!(a!=null&&a.type)?d[0].wrap(e):new _(d,{classes:g,type:a?.type}).wrap(e)}static serialize(e,r){return ge.serialize(e,r)}static commonAncestor(e,r){if(e===r||e.parent===r.parent)return e.parent;let a=new WeakSet,{parent:l}=e;for(;l;)a.add(l),l=l.parent;for(l=r.parent;l;){if(a.has(l))return l;l=l.parent}}static fromJson(e){return typeof e=="string"?new j7({type:"mord",value:e,mode:"math"}):new j7(e)}toJson(){if(this._json)return this._json;let e={};if(this.type&&(e.type=this.type),this.mode!=="math"&&(e.mode=this.mode),this.command&&this.command!==this.value&&(e.command=this.command),this.value!==void 0&&(e.value=this.value),this.style&&Object.keys(this.style).length>0&&(e.style=p({},this.style)),this.verbatimLatex!==void 0&&(e.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(e.explicitSubsupPlacement=!0),this.isFunction&&(e.isFunction=!0),this.displayContainsHighlight&&(e.displayContainsHighlight=!0),this.skipBoundary&&(e.skipBoundary=!0),this.captureSelection&&(e.captureSelection=!0),this.args&&(e.args=Qh(this.args)),this._branches)for(let r of Object.keys(this._branches))this._branches[r]&&(e[r]=this._branches[r].filter(a=>a.type!=="first").map(a=>a.toJson()));return e.type==="mord"&&Object.keys(e).length===2&&"value"in e?e.value:(this._json=e,e)}get changeCounter(){return this.parent?this.parent.changeCounter:this._changeCounter}set isDirty(e){e&&(this._json=void 0,this.parent||this._changeCounter++,"verbatimLatex"in this&&(this.verbatimLatex=void 0),this._children=void 0,this.parent&&(this.parent.isDirty=!0))}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);return r!=null&&r.serialize?r.serialize(this,e):this.body&&this.command?R([q(this.command,this.bodyToLatex(e)),this.supsubToLatex(e)]):this.body?R([this.bodyToLatex(e),this.supsubToLatex(e)]):!this.value||this.value===""?"":this.command}bodyToLatex(e){var r;let a=(r=e.defaultMode)!=null?r:this.mode==="math"?"math":"text";return ge.serialize(this.body,f(p({},e),{defaultMode:a}))}aboveToLatex(e){return ge.serialize(this.above,e)}belowToLatex(e){return ge.serialize(this.below,e)}supsubToLatex(e){let r="";if(e=f(p({},e),{defaultMode:"math"}),this.branch("subscript")!==void 0){let a=ge.serialize(this.subscript,e);a.length===0?r+="_{}":a.length===1?/^[0-9]$/.test(a)?r+=`_${a}`:r+=`_{${a}}`:r+=`_{${a}}`}if(this.branch("superscript")!==void 0){let a=ge.serialize(this.superscript,e);a.length===0?r+="^{}":a.length===1?a===""?r+="^\\prime ":a===""?r+="^\\doubleprime ":/^[0-9]$/.test(a)?r+=`^${a}`:r+=`^{${a}}`:r+=`^{${a}}`}return r}get treeDepth(){let e=1,r=this.parent;for(;r;)r=r.parent,e+=1;return e}get inCaptureSelection(){let e=this;for(;e;){if(e.captureSelection)return!0;e=e.parent}return!1}get parentPrompt(){let e=this.parent;for(;e;){if(e.type==="prompt"&&!e.captureSelection)return e;e=e.parent}return null}branch(e){if(Sr(e)&&this._branches)return this._branches[e]}get branches(){if(!this._branches)return[];let e=[];for(let r of Lr)this._branches[r]&&e.push(r);return e}createBranch(e){return Sr(e),Sr(e)?(this._branches?this._branches[e]||(this._branches[e]=[this.makeFirstAtom(e)]):this._branches={[e]:[this.makeFirstAtom(e)]},this.isDirty=!0,this._branches[e]):[]}get row(){return We(this.parentBranch)?this.parentBranch[0]:-1}get col(){return We(this.parentBranch)?this.parentBranch[1]:-1}get body(){var e;return(e=this._branches)==null?void 0:e.body}set body(e){this.setChildren(e,"body")}get superscript(){var e;return(e=this._branches)==null?void 0:e.superscript}set superscript(e){this.setChildren(e,"superscript")}get subscript(){var e;return(e=this._branches)==null?void 0:e.subscript}set subscript(e){this.setChildren(e,"subscript")}get above(){var e;return(e=this._branches)==null?void 0:e.above}set above(e){this.setChildren(e,"above")}get below(){var e;return(e=this._branches)==null?void 0:e.below}set below(e){this.setChildren(e,"below")}applyStyle(e,r){this.isDirty=!0,r!=null&&r.unstyledOnly?(e.color&&!this.style.color&&(this.style.color=e.color),e.backgroundColor&&!this.style.backgroundColor&&(this.style.backgroundColor=e.backgroundColor),e.fontFamily&&!this.style.fontFamily&&(this.style.fontFamily=e.fontFamily),e.fontShape&&!this.style.fontShape&&(this.style.fontShape=e.fontShape),e.fontSeries&&!this.style.fontSeries&&(this.style.fontSeries=e.fontSeries),e.fontSize&&!this.style.fontSize&&(this.style.fontSize=e.fontSize),e.variant&&!this.style.variant&&(this.style.variant=e.variant),e.variantStyle&&!this.style.variantStyle&&(this.style.variantStyle=e.variantStyle)):this.style=p(p({},this.style),e),this.style.fontFamily==="none"&&delete this.style.fontFamily,this.style.fontShape==="auto"&&delete this.style.fontShape,this.style.fontSeries==="auto"&&delete this.style.fontSeries,this.style.color==="none"&&(delete this.style.color,delete this.style.verbatimColor),this.style.backgroundColor==="none"&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),this.style.fontSize==="auto"&&delete this.style.fontSize;for(let a of this.children)a.applyStyle(e,r)}getInitialBaseElement(){var e,r,a;return this.hasEmptyBranch("body")?this:((e=this.body)==null||e[0].type,(a=(r=this.body[1])==null?void 0:r.getInitialBaseElement())!=null?a:this)}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){return this.type==="leftright"||this.type==="genfrac"||this.type==="subsup"||this.type==="delim"||this.type==="array"||this.type==="surd"?!1:this.getFinalBaseElement().type==="mord"}hasEmptyBranch(e){let r=this.branch(e);return r?(r.length>0,r[0].type,r.length===1):!0}setChildren(e,r){var a;if(!e||(Sr(r),!Sr(r)))return;let l=((a=e[0])==null?void 0:a.type)==="first"?[...e]:[this.makeFirstAtom(r),...e];this._branches?this._branches[r]=l:this._branches={[r]:l};for(let u of e)u.parent=this,u.parentBranch=r;this.isDirty=!0}makeFirstAtom(e){let r=new j7({type:"first",mode:this.mode});return r.parent=this,r.parentBranch=e,r}addChild(e,r){e.type,this.createBranch(r).push(e),this.isDirty=!0,e.parent=this,e.parentBranch=r}addChildBefore(e,r){r.parentBranch;let a=this.createBranch(r.parentBranch);a.splice(a.indexOf(r),0,e),this.isDirty=!0,e.parent=this,e.parentBranch=r.parentBranch}addChildAfter(e,r){r.parentBranch;let a=this.createBranch(r.parentBranch);a.splice(a.indexOf(r)+1,0,e),this.isDirty=!0,e.parent=this,e.parentBranch=r.parentBranch}addChildren(e,r){let a=this.createBranch(r);for(let l of e)l.parent=this,l.parentBranch=r,a.push(l);this.isDirty=!0}addChildrenAfter(e,r){e.length===0||e[0].type,r.parentBranch;let a=this.createBranch(r.parentBranch);a.splice(a.indexOf(r)+1,0,...e),this.isDirty=!0;for(let l of e)l.parent=this,l.parentBranch=r.parentBranch;return e[e.length-1]}removeBranch(e){let r=this.branch(e);if(Sr(e)&&(this._branches[e]=void 0),!r)return[];for(let u of r)u.parent=void 0,u.parentBranch=void 0;r[0].type;let[a,...l]=r;return this.isDirty=!0,l}removeChild(e){if(e.parent,e.type==="first")return;let r=this.branch(e.parentBranch),a=r.indexOf(e);r.splice(a,1),this.isDirty=!0,e.parent=void 0,e.parentBranch=void 0}get siblings(){return this.parent?this.parent.branch(this.parentBranch):[]}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:e}=this;return e[e.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return this.siblings.length===1}get leftSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)-1]}get rightSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)+1]}get hasChildren(){return!!(this._branches&&this.children.length>0)}get firstChild(){return this.hasChildren,this.children[0]}get lastChild(){this.hasChildren;let{children:e}=this;return e[e.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let e=[];for(let r of Lr)if(this._branches[r])for(let a of this._branches[r])e.push(...a.children),e.push(a);return this._children=e,e}render(e){if(this.type==="first"&&!e.atomIdsSettings)return null;let r=se(this.command,this.mode);if(r!=null&&r.render)return r.render(this,e);let a=new O({parent:e},this.style),l=this.createBox(a,{classes:this.parent?"":"ML__base"});return l?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(l=this.attachSupsub(a,{base:l})),l.wrap(a)):null}attachSupsub(e,r){var a;let l=r.base,u=this.superscript,d=this.subscript;if(!u&&!d)return l;let g=null,E=null,P=(a=r.isCharacterBox)!=null?a:this.isCharacterBox(),Z=0;if(u){let wt=new O({parent:e,mathstyle:"superscript"});g=j7.createBox(wt,u),P||(Z=l.height-e.metrics.supDrop*wt.scalingFactor)}let me=0;if(d){let wt=new O({parent:e,mathstyle:"subscript"});E=j7.createBox(wt,d),P||(me=l.depth+e.metrics.subDrop*wt.scalingFactor)}let _e;e.isDisplayStyle?_e=e.metrics.sup1:e.isCramped?_e=e.metrics.sup3:_e=e.metrics.sup2;let He=.5/Dt/e.scalingFactor,Xe=null;if(E&&g){Z=Math.max(Z,_e,g.depth+.25*e.metrics.xHeight),me=Math.max(me,e.metrics.sub2);let wt=e.metrics.defaultRuleThickness;if(Z-g.depth-(E.height-me)<4*wt){me=4*wt-(Z-g.depth)+E.height;let sr=.8*e.metrics.xHeight-(Z-g.depth);sr>0&&(Z+=sr,me-=sr)}let Do=this.type==="extensible-symbol"&&l.italic?-l.italic:0;Xe=new Q({individualShift:[{box:E,shift:me,marginLeft:Do},{box:g,shift:-Z}]}).wrap(e)}else E&&!g?(me=Math.max(me,e.metrics.sub1,E.height-.8*tt),Xe=new Q({shift:me,children:[{box:E,marginRight:He,marginLeft:this.isCharacterBox()?-l.italic:0}]})):!E&&g&&(Z=Math.max(Z,_e,g.depth+.25*tt),Xe=new Q({shift:-Z,children:[{box:g,marginRight:He}]}));return new _([l,new _(Xe,{caret:this.caret,isSelected:this.isSelected,classes:"ML__msubsup"})],{type:r.type})}attachLimits(e,r){let a=this.superscript?j7.createBox(new O({parent:e,mathstyle:"superscript"},this.style),this.superscript):null,l=this.subscript?j7.createBox(new O({parent:e,mathstyle:"subscript"},this.style),this.subscript):null;return!a&&!l?r.base.wrap(e):om(e,f(p({},r),{above:a,below:l}))}bind(e,r){if(!r||e.isPhantom||this.value==="")return r;let a=this.parent;for(;a&&!a.captureSelection;)a=a.parent;return a!=null&&a.captureSelection||(this.id||(this.id=e.makeID()),r.atomID=this.id),r}createBox(e,r){var a,l,u,d;let g=(a=this.value)!=null?a:this.body,E=(l=r?.boxType)!=null?l:Oa(this.type),P=(u=r?.classes)!=null?u:"";this.mode==="text"&&(P+=" ML__text");let Z=typeof g=="string"||g===void 0?new _(g??null,{type:E,isSelected:this.isSelected,mode:this.mode,maxFontSize:e.scalingFactor,style:f(p({variant:"normal"},this.style),{fontSize:Math.max(1,e.size+e.mathstyle.sizeDelta)}),letterShapeStyle:e.letterShapeStyle,classes:P}):(d=j7.createBox(e,g,{type:E,classes:P}))!=null?d:new _(null);return e.isTight&&(Z.isTight=!0),(this.mode!=="math"||this.style.variant==="main")&&(Z.italic=0),Z.right=Z.italic,this.bind(e,Z),this.caret&&!this.superscript&&!this.subscript&&(Z.caret=this.caret),Z}isDigit(){var e;return this.type==="mord"&&this.value?/^[\d,\.]$/.test(this.value):this.type==="group"&&((e=this.body)==null?void 0:e.length)===2?this.body[0].type==="first"&&this.body[1].value===",":!1}asDigit(){var e;return this.type==="mord"&&this.value&&/^[\d,\.]$/.test(this.value)?this.value:this.type==="group"&&((e=this.body)==null?void 0:e.length)===2&&this.body[0].type==="first"&&this.body[1].value===","?".":""}};function Zh(t){let e,r=[],a=[];for(let l of t)if(l.type==="first"&&a.push(l),!e&&!l.style)a.push(l);else{let u=l.style;e&&u.color===e.color&&u.backgroundColor===e.backgroundColor&&u.fontSize===e.fontSize?a.push(l):(a.length>0&&r.push(a),a=[l],e=u)}return a.length>0&&r.push(a),r}function Yh(t,e,r){var a,l,u,d,g;if(!e||e.length===0)return null;let E=new O({parent:t},r.style),P=!((a=E.atomIdsSettings)!=null&&a.groupNumbers),Z=[];if(e.length===1){let _e=e[0],He=_e.render(E);He&&(P&&_e.isSelected&&He.selected(!0),Z=[He])}else{let _e="",He=!0;for(let Xe of e){(l=E.atomIdsSettings)!=null&&l.groupNumbers&&_e&&(He&&Xe.isDigit()||!He&&Rl(Xe))&&(E.atomIdsSettings.overrideID=_e);let wt=Xe.render(E);E.atomIdsSettings&&(E.atomIdsSettings.overrideID=void 0),wt&&((u=E.atomIdsSettings)!=null&&u.groupNumbers&&((Xe.isDigit()||Rl(Xe))&&(!_e||He!==Xe.isDigit())&&(He=Xe.isDigit(),_e=(d=Xe.id)!=null?d:""),_e&&(!(Xe.isDigit()||Rl(Xe))||!Xe.hasEmptyBranch("superscript")||!Xe.hasEmptyBranch("subscript"))&&(_e="")),P&&Xe.isSelected&&wt.selected(!0),Z.push(wt))}}if(Z.length===0)return null;let me=new _(Z,f(p({isTight:E.isTight},r),{type:(g=r.type)!=null?g:"lift"}));return me.isSelected=Z.every(_e=>_e.isSelected),me.wrap(E)}function Rl(t){return t.mode==="text"}function Qh(t){return t.map(e=>e===null?"<null>":Array.isArray(e)&&e[0]instanceof b?{atoms:e.map(r=>r.toJson())}:typeof e=="object"&&"group"in e?{group:e.group.map(r=>r.toJson())}:e)}var $e=class lE extends b{constructor(e,r,a){super({type:"text",command:e,mode:"text",displayContainsHighlight:!0}),this.value=r,this.verbatimLatex=r,this.applyStyle(a)}static fromJson(e){return new lE(e.command,e.value,e.style)}render(e){let r=this.createBox(e);return this.caret&&(r.caret=this.caret),r}_serialize(e){var r;return(r=this.verbatimLatex)!=null?r:Us("text",this.value.codePointAt(0))}};function am(t,e){if(t.direction===e.direction){let r=t.ranges.length;if(e.ranges.length===r){let a=0;for(;a<r&&ef(t.ranges[a],e.ranges[a])==="equal";)a++;return a===r?"equal":"different"}}return"different"}function ef(t,e){return t[0]===e[0]&&t[1]===e[1]?"equal":"different"}function le(t){let e=1/0,r=-1/0;for(let a of t.ranges)e=Math.min(e,a[0],a[1]),r=Math.max(r,a[0],a[1]);return[e,r]}function Ot(t){return typeof t=="number"&&!Number.isNaN(t)}function ti(t){return Array.isArray(t)&&t.length===2}function Ui(t){return t!=null&&typeof t=="object"&&"ranges"in t&&Array.isArray(t.ranges)}function sm(t,e){let r=t.at(e),a;if(r){a=r.mode;let l=r.parent;for(;!a&&l;)l&&(a=l.mode),l=l.parent}return a}function tf(t,e){if(!e)return"";if(typeof e=="string")return e;if(!t||e.after===void 0)return e.value;let r=!1,a=!1,l=!1,u=!1,d=!1,g=!1,E=!1,P=!1,Z=!1,me=!1,_e=!1,He=!1,Xe=!1,wt=!1,Do=!1,sr=t[0],Ko=0;for(;sr!=null&&sr.type&&/^(subsup|placeholder)$/.test(sr.type);)Ko+=1,sr=t[Ko];return r=!sr||sr.type==="first",sr&&(wt=sr.mode==="text",a=!wt&&sr.type==="mord"&&Io.test(sr.value),l=!wt&&sr.type==="mord"&&/\d+$/.test(sr.value),u=!wt&&sr.isFunction,d=sr.type==="genfrac",g=sr.type==="surd",E=sr.type==="mbin",P=sr.type==="mrel",Z=sr.type==="mop"||sr.type==="operator"||sr.type==="extensible-symbol",me=sr.type==="mpunct"||sr.type==="minner",_e=sr.type==="array",He=sr.type==="mopen",Xe=sr.type==="mclose"||sr.type==="leftright",Do=sr.type==="space"),e.after.includes("nothing")&&r||e.after.includes("letter")&&a||e.after.includes("digit")&&l||e.after.includes("function")&&u||e.after.includes("frac")&&d||e.after.includes("surd")&&g||e.after.includes("binop")&&E||e.after.includes("relop")&&P||e.after.includes("operator")&&Z||e.after.includes("punct")&&me||e.after.includes("array")&&_e||e.after.includes("openfence")&&He||e.after.includes("closefence")&&Xe||e.after.includes("text")&&wt||e.after.includes("space")&&Do?e.value:""}function Gn(t,e,r){return r?tf(t,r[e]):""}var za={"&":"\\&","%":"\\%",$:"\\$","''":"^{\\doubleprime}","'''":"^{\\prime\\prime\\prime}","''''":"^{\\prime\\prime\\prime\\prime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","":"\\differentialD","":"\\differentialD",sin:"\\sin",cos:"\\cos",tan:"\\tan",arccos:"\\arccos",arcsin:"\\arcsin",arctan:"\\arctan",arctg:"\\operatorname{arctg}",arcsec:"\\operatorname{arcsec}",arccsc:"\\operatorname{arccsc}",arsinh:"\\operatorname{arsinh}",arccosh:"\\operatorname{arccosh}",arcosh:"\\operatorname{arcosh}",artanh:"\\operatorname{artanh}",arctanh:"\\operatorname{arctanh}",arcsech:"\\operatorname{arcsech}",arccsch:"\\operatorname{arccsch}",ch:"\\operatorname{ch}",cosec:"\\operatorname{cosec}",cosh:"\\cosh",cot:"\\cot",cotg:"\\operatorname{cotg}",coth:"\\coth",csc:"\\csc",ctg:"\\operatorname{ctg}",cth:"\\operatorname{cth}",sec:"\\sec",sech:"\\operatorname{sech}",sinh:"\\sinh",sh:"\\operatorname{sh}",tanh:"\\tanh",tg:"\\operatorname{tg}",th:"\\operatorname{th}",arg:"\\arg",lg:"\\lg",lb:"\\operatorname{lb}",log:"\\log_{#?}",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?\\to#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},sint:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\sin t"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\mathbb{Z}",QQ:"\\mathbb{Q}",RR:"\\mathbb{R}",CC:"\\mathbb{C}",xx:"\\times","+-":"\\pm","":"\\ne","!=":"\\ne","":"\\ge",">=":"\\ge","":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","":"\\approx","?=":"\\questeq","":"\\div","":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\bmod{#?}","(mod":"\\pmod{#?}",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\gcd",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},ft:{after:"nothing+digit+operator",value:"\\operatorname{ft}"},inch:{after:"nothing+digit+operator",value:"\\operatorname{inch}"},mi:{after:"nothing+digit+operator",value:"\\operatorname{mi}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","-->...":"\\longrightarrow\\cdots","->":"\\to","|->":"\\mapsto","-->":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\iff","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","*":"\\cdot","**":"\\star","***":"\\ast","//":"\\slash","\\\\":"\\backslash",setminus:"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div",divide:"\\div","@":"\\circ","^^":"\\wedge","^^^":"\\bigwedge",vv:"\\vee",vvv:"\\bigvee",nn:"\\cap",nnn:"\\bigcap",uu:"\\cup",uuu:"\\bigcup","-=":"\\equiv","~=":"\\cong",lt:"<","lt=":"\\leq",gt:">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq",prop:"\\propto",diamond:"\\diamond",square:"\\square",iff:"\\iff",sub:"\\subset",sup:"\\supset",sube:"\\subseteq",supe:"\\supseteq",uarr:"\\uparrow",darr:"\\downarrow",rarr:"\\rightarrow",rArr:"\\Rightarrow",larr:"\\leftarrow",lArr:"\\Leftarrow",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",aleph:"\\aleph",and:"\\land",or:"\\lor",not:"\\neg","_|_":"\\bot",TT:"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceil","~|":"\\rceil",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail",times:"\\times",of:"\\circ",infinity:"\\infty",defint:"\\int_{#?}^{#?}",approaches:"\\to",ceil:"\\left\\lceil#?\\right\\rceil",floor:"\\left\\lfloor#?\\right\\rfloor",union:"\\cup",asterisk:"\\ast",frac:"\\frac{#?}{#?}",cbrt:"\\sqrt[3]{#?}",nthroot:"\\sqrt[#?]{#?}"};function Yt(t,e){var r;let a=(r=e?.format)!=null?r:"auto";return a==="auto"&&([a,t]=rf(t)),a==="ascii-math"?(t=t.replace(/\u2061/gu,""),t=t.replace(/\u3016/gu,"{"),t=t.replace(/\u3017/gu,"}"),t=t.replace(/([^\\])sinx/g,"$1\\sin x"),t=t.replace(/([^\\])cosx/g,"$1\\cos x "),t=t.replace(/\u2013/g,"-"),["ascii-math",Fe(t,{inlineShortcuts:e?.inlineShortcuts})]):["latex",t]}function Fe(t,e){var r;if(t=t.trim(),!t)return"";let a=(r=e.inlineShortcuts)!=null?r:za;if(t.startsWith("^")||t.startsWith("_")){let{match:g,rest:E}=ri(t.slice(1),{inlineShortcuts:a,noWrap:!0});return`${t[0]}{${g}}${Fe(E,e)}`}let l=t.match(/^(sqrt|\u221A)(.*)/);if(l){let{match:g,rest:E}=ri(l[2],{inlineShortcuts:a,noWrap:!0});return`\\sqrt{${g??"\\placeholder{}"}}${Fe(E,e)}`}if(l=t.match(/^(\\cbrt|\u221B)(.*)/),l){let{match:g,rest:E}=ri(l[2],{inlineShortcuts:a,noWrap:!0});return`\\sqrt[3]{${g??"\\placeholder{}"}}${Fe(E,e)}`}if(l=t.match(/^abs(.*)/),l){let{match:g,rest:E}=ri(l[1],{inlineShortcuts:a,noWrap:!0});return`\\left|${g??"\\placeholder{}"}\\right|${Fe(E,e)}`}if(l=t.match(/^["](.*?)["](.*)/),l)return`\\text{${l[1]}}${Fe(l[2],e)}`;if(l=t.match(/^([^a-zA-Z0-9\(\{\[\_\^\\\s"]+)(.*)/),l)return`${cm(l[1],a)}${Fe(l[2],e)}`;if(/^([fgh])[^a-zA-Z]/.test(t)){let{rest:g,match:E}=ri(t.slice(1),{inlineShortcuts:a,noWrap:!0}),P="";return t[1]==="("?P=`${t[0]}\\left(${E}\\right)`:P=t[0]+E,P+Fe(g,e)}if(l=t.match(/^([a-zA-Z]+)(.*)/),l)return cm(l[1],a)+Fe(l[2],e);let{match:u,rest:d}=ri(t,{inlineShortcuts:a,noWrap:!0});if(u&&d[0]==="/"){let g=ri(d.slice(1),{inlineShortcuts:a,noWrap:!0});if(g.match)return`\\frac{${u}}{${g.match}}${Fe(g.rest,e)}`}else return t.startsWith("(")?"\\left("+u+"\\right)"+Fe(d,e):u+Fe(d,e);return l=t.match(/^(\s+)(.*)$/),l?" "+Fe(l[2],e):t}var lm={"[":"\\lbrack","]":"\\rbrack","{":"\\lbrace","}":"\\rbrace"};function ri(t,e){var r,a;let l="";t=t.trim();let u=t,d=t.charAt(0),g={"(":")","{":"}","[":"]"}[d];if(g){let E=1,P=1;for(;P<t.length&&E>0;)t[P]===d&&E++,t[P]===g&&E--,P++;if(E===0){let Z=Fe(t.substring(1,P-1),e);e.noWrap&&d==="("?l=Z:l=`\\left${(r=lm[d])!=null?r:d}${Z}\\right${(a=lm[g])!=null?a:g}`,u=t.slice(Math.max(0,P))}else l=t.substring(1,P),u=""}else{let E=t.match(/^([a-zA-Z]+)/);if(E){let P=Gn(null,t,e.inlineShortcuts);if(P)return P=P.replace("_{#?}",""),P=P.replace("^{#?}",""),{match:P,rest:t.slice(P.length)}}if(E=t.match(/^([a-zA-Z])/),E)return{match:E[1],rest:t.slice(1)};if(E=t.match(/^(-)?\d+(\.\d*)?/),E)return{match:E[0],rest:t.slice(E[0].length)};/^\\(left|right)/.test(t)||(E=t.match(/^(\\[a-zA-Z]+)/),E&&(u=t.slice(E[1].length),l=E[1]))}return{match:l,rest:u}}function cm(t,e){let r=Gn(null,t,e);return r?(r=r.replace("_{#?}",""),r=r.replace("^{#?}",""),r+=" "):r=t,r}var Pl=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function Ia(t){let e=t.trim();for(let r of Pl)if(e.startsWith(r[0])&&e.endsWith(r[1]))return[!0,e.substring(r[0].length,e.length-r[1].length)];return[!1,t]}function rf(t){if(t=t.trim(),t.length<=1)return["latex",t];let e;return[e,t]=Ia(t),e?["latex",t]:t.startsWith("`")&&t.endsWith("`")?(t=t.substring(1,t.length-1),["ascii-math",t]):t.includes("\\")?["latex",t]:/\$.+\$/.test(t)?["latex",`\\text{${t}}`]:[void 0,t]}var nf="$$",of="$$",um=(t,e,r)=>(Pl.some(a=>e.startsWith(a[0])&&e.endsWith(a[1]))||(e=`${nf} ${e} ${of}`),e),ji=class uS{constructor(e){uS._modes[e]=this}static onPaste(e,r,a){var l;if(!r.contentEditable&&r.userSelect==="none")return r.model.announce("plonk"),!1;if(typeof a=="string"){let d=new DataTransfer;d.setData("text/plain",a),a=d}let u=new ClipboardEvent("paste",{clipboardData:a,cancelable:!0});return(l=r.host)!=null&&l.dispatchEvent(u)?uS._modes[e].onPaste(r,a):!1}static copyToClipboard(e,r){if(!e.contentEditable&&e.userSelect==="none"){e.model.announce("plonk");return}let a=e.model,l=a.selectionIsCollapsed?[0,a.lastOffset]:le(a.selection),u=a.getValue(l,r);navigator.clipboard.writeText(u).then(()=>{},()=>e.model.announce("plonk"))}static onCopy(e,r){var a;if(!r.clipboardData)return;if(!e.contentEditable&&e.userSelect==="none"){e.model.announce("plonk");return}let l=e.model,u=l.selectionIsCollapsed?[0,l.lastOffset]:le(l.selection),d=l.getAtoms(u);if(d.every(g=>g.mode==="text"||!g.mode))r.clipboardData.setData("text/plain",d.filter(g=>g instanceof $e).map(g=>g.value).join(""));else if(d.every(g=>g.mode==="latex"))r.clipboardData.setData("text/plain",l.getAtoms(u,{includeChildren:!0}).map(g=>{var E;return(E=g.value)!=null?E:""}).join(""));else{let g;d.length===1&&d[0].verbatimLatex!==void 0?g=d[0].verbatimLatex:g=l.getValue(u,"latex-expanded"),r.clipboardData.setData("application/x-latex",g);try{r.clipboardData.setData("text/plain",e.options.onExport(e,g,u))}catch{}if(d.length===1){let E=d[0];(E.type==="root"||E.type==="group")&&(d=E.body.filter(P=>P.type!=="first"))}try{r.clipboardData.setData("application/json+mathlive",JSON.stringify(d.map(E=>E.toJson())))}catch{}if((a=window[Symbol.for("io.cortexjs.compute-engine")])!=null&&a.ComputeEngine){let E=globalThis.MathfieldElement.computeEngine;if(E)try{let P=E.jsonSerializationOptions;E.jsonSerializationOptions={metadata:["latex"]};let Z=E.parse(l.getValue(u,"latex-unstyled"));E.jsonSerializationOptions=P;let me=JSON.stringify(Z.json);me&&r.clipboardData.setData("application/json",me)}catch{}}}r.preventDefault()}static insert(e,r,a={}){var l;let u=a.mode==="auto"?e.mode:(l=a.mode)!=null?l:e.mode;return uS._modes[u].insert(e,r,a)}onPaste(e,r){return!1}insert(e,r,a){return!1}};ji._modes={};var V=ji,dm=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",command:"moveToNextGroup"},{key:"shift+[Tab]",command:"moveToPreviousGroup"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:["complete","accept-all"]},{key:"[Enter]",ifMode:"latex",command:["complete","accept-all"]},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"cmd+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"ctrl+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"cmd+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"ctrl+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"cmd+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+shift+v",ifMode:"math",command:["insert","\\sqrt[#0]{#1}"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleContextMenu"},{key:"alt+shift+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"shift+alt+[KeyT]",ifMode:"math",command:["switchMode","text"]},{key:"shift+alt+[KeyT]",ifMode:"text",command:["switchMode","math"]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+shift+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"alt+[Tab]",ifMode:"math",command:"addColumnAfter"},{key:"shift+alt+[Tab]",ifMode:"math",command:"addColumnBefore"},{key:"alt+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Enter]",ifMode:"math",command:"addRowBefore"},{key:"alt+[Return]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Return]",ifMode:"math",command:"addRowBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]},{key:"[Backquote]",ifLayout:["windows.german","linux.german"],ifMode:"math",command:["insert","^"]},{key:"[IntlBackslash]",ifLayout:["apple.german"],ifMode:"math",command:["insert","^"]}],mm={"\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\infty":"alt+[Digit5]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function rt(t){var e;return((e=t.element)==null?void 0:e.mathfield)===t}function af(t){var e,r;return(r=(e=t.querySelector(".ML__caret"))!=null?e:t.querySelector(".ML__text-caret"))!=null?r:t.querySelector(".ML__latex-caret")}function Ji(t){let e=af(t);if(!e)return null;let r=e.getBoundingClientRect();return{x:r.right,y:r.bottom,height:r.height}}function sf(t){var e;if(!t.parent)return"root";let r=(e=t.parent.id)!=null?e:"";return r+=typeof t.parentBranch=="string"?"-"+t.parentBranch:`-${t.parentBranch[0]}/${t.parentBranch[0]}`,r}function zl(t,e,r){if(!e)return null;let a=t.field.getBoundingClientRect(),l=e.right-e.left,u=e.bottom-e.top,d=Math.ceil(e.left-a.left+t.field.scrollLeft*r),g=Math.ceil(e.top-a.top);return{left:d,right:d+l,top:g,bottom:g+u}}function pm(t){let e=t.getBoundingClientRect(),r=parseInt(getComputedStyle(t).marginRight),a={top:e.top-1,bottom:e.bottom,left:e.left,right:e.right-1+r};if(t.children.length===0||t.tagName.toUpperCase()==="SVG")return a;for(let l of t.children)if(l.nodeType===1&&"atomId"in l.dataset&&!l.classList.contains("ML__pstrut")){let u=pm(l);a.left=Math.min(a.left,u.left),a.right=Math.max(a.right,u.right),a.top=Math.min(a.top,u.top),a.bottom=Math.max(a.bottom,u.bottom)}return a}function Ar(t,e){var r,a;if(!e.id)return null;let l=(a=(r=t.atomBoundsCache)==null?void 0:r.get(e.id))!=null?a:null;if(l!==null)return l;let u=t.field.querySelector(`[data-atom-id="${e.id}"]`);return l=u?pm(u):null,t.atomBoundsCache&&(l?t.atomBoundsCache.set(e.id,l):t.atomBoundsCache.delete(e.id)),l??null}function hm(t,e){let[r,a]=e,l=null;for(let u=r;u<=a;u++){let d=Ar(t,t.model.at(u));d&&(l?(l.top=Math.min(l.top,d.top),l.bottom=Math.max(l.bottom,d.bottom),l.left=Math.min(l.left,d.left),l.right=Math.max(l.right,d.right)):l=d)}return l??{top:0,bottom:0,left:0,right:0}}function lf(t,e,r){let a=new Map,l=t.field,u=l.offsetWidth,d=Math.floor(l.getBoundingClientRect().width)/u;d=isNaN(d)?1:d;for(let g of t.model.getAtoms(e,{includeChildren:!0})){if(r!=null&&r.excludeAtomsWithBackground&&g.style.backgroundColor)continue;let E=zl(t,Ar(t,g),d);if(E){let P=sf(g);if(a.has(P)){let Z=a.get(P);a.set(P,{left:Math.min(Z.left,E.left),right:Math.max(Z.right,E.right),top:Math.min(Z.top,E.top),bottom:Math.max(Z.bottom,E.bottom)})}else a.set(P,E)}}return[...a.values()]}function Na(t,e){return t.model.selection.ranges.reduce((r,a)=>r.concat(...lf(t,a,e)),[])}function Gi(t,e){return t==="*"||e==="none"?!0:e==="same-origin"?!window.origin||t===window.origin:typeof e=="function"?e(t):!1}function Il(t){let e=0,r=0,a=t.offsetWidth,l=t.offsetHeight;for(;t instanceof HTMLElement;)e+=t.offsetTop,r+=t.offsetLeft,t=t.offsetParent;return new DOMRect(r,e,a,l)}function $a(t,e){if(!t)return;let r=t.model.at(e);if(!r)return;let a={},l=Ar(t,r);l&&(a.bounds=new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)),a.depth=r.treeDepth-2,a.style=r.style;let u=r;for(;u;){if(u.command==="\\htmlData"&&u.args&&typeof u.args[0]=="string"){let d=u.args[0].split(",");for(let g of d){let E=g.match(/([^=]+)=(.+$)/);if(E){let P=E[1].trim().replace(/ /g,"-");P&&(a.data||(a.data={}),a.data[P]=E[2])}else{let P=g.trim().replace(/ /g,"-");P&&(a.data||(a.data={}),a.data[P]=void 0)}}}(u.command==="\\htmlId"||u.command==="\\cssId")&&!a.id&&u.args&&typeof u.args[0]=="string"&&(a.id=u.args[0]),u=u.parent}return(r.mode==="math"||r.mode==="text")&&(a.latex=b.serialize([r],{defaultMode:"math"})),a}function fm(t,e){let r=t.model.at(e);for(;r;){if(r.command==="\\href"){let a=r.args[0];if(typeof a=="string")return a}r=r.parent}return""}var gm=`@keyframes ML__caret-blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}
.ML__container {
  display: inline-flex;
  flex-flow: row;
  justify-content: space-between;
  align-items: flex-end;
  min-height: 39px;
  /* Need some room for the virtual keyboard toggle */
  width: 100%;
  padding: 4px;
  box-sizing: border-box;
  /* This attribute is necessary to work around a Firefox issue where 
  where clicking multiple times on the border leads to a focused mathfield that cannot be edited until focus is lost and regained (also fixes the multiple cursor issue on firefox that can occur with the same sequence of events).
  */
  pointer-events: auto;
  /* Prevent the browser from trying to interpret touch gestures in the field */
  /* "Disabling double-tap to zoom removes the need for browsers to
        delay the generation of click events when the user taps the screen." */
  touch-action: none;
  --_caret-color: var(--caret-color, hsl(var(--_hue), 40%, 49%));
  --_selection-color: var(--selection-color, #000);
  --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 70%, 85%));
  --_text-highlight-background-color: var(--highlight-text, hsla(var(--_hue), 40%, 50%, 0.1));
  --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 40%, 95%));
  --_smart-fence-color: var(--smart-fence-color, currentColor);
  --_smart-fence-opacity: var(--smart-fence-opacity, 0.5);
  --_contains-highlight-color: var(--contains-highlight-color, var(--_caret-color));
  --_latex-color: var(--latex-color, hsl(var(--_hue), 80%, 40%));
  --_correct-color: var(--correct-color, #10a000);
  --_incorrect-color: var(--incorrect-color, #a01b00);
  --_composition-background-color: var(--composition-background-color, #fff1c2);
  --_composition-text-color: var(--composition-text-color, black);
  --_composition-underline-color: var(--composition-underline-color, transparent);
  --_tooltip-border: var(--tooltip-border, 1px solid transparent);
  --_tooltip-border-radius: var(--tooltip-border-radius, 8px);
  --_tooltip-background-color: var(--tooltip-background-color, #616161);
  --_tooltip-color: var(--tooltip-color, #fff);
  --_tooltip-box-shadow: var(--tooltip-box-shadow, 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2));
}
@media (prefers-color-scheme: dark) {
  .ML__container {
    --_contains-highlight-color: var(--contains-highlight-color, hsl(var(--_hue), 85%, 75%));
    --_caret-color: var(--caret-color, hsl(var(--_hue), 65%, 55%));
    --_selection-color: var(--selection-color, #fff);
    --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 65%, 55%));
    --_text-highlight-background-color: var(--text-highlight-background-color, hsla(var(--_hue), 40%, 50%, 0.6));
    --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 5%, 34%));
    --_latex-color: var(--primary, hsl(var(--_hue), 40%, 50%));
    --_composition-background-color: #69571c;
    --_composition-text-color: white;
    --_placeholder-color: hsl(var(--_hue), 60%, 69%);
    --_smart-fence-color: var(--smart-fence-color, #fff);
    --_smart-fence-opacity: var(--smart-fence-opacity, 0.7);
  }
}
@media (forced-colors: active) {
  .ML__container {
    --_caret-color: white;
    --_selection-color: white;
    --_smart-fence-color: white;
    --_latex-color: white;
    --_correct-color: white;
    --_incorrect-color: white;
    --_composition-text-color: white;
  }
}
@media (hover: none) and (pointer: coarse) {
  :host(:not(:focus)) .ML__container {
    pointer-events: none;
  }
}
/* This is the actual field content (formula) */
.ML__content {
  display: flex;
  align-items: center;
  align-self: center;
  position: relative;
  overflow: hidden;
  padding: 2px 3px 2px 1px;
  width: 100%;
  /* Encourage the browser to use the GPU to render the field.
     Weirdly, this is required for prompts to be rendered correctly. 
   */
  isolation: isolate;
  text-shadow: var(--text-shadow);
}
.ML__content .ML__latex {
  text-shadow: var(--text-shadow);
}
.ML__content .ML__sqrt-line {
  box-shadow: var(--text-shadow);
}
.ML__content .ML__frac-line {
  box-shadow: var(--text-shadow);
}
.ML__virtual-keyboard-toggle,
.ML__menu-toggle {
  box-sizing: border-box;
  display: flex;
  align-self: center;
  align-items: center;
  flex-shrink: 0;
  flex-direction: column;
  justify-content: center;
  width: 34px;
  height: 34px;
  padding: 0;
  margin-right: 4px;
  cursor: pointer;
  /* Avoid some weird blinking with :hover */
  border-radius: 8px;
  border: 1px solid transparent;
  transition: background 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  color: hsl(var(--_hue), 40%, 50%);
  fill: currentColor;
  background: transparent;
}
.ML__virtual-keyboard-toggle:hover,
.ML__menu-toggle:hover {
  background: hsla(0, 0%, 70%, 0.3);
  color: #333;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle > span,
.ML__menu-toggle > span {
  display: flex;
  align-self: center;
  align-items: center;
}
@media (pointer: coarse) {
  .ML__virtual-keyboard-toggle,
  .ML__menu-toggle {
    min-width: 60px;
    min-height: 60px;
  }
}
/* The invisible element used to capture keyboard events. We're just trying
 really hard to make sure it doesn't show. */
.ML__keyboard-sink {
  display: inline-block;
  resize: none;
  outline: none;
  border: none;
  /* Need these for Microsoft Edge */
  position: fixed;
  clip: rect(0 0 0 0);
  /* Need this to prevent iOS Safari from auto-zooming */
  font-size: 1em;
  font-family: KaTeX_Main;
  line-height: 0.5;
  /* On Chromium, if this is 0, no keyboard events are received */
  /* Preferred over clip */
  clip-path: inset(50%);
}
[part='placeholder'] {
  color: var(--neutral-400);
}
.ML__composition {
  background: var(--_composition-background-color);
  color: var(--_composition-text-color);
  text-decoration: underline var(--_composition-underline-color);
}
.ML__caret {
  display: inline-block;
}
.ML__caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__text-caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__latex-caret::after {
  content: '';
  visibility: hidden;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_latex-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.019em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__focused .ML__latex-caret::after,
.ML__focused .ML__text-caret::after,
.ML__focused .ML__caret::after {
  visibility: visible;
}
.ML__focused .ML__text {
  background: var(--_text-highlight-background-color);
}
/* When using smartFence, the anticipated closing fence is displayed
with this style */
.ML__smart-fence__close {
  opacity: var(--_smart-fence-opacity);
  color: var(--_smart-fence-color);
}
.ML__focused .ML__selected,
.ML__focused .ML__selected .ML__contains-caret,
.ML__focused .ML__selected .ML__smart-fence__close,
.ML__focused .ML__selected .ML__placeholder {
  color: var(--_selection-color);
  opacity: 1;
}
.ML__selection {
  box-sizing: border-box;
  background: transparent;
}
:host(:focus) .ML__selection {
  background: var(--_selection-background-color) !important;
}
.ML__contains-caret.ML__close,
.ML__contains-caret.ML__open,
.ML__contains-caret > .ML__close,
.ML__contains-caret > .ML__open,
.ML__contains-caret .ML__sqrt-sign,
.ML__contains-caret .ML__sqrt-line {
  color: var(--_contains-highlight-color);
}
.ML__contains-highlight {
  box-sizing: border-box;
  background: transparent;
}
.ML__focused .ML__contains-highlight {
  background: var(--_contains-highlight-background-color);
}
.ML__raw-latex {
  font-family: 'Berkeley Mono', 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  font-weight: 400;
  font-size: 0.8em;
  letter-spacing: -0.05em;
  color: var(--_latex-color);
}
.ML__suggestion {
  color: var(--neutral-500);
}
.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle.is-pressed,
.ML__virtual-keyboard-toggle.is-active:hover,
.ML__virtual-keyboard-toggle.is-active {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
/* Add an attribute 'data-tooltip' to automatically show a
   tooltip over a element on hover.
*/
[data-tooltip] {
  position: relative;
}
[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  display: block;
  z-index: 2;
  pointer-events: none;
  right: auto;
  top: calc(-100% - 4px);
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  border-radius: 4px;
  background: #616161;
  color: #fff;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  text-align: center;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-style: normal;
  font-weight: 400;
  font-size: 13px;
  /* Phone */
  opacity: 0;
  transform: scale(0.5);
}
@media only screen and (max-width: 767px) {
  [data-tooltip]::after {
    padding: 8px 16px;
    font-size: 16px;
  }
}
menu [data-tooltip]::after {
  left: 100%;
  top: 0%;
}
menu .ML__base {
  cursor: default;
}
/** Don't display if we're tracking, i.e. have the pointer down */
.tracking [data-tooltip]:hover::after {
  /* Use visibility, not display. Display will remove the after from the DOM, and the override below will not work */
  visibility: hidden;
}
/** But do display if tracking and inside a menu */
.tracking menu li[data-tooltip]:hover::after,
[data-tooltip]:hover::after {
  visibility: visible;
  opacity: 1;
  transform: scale(1);
  transition-property: opacity, scale;
  transition-duration: 0.15s;
  transition-delay: 1s;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__prompt {
  border-radius: 2px;
}
.ML__editablePromptBox {
  outline: 1px solid #acacac;
  border-radius: 2px;
  z-index: -1;
}
.ML__focused .ML__focusedPromptBox {
  outline: highlight auto 1px;
}
.ML__lockedPromptBox {
  background-color: rgba(142, 142, 141, 0.4);
  z-index: -1;
}
.ML__correctPromptBox {
  outline: 1px solid var(--_correct-color);
  box-shadow: 0 0 5px var(--_correct-color);
}
.ML__incorrectPromptBox {
  outline: 1px solid var(--_incorrect-color);
  box-shadow: 0 0 5px var(--_incorrect-color);
}
.variant-submenu {
  display: flex;
  flex-direction: column;
  padding: 8px;
}
.variant-submenu [part='menu-item'].ML__xl {
  font-size: 2rem;
  text-align: center;
  margin: 0;
}
.ML__center-menu .label {
  text-align: center;
}
.insert-matrix-submenu {
  /* Grid doesn't work on Safari */
  --_menu-item-size: 25px;
  width: calc(5 * var(--_menu-item-size));
  display: flex;
  flex-wrap: wrap;
  padding: 8px;
  align-content: center;
  justify-content: center;
}
.insert-matrix-submenu [part='menu-item'] {
  width: var(--_menu-item-size);
  height: var(--_menu-item-size);
  font-size: 21px;
  border: none;
  border-radius: 0;
  line-height: 21px;
  text-align: center;
  padding: 0;
  margin: 0;
}
.border-submenu [part='menu-item'] {
  font-size: 2rem;
  line-height: 1.2;
  text-align: center;
}
.swatches-submenu {
  --_swatch-size: 2rem;
  --_columns: 4;
  display: flex;
  flex-flow: wrap;
  padding: 8px;
  max-width: calc(var(--_columns) * (var(--_swatch-size) + 18px) + 16px);
  box-sizing: border-box;
}
.menu-swatch {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: fit-content;
  height: fit-content;
  margin: 2px;
  padding: 0;
  background: var(--neutral-200);
}
.menu-swatch > .label {
  padding: 0;
  margin: 0;
  line-height: 0;
}
.menu-swatch > .label > span {
  display: inline-block;
  margin: 6px;
  min-width: var(--_swatch-size);
  min-height: var(--_swatch-size);
  border-radius: 50%;
}
.menu-swatch.active {
  background: var(--neutral-100);
  scale: 1.4;
}
.menu-swatch.active > .label > span {
  border-radius: 2px;
}
.menu-swatch .ui-checkmark,
.menu-swatch .ui-mixedmark {
  position: absolute;
  margin: 0;
  padding: 0;
  color: white;
}
.menu-swatch.dark-contrast .ui-checkmark,
.menu-swatch.dark-contrast .ui-mixedmark {
  color: #000;
}
.ML__insert-template {
  font-size: 1em;
}
.ML__insert-label {
  opacity: 0.5;
  margin-left: 2ex;
}
`,bm=`.ML__container {
  min-height: auto !important;
  --_hue: var(--hue, 212);
  --_placeholder-color: var(--placeholder-color, hsl(var(--_hue), 40%, 49%));
  --_placeholder-opacity: var(--placeholder-opacity, 0.4);
  --_text-font-family: var(--text-font-family, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif);
}
.ML__sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}
.ML__is-inline {
  display: inline-block;
}
.ML__base {
  visibility: inherit;
  display: inline-block;
  position: relative;
  cursor: text;
  padding: 0;
  margin: 0;
  box-sizing: content-box;
  border: 0;
  outline: 0;
  vertical-align: baseline;
  font-weight: inherit;
  font-family: inherit;
  font-style: inherit;
  text-decoration: none;
  width: min-content;
}
.ML__strut,
.ML__strut--bottom {
  display: inline-block;
  min-height: 0.5em;
}
.ML__small-delim {
  font-family: KaTeX_Main;
}
/* Text mode */
.ML__text {
  font-family: var(--_text-font-family);
  white-space: pre;
}
/* Use cmr for 'math upright' */
.ML__cmr {
  font-family: KaTeX_Main;
  font-style: normal;
}
.ML__mathit {
  font-family: KaTeX_Math;
  /* The KaTeX_Math font is italic by default, so the font-style below is only 
     useful when a fallback font is used
  */
  font-style: italic;
}
.ML__mathbf {
  font-family: KaTeX_Main;
  font-weight: bold;
}
/* Lowercase greek symbols should stick to math font when \\mathbf is applied 
   to match TeX idiosyncratic behavior */
.lcGreek.ML__mathbf {
  font-family: KaTeX_Math;
}
.ML__mathbfit {
  font-family: KaTeX_Math;
  font-weight: bold;
  font-style: italic;
}
.ML__ams {
  font-family: KaTeX_AMS;
}
/* Blackboard */
.ML__bb {
  font-family: KaTeX_AMS;
}
.ML__cal {
  font-family: KaTeX_Caligraphic;
}
.ML__frak {
  font-family: KaTeX_Fraktur;
}
.ML__tt {
  font-family: KaTeX_Typewriter;
}
.ML__script {
  font-family: KaTeX_Script;
}
.ML__sans {
  font-family: KaTeX_SansSerif;
}
.ML__series_ul {
  font-weight: 100;
}
.ML__series_el {
  font-weight: 100;
}
.ML__series_l {
  font-weight: 200;
}
.ML__series_sl {
  font-weight: 300;
}
.ML__series_sb {
  font-weight: 500;
}
.ML__bold {
  font-weight: 700;
}
.ML__series_eb {
  font-weight: 800;
}
.ML__series_ub {
  font-weight: 900;
}
.ML__series_uc {
  font-stretch: ultra-condensed;
}
.ML__series_ec {
  font-stretch: extra-condensed;
}
.ML__series_c {
  font-stretch: condensed;
}
.ML__series_sc {
  font-stretch: semi-condensed;
}
.ML__series_sx {
  font-stretch: semi-expanded;
}
.ML__series_x {
  font-stretch: expanded;
}
.ML__series_ex {
  font-stretch: extra-expanded;
}
.ML__series_ux {
  font-stretch: ultra-expanded;
}
.ML__it {
  font-style: italic;
}
.ML__shape_ol {
  -webkit-text-stroke: 1px black;
  text-stroke: 1px black;
  color: transparent;
}
.ML__shape_sc {
  font-variant: small-caps;
}
.ML__shape_sl {
  font-style: oblique;
}
/* First level emphasis */
.ML__emph {
  color: #bc2612;
}
/* Second level emphasis */
.ML__emph .ML__emph {
  color: #0c7f99;
}
.ML__highlight {
  color: #007cb2;
  background: #edd1b0;
}
.ML__center {
  text-align: center;
}
.ML__left {
  text-align: left;
}
.ML__right {
  text-align: right;
}
.ML__label_padding {
  padding: 0 0.5em;
}
.ML__frac-line {
  width: 100%;
  min-height: 1px;
}
.ML__frac-line:after {
  content: '';
  display: block;
  margin-top: max(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  /* There's a bug since Chrome 62 where 
      sub-pixel border lines don't draw at some zoom 
      levels (110%, 90%). 
      Setting the min-height used to work around it, but that workaround
      broke in Chrome 84 or so.
      Setting the background (and the min-height) seems to work for now.
      */
  background: currentColor;
  box-sizing: content-box;
  /* Vuetify sets the box-sizing to inherit 
            causes the fraction line to not draw at all sizes (see #26) */
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
  forced-color-adjust: preserve-parent-color;
}
@media (forced-colors: active) {
  .ML__frac-line {
    min-height: 0px;
  }
}
.ML__sqrt {
  display: inline-block;
}
.ML__sqrt-sign {
  display: inline-block;
  position: relative;
}
.ML__sqrt-line {
  display: inline-block;
  height: max(1px, 0.04em);
  width: 100%;
}
.ML__sqrt-line:before {
  content: '';
  display: block;
  margin-top: min(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  background: currentColor;
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
  forced-color-adjust: preserve-parent-color;
}
@media (forced-colors: active) {
  .ML__sqrt-line:after {
    background: white !important;
  }
}
.ML__sqrt-line:after {
  border-bottom-width: 1px;
  content: ' ';
  display: block;
  margin-top: -0.1em;
}
.ML__sqrt-index {
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}
.ML__delim-size1 {
  font-family: KaTeX_Size1;
}
.ML__delim-size2 {
  font-family: KaTeX_Size2;
}
.ML__delim-size3 {
  font-family: KaTeX_Size3;
}
.ML__delim-size4 {
  font-family: KaTeX_Size4;
}
.ML__delim-mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}
.ML__delim-mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}
.ML__accent-body {
  font-family: KaTeX_Main;
}
.ML__accent-combining-char {
  position: relative;
  left: 0.24em;
}
/** The markup for a LaTeX formula, either in an editable mathfield or 
    in a static display.
*/
.ML__latex {
  display: inline-block;
  direction: ltr;
  text-align: left;
  text-indent: 0;
  text-rendering: auto;
  font-family: inherit;
  font-style: normal;
  font-size-adjust: none;
  font-stretch: normal;
  font-variant-caps: normal;
  letter-spacing: normal;
  line-height: 1.2;
  word-wrap: normal;
  word-spacing: normal;
  white-space: nowrap;
  text-shadow: none;
  -webkit-user-select: none;
  user-select: none;
  width: min-content;
  forced-color-adjust: preserve-parent-color;
}
.ML__latex .style-wrap {
  position: relative;
}
.ML__latex .ML__mfrac {
  display: inline-block;
}
.ML__latex .ML__left-right {
  display: inline-block;
}
.ML__latex .ML__vlist-t {
  display: inline-table;
  table-layout: fixed;
  border-collapse: collapse;
}
.ML__latex .ML__vlist-r {
  display: table-row;
}
.ML__latex .ML__vlist {
  display: table-cell;
  vertical-align: bottom;
  position: relative;
}
.ML__latex .ML__vlist > span {
  display: block;
  height: 0;
  position: relative;
}
.ML__latex .ML__vlist > span > span {
  display: inline-block;
}
.ML__latex .ML__vlist > span > .ML__pstrut {
  overflow: hidden;
  width: 0;
}
.ML__latex .ML__vlist-t2 {
  margin-right: -2px;
}
.ML__latex .ML__vlist-s {
  display: table-cell;
  vertical-align: bottom;
  font-size: 1px;
  width: 2px;
  min-width: 2px;
}
.ML__latex .ML__msubsup {
  text-align: left;
}
.ML__latex .ML__negativethinspace {
  display: inline-block;
  margin-left: -0.16667em;
  height: 0.71em;
}
.ML__latex .ML__thinspace {
  display: inline-block;
  width: 0.16667em;
  height: 0.71em;
}
.ML__latex .ML__mediumspace {
  display: inline-block;
  width: 0.22222em;
  height: 0.71em;
}
.ML__latex .ML__thickspace {
  display: inline-block;
  width: 0.27778em;
  height: 0.71em;
}
.ML__latex .ML__enspace {
  display: inline-block;
  width: 0.5em;
  height: 0.71em;
}
.ML__latex .ML__quad {
  display: inline-block;
  width: 1em;
  height: 0.71em;
}
.ML__latex .ML__qquad {
  display: inline-block;
  width: 2em;
  height: 0.71em;
}
.ML__latex .ML__llap,
.ML__latex .ML__rlap {
  width: 0;
  position: relative;
  display: inline-block;
}
.ML__latex .ML__llap > .ML__inner,
.ML__latex .ML__rlap > .ML__inner {
  position: absolute;
}
.ML__latex .ML__llap > .ML__fix,
.ML__latex .ML__rlap > .ML__fix {
  display: inline-block;
}
.ML__latex .ML__llap > .ML__inner {
  right: 0;
}
.ML__latex .ML__rlap > .ML__inner {
  left: 0;
}
.ML__latex .ML__rule {
  display: inline-block;
  border: solid 0;
  position: relative;
  box-sizing: border-box;
}
.ML__latex .overline .overline-line,
.ML__latex .underline .underline-line {
  width: 100%;
}
.ML__latex .overline .overline-line:before,
.ML__latex .underline .underline-line:before {
  content: '';
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  display: block;
}
.ML__latex .overline .overline-line:after,
.ML__latex .underline .underline-line:after {
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  content: '';
  display: block;
  margin-top: -1px;
}
.ML__latex .ML__stretchy {
  display: block;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__latex .ML__stretchy:before,
.ML__latex .ML__stretchy:after {
  content: '';
}
.ML__latex .ML__stretchy svg {
  display: block;
  position: absolute;
  width: 100%;
  height: inherit;
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
}
.ML__latex .slice-1-of-2 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__latex .slice-2-of-2 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__latex .slice-1-of-3 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__latex .slice-2-of-3 {
  display: inline-flex;
  position: absolute;
  left: 25%;
  width: 50%;
  overflow: hidden;
}
.ML__latex .slice-3-of-3 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__latex .slice-1-of-1 {
  display: inline-flex;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__latex .ML__nulldelimiter {
  display: inline-block;
}
.ML__latex .ML__op-group {
  display: inline-block;
}
.ML__latex .ML__op-symbol {
  position: relative;
}
.ML__latex .ML__op-symbol.ML__small-op {
  font-family: KaTeX_Size1;
}
.ML__latex .ML__op-symbol.ML__large-op {
  font-family: KaTeX_Size2;
}
.ML__latex:has(.ML__center_environment),
.ML__latex:has(.ML__multiline_environment),
.ML__latex:has(.ML__align_environment),
.ML__latex:has(.ML__eqnarray_environment),
.ML__latex:has(.ML__gather_environment) {
  width: 100%;
}
.ML__latex .ML__multiline_environment {
  display: inline-flex;
  width: 100%;
}
.ML__latex .ML__center_environment {
  display: inline-flex;
  width: 100%;
  justify-content: center;
}
.ML__latex .ML__align_environment,
.ML__latex .ML__eqnarray_environment,
.ML__latex .ML__gather_environment {
  display: inline-block;
}
.ML__latex .ML__mtable .ML__vertical-separator {
  display: inline-block;
  min-width: 1px;
  box-sizing: border-box;
}
.ML__latex .ML__mtable .ML__arraycolsep {
  display: inline-block;
}
.ML__latex .ML__mtable .col-align-m > .ML__vlist-t {
  text-align: center;
}
.ML__latex .ML__mtable .col-align-c > .ML__vlist-t {
  text-align: center;
}
.ML__latex .ML__mtable .col-align-l > .ML__vlist-t {
  text-align: left;
}
.ML__latex .ML__mtable .col-align-r > .ML__vlist-t {
  text-align: right;
}
[data-href] {
  cursor: pointer;
}
.ML__error {
  display: inline-block;
  background-image: radial-gradient(ellipse at center, hsl(341, 100%, 40%), rgba(0, 0, 0, 0) 70%);
  background-color: hsla(341, 100%, 40%, 0.1);
  background-repeat: repeat-x;
  background-size: 3px 3px;
  padding-bottom: 3px;
  background-position: 0 100%;
}
.ML__error > .ML__error {
  background: transparent;
  padding: 0;
}
.ML__placeholder {
  color: var(--_placeholder-color);
  opacity: var(--_placeholder-opacity);
  padding-left: 0.4ex;
  padding-right: 0.4ex;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
}
.ML__notation {
  position: absolute;
  box-sizing: border-box;
  line-height: 0;
}
/* This class is used to implement the \`\\mathtip\` and \`\\texttip\` commands
   For UI elements, see \`[data-ML__tooltip]\`
*/
.ML__tooltip-container {
  position: relative;
  transform: scale(0);
}
.ML__tooltip-container .ML__tooltip-content {
  position: fixed;
  display: inline-table;
  visibility: hidden;
  z-index: 2;
  width: max-content;
  max-width: 400px;
  padding: 12px 12px;
  border: var(--tooltip-border);
  border-radius: var(--tooltip-border-radius);
  background: var(--tooltip-background-color);
  --_selection-color: var(--tooltip-color);
  color: var(--tooltip-color);
  box-shadow: var(--tooltip-box-shadow);
  opacity: 0;
  transition: opacity 0.15s cubic-bezier(0.4, 0, 1, 1);
}
.ML__tooltip-container .ML__tooltip-content .ML__text {
  white-space: normal;
}
.ML__tooltip-container .ML__tooltip-content .ML__base {
  display: contents;
}
.ML__tooltip-container:hover .ML__tooltip-content {
  visibility: visible;
  opacity: 1;
  font-size: 0.75em;
  transform: scale(1) translate(0, 3em);
}
`,ym=`#mathlive-environment-popover.is-visible {
  visibility: visible;
}
#mathlive-environment-popover {
  --_environment-panel-height: var(--environment-panel-height, 70px);
  --_accent-color: var(--accent-color, #aaa);
  --_background: var(--environment-panel-background, #fff);
  --_button-background: var(--environment-panel-button-background, white);
  --_button-background-hover: var(--environment-panel-button-background-hover, #f5f5f7);
  --_button-background-active: var(--environment-panel-button-background-active, #f5f5f7);
  --_button-text: var(--environment-panel-button-text, #e3e4e8);
  position: absolute;
  width: calc(var(--_environment-panel-height) * 2);
  height: var(--_environment-panel-height);
  border-radius: 4px;
  border: 1.5px solid var(--_accent-color);
  background-color: var(--_background);
  box-shadow: 0 0 30px 0 var(--environment-shadow, rgba(0, 0, 0, 0.4));
  pointer-events: all;
  visibility: hidden;
}
#mathlive-environment-popover .MLEP__array-buttons {
  height: calc(var(--_environment-panel-height) * 5/4);
  width: calc(var(--_environment-panel-height) * 5/4);
  margin-left: calc(0px - var(--_environment-panel-height) * 0.16);
  margin-top: calc(0px - var(--_environment-panel-height) * 0.19);
}
#mathlive-environment-popover .MLEP__array-buttons .font {
  fill: white;
}
#mathlive-environment-popover .MLEP__array-buttons circle {
  fill: #7f7f7f;
  transition: fill 300ms;
}
#mathlive-environment-popover .MLEP__array-buttons .MLEP__array-insert-background {
  fill-opacity: 1;
  fill: var(--_background);
  stroke: var(--_accent-color);
  stroke-width: 3px;
}
#mathlive-environment-popover .MLEP__array-buttons line {
  stroke: var(--_accent-color);
  stroke-opacity: 0;
  stroke-width: 40;
  pointer-events: none;
  transition: stroke-opacity 300ms;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover circle {
  fill: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover line {
  stroke-opacity: 1;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls {
  height: 100%;
  width: 50%;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options {
  width: var(--_environment-panel-height);
  height: var(--_environment-panel-height);
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  justify-content: space-around;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg {
  pointer-events: all;
  margin-top: 2px;
  width: calc(var(--_environment-panel-height) / 3 * 28 / 24);
  height: calc(var(--_environment-panel-height) / 3 - 2px);
  border-radius: calc(var(--_environment-panel-height) / 25);
  background-color: var(--_button-background);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg:hover {
  background-color: var(--_button-background-hover);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg line {
  stroke: var(--_button-text);
  stroke-width: 2;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg rect,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path {
  fill-opacity: 0;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active {
  pointer-events: none;
  background-color: var(--_button-background-active);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active line {
  stroke: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active circle {
  fill: var(--_accent-color);
}
`,xm=`/* The element that display info while in latex mode */
#mathlive-suggestion-popover {
  --_suggestion-zindex: var(--suggestion-zindex, 100);
  background-color: rgba(97, 97, 97);
  color: #fff;
  text-align: center;
  border-radius: 8px;
  position: fixed;
  z-index: var(--_suggestion-zindex);
  display: none;
  flex-direction: column;
  justify-content: center;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
}
#mathlive-suggestion-popover.top-tip::after {
  content: '';
  position: absolute;
  top: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-bottom: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.bottom-tip::after {
  content: '';
  position: absolute;
  bottom: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-top: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.is-animated {
  transition: all 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  animation: ML__fade-in cubic-bezier(0, 0, 0.2, 1) 0.15s;
}
#mathlive-suggestion-popover.is-visible {
  display: flex;
}
@keyframes ML__fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
/* The wrapper class for the entire content of the popover panel */
#mathlive-suggestion-popover ul {
  display: flex;
  flex-flow: column;
  list-style: none;
  margin: 0;
  padding: 0;
  align-items: flex-start;
  max-height: 400px;
  overflow-y: auto;
}
#mathlive-suggestion-popover li {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  margin: 8px;
  padding: 8px;
  width: calc(100% - 16px - 16px);
  column-gap: 1em;
  border-radius: 8px;
  cursor: pointer;
  /* Since the content can be clicked on, provide feedback on hover */
}
#mathlive-suggestion-popover li a {
  color: #5ea6fd;
  padding-top: 0.3em;
  margin-top: 0.4em;
  display: block;
}
#mathlive-suggestion-popover li a:hover {
  color: #5ea6fd;
  text-decoration: underline;
}
#mathlive-suggestion-popover li:hover,
#mathlive-suggestion-popover li.is-pressed,
#mathlive-suggestion-popover li.is-active {
  background: rgba(255, 255, 255, 0.1);
}
/* The command inside a popover (inside a #mathlive-suggestion-popover) */
.ML__popover__command {
  font-size: 1.6rem;
  font-family: KaTeX_Main;
}
.ML__popover__current {
  background: #5ea6fd;
  color: #fff;
}
.ML__popover__latex {
  font-family: 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  align-self: center;
}
/* The keyboard shortcuts for a symbol as displayed in the popover */
.ML__popover__keybinding {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 0.8em;
  opacity: 0.7;
}
/* Style for the character that joins the modifiers of a keyboard shortcut 
(usually a "+" sign)*/
.ML__shortcut-join {
  opacity: 0.5;
}
`,vm=`/* The element that displays the keys as the user type them */
#mathlive-keystroke-caption-panel {
  visibility: hidden;
  /*min-width: 160px;*/
  /*background-color: rgba(97, 97, 200, .95);*/
  background: var(--secondary, hsl(var(--_hue), 19%, 26%));
  border-color: var(--secondary-border, hsl(0, 0%, 91%));
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
  text-align: center;
  border-radius: 6px;
  padding: 16px;
  position: absolute;
  z-index: 1;
  display: flex;
  flex-direction: row-reverse;
  justify-content: center;
  --keystroke: white;
  --on-keystroke: #555;
  --keystroke-border: #f7f7f7;
}
@media (prefers-color-scheme: dark) {
  body:not([theme='light']) #mathlive-keystroke-caption-panel {
    --keystroke: hsl(var(--_hue), 50%, 30%);
    --on-keystroke: hsl(0, 0%, 98%);
    --keystroke-border: hsl(var(--_hue), 50%, 25%);
  }
}
body[theme='dark'] #mathlive-keystroke-caption-panel {
  --keystroke: hsl(var(--_hue), 50%, 30%);
  --on-keystroke: hsl(0, 0%, 98%);
  --keystroke-border: hsl(var(--_hue), 50%, 25%);
}
#mathlive-keystroke-caption-panel > span {
  min-width: 14px;
  /*height: 8px;*/
  margin: 0 8px 0 0;
  padding: 4px;
  background-color: var(--keystroke);
  color: var(--on-keystroke);
  fill: currentColor;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 1em;
  border-radius: 6px;
  border: 2px solid var(--keystroke-border);
  /*box-shadow: 0 7px 14px rgba(0,0,0,0.25), 0 5px 5px rgba(0,0,0,0.22);*/
}
`,_m=`.ML__keyboard {
  --_keyboard-height: 0;
  --_keyboard-zindex: var(--keyboard-zindex, 105);
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_padding-horizontal: var(--keyboard-padding-horizontal, 0px);
  --_padding-top: var(--keyboard-padding-top, 5px);
  --_padding-bottom: var(--keyboard-padding-bottom, 0px);
  --_row-padding-left: var(--keyboard-row-padding-left, 0px);
  --_row-padding-right: var(--keyboard-row-padding-right, 0px);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-text-active: var(--keyboard-toolbar-text-active, var(--_accent-color));
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_toolbar-font-size: var(--keyboard-toolbar-font-size, '135%');
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, #f0f0f0);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-primary-background: var(--keycap-primary-background, var(--_accent-color));
  --_keycap-primary-text: var(--keycap-primary-text, #ddd);
  --_keycap-primary-background-hover: var(--keycap-primary-background-hover, #0d80f2);
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_keycap-height: var(--keycap-height, 60px);
  /* Keycap width (incl. margin) */
  --_keycap-max-width: var(--keycap-max-width, 100px);
  --_keycap-gap: var(--keycap-gap, 8px);
  --_keycap-font-size: var(--keycap-font-size, clamp(16px, 4cqw, 24px));
  --_keycap-small-font-size: var(--keycap-small-font-size, calc(var(--keycap-font-size) * 0.8));
  --_keycap-extra-small-font-size: var(--keycap-extra-small-font-size, calc(var(--keycap-font-size) / 1.42));
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-text, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
  --_variant-keycap-length: var(--variant-keycap-length, 70px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 30px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 12px);
  --_keycap-shift-font-size: var(--keycap-shift-font-size, 16px);
  --_keycap-shift-color: var(--keycap-shift-color, var(--_accent-color));
  --_box-placeholder-color: var(--box-placeholder-color, var(--_accent-color));
  --_box-placeholder-pressed-color: var(--box-placeholder-pressed-color, var(--keycap-text-pressed));
  --_keycap-glyph-size: var(--keycap-glyph-size, 20px);
  --_keycap-glyph-size-lg: var(--keycap-glyph-size-lg, 24px);
  --_keycap-glyph-size-xl: var(--keycap-glyph-size-xl, 50px);
}
.is-math-mode .MLK__rows .if-text-mode,
.is-text-mode .MLK__rows .if-math-mode {
  display: none;
}
.if-can-undo,
.if-can-redo,
.if-can-copy,
.if-can-cut,
.if-can-paste {
  opacity: 0.4;
  pointer-events: none;
}
.can-undo .if-can-undo,
.can-redo .if-can-redo,
.can-copy .if-can-copy,
.can-cut .if-can-cut,
.can-paste .if-can-paste {
  opacity: 1;
  pointer-events: all;
}
body > .ML__keyboard {
  position: fixed;
  --_padding-bottom: calc(var(--keyboard-padding-bottom, 0px) + env(safe-area-inset-bottom, 0));
}
body > .ML__keyboard.is-visible > .MLK__backdrop {
  box-shadow: 0 -5px 6px rgba(0, 0, 0, 0.08);
  border-top: 1px solid var(--_border);
}
body > .ML__keyboard.backdrop-is-transparent.is-visible > .MLK__backdrop {
  box-shadow: none;
  border: none;
}
body > .ML__keyboard.is-visible.animate > .MLK__backdrop {
  transition: 0.28s cubic-bezier(0, 0, 0.2, 1);
  transition-property: transform, opacity;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__keyboard {
  position: relative;
  overflow: hidden;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  z-index: var(--_keyboard-zindex);
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  opacity: 1;
  transform: none;
  pointer-events: none;
}
.ML__keyboard :where(div) {
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  transform: none;
}
.MLK__backdrop {
  position: absolute;
  bottom: calc(-1 * var(--_keyboard-height));
  width: 100%;
  height: var(--_keyboard-height);
  box-sizing: border-box;
  padding-top: var(--_padding-top);
  padding-bottom: var(--_padding-bottom);
  padding-left: var(--_padding-horizontal);
  padding-right: var(--_padding-horizontal);
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0);
  background: var(--_background);
}
.backdrop-is-transparent .MLK__backdrop {
  background: transparent;
}
/* If a custom layout has a custom container/backdrop
  (backdrop-is-transparent), make sure to let pointer event go through. */
.backdrop-is-transparent .MLK__plate {
  background: transparent;
  pointer-events: none;
}
/* If a custom layout has a custom container/backdrop, make sure to 
   allow pointer events on it. */
.backdrop-is-transparent .MLK__layer > div > div {
  pointer-events: all;
}
.ML__keyboard.is-visible > .MLK__backdrop {
  transform: translate(0, calc(-1 * var(--_keyboard-height)));
  opacity: 1;
  visibility: visible;
}
.caps-lock-indicator {
  display: none;
  width: 8px;
  height: 8px;
  background: #0cbc0c;
  box-shadow: inset 0 0 4px 0 #13ca13, 0 0 4px 0 #a9ef48;
  border-radius: 8px;
  right: 8px;
  top: 8px;
  position: absolute;
}
.ML__keyboard.is-caps-lock .caps-lock-indicator {
  display: block;
}
.ML__keyboard.is-caps-lock .shift {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
}
.MLK__plate {
  position: absolute;
  top: var(--_padding-top);
  left: var(--_padding-horizontal);
  width: calc(100% - 2 * var(--_padding-horizontal));
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  container-type: inline-size;
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
  pointer-events: all;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 16px;
  /* Size of toolbar labels */
  font-weight: 400;
  text-shadow: none;
}
.ML__box-placeholder {
  color: var(--_box-placeholder-color);
}
.MLK__tex {
  font-family: KaTeX_Main, KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__tex-math {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
  font-style: italic;
}
.MLK__layer {
  display: none;
  outline: none;
}
.MLK__layer.is-visible {
  display: flex;
  flex-flow: column;
}
/* Keyboard layouts are made or rows of keys... */
.MLK__rows {
  --_keycap-width: var(--keycap-width, min(var(--_keycap-max-width), 10cqw));
  display: flex;
  flex-flow: column;
  align-items: center;
  border-collapse: separate;
  clear: both;
  border: 0;
  margin: 0;
  margin-bottom: var(--_keycap-gap);
  gap: var(--_keycap-gap);
  /* If the styling include, e.g., some shadows, they will be
  cut off by the overflow. In that case, set the padding to 
  compensate. */
  padding-left: var(--_row-padding-left);
  padding-right: var(--_row-padding-right);
  overflow: visible;
  touch-action: none;
}
.MLK__rows > .MLK__row {
  display: flex;
  flex-flow: row;
  justify-content: center;
  width: 100%;
  gap: var(--_keycap-gap);
  margin: 0;
  padding: 0;
  /* For the alignment of the text on some modifiers (e.g. shift) */
  /* Extra spacing between two adjacent keys */
}
.MLK__rows > .MLK__row .tex {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .tex-math {
  font-family: KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .big-op {
  font-size: calc(1.25 * var(--_keycap-font-size));
}
.MLK__rows > .MLK__row .small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__rows > .MLK__row .bottom {
  justify-content: flex-end;
}
.MLK__rows > .MLK__row .left {
  align-items: flex-start;
  padding-left: 12px;
}
.MLK__rows > .MLK__row .right {
  align-items: flex-end;
  padding-right: 12px;
}
.MLK__rows > .MLK__row .w0 {
  width: 0;
}
.MLK__rows > .MLK__row .w5 {
  width: calc(0.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w15 {
  width: calc(1.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w20 {
  width: calc(2 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w40 {
  width: calc(4 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w50 {
  width: calc(5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .MLK__keycap.w50 {
  font-size: 80%;
  padding-top: 10px;
  font-weight: 100;
}
.MLK__rows > .MLK__row .separator {
  background: transparent;
  border: none;
  pointer-events: none;
}
.MLK__rows > .MLK__row .horizontal-rule {
  height: 6px;
  margin-top: 3px;
  margin-bottom: 0;
  width: 100%;
  border-radius: 0;
  border-top: var(--_horizontal-rule);
}
.MLK__rows > .MLK__row .ghost {
  background: var(--_toolbar-background);
  border: none;
  color: var(--_toolbar-text);
}
.MLK__rows > .MLK__row .ghost:hover {
  background: var(--_toolbar-background-hover);
}
.MLK__rows > .MLK__row .bigfnbutton {
  font-size: var(--_keycap-extra-small-font-size);
}
.MLK__rows > .MLK__row .shift,
.MLK__rows > .MLK__row .action {
  color: var(--_keycap-secondary-text);
  background: var(--_keycap-secondary-background);
  border-color: var(--_keycap-secondary-border);
  border-bottom-color: var(--_keycap-secondary-border-bottom);
  line-height: 0.8;
  font-size: min(1rem, var(--_keycap-small-font-size));
  font-weight: 600;
  padding: 8px 12px 8px 12px;
}
.MLK__rows > .MLK__row .shift:hover,
.MLK__rows > .MLK__row .action:hover {
  background: var(--_keycap-secondary-background-hover);
}
.MLK__rows > .MLK__row .action.primary {
  background: var(--_keycap-primary-background);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .action.primary:hover {
  background: var(--_keycap-primary-background-hover);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .shift.selected,
.MLK__rows > .MLK__row .action.selected {
  color: var(--_toolbar-text-active);
}
.MLK__rows > .MLK__row .shift.selected.is-pressed,
.MLK__rows > .MLK__row .action.selected.is-pressed,
.MLK__rows > .MLK__row .shift.selected.is-active,
.MLK__rows > .MLK__row .action.selected.is-active {
  color: white;
}
.MLK__rows > .MLK__row .warning {
  background: #cd0030;
  color: white;
}
.MLK__rows > .MLK__row .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
/** A regular keycap
 * Use the :where() pseudo-class to give it a very low specifity, 
 * so that it can be overriden by custom style.
 */
:where(.MLK__rows > .MLK__row div) {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-evenly;
  width: calc(var(--_keycap-width) - var(--_keycap-gap));
  height: var(--_keycap-height);
  box-sizing: border-box;
  padding: 0;
  vertical-align: top;
  text-align: center;
  float: left;
  color: var(--_keycap-text);
  fill: currentColor;
  font-size: var(--_keycap-font-size);
  background: var(--_keycap-background);
  border: 1px solid var(--_keycap-border);
  border-bottom-color: var(--_keycap-border-bottom);
  border-radius: 6px;
  cursor: pointer;
  touch-action: none;
  /* Keys with a variants panel */
  position: relative;
  overflow: hidden;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
:where(.MLK__rows > .MLK__row div):hover {
  overflow: visible;
  background: var(--_keycap-background-hover);
  color: var(--_keycap-text-hover);
}
:where(.MLK__rows > .MLK__row div) .ML__latex {
  pointer-events: none;
  touch-action: none;
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph {
  margin: 8px 0;
  width: var(--_keycap-glyph-size);
  height: var(--_keycap-glyph-size);
  min-height: var(--_keycap-glyph-size);
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph-lg {
  margin: 8px 0;
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
:where(.MLK__rows > .MLK__row div).MLK__tex-math {
  font-size: 25px;
}
:where(.MLK__rows > .MLK__row div).is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  z-index: calc(var(--_keyboard-zindex) - 5);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active aside,
:where(.MLK__rows > .MLK__row div).action.is-active aside,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed aside,
:where(.MLK__rows > .MLK__row div).action.is-pressed aside {
  display: none;
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-pressed .MLK__shift {
  display: none;
}
:where(.MLK__rows > .MLK__row div).shift.is-pressed,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
}
:where(.MLK__rows > .MLK__row div).shift.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div) small {
  color: var(--_keycap-secondary-text);
}
:where(.MLK__rows > .MLK__row div) aside {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 10px;
  line-height: 10px;
  color: var(--_keycap-secondary-text);
}
/* Add an attribute 'data-tooltip' to display a tooltip on hover.
Note there are a different set of tooltip rules for the keyboard toggle
(it's in a different CSS tree) */
.ML__keyboard [data-tooltip] {
  position: relative;
}
.ML__keyboard [data-tooltip]::after {
  position: absolute;
  display: inline-table;
  content: attr(data-tooltip);
  top: inherit;
  bottom: 100%;
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  background: #616161;
  color: #fff;
  text-align: center;
  z-index: 2;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  border-radius: 2px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-weight: 400;
  font-size: 12px;
  transition: all 0.15s cubic-bezier(0.4, 0, 1, 1) 1s;
  opacity: 0;
  transform: scale(0.5);
}
.ML__keyboard [data-tooltip]:hover {
  position: relative;
}
.ML__keyboard [data-tooltip]:hover::after {
  opacity: 1;
  transform: scale(1);
}
.MLK__toolbar {
  align-self: center;
  display: flex;
  flex-flow: row;
  justify-content: space-between;
  width: 100%;
  max-width: 996px;
  min-height: 32px;
  /* Icons for undo/redo, etc. */
}
.MLK__toolbar svg {
  height: 20px;
  width: 20px;
}
.MLK__toolbar > .left {
  position: relative;
  display: flex;
  justify-content: flex-start;
  flex-flow: row;
}
.MLK__toolbar > .right {
  display: flex;
  justify-content: flex-end;
  flex-flow: row;
}
.MLK__toolbar > div > div {
  /* "button" in the toolbar */
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--_toolbar-text);
  fill: currentColor;
  background: var(--_toolbar-background);
  font-size: var(--_toolbar-font-size);
  padding: 4px 15px;
  cursor: pointer;
  width: max-content;
  min-width: 42px;
  min-height: 34px;
  border: none;
  padding-left: 10px;
  padding-right: 10px;
  padding-bottom: 8px;
  padding-top: 8px;
  margin-top: 0;
  margin-bottom: 4px;
  margin-left: 4px;
  margin-right: 4px;
  border-radius: 8px;
  box-shadow: none;
  border-bottom: 2px solid transparent;
}
.MLK__toolbar > div > div:not(.disabled):not(.selected):hover {
  background: var(--_toolbar-background-hover);
}
.MLK__toolbar > div > div.disabled svg,
.MLK__toolbar > div > div.disabled:hover svg,
.MLK__toolbar > div > div.disabled.is-pressed svg {
  color: var(--_toolbar-text);
  opacity: 0.2;
}
.MLK__toolbar > div > div:hover,
.MLK__toolbar > div > div:active,
.MLK__toolbar > div > div.is-pressed,
.MLK__toolbar > div > div.is-active {
  color: var(--_toolbar-text-active);
}
.MLK__toolbar > div > div.selected {
  color: var(--_toolbar-text-active);
  background: var(--_toolbar-background-selected);
  border-radius: 0;
  border-bottom-color: var(--_toolbar-text-active);
  padding-bottom: 4px;
  margin-bottom: 8px;
}
/* This is the element that displays variants on press+hold */
.MLK__variant-panel {
  visibility: hidden;
  position: fixed;
  display: flex;
  flex-flow: row wrap-reverse;
  justify-content: center;
  align-content: center;
  margin: 0;
  padding: 0;
  bottom: auto;
  top: 0;
  box-sizing: content-box;
  transform: none;
  z-index: calc(var(--_keyboard-zindex) + 1);
  touch-action: none;
  max-width: 350px;
  background: var(--_variant-panel-background);
  text-align: center;
  border-radius: 6px;
  padding: 6px;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
  transition: none;
}
.MLK__variant-panel.is-visible {
  visibility: visible;
}
.MLK__variant-panel.compact {
  --_variant-keycap-length: var(--variant-keycap-length, 50px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 10px);
}
.MLK__variant-panel .item {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: center;
  font-size: var(--_variant-keycap-font-size);
  height: var(--_variant-keycap-length);
  width: var(--_variant-keycap-length);
  margin: 0;
  box-sizing: border-box;
  border-radius: 5px;
  border: 1px solid transparent;
  background: transparent;
  pointer-events: all;
  cursor: pointer;
  color: var(--_variant-keycap-text);
  fill: currentColor;
}
@media (max-height: 412px) {
  .MLK__variant-panel .item {
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
.MLK__variant-panel .item .ML__latex {
  pointer-events: none;
}
.MLK__variant-panel .item:hover {
  color: var(--_keycap-text-hover);
}
.MLK__variant-panel .item.is-active {
  background: var(--_variant-keycap-background-active);
  color: var(--_variant-keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.is-pressed {
  background: var(--_variant-keycap-background-pressed);
  color: var(--_variant-keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__variant-panel .item.swatch-button {
  box-sizing: border-box;
  background: #fbfbfb;
}
.MLK__variant-panel .item.swatch-button > span {
  display: inline-block;
  margin: 6px;
  width: calc(100% - 12px);
  height: calc(100% - 12px);
  border-radius: 50%;
}
.MLK__variant-panel .item.swatch-button:hover {
  background: #f0f0f0;
}
.MLK__variant-panel .item.swatch-button:hover > span {
  border-radius: 2px;
}
.MLK__variant-panel .item.box > div,
.MLK__variant-panel .item.box > span {
  border: 1px dashed rgba(0, 0, 0, 0.24);
}
.MLK__variant-panel .item .warning {
  min-height: 60px;
  min-width: 60px;
  background: #cd0030;
  color: white;
  padding: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 5px;
}
.MLK__variant-panel .item .warning.is-pressed,
.MLK__variant-panel .item .warning.is-active {
  background: red;
}
.MLK__variant-panel .item .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-xl);
  height: var(--_keycap-glyph-size-xl);
}
.MLK__variant-panel .item aside {
  font-size: var(--_variant-keycap-aside-font-size);
  line-height: 12px;
  opacity: 0.78;
  padding-top: 2px;
  width: 100%;
  text-align: center;
  text-wrap: wrap;
}
.MLK__keycap {
  position: relative;
}
.MLK__shift {
  display: block;
  position: absolute;
  right: 4px;
  top: 4px;
  font-size: var(--_keycap-shift-font-size);
  color: var(--_keycap-shift-color);
}
.hide-shift .MLK__shift {
  display: none;
}
@media (max-width: 414px) {
  .MLK__variant-panel {
    max-width: 350px;
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
/* @xs breakpoint: iPhone 5 */
@container (max-width: 414px) {
  .MLK__rows {
    --_keycap-gap: max(var(--_keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--_keycap-height), 42px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width)), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    font-size: 100%;
    margin-left: 2px;
    margin-right: 2px;
  }
  .MLK__rows .shift,
  .MLK__rows .action {
    font-size: 65%;
  }
  .MLK__rows .warning svg.svg-glyph {
    width: 14px;
    height: 14px;
    min-height: 14px;
  }
}
@container (max-width: 744px) {
  .MLK__rows {
    --_keycap-gap: max(var(--keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--keycap-height, 52px), 52px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    padding-left: 0;
    padding-right: 0;
  }
  .MLK__tooltip::after {
    padding: 8px 16px;
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.fnbutton {
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.bigfnbutton {
    font-size: calc(var(--_keycap-extra-small-font-size) / 1.55);
  }
  .MLK__rows > .MLK__row > div.small {
    font-size: 13px;
  }
  .MLK__rows > .MLK__row > div > aside {
    display: none;
  }
  .MLK__shift {
    display: none;
  }
}
/* Medium breakpoint: larger phones */
@container (max-width: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@media (max-height: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@container (max-width: 1444px) {
  .MLK__rows .if-wide {
    display: none;
  }
}
@media (prefers-color-scheme: dark) {
  .ML__keyboard {
    --_accent-color: var(--keyboard-accent-color, #0b5c9c);
    --_background: var(--keyboard-background, #151515);
    --_border: var(--keyboard-border, transparent);
    --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
    --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
    --keyboard-toolbar-background-hover: #303030;
    --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
    --_keycap-background: var(--keycap-background, #1f2022);
    --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
    --_keycap-border: var(--_keycap-border, transparent);
    --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
    --_keycap-text: var(--keycap-text, #e3e4e8);
    --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
    --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
    --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
    --keycap-secondary-border: transparent;
    --keycap-secondary-border-bottom: transparent;
    --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
    --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
    --_variant-panel-background: var(--variant-panel-background, #303030);
    --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
  }
}
/* Same as the media query, but with a class */
[theme='dark'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0b5c9c);
  --_background: var(--keyboard-background, #151515);
  --_border: var(--keyboard-border, transparent);
  --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
  --keyboard-toolbar-background-hover: #303030;
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
  --_keycap-background: var(--keycap-background, #1f2022);
  --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
  --_keycap-border: var(--_keycap-border, transparent);
  --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
  --_keycap-text: var(--keycap-text, #e3e4e8);
  --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
  --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
  --keycap-secondary-border: transparent;
  --keycap-secondary-border-bottom: transparent;
  --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
  --_variant-panel-background: var(--variant-panel-background, #303030);
  --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
}
[theme='light'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, white);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--_keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--_keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-textvar, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
}
`,Mm=`:host {
  --primary-color: #5898ff;
  --primary-color-dimmed: #c0c0f0;
  --primary-color-dark: var(--blue-500);
  --primary-color-light: var(--blue-100);
  --primary-color-reverse: #ffffff;
  --secondary-color: #ff8a65;
  --secondary-color-dimmed: #f0d5c5;
  --secondary-color-dark: var(--orange-500);
  --secondary-color-light: var(--orange-100);
  --secondary-color-reverse: #ffffff;
  --link-color: #5898ff;
  --link-color-dimmed: #c5c5c5;
  --link-color-dark: #121212;
  --link-color-light: #e2e2e2;
  --link-color-reverse: #ffffff;
  --semantic-blue: var(--blue-700);
  --semantic-red: var(--red-400);
  --semantic-orange: var(--orange-400);
  --semantic-green: var(--green-700);
  --neutral-100: #f5f5f5;
  --neutral-200: #eeeeee;
  --neutral-300: #e0e0e0;
  --neutral-400: #bdbdbd;
  --neutral-500: #9e9e9e;
  --neutral-600: #757575;
  --neutral-700: #616161;
  --neutral-800: #424242;
  --neutral-900: #212121;
  --red-25: #fff8f7;
  --red-50: #fff1ef;
  --red-100: #ffeae6;
  --red-200: #ffcac1;
  --red-300: #ffa495;
  --red-400: #ff7865;
  --red-500: #f21c0d;
  --red-600: #e50018;
  --red-700: #d30024;
  --red-800: #bd002c;
  --red-900: #a1002f;
  --orange-25: #fffbf8;
  --orange-50: #fff7f1;
  --orange-100: #fff3ea;
  --orange-200: #ffe1c9;
  --orange-300: #ffcca2;
  --orange-400: #ffb677;
  --orange-500: #fe9310;
  --orange-600: #f58700;
  --orange-700: #ea7c00;
  --orange-800: #dc6d00;
  --orange-900: #ca5b00;
  --brown-25: #fff8ef;
  --brown-50: #fff1df;
  --brown-100: #ffe9ce;
  --brown-200: #ebcca6;
  --brown-300: #cdaf8a;
  --brown-400: #af936f;
  --brown-500: #856a47;
  --brown-600: #7f5e34;
  --brown-700: #78511f;
  --brown-800: #6e4200;
  --brown-900: #593200;
  --yellow-25: #fffdf9;
  --yellow-50: #fffcf2;
  --yellow-100: #fffaec;
  --yellow-200: #fff2ce;
  --yellow-300: #ffe8ab;
  --yellow-400: #ffdf85;
  --yellow-500: #ffcf33;
  --yellow-600: #f1c000;
  --yellow-700: #dfb200;
  --yellow-800: #c9a000;
  --yellow-900: #ad8a00;
  --lime-25: #f4ffee;
  --lime-50: #e9ffdd;
  --lime-100: #ddffca;
  --lime-200: #a8fb6f;
  --lime-300: #94e659;
  --lime-400: #80d142;
  --lime-500: #63b215;
  --lime-600: #45a000;
  --lime-700: #268e00;
  --lime-800: #007417;
  --lime-900: #005321;
  --green-25: #f5fff5;
  --green-50: #ebffea;
  --green-100: #e0ffdf;
  --green-200: #a7ffa7;
  --green-300: #5afa65;
  --green-400: #45e953;
  --green-500: #17cf36;
  --green-600: #00b944;
  --green-700: #00a34a;
  --green-800: #008749;
  --green-900: #00653e;
  --teal-25: #f3ffff;
  --teal-50: #e6fffe;
  --teal-100: #d9fffe;
  --teal-200: #8dfffe;
  --teal-300: #57f4f4;
  --teal-400: #43e5e5;
  --teal-500: #17cfcf;
  --teal-600: #00c2c0;
  --teal-700: #00b5b1;
  --teal-800: #00a49e;
  --teal-900: #009087;
  --cyan-25: #f7fcff;
  --cyan-50: #eff8ff;
  --cyan-100: #e7f5ff;
  --cyan-200: #c2e6ff;
  --cyan-300: #95d5ff;
  --cyan-400: #61c4ff;
  --cyan-500: #13a7ec;
  --cyan-600: #069eda;
  --cyan-700: #0095c9;
  --cyan-800: #0088b2;
  --cyan-900: #0a7897;
  --blue-25: #f7faff;
  --blue-50: #eef5ff;
  --blue-100: #e5f1ff;
  --blue-200: #bfdbff;
  --blue-300: #92c2ff;
  --blue-400: #63a8ff;
  --blue-500: #0d80f2;
  --blue-600: #0077db;
  --blue-700: #006dc4;
  --blue-800: #0060a7;
  --blue-900: #005086;
  --indigo-25: #f8f7ff;
  --indigo-50: #f1efff;
  --indigo-100: #eae7ff;
  --indigo-200: #ccc3ff;
  --indigo-300: #ac99ff;
  --indigo-400: #916aff;
  --indigo-500: #63c;
  --indigo-600: #5a21b2;
  --indigo-700: #4e0b99;
  --indigo-800: #3b0071;
  --indigo-900: #220040;
  --purple-25: #fbf7ff;
  --purple-50: #f8f0ff;
  --purple-100: #f4e8ff;
  --purple-200: #e4c4ff;
  --purple-300: #d49aff;
  --purple-400: #c36aff;
  --purple-500: #a219e6;
  --purple-600: #9000c4;
  --purple-700: #7c009f;
  --purple-800: #600073;
  --purple-900: #3d0043;
  --magenta-25: #fff8fb;
  --magenta-50: #fff2f6;
  --magenta-100: #ffebf2;
  --magenta-200: #ffcddf;
  --magenta-300: #ffa8cb;
  --magenta-400: #ff7fb7;
  --magenta-500: #eb4799;
  --magenta-600: #da3689;
  --magenta-700: #c82179;
  --magenta-800: #b00065;
  --magenta-900: #8a004c;
}
@media (prefers-color-scheme: dark) {
  :host {
    --semantic-blue: var(--blue-700);
    --semantic-red: var(--red-400);
    --semantic-orange: var(--orange-400);
    --semantic-green: var(--green-700);
    --semantic-bg-blue: var(--blue-25);
    --semantic-bg-red: var(--red-25);
    --semantic-bg-orange: var(--orange-25);
    --semantic-bg-green: var(--green-25);
    --neutral-100: #121212;
    --neutral-200: #424242;
    --neutral-300: #616161;
    --neutral-400: #757575;
    --neutral-500: #9e9e9e;
    --neutral-600: #bdbdbd;
    --neutral-700: #e0e0e0;
    --neutral-800: #eeeeee;
    --neutral-900: #f5f5f5;
  }
}
:host([theme='dark']) {
  --semantic-blue: var(--blue-700);
  --semantic-red: var(--red-400);
  --semantic-orange: var(--orange-400);
  --semantic-green: var(--green-700);
  --semantic-bg-blue: var(--blue-25);
  --semantic-bg-red: var(--red-25);
  --semantic-bg-orange: var(--orange-25);
  --semantic-bg-green: var(--green-25);
  --neutral-100: #121212;
  --neutral-200: #424242;
  --neutral-300: #616161;
  --neutral-400: #757575;
  --neutral-500: #9e9e9e;
  --neutral-600: #bdbdbd;
  --neutral-700: #e0e0e0;
  --neutral-800: #eeeeee;
  --neutral-900: #f5f5f5;
}
/* @media (prefers-color-scheme: dark) {
  :host {
      --label-color: #fff;
      --active-label-color: #000;
      --menu-bg: #525252;
      --active-bg: #5898ff;
      --active-bg-dimmed: #5c5c5c;
  }
} */
:host {
  --ui-font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  --ui-font-size: 14px;
  --ui-line-height: 1.5;
  --ui-letter-spacing: 0.007em;
  --mono-font-family: 'Berkeley Mono', 'JetBrains Mono', 'IBM Plex Mono', 'Source Code Pro', Menlo, Monaco, 'Courier New', monospace;
  --ui-layer-1: var(--neutral-100);
  --ui-layer-2: var(--neutral-200);
  --ui-layer-3: var(--neutral-300);
  --ui-layer-4: var(--neutral-400);
  --ui-layer-5: var(--neutral-500);
  --ui-layer-6: var(--neutral-600);
  --ui-border-color: var(--primary-color);
  --ui-border-radius: 4px;
  --ui-text: var(--neutral-900);
  --ui-text-secondary: var(--neutral-700);
  --ui-text-placeholder: var(--neutral-500);
  --ui-text-muted: var(--neutral-300);
  /** A field is a UI element in which a user can type data, for
  * example an input or textarea element.
  */
  --ui-field-bg: var(--neutral-100);
  --ui-field-bg-hover: var(--neutral-100);
  --ui-field-bg-disabled: var(--neutral-300);
  --ui-field-bg-invalid: var(--red-100);
  --ui-field-bg-focus: var(--neutral-100);
  --ui-field-border: 0.5px solid var(--border-color);
  --ui-field-border-hover: 0.5px solid var(--border-color);
  --ui-field-border-disabled: 0.5px solid var(--border-color);
  --ui-field-border-invalid: 0.5px solid var(--border-color);
  --ui-field-border-focus: 0.5px solid var(--border-color);
  --ui-menu-bg: var(--neutral-100);
  --ui-menu-text: var(--neutral-900);
  --ui-menu-bg-hover: var(--neutral-200);
  --ui-menu-text-hover: var(--neutral-900);
  /** The \`active\` state is used for the state of menu items
  * when they are selected.
  */
  --ui-menu-bg-active: var(--primary-color);
  --ui-menu-text-active: var(--primary-color-reverse);
  /** The \`active-muted\` set is used for the state of
  * submenus when they are open.
  */
  --ui-menu-bg-active-muted: var(--neutral-300);
  --ui-menu-text-active-muted: var(--neutral-900);
  /* --ui-menu-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.302),
0 2px 6px 2px rgba(60, 64, 67, 0.149); */
  --ui-menu-shadow: 0 0 2px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 0, 0, 0.2);
  --ui-menu-divider: 0.5px solid #c7c7c7;
  /* var(--neutral-300); */
  --ui-menu-z-index: 10000;
  --page-bg: var(--neutral-100);
  --content-bg: var(--neutral-200);
}
@media (prefers-color-scheme: dark) {
  :host {
    --ui-menu-bg: var(--neutral-200);
  }
}
:host([theme='dark']) {
  --ui-menu-bg: var(--neutral-200);
}
/* PingFang SC is a macOS font. Microsoft Yahei is a Windows font. 
  Noto  is a Linux/Android font.
*/
:lang(zh-cn),
:lang(zh-sg),
:lang(zh-my),
:lang(zh) {
  --ui-font-family: -apple-system, system-ui, 'PingFang SC', 'Hiragino Sans GB', 'Noto Sans CJK SC', 'Noto Sans SC', 'Noto Sans', 'Microsoft Yahei UI', 'Microsoft YaHei New', 'Microsoft Yahei', '', SimSun, '', STXihei, '', sans-serif;
}
:lang(zh-tw),
:lang(zh-hk),
:lang(zh-mo) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans', 'Microsoft JhengHei UI', 'Microsoft JhengHei', '', '', 'PMingLiU', '', 'MingLiU', sans-serif;
}
:lang(ja),
:lang(ja-jp),
:lang(ja-jp-mac) {
  --ui-font-family: -apple-system, system-ui, 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans CJK JP', 'Noto Sans JP', 'Noto Sans', '', '', YuGothic, 'Yu Gothic', '', Meiryo, ' ', 'MS PGothic', sans-serif;
}
:lang(ko),
:lang(ko-kr),
:lang(ko-kr-std) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Malgun Gothic', ' ', 'Apple SD Gothic Neo', ' SD  Neo', 'Apple SD  Neo', '', Dotum, sans-serif;
}
:lang(ko-kr-apple) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Apple SD Gothic Neo', ' SD  Neo', 'Apple SD  Neo', '', Dotum, sans-serif;
}
:lang(zh-cn),
:lang(zh-sg),
:lang(zh-my),
:lang(zh),
:lang(zh-tw),
:lang(zh-hk),
:lang(zh-mo),
:lang(ja),
:lang(ja-jp),
:lang(ja-jp-mac),
:lang(ko),
:lang(ko-kr),
:lang(ko-kr-std),
:lang(ko-kr-apple) {
  --ui-font-size: 1rem;
  --ui-line-height: 1.7;
  --ui-letter-spacing: 0;
}
:dir(rtl) {
  --ui-line-height: auto;
  --ui-letter-spacing: 0;
}
`,wm=`.ui-menu *,
.ui-menu ::before,
.ui-menu ::after {
  box-sizing: border-box;
}
.ui-menu {
  display: none;
  color-scheme: light dark;
  -webkit-user-select: none;
  /* Important: Safari iOS doesn't respect user-select */
  user-select: none;
  cursor: default;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: rgba(0 0 0 0);
  --active-label-color: #fff;
  /* ui-menu-text-active */
  --label-color: #121212;
  /* ui-menu-text */
  --menu-bg: #e2e2e2;
  /* ui-menu-background */
  --active-bg: #5898ff;
  /* ui-menu-background-active */
  --active-bg-dimmed: #c5c5c5;
  /* ui-menu-background-active-muted */
}
/** Use the :where pseudo selector to make the specificity of the
 * selector 0, so that it can be overridden by the user.
 */
:where(.ui-menu-container) {
  position: absolute;
  overflow: visible;
  width: auto;
  height: auto;
  z-index: 10000;
  border-radius: 8px;
  background: var(--ui-menu-bg);
  box-shadow: var(--ui-menu-shadow);
  list-style: none;
  padding: 6px 0 6px 0;
  margin: 0;
  user-select: none;
  cursor: default;
  color: var(--ui-menu-text);
  font-weight: normal;
  font-style: normal;
  text-shadow: none;
  text-transform: none;
  letter-spacing: 0;
  outline: none;
  opacity: 1;
  /* The [popover] elements have a 1px solid black border. Ugh. */
  border: none;
  width: fit-content;
  height: fit-content;
}
:where(.ui-menu-container > li) {
  display: flex;
  flex-flow: row;
  align-items: center;
  padding: 1px 7px 1px 7px;
  margin-top: 0;
  margin-left: 6px;
  margin-right: 6px;
  border-radius: 4px;
  white-space: nowrap;
  position: relative;
  outline: none;
  fill: currentColor;
  user-select: none;
  cursor: default;
  text-align: left;
  color: inherit;
  font-family: var(--ui-font-family);
  font-size: var(--ui-font-size);
  line-height: var(--ui-line-height);
  letter-spacing: var(--ui-letter-spacing);
}
:where(.ui-menu-container > li > .label) {
  display: flex;
  align-items: center;
  justify-content: space-between;
  appearance: none;
  background: none;
  outline: none;
  width: 100%;
  margin: 0;
  padding: 1px 2px 1px 1px;
  overflow: visible;
  border: 1px solid transparent;
  white-space: nowrap;
  text-align: start;
  align-content: center;
}
:where(.ui-menu-container > li:has(.heading)) {
  margin-top: 0.5em;
}
:where(.ui-menu-container > li > .label.heading) {
  font-weight: bold;
  opacity: 0.4;
}
:where(.ui-menu-container > li.indent > .label) {
  margin-inline-start: 12px;
}
:where(.ui-menu-container > li > .label.indent) {
  margin-inline-start: 12px;
}
:where(.ui-menu-container > li[role='divider']) {
  border-bottom: 1px solid var(--ui-menu-divider);
  border-radius: 0;
  padding: 0;
  margin-left: 15px;
  margin-right: 15px;
  padding-top: 5px;
  margin-bottom: 5px;
  width: calc(100% - 30px);
  /** 100% - (margin-left + margin-right) */
}
:where(.ui-menu-container > li[aria-disabled='true']) {
  opacity: 0.5;
}
:where(.ui-menu-container > li.active) {
  background: var(--ui-menu-bg-active);
  background: -apple-system-control-accent;
  color: var(--ui-menu-text-active);
}
:where(.ui-menu-container > li.active.is-submenu-open) {
  background: var(--ui-menu-bg-active-muted);
  color: inherit;
}
:where(.ui-menu-container > li[aria-haspopup='true'] > .label) {
  padding-inline-end: 0;
}
:where(.ui-menu-container > li[aria-haspopup='true'].active::after) {
  color: var(--ui-menu-text-active);
}
/** Keyboard shortcut */
:where(.ui-menu-container > li > kbd) {
  font-family: var(--ui-font-family);
  margin-inline-start: 12px;
  opacity: 0.4;
}
:where(.ui-menu-container > li.active > kbd) {
  opacity: 0.85;
}
.ui-trailing-chevron {
  display: flex;
  margin-inline-start: 24px;
  width: 10px;
  height: 10px;
  margin-bottom: 4px;
}
.ui-trailing-chevron:dir(rtl) {
  transform: scaleX(-1);
}
.ui-checkmark {
  display: flex;
  margin-inline-end: -11px;
  margin-inline-start: -4px;
  margin-top: 2px;
  width: 16px;
  height: 16px;
}
.ui-mixedmark {
  display: flex;
  margin-inline-end: -11px;
  margin-inline-start: -4px;
  margin-top: 2px;
  width: 16px;
  height: 16px;
}
`,Cr;function Er(t){let e="";switch(t){case"mathfield-element":e=`
    :host { display: inline-block; background-color: field; color: fieldtext; border-width: 1px; border-style: solid; border-color: #acacac; border-radius: 2px;}
    :host([hidden]) { display: none; }
    :host([disabled]), :host([disabled]:focus), :host([disabled]:focus-within) { outline: none; opacity:  .5; }
    :host(:focus), :host(:focus-within) {
      outline: Highlight auto 1px;    /* For Firefox */
      outline: -webkit-focus-ring-color auto 1px;
    }
    :host([readonly]:focus), :host([readonly]:focus-within),
    :host([read-only]:focus), :host([read-only]:focus-within) {
      outline: none;
    }`;break;case"core":e=bm;break;case"mathfield":e=gm;break;case"environment-popover":e=ym;break;case"suggestion-popover":e=xm;break;case"keystroke-caption":e=vm;break;case"virtual-keyboard":e=_m;break;case"ui":e=Mm;break;case"menu":e=wm;break}return e}function ii(t){return Cr||(Cr={}),Cr[t]||(Cr[t]=new CSSStyleSheet,Cr[t].replaceSync(Er(t))),Cr[t]}var Bt;function Ve(t){var e;try{if(!("adoptedStyleSheets"in document)){if(window.document.getElementById(`mathlive-style-${t}`))return;let r=window.document.createElement("style");r.id=`mathlive-style-${t}`,r.append(window.document.createTextNode(Er(t))),window.document.head.appendChild(r);return}if(Bt||(Bt={}),((e=Bt[t])!=null?e:0)!==0)Bt[t]+=1;else{let r=ii(t);document.adoptedStyleSheets=[...document.adoptedStyleSheets,r],Bt[t]=1}}catch(r){console.error("Error injecting stylesheet",t,r)}}function it(t){if("adoptedStyleSheets"in document&&Bt!=null&&Bt[t]&&(Bt[t]-=1,Bt[t]<=0)){let e=Cr[t];document.adoptedStyleSheets=document.adoptedStyleSheets.filter(r=>r!==e)}}var Tr=class uE extends b{constructor(e){var r;super(f(p({},e),{type:"accent",body:(r=e.body)!=null?r:void 0})),e.accentChar?this.accent=e.accentChar:this.svgAccent=e?.svgAccent,this.skipBoundary=!0,this.captureSelection=!0}static fromJson(e){return new uE(e)}toJson(){return f(p({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(e){var r;let a=new O({parent:e,mathstyle:"cramp"},this.style),l=(r=b.createBox(a,this.body))!=null?r:new _("",{style:this.style}),u=0;!this.hasEmptyBranch("body")&&this.body.length===2&&this.body[1].isCharacterBox()&&(u=l.skew);let d=Math.min(l.height,tt),g;if(this.svgAccent)g=Wi(this.svgAccent),d=a.metrics.bigOpSpacing1-d;else if(this.accent){let P=new _(this.accent,{fontFamily:"Main-Regular"});P.italic=0;let Z=this.accent===8407||this.accent===8411||this.accent===8412?" ML__accent-combining-char":"";g=new _(P,{classes:"ML__accent-body"+Z})}g=new Q({shift:0,children:[{box:new _(l)},-d,{box:g,marginLeft:l.left+2*u,classes:["ML__center"]}]});let E=new _(g,{type:"lift"});return this.caret&&(E.caret=this.caret),this.bind(a,E.wrap(a)),this.attachSupsub(a,{base:E})}},Xi={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},Zi=Object.fromEntries(Object.entries(Xi).map(([t,e])=>[e,t]));function Fa(t){var e;return(e={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"":8739,"":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[t])!=null?e:t.codePointAt(0)}function bf(t,e,r,a){var l;let u=new _(Fa(t),{fontFamily:"Main-Regular",isSelected:a.isSelected,classes:"ML__small-delim "+((l=a.classes)!=null?l:"")}).wrap(e);return r&&u.setTop((1-e.scalingFactor)*Oe),u}function km(t,e,r,a,l){var u,d;let g=new O({parent:a,mathstyle:"textstyle"},l?.style),E=new _(Fa(t),{fontFamily:`Size${e}-Regular`,isSelected:l.isSelected,classes:((u=l.classes)!=null?u:"")+` ML__delim-size${e}`,type:(d=l.type)!=null?d:"ignore"}).wrap(g);return r&&E.setTop((1-g.scalingFactor)*Oe),E}function Sm(t,e,r,a,l){var u;let d,g,E,P;d=E=P=Fa(t),g=null;let Z="Size1-Regular";t==="\\vert"||t==="\\lvert"||t==="\\rvert"||t==="\\mvert"||t==="\\mid"?E=d=P=8739:t==="\\Vert"||t==="\\lVert"||t==="\\rVert"||t==="\\mVert"||t==="\\|"?E=d=P=8741:t==="\\uparrow"?E=P=9168:t==="\\Uparrow"?E=P=8214:t==="\\downarrow"?d=E=9168:t==="\\Downarrow"?d=E=8214:t==="\\updownarrow"?(d=8593,E=9168,P=8595):t==="\\Updownarrow"?(d=8657,E=8214,P=8659):t==="["||t==="\\lbrack"?(d=9121,E=9122,P=9123,Z="Size4-Regular"):t==="]"||t==="\\rbrack"?(d=9124,E=9125,P=9126,Z="Size4-Regular"):t==="\\lfloor"||t===""?(E=d=9122,P=9123,Z="Size4-Regular"):t==="\\lceil"||t===""?(d=9121,E=P=9122,Z="Size4-Regular"):t==="\\rfloor"||t===""?(E=d=9125,P=9126,Z="Size4-Regular"):t==="\\rceil"||t===""?(d=9124,E=P=9125,Z="Size4-Regular"):t==="("||t==="\\lparen"?(d=9115,E=9116,P=9117,Z="Size4-Regular"):t===")"||t==="\\rparen"?(d=9118,E=9119,P=9120,Z="Size4-Regular"):t==="\\{"||t==="\\lbrace"?(d=9127,g=9128,P=9129,E=9130,Z="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(d=9131,g=9132,P=9133,E=9130,Z="Size4-Regular"):t==="\\lgroup"||t===""?(d=9127,P=9129,E=9130,Z="Size4-Regular"):t==="\\rgroup"||t===""?(d=9131,P=9133,E=9130,Z="Size4-Regular"):t==="\\lmoustache"||t===""?(d=9127,P=9133,E=9130,Z="Size4-Regular"):t==="\\rmoustache"||t===""?(d=9131,P=9129,E=9130,Z="Size4-Regular"):t==="\\surd"?(d=57345,P=9143,E=57344,Z="Size4-Regular"):t==="\\ulcorner"?(d=9484,E=P=32):t==="\\urcorner"?(d=9488,E=P=32):t==="\\llcorner"?(P=9492,E=d=32):t==="\\lrcorner"&&(d=9496,E=d=32);let me=xr(d,Z),_e=me.height+me.depth,He=xr(E,Z),Xe=He.height+He.depth,wt=xr(P,Z),Do=wt.height+wt.depth,sr=0,Ko=1;if(g!==null){let Rs=xr(g,Z);sr=Rs.height+Rs.depth,Ko=2}let Bs=_e+Do+sr,th=Math.max(0,Math.ceil((e-Bs)/(Ko*Xe))),pf=Bs+th*Ko*Xe,_h=Oe;r&&(_h=_h*a.scalingFactor);let cf=pf/2-_h,df=[];df.push({box:new _(P,{fontFamily:Z})}),df.push(-.008);let uf=new _(E,{fontFamily:Z});if(g===null)for(let Rs=0;Rs<th;Rs++)df.push({box:uf});else{for(let Rs=0;Rs<th;Rs++)df.push({box:uf});df.push(-.008),df.push({box:new _(g,{fontFamily:Z})}),df.push(-.008);for(let Rs=0;Rs<th;Rs++)df.push({box:uf})}df.push(-.008),df.push({box:new _(d,{fontFamily:Z})});let li="";Z==="Size1-Regular"?li=" delim-size1":Z==="Size4-Regular"&&(li=" delim-size4");let Vc=new Q({bottom:cf,children:df},{classes:li});return new _(Vc,f(p({},l??{}),{classes:((u=l?.classes)!=null?u:"")+" ML__delim-mult"}))}var Lm=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","","","",""]),yf=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","","","",""]),Am=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),xf=[0,1.2,1.8,2.4,3];function Cm(t,e,r,a){return t===void 0||t==="."?Qt(r,a.classes):(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),Lm.has(t)||Am.has(t)?km(t,e,!1,r,a):yf.has(t)?Sm(t,xf[e],!1,r,a):null)}var vf=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],_f=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],Mf=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function wf(t){return t.type==="small"?"Main-Regular":t.type==="large"?"Size"+t.size+"-Regular":(t.type,"Size4-Regular")}function kf(t,e,r,a){let l={"-4":0,"-3":1,0:2}[a.mathstyle.sizeDelta];for(let u=l;u<r.length&&r[u].type!=="stack";u++){let d=xr(t,wf(r[u]));if(d.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let g=d.height+d.depth;if(r[u].type==="small"&&(r[u].mathstyle==="scriptscriptstyle"?g*=Math.max(qn[Math.max(1,a.size-2)],a.minFontScale):r[u].mathstyle==="scriptstyle"&&(g*=Math.max(qn[Math.max(1,a.size-1)],a.minFontScale))),g>e)return r[u]}return r[r.length-1]}function Yi(t,e,r,a,l,u){if(!e||e.length===0||e===".")return Qt(l);e==="<"||e==="\\lt"?e="\\langle":(e===">"||e==="\\gt")&&(e="\\rangle");let d;Am.has(e)?d=vf:Lm.has(e)?d=Mf:d=_f;let g=kf(Fa(e),r,d,l),E=new O({parent:l,mathstyle:g.mathstyle},u?.style);return g.type==="small"?bf(e,E,a,f(p({},u),{type:t})):g.type==="large"?km(e,g.size,a,E,f(p({},u),{type:t})):(g.type,Sm(e,r,a,E,f(p({},u),{type:t})))}function ni(t,e,r,a,l,u){if(e===".")return Qt(l,u?.classes);let d=Oe*l.scalingFactor,g=901,E=5/Dt,P=Math.max(r-d,a+d),Z=Math.max(P/500*g,2*P-E);return Yi(t,e,Z,!0,l,u)}function Qt(t,e){let r=new _(null,{classes:" ML__nulldelimiter "+(e??""),type:"ignore"});return r.width=t.getRegisterAsEm("nulldelimiterspace"),r.wrap(new O({parent:t,mathstyle:"textstyle"}))}var Le=class cE extends b{constructor(e){var r;super({type:"placeholder",command:"\\placeholder",mode:(r=e?.mode)!=null?r:"math",style:e?.style}),this.captureSelection=!0}static fromJson(e){return new cE(e)}toJson(){return super.toJson()}render(e){let r;return this.value=e.placeholderSymbol,typeof e.renderPlaceholder=="function"?r=e.renderPlaceholder(e):r=this.createBox(e),this.caret&&(r.classes+=" ML__placeholder-selected"),r}_serialize(e){return e.skipPlaceholders?"":"\\placeholder{}"}},Em=["matrix","matrix*","pmatrix","pmatrix*","bmatrix","bmatrix*","Bmatrix","Bmatrix*","vmatrix","vmatrix*","Vmatrix","Vmatrix*"],Nl=["cases","dcases","rcases"],Tm=["align","align*","aligned","gather","gather*","gathered","split"],Sf=["array","subequations","eqnarray"];function Dm(t){return Tm.includes(t)||Nl.includes(t)||Nl.includes(t)||Em.includes(t)||Sf.includes(t)}function Va(t){return Em.includes(t)}function Km(t){return Nl.includes(t)}function Om(t){return Tm.includes(t)}function Lf(t,e,r){let a=0;for(let P of r.columns)"align"in P&&(a+=1);a=Math.max(a,r.minColumns);let l=0,u=[];for(let P of e){l=Math.max(l,Math.min(P.length,a));let Z=0;for(;Z<P.length;){let me=[],_e=Math.min(P.length,Z+a);for(;Z<_e;)me.push(Af(P[Z],t.mode)),Z+=1;if(me.length<r.minColumns)for(;me.length<r.minColumns;)me.push([new b({type:"first",mode:t.mode})]);u.push(me)}}!t.isMultiline&&u.length>0&&u[u.length-1].length===1&&Cf(u[u.length-1][0])&&u.pop();let d=[];for(let P of u){if(P.length!==l)for(let Z=P.length;Z<l;Z++)t.isMultiline?P.push([new b({type:"first",mode:t.mode})]):P.push([new b({type:"first",mode:t.mode}),new Le]);d.push(P)}let g=0,E=0;for(let P of d){E=0;for(let Z of P){for(let me of Z)me.parent=t,me.parentBranch=[g,E];E+=1}g+=1}return t.isDirty=!0,d}function Af(t,e){return t.length===0?[new b({type:"first",mode:e})]:t[0].type!=="first"?[new b({type:"first",mode:e}),...t]:(t.slice(1).some(r=>r.type==="first"),t)}function Cf(t){return t.length===1&&t[0].type==="first"}var I=class hE extends b{get isMultiline(){let e=this.environmentName;return["lines","multline","multline*","align","split","gather","gathered"].includes(e)}constructor(e,r,a,l={}){var u,d,g,E;if(super({type:"array",isRoot:l.isRoot}),this.environmentName=e,l.columns)l.columns.length===0?this.colFormat=[{align:"l"}]:this.colFormat=[...l.columns];else if(l.minColumns){let P=[];for(let Z=0;Z<l.minColumns;Z++)P.push({align:"l"});this.colFormat=P}else this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}];this.minColumns=(u=l.minColumns)!=null?u:1,this.minRows=(d=l.minRows)!=null?d:1,this.maxRows=(g=l.maxRows)!=null?g:1/0,this._rows=Lf(this,r,{columns:this.colFormat,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows}),this.rowGaps=a,l.arraycolsep!==void 0&&(this.arraycolsep=l.arraycolsep),this.colSeparationType=l.colSeparationType,l.arraystretch!==void 0&&(this.arraystretch=l.arraystretch),l.mathstyleName&&(this.mathstyleName=l.mathstyleName),l.leftDelim&&(this.leftDelim=l.leftDelim),l.rightDelim&&(this.rightDelim=l.rightDelim),this.classes=(E=l.classes)!=null?E:[]}static fromJson(e){return new hE(e.environmentName,e.array,e.rowGaps,e)}toJson(){let e=f(p({},super.toJson()),{environmentName:this.environmentName,array:this._rows.map(r=>r.map(a=>a.map(l=>l.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows});return this.arraystretch!==void 0&&(e.arraystretch=this.arraystretch),this.arraycolsep!==void 0&&(e.arraycolsep=this.arraycolsep),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.isRoot&&(e.isRoot=!0),e.minColumns=this.minColumns,e.minRows=this.minRows,e.maxRows=this.maxRows,this.mathstyleName&&(e.mathstyleName=this.mathstyleName),this.classes.length>0&&(e.classes=this.classes),e}branch(e){var r;if(We(e))return(r=this._rows[e[0]][e[1]])!=null?r:void 0}createBranch(e){var r;return We(e)?(this.isDirty=!0,(r=this.branch(e))!=null?r:[]):[]}get rowCount(){return this._rows.length}get colCount(){return this._rows[0].length}get maxColumns(){return this.colFormat.filter(e=>!!e.align).length}removeBranch(e){if(Sr(e))return super.removeBranch(e);let[r,...a]=this.branch(e);return r.type,this._rows[e[0]][e[1]]=void 0,a.forEach(l=>{l.parent=void 0,l.parentBranch=void 0}),this.isDirty=!0,a}get hasChildren(){return this.children.length>0}get children(){let e=[];for(let r of this._rows)for(let a of r)if(a)for(let l of a)e.push(...l.children),e.push(l);return[...e,...super.children]}render(e){var r,a,l,u,d,g;let E=new O({parent:e,mathstyle:this.mathstyleName},this.style),P=E.getRegisterAsEm("arrayrulewidth"),Z=E.getRegisterAsEm("arraycolsep"),me=E.getRegisterAsEm("doublerulesep"),_e=(a=(r=this.arraystretch)!=null?r:E.getRegisterAsNumber("arraystretch"))!=null?a:1,He=typeof this.arraycolsep=="number"?this.arraycolsep:Z;this.colSeparationType==="small"&&(He=.2778*(new O({parent:e,mathstyle:"scriptstyle"}).scalingFactor/e.scalingFactor));let Xe=_e*Z0,wt=.7*Xe,Do=.3*Xe,sr=0,Ko=[],Bs=0,th=this._rows.length;for(let gf=0;gf<th;++gf){let yh=this._rows[gf];Bs=Math.max(Bs,yh.length);let ff=new O({parent:E,mathstyle:this.mathstyleName},this.style),e1=wt/ff.scalingFactor,s1=Do/ff.scalingFactor,b1={cells:[],height:0,depth:0,pos:0};for(let V1 of yh){let I1=(l=b.createBox(ff,V1,{type:"ignore"}))!=null?l:new _(null,{type:"ignore"});s1=Math.max(s1,I1.depth),e1=Math.max(e1,I1.height),b1.cells.push(I1)}let _1=(u=Ra(this.rowGaps[gf]))!=null?u:0;_1>0&&(_1+=Do,s1=Math.max(s1,_1),_1=0),gf<th-1&&!Va(this.environmentName)&&this.environmentName!=="cases"&&this.environmentName!=="array"&&(s1+=E.getRegisterAsEm("jot")),b1.height=e1,b1.depth=s1,sr+=e1,b1.pos=sr,sr+=s1+_1,Ko.push(b1)}let pf=sr/2+Oe,_h=[];for(let gf=0;gf<Bs;gf++){let yh=[];for(let ff of Ko){let e1=ff.cells[gf];e1&&(e1.depth=ff.depth,e1.height=ff.height,yh.push({box:e1,shift:ff.pos-pf}))}yh.length>0&&_h.push(new Q({individualShift:yh}))}let cf=[],df=!1,uf=!1,li=0,Vc=!this.leftDelim,{colFormat:Rs}=this;for(let gf of Rs){if("align"in gf&&li>=_h.length)break;if("align"in gf)df?cf.push(Ha(2*He)):(uf||Vc)&&cf.push(Ha(He)),cf.push(new _(_h[li],{classes:"col-align-"+gf.align})),li++,df=!0,uf=!1,Vc=!1;else if("gap"in gf){if(typeof gf.gap=="number")cf.push(Ha(gf.gap));else{let yh=Ef(e,Ko,pf,gf.gap);yh&&cf.push(yh)}df=!1,uf=!1,Vc=!1}else if("separator"in gf){let yh=new _(null,{classes:"ML__vertical-separator"});yh.height=sr,yh.setStyle("height",sr,"em"),yh.setStyle("border-right",`${P}em ${gf.separator} currentColor`),yh.setStyle("vertical-align",-(sr-pf),"em");let ff=0;uf?ff=me-P:df&&(ff=He-P),yh.left=ff,cf.push(yh),df=!1,uf=!0,Vc=!1}}df&&!this.rightDelim&&cf.push(Ha(He));let qc=new _(cf,{classes:["ML__mtable",...this.classes].join(" ")});if((!this.leftDelim||this.leftDelim===".")&&(!this.rightDelim||this.rightDelim==="."))return this.caret&&(qc.caret=this.caret),this.bind(e,qc);let Qp=qc.height,n1=qc.depth,wh=this.bind(e,new _([this.bind(e,ni("open",(d=this.leftDelim)!=null?d:".",Qp,n1,E,{isSelected:this.isSelected})),qc,this.bind(e,ni("close",(g=this.rightDelim)!=null?g:".",Qp,n1,E,{isSelected:this.isSelected}))],{type:"ord"}));return wh?(wh.setStyle("display","inline-block"),this.caret&&(wh.caret=this.caret),this.bind(e,this.attachSupsub(e,{base:wh}))):null}_serialize(e){var r;let a=[];if(this.environmentName==="lines"?a.push("\\displaylines{"):a.push(`\\begin{${this.environmentName}}`),this.environmentName==="array"){if(a.push("{"),this.colFormat!==void 0)for(let l of this.colFormat)"align"in l&&typeof l.align=="string"?a.push(l.align):"separator"in l&&l.separator==="solid"?a.push("|"):"separator"in l&&l.separator==="dashed"&&a.push(":");a.push("}")}for(let l=0;l<this._rows.length;l++){for(let u=0;u<this._rows[l].length;u++)u>0&&a.push(" & "),a.push(b.serialize(this._rows[l][u],e));if(l<this._rows.length-1){let u=this.rowGaps[l];u!=null&&u.dimension?a.push(`\\\\[${u.dimension} ${(r=u.unit)!=null?r:"pt"}] `):a.push("\\\\ ")}}return this.environmentName==="lines"?a.push("}"):a.push(`\\end{${this.environmentName}}`),R(a)}forEachCell(e){for(let r=0;r<this.rowCount;r++)for(let a=0;a<this.colCount;a++)e(this._rows[r][a],r,a)}getCell(e,r){var a;return(a=this._rows[e])==null?void 0:a[r]}setCell(e,r,a){this.type==="array"&&Array.isArray(this._rows)&&this._rows[e][r];for(let u of this._rows[e][r])u.parent=void 0,u.parentBranch=void 0;let l=[new b({type:"first",mode:this.mode}),...a.filter(u=>u.type!=="first")];this._rows[e][r]=l,oi(this),this.isDirty=!0}addRowBefore(e){this.type==="array"&&Array.isArray(this._rows),this._rows.splice(e,0,new Array(this.colCount).fill(qa(this,!this.isMultiline))),oi(this),this.isDirty=!0}addRowAfter(e){this.type==="array"&&Array.isArray(this._rows),this._rows.splice(e+1,0,new Array(this.colCount).fill(qa(this,!this.isMultiline))),oi(this),this.isDirty=!0}removeRow(e){this.type==="array"&&Array.isArray(this._rows)&&this.rowCount>e;let r=this._rows.splice(e,1);for(let a of r)for(let l of a)if(l)for(let u of l)u.parent=void 0,u.parentBranch=void 0;oi(this),this.isDirty=!0}addColumnBefore(e){this.type==="array"&&Array.isArray(this._rows);for(let r of this._rows)r.splice(e,0,qa(this));oi(this),this.isDirty=!0}addColumnAfter(e){this.type==="array"&&Array.isArray(this._rows);for(let r of this._rows)r.splice(e+1,0,qa(this));oi(this),this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(e){this.type==="array"&&Array.isArray(this._rows)&&this.colCount>e;for(let r of this._rows){let a=r.splice(e,1);for(let l of a)if(l)for(let u of l)u.parent=void 0,u.parentBranch=void 0}oi(this),this.isDirty=!0}get cells(){let e=[];for(let r of this._rows)for(let a of r)a&&e.push(a.filter(l=>l.type!=="first"));return e}get rows(){return this._rows}};function qa(t,e=!1){let r=new b({type:"first",mode:t.mode});r.parent=t;let a=[r];if(e){let l=new Le;l.parent=t,a.push(l)}return a}function oi(t){for(let e=0;e<t.rowCount;e++)for(let r=0;r<t.colCount;r++){let a=t.getCell(e,r);if(a)for(let l of a)l&&(l.parent=t,l.parentBranch=[e,r])}}function Ha(t){let e=new _(null,{classes:"ML__arraycolsep"});return e.width=t,e}function Ef(t,e,r,a){if(!a)return null;let l=[];for(let u of e){let d=b.createBox(t,a,{type:"ignore"});d&&(d.depth=u.depth,d.height=u.height,l.push({box:d,shift:u.pos-r}))}return new Q({individualShift:l}).wrap(t)}var nt=class fE extends b{constructor(e){super({mode:e.mode,command:e.command,style:e.style,body:e.body,type:"box"}),this.framecolor=e.framecolor,this.backgroundcolor=e.backgroundcolor,this.padding=e.padding,this.offset=e.offset,this.border=e.border}static fromJson(e){return new fE(e)}toJson(){return f(p({},super.toJson()),{framecolor:this.framecolor,backgroundcolor:this.backgroundcolor,padding:this.padding,offset:this.offset,border:this.border})}render(e){var r,a,l,u;let d=b.createBox(e,this.body,{type:"lift"});if(!d)return null;let g=e.toEm((r=this.offset)!=null?r:{dimension:0});d.depth+=g,d.setStyle("display","inline-block"),d.setStyle("position","relative"),d.setStyle("height",Math.floor(100*d.height+d.depth)/100,"em"),d.setStyle("vertical-align",-Math.floor(100*d.height)/100,"em");let E=new O({parent:e},this.style),P=E.toEm((a=this.padding)!=null?a:{register:"fboxsep"}),Z=new _(null,{classes:"ML__box"});Z.height=d.height+P,Z.depth=d.depth+P,Z.setStyle("box-sizing","border-box"),Z.setStyle("position","absolute"),Z.setStyle("top",-P+.3,"em"),Z.setStyle("left",0),Z.setStyle("height",Z.height+Z.depth,"em"),Z.setStyle("width","100%"),this.backgroundcolor&&Z.setStyle("background-color",(l=E.toColor(this.backgroundcolor))!=null?l:"transparent"),this.framecolor&&Z.setStyle("border",`${E.getRegisterAsEm("fboxrule",2)}em solid ${(u=E.toColor(this.framecolor))!=null?u:"black"}`),this.border&&Z.setStyle("border",this.border);let me=new _([Z,d],{type:"lift"});return me.setStyle("display","inline-block"),me.setStyle("position","relative"),me.setStyle("line-height",0),me.height=d.height+P+(g>0?g:0),me.depth=d.depth+P+(g<0?-g:0),me.setStyle("padding-left",P,"em"),me.setStyle("padding-right",P,"em"),me.setStyle("height",Math.floor(100*(d.height+d.depth+2*P+Math.abs(g)))/100,"em"),me.setStyle("margin-top",-P,"em"),me.setStyle("top",Math.floor(100*(d.depth-d.height+2*P-g))/100,"em"),me.setStyle("vertical-align",Math.floor(100*(d.depth+2*P))/100,"em"),this.caret&&(me.caret=this.caret),this.attachSupsub(e,{base:me})}_serialize(e){return e.skipStyles?R([this.bodyToLatex(e),this.supsubToLatex(e)]):super._serialize(e)}},Qi=class dE extends b{constructor(e,r){var a;super({type:"composition",mode:(a=r?.mode)!=null?a:"math",value:e})}static fromJson(e){return new dE(e.value,e)}toJson(){return super.toJson()}render(e){let r=new _(this.value,{classes:"ML__composition",type:"composition"});return this.bind(e,r),this.caret&&(r.caret=this.caret),r}_serialize(e){return""}},mt=class pE extends b{constructor(e){super({type:"error",value:e,command:e,mode:"math"}),this.verbatimLatex=e}static fromJson(e){return new pE(e.command)}toJson(){return super.toJson()}render(e){let r=this.createBox(e,{classes:"ML__error"});return this.caret&&(r.caret=this.caret),r}},en=class mE extends b{constructor(e,r){super({type:"group",mode:r}),this.body=e,this.boxType=e.length>1?"ord":"ignore",this.skipBoundary=!0,this.displayContainsHighlight=!1,e&&e.length===1&&e[0].command===","&&(this.captureSelection=!0)}static fromJson(e){return new mE(e.body,e.mode)}render(e){let r=b.createBox(e,this.body,{type:this.boxType});return r?(this.caret&&(r.caret=this.caret),this.bind(e,r)):null}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);return r!=null&&r.serialize?r.serialize(this,e):`{${this.bodyToLatex(e)}}`}},G=class gE extends b{constructor(e,r,a){super({type:"leftright",style:a.style,displayContainsHighlight:!0}),this.variant=e,this.body=r,this.leftDelim=a.leftDelim,this.rightDelim=a.rightDelim}static fromJson(e){var r;return new gE((r=e.variant)!=null?r:"",e.body,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),e}_serialize(e){var r,a;let l=this.matchingRightDelim();return this.variant==="left...right"?R(["\\left",(r=this.leftDelim)!=null?r:".",this.bodyToLatex(e),"\\right",l]):this.variant==="mleft...mright"?R(["\\mleft",(a=this.leftDelim)!=null?a:".",this.bodyToLatex(e),"\\mright",l]):R([!this.leftDelim||this.leftDelim==="."?"":this.leftDelim,this.bodyToLatex(e),l])}matchingRightDelim(){var e,r;if(this.rightDelim&&this.rightDelim!=="?")return this.rightDelim;let a=(e=this.leftDelim)!=null?e:".";return(r=Xi[a])!=null?r:a}render(e){var r,a;let l=new O({parent:e},this.style);this.body;let u=new O({parent:e,mathstyle:"textstyle"},this.style),d=(r=b.createBox(l,this.body,{type:"inner"}))!=null?r:new _(null,{type:"inner"}),g=d.height/u.scalingFactor,E=d.depth/u.scalingFactor,P=[];if(this.leftDelim&&P.push(this.bind(u,ni("open",this.leftDelim,g,E,u,{isSelected:this.isSelected,classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),d&&(Bm(d.children,this,l,g,E),P.push(d)),this.rightDelim){let He=this.containsCaret?" ML__contains-caret":"",Xe=this.rightDelim;Xe==="?"&&(l.smartFence?(Xe=this.matchingRightDelim(),He+=" ML__smart-fence__close"):Xe="."),P.push(this.bind(u,ni("close",Xe,g,E,u,{isSelected:this.isSelected,classes:He+" ML__close",mode:this.mode,style:this.style})))}let Z=this.variant==="mleft...mright",me=this.leftSibling;me&&(!Z&&me.isFunction&&(Z=!0),!Z&&me.type==="subsup"&&(a=me.leftSibling)!=null&&a.isFunction&&(Z=!0));let _e=new _(P,{type:Z?"close":"inner",classes:"ML__left-right"});return _e.setStyle("margin-top",`${-d.depth}em`),_e.setStyle("height",`${d.height+d.depth}em`),this.caret&&(_e.caret=this.caret),this.bind(l,_e.wrap(l))}};function Bm(t,e,r,a,l){if(t)for(let u=0;u<t.length;u++){let d=t[u];d.type==="middle"?(t[u]=e.bind(r,ni("inner",d.value,a,l,r,{isSelected:e.isSelected})),t[u].caret=d.caret,t[u].isSelected=d.isSelected,t[u].cssId=d.cssId,t[u].htmlData=d.htmlData,t[u].htmlStyle=d.htmlStyle,t[u].attributes=d.attributes,t[u].cssProperties=d.cssProperties):d.children&&Bm(d.children,e,r,a,l)}}var tn=class vE extends b{constructor(e,r){var a;super({type:"macro",command:e,style:r.style}),this.body=r.body,r.captureSelection===void 0?r.args?this.captureSelection=!1:this.captureSelection=!0:this.captureSelection=r.captureSelection,this.macroArgs=r.args,this.expand=(a=r.expand)!=null?a:!1}static fromJson(e){return new vE(e.command,e)}toJson(){let e=super.toJson();return this.expand&&(e.expand=!0),this.captureSelection!==void 0&&(e.captureSelection=this.captureSelection),this.macroArgs&&(e.args=this.macroArgs),e}_serialize(e){var r;return e.expandMacro&&this.expand?this.bodyToLatex(e):this.command+((r=this.macroArgs)!=null?r:"")}applyStyle(e,r){let a={};e.color&&(a.color=e.color),e.backgroundColor&&(a.backgroundColor=e.backgroundColor),super.applyStyle(a,r)}render(e){let r=b.createBox(e,this.body,{type:"lift"});return r?(this.caret&&(r.caret=this.caret),this.bind(e,r)):null}},Wa=class yE extends b{constructor(){super({type:"macro-argument"})}static fromJson(e){return new yE}toJson(){return super.toJson()}_serialize(e){return""}render(e){return null}},rn=class bE extends b{constructor(e,r,a=!1,l,u){var d;super({type:"prompt",mode:(d=u?.mode)!=null?d:"math",style:u?.style,command:"\\placeholder"}),this.body=l,this.correctness=r,this.placeholderId=e,this.locked=a,this.captureSelection=this.locked}static fromJson(e){return new bE(e.placeholderId,e.correctness,e.locked,e.body,e)}toJson(){let e=super.toJson();return this.placeholderId&&(e.placeholderId=this.placeholderId),this.body||delete e.body,this.body&&(e.body=this.body.filter(r=>r.type!=="first").map(r=>r.toJson())),this.correctness&&(e.correctness=this.correctness),e.locked=this.locked,e}render(e){let r=new O({parent:e}),a=r.getRegisterAsEm("fboxsep"),l=a,u=a,d=b.createBox(e,this.body);if(!d)return null;d.height||(d.height=r.metrics.xHeight),d.setStyle("vertical-align",-d.height,"em"),this.correctness==="correct"?d.setStyle("color","var(--correct-color, var(--ML__correct-color))"):this.correctness==="incorrect"&&d.setStyle("color","var(--incorrect-color, var(--ML__incorrect-color))");let g=new _(d,{type:"ord"});g.setStyle("display","inline-block"),g.setStyle("height",d.height+d.depth,"em"),g.setStyle("vertical-align",-u,"em");let E="ML__prompt ";this.locked?E+=" ML__lockedPromptBox ":E+=" ML__editablePromptBox ",this.correctness==="correct"?E+=" ML__correctPromptBox ":this.correctness==="incorrect"&&(E+=" ML__incorrectPromptBox "),this.containsCaret&&(E+=" ML__focusedPromptBox ");let P=new _(null,{classes:E,attributes:{part:"prompt"}});P.height=g.height+u,P.depth=g.depth+u,P.width=g.width+2*l,P.setStyle("position","absolute"),P.setStyle("height",`calc(${g.height+g.depth+2*u}em - 2px)`),l===0&&P.setStyle("width","100%"),l!==0&&(P.setStyle("width",`calc(100% + ${2*l}em)`),P.setStyle("top",a,"em"),P.setStyle("left",-l,"em")),(!this.body||this.body.length===1)&&(P.width=3*l,P.setStyle("width",`calc(100% + ${3*l}em)`),P.setStyle("left",-1.5*l,"em"));let Z="";this.correctness==="incorrect"&&(Z+='<line x1="3%"  y1="97%" x2="97%" y2="3%" stroke-width="0.5" stroke="var(--incorrect-color, var(--ML__incorrect-color))" stroke-linecap="round" />'),Z&&(P.svgOverlay=Z);let me=new _([P,g],{classes:"ML__prompt-atom"});return g.setStyle("line-height",1),me.setStyle("position","relative"),me.setStyle("display","inline-block"),me.setStyle("line-height",0),me.height=g.height+u+.2,me.depth=g.depth+u,me.left=l,me.right=l,me.setStyle("height",g.height+u,"em"),me.setStyle("top",g.depth-g.height,"em"),me.setStyle("vertical-align",g.depth+u,"em"),me.setStyle("margin-left",.5,"em"),me.setStyle("margin-right",.5,"em"),this.caret&&(me.caret=this.caret),this.bind(r,this.attachSupsub(e,{base:me}))}_serialize(e){var r;let a=(r=this.bodyToLatex(e))!=null?r:"";if(e.skipPlaceholders)return a;let l="\\placeholder";return this.placeholderId&&(l+=`[${this.placeholderId}]`),this.correctness==="correct"?l+="[correct]":this.correctness==="incorrect"&&(l+="[incorrect]"),this.locked&&(l+="[locked]"),q(l,a)}},er=class _E extends b{constructor(e){super({type:"subsup",style:e?.style}),this.subsupPlacement="auto"}get children(){if(!this._children){let e=[],r=this.branch("subscript");if(r)for(let l of r)e.push(...l.children),e.push(l);let a=this.branch("superscript");if(a)for(let l of a)e.push(...l.children),e.push(l);this._children=e}return this._children}static fromJson(e){let r=new _E(e);for(let a of Lr)e[a]&&r.setChildren(e[a],a);return r}render(e){var r;let a=new O({parent:e,isPhantom:!0}),l=this.leftSibling,u=(r=l.render(a))!=null?r:new _(null),d=new _(null);return d.height=u.height,d.depth=u.depth,this.attachSupsub(e,{base:d,isCharacterBox:l.isCharacterBox(),type:"ignore"})}_serialize(e){return this.supsubToLatex(e)}};function nn(t){return t?!/^(<$$>|<$>|<space>|<{>|<}>|#[0-9\?]|\\.+)$/.test(t):!1}var Ua=class{constructor(t,e,r){this.errors=[],this.index=0,this.endCount=0;var a,l,u,d;r!=null||(r={}),this.tokens=t,this.context=e instanceof O&&!(r!=null&&r.parseMode)&&!r.mathstyle?e:new O({from:e,mathstyle:r.mathstyle},r.style),this.args=(a=r.args)!=null?a:void 0,this.smartFence=this.context.smartFence,this.parsingContext={parent:void 0,mathlist:[],style:(l=r.style)!=null?l:{},parseMode:(u=r.parseMode)!=null?u:"math",mathstyle:(d=r.mathstyle)!=null?d:"displaystyle",tabular:!1}}beginContext(t){var e,r,a,l,u,d;if(t!=null&&t.root){this.parsingContext={parent:this.parsingContext.parent,mathlist:[],style:{},parseMode:(e=t?.mode)!=null?e:"math",mathstyle:(r=t?.mathstyle)!=null?r:"displaystyle",tabular:(a=t?.tabular)!=null?a:!1};return}let g=this.parsingContext,E={parent:g,mathlist:[],style:p({},g.style),parseMode:(l=t?.mode)!=null?l:g.parseMode,mathstyle:(u=t?.mathstyle)!=null?u:g.mathstyle,tabular:(d=t?.tabular)!=null?d:!1};this.parsingContext=E}endContext(){this.parsingContext=this.parsingContext.parent}onError(t){this.errors.push(p({before:vr(this.tokens.slice(this.index,this.index+10)),after:vr(this.tokens.slice(Math.max(0,this.index-10),this.index))},t))}get mathlist(){return this.parsingContext.mathlist}set mathlist(t){this.parsingContext.mathlist=t}get parseMode(){return this.parsingContext.parseMode}set parseMode(t){this.parsingContext.parseMode=t}get tabularMode(){return this.parsingContext.tabular}get style(){let t=this.parsingContext;for(;t;){if(t.style)return p({},t.style);t=t.parent}return{}}set style(t){this.parsingContext.style=t}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}next(){this.index+=1}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}expandUnicode(){if(!this.peek()||this.parseMode!=="math")return;let t=eu(this.peek());t&&this.tokens.splice(this.index,1,...qi(t))}match(t){return this.tokens[this.index]===t?(this.index++,!0):!1}lastSubsupAtom(){let t;return this.mathlist.length>0&&(t=this.mathlist[this.mathlist.length-1],t.type==="subsup"||t.subsupPlacement!==void 0)||(t=new er({style:this.style}),this.mathlist.push(t)),t}hasPattern(t){return t.test(this.tokens[this.index])}hasInfixCommand(){var t;let{index:e}=this;if(e<this.tokens.length&&this.tokens[e].startsWith("\\")){let r=se(this.tokens[e],this.parseMode);return!r||r.definitionType==="symbol"||r.ifMode&&!r.ifMode.includes(this.parseMode)?!1:(t=r.infix)!=null?t:!1}return!1}matchColumnSeparator(){return!this.tabularMode||this.peek()!=="&"?!1:(this.index++,!0)}matchRowSeparator(){if(!this.tabularMode)return!1;let t=this.peek();return t!=="\\\\"&&t!=="\\cr"&&t!=="\\tabularnewline"?!1:(this.index++,!0)}placeholder(){var t;let e=(t=this.args)==null?void 0:t.call(this,"?");return e?he(e,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new Le({mode:this.parseMode,style:this.style})]}skipWhitespace(){for(;this.match("<space>"););}skipUntilToken(t){let e=this.tokens[this.index];for(;e&&e!==t;)e=this.tokens[++this.index];e===t&&this.index++}skipFiller(){for(;this.match("\\relax")||this.match("<space>"););}matchKeyword(t){let e=this.index,r=this.end(),a="";for(;!r;){let u=this.get();nn(u)?(a+=u,r=this.end()||a.length>=t.length):r=!0}let l=t.toUpperCase()===a.toUpperCase();return l||(this.index=e),l}scanString(){let t="";for(;!this.end();){let e=this.peek();if(e==="]")return t;if(e==="<space>")t+=" ";else if(e.startsWith("\\"))this.onError({code:"unexpected-command-in-string"}),t+=e.substring(1);else if(nn(e))t+=e;else return t;this.next()}return t}scanBalancedString(){let t="",e=this.end(),r=1;for(;!e;){let a=this.get();a==="<space>"?t+=" ":a==="<{>"?(t+="{",r+=1):a==="<}>"?(r-=1,r>0?t+="}":this.index-=1):a==="<$>"?t+="$":a==="<$$>"?t+="$$":t+=a,e=r===0||this.end()}return t}scanLiteralGroup(){var t;if(!this.match("<{>"))return"";let e="",r=1;for(;r>0&&!this.end();){let a=this.get();a==="<}>"?(r-=1,r>0&&(e+="}")):a==="<{>"?(r+=1,e+="{"):(/\\[a-zA-Z]+$/.test(e)&&/^[a-zA-Z]/.test(a)&&(e+=" "),e+=(t={"<space>":" ","<$$>":"$$","<$>":"$"}[a])!=null?t:a)}return e}scanNumber(t=!0){var e,r;let a=!1,l=this.peek();for(;l==="<space>"||l==="+"||l==="-";)this.get(),l==="-"&&(a=!a),l=this.peek();t=!!t;let u=10,d=/\d/;if(this.match("'"))u=8,d=/[0-7]/,t=!0;else if(this.match('"'))u=16,d=/[\dA-F]/,t=!0;else if(this.match("x"))u=16,d=/[\dA-Fa-f]/,t=!0;else if(this.match("`"))return l=this.get(),l?l.length===2&&l.startsWith("\\")?{number:(a?-1:1)*((e=l.codePointAt(1))!=null?e:0),base:"alpha"}:{number:(a?-1:1)*((r=l.codePointAt(0))!=null?r:0),base:"alpha"}:null;let g="";for(;this.hasPattern(d);)g+=this.get();if(!t&&(this.match(".")||this.match(",")))for(g+=".";this.hasPattern(d);)g+=this.get();let E=t?Number.parseInt(g,u):Number.parseFloat(g);return Number.isNaN(E)?null:{number:a?-E:E,base:u===16?"hexadecimal":u===8?"octal":"decimal"}}scanRegister(){var t;let e=this.index,r=this.scanNumber(!1);if(this.skipWhitespace(),this.match("\\relax"))return r;let a=!1;if(r===null)for(;;){let u=this.peek();if(u==="-")a=!a;else if(u!=="+")break;this.next(),this.skipWhitespace()}if(this.match("\\global")){this.skipWhitespace();let u=this.get();return u.startsWith("\\")?r?{register:u,global:!0,factor:(a?-1:1)*r.number}:a?{register:u,global:!0,factor:-1}:{register:u,global:!0}:(this.index=e,null)}let l=this.get();return l!=null&&l.startsWith("\\")?(l=l.substring(1),this.context.registers[l]?!a||r!==null?{register:l,factor:(a?-1:1)*((t=r?.number)!=null?t:1)}:{register:l}:(this.index=e,null)):(this.index=e,null)}scanValue(){let t=this.scanRegister();if(t)return t;let e=this.index,r=this.scanGlueOrDimen();if(r&&("unit"in r||"glue"in r&&"unit"in r.glue))return r;this.index=e;let a=this.scanNumber();if(a)return a;if(this.end()||!nn(this.peek()))return null;let l=this.scanString();return l.length>0?{string:l}:null}scanDimen(){let t=this.scanNumber(!1);if(t===null)return null;let e=t.number;this.skipWhitespace(),this.matchKeyword("true"),this.skipWhitespace();let r;return this.matchKeyword("pt")?r="pt":this.matchKeyword("mm")?r="mm":this.matchKeyword("cm")?r="cm":this.matchKeyword("ex")?r="ex":this.matchKeyword("px")?r="px":this.matchKeyword("em")?r="em":this.matchKeyword("bp")?r="bp":this.matchKeyword("dd")?r="dd":this.matchKeyword("pc")?r="pc":this.matchKeyword("in")?r="in":this.matchKeyword("mu")&&(r="mu"),r?{dimension:e,unit:r}:{dimension:e}}scanGlueOrDimen(){let t=this.scanDimen();if(t===null)return null;if(this.skipWhitespace(),this.match("\\relax"))return t;let e={glue:t};if(this.matchKeyword("plus")){let r=this.scanDimen();if(r)e.grow=r;else return e}if(this.skipWhitespace(),this.match("\\relax"))return e;if(this.skipWhitespace(),this.matchKeyword("minus")){let r=this.scanDimen();if(r)e.shrink=r;else return e}return!e.grow&&!e.shrink?t:e}scanColspec(){this.skipWhitespace();let t=[];for(;!this.end()&&!(this.peek()==="<}>"||this.peek()==="]");){let e=this.get();e==="c"||e==="r"||e==="l"?t.push({align:e}):e==="|"?t.push({separator:"solid"}):e===":"?t.push({separator:"dashed"}):e==="@"&&(this.match("<{>")&&(this.beginContext({mode:"math"}),t.push({gap:this.scan(r=>r==="<}>")}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return t}scanModeSet(){let t;if(this.match("\\(")&&(t="textstyle"),!t&&this.match("\\[")&&(t="displaystyle"),!t)return null;this.beginContext({mode:"math",mathstyle:t});let e=this.scan(r=>r===(t==="displaystyle"?"\\]":"\\)"));return this.match(t==="displaystyle"?"\\]":"\\)")||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),e}scanModeShift(){let t="";if(this.match("<$>")&&(t="<$>"),!t&&this.match("<$$>")&&(t="<$$>"),!t)return null;this.beginContext({mode:"math",mathstyle:t==="<$>"?"textstyle":"displaystyle"});let e=this.scan(r=>r===t);return this.match(t)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),e}scanEnvironment(){if(!this.match("\\begin"))return null;let t=this.scanArgument("string");if(!t)return null;let e=nu(t);if(!e)return this.onError({code:"unknown-environment",arg:t}),null;let r=[];if(e.params)for(let g of e.params)if(g.isOptional)r.push(this.scanOptionalArgument(g.type));else{let E=this.scanArgument(g.type);E||this.onError({code:"missing-argument",arg:t}),r.push(E)}this.beginContext({tabular:e.tabular,root:e.rootOnly});let a=[],l=[],u=[],d=!1;do if(this.end()&&(this.onError({code:"unbalanced-environment",arg:t}),d=!0),!d&&this.match("\\end")&&(this.scanArgument("string")!==t&&this.onError({code:"unbalanced-environment",arg:t}),d=!0),!d)if(this.matchColumnSeparator())u.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){u.push(this.mathlist),this.mathlist=[];let g=null;this.skipWhitespace(),this.match("[")&&(g=this.scanDimen(),this.skipWhitespace(),this.match("]")),l.push(g??{dimension:0}),a.push(u),u=[]}else this.mathlist.push(...this.scan(g=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline"].includes(g)));while(!d);return u.push(this.mathlist),u.length>0&&a.push(u),this.endContext(),e.rootOnly&&(this.index=this.tokens.length),e.createAtom(t,a,l,r,this.context.maxMatrixCols)}scanExpression(){let t=this.mathlist;if(this.mathlist=[],this.parseExpression()){let e=this.mathlist;return this.mathlist=t,e}return this.mathlist=t,null}scan(t){this.beginContext(),t||(t=d=>d==="<}>");let e="",r=null,a=[],l=null;for(;!this.end()&&!t(this.peek());)this.hasInfixCommand()&&!e?(e=this.get(),r=se(e,"math"),r&&(a=this.scanArguments(r)[1]),l=this.mathlist,this.mathlist=[]):this.parseExpression();let u;return e?(a.unshift(this.mathlist),l&&a.unshift(l),u=[r.createAtom({command:e,args:a,style:this.style,mode:this.parseMode})]):u=this.mathlist,this.endContext(),u}scanGroup(){let t=this.index;if(!this.match("<{>"))return null;let e=this.scan(a=>a==="<}>");if(this.match("<}>")||this.onError({code:"unbalanced-braces"}),e.length===1&&e[0].type==="placeholder")return e[0];let r=new en(e,this.parseMode);return r.verbatimLatex=vr(this.tokens.slice(t,this.index)),r}scanSmartFence(){if(this.skipWhitespace(),!this.match("("))return null;this.beginContext();let t=1;for(;!this.end()&&t!==0;)this.match("(")&&(t+=1),this.match(")")&&(t-=1),t!==0&&this.parseExpression();let e=new G("",this.mathlist,{leftDelim:"(",rightDelim:t===0?")":"?"});return this.endContext(),e}scanDelim(){this.skipWhitespace();let t=this.peek();if(!t)return this.onError({code:"unexpected-end-of-string"}),null;if(!nn(t)&&!t.startsWith("\\"))return null;this.next();let e=se(t,"math");return e?e.definitionType==="function"&&e.ifMode&&!e.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:t}),null):e.definitionType==="symbol"&&(e.type==="mopen"||e.type==="mclose")||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(t)?t:(this.onError({code:"unexpected-delimiter",arg:t}),null):(this.onError({code:"unknown-command",arg:t}),null)}scanLeftRight(){var t;if(this.match("\\right"))return this.onError({code:"unbalanced-braces"}),new mt("\\right");if(this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),new mt("\\mright");let e="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;e="\\mright"}let r=this.scanDelim();if(!r)return this.onError({code:"unexpected-delimiter"}),new mt(e==="\\right"?"\\left":"\\mleft");for(this.beginContext();!this.end()&&!this.match(e);)this.parseExpression();let a=this.mathlist;this.endContext();let l=(t=this.scanDelim())!=null?t:".";return new G(e==="\\right"?"left...right":"mleft...mright",a,{leftDelim:r,rightDelim:l,style:this.style})}parseSupSub(){if(this.parseMode!=="math")return!1;let t=this.peek();if(t!=="^"&&t!=="_"&&t!=="'")return!1;let e=this.lastSubsupAtom();for(;t==="^"||t==="_"||t==="'";)this.match("'")?this.match("'")?e.addChild(new b({type:"mord",command:"\\doubleprime",mode:"math",value:""}),"superscript"):e.addChild(new b({type:"mord",command:"\\prime",mode:"math",value:""}),"superscript"):(this.match("^")||this.match("_"))&&e.addChildren(C(this.scanArgument("expression")),t==="_"?"subscript":"superscript"),t=this.peek();return!0}parseLimits(){if(this.parseMode!=="math")return!1;let t=this.match("\\limits"),e=!t&&this.match("\\nolimits"),r=!e&&!t&&this.match("\\displaylimits");if(!t&&!e&&!r)return!1;let a=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return a===null?!1:(a.explicitSubsupPlacement=!0,t&&(a.subsupPlacement="over-under"),e&&(a.subsupPlacement="adjacent"),r&&(a.subsupPlacement="auto"),!0)}scanArguments(t){if(!(t!=null&&t.params))return[void 0,[]];let e,r=[],a=t.infix?2:0;for(;a<t.params.length;){let l=t.params[a];l.type==="rest"?r.push(this.scan(u=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(u))):l.isOptional?r.push(this.scanOptionalArgument(l.type)):l.type.endsWith("*")?e=l.type.slice(0,-1):r.push(this.scanArgument(l.type)),a+=1}return[e,r]}scanSymbolOrLiteral(){let t=this.peek();if(!t)return null;this.next();let e;if(nn(t)){let r=ge.createAtom(this.parseMode,t,p({},this.style));return r?[r]:null}if(e=this.scanMacro(t),e)return[e];if(t.startsWith("\\")){let r=se(t,this.parseMode);if(!r)return this.onError({code:"unknown-command",arg:t}),[new mt(t)];if(r.definitionType==="symbol"){let a=p({},this.style);r.variant&&(a.variant=r.variant),e=new b({type:r.type,command:t,style:a,value:String.fromCodePoint(r.codepoint),mode:this.parseMode,verbatimLatex:t})}else{if(r.applyMode||r.applyStyle||r.infix)return this.onError({code:"invalid-command",arg:t}),[new mt(t)];r.createAtom&&(e=r.createAtom({command:t,args:[],style:this.style,mode:this.parseMode}))}}return e?[e]:null}scanArgument(t){var e;this.skipFiller();let r=this.parseMode;if(t==="auto"&&(t=r),!this.match("<{>")){if(t==="string")return this.scanString();if(t==="value")return this.scanValue();if(t==="delim")return(e=this.scanDelim())!=null?e:".";if(t==="expression")return this.scanExpression();if(t==="math"){t!==r&&this.beginContext({mode:"math"});let l=this.scanSymbolOrLiteral();return t!==r&&this.endContext(),l}if(t==="text"){t!==r&&this.beginContext({mode:"text"});let l=this.scanSymbolOrLiteral();return t!==r&&this.endContext(),l}return t==="balanced-string"?null:t==="rest"?this.scan(l=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(l)):null}if(t==="text"){this.beginContext({mode:"text"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let l=this.mathlist;return this.endContext(),{group:l}}if(t==="math"){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let l=this.mathlist;return this.endContext(),{group:l}}let a=null;if(t==="expression"){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let l=this.mathlist;return this.endContext(),{group:l}}return t==="string"?a=this.scanString():t==="balanced-string"?a=this.scanBalancedString():t==="colspec"?a=this.scanColspec():t==="value"&&(a=this.scanValue()),this.skipUntilToken("<}>"),a}scanOptionalArgument(t){if(t=t==="auto"?this.parseMode:t,this.skipFiller(),!this.match("["))return null;let e=null;for(;!this.end()&&!this.match("]");)if(t==="string")e=this.scanString();else if(t==="value")e=this.scanValue();else if(t==="colspec")e=this.scanColspec();else if(t==="bbox"){let r={},a=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let l of a){let u=l.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(u)r.padding={dimension:parseInt(u[1]),unit:u[2]};else{let d=l.match(/^\s*border\s*:\s*(.*)/);d?r.border=d[1]:r.backgroundcolor={string:l}}}e=r}else t==="math"&&(this.beginContext({mode:"math"}),e=this.mathlist.concat(this.scan(r=>r==="]")),this.endContext());return e}scanSymbolOrCommand(t){var e,r,a;if(t==="\\placeholder"){let g=this.scanOptionalArgument("string"),E=this.scanOptionalArgument("math"),P=b.serialize(E,{defaultMode:"math"}),Z=[],me;!me&&P==="correct"?me="correct":!me&&P==="incorrect"?me="incorrect":P!==""&&(Z=E);let _e=this.scanOptionalArgument("string")==="locked",He=this.scanArgument("auto"),Xe;return He&&Array.isArray(He)&&He.length>0?Xe=He:He&&typeof He=="object"&&"group"in He?Xe=He.group:Xe=Z,g?[new rn(g,me,_e,Xe??Z,{mode:this.parseMode,style:this.style})]:[new Le({mode:this.parseMode,style:this.style})]}if(t==="\\renewcommand"||t==="\\newcommand"||t==="\\providecommand"||t==="\\def"){let g=this.index,E=this.scanLiteralGroup()||this.next();if(!E)return null;if(this.context.registers[E.substring(1)]){let P=this.scanArgument("string");P!==null&&(this.context.registers[E.substring(1)]=P);let Z=R([t,vr(this.tokens.slice(g,this.index))]);return[new b({type:"text",value:"",verbatimLatex:Z})]}}let l=this.scanMacro(t);if(l)return[l];let u=se(t,this.parseMode);if(!u)return this.parseMode==="text"?(/[a-zA-Z]/.test((e=this.peek())!=null?e:"")&&(t+=" "),[...t].map(g=>new b({type:"text",value:g,mode:"text",style:this.style}))):(this.onError({code:"unknown-command",arg:t}),[new mt(t)]);let d=this.index;if(u.definitionType==="symbol"){let g=p({},this.style);u.variant&&(g.variant=u.variant),l=new b({type:u.type,command:t,style:g,value:String.fromCodePoint(u.codepoint),mode:this.parseMode})}else{if(u.ifMode&&!u.ifMode.includes(this.parseMode))return[];let g=this.parseMode;u.applyMode&&(this.parseMode=u.applyMode);let E,P=[];if(u.parse?P=u.parse(this):[E,P]=this.scanArguments(u),this.parseMode=g,u.applyMode&&!u.applyStyle&&!u.createAtom)return C(P[0]);if(u.infix)return this.onError({code:"too-many-infix-commands",arg:t}),null;if(typeof u.createAtom=="function")l=u.createAtom({command:t,args:P,style:this.style,mode:this.parseMode}),E&&(l.body=C(this.scanArgument(E)));else if(typeof u.applyStyle=="function"){let Z=u.applyStyle(this.style,t,P,this.context),me=this.parseMode;if(u.applyMode&&(this.parseMode=u.applyMode),E){let _e=this.style;this.style=Z;let He=this.scanArgument(E);return this.style=_e,this.parseMode=me,C(He)}this.style=Z}else l=new b({type:"mord",command:(r=u.command)!=null?r:t,style:p({},this.style),value:t,mode:(a=u.applyMode)!=null?a:this.parseMode})}if(!l)return null;if(l instanceof b&&l.verbatimLatex===void 0&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(t)){let g=R([t,vr(this.tokens.slice(d,this.index))]);g&&(l.verbatimLatex=g)}if(l.verbatimLatex===null&&(l.verbatimLatex=void 0),l.isFunction&&this.smartFence){let g=this.scanSmartFence();if(g)return[l,g]}return[l]}scanSymbolCommandOrLiteral(){this.expandUnicode();let t=this.get();if(!t)return null;if(nn(t)){let e=ge.createAtom(this.parseMode,t,p({},this.style));if(!e)return null;if(e.isFunction&&this.smartFence){let r=this.scanSmartFence();if(r)return[e,r]}return[e]}return t.startsWith("\\")?this.scanSymbolOrCommand(t):t==="<space>"?this.parseMode==="text"?[new $e(" "," ",this.style)]:null:(t==="<}>"?this.onError({latex:"",code:"unbalanced-braces"}):this.onError({latex:"",code:"unexpected-token",arg:t}),null)}scanMacro(t){var e;let r=this.context.getMacro(t);if(!r)return null;let a=this.index,l=r.args,u={"?":(e=this.args)==null?void 0:e.call(this,"?")};for(let d=1;d<=l;d++){let g=this.scanLiteralGroup();if(!g){let E=this.index;this.scanExpression(),g=vr(this.tokens.slice(E,this.index))}u[d]=g}return new tn(t,{expand:r.expand,captureSelection:r.captureSelection,args:a===this.index?null:vr(this.tokens.slice(a,this.index)),style:this.parsingContext.style,body:he(r.def,{context:this.context,parseMode:this.parseMode,args:d=>u[d],mathstyle:this.parsingContext.mathstyle,style:this.parsingContext.style})})}parseExpression(){var t,e,r,a;let l=(a=(r=(e=(t=this.scanEnvironment())!=null?t:this.scanModeShift())!=null?e:this.scanModeSet())!=null?r:this.scanGroup())!=null?a:this.scanLeftRight();if(l===null){if(this.parseSupSub()||this.parseLimits())return!0;l=this.scanSymbolCommandOrLiteral()}return l?(Y(l)?this.mathlist.push(...l):this.mathlist.push(l),!0):!1}};function he(t,e){var r,a,l,u;let d=(r=e?.args)!=null?r:void 0,g=new Ua(qi(t,d),e?.context,{args:d,mathstyle:(a=e?.mathstyle)!=null?a:"displaystyle",parseMode:(l=e?.parseMode)!=null?l:"math",style:(u=e?.style)!=null?u:{}}),E=[];for(;!g.end();)E.push(...g.scan(()=>!1));return E}function ja(t,e){var r;let a=new Ua(qi(t,null),e?.context,{mathstyle:"displaystyle",parseMode:(r=e?.parseMode)!=null?r:"math"});for(;!a.end();)a.scan();return a.errors}var Xn=class xE extends b{constructor(e,r){super({type:"chem"},{command:e,mode:"math"});let a=ce.go(S.go(r,e==="\\pu"?"pu":"ce"),!1);this.body=he(a),this._verbatimLatex=e+"{"+r+"}",this.arg=r,this.captureSelection=!0}static fromJson(e){return new xE(e.command,e.arg)}set verbatimLatex(e){}get verbatimLatex(){return this._verbatimLatex}toJson(){return f(p({},super.toJson()),{arg:this.arg})}render(e){let r=b.createBox(e,this.body,{type:"inner"});return this.caret&&(r.caret=this.caret),this.bind(e,r)}_serialize(e){return this.verbatimLatex,this.verbatimLatex}};v(["ce","pu"],"{chemformula:balanced-string}",{createAtom:t=>{var e;return new Xn(t.command,(e=t.args[0])!=null?e:"")}});var S={go:function(t,e){if(!t)return[];e===void 0&&(e="ce");var r="0",a={};a.parenthesisLevel=0,t=t.replace(/\n/g," "),t=t.replace(/[\u2212\u2013\u2014\u2010]/g,"-"),t=t.replace(/[\u2026]/g,"...");for(var l,u=10,d=[];;){l!==t?(u=10,l=t):u--;var g=S.stateMachines[e],E=g.transitions[r]||g.transitions["*"];e:for(var P=0;P<E.length;P++){var Z=S.patterns.match_(E[P].pattern,t);if(Z){for(var me=E[P].task,_e=0;_e<me.action_.length;_e++){var He;if(g.actions[me.action_[_e].type_])He=g.actions[me.action_[_e].type_](a,Z.match_,me.action_[_e].option);else if(S.actions[me.action_[_e].type_])He=S.actions[me.action_[_e].type_](a,Z.match_,me.action_[_e].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+me.action_[_e].type_+")"];S.concatArray(d,He)}if(r=me.nextState||r,t.length>0){if(me.revisit||(t=Z.remainder),!me.toContinue)break e}else return d}}if(u<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(t,e){if(e)if(Object.prototype.toString.call(e)==="[object Array]")for(var r=0;r<e.length;r++)t.push(e[r]);else t.push(e)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return e&&e[0]?{match_:e.slice(1),remainder:t.substr(e[0].length)}:null},"(-)(9)^(-9)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return e&&e[0]?{match_:e.slice(1),remainder:t.substr(e[0].length)}:null},"state of aggregation $":function(t){var e=S.patterns.findObserveGroups(t,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(e&&e.remainder.match(/^($|[\s,;\)\]\}])/))return e;var r=t.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return r?{match_:r[0],remainder:t.substr(r[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(t){return S.patterns.findObserveGroups(t,"^{","","","}")},"^($...$)":function(t){return S.patterns.findObserveGroups(t,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(t){return S.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(t){return S.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(t){return S.patterns.findObserveGroups(t,"_{","","","}")},"_($...$)":function(t){return S.patterns.findObserveGroups(t,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(t){return S.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(t){return S.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(t){return S.patterns.findObserveGroups(t,"","{","}","")},"{(...)}":function(t){return S.patterns.findObserveGroups(t,"{","","","}")},"$...$":function(t){return S.patterns.findObserveGroups(t,"","$","$","")},"${(...)}$":function(t){return S.patterns.findObserveGroups(t,"${","","","}$")},"$(...)$":function(t){return S.patterns.findObserveGroups(t,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(t){return S.patterns.findObserveGroups(t,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(t){return S.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(t){return S.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(t){return S.patterns.findObserveGroups(t,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(t){return S.patterns.findObserveGroups(t,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(t){return S.patterns.findObserveGroups(t,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(t){var e;if(e=t.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/),e)return{match_:e[0],remainder:t.substr(e[0].length)};var r=S.patterns.findObserveGroups(t,"","$","$","");return r&&(e=r.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/),e)?{match_:e[0],remainder:t.substr(e[0].length)}:null},amount2:function(t){return this.amount(t)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(t){if(t.match(/^\([a-z]+\)$/))return null;var e=t.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return e?{match_:e[0],remainder:t.substr(e[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(t,e,r,a,l,u,d,g,E,P){var Z=function(sr,Ko){if(typeof Ko=="string")return sr.indexOf(Ko)!==0?null:Ko;var Bs=sr.match(Ko);return Bs?Bs[0]:null},me=function(sr,Ko,Bs){for(var th=0;Ko<sr.length;){var pf=sr.charAt(Ko),_h=Z(sr.substr(Ko),Bs);if(_h!==null&&th===0)return{endMatchBegin:Ko,endMatchEnd:Ko+_h.length};if(pf==="{")th++;else if(pf==="}"){if(th===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];th--}Ko++}return null},_e=Z(t,e);if(_e===null||(t=t.substr(_e.length),_e=Z(t,r),_e===null))return null;var He=me(t,_e.length,a||l);if(He===null)return null;var Xe=t.substring(0,a?He.endMatchEnd:He.endMatchBegin);if(u||d){var wt=this.findObserveGroups(t.substr(He.endMatchEnd),u,d,g,E);if(wt===null)return null;var Do=[Xe,wt.match_];return{match_:P?Do.join(""):Do,remainder:wt.remainder}}else return{match_:Xe,remainder:t.substr(He.endMatchEnd)}},match_:function(t,e){var r=S.patterns.patterns[t];if(r===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+t+")"];if(typeof r=="function")return S.patterns.patterns[t](e);var a=e.match(r);if(a){var l;return a[2]?l=[a[1],a[2]]:a[1]?l=a[1]:l=a[0],{match_:l,remainder:e.substr(a[0].length)}}return null}},actions:{"a=":function(t,e){t.a=(t.a||"")+e},"b=":function(t,e){t.b=(t.b||"")+e},"p=":function(t,e){t.p=(t.p||"")+e},"o=":function(t,e){t.o=(t.o||"")+e},"q=":function(t,e){t.q=(t.q||"")+e},"d=":function(t,e){t.d=(t.d||"")+e},"rm=":function(t,e){t.rm=(t.rm||"")+e},"text=":function(t,e){t.text_=(t.text_||"")+e},insert:function(t,e,r){return{type_:r}},"insert+p1":function(t,e,r){return{type_:r,p1:e}},"insert+p1+p2":function(t,e,r){return{type_:r,p1:e[0],p2:e[1]}},copy:function(t,e){return e},rm:function(t,e){return{type_:"rm",p1:e||""}},text:function(t,e){return S.go(e,"text")},"{text}":function(t,e){var r=["{"];return S.concatArray(r,S.go(e,"text")),r.push("}"),r},"tex-math":function(t,e){return S.go(e,"tex-math")},"tex-math tight":function(t,e){return S.go(e,"tex-math tight")},bond:function(t,e,r){return{type_:"bond",kind_:r||e}},"color0-output":function(t,e){return{type_:"color0",color:e[0]}},ce:function(t,e){return S.go(e)},"1/2":function(t,e){var r=[];e.match(/^[+\-]/)&&(r.push(e.substr(0,1)),e=e.substr(1));var a=e.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return a[1]=a[1].replace(/\$/g,""),r.push({type_:"frac",p1:a[1],p2:a[2]}),a[3]&&(a[3]=a[3].replace(/\$/g,""),r.push({type_:"tex-math",p1:a[3]})),r},"9,9":function(t,e){return S.go(e,"9,9")}},createTransitions:function(t){var e,r,a,l,u={};for(e in t)for(r in t[e])for(a=r.split("|"),t[e][r].stateArray=a,l=0;l<a.length;l++)u[a[l]]=[];for(e in t)for(r in t[e])for(a=t[e][r].stateArray||[],l=0;l<a.length;l++){var d=t[e][r];if(d.action_){d.action_=[].concat(d.action_);for(var g=0;g<d.action_.length;g++)typeof d.action_[g]=="string"&&(d.action_[g]={type_:d.action_[g]})}else d.action_=[];for(var E=e.split("|"),P=0;P<E.length;P++)if(a[l]==="*")for(var Z in u)u[Z].push({pattern:E[P],task:d});else u[a[l]].push({pattern:E[P],task:d})}return u},stateMachines:{}};S.stateMachines={ce:{transitions:S.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(t,e){var r;if((t.d||"").match(/^[0-9]+$/)){var a=t.d;t.d=void 0,r=this.output(t),t.b=a}else r=this.output(t);return S.actions["o="](t,e),r},"d= kv":function(t,e){t.d=e,t.dType="kv"},"charge or bond":function(t,e){if(t.beginsWithBond){var r=[];return S.concatArray(r,this.output(t)),S.concatArray(r,S.actions.bond(t,e,"-")),r}else t.d=e},"- after o/d":function(t,e,r){var a=S.patterns.match_("orbital",t.o||""),l=S.patterns.match_("one lowercase greek letter $",t.o||""),u=S.patterns.match_("one lowercase latin letter $",t.o||""),d=S.patterns.match_("$one lowercase latin letter$ $",t.o||""),g=e==="-"&&(a&&a.remainder===""||l||u||d);g&&!t.a&&!t.b&&!t.p&&!t.d&&!t.q&&!a&&u&&(t.o="$"+t.o+"$");var E=[];return g?(S.concatArray(E,this.output(t)),E.push({type_:"hyphen"})):(a=S.patterns.match_("digits",t.d||""),r&&a&&a.remainder===""?(S.concatArray(E,S.actions["d="](t,e)),S.concatArray(E,this.output(t))):(S.concatArray(E,this.output(t)),S.concatArray(E,S.actions.bond(t,e,"-")))),E},"a to o":function(t){t.o=t.a,t.a=void 0},"sb=true":function(t){t.sb=!0},"sb=false":function(t){t.sb=!1},"beginsWithBond=true":function(t){t.beginsWithBond=!0},"beginsWithBond=false":function(t){t.beginsWithBond=!1},"parenthesisLevel++":function(t){t.parenthesisLevel++},"parenthesisLevel--":function(t){t.parenthesisLevel--},"state of aggregation":function(t,e){return{type_:"state of aggregation",p1:S.go(e,"o")}},comma:function(t,e){var r=e.replace(/\s*$/,""),a=r!==e;return a&&t.parenthesisLevel===0?{type_:"comma enumeration L",p1:r}:{type_:"comma enumeration M",p1:r}},output:function(t,e,r){var a;if(!t.r)a=[],!t.a&&!t.b&&!t.p&&!t.o&&!t.q&&!t.d&&!r||(t.sb&&a.push({type_:"entitySkip"}),!t.o&&!t.q&&!t.d&&!t.b&&!t.p&&r!==2?(t.o=t.a,t.a=void 0):!t.o&&!t.q&&!t.d&&(t.b||t.p)?(t.o=t.a,t.d=t.b,t.q=t.p,t.a=t.b=t.p=void 0):t.o&&t.dType==="kv"&&S.patterns.match_("d-oxidation$",t.d||"")?t.dType="oxidation":t.o&&t.dType==="kv"&&!t.q&&(t.dType=void 0),a.push({type_:"chemfive",a:S.go(t.a,"a"),b:S.go(t.b,"bd"),p:S.go(t.p,"pq"),o:S.go(t.o,"o"),q:S.go(t.q,"pq"),d:S.go(t.d,t.dType==="oxidation"?"oxidation":"bd"),dType:t.dType}));else{var l;t.rdt==="M"?l=S.go(t.rd,"tex-math"):t.rdt==="T"?l=[{type_:"text",p1:t.rd||""}]:l=S.go(t.rd);var u;t.rqt==="M"?u=S.go(t.rq,"tex-math"):t.rqt==="T"?u=[{type_:"text",p1:t.rq||""}]:u=S.go(t.rq),a={type_:"arrow",r:t.r,rd:l,rq:u}}for(var d in t)d!=="parenthesisLevel"&&d!=="beginsWithBond"&&delete t[d];return a},"oxidation-output":function(t,e){var r=["{"];return S.concatArray(r,S.go(e,"oxidation")),r.push("}"),r},"frac-output":function(t,e){return{type_:"frac-ce",p1:S.go(e[0]),p2:S.go(e[1])}},"overset-output":function(t,e){return{type_:"overset",p1:S.go(e[0]),p2:S.go(e[1])}},"underset-output":function(t,e){return{type_:"underset",p1:S.go(e[0]),p2:S.go(e[1])}},"underbrace-output":function(t,e){return{type_:"underbrace",p1:S.go(e[0]),p2:S.go(e[1])}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:S.go(e[1])}},"r=":function(t,e){t.r=e},"rdt=":function(t,e){t.rdt=e},"rd=":function(t,e){t.rd=e},"rqt=":function(t,e){t.rqt=e},"rq=":function(t,e){t.rq=e},operator:function(t,e,r){return{type_:"operator",kind_:r||e}}}},a:{transitions:S.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:S.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(t){if(t.text_){var e={type_:"text",p1:t.text_};for(var r in t)delete t[r];return e}}}},pq:{transitions:S.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(t,e){return{type_:"state of aggregation subscript",p1:S.go(e,"o")}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:S.go(e[1],"pq")}}}},bd:{transitions:S.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(t,e){return{type_:"color",color1:e[0],color2:S.go(e[1],"bd")}}}},oxidation:{transitions:S.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(t,e){return{type_:"roman numeral",p1:e||""}}}},"tex-math":{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var r in t)delete t[r];return e}}}},"tex-math tight":{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(t,e){t.o=(t.o||"")+"{"+e+"}"},output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var r in t)delete t[r];return e}}}},"9,9":{transitions:S.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:S.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(t,e){var r=[];return e[0]==="+-"||e[0]==="+/-"?r.push("\\pm "):e[0]&&r.push(e[0]),e[1]&&(S.concatArray(r,S.go(e[1],"pu-9,9")),e[2]&&(e[2].match(/[,.]/)?S.concatArray(r,S.go(e[2],"pu-9,9")):r.push(e[2])),(e[3]||e[4])&&(e[3]==="e"||e[4]==="*"?r.push({type_:"cdot"}):r.push({type_:"times"}))),e[5]&&r.push("10^{"+e[5]+"}"),r},"number^":function(t,e){var r=[];return e[0]==="+-"||e[0]==="+/-"?r.push("\\pm "):e[0]&&r.push(e[0]),S.concatArray(r,S.go(e[1],"pu-9,9")),r.push("^{"+e[2]+"}"),r},operator:function(t,e,r){return{type_:"operator",kind_:r||e}},space:function(){return{type_:"pu-space-1"}},output:function(t){var e,r=S.patterns.match_("{(...)}",t.d||"");r&&r.remainder===""&&(t.d=r.match_);var a=S.patterns.match_("{(...)}",t.q||"");if(a&&a.remainder===""&&(t.q=a.match_),t.d&&(t.d=t.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.d=t.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),t.q){t.q=t.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.q=t.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var l={d:S.go(t.d,"pu"),q:S.go(t.q,"pu")};t.o==="//"?e={type_:"pu-frac",p1:l.d,p2:l.q}:(e=l.d,l.d.length>1||l.q.length>1?e.push({type_:" / "}):e.push({type_:"/"}),S.concatArray(e,l.q))}else e=S.go(t.d,"pu-2");for(var u in t)delete t[u];return e}}},"pu-2":{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(t,e){t.rm+="^{"+e+"}"},space:function(){return{type_:"pu-space-2"}},output:function(t){var e=[];if(t.rm){var r=S.patterns.match_("{(...)}",t.rm||"");r&&r.remainder===""?e=S.go(r.match_,"pu"):e={type_:"rm",p1:t.rm}}for(var a in t)delete t[a];return e}}},"pu-9,9":{transitions:S.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){var r=t.text_.length%3;r===0&&(r=3);for(var a=t.text_.length-3;a>0;a-=3)e.push(t.text_.substr(a,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(0,r)),e.reverse()}else e.push(t.text_);for(var l in t)delete t[l];return e},"output-o":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){for(var r=t.text_.length-3,a=0;a<r;a+=3)e.push(t.text_.substr(a,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(a))}else e.push(t.text_);for(var l in t)delete t[l];return e}}}};var ce={go:function(t,e){if(!t)return"";for(var r="",a=!1,l=0;l<t.length;l++){var u=t[l];typeof u=="string"?r+=u:(r+=ce._go2(u),u.type_==="1st-level escape"&&(a=!0))}return!e&&!a&&r&&(r="{"+r+"}"),r},_goInner:function(t){return t&&ce.go(t,!0)},_go2:function(t){var e;switch(t.type_){case"chemfive":e="";var r={a:ce._goInner(t.a),b:ce._goInner(t.b),p:ce._goInner(t.p),o:ce._goInner(t.o),q:ce._goInner(t.q),d:ce._goInner(t.d)};r.a&&(r.a.match(/^[+\-]/)&&(r.a="{"+r.a+"}"),e+=r.a+"\\,"),(r.b||r.p)&&(e+="{\\vphantom{X}}",e+="^{\\hphantom{"+(r.b||"")+"}}_{\\hphantom{"+(r.p||"")+"}}",e+="{\\vphantom{X}}",e+="^{\\smash[t]{\\vphantom{2}}\\llap{"+(r.b||"")+"}}",e+="_{\\vphantom{2}\\llap{\\smash[t]{"+(r.p||"")+"}}}"),r.o&&(r.o.match(/^[+\-]/)&&(r.o="{"+r.o+"}"),e+=r.o),t.dType==="kv"?((r.d||r.q)&&(e+="{\\vphantom{X}}"),r.d&&(e+="^{"+r.d+"}"),r.q&&(e+="_{\\smash[t]{"+r.q+"}}")):t.dType==="oxidation"?(r.d&&(e+="{\\vphantom{X}}",e+="^{"+r.d+"}"),r.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+r.q+"}}")):(r.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+r.q+"}}"),r.d&&(e+="{\\vphantom{X}}",e+="^{"+r.d+"}"));break;case"rm":e="\\mathrm{"+t.p1+"}";break;case"text":t.p1.match(/[\^_]/)?(t.p1=t.p1.replace(" ","~").replace("-","\\text{-}"),e="\\mathrm{"+t.p1+"}"):e="\\text{"+t.p1+"}";break;case"roman numeral":e="\\mathrm{"+t.p1+"}";break;case"state of aggregation":e="\\mskip2mu "+ce._goInner(t.p1);break;case"state of aggregation subscript":e="\\mskip1mu "+ce._goInner(t.p1);break;case"bond":if(e=ce._getBond(t.kind_),!e)throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+t.kind_+")"];break;case"frac":var a="\\frac{"+t.p1+"}{"+t.p2+"}";e="\\mathchoice{\\textstyle"+a+"}{"+a+"}{"+a+"}{"+a+"}";break;case"pu-frac":var l="\\frac{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";e="\\mathchoice{\\textstyle"+l+"}{"+l+"}{"+l+"}{"+l+"}";break;case"tex-math":e=t.p1+" ";break;case"frac-ce":e="\\frac{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";break;case"overset":e="\\overset{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";break;case"underset":e="\\underset{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";break;case"underbrace":e="\\underbrace{"+ce._goInner(t.p1)+"}_{"+ce._goInner(t.p2)+"}";break;case"color":e="{\\color{"+t.color1+"}{"+ce._goInner(t.color2)+"}}";break;case"color0":e="\\color{"+t.color+"}";break;case"arrow":var u={rd:ce._goInner(t.rd),rq:ce._goInner(t.rq)},d=ce._getArrow(t.r);u.rd||u.rq?t.r==="<=>"||t.r==="<=>>"||t.r==="<<=>"||t.r==="<-->"?(d="\\long"+d,u.rd&&(d="\\overset{"+u.rd+"}{"+d+"}"),u.rq&&(t.r==="<-->"?d="\\underset{\\lower2mu{"+u.rq+"}}{"+d+"}":d="\\underset{\\lower6mu{"+u.rq+"}}{"+d+"}"),d=" {}\\mathrel{"+d+"}{} "):(u.rq&&(d+="[{"+u.rq+"}]"),d+="{"+u.rd+"}",d=" {}\\mathrel{\\x"+d+"}{} "):d=" {}\\mathrel{\\long"+d+"}{} ",e=d;break;case"operator":e=ce._getOperator(t.kind_);break;case"1st-level escape":e=t.p1+" ";break;case"space":e=" ";break;case"entitySkip":e="~";break;case"pu-space-1":e="~";break;case"pu-space-2":e="\\mkern3mu ";break;case"1000 separator":e="\\mkern2mu ";break;case"commaDecimal":e="{,}";break;case"comma enumeration L":e="{"+t.p1+"}\\mkern6mu ";break;case"comma enumeration M":e="{"+t.p1+"}\\mkern3mu ";break;case"comma enumeration S":e="{"+t.p1+"}\\mkern1mu ";break;case"hyphen":e="\\text{-}";break;case"addition compound":e="\\,{\\cdot}\\,";break;case"electron dot":e="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":e="{\\times}";break;case"prime":e="\\prime ";break;case"cdot":e="\\cdot ";break;case"tight cdot":e="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":e="\\times ";break;case"circa":e="{\\sim}";break;case"^":e="uparrow";break;case"v":e="downarrow";break;case"ellipsis":e="\\ldots ";break;case"/":e="/";break;case" / ":e="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return e},_getArrow:function(t){switch(t){case"->":return"rightarrow";case"":return"rightarrow";case"":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"leftrightarrows";case"<=>":return"rightleftharpoons";case"":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(t){switch(t){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(t){switch(t){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},on=class wE extends b{constructor(e){super(f(p({},e),{type:"delim"})),this.value=e.delim,this.size=e.size}static fromJson(e){return new wE(e)}toJson(){return f(p({},super.toJson()),{delim:this.value,size:this.size})}render(e){return new _(this.value,{type:"middle"})}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);return r!=null&&r.serialize?r.serialize(this,e):q(this.command,this.value)}},an=class SE extends b{constructor(e){super(f(p({},e),{type:"sizeddelim",value:e.delim})),this.delimType=e.delimType,this.size=e.size}static fromJson(e){return new SE(e)}toJson(){return f(p({},super.toJson()),{delim:this.value,size:this.size,delimType:this.delimType})}render(e){let r=Cm(this.value,this.size,e,{classes:{open:"ML__open",close:"ML__close"}[this.delimType],type:this.delimType,isSelected:this.isSelected});return r?(r=this.bind(e,r),this.caret&&(r.caret=this.caret),r):null}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);return r!=null&&r.serialize?r.serialize(this,e):q(this.command,this.value)}},tr=class EE extends b{constructor(e,r,a,l){var u,d;super({type:"enclose",command:e,style:l.style}),this.body=r,this.backgroundcolor=l.backgroundcolor,a.updiagonalarrow&&(a.updiagonalstrike=!1),a.box&&(a.left=!1,a.right=!1,a.bottom=!1,a.top=!1),this.notation=a,this.shadow=(u=l.shadow)!=null?u:"none",this.strokeWidth=(d=l.strokeWidth)!=null?d:"0.06em",this.strokeWidth||(this.strokeWidth="0.06em"),this.strokeStyle=l.strokeStyle,this.svgStrokeStyle=l.svgStrokeStyle,this.strokeColor=l.strokeColor,this.borderStyle=l.borderStyle,this.padding=l.padding,this.captureSelection=!1}static fromJson(e){return new EE(e.command,e.body,e.notation,e)}toJson(){return f(p({},super.toJson()),{notation:this.notation,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}_serialize(e){var r;if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let a=se(this.command,this.mode);if(a!=null&&a.serialize)return a.serialize(this,e);let l=(r=this.command)!=null?r:"";if(this.command==="\\enclose"){l+="{"+Object.keys(this.notation).join(" ")+"}";let u="",d="";this.backgroundcolor&&this.backgroundcolor!=="transparent"&&(u+=d+'mathbackground="'+this.backgroundcolor+'"',d=","),this.shadow&&this.shadow!=="auto"&&(u+=d+'shadow="'+this.shadow+'"',d=","),this.strokeWidth||this.strokeStyle!=="solid"?(u+=d+this.borderStyle,d=","):this.strokeColor&&this.strokeColor!=="currentColor"&&(u+=d+'mathcolor="'+this.strokeColor+'"',d=","),u&&(l+=`[${u}]`)}return q(l,this.bodyToLatex(e))}render(e){let r=new O({parent:e},this.style),a=b.createBox(r,this.body);if(!a)return null;let l=Tf(this.borderStyle),u=r.toEm(!this.padding||this.padding==="auto"?{register:"fboxsep"}:{string:this.padding});a.setStyle("position","relative"),a.setStyle("display","inline-block"),a.setStyle("height",a.height+a.depth,"em"),a.setStyle("width",a.width,"em");let d=new _(null,{classes:"ML__notation"}),g=a.height+a.depth+2*u,E=a.width+2*u,P="";if(this.notation.horizontalstrike&&(P+=this.line(3,50,97,50)),this.notation.verticalstrike&&(P+=this.line(50,3,50,97)),this.notation.updiagonalstrike&&(P+=this.line(3,97,97,3)),this.notation.downdiagonalstrike&&(P+=this.line(3,3,97,97)),this.notation.updiagonalarrow){P+=this.line(u.toString(),(u+a.depth+a.height).toString(),(u+a.width).toString(),u.toString());let me=.03*Math.sqrt(E*E+g*g)*1,_e=a.width*me,He=(a.depth+a.height)*me,Xe=u+a.width,wt=u;wt+He-.4*_e<0&&(wt=.4*_e-He),P+='<polygon points="',P+=`${Xe},${wt} ${Xe-_e-.4*He},${wt+He-.4*_e} `,P+=`${Xe-.7*_e},${wt+.7*He} ${Xe-_e+.4*He},${wt+He+.4*_e} `,P+=`${Xe},${wt}`,P+=`" stroke='none' fill="${this.strokeColor}"`,P+="/>"}if(this.notation.phasorangle){let me=Rm(r),_e=(a.height+a.depth+2*me+u).toString(),He=(a.height+a.depth)/2;P+=this.line(u.toString(),_e,(u+He+a.width).toString(),_e),P+=this.line(u.toString(),_e,(u+He).toString(),(u-me).toString()),g+=me,a.left+=g/2-u}if(this.notation.longdiv){let me=Rm(r);g+=me,P+=this.line(u.toString(),u.toString(),(u+a.width).toString(),u.toString());let _e=.3;a.left+=_e+me,a.setTop(u+me),P+='<path d="',P+=`M ${u} ${u}  a${_e} ${(a.depth+a.height+2*me)/2}, 0, 1, 1, 0 ${a.depth+a.height+2*me} "`,P+=` stroke-width="${Df(r)}" stroke="${this.strokeColor}" fill="none"`,P+="/>"}if(d.height=a.height+u,d.depth=a.depth+u,d.setStyle("box-sizing","border-box"),d.setStyle("left",`calc(-1 * ${l} - ${u}em)`),d.setStyle("height",`calc( ${a.height+a.depth+2*u}em + ${l})`),d.setStyle("top",`calc(-${u}em )`),d.setStyle("width",`calc(${a.width+2*u}em + ${l})`),this.backgroundcolor&&d.setStyle("background-color",this.backgroundcolor),this.notation.box&&d.setStyle("border","1px solid red"),this.notation.actuarial&&(d.setStyle("border-top",this.borderStyle),d.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(d.setStyle("border-bottom",this.borderStyle),d.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(d.setStyle("border-radius","8px"),d.setStyle("border",this.borderStyle)),this.notation.circle&&(d.setStyle("border-radius","50%"),d.setStyle("border",this.borderStyle)),this.notation.top&&d.setStyle("border-top",this.borderStyle),this.notation.left&&d.setStyle("border-left",this.borderStyle),this.notation.right&&d.setStyle("border-right",this.borderStyle),this.notation.bottom&&d.setStyle("border-bottom",this.borderStyle),P){let me="";this.shadow==="auto"&&(me+="filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)"),this.shadow!=="none"&&(me+=`filter: drop-shadow(${this.shadow})`),me+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,me+=' stroke-linecap="round"',this.svgStrokeStyle&&(me+=` stroke-dasharray="${this.svgStrokeStyle}"`),d.svgStyle=me,d.svgOverlay=P}let Z=new _([d,a]);return Z.setStyle("position","relative"),Z.setStyle("height",`${Math.floor(100*(d.depth+d.height))/100}em`),Z.setStyle("display","inline-block"),Z.height=d.height,Z.depth=d.depth,Z.left=u,Z.right=u,this.caret&&(Z.caret=this.caret),Z.wrap(r)}line(e,r,a,l){return`<line x1="${Ja(e)}"  y1="${Ja(r)}" x2="${Ja(a)}" y2="${Ja(l)}" vector-effect="non-scaling-stroke"></line>`}};function Ja(t){return typeof t=="number"?`${Math.floor(100*t)/100}%`:t}function Tf(t){if(!t)return"1px";let e=t.match(/([0-9][a-zA-Z\%]+)/);return e===null?"1px":e[1]}function Df(t){return(Math.floor(100*t.metrics.sqrtRuleThickness/t.scalingFactor)/100/10).toString()+"em"}function Rm(t){let e=t.isDisplayStyle?tt:t.metrics.defaultRuleThickness;return t.metrics.defaultRuleThickness+t.scalingFactor*e/4}var sn={fractionNavigationOrder:"numerator-denominator"},pt=class TE extends b{constructor(e,r,a){var l,u,d;super(f(p({},a),{type:"genfrac",displayContainsHighlight:!0})),this.above=e,this.below=r,this.hasBarLine=(l=a?.hasBarLine)!=null?l:!0,this.continuousFraction=(u=a?.continuousFraction)!=null?u:!1,this.align=(d=a?.align)!=null?d:"center",this.numerPrefix=a?.numerPrefix,this.denomPrefix=a?.denomPrefix,this.mathstyleName=a?.mathstyleName,this.leftDelim=a?.leftDelim,this.rightDelim=a?.rightDelim}static fromJson(e){return new TE(e.above,e.below,e)}toJson(){let e={};return this.continuousFraction&&(e.continuousFraction=!0),this.align!=="center"&&(e.align=this.align),this.numerPrefix&&(e.numerPrefix=this.numerPrefix),this.denomPrefix&&(e.denomPrefix=this.denomPrefix),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.hasBarLine||(e.hasBarLine=!1),this.mathstyleName&&(e.mathstyleName=this.mathstyleName),p(p({},super.toJson()),e)}get children(){if(this._children)return this._children;let e=[];if(sn.fractionNavigationOrder==="denominator-numerator"){for(let r of this.below)e.push(...r.children),e.push(r);for(let r of this.above)e.push(...r.children),e.push(r)}else{for(let r of this.above)e.push(...r.children),e.push(r);for(let r of this.below)e.push(...r.children),e.push(r)}return this._children=e,e}render(e){var r,a;let l=new O({parent:e,mathstyle:this.mathstyleName},this.style),u=l.metrics,d=new O({parent:l,mathstyle:this.continuousFraction?"":"numerator"},this.style),g=this.numerPrefix?new _([new _(this.numerPrefix),b.createBox(d,this.above)],{isTight:d.isTight,type:"ignore"}):(r=b.createBox(d,this.above,{type:"ignore"}))!=null?r:new _(null,{type:"ignore"}),E=new O({parent:l,mathstyle:this.continuousFraction?"":"denominator"},this.style),P=this.denomPrefix?new _([new _(this.denomPrefix),b.createBox(E,this.below,{type:"ignore"})]):(a=b.createBox(E,this.below,{type:"ignore"}))!=null?a:new _(null,{type:"ignore"}),Z=this.hasBarLine?u.defaultRuleThickness:0,me,_e=0,He;l.isDisplayStyle?(me=d.metrics.num1,_e=Z>0?3*Z:7*Z,He=E.metrics.denom1):(Z>0?(me=d.metrics.num2,_e=Z):(me=d.metrics.num3,_e=3*u.defaultRuleThickness),He=E.metrics.denom2);let Xe=[];this.isSelected&&Xe.push("ML__selected");let wt=g.depth,Do=P.height,sr;if(Z<=0){let cf=me-wt-(Do-He);cf<_e&&(me+=(_e-cf)/2,He+=(_e-cf)/2),sr=new Q({individualShift:[{box:g,shift:-me,classes:[...Xe,Ga(this.align)]},{box:P,shift:He,classes:[...Xe,Ga(this.align)]}]}).wrap(l)}else{let cf=new _(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});cf.softWidth=Math.max(g.width,P.width),cf.height=Z/2,cf.depth=Z/2;let df=Oe+Z/2;me<_e+wt+df&&(me=_e+wt+df);let uf=Oe-Z/2;He<_e+Do-uf&&(He=_e+Do-uf),sr=new Q({individualShift:[{box:P,shift:He,classes:[...Xe,Ga(this.align)]},{box:cf,shift:-uf,classes:Xe},{box:g,shift:-me,classes:[...Xe,Ga(this.align)]}]}).wrap(l)}let Ko=l.isDisplayStyle?u.delim1:u.delim2,Bs=this.leftDelim?this.bind(e,Yi("open",this.leftDelim,Ko,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):Qt(l,"ML__open"),th=null;this.continuousFraction?th=new _(null,{type:"close"}):this.rightDelim?th=this.bind(e,Yi("close",this.rightDelim,Ko,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):th=Qt(l,"ML__close");let pf=new _([Bs,sr,th],{isTight:l.isTight,type:"inner",classes:"ML__mfrac"}),_h=this.bind(e,pf);return this.caret&&(_h.caret=this.caret),this.attachSupsub(e,{base:_h})}};function Ga(t){var e;return(e={left:"ML__left",right:"ML__right",center:"ML__center"}[t])!=null?e:"ML__center"}var ue=class AE extends b{constructor(e,r){var a;super({type:"latex",value:e,mode:"latex"}),this.isSuggestion=(a=r?.isSuggestion)!=null?a:!1,this.isError=!1}static fromJson(e){let r=new AE(e.value);return e.isSuggestion&&(r.isSuggestion=!0),e.isError&&(r.isError=!0),r}toJson(){let e={};return this.isSuggestion&&(e.isSuggestion=!0),this.isError&&(e.isError=!0),p({type:"latex",value:this.value},e)}render(e){let r=new _(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return r?(this.caret&&(r.caret=this.caret),this.bind(e,r)):null}},Rt=class CE extends b{constructor(e=""){super({type:"latexgroup",mode:"latex"}),this.body=[...e].map(r=>new ue(r)),this.skipBoundary=!0}static fromJson(e){return new CE}toJson(){return super.toJson()}render(e){let r=b.createBox(e,this.body);return r?(this.caret&&(r.caret=this.caret),this.bind(e,r)):null}_serialize(e){var r,a;return(a=(r=this.body)==null?void 0:r.map(l=>l.value).join(""))!=null?a:""}},ai=class ME extends b{constructor(e,r){super(f(p({},r),{type:"extensible-symbol",isFunction:r?.isFunction})),this.value=e,this.variant=r?.variant,this.subsupPlacement=r?.limits}static fromJson(e){return new ME(e.symbol,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.value&&(e.symbol=this.value),e}render(e){var r;let a=e.isDisplayStyle&&this.value!=="\\smallint",l=new _(this.value,{fontFamily:a?"Size2-Regular":"Size1-Regular",classes:"ML__op-symbol "+(a?"ML__large-op":"ML__small-op"),type:"op",maxFontSize:e.scalingFactor,isSelected:this.isSelected});if(!l)return null;l.right=l.italic;let u=(l.height-l.depth)/2-Oe*e.scalingFactor,d=l.italic;l.setTop(u);let g=l;if(this.superscript||this.subscript){let E=(r=this.subsupPlacement)!=null?r:"auto";E==="auto"&&e.isDisplayStyle&&(E="over-under"),g=E==="over-under"?this.attachLimits(e,{base:l,baseShift:u,slant:d}):this.attachSupsub(e,{base:l})}return new _(this.bind(e,g),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(e)}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);if(r!=null&&r.serialize)return r.serialize(this,e);let a=[];return a.push(this.command),this.explicitSubsupPlacement&&(this.subsupPlacement==="over-under"&&a.push("\\limits"),this.subsupPlacement==="adjacent"&&a.push("\\nolimits"),this.subsupPlacement==="auto"&&a.push("\\displaylimits")),a.push(this.supsubToLatex(e)),R(a)}},ht=class kE extends b{constructor(e){let r=e.body;super(f(p({},e),{type:"overlap",body:typeof r=="string"?[new b({value:r})]:r,style:e?.style})),this.skipBoundary=!0,this.align=e?.align,this.boxType=e?.boxType}static fromJson(e){return new kE(e)}toJson(){let e={};return this.align&&(e.align=this.align),this.boxType&&(e.boxType=this.boxType),p(p({},super.toJson()),e)}render(e){let r=b.createBox(e,this.body,{classes:"ML__inner"});return r?(this.caret&&(r.caret=this.caret),this.bind(e,new _([r,new _(null,{classes:"ML__fix"})],{classes:this.align==="right"?"ML__rlap":"ML__llap",type:this.boxType}))):null}},we=class RE extends b{constructor(e){var r,a,l,u;super({type:"overunder",command:e.command,style:e.style,mode:e.mode,body:e.body,skipBoundary:(r=e.skipBoundary)!=null?r:!0}),this.subsupPlacement=e.supsubPlacement,this.svgAbove=e.svgAbove,this.svgBelow=e.svgBelow,this.svgBody=e.svgBody,this.above=e.above,this.below=e.below,this.boxType=(a=e.boxType)!=null?a:"ord",this.paddedBody=(l=e.paddedBody)!=null?l:!1,this.paddedLabels=(u=e.paddedLabels)!=null?u:!1}static fromJson(e){return new RE(e)}toJson(){let e=super.toJson();return this.skipBoundary||(e.skipBoundary=!1),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.svgAbove&&(e.svgAbove=this.svgAbove),this.svgBelow&&(e.svgBelow=this.svgBelow),this.svgBody&&(e.svgBody=this.svgBody),this.boxType!=="ord"&&(e.boxType=this.boxType),this.paddedBody&&(e.paddedBody=!0),this.paddedLabels&&(e.paddedLabels=!0),e}render(e){let r=this.svgBody?Wi(this.svgBody):b.createBox(e,this.body,{type:"ignore"}),a=new O({parent:e,mathstyle:"scriptstyle"},this.style),l=null;this.svgAbove?l=Wi(this.svgAbove):this.above&&(l=b.createBox(a,this.above,{type:"ignore"}));let u=null;this.svgBelow?u=Wi(this.svgBelow):this.below&&(u=b.createBox(a,this.below,{type:"ignore"})),this.paddedBody&&(r=new _([Qt(e,"ML__open"),r,Qt(e,"ML__close")],{type:"ignore"}));let d=Kf(e,{base:r,above:l,below:u,type:this.boxType==="bin"||this.boxType==="rel"?this.boxType:"ord",paddedAboveBelow:this.paddedLabels});return d?(this.subsupPlacement==="over-under"?d=this.attachLimits(e,{base:d,type:d.type}):d=this.attachSupsub(e,{base:d}),this.caret&&(d.caret=this.caret),this.bind(e,d)):null}};function Kf(t,e){if(!e.base)return null;if(!e.above&&!e.below){let g=new _(e.base,{type:e.type});return g.setStyle("position","relative"),g}let r=0;e.above&&(r=t.metrics.bigOpSpacing5);let a=null,l=e.base,u=0,d=["ML__center"];if(e.paddedAboveBelow&&d.push("ML__label_padding"),e.below&&e.above){let g=t.metrics.bigOpSpacing5+e.below.height+e.below.depth+l.depth+u;a=new Q({bottom:g,children:[t.metrics.bigOpSpacing5,{box:e.below,classes:d},{box:l,classes:["ML__center"]},r,{box:e.above,classes:d},t.metrics.bigOpSpacing5]})}else e.below?a=new Q({top:l.height-u,children:[t.metrics.bigOpSpacing5,{box:e.below,classes:d},{box:l,classes:["ML__center"]}]}):e.above&&(a=new Q({bottom:l.depth+u,children:[{box:l,classes:["ML__center"]},r,{box:e.above,classes:d},t.metrics.bigOpSpacing5]}));return new _(a,{type:e.type})}var Pt=class PE extends b{constructor(e){var r,a,l,u;super(f(p({},e),{type:"phantom"})),this.captureSelection=!0,this.isInvisible=(r=e.isInvisible)!=null?r:!1,this.smashDepth=(a=e.smashDepth)!=null?a:!1,this.smashHeight=(l=e.smashHeight)!=null?l:!1,this.smashWidth=(u=e.smashWidth)!=null?u:!1}static fromJson(e){return new PE(e)}toJson(){let e={};return this.isInvisible&&(e.isInvisible=!0),this.smashDepth&&(e.smashDepth=!0),this.smashHeight&&(e.smashHeight=!0),this.smashWidth&&(e.smashWidth=!0),p(p({},super.toJson()),e)}render(e){let r=new O({parent:e,isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return this.isInvisible,b.createBox(r,this.body,{classes:"ML__inner"});let a=b.createBox(this.isInvisible?r:e,this.body);if(!a)return null;if(this.smashWidth){let l=new _(null,{classes:"ML__fix"});return new _([a,l],{classes:"ML__rlap"}).wrap(e)}if(!this.smashHeight&&!this.smashDepth)return a;if(this.smashHeight&&(a.height=0),this.smashDepth&&(a.depth=0),a.children)for(let l of a.children)this.smashHeight&&(l.height=0),this.smashDepth&&(l.depth=0);return new Q({firstBaseline:[{box:a}]},{type:a.type}).wrap(e)}},zt=class IE extends b{constructor(e){var r;super(p({type:"spacing"},e)),this.width=e?.width,this._braced=(r=e?.braced)!=null?r:!1}static fromJson(e){return new IE(e)}toJson(){let e=super.toJson();return this.width!==void 0&&(e.width=this.width),this._braced&&(e.braced=!0),e}render(e){var r;if(this.command==="space")return new _(this.mode==="math"?null:" ");let a;if(this.width!==void 0)a=new _(null,{classes:"ML__mspace"}),a.left=e.toEm(this.width);else{let l=(r={"\\qquad":"ML__qquad","\\quad":"ML__quad","\\enspace":"ML__enspace","\\;":"ML__thickspace","\\:":"ML__mediumspace","\\>":"ML__mediumspace","\\,":"ML__thinspace","\\!":"ML__negativethinspace"}[this.command])!=null?r:"ML__mediumspace";a=new _(null,{classes:l})}return a=this.bind(e,a),this.caret&&(a.caret=this.caret),a}_serialize(e){var r;if(!e.expandMacro&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let a=se(this.command,this.mode);if(a!=null&&a.serialize)return a.serialize(this,e);let l=(r=this.command)!=null?r:"";return this.width===void 0?l:this._braced&&!("register"in this.width)?`${l}{${be(this.width)}}`:`${l}${be(this.width)}`}},ln=class NE extends b{constructor(e){var r;super(f(p({},e),{type:"surd",mode:(r=e.mode)!=null?r:"math",style:e.style,displayContainsHighlight:!0,body:e.body})),this.above=e.index}static fromJson(e){return new NE(f(p({},e),{index:e.above}))}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);if(r!=null&&r.serialize)return r.serialize(this,e);let a=this.command,l=this.bodyToLatex(e);return this.above&&!this.hasEmptyBranch("above")?q(`${a}[${this.aboveToLatex(e)}]`,l):/^[0-9]$/.test(l)?`${a}${l}`:q(a,l)}get children(){if(this._children)return this._children;let e=[];if(this.above)for(let r of this.above)e.push(...r.children),e.push(r);if(this.body)for(let r of this.body)e.push(...r.children),e.push(r);return this._children=e,e}render(e){var r;let a=new O({parent:e,mathstyle:"cramp"},this.style),l=(r=b.createBox(a,this.body,{type:"inner"}))!=null?r:new _(null),u=a.scalingFactor,d=a.metrics.defaultRuleThickness/u,g=e.isDisplayStyle?tt:d,E=new _(null,{classes:"ML__sqrt-line",style:this.style});E.height=d,E.softWidth=l.width;let P=u*(d+g/4),Z=Math.max(u*2*g,l.height+l.depth)+P+d,me=new O({parent:e},this.style),_e=this.bind(me,new _(Yi("inner","\\surd",Z,!1,me,{isSelected:this.isSelected}),{isSelected:this.isSelected,classes:"ML__sqrt-sign",style:this.style}));if(!_e)return null;let He=_e.height+_e.depth-d;He>l.height+l.depth+P&&(P=(P+He-(l.height+l.depth))/2),_e.setTop(_e.height-l.height-P);let Xe=this.bind(e,new Q({firstBaseline:[{box:new _(l)},P-2*d,{box:E},d]})),wt=b.createBox(new O({parent:e,mathstyle:"scriptscriptstyle"}),this.above,{type:"ignore"});if(!wt){let Ko=new _([_e,Xe],{classes:this.containsCaret?"ML__contains-caret":"",type:"inner"});return Ko.setStyle("display","inline-block"),Ko.setStyle("height",Ko.height+Ko.depth,"em"),this.caret&&(Ko.caret=this.caret),this.bind(e,Ko)}let Do=new Q({shift:-.6*(Math.max(_e.height,Xe.height)-Math.max(_e.depth,Xe.depth)),children:[{box:wt}]}),sr=new _([new _(Do,{classes:"ML__sqrt-index",type:"ignore"}),_e,Xe],{type:"inner",classes:this.containsCaret?"ML__contains-caret":""});return sr.height=_e.height,sr.depth=_e.depth,this.caret&&(sr.caret=this.caret),this.bind(e,sr)}},$l=class extends _{constructor(t){super(null,{type:"skip"}),this._width=t}toMarkup(){return`<span style="display:inline-block;width:${Math.ceil(this.width*100)/100}em"></span>`}};function Zn(t,e){if(!t.parent)return;let r=t.parent.children,a=r.indexOf(t),l=a-1;for(;l>=0&&r[l].type==="ignore";)l-=1;if(l<0&&t.parent.parent&&t.parent.type==="lift"){Zn(t.parent,e);return}a>0&&r[a-1].type==="skip"?r[a-1].width+=e:r.splice(a,0,new $l(e))}var Of={ord:{op:3,bin:4,rel:5,inner:3},op:{ord:3,op:3,rel:5,inner:3},bin:{ord:4,op:4,open:4,inner:4},rel:{ord:5,op:5,open:5,inner:5},close:{op:3,bin:4,rel:5,inner:3},punct:{ord:3,op:3,rel:3,open:3,punct:3,inner:3},inner:{ord:3,op:3,bin:4,rel:5,open:3,punct:3,inner:3}},Bf={ord:{op:3},op:{ord:3,op:3},close:{op:3},inner:{op:3}};function Rf(t){Yn(t,(e,r)=>{r.type==="bin"&&(!e||/^(middle|bin|op|rel|open|punct)$/.test(e.type))&&(r.type="ord"),e?.type==="bin"&&/^(rel|close|punct)$/.test(r.type)&&(e.type="ord"),r.type!=="ignore"&&(e=r)})}function It(t,e){if(!t.children)return t;let r=t.children;Rf(r);let a=e.getRegisterAsEm("thinmuskip"),l=e.getRegisterAsEm("medmuskip"),u=e.getRegisterAsEm("thickmuskip");return Yn(r,(d,g)=>{var E,P,Z;if(!d)return;let me=d.type,_e=g.isTight?(E=Bf[me])!=null?E:null:(P=Of[me])!=null?P:null,He=(Z=_e?.[g.type])!=null?Z:null;He===3&&Zn(g,a),He===4&&Zn(g,l),He===5&&Zn(g,u)}),t}function Yn(t,e,r=void 0){if(!t)return r;t=[...t];for(let a of t)a.type==="lift"?r=Yn(a.children,e,r):a.type==="ignore"?Yn(a.children,e):(e(r,a),Yn(a.children,e),r=a);return r}var si=class DE extends b{constructor(e){super({type:"tooltip",command:e.command,mode:e.mode,style:e.style,body:e.body,displayContainsHighlight:!0}),this.tooltip=new b({type:"root",mode:e.content,body:e.tooltip,style:{}}),this.skipBoundary=!0,this.captureSelection=!1}static fromJson(e){return new DE(f(p({},e),{tooltip:ft(e.tooltip)}))}toJson(){var e;let r=(e=this.tooltip.body)==null?void 0:e.filter(a=>a.type!=="first").map(a=>a.toJson());return f(p({},super.toJson()),{tooltip:r})}render(e){let r=b.createBox(new O,this.body);if(!r)return null;let a=new O({parent:e,mathstyle:"displaystyle"},{fontSize:Vi}),l=_r(It(new _(this.tooltip.render(a),{classes:"ML__tooltip-content"}),a)),u=new _([l,r],{classes:"ML__tooltip-container"});return this.caret&&(u.caret=this.caret),this.bind(e,u)}},gt=class LE extends b{constructor(e,r){super(f(p({},r),{type:"operator",isFunction:r?.isFunction})),this.value=e,this.variant=r?.variant,this.variantStyle=r?.variantStyle,this.subsupPlacement=r?.limits}static fromJson(e){return new LE(e.symbol,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.variantStyle&&(e.variantStyle=this.variantStyle),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.value&&(e.symbol=this.value),e}render(e){var r;let a=new _(this.value,{type:"op",mode:"math",maxFontSize:e.scalingFactor,style:{variant:this.variant,variantStyle:this.variantStyle},isSelected:this.isSelected,letterShapeStyle:e.letterShapeStyle}),l=a;if(this.superscript||this.subscript){let u=(r=this.subsupPlacement)!=null?r:"auto";l=u==="over-under"||u==="auto"&&e.isDisplayStyle?this.attachLimits(e,{base:a}):this.attachSupsub(e,{base:a})}return new _(this.bind(e,l),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(e)}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);if(r!=null&&r.serialize)return r.serialize(this,e);let a=[this.command];return this.explicitSubsupPlacement&&(this.subsupPlacement==="over-under"&&a.push("\\limits"),this.subsupPlacement==="adjacent"&&a.push("\\nolimits"),this.subsupPlacement==="auto"&&a.push("\\displaylimits")),a.push(this.supsubToLatex(e)),R(a)}};function ft(t){if(Y(t))return t.map(a=>ft(a));if(typeof t=="string")return b.fromJson(t);t=p({},t);for(let a of Lr)t[a]&&(t[a]=ft(t[a]));t.args&&(t.args=Pf(t.args)),t.array&&(t.array=ft(t.array));let e=t.type,r;e==="accent"&&(r=Tr.fromJson(t)),e==="array"&&(r=I.fromJson(t)),e==="box"&&(r=nt.fromJson(t)),e==="chem"&&(r=Xn.fromJson(t)),e==="composition"&&(r=Qi.fromJson(t)),e==="delim"&&(r=on.fromJson(t)),e==="enclose"&&(r=tr.fromJson(t)),e==="error"&&(r=mt.fromJson(t)),e==="extensible-symbol"&&(r=ai.fromJson(t)),e==="genfrac"&&(r=pt.fromJson(t)),e==="group"&&(r=en.fromJson(t)),e==="latex"&&(r=ue.fromJson(t)),e==="latexgroup"&&(r=Rt.fromJson(t)),e==="leftright"&&(r=G.fromJson(t)),e==="macro"&&(r=tn.fromJson(t)),e==="macro-argument"&&(r=Wa.fromJson(t)),e==="operator"&&(r=gt.fromJson(t)),e==="overlap"&&(r=ht.fromJson(t)),e==="overunder"&&(r=we.fromJson(t)),e==="placeholder"&&(r=Le.fromJson(t)),e==="prompt"&&(r=rn.fromJson(t)),e==="phantom"&&(r=Pt.fromJson(t)),e==="sizeddelim"&&(r=an.fromJson(t)),e==="spacing"&&(r=zt.fromJson(t)),e==="subsup"&&(r=er.fromJson(t)),e==="surd"&&(r=ln.fromJson(t)),e==="text"&&(r=$e.fromJson(t)),e==="tooltip"&&(r=si.fromJson(t)),r||(r=b.fromJson(t));for(let a of Lr)t[a]&&r.setChildren(t[a],a);return t.verbatimLatex!==void 0&&(r.verbatimLatex=t.verbatimLatex),t.subsupPlacement&&(r.subsupPlacement=t.subsupPlacement),t.explicitSubsupPlacement&&(r.explicitSubsupPlacement=!0),t.isFunction&&(r.isFunction=!0),t.skipBoundary&&(r.skipBoundary=!0),t.captureSelection&&(r.captureSelection=!0),r}function Pf(t){if(t){if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e=>e==="<null>"?null:typeof e=="object"&&"group"in e?{group:e.group.map(r=>ft(r))}:typeof e=="object"&&"atoms"in e?e.atoms.map(r=>ft(r)):e)}}function Qn(t,e){!t||!e||(Y(t)?t.forEach(r=>Qn(r,e)):typeof t=="object"&&t.applyStyle(e,{unstyledOnly:!0}))}function eo(t,e,r,a){function l(d,g){for(let E of u)if(E.style[d]!==g)return!1;return!0}if(e=t.normalizeRange(e),e[0]===e[1])return!1;let u=t.getAtoms(e,{includeChildren:!0});a.operation==="toggle"&&(r.color&&l("color",r.color)&&(r.color="none",delete r.verbatimColor),r.backgroundColor&&l("backgroundColor",r.backgroundColor)&&(r.backgroundColor="none",delete r.verbatimBackgroundColor),r.fontFamily&&l("fontFamily",r.fontFamily)&&(r.fontFamily="none"),r.fontSeries&&l("fontSeries",r.fontSeries)&&(r.fontSeries="auto"),r.fontShape&&l("fontShape",r.fontShape)&&(r.fontShape="auto"),r.fontSize&&l("fontSize",r.fontSize)&&(r.fontSize=Vi),r.variant&&l("variant",r.variant)&&(r.variant="normal"),r.variantStyle&&l("variantStyle",r.variantStyle)&&(r.variantStyle=""));for(let d of u)d.applyStyle(r);return!0}function Pm(t){return{up:"italic",bold:"bolditalic",italic:"italic",bolditalic:"bolditalic","":"italic"}[t??""]}function to(t){return{up:"up",bold:"bold",italic:void 0,bolditalic:"bold","":void 0}[t??""]}var Fl={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams ML__bold"],"ams-italic":["AMS-Regular","ML__ams ML__it"],"ams-bolditalic":["AMS-Regular","ML__ams ML__bold ML__it"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans ML__it"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans ML__bold ML__it"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak ML__bold"],"fraktur-italic":["Fraktur-Regular","ML__frak ML__it"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak ML__bold ML__it"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb ML__bold"],"double-struck-italic":["AMS-Regular","ML__bb ML_italic"],"double-struck-bolditalic":["AMS-Regular","ML__bb ML_bolditalic"]},Za={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},zm=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,zf=/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/,If=[/^[a-z]$/,/^[A-Z]$/,zm,zf],Nf={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]},Vl=class extends ge{constructor(){super("math")}createAtom(t,e,r){var a,l,u,d,g,E;if(e===null)return new b({type:"mord",mode:"math",command:t,value:t,style:r});let P;try{P=(u=(l=globalThis.MathfieldElement)==null?void 0:l.isFunction((a=e.command)!=null?a:t))!=null?u:!1}catch{P=!1}if(e.definitionType==="symbol"){let me=new b({type:(d=e.type)!=null?d:"mord",mode:"math",command:(g=e.command)!=null?g:t,value:String.fromCodePoint(e.codepoint),isFunction:P,style:r});return t.startsWith("\\")&&(me.verbatimLatex=t),me}let Z=new b({type:"mord",mode:"math",command:(E=e.command)!=null?E:t,value:t,isFunction:P,style:r});return t.startsWith("\\")&&(Z.verbatimLatex=t),Z}serialize(t,e){let r=$f(t,f(p({},e),{defaultMode:"math"}));return r.length===0||e.defaultMode!=="text"?r:["$ ",...r," $"]}getFont(t,e){var r,a;if(e.variant,e.fontFamily){let[P,Z]=Fl[e.fontFamily];return Z&&(t.classes+=" "+Z),P}let{variant:l}=e,{variantStyle:u}=e;if(l==="normal"&&!u&&/[\u00A3\u0131\u0237]/.test(t.value)&&(l="main",u="italic"),l==="normal"&&!u&&t.value.length===1){let P=!1;If.forEach((Z,me)=>{var _e;Z.test(t.value)&&Nf[(_e=e.letterShapeStyle)!=null?_e:"tex"][me]==="it"&&(P=!0)}),P&&(u=Pm(u))}u==="up"&&(u=void 0);let d=u?l+"-"+u:l,[g,E]=Fl[d];if(Za[l]&&!Za[l].test(t.value)){let P=Cn(t.value,l,u);return P||(P=(r=Cn(t.value,l))!=null?r:t.value,t.classes+=(a={bold:" ML__bold",italic:" ML__it","bold-italic":" ML__bold ML__it"}[u??""])!=null?a:""),t.value=P,null}return zm.test(t.value)&&(t.classes+=" lcGreek"),E&&(t.classes+=" "+E),g}};function $f(t,e){return ct(t,"bold").map(r=>{if(Da(r[0])!=="bold"||Da(r[0].parent)==="bold")return R(Xa(r,e));let a=R(r.map(l=>{var u;return(u=l.value)!=null?u:""}));return/^[a-zA-Z0-9]+$/.test(a)?q("\\mathbf",R(Xa(r,e))):q("\\bm",R(Xa(r,e)))})}function Xa(t,e){let{parent:r}=t[0],a=Ka(r);return ct(t,"variant").map(l=>{let u=Ka(l[0]),d="";u&&u!==a&&(d={calligraphic:"\\mathcal","calligraphic-uo":"\\mathcal",fraktur:"\\mathfrak","fraktur-uo":"\\mathfrak","double-struck":"\\mathbb","double-struck-uo":"\\mathbb",script:"\\mathscr","script-uo":"\\mathscr",monospace:"\\mathtt","monospace-uo":"\\mathtt","sans-serif":"\\mathsf","sans-serif-uo":"\\mathsf",normal:"","normal-up":"\\mathrm","normal-italic":"\\mathnormal","normal-bold":"","normal-bolditalic":"\\mathbfit",ams:"","ams-up":"\\mathrm","ams-italic":"\\mathit","ams-bold":"","ams-bolditalic":"\\mathbfit",main:"","main-up":"\\mathrm","main-italic":"\\mathit","main-bold":"","main-bolditalic":"\\mathbfit"}[u]);let g=R(l.map(E=>E._serialize(e)));return d?q(d,g):g})}new Vl;function Ff(t,e){return t.map(r=>r._serialize(e))}function Vf(t,e){return ct(t,"fontShape").map(r=>{let a=Ff(r,e),{fontShape:l}=r[0].style,u="";return l==="it"&&(u="\\textit"),l==="sl"&&(u="\\textsl"),l==="sc"&&(u="\\textsc"),l==="n"&&(u="\\textup"),!u&&l?`{${q("\\fontshape",l)}${R(a)}}`:u?q(u,R(a)):R(a)})}function qf(t,e){return ct(t,"fontSeries").map(r=>{let a=Vf(r,e),{fontSeries:l}=r[0].style,u="";return l==="b"&&(u="\\textbf"),l==="l"&&(u="\\textlf"),l==="m"&&(u="\\textmd"),l&&!u?`{${q("\\fontseries",l)}${R(a)}}`:u?q(u,R(a)):R(a)})}function Hf(t,e){return ct(t,"fontSize").map(r=>{var a,l;let u=qf(r,e),d=(l=["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][(a=r[0].style.fontSize)!=null?a:""])!=null?l:"";return d?`${d} ${R(u)}`:R(u)})}function Wf(t,e,r){return ct(t,"fontFamily").map(a=>{var l;r=r&&!a.every(E=>E.style.fontFamily||E.style.fontShape||E.style.fontSeries||E.style.fontSize);let u=Hf(a,e),{fontFamily:d}=a[0].style,g=(l={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[d??""])!=null?l:"";return g?`\\${g}{${R(u)}}`:d?`{\\fontfamily{${a[0].style.fontFamily}} ${R(u)}}`:r?`\\text{${R(u)}}`:R(u)})}var Im={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"},ql=class extends ge{constructor(){super("text")}createAtom(t,e,r){return e&&e.definitionType==="symbol"?new $e(t,String.fromCodePoint(e.codepoint),r??{}):null}serialize(t,e){return Wf(t,f(p({},e),{defaultMode:"text"}),e.defaultMode!=="text")}getFont(t,e){var r,a,l,u,d;let{fontFamily:g}=e;if(Im[g]?t.classes+=" "+Im[g]:g&&t.setStyle("font-family",g),e.fontShape&&(t.classes+=" ",t.classes+=(r={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[e.fontShape])!=null?r:""),e.fontSeries){let E=e.fontSeries.match(/(.?[lbm])?(.?[cx])?/);E&&(t.classes+=" ",t.classes+=(l={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[(a=E[1])!=null?a:""])!=null?l:"",t.classes+=" ",t.classes+=(d={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[(u=E[2])!=null?u:""])!=null?d:"")}return"Main-Regular"}};new ql;var Hl=class extends ge{constructor(){super("latex")}createAtom(t){return new ue(t)}serialize(t,e){return t.filter(r=>r instanceof ue&&!r.isSuggestion).map(r=>r.value)}getFont(){return null}};new Hl;var Nm={id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","",""],KeyB:["x","X","",""],KeyC:["j","J","",""],KeyD:["e","E","",""],KeyE:[".",">","",""],KeyF:["u","U","",""],KeyG:["i","I","",""],KeyH:["d","D","",""],KeyI:["c","C","",""],KeyJ:["h","H","",""],KeyK:["t","T","",""],KeyL:["n","N","",""],KeyM:["m","M","",""],KeyN:["b","B","",""],KeyO:["r","R","",""],KeyP:["l","L","",""],KeyQ:["'",'"',"",""],KeyR:["p","P","",""],KeyS:["o","O","",""],KeyT:["y","Y","",""],KeyU:["g","G","",""],KeyV:["k","K","",""],KeyW:[",","<","",""],KeyX:["q","Q","",""],KeyY:["f","F","",""],KeyZ:[";",":","",""],Digit1:["1","!","",""],Digit2:["2","@","",""],Digit3:["3","#","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","^","",""],Digit7:["7","&","",""],Digit8:["8","*","",""],Digit9:["9","(","",""],Digit0:["0",")","",""],Space:[" "," "," "," "],Minus:["[","{","",""],Equal:["]","}","",""],BracketLeft:["/","?","",""],BracketRight:["=","+","",""],Backslash:["\\","|","",""],Semicolon:["s","S","",""],Quote:["-","_","",""],Backquote:["`","~","`","`"],Comma:["w","W","",""],Period:["v","V","",""],Slash:["z","Z","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["","","",""],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}},Ya={id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","",""],Digit2:["2","@","",""],Digit3:["3","#","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","^","",""],Digit7:["7","&","",""],Digit8:["8","*","",""],Digit9:["9","(","",""],Digit0:["0",")","",""],Space:[" "," "," "," "],Minus:["-","_","",""],Equal:["=","+","",""],BracketLeft:["[","{","",""],BracketRight:["]","}","",""],Backslash:["\\","|","",""],Semicolon:[";",":","",""],Quote:["'",'"',"",""],Backquote:["`","","`","`"],Comma:[",","<","",""],Period:[".",">","",""],Slash:["/","?","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["","","",""],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}},Wl={id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","",""],Digit2:["2","@","",""],Digit3:["3","#","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","^","",""],Digit7:["7","&","",""],Digit8:["8","*","",""],Digit9:["9","(","",""],Digit0:["0",")","",""],Space:[" "," ","",""],Minus:["-","_","",""],Equal:["=","+","",""],BracketLeft:["[","{","",""],BracketRight:["]","}","",""],Backslash:["\\","|","",""],Semicolon:[";",":","",""],Quote:["'",'"',"",""],Backquote:["`","~","",""],Comma:[",","<","",""],Period:[".",">","",""],Slash:["/","?","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}},Ul={id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},$m={id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","","|"],KeyM:[",","?","",""],KeyN:["n","N","~",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","",""],Digit3:['"',"3","",""],Digit4:["'","4","",""],Digit5:["(","5","{","["],Digit6:["","6","",""],Digit7:["","7","",""],Digit8:["!","8","",""],Digit9:["","9","",""],Digit0:["","0","",""],Space:[" "," "," "," "],Minus:[")","","}","]"],Equal:["-","_","",""],BracketLeft:["^","","",""],BracketRight:["$","*","",""],Backslash:["`","","@","#"],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["<",">","",""],Comma:[";",".","",""],Period:[":","/","","\\"],Slash:["=","+","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","",""],NumpadEqual:["=","=","=","="]}},Fm={id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["","7","`",""],Digit8:["_","8","\\",""],Digit9:["","9","^",""],Digit0:["","0","@",""],Space:[" "," ","",""],Minus:[")","","]",""],Equal:["=","+","}",""],BracketLeft:["^","","",""],BracketRight:["$","","",""],Backslash:["*","","",""],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}},Vm={id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","","&"],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","n","N"],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","","<"],KeyX:["x","X","",">"],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{","$"],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["","7","`",""],Digit8:["_","8","\\",""],Digit9:["","9","^",""],Digit0:["","0","@",""],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:[")","","]",""],Equal:["=","+","}",""],BracketLeft:["","","",""],BracketRight:["$","","",""],Backslash:["*","","",""],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["","~","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","","",""],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""]}},qm={id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","@",""],KeyM:["m","M","",""],KeyN:["n","N","~",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"",""],Digit3:["3","","","#"],Digit4:["4","$","",""],Digit5:["5","%","[",""],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{",""],Digit9:["9",")","}",""],Digit0:["0","=","",""],Space:[" "," "," "," "],Minus:["","?","",""],Equal:["","`","'",""],BracketLeft:["","","",""],BracketRight:["+","*","",""],Backslash:["#","'","",""],Semicolon:["","","",""],Quote:["","","",""],Backquote:["<",">","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","","",""],NumpadEqual:["=","=","=","="]}},Hm={id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"",""],Digit3:["3","","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["","?","\\",""],Equal:["","`","",""],BracketLeft:["","","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["","","",""],Quote:["","","",""],Backquote:["^","","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}},Wm={id:"linux.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","","&"],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"",""],Digit3:["3","","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["","?","\\",""],Equal:["","","",""],BracketLeft:["","","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["","","",""],Quote:["","","",""],Backquote:["","","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],PrintScreen:["","","",""],PageUp:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",",","",","],IntlBackslash:["<",">","|",""],AltRight:["\r","\r","\r","\r"],MetaRight:[".",".",".","."]}},Um={id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C",""," "],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H",""," "],KeyI:["i","I"," "," "],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L"," ",""],KeyM:["m","M","",""],KeyN:["n","N"," ",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R",""," "],KeyS:["s","S",""," "],KeyT:["t","T","",""],KeyU:["u","U"," "," "],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y",""," "],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&",""," "],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," "," "," "],Minus:["'","?","",""],Equal:["","","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","~",""],Quote:["","","{",""],Backquote:["<",">","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["","","\\",""]}},jm={id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","~",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["","","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","",""],Quote:["","","{",""],Backquote:["","","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}},Jm={id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","","&"],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","n","N"],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",">"],KeyY:["y","Y","",""],KeyZ:["z","Z","","<"],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","~","$"],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["'","?","\\",""],Equal:["","","","~"],BracketLeft:["","","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","~",""],Quote:["","","{","{"],Backquote:["","","\\","\\"],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}};function jl(t){let e=t.split("+"),r={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:e.pop()};return e.includes("shift")&&(r.shift=!0),e.includes("alt")&&(r.alt=!0),e.includes("ctrl")&&(r.ctrl=!0),e.includes("cmd")&&(r.cmd=!0),e.includes("win")&&(r.win=!0),e.includes("meta")&&(r.meta=!0),r}function ci(t){let e="";return t.shift&&(e+="shift+"),t.alt&&(e+="alt+"),t.ctrl&&(e+="ctrl+"),t.cmd&&(e+="cmd+"),t.win&&(e+="win+"),t.meta&&(e+="meta+"),e+t.key}var Uf={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},ro=[];function Jl(){switch(kt()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function Ue(t){(!t.platform||t.platform===Jl())&&ro.push(t)}function Gm(t,e){var r;let a={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!t)return a;for(let[l,u]of Object.entries(e.mapping)){if(u[0]===t)return a.key=`[${l}]`,a;if(u[1]===t)return a.shift=!0,a.key=`[${l}]`,a;if(u[2]===t)return a.alt=!0,a.key=`[${l}]`,a;if(u[3]===t)return a.shift=!0,a.alt=!0,a.key=`[${l}]`,a}return a.key=(r=Uf[t])!=null?r:"",a}function Xm(t){if(t.code)return t;let e=Object.entries(Dr().mapping),r=!1,a=!1,l="";for(let u=0;u<4;u++){for(let[d,g]of e)if(g[u]===t.key){l=d,u===3?(r=!0,a=!0):u===2?r=!0:u===1&&(a=!0);break}if(l)break}return new KeyboardEvent(t.type,f(p({},t),{altKey:r,shiftKey:a,code:l}))}function Zm(t){var e,r;if(!t||t.key==="Unidentified"||t.key==="Dead")return;let a=t.shiftKey&&t.altKey?3:t.altKey?2:t.shiftKey?1:0;for(let l of ro)((e=l.mapping[t.code])==null?void 0:e[a])===t.key?l.score+=1:(r=l.mapping[t.code])!=null&&r[a]&&(l.score=0);ro.sort((l,u)=>u.score-l.score)}function Dr(){return ro[0]}function Qm(){switch(Jl()){case"apple":return Ya;case"windows":return Wl;case"linux":return Ul}return Ya}switch(Jl()){case"apple":Ue(Ya),Ue($m),Ue(Um),Ue(qm);break;case"windows":Ue(Wl),Ue(Fm),Ue(jm),Ue(Hm);break;case"linux":Ue(Ul),Ue(Vm),Ue(Jm),Ue(Wm);break}Ue(Nm);function cn(t){var e;let r=/macos|ios/.test(kt()),a=t.split("+"),l="";for(let u of a)l&&(l+=r?"":'<span class="ML__shortcut-join">+</span>'),u.startsWith("[Key")?l+=u.slice(4,5):u.startsWith("Key")?l+=u.slice(3,4):u.startsWith("[Digit")?l+=u.slice(6,7):u.startsWith("Digit")?l+=u.slice(5,6):l+=(e={cmd:"",meta:r?"":"Ctrl",shift:r?"":"Shift",alt:r?"":"Alt",ctrl:r?"":"Ctrl","\n":r?"":"Return","[return]":r?"":"Return","[enter]":r?"":"Enter","[tab]":r?"":"Tab","[escape]":"Esc","[backspace]":r?"":"Backspace","[delete]":r?"":"Del","[pageup]":r?"":"Page Up","[pagedown]":r?"":"Page Down","[home]":r?"":"Home","[end]":r?"":"End","[space]":"Space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"",up:"",right:"",down:"","[arrowleft]":"","[arrowup]":"","[arrowright]":"","[arrowdown]":""}[u.toLowerCase()])!=null?e:u.toUpperCase();return l}function un(t){if(t instanceof MouseEvent||t instanceof PointerEvent)return{x:t.clientX,y:t.clientY};if(typeof TouchEvent<"u"&&t instanceof TouchEvent){let e=[...t.touches].reduce((a,l)=>({x:a.x+l.clientX,y:a.y+l.clientY}),{x:0,y:0}),r=t.touches.length;return{x:e.x/r,y:e.y/r}}}function Nt(t){let e={alt:!1,control:!1,shift:!1,meta:!1};return(t instanceof MouseEvent||t instanceof PointerEvent||typeof TouchEvent<"u"&&t instanceof TouchEvent||t instanceof KeyboardEvent)&&(t.altKey&&(e.alt=!0),t.ctrlKey&&(e.control=!0),t.metaKey&&(e.meta=!0),t.shiftKey&&(e.shift=!0)),e}function ep(t,e){return!t&&e||t&&!e?!1:!t||!e?!0:t.alt===e.alt&&t.control===e.control&&t.shift===e.shift&&t.meta===e.meta}var jf=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function Kr(t){return t.ctrlKey||t.metaKey||["Dead","Process"].includes(t.key)?!1:t.code===""?!0:jf.has(t.code)}function ui(){var t;let e=document.activeElement;for(;(t=e?.shadowRoot)!=null&&t.activeElement;)e=e.shadowRoot.activeElement;return e}var Ae=class H7{static get scrim(){return H7._scrim||(H7._scrim=new H7),H7._scrim}static open(e){H7.scrim.open(e)}static close(){H7.scrim.close()}static get state(){return H7.scrim.state}static get element(){return H7.scrim.element}constructor(e){var r,a;this.lightDismiss=(r=e?.lightDismiss)!=null?r:!0,this.translucent=(a=e?.translucent)!=null?a:!1,this.state="closed"}get element(){if(this._element)return this._element;let e=document.createElement("div");return e.setAttribute("role","presentation"),e.style.position="fixed",e.style.contain="content",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.zIndex="var(--scrim-zindex, 10099)",e.style.outline="none",this.translucent?(e.style.background="rgba(255, 255, 255, .2)",e.style.backdropFilter="contrast(40%)"):e.style.background="transparent",this._element=e,e}open(e){var r;if(this.state!=="closed")return;this.state="opening",this.onDismiss=e?.onDismiss,this.savedActiveElement=ui();let{element:a}=this;((r=e?.root)!=null?r:document.body).appendChild(a),a.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let l=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let u=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${u+l}px`;let d=document.querySelector(".MLK__plate");if(d instanceof HTMLElement){this.savedMlkPaddingRight=d.style.paddingRight;let g=Number.parseFloat(getComputedStyle(d).paddingRight);d.style.paddingRight=`${g+l}px`}e!=null&&e.child&&a.append(e.child),this.state="open"}close(){var e,r,a,l,u;if(this.state!=="open"){this.element.parentElement;return}this.state="closing",typeof this.onDismiss=="function"&&this.onDismiss(),this.onDismiss=void 0;let{element:d}=this;d.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),d.remove(),document.body.style.overflow=(e=this.savedOverflow)!=null?e:"",document.body.style.marginRight=(r=this.savedMarginRight)!=null?r:"";let g=document.querySelector(".MLK__plate");g instanceof HTMLElement&&(g.style.paddingRight=(a=this.savedMlkPaddingRight)!=null?a:""),ui()!==this.savedActiveElement&&((u=(l=this.savedActiveElement)==null?void 0:l.focus)==null||u.call(l)),d.innerHTML="",this.state="closed"}handleEvent(e){this.lightDismiss&&(e.target===this._element&&e.type==="click"?(this.close(),e.preventDefault(),e.stopPropagation()):e.target===document&&(e.type==="touchmove"||e.type==="scroll")&&(this.close(),e.preventDefault(),e.stopPropagation()))}};function tp(t,e,r){let a=null,l=null,u=!1,d=!1,g=!1,E=new AbortController,P=E.signal;return t.addEventListener("keydown",Z=>{if(u||Z.key==="Process"||Z.code==="CapsLock"||/(Control|Meta|Alt|Shift)(Left|Right)/.test(Z.code)){a=null;return}a=Z,l=null,r.onKeystroke(Z)?t.textContent="":a=null},{capture:!0,signal:P}),t.addEventListener("keypress",Z=>{u||(a&&l&&r.onKeystroke(a),l=Z)},{capture:!0,signal:P}),t.addEventListener("compositionstart",Z=>{t.textContent="",u=!0,r.onCompositionStart(Z.data)},{capture:!0,signal:P}),t.addEventListener("compositionupdate",Z=>{u&&r.onCompositionUpdate(Z.data)},{capture:!0,signal:P}),t.addEventListener("compositionend",Z=>{t.textContent="",u&&(u=!1,r.onCompositionEnd(Z.data))},{capture:!0,signal:P}),t.addEventListener("beforeinput",Z=>Z.stopImmediatePropagation(),{signal:P}),t.addEventListener("input",Z=>{var me;if(!u&&(t.textContent="",Z.inputType!=="insertCompositionText")){if(Z.inputType==="insertFromPaste"){Z.preventDefault(),Z.stopPropagation();return}r.onInput((me=Z.data)!=null?me:""),Z.preventDefault(),Z.stopPropagation()}},{signal:P}),t.addEventListener("paste",Z=>{t.focus({preventScroll:!0}),t.textContent="",r.onPaste(Z)||Z.preventDefault(),Z.stopImmediatePropagation()},{signal:P}),t.addEventListener("cut",Z=>r.onCut(Z),{capture:!0,signal:P}),t.addEventListener("copy",Z=>r.onCopy(Z),{capture:!0,signal:P}),t.addEventListener("blur",Z=>{var me,_e;if(((_e=(me=Z.relatedTarget)==null?void 0:me._mathfield)==null?void 0:_e.element)===e){t.focus({preventScroll:!0}),Z.preventDefault(),Z.stopPropagation();return}let He=!1,Xe=Z.relatedTarget;for(;Xe;){if(Xe.classList.contains("ML__keyboard")){He=!0;break}Xe=Xe.parentElement}if(He){t.focus({preventScroll:!0}),Z.preventDefault(),Z.stopPropagation();return}let wt=Ae.state;if(wt==="open"||wt==="opening"){Z.preventDefault(),Z.stopPropagation();return}if(Z.relatedTarget===Z.target.getRootNode().host){Z.preventDefault(),Z.stopPropagation();return}g||d||(g=!0,a=null,l=null,r.onBlur(),g=!1)},{capture:!0,signal:P}),t.addEventListener("focus",Z=>{g||d||(d=!0,r.onFocus(),d=!1)},{capture:!0,signal:P}),{dispose:()=>E.abort(),cancelComposition:()=>{u&&(typeof t.blur=="function"&&t.blur(),requestAnimationFrame(()=>t.focus({preventScroll:!0})))},blur:()=>{typeof t.blur=="function"&&(g=!0,t.blur(),g=!1)},focus:()=>{!d&&typeof t.focus=="function"&&(d=!0,t.focus({preventScroll:!0}),d=!1)},hasFocus:()=>ui()===t,setAriaLabel:Z=>t.setAttribute("aria-label",Z),setValue:Z=>{var me;t.textContent!==Z&&(t.textContent=Z,t.style.left="-1000px",(me=window.getSelection())==null||me.selectAllChildren(t))},moveTo:(Z,me)=>{t.style.top=`${me}px`,t.style.left=`${Z}px`}}}function Or(t){var e;if(!t||!Kr(t))return"";let r;return t.key==="Unidentified"&&t.target&&(r=t.target.value),r=(e=r??t.key)!=null?e:t.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(r)&&(r=""),r}function Qa(t){t=Xm(t);let e=[];return t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),e.length===0?`[${t.code}]`:(e.push(`[${t.code}]`),e.join("+"))}function Jf(t){if(Me()){let e=kt(),r=t.startsWith("!"),a=t.endsWith(e);if(r&&!a||!r&&a)return!0}return t==="!other"?!1:t==="other"}function ip(t,e,r){if(t.length===0)return"";let a=ci(jl(Qa(r))),l=ci({key:r.key,shift:r.shiftKey,alt:r.altKey,ctrl:r.ctrlKey,meta:r.metaKey||r.ctrlKey&&/macos|ios/.test(kt()),cmd:!1,win:!1});for(let u=t.length-1;u>=0;u--)if((t[u].key===a||t[u].key===l)&&(!t[u].ifMode||t[u].ifMode===e))return t[u].command;return""}function rp(t){let e=t;return Y(e)&&(e=e.length>0?e[0]+"("+e.slice(1).join("")+")":""),e}function np(t,e){let r=[];if(typeof e=="string"){let u=mm[e];Y(u)?r=u.slice():u&&r.push(u)}let a=rp(e),l=new RegExp("^"+a.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let u of t)l.test(rp(u.command))&&r.push(u.key);return r.map(cn)}function Gf(t,e){if(t.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(t.ifPlatform))throw new Error(`Unexpected platform "${t.ifPlatform}" for keybinding ${t.key}`);if(t.ifLayout!==void 0&&(e.score===0||!t.ifLayout.includes(e.id)))return;let r=jl(t.key),a=t.ifPlatform;if(r.cmd){if(a&&a!=="macos"&&a!=="ios")throw new Error('Unexpected "cmd" modifier with platform "'+a+`"
"cmd" modifier can only be used with macOS or iOS platform.`);a||(a=kt()==="ios"?"ios":"macos"),r.win=!1,r.cmd=!1,r.meta=!0}if(r.win){if(a&&a!=="windows")throw new Error('Unexpected "win" modifier with platform "'+a+`"
"win" modifier can only be used with Windows platform.`);a="windows",r.win=!1,r.cmd=!1,r.meta=!0}if(a&&!Jf(a))return;if(/^\[.+\]$/.test(r.key))return f(p({},t),{key:ci(r)});let l=Gm(r.key,e);if(!l)return f(p({},t),{key:ci(r)});if(l.shift&&r.shift||l.alt&&r.alt)throw new Error(`The keybinding ${t.key} (${Gl(t.command)}) is conflicting with the key combination ${ci(l)} using the ${e.displayName} keyboard layout`);return l.shift=l.shift||r.shift,l.alt=l.alt||r.alt,l.meta=r.meta,l.ctrl=r.ctrl,f(p({},t),{key:ci(l)})}function Gl(t){if(Array.isArray(t)){let e=[...t];return e.shift()+"("+e.map(r=>typeof r=="string"?`"${r}"`:r.toString()).join(", ")+")"}return t}function op(t,e){let r=[],a=[];for(let l of t)try{let u=Gf(l,e);if(!u)continue;let d=a.find(g=>g.key===u.key&&g.ifMode===u.ifMode);if(d)throw new Error(`Ambiguous key binding ${l.key} (${Gl(l.command)}) matches ${d.key} (${Gl(d.command)}) with the ${e.displayName} keyboard layout`);a.push(u)}catch(u){u instanceof Error&&r.push(u.message)}return[a,r]}var Xl=class extends V{constructor(){super("latex")}createAtom(t){return new ue(t)}onPaste(t,e){if(!e)return!1;let r=typeof e=="string"?e:e.getData("application/x-latex")||e.getData("text/plain");return r&&t.model.contentWillChange({inputType:"insertFromPaste",data:r})?(t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,r)&&(t.startRecording(),t.snapshot("paste"),t.model.contentDidChange({inputType:"insertFromPaste"}),U(t)),t.startRecording(),!0):!1}insert(t,e,r){if(!t.contentWillChange({data:e,inputType:"insertText"}))return!1;r||(r={}),r.insertionMode||(r.insertionMode="replaceSelection"),r.selectionMode||(r.selectionMode="placeholder");let{silenceNotifications:a}=t;r.silenceNotifications&&(t.silenceNotifications=!0);let l=t.silenceNotifications;t.silenceNotifications=!0,r.insertionMode==="replaceSelection"&&!t.selectionIsCollapsed?t.deleteAtoms(le(t.selection)):r.insertionMode==="replaceAll"?(t.root.setChildren([],"body"),t.position=0):r.insertionMode==="insertBefore"?t.collapseSelection("backward"):r.insertionMode==="insertAfter"&&t.collapseSelection("forward");let u=[];for(let E of e)iu.test(E)&&u.push(new ue(E));let d=t.at(t.position);if(d instanceof Rt&&(d=d.lastChild),!(d.parent instanceof Rt)){let E=new Rt;d.parent.addChildAfter(E,d),d=E.firstChild}let g=d.parent.addChildrenAfter(u,d);return t.silenceNotifications=l,r.selectionMode==="before"||(r.selectionMode==="item"?t.setSelection(t.anchor,t.offsetOf(g)):g&&(t.position=t.offsetOf(g))),t.contentDidChange({data:e,inputType:"insertText"}),t.silenceNotifications=a,!0}};function io(t){return t.atoms.find(e=>e.type==="latexgroup")}function no(t){var e,r;let a=io(t);return(r=(e=a?.body)==null?void 0:e.filter(l=>l.type==="latex"))!=null?r:[]}function es(t,e){var r;let a=0,l=!1,u=Number.isFinite(e?.before)?(r=e?.before)!=null?r:0:t.lastOffset;for(;a<=u&&!l;){let E=t.at(a);l=E instanceof ue&&E.isSuggestion,l||a++}if(!l)return[void 0,void 0];let d=a,g=!1;for(;d<=u&&!g;){let E=t.at(d);g=!(E instanceof ue&&E.isSuggestion),g||d++}return[a-1,d-1]}new Xl;function Xf(t,e){t.flushInlineShortcutBuffer(),t.stopCoalescingUndo();let r=ts(t,e),{model:a}=t;return a.selectionIsCollapsed?(t.defaultStyle.fontSeries&&r.fontSeries===t.defaultStyle.fontSeries&&(r.fontSeries="auto"),r.fontShape&&r.fontShape===t.defaultStyle.fontShape&&(r.fontShape="auto"),r.color&&r.color===t.defaultStyle.color&&(r.color="none"),r.backgroundColor&&r.backgroundColor===t.defaultStyle.backgroundColor&&(r.backgroundColor="none"),r.fontSize&&r.fontSize===t.defaultStyle.fontSize&&(r.fontSize="auto"),t.defaultStyle=p(p({},t.defaultStyle),r)):t.model.deferNotifications({content:!0,type:"insertText"},()=>{a.selection.ranges.forEach(l=>eo(a,l,r,{operation:"toggle"})),t.snapshot("style-change")}),!0}pe({applyStyle:Xf},{target:"mathfield",canUndo:!0,changeContent:!0});function ts(t,e){var r,a,l,u,d,g,E,P,Z,me;let _e={};if(typeof e.color=="string"){let Xe=(a=t.colorMap((r=e.color)!=null?r:e.verbatimColor))!=null?a:"none";Xe!==e.color&&(_e.verbatimColor=(l=e.verbatimColor)!=null?l:e.color),_e.color=Xe}if(typeof e.backgroundColor=="string"){let Xe=(d=t.backgroundColorMap((u=e.backgroundColor)!=null?u:e.verbatimBackgroundColor))!=null?d:"none";Xe!==e.backgroundColor&&(_e.verbatimBackgroundColor=(g=e.verbatimBackgroundColor)!=null?g:e.backgroundColor),_e.backgroundColor=Xe}typeof e.fontFamily=="string"&&(_e.fontFamily=e.fontFamily),typeof e.series=="string"&&(_e.fontSeries=e.series),typeof e.fontSeries=="string"&&(_e.fontSeries=e.fontSeries.toLowerCase()),_e.fontSeries&&(_e.fontSeries=(E={bold:"b",medium:"m",normal:"m"}[_e.fontSeries])!=null?E:_e.fontSeries),typeof e.shape=="string"&&(_e.fontShape=e.shape),typeof e.fontShape=="string"&&(_e.fontShape=e.fontShape.toLowerCase()),_e.fontShape&&(_e.fontShape=(P={italic:"it",up:"n",upright:"n",normal:"n"}[_e.fontShape])!=null?P:_e.fontShape),e.variant&&(_e.variant=e.variant.toLowerCase()),e.variantStyle&&(_e.variantStyle=e.variantStyle.toLowerCase());let He=(Z=e.size)!=null?Z:e.fontSize;return typeof He=="number"?_e.fontSize=Math.max(1,Math.min(10,He)):typeof He=="string"&&(_e.fontSize=(me={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[He.toLowerCase()])!=null?me:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[He]),_e}function oo(t,e,r){var a,l;let u=t.model;if(u.mode==="latex")return{};let d=t.styleBias;if(d==="none")return t.defaultStyle;if(u.mode==="text")return(l=(a=u.at(d==="right"?r.after:r.before))==null?void 0:a.style)!=null?l:t.defaultStyle;if(u.mode==="math"){let g=u.at(d==="right"?r.after:r.before);return g?f(p({},g.style),{variant:"normal"}):t.defaultStyle}return{}}function rr(t){let e=t.options.onInsertStyle;if(e===null)return{};e===void 0&&(e=oo);let r=t.model,a=t.styleBias,l=r.at(r.position),u=ap(r,l,a),d=ap(r,l.rightSibling,a);return e(t,r.position,{before:u,after:d})}function ap(t,e,r){var a;return!e||e.type==="first"&&r!=="right"?-1:e.type!=="group"?t.offsetOf(e):!e.body||e.body.length<2?-1:((a=e.body)==null?void 0:a.length)===1||r!=="right"?t.offsetOf(e.body[0]):t.offsetOf(e.body[e.body.length-1])}function di(t){let e=no(t.model).filter(r=>r.isSuggestion);if(e.length!==0){t.model.position=t.model.offsetOf(e[0].leftSibling);for(let r of e)r.parent.removeChild(r)}}function Rr(t,e){var r;let{model:a}=t;di(t);for(let Z of no(a))Z.isError=!1;if(!a.selectionIsCollapsed||t.options.popoverPolicy==="off"){Br(t);return}let l=[],u=a.at(a.position);for(;u&&u instanceof ue&&/^[a-zA-Z\*]$/.test(u.value);)u=u.leftSibling;if(u&&u instanceof ue&&u.value==="\\")for(l.push(u),u=u.rightSibling;u&&u instanceof ue&&/^[a-zA-Z\*]$/.test(u.value);)l.push(u),u=u.rightSibling;let d=l.map(Z=>Z.value).join(""),g=ou(t,d);if(g.length===0){if(/^\\[a-zA-Z\*]+$/.test(d))for(let Z of l)Z.isError=!0;Br(t);return}let E=(r=e?.atIndex)!=null?r:0;t.suggestionIndex=E<0?g.length-1:E%g.length;let P=g[t.suggestionIndex];if(P!==d){let Z=l[l.length-1];Z.parent.addChildrenAfter([...P.slice(d.length-P.length)].map(me=>new ue(me,{isSuggestion:!0})),Z),bt(t,{interactive:!0})}sp(t,g)}function Zl(t){let[e,r]=es(t,{before:t.position});if(e===void 0||r===void 0)return!1;let a=!1;return t.getAtoms([e,r]).forEach(l=>{l.isSuggestion&&(l.isSuggestion=!1,a=!0)}),a}function $t(t,e="accept",r){var a,l;Br(t);let u=io(t.model);if(!u)return!1;if(e==="accept-suggestion"||e==="accept-all"){let P=no(t.model).filter(Z=>Z.isSuggestion);if(P.length!==0){for(let Z of P)Z.isSuggestion=!1;t.model.position=t.model.offsetOf(P[P.length-1])}if(e==="accept-suggestion")return P.length!==0}let d=no(t.model).filter(P=>!P.isSuggestion).map(P=>P.value).join(""),g=u.leftSibling;if(u.parent.removeChild(u),t.model.position=t.model.offsetOf(g),t.switchMode((a=r?.mode)!=null?a:"math"),e==="reject")return!0;let E=p({},rr(t));return!/^[a-zA-Z0-9]$/.test(d)&&t.styleBias!=="none"&&(E.variant="normal",E.variantStyle=void 0),V.insert(t.model,d,{selectionMode:(l=r?.selectItem)!=null&&l?"item":"placeholder",format:"latex",mode:"math",style:E}),t.snapshot(),t.model.announce("replacement"),t.switchMode("math"),!0}function mi(t){var e;let r=document.getElementById(t);return r?r.dataset.refcount=Number(Number.parseInt((e=r.dataset.refcount)!=null?e:"0")+1).toString():(r=document.createElement("div"),r.setAttribute("aria-hidden","true"),r.dataset.refcount="1",r.id=t,document.body.append(r)),r}function Pr(t){var e;let r=document.getElementById(t);if(!r)return;let a=Number.parseInt((e=r.getAttribute("data-refcount"))!=null?e:"0");a<=1?r.remove():r.dataset.refcount=Number(a-1).toString()}function Zf(t,e){let r=new O({from:t.context}),a=new b({mode:"math",type:"root",body:he(e,{context:r})}),l=_r(It(new _(a.render(r),{classes:"ML__base"}),r));return Mr(l,{classes:"ML__latex"}).toMarkup()}function sp(t,e){var r;if(e.length===0){Br(t);return}let a="";for(let[u,d]of e.entries()){let g=d,E=Zf(t,d),P=np(t.keybindings,g).join("<br>");a+=`<li role="button" data-command="${g}" ${u===t.suggestionIndex?"class=ML__popover__current":""}><span class="ML__popover__latex">${g}</span><span class="ML__popover__command">${E}</span>`,P&&(a+=`<span class="ML__popover__keybinding">${P}</span>`),a+="</li>"}let l=Yf(t,`<ul>${a}</ul>`);Yl()&&((r=l.querySelector(".ML__popover__current"))==null||r.scrollIntoView({block:"nearest",inline:"nearest"})),setTimeout(()=>{var u;l&&!Yl()&&(l.classList.add("is-visible"),dn(t),(u=l.querySelector(".ML__popover__current"))==null||u.scrollIntoView({block:"nearest",inline:"nearest"}))},32)}function Yl(){let t=document.getElementById("mathlive-suggestion-popover");return t?t.classList.contains("is-visible"):!1}function dn(t,e){var r,a,l;if(!t.element||t.element.mathfield!==t||!Yl())return;if(((r=t.model.at(t.model.position))==null?void 0:r.type)!=="latex"){Br(t);return}if(e!=null&&e.deferred){setTimeout(()=>dn(t),32);return}let u=Ji(t.field);if(!u)return;let d=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,g=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,E=window.innerWidth-document.documentElement.clientWidth,P=window.innerHeight-document.documentElement.clientHeight,Z=(l=(a=window.mathVirtualKeyboard)==null?void 0:a.boundingRect.height)!=null?l:0,me=document.getElementById("mathlive-suggestion-popover");u.x+me.offsetWidth/2>g-E?me.style.left=`${g-me.offsetWidth-E}px`:u.x-me.offsetWidth/2<0?me.style.left="0":me.style.left=`${u.x-me.offsetWidth/2}px`;let _e=u.y-u.height;d-P-Z-u.y<_e?(me.classList.add("ML__popover--reverse-direction"),me.classList.remove("top-tip"),me.classList.add("bottom-tip"),me.style.top=`${u.y-u.height-me.offsetHeight-15}px`):(me.classList.remove("ML__popover--reverse-direction"),me.classList.add("top-tip"),me.classList.remove("bottom-tip"),me.style.top=`${u.y+15}px`)}function Br(t){t.suggestionIndex=0,document.getElementById("mathlive-suggestion-popover")&&Pr("mathlive-suggestion-popover")}function Yf(t,e){let r=document.getElementById("mathlive-suggestion-popover");return r?Pr("mathlive-suggestion-popover"):(Ve("suggestion-popover"),Ve("core")),r=mi("mathlive-suggestion-popover"),r.addEventListener("pointerdown",a=>a.preventDefault()),r.addEventListener("click",a=>{let l=a.target;for(;l&&!l.dataset.command;)l=l.parentElement;l&&($t(t,"reject"),V.insert(t.model,l.dataset.command,{selectionMode:"placeholder",format:"latex",mode:"math"}),t.dirty=!0,t.focus())}),r.innerHTML=globalThis.MathfieldElement.createHTML(e),r}function lp(){document.getElementById("mathlive-suggestion-popover")&&(Pr("mathlive-suggestion-popover"),it("suggestion-popover"),it("core"))}function Qf(){let t=String(new Error().stack).replace(/^Error.*\n/,"").split(`
`);if(t.length===0)return console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${new Error().stack}").`),"";let e=t[1],r=e.match(/http.*\.ts[\?:]/);return r&&(e=t[2]),r=e.match(/(https?:.*):[0-9]+:[0-9]+/),r||(r=e.match(/at (.*(\.ts))[\?:]/),r||(r=e.match(/at (.*(\.mjs|\.js))[\?:]/))),r?r[1]:(console.error(t),console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${e}").`),"")}var ir=null,cp,up,Ql=((up=(cp=globalThis?.document)==null?void 0:cp.currentScript)==null?void 0:up.src)||Qf();async function rs(t){if(/^(?:[a-z+]+:)?\/\//i.test(t)){try{return new URL(t).href}catch{}if(t.startsWith("//"))try{return new URL(`${window.location.protocol}${t}`).href}catch{}return t}if(ir===null)try{let e=await fetch(Ql,{method:"HEAD"});e.status===200&&(ir=e.url,ir=ir.replace(/\/\+esm$/,"/"),ir.includes("jsdelivr.net/")&&(ir+="/"))}catch{console.error(`Invalid URL "${t}" (relative to "${Ql}")`)}return new URL(t,ir??Ql).href}function eg(t,e,r={}){return new FontFace(t,`url(${e}.woff2) format('woff2')`,r)}var Be="not-loaded";async function dp(){return Be="not-loaded",pi()}async function pi(){var t;if(Be==="not-loaded"){if(Be="loading",(t=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))!=null?t:!1){Be="ready";return}if(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document){let e=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"],r=Array.from(document.fonts).map(u=>u.family);if(e.every(u=>r.includes(u))){Be="ready";return}if(!globalThis.MathfieldElement.fontsDirectory){Be="not-loaded";return}let a=await rs(globalThis.MathfieldElement.fontsDirectory);if(!a){document.body.classList.add("ML__fonts-did-not-load"),Be="error";return}a.endsWith("/")&&(a=a.slice(0,-1));let l=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular"],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(u=>eg(u[0].replace(/-[a-zA-Z]+$/,""),`${a}/${u[0]}`,u[1]));try{(await Promise.all(l.map(u=>{try{return u.load()}catch{}}))).forEach(u=>document.fonts.add(u)),Be="ready";return}catch(u){console.error(`MathLive 0.106.0: The math fonts could not be loaded from "${a}"`,{cause:u}),document.body.classList.add("ML__fonts-did-not-load")}Be="error"}}}function mp(t,e=0){let r=3735928559^e,a=1103547991^e;for(let l=0;l<t.length;l++){let u=t.charCodeAt(l);r=Math.imul(r^u,2654435761),a=Math.imul(a^u,1597334677)}return r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(a^a>>>13,3266489909),a=Math.imul(a^a>>>16,2246822507),a^=Math.imul(r^r>>>13,3266489909),4294967296*(2097151&a)+(r>>>0)}function U(t,e){!t||t.dirty||!t.field||(t.resizeObserver.unobserve(t.field),t.dirty=!0,requestAnimationFrame(()=>{rt(t)&&t.dirty&&(t.atomBoundsCache=new Map,bt(t,e),t.atomBoundsCache=void 0,t.resizeObserver.observe(t.field),t.resizeObserverStarted=!0)}))}function tg(t,e){var r;e=e??{};let a=new O({from:f(p({},t.context),{atomIdsSettings:{seed:e.forHighlighting?mp(b.serialize([t.model.root],{expandMacro:!1,defaultMode:t.options.defaultMode})):"random",groupNumbers:(r=e.forHighlighting)!=null?r:!1},letterShapeStyle:t.options.letterShapeStyle}),mathstyle:t.options.defaultMode==="inline-math"?"textstyle":"displaystyle"}),l=t.model.root.render(a);return Mr(It(l,a),{classes:t.hasEditablePrompts?"ML__latex ML__prompting":"ML__latex",attributes:{translate:"no","aria-hidden":"true"}})}function ec(t,e){try{let{model:r}=t;r.root.caret=void 0,r.root.isSelected=!1,r.root.containsCaret=!0;for(let a of r.atoms)a.caret=void 0,a.isSelected=!1,a.containsCaret=!1;if(r.selectionIsCollapsed){let a=r.at(r.position);a.caret=t.model.mode;let l=a.parent;for(;l;)l.containsCaret=!0,l=l.parent}else{let a=r.getAtoms(r.selection,{includeChildren:!0});for(let l of a)l.isSelected=!0}return tg(t,e).toMarkup()}catch(r){return console.error(r),'<span class="ML__latex" translate="no" aria-hidden="true"></span>'}}function bt(t,e){if(!rt(t))return;e!=null||(e={});let r=t.element.querySelector("[part=virtual-keyboard-toggle]");r&&(r.style.display=t.hasEditableContent?"":"none");let a=t.field;if(!a)return;let l=t.isSelectionEditable&&t.hasFocus(),u=a.classList.contains("ML__focused");u&&!l?a.classList.remove("ML__focused"):!u&&l&&a.classList.add("ML__focused");let d=ec(t,e),g=t.element.querySelector("[part=menu-toggle]");if(g){let E=!1;(t.disabled||t.readOnly&&!t.hasEditableContent||t.userSelect==="none")&&(E=!0),!E&&a.offsetWidth<50&&(E=!0),g.style.display=E?"none":""}if(t.model.atoms.length<=1){let E=t.options.contentPlaceholder;E&&(d+=`<span part=placeholder class="ML__content-placeholder">${de(E)}</span>`)}a.innerHTML=globalThis.MathfieldElement.createHTML(d),ao(t,e.interactive),t.dirty=!1}function ao(t,e){let r=t.field;if(!r)return;for(let d of r.querySelectorAll(".ML__selection, .ML__contains-highlight"))d.remove();if(!(e!=null&&e)&&Be!=="error"&&Be!=="ready"){setTimeout(()=>{Be==="ready"?ao(t):setTimeout(()=>ao(t),128)},32);return}let a=t.model,l,u=()=>{if(l!==void 0)return l;let d=r.offsetWidth,g=r.getBoundingClientRect().width;return l=Math.floor(g)/d,isNaN(l)&&(l=1),l};if(a.selectionIsCollapsed){dn(t,{deferred:!0});let d=a.at(a.position);for(;d&&d.type!=="prompt"&&!(d.containsCaret&&d.displayContainsHighlight);)d=d.parent;if(d!=null&&d.containsCaret&&d.displayContainsHighlight){let g=u(),E=zl(t,Ar(t,d),g);if(E){E.left/=g,E.right/=g,E.top/=g,E.bottom/=g;let P=document.createElement("div");P.classList.add("ML__contains-highlight"),P.style.position="absolute",P.style.left=`${E.left+1}px`,P.style.top=`${Math.ceil(E.top)}px`,P.style.width=`${Math.ceil(E.right-E.left)}px`,P.style.height=`${Math.ceil(E.bottom-E.top)}px`,r.insertBefore(P,r.childNodes[0])}}return}for(let d of rg(Na(t,{excludeAtomsWithBackground:!0}))){let g=u();d.left/=g,d.right/=g,d.top/=g,d.bottom/=g;let E=document.createElement("div");E.classList.add("ML__selection"),E.style.position="absolute",E.style.left=`${d.left}px`,E.style.top=`${d.top}px`,E.style.width=`${Math.ceil(d.right-d.left)}px`,E.style.height=`${Math.ceil(d.bottom-d.top-1)}px`,r.insertBefore(E,r.childNodes[0])}}function rg(t){let e=[];for(let r of t){let a=!1;for(let l of e)if(r.left===l.left&&r.right===l.right&&r.top===l.top&&r.bottom===l.bottom){a=!0;break}a||e.push(r)}t=e,e=[];for(let r of t){let a=0;for(let l of t)if(r.left>=l.left&&r.right<=l.right&&r.top>=l.top&&r.bottom<=l.bottom&&(a+=1,a>1))break;a===1&&e.push(r)}return e}function tc(t){if(!t)return;let e=t.model,r=e.selection,a=b.serialize([e.root],{expandMacro:!1,defaultMode:t.options.defaultMode});V.insert(e,a,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",silenceNotifications:!0,mode:"math"});let l=e.silenceNotifications;e.silenceNotifications=!0,e.selection=r,e.silenceNotifications=l,U(t)}function rc(){for(let t of document.querySelectorAll(".ML__mathfield"))"_mathfield"in t&&tc(t._mathfield)}var ic=3,yt;function pe(t,e){e=p({target:"mathfield",canUndo:!1,audioFeedback:void 0,changeContent:!1,changeSelection:!1},e??{}),yt||(yt={});for(let r of Object.keys(t))yt[r],yt[r]=f(p({},e),{fn:t[r]})}function nc(t){let e;if(Array.isArray(t)){if(t[0]==="performWithFeedback")return nc(t[1]);e=t[0]}else e=t;return yt[e]}function nr(t){var e;return(e=nc(t))==null?void 0:e.target}function pp(t,e){var r,a;if(e=hi(e),!e)return!1;let l,u=[],d=!1,g=!1;Y(e)?(l=e[0],u=e.slice(1)):l=e;let E=yt[l],P=E?.target;if(P==="model"){if(!t.isSelectionEditable&&E!=null&&E.changeContent)return t.model.announce("plonk"),!1;/^(delete|add)/.test(l)&&(l!=="deleteBackward"&&t.flushInlineShortcutBuffer(),t.snapshot(l)),/^complete/.test(l)||di(t),yt[l].fn(t.model,...u),Rr(t),g=!0,d=!0}else if(P==="virtual-keyboard")g=(a=(r=window.mathVirtualKeyboard)==null?void 0:r.executeCommand(e))!=null?a:!1,d=!0;else if(yt[l]){if(!t.isSelectionEditable&&E!=null&&E.changeContent)return t.model.announce("plonk"),!1;/^(undo|redo)/.test(l)&&t.flushInlineShortcutBuffer(),g=yt[l].fn(t,...u),d=!0}else throw new Error(`Unknown command "${l}"`);return P!=="virtual-keyboard"&&(!t.model.selectionIsCollapsed||E!=null&&E.changeSelection&&l!=="deleteBackward")&&(t.flushInlineShortcutBuffer(),E!=null&&E.changeContent||t.stopCoalescingUndo(),t.defaultStyle={}),g&&U(t),d}function ig(t,e){var r;if(!t)return!1;t.focus(),mn.keypressVibration&&Ro()&&navigator.vibrate(ic);let a=nc(e);globalThis.MathfieldElement.playSound((r=a?.audioFeedback)!=null?r:"keypress");let l=t.executeCommand(e);return t.scrollIntoView(),l}pe({performWithFeedback:(t,e)=>ig(t,e)});function ng(t){return Rr(t,{atIndex:t.suggestionIndex+1}),!1}function og(t){return Rr(t,{atIndex:t.suggestionIndex-1}),!1}pe({complete:$t},{target:"mathfield",audioFeedback:"return",canUndo:!0,changeContent:!0,changeSelection:!0});pe({dispatchEvent:(t,e,r)=>{var a,l;return(l=(a=t.host)==null?void 0:a.dispatchEvent(new CustomEvent(e,{detail:r})))!=null?l:!1}},{target:"mathfield"});pe({nextSuggestion:ng,previousSuggestion:og},{target:"mathfield",audioFeedback:"keypress",changeSelection:!0});function hi(t){if(!t)return;if(Y(t)&&t.length>0){let r=t[0];return r=r.replace(/-\w/g,a=>a[1].toUpperCase()),r==="performWithFeedback"&&t.length===2?[r,hi(t[1])]:[r,...t.slice(1)]}if(typeof t!="string")return;let e=t.trim().match(/^([a-zA-Z0-9-]+)\((.*)\)$/);if(e){let r=e[1].replace(/-\w/g,l=>l[1].toUpperCase()),a=e[2].split(",").map(l=>l.trim());return[r,...a.map(l=>{if(/"[^"]*"/.test(l)||/'[^']*'/.test(l))return l.slice(1,-1);if(/^true$/.test(l))return!0;if(/^false$/.test(l))return!1;if(/^[-]?\d+$/.test(l))return parseInt(l,10);if(/^\{.*\}$/.test(l))try{return JSON.parse(l)}catch{return console.error("Invalid argument:",l),l}return hi(l)})]}return t.replace(/-\w/g,r=>r[1].toUpperCase())}var lo="mathlive#virtual-keyboard-message";function co(t){var e;return t.type!=="message"?!1:((e=t.data)==null?void 0:e.type)===lo}var so=class OE{constructor(){this.targetOrigin=window.origin,this.originValidator="none",this._boundingRect=new DOMRect(0,0,0,0),this._isShifted=!1,window.addEventListener("message",this),this.sendMessage("proxy-created"),this.listeners={}}static get singleton(){return this._singleton||(this._singleton=new OE),this._singleton}getKeycap(e){}setKeycap(e,r){this.sendMessage("update-setting",{setKeycap:{keycap:e,value:r}})}set alphabeticLayout(e){this.sendMessage("update-setting",{alphabeticLayout:e})}set layouts(e){this.sendMessage("update-setting",{layouts:e})}get normalizedLayouts(){return[]}set editToolbar(e){this.sendMessage("update-setting",{editToolbar:e})}set container(e){throw new Error("Container inside an iframe cannot be changed")}show(e){this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:!0},bubbles:!0,cancelable:!0,composed:!0}))&&(this.sendMessage("show",e),this.dispatchEvent(new Event("virtual-keyboard-toggle")))}hide(e){this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:!1},bubbles:!0,cancelable:!0,composed:!0}))&&(this.sendMessage("hide",e),this.dispatchEvent(new Event("virtual-keyboard-toggle")))}get isShifted(){return this._isShifted}get visible(){return this._boundingRect.height>0}set visible(e){e?this.show():this.hide()}get boundingRect(){return this._boundingRect}executeCommand(e){return this.sendMessage("execute-command",{command:e}),!0}updateToolbar(e){this.sendMessage("update-toolbar",e)}update(e){this.sendMessage("update-setting",e)}connect(){this.sendMessage("connect")}disconnect(){this.sendMessage("disconnect")}addEventListener(e,r,a){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(r)||this.listeners[e].add(r)}dispatchEvent(e){return!this.listeners[e.type]||this.listeners[e.type].size===0?!0:(this.listeners[e.type].forEach(r=>{typeof r=="function"?r(e):r?.handleEvent(e)}),!e.defaultPrevented)}removeEventListener(e,r,a){this.listeners[e]&&this.listeners[e].delete(r)}handleEvent(e){if(co(e)){if(!Gi(e.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${e.origin}) cannot be handled`,"SecurityError");this.handleMessage(e.data)}}handleMessage(e){let{action:r}=e;if(r==="execute-command"){let{command:a}=e;nr(a)==="virtual-keyboard"&&this.executeCommand(a);return}if(r==="synchronize-proxy"){this._boundingRect=e.boundingRect,this._isShifted=e.isShifted;return}if(r==="geometry-changed"){this._boundingRect=e.boundingRect,this.dispatchEvent(new Event("geometrychange"));return}}sendMessage(e,r={}){if(!window.top)throw new DOMException("A frame does not have access to the top window and cant communicate with the keyboard. Review virtualKeyboardTargetOrigin and originValidator on mathfields embedded in an iframe","SecurityError");window.top.postMessage(p({type:lo,action:e},r),this.targetOrigin)}},oc={numeric:{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",rows:[[{latex:"x",shift:"y",variants:["y","z","t","r","x^2","x^n","x^{#?}","x_n","x_i","x_{#?}",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"}]},{latex:"n",shift:"a",variants:["i","j","p","k","a","u"]},"[separator-5]","[7]","[8]","[9]","[/]","[separator-5]",{latex:"\\exponentialE",shift:"\\ln",variants:["\\exp","\\times 10^{#?}","\\ln","\\log_{10}","\\log","\\lg","\\operatorname{lb}"]},{latex:"\\imaginaryI",variants:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"]},{latex:"\\pi",shift:"\\sin",variants:["\\prod",{latex:"\\theta",aside:"theta"},{latex:"\\rho",aside:"rho"},{latex:"\\tau",aside:"tau"},"\\sin","\\cos","\\tan"]}],[{label:"<",latex:"<",class:"hide-shift",shift:{latex:"\\le",label:""}},{label:">",latex:">",class:"hide-shift",shift:{latex:"\\ge",label:""}},"[separator-5]","[4]","[5]","[6]","[*]","[separator-5]",{class:"hide-shift",latex:"#@^2}",shift:"#@^{\\prime}}"},{latex:"#@^{#0}}",class:"hide-shift",shift:"#@_{#?}"},{class:"hide-shift",latex:"\\sqrt{#0}",shift:{latex:"\\sqrt[#0]{#?}}"}}],["[(]","[)]","[separator-5]","[1]","[2]","[3]","[-]","[separator-5]",{latex:"\\int^{\\infty}_{0}\\!#?\\,\\mathrm{d}x",class:"small hide-shift",shift:"\\int",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{class:"hide-shift",latex:"\\forall",shift:"\\exists"},{label:"[backspace]",width:1}],[{label:"[shift]",width:2},"[separator-5]","[0]","[.]","[=]","[+]","[separator-5]","[left]","[right]",{label:"[action]",width:1}]]},greek:{label:"&alpha;&beta;&gamma;",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.greek",rows:[[{label:"<i>&#x03c6;</i>",class:"MLK__tex hide-shift",insert:"\\varphi",aside:"phi var.",shift:"\\Phi"},{label:"<i>&#x03c2;</i>",class:"MLK__tex hide-shift",insert:"\\varsigma",aside:"sigma var.",shift:"\\Sigma"},{label:"<i>&#x03f5;</i>",class:"MLK__tex hide-shift",insert:"\\epsilon",aside:"epsilon",shift:'\\char"0190'},{label:"<i>&rho;</i>",class:"MLK__tex hide-shift",insert:"\\rho",aside:"rho",shift:'\\char"3A1'},{label:"<i>&tau;</i>",class:"MLK__tex hide-shift",insert:"\\tau",aside:"tau",shift:'\\char"3A4'},{label:"<i>&upsilon;</i>",class:"MLK__tex hide-shift",insert:"\\upsilon",aside:"upsilon",shift:"\\Upsilon"},{label:"<i>&theta;</i>",class:"MLK__tex hide-shift",insert:"\\theta",aside:"theta",shift:"\\Theta"},{label:"<i>&iota;</i>",class:"MLK__tex hide-shift",insert:"\\iota",aside:"iota",shift:'\\char"399'},{label:"<i>&omicron;</i>",class:"MLK__tex hide-shift",insert:"\\omicron",aside:"omicron",shift:'\\char"39F'},{label:"<i>&pi;</i>",class:"MLK__tex hide-shift",insert:"\\pi",aside:"pi",shift:"\\Pi"}],["[separator-5]",{label:"<i>&alpha;</i>",class:"MLK__tex hide-shift",insert:"\\alpha",aside:"alpha",shift:'\\char"391'},{label:"<i>&sigma;</i>",class:"MLK__tex hide-shift",insert:"\\sigma",aside:"sigma",shift:"\\Sigma"},{label:"<i>&delta;</i>",class:"MLK__tex hide-shift",insert:"\\delta",aside:"delta",shift:"\\Delta"},{latex:"\\phi",class:"MLK__tex hide-shift",insert:"\\phi",aside:"phi",shift:"\\Phi"},{label:"<i>&gamma;</i>",class:"MLK__tex hide-shift",insert:"\\gamma",aside:"gamma",shift:"\\Gamma"},{label:"<i>&eta;</i>",class:"MLK__tex hide-shift",insert:"\\eta",aside:"eta",shift:'\\char"397'},{label:"<i>&xi;</i>",class:"MLK__tex hide-shift",insert:"\\xi",aside:"xi",shift:"\\Xi"},{label:"<i>&kappa;</i>",class:"MLK__tex hide-shift",insert:"\\kappa",aside:"kappa",shift:"\\Kappa"},{label:"<i>&lambda;</i>",class:"MLK__tex hide-shift",insert:"\\lambda",aside:"lambda",shift:"\\Lambda"},"[separator-5]"],["[shift]",{label:"<i>&zeta;</i>",class:"MLK__tex hide-shift",insert:"\\zeta",aside:"zeta",shift:'\\char"396'},{label:"<i>&chi;</i>",class:"MLK__tex hide-shift",insert:"\\chi",aside:"chi",shift:'\\char"3A7'},{label:"<i>&psi;</i>",class:"MLK__tex hide-shift",insert:"\\psi",aside:"psi",shift:"\\Psi"},{label:"<i>&omega;</i>",class:"MLK__tex hide-shift",insert:"\\omega",aside:"omega",shift:"\\Omega"},{label:"<i>&beta;</i>",class:"MLK__tex hide-shift",insert:"\\beta",aside:"beta",shift:'\\char"392'},{label:"<i>&nu;</i>",class:"MLK__tex hide-shift",insert:"\\nu",aside:"nu",shift:'\\char"39D'},{label:"<i>&mu;</i>",class:"MLK__tex hide-shift",insert:"\\mu",aside:"mu",shift:'\\char"39C'},"[backspace]"],["[separator]",{label:"<i>&#x03b5;</i>",class:"MLK__tex",insert:"\\varepsilon",aside:"epsilon var."},{label:"<i>&#x03d1;</i>",class:"MLK__tex",insert:"\\vartheta",aside:"theta var."},{label:"<i>&#x3f0;</i>",class:"MLK__tex",insert:"\\varkappa",aside:"kappa var."},{label:"<i>&#x03d6;</i>",class:"MLK__tex",insert:"\\varpi",aside:"pi var."},{label:"<i>&#x03f1;</i>",class:"MLK__tex",insert:"\\varrho",aside:"rho var."},"[left]","[right]","[action]"]]},symbols:{label:"&infin;",labelClass:"MLK__tex",tooltip:"keyboard.tooltip.symbols",rows:[[{latex:"\\sin",shift:"\\sin^{-1}",variants:[{class:"small",latex:"\\sinh"},{class:"small",latex:"\\sin^{-1}"},{class:"small",latex:"\\operatorname{arsinh}"}]},"\\ln",{latex:"\\mathrm{abs}",insert:"\\mathrm{abs}\\left(#0\\right)"},{latex:"\\rightarrow",shift:"\\Rightarrow",variants:[{latex:"\\implies",aside:"implies"},{latex:"\\to",aside:"to"},"\\dashv",{latex:"\\roundimplies",aside:"round implies"}]},{latex:"\\exists",variants:["\\nexists"],shift:"\\nexists"},{latex:"\\in",shift:"\\notin",variants:["\\notin","\\owns"]},"\\cup",{latex:"\\overrightarrow{#@}",shift:"\\overleftarrow{#@}",variants:["\\overleftarrow{#@}","\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"]},{class:"small hide-shift",latex:"\\lim_{#?}",shift:"\\lim_{x\\to\\infty}",variants:[{class:"small",latex:"\\liminf_{#?}"},{class:"small",latex:"\\limsup_{#?}"}]},"\\exponentialE"],[{latex:"\\cos",shift:"\\cos^{-1}",variants:[{class:"small",latex:"\\cosh"},{class:"small",latex:"\\cos^{-1}"},{class:"small",latex:"\\operatorname{arcosh}"}]},{latex:"\\log",shift:"\\log_{10}",variants:["\\log_{#0}","\\log_{10}"]},"\\left\\vert#0\\right\\vert",{latex:"\\larr",shift:"\\lArr",variants:[{latex:"\\impliedby",aside:"implied by"},{latex:"\\gets",aside:"gets"},"\\lArr","\\vdash",{latex:"\\models",aside:"models"}]},{latex:"\\forall",shift:"\\lnot",variants:[{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"}]},{latex:"\\ni",shift:"\\not\\owns"},"\\cap",{latex:"\\overline{#@}",shift:"\\underline{#@}",variants:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}","\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"]},{class:"hide-shift small",latex:"\\int",shift:"\\iint",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\intop","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"]},{latex:"\\pi",shift:"\\tau",variants:["\\tau"]}],[{latex:"\\tan",shift:"\\tan^{-1}",variants:[{class:"small",latex:"\\tanh"},{class:"small",latex:"\\tan^{-1}"},{class:"small",latex:"\\operatorname{artanh}"},{class:"small",latex:"\\arctan"},{class:"small",latex:"\\operatorname{arctg}"},{class:"small",latex:"\\operatorname{tg}"}]},{latex:"\\exp",insert:"\\exp\\left(#0\\right)",variants:["\\exponentialE^{#0}"]},"\\left\\Vert#0\\right\\Vert",{latex:"\\lrArr",shift:"\\leftrightarrow",variants:[{latex:"\\iff",aside:"if and only if"},"\\leftrightarrow","\\leftrightarrows","\\Leftrightarrow",{latex:"^\\biconditional",aside:"biconditional"}]},{latex:"\\vert",shift:"!"},{latex:"#@^{\\complement}",aside:"complement",variants:[{latex:"\\setminus",aside:"set minus"},{latex:"\\smallsetminus",aside:"small set minus"}]},{latex:"\\subset",shift:"\\subseteq",variants:["\\subset","\\subseteq","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsubseteq","\\supset","\\supseteq","\\supsetneq","\\supsetneqq","\\nsupset","\\nsupseteq"]},{latex:"#@^{\\prime}",shift:"#@^{\\doubleprime}",variants:["#@^{\\doubleprime}","#@\\degree"]},{latex:"\\mathrm{d}",shift:"\\partial",variants:["\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{latex:"\\infty",variants:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"]}],[{label:"[shift]",width:2},{class:"box",latex:",",shift:";",variants:[";","?"]},{class:"box",latex:"\\colon",shift:"\\Colon",variants:[{latex:"\\Colon",aside:"such that",class:"box"},{latex:":",aside:"ratio",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\therefore",aside:"therefore",class:"box"},{latex:"\\because",aside:"because",class:"box"}]},{class:"box",latex:"\\cdot",aside:"centered dot",shift:"\\ast",variants:["\\circ","\\bigcirc","\\bullet","\\odot","\\oslash","\\circledcirc","\\ast","\\star","\\times","\\doteq","\\doteqdot"]},"[separator]","[left]","[right]",{label:"[backspace]",width:1,class:"action hide-shift"},{label:"[action]",width:1}]]},compact:{label:"compact",rows:[["[+]","[-]","[*]","[/]","[=]","[.]","[(]","[)]","\\sqrt{#0}","#@^{#?}"],["[1]","[2]","[3]","[4]","[5]","[6]","[7]","[8]","[9]","[0]"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]},minimalist:{label:"minimalist",layers:[{style:`
          div.minimalist-backdrop {
            display: flex;
            justify-content: center;
          }          
          div.minimalist-container {
            --keycap-height: 40px;
            --keycap-max-width: 53px;
            --keycap-small-font-size: 12px;
            background: var(--keyboard-background);
            padding: 20px 20px 0px 20px;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            border: 1px solid var(--keyboard-border);
            box-shadow: 0 0 32px rgb(0 0 0 / 30%);
          }        
        `,backdrop:"minimalist-backdrop",container:"minimalist-container",rows:[["+","-","\\times",{latex:"\\frac{#@}{#0}",class:"small"},"=","[.]","(",")",{latex:"\\sqrt{#0}",class:"small"},{latex:"#@^{#?}",class:"small"}],["1","2","3","4","5","6","7","8","9","0"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]}]},"numeric-only":{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",id:"numeric-only",rows:[["7","8","9","[separator]",{label:"[backspace]",width:2}],["4","5","6","[separator]","[separator]","[separator]"],["1","2","3","[separator]","[separator]","[separator]"],["0",{label:"[.]",variants:[]},"-","[separator]","[left]","[right]"]]}},is={0:["\\varnothing","\\infty"],1:["\\frac{1}{#@}","#@^{-1}","\\times 10^{#?}","\\phi","\\imaginaryI"],2:["\\frac{1}{2}","#@^2","\\sqrt2","\\exponentialE"],3:["\\frac{1}{3}","#@^3","\\sqrt3","\\pi"],4:["\\frac{1}{4}","#@^4"],5:["\\frac{1}{5}","#@^5","\\sqrt5"],6:["\\frac{1}{6}","#@^6"],7:["\\frac{1}{7}","#@^7"],8:["\\frac{1}{8}","#@^8"],9:["\\frac{1}{9}","#@^9"],".":[".",",",";","\\colon"],",":["{,}",".",";","\\colon"],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"","","","","",""],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"","","","","",""],b:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"},""],d:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isnt"},"","","",""],E:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isnt"},"","","",""],g:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"},"","","",""],I:[{latex:"\\imaginaryI",aside:"imaginary i"},"","","",""],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"},""],o:["","","","","",""],O:["","","","","",""],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],u:["","","",""],U:["","","",""],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],y:["",""],Y:[""],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br> em"},{latex:'\\char"203A\\,\\char"2039',insert:"\\,",aside:"thin space<br> em"},{latex:'\\char"203A\\:\\char"2039',insert:"\\:",aside:"medium space<br> em"},{latex:'\\char"203A\\;\\char"2039',insert:"\\;",aside:"thick space<br> em"},{latex:'\\char"203A\\ \\char"2039',insert:"\\ ",aside:" em"},{latex:'\\char"203A\\enspace\\char"2039',insert:"\\enspace",aside:" em"},{latex:'\\char"203A\\quad\\char"2039',insert:"\\quad",aside:"1 em"},{latex:'\\char"203A\\qquad\\char"2039',insert:"\\qquad",aside:"2 em"}]},pn;function ns(t,e){var r,a,l,u,d;let g=Ee.singleton;if(!g)return;let E=fi(t),P="";if(window.mathVirtualKeyboard.isShifted){let sr=(r=g.getKeycap(E?.id))==null?void 0:r.shift;typeof sr=="object"&&"variants"in sr&&(P=(a=sr.variants)!=null?a:"")}else P=(u=(l=g.getKeycap(E?.id))==null?void 0:l.variants)!=null?u:"";if(typeof P=="string"&&!os(P)||Array.isArray(P)&&P.length===0){e?.();return}let Z={},me="";for(let sr of sg(P)){let Ko=uo(sr),Bs=Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);Z[Bs]=Ko;let[th,pf]=hn(Ko);me+=`<div id=${Bs} class="item ${pf}">${th}</div>`}let _e=document.createElement("div");_e.setAttribute("aria-hidden","true"),_e.className="MLK__variant-panel",_e.style.height="auto";let He=Object.keys(Z).length,Xe=5;He===1?Xe=1:He===2||He===4?Xe=2:He===3||He===5||He===6?Xe=3:He>=7&&He<14&&(Xe=4),_e.style.width=`calc(var(--variant-keycap-length) * ${Xe} + 12px)`,_e.innerHTML=mn.createHTML(me),Ae.open({root:(d=g?.container)==null?void 0:d.querySelector(".ML__keyboard"),child:_e}),pn=new AbortController;let{signal:wt}=pn,Do=t?.getBoundingClientRect();if(Do){Do.top-_e.clientHeight<0&&(_e.style.width="auto",He<=6?_e.style.height="56px":He<=12?_e.style.height="108px":He<=18?_e.style.height="205px":_e.classList.add("compact"));let sr=Math.max(0,Math.min(window.innerWidth-_e.offsetWidth,(Do.left+Do.right-_e.offsetWidth)/2)),Ko=Do.top-_e.clientHeight+5;_e.style.left=`${sr}px`,_e.style.top=`${Ko}px`,_e.classList.add("is-visible"),requestAnimationFrame(()=>{var Bs;_e.addEventListener("pointerup",th=>{let pf=fi(th.target);!(pf!=null&&pf.id)||!Z[pf.id]||(as(Z[pf.id]),zr(),e?.(),th.preventDefault())},{capture:!0,passive:!1,signal:wt}),_e.addEventListener("pointerenter",th=>{let pf=fi(th.target);!(pf!=null&&pf.id)||!Z[pf.id]||pf.classList.add("is-active")},{capture:!0,signal:wt}),_e.addEventListener("pointerleave",th=>{let pf=fi(th.target);th.target&&"tagName"in th.target&&typeof th.target.tagName=="string"&&th.target.tagName.toUpperCase()==="ASIDE"||!(pf!=null&&pf.id)||!Z[pf.id]||pf.classList.remove("is-active")},{capture:!0,signal:wt}),(Bs=g.getKeycap(E?.id))!=null&&Bs.stickyVariantPanel?window.addEventListener("pointerdown",th=>{if(!(th.target instanceof Node))return;let pf=_e.contains(th.target);th.target===_e||pf||(zr(),e?.())},{signal:wt}):(window.addEventListener("pointercancel",()=>{zr(),e?.()},{signal:wt}),window.addEventListener("pointerup",()=>{zr(),e?.()},{signal:wt}))})}}function zr(){pn?.abort(),pn=null,Ae.state==="open"&&Ae.close()}function ag(t){if(t==="foreground-color"){let e=[];for(let r of Object.keys(jt))e.push({class:"swatch-button",label:'<span style="border: 3px solid '+jt[r]+'"></span>',command:["applyStyle",{color:r}]});return e}if(t==="background-color"){let e=[];for(let r of Object.keys(Ut))e.push({class:"swatch-button",label:'<span style="background:'+Ut[r]+'"></span>',command:["applyStyle",{backgroundColor:r}]});return e}}function os(t){return is[t]!==void 0}function sg(t){var e;return typeof t!="string"?t:(is[t]||(is[t]=(e=ag(t))!=null?e:[]),is[t])}function lg(t){return typeof t=="string"?t:Object.entries(t).map(([e,r])=>`${e}:${r} !important`).join(";")}function cg(t){return Object.keys(t).map(e=>`${e} {${lg(t[e])}}`).join("")}function mo(t){if(!t)return"";let e=new O,r=new b({mode:"math",type:"root",body:he(t,{context:e,args:l=>l==="@"?"{\\class{ML__box-placeholder}{\\blacksquare}}":"\\placeholder{}"})}),a=_r(It(new _(r.render(e),{classes:"ML__base"}),e));return Mr(a,{classes:"ML__latex"}).toMarkup()}function po(t){if(Array.isArray(t))return t.map(r=>po(r)).flat();let e=typeof t=="string"?{markup:t}:t;return"rows"in e&&Array.isArray(e.rows)&&(e.rows=e.rows.map(r=>r.map(a=>uo(a)))),e.id!=null||(e.id="ML__layer_"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36)),[e]}function ug(){var t,e;let r=window.mathVirtualKeyboard.alphabeticLayout;if(r==="auto"){let d=Dr();d&&(r=d.virtualLayout),(!r||r==="auto")&&(r=(t={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[N.locale.slice(0,2)])!=null?t:"qwerty")}let a={qwerty:["qwertyuiop"," asdfghjkl ","^zxcvbnm~"],azerty:["azertyuiop","qsdfghjklm","^ wxcvbn ~"],qwertz:["qwertzuiop"," asdfghjkl ","^yxcvbnm~"],dvorak:["^  pyfgcrl ","aoeuidhtns","qjkxbmwvz~"],colemak:[" qwfpgjluy ","arstdhneio","^zxcvbkm~"]},l=(e=a[r])!=null?e:a.qwerty,u=r==="azerty"?[[{label:"1",variants:"1"},{label:"2",shift:{latex:""},variants:"2"},{label:"3",shift:{latex:""},variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{label:"(",latex:"("},variants:"5"},{label:"6",shift:{label:")",latex:")"},variants:"6"},{label:"7",shift:{latex:""},variants:"7"},{label:"8",shift:{latex:""},variants:"8"},{label:"9",shift:{latex:""},variants:"9"},{label:"0",shift:{latex:""},variants:"0"}]]:[[{label:"1",variants:"1"},{label:"2",variants:"2"},{label:"3",variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{latex:"\\frac{#@}{#?}"},variants:"5"},{label:"6",shift:{latex:"#@^#?"},variants:"6"},{label:"7",variants:"7"},{label:"8",shift:{latex:"\\times"},variants:"8"},{label:"9",shift:{label:"(",latex:"("},variants:"9"},{label:"0",shift:{label:")",latex:")"},variants:"0"}]];for(let d of l){let g=[];for(let E of d)/[a-z]/.test(E)?g.push({label:E,class:"hide-shift",shift:{label:E.toUpperCase(),variants:os(E.toUpperCase())?E.toUpperCase():void 0},variants:os(E)?E:void 0}):E==="~"?r!=="dvorak"?g.push("[backspace]"):g.push({label:"[backspace]",width:1}):E==="^"?g.push("[shift]"):E===" "&&g.push("[separator-5]");u.push(g)}return u.push(["[-]","[+]","[=]",{label:" ",width:1.5},{label:",",shift:";",variants:".",class:"hide-shift"},"[.]","[left]","[right]",{label:"[action]",width:1.5}]),{label:"abc",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.alphabetic",layers:po({rows:u})}}function ac(t){if(t==="alphabetic")return ug();if(typeof t=="string")return ac(oc[t]);let e;if("rows"in t&&Array.isArray(t.rows)){let l=t,{rows:u}=l,d=ki(l,["rows"]);e=f(p({},d),{layers:po({rows:t.rows})})}else if("markup"in t&&typeof t.markup=="string"){let l=t,{markup:u}=l,d=ki(l,["markup"]);e=f(p({},d),{layers:po(t.markup)})}else e=p({},t),"layers"in t?e.layers=po(t.layers):console.error('MathLive 0.106.0: provide either a "rows", "markup" or "layers" property');let r=!1,a=!1;for(let l of e.layers)if(l.rows)for(let u of l.rows.flat()){fn(u)&&(r=!0);let d=u.command;typeof d=="string"&&["undo","redo","cut","copy","paste"].includes(d)&&(a=!0)}return(!("displayShiftedKeycaps"in t)||t.displayShiftedKeycaps===void 0)&&(e.displayShiftedKeycaps=r),(!("displayEditToolbar"in t)||t.displayEditToolbar===void 0)&&(e.displayEditToolbar=!a),e}function dg(t,e){var r,a;let l='<div class="left">';if(t.normalizedLayouts.length>1)for(let[u,d]of t.normalizedLayouts.entries()){let g=d,E=[u===e?"selected":"layer-switch"];g.tooltip&&E.push("MLK__tooltip"),g.labelClass&&E.push(...g.labelClass.split(" ")),l+=`<div class="${E.join(" ")}"`,g.tooltip&&(l+=" data-tooltip='"+((r=z(g.tooltip))!=null?r:g.tooltip)+"' "),u!==e&&(l+=`data-layer="${g.layers[0].id}"`),l+=`>${(a=g.label)!=null?a:"untitled"}</div>`}return l+="</div>",l}function hp(t,e){let r="";if(t.editToolbar==="none")return"";let a=[];e.selectionIsCollapsed?a.push("undo","redo","pasteFromClipboard"):a.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let l={undo:`<div class='action ${e.canUndo===!1?"disabled":""}'
          data-command='"undo"'
          data-tooltip='${z("tooltip.undo")}'>
          <svg><use xlink:href='#svg-undo' /></svg>
      </div>`,redo:`<div class='action ${e.canRedo===!1?"disabled":""}'
          data-command='"redo"'
          data-tooltip='${z("tooltip.redo")}'>
          <svg><use xlink:href='#svg-redo' /></svg>
      </div>`,cutToClipboard:`
        <div class='action'
            data-command='"cutToClipboard"'
            data-tooltip='${z("tooltip.cut to clipboard")}'>
            <svg><use xlink:href='#svg-cut' /></svg>
        </div>
    `,copyToClipboard:`
        <div class='action'
            data-command='"copyToClipboard"'
            data-tooltip='${z("tooltip.copy to clipboard")}'>
            <svg><use xlink:href='#svg-copy' /></svg>
        </div>
    `,pasteFromClipboard:`
        <div class='action'
            data-command='"pasteFromClipboard"'
            data-tooltip='${z("tooltip.paste from clipboard")}'>
            <svg><use xlink:href='#svg-paste' /></svg>
        </div>
    `};return r+=a.map(u=>l[u]).join(""),r}function mg(t){for(let e of t)pg(e)}function pg(t){let e=Ee.singleton;if(!e)return;let r={};if(!t.id){if(t.hasAttribute("data-label")&&(r.label=t.dataset.label),t.hasAttribute("data-latex")&&(r.latex=t.dataset.latex),t.hasAttribute("data-key")&&(r.key=t.dataset.key),t.hasAttribute("data-insert")&&(r.insert=t.dataset.insert),t.hasAttribute("data-variants")&&(r.variants=t.dataset.variants),t.hasAttribute("data-aside")&&(r.aside=t.dataset.aside),t.className&&(r.class=t.className),!r.label&&!r.latex&&!r.key&&!r.insert&&(r.latex=t.innerText,r.label=t.innerHTML),t.hasAttribute("data-command"))try{r.command=JSON.parse(t.dataset.command)}catch{}t.id=e.registerKeycap(r)}if(!t.innerHTML){let[a,l]=hn(r);t.innerHTML=globalThis.MathfieldElement.createHTML(a)}}function hg(){Ve("virtual-keyboard"),Ve("core"),pi()}function fp(){it("core"),it("virtual-keyboard")}var fg=`<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

<symbol id="svg-delete-backward" viewBox="0 0 576 512">
  <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>
</symbol>

<symbol id="svg-shift" viewBox="0 0 384 512">
  <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>
</symbol>

<symbol id="svg-commit" viewBox="0 0 512 512">
  <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>
</symbol>


<symbol id="circle-plus" viewBox="0 0 512 512"><path d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344c0 13.3 10.7 24 24 24s24-10.7 24-24V280h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H280V168c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H168c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"/></symbol>

<symbol id="svg-command" viewBox="0 0 640 512">
  <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>
</symbol>

<symbol id="svg-undo" viewBox="0 0 512 512">
  <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>
</symbol>
<symbol id="svg-redo" viewBox="0 0 512 512">
  <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>
</symbol>
<symbol id="svg-arrow-left" viewBox="0 0 320 512">
  <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>
</symbol>
<symbol id="svg-arrow-right" viewBox="0 0 320 512">
  <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>
</symbol>
<symbol id="svg-tab" viewBox="0 0 448 512">
  <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>
</symbol>
<symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>
<symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>
<symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>
</symbol>
<symbol id="svg-angle-double-right" viewBox="0 0 512 512"><path d="M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/>
</symbol>
<symbol id="svg-angle-double-left" viewBox="0 0 512 512"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/>
</symbol>
<symbol id="svg-trash" viewBox="0 0 448 512">
  <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>
</symbol>
<symbol id="svg-keyboard-down" viewBox="0 0 576 512"><path d="M64 48c-8.8 0-16 7.2-16 16V240c0 8.8 7.2 16 16 16H512c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64zM0 64C0 28.7 28.7 0 64 0H512c35.3 0 64 28.7 64 64V240c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM159 359c9.4-9.4 24.6-9.4 33.9 0l95 95 95-95c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L305 505c-4.5 4.5-10.6 7-17 7s-12.5-2.5-17-7L159 393c-9.4-9.4-9.4-24.6 0-33.9zm1-167c0-8.8 7.2-16 16-16H400c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V192zM120 88h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H120c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H200c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H280c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H360c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H440c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16z"/></symbol>
</svg>`;function gp(t){t.resetKeycapRegistry(),hg();let e=document.createElement("div");e.className="ML__keyboard";let r=document.createElement("div");r.className="MLK__plate",r.innerHTML=globalThis.MathfieldElement.createHTML(fg+t.normalizedLayouts.map((d,g)=>gg(t,d,g)).join(""));let a=document.createElement("div");a.className="MLK__backdrop",a.appendChild(r),e.appendChild(a),e.addEventListener("pointerdown",yg,{passive:!1});let l=e.querySelectorAll(".ML__edit-toolbar");if(l)for(let d of l)d.addEventListener("click",g=>{var E,P;let Z=g.target,me="";for(;Z&&!me;)me=(E=Z?.getAttribute("data-command"))!=null?E:"",Z=(P=Z?.parentElement)!=null?P:null;me&&t.executeCommand(JSON.parse(me))});mg(e.querySelectorAll(".MLK__keycap, .action, .fnbutton, .bigfnbutton"));let u=e.querySelectorAll(".MLK__layer");u.length>0;for(let d of u)d.addEventListener("pointerdown",g=>g.preventDefault());return t.currentLayer=t.latentLayer,e}function gg(t,e,r){var a;let l=[];if(!("layers"in e))return"";for(let u of e.layers)l.push(`<div tabindex="-1" class="MLK__layer" id="${u.id}">`),(t.normalizedLayouts.length>1||e.displayEditToolbar)&&(l.push("<div class='MLK__toolbar' role='toolbar'>"),l.push(dg(t,r)),((a=e.displayEditToolbar)==null||a)&&l.push('<div class="ML__edit-toolbar right"></div>'),l.push("</div>")),l.push(bg(t,u)),l.push("</div>");return l.join("")}function bg(t,e){if(typeof e=="string")return e;let r="";if(typeof e.style=="string"?r+=`<style>${e.style}</style>`:typeof e.style=="object"&&(r+=`<style>${cg(e.style)}</style>`),e.backdrop&&(r+=`<div class='${e.backdrop}'>`),e.container&&(r+=`<div class='${e.container}'>`),e.rows){r+="<div class=MLK__rows>";for(let a of e.rows){r+='<div dir="ltr" class=MLK__row>';for(let l of a)if(l){let u=t.registerKeycap(l),[d,g]=hn(l);/(^|\s)separator/.test(g)?r+=`<div class="${g}"`:r+=`<div tabindex="-1" id="${u}" class="${g}"`,l.tooltip&&(r+=` data-tooltip="${l.tooltip}"`),r+=`>${d}</div>`}r+="</div>"}r+="</div>"}else e.markup&&(r+=e.markup);return e.container&&(r+="</div>"),e.backdrop&&(r+="</div>"),r}function hn(t,e={shifted:!1}){var r,a,l,u,d,g,E;let P="",Z=(r=t.class)!=null?r:"";if(e.shifted&&fn(t)&&(Z+=" is-active"),e.shifted&&"shift"in t)typeof t.shift=="string"?P=mo(t.shift):typeof t.shift=="object"&&(P=t.shift.label?t.shift.label:(a=mo(t.shift.latex||t.shift.insert||"")||t.shift.key)!=null?a:""),typeof t.shift=="object"&&(Z=(u=(l=t.shift.class)!=null?l:t.class)!=null?u:"");else{if(P=t.label?t.label:(d=mo(t.latex||t.insert||"")||t.key)!=null?d:"",t.shift){let me;typeof t.shift=="string"?me=mo(t.shift):t.shift.label?me=t.shift.label:me=(g=mo(t.shift.latex||t.shift.insert||"")||t.shift.key)!=null?g:"",P+=`<span class="MLK__shift">${me}</span>`}t.aside&&(P+=`<aside>${t.aside}</aside>`)}return t.layer&&!/layer-switch/.test(Z)&&(Z+=" layer-switch"),/(^|\s)(separator|action|shift|fnbutton|bigfnbutton)($|\s)/.test(Z)||(Z+=" MLK__keycap"),!/\bw[0-9]+\b/.test(Z)&&t.width&&(Z+=(E={0:" w0",.5:" w5",1.5:" w15",2:" w20",5:" w50"}[t.width])!=null?E:""),[P,Z||"MLK__keycap"]}var Ft={"[left]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-left /></svg>",command:"performWithFeedback(moveToPreviousChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-left /></svg>",command:"performWithFeedback(extendSelectionBackward)"}},"[right]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-right /></svg>",command:"performWithFeedback(moveToNextChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-right /></svg>",command:"performWithFeedback(extendSelectionForward)"}},"[up]":{class:"action hide-shift",label:"",command:"performWithFeedback(moveUp)",shift:{label:"",command:"performWithFeedback(extendSelectionUpward)"}},"[down]":{class:"action hide-shift",label:"",command:"performWithFeedback(moveDown)",shift:{label:"",command:"performWithFeedback(extendSelectionDownward)"}},"[return]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[action]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{label:"<svg class=svg-glyph><use xlink:href=#circle-plus /></svg>",command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[hr]":{class:"separator horizontal-rule"},"[hide-keyboard]":{class:"action",command:["hideVirtualKeyboard"],width:1.5,label:"<svg class=svg-glyph-lg><use xlink:href=#svg-keyboard-down /></svg>"},"[.]":{variants:".",command:"performWithFeedback(insertDecimalSeparator)",shift:",",class:"big-op hide-shift",label:"."},"[,]":{variants:",",command:"performWithFeedback(insertDecimalSeparator)",shift:".",class:"big-op hide-shift",label:","},"[+]":{variants:[{latex:"\\sum_{#0}^{#0}",class:"small"},"\\oplus"],latex:"+",label:"+",class:"big-op hide-shift",shift:{latex:"\\sum",insert:"\\sum",class:"small"}},"[-]":{variants:["\\pm","\\ominus"],latex:"-",label:"&#x2212;",shift:"\\pm",class:"big-op hide-shift"},"[/]":{class:"big-op hide-shift",shift:{class:"",latex:"\\frac{1}{#@}"},variants:["/","\\div","\\%","\\oslash"],latex:"\\frac{#@}{#?}",label:"&divide;"},"[*]":{variants:[{latex:"\\prod_{#0}^{#0}",class:"small"},"\\otimes","\\cdot"],latex:"\\cdot",label:"&times;",shift:{latex:"\\times"},class:"big-op hide-shift"},"[=]":{variants:["\\neq","\\equiv","\\varpropto","\\thickapprox","\\lt","\\gt","\\le","\\ge"],latex:"=",label:"=",shift:{label:"",latex:"\\ne"},class:"big-op hide-shift"},"[backspace]":{class:"action bottom right hide-shift",width:1.5,command:"performWithFeedback(deleteBackward)",label:"<svg class=svg-glyph><use xlink:href=#svg-delete-backward /></svg>",shift:{class:"action warning",label:"<svg class=svg-glyph><use xlink:href=#svg-trash /></svg>",command:"deleteAll"}},"[undo]":{class:"ghost if-can-undo",command:"undo",label:"<svg class=svg-glyph><use xlink:href=#svg-undo /></svg>",tooltip:"tooltip.undo"},"[redo]":{class:"ghost  if-can-redo",command:"redo",label:"<svg class=svg-glyph><use xlink:href=#svg-redo /></svg>",tooltip:"tooltip.redo"},"[(]":{variants:[{latex:"\\lbrack",key:"["},"\\langle","\\lfloor","\\lceil",{latex:"\\lbrace",key:"{"}],key:"(",label:"(",shift:{label:"[",key:"["},class:"hide-shift"},"[)]":{variants:[{latex:"\\rbrack",key:"]"},"\\rangle","\\rfloor","\\rceil",{latex:"\\rbrace",key:"}"}],key:")",label:")",shift:{label:"]",latex:"\\rbrack"},class:"hide-shift"},"[0]":{variants:"0",latex:"0",label:"0",shift:"\\infty",class:"hide-shift"},"[1]":{variants:"1",latex:"1",label:"1",shift:"#@^{-1}",class:"hide-shift"},"[2]":{variants:"2",latex:"2",label:"2",shift:"#@^2",class:"hide-shift"},"[3]":{variants:"3",latex:"3",label:"3",shift:"#@^3",class:"hide-shift"},"[4]":{variants:"4",latex:"4",label:"4",shift:"#@^4",class:"hide-shift"},"[5]":{variants:"5",latex:"5",label:"5",shift:"#@^5",class:"hide-shift"},"[6]":{variants:"6",latex:"6",label:"6",shift:"#@^6",class:"hide-shift"},"[7]":{variants:"7",latex:"7",label:"7",shift:"#@^7",class:"hide-shift"},"[8]":{variants:"8",latex:"8",label:"8",shift:"#@^8",class:"hide-shift"},"[9]":{variants:"9",latex:"9",label:"9",shift:"#@^9",class:"hide-shift"},"[separator-5]":{class:"separator",width:.5},"[separator]":{class:"separator"},"[separator-10]":{class:"separator"},"[separator-15]":{class:"separator",width:1.5},"[separator-20]":{class:"separator",width:2},"[separator-50]":{class:"separator",width:5},"[shift]":{class:"shift bottom left",width:1.5,label:"<span class=caps-lock-indicator></span><svg class=svg-glyph><use xlink:href=#svg-shift /></svg>"},"[foreground-color]":{variants:"foreground-color",command:["applyStyle",{color:"red"}],label:"<span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'>"},"[background-color]":{variants:"background-color",command:["applyStyle",{backgroundColor:"yellow"}],label:"<span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span>"}};function uo(t){var e;if(typeof t=="string"){if(t==="[.]"&&globalThis.MathfieldElement.decimalSeparator===","&&(t="[,]"),!Ft[t])return{latex:t};t={label:t}}let r;return"label"in t&&t.label&&Ft[t.label]&&(r=f(p(p({},Ft[t.label]),t),{label:Ft[t.label].label})),"key"in t&&t.key&&Ft[t.key]&&(r=f(p(p({},Ft[t.key]),t),{key:Ft[t.key].key})),r?(r.command==="insertDecimalSeparator"&&(r.label=(e=globalThis.MathfieldElement.decimalSeparator)!=null?e:"."),(r.tooltip===void 0||r.tooltip===null||r.tooltip===!1)&&delete r.tooltip,(r.tooltip===void 0||r.tooltip===null||r.tooltip===!1)&&delete r.tooltip,(r.aside===void 0||r.aside===null||r.aside===!1)&&delete r.aside,(r.variants===void 0||r.variants===null||r.variants===!1)&&delete r.variants,(r.shift===void 0||r.shift===null||r.shift===!1)&&delete r.shift,r):t}var ho;function yg(t){var e;if(t.button!==0)return;let r=Ee.singleton;if(!r)return;let a=t.target;for(;a&&!a.getAttribute("data-layer");)a=a.parentElement;if(a){r.currentLayer=(e=a.getAttribute("data-layer"))!=null?e:"",t.preventDefault();return}let l=fi(t.target);if(!(l!=null&&l.id))return;let u=r.getKeycap(l.id);if(!u)return;t.type;let d=new AbortController,g=d.signal;l.classList.add("is-pressed"),l.addEventListener("pointerenter",ss(d),{capture:!0,signal:g}),l.addEventListener("pointerleave",ss(d),{capture:!0,signal:g}),l.addEventListener("pointercancel",ss(d),{signal:g}),l.addEventListener("pointerup",ss(d),{signal:g}),fn(u)&&(l.classList.add("is-active"),r.shiftPressCount++),u.variants&&(ho&&clearTimeout(ho),ho=setTimeout(()=>{l.classList.contains("is-pressed")&&(l.classList.remove("is-pressed"),l.classList.add("is-active"),t.target&&"releasePointerCapture"in t.target&&t.target.releasePointerCapture(t.pointerId),ns(l,()=>{d.abort(),l?.classList.remove("is-active")}))},u.stickyVariantPanel?0:300)),t.preventDefault()}function ss(t){return e=>{let r=fi(e.target);if(!(r!=null&&r.id))return;let a=Ee.singleton;if(!a)return;let l=a.getKeycap(r.id);if(l){if(e.type==="pointerenter"&&e.target===r&&e.isPrimary&&r.classList.add("is-pressed"),e.type==="pointercancel"){r.classList.remove("is-pressed"),fn(l)&&(a.shiftPressCount--,r.classList.toggle("is-active",a.isShifted)),t.abort();return}if(e.type==="pointerleave"&&e.target===r){r.classList.remove("is-pressed"),fn(l)&&(a.shiftPressCount--,r.classList.toggle("is-active",a.isShifted));return}if(e.type==="pointerup"){ho&&clearTimeout(ho),fn(l)?r.classList.toggle("is-active",a.isShifted):r.classList.contains("is-pressed")&&(r.classList.remove("is-pressed"),a.isShifted&&l.shift?typeof l.shift=="string"?a.executeCommand(["insert",l.shift,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]):as(l.shift):as(l),a.shiftPressCount===1&&!e.shiftKey&&(a.shiftPressCount=0)),t.abort(),e.preventDefault();return}}}}function as(t){var e;let r=t.command;!r&&t.insert&&(r=["insert",t.insert,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),!r&&t.key&&(r=["typedText",t.key,{focus:!0,feedback:!0,simulateKeystroke:!0}]),!r&&t.latex&&(r=["insert",t.latex,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),r||(r=["typedText",t.label,{focus:!0,feedback:!0,simulateKeystroke:!0}]),(e=Ee.singleton)==null||e.executeCommand(r)}function xg(t){if(t.nodeType!==1)return!1;let e=t.classList;return e.contains("MLK__keycap")||e.contains("shift")||e.contains("action")||e.contains("fnbutton")||e.contains("bigfnbutton")}function fi(t){if(!t)return;let e=t;for(;e&&!xg(e);)e=e.parentElement;return e??void 0}function fn(t){return!!t.class&&/(^|\s)shift($|\s)/.test(t.class)}var Ee=class FE{constructor(){this.originalContainerBottomPadding=null,this.keycapRegistry={},this._shiftPressCount=0;var e;this.targetOrigin=window.origin,this.originValidator="none",this._alphabeticLayout="auto",this._layouts=Object.freeze(["default"]),this._editToolbar="default",this._container=void 0,this._visible=!1,this._rebuilding=!1,this.observer=new ResizeObserver(r=>{this.adjustBoundingRect(),this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect})}),this.listeners={};try{(e=window.top)==null||e.addEventListener("message",this)}catch{window.addEventListener("message",this)}document.addEventListener("focusin",r=>{let a=r.target;a!=null&&a.isConnected&&setTimeout(()=>{let l=bp();l&&!l.readOnly&&l.mathVirtualKeyboardPolicy==="auto"&&Bo()&&this.show({animate:!0})},300)}),document.addEventListener("focusout",r=>{r.target instanceof xt&&r.target.mathVirtualKeyboardPolicy!=="manual"&&setTimeout(()=>{bp()||this.hide()},300)})}get currentLayer(){var e,r,a;return(a=(r=(e=this._element)==null?void 0:e.querySelector(".MLK__layer.is-visible"))==null?void 0:r.id)!=null?a:""}set currentLayer(e){var r;if(!this._element){this.latentLayer=e;return}let a=e?this._element.querySelector(`#${e}.MLK__layer`):null;a||(a=this._element.querySelector(".MLK__layer")),a&&((r=this._element.querySelector(".MLK__layer.is-visible"))==null||r.classList.remove("is-visible"),a.classList.add("is-visible")),this.render()}get shiftPressCount(){return this._shiftPressCount}set shiftPressCount(e){var r;this._shiftPressCount=e>2||e<0?0:e,(r=this._element)==null||r.classList.toggle("is-caps-lock",this.shiftPressCount===2),this.render()}get isShifted(){return this._shiftPressCount>0}resetKeycapRegistry(){this.keycapRegistry={}}registerKeycap(e){let r="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);return this.keycapRegistry[r]=e,r}setKeycap(e,r){Ft[e]=uo(r),this.rebuild()}getKeycap(e){var r;return e?(r=Ft[e])!=null?r:this.keycapRegistry[e]:void 0}getLayer(e){let r=this.normalizedLayouts;for(let a of r)for(let l of a.layers)if(l.id===e)return l}get alphabeticLayout(){return this._alphabeticLayout}set alphabeticLayout(e){this._alphabeticLayout=e,this._normalizedLayouts=void 0,this.rebuild()}get layouts(){return this._layouts}set layouts(e){this.updateNormalizedLayouts(e),this.rebuild()}updateNormalizedLayouts(e){let r=Array.isArray(e)?[...e]:[e],a=r.findIndex(l=>l==="default");a>=0&&r.splice(a,1,"numeric","symbols","alphabetic","greek"),this._layouts=Object.freeze(r),this._normalizedLayouts=r.map(l=>ac(l))}get normalizedLayouts(){return this._normalizedLayouts||this.updateNormalizedLayouts(this._layouts),this._normalizedLayouts}get editToolbar(){return this._editToolbar}set editToolbar(e){this._editToolbar=e,this.rebuild()}get container(){return this._container===void 0?window.document.body:this._container}set container(e){this._container=e,this.rebuild()}static get singleton(){if(this._singleton===void 0)try{this._singleton=new FE}catch{this._singleton=null}return this._singleton}get style(){return this._style}addEventListener(e,r,a){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(r)||this.listeners[e].add(r)}dispatchEvent(e){return!this.listeners[e.type]||this.listeners[e.type].size===0?!0:(this.listeners[e.type].forEach(r=>{typeof r=="function"?r(e):r?.handleEvent(e)}),!e.defaultPrevented)}removeEventListener(e,r,a){this.listeners[e]&&this.listeners[e].delete(r)}get element(){return this._element}set element(e){var r;this._element!==e&&((r=this._element)==null||r.remove(),this._element=e)}get visible(){return this._visible}set visible(e){e?this.show():this.hide()}get boundingRect(){var e;if(!this._visible)return new DOMRect;let r=(e=this._element)==null?void 0:e.getElementsByClassName("MLK__plate")[0];return r?r.getBoundingClientRect():new DOMRect}adjustBoundingRect(){if(!this._element)return;let e=this.boundingRect.height;if(this.container===document.body){this._element.style.setProperty("--_keyboard-height",`calc(${e}px + var(--_padding-top) + var(--_padding-bottom) + env(safe-area-inset-bottom, 0))`);let r=e-1;this.container.style.paddingBottom=this.originalContainerBottomPadding?`calc(${this.originalContainerBottomPadding} + ${r}px)`:`${r}px`}else this._element.style.setProperty("--_keyboard-height",`${e}px`)}rebuild(){if(this._rebuilding||!this._element)return;this._rebuilding=!0;let e=this.currentLayer;requestAnimationFrame(()=>{this._rebuilding=!1,this._element&&(this._element.remove(),this._element=void 0),this.visible&&(this.buildAndAttachElement(),this.currentLayer=e,this.render(),this.adjustBoundingRect(),this._element.classList.add("is-visible"))})}render(){var e;if(!this._element)return;let r=this.getLayer(this.currentLayer);this._element.classList.toggle("backdrop-is-transparent",!!(r&&(r.backdrop||r.container)));let a=this._element.querySelectorAll(".MLK__layer.is-visible .MLK__keycap, .MLK__layer.is-visible .action, .fnbutton, .MLK__layer.is-visible .bigfnbutton, .MLK__layer.is-visible .shift");if(!a)return;let l=this.isShifted;for(let u of a){let d=this.getKeycap(u.id);if(d){let[g,E]=hn(d,{shifted:l});u.innerHTML=globalThis.MathfieldElement.createHTML(g),u.className=E,l&&typeof d.shift=="object"&&(e=d.shift)!=null&&e.tooltip?u.dataset.tooltip=d.shift.tooltip:!l&&d.tooltip&&(u.dataset.tooltip=d.tooltip)}}}show(e){var r;if(this._visible)return;let a=this.container;if(a&&window.mathVirtualKeyboard&&this.stateWillChange(!0)){if(this._element||(this.buildAndAttachElement(),this.adjustBoundingRect()),!this._visible){let l=this._element.getElementsByClassName("MLK__plate")[0];if(l&&this.observer.observe(l),a===window.document.body){let u=a.style.paddingBottom;this.originalContainerBottomPadding=u;let d=l.offsetHeight-1;a.style.paddingBottom=u?`calc(${u} + ${d}px)`:`${d}px`}window.addEventListener("mouseup",this),window.addEventListener("blur",this),window.addEventListener("keydown",this,{capture:!0}),window.addEventListener("keyup",this,{capture:!0}),(r=this._element)==null||r.classList.toggle("is-caps-lock",this.shiftPressCount===2),this.currentLayer=this.latentLayer}this._visible=!0,e!=null&&e.animate?requestAnimationFrame(()=>{this._element&&(this._element.classList.add("animate"),this._element.addEventListener("transitionend",()=>{var l;return(l=this._element)==null?void 0:l.classList.remove("animate")},{once:!0}),this._element.classList.add("is-visible"),this.stateChanged())}):(this._element.classList.add("is-visible"),this.stateChanged())}}hide(e){var r;let a=this.container;if(a&&this._visible&&this.stateWillChange(!1)){if(this._visible=!1,this._element){this.latentLayer=this.currentLayer;let l=this._element.getElementsByClassName("MLK__plate")[0];l&&this.observer.unobserve(l),window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("keydown",this,{capture:!0}),window.removeEventListener("keyup",this,{capture:!0}),window.removeEventListener("contextmenu",this,{capture:!0}),zr(),fp(),(r=this._element)==null||r.remove(),this._element=void 0,this.originalContainerBottomPadding!==null&&(a.style.paddingBottom=this.originalContainerBottomPadding)}this.stateChanged()}}get height(){var e,r;return(r=(e=this.element)==null?void 0:e.offsetHeight)!=null?r:0}buildAndAttachElement(){var e;this.element,this.element=gp(this),window.addEventListener("contextmenu",this,{capture:!0}),this.element.addEventListener("contextmenu",r=>{r.shiftKey||((r.ctrlKey||r.button===2)&&ns(r.target),r.preventDefault(),r.stopPropagation())},{capture:!0}),(e=this.container)==null||e.appendChild(this.element)}handleEvent(e){if(co(e)){if(!Gi(e.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${e.origin}) cannot be handled`,"SecurityError");e.data.action==="disconnect"?this.connectedMathfieldWindow=void 0:e.data.action!=="update-setting"&&e.data.action!=="proxy-created"&&e.data.action!=="execute-command"&&(e.source,this.connectedMathfieldWindow=e.source),this.handleMessage(e.data,e.source)}if(this._element)switch(e.type){case"mouseup":case"blur":document.body.style.userSelect="",this.shiftPressCount=0;break;case"contextmenu":e.button!==2&&e.preventDefault();break;case"keydown":{e.key==="Shift"&&!e.repeat&&(this.shiftPressCount=1);break}case"keyup":{(e.key==="Shift"||!e.getModifierState("Shift")&&this.shiftPressCount!==2)&&(this.shiftPressCount=0);break}}}handleMessage(e,r){let{action:a}=e;if(a==="execute-command"){let{command:l}=e,u=nr(l);if(window.top!==void 0&&u!=="virtual-keyboard")return;this.executeCommand(l);return}if((a==="connect"||a==="show")&&this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},r),a!=="disconnect"&&window===window.top){if(a==="show"){typeof e.animate<"u"?this.show({animate:e.animate}):this.show();return}if(a==="hide"){typeof e.animate<"u"?this.hide({animate:e.animate}):this.hide();return}if(a==="update-setting"){if(e.alphabeticLayout&&(this.alphabeticLayout=e.alphabeticLayout),e.layouts&&(this.layouts=e.layouts),e.editToolbar&&(this.editToolbar=e.editToolbar),e.setKeycap){let{keycap:l,value:u}=e.setKeycap;this.setKeycap(l,u),this.render()}return}if(a==="proxy-created"){this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},r);return}}}sendMessage(e,r,a){if(r.command&&this.dispatchEvent(new CustomEvent("math-virtual-keyboard-command",{detail:r.command})),a||(a=this.connectedMathfieldWindow),this.targetOrigin===null||this.targetOrigin==="null"||a===window){window.dispatchEvent(new MessageEvent("message",{source:window,data:p({type:lo,action:e},r)}));return}if(a)a.postMessage(p({type:lo,action:e},r),{targetOrigin:this.targetOrigin});else if(e==="execute-command"&&Array.isArray(r.command)&&r.command[0]==="insert"){let l=r.command[1].split("");for(let u of l)this.dispatchEvent(new KeyboardEvent("keydown",{key:u,bubbles:!0})),this.dispatchEvent(new KeyboardEvent("keyup",{key:u,bubbles:!0}))}}stateWillChange(e){return this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:e},bubbles:!0,cancelable:!0,composed:!0}))}stateChanged(){this.dispatchEvent(new Event("virtual-keyboard-toggle")),this._visible||(this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect}))}focus(){this.sendMessage("focus",{})}blur(){this.sendMessage("blur",{})}updateToolbar(e){let r=this._element;if(!r)return;r.classList.toggle("is-math-mode",e.mode==="math"),r.classList.toggle("is-text-mode",e.mode==="text"),r.classList.toggle("can-undo",e.canUndo),r.classList.toggle("can-redo",e.canRedo),r.classList.toggle("can-copy",!e.selectionIsCollapsed),r.classList.toggle("can-copy",!e.selectionIsCollapsed),r.classList.toggle("can-paste",!0);let a=r.querySelectorAll(".ML__edit-toolbar");if(a)for(let l of a)l.innerHTML=hp(this,e)}update(e){this._style=e.style,this.updateToolbar(e)}connect(){this.connectedMathfieldWindow=window}disconnect(){this.connectedMathfieldWindow=void 0}executeCommand(e){if(e=hi(e),!e)return!1;let r,a=[],l=nr(e);return Y(e)?(r=e[0],r==="performWithFeedback"&&(l=nr(e.slice(1))),a=e.slice(1)):r=e,l==="virtual-keyboard"?yt[r].fn(void 0,...a):(this.sendMessage("execute-command",{command:e}),!1)}dispose(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("message",this)}};function bp(){let t=ui(),e=null;for(;t;){if("host"in t&&t.host instanceof xt){e=t.host;break}t=t.parentNode}return e}if(Me()&&!("mathVirtualKeyboard"in window))if(window===window.top){let t=Ee.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>t})}else Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>so.singleton,configurable:!0});function gn(t){let e={};for(let r of Object.keys(t))switch(r){case"scriptDepth":let a=t.scriptDepth;if(Y(a))e.scriptDepth=[a[0],a[1]];else if(typeof a=="number")e.scriptDepth=[a,a];else if(typeof a=="string"){let[u,d]=a.split(",").map(g=>parseInt(g.trim()));e.scriptDepth=[u,d]}else throw new TypeError("Unexpected value for scriptDepth");break;case"mathVirtualKeyboardPolicy":let l=t.mathVirtualKeyboardPolicy.toLowerCase();if(l==="sandboxed"){if(window!==window.top){let u=Ee.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>u})}l="manual"}e.mathVirtualKeyboardPolicy=l;break;case"letterShapeStyle":t.letterShapeStyle==="auto"?N.locale.startsWith("fr")?e.letterShapeStyle="french":e.letterShapeStyle="tex":e.letterShapeStyle=t.letterShapeStyle;break;case"defaultMode":["text","math","inline-math"].includes(t.defaultMode)?e.defaultMode=t.defaultMode:(console.error('MathLive 0.106.0:  valid values for defaultMode are "text", "math" or "inline-math"'),e.defaultMode="math");break;case"macros":e.macros=Ci(t.macros);break;default:Y(t[r])?e[r]=[...t[r]]:typeof t[r]=="object"&&!(t[r]instanceof Element)&&r!=="computeEngine"?e[r]=p({},t[r]):e[r]=t[r]}return e}function or(t,e){let r;typeof e=="string"?r=[e]:e===void 0?r=Object.keys(t):r=e;let a={};for(let l of r)t[l]===null?a[l]=null:Y(t[l])?a[l]=[...t[l]]:typeof t[l]=="object"&&!(t[l]instanceof Element)&&l!=="computeEngine"?a[l]=p({},t[l]):a[l]=t[l];return typeof e=="string"?a[e]:a}function bn(){return{readOnly:!1,defaultMode:"math",macros:{},registers:{},colorMap:Hr,backgroundColorMap:Si,letterShapeStyle:N.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,isImplicitFunction:t=>["\\sin","\\cos","\\tan","\\arcsin","\\arccos","\\arctan","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th","\\lg","\\lb","\\log","\\ln"].includes(t),mathModeSpace:"",placeholderSymbol:"",contentPlaceholder:"",popoverPolicy:"auto",environmentPopoverPolicy:"off",keybindings:dm,inlineShortcuts:za,inlineShortcutTimeout:0,mathVirtualKeyboardPolicy:"auto",virtualKeyboardTargetOrigin:window?.origin,originValidator:"none",onInsertStyle:oo,onInlineShortcut:()=>"",onScrollIntoView:null,onExport:um,value:""}}function sc(t){return t.defaultMode==="inline-math"?"math":t.defaultMode}function yp(t,e){let r=t.at(t.position);if(r.type==="composition")r.value=e;else{let{caret:a}=r;r.caret=void 0;let l=new Qi(e,{mode:r.mode});l.caret=a,r.parent.addChildAfter(l,r),t.position+=1}}function xp(t){let e=t.at(t.position);e.type==="composition"&&(e.parent.removeChild(e),t.position-=1)}$o(["math","displaymath"],Re);$o("center",Re);St(["multline","multline*"],"",Re);v("displaylines","",{parse:t=>{if(t.skipWhitespace(),!t.match("<{>"))return[];let e=[],r=[];t.mathlist.length>0&&e.push([t.mathlist]),t.beginContext({tabular:!0,root:!0});do{if(t.end()||t.match("<}>"))break;t.matchColumnSeparator()||t.matchRowSeparator()?(e.push([r]),r=[]):r.push(...t.scan(l=>["<}>","&","\\cr","\\\\","\\tabularnewline"].includes(l)))}while(!0);t.endContext(),e.push([r]);let a=t.scan();return a.length>0&&e.push([a]),e},createAtom:t=>new I("lines",t.args,[],{leftDelim:".",rightDelim:".",columns:[{align:"l"}],classes:["ML__multiline_environment"],isRoot:!0,minColumns:1,maxColumns:1,minRows:1})});St("split","",Re);St(["gather","gather*","gathered"],"",Re);St(["equation","equation*","subequations"],"",Re);$o(["align","align*","eqnarray"],Re,{tabular:!0});St(["aligned"],"",Re);St("array","{columns:colspec}",(t,e,r,a)=>new I(t,e,r,{columns:a[0],mathstyleName:"textstyle"}));St(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",Re);St(["smallmatrix","smallmatrix*"],"[columns:colspec]",Re);St(["cases","dcases","rcases"],"",Re);function Re(t,e=[[[]]],r=[],a=[],l){switch(t){case"math":return new I(t,e,r,{mathstyleName:"textstyle",isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"displaymath":return new I(t,e,r,{mathstyleName:"textstyle",isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"center":return new I(t,e,r,{columns:[{align:"c"}],classes:["ML__center_environment"],isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"multline":case"multline*":return new I(t,e,r,{columns:[{align:"m"}],leftDelim:".",rightDelim:".",isRoot:!0,minColumns:1,maxColumns:1,minRows:1});case"split":return new I(t,e,r,{columns:[{align:"r"},{align:"l"}],minColumns:2,minRows:1,isRoot:!1});case"gather":case"gather*":return new I(t,e,r,{columns:[{gap:.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1,isRoot:!0,classes:["ML__gather_environment"]});case"gathered":return new I(t,e,r,{columns:[{gap:.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1});case"equation":case"equation*":case"subequations":return new I(t,e,r,{columns:[{align:"c"}],isRoot:!0,minColumns:1,maxColumns:1,minRows:1});case"aligned":{let u=0;for(let E of e)u=Math.max(u,E.length);let d=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],g=2;for(;g<u;)d.push({gap:1},{align:"r"},{gap:.25},{align:"l"}),g+=2;return d.push({gap:0}),new I(t,e,r,{arraycolsep:0,columns:d,minColumns:2,minRows:1,isRoot:t!=="aligned"})}case"eqnarray":return new I(t,e,r,{arraycolsep:0,columns:[{gap:0},{align:"r"},{align:"c"},{align:"l"}],minColumns:3,maxColumns:3,minRows:1,isRoot:!0,classes:["ML__eqnarray_environment"]});case"align":case"align*":return new I(t,e,r,{arraycolsep:0,columns:[{gap:0},{align:"r"},{gap:.25},{align:"l"}],minColumns:2,maxColumns:2,minRows:1,isRoot:!0,classes:["ML__align_environment"]});case"pmatrix":case"pmatrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:"(",rightDelim:")",columns:gi(a[0],l)});case"bmatrix":case"bmatrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:"[",rightDelim:"]",columns:gi(a[0],l)});case"Bmatrix":case"Bmatrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:"\\lbrace",rightDelim:"\\rbrace",columns:gi(a[0],l)});case"vmatrix":case"vmatrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:"\\vert",rightDelim:"\\vert",columns:gi(a[0],l)});case"Vmatrix":case"Vmatrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:"\\Vert",rightDelim:"\\Vert",columns:gi(a[0],l)});case"matrix":case"matrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:".",rightDelim:".",columns:gi(a?.[0],l)});case"smallmatrix":case"smallmatrix*":return new I(t,e,r,{mathstyleName:"scriptstyle",columns:gi(a?.[0],l),colSeparationType:"small",arraystretch:.5});case"cases":case"dcases":return new I(t,e,r,{mathstyleName:t==="dcases"?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]});case"rcases":return new I(t,e,r,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]});case"lines":return new I(t,e,r,{leftDelim:".",rightDelim:".",columns:[{align:"l"}],isRoot:!0,minColumns:1,maxColumns:1,minRows:1})}return new I(t,e,r,{mathstyleName:"textstyle"})}function gi(t,e=10){return t??Array(e).fill({align:"c"})}function vg(t){let e=t.at(t.position);for(;e&&!We(e.parentBranch);)e=e.parent;return[e.firstSibling,e.lastSibling]}function _g(t,e){let r=t.at(t.position);for(;r&&!(r.parent instanceof I);)r=r.parent;if(r&&r.type==="array"&&r.environmentName,!r||!(r.parent instanceof I)){let a=t.at(t.position);if(r=a,!r.parent.parent){let l=t.extractAtoms([t.position,t.lastOffset]),u=t.extractAtoms([0,t.position]),d;return e.endsWith("column")?(u.length===0&&(u=cs()),l.length===0&&(l=cs()),d=Re("split",[[u,l]]),t.root=d,fo(d,0,0)?yn(t,d,0,0):fo(d,0,1)?yn(t,d,0,1):t.position=t.offsetOf(a)):(d=Re("lines",[[u],[l]]),t.root=d,yn(t,d,1,0)),[void 0,[0,0]]}if(r.parent instanceof G){let l=r.parent,u=t.extractAtoms([t.position,t.offsetOf(l.lastChild)]),d=t.extractAtoms([t.offsetOf(l.firstChild),t.position]);d.length===0&&(d=cs()),u.length===0&&(u=cs());let g="pmatrix",E=l.leftDelim,P=l.rightDelim;E==="("&&(P===")"||P==="?")?g="pmatrix":(E==="["||E==="\\lbrack")&&(P==="]"||P==="\\rbrack"||P==="?")?g="bmatrix":E==="\\vert"&&P==="\\vert"?g="vmatrix":E==="\\Vert"&&P==="\\Vert"?g="Vmatrix":(E==="{"||E==="\\lbrace")&&(P==="."||P==="?")&&(g="cases");let Z=Re(g,e.endsWith("column")?[[d,u]]:[[d],[u]]);return l.parent.addChildBefore(Z,l),l.parent.removeChild(l),fo(Z,0,0)?yn(t,Z,0,0):e.endsWith("column")?fo(Z,0,1)?yn(t,Z,0,1):t.position=t.offsetOf(r):fo(Z,1,0)?yn(t,Z,1,0):t.position=t.offsetOf(r),[void 0,[0,0]]}}return r&&r.parent instanceof I?[r.parent,r.parentBranch]:[void 0,[0,0]]}function fo(t,e,r){let a=t.getCell(e,r);return!a||a.length!==2?!1:a[1].type==="placeholder"}function Mg(t,e,r,a){let l=e.getCell(r,a);return l?[t.offsetOf(l[0]),t.offsetOf(l[l.length-1])]:-1}function yn(t,e,r,a){let l=Mg(t,e,r,a);typeof l!="number"&&t.setSelection(l)}function ls(t,e,r,a,l){let u=e.getCell(r,a);u&&t.setPositionHandlingPlaceholder(t.offsetOf(u[l==="start"?0:u.length-1]))}function go(t,e){let[r,[a,l]]=_g(t,e);if(r)switch(e){case"after row":r.addRowAfter(a),ls(t,r,a+1,0,"end");break;case"after column":if(r.maxColumns<=r.colCount){t.announce("plonk");return}r.addColumnAfter(l),ls(t,r,a,l+1,"end");break;case"before row":r.addRowBefore(a),ls(t,r,a,0,"start");break;case"before column":if(r.maxColumns<=r.colCount){t.announce("plonk");return}r.addColumnBefore(l),ls(t,r,a,l,"start");break}}function lc(t){var e;let r=t.at(t.position);if(!We(r.parentBranch)&&r.parent!==t.root&&t.root.type!=="root")return t.announce("plonk"),!1;if(!t.contentWillChange({inputType:"insertText"}))return!1;if((e=t.parentEnvironment)!=null&&e.isMultiline){t.selectionIsCollapsed||t.deleteAtoms(le(t.selection));let[a,l]=vg(t),u=t.extractAtoms([t.position,t.offsetOf(l)]),d=t.extractAtoms([t.offsetOf(a),t.position]),g=a.parent,[E,P]=a.parentBranch;return g.setCell(E,P,d),go(t,"after row"),g.setCell(E+1,P,u),t.position=t.offsetOf(g.getCell(E+1,P)[0]),t.contentDidChange({inputType:"insertText"}),!0}return go(t,"after row"),t.contentDidChange({inputType:"insertText"}),!0}function wg(t){return t.contentWillChange({inputType:"insertText"})?(go(t,"before row"),t.contentDidChange({inputType:"insertText"}),!0):!1}function cc(t){return t.contentWillChange({inputType:"insertText"})?(go(t,"after column"),t.contentDidChange({inputType:"insertText"}),!0):!1}function kg(t){return t.contentWillChange({inputType:"insertText"})?(go(t,"before column"),t.contentDidChange({inputType:"insertText"}),!0):!1}function uc(t,e){if(!t.contentWillChange({}))return!1;t.mathfield.snapshot();let r=".",a=".";switch(e){case"pmatrix":case"pmatrix*":r="(",a=")";break;case"bmatrix":case"bmatrix*":r="[",a="]";break;case"Bmatrix":case"Bmatrix*":r="\\lbrace",a="\\rbrace";break;case"vmatrix":case"vmatrix*":r="\\vert",a="\\vert";break;case"Vmatrix":case"Vmatrix*":r="\\Vert",a="\\Vert";break;case"matrix":case"matrix*":r=".",a=".";break;case"cases":case"dcases":r="\\lbrace";break;case"rcases":a="\\rbrace";break}let l=t.at(t.position),u=l.type==="array"?l:t.parentEnvironment;return u.environmentName=e,u.leftDelim=r,u.rightDelim=a,t.contentDidChange({}),!0}function vp(t,e){let r=t.at(t.position);for(;r&&!(Array.isArray(r.parentBranch)&&r.parent instanceof I);)r=r.parent;if(Array.isArray(r?.parentBranch)&&r?.parent instanceof I){let a=r.parent,l=r.parentBranch,u;switch(e){case"row":if(a.rowCount>1){a.removeRow(l[0]);let d=a.getCell(Math.max(0,l[0]-1),l[1]);u=t.offsetOf(d[d.length-1])}break;case"column":if(a.colCount>a.minColumns){a.removeColumn(l[1]);let d=a.getCell(l[0],Math.max(0,l[1]-1));u=t.offsetOf(d[d.length-1])}break}u!==void 0&&t.setPositionHandlingPlaceholder(u)}}function Sg(t){return t.contentWillChange({inputType:"deleteContent"})?(vp(t,"row"),t.contentDidChange({inputType:"deleteContent"}),!0):!1}function Lg(t){return t.contentWillChange({inputType:"deleteContent"})?(vp(t,"column"),t.contentDidChange({inputType:"deleteContent"}),!0):!1}pe({addRowAfter:lc,addColumnAfter:cc,addRowBefore:wg,addColumnBefore:kg,removeRow:Sg,removeColumn:Lg,setEnvironment:uc},{target:"model",canUndo:!0,changeContent:!0,changeSelection:!0});function cs(){return[new Le]}var ds=class VE{constructor(e){this.recording=!1,this.model=e,this.reset()}reset(){this.stack=[],this.index=-1,this.lastOp=""}startRecording(){this.recording=!0}stopRecording(){this.recording=!1}canUndo(){return this.index-1>=0}canRedo(){return this.stack.length-1>this.index}stopCoalescing(e){e&&this.index>=0&&(this.stack[this.index].selection=e),this.lastOp=""}undo(){if(!this.canUndo())return!1;let e=this.stack[this.index-1];return this.index-=1,this.lastOp="",this.model.setState(e,{silenceNotifications:!1,type:"undo"}),!0}redo(){if(!this.canRedo())return!1;let e=this.stack[this.index+1];return this.index+=1,this.lastOp="",this.model.setState(e,{silenceNotifications:!1,type:"redo"}),!0}pop(){this.canUndo()&&(this.stack.splice(this.index,this.stack.length-this.index),this.index-=1)}snapshot(e){return this.recording?(e&&e===this.lastOp&&this.pop(),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index+=1,this.stack.length>VE.maximumDepth&&(this.stack.shift(),this.index-=1),this.lastOp=e??"",!0):!1}};ds.maximumDepth=1e3;var us=ds;function hs(t,e,r){if(t.at(e).mode!=="text")return e;let a=r==="backward"?-1:1,l;if(Wr.test(t.at(e).value)){let u=e,d;do d=t.at(u).mode==="text"&&Wr.test(t.at(u).value),u+=a;while(t.at(u)&&d);l=t.at(u)?u-2*a:u-a}else if(/\s/.test(t.at(e).value)){let u=e;for(;t.at(u)&&t.at(u).mode==="text"&&/\s/.test(t.at(u).value);)u+=a;if(!t.at(u))l=u-a;else{let d=!0;do d=t.at(u).mode==="text"&&!/\s/.test(t.at(u).value),u+=a;while(t.at(u)&&d);l=t.at(u)?u-2*a:u-a}}else{let u=e;for(;t.at(u)&&t.at(u).mode==="text"&&!/\s/.test(t.at(u).value);)u+=a;l=t.at(u)?u:u-a;let d=!0;for(;t.at(u)&&d;)d=t.at(u).mode==="text"&&/\s/.test(t.at(u).value),d&&(l=u),u+=a;l=t.at(u)?u-2*a:u-a}return l-(a>0?0:1)}function Ir(t,e,r){var a,l,u,d,g,E,P;let Z=t.position;(a=r?.extend)!=null&&a||t.collapseSelection(e);let me=t.at(t.position);if(e==="forward"&&(me.type==="subsup"?(me=me.rightSibling,me||(me=t.at(t.position+1))):me=t.at(t.position+1)),!me)return t.announce("plonk"),!1;let _e=t.offsetOf(me);if(me instanceof $e)_e=hs(t,_e,e);else if(me instanceof ue)if(me.isSuggestion)for(;me&&me instanceof ue;)me.isSuggestion=!1,_e=t.offsetOf(me),me=me.rightSibling;else if(e==="forward"){if(me=me.rightSibling,!me||!(me instanceof ue))return t.announce("plonk"),!1;for(;me&&me instanceof ue&&/[a-zA-Z\*]/.test(me.value);)_e=t.offsetOf(me),me=me.rightSibling}else{if(me=me.leftSibling,!me||!(me instanceof ue))return t.announce("plonk"),!1;for(;me&&me instanceof ue&&/[a-zA-Z\*]/.test(me.value);)_e=t.offsetOf(me),me=me.leftSibling}else if(e==="forward"&&me.type==="mopen"){let He=0;do me.type==="mopen"?He+=1:me.type==="mclose"&&(He-=1),me=me.rightSibling;while(!me.isLastSibling&&He!==0);_e=t.offsetOf(me.leftSibling)}else if(e==="backward"&&me.type==="mclose"){let He=0;do me.type==="mopen"?He+=1:me.type==="mclose"&&(He-=1),me=me.leftSibling;while(!me.isFirstSibling&&He!==0);_e=t.offsetOf(me)}else if(e==="backward")if(me.type==="first")for(;_e>0&&me.type==="first";)_e-=1,me=t.at(_e);else{let He=me.type;me.type==="subsup"&&(_e=t.offsetOf(t.at(_e).leftSibling)),_e-=1;let Xe=(l=t.at(_e))==null?void 0:l.type;for(;_e>=0&&Xe===He;)((u=t.at(_e))==null?void 0:u.type)==="subsup"?_e=t.offsetOf(t.at(_e).leftSibling):_e-=1,Xe=t.at(_e).type}else{let{type:He}=me,Xe=(d=t.at(_e))==null?void 0:d.type,{lastOffset:wt}=t;for(;_e<=wt&&(Xe===He||Xe==="subsup");){for(;((g=t.at(_e).rightSibling)==null?void 0:g.type)==="subsup";)_e=t.offsetOf(t.at(_e).rightSibling);_e+=1,Xe=(E=t.at(_e))==null?void 0:E.type}_e-=1}if((P=r?.extend)!=null&&P){if(!t.setSelection(t.anchor,_e))return t.announce("plonk"),!1}else{if(_e===t.position)return t.announce("plonk"),!1;t.position=_e}return t.announce("move",Z),t.mathfield.stopCoalescingUndo(),!0}function ot(t,e,r){var a,l;if(r=r??{extend:!1},t.mathfield.styleBias=e==="backward"?"right":"left",e!=="forward"){let[g,E]=es(t);g!==void 0&&E!==void 0&&t.deleteAtoms([g,E])}if(e==="upward")return Cg(t,r);if(e==="downward")return Eg(t,r);if(r.extend){let g=ms(t,t.position,e);g<0&&(g=0),g>t.lastOffset&&(g=t.lastOffset);let E=t.setSelection(t.anchor,g);return t.mathfield.stopCoalescingUndo(),E}if(t.selectionIsPlaceholder){t.collapseSelection(e);let g=ot(t,e);return t.mathfield.stopCoalescingUndo(),g}let u=t.position,d=u;if(t.collapseSelection(e)?(u=t.position,_p(t,u)||(u=ms(t,u,e))):u=ms(t,u,e),u<0||u>t.lastOffset){let g=!0;return t.silenceNotifications||(g=(l=(a=t.mathfield.host)==null?void 0:a.dispatchEvent(new CustomEvent("move-out",{detail:{direction:e},cancelable:!0,bubbles:!0,composed:!0})))!=null?l:!0),g&&t.announce("plonk"),g}return t.setPositionHandlingPlaceholder(u),t.mathfield.stopCoalescingUndo(),t.announce("move",d),!0}function ms(t,e,r){return e=e+(r==="forward"?1:-1),e<0||e>t.lastOffset||_p(t,e)?e:ms(t,e,r)}function _p(t,e){var r;let a=t.at(e),l=a.parent;for(;l&&!l.inCaptureSelection;)l=l.parent;return!(l!=null&&l.inCaptureSelection||(r=a.parent)!=null&&r.skipBoundary&&(!a.isFirstSibling&&a.isLastSibling||a.type==="first")||t.mathfield.hasEditablePrompts&&!a.parentPrompt)}function Ag(t,e,r){let a=1/0,l=0;for(;l<e.length;l++){let u=e[l],d=t.getHTMLElement(u);if(!d)continue;let g=Il(d).right,E=Math.abs(r-g);if(E<=a)a=E;else break}return e[l-1]}function ps(t,e,r,a,l){let u=t.mathfield.hasEditablePrompts,d=u?r.filter(P=>P.type==="prompt"&&!P.captureSelection):r,g=Il(t.mathfield.getHTMLElement(e)).right,E=t.offsetOf(Ag(t.mathfield,d,g))-(u?1:0);if(a){let[P,Z]=t.selection.ranges[0],me;E<(l==="up"?P:Z)?me={ranges:[[E,Z]],direction:"backward"}:me={ranges:[[P,E]],direction:"forward"},t.setSelection(me)}else t.setPositionHandlingPlaceholder(E);t.announce(`move ${l}`)}function Cg(t,e){var r,a;let l=(r=e?.extend)!=null?r:!1;l||t.collapseSelection("backward");let u=()=>{var E,P;let Z=!0;return t.silenceNotifications||(Z=(P=(E=t.mathfield.host)==null?void 0:E.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))!=null?P:!0),t.announce(Z?"line":"plonk"),Z},d=t.at(t.position),g=d;for(;g&&g.parentBranch!=="below"&&!(Array.isArray(g.parentBranch)&&g.parent instanceof I);)g=g.parent;if(Array.isArray(g?.parentBranch)&&g.parent instanceof I){let E=g.parent;if(g.parentBranch[0]<1)return u();let P=g.parentBranch[0]-1,Z=E.getCell(P,g.parentBranch[1]);if(!Z.some(me=>me.type==="prompt"&&!me.captureSelection)&&t.mathfield.hasEditablePrompts)return u();ps(t,d,Z,l,"up")}else if(g){let E=(a=g.parent.branch("above"))!=null?a:g.parent.createBranch("above");if(!E.some(P=>P.type==="prompt"&&P.placeholderId)&&t.mathfield.hasEditablePrompts)return u();ps(t,d,E,l,"up")}else return u();return t.mathfield.stopCoalescingUndo(),!0}function Eg(t,e){var r,a;let l=(r=e?.extend)!=null?r:!1;l||t.collapseSelection("forward");let u=()=>{var E,P;let Z=!0;return t.silenceNotifications||(Z=(P=(E=t.mathfield.host)==null?void 0:E.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))!=null?P:!0),t.announce(Z?"line":"plonk"),Z},d=t.at(t.position),g=d;for(;g&&g.parentBranch!=="above"&&!(We(g.parentBranch)&&g.parent instanceof I);)g=g.parent;if(We(g?.parentBranch)&&g.parent instanceof I){let E=g.parent;if(g.parentBranch[0]+1>E.rows.length-1)return u();let P=g.parentBranch[0]+1,Z=E.getCell(P,g.parentBranch[1]);if(!Z.some(me=>me.type==="prompt"&&!me.captureSelection)&&t.mathfield.hasEditablePrompts)return u();ps(t,d,Z,l,"down")}else if(g){let E=(a=g.parent.branch("below"))!=null?a:g.parent.createBranch("below");if(!E.some(P=>P.type==="prompt")&&t.mathfield.hasEditablePrompts)return u();ps(t,d,E,l,"down")}else return u();return!0}function mc(t){let e=t.position,r=t.at(e).parent;return r!=null&&r.parent?(t.position=t.offsetOf(r),t.mathfield.stopCoalescingUndo(),t.announce("move",e),!0):(t.announce("plonk"),!1)}function Tg(t){let e=0,r=t.at(t.position),a=!1;for(;r;)(!r.hasEmptyBranch("superscript")||!r.hasEmptyBranch("subscript"))&&(e+=1),r.hasEmptyBranch("superscript")?r.hasEmptyBranch("subscript")||(a=!1):a=!0,r=r.parent;return a?e:0}function Dg(t){let e=0,r=t.at(t.position),a=!1;for(;r;)(!r.hasEmptyBranch("superscript")||!r.hasEmptyBranch("subscript"))&&(e+=1),r.hasEmptyBranch("superscript")?r.hasEmptyBranch("subscript")||(a=!0):a=!1,r=r.parent;return a?e:0}function Mp(t){var e;if(t.collapseSelection(),Tg(t)>=t.mathfield.options.scriptDepth[1])return t.announce("plonk"),!1;let r=t.at(t.position);return r.subsupPlacement===void 0&&(((e=r.rightSibling)==null?void 0:e.type)!=="subsup"&&r.parent.addChildAfter(new er({style:r.style}),r),r=r.rightSibling),r.createBranch("superscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(r.superscript[0]))),!0}function wp(t){var e;if(t.collapseSelection(),Dg(t)>=t.mathfield.options.scriptDepth[0])return t.announce("plonk"),!1;let r=t.at(t.position);return r.subsupPlacement===void 0&&(((e=t.at(t.position+1))==null?void 0:e.type)!=="subsup"&&r.parent.addChildAfter(new er({style:t.at(t.position).style}),r),r=t.at(t.position+1)),r.createBranch("subscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(r.subscript[0]))),!0}function Kg(){function t(E){let P=[],Z=[];return[...E.querySelectorAll(`input, select, textarea, a[href], button,
        [tabindex], audio[controls], video[controls],
        [contenteditable]:not([contenteditable="false"]), details>summary`)].filter(e).forEach((me,_e)=>{let He=a(me);He===0?P.push(me):Z.push({documentOrder:_e,tabIndex:He,node:me})}),Z.sort((me,_e)=>me.tabIndex===_e.tabIndex?me.documentOrder-_e.documentOrder:me.tabIndex-_e.tabIndex).map(me=>me.node).concat(P)}function e(E){return!(!r(E)||l(E)||a(E)<0)}function r(E){return!(E.disabled||E.type==="hidden"&&E.tagName.toUpperCase()==="INPUT"||g(E))}function a(E){var P;let Z=Number.parseInt((P=E.getAttribute("tabindex"))!=null?P:"NaN",10);return Number.isNaN(Z)?E.contentEditable==="true"||(E.nodeName==="AUDIO"||E.nodeName==="VIDEO")&&E.getAttribute("tabindex")===null?0:E.tabIndex:Z}function l(E){return E.tagName.toUpperCase()==="INPUT"&&E.type==="radio"&&!d(E)}function u(E,P){for(let Z of E)if(Z.checked&&Z.form===P)return Z;return null}function d(E){var P;if(!E.name)return!0;let Z=((P=E.form)!=null?P:E.ownerDocument).querySelectorAll('input[type="radio"][name="'+E.name+'"]'),me=u(Z,E.form);return!me||me===E}function g(E){if(!Me()||E===document.activeElement||E.contains(document.activeElement))return!1;if(getComputedStyle(E).visibility==="hidden")return!0;let P=E.getBoundingClientRect();if(P.width===0||P.height===0)return!0;for(;E;){if(getComputedStyle(E).display==="none")return!0;E=E.parentElement}return!1}return Me()?t(document.body):[]}function Te(t,e,r="forward"){let a=t.position;if(Y(e)){let l=t.offsetOf(e[0]),u=t.offsetOf(e[e.length-1]);return r==="forward"?t.setSelection(l,u):t.setSelection(u,l),t.announce("move",a),t.mathfield.stopCoalescingUndo(),!0}return r==="forward"?Te(t,[e.leftSibling,e]):Te(t,[e,e.leftSibling])}function vt(t,e){let r=t.position;if(typeof e=="number"&&(e=t.at(e)),e.type==="prompt")t.setSelection(t.offsetOf(e.firstChild),t.offsetOf(e.lastChild));else{let a=t.offsetOf(e);e.type==="placeholder"?t.setSelection(a-1,a):t.position=a}return t.announce("move",r),t.mathfield.stopCoalescingUndo(),!0}function xn(t,e){var r,a;let l=e==="forward"?1:-1;t.at(t.anchor).type==="placeholder"&&ot(t,e);let u,d=t.at(t.anchor).parentPrompt;d?e==="forward"?u=t.offsetOf(d)+1:u=t.offsetOf(d.leftSibling):u=Math.max(t.position+l,0);let g=dc(t,u,e);if(!g||e==="forward"&&t.offsetOf(g)<u||e==="backward"&&t.offsetOf(g)>u){if(!((a=(r=t.mathfield.host)==null?void 0:r.dispatchEvent(new CustomEvent("move-out",{detail:{direction:e},cancelable:!0,bubbles:!0,composed:!0})))==null||a))return t.announce("plonk"),!1;let E=Kg();if(!document.activeElement||E.length<=1)return t.announce("plonk"),!1;let P=E.indexOf(document.activeElement)+l;return P<0&&(P=E.length-1),P>=E.length&&(P=0),E[P].focus(),t.mathfield.stopCoalescingUndo(),!0}return vt(t,g),!0}function dc(t,e=0,r="forward"){return t.findAtom(a=>a.type==="placeholder"||a.type==="prompt"||!t.mathfield.readOnly&&a.treeDepth>2&&a.isFirstSibling&&a.isLastSibling,e,r)}pe({moveToOpposite:t=>{let e={superscript:"subscript",subscript:"superscript",above:"below",below:"above"},r=t.at(t.position),{parent:a}=r;if(!a)return t.announce("plonk"),!1;let l=r.parentBranch,u;if(typeof l=="string"&&(u=e[l]),!u){let g=r.subsupPlacement?wp(t):Mp(t);return t.mathfield.stopCoalescingUndo(),g}a.branch(u)||a.createBranch(u);let d=t.setSelection(t.getBranchRange(t.offsetOf(a),u));return t.mathfield.stopCoalescingUndo(),d},moveBeforeParent:t=>{let{parent:e}=t.at(t.position);return e?(t.position=t.offsetOf(e),t.mathfield.stopCoalescingUndo(),!0):(t.announce("plonk"),!1)},moveAfterParent:t=>mc(t),moveToNextChar:t=>ot(t,"forward"),moveToPreviousChar:t=>ot(t,"backward"),moveUp:t=>ot(t,"upward"),moveDown:t=>ot(t,"downward"),moveToNextWord:t=>Ir(t,"forward"),moveToPreviousWord:t=>Ir(t,"backward"),moveToGroupStart:t=>{let e=t.offsetOf(t.at(t.position).firstSibling);return e===t.position?(t.announce("plonk"),!1):(t.position=e,t.mathfield.stopCoalescingUndo(),!0)},moveToGroupEnd:t=>{let e=t.offsetOf(t.at(t.position).lastSibling);return e===t.position?(t.announce("plonk"),!1):(t.position=e,t.mathfield.stopCoalescingUndo(),!0)},moveToNextGroup:t=>{var e,r,a,l;if(t.position===t.lastOffset&&t.anchor===t.lastOffset)return xn(t,"forward");let u=t.at(t.position);if(u.mode==="text"){if(t.selectionIsCollapsed){let me=u;for(;me&&me.mode==="text";)me=me.leftSibling;let _e=u;for(;((e=_e.rightSibling)==null?void 0:e.mode)==="text";)_e=_e.rightSibling;if(me&&_e)return Te(t,[me,_e])}if(u.rightSibling.mode==="text"){let me=u;for(;me&&me.mode==="text";)me=me.rightSibling;return me?(vt(t,(r=me.leftSibling)!=null?r:me),t.mathfield.switchMode("math"),!0):vt(t,t.lastOffset)}}let d=t.at(t.anchor).parentPrompt,g=d?t.offsetOf(d)+1:Math.max(t.position+1,0),E=dc(t,g,"forward");if(E&&t.offsetOf(E)<g)return xn(t,"forward");if(E)return vt(t,E);let P=kp(t,u,me=>me.type==="leftright"||me.type==="text","forward");if(P){if(P.mode==="text"){let me=P;for(;me&&me.mode==="text";)me=me.rightSibling;return Te(t,[(a=P.leftSibling)!=null?a:P,(l=me.leftSibling)!=null?l:me])}return Te(t,P)}let Z=u.parent;if(Z){if(Z.type==="leftright"||Z.type==="surd")return Te(t,Z);if(u.parentBranch==="superscript"&&Z.subscript)return Te(t,Z.subscript);if(u.parentBranch==="above"&&Z.below)return Te(t,Z.below);if(u.parentBranch==="superscript"||u.parentBranch==="subscript")return vt(t,Z);if(u.parentBranch==="above"||u.parentBranch==="below")return Te(t,Z)}return vt(t,t.lastOffset)},moveToPreviousGroup:t=>{var e;if(t.position===0&&t.anchor===0)return xn(t,"backward");let r=t.at(t.position),a=r.mode;if(a==="text"){if(t.selectionIsCollapsed){let g=r;for(;g&&g.mode==="text";)g=g.leftSibling;let E=r;for(;((e=E.rightSibling)==null?void 0:e.mode)==="text";)E=E.rightSibling;if(g&&E)return Te(t,[g,E])}for(;r&&r.mode==="text";)r=r.leftSibling;return r?vt(t,r):vt(t,0)}let l=t.at(t.anchor).parentPrompt,u=l?t.offsetOf(l.leftSibling):Math.max(t.position-1,0),d=dc(t,u,"backward");if(d&&t.offsetOf(d)>u)return xn(t,"backward");if(d)return vt(t,d);if(a==="math"){let g=kp(t,r,P=>P.type==="leftright"||P.type==="text","backward");if(g){if(g.mode==="text"){let P=g;for(;P&&P.mode==="text";)P=P.leftSibling;return Te(t,[g,P])}return Te(t,g)}let E=r.parent;if(E){if(E.type==="leftright"||E.type==="surd")return Te(t,E);if(r.parentBranch==="subscript"&&E.superscript)return Te(t,E.superscript);if(r.parentBranch==="below"&&E.above)return Te(t,E.above);if(r.parentBranch==="superscript"||r.parentBranch==="subscript")return vt(t,E);if(r.parentBranch==="above"||r.parentBranch==="below")return Te(t,E)}return vt(t,0)}return!1},moveToMathfieldStart:t=>t.selectionIsCollapsed&&t.position===0?(t.announce("plonk"),!1):(t.position=0,t.mathfield.stopCoalescingUndo(),!0),moveToMathfieldEnd:t=>t.selectionIsCollapsed&&t.position===t.lastOffset?(t.announce("plonk"),!1):(t.position=t.lastOffset,t.mathfield.stopCoalescingUndo(),!0),moveToSuperscript:Mp,moveToSubscript:wp},{target:"model",changeSelection:!0});pe({moveToNextPlaceholder:t=>xn(t,"forward"),moveToPreviousPlaceholder:t=>xn(t,"backward")},{target:"model",changeSelection:!0,audioFeedback:"return"});function kp(t,e,r,a){if(a==="forward"){let u=e.rightSibling;for(;u&&!r(u);)u=u.rightSibling;return u}let l=e.leftSibling;for(;l&&!r(l);)l=l.leftSibling;return l}function fs(t,e,r){typeof e=="function"&&(r=e,e=1/0),e===void 0&&(e=1/0);let a=t.position,l=!1,u="";for(;!l;){let d=t.at(a);l=e===0||d===void 0||d.type==="first"||d.mode!=="math"||!(d.type&&/mord|mpunct|operator/.test(d.type)||d.type==="mop"&&/[a-zA-Z ]+/.test(d.value))||!d.hasEmptyBranch("superscript")||!d.hasEmptyBranch("subscript")||typeof r=="function"&&!r(d),l||(d.mode="text",d.command=d.value,d.verbatimLatex=void 0,u+=d.value),a-=1,e-=1}t.contentDidChange({data:u,inputType:"insertText"})}function bi(t,e,r){typeof e=="function"&&(r=e,e=1/0),e===void 0&&(e=1/0);let a=t.position,l=!1,u=[];for(;!l;){let d=t.at(a);l=e===0||!d||d.type==="first"||d.isFirstSibling||d.mode!=="text"||d.value===" "||typeof r=="function"&&!r(d),l||(u.push(b.serialize([d],{defaultMode:"math"})),d.mode="math"),a-=1,e-=1}gs(t),t.contentDidChange({data:R(u),inputType:"insertText"})}function gs(t){var e;let r=t.position-1;for(;r>=0&&((e=t.at(r))==null?void 0:e.mode)==="math";)r-=1;if(!(r<0)&&t.at(r).mode==="text"&&t.at(r).value===" "&&t.at(r-1).mode==="math"){t.at(r-1).parent.removeChild(t.at(r-1));let a=t.silenceNotifications;t.silenceNotifications=!0,t.position-=1,t.silenceNotifications=a,t.contentDidChange({inputType:"deleteContent"})}}function Og(t){let e="",r=t.position,a=!1;for(;!a;){let l=t.at(r);a=!(l&&(l.mode==="text"||l.mode==="math"&&l.type&&/mord|mpunct/.test(l.type))),a||(e=l.value+e),r-=1}return e}function Sp(t,e,r){let{model:a}=t;if(a.mode==="latex"||!a.at(a.position).isLastSibling||!r||!Kr(r))return!1;let l=Or(r);if(!a.selectionIsCollapsed)return!!(t.model.mode==="text"&&/[/_^]/.test(l));let u=Og(a)+l;if(t.model.mode==="text"){if(e==="Esc"||/[/\\]/.test(l))return!0;if(/[\^_]/.test(l))return/(^|\s)[a-zA-Z][^_]$/.test(u)&&bi(a,1),!0;let d={")":"(","}":"{","]":"["}[l],{parent:g}=a.at(a.position);if(d&&g instanceof G&&g.leftDelim===d)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(u))return!1;if(/[$]/u.test(l))return!0;if(/(^|[^a-zA-Z'])[a-zA-Z] $/.test(u))return bi(a,1),!1;if(/\D\.[^\d\s]$/.test(u)){bi(a,1);let E=a.at(a.position);return E.value="",E.style.variant="normal",E.command="\\cdot",E.verbatimLatex=void 0,a.contentDidChange({data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(u)||/\.\d$/.test(u)||/\([\d+\-.]$/.test(u))return bi(a,1),!0;if(/\([a-z][,;]$/.test(u))return bi(a,2),!0;if(/[\d+\-=><*|]$/.test(l))return gs(a),!0}else{if(e==="[Space]")return fs(a,void 0,d=>/[a-z][:,;.]$/.test(d.value)),!0;if(/[a-zA-Z]{3,}$/.test(u)&&!/(dxd|abc|xyz|uvw)$/.test(u))return fs(a,void 0,d=>/[a-zA-Z]/.test(d.value)),!0;if(/(^|\W)(if)$/i.test(u))return fs(a,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(u)&&!/()$/.test(u))return fs(a,void 0,d=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(d.value)),!0;if(l==="?"||l==="."&&!/[\d-+]\.$/.test(u))return!0}return!1}function Lp(t,e){if(!t.isSelectionEditable||!t.keystrokeCaptionVisible)return;let r=Cp(),a=t.element.getBoundingClientRect();r.style.left=`${a.left}px`,r.style.top=`${a.top-64}px`,r.innerHTML=globalThis.MathfieldElement.createHTML("<span>"+(cn(e)||e)+"</span>"+r.innerHTML),r.style.visibility="visible",setTimeout(()=>{r.childNodes.length>0&&r.childNodes[r.childNodes.length-1].remove(),r.childNodes.length===0&&(r.style.visibility="hidden")},3e3)}function Ap(t){if(t.keystrokeCaptionVisible=!t.keystrokeCaptionVisible,t.keystrokeCaptionVisible){let e=Cp();e.innerHTML=""}else{let e=mi("mathlive-keystroke-caption-panel");e.style.visibility="hidden"}return!1}function Cp(){return document.getElementById("mathlive-keystroke-caption-panel")||(Ve("keystroke-caption"),Ve("core"),mi("mathlive-keystroke-caption-panel"))}function Ep(){document.getElementById("mathlive-keystroke-caption-panel")&&(Pr("mathlive-keystroke-caption-panel"),it("core"),it("keystroke-caption"))}function fc(t,e){var r,a,l,u;let{model:d}=t,g=Qa(e);if(e.isTrusted){Zm(e);let wt=Dr();t.keyboardLayout!==wt.id&&(t.keyboardLayout=wt.id,t._keybindings=void 0)}if(clearTimeout(t.inlineShortcutBufferFlushTimer),t.inlineShortcutBufferFlushTimer=0,Lp(t,g),e.isTrusted&&e.defaultPrevented)return t.flushInlineShortcutBuffer(),!1;let E,P=0,Z="",me=0,_e=t.inlineShortcutBuffer;if(t.isSelectionEditable){if(d.mode==="math")if(g==="[Backspace]")t.undoManager.lastOp==="insert-shortcut"?Z="undo":_e.pop();else if(!Kr(e))t.flushInlineShortcutBuffer();else{let wt=Or(e),Do=[...(a=(r=_e[_e.length-1])==null?void 0:r.keystrokes)!=null?a:[],wt];_e.push({state:d.getState(),keystrokes:Do,leftSiblings:Bg(t)}),P=0;let sr="";for(;!E&&P<Do.length;)me=_e.length-(Do.length-P),sr=Do.slice(P).join(""),E=Gn(_e[me].leftSiblings,sr,t.options.inlineShortcuts),!E&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(sr)&&(E=t.options.onInlineShortcut(t,sr)),P+=1;t.flushInlineShortcutBuffer({defer:!0})}t.options.smartMode&&(E?t.switchMode("math"):Sp(t,g,e)&&(t.switchMode({math:"text",text:"math"}[d.mode]),Z=""))}if(!E){if(Z||(Z=ip(t.keybindings,d.mode,e)),!Z&&(g==="[Enter]"||g==="[Return]")){let wt=!0;return d.contentWillChange({inputType:"insertLineBreak"})&&(t.host&&(wt=t.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),!wt&&e.preventDefault?(e.preventDefault(),e.stopPropagation()):((l=d.parentEnvironment)!=null&&l.isMultiline&&t.executeCommand("addRowAfter"),d.contentDidChange({inputType:"insertLineBreak"}))),wt}if((!Z||g==="[Space]")&&d.mode==="math"){if(g==="[Space]"){if(t.styleBias="none",t.flushInlineShortcutBuffer(),t.options.mathModeSpace)return V.insert(d,t.options.mathModeSpace,{format:"latex",mode:"math"}),t.snapshot("insert-space"),Z="",t.dirty=!0,t.scrollIntoView(),e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1;let wt=d.at(d.position+1),Do=d.at(d.position-1);if(wt?.mode==="text"||Do?.mode==="text")return V.insert(d," ",{mode:"text"}),t.snapshot("insert-space"),t.dirty=!0,t.scrollIntoView(),!1}(u=d.at(d.position))!=null&&u.isDigit()&&globalThis.MathfieldElement.decimalSeparator===","&&Or(e)===","&&(Z="insertDecimalSeparator")}}if(!E&&!Z){if(d.mathfield.smartFence){if(hc(d,Or(e),rr(t)))return t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}else{let{parent:wt}=d.at(d.position);if(wt instanceof G&&wt.rightDelim==="?"&&d.at(d.position).isLastSibling&&/^[)}\]|]$/.test(g))return t.snapshot(),wt.isDirty=!0,wt.rightDelim=g,d.position+=1,d.selectionDidChange(),d.contentDidChange({data:Or(e),inputType:"insertText"}),t.snapshot("insert-fence"),t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1;if(!d.selectionIsCollapsed){let Do=Or(e);if(Do==="("||Do==="{"||Do==="["){let sr={"(":"(","{":"\\lbrace","[":"\\lbrack"}[Do],Ko={"(":")","{":"\\rbrace","[":"\\rbrack"}[Do],[Bs,th]=le(d.selection);return t.snapshot(),d.position=th,V.insert(d,Ko,{format:"latex"}),d.position=Bs,V.insert(d,sr,{format:"latex"}),d.setSelection(Bs+1,th+1),d.contentDidChange({data:Do,inputType:"insertText"}),t.snapshot("insert-fence"),t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}}}return!0}let He=d.at(Math.max(d.position,d.anchor)),{parent:Xe}=He;if(Z==="moveAfterParent"&&Xe?.type==="leftright"&&He.isLastSibling&&t.options.smartFence&&hc(d,".",t.defaultStyle)&&(Z="",U(t)),t.keyboardDelegate.cancelComposition(),Z)t.executeCommand(Z);else if(E){let wt=rr(t);d.setState(_e[me].state);let Do=_e[_e.length-1].keystrokes;Do=Do.slice(P-1);for(let sr of Do)V.insert(d,sr,{silenceNotifications:!0,style:wt});t.snapshot("insert-shortcut"),d.setState(_e[me].state),d.deferNotifications({content:!0,selection:!0,data:E,type:"insertText"},()=>(V.insert(d,E,{format:"latex",style:wt}),gs(t.model),E.endsWith(" ")&&(t.switchMode("text"),V.insert(d," ",{style:wt,mode:"text"})),t.snapshot(),d.selectionIsCollapsed||t.flushInlineShortcutBuffer(),!0)),t.dirty=!0,d.announce("replacement")}return t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}function bo(t,e,r){let{model:a}=t;if(!t.isSelectionEditable){a.announce("plonk");return}r!=null||(r={}),r.focus&&t.focus(),r.feedback&&globalThis.MathfieldElement.playSound("keypress"),typeof r.mode=="string"&&(t.switchMode(r.mode),t.snapshot());let l=Ta(e),u=window.mathVirtualKeyboard;if(u!=null&&u.isShifted&&(l=typeof l=="string"?l.toUpperCase():l.map(d=>d.toUpperCase())),r.simulateKeystroke){let d=!0;for(let g of l)fc(t,new KeyboardEvent("keypress",{key:g}))&&(d=!1);if(d)return}if(a.mode==="latex")a.deferNotifications({content:!0,selection:!0,data:e,type:"insertText"},()=>{di(t);for(let d of l)V.insert(a,d,{insertionMode:"replaceSelection"});t.snapshot("insert-latex"),Rr(t)});else if(a.mode==="text"){let d=p(p({},Pg(a)),t.defaultStyle);for(let g of l)V.insert(a,g,{style:d,insertionMode:"replaceSelection"});t.snapshot("insert-text")}else if(a.mode==="math")for(let d of l)Rg(t,d);t.dirty=!0,t.scrollIntoView()}function Bg(t){let e=t.model,r=[],a=e.at(Math.min(e.position,e.anchor));for(;a.type!=="first";)r.push(a),a=a.leftSibling;return r}function Rg(t,e){let r=t.model,a={"^":"moveToSuperscript",_:"moveToSubscript"," ":t.options.mathModeSpace?["insert",t.options.mathModeSpace]:"moveAfterParent"}[e];if(a){t.executeCommand(a);return}let l=p({},rr(t));!/[a-zA-Z0-9]/.test(e)&&t.styleBias!=="none"&&(l.variant="normal",l.variantStyle=void 0);let u=r.at(r.position);if(/\d/.test(e)&&t.options.smartSuperscript&&u.parentBranch==="superscript"&&u.parent.type!=="mop"&&u.parent.type!=="operator"&&u.parent.type!=="extensible-symbol"&&u.hasNoSiblings){if(!V.insert(r,e,{style:l,insertionMode:"replaceSelection"})){t.undoManager.pop();return}t.snapshot("insert-mord"),mc(r);return}let d=e;d==="{"?d="\\lbrace":d==="}"?d="\\rbrace":d==="&"?d="\\&":d==="#"?d="\\#":d==="$"?d="\\$":d==="%"?d="\\%":d==="~"?d="\\~":d==="\\"&&(d="\\backslash"),V.insert(r,d,{style:l,insertionMode:"replaceSelection"})&&t.snapshot(`insert-${r.at(r.position).type}`)}function Pg(t){var e,r,a,l;if(t.selectionIsCollapsed)return(r=(e=t.at(t.position))==null?void 0:e.style)!=null?r:{};let u=le(t.selection)[0];return(l=(a=t.at(u+1))==null?void 0:a.style)!=null?l:{}}function hc(t,e,r){var a;if(!e||t.mode!=="math")return!1;let l=t.at(t.position),{parent:u}=l,d={"(":"(",")":")","{":"\\lbrace","}":"\\rbrace","[":"\\lbrack","]":"\\rbrack","|":"|"}[e];if(!d)return!1;let g=Zi[d],E=Xi[d];if(!t.selectionIsCollapsed){t.mathfield.snapshot();let[P,Z]=le(t.selection),me=t.extractAtoms([P,Z]),_e=u.addChildrenAfter([new G("left...right",me,{leftDelim:d,rightDelim:E})],t.at(P));return t.setSelection(t.offsetOf(_e.firstChild),t.offsetOf(_e.lastChild)),t.mathfield.snapshot("insert-fence"),t.contentDidChange({data:d,inputType:"insertText"}),!0}if(d==="|"){let P=u instanceof G?u.leftDelim+u.rightDelim:"";if(P==="\\lbrace\\rbrace"||P==="\\{\\}"||P==="\\lbrace?")return t.mathfield.snapshot(),V.insert(t,"\\,\\middle\\vert\\,",{format:"latex",style:r}),t.mathfield.snapshot("insert-fence"),t.contentDidChange({data:d,inputType:"insertText"}),!0}if(E){if(u instanceof G&&u.firstChild===l&&(u.leftDelim==="?"||u.leftDelim==="."))return u.leftDelim=d,u.isDirty=!0,t.mathfield.snapshot(),t.contentDidChange({data:d,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;if(!(u instanceof G)){let _e=l;for(;_e&&!(_e.type==="mclose"&&_e.value===E);)_e=_e.rightSibling;if(_e){t.mathfield.snapshot();let He=t.extractAtoms([t.offsetOf(l),t.offsetOf(_e)]);return He.pop(),u.addChildrenAfter([new G("left...right",He,{leftDelim:d,rightDelim:E})],l),t.position=t.offsetOf(u.firstChild)+1,t.contentDidChange({data:d,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}}let P=t.offsetOf(l.lastSibling),Z;for(Z=t.position;Z<=P;Z++){let _e=t.at(Z);if(_e instanceof G&&(_e.leftDelim==="?"||_e.leftDelim===".")&&Tp(d,_e.rightDelim))break}let me=t.at(Z);if(Z<=P&&me instanceof G){me.leftDelim=d,t.mathfield.snapshot();let _e=t.extractAtoms([t.position,Z-1]);return _e=_e.filter(He=>He.type!=="first"),me.addChildren(_e,me.parentBranch),t.position+=1,t.contentDidChange({data:d,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}if(u instanceof G&&(u.leftDelim==="?"||u.leftDelim===".")&&Tp(d,u.rightDelim)){u.isDirty=!0,u.leftDelim=d,t.mathfield.snapshot();let _e=t.extractAtoms([t.offsetOf(l.firstSibling),t.position]);for(let He of _e)u.parent.addChildBefore(He,u);return t.contentDidChange({data:d,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}if(!(u instanceof G&&u.leftDelim==="|")){if(d==="("){let _e=t.position-1,He=!1;for(;_e>=0;){let Xe=t.at(_e);if(Xe.type==="first")break;if(Xe.type==="mord"&&Xe.value&&/^[\d]$/.test(Xe.value)){_e-=1;continue}if(Xe.type==="group"&&((a=Xe.body)==null?void 0:a.length)===2&&Xe.body[0].type==="first"&&Xe.body[1].value===","){He=!0;break}if(Xe.type==="mord"&&(Xe.value===","||Xe.value===".")){He=!0;break}break}if(He)return!1}if(t.mathfield.snapshot(),V.insert(t,`\\left${d}\\right?`,{format:"latex",style:r}),l.lastSibling.type!=="first"){let _e=t.offsetOf(l.lastSibling),He=t.extractAtoms([t.position,_e]);t.at(t.position).body=He,t.position-=1}return t.mathfield.snapshot("insert-fence"),!0}}if(g){if(d===")"){let Xe=t.position-1,wt=!1;for(;Xe>=0;){let Do=t.at(Xe);if(Do.type==="first")break;if(Do.type==="mord"&&Do.value&&/^[\d]$/.test(Do.value)){wt=!0,Xe-=1;continue}break}if(wt&&t.at(Xe).type==="mopen"&&t.at(Xe).value==="(")return!1}let P=l;for(;P;){if(P.type==="mopen"&&P.value===g){t.mathfield.snapshot();let Xe=P.leftSibling,wt=t.extractAtoms([t.offsetOf(P.leftSibling),t.offsetOf(l)]);[,...wt]=wt;let Do=new G("left...right",wt,{leftDelim:g,rightDelim:d});return u.addChildrenAfter([Do],Xe),t.position=t.offsetOf(Do),t.contentDidChange({data:d,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}P=P.leftSibling}if(u instanceof G&&l.isLastSibling&&pc(u.leftDelim,d))return t.mathfield.snapshot(),u.isDirty=!0,u.rightDelim=d,t.position+=1,t.contentDidChange({data:d,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;let Z=t.offsetOf(l.firstSibling),me;for(me=t.position;me>=Z;me--){let Xe=t.at(me);if(Xe instanceof G&&(Xe.rightDelim==="?"||Xe.rightDelim===".")&&pc(Xe.leftDelim,d))break}let _e=t.at(me);if(me>=Z&&_e instanceof G)return t.mathfield.snapshot(),_e.rightDelim=d,_e.addChildren(t.extractAtoms([me,t.position]),_e.parentBranch),t.contentDidChange({data:d,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;if(u instanceof G&&(u.rightDelim==="?"||u.rightDelim===".")&&pc(u.leftDelim,d))return t.mathfield.snapshot(),u.isDirty=!0,u.rightDelim=d,u.parent.addChildren(t.extractAtoms([t.position,t.offsetOf(l.lastSibling)]),u.parentBranch),t.position=t.offsetOf(u),t.contentDidChange({data:d,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;let He=u.parent;return He instanceof G&&(He.rightDelim==="?"||He.rightDelim===".")&&t.at(t.position).isLastSibling?(t.position=t.offsetOf(He),hc(t,d,r)):!1}return!1}function pc(t,e){return t?["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(t)?[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(e):Xi[t]===e:!0}function Tp(t,e){return e?[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(e)?["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(t):Zi[e]===t:!0}pe({undo:t=>(t.undo(),!0),redo:t=>(t.redo(),!0),scrollIntoView:t=>(t.scrollIntoView(),!0),scrollToStart:t=>(t.field.scroll(0,0),!0),scrollToEnd:t=>{let e=t.field.getBoundingClientRect();return t.field.scroll(e.left-window.scrollX,0),!0},toggleKeystrokeCaption:Ap,toggleContextMenu:t=>{let e=t.toggleContextMenu();return e||t.model.announce("plonk"),e},plonk:t=>(t.model.announce("plonk"),!0),switchMode:(t,e,r,a)=>(t.switchMode(e,r,a),!0),insert:(t,e,r)=>t.insert(e,r),typedText:(t,e,r)=>(bo(t,e,r),!0),insertDecimalSeparator:t=>{let e=t.model;return e.mode==="math"&&globalThis.MathfieldElement.decimalSeparator===","&&e.at(Math.max(e.position,e.anchor)).isDigit()?(t.insert("{,}",{format:"latex"}),t.snapshot("insert-mord"),!0):(t.insert("."),!0)},commit:t=>{var e,r;let a=t.model;return a.contentWillChange({inputType:"insertLineBreak"})&&((e=t.host)==null||e.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),(r=a.parentEnvironment)!=null&&r.isMultiline&&t.executeCommand("addRowAfter"),a.contentDidChange({inputType:"insertLineBreak"})),!0},insertPrompt:(t,e,r)=>{let a=t.getPrompts(),l="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36),u=0;for(;a.includes(l)&&u<100;){if(u===99)return console.error("could not find a unique ID after 100 tries"),!1;l="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36),u++}return t.insert(`\\placeholder[${e??l}]{}`,r),!0}});pe({copyToClipboard:t=>(t.focus(),t.model.selectionIsCollapsed&&t.select(),"queryCommandSupported"in document&&document.queryCommandSupported("copy")&&document.execCommand("copy")||t.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1)},{target:"mathfield"});pe({cutToClipboard:t=>(t.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("cut")&&document.execCommand("cut")||t.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:t=>(t.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("paste")?(document.execCommand("paste"),!0):(navigator.clipboard.readText().then(e=>{e&&t.model.contentWillChange({inputType:"insertFromPaste",data:e})?(t.stopCoalescingUndo(),t.stopRecording(),t.insert(e,{mode:t.model.mode})&&(Rr(t),t.startRecording(),t.snapshot("paste"),t.model.contentDidChange({inputType:"insertFromPaste"}),U(t))):t.model.announce("plonk"),t.startRecording()}),!0))},{target:"mathfield",canUndo:!0,changeContent:!0,changeSelection:!0});function bs(t){let[e,r]=le(t.selection);if(e=Dp(t,e,"backward"),r=Dp(t,r,"forward"),e===r){let a=t.at(e);if(a.type==="leftright")return t.setSelection(t.offsetOf(a.firstChild)-1,r);if(a.type==="first"&&(a.parent.type==="leftright"||a.parent.type==="surd"))return t.setSelection(e-1,t.offsetOf(a.parent.lastChild)+1);t.setSelection(e-1,r)}else t.setSelection(e,r);return!0}function Dp(t,e,r){var a,l,u;let d=t.at(e);if(!d)return e;let g=r==="forward"?1:-1;if(d.mode==="text"){for(;d&&!(d.mode!=="text"||!Wr.test(d.value));)e+=g,d=t.at(e);return r==="backward"?e-1:e}if(d.mode==="latex"){if(/[a-zA-Z\*]/.test(d.value))if(r==="backward")for(;d&&d.mode==="latex"&&d.value!=="\\"&&/[a-zA-Z]/.test(d.value);)e+=g,d=t.at(e);else for(;d&&d.mode==="latex"&&/[a-zA-Z\*]/.test(d.value);)e+=g,d=t.at(e);else if(d.value==="{"){if(r==="forward"){for(;d&&d.mode==="latex"&&d.value!=="}";)e+=g,d=t.at(e);return e}return e-1}else if(d.value==="}"){if(r==="backward"){for(;d&&d.mode==="latex"&&d.value!=="{";)e+=g,d=t.at(e);return e-1}return e}return e-1}if(d.mode==="math"){if(d.isDigit()){for(;(a=t.at(e+g))!=null&&a.isDigit();)e+=g;return r==="backward"?e-1:e}if(d.style.variant||d.style.variantStyle){let E=(l=t.at(e))==null?void 0:l.style;for(;E&&E.variant===d.style.variant&&E.variantStyle===d.style.variantStyle;)E=(u=t.at(e+g))==null?void 0:u.style,e+=g;return r==="backward"?e-1:e}return e}return e}pe({selectGroup:t=>{let e=bs(t);return e||t.announce("plonk"),e},selectAll:t=>t.setSelection(0,t.lastOffset),extendSelectionForward:t=>ot(t,"forward",{extend:!0}),extendSelectionBackward:t=>ot(t,"backward",{extend:!0}),extendToNextWord:t=>Ir(t,"forward",{extend:!0}),extendToPreviousWord:t=>Ir(t,"backward",{extend:!0}),extendSelectionUpward:t=>ot(t,"upward",{extend:!0}),extendSelectionDownward:t=>ot(t,"downward",{extend:!0}),extendToNextBoundary:t=>Ir(t,"forward",{extend:!0}),extendToPreviousBoundary:t=>Ir(t,"backward",{extend:!0}),extendToGroupStart:t=>{let e=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).firstSibling));return e||t.announce("plonk"),e},extendToGroupEnd:t=>{let e=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).lastSibling));return e||t.announce("plonk"),e},extendToMathFieldStart:t=>{let e=t.setSelection(t.anchor,0);return e||t.announce("plonk"),e},extendToMathFieldEnd:t=>{let e=t.setSelection(t.anchor,t.lastOffset);return e||t.announce("plonk"),e}},{target:"model",changeSelection:!0});var yi=null,yo=0,xi=class ay{static start(e,r,a,l){var u;ay.element=e,(u=ay.controller)==null||u.abort(),ay.controller=new AbortController;let d={signal:ay.controller.signal};"PointerEvent"in window?(e.addEventListener("pointermove",a,d),e.addEventListener("pointerup",l,d),e.addEventListener("pointercancel",l,d),gc(r)&&(ay.pointerId=r.pointerId,e.setPointerCapture(r.pointerId))):(window.addEventListener("mousemove",a,d),window.addEventListener("blur",l,d),window.addEventListener("mouseup",l,d))}static stop(){var e;(e=ay.controller)==null||e.abort(),ay.controller=void 0,typeof ay.pointerId=="number"&&(ay.element.releasePointerCapture(ay.pointerId),ay.pointerId=void 0)}};function gc(t){return t!==null&&globalThis.PointerEvent!==void 0&&t instanceof PointerEvent}function yc(t,e){var r;if(e.buttons>1)return;t.atomBoundsCache=new Map;let a=t,l,u=!1,d=!1,g="none",E=!1,P=!1,Z=e.clientX,me=e.clientY,_e=Date.now(),He=a.field,Xe=setInterval(()=>{E?He.scroll({top:0,left:He.scrollLeft-16}):P&&He.scroll({top:0,left:He.scrollLeft+16})},32);function wt(){xi.stop(),u=!1,clearInterval(Xe),t.element.classList.remove("tracking"),e&&e.preventDefault()}function Do(Ko){if(!a.hasFocus()){wt();return}let Bs=Ko.clientX,th=Ko.clientY,pf=gc(Ko)&&Ko.pointerType==="touch"?20:5;if(Date.now()<_e+500&&Math.abs(Z-Bs)<pf&&Math.abs(me-th)<pf){Ko.preventDefault(),Ko.stopPropagation();return}let _h=He.getBoundingClientRect();P=Bs>_h.right,E=Bs<_h.left;let cf=l;gc(Ko)&&(Ko.isPrimary||(cf=xo(a,Ko.clientX,Ko.clientY,{bias:0})));let df=xo(a,Bs,th,{bias:Bs<=Z?Bs===Z?0:-1:1});cf>=0&&df>=0&&(a.model.extendSelectionTo(cf,df),U(t)),d&&bs(a.model)}yi&&Math.abs(yi.x-Z)<5&&Math.abs(yi.y-me)<5&&Date.now()<yi.time+500?(yo+=1,yi.time=_e):(yi={x:Z,y:me,time:_e},yo=1);let sr=He.getBoundingClientRect();if(Z>=sr.left&&Z<=sr.right&&me>=sr.top&&me<=sr.bottom){if(t.flushInlineShortcutBuffer(),l=xo(t,Z,me,{bias:0}),l!==t.model.anchor&&(t.defaultStyle={},t.styleBias="left"),l>=0){if(t.element.classList.add("tracking"),e.shiftKey){let Ko=t.model.selectionIsCollapsed;t.model.extendSelectionTo(t.model.anchor,l),Zl(t.model)||Ko?g="all":g="selection"}else t.model.at(l).type==="placeholder"?(t.model.setSelection(l-1,l),g="selection"):((r=t.model.at(l).rightSibling)==null?void 0:r.type)==="placeholder"?(t.model.setSelection(l,l+1),g="selection"):(t.model.position=l,Zl(t.model)?g="all":g="selection");e.detail===3||yo>2?(wt(),(e.detail===3||yo===3)&&(t.model.selection={ranges:[[0,t.model.lastOffset]]},g="all")):u||(u=!0,xi.start(He,e,Do,wt),(e.detail===2||yo===2)&&(d=!0,bs(t.model),g="all"))}t.hasFocus()||(g="none",t.focus({preventScroll:!0}))}else yi=null;t.stopCoalescingUndo(),g!=="none"&&(t.model.selectionIsCollapsed&&(g="all"),U(t)),e.preventDefault()}function zg(t,e,r){if(t>=r.left&&t<=r.right&&e>=r.top&&e<=r.bottom)return 0;let a=t-(r.left+r.right)/2,l=e-(r.top+r.bottom)/2;return a*a+l*l}function bc(t,e,r,a,l){if(!r.id)return[1/0,null];if(e.has(r.id))return e.get(r.id);let u=Ar(t,r);if(!u)return[1/0,null];let d=[1/0,null],g=t.model;if(r instanceof I)for(let E of r.rows)for(let P of E){let Z=[g.offsetOf(P[0]),g.offsetOf(P[P.length-1])],me=hm(t,Z);if(l>=me.top&&l<=me.bottom)for(let _e of P){let He=bc(t,e,_e,a,l);He[0]<=d[0]&&(d=He)}}else if(r.hasChildren&&!r.captureSelection&&a>=u.left&&a<=u.right){let E=r.children;for(let P of E){let Z=bc(t,e,P,a,l);Z[0]<=d[0]&&(d=Z)}}return d[1]||(d=[zg(a,l,u),r]),e.set(r.id,d),d}function Ig(t,e,r){let[,a]=bc(t,new Map,t.model.root,e,r);return a}function xo(t,e,r,a){var l;let u=t.field.querySelector(".ML__latex").getBoundingClientRect();if(!u)return 0;if(e>u.right||r>u.bottom+8)return t.model.lastOffset;if(e<u.left||r<u.top-8)return 0;a=a??{},a.bias=(l=a.bias)!=null?l:0;let d=Ig(t,e,r),g=[],E=d;for(;E;)g.unshift(E),E=E.parent;for(let Z of g)if(Z.captureSelection){d=Z;break}let P=t.model.offsetOf(d);if(P<0)return-1;if(d.leftSibling)if(a.bias===0&&d.type!=="placeholder"){let Z=Ar(t,d);Z&&e<(Z.left+Z.right)/2&&(P=t.model.offsetOf(d.leftSibling))}else a.bias<0&&(P=t.model.offsetOf(d.leftSibling));return P}var xc=class extends V{constructor(){super("math")}onPaste(t,e){if(!e||!t.model.contentWillChange({data:typeof e=="string"?e:null,dataTransfer:typeof e=="string"?null:e,inputType:"insertFromPaste"}))return!1;let r="",a="auto",l=typeof e!="string"?e.getData("application/json+mathlive"):"";if(l)try{let u=JSON.parse(l);if(u&&Array.isArray(u)){t.snapshot();let d=ft(u),{model:g}=t;g.selectionIsCollapsed||g.deleteAtoms(le(g.selection));let E=g.at(g.position);if(E.parent instanceof I){E.parentBranch;let P=[],Z=[];d[0].type==="first"&&d.shift(),d[d.length-1].type==="first"&&d.pop();for(let Xe of d)Xe.type==="first"&&Z.length>0?(P.push(Z),Z=[Xe]):Z.push(Xe);Z.length>0&&P.push(Z);let me=Number(E.parentBranch[0]),_e=Number(E.parentBranch[1]),He=E.parent.maxColumns;for(;E.parent.colCount-_e<P.length&&E.parent.colCount<He;)E.parent.addColumn();E.parent.addChildrenAfter(P[0],E);for(let Xe=1;Xe<P.length;Xe++)_e++,_e>=He&&(_e=0,E.parent.addRowAfter(me),me++),E.parent.setCell(me,_e,P[Xe])}else E.parent.addChildrenAfter(d.filter(P=>P.type!=="first"),E);return g.position=g.offsetOf(d[d.length-1]),g.contentDidChange({inputType:"insertFromPaste"}),U(t),!0}}catch{}if(l=typeof e!="string"?e.getData("application/json"):"",l&&globalThis.MathfieldElement.computeEngine)try{let u=JSON.parse(l);if(typeof u=="object"&&"latex"in u&&u.latex&&(r=u.latex),!r){let d=globalThis.MathfieldElement.computeEngine.box(u);d&&!d.has("Error")&&(r=d.latex)}r||(a="latex")}catch{}if(!r&&typeof e!="string"&&(r=e.getData("application/x-latex"),r&&(a="latex")),r||(r=typeof e=="string"?e:e.getData("text/plain")),r){let u;return[u,r]=Ia(r),a==="auto"&&u&&(a="latex"),t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,r,{format:a})&&(t.startRecording(),t.snapshot("paste"),U(t)),t.startRecording(),!0}return!1}insert(t,e,r){var a,l;let u=typeof e=="string"?e:(l=(a=globalThis.MathfieldElement.computeEngine)==null?void 0:a.box(e).latex)!=null?l:"";if(!r.silenceNotifications&&!t.contentWillChange({data:u,inputType:"insertText"}))return!1;r.insertionMode||(r.insertionMode="replaceSelection"),r.selectionMode||(r.selectionMode="placeholder"),r.format||(r.format="auto");let{silenceNotifications:d}=t;r.silenceNotifications&&(t.silenceNotifications=!0);let g=t.silenceNotifications;t.silenceNotifications=!0;let E={"?":"\\placeholder{}","@":"\\placeholder{}"};E[0]=r.insertionMode==="replaceAll"?"":t.getValue(t.selection,"latex-unstyled"),r.insertionMode==="replaceSelection"?t.deleteAtoms(le(t.selection)):r.insertionMode==="replaceAll"?t.deleteAtoms():r.insertionMode==="insertBefore"?t.collapseSelection("backward"):r.insertionMode==="insertAfter"&&t.collapseSelection("forward"),!t.at(t.position).isLastSibling&&t.at(t.position+1).type==="placeholder"?t.deleteAtoms([t.position,t.position+1]):t.at(t.position).type==="placeholder"&&t.deleteAtoms([t.position-1,t.position]);let P=-1;E[0]?E["@"]=E[0]:typeof e=="string"&&/(^|[^\\])#@/.test(e)&&(P=Ng(t),P>=0&&(E["@"]=t.getValue(P,t.position,"latex"))),E[0]||(E[0]=E["?"]);let Z=!1,me=Do=>(Z=!0,E[Do]),[_e,He]=Kp(t,e,me,r);if(!He)return!1;let Xe=He.length===1&&He[0].type==="genfrac";if(Xe&&P>=0&&typeof t.mathfield.options.isImplicitFunction=="function"&&t.mathfield.options.isImplicitFunction(t.at(t.position).command)?(E["@"]=E["?"],Z=!1,[_e,He]=Kp(t,e,me,r)):P>=0&&t.deleteAtoms([P,t.position]),He.length===1&&He[0].isRoot)t.root=He[0];else{let{parent:Do}=t.at(t.position),sr=Do.hasEmptyBranch("body");if(Xe&&_e!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&Do instanceof G&&Do.leftDelim==="("&&sr){let Bs=Do.parent,th=Do.parentBranch;Bs.removeChild(Do),Bs.setChildren(He,th)}let Ko=t.at(t.position);Ko.parent.addChildrenAfter(He,Ko),_e==="latex"&&typeof e=="string"&&Do?.type==="root"&&sr&&!Z&&(Do.verbatimLatex=e)}t.silenceNotifications=g;let wt=He[He.length-1];if(r.selectionMode==="placeholder"){let Do=He.flatMap(sr=>[sr,...sr.children]).find(sr=>sr.type==="placeholder");if(Do){let sr=t.offsetOf(Do);t.setSelection(sr-1,sr),t.announce("move")}else if(wt){let sr=wt.body,Ko=wt.hasEmptyBranch("body");sr&&Ko?t.setSelection(t.offsetOf(sr[0]),t.offsetOf(sr[sr.length-1])+1):t.position=t.offsetOf(wt)}}else r.selectionMode==="before"||(r.selectionMode==="after"?wt&&(t.position=t.offsetOf(wt)):r.selectionMode==="item"&&t.setSelection(t.anchor,t.offsetOf(wt)));return t.contentDidChange({data:u,inputType:"insertText"}),t.silenceNotifications=d,!0}};function Kp(t,e,r,a){var l;let u,d=[];if(typeof e!="string"||a.format==="math-json"){let g=globalThis.MathfieldElement.computeEngine;if(!g)return["math-json",[]];[u,e]=["latex",g.box(e).latex],d=he(e,{context:t.mathfield.context})}else typeof e=="string"&&a.format==="ascii-math"?([u,e]=Yt(e,{format:"ascii-math",inlineShortcuts:t.mathfield.options.inlineShortcuts}),d=he(e,{context:t.mathfield.context}),u!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&(d=d.map(g=>ys(g)))):(a.format==="auto"||(l=a.format)!=null&&l.startsWith("latex"))&&(a.format==="auto"&&([u,e]=Yt(e,{format:"auto",inlineShortcuts:t.mathfield.options.inlineShortcuts})),a.format==="latex"&&([,e]=Ia(e)),d=he(e,{context:t.mathfield.context,args:r}),a.format!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&(d=d.map(g=>ys(g))));return Qn(d,a.style),[u??"latex",d]}function ys(t){var e;if(t instanceof G&&t.leftDelim!=="("&&t.rightDelim===")"){let r=(e=t.body)==null?void 0:e.filter(a=>a.type!=="first");if(r?.length===1&&r[0].type==="genfrac")return r[0]}for(let r of t.branches)t.hasEmptyBranch(r)||t.setChildren(t.branch(r).map(a=>ys(a)),r);return t instanceof I&&t.forEachCell((r,a,l)=>{t.setCell(a,l,r.map(u=>ys(u)))}),t}function Ng(t){let e=t.at(t.position);if(e.mode==="text"){for(;!e.isFirstSibling&&e.mode==="text";)e=e.leftSibling;return t.offsetOf(e)}let r=e,a=!1;if(e.type==="mclose"){let l=Zi[e.value];for(;!e.isFirstSibling&&!(e.type==="mopen"&&e.value===l);)e=e.leftSibling;e.isFirstSibling||(e=e.leftSibling),a=!0}else e.type==="leftright"&&(e=e.leftSibling,a=!0);if(a)for(;!e.isFirstSibling&&(e.isFunction||Op(e));)e=e.leftSibling;else{let l=[];for(;!e.isFirstSibling&&(Op(e)||l.length>0);)e.type==="mclose"&&l.unshift(e.value),e.type==="mopen"&&l.length>0&&e.value===Zi[l[0]]&&l.shift(),e=e.leftSibling}return r===e?-1:t.offsetOf(e)}function Op(t){return t.isDigit()?!0:t.type&&/^(mord|surd|subsup|leftright|mop|mclose)$/.test(t.type)?t.type!=="extensible-symbol":!1}new xc;var vc=class extends V{constructor(){super("text")}onPaste(t,e){if(!e)return!1;let r=typeof e=="string"?e:e.getData("text/plain");return r&&t.model.contentWillChange({inputType:"insertFromPaste",data:r})?(t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,r)&&(t.model.contentDidChange({inputType:"insertFromPaste"}),t.startRecording(),t.snapshot("paste"),U(t)),t.startRecording(),!0):!1}insert(t,e,r={}){if(!t.contentWillChange({data:e,inputType:"insertText"}))return!1;r.insertionMode||(r.insertionMode="replaceSelection"),r.selectionMode||(r.selectionMode="placeholder"),r.format||(r.format="auto");let{silenceNotifications:a}=t;r.silenceNotifications&&(t.silenceNotifications=!0);let l=t.silenceNotifications;t.silenceNotifications=!0,r.insertionMode==="replaceSelection"&&!t.selectionIsCollapsed?t.deleteAtoms(le(t.selection)):r.insertionMode==="replaceAll"?(t.root.setChildren([],"body"),t.position=0):r.insertionMode==="insertBefore"?t.collapseSelection("backward"):r.insertionMode==="insertAfter"&&t.collapseSelection("forward");let u=$g(e,t.mathfield.context);if(Qn(u,r.style),!u)return!1;let d=t.at(t.position),g=d.parent.addChildrenAfter(u,d);return t.silenceNotifications=l,r.selectionMode==="before"||(r.selectionMode==="item"?t.setSelection(t.anchor,t.offsetOf(g)):g&&(t.position=t.offsetOf(g))),t.contentDidChange({data:e,inputType:"insertText"}),t.silenceNotifications=a,!0}};function $g(t,e){return t=t.replace(/\\/g,"\\textbackslash "),t=t.replace(/#/g,"\\#"),t=t.replace(/\$/g,"\\$"),t=t.replace(/%/g,"\\%"),t=t.replace(/&/g,"\\&"),t=t.replace(/_/g,"\\_"),t=t.replace(/{/g,"\\textbraceleft "),t=t.replace(/}/g,"\\textbraceright "),t=t.replace(/lbrace/g,"\\textbraceleft "),t=t.replace(/rbrace/g,"\\textbraceright "),t=t.replace(/\^/g,"\\textasciicircum "),t=t.replace(/~/g,"\\textasciitilde "),t=t.replace(//g,"\\textsterling "),he(t,{context:e,parseMode:"text"})}new vc;function Vt(t){return{value:t.model.getValue(),selectionIsCollapsed:t.model.selectionIsCollapsed,canUndo:t.canUndo(),canRedo:t.canRedo(),style:Fg(t.model),mode:t.model.mode}}function Fg(t){var e;if(t.selectionIsCollapsed)return(e=t.at(t.position))==null?void 0:e.style;let r=t.getAtoms(t.selection);if(r.length===0)return{};let a=p({},r[0].style);for(let l of r)for(let[u,d]of Object.entries(l.style))a[u]!==d&&delete a[u];return a}var ie=4,Pe=20,fe=2*(Pe+ie),xs=(t,e)=>`
  <line x1="${t+Pe}" y1="${e+Pe}" 
    x2="${t>e?t+Pe:7*Pe+10*ie}" 
    y2="${t<e?e+Pe:7*Pe+10*ie}"/>
  <svg id="plus" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.34-3.33,3.34h-6.67v6.66c0,1.84-1.49,3.34-3.33,3.34s-3.34-1.5-3.34-3.34v-6.66h-6.66c-1.84,0-3.34-1.5-3.34-3.34s1.5-3.33,3.34-3.33h6.66v-6.67c0-1.84,1.5-3.33,3.34-3.33s3.33,1.49,3.33,3.33v6.67h6.67c1.84,0,3.33,1.49,3.33,3.33Z"/>
  </svg>`,Bp=(t,e)=>`
  <line x1="${t+Pe}" y1="${e+Pe}" 
    x2="${t>e?t+Pe:7*Pe+10*ie}" 
    y2="${t<e?e+Pe:7*Pe+10*ie}"/>
  <svg id="minus" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.33-3.33,3.33H10c-1.84,0-3.34-1.49-3.34-3.33s1.5-3.34,3.34-3.34h20c1.84,0,3.33,1.5,3.33,3.34Z"/>
  </svg>`,vs=(t,e,r)=>`
  <svg id="arrow" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <g transform="rotate(${r})" transform-origin="20 20">
      <path class="font" d="m17.7,7.23h4.6c.52,0,.94.42.94.94v13.82c0,.52.42.94.94.94h3.39c.83,0,1.25,1.01.66,1.6l-7.56,7.56c-.37.37-.96.37-1.32,0l-7.56-7.56c-.59-.59-.17-1.6.66-1.6h3.39c.52,0,.94-.42.94-.94v-13.82c0-.52.42-.94.94-.94Z"/>
    </g>  
  </svg>`,Vg=`
<svg class="MLEP__array-buttons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
viewBox=
"-2 -2 ${8*Pe+10*ie+5} ${8*Pe+10*ie+5}">
  <rect 
      class="MLEP__array-insert-background rows"
      x="0" 
      y="${fe+ie}" 
      height="${3*fe}" 
      width="${fe}" 
      rx="${fe/2}"/>
      <rect 
      class="MLEP__array-insert-background columns"
      x="${fe+ie}" 
      y="0" 
      height="${fe}" 
      width="${3*fe}" 
      rx="${fe/2}"/>
  <g data-command='"moveDown"'>
  ${vs(2*(ie+fe),2*ie+3*fe,0)}
  </g>
  <g data-command='"moveUp"'>
  ${vs(2*(ie+fe),2*ie+fe,180)}
  </g>
  <g data-command='"moveToNextWord"'>
  ${vs(2*ie+3*fe,2*(ie+fe),-90)}
  </g>
  <g data-command='"moveToPreviousWord"'>
  ${vs(2*ie+fe,2*(ie+fe),90)}
  </g>
  <g>

  <g data-command='"addColumnBefore"'>
  ${xs(2*ie+fe,ie)}
  </g>
  <g data-command='"removeColumn"'>
  ${Bp(2*ie+2*fe,ie)}
  </g>
  <g data-command='"addColumnAfter"'>
  ${xs(2*ie+3*fe,ie)}
  </g>
  <g data-command='"addRowBefore"'>
  ${xs(ie,2*ie+fe)}
  </g>
  <g data-command='"removeRow"'>
  ${Bp(ie,2*ie+2*fe)}
  </g>
  <g data-command='"addRowAfter"'>
    ${xs(ie,2*ie+3*fe)}
  </g>
</svg>`,qg=t=>`
<svg id="matrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","matrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,Hg=t=>`
<svg id="pmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
data-command='["setEnvironment","pmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-3.96,4.6-3.96,11.4,0,16"/>
  <path class="cls-2" d="m22,4c3.96,4.6,3.96,11.4,0,16"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,Rp=t=>`
<svg id="Bmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","Bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <path class="cls-2" d="m22,4c1.1,0,2,.9,2,2v3c0,1.66.9,3,2,3-1.1,0-2,1.34-2,3v3c0,1.1-.9,2-2,2"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,Wg=t=>`
<svg id="bmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4h-3v16h3"/>
  <path class="cls-2" d="m22,4h3v16h-3"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,Ug=t=>`
<svg id="vmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="4" y1="4" x2="4" y2="20"/>
  <line class="cls-2" x1="24" y1="4" x2="24" y2="20"/>
</svg>`,jg=t=>`
<svg id="Vmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="-3.5 -3 35 30" 
  data-command='["setEnvironment","Vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="6" y1="4" x2="6" y2="20"/>
  <line class="cls-2" x1="22" y1="4" x2="22" y2="20"/>
  <line class="cls-2" x1="2" y1="4" x2="2" y2="20"/>
  <line class="cls-2" x1="26" y1="4" x2="26" y2="20"/>
</svg>`,Jg=t=>`
<svg id="cases" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","cases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m10,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <circle cx="13" cy="8" r="1"/>
  <circle cx="13" cy="16" r="1"/>
  <circle cx="21" cy="8" r="1"/>
  <circle cx="21" cy="16" r="1"/>
</svg>`,Gg=t=>`
<svg id="rcases" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","rcases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m18,20c1.1,0,2-.9,2-2v-3c0-1.66.9-3,2-3-1.1,0-2-1.34-2-3v-3c0-1.1-.9-2-2-2"/>
  <circle cx="15" cy="8" r="1"/>
  <circle cx="15" cy="16" r="1"/>
  <circle cx="7" cy="8" r="1"/>
  <circle cx="7" cy="16" r="1"/>
</svg>`,_c={matrix:qg,pmatrix:Hg,bmatrix:Wg,Bmatrix:Rp,vmatrix:Ug,Vmatrix:jg},Mc={cases:Jg,rcases:Gg,Bmatrix:Rp};function Xg(t){var e,r;let a=(e=t.model.parentEnvironment)==null?void 0:e.rows;if(!a)return;let l=0;a.forEach(He=>{(!l||He.length>l)&&(l=He.length)});let u=document.getElementById("mathlive-environment-popover");u||(u=mi("mathlive-environment-popover"),Ve("environment-popover"),Ve("core"),u.setAttribute("aria-hidden","true"));let d,g=u.querySelector(".MLEP__environment-controls");g?d=g:(d=document.createElement("div"),u.innerHTML="",u.appendChild(d)),d.className="MLEP__environment-controls",d.style.display="flex",d.style.width="100%",d.style.height="100%",d.style.boxSizing="border-box",d.innerHTML=Vg;let E=[],P="",Z=t.model.parentEnvironment.environmentName;if(Va(Z)){let He=Zg(Z);P=_c[He]("active");let Xe=_c,{[He]:wt}=Xe,Do=ki(Xe,[Ps(He)]);E=Object.values(Do).map(sr=>sr("inactive"))}else if(Km(Z)){let He=Yg(Z);P=Mc[He]("active");let Xe=Mc,{[He]:wt}=Xe,Do=ki(Xe,[Ps(He)]);E=Object.values(Do).map(sr=>sr("inactive"))}else Om(Z)&&(P=_c.matrix("active"),E=Object.values(Mc).map(He=>He("inactive")));let me=document.createElement("div");me.className="MLEP__environment-delimiter-controls",me.style.display="flex",me.style.flexDirection="column",me.innerHTML=`
  <div class='MLEP__array-delimiter-options'>
  ${P}
  ${E.join("")}
  </div>`,P&&d.appendChild(me),d.querySelectorAll("[data-command]").forEach(He=>{let Xe=He.dataset.command,wt=Xe;try{wt=JSON.parse(Xe)}catch{}He.addEventListener("mousedown",Do=>Do.preventDefault()),wt&&He.addEventListener("click",()=>t.executeCommand(wt))});let _e=(r=t.field)==null?void 0:r.getBoundingClientRect();_e&&(u.style.top=`${window.scrollY+(_e.top-u.clientHeight-15)}px`,u.style.left=`${_e.left+20}px`,u.classList.add("is-visible"))}function _s(){let t=document.getElementById("mathlive-environment-popover");t?.classList.remove("is-visible")}function Pp(){document.getElementById("mathlive-environment-popover")&&(Pr("mathlive-environment-popover"),it("environment-popover"),it("core"))}function vo(t){if(!t.hasFocus())return;let e=!1;if(t.model.mode==="math"){let r=t.model.parentEnvironment;if(r!=null&&r.rows&&Dm(r.environmentName)){let a=t.options.environmentPopoverPolicy;e=a==="auto"||a==="on"}}e?Xg(t):_s()}function Zg(t){return t.replace("*","")}function Yg(t){return t==="dcases"?"cases":t}function Ms(t){let e=getComputedStyle(t).direction;return e==="ltr"||e==="rtl"?e:"ltr"}function kc(t,e,r){return e==="left"||e==="leading"&&r==="ltr"||e==="trailing"&&r==="rtl"?t.left:t.right}function wc(t,e,r,a){return r==="middle"?t-e/2:r==="start"&&a==="rtl"||r==="end"&&a==="ltr"||r==="top"||r==="right"?Math.max(0,t-e):t}function Qg(t,e,r,a){return r==="middle"?t-e/2:r==="start"&&a==="ltr"||r==="end"&&a==="rtl"||r==="top"||r==="right"?t:t-e}function zp(t,e){var r,a,l;let u=(r=Ms(t))!=null?r:"ltr";t.style.position="fixed",t.style.left="",t.style.top="",t.style.right="",t.style.bottom="",t.style.height="",t.style.width="";let d=t.getBoundingClientRect(),g=Number.isFinite(e.maxHeight)?Math.min(e.maxHeight,window.innerHeight):window.innerHeight,E=Math.min(g,(a=e.height)!=null?a:d.height),P=wc(e.location.y,E,e.verticalPos,u);P+E>window.innerHeight-8&&(e.alternateLocation?(P=wc(e.alternateLocation.y,E,e.verticalPos,u),P+E>window.innerHeight-8&&(P=void 0)):P=void 0),Number.isFinite(P)||(P=Math.max(8,window.innerHeight-8-E),8+E>window.innerHeight-8&&(t.style.bottom="8px")),E=Math.min(P+E,window.innerHeight-8)-P;let Z=Number.isFinite(e.maxWidth)?Math.min(e.maxWidth,window.innerWidth):window.innerWidth,me=Math.min(Z,(l=e.width)!=null?l:d.width),_e=wc(e.location.x,me,e.horizontalPos,u);_e+me>window.innerWidth-8&&(e.alternateLocation?(_e=Qg(e.alternateLocation.x,me,e.verticalPos,u),_e+me>window.innerWidth-8&&(_e=void 0)):_e=void 0),Number.isFinite(_e)||(_e=Math.max(8,window.innerWidth-8-me),8+me>window.innerWidth-8&&(t.style.right="8px")),me=Math.min(_e+me,window.innerWidth-8)-_e,u==="rtl"?t.style.right=`${Math.ceil(window.innerWidth-_e-me).toString()}px`:t.style.left=`${Math.ceil(_e).toString()}px`,t.style.top=`${Math.ceil(P).toString()}px`,E!==d.height&&(t.style.height=`${Math.ceil(E).toString()}px`),me!==d.width&&(t.style.width=`${Math.ceil(me).toString()}px`)}function Ip(t,e){return Math.hypot(e.x-t.x,e.y-t.y)}function Nr(t){return"submenu"in t}function _t(t){return"type"in t&&t.type==="command"||"onMenuSelect"in t||"id"in t}function _o(t){return"type"in t&&t.type==="divider"}function ws(t){return"type"in t&&t.type==="heading"}var Np={};function ks(t){let e=Np[t];if(!e){let r;switch(t){case"checkmark":r=`<span aria-hidden="true" class="ui-checkmark"><svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"></path></svg>
      </span>`;break;case"trailing-chevron":r='<span aria-hidden="true" class="ui-trailing-chevron"><svg focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></span>';break;case"mixedmark":r='<span aria-hidden="true" class="ui-mixedmark"><svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256c0-13.3 10.7-24 24-24H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24z"/></svg></span>'}if(r){let a=document.createElement("template");a.innerHTML=r,Np[t]=a,e=a}}if(e){if("content"in e)return e.content.cloneNode(!0);let r=document.createElement("svg");return r.innerHTML=e.innerHTML,r}}var $p=80,vn=class{constructor(t,e){this._className="",this._element=null;var r;this.parentMenu=e,this._declaration=t,Object.freeze(this._declaration),Nr(t)?(this.type="submenu",this.submenu=new _n(t.submenu,{parentMenu:e,submenuClass:t.submenuClass,columnCount:t.columnCount})):this.type=(r=t.type)!=null?r:"command",this.hasCheck=_t(t)&&t.checked!==void 0}get rootMenu(){return this.parentMenu.rootMenu}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}dispose(){var t,e;(t=this._abortController)==null||t.abort(),this._abortController=void 0,(e=this._element)==null||e.remove(),this._element=null,this.submenu&&this.submenu.dispose(),this.submenu=void 0}get menuItem(){return this._declaration}get label(){var t;return(t=this._label)!=null?t:""}set label(t){t===void 0&&(t=""),t!==this._label&&(this._label=t,this.dirty=!0)}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.dirty=!0)}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this.element&&(t?this.element.removeAttribute("aria-disabled"):this.element.setAttribute("aria-disabled","true")),this.dirty=!0}get checked(){return this._checked}set checked(t){this._checked=t,this.dirty=!0}get tooltip(){return this._tooltip}set tooltip(t){t!==this._tooltip&&(this._tooltip=t,this.dirty=!0)}get ariaLabel(){return this._ariaLabel}set ariaLabel(t){t!==this._ariaLabel&&(this._ariaLabel=t,this.dirty=!0)}get active(){var t,e;return(e=(t=this.element)==null?void 0:t.classList.contains("active"))!=null?e:!1}set active(t){this.element&&this.element.classList.toggle("active",t)}updateState(t){var e,r,a;let l=this._declaration;if(_o(l)){this.enabled=!1,this.checked=!1;return}ws(l)&&(this.enabled=!1,this.checked=!1,this.visible=!0),_t(l)&&(this.checked=(e=vi(l.checked,t))!=null?e:!1),(_t(l)||Nr(l))&&(this.enabled=(r=vi(l.enabled,t))!=null?r:!0,this.visible=(a=vi(l.visible,t))!=null?a:!0,this.visible&&this.enabled&&this.submenu&&(this.submenu.updateState(t),this.submenu.visible||(this.visible=!1))),(_t(l)||ws(l)||Nr(l))&&(this.label=vi(l.label,t),this._className=vi(l.class,t),this.tooltip=vi(l.tooltip,t),this.ariaLabel=vi(l.ariaLabel,t)),this._element&&this.updateElement()}set dirty(t){t&&this.parentMenu&&(this.parentMenu.dirty=!0)}updateElement(){var t;if(!this.visible||!this.element)return;let e=this.element;e.textContent="",e.className="",e.className=(t=this._className)!=null?t:"",this.enabled?e.removeAttribute("aria-disabled"):e.setAttribute("aria-disabled","true"),this.checked===!0?(e.setAttribute("aria-checked","true"),e.append(ks("checkmark"))):this.checked==="mixed"?(e.setAttribute("aria-checked","mixed"),e.append(ks("mixedmark"))):e.removeAttribute("aria-checked"),this.ariaLabel&&e.setAttribute("aria-label",this.ariaLabel);let r=document.createElement("span");if(r.className=this.parentMenu.hasCheck?"label indent":"label",this.type==="heading"&&r.classList.add("heading"),r.innerHTML=this.label,e.append(r),this._tooltip&&e.setAttribute("data-tooltip",this._tooltip),_t(this._declaration)&&this._declaration.keyboardShortcut){let a=document.createElement("kbd");a.innerHTML=cn(this._declaration.keyboardShortcut),e.append(a)}this.type==="submenu"&&e.append(ks("trailing-chevron"))}get element(){if(this._element)return this._element;if(_o(this._declaration)){let r=document.createElement("li");return r.setAttribute("part","menu-divider"),r.setAttribute("role","divider"),this._element=r,r}let t=document.createElement("li");this._element=t,(_t(this._declaration)||ws(this._declaration)||Nr(this._declaration))&&t.setAttribute("part","menu-item"),t.setAttribute("tabindex","-1"),this.hasCheck?t.setAttribute("role","menuitemcheckbox"):t.setAttribute("role","menuitem"),this.type==="submenu"&&(t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-expanded","false"));let e=this.abortController.signal;return t.addEventListener("pointerenter",this,{signal:e}),t.addEventListener("pointerleave",this,{signal:e}),t.addEventListener("pointerup",this,{signal:e}),t.addEventListener("click",this,{signal:e}),this._element}dispatchSelect(){var t;if(!_t(this._declaration))return;let e=new CustomEvent("menu-select",{cancelable:!0,bubbles:!0,detail:{modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data}});this.parentMenu.dispatchEvent(e)&&typeof this._declaration.onMenuSelect=="function"&&this._declaration.onMenuSelect({target:(t=this.parentMenu.host)!=null?t:void 0,modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data})}handleEvent(t){var e;if(!(!this.visible||!this.enabled)){if(t.type==="click"){this.rootMenu.state==="modal"&&this.select(),t.stopPropagation(),t.preventDefault();return}if(t.type==="pointerenter"){let r=t;this.rootMenu.cancelDelayedOperation(),this.parentMenu.isSubmenuOpen&&(e=this.parentMenu.activeMenuItem)!=null&&e.movingTowardSubmenu(r)?this.rootMenu.scheduleOperation(()=>{this.parentMenu.activeMenuItem=this,this.openSubmenu()}):(this.parentMenu.activeMenuItem=this,this.openSubmenu({withDelay:!0}));return}if(t.type==="pointerleave"){this.rootMenu.activeSubmenu===this.parentMenu&&(this.parentMenu.activeMenuItem=null);return}if(t.type==="pointerup"){this.rootMenu.state!=="modal"&&this.select(),t.stopPropagation(),t.preventDefault();return}}}select(){if(this.rootMenu.cancelDelayedOperation(),this.type==="submenu"){this.openSubmenu();return}this.active=!1,setTimeout(()=>{this.active=!0,setTimeout(()=>{this.active=!1,this.rootMenu.hide(),this.dispatchSelect()},$p)},$p)}openSubmenu(t){var e;if(this.type!=="submenu"||!this.element)return;if((e=t?.withDelay)!=null&&e){this.rootMenu.scheduleOperation(()=>this.openSubmenu());return}let r=this.element.getBoundingClientRect(),a=Ms(this.element);this.submenu.show({container:this.rootMenu.element.parentNode,location:{x:kc(r,"trailing",a),y:r.top-4},alternateLocation:{x:kc(r,"leading",a),y:r.top-4}})}movingTowardSubmenu(t){if(!this.element||this.type!=="submenu")return!1;let e=this.rootMenu.lastMoveEvent;if(!e)return!1;let r=t.timeStamp-e.timeStamp;if(r>500)return!1;let a=t.clientX-e.clientX;if(eb(a,e.clientY-t.clientY,r)<=.2)return!1;let l="right";if(this.submenu.element){let u=this.submenu.element.getBoundingClientRect(),d=this.element.getBoundingClientRect();u.left<d.left+d.width/2&&(l="left")}return l==="right"?a>0:a<0}};function eb(t,e,r){return Math.hypot(t,e)/r}function vi(t,e){return t===void 0||typeof t!="function"?t:(e!=null||(e={alt:!1,control:!1,shift:!1,meta:!1}),t(e))}var _n=class qx{constructor(e,r){this._element=null,this._activeMenuItem=null,this._dirty=!0;var a,l;this.parentMenu=(a=r?.parentMenu)!=null?a:null,this._submenuClass=r?.submenuClass,this.columnCount=(l=r?.columnCount)!=null?l:1,this.isSubmenuOpen=!1,this.menuItems=e}get children(){return Object.freeze([...this._menuItems])}set menuItems(e){let r=this.parentMenu;this.dispose(),this.parentMenu=r,e=[...e],this._menuItems=e.map(a=>a.onCreate?a.onCreate(a,this):new vn(a,this)),this.hasCheck=void 0,this.dirty=!0}dispose(){var e;this.hide(),this._element&&this._element.remove(),this._abortController&&this._abortController.abort(),(e=this._menuItems)==null||e.forEach(r=>r.dispose()),this._menuItems=[],this._activeMenuItem=null,this.parentMenu=null}handleEvent(e){if(e.type==="wheel"&&this._element){let r=e;this._element.scrollBy(0,r.deltaY),e.stopPropagation()}}dispatchEvent(e){return this.rootMenu.dispatchEvent(e)}get host(){return this.rootMenu.host}get rootMenu(){return this.parentMenu.rootMenu}updateState(e){var r,a,l;this._menuItems.forEach(P=>P.updateState(e));let u=this.hasCheck;this.hasCheck=this._menuItems.some(P=>P.visible&&P.hasCheck),this.hasCheck!==u&&this._menuItems.forEach(P=>P.updateState(e));let d,g=0;for(let P of this._menuItems)P.type==="heading"?(d&&g===0&&(d.visible=!1),d=P,g=0):P.type==="divider"&&d?(d.visible=g>0,d=void 0,g=0):d&&P.visible&&(g+=1);d&&(d.visible=g>0);let E=!0;for(let P of this._menuItems)P.type==="divider"?(P.visible=!E,E=!0):P.visible&&(E=!1);(r=this.activeMenuItem)!=null&&r.visible||(this.activeMenuItem=null),!((a=this.activeMenuItem)!=null&&a.enabled)&&((l=this.activeMenuItem)==null?void 0:l.type)==="submenu"&&this._activeMenuItem.submenu.hide(),this._dirty=!1}get enabled(){return this.updateIfDirty(),this._menuItems.some(e=>e.type!=="divider"&&e.visible&&e.enabled)}get visible(){return this.updateIfDirty(),this._menuItems.some(e=>e.type!=="divider"&&e.visible)}set dirty(e){this._dirty!==e&&e&&this.parentMenu&&(this._dirty=!0,this.parentMenu.dirty=!0)}updateIfDirty(){this._dirty&&this.updateState(this.rootMenu.modifiers)}updateElement(){var e;if(this._element){this._element.textContent="";for(let{element:r,visible:a}of this._menuItems)r&&a&&this._element.append(r);(e=this._element.querySelector("li:first-of-type"))==null||e.setAttribute("tabindex","0")}}get element(){if(this._element)return this._element;let e=document.createElement("menu");e.setAttribute("role","menu"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-orientation","vertical"),e.setAttribute("part","ui-menu-container"),this._submenuClass&&e.classList.add(this._submenuClass),e.classList.add("ui-menu-container"),this._abortController||(this._abortController=new AbortController);let r=this._abortController.signal;return e.addEventListener("focus",this,{signal:r}),e.addEventListener("wheel",this,{passive:!0,signal:r}),this._element=e,this.updateElement(),e}get activeMenuItem(){return this._activeMenuItem}set activeMenuItem(e){var r,a,l,u;if(this.rootMenu.cancelDelayedOperation(),e!==this._activeMenuItem){if(this.activeMenuItem){let d=this.activeMenuItem;d.active=!1,(r=d.submenu)==null||r.hide()}if(!((a=e?.visible)==null||a)){this._activeMenuItem=null;return}this._activeMenuItem=e,e&&(e.active=!0)}e?(l=e.element)==null||l.focus({preventScroll:!0}):(u=this._element)==null||u.focus({preventScroll:!0})}get firstMenuItem(){this.updateIfDirty();let e=0,r=!1,a=this._menuItems;for(;!r&&e<=a.length-1;){let l=a[e];r=l.type!=="divider"&&l.visible&&l.enabled,e+=1}return r?a[e-1]:null}get lastMenuItem(){this.updateIfDirty();let e=this._menuItems,r=e.length-1,a=!1;for(;!a&&r>=0;){let l=e[r];a=l.type!=="divider"&&l.visible&&l.enabled,r-=1}return a?e[r+1]:null}nextMenuItem(e){if(e===0)return this._activeMenuItem;if(!this._activeMenuItem)return e>0?this.firstMenuItem:this.lastMenuItem;if(!this.firstMenuItem||!this.lastMenuItem||!this._activeMenuItem)return null;this.updateIfDirty();let r=this._menuItems.indexOf(this.firstMenuItem),a=this._menuItems.indexOf(this.lastMenuItem),l=this._menuItems.indexOf(this._activeMenuItem),u=1;for(;l>=r&&l<=a;){l+=e>0?1:-1;let d=this._menuItems[l];if(!d)break;if(d.visible&&d.enabled){if(u===Math.abs(e))return this._menuItems[l];u+=1}}return e>0?this.lastMenuItem:this.firstMenuItem}getMenuItemColumn(e){this.updateIfDirty();let r=this._menuItems.filter(a=>a.visible&&a.enabled).indexOf(e);return r<0?-1:r%this.columnCount}static get collator(){return qx._collator||(qx._collator=new Intl.Collator(void 0,{usage:"search",sensitivity:"base"})),qx._collator}findMenuItem(e){var r;this.updateIfDirty();let a=this._menuItems.filter(g=>g.type!=="divider"&&g.visible&&g.enabled);if(a.length===0)return null;let l=Math.max(...a.map(g=>g.label.length))-e.length;if(l<0)return null;let u=null,d=0;for(;d<l&&!u;)u=(r=a.find(g=>qx.collator.compare(e,g.label.substring(d,e.length))===0))!=null?r:null,d++;return u}show(e){return!this.visible||!e.container?!1:(this.updateElement(),e.container.appendChild(this.element),zs()&&(this.element.popover="manual",this.element.showPopover()),e.location&&zp(this.element,{location:e.location,alternateLocation:e.alternateLocation,verticalPos:"bottom",horizontalPos:"start"}),Fp(),this.element.focus({preventScroll:!0}),Vp(),this.parentMenu&&(this.parentMenu.openSubmenu=this),!0)}hide(){var e,r,a,l,u,d;this.openSubmenu=null,this.activeMenuItem=null,this.parentMenu&&(this.parentMenu.openSubmenu=null),!(!((e=this._element)!=null&&e.isConnected)||!this._element.parentElement)&&(zs()&&(r=this._element)!=null&&r.popover&&this._element.hidePopover(),Fp(),(l=(a=this.parentMenu)==null?void 0:a.element)==null||l.focus(),(d=(u=this._element)==null?void 0:u.parentNode)==null||d.removeChild(this._element),Vp())}set openSubmenu(e){var r,a,l,u;let d=e!==null;((r=this.activeMenuItem)==null?void 0:r.type)==="submenu"&&((a=this.activeMenuItem.element)==null||a.setAttribute("aria-expanded",d.toString())),(u=(l=this.activeMenuItem)==null?void 0:l.element)==null||u.classList.toggle("is-submenu-open",d),this.isSubmenuOpen=d}};function Fp(){document.addEventListener("focusin",$r,!0),document.addEventListener("focusout",$r,!0),document.addEventListener("focus",$r,!0),document.addEventListener("blur",$r,!0)}function $r(t){t.stopImmediatePropagation(),t.preventDefault()}function Vp(){document.removeEventListener("focusin",$r,!0),document.removeEventListener("focusout",$r,!0),document.removeEventListener("focus",$r,!0),document.removeEventListener("blur",$r,!0)}var Ss=class BE extends _n{constructor(e,r){var a;super(e),this.state="closed",this.typingBufferResetTimer=0,this.hysteresisTimer=0,this._updating=!1,this._host=(a=r?.host)!=null?a:null,this.isDynamic=e.some(qp),this._modifiers={shift:!1,control:!1,alt:!1,meta:!1},this.typingBuffer="",this.state="closed"}get modifiers(){return this._modifiers}set modifiers(e){ep(this._modifiers,e)||(this._modifiers=e,this.dirty=!0)}get activeSubmenu(){let e=this;for(;e.isSubmenuOpen;)e=e.activeMenuItem.submenu;return e}set dirty(e){this._updating||this._dirty!==e&&(this._dirty=!0,e&&setTimeout(()=>{this.updateState(this.modifiers),this.updateElement()}))}updateState(e){this._updating=!0,this.modifiers=e??this.modifiers,super.updateState(this.modifiers),this._updating=!1}handleKeyupEvent(e){this.isDynamic&&(this.modifiers=Nt(e)),e.stopImmediatePropagation()}handleKeydownEvent(e){var r,a,l;if(e.key==="Tab"||e.key==="Escape"){this.hide();return}this.isDynamic&&(this.modifiers=Nt(e));let u=!0,d=this.activeSubmenu,g=d.activeMenuItem;switch(e.key){case" ":case"Space":case"Return":case"Enter":g?.select(Nt(e));break;case"ArrowRight":if(g?.type==="submenu")g.select(Nt(e)),this.activeSubmenu.activeMenuItem=this.activeSubmenu.firstMenuItem;else if(!g)d.activeMenuItem=d.firstMenuItem;else{let E=(r=d.getMenuItemColumn(g))!=null?r:-1;if(E>=0&&E<((a=d.columnCount)!=null?a:1)-1){let P=d.nextMenuItem(1);P&&(d.activeMenuItem=P)}}break;case"ArrowLeft":if(d===this.rootMenu)g||(d.activeMenuItem=d.firstMenuItem);else if((g&&(l=d.getMenuItemColumn(g))!=null?l:-1)<=0||!g){d.hide();let E=d.parentMenu.activeMenuItem;if(E){let{element:P}=E;P?.focus(),P?.classList.remove("is-submenu-open")}}else{let E=d.nextMenuItem(-1);E&&(d.activeMenuItem=E)}break;case"ArrowDown":d.activeMenuItem=d.nextMenuItem(d.columnCount);break;case"ArrowUp":d.activeMenuItem=d.nextMenuItem(-d.columnCount);break;case"Home":case"PageUp":d.activeMenuItem=d.firstMenuItem;break;case"End":case"PageDown":d.activeMenuItem=d.lastMenuItem;break;case"Backspace":if(this.typingBuffer&&(this.typingBuffer=this.typingBuffer.slice(0,-1),this.typingBuffer)){clearTimeout(this.typingBufferResetTimer);let E=d.findMenuItem(this.typingBuffer);E&&(d.activeMenuItem=E),this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer=""},500)}break;default:if(Kr(e)){isFinite(this.typingBufferResetTimer)&&clearTimeout(this.typingBufferResetTimer),this.typingBuffer+=e.key;let E=d.findMenuItem(this.typingBuffer);E&&(d.activeMenuItem=E),this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer=""},500)}else u=!1}u&&(e.preventDefault(),e.stopPropagation())}handleEvent(e){if(e.type==="keydown")this.handleKeydownEvent(e);else if(e.type==="keyup")this.handleKeyupEvent(e);else if(e.type==="pointermove")this.lastMoveEvent=e;else if(e.type==="pointerup")Number.isFinite(this.rootMenu._openTimestamp)&&Date.now()-this.rootMenu._openTimestamp<120?this.state="modal":this.state==="modal"&&e.target===this.scrim&&this.hide();else if(e.type==="contextmenu"){e.preventDefault(),e.stopPropagation();return}super.handleEvent(e)}dispatchEvent(e){return this._host?this._host.dispatchEvent(e):!0}get host(){return this._host}get scrim(){return Ae.element}connectScrim(e){let r=this.scrim;r.addEventListener("pointerup",this,!0),r.addEventListener("contextmenu",this),r.addEventListener("keydown",this),r.addEventListener("keyup",this),r.addEventListener("pointermove",this),Ae.open({root:e,onDismiss:()=>this.hide()})}disconnectScrim(){let e=this.scrim;e.removeEventListener("pointerup",this,!0),e.removeEventListener("contextmenu",this),e.removeEventListener("keydown",this),e.removeEventListener("keyup",this),e.removeEventListener("pointermove",this),Ae.state==="open"&&Ae.scrim.close()}get rootMenu(){return this}show(e){return this._onDismiss=e?.onDismiss,e!=null&&e.modifiers&&(this.modifiers=e.modifiers),this.updateState(),this.connectScrim(e?.target),super.show(f(p({},e),{container:this.scrim}))?(this._openTimestamp=Date.now(),this.state="open",!0):(this.disconnectScrim(),!1)}hide(){this.cancelDelayedOperation(),this.state!==void 0&&(this.state!=="closed"&&(this.activeMenuItem=null,Ae.element.parentElement.focus(),super.hide(),this.state="closed",this.disconnectScrim()),this._onDismiss&&(this._onDismiss(),this._onDismiss=void 0))}scheduleOperation(e){this.cancelDelayedOperation();let r=BE.SUBMENU_DELAY;if(r<=0){e();return}this.hysteresisTimer=setTimeout(()=>{this.hysteresisTimer=0,e()},r)}cancelDelayedOperation(){this.hysteresisTimer&&(clearTimeout(this.hysteresisTimer),this.hysteresisTimer=0)}};Ss.SUBMENU_DELAY=120;var Mo=Ss;function qp(t){return _o(t)?!1:typeof t.label=="function"||typeof t.ariaLabel=="function"||typeof t.tooltip=="function"||(_t(t)||Nr(t))&&(typeof t.enabled=="function"||typeof t.visible=="function")||_t(t)&&typeof t.checked=="function"?!0:Nr(t)?t.submenu.some(qp):!1}var Mn=class{};Mn.DELAY=300,Mn.MAX_DISTANCE=10;function Hp(t){return new Promise((e,r)=>{let a=un(t);a||e(!1);let l=a,u=setTimeout(()=>{d.abort(),e(Ip(l,a)<Mn.MAX_DISTANCE)},Mn.DELAY),d=new AbortController,g=d.signal;for(let E of["pointermove","pointerup","pointercancel"])window.addEventListener(E,P=>{if(P.type==="pointerup"||P.type==="pointercancel")clearTimeout(u),d.abort(),e(!1);else if(P.type==="pointermove"){let Z=un(P);Z&&(l=Z)}},{passive:!0,signal:g})})}async function Sc(t,e,r){if(t.defaultPrevented)return!1;if(t.type==="contextmenu"){let a=t;if(r.show({target:e,location:un(a),modifiers:Nt(a)}))return t.preventDefault(),t.stopPropagation(),!0}if(t.type==="keydown"){let a=t;if(a.code==="ContextMenu"||a.code==="F10"&&a.shiftKey){let l=e?.getBoundingClientRect();if(Wp(e)&&l&&r.show({target:e,location:{x:Math.ceil(l.left+l.width/2),y:Math.ceil(l.top+l.height/2)},modifiers:Nt(a)}))return t.preventDefault(),t.stopPropagation(),!0}}if(t.type==="pointerdown"&&t.pointerType!=="mouse"&&t.button===0){let a=t.target;for(;a&&e!==a;)a=a.parentNode;if(!a||!r.visible)return!1;let l=un(t);if(await Hp(t))return r.state!=="closed"||!Wp(e)?!1:(r.show({target:e,location:l}),!0)}return!1}function Wp(t){return t.dispatchEvent(new Event("contextmenu",{cancelable:!0}))}var Up={acute:714,grave:715,dot:729,ddot:168,dddot:8411,ddddot:8412,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};v(Object.keys(Up),"{body:auto}",{createAtom:t=>new Tr(f(p({},t),{body:C(t.args[0]),accentChar:Up[t.command.slice(1)]}))});v(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:t=>{let e=Ws(C(t.args[0]));return new Tr(f(p({},t),{body:C(t.args[0]),svgAccent:t.command.slice(1)+(e.length>5?"4":["1","1","2","2","3","3"][e.length])}))}});v(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:t=>new Tr(f(p({},t),{body:C(t.args[0]),svgAccent:"overarc"}))});v(["underarc","underparen"],"{body:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),svgBelow:"underarc"}))});v("utilde","{body:auto}",{createAtom:t=>{let e=C(t.args[0]),r=Ws(e),a="widetilde"+(r.length>5?"4":["1","1","2","2","3","3"][r.length]);return new we(f(p({},t),{body:e,svgBelow:a,boxType:Qr(e)}))}});v("^","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t.args[0]])!=null?e:"^"}))}});v("`","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t.args[0]])!=null?e:"`"}))}});v("'","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t.args[0]])!=null?e:"'"}))}});v('"',"{:string}",{createAtom:t=>{var e,r;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(r={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t.args[0]])!=null?r:'"'+t.args[0]:'"'}))}});v(".","{:string}",{createAtom:t=>{var e,r;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(r={a:"",e:"",i:"i",o:"",u:"u",A:"",E:"",I:"",O:"",U:"U"}[t.args[0]])!=null?r:"."+t.args[0]:"."}))}});v("=","{:string}",{createAtom:t=>{var e,r;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(r={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t.args[0]])!=null?r:"="+t.args[0]:"="}))}});v("~","{:string}",{createAtom:t=>{var e;return new b(f(p({type:"mord"},t),{isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={n:"",N:"",a:"",o:"",A:"",O:""}[t.args[0]])!=null?e:""}))}});v("c","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={c:"",C:""}[t.args[0]])!=null?e:""}))}});v("enclose","{notation:string}[style:string]{body:auto}",{createAtom:t=>{var e,r;let a=t.args,l={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"none",svgStrokeStyle:void 0,borderStyle:void 0,style:(e=t.style)!=null?e:{}};if(a[1]){let d=a[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let g of d){let E=g.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(E)l.strokeWidth=E[1],l.strokeStyle=E[2],l.strokeColor=E[3];else{let P=g.match(/\s*([a-z]*)\s*=\s*"(.*)"/);P&&(P[1]==="mathbackground"?l.backgroundcolor=P[2]:P[1]==="mathcolor"?l.strokeColor=P[2]:P[1]==="padding"?l.padding=P[2]:P[1]==="shadow"&&(l.shadow=P[2]))}}l.strokeStyle==="dashed"?l.svgStrokeStyle="5,5":l.strokeStyle==="dotted"&&(l.svgStrokeStyle="1,5")}l.borderStyle=`${l.strokeWidth} ${l.strokeStyle} ${l.strokeColor}`;let u={};return((r=a[0])!=null?r:"").split(/[, ]/).filter(d=>d.length>0).forEach(d=>{u[d.toLowerCase()]=!0}),new tr(t.command,C(a[2]),u,l)}});v("cancel","{body:auto}",{createAtom:t=>{var e;return new tr(t.command,C(t.args[0]),{updiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});v("bcancel","{body:auto}",{createAtom:t=>{var e;return new tr(t.command,C(t.args[0]),{downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});v("xcancel","{body:auto}",{createAtom:t=>{var e;return new tr(t.command,C(t.args[0]),{updiagonalstrike:!0,downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});v(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:t=>{var e;return new we(f(p({},t),{body:C((e=t.args)==null?void 0:e[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgAbove:t.command.slice(1)}))}});v("overbrace","{:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgAbove:t.command.slice(1)}))});v(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgBelow:t.command.slice(1)}))});v(["underbrace"],"{:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgBelow:t.command.slice(1)}))});v(["xrightarrow","longrightarrow","xleftarrow","longleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","longleftrightarrow","xLeftrightarrow","xrightleftharpoons","longrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xleftrightarrows","longleftrightarrows","xRightleftharpoons","longRightleftharpoons","xLeftrightharpoons","longLeftrightharpoons"],"[:auto]{:auto}",{createAtom:t=>{var e,r,a,l,u;return new we(f(p({},t),{svgBody:t.command.slice(1),above:((r=C((e=t.args)==null?void 0:e[1]))==null?void 0:r.length)===0?void 0:C((a=t.args)==null?void 0:a[1]),below:(u=C((l=t.args)==null?void 0:l[0]))!=null?u:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"rel"}))},serialize:(t,e)=>t.command+(t.hasEmptyBranch("below")?"":`[${t.belowToLatex(e)}]`)+`{${t.aboveToLatex(e)}}${t.supsubToLatex(e)}`});v(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","deg","dim","exp","gcd","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,ifMode:"math",createAtom:t=>new gt(t.command.slice(1),f(p({},t),{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up"}))});v(["liminf","limsup"],"",{ifMode:"math",createAtom:t=>new gt({"\\liminf":"lim inf","\\limsup":"lim sup"}[t.command],f(p({},t),{limits:"over-under",variant:"main"}))});v(["lim","mod"],"",{ifMode:"math",createAtom:t=>new gt(t.command.slice(1),f(p({},t),{limits:"over-under",variant:"main"}))});v(["det","max","min"],"",{ifMode:"math",isFunction:!0,createAtom:t=>new gt(t.command.slice(1),f(p({},t),{limits:"over-under",isFunction:!0,variant:"main"}))});v("ang","{:math}",{ifMode:"math",createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>`\\ang{${t.bodyToLatex(e)}}`,render:(t,e)=>{let r=t.createBox(e),a=r.caret;r.caret=void 0;let l=new _("",{style:f(p({},t.style),{variant:"normal",variantStyle:"up"})});return new _([r,l],{type:"inner",isSelected:t.isSelected,caret:a})}});v("sqrt","[index:auto]{radicand:expression}",{ifMode:"math",createAtom:t=>new ln(f(p({},t),{body:C(t.args[1]),index:t.args[0]?C(t.args[0]):void 0}))});v(["frac","dfrac","tfrac","binom","dbinom","tbinom"],"{:expression}{:expression}",{ifMode:"math",createAtom:t=>{let e=p({},t),r=t.command,a=t.args;switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":e.hasBarLine=!0;break;case"\\atopfrac":e.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":e.hasBarLine=!1,e.leftDelim="(",e.rightDelim=")";break;case"\\cfrac":e.hasBarLine=!0,e.continuousFraction=!0;break}switch(r){case"\\dfrac":case"\\dbinom":e.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":e.mathstyleName="textstyle";break}return new pt(a[0]?C(a[0]):[new Le],a[1]?C(a[1]):[new Le],e)},serialize:(t,e)=>{let r=t.aboveToLatex(e),a=t.belowToLatex(e);return/^[0-9]$/.test(r)&&/^[0-9]$/.test(a)?`${t.command}${r}${a}`:q(t.command,r,a)}});v(["cfrac"],"[:string]{:expression}{:expression}",{ifMode:"math",createAtom:t=>{let e=p({},t),r=t.args;return e.hasBarLine=!0,e.continuousFraction=!0,r[0]==="r"&&(e.align="right"),r[0]==="l"&&(e.align="left"),new pt(r[1]?C(r[1]):[new Le],r[2]?C(r[2]):[new Le],e)},serialize:(t,e)=>{let r=t.aboveToLatex(e),a=t.belowToLatex(e);return q(t.command,r,a)}});v(["brace","brack"],"",{infix:!0,createAtom:t=>new pt(C(t.args[0]),C(t.args[1]),f(p({},t),{hasBarLine:!1,leftDelim:t.command==="\\brace"?"\\lbrace":"\\lbrack",rightDelim:t.command==="\\brace"?"\\rbrace":"\\rbrack"})),serialize:(t,e)=>R([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});v(["over","atop","choose"],"",{infix:!0,createAtom:t=>{let e,r,a=t.args;return t.command==="\\choose"&&(e="(",r=")"),new pt(C(a[0]),C(a[1]),f(p({},t),{hasBarLine:t.command==="\\over",leftDelim:e,rightDelim:r}))},serialize:(t,e)=>R([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});v(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:t=>{var e,r;let a=t.args;return new pt(C(a[0]),C(a[1]),f(p({},t),{leftDelim:(e=a[2])!=null?e:".",rightDelim:(r=a[3])!=null?r:".",hasBarLine:!1}))},serialize:(t,e)=>`${t.aboveToLatex(e)} ${t.command}${t.leftDelim}${t.rightDelim}${t.belowToLatex(e)}`});v("pdiff","{numerator}{denominator}",{ifMode:"math",createAtom:t=>new pt(C(t.args[0]),C(t.args[1]),f(p({},t),{hasBarLine:!0,numerPrefix:"",denomPrefix:""})),serialize:(t,e)=>R([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});v(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{ifMode:"math",createAtom:t=>new ai({coprod:"",bigvee:"",bigwedge:"",biguplus:"",bigcap:"",bigcup:"",intop:"",prod:"",sum:"",bigotimes:"",bigoplus:"",bigodot:"",bigsqcup:"",smallint:""}[t.command.slice(1)],f(p({},t),{limits:"auto",variant:"main"}))});v("smallint","",{ifMode:"math",createAtom:t=>new gt("",f(p({},t),{limits:"adjacent",variant:"main"}))});var jp={int:"",iint:"",iiint:"",oint:"",oiint:"",oiiint:"",intclockwise:"",varointclockwise:"",ointctrclockwise:"",intctrclockwise:"",sqcup:"",sqcap:"",uplus:"",wr:"",amalg:"",Cap:"",Cup:"",doublecap:"",doublecup:""};v(Object.keys(jp),"",{ifMode:"math",createAtom:t=>{let e=t.command,r=jp[e.slice(1)];return new ai(r,f(p({},t),{limits:"adjacent",variant:{"":"ams","":"ams"}[r]}))}});v(["Re","Im"],"",{ifMode:"math",createAtom:t=>new gt({"\\Re":"","\\Im":""}[t.command],f(p({},t),{limits:"adjacent",isFunction:!0,variant:"fraktur"}))});v("middle","{:delim}",{ifMode:"math",createAtom:t=>{var e;return new on(f(p({},t),{delim:(e=t.args[0])!=null?e:"|",size:1}))}});v("the","{:value}",{createAtom:t=>new b(f(p({},t),{captureSelection:!0,verbatimLatex:null})),render:(t,e)=>{var r;let a=new O({parent:e},t.style),l="";t.isSelected&&(l+=" ML__selected");let u=a.evaluate(t.args[0]);return new _(((r=be(u))!=null?r:"").split("").map(d=>new _(d,{type:"ord",classes:l,mode:t.mode,isSelected:t.isSelected,style:p({variant:"main"},t.style)})),{type:"lift",style:t.style,caret:t.caret,isSelected:t.isSelected,classes:l}).wrap(a)},serialize:t=>{var e;return`\\the${(e=be(t.args[0]))!=null?e:"\\relax"}`}});v("mathtip","{:auto}{:math}",{createAtom:t=>new si(f(p({},t),{body:C(t.args[0]),tooltip:C(t.args[1]),content:"math"})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\mathtip{${t.bodyToLatex(e)}}{${b.serialize([t.tooltip],f(p({},e),{defaultMode:"math"}))}}`});v("texttip","{:auto}{:text}",{createAtom:t=>new si(f(p({},t),{body:C(t.args[0]),tooltip:C(t.args[1]),content:"text"})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\texttip{${t.bodyToLatex(e)}}{${b.serialize([t.tooltip],f(p({},e),{defaultMode:"text"}))}}`});v("error","{:math}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>`\\error{${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__error"})});v("ensuremath","{:math}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>`${t.command}{${t.bodyToLatex(f(p({},e),{defaultMode:"math"}))}}`});v("color","{:value}",{applyStyle:(t,e,r,a)=>{var l,u;return f(p({},t),{verbatimColor:(l=be(r[0]))!=null?l:void 0,color:a.toColor((u=r[0])!=null?u:{string:"red"})})}});v("textcolor","{:value}{content:auto*}",{applyStyle:(t,e,r,a)=>{var l,u;return f(p({},t),{verbatimColor:(l=be(r[0]))!=null?l:void 0,color:a.toColor((u=r[0])!=null?u:{string:"red"})})}});v("boxed","{content:math}",{createAtom:t=>new nt(f(p({},t),{body:C(t.args[0]),framecolor:{string:"black"}}))});v("colorbox","{:value}{:text*}",{applyStyle:(t,e,r,a)=>{var l,u;return f(p({},t),{verbatimBackgroundColor:(l=be(r[0]))!=null?l:void 0,backgroundColor:a.toBackgroundColor((u=r[0])!=null?u:{string:"yellow"})})}});v("fcolorbox","{frame-color:value}{background-color:value}{content:text}",{applyMode:"text",createAtom:t=>{var e,r;return new nt(f(p({},t),{body:C(t.args[2]),framecolor:(e=t.args[0])!=null?e:{string:"blue"},backgroundcolor:(r=t.args[1])!=null?r:{string:"yellow"}}))},serialize:(t,e)=>{var r,a;return e.skipStyles?t.bodyToLatex(f(p({},e),{defaultMode:"text"})):q(t.command,(r=be(t.framecolor))!=null?r:"",(a=be(t.backgroundcolor))!=null?a:"",t.bodyToLatex(f(p({},e),{defaultMode:"text"})))}});v("bbox","[:bbox]{body:auto}",{createAtom:t=>{var e;let r=t.args[0],a=C(t.args[1]);return r?new nt(f(p({},t),{body:a,padding:r.padding,border:r.border,backgroundcolor:(e=r.backgroundcolor)!=null?e:void 0})):new nt(f(p({},t),{body:a}))},serialize:(t,e)=>{var r,a;if(e.skipStyles)return t.bodyToLatex(e);let l=t.command;if(Number.isFinite(t.padding)||t.border!==void 0||t.backgroundcolor!==void 0){let u=[];t.padding&&u.push((r=be(t.padding))!=null?r:""),t.border&&u.push(`border: ${t.border}`),t.backgroundcolor&&u.push((a=be(t.backgroundcolor))!=null?a:""),l+=`[${u.join(",")}]`}return q(l,t.bodyToLatex(e))}});v(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),render:(t,e)=>{let r=new O({parent:e,mathstyle:t.command.slice(1)},t.style),a=b.createBox(r,t.body,{type:"lift"});return t.caret&&(a.caret=t.caret),t.bind(e,a)},serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`{${R([t.command,t.bodyToLatex(e)])}}`});v(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:(t,e)=>f(p({},t),{fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[e]})});v("fontseries","{:string}",{ifMode:"text",applyStyle:(t,e,r)=>{var a;return f(p({},t),{fontSeries:(a=r[0])!=null?a:"auto"})}});v("fontshape","{:string}",{ifMode:"text",applyStyle:(t,e,r)=>{var a;return f(p({},t),{fontShape:(a=r[0])!=null?a:"auto"})}});v("fontfamily","{:string}",{ifMode:"text",applyStyle:(t,e,r)=>{var a;return f(p({},t),{fontFamily:(a=r[0])!=null?a:"roman"})}});v("selectfont","",{ifMode:"text",applyStyle:t=>t});v("bf","{:rest*}",{applyStyle:t=>f(p({},t),{fontSeries:"b",fontShape:"n",fontFamily:"roman"})});v(["boldsymbol","bm","bold"],"{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variantStyle:"bold"})});v("bfseries","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"b"})});v("mdseries","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"m"})});v("upshape","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"n"})});v("slshape","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sl"})});v("scshape","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sc"})});v("textbf","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"b"})});v("textmd","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"m"})});v("textup","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"n"})});v("textnormal","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"n",fontSeries:"m"})});v("textsl","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sl"})});v("textit","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"it"})});v("textsc","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sc"})});v("textrm","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontFamily:"roman"})});v("textsf","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontFamily:"sans-serif"})});v("texttt","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontFamily:"monospace"})});v("mathbf","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"normal",variantStyle:"bold"})});v("mathit","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"main",variantStyle:"italic"})});v("mathnormal","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"normal",variantStyle:"italic"})});v("mathbfit","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"main",variantStyle:"bolditalic"})});v("mathrm","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"normal",variantStyle:"up"})});v("mathsf","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"sans-serif",variantStyle:"up"})});v("mathtt","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"monospace",variantStyle:"up"})});v("it","{:rest*}",{applyStyle:t=>f(p({},t),{fontSeries:"m",fontShape:"it",fontFamily:"roman",variantStyle:"italic"})});v("rmfamily","{:rest*}",{applyStyle:t=>f(p({},t),{fontFamily:"roman"})});v("sffamily","{:rest*}",{applyStyle:t=>f(p({},t),{fontFamily:"sans-serif"})});v("ttfamily","{:rest*}",{applyStyle:t=>f(p({},t),{fontFamily:"monospace"})});v(["Bbb","mathbb"],"{:math*}",{applyStyle:t=>f(p({},t),{variant:"double-struck",variantStyle:to(t.variantStyle)})});v(["frak","mathfrak"],"{:math*}",{applyStyle:t=>f(p({},t),{variant:"fraktur",variantStyle:to(t.variantStyle)})});v("mathcal","{:math*}",{applyStyle:t=>f(p({},t),{variant:"calligraphic",variantStyle:to(t.variantStyle)})});v("mathscr","{:math*}",{applyStyle:t=>f(p({},t),{variant:"script",variantStyle:to(t.variantStyle)})});v("mbox","{:text}",{ifMode:"math",createAtom:t=>new b(f(p({},t),{type:"mord",body:C(t.args[0]),mode:"math"})),serialize:(t,e)=>q("\\mbox",t.bodyToLatex(f(p({},e),{defaultMode:"text"})))});v("text","{:text}",{ifMode:"math",applyMode:"text"});v(["class","htmlClass"],"{name:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>!t.args[0]||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`,render:(t,e)=>{var r;return t.createBox(e,{classes:(r=t.args[0])!=null?r:""})}});v(["cssId","htmlId"],"{id:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>{var r;return!((r=t.args)!=null&&r[0])||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var r;let a=t.createBox(e);return a.cssId=(r=t.args[0])!=null?r:"",a}});v("htmlData","{data:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>{var r;return!((r=t.args)!=null&&r[0])||e.skipStyles?t.bodyToLatex(e):`\\htmlData{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var r;let a=t.createBox(e);return a.htmlData=(r=t.args[0])!=null?r:"",a}});v(["style","htmlStyle"],"{data:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>{var r;return!((r=t.args)!=null&&r[0])||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var r;let a=t.createBox(e);return a.htmlStyle=(r=t.args[0])!=null?r:"",a}});v("href","{url:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),render:(t,e)=>{var r;let a=t.createBox(e),l=(r=t.args[0])!=null?r:"";return l&&(a.htmlData=`href=${l}`),a}});v("em","{:rest}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`{\\em ${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__emph",boxType:"lift"})});v("emph","{:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\emph{${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__emph",boxType:"lift"})});var Jp={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};v(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:t=>{var e;return new an(f(p({},t),{delim:(e=t.args[0])!=null?e:".",size:Jp[t.command].size,delimType:Jp[t.command].mclass}))}});v(["hspace","hspace*"],"{width:value}",{createAtom:t=>{var e;return new zt(f(p({},t),{width:(e=t.args[0])!=null?e:{dimension:0}}))}});v(["mkern","kern","mskip","hskip","mspace"],"{width:value}",{createAtom:t=>{var e;return new zt(f(p({},t),{width:(e=t.args[0])!=null?e:{dimension:0}}))}});v("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:t=>new b(t),render:(t,e)=>{let r=0,a=e.mathstyle.id;(a===jn||a===wr)&&(r=1),(a===ei||a===Ne)&&(r=2),(a===kr||a===Se)&&(r=3);let l=C(t.args[r]);return b.createBox(e,l)},serialize:(t,e)=>`\\mathchoice{${b.serialize(t.args[0],e)}}{${b.serialize(t.args[1],e)}}{${b.serialize(t.args[2],e)}}{${b.serialize(t.args[3],e)}}`});v("mathop","{:auto}",{createAtom:t=>new b(f(p({},t),{type:"mop",body:C(t.args[0]),limits:"over-under",isFunction:!0,captureSelection:!0})),render:(t,e)=>{var r;let a=b.createBox(e,t.body);if(t.superscript||t.subscript){let l=(r=t.subsupPlacement)!=null?r:"auto";a=l==="over-under"||l==="auto"&&e.isDisplayStyle?t.attachLimits(e,{base:a}):t.attachSupsub(e,{base:a})}return t.caret&&(a.caret=t.caret),new _(t.bind(e,a),{type:"op",isSelected:t.isSelected,classes:"ML__op-group"})},serialize:(t,e)=>{let r=[q(t.command,t.bodyToLatex(e))];return t.explicitSubsupPlacement&&(t.subsupPlacement==="over-under"&&r.push("\\limits"),t.subsupPlacement==="adjacent"&&r.push("\\nolimits"),t.subsupPlacement==="auto"&&r.push("\\displaylimits")),r.push(t.supsubToLatex(e)),R(r)}});v(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:t=>new b(f(p({},t),{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[t.command],body:C(t.args[0])}))});v(["operatorname","operatorname*"],"{operator:math}",{createAtom:t=>{let e=C(t.args[0]).map(r=>{var a;return r.type!=="first"&&(r.type="mord",r.value=(a={"":"*","":"-"}[r.value])!=null?a:r.value,r.isFunction=!1,!r.style.variant&&!r.style.variantStyle&&(r.style.variant="main",r.style.variantStyle="up")),r});return new b(f(p({},t),{type:"mop",body:e,isFunction:!0,limits:t.command==="\\operatorname"?"adjacent":"over-under"}))},render:(t,e)=>{var r;let a=b.createBox(e,t.body);if(t.superscript||t.subscript){let l=(r=t.subsupPlacement)!=null?r:"auto";a=l==="over-under"||l==="auto"&&e.isDisplayStyle?t.attachLimits(e,{base:a}):t.attachSupsub(e,{base:a})}return t.caret&&(a.caret=t.caret),new _(t.bind(e,a),{type:"op",isSelected:t.isSelected,classes:"ML__op-group"})},serialize:(t,e)=>{let r=[q(t.command,t.bodyToLatex(e))];return t.explicitSubsupPlacement&&(t.subsupPlacement==="over-under"&&r.push("\\limits"),t.subsupPlacement==="adjacent"&&r.push("\\nolimits"),t.subsupPlacement==="auto"&&r.push("\\displaylimits")),r.push(t.supsubToLatex(e)),R(r)}});v(["char","unicode"],"{charcode:value}",{createAtom:t=>new b(f(p({},t),{type:t.mode==="text"?"text":"mord"})),serialize:t=>{var e;return`${t.command}${be((e=t.args[0])!=null?e:{number:10067,base:"hexadecimal"})}`},render:(t,e)=>{let r=e.evaluate(t.args[0]);return(!r||!("number"in r))&&(r={number:10067,base:"hexadecimal"}),t.value=String.fromCodePoint(r.number),t.createBox(e)}});v("rule","[raise:value]{width:value}{thickness:value}",{createAtom:t=>new b(t),render:(t,e)=>{var r,a,l;let u=new O({parent:e,mathstyle:"textstyle"},t.style),d=u.toEm((r=t.args[0])!=null?r:{dimension:0}),g=u.toEm((a=t.args[1])!=null?a:{dimension:10}),E=u.toEm((l=t.args[2])!=null?l:{dimension:10}),P=new _(null,{classes:"ML__rule",type:"ord"});return P.width=g,P.height=E+d,P.depth=-d,P.setStyle("border-right-width",g,"em"),P.setStyle("border-top-width",E,"em"),P.setStyle("border-color",t.style.color),P.setStyle("vertical-align",d,"em"),t.isSelected&&P.setStyle("opacity","50%"),t.bind(u,P),t.caret&&(P.caret=t.caret),P.wrap(e)},serialize:t=>`\\rule${t.args[0]?`[${be(t.args[0])}]`:""}{${be(t.args[1])}}{${be(t.args[2])}}`});v(["overline","underline"],"{:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),render:(t,e)=>{let r=t.command.substring(1),a=new O({parent:e,mathstyle:"cramp"},t.style),l=b.createBox(a,t.body);if(!l)return null;let u=a.metrics.defaultRuleThickness/a.scalingFactor,d=new _(null,{classes:r+"-line"});d.height=u,d.maxFontSize=u*1.125*a.scalingFactor;let g;return r==="overline"?g=new Q({shift:0,children:[{box:l},3*u,{box:d},u]}):g=new Q({top:l.height,children:[u,{box:d},3*u,{box:l}]}),t.caret&&(g.caret=t.caret),new _(g,{classes:r,type:"ignore"})}});v("overset","{:auto}{base:auto}",{createAtom:t=>{let e=C(t.args[1]);return new we(f(p({},t),{above:C(t.args[0]),body:e,skipBoundary:!1,boxType:Qr(e)}))},serialize:(t,e)=>q(t.command,t.aboveToLatex(e),t.bodyToLatex(e))});v("underset","{:auto}{base:auto}",{createAtom:t=>{let e=C(t.args[1]);return new we(f(p({},t),{below:C(t.args[0]),body:e,skipBoundary:!1,boxType:Qr(e)}))},serialize:(t,e)=>q(t.command,t.belowToLatex(e),t.bodyToLatex(e))});v("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:t=>{let e=C(t.args[2]);return new we(f(p({},t),{above:C(t.args[0]),below:C(t.args[1]),body:e,skipBoundary:!1,boxType:Qr(e)}))},serialize:(t,e)=>q(t.command,t.belowToLatex(e),t.bodyToLatex(e))});v(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[2]),above:C(t.args[1]),below:C(t.args[0]),skipBoundary:!1,boxType:t.command==="\\stackrel"?"rel":"bin"})),serialize:(t,e)=>q(t.command,t.aboveToLatex(e),t.bodyToLatex(e))});v("smash","[:string]{:auto}",{createAtom:t=>{var e,r,a,l;return new Pt(f(p({},t),{body:C(t.args[1]),smashHeight:(r=(e=t.args[0])==null?void 0:e.includes("t"))!=null?r:!0,smashDepth:(l=(a=t.args[0])==null?void 0:a.includes("b"))!=null?l:!0}))}});v("vphantom","{:auto}",{createAtom:t=>new Pt(f(p({},t),{body:C(t.args[0]),isInvisible:!0,smashWidth:!0}))});v("hphantom","{:auto}",{createAtom:t=>new Pt(f(p({},t),{body:C(t.args[0]),isInvisible:!0,smashHeight:!0,smashDepth:!0}))});v("phantom","{:auto}",{createAtom:t=>new Pt(f(p({},t),{body:C(t.args[0]),isInvisible:!0}))});v("mathstrut","",{createAtom:t=>new Pt(f(p({},t),{body:[new b({value:"("})],isInvisible:!0}))});v("not","{:math}",{createAtom:t=>{let e=C(t.args[0]);return e.length===0?new b(f(p({},t),{type:"mrel",value:""})):new b(f(p({},t),{body:[new ht(f(p({},t),{body:"",align:"right"})),...e],captureSelection:!0}))},serialize:(t,e)=>{let r=t.args[0],a=r&&typeof r=="object"&&"group"in r;return t.value!==""?a?`\\not{${b.serialize(r.group,e)}}`:`\\not${b.serialize(r,e)}`:a?"\\not{}":"\\not"},render:(t,e)=>{if(t.value)return t.createBox(e);let r=t.args[0]&&typeof t.args[0]=="object"&&"group"in t.args[0]?"ord":Qr(C(t.args[0])),a=b.createBox(e,t.body,{type:r});return t.caret&&(a.caret=t.caret),t.bind(e,a)}});v(["ne","neq"],"",{createAtom:t=>new b(f(p({},t),{type:"mrel",body:[new ht(f(p({},t),{body:"",align:"right",boxType:"rel"})),new b(f(p({},t),{value:"="}))],captureSelection:!0})),serialize:t=>t.command});v("rlap","{:auto}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"right"}))});v("llap","{:auto}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"left"}))});v("mathrlap","{:math}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"right"}))});v("mathllap","{:math}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"left"}))});v("raisebox","{:value}{:text}",{createAtom:t=>{var e;return new nt(f(p({},t),{body:C(t.args[1]),padding:{dimension:0},offset:(e=t.args[0])!=null?e:{dimension:0}}))},serialize:(t,e)=>{var r;return q("\\raisebox",(r=be(t.offset))!=null?r:"0pt",t.bodyToLatex(e))}});v("raise","{:value}{:auto}",{createAtom:t=>{var e;return new nt(f(p({},t),{body:C(t.args[1]),padding:{dimension:0},offset:(e=t.args[0])!=null?e:{dimension:0}}))},serialize:(t,e)=>{var r;return q("\\raise",(r=be(t.offset))!=null?r:"0pt",t.bodyToLatex(e))}});v("lower","{:value}{:auto}",{createAtom:t=>{var e;return new nt(f(p({},t),{body:C(t.args[1]),padding:{dimension:0},offset:(e=dt(t.args[0],-1))!=null?e:{dimension:0}}))},serialize:(t,e)=>{var r,a;return q("\\lower",(a=be(dt((r=t.offset)!=null?r:{dimension:0},-1)))!=null?a:"0pt",t.bodyToLatex(e))}});ye("0123456789/@.?!");Hs(65,90);Hs(97,122);ye([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]);ye([["\\#",35],["\\&",38],["\\parallelogram",9649],["\\spadesuit",9824],["\\heartsuit",9825],["\\diamondsuit",9826],["\\clubsuit",9827],["\\flat",9837],["\\natural",9838],["\\sharp",9839]]);ye([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\pounds",163],["\\euro",8364]]);ye([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel");ye([["\\mapsfrom",8612,"mrel"],["\\Mapsfrom",10502,"mrel"],["\\MapsTo",10503,"mrel"],["\\Yup",8516,"mord"],["\\lightning",8623,"mrel"],["\\leftarrowtriangle",8701,"mrel"],["\\rightarrowtriangle",8702,"mrel"],["\\leftrightarrowtriangle",8703,"mrel"],["\\boxdot",8865,"mbin"],["\\bigtriangleup",9651,"mbin"],["\\bigtriangledown",9661,"mbin"],["\\boxbar",9707,"mbin"],["\\Lbag",10181,"mopen"],["\\Rbag",10182,"mclose"],["\\llbracket",10214,"mopen"],["\\rrbracket",10215,"mclose"],["\\longmapsfrom",10235,"mrel"],["\\Longmapsfrom",10237,"mrel"],["\\Longmapsto",10238,"mrel"],["\\boxslash",10692,"mbin"],["\\boxbslash",10693,"mbin"],["\\boxast",10694,"mbin"],["\\boxcircle",10695,"mbin"],["\\boxbox",10696,"mbin"],["\\fatsemi",10783,"mop"],["\\leftslice",10918,"mrel"],["\\rightslice",10919,"mrel"],["\\interleave",10996,"mbin"],["\\biginterleave",11004,"mop"],["\\sslash",11005,"mbin"],["\\talloblong",11006,"mbin"]]);ye([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]);ye([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\twoheadrightarrowtail",10518],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nleftarrow",8602],["\\nrightarrow",8603],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\nvrightarrow",8696],["\\nvtwoheadrightarrow",10496],["\\nvrightarrowtail",10516],["\\nvtwoheadrightarrowtail",10519],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams");ye([["+",43],["-",8722],["",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin");ye([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams");ye([["\\surd",8730],["\\S",167],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\varkappa",1008,"mord","ams"],["\\coppa",985,"mord","ams"],["\\koppa",985,"mord","ams"],["\\Coppa",984,"mord","ams"],["\\Koppa",984,"mord","ams"],["\\sampi",993,"mord","ams"],["\\Sampi",992,"mord","ams"],["\\emptyset",8709]]);ye([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\coloneqq",8788],["\\colonequals",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",10178],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel");ye([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams");ye([["\\wp",8472],["\\aleph",8501]]);ye([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams");ye([["\\ ",160],["~",160]],"space");v(["!",",",":",";",">","enskip","enspace","quad","qquad"],"",{createAtom:t=>new zt(t)});v("space","",{createAtom:t=>new zt(t)});ye([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct");ye([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner");ye([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);var Gp="<mo>&#x2061;</mo>",As="<mo>&#8290;</mo>";function Ls(t){return t.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ee(t,e){return!t||!e.generateID?"":` extid="${t}"`}function tb(t,e,r){var a,l,u,d,g,E,P,Z;let me=!1;e=e??t.atoms.length;let _e="",He="",Xe=t.atoms[t.index],wt=(a=Xe.style)==null?void 0:a.variant,Do=(l=Xe.style)==null?void 0:l.variantStyle,sr="";if(Xe.value&&(wt||Do)){let Bs=(u=Cn(Xe.value,wt,Do))!=null?u:Xe.value;if(Bs!==Xe.value)return t.index+=1,_e=`<mi${ee(Xe.id,r)}>${Bs}</mi>`,qt(_e,t,r)||(t.mathML+=_e,t.lastType="mi"),!0;sr=(d={upnormal:"normal",boldnormal:"bold",italicmain:"italic",bolditalicmain:"bold-italic","updouble-struck":"double-struck","double-struck":"double-struck",boldfraktur:"bold-fraktur",calligraphic:"script",upcalligraphic:"script",script:"script",boldscript:"bold-script",boldcalligraphic:"bold-script",fraktur:"fraktur","upsans-serif":"sans-serif","boldsans-serif":"bold-sans-serif","italicsans-serif":"sans-serif-italic","bolditalicsans-serif":"sans-serif-bold-italic",monospace:"monospace"}[(Do??"")+(wt??"")])!=null?d:"",sr&&(sr=` mathvariant="${sr}"`)}let Ko={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"","\\cdotp":"","\\ldots":"","\\cdots":"","\\ddots":"","\\vdots":"","\\ldotp":"."};if(Xe.command==="!")return t.index+=1,_e="<mo>!</mo>",qt(_e,t,r)||(t.mathML+=_e,t.lastType="mo"),!0;if(Ko[Xe.command]){t.index+=1;let Bs=`<mi${ee(Xe.id,r)}${sr}>${Ko[Xe.command]}</mi>`;return(t.lastType==="mi"||t.lastType==="mn"||t.lastType==="mtext"||t.lastType==="fence")&&(Bs=As+Bs),qt(Bs,t,r)||(t.mathML+=Bs,t.lastType="mi"),!0}if(Xe.command==="\\operatorname")He=wn(Xe.body),t.index+=1;else if(wt||Do)for(;t.index<e&&(Xe.type==="mord"||Xe.type==="macro")&&!Xe.isDigit()&&wt===((E=(g=Xe.style)==null?void 0:g.variant)!=null?E:"")&&Do===((Z=(P=Xe.style)==null?void 0:P.variantStyle)!=null?Z:"");)He+=wn([Xe]),t.index+=1,Xe=t.atoms[t.index];else(Xe.type==="mord"||Xe.type==="macro")&&!Xe.isDigit()&&(He+=wn([Xe]),t.index+=1);if(He.length>0){me=!0,_e=`<mi${sr}>${He}</mi>`;let Bs=t.lastType;_e.endsWith(">f</mi>")||_e.endsWith(">g</mi>")?(_e+=Gp,t.lastType="applyfunction"):t.lastType=/^<mo>(.*)<\/mo>$/.test(_e)?"mo":"mi",qt(_e,t,r)||((Bs==="mi"||Bs==="mn"||Bs==="mtext"||Bs==="fence")&&(_e=As+_e),t.mathML+=_e)}return me}function Xp(t){return t.index<t.atoms.length&&t.atoms[t.index].superscript&&t.atoms[t.index].type==="subsup"}function Zp(t){let e=-1,r=t.index,a=!1,l=!1;for(;r<t.atoms.length&&!a&&!l;){let u=t.atoms[r];a=!u.isDigit(),l=!a&&u.superscript!==void 0,r++}return l&&(e=r-1),e}function qt(t,e,r){var a;let l=e.atoms[e.index-1];if(!l)return!1;if(!l.superscript&&!l.subscript)if(((a=e.atoms[e.index])==null?void 0:a.type)==="subsup")l=e.atoms[e.index],e.index+=1;else return!1;let u=e.lastType;e.lastType="";let d=H(l.superscript,r);e.lastType="";let g=H(l.subscript,r);if(e.lastType=u,!d&&!g)return!1;let E="";return d&&g?E=`<msubsup>${t}${g}${d}</msubsup>`:d?E=`<msup>${t}${d}</msup>`:g&&(E=`<msub>${t}${g}</msub>`),e.mathML+=E,e.lastType="",!0}function rb(t,e,r){e=e??t.atoms.length;let a=t.index,l="",u=Zp(t);for(u>=0&&u<e&&(e=u);t.index<e&&t.atoms[t.index].mode==="text";)l+=t.atoms[t.index].value?t.atoms[t.index].value:" ",t.index+=1;return l.length>0?(l=`<mtext ${ee(t.atoms[a].id,r)}>${l}</mtext>`,u<0&&Xp(t)&&(u=t.index,t.index+=1),qt(l,t,r)||(t.mathML+=l,t.lastType="mtext"),!0):!1}function ib(t,e,r){e=e??t.atoms.length;let a=t.index,l="",u=Zp(t);for(u>=0&&u<e&&(e=u);t.index<e&&t.atoms[t.index].isDigit();)l+=t.atoms[t.index].asDigit(),t.index+=1;return l.length<=0?!1:(l="<mn"+ee(t.atoms[a].id,r)+">"+l+"</mn>",u<0&&Xp(t)&&(u=t.index,t.index+=1),qt(l,t,r)||(t.mathML+=l,t.lastType="mn"),!0)}function nb(t,e,r){let a=!1;e=e??t.atoms.length;let l="",u="";if(t.index<e&&t.atoms[t.index].type==="mopen"){let d=!1,g=0,E=t.index,P=-1,Z=E+1;for(;Z<e&&!d;)t.atoms[Z].type==="mopen"?g+=1:t.atoms[Z].type==="mclose"&&(g-=1),g===-1&&(d=!0,P=Z),Z+=1;d&&(l="<mrow>",l+=_i(t.atoms[E],r),l+=H(t.atoms,r,E+1,P),l+=_i(t.atoms[P],r),l+="</mrow>",t.index=P+1,(t.lastType==="mi"||t.lastType==="mn"||t.lastType==="mfrac"||t.lastType==="fence")&&(t.mathML+=As),qt(l,t,r)&&(a=!0,t.lastType="",l=""),u="fence")}return l.length>0&&(a=!0,t.mathML+=l,t.lastType=u),a}function ob(t,e,r){let a=!1;e=e??t.atoms.length;let l="",u="",d=t.atoms[t.index];if(!d)return!1;let g={"\\ne":"&ne;","\\neq":"&ne;","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"","\\mid":"","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lbrack":"[","\\rbrack":"]","\\lparen":"(","\\rparen":")","\\langle":"","\\rangle":"","\\lfloor":"","\\rfloor":"","\\lceil":"","\\rceil":""};if(g[d.command]){t.index+=1;let E=`<mo${ee(d.id,r)}>${g[d.command]}</mo>`;return qt(E,t,r)||(t.mathML+=E,t.lastType="mo"),!0}if(t.index<e&&(d.type==="mbin"||d.type==="mrel"))l+=Lc(t.atoms[t.index],r),t.index+=1,u="mo";else if(t.index<e&&(d.type==="mop"||d.type==="operator"||d.type==="extensible-symbol")){if(d.subsupPlacement==="over-under"&&(d.superscript||d.subscript)){let E=_i(d,r);return d.superscript&&d.subscript?(l+="<munderover>"+E,l+=H(d.subscript,r),l+=H(d.superscript,r),l+="</munderover>"):d.superscript?(l+="<mover>"+E,l+=H(d.superscript,r),l+="</mover>"):d.subscript&&(l+="<munder>"+E,l+=H(d.subscript,r),l+="</munder>"),t.mathML+=l,t.lastType="mo",t.index+=1,!0}{let E=t.atoms[t.index],P=E.value==="\\operatorname",Z=P?'<mi class="MathML-Unit"'+ee(E.id,r)+">"+wn(E.value)+"</mi>":_i(E,r);l+=Z,!P&&!/^<mo>(.*)<\/mo>$/.test(Z)?(l+=Gp,u="applyfunction"):u=P?"mi":"mo"}(t.lastType==="mi"||t.lastType==="mn")&&!/^<mo>(.*)<\/mo>$/.test(l)&&(l=As+l),t.index+=1}return l.length>0&&(a=!0,qt(l,t,r)||(t.mathML+=l,t.lastType=u)),a}function H(t,e,r,a){e!=null||(e={});let l={atoms:[],index:r??0,mathML:"",lastType:""};if(typeof t=="number"||typeof t=="boolean")l.mathML=t.toString();else if(typeof t=="string")l.mathML=t;else if(t instanceof b)l.mathML=Lc(t,e);else if(Array.isArray(t)){l.atoms=t;let u=0;for(a=a||(t?t.length:0);l.index<a;)if(rb(l,a,e)||ib(l,a,e)||tb(l,a,e)||ob(l,a,e)||nb(l,a,e))u+=1;else if(l.index<a){let d=Lc(l.atoms[l.index],e);l.lastType==="mn"&&d.length>0&&l.atoms[l.index].type==="genfrac"&&(d="<mo>&#x2064;</mo>"+d),l.atoms[l.index].type==="genfrac"?l.lastType="mfrac":l.lastType="",l.index+=1,qt(d,l,e)?u+=1:d.length>0&&(l.mathML+=d,u+=1)}u>1&&(l.mathML="<mrow>"+l.mathML+"</mrow>")}return l.mathML}function _i(t,e){let r="",a=wn(t.value);return a&&(r="<mo"+ee(t.id,e)+">"+a+"</mo>"),r}function wn(t){if(!t)return"";if(typeof t=="string")return Ls(t);if(!Array.isArray(t)&&typeof t.body=="string")return Ls(t.body);let e="";for(let r of t)typeof r.value=="string"&&(e+=r.value);return Ls(e)}function Lc(t,e){var r,a,l,u,d,g,E,P,Z,me,_e,He,Xe,wt,Do,sr,Ko,Bs,th,pf,_h,cf,df;if(t.mode==="text")return`<mi${ee(t.id,e)}>${t.value}</mi>`;let uf={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",longleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",longrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",longrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xleftrightarrows:"",xRightleftharpoons:"",longRightleftharpoons:"",xLeftrightharpoons:"",longLeftrightharpoons:""},li={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\>":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5},Vc="",Rs="",qc,Qp,n1,wh,gf,yh,{command:ff}=t;if(t.command==="\\error")return`<merror${ee(t.id,e)}>${H(t.body,e)}</merror>`;let e1={"\\vert":"|","\\Vert":"","\\mid":"","\\lbrack":"[","\\rbrack":"]","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"","\\rangle":"","\\lfloor":"","\\rfloor":"","\\lceil":"","\\rceil":""},s1={"\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};switch(t.type){case"first":break;case"group":case"root":Vc=H(t.body,e);break;case"array":let b1=t;if((b1.leftDelim&&b1.leftDelim!=="."||b1.rightDelim&&b1.rightDelim!==".")&&(Vc+="<mrow>",b1.leftDelim&&b1.leftDelim!=="."&&(Vc+=`<mo>${e1[b1.leftDelim]||b1.leftDelim}</mo>`)),Vc+="<mtable",b1.colFormat){for(Vc+=' columnalign="',n1=0;n1<b1.colFormat.length;n1++){let N2=b1.colFormat[n1];"align"in N2&&(Vc+={l:"left",c:"center",r:"right"}[N2.align]+" ")}Vc+='"'}for(Vc+=">",Qp=0;Qp<b1.rows.length;Qp++){for(Vc+="<mtr>",qc=0;qc<b1.rows[Qp].length;qc++)Vc+="<mtd>"+H(b1.rows[Qp][qc],e)+"</mtd>";Vc+="</mtr>"}Vc+="</mtable>",(b1.leftDelim&&b1.leftDelim!=="."||b1.rightDelim&&b1.rightDelim!==".")&&(b1.rightDelim&&b1.rightDelim!=="."&&(Vc+=`'<mo>${e1[b1.rightDelim]||b1.rightDelim}</mo>`),Vc+="</mrow>");break;case"genfrac":let _1=t;(_1.leftDelim||_1.rightDelim)&&(Vc+="<mrow>"),_1.leftDelim&&_1.leftDelim!=="."&&(Vc+="<mo"+ee(t.id,e)+">"+(e1[_1.leftDelim]||_1.leftDelim)+"</mo>"),_1.hasBarLine?(Vc+="<mfrac>",Vc+=H(t.above,e)||"<mi>&nbsp;</mi>",Vc+=H(t.below,e)||"<mi>&nbsp;</mi>",Vc+="</mfrac>"):(Vc+="<mtable"+ee(t.id,e)+">",Vc+="<mtr>"+H(t.above,e)+"</mtr>",Vc+="<mtr>"+H(t.below,e)+"</mtr>",Vc+="</mtable>"),_1.rightDelim&&_1.rightDelim!=="."&&(Vc+="<mo"+ee(t.id,e)+">"+(e1[_1.rightDelim]||_1.rightDelim)+"</mo>"),(_1.leftDelim||_1.rightDelim)&&(Vc+="</mrow>");break;case"surd":t.hasEmptyBranch("above")?(Vc+="<msqrt"+ee(t.id,e)+">",Vc+=H(t.body,e),Vc+="</msqrt>"):(Vc+="<mroot"+ee(t.id,e)+">",Vc+=H(t.body,e),Vc+=H(t.above,e),Vc+="</mroot>");break;case"leftright":let V1=t,I1=V1.leftDelim;Vc="<mrow>",I1&&I1!=="."&&(Vc+=`<mo${ee(t.id,e)}>${(r=e1[I1])!=null?r:I1}</mo>`),t.body&&(Vc+=H(t.body,e));let i2=V1.matchingRightDelim();i2&&i2!=="."&&(Vc+=`<mo${ee(t.id,e)}>${(a=e1[i2])!=null?a:i2}</mo>`),Vc+="</mrow>";break;case"sizeddelim":case"delim":Vc+=`<mo${ee(t.id,e)}>${e1[t.value]||t.value}</mo>`;break;case"accent":let R2=t;Vc+='<mover accent="true"'+ee(t.id,e)+">",Vc+=H(t.body,e),Vc+="<mo>"+(s1[ff]||R2.accent)+"</mo>",Vc+="</mover>";break;case"line":case"overlap":break;case"overunder":let F2=t;gf=t.above,wh=t.below,(F2.svgAbove||gf)&&(F2.svgBelow||wh)?yh=t.body:gf&&gf.length>0?(yh=t.body,(u=(l=t.body)==null?void 0:l[0])!=null&&u.below?(wh=t.body[0].below,yh=t.body[0].body):((g=(d=t.body)==null?void 0:d[0])==null?void 0:g.type)==="first"&&(P=(E=t.body)==null?void 0:E[1])!=null&&P.below&&(wh=t.body[1].below,yh=t.body[1].body)):wh&&wh.length>0&&(yh=t.body,(me=(Z=t.body)==null?void 0:Z[0])!=null&&me.above?(gf=t.body[0].above,yh=t.body[0].body):((He=(_e=t.body)==null?void 0:_e[0])==null?void 0:He.type)==="first"&&(wt=(Xe=t.body)==null?void 0:Xe[1])!=null&&wt.above&&(gf=t.body[1].above,yh=t.body[1].body)),(F2.svgAbove||gf)&&(F2.svgBelow||wh)?(Vc+=`<munderover ${ee(t.id,e)}>`,Vc+=(Do=uf[F2.svgBody])!=null?Do:H(yh,e),Vc+=(sr=uf[F2.svgBelow])!=null?sr:H(wh,e),Vc+=(Ko=uf[F2.svgAbove])!=null?Ko:H(gf,e),Vc+="</munderover>"):F2.svgAbove||gf?(Vc+=`<mover ${ee(t.id,e)}>`+((Bs=uf[F2.svgBody])!=null?Bs:H(yh,e)),Vc+=(th=uf[F2.svgAbove])!=null?th:H(gf,e),Vc+="</mover>"):(F2.svgBelow||wh)&&(Vc+=`<munder ${ee(t.id,e)}>`+((pf=uf[F2.svgBody])!=null?pf:H(yh,e)),Vc+=(_h=uf[F2.svgBelow])!=null?_h:H(wh,e),Vc+="</munder>");break;case"placeholder":Vc+="?";break;case"mord":{if(Vc=typeof t.value=="string"?t.value:ff,Vc.length>0&&Vc.startsWith("\\"))typeof t.value=="string"&&t.value.charCodeAt(0)>255?Vc="&#x"+("000000"+t.value.charCodeAt(0).toString(16)).slice(-4)+";":typeof t.value=="string"&&(Vc=t.value.charAt(0));else if(t.command==="\\char"){let V2=(cf=t.args)==null?void 0:cf[0];if(V2!==void 0&&"number"in V2){let q2=V2.number;typeof q2=="number"&&(Vc="&#x"+("000000"+q2.toString(16)).slice(-4)+";")}}else typeof t.value=="string"?Vc=t.value:(console.error("Did not expect this"),Vc="");let N2=/\d/.test(Vc)?"mn":"mi";Vc=`<${N2}${ee(t.id,e)}>${Ls(Vc)}</${N2}>`;break}case"mbin":case"mrel":case"minner":Vc=_i(t,e);break;case"mpunct":Vc='<mo separator="true"'+ee(t.id,e)+">"+ff+"</mo>";break;case"mop":case"operator":case"extensible-symbol":t.value!==""&&(Vc="<mo"+ee(t.id,e)+">",Vc+=ff==="\\operatorname"?t.body:ff||t.body,Vc+="</mo>");break;case"box":let X1=t;Vc='<menclose notation="box"',X1.backgroundcolor&&(Vc+=' mathbackground="'+X1.backgroundcolor+'"'),Vc+=ee(t.id,e)+">"+H(t.body,e)+"</menclose>";break;case"spacing":Vc+='<mspace width="'+((df=li[ff])!=null?df:0)+'em"/>';break;case"enclose":let W2=t;Vc='<menclose notation="';for(let N2 in W2.notation)Object.prototype.hasOwnProperty.call(W2.notation,N2)&&W2.notation[N2]&&(Vc+=Rs+N2,Rs=" ");Vc+=ee(t.id,e)+'">'+H(t.body,e)+"</menclose>";break;case"prompt":Vc='<menclose notation="roundexbox""">'+H(t.body,e)+"</menclose>";break;case"space":Vc+="&nbsp;";break;case"subsup":break;case"phantom":break;case"composition":break;case"rule":break;case"chem":break;case"mopen":Vc+=_i(t,e);break;case"mclose":Vc+=_i(t,e);break;case"macro":{let N2=t.command+wn(t.macroArgs);N2&&(Vc+=`<mo ${ee(t.id,e)}>${N2}</mo>`)}break;case"latexgroup":Vc+=H(t.body,e);break;case"latex":Vc+="<mtext"+ee(t.id,e)+">"+t.value+"</mtext>";break;case"tooltip":Vc+=H(t.body,e);break;case"text":Vc+=`<mtext ${ee(t.id,e)}x>${t.value}</mtext>`;break;default:if(t.command==="\\displaystyle")return`<mrow ${ee(t.id,e)} displaystyle="true">${H(t.body,e)}</mrow>`;if(t.command==="\\textstyle")return`<mrow ${ee(t.id,e)} displaystyle="false">${H(t.body,e)}</mrow>`;console.info("Unexpected element in conversion to MathML:",t)}return Vc}var kn={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"imaginary eye ","\\imaginaryJ":"imaginary jay ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\pm":"plus or minus","\\mp":"minus or plus","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","\\ne":"is not equal to ","\\neq":"is not equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","":"","":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},Ac={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function ab(t){let e="";return t.startsWith("\\")&&(e=" "+t.replace("\\","")+" "),e}function wo(t){let e=0;if(Y(t))for(let r of t)r.type!=="first"&&(e+=1);return e===1}function sb(t){if(Y(t)){for(let e of t)if(e.type!=="first"&&e.id)return e.id.toString()}return""}function Yp(t){let e="";if(Y(t))for(let r of t)r.type!=="first"&&typeof r.value=="string"&&(e+=r.value);return e}function lb(t){return t?t.map(e=>e.value).join(""):""}function Cs(t){if(t&&!t.some(e=>e.type!=="first"&&e.value===void 0))return t.map(e=>e.value).join("")}function Cc(t){return`<emphasis>${t}</emphasis>`}function cb(t,e){var r;let a="",l=!1,u=!1;for(let d=0;d<e.length;d++)e[d].type!=="first"&&(e[d].mode!=="text"&&(u=!1),d<e.length-2&&e[d].type==="mopen"&&e[d+2].type==="mclose"&&e[d+1].type==="mord"?(a+=" of ",a+=Cc($(t,e[d+1])),d+=2):e[d].mode==="text"?u?a+=(r=e[d].value)!=null?r:" ":(u=!0,a+=$("text",e[d])):e[d].isDigit()?l?a+=e[d].asDigit():(l=!0,a+=$(t,e[d])):(l=!1,a+=$(t,e[d])));return a}function $(t,e){var r,a,l,u,d,g,E,P;function Z(sr){return globalThis.MathfieldElement.textToSpeechMarkup?/[a-z]/.test(sr)?` <say-as interpret-as="character">${sr}</say-as>`:/[A-Z]/.test(sr)?`capital <say-as interpret-as="character">${sr.toLowerCase()}</say-as>`:sr:/[a-z]/.test(sr)?" '"+sr.toUpperCase()+"'":/[A-Z]/.test(sr)?" 'capital "+sr.toUpperCase()+"'":sr}if(!e)return"";if(Y(e))return cb(t,e);let me="";if(e.id&&t==="math"&&(me+='<mark name="'+e.id.toString()+'"/>'),e.mode==="text")return me+e.value;let _e="",He="",Xe="",wt=!1,{command:Do}=e;switch(Do){case"\\vec":return"vector "+$(t,e.body);case"\\acute":return $(t,e.body)+" acute";case"\\grave":return $(t,e.body)+" grave";case"\\dot":return"dot over"+$(t,e.body);case"\\ddot":return"double dot over"+$(t,e.body);case"\\mathring":return"ring over"+$(t,e.body);case"\\tilde":case"\\widetilde":return"tilde over"+$(t,e.body);case"\\bar":return $(t,e.body)+" bar";case"\\breve":return $(t,e.body)+" breve";case"\\check":case"\\widecheck":return"check over "+$(t,e.body);case"\\hat":case"\\widehat":return"hat over"+$(t,e.body);case"\\overarc":case"\\overparen":case"\\wideparen":return"arc over "+$(t,e.body);case"\\underarc":case"\\underparen":return"arc under "+$(t,e.body);case"\\mathop":return(r=Cs(e.body))!=null?r:$(t,e.body);case"\\mathit":return(a=Cs(e.body))!=null?a:$(t,e.body);case"\\mathrm":return(l=Cs(e.body))!=null?l:$(t,e.body);case"\\mathbb":return"blackboard"+((u=Cs(e.body))!=null?u:$(t,e.body))}switch(e.type){case"prompt":let sr=e.body.length>1?'start input . <break time="500ms"/> '+$(t,e.body)+'. <break time="500ms"/> end input':"blank";me+=' <break time="300ms"/> '+sr+'. <break time="700ms"/>'+((d=e.correctness)!=null?d:"")+' . <break time="700ms"/> ';break;case"array":let Ko=e.rows,Bs=e.environmentName;if(Object.keys(Ac).includes(Bs)){me+=` begin ${Ac[Bs]} `;for(let _h=0;_h<Ko.length;_h++){_h>0&&(me+=","),me+=` row ${_h+1} `;for(let cf=0;cf<Ko[_h].length;cf++)cf>0&&(me+=","),me+=` column ${cf+1}: `,me+=$("math",Ko[_h][cf])}me+=` end ${Ac[Bs]} `}break;case"group":Do==="\\ne"?me+=" not equal ":(Do==="\\not"&&(me+=" not "),me+=$("math",e.body));break;case"root":me+=$("math",e.body);break;case"genfrac":if(_e=$("math",e.above),He=$("math",e.below),wo(e.above)&&wo(e.below)){let _h={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[Yp(e.above)+"/"+Yp(e.below)];_h?me=_h:me+=_e+" over "+He}else me+=' the fraction <break time="150ms"/>'+_e+' over <break time="150ms"/>'+He+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(Xe=$("math",e.body),e.hasEmptyBranch("above"))me+=wo(e.body)?" the square root of "+Xe+" , ":' the square root of <break time="200ms"/>'+Xe+'. <break time="200ms"/> End square root';else{let _h=$("math",e.above);_h=_h.trim();let cf=_h.replace(/<mark([^/]*)\/>/g,"");cf==="3"?me+=' the cube root of <break time="200ms"/>'+Xe+'. <break time="200ms"/> End cube root':cf==="n"?me+=' the nth root of <break time="200ms"/>'+Xe+'. <break time="200ms"/> End root':me+=' the root with index: <break time="200ms"/>'+_h+', of <break time="200ms"/>'+Xe+'. <break time="200ms"/> End root'}break;case"leftright":{let _h=e;me+=(g=_h.leftDelim?kn[_h.leftDelim]:void 0)!=null?g:_h.leftDelim,me+=$("math",e.body),me+=(E=_h.rightDelim?kn[_h.rightDelim]:void 0)!=null?E:_h.rightDelim}break;case"rule":break;case"overunder":break;case"overlap":break;case"macro":let th=Do.replace(/^\\/g,""),pf=Ei()[th];pf&&(pf!=null&&pf.expand?me+=$("math",e.body):me+=`${th} `);break;case"placeholder":me+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if(Do==="\\mathbin"||Do==="\\mathrel"||Do==="\\mathopen"||Do==="\\mathclose"||Do==="\\mathpunct"||Do==="\\mathord"||Do==="\\mathinner"){me=$(t,e.body);break}let _h=e.isDigit()?e.asDigit():e.value,cf=e.command;if((e.type==="delim"||e.type==="sizeddelim")&&(cf=e.value,_h=cf),t==="text")me+=_h;else{if(e.type==="mbin"&&(me+='<break time="150ms"/>'),_h){let df=kn[_h]||(cf?kn[cf.trim()]:"");if(df)me+=" "+df;else{let uf=cf?ab(cf.trim()):"";me+=uf||Z(_h)}}else me+=$("math",e.body);e.type==="mbin"&&(me+='<break time="150ms"/>')}break}case"mop":case"operator":case"extensible-symbol":if(e.value!==""){let _h=e.command;if(_h==="\\sum")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let cf=$("math",e.superscript);cf=cf.trim();let df=$("math",e.subscript);df=df.trim(),me+=' the summation from <break time="200ms"/>'+df+'<break time="200ms"/> to  <break time="200ms"/>'+cf+'<break time="200ms"/> of <break time="150ms"/>',wt=!0}else if(e.hasEmptyBranch("subscript"))me+=" the summation of";else{let cf=$("math",e.subscript);cf=cf.trim(),me+=' the summation from <break time="200ms"/>'+cf+'<break time="200ms"/> of <break time="150ms"/>',wt=!0}else if(_h==="\\prod")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let cf=$("math",e.superscript);cf=cf.trim();let df=$("math",e.subscript);df=df.trim(),me+=' the product from <break time="200ms"/>'+df+'<break time="200ms"/> to <break time="200ms"/>'+cf+'<break time="200ms"/> of <break time="150ms"/>',wt=!0}else if(e.hasEmptyBranch("subscript"))me+=" the product  of ";else{let cf=$("math",e.subscript);cf=cf.trim(),me+=' the product from <break time="200ms"/>'+cf+'<break time="200ms"/> of <break time="150ms"/>',wt=!0}else if(_h==="\\int")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let cf=$("math",e.superscript);cf=cf.trim();let df=$("math",e.subscript);df=df.trim(),me+=' the integral from <break time="200ms"/>'+Cc(df)+'<break time="200ms"/> to <break time="200ms"/>'+Cc(cf)+' <break time="200ms"/> of ',wt=!0}else me+=' the integral of <break time="200ms"/> ';else if(_h==="\\operatorname"||_h==="\\operatorname*")me+=lb(e.body)+" ";else if(typeof e.value=="string"){let cf=(P=kn[e.value])!=null?P:e.command?kn[e.command]:void 0;me+=cf||" "+e.value}else e.command&&(e.command==="\\mathop"?me+=$("math",e.body):me+=e.command.startsWith("\\")?" "+e.command.slice(1):" "+e.command)}break;case"enclose":Xe=$("math",e.body),me+=" crossed out "+Xe+". End crossed out.";break}if(!wt&&!e.hasEmptyBranch("superscript")){let sr=$(t,e.superscript);sr=sr.trim();let Ko=sr.replace(/<[^>]*>/g,"");if(wo(e.superscript)){if(t==="math"){let Bs=sb(e.superscript);Bs&&(me+='<mark name="'+Bs+'"/>')}Ko===""?me+=" prime ":Ko==="2"?me+=" squared ":Ko==="3"?me+=" cubed ":Number.isNaN(Number.parseInt(Ko))?me+=" to the "+sr+"; ":me+=' to the <say-as interpret-as="ordinal">'+Ko+"</say-as> power; "}else Number.isNaN(Number.parseInt(Ko))?me+=" raised to the "+sr+"; ":me+=' raised to the <say-as interpret-as="ordinal">'+Ko+"</say-as> power; "}if(!wt&&!e.hasEmptyBranch("subscript")){let sr=$("math",e.subscript);sr=sr.trim(),me+=wo(e.subscript)?" sub "+sr:" subscript "+sr+". End subscript. "}return me}function Mt(t){var e,r;let a=globalThis.MathfieldElement;if(a.textToSpeechRules==="sre"&&("sre"in window||"SRE"in window)){let u=H(t);if(u){a.textToSpeechMarkup&&(a.textToSpeechRulesOptions=(e=a.textToSpeechRulesOptions)!=null?e:{},a.textToSpeechRulesOptions=f(p({},a.textToSpeechRulesOptions),{markup:a.textToSpeechMarkup}),a.textToSpeechRulesOptions.markup==="ssml"&&(a.textToSpeechRulesOptions=f(p({},a.textToSpeechRulesOptions),{markup:"ssml_step"})),a.textToSpeechRulesOptions=f(p({},a.textToSpeechRulesOptions),{rate:a.speechEngineRate}));let d=(r=window.SRE)!=null?r:globalThis.sre.System.getInstance();a.textToSpeechRulesOptions&&d.setupEngine(a.textToSpeechRulesOptions);let g="";try{g=d.toSpeech(u)}catch(E){console.error("MathLive 0.106.0: `SRE.toSpeech()` runtime error",E)}return g}return""}let l=$("math",t);if(a.textToSpeechMarkup==="ssml"){let u="";a.speechEngineRate&&(u='<prosody rate="'+a.speechEngineRate+'">'),l='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+u+"<p><s>"+l+"</s></p>"+(u?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else a.textToSpeechMarkup==="mac"&&kt()==="macos"?l=l.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):l=l.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return l}var Ht={"\\ne":"","\\neq":"","":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\>":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" ","\\infty":"oo","\\R":"RR","\\mathbb{R}":"RR","\\N":"NN","\\mathbb{N}":"NN","\\Z":"ZZ","\\mathbb{Z}":"ZZ","\\Q":"QQ","\\mathbb{Q}":"QQ","\\C":"CC","\\mathbb{C}":"CC","\\emptyset":"O/","\\varnothing":"O/","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega"},ko={"\\pm":"+-","\\colon":" : ","\\sum":" sum ","\\prod":" prod ","\\bigcap":" nnn ","\\bigcup":" uuu ","\\int":" int ","\\oint":" oint ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" AA ","\\exists":" EE ","\\in":" in ","\\notin":" !in ","\\mapsto":"|->","\\implies":"=>","\\iff":"<=>","\\cdot":" * ","\\ast":" ** ","\\star":" *** ","\\times":" * ","\\div":" -: ","\\ltimes":" |>< ","\\rtimes":" ><| ","\\bowtie":" |><| ","\\circ":"@"},Es={"\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrack":"[","\\rbrack":"]","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"};function ub(t){let e="";for(let r of t){let a=e[e.length-1];a!==void 0&&(/\d$/.test(a)&&/^\d/.test(r)||/[a-zA-Z]$/.test(a)&&/^[a-zA-Z]/.test(r))&&(e+=" "),e+=r}return e}function ne(t,e){var r,a,l,u,d,g,E,P,Z,me,_e,He,Xe,wt,Do,sr,Ko;if(!t)return"";if(Y(t)){if(t.length===0)return"";if(t[0].mode==="latex")return t.map(uf=>ne(uf)).join("");if(t[0].mode==="text"){let uf=0,li="";for(;((r=t[uf])==null?void 0:r.mode)==="text";)li+=t[uf].body?ne(t[uf].body,e):t[uf].value,uf++;return e!=null&&e.plain?li+ne(t.slice(uf),e):`"${li}" ${ne(t.slice(uf))}`}let cf=0,df=[];for(;t[cf]&&t[cf].mode==="math";){let uf="";for(;t[cf]&&t[cf].type==="mord"&&/\d/.test(t[cf].value);)uf+=t[cf++].value;uf?df.push(uf):df.push(ne(t[cf++],e))}return df.push(ne(t.slice(cf),e)),ub(df)}if(t.mode==="text")return e!=null&&e.plain?t.value:`"${t.value}"`;let Bs="",{command:th}=t,pf;if(th==="\\placeholder")return`(${ne(t.body,e)})`;let _h=b.serialize([t],{expandMacro:!1,defaultMode:"math"});switch(t.type){case"accent":let cf={"\\vec":"vec","\\dot":"dot","\\ddot":"ddot","\\bar":"bar","\\hat":"hat","\\acute":"acute;","\\grave":"grave","\\tilde":"tilde","\\breve":"breave","\\check":"check"}[th];Bs=`${cf??""} ${ne(t.body,e)} `;break;case"first":return"";case"latexgroup":return t.body.map(uf=>uf.value).join("");case"group":case"root":Bs=(a=Ht[th])!=null?a:ne(t.body,e);break;case"genfrac":{let uf=t;(uf.leftDelim||uf.rightDelim)&&(Bs=uf.leftDelim==="."||!uf.leftDelim?"{:":uf.leftDelim),uf.hasBarLine?(Bs+="(",Bs+=ne(uf.above,e),Bs+=")/(",Bs+=ne(uf.below,e),Bs+=")"):(Bs+="((",Bs+=ne(uf.above,e),Bs+=") choose (",Bs+=ne(uf.below,e),Bs+="))"),(uf.leftDelim||uf.rightDelim)&&(Bs+=uf.rightDelim==="."||!uf.rightDelim?"{:":uf.rightDelim)}break;case"surd":t.hasEmptyBranch("above")?Bs+=`sqrt(${ne(t.body,e)})`:Bs+=`root(${ne(t.above,e)})(${ne(t.body,e)})`;break;case"latex":Bs=t.value;break;case"leftright":{let uf=t,li=uf.leftDelim;li&&Es[li]&&(li=Es[li]),Bs+=li==="."||!li?"{:":li,Bs+=ne(uf.body,e);let Vc=uf.matchingRightDelim();Vc&&Es[Vc]&&(Vc=Es[Vc]),Bs+=Vc==="."||!Vc?":}":Vc}break;case"sizeddelim":case"delim":Bs=t.value;break;case"overlap":break;case"overunder":break;case"mord":if(Ht[_h])return Ht[_h];Bs=(d=(u=(l=Ht[th])!=null?l:th)!=null?u:th)!=null?d:typeof t.value=="string"?t.value:"",Bs.startsWith("\\")&&(Bs+=" "),pf=th?th.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null,pf?Bs=String.fromCodePoint(Number.parseInt("0x"+pf[1])):Bs.length>0&&Bs.startsWith("\\")&&(Bs=typeof t.value=="string"?t.value.charAt(0):t.command),Bs=db(Bs,t.style);break;case"mbin":case"mrel":case"minner":Bs=(P=(E=(g=Ht[_h])!=null?g:Ht[th])!=null?E:ko[th])!=null?P:t.value;break;case"mopen":case"mclose":Bs=t.value;break;case"mpunct":Bs=(Z=ko[th])!=null?Z:th;break;case"mop":case"operator":case"extensible-symbol":t.value!==""&&(ko[th]?Bs=ko[th]:Bs=th==="\\operatorname"?ne(t.body,e):(me=t.value)!=null?me:th,Bs+=" ");break;case"array":let df=t.environmentName;if(t.isMultiline)Bs=t.rows.map(uf=>uf.map(li=>ne(li,e)).join("")).join(`
`);else{let uf=(_e={bmatrix:["[","]"],"bmatrix*":["[","]"]}[df])!=null?_e:["(",")"],li=[],Vc=t.rows;for(let qc of Vc){let Qp=[];for(let n1 of qc)Qp.push(ne(n1,e));li.push(uf[0]+Qp.join(",")+uf[1])}let Rs=(He={bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]}[df])!=null?He:["(",")"];Bs=Rs[0]+li.join(",")+Rs[1]}break;case"box":break;case"spacing":Bs=(wt=(Xe=Ht[_h])!=null?Xe:Ht[th])!=null?wt:" ";break;case"enclose":Bs="("+ne(t.body,e)+")";break;case"space":Bs=" ";break;case"subsup":Bs="";break;case"macro":Bs=(Ko=(sr=(Do=Ht[_h])!=null?Do:Ht[th])!=null?sr:ko[th])!=null?Ko:ne(t.body,e);break}if(!t.hasEmptyBranch("subscript")){Bs+="_";let cf=ne(t.subscript,e);Bs+=cf.length!==1?`(${cf})`:cf}if(!t.hasEmptyBranch("superscript")){Bs+="^";let cf=ne(t.superscript,e);Bs+=cf.length!==1?`(${cf})`:cf}return Bs}function db(t,e){if(!e)return t;let r=t;return e.variant==="double-struck"&&(r=`bbb "${r}"`),e.variant==="script"&&(r=`cc "${r}"`),e.variant==="fraktur"&&(r=`fr "${r}"`),e.variant==="sans-serif"&&(r=`sf "${r}"`),e.variant==="monospace"&&(r=`tt "${r}"`),e.variantStyle==="bold"&&(r=`bb "${r}"`),e.color?`color({${e.color}})(${r})`:r}function de(t,e){var r;let a=f(p({},Jn()),{renderPlaceholder:()=>new _(160,{maxFontSize:1})}),l=(r=void 0)!=null?r:"math",u="math",d="displaystyle";l==="inline-math"?d="textstyle":l==="math"?d="displaystyle":l==="text"&&(d="textstyle",u="text");let g=new O({from:a}),E=new b({type:"root",mode:u,body:he(t,{context:g,parseMode:u,mathstyle:d})}).render(g);return E?(_r(It(E,g)),Mr(E,{classes:"ML__latex"}).toMarkup()):""}function Lo(t){if(typeof t=="string"){let e=mb(t);if(!e)throw new Error(`Invalid color: ${t}`);return e}return"C"in t?hb(t):"a"in t?rh(t):t}function Mi(t){return t<0?0:t>255?255:Math.round(t)}function mb(t){if(!t||t[0]!=="#")return;t=t.slice(1);let e;return t.length<=4?(e={r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)},t.length===4&&(e.a=parseInt(t[3]+t[3],16)/255)):(e={r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)},t.length===8&&(e.a=parseInt(t[6]+t[7],16)/255)),e&&typeof e.a>"u"&&(e.a=1),e}function Kc(t){let[e,r,a]=[t.L,t.C,t.H],l=a*Math.PI/180,u={L:e,a:r*Math.cos(l),b:r*Math.sin(l)};return t.alpha!==void 0&&(u.alpha=t.alpha),u}function pb(t){let[e,r,a]=[t.L,t.a,t.b],l=Math.sqrt(r*r+a*a),u=Math.atan2(a,r)*180/Math.PI,d={L:e,C:l,H:u};return t.alpha!==void 0&&(d.alpha=t.alpha),d}function Ec(t){let[e,r,a]=[t.L,t.a,t.b],l=Math.pow(.9999999984505198*e+.39633779217376786*r+.2158037580607588*a,3),u=Math.pow(1.00000000888176*e-.10556134232365635*r-.0638541747717059*a,3),d=Math.pow(e*1.000000054672411-.0894841820949657*r-1.2914855378640917*a,3),g=4.076741661347994*l-3.307711590408193*u+.230969928729428*d,E=-1.2684380040921763*l+2.6097574006633715*u-.3413193963102197*d,P=-.004196086541837188*l-.7034186144594493*u+1.7076147009309444*d,Z=me=>{let _e=Math.abs(me);return _e<=.0031308?me*12.92:(Math.sign(me)||1)*(1.055*Math.pow(_e,1/2.4)-.055)};return[Z(g),Z(E),Z(P)]}function Tc(t){let[e,r,a]=t;return e>=0&&e<=1&&r>=0&&r<=1&&a>=0&&a<=1}function Dc(t,e){let[r,a,l]=t;return r=Mi(r*255),a=Mi(a*255),l=Mi(l*255),e!==void 0?{r,g:a,b:l,alpha:e}:{r,g:a,b:l}}function rh(t){let[e,r,a]=Ec(t);if(Tc([e,r,a]))return Dc([e,r,a],t.alpha);let l=pb(t);if(l.C=0,[e,r,a]=Ec(Kc(l)),!Tc([e,r,a]))return Dc([e,r,a],t.alpha);let u=0,d=t.L,g=(u+d)/2;l.C=g;let E=.36/Math.pow(2,12);for(;d-u>E;)g=(u+d)/2,l.C=g,[e,r,a]=Ec(Kc(l)),Tc([e,r,a])?u=g:d=g;return Dc([e,r,a],t.alpha)}function hb(t){return rh(Kc(t))}function ih(t,e){let r=Lo(t),a=Lo(e),l=.56,u=.57,d=.62,g=.65,E=.022,P=1.414,Z=.1,me=5e-4,_e=1.14,He=.027,Xe=1.14,wt=.027;function Do(cf){return cf>=E?cf:cf+(E-cf)**P}function sr(cf){return(cf<0?-1:1)*Math.pow(Math.abs(cf),2.4)}let Ko=Do(sr(a.r/255)*.2126729+sr(a.g/255)*.7151522+sr(a.b/255)*.072175),Bs=Do(sr(r.r/255)*.2126729+sr(r.g/255)*.7151522+sr(r.b/255)*.072175),th,pf,_h;return Math.abs(Bs-Ko)<me?pf=0:Bs>Ko?(th=Bs**l-Ko**u,pf=th*_e):(th=Bs**g-Ko**d,pf=th*Xe),Math.abs(pf)<Z?_h=0:pf>0?_h=pf-wt:_h=pf+He,_h*100}function Oc(t,e,r){r!=null||(r="#fff"),e!=null||(e="#000");let a=ih(t,r),l=ih(t,e);return Math.abs(a)>Math.abs(l)?r:e}function nh(t){let e=Lo(t),r=((1<<24)+(Mi(e.r)<<16)+(Mi(e.g)<<8)+Mi(e.b)).toString(16).slice(1);return e.alpha!==void 0&&e.alpha<1&&(r+=("00"+Math.round(e.alpha*255).toString(16)).slice(-2)),r[0]===r[1]&&r[2]===r[3]&&r[4]===r[5]&&r[6]===r[7]&&(r=r[0]+r[2]+r[4]+(e.alpha!==void 0&&e.alpha<1?r[6]:"")),"#"+r}function te(t){let e=oh(t),r="";for(let a of e){if(typeof a.value!="string")return"";r+=a.value}return r}function oh(t){let e=t.model.selection.ranges;if(e.length!==1)return[];let r=t.model.getAtoms(e[0]);return r.length===1&&r[0].isRoot&&(r=r[0].children),r.filter(a=>a.type!=="first")}function fb(t,e){let r=oh(t);if(r.length!==1)return!1;let a=Za[e];return a?!!a.test(r[0].value):!1}function gb(t){return te(t).length>0}function bb(t){return[Rc(t,"double-struck","mathbb","tooltip.blackboard"),Rc(t,"fraktur","mathfrak","tooltip.fraktur"),Rc(t,"calligraphic","mathcal","tooltip.caligraphic"),Pc(t,"up","mathrm","tooltip.roman-upright"),Pc(t,"bold","bm","tooltip.bold"),Pc(t,"italic","mathit","tooltip.italic")]}function yb(t){return[{id:"accent-vec",class:"ML__center-menu",label:()=>de(`\\vec{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\vec{#@}",{selectionMode:"item"})},{id:"accent-overrightarrow",class:"ML__center-menu",label:()=>de(`\\overrightarrow{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overrightarrow{#@}",{selectionMode:"item"})},{id:"accent-overleftarrow",class:"ML__center-menu",label:()=>de(`\\overleftarrow{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overleftarrow{#@}",{selectionMode:"item"})},{id:"accent-dot",class:"ML__center-menu",label:()=>de(`\\dot{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\dot{#@}",{selectionMode:"item"})},{id:"accent-ddot",class:"ML__center-menu",label:()=>de(`\\ddot{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\ddot{#@}",{selectionMode:"item"})},{id:"accent-bar",class:"ML__center-menu",label:()=>de(`\\bar{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\bar{#@}",{selectionMode:"item"})},{id:"accent-overline",class:"ML__center-menu",label:()=>de(`\\overline{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overline{#@}",{selectionMode:"item"})},{id:"accent-overgroup",class:"ML__center-menu",label:()=>de(`\\overgroup{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overgroup{#@}",{selectionMode:"item"})},{id:"accent-overbrace",class:"ML__center-menu",label:()=>de(`\\overbrace{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overbrace{#@}",{selectionMode:"item"})},{id:"accent-underline",class:"ML__center-menu",label:()=>de(`\\underline{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\underline{#@}",{selectionMode:"item"})},{id:"accent-undergroup",class:"ML__center-menu",label:()=>de(`\\undergroup{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\undergroup{#@}",{selectionMode:"item"})},{id:"accent-underbrace",class:"ML__center-menu",label:()=>de(`\\underbrace{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\underbrace{#@}",{selectionMode:"item"})}]}function xb(t){return[{id:"decoration-boxed",label:()=>de(`\\boxed{${t.getValue(t.model.selection)}}}`),onMenuSelect:()=>t.insert("\\boxed{#@}",{selectionMode:"item"})},{id:"decoration-red-box",label:()=>de(`\\bbox[5px, border: 2px solid red]{${t.getValue(t.model.selection)}}`),onMenuSelect:()=>t.insert("\\bbox[5px, border: 2px solid red]{#@}",{selectionMode:"item"})},{id:"decoration-dashed-black-box",label:()=>de(`\\bbox[5px, border: 2px dashed black]{${t.getValue(t.model.selection)}}`),onMenuSelect:()=>t.insert("\\bbox[5px, border: 2px dashed black]{#@}",{selectionMode:"item"})}]}function vb(t){let e=[];for(let r of Object.keys(Ut))e.push({id:`background-color-${r}`,class:(nh(Oc(Ut[r]))==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${Ut[r]} "></span>`,ariaLabel:()=>{var a;return(a=z(r))!=null?a:r},checked:()=>{var a;return(a={some:"mixed",all:!0}[t.queryStyle({backgroundColor:r})])!=null?a:!1},onMenuSelect:()=>t.applyStyle({backgroundColor:r},{operation:"toggle"})});return e}function _b(t){let e=[];for(let r of Object.keys(jt))e.push({id:`color-${r}`,class:(Oc(jt[r])==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${jt[r]} "></span>`,ariaLabel:()=>{var a;return(a=z(r))!=null?a:r},checked:()=>{var a;return(a={some:"mixed",all:!0}[t.queryStyle({color:r})])!=null?a:!1},onMenuSelect:()=>t.applyStyle({color:r},{operation:"toggle"})});return e}var zc=class extends vn{constructor(t,e,r,a){super(t,e),this.row=r,this.col=a}set active(t){let e=this.parentMenu.children;if(t)for(let r of e)r.element.classList.toggle("active",r.row<=this.row&&r.col<=this.col);else for(let r of e)r.element.classList.remove("active")}};function Mb(t){let e=[];for(let r=1;r<=5;r++)for(let a=1;a<=5;a++)e.push({id:`insert-matrix-${r}x${a}`,onCreate:(l,u)=>new zc(l,u,r,a),label:"",tooltip:()=>z("tooltip.row-by-col",r,a),data:{row:r,col:a},onMenuSelect:()=>{t.insert(`\\begin{pmatrix}${Array(r).fill(Array(a).fill("#?").join(" & ")).join("\\\\")}\\end{pmatrix}`,{selectionMode:"item"})}});return e}function ah(t){return[{label:()=>z("menu.array.add row above"),id:"add-row-above",onMenuSelect:()=>t.executeCommand("addRowBefore"),keyboardShortcut:"shift+alt+[Return]",visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[a,l]=Sn(t);return e!==a}},{label:()=>z("menu.array.add row below"),id:"add-row-below",onMenuSelect:()=>t.executeCommand("addRowAfter"),keyboardShortcut:"alt+[Return]",visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[a,l]=Sn(t);return e!==a}},{label:()=>z("menu.array.add column before"),id:"add-column-before",onMenuSelect:()=>t.executeCommand("addColumnBefore"),visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[a,l]=Sn(t);return r!==l},keyboardShortcut:"shift+alt+[Tab]",enabled:()=>{let e=t.model.parentEnvironment;if(!e)return!1;let[r,a]=Bc(t);return r<e.maxColumns}},{label:()=>z("menu.array.add column after"),id:"add-column-after",onMenuSelect:()=>t.executeCommand("addColumnAfter"),keyboardShortcut:"alt+[Tab]",visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[a,l]=Sn(t);return r!==l}},{type:"divider"},{label:()=>z("menu.array.delete row"),id:"delete-row",onMenuSelect:()=>t.executeCommand("removeRow"),enabled:()=>{let[e,r]=Fr(t),[a,l]=Bc(t);return a>e},visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[a,l]=Sn(t);return e!==a}},{label:()=>z("menu.array.delete column"),id:"delete-column",onMenuSelect:()=>t.executeCommand("removeColumn"),enabled:()=>{let[e,r]=Fr(t),[a,l]=Bc(t);return l>r},visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[a,l]=Sn(t);return r!==l}},{type:"divider"},{label:()=>z("menu.borders"),visible:()=>(wb(t)||wi(t))&&t.isSelectionEditable,submenu:[{label:"  ",id:"environment-no-border",onMenuSelect:()=>Ao(t,"matrix")},{label:"()",id:"environment-parentheses",onMenuSelect:()=>Ao(t,"pmatrix")},{label:"[]",id:"environment-brackets",onMenuSelect:()=>Ao(t,"bmatrix")},{label:"||",id:"environment-bar",onMenuSelect:()=>Ao(t,"vmatrix")},{label:"{}",id:"environment-braces",onMenuSelect:()=>Ao(t,"Bmatrix")}],submenuClass:"border-submenu"},{type:"divider"},{label:()=>z("menu.insert matrix"),id:"insert-matrix",visible:()=>t.isSelectionEditable,submenu:Mb(t),submenuClass:"insert-matrix-submenu",columnCount:5},{type:"divider"},{label:()=>z("menu.insert"),id:"insert",submenu:Sb(t)},{type:"divider"},{label:()=>z("menu.mode"),id:"mode",visible:()=>t.isSelectionEditable&&t.model.selectionIsCollapsed,submenu:[{label:()=>z("menu.mode-math"),id:"mode-math",onMenuSelect:()=>{$t(t,"accept-all"),t.executeCommand(["switchMode","math"])},checked:()=>t.model.mode==="math"},{label:()=>z("menu.mode-text"),id:"mode-text",onMenuSelect:()=>{$t(t,"accept-all"),t.executeCommand(["switchMode","text"])},checked:()=>t.model.mode==="text"},{label:()=>z("menu.mode-latex"),id:"mode-latex",onMenuSelect:()=>t.executeCommand(["switchMode","latex"]),checked:()=>t.model.mode==="latex"}]},{type:"divider"},{label:()=>z("menu.font-style"),id:"variant",visible:()=>t.isSelectionEditable,submenu:bb(t),submenuClass:"variant-submenu"},{label:()=>z("menu.color"),id:"color",visible:()=>t.isSelectionEditable,submenu:_b(t),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>z("menu.background-color"),id:"background-color",visible:()=>t.isSelectionEditable,submenu:vb(t),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>z("menu.accent"),id:"accent",visible:()=>t.isSelectionEditable,submenu:yb(t),submenuClass:"variant-submenu"},{label:()=>z("menu.decoration"),id:"decoration",visible:()=>t.isSelectionEditable&&te(t).length>0,submenu:xb(t),submenuClass:"variant-submenu"},{type:"divider"},{label:()=>z("menu.evaluate"),id:"ce-evaluate",visible:()=>t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{let e=kb(t);if(!e){t.model.announce("plonk");return}t.model.selectionIsCollapsed?(t.model.position=t.model.lastOffset,t.insert(`=${e}`,{insertionMode:"insertAfter",selectionMode:"item"})):t.insert(e,{insertionMode:"replaceSelection",selectionMode:"item"})}},{label:()=>z("menu.simplify"),id:"ce-simplify",visible:()=>t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{var e,r;if(t.model.selectionIsCollapsed){let a=(e=t.expression)==null?void 0:e.simplify();if(t.model.position=t.model.lastOffset,!a){t.model.announce("plonk");return}t.insert(`=${a.latex}`,{insertionMode:"insertAfter",selectionMode:"item"})}else{let a=(r=globalThis.MathfieldElement.computeEngine)==null?void 0:r.parse(t.getValue(t.model.selection)).simplify();if(!a){t.model.announce("plonk");return}t.insert(a.latex,{insertionMode:"replaceSelection",selectionMode:"item"})}}},{label:()=>{var e;let r=globalThis.MathfieldElement.computeEngine;if(r===null)return"";let a=(e=t.expression)==null?void 0:e.unknowns[0];if(a){let l=r.box(a).latex;return z("menu.solve-for",de(l))}return z("menu.solve")},id:"ce-solve",visible:()=>{var e;return t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null&&((e=t.expression)==null?void 0:e.unknowns.length)===1&&t.expression.unknowns[0]!=="Nothing"},onMenuSelect:()=>{var e;let r=t.expression,a=r?.unknowns[0],l=(e=r.solve(a))==null?void 0:e.map(u=>{var d;return(d=u.simplify().latex)!=null?d:""});if(!l){t.model.announce("plonk");return}t.insert(`${a}=${l.length===1?l[0]:"\\left\\lbrace"+l?.join(", ")+"\\right\\rbrace"}`,{insertionMode:"replaceAll",selectionMode:"item"})}},{type:"divider"},{label:()=>z("menu.cut"),id:"cut",onMenuSelect:()=>t.executeCommand("cutToClipboard"),visible:()=>!t.options.readOnly&&t.isSelectionEditable,keyboardShortcut:"meta+X"},{label:()=>z("menu.copy"),id:"copy",submenu:[{label:()=>z("menu.copy-as-latex"),id:"copy-latex",onMenuSelect:()=>V.copyToClipboard(t,"latex"),keyboardShortcut:"meta+C"},{label:()=>z("menu.copy-as-typst"),id:"copy-latex",onMenuSelect:()=>V.copyToClipboard(t,"typst")},{label:()=>z("menu.copy-as-ascii-math"),id:"copy-ascii-math",onMenuSelect:()=>V.copyToClipboard(t,"ascii-math")},{label:()=>z("menu.copy-as-mathml"),id:"copy-math-ml",onMenuSelect:()=>V.copyToClipboard(t,"math-ml")}]},{label:()=>z("menu.paste"),id:"paste",onMenuSelect:()=>t.executeCommand("pasteFromClipboard"),visible:()=>t.hasEditableContent,keyboardShortcut:"meta+V"},{label:()=>z("menu.select-all"),id:"select-all",keyboardShortcut:"meta+A",onMenuSelect:()=>t.executeCommand("selectAll")}]}function wi(t){var e,r;let a=(r=(e=t.model.parentEnvironment)==null?void 0:e.environmentName)!=null?r:"";return["array","matrix","pmatrix","bmatrix","vmatrix","Bmatrix"].includes(a)}function wb(t){let e=t.model.at(t.model.position);if(e.type!=="array")return!1;let r=e.environmentName;return["matrix","pmatrix","bmatrix","vmatrix","Bmatrix"].includes(r)}function Bc(t){var e;let r=(e=t.model.parentEnvironment)==null?void 0:e.rows;return r?[r.length,r.reduce((a,l)=>Math.max(a,l.length),0)]:[0,0]}function Fr(t){let e=t.model.parentEnvironment;return e?[e.minRows,e.minColumns]:[0,0]}function Sn(t){let e=t.model.parentEnvironment;return e?[e.maxRows,e.maxColumns]:[0,0]}function Ao(t,e){di(t),t.flushInlineShortcutBuffer(),uc(t.model,e),U(t)}function kb(t){var e,r;let a;if(t.model.selectionIsCollapsed?a=(e=globalThis.MathfieldElement.computeEngine)==null?void 0:e.parse(t.getValue(),{canonical:!1}):a=(r=globalThis.MathfieldElement.computeEngine)==null?void 0:r.parse(t.getValue(t.model.selection),{canonical:!1}),!a)return"";let l=a.evaluate();return l.isSame(a)&&(l=a.N()),l.latex}function Rc(t,e,r,a){return{id:`variant-${e}`,label:()=>{var l;return te(t).length<12?de(`\\${r}{${te(t)}}`):(l=z(a))!=null?l:a},class:"ML__xl",tooltip:()=>{var l;return(l=z(a))!=null?l:a},visible:()=>fb(t,e),checked:()=>{var l;return(l={some:"mixed",all:!0}[t.queryStyle({variant:e})])!=null?l:!1},onMenuSelect:()=>t.applyStyle({variant:e},{operation:"toggle"})}}function Pc(t,e,r,a){return{id:`variant-style-${e}`,label:()=>{var l;let u=te(t);return u.length>0&&u.length<12?de(`\\${r}{${te(t)}}`):(l=z(a))!=null?l:a},class:()=>{let l=te(t);return l.length>0&&l.length<12?"ML__xl":""},tooltip:()=>{var l;return(l=z(a))!=null?l:a},visible:e==="bold"?!0:()=>gb(t),checked:()=>{var l;return(l={some:"mixed",all:!0}[t.queryStyle({variantStyle:e})])!=null?l:!1},onMenuSelect:()=>t.applyStyle({variantStyle:e},{operation:"toggle"})}}function Sb(t){return[{label:()=>je("abs"),id:"insert-abs",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("|#?|")},{label:()=>je("nth-root"),id:"insert-nth-root",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\sqrt[#?]{#?}")},{label:()=>je("log-base"),id:"insert-log-base",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\log_{#?}{#?}")},{type:"heading",label:()=>z("menu.insert.heading-calculus")},{label:()=>je("derivative"),id:"insert-derivative",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\dfrac{\\mathrm{d}}{\\mathrm{d}x}#?\\bigm|_{x=#?}")},{label:()=>je("nth-derivative"),id:"insert-nth-derivative",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\dfrac{\\mathrm{d}^#?}{\\mathrm{d}x^#?}#?\\bigm|_{x=#?}")},{label:()=>je("integral"),id:"insert-integral",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\int_#?^#?#?\\,\\mathrm{d}#?")},{label:()=>je("sum"),id:"insert-sum",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\sum_#?^#?#?")},{label:()=>je("product"),id:"insert-product",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\prod_#?^#?#?")},{type:"heading",label:()=>z("menu.insert.heading-complex-numbers")},{label:()=>je("modulus"),id:"insert-modulus",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\lvert#?\\rvert")},{label:()=>je("argument"),id:"insert-argument",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\arg(#?)")},{label:()=>je("real-part"),id:"insert-real-part",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\Re(#?)")},{label:()=>je("imaginary-part"),id:"insert-imaginary-part",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\Im(#?)")},{label:()=>je("conjugate"),id:"insert-conjugate",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\overline{#?}")}]}function je(t){return`<span class='ML__insert-template'> ${de(z(`menu.insert.${t}-template`))}</span><span class="ML__insert-label">${z(`menu.insert.${t}`)}</span>`}var ze={"\\ne":"!=","\\neq":"!=","":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon.alt","\\varepsilon":"epsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta.alt","\\vartheta":"theta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi.alt","\\varphi":"phi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" #h(-1em/6) ","\\,":" thin ","\\:":" med ","\\>":" med ","\\;":" thick ","\\enskip":"space.en","\\enspace":"space.en","\\qquad":"space.quad space.quad","\\quad":"space.quad","\\infty":"infinity","\\R":"RR","\\mathbb{R}":"RR","\\N":"NN","\\mathbb{N}":"NN","\\Z":"ZZ","\\mathbb{Z}":"ZZ","\\Q":"QQ","\\mathbb{Q}":"QQ","\\C":"CC","\\mathbb{C}":"CC","\\emptyset":"emptyset","\\varnothing":"nothing","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega","\\vert":" | ","\\Vert":" || ","\\mid":" divides ","\\lbrack":" bracket.l ","\\rbrack":" bracket.r ","\\lbrace":" brace.l ","\\rbrace":" brace.r ","\\lparen":" paren.l ","\\rparen":" paren.r ","\\langle":" angle.l ","\\rangle":" angle.r ","\\differentialD":" dif ","\\diamond":" diamond.stroked.small ","\\square":" square.stroked.small ","\\lceil":" ceil.l ","\\rceil":" ceil.r ","\\lfloor":" floor.l ","\\rfloor":" floor.r ","\\aleph":" aleph ","\\bet":" bet ","\\gimel":" gimel ","\\dalet":" dalet ","\\mod":" mod ","\\equiv":" equiv ","\\subset":" subset ","\\supset":" supset ","\\subseteq":" subset.eq ","\\supseteq":" supset.eq ","\\subsetneq":" subset.neq ","\\supsetneq":" supset.neq ","\\supsetneqq":" supset.neq ","\\nsubset":" subset.not ","\\nsupset":" supset.not ","\\nsubseteq":" subset.eq.not ","\\nsupseteq":" supset.eq.not ","\\approx":" approx ","\\uparrow":" arrow.t ","\\downarrow":" arrow.b ","\\rightarrow":" arrow.r ","\\leftarrow":" arrow.l ","\\longmapsto":" mapsto.long ","\\longmapsfrom":" arrow.l.bar.long ","/":"\\/","&":"&"},sh={"[":" bracket.l ","]":" bracket.r ","{":" brace.l ","}":" brace.r ","(":" paren.l ",")":" paren.r ","<":" angle.l ",">":" angle.r ",".":""},lh={" bracket.l ":"["," bracket.r ":"]"," brace.l ":"{"," brace.r ":"}"," paren.l ":"("," paren.r ":")"," angle.l ":" angle.l "," angle.r ":" angle.r "},Co={"\\pm":"plus.minus","\\colon":" : ","\\sum":" sum ","\\prod":" product ","\\bigcap":" inter.big ","\\bigcup":" union.big ","\\int":" integral ","\\iint":" integral.double ","\\iiint":" integral.triple ","\\intop":" integral ","\\oint":" integral.cont ","\\oiint":" integral.surf ","\\oiiint":" integral.vol ","\\setminus":" without ","\\vdots":" without ","\\ddots":" dots.down ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" forall ","\\exists":" exists ","\\in":" in ","\\notin":" in.not ","\\mapsto":"|->","\\implies":"==>","\\iff":"<==>","\\cdot":" dot.op ","\\ast":" * ","\\star":" star.op ","\\times":" times ","\\div":" div ","\\ltimes":" times.l ","\\rtimes":" times.r ","\\bowtie":"  ","\\circ":" circle.stroked.small "},Lb={underarc:"underparen",underparen:"underparen",underbrace:"underbrace",underline:"underline",overarc:"overparen",overparen:"overparen",overbrace:"overbrace",overline:"overline",cancel:"cancel",displaystyle:"display",textstyle:"inline"},Ab={longrightarrow:t=>`arrow.r.long^(${re(t.above)})`,longleftarrow:t=>`arrow.l.long^(${re(t.above)})`};function Cb(t){let e="";for(let r of t){let a=e[e.length-1];a!==void 0&&(/\d$/.test(a)&&/^\d/.test(r)||/[a-zA-Z]$/.test(a)&&/^[a-zA-Z]/.test(r))&&(e+=" "),e+=r}return e}function re(t){var e,r,a,l,u,d,g,E,P,Z,me,_e,He,Xe,wt,Do,sr,Ko,Bs,th,pf;if(!t)return"";if(Y(t)){if(t.length===0)return"";if(t[0].mode==="latex")return t.map(Rs=>re(Rs)).join("");if(t[0].mode==="text"){let Rs=0,qc="";for(;((e=t[Rs])==null?void 0:e.mode)==="text";)qc+=t[Rs].body?re(t[Rs].body):t[Rs].value,Rs++;return` "${qc}" ${re(t.slice(Rs))}`}let li=0,Vc=[];for(;t[li]&&t[li].mode==="math";){let Rs="";for(;t[li]&&t[li].type==="mord"&&/\d/.test(t[li].value);)Rs+=t[li++].value;Rs?Vc.push(Rs):Vc.push(re(t[li++]))}return Vc.push(re(t.slice(li))),Cb(Vc)}if(t.mode==="text")return`"${t.value}"`;let _h="",{command:cf}=t,df;if(cf==="\\placeholder")return`"${re(t.body)}"`;let uf=b.serialize([t],{expandMacro:!0,defaultMode:"math"});switch(t.type){case"accent":let li={"\\vec":"arrow","\\dot":"dot","\\ddot":"dot.double","\\bar":"overline","\\hat":"hat","\\acute":"acute","\\grave":"grave","\\tilde":"tilde","\\breve":"breve","\\check":"caron"}[cf];_h=`${li??""}(${re(t.body)}) `;break;case"first":return"";case"latexgroup":return t.body.map(Rs=>Rs.value).join("");case"group":case"root":_h=(r=ze[cf])!=null?r:re(t.body);break;case"genfrac":{let Rs=t;Rs.hasBarLine?(_h+="(",_h+=re(Rs.above),_h+=")/(",_h+=re(Rs.below),_h+=")"):_h+=`binom(${re(Rs.above)}, ${re(Rs.below)})`}break;case"surd":t.hasEmptyBranch("above")?_h+=`sqrt(${re(t.body)})`:_h+=`root(${re(t.above)}, ${re(t.body)})`;break;case"latex":_h=t.value;break;case"leftright":{let Rs=t,qc=Rs.leftDelim;qc&&ze[qc]&&(qc=ze[qc]);let Qp=Rs.matchingRightDelim();Qp&&ze[Qp]&&(Qp=ze[Qp]),qc&&(qc=(a=sh[qc])!=null?a:qc),Qp&&(Qp=(l=sh[Qp])!=null?l:Qp),qc&&Qp?_h=`lr(${(u=lh[qc])!=null?u:qc}${re(Rs.body)}${(d=lh[Qp])!=null?d:Qp})`:_h=`lr(${qc}${re(Rs.body)}${Qp})`}break;case"sizeddelim":case"delim":_h=t.value;break;case"overlap":break;case"mord":if(ze[uf])return ze[uf];_h=(P=(E=(g=ze[cf])!=null?g:cf)!=null?E:cf)!=null?P:typeof t.value=="string"?t.value:"",_h.startsWith("\\")&&(_h+=" "),df=cf?cf.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null,df?_h=String.fromCodePoint(Number.parseInt("0x"+df[1])):_h.length>0&&_h.startsWith("\\")&&(_h=typeof t.value=="string"?t.value.charAt(0):t.command),_h=Eb(_h,t.style),_h=` ${_h} `;break;case"mbin":case"mrel":case"minner":_h=(_e=(me=(Z=ze[uf])!=null?Z:ze[cf])!=null?me:Co[cf])!=null?_e:t.value;break;case"mopen":case"mclose":_h=(He=ze[uf])!=null?He:t.value;break;case"mpunct":_h=(Xe=Co[cf])!=null?Xe:cf;break;case"mop":case"operator":case"extensible-symbol":t.value!==""&&(Co[cf]?_h=Co[cf]:_h=cf==="\\operatorname"?re(t.body):(wt=t.value)!=null?wt:cf,_h+=" ");break;case"array":let Vc=t.environmentName;if(t.isMultiline)_h=t.rows.map(Rs=>Rs.map(qc=>re(qc)).join("")).join(`
`);else{let Rs=t.rows,qc=Rs.map(n1=>n1.map(re).join(", ")),Qp={pmatrix:'"("',bmatrix:'"["',"bmatrix*":'"["',Bmatrix:'"{"',vmatrix:'"|"',matrix:"#none"}[Vc];Qp?_h=`mat(delim: ${Qp}, ${qc.join(" ; ")})`:Vc==="cases"||Vc==="rcases"?_h=`cases(reverse: #${Vc==="rcases"}, ${qc.join(", ")})`:Vc==="aligned"?_h=Rs.map(n1=>n1.map(re).join(" & ")).join(" \\ "):_h=Rs.map(n1=>n1.map(re).join("")).join("")}break;case"box":break;case"spacing":_h=(sr=(Do=ze[uf])!=null?Do:ze[cf])!=null?sr:" ";break;case"space":_h=" ";break;case"subsup":_h=(Ko=t.leftSibling)!=null&&Ko.value?"":'""';break;case"macro":_h=(pf=(th=(Bs=ze[uf])!=null?Bs:ze[cf])!=null?th:Co[cf])!=null?pf:re(t.body);break}if(!_h){let li=Lb[t.command.slice(1)];li&&(_h=`${li}(${re(t.body)})`)}if(!_h){let li=Ab[t.command.slice(1)];li&&(_h=li(t))}if(!t.hasEmptyBranch("subscript")){_h+="_";let li=re(t.subscript);_h+=li.length!==1?`(${li})`:li}if(!t.hasEmptyBranch("superscript")){_h+="^";let li=re(t.superscript);_h+=li.length!==1?`(${li})`:li}return _h}function Eb(t,e){if(!e)return t;let r=t;return e.variant==="double-struck"&&(r=`bb(${r})`),e.variant==="script"&&(r=`cal(${r})`),e.variant==="fraktur"&&(r=`frak(${r})`),e.variant==="sans-serif"&&(r=`sans(${r})`),e.variant==="monospace"&&(r=`mono(${r})`),e.variantStyle==="bold"&&(r=`bold(${r})`),r}function Vr(t,e){return typeof t=="string"?t+Mt(e):Mt(t)}function Ic(t){var e;let r;if(t.parent.type==="prompt")t.parentBranch==="body"&&(r="prompt");else if(t.parentBranch==="body"){if(t.type==="first"&&(t.parent.type==="root"?r="mathfield":t.parent.type==="surd"?r="radicand":t.parent.type==="genfrac"?r="fraction":t.parent.type==="sizeddelim"&&(r="delimiter"),r))return r;t.type==="subsup"?t.superscript&&t.subscript?r="superscript and subscript":t.superscript?r="superscript":t.subscript&&(r="subscript"):t.type&&(r=(e={accent:"accented",array:"array",box:"box",chem:"chemical formula",delim:"delimiter",enclose:"cross out","extensible-symbol":"extensible symbol",error:"error",first:"first",genfrac:"fraction",group:"group",latex:"LaTeX",leftright:"delimiter",line:"line",subsup:"subscript-superscript",operator:"operator",overunder:"over-under",placeholder:"placeholder",rule:"rule",sizeddelim:"delimiter",space:"space",spacing:"spacing",surd:"square root",text:"text",prompt:"prompt",root:"math field",mop:"operator"}[t.type])!=null?e:"parent")}else if(t.parent.type==="genfrac"){if(t.parentBranch==="above")return"numerator";if(t.parentBranch==="below")return"denominator"}else t.parent.type==="surd"?t.parentBranch==="above"&&(r="index"):t.parentBranch==="superscript"?r="superscript":t.parentBranch==="subscript"&&(r="subscript");return r??"parent"}function ch(t,e,r,a){let l="";if(e==="plonk"){globalThis.MathfieldElement.playSound("plonk"),t.flushInlineShortcutBuffer();return}if(e==="delete")l=Vr("deleted: ",a);else if(e==="focus"||e.includes("move"))l=Tb(t.model,r),l+=Db(t.model);else if(e==="replacement")l=Vr(t.model.at(t.model.position));else if(e==="line"){let u=Vr(t.model.root);t.keyboardDelegate.setAriaLabel(u)}else l=a?Vr(e+" ",a):e;if(l){let u=t.ariaLiveText.textContent.includes("")?"  ":"  ";t.ariaLiveText.textContent=l+u}}function Tb(t,e){if(Number.isNaN(e))return"";let r=t.at(e);if(!r||r.treeDepth<=t.at(t.position).treeDepth)return"";let a="",l=r.parent,u=t.at(t.position).parent;for(;l!==t.root&&l!==u;)a+=`out of ${Ic(l)};`,l=l.parent;return a}function Db(t){if(!t.selectionIsCollapsed)return`selected: ${Vr(t.getAtoms(t.selection))}`;let e="",r=t.at(t.position);if(r.isFirstSibling&&(e=`start of ${Ic(r)}: `),r.isLastSibling){if(!r.isFirstSibling){if(!r.parent.parent)return`${Vr(r)}; end of mathfield`;e=`${Vr(r)}; end of ${Ic(r)}`}}else e+=Vr(r);return e}var Ts=class{constructor(t,e,r){this.mathfield=t,this.mode=e,this.silenceNotifications=!1,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.root=r}dispose(){this.mathfield=void 0}getState(){let t={ranges:[...this._selection.ranges]};return this.selection.direction&&this.selection.direction!=="none"&&(t.direction=this.selection.direction),{content:this.root.toJson(),selection:t,mode:this.mode}}setState(t,e){var r;let a=this.silenceNotifications;this.silenceNotifications=(r=e?.silenceNotifications)!=null?r:!0;let l={};if(e?.type==="undo"&&(l={inputType:"historyUndo"}),e?.type==="redo"&&(l={inputType:"historyRedo"}),this.contentWillChange(l)){let u=this.silenceNotifications;this.silenceNotifications=!0,this.mode=t.mode,this.root=ft(t.content),this.selection=t.selection,this.silenceNotifications=u,this.contentDidChange(l),this.selectionDidChange()}this.silenceNotifications=a}get atoms(){return this.root.children}get selection(){return this._selection}set selection(t){this.setSelection(t)}setSelection(t,e){return!this.mathfield.contentEditable&&this.mathfield.userSelect==="none"?!1:this.deferNotifications({selection:!0,content:!0},()=>{var r,a,l;let u=this.normalizeSelection(t,e);if(u===void 0)throw new TypeError("Invalid selection");if(u.ranges.length===1&&u.ranges[0][0]===u.ranges[0][1]){let Z=u.ranges[0][0];if(!this.mathfield.dirty&&!((r=this.at(Z))!=null&&r.parentPrompt)&&this.mathfield.hasEditablePrompts){if((a=this.at(Z-1))!=null&&a.parentPrompt){this._anchor=this.normalizeOffset(Z-1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor);return}if((l=this.at(Z+1))!=null&&l.parentPrompt){this._anchor=this.normalizeOffset(Z+1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor);return}this._anchor=0,this._position=0,this._selection={ranges:[[0,0]]};return}this._anchor=Z,this._position=Z,this._selection=u;return}let d=le(u);u.direction==="backward"?[this._position,this._anchor]=d:[this._anchor,this._position]=d;let g=this.at(d[0]+1),E=this.at(d[1]),P=b.commonAncestor(g,E);P?.type==="array"&&g.parent===P&&E.parent===P?this._selection={ranges:[d],direction:u.direction}:this._selection={ranges:[d],direction:u.direction},this._position>=0&&this._position<=this.lastOffset})}setPositionHandlingPlaceholder(t){var e;let r=this.at(t);r?.type==="placeholder"?this.setSelection(t-1,t):((e=r?.rightSibling)==null?void 0:e.type)==="placeholder"?this.setSelection(t,t+1):this.position=t,r instanceof ue&&r.isSuggestion&&(r.isSuggestion=!1),this.mathfield.stopCoalescingUndo()}get position(){return this._position}set position(t){this.setSelection(t,t)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return Math.abs(this._anchor-this._position)===1?this.at(Math.max(this._anchor,this._position)).type==="placeholder":!1}collapseSelection(t="forward"){return this._anchor===this._position?!1:(t==="backward"?this.position=Math.min(this._anchor,this._position):this.position=Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(t){return this.atoms[t]}offsetOf(t){return this.atoms.indexOf(t)}getSiblingsRange(t){let e=this.at(t),{parent:r}=e;if(!r)return[0,this.lastOffset];let a=e.parent.branch(e.parentBranch);return[this.offsetOf(a[0]),this.offsetOf(a[a.length-1])]}getBranchRange(t,e){let r=this.at(t).branch(e);return[this.offsetOf(r[0]),this.offsetOf(r[r.length-1])]}getCellRange(t){var e;this.getParentCell(t);let r=this.at(t);if(r){for(;r&&((e=r.parent)==null?void 0:e.type)!=="array";)r=r.parent;if(!(!(r!=null&&r.parent)||r.parent.type!=="array"))return[this.offsetOf(r.firstSibling),this.offsetOf(r.lastSibling)]}}getAtoms(t,e,r){let a=r??{};if(Ui(t)){if(a=e??{},t.ranges.length>1)return t.ranges.reduce((P,Z)=>[...P,...this.getAtoms(Z,a)],[]);t=t.ranges[0]}let l,u;if(Ot(t)){if(l=t,!Ot(e))return[];u=e}else[l,u]=t,a=e??{};if(!Number.isFinite(l))return[];a.includeChildren===void 0&&(a.includeChildren=!1),l<0&&(l=this.lastOffset-l+1),u<0&&(u=this.lastOffset+u+1);let d=Math.min(l,u)+1,g=Math.max(l,u);if(!a.includeChildren&&d===1&&g===this.lastOffset)return[this.root];let E=[];for(let P=d;P<=g;P++){let Z=this.atoms[P];uh(this,Z,d,g)&&E.push(Z)}return a.includeChildren||(E=E.filter(P=>{let Z=!1,{parent:me}=P;for(;me&&!Z;)Z=uh(this,me,d,g),me=me.parent;return!Z})),E}findAtom(t,e=0,r="forward"){let a,l=this.lastOffset;if(r==="forward"){for(let u=e;u<=l;u++)if(a=this.atoms[u],t(a))return a;for(let u=0;u<e;u++)if(a=this.atoms[u],t(a))return a;return}for(let u=e;u>=0;u--)if(a=this.atoms[u],t(a))return a;for(let u=l;u>e;u--)if(a=this.atoms[u],t(a))return a}extractAtoms(t){var e;let r=this.getAtoms(t);r.length===1&&!r[0].parent&&r[0].isRoot&&(r[0]instanceof I?r=r[0].rows.flatMap(a=>a.flatMap(l=>l)):r=[...(e=r[0].body)!=null?e:r[0].children],r=r.filter(a=>a.type!=="first"));for(let a of r)a.parent.removeChild(a);return r}deleteAtoms(t){t!=null||(t=[0,-1]),this.extractAtoms(t),this.position=t[0]}atomToString(t,e){let r=e??"latex";if(r.startsWith("latex"))return b.serialize([t],{expandMacro:r==="latex-expanded",skipStyles:r==="latex-unstyled",skipPlaceholders:r==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode});if(r==="math-ml")return H(t);if(r==="spoken")return Mt(t);if(r==="spoken-text"){let a=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="";let l=Mt(t);return globalThis.MathfieldElement.textToSpeechMarkup=a,l}if(r==="spoken-ssml"||r==="spoken-ssml-with-highlighting"){let a=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="ssml";let l=Mt(t);return globalThis.MathfieldElement.textToSpeechMarkup=a,l}return r==="typst"?re(t):r==="plain-text"?ne(t,{plain:!0}):r==="ascii-math"?ne(t):(console.error(`MathLive 0.106.0: Unexpected format "${r}`),"")}getValue(t,e,r){if(t===void 0)return this.atomToString(this.root,"latex");if(typeof t=="string"&&t!=="math-json")return this.atomToString(this.root,t);let a,l;if(Ot(t)&&Ot(e)?(a=[this.normalizeRange([t,e])],l=r):ti(t)?(a=[this.normalizeRange(t)],l=e):Ui(t)?(a=t.ranges,l=e):(a=[this.normalizeRange([0,-1])],l=t),l!=null||(l="latex"),l==="math-json"){if(!globalThis.MathfieldElement.computeEngine)return window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`The CortexJS Compute Engine library is not available.
Load the library, for example with:
import "https://esm.run/@cortex-js/compute-engine"`),'["Error", "compute-engine-not-available"]';let u=this.getValue({ranges:a},"latex-unstyled");try{let d=globalThis.MathfieldElement.computeEngine.parse(u);return JSON.stringify(d.json)}catch(d){return JSON.stringify(["Error",`'${d.toString()}'`])}}if(l.startsWith("latex")){let u={expandMacro:l==="latex-expanded",skipStyles:l==="latex-unstyled",skipPlaceholders:l==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode};return R(a.map(d=>b.serialize(this.getAtoms(d),u)))}return a.map(u=>this.getAtoms(u).map(d=>this.atomToString(d,l)).join("")).join("")}extendSelectionTo(t,e){return!this.mathfield.contentEditable&&this.mathfield.userSelect==="none"?!1:this.deferNotifications({selection:!0},()=>{let r=this.normalizeRange([t,e]),[a,l]=r,{parent:u}=this.at(l);if(u&&(u.type==="genfrac"||u.type==="subsup"))for(;u!==this.root&&Nc(this,u,[a,l]);)l=this.offsetOf(u),u=u.parent;for(u=this.at(a).parent;u!==this.root&&Nc(this,u,[a,l]);)a=this.offsetOf(u.leftSibling),u=u.parent;if(u=this.at(l).parent,u?.type==="genfrac")for(;u!==this.root&&Nc(this,u,[a,l]);)l=this.offsetOf(u),u=u.parent;this._position=this.normalizeOffset(e),this._selection={ranges:[[a,l]],direction:"none"}})}announce(t,e,r=[]){var a,l;((l=(a=this.mathfield.host)==null?void 0:a.dispatchEvent(new CustomEvent("announce",{detail:{command:t,previousPosition:e,atoms:r},cancelable:!0,bubbles:!0,composed:!0})))==null||l)&&ch(this.mathfield,t,e,r)}deferNotifications(t,e){let r=this._selection,a=this._anchor,l=this._position,u=this.silenceNotifications;this.silenceNotifications=!0;let d=this.root.changeCounter;e(),this.silenceNotifications=u;let g=a!==this._anchor||l!==this._position||am(this._selection,r)==="different";t.selection&&g&&this.selectionDidChange();let E=this.root.changeCounter!==d;return t.content&&E&&this.contentDidChange({inputType:t.type}),E||g}normalizeOffset(t){return t>0?t=Math.min(t,this.lastOffset):t<0&&(t=this.lastOffset+t+1),t}normalizeRange(t){let[e,r]=t;return e=this.normalizeOffset(e),r=this.normalizeOffset(r),e<r?[e,r]:[r,e]}normalizeSelection(t,e){var r;let a;if(Ot(t)){let l=this.normalizeOffset(t);if(Ot(e)){let u=this.normalizeOffset(e);a=l<=u?{ranges:[[l,u]],direction:"none"}:{ranges:[[u,l]],direction:"backward"}}else a={ranges:[[l,l]],direction:"none"}}else if(ti(t)){let l=this.normalizeOffset(t[0]),u=this.normalizeOffset(t[1]);a=l<=u?{ranges:[[l,u]],direction:"none"}:{ranges:[[u,l]],direction:"backward"}}else Ui(t)&&(a={ranges:t.ranges.map(l=>this.normalizeRange(l)),direction:(r=t.direction)!=null?r:"none"});return a}get parentEnvironment(){let t=this.at(this.position).parent;if(t){for(;t.parent&&t.type!=="array";)t=t.parent;if(t.type==="array")return t}}get parentCell(){return this.getParentCell(this.position)}getParentCell(t){var e;let r=this.at(t);if(r){for(;r&&((e=r.parent)==null?void 0:e.type)!=="array";)r=r.parent;if(!(!(r!=null&&r.parent)||r.parent.type!=="array"))return r.parentBranch}}contentWillChange(t={}){if(this.silenceNotifications||!this.mathfield)return!0;let e=this.silenceNotifications;this.silenceNotifications=!0;let r=this.mathfield.onContentWillChange(t);return this.silenceNotifications=e,r}contentDidChange(t){if(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this.mathfield)),this.silenceNotifications||!this.mathfield||!this.mathfield.host)return;let e=this.silenceNotifications;this.silenceNotifications=!0,setTimeout(()=>{var r;!this.mathfield||!rt(this.mathfield)||!this.mathfield.host||this.mathfield.host.dispatchEvent(new InputEvent("input",f(p({},t),{data:t.data?t.data:(r=t.inputType)!=null?r:"",bubbles:!0,composed:!0})))},0),this.silenceNotifications=e}selectionDidChange(){if(!this.mathfield)return;let t=this.silenceNotifications;t||(this.silenceNotifications=!0,this.mathfield.onSelectionDidChange()),this.silenceNotifications=t}};function uh(t,e,r,a){let l=t.offsetOf(e);if(l<r||l>a)return!1;if(!e.hasChildren)return!0;let u=t.offsetOf(e.firstChild);if(u>=r&&u<=a){let d=t.offsetOf(e.lastChild);if(d>=r&&d<=a)return!0}return!1}function Nc(t,e,r){if(!(e!=null&&e.hasChildren))return!1;let[a,l]=r,u=t.offsetOf(e.firstChild),d=t.offsetOf(e.lastChild);return u>=a&&u<=l&&d>=u&&d<=l}function Eo(t,e,r,a){var l,u,d,g,E,P;let Z=r.parent;if(We(a)&&r instanceof I&&r.isMultiline&&Kb(t,r,a[0],e))return!0;if(Z&&r instanceof G){let me=!a&&e==="forward"||a==="body"&&e==="backward",_e=me?t.offsetOf(r.firstChild):t.offsetOf(r.lastChild);return me?r.rightDelim!=="?"&&r.rightDelim!=="."?(r.leftDelim=".",r.isDirty=!0):(Z.addChildrenAfter(r.removeBranch("body"),r),Z.removeChild(r),_e--):r.leftDelim!=="?"&&r.leftDelim!=="."?(r.rightDelim=".",r.isDirty=!0):(Z.addChildrenAfter(r.removeBranch("body"),r),Z.removeChild(r),_e--),t.position=_e,!0}if(Z&&r.type==="surd"){if(e==="forward"&&!a||e==="backward"&&a==="body"){let me=r.leftSibling;r.hasChildren&&Z.addChildrenAfter(r.removeBranch("body"),r),Z.removeChild(r),t.position=t.offsetOf(me)}else e==="forward"&&a==="body"?t.position=t.offsetOf(r):!a&&e==="backward"?r.hasChildren?t.position=t.offsetOf(r.lastChild):(t.position=Math.max(0,t.offsetOf(r)-1),Z.removeChild(r)):a==="above"&&(r.hasEmptyBranch("above")&&r.removeBranch("above"),e==="backward"?t.position=t.offsetOf(r.leftSibling):t.position=t.offsetOf(r.body[0]));return!0}if(Z&&(r.type==="box"||r.type==="enclose")){let me=a&&e==="backward"||!a&&e==="forward"?r.leftSibling:r.lastChild;return Z.addChildrenAfter(r.removeBranch("body"),r),Z.removeChild(r),t.position=t.offsetOf(me),!0}if(r.type==="genfrac"||r.type==="overunder"){if(!a)return r.type==="overunder"&&r.hasEmptyBranch("body")||r.type==="genfrac"&&r.hasEmptyBranch("below")&&r.hasEmptyBranch("above")?!1:(t.position=t.offsetOf(e==="forward"?r.firstChild:r.lastChild),!0);let me=xt.fractionNavigationOrder==="numerator-denominator"?"above":"below",_e=me==="above"?"below":"above";if(Z&&(e==="forward"&&a===me||e==="backward"&&a===_e)){let He=r.removeBranch(me),Xe=r.removeBranch(_e);return Z.addChildrenAfter([...He,...Xe],r),Z.removeChild(r),t.position=t.offsetOf(He.length>0?He[He.length-1]:Xe[0]),!0}return e==="backward"?t.position=t.offsetOf(r.leftSibling):t.position=t.offsetOf(r),!0}if(r.type==="extensible-symbol"||r.type==="subsup"){if(!a&&e==="forward")return!1;if(!a){if(r.subscript||r.superscript){let me=e==="forward"?(d=(l=r.superscript)==null?void 0:l[0])!=null?d:(u=r.subscript)==null?void 0:u[0]:(P=(g=r.subscript)==null?void 0:g[0].lastSibling)!=null?P:(E=r.superscript)==null?void 0:E[0].lastSibling;return me&&(t.position=t.offsetOf(me)),!0}return!1}if(!r.hasChildren&&r.type==="subsup"){let me=e==="forward"?t.offsetOf(r):Math.max(0,t.offsetOf(r)-1);return r.parent.removeChild(r),t.position=me,!0}if(a==="superscript")if(e==="backward"){let me=t.offsetOf(r.firstChild)-1;t.position=me}else r.subscript?t.position=t.offsetOf(r.subscript[0]):t.position=t.offsetOf(r);else a==="subscript"&&(e==="backward"&&r.superscript?t.position=t.offsetOf(r.superscript[0].lastSibling):e==="backward"?t.position=t.offsetOf(r.firstChild)-1:t.position=t.offsetOf(r));if(a&&r.hasEmptyBranch(a)&&(r.removeBranch(a),r.type==="subsup"&&!r.subscript&&!r.superscript)){let me=e==="forward"?t.offsetOf(r):Math.max(0,t.offsetOf(r)-1);r.parent.removeChild(r),t.position=me}return!0}if(Z?.type==="genfrac"&&!a&&r.type!=="first"){let me=t.offsetOf(r.leftSibling);return Z.removeChild(r),Z.hasEmptyBranch("above")&&Z.hasEmptyBranch("below")?(me=t.offsetOf(Z.leftSibling),Z.parent.removeChild(Z),t.announce("delete",void 0,[Z]),t.position=me,!0):(t.announce("delete",void 0,[r]),t.position=me,!0)}if(e==="backward"&&(Z?.command==="\\ln"||Z?.command==="\\log")&&r.parentBranch!=="body"){let me=t.offsetOf(Z.leftSibling);return Z.parent.removeChild(Z),t.announce("delete",void 0,[Z]),t.position=me,!0}return!1}function dh(t){return!t.mathfield.isSelectionEditable||!t.contentWillChange({inputType:"deleteContentBackward"})?!1:t.selectionIsCollapsed?t.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let e=t.at(t.position);if(!(e&&Eo(t,"backward",e))){if(e!=null&&e.isFirstSibling){if(Eo(t,"backward",e.parent,e.parentBranch))return;e=null}if(!e){t.announce("plonk");return}t.position=t.offsetOf(e.leftSibling),e.parent.removeChild(e),t.announce("delete",void 0,[e])}}):Je(t,le(t.selection),"deleteContentBackward")}function mh(t){return!t.mathfield.isSelectionEditable||!t.contentWillChange({inputType:"deleteContentForward"})?!1:t.selectionIsCollapsed?t.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var e,r;let a=t.at(t.position).rightSibling;if(a&&Eo(t,"forward",a))return;if(a){if(t.at(t.position).isLastSibling&&Eo(t,"forward",a.parent,a.parentBranch))return}else{if(a=t.at(t.position),a.isLastSibling&&Eo(t,"forward",a.parent,a.parentBranch))return;a=void 0}if(t.position===t.lastOffset||!a){t.announce("plonk");return}a.parent.removeChild(a);let l=(e=t.at(t.position))==null?void 0:e.rightSibling;for(;l?.type==="subsup";)l.parent.removeChild(l),l=(r=t.at(t.position))==null?void 0:r.rightSibling;t.announce("delete",void 0,[a])}):Je(t,le(t.selection),"deleteContentForward")}function Je(t,e,r){let a=t.getAtoms(e);if(a.length>0&&a[0].parent){let l=a[0];for(;l&&!(l instanceof I);)l=l.parent;let u=a[a.length-1];for(;u&&!(u instanceof I);)u=u.parent;if(l&&l instanceof I){let Z=l;if(Z&&u===Z&&Z.isMultiline){let[me,_e]=[Math.min(t.position,t.anchor),Math.max(t.position,t.anchor)],[He,Xe]=t.at(me).parentBranch,[wt,Do]=t.at(_e).parentBranch;if(wt-He+1>2){t.extractAtoms([me,_e]);for(let Ko=He+1;Ko<wt;Ko++)Z.removeRow(Ko);return t.position=me,!0}}}let d=a[0].parent.firstChild;d.type==="first"&&(d=d.rightSibling);let g=a[a.length-1].parent.lastChild,E=a[0];E.type==="first"&&(E=E.rightSibling);let P=a[a.length-1];if(E===d&&P===g){let Z=a[0].parent;Z.parent&&Z.type!=="prompt"&&(e=[t.offsetOf(Z.leftSibling),t.offsetOf(Z)])}if(a.length===1&&a[0].type==="placeholder"&&a[0].parent.type==="genfrac"){let Z=a[0].parent,me=a[0].parentBranch==="below"?"above":"below",_e=t.offsetOf(Z.leftSibling);return t.deferNotifications({content:!0,selection:!0,type:r},()=>{var He,Xe;let wt=Z.removeBranch(me);if(wt.length===1&&wt[0].type==="placeholder")(Xe=Z.parent)==null||Xe.removeChild(Z),t.position=Math.max(0,_e);else{let Do=Z.parent.addChildrenAfter(wt,Z);(He=Z.parent)==null||He.removeChild(Z),t.position=t.offsetOf(Do)}})}}return t.deferNotifications({content:!0,selection:!0,type:r},()=>t.deleteAtoms(e))}function Kb(t,e,r,a){if(!(e instanceof I)||!e.isMultiline||e.rows.length===1||e.rows[r].length>1)return!1;let l=e.getCell(r,0);if(e.removeRow(r),a==="backward"){let u=e.getCell(r-1,0);t.position=t.offsetOf(u[u.length-1]),e.setCell(r-1,0,[...u,...l])}else{let u=e.getCell(r,0);t.position=t.offsetOf(u[0]),e.setCell(r,0,[...l,...u])}return!0}pe({deleteAll:t=>t.contentWillChange({inputType:"deleteContent"})&&Je(t,[0,-1],"deleteContent"),deleteForward:t=>mh(t),deleteBackward:t=>dh(t),deleteNextWord:t=>t.contentWillChange({inputType:"deleteWordForward"})&&Je(t,[t.anchor,hs(t,t.position,"forward")],"deleteWordForward"),deletePreviousWord:t=>t.contentWillChange({inputType:"deleteWordBackward"})&&Je(t,[t.anchor,hs(t,t.position,"backward")],"deleteWordBackward"),deleteToGroupStart:t=>t.contentWillChange({inputType:"deleteSoftLineBackward"})&&Je(t,[t.anchor,t.offsetOf(t.at(t.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:t=>t.contentWillChange({inputType:"deleteSoftLineForward"})&&Je(t,[t.anchor,t.offsetOf(t.at(t.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:t=>t.contentWillChange({inputType:"deleteHardLineBackward"})&&Je(t,[t.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:t=>t.contentWillChange({inputType:"deleteHardLineForward"})&&Je(t,[t.anchor,-1],"deleteHardLineForward")},{target:"model",audioFeedback:"delete",canUndo:!0,changeContent:!0,changeSelection:!0});var Ob=`<svg xmlns="http://www.w3.org/2000/svg" style="width: 21px;"  viewBox="0 0 576 512" role="img" aria-label="${z("tooltip.toggle virtual keyboard")}"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg>`,Bb=`<svg xmlns="http://www.w3.org/2000/svg" style="height: 18px;" viewBox="0 0 448 512" role="img" aria-label="${z("tooltip.menu")}"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>`,Ds=class{constructor(t,e){this.focusBlurInProgress=!1,this.connectedToVirtualKeyboard=!1;var r,a,l;this.options=p(f(p({},bn()),{macros:Ei(),registers:Pa()}),gn(e)),this.eventController=new AbortController;let u=this.eventController.signal;e.eventSink&&(this.host=e.eventSink),this.element=t,t.mathfield=this,this.blurred=!0,this.keystrokeCaptionVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.defaultStyle={},this.styleBias="left",this.options.defaultMode==="inline-math"?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline"),this.dirty=!1;let d=(a=(r=e.value)!=null?r:this.element.textContent)!=null?a:"";d=d.trim();let g=sc(this.options),E=he(d,{context:this.context}),P;E.length===1&&E[0].isRoot?P=E[0]:P=new b({type:"root",mode:g,body:E}),this.model=new Ts(this,g,P),this.undoManager=new us(this.model);let Z=[];if(Z.push("<span contenteditable=true role=textbox aria-autocomplete=none aria-multiline=false part=keyboard-sink class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=0></span>"),Z.push('<span part=container class=ML__container  style="visibility:hidden">'),Z.push("<span part=content class=ML__content>"),Z.push(ec(this)),Z.push("</span>"),window.mathVirtualKeyboard&&(Z.push(`<div part=virtual-keyboard-toggle class=ML__virtual-keyboard-toggle role=button ${this.hasEditableContent?"":'style="display:none;"'} data-l10n-tooltip="tooltip.toggle virtual keyboard">`),Z.push(Ob),Z.push("</div>")),Z.push('<div part=menu-toggle class=ML__menu-toggle role=button data-l10n-tooltip="tooltip.menu">'),Z.push(Bb),Z.push("</div>"),Z.push("</span>"),Z.push("<span class=ML__sr-only>"),Z.push("<span role=status aria-live=assertive aria-atomic=true></span>"),Z.push("</span>"),this.element.innerHTML=globalThis.MathfieldElement.createHTML(Z.join("")),!this.element.children){console.error("%cMathLive 0.106.0: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include `runtimeCompiler: true` in your Vue configuration. There may a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");return}this._l10Subscription=N.subscribe(()=>N.update(this.element)),N.update(this.element),this.field=this.element.querySelector("[part=content]"),this.field.addEventListener("click",_e=>_e.stopImmediatePropagation(),{capture:!1,signal:u}),this.field.addEventListener("wheel",this,{passive:!1,signal:u}),"PointerEvent"in window?this.field.addEventListener("pointerdown",this,{signal:u}):this.field.addEventListener("mousedown",this,{signal:u}),(l=this.element.querySelector("[part=virtual-keyboard-toggle]"))==null||l.addEventListener("click",()=>{window.mathVirtualKeyboard.visible?window.mathVirtualKeyboard.hide():(window.mathVirtualKeyboard.show({animate:!0}),window.mathVirtualKeyboard.update(Vt(this)))},{signal:u}),this.field.addEventListener("contextmenu",this,{signal:u});let me=this.element.querySelector("[part=menu-toggle]");me?.addEventListener("pointerdown",_e=>{if(_e.currentTarget!==me)return;let He=this.menu;if(He.state!=="closed")return;this.element.classList.add("tracking");let Xe=me.getBoundingClientRect();He.modifiers=Nt(_e),He.show({target:me,location:{x:Xe.left,y:Xe.bottom},onDismiss:()=>this.element.classList.remove("tracking")}),_e.preventDefault(),_e.stopPropagation()},{signal:u}),(this.model.atoms.length<=1||this.disabled||this.readOnly&&!this.hasEditableContent||this.userSelect==="none")&&(me.style.display="none"),this.ariaLiveText=this.element.querySelector("[role=status]"),this.keyboardDelegate=tp(this.element.querySelector(".ML__keyboard-sink"),this.element,this),window.addEventListener("resize",this,{signal:u}),document.addEventListener("scroll",this,{signal:u}),this.resizeObserver=new ResizeObserver(_e=>{if(this.resizeObserverStarted){this.resizeObserverStarted=!1;return}U(this)}),this.resizeObserverStarted=!0,this.resizeObserver.observe(this.field),window.mathVirtualKeyboard.addEventListener("virtual-keyboard-toggle",this,{signal:u}),Be!=="ready"&&document.fonts.ready.then(()=>ao(this)),t.querySelector("[part=container]").style.removeProperty("visibility"),this.undoManager.startRecording(),this.undoManager.snapshot("set-value"),U(this)}connectToVirtualKeyboard(){this.connectedToVirtualKeyboard||(this.connectedToVirtualKeyboard=!0,window.addEventListener("message",this,{signal:this.eventController.signal}),window.mathVirtualKeyboard.connect(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this)),vo(this))}disconnectFromVirtualKeyboard(){this.connectedToVirtualKeyboard&&(window.removeEventListener("message",this),window.mathVirtualKeyboard.disconnect(),this.connectedToVirtualKeyboard=!1,_s())}showMenu(t){var e,r;let a=(r=(e=t?.location)!=null?e:Ji(this.field))!=null?r:void 0,l=t?.modifiers,u=this.element.querySelector("[part=container]");return this._menu.show({target:u,location:a,modifiers:l})}get colorMap(){return t=>{var e,r,a;return(a=(r=(e=this.options).colorMap)==null?void 0:r.call(e,t))!=null?a:Hr(t)}}get backgroundColorMap(){return t=>{var e,r,a,l,u,d;return(d=(u=(r=(e=this.options).backgroundColorMap)==null?void 0:r.call(e,t))!=null?u:(l=(a=this.options).colorMap)==null?void 0:l.call(a,t))!=null?d:Si(t)}}get smartFence(){var t;return(t=this.options.smartFence)!=null?t:!1}get readOnly(){var t;return(t=this.options.readOnly)!=null?t:!1}get disabled(){var t,e;return(e=(t=this.host)==null?void 0:t.disabled)!=null?e:!1}get contentEditable(){return this.host?this.host.getAttribute("contenteditable")!=="false":!1}get userSelect(){if(!this.host)return"";let t=getComputedStyle(this.host);return t.getPropertyValue("user-select")||t.getPropertyValue("-webkit-user-select")}get hasEditableContent(){return this.disabled||!this.contentEditable?!1:!this.readOnly||this.hasEditablePrompts}get hasEditablePrompts(){return this.readOnly&&!this.disabled&&this.contentEditable&&this.model.findAtom(t=>t.type==="prompt"&&!t.locked)!==void 0}get isSelectionEditable(){if(this.disabled||!this.contentEditable)return!1;if(!this.readOnly)return!0;let t=this.model.at(this.model.anchor),e=this.model.at(this.model.position),r=b.commonAncestor(t,e);return!!(r?.type==="prompt"||r!=null&&r.parentPrompt)}get letterShapeStyle(){var t;return(t=this.options.letterShapeStyle)!=null?t:"tex"}get minFontScale(){return this.options.minFontScale}get maxMatrixCols(){return this.options.maxMatrixCols}queryStyle(t){let e=ts(this,t);"verbatimColor"in e&&delete e.verbatimColor,"verbatimBackgroundColor"in e&&delete e.verbatimBackgroundColor;let r=Object.keys(e).length;if(r===0)return"all";if(r>1){for(let E of Object.keys(e)){let P=this.queryStyle({[E]:e[E]});if(P==="none")return"none";if(P==="some")return"some"}return"all"}let a=Object.keys(e)[0],l=e[a];if(this.model.selectionIsCollapsed)return rr(this)[a]===l?"all":"none";let u=this.model.getAtoms(this.model.selection,{includeChildren:!0}),d=u.length;if(d===0)return"none";let g=0;for(let E of u){if(E.type==="first"){d-=1;continue}E.style[a]===l&&(g+=1)}return g===0?"none":g===d?"all":"some"}get keybindings(){var t,e;if(this._keybindings)return this._keybindings;let[r,a]=op(this.options.keybindings,(t=Dr())!=null?t:Qm());return((e=Dr())==null?void 0:e.score)>0&&(this._keybindings=r,a.length>0&&console.error("MathLive 0.106.0: Invalid keybindings for current keyboard layout",a)),r}get menu(){return this._menu!=null||(this._menu=new Mo(ah(this),{host:this.host})),this._menu}set menuItems(t){this._menu?this._menu.menuItems=t:this._menu=new Mo(t,{host:this.host})}setOptions(t){var e;this.options=p(p({},this.options),gn(t)),this._keybindings=void 0,this.options.defaultMode==="inline-math"?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline");let r=this.options.defaultMode;r==="inline-math"&&(r="math"),((e=this.model.root.firstChild)==null?void 0:e.mode)!==r&&(this.model.root.firstChild.mode=r),this.options.readOnly&&this.hasFocus()&&window.mathVirtualKeyboard.visible&&this.executeCommand("hideVirtualKeyboard");let a=b.serialize([this.model.root],{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in t||this.model.getValue()!==a)&&tc(this),("value"in t||"registers"in t||"colorMap"in t||"backgroundColorMap"in t||"letterShapeStyle"in t||"minFontScale"in t||"maxMatrixCols"in t||"readOnly"in t||"placeholderContent"in t||"placeholderSymbol"in t)&&U(this)}getOptions(t){return or(this.options,t)}getOption(t){return or(this.options,t)}async handleEvent(t){var e;if(rt(this)){if(co(t)){if(!Gi(t.origin,(e=this.options.originValidator)!=null?e:"none"))throw new DOMException(`Message from unknown origin (${t.origin}) cannot be handled`,"SecurityError");let{action:r}=t.data;if(r==="execute-command"){let a=hi(t.data.command);if(!a||nr(a)==="virtual-keyboard")return;this.executeCommand(a)}else r==="update-state"||(r==="focus"?this.focus({preventScroll:!0}):r==="blur"&&this.blur());return}switch(t.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":this.userSelect!=="none"&&yc(this,t);break;case"pointerdown":!t.defaultPrevented&&this.userSelect!=="none"&&(yc(this,t),t.shiftKey===!1&&await Sc(t,this.element.querySelector("[part=container]"),this.menu)&&xi.stop());break;case"contextmenu":this.userSelect!=="none"&&t.shiftKey===!1&&await Sc(t,this.element.querySelector("[part=container]"),this.menu)&&xi.stop();break;case"virtual-keyboard-toggle":this.hasFocus()&&vo(this),this.hasFocus()&&(this.keyboardDelegate.blur(),this.keyboardDelegate.focus());break;case"resize":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>rt(this)&&this.onGeometryChange());break;case"scroll":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>rt(this)&&this.onGeometryChange());break;case"wheel":this.onWheel(t);break;case"message":break;default:console.warn("Unexpected event type",t.type)}}}dispose(){if(!rt(this))return;N.unsubscribe(this._l10Subscription),this.keyboardDelegate.dispose(),this.keyboardDelegate=void 0,this.eventController.abort(),this.eventController=void 0,this.resizeObserver.disconnect(),window.mathVirtualKeyboard.removeEventListener("virtual-keyboard-toggle",this),this.disconnectFromVirtualKeyboard(),this.model.dispose();let t=this.element;delete t.mathfield,this.element=void 0,this.host=void 0,this.field=void 0,this.ariaLiveText=void 0,Ep(),lp(),Pp()}flushInlineShortcutBuffer(t){if(t!=null||(t={defer:!1}),!t.defer){this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=0;return}this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(t){return nr(t)==="virtual-keyboard"?(this.focus({preventScroll:!0}),window.mathVirtualKeyboard.executeCommand(t),requestAnimationFrame(()=>window.mathVirtualKeyboard.update(Vt(this))),!1):pp(this,t)}get errors(){return ja(this.model.getValue(),{context:this.context})}getValue(t,e,r){return this.model.getValue(t,e,r)}setValue(t,e){var r;e=e??{mode:"math"},e.insertionMode===void 0&&(e.insertionMode="replaceAll"),(e.format===void 0||e.format==="auto")&&(e.format="latex"),(e.mode===void 0||e.mode==="auto")&&(e.mode=(r=sm(this.model,this.model.position))!=null?r:"math");let a=this.undoManager.canUndo();V.insert(this.model,t,e)&&(U(this),a||this.undoManager.reset(),this.undoManager.snapshot("set-value"))}get expression(){let t=globalThis.MathfieldElement.computeEngine;return t?t.box(t.parse(this.model.getValue("latex-unstyled"))):(console.error("MathLive 0.106.0:  no compute engine available. Make sure the Compute Engine library is loaded."),null)}scrollIntoView(){var t;if(!this.element)return;if(this.host){if(this.options.onScrollIntoView)this.options.onScrollIntoView(this);else if(this.host.scrollIntoView({block:"nearest",inline:"nearest"}),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.container===window.document.body){let a=window.mathVirtualKeyboard.boundingRect,l=this.host.getBoundingClientRect();l.bottom>a.top&&((t=window.document.scrollingElement)==null||t.scrollBy(0,l.bottom-a.top+8))}}this.dirty&&bt(this,{interactive:!0});let e=this.field.getBoundingClientRect(),r=null;if(this.model.selectionIsCollapsed)r=Ji(this.field);else{let a=Na(this);if(a.length>0){let l=-1/0,u=-1/0;for(let d of a)d.right>l&&(l=d.right),d.top<u&&(u=d.top);r={x:l+e.left-this.field.scrollLeft,y:u+e.top-this.field.scrollTop,height:0}}}if(this.host&&r){let a=this.host.getBoundingClientRect(),l=r.y,u=this.host.scrollTop;l<a.top?u=l-a.top+this.host.scrollTop:l>a.bottom&&(u=l-a.bottom+this.host.scrollTop+r.height),this.host.scroll({top:u,left:0})}if(r){let a=r.x-window.scrollX,l=this.field.scrollLeft;a<e.left?l=a-e.left+this.field.scrollLeft-20:a>e.right&&(l=a-e.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:l})}}insert(t,e){if(typeof t!="string"||t.length===0&&(e?.insertionMode==="insertBefore"||e?.insertionMode==="insertAfter")||t.length===0&&this.model.selectionIsCollapsed)return!1;if(this.flushInlineShortcutBuffer(),e=e??{mode:"math"},e.focus&&this.focus(),e.feedback&&(globalThis.MathfieldElement.keypressVibration&&Ro()&&navigator.vibrate(ic),globalThis.MathfieldElement.playSound("keypress")),t==="\\\\")lc(this.model);else if(t==="&")cc(this.model);else if(this.model.selectionIsCollapsed){let r=p({},rr(this));!/^[a-zA-Z0-9]$/.test(t)&&this.styleBias!=="none"&&(r.variant="normal",r.variantStyle=void 0),V.insert(this.model,t,p({style:r},e))}else V.insert(this.model,t,e);return this.snapshot(`insert-${this.model.at(this.model.position).type}`),U(this),e.scrollIntoView&&this.scrollIntoView(),!0}switchMode(t,e="",r=""){if(this.model.mode===t||!this.hasEditableContent||!this.contentEditable||this.disabled)return;let{model:a}=this,l=a.mode;if(a.mode=t,this.host&&!this.host.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))){a.mode=l;return}a.mode=l,a.deferNotifications({content:!!r||!!e,selection:!0,type:"insertText"},()=>{let u=a.at(a.position),d=(Z,me)=>{if(!Z)return;let _e=a.mode==="math"?he(Yt(Z,{format:"ascii-math"})[1],{context:this.context}):[...Z].map(He=>new $e(He,He,{}));if(me.select){let He=u.parent.addChildrenAfter(_e,u);a.setSelection(a.offsetOf(_e[0].leftSibling),a.offsetOf(He))}else a.position=a.offsetOf(u.parent.addChildrenAfter(_e,u));P=!0},g=(Z,me)=>{let _e=new Rt(Z);u.parent.addChildAfter(_e,u),me.select?a.setSelection(a.offsetOf(_e.firstChild),a.offsetOf(_e.lastChild)):a.position=a.offsetOf(_e.lastChild),P=!0},E=()=>{let Z=t==="latex"?"latex":t==="math"?"plain-text":"ascii-math",me=le(a.selection),_e=this.model.getValue(me,Z),He=this.model.extractAtoms(me);return He.length===1&&He[0].type==="placeholder"&&(_e=r),u=a.at(me[0]),_e},P=!1;if(this.flushInlineShortcutBuffer(),this.stopCoalescingUndo(),$t(this,"accept"),a.selectionIsCollapsed)d(e,{select:!1}),a.mode=t,t==="latex"?g(r,{select:!1}):d(r,{select:!1});else{let Z=E();a.mode=t,t==="latex"?g(Z,{select:!0}):d(Z,{select:!0})}return U(this),this.undoManager.snapshot(t==="latex"?"insert-latex":"insert"),P}),a.mode=t,window.mathVirtualKeyboard.update(Vt(this))}hasFocus(){return!this.blurred}focus(t){var e;this.focusBlurInProgress||(this.hasFocus()||(this.onFocus(),this.model.announce("line")),(e=t?.preventScroll)!=null&&e||this.scrollIntoView())}blur(){this.disconnectFromVirtualKeyboard(),this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]},this.focus()}applyStyle(t,e={}){var r;let a,l="set",u=!1;ti(e)?a=e:(e.operation==="toggle"&&(l="toggle"),a=e.range,u=(r=e.silenceNotifications)!=null?r:!1),a&&(a=this.model.normalizeRange(a)),a&&a[0]===a[1]&&(a=void 0);let d=ts(this,t);if(a===void 0&&this.model.selectionIsCollapsed){if(l==="set"){let E=p({},this.defaultStyle);"color"in d&&delete E.verbatimColor,"backgroundColor"in d&&delete E.verbatimBackgroundColor,this.defaultStyle=p(p({},E),d),this.styleBias="none";return}let g=p({},this.defaultStyle);for(let E of Object.keys(d))g[E]===d[E]?(E==="color"&&delete g.verbatimColor,E==="backgroundColor"&&delete g.verbatimBackgroundColor,delete g[E]):g[E]=d[E];this.defaultStyle=g,this.styleBias="none";return}this.model.deferNotifications({content:!u,type:"insertText"},()=>{if(a===void 0)for(let g of this.model.selection.ranges)eo(this.model,g,d,{operation:l});else eo(this.model,a,d,{operation:l})}),U(this)}toggleContextMenu(){var t;let e=this.menu;if(!e.visible)return!1;if(e.state==="open")return e.hide(),!0;let r=(t=$a(this,this.model.position))==null?void 0:t.bounds;if(!r)return!1;let a={x:r.right,y:r.bottom};return e.show({target:this.element.querySelector("[part=container]"),location:a,onDismiss:()=>{var l;return(l=this.element)==null?void 0:l.focus()}}),!0}getPrompt(t){return this.model.findAtom(r=>r.type==="prompt"&&r.placeholderId===t)}getPromptValue(t,e){let r=this.getPrompt(t);if(!r)return"";let a=this.model.offsetOf(r.firstChild),l=this.model.offsetOf(r.lastChild);return this.model.getValue(a,l,e)}getPrompts(t){return this.model.atoms.filter(e=>e.type!=="prompt"?!1:t?!(t.id&&e.placeholderId!==t.id||t.locked&&e.locked!==t.locked||t.correctness==="undefined"&&e.correctness||t.correctness&&e.correctness!==t.correctness):!0).map(e=>e.placeholderId)}setPromptValue(t,e,r){if(e!==void 0){let a=this.getPrompt(t);if(!a){console.error(`MathLive 0.106.0: unknown prompt ${t}`);return}let l=this.model.getBranchRange(this.model.offsetOf(a),"body");this.model.setSelection(l),this.insert(e,f(p({},r),{insertionMode:"replaceSelection"}))}r!=null&&r.silenceNotifications&&(this.valueOnFocus=this.getValue()),U(this)}setPromptState(t,e,r){let a=this.getPrompt(t);if(!a){console.error(`MathLive 0.106.0: unknown prompt ${t}`);return}e==="undefined"?a.correctness=void 0:typeof e=="string"&&(a.correctness=e),typeof r=="boolean"&&(a.locked=r,a.captureSelection=r),U(this)}getPromptState(t){let e=this.getPrompt(t);return e?[e.correctness,e.locked]:(console.error(`MathLive 0.106.0: unknown prompt ${t}`),[void 0,!0])}getPromptRange(t){let e=this.getPrompt(t);return e?this.model.getBranchRange(this.model.offsetOf(e),"body"):(console.error(`MathLive 0.106.0: unknown prompt ${t}`),[0,0])}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this))}snapshot(t){var e;this.undoManager.snapshot(t)&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this)),(e=this.host)==null||e.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}stopCoalescingUndo(){this.undoManager.stopCoalescing(this.model.selection)}stopRecording(){this.undoManager.stopRecording()}startRecording(){this.undoManager.startRecording()}undo(){var t;this.undoManager.undo()&&((t=this.host)==null||t.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var t;this.undoManager.redo()&&((t=this.host)==null||t.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"redo"}})))}resetUndo(){var t;(t=this.undoManager)==null||t.reset()}onSelectionDidChange(){var t,e;let r=this.model;if(this.keyboardDelegate.setValue(r.getValue(r.selection,"latex-expanded")),r.selectionIsCollapsed){let a=io(r),l=r.position,u=r.at(l),d=(t=u.mode)!=null?t:sc(this.options);if(a&&(l<r.offsetOf(a.firstChild)-1||l>r.offsetOf(a.lastChild)+1))$t(this,"accept",{mode:d}),r.position=r.offsetOf(u);else{let g=r.at(l+1);g?.type==="first"&&g.mode==="latex"?r.position=l+1:a&&g?.mode!=="latex"?r.position=l-1:this.switchMode(d)}}(e=this.host)==null||e.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0})),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this)),vo(this)}onContentWillChange(t){var e,r,a;return(a=(r=this.host)==null?void 0:r.dispatchEvent(new InputEvent("beforeinput",f(p({},t),{data:t.data?t.data:(e=t.inputType)!=null?e:"",cancelable:!0,bubbles:!0,composed:!0}))))!=null?a:!0}onFocus(){this.focusBlurInProgress||!this.blurred||(this.focusBlurInProgress=!0,this.blurred=!1,this.stopCoalescingUndo(),this.valueOnFocus=this.model.getValue(),this.hasEditablePrompts&&!this.model.at(this.model.anchor).parentPrompt&&this.executeCommand("moveToNextPlaceholder"),bt(this,{interactive:!0}),setTimeout(()=>{var t;if(!rt(this))return;let e=new AbortController,r=e.signal;for(let a of["focus","blur","focusin","focusout"])(t=this.host)==null||t.addEventListener(a,l=>{l.preventDefault(),l.stopPropagation()},{once:!0,capture:!0,signal:r});this.keyboardDelegate.blur(),this.keyboardDelegate.focus(),this.connectToVirtualKeyboard(),this.focusBlurInProgress=!1,e.abort()},60))}onBlur(){var t,e,r;if(!(this.focusBlurInProgress||this.blurred)&&(this.focusBlurInProgress=!0,this.stopCoalescingUndo(),this.blurred=!0,this.ariaLiveText.textContent="",Br(this),this.model.getValue()!==this.valueOnFocus&&((t=this.host)==null||t.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),this.disconnectFromVirtualKeyboard(),(e=this.host)==null||e.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),(r=this.host)==null||r.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0})),U(this),this.focusBlurInProgress=!1,_s(),mn.restoreFocusWhenDocumentFocused)){let a=new AbortController,l=a.signal;window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{rt(this)&&this.focus({preventScroll:!0})},{once:!0,signal:l})},{once:!0,signal:l}),document.addEventListener("focusin",()=>a.abort(),{once:!0}),document.addEventListener("click",()=>a.abort(),{once:!0})}}onInput(t){bo(this,t)}onKeystroke(t){return fc(this,t)}onCompositionStart(t){Je(this.model,le(this.model.selection),"insertText");let e=Ji(this.field);e&&requestAnimationFrame(()=>{bt(this),this.keyboardDelegate.moveTo(e.x,e.y-e.height)})}onCompositionUpdate(t){yp(this.model,t),U(this)}onCompositionEnd(t){xp(this.model),bo(this,t,{simulateKeystroke:!0})}onCut(t){if(!this.isSelectionEditable){this.model.announce("plonk");return}this.model.contentWillChange({inputType:"deleteByCut"})&&(this.stopCoalescingUndo(),t.clipboardData?V.onCopy(this,t):V.copyToClipboard(this,"latex"),Je(this.model,le(this.model.selection),"deleteByCut"),this.snapshot("cut"),U(this))}onCopy(t){t.clipboardData?V.onCopy(this,t):V.copyToClipboard(this,"latex")}onPaste(t){let e=this.isSelectionEditable;return e&&(e=V.onPaste(this.model.at(this.model.position).mode,this,t.clipboardData)),e||this.model.announce("plonk"),t.preventDefault(),t.stopPropagation(),e}onGeometryChange(){var t;(t=this._menu)==null||t.hide(),dn(this),vo(this)}onWheel(t){let e=5*t.deltaX;if(!Number.isFinite(e)||e===0)return;let r=this.field;e<0&&r.scrollLeft===0||e>0&&r.offsetWidth+r.scrollLeft>=r.scrollWidth||(r.scrollBy({top:0,left:e}),t.preventDefault(),t.stopPropagation())}getHTMLElement(t){let e=t;for(;!e.id&&e.hasChildren;)e=t.children[0];return this.field.querySelector(`[data-atom-id="${e.id}"]`)}get context(){var t,e;return{registers:(t=this.options.registers)!=null?t:{},smartFence:this.smartFence,letterShapeStyle:this.letterShapeStyle,minFontScale:this.minFontScale,maxMatrixCols:this.maxMatrixCols,placeholderSymbol:(e=this.options.placeholderSymbol)!=null?e:"",colorMap:r=>this.colorMap(r),backgroundColorMap:r=>this.backgroundColorMap(r),getMacro:r=>Ti(r,this.options.macros),atomIdsSettings:{seed:"random",groupNumbers:!1}}}};pe({speak:(t,e,r)=>Rb(t,e,r)},{target:"mathfield"});function Rb(t,e,r){var a;r=r??{withHighlighting:!1};let{model:l}=t;function u(Z){let me=null;switch(Z){case"all":me=l.root;break;case"selection":me=l.getAtoms(l.selection);break;case"left":{me=l.getAtoms(l.offsetOf(l.at(l.position).leftSibling),l.position);break}case"right":{me=l.getAtoms(l.position,l.offsetOf(l.at(l.position).rightSibling));break}case"group":me=l.getAtoms(l.getSiblingsRange(l.position));break;case"parent":{let{parent:_e}=l.at(l.position);_e!=null&&_e.parent?me=_e:me=l.root;break}default:me=l.root}return me}function d(Z){let me="";switch(Z){case"all":console.error("Internal failure: speak all failed");break;case"selection":me="no selection";break;case"left":me="at start";break;case"right":me="at end";break;case"group":console.error("Internal failure: speak group failed");break;case"parent":me="no parent";break;default:console.error('unknown speak_ param value: "'+Z+'"');break}return me}let g=globalThis.MathfieldElement,E=u(e);if(E===null)return(a=g.speakHook)==null||a.call(g,d(e)),!1;(r.withHighlighting||g.speechEngine==="amazon")&&(g.textToSpeechMarkup=globalThis.sre&&g.textToSpeechRules==="sre"?"ssml_step":"ssml");let P=Mt(E);return Me()&&r.withHighlighting?(Wt().readAloudMathfield=t,bt(t,{forHighlighting:!0}),g.readAloudHook&&g.readAloudHook(t.field,P)):g.speakHook&&g.speakHook(P),!1}function ph(t){var e,r;if(!Me())return;let a=globalThis.MathfieldElement;if(!a.speechEngine||a.speechEngine==="local"){let l=new SpeechSynthesisUtterance(t);globalThis.speechSynthesis.speak(l)}else if(a.speechEngine==="amazon")if(!("AWS"in window))console.error("MathLive 0.106.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");else{let l=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),u={OutputFormat:"mp3",VoiceId:(e=a.speechEngineVoice)!=null?e:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes((r=a.speechEngineVoice)!=null?r:"Joanna")?"neural":"standard",Text:t,TextType:"ssml"};l.synthesizeSpeech(u,(d,g)=>{if(d)console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech()\` error: ${d}`);else if(g!=null&&g.AudioStream){let E=new Uint8Array(g.AudioStream),P=new Blob([E.buffer],{type:"audio/mpeg"}),Z=URL.createObjectURL(P);new Audio(Z).play().catch(me=>console.error(me))}})}else a.speechEngine==="google"&&console.error("MathLive 0.106.0: The Google speech engine is not supported yet. Please come again.")}function hh(t){if(t&&(t.classList.remove("ML__highlight"),t.children))for(let e of t.children)hh(e)}function $c(t,e){var r;t&&(!e||((r=t.dataset)==null?void 0:r.atomId)===e?(t.classList.add("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(a=>{a instanceof HTMLElement&&$c(a)})):(t.classList.remove("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(a=>{a instanceof HTMLElement&&$c(a,e)})))}function fh(t,e){var r;if(!Me())return;if(globalThis.MathfieldElement.speechEngine!=="amazon"){console.error("MathLive 0.106.0: Use Amazon TTS Engine for synchronized highlighting"),typeof globalThis.MathfieldElement.speakHook=="function"&&globalThis.MathfieldElement.speakHook(e);return}if(!globalThis.AWS){console.error("MathLive 0.106.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");return}let a=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),l={OutputFormat:"json",VoiceId:(r=globalThis.MathfieldElement.speechEngineVoice)!=null?r:"Joanna",Engine:"standard",Text:e,TextType:"ssml",SpeechMarkTypes:["ssml"]};Wt().readAloudElement=t,a.synthesizeSpeech(l,(u,d)=>{if(u){console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech()\` error: ${u}`);return}if(!(d!=null&&d.AudioStream))return;let g=new TextDecoder("utf-8").decode(new Uint8Array(d.AudioStream));Wt().readAloudMarks=g.split(`
`).map(E=>E?JSON.parse(E):{}),Wt().readAloudTokens=[];for(let E of Wt().readAloudMarks)E.value&&Wt().readAloudTokens.push(E.value);Wt().readAloudCurrentMark="",l.OutputFormat="mp3",l.SpeechMarkTypes=[],a.synthesizeSpeech(l,(E,P)=>{if(E){console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech("${e}") error:${E}`);return}if(!(P!=null&&P.AudioStream))return;let Z=new Uint8Array(P.AudioStream),me=new Blob([Z.buffer],{type:"audio/mpeg"}),_e=URL.createObjectURL(me),He=Wt();He.readAloudAudio?He.readAloudAudio.pause():(He.readAloudAudio=new Audio,He.readAloudAudio.addEventListener("ended",()=>{let Xe=He.readAloudMathfield;He.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),Xe?(bt(Xe),He.readAloudElement=null,He.readAloudMathfield=null,He.readAloudTokens=[],He.readAloudMarks=[],He.readAloudCurrentMark=""):hh(He.readAloudElement)}),He.readAloudAudio.addEventListener("timeupdate",()=>{let Xe="",wt=He.readAloudAudio.currentTime*1e3+100;for(let Do of He.readAloudMarks)Do.time<wt&&(Xe=Do.value);He.readAloudCurrentMark!==Xe&&(He.readAloudCurrentToken=Xe,Xe&&Xe===He.readAloudFinalToken?He.readAloudAudio.pause():(He.readAloudCurrentMark=Xe,$c(He.readAloudElement,He.readAloudCurrentMark)))})),He.readAloudAudio.src=_e,He.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),He.readAloudAudio.play()})})}Me()||console.error('MathLive 0.106.0: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var X=new WeakMap,Pb=.5,qr={letterShapeStyle:"mf.letterShapeStyle = ...",horizontalSpacingScale:'Removed. Use `"thinmuskip"`, `"medmuskip"`, and `"thickmuskip"` registers ',macros:"mf.macros = ...",registers:"mf.registers = ...",backgroundColorMap:"mf.backgroundColorMap = ...",colorMap:"mf.colorMap = ...",enablePopover:"mf.popoverPolicy = ...",mathModeSpace:"mf.mathModeSpace = ...",placeholderSymbol:"mf.placeholderSymbol = ...",readOnly:"mf.readOnly = ...",removeExtraneousParentheses:"mf.removeExtraneousParentheses = ...",scriptDepth:"mf.scriptDepth = ...",smartFence:"mf.smartFence = ...",smartMode:"mf.smartMode = ...",smartSuperscript:"mf.smartSuperscript = ...",inlineShortcutTimeout:"mf.inlineShortcutTimeout = ...",inlineShortcuts:"mf.inlineShortcuts = ...",keybindings:"mf.keybindings = ...",virtualKeyboardMode:"mf.mathVirtualKeyboardPolicy = ...",customVirtualKeyboardLayers:"mathVirtualKeyboard.layers = ...",customVirtualKeyboards:"mathVirtualKeyboard.layouts = ...",keypressSound:"mathVirtualKeyboard.keypressSound = ...",keypressVibration:"mathVirtualKeyboard.keypressVibration = ...",plonkSound:"mathVirtualKeyboard.plonkSound = ...",virtualKeyboardContainer:"mathVirtualKeyboard.container = ...",virtualKeyboardLayout:"mathVirtualKeyboard.alphabeticLayout = ...",virtualKeyboardTheme:"No longer supported",virtualKeyboardToggleGlyph:"No longer supported",virtualKeyboardToolbar:"mathVirtualKeyboard.editToolbar = ...",virtualKeyboards:"Use `mathVirtualKeyboard.layouts`",speechEngine:"`MathfieldElement.speechEngine`",speechEngineRate:"`MathfieldElement.speechEngineRate`",speechEngineVoice:"`MathfieldElement.speechEngineVoice`",textToSpeechMarkup:"`MathfieldElement.textToSpeechMarkup`",textToSpeechRules:"`MathfieldElement.textToSpeechRules`",textToSpeechRulesOptions:"`MathfieldElement.textToSpeechRulesOptions`",readAloudHook:"`MathfieldElement.readAloudHook`",speakHook:"`MathfieldElement.speakHook`",computeEngine:"`MathfieldElement.computeEngine`",fontsDirectory:"`MathfieldElement.fontsDirectory`",soundsDirectory:"`MathfieldElement.soundsDirectory`",createHTML:"`MathfieldElement.createHTML`",onExport:"`mf.onExport`",onInlineShortcut:"`mf.onInlineShortcut`",onScrollIntoView:"`mf.onScrollIntoView`",locale:"MathfieldElement.locale = ...",strings:"MathfieldElement.strings = ...",decimalSeparator:"MathfieldElement.decimalSeparator = ...",fractionNavigationOrder:"MathfieldElement.fractionNavigationOrder = ..."},oe=class q8 extends HTMLElement{constructor(e){if(super(),this._observer=null,e){let r=[];for(let a of Object.keys(e))if(qr[a])if(qr[a].startsWith("mf."))if(qr[a].startsWith(`mf.${a}`))r.push(`Option \`${a}\` cannot be used as a constructor option. Use ${qr[a]}`);else{let l=qr[a].match(/([a-zA-Z]+) =/);r.push(`Option \`${a}\` has been renamed \`${l[1]}\``)}else r.push(`Option \`${a}\` cannot be used as a constructor option. Use ${qr[a]}`);if(r.length>0){console.group("%cMathLive 0.106.0: %cInvalid Options","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn("Some of the options passed to `new MathfieldElement(...)` are invalid. \n          See mathfield/changelog/ for details.");for(let a of r)console.warn(a);console.groupEnd()}}if(Ln()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open",delegatesFocus:!0}),this.shadowRoot&&"adoptedStyleSheets"in this.shadowRoot){this.shadowRoot.adoptedStyleSheets=[ii("core"),ii("mathfield"),ii("mathfield-element"),ii("ui"),ii("menu")],this.shadowRoot.appendChild(document.createElement("span"));let r=document.createElement("slot");r.style.display="none",this.shadowRoot.appendChild(r)}else this.shadowRoot.innerHTML="<style>"+Er("core")+Er("mathfield")+Er("mathfield-element")+Er("ui")+Er("menu")+'</style><span></span><slot style="display:none"></slot>';e&&this._setOptions(e)}static get formAssociated(){return Ln()}static get optionsAttributes(){return{"default-mode":"string","letter-shape-style":"string","min-font-scale":"number","max-matrix-cols":"number","popover-policy":"string","math-mode-space":"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","inline-shortcut-timeout":"string","script-depth":"string",placeholder:"string","virtual-keyboard-target-origin":"string","math-virtual-keyboard-policy":"string"}}static get observedAttributes(){return[...Object.keys(this.optionsAttributes),"contenteditable","disabled","readonly","read-only"]}static get fontsDirectory(){return this._fontsDirectory}static set fontsDirectory(e){e!==this._fontsDirectory&&(this._fontsDirectory=e,dp())}get fontsDirectory(){throw new Error("Use MathfieldElement.fontsDirectory instead")}set fontsDirectory(e){throw new Error("Use MathfieldElement.fontsDirectory instead")}static get soundsDirectory(){return this._soundsDirectory}static set soundsDirectory(e){this._soundsDirectory=e,this.audioBuffers={}}get soundsDirectory(){throw new Error("Use MathfieldElement.soundsDirectory instead")}set soundsDirectory(e){throw new Error("Use MathfieldElement.soundsDirectory instead")}static get keypressSound(){return this._keypressSound}static set keypressSound(e){var r,a,l;this.audioBuffers={},e===null?this._keypressSound={spacebar:null,return:null,delete:null,default:null}:typeof e=="string"?this._keypressSound={spacebar:e,return:e,delete:e,default:e}:typeof e=="object"&&"default"in e&&(this._keypressSound={spacebar:(r=e.spacebar)!=null?r:e.default,return:(a=e.return)!=null?a:e.default,delete:(l=e.delete)!=null?l:e.default,default:e.default})}static get plonkSound(){return this._plonkSound}static set plonkSound(e){this.audioBuffers={},this._plonkSound=e}static get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}static get speechEngine(){return this._speechEngine}static set speechEngine(e){this._speechEngine=e}static get speechEngineRate(){return this._speechEngineRate}static set speechEngineRate(e){this._speechEngineRate=e}static get speechEngineVoice(){return this._speechEngineVoice}static set speechEngineVoice(e){this._speechEngineVoice=e}static get textToSpeechMarkup(){return this._textToSpeechMarkup}static set textToSpeechMarkup(e){this._textToSpeechMarkup=e}static get textToSpeechRules(){return this._textToSpeechRules}static set textToSpeechRules(e){this._textToSpeechRules=e}static get textToSpeechRulesOptions(){return this._textToSpeechRulesOptions}static set textToSpeechRulesOptions(e){this._textToSpeechRulesOptions=e}static get locale(){return N.locale}static set locale(e){e==="auto"&&(e=navigator.language.slice(0,5)),N.locale=e}get locale(){throw new Error("Use MathfieldElement.locale instead")}set locale(e){throw new Error("Use MathfieldElement.locale instead")}static get strings(){return N.strings}static set strings(e){N.merge(e)}get strings(){throw new Error("Use MathfieldElement.strings instead")}set strings(e){throw new Error("Use MathfieldElement.strings instead")}static get decimalSeparator(){return this._decimalSeparator}static set decimalSeparator(e){this._decimalSeparator=e,this._computeEngine&&(this._computeEngine.decimalSeparator=this.decimalSeparator===","?"{,}":".")}get decimalSeparator(){throw new Error("Use MathfieldElement.decimalSeparator instead")}set decimalSeparator(e){throw new Error("Use MathfieldElement.decimalSeparator instead")}static get fractionNavigationOrder(){return sn.fractionNavigationOrder}static set fractionNavigationOrder(e){if(e!=="numerator-denominator"&&e!=="denominator-numerator")throw new Error("Invalid value");sn.fractionNavigationOrder!==e&&(sn.fractionNavigationOrder=e,rc())}static get computeEngine(){var e,r;if(this._computeEngine===void 0){let a=(e=window[Symbol.for("io.cortexjs.compute-engine")])==null?void 0:e.ComputeEngine;if(!a)return null;this._computeEngine=new a,this._computeEngine&&this.decimalSeparator===","&&(this._computeEngine.decimalSeparator="{,}")}return(r=this._computeEngine)!=null?r:null}static set computeEngine(e){this._computeEngine=e}get computeEngine(){throw new Error("Use MathfieldElement.computeEngine instead")}set computeEngine(e){throw new Error("Use MathfieldElement.computeEngine instead")}static get isFunction(){return typeof this._isFunction!="function"?()=>!1:this._isFunction}static set isFunction(e){this._isFunction=e,rc()}static async loadSound(e){delete this.audioBuffers[e];let r="";switch(e){case"keypress":r=this._keypressSound.default;break;case"return":r=this._keypressSound.return;break;case"spacebar":r=this._keypressSound.spacebar;break;case"delete":r=this._keypressSound.delete;break;case"plonk":r=this.plonkSound;break}if(typeof r!="string")return;r=r.trim();let a=this.soundsDirectory;if(!(a==null||a==="null"||r==="none"||r==="null"))try{let l=await(await fetch(await rs(`${a}/${r}`))).arrayBuffer(),u=await this.audioContext.decodeAudioData(l);this.audioBuffers[e]=u}catch{}}static async playSound(e){if((this.audioContext.state==="suspended"||this.audioContext.state==="interrupted")&&await this.audioContext.resume(),this.audioBuffers[e]||await this.loadSound(e),!this.audioBuffers[e])return;let r=this.audioContext.createBufferSource();r.buffer=this.audioBuffers[e];let a=this.audioContext.createGain();a.gain.value=Pb,r.connect(a).connect(this.audioContext.destination),r.start()}showMenu(e){var r,a;return(a=(r=this._mathfield)==null?void 0:r.showMenu(e))!=null?a:!1}get mathVirtualKeyboard(){throw new Error("The `mathVirtualKeyboard` property is not available on the MathfieldElement. Use `window.mathVirtualKeyboard` instead.")}onPointerDown(){window.addEventListener("pointerup",e=>{let r=this._mathfield;if(r&&e.target===this&&!r.disabled){this.dispatchEvent(new MouseEvent("click",{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,movementX:e.movementX,movementY:e.movementY,relatedTarget:e.relatedTarget,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey}));let a=this.getOffsetFromPoint(e.clientX,e.clientY);a>=0&&q8.openUrl(fm(r,a)),e.pointerType==="touch"&&this.selectionIsCollapsed&&(this.position=a)}},{once:!0})}getPromptValue(e,r){var a,l;return(l=(a=this._mathfield)==null?void 0:a.getPromptValue(e,r))!=null?l:""}setPromptValue(e,r,a){var l;(l=this._mathfield)==null||l.setPromptValue(e,r,a)}getPromptRange(e){var r,a;return(a=(r=this._mathfield)==null?void 0:r.getPromptRange(e))!=null?a:null}getPrompts(e){var r,a;return(a=(r=this._mathfield)==null?void 0:r.getPrompts(e))!=null?a:[]}get form(){var e;return(e=this._internals)==null?void 0:e.form}get name(){var e;return(e=this.getAttribute("name"))!=null?e:""}get type(){return this.localName}get mode(){var e,r;return(r=(e=this._mathfield)==null?void 0:e.model.mode)!=null?r:this.defaultMode==="text"?"text":"math"}set mode(e){var r;(r=this._mathfield)==null||r.switchMode(e)}get expression(){if(this._mathfield)return window[Symbol.for("io.cortexjs.compute-engine")]?this._mathfield.expression:(console.error(`MathLive 0.106.0: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://esm.run/@cortex-js/compute-engine"`),null)}set expression(e){var r,a;if(!this._mathfield)return;let l=(a=(r=q8.computeEngine)==null?void 0:r.box(e).latex)!=null?a:null;l!==null&&this._mathfield.setValue(l),window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`MathLive 0.106.0: The Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://esm.run/@cortex-js/compute-engine"`)}get errors(){var e,r;return(r=(e=this._mathfield)==null?void 0:e.errors)!=null?r:[]}_getOptions(e){return this._mathfield?or(this._mathfield.options,e):X.has(this)?p({},or(p(p({},bn()),gn(X.get(this).options)),e)):null}getOptions(e){return console.warn("%cMathLive 0.106.0: %cDeprecated Usage%c\n      `mf.getOptions()` is deprecated. Read the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._mathfield?or(this._mathfield.options,e):X.has(this)?or(p(p({},bn()),gn(X.get(this).options)),e):null}reflectAttributes(){let e=bn(),r=this._getOptions();Object.keys(q8.optionsAttributes).forEach(a=>{let l=ar(a);q8.optionsAttributes[a]==="on/off"?e[l]!==r[l]?this.setAttribute(a,r[l]?"on":"off"):this.removeAttribute(a):e[l]!==r[l]&&(q8.optionsAttributes[a]==="boolean"?r[l]?this.setAttribute(a,""):this.removeAttribute(a):(typeof r[l]=="string"||typeof r[l]=="number")&&this.setAttribute(a,r[l].toString()))})}getOption(e){return console.warn("%cMathLive 0.106.0: %cDeprecated Usage%c\n      `mf.getOption()` is deprecated. Read the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._getOptions([e])[e]}_getOption(e){return this._getOptions([e])[e]}_setOptions(e){if(this._mathfield)this._mathfield.setOptions(e);else if(X.has(this)){let r=p(p({},X.get(this).options),e);X.set(this,f(p({},X.get(this)),{selection:{ranges:r.readOnly?[[0,0]]:[[0,-1]]},options:r}))}else X.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:e,menuItems:void 0});this.reflectAttributes()}setOptions(e){console.group("%cMathLive 0.106.0: %cDeprecated Usage","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn(" `mf.setOptions()` is deprecated. Set the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.");for(let r of Object.keys(e))qr[r]&&console.warn(`\`mf.setOptions({${r}:...})\` -> ${qr[r]}`);console.groupEnd(),this._setOptions(e)}executeCommand(...e){var r,a;let l;if(e.length===1?l=e[0]:l=[e[0],...e.slice(1)],l)return(a=(r=this._mathfield)==null?void 0:r.executeCommand(l))!=null?a:!1;throw new Error("Invalid selector")}getValue(e,r,a){var l,u;if(this._mathfield)return this._mathfield.model.getValue(e,r,a);if(X.has(this)){let d,g,E;if(Ui(e)?([d,g]=e.ranges[0],E=r):ti(e)?([d,g]=e,E=r):Ot(e)&&Ot(r)?(d=e,g=r,E=a):(d=0,g=-1,E=e),(E===void 0||E==="latex")&&d===0&&g===-1)return(u=(l=X.get(this).value)!=null?l:this.textContent)!=null?u:""}return""}setValue(e,r){if(this._mathfield&&e!==void 0){if(this._mathfield.model.getValue()===e)return;r!=null||(r={silenceNotifications:!0,mode:"math"}),this._mathfield.setValue(e,r);return}if(X.has(this)){let l=X.get(this).options;X.set(this,{value:e,selection:{ranges:[[-1,-1]],direction:"forward"},options:l,menuItems:void 0});return}let a=Ks(this);X.set(this,{value:e,selection:{ranges:[[-1,-1]],direction:"forward"},options:a,menuItems:void 0})}hasFocus(){var e,r;return(r=(e=this._mathfield)==null?void 0:e.hasFocus())!=null?r:!1}focus(){var e;(e=this._mathfield)==null||e.focus()}blur(){var e;(e=this._mathfield)==null||e.blur()}select(){var e;(e=this._mathfield)==null||e.select()}insert(e,r){var a,l;return(l=(a=this._mathfield)==null?void 0:a.insert(e,r))!=null?l:!1}applyStyle(e,r){var a;return(a=this._mathfield)==null?void 0:a.applyStyle(e,r)}queryStyle(e){var r,a;return(a=(r=this._mathfield)==null?void 0:r.queryStyle(e))!=null?a:"none"}getOffsetFromPoint(e,r,a){return this._mathfield?xo(this._mathfield,e,r,a):-1}getElementInfo(e){return $a(this._mathfield,e)}resetUndo(){var e;(e=this._mathfield)==null||e.resetUndo()}canUndo(){return this._mathfield?this._mathfield.canUndo():!1}canRedo(){return this._mathfield?this._mathfield.canRedo():!1}handleEvent(e){var r,a,l,u,d,g,E;if(Ae.state!=="closed"||((a=(r=this._mathfield)==null?void 0:r.menu)==null?void 0:a.state)!=="closed")return;if(e.type==="pointerdown"){this.onPointerDown();let Z=(l=this._mathfield)==null?void 0:l.keyboardDelegate;Z?.blur(),Z?.focus()}if(e.type==="focus"&&((u=this._mathfield)==null||u.focus()),e.type!=="blur")return;let P=Bo();P&&(d=window?.mathVirtualKeyboard)!=null&&d.visible||((g=Ae.scrim)==null?void 0:g.state)!=="closed"||P&&Gc()||(E=this._mathfield)==null||E.blur()}connectedCallback(){var e,r,a,l;let u=this.shadowRoot,d=u.host,g=window.getComputedStyle(this).userSelect!=="none";if(g)d.addEventListener("pointerdown",this,!0);else{let Z=u.querySelector("span");Z.style.pointerEvents="none"}d.addEventListener("focus",this,!0),d.addEventListener("blur",this,!0),this._observer=new MutationObserver(()=>{var Z;this.value=(Z=this.textContent)!=null?Z:""}),this._observer.observe(this,{childList:!0,characterData:!0,subtree:!0}),Ln()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),g&&!this.hasAttribute("contenteditable")&&this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let E=u.querySelector("slot:not([name])");if(E)try{this._style=E.assignedElements().filter(Z=>Z.tagName.toLowerCase()==="style").map(Z=>Z.textContent).join("")}catch(Z){console.error(Z)}if(this._style){let Z=document.createElement("style");Z.textContent=this._style,u.appendChild(Z)}let P="";if(this.hasAttribute("value")?P=this.getAttribute("value"):P=(e=E?.assignedNodes().map(Z=>Z.nodeType===3?Z.textContent:"").join("").trim())!=null?e:"",this._mathfield=new Ds(u.querySelector(":host > span"),f(p({},(a=(r=X.get(this))==null?void 0:r.options)!=null?a:Ks(this)),{eventSink:this,value:P})),!X.has(this)){this.upgradeProperty("disabled"),this.upgradeProperty("readonly");for(let Z of Object.keys(q8.optionsAttributes))this.upgradeProperty(ar(Z))}if(!((l=this._mathfield)!=null&&l.model)){this._mathfield=null;return}if(X.has(this)){let Z=this._mathfield,me=X.get(this),_e=me.menuItems;Z.model.deferNotifications({content:!1,selection:!1},()=>{let He=me.value;He!==void 0&&Z.setValue(He),Z.model.selection=me.selection,X.delete(this)}),_e&&(this.menuItems=_e)}window.queueMicrotask(()=>{this.isConnected&&this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))}),pi()}disconnectedCallback(){var e,r,a;if(this.shadowRoot.host.removeEventListener("pointerdown",this,!0),!this._mathfield)return;(e=this._observer)==null||e.disconnect(),this._observer=null,window.queueMicrotask(()=>this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})));let l=or(this._mathfield.options,Object.keys(q8.optionsAttributes).map(u=>ar(u)));X.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,menuItems:(a=(r=this._mathfield.menu)==null?void 0:r.menuItems)!=null?a:void 0,options:l}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(e){if(this.hasOwnProperty(e)){let r=this[e];delete this[e],(e==="readonly"||e==="read-only")&&(e="readOnly"),this[e]=r}}attributeChangedCallback(e,r,a){if(r===a)return;let l=a!==null;switch(e){case"contenteditable":U(this._mathfield);break;case"placeholder":a===!1&&(a=""),this.placeholder=a;break;case"disabled":this.disabled=l;break;case"read-only":case"readonly":this.readOnly=l;break}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(e){let r=!!e;r?(this.setAttribute("readonly",""),Ln()?this._internals.ariaReadOnly="true":this.setAttribute("aria-readonly","true"),this.setAttribute("aria-readonly","true")):(Ln()?this._internals.ariaReadOnly="false":this.removeAttribute("aria-readonly"),this.removeAttribute("readonly"),this.removeAttribute("read-only")),this._setOptions({readOnly:r})}get disabled(){return this.hasAttribute("disabled")}set disabled(e){var r;let a=!!e;a?this.setAttribute("disabled",""):this.removeAttribute("disabled"),Ln()?this._internals.ariaDisabled=a?"true":"false":this.setAttribute("aria-disabled",a?"true":"false"),a&&(r=this._mathfield)!=null&&r.hasFocus&&window.mathVirtualKeyboard.visible&&this._mathfield.executeCommand("hideVirtualKeyboard")}get value(){return this.getValue()}set value(e){this.setValue(e)}get defaultMode(){return this._getOption("defaultMode")}set defaultMode(e){this._setOptions({defaultMode:e})}get macros(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("macros")}set macros(e){this._setOptions({macros:e})}get registers(){if(!this._mathfield)throw new Error("Mathfield not mounted");let e=this;return new Proxy({},{get:(r,a)=>{if(typeof a=="string")return e._getOption("registers")[a]},set(r,a,l){return typeof a!="string"?!1:(e._setOptions({registers:f(p({},e._getOption("registers")),{[a]:l})}),!0)},ownKeys:()=>Reflect.ownKeys(e._getOption("registers")),getOwnPropertyDescriptor:(r,a)=>{let l=e._getOption("registers")[a];if(l!==void 0)return{configurable:!0,enumerable:!0,value:l,writable:!0}}})}set registers(e){this._setOptions({registers:e})}get colorMap(){return this._getOption("colorMap")}set colorMap(e){this._setOptions({colorMap:e})}get backgroundColorMap(){return this._getOption("backgroundColorMap")}set backgroundColorMap(e){this._setOptions({backgroundColorMap:e})}get letterShapeStyle(){return this._getOption("letterShapeStyle")}set letterShapeStyle(e){this._setOptions({letterShapeStyle:e})}get minFontScale(){return this._getOption("minFontScale")}set minFontScale(e){this._setOptions({minFontScale:e})}get maxMatrixCols(){return this._getOption("maxMatrixCols")}set maxMatrixCols(e){this._setOptions({maxMatrixCols:e})}get smartMode(){return this._getOption("smartMode")}set smartMode(e){this._setOptions({smartMode:e})}get smartFence(){return this._getOption("smartFence")}set smartFence(e){this._setOptions({smartFence:e})}get smartSuperscript(){return this._getOption("smartSuperscript")}set smartSuperscript(e){this._setOptions({smartSuperscript:e})}get scriptDepth(){return this._getOption("scriptDepth")}set scriptDepth(e){this._setOptions({scriptDepth:e})}get removeExtraneousParentheses(){return this._getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(e){this._setOptions({removeExtraneousParentheses:e})}get mathModeSpace(){return this._getOption("mathModeSpace")}set mathModeSpace(e){this._setOptions({mathModeSpace:e})}get placeholderSymbol(){return this._getOption("placeholderSymbol")}set placeholderSymbol(e){this._setOptions({placeholderSymbol:e})}get placeholder(){var e;return(e=this.getAttribute("placeholder"))!=null?e:""}set placeholder(e){var r;typeof e=="string"&&((r=this._mathfield)==null||r.setOptions({contentPlaceholder:e}))}get popoverPolicy(){return this._getOption("popoverPolicy")}set popoverPolicy(e){this._setOptions({popoverPolicy:e})}get environmentPopoverPolicy(){return this._getOption("environmentPopoverPolicy")}set environmentPopoverPolicy(e){this._setOptions({environmentPopoverPolicy:e})}get menuItems(){var e;if(!this._mathfield)throw new Error("Mathfield not mounted");return(e=this._mathfield.menu._menuItems.map(r=>r.menuItem))!=null?e:[]}set menuItems(e){var r;if(!this._mathfield)throw new Error("Mathfield not mounted");if(this._mathfield){let a=(r=this._mathfield.element)==null?void 0:r.querySelector("[part=menu-toggle]");a&&(a.style.display=e.length===0?"none":""),this._mathfield.menu.menuItems=e}}get mathVirtualKeyboardPolicy(){return this._getOption("mathVirtualKeyboardPolicy")}set mathVirtualKeyboardPolicy(e){this._setOptions({mathVirtualKeyboardPolicy:e})}get inlineShortcuts(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("inlineShortcuts")}set inlineShortcuts(e){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({inlineShortcuts:e})}get inlineShortcutTimeout(){return this._getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(e){this._setOptions({inlineShortcutTimeout:e})}get keybindings(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("keybindings")}set keybindings(e){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({keybindings:e})}get onInsertStyle(){let e=this._getOption("onInsertStyle");return e===void 0?oo:e}set onInsertStyle(e){this._setOptions({onInsertStyle:e})}get onInlineShortcut(){return this._getOption("onInlineShortcut")}set onInlineShortcut(e){this._setOptions({onInlineShortcut:e})}get onScrollIntoView(){return this._getOption("onScrollIntoView")}set onScrollIntoView(e){this._setOptions({onScrollIntoView:e})}get onExport(){return this._getOption("onExport")}set onExport(e){this._setOptions({onExport:e})}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOptions({readOnly:e})}get isSelectionEditable(){var e,r;return(r=(e=this._mathfield)==null?void 0:e.isSelectionEditable)!=null?r:!1}setPromptState(e,r,a){var l;(l=this._mathfield)==null||l.setPromptState(e,r,a)}getPromptState(e){var r,a;return(a=(r=this._mathfield)==null?void 0:r.getPromptState(e))!=null?a:[void 0,!0]}get virtualKeyboardTargetOrigin(){return this._getOption("virtualKeyboardTargetOrigin")}set virtualKeyboardTargetOrigin(e){this._setOptions({virtualKeyboardTargetOrigin:e})}get selection(){return this._mathfield?this._mathfield.model.selection:X.has(this)?X.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(e){if(typeof e=="number"&&(e={ranges:[[e,e]]}),this._mathfield){this._mathfield.model.selection=e,U(this._mathfield);return}if(X.has(this)){X.set(this,f(p({},X.get(this)),{selection:e}));return}X.set(this,{value:void 0,selection:e,options:Ks(this),menuItems:void 0})}get selectionIsCollapsed(){let e=this.selection;return e.ranges.length===1&&e.ranges[0][0]===e.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:X.has(this)?X.get(this).selection.ranges[0][0]:0}set position(e){if(this._mathfield&&(this._mathfield.model.position=e,U(this._mathfield)),X.has(this)){X.set(this,f(p({},X.get(this)),{selection:{ranges:[[e,e]]}}));return}X.set(this,{value:void 0,selection:{ranges:[[e,e]]},options:Ks(this),menuItems:void 0})}get lastOffset(){var e,r;return(r=(e=this._mathfield)==null?void 0:e.model.lastOffset)!=null?r:-1}};oe.version="0.106.0",oe.openUrl=t=>{if(!t)return;let e=new URL(t);if(!["http:","https:","file:"].includes(e.protocol.toLowerCase())){oe.playSound("plonk");return}window.open(e,"_blank")},oe._fontsDirectory="./fonts/",oe._soundsDirectory="./sounds",oe.keypressVibration=!0,oe._keypressSound={spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"},oe._plonkSound="plonk.wav",oe.audioBuffers={},oe.createHTML=t=>t,oe._speechEngineRate="100%",oe._speechEngineVoice="Joanna",oe._textToSpeechMarkup="",oe._textToSpeechRules="mathlive",oe._textToSpeechRulesOptions={},oe.speakHook=ph,oe.readAloudHook=fh,oe.restoreFocusWhenDocumentFocused=!0,oe._decimalSeparator=".",oe._isFunction=t=>{var e,r;let a=globalThis.MathfieldElement.computeEngine;return(r=(e=a?.parse(t).domain)==null?void 0:e.isFunction)!=null?r:!1};var xt=oe;function ar(t){return t.replace(/[^a-zA-Z\d]+(.)/g,(e,r)=>r.toUpperCase())}function Ks(t){let e={readOnly:!1},r=xt.optionsAttributes;return Object.keys(r).forEach(a=>{var l;if(t.hasAttribute(a)){let u=t.getAttribute(a);a==="placeholder"?e.contentPlaceholder=u??"":r[a]==="boolean"?e[ar(a)]=!0:r[a]==="on/off"?(u=(l=u?.toLowerCase())!=null?l:"",u==="on"||u==="true"?e[ar(a)]=!0:u==="off"||u==="false"?e[ar(a)]=!1:e[ar(a)]=void 0):r[a]==="number"?e[ar(a)]=Number.parseFloat(u??"0"):e[ar(a)]=u}}),e}function Ln(){return!(!("ElementInternals"in window)||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var mn=xt,gh,bh,xh;if(Me()&&!((gh=window.customElements)!=null&&gh.get("math-field"))){window[bh=Symbol.for("io.cortexjs.mathlive")]!=null||(window[bh]={});let t=window[Symbol.for("io.cortexjs.mathlive")];t.version="0.106.0",globalThis.MathfieldElement=xt,(xh=window.customElements)==null||xh.define("math-field",xt)}function Vb(t,e){let r=Ee.singleton;return r?(r.show(),zr(),r.currentLayer=e,r.render(),r.focus(),!0):!1}function qb(){let t=window.mathVirtualKeyboard;return t.visible?t.hide({animate:!0}):t.show({animate:!0}),!1}pe({switchKeyboardLayer:Vb,toggleVirtualKeyboard:qb,hideVirtualKeyboard:()=>(window.mathVirtualKeyboard.hide({animate:!0}),!1),showVirtualKeyboard:()=>(window.mathVirtualKeyboard.show({animate:!0}),!1)},{target:"virtual-keyboard"});function Wt(){var t;return globalThis[t=Symbol.for("io.cortexjs.mathlive")]!=null||(globalThis[t]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}var computeEngine_min_umd$1={exports:{}},computeEngine_min_umd=computeEngine_min_umd$1.exports,hasRequiredComputeEngine_min_umd;function requireComputeEngine_min_umd(){return hasRequiredComputeEngine_min_umd||(hasRequiredComputeEngine_min_umd=1,function(t,e){(function(r,a){a(e)})(computeEngine_min_umd,function(r){var a=(()=>{var l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,E=(s,o)=>{for(var c in o)l(s,c,{get:o[c],enumerable:!0})},P=(s,o,c,m)=>{if(o&&typeof o=="object"||typeof o=="function")for(let A of d(o))!g.call(s,A)&&A!==c&&l(s,A,{get:()=>o[A],enumerable:!(m=u(o,A))||m.enumerable});return s},Z=s=>P(l({},"__esModule",{value:!0}),s),me={};E(me,{BoxedType:()=>I4,ComputeEngine:()=>rE,NumericValue:()=>D6,version:()=>hT});var _e=Math.cosh||function(s){return Math.abs(s)<1e-9?1-s:(Math.exp(s)+Math.exp(-s))*.5},He=Math.sinh||function(s){return Math.abs(s)<1e-9?s:(Math.exp(s)-Math.exp(-s))*.5},Xe=function(s){var o=Math.PI/4;if(-o>s||s>o)return Math.cos(s)-1;var c=s*s;return c*(c*(c*(c*(c*(c*(c*(c/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},wt=function(s,o){var c=Math.abs(s),m=Math.abs(o);return c<3e3&&m<3e3?Math.sqrt(c*c+m*m):(c<m?(c=m,m=s/o):m=o/s,c*Math.sqrt(1+m*m))},Do=function(){throw SyntaxError("Invalid Param")};function sr(s,o){var c=Math.abs(s),m=Math.abs(o);return s===0?Math.log(m):o===0?Math.log(c):c<3e3&&m<3e3?Math.log(s*s+o*o)*.5:(s=s/2,o=o/2,.5*Math.log(s*s+o*o)+Math.LN2)}var Ko=function(s,o){var c={re:0,im:0};if(s==null)c.re=c.im=0;else if(o!==void 0)c.re=s,c.im=o;else switch(typeof s){case"object":if("im"in s&&"re"in s)c.re=s.re,c.im=s.im;else if("abs"in s&&"arg"in s){if(!Number.isFinite(s.abs)&&Number.isFinite(s.arg))return Bs.INFINITY;c.re=s.abs*Math.cos(s.arg),c.im=s.abs*Math.sin(s.arg)}else if("r"in s&&"phi"in s){if(!Number.isFinite(s.r)&&Number.isFinite(s.phi))return Bs.INFINITY;c.re=s.r*Math.cos(s.phi),c.im=s.r*Math.sin(s.phi)}else s.length===2?(c.re=s[0],c.im=s[1]):Do();break;case"string":c.im=c.re=0;var m=s.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),A=1,ae=0;m===null&&Do();for(var qe=0;qe<m.length;qe++){var So=m[qe];So===" "||So==="	"||So===`
`||(So==="+"?A++:So==="-"?ae++:So==="i"||So==="I"?(A+ae===0&&Do(),m[qe+1]!==" "&&!isNaN(Number(m[qe+1]))?(c.im+=parseFloat((ae%2?"-":"")+m[qe+1]),qe++):c.im+=parseFloat((ae%2?"-":"")+"1"),A=ae=0):((A+ae===0||isNaN(Number(So)))&&Do(),m[qe+1]==="i"||m[qe+1]==="I"?(c.im+=parseFloat((ae%2?"-":"")+So),qe++):c.re+=parseFloat((ae%2?"-":"")+So),A=ae=0))}A+ae>0&&Do();break;case"number":c.im=0,c.re=s;break;default:Do()}return isNaN(c.re)||isNaN(c.im),c},Bs=class f4{constructor(o,c){this.re=0,this.im=0;var m=Ko(o,c);this.re=m.re,this.im=m.im}sign(){var o=this.abs();return new f4(this.re/o,this.im/o)}add(o,c){var m=new f4(o,c);return this.isInfinite()&&m.isInfinite()?f4.NAN:this.isInfinite()||m.isInfinite()?f4.INFINITY:new f4(this.re+m.re,this.im+m.im)}sub(o,c){var m=new f4(o,c);return this.isInfinite()&&m.isInfinite()?f4.NAN:this.isInfinite()||m.isInfinite()?f4.INFINITY:new f4(this.re-m.re,this.im-m.im)}mul(o,c){var m=new f4(o,c);return this.isInfinite()&&m.isZero()||this.isZero()&&m.isInfinite()?f4.NAN:this.isInfinite()||m.isInfinite()?f4.INFINITY:m.im===0&&this.im===0?new f4(this.re*m.re,0):new f4(this.re*m.re-this.im*m.im,this.re*m.im+this.im*m.re)}div(o,c){var m=new f4(o,c);if(this.isZero()&&m.isZero()||this.isInfinite()&&m.isInfinite())return f4.NAN;if(this.isInfinite()||m.isZero())return f4.INFINITY;if(this.isZero()||m.isInfinite())return f4.ZERO;o=this.re,c=this.im;var A=m.re,ae=m.im,qe,So;return ae===0?new f4(o/A,c/A):Math.abs(A)<Math.abs(ae)?(So=A/ae,qe=A*So+ae,new f4((o*So+c)/qe,(c*So-o)/qe)):(So=ae/A,qe=ae*So+A,new f4((o+c*So)/qe,(c-o*So)/qe))}pow(o,c){var m=new f4(o,c);if(o=this.re,c=this.im,m.isZero())return f4.ONE;if(m.im===0){if(c===0&&o>0)return new f4(Math.pow(o,m.re),0);if(o===0)switch((m.re%4+4)%4){case 0:return new f4(Math.pow(c,m.re),0);case 1:return new f4(0,Math.pow(c,m.re));case 2:return new f4(-Math.pow(c,m.re),0);case 3:return new f4(0,-Math.pow(c,m.re))}}if(o===0&&c===0&&m.re>0&&m.im>=0)return f4.ZERO;var A=Math.atan2(c,o),ae=sr(o,c);return o=Math.exp(m.re*ae-m.im*A),c=m.im*ae+m.re*A,new f4(o*Math.cos(c),o*Math.sin(c))}sqrt(){var o=this.re,c=this.im,m=this.abs(),A,ae;if(o>=0){if(c===0)return new f4(Math.sqrt(o),0);A=.5*Math.sqrt(2*(m+o))}else A=Math.abs(c)/Math.sqrt(2*(m-o));return o<=0?ae=.5*Math.sqrt(2*(m-o)):ae=Math.abs(c)/Math.sqrt(2*(m+o)),new f4(A,c<0?-ae:ae)}exp(){var o=Math.exp(this.re);return this.im,new f4(o*Math.cos(this.im),o*Math.sin(this.im))}expm1(){var o=this.re,c=this.im;return new f4(Math.expm1(o)*Math.cos(c)+Xe(c),Math.exp(o)*Math.sin(c))}log(){var o=this.re,c=this.im;return new f4(sr(o,c),Math.atan2(c,o))}abs(){return wt(this.re,this.im)}arg(){return Math.atan2(this.im,this.re)}sin(){var o=this.re,c=this.im;return new f4(Math.sin(o)*_e(c),Math.cos(o)*He(c))}cos(){var o=this.re,c=this.im;return new f4(Math.cos(o)*_e(c),-Math.sin(o)*He(c))}tan(){var o=2*this.re,c=2*this.im,m=Math.cos(o)+_e(c);return new f4(Math.sin(o)/m,He(c)/m)}cot(){var o=2*this.re,c=2*this.im,m=Math.cos(o)-_e(c);return new f4(-Math.sin(o)/m,He(c)/m)}sec(){var o=this.re,c=this.im,m=.5*_e(2*c)+.5*Math.cos(2*o);return new f4(Math.cos(o)*_e(c)/m,Math.sin(o)*He(c)/m)}csc(){var o=this.re,c=this.im,m=.5*_e(2*c)-.5*Math.cos(2*o);return new f4(Math.sin(o)*_e(c)/m,-Math.cos(o)*He(c)/m)}asin(){var o=this.re,c=this.im,m=new f4(c*c-o*o+1,-2*o*c).sqrt(),A=new f4(m.re-c,m.im+o).log();return new f4(A.im,-A.re)}acos(){var o=this.re,c=this.im,m=new f4(c*c-o*o+1,-2*o*c).sqrt(),A=new f4(m.re-c,m.im+o).log();return new f4(Math.PI/2-A.im,A.re)}atan(){var o=this.re,c=this.im;if(o===0){if(c===1)return new f4(0,1/0);if(c===-1)return new f4(0,-1/0)}var m=o*o+(1-c)*(1-c),A=new f4((1-c*c-o*o)/m,-2*o/m).log();return new f4(-.5*A.im,.5*A.re)}acot(){var o=this.re,c=this.im;if(c===0)return new f4(Math.atan2(1,o),0);var m=o*o+c*c;return m!==0?new f4(o/m,-c/m).atan():new f4(o!==0?o/0:0,c!==0?-c/0:0).atan()}asec(){var o=this.re,c=this.im;if(o===0&&c===0)return new f4(0,1/0);var m=o*o+c*c;return m!==0?new f4(o/m,-c/m).acos():new f4(o!==0?o/0:0,c!==0?-c/0:0).acos()}acsc(){var o=this.re,c=this.im;if(o===0&&c===0)return new f4(Math.PI/2,1/0);var m=o*o+c*c;return m!==0?new f4(o/m,-c/m).asin():new f4(o!==0?o/0:0,c!==0?-c/0:0).asin()}sinh(){var o=this.re,c=this.im;return new f4(He(o)*Math.cos(c),_e(o)*Math.sin(c))}cosh(){var o=this.re,c=this.im;return new f4(_e(o)*Math.cos(c),He(o)*Math.sin(c))}tanh(){var o=2*this.re,c=2*this.im,m=_e(o)+Math.cos(c);return new f4(He(o)/m,Math.sin(c)/m)}coth(){var o=2*this.re,c=2*this.im,m=_e(o)-Math.cos(c);return new f4(He(o)/m,-Math.sin(c)/m)}csch(){var o=this.re,c=this.im,m=Math.cos(2*c)-_e(2*o);return new f4(-2*He(o)*Math.cos(c)/m,2*_e(o)*Math.sin(c)/m)}sech(){var o=this.re,c=this.im,m=Math.cos(2*c)+_e(2*o);return new f4(2*_e(o)*Math.cos(c)/m,-2*He(o)*Math.sin(c)/m)}asinh(){var o=this.im;this.im=-this.re,this.re=o;var c=this.asin();return this.re=-this.im,this.im=o,o=c.re,c.re=-c.im,c.im=o,c}acosh(){var o=this.acos();if(o.im<=0){var c=o.re;o.re=-o.im,o.im=c}else{var c=o.im;o.im=-o.re,o.re=c}return o}atanh(){var o=this.re,c=this.im,m=o>1&&c===0,A=1-o,ae=1+o,qe=A*A+c*c,So=qe!==0?new f4((ae*A-c*c)/qe,(c*A+ae*c)/qe):new f4(o!==-1?o/0:0,c!==0?c/0:0),Hc=So.re;return So.re=sr(So.re,So.im)/2,So.im=Math.atan2(So.im,Hc)/2,m&&(So.im=-So.im),So}acoth(){var o=this.re,c=this.im;if(o===0&&c===0)return new f4(0,Math.PI/2);var m=o*o+c*c;return m!==0?new f4(o/m,-c/m).atanh():new f4(o!==0?o/0:0,c!==0?-c/0:0).atanh()}acsch(){var o=this.re,c=this.im;if(c===0)return new f4(o!==0?Math.log(o+Math.sqrt(o*o+1)):1/0,0);var m=o*o+c*c;return m!==0?new f4(o/m,-c/m).asinh():new f4(o!==0?o/0:0,c!==0?-c/0:0).asinh()}asech(){var o=this.re,c=this.im;if(this.isZero())return f4.INFINITY;var m=o*o+c*c;return m!==0?new f4(o/m,-c/m).acosh():new f4(o!==0?o/0:0,c!==0?-c/0:0).acosh()}inverse(){if(this.isZero())return f4.INFINITY;if(this.isInfinite())return f4.ZERO;var o=this.re,c=this.im,m=o*o+c*c;return new f4(o/m,-c/m)}conjugate(){return new f4(this.re,-this.im)}neg(){return new f4(-this.re,-this.im)}ceil(o){return o=Math.pow(10,o||0),new f4(Math.ceil(this.re*o)/o,Math.ceil(this.im*o)/o)}floor(o){return o=Math.pow(10,o||0),new f4(Math.floor(this.re*o)/o,Math.floor(this.im*o)/o)}round(o){return o=Math.pow(10,o||0),new f4(Math.round(this.re*o)/o,Math.round(this.im*o)/o)}equals(o,c){var m=new f4(o,c);return Math.abs(m.re-this.re)<=f4.EPSILON&&Math.abs(m.im-this.im)<=f4.EPSILON}clone(){return new f4(this.re,this.im)}toString(){var o=this.re,c=this.im,m="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(o)<f4.EPSILON&&(o=0),Math.abs(c)<f4.EPSILON&&(c=0),c===0?m+o:(o!==0?(m+=o,m+=" ",c<0?(c=-c,m+="-"):m+="+",m+=" "):c<0&&(c=-c,m+="-"),c!==1&&(m+=c),m+"i"))}toVector(){return[this.re,this.im]}valueOf(){return this.im===0?this.re:null}isNaN(){return isNaN(this.re)||isNaN(this.im)}isZero(){return this.im===0&&this.re===0}isFinite(){return isFinite(this.re)&&isFinite(this.im)}isInfinite(){return!(this.isNaN()||this.isFinite())}};Bs.ZERO=new Bs(0,0),Bs.ONE=new Bs(1,0),Bs.I=new Bs(0,1),Bs.PI=new Bs(Math.PI,0),Bs.E=new Bs(Math.E,0),Bs.INFINITY=new Bs(1/0,1/0),Bs.NAN=new Bs(NaN,NaN),Bs.EPSILON=1e-15;var th=9e15,pf=1e9,_h="0123456789abcdef",cf="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",df="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",uf={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-th,maxE:th,crypto:!1},li,Vc,Rs=!0,qc="[DecimalError] ",Qp=qc+"Invalid argument: ",n1=qc+"Precision limit exceeded",wh=qc+"crypto unavailable",gf="[object Decimal]",yh=Math.floor,ff=Math.pow,e1=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,s1=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,b1=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,_1=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,V1=1e7,I1=7,i2=9007199254740991,R2=cf.length-1,F2=df.length-1,X1={toStringTag:gf};X1.absoluteValue=X1.abs=function(){var s=new this.constructor(this);return s.s<0&&(s.s=1),S2(s)},X1.ceil=function(){return S2(new this.constructor(this),this.e+1,2)},X1.clampedTo=X1.clamp=function(s,o){var c,m=this,A=m.constructor;if(s=new A(s),o=new A(o),!s.s||!o.s)return new A(NaN);if(s.gt(o))throw Error(Qp+o);return c=m.cmp(s),c<0?s:m.cmp(o)>0?o:new A(m)},X1.comparedTo=X1.cmp=function(s){var o,c,m,A,ae=this,qe=ae.d,So=(s=new ae.constructor(s)).d,Hc=ae.s,mf=s.s;if(!qe||!So)return!Hc||!mf?NaN:Hc!==mf?Hc:qe===So?0:!qe^Hc<0?1:-1;if(!qe[0]||!So[0])return qe[0]?Hc:So[0]?-mf:0;if(Hc!==mf)return Hc;if(ae.e!==s.e)return ae.e>s.e^Hc<0?1:-1;for(m=qe.length,A=So.length,o=0,c=m<A?m:A;o<c;++o)if(qe[o]!==So[o])return qe[o]>So[o]^Hc<0?1:-1;return m===A?0:m>A^Hc<0?1:-1},X1.cosine=X1.cos=function(){var s,o,c=this,m=c.constructor;return c.d?c.d[0]?(s=m.precision,o=m.rounding,m.precision=s+Math.max(c.e,c.sd())+I1,m.rounding=1,c=B2(m,v2(m,c)),m.precision=s,m.rounding=o,S2(Vc==2||Vc==3?c.neg():c,s,o,!0)):new m(1):new m(NaN)},X1.cubeRoot=X1.cbrt=function(){var s,o,c,m,A,ae,qe,So,Hc,mf,p1=this,M1=p1.constructor;if(!p1.isFinite()||p1.isZero())return new M1(p1);for(Rs=!1,ae=p1.s*ff(p1.s*p1,.3333333333333333),!ae||Math.abs(ae)==1/0?(c=W2(p1.d),s=p1.e,(ae=(s-c.length+1)%3)&&(c+=ae==1||ae==-2?"0":"00"),ae=ff(c,.3333333333333333),s=yh((s+1)/3)-(s%3==(s<0?-1:2)),ae==1/0?c="5e"+s:(c=ae.toExponential(),c=c.slice(0,c.indexOf("e")+1)+s),m=new M1(c),m.s=p1.s):m=new M1(ae.toString()),qe=(s=M1.precision)+3;;)if(So=m,Hc=So.times(So).times(So),mf=Hc.plus(p1),m=K2(mf.plus(p1).times(So),mf.plus(Hc),qe+2,1),W2(So.d).slice(0,qe)===(c=W2(m.d)).slice(0,qe))if(c=c.slice(qe-3,qe+1),c=="9999"||!A&&c=="4999"){if(!A&&(S2(So,s+1,0),So.times(So).times(So).eq(p1))){m=So;break}qe+=4,A=1}else{(!+c||!+c.slice(1)&&c.charAt(0)=="5")&&(S2(m,s+1,1),o=!m.times(m).times(m).eq(p1));break}return Rs=!0,S2(m,s,M1.rounding,o)},X1.decimalPlaces=X1.dp=function(){var s,o=this.d,c=NaN;if(o){if(s=o.length-1,c=(s-yh(this.e/I1))*I1,s=o[s],s)for(;s%10==0;s/=10)c--;c<0&&(c=0)}return c},X1.dividedBy=X1.div=function(s){return K2(this,new this.constructor(s))},X1.dividedToIntegerBy=X1.divToInt=function(s){var o=this,c=o.constructor;return S2(K2(o,new c(s),0,1,1),c.precision,c.rounding)},X1.equals=X1.eq=function(s){return this.cmp(s)===0},X1.floor=function(){return S2(new this.constructor(this),this.e+1,3)},X1.greaterThan=X1.gt=function(s){return this.cmp(s)>0},X1.greaterThanOrEqualTo=X1.gte=function(s){var o=this.cmp(s);return o==1||o===0},X1.hyperbolicCosine=X1.cosh=function(){var s,o,c,m,A,ae=this,qe=ae.constructor,So=new qe(1);if(!ae.isFinite())return new qe(ae.s?1/0:NaN);if(ae.isZero())return So;c=qe.precision,m=qe.rounding,qe.precision=c+Math.max(ae.e,ae.sd())+4,qe.rounding=1,A=ae.d.length,A<32?(s=Math.ceil(A/3),o=(1/a2(4,s)).toString()):(s=16,o="2.3283064365386962890625e-10"),ae=A1(qe,1,ae.times(o),new qe(1),!0);for(var Hc,mf=s,p1=new qe(8);mf--;)Hc=ae.times(ae),ae=So.minus(Hc.times(p1.minus(Hc.times(p1))));return S2(ae,qe.precision=c,qe.rounding=m,!0)},X1.hyperbolicSine=X1.sinh=function(){var s,o,c,m,A=this,ae=A.constructor;if(!A.isFinite()||A.isZero())return new ae(A);if(o=ae.precision,c=ae.rounding,ae.precision=o+Math.max(A.e,A.sd())+4,ae.rounding=1,m=A.d.length,m<3)A=A1(ae,2,A,A,!0);else{s=1.4*Math.sqrt(m),s=s>16?16:s|0,A=A.times(1/a2(5,s)),A=A1(ae,2,A,A,!0);for(var qe,So=new ae(5),Hc=new ae(16),mf=new ae(20);s--;)qe=A.times(A),A=A.times(So.plus(qe.times(Hc.times(qe).plus(mf))))}return ae.precision=o,ae.rounding=c,S2(A,o,c,!0)},X1.hyperbolicTangent=X1.tanh=function(){var s,o,c=this,m=c.constructor;return c.isFinite()?c.isZero()?new m(c):(s=m.precision,o=m.rounding,m.precision=s+7,m.rounding=1,K2(c.sinh(),c.cosh(),m.precision=s,m.rounding=o)):new m(c.s)},X1.inverseCosine=X1.acos=function(){var s=this,o=s.constructor,c=s.abs().cmp(1),m=o.precision,A=o.rounding;return c!==-1?c===0?s.isNeg()?N1(o,m,A):new o(0):new o(NaN):s.isZero()?N1(o,m+4,A).times(.5):(o.precision=m+6,o.rounding=1,s=new o(1).minus(s).div(s.plus(1)).sqrt().atan(),o.precision=m,o.rounding=A,s.times(2))},X1.inverseHyperbolicCosine=X1.acosh=function(){var s,o,c=this,m=c.constructor;return c.lte(1)?new m(c.eq(1)?0:NaN):c.isFinite()?(s=m.precision,o=m.rounding,m.precision=s+Math.max(Math.abs(c.e),c.sd())+4,m.rounding=1,Rs=!1,c=c.times(c).minus(1).sqrt().plus(c),Rs=!0,m.precision=s,m.rounding=o,c.ln()):new m(c)},X1.inverseHyperbolicSine=X1.asinh=function(){var s,o,c=this,m=c.constructor;return!c.isFinite()||c.isZero()?new m(c):(s=m.precision,o=m.rounding,m.precision=s+2*Math.max(Math.abs(c.e),c.sd())+6,m.rounding=1,Rs=!1,c=c.times(c).plus(1).sqrt().plus(c),Rs=!0,m.precision=s,m.rounding=o,c.ln())},X1.inverseHyperbolicTangent=X1.atanh=function(){var s,o,c,m,A=this,ae=A.constructor;return A.isFinite()?A.e>=0?new ae(A.abs().eq(1)?A.s/0:A.isZero()?A:NaN):(s=ae.precision,o=ae.rounding,m=A.sd(),Math.max(m,s)<2*-A.e-1?S2(new ae(A),s,o,!0):(ae.precision=c=m-A.e,A=K2(A.plus(1),new ae(1).minus(A),c+s,1),ae.precision=s+4,ae.rounding=1,A=A.ln(),ae.precision=s,ae.rounding=o,A.times(.5))):new ae(NaN)},X1.inverseSine=X1.asin=function(){var s,o,c,m,A=this,ae=A.constructor;return A.isZero()?new ae(A):(o=A.abs().cmp(1),c=ae.precision,m=ae.rounding,o!==-1?o===0?(s=N1(ae,c+4,m).times(.5),s.s=A.s,s):new ae(NaN):(ae.precision=c+6,ae.rounding=1,A=A.div(new ae(1).minus(A.times(A)).sqrt().plus(1)).atan(),ae.precision=c,ae.rounding=m,A.times(2)))},X1.inverseTangent=X1.atan=function(){var s,o,c,m,A,ae,qe,So,Hc,mf=this,p1=mf.constructor,M1=p1.precision,R1=p1.rounding;if(mf.isFinite()){if(mf.isZero())return new p1(mf);if(mf.abs().eq(1)&&M1+4<=F2)return qe=N1(p1,M1+4,R1).times(.25),qe.s=mf.s,qe}else{if(!mf.s)return new p1(NaN);if(M1+4<=F2)return qe=N1(p1,M1+4,R1).times(.5),qe.s=mf.s,qe}for(p1.precision=So=M1+10,p1.rounding=1,c=Math.min(28,So/I1+2|0),s=c;s;--s)mf=mf.div(mf.times(mf).plus(1).sqrt().plus(1));for(Rs=!1,o=Math.ceil(So/I1),m=1,Hc=mf.times(mf),qe=new p1(mf),A=mf;s!==-1;)if(A=A.times(Hc),ae=qe.minus(A.div(m+=2)),A=A.times(Hc),qe=ae.plus(A.div(m+=2)),qe.d[o]!==void 0)for(s=o;qe.d[s]===ae.d[s]&&s--;);return c&&(qe=qe.times(2<<c-1)),Rs=!0,S2(qe,p1.precision=M1,p1.rounding=R1,!0)},X1.isFinite=function(){return!!this.d},X1.isInteger=X1.isInt=function(){return!!this.d&&yh(this.e/I1)>this.d.length-2},X1.isNaN=function(){return!this.s},X1.isNegative=X1.isNeg=function(){return this.s<0},X1.isPositive=X1.isPos=function(){return this.s>0},X1.isZero=function(){return!!this.d&&this.d[0]===0},X1.lessThan=X1.lt=function(s){return this.cmp(s)<0},X1.lessThanOrEqualTo=X1.lte=function(s){return this.cmp(s)<1},X1.logarithm=X1.log=function(s){var o,c,m,A,ae,qe,So,Hc,mf=this,p1=mf.constructor,M1=p1.precision,R1=p1.rounding,G1=5;if(s==null)s=new p1(10),o=!0;else{if(s=new p1(s),c=s.d,s.s<0||!c||!c[0]||s.eq(1))return new p1(NaN);o=s.eq(10)}if(c=mf.d,mf.s<0||!c||!c[0]||mf.eq(1))return new p1(c&&!c[0]?-1/0:mf.s!=1?NaN:c?0:1/0);if(o)if(c.length>1)ae=!0;else{for(A=c[0];A%10===0;)A/=10;ae=A!==1}if(Rs=!1,So=M1+G1,qe=u1(mf,So),m=o?K1(p1,So+10):u1(s,So),Hc=K2(qe,m,So,1),V2(Hc.d,A=M1,R1))do if(So+=10,qe=u1(mf,So),m=o?K1(p1,So+10):u1(s,So),Hc=K2(qe,m,So,1),!ae){+W2(Hc.d).slice(A+1,A+15)+1==1e14&&(Hc=S2(Hc,M1+1,0));break}while(V2(Hc.d,A+=10,R1));return Rs=!0,S2(Hc,M1,R1)},X1.minus=X1.sub=function(s){var o,c,m,A,ae,qe,So,Hc,mf,p1,M1,R1,G1=this,c4=G1.constructor;if(s=new c4(s),!G1.d||!s.d)return!G1.s||!s.s?s=new c4(NaN):G1.d?s.s=-s.s:s=new c4(s.d||G1.s!==s.s?G1:NaN),s;if(G1.s!=s.s)return s.s=-s.s,G1.plus(s);if(mf=G1.d,R1=s.d,So=c4.precision,Hc=c4.rounding,!mf[0]||!R1[0]){if(R1[0])s.s=-s.s;else if(mf[0])s=new c4(G1);else return new c4(Hc===3?-0:0);return Rs?S2(s,So,Hc):s}if(c=yh(s.e/I1),p1=yh(G1.e/I1),mf=mf.slice(),ae=p1-c,ae){for(M1=ae<0,M1?(o=mf,ae=-ae,qe=R1.length):(o=R1,c=p1,qe=mf.length),m=Math.max(Math.ceil(So/I1),qe)+2,ae>m&&(ae=m,o.length=1),o.reverse(),m=ae;m--;)o.push(0);o.reverse()}else{for(m=mf.length,qe=R1.length,M1=m<qe,M1&&(qe=m),m=0;m<qe;m++)if(mf[m]!=R1[m]){M1=mf[m]<R1[m];break}ae=0}for(M1&&(o=mf,mf=R1,R1=o,s.s=-s.s),qe=mf.length,m=R1.length-qe;m>0;--m)mf[qe++]=0;for(m=R1.length;m>ae;){if(mf[--m]<R1[m]){for(A=m;A&&mf[--A]===0;)mf[A]=V1-1;--mf[A],mf[m]+=V1}mf[m]-=R1[m]}for(;mf[--qe]===0;)mf.pop();for(;mf[0]===0;mf.shift())--c;return mf[0]?(s.d=mf,s.e=F1(mf,c),Rs?S2(s,So,Hc):s):new c4(Hc===3?-0:0)},X1.modulo=X1.mod=function(s){var o,c=this,m=c.constructor;return s=new m(s),!c.d||!s.s||s.d&&!s.d[0]?new m(NaN):!s.d||c.d&&!c.d[0]?S2(new m(c),m.precision,m.rounding):(Rs=!1,m.modulo==9?(o=K2(c,s.abs(),0,3,1),o.s*=s.s):o=K2(c,s,0,m.modulo,1),o=o.times(s),Rs=!0,c.minus(o))},X1.naturalExponential=X1.exp=function(){return g1(this)},X1.naturalLogarithm=X1.ln=function(){return u1(this)},X1.negated=X1.neg=function(){var s=new this.constructor(this);return s.s=-s.s,S2(s)},X1.plus=X1.add=function(s){var o,c,m,A,ae,qe,So,Hc,mf,p1,M1=this,R1=M1.constructor;if(s=new R1(s),!M1.d||!s.d)return!M1.s||!s.s?s=new R1(NaN):M1.d||(s=new R1(s.d||M1.s===s.s?M1:NaN)),s;if(M1.s!=s.s)return s.s=-s.s,M1.minus(s);if(mf=M1.d,p1=s.d,So=R1.precision,Hc=R1.rounding,!mf[0]||!p1[0])return p1[0]||(s=new R1(M1)),Rs?S2(s,So,Hc):s;if(ae=yh(M1.e/I1),m=yh(s.e/I1),mf=mf.slice(),A=ae-m,A){for(A<0?(c=mf,A=-A,qe=p1.length):(c=p1,m=ae,qe=mf.length),ae=Math.ceil(So/I1),qe=ae>qe?ae+1:qe+1,A>qe&&(A=qe,c.length=1),c.reverse();A--;)c.push(0);c.reverse()}for(qe=mf.length,A=p1.length,qe-A<0&&(A=qe,c=p1,p1=mf,mf=c),o=0;A;)o=(mf[--A]=mf[A]+p1[A]+o)/V1|0,mf[A]%=V1;for(o&&(mf.unshift(o),++m),qe=mf.length;mf[--qe]==0;)mf.pop();return s.d=mf,s.e=F1(mf,m),Rs?S2(s,So,Hc):s},X1.precision=X1.sd=function(s){var o,c=this;if(s!==void 0&&s!==!!s&&s!==1&&s!==0)throw Error(Qp+s);return c.d?(o=J1(c.d),s&&c.e+1>o&&(o=c.e+1)):o=NaN,o},X1.round=function(){var s=this,o=s.constructor;return S2(new o(s),s.e+1,o.rounding)},X1.sine=X1.sin=function(){var s,o,c=this,m=c.constructor;return c.isFinite()?c.isZero()?new m(c):(s=m.precision,o=m.rounding,m.precision=s+Math.max(c.e,c.sd())+I1,m.rounding=1,c=Z1(m,v2(m,c)),m.precision=s,m.rounding=o,S2(Vc>2?c.neg():c,s,o,!0)):new m(NaN)},X1.squareRoot=X1.sqrt=function(){var s,o,c,m,A,ae,qe=this,So=qe.d,Hc=qe.e,mf=qe.s,p1=qe.constructor;if(mf!==1||!So||!So[0])return new p1(!mf||mf<0&&(!So||So[0])?NaN:So?qe:1/0);for(Rs=!1,mf=Math.sqrt(+qe),mf==0||mf==1/0?(o=W2(So),(o.length+Hc)%2==0&&(o+="0"),mf=Math.sqrt(o),Hc=yh((Hc+1)/2)-(Hc<0||Hc%2),mf==1/0?o="5e"+Hc:(o=mf.toExponential(),o=o.slice(0,o.indexOf("e")+1)+Hc),m=new p1(o)):m=new p1(mf.toString()),c=(Hc=p1.precision)+3;;)if(ae=m,m=ae.plus(K2(qe,ae,c+2,1)).times(.5),W2(ae.d).slice(0,c)===(o=W2(m.d)).slice(0,c))if(o=o.slice(c-3,c+1),o=="9999"||!A&&o=="4999"){if(!A&&(S2(ae,Hc+1,0),ae.times(ae).eq(qe))){m=ae;break}c+=4,A=1}else{(!+o||!+o.slice(1)&&o.charAt(0)=="5")&&(S2(m,Hc+1,1),s=!m.times(m).eq(qe));break}return Rs=!0,S2(m,Hc,p1.rounding,s)},X1.tangent=X1.tan=function(){var s,o,c=this,m=c.constructor;return c.isFinite()?c.isZero()?new m(c):(s=m.precision,o=m.rounding,m.precision=s+10,m.rounding=1,c=c.sin(),c.s=1,c=K2(c,new m(1).minus(c.times(c)).sqrt(),s+10,0),m.precision=s,m.rounding=o,S2(Vc==2||Vc==4?c.neg():c,s,o,!0)):new m(NaN)},X1.times=X1.mul=function(s){var o,c,m,A,ae,qe,So,Hc,mf,p1=this,M1=p1.constructor,R1=p1.d,G1=(s=new M1(s)).d;if(s.s*=p1.s,!R1||!R1[0]||!G1||!G1[0])return new M1(!s.s||R1&&!R1[0]&&!G1||G1&&!G1[0]&&!R1?NaN:!R1||!G1?s.s/0:s.s*0);for(c=yh(p1.e/I1)+yh(s.e/I1),Hc=R1.length,mf=G1.length,Hc<mf&&(ae=R1,R1=G1,G1=ae,qe=Hc,Hc=mf,mf=qe),ae=[],qe=Hc+mf,m=qe;m--;)ae.push(0);for(m=mf;--m>=0;){for(o=0,A=Hc+m;A>m;)So=ae[A]+G1[m]*R1[A-m-1]+o,ae[A--]=So%V1|0,o=So/V1|0;ae[A]=(ae[A]+o)%V1|0}for(;!ae[--qe];)ae.pop();return o?++c:ae.shift(),s.d=ae,s.e=F1(ae,c),Rs?S2(s,M1.precision,M1.rounding):s},X1.toBinary=function(s,o){return A2(this,2,s,o)},X1.toDecimalPlaces=X1.toDP=function(s,o){var c=this,m=c.constructor;return c=new m(c),s===void 0?c:(N2(s,0,pf),o===void 0?o=m.rounding:N2(o,0,8),S2(c,s+c.e+1,o))},X1.toExponential=function(s,o){var c,m=this,A=m.constructor;return s===void 0?c=E1(m,!0):(N2(s,0,pf),o===void 0?o=A.rounding:N2(o,0,8),m=S2(new A(m),s+1,o),c=E1(m,!0,s+1)),m.isNeg()&&!m.isZero()?"-"+c:c},X1.toFixed=function(s,o){var c,m,A=this,ae=A.constructor;return s===void 0?c=E1(A):(N2(s,0,pf),o===void 0?o=ae.rounding:N2(o,0,8),m=S2(new ae(A),s+A.e+1,o),c=E1(m,!1,s+m.e+1)),A.isNeg()&&!A.isZero()?"-"+c:c},X1.toFraction=function(s){var o,c,m,A,ae,qe,So,Hc,mf,p1,M1,R1,G1=this,c4=G1.d,t4=G1.constructor;if(!c4)return new t4(G1);if(mf=c=new t4(1),m=Hc=new t4(0),o=new t4(m),ae=o.e=J1(c4)-G1.e-1,qe=ae%I1,o.d[0]=ff(10,qe<0?I1+qe:qe),s==null)s=ae>0?o:mf;else{if(So=new t4(s),!So.isInt()||So.lt(mf))throw Error(Qp+So);s=So.gt(o)?ae>0?o:mf:So}for(Rs=!1,So=new t4(W2(c4)),p1=t4.precision,t4.precision=ae=c4.length*I1*2;M1=K2(So,o,0,1,1),A=c.plus(M1.times(m)),A.cmp(s)!=1;)c=m,m=A,A=mf,mf=Hc.plus(M1.times(A)),Hc=A,A=o,o=So.minus(M1.times(A)),So=A;return A=K2(s.minus(c),m,0,1,1),Hc=Hc.plus(A.times(mf)),c=c.plus(A.times(m)),Hc.s=mf.s=G1.s,R1=K2(mf,m,ae,1).minus(G1).abs().cmp(K2(Hc,c,ae,1).minus(G1).abs())<1?[mf,m]:[Hc,c],t4.precision=p1,Rs=!0,R1},X1.toHexadecimal=X1.toHex=function(s,o){return A2(this,16,s,o)},X1.toNearest=function(s,o){var c=this,m=c.constructor;if(c=new m(c),s==null){if(!c.d)return c;s=new m(1),o=m.rounding}else{if(s=new m(s),o===void 0?o=m.rounding:N2(o,0,8),!c.d)return s.s?c:s;if(!s.d)return s.s&&(s.s=c.s),s}return s.d[0]?(Rs=!1,c=K2(c,s,0,o,1).times(s),Rs=!0,S2(c)):(s.s=c.s,c=s),c},X1.toNumber=function(){return+this},X1.toOctal=function(s,o){return A2(this,8,s,o)},X1.toPower=X1.pow=function(s){var o,c,m,A,ae,qe,So=this,Hc=So.constructor,mf=+(s=new Hc(s));if(!So.d||!s.d||!So.d[0]||!s.d[0])return new Hc(ff(+So,mf));if(So=new Hc(So),So.eq(1))return So;if(m=Hc.precision,ae=Hc.rounding,s.eq(1))return S2(So,m,ae);if(o=yh(s.e/I1),o>=s.d.length-1&&(c=mf<0?-mf:mf)<=i2)return A=n2(Hc,So,c,m),s.s<0?new Hc(1).div(A):S2(A,m,ae);if(qe=So.s,qe<0){if(o<s.d.length-1)return new Hc(NaN);if((s.d[o]&1)==0&&(qe=1),So.e==0&&So.d[0]==1&&So.d.length==1)return So.s=qe,So}return c=ff(+So,mf),o=c==0||!isFinite(c)?yh(mf*(Math.log("0."+W2(So.d))/Math.LN10+So.e+1)):new Hc(c+"").e,o>Hc.maxE+1||o<Hc.minE-1?new Hc(o>0?qe/0:0):(Rs=!1,Hc.rounding=So.s=1,c=Math.min(12,(o+"").length),A=g1(s.times(u1(So,m+c)),m),A.d&&(A=S2(A,m+5,1),V2(A.d,m,ae)&&(o=m+10,A=S2(g1(s.times(u1(So,o+c)),o),o+5,1),+W2(A.d).slice(m+1,m+15)+1==1e14&&(A=S2(A,m+1,0)))),A.s=qe,Rs=!0,Hc.rounding=ae,S2(A,m,ae))},X1.toPrecision=function(s,o){var c,m=this,A=m.constructor;return s===void 0?c=E1(m,m.e<=A.toExpNeg||m.e>=A.toExpPos):(N2(s,1,pf),o===void 0?o=A.rounding:N2(o,0,8),m=S2(new A(m),s,o),c=E1(m,s<=m.e||m.e<=A.toExpNeg,s)),m.isNeg()&&!m.isZero()?"-"+c:c},X1.toSignificantDigits=X1.toSD=function(s,o){var c=this,m=c.constructor;return s===void 0?(s=m.precision,o=m.rounding):(N2(s,1,pf),o===void 0?o=m.rounding:N2(o,0,8)),S2(new m(c),s,o)},X1.toString=function(){var s=this,o=s.constructor,c=E1(s,s.e<=o.toExpNeg||s.e>=o.toExpPos);return s.isNeg()&&!s.isZero()?"-"+c:c},X1.truncated=X1.trunc=function(){return S2(new this.constructor(this),this.e+1,1)},X1.valueOf=X1.toJSON=function(){var s=this,o=s.constructor,c=E1(s,s.e<=o.toExpNeg||s.e>=o.toExpPos);return s.isNeg()?"-"+c:c};function W2(s){var o,c,m,A=s.length-1,ae="",qe=s[0];if(A>0){for(ae+=qe,o=1;o<A;o++)m=s[o]+"",c=I1-m.length,c&&(ae+=E2(c)),ae+=m;qe=s[o],m=qe+"",c=I1-m.length,c&&(ae+=E2(c))}else if(qe===0)return"0";for(;qe%10===0;)qe/=10;return ae+qe}function N2(s,o,c){if(s!==~~s||s<o||s>c)throw Error(Qp+s)}function V2(s,o,c,m){var A,ae,qe,So;for(ae=s[0];ae>=10;ae/=10)--o;return--o<0?(o+=I1,A=0):(A=Math.ceil((o+1)/I1),o%=I1),ae=ff(10,I1-o),So=s[A]%ae|0,m==null?o<3?(o==0?So=So/100|0:o==1&&(So=So/10|0),qe=c<4&&So==99999||c>3&&So==49999||So==5e4||So==0):qe=(c<4&&So+1==ae||c>3&&So+1==ae/2)&&(s[A+1]/ae/100|0)==ff(10,o-2)-1||(So==ae/2||So==0)&&(s[A+1]/ae/100|0)==0:o<4?(o==0?So=So/1e3|0:o==1?So=So/100|0:o==2&&(So=So/10|0),qe=(m||c<4)&&So==9999||!m&&c>3&&So==4999):qe=((m||c<4)&&So+1==ae||!m&&c>3&&So+1==ae/2)&&(s[A+1]/ae/1e3|0)==ff(10,o-3)-1,qe}function q2(s,o,c){for(var m,A=[0],ae,qe=0,So=s.length;qe<So;){for(ae=A.length;ae--;)A[ae]*=o;for(A[0]+=_h.indexOf(s.charAt(qe++)),m=0;m<A.length;m++)A[m]>c-1&&(A[m+1]===void 0&&(A[m+1]=0),A[m+1]+=A[m]/c|0,A[m]%=c)}return A.reverse()}function B2(s,o){var c,m,A;if(o.isZero())return o;m=o.d.length,m<32?(c=Math.ceil(m/3),A=(1/a2(4,c)).toString()):(c=16,A="2.3283064365386962890625e-10"),s.precision+=c,o=A1(s,1,o.times(A),new s(1));for(var ae=c;ae--;){var qe=o.times(o);o=qe.times(qe).minus(qe).times(8).plus(1)}return s.precision-=c,o}var K2=function(){function s(m,A,ae){var qe,So=0,Hc=m.length;for(m=m.slice();Hc--;)qe=m[Hc]*A+So,m[Hc]=qe%ae|0,So=qe/ae|0;return So&&m.unshift(So),m}function o(m,A,ae,qe){var So,Hc;if(ae!=qe)Hc=ae>qe?1:-1;else for(So=Hc=0;So<ae;So++)if(m[So]!=A[So]){Hc=m[So]>A[So]?1:-1;break}return Hc}function c(m,A,ae,qe){for(var So=0;ae--;)m[ae]-=So,So=m[ae]<A[ae]?1:0,m[ae]=So*qe+m[ae]-A[ae];for(;!m[0]&&m.length>1;)m.shift()}return function(m,A,ae,qe,So,Hc){var mf,p1,M1,R1,G1,c4,t4,m4,N4,e3,G4,$3,f5,U5,Vy,sS,Vx,GS,By,oS,lS=m.constructor,KS=m.s==A.s?1:-1,J5=m.d,_6=A.d;if(!J5||!J5[0]||!_6||!_6[0])return new lS(!m.s||!A.s||(J5?_6&&J5[0]==_6[0]:!_6)?NaN:J5&&J5[0]==0||!_6?KS*0:KS/0);for(Hc?(G1=1,p1=m.e-A.e):(Hc=V1,G1=I1,p1=yh(m.e/G1)-yh(A.e/G1)),By=_6.length,Vx=J5.length,N4=new lS(KS),e3=N4.d=[],M1=0;_6[M1]==(J5[M1]||0);M1++);if(_6[M1]>(J5[M1]||0)&&p1--,ae==null?(U5=ae=lS.precision,qe=lS.rounding):So?U5=ae+(m.e-A.e)+1:U5=ae,U5<0)e3.push(1),c4=!0;else{if(U5=U5/G1+2|0,M1=0,By==1){for(R1=0,_6=_6[0],U5++;(M1<Vx||R1)&&U5--;M1++)Vy=R1*Hc+(J5[M1]||0),e3[M1]=Vy/_6|0,R1=Vy%_6|0;c4=R1||M1<Vx}else{for(R1=Hc/(_6[0]+1)|0,R1>1&&(_6=s(_6,R1,Hc),J5=s(J5,R1,Hc),By=_6.length,Vx=J5.length),sS=By,G4=J5.slice(0,By),$3=G4.length;$3<By;)G4[$3++]=0;oS=_6.slice(),oS.unshift(0),GS=_6[0],_6[1]>=Hc/2&&++GS;do R1=0,mf=o(_6,G4,By,$3),mf<0?(f5=G4[0],By!=$3&&(f5=f5*Hc+(G4[1]||0)),R1=f5/GS|0,R1>1?(R1>=Hc&&(R1=Hc-1),t4=s(_6,R1,Hc),m4=t4.length,$3=G4.length,mf=o(t4,G4,m4,$3),mf==1&&(R1--,c(t4,By<m4?oS:_6,m4,Hc))):(R1==0&&(mf=R1=1),t4=_6.slice()),m4=t4.length,m4<$3&&t4.unshift(0),c(G4,t4,$3,Hc),mf==-1&&($3=G4.length,mf=o(_6,G4,By,$3),mf<1&&(R1++,c(G4,By<$3?oS:_6,$3,Hc))),$3=G4.length):mf===0&&(R1++,G4=[0]),e3[M1++]=R1,mf&&G4[0]?G4[$3++]=J5[sS]||0:(G4=[J5[sS]],$3=1);while((sS++<Vx||G4[0]!==void 0)&&U5--);c4=G4[0]!==void 0}e3[0]||e3.shift()}if(G1==1)N4.e=p1,li=c4;else{for(M1=1,R1=e3[0];R1>=10;R1/=10)M1++;N4.e=M1+p1*G1-1,S2(N4,So?ae+N4.e+1:ae,qe,c4)}return N4}}();function S2(s,o,c,m){var A,ae,qe,So,Hc,mf,p1,M1,R1,G1=s.constructor;e:if(o!=null){if(M1=s.d,!M1)return s;for(A=1,So=M1[0];So>=10;So/=10)A++;if(ae=o-A,ae<0)ae+=I1,qe=o,p1=M1[R1=0],Hc=p1/ff(10,A-qe-1)%10|0;else if(R1=Math.ceil((ae+1)/I1),So=M1.length,R1>=So)if(m){for(;So++<=R1;)M1.push(0);p1=Hc=0,A=1,ae%=I1,qe=ae-I1+1}else break e;else{for(p1=So=M1[R1],A=1;So>=10;So/=10)A++;ae%=I1,qe=ae-I1+A,Hc=qe<0?0:p1/ff(10,A-qe-1)%10|0}if(m=m||o<0||M1[R1+1]!==void 0||(qe<0?p1:p1%ff(10,A-qe-1)),mf=c<4?(Hc||m)&&(c==0||c==(s.s<0?3:2)):Hc>5||Hc==5&&(c==4||m||c==6&&(ae>0?qe>0?p1/ff(10,A-qe):0:M1[R1-1])%10&1||c==(s.s<0?8:7)),o<1||!M1[0])return M1.length=0,mf?(o-=s.e+1,M1[0]=ff(10,(I1-o%I1)%I1),s.e=-o||0):M1[0]=s.e=0,s;if(ae==0?(M1.length=R1,So=1,R1--):(M1.length=R1+1,So=ff(10,I1-ae),M1[R1]=qe>0?(p1/ff(10,A-qe)%ff(10,qe)|0)*So:0),mf)for(;;)if(R1==0){for(ae=1,qe=M1[0];qe>=10;qe/=10)ae++;for(qe=M1[0]+=So,So=1;qe>=10;qe/=10)So++;ae!=So&&(s.e++,M1[0]==V1&&(M1[0]=1));break}else{if(M1[R1]+=So,M1[R1]!=V1)break;M1[R1--]=0,So=1}for(ae=M1.length;M1[--ae]===0;)M1.pop()}return Rs&&(s.e>G1.maxE?(s.d=null,s.e=NaN):s.e<G1.minE&&(s.e=0,s.d=[0])),s}function E1(s,o,c){if(!s.isFinite())return L1(s);var m,A=s.e,ae=W2(s.d),qe=ae.length;return o?(c&&(m=c-qe)>0?ae=ae.charAt(0)+"."+ae.slice(1)+E2(m):qe>1&&(ae=ae.charAt(0)+"."+ae.slice(1)),ae=ae+(s.e<0?"e":"e+")+s.e):A<0?(ae="0."+E2(-A-1)+ae,c&&(m=c-qe)>0&&(ae+=E2(m))):A>=qe?(ae+=E2(A+1-qe),c&&(m=c-A-1)>0&&(ae=ae+"."+E2(m))):((m=A+1)<qe&&(ae=ae.slice(0,m)+"."+ae.slice(m)),c&&(m=c-qe)>0&&(A+1===qe&&(ae+="."),ae+=E2(m))),ae}function F1(s,o){var c=s[0];for(o*=I1;c>=10;c/=10)o++;return o}function K1(s,o,c){if(o>R2)throw Rs=!0,c&&(s.precision=c),Error(n1);return S2(new s(cf),o,1,!0)}function N1(s,o,c){if(o>F2)throw Error(n1);return S2(new s(df),o,c,!0)}function J1(s){var o=s.length-1,c=o*I1+1;if(o=s[o],o){for(;o%10==0;o/=10)c--;for(o=s[0];o>=10;o/=10)c++}return c}function E2(s){for(var o="";s--;)o+="0";return o}function n2(s,o,c,m){var A,ae=new s(1),qe=Math.ceil(m/I1+4);for(Rs=!1;;){if(c%2&&(ae=ae.times(o),l2(ae.d,qe)&&(A=!0)),c=yh(c/2),c===0){c=ae.d.length-1,A&&ae.d[c]===0&&++ae.d[c];break}o=o.times(o),l2(o.d,qe)}return Rs=!0,ae}function D1(s){return s.d[s.d.length-1]&1}function i1(s,o,c){for(var m,A,ae=new s(o[0]),qe=0;++qe<o.length;){if(A=new s(o[qe]),!A.s){ae=A;break}m=ae.cmp(A),(m===c||m===0&&ae.s===c)&&(ae=A)}return ae}function g1(s,o){var c,m,A,ae,qe,So,Hc,mf=0,p1=0,M1=0,R1=s.constructor,G1=R1.rounding,c4=R1.precision;if(!s.d||!s.d[0]||s.e>17)return new R1(s.d?s.d[0]?s.s<0?0:1/0:1:s.s?s.s<0?0:s:NaN);for(o==null?(Rs=!1,Hc=c4):Hc=o,So=new R1(.03125);s.e>-2;)s=s.times(So),M1+=5;for(m=Math.log(ff(2,M1))/Math.LN10*2+5|0,Hc+=m,c=ae=qe=new R1(1),R1.precision=Hc;;){if(ae=S2(ae.times(s),Hc,1),c=c.times(++p1),So=qe.plus(K2(ae,c,Hc,1)),W2(So.d).slice(0,Hc)===W2(qe.d).slice(0,Hc)){for(A=M1;A--;)qe=S2(qe.times(qe),Hc,1);if(o==null)if(mf<3&&V2(qe.d,Hc-m,G1,mf))R1.precision=Hc+=10,c=ae=So=new R1(1),p1=0,mf++;else return S2(qe,R1.precision=c4,G1,Rs=!0);else return R1.precision=c4,qe}qe=So}}function u1(s,o){var c,m,A,ae,qe,So,Hc,mf,p1,M1,R1,G1=1,c4=10,t4=s,m4=t4.d,N4=t4.constructor,e3=N4.rounding,G4=N4.precision;if(t4.s<0||!m4||!m4[0]||!t4.e&&m4[0]==1&&m4.length==1)return new N4(m4&&!m4[0]?-1/0:t4.s!=1?NaN:m4?0:t4);if(o==null?(Rs=!1,p1=G4):p1=o,N4.precision=p1+=c4,c=W2(m4),m=c.charAt(0),Math.abs(ae=t4.e)<15e14){for(;m<7&&m!=1||m==1&&c.charAt(1)>3;)t4=t4.times(s),c=W2(t4.d),m=c.charAt(0),G1++;ae=t4.e,m>1?(t4=new N4("0."+c),ae++):t4=new N4(m+"."+c.slice(1))}else return mf=K1(N4,p1+2,G4).times(ae+""),t4=u1(new N4(m+"."+c.slice(1)),p1-c4).plus(mf),N4.precision=G4,o==null?S2(t4,G4,e3,Rs=!0):t4;for(M1=t4,Hc=qe=t4=K2(t4.minus(1),t4.plus(1),p1,1),R1=S2(t4.times(t4),p1,1),A=3;;){if(qe=S2(qe.times(R1),p1,1),mf=Hc.plus(K2(qe,new N4(A),p1,1)),W2(mf.d).slice(0,p1)===W2(Hc.d).slice(0,p1))if(Hc=Hc.times(2),ae!==0&&(Hc=Hc.plus(K1(N4,p1+2,G4).times(ae+""))),Hc=K2(Hc,new N4(G1),p1,1),o==null)if(V2(Hc.d,p1-c4,e3,So))N4.precision=p1+=c4,mf=qe=t4=K2(M1.minus(1),M1.plus(1),p1,1),R1=S2(t4.times(t4),p1,1),A=So=1;else return S2(Hc,N4.precision=G4,e3,Rs=!0);else return N4.precision=G4,Hc;Hc=mf,A+=2}}function L1(s){return String(s.s*s.s/0)}function B1(s,o){var c,m,A;for((c=o.indexOf("."))>-1&&(o=o.replace(".","")),(m=o.search(/e/i))>0?(c<0&&(c=m),c+=+o.slice(m+1),o=o.substring(0,m)):c<0&&(c=o.length),m=0;o.charCodeAt(m)===48;m++);for(A=o.length;o.charCodeAt(A-1)===48;--A);if(o=o.slice(m,A),o){if(A-=m,s.e=c=c-m-1,s.d=[],m=(c+1)%I1,c<0&&(m+=I1),m<A){for(m&&s.d.push(+o.slice(0,m)),A-=I1;m<A;)s.d.push(+o.slice(m,m+=I1));o=o.slice(m),m=I1-o.length}else m-=A;for(;m--;)o+="0";s.d.push(+o),Rs&&(s.e>s.constructor.maxE?(s.d=null,s.e=NaN):s.e<s.constructor.minE&&(s.e=0,s.d=[0]))}else s.e=0,s.d=[0];return s}function Q1(s,o){var c,m,A,ae,qe,So,Hc,mf,p1;if(o.indexOf("_")>-1){if(o=o.replace(/(\d)_(?=\d)/g,"$1"),_1.test(o))return B1(s,o)}else if(o==="Infinity"||o==="NaN")return+o||(s.s=NaN),s.e=NaN,s.d=null,s;if(s1.test(o))c=16,o=o.toLowerCase();else if(e1.test(o))c=2;else if(b1.test(o))c=8;else throw Error(Qp+o);for(ae=o.search(/p/i),ae>0?(Hc=+o.slice(ae+1),o=o.substring(2,ae)):o=o.slice(2),ae=o.indexOf("."),qe=ae>=0,m=s.constructor,qe&&(o=o.replace(".",""),So=o.length,ae=So-ae,A=n2(m,new m(c),ae,ae*2)),mf=q2(o,c,V1),p1=mf.length-1,ae=p1;mf[ae]===0;--ae)mf.pop();return ae<0?new m(s.s*0):(s.e=F1(mf,p1),s.d=mf,Rs=!1,qe&&(s=K2(s,A,So*4)),Hc&&(s=s.times(Math.abs(Hc)<54?ff(2,Hc):e4.pow(2,Hc))),Rs=!0,s)}function Z1(s,o){var c,m=o.d.length;if(m<3)return o.isZero()?o:A1(s,2,o,o);c=1.4*Math.sqrt(m),c=c>16?16:c|0,o=o.times(1/a2(5,c)),o=A1(s,2,o,o);for(var A,ae=new s(5),qe=new s(16),So=new s(20);c--;)A=o.times(o),o=o.times(ae.plus(A.times(qe.times(A).minus(So))));return o}function A1(s,o,c,m,A){var ae,qe,So,Hc,mf=s.precision,p1=Math.ceil(mf/I1);for(Rs=!1,Hc=c.times(c),So=new s(m);;){if(qe=K2(So.times(Hc),new s(o++*o++),mf,1),So=A?m.plus(qe):m.minus(qe),m=K2(qe.times(Hc),new s(o++*o++),mf,1),qe=So.plus(m),qe.d[p1]!==void 0){for(ae=p1;qe.d[ae]===So.d[ae]&&ae--;);if(ae==-1)break}ae=So,So=m,m=qe,qe=ae}return Rs=!0,qe.d.length=p1+1,qe}function a2(s,o){for(var c=s;--o;)c*=s;return c}function v2(s,o){var c,m=o.s<0,A=N1(s,s.precision,1),ae=A.times(.5);if(o=o.abs(),o.lte(ae))return Vc=m?4:1,o;if(c=o.divToInt(A),c.isZero())Vc=m?3:2;else{if(o=o.minus(c.times(A)),o.lte(ae))return Vc=D1(c)?m?2:3:m?4:1,o;Vc=D1(c)?m?1:4:m?3:2}return o.minus(A).abs()}function A2(s,o,c,m){var A,ae,qe,So,Hc,mf,p1,M1,R1,G1=s.constructor,c4=c!==void 0;if(c4?(N2(c,1,pf),m===void 0?m=G1.rounding:N2(m,0,8)):(c=G1.precision,m=G1.rounding),!s.isFinite())p1=L1(s);else{for(p1=E1(s),qe=p1.indexOf("."),c4?(A=2,o==16?c=c*4-3:o==8&&(c=c*3-2)):A=o,qe>=0&&(p1=p1.replace(".",""),R1=new G1(1),R1.e=p1.length-qe,R1.d=q2(E1(R1),10,A),R1.e=R1.d.length),M1=q2(p1,10,A),ae=Hc=M1.length;M1[--Hc]==0;)M1.pop();if(!M1[0])p1=c4?"0p+0":"0";else{if(qe<0?ae--:(s=new G1(s),s.d=M1,s.e=ae,s=K2(s,R1,c,m,0,A),M1=s.d,ae=s.e,mf=li),qe=M1[c],So=A/2,mf=mf||M1[c+1]!==void 0,mf=m<4?(qe!==void 0||mf)&&(m===0||m===(s.s<0?3:2)):qe>So||qe===So&&(m===4||mf||m===6&&M1[c-1]&1||m===(s.s<0?8:7)),M1.length=c,mf)for(;++M1[--c]>A-1;)M1[c]=0,c||(++ae,M1.unshift(1));for(Hc=M1.length;!M1[Hc-1];--Hc);for(qe=0,p1="";qe<Hc;qe++)p1+=_h.charAt(M1[qe]);if(c4){if(Hc>1)if(o==16||o==8){for(qe=o==16?4:3,--Hc;Hc%qe;Hc++)p1+="0";for(M1=q2(p1,A,o),Hc=M1.length;!M1[Hc-1];--Hc);for(qe=1,p1="1.";qe<Hc;qe++)p1+=_h.charAt(M1[qe])}else p1=p1.charAt(0)+"."+p1.slice(1);p1=p1+(ae<0?"p":"p+")+ae}else if(ae<0){for(;++ae;)p1="0"+p1;p1="0."+p1}else if(++ae>Hc)for(ae-=Hc;ae--;)p1+="0";else ae<Hc&&(p1=p1.slice(0,ae)+"."+p1.slice(ae))}p1=(o==16?"0x":o==2?"0b":o==8?"0o":"")+p1}return s.s<0?"-"+p1:p1}function l2(s,o){if(s.length>o)return s.length=o,!0}function x2(s){return new this(s).abs()}function u2(s){return new this(s).acos()}function s2(s){return new this(s).acosh()}function j2(s,o){return new this(s).plus(o)}function h2(s){return new this(s).asin()}function k2(s){return new this(s).asinh()}function a4(s){return new this(s).atan()}function n4(s){return new this(s).atanh()}function o4(s,o){s=new this(s),o=new this(o);var c,m=this.precision,A=this.rounding,ae=m+4;return!s.s||!o.s?c=new this(NaN):!s.d&&!o.d?(c=N1(this,ae,1).times(o.s>0?.25:.75),c.s=s.s):!o.d||s.isZero()?(c=o.s<0?N1(this,m,A):new this(0),c.s=s.s):!s.d||o.isZero()?(c=N1(this,ae,1).times(.5),c.s=s.s):o.s<0?(this.precision=ae,this.rounding=1,c=this.atan(K2(s,o,ae,1)),o=N1(this,ae,1),this.precision=m,this.rounding=A,c=s.s<0?c.minus(o):c.plus(o)):c=this.atan(K2(s,o,ae,1)),c}function P4(s){return new this(s).cbrt()}function v4(s){return S2(s=new this(s),s.e+1,2)}function P1(s,o,c){return new this(s).clamp(o,c)}function z1(s){if(!s||typeof s!="object")throw Error(qc+"Object expected");var o,c,m,A=s.defaults===!0,ae=["precision",1,pf,"rounding",0,8,"toExpNeg",-th,0,"toExpPos",0,th,"maxE",0,th,"minE",-th,0,"modulo",0,9];for(o=0;o<ae.length;o+=3)if(c=ae[o],A&&(this[c]=uf[c]),(m=s[c])!==void 0)if(yh(m)===m&&m>=ae[o+1]&&m<=ae[o+2])this[c]=m;else throw Error(Qp+c+": "+m);if(c="crypto",A&&(this[c]=uf[c]),(m=s[c])!==void 0)if(m===!0||m===!1||m===0||m===1)if(m)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[c]=!0;else throw Error(wh);else this[c]=!1;else throw Error(Qp+c+": "+m);return this}function e2(s){return new this(s).cos()}function b2(s){return new this(s).cosh()}function P2(s){var o,c,m;function A(ae){var qe,So,Hc,mf=this;if(!(mf instanceof A))return new A(ae);if(mf.constructor=A,o1(ae)){mf.s=ae.s,Rs?!ae.d||ae.e>A.maxE?(mf.e=NaN,mf.d=null):ae.e<A.minE?(mf.e=0,mf.d=[0]):(mf.e=ae.e,mf.d=ae.d.slice()):(mf.e=ae.e,mf.d=ae.d?ae.d.slice():ae.d);return}if(Hc=typeof ae,Hc==="number"){if(ae===0){mf.s=1/ae<0?-1:1,mf.e=0,mf.d=[0];return}if(ae<0?(ae=-ae,mf.s=-1):mf.s=1,ae===~~ae&&ae<1e7){for(qe=0,So=ae;So>=10;So/=10)qe++;Rs?qe>A.maxE?(mf.e=NaN,mf.d=null):qe<A.minE?(mf.e=0,mf.d=[0]):(mf.e=qe,mf.d=[ae]):(mf.e=qe,mf.d=[ae]);return}if(ae*0!==0){ae||(mf.s=NaN),mf.e=NaN,mf.d=null;return}return B1(mf,ae.toString())}if(Hc==="string")return(So=ae.charCodeAt(0))===45?(ae=ae.slice(1),mf.s=-1):(So===43&&(ae=ae.slice(1)),mf.s=1),_1.test(ae)?B1(mf,ae):Q1(mf,ae);if(Hc==="bigint")return ae<0?(ae=-ae,mf.s=-1):mf.s=1,B1(mf,ae.toString());throw Error(Qp+ae)}if(A.prototype=X1,A.ROUND_UP=0,A.ROUND_DOWN=1,A.ROUND_CEIL=2,A.ROUND_FLOOR=3,A.ROUND_HALF_UP=4,A.ROUND_HALF_DOWN=5,A.ROUND_HALF_EVEN=6,A.ROUND_HALF_CEIL=7,A.ROUND_HALF_FLOOR=8,A.EUCLID=9,A.config=A.set=z1,A.clone=P2,A.isDecimal=o1,A.abs=x2,A.acos=u2,A.acosh=s2,A.add=j2,A.asin=h2,A.asinh=k2,A.atan=a4,A.atanh=n4,A.atan2=o4,A.cbrt=P4,A.ceil=v4,A.clamp=P1,A.cos=e2,A.cosh=b2,A.div=c2,A.exp=$2,A.floor=Z2,A.hypot=Ym,A.ln=a1,A.log=l1,A.log10=h1,A.log2=w1,A.max=C1,A.min=q1,A.mod=$1,A.mul=W1,A.pow=Y1,A.random=_2,A.round=O2,A.sign=u4,A.sin=p4,A.sinh=l4,A.sqrt=A4,A.sub=h3,A.sum=s3,A.tan=y4,A.tanh=r4,A.trunc=z4,s===void 0&&(s={}),s&&s.defaults!==!0)for(m=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],o=0;o<m.length;)s.hasOwnProperty(c=m[o++])||(s[c]=this[c]);return A.config(s),A}function c2(s,o){return new this(s).div(o)}function $2(s){return new this(s).exp()}function Z2(s){return S2(s=new this(s),s.e+1,3)}function Ym(){var s,o,c=new this(0);for(Rs=!1,s=0;s<arguments.length;)if(o=new this(arguments[s++]),o.d)c.d&&(c=c.plus(o.times(o)));else{if(o.s)return Rs=!0,new this(1/0);c=o}return Rs=!0,c.sqrt()}function o1(s){return s instanceof e4||s&&s.toStringTag===gf||!1}function a1(s){return new this(s).ln()}function l1(s,o){return new this(s).log(o)}function w1(s){return new this(s).log(2)}function h1(s){return new this(s).log(10)}function C1(){return i1(this,arguments,-1)}function q1(){return i1(this,arguments,1)}function $1(s,o){return new this(s).mod(o)}function W1(s,o){return new this(s).mul(o)}function Y1(s,o){return new this(s).pow(o)}function _2(s){var o,c,m,A,ae=0,qe=new this(1),So=[];if(s===void 0?s=this.precision:N2(s,1,pf),m=Math.ceil(s/I1),this.crypto)if(crypto.getRandomValues)for(o=crypto.getRandomValues(new Uint32Array(m));ae<m;)A=o[ae],A>=429e7?o[ae]=crypto.getRandomValues(new Uint32Array(1))[0]:So[ae++]=A%1e7;else if(crypto.randomBytes){for(o=crypto.randomBytes(m*=4);ae<m;)A=o[ae]+(o[ae+1]<<8)+(o[ae+2]<<16)+((o[ae+3]&127)<<24),A>=214e7?crypto.randomBytes(4).copy(o,ae):(So.push(A%1e7),ae+=4);ae=m/4}else throw Error(wh);else for(;ae<m;)So[ae++]=Math.random()*1e7|0;for(m=So[--ae],s%=I1,m&&s&&(A=ff(10,I1-s),So[ae]=(m/A|0)*A);So[ae]===0;ae--)So.pop();if(ae<0)c=0,So=[0];else{for(c=-1;So[0]===0;c-=I1)So.shift();for(m=1,A=So[0];A>=10;A/=10)m++;m<I1&&(c-=I1-m)}return qe.e=c,qe.d=So,qe}function O2(s){return S2(s=new this(s),s.e+1,this.rounding)}function u4(s){return s=new this(s),s.d?s.d[0]?s.s:0*s.s:s.s||NaN}function p4(s){return new this(s).sin()}function l4(s){return new this(s).sinh()}function A4(s){return new this(s).sqrt()}function h3(s,o){return new this(s).sub(o)}function s3(){var s=0,o=arguments,c=new this(o[s]);for(Rs=!1;c.s&&++s<o.length;)c=c.plus(o[s]);return Rs=!0,S2(c,this.precision,this.rounding)}function y4(s){return new this(s).tan()}function r4(s){return new this(s).tanh()}function z4(s){return S2(s=new this(s),s.e+1,1)}X1[Symbol.for("nodejs.util.inspect.custom")]=X1.toString,X1[Symbol.toStringTag]="Decimal";var e4=X1.constructor=P2(uf);cf=new e4(cf),df=new e4(df);var O4=e4,C4="\x1B[0m",H2="\x1B[30;1m",x1="\x1B[33m",A3="\x1B[34;1m",V6="\x1B[36;1m",K4="\x1B[101;97m",c3="\x1B[1m",b4;function Y4(s){if(!b4){let o=`^[${["Zyyy","Zinh","Arab","Armn","Beng","Bopo","Cyrl","Deva","Ethi","Geor","Grek","Gujr","Guru","Hang","Hani","Hebr","Hira","Kana","Knda","Khmr","Laoo","Latn","Mlym","Mymr","Orya","Sinh","Taml","Telu","Thaa","Thai","Tibt"].map(c=>`\\p{Script=${c}}`).join("")}]*$`;b4=new RegExp(o,"u")}return b4.test(s)}function z3(s){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(s)||O1.test(s)?!0:Y4(s)?new RegExp("^[\\p{XIDS}_]\\p{XIDC}*$","u").test(s):!1}var d6="\\u{FE0F}",G6="\\u{20E3}",H4="\\u{200D}",De="\\p{RI}\\p{RI}",Fc="(?:[\\u{E0020}-\\u{E007E}]+\\u{E007F})",hf=`(?:\\p{EMod}|${d6}${G6}?|${Fc})`,r1="(?:(?=\\P{XIDC})\\p{Emoji})",d1=`(?:${r1}${hf}*|\\p{Emoji}${hf}+|${De})`,y1=`(?:${d1})(${H4}${d1})*`,v1=new RegExp(`(?:${y1})+`,"u"),O1=new RegExp(`^(?:${y1})+$`,"u");function m2(s){return typeof s!="string"?"not-a-string":s===""?"empty-string":s.normalize()!==s?"expected-nfc":/[\u200E\u200F\u2066-\u2069\u202A-\u202E]/.test(s)?"unexpected-bidi-marker":O1.test(s)?"valid":new RegExp("\\p{XIDC}","u").test(s)&&v1.test(s)?"unexpected-mixed-emoji":Y4(s)?z3(s)?"valid":z3(s[0])?"invalid-char":"invalid-first-char":"unexpected-script"}var T2=["number","finite_number","complex","finite_complex","imaginary","real","finite_real","rational","finite_rational","integer","finite_integer","non_finite_number"],w2=["indexed_collection","list","tuple"],d4=[...w2,"collection","set","record","dictionary"],z2=["scalar",...T2,"boolean","string"],i4=["value",...d4,...z2],E4=["expression","symbol","function",...i4],w4=["any","unknown","nothing","never","error",...E4],$4={number:T2,non_finite_number:[],finite_number:["finite_complex","finite_real","finite_integer","finite_rational"],complex:["finite_complex","imaginary","finite_real","finite_rational","finite_integer","non_finite_number"],finite_complex:["imaginary","finite_real","finite_rational","finite_integer"],imaginary:[],real:["rational","integer","finite_real","finite_rational","finite_integer","non_finite_number"],finite_real:["finite_rational","finite_integer"],rational:["finite_rational","finite_integer","integer","non_finite_number"],finite_rational:["finite_integer"],integer:["finite_integer","non_finite_number"],finite_integer:[],any:w4,unknown:[],nothing:[],never:[],error:[],value:i4,scalar:z2,collection:d4,indexed_collection:w2,list:[],set:[],tuple:[],record:[],dictionary:[],function:[],symbol:[],boolean:[],string:[],expression:E4};function U4(s,o){return o==="any"||s==="never"?!0:s==="unknown"||o==="unknown"?!1:s===o?!0:$4[o].includes(s)}function X2(s,o){if(typeof s=="string"&&(s=R4(s)),typeof o=="string"&&(o=R4(o)),o==="any")return!0;if(o==="never")return!1;if(o==="error")return s==="error";if(o==="nothing")return s==="nothing";if(s==="nothing")return!1;if(o==="unknown")return!0;if(s==="unknown")return!1;if(typeof o=="string")return typeof s=="string"?U4(s,o):s.kind==="value"?typeof s.value=="boolean"?o==="boolean":typeof s.value=="number"?Number.isInteger(s.value)?U4("integer",o):U4("number",o):typeof s.value=="boolean"?U4("boolean",o):typeof s.value=="string"?U4("string",o):!1:s.kind==="union"?s.types.every(c=>X2(c,o)):s.kind==="intersection"?s.types.some(c=>X2(c,o)):s.kind==="negation"?!X2(s.type,o):s.kind==="numeric"?!!X2(s.type,o):o==="number"?f3(s):o==="symbol"?v3(s):o==="expression"?o3(s):o==="function"?U3(s):o==="scalar"?a3(s):o==="value"?Z3(s):o==="indexed_collection"?F3(s):o==="collection"?D4(s):o==="tuple"?s.kind==="tuple":o==="list"?s.kind==="list":o==="set"?s.kind==="set":o==="record"?s.kind==="record":o==="dictionary"?s.kind==="dictionary":!1;if(o.kind==="union")return typeof s!="string"&&s.kind==="union"?s.types.every(c=>o.types.some(m=>X2(c,m))):o.types.some(c=>X2(s,c));if(o.kind==="expression"){if(s==="symbol")return!0;if(typeof s=="string")return!1;if(s.kind==="expression")return o.operator==="Symbol"?v3(s):s.operator===o.operator;if(s.kind==="symbol")return!0}if(typeof s=="string")return!1;if(o.kind==="reference"){if(s.kind==="reference")return s.name===o.name;if(o.alias===!0&&o.def)return X2(s,o.def)}if(s.kind==="union")return s.types.some(c=>X2(c,o));if(s.kind==="intersection"&&o.kind==="intersection")return o.types.every(c=>s.types.some(m=>X2(m,c)));if(s.kind==="intersection")return s.types.every(c=>X2(c,o));if(o.kind==="intersection")return o.types.every(c=>X2(s,c));if(s.kind==="signature"&&o.kind==="signature"){if(!X2(s.result,o.result))return!1;if(s.optArgs||s.variadicArg){if(o.args){if(!s.args||s.args.length!==o.args.length)return!1;for(let c=0;c<o.args.length;c++)if(!X2(o.args[c].type,s.args[c].type))return!1}else if(s.args)return!1;if(o.optArgs){if(!s.optArgs||s.optArgs.length!==o.optArgs.length)return!1;for(let c=0;c<s.optArgs.length;c++)if(!X2(o.optArgs[c].type,s.optArgs[c].type))return!1}else if(s.optArgs)return!1;if(o.variadicArg){if(!s.variadicArg||s.variadicMin!=o.variadicMin||!X2(o.variadicArg.type,s.variadicArg.type))return!1}else if(s.variadicArg)return!1}else{if(o.args&&!s.args)return!1;let c=0;if(o.args){if(s.args.length<o.args.length)return!1;for(;c<o.args.length;){if(!X2(o.args[c].type,s.args[c].type))return!1;c+=1}}if(o.optArgs){if(c>=s.args.length)return!0;for(let m=0;m<o.optArgs.length;m++){if(!X2(o.optArgs[m].type,s.args[c].type))return!1;if(c+=1,c>=s.args.length)return!0}}if(o.variadicArg){if(c>=s.args.length&&o.variadicMin===0)return!0;if(o.variadicMin>0&&c+o.variadicMin>s.args.length)return!1;for(;c<s.args.length;){if(!X2(o.variadicArg.type,s.args[c].type))return!1;c+=1}}}return!0}if(s.kind==="record"&&o.kind==="record"){for(let c of Object.keys(o.elements))if(!(c in s.elements)||!X2(s.elements[c],o.elements[c]))return!1;return!0}if(s.kind==="dictionary"&&o.kind==="dictionary")return X2(s.values,o.values);if(o.kind==="indexed_collection")return s.kind==="indexed_collection"||s.kind==="list"?X2(s.elements,o.elements):s.kind==="tuple"?s.elements.every(c=>X2(c.type,o.elements)):!1;if(o.kind==="collection"){if(s.kind==="collection"||s.kind==="indexed_collection"||s.kind==="list")return X2(s.elements,o.elements);if(s.kind==="tuple")return s.elements.every(c=>X2(c.type,o.elements));if(s.kind==="set")return X2(s.elements,o.elements);if(s.kind==="dictionary")return X2(R4(`tuple<string, ${u3(s.values)}>`),o.elements);if(s.kind==="record")return X2(R4(`tuple<$string, ${u3(y3(...Object.values(s.elements)))}>`),o.elements)}if(s.kind==="tuple"&&o.kind==="tuple"){if(s.elements.length!==o.elements.length)return!1;for(let c=0;c<s.elements.length;c++){let m=s.elements[c],A=o.elements[c];if(!X2(m.type,A.type)||m.name!==A.name)return!1}return!0}if(o.kind==="list"&&s.kind==="list"){if(!X2(s.elements,o.elements))return!1;if(o.dimensions){if(!s.dimensions||s.dimensions.length!==o.dimensions.length)return!1;for(let c=0;c<s.dimensions.length;c++)if(o.dimensions[c]!==-1&&s.dimensions[c]!==o.dimensions[c])return!1}return!0}if(s.kind==="symbol"&&o.kind==="symbol")return s.name===o.name;if(s.kind==="numeric"&&o.kind==="numeric")return!(!X2(s.type,o.type)||(s.lower??-1/0)<(o.lower??-1/0)||(s.upper??1/0)>(o.upper??1/0));if(o.kind==="set"&&s.kind==="set")return!!X2(s.elements,o.elements);if(s.kind==="negation"&&o.kind==="negation")return X2(s.type,o.type);if(o.kind==="negation")return!X2(s,o.type);if(o.kind==="value"&&s.kind==="value")return o.value===s.value;if(s.kind==="value"){if(typeof s.value=="boolean")return X2("boolean",o);if(typeof s.value=="number")return Number.isInteger(s.value)?X2("integer",o):X2("real",o);if(typeof s.value=="string")return X2("string",o)}return!1}function f3(s){return typeof s=="string"?T2.includes(s):s.kind==="value"?typeof s.value=="number":s.kind==="numeric"}function a3(s){return f3(s)?!0:typeof s=="string"?z2.includes(s):s.kind==="value"?["string","boolean","number"].includes(typeof s.value):!1}function D4(s){return F3(s)?!0:typeof s=="string"?d4.includes(s):["collection","set","record","dictionary"].includes(s.kind)}function F3(s){return typeof s=="string"?!1:["indexed_collection","list","tuple"].includes(s.kind)}function Z3(s){return a3(s)||D4(s)}function U3(s){return s==="function"||typeof s!="string"&&s.kind==="signature"}function o3(s){return typeof s=="string"&&["expression","symbol","function"].includes(s)||Z3(s)||U3(s)||v3(s)?!0:typeof s=="string"?!1:s.kind==="expression"}function v3(s){return s==="symbol"?!0:typeof s=="string"?!1:s.kind==="symbol"?!0:s.kind==="expression"?s.operator==="Symbol":!1}var g3=3,k3=1,t6=2,l3=4,j4=5,g6=6,j3=7,i5=8,K6=9,n5=10,A6=11;function u3(s,o=0){if(typeof s=="string")return s;let c="";switch(s.kind){case"value":typeof s.value=="string"?c=`"${s.value}"`:typeof s.value=="boolean"?c=s.value?"true":"false":c=s.value.toString();break;case"reference":c=s.name;break;case"negation":c=`!${u3(s.type,g3)}`;break;case"union":c=s.types.map(qe=>u3(qe,k3)).join(" | ");break;case"intersection":c=s.types.map(qe=>u3(qe,t6)).join(" & ");break;case"expression":c=`expression<${d5(s.operator)}>`;break;case"symbol":c=`symbol<${d5(s.name)}>`;break;case"numeric":Number.isFinite(s.lower)&&Number.isFinite(s.upper)?c=`${s.type}<${s.lower}..${s.upper}>`:Number.isFinite(s.lower)?c=`${s.type}<${s.lower}..>`:Number.isFinite(s.upper)?c=`${s.type}<..${s.upper}>`:c=`${s.type}`;break;case"list":if(s.dimensions&&X2(s.elements,"number")){if(s.dimensions===void 0)s.elements==="number"&&(c="tensor");else if(s.dimensions.length===1)s.elements==="number"?s.dimensions[0]<0?c="vector":c=`vector<${s.dimensions[0]}>`:s.dimensions[0]<0?c=`vector<${u3(s.elements)}>`:c=`vector<${u3(s.elements)}^${s.dimensions[0]}>`;else if(s.dimensions.length===2){let qe=s.dimensions;s.elements==="number"?qe[0]<0&&qe[1]<0?c="matrix":c=`matrix<${qe[0]}x${qe[1]}>`:qe[0]<0&&qe[1]<0?c=`matrix<${u3(s.elements)}>`:c=`matrix<${u3(s.elements)}^(${qe[0]}x${qe[1]})>`}}if(!c){let qe=s.dimensions?s.dimensions.length===1?`^${s.dimensions[0].toString()}`:`^(${s.dimensions.join("x")})`:"";c=`list<${u3(s.elements)}${qe}>`}break;case"record":c=`record<${Object.entries(s.elements).map(([qe,So])=>`${qe}: ${u3(So)}`).join(", ")}>`;break;case"dictionary":c=`dictionary<${u3(s.values)}>`;break;case"set":c=`set<${u3(s.elements)}>`;break;case"collection":c=`collection<${u3(s.elements)}>`;break;case"indexed_collection":c=`indexed_collection<${u3(s.elements)}>`;break;case"tuple":if(s.elements.length===0)c="tuple";else if(s.elements.length===1){let[qe]=s.elements;c=`tuple<${r6(qe)}>`}else c="tuple<"+s.elements.map(qe=>r6(qe)).join(", ")+">";break;case"signature":let m=s.args?s.args.map(qe=>r6(qe)).join(", "):"",A=s.optArgs?s.optArgs.map(qe=>r6(qe)+"?").join(", "):"",ae=s.variadicArg?s.variadicMin===0?`${r6(s.variadicArg)}*`:`${r6(s.variadicArg)}+`:"";c=`(${[m,A,ae].filter(qe=>qe).join(", ")}) -> ${u3(s.result)}`;break;default:c="error"}return o>0&&o>Rv(s.kind)?`(${c})`:c}function r6(s){return s.name?`${s.name}: ${u3(s.type)}`:u3(s.type)}function d5(s){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(s)?s:`\`${s}\``}function Rv(s){switch(s){case"negation":return g3;case"union":return k3;case"intersection":return t6;case"list":return l3;case"record":return j4;case"dictionary":return g6;case"set":return j3;case"collection":case"indexed_collection":return i5;case"tuple":return K6;case"signature":return n5;case"value":return A6;default:return 0}}function w5(s,o){if(s===o)return 0;if(s.length===0)return o.length;if(o.length===0)return s.length;let c=Array.from({length:s.length+1},(A,ae)=>ae),m=new Array(s.length+1);for(let A=1;A<=o.length;A++){m[0]=A;for(let ae=1;ae<=s.length;ae++){let qe=s[ae-1]===o[A-1]?0:1;m[ae]=Math.min(c[ae]+1,m[ae-1]+1,c[ae-1]+qe)}[c,m]=[m,c]}return c[s.length]}function S5(s,o){let c=null,m=1/0,A=s.length;for(let ae of o){if(Math.abs(A-ae.length)>7)continue;let qe=w5(s,ae);if(qe===0)return ae;qe<=7&&qe<m&&(m=qe,c=ae)}return c}var W6=class{buffer;pos;_valueParser;_typeResolver;constructor(s,o){this.buffer=s,this.pos=0,this._valueParser=o?.valueParser??(()=>null),this._typeResolver=o?.typeResolver??{forward:()=>{},resolve:()=>{},get names(){return[]}}}error(...s){throw new Error(`
Invalid type
|   ${this.buffer}
|   ${" ".repeat(this.pos)}^
|   
|   ${s.filter(o=>o!==void 0).join(`
|   `)}
`)}peek(){return this.buffer[this.pos]}consume(){return this.buffer[this.pos++]}match(s){if(s.length===1&&this.buffer[this.pos]===s)return this.pos++,!0;let o=this.pos;return this.buffer.slice(o,o+s.length)===s?(this.pos+=s.length,!0):!1}expectClosingBracket(){this.skipWhitespace(),this.match(">")||this.error('Expected ">".')}skipWhitespace(){for(;this.pos<this.buffer.length&&/\s/.test(this.buffer[this.pos]);)this.pos++}isEOF(){return this.pos>=this.buffer.length}parseValue(){let s=this.pos;this.skipWhitespace();let o=this._valueParser(this);return o!==null?{kind:"value",value:o}:(this.pos=s,null)}parseTypeReference(){let s=this.pos;this.skipWhitespace();let o=this.match("type");this.skipWhitespace();let c=this.parseIdentifier();if(c!==null){let m=this._typeResolver.resolve(c);if(m)return m;if(o){let A=this._typeResolver.forward(c);if(A)return A}}return this.pos=s,null}parsePrimitiveType(){this.skipWhitespace(),this.isEOF()&&this.error("Unexpected end of input");for(let s of w4)if(this.match(s))return s;return null}parseArguments(){let s=[],o=[],c,m,A=this.pos;for(;;){let qe=this.parseNamedElement();if(qe===null){if(this.skipWhitespace(),this.peek()===")")break;this.pos=A,this.skipWhitespace(),this.match(",")&&this.error('Expected a valid argument after ","');break}if(this.match("?")?(c!==void 0&&this.error("Optional arguments cannot be used with variadic arguments"),o.push(qe)):this.match("*")?(o.length>0&&this.error("Variadic arguments cannot be used with optional arguments"),c!==void 0&&this.error("There can be only one variadic argument"),c=0,m=qe):this.match("+")?(o.length>0&&this.error("Variadic arguments cannot be used with optional arguments"),c!==void 0&&this.error("There can be only one variadic argument"),c=1,m=qe):(o.length>0&&this.error("Optional arguments must come after required arguments"),c!==void 0&&this.error("Variadic arguments must come last"),s.push(qe)),this.skipWhitespace(),A=this.pos,!this.match(","))break}let ae=x6([...s,...o,...m?[m]:[]]);return ae&&this.error(`Duplicate argument name "${ae}"`),[s,o,m,c]}parseFunctionSignature(){let s=[],o=[],c,m;this.skipWhitespace();let A=this.pos;if(this.match("()")||this.match("(")&&([s,o,c,m]=this.parseArguments(),this.skipWhitespace(),this.match(")")||this.error("Expected a closing parenthesis `)` after arguments.")),this.skipWhitespace(),!this.match("->"))return this.pos=A,null;this.skipWhitespace(),this.isEOF()&&this.error("Expected a return type after `->`.","Use `any` for any type or `nothing` for no return value, or `never` for a function that never returns");let ae=this.parseType();return ae===null&&this.error("Expected a return type after `->`.","Use `any` for any type or `nothing` for no return value, or `never` for a function that never returns",this.parseUnexpectedToken()),s.length===0&&(s=void 0),o.length===0&&(o=void 0),!o&&!c?{kind:"signature",args:s,result:ae}:!o&&c?{kind:"signature",args:s,variadicArg:c,variadicMin:m,result:ae}:{kind:"signature",args:s,optArgs:o,variadicArg:c,variadicMin:m,result:ae}}parsePositiveIntegerLiteral(){let s=0;for(this.skipWhitespace();/[0-9]/.test(this.peek());)s=s*10+parseInt(this.consume());return s===0?null:s}parseOptionalDimension(){let s=this.parsePositiveIntegerLiteral();return s===null&&this.match("?")&&(s=-1),s}parseDimensions(){let s=this.pos,o=this.match("("),c=[],m=this.parseOptionalDimension();if(m===null){this.pos=s;return}do{if(c.push(m),this.skipWhitespace(),!this.match("x"))break;this.skipWhitespace(),m=this.parseOptionalDimension(),m===null&&this.error("Expected a positive integer literal or `?`.","For example : `matrix<integer^2x3>` or `matrix<integer^?x?>`")}while(!0);return this.skipWhitespace(),o&&!this.match(")")&&this.error('Expected ")".',"For example `matrix<integer^(2x3)>`"),c}parseList(){if(this.skipWhitespace(),this.match("list<")){let c=this.parseDimensions();if(c!==void 0)return this.expectClosingBracket(),{kind:"list",elements:"any",dimensions:c};let m=this.parseTypeMaybe();return m&&this.match("^")&&(c=this.parseDimensions(),c===void 0&&this.error("Expected dimensions after `^`.","For example `list<number^2x3>`")),m||this.error("Expected a type after `list<`.","Use `list<any>` for a list of any type","For example `list<number>` or `list<string>`"),this.expectClosingBracket(),{kind:"list",elements:m??"any",dimensions:c}}if(this.match("list(")&&this.error("Use `list<type>` instead of `list(type)`.","For example `list<number>`"),this.match("vector<")){let c=this.parseType(),m;if(c&&this.match("^")){let A=this.parsePositiveIntegerLiteral();A===null&&this.error("Expected a positive integer literal.","For example `vector<3>`","Use `vector` for a vector of unknown size"),m=[A]}else c||(c="number",m=this.parseDimensions());return this.expectClosingBracket(),{kind:"list",elements:c,dimensions:m}}if(this.match("vector(")&&this.error("Use `vector<...>` instead of `vector(...)`.","For example `vector<3>` or `vector<integer^3>`"),this.match("vector"))return{kind:"list",elements:"number"};if(this.match("matrix<")){let c=this.parseType(),m;return c&&this.match("^")?(m=this.parseDimensions(),m===void 0&&this.error("Expected dimensions","For example `matrix<number^2x3>`","Use `matrix` for a matrix of unknown size")):c||(c="number",m=this.parseDimensions()),this.expectClosingBracket(),{kind:"list",elements:c,dimensions:m}}if(this.match("matrix(")&&this.error("Use `matrix<...>` instead of `matrix(...)`.","For example `matrix<3x2>` or `matrix<integer^3x2>`"),this.match("matrix"))return{kind:"list",elements:"number",dimensions:[-1,-1]};if(this.match("tensor<")){let c=this.parseType()??"number";return this.expectClosingBracket(),{kind:"list",elements:c,dimensions:void 0}}if(this.match("tensor"))return{kind:"list",elements:"number",dimensions:void 0};if(!this.match("list<"))return null;let s=this.parseTypeMaybe();s===null&&this.error('Expected a type. Use "[any]" for a collection of any type');let o=this.match("^")?this.parseDimensions():void 0;return this.expectClosingBracket(),{kind:"list",elements:s,dimensions:o}}parseName(){let s=this.pos;if(this.skipWhitespace(),this.isEOF())return null;let o=this.parseVerbatimString();if(o===null){if(!/[a-zA-Z_]/.test(this.peek()))return null;for(o="";!this.isEOF()&&/[a-zA-Z0-9_]/.test(this.peek());)o+=this.consume()}if(this.skipWhitespace(),!this.match(":")){if(this.match("?:")){let c=this.parseTypeMaybe();this.error("Optional qualifier must come after the type",`Use "${o}: ${c?u3(c):"number"}?"`)}return this.pos=s,null}return o}parseVerbatimString(){if(this.skipWhitespace(),this.isEOF())return null;let s="";if(this.match("`")){for(;!this.match("`");)this.isEOF()&&this.error("Expected closing backtick"),this.match("\\`")?s+="`":this.match("\\\\")?s+="\\":s+=this.consume();return s}return null}parseIdentifier(){let s=this.parseVerbatimString();if(s!==null)return s;if(/[0-9_]/.test(this.peek()))return null;for(s="";!this.isEOF()&&/[a-zA-Z0-9_]/.test(this.peek());)s+=this.consume();return s.length===0?null:s}parseNamedElement(){let s=this.pos,o=this.parseName();if(o!==null){let m=this.parseType();return m===null&&this.error(`Expected a valid type after "${o}:"`,this.parseUnexpectedToken()),this.skipWhitespace(),{name:o,type:m}}let c=this.parseType();return c===null?(this.pos=s,null):{type:c}}parseTupleElements(){let s=[],o=this.pos,c=this.parseNamedElement();if(c===null)return[];let m=c.name!==void 0;for(;s.push(c),this.skipWhitespace(),!!this.match(",");)o=this.pos,c=this.parseNamedElement(),c===null&&(this.pos=o,this.error("Expected a type or unexpected comma")),m&&!c.name&&(this.pos=o,this.error("All tuple elements should be named, or none.","Previous elements were named, but this one isn't.")),!m&&c.name&&(this.pos=o,this.error("All tuple elements should be named, or none.","Previous elements were not named, but this one is."));return s}parseTuple(){if(this.skipWhitespace(),!this.match("tuple<"))return this.match("tuple(")&&this.error("Use `tuple<type>` instead of `tuple(type)`.","For example `tuple<number, boolean>` or `tuple<x: integer, y: integer>`"),null;let s=this.parseTupleElements();return this.expectClosingBracket(),{kind:"tuple",elements:s}}parseGroup(){let s=this.pos;if(this.skipWhitespace(),!this.match("("))return null;let o=this.parseType();return o===null?(this.pos=s,null):(this.skipWhitespace(),this.match(")")&&(this.skipWhitespace(),!this.match("->"))?o:(this.pos=s,null))}parseSet(){if(this.skipWhitespace(),!this.match("set<")){if(this.match("set(")){let o=this.parseTypeMaybe()??"number";this.error(`Use \`set<${o}>\` instead of \`set(${o})\`.`)}return this.match("set")?"set":null}let s=this.parseTypeMaybe();return s===null&&this.error("Expected a type.","Use `set<number>` for a set of numbers"),this.expectClosingBracket(),{kind:"set",elements:s}}parseRecordKeyValue(){let s=[];for(;;){let o=this.parseIdentifier();o===null&&this.error("Expected a name for the key.","For example `record<key: string>`.","Use backticks for special characters.","For example `record<`duracin`: number>`"),this.skipWhitespace(),this.match(":")||this.error("Expected a type separated by a `:` after the key.",`For example \`record<${p5(o)}: string>\``,"Use backticks for special characters.","For example `record<`duracin`: string>`");let c=this.parseTypeMaybe();if(c===null&&this.error("Expected a type for the value. Use `any` for any type.",`For example \`record<${p5(o)}: any>.\``),s.push([o,c]),this.skipWhitespace(),!this.match(","))break}if(new Set(s.map(([o])=>o)).size!==s.length){let o=s.find(([c],m)=>s.slice(m+1).some(([A])=>A===c))?.[0];this.error(`Duplicate record key "${o}"`,"Keys in a record must be unique.")}return s}parseRecord(){if(this.skipWhitespace(),this.match("record<")){let s=this.parseRecordKeyValue();if(this.skipWhitespace(),!this.match(">")){let o=s[s.length-1]??["key","number"];this.match("?")&&this.error('Unexpected token "?".',`To indicate an optional key, use a specific type, for example \`record<${p5(o[0])}: ${o[1]} | nothing>\``),this.error("Expected a closing `>`.",`For example \`record<${p5(o[0])}: ${o[1]}>\``)}return{kind:"record",elements:Object.fromEntries(s)}}return this.match("record")?"record":null}parseDictionary(){if(this.match("dictionary<")){this.skipWhitespace();let s=this.parseType();return s===null&&this.error("Expected a type."),this.skipWhitespace(),this.match(",")&&this.error("Dictionary types cannot have keys, only values.","For example `dictionary<string>`"),this.expectClosingBracket(),{kind:"dictionary",values:s}}return this.match("dictionary")?"dictionary":null}parseCollection(){if(this.skipWhitespace(),this.match("indexed_collection<")){let o=this.parseType();return o===null&&this.error("Expected a type.","Use `indexed_collection<number>` for an indexed collection of numbers"),this.expectClosingBracket(),{kind:"indexed_collection",elements:o}}if(this.match("indexed_collection"))return"indexed_collection";if(!this.match("collection<"))return this.match("collection(")&&this.error("Use `collection<type>` instead of `collection(type)`.","For example `collection<number>`"),this.match("collection")?"collection":null;let s=this.parseType();return s===null&&this.error("Expected a type.","Use `collection<number>` for a collection of numbers"),this.expectClosingBracket(),{kind:"collection",elements:s}}parseExpression(){if(!this.match("expression<"))return null;let s=this.parseIdentifier();return s===null&&this.error("Expected the name of the operator for the expression.","For example `expression<Multiply>`.","Use backticks for special characters.","For example `expression<``>`"),this.expectClosingBracket(),{kind:"expression",operator:s}}parseSymbol(){if(!this.match("symbol<"))return null;let s=this.parseIdentifier();return s===null&&this.error("Expected a name for the symbol.","For example `symbol<True>`.","Use backticks for special characters.","For example `symbol<``>`"),this.expectClosingBracket(),{kind:"symbol",name:s}}parseNumericType(){let s=c=>{if(c.skipWhitespace(),c.match(".."))return-1/0;let m=a5(c);if(typeof m!="number"&&c.error("Expected a number"),c.skipWhitespace(),c.match(".."))return m;c.error('Expected ".." after lower bound',"For example `integer<-oo..10>` or `integer<0..10>`")},o=c=>{if(c.skipWhitespace(),c.match(">"))return;let m=a5(c);return typeof m!="number"&&c.error("Expected a number"),c.expectClosingBracket(),m};for(let c of["real","finite_real","rational","finite_rational","integer","finite_integer"]){if(!this.match(c+"<"))continue;let m=s(this)??-1/0,A=o(this)??1/0;return(Number.isNaN(m)||Number.isNaN(A))&&this.error("Invalid numeric type","Lower and upper bounds must be valid numbers"),m===-1/0&&A===1/0?c:(m>A&&this.error(`Invalid range: ${m}..${A}`,"The lower bound must be less than the upper bound"),{kind:"numeric",type:c,lower:m,upper:A})}return null}parseStringType(){return this.match("string")?"string":null}parsePrimary(){let s=this.parseMaybePrimary();if(s===null){let o=this.pos;this.parseNamedElement()!==null&&(this.match("?"),this.match("*"),this.match("+"),this.skipWhitespace(),(this.match("->")||this.match(","))&&this.error("Function arguments must be enclosed in parentheses","For example `(x: number) -> number`"),this.match(")")&&this.error("An opening parenthesis seems to be missing")),this.pos=o,a5(this)!==null&&this.error("Unexpected value"),this.pos=o,this.error('Unexpected token"',this.parseUnexpectedToken())}return s}parseUnexpectedToken(){let s=this.pos,o,c="";for(;!this.isEOF()&&/[a-zA-Z0-9_]/.test(this.peek());)c+=this.consume();if(!c)return;let m=null;return c==="map"&&(m="dictionary"),m??=S5(c,[...this._typeResolver.names,...w4,"vector","matrix"]),m&&(o=`Did you mean "${m}"?`),this.pos=s,o}parseMaybePrimary(){return this.parseGroup()??this.parseNegationType()??this.parseCollection()??this.parseList()??this.parseSet()??this.parseDictionary()??this.parseRecord()??this.parseTuple()??this.parseExpression()??this.parseSymbol()??this.parseNumericType()??this.parseStringType()??this.parsePrimitiveType()??this.parseValue()??this.parseTypeReference()}parseNegationType(){return this.match("!")?{kind:"negation",type:this.parsePrimary()}:null}parseIntersectionType(){let s=this.parseFunctionSignature()??this.parseMaybePrimary();if(s===null)return null;let o=[s];for(this.skipWhitespace();this.match("&");)this.skipWhitespace(),o.push(this.parsePrimary());return o.length===1?o[0]:{kind:"intersection",types:o}}parseUnionType(){let s=this.parseIntersectionType();if(s===null)return null;let o=[s];for(this.skipWhitespace();this.match("|");)s=this.parseIntersectionType(),s===null&&this.error("Expected type"),o.push(s);return o.length===1?o[0]:{kind:"union",types:o}}parseType(){if(this.skipWhitespace(),this.isEOF())return null;if(this.peek()==="("){let s=this.parseFunctionSignature();if(s)return s}return this.parseUnionType()}parseTypeMaybe(){try{return this.parseType()}catch{}return null}parse(){let s=this.parseType();return s===null&&(this.parseIdentifier()!==null&&(this.skipWhitespace(),this.match(":")&&this.error("Function signatures must be enclosed in parentheses","For example `(x: number) -> number`")),this.error("Syntax error. The type was not recognized.")),this.skipWhitespace(),(this.match("->")||this.match("?")||this.match("*")||this.match("+"))&&this.error("Function signatures must be enclosed in parentheses","For example `(x: number) -> number`"),this.isEOF()||this.error("Unexpected character. Could be some mismatched parentheses."),s}};function a5(s){let o=s.pos;if(s.skipWhitespace(),/["]/.test(s.peek())){let c=s.consume(),m="";for(;s.peek()!==c;)s.isEOF()&&s.error("Expected closing quote"),s.match("\\"+c)?m+=c:m+=s.consume();return s.consume(),m}if(s.match("0x")){let c=0;for(;/[0-9a-fA-F]/.test(s.peek());)c=c*16+parseInt(s.consume(),16);return c}if(s.match("0b")){let c=0;for(;/[01]/.test(s.peek());)c=c*2+parseInt(s.consume());return c}if(/[-0-9\.]/.test(s.peek())){let c=0,m=1;if(s.match("-")&&(m=-1),s.match("+")&&(m=1),!/[0-9]/.test(s.peek()))return s.pos=o,null;for(;/[0-9]/.test(s.peek());)c=c*10+parseInt(s.consume());if(s.peek()==="."){let A=s.pos;if(s.consume(),!/[0-9]/.test(s.peek()))return s.pos=A,m*c;let ae=0,qe=1;for(;/[0-9]/.test(s.peek());)ae=ae*10+parseInt(s.consume()),qe*=10;c+=ae/qe}if(s.match("e")||s.match("E")){let A=0,ae=1;for(s.match("+")&&(ae=1),s.match("-")&&(ae=-1);/[0-9]/.test(s.peek());)A=A*10+parseInt(s.consume());c*=Math.pow(10,ae*A)}return m*c}return s.match("true")?!0:s.match("false")?!1:s.match("nan")?NaN:s.match("infinity")||s.match("+infinity")||s.match("oo")||s.match("")||s.match("+oo")||s.match("+")?1/0:s.match("-infinity")||s.match("-oo")||s.match("-")?-1/0:s.match("nan")?NaN:(s.pos=o,null)}function R4(s,o){return s===void 0?void 0:ev(s)?s:typeof s!="string"?void 0:new W6(s,{valueParser:a5,typeResolver:o}).parse()}function x6(s){let o=new Set;for(let{name:c}of s)if(c){if(o.has(c))return c;o.add(c)}return""}function p5(s){return/[^a-zA-Z0-9_]/.test(s)?"`"+s.replace(/`/g,"\\`")+"`":s}function i6(s,o){return s===o?s:s==="nothing"||o==="nothing"?"nothing":s==="any"?o:o==="any"?s:s==="never"?o:o==="never"?s:s==="unknown"?o:o==="unknown"||X2(s,o)?s:X2(o,s)?o:qy(s,o)}function R3(s,o){return s===o?s:s==="any"||o==="any"?"any":s==="never"?o:o==="never"?s:s==="unknown"?o:o==="unknown"?s:s==="nothing"?o:o==="nothing"?s:X2(s,o)?o:X2(o,s)?s:qy(s,o)}function m5(...s){return s.length===0?"nothing":s.length===1?s[0]:s.reduce((o,c)=>i6(o,c))}function y3(...s){return s.length===0?"nothing":s.length===1?s[0]:s.reduce((o,c)=>R3(o,c))}function O5(s){return s=typeof s=="string"?R4(s):s,typeof s!="string"&&s.kind==="signature"}function H3(s){if(s){if(s==="function")return"any";if(typeof s!="string"&&s.kind==="signature")return s.result}}function l6(s){if(s==="collection"||s==="indexed_collection"||s==="list"||s==="set"||s==="tuple"||s==="dictionary"||s==="record")return"any";if(typeof s!="string"){if(s.kind==="collection"||s.kind==="indexed_collection"||s.kind==="list"||s.kind==="set")return s.elements;if(s.kind==="tuple")return y3(...s.elements.map(o=>o.type));if(s.kind==="dictionary")return R4(`tuple<string, ${s.values}>`);if(s.kind==="record")return R4(`tuple<string, ${u3(y3(...Object.values(s.elements)))}>`)}}function j5(s){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(s)}function ev(s){return typeof s=="string"?w4.includes(s):typeof s!="object"||!("kind"in s)?!1:s.kind==="signature"||s.kind==="union"||s.kind==="intersection"||s.kind==="negation"||s.kind==="tuple"||s.kind==="list"||s.kind==="record"||s.kind==="dictionary"||s.kind==="set"||s.kind==="function"||s.kind==="collection"||s.kind==="indexed_collection"||s.kind==="reference"}function qy(s,o){return s===o?s:s==="any"||o==="any"?"any":s==="never"?o:o==="never"?s:s==="unknown"?o:o==="unknown"?s:s==="nothing"?o:o==="nothing"?s:O3(s,o,"non_finite_number")?"non_finite_number":O3(s,o,"finite_integer")?"finite_integer":O3(s,o,"integer")?"integer":O3(s,o,"finite_rational")?"finite_rational":O3(s,o,"rational")?"rational":O3(s,o,"finite_real")?"finite_real":O3(s,o,"real")?"real":O3(s,o,"imaginary")?"imaginary":O3(s,o,"finite_complex")?"finite_complex":O3(s,o,"complex")?"complex":O3(s,o,"finite_number")?"finite_number":O3(s,o,"number")?"number":O3(s,o,"list")?"list":O3(s,o,"record")?"record":O3(s,o,"dictionary")?"dictionary":O3(s,o,"set")?"set":O3(s,o,"tuple")?"tuple":O3(s,o,"indexed_collection")?"indexed_collection":O3(s,o,"collection")?"collection":O3(s,o,"scalar")?"scalar":O3(s,o,"value")?"value":O3(s,o,"function")?"function":O3(s,o,"expression")?"expression":"any"}function O3(s,o,c){return!!(X2(s,c)&&X2(o,c))}var I4=class r5{static unknown=new r5("unknown");static number=new r5("number");static non_finite_number=new r5("non_finite_number");static finite_number=new r5("finite_number");static finite_integer=new r5("finite_integer");static finite_real=new r5("finite_real");static string=new r5("string");static dictionary=new r5("dictionary");static setNumber=new r5("set<number>");static setComplex=new r5("set<complex>");static setImaginary=new r5("set<imaginary>");static setReal=new r5("set<real>");static setRational=new r5("set<rational>");static setFiniteInteger=new r5("set<finite_integer>");static setInteger=new r5("set<integer>");type;static widen(...o){return new r5(y3(...o.map(c=>c instanceof r5?c.type:c)))}static narrow(...o){return new r5(m5(...o.map(c=>c instanceof r5?c.type:c)))}constructor(o,c){typeof o=="string"?this.type=R4(o,c):this.type=o}matches(o){return o instanceof r5?X2(this.type,o.type):X2(this.type,o)}is(o){return X2(this.type,o)&&X2(o,this.type)}get isUnknown(){return this.type==="unknown"}toString(){return u3(this.type)}toJSON(){return u3(this.type)}[Symbol.toPrimitive](o){return o==="string"?this.toString():null}valueOf(){return u3(this.type)}};function G7(s){let o=[],c=(m,A=[])=>{if(m.length===0)o.push(A);else for(let ae=0;ae<m.length;ae++){let qe=m.slice(),So=qe.splice(ae,1);c(qe.slice(),A.concat(So))}};return c(s),o}function K7(s){for(let o in s)o.startsWith("_")&&s.hasOwnProperty(o)&&Object.defineProperty(s,o,{enumerable:!1,configurable:!0,writable:!0,value:s[o]})}var W7=class{_listeners=new Array(300);_pending=!1;_version=0;listen(s){for(let c of this._listeners)if(c.deref()===s)return()=>this._unsubscribe(s);let o=new WeakRef(s);return this._listeners.push(o),()=>this._unsubscribe(s)}_unsubscribe(s){this._listeners=this._listeners.filter(o=>{let c=o.deref();return c!==void 0&&c!==s})}notify(){if(this._pending)return;this._pending=!0;let s=this._version+1;queueMicrotask(()=>{if(s!==this._version+1){this._pending=!1;return}this.notifyNow()})}notifyNow(){this._version++,this._listeners=this._listeners.filter(s=>{let o=s.deref();try{o?.onConfigurationChange?.()}catch(c){console.error("Listener error:",c)}return o!==void 0}),this._pending=!1}};function sy(s,o,c={}){let{contract:m=.125,step:A=1,power:ae=2,atol:qe=1e-16,rtol:So=qe>0?0:Math.sqrt(Number.EPSILON),maxeval:Hc=1e6,breaktol:mf=2}=c;if(!isFinite(o))return sy(m4=>s(1/m4),1/o,{rtol:So,atol:qe,maxeval:Hc,contract:Math.abs(m)>1?1/m:m,step:1/A,power:ae});let p1=A,M1=Math.pow(1/m,ae),R1=s(o+p1),G1=[R1],c4=1/0,t4=1;for(;t4<Hc;){t4+=1,p1*=m,G1.push(s(o+p1));let m4=M1,N4=1/0;for(let e3=G1.length-2;e3>=0;e3--){let G4=G1[e3];G1[e3]=G1[e3+1]+(G1[e3+1]-G1[e3])/(m4-1);let $3=Math.abs(G1[e3]-G4);N4=Math.min(N4,$3),$3<c4&&(R1=G1[e3],c4=$3),m4*=M1}if(N4>mf*c4||!isFinite(N4)||c4<=Math.max(So*Math.abs(R1),qe))break}return[R1,c4]}function D3(s){if(typeof s=="bigint")return s;if(typeof s=="number")return Number.isInteger(s)?s>=Number.MAX_SAFE_INTEGER&&s<=Number.MAX_SAFE_INTEGER?BigInt(s):D3(s.toString()):null;if(s instanceof e4)return s.isInteger()?D3(s.toString()):null;let o=s.toLowerCase(),c=o.match(/([+-]?[0-9]*)(?:\.([0-9]+))?e([+-]?[0-9]+)$/);if(c){let m=parseInt(c[3])-(c[2]?c[2].length:0);if(m<0)return null;o=(c[1]??"")+(c[2]??"")+"0".repeat(m)}if(o.indexOf(".")>=0||!/^[+-]?[0-9]+$/.test(o))return null;try{return BigInt(o)}catch(m){return console.error(m.message),null}}var X7=0x3ffffffffffe5,$y=new Set([2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919]),tv=7919;function Os(s){if(s<=3)return{[s]:1};let o={},c=0;for(;s%2===0;)c+=1,s/=2;for(c>0&&(o[2]=c),c=0;s%3===0;)c+=1,s/=3;c>0&&(o[3]=c);let m=!1;for(;!m;){if(s===1)return o;let A=Math.sqrt(s);m=!0;for(let ae=6;ae<=A+6;ae+=6){if(s%(ae-1)===0){o[ae-1]=(o[ae-1]??0)+1,s/=ae-1,m=!1;break}if(s%(ae+1)===0){o[ae+1]=(o[ae+1]??0)+1,s/=ae+1,m=!1;break}}}return o[s]!==void 0?o[s]+=1:o[s]=1,o}function t1(s){if(!Number.isInteger(s)||!Number.isFinite(s)||Number.isNaN(s)||s<=1)return!1;if(s<=tv)return $y.has(s);for(let o of $y)if(s%o===0)return!1;return f2(s,30)?void 0:!1}function c1(s){if(s<=1)return!1;if(s<=tv)return t1(Number(s));for(let o of $y)if(s%BigInt(o)===BigInt(0))return!1;return s<X7&&(s=k1(s)),L2(s,30)?void 0:!1}function k1(s){if(s===BigInt(1))return BigInt(1);if(s%BigInt(2)===BigInt(0))return BigInt(2);if(s%BigInt(3)===BigInt(0))return BigInt(3);if(s%BigInt(5)===BigInt(0))return BigInt(5);let o=BigInt(Math.floor(Math.sqrt(Number(s)))),c=BigInt(7);for(;c<=o;){if(s%c===BigInt(0))return c;if(s%(c+BigInt(4))===BigInt(0))return c+BigInt(4);if(s%(c+BigInt(6))===BigInt(0))return c+BigInt(6);if(s%(c+BigInt(10))===BigInt(0))return c+BigInt(10);if(s%(c+BigInt(12))===BigInt(0))return c+BigInt(12);if(s%(c+BigInt(16))===BigInt(0))return c+BigInt(16);if(s%(c+BigInt(22))===BigInt(0))return c+BigInt(22);if(s%(c+BigInt(24))===BigInt(0))return c+BigInt(24);c+=BigInt(30)}return s}function f2(s,o){let c=0,m=s-1;for(;m%2===0;)m/=2,++c;e:do{let A=Math.pow(2+Math.floor(Math.random()*(s-3)),m)%s;if(!(A===1||A===s-1)){for(let ae=c-1;ae--;){if(A=A*A%s,A===1)return!1;if(A===s-1)continue e}return!1}}while(--o);return!0}function L2(s,o){let c=0,m=s-BigInt(1);for(;m%BigInt(2)===BigInt(0);)m=m/BigInt(2),++c;e:do{let A=BigInt(2+Math.floor(Math.random()*(Number(s)-3)))**m%s;if(!(A===BigInt(1)||A===s-BigInt(1))){for(let ae=c-1;ae--;){if(A=A*A%s,A===BigInt(1))return!1;if(A===s-BigInt(1))continue e}return!1}}while(--o);return!0}BigInt(4),BigInt(2),BigInt(4),BigInt(2),BigInt(4),BigInt(6),BigInt(2),BigInt(6);var g4=21,C3=53,n6=Math.floor(Math.log10(Math.pow(2,C3))),E3=1e-10,Q4=1e6,P6=1024,s5=1e6;function An(s,o){if(s>=Number.MAX_SAFE_INTEGER)return[1,s];if(s===0)return[0,0];if(s===1)return[1,1];if(o===2){let ae=[[0,0],[1,1],[1,2],[1,3],[2,1],[1,5],[1,6],[1,7],[1,8],[3,1],[1,10],[1,11],[2,3],[1,13],[1,14],[1,15],[4,1],[1,17],[3,2],[1,19],[1,20]][s];if(ae)return ae}let c=Os(s),m=1,A=1;for(let ae of Object.keys(c)){let qe=parseInt(ae);m=m*Math.pow(qe,Math.floor(c[ae]/o)),A=A*Math.pow(qe,c[ae]%o)}return[m,A]}function eh(s,o){if(s===0)return o;if(o===0||s===o)return s;if(!Number.isInteger(s)||!Number.isInteger(o))return NaN;for(;o!==0;)[s,o]=[o,s%o];return s<0?-s:s}function m1(s,o){return s*o/eh(s,o)}function T1(s){if(!Number.isInteger(s)||s<0)return NaN;if(s>=170)return 1/0;let o=1;for(let c=2;c<=s;c++)o=o*c;return o}function U1(s){if(!Number.isInteger(s)||s<0)return NaN;if(s<0)return NaN;if(s<=1)return 1;let o=s;for(;s>2;)s-=2,o*=s;return o}function r2(s,o=E3){return typeof s=="number"&&Math.abs(s)<=o?0:s}function p2(s,o,c=.1){return(s(o-4*c)/280-4*s(o-3*c)/105+s(o-2*c)/5-4*s(o-c)/5+4*s(o+c)/5-s(o+2*c)/5+4*s(o+3*c)/105-s(o+4*c)/280)/c}function C2(s,o,c=1){if(c===0){let ae=C2(s,o,-1),qe=C2(s,o,1);return ae===void 0||qe===void 0?NaN:Math.abs(ae-qe)>1e-5?NaN:(ae+qe)/2}let[m,A]=sy(s,o,{step:c>0?1:-1});return m}function*Y2(){yield[0,1];for(let s=1;;s++)for(let o=0;o<=s;o++){let c=s-o;c!==0&&eh(o,c)===1&&(yield[o,c],yield[-o,c])}}function*J2(){yield[0,1];for(let s=1;;s++)for(let o=0;o<=s;o++){let c=s-o;c!==0&&eh(o,c)===1&&(yield[o,c])}}function*S4(){yield[0,0];for(let s=1;;s++)for(let o=0;o<=s;o++){let c=s-o;if(c===0||eh(o,c)!==1)continue;let m=o/c;for(let A=0;A<=s;A++){let ae=s-A;if(ae===0||eh(A,ae)!==1)continue;let qe=A/ae;yield[m,qe],yield[-m,qe],yield[m,-qe],yield[-m,-qe]}}}function*D2(){yield 0;for(let s=1;;s++)yield s,yield-s}var F4=["Error","'missing'"];function M4(s){return!!(typeof s=="number"||V4(s)||typeof s=="string"&&Z6(s))}function V4(s){return s!==null&&typeof s=="object"&&"num"in s}function W4(s){return s!==null&&typeof s=="object"&&"sym"in s}function X4(s){return s!==null&&typeof s=="object"&&"str"in s}function p3(s){return s!==null&&typeof s=="object"&&"dict"in s&&typeof s.dict=="object"&&!Array.isArray(s.dict)&&s.dict!==null}function h4(s){return s!==null&&typeof s=="object"&&"fn"in s&&Array.isArray(s.fn)&&s.fn.length>0&&typeof s.fn[0]=="string"}function x4(s){return s==null?null:typeof s=="object"&&"str"in s?s.str:typeof s!="string"?null:s.length>=2&&s.at(0)==="'"&&s.at(-1)==="'"?s.substring(1,s.length-1):Z6(s)||g5(s)?null:s}function x3(s){if(s==null||x4(s)!==null)return null;let o=I2(s);return o?[o,...s4(s).map(c=>x3(c)).filter(c=>c!==null)]:s}function I2(s){return Array.isArray(s)?s[0]:s==null?"":h4(s)?s.fn[0]:""}function s4(s){return Array.isArray(s)?s.slice(1):s!==void 0&&h4(s)?s.fn.slice(1):[]}function j1(s,o){return Array.isArray(s)?s[o]??null:s===null||!h4(s)?null:s.fn[o]??null}function L4(s){return s==null?0:Array.isArray(s)?Math.max(0,s.length-1):h4(s)?Math.max(0,s.fn.length-1):0}function L3(s){return s==null?null:I2(s)==="Hold"?j1(s,1):s}function _4(s){return typeof s=="string"&&g5(s)?s.length>=2&&s.at(0)==="`"&&s.at(-1)==="`"?s.slice(1,-1):s:s==null?null:W4(s)?s.sym:null}function p6(s){let o=I2(s);if(o==="KeyValuePair"||o==="Tuple"||o==="Pair"){let[c,m]=s4(s),A=x4(c);return A?[A,m??"Nothing"]:null}return null}function u6(s){if(s===null)return null;if(p3(s))return s;let o=p6(s);if(o)return{[o[0]]:o[1]};if(I2(s)==="Dictionary"){let c={},m=s4(s);for(let A=1;A<L4(s);A++){let ae=p6(m[A]);ae&&(c[ae[0]]=ae[1])}return c}return null}function G3(s){return{dict:s}}function c6(s){if(s=s.toLowerCase().replace(/[nd]$/,"").replace(/[\u0009-\u000d\u0020\u00a0]/g,""),s==="nan")return NaN;if(/^(infinity|\+infinity|oo|\+oo)$/i.test(s))return 1/0;if(/^(-infinity|-oo)$/.test(s))return-1/0;if(/\([0-9]+\)/.test(s)){let[o,c,m,A]=s.match(/(.+)\(([0-9]+)\)(.*)$/)??[];s=c+m.repeat(Math.ceil(16/m.length))+(A??"")}return parseFloat(s)}function Z4(s){return typeof s=="number"?s:typeof s=="string"&&Z6(s)?c6(s):s!==void 0&&V4(s)?Z4(s.num):null}function K3(s){if(s==null)return null;if(_4(s)==="Half")return[1,2];let o=I2(s);if(!o)return null;let c=null,m=null;if(o==="Negate"){let A=K3(s4(s)[0]);if(A)return[-A[0],A[1]]}if(o==="Rational"||o==="Divide"){let[A,ae]=s4(s);c=Z4(A)??NaN,m=Z4(ae)??NaN}if(o==="Power"){let[A,ae]=s4(s),qe=Z4(ae);qe===1?(c=Z4(A),m=1):qe===-1&&(c=1,m=Z4(A))}if(o==="Multiply"){let[A,ae]=s4(s);if(I2(ae)==="Power"){let[qe,So]=s4(ae);Z4(So)===-1&&(c=Z4(A),m=Z4(qe))}}return c===null||m===null?null:Number.isInteger(c)&&Number.isInteger(m)?[c,m]:null}function w6(s,o){let c=null;if(Array.isArray(s)&&(c=s),h4(s)&&(c=s.fn),c===null)return[];let m=1,A=[];for(;m<c.length;)A.push(o(c[m])),m+=1;return A}function E5(s,o,c){let m=I2(o),A=I2(c);return m===s&&A===s?[s,...s4(o),...s4(c)]:m===s?[s,...s4(o),c]:A===s?[s,o,...s4(c)]:[s,o,c]}function X6(s){if(s==null)return null;let o=I2(s);if(o==="Delimiter"){if(s=j1(s,1),s===null)return[];if(o=I2(s),o!=="Sequence")return[s]}return o!=="Sequence"?null:s4(s)}function i3(s){return s==null||s==="Nothing"?!0:I2(s)==="Sequence"&&L4(s)===0}function t3(s){return i3(s)?F4:s}function h6(s){return s[0]==="Square"?h6(s.slice(1))+2:s.reduce((o,c)=>o+T5(c),0)}function T5(s){if(s===null)return 0;if(typeof s=="number"||typeof s=="string"||M4(s)||W4(s)||X4(s))return 1;if(Array.isArray(s))return h6(s);if("fn"in s)return h6(s.fn);let o=u6(s);if(o){let c=Object.keys(o);return 1+c.length+c.reduce((m,A)=>m+T5(o[A]),0)}return 0}function Z6(s){return/^(nan|oo|\+oo|-oo|infinity|\+infinity|-infinity)$/i.test(s)||/^[+-]?(0|[1-9][0-9]*)(\.[0-9]+)?(\([0-9]+\))?([eE][+-]?[0-9]+)?$/.test(s)}function g5(s){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(s)||s.length>=2&&s[0]==="`"&&s[s.length-1]==="`"}function Pv(s){return s.length>=2&&s[0]==="'"&&s[s.length-1]==="'"?!0:!Z6(s)&&!g5(s)}function C6(s){let o=[];for(let c=0;c<s.length;c++){let m=s.charCodeAt(c);if(m>=55296&&m<=56319){let A=s.charCodeAt(c+1);if(A>=56320&&A<=57343){let ae=m-55296,qe=A-56320;m=65536+ae*1024+qe,c++}}o.push(m)}return o}var Iv=8205,M6=[127462,127487];function Y3(s){return s===Iv||s===65038||s===65039||s>=127995&&s<=128e3||s>=129456&&s<=129460||s>=917536&&s<=917632}function dv(s){return s>=M6[0]&&s<=M6[1]}function pv(s){if(/^[\u0020-\u00FF]*$/.test(s))return s;let o=[],c=C6(s),m=0;for(;m<c.length;){let A=c[m++],ae=c[m];if(ae===Iv){let qe=m-1;for(m+=2;c[m]===Iv;)m+=2;o.push(String.fromCodePoint(...c.slice(qe,2*m-qe+1)))}else if(Y3(ae)){let qe=m-1;for(;Y3(c[m]);)m+=c[m]===Iv?2:1;o.push(String.fromCodePoint(...c.slice(qe,2*m-qe-1)))}else dv(A)?(m+=1,o.push(String.fromCodePoint(...c.slice(m-2,2)))):o.push(String.fromCodePoint(A))}return o}var mv=class{s;pos;obeyspaces=!1;constructor(s){s=s.replace(/[\u200E\u200F\u2066-\u2069\u202A-\u202E]/g,""),s=s.replace(/\u2212/g,"-"),this.s=pv(s),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(s){let o;return typeof this.s=="string"?o=s.exec(this.s.slice(this.pos)):o=s.exec(this.s.slice(this.pos).join("")),o?.[0]?(this.pos+=o[0].length,o[0]):null}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]/))return"<space>";let s=this.get();if(s==="\\"){if(!this.end()){let o=this.match(/^[a-zA-Z]+/);if(o)this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]*/);else if(o=this.get(),o===" ")return"<space>";return"\\"+o}}else{if(s==="{")return"<{>";if(s==="}")return"<}>";if(s==="^"){if(this.peek()==="^"){this.get();let o=this.match(/^(\^(\^(\^(\^[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f][0-9a-f]/);if(o)return String.fromCodePoint(parseInt(o.slice(o.lastIndexOf("^")+1),16))}return s}else if(s==="#"){if(!this.end()){let o=!1;if(/[0-9?]/.test(this.peek())&&(o=!0,this.pos+1<this.s.length)){let c=this.s[this.pos+1];o=/[^0-9A-Za-z]/.test(c)}return o?"#"+this.get():"#"}}else if(s==="$")return this.peek()==="$"?(this.get(),"<$$>"):"<$>"}return s}};function Kv(s,o){let c=s.next();if(!c)return[];let m=[];if(c!=="\\relax"){if(c==="\\noexpand")c=s.next(),c&&m.push(c);else if(c==="\\obeyspaces")s.obeyspaces=!0;else if(c==="\\space"||c==="~")m.push("<space>");else if(c==="\\bgroup")m.push("<{>");else if(c==="\\egroup")m.push("<}>");else if(c==="\\string")c=s.next(),c&&(c[0]==="\\"?Array.from(c).forEach(A=>m.push(A==="\\"?"\\backslash":A)):c==="<{>"?m.push("\\{"):c==="<space>"?m.push("~"):c==="<}>"&&m.push("\\}"));else if(c==="\\csname"){for(;s.peek()==="<space>";)s.next();let A="",ae=!1,qe=[];do{if(qe.length===0)if(/^#[0-9?]$/.test(s.peek())){let So=s.get().slice(1);qe=v6(o?.[So]??o?.["?"]??"\\placeholder{}",o),c=qe[0]}else c=s.next(),qe=c?[c]:[];ae=qe.length===0,!ae&&c==="\\endcsname"&&(ae=!0,qe.shift()),ae||(ae=c==="<$>"||c==="<$$>"||c==="<{>"||c==="<}>"||!!c&&c.length>1&&c[0]==="\\"),ae||(A+=qe.shift())}while(!ae);A&&m.push("\\"+A),m=m.concat(qe)}else if(c!=="\\endcsname")if(c.length>1&&c[0]==="#"){let A=c.slice(1);m=m.concat(v6(o?.[A]??o?.["?"]??"\\placeholder{}",o))}else m.push(c)}return m}function v6(s,o=[]){let c=s.toString().split(/\r?\n/),m="",A="";for(let So of c){m+=A,A=" ";let Hc=So.match(/((?:\\%)|[^%])*/);Hc!==null&&(m+=Hc[0])}let ae=new mv(m),qe=[];do qe.push(...Kv(ae,o));while(!ae.end());return qe}function oy(s){return v6(s).length}function T4(s){let o="",c="";for(let m of s)m!=null&&(typeof m=="string"&&(/[a-zA-Z]/.test(m[0])&&(c+=o),/\\[a-zA-Z]+\*?$/.test(m)?o=" ":o=""),c+=m.toString());return c}function p7(s,o,c){return o.includes(s)&&(o=`{${o}}`),/^[0-9]$/.test(c)?`${o}${s}${c}`:`${o}${s}{${c}}`}function H5(s){let o=[];if(Array.isArray(s))for(let c of s)Array.isArray(c)?o=[...o,...c]:o.push(c);else o=[s];return T4(o.map(c=>({"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"})[c]??c))}var w3=245,A5=260,ly=270,a6=275,gv=390,Nv=600,zy=650,N9=700,D9=810;function Z7(s){return!("kind"in s)||s.kind==="expression"}function Y7(s){return"kind"in s&&s.kind==="symbol"}function m7(s){return"kind"in s&&s.kind==="matchfix"}function z8(s){return"kind"in s&&s.kind==="infix"}function G5(s){return"kind"in s&&s.kind==="prefix"}function rv(s){return"kind"in s&&s.kind==="postfix"}function g7(s){return"kind"in s&&s.kind==="environment"}var uy=[{name:"To",latexTrigger:["\\to"],kind:"infix",precedence:270},{latexTrigger:["\\rightarrow"],kind:"infix",precedence:270,parse:"To"}];function cy(s,o){return"normal"}function v7(s,o){return"normal"}function $x(s,o){return o>2?"solidus":"radical"}function f_(s,o){if(o>3)return"inline-solidus";if(I2(s)==="Divide"){let[c,m]=s4(s),[A,ae]=[T5(c),T5(m)];if(ae<=2&&A>5)return"factor";if(A<=2&&ae>5)return"reciprocal"}return"quotient"}function d_(s,o){return"boolean"}function F5(s,o){return"solidus"}function k6(s,o){return"compact"}function P3(s,o,c){s.indexOf("#1")<0&&s.indexOf("#2")<0&&(s=`#1 ${s} #2`);let m=s.split(/(#\d+)/).filter(A=>A.trim()!=="").map(A=>A.trim());return T4(m.map(A=>{switch(A){case"#1":return o;case"#2":return c;default:return A}}))}function y7(s){if(I2(s)!=="Multiply")return[[],[]];let o=[],c=[];for(let m of s4(s))if(I2(m)==="Power"){let A=j1(m,1),ae=j1(m,2);if(I2(ae)==="Negate"){let qe=j1(ae,1);A&&qe&&c.push(["Power",A,qe])}else{let qe=Z4(ae)??NaN;qe===-1?A&&c.push(A):qe<0?A&&c.push(["Power",A,-qe]):o.push(m)}}else if(I2(m)==="Rational"&&L4(m)===2||I2(m)==="Divide"){let A=j1(m,1),ae=j1(m,2);Z4(A)!==1&&o.push(A),Z4(ae)!==1&&c.push(ae)}else{let A=K3(m);A!==null?(A[0]!==1&&o.push(A[0]),c.push(A[1])):o.push(m)}return[o,c]}function Wv(s){let o=s.parseOptionalGroup(),c=s.parseGroup()??s.parseToken();return i3(c)?o!==null?["Root",F4,t3(o)]:["Sqrt",F4]:o!==null?["Root",c,o]:["Sqrt",c]}function b7(s,o,c,m){return c==null?"\\sqrt{}":(m=m??2,o==="solidus"?s.wrapShort(c)+"^{1/"+s.serialize(m)+"}":o==="quotient"?s.wrapShort(c)+"^{\\frac{1}{"+s.serialize(m)+"}}":Z4(m)===2?"\\sqrt{"+s.serialize(c)+"}":"\\sqrt["+s.serialize(m)+"]{"+s.serialize(c)+"}")}function _7(s,o){s.level-=1;let c=I2(o),m="",A=j1(o,1);if(c==="Negate")m="-"+s.wrap(A,a6+1);else if(c==="Subtract"){m=s.wrap(A,a6);let ae=j1(o,2);if(ae!==null){let qe=s.wrap(ae,a6);qe[0]==="-"?m+="+"+qe.slice(1):qe[0]==="+"?m+="-"+qe.slice(1):m=m+"-"+qe}}else if(c==="Add"){if(s.options.prettify&&L4(o)===2&&s.options.invisiblePlus!=="+"){let[So,Hc]=[j1(o,1),j1(o,2)],[mf,p1]=[So,Hc],M1=Z4(mf),R1=K3(p1);if((M1===null||R1===null)&&([mf,p1]=[Hc,So],M1=Z4(mf),R1=K3(p1)),M1!==null&&R1!==null&&isFinite(M1)&&Number.isInteger(M1)&&M1>=0&&M1<=1e3&&isFinite(R1[0])&&isFinite(R1[1])&&R1[0]>0&&R1[0]<=100&&R1[1]<=100)return m=P3(s.options.invisiblePlus,s.serialize(mf),s.serialize(p1)),s.level+=1,m}if(s.options.prettify&&L4(o)===2){let[So,Hc]=iv(A),[mf,p1]=iv(j1(o,2));if(Hc<0&&p1>0)return m=s.wrap(mf,a6)+"-"+s.wrap(So,a6),s.level+=1,m}m=s.serialize(A);let ae=L4(o)+1,qe=s4(o);for(let So=2;So<ae;So++)if(A=qe[So-1],s.options.prettify){let[Hc,mf]=iv(A),p1=s.wrap(Hc,a6);mf>0?p1.startsWith("+")||p1.startsWith("-")?m+=p1:m+="+"+p1:p1.startsWith("+")?m+="-"+p1.slice(1):p1.startsWith("-")?m+="+"+p1.slice(1):m+="-"+p1}else{let Hc=s.wrap(A,a6);Hc[0]==="-"||Hc[0]==="+"?m+=Hc:m+="+"+Hc}}return s.level+=1,m}function p_(s,o){if(o===null)return"";s.level-=1;let c="";if(s.options.prettify===!0){let[Hc,mf]=y7(o);mf.length>0&&(mf.length===1&&mf[0]===1?Hc.length===0?c="1":Hc.length===1?c=s.serialize(Hc[0]):c=p_(s,["Multiply",...Hc]):c=s.serialize(["Divide",Hc.length===1?Hc[0]:["Multiply",...Hc],mf.length===1?mf[0]:["Multiply",...mf]]))}if(c)return s.level+=1,c;let m=!1,A=null,ae=L4(o)+1,qe=s4(o);s.options.prettify===!0&&qe.length===2&&M4(qe[1])&&!M4(qe[0])&&(qe=[qe[1],qe[0]]);let So=!1;for(let Hc=1;Hc<ae;Hc++){if(A=qe[Hc-1],A===null)continue;let mf;if(M4(A)){mf=s.serialize(A),mf==="-1"&&!c?(c="",m=!m):(mf[0]==="-"&&(mf=mf.slice(1),m=!m),c?c=P3(s.options.multiply,c,mf):c=mf),So=!0;continue}if(I2(A)==="Power"){let p1=K3(j1(A,2));if(p1!=null){let[M1,R1]=p1;if(M1===1&&R1!==null){c+=b7(s,s.rootStyle(A,s.level),j1(A,1),R1),So=!1;continue}}}if(I2(A)==="Power"&&!isNaN(Z4(j1(A,1))??NaN)){mf=s.serialize(A),c?c=P3(s.options.multiply,c,mf):c=mf,So=!0;continue}if(I2(A)==="Negate"&&(A=j1(A,1),m=!m),mf=s.wrap(A,gv),!c)c=mf;else{let p1=I2(A);So&&(p1==="Divide"||p1==="Rational")?c=P3(s.options.multiply,c,mf):s.options.invisibleMultiply?c=P3(s.options.invisibleMultiply,c,mf):c=T4([c,mf])}So=!1}return s.level+=1,m?"-"+c:c}function zx(s){let o=s.parseGroup(),c=null;if(o===null?(o=s.parseToken(),c=s.parseToken()):c=s.parseGroup(),o=t3(o),c=t3(c),I2(o)==="PartialDerivative"&&(I2(c)==="PartialDerivative"||I2(c)==="Multiply"&&I2(j1(c,1))==="PartialDerivative")){let m=j1(o,3)??null,A=j1(o,1);A==null&&(A=t3(s.parseExpression()));let ae=[];if(I2(c)==="Multiply"){for(let qe of s4(c))if(I2(qe)==="PartialDerivative"){let So=j1(qe,2);So&&ae.push(So)}}else{let qe=j1(c,2);qe&&ae.push(qe)}return ae.length>1&&(ae=["List",...ae]),["PartialDerivative",A,...ae,m===null?1:m]}return["Divide",o,c]}function Q7(s,o){if(o===null)return"";let c=t3(j1(o,1)),m=t3(j1(o,2)),A=s.options.prettify?s.fractionStyle(o,s.level):"quotient";if(A==="inline-solidus"||A==="nice-solidus"){let Hc=s.wrapShort(c),mf=s.wrapShort(m);return A==="inline-solidus"?`${Hc}/${mf}`:`{}^{${Hc}}\\!\\!/\\!{}_{${mf}}`}else{if(A==="reciprocal")return Z4(c)===1?s.wrap(m)+"^{-1}":s.wrap(c)+s.wrap(m)+"^{-1}";if(A==="factor")return Z4(m)===1?s.wrap(c):"\\frac{1}{"+s.serialize(m)+"}"+s.wrapString(s.serialize(c),s.groupStyle(o,1))}let ae="\\frac";A==="block-quotient"?ae="\\dfrac":A==="inline-quotient"&&(ae="\\tfrac");let qe=s.serialize(c),So=s.serialize(m);return`${ae}{${qe}}{${So}}`}function x7(s,o){if(!o)return"";let c=I2(o),m=t3(j1(o,1));if(c==="Sqrt")return b7(s,s.rootStyle(o,s.level-1),m,2);let A=t3(j1(o,2));if(c==="Root")return b7(s,s.rootStyle(o,s.level-1),m,A);if(s.options.prettify){let ae=Z4(A)??1;if(ae===-1)return s.serialize(["Divide","1",m]);if(ae<0)return s.serialize(["Divide","1",["Power",m,-ae]]);if(I2(A)==="Divide"||I2(A)==="Rational"){if(Z4(j1(A,1))===1){let qe=s.rootStyle(o,s.level);return b7(s,qe,m,j1(A,2))}if(Z4(j1(A,2))===2)return`${s.serialize(["Sqrt",m])}^{${s.serialize(j1(A,1))}}`}else if(I2(A)==="Power"&&Z4(j1(A,2))===-1){let qe=s.rootStyle(o,s.level);return b7(s,qe,m,j1(A,1))}}if(I2(m)==="Power"){let ae=j1(m,1),qe=j1(m,2);return`
      ${s.wrapShort(ae)}^{${p7("^",s.wrapShort(qe),s.serialize(A))}}`}return p7("^",s.wrapShort(m),s.serialize(A))}var Ux=[{name:"CatalanConstant",symbolTrigger:"G"},{name:"GoldenRatio",latexTrigger:"\\varphi"},{name:"EulerGamma",latexTrigger:"\\gamma"},{name:"Degrees",latexTrigger:["\\degree"],kind:"postfix",precedence:880,parse:(s,o)=>["Degrees",o],serialize:(s,o)=>T4([s.serialize(j1(o,1)),"\\degree"])},{latexTrigger:["\\degree"],kind:"postfix",precedence:880,parse:(s,o)=>["Degrees",o]},{latexTrigger:["^","<{>","\\circ","<}>"],kind:"postfix",parse:(s,o)=>["Degrees",o]},{latexTrigger:["^","\\circ"],kind:"postfix",parse:(s,o)=>["Degrees",o]},{latexTrigger:[""],kind:"postfix",precedence:880,parse:(s,o)=>["Degrees",o]},{latexTrigger:["\\ang"],parse:s=>{let o=s.parseGroup();return o===null?["Degrees"]:["Degrees",o]}},{latexTrigger:["\\infty"],parse:"PositiveInfinity"},{name:"PositiveInfinity",serialize:s=>s.options.positiveInfinity},{name:"NegativeInfinity",serialize:s=>s.options.negativeInfinity},{name:"ComplexInfinity",latexTrigger:["\\tilde","\\infty"],serialize:"\\tilde\\infty"},{latexTrigger:["\\tilde","<{>","\\infty","<}>"],parse:"ComplexInfinity"},{name:"Pi",kind:"symbol",latexTrigger:["\\pi"]},{latexTrigger:[""],parse:"Pi"},{name:"ExponentialE",latexTrigger:["\\exponentialE"],parse:"ExponentialE",serialize:"\\exponentialE"},{latexTrigger:"\\operatorname{e}",parse:"ExponentialE"},{latexTrigger:"\\mathrm{e}",parse:"ExponentialE"},{kind:"function",symbolTrigger:"exp",parse:"Exp"},{latexTrigger:"\\exp",parse:"Exp"},{name:"ImaginaryUnit",latexTrigger:["\\imaginaryI"]},{latexTrigger:"\\operatorname{i}",parse:"ImaginaryUnit"},{latexTrigger:"\\mathrm{i}",parse:"ImaginaryUnit"},{name:"Abs",kind:"matchfix",openTrigger:"|",closeTrigger:"|",parse:(s,o)=>i3(o)?null:["Abs",o]},{kind:"matchfix",openTrigger:["\\vert"],closeTrigger:["\\vert"],parse:(s,o)=>i3(o)?null:["Abs",o]},{symbolTrigger:"abs",kind:"function",parse:"Abs"},{name:"Add",latexTrigger:["+"],kind:"infix",associativity:"any",precedence:a6,parse:(s,o,c)=>{let m=s.parseExpression({...c,minPrec:a6});return m===null?null:E5("Add",o,m)},serialize:_7},{kind:"prefix",latexTrigger:["+"],precedence:a6,parse:(s,o)=>s.parseExpression({...o,minPrec:400})},{name:"Ceil",kind:"matchfix",openTrigger:"\\lceil",closeTrigger:"\\rceil",parse:(s,o)=>i3(o)?null:["Ceil",o]},{kind:"matchfix",openTrigger:[""],closeTrigger:[""],parse:(s,o)=>i3(o)?null:["Ceil",o]},{symbolTrigger:"ceil",kind:"function",parse:"Ceil"},{name:"Chop",symbolTrigger:"chop",kind:"function",parse:"Chop"},{name:"Complex",precedence:a6-1,serialize:(s,o)=>{let c=s.serialize(j1(o,1)),m=Z4(j1(o,2));if(m===0)return c;let A=m===1?"\\imaginaryI":m===-1?"-\\imaginaryI":T4([s.serialize(j1(o,2)),"\\imaginaryI"]);return Z4(j1(o,1))===0?A:m!==null&&m<0?T4([c,A]):T4([c,"+",A])}},{name:"Divide",latexTrigger:"\\frac",precedence:Nv,parse:zx,serialize:Q7},{kind:"infix",latexTrigger:"\\over",associativity:"none",precedence:Nv,parse:"Divide"},{latexTrigger:["\\/"],kind:"infix",associativity:"left",precedence:Nv,parse:"Divide"},{latexTrigger:["/"],kind:"infix",associativity:"left",precedence:Nv,parse:"Divide"},{latexTrigger:["\\div"],kind:"infix",associativity:"left",precedence:Nv,parse:"Divide"},{name:"Exp",serialize:(s,o)=>{let c=j1(o,1);return _4(c)||Z4(c)!==null?T4(["\\exponentialE^{",s.serialize(c),"}"]):T4(["\\exp",s.wrap(t3(c))])}},{name:"Factorial",latexTrigger:["!"],kind:"postfix",precedence:D9},{name:"Factorial2",latexTrigger:["!","!"],kind:"postfix",precedence:D9},{name:"Floor",kind:"matchfix",openTrigger:"\\lfloor",closeTrigger:"\\rfloor",parse:(s,o)=>i3(o)?null:["Floor",o]},{kind:"matchfix",openTrigger:[""],closeTrigger:[""],parse:(s,o)=>i3(o)?null:["Floor",o]},{symbolTrigger:"floor",kind:"function",parse:"Floor"},{latexTrigger:["\\Gamma"],parse:"Gamma"},{name:"GCD",latexTrigger:["\\gcd"]},{symbolTrigger:"gcd",kind:"function",parse:"GCD"},{symbolTrigger:"GCD",kind:"function",parse:"GCD"},{name:"Half",serialize:"\\frac12"},{name:"Lg",latexTrigger:["\\lg"],serialize:(s,o)=>"\\log_{10}"+s.wrapArguments(o),parse:s=>{let o=s.parseArguments("implicit");return o===null?"Lg":["Log",...o,10]}},{name:"Lb",latexTrigger:"\\lb",parse:s=>{let o=s.parseArguments("implicit");return o===null?"Log":["Log",o[0],2]}},{name:"Ln",latexTrigger:["\\ln"],parse:s=>hy("Ln",s),serialize:(s,o)=>"\\ln"+s.wrapArguments(o)},{name:"Log",latexTrigger:["\\log"],parse:s=>hy("Log",s),serialize:(s,o)=>{let[c,m]=s4(o);return m?T4(["\\log_{",s.serialize(m),"}",s.wrap(c)]):"\\log"+s.wrapArguments(o)}},{name:"LCM",symbolTrigger:"lcm",kind:"function"},{symbolTrigger:"LCM",kind:"function",parse:"LCM"},{symbolTrigger:"max",kind:"function",parse:"Max"},{symbolTrigger:"min",kind:"function",parse:"Min"},{name:"Max",latexTrigger:"\\max",kind:"function"},{name:"Min",latexTrigger:"\\min",kind:"function"},{name:"Supremum",latexTrigger:"\\sup",kind:"function"},{name:"Infimum",latexTrigger:"\\inf",kind:"function"},{name:"Limit",latexTrigger:"\\lim",kind:"expression",parse:s=>{if(!s.match("_"))return null;let o=s.parseGroup();if(I2(o)!=="To")return null;let c=s.parseArguments("implicit");return c?["Limit",["Function",c[0],j1(o,1)],j1(o,2)]:null},serialize:(s,o)=>{let c=j1(o,1),m=j1(c,2),A=j1(o,2);return T4(["\\lim_{",s.serialize(m),"\\to",s.serialize(A),"}",s.serialize(j1(c,1))])}},{name:"MinusPlus",latexTrigger:["\\mp"],kind:"infix",associativity:"any",precedence:ly},{name:"Multiply",latexTrigger:["\\times"],kind:"infix",associativity:"any",precedence:gv,serialize:p_},{latexTrigger:["\\cdot"],kind:"infix",associativity:"any",precedence:gv,parse:(s,o,c)=>{let m=s.parseExpression({...c,minPrec:gv+2});return m===null?null:E5("Multiply",o,m)}},{latexTrigger:["*"],kind:"infix",associativity:"any",precedence:gv,parse:(s,o,c)=>{let m=s.parseExpression({...c,minPrec:gv+2});return m===null?["Multiply",o,F4]:E5("Multiply",o,m)}},{name:"Mod",latexTrigger:"\\bmod",kind:"infix",precedence:Nv,serialize:(s,o)=>{if(L4(o)!==2)return"";let c=s.serialize(j1(o,1)),m=s.serialize(j1(o,2));return T4([c,"\\bmod",m])}},{latexTrigger:"\\mod",kind:"infix",precedence:Nv,parse:"Mod"},{latexTrigger:"\\pmod",kind:"prefix",precedence:w3,parse:s=>{let o=s.parseGroup()??s.parseToken();return["Mod",t3(o)]}},{name:"Congruent",serialize:(s,o)=>{let c=s.serialize(j1(o,1)),m=s.serialize(j1(o,2));if(j1(o,3)===null)return T4([c,"\\equiv",m]);let A=s.serialize(j1(o,3));return T4([c,"\\equiv",m,"\\pmod{",A,"}"])}},{name:"Negate",latexTrigger:["-"],kind:"prefix",precedence:N9+1,parse:(s,o)=>{s.skipSpace();let c=s.parseExpression({...o,minPrec:N9+3});return c===null?null:["Negate",c]}},{kind:"matchfix",openTrigger:"||",closeTrigger:"||",parse:(s,o)=>i3(o)?null:["Norm",o]},{name:"Norm",kind:"matchfix",openTrigger:["\\left","\\Vert"],closeTrigger:["\\right","\\Vert"],parse:(s,o)=>i3(o)?null:["Norm",o]},{name:"PlusMinus",latexTrigger:["\\pm"],kind:"infix",associativity:"any",precedence:ly,serialize:(s,o)=>{let c=j1(o,1);if(c===null)return"\\pm";if(L4(o)===1)return T4(["\\pm",s.serialize(c)]);let m=j1(o,2);return T4([s.serialize(c),"\\pm",s.serialize(m)])}},{latexTrigger:["\\pm"],kind:"prefix",precedence:ly,parse:(s,o)=>{let c=s.parseExpression({...o,minPrec:400});return["PlusMinus",0,t3(c)]}},{latexTrigger:["\\plusmn"],kind:"infix",associativity:"any",precedence:ly,parse:(s,o,c)=>{let m=s.parseExpression({...c,minPrec:400});return["PlusMinus",o,t3(m)]}},{latexTrigger:["\\plusmn"],kind:"prefix",precedence:ly,parse:(s,o)=>{let c=s.parseExpression({...o,minPrec:400});return["PlusMinus",t3(c)]}},{name:"Power",latexTrigger:["^"],kind:"infix",serialize:x7},{latexTrigger:"\\prod",precedence:gv,name:"Product",parse:Uy("Product","Multiply",gv),serialize:Xv("\\prod")},{name:"Rational",precedence:Nv,serialize:(s,o)=>o&&L4(o)===1?"\\operatorname{Rational}"+s.wrapArguments(o):Q7(s,o)},{name:"Reduce",serialize:(s,o)=>{let c=j1(o,1);if(!c)return"";let m=j1(o,2);return _4(m)==="Add"?`\\sum ${s.serialize(c)}`:_4(m)==="Multiply"?`\\prod ${s.serialize(c)}`:`\\operatorname{Reduce}\\left(${s.serialize(c)}, ${s.serialize(j1(o,2))}\\right)`}},{name:"Root",serialize:x7},{name:"Round",symbolTrigger:"round",kind:"function"},{name:"Square",precedence:720,serialize:(s,o)=>s.wrapShort(j1(o,1))+"^2"},{latexTrigger:["\\sum"],precedence:a6,name:"Sum",parse:Uy("Sum","Add",gv),serialize:Xv("\\sum")},{name:"Sign",symbolTrigger:"sgn",kind:"function"},{name:"Sqrt",latexTrigger:["\\sqrt"],parse:Wv,serialize:x7},{name:"Subtract",latexTrigger:["-"],kind:"infix",associativity:"left",precedence:a6+2,parse:(s,o,c)=>{s.index-=1;let m=s.parseExpression({...c,minPrec:a6+3});return m===null?null:["Add",o,m]},serialize:(s,o)=>{let c=s.wrap(j1(o,1),a6+2),m=s.wrap(j1(o,2),a6+3);return T4([c,"-",m])}}];function U8(s,o){if(s!==null){if(_4(s))return{index:_4(s)??"Nothing",upper:o};if(I2(s)==="GreaterEqual"){let c=_4(j1(s,1))??"Nothing",m=j1(s,2)??1;return{index:c,lower:m,upper:o}}if(I2(s)==="Equal"){let c=_4(j1(s,1))??"Nothing",m=j1(s,2);if(I2(m)==="Range"){let A=j1(m,1)??1,ae=j1(m,2)??void 0;return{index:c,lower:A,upper:ae}}return{index:c,lower:m??1,upper:o}}}}function m_(s,o){i3(s)&&(s=null),i3(o)&&(o=null);let c=s===null?[]:X6(s)??[s],m=o===null?[]:X6(o)??[o];return c.map((A,ae)=>U8(A,m[ae])).filter(A=>A!==void 0)}function Uy(s,o,c){return m=>{m.skipSpace();let A=null,ae=null;for(;!(ae&&A)&&(m.peek==="_"||m.peek==="^");)m.match("_")?ae=m.parseGroup()??m.parseToken():m.match("^")&&(A=m.parseGroup()??m.parseToken()),m.skipSpace();if(!A&&!ae){let mf=m.parseExpression({minPrec:c});if(mf)return["Reduce",mf,o]}let qe=m_(ae,A);m.pushSymbolTable();for(let mf of qe)m.addSymbol(mf.index,"symbol");let So=m.parseExpression({minPrec:c});if(m.popSymbolTable(),So===null)return[s];let Hc=[];for(let mf of qe){let p1=mf.lower,M1=mf.upper,R1=mf.index??"Nothing";M1!=null?Hc.push(["Tuple",R1,p1??1,M1]):p1!=null?Hc.push(["Tuple",R1,p1]):Hc.push(["Tuple",R1])}return[s,So,...Hc]}}function Xv(s){return(o,c)=>{if(!j1(c,1))return s;let m=j1(c,2),A=I2(m);A!=="Tuple"&&A!=="Triple"&&A!=="Pair"&&A!=="Single"&&(m=null);let ae=j1(m,1);ae!==null&&I2(ae)==="Hold"&&(ae=j1(ae,1));let qe=j1(c,1);if(m!=null)return j1(c,2)!==null?T4([s,o.serialize(qe)]):T4([s,"_{",o.serialize(j1(c,2)),"}",o.serialize(qe)]);let So=j1(m,2),Hc=[];ae&&_4(ae)!=="Nothing"&&So?Hc=[o.serialize(ae),"=",o.serialize(So)]:ae&&_4(ae)!=="Nothing"?Hc=[o.serialize(ae)]:So!==null&&(Hc=[o.serialize(So)]),Hc.length>0&&(Hc=["_{",...Hc,"}"]);let mf=[];return j1(m,3)!==null&&(mf=["^{",o.serialize(j1(m,3)),"}"]),T4([s,...mf,...Hc,o.serialize(qe)])}}function hy(s,o){let c=null;o.match("_")&&(c=o.parseGroup()??o.parseToken());let m=o.parseArguments("implicit");return m===null&&c===null?[s]:m===null?[s,c]:c===null?[s,...m]:c===10?["Log",m[0]]:c===2?["Lb",...m]:["Log",m[0],c]}function iv(s){let o=1,c=s;do{s=c;let m=I2(s);if(m==="Negate")o*=-1,c=j1(s,1);else if(m==="Multiply"){let[A,ae]=iv(j1(s,1));ae<0&&(o*=-1,A===1?c=["Multiply",...s4(s).slice(1)]:c=["Multiply",A,...s4(s).slice(1)])}else if(m==="Divide"||m==="Rational"){let[A,ae]=iv(j1(s,1));ae<0&&(o*=-1,c=[m,A,j1(s,2)])}else{let A=Z4(s);A!==null&&A<0&&(o*=-1,c=-A)}}while(c!==s);return[s,o]}var J7=[{latexTrigger:["\\not","<"],kind:"infix",associativity:"any",precedence:246,parse:"NotLess"},{name:"NotLess",latexTrigger:["\\nless"],kind:"infix",associativity:"any",precedence:246},{latexTrigger:["<"],kind:"infix",associativity:"any",precedence:245,parse:"Less"},{name:"Less",latexTrigger:["\\lt"],kind:"infix",associativity:"any",precedence:245},{latexTrigger:["<","="],kind:"infix",associativity:"any",precedence:241,parse:"LessEqual"},{name:"LessEqual",latexTrigger:["\\le"],kind:"infix",associativity:"any",precedence:241},{latexTrigger:["\\leq"],kind:"infix",associativity:"any",precedence:241,parse:"LessEqual"},{latexTrigger:["\\leqslant"],kind:"infix",associativity:"any",precedence:w3+5,parse:"LessEqual"},{name:"LessNotEqual",latexTrigger:["\\lneqq"],kind:"infix",associativity:"any",precedence:w3},{name:"NotLessNotEqual",latexTrigger:["\\nleqq"],kind:"infix",associativity:"any",precedence:w3},{name:"LessOverEqual",latexTrigger:["\\leqq"],kind:"infix",associativity:"any",precedence:w3+5},{name:"GreaterOverEqual",latexTrigger:["\\geqq"],kind:"infix",associativity:"any",precedence:w3+5,parse:"GreaterEqual"},{name:"Equal",latexTrigger:["="],kind:"infix",associativity:"right",precedence:w3},{latexTrigger:["*","="],kind:"infix",associativity:"right",precedence:w3,parse:"StarEqual"},{name:"StarEqual",latexTrigger:["\\star","="],kind:"infix",associativity:"right",precedence:w3},{name:"PlusEqual",latexTrigger:["+","="],kind:"infix",associativity:"right",precedence:w3},{name:"MinusEqual",latexTrigger:["-","="],kind:"infix",associativity:"right",precedence:w3},{name:"SlashEqual",latexTrigger:["/","="],kind:"infix",associativity:"right",precedence:w3},{name:"EqualEqual",latexTrigger:["=","="],kind:"infix",associativity:"right",precedence:w3},{name:"EqualEqualEqual",latexTrigger:["=","=","="],kind:"infix",associativity:"right",precedence:w3+5},{name:"TildeFullEqual",latexTrigger:["\\cong"],kind:"infix",associativity:"right",precedence:w3},{name:"NotTildeFullEqual",latexTrigger:["\\ncong"],kind:"infix",associativity:"right",precedence:w3},{name:"Approx",latexTrigger:["\\approx"],kind:"infix",associativity:"right",precedence:247},{name:"NotApprox",latexTrigger:["\\not","\\approx"],kind:"infix",associativity:"right",precedence:247},{name:"ApproxEqual",latexTrigger:["\\approxeq"],kind:"infix",associativity:"right",precedence:w3},{name:"NotApproxEqual",latexTrigger:["\\not","\\approxeq"],kind:"infix",associativity:"right",precedence:250},{name:"NotEqual",latexTrigger:["\\ne"],kind:"infix",associativity:"right",precedence:255},{name:"Unequal",latexTrigger:["!","="],kind:"infix",associativity:"right",precedence:w3},{name:"GreaterEqual",latexTrigger:["\\ge"],kind:"infix",associativity:"right",precedence:242},{latexTrigger:["\\geq"],kind:"infix",associativity:"right",precedence:242,parse:"GreaterEqual"},{latexTrigger:[">","="],kind:"infix",associativity:"right",precedence:243,parse:"GreaterEqual"},{latexTrigger:["\\geqslant"],kind:"infix",associativity:"right",precedence:w3+5,parse:"GreaterEqual"},{name:"GreaterNotEqual",latexTrigger:["\\gneqq"],kind:"infix",associativity:"right",precedence:w3},{name:"NotGreaterNotEqual",latexTrigger:["\\ngeqq"],kind:"infix",associativity:"right",precedence:w3},{latexTrigger:[">"],kind:"infix",associativity:"right",precedence:245,parse:"Greater"},{name:"Greater",latexTrigger:["\\gt"],kind:"infix",associativity:"right",precedence:245},{name:"NotGreater",latexTrigger:["\\ngtr"],kind:"infix",associativity:"right",precedence:244},{latexTrigger:["\\not",">"],kind:"infix",associativity:"right",precedence:244,parse:"NotGreater"},{name:"RingEqual",latexTrigger:["\\circeq"],kind:"infix",associativity:"right",precedence:w3},{name:"TriangleEqual",latexTrigger:["\\triangleq"],kind:"infix",associativity:"right",precedence:w3},{name:"DotEqual",latexTrigger:["\\doteq"],kind:"infix",associativity:"right",precedence:w3+5},{name:"DotEqualDot",latexTrigger:["\\doteqdot"],kind:"infix",associativity:"right",precedence:w3+5},{name:"FallingDotEqual",latexTrigger:["\\fallingdotseq"],kind:"infix",associativity:"right",precedence:w3+5},{name:"RisingDotEqual",latexTrigger:["\\fallingdotseq"],kind:"infix",associativity:"right",precedence:w3+5},{name:"QuestionEqual",latexTrigger:["\\questeq"],kind:"infix",associativity:"right",precedence:w3},{name:"MuchLess",latexTrigger:["\\ll"],kind:"infix",associativity:"right",precedence:w3},{name:"MuchGreater",latexTrigger:["\\gg"],kind:"infix",associativity:"right",precedence:w3},{name:"Precedes",latexTrigger:["\\prec"],kind:"infix",associativity:"right",precedence:w3},{name:"Succeeds",latexTrigger:["\\succ"],kind:"infix",associativity:"right",precedence:w3},{name:"PrecedesEqual",latexTrigger:["\\preccurlyeq"],kind:"infix",associativity:"right",precedence:w3},{name:"SucceedsEqual",latexTrigger:["\\curlyeqprec"],kind:"infix",associativity:"right",precedence:w3},{name:"NotPrecedes",latexTrigger:["\\nprec"],kind:"infix",associativity:"right",precedence:w3},{name:"NotSucceeds",latexTrigger:["\\nsucc"],kind:"infix",associativity:"right",precedence:w3},{name:"Between",latexTrigger:["\\between"],kind:"infix",associativity:"right",precedence:w3+5}];function j8(s){return typeof s=="string"?s.startsWith("$")&&s.endsWith("$"):!1}function fy(s){if(typeof s=="number")return s.toString();if(typeof s=="string"){let o=s.trim();if(o.startsWith("$$")&&o.endsWith("$$"))return o.slice(2,-2);if(o.startsWith("$")&&o.endsWith("$"))return o.slice(1,-1)}return Array.isArray(s)?fy(T4(s)):null}function Zv(s){return typeof s!="string"?!1:J7.some(o=>o.name===s)}function vv(s){return typeof s!="string"?!1:["Less","LessEqual","Greater","GreaterEqual"].includes(s)}function Y6(s){return typeof s!="string"?!1:["Equal","NotEqual"].includes(s)}function e8(s,o,c,m,A){if(o&&o.minPrec>=m)return null;let ae=c?[c]:["Nothing"],qe=!1;for(;!qe;){for(qe=!0,s.skipSpace();s.match(A);)ae.push("Nothing"),s.skipSpace();if(s.atTerminator(o))ae.push("Nothing");else{let So=s.parseExpression({...o,minPrec:m});ae.push(So??"Nothing"),qe=So===null}qe||(s.skipSpace(),qe=!s.match(A))}return ae}function Dv(s=""){return(o,c)=>{if(!c)return"";let m=s4(c);if(m.length===0)return"";if(m.length===1)return o.serialize(m[0]);s={"&":"\\&",":":"\\colon","|":"\\mvert","-":"-","":"\\cdot","":"-","":"--","":"---","":"-","":"\\bullet","":"\\ldots"}[s]??s;let A=m.reduce((ae,qe)=>(ae.push(o.serialize(qe),s),ae),[]);return A.pop(),T4(A)}}var fS=[{latexTrigger:["\\placeholder"],kind:"symbol",parse:s=>{for(;s.match("<space>"););if(s.match("["))for(;!s.match("]")&&!s.atBoundary;)s.nextToken();for(;s.match("<space>"););if(s.match("<{>"))for(;!s.match("<}>")&&!s.atBoundary;)s.nextToken();return"Nothing"}},{name:"ContinuationPlaceholder",latexTrigger:["\\dots"]},{latexTrigger:["\\ldots"],parse:"ContinuationPlaceholder"},{latexTrigger:[".",".","."],parse:"ContinuationPlaceholder"},{name:"Function",latexTrigger:["\\mapsto"],kind:"infix",precedence:ly,parse:(s,o)=>{let c=[];if(I2(o)==="Delimiter"&&(o=j1(o,1)??"Nothing"),I2(o)==="Sequence")for(let A of s4(o)){if(!_4(A))return null;c.push(_4(A))}else{if(!_4(o))return null;c=[_4(o)]}let m=s.parseExpression({minPrec:ly})??"Nothing";return I2(m)==="Delimiter"&&(m=j1(m,1)??"Nothing"),I2(m)==="Sequence"&&(m=["Block",...s4(m)]),["Function",m,...c]},serialize:(s,o)=>{let c=s4(o);return c.length<1?"()\\mapsto()":c.length===1?T4(["()","\\mapsto",s.serialize(j1(o,1))]):c.length===2?T4([s.serialize(j1(o,2)),"\\mapsto",s.serialize(j1(o,1))]):T4([s.wrapString(s4(o)?.slice(1).map(m=>s.serialize(m)).join(", "),"normal"),"\\mapsto",s.serialize(j1(o,1))])}},{name:"Apply",kind:"function",symbolTrigger:"apply",serialize:(s,o)=>{let c=j1(o,1),m=I2(c);if(m==="InverseFunction"||m==="Derivative"){let qe=s.options.applyFunctionStyle(o,s.level),So=s4(o).slice(1);return s.serializeFunction(c,s.dictionary.ids.get(m))+s.wrapString(So.map(Hc=>s.serialize(Hc)).join(", "),qe)}let A=j1(o,2);if(typeof c=="string"||!A){let qe=s4(o).slice(1);return s.serialize(qe)}if(L4(o)===2)return T4([s.wrap(c,20),"\\lhd",s.wrap(A,20)]);let ae=s.options.applyFunctionStyle(o,s.level);return T4(["\\operatorname{apply}",s.wrapString(s.serialize(m)+", "+s.serialize(["List",...s4(o)]),ae)])}},{latexTrigger:"\\lhd",kind:"infix",precedence:20,parse:"Apply"},{latexTrigger:"\\rhd",kind:"infix",precedence:20,parse:(s,o)=>["Apply",s.parseExpression({minPrec:21})??"Nothing",o]},{name:"EvaluateAt",openTrigger:".",closeTrigger:"|",kind:"matchfix",serialize:(s,o)=>{let c=j1(o,1);if(!c)return"";let m=s4(o).slice(1);if(I2(c)==="Function"){let A=s4(c).slice(1),ae=j1(c,1);if(I2(ae)==="Block"&&L4(ae)===1&&(ae=j1(ae,1)),A.length>0)return`\\left.\\left(${s.serialize(ae)}\\right)\\right|_{${A.map((qe,So)=>`${s.serialize(qe)}=${s.serialize(m[So])}`).join(", ")}}`}return`\\left.\\left(${s.serialize(c)}\\right)\\right|_{${m.map(A=>s.serialize(A)).join(", ")}}`}},{name:"Assign",latexTrigger:"\\coloneq",kind:"infix",associativity:"right",precedence:A5,serialize:(s,o)=>{let c=L3(j1(o,1));if(I2(j1(o,2))==="Function"){let m=j1(o,2),A=L3(j1(m,1)),ae=s4(m).slice(1);return T4([s.serialize(c),s.wrapString(ae.map(qe=>s.serialize(qe)).join(", "),s.options.applyFunctionStyle(o,s.level)),"\\coloneq",s.serialize(A)])}return T4([s.serialize(c),"\\coloneq",s.serialize(j1(o,2))])},parse:G8},{latexTrigger:"\\coloneqq",kind:"infix",associativity:"right",precedence:A5,parse:G8},{latexTrigger:"\\colonequals",kind:"infix",associativity:"right",precedence:A5,parse:G8},{latexTrigger:[":","="],kind:"infix",associativity:"right",precedence:A5,parse:G8},{name:"BaseForm",serialize:(s,o)=>{let c=Z4(j1(o,2))??NaN;if(isFinite(c)&&c>=2&&c<=36){let m=Z4(j1(o,1))??NaN;if(isFinite(m)&&Number.isInteger(m)){let A=Number(m).toString(c),ae=0;if(c===2||c===10?ae=4:c===16?ae=2:c>16&&(ae=4),ae>0){let qe=A;A="";for(let So=0;So<qe.length;So++)So>0&&So%ae===0&&(A="\\, "+A),A=qe[qe.length-So-1]+A}return`(\\text{${A}}_{${c}}`}}return"\\operatorname{BaseForm}("+s.serialize(j1(o,1))+", "+s.serialize(j1(o,2))+")"}},{name:"Sequence",serialize:Dv(" ")},{name:"InvisibleOperator",serialize:Dv("")},{name:"Delimiter",serialize:(s,o)=>{let c=s.options.groupStyle(o,s.level+1),m=j1(o,1),A={Set:"{,}",List:"[,]",Tuple:"(,)",Single:"(,)",Pair:"(,)",Triple:"(,)",Sequence:"(,)",String:'""'}[I2(m)],ae=A?m:["Sequence",m];if(A??="(,)",L4(o)>1){let p1=x4(j1(o,2));typeof p1=="string"&&p1.length<=3&&(A=p1)}let[qe,So,Hc]=["","",""];A.length===3?[qe,So,Hc]=A:A.length===2?[qe,Hc]=A:A.length===1&&(So=A);let mf=m?ae?Dv(So)(s,ae):s.serialize(m):"";return s.wrapString(mf,c,qe+Hc)}},{name:"Tuple",serialize:(s,o)=>T4(["(",Dv(",")(s,o),")"])},{name:"Pair",serialize:(s,o)=>T4(["(",Dv(",")(s,o),")"])},{name:"Triple",serialize:(s,o)=>T4(["(",Dv(",")(s,o),")"])},{name:"Single",serialize:(s,o)=>T4(["(",Dv(",")(s,o),")"])},{name:"Domain",serialize:(s,o)=>I2(o)==="Error"?s.serialize(o):`\\mathbf{${s.serialize(j1(o,1))}}`},{latexTrigger:["\\mathtip"],parse:s=>{let o=s.parseGroup();return s.parseGroup(),o}},{latexTrigger:["\\texttip"],parse:s=>{let o=s.parseGroup();return s.parseGroup(),o}},{latexTrigger:["\\error"],parse:s=>["Error",s.parseGroup()]},{name:"Error",serialize:(s,o)=>{let c=j1(o,1);if(x4(c)==="missing")return`\\error{${s.options.missingSymbol??"\\placeholder{}"}}`;let m=g_(s,o)||"\\blacksquare",A=I2(c)==="ErrorCode"?x4(j1(c,1)):x4(c);return A==="incompatible-type"?_4(j1(c,3))==="Undefined"?`\\mathtip{\\error{${m}}}{\\notin ${s.serialize(j1(c,2))}}`:`\\mathtip{\\error{${m}}}{\\in ${s.serialize(j1(c,3))}\\notin ${s.serialize(j1(c,2))}}`:typeof A=="string"?`\\error{${m}}`:`\\error{${m}}`}},{name:"ErrorCode",serialize:(s,o)=>{let c=x4(j1(o,1));return c==="missing"?s.options.missingSymbol??"\\placeholder{}":c==="unexpected-command"||c==="unexpected-operator"||c==="unexpected-token"||c==="invalid-symbol"||c==="unknown-environment"||c==="unexpected-base"||c==="incompatible-type"?"":`\\texttip{\\error{\\blacksquare}}{\\mathtt{${c}}}`}},{name:"FromLatex",serialize:(s,o)=>`\\texttt{${Q6(x4(j1(o,1)))}}`},{name:"Latex",serialize:(s,o)=>o===null?"":T4(w6(o,c=>x4(c)??s.serialize(c)))},{name:"LatexString",serialize:(s,o)=>o===null?"":T4(w6(o,c=>s.serialize(c)))},{name:"LatexTokens",serialize:dS},{name:"At",kind:"postfix",precedence:810,latexTrigger:["["],parse:F9("]"),serialize:(s,o)=>T4(["\\lbrack",Dv(", ")(s,o),"\\rbrack"])},{kind:"postfix",precedence:810,latexTrigger:["\\lbrack"],parse:F9("\\rbrack")},{kind:"postfix",precedence:810,latexTrigger:["\\left","\\lbrack"],parse:F9("\\right","\\rbrack")},{kind:"postfix",latexTrigger:["_"],parse:(s,o,c)=>{let m=s.parseGroup()??s.parseToken();return["Subscript",o,m]}},{name:"List",kind:"matchfix",openTrigger:"[",closeTrigger:"]",parse:L9,serialize:t8},{kind:"matchfix",openTrigger:"(",closeTrigger:")",parse:H8},{latexTrigger:[","],kind:"infix",precedence:20,parse:(s,o,c)=>{let m=e8(s,c,o,20,",");return m===null?null:["Delimiter",["Sequence",...m],{str:","}]}},{latexTrigger:[","],kind:"prefix",precedence:20,parse:(s,o)=>{let c=e8(s,o,null,20,",");return c===null?null:["Delimiter",["Sequence",...c],{str:","}]}},{name:"Range",latexTrigger:[".","."],kind:"infix",precedence:800,parse:r8,serialize:(s,o)=>{let c=s4(o);if(c.length===0)return"";if(c.length===1)return"1.."+s.serialize(j1(o,1));if(c.length===2)return s.wrap(j1(o,1),10)+".."+s.wrap(j1(o,2),10);if(c.length===3){let m=Z4(j1(o,3)),A=Z4(j1(o,1));return m!==null&&A!==null?s.wrap(j1(o,1),10)+".."+s.wrap(A+m,10)+".."+s.wrap(j1(o,2),10):s.wrap(j1(o,1),10)+"..("+(s.wrap(j1(o,1),a6)+"+"+s.wrap(j1(o,3),a6))+").."+s.wrap(j1(o,2),10)}return""}},{latexTrigger:[";"],kind:"infix",precedence:19,parse:(s,o,c)=>{let m=e8(s,c,o,19,";");return m===null?null:["Delimiter",["Sequence",...m],"';'"]}},{name:"String",latexTrigger:["\\text"],parse:s=>dy(s),serialize:(s,o)=>{let c=s4(o);return c.length===0?"\\text{}":T4(["\\text{",c.map(m=>s.serialize(m)).join(""),"}"])}},{name:"Subscript",latexTrigger:["_"],kind:"infix",serialize:(s,o)=>L4(o)===2?s.serialize(j1(o,1))+"_{"+s.serialize(j1(o,2))+"}":"_{"+s.serialize(j1(o,1))+"}"},{name:"Superplus",latexTrigger:["^","+"],kind:"postfix"},{name:"Subplus",latexTrigger:["_","+"],kind:"postfix"},{name:"Superminus",latexTrigger:["^","-"],kind:"postfix"},{name:"Subminus",latexTrigger:["_","-"],kind:"postfix"},{latexTrigger:["^","*"],kind:"postfix",parse:(s,o)=>["Superstar",o]},{latexTrigger:["_","*"],kind:"postfix",parse:(s,o)=>["Substar",o]},{name:"Substar",latexTrigger:["_","\\star"],kind:"postfix"},{name:"Superdagger",latexTrigger:["^","\\dagger"],kind:"postfix"},{latexTrigger:["^","\\dag"],kind:"postfix",parse:(s,o)=>["Superdagger",o]},{name:"Prime",latexTrigger:["^","\\prime"],kind:"postfix",parse:(s,o)=>nv(s,o,1),serialize:(s,o)=>{let c=Z4(j1(o,2))??1,m=s.serialize(j1(o,1));return c===1?m+"^\\prime":c===2?m+"^\\doubleprime":c===3?m+"^\\tripleprime":m+"^{("+s.serialize(j1(o,2))+")}"}},{latexTrigger:"^{\\prime\\prime}",kind:"postfix",parse:(s,o)=>nv(s,o,2)},{latexTrigger:"^{\\prime\\prime\\prime}",kind:"postfix",parse:(s,o)=>nv(s,o,3)},{latexTrigger:["^","\\doubleprime"],kind:"postfix",parse:(s,o)=>nv(s,o,2)},{latexTrigger:["^","\\tripleprime"],kind:"postfix",parse:(s,o)=>nv(s,o,3)},{latexTrigger:"'",kind:"postfix",precedence:810,parse:(s,o)=>nv(s,o,1)},{latexTrigger:"\\prime",kind:"postfix",precedence:810,parse:(s,o)=>nv(s,o,1)},{latexTrigger:"\\doubleprime",kind:"postfix",precedence:810,parse:(s,o)=>nv(s,o,2)},{latexTrigger:"\\tripleprime",kind:"postfix",precedence:810,parse:(s,o)=>nv(s,o,3)},{latexTrigger:["^","<{>","("],kind:"postfix",parse:(s,o,c)=>{let m=_4(o);if(!m||!s.getSymbolType(m).matches("function"))return null;s.addBoundary([")"]);let A=s.parseExpression(c);return!s.matchBoundary()||!s.match("<}>")?null:["Derivative",o,A]}},{name:"InverseFunction",latexTrigger:"^{-1",kind:"postfix",parse:(s,o)=>{let c=_4(o);if(!c||!s.getSymbolType(c).matches("function"))return null;let m=0;for(;!s.atEnd&&!s.match("<}>");)if(s.match("'"))m++;else if(s.match("\\prime"))m++;else if(s.match("\\doubleprime"))m+=2;else if(s.match("\\tripleprime"))m+=3;else return null;return m===1?["Derivative",["InverseFunction",o]]:m>0?["Derivative",["InverseFunction",o],m]:["InverseFunction",o]},serialize:(s,o)=>s.serialize(j1(o,1))+"^{-1}"},{name:"Derivative",serialize:(s,o)=>{let c=Z4(j1(o,2))??1,m=s.serialize(j1(o,1));return c===1?m+"^{\\prime}":c===2?m+"^{\\doubleprime}":c===3?m+"^{\\tripleprime}":m+"^{("+s.serialize(j1(o,2))+")}"}},{kind:"environment",name:"Which",symbolTrigger:"cases",parse:v_,serialize:(s,o)=>{let c=[],m=s4(o);if(m.length>0)for(let A=0;A<=m.length-2;A+=2){let ae=[];ae.push(s.serialize(m[A+1])),ae.push(s.serialize(m[A])),c.push(ae.join("&"))}return T4(["\\begin{cases}",c.join("\\\\"),"\\end{cases}"])}},{kind:"environment",symbolTrigger:"dcases",parse:v_},{kind:"environment",symbolTrigger:"rcases",parse:v_}];function dy(s,o){if(!s.match("<{>"))return"''";let c=[],m="",A=null,ae=()=>{A!==null&&m?c.push(["Annotated",`'${m}'`,G3(A)]):m&&c.push(`'${m}'`),m="",A=null};for(;!s.atEnd&&!s.match("<}>");)if(s.peek==="<{>")ae(),c.push(dy(s));else if(s.match("\\textbf"))ae(),c.push(dy(s,{fontWeight:"bold"}));else if(s.match("\\textmd"))ae(),c.push(dy(s,{fontStyle:"normal"}));else if(s.match("\\textup"))ae(),c.push(dy(s,{fontStyle:"normal"}));else if(s.match("\\textsl"))ae(),c.push(dy(s,{fontStyle:"italic"}));else if(s.match("\\textit"))ae(),c.push(dy(s,{fontStyle:"italic"}));else if(s.match("\\texttt"))ae(),c.push(dy(s,{fontFamily:"monospace"}));else if(s.match("\\textsf"))ae(),c.push(dy(s,{fontFamily:"sans-serif"}));else if(s.match("\\textcolor")){let So=s.index,Hc=s.parseStringGroup(),mf=s.parseExpression();Hc!==null&&mf!==null?c.push(["Annotated",mf,{dict:{color:Hc}}]):(s.index=So,m+="\\textcolor")}else if(s.match("\\color")){let So=s.parseStringGroup();So!==null&&(ae(),A={color:So})}else if(s.match("<space>"))m+=" ";else if(s.match("<$>")){let So=s.index,Hc=s.parseExpression()??"Nothing";s.skipSpace(),s.match("<$>")?c.push(Hc):(m+="$",s.index=So)}else if(s.match("<$$>")){let So=s.index,Hc=s.parseExpression()??"Nothing";s.skipSpace(),s.match("<$$>")?c.push(Hc):(m+="$$",s.index=So)}else{let So=s.parseChar()??s.nextToken();m+={"\\enskip":"","\\enspace":"","\\quad":"","\\qquad":"","\\space":"","\\ ":"","\\;":"","\\,":"","\\:":"","\\!":"","\\{":"{","\\}":"}","\\$":"$","\\&":"&","\\#":"#","\\%":"%","\\_":"_","\\textbackslash":"\\","\\textasciitilde":"~","\\textasciicircum":"^","\\textless":"<","\\textgreater":">","\\textbar":"|","\\textunderscore":"_","\\textbraceleft":"{","\\textbraceright":"}","\\textasciigrave":"`","\\textquotesingle":"'","\\textquotedblleft":"","\\textquotedblright":"","\\textquotedbl":'"',"\\textquoteleft":"","\\textquoteright":"","\\textbullet":"","\\textdagger":"","\\textdaggerdbl":"","\\textsection":"","\\textparagraph":"","\\textperiodcentered":"","\\textellipsis":"","\\textemdash":"","\\textendash":"","\\textregistered":"","\\texttrademark":"","\\textdegree":""}[So]??So}ae();let qe;return c.length===1?qe=c[0]:c.every(So=>x4(So)!==null)?qe="'"+c.map(So=>x4(So)).join()+"'":qe=["Text",...c],o?["Annotated",qe,G3(o)]:qe}function dS(s,o){return o===null?"":T4(w6(o,c=>{let m=x4(c);return m===null?s.serialize(c):m==="<{>"?"{":m==="<}>"?"}":m==="<$>"?"$":m==="<$$>"?"$$":m==="<space>"?" ":m}))}function Q6(s){return s===null?"":s.replace(/[{}\[\]\\:\-\$%]/g,o=>({"{":"\\lbrace ","}":"\\rbrace ","[":"\\lbrack ","]":"\\rbrack ",":":"\\colon ","\\":"\\backslash "})[o]??"\\"+o)}function g_(s,o){let c=j1(o,2);return c?I2(c)==="LatexString"?x4(j1(c,1))??"":I2(c)==="Hold"?s.serialize(j1(c,1)):s.serialize(c):""}function nv(s,o,c){let m=I2(o);if(m==="Derivative"||m==="Prime"){let ae=Z4(j1(o,2))??1;return[m,t3(j1(o,1)),ae+c]}let A=_4(o);return A&&s.getSymbolType(A).matches("function")||I2(o)?c===1?["Derivative",o]:["Derivative",o,c]:c===1?["Prime",t3(o)]:["Prime",t3(o),c]}function H8(s,o){if(i3(o))return["Delimiter"];let c=I2(o);if(c==="Delimiter"&&j1(o,2)!==null){let m=x4(j1(o,2));if(m?.length===1)return["Delimiter",j1(o,1)??"Nothing",{str:`(${m})`}]}return c==="Matrix"&&(x4(j1(o,2))??"..")===".."?["Matrix",j1(o,1)]:["Delimiter",o]}function L9(s,o){if(i3(o))return["List"];let c=I2(o);if(c==="Range"||c==="Linspace")return o;if(c==="Sequence")return["List",...s4(o)];if(c==="Delimiter"){let m=x4(j1(o,2))??"...";if(m===";"||m===".;.")return["List",...(s4(j1(o,1))??[]).map(A=>L9(s,A))];if(m===","||m===".,.")return o=j1(o,1),I2(o)==="Sequence"?["List",...s4(o)]:["List",o??"Nothing"]}return["List",o]}function t8(s,o){return L4(o)>1&&s4(o).every(c=>{let m=I2(c);return Y6(m)||vv(m)})?T4(["\\begin{cases}",Dv("\\\\")(s,o),"\\end{cases}"]):T4(["\\bigl\\lbrack",Dv(", ")(s,o),"\\bigr\\rbrack"])}function r8(s,o){if(o===null)return null;let c=s.parseExpression({minPrec:270});if(c===null)return null;if(I2(c)==="Range"){let m=j1(c,1),A=j1(c,2);return m&&A?["Range",o,A,["Subtract",m,o]]:null}return["Range",o,c]}var O9={"(":"(",")":")","[":"\\lbrack","]":"\\rbrack","":"\\llbrack","":"\\rrbrack","{":"\\lbrace","}":"\\rbrace","<":"\\langle",">":"\\rangle","":"\\Vert","\\":"\\backslash","":"\\lceil","":"\\rceil","":"\\lfloor","":"\\rfloor","":"\\ulcorner","":"\\urcorner","":"\\llcorner","":"\\lrcorner","":"\\lmoustache","":"\\rmoustache"};function G8(s,o){if(I2(o)==="InvisibleOperator"&&L4(o)===2&&I2(j1(o,2))==="Delimiter"){let A=_4(j1(o,1));if(!A)return null;let ae=s.parseExpression({minPrec:0});if(ae===null)return null;let qe=j1(j1(o,2),1),So=[];return I2(qe)==="Sequence"?So=[...s4(qe)]:qe&&(So=[qe]),["Assign",A,["Function",ae,...So??[]]]}if(I2(o)==="Subscript"&&_4(j1(o,1))){let A=_4(j1(o,1));if(!A)return null;let ae=s.parseExpression({minPrec:0});if(ae===null)return null;let qe=j1(o,2);return x4(qe)!==null?["Assign",o,ae]:_4(qe)?["Assign",A,["Function",ae,qe]]:["Assign",o,ae]}let c=I2(o);if(c){let A=s4(o),ae=s.parseExpression({minPrec:0});return ae===null?null:["Assign",c,["Function",ae,...A]]}if(!_4(o))return null;let m=s.parseExpression({minPrec:0});return m===null?null:["Assign",o,m]}function v_(s){let o=s.parseTabular();if(!o)return["List"];if(o.every(m=>{if(m.length!==1)return!1;let A=I2(m[0]);return vv(A)||Y6(A)}))return["List",...o.map(m=>m[0])];let c=[];for(let m of o)if(m.length===1)c.push("True"),c.push(m[0]);else if(m.length===2){let A=x4(m[1]);c.push(A?"True":x3(m[1])??"True"),c.push(m[0])}return["Which",...c]}function F9(...s){return(o,c)=>{if(!_4(c)&&I2(c)!=="List")return null;let m=null;return s.length===0&&(m=o.parseGroup()),m??=o.parseExpression({minPrec:0}),m===null||s.length>0&&!o.matchAll(s)||x4(m)!==null?null:(I2(m)==="Delimiter"&&(m=j1(m,1)??"Nothing"),I2(m)==="Sequence"?["At",c,...s4(m)]:["At",c,m])}}var w7=[{name:"Matrix",serialize:(s,o)=>{let c=s4(j1(o,1));return y_(s,c,x4(j1(o,2)),x4(j1(o,3)))}},{name:"Vector",serialize:(s,o)=>{let c=s4(o);return y_(s,c.map(m=>["List",m]),x4(j1(o,2)),x4(j1(o,3)))}},{kind:"environment",symbolTrigger:"pmatrix",parse:s=>{let o=yv(s),[c,m]=Lv(s);return o?[c,m,{str:"()"},{str:o}]:[c,m]}},{kind:"environment",symbolTrigger:"bmatrix",parse:s=>{let o=yv(s),[c,m]=Lv(s);return o?[c,m,{str:"[]"},{str:o}]:[c,m,{str:"[]"}]}},{kind:"environment",symbolTrigger:"Bmatrix",parse:s=>{let o=yv(s),[c,m]=Lv(s);return o?[c,m,{str:"{}"},{str:o}]:[c,m,{str:"{}"}]}},{kind:"environment",symbolTrigger:"vmatrix",parse:s=>{let o=yv(s),[c,m]=Lv(s);return o?[c,m,{str:"||"},{str:o}]:[c,m,{str:"||"}]}},{kind:"environment",symbolTrigger:"Vmatrix",parse:s=>{let o=yv(s),[c,m]=Lv(s);return o?[c,m,{str:""},{str:o}]:[c,m,{str:""}]}},{kind:"environment",symbolTrigger:"smallmatrix",parse:s=>{let o=yv(s),[c,m]=Lv(s);return o?[c,m,{str:"()"},{str:o}]:[c,m]}},{kind:"environment",symbolTrigger:"array",parse:s=>{let o=yv(s,!1),[c,m]=Lv(s);return o?[c,m,{str:".."},{str:o}]:[c,m,{str:".."}]}},{kind:"environment",symbolTrigger:"matrix",parse:s=>{let o=yv(s),[c,m]=Lv(s);return o?[c,m,{str:".."},{str:o}]:[c,m,{str:".."}]}},{kind:"environment",symbolTrigger:"matrix*",parse:s=>{let o=yv(s),[c,m]=Lv(s);return o?[c,m,{str:".."},{str:o}]:[c,m,{str:".."}]}},{name:"ConjugateTranspose",kind:"postfix",latexTrigger:["^","\\star"]},{kind:"postfix",latexTrigger:["^","\\H"],parse:"ConjugateTranspose"},{kind:"postfix",latexTrigger:["^","\\dagger"],parse:(s,o)=>["ConjugateTranspose",o]},{kind:"postfix",latexTrigger:["^","\\ast"],parse:(s,o)=>["ConjugateTranspose",o]},{kind:"postfix",latexTrigger:["^","\\top"],parse:(s,o)=>["Transpose",o]},{kind:"postfix",latexTrigger:["^","\\intercal"],parse:(s,o)=>["Transpose",o]},{name:"Transpose",kind:"postfix",latexTrigger:["^","T"]},{name:"PseudoInverse",kind:"postfix",latexTrigger:["^","+"]},{name:"Trace",kind:"function",symbolTrigger:"tr"},{name:"Determinant",kind:"function",symbolTrigger:"det"}];function Lv(s){let o=s.parseTabular();return o?["Matrix",["List",...o.map(c=>["List",...c])]]:["",null]}function yv(s,o=!0){let c=s.parseStringGroup(o)?.trim();if(!c)return"";let m="";for(let A of c)A==="c"&&(m+="="),A==="l"&&(m+="<"),A==="r"&&(m+=">"),A==="|"&&(m+="|"),A===":"&&(m+=":");return m}function y_(s,o,c,m){c??="()";let[A,ae]=["",""];typeof c=="string"&&c.length===2&&([A,ae]=c);let qe="";if(m)for(let p1 of m)p1==="<"?qe+="l":p1===">"?qe+="r":p1==="="?qe+="c":p1==="|"?qe+="|":p1===":"&&(qe+=":");let So=[];for(let p1 of o??[]){let M1=[];for(let R1 of s4(p1))M1.push(s.serialize(R1));So.push(M1.join(" & "))}let Hc=So.join(`\\\\
`),mf=qe.length>0?`[${qe}]`:"";return T4(A==="("&&ae===")"?["\\begin{pmatrix}",mf,Hc,"\\end{pmatrix}"]:A==="["&&ae==="]"?["\\begin{bmatrix}",mf,Hc,"\\end{bmatrix}"]:A==="{"&&ae==="}"?["\\begin{Bmatrix}",mf,Hc,"\\end{Bmatrix}"]:A==="|"&&ae==="|"?["\\begin{vmatrix}",mf,Hc,"\\end{vmatrix}"]:A===""&&ae===""?["\\begin{Vmatrix}",mf,Hc,"\\end{Vmatrix}"]:A==="{"&&ae==="."?["\\begin{dcases}",mf,Hc,"\\end{dcases}"]:A==="."&&ae==="}"?["\\begin{rcases}",mf,Hc,"\\end{rcases}"]:qe||A!=="."||ae!=="."?["\\left",O9[A]??A,"\\begin{array}",`{${qe}}`,Hc,"\\end{array}","\\right",O9[ae]??ae]:["\\begin{matrix}",Hc,"\\end{matrix}"])}var K8=[{name:"True",kind:"symbol",latexTrigger:["\\top"]},{kind:"symbol",latexTrigger:"\\mathrm{True}",parse:"True"},{kind:"symbol",latexTrigger:"\\operatorname{True}",parse:"True"},{kind:"symbol",latexTrigger:"\\mathsf{T}",parse:"True"},{name:"False",kind:"symbol",latexTrigger:["\\bot"]},{kind:"symbol",latexTrigger:"\\operatorname{False}",parse:"False"},{kind:"symbol",latexTrigger:"\\mathsf{F}",parse:"False"},{name:"And",kind:"infix",latexTrigger:["\\land"],precedence:317},{kind:"infix",latexTrigger:["\\wedge"],parse:"And",precedence:317},{kind:"infix",latexTrigger:"\\&",parse:"And",precedence:317},{kind:"infix",latexTrigger:"\\operatorname{and}",parse:"And",precedence:317},{name:"Or",kind:"infix",latexTrigger:["\\lor"],precedence:310},{kind:"infix",latexTrigger:["\\vee"],parse:"Or",precedence:310},{kind:"infix",latexTrigger:"\\parallel",parse:"Or",precedence:310},{kind:"infix",latexTrigger:"\\operatorname{or}",parse:"Or",precedence:310},{name:"Xor",kind:"infix",latexTrigger:["\\veebar"],precedence:315},{name:"Not",kind:"prefix",latexTrigger:["\\lnot"],precedence:880},{kind:"prefix",latexTrigger:["\\neg"],parse:"Not",precedence:880},{name:"Nand",kind:"infix",latexTrigger:["\\barwedge"],precedence:315},{name:"Nor",kind:"infix",latexTrigger:[""],precedence:315},{kind:"function",symbolTrigger:"and",parse:"And"},{kind:"function",symbolTrigger:"or",parse:"Or"},{kind:"function",symbolTrigger:"not",parse:"Not"},{name:"Implies",kind:"infix",precedence:220,associativity:"right",latexTrigger:["\\implies"],serialize:"\\implies"},{latexTrigger:["\\Rightarrow"],kind:"infix",precedence:220,associativity:"right",parse:"Implies"},{name:"Equivalent",latexTrigger:["\\iff"],kind:"infix",associativity:"right",precedence:219},{latexTrigger:["\\Leftrightarrow"],kind:"infix",associativity:"right",precedence:219,parse:"Equivalent"},{latexTrigger:["\\equiv"],kind:"infix",associativity:"right",precedence:219,parse:(s,o,c)=>{let m=s.parseExpression({...c,minPrec:219}),A=s.index,ae=s.parseExpression({...c,minPrec:219});return ae!==null&&I2(ae)==="Mod"?["Congruent",o,m,t3(j1(ae,1))]:(s.index=A,["Equivalent",o,t3(m)])}},{name:"Proves",kind:"infix",latexTrigger:["\\vdash"],precedence:220,associativity:"right",serialize:"\\vdash"},{name:"Entails",kind:"infix",latexTrigger:["\\vDash"],precedence:220,associativity:"right",serialize:"\\vDash"},{name:"Satisfies",kind:"infix",latexTrigger:["\\models"],precedence:220,associativity:"right",serialize:"\\models"},{name:"ForAll",kind:"prefix",latexTrigger:["\\forall"],precedence:200,serialize:"\\forall",parse:i8("ForAll")},{name:"Exists",kind:"prefix",latexTrigger:["\\exists"],precedence:200,serialize:"\\exists",parse:i8("Exists")},{name:"ExistsUnique",kind:"prefix",latexTrigger:["\\exists","!"],precedence:200,serialize:"\\exists!",parse:i8("ExistsUnique")},{name:"NotForAll",kind:"prefix",latexTrigger:["\\lnot","\\forall"],precedence:200,serialize:"\\lnot\\forall",parse:i8("NotForAll")},{name:"NotExists",kind:"prefix",latexTrigger:["\\lnot","\\exists"],precedence:200,serialize:"\\lnot\\exists",parse:i8("NotExists")},{name:"KroneckerDelta",kind:"prefix",latexTrigger:["\\delta","_"],precedence:200,serialize:(s,o)=>{let c=s4(o);return c.length===0?"\\delta":c.every(m=>_4(m))?`\\delta_{${c.map(m=>s.serialize(m)).join("")}}`:`\\delta_{${c.map(m=>s.serialize(m)).join(", ")}}`},parse:s=>{let o=s.parseGroup();if(o===null){let m=s.parseToken();return m?["KroneckerDelta",m]:null}let c=X6(o);return c&&c.length<=2?["KroneckerDelta",...c]:I2(o)==="InvisibleOperator"?["KroneckerDelta",...s4(o)]:o!==null?["KroneckerDelta",o]:null}},{name:"Boole",kind:"matchfix",openTrigger:"[",closeTrigger:"]",parse:(s,o)=>{let c=I2(o);return!c||!J7.some(m=>m.name===c)?null:["Boole",o]}},{kind:"matchfix",openTrigger:"\\llbracket",closeTrigger:"\\rrbracket",parse:(s,o)=>{let c=I2(o);return!c||!J7.some(m=>m.name===c)?null:["Boole",o]}}];function i8(s){return(o,c)=>{let m=o.index,A=o.parseSymbol(c);if(A){if(o.skipSpace(),o.match(",")||o.match("\\mid")||o.match(".")||o.match(":")||o.match("\\colon")){let So=o.parseExpression(c);return[s,A,t3(So)]}let qe=o.parseEnclosure();if(qe)return[s,A,t3(qe)]}o.index=m;let ae=o.parseExpression(c);if(ae===null)return null;if(o.skipSpace(),o.matchAny([",","\\mid",":","\\colon"])){let qe=o.parseExpression(c);return[s,ae,t3(qe)]}if(o.match("(")){let qe=o.parseExpression(c);return o.match(")")?[s,ae,t3(qe)]:null}return null}}function v5(s){return o=>{let c=o.parseGroup();return c===null?[s]:[s,c]}}var b_=[{name:"Overscript",latexTrigger:["\\overset"],kind:"infix",precedence:700},{name:"Underscript",latexTrigger:["\\underset"],kind:"infix",precedence:700},{name:"Increment",latexTrigger:["+","+"],kind:"postfix",precedence:880,parse:(s,o)=>_4(o)===null?null:["Decrement",o]},{name:"Decrement",latexTrigger:["-","-"],kind:"postfix",precedence:880,parse:(s,o)=>_4(o)===null?null:["Decrement",o]},{name:"PreIncrement",latexTrigger:["+","+"],kind:"prefix",precedence:880,parse:(s,o)=>{let c=s.parseExpression(o);return _4(c)===null?null:["PreIncrement",c]}},{name:"PreDecrement",latexTrigger:["-","-"],kind:"prefix",precedence:880,parse:(s,o)=>{let c=s.parseExpression(o);return _4(c)===null?null:["PreDecrement",c]}},{name:"Ring",latexTrigger:["\\circ"],kind:"infix",precedence:265},{name:"StringJoin",latexTrigger:["\\lt","\\gt"],kind:"infix",precedence:780},{name:"Starstar",latexTrigger:["\\star","\\star"],kind:"infix",precedence:780},{name:"PartialDerivative",latexTrigger:["\\partial"],kind:"prefix",parse:s=>{let o=!1,c="Nothing",m="Nothing";for(;!o;)s.skipSpace(),s.match("_")?m=s.parseGroup()??s.parseToken():s.match("^")?c=s.parseGroup()??s.parseToken():o=!0;let A=X6(m);if(A&&(m=["List",...A]),m===null||c===null)return null;let ae=s.parseGroup()??"Nothing";if(!i3(ae)){let qe=s.parseArguments()??["Nothing"];ae=[ae,...qe]}return["PartialDerivative",ae,m,c]},serialize:(s,o)=>{let c="\\partial",m=j1(o,1),A=j1(o,2),ae=j1(o,3);return A!==null&&A!=="Nothing"&&(I2(A)==="List"?c+="_{"+s.serialize(["Sequence",...s4(A)])+"}":c+="_{"+s.serialize(A)+"}"),ae!==null&&ae!=="Nothing"&&(c+="^{"+s.serialize(ae)+"}"),m!==null&&m!=="Nothing"&&(c+=s.serialize(m)),c},precedence:740},{name:"OverBar",latexTrigger:["\\overline"],parse:v5("OverBar")},{name:"UnderBar",latexTrigger:["\\underline"],parse:v5("UnderBar")},{name:"OverVector",latexTrigger:["\\vec"],parse:v5("OverVector")},{name:"OverTilde",latexTrigger:["\\tilde"],parse:v5("OverTilde")},{name:"OverHat",latexTrigger:["\\hat"],parse:v5("OverHat")},{name:"OverRightArrow",latexTrigger:["\\overrightarrow"],parse:v5("OverRightArrow")},{name:"OverLeftArrow",latexTrigger:["\\overleftarrow"],parse:v5("OverLeftArrow")},{name:"OverRightDoubleArrow",latexTrigger:["\\Overrightarrow"],parse:v5("OverRightDoubleArrow")},{name:"OverLeftHarpoon",latexTrigger:["\\overleftharpoon"],parse:v5("OverLeftHarpoon")},{name:"OverRightHarpoon",latexTrigger:["\\overrightharpoon"],parse:v5("OverRightHarpoon")},{name:"OverLeftRightArrow",latexTrigger:["\\overleftrightarrow"],parse:v5("OverLeftRightArrow")},{name:"OverBrace",latexTrigger:["\\overbrace"],parse:v5("OverBrace")},{name:"OverLineSegment",latexTrigger:["\\overlinesegment"],parse:v5("OverLineSegment")},{name:"OverGroup",latexTrigger:["\\overgroup"],parse:v5("OverGroup")},{latexTrigger:["\\textcolor"],parse:s=>{let o=s.index,c=s.parseStringGroup(),m=s.parseGroup();return c!==null?m!==null?["Annotated",m,{dict:{color:c}}]:"Nothing":(s.index=o,"Nothing")}},{latexTrigger:["\\displaystyle"],parse:()=>"Nothing"},{latexTrigger:["\\textstyle"],parse:()=>"Nothing"},{latexTrigger:["\\scriptstyle"],parse:()=>"Nothing"},{latexTrigger:["\\scriptscriptstyle"],parse:()=>"Nothing"},{latexTrigger:["\\tiny"],parse:()=>"Nothing"},{latexTrigger:["\\scriptsize"],parse:()=>"Nothing"},{latexTrigger:["\\footnotesize"],parse:()=>"Nothing"},{latexTrigger:["\\small"],parse:()=>"Nothing"},{latexTrigger:["\\normalsize"],parse:()=>"Nothing"},{latexTrigger:["\\large"],parse:()=>"Nothing"},{latexTrigger:["\\Large"],parse:()=>"Nothing"},{latexTrigger:["\\LARGE"],parse:()=>"Nothing"},{latexTrigger:["\\huge"],parse:()=>"Nothing"},{latexTrigger:["\\Huge"],parse:()=>"Nothing"},{name:"Annotated",serialize:(s,o)=>{let c=s.serialize(j1(o,1)),m=u6(j1(o,2));if(m===null)return c;x4(m.dict.mathStyle)==="normal"?c=T4(["{\\displaystyle",c,"}"]):x4(m.dict.mathStyle)==="compact"&&(c=T4(["{\\textstyle",c,"}"]));let A=Z4(m.dict.size);return A!==null&&A>=1&&A<=10&&(c=T4(["{",{1:"\\tiny",2:"\\scriptsize",3:"\\footnotesize",4:"\\small",5:"\\normalsize",6:"\\large",7:"\\Large",8:"\\LARGE",9:"\\huge",10:"\\Huge"}[A],c,"}"])),c}},{latexTrigger:["\\!"],parse:()=>["HorizontalSpacing",-3]},{latexTrigger:["\\ "],parse:()=>["HorizontalSpacing",6]},{latexTrigger:["\\:"],parse:()=>["HorizontalSpacing",4]},{latexTrigger:["\\enskip"],parse:()=>["HorizontalSpacing",9]},{latexTrigger:["\\quad"],parse:()=>["HorizontalSpacing",18]},{latexTrigger:["\\qquad"],parse:()=>["HorizontalSpacing",36]},{latexTrigger:["\\,"],parse:()=>["HorizontalSpacing",3]},{latexTrigger:["\\;"],parse:()=>["HorizontalSpacing",5]},{latexTrigger:["\\enspace"],parse:()=>["HorizontalSpacing",9]},{latexTrigger:["\\phantom"],parse:s=>(s.parseGroup(),"Nothing")},{latexTrigger:["\\vphantom"],parse:s=>(s.parseGroup(),"Nothing")},{latexTrigger:["\\hphantom"],parse:s=>(s.parseGroup(),"Nothing")},{latexTrigger:["\\placeholder"],parse:s=>(s.parseOptionalGroup(),s.parseGroup()??"Nothing")},{latexTrigger:["\\smash"],parse:s=>(s.parseGroup(),"Nothing")},{latexTrigger:["\\strut"],parse:s=>"Nothing"},{latexTrigger:["\\mathstrut"],parse:s=>"Nothing"},{name:"HorizontalSpacing",serialize:(s,o)=>{if(j1(o,2)!==null)return s.serialize(j1(o,1));let c=Z4(j1(o,1));return c===null?"":{"-3":"\\!",6:"\\ ",3:"\\,",4:"\\:",5:"\\;",9:"\\enspace",18:"\\quad",36:"\\qquad"}[c]??""}}];function B4(s){return(o,c)=>{let m={"\\arcsin":"Arcsin","\\arccos":"Arccos","\\arctan":"Arctan","\\arctg":"Arctan","\\arcctg":"Arccot","\\arcsec":"Arcsec","\\arccsc":"Arccsc","\\arsinh":"Arsinh","\\arcosh":"Arccosh","\\arccosh":"Arccosh","\\artanh":"Arctanh","\\arctanh":"Arctanh","\\arsech":"Arcsech","\\arcsech":"Arcsech","\\arcsch":"Arccsch","\\arccsch":"Arccsch","\\ch":"Cosh","\\cos":"Cos","\\cosh":"Csch","\\cosec":"Csc","\\cot":"Cot","\\cotg":"Cot","\\ctg":"Cot","\\csc":"Csc","\\csch":"Csch","\\coth":"Coth","\\cth":"Coth","\\sec":"Sec","\\sech":"Sech","\\sin":"Sin","\\sinh":"Sinh","\\sh":"Sinh","\\tan":"Tan","\\tg":"Tan","\\tanh":"Tanh","\\th":"Tanh"},A=m[s??""]??s??"";if(o.atTerminator(c))return A;let ae=A;do{let mf=o.parsePostfixOperator(ae,c);if(mf===null)break;ae=mf}while(!0);o.skipSpace();let qe=null;o.match("^")&&(qe=o.parseGroup()??o.parseToken()),o.skipSpace();let So=o.parseArguments("implicit",{minPrec:gv,condition:mf=>m[mf.peek]||(c?.condition?.(mf)??!1)}),Hc=So===null?ae:typeof ae=="string"?[ae,...So]:["Apply",ae,...So];return qe===null?Hc:["Power",Hc,qe]}}var V9=[{name:"Arcsin",latexTrigger:["\\arcsin"],parse:B4("Arcsin")},{name:"Arccos",latexTrigger:["\\arccos"],parse:B4("Arccos")},{name:"Arctan",latexTrigger:["\\arctan"],parse:B4("Arctan")},{latexTrigger:["\\arctg"],parse:B4("Arctan")},{symbolTrigger:"arctg",parse:B4("Arctan")},{name:"Arccot",symbolTrigger:"arcctg",parse:B4("Arccot")},{latexTrigger:["\\arcctg"],parse:B4("Arccot")},{name:"Arccoth",symbolTrigger:"arccoth",parse:B4("Arccoth")},{symbolTrigger:"arcoth",parse:B4("Arccoth")},{symbolTrigger:"arccoth",parse:B4("Arccoth")},{latexTrigger:["\\arccoth"],parse:B4("Arccoth")},{name:"Arcsec",symbolTrigger:"arcsec",parse:B4("Arcsec")},{latexTrigger:["\\arcsec"],parse:B4("Arcsec")},{name:"Arccsc",symbolTrigger:"arccsc",parse:B4("Arccsc")},{latexTrigger:["\\arccsc"],parse:B4("Arccsc")},{name:"Arcsinh",symbolTrigger:"arcsinh",parse:B4("Arcsinh")},{latexTrigger:["\\arsinh"],parse:B4("Arcsinh")},{latexTrigger:["\\arcsinh"],parse:B4("Arcsinh")},{name:"Arccosh",symbolTrigger:"arccosh",parse:B4("Arccosh")},{latexTrigger:"\\arccosh",parse:B4("Arccosh")},{latexTrigger:"\\arcosh",parse:B4("Arccosh")},{symbolTrigger:"arcosh",parse:B4("Arccosh")},{name:"Arctanh",symbolTrigger:"arctanh",parse:B4("Arctanh")},{symbolTrigger:"artanh",parse:B4("Arctanh")},{latexTrigger:"\\artanh",parse:B4("Arctanh")},{latexTrigger:["\\arctanh"],parse:B4("Arctanh")},{symbolTrigger:"artanh",parse:B4("Arctanh")},{name:"Arcsech",symbolTrigger:"arcsech",parse:B4("Arcsech")},{latexTrigger:["\\arcsech"],parse:B4("Arcsech")},{latexTrigger:["\\arsech"],parse:B4("Arcsech")},{name:"Arccsch",symbolTrigger:"arccsch",parse:B4("Arccsch")},{latexTrigger:["\\arccsch"],parse:B4("Arccsch")},{latexTrigger:["\\arcsch"],parse:B4("Arccsch")},{name:"Cosec",symbolTrigger:"cosec",parse:B4("Cosec")},{latexTrigger:["\\cosec"],parse:B4("Cosec")},{name:"Cosh",latexTrigger:["\\cosh"],parse:B4("Cosh")},{latexTrigger:["\\ch"],parse:B4("Cosh")},{name:"Cot",latexTrigger:["\\cot"],parse:B4("Cot")},{latexTrigger:["\\cotg"],parse:B4("Cot")},{latexTrigger:["\\ctg"],parse:B4("Cot")},{name:"Csc",latexTrigger:["\\csc"],parse:B4("Csc")},{name:"Csch",latexTrigger:["\\csch"],parse:B4("Csch")},{name:"Coth",latexTrigger:["\\coth"],parse:B4("Coth")},{latexTrigger:["\\cth"],parse:B4("Coth")},{symbolTrigger:"cth",parse:B4("Coth")},{latexTrigger:["\\coth"],parse:B4("Coth")},{name:"Sec",latexTrigger:["\\sec"],parse:B4("Sec")},{name:"Sech",symbolTrigger:"sech",parse:B4("Sech")},{latexTrigger:["\\sech"],parse:B4("Sech")},{name:"Sinh",latexTrigger:["\\sinh"],parse:B4("Sinh")},{latexTrigger:["\\sh"],parse:B4("Sinh")},{name:"Tan",latexTrigger:["\\tan"],parse:B4("Tan")},{latexTrigger:["\\tg"],parse:B4("Tan")},{name:"Tanh",latexTrigger:["\\tanh"],parse:B4("Tanh")},{latexTrigger:["\\th"],parse:B4("Tanh")},{name:"Cos",latexTrigger:["\\cos"],parse:B4("Cos")},{name:"Sin",latexTrigger:["\\sin"],parse:B4("Sin")}],jx=[{name:"AlgebraicNumbers",latexTrigger:"\\overline\\Q"},{latexTrigger:"\\bar\\Q",parse:"AlgebraicNumbers"},{name:"ComplexNumbers",latexTrigger:["\\C"]},{latexTrigger:"\\mathbb{C}",parse:"ComplexNumbers"},{name:"ImaginaryNumbers",latexTrigger:["\\imaginaryI","\\R"]},{name:"EmptySet",latexTrigger:["\\emptyset"]},{latexTrigger:["\\varnothing"],parse:"EmptySet"},{name:"Integers",latexTrigger:["\\Z"]},{latexTrigger:"\\mathbb{Z}",parse:"Integers"},{name:"RationalNumbers",latexTrigger:["\\Q"]},{latexTrigger:"\\mathbb{Q}",parse:"RationalNumbers"},{name:"RealNumbers",latexTrigger:["\\R"]},{latexTrigger:"\\mathbb{R}",parse:"RealNumbers"},{name:"TranscendentalNumbers",latexTrigger:"\\R-\\bar\\Q"},{latexTrigger:"\\R\\backslash\\bar\\Q",parse:"TranscendentalNumbers"},{name:"NegativeNumbers",latexTrigger:"\\R_{<0}"},{latexTrigger:"\\R^-",parse:"NegativeNumbers"},{latexTrigger:"\\R^{-}",parse:"NegativeNumbers"},{latexTrigger:"\\R^-",parse:"NegativeNumbers"},{latexTrigger:"\\R_-",parse:"NegativeNumbers"},{latexTrigger:"\\R_{-}",parse:"NegativeNumbers"},{latexTrigger:"\\R^{\\lt}",parse:"NegativeNumbers"},{latexTrigger:"\\R^{<}",parse:"NegativeNumbers"},{latexTrigger:"\\R^{\\lt0}",parse:"NegativeNumbers"},{latexTrigger:"\\R^{<0}",parse:"NegativeNumbers"},{name:"NonPositiveNumbers",latexTrigger:"\\R_{\\le0}"},{latexTrigger:"\\R^{\\leq0}",parse:"NonPositiveNumbers"},{latexTrigger:"\\R^{-0}",parse:"NonPositiveNumbers"},{latexTrigger:"\\R^{\\leq}",parse:"NonPositiveNumbers"},{latexTrigger:"\\R^{0-}",parse:"NonPositiveNumbers"},{name:"PositiveNumbers",latexTrigger:"\\R_{>0}"},{latexTrigger:"\\R^+",parse:"PositiveNumbers"},{latexTrigger:"\\R^{+}",parse:"PositiveNumbers"},{latexTrigger:"\\R_+",parse:"PositiveNumbers"},{latexTrigger:"\\R_{+}",parse:"PositiveNumbers"},{latexTrigger:"\\R^{\\gt}",parse:"PositiveNumbers"},{latexTrigger:"\\R^{\\gt 0}",parse:"PositiveNumbers"},{latexTrigger:"\\R^{>}",parse:"PositiveNumbers"},{latexTrigger:"\\R^{>0}",parse:"PositiveNumbers"},{name:"NonNegativeNumbers",latexTrigger:"\\R_{\\geq0}"},{latexTrigger:"\\R^{0+}",parse:"NonNegativeNumbers"},{latexTrigger:"\\R^{\\geq}",parse:"NonNegativeNumbers"},{name:"ExtendedRealNumbers",latexTrigger:"\\overline\\R"},{latexTrigger:"\\bar\\R",parse:"ExtendedRealNumbers"},{name:"NegativeIntegers",latexTrigger:"\\Z_{<0}"},{latexTrigger:"\\Z_{\\lt0}",parse:"NegativeIntegers"},{latexTrigger:"\\Z^-",parse:"NegativeIntegers"},{latexTrigger:"\\Z^{-}",parse:"NegativeIntegers"},{latexTrigger:"\\Z_-",parse:"NegativeIntegers"},{latexTrigger:"\\Z_{-}",parse:"NegativeIntegers"},{latexTrigger:"\\Z^{\\lt}",parse:"NegativeIntegers"},{name:"NonPositiveIntegers",latexTrigger:"\\Z_{\\le0}"},{latexTrigger:"\\Z_{\\leq0}",parse:"NonPositiveIntegers"},{latexTrigger:"\\Z_{<0}",parse:"NonPositiveIntegers"},{name:"PositiveIntegers",latexTrigger:"\\N^*"},{latexTrigger:"\\Z_{>0}",parse:"PositiveIntegers"},{latexTrigger:"\\Z_{\\gt0}",parse:"PositiveIntegers"},{latexTrigger:"\\Z^{+}",parse:"PositiveIntegers"},{latexTrigger:"\\Z_+",parse:"PositiveIntegers"},{latexTrigger:"\\Z_{+}",parse:"PositiveIntegers"},{latexTrigger:"\\Z^{\\gt}",parse:"PositiveIntegers"},{latexTrigger:"\\Z^{\\gt0}",parse:"PositiveIntegers"},{latexTrigger:"\\N^+",parse:"PositiveIntegers"},{latexTrigger:"\\N^{+}",parse:"PositiveIntegers"},{latexTrigger:"\\N^*",parse:"PositiveIntegers"},{latexTrigger:"\\N^{*}",parse:"PositiveIntegers"},{latexTrigger:"\\N^\\star",parse:"PositiveIntegers"},{latexTrigger:"\\N^{\\star}",parse:"PositiveIntegers"},{latexTrigger:"\\N_1",parse:"PositiveIntegers"},{latexTrigger:"\\N_{1}",parse:"PositiveIntegers"},{name:"NonNegativeIntegers",latexTrigger:["\\N"]},{latexTrigger:"\\Z^{+0}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{\\geq}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{\\geq0}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{0+}",parse:"NonNegativeIntegers"},{latexTrigger:"\\mathbb{N}",parse:"NonNegativeIntegers"},{latexTrigger:"\\N_0",parse:"NonNegativeIntegers"},{latexTrigger:"\\N_{0}",parse:"NonNegativeIntegers"},{name:"ExtendedIntegers",latexTrigger:"\\overline\\Z"},{latexTrigger:"\\bar\\Z",parse:"ExtendedIntegers"},{name:"ExtendedRationalNumbers",latexTrigger:"\\overline\\Q"},{latexTrigger:"\\bar\\Q",parse:"ExtendedRationalNumbers"},{name:"ExtendedComplexNumbers",latexTrigger:"\\overline\\C"},{latexTrigger:"\\bar\\C",parse:"ExtendedComplexNumbers"},{latexTrigger:["^","\\complement"],kind:"postfix",parse:(s,o)=>["Complement",o]},{name:"Complement",latexTrigger:["^","<{>","\\complement","<}>"],kind:"postfix"},{name:"Intersection",latexTrigger:["\\cap"],kind:"infix",precedence:350},{name:"Interval",serialize:n8},{name:"Multiple",serialize:n8},{name:"Union",latexTrigger:["\\cup"],kind:"infix",precedence:350},{name:"Set",kind:"matchfix",openTrigger:"{",closeTrigger:"}",parse:(s,o)=>i3(o)?"EmptySet":(I2(o)=="Delimiter"&&x4(j1(o,2))===","&&(o=j1(o,1)),I2(o)!=="Sequence"?["Set",o]:["Set",...s4(o)]),serialize:(s,o)=>T4(["\\lbrace",s4(o).map(c=>s.serialize(c)).join(", "),"\\rbrace"])},{name:"SetMinus",latexTrigger:["\\setminus"],kind:"infix",precedence:650},{name:"SymmetricDifference",latexTrigger:["\\triangle"],kind:"infix",precedence:w3},{latexTrigger:["\\ni"],kind:"infix",associativity:"none",precedence:160,parse:(s,o,c)=>{let m=s.parseExpression(c);return m===null?null:["Element",m,o]}},{name:"Element",latexTrigger:["\\in"],kind:"infix",precedence:240},{name:"NotElement",latexTrigger:["\\notin"],kind:"infix",precedence:240},{name:"NotSubset",latexTrigger:["\\nsubset"],kind:"infix",associativity:"none",precedence:240},{name:"NotSuperset",latexTrigger:["\\nsupset"],kind:"infix",associativity:"none",precedence:240},{name:"NotSubsetNotEqual",latexTrigger:["\\nsubseteq"],kind:"infix",associativity:"none",precedence:240},{name:"NotSupersetNotEqual",latexTrigger:["\\nsupseteq"],kind:"infix",associativity:"none",precedence:240},{name:"SquareSubset",latexTrigger:["\\sqsubset"],kind:"infix",associativity:"none",precedence:265},{name:"SquareSubsetEqual",latexTrigger:["\\sqsubseteq"],kind:"infix",associativity:"none",precedence:265},{name:"SquareSuperset",latexTrigger:["\\sqsupset"],kind:"infix",associativity:"none",precedence:265},{name:"SquareSupersetEqual",latexTrigger:["\\sqsupseteq"],kind:"infix",associativity:"none",precedence:265},{name:"Subset",latexTrigger:["\\subset"],kind:"infix",associativity:"none",precedence:240},{latexTrigger:["\\subsetneq"],kind:"infix",associativity:"none",precedence:240,parse:"Subset"},{latexTrigger:["\\varsubsetneqq"],kind:"infix",associativity:"none",precedence:240,parse:"Subset"},{name:"SubsetEqual",latexTrigger:["\\subseteq"],kind:"infix",associativity:"none",precedence:240},{name:"Superset",latexTrigger:["\\supset"],kind:"infix",associativity:"none",precedence:240},{latexTrigger:["\\supsetneq"],kind:"infix",associativity:"none",precedence:240,parse:"Superset"},{latexTrigger:["\\varsupsetneq"],kind:"infix",associativity:"none",precedence:240,parse:"Superset"},{name:"SupersetEqual",latexTrigger:["\\supseteq"],kind:"infix",associativity:"none",precedence:240}];function n8(s,o){if(o===null)return"";let c=I2(o);if(!c)return"";if(c==="Set")return L4(o)===0?"\\emptyset":L4(o)===2&&I2(j1(o,2))==="Condition"?T4(["\\left\\lbrace",s.serialize(j1(o,1)),"\\middle\\mid",s.serialize(j1(o,2)),"\\right\\rbrace"]):T4(["\\left\\lbrace",...s4(o).map(m=>s.serialize(m)+" ,"),"\\right\\rbrace"]);if(c==="Range")return T4(["\\mathopen\\lbrack",s.serialize(j1(o,1)),", ",s.serialize(j1(o,2)),"\\mathclose\\rbrack"]);if(c==="Interval"){let m=j1(o,1),A=j1(o,2),ae=!1,qe=!1;return I2(m)==="Open"&&(m=j1(m,1),ae=!0),I2(A)==="Open"&&(A=j1(A,1),qe=!0),T4([`\\mathopen${ae?"\\rbrack":"\\lbrack"}`,s.serialize(m),", ",s.serialize(A),`\\mathclose${qe?"\\lbrack":"\\rbrack"}`])}return s.numericSetStyle(o,s.level),""}function S7(s){return o=>{let c=!1,m=[],A=[];for(;!c;){o.skipVisualSpace(),o.match("\\limits"),o.skipSpace();let So=null,Hc=null;for(;!(Hc!==null&&So!==null)&&(o.peek==="_"||o.peek==="^");)o.match("_")?Hc=o.parseGroup()??o.parseToken():o.match("^")&&(So=o.parseGroup()??o.parseToken()),o.skipSpace();i3(Hc)&&(Hc=null),i3(So)&&(So=null),m.push(Hc??"Nothing"),A.push(So??"Nothing"),o.skipVisualSpace(),c=!o.match(s)}let[ae,qe]=jy(o);if(ae&&qe.length===0){if(I2(ae)==="Add"||I2(ae)==="Subtract"){let So=[],Hc=[];for(let mf of s4(ae))if(qe)Hc.push(mf);else{let p1;[p1,qe]=Ov(mf),So.push(p1??mf)}if(qe!==null&&Hc.length>0)return["Add",__(s,["Add",...So],{indexes:qe,subs:m,sups:A})??"Nothing",...Hc]}else if(I2(ae)==="Divide"){let So;[So,qe]=Ov(j1(ae,1)),So!==null&&qe!==null&&(ae=["Divide",So,j1(ae,2)])}}return __(s,ae,{indexes:qe,subs:m,sups:A})}}function __(s,o,c){if(!o)return null;if(c.sups.length===0&&c.subs.length===0)return[s,o,...c.indexes];let m=c.indexes.length===0?I2(o)==="Function"?s4(o).slice(1):[]:c.indexes,A=Math.max(c.sups.length,c.subs.length,m.length);if(m.length===0)for(let qe=0;qe<A;qe++)m.push("Nothing");else if(m.length!==A)for(let qe=m.length;qe<A;qe++)m.push(["Error","'missing'"]);if(c.subs.length!==A)for(let qe=c.subs.length;qe<A;qe++)c.subs.push("Nothing");if(c.sups.length!==A)for(let qe=c.sups.length;qe<A;qe++)c.sups.push("Nothing");let ae=m.map((qe,So)=>{let Hc=c.sups[So],mf=c.subs[So];return mf==="Nothing"&&Hc==="Nothing"?qe:["Tuple",qe,mf,Hc]});return[s,o,...ae]}function jy(s){let o=!1,c=s.parseExpression({minPrec:266,condition:()=>{let m=s.index;return o=a8(s),s.index=m,o}});return c!==null&&!o?Ov(c):[c,x_(s)]}function x_(s){let o=[];for(;a8(s);){s.skipVisualSpace();let c=_4(s.parseSymbol());if(c===null)return o;o.push(c)}return o}function Ov(s){let o=I2(s),c=j1(s,1);if(!c)return[s,[]];if(o==="Sequence"&&L4(s)===1)return Ov(c);if(o==="Multiply"||o==="InvisibleOperator"){let m=s4(s);if(m){let[A,ae]=w_(m);return A.length>0?[[o,...A],ae]:[null,ae]}}else if(o==="Delimiter"){let[m,A]=Ov(c);if(A)return m?[["Delimiter",["Sequence",m],...s4(s).slice(1)],A]:[null,A]}else if(o==="Add"){let m=s4(s);if(m.length>0){let[A,ae]=Ov(m[m.length-1]);if(ae.length>0){if(A)return[["Add",...m.slice(0,-1),A],ae];if(m.length>2)return[["Add",...m.slice(0,-1)],ae];if(m.length>2)return[m[0],ae]}}}else if(o==="Negate"){let[m,A]=Ov(c);if(A.length>0)return[m?["Negate",m]:null,A]}else if(o==="Divide"){let[m,A]=Ov(c);if(A.length>0)return[["Divide",m??1,j1(s,2)],A]}else{let m=s4(s);if(m.length===1){let[A,ae]=Ov(m[0]);if(ae.length>0)return[[I2(s),A],ae]}}return[s,[]]}function py(s){return(o,c)=>{if(!j1(c,1))return s;let m=j1(c,1),A=[];I2(m)==="BuiltInFunction"?(A=["x"],m=[j1(m,1),"x"]):I2(m)==="Function"?(A=s4(m).slice(1),m=j1(m,1)):_4(m)?A=[]:A=[];let ae=s4(c).slice(1),qe=[],So=ae.map((mf,p1)=>{if(_4(mf)==="Nothing")return qe.push(_4(A[p1])??"Nothing"),"";if(_4(mf))return qe.push(_4(mf)??"Nothing"),"";let M1=I2(mf);if(M1==="Tuple"||M1==="Pair"||M1==="Limits"||M1==="Range"){if(L4(mf)===3){let R1=j1(mf,1);qe.push(_4(R1)??"Nothing");let G1=j1(mf,2),c4=j1(mf,3);return _4(G1)==="Nothing"&&(G1=null),_4(c4)==="Nothing"&&(c4=null),G1!==null&&c4!==null?`_{${o.serialize(G1)}}^{${o.serialize(c4)}}`:G1!==null?`_{${o.serialize(G1)}}`:c4!==null?`^{${o.serialize(c4)}}`:""}return`_{${o.serialize(mf)}}`}if(L4(mf)===2){if(_4(j1(mf,1))){qe.push(_4(j1(mf,1))??"Nothing");let c4=j1(mf,2);return _4(c4)==="Nothing"?"":`_{${o.serialize(c4)}}`}qe.push(_4(A[p1])??"Nothing");let R1=j1(mf,1),G1=j1(mf,2);if(_4(R1)==="Nothing"&&(R1=null),_4(G1)==="Nothing"&&(G1=null),R1!==null&&G1!==null)return`_{${o.serialize(R1)}}^{${o.serialize(G1)}}`;if(R1!==null)return`_{${o.serialize(R1)}}`;if(G1!==null)return`^{${o.serialize(G1)}}`}else qe.push(_4(A[p1])??"Nothing")}),Hc=qe.filter(mf=>_4(mf)!=="Nothing").map(mf=>`\\mathrm{d}${o.serialize(_4(mf)??"x")}`);return Hc.length>0&&(Hc=["\\,",...Hc]),So.length===0?`${s}\\,${o.serialize(m)}\\!${Hc.join(" ")}`:So.reverse().map(mf=>`${s}${mf}`).join("")+"\\!"+o.serialize(m)+Hc.join(" ")}}var Hy=[{kind:"expression",name:"Integrate",latexTrigger:["\\int"],parse:S7("Integrate"),serialize:py("\\int")},{kind:"expression",latexTrigger:["\\iint"],parse:S7("Integrate")},{kind:"expression",latexTrigger:["\\iiint"],parse:S7("Integrate")},{kind:"expression",name:"CircularIntegrate",latexTrigger:["\\oint"],parse:S7("CircularIntegrate"),serialize:py("\\oint")},{kind:"expression",latexTrigger:["\\oiint"],parse:S7("CircularIntegrate")},{kind:"expression",latexTrigger:["\\oiiint"],parse:S7("CircularIntegrate")}];function a8(s){let o=s.index;for(;s.match("\\cdot")||s.skipVisualSpace(););return s.matchAll(["\\mathrm","<{>","d","<}>"])||s.matchAll(["\\operatorname","<{>","d","<}>"])||s.match("d")||s.match("\\differentialD")?!0:(s.index=o,!1)}function w_(s){let o=[...s],c=[];for(;o.length>0;){let m;if([o,m]=S_(o),!m)break;c.push(m)}return[o,c]}function S_(s){if(s.length<2)return[s,""];let o=s[s.length-2];if(o==="d"||o==="d_upright"){let c=_4(s[s.length-1]);if(c)return[s.slice(0,-2),c]}return[s,""]}var av=[["alpha","\\alpha",945],["beta","\\beta",946],["gamma","\\gamma",947],["delta","\\delta",948],["epsilon","\\epsilon",949],["epsilonSymbol","\\varepsilon",1013],["zeta","\\zeta",950],["eta","\\eta",951],["theta","\\theta",952],["thetaSymbol","\\vartheta",977],["iota","\\iota",953],["kappa","\\kappa",954],["kappaSymbol","\\varkappa",1008],["lambda","\\lambda",955],["mu","\\mu",956],["nu","\\nu",957],["xi","\\xi",958],["omicron","\\omicron",959],["pi","\\pi",960],["piSymbol","\\varpi",982],["rho","\\rho",961],["rhoSymbol","\\varrho",1009],["sigma","\\sigma",963],["finalSigma","\\varsigma",962],["tau","\\tau",964],["phi","\\phi",981],["phiLetter","\\varphi",966],["upsilon","\\upsilon",965],["chi","\\chi",967],["psi","\\psi",968],["omega","\\omega",969],["Alpha","\\Alpha",913],["Beta","\\Beta",914],["Gamma","\\Gamma",915],["Delta","\\Delta",916],["Epsilon","\\Epsilon",917],["Zeta","\\Zeta",918],["Eta","\\Eta",919],["Theta","\\Theta",920],["Iota","\\Iota",921],["Kappa","\\Kappa",922],["Lambda","\\Lambda",923],["Mu","\\Mu",924],["Nu","\\Nu",925],["Xi","\\Xi",926],["Omicron","\\Omicron",927],["Rho","\\Rho",929],["Sigma","\\Sigma",931],["Tau","\\Tau",932],["Phi","\\Phi",934],["Upsilon","\\Upsilon",933],["Chi","\\Chi",935],["Psi","\\Psi",936],["Omega","\\Omega",937],["digamma","\\digamma",989],["aleph","\\aleph",8501],["bet","\\beth",8502],["gimel","\\gimel",8503],["dalet","\\daleth",8504],["ell","\\ell",8499],["turnedCapitalF","\\Finv",8498],["turnedCapitalG","\\Game",8513],["weierstrass","\\wp",8472],["eth","\\eth",240],["invertedOhm","\\mho",8487],["hBar","\\hbar",295],["hSlash","\\hslash",8463],["blackClubSuit","\\clubsuit",9827],["whiteHeartSuit","\\heartsuit",9825],["blackSpadeSuit","\\spadesuit",9824],["whiteDiamondSuit","\\diamondsuit",9826],["sharp","\\sharp",9839],["flat","\\flat",9837],["natural","\\natural",9838]],W8=[...av.map(([s,o,c])=>({kind:"symbol",name:s,latexTrigger:[o],parse:s})),...av.map(([s,o,c])=>({kind:"symbol",latexTrigger:[String.fromCodePoint(c)],parse:s}))],Hx=[{name:"Real",kind:"function",latexTrigger:["\\Re"]},{name:"Imaginary",kind:"function",latexTrigger:["\\Im"]},{name:"Argument",kind:"function",latexTrigger:["\\arg"]},{name:"Conjugate",latexTrigger:["^","\\star"],kind:"postfix"}],Gx=[{name:"Mean",kind:"function",symbolTrigger:"mean"},{name:"Median",kind:"function",symbolTrigger:"median"},{name:"StandarDeviation",kind:"function",symbolTrigger:"stddev"},{latexTrigger:["\\bar"],kind:"expression",parse:(s,o)=>{let c=s.parseGroup()??s.parseToken();return!c||!_4(c)?null:["Mean",c]}}],E7={"(":"(",")":")","[":"\\lbrack","]":"\\rbrack","{":"\\lbrace","}":"\\rbrace","<":"\\langle",">":"\\rangle","|":"\\vert","||":"\\Vert","\\lceil":"\\lceil","\\lfloor":"\\lfloor","\\rceil":"\\rceil","\\rfloor":"\\rfloor"};function X8(s,o,c){let m=T_(o,c);if(m===null)return;let A="kind"in o?o.kind:"expression",ae=m.latexTrigger;typeof ae=="string"&&(s.lookahead=Math.max(s.lookahead,oy(ae)));let qe=v6(ae??"");if(qe.length===2&&/[_^]/.test(qe[0])&&qe[1]!=="<{>"&&A!=="function"&&A!=="environment"&&A!=="matchfix"){let So=o.parse;!So&&o.name&&(A==="postfix"||A==="prefix"?So=(Hc,mf)=>[o.name,mf]:So=o.name),X8(s,{...o,kind:A,name:void 0,serialize:void 0,parse:So,latexTrigger:[qe[0],"<{>",qe[1],"<}>"]},c)}s.defs.push(m),m.name!==void 0&&(s.ids.has(m.name)&&c({severity:"warning",message:["invalid-dictionary-entry",m.name,"Duplicate definition. The name (MathJSON symbol) must be unique, but triggers can be shared by multiple definitions."]}),s.ids.set(m.name,m))}function E_(s,o){let c={lookahead:1,ids:new Map,defs:[]};for(let m of s)X8(c,m,o);return c}function T_(s,o){if(!b3(s,o))return null;let c={kind:"kind"in s?s.kind:"expression"},m=null;"latexTrigger"in s&&(typeof s.latexTrigger=="string"?m=v6(s.latexTrigger):m=s.latexTrigger);let A=null;"symbolTrigger"in s&&(A=s.symbolTrigger),m!==null&&(c.latexTrigger=H5(m)),A!==null&&(c.symbolTrigger=A),s.name&&(c.name=s.name,c.serialize=A_(s,m,A)),c.kind==="matchfix"&&m7(s)&&(c.openTrigger=s.openTrigger,c.closeTrigger=s.closeTrigger),c.kind==="symbol"&&Y7(s)&&(c.precedence=s.precedence??1e4),c.kind==="expression"&&Z7(s)&&(c.precedence=s.precedence??1e4),(c.kind==="prefix"||c.kind==="postfix")&&(G5(s)||rv(s))&&(m&&(m[0]==="^"||m[0]==="_")?(c.precedence=720,s.precedence):c.precedence=s.precedence??1e4),c.kind==="infix"&&z8(s)&&(!m||m[0]!=="^"&&m[0]!=="_"||!s.associativity||s.associativity,c.associativity=s.associativity??"none",c.precedence=s.precedence??1e4);let ae=Gy(s,m,A);return ae&&(c.parse=ae),c}function A_(s,o,c){if(typeof s.serialize=="function")return s.serialize;let m=s.kind??"expression";if(m==="environment"){let qe=s.symbolTrigger??s.name??"unknown";return(So,Hc)=>T4([`\\begin{${qe}}`,So.serialize(j1(Hc,1)),`\\end{${qe}}`])}if(m7(s)){let qe=typeof s.openTrigger=="string"?E7[s.openTrigger]:H5(s.openTrigger),So=typeof s.closeTrigger=="string"?E7[s.closeTrigger]:H5(s.closeTrigger);return(Hc,mf)=>T4([qe,Hc.serialize(j1(mf,1)),So])}let A=s.serialize;if(A===void 0&&o&&(A=H5(o)),A)return m==="postfix"?(qe,So)=>T4([qe.serialize(j1(So,1)),A]):m==="prefix"?(qe,So)=>T4([A,qe.serialize(j1(So,1))]):m==="infix"?(qe,So)=>{let Hc=L4(So);if(Hc===0)return"";let mf=s.precedence??1e4;return T4(s4(So).flatMap((p1,M1)=>{let R1=qe.wrap(p1,mf+1);return M1<Hc-1?[R1,A]:[R1]}))}:(qe,So)=>I2(So)?T4([A,qe.wrapArguments(So)]):A;let ae=c??s.name??"unknown";return m==="postfix"?(qe,So)=>T4([qe.serialize(j1(So,1)),qe.serializeSymbol(ae)]):m==="prefix"?(qe,So)=>T4([qe.serializeSymbol(ae),qe.serialize(j1(So,1))]):m==="infix"?(qe,So)=>T4([qe.serialize(j1(So,1)),qe.serializeSymbol(ae),qe.serialize(j1(So,2))]):(qe,So)=>I2(So)?T4([qe.serializeSymbol(ae),qe.wrapArguments(So)]):qe.serializeSymbol(ae)}function Gy(s,o,c){if("parse"in s&&typeof s.parse=="function")return s.parse;let m=("kind"in s?s.kind:"expression")??"expression";if(m==="environment"){let A=s.parse??s.name??c;if(A)return(ae,qe)=>{let So=ae.parseTabular();return So===null?null:[A,["List",So.map(Hc=>["List",...Hc])]]}}if(m==="function"){let A=s.parse??s.name??c;if(A)return(ae,qe)=>{let So=ae.parseArguments("enclosure",qe);return So===null?A:[A,...So]}}if(m==="symbol"){let A=s.parse??s.name??c;if(A)return(ae,qe)=>A}if(m==="prefix"){let A=s.parse??s.name??c;if(A){let ae=s.precedence??1e4;return(qe,So)=>{let Hc=qe.parseExpression({...So??[],minPrec:ae});return Hc===null?null:[A,Hc]}}}if(m==="postfix"){let A=s.parse??s.name;if(A)return(ae,qe)=>qe===null?null:[A,qe]}if(m==="infix"){if(/[_^]/.test(o?.[0]??"")){let ae=s.name??s.parse;return(qe,So)=>[ae,t3(j1(So,1)),t3(j1(So,2))]}let A=s.parse??s.name??c;if(A){let ae=s.precedence??1e4,qe=s.associativity??"none";return qe==="none"?(So,Hc,mf)=>{if(Hc===null)return null;let p1=t3(So.parseExpression({...mf,minPrec:ae}));return[A,Hc,p1]}:qe==="left"?(So,Hc,mf)=>{if(Hc===null)return null;let p1=t3(So.parseExpression({...mf,minPrec:ae+1}));return typeof A!="string"?[A,Hc,p1]:[A,Hc,p1]}:qe==="right"?(So,Hc,mf)=>{if(Hc===null)return null;let p1=t3(So.parseExpression({...mf,minPrec:ae}));return typeof A!="string"?[A,Hc,p1]:[A,Hc,p1]}:(So,Hc,mf)=>{if(Hc===null)return null;let p1=t3(So.parseExpression({...mf,minPrec:ae}));return typeof A!="string"?[A,Hc,p1]:E5(A,Hc,p1)}}}if(m==="matchfix"){let A=s.parse??s.name;if(A)return(ae,qe)=>i3(qe)?null:[A,qe]}if(m==="expression"){let A=s.parse??s.name??c;if(A)return()=>A}if("parse"in s){let A=s.parse;return()=>A}}function b3(s,o){let c=s.name??s.latexTrigger??s.symbolTrigger??s.openTrigger;if(!c)try{c=JSON.stringify(s)}catch{c="???"}if(Array.isArray(c)&&(c=H5(c)),"trigger"in s&&o({severity:"warning",message:["invalid-dictionary-entry",c,"The 'trigger' property is deprecated. Use 'latexTrigger' or 'symbolTrigger' instead"]}),"kind"in s&&!["expression","symbol","function","infix","postfix","prefix","matchfix","environment"].includes(s.kind)&&o({severity:"warning",message:["invalid-dictionary-entry",c,"The 'kind' property must be one of 'expression', 'symbol', 'function', 'infix', 'postfix', 'prefix', 'matchfix', 'environment'"]}),s.serialize!==void 0&&!s.name)return o({severity:"warning",message:["invalid-dictionary-entry",c,"A 'name' property must be provided if a 'serialize' handler is provided"]}),!1;if("symbolTrigger"in s&&(!("kind"in s)||s.kind!=="environment")&&(typeof s.symbolTrigger!="string"||!z3(s.symbolTrigger))&&o({severity:"warning",message:["invalid-dictionary-entry",c,"The 'symbolTrigger' property must be a valid symbol"]}),"name"in s&&(typeof s.name!="string"?s.name!==void 0&&o({severity:"warning",message:["invalid-dictionary-entry",c,"The 'name' property must be a string"]}):z3(s.name)||o({severity:"warning",message:["invalid-dictionary-entry",s.name,"The 'name' property must be a valid symbol"]})),m7(s)){if("latexTrigger"in s||"symbolTrigger"in G5)return o({severity:"warning",message:["invalid-dictionary-entry",c,"'matchfix' operators use a 'openTrigger' and 'closeTrigger' instead of a 'latexTrigger' or 'symbolTrigger'. "]}),!1;if(!s.openTrigger||!s.closeTrigger)return o({severity:"warning",message:["invalid-dictionary-entry",c,"Expected `openTrigger` and a `closeTrigger` for matchfix operator"]}),!1;if(typeof s.openTrigger!=typeof s.closeTrigger)return o({severity:"warning",message:["invalid-dictionary-entry",c,"Expected `openTrigger` and `closeTrigger` to both be strings or array of LatexToken"]}),!1}if(z8(s)||rv(s)||G5(s)){if(Array.isArray(s.latexTrigger)&&(s.latexTrigger[0]==="_"||s.latexTrigger[0]==="^")||typeof s.latexTrigger=="string"&&(s.latexTrigger.startsWith("^")||s.latexTrigger.startsWith("_"))){if(s.precedence!==void 0||s.associativity!==void 0)return o({severity:"warning",message:["invalid-dictionary-entry",c,'Unexpected "precedence" or "associativity" for superscript/subscript operator']}),!1}else if(s.precedence===void 0)return o({severity:"warning",message:["invalid-dictionary-entry",c,`Expected a "precedence" for ${s.kind} operator`]}),!1}else if(s.associativity!==void 0)return o({severity:"warning",message:["invalid-dictionary-entry",c,'Unexpected "associativity" operator']}),!1;return!m7(s)&&!g7(s)&&!s.latexTrigger&&!s.symbolTrigger&&!s.name?(o({severity:"warning",message:["invalid-dictionary-entry",c,"Expected a 'name', a 'latexTrigger' or a 'symbolTrigger'"]}),!1):s.parse===void 0&&s.name===void 0?(o({severity:"warning",message:["invalid-dictionary-entry",c,"Expected a 'parse' or 'name'"]}),!1):!0}var V3={symbols:W8,algebra:uy,arithmetic:Ux,calculus:Hy,complex:Hx,core:fS,"linear-algebra":w7,logic:K8,relop:J7,other:b_,physics:[{name:"mu0",kind:"symbol",latexTrigger:"\\mu_0"}],sets:jx,statistics:Gx,trigonometry:V9};function B6(s="all"){if(s==="all"){let o=[];for(let c of Object.keys(V3))V3[c]&&o.push(...V3[c]);return o}return V3[s]?Object.freeze([...V3[s]]):[]}var B9={"\\mathord":"","\\mathop":"","\\mathbin":"","\\mathrel":"","\\mathopen":"","\\mathclose":"","\\mathpunct":"","\\mathinner":"","\\operatorname":"","\\mathrm":"_upright","\\mathit":"_italic","\\mathbf":"_bold","\\mathscr":"_script","\\mathcal":"_calligraphic","\\mathfrak":"_fraktur","\\mathsf":"_sansserif","\\mathtt":"_monospace","\\mathbb":"_doublestruck"},s8={"\\mathring":"_ring","\\hat":"_hat","\\tilde":"_tilde","\\vec":"_vec","\\overline":"_bar","\\underline":"_underbar","\\dot":"_dot","\\ddot":"_ddot","\\dddot":"_dddot","\\ddddot":"_ddddot","\\acute":"_acute","\\grave":"_grave","\\breve":"_breve","\\check":"_check"};function Ky(s,o){if(s.atEnd)return null;let c=s.peek,m={"\\_":"_","\\#":"hash"}[c];if(!m&&!o.toplevel&&(m={"+":"plus","-":"minus","\\plusmn":"pm","\\pm":"pm","\\ast":"ast","\\dag":"dag","\\ddag":"ddag","\\bot":"bottom","\\top":"top","\\bullet":"bullet","\\cir":"circle","\\diamond":"diamond","\\times":"times","\\square":"square","\\star":"star"}[c]),m)return s.nextToken(),m;let A=av.findIndex(ae=>ae[1]===c);return A>=0?(s.nextToken(),av[A][0]):s.parseChar()??s.nextToken()}function T7(s){let o=A7(s),c=s8[s.peek]??null;if(c){if(s.nextToken(),!s.match("<{>"))return null;let ae=T7(s);if(ae===null||!s.match("<}>"))return null;o=`${ae}${c}`}if(o===null){for(o="";!s.atEnd;){let ae=s.peek;if(ae==="<}>"||ae==="_"||ae==="^")break;let qe=Ky(s,{toplevel:!1});if(qe===null)return null;o+=qe}for(;!s.atEnd&&/\d/.test(s.peek);)o+=s.nextToken()}for(;!s.atEnd;)if(s.match("\\degree"))o+="_deg";else if(s.matchAll(["^","\\circ"]))o+="_deg";else if(s.matchAll(["^","\\prime"]))o+="_prime";else if(s.matchAll(["^","<{>","\\prime","<}>"]))o+="_prime";else if(s.matchAll(["^","<{>","\\doubleprime","<}>"]))o+="_dprime";else if(s.matchAll(["^","<{>","\\prime","\\prime","<}>"]))o+="_dprime";else break;let m=[],A=[];for(;!s.atEnd;)if(s.match("_")){let ae=s.match("<{>"),qe=T7(s);if(ae&&!s.match("<}>")||qe===null)return null;A.push(qe)}else if(s.match("^")){let ae=s.match("<{>"),qe=T7(s);if(ae&&!s.match("<}>")||qe===null)return null;m.push(qe)}else break;return m.length>0&&(o+="__"+m.join("")),A.length>0&&(o+="_"+A.join("")),o}function A7(s){let o=B9[s.peek]??null;if(o===null)return null;if(s.nextToken(),s.match("<{>")){let c="",m={0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine"}[s.peek]??"";return m&&(c=m,s.nextToken()),c+=T7(s),c===null||!s.match("<}>")?null:o==="_upright"&&c.length>1?c:c+o}return null}function C7(s){let o=s.index,c=A7(s);return c===null||z3(c)?null:s.error(["invalid-symbol",{str:m2(c)}],o)}function q9(s){if(/^[a-zA-Z]$/.test(s.peek)||new RegExp("^\\p{XIDS}$","u").test(s.peek))return s.nextToken();let o=A7(s);if(!o){for(o="";!s.atEnd&&O1.test(o+s.peek);)o+=s.nextToken();o||(o=null)}let c=s.index;return o??=Ky(s,{toplevel:!0}),o&&(o=o.normalize(),z3(o))?o:(s.index=c,null)}var I6={"(":["\\lparen","("],")":["\\rparen",")"],"[":["\\lbrack","\\[","["],"]":["\\rbrack","\\]","]"],"<":["<","\\langle"],">":[">","\\rangle"],"{":["\\{","\\lbrace"],"}":["\\}","\\rbrace"],":":[":","\\colon"],"|":["|","\\|","\\lvert","\\rvert"],"||":["||","\\Vert","\\lVert","\\rVert"]},Z8={"\\left":"\\right","\\bigl":"\\bigr","\\Bigl":"\\Bigr","\\biggl":"\\biggr","\\Biggl":"\\Biggr","\\big":"\\big","\\Big":"\\Big","\\bigg":"\\bigg","\\Bigg":"\\Bigg"},Y8={"(":")","[":"]","|":"|","\\{":"\\}","\\[":"\\]","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache","\\llbracket":"\\rrbracket"},Kx=class{options;_index=0;symbolTable={parent:null,ids:{}};pushSymbolTable(){this.symbolTable={parent:this.symbolTable,ids:{}}}popSymbolTable(){this.symbolTable=this.symbolTable.parent??this.symbolTable}addSymbol(s,o){if(typeof o=="string"&&(o=new I4(o)),s in this.symbolTable.ids&&this.symbolTable.ids[s].is(o.type))throw new Error(`Symbol ${s} already declared as a different type`);this.symbolTable.ids[s]=o}get index(){return this._index}set index(s){this._index=s,this._lastPeek="",this._peekCounter=0}_tokens;_positiveInfinityTokens;_negativeInfinityTokens;_notANumberTokens;_decimalSeparatorTokens;_wholeDigitGroupSeparatorTokens;_fractionalDigitGroupSeparatorTokens;_exponentProductTokens;_beginExponentMarkerTokens;_endExponentMarkerTokens;_truncationMarkerTokens;_imaginaryUnitTokens;_dictionary;_boundaries=[];_lastPeek="";_peekCounter=0;constructor(s,o,c){this._tokens=s,this.options=c,this._dictionary=o,this._positiveInfinityTokens=v6(this.options.positiveInfinity),this._negativeInfinityTokens=v6(this.options.negativeInfinity),this._notANumberTokens=v6(this.options.notANumber),this._decimalSeparatorTokens=v6(this.options.decimalSeparator),this._wholeDigitGroupSeparatorTokens=[],this._fractionalDigitGroupSeparatorTokens=[],this.options.digitGroupSeparator&&(typeof this.options.digitGroupSeparator=="string"?(this._wholeDigitGroupSeparatorTokens=v6(this.options.digitGroupSeparator),this._fractionalDigitGroupSeparatorTokens=this._wholeDigitGroupSeparatorTokens):Array.isArray(this.options.digitGroupSeparator)&&(this._wholeDigitGroupSeparatorTokens=v6(this.options.digitGroupSeparator[0]),this._fractionalDigitGroupSeparatorTokens=v6(this.options.digitGroupSeparator[1]))),this._exponentProductTokens=v6(this.options.exponentProduct),this._beginExponentMarkerTokens=v6(this.options.beginExponentMarker),this._endExponentMarkerTokens=v6(this.options.endExponentMarker),this._truncationMarkerTokens=v6(this.options.truncationMarker),this._imaginaryUnitTokens=v6(this.options.imaginaryUnit)}getSymbolType(s){let o=this.symbolTable;for(;o;){if(s in o.ids)return o.ids[s];o=o.parent}return this.options.getSymbolType?this.options.getSymbolType(s):I4.unknown}get peek(){let s=this._tokens[this.index];if(s===this._lastPeek?this._peekCounter+=1:this._peekCounter=0,this._peekCounter>=1024){let o=`Infinite loop detected while parsing "${this.latex(0)}" at "${this._lastPeek}" (index ${this.index})`;throw console.error(o),new Error(o)}return this._lastPeek=s,s}nextToken(){return this._tokens[this.index++]}get atEnd(){return this.index>=this._tokens.length}atTerminator(s){return this.atBoundary||((s?.condition&&s.condition(this))??!1)}get atBoundary(){if(this.atEnd)return!0;let s=this.index;for(let o of this._boundaries)if(this.matchAll(o.tokens))return this.index=s,!0;return!1}addBoundary(s){this._boundaries.push({index:this.index,tokens:s})}removeBoundary(){this._boundaries.pop()}matchBoundary(){let s=this._boundaries[this._boundaries.length-1],o=s&&this.matchAll(s.tokens);return o&&this._boundaries.pop(),o}boundaryError(s){let o=this._boundaries[this._boundaries.length-1];return this._boundaries.pop(),this.error(s,o.index)}latex(s,o){return H5(this._tokens.slice(s,o))}latexAhead(s){return this.latex(this.index,this.index+s)}lookAhead(){let s=Math.min(this._dictionary.lookahead,this._tokens.length-this.index);if(s<=0)return[];let o=[];for(;s>0;)o.push([s,this.latexAhead(s--)]);return o}peekDefinitions(s){if(this.atEnd)return[];let o=[],c=[...this.getDefs(s)];for(let m of c)m.latexTrigger===""&&o.push([m,0]);for(let[m,A]of this.lookAhead())for(let ae of c)ae.latexTrigger===A&&o.push([ae,m]);for(let m of c)if(m.symbolTrigger){let A=Wx(this,m.symbolTrigger);A>0&&o.push([m,A])}return o}skipSpaceTokens(){for(;this.match("<space>"););}skipSpace(){if(!this.atEnd&&this.peek==="<{>"){let o=this.index;for(this.nextToken();this.match("<space>"););if(this.nextToken()==="<}>")return this.skipSpace(),!0;this.index=o}if(!this.options.skipSpace)return!1;let s=!1;for(;this.match("<space>");)s=!0;return s&&this.skipSpace(),s}skipVisualSpace(){this.options.skipSpace&&(this.skipSpace(),["\\!","\\,","\\:","\\;","\\enskip","\\enspace","\\space","\\quad","\\qquad"].includes(this.peek)&&(this.nextToken(),this.skipVisualSpace()),this.skipSpace())}match(s){return this._tokens[this.index]!==s?!1:(this.index++,!0)}matchAll(s){if(s.length===0)return!1;let o,c=0;do o=this._tokens[this.index+c]===s[c++];while(o&&c<s.length);return o&&(this.index+=c),o}matchAny(s){return s.includes(this._tokens[this.index])?this._tokens[this.index++]:""}parseLatexNumber(s=!0){let o=!1,c=this.peek;for(;c==="<space>"||c==="+"||c==="-";)c==="-"&&(o=!o),this.nextToken(),c=this.peek;let m=10,A=["0","1","2","3","4","5","6","7","8","9"];if(this.match("'"))m=8,A=["0","1","2","3","4","5","6","7"],s=!0;else if(this.match('"')||this.match("x"))m=16,A=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],s=!0;else if(this.match("`"))return c=this.nextToken(),c?c.startsWith("\\")&&c.length===2?(o?-1:1)*(c.codePointAt(1)??0):(o?-1:1)*(c.codePointAt(0)??0):null;let ae="";for(;A.includes(this.peek);)ae+=this.nextToken();if(!s&&this.match("."))for(ae+=".";A.includes(this.peek);)ae+=this.nextToken();let qe=s?Number.parseInt(ae,m):Number.parseFloat(ae);return Number.isNaN(qe)?null:o?-qe:qe}parseChar(){let s=this.index,o=0;for(;this.match("^");)o+=1;if(o<2&&(this.index=s),o>=2){let c="",m=0;for(;m!=o;){let A=this.matchAny(["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"]);if(!A)break;c+=A,m+=1}if(c.length===o)return String.fromCodePoint(Number.parseInt(c,16))}else if(this.match("\\char")){let c=Math.floor(this.parseLatexNumber()??Number.NaN);return(!Number.isFinite(c)||c<0||c>1114111)&&(c=10067),String.fromCodePoint(c)}else if(this.match("\\unicode"))if(this.skipSpaceTokens(),this.match("<{>")){let c=this.parseLatexNumber();if(this.match("<}>")&&c!==null&&c>=0&&c<=1114111)return String.fromCodePoint(c)}else{let c=this.parseLatexNumber();if(c!==null&&c>=0&&c<=1114111)return String.fromCodePoint(c)}return this.index=s,null}matchDelimiter(s,o){if(Array.isArray(s))return this.matchAll(s)?(this.addBoundary(o),!0):!1;let c=this.index,m=Z8[this.peek];return m&&this.nextToken(),s==="||"&&this.matchAll(["|","|"])?(this.addBoundary(["|","|"]),!0):(I6[s]??[s]).includes(this.peek)?(s=this.nextToken(),o=Y8[s]??o,this.addBoundary(m?[m,o]:[o]),!0):(this.index=c,!1)}parseGroup(){let s=this.index;if(this.skipSpaceTokens(),this.match("<{>")){this.addBoundary(["<}>"]);let o=this.parseExpression();if(this.skipSpace(),this.matchBoundary())return o??"Nothing";for(;!this.matchBoundary()&&!this.atEnd;)this.nextToken();if(I2(o)==="Error")return o;let c=this.error("expected-closing-delimiter",s);return o!==null?["InvisibleOperator",o,c]:c}return this.index=s,null}parseOptionalGroup(){let s=this.index;if(this.skipSpaceTokens(),this.match("[")){this.addBoundary(["]"]);let o=this.parseExpression();return this.skipSpace(),this.matchBoundary()?o:this.boundaryError("expected-closing-delimiter")}return this.index=s,null}parseToken(){return this.skipSpace(),[...'!"#$%&(),/;:?@[]\\`|~'.split(""),"\\left","\\bigl"].includes(this.peek)?null:/^[0-9]$/.test(this.peek)?parseInt(this.nextToken(),10):this.parseGenericExpression()??this.parseSymbol()}parseTabular(){let s=[],o=[],c=null;for(;!this.atBoundary;)if(this.skipSpace(),this.match("&"))o.push(c??"Nothing"),c=null;else if(this.match("\\\\")||this.match("\\cr"))this.skipSpace(),this.parseOptionalGroup(),c!==null&&o.push(c),s.push(o),o=[],c=null;else{let m=[],A=this.peek;for(;A!=="&"&&A!=="\\\\"&&A!=="\\cr"&&!this.atBoundary;)c=this.parseExpression({minPrec:0,condition:ae=>{let qe=ae.peek;return qe==="&"||qe==="\\\\"||qe==="\\cr"}}),c!==null?m.push(c):(m.push(["Error","'unexpected-token'",{str:H5(A)}]),this.nextToken()),this.skipSpace(),A=this.peek;m.length>1?c=["Sequence",...m]:c=m[0]??"Nothing"}return c!==null&&o.push(c),o.length>0&&s.push(o),s}parseStringGroupContent(){let s=this.index,o="",c=0;for(;!this.atBoundary||c>0;){let m=this.nextToken();if(m==="<$>"||m==="<$$>")return this.index=s,"";m==="<{>"?(c+=1,o+="\\{"):m==="<}>"?(c-=1,o+="\\}"):m==="<space>"?o+=" ":(m[0],o+=m)}return o}parseStringGroup(s){s===void 0&&(s=!1);let o=this.index;for(;this.match("<space>"););if(this.match(s?"[":"<{>")){this.addBoundary([s?"]":"<}>"]);let c=this.parseStringGroupContent();if(this.matchBoundary())return c;this.removeBoundary()}return this.index=o,null}parseEnvironment(s){let o=this.index;if(!this.match("\\begin"))return null;let c=this.parseStringGroup()?.trim();if(!c)return this.error("expected-environment-name",o);this.addBoundary(["\\end","<{>",...c.split(""),"<}>"]);for(let m of this.getDefs("environment"))if(m.symbolTrigger===c){let A=m.parse(this,s);return this.skipSpace(),this.matchBoundary()?A!==null?this.decorate(A,o):(this.index=o,null):this.boundaryError("unbalanced-environment")}return this.parseTabular(),this.skipSpace(),this.matchBoundary()?this.error(["unknown-environment",{str:c}],o):this.boundaryError("unbalanced-environment")}parseOptionalSign(){let s=!!this.matchAny(["-",""]);for(;this.matchAny(["+",""])||this.skipSpace();)this.matchAny(["-",""])&&(s=!s);return s?"-":"+"}parseDecimalDigits(s="whole"){let o=[],c=!1;for(;!c;){for(;/^[0-9]$/.test(this.peek);)o.push(this.nextToken()),this.skipVisualSpace();c=!0;let m=s==="whole"?this._wholeDigitGroupSeparatorTokens:this._fractionalDigitGroupSeparatorTokens;if(s!=="none"&&m.length>0){let A=this.index;this.skipVisualSpace(),this.matchAll(m)&&(this.skipVisualSpace(),/^[0-9]$/.test(this.peek)?c=!1:this.index=A)}}return o.join("")}parseSignedInteger(s){let o=this.index,c=this.parseOptionalSign(),m=this.parseDecimalDigits(s);return m?c==="-"?"-"+m:m:(this.index=o,"")}parseExponent(){let s=this.index;if(this.skipVisualSpace(),this.matchAny(["e","E"])){let o=this.parseSignedInteger("none");if(o)return o}if(this.index=s,this.match("\\times")&&(this.skipVisualSpace(),this.matchAll(["1","0"])&&(this.skipVisualSpace(),this.match("^")))){if(this.skipVisualSpace(),/^[0-9]$/.test(this.peek))return this.nextToken();if(this.match("<{>")){this.skipVisualSpace();let o=this.parseSignedInteger("whole");if(this.skipVisualSpace(),o&&this.match("<}>"))return o}}if(this.index=s,this.skipVisualSpace(),this.match("\\%"))return"-2";if(this.index=s,this.matchAll(this._exponentProductTokens)&&(this.skipVisualSpace(),this.matchAll(this._beginExponentMarkerTokens))){this.skipVisualSpace();let o=this.parseSignedInteger("none");if(this.skipVisualSpace(),o&&this.matchAll(this._endExponentMarkerTokens))return o}return this.index=s,""}parseRepeatingDecimal(){let s=this.index,o=this.options.repeatingDecimal,c="";if((o==="auto"||o==="parentheses")&&this.match("("))return c=this.parseDecimalDigits("fraction"),c&&this.match(")")?`(${c})`:(this.index=s,"");if(this.index=s,(o==="auto"||o==="parentheses")&&this.matchAll(["\\left","("]))return c=this.parseDecimalDigits("fraction"),c&&this.matchAll(["\\right",")"])?`(${c})`:(this.index=s,"");if(this.index=s,(o==="auto"||o==="vinculum")&&this.matchAll(["\\overline","<{>"]))return c=this.parseDecimalDigits("fraction"),c&&this.match("<}>")?`(${c})`:(this.index=s,"");if(this.index=s,(o==="auto"||o==="arc")&&(this.matchAll(["\\wideparen","<{>"])||this.matchAll(["\\overarc","<{>"])))return c=this.parseDecimalDigits("fraction"),c&&this.match("<}>")?`(${c})`:(this.index=s,"");if(this.index=s,o==="auto"||o==="dots"){let m=$9(this);if(m!==null){if(c=this.parseDecimalDigits("fraction"),!c)return`(${m})`;let A=$9(this);if(A!==null)return`(${m}${c}${A})`}}return this.index=s,""}parseNumber(){if(this.options.parseNumbers===!1||this.options.parseNumbers==="never")return null;let s=this.index;this.skipVisualSpace();let o=1;for(;this.peek==="-"||this.peek==="+";)this.match("-")?o=-o:this.match("+"),this.skipVisualSpace();let c="",m="",A=!1;if(this.match(".")||this.matchAll(this._decimalSeparatorTokens)){let mf=this.peek;(/^[\d]$/.test(mf)||C_(this))&&(A=!0,c="0")}else c=this.parseDecimalDigits("whole");if(!c)return this.index=s,null;let ae=this.index,qe=!1;(A||this.match(".")||this.matchAll(this._decimalSeparatorTokens))&&(m=this.parseDecimalDigits("fraction"),qe=!0);let So=!1;if(qe){let mf=this.parseRepeatingDecimal();mf&&(m+=mf,So=!0),this.match("\\ldots")||this.matchAll(this._truncationMarkerTokens)}if(qe&&!m)return this.index=ae,c.length<10?C5(o*parseInt(c,10)):{num:o<0?"-"+c:c};let Hc=this.parseExponent();if(!qe&&!Hc&&c.length<10)return C5(o*parseInt(c,10));if(!So&&this.options.parseNumbers==="rational"){let mf=parseInt(c,10);if(!m)return Hc?["Multiply",o*mf,["Power",10,Hc]]:C5(o*mf);let p1=parseInt(m,10),M1=m.length,R1=mf*10**M1+p1,G1=10**M1;return Hc?["Multiply",["Rational",o*R1,G1],["Power",10,Hc]]:["Rational",o*R1,G1]}return{num:(o<0?"-":"")+c+(qe?"."+m:"")+(Hc?"e"+Hc:"")}}parsePrefixOperator(s){s||(s={minPrec:0}),s.minPrec||(s={...s,minPrec:0});let o=this.index;for(let[c,m]of this.peekDefinitions("prefix")){this.index=o+m;let A=c.parse(this,{...s,minPrec:c.precedence+1});if(A!==null)return A}return this.index=o,null}parseInfixOperator(s,o){o??={minPrec:0},o.minPrec,o.minPrec===void 0&&(o={...o,minPrec:0});let c=this.index;for(let[m,A]of this.peekDefinitions("infix"))if(m.precedence>=o.minPrec){this.index=c+A;let ae=m.parse(this,s,o);if(ae!==null)return ae}return this.index=c,null}parseArguments(s="enclosure",o){if(this.atTerminator(o))return null;let c=this.index,m=this.parseEnclosure();if(s==="enclosure")return m===null?null:X6(m)??[];if(s==="implicit"){if(I2(m)==="Delimiter"){let ae=j1(m,1);return I2(ae)==="Sequence"?s4(ae):ae===null?[]:[ae]}if(m!==null)return[m];let A=this.parseExpression({...o,minPrec:gv});return A===null?null:[A]}return this.index=c,null}parseEnclosure(){let s=this.getDefs("matchfix"),o=this.index;for(let c of s){if(this.index=o,!this.matchDelimiter(c.openTrigger,c.closeTrigger))continue;let m=this.index;this.skipSpace();let A=this.parseExpression();if(this.skipSpace(),!this.matchBoundary()){let qe=this._boundaries[this._boundaries.length-1].tokens;if(this.removeBoundary(),this.index=m,this.skipSpace(),A=this.parseExpression(),this.skipSpace(),!this.matchAll(qe)){if(this.index=o,!this.atEnd)continue;return null}}let ae=c.parse(this,A??"Nothing");if(ae!==null)return ae}return this.index=o,null}parseGenericExpression(s){if(this.atTerminator(s))return null;let o=this.index,c=null,m=this.peekDefinitions("expression")??[];for(let[A,ae]of m)if(this.index=o+ae,typeof A.parse=="function"){if(c=A.parse(this,s),c!==null)return c}else return A.name;return this.index=o,null}parseFunction(s){if(this.atTerminator(s))return null;let o=this.index,c=null;for(let[A,ae]of this.peekDefinitions("function"))if(this.index=o+ae,typeof A.parse=="function"){if(c=A.parse(this,s),c!==null)return c}else{c=A.name;break}if(c===null&&(this.index=o,c=q9(this),!this.isFunctionOperator(c)))return this.index=o,null;do{let A=this.parsePostfixOperator(c,s);if(A===null)break;c=A}while(!0);let m=this.parseArguments("enclosure",s);return m===null?c:typeof c=="string"?[c,...m]:["Apply",c,...m]}parseSymbol(s){if(this.atTerminator(s))return null;let o=this.index;for(let[m,A]of this.peekDefinitions("symbol"))if(this.index=o+A,typeof m.parse=="function"){let ae=m.parse(this,s);if(ae!==null)return ae}else return m.name;this.index=o;let c=q9(this);return c!==null&&!this.getSymbolType(c).matches("error")?c:(this.index=o,null)}parseSupsub(s){if(this.atEnd)return s;let o=this.index;this.skipSpace();let c=[],m=[],A=o;for(;this.peek==="_"||this.peek==="^";){if(this.match("_"))if(A=this.index,this.match("_")||this.match("^"))m.push(this.error("syntax-error",A));else{let qe=this.parseGroup()??this.parseToken()??this.parseStringGroup();if(qe===null)return this.error("missing",o);m.push(qe)}else if(this.match("^"))if(A=this.index,this.match("_")||this.match("^"))c.push(this.error("syntax-error",A));else{let qe=this.parseGroup()??this.parseToken();if(qe===null)return this.error("missing",o);c.push(qe)}A=this.index,this.skipSpace()}if(c.length===0&&m.length===0)return this.index=o,s;let ae=s;if(m.length>0){let qe=[...this.getDefs("infix")].filter(So=>So.latexTrigger==="_");if(qe){let So=["Subscript",ae,m.length===1?m[0]:["List",...m]];for(let Hc of qe)if(typeof Hc.parse=="function"?ae=Hc.parse(this,So,{minPrec:0}):ae=So,ae!==null)break}}if(c.length>0){let qe=[...this.getDefs("infix")].filter(So=>So.latexTrigger==="^");if(qe){let So=c.filter(Hc=>!i3(Hc));if(So.length!==0){let Hc=So.length===1?So[0]:["List",...So],mf=["Superscript",ae,Hc];for(let p1 of qe)if(typeof p1.parse=="function"?ae=p1.parse(this,mf,{minPrec:0}):ae=mf,ae!==null)break}}}return ae===null&&(this.index=o),ae}parsePostfixOperator(s,o){if(s===null||this.atEnd)return null;let c=this.index;for(let[m,A]of this.peekDefinitions("postfix")){this.index=c+A;let ae=m.parse(this,s,o);if(ae!==null)return ae}return this.index=c,null}parseSyntaxError(){let s=this.index;if(this.peek==="^")return this.index+=1,["Superscript",this.error("missing",s),t3(this.parseGroup())];let o=this.peekDefinitions("operator");if(o.length>0){if(o=this.peekDefinitions("postfix"),o.length>0){let[qe,So]=o[0];if(this.index+=So,typeof qe.parse=="function"){let Hc=qe.parse(this,this.error("missing",s));if(Hc!==null)return Hc}return this.error("unexpected-operator",s)}if(o=this.peekDefinitions("prefix"),o.length>0){let[qe,So]=o[0];if(this.index+=So,typeof qe.parse=="function"){let Hc=qe.parse(this,{minPrec:0});if(Hc!==null)return Hc}return qe.name?[qe.name,this.parseExpression()??this.error("missing",s)]:this.error("unexpected-operator",s)}if(o=this.peekDefinitions("infix"),o.length>0){let[qe,So]=o[0];this.index+=So;let Hc=qe.parse(this,this.error("missing",s),{minPrec:0});return Hc!==null?Hc:this.error("unexpected-operator",s)}}let c=this.index,m=C7(this);if(m!==null)return m;if(m=q9(this),m!==null)return this.error(["unexpected-symbol",{str:m}],c);let A=this.peek;if(!A)return this.error("syntax-error",s);if(pS(this))return this.error("unexpected-delimiter",s);if(A[0]!=="\\")return this.error(["unexpected-token",{str:H5(A)}],s);let ae=this.nextToken();if(this.skipSpaceTokens(),ae==="\\end"){let qe=this.parseStringGroup();return qe===null?this.error("expected-environment-name",s):this.error(["unbalanced-environment",{str:qe}],s)}for(;this.match("[");){let qe=0;for(;!this.atEnd&&qe===0&&this.peek!=="]";)this.peek==="["&&(qe+=1),this.peek==="]"&&(qe-=1),this.nextToken();this.match("]")}for(;this.match("<{>");){let qe=0;for(;!this.atEnd&&qe===0&&this.peek!=="<}>";)this.peek==="<{>"&&(qe+=1),this.peek==="<}>"&&(qe-=1),this.nextToken();this.match("<}>")}return this.error(["unexpected-command",{str:H5(ae)}],s)}parsePrimary(s){if(this.atBoundary||this.atTerminator(s))return null;let o=null,c=this.index;if(this.match("<}>"))return this.error("unexpected-closing-delimiter",c);if(o??=this.parseGroup(),o??=this.parseNumber(),o??=this.parseEnclosure(),o??=this.parseEnvironment(s),o===null&&this.matchAll(this._positiveInfinityTokens)&&(o="PositiveInfinity"),o===null&&this.matchAll(this._negativeInfinityTokens)&&(o="NegativeInfinity"),o===null&&this.matchAll(this._notANumberTokens)&&(o="NaN"),o===null&&this.matchAll(this._imaginaryUnitTokens)&&(o="ImaginaryUnit"),o??=this.parseGenericExpression(s)??this.parseFunction(s)??this.parseSymbol(s)??C7(this),o!==null&&i3(o))return this.parsePrimary(s);if(o!==null){o=this.decorate(o,c);let m=null,A=this.index;do{if(m=this.parsePostfixOperator(o,s),o=m??o,this.index===A&&m!==null){this.index;break}A=this.index}while(m!==null)}return o!==null&&(o=this.parseSupsub(o)),o===null&&(o=this.options.parseUnexpectedToken?.(null,this)??null,o===null&&this.peek.startsWith("\\")&&(this.nextToken(),o=this.error("unexpected-command",c))),this.decorate(o,c)}parseExpression(s){this.skipSpace();let o=this.index;if(this.atBoundary)return this.index=o,null;s??={minPrec:0},s.minPrec,s.minPrec===void 0&&(s={...s,minPrec:0});let c=this.parsePrefixOperator({...s,minPrec:0});if(c??=this.parsePrimary(s),c!==null){let m=!1;for(;!m&&!this.atTerminator(s);){this.skipSpace();let A=this.parseInfixOperator(c,s);if(A===null&&s.minPrec<=zy&&this.peekDefinitions("operator").length===0){let ae=this.parseExpression({...s,minPrec:zy+1});ae!==null?I2(c)==="InvisibleOperator"?I2(ae)==="InvisibleOperator"?A=["InvisibleOperator",...s4(c),...s4(ae)]:A=["InvisibleOperator",...s4(c),ae]:I2(ae)==="InvisibleOperator"?A=["InvisibleOperator",c,...s4(ae)]:A=["InvisibleOperator",c,ae]:A===null&&(A=this.options.parseUnexpectedToken?.(c,this)??null)}A!==null?c=A:m=!0}}return this.decorate(c,o)}decorate(s,o){if(s===null)return null;if(!this.options.preserveLatex)return s;let c=this.latex(o,this.index);return Array.isArray(s)?s={latex:c,fn:s}:typeof s=="number"?s={latex:c,num:Number(s).toString()}:typeof s=="string"?s={latex:c,sym:s}:typeof s=="object"&&s!==null&&(s.latex=c),s}error(s,o){let c;typeof s=="string"?(s.startsWith("'"),c={str:s}):(s[0].startsWith("'"),c=["ErrorCode",{str:s[0]},...s.slice(1)]);let m=this.latex(o,this.index);return m?["Error",c,["LatexString",{str:m}]]:["Error",c]}isFunctionOperator(s){return s===null?!1:!!this.getSymbolType(s).matches("function")}*getDefs(s){if(s==="operator")for(let o=this._dictionary.defs.length-1;o>=0;o--){let c=this._dictionary.defs[o];/^prefix|infix|postfix/.test(c.kind)&&(yield c)}else for(let o=this._dictionary.defs.length-1;o>=0;o--){let c=this._dictionary.defs[o];c.kind===s&&(yield c)}}};function Wx(s,o){let c=s.index,m=q9(s)?.trim();if(m===null)return 0;let A=m!==o?0:s.index-c;return s.index=c,A}function pS(s){let o=s.peek;return Object.values(Y8).includes(o)||Y8[o]?(s.nextToken(),!0):Z8[o]||Object.values(Z8).includes(o)?(s.nextToken(),s.nextToken(),!0):!1}function $9(s){let o=s.index;if(s.matchAll(["\\overset","<{>"])&&(s.match(".")||s.match("\\cdots"))&&s.matchAll(["<}>","<{>"])){let c=s.nextToken();if(c&&/^\d$/.test(c)&&s.match("<}>"))return c}return s.index=o,null}function C_(s){let o=s.peek;return o==="\\overline"||o==="\\overset"||o==="\\wideparent"||o==="\\overarc"||o==="("||o==="\\left"}function M_(s,o,c){let m=new Kx(v6(s),o,c),A=m.parseExpression();if(!m.atEnd){let ae=m.parseSyntaxError();A=A!==null?["Sequence",A,ae]:ae}if(A??="Nothing",c.preserveLatex){if(Array.isArray(A))return{latex:s,fn:A};if(typeof A=="number")return{latex:s,num:Number(A).toString()};if(typeof A=="string"){if(Pv(A))return{latex:s,str:x4(A)};if(g5(A))return{latex:s,sym:A};if(Z6(A))return{latex:s,num:A}}typeof A=="object"&&A!==null&&(A.latex=s)}return A}function C5(s){return s===0?{num:"0"}:Number.isInteger(s)&&Math.abs(s)<Q4?s:{num:s.toString()}}var q6=100;function o5(s){return(s.isFiniteCollection??!1)&&s.isIndexedCollection}function Q8(s,o){return typeof o=="number"?(o<0&&(o=0),{next(){return o===0?{done:!0,value:void 0}:(o--,{done:!1,value:s})}}):{next(){return{done:!1,value:s}}}}function J8(s){if(s.length===0)return{next(){return{done:!0,value:void 0}}};if(s.length===1){let A=s[0],ae=A.each();if(!ae){let qe=!1;return{next(){return qe?{done:qe,value:void 0}:(qe=!0,{done:!1,value:[A]})}}}return{next(){let qe=ae.next();return qe.done?{done:!0,value:void 0}:{done:!1,value:[qe.value]}}}}let o=Math.min(...s.map(A=>A.isCollection?A.xsize??1:1/0));if(o===0)return{next(){return{done:!0,value:void 0}}};let c=s.map(A=>A.isCollection?A.each():Q8(A)),m=0;return{next(){if(m>=o)return{done:!0,value:void 0};let A=c.map(ae=>ae.next());return m+=1,{done:!1,value:A.map(ae=>ae.value)}}}}function z9(s,o,c){if(!(s.isFiniteCollection!==!0||o.isFiniteCollection!==!0)){for(let m of s.each())if(o.xcontains(m)!==!0)return!1;if(c){let m=s.xsize;if(m===void 0)return!1;let A=o.xsize;if(A===void 0||m===A)return!1}return!0}}function my(s,o){for(let c=0;c!==s.nops;c+=1)if(o(s.ops[c]))return c+1}function U9(s,o){if(s.isIndexedCollection!==!0)return;let c=1,m=s.at(c);for(;m!==void 0;){if(o(m))return c;c+=1,m=s.at(c)}}function k_(s,o){if(s.isFiniteCollection===!0){if(s.isIndexedCollection)return s.indexWhere(c=>c.isSame(o))!==void 0;for(let c of s.each())if(c.isSame(o))return!0;return!1}}function e9(){return{isLazy:s=>!1,count:s=>s.nops,isEmpty:s=>s.nops===0,isFinite:s=>!0,contains:(s,o)=>s.ops.some(c=>c.isSame(o)),iterator:s=>{let o=1,c=s.nops;return{next:()=>o===c+1?{value:void 0,done:!0}:(o+=1,{value:s.ops[o-1-1],done:!1})}},subsetOf:z9,at:(s,o)=>{if(typeof o=="number"&&(o<0&&(o=s.nops+o+1),!(o<1||o>s.nops)))return s.ops[o-1]},indexWhere:my,eltsgn:s=>{},elttype:s=>s.nops===0?"unknown":s.nops===1?s.ops[0].type.type:y3(...s.ops.map(o=>o.type.type))}}function R_(s){if(!s)return;if(!s.count||!s.iterator)throw new Error('A collection must have at least an "iterator" and a "count" handler');if(s.indexWhere&&s.at===void 0)throw new Error('A collection with an "indexWhere" handler must also have an "at" handler');let o={iterator:s.iterator,count:s.count,contains:s.contains??k_,isEmpty:s.isEmpty??(c=>{if(s.count(c)!==void 0)return s.count(c)===0}),isFinite:s.isFinite??(c=>{let m=s.count(c);if(m!==void 0)return Number.isFinite(m)}),subsetOf:s.subsetOf??z9};return s.isLazy&&(o.isLazy=s.isLazy),s.eltsgn&&(o.eltsgn=s.eltsgn),s.elttype&&(o.elttype=s.elttype),s.at&&(o.at=s.at,o.indexWhere=s.indexWhere??U9),o}function $6(s,o){let c=s.every(A=>A.isCanonical)?s:s.map(A=>A.canonical);if(o){let A=qe=>qe.symbol==="Nothing"||qe.operator===o||qe.operator==="Sequence";if(c.every(qe=>!A(qe)))return c;let ae=[];for(let qe of c)qe.symbol!=="Nothing"&&(qe.ops&&(qe.operator===o||qe.operator==="Sequence")?ae.push(...$6(qe.ops,o)):ae.push(qe));return ae}if(c.every(A=>!(A.symbol==="Nothing"||A.operator==="Sequence")))return c;let m=[];for(let A of c)A.symbol!=="Nothing"&&(A.ops&&A.operator==="Sequence"?m.push(...$6(A.ops,o)):m.push(A));return m}function M7(s,o){if(!o||s.every(m=>!m.ops||m.operator!==o))return s;let c=[];for(let m of s)!m.ops||m.operator!==o?c.push(m):c.push(...M7(m.ops,o));return c.length,s.length,c.length===s.length?s:c}function P_(s){if(s.every(c=>c.operator!=="Sequence"&&c.operator!=="Delimiter"))return s;let o=[];for(let c of s)if(!c.isValid)o.push(c);else if(c.operator==="Delimiter")if(c.op1.operator==="Sequence"){let m=c.op1.ops??[];m.length===0?o.push(c.engine.box(["Tuple"])):o.push(...P_(m))}else o.push(c.op1);else c.operator==="Sequence"?c.ops&&o.push(...c.ops):o.push(c);return o}function o8(s,o){if(s===o)return!0;if(s.ops)return s.operator!==o.operator||s.nops!==o.nops?!1:s.ops.every((c,m)=>o8(c,o.ops[m]));if(s.isNumberLiteral){if(!o.isNumberLiteral)return!1;let c=s.numericValue,m=o.numericValue;return c===m?!0:typeof c=="number"?typeof m=="number"?c===m:m.eq(c):c.eq(m)}if(s.string||o.string)return s.string===o.string;if(s.symbol||o.symbol)return s.symbol===o.symbol;if(s.rank!==0){if(s.rank!==o.rank)return!1;for(let c=0;c<s.rank;c++)if(s.shape[c]!==o.shape[c])return!1;return s.tensor.equals(o.tensor)}return!1}function I_(s,o){if(s.operatorDefinition?.eq){let A=s.operatorDefinition.eq(s,s.engine.box(o));if(A!==void 0)return A}if(typeof o!="number"&&o.operatorDefinition?.eq){let A=o.operatorDefinition.eq(o,s);if(A!==void 0)return A}s=s.N();let c=typeof o!="number"?o.N():s.engine.box(o);if(s.ops||c.ops){let A=s.operatorDefinition?.eq?.(s,c);return A!==void 0||(A=c.operatorDefinition?.eq?.(c,s),A!==void 0)?A:s.isSame(c)?!0:s.unknowns.length===0&&c.unknowns.length===0?s.isFinite&&c.isFinite?N_(s.sub(c).simplify().N()):s.isNaN||c.isNaN?!1:!!(s.isInfinity&&c.isInfinity&&s.sgn===c.sgn):(s=s.expand().simplify(),c=c.expand().simplify(),mS(s,c)?o8(s,c):void 0)}if(s.symbol){let A=s.valueDefinition?.eq?.(c);if(A!==void 0)return A}if(c.symbol){let A=c.valueDefinition?.eq?.(s);if(A!==void 0)return A}if(s.symbol&&c.symbol)return s.symbol===c.symbol;let m=s.engine;if(s.isNumberLiteral&&c.isNumberLiteral)return s.isFinite&&c.isFinite?N_(s.sub(c)):s.isNaN||c.isNaN?!1:!!(s.isInfinity&&c.isInfinity&&s.sgn===c.sgn);if(m.ask(m.box(["Equal",s,c])).length>0)return!0;if(m.ask(m.box(["NotEqual",s,c])).length>0)return!1;if(!(s.unknowns.length>0||c.unknowns.length>0))return o8(s,c)}function l8(s,o){if(s.isNumberLiteral){if(typeof o!="number"&&typeof o.numericValue=="number"&&(o=o.numericValue),typeof o=="number"){if(o===0){let A=s.sgn;return A===void 0?void 0:A==="zero"?"=":A==="positive"?">":A==="negative"?"<":A==="non-negative"?">=":A==="non-positive"?"<=":void 0}if(s.isNumberLiteral){let A=s.numericValue;return typeof A=="number"?Math.abs(A-o)<=s.engine.tolerance?"=":A<o?"<":">":A.eq(o)?"=":A.lt(o)?"<":">"}return}if(!o.isNumberLiteral)return;let c=s.numericValue,m=o.numericValue;return typeof c=="number"?m.eq(c)?"=":m.lt(c)?">":"<":c.eq(m)?"=":c.lt(m)?"<":">"}if(typeof o!="number"){if(s.ops||o.ops){if(s.operatorDefinition?.eq?.(s,o)!==void 0)return"=";let c=s.sub(o).N();if(!c.isNumberLiteral)return;if(typeof c.numericValue=="number")return c.numericValue===0?"=":c.numericValue<0?"<":">";let m=s.engine.tolerance;return c.numericValue.isZeroWithTolerance(m)?"=":c.numericValue.lt(0)?"<":">"}if(s.symbol)return s.symbol===o.symbol?"=":s.valueDefinition?.cmp?.(o)||(s.valueDefinition?.eq?.(o)===!0?"=":void 0);if(s.string)return o.string?s.string===o.string?"=":s.string<o.string?"<":">":void 0;if(s.tensor)return o.tensor&&s.tensor.equals(o.tensor)?"=":void 0}}function N_(s){if(!s.isNumberLiteral)return!1;let o=s.numericValue,c=s.engine;return typeof o=="number"?c.chop(o)===0:o.isZeroWithTolerance(c.tolerance)}function mS(s,o){let c=s.unknowns,m=o.unknowns;if(c.length!==m.length)return!1;for(let A of c)if(!m.includes(A))return!1;return!0}function y5(s){if(s){if(s.operator==="Function"&&s.isCanonical||s.symbol)return s;if(s.operator==="BuiltinFunction")return s.op1;if(s.operator==="Delimiter"){if(s.op1.operator==="Sequence")if(s.op1.nops===1)s=s.op1;else return y5(s.engine._fn("Block",s.op1.ops,{canonical:!1}));return y5(s.op1)}if(s.operator==="Function")return t9(s.engine,s.ops);if(s.operator){s.operator;let o=s.engine,c=s.subs({_:"_1"}),m=1,A=[];for(;m<10;)c.has(`_${m}`)&&A.push(c.engine.symbol(`_${m}`,{canonical:!1})),m++;if(A.length===0){c.operator!=="Block"?c=o.function("Block",[c]):c=c.canonical;let ae=c.unknowns;ae.length>0&&(A=ae.map(qe=>o.symbol(qe,{canonical:!1})))}return t9(o,[c,...A])}}}function t9(s,o){if(o.length===0)return;let c=o[0].operator==="Block"?o[0].canonical:s.function("Block",[o[0]]),m=o.slice(1).map(A=>A.symbol?A:s.error("expected-a-symbol",A.toString()));c.isScoped;for(let A of m)A.symbol&&!c.localScope.bindings.has(A.symbol)&&s.declare(A.symbol,{inferred:!0,type:"unknown"},c.localScope);return s._fn("Function",[c,...m])}function Wy(s,o){return r9(s)?.(o)||s.engine.function("Apply",[s,...o])}function r9(s){let o=s.engine;if(s.symbol)return ae=>o.function(s.symbol,ae).evaluate();let c=y5(s);if(!c)throw new Error("Invalid function literal");if(s=c,s.operator,s.isCanonical,s.ops,s.ops.length===1)return s.ops[0],()=>s.ops[0].evaluate();let[m,...A]=s.ops;return m.isScoped,ae=>{if(ae.length>A.length)throw new Error(`Too many arguments for function "${s.toString()}": expected ${A.length}, got ${ae.length}`);if(o.strict&&!ae.every(So=>So.isValid))return;if(ae.length<A.length){let So=new Set([...m.symbols,...A.map(M1=>M1.symbol)]),Hc=A.slice(ae.length).map((M1,R1)=>{let G1=`_${R1+1}`,c4=0;for(;So.has(G1);)G1=`_${R1+1}_${c4++}`;return So.add(G1),o.symbol(G1,{canonical:!1})}),mf=Object.fromEntries(A.slice(ae.length).map((M1,R1)=>[M1.symbol,Hc[R1]])),p1=m.evaluate({withArguments:Object.fromEntries(A.slice(0,ae.length).map((M1,R1)=>[M1.symbol,ae[R1]]))}).subs(mf);return o.function("Function",[p1,...Hc])}let qe=m.evaluate({withArguments:Object.fromEntries(A.map((So,Hc)=>[So.symbol,ae[Hc].evaluate()]))});return qe.isValid?qe:void 0}}function N6(s){return r9(s)??(o=>s.engine.function("Apply",[s,...o]).evaluate())}function Xx(s){let o=r9(s),c=s.engine;return o?m=>o([c.number(m)])?.re??NaN:m=>c.function("Apply",[s,c.number(m)]).evaluate().re}function D_(s,o){typeof s=="string"&&s.length>0;let c=o;for(;c;){let m=c.bindings.get(s);if(m)return m;c=c.parent}}function u8(s,o){for(;o!==BigInt(0);)[s,o]=[o,s%o];return s<0?-s:s}function Zx(s,o){return s*o/u8(s,o)}function*L_(s){if(s<0)return BigInt(0);if(s<10)return BigInt([1,1,2,6,24,120,720,5040,40320,362880][Number(s)]);if(s%BigInt(2)===BigInt(1))return s*(yield*L_(s-BigInt(1)));let o=s,c=s,m=s,A=0;for(;o>2;)o-=BigInt(2),c+=o,m*=c,A+=1,(A%5e4===0||A>1e4&&A%500===0)&&(yield m);return m}function k7(s){return s!==null&&Array.isArray(s)}function f6(s){return s!==null&&Array.isArray(s)&&typeof s[0]=="number"}function i9(s){return s!==null&&Array.isArray(s)&&typeof s[0]=="bigint"}function gy(s){return s[0]==0}function n9(s){return s[0]>0}function M5(s){return s[0]==s[1]}function j9(s){return s[0]===-s[1]}function c8(s){return s[1]==1}function Yx(s){return Number(s[0])}function Qx(s){return Number(s[1])}function Jx(s){return Number(s[0])/Number(s[1])}function h8(s,o){if(typeof s[0]=="number"&&!Number.isFinite(s[0]))return s;let c=o;if(c===null)return s;if(i9(c))return s=[BigInt(s[0]),BigInt(s[1])],[c[1]*s[0]+c[0]*s[1],c[1]*s[1]];if(!Number.isFinite(c[0]))return c;if(i9(s)){let m=[BigInt(c[0]),BigInt(c[1])];return[m[1]*s[0]+m[0]*s[1],m[1]*s[1]]}return[c[1]*s[0]+c[0]*s[1],c[1]*s[1]]}function Xy(s,o){return f6(s)&&f6(o)?[s[0]*o[0],s[1]*o[1]]:f6(s)?[BigInt(s[0])*o[0],BigInt(s[1])*o[1]]:f6(o)?[BigInt(o[0])*s[0],BigInt(o[1])*s[1]]:[s[0]*o[0],s[1]*o[1]]}function a9(s){return[-s[0],s[1]]}function ew(s){return s[0]<0?[-s[1],-s[0]]:[s[1],s[0]]}function O_(s){return[Number(s[0]),Number(s[1])]}function F_(s,o){return f6(s)&&f6(o)?s[1]===1&&o[1]===1?[eh(s[0],o[0]),1]:[eh(s[0],o[0]),m1(s[1],o[1])]:s[1]===1&&o[1]===1?[u8(BigInt(s[0]),BigInt(o[0])),BigInt(1)]:[u8(BigInt(s[0]),BigInt(o[0])),Zx(BigInt(s[1]),BigInt(o[1]))]}function H9(s){if(f6(s)){if(s[0]===1||s[1]===1)return s;if(s[1]<0&&(s=[-s[0],-s[1]]),!Number.isFinite(s[1]))return[0,1];let A=eh(s[0],s[1]);return A<=1?s:[s[0]/A,s[1]/A]}s[1]<0&&(s=[-s[0],-s[1]]);let o=u8(s[0],s[1]),[c,m]=o<=1?s:[s[0]/o,s[1]/o];return c<=Number.MAX_SAFE_INTEGER&&c>=Number.MIN_SAFE_INTEGER&&m<=Number.MAX_SAFE_INTEGER?[Number(c),Number(m)]:[c,m]}function gS(s){if(!Number.isFinite(s)||s%1===0)return s;let o=1e-15,c=Math.floor(s),m=1,A=0,ae=c,qe=1;for(;s-c>o*qe*qe;){s=1/(s-c),c=Math.floor(s);let So=m;m=ae;let Hc=A;A=qe,ae=So+c*m,qe=Hc+c*A}return[ae,qe]}var D6=class{get bignumRe(){}im;get bignumIm(){}isZeroWithTolerance(s){return this.isZero}valueOf(){return this.im===0?this.bignumRe?this.bignumRe.toNumber():this.re:this.toString()}[Symbol.toPrimitive](s){return s==="string"?this.toString():this.valueOf()}toJSON(){if(this.im===0){let s=this.re;if(Number.isFinite(s))return s}return this.N().toString()}print(){let s=console.log;s?.(this.toString())}};function tw(s){if(s==="N")return[0,""];let o={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3},c=0,m=0;s=s.toUpperCase();for(let A=s.length-1;A>=0;A--){let ae=o[s[A]];if(ae===void 0)return[c,s.slice(A)];ae<m?c-=ae:c+=ae,m=ae}return[c,""]}function s9(s,o){if(s=s.trim(),s.length===0)return[NaN,""];if(s.startsWith("+"))return s9(s.slice(1),o);if(s.startsWith("-")){let[A,ae]=s9(s.slice(1),o);return[-A,ae]}let c=10;if(typeof o=="string"&&(o=o.toLowerCase()),s.startsWith("0x"))c=16,s=s.slice(2);else if(s.startsWith("0b"))c=2,s=s.slice(2);else{if(o==="roman")return tw(s);if(o==="base64"||o==="base-64")try{return[parseInt(btoa(s)),""]}catch{return[NaN,""]}else typeof o=="number"?c=o:typeof o=="string"&&(c=parseInt(o))}let m=0;for(let A=0;A<s.length;A++){let ae={" ":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,_:-1,",":-1,0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,g:16,h:17,i:18,j:19,k:20,l:21,m:22,n:23,o:24,p:25,q:26,r:27,s:28,t:29,u:30,v:31,w:32,x:33,y:34,z:35}[s[A]];if(ae!==-1){if(ae===void 0)return[m,s.substring(A)];if(ae>=c)return[m,s.substring(A)];m=m*c+ae}}return[m,""]}function k5(s,o){if(typeof o=="number"&&typeof s=="number")return s.toFixed(o);let c=s.toString();if(typeof s=="number"&&Number.isInteger(s)&&c.includes("e")){let m=BigInt(s).toString(),A=m.match(/0+$/);if((A?A[0].length:0)<=5)return m}else if(typeof s=="bigint"){let m=c.match(/0+$/),A=m?m[0].length:0;if(A>5)return`${c.slice(0,-A)}e+${A}`}return c}function rw(s){if(typeof s=="number")return Number.isInteger(s)?BigInt(s):null;if(s==null||!M4(s))return null;let o=V4(s)?s.num:s;if(typeof o=="number")return Number.isInteger(o)?BigInt(o):null;if(typeof o!="string")return null;let c=o.toLowerCase().replace(/[nd]$/,"").replace(/[\u0009-\u000d\u0020\u00a0]/g,"");return c==="nan"||/^(infinity|\+infinity|oo|\+oo|-infinity|-oo)$/.test(c)?null:D3(c)}function sv(s,o){if(typeof s=="number")return isNaN(s)?"NaN":Number.isFinite(s)?typeof o=="number"?{num:s.toFixed(o)}:s:s<0?"NegativeInfinity":"PositiveInfinity";if(s>=Number.MIN_SAFE_INTEGER&&s<=Number.MAX_SAFE_INTEGER)return Number(s);let c=k5(s);return Number(s).toString()===c?Number(s):{num:c}}var b5=class Gv extends D6{__brand;rational;radical;im=0;factory;bignum;constructor(o,c,m){if(super(),this.factory=c,this.bignum=m,typeof o=="number"){this.rational=[o,1],this.radical=1;return}if(typeof o=="bigint"){this.rational=[o,BigInt(1)],this.radical=1;return}let A=o.rational?[...o.rational]:[1,1];this.rational=A,this.radical=o.radical??1,this.radical<=Q4&&this.radical>=1,this.normalize()}get type(){return this.isNaN?"number":this.isPositiveInfinity||this.isNegativeInfinity?"non_finite_number":this.radical!==1?(gy(this.rational),"finite_real"):c8(this.rational)?"finite_integer":"finite_rational"}get isExact(){return!0}get asExact(){return this}toJSON(){if(this.isNaN)return"NaN";if(this.isPositiveInfinity)return"PositiveInfinity";if(this.isNegativeInfinity)return"NegativeInfinity";if(this.isZero)return 0;if(this.isOne)return 1;if(this.isNegativeOne)return-1;let o=c=>c8(c)?sv(c[0]):["Rational",sv(c[0]),sv(c[1])];return this.radical===1?o(this.rational):M5(this.rational)?["Sqrt",this.radical]:j9(this.rational)?["Negate",["Sqrt",this.radical]]:this.rational[0]==1?["Divide",["Sqrt",this.radical],sv(this.rational[1])]:this.rational[0]==-1?["Negate",["Divide",["Sqrt",this.radical],sv(this.rational[1])]]:["Multiply",o(this.rational),["Sqrt",this.radical]]}clone(o){return new Gv(o,this.factory,this.bignum)}toString(){if(this.isZero)return"0";if(this.isOne)return"1";if(this.isNegativeOne)return"-1";let o=m=>c8(m)?k5(m[0]):`${k5(m[0])}/${k5(m[1])}`;if(this.radical===1)return o(this.rational);let c=m=>`sqrt(${k5(m)})`;return M5(this.rational)?c(this.radical):j9(this.rational)?`-${c(this.radical)}`:this.rational[0]==1?`${c(this.radical)}/${k5(this.rational[1])}`:this.rational[0]==-1?`-${c(this.radical)}/${k5(this.rational[1])}`:`${o(this.rational)}${c(this.radical)}`}get sign(){return gy(this.rational)?0:n9(this.rational)?1:-1}get re(){return Jx(this.rational)*Math.sqrt(this.radical)}get bignumRe(){let o,c=this.rational;return f6(c)?o=this.bignum(c[0]).div(c[1]):o=this.bignum(c[0].toString()).div(this.bignum(c[1].toString())),this.radical===1?o:o.mul(this.bignum(this.radical).sqrt())}get numerator(){return this.rational[1]==1?this:this.clone({rational:f6(this.rational)?[this.rational[0],1]:[this.rational[0],BigInt(1)],radical:this.radical})}get denominator(){return f6(this.rational)?this.clone(this.rational[1]):this.clone({rational:[this.rational[1],BigInt(1)]})}normalize(){if(Number.isInteger(this.radical)&&this.radical>0&&Number.isFinite(this.radical),isNaN(this.radical)){this.rational=[NaN,1],this.radical=1;return}let[o,c]=this.rational;if(c==0){this.rational=[NaN,1],this.radical=1;return}if(this.radical===0||o===0){this.rational=[0,1],this.radical=1;return}if(this.radical>=4){let[m,A]=An(this.radical,2);typeof this.rational[0]=="number"?this.rational[0]*=m:this.rational=Xy(this.rational,[m,1]),this.radical=A}this.rational=H9(this.rational)}get isNaN(){return Number.isNaN(this.rational[0])}get isPositiveInfinity(){return this.rational[0]==1/0}get isNegativeInfinity(){return this.rational[0]==-1/0}get isComplexInfinity(){return!1}get isZero(){return gy(this.rational)}get isOne(){return!(this.rational[0]!==this.rational[1]||this.radical!==1)}get isNegativeOne(){return!(this.rational[0]!==-this.rational[1]||this.radical!==1)}sgn(){if(!Number.isNaN(this.rational[0]))return gy(this.rational)?0:n9(this.rational)?1:-1}N(){return this.isZero||this.isOne||this.isNegativeOne?this:this.rational[1]==1&&this.radical===1?this:this.factory(this.bignumRe)}neg(){return this.isZero?this:this.clone({rational:a9(this.rational),radical:this.radical})}inv(){return this.isOne?this:this.isNegativeOne?this:this.clone({rational:f6(this.rational)?[this.rational[1],this.rational[0]*this.radical]:[this.rational[1],this.rational[0]*BigInt(this.radical)],radical:this.radical})}add(o){return typeof o=="number"?o===0?this:Number.isInteger(o)&&this.radical===1?this.clone({rational:f6(this.rational)?[this.rational[0]+o*this.rational[1],this.rational[1]]:[this.rational[0]+BigInt(o)*this.rational[1],this.rational[1]]}):this.factory(this.bignumRe).add(o):o.isZero?this:this.isZero?o:o instanceof Gv?this.radical===o.radical?this.clone({rational:h8(this.rational,o.rational),radical:this.radical}):this.factory(this.bignumRe).add(o):o.add(this)}sub(o){return this.add(o.neg())}mul(o){return o===0?this.clone(0):o===1?this:o===-1?this.neg():typeof o=="number"?Number.isInteger(o)?this.clone({rational:f6(this.rational)?[this.rational[0]*o,this.rational[1]]:[this.rational[0]*BigInt(o),this.rational[1]],radical:this.radical}):this.factory(this.bignumRe).mul(o):o instanceof e4?this.factory(o).mul(this):o.im!==0?o.mul(this):o.isZero?o:o.isOne?this:o.isNegativeOne?this.neg():o.isNaN?o:this.isZero?this:this.isOne?o:this.isNegativeOne?o.neg():o instanceof Gv?this.clone({rational:Xy(this.rational,o.rational),radical:this.radical*o.radical}):o.mul(this)}div(o){if(typeof o=="number")return o===1?this:o===-1?this.neg():o===0?this.clone(NaN):this.clone({rational:f6(this.rational)?[this.rational[0],this.rational[1]*o]:[this.rational[0],this.rational[1]*BigInt(o)],radical:this.radical});if(o.isOne)return this;if(o.isNegativeOne)return this.neg();if(this.isZero)return o.isZero?this.clone(NaN):o.isNaN?o:this;if(o.isNaN)return o;if(o.isZero)return this.clone(this.sign*(1/0));if(!(o instanceof Gv))return this.factory(this.bignumRe).div(o);if(o.im!==0)return this.factory(this.bignumRe).div(o);let c;if(f6(this.rational)&&f6(o.rational)){let[m,A]=this.rational,[ae,qe]=o.rational;c=[m*qe,A*ae*o.radical]}else c=Xy(this.rational,[BigInt(o.rational[1]),BigInt(o.rational[0])*BigInt(o.radical)]);return this.clone({rational:c,radical:this.radical*o.radical})}pow(o){if(this.isNaN)return this;if(typeof o=="number"&&isNaN(o))return this.clone(NaN);if(o instanceof D6){if(o.isNaN)return this.clone(NaN);if(o.isZero)return this.clone(1);if(o.isOne)return this;if(o.im)o={re:o.re,im:o.im};else{if(o instanceof Gv&&o.radical===1&&o.rational[0]==1)return this.root(o.rational[0]);o=o.re}}if(o===.5)return this.sqrt();if(typeof o=="object"&&("re"in o||"im"in o))return this.factory(this.bignumRe).pow(o);if(this.isPositiveInfinity){if(o===-1)return this.clone(0);if(o===1/0)return this.clone(1/0);if(o===-1/0)return this.clone(0)}else if(this.isNegativeInfinity&&o===1/0)return this.clone(NaN);if((o===1/0||o===-1/0)&&(this.isOne||this.isNegativeOne))return this.clone(NaN);if(o===1)return this;if(o===-1)return this.inv();if(o===0)return this.clone(1);if(this.isZero){if(o>0)return this;if(o<0)return this.factory({im:1/0})}if(o<0)return this.pow(-o).inv();if(o%1===.5)return this.pow(Math.floor(o)).mul(this.sqrt());if(this.radical>Q4||this.rational[0]>Q4||this.rational[0]<-Q4||this.rational[1]>Q4)return this.factory(this.bignumRe).pow(o);if(this.sign<0){if(Number.isInteger(o)){let c=o%2===0?1:-1;return this.clone({rational:f6(this.rational)?[c*(-this.rational[0])**o,this.rational[1]**o]:[BigInt(c)*(-this.rational[0])**BigInt(o),this.rational[1]**BigInt(o)],radical:this.radical**o})}return this.factory({im:(-this.re)**o})}else if(Number.isInteger(o))return this.clone({rational:f6(this.rational)?[this.rational[0]**o,this.rational[1]**o]:[BigInt(this.rational[0])**BigInt(o),this.rational[1]**BigInt(o)],radical:this.radical**o});return this.factory(this.bignumRe).pow(o)}root(o){if(o===0)return this.clone(NaN);if(this.isNaN)return this;if(this.isZero)return this;if(o===1)return this;if(o===-1)return this.inv();if(o<0)return this.root(-o).inv();if(o%1===.5)return this.root(Math.floor(o)).sqrt();if(this.radical===1){if(this.sign>0){let c=this.re;if(Number.isInteger(c)){if(c>0){let m=Math.pow(c,1/o);if(Number.isInteger(m))return this.clone(m)}return this.factory(this.bignumRe).root(o)}}return this.factory(this.bignumRe).root(o)}if(this.sign<0)return this.factory({im:Math.pow(-this.re,1/o)});if(this.radical>Q4||this.rational[0]>Q4||this.rational[0]<-Q4||this.rational[1]>Q4)return this.factory(this.bignumRe).root(o);if(this.rational[1]==1){let c=Math.pow(this.rational[0],1/o);if(Number.isInteger(c))return this.clone(c)}return this.factory(this.bignumRe).root(o)}sqrt(){if(this.isZero||this.isOne)return this;if(this.radical===1)if(f6(this.rational)){let[o,c]=this.rational;return o*c>Q4?this.factory(this.bignumRe).sqrt():o>0?this.clone({radical:o*c,rational:[1,c]}):this.factory({im:Math.sqrt(-o*c)/c})}else return this.factory(this.bignumRe).sqrt();if(this.sign>0){let o=Math.sqrt(this.re);if(Number.isInteger(o))return this.clone(o)}return this.factory(this.bignumRe).sqrt()}gcd(o){if(!(o instanceof Gv))return o.gcd(this);if(this.isOne||o.im!==0||o.isOne)return this.clone(1);let c=F_(this.rational,o.rational),m=eh(this.radical,o.radical);return this.clone({rational:c,radical:m})}abs(){return this.sign===-1?this.neg():this}ln(o){return this.isZero?this.clone(NaN):this.isPositiveInfinity?this.clone(1/0):this.sign<0?this.clone(NaN):this.isOne?this.clone(0):this.isNegativeOne?this.factory({im:Math.PI}):this.factory(this.bignumRe).ln(o)}exp(){return this.isNaN?this.clone(NaN):this.isZero?this.clone(1):this.isNegativeInfinity?this.clone(0):this.isPositiveInfinity?this.clone(1/0):this.factory(this.bignumRe).exp()}floor(){return this.isNaN?this.clone(NaN):this.type==="integer"?this:this.clone(Math.floor(this.re))}ceil(){return this.isNaN?this.clone(NaN):this.type==="integer"?this:this.clone(Math.ceil(this.re))}round(){return this.isNaN?this.clone(NaN):this.type==="integer"?this:this.clone(Math.round(this.re))}eq(o){return typeof o=="number"?this.radical===1&&c8(this.rational)&&this.rational[0]==o:o instanceof Gv?this.radical===o.radical&&this.rational[0]==o.rational[0]&&this.rational[1]==o.rational[1]:o.im===0&&o.re===this.re}lt(o){return this.im,typeof o=="number"?this.re<o:this.re<o.re}lte(o){return this.im,typeof o=="number"?this.re<=o:this.re<=o.re}gt(o){return this.im,typeof o=="number"?this.re>o:this.re>o.re}gte(o){return this.im,typeof o=="number"?this.re>=o:this.re>=o.re}static sum(o,c,m){if(o.length===1)return o;if(o.some(Hc=>!Hc.isExact)){if(o.length===2)return[o[0].add(o[1])];let Hc=c(0);for(let mf of o)Hc=Hc.add(mf);return[Hc]}let A=0,ae=[0,1],qe=[];for(let Hc of o){if(Hc.isNaN)return[new Gv(NaN,c,m)];if(!Hc.isZero)if(A+=Hc.im,Hc instanceof Gv){let mf=Hc.rational;if(Hc.radical===1)ae=h8(ae,mf);else{let p1=qe.findIndex(M1=>M1.radical===Hc.radical);p1===-1?qe.push({multiple:mf,radical:Hc.radical}):qe[p1].multiple=h8(qe[p1].multiple,mf)}}else X2(Hc.type,"integer"),ae=h8(ae,[Hc.re,1])}if(gy(ae)&&qe.length===0)return A===0?[new Gv(0,c,m)]:[c({im:A})];let So=[];return A!==0&&So.push(c({im:A})),qe.length===0?So.push(new Gv({rational:ae},c,m)):(qe.push({multiple:ae,radical:1}),So.push(...qe.map(Hc=>new Gv({rational:Hc.multiple,radical:Hc.radical},c,m)))),So}};function Zy(s){let o=s.numericValue;if(o===null||typeof o=="number"&&!Number.isFinite(o)||o instanceof D6&&(o.isNaN||o.isPositiveInfinity||o.isNegativeInfinity))return;if(typeof o=="number")return Number.isInteger(o)?[o,1]:void 0;let c=o.type;if(c!=="finite_integer"&&c!=="finite_rational"||o.im!==0)return;if(o instanceof b5)return o.radical!==1?void 0:o.rational;let m=o.bignumRe;if(m!==void 0&&Number.isInteger(m))return[D3(m),BigInt(1)];let A=o.re;if(Number.isInteger(A))return[A,1]}function R7(s){if(s==null)return null;if(typeof s=="bigint")return s;if(typeof s=="number"&&Number.isInteger(s))return BigInt(s);if(V7(s)){let o=s.numericValue;if(o===null)return null;if(typeof o=="number")return Number.isInteger(o)?BigInt(o):null;if(o.im!==0)return null;let c=o.bignumRe;return c?.isInteger()?D3(c):Number.isInteger(o.re)?BigInt(o.re):null}return s instanceof e4||typeof s=="string"?D3(s):s instanceof Bs?s.im===0?D3(s.re):null:rw(s)}function f8(s){if(s==null)return null;let o=typeof s=="number"?s:s.numericValue;if(o===null)return null;if(typeof o=="number")return s.engine.bignum(o);if(o.im!==0)return null;let c=o.bignumRe??o.re;return typeof c=="number"&&isNaN(c)?null:s.engine.bignum(c)}function R6(s){if(s==null)return null;if(typeof s=="number")return Number.isInteger(s)&&s>=-Q4&&s<=Q4?s:null;let o=s.numericValue;if(o===null)return null;if(typeof o=="number")return Number.isInteger(o)&&o>=-Q4&&o<=Q4?o:null;if(o.im!==0)return null;let c=o.re;return Number.isInteger(c)&&c>=-Q4&&c<=Q4?Number(c):null}function d3(s){let o=s?.numericValue??void 0;return o===void 0?null:Math.round(typeof o=="number"?o:o.re)}function z6(s){if(s==null)return null;let o=s.numericValue;if(o===null)return null;if(typeof o=="number")return BigInt(Math.round(o));let c=o.bignumRe??o.re;return typeof c=="number"?BigInt(Math.round(c)):D3(c.round())}function K5(s){if(s.symbol&&!s.isConstant)return 1;if(s.operator==="Power"&&s.op2.isNumberLiteral){if(K5(s.op1)===0)return 0;let o=R6(s.op2);return o!==null&&o>0?o:0}if(s.operator==="Multiply"){let o=0;for(let c of s.ops){let m=K5(c);o=o+m}return o}if(s.operator==="Add"||s.operator==="Subtract"){let o=0;for(let c of s.ops)o=Math.max(o,K5(c));return o}return s.operator==="Negate"||s.operator==="Divide"?K5(s.op1):0}function ov(s){if(s.symbol&&!s.isConstant)return 1;if(s.operator==="Power"&&s.op2.isNumberLiteral){if(ov(s.op1)===0)return 0;let o=R6(s.op2);return o!==null&&o>0?o:0}if(s.operator==="Multiply"||s.operator==="Add"||s.operator==="Subtract"){let o=0;for(let c of s.ops)o=Math.max(o,K5(c));return o}return s.operator==="Negate"||s.operator==="Divide"?ov(s.op1):0}function V_(s){return s.symbol&&!s.isConstant?s.symbol:s.ops?s.ops.map(o=>V_(o)).join(" ").trim():""}function B_(s){return V_(s).split(" ").reverse().join(" ").trim()}function S6(s,o,c,m){if((s?.numericValue??null)===null)return;let A=s.engine,ae;if(s.im!==0)ae=m?.(A.complex(s.re,s.im));else{let qe=s.bignumRe;if(qe!==void 0&&e5(A)&&c)ae=c(qe);else{let So=s.re;e5(A)&&c?ae=c(A.bignum(So)):ae=o(So)}}if(ae!==void 0)return ae instanceof Bs?A.number(A._numericValue({re:ae.re,im:ae.im})):A.number(ae)}function bv(s,o,c,m,A){if(s.numericValue===null||o.numericValue===null)return;let ae=s.engine,qe;if((s.im!==0||o.im!==0)&&(qe=A?.(ae.complex(s.re,s.im),ae.complex(o.re,o.im))),qe===void 0&&m){let So=s.bignumRe,Hc=o.bignumRe;(So!==void 0||Hc!==void 0)&&(So??=ae.bignum(s.re),Hc??=ae.bignum(o.re),qe=m(So,Hc))}if(qe===void 0){let So=s.re,Hc=o.re;!isNaN(So)&&!isNaN(Hc)&&(e5(ae)&&m?qe=m(ae.bignum(s.bignumRe??So),ae.bignum(o.bignumRe??Hc)):qe=c(So,Hc))}if(qe!==void 0)return qe instanceof Bs?ae.number(ae._numericValue({re:ae.chop(qe.re),im:ae.chop(qe.im)})):ae.number(ae.chop(qe))}function d8(s){return s.operator==="Sqrt"||s.operator==="Power"&&s.op2.im===0&&s.op2.re===.5||s.operator==="Root"&&s.op2.im===0&&s.op2.re===2}function o9(s){if(d8(s))return Zy(s.op1)??null;if(s.operator==="Divide"&&s.op1.is(1)&&d8(s.op2)){let o=s.op2.re;return Number.isInteger(o)?[1,o]:null}return null}function Yv(s,o){let c=s.engine,m=s.isCanonical&&o.isCanonical,A=()=>c._fn("Power",[s,o],{canonical:m});if(s.operator==="Power"){let[So,Hc]=s.ops;return c._fn("Power",[So,c.box(["Multiply",Hc,o],{canonical:m||"Power"})])}if(o.isFunctionExpression||o.symbol!==null||!o.type.matches("number"))return A();if(s.isNumberLiteral&&s.is(0))return o.type.matches("imaginary")||o.isNaN||o.is(0)?c.NaN:o.isInfinity?o.isPositive?c.Zero:o.isNegative?c.ComplexInfinity:c.NaN:o.isGreater(0)?c.Zero:o.isLess(0)?c.ComplexInfinity:A();let ae=s.type.matches("number")&&(s.isFunctionExpression===!1||s.operator==="Negate");if(o.is(0))return ae&&s.isFinite!==void 0?s.isFinite?c.One:c.NaN:A();if(ae&&s.is(1))return o.isFinite?c.One:c.NaN;if(o.is(1)&&s.type.matches("number"))return s;if(o.is(-1)){if(ae){if(s.isInfinity&&(s.isNegative||s.isPositive))return c.Zero;if(s.is(-1))return c.NegativeOne;if(s.is(1))return c.One}return s.isCanonical?s.inv():c._fn("Power",[s,c.number(-1)],{canonical:!1})}if(o.isInfinity&&ae)return o.isPositive?s.is(-1)?c.NaN:s.isInfinity?c.ComplexInfinity:s.isNaN?c.NaN:s.isReal?s.isGreater(1)?c.PositiveInfinity:s.isLess(-1)?c.ComplexInfinity:c.Zero:A():o.isNegative?s.is(-1)?c.NaN:s.isInfinity?c.Zero:s.isNaN?c.NaN:s.isReal?s.isGreater(0)?s.isLess(1)?c.PositiveInfinity:c.Zero:s.isGreater(-1)?c.ComplexInfinity:c.Zero:A():c.NaN;if(s.isNumberLiteral&&s.isInfinity){if(o.type.matches("imaginary"))return c.NaN;if(o.type.matches("complex")&&!isNaN(o.re)){if(o.re>0)return c.ComplexInfinity;if(o.re<0)return c.Zero}}if(o.is(.5))return s.isCanonical?Yy(s,2):c._fn("Sqrt",[s],{canonical:!1});let qe=Zy(o);return qe!==void 0&&qe[0]===1&&qe[1]!==1?s.isCanonical?Yy(s,c.number(qe[1])):c._fn("Root",[s,c.number(qe[1])],{canonical:!1}):A()}function Yy(s,o){let c=s.engine,m;if(typeof o=="number"?m=o:o.isNumberLiteral&&o.im===0&&(m=o.re),m===1)return s;if(m===2){if(s.isNumberLiteral&&s.type.matches("rational")&&s.re<Q4){let A=s.sqrt();if(typeof A.numericValue=="number"||A.numericValue.isExact)return A}return c._fn("Sqrt",[s],{canonical:s.isCanonical})}return c._fn("Root",[s,typeof o=="number"?c.number(o):o],{canonical:s.isCanonical&&(typeof o=="number"||o.isCanonical)})}function R5(s,o,{numericApproximation:c}){if(!s.isCanonical||typeof o!="number"&&!o.isCanonical)return s.engine._fn("Power",[s,s.engine.box(o)],{canonical:!1});if(c&&s.isNumberLiteral){if(typeof o=="number")return S6(s,qe=>Math.pow(qe,o),qe=>qe.pow(o),qe=>qe.pow(o))??R5(s,o,{numericApproximation:!1});if(o.isNumberLiteral)return bv(s,o,(qe,So)=>Math.pow(qe,So),(qe,So)=>qe.pow(So),(qe,So)=>qe.pow(So))??R5(s,o,{numericApproximation:!1})}let m=s.engine;typeof o!="number"&&(o=o.canonical);let A=Yv(s,m.box(o));if(A.operator!=="Power")return A;let ae=typeof o=="number"?o:o.im===0?o.re:void 0;if(s.symbol==="ComplexInfinity")return m.NaN;if(s.symbol==="ExponentialE"){let qe=M8(o);if(qe!==void 0){if(qe=J3(qe),qe!==void 0)return m.function("Cos",[qe]).add(m.function("Sin",[qe]).mul(m.I)).simplify()}else{if(typeof o=="number")return m.number(m._numericValue(m.E.N().numericValue).pow(o));if(o.isNumberLiteral)return m.number(m._numericValue(m.E.N().numericValue).pow(o.numericValue))}}if(s.operator==="Power"){let[qe,So]=s.ops;return R5(qe,So.mul(o),{numericApproximation:c})}if(s.operator==="Divide"){let[qe,So]=s.ops;return R5(qe,o,{numericApproximation:c}).div(R5(So,o,{numericApproximation:c}))}if(s.operator==="Negate"&&ae!==void 0)return ae%2===0?R5(s.op1,o,{numericApproximation:c}):R5(s.op1,o,{numericApproximation:c}).neg();if(s.operator==="Sqrt")return ae===2?s.op1:ae!==void 0&&ae%2===0?s.op1.pow(ae/2):R5(s.op1,o,{numericApproximation:c}).sqrt();if(s.operator==="Exp")return R5(m.E,s.op1.mul(o),{numericApproximation:c});if(s.operator==="Multiply"){let qe=s.ops.map(So=>R5(So,o,{numericApproximation:c}));return m._fn("Multiply",qe)}if(typeof o!="number"&&o.isNumberLiteral){let qe=Zy(o);if(qe!==void 0&&qe[0]===1)return G9(s,m.number(qe[1]),{numericApproximation:c})}if(s.operator==="Root"){let[qe,So]=s.ops;return R5(qe,m.box(o).div(So),{numericApproximation:c})}if(s.isNumberLiteral&&Number.isInteger(ae)){let qe=s.numericValue;return typeof qe=="number"?S6(s,So=>Math.pow(So,ae),So=>So.pow(ae),So=>So.pow(ae))??m._fn("Power",[s,m.box(o)]):m.number(qe.pow(ae))}return m._fn("Power",[s,m.box(o)])}function G9(s,o,{numericApproximation:c}){if(!s.isCanonical||!o.isCanonical)return s.engine._fn("Root",[s,o],{canonical:!1});if(c&&s.isNumberLiteral&&o.isNumberLiteral){let m=s.isNegative,A=o.isEven;return m&&(s=s.neg()),bv(s,o,(ae,qe)=>{let So=Math.pow(ae,1/qe);return m&&!A?-So:So},(ae,qe)=>{let So=ae.pow(qe.pow(-1));return m&&!A?So.neg():So},(ae,qe)=>{let So=ae.pow(typeof qe=="number"?1/qe:qe.inverse());return m&&!A?So.neg():So})??G9(s,o,{numericApproximation:!1})}if(s.isNumberLiteral&&o.isNumberLiteral&&o.isInteger){let m=typeof o=="number"?o:o.im===0?o.re:void 0;if(m!==void 0)if(typeof s.numericValue=="number"){let A=s.engine._numericValue(s.numericValue)?.root(m);if(A?.isExact)return s.engine.number(A)}else{let A=s.numericValue.asExact?.root(m);if(A?.isExact)return s.engine.number(A)}}return s.engine._fn("Root",[s,o])}var Fv=1e5,iw={Sin:!0,Cos:!0,Tan:!0,Cot:!0,Sec:!0,Csc:!0,Sinh:!0,Cosh:!0,Tanh:!0,Coth:!0,Sech:!0,Csch:!0,Arcsin:!0,Arccos:!0,Arctan:!0,Arccot:!0,Arcsec:!0,Arccsc:!0,Arcsinh:!0,Arccosh:!0,Arctanh:!0,Arccoth:!0,Arccsch:!0,Arcsech:!0};function _v(s){return!s||typeof s!="string"?!1:s in iw}function xv(s,o){let c=K5(s),m=K5(o);if(c!==m)return m-c;let A=ov(s),ae=ov(o);if(A!==ae)return ae-A;let qe=B_(s),So=B_(o);if(qe||So){if(!qe)return 1;if(!So||qe<So)return-1;if(qe>So)return 1}return y6(s,o)}var vy=["integer","rational","radical","real","complex","constant","symbol","multiply","divide","add","trig","fn","power","string","other"];function q_(s){if(typeof s.numericValue=="number")return Number.isInteger(s.numericValue)?"integer":"real";if(s.numericValue){let o=s.numericValue.type;return o==="integer"||o==="finite_integer"?"integer":o==="rational"||o==="finite_rational"?"rational":o==="real"||o==="finite_real"?"real":o==="complex"||o==="finite_complex"||o==="imaginary"||o==="finite_number"?"complex":o==="non_finite_number"?"constant":o==="number"?"real":"other"}return s.symbol==="ImaginaryUnit"?"complex":o9(s)?"radical":s.symbol&&s.isConstant?"constant":s.symbol?"symbol":_v(s.operator)?"trig":s.operator==="Add"?"add":s.operator==="Power"||s.operator==="Root"?"power":s.operator==="Multiply"||s.operator==="Negate"?"multiply":s.operator==="Divide"?"divide":s.operator==="Rational"?"rational":s.operator==="Complex"?s.im!==0?"complex":"real":s.operator==="Sqrt"?s.op1.isNumberLiteral&&(s.op1.isInteger||s.op1.isRational)?"radical":"power":s.ops?"fn":s.string?"string":"other"}function y6(s,o){if(s===o)return 0;let c=q_(s),m=q_(o);if(c!==m)return vy.indexOf(c)-vy.indexOf(m);if(c==="complex"){let[A,ae]=K9(s),[qe,So]=K9(o);return ae!==So?ae-So:A-qe}if(c==="integer"||c==="rational"||c==="real"){let A=s.numericValue,ae=o.numericValue;A===null&&s.operator==="Rational"&&(A=s.op1.re/s.op2.re),ae===null&&o.operator==="Rational"&&(ae=o.op1.re/o.op2.re);let qe=typeof A=="number"?A:A.re,So=typeof ae=="number"?ae:ae.re;return qe-So}if(c==="radical")return y6(s.op1,o.op1);if(c==="constant"||c==="symbol")return s.symbol===o.symbol?0:s.symbol>o.symbol?1:-1;if(c==="add"){let A=s.ops,ae=o.ops;if(A.length!==ae.length)return ae.length-A.length;for(let qe=0;qe<A.length;qe++){let So=y6(A[qe],ae[qe]);if(So!==0)return So}return 0}if(c==="power"){let A=K5(s),ae=K5(o);if(A!==ae)return ae-A;let qe=ov(s),So=ov(o);return qe!==So?qe-So:y6(s.op1,o.op1)}if(c==="multiply"){let A=K5(s),ae=K5(o);if(A!==ae)return ae-A;let qe=ov(s),So=ov(o);if(qe!==So)return qe-So;let Hc=s.ops,mf=o.ops;if(Hc.length!==mf.length)return mf.length-Hc.length;for(let p1=0;p1<Hc.length;p1++){let M1=y6(Hc[p1],mf[p1]);if(M1!==0)return M1}return 0}if(c==="divide"){let A=K5(s.op1),ae=K5(o.op1);if(A!==ae)return ae-A;let qe=ov(s.op1),So=ov(o.op1);if(qe!==So)return qe-So;let Hc=y6(s.op1,o.op1);return Hc!==0?Hc:y6(s.op2,o.op2)}if(c==="fn"||c==="trig"){if(s.operator==o.operator&&s.nops===1&&o.nops===1)return y6(s.op1,o.op1);let A=s.operatorDefinition?.complexity??Fv,ae=o.operatorDefinition?.complexity??Fv;return A===ae?s.operator===o.operator?p8(s)-p8(o):s.operator<o.operator?1:-1:A-ae}return c==="string"?s.string===o.string?0:o.string<s.string?-1:1:(s.complexity??Fv)-(o.complexity??Fv)}function Qv(s,{recursive:o=!1}){if(s.isCanonical||!s.ops)return s;let c=s.ops;return o&&(c=c.map(m=>Qv(m,{recursive:o}))),c=L6(s.operator,c),s.engine._fn(s.operator,c,{canonical:!1})}function L6(s,o){if(o.length===0)return o;let c=o[0].engine;if(s==="Add")return[...o].sort(xv);if(s==="Multiply")return[...o].sort(y6);let m=c.lookupDefinition(s);return!m||!E6(m)||!m.operator.commutative?o:m.operator.commutativeOrder?[...o].sort(m.operator.commutativeOrder):[...o].sort(y6)}function p8(s){return s.ops?1+[...s.ops].reduce((o,c)=>o+p8(c),0):1}function K9(s){if(s.symbol==="ImaginaryUnit")return[0,1];if(s.numericValue){if(typeof s.numericValue=="number")return[s.numericValue,0];let o=s.numericValue;return[o.re,o.im]}if(s.operator==="Complex"){let o=s.op1.numericValue;if(o===null)return[0,0];let c=typeof o=="number"?o:o.re,m=s.op2.numericValue;if(m===null)return[0,0];let A=typeof m=="number"?m:m.re;return[c,A]}return[0,0]}var $_=new Set(["engine","name","description","examples","wikidata","url","lazy","scoped","broadcastable","associative","commutative","commutativeOrder","idempotent","involution","pure","inferredSignature","signature","type","sgn","even","complexity","canonical","evaluate","evaluateAsync","evalDimension","compile","eq","neq","cmp","collection"]),W9=class{engine;name;description;url;wikidata;broadcastable=!1;associative=!1;commutative=!1;commutativeOrder;idempotent=!1;involution=!1;pure=!0;complexity=Fv;lazy=!1;scoped=!1;signature;inferredSignature=!0;type;sgn;eq;neq;even;canonical;evaluate;evaluateAsync;evalDimension;compile;collection;constructor(s,o,c){this.name=o,this.engine=s,c.signature?(this.inferredSignature=!1,this.signature=c.signature instanceof I4?c.signature:new I4(c.signature,s._typeResolver)):this.signature=new I4("(any*) -> unknown"),this.update(c),s.listenToConfigurationChange(this)}toJSON(){let s={name:this.name};return this.wikidata&&(s.wikidata=this.wikidata),this.description&&(s.description=this.description),this.url&&(s.url=this.url),s.broadcastable=this.broadcastable,s.associative=this.associative,s.commutative=this.commutative,s.idempotent=this.idempotent,s.involution=this.involution,s.pure=this.pure,s.lazy=this.lazy,s.complexity=this.complexity,s.scoped=this.scoped,s.signature=this.signature.toString(),s.inferredSignature=this.inferredSignature,this.collection&&(s.collection=this.collection),s}infer(s){let o=new I4(s,this.engine._typeResolver);if(!o.matches(this.signature))throw new Error(`Operator Definition "${this.name}": inferred signature "${o}" does not match current signature "${this.signature}"`);this.inferredSignature&&(this.signature=o)}update(s){if(this.engine.strict){for(let A in s)if(!$_.has(A))throw new Error(`Operator Definition "${this.name}": unexpected key "${A}"`)}if("name"in s&&s.name!==this.name)throw new Error(`Operator Definition "${this.name}": cannot change name to "${s.name}"`);if("engine"in s&&s.engine!==this.engine)throw new Error(`Operator Definition "${this.name}": cannot change engine`);this.lazy=s.lazy??this.lazy,this.scoped=s.scoped??this.scoped;let o=s.idempotent??this.idempotent,c=s.involution??this.involution;if(o&&c)throw new Error(`Operator Definition "${this.name}": the 'idempotent' and 'involution' flags are mutually exclusive`);if(this.idempotent=o,this.involution=c,this.description=s.description??this.description,this.collection=s.collection??this.collection,this.url=s.url??this.url,this.wikidata=s.wikidata??this.wikidata,this.broadcastable=s.broadcastable??this.broadcastable,this.associative=s.associative??this.associative,this.commutative=s.commutative??this.commutative,this.commutativeOrder=s.commutativeOrder??this.commutativeOrder,this.commutativeOrder&&!this.commutative)throw new Error(`Operator Definition "${this.name}": the 'commutativeOrder' handler requires the 'commutative' flag`);if(s.canonical&&(s.associative||s.commutative||s.idempotent||s.involution))throw new Error(`Operator Definition "${this.name}": the 'canonical' handler is incompatible with the 'associative', 'commutative', 'idempotent', and 'involution' flags`);if(this.pure=s.pure??this.pure,this.complexity=s.complexity??this.complexity,s.signature){let A=s.signature,ae=s.signature instanceof I4?s.signature:this.engine.type(s.signature);if(A&&!ae.matches(this.engine.type(A)))throw ae.matches(this.engine.type(A)),new Error(`Operator Definition "${this.name}": signature "${ae}" does not match "${A}"`);this.signature=ae,"inferredSignature"in s&&(this.inferredSignature=s.inferredSignature)}if(this.type=s.type??this.type,this.evaluateAsync=s.evaluateAsync??this.evaluateAsync,this.canonical=s.canonical??this.canonical,this.evalDimension=s.evalDimension??this.evalDimension,this.sgn=s.sgn??this.sgn,this.even=s.even??this.even,this.compile=s.xcompile??this.compile,this.eq=s.eq??this.eq,this.neq=s.neq??this.neq,this.scoped=s.scoped??this.scoped,this.lazy=s.lazy??this.lazy,s.collection&&(this.collection=R_(s.collection)),this.collection){let A=H3(this.signature.type);if(!A)throw new Error(`Operator Definition "${this.name}": a collection handler is defined, but the signature "${this.signature}" does not have a result type`);if(!X2(A,"collection"))throw new Error(`Operator Definition "${this.name}": a collection handler is defined, but the signature "${this.signature}" is not a collection type`);if(X2(A,"indexed_collection")&&!this.collection.at)throw new Error(`Operator Definition "${this.name}" returns an indexed collection, but the 'at' handler is missing`)}let m;if(s.evaluate&&typeof s.evaluate!="function"){let A=this.scoped?{parent:this.engine.context.lexicalScope,bindings:new Map}:void 0,ae=this.engine.box(s.evaluate,{canonical:!1,scope:A});if(!ae.isValid)throw Error(`Invalid function ${ae.toString()}`);let qe=N6(ae);m=So=>qe(So),Object.defineProperty(m,"toString",{value:()=>ae.toString()})}else m=s.evaluate??this.evaluate;this.evaluate=m}onConfigurationChange(){}};function Qy(s){if(s.operator==="Interval"){let o=s.op1,c=s.op2,m=!1,A=!1;o.operator==="Open"?(m=!0,o=o.op1):o.operator==="Closed"&&(o=o.op1),c.operator==="Open"?(A=!0,c=c.op1):c.operator==="Closed"&&(c=c.op1);let ae=o.N(),qe=c.N();return!ae.isNumberLiteral||!qe.isNumberLiteral?void 0:{start:ae.re,openStart:m,end:qe.re,openEnd:A}}if(s.symbol==="EmptySet")return{start:0,openStart:!0,end:0,openEnd:!0};if(s.symbol==="RealNumbers")return{start:-1/0,openStart:!1,end:1/0,openEnd:!1};if(s.symbol==="NegativeNumbers")return{start:-1/0,openStart:!1,end:0,openEnd:!0};if(s.symbol==="NonPositiveNumbers")return{start:-1/0,openStart:!1,end:0,openEnd:!1};if(s.symbol==="PositiveNumbers")return{start:0,openStart:!0,end:1/0,openEnd:!1};if(s.symbol==="NonNegativeNumbers")return{start:0,openStart:!1,end:1/0,openEnd:!1}}var W5=class extends Error{cause;value;constructor({message:s,value:o,cause:c}={}){super(s??"Operation canceled"),o&&(this.value=o),this.cause=c,this.name="CancellationError"}};async function P7(s,o,c){let m=performance.now();for(;;){let A=performance.now(),ae=16;for(;performance.now()-A<ae;){let{done:qe,value:So}=s.next();if(qe)return So;if(c?.aborted)throw new W5({value:So,cause:c.reason});if(performance.now()-m>=o)throw new W5({value:So,cause:"timeout",message:`Timeout exceeded (${o}ms)`})}await new Promise(qe=>setTimeout(qe,0))}}function l9(s,o){let c=Date.now();for(;;){let{done:m,value:A}=s.next();if(m)return A;if(Date.now()-c>=o)throw new W5({value:A,cause:"timeout",message:`Timeout exceeded (${o}ms)`})}}function Jv(s,o,c){return o.every(m=>m.isCanonical)?o:o.map(m=>s.box(m,{scope:c}))}var m8=50,X9={List:{complexity:8200,signature:"(any*) -> list",type:(s,{engine:o})=>R4(`list<${I4.widen(...s.map(c=>c.type))}>`),canonical:nw,lazy:!0,evaluate:(s,{engine:o,materialization:c})=>{if(c)return o._fn("List",Z9(s).map(m=>m.evaluate({materialization:c})))},eq:u5,collection:e9()},Set:{complexity:8200,signature:"(any*) -> set",type:(s,{engine:o})=>R4(`set<${I4.widen(...s.map(c=>c.type))}>`),canonical:aw,eq:(s,o)=>{if(s.operator!==o.operator||s.nops!==o.nops)return!1;let c=m=>o.ops.some(A=>m.isSame(A));return s.ops.every(c)},collection:{...e9(),at:void 0,indexWhere:void 0}},Tuple:{description:"A fixed number of heterogeneous elements",complexity:8200,signature:"(any*) -> tuple",type:s=>R4(`tuple<${s.map(o=>o.type).join(", ")}>`),canonical:(s,{engine:o})=>o.tuple(...s),eq:u5,collection:{...e9(),keys:s=>["first","second","last"]}},KeyValuePair:{description:"A key/value pair",complexity:8200,signature:"(key: string, value: any) -> tuple<string, unknown>",type:([s,o])=>R4(`tuple<string, ${o.type}>`),canonical:(s,{engine:o})=>{let[c,m]=Iy(o,s,["string","any"]);return!c.isValid||!m.isValid?o._fn("KeyValuePair",[c,m]):o.tuple(c,m)}},Single:{description:"A tuple with a single element",complexity:8200,signature:"(value: any) -> tuple<any>",type:([s])=>R4(`tuple<${s.type}>`),canonical:(s,{engine:o})=>o.tuple(...zv(o,s,1))},Pair:{description:"A tuple of two elements",complexity:8200,signature:"(first: any, second: any) -> tuple<any, any>",type:([s,o])=>R4(`tuple<${s.type}, ${o.type}>`),canonical:(s,{engine:o})=>o.tuple(...zv(o,s,2))},Triple:{description:"A tuple of three elements",complexity:8200,signature:"(first: any, second: any, third: any) -> tuple<any, any, any>",type:([s,o,c])=>R4(`tuple<${s.type}, ${o.type}, ${c.type}>`),canonical:(s,{engine:o})=>o.tuple(...zv(o,s,3))},Range:{complexity:8200,signature:"(number, number?, step: number?) -> indexed_collection<integer>",canonical:(s,{engine:o})=>s.length===0?null:s.length===1?o._fn("Range",[o.One,s[0].canonical]):s.length===2?o._fn("Range",[s[0].canonical,s[1].canonical]):o._fn("Range",[s[0].canonical,s[1].canonical,s[2].canonical.evaluate()]),eq:(s,o)=>{if(s.operator!==o.operator)return!1;let[c,m,A]=wv(s),[ae,qe,So]=wv(o);return c===ae&&m===qe&&A===So},collection:{isLazy:s=>!0,count:s=>{let[o,c,m]=wv(s);return m===0?0:!isFinite(o)||!isFinite(c)?1/0:1+Math.max(0,Math.floor((c-o)/m))},contains:(s,o)=>{if(!o.type.matches("integer"))return!1;let c=o.re,[m,A,ae]=wv(s);return ae===0?!1:ae>0?c>=m&&c<=A:c<=m&&c>=A},iterator:s=>{let[o,c,m]=wv(s),A=m===0?0:Math.floor((c-o)/m)+1,ae=1;return{next:()=>ae===A+1?{value:void 0,done:!0}:(ae+=1,{value:s.engine.number(o+m*(ae-1-1)),done:!1})}},at:(s,o)=>{if(typeof o!="number")return;let[c,m,A]=wv(s);if(!(o<1||o>1+(m-c)/A))return s.engine.number(c+A*(o-1))},indexWhere:void 0,subsetOf:(s,o)=>{if(o.operator==="Range"){let[m,A,ae]=wv(s),[qe,So,Hc]=wv(o);return m>=qe&&A<=So&&ae%Hc===0}if(!o.isCollection)return!1;let c=1;for(let m of o.each()){if(!s.xcontains(m)||!s.at(c)?.isSame(m))return!1;c++}return!0},eltsgn:s=>{let[o,c,m]=wv(s);return m===0?"zero":m>0?o<=c?"positive":"negative":o>=c?"positive":"negative"},elttype:s=>"finite_integer"}},Interval:{description:"A set of real numbers between two endpoints. The endpoints may or may not be included.",complexity:8200,lazy:!0,signature:"(number, number) -> set<real>",canonical:([s,o],{engine:c})=>{if(!s||!o)return null;let[m,A]=Iy(c,[s.canonical,o.canonical],["number","number"]);return!m.isValid||!A.isValid?null:c._fn("Interval",[m,A])},eq:(s,o)=>{let c=Qy(s),m=Qy(o);return!c||!m?!1:c.start===m.start&&c.end===m.end&&c.openStart===m.openStart&&c.openEnd===m.openEnd},collection:{count:s=>1/0,iterator:s=>{let o=Qy(s);if(!o)return{next:()=>({value:void 0,done:!0})};if(o.start>=o.end)return{next:()=>({value:void 0,done:!0})};let c=s.engine,m=0,A=0;return{next:()=>{let ae=Math.pow(2,m);A>=ae&&(m++,A=0);let qe=(2*A+1)/Math.pow(2,m+1),So=o.start+qe*(o.end-o.start);return A++,{value:c.number(So),done:!1}}}},isEmpty:s=>{let o=Qy(s);return o?o.openStart&&o.start===o.end||o.openEnd&&o.start===o.end?!0:o.openStart&&o.openEnd?!1:o.start>=o.end:!1},isFinite:s=>!1,contains:(s,o)=>{let c=Qy(s);return!c||c.openStart&&o.isLessEqual(c.start)||c.openEnd&&o.isGreaterEqual(c.end)?!1:o.isGreaterEqual(c.start)&&o.isLessEqual(c.end)},eltsgn:s=>{let o=Qy(s);if(!o||o.start===o.end)return"unsigned";if(o.start>=0&&!o.openStart)return"non-negative";if(o.end<=0&&!o.openEnd)return"non-positive";if(o.start>0&&o.end>0)return"positive";if(o.start<0&&o.end<0)return"negative"},elttype:s=>{let o=Qy(s);return o?isFinite(o.start)&&isFinite(o.end)?"finite_real":"real":"never"}}},Linspace:{complexity:8200,signature:"(start: number, end: number?, count: number?) -> indexed_collection",collection:{isLazy:s=>!0,count:s=>{let o=s.op3.re;return isFinite(o)||(o=m8),Math.max(0,Math.floor(o))},at:(s,o)=>{if(typeof o!="number")return;let c=s.op1.re,m=s.op2.re,A=s.op3.re;if(isFinite(A)||(A=m8),!(!isFinite(c)||!isFinite(m))&&!(o<1||o>A))return s.engine.number(c+(m-c)*(o-1)/A)},iterator:s=>{let o=s.op1.re,c=s.op2.re,m;isFinite(c)?m=Math.max(0,isFinite(s.op3.re)?s.op3.re:m8):(c=o,o=1,m=m8);let A=1;return{next:()=>A===m+1?{value:void 0,done:!0}:(A+=1,{value:s.engine.number(o+(c-o)*(A-1-1)/m),done:!1})}},contains:(s,o)=>{if(!o.type.matches("finite_real"))return!1;let c=o.re,m=s.op1.re,A=s.op2.re;if(c<m||c>A)return!1;let ae=s.op3.re;if(isFinite(ae)||(ae=m8),ae===0)return!1;let qe=(A-m)/ae;return(c-m)%qe===0}}},Contains:{description:"Return True if the collection contains the given value, False otherwise.",complexity:8200,signature:"(collection, any) -> boolean",evaluate:([s,o],{engine:c})=>s.xcontains(o)?c.True:c.False},Length:{complexity:8200,signature:"(collection) -> integer",evaluate:([s],{engine:o})=>s.isEmptyCollection?o.Zero:o.number(s.xsize),sgn:([s])=>s.isEmptyCollection?"zero":"positive"},IsEmpty:{complexity:8200,signature:"(collection) -> boolean",evaluate:([s],{engine:o})=>s.isEmptyCollection?o.True:o.False},Map:{description:["Return the collection where each element has been transformed by the mapping function.","Equivalent to `[f(x) for x in xs]`."],complexity:8200,lazy:!0,signature:"(collection, function) -> collection",type:s=>s[0].type,canonical:(s,{engine:o})=>{let c=t5(o,s[0]?.canonical,"collection"),m=y5(s[1]);return!c.isValid||!m?null:o._fn("Map",[c,m])},collection:{isLazy:s=>!0,count:s=>s.op1.xsize,isEmpty:s=>s.op1.isEmptyCollection,isFinite:s=>s.op1.isFiniteCollection,iterator:s=>{let o=N6(s.op2);if(!o)return{next:()=>({value:void 0,done:!0})};let c=s.op1.each();return{next:()=>{for(;;){let{value:m,done:A}=c.next();return A?{value:void 0,done:!0}:{value:o([m])??s.engine.Nothing,done:!1}}}}},at:(s,o)=>{if(!s.isIndexedCollection||typeof o!="number"||!Number.isFinite(o)||o===0)return;let c=s.op1.at(o);if(c)return N6(s.op2)?.([c])}}},Filter:{description:["Return the elements of the collection for which the predicate function returns True.","Equivalent to `[x for x in xs if p(x)]`."],complexity:8200,lazy:!0,signature:"(collection, predicate: function) -> collection",type:s=>s[0].type,canonical:(s,{engine:o})=>{let c=t5(o,s[0]?.canonical,"collection"),m=y5(s[1]);return!c.isValid||!m?null:o._fn("Filter",[c,m])},collection:{isLazy:s=>!0,count:s=>1/0,contains:(s,o)=>s.xcontains(o)?N6(s.op2)([o])?.symbol==="True":!1,iterator:s=>{let o=N6(s.op2);if(!o)return{next:()=>({value:void 0,done:!0})};let c=s.op1.each(),m=0,A=s.engine.iterationLimit;return{next:()=>{for(;;){let{value:ae,done:qe}=c.next();if(m+=1,m>A)throw new W5({cause:"iteration-limit-exceeded",message:`Iteration limit of ${A} exceeded while evaluating Filter()`});if(qe)return{value:void 0,done:!0};let So=o([ae]);if(!So)throw new Error(`Invalid filter predicate. ${Uv(s.op2)}`);if(So.symbol==="True")return{value:ae,done:!1};if(So.symbol!=="False")throw new Error(`Filter predicate must return "True" or "False". ${Uv(s.op2)}`)}}}},at:(s,o)=>{if(typeof o!="number"||!Number.isFinite(o)||o===0)return;let c=N6(s.op2);if(!c)return;if(o<0){if(!s.op1.isFiniteCollection)return;let A=Array.from(s.each()),ae=A.length+o+1;return ae<1||ae>A.length?void 0:A[ae-1]}let m=0;for(let A of s.op1.each()){let ae=c([A])?.symbol;if(ae==="True"){if(m+=1,m===o)return A}else if(ae!=="False")throw new Error(`Filter predicate must return "True" or "False". ${Uv(s.op2)}`)}}}},Reduce:{complexity:8200,lazy:!0,signature:"(collection, function, initial:value?) -> value",canonical:(s,{engine:o})=>{let c=t5(o,s[0],"collection"),m=y5(s[1]);if(!c.isValid||!m)return null;let A=s[2]?.canonical;return A?.isValid?o._fn("Reduce",[c,m,A]):o._fn("Reduce",[c,m])},type:s=>R4(H3(s[1].type.type)??"unknown"),evaluate:([s,o,c],{engine:m})=>{if(!s.isFiniteCollection)return;if(c??=m.Nothing,c.type.matches("real")&&s.type.matches(m.type("collection<real>"))){let So=o.compile();if(!So)return;let Hc=c.re,mf=!0;for(let p1 of s.each())mf?Hc=p1.re:Hc=So(Hc,p1.re),mf=!1;return m.box(Hc)}let A=N6(o),ae=c,qe=!0;for(let So of s.each())qe?ae=So:ae=A([ae,So])??m.Nothing,qe=!1;return ae}},Join:{description:["Join the elements of some collections into a flat collection."],complexity:8200,signature:"(collection*) -> collection",type:l5,collection:{isLazy:s=>!0,count:s=>{let o=0;for(let c of s.ops){let m=c.xsize;if(m===void 0)return;if(!Number.isFinite(m))return 1/0;o+=m}return o},contains:(s,o)=>s.ops.some(c=>c.xcontains(o)),iterator:s=>{let o=s.ops.map(m=>m.each()),c=0;return{next:()=>{for(;;){let{value:m,done:A}=o[c].next();if(!A)return{value:m,done:!1};if(c+=1,c>=o.length)return{value:void 0,done:!0}}}}}}},At:{description:["Access an element of an indexed collection.","If the index is negative, it is counted from the end."],complexity:8200,signature:"(value: list|tuple|string, index: number | string) -> unknown",type:([s])=>s.operatorDefinition?.collection?.elttype?.(s)??"any",evaluate:(s,{engine:o})=>{let c=s[0],m=1;for(;s[m];){let A=c.baseDefinition?.collection?.at;if(!A)return;let ae=s[m].string;if(ae!==null)c=A(c,ae)??o.Nothing;else{let qe=s[m].re;if(!Number.isInteger(qe))return;c=A(c,qe)??o.Nothing}m+=1}return c}},Take:{description:["Return `n` elements from a collection."],complexity:8200,signature:"(xs: indexed_collection, count: number) -> indexed_collection",type:([s])=>`list<${l6(s.type.type)}>`,evaluate:(s,{engine:o,materialization:c})=>{if(!c)return;let m=o._fn("Take",s),A=Array.from(m.each());return o._fn("List",A)},collection:{isLazy:s=>!0,count:H_,isEmpty:s=>{let[o,c]=s.ops;if(o.isEmptyCollection)return!0;if(o.isFiniteCollection===!1)return!1;let m=Math.max(0,d3(c)??0),A=o.xsize;if(A!==void 0)return Number.isFinite(m)?Math.min(A,m)===0:!1},isFinite:s=>s.op1.isFiniteCollection,iterator:lw,at:(s,o)=>{if(typeof o!="number"||o===0)return;let c=Math.max(0,d3(s.op2)??0);if(c===0)return;if(o>0)return o>c?void 0:s.op1.at(o);let m=H_(s);if(!(m===void 0||m===0)&&!(o<-m))return s.op1.at(m+o)}}},Drop:{description:["Return the collection without the first n elements."],complexity:8200,signature:"(xs: indexed_collection, count: number) -> indexed_collection",type:([s])=>`list<${l6(s.type.type)}>`,collection:{isLazy:s=>!0,count:s=>{let[o,c]=s.ops,m=o.xsize;if(m===void 0)return;if(!Number.isFinite(m))return 1/0;if(o.isEmptyCollection)return 0;let A=d3(c)??0;return A>=m?0:Math.max(0,m-A)},isFinite:s=>s.op1.isFiniteCollection,iterator:s=>{let[o,c]=s.ops,m=d3(c)??0;if(m<=0)return o.each();let A=m+1;return{next:()=>{let ae=s.op1.at(A++);return ae===void 0?{value:void 0,done:!0}:{value:ae,done:!1}}}},at:(s,o)=>{if(typeof o!="number")return;let[c,m]=s.ops,A=d3(m)??0;if(!(A<=0))return c.at(o+A)}}},First:{complexity:8200,signature:"(collection) -> any",type:([s])=>s.operatorDefinition?.collection?.elttype?.(s)??"any",evaluate:([s],{engine:o})=>s.at(1)??o.Nothing},Second:{complexity:8200,signature:"(collection) -> any",type:([s])=>s.operatorDefinition?.collection?.elttype?.(s)??"any",evaluate:([s],{engine:o})=>s.at(2)??o.Nothing},Last:{complexity:8200,signature:"(collection) -> any",type:([s])=>s.operatorDefinition?.collection?.elttype?.(s)??"any",evaluate:([s],{engine:o})=>s.at(-1)??o.Nothing},Rest:{description:["Return the collection without the first element.","If the collection has only one element, return an empty collection."],complexity:8200,signature:"(indexed_collection) -> indexed_collection",collection:{isLazy:s=>!0,count:s=>{let o=s.op1.xsize;if(o!==void 0)return Math.max(0,o-1)},isEmpty:s=>{if(s.op1.isEmptyCollection)return!0;let o=s.op1.xsize;if(o!==void 0)return o<=1},isFinite:s=>s.op1.isFiniteCollection,iterator:s=>({next:()=>{let o=1,c=s.op1.at(o>0?o+1:o);return c?(o+=1,{value:c,done:!1}):{value:void 0,done:!0}}}),at:(s,o)=>{if(typeof o=="number")return s.op1.at(o>0?o+1:o)}}},Most:{complexity:8200,description:["Return the collection without the last element.","If the collection has only one element, return an empty collection."],signature:"(indexed_collection) -> indexed_collection",collection:{isLazy:s=>!0,count:s=>{let o=s.op1.xsize;if(o!==void 0)return Math.max(0,o-1)},isFinite:s=>s.op1.isFiniteCollection,isEmpty:s=>{let o=s.op1.xsize;if(o!==void 0)return o<=1},iterator:s=>{let o=s.op1.xsize;if(o===void 0||o<=1)return{next:()=>({value:void 0,done:!0})};let c=1,m=o-1;return{next:()=>c>m?{value:void 0,done:!0}:{value:s.op1.at(c++),done:!1}}},at:(s,o)=>{if(typeof o!="number")return;let c=s.op1.xsize;if(c!==void 0&&(o<1&&(o=c+1+o),!(o<1||o>c-1)))return s.op1.at(o)}}},Slice:{description:["Return a range of elements from an indexed collection.","If the index is negative, it is counted from the end."],complexity:8200,signature:"(value: indexed_collection, start: number, end: number) -> list",type:([s])=>R4(`list<${l6(s.type.type)}>`),collection:{isLazy:s=>!0,count:s=>{let o=d3(s.op2)??1,c=s.op1.xsize;if(c===void 0)return;let m=d3(s.op3)??c;return o<1?Math.max(0,m+o-1):Math.max(0,Math.min(m,c)-o+1)},isFinite:s=>!0,at:(s,o)=>{if(typeof o!="number")return;let c=s.op1.xsize;if(c===void 0)return;let m=d3(s.op2)??1;m<1&&(m=c+1+m),m<1&&(m=1),!(m>c)&&d3(s.op3)},iterator:s=>{let o=d3(s.op2)??1,c=s.op1.xsize;if(c===void 0)return{next:()=>({value:void 0,done:!0})};if(o<1&&(o=c+1+o),o<1&&(o=1),o>c)return{next:()=>({value:void 0,done:!0})};let m=d3(s.op3)??c;m<1&&(m=c+1+m),m<1&&(m=1),m>c&&(m=c);let A=o,ae=m;return{next:()=>{if(A>ae)return{value:void 0,done:!0};let qe=s.op1.at(A);return A+=1,{value:qe,done:!1}}}}}},Reverse:{complexity:8200,signature:"(indexed_collection) -> indexed_collection",type:([s])=>s.type,collection:{isLazy:s=>!0,count:s=>s.op1.xsize,isEmpty:s=>s.op1.isEmptyCollection,isFinite:s=>s.op1.isFiniteCollection,contains:(s,o)=>s.op1.xcontains(o)??!1,iterator:s=>{let o=-1;return{next:()=>{if(o===0)return{value:void 0,done:!0};let c=s.op1.at(o);return o-=1,{value:c,done:!1}}}},at:(s,o)=>{if(typeof o=="number")return s.op1.at(-o)}}},RotateLeft:{description:"Rotate the elements of the collection to the left by n positions.",complexity:8200,signature:"(indexed_collection, integer?) -> indexed_collection",collection:{isLazy:s=>!0,count:s=>s.op1.xsize,isEmpty:s=>s.op1.isEmptyCollection,isFinite:s=>s.op1.isFiniteCollection,contains:(s,o)=>s.op1.xcontains(o)??!1,iterator:s=>{let o=s.op1.xsize;if(o===void 0||o<=0)return{next:()=>({value:void 0,done:!0})};let c=d3(s.op2)??1;c=(c%o+o)%o;let m=1,A=o;return{next:()=>{if(m===A+1)return{value:void 0,done:!0};m+=1;let ae=s.op1.at((m-1-1+c)%o+1);return ae===void 0?{value:void 0,done:!0}:{value:ae,done:!1}}}},at:(s,o)=>{if(typeof o!="number")return;let c=s.op1.xsize;if(c===void 0||c<=0||(o<1&&(o=c+1+o),o<1||o>c))return;let m=d3(s.op2)??1;return m=(m%c+c)%c,s.op1.at((o-1+m)%c+1)}}},RotateRight:{description:"Rotate the elements of the collection to the right by n positions.",complexity:8200,signature:"(indexed_collection, integer?) -> indexed_collection",collection:{isLazy:s=>!0,count:s=>s.op1.xsize,contains:(s,o)=>s.op1.xcontains(o)??!1,iterator:s=>{let o=s.op1.xsize;if(o===void 0||o<=0)return{next:()=>({value:void 0,done:!0})};let c=d3(s.op2)??1;c=(c%o+o)%o;let m=1;return{next:()=>{if(m===o+1)return{value:void 0,done:!0};m+=1;let A=(m-1-1+(o-c))%o+1,ae=s.op1.at(A);return ae===void 0?{value:void 0,done:!0}:{value:ae,done:!1}}}},at:(s,o)=>{if(typeof o!="number")return;let c=s.op1.xsize;if(c===void 0||c<=0||(o<1&&(o=c+1+o),o<1||o>c))return;let m=d3(s.op2)??1;m=(m%c+c)%c;let A=(o-1+(c-m))%c+1;return s.op1.at(A)}}},IndexOf:{description:"Return the 1-based index of the first occurrence of value in collection, or 0 if not found.",complexity:8200,signature:"(collection, any) -> integer",evaluate:([s,o],{engine:c})=>{let m=s.indexWhere(A=>A.isSame(o))??void 0;return c.number(m??0)}},IndexWhere:{description:"Return the 1-based index of the first element satisfying the predicate, or 0 if not found.",complexity:8200,signature:"(collection, function) -> integer",evaluate:([s,o],{engine:c})=>{let m=N6(o);if(!m)return c.Zero;let A=s.indexWhere(ae=>{let qe=m([ae])?.symbol;if(qe==="True")return!0;if(qe==="False")return!1;throw new Error(`Filter predicate must return "True" or "False". ${Uv(o)}`)})??void 0;return c.number(A??0)}},Find:{description:"Return the first element of the collection satisfying the predicate, or Nothing if none found.",complexity:8200,signature:"(collection, function) -> any",type:s=>s[0].type,evaluate:([s,o],{engine:c})=>{let m=N6(o);if(!m)return c.Nothing;for(let A of s.each()){let ae=m([A])?.symbol;if(ae!=="False"){if(ae==="True")return A;throw new Error(`Filter predicate must return "True" or "False". ${Uv(o)}`)}}return c.Nothing}},CountIf:{description:"Return the number of elements in the collection satisfying the predicate.",complexity:8200,signature:"(collection, function) -> integer",evaluate:([s,o],{engine:c})=>{let m=N6(o);if(!m)return c.Zero;let A=0;for(let ae of s.each()){let qe=m([ae])?.symbol;if(qe!=="False")if(qe==="True")A++;else throw new Error(`Filter predicate must return "True" or "False". ${Uv(o)}`)}return c.number(A)}},Position:{description:"Return a list of indexes of elements in the collection satisfying the predicate.",complexity:8200,signature:"(collection, function) -> list<integer>",type:()=>"list<integer>",evaluate:([s,o],{engine:c})=>{let m=N6(o);if(!m)return c.function("List",[]);let A=[],ae=1;for(let qe of s.each()){let So=m([qe])?.symbol;if(So==="True"&&A.push(c.number(ae)),So!=="False")throw new Error(`Filter predicate must return "True" or "False". ${Uv(o)}`);ae++}return c.function("List",A)}},Ordering:{description:"Return the indexes that would sort the collection.",complexity:8200,signature:"(indexed_collection, function?) -> list<integer>",evaluate:([s,o],{engine:c})=>{if(!s.isFiniteCollection)return c.function("List",[]);let m=j_(s,o);return m?c.function("List",m):c.function("List",[])}},Sort:{description:"Return the elements of the collection sorted according to the given comparison function.",complexity:8200,signature:"(indexed_collection, function?) -> indexed_collection",type:s=>s[0].type,evaluate:([s,o],{engine:c})=>{if(!s.isFiniteCollection)return c.function(s.operator,[]);let m=j_(s,o);if(m)return c.function(s.operator,m.map(A=>s.at(A)))}},Shuffle:{description:"Randomize the order of the elements in the collection.",complexity:8200,signature:"(indexed_collection) -> indexed_collection",type:s=>s[0].type,evaluate:([s],{engine:o})=>{if(!s.isFiniteCollection)return;let c=Array.from(s.each());for(let m=c.length-1;m>0;m--){let A=Math.floor(Math.random()*(m+1));[c[m],c[A]]=[c[A],c[m]]}return o.function(s.operator,c)}},Tabulate:{description:"Create a collection by applying a function to each index in the specified dimensions.",complexity:8200,lazy:!0,signature:"(function, integer, integer?) -> collection",canonical:(s,{engine:o})=>{let c=y5(s[0]);return c?s[2]?o._fn("Tabulate",[c,t5(o,s[1]?.canonical,"integer"),t5(o,s[2]?.canonical,"integer")]):o._fn("Tabulate",[c,t5(o,s[1]?.canonical,"integer")]):null},evaluate:(s,{engine:o})=>{let c=N6(s[0]);if(!c)return;if(s.length===1)return o._fn("List",[]);let m=s.slice(1).map(ae=>d3(ae));if(m.some(ae=>ae===null||ae<=0))return;if(m.length===1)return o._fn("List",Array.from({length:m[0]??0},(ae,qe)=>c([o.number(qe+1)])??o.Nothing));let A=(ae,qe,So=0)=>{if(So===ae.length){let mf=qe.map(p1=>o.number(p1));return c(mf)}let Hc=["List"];for(let mf=1;mf<=ae[So];mf++)qe[So]=mf,Hc.push(A(ae,qe,So+1));return Hc};return o.box(A(m,Array(m.length).fill(0)))}},Tally:{description:"Return a tuple with the unique elements of the collection and their respective counts.",complexity:8200,signature:"(collection) -> tuple<list, list<integer>>",type:([s],{engine:o})=>{let c=s.type.type;return R4(c==="string"?"tuple<list<string>, list<integer>>":`tuple<list<${l6(c)}>, list<integer>>`)},evaluate:(s,{engine:o})=>{if(!s[0].isFiniteCollection)return;let[c,m]=sw(s[0]);return o.tuple(o.function("List",c),o.function("List",m))}},Unique:{description:"Return a list of the unique elements of the collection.",complexity:8200,signature:"(collection) -> list",type:([s])=>`list<${l6(s.type.type)}>`,evaluate:(s,{engine:o})=>{if(!s[0].isFiniteCollection)return;let[c,m]=sw(s[0]);return o.function("List",c)}},Partition:{wikidata:"Q381060",complexity:8200,signature:"(collection, integer | function) -> list",type:([s])=>`list<${l6(s.type.type)}>`,evaluate:([s,o],{engine:c})=>{if(!s.isFiniteCollection)return;let m=d3(o);if(m!==null&&m>0){let So=Array.from(s.each()),Hc=[],mf=Math.ceil(So.length/m);for(let p1=0;p1<m;p1++){let M1=So.slice(p1*mf,(p1+1)*mf);Hc.push(c.function("List",M1))}return c.function("List",Hc)}let A=N6(o);if(!A)return;let ae=[],qe=[];for(let So of s.each()){let Hc=A([So])?.symbol;if(Hc==="True")ae.push(So);else if(Hc==="False")qe.push(So);else throw new Error(`Partition predicate must return "True" or "False". ${Uv(o)}`)}return c.function("List",[c.function("List",ae),c.function("List",qe)])}},Chunk:{description:"Split the collection into `k` nearly equal-sized chunks.",complexity:8200,signature:"(collection, integer) -> list<list>",evaluate:([s,o],{engine:c})=>{let m=d3(o);if(!s.isFiniteCollection||m===null||m<=0)return;let A=Array.from(s.each()),ae=[],qe=Math.ceil(A.length/m);for(let So=0;So<m;So++){let Hc=A.slice(So*qe,(So+1)*qe);ae.push(c.function("List",Hc))}return c.function("List",ae)}},GroupBy:{description:["Partition the collection into a dictionary of lists based on the key returned by the function."],complexity:8200,signature:"(collection, function) -> dictionary<list>",evaluate:([s,o],{engine:c})=>{if(!s.isFiniteCollection)return;let m=N6(o);if(!m)return;let A={};for(let ae of s.each()){let qe=m([ae])??c.Nothing,So=qe.symbol??qe.string??qe.toString();So in A||(A[So]=[]),A[So].push(ae)}return c.function("Dictionary",Object.entries(A).map(([ae,qe])=>c._fn("Tuple",[c.string(ae),c.function("List",qe)])))}},Zip:{description:"Combine multiple collections element-wise into a list of tuples. The result has the length of the shortest input.",complexity:8200,signature:"(indexed_collection+) -> list",collection:{isLazy:s=>!0,count:g8,isFinite:s=>s.ops.every(o=>o.isFiniteCollection),isEmpty:s=>s.nops===0||s.ops.every(o=>o.isEmptyCollection),iterator:s=>{let o=g8(s);if(o===void 0||o<=0)return{next:()=>({value:void 0,done:!0})};let c=1;return{next:()=>{if(c===o+1)return{value:void 0,done:!0};c+=1;let m=s.ops.map(A=>A.at(c-1));return m.some(A=>A===void 0)?{value:void 0,done:!0}:{value:s.engine.tuple(...m),done:!1}}}},at:(s,o)=>{if(typeof o!="number"||o<1)return;let c=g8(s);if(c===void 0||o<1||o>c)return;let m=s.ops.map(A=>A.at(o));if(!m.some(A=>A===void 0))return s.engine.tuple(...m)}}},Iterate:{description:"Produce an infinite sequence by repeatedly applying a function to the previous value, starting with an initial value.",complexity:8200,signature:"((index: integer, acc:any) -> any, initial: any?) -> list",canonical:([s,o],{engine:c})=>{let m=y5(s);if(!m)return null;let A=o?.canonical;return A?c._fn("Iterate",[m,A]):c._fn("Iterate",[m])},collection:{isLazy:s=>!0,count:()=>1/0,iterator:s=>{let o=N6(s.op1);if(!o)return{next:()=>({value:void 0,done:!0})};let c=s.op2??s.engine.Nothing,m=0;return{next:()=>(m+=1,c=o([s.engine.number(m),c])??s.engine.Nothing,{value:c,done:!1})}},at:(s,o)=>{if(typeof o!="number"||o<1)return;let c=N6(s.op1);if(!c)return;let m=s.op2??s.engine.Nothing;for(let A=1;A<o;A++)m=c([s.engine.number(A),m])??s.engine.Nothing;return m}}},Repeat:{description:"Produce an infinite sequence by repeating a single value.",complexity:8200,signature:"(value: any) -> list",collection:{isLazy:s=>!0,count:()=>1/0,isEmpty:s=>!1,isFinite:()=>!1,contains:(s,o)=>s.op1.isSame(o),iterator:s=>({next:()=>({value:s.op1,done:!1})}),at:(s,o)=>s.op1}},Cycle:{description:"Produce an infinite sequence by cycling through the elements of a finite collection.",complexity:8200,signature:"(list) -> list",collection:{isLazy:s=>!0,count:()=>1/0,isEmpty:s=>s.isEmptyCollection,isFinite:s=>!s.isEmptyCollection,contains:(s,o)=>s.op1.xcontains(o)??!1,iterator:s=>{let o=1,c=s.op1.xsize;return c===void 0||c===0?{next:()=>({value:void 0,done:!0})}:{next:()=>{let m=(o-1-1)%c+1,A=s.op1.at(m);return A===void 0?{value:void 0,done:!0}:(o+=1,{value:A,done:!1})}}},at:(s,o)=>{if(typeof o!="number"||o<1)return;let c=s.op1.xsize;if(c===void 0||c===0)return;let m=(o-1)%c+1;return s.op1.at(m)}}},Fill:{description:"Produce a 2D list (matrix) by applying a function to each pair of row and column indexes.",complexity:8200,signature:"(function, tuple) -> list",collection:{isLazy:s=>!0,count:s=>s.op2.ops.map(o=>d3(o)??0)[0]??0,iterator:s=>{let o=N6(s.op1);if(!o)return{next:()=>({value:void 0,done:!0})};let c=s.op2.ops.map(So=>d3(So)??0),m=c[0]??0,A=c[1]??0,ae=m,qe=1;return{next:()=>{if(qe===ae+1)return{value:void 0,done:!0};qe+=1;let So=[];for(let Hc=1;Hc<=A;Hc++)So.push(o([s.engine.number(qe-1),s.engine.number(Hc)])??s.engine.Nothing);return{value:s.engine.function("List",So),done:!1}}}},at:(s,o)=>{if(typeof o!="number"||o<1)return;let c=N6(s.op1);if(!c)return;let m=s.op2.ops.map(Hc=>d3(Hc)??0),A=m[0]??0,ae=m[1]??0;if(o>A*ae)return;let qe=Math.ceil(o/ae),So=(o-1)%ae+1;return c([s.engine.number(qe),s.engine.number(So)])??s.engine.Nothing}}},ListFrom:{description:"Create a list from the elements of a collection.",complexity:8200,signature:"(value*) -> list",type:s=>{if(s.length===0)return"list";let o="unknown";for(let c of s){if(c.isCollection&&!c.isFiniteCollection)return"list";o=y3(o,l6(c.type.type)??o)}return R4(`list<${u3(o)}>`)},evaluate:(s,{engine:o})=>{let c=[];for(let m of s)if(!m.isCollection)c.push(m);else{if(!m.isFiniteCollection)return;c.push(...Array.from(m.each()))}return o.function("List",c)}},SetFrom:{description:"Create a set from the elements of a collection.",complexity:8200,signature:"(value*) -> set",type:s=>{if(s.length===0)return"set";let o="unknown";for(let c of s){if(c.isCollection&&!c.isFiniteCollection)return"set";o=y3(o,l6(c.type.type)??o)}return R4(`set<${u3(o)}>`)},evaluate:(s,{engine:o})=>{let c=[];for(let m of s)if(m.isCollection)c.push(m);else{if(!m.isFiniteCollection)return;c.push(...Array.from(m.each()))}return o.function("Set",c)}},TupleFrom:{description:"Create a tuple from the elements of a collection.",complexity:8200,signature:"(value*) -> tuple",evaluate:(s,{engine:o})=>{let c=[];for(let m of s)if(m.isCollection)c.push(m);else{if(!m.isFiniteCollection)return;c.push(...Array.from(m.each()))}return o.tuple(...c)}},DictionaryFrom:{description:"Create a dictionary from the elements of a collection of (key, value) pairs.",complexity:8200,signature:"(collection) -> dictionary",evaluate:([s],{engine:o})=>{if(!s.isCollection)return;if(s.operator==="Record")return o.function("Dictionary",s.ops);let c=[];for(let m of s.each()){if(m.nops!==2)throw new Error(`Expected a collection of pairs, got ${m.type}`);let A=m.op1,ae=m.op2;if(!A.string)throw new Error(`Expected a string key, got ${A.type}`);c.push(o.tuple(A,ae))}return o.function("Dictionary",c)}},RecordFrom:{description:"Create a record from the elements of a collection of (key, value) pairs.",complexity:8200,signature:"(collection) -> record",evaluate:([s],{engine:o})=>{if(!s.isCollection)return;if(s.operator==="Dictionary")return o.function("Record",s.ops);let c=[];for(let m of s.each()){if(m.nops!==2)throw new Error(`Expected a collection of pairs, got ${m.type}`);let A=m.op1,ae=m.op2;if(!A.string)throw new Error(`Expected a string key, got ${A.type}`);c.push(o.tuple(A,ae))}return o.function("Record",c)}}};function wv(s){if(s.nops===0)return[1,0,0];let o=s.op1.re;if(isFinite(o)?o=Math.round(o):o=1,s.nops===1)return[1,o,1];let c=s.op2.re;if(!isFinite(c)&&!c?c=1:isFinite(c)&&(c=Math.round(c)),s.nops===2)return[o,c,c>o?1:-1];let m=s.op3.re;return isFinite(m)?m=Math.abs(Math.round(m)):m=1,[o,c,o<c?m:-m]}function z_(s){let[o,c,m]=s;return Number.isFinite(c)?m>0?c-(c-o)%m:c+(o-c)%m:m>0?1/0:-1/0}function nw(s,{engine:o}){let c=s[0];if(s.length===1&&c.operator==="Matrix"){let[m,A,ae]=c.ops;if(!A||A.string==="..")return ae?o._fn("Matrix",[m,o.string("[]"),ae]):o._fn("Matrix",[m,A])}return s=s.map(m=>m.operator==="Delimiter"?m.op1.operator==="Sequence"?o._fn("List",Jv(o,m.op1.ops)):o._fn("List",[m.op1?.canonical??o.Nothing]):m.canonical),o._fn("List",s)}function aw(s,{engine:o}){let c=[],m=A=>c.some(ae=>ae.isSame(A));for(let A of s)m(A)||c.push(A);return o._fn("Set",c)}function sw(s){let o=[],c=[],m=A=>{for(let ae=0;ae<o.length;ae++)if(o[ae].isSame(A))return ae;return-1};for(let A of s.each()){let ae=m(A);ae>=0?c[ae]++:(o.push(A),c.push(1))}return[o,c]}function*ow(s,o,c){let m=c,A=0;for(let ae of s.each()){let qe=o(m,ae);if(qe===null)return;A+=1,A%1e3===0&&(yield m),m=qe}return m}function l5(s){return s.some(o=>o.type.matches("record"))?"record":s.some(o=>o.type.matches("dictionary"))?"dictionary":s.some(o=>o.type.matches("set"))?"set":"list"}function u5(s,o){return s.operator!==o.operator||s.nops!==o.nops?!1:s.ops.every((c,m)=>c.isSame(o.ops[m]))}function U_(s,o){return Array.from({length:o-s+1},(c,m)=>s+m)}function j_(s,o=void 0){let c=o?N6(o):void 0,m=c?(qe,So)=>{let Hc=c([qe,So]);return Hc?.isNegative?-1:Hc?.is(0)?0:1}:(qe,So)=>qe.isLess(So)?-1:qe.isEqual(So)?0:1,A=s.xsize;if(A===void 0||!Number.isFinite(A)||A<1)return;let ae=Array.from({length:A},(qe,So)=>So+1);return ae.sort((qe,So)=>{let Hc=s.at(qe),mf=s.at(So);return m(Hc,mf)}),ae}function Z9(s){if(s.length===0)return[];let o=[];for(let c of s)c.symbol!=="Nothing"&&(c.operator==="Sequence"?o.push(...Z9(c.ops)):c.string?o.push(c):c.isCollection?o.push(...Z9([...c.each()])):o.push(c));return o}function lw(s){let o=Math.max(0,d3(s.op2)??0);if(o===0)return{next:()=>({value:void 0,done:!0})};let c=1,m=0;return{next:()=>{if(m>=Math.abs(o))return{value:void 0,done:!0};let A=s.op1.at(c);return A?(c+=1,m+=1,{value:A,done:!1}):{value:void 0,done:!0}}}}function H_(s){let[o,c]=s.ops,m=o.xsize;if(m===void 0)return;let A=Math.max(0,d3(c)??0);return Number.isFinite(A)?Math.min(m,A):1/0}function g8(s){let o=s.ops.map(c=>c.xsize);if(!o.some(c=>c===void 0))return o.some(c=>!Number.isFinite(c))?1/0:o.length===0?0:Math.min(...o)}function u9(s){s?.operator;let o=1,c=o+s5,m,A=!0;return m=s.op1.symbol,o=Math.floor(s.op2.re),isNaN(o)&&(o=1),Number.isFinite(o)||(A=!1),s.op3.symbol==="Nothing"||s.op3.isInfinity?A=!1:(isNaN(s.op3.re)||(c=Math.floor(s.op3.re??c)),Number.isFinite(c)||(A=!1)),!A&&Number.isFinite(o)&&(c=o+s5),{index:m,lower:o,upper:c,isFinite:A}}function uw(s){return s.map(o=>u9(o))}function cw(s){s.length>0;let{index:o,lower:c,upper:m,isFinite:A}=s[0];A||(m=c+s5);let ae=U_(c,m).map(qe=>[qe]);if(s.length===1)return ae;for(let qe=1;qe<s.length;qe++){let{index:So,lower:Hc,upper:mf,isFinite:p1}=s[qe];p1||(mf=Hc+s5),ae=hw(ae.map(M1=>M1[0]),U_(Hc,mf))}return ae}function hw(s,o){return s.flatMap(c=>o.map(m=>[c,m]))}function G_(s,o){let c=o.engine,m=[];for(let A=0;A<s.length;A++){let ae=s[A];ae.operator==="Range"?m.push(yy([c.Nothing,ae.op1,ae.op2],o)??c.error("missing")):ae.operator&&["Limits","Tuple","Triple","Pair","Single","Hold"].includes(ae.operator)?m.push(yy(ae.ops,o)??c.error("missing")):ae.symbol&&(s[A+1]?.isNumberLiteral?s[A+2]?.isNumberLiteral?(m.push(yy([ae,s[A+1],s[A+2]],o)??c.error("missing")),A+=2):(m.push(yy([ae,s[A+1]],o)??c.error("missing")),A+=1):m.push(yy([ae],o)??c.error("missing")))}return m}function yy(s,{engine:o}){if(s.length===1){let c=s[0];return c.symbol?o._fn("Limits",[c,o.Nothing,o.Nothing]):c.operator==="Hold"?yy(c.ops,{engine:o}):o._fn("Limits",[o.typeError("symbol",void 0,c)])}else if(s.length>1){let c=o.Nothing,m=o.Nothing,A=s[1].canonical;return s.length===2?s[0].operator==="Hold"?(c=s[0].op1,A=s[1].canonical):s[0].symbol?(c=s[0],A=s[1].canonical):(c=o.Nothing,m=s[0].canonical,A=s[1].canonical):s.length===3&&(c=s[0]??o.Nothing,m=s[1]?.canonical??o.Nothing,A=s[2]?.canonical??o.Nothing),c.operator==="Hold"&&(c=c.op1),c.symbol||(c=o.typeError("symbol",c.type,c)),m.symbol!=="Nothing"&&(m=t5(o,m,"number")),A.symbol!=="Nothing"&&(A=t5(o,A,"number")),o._fn("Limits",[c,m,A])}return null}function K_(s){let o=s.engine,c,m=null,A=null;if(s.operator==="Tuple"||s.operator==="Triple"||s.operator==="Pair"||s.operator==="Single"?(c=s.op1,A=s.ops[1]?.canonical??null,m=s.ops[2]?.canonical??null):c=s,c.operator==="Hold"&&(c=c.op1),!!c.symbol)return c.symbol&&c.symbol!=="Nothing"&&o.declare(c.symbol,"integer"),m&&A?o.function("Limits",[c,A,m]):m?o.function("Limits",[c,o.One,m]):A?o.function("Limits",[c,A]):o.function("Limits",[c])}function W_(s,o,c,m){let A=o.engine;A.pushScope(m);let ae=c.map(qe=>K_(qe)).filter(qe=>qe??A.error("missing"));return o=o?.canonical??A.error("missing"),A.popScope(),o.isCollection?s==="Sum"?A.box(["Reduce",o,"Add",0]):A.box(["Reduce",o,"Multiply",1]):A._fn(s,[o,...ae],{scope:m})}function*v8(s,o,c,m){if(s.isCollection)return yield*ow(s.evaluate(),c,m);if(o.length===0)return c(m,s)??void 0;let A=s.engine,ae=uw(o),qe=cw(ae),So=m,Hc=0;for(let mf of qe)if(ae.forEach((p1,M1)=>A.assign(p1.index,mf[M1])),So=c(So,s)??void 0,Hc+=1,Hc%1e3===0&&(yield So),So===void 0)break;return So??void 0}function Y9(s,o){if(o===0)return{estimate:s,error:o};let c=Math.abs(o),m=Math.floor(Math.log10(c)),A=2,ae=Math.pow(10,m-(A-1)),qe=Math.round(o/ae)*ae,So=Math.max(0,-(m-(A-1)));return{estimate:Number(s.toFixed(So)),error:qe}}function y8(s,o,c,m=1e5){let A=0,ae=0;if(o===-1/0&&c===1/0)for(let R1=0;R1<m;R1++){let G1=Math.random(),c4=Math.tan(Math.PI*(G1-.5)),t4=Math.PI*(1+c4*c4),m4=s(c4)/t4;A+=m4,ae+=m4*m4}else if(o===-1/0)for(let R1=0;R1<m;R1++){let G1=Math.random(),c4=c-Math.log(1-G1),t4=1/(1-G1),m4=s(c4)/t4;A+=m4,ae+=m4*m4}else if(c===1/0)for(let R1=0;R1<m;R1++){let G1=Math.random(),c4=o+Math.log(G1),t4=1/G1,m4=s(c4)/t4;A+=m4,ae+=m4*m4}else for(let R1=0;R1<m;R1++){let G1=s(o+Math.random()*(c-o));A+=G1,ae+=G1*G1}let qe=A/m,So=(ae-m*qe*qe)/(m-1),Hc=Math.sqrt(So/m),mf=c-o,p1=qe*mf,M1=Hc*mf;return Y9(p1,M1)}var X_=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];function b8(s){if(s<0)return NaN;let o=Math.PI,c=s*s*s;return s*Math.log(s)-s-.5*Math.log(s)+.5*Math.log(2*o)+1/(12*s)-1/(360*c)+1/(1260*c*s*s)}function I7(s){if(s<.5)return Math.PI/(Math.sin(Math.PI*s)*I7(1-s));if(s>100)return Math.exp(b8(s));s-=1;let o=X_[0];for(let m=1;m<9;m++)o+=X_[m]/(s+m);let c=s+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(c,s+.5)*Math.exp(-c)*o}function by(s){let o=Math.PI,c=o*o,m=c*o,A=s*s,ae=s*A,qe=ae*A,So=qe*A;return Math.sqrt(o)/2*(s+o/12*ae+7*c/480*qe+127*m/40320*So+4369*c*c/5806080*So*A+34807*m*c/182476800*So*A*A)}function Q9(s){let o=.254829592,c=-.284496736,m=1.421413741,A=-1.453152027,ae=1.061405429,qe=.3275911,So=s<0?-1:1;s=Math.abs(s);let Hc=1/(1+qe*s),mf=((((ae*Hc+A)*Hc+m)*Hc+c)*Hc+o)*Hc;return So*(1-mf*Math.exp(-s*s))}function fw(s,o){if(o.isNegative())return s._BIGNUM_NAN;let c=s._cache("gamma-p-ln",()=>["0.99999999999999709182","57.156235665862923517","-59.597960355475491248","14.136097974741747174","-0.49191381609762019978","0.33994649984811888699e-4","0.46523628927048575665e-4","-0.98374475304879564677e-4","0.15808870322491248884e-3","-0.21026444172410488319e-3","0.2174396181152126432e-3","-0.16431810653676389022e-3","0.84418223983852743293e-4","-0.2619083840158140867e-4","0.36899182659531622704e-5"].map(qe=>s.bignum(qe))),m=c[0];for(let qe=c.length-1;qe>0;--qe)m=m.add(c[qe].div(o.add(qe)));let A=s._cache("gamma-g-ln",()=>s.bignum(607).div(128)),ae=o.add(A).add(s._BIGNUM_HALF);return s._BIGNUM_NEGATIVE_ONE.acos().mul(s._BIGNUM_TWO).log().mul(s._BIGNUM_HALF).add(ae.log().mul(o.add(s._BIGNUM_HALF)).minus(ae).add(m.log()).minus(o.log()))}function Z_(s,o){if(o.lessThan(s._BIGNUM_HALF)){let ae=s._BIGNUM_NEGATIVE_ONE.acos();return ae.div(ae.mul(o).sin().mul(Z_(s,s._BIGNUM_ONE.sub(o))))}if(o.greaterThan(100))return fw(s,o).exp();o=o.sub(1);let c=s._cache("lanczos-7-c",()=>["0.99999999999980993227684700473478","676.520368121885098567009190444019","-1259.13921672240287047156078755283","771.3234287776530788486528258894","-176.61502916214059906584551354","12.507343278686904814458936853","-0.13857109526572011689554707","9.984369578019570859563e-6","1.50563273514931155834e-7"].map(ae=>s.bignum(ae))),m=c[0];for(let ae=1;ae<9;ae++)m=m.add(c[ae].div(o.add(ae)));let A=o.add(7).add(s._BIGNUM_HALF);return s._BIGNUM_NEGATIVE_ONE.acos().times(s._BIGNUM_TWO).sqrt().mul(m.mul(A.neg().exp()).mul(A.pow(o.add(s._BIGNUM_HALF))))}function Vv(s){let o=0,c=0;for(let m of s)o+=m,c++;return c===0?NaN:o/c}function dw(s,o){let c=s(0),m=0;for(let A of o)c=c.add(A),m++;return m===0?s(NaN):c.div(m)}function Bv(s){let o=[...s].sort((m,A)=>m-A),c=Math.floor(o.length/2);return o.length%2===0?(o[c-1]+o[c])/2:o[c]}function ey(s){let o=[...s].sort((m,A)=>m.cmp(A)),c=Math.floor(o.length/2);return o.length%2===0?o[c-1].add(o[c]).div(2):o[c]}function s6(s){let o=0,c=0,m=0;for(let A of s)o+=A,c+=A*A,m++;return m===0?NaN:(c-o*o/m)/(m-1)}function pw(s,o){let c=s(0),m=s(0),A=0;for(let ae of o)c=c.add(ae),m=m.add(ae.mul(ae)),A++;return A===0?s(NaN):m.sub(c.mul(c).div(A)).div(A-1)}function c9(s){let o=0,c=0,m=0;for(let A of s)o+=A,c+=A*A,m++;return m===0?NaN:(c-o*o/m)/m}function Y_(s,o){let c=s(0),m=s(0),A=0;for(let ae of o)c=c.add(ae),m=m.add(ae.mul(ae)),A++;return A===0?s(NaN):m.sub(c.mul(c).div(A)).div(A)}function _8(s){return Math.sqrt(s6(s))}function _y(s){return Math.sqrt(c9(s))}function J9(s){let o=0,c=0,m=0,A=0;for(let qe of s){let So=qe;if(!Number.isFinite(So))return NaN;o+=So,c+=So*So,m+=So*So*So*So,A++}if(A===0)return NaN;let ae=(c-o*o/A)/(A-1);return(m-4*o*c/A+6*o*o*o/A/A-3*o*o*o*o/A/A/A)/(ae*ae)}function mw(s,o){let c=s(0),m=s(0),A=s(0),ae=0;for(let So of o){let Hc=So;if(!Hc.isFinite())return s(NaN);c=c.add(Hc),m=m.add(Hc.mul(Hc)),A=A.add(Hc.mul(Hc).mul(Hc).mul(Hc)),ae++}if(ae===0)return s(NaN);let qe=m.sub(c.mul(c).div(ae)).div(ae-1);return A.sub(c.mul(m).mul(4).div(ae)).add(c.mul(c).mul(c).mul(6).div(ae).div(ae)).sub(c.mul(c).mul(c).mul(c).div(ae).div(ae).div(ae)).div(qe.mul(qe))}function N7(s){let o=0,c=0,m=0,A=0;for(let qe of s){let So=qe;if(!Number.isFinite(So))return NaN;o+=So,c+=So*So,m+=So*So*So,A++}if(A===0)return NaN;let ae=(c-o*o/A)/(A-1);return(m-c*o/A)/(A-1)/Math.pow(ae,1.5)*Math.sqrt(A*1)}function ty(s,o){let c=s(0),m=s(0),A=s(0),ae=0;for(let So of o){let Hc=So;if(!Hc.isFinite())return s(NaN);c=c.add(Hc),m=m.add(Hc.mul(Hc)),A=A.add(Hc.mul(Hc).mul(Hc)),ae++}if(ae===0)return s(NaN);let qe=m.sub(c.mul(c).div(ae)).div(ae-1);return A.sub(m.mul(c).div(ae)).div(ae-1).div(qe.pow(1.5)).mul(ae).sqrt()}function Ib(s){let o={};for(let A of s)o[A]=(o[A]??0)+1;let c=0,m=NaN;for(let A in o){let ae=o[A];ae>c&&(c=ae,m=+A)}return m}function Q_(s,o){let c={};for(let ae of o)c[ae.toString()]=(c[ae.toString()]??0)+1;let m=0,A=s(NaN);for(let ae in c){let qe=c[ae];qe>m&&(m=qe,A=s(ae))}return A}function Nb(s){let o=[...s].sort((qe,So)=>qe-So),c=Math.floor(o.length/2),m=Bv(o.slice(0,c)),A=Bv(o),ae=Bv(o.slice(c));return[m,A,ae]}function J_(s){let o=[...s].sort((qe,So)=>qe.cmp(So)),c=Math.floor(o.length/2),m=ey(o.slice(0,c)),A=ey(o),ae=ey(o.slice(c));return[m,A,ae]}function h9(s){let o=[...s].sort((ae,qe)=>ae-qe),c=Math.floor(o.length/2),m=o.slice(0,c),A=o.slice(c+1);return Bv(A)-Bv(m)}function Fb(s){let o=[...s].sort((ae,qe)=>ae.cmp(qe)),c=Math.floor(o.length/2),m=o.slice(0,c),A=o.slice(c+1);return ey(A).sub(ey(m))}var gw={Add:["+",11],Negate:["-",14],Subtract:["-",11],Multiply:["*",12],Divide:["/",13],Equal:["===",8],NotEqual:["!==",8],LessEqual:["<=",9],GreaterEqual:[">=",9],Less:["<",9],Greater:[">",9],And:["&&",4],Or:["||",3],Not:["!",14]},xy={Abs:"Math.abs",Add:(s,o)=>s.length===1?o(s[0]):`(${s.map(c=>o(c)).join(" + ")})`,Arccos:"Math.acos",Arccosh:"Math.acosh",Arccot:([s],o)=>{if(s===null)throw new Error("Arccot: no argument");return`Math.atan(1 / (${o(s)}))`},Arccoth:([s],o)=>{if(s===null)throw new Error("Arccoth: no argument");return`Math.atanh(1 / (${o(s)}))`},Arccsc:([s],o)=>{if(s===null)throw new Error("Arccsc: no argument");return`Math.asin(1 / (${o(s)}))`},Arccsch:([s],o)=>{if(s===null)throw new Error("Arccsch: no argument");return`Math.asinh(1 / (${o(s)}))`},Arcsec:([s],o)=>{if(s===null)throw new Error("Arcsec: no argument");return`Math.acos(1 / (${o(s)}))`},Arcsech:([s],o)=>{if(s===null)throw new Error("Arcsech: no argument");return`Math.acosh(1 / (${o(s)}))`},Arcsin:"Math.asin",Arcsinh:"Math.asinh",Arctan:"Math.atan",Arctanh:"Math.atanh",Ceiling:"Math.ceil",Chop:"_SYS.chop",Cos:"Math.cos",Cosh:"Math.cosh",Cot:([s],o)=>{if(s===null)throw new Error("Cot: no argument");return m6("Math.cos(${x}) / Math.sin(${x})",o(s))},Coth:([s],o)=>{if(s===null)throw new Error("Coth: no argument");return m6("(Math.cosh(${x}) / Math.sinh(${x}))",o(s))},Csc:([s],o)=>{if(s===null)throw new Error("Csc: no argument");return`1 / Math.sin(${o(s)})`},Csch:([s],o)=>{if(s===null)throw new Error("Csch: no argument");return`1 / Math.sinh(${o(s)})`},Exp:"Math.exp",Floor:"Math.floor",Gamma:"_SYS.gamma",GCD:"_SYS.gcd",Integrate:(s,o,c)=>wy(s,o,c),LCM:"_SYS.lcm",Limit:(s,o)=>`_SYS.limit(${o(s[0])}, ${o(s[1])})`,Ln:"Math.log",List:(s,o)=>`[${s.map(c=>o(c)).join(", ")}]`,Log:(s,o)=>s.length===1?`Math.log10(${o(s[0])})`:`(Math.log(${o(s[0])}) / Math.log(${o(s[1])}))`,LogGamma:"_SYS.lngamma",Lb:"Math.log2",Max:"Math.max",Mean:(s,o)=>s.length===0?"NaN":s.length===1?`_SYS.mean(${o(s[0])})`:`_SYS.mean([${s.map(c=>o(c)).join(", ")}])`,Median:(s,o)=>s.length===0?"NaN":s.length===1?`_SYS.median(${o(s[0])})`:`_SYS.median([${s.map(c=>o(c)).join(", ")}])`,Variance:(s,o)=>s.length===0?"NaN":s.length===1?`_SYS.variance(${o(s[0])})`:`_SYS.variance([${s.map(c=>o(c)).join(", ")}])`,PopulationVariance:(s,o)=>s.length===0?"NaN":s.length===1?`_SYS.populationVariance(${o(s[0])})`:`_SYS.populationVariance([${s.map(c=>o(c)).join(", ")}])`,StandardDeviation:(s,o)=>s.length===0?"NaN":s.length===1?`_SYS.standardDeviation(${o(s[0])})`:`_SYS.standardDeviation([${s.map(c=>o(c)).join(", ")}])`,PopulationStandardDeviation:(s,o)=>s.length===0?"NaN":s.length===1?`_SYS.populationStandardDeviation(${o(s[0])})`:`_SYS.populationStandardDeviation([${s.map(c=>o(c)).join(", ")}])`,Kurtosis:(s,o)=>s.length===0?"NaN":s.length===1?`_SYS.kurtosis(${o(s[0])})`:`_SYS.kurtosis([${s.map(c=>o(c)).join(", ")}])`,Skewness:(s,o)=>s.length===0?"NaN":s.length===1?`_SYS.skewness(${o(s[0])})`:`_SYS.skewness([${s.map(c=>o(c)).join(", ")}])`,Mode:(s,o)=>s.length===0?"NaN":s.length===1?`_SYS.mode(${o(s[0])})`:`_SYS.mode([${s.map(c=>o(c)).join(", ")}])`,Quartiles:(s,o)=>s.length===0?"NaN":s.length===1?`_SYS.quartiles(${o(s[0])})`:`_SYS.quartiles([${s.map(c=>o(c)).join(", ")}])`,InterquartileRange:(s,o)=>s.length===0?"NaN":s.length===1?`_SYS.interquartileRange(${o(s[0])})`:`_SYS.interquartileRange([${s.map(c=>o(c)).join(", ")}])`,Min:"Math.min",Power:(s,o)=>{let c=s[0];if(c===null)throw new Error("Power: no argument");let m=s[1].re;return m===.5?`Math.sqrt(${o(c)})`:m===1/3?`Math.cbrt(${o(c)})`:m===1?o(c):m===-1?`(1 / (${o(c)}))`:m===-.5?`(1 / Math.sqrt(${o(c)}))`:`Math.pow(${o(c)}, ${o(s[1])})`},Range:(s,o)=>{if(s.length===0)return"[]";if(s.length===1)return`Array.from({length: ${o(s[0])}}, (_, i) => i)`;let c=o(s[0]),m=o(s[1]),A=s[2]?o(s[2]):"1";if(c===null)throw new Error("Range: no start");if(m===null&&(m=c,c="1"),A==="0")throw new Error("Range: step cannot be zero");if(parseFloat(A)===1){let ae=parseFloat(m),qe=parseFloat(c);return ae!==null&&qe!==null?ae-qe<50?`[${Array.from({length:ae-qe+1},(So,Hc)=>qe+Hc).join(", ")}]`:`Array.from({length: ${ae-qe+1} 
        }, (_, i) => ${c} + i)`:`Array.from({length: ${m} - ${c} + 1
      }, (_, i) => ${c} + i)`}return`Array.from({length: Math.floor((${m} - ${c}) / ${A}) + 1}, (_, i) => ${c} + i * ${A})`},Root:([s,o],c)=>{if(s===null)throw new Error("Root: no argument");return o===null?`Math.sqrt(${c(s)})`:o?.re===2?`Math.sqrt(${c(s)})`:o?.re===3?`Math.cbrt(${c(s)})`:isNaN(o?.re)?`Math.pow(${c(s)}, 1 / (${c(o)}))`:`Math.pow(${c(s)},  ${1/o.re})`},Random:"Math.random",Round:"Math.round",Square:(s,o)=>{let c=s[0];if(c===null)throw new Error("Square: no argument");return`Math.pow(${o(c)}, 2)`},Sec:(s,o)=>{let c=s[0];if(c===null)throw new Error("Sec: no argument");return`1 / Math.cos(${o(c)})`},Sech:(s,o)=>{let c=s[0];if(c===null)throw new Error("Sech: no argument");return`1 / Math.cosh(${o(c)})`},Sgn:"Math.sign",Sin:"Math.sin",Sinh:"Math.sinh",Sqrt:"Math.sqrt",Tan:"Math.tan",Tanh:"Math.tanh"},O6=class extends Function{SYS={chop:r2,factorial:T1,gamma:I7,gcd:eh,integrate:(s,o,c)=>y8(s,o,c,1e7).estimate,lcm:m1,lngamma:b8,limit:C2,mean:Vv,median:Bv,variance:s6,populationVariance:c9,standardDeviation:_8,populationStandardDeviation:_y,kurtosis:J9,skewness:N7,mode:Ib,quartiles:Nb,interquartileRange:h9};constructor(s,o=""){return super("_SYS","_",o?`${o};return ${s}`:`return ${s}`),new Proxy(this,{apply:(c,m,A)=>super.apply(m,[this.SYS,...A]),get:(c,m)=>m==="toString"?()=>s:m==="isCompiled"?!0:c[m]})}},$b=class extends Function{SYS={chop:r2,factorial:T1,gamma:I7,gcd:eh,integrate:(s,o,c)=>y8(s,o,c,1e7).estimate,lcm:m1,lngamma:b8,limit:C2,mean:Vv,median:Bv,variance:s6,populationVariance:c9,standardDeviation:_8,populationStandardDeviation:_y,kurtosis:J9,skewness:N7,mode:Ib,quartiles:Nb,interquartileRange:h9};constructor(s,o){return super("_SYS",...o,`return ${s}`),new Proxy(this,{apply:(c,m,A)=>super.apply(m,[this.SYS,...A]),get:(c,m)=>m==="toString"?()=>`(${o.join(", ")}) => ${s}`:m==="isCompiled"?!0:c[m]})}};function yw(s,o){if(s.operator==="Function"){let m=s.ops,A=m.slice(1).map(qe=>qe.symbol??"_"),ae=F6(m[0].canonical,{...o,var:qe=>A.includes(qe)?qe:o.var(qe)});return new $b(ae,A)}if(s.symbol){let m=o.operators?.(s.symbol);if(m)return new $b(`a ${m[0]} b`,["a","b"])}let c=F6(s,o);return new O6(c,o.preamble)}function c5(s,o,c,m=[],A){let ae=s.unknowns,qe=m.map(Hc=>{if(typeof Hc=="function")return Hc.toString();throw new Error(`Unsupported import \`${Hc}\``)}).join(`
`),So=o?Object.fromEntries(Object.entries(o).filter((Hc,mf)=>typeof mf!="string")):{};if(o)for(let[Hc,mf]of Object.entries(o))typeof mf=="function"&&(xw(mf)?(qe+=`${mf.toString()};
`,So[Hc]=mf.name):(qe+=`const ${Hc} = ${mf.toString()};
`,So[Hc]=Hc));return yw(s,{operators:Hc=>gw[Hc],functions:Hc=>So?.[Hc]?So[Hc]:xy[Hc],var:Hc=>{if(c&&Hc in c)return JSON.stringify(c[Hc]);let mf={Pi:"Math.PI",ExponentialE:"Math.E",NaN:"Number.NaN",ImaginaryUnit:"Number.NaN",Half:"0.5",MachineEpsilon:"Number.EPSILON",GoldenRatio:"((1 + Math.sqrt(5)) / 2)",CatalanConstant:"0.91596559417721901",EulerGamma:"0.57721566490153286"}[Hc];if(mf!==void 0)return mf;if(ae.includes(Hc))return`_.${Hc}`},string:Hc=>JSON.stringify(Hc),number:Hc=>Hc.toString(),indent:0,ws:Hc=>Hc??"",preamble:(A??"")+qe})}function bw(s,o,c,m,A){if(o==="Error")throw new Error("Error");if(o==="Sequence")return c.length===0?"":`(${c.map(qe=>F6(qe,A,m)).join(", ")})`;if(o==="Sum"||o==="Product")return _w(o,c,A);if(c.every(qe=>!qe.isCollection)){let qe=A.operators?.(o);if(Zv(o)&&c.length>2&&qe){let So=[];for(let Hc=0;Hc<c.length-1;Hc++)So.push(bw(s,o,[c[Hc],c[Hc+1]],qe[1],A));return`(${So.join(") && (")})`}if(qe!==void 0){if(c===null)return"";let So;return c.length===1?So=`${qe[0]}${F6(c[0],A,qe[1])}`:So=c.map(Hc=>F6(Hc,A,qe[1])).join(` ${qe[0]} `),qe[1]<m?`(${So})`:So}}if(o==="Function"){let qe=c.slice(1).map(So=>So.symbol);return`((${qe.join(", ")}) => ${F6(c[0].canonical,{...A,var:So=>qe.includes(So)?So:A.var(So)})})`}if(o==="Declare")return`let ${c[0].symbol}`;if(o==="Assign")return`${c[0].symbol} = ${F6(c[1],A)}`;if(o==="Return")return`return ${F6(c[0],A)}`;if(o==="If"){if(c.length!==3)throw new Error("If: wrong number of arguments");return`((${F6(c[0],A)}) ? (${F6(c[1],A)}) : (${F6(c[2],A)}))`}if(o==="Block"){let qe=[];for(let Hc of c)Hc.operator==="Declare"&&qe.push(Hc.ops[0].symbol);if(c.length===1&&qe.length===0)return F6(c[0],A);let So=c.map(Hc=>F6(Hc,{...A,var:mf=>qe.includes(mf)?mf:A.var(mf)}));return So[So.length-1]=`return ${So[So.length-1]}`,`(() => {${A.ws(`
`)}${So.join(`;${A.ws(`
`)}`)}${A.ws(`
`)}})()`}let ae=A.functions?.(o);if(!ae)throw new Error(`Unknown operator \`${o}\``);if(typeof ae=="function"){let qe=s.lookupDefinition(o);if(E6(qe)&&qe.operator.broadcastable&&c.length===1&&o5(c[0])){let So=h5();return`(${F6(c[0],A)}).map((${So}) => ${ae([c[0].engine.box(So)],Hc=>F6(Hc,A),A)})`}return ae(c,So=>F6(So,A),A)}return c===null?`${ae}()`:`${ae}(${c.map(qe=>F6(qe,A)).join(", ")})`}function F6(s,o,c=0){if(s===void 0)return"";if(!s.isValid)throw new Error(`Cannot compile invalid expression: "${s.toString()}"`);let m=s.symbol;if(m!==null){let A=o.operators?.(m);return A!==void 0?`(a,b) => a ${A[0]} b`:o.var?.(m)??m}if(s.isNumberLiteral){if(s.im!==0)throw new Error("Complex numbers are not supported");return o.number(s.re)}return s.string!==null?o.string(m):bw(s.engine,s.operator,s.ops,c,o)}function _w(s,o,c){if(o===null)throw new Error("Sum/Product: no arguments");if(!o[0])throw new Error("Sum/Product: no body");let{index:m,lower:A,upper:ae,isFinite:qe}=u9(o[1]),So=s==="Sum"?"+":"*";if(!m){let p1=h5(),M1=h5();return`${F6(o[0],c)}.reduce((${M1}, ${p1}) => ${M1} ${So} ${p1}, ${So==="+"?"0":"1"})`}let Hc=F6(o[0],{...c,var:p1=>p1===m?m:c.var(p1)}),mf=h5();return`(() => {
  let ${mf} = ${So==="+"?"0":"1"};
  let ${m} = ${A};
  while (${m} <= ${ae}) {
    ${mf} ${So}= ${Hc};
    ${m}++;
  }
  return ${mf};
})()`}function m6(s,o){if(/^[\p{L}_][\p{L}\p{N}_]*$/u.test(o)||/^[0-9]+$/.test(o))return new Function("x",`return \`${s}\`;`)(o);{let c=h5();return new Function("x",`return \`(() => { const ${c} = \${x}; return ${s.replace(/\\\${x}/g,c)}; })()\`;`)(o)}}function h5(){return`_${Math.random().toString(36).substring(4)}`}function wy(s,o,c){let{index:m,lower:A,upper:ae}=u9(s[1]),qe=F6(s[0],{...c,var:So=>So===m?So:c.var(So)});return`_SYS.integrate((${m}) => (${qe}), ${A}, ${ae})`}function xw(s){let o=s.toString();return o.includes("=>")?!1:o.startsWith("function ")&&o.includes(s.name)}function ex(s,o,c){if(c.repeatingDecimal&&c.repeatingDecimal!=="none"){let ae=s.slice(0,-1);for(let qe=0;qe<s.length-16;qe++){let So=ae.substring(0,qe);for(let Hc=0;Hc<17;Hc++){let mf=ae.substring(qe,qe+Hc+1),p1=Math.floor((ae.length-So.length)/mf.length);if(p1<=3)break;if((So+mf.repeat(p1+1)).startsWith(ae)){if(mf==="0")return Ey(So,c);let M1={vinculum:"\\overline{#}",parentheses:"(#)",dots:"\\overset{\\cdots}{#1}#2\\overset{\\cdots}{#3}",arc:"\\wideparen{#}"}[c.repeatingDecimal]??"\\overline{#}";return M1=M1.replace(/#1/g,mf[0]).replace(/#2/g,mf.slice(1)).replace(/#3/g,mf.slice(-1)).replace(/#/,mf),Ey(So,c)+M1}}}}let m=typeof c.fractionalDigits=="number"?c.fractionalDigits:1/0;m<0&&(m=m-o),m<0&&(m=0);let A=s.length>m;return A&&(s=s.substring(0,m)),s=Ey(s,c),A&&(s+=c.truncationMarker),s}function ww(s,o){return!s||s==="0"?"":o.beginExponentMarker?o.beginExponentMarker+s+(o.endExponentMarker??""):`10^{${s}}`}function tx(s,o){if(s===null)return"";let c;if(typeof s=="number"||typeof s=="string")c=s;else if(typeof s=="object"&&"num"in s)c=s.num;else return"";if(typeof c=="number"){if(c===1/0)return o.positiveInfinity;if(c===-1/0)return o.negativeInfinity;if(Number.isNaN(c))return o.notANumber;let ae;return o.notation==="engineering"?ae=P5(c.toExponential(),o,3):o.notation==="scientific"&&(ae=P5(c.toExponential(),o)),ae??lv(c.toString(),o)}if(c=c.toLowerCase().replace(/[\u0009-\u000d\u0020\u00a0]/g,""),c==="infinity"||c==="+infinity"||c==="oo"||c==="+oo")return o.positiveInfinity;if(c==="-infinity"||c==="-oo")return o.negativeInfinity;if(c==="nan")return o.notANumber;if(!/^[-+\.]?[0-9]/.test(c))return"";if(c=c.replace(/[nd]$/,""),/\([0-9]+\)/.test(c)){let[ae,qe,So,Hc]=c.match(/(.+)\(([0-9]+)\)(.*)$/)??[];c=qe+So.repeat(6)+Hc}let m="";for(c[0]==="-"?(m="-",c=c.substring(1)):c[0]==="+"&&(c=c.substring(1));c[0]==="0";)c=c.substring(1);c.length===0?c="0":c[0]==="."&&(c="0"+c);let A;return o.notation==="engineering"?A=P5(c,o,3):o.notation==="scientific"&&(A=P5(c,o)),m+(A??lv(c,o))}function P5(s,o,c=1){let m=s.match(/^(.*)[e|E]([-+]?[0-9]+)$/);if(!m){let p1="";if(s[0]==="-"?(p1="-",s=s.substring(1)):s[0]==="+"&&(s=s.substring(1)),s.indexOf(".")<0)s.length===1?s=p1+s+"e+0":s=p1+s[0]+"."+s.slice(1)+"e+"+(s.length-1).toString();else{let[M1,R1,G1]=s.match(/^(.*)\.(.*)$/);for(G1||(G1="");R1.startsWith("0");)R1=R1.substring(1);R1?s=p1+R1[0]+"."+R1.slice(1)+G1+"e+"+(R1.length-1).toString():s=p1+"0."+G1+"e+0"}m=s.match(/^(.*)[e|E]([-+]?[0-9]+)$/)}if(!m)return lv(s,o);let A=parseInt(m[2]),ae=m[1];if(Math.abs(A)%c!==0){let p1=A>0?A%c:-((c+A)%c);A=A>=0?A-p1:A+p1;let[M1,R1,G1]=ae.match(/^(.*)\.(.*)$/)??["",ae,""];ae=R1+(G1+"00000000000000000").slice(0,Math.abs(p1))+"."+G1.slice(Math.abs(p1))}let qe=o.avoidExponentsInRange;if(qe&&A>=qe[0]&&A<=qe[1])return;let So="",Hc=ae;m=Hc.match(/^(.*)\.(.*)$/),m&&(Hc=m[1],So=m[2]);let mf=ww(Number(A).toString(),o);if(So=ex(So,Hc.length,o),So&&(So=o.decimalSeparator+So),Hc=Ty(Hc,o),!mf)return Hc+So;if(!So){if(Hc==="1")return mf;if(Hc==="-1")return"-"+mf}return Hc+So+o.exponentProduct+mf}function lv(s,o){let c=s.match(/^(.*)[e|E]([-+]?[0-9]+)$/i),m=0;c?.[1]&&c[2]&&(m=parseInt(c[2]),s=c[1]);let A=c?.[1]??s,ae="";c=s.match(/^(.*)\.(.*)$/),c?.[1]&&c[2]&&(A=c[1],ae=c[2]),m!==0&&ae&&(A+=ae,m-=ae.length,ae="");let qe=o.avoidExponentsInRange;m!==0&&qe&&m>=qe[0]&&m<=qe[1]&&([A,ae]=ix(A,ae,m),m=0);let So=ww(m.toString(),o);if(ae&&(ae=o.decimalSeparator+ex(ae,A.length,o)),A=Ty(A,o),!So)return A+ae;if(!ae){if(A==="1")return So;if(A==="-1")return"-"+So}return A+ae+o.exponentProduct+So}function rx(s,o,c){let m=new RegExp(`(\\d{${o}})(?=\\d)`,"g");return s.replace(m,`$1${c}`)}function uv(s,o,c){let m=new RegExp(`(\\d{${o}})(?=\\d)`,"g"),A=c.split("").reverse().join("");return s.split("").reverse().join("").replace(m,`$1${A}`).split("").reverse().join("")}function Sw(s,o){let c=s.split("").reverse().join(""),m=o.split("").reverse().join(""),A=c.replace(/(\d{3})(?=\d)/,`$1${m}`);return A=A.replace(/(\d{2})(?=(\d{2})+,)/g,`$1${m}`),A.split("").reverse().join("")}function Sy(s,o,c){let m=o.digitGroup;typeof m!="string"&&Array.isArray(m)&&(m=m[c]);let A=typeof o.digitGroupSeparator=="string"?o.digitGroupSeparator:o.digitGroupSeparator[c];return A?m==="lakh"?c===0?Sw(s,A):rx(s,3,A):m===!1||m<=0?s:c===1?rx(s,m,A):uv(s,m,A):s}function Ey(s,o){return Sy(s,o,1)}function Ty(s,o){return Sy(s,o,0)}function ix(s,o,c){let m=s+o,A=s.length+c,ae,qe;return A>0?A>=m.length?(m=m+"0".repeat(A-m.length),ae=m,qe=""):(ae=m.slice(0,A),qe=m.slice(A)):(ae="0",qe="0".repeat(-A)+m),[ae,qe]}var f9={deg:s=>`${s}\\degree`,prime:s=>`${s}^{\\prime}`,dprime:s=>`${s}^{\\doubleprime}`,ring:s=>`\\mathring{${s}}`,hat:s=>`\\hat{${s}}`,tilde:s=>`\\tilde{${s}}`,vec:s=>`\\vec{${s}}`,bar:s=>`\\overline{${s}}`,underbar:s=>`\\underline{${s}}`,dot:s=>`\\dot{${s}}`,ddot:s=>`\\ddot{${s}}`,tdot:s=>`\\dddot{${s}}`,qdot:s=>`\\ddddot{${s}}`,acute:s=>`\\acute{${s}}`,grave:s=>`\\grave{${s}}`,breve:s=>`\\breve{${s}}`,check:s=>`\\check{${s}}`},Sv={upright:s=>`\\mathrm{${s}}`,italic:s=>`\\mathit{${s}}`,bold:s=>`\\mathbf{${s}}`,script:s=>`\\mathscr{${s}}`,fraktur:s=>`\\mathfrak{${s}}`,doublestruck:s=>`\\mathbb{${s}}`,blackboard:s=>`\\mathbb{${s}}`,calligraphic:s=>`\\mathcal{${s}}`,gothic:s=>`\\mathfrak{${s}}`,sansserif:s=>`\\mathsf{${s}}`,monospace:s=>`\\mathtt{${s}}`},Ew=class{options;dictionary;level=-1;constructor(s,o){this.dictionary=s,this.options=o}wrap(s,o){if(s==null)return"";if(o===void 0)return this.wrapString(this.serialize(s),this.options.groupStyle(s,this.level+1));if(typeof s=="number"||V4(s)){let m=Z4(s);return m!==null&&m<0&&o>a6?this.wrap(s):this.serialize(s)}let c=I2(s);if(c&&c!=="Delimiter"&&c!=="Subscript"){let m=this.dictionary.ids.get(c);if(m&&(m.kind==="symbol"||m.kind==="expression"||m.kind==="prefix"||m.kind==="infix"||m.kind==="postfix")&&m.precedence<o)return this.wrapString(this.serialize(s),this.options.applyFunctionStyle(s,this.level))}return this.serialize(s)}wrapShort(s){if(s==null)return"";let o=this.serialize(s);if(_4(s)!==null||M4(s)&&!/^(-|\.)/.test(o))return o;let c=I2(s);return c==="Delimiter"&&L4(s)===1||c!=="Add"&&c!=="Negate"&&c!=="Subtract"&&c!=="PlusMinus"&&c!=="Multiply"?o:this.wrapString(o,this.options.groupStyle(s,this.level+1))}wrapString(s,o,c){if(o==="none")return s;c??="()";let m=c?.[0]??".",A=c?.[1]??".";return m==='"'?m="``":m==="|"?m="\\lvert":m=O9[m]??m,A==='"'?A="''":A==="|"?A="\\rvert":A=O9[A]??A,m==="."&&A==="."?s:((m==="."||A===".")&&o==="normal"&&(o="scaled"),o==="scaled"?`\\left${m}${s}\\right${A}}`:o==="big"?`${`\\Bigl${m}`}${s}${`\\Bigr${A}`})`:m+s+A)}wrapArguments(s){return this.wrapString(s4(s).map(o=>this.serialize(o)).join(", "),this.options.applyFunctionStyle(s,this.level))}serializeSymbol(s,o){return o?.kind==="function"?e7(_4(s)??"")??"":o?.serialize?.(this,s)??e7(_4(s))??""}serializeFunction(s,o){if(o?.serialize)return o.serialize(this,s);let c=I2(s);return e7(c,"auto")+this.wrapArguments(s)}serialize(s){if(s==null)return"";this.level+=1;try{let o=(()=>{let c=tx(s,this.options);if(c)return c;let m=x4(s);if(m!==null)return`\\text{${m}}`;let A=_4(s);if(A!==null)return this.serializeSymbol(s,this.dictionary.ids.get(A));let ae=I2(s);if(ae){let qe=this.dictionary.ids.get(ae);return this.serializeFunction(s,qe)}throw Error(`Syntax error ${s?JSON.stringify(s,void 0,4):""}`)})();return this.level-=1,o??""}catch{}return this.level-=1,""}applyFunctionStyle(s,o){return this.options.applyFunctionStyle(s,o)}groupStyle(s,o){return this.options.groupStyle(s,o)}rootStyle(s,o){return this.options.rootStyle(s,o)}fractionStyle(s,o){return this.options.fractionStyle(s,o)}logicStyle(s,o){return this.options.logicStyle(s,o)}powerStyle(s,o){return this.options.powerStyle(s,o)}numericSetStyle(s,o){return this.options.numericSetStyle(s,o)}};function x8(s){let o=s.match(/^([^_]+)/)?.[1]??"",c=av.findIndex(qe=>o===qe[0]);if(c>=0)return[av[c][1],s.substring(av[c][0].length)];let m={zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10"};if(c=Object.keys(m).findIndex(qe=>s.startsWith(qe)),c>=0){let qe=Object.keys(m)[c];return[m[qe],s.substring(qe.length)]}let A=s.codePointAt(0);if(c=av.findIndex(qe=>qe[2]===A),c>=0)return[av[c][1],s.substring(1)];let ae={plus:"+",minus:"-",pm:"\\pm",ast:"\\ast",dag:"\\dag",ddag:"\\ddag",hash:"\\#",bottom:"\\bot",top:"\\top",bullet:"\\bullet",circle:"\\circ",diamond:"\\diamond",times:"\\times",square:"\\square",star:"\\star"};if(c=Object.keys(ae).findIndex(qe=>o===qe),c>=0){let qe=Object.keys(ae)[c];return[ae[qe],s.substring(qe.length)]}return[o,s.substring(o.length)]}function d9(s){let[o,c]=x8(s),m=[];for(;c.length>0;){let ae=c.match(/^_([a-zA-Z]+)(.*)/);if(!ae||!f9[ae[1]])break;m.push(ae[1]),c=ae[2]}let A=[];for(;c.length>0;){let ae=c.match(/^_([a-zA-Z]+)(.*)/);if(!ae||!Sv[ae[1]])break;A.push(ae[1]),c=ae[2]}return[o,m,A,c]}function Jy(s,o=!0,c="auto"){let[m,A,ae,qe]=d9(s);for(let So of A)f9[So]&&(m=f9[So](m));if(o){let So=[],Hc=[],mf=m.match(/^([^\d].*?)(\d+)$/);for(mf&&(Hc.push(mf[2]),m=mf[1]);qe.length>0;)if(qe.startsWith("__")){let[p1,M1]=Jy(qe.substring(2),!1,"none");So.push(p1),qe=M1}else if(qe.startsWith("_")){let[p1,M1]=Jy(qe.substring(1),!1,"none");Hc.push(p1),qe=M1}else break;So.length>0&&(m=p7("^",m,So.join(","))),Hc.length>0&&(m=p7("_",m,Hc.join(",")))}for(let So of ae)Sv[So]&&(m=Sv[So](m));if(ae.length===0&&c!=="none")switch(c){case"auto":oy(m)>1&&(m=`\\mathrm{${m}}`);break;case"operator":m=`\\operatorname{${m}}`;break;case"italic":m=`\\mathit{${m}}`;break;case"upright":m=`\\mathrm{${m}}`;break}return[m,qe]}function e7(s,o="auto"){if(s===null)return null;if(O1.test(s))return s;let c=s.match(/^(_+)(.*)/);if(c){let[ae,qe]=Jy(c[2],!0,"none");return`\\operatorname{${"\\_".repeat(c[1].length)+ae+qe}}`}let[m,A]=Jy(s,!0,o);return A.length>0?`\\operatorname{${s}}`:m}function Tw(s,o,c){return new Ew(o,c).serialize(s)}var nx={PositiveInfinity:"+oo",NegativeInfinity:"-oo",ComplexInfinity:"~oo",NaN:"NaN",Pi:"pi",ExponentialE:"e",ImaginaryUnit:"i",ContinuationPlaceholder:"...",alpha:"alpha",beta:"beta",gamma:"gamma",delta:"delta",epsilon:"epsilon",epsilonSymbol:"varepsilon",zeta:"zeta",eta:"eta",theta:"theta",thetaSymbol:"vartheta",iota:"iota",kappa:"kappa",lambda:"lambda",mu:"mu",nu:"nu",xi:"xi",omicron:"omicron",pi:"pi",rho:"rho",sigma:"sigma",tau:"tau",upsilon:"upsilon",phi:"phi",phiSymbol:"varphi",chi:"chi",psi:"psi",omega:"omega",Gamma:"Gamma",Delta:"Delta",Theta:"Theta",Lambda:"Lambda",Xi:"Xi",Sigma:"Sigma",Upsilon:"Upsilon",Phi:"Phi",Psi:"Psi",Omega:"Omega"},w8={Add:[(s,o)=>s.ops?.reduce((c,m)=>{if(m.operator==="Negate"){let A=o(m.op1,10);return c===""?`-${A}`:A.startsWith("+")?`${c} - ${A.substring(1)}`:A.startsWith("-")?`${c} + ${A.substring(1)}`:`${c} - ${A}`}return S3(c,o(m,10))},"")??"",11],Negate:[(s,o)=>{let c=o(s.op1,14);return c==="Power"?`-(${c})`:`-${c}`},14],Subtract:[(s,o)=>s.ops?.reduce((c,m)=>{let A=o(m,10);return c===""?A:A.startsWith("-")?`${c} - (${A})`:`${c} - ${A}`},"")??"",11],Multiply:[(s,o)=>{if(!s.ops)return"";if(s.nops===2){let c=s.op1.numericValue;if(c!==null){typeof c!="number"&&c.im!==0&&Q3(o(s.op2,12),S3(c.re.toString(),`${c.im}i`));let m=s.op2;if((m.symbol||m.operator==="Power"||m.operator==="Square"||typeof D7[m.operator]=="string")&&k7(c)&&c[0]===1){let A=c[1];return`${o(m,12)}/${A}`}return Q3(o(s.op1,12),o(s.op2,12))}}return s.ops.reduce((c,m)=>Q3(c,o(m,12)),"")},12],Divide:["/",13],Power:[(s,o)=>{let c=o(s.op2,14);if(c==="1")return o(s.op1);if(c==="(1/2)"||c==="1/2"||c==="0.5")return`sqrt(${o(s.op1)})`;if(c==="-0.5")return`(1/sqrt(${o(s.op1)}))`;let m=o(s.op1,14);return m.startsWith("-")&&(m=`(${m})`),c.length===1?`${m}^${c}`:`${m}^${V5(c)}`},15],Equal:["===",8],NotEqual:["!==",8],LessEqual:["<=",9],GreaterEqual:[">=",9],Less:["<",9],Greater:[">",9],And:["&&",4],Or:["||",3],Not:["!",14]},D7={Abs:(s,o)=>`|${o(s.op1)}|`,Sin:"sin",Cos:"cos",Tan:"tan",Sec:"sec",Csc:"csc",Arcsin:"arcsin",Arccos:"arccos",Arctan:"arctan",Sinh:"sinh",Cosh:"cosh",Tanh:"tanh",Sech:"sech",Csch:"csch",Coth:"coth",Ceil:"ceil",Exp:"exp",Factorial:(s,o)=>`${o(s.op1,12)}!`,Floor:"floor",Log:"log",Ln:"ln",Log10:"log10",Sqrt:"sqrt",Root:(s,o)=>{let c=s.op1,m=s.op2;return m.is(2)?`sqrt${V5(o(c))}`:`root${V5(o(m))}${V5(o(c))}`},Square:(s,o)=>`${o(s.op1,12)}^2`,Det:"det",Dim:"dim",Mod:"mod",GCD:"gcd",LCM:"lcm",Lub:"lub",Glb:"glb",Max:"max",Min:"min",PlusMinus:(s,o)=>{let[c,m]=s.ops??[];if(!m)return o(c);if(c&&m){let A=o(c),ae=o(m);return`${A}  ${ae}`}return c?` ${o(c)}`:m?` ${o(m)}`:"0"},Sum:(s,o)=>S8(s,"sum",o),Product:(s,o)=>S8(s,"prod",o),Integrate:(s,o)=>S8(s,"int",o),Limit:(s,o)=>{let[c,m]=s.ops??[];if(c?.operator==="Function"){let A=c.ops?.slice(2)??[],ae=c.op1??c,qe=null;return A.length===1&&(qe=A[0]),qe?`lim_(${o(qe)} -> ${o(m)}) ${o(ae)}`:`lim_(${o(m)}) ${o(ae)}`}else if(c?.symbol)return`lim_(x -> ${o(m)}) ${o(c)}(x)`;return"lim"},Delimiter:(s,o)=>Aw(s.ops[0],s.ops[1]?.string,o),Sequence:(s,o)=>s.nops===0?"":s.ops.map(c=>o(c)).join(" "),List:(s,o)=>`[${s.ops?.map(c=>o(c))??""}]`,Single:(s,o)=>`(${s.ops.map(c=>o(c)).join(", ")})`,Pair:(s,o)=>`(${s.ops.map(c=>o(c)).join(", ")})`,Triple:(s,o)=>`(${s.ops.map(c=>o(c)).join(", ")})`,Tuple:(s,o)=>`(${s.ops.map(c=>o(c)).join(", ")})`,Block:(s,o)=>s.nops===0?"{}":s.nops===1?`{${o(s.op1)}}`:`{    ${s.ops.map(c=>o(c)).join(`;
     `)}
    }`,EvaluateAt:(s,o)=>{let c=s.op1,m=s.ops.slice(1);return m.length===0?o(c):m.length===1?`(${o(c)})|_(${o(m[0])})`:m.length===2?`(${o(c)})|_(${o(m[0])})^(${o(m[1])})`:`(${o(c)})|_(${m.map(A=>o(A)).join(", ")})`},Function:(s,o)=>{let c=s.ops.slice(1),m=()=>c.map(A=>o(A)).join(", ");return s.op1.operator==="Block"?s.op1.nops===0?`(${m()}) |-> {}`:s.op1.nops===1?c.length===1&&c[0].symbol==="_1"?`(_) |-> ${o(s.op1.op1.subs({_1:"_"}))}`:`(${m()}) |-> ${o(s.op1.op1)}`:`(${m()}) |-> {
    ${s.op1.ops.map(A=>o(A)).join(`;
     `)}
}`:`(${m()}) |-> ${o(s.op1)}`},Domain:s=>JSON.stringify(s.json),Error:(s,o)=>s.nops===1?`Error(${o(s.op1)})`:s.nops===2?s.op1.string?`Error("${s.op1.string}", ${o(s.op2)})`:`Error(${o(s.op1)}, ${o(s.op2)})`:`Error(${s.ops.map(c=>o(c)).join(", ")})`,LatexString:s=>`"${s.op1.string??""}"`};function S8(s,o,c){let[m,...A]=s.ops??[],ae=[],qe,So=[];if(m?.operator==="Function"){So=m.ops.slice(1)??[];let mf=m.op1??m;mf.operator==="Block"?qe=c(mf.op1??mf):qe=c(mf)}else if(m?.symbol)So=[],qe=c(m);else return"int()";let Hc=o;for(let mf of A)if(["Range","Tuple","Pair","Single","Limits"].includes(mf.operator)&&mf.nops!==0){if(mf.nops===2)mf.op1.symbol?(mf.op1.symbol!=="Nothing"&&ae.push(mf.op1),mf.op2.symbol!=="Nothing"&&(o==="int"?Hc+=`_${V5(c(mf.op2))}`:Hc+="_"+V5(`${mf.op1.symbol}=${c(mf.op2)}`))):(mf.op1.symbol!=="Nothing"&&(Hc+=`_${V5(c(mf.op1))}`),mf.op2.symbol!=="Nothing"&&(Hc+=`^${V5(c(mf.op2))}`));else if(mf.nops===3){let p1="";mf.op1.symbol!=="Nothing"&&(ae.push(mf.op1),p1=mf.op1.symbol??"");let M1=mf.op2.symbol!=="Nothing"?mf.op2:null,R1=mf.op3.symbol!=="Nothing"?mf.op3:null;M1?o==="int"||!p1?Hc+=`_${V5(c(M1))}`:Hc+="_"+V5(`${p1}=${c(M1)}`):o!=="int"&&(Hc+=`_${V5(c(mf.op1))}`),R1&&(Hc+=`^${V5(c(R1))}`)}}return o==="int"?Hc+=V5(qe+So.map(mf=>` d${c(mf)}`).join(" ")):Hc+=V5(qe),Hc}function Aw(s,o,c){o||(o="(,)");let m="",A="",ae="";if(o.length===1&&(m=o),o.length===2&&(A=o[0],ae=o[1]),o.length===3&&(A=o[0],m=o[1],ae=o[2]),!s)return`${A}${ae}`;let qe=[s];return s.operator==="Sequence"&&(qe=s.ops),`${A}${qe.map(So=>c(So)).join(m)}${ae}`}function V5(s,o=0,c=-1){return o>c&&!/^\(.+\)$/.test(s)?`(${s})`:s}function zb(s,o={}){return o.symbols?.[s]?o.symbols[s]:nx[s]?nx[s]:s.startsWith("_")?s:D7[s]&&typeof D7[s]=="string"?D7[s]:s.length===1?s:`"${s}"`}function B3(s,o={},c=0){if(s===void 0)return"[undefined]";if(s===null)return"[null]";if(s.symbol)return zb(s.symbol,o);let m=(ae,qe=0)=>B3(ae,o,qe);if(s.string)return`"${s.string.replace(/"/g,'\\"')}"`;let A=s.numericValue;if(A!==null)return s.isNaN?zb("NaN",o):s.isFinite===!1?s.isNegative!==!0&&s.isPositive!==!0?zb("ComplexInfinity",o):zb(s.isNegative?"NegativeInfinity":"PositiveInfinity",o):A.toString();if(s.operator){let ae=o.operators?{...w8,...o.operators}:w8,[qe,So]=ae[s.operator]??[];if(qe){let mf="";if(typeof qe=="function")mf=qe(s,m);else{if(s.nops===1)return`${qe}${m(s.op1,So+1)}`;mf=s.ops?.map(p1=>m(p1,So+1)).join(` ${qe} `)??""}return V5(mf,c,So)}let Hc=(o.functions?{...D7,...o.functions}:D7)[s.operator];return typeof Hc=="function"?Hc(s,m):typeof Hc=="string"?`${Hc}(${s.ops?.map(mf=>m(mf)).join(", ")??""})`:`${s.operator}(${s.ops?.map(mf=>m(mf)).join(", ")??""})`}return JSON.stringify(s.json)}function Q3(s,o){return s?o?((o.startsWith("-")||o.startsWith("+"))&&(o=`(${o})`),s.match(/^[-+]?\d+$/)&&o.match(/^[a-zA-Z\(]/)?s+o:`${s} * ${o}`):s:o}function S3(s,o){return s?o?o.startsWith("-")?`${s} - ${o.substring(1)}`:o.startsWith("+")?`${s} + ${o.substring(1)}`:`${s} + ${o}`:s:o}function I3(s,o){for(s.isInteger()&&o.isInteger();!o.isZero();)[s,o]=[o,s.modulo(o)];return s.abs()}function W3(s,o){return s.mul(o).div(I3(s,o))}function cv(s,o){if(!o.isInteger()||o.isNegative())return s._BIGNUM_NAN;if(o.lessThan(1))return s._BIGNUM_ONE;let c=o;for(;o.greaterThan(2);)o=o.minus(2),c=c.mul(o);return c}function qv(s){return s.isFinite()?s.d.length>3||s.d.length===3&&s.d[0]>=90?!1:(s.precision()<=16,s.e<308&&s.e>-306):!0}var t7=class qE extends D6{__brand;decimal;bignum;constructor(o,c){if(super(),this.bignum=c,typeof o=="number")this.decimal=c(o),this.im=0;else if(o instanceof e4)this.decimal=o,this.im=0;else{let m=c(o.re??0);this.decimal=m,this.im=o.im??0}this.decimal.isNaN()&&(this.im=NaN),this.decimal.isNaN(),isNaN(this.im)}get type(){return this.isNaN?"number":this.isComplexInfinity?"complex":this.im!==0?this.decimal.isZero()?"imaginary":"finite_complex":this.decimal.isFinite()?this.decimal.isInteger()?"finite_integer":"finite_real":"non_finite_number"}get isExact(){return this.im===0&&this.decimal.isInteger()}get asExact(){if(this.isExact)return this._makeExact(D3(this.decimal))}toJSON(){return this.isNaN?"NaN":this.isPositiveInfinity?"PositiveInfinity":this.isNegativeInfinity?"NegativeInfinity":this.isComplexInfinity?"ComplexInfinity":this.im===0?qv(this.decimal)?this.decimal.toNumber():{num:E8(this.decimal)}:qv(this.decimal)?["Complex",sv(this.decimal.toNumber()),sv(this.im)]:["Complex",{num:E8(this.decimal)},sv(this.im)]}toString(){if(this.isZero)return"0";if(this.isOne)return"1";if(this.isNegativeOne)return"-1";if(this.im===0)return E8(this.decimal);if(this.decimal.isZero())return this.im===1?"i":this.im===-1?"-i":`${k5(this.im)}i`;if(this.isComplexInfinity)return"~oo";let o="";return this.im===1?o="+ i":this.im===-1?o="- i":this.im>0?o=`+ ${this.im}i`:o=`- ${-this.im}i`,`(${E8(this.decimal)} ${o})`}clone(o){return new qE(o,this.bignum)}_makeExact(o){return new b5(o,c=>this.clone(c),this.bignum)}get re(){return this.decimal.toNumber()}get bignumRe(){return this.decimal}get numerator(){return this}get denominator(){return this._makeExact(1)}get isNaN(){return this.decimal.isNaN()}get isPositiveInfinity(){return this.im===0&&!this.decimal.isFinite()&&!this.decimal.isNaN()&&this.decimal.isPositive()}get isNegativeInfinity(){return this.im===0&&!this.decimal.isFinite()&&!this.decimal.isNaN()&&this.decimal.isNegative()}get isComplexInfinity(){return!Number.isFinite(this.im)&&!Number.isNaN(this.im)}get isZero(){return this.im===0&&this.decimal.isZero()}isZeroWithTolerance(o){if(this.im!==0)return!1;let c=typeof o=="number"?this.bignum(o):o;return this.decimal.abs().lte(c)}get isOne(){return this.im===0&&this.decimal.eq(1)}get isNegativeOne(){return this.im===0&&this.decimal.eq(-1)}sgn(){if(this.im===0){if(this.decimal.isZero())return 0;if(this.decimal.isPositive())return 1;if(this.decimal.isNegative())return-1}}N(){return this}neg(){return this.isZero?this:this.clone({re:this.decimal.neg(),im:-this.im})}inv(){if(this.isOne)return this;if(this.isNegativeOne)return this;if(this.im===0)return this.clone(this.decimal.pow(-1));let o=Math.hypot(this.re,this.im),c=this.decimal.mul(this.decimal).add(this.im*this.im).sqrt();return this.clone({re:this.decimal.div(c),im:-this.im/o})}add(o){return typeof o=="number"?o===0?this:this.clone({re:this.decimal.add(o),im:this.im}):o.isZero?this:this.isZero?this.clone(o):this.clone({re:this.decimal.add(o.bignumRe??o.re),im:this.im+o.im})}sub(o){return this.add(o.neg())}mul(o){if(this.isZero)return this;if(o===1)return this;if(o===-1)return this.neg();if(o===0)return this.clone(0);if(this.isOne)return typeof o=="number"||o instanceof e4?this.clone(o):this.clone({re:o.bignumRe??o.re,im:o.im});if(typeof o=="number")return this.im===0?this.clone(this.decimal.mul(o)):this.clone({re:this.decimal.mul(o),im:this.im*o});if(o instanceof e4)return this.im===0?this.clone(this.decimal.mul(o)):this.clone({re:this.decimal.mul(o),im:this.im*o.toNumber()});if(this.isNegativeOne){let c=o.neg();return this.clone({re:c.bignumRe??c.re,im:c.im})}return o.isOne?this:o.isNegativeOne?this.neg():o.isZero?this.clone(0):this.im===0&&o.im===0?this.clone(this.decimal.mul(o.bignumRe??o.re)):this.clone({re:this.decimal.mul(o.bignumRe??o.re).sub(this.im*o.im),im:this.re*o.im+this.im*o.re})}div(o){if(typeof o=="number")return o===1?this:o===-1?this.neg():o===0?this.clone(NaN):this.clone({re:this.decimal.div(o),im:this.im/o});if(o.isOne)return this;if(o.isNegativeOne)return this.neg();if(o.isZero)return this.clone(this.isZero?NaN:1/0);if(this.im===0&&o.im===0)return this.clone(this.decimal.div(o.bignumRe??o.re));let[c,m]=[this.re,this.im],[A,ae]=[o.re,o.im],qe=A*A+ae*ae,So=o.bignumRe??this.bignum(o.re),Hc=So.mul(So).add(ae*ae);return this.clone({re:this.decimal.mul(So).add(m*ae).div(Hc),im:(m*A-c*ae)/qe})}pow(o){if(this.isNaN)return this;if(typeof o=="number"&&isNaN(o))return this.clone(NaN);if(o instanceof D6){if(o.isNaN)return this.clone(NaN);if(o.isZero)return this.clone(1);if(o.isOne)return this;o.im?o={re:o.re,im:o.im}:o=o.re}if(typeof o=="object"&&("re"in o||"im"in o)){let[Hc,mf]=[o?.re??0,o?.im??0];if(Number.isNaN(mf)||Number.isNaN(Hc))return this.clone(NaN);if(mf===0)o=Hc;else{if(this.im===1/0)return this.clone(NaN);if(this.isNegativeInfinity)return this.clone(0);if(this.isPositiveInfinity)return this.clone({im:1/0});let p1=this.pow(Hc),M1=this.decimal.ln().mul(mf),R1=this.clone({re:M1.cos(),im:X5(M1.sin().toNumber())});return p1.mul(R1)}}if(this.isPositiveInfinity){if(o===-1)return this.clone(0);if(o===1/0)return this.clone(1/0);if(o===-1/0)return this.clone(0)}else if(this.isNegativeInfinity&&o===1/0)return this.clone(NaN);if((o===1/0||o===-1/0)&&(this.isOne||this.isNegativeOne))return this.clone(NaN);if(o===1)return this;if(o===-1)return this.inv();if(o===0)return this.clone(1);if(this.isZero){if(o>0)return this;if(o<0)return this.clone({im:1/0})}if(o<0)return this.pow(-o).inv();if(this.im===0)return this.clone(this.decimal.pow(o));let c=this.decimal,m=this.im,A=c.mul(c).add(m*m).sqrt(),ae=e4.atan2(m,c),qe=A.pow(o),So=ae.mul(o);return this.clone({re:qe.mul(So.cos()),im:X5(qe.mul(So.sin()).toNumber())})}root(o){if(!Number.isInteger(o))return this._makeExact(NaN);if(o===0)return this._makeExact(NaN);if(o===1)return this;if(this.isZero)return this;if(this.isOne)return this;if(this.isNegativeOne)return this;if(this.im===0)return this.decimal.isNegative()?this._makeExact(NaN):o===2?this.clone(this.decimal.sqrt()):o===3?this.clone(this.decimal.cbrt()):this.clone(this.decimal.pow(1/o));let c=this.decimal,m=this.im,A=c.mul(c).add(m*m).sqrt(),ae=e4.atan2(m,c),qe=A.pow(1/o),So=ae.div(o);return this.clone({re:qe.mul(So.cos()),im:X5(qe.mul(So.sin()).toNumber())})}sqrt(){if(this.isZero||this.isOne)return this;if(this.im!==0){let o=this.decimal,c=this.im,m=o.mul(o).add(c*c).sqrt(),A=o.add(m).div(2).sqrt(),ae=X5(Math.sign(c)*m.sub(o).div(2).sqrt().toNumber());return this.clone({re:A,im:ae})}return this.decimal.isPositive()?this.clone(this.decimal.sqrt()):this.clone({im:Math.sqrt(-this.re)})}gcd(o){if(this.isZero)return o;if(o.isZero)return this;if(this.im!==0||o.im!==0)return this._makeExact(NaN);if(!this.decimal.isInteger())return this._makeExact(1);let c=this.bignum(o.bignumRe??o.re);if(!c.isInteger())return this._makeExact(1);let m=this.decimal;for(;!c.isZero();){let A=c;c=m.mod(c),m=A}return this.clone(m.abs())}abs(){return this.im===0?this.decimal.isPositive()?this:this.clone(this.decimal.neg()):this.clone(this.decimal.pow(2).add(this.im**2).sqrt())}ln(o){if(this.isZero)return this._makeExact(NaN);if(this.isNegativeInfinity)return this._makeExact(NaN);if(this.isPositiveInfinity)return this._makeExact(1/0);if(this.im===0)return this.decimal.isNegative()?this._makeExact(NaN):this.isOne?this._makeExact(0):this.isNegativeOne?this.clone({im:Math.PI}):o===void 0?this.clone(this.decimal.ln()):this.clone(this.decimal.log(o));let c=this.decimal,m=this.im,A=c.mul(c).add(m*m).sqrt(),ae=e4.atan2(m,c).toNumber();return o===void 0?this.clone({re:A.ln(),im:ae}):this.clone({re:A.log(o),im:ae})}exp(){if(this.isNaN)return this._makeExact(NaN);if(this.isZero)return this._makeExact(1);if(this.isNegativeInfinity)return this._makeExact(0);if(this.isPositiveInfinity)return this._makeExact(1/0);if(this.im!==0){let o=this.decimal.exp();return this.clone({re:o.mul(X5(Math.cos(this.im))),im:X5(o.mul(Math.sin(this.im)).toNumber())})}return this.clone(this.decimal.exp())}floor(){return this.isNaN||this.im!==0?this._makeExact(NaN):this.decimal.isInteger()?this:this._makeExact(D3(this.decimal.floor()))}ceil(){return this.isNaN||this.im!==0?this._makeExact(NaN):this.decimal.isInteger()?this:this._makeExact(D3(this.decimal.ceil()))}round(){return this.isNaN||this.im!==0?this._makeExact(NaN):this.decimal.isInteger()?this:this._makeExact(D3(this.decimal.round()))}eq(o){return this.isNaN?!1:typeof o=="number"?this.im===0&&this.decimal.eq(o):o.isNaN?!1:Number.isFinite(this.im)?this.decimal.eq(o.bignumRe??o.re)&&this.im-o.im===0:!Number.isFinite(o.im)}lt(o){return this.im,typeof o=="number"?this.decimal.lt(o):this.decimal.lt(o.bignumRe??o.re)}lte(o){return this.im,typeof o=="number"?this.decimal.lte(o):this.decimal.lte(o.bignumRe??o.re)}gt(o){return this.im,typeof o=="number"?this.decimal.gt(o):this.decimal.gt(o.bignumRe??o.re)}gte(o){return this.im,typeof o=="number"?this.decimal.gte(o):this.decimal.gte(o.bignumRe??o.re)}};function E8(s){let o=s.toString();if(s.isInteger()&&o.includes("e")){let c=s.toFixed(),m=c.match(/0+$/);if((m?m[0].length:0)<=5)return c}return o}function X5(s){return Math.abs(s)<=1e-14?0:s}var b6=class $E extends D6{__brand;decimal;bignum;constructor(o,c){if(super(),this.bignum=c,typeof o=="number")this.decimal=o,this.im=0;else if(o instanceof e4)this.decimal=o.toNumber(),this.im=0;else{let m=o.re===void 0?0:o.re instanceof e4?o.re.toNumber():o.re;this.decimal=m,this.im=o.im??0,isFinite(this.im)||(this.decimal=this.im)}isNaN(this.im)}_makeExact(o){return new b5(o,c=>this.clone(c),this.bignum)}get type(){return this.isNaN?"number":this.isComplexInfinity?"complex":this.im!==0?this.decimal===0?"imaginary":"finite_complex":Number.isFinite(this.decimal)?Number.isInteger(this.decimal)?"finite_integer":"finite_real":"non_finite_number"}get isExact(){return this.im===0&&Number.isInteger(this.decimal)}get asExact(){if(this.isExact)return this._makeExact(this.decimal)}toJSON(){return this.isNaN?"NaN":this.isPositiveInfinity?"PositiveInfinity":this.isNegativeInfinity?"NegativeInfinity":this.im===0?sv(this.decimal):["Complex",sv(this.decimal),sv(this.im)]}toString(){if(this.isZero)return"0";if(this.isOne)return"1";if(this.isNegativeOne)return"-1";if(this.im===0)return k5(this.decimal);if(this.decimal===0)return this.im===1?"i":this.im===-1?"-i":`${k5(this.im)}i`;if(this.isComplexInfinity)return"~oo";let o="";return this.im===1?o="+ i":this.im===-1?o="- i":this.im>0?o=`+ ${k5(this.im)}i`:o=`- ${k5(-this.im)}i`,`(${k5(this.decimal)} ${o})`}clone(o){return new $E(o,this.bignum)}get re(){return this.decimal}get bignumRe(){}get numerator(){return this}get denominator(){return this._makeExact(1)}get isNaN(){return Number.isNaN(this.decimal)}get isPositiveInfinity(){return!Number.isFinite(this.decimal)&&this.decimal>0&&this.im===0}get isNegativeInfinity(){return!Number.isFinite(this.decimal)&&this.decimal<0&&this.im===0}get isComplexInfinity(){return!Number.isFinite(this.im)&&!Number.isNaN(this.im)}get isZero(){return this.im===0&&this.decimal===0}isZeroWithTolerance(o){if(this.im!==0)return!1;let c=o instanceof e4?o.toNumber():o;return Math.abs(this.decimal)<c}get isOne(){return this.im===0&&this.decimal===1}get isNegativeOne(){return this.im===0&&this.decimal===-1}sgn(){if(!(this.im!==0||!Number.isFinite(this.decimal)))return Math.sign(this.decimal)}N(){return this}neg(){return this.isNaN?this._makeExact(NaN):this.isZero?this:this.clone({re:-this.decimal,im:-this.im})}inv(){if(this.isNaN)return this._makeExact(NaN);if(this.isOne)return this;if(this.isNegativeOne)return this;if(this.im===0)return this.clone(1/this.decimal);let o=Math.hypot(this.re,this.im);return this.clone({re:this.decimal/o,im:-this.im/o})}add(o){return this.isNaN?this._makeExact(NaN):typeof o=="number"?o===0?this:this.clone({re:this.decimal+o,im:this.im}):o.isZero?this:this.isZero?this.clone({re:o.bignumRe??o.re,im:o.im}):this.clone({re:this.decimal+o.re,im:this.im+o.im})}sub(o){return this.add(o.neg())}mul(o){if(this.isNaN)return this._makeExact(NaN);if(this.isZero)return this;if(o instanceof e4&&(o=o.toNumber()),o===1)return this;if(o===-1)return this.neg();if(o===0)return this.clone(0);if(this.isOne)return typeof o=="number"||o instanceof e4?this.clone(o):this.clone({re:o.bignumRe??o.re,im:o.im});if(typeof o=="number")return this.im===0?this.clone(this.decimal*o):this.clone({re:this.decimal*o,im:this.im*o});if(this.isNegativeOne){let c=o.neg();return this.clone({re:c.bignumRe??c.re,im:c.im})}return o.isOne?this:o.isNegativeOne?this.neg():o.isZero?this.clone(0):this.im===0&&o.im===0?this.clone(this.decimal*o.re):this.clone({re:this.decimal*o.re-this.im*o.im,im:this.re*o.im+this.im*o.re})}div(o){if(this.isNaN)return this._makeExact(NaN);if(typeof o=="number")return o===1?this:o===-1?this.neg():o===0?this.clone(NaN):this.clone({re:this.decimal/o,im:this.im/o});if(o.isOne)return this;if(o.isNegativeOne)return this.neg();if(o.isZero)return this.clone(this.isZero?NaN:1/0);if(this.im===0&&o.im===0)return this.clone(this.decimal/o.re);let[c,m]=[this.decimal,this.im],[A,ae]=[o.re,o.im],qe=A*A+ae*ae;return this.clone({re:(c*A+m*ae)/qe,im:(m*A-c*ae)/qe})}pow(o){if(this.isNaN)return this._makeExact(NaN);if(typeof o=="number"&&isNaN(o))return this.clone(NaN);if(o instanceof D6){if(o.isNaN)return this.clone(NaN);if(o.isZero)return this.clone(1);if(o.isOne)return this;o.im?o={re:o.re,im:o.im}:o=o.re}if(typeof o=="object"&&("re"in o||"im"in o)){let[Hc,mf]=[o?.re??0,o?.im??0];if(Number.isNaN(mf)||Number.isNaN(Hc))return this.clone(NaN);if(mf===0)o=Hc;else{if(this.im===1/0)return this.clone(NaN);if(this.isNegativeInfinity)return this.clone(0);if(this.isPositiveInfinity)return this.clone({im:1/0});let p1=this.pow(Hc).re,M1=Math.log(this.decimal)*mf;return this.clone({re:Ay(p1*Math.cos(M1)),im:Ay(p1*Math.sin(M1))})}}if(this.isPositiveInfinity){if(o===-1)return this.clone(0);if(o===1/0)return this.clone(1/0);if(o===-1/0)return this.clone(0)}else if(this.isNegativeInfinity&&o===1/0)return this.clone(NaN);if((o===1/0||o===-1/0)&&(this.isOne||this.isNegativeOne))return this.clone(NaN);if(o===1)return this;if(o===-1)return this.inv();if(o===0)return this.clone(1);if(this.isZero){if(o>0)return this;if(o<0)return this.clone({im:1/0})}if(o<0)return this.clone(1/this.decimal**-o);if(this.im===0)return this.clone(this.decimal**o);let c=this.decimal,m=this.im,A=Math.sqrt(c*c+m*m),ae=Math.atan2(m,c),qe=A**o,So=ae**o;return this.clone({re:qe*Math.cos(So),im:qe*Math.sin(So)})}root(o){if(this.isNaN)return this._makeExact(NaN);if(o===0)return this.clone(NaN);if(this.isNaN)return this;if(this.isZero)return this;if(this.isOne)return this;if(this.isNegativeOne)return this;if(o===1)return this;if(o===2)return this.sqrt();if(o===3)return this.clone(Math.cbrt(this.decimal));if(this.im===0)return this.decimal<0?o%2===0?this.clone(NaN):this.clone(-Math.pow(-this.decimal,1/o)):this.clone(Math.pow(this.decimal,1/o));let c=this.decimal,m=this.im,A=Math.hypot(c,m),ae=Math.atan2(m,c),qe=Math.pow(A,1/o),So=ae/o;return this.clone({re:qe*Math.cos(So),im:qe*Math.sin(So)})}sqrt(){if(this.isNaN)return this._makeExact(NaN);if(this.isZero||this.isOne)return this;if(this.im!==0){let o=this.decimal,c=this.im,m=Math.sqrt(o*o+c*c),A=Math.sqrt((o+m)/2),ae=Math.sign(c)*Math.sqrt((m-o)/2);return this.clone({re:A,im:ae})}return this.decimal>0?this.clone(Math.sqrt(this.decimal)):this.clone({im:Math.sqrt(-this.decimal)})}gcd(o){if(this.isNaN)return this._makeExact(NaN);if(this.isZero)return o;if(o.isZero)return this;if(this.im!==0||o.im!==0)return this._makeExact(NaN);if(!Number.isInteger(this.decimal))return this._makeExact(1);let c=o.re;if(!Number.isInteger(c))return this._makeExact(1);let m=this.decimal;for(;c!==0;){let A=c;c=m%c,m=A}return this.clone(Math.abs(m))}abs(){return this.isNaN?this._makeExact(NaN):this.im===0?this.decimal>0?this:this.clone(-this.decimal):this.clone(Math.sqrt(this.decimal**2+this.im**2))}ln(o){if(this.isNaN)return this._makeExact(NaN);if(this.isZero)return this._makeExact(NaN);if(this.isNegativeInfinity)return this._makeExact(NaN);if(this.isPositiveInfinity)return this._makeExact(1/0);if(this.im===0)return this.decimal<0?this._makeExact(NaN):this.isOne?this._makeExact(0):this.isNegativeOne?this.clone({im:Math.PI}):o===void 0?this.clone(Math.log(this.decimal)):this.clone(Math.log(this.decimal)/Math.log(o));let c=this.decimal,m=this.im,A=Math.hypot(c,m),ae=Math.atan2(m,c),qe=o===void 0?Math.log(A):Math.log(A)/Math.log(o);return this.clone({re:qe,im:ae})}exp(){if(this.isNaN)return this._makeExact(NaN);if(this.isZero)return this._makeExact(1);if(this.isNegativeInfinity)return this._makeExact(0);if(this.isPositiveInfinity)return this._makeExact(1/0);if(this.im!==0){let o=Math.exp(this.decimal);return this.clone({re:o*Math.cos(this.im),im:o*Math.sin(this.im)})}return this.clone(Math.exp(this.decimal))}floor(){return this.isNaN||this.im!==0?this._makeExact(NaN):Number.isInteger(this.decimal)?this:this._makeExact(Math.floor(this.decimal))}ceil(){return this.isNaN||this.im!==0?this._makeExact(NaN):Number.isInteger(this.decimal)?this:this._makeExact(Math.ceil(this.decimal))}round(){return this.isNaN||this.im!==0?this._makeExact(NaN):Number.isInteger(this.decimal)?this:this._makeExact(Math.round(this.decimal))}eq(o){return this.isNaN?!1:typeof o=="number"?this.im===0&&this.decimal-o===0:o.isNaN?!1:Number.isFinite(this.im)?this.decimal-o.re===0&&this.im-o.im===0:!Number.isFinite(o.im)}lt(o){return this.im,typeof o=="number"?this.decimal<o:this.decimal<o.re}lte(o){return this.im,typeof o=="number"?this.decimal<=o:this.decimal<=o.re}gt(o){return this.im,typeof o=="number"?this.decimal>o:this.decimal>o.re}gte(o){return this.im,typeof o=="number"?this.decimal>=o:this.decimal>=o.re}};function Ay(s){return Math.abs(s)<=1e-14?0:s}var r7=class{engine;terms=[];constructor(s,o){this.engine=s;let c=0,m=0,A=[];for(let ae of o){if(ae.type.is("complex")&&ae.isInfinity){this.terms=[{term:s.ComplexInfinity,coef:[]}];return}if(ae.isNaN||ae.symbol==="Undefined"){this.terms=[{term:s.NaN,coef:[]}];return}let[qe,So]=ae.toNumericValue();qe.isPositiveInfinity?c+=1:qe.isNegativeInfinity&&(m+=1),So.is(1)?qe.isZero||A.push(qe):this.add(qe,So)}if(c>0&&m>0){this.terms=[{term:s.NaN,coef:[]}];return}if(c>0){this.terms=[{term:s.PositiveInfinity,coef:[]}];return}if(m>0){this.terms=[{term:s.NegativeInfinity,coef:[]}];return}A.length===1?this.add(A[0],s.One):A.length>0&&Ub(s,A).forEach(ae=>this.add(ae,s.One))}add(s,o){if(o.is(0)||s.isZero)return;if(o.is(1)){let m=this.engine;this.terms.push({coef:[],term:m.number(s)});return}if(o.operator==="Add"){for(let m of o.ops){let[A,ae]=m.toNumericValue();this.add(s.mul(A),ae)}return}if(o.operator==="Negate"){this.add(s.neg(),o.op1);return}let c=this.find(o);if(c>=0){this.terms[c].coef.push(s);return}o.numericValue===null||o.is(1),this.terms.push({coef:[s],term:o})}find(s){return this.terms.findIndex(o=>o.term.isSame(s))}N(){let s=this.engine,o=this.terms;if(o.length===0)return s.Zero;let c=[],m=[];for(let{coef:ae,term:qe}of o)if(ae.length===0)qe.isNumberLiteral?typeof qe.numericValue=="number"?m.push(s._numericValue(qe.numericValue)):m.push(qe.numericValue):c.push(qe);else{let So=ae.reduce((Hc,mf)=>Hc.add(mf)).N();if(So.isZero)continue;So.eq(1)?c.push(qe.N()):So.eq(-1)?c.push(qe.N().neg()):c.push(qe.N().mul(s.box(So)))}let A=Ev(s,m);if(!A.isZero){if(c.length===0)return s.box(A);c.push(s.box(A))}return Z5(s,c)}asExpression(){let s=this.engine,o=this.terms;return o.length===0?s.Zero:Z5(s,o.map(({coef:c,term:m})=>{if(c.length===0)return m;let A=Ub(s,c);if(A.length===0)return m;if(A.length>1)return o6(s,[Z5(s,A.map(qe=>s.box(qe))),m]);let ae=A[0];return ae.isNaN?s.NaN:ae.isZero?s.Zero:ae.eq(1)?m:ae.eq(-1)?m.neg():m.is(1)?s.box(ae):m.mul(s.box(ae))}))}};function Ub(s,o){let c=ae=>s.bignum(ae),m=ae=>new b5(ae,A,c),A=s.precision>n6?ae=>new t7(ae,c):ae=>new b6(ae,m);return b5.sum(o,A,c)}function Ev(s,o){let c=qe=>s.bignum(qe),m=qe=>new b5(qe,A,c),A=s.precision>n6?qe=>new t7(qe,c):qe=>new b6(qe,m),ae=b5.sum(o,A,c);return ae.length===0?m(0):ae.length===1?ae[0].N():ae.reduce((qe,So)=>qe.add(So).N())}function Z5(s,o){if(o=$6(o,"Add"),o=o.filter(m=>m.numericValue===null||!m.is(0)),o.length===0)return s.Zero;if(o.length===1&&!o[0].isIndexedCollection)return o[0];let c=[];for(let m=0;m<o.length;m++){let A=o[m];if(A.isNumberLiteral){let ae=A.numericValue;if(typeof ae=="number"||X2(ae.type,"real")&&!ae.isExact||X2(ae.type,"integer")){let qe=o[m+1];if(qe){let So=M8(qe)?.numericValue;if(So!==void 0){let Hc=typeof So=="number"?So:So?.re;if(Hc!==0){let mf=typeof ae=="number"?ae:ae.re;c.push(s.number(s._numericValue({re:mf,im:Hc??0}))),m++;continue}}}}}c.push(A)}return c.length===1?c[0]:s._fn("Add",[...c].sort(xv))}function p9(s){return s.length===0?"finite_integer":s.length===1?s[0].type:y3(...s.map(o=>o.type.type))}function q3(...s){return s.length>0,s.every(o=>o.isValid)?new r7(s[0].engine,s).asExpression():s[0].engine._fn("Add",s)}function ax(...s){return s.length>0,s.every(o=>o.isValid)?(s=s.map(o=>o.isNumberLiteral?o.evaluate():o.N()),new r7(s[0].engine,s).N()):s[0].engine._fn("Add",s)}function Tv(s,o){if(s.operator==="Negate"&&o.operator==="Negate")return Tv(s.op1,o.op1);let c=s.engine;if(s.operator==="Negate")return Tv(s.op1,o).neg();if(o.operator==="Negate")return Tv(s,o.op1).neg();if(s.operator==="Divide"&&o.operator==="Divide"){let m=s.op2.mul(o.op2);return Tv(s.op1,o.op1).div(m)}return s.operator==="Divide"?Tv(s.op1,o).div(s.op2):o.operator==="Divide"?Tv(s,o.op1).div(o.op2):s.operator==="Add"?q3(...s.ops.map(m=>Tv(m,o))):o.operator==="Add"?q3(...o.ops.map(m=>Tv(s,m))):new I5(c,[s,o]).asExpression()}function L7(s,o){if(o.length===0)return null;if(o.length===1)return o[0];if(o.length===2)return Tv(o[0],o[1]);let c=L7(s,o.slice(1));return c===null?null:Tv(o[0],c)}var i7=[[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1],[1,5,10,10,5,1],[1,6,15,20,15,6,1],[1,7,21,35,35,21,7,1],[1,8,28,56,70,56,28,8,1]];function Cy(s,o){for(;s>=i7.length;){let c=i7.length,m=[1],A=i7[c-1];for(let ae=1;ae<c;ae++)m[ae]=A[ae-1]+A[ae];m[c]=1,i7.push(m)}return i7[s][o]}function _5(s){let o=s.reduce((m,A)=>m+A,0),c=1;for(let m=0;m<s.length;m+=1)c*=Cy(o,s[m]),o-=s[m];return c}function*My(s,o){if(s===1){yield[o];return}for(let c=0;c<=o;c+=1)for(let m of My(s-1,o-c))yield[c,...m]}function n7(s,o){let c=s.engine;if(o<0){let qe=n7(s,-o);return qe?qe.inv():null}if(o===0)return c.One;if(o===1)return Av(s);if(s.operator==="Negate"&&Number.isInteger(o)){let qe=o%2===0?1:-1,So=n7(s.op1,o);return So===null?null:qe>0?So:So.neg()}if(s.operator,s.operator!=="Add")return null;let m=s.ops,A=My(m.length,o),ae=[];for(let qe of A){let So=[c.number(_5(qe))];for(let Hc=0;Hc<qe.length;Hc+=1)qe[Hc]!==0&&(qe[Hc]===1?So.push(m[Hc]):So.push(m[Hc].pow(qe[Hc])));ae.push(Y5(...So))}return q3(...ae)}function T8(s,o,c){let m=null;if(o==="Divide"){let A=Av(c[0]);return A===null?null:A.operator==="Add"?q3(...A.ops.map(ae=>ae.div(c[1]))):s._fn("Divide",[A,c[1]])}if(o==="Multiply")return L7(s,c);if(o==="Negate")return Av(c[0])?.neg()??null;if(o==="Add")return q3(...c.map(A=>Av(A)??A));if(o==="Power"){let A=R6(c[1]);m=A!==null?n7(c[0],A):null}return m}function Av(s){return s=s?.canonical,!s||typeof s.operator!="string"?null:Zv(s.operator)?s.engine._fn(s.operator,s.ops.map(o=>Av(o)??o)):T8(s.engine,s.operator,s.ops??[])}function m9(s){if(!s.operator||!s.ops)return null;let o=s.ops.map(m=>m9(m)??m),c=s.engine.function(s.operator,o);return Av(c)??c}function Cw(s){let o=-1;for(;s.operator==="Negate";)s=s.op1,o=-o;return o===1?s:s.isNumberLiteral?s.neg():s.engine._fn("Negate",[s])}function ky(s){let o=-1;for(;s.operator==="Negate";)s=s.op1,o=-o;if(o===1)return s;if(s.numericValue!==null)return s.neg();let c=s.engine;return s.operator==="Subtract"?s.op2.sub(s.op1):s.operator==="Add"?q3(...s.ops.map(m=>ky(m))):s.operator==="Multiply"?jb(c,s.ops):s.operator==="Divide"?ky(s.op1).div(s.op2):c._fn("Negate",[s])}function jb(s,o){if(o.length===0)return s.NegativeOne;if(o.length===1)return ky(o[0]);let c=[],m=!1;for(let A of o)!m&&A.operator==="Negate"?(m=!0,A.op1.is(1)||c.push(A.op1)):c.push(A);if(!m){c=[];for(let A of o)m||A.numericValue===null&&!A.isInteger?c.push(A):(m=!0,A.is(-1)||c.push(A.neg()))}if(m)return s._fn("Multiply",c.sort(y6));if(!m){c=[];for(let A of o)m||A.numericValue===null||!A.isNumber?c.push(A):(m=!0,A.is(-1)||c.push(A.neg()))}return m?s._fn("Multiply",c.sort(y6)):s._fn("Negate",[s._fn("Multiply",[...o].sort(y6))])}function U6(s,o){let c=s.engine;if(!s.isValid||!o.isValid)return c._fn("Divide",[s,o]);if(s.isNaN||o.isNaN)return c.NaN;if(o.is(0))return s.is(0)?c.NaN:c.ComplexInfinity;if(s.is(0))return c.Zero;if(o.is(0)===!1&&(s.symbol!==null&&s.symbol===o.symbol&&s.isConstant||s.isSame(o)))return c.One;if(s.operator==="Negate"&&o.operator==="Negate"&&(s=s.op1,o=o.op1),s.operator==="Divide"&&o.operator==="Divide")return U6(o6(c,[s.op1,o.op2]),o6(c,[s.op2,o.op1]));if(s.operator==="Divide")return U6(s.op1,o6(c,[s.op2,o]));if(o.operator==="Divide")return U6(o6(c,[s,o.op2]),o.op1);if(o.is(1))return s;if(o.is(-1))return s.neg();if(s.is(1))return o.inv();if(o.isInfinity)return s.isInfinity?c.NaN:c.Zero;if(s.operator==="Sqrt"&&o.operator==="Sqrt"){let p1=R6(s.op1),M1=R6(o.op1);if(p1!==null&&M1!==null)return c.number(c._numericValue({radical:p1*M1,rational:[1,M1]}))}else if(s.operator==="Sqrt"){let p1=R6(s.op1),M1=R6(o);if(p1!==null&&M1!==null)return c.number(c._numericValue({radical:p1,rational:[1,M1]}))}else if(o.operator==="Sqrt"){let p1=R6(s),M1=R6(o.op1);if(p1!==null&&M1!==null)return c.number(c._numericValue({radical:M1,rational:[p1,M1]}))}let m=s.numericValue,A=o.numericValue;if(m!==null&&A!==null){if(typeof m!="number"&&m.im!==0||typeof A!="number"&&A.im!==0)return c._fn("Divide",[s,o]);if(typeof m=="number"&&Number.isInteger(m)&&typeof A=="number"&&Number.isInteger(A))return c.number([m,A]);if(typeof m=="number"&&Number.isInteger(m)){if(m===0)return c.Zero;if(typeof A!="number"&&X2(A.type,"integer")){let p1=A.bignumRe;if(p1!==void 0){if(p1.isInteger())return c.number([D3(m),D3(p1)])}else{let M1=A.re;if(Number.isInteger(M1))return c.number([m,M1])}}}return c._fn("Divide",[s,o])}let[ae,qe]=s.toNumericValue();if(ae.isZero)return c.Zero;let[So,Hc]=o.toNumericValue();if(So.isZero)return c.NaN;let mf=ae.div(So);return mf.isOne?Hc.is(1)?qe:c._fn("Divide",[qe,Hc]):mf.isNegativeOne?Hc.is(1)?qe.neg():c._fn("Divide",[qe.neg(),Hc]):mf.isExact?qe.is(1)&&Hc.is(1)?c.number(mf):Hc.is(1)?o6(c,[c.number(mf),qe]):c._fn("Divide",[o6(c,[c.number(mf.numerator),qe]),o6(c,[c.number(mf.denominator),Hc])]):c._fn("Divide",[s,o])}function Hb(s,o){let c=s.engine;if(s=s.canonical,typeof o!="number"&&(o=o.canonical),s.isNaN)return c.NaN;if(typeof o=="number"){if(isNaN(o))return c.NaN;if(s.is(0))return o===0||!isFinite(o)?c.NaN:s;if(o===1)return s;if(o===-1)return s.neg();if(o===0)return c.NaN;if(s.isNumberLiteral){let A=s.numericValue;if(typeof A=="number"){if(Number.isInteger(A)&&Number.isInteger(o))return c.number(c._numericValue({rational:[A,o]}))}else if(A.isExact&&Number.isInteger(o))return c.number(A.asExact.div(o))}}else{if(o.isNaN)return c.NaN;if(s.is(0))return o.is(0)||o.isFinite===!1?c.NaN:c.Zero;if(o.is(1))return s;if(o.is(-1))return s.neg();if(o.is(0))return c.NaN;if(s.isNumberLiteral&&o.isNumberLiteral){let A=s.numericValue,ae=o.numericValue;if(typeof A=="number"&&typeof ae=="number"&&Number.isInteger(A)&&Number.isInteger(ae))return c.number(c._numericValue({rational:[A,ae]}));if(typeof A=="number"&&Number.isInteger(A)&&typeof ae!="number"){if(ae.isExact)return c.number(c._numericValue(A).div(ae.asExact))}else if(typeof ae=="number"&&Number.isInteger(ae)&&typeof A!="number"){if(A.isExact)return c.number(A.asExact.div(ae))}else if(typeof A!="number"&&typeof ae!="number"&&A.isExact&&ae.isExact)return c.number(A.asExact.div(ae.asExact))}}let m=new I5(c,[s]);return m.div(typeof o=="number"?c._numericValue(o):o),m.asRationalExpression()}function o6(s,o){let c=1,m=[];for(let ae of o){let[qe,So]=Mw(ae);c*=So,m.push(qe)}m=m.filter(ae=>!ae.is(1));let A=[];for(let ae=0;ae<m.length;ae++){let qe=m[ae];if(ae+1>=m.length){A.push(qe);continue}let So=m[ae+1];if(qe.isNumberLiteral){if(So.operator==="Sqrt"&&So.op1.isNumberLiteral&&So.op1.type.matches("finite_integer")){let Hc=So.op1.numericValue;if(typeof Hc!="number"&&(Hc=Hc.re),Hc>=Q4){A.push(qe);continue}if(qe.type.matches("finite_rational")){let mf=qe.numericValue,[p1,M1]=typeof mf=="number"?[mf,1]:[mf.numerator.re,mf.denominator.re];A.push(s.number(s._numericValue({rational:[p1,M1],radical:Hc}))),ae++;continue}}else if(So.isNumberLiteral&&So.numericValue instanceof D6){let Hc=So.numericValue;if(Hc instanceof b5&&M5(Hc.rational)&&Hc.radical!==1){let mf=Zy(qe);if(mf){A.push(s.number(s._numericValue({rational:mf,radical:Hc.radical}))),ae++;continue}}else if(Hc.im===1){let mf=qe.numericValue;if(typeof mf=="number"){A.push(s.number(s.complex(0,mf))),ae++;continue}else if(mf.im===0){if(Number.isInteger(mf.re)){A.push(s.number(s.complex(0,mf.re))),ae++;continue}else if(!mf.isExact){A.push(s.number(s.complex(0,mf.re))),ae++;continue}}}}}A.push(qe)}return c<0?A.length===0?s.number(-1):A.length===1?A[0].neg():jb(s,A):A.length===0?s.number(1):A.length===1?A[0]:s._fn("Multiply",[...A].sort(y6))}function Mw(s){let o=1;for(;s.operator==="Negate";)o=-o,s=s.op1;return s.isNumberLiteral&&s.isNegative&&(o=-o,s=s.neg()),[s,o]}function Y5(...s){if(s.length>0,s.length===1)return s[0];let o=s[0].engine,c=L7(o,s);if(c){if(c.operator!=="Multiply")return c;s=c.ops}return new I5(o,s).asRationalExpression()}function vS(...s){s.length>0;let o=s[0].engine;s=s.map(m=>m.N());let c=L7(o,s);if(c){if(c.operator!=="Multiply")return c;s=c.ops}return new I5(o,s).asExpression({numericApproximation:!0})}var I5=class zE{constructor(o,c,m){if(this.options=m,m=m?{...m}:{},"canonical"in m||(m.canonical=!0),this._isCanonical=m.canonical,this.engine=o,this.coefficient=o._numericValue(1),c)for(let A of c)this.mul(A)}engine;coefficient;terms=[];_isCanonical=!0;static from(o){return new zE(o.engine,[o])}mul(o,c){if(o.isCanonical||o.isStructural,this.coefficient.isNaN)return;if(o.isNaN){this.coefficient=this.engine._numericValue(NaN);return}if(o.operator==="Multiply"){for(let ae of o.ops)this.mul(ae,c);return}if(o.operator==="Negate"){this.mul(o.op1,c),this.coefficient=this.coefficient.neg();return}if(this._isCanonical){if(o.symbol==="Nothing")return;c??=[1,1];let ae=o.numericValue;if(ae!==null){if(o.is(1))return;if(o.is(0)){this.coefficient=this.engine._numericValue(gy(c)?NaN:0);return}if(o.is(-1)){M5(c)?this.coefficient=this.coefficient.neg():this.coefficient=this.coefficient.mul(this.engine._numericValue(-1).pow(this.engine._numericValue(c)));return}if(o.isInfinity){M5(c)?this.coefficient=this.engine._numericValue(o.isNegative?-1/0:1/0):this.terms.push({term:o,exponent:c});return}M5(c)?this.coefficient=this.coefficient.mul(ae):this.coefficient=this.coefficient.mul(this.engine._numericValue(ae).pow(this.engine._numericValue(c)));return}let qe=o9(o);if(qe!==null){this.coefficient=this.coefficient.mul(this.engine._numericValue({radical:qe[0]*qe[1],rational:[1,Number(qe[1])]}).pow(this.engine._numericValue(c)));return}if(!o.symbol){let So;[So,o]=o.toNumericValue(),c&&!M5(c)&&(So=So.pow(this.engine._numericValue(c))),this.coefficient=this.coefficient.mul(So)}}if(o.is(1)&&(!c||M5(c))||o.is(0)===!1&&c&&gy(c))return;if(o.is(0)){c&&gy(c)?this.coefficient=this.engine._numericValue(NaN):this.coefficient=this.engine._numericValue(0);return}let m=c??[1,1];if(o.operator==="Power"){let ae=Zy(o.op2);if(ae){this.mul(o.op1,Xy(m,ae));return}}if(o.operator==="Sqrt"){this.mul(o.op1,Xy(m,[1,2]));return}if(o.operator==="Root"){let ae=Zy(o.op2);if(ae){this.mul(o.op1,Xy(m,ew(ae)));return}}if(o.operator==="Divide"){this.mul(o.op1,m),this.mul(o.op2,a9(m));return}let A=!1;for(let ae of this.terms)if(ae.term.isSame(o)){ae.exponent=h8(ae.exponent,m),A=!0;break}A||this.terms.push({term:o,exponent:m})}div(o){o instanceof D6?this.coefficient=this.coefficient.div(o):this.mul(o,[-1,1])}groupedByDegrees(o){o??={},"mode"in o||(o.mode="expression");let c=o.mode;if(c==="numeric"&&(this.coefficient.isNegativeInfinity||this.coefficient.isPositiveInfinity))return[];if(this.coefficient.isZero)return[];let m=this.engine;if(this.terms.length===0)if(c==="numeric"){let ae=this.coefficient.N();return[{exponent:[1,1],terms:[m.number(ae)]}]}else return[{exponent:[1,1],terms:[m.number(this.coefficient)]}];let A=[];if(!this.coefficient.isOne)if(c==="rational"&&this.coefficient.type==="finite_rational"){let ae=this.coefficient.numerator;ae.isOne||A.push({exponent:[1,1],terms:[m.number(ae)]});let qe=this.coefficient.denominator;qe.isOne||A.push({exponent:[-1,1],terms:[m.number(qe)]})}else if(c==="numeric"){let ae=this.coefficient.N();A.push({exponent:[1,1],terms:[m.number(ae)]})}else A.push({exponent:[1,1],terms:[m.number(this.coefficient)]});for(let ae of this.terms){let qe=H9(ae.exponent);if(qe[0]===0)continue;let So=!1;for(let Hc of A)if(qe[0]===Hc.exponent[0]&&qe[1]===Hc.exponent[1]){Hc.terms.push(ae.term),So=!0;break}So||A.push({exponent:qe,terms:[ae.term]})}return A}asExpression(o={numericApproximation:!1}){let c=this.engine,m=this.coefficient;if(m.isNaN)return c.NaN;if(m.isPositiveInfinity)return c.PositiveInfinity;if(m.isNegativeInfinity)return c.NegativeInfinity;if(m.isZero)return c.Zero;let A=m.isNegativeOne;A&&(this.coefficient=c._numericValue(1));let ae=this.groupedByDegrees({mode:o.numericApproximation?"numeric":"expression"});if(ae===null)return c.NaN;if(A){let qe=A8(c,ae).neg();return this.coefficient=c._numericValue(-1),qe}return A8(c,ae)}asNumeratorDenominator(){let o=this.engine,c=this.coefficient;if(c.isZero)return[o.Zero,o.One];if(c.isPositiveInfinity||c.isNegativeInfinity)return this.terms.length===0?[c.isPositiveInfinity?o.PositiveInfinity:o.NegativeInfinity,o.One]:[o.NaN,o.NaN];let m=c.isNegativeOne;m&&(this.coefficient=o._numericValue(1));let A=this.groupedByDegrees({mode:"rational"});if(this.coefficient=c,A===null)return[o.NaN,o.NaN];let ae=A.filter(Hc=>Hc.exponent[0]>=0),qe=A.filter(Hc=>Hc.exponent[0]<0).map(Hc=>({exponent:a9(Hc.exponent),terms:Hc.terms})),So=A8(o,ae);return[m?So.neg():So,A8(o,qe)]}asRationalExpression(){let[o,c]=this.asNumeratorDenominator();return U6(o,c)}};function Gb(s,o){let c=s.engine,m=s.coefficient.gcd(o.coefficient);if(m.isOne)return[c._numericValue(1),c.One];let A=[];for(let ae of s.terms){let qe=o.terms.find(Hc=>ae.term.isSame(Hc.term));if(!qe)continue;let So=F_(ae.exponent,qe.exponent);if(M5(So))A.push(ae.term);else{let[Hc,mf]=O_(So);mf===1?A.push(ae.term.pow(Hc)):Hc===1?A.push(ae.term.root(mf)):A.push(ae.term.pow(Hc).root(mf))}}return[m,A.length===0?c.One:Y5(...A)]}function A8(s,o){let c=o.map(({terms:m,exponent:A})=>{let ae=$6(m,"Multiply"),qe=ae.length<=1?ae[0]:s._fn("Multiply",[...ae].sort(y6));return M5(A)?qe:qe.pow(s.number(A))});return c=$6(c,"Multiply"),c.length===0?s.One:c.length===1?c[0]:s._fn("Multiply",c.sort(y6))}function O7(s,o,c,m,A){if(o.numericValue!==null&&o.isNegative){let ae=o.numericValue;if(typeof ae=="number")return m3(s,"Subtract",[c,s.number(-ae)],m,A);if(o.type.matches("rational"))return m3(s,"Subtract",[c,s.number(ae.neg())],m,A)}return o.operator==="Negate"&&c.operator!=="Negate"?m3(s,"Subtract",[c,o.op1],m,A):null}function kw(s,o,c,m,A){let ae=m.exclude;if(o==="Add"&&c.length===2&&!ae.includes("Subtract")){let qe=O7(s,c[0],c[1],m,A)??O7(s,c[1],c[0],m,A);if(qe)return qe}if(o==="Divide"&&c.length===2&&ae.includes("Divide"))return m3(s,"Multiply",[c[0],s._fn("Power",[c[1],s.NegativeOne])],m,A);if(o==="Multiply"&&!ae.includes("Negate")&&c[0].im===0&&c[0].re===-1)return c.length===2?m3(s,"Negate",[c[1]],m):m3(s,"Negate",[s._fn("Multiply",[...c.slice(1)].sort(y6))],m,A);if(o==="Multiply"&&!ae.includes("Divide")){let qe=new I5(s,c,{canonical:!1}).asRationalExpression();if(qe.operator==="Divide")return m3(s,qe.operator,qe.ops,m,A)}if(o==="Power"){if(!ae.includes("Exp")&&c[0]?.symbol==="ExponentialE")return m3(s,"Exp",[c[1]],m,A);if(c[1]?.numericValue!==null){let qe=R6(c[1]);if(qe===2&&!ae.includes("Square"))return m3(s,"Square",[c[0]],m,A);if(qe!==null&&qe<0&&!ae.includes("Divide"))return m3(s,"Divide",[s.One,qe===-1?c[0]:c[0].pow(-qe)],m,A);let So=c[1].re;if(!ae.includes("Sqrt")&&So===.5)return m3(s,"Sqrt",[c[0]],m,A);if(!ae.includes("Sqrt")&&So===-.5)return m3(s,"Divide",[s.One,s._fn("Sqrt",[c[0]])],m,A);if(k7(So)){let Hc=Yx(So),mf=Qx(So);if(Hc===1){if(!ae.includes("Sqrt")&&mf===2)return m3(s,"Sqrt",[c[0]],m,A);if(!ae.includes("Root"))return m3(s,"Root",[c[0],s.number(So[1])],m,A)}if(Hc===-1){if(!ae.includes("Sqrt")&&mf===2)return m3(s,"Divide",[s.One,s._fn("Sqrt",[c[0]])],m,A);if(!ae.includes("Root"))return m3(s,"Divide",[s.One,s._fn("Root",[c[0],s.number(So[1])])],m,A)}}}}if(o==="Add"&&c.length===2&&!ae.includes("Subtract")){if(c[1]?.numericValue!==null){let qe=R6(c[1]);if(qe!==null&&qe<0)return m3(s,"Subtract",[c[0],s.number(-qe)],m,A)}if(c[1]?.operator==="Negate")return m3(s,"Subtract",[c[0],c[1].op1],m,A)}if(o==="Tuple"){if(c.length===1&&!ae.includes("Single"))return m3(s,"Single",c,m,A);if(c.length===2&&!ae.includes("Pair"))return m3(s,"Pair",c,m,A);if(c.length===3&&!ae.includes("Triple"))return m3(s,"Triple",c,m,A)}if(o==="Function"&&c.length>0&&c[0].operator==="Block"){let qe=c[0];if(qe.nops===1){let So=c.slice(1);return So.every(Hc=>/_\d?/.test(Hc.symbol))?qe.op1.ops?.every((Hc,mf)=>Hc.symbol===So[mf]?.symbol)?m3(s,"Function",[s.symbol(qe.op1.operator,{canonical:!1})],m,A):m3(s,"Function",[qe.op1],m,A):m3(s,"Function",[qe.op1,...c.slice(1)],m,A)}}return m3(s,o,c,m,A)}function m3(s,o,c,m,A){let ae=m.exclude;if(o==="Negate"&&c.length===1){let Hc=c[0]?.numericValue;if(Hc!==null){if(typeof Hc=="number")return $v(s,-Hc,m);if(Hc instanceof e4||Hc instanceof Bs)return $v(s,Hc.neg(),m);if(k7(Hc))return $v(s,a9(Hc),m)}}if(typeof o=="string"&&ae.includes(o)){if(o==="Rational"&&c.length===2)return m3(s,"Divide",c,m,A);if(o==="Complex"&&c.length===2)return m3(s,"Add",[c[0],s._fn("Multiply",[c[1]??s.symbol("Undefined"),s.I])],m,A);if(o==="Sqrt"&&c.length===1)return m3(s,"Power",[c[0],ae.includes("Half")?s.number([1,2]):s.Half],m,A);if(o==="Root"&&c.length===2&&c[1]?.numericValue!==null){let Hc=R6(c[1]);if(Hc===2)return m3(s,"Sqrt",[c[0]],m);if(Hc!==null)return Hc<0?m3(s,"Divide",[s.One,s._fn("Power",[c[0]??s.symbol("Undefined"),s.number([1,-Hc])])],m,A):m3(s,"Power",[c[0],s.number([1,-Hc])],m,A)}if(o==="Square"&&c.length===1)return m3(s,"Power",[c[0],s.number(2)],m,A);if(o==="Exp"&&c.length===1)return m3(s,"Power",[s.E,c[0]],m,A);if(o==="Pair"||o=="Single"||o==="Triple")return m3(s,"Tuple",c,m,A);if(o==="Subtract"&&c.length===2)return m3(s,"Add",[c[0],s._fn("Negate",[c[1]??s.symbol("Undefined")])],m,A);if(o==="Subtract"&&c.length===1)return m3(s,"Negate",c,m,A)}let qe=[o,...c.map(Hc=>Hc?Pw(s,Hc,m):"Undefined")],So={...A??{}};return m.metadata.includes("latex")?So.latex=So.latex??s.box({fn:qe}).latex:So.latex="",m.metadata.includes("wikidata")||(So.wikidata=""),!So.latex&&!So.wikidata&&m.shorthands.includes("function")?qe:So.latex&&So.wikidata?{fn:qe,latex:So.latex,wikidata:So.wikidata}:So.latex?{fn:qe,latex:So.latex}:So.wikidata?{fn:qe,wikidata:So.wikidata}:{fn:qe}}function Rw(s,o){return s=s,o.shorthands.includes("string")?Z6(s)||g5(s)?`'${s}'`:s:{str:s}}function ry(s,o,c,m){if(o==="Half"&&c.exclude.includes("Half"))return $v(s,[1,2],c,m);if(m={...m},c.metadata.includes("latex")?(m.latex=m.latex??s.box({sym:o}).latex,m.latex!==void 0&&(m.latex=m.latex)):m.latex=void 0,c.metadata.includes("wikidata")){if(m.wikidata===void 0){let A=s.lookupDefinition(o);if(A){let ae=E6(A)?A.operator.wikidata:A.value.wikidata;ae!==void 0&&(m.wikidata=ae)}}}else m.wikidata=void 0;return o=o,m.latex===void 0&&m.wikidata===void 0&&c.shorthands.includes("symbol")?g5(o)?o:`\`${o}\``:m.latex!==void 0&&m.wikidata!==void 0?{sym:o,latex:m.latex,wikidata:m.wikidata}:m.latex!==void 0?{sym:o,latex:m.latex}:m.wikidata!==void 0?{sym:o,wikidata:m.wikidata}:{sym:o}}function Wb(s,o){if(!o.repeatingDecimal)return s;let[c,m,A,ae]=s.match(/^(.*)\.([0-9]+)([e|E][-+]?[0-9]+)?$/)??[];if(!A)return s.toLowerCase();let qe=A[A.length-1];A=A.slice(0,-1);let So=16,Hc="";for(let mf=0;mf<A.length-So;mf++){Hc=A.substring(0,mf);for(let p1=0;p1<=So;p1++){let M1=A.substring(mf,mf+p1+1),R1=Math.floor((A.length-Hc.length)/M1.length);if(R1<3)break;if((Hc+M1.repeat(R1+1)).startsWith(A))return M1==="0"?qe==="0"?m+"."+Hc+(ae??""):s:m+"."+Hc+"("+M1+")"+(ae??"")}}for(A+=qe;A.endsWith("0");)A=A.slice(0,-1);return typeof o.fractionalDigits=="number"&&(A=A.slice(0,o.fractionalDigits)),ae?`${m}.${A}${ae.toLowerCase()}`:`${m}.${A}`}function $v(s,o,c,m){m={...m},c.metadata.includes("latex")||(m.latex=void 0);let A=m.latex===void 0&&m.wikidata===void 0&&!c.metadata.includes("latex")&&c.shorthands.includes("number"),ae=c.exclude;if(o instanceof D6){if(o.isNaN)return ry(s,"NaN",c,m);if(o.isPositiveInfinity)return ry(s,"PositiveInfinity",c,m);if(o.isNegativeInfinity)return ry(s,"NegativeInfinity",c,m);if(o.isComplexInfinity)return ry(s,"ComplexInfinity",c,m);if(A){if(o.isZero)return 0;if(o.isOne)return 1;if(o.isNegativeOne)return-1}if(o instanceof b5){o.im;let Hc=mf=>c8(mf)?$v(s,o.rational[0],c):["Rational",$v(s,o.rational[0],c),$v(s,o.rational[1],c)];return o.radical===1?Hc(o.rational):M5(o.rational)?["Sqrt",o.radical]:j9(o.rational)?["Negate",["Sqrt",o.radical]]:o.rational[0]==1?["Divide",["Sqrt",o.radical],$v(s,o.rational[1],c)]:o.rational[0]==-1?["Negate",["Divide",["Sqrt",o.radical],$v(s,o.rational[1],c)]]:["Multiply",Hc(o.rational),["Sqrt",o.radical]]}if(o.im===0){let Hc=o.bignumRe??o.re;return $v(s,Hc,c,m)}return Number.isFinite(o.im)?m3(s,"Complex",[s.number(o.bignumRe??o.re),s.number(o.im)],c,{...m,wikidata:"Q11567"}):ry(s,"ComplexInfinity",c,m)}let qe="";if(o instanceof e4){let Hc;if(o.isNaN())Hc="NaN";else if(!o.isFinite())Hc=o.isPositive()?"PositiveInfinity":"NegativeInfinity";else{if(A&&qv(o))return o.toNumber();if(o.isInteger()&&o.e<o.precision()+4)qe=o.toFixed(0);else{let mf=c.fractionalDigits,p1;if(mf==="max"?p1=o.toString():mf==="auto"?p1=o.toPrecision(s.precision):p1=o.toDecimalPlaces(mf).toString(),qe=Wb(p1,c),A){let M1=o.toNumber();if(M1.toString()===qe)return M1}}}return c.metadata.includes("latex")&&(m.latex=m.latex??s.box(Hc??{num:qe}).latex),Hc?m.latex!==void 0?{sym:Hc,latex:m.latex}:A?Hc:{sym:Hc}:m.latex!==void 0?{num:qe,latex:m.latex}:A?qe:{num:qe}}if(o instanceof Bs)return o.isInfinite()?ry(s,"ComplexInfinity",c,m):o.isNaN()?(qe="NaN",c.metadata.includes("latex")&&(m.latex=m.latex??s.box({num:qe}).latex),m.latex!==void 0?{num:qe,latex:m.latex}:{num:qe}):m3(s,"Complex",[s.number(o.re),s.number(o.im)],c,{...m,wikidata:"Q11567"});if(k7(o)){let Hc=!ae.includes("Rational");return A&&c.shorthands.includes("function")&&f6(o)?o[0]===1&&o[1]===2&&!ae.includes("Half")?ry(s,"Half",c,m):[Hc?"Rational":"Divide",o[0],o[1]]:m3(s,Hc?"Rational":"Divide",[s.number(o[0]),s.number(o[1])],c,{...m})}if(typeof o=="bigint")if(o>=Number.MIN_SAFE_INTEGER&&o<=Number.MAX_SAFE_INTEGER)o=Number(o);else return c.metadata.includes("latex")&&(m.latex=m.latex??s.box({num:o.toString()}).latex),m.latex!==void 0?{num:o.toString(),latex:m.latex}:A?sv(o,c.fractionalDigits):{num:k5(o,c.fractionalDigits)};let So;return Number.isNaN(o)?So="NaN":Number.isFinite(o)?qe=Wb(o.toString(),c):So=o>0?"PositiveInfinity":"NegativeInfinity",c.metadata.includes("latex")&&(m.latex=m.latex??s.box({num:qe}).latex),So?m.latex!==void 0?{sym:So,latex:m.latex}:A?So:{sym:So}:m.latex!==void 0?{num:qe,latex:m.latex}:A&&qe===o.toString()?o:{num:qe}}function Pw(s,o,c){let m=o.wikidata;return o.numericValue!==null?$v(s,o.numericValue,c,{latex:o.verbatimLatex}):o.rank>0?o.json:o.string!==null?Rw(o.string,c):o.symbol!==null?ry(s,o.symbol,c,{latex:o.verbatimLatex,wikidata:m}):o.ops?o.isValid&&(o.isCanonical||o.isStructural)&&c.prettify?kw(s,o.operator,o.structural.ops,c,{latex:o.verbatimLatex,wikidata:m}):m3(s,o.operator,o.structural.ops,c,{latex:o.verbatimLatex,wikidata:m}):o.json}var J6=class{engine;verbatimLatex;constructor(s,o){this.engine=s,o?.latex!==void 0&&(this.verbatimLatex=o.latex)}valueOf(){try{return this.symbol==="True"?!0:this.symbol==="False"?!1:this.symbol==="NaN"?NaN:this.symbol==="PositiveInfinity"?1/0:this.symbol==="NegativeInfinity"?-1/0:this.symbol==="ComplexInfinity"?"~oo":this.isInfinity?this.isPositive?1/0:this.isNegative?-1/0:"~oo":typeof this.string=="string"?this.string:typeof this.symbol=="string"?this.value?.valueOf()??this.symbol:B3(this)}catch(s){if(s instanceof W5){let o=s.message??"<canceled>";return s.cause?`${o}: ${s.cause}`:`${o}`}return s.message?s.message:"<error>"}}[Symbol.toPrimitive](s){if(s==="number"){let o=this.valueOf();return typeof o=="number"?o:null}return this.toString()}toString(){try{if(this.isLazyCollection){let s=this.evaluate({materialization:!0});if(!s.isLazyCollection)return B3(s)}return B3(this)}catch(s){if(s instanceof W5){let o=s.message??"<canceled>";return s.cause?`${o}: ${s.cause}`:`${o}`}return s.message?s.message:"<error>"}}toLatex(s){if(this.isLazyCollection){let m=this.evaluate({materialization:s?.materialization??!0});if(!m.isLazyCollection)return m.toLatex(s)}let o=this.toMathJson({prettify:s?.prettify??!0}),c={imaginaryUnit:"\\imaginaryI",positiveInfinity:"\\infty",negativeInfinity:"-\\infty",notANumber:"\\operatorname{NaN}",decimalSeparator:this.engine.decimalSeparator,digitGroupSeparator:"\\,",exponentProduct:"\\cdot",beginExponentMarker:"10^{",endExponentMarker:"}",digitGroup:3,truncationMarker:"\\ldots",repeatingDecimal:"vinculum",fractionalDigits:"max",notation:"auto",avoidExponentsInRange:[-7,20],prettify:!0,materialization:!1,invisibleMultiply:"",invisiblePlus:"",multiply:"\\times",missingSymbol:"\\blacksquare",applyFunctionStyle:cy,groupStyle:v7,rootStyle:$x,fractionStyle:f_,logicStyle:d_,powerStyle:F5,numericSetStyle:k6};return s?.fractionalDigits==="auto"?c.fractionalDigits=-this.engine.precision:c.fractionalDigits=s?.fractionalDigits??"max",typeof c.fractionalDigits=="number"&&c.fractionalDigits>this.engine.precision&&(c.fractionalDigits=this.engine.precision),c={...c,...s??{},fractionalDigits:c.fractionalDigits},!c.prettify&&this.verbatimLatex?this.verbatimLatex:Tw(o,this.engine._indexedLatexDictionary,c)}get latex(){return this.toLatex()}toJSON(){return this.json}toMathJson(s){let o={exclude:[],shorthands:["function","symbol","string","number"],metadata:[],fractionalDigits:"max",repeatingDecimal:!0,prettify:!0};s&&((typeof s.shorthands=="string"&&s.shorthands==="all"||s.shorthands?.includes("all"))&&(o.shorthands=["function","symbol","string","number"]),Array.isArray(s.shorthands)&&(o.shorthands=s.shorthands),(typeof s.metadata=="string"&&s.metadata==="all"||s.metadata?.includes("all"))&&(o.metadata=["latex","wikidata"]),s.fractionalDigits==="auto"&&(o.fractionalDigits=-this.engine.precision),typeof s.fractionalDigits=="number"&&(o.fractionalDigits=s.fractionalDigits));let c={...o,...s,fractionalDigits:o.fractionalDigits,shorthands:o.shorthands,metadata:o.metadata};return Pw(this.engine,this,c)}print(){let s=console.info;s?.(this.toString())}get isStructural(){return!0}get canonical(){return this}get structural(){return this}get isValid(){return!0}get isPure(){return!1}get isConstant(){return!0}get isNumberLiteral(){return!1}get numericValue(){return null}toNumericValue(){return[this.engine._numericValue(1),this]}get isEven(){}get isOdd(){}get re(){return NaN}get im(){return NaN}get bignumRe(){}get bignumIm(){}get sgn(){}get isPositive(){}get isNonNegative(){}get isNegative(){}get isNonPositive(){}neg(){return this.engine.NaN}inv(){return this.engine.NaN}abs(){return this.engine.NaN}add(s){return this.engine.NaN}sub(s){return this.add(s.neg())}mul(s){return this.engine.NaN}div(s){return this.engine.NaN}pow(s){return this.engine.NaN}root(s){return this.engine.NaN}sqrt(){return this.engine.NaN}ln(s){return this.engine.NaN}get numerator(){return this}get denominator(){return this.engine.One}get numeratorDenominator(){return[this,this.engine.One]}is(s){return typeof s=="number"||typeof s=="bigint"||s==null?!1:typeof s=="boolean"?s===!0?this.value?.symbol==="True":s===!1?this.value?.symbol==="False":!1:typeof s=="string"?this.value?.string===s:o8(this,this.engine.box(s))}isSame(s){return o8(this,s)}isEqual(s){return I_(this,s)}isLess(s){let o=l8(this,s);if(o!==void 0)return o==="<"}isLessEqual(s){let o=l8(this,s);if(o!==void 0)return o==="<="||o==="<"||o==="="}isGreater(s){let o=l8(this,s);if(o!==void 0)return o===">"}isGreaterEqual(s){let o=l8(this,s);if(o!==void 0)return o===">="||o===">"||o==="="}get symbol(){return null}get tensor(){return null}get string(){return null}getSubexpressions(s){return sx(this,s)}get subexpressions(){return this.getSubexpressions("")}get symbols(){let s=new Set;return ox(this,s),Array.from(s).sort()}get unknowns(){let s=new Set;return F7(this,s),Array.from(s).sort()}get errors(){return this.getSubexpressions("Error")}get isFunctionExpression(){return!1}get ops(){return null}get isScoped(){return!1}get localScope(){}get nops(){return 0}get op1(){return this.engine.Nothing}get op2(){return this.engine.Nothing}get op3(){return this.engine.Nothing}get isNaN(){}get isInfinity(){}get isFinite(){}get shape(){return[]}get rank(){return 0}subs(s,o){return o?.canonical===!0?this.canonical:this}map(s,o){if(!this.ops)return s(this);let c=o?.canonical??this.isCanonical,m=o?.recursive??!0,A=this.ops.map(ae=>m?ae.map(s,o):s(ae));return s(this.engine.function(this.operator,A,{canonical:c}))}solve(s){return null}replace(s){return null}has(s){return!1}get description(){if(this.baseDefinition&&this.baseDefinition.description)return typeof this.baseDefinition.description=="string"?[this.baseDefinition.description]:this.baseDefinition.description}get url(){return this.baseDefinition?.url??void 0}get wikidata(){return this.baseDefinition?.wikidata??void 0}get complexity(){}get baseDefinition(){}get valueDefinition(){}get operatorDefinition(){}infer(s,o){return!1}bind(){}reset(){}get value(){}set value(s){throw new Error(`Can't change the value of \\(${this.toString()}\\)`)}get type(){return I4.unknown}set type(s){throw new Error(`Can't change the type of \\(${this.toString()}\\)`)}get isNumber(){}get isInteger(){}get isRational(){}get isReal(){}simplify(s){return this}expand(){return Av(this)??this}evaluate(s){return this.simplify()}evaluateAsync(s){return Promise.resolve(this.evaluate())}N(){return this.evaluate({numericApproximation:!0})}compile(s){try{if(s?.to&&s.to!=="javascript")throw new Error(`Unexpected compilation target "${s.to}"`);return s??={},c5(this,s.functions,s.vars,s.imports,s.preamble)}catch(o){if(s?.fallback??!0)return Xx(this);throw o}}get isCollection(){return!1}get isIndexedCollection(){return!1}get isLazyCollection(){return!1}xcontains(s){}subsetOf(s,o){}get xsize(){}get isEmptyCollection(){if(!this.isCollection)return;let s=this.xsize;if(s!==void 0)return s===0}get isFiniteCollection(){if(!this.isCollection)return;let s=this.xsize;if(s!==void 0)return Number.isFinite(s)}each(){return function*(){}()}at(s){}get(s){}indexWhere(s){}};function sx(s,o){let c=!o||s.operator===o?[s]:[];if(s.ops)for(let m of s.ops)c.push(...sx(m,o));return c}function ox(s,o){if(s.symbol){o.add(s.symbol);return}if(s.ops)for(let c of s.ops)ox(c,o)}function F7(s,o){if(s.symbol){let c=s.symbol;if(c==="Unknown"||c==="Undefined"||c==="Nothing"||s.valueDefinition?.isConstant||s.operatorDefinition)return;s.engine._getSymbolValue(c)===void 0&&o.add(c);return}if(s.ops)for(let c of s.ops)F7(c,o)}var Ry=class{name;wikidata;description;url;_engine;_defValue;_value;_type;inferredType;_isConstant=!1;holdUntil="evaluate";eq;neq;cmp;collection;constructor(s,o,c){if(this._engine=s,this.name=o,c.wikidata&&(this.wikidata=c.wikidata),c.description&&(this.description=c.description),c.url&&(this.url=c.url),c.holdUntil&&(this.holdUntil=c.holdUntil),c.isConstant&&(this._isConstant=c.isConstant,this._defValue=c.value),c.type){let m=c.type instanceof I4?c.type:R4(c.type);if(!ev(m))throw new Error([`Symbol "${this.name}"`,`The type "${c.type}" is invalid `].join(`
|   `));this._type=new I4(m,s._typeResolver),this.inferredType=c.inferred??!1,s.listenToConfigurationChange(this)}if(this._value=lx(this._engine,c.value),this._value){if(!this._type||this._type.isUnknown)this.isConstant?(this._type=this._value.type,this.inferredType=!1):(this._type=Iw(s,this._value),this.inferredType=!0);else if(!this._value.type.matches(this._type))throw new Error([`Symbol "${this.name}"`,`The value "${this._value.toString()}" of type "${this._value.type}" is not compatible with the type "${this._type}"`].join(`
|   `))}if(c.eq&&(this.eq=c.eq),c.neq&&(this.neq=c.neq),c.cmp&&(this.cmp=c.cmp),c.collection&&(this.collection=R_(c.collection)),this.holdUntil==="never"&&!this.isConstant)throw new Error([`Symbol "${this.name}"`,'The "holdUntil" property cannot be "never" for a non-constant symbol'].join(`
|   `))}toJSON(){let s={name:this.name,isConstant:this._isConstant};return this.wikidata&&(s.wikidata=this.wikidata),this.description&&(s.description=this.description),this.url&&(s.url=this.url),this._type&&(s.type=this._type.toString()),s.inferredType=this.inferredType,s.holdUntil=this.holdUntil,this.collection&&(s.collection=this.collection),s}get isConstant(){return this._isConstant}get value(){return this._value===null&&(this._value=lx(this._engine,this._defValue)),this._value}get type(){return this._type??this._value?.type??I4.unknown}set type(s){if(this._isConstant)throw new Error(`The type of the constant "${this.name}" cannot be changed`);this._type=s instanceof I4?s:new I4(s,this._engine._typeResolver),this._type.isUnknown&&(this._defValue=void 0,this._value=void 0)}onConfigurationChange(){this.isConstant&&(this._value=null)}};function lx(s,o){if(o!==void 0)return j8(o)?s.parse(o)??s.symbol("Undefined"):typeof o=="function"?s.box(o(s)??"Undefined"):o instanceof J6?o:s.box(o)}function Iw(s,o){return o?o.type.matches("integer")?s.type("integer"):o.type.matches("rational")||o.type.matches("real")?s.type("real"):o.type.matches("complex")?s.type("number"):o.type:s.type("unknown")}function Nw(s){return s!=null&&s instanceof J6&&s.type.matches("dictionary")}function V7(s){return s instanceof J6}function e5(s){return s.precision>n6}function B7(s){let o=0;for(let c=0;c<s.length;c++)o=Math.imul(31,o)+s.charCodeAt(c)|0;return Math.abs(o)}function C8(s){return s==null?[]:typeof s=="string"?[s]:V7(s)?C8(s.symbol):typeof s[Symbol.iterator]=="function"?Array.from(s).map(o=>typeof o=="string"?o:o.symbol):[]}function Xb(s){return s.symbol==="Numbers"?"number":s.symbol==="ComplexNumbers"?"complex":s.symbol==="ImaginaryNumbers"?"imaginary":s.symbol==="RealNumbers"?"real":s.symbol==="RationalNumbers"?"rational":s.symbol==="Integers"?"integer":"unknown"}function Dw(s){if(!s)return s;let o=s.engine,c=o.angularUnit;return c==="rad"||(c==="deg"&&(s=s.mul(o.Pi).div(180)),c==="grad"&&(s=s.mul(o.Pi).div(200)),c==="turn"&&(s=s.mul(o.Pi).mul(2))),s}function J3(s){if(!s)return s;let o=Dw(s);if(!o)return;if(o.N().im!==0)return o;let c=o.engine,[m,A]=a7(o);if(m.isZero)return c.number(A);let ae=c._numericValue(m.bignumRe?m.bignumRe.mod(2):m.re%2);return c.number(A.add(c.Pi.mul(ae).N().numericValue))}function M8(s){if(typeof s=="number")return;let o=s.engine;if(s.symbol==="ImaginaryUnit")return o.One;if(s.re===0)return o.number(s.im);if(s.operator==="Negate")return M8(s.op1)?.neg();if(s.operator==="Complex")return s.op1.is(0)&&!isNaN(s.op2.re)?o.number(s.op2.re):void 0;if(s.operator==="Multiply"&&s.nops===2){let[c,m]=s.ops;if(c.symbol==="ImaginaryUnit")return m;if(m.symbol==="ImaginaryUnit")return c;if(m.isNumberLiteral&&m.re===0&&m.im!==0)return c.mul(m.im);if(c.isNumberLiteral&&c.re===0&&c.im!==0)return m.mul(c.im)}if(s.operator==="Divide"){let c=s.op2;return c.is(0)?void 0:M8(s.op1)?.div(c)}}function ux(s){let{engine:o}=s;return s===o.I?!0:s.isNumberLiteral?s.re===0&&s.im===1:s.symbol!==null?s.canonical.isSame(o.I):!1}function a7(s){let o=s.engine;if(s.symbol==="Pi")return[o._numericValue(1),o._numericValue(0)];if(s.operator==="Negate"){let[c,m]=a7(s.ops[0]);return[c.neg(),m.neg()]}if(s.operator==="Add"&&s.nops===2){let[c,m]=a7(s.op1),[A,ae]=a7(s.op2);return[c.add(A),m.add(ae)]}if(s.operator==="Multiply"&&s.nops===2){if(s.op1.isNumberLiteral){let[c,m]=a7(s.op2),A=s.op1.numericValue;return[c.mul(A),m.mul(A)]}if(s.op2.isNumberLiteral){let[c,m]=a7(s.op1),A=s.op2.numericValue;return[c.mul(A),m.mul(A)]}}if(s.operator==="Divide"&&s.op2.isNumberLiteral){let[c,m]=a7(s.op1),A=s.op2.numericValue;return[c.div(A),m.div(A)]}return[o._numericValue(0),o._numericValue(s.N().numericValue??0)]}function cx(s){if(s==null||typeof s!="object"||V7(s))return!1;if(("signature"in s||"complexity"in s)&&"constant"in s)throw new Error("Operator definition cannot have a `constant` field and value definition cannot have a `signature` field.");if(!("evaluate"in s)&&!("signature"in s)&&!("sgn"in s)&&!("complexity"in s)&&!("canonical"in s))return!1;if("type"in s&&s.type!==void 0&&typeof s.type!="function")throw new Error("The `type` field of an operator definition should be a function");if("sgn"in s&&s.sgn!==void 0&&typeof s.sgn!="function")throw new Error("The `sgn` field of an operator definition should be a function");return!0}function hx(s){if(s==null||typeof s!="object"||V7(s))return!1;if("value"in s||"constant"in s||"inferred"in s){if("type"in s&&typeof s.type=="function")return!1;if("signature"in s)throw new Error("Value definition cannot have a `signature` field. Use a `type` field instead.");if("sgn"in s)throw new Error("Value definition cannot have a `sgn` field. Use a `flags.sgn` field instead.");return!0}if("type"in s&&s.type!==void 0&&typeof s.type!="function")return!0;if("description"in s)throw new Error("Definitions should have a `type` or `value` field.");return!1}function j6(s){return s!==void 0&&"value"in s}function E6(s){return s!==void 0&&"operator"in s}function Py(s,o,c,m){m instanceof Ry?(delete c.operator,c.value=m.value):hx(m)?(delete c.operator,c.value=new Ry(s,o,m)):m instanceof W9?(delete c.value,c.operator=m):cx(m)&&(delete c.value,c.operator=new W9(s,o,m))}function zv(s,o,c){if(o=$6(o),!s.strict||o.length===c)return o;let m=[...o.slice(0,c)],A=Math.min(c,o.length);for(;A<c;)m.push(s.error("missing")),A+=1;for(;A<o.length;)m.push(s.error("unexpected-argument",o[A].toString())),A+=1;return m}function B5(s,o,c){let m=typeof c=="number"?c:c?.count,A=typeof c=="number"?void 0:c?.flatten;if(o=$6(o,A),!s.strict){let So="real";for(let Hc of o)if(X2("complex",Hc.type.type)){So="number";break}for(let Hc of o)o5(Hc)||Hc.infer(So);return o}let ae=!0;m??=o.length;let qe=[];for(let So=0;So<=Math.max(m-1,o.length-1);So++){let Hc=o[So];if(So>m-1)ae=!1,qe.push(s.error("unexpected-argument",Hc.toString()));else if(Hc===void 0)ae=!1,qe.push(s.error("missing"));else if(!Hc.isValid)ae=!1,qe.push(Hc);else if(Hc.isNumber)qe.push(Hc);else if(Hc.symbol&&!s.lookupDefinition(Hc.symbol))qe.push(Hc);else if(Hc.type.isUnknown)qe.push(Hc);else if(o5(Hc)){for(let mf of Hc.each())if(!mf.isNumber){ae=!1;break}ae?qe.push(Hc):qe.push(s.typeError("number",Hc.type,Hc))}else Hc.valueDefinition?.inferredType&&X2("number",Hc.type.type)||Hc.operatorDefinition?.inferredSignature&&X2("number",Hc.type.type)||Hc.operator==="Hold"||Hc.valueDefinition?.value?.operator==="Hold"?qe.push(Hc):(ae=!1,qe.push(s.typeError("number",Hc.type,Hc)))}if(ae){let So="real";for(let Hc of qe)if(X2("complex",Hc.type.type)){So="number";break}for(let Hc of qe)if(o5(Hc))for(let mf of Hc.each())mf.infer(So);else Hc.infer(So)}return qe}function t5(s,o,c){return o==null?s.error("missing"):c===void 0?s.error("unexpected-argument",o.toString()):(o=o.canonical,!o.isValid||o.type.matches(c)?o:s.typeError(c,o.type,o))}function Iy(s,o,c){if(o.length===c.length&&o.every((A,ae)=>A.type.matches(c[ae])))return o;let m=[];for(let A=0;A<=c.length-1;A++)m.push(t5(s,o[A],c[A]));for(let A=c.length;A<=o.length-1;A++)m.push(s.error("unexpected-argument",o[A].toString()));return m}function hv(s,o,c,m,A){if(!s.strict||typeof c=="string"||c.kind!=="signature")return null;let ae=[],qe=!0,So=c.args?.map(R1=>R1.type)??[],Hc=c.optArgs?.map(R1=>R1.type)??[],mf=c.variadicArg?.type,p1=c.variadicMin??0,M1=0;for(let R1 of So){let G1=o[M1++];if(!G1){ae.push(s.error("missing")),qe=!1;continue}if(m){ae.push(G1);continue}if(!G1.isValid){ae.push(G1),qe=!1;continue}if(G1.type.isUnknown){ae.push(G1);continue}if(A&&o5(G1)){ae.push(G1);continue}if(G1.valueDefinition?.inferredType&&G1.type.matches(R1)){ae.push(G1);continue}if(G1.operatorDefinition?.inferredSignature&&G1.type.matches(R1)){ae.push(G1);continue}if(!G1.type.matches(R1)){ae.push(s.typeError(R1,G1.type,G1)),qe=!1;continue}ae.push(G1)}for(let R1 of Hc){let G1=o[M1];if(!G1)break;if(m){ae.push(G1),M1+=1;continue}if(!G1.isValid){ae.push(G1),qe=!1,M1+=1;continue}if(G1.type.isUnknown){ae.push(G1),M1+=1;continue}if(A&&o5(G1)){ae.push(G1),M1+=1;continue}if(G1.valueDefinition?.inferredType&&G1.type.matches(R1)){ae.push(G1),M1+=1;continue}if(!G1.type.matches(R1)){ae.push(s.typeError(R1,G1.type,G1)),qe=!1,M1+=1;continue}ae.push(G1),M1+=1}if(mf){let R1=0;for(let G1 of o.slice(M1)){if(M1+=1,R1+=1,m){ae.push(G1);continue}if(!G1.isValid){ae.push(G1),qe=!1;continue}if(G1.type.isUnknown){ae.push(G1);continue}if(A&&o5(G1)){ae.push(G1);continue}if(G1.valueDefinition?.inferredType&&G1.type.matches(mf)){ae.push(G1);continue}if(!G1.type.matches(mf)){ae.push(s.typeError(mf,G1.type,G1)),qe=!1;continue}ae.push(G1)}R1<p1&&(ae.push(s.error("missing")),qe=!1)}if(M1<o.length)for(let R1 of o.slice(M1))ae.push(s.error("unexpected-argument",R1.toString())),qe=!1;if(!qe)return ae;M1=0;for(let R1 of So)m||(!A||!o5(o[M1]))&&o[M1].infer(R1),M1+=1;for(let R1 of Hc){if(!o[M1])break;(!A||!o5(o[M1]))&&o[M1]?.infer(R1),M1+=1}if(mf)for(let R1 of o.slice(M1))m||(!A||!o5(R1))&&R1.infer(mf),M1+=1;return null}function k8(s){let o={},c=Lw(s.engine),m=yS(s.engine);if(s.symbol&&!o[s.symbol]&&!s.symbol.startsWith("_")){if(!c.includes(s.symbol)){let A=S5(s.symbol,c);A&&(o[s.symbol]=A)}}else if(s.ops&&!o[s.operator]&&!s.operator.startsWith("_")){let A=s.operator;if(!m.includes(A)){let ae=S5(A,m);ae&&(o[A]=ae)}for(let ae of s.ops)o={...o,...k8(ae)}}return o}function yS(s){let o=[],c=s.context.lexicalScope;for(;c;){for(let m of c.bindings.keys()){let A=c.bindings.get(m);E6(A)&&o.push(m)}c=c.parent}return o}function Lw(s){let o=[],c=s.context.lexicalScope;for(;c;){for(let m of c.bindings.keys()){let A=c.bindings.get(m);j6(A)&&o.push(m)}c=c.parent}return o}function Uv(s){let o=k8(s);if(Object.keys(o).length===0)return"";if(Object.keys(o).length===1){let[m,A]=Object.entries(o)[0];return`Unknown symbol "${m}". Did you mean "${A}"?`}let c=[];for(let[m,A]of Object.entries(o))c.push(`- "${m}" -> "${A}"?`);return`Unknown symbols found:
${c.join(`
`)}`}function Zb(s){if(s!==void 0)return isNaN(s)?"unsigned":s>0?"positive":s<0?"negative":"zero"}function Yb(s){return s==="positive"?"negative":s==="non-negative"?"non-positive":s==="negative"?"positive":s==="non-positive"?"non-negative":s}function R8(s){if(s.isGreater(1))return"positive";if(s.isGreaterEqual(1))return"non-negative";if(s.isLessEqual(1)&&s.isGreaterEqual(0))return"non-positive";if(s.isLess(1)&&s.isGreaterEqual(0))return"negative";if(s.is(1))return"zero";if(s.isNegative||s.isReal===!1)return"unsigned"}var fx=[{Abs:{wikidata:"Q3317982",broadcastable:!0,idempotent:!0,complexity:1200,signature:"(number) -> number",type:([s])=>s.type,sgn:([s])=>s.is(0)?"zero":s.isNumberLiteral?"positive":"non-negative",evaluate:([s])=>Ow(s)},Add:{wikidata:"Q32043",associative:!0,commutative:!0,commutativeOrder:xv,broadcastable:!0,idempotent:!0,complexity:1300,lazy:!0,signature:"(number+) -> number",type:p9,sgn:s=>{if(s.some(o=>o.isNaN))return"unsigned";if(s.every(o=>o.is(0)))return"zero";if(s.every(o=>o.isNonNegative))return s.some(o=>o.isPositive)?"positive":"non-negative";if(s.every(o=>o.isNonPositive))return s.some(o=>o.isNegative)?"negative":"non-positive"},evaluate:(s,{numericApproximation:o})=>o?ax(...s):q3(...s.map(c=>c.evaluate()))},Ceil:{description:"Rounds a number up to the next largest integer",complexity:1250,broadcastable:!0,signature:"(real) -> integer",sgn:([s])=>{if(s.isLessEqual(-1))return"negative";if(s.isPositive)return"positive";if(s.isNonNegative)return"non-negative";if(s.isNonPositive&&s.isGreater(-1))return"zero";if(s.isNonPositive)return"non-positive";if(s.isReal==!1&&s.isNumberLiteral)return s.im>0||s.im<=-1?"unsigned":Zb(s.re)},evaluate:([s])=>S6(s,Math.ceil,o=>o.ceil(),o=>o.ceil(0))},Chop:{associative:!0,broadcastable:!0,idempotent:!0,complexity:1200,signature:"(number) -> number",type:([s])=>s.type,evaluate:s=>{let o=s[0],c=o.engine;return S6(o,m=>c.chop(m),m=>c.chop(m),m=>c.complex(c.chop(m.re),c.chop(m.im)))}},Divide:{wikidata:"Q1226939",complexity:2500,broadcastable:!0,signature:"(number, number+) -> number",type:([s,o])=>o.is(1)?s.type:o.isNaN||s.isNaN?"number":o.isFinite===!1||s.isFinite===!1?"non_finite_number":o.isInteger&&s.isInteger?"finite_rational":o.isReal&&s.isReal?"finite_real":"finite_number",sgn:s=>{let[o,c]=[s[0],s[1]];if(c.is(0))return"unsigned";if(c.isPositive)return o.sgn;if(c.isNegative)return Yb(o.sgn);let m=c.sgn;if(o.is(0)&&m==="not-zero"||o.isFinite&&c.isInfinity)return"zero";if(o.sgn==="not-zero"&&m==="not-zero")return"not-zero"},canonical:(s,{engine:o})=>{let c=o;s=B5(c,s);let m=s[0];if(m===void 0)return c.error("missing");if(s.length<2)return m;let A=s.slice(1);for(let ae of A)m=U6(m,ae);return m},evaluate:([s,o])=>s.div(o)},Exp:{wikidata:"Q168698",broadcastable:!0,complexity:3500,signature:"(number) -> number",canonical:(s,{engine:o})=>(s=B5(o,s,1),o.function("Power",[o.E,...s]))},Factorial:{description:"Factorial function: the product of all positive integers less than or equal to n",wikidata:"Q120976",broadcastable:!0,complexity:9e3,signature:"(integer) -> integer",sgn:([s])=>s.isNonNegative?"positive":s.isNegative||s.isReal===!1?"unsigned":void 0,canonical:(s,{engine:o})=>{let c=s[0];return c.isNumberLiteral&&c.isNegative?o._fn("Factorial",[c.neg()]).neg():o._fn("Factorial",[c])},evaluate:([s])=>{let o=s.engine;if(s.im!==0&&s.im!==void 0)return o.number(o.complex(s.re,s.im).add(1));if(s.isFinite){if(s.isNegative)return o.number(I7(1+s.re));try{return o.number(l9(L_(BigInt((s.bignumRe??s.re).toFixed())),o._timeRemaining))}catch{return}}},evaluateAsync:async([s],{signal:o})=>{let c=s.engine;if(s.im!==0&&s.im!==void 0)return c.number(c.complex(s.re,s.im).add(1));if(s.isFinite){if(s.isNegative)return c.number(I7(1+s.re));try{return c.number(await P7(L_(BigInt((s.bignumRe??s.re).toFixed())),(c._deadline??1/0)-Date.now(),o))}catch{return}}}},Factorial2:{description:"Double Factorial Function",complexity:9e3,broadcastable:!0,signature:"(integer) -> integer",sgn:([s])=>s.isNonNegative?"positive":s.isNegative||s.isReal===!1?"unsigned":void 0,evaluate:s=>{let o=s[0],c=d3(o);if(c===null)return;let m=o.engine;return e5(m)?m.number(cv(m,m.bignum(c))):m.number(U1(c))}},Floor:{wikidata:"Q56860783",complexity:1250,broadcastable:!0,signature:"(number) -> integer",sgn:([s])=>{if(s.isNegative)return"negative";if(s.isGreaterEqual(1))return"positive";if(s.isNonNegative&&s.isLess(1))return"zero";if(s.isNonNegative)return"non-negative";if(s.isReal==!1&&s.isNumberLiteral)return s.im<0||s.im>=1?"unsigned":Zb(s.re)},evaluate:([s])=>S6(s,Math.floor,o=>o.floor(),o=>o.floor(0))},Gamma:{wikidata:"Q190573",complexity:8e3,broadcastable:!0,signature:"(number) -> number",sgn:([s])=>s.isPositive?"positive":s.is(0)?"zero":void 0,evaluate:([s],{numericApproximation:o,engine:c})=>o?S6(s,m=>I7(m),m=>Z_(c,m),m=>m):void 0},GammaLn:{complexity:8e3,broadcastable:!0,signature:"(number) -> number",evaluate:(s,{numericApproximation:o,engine:c})=>o?S6(s[0],m=>b8(m),m=>fw(c,m),m=>m):void 0},Ln:{description:"Natural Logarithm",wikidata:"Q204037",complexity:4e3,broadcastable:!0,signature:"(number, base: number?) -> number",sgn:([s])=>R8(s),evaluate:([s],{numericApproximation:o,engine:c})=>o?S6(s,m=>m===0?-1/0:m>=0?Math.log(m):c.complex(m).log(),m=>m.isZero()?-1/0:m.isNeg()?c.complex(m.toNumber()).log():m.ln(),m=>m.isZero()?NaN:m.log()):s.ln()},Log:{description:"Log(z, b = 10) = Logarithm of base b",wikidata:"Q11197",complexity:4100,broadcastable:!0,signature:"(number, base: number?) -> number",sgn:([s,o])=>{if(!o)return R8(s);if(o.is(1)||o.isReal==!1)return"unsigned";if(o.isGreater(1))return R8(s);if(o.isLess(1))return Yb(R8(s))},evaluate:(s,{numericApproximation:o,engine:c})=>{if(!o)return s[0]?.ln(s[1]??10)??void 0;let m=c;return s[1]===void 0?S6(s[0],A=>A===0?-1/0:A>=0?Math.log10(A):m.complex(A).log().div(Math.LN10),A=>A.isZero()?-1/0:A.isNeg()?m.complex(A.toNumber()).log().div(Math.LN10):e4.log10(A),A=>A.isZero()?NaN:A.log().div(Math.LN10)):bv(s[0],s[1],(A,ae)=>Math.log(A)/Math.log(ae),(A,ae)=>A.log(ae),(A,ae)=>A.log().div(typeof ae=="number"?Math.log(ae):ae.log()))}},Lb:{description:"Base-2 Logarithm",wikidata:"Q581168",complexity:4100,broadcastable:!0,signature:"(number) -> number",sgn:([s])=>R8(s),canonical:([s],{engine:o})=>o._fn("Log",[s,o.number(2)])},Lg:{description:"Base-10 Logarithm",wikidata:"Q966582",complexity:4100,broadcastable:!0,signature:"(number) -> number",sgn:([s])=>R8(s),canonical:([s],{engine:o})=>o._fn("Log",[s])},Mod:{description:"Modulo",wikidata:"Q1799665",complexity:2500,broadcastable:!0,signature:"(number, number) -> number",sgn:s=>{let o=s[1];if(!(o===void 0||o.isReal==!1)){if(o.is(0))return"unsigned";if(s[0].isNumberLiteral&&o.isNumberLiteral)return bv(s[0],o,(c,m)=>(c%m+m)%m,(c,m)=>c.modulo(m))?.sgn??void 0}},evaluate:([s,o])=>bv(s,o,(c,m)=>(c%m+m)%m,(c,m)=>c.modulo(m))},Multiply:{wikidata:"Q40276",associative:!0,commutative:!0,idempotent:!0,complexity:2100,broadcastable:!0,lazy:!0,signature:"(number*) -> number",type:s=>s.length===0?"finite_integer":s.length===1?s[0].type:s.some(o=>o.isNaN)?"number":s.some(o=>o.isFinite===!1)?"non_finite_number":s.every(o=>o.isInteger)?"finite_integer":s.every(o=>o.isReal)?"finite_real":s.every(o=>o.isRational)?"finite_rational":"finite_number",sgn:s=>{if(!s.some(o=>o.sgn===void 0||o.isReal===!1)){if(s.some(o=>o.is(0)))return s.every(o=>o.isFinite)?"zero":s.some(o=>o.isFinite===!1)?"unsigned":void 0;if(!(s.some(o=>o.isFinite===!1||o.isFinite===void 0)&&s.some(o=>{o.sgn}))){if(s.every(o=>o.isPositive||o.isNegative)){let o=0;return s.forEach(c=>{c.isNegative&&o++}),o%2===0?"positive":"negative"}if(s.every(o=>o.isNonPositive||o.isNonNegative)){let o=0;return s.forEach(c=>{c.isNonPositive&&o++}),o%2===0?"non-positive":"non-negative"}if(s.every(o=>o.sgn==="not-zero"||o.sgn==="positive"||o.sgn==="negative"))return"not-zero"}}},evaluate:(s,{numericApproximation:o})=>o?vS(...s):Y5(...s.map(c=>c.evaluate()))},Negate:{description:"Additive Inverse",wikidata:"Q715358",complexity:2e3,broadcastable:!0,signature:"(number) -> number",type:([s])=>s.type,sgn:([s])=>Yb(s.sgn),canonical:(s,{engine:o})=>(s=B5(o,s),s.length===0?o.error("missing"):s[0].neg()),evaluate:([s])=>s.neg()},PlusMinus:{description:"Plus or Minus",wikidata:"Q120812",complexity:1200,signature:"(value, value) -> tuple",canonical:(s,{engine:o})=>(s=B5(o,s,2),s.length===0?o.error("missing"):o._fn("PlusMinus",[s[0],s[1].abs()])),type:([s,o])=>R4(`tuple<${s.type}, ${o.type}>`),evaluate:([s,o],{engine:c})=>c.tuple(s.add(o.neg()),s.add(o))},Power:{wikidata:"Q33456",broadcastable:!0,complexity:3500,signature:"(number, number) -> number",type:([s,o])=>s.isNaN||o.isNaN?"number":o.isFinite?s.isInteger&&o.isInteger?"finite_integer":s.isRational&&o.isInteger?"finite_rational":s.isReal&&o.isReal?"finite_real":"finite_number":"non_finite_number",canonical:(s,{engine:o})=>{if(s=B5(o,s,2),s.length!==2)return o._fn("Power",s);let[c,m]=s;return Yv(c,m)},sgn:([s,o])=>{let c=s.sgn,m=o.sgn;if(!(s.isReal===!1||o.isReal===!1||s.isNaN||o.isNaN||c===void 0||m===void 0)){if(s.is(0))return o.isNonPositive?"unsigned":o.isPositive?"zero":void 0;if(s.is(0)&&o.is(0))return"unsigned";if(s.isNonNegative||o.numerator.isOdd&&o.denominator.isOdd)return s.sgn;if(o.numerator.isEven&&o.denominator.isOdd){if(s.isReal){let A=s.sgn;return A==="positive"||A==="not-zero"||A==="negative"?"positive":"non-negative"}return s.type.matches("complex")?"negative":s.is(0)?void 0:"not-zero"}if(o.isRational===!1||o.numerator.isOdd&&o.denominator.isEven&&s.isNonPositive)return"unsigned"}},evaluate:([s,o],{numericApproximation:c})=>R5(s,o,{numericApproximation:c??!1})},Rational:{complexity:2400,signature:"(number, integer?) -> rational",sgn:([s])=>s.sgn,canonical:(s,{engine:o})=>{let c=o;return s=$6(s),s.length===0?c._fn("Rational",[c.error("missing")]):s.length===1?c._fn("Rational",[t5(c,s[0],"real")]):(s=Iy(c,s,["integer","integer"]),s.length!==2||!s[0].isValid||!s[1].isValid?c._fn("Rational",s):s[0].div(s[1]))},evaluate:(s,{numericApproximation:o,engine:c})=>{let m=c;if(s.length===1){let qe=s[0].N();return qe.numericValue===null||qe.im!==0?void 0:m.number(gS(qe.re))}if(o)return bv(s[0],s[1],(qe,So)=>qe/So,(qe,So)=>qe.div(So),(qe,So)=>qe.div(So));let[A,ae]=[R6(s[0]),R6(s[1])];if(A!==null&&ae!==null)return m.number([A,ae])}},Root:{complexity:3200,broadcastable:!0,signature:"(number, number) -> number",type:([s,o])=>s.isNaN||o.isNaN?"number":s.isFinite===!1||o.isFinite===!1?"non_finite_number":o.is(0)?"finite_integer":o.is(1)?s.type:s.isReal&&o.isReal&&s.isPositive===!0?"finite_real":"finite_number",sgn:([s,o])=>{if(s.isReal===!1||o.isReal===!1)return"unsigned";if(s.is(0)){if(o.isNonPositive)return"unsigned";if(o.isPositive)return"zero"}if(s.isPositive===!0)return"positive";if(s.isNonNegative===!0)return"non-negative";if(o.isOdd===!0||o.numerator.isOdd&&o.denominator.isOdd)return s.sgn;if(s.isNegative&&o.isOdd===!1)return"unsigned"},canonical:(s,{engine:o})=>{s=B5(o,s,2);let[c,m]=s;return Yy(c,m)},evaluate:([s,o],{numericApproximation:c})=>G9(s,o,{numericApproximation:c})},Round:{complexity:1250,broadcastable:!0,signature:"(number) -> integer",type:([s])=>s.isNaN?"number":s.isFinite===!1||s.isReal===!1?"non_finite_number":"finite_integer",sgn:([s])=>{if(s.isNaN)return"unsigned";if(s.isNumberLiteral)return s.im>=.5||s.im<=-.5?"unsigned":Zb(Math.round(s.re));if(s.isGreaterEqual(.5))return"positive";if(s.isLessEqual(-.5))return"negative";if(s.isLess(.5)&&s.isGreater(-.5))return"zero";if(s.isNonNegative)return"non-negative";if(s.isNonPositive)return"non-positive"},evaluate:([s])=>S6(s,Math.round,o=>o.round(),o=>o.round(0))},Sign:{complexity:1200,broadcastable:!0,signature:"(number) -> integer",sgn:([s])=>s.sgn,evaluate:([s],{engine:o})=>{if(s.is(0))return o.Zero;if(s.isPositive)return o.One;if(s.isNegative)return o.NegativeOne}},Sqrt:{description:"Square Root",wikidata:"Q134237",complexity:3e3,broadcastable:!0,signature:"(number) -> number",type:([s])=>s.isNaN?"number":s.isFinite===!1?"non_finite_number":s.isReal?s.isNegative?"complex":"finite_real":"finite_number",sgn:([s])=>{if(s.isPositive)return"positive";if(s.isNegative)return"unsigned";if(s.isNonNegative)return"non-negative";if(s.sgn==="not-zero")return"not-zero"},evaluate:([s],{numericApproximation:o,engine:c})=>{if(!o)return s.sqrt();let[m,A]=s.toNumericValue();return A.is(1)?c.number(m.sqrt().N()):c.number(m.sqrt().N()).mul(A)}},Square:{wikidata:"Q3075175",complexity:3100,broadcastable:!0,signature:"(number) -> number",sgn:([s])=>{if(s.is(0))return"zero";if(s.isReal){let o=s.sgn;return o==="not-zero"||o==="positive"||o==="negative"?"positive":"non-negative"}if(s.type.matches("complex"))return"negative";if(s.isReal==!1||s.isNaN)return"unsigned"},canonical:(s,{engine:o})=>{let c=o;return s=$6(s),s.length!==1?c._fn("Square",s):c._fn("Power",[s[0],c.number(2)]).canonical}},Subtract:{wikidata:"Q40754",complexity:1350,broadcastable:!0,signature:"(number+) -> number",canonical:(s,{engine:o})=>{if(s=B5(o,s),s.length===0)return o.error("missing");let c=s[0],m=s.slice(1);return Z5(o,[c,...m.map(A=>A.neg())])}}},{ImaginaryUnit:{type:"imaginary",isConstant:!0,holdUntil:"never",wikidata:"Q193796",value:s=>s.I},i:{type:"imaginary",isConstant:!0,holdUntil:"never",value:s=>s.I},ExponentialE:{type:"finite_real",wikidata:"Q82435",isConstant:!0,holdUntil:"N",value:s=>s.number(e5(s)?s._BIGNUM_ONE.exp():Math.exp(1))},e:{type:"finite_real",isConstant:!0,holdUntil:"never",value:"ExponentialE"},ComplexInfinity:{type:"complex",isConstant:!0,holdUntil:"never",value:s=>s.ComplexInfinity},PositiveInfinity:{type:"non_finite_number",isConstant:!0,holdUntil:"never",value:1/0},NegativeInfinity:{type:"non_finite_number",isConstant:!0,holdUntil:"never",value:-1/0},NaN:{type:"number",isConstant:!0,holdUntil:"never",value:s=>s.NaN},ContinuationPlaceholder:{description:"This symbol indicates that some elements in a collection have been omitted, for example in a long list of numbers, or in an infinite set",type:"unknown",isConstant:!0},MachineEpsilon:{type:"finite_real",holdUntil:"N",isConstant:!0,value:{num:Number.EPSILON.toString()}},Half:{type:"finite_rational",isConstant:!0,holdUntil:"never",value:["Rational",1,2]},GoldenRatio:{type:"finite_real",wikidata:"Q41690",isConstant:!0,holdUntil:"N",value:["Divide",["Add",1,["Sqrt",5]],2]},CatalanConstant:{type:"finite_real",wikidata:"Q855282",isConstant:!0,holdUntil:"N",value:{num:`0.91596559417721901505460351493238411077414937428167
                  21342664981196217630197762547694793565129261151062
                  48574422619196199579035898803325859059431594737481
                  15840699533202877331946051903872747816408786590902
                  47064841521630002287276409423882599577415088163974
                  70252482011560707644883807873370489900864775113225
                  99713434074854075532307685653357680958352602193823
                  23950800720680355761048235733942319149829836189977
                  06903640418086217941101917532743149978233976105512
                  24779530324875371878665828082360570225594194818097
                  53509711315712615804242723636439850017382875977976
                  53068370092980873887495610893659771940968726844441
                  66804621624339864838916280448281506273022742073884
                  31172218272190472255870531908685735423498539498309
                  91911596738846450861515249962423704374517773723517
                  75440708538464401321748392999947572446199754961975
                  87064007474870701490937678873045869979860644874974
                  64387206238513712392736304998503539223928787979063
                  36440323547845358519277777872709060830319943013323
                  16712476158709792455479119092126201854803963934243
                  `}},EulerGamma:{type:"finite_real",wikidata:"Q273023",holdUntil:"N",isConstant:!0,value:{num:`0.57721566490153286060651209008240243104215933593992359880576723488486772677766
          467093694706329174674951463144724980708248096050401448654283622417399764492353
          625350033374293733773767394279259525824709491600873520394816567085323315177661
          152862119950150798479374508570574002992135478614669402960432542151905877553526
          733139925401296742051375413954911168510280798423487758720503843109399736137255
          306088933126760017247953783675927135157722610273492913940798430103417771778088
          154957066107501016191663340152278935867965497252036212879226555953669628176388
          792726801324310104765059637039473949576389065729679296010090151251959509222435
          014093498712282479497471956469763185066761290638110518241974448678363808617494
          551698927923018773910729457815543160050021828440960537724342032854783670151773
          943987003023703395183286900015581939880427074115422278197165230110735658339673`}}},{PreIncrement:{signature:"(number) -> number"},PreDecrement:{signature:"(number) -> number"}},{IsPrime:{description:"`IsPrime(n)` returns `True` if `n` is a prime number",wikidata:"Q49008",complexity:1200,broadcastable:!0,signature:"(number) -> boolean",evaluate:([s],{engine:o})=>{let c=g9(s);if(c!==void 0)return o.symbol(c?"True":"False")}},IsComposite:{description:"`IsComposite(n)` returns `True` if `n` is not a prime number",complexity:1200,broadcastable:!0,signature:"(number) -> boolean",canonical:(s,{engine:o})=>o.box(["Not",["IsPrime",...s]])},IsOdd:{description:"`IsOdd(n)` returns `True` if `n` is an odd number",complexity:1200,broadcastable:!0,signature:"(number) -> boolean",evaluate:(s,{engine:o})=>{let c=!1,m=s.every(A=>{if(A.im!==0)return!1;let ae=R7(A);if(ae!==null)return ae%BigInt(2)!==BigInt(0);let qe=A.re;return Number.isInteger(qe)?qe%2!==0:(c=!0,!1)});if(!c)return o.symbol(m?"True":"False")}},IsEven:{description:"Even Number",complexity:1200,broadcastable:!0,signature:"(number) -> boolean",canonical:(s,{engine:o})=>o.box(["Not",["IsOdd",...s]])}},{GCD:{description:"Greatest Common Divisor",complexity:1200,broadcastable:!1,signature:"(any*) -> integer",sgn:()=>"positive",evaluate:s=>Jb(s,"GCD")},LCM:{description:"Least Common Multiple",complexity:1200,broadcastable:!1,signature:"(any*) -> integer",sgn:()=>"positive",evaluate:s=>Jb(s,"LCM")},Numerator:{description:"Numerator of an expression",complexity:1200,broadcastable:!0,lazy:!0,signature:"(number) -> number | nothing",canonical:(s,{engine:o})=>{if(s.length===0)return o.Nothing;let c=s[0];return c.operator==="Rational"||c.operator==="Divide"?c.op1:o._fn("Numerator",Jv(o,s))},sgn:([s])=>s.sgn,evaluate:(s,{engine:o})=>{let c=o;if(s.length===0)return c.Nothing;let m=s[0];return m.operator==="Rational"||m.operator==="Divide"?m.op1.evaluate():m.numerator}},Denominator:{description:"Denominator of an expression",complexity:1200,broadcastable:!0,lazy:!0,signature:"(number) -> number | nothing",canonical:(s,{engine:o})=>{if(s.length===0)return o.Nothing;let c=s[0];if(c.operator==="Rational"||c.operator==="Divide")return c.op2;let m=Zy(c);return m!==void 0?o.number(m[1]):o._fn("Denominator",Jv(o,s))},sgn:()=>"positive",evaluate:(s,{engine:o})=>{let c=o;if(s.length===0)return c.Nothing;let m=s[0];return m.operator==="Rational"||m.operator==="Divide"?m.op2.evaluate():m.denominator}},NumeratorDenominator:{description:"Sequence of Numerator and Denominator of an expression",complexity:1200,broadcastable:!0,lazy:!0,signature:"(number) -> tuple<number, number> | nothing",canonical:(s,{engine:o})=>{if(s.length===0)return o.Nothing;let c=s[0];if(c.operator==="Rational"||c.operator==="Divide")return o.tuple(...c.ops);let m=Zy(c.evaluate());return m!==void 0?o.tuple(o.number(m[0]),o.number(m[1])):o._fn("NumeratorDenominator",s.map(A=>A.evaluate()))},evaluate:(s,{engine:o})=>{let c=o;if(s.length===0)return c.Nothing;let m=s[0];return m.operator==="Rational"||m.operator==="Divide"?c.tuple(...m.ops):c.tuple(...m.numeratorDenominator)}}},{Max:{description:"Maximum of two or more numbers",complexity:1200,broadcastable:!1,signature:"(value*) -> number | list",sgn:s=>{if(s.some(o=>o.isReal==!1||o.isNaN))return"unsigned";if(!s.some(o=>o.isReal==!1||o.isNaN!==!1)){if(s.some(o=>o.isPositive))return"positive";if(s.every(o=>o.isNonPositive))return s.some(o=>o.is(0))?"zero":"non-positive";if(s.some(o=>o.isNonNegative))return"non-negative";if(s.every(o=>o.isNegative))return"negative";if(s.some(o=>!o.is(0)))return"not-zero"}},evaluate:(s,{engine:o})=>Qb(o,s,"Max")},Min:{description:"Minimum of two or more numbers",complexity:1200,broadcastable:!1,signature:"(value+) -> number | list",sgn:s=>{if(s.some(o=>o.isReal==!1||o.isNaN))return"unsigned";if(!s.some(o=>o.isReal==!1||o.isNaN!==!1)){if(s.some(o=>o.isNegative))return"negative";if(s.every(o=>o.isNonNegative))return s.some(o=>o.is(0))?"zero":"non-negative";if(s.some(o=>o.isNonPositive))return"non-positive";if(s.every(o=>o.isPositive))return"positive"}},evaluate:(s,{engine:o})=>Qb(o,s,"Min")},Supremum:{description:"Like Max, but defined for open sets",complexity:1200,broadcastable:!1,signature:"(value*) -> number | list",evaluate:(s,{engine:o})=>Qb(o,s,"Supremum")},Infimum:{description:"Like Min, but defined for open sets",complexity:1200,broadcastable:!1,signature:"(value*) -> number | list",evaluate:(s,{engine:o})=>Qb(o,s,"Infimum")},Product:{description:"`Product(f, a, b)` computes the product of `f` from `a` to `b`",wikidata:"Q901718",complexity:1e3,broadcastable:!1,scoped:!0,lazy:!0,signature:"((number+) -> number, (tuple<integer>|tuple<integer, integer>)+) -> number",canonical:([s,...o],{scope:c})=>W_("Product",s,o,c),evaluate:(s,o)=>{let c=(A,ae)=>(ae=ae.evaluate(o),ae.isNumberLiteral?A.mul(ae.numericValue):null),m=l9(v8(s[0],s.slice(1),c,o.engine._numericValue(1)),o.engine._timeRemaining);return o.engine.number(m??NaN)},evaluateAsync:async(s,o)=>{let c=(A,ae)=>(ae=ae.evaluate(o),ae.isNumberLiteral?A.mul(ae.numericValue):null),m=await P7(v8(s[0],s.slice(1),c,o.engine._numericValue(1)),o.engine._timeRemaining,o.signal);return o.engine.number(m??NaN)}},Sum:{description:"`Sum(f, [a, b])` computes the sum of `f` from `a` to `b`",wikidata:"Q218005",complexity:1e3,broadcastable:!1,scoped:!0,lazy:!0,signature:"((number) -> number, bounds:tuple+) -> number",canonical:([s,...o],{scope:c})=>W_("Sum",s,o,c),evaluate:([s,...o],{engine:c})=>c.number(l9(v8(s,o,(m,A)=>(A=A.evaluate(),A.isNumberLiteral?m.add(A.numericValue):null),c._numericValue(0)),c._timeRemaining)),evaluateAsync:async(s,{engine:o,signal:c})=>o.number(await P7(v8(s[0],s.slice(1),(m,A)=>(A=A.evaluate(),A.isNumberLiteral?m.add(A.numericValue):null),o._numericValue(0)),o._timeRemaining,c))}}];function Ow(s){let o=s.engine,c=s.numericValue;if(c!==null)return typeof c=="number"?o.number(Math.abs(c)):o.number(c.abs());if(s.isNonNegative)return s;if(s.isNegative)return s.neg()}function dx(s,o){let c=s.engine,m=o==="Max"||o==="Supremum";if(s.operator==="Interval"){let A=m?s.op2:s.op1;return!A.isNumber||A.numericValue===null?[void 0,[s]]:[A,[]]}if(s.operator==="Range")if(m){let A=wv(s),ae=z_(A);return[c.number(Math.max(A[0],ae)),[]]}else return[c.number(wv(s)[0]),[]];if(s.operator==="Linspace")return s.nops===1?s=m?s.op1:c.One:m?s=s.op2:s=s.op1,[s,[]];if(s.isCollection){let A,ae=[];for(let qe of s.each()){let[So,Hc]=dx(qe,o);So&&(A?(m&&So.isGreater(A)||!m&&So.isLess(A))&&(A=So):A=So),ae.push(...Hc)}return[A,ae]}return!s.isNumber||s.numericValue===null?[void 0,[s]]:[s,[]]}function Qb(s,o,c){let m=c==="Max"||c==="Supremum";if(o=$6(o),o.length===0)return m?s.NegativeInfinity:s.PositiveInfinity;let A,ae=[];for(let qe of o){let[So,Hc]=dx(qe,c);So&&(A?(m&&So.isGreater(A)||!m&&So.isLess(A))&&(A=So):A=So),ae.push(...Hc)}return ae.length>0?s.box(A?[c,A,...ae]:[c,...ae]):A??(m?s.NegativeInfinity:s.PositiveInfinity)}function Jb(s,o){let c=s[0].engine,m=o==="LCM"?W3:I3,A=[];if(e5(c)){let ae=null;for(let qe of s)if(ae===null)ae=f8(qe),(ae===null||!ae.isInteger())&&A.push(qe);else{let So=f8(qe);So&&So.isInteger()?ae=m(ae,So):A.push(qe)}return A.length===0?ae===null?c.One:c.number(ae):ae===null?c._fn(o,A):c._fn(o,[c.number(ae),...A])}for(let ae of s)ae.isInteger&&A.push(ae);return A.length===0?c.One:c._fn(o,A)}function g9(s){if(!s.isInteger||s.isNegative||s.numericValue===null)return;let o=d3(s);if(o!==null)return t1(o);let c=R7(s);if(c!==null)return c1(c)}var bS={Sin:["Cos","_"],Cos:["Negate",["Sin","_"]],Tan:["Power",["Sec","_"],2],Sec:["Multiply",["Tan","_"],["Sec","_"]],Csc:["Multiply",["Negate",["Cot","_"]],["Csc","_"]],Cot:["Negate",["Power",["Csc","_"],2]],Arcsin:["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],Arccos:["Negate",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]]],Arctan:["Power",["Add",1,["Power","_",2]],-1],Arcsec:["Multiply",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],["Negate",["Power","_",2]]],Arccsc:["Multiply",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],["Negate",["Power","_",2]]],Arccot:["Negate",["Power",["Add",1,["Power","_",2]],-1]],Sinh:["Cosh","_"],Cosh:["Sinh","_"],Tanh:["Power",["Sech","_"],2],Sech:["Multiply",["Tanh","_"],"Sech"],Csch:["Multiply",["Coth","_"],"Csch"],Coth:["Negate",["Power",["Csch","_"],2]],Arcsinh:["Power",["Add",["Power","_",2],1],["Negate","Half"]],Arccosh:["Power",["Subtract",["Power","_",2],1],["Negate","Half"]],Arctanh:["Power",["Subtract",1,["Power","_",2]],-1],Arcsech:["Negate",["Power",["Multiply","2","Subtract",["Power","_",2]],["Negate","Half"]]],Arccsch:["Negate",["Power",["Multiply","2","Add",["Power","_",2]],["Negate","Half"]]],Arccoth:["Negate",["Power",["Subtract",1,["Power","_",2]],-1]],Ln:["Divide",1,"_"],Log:["Power",["Multiply","_",["Ln","10"]],-1],Sqrt:["Multiply",["Power","_",["Negate","Half"]],"Half"],Abs:["Which",["Equal","_",0],NaN,["Less","_",0],-1,["Greater","_",0],1,"True",["D",["Abs","_"],"_"]],Erf:["Multiply",["Divide","2",["Sqrt","Pi"]],["Exp",["Negate",["Square","_"]]]],Gamma:["Multiply",["Gamma","_"],["Digamma","_"]],Digamma:["Add",["Multiply",["Digamma","_"],["Gamma","_"]],["Multiply",["Power","_",-1],["Gamma","_"]]],Zeta:["Multiply",["Multiply",-1,["Zeta","_"]],["Digamma","_"]],PolyGamma:["Add",["Multiply",["PolyGamma","_"],["Gamma","_"]],["Multiply",["Power","_",-1],["Gamma","_"]]],Beta:["Multiply",["Add",["Multiply",["Beta","_"],["Digamma","_"]],["Multiply",["Power","_",-1],["Beta","_"]]],["Beta","_"]],Erfc:["Multiply",["Negate",["Erfc","_"]],["Exp",["Negate",["Power","_",2]]],["Power","_",-1]],LambertW:["Multiply",["Power","_",-1],["Multiply",["Add","_",["LambertW","_"]],["Add",["LambertW","_"],1]]],AiryAi:["Multiply",["AiryAi","_"],["AiryBi","_"]],AiryBi:["Multiply",["AiryAi","_"],["AiryBi","_"]],BesselJ:["Multiply",["BesselJ","_"],["BesselY","_"]],BesselY:["Multiply",["BesselJ","_"],["BesselY","_"]],BesselI:["Multiply",["BesselI","_"],["BesselK","_"]],BesselK:["Multiply",["BesselI","_"],["BesselK","_"]],FresnelS:["Multiply",["FresnelS","_"],["FresnelC","_"]],FresnelC:["Multiply",["FresnelS","_"],["FresnelC","_"]],Erfi:["Multiply",["Erfi","_"],["Erf","_"]]};function _S(s,o){if(o===0)return s;let c=s.engine,m="_";s.symbol&&s.operatorDefinition&&(s=Wy(c.symbol(s.symbol),[c.symbol("_")])),s.operator==="Function"&&(m=s.ops[1]?.symbol??"_",s=s.ops[0]);let A=s;for(;o-- >0&&A;)A=q5(A,m);return A}function q5(s,o){let c=s.engine;if(s.string)return;if(s.isNumberLiteral)return s.engine.Zero;if(s.symbol===o)return s.engine.One;if(s.symbol)return s.engine.Zero;if(!s.operator)return;if(s.operator==="Negate"){let qe=q5(s.op1,o);return qe?qe.neg():c._fn("D",[s.op1,c.symbol(o)]).neg()}if(s.operator==="Add"){let qe=s.ops.map(So=>q5(So,o));return qe.some(So=>So===void 0)?void 0:q3(...qe).evaluate()}if(s.operator==="Multiply"){let qe=s.ops.map((So,Hc)=>{let mf=s.ops.slice();mf.splice(Hc,1);let p1=Y5(...mf);return(q5(So,o)??c._fn("D",[So,c.symbol(o)])).mul(p1)});return qe.some(So=>So===void 0)?void 0:q3(...qe).evaluate()}if(s.operator==="Power"){let[qe,So]=s.ops;if(qe.symbol===o)return So.mul(qe.pow(So.add(c.NegativeOne))).evaluate();let Hc=qe,mf=So,p1=q5(Hc,o)??c._fn("D",[Hc,c.symbol(o)]),M1=(q5(mf,o)??c._fn("D",[mf,c.symbol(o)])).mul(Hc.ln()),R1=mf.mul(p1).div(Hc);return s.mul(M1.add(R1)).evaluate()}if(s.operator==="Divide"){let[qe,So]=s.ops,Hc=q5(qe,o)??c._fn("D",[qe,c.symbol(o)]),mf=q5(So,o)??c._fn("D",[So,c.symbol(o)]);return Hc.mul(So).sub(mf.mul(qe)).div(So.pow(2)).evaluate()}let m=bS[s.operator];if(!m){if(s.nops>1)return;let qe=c._fn("Derivative",[c.symbol(s.operator),c.One]);if(!qe.isValid)return;let So=s.ops[0],Hc=q5(So,o)??c._fn("D",[So,c.symbol(o)]);return Hc.isValid?c._fn("Apply",[qe,So]).mul(Hc):void 0}if(s.nops>1)return c._fn("D",[s,c.symbol(o)]);let A=s.ops[0],ae=q5(A,o)??c._fn("D",[A,c.symbol(o)]);return Wy(c.box(m),[A]).mul(ae)}var Fw={boolean:s=>s.type.matches("boolean"),string:s=>s.string!==null,number:s=>s.isNumberLiteral,symbol:s=>s.symbol!==null,expression:s=>!0,numeric:s=>{let[o,c]=s.toNumericValue();return c.is(1)},integer:s=>s.isInteger,rational:s=>s.isRational,irrational:s=>s.isRational===!1,real:s=>s.isReal,notreal:s=>!s.isReal,complex:s=>s.type.matches("complex"),imaginary:s=>s.type.matches("imaginary"),positive:s=>s.isPositive,negative:s=>s.isNegative,nonnegative:s=>s.isNonNegative,nonpositive:s=>s.isNonPositive,even:s=>s.isEven,odd:s=>s.isOdd,prime:s=>g9(s)===!0,composite:s=>g9(s)===!1,notzero:s=>s.is(0)===!1,notone:s=>s.is(1)===!1,finite:s=>s.isFinite,infinite:s=>s.isFinite===!1,constant:s=>s.valueDefinition?.isConstant??!1,variable:s=>!(s.valueDefinition?.isConstant??!0),function:s=>s.operatorDefinition!==void 0,relation:s=>Zv(s.operator),equation:s=>s.operator==="Equal",inequality:s=>vv(s.operator),collection:s=>s.isCollection,list:s=>s.operator==="List",set:s=>s.operator==="Set",tuple:s=>s.operator==="Tuple"||s.operator==="Single"||s.operator==="Pair"||s.operator==="Triple",single:s=>s.operator==="Single",pair:s=>s.operator==="Pair",triple:s=>s.operator==="Triple",scalar:s=>s.rank===0,tensor:s=>s.rank>0,vector:s=>s.rank===1,matrix:s=>s.rank===2,unit:s=>s.operator==="Unit",dimension:s=>s.operator==="Dimension",angle:s=>s.operator==="Angle",polynomial:s=>s.unknowns.length===1};function Vw(s,o){for(let c of o)if(Fw[c](s)!==!0)return!1;return!0}function T3(s){let o=/\\[a-zA-Z]+|[{}]|[\d]+|[+\-*/^_=()><,.;]|[a-zA-Z]/g,c=s.match(o);return c?c.filter(m=>!/^[ \f\n\r\t\v\xA0\u2028\u2029]+$/.test(m)):[]}function mx(s){let o=s.peek,c=null;if(o==="\\mathrm")s.nextToken(),c=s.parseStringGroup();else if(/^[a-z]$/.test(o))for(c=s.nextToken();/^[a-z]$/.test(s.peek);)c+=s.nextToken();else{let m={">0":"positive","\\gt0":"positive","<0":"negative","\\lt0":"negative",">=0":"nonnegative","\\geq0":"nonnegative","<=0":"nonpositive","\\leq0":"nonpositive","!=0":"notzero","\\neq0":"notzero","\\neq1":"notone","!=1":"notone","\\in\\R":"real","\\in\\mathbb{R}":"real","\\in\\C":"complex","\\in\\mathbb{C}":"complex","\\in\\Q":"rational","\\in\\mathbb{Q}":"rational","\\in\\Z^+":"integer,positive","\\in\\Z^-":"intger,negative","\\in\\Z^*":"nonzero","\\in\\R^+":"positive","\\in\\R^-":"negative","\\in\\R^*":"real,nonzero","\\in\\Z":"integer","\\in\\mathbb{Z}":"integer","\\in\\N":"integer,nonnegative","\\in\\mathbb{N}":"integer,nonnegative","\\in\\N^*":"integer,positive","\\in\\N_0":"integer,nonnegative","\\in\\R\\backslash\\Q":"irrational"};for(let A in m)if(s.matchAll(T3(A))){c=m[A];break}}if(!c)return null;if(!Object.keys(Fw).includes(c))throw new Error(`Unexpected condition "${c}" in a rule`);return c}function v9(s){let o=[];do{let c=mx(s);if(!c)break;o.push(c)}while(s.match(","));return o.join(",")}function y9(s){let o=null;if(s.match(":"))o=v9(s);else if(s.matchAll(["_","<{>"])&&(o=v9(s),!s.match("<}>")))return null;return o}function gx(s,o,c){if(!(o===void 0||typeof o=="function")){if(typeof o=="string"){let m=s.parse(o,{canonical:c?.canonical??!1});return m=m.map(A=>A.symbol&&A.symbol.length===1?s.symbol("_"+A.symbol):A,{canonical:!1}),m}return s.box(o,{canonical:c?.canonical??!1})}}function vx(s,o,c){let m=G1=>({kind:"symbol",latexTrigger:G1,parse:(c4,t4)=>{ae[G1]||(ae[G1]=`_${G1}`);let m4=y9(c4);return m4!==null&&(qe[G1]?qe[G1]+=","+m4:qe[G1]=m4),ae[G1]}}),A=s.latexDictionary,ae={},qe={};s.latexDictionary=[...A,{kind:"prefix",precedence:100,latexTrigger:"...",parse:(G1,c4)=>{let t4=G1.nextToken();if(!"abcfghjklmnopqrstuvwxyz".includes(t4))return null;let m4="__";if(G1.match("?")&&(m4="___"),ae[t4]&&ae[t4]!==`${m4}${t4}`)throw new Error(`Duplicate wildcard "${t4}"`);ae[t4]||(ae[t4]=`${m4}${t4}`);let N4=y9(G1);return N4===null?null:(qe[t4]?qe[t4]+=","+N4:qe[t4]=N4,`${m4}${t4}`)}},..."abcfghjklmnopqrstuvwxyz".split("").map(m),{kind:"infix",precedence:100,latexTrigger:"->",parse:(G1,c4,t4)=>{let m4=G1.parseExpression({...t4,minPrec:20});if(m4===null)return null;let N4=null;if(G1.match(";")){let $3=!1,f5=G1.index;do{G1.skipSpace();let U5=G1.nextToken();if(ae[U5]){let Vy=y9(G1);if(Vy===null||!Vy){$3=!0,G1.index=f5;break}qe[U5]?qe[U5]+=","+Vy:qe[U5]=Vy}}while(!$3&&!G1.atEnd);N4=G1.parseExpression(t4)}let e3=[];for(let $3 in qe){let f5=qe[$3].split(",");f5.length!==0&&(f5.length===1?e3.push(["Condition",ae[$3],f5[0]]):e3.push(["Condition",ae[$3],["And",...f5]]))}let G4;return N4&&e3.length>0?G4=["And",N4,...e3]:N4?G4=N4:e3.length===1?G4=e3[0]:e3.length>1&&(G4=["And",...e3]),G4?["Rule",c4,m4,G4]:["Rule",c4,m4]}}];let So=c?.canonical??!1,Hc=s.parse(o);if(s.latexDictionary=A,!Hc.isValid||Hc.operator!=="Rule")throw new Error(`Invalid rule "${o}"
|   ${e_(Hc).toString()}
|   A rule should be of the form:
|   <match> -> <replace>; <condition>`);let[mf,p1,M1]=Hc.ops;if(So&&(mf=mf.canonical,p1=p1.canonical),!yx(p1,mf))throw new Error(`Invalid rule "${o}"
|   The replace expression contains wildcards not present in the match expression`);if(mf.isSame(p1))throw new Error(`Invalid rule "${o}"
|   The match and replace expressions are the same.
|   This may be because the rule is not necessary due to canonical simplification`);let R1;if(M1!==void 0){if(!yx(M1,mf))throw new Error(`Invalid rule "${o}"
|   The condition expression contains wildcards not present in the match expression`);R1=G1=>M1.subs(G1).canonical.evaluate()?.symbol==="True"}return P8(s,{match:mf,replace:p1,condition:R1,id:o},c)}function P8(s,o,c){if(o==null)throw new Error("Expected a rule, not "+o);if(e6(o))return o;if(typeof o=="string")return vx(s,o,c);if(typeof o=="function")return{_tag:"boxed-rule",match:void 0,replace:o,condition:void 0,id:o.toString().replace(/\n/g," ")};let{match:m,replace:A,condition:ae,id:qe,onMatch:So,onBeforeMatch:Hc}=o;if(A===void 0)throw new Error(`Invalid rule "${qe??JSON.stringify(o,void 0,4)}"
|   A rule must include at least a replace property`);let mf;if(typeof ae=="string"){let R1=fy(ae);if(R1){let G1=s.parse(R1,{canonical:c?.canonical??!1});mf=(c4,t4)=>G1.subs(c4).evaluate()?.symbol==="True"}}else{if(ae!==void 0&&typeof ae!="function")throw new Error(`Invalid rule ${qe??JSON.stringify(o,void 0,4)}
|   condition is not a valid function`);mf=ae}if(typeof m=="function")throw new Error(`Invalid rule ${qe??JSON.stringify(o,void 0,4)}
|   match is not a valid expression.
|   Use a replace function instead to validate and replace the expression`);s.pushScope();let p1=gx(s,m,c),M1=gx(s,A,c);if(s.popScope(),qe||(typeof m=="string"?qe=m:qe=JSON.stringify(m,void 0,4),A&&(qe+=" -> ",typeof A=="string"?qe+=A:typeof A=="function"?qe+=A?.toString().replace(/\n/g," "):qe=JSON.stringify(A,void 0,4)),typeof ae=="string"?qe+=`; ${ae}`:typeof ae=="function"&&(qe+=`; ${ae.toString().replace(/\n/g," ")}`)),p1&&!p1.isValid)throw new Error(`Invalid rule ${qe}
|   the match expression is not valid: ${p1.toString()}`);if(M1&&!M1.isValid)throw new Error(`Invalid rule ${qe??JSON.stringify(o,void 0,4)}
|   The replace expression is not valid: ${M1?.toString()}`);if(!M1&&typeof A!="function")throw new Error(`Invalid rule ${qe??JSON.stringify(o,void 0,4)}
|   The replace expression could not be parsed`);return{_tag:"boxed-rule",match:p1,replace:M1??A,condition:mf,useVariations:o.useVariations,id:qe,onMatch:So,onBeforeMatch:Hc}}function q7(s,o,c){if(!o)return{rules:[]};if(typeof o=="object"&&"rules"in o)return o;Array.isArray(o)||(o=[o]);let m=[];for(let A of o)try{m.push(P8(s,A,c))}catch(ae){throw new Error(`
${ae.message}
|   Skipping rule ${JSON.stringify(A,void 0,4)}

`)}return{rules:m}}function s7(s,o,c,m){let A=m?.canonical??(o.isCanonical||o.isStructural),ae=!1;if(o.ops&&m?.recursive){let m4=o.ops.map(N4=>{let e3=s7(s,N4,{},m);return e3?(ae=!0,e3.value):N4});ae&&(o=o.engine.function(o.operator,m4,{canonical:A}))}let{match:qe,replace:So,condition:Hc,id:mf,onMatch:p1,onBeforeMatch:M1}=s,R1=mf??"";if(A&&qe){let m4=N8(qe),N4=qe;qe=qe.canonical;let e3=N8(qe);if(!m4.every(G4=>e3.includes(G4)))throw new Error(`
|   Invalid rule "${s.id}"
|   The canonical form of ${e_(N4).toString()} is "${e_(qe).toString()}" and it does not contain all the wildcards of the original match.
|   This could indicate that the match expression in canonical form is already simplified and this rule may not be necessary`)}let G1=s.useVariations??m?.useVariations??!1;M1?.(s,o);let c4=qe?o.match(qe,{substitution:c,...m,useVariations:G1}):{};if(c4===null)return ae?{value:o,because:R1}:null;if(typeof Hc=="function"){let m4={...Object.fromEntries(Object.entries(c4).map(([N4,e3])=>[N4.slice(1),e3])),...c4};try{if(!Hc(m4,o.engine))return ae?{value:o,because:R1}:null}catch(N4){return console.error(`
|   Rule "${s.id}"
|   Error while checking condition
|    ${N4.message}`),null}}let t4=typeof So=="function"?So(o,c4):So.subs(c4,{canonical:A});return t4?(p1?.(s,o,t4),t_(t4)?A?{...t4,value:t4.value.canonical}:t4:{value:A?t4.canonical:t4,because:R1}):null}function I8(s,o,c){if(!o)throw new Error("replace(): Expected one or more rules");let m=c?.iterationLimit??1,A=0,ae=c?.once??!1,qe;typeof o=="object"&&"rules"in o?qe=o.rules:qe=s.engine.rules(Array.isArray(o)?o:[o]).rules;let So=!1,Hc=[];for(;!So&&A<m;){So=!0;for(let mf of qe)try{let p1=s7(mf,s,{},c);if(p1!==null&&p1.value!==s&&!p1.value.isSame(s)){if(ae)return[p1];if(Hc.some(M1=>M1.value.isSame(p1.value)))return Hc;Hc.push(p1),So=!1,s=p1.value}}catch(p1){return console.error(`
${s.toString()}
${mf.id}
${p1.message}`),Hc}A+=1}return Hc}function b9(s,o,c,m){let A=[];for(let ae of o.rules){let qe=s7(ae,s,c,m);qe!==null&&!A.some(So=>So.isSame(qe.value))&&A.push(qe.value)}return A}function e_(s){let o=s.symbol;if(o&&o.startsWith("_"))return s.engine.symbol(o.slice(1));if(s.ops){let c=s.ops.map(m=>e_(m));return s.engine.function(s.operator,c,{canonical:!1})}return s}function N8(s){let o=[];return s.symbol&&s.symbol.startsWith("_")&&o.push(s.symbol),s.ops&&s.ops.forEach(c=>o.push(...N8(c))),o}function yx(s,o){let c=N8(s),m=N8(o);return c.every(A=>m.includes(A))}function t_(s){return s&&typeof s=="object"&&"because"in s&&"value"in s}function e6(s){return s&&typeof s=="object"&&s._tag==="boxed-rule"}function M3(s){for(let[o,c]of Object.entries(s))if(o!=="x"&&o!=="_x"&&c.has("_x"))return!1;return!0}var x5=[{match:["Power",["Add",["Multiply","_a","_x"],"__b"],"_n"],replace:["Divide",["Power",["Add",["Multiply","_a","_x"],"__b"],["Add","_n",1]],["Multiply","_a",["Add","_n",1]]],condition:s=>M3(s)&&!s._n.is(-1)},{match:["Power",["Add",["Multiply","_a","_x"],"__b"],1/2],replace:["Divide",["Multiply",2,["Power",["Add",["Multiply","_a","_x"],"__b"],3]],["Multiply",3,"_a"]],condition:s=>M3(s)&&s._a.isNumberLiteral},{match:["Power",["Add",["Multiply","_a","_x"],"__b"],1/3],replace:["Divide",["Multiply",3,["Power",["Add",["Multiply","_a","_x"],"__b"],4]],["Multiply",4,"_a"]],condition:s=>M3(s)&&s._a.isNumberLiteral},{match:["Power","__a","_x"],replace:["Divide",["Power","__a","_x"],["Ln",["Abs","__a"]]],condition:s=>M3(s)&&s._x.isNumberLiteral},{match:["Power",["Add",["Multiply","_a","_x"],"__b"],-1],replace:["Divide",["Ln",["Abs",["Add",["Multiply","_a","_x"],"__b"]]],"_a"],condition:M3},{match:["Divide",1,["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Abs",["Add",["Multiply","_a","_x"],"__b"]]],"_a"],condition:M3},{match:["Ln",["Add",["Multiply","_a","_x"],"__b"]],replace:["Subtract",["Multiply",["Add",["Multiply","_a","_x"],"__b"],["Ln","_x"]],["Subtract",["Multiply","_a","_x"],"__b"]],condition:M3},{match:["Exp",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Exp",["Add",["Multiply","_a","_x"],"__b"]],"_a"],condition:M3},{match:["Power",["Sech",["Add",["Multiply","_a","_x"],"__b"]],2],replace:["Divide",["Tanh",["Add",["Multiply","_a","_x"],"__b"]],"_a"],condition:M3},{match:["Power",["Sin",["Add",["Multiply","_a","_x"],"__b"]],2],replace:["Divide",["Add","_x",["Divide",["Sin",["Multiply",2,"_a","_x"]],2]],2],condition:M3},{match:["Power",["Cos",["Add",["Multiply","_a","_x"],"__b"]],2],replace:["Divide",["Add","_x",["Divide",["Sin",["Multiply",2,"_a","_x"]],2]],2],condition:M3},{match:["Sin",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Negate",["Cos",["Add",["Multiply","_a","_x"],"__b"]]],"_a"],condition:M3},{match:["Cos",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Sin",["Add",["Multiply","_a","_x"],"__b"]],"_a"],condition:M3},{match:["Tan",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Abs",["Sec",["Add",["Multiply","_a","_x"],"__b"]]]],"_a"],condition:M3},{match:["Sec",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Abs",["Add",["Sec",["Add",["Multiply","_a","_x"],"__b"]],["Tan",["Add",["Multiply","_a","_x"],"__b"]]]]],"_a"],condition:M3},{match:["Csc",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Negate",["Ln",["Abs",["Add",["Csc",["Add",["Multiply","_a","_x"],"__b"]],["Cot",["Add",["Multiply","_a","_x"],"__b"]]]]]],"_a"],condition:M3},{match:["Cot",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Negate",["Ln",["Abs",["Sin",["Add",["Multiply","_a","_x"],"__b"]]]]],"_a"],condition:M3},{match:["Sinh",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Abs",["Cosh",["Add",["Multiply","_a","_x"],"__b"]]]],"_a"],condition:M3},{match:["Cosh",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Abs",["Sinh",["Add",["Multiply","_a","_x"],"__b"]]]],"_a"],condition:M3},{match:["Tanh",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Abs",["Sech",["Add",["Multiply","_a","_x"],"__b"]]]],"_a"],condition:M3},{match:["Sech",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Abs",["Tanh",["Add",["Multiply","_a","_x"],"__b"]]]],"_a"],condition:M3},{match:["Csch",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Negate",["Ln",["Abs",["Coth",["Add",["Multiply","_a","_x"],"__b"]]]]],"_a"],condition:M3},{match:["Coth",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Negate",["Ln",["Abs",["Csch",["Add",["Multiply","_a","_x"],"__b"]]]]],"_a"],condition:M3},{match:["Arcsinh",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Add",["Add",["Multiply","_a","_x"],"__b"],["Sqrt",["Add",["Power",["Add",["Multiply","_a","_x"],"__b"],2],1]]]],"_a"],condition:M3},{match:["Arccosh",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Add",["Add",["Multiply","_a","_x"],"__b"],["Sqrt",["Subtract",["Power",["Add",["Multiply","_a","_x"],"__b"],2],1]]]],"_a"],condition:M3},{match:["Arctanh",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Divide",["Add",1,["Add",["Multiply","_a","_x"],"__b"]],["Subtract",1,["Add",["Multiply","_a","_x"],"__b"]]]],["Multiply",2,"_a"]],condition:M3},{match:["Arcsech",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Negate",["Ln",["Add",["Add",["Multiply","_a","_x"],"__b"],["Sqrt",["Subtract",["Power",["Add",["Multiply","_a","_x"],"__b"],2],1]]]]],"_a"],condition:M3},{match:["Arccsch",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Negate",["Ln",["Add",["Add",["Multiply","_a","_x"],"__b"],["Sqrt",["Add",["Power",["Add",["Multiply","_a","_x"],"__b"],2],1]]]]],"_a"],condition:M3},{match:["Arccoth",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Divide",["Add",["Add",["Multiply","_a","_x"],"__b"],1],["Subtract",["Add",["Multiply","_a","_x"],"__b"],1]]],["Multiply",2,"_a"]],condition:M3},{match:["Arccsch",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Negate",["Ln",["Add",["Add",["Multiply","_a","_x"],"__b"],["Sqrt",["Add",["Power",["Add",["Multiply","_a","_x"],"__b"],2],1]]]]],"_a"],condition:M3},{match:["Arccoth",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Negate",["Ln",["Add",["Add",["Multiply","_a","_x"],"__b"],["Sqrt",["Subtract",["Power",["Add",["Multiply","_a","_x"],"__b"],2],1]]]]],"_a"],condition:M3},{match:["Arctan",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Add",["Sec",["Add",["Multiply","_a","_x"],"__b"]],["Tan",["Add",["Multiply","_a","_x"],"__b"]]]],"_a"],condition:M3},{match:["Arccos",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Add",["Add",["Multiply","_a","_x"],"__b"],["Sqrt",["Subtract",["Power",["Add",["Multiply","_a","_x"],"__b"],2],1]]]],"_a"],condition:M3},{match:["Arcsin",["Add",["Multiply","_a","_x"],"__b"]],replace:["Divide",["Ln",["Add",["Add",["Multiply","_a","_x"],"__b"],["Sqrt",["Subtract",1,["Power",["Add",["Multiply","_a","_x"],"__b"],2]]]]],"_a"],condition:M3}];function D8(s,o){if(s.operator==="Function"||s.operator==="Block"||s.operator==="Delimiter")return D8(s.op1,o);let c=s.engine;if(s.symbol===o)return c.box(["Divide",["Power",s,2],2]);if(!s.has(o))return c.box(["Multiply",s,c.symbol(o)]);if(s.operator==="Add"){let qe=s.ops.map(So=>D8(So,o));return q3(...qe).evaluate()}if(s.operator==="Negate")return D8(s.op1,o).neg();if(s.operator==="Multiply"){let qe=s.ops.map((So,Hc)=>{let mf=s.ops.slice();mf.splice(Hc,1);let p1=Y5(...mf);return D8(So,o).mul(p1)});return q3(...qe).evaluate()}if(s.operator==="Divide"){if(!s.op2.has(o)){let qe=D8(s.op1,o);return s.engine.box(["Divide",qe,s.op2])}return r_(s,o)}let m=c.rules(x5),A=(m9(s)??s).subs({[o]:"_x"},{canonical:!0}),ae=b9(A,m,{_x:c.symbol("_x")},{useVariations:!0,canonical:!0});return ae&&ae[0]?ae[0].subs({_x:o}):r_(s,o)}function r_(s,o){let c=s.engine;return c.function("Integrate",[s,c.symbol(o,{canonical:!1})])}var bx=[{Derivative:{broadcastable:!1,lazy:!0,signature:"(function, order:number?) -> function",canonical:(s,{engine:o})=>{let c=y5(s[0].canonical);if(!c)return null;if(!s[1])return o._fn("Derivative",[c]);let m=t5(o,s[1]?.canonical,"number");return o._fn("Derivative",[c,m])},evaluate:s=>{let o=s[0].evaluate(),c=Math.floor(s[1]?.N().re);return _S(o,isNaN(c)?1:c)}},D:{broadcastable:!1,scoped:!0,lazy:!0,signature:"(expression, variable:symbol, variables:symbol+) -> expression",canonical:(s,{engine:o,scope:c})=>{let m=t9(o,s);return m?o._fn("D",[m,...s.slice(1)],{scope:c}):null},evaluate:(s,{engine:o})=>{let c=s[0].canonical;c=c.evaluate();let m=s.slice(1);m.length===0&&(c=void 0);for(let A of m){if(!A.symbol){c=void 0;break}if(c&&c.operator==="Function"&&(c=c.op1),c=q5(c,A.symbol),c===void 0)break}return c=c?.canonical,c?.operator==="D"?c:c?.evaluate()}},ND:{broadcastable:!1,lazy:!0,signature:"(function, at:number) -> number",canonical:(s,{engine:o})=>{let c=y5(s[0]);if(!c)return null;let m=t5(o,s[1]?.canonical,"number");return o._fn("ND",[c,m])},evaluate:([s,o],{engine:c})=>{let m=o.N().re;if(!isNaN(m))return c.number(p2(s.compile(),m))}},Integrate:{wikidata:"Q80091",broadcastable:!1,lazy:!0,signature:"(function, limits+) -> number",canonical:(s,{engine:o})=>{if(!s[0])return null;let c=y5(s[0]);if(!c)return null;let m=G_(s.slice(1),{engine:o});return o._fn("Integrate",[c,...m])},evaluate:(s,{engine:o,numericApproximation:c})=>{if(c){let qe=s[0],So=s[1],[Hc,mf]=[So.op2.N().re,So.op3.N().re];if(isNaN(Hc)||isNaN(mf))return;let p1=qe.compile(),M1=y8(p1,Hc,mf,p1.isCompiled?1e7:1e4);return o.box(["PlusMinus",o.number(M1.estimate),o.number(M1.error)])}let m=s[0],A=m.ops?.slice(1)?.map(qe=>qe.symbol)??[],ae=s.slice(1);if(ae.length!==0){for(let qe=ae.length-1;qe>=0;qe--){let[So,Hc,mf]=ae[qe].ops,p1=So.symbol;(!p1||p1==="Nothing")&&qe<A.length&&(p1=A[qe]),p1||(p1="x");let M1=D8(m,p1);if(M1.operator!=="Integrate"){let R1=M1;if(Hc.symbol==="Nothing"&&mf.symbol==="Nothing")m=R1;else{let G1=o.box(["Function",M1,p1]);m=o.box(["EvaluateAt",G1,Hc,mf])}}else if(Hc.symbol==="Nothing"&&mf.symbol==="Nothing")m=M1;else{let R1=o.box(["Function",M1,p1]);m=o.box(["EvaluateAt",R1,Hc,mf])}}return m.operator!=="Integrate"?m.evaluate({numericApproximation:c}):m}}},NIntegrate:{broadcastable:!1,lazy:!0,signature:"(function, limits:(tuple|symbol)?) -> number",canonical:(s,{engine:o})=>{let[c,m,A]=s,ae=y5(c);return!ae||!m||!A?null:o._fn("NIntegrate",[ae,m.canonical,A.canonical])},evaluate:([s,o,c],{engine:m})=>{let[A,ae]=[o.N().re,c.N().re];if(isNaN(A)||isNaN(ae))return;let qe=s.compile();return m.number(y8(qe,A,ae,qe.isCompiled?1e7:1e4).estimate)}},Limits:{description:"Limits of a function",complexity:5e3,broadcastable:!1,lazy:!0,signature:"(index:symbol, lower:number, upper:number) -> tuple",canonical:(s,{engine:o})=>yy(s,{engine:o})??null}},{Limit:{description:"Limit of a function",complexity:5e3,broadcastable:!1,lazy:!0,signature:"(function, point:number, direction:number?) -> number",canonical:([s,o,c],{engine:m})=>{let A=y5(s);return!A||!o?null:c===void 0?m._fn("Limit",[A,o.canonical]):m._fn("Limit",[A,o.canonical,c.canonical])},evaluate:([s,o,c],{engine:m,numericApproximation:A})=>{if(A){let ae=o.N().re;if(Number.isNaN(ae))return;let qe=s.compile();return m.number(C2(qe,ae,c?c.re:1))}}},NLimit:{description:"Numerical approximation of the limit of a function",complexity:5e3,broadcastable:!1,lazy:!0,signature:"(function, point:number, direction:number?) -> number",canonical:([s,o,c],{engine:m})=>{let A=y5(s);return!A||!o?null:c===void 0?m._fn("NLimit",[A,o.canonical]):m._fn("NLimit",[A,o.canonical,c.canonical])},evaluate:([s,o,c],{engine:m})=>{let A=o.N().re;if(Number.isNaN(A))return;let ae=s.compile();return m.number(C2(ae,A,c?c.re:1))}}}],i_=[{Block:{lazy:!0,scoped:!0,signature:"(unknown*) -> unknown",type:s=>s.length===0?"nothing":s[s.length-1].type,canonical:_x,evaluate:qw},Condition:{lazy:!0,signature:"(value, symbol) -> boolean",evaluate:([s,o],{engine:c})=>{let m=[];return o.symbol?m=[o.symbol]:o.operator==="And"&&(m=o.ops.map(A=>A.symbol??"")),Vw(s,m)?c.True:c.False}},If:{lazy:!0,signature:"(expression, expression, expression) -> any",type:([s,o,c])=>y3(o.type.type,c.type.type),canonical:([s,o,c],{engine:m})=>m._fn("If",[s.canonical,o.canonical,c.canonical]),evaluate:([s,o,c],{engine:m})=>{let A=s.evaluate().symbol;if(A==="True")return o?.evaluate()??m.Nothing;if(A==="False")return c?.evaluate()??m.Nothing;throw new Error(`Condition must evaluate to "True" or "False". ${Uv(s)}`)}},Loop:{lazy:!0,signature:"(body:expression, collection:expression) -> any",type:([s])=>s.type,evaluate:([s,o],{engine:c})=>l9(n_(s,o,c),c._timeRemaining),evaluateAsync:async([s,o],{engine:c,signal:m})=>P7(n_(s,o,c),c._timeRemaining,m)},Which:{lazy:!0,signature:"(expression+) -> unknown",type:s=>s.length%2!==0?"nothing":y3(...s.filter((o,c)=>c%2===1).map(o=>o.type.type)),canonical:(s,o)=>s.length%2!==0?o.engine.Nothing:o.engine._fn("Which",s.map(c=>c.canonical)),evaluate:(s,o)=>Bw(s,o)},FixedPoint:{lazy:!0,signature:"(any) -> unknown"}}];function Bw(s,o){let c=0;for(;c<s.length-1;){let m=s[c].evaluate().symbol;if(m==="True")return s[c+1]?s[c+1].evaluate(o):o.engine.symbol("Undefined");if(m!=="False")throw new Error(`Condition must evaluate to "True" or "False". ${Uv(s[c])}`);c+=2}return o.engine.symbol("Undefined")}function qw(s,{engine:o}){if(s.length===0)return o.Nothing;let c;for(let m of s){let A=m.operator;if(A==="Return"){c=m.op1.evaluate();break}if(A==="Break"||A==="Continue"){c=o.box([A,m.op1.evaluate()]);break}c=m.evaluate()}return c??o.Nothing}function _x(s,o){let{engine:c,scope:m}=o;return s.length===0?null:c._fn("Block",c._inScope(m,()=>s.map(A=>A.canonical)),{scope:m})}function*n_(s,o,c){if(s??=c.Nothing,s.symbol==="Nothing")return s;if(o?.isCollection){let A,ae=N6(s),qe=0;for(let So of o.each()){if(A=ae([So])??c.Nothing,A.operator==="Break")return A.op1;if(A.operator==="Return")return A;if(qe+=1,qe%1e3===0&&(yield A),qe>c.iterationLimit)throw new W5({cause:"iteration-limit-exceeded"})}return A}let m=0;for(;;){let A=s.evaluate();if(A.operator==="Break")return A.op1;if(A.operator==="Return")return A;if(m+=1,m%1e3===0&&(yield A),m>c.iterationLimit)throw new W5({cause:"iteration-limit-exceeded"})}}var xS=[{Choose:{complexity:1200,signature:"(n:number, m:number) -> number",evaluate:(s,{engine:o})=>{let c=s[0].re,m=s[1].re;if(!(!Number.isFinite(c)||!Number.isFinite(m)))return c<0||m<0||m>c?o.NaN:o.number(Cy(c,m))}}},{Fibonacci:{description:"Compute the nth Fibonacci number.",wikidata:"Q47577",signature:"(integer) -> integer",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null)return;if(c<0n)return o.function("Negate",["Fibonacci",o.number(-c)]);if(c===0n)return o.Zero;if(c===1n)return o.One;let m=0n,A=1n;for(let ae=2n;ae<=c;ae++){let qe=m+A;m=A,A=qe}return o.number(A)}},Binomial:{description:"Compute the binomial coefficient C(n, k) = n! / (k! (n-k)!).",wikidata:"Q209875",signature:"(integer, integer) -> integer",evaluate:([s,o],{engine:c})=>{let m=z6(s),A=z6(o);if(m===null||A===null)return;if(A<0n||A>m)return c.number(0);if(A===0n||A===m)return c.number(1);let ae=1n;for(let qe=1n;qe<=A;qe++)ae*=m-(A-qe),ae/=qe;return c.number(ae)}},CartesianProduct:{description:"Return the Cartesian product of input sets.",wikidata:"Q173740",signature:"(set+) -> set",collection:{contains:(s,o)=>{let c=s.ops;return!o.isCollection||o.ops.length!==c.length?!1:c.every((m,A)=>m.xcontains(o.ops[A])??!1)},count:s=>{let o=s.ops.map(c=>c.xsize);return o.includes(1/0)?1/0:o.reduce((c,m)=>c*m,1)},iterator:$w}},PowerSet:{description:"Return the power set of a set (set of all subsets).",wikidata:"Q205170",signature:"(set) -> set",collection:{contains:(s,o)=>{let c=s.ops[0];return o.isCollection?o.ops.every(m=>c.xcontains(m)??!1):!1},count:s=>{let o=s.ops[0];return o.isEmptyCollection?1:o.isFiniteCollection===!1?1/0:2**o.xsize},iterator:wS}},Permutations:{description:"Return all permutations of length k (default full length) of a collection.",signature:"(collection, integer?) -> list<list>",evaluate:([s,o],{engine:c})=>{if(!s.isFiniteCollection)return;let m=Array.from(s.each()),A=o?d3(o):m.length;if(A===null||A<0||A>m.length)return;function*ae(qe,So){if(qe.length===A){yield qe;return}for(let Hc=0;Hc<So.length;Hc++){let mf=So.slice(),[p1]=mf.splice(Hc,1);yield*ae([...qe,p1],mf)}}return c.function("List",[...ae([],m)].map(qe=>c.function("List",qe)))}},Combinations:{description:"Return all k-element combinations of a collection.",wikidata:"Q193606",signature:"(collection, integer) -> list<list>",evaluate:([s,o],{engine:c})=>{if(!s.isFiniteCollection)return;let m=Array.from(s.each()),A=d3(o);if(A===null||A<0||A>m.length)return;function*ae(qe,So){if(So.length===A){yield So;return}for(let Hc=qe;Hc<m.length;Hc++)yield*ae(Hc+1,[...So,m[Hc]])}return c.function("List",[...ae(0,[])].map(qe=>c.function("List",qe)))}},Multinomial:{description:"Compute the multinomial coefficient for multiple integers.",wikidata:"Q20820114",signature:"(integer+) -> integer",evaluate:(s,{engine:o})=>{let c=s.map(d3);if(c.some(ae=>ae===null||ae<0))return;let m=c.reduce((ae,qe)=>ae+(qe??0),0),A=1;for(let ae=1;ae<=m;ae++)A*=ae;for(let ae of c)for(let qe=1;qe<=ae;qe++)A/=qe;return o.number(A)}},Subfactorial:{description:"Compute the number of derangements (subfactorial) of n items.",wikidata:"Q2361661",signature:"(integer) -> integer",evaluate:([s],{engine:o})=>{let c=d3(s);if(c===null||c<0)return;let m=1;for(let A=1;A<=c;A++)m=Math.round(m*A*(1-1/A));return o.number(m)}},BellNumber:{description:"Compute the Bell number B(n), the number of partitions of a set of n elements.",wikidata:"Q816063",signature:"(integer) -> integer",evaluate:([s],{engine:o})=>{let c=d3(s);if(c===null||c<0)return;let m=[1];for(let A=1;A<=c;A++){let ae=0;for(let qe=0;qe<A;qe++)ae+=zw(A-1,qe)*m[qe];m[A]=ae}return o.number(m[c])}}}];function*$w(s){let o=s.ops,c=o.map(ae=>[...ae.each()]),m=c.map(ae=>ae.length);if(m.some(ae=>ae===0))return;let A=Array(o.length).fill(0);for(;;){let ae=A.map((So,Hc)=>c[Hc][So]);yield s.engine._fn("Tuple",ae);let qe=A.length-1;for(;qe>=0&&(A[qe]++,!(A[qe]<m[qe]));)A[qe]=0,qe--;if(qe<0)break}}function*wS(s){let o=[...s.ops[0].each()],c=o.length,m=s.engine,A=1<<c;for(let ae=0;ae<A;ae++){let qe=[];for(let So=0;So<c;So++)(ae&1<<So)!==0&&qe.push(o[So]);yield qe.length===0?m.symbol("EmptySet"):m._fn("Set",qe)}}function zw(s,o){if(o<0||o>s)return 0;if(o===0||o===s)return 1;let c=1;for(let m=1;m<=o;m++)c*=s-(o-m),c/=m;return c}var ES=[{Real:{broadcastable:!0,complexity:1200,signature:"(number) -> real",sgn:([s])=>{let o=s.re;if(!isNaN(o))return o===0?"zero":o>0?"positive":"negative"},evaluate:(s,{engine:o})=>{let c=s[0].numericValue;if(c!==null)return typeof c=="number"?s[0]:o.number(c.bignumRe??c.re)}},Imaginary:{broadcastable:!0,complexity:1200,signature:"(number) -> real",sgn:([s])=>{let o=s.im;if(!isNaN(o))return o===0?"zero":o>0?"positive":"negative"},evaluate:(s,{engine:o})=>{let c=s[0].numericValue;if(c!==null)return typeof c=="number"?o.Zero:o.number(c.im)}},Argument:{broadcastable:!0,complexity:1200,signature:"(number) -> real",evaluate:(s,{engine:o})=>{let c=s[0].numericValue;if(c!==null)return typeof c=="number"?c>=0?o.Zero:o.Pi:c.im===0?c.re>=0?o.Zero:o.Pi:o.function("ArcTan2",[c.im,c.re]).evaluate()}},AbsArg:{broadcastable:!0,complexity:1200,signature:"(number) -> tuple<real, real>",evaluate:(s,{engine:o})=>{if(s[0].numericValue!==null)return o.tuple(o.function("Abs",s).evaluate(),o.function("Argument",s).evaluate())}},Conjugate:{broadcastable:!0,complexity:1200,signature:"(number) -> number",type:([s])=>s.type,sgn:([s])=>s.sgn,evaluate:(s,{engine:o})=>{let c=s[0].numericValue;if(c!==null)return typeof c=="number"||c.im===0?s[0]:o.number(o.complex(c.re,-c.im))}},ComplexRoots:{broadcastable:!0,complexity:1200,signature:"(number, number) -> list<number>",evaluate:(s,{engine:o})=>{let c=s[0].re;if(isNaN(c))return;let m=s[1].re;if(!Number.isInteger(m)||m<=0)return;let A=[],ae=s[0].im??0,qe=Math.atan2(ae,c),So=Math.sqrt(c*c+ae*ae);for(let Hc=0;Hc<m;Hc++){let mf=(qe+2*Math.PI*Hc)/m,p1=Math.pow(So,1/m);A.push([p1*Math.cos(mf),p1*Math.sin(mf)])}return o.function("List",A.map(Hc=>o.number(Hc[1]!==0?o.complex(Hc[0],Hc[1]):Hc[0])))}}}];function Uw(s,{engine:o}){if(s.length===0)return null;let c=s[0];if(s.length===1)return c.canonical;if(s.length===2){let m=xx(c);if(!Number.isNaN(m)){let ae=s[1];if(ae.operator==="Divide"||ae.operator==="Rational"){let[qe,So]=[ae.op1.canonical.re,ae.op2.canonical.re];if(qe>0&&qe<=1e3&&So>1&&So<=1e3&&Number.isInteger(qe)&&Number.isInteger(So)){let Hc=ae.canonical;return m<0&&(Hc=Hc.neg()),o._fn("Add",[c.canonical,Hc])}}}let A=s[1];if(!Number.isNaN(m)&&ux(A))return o.number(o.complex(0,m));if(c.symbol&&A.operator==="Delimiter"){if(A.nops===0){let qe=o.lookupDefinition(c.symbol);return qe?E6(qe)?o.box([c.symbol]):qe.value.type.isUnknown?(c.infer("function"),o.box([c.symbol])):qe.value.type.matches("function")?o.box([c.symbol]):o.typeError("function",qe.value.type,c):(o.declare(c.symbol,"function"),o.box([c.symbol]))}let ae=A.op1.operator==="Sequence"?A.op1.ops:[A.op1];if(ae=$6(ae),!o.lookupDefinition(c.symbol))return o.declare(c.symbol,"function"),o.function(c.symbol,ae)}if(c.symbol&&A.operator==="Delimiter"&&(A.op2.string==="[,]"||A.op2.string==="[;]")){let ae=A.op1.operator==="Sequence"?A.op1.ops:[A.op1];return o.function("At",[c,...ae])}}return s=Ny(s),s=$6(s),s.every(m=>m.isValid&&(m.type.isUnknown||m.type.matches("number")||m.isIndexedCollection&&!m.string))?o._fn("Multiply",s):o._fn("Tuple",s)}function Ny(s){let o=[];for(let c of s)c.operator==="InvisibleOperator"?o.push(...Ny(c.ops)):o.push(c);return o}function xx(s){if(s.isNumberLiteral){let o=s.re;if(Number.isInteger(o))return o}if(s.operator==="Negate"){let o=xx(s.op1);if(!Number.isNaN(o))return-o}return Number.NaN}function $7(s,o,c){if(o===!1)return s;if(o===!0)return s.engine._inScope(c,()=>s.canonical);typeof o=="string"&&(o=[o]),s=Ex(s);for(let m of o)switch(m){case"InvisibleOperator":s=Sx(s);break;case"Number":s=a_(s);break;case"Multiply":s=jw(s);break;case"Add":s=Cv(s);break;case"Power":s=L8(s);break;case"Divide":s=Tx(s);break;case"Flatten":s=wx(s);break;case"Order":s=Qv(s,{recursive:!0});break;default:throw Error("Invalid canonical form")}return s}function wx(s){if(!s.operator||!s.ops||s.nops===0)return s;if(s.operator==="Delimiter")return wx(s.op1);let o=s.engine,c=s.operator==="Add"||s.operator==="Multiply";if(!c){let m=o.lookupDefinition(s.operator);E6(m)&&m.operator.associative&&(c=!0)}return c?o.function(s.operator,M7(s.ops.map(wx),s.operator)):s}function Sx(s){return s.ops?s.operator==="InvisibleOperator"?Uw(s.ops.map(Sx),{engine:s.engine})??s:s.engine._fn(s.operator,s.ops.map(Sx)):s}function a_(s){if(s.isNumberLiteral)return s.canonical;if(ux(s))return s.engine.I;if(!s.isFunctionExpression)return s;let{engine:o}=s,c=s.ops.map(a_),{operator:m}=s;if((m==="Divide"||m==="Rational")&&c.length===2){let A=R7(c[0]);if(A!==null){let ae=R7(c[1]);if(ae!==null)return o.number([A,ae])}return m="Divide",o._fn("Divide",c,{canonical:!1})}if(m==="Complex"){if(c.length===1){let A=c[0];return A.isNumberLiteral?o.number(o.complex(0,A.re)):o._fn("Multiply",[A,o.I],{canonical:!1})}if(c.length===2){let A=c[0].re,ae=c[1].re;return ae!==null&&A!==null&&!isNaN(ae)&&!isNaN(A)?ae===0&&A===0?o.Zero:ae!==0?o.number(o._numericValue({re:A,im:ae})):c[0]:o._fn("Add",[c[0],o._fn("Multiply",[c[1],o.I],{canonical:!1})],{canonical:!1})}throw new Error("Expected one or two arguments with `Complex` expression")}if(m==="Negate"&&c.length===1){let A=c[0],{numericValue:ae}=A;if(ae!==null)return o.number(typeof ae=="number"?-ae:ae.neg());if(ux(A))return o.number(o.complex(0,-1))}return c.every((A,ae)=>A===s.ops[ae])?s:o._fn(m,c,{canonical:!1})}function jw(s){if(!s.ops)return s;let o=s.ops.map(jw);return s.operator==="Multiply"?o6(s.engine,o.map(c=>c.canonical)):s.operator==="Negate"?o6(s.engine,[o[0],s.engine.NegativeOne]):s}function Cv(s){if(!s.ops)return s;let o=s.ops.map(Cv);return s.operator==="Add"?Z5(s.engine,o):s.operator==="Subtract"?Z5(s.engine,[o[0],o[1].neg()]):s.engine._fn(s.operator,o)}function L8(s){if(!s.ops)return s;let o=s.ops.map(c=>L8(c));return s.operator==="Power"?Yv(o[0],o[1]):s.engine._fn(s.operator,o,{canonical:!1})}function Ex(s){return s.symbol!==null?s.canonical:s.isFunctionExpression?s.engine._fn(s.operator,s.ops.map(Ex),{canonical:!1}):s}function Tx(s){return s.operator==="Divide"?U6(L8(s.op1),L8(s.op2)):s.ops?s.engine._fn(s.operator,s.ops.map(Tx)):s}function Dy(s){return s[Math.floor(Math.random()*s.length)]}function fv(s,o){if(s==="Add"||s==="Multiply"){let c=[],m=1+Math.floor(Math.random()*12);for(;m>0;)c.push(Mv(o+1)),m-=1;return[s,...c]}return s==="Divide"||s==="Power"?[s,Mv(o+1),Mv(o+1)]:s==="Root"?[s,Mv(o+1),Mv(10)]:s==="trig"?Hw():[s,Mv(o+1)]}function Hw(){return[Dy(["Cos","Sin","Tan","Sinh","Arccos","Arcsinh"]),Dy(["Pi","-1","0","1",["Divide","Pi",-5],["Multiply",-2,["Divide","Pi",11]],["Multiply","Half","Pi"],["Multiply",5,"Pi"],["Multiply",12,"Pi"],["Divide","Pi",5],["Divide","Pi",9],["Multiply",5,["Divide","Pi",9]],["Multiply",2,["Divide","Pi",11]],["Multiply",2,["Divide","Pi",3]]])]}function Mv(s){if(s??=1,s===1){let o=Dy([["Sqrt",["Multiply",6,["Sum",["Divide",1,["Power","n",2]],["Triple",["Hold","n"],1,"PositiveInfinity"]]]],"Add","Add","Add","Add","Add","Multiply","Multiply","Multiply","Multiply","Divide","Divide","Divide","Root","Sqrt","Subtract","Negate","trig"]);return typeof o=="string"?fv(o,1):o}if(s===2){let o=Math.random();if(o>.75)return Mv(1);if(o>.5)return Mv(3);let c=Dy(["Multiply","Multiply","Add","Power","trig","Ln","Exp"]);return fv(c,2)}return Dy([-12345e-9,-2,-2,-2,-3,-5,-6,-12,-1654e-60,0,0,12345e-8,1654e-60,1,2,2,2,2,3,3,5,5,6,6,1234.5678,5678.1234,10,15,18,30,60,1234e54,"123456789.12345678912345e200","987654321.12345678912345",["Rational",-6,10],["Rational",-12,15],["Rational",-15,12],["Rational",3,5],["Rational",12,15],["Rational",15,12],"ExponentialE",["Sqrt",3],["Sqrt",5],["Sqrt",15],["Sqrt",25],["Complex",-1.1,1.1],["Complex",4,5],"x","x","x","x",["Add","x",1],["Divide","x",3],["Square","x"],["Power","x",3],["Power","x",4],["Subtract","x",1],["Add","x",1],"Pi"])}var Ly=[{Nothing:{type:"nothing"}},{InvisibleOperator:{complexity:9e3,lazy:!0,signature:"function",canonical:(s,{engine:o})=>{let c=Uw(s,{engine:o});return c?c.operator==="Multiply"?o6(o,c.ops):c:o.Nothing}},Sequence:{lazy:!0,signature:"function",type:s=>s.length===0?"nothing":s.length===1?s[0].type:"any",canonical:(s,{engine:o})=>{let c=$6(s);return c.length===0?o.Nothing:c.length===1?c[0]:o._fn("Sequence",c)}},Delimiter:{complexity:9e3,lazy:!0,signature:"(any, string?) -> any",type:s=>s.length===0?"nothing":s[0].type,canonical:(s,{engine:o})=>{if(s.length===0)return o._fn("Tuple",[]);if(s.length>2)return o._fn("Delimiter",zv(o,s,2));let c=s[0];if(c.operator==="Sequence")return o._fn("Tuple",Jv(o,c.ops));c=c.canonical;let m=s[1]?.string;return!m||m.startsWith("(")&&m.endsWith(")")?c:(m?.length??0)>3?o._fn("Delimiter",[c,o.error("invalid-delimiter",s[1].toString())]):o._fn("Delimiter",[s[0],t5(o,s[1],"string")])},evaluate:(s,o)=>{let c=o.engine;if(s.length===0)return c.Nothing;let m=s[0];return(m.operator==="Sequence"||m.operator==="Delimiter")&&(s=P_(s[0].ops)),s.length===1?s[0].evaluate(o):c._fn("Tuple",s.map(A=>A.evaluate(o)))}},Error:{lazy:!0,complexity:500,signature:"((string|expression<ErrorCode>), expression?) -> nothing",canonical:(s,{engine:o})=>o._fn("Error",s)},ErrorCode:{complexity:500,lazy:!0,signature:"(string, any*) -> error",canonical:(s,{engine:o})=>{let c=t5(o,s[0],"string").string;return c==="incompatible-type"?o._fn("ErrorCode",[o.string(c),s[1],s[2]]):o._fn("ErrorCode",s)}},Unevaluated:{description:"Prevent an expression from being evaluated",lazy:!0,signature:"(any) -> unknown",type:([s])=>s.type,canonical:(s,{engine:o,scope:c})=>o._fn("Unevaluated",Jv(o,s,c)),evaluate:([s],o)=>s.evaluate(o)},Hold:{description:"Hold an expression, preventing it from being canonicalized or evaluated until `ReleaseHold` is applied to it",lazy:!0,signature:"(any) -> unknown",type:([s])=>s.symbol?"symbol":s.string?"string":s.isNumberLiteral?s.type:s.ops?H3(s.type.type)??"unknown":"unknown",eq:(s,o)=>(o.operator==="Hold"&&(o=o.ops[0]),s.ops[0].isSame(o)),evaluate:([s],{engine:o})=>o.hold(s)},ReleaseHold:{description:"Release an expression held by `Hold`",lazy:!0,signature:"(any) -> unknown",type:([s])=>s.operator==="Hold"?s.op1.type:s.type,evaluate:([s],o)=>(s.operator==="Hold"&&(s=s.op1),s.canonical.evaluate(o))},HorizontalSpacing:{signature:"(number) -> nothing",canonical:(s,{engine:o})=>s.length===2?s[0].canonical:o.Nothing},Annotated:{signature:"(expression, dictionary) -> expression",type:([s])=>s.type,complexity:9e3,lazy:!0,canonical:([s,o],{engine:c})=>(s=s.canonical,o=o.canonical,!Nw(o)||o.keys.length===0?s:c._fn("Annotated",[s,o])),evaluate:([s,o],c)=>s.evaluate(c)},Text:{description:"A sequence of strings, annotated expressions and other Text expressions",signature:"(any*) -> expression"}},{About:{description:"Return information about an expression",lazy:!0,signature:"(any) -> string",evaluate:([s],{engine:o})=>{let c=[s.toString()];if(c.push(""),s.string)c.push("string");else if(s.symbol)if(s.valueDefinition){let m=s.valueDefinition;m.isConstant&&c.push("constant"),typeof m.description=="string"?c.push(m.description):Array.isArray(m.description)&&c.push(m.description.join(`
`)),m.wikidata&&c.push(`WikiData: ${m.wikidata}`),m.url&&c.push(`Read More: ${m.url}`)}else c.push("symbol"),c.push(`value: ${s.evaluate().toString()}`);else s.isNumberLiteral?c.push(s.type.toString()):s.ops?(c.push(s.type.toString()),c.push(s.isCanonical?"canonical":"non-canonical")):c.push("Unknown expression's type");return o.string(c.join(`
`))}},Head:{description:"Return the head of an expression, the name of the operator",lazy:!0,signature:"(any) -> symbol",canonical:(s,{engine:o})=>{if(s.length!==1)return null;let c=s[0];return c.operator?o.box(c.operator):o._fn("Head",Jv(o,s))},evaluate:(s,{engine:o})=>o.symbol(s[0]?.operator??"Undefined")},Tail:{description:"Return the tail of an expression, the operands of the expression",lazy:!0,signature:"(any) -> collection",canonical:(s,{engine:o})=>{if(s.length!==1)return null;let c=s[0];return c.ops?o._fn("Sequence",c.ops):o._fn("Tail",Jv(o,s))},evaluate:([s],{engine:o})=>s?.ops?o._fn("Sequence",s.ops):o.Nothing},Identity:{description:"Return the argument unchanged",signature:"(any) -> unknown",type:([s])=>s.type,evaluate:([s])=>s}},{Apply:{description:"Apply a function to a list of arguments",signature:"(name:symbol, arguments:expression*) -> unknown",type:([s])=>H3(s.type.type)??"unknown",canonical:(s,{engine:o})=>s[0].symbol?o.function(s[0].symbol,s.slice(1)):o._fn("Apply",s),evaluate:s=>Wy(s[0],s.slice(1))},Assign:{description:"Assign a value to a symbol",lazy:!0,pure:!1,signature:"(symbol, any) -> any",type:([s,o])=>o.type,canonical:(s,{engine:o})=>{if(s.length!==2)return null;let c=s[0];return c.symbol||(c=t5(o,s[0],"symbol")),o._fn("Assign",[c,s[1].canonical])},evaluate:([s,o],{engine:c})=>{let m=s.evaluate();if(!m.symbol)return;let A=o.evaluate();return c.assign(m.symbol,A),A}},Assume:{description:"Assume a type for a symbol",lazy:!0,pure:!1,signature:"(any) -> symbol",evaluate:(s,{engine:o})=>o.symbol(o.assume(s[0]))},Declare:{lazy:!0,pure:!1,signature:"(symbol, type: string | symbol) -> nothing",canonical:(s,{engine:o})=>{let c=s[0];return c.symbol||(c=t5(o,s[0],"symbol")),s.length===1?o._fn("Declare",[c]):s.length!==2?null:o._fn("Declare",[c,s[1]])},evaluate:(s,{engine:o})=>{let c=s[0].evaluate().symbol;if(!c)return;if(!s[1])return o.declare(c,{inferred:!0,type:"unknown"}),o.Nothing;let m=s[1].canonical.evaluate(),A=R4(m.string??m.symbol??void 0);if(ev(A))return o.declare(c,A),o.Nothing}},Type:{lazy:!0,signature:"(any) -> string",evaluate:([s],{engine:o})=>o.string(s.type.toString()??"unknown")},Evaluate:{lazy:!0,signature:"(any) -> unknown",type:([s])=>s.type,canonical:(s,{engine:o})=>o._fn("Evaluate",zv(o,s,1)),evaluate:([s],o)=>s.evaluate(o)},EvaluateAt:{lazy:!0,signature:"(function, lower:number, upper:number) -> number",type:([s])=>H3(s.type.type)??"number",canonical:(s,{engine:o})=>{if(s.length===0)return null;let c=y5(s[0]);return c?o._fn("EvaluateAt",[c,...s.slice(1).map(m=>t5(o,m,"value"))]):null},evaluate:([s,o,c],{engine:m})=>{if(c===void 0){let qe=Wy(s,[o]);return qe&&qe.isNumberLiteral?qe:m._fn("EvaluateAt",[s,o])}let A=Wy(s,[o]),ae=Wy(s,[c]);return A&&ae&&A.N().isNumberLiteral&&ae.N().isNumberLiteral?ae.sub(A):m._fn("EvaluateAt",[s,o,c])}},BuiltinFunction:{complexity:9876,lazy:!0,signature:"(symbol | string) -> symbol",canonical:([s],{engine:o})=>o.symbol(s.symbol??s.string??"Undefined")},Function:{description:"A function literal",complexity:9876,lazy:!0,signature:"(expression, symbol*) -> function",type:([s,...o])=>`(${o.map(c=>c.type.type)}) -> ${s.type.type}`,canonical:(s,{engine:o})=>t9(o,s)??null,evaluate:s=>{}},Rule:{lazy:!0,signature:"(match: expression, replace: expression, predicate: function?) -> expression",evaluate:([s,o,c],{engine:m})=>{}},Simplify:{lazy:!0,signature:"(any) -> expression",canonical:(s,{engine:o})=>o._fn("Simplify",zv(o,s,1)),evaluate:([s])=>s.simplify()??void 0},CanonicalForm:{description:["Return the canonical form of an expression","Can be used to sort arguments of an expression.",'Sorting arguments of commutative functions is a weak form of canonicalization that can be useful in some cases, for example to accept "x+1" and "1+x" while rejecting "x+1" and "2x-x+1"'],complexity:8200,lazy:!0,signature:"(any, symbol*) -> any",canonical:s=>{if(s.length===1)return s[0].canonical;let o=s.slice(1).map(c=>c.symbol??c.string).filter(c=>c!=null);return $7(s[0],o)}},N:{description:"Numerically evaluate an expression",lazy:!0,signature:"(any) -> unknown",type:([s])=>s.type,canonical:(s,{engine:o})=>{if(s.length!==1)return o._fn("N",zv(o,s,1));let c=s[0].operator;return c==="N"||c==="Evaluate"?s[0].canonical:o._fn("N",s)},evaluate:([s])=>s.N()},Random:{description:["Random(): Return a random number between 0 and 1","Random(n): Return a random integer between 0 and n-1","Random(m, n): Return a random integer between m and n-1"],pure:!1,signature:"(lower:integer?, upper:integer?) -> finite_number",type:([s,o])=>s===void 0&&o===void 0?"finite_number":"finite_integer",sgn:()=>"non-negative",evaluate:(s,{engine:o})=>{if(s.length===0)return o.number(Math.random());let[c,m]=s,A,ae;return m===void 0?(A=0,ae=Math.floor(c.re-1),isNaN(ae)&&(ae=0)):(A=Math.floor(c.re),ae=Math.floor(m.re),isNaN(A)&&(A=0),isNaN(ae)&&(ae=0)),o.number(A+Math.floor(Math.random()*(ae-A)))}},Signature:{lazy:!0,signature:"(symbol) -> string | nothing",evaluate:([s],{engine:o})=>s.operatorDefinition?o.string(s.operatorDefinition.signature.toString()):o.Nothing},Subscript:{lazy:!0,signature:"(collection, any) -> any",type:([s,o],{engine:c})=>s.string&&R6(o)!==null?"integer":s.isIndexedCollection?l6(s.type.type)??"any":s.symbol?"symbol":"expression",canonical:([s,o],{engine:c})=>{if(s=s.canonical,s.string){let m=R6(o.canonical);if(m!==null&&m>1&&m<=36){let[A,ae]=s9(s.string,m);return ae?c.error(["unexpected-digit",ae[0]],s.toString()):c.number(A)}return c._fn("Baseform",[s,c.error(["invalid-base",o.toString()])])}if(s.isIndexedCollection)return c._fn("At",[s,o.canonical]);if(s.symbol){let m=o.string??o.symbol??R6(o)?.toString();if(m)return c.symbol(s.symbol+"_"+m)}return o.operator==="Sequence"&&c._fn("Subscript",[s,c._fn("List",o.ops)]),c._fn("Subscript",[s,o])}},Symbol:{complexity:500,description:"Construct a new symbol with a name formed by concatenating the arguments",broadcastable:!0,lazy:!0,signature:"function",type:s=>s.length===0?"nothing":"symbol",canonical:(s,{engine:o})=>s.length===0?o.Nothing:o._fn("Symbol",s.map(c=>c.symbol?c:c.canonical)),evaluate:(s,{engine:o})=>{s.length>0;let c=s.map(m=>m.symbol??m.string??R6(m)?.toString()??"").join("");return o.symbol(c)}},Timing:{description:"`Timing(expr)` evaluates `expr` and return a `Pair` of the number of second elapsed for the evaluation, and the value of the evaluation",signature:"(value, repeat: integer?) -> tuple<result:value, time:number>",evaluate:(s,{engine:o})=>{if(s[1].symbol==="Nothing"){let Hc=globalThis.performance.now(),mf=s[0].evaluate(),p1=1e3*(globalThis.performance.now()-Hc);return o.tuple(o.number(p1),mf)}let c=Math.max(3,d3(s[1])??3),m=[],A;for(;c>0;){let Hc=globalThis.performance.now();A=s[0].evaluate(),m.push(1e3*(globalThis.performance.now()-Hc)),c-=1}let ae=Math.max(...m),qe=Math.min(...m);m=m.filter(Hc=>Hc>qe&&Hc<ae);let So=m.reduce((Hc,mf)=>Hc+mf,0);return So===0?o.tuple(o.number(ae),A):o.tuple(o.number(So/m.length),A)}}},{Wildcard:{signature:"(symbol) -> symbol",canonical:(s,{engine:o})=>s.length!==1?o.symbol("_"):o.symbol("_"+s[0].symbol)},WildcardSequence:{signature:"(symbol) -> symbol",canonical:(s,{engine:o})=>s.length!==1?o.symbol("__"):o.symbol("__"+s[0].symbol)},WildcardOptionalSequence:{signature:"(symbol) -> symbol",canonical:(s,{engine:o})=>s.length!==1?o.symbol("___"):o.symbol("___"+s[0].symbol)}},{LatexString:{description:"Value preserving type conversion/tag indicating the string is a LaTeX string",signature:"(string) -> string",evaluate:([s])=>s},Latex:{description:"Serialize an expression to LaTeX",signature:"(any+) -> string",evaluate:(s,{engine:o})=>o.box(["LatexString",o.string(T4(s.map(c=>c.latex)))])},Parse:{description:"Parse a LaTeX string and evaluate to a corresponding expression",signature:"(string) -> any",evaluate:([s],{engine:o})=>o.parse(s.string)??o.Nothing}},{String:{description:"A string created by joining its arguments. The arguments are converted to their default string representation.",broadcastable:!0,signature:"(any*) -> string",evaluate:(s,{engine:o})=>s.length===0?o.string(""):o.string(s.map(c=>c.toString()).join(""))},StringFrom:{description:"Create a string by converting its arguments to a string and joining them.",broadcastable:!0,signature:"(any, format:string?) -> string",evaluate:([s,o],{engine:c})=>{if(s===void 0)return c.string("");let m=o?.string??"default";return m==="default"?c.string(s.toString()):m==="utf-8"?s.isIndexedCollection?c.string(new TextDecoder("utf-8").decode(new Uint8Array([...s.each()].map(A=>d3(A)??65533)))):c.typeError(R4("indexed_collection<integer>"),s.type):m==="utf-16"?s.isIndexedCollection?c.string(new TextDecoder("utf-16").decode(new Uint16Array([...s.each()].map(A=>d3(A)??65533)))):c.typeError(R4("indexed_collection<integer>"),s.type):m==="unicode-scalars"?s.isIndexedCollection?c.string(String.fromCodePoint(...[...s.each()].map(A=>d3(A)??65533))):c.typeError(R4("indexed_collection<integer>"),s.type):c.string(s.toString())}},Utf8:{description:"A collection of utf-8 code units from a string.",signature:"(string) -> list<integer>",evaluate:([s],{engine:o})=>{if(!s.string)return;let c=s.buffer;return o.function("List",Array.from(c,m=>o.number(m)))}},Utf16:{description:"A collection of utf-16 code units from a string.",signature:"(string) -> list<integer>",evaluate:([s],{engine:o})=>{if(!s.string)return;let c=[];for(let m=0;m<s.string.length;m++){let A=s.string.charCodeAt(m);c.push(A)}return o.function("List",c.map(m=>o.number(m)))}},UnicodeScalars:{description:"A collection of Unicode scalars from a string, same as utf-32",signature:"(string) -> list<integer>",evaluate:([s],{engine:o})=>{if(!s.string)return;let c=s.unicodeScalars;return o.function("List",c.map(m=>o.number(m)))}},GraphemeClusters:{description:"A collection of grapheme clusters from a string.",signature:"(string) -> list<string>",evaluate:([s],{engine:o})=>{if(!s.string)return;let c=new Intl.Segmenter("en",{granularity:"grapheme"}),m=Array.from(c.segment(s.string),A=>o.string(A.segment));return o.function("List",m)}},BaseForm:{description:"`BaseForm(expr, base=10)`",complexity:9e3,signature:"(number, (string|integer)?) -> string | nothing",type:([s])=>s===void 0?"nothing":s.type,evaluate:([s])=>s},DigitsFrom:{description:"Return an integer representation of the string `s` in base `base`.",signature:"(string, (string|integer)?) -> integer",evaluate:(s,{engine:o})=>{let c=s[0]?.string,m=o;if(!c)return m.typeError("string",s[0]?.type,s[0]);if(c=c.trim(),c.startsWith("0x"))return m.number(parseInt(c.slice(2),16));if(c.startsWith("0b"))return m.number(parseInt(c.slice(2),2));let A=s[1]??m.Nothing;if(A.symbol==="Nothing")return m.number(Number.parseInt(c,10));let ae=A.re;if(!A.isInteger||!Number.isFinite(ae)||ae<2||ae>36)return m.error(["unexpected-base",ae.toString()],A.toString());let[qe,So]=s9(c,A.string??A.symbol??10);return So?m.error(["unexpected-digit",So[0]],So):m.number(qe)}},IntegerString:{description:"`IntegerString(n, base=10)`       return a string representation of the integer `n` in base `base`.",broadcastable:!0,signature:"(integer, integer?) -> string",evaluate:(s,{engine:o})=>{let c=o,m=s[0];if(!m.isInteger)return c.typeError("integer",m.type,m);let A=m.re;if(!Number.isFinite(A))return c.typeError("integer",m.type,m);let ae=s[1]??c.Nothing;if(ae.symbol==="Nothing")return m.bignumRe!==void 0?c.string(m.bignumRe.abs().toString()):c.string(Math.abs(A).toString());let qe=R6(ae);return qe===null?c.typeError("integer",ae.type,ae):qe<2||qe>36?c.error(["out-of-range","2","36",qe.toString()],ae.toString()):c.string(Math.abs(A).toString(qe))}}},{RandomExpression:{signature:"() -> expression",evaluate:(s,{engine:o})=>o.box(Mv())}}];function Gw(s,o){switch(o){case"float64":case"float32":case"int32":case"uint8":return new Kw(s);case"complex128":case"complex64":return new Ww(s);case"bool":case"expression":return new O8(s);case void 0:return new Kw(s)}throw new Error(`Unknown dtype ${o}`)}var Kw=class{constructor(s){this.ce=s}one=1;zero=0;nan=NaN;cast(s,o){let c=this.ce;switch(o){case"float64":case"float32":case"int32":case"uint8":return s;case"complex128":case"complex64":return Array.isArray(s)?s.map(m=>c.complex(m)):this.ce.complex(s);case"bool":return Array.isArray(s)?s.map(m=>m!==0):s!==0;case"expression":return Array.isArray(s)?s.map(m=>c.number(m)):c.number(s)}throw new Error(`Cannot cast ${s} to ${o}`)}expression(s){return this.ce.number(s)}isZero(s){return s===0}isOne(s){return s===1}equals(s,o){return s===o}add(s,o){return s+o}addn(...s){return s.reduce((o,c)=>o+c,0)}neg(s){return-s}sub(s,o){return s-o}mul(s,o){return s*o}muln(...s){return s.reduce((o,c)=>o*c,1)}div(s,o){return s/o}pow(s,o){return s**o}conjugate(s){return s}},O8=class{one;zero;nan;ce;constructor(s){this.zero=s.Zero,this.nan=s.NaN,this.ce=s}cast(s,o){if(Array.isArray(s))return s.map(c=>this.cast(c,o));switch(o){case"float64":case"float32":return s.im===0?s.re:void 0;case"int32":return typeof s.re=="number"?Math.round(s.re):void 0;case"uint8":if(typeof s.re!="number")return;let c=Math.round(s.re);return c>=0&&c<=255?c:void 0;case"complex128":case"complex64":let[m,A]=[s.re,s.im];return typeof m=="number"&&typeof A=="number"?this.ce.complex(m,A):typeof m=="number"?this.ce.complex(m):void 0;case"bool":let ae=s.valueOf();return typeof ae=="boolean"?ae:void 0;case"expression":return s}throw new Error(`Cannot cast ${s} to ${o}`)}expression(s){return s}isZero(s){return s.is(0)}isOne(s){return s.is(1)}equals(s,o){return s.isSame(o)===!0}add(s,o){return s.add(o)}addn(...s){return q3(...s)}neg(s){return s.neg()}sub(s,o){return s.sub(o)}mul(s,o){return s.mul(o)}muln(...s){return Y5(...s)}div(s,o){return s.div(o)}pow(s,o){return s.pow(o)}conjugate(s){return this.ce.function("Conjugate",[s]).evaluate()}},Ww=class{one;zero;nan;ce;constructor(s){this.ce=s,this.one=s.complex(1),this.zero=s.complex(0),this.nan=s.complex(NaN)}cast(s,o){if(Array.isArray(s))return s.map(c=>this.cast(c,o));switch(o){case"float64":return s.im===0?s.re:void 0;case"float32":return s.im===0?s.re:void 0;case"int32":return s.im===0?Math.round(s.re):void 0;case"uint8":if(s.im!==0)return;let c=Math.round(s.re);return c>=0&&c<=255?c:void 0;case"complex128":return s;case"complex64":return s;case"bool":return!(s.im===0&&s.re===0);case"expression":return this.ce.number(s)}throw new Error(`Cannot cast ${s} to ${o}`)}expression(s){return this.ce.number(s)}isZero(s){return s.isZero()}isOne(s){return s.re===1&&s.im===0}equals(s,o){return s.equals(o)}add(s,o){return s.add(o)}addn(...s){return s.reduce((o,c)=>o.add(c),this.zero)}neg(s){return s.neg()}sub(s,o){return s.sub(o)}mul(s,o){return s.mul(o)}muln(...s){return s.reduce((o,c)=>o.mul(c),this.one)}div(s,o){return s.div(o)}pow(s,o){return s.pow(o)}conjugate(s){return s.conjugate()}};function Xw(s,o){return s===void 0?o:s===o?s:s==="expression"||o==="expression"?"expression":s==="complex128"||o==="complex128"?"complex128":s==="complex64"||o==="complex64"?"complex64":s==="float64"||o==="float64"?"float64":s==="float32"||o==="float32"?"float32":s==="int32"||o==="int32"?"int32":s==="uint8"||o==="uint8"?"uint8":s==="bool"||o==="bool"?"bool":"expression"}function TS(s){if(s.symbol==="True"||s.symbol==="False")return"bool";if(s.symbol==="NaN"||s.symbol==="PositiveInfinity"||s.symbol==="NegativeInfinity")return"float64";if(s.symbol==="ComplexInfinity"||s.symbol==="ImaginaryUnit")return"complex128";if(s.isNumberLiteral)switch(s.type.type){case"real":case"rational":case"finite_real":case"finite_rational":case"integer":return"float64";case"complex":case"finite_complex":case"imaginary":return"complex128";case"finite_integer":{let o=s.re;return o>=0&&o<=255?"uint8":"int32"}default:return"expression"}return"expression"}var s_=class $8{constructor(o,c){this.ce=o,this.shape=c.shape,this.rank=this.shape.length,this._strides=AS(this.shape),this.field=Gw(o,c.dtype)}static align(o,c){if(o.dtype===c.dtype)return[o,c];let m=Xw(o.dtype,c.dtype);return o.dtype===m?[o,c.upcast(m)]:[o.upcast(m),c]}static broadcast(o,c,m){if(!(m instanceof $8))return c.map1(o,m);let[A,ae]=$8.align(c,m),qe=A.data.map((So,Hc)=>o(So,ae.data[Hc]));return N5(A.ce,{dtype:A.dtype,shape:A.shape,data:qe})}field;shape;rank;_strides;get expression(){let o=this.shape,c=this.rank,m=this.data,A=this._index.bind(this),ae=this.field.expression.bind(this.field),qe=So=>{if(So.length===c-1){let Hc=A(So);return this.ce._fn("List",m.slice(Hc,Hc+o[c-1]).map(mf=>ae(mf)))}else{let Hc=[];for(let mf=1;mf<=o[So.length];mf++)Hc.push(qe([...So,mf]));return this.ce._fn("List",Hc)}};return qe([])}get array(){let o=this.shape,c=this.rank,m=this.data;if(c===1)return m;if(c===2){let[qe,So]=o,Hc=new Array(qe);for(let mf=0;mf<qe;mf++)Hc[mf]=m.slice(mf*So,(mf+1)*So);return Hc}let A=this._index.bind(this),ae=qe=>{if(qe.length===c-1){let So=A(qe);return m.slice(So,So+o[c-1])}else{let So=[];for(let Hc=0;Hc<o[qe.length];Hc++)So.push(ae([...qe,Hc+1]));return So}};return ae([])}_index(o){let c=this._strides;return o.reduce((m,A,ae)=>m+(A-1)*c[ae],0)}get isSquare(){let o=this.shape;return o.length===2&&o[0]===o[1]}get isSymmetric(){if(!this.isSquare)return!1;let o=this.shape[0],c=this.data,m=this.field.equals.bind(this.field);for(let A=0;A<o;A++)for(let ae=A+1;ae<o;ae++)if(!m(c[A*o+ae],c[ae*o+A]))return!1;return!0}get isSkewSymmetric(){if(!this.isSquare)return!1;let o=this.shape[0],c=this.data,m=this.field.equals.bind(this.field),A=this.field.neg.bind(this.field);for(let ae=0;ae<o;ae++)for(let qe=ae+1;qe<o;qe++)if(!m(c[ae*o+qe],A(c[qe*o+ae])))return!1;return!0}get isUpperTriangular(){if(!this.isSquare)return!1;let o=this.shape[0],c=this.data,m=this.field.isZero.bind(this.field);for(let A=1;A<o;A++)for(let ae=0;ae<A;ae++)if(m(c[A*o+ae]))return!1;return!0}get isLowerTriangular(){if(!this.isSquare)return!1;let o=this.shape[0],c=this.data,m=this.field.isZero.bind(this.field);for(let A=0;A<o-1;A++)for(let ae=A+1;ae<o;ae++)if(!m(c[A*o+ae]))return!1;return!0}get isTriangular(){if(!this.isSquare)return!1;let o=this.shape[0],c=this.data,m=this.field.isZero.bind(this.field);for(let A=0;A<o;A++)for(let ae=0;ae<o;ae++)if(A<ae&&!m(c[A*o+ae])||A>ae&&!m(c[A*o+ae]))return!1;return!0}get isDiagonal(){if(!this.isSquare)return!1;let o=this.shape[0],c=this.data,m=this.field.isZero.bind(this.field);for(let A=0;A<o;A++)for(let ae=0;ae<o;ae++)if(A===ae&&!m(c[A*o+ae])||A!==ae&&!m(c[A*o+ae]))return!1;return!0}get isIdentity(){if(!this.isSquare)return!1;let[o,c]=this.shape,m=this.data,A=this.field.isOne.bind(this.field),ae=this.field.isZero.bind(this.field);for(let qe=0;qe<c;qe++)for(let So=0;So<c;So++)if(qe===So&&!A(m[qe*c+So])||qe!==So&&!ae(m[qe*c+So]))return!1;return!0}get isZero(){let o=this.field.isZero.bind(this.field);return this.data.every(c=>o(c))}at(...o){let c=this.data.length;return this.data[this._index(o)%c]}diagonal(o,c){if(o??=1,c??=2,o===c||o<=0||o>this.shape.length||this.shape[o-1]!==this.shape[c-1])return;let m=new Array(this.shape[o-1]),A=this.data,ae=this.shape[o-1];for(let qe=0;qe<ae;qe++)m[qe]=A[qe*ae+qe];return m}trace(o,c){if(this.rank!==2)return;let[m,A]=this.shape;if(m!==A)return;let ae=this.data,qe=new Array(m);for(let So=0;So<m;So++)qe[So]=ae[So*m+So];return this.field.addn(...qe)}reshape(...o){return N5(this.ce,{dtype:this.dtype,shape:o,data:this.data})}slice(o){if(o<0&&(o=this.shape[0]+o+1),this.rank===0)return this;if(this.rank===1){let ae=this.data[o-1];return N5(this.ce,{dtype:this.dtype,shape:[],data:[ae]})}this.shape[1];let c=this._strides[0],m=o*c,A=m+c;return N5(this.ce,{dtype:this.dtype,shape:this.shape.slice(1),data:this.data.slice(m,A)})}flatten(){return this.data}upcast(o){let c=this.field.cast(this.data,o);if(c===void 0)throw Error(`Cannot cast tensor to ${o}`);return N5(this.ce,{dtype:o,shape:this.shape,data:c})}transpose(o,c,m){if(this.rank!==2)return;if(o??=1,c??=2,o===c)return this;if(o<=0||o>2||c<=0||c>2)return;let[A,ae]=this.shape,qe=this.data;m&&(qe=qe.map(p1=>m(p1)));let So=0,Hc=new Array(A*ae),mf=ae;for(let p1=0;p1<ae;p1++)for(let M1=0;M1<A;M1++)Hc[So++]=qe[M1*mf+p1];return N5(this.ce,{dtype:this.dtype,shape:[ae,A],data:Hc})}conjugateTranspose(o,c){let m=this.field.conjugate.bind(this.field);return this.transpose(o,c,m)}determinant(){if(this.rank!==2)return;let[o,c]=this.shape;if(o!==c)return;if(o===1)return this.data[0];let m=this.field.add.bind(this.field),A=this.field.mul.bind(this.field),ae=this.field.neg.bind(this.field);if(o===2){let[t4,m4,N4,e3]=this.data;return m(A(t4,e3),ae(A(m4,N4)))}let qe=this.field.addn.bind(this.field),So=this.field.muln.bind(this.field);if(o===3){let[t4,m4,N4,e3,G4,$3,f5,U5,Vy]=this.data;return qe([So(t4,G4,Vy),So(m4,$3,f5),So(N4,e3,U5),ae(So(N4,G4,f5)),ae(So(m4,e3,Vy)),ae(So(t4,$3,U5))])}let Hc=this.shape[0],mf=!1,p1=this.field.div.bind(this.field),M1=this.field.sub.bind(this.field),R1=new Array(Hc).fill(0).map((t4,m4)=>m4),G1=[...this.data];for(let t4=0;t4<Hc;t4++){let m4=R1[t4-1];if(this.at(m4,t4)===0){let G4;for(G4=t4+1;G4<Hc;G4++)if(this.at(R1[G4],t4)!==0){m4=R1[G4],R1[G4-1]=R1[t4-1],R1[t4-1]=m4,mf=!mf;break}if(G4===Hc)return this.at(m4,t4)}let N4=this.at(m4,t4),e3=t4===0?1:this.at(R1[t4-2],t4-2);for(let G4=t4+1;G4<Hc;G4++){let $3=R1[G4-1];for(let f5=t4+1;f5<Hc;f5++)G1[$3][f5]=p1(M1(A(G1[$3][f5],N4),A(G1[$3][t4],G1[m4][f5])),e3)}}let c4=G1[R1[Hc-1]][Hc-1];return mf?this.field.neg(c4):c4}inverse(){if(this.rank!==2)return;let[o,c]=this.shape;if(o!==c)return;if(o===2){let[R1,G1,c4,t4]=this.data,m4=this.determinant();if(m4===void 0||this.field.isZero(m4))return;let N4=this.field.div.bind(this.field),e3=this.field.neg.bind(this.field),G4=[N4(t4,m4),e3(N4(G1,m4)),e3(N4(c4,m4)),N4(R1,m4)];return N5(this.ce,{dtype:this.dtype,shape:[c,c],data:G4})}let m=this.shape[0],A=this.field.div.bind(this.field),ae=this.field.sub.bind(this.field),qe=this.field.mul.bind(this.field),So=this.array,Hc=new Array(m).fill(0).map((R1,G1)=>{let c4=new Array(m).fill(0);return c4[G1]=1,c4}),mf=So.map((R1,G1)=>[...R1,...Hc[G1]]),p1=new Array(m).fill(0).map((R1,G1)=>G1);for(let R1=0;R1<m;R1++){let G1=p1[R1-1];if(this.at(G1,R1)===0){let m4;for(m4=R1+1;m4<m;m4++)if(this.at(p1[m4],R1)!==0){G1=p1[m4],p1[m4-1]=p1[R1-1],p1[R1-1]=G1;break}if(m4===m)return}let c4=this.at(G1,R1),t4=R1===0?1:this.at(p1[R1-2],R1-2);for(let m4=R1+1;m4<m;m4++){let N4=p1[m4-1];for(let e3=R1+1;e3<m*2;e3++)mf[N4][e3]=ae(mf[N4][e3],qe(A(qe(mf[N4][R1],mf[G1][e3]),c4),t4))}}for(let R1=m-1;R1>=0;R1--){let G1=mf[p1[R1],R1];for(let c4=0;c4<R1;c4++){let t4=p1[c4];for(let m4=m;m4<m*2;m4++)mf[t4][m4]=ae(mf[t4][m4],qe(A(qe(mf[t4][R1],mf[R1][m4]),G1),G1))}for(let c4=m;c4<m*2;c4++)mf[R1][c4]=A(mf[R1][c4],G1)}let M1=mf.map(R1=>R1.slice(m));return N5(this.ce,{dtype:this.dtype,shape:[c,c],data:M1})}pseudoInverse(){}adjugateMatrix(){}minor(o,c){}map1(o,c){return N5(this.ce,{dtype:this.dtype,shape:this.shape,data:this.data.map(m=>o(m,c))})}map2(o,c){let m=c.data;return N5(this.ce,{dtype:this.dtype,shape:this.shape,data:this.data.map((A,ae)=>o(A,m[ae]))})}add(o){return $8.broadcast(this.field.add.bind(this.field),this,o)}subtract(o){return $8.broadcast(this.field.sub.bind(this.field),this,o)}multiply(o){return $8.broadcast(this.field.mul.bind(this.field),this,o)}divide(o){return $8.broadcast(this.field.div.bind(this.field),this,o)}power(o){return $8.broadcast(this.field.pow.bind(this.field),this,o)}equals(o){if(this.rank!==o.rank||!this.shape.every((ae,qe)=>ae===o.shape[qe]))return!1;let c=this.field.equals.bind(this.field),m=this.field.cast.bind(this.field),A=this.dtype;return this.dtype!==o.dtype?!!this.data.every((ae,qe)=>c(ae,m(o.data[qe],A))):this.data.every((ae,qe)=>c(ae,o.data[qe]))}};function AS(s){let o=new Array(s.length);for(let c=s.length-1,m=1;c>=0;c--)o[c]=m,m*=s[c];return o}var CS=class extends s_{dtype="float64";data;constructor(s,o){super(s,o),this.data=o.data}get isZero(){return this.data.every(s=>s===0)}},MS=class extends s_{dtype="complex128";data;constructor(s,o){super(s,o),this.data=o.data}},kS=class extends s_{dtype="bool";data;constructor(s,o){super(s,o),this.data=o.data}},Zw=class extends s_{dtype="expression";data;constructor(s,o){super(s,o),this.data=o.data}};function N5(s,o){let c=o.dtype;return c==="float64"||c==="float32"||c==="uint8"||c==="int32"?new CS(s,o):c==="bool"?new kS(s,o):c==="complex64"||c==="complex128"?new MS(s,o):new Zw(s,o)}function iy(s){return s.symbol?.startsWith("_")??(s.operator==="Wildcard"||s.operator==="WildcardSequence"||s.operator==="WildcardOptionalSequence")}function z7(s){if(s.symbol?.startsWith("_"))return s.symbol;if(s.nops===1){let o=s.op1;if(s.operator==="Wildcard")return`_${o}`;if(s.operator==="WildcardSequence")return`__${o}`;if(s.operator==="WildcardOptionalSequence")return`___${o}`}return s.operator==="Wildcard"?"_":s.operator==="WildcardSequence"?"__":s.operator==="WildcardOptionalSequence"?"___":null}var Yw=class cS extends J6{constructor(o,c,m){super(o,m?.metadata),this.input=c,this.options=m;let A=Qw(o,"List",c.ops,c.shape,c.dtype);if(!A)throw new Error("Invalid tensor");this._tensor=N5(o,A)}_tensor;_expression;get structural(){return this._expression??=this._tensor.expression,this._expression}get tensor(){return this._tensor}get baseDefinition(){return this.structural.baseDefinition}get operatorDefinition(){return this.structural.operatorDefinition}get hash(){return B7("BoxedTensor")}get canonical(){return this}get isCanonical(){return this._tensor?!0:this._expression.isCanonical}get isPure(){return this._tensor?!0:this.structural.isPure}get isValid(){return this._tensor?!0:this.structural.isValid}get complexity(){return 97}get operator(){return"List"}get nops(){return this._tensor?this._tensor.shape[0]:this.structural.nops}get ops(){return this.structural.ops}get op1(){if(this._tensor){let o=this._tensor.data;return o.length===0?this.engine.Nothing:this.engine.box(o[0])}return this.structural.op1}get op2(){if(this._tensor){let o=this._tensor.data;return o.length<2?this.engine.Nothing:this.engine.box(o[1])}return this.structural.op2}get op3(){if(this._tensor){let o=this._tensor.data;return o.length<3?this.engine.Nothing:this.engine.box(o[2])}return this.structural.op3}neg(){return this.structural.neg()}inv(){return this.engine.One.div(this.structural)}abs(){return this.structural.abs()}add(o){return this.structural.add(o)}sub(o){return this.structural.sub(o)}mul(o){return this.structural.mul(o)}div(o){return this.structural.div(o)}pow(o){return this.structural.pow(o)}root(o){return this.structural.root(o)}sqrt(){return this.structural.sqrt()}get shape(){return this.tensor.shape}get rank(){try{return this.tensor.rank}catch{}return 0}get type(){return new I4(this.isValid?R4("list<number>"):"error")}get json(){return this.structural.json}isEqual(o){return this===o?!0:o instanceof cS?this.tensor.equals(o.tensor):this.structural.isEqual(o)}get isCollection(){return!0}get isIndexedCollection(){return!0}xcontains(o){return["float64","float32","int32","uint8"].includes(this.tensor.dtype)?this.tensor.data.includes(o.re):this.tensor.data.some(c=>o.isSame(this.tensor.field.cast(c,"expression")??o.engine.Nothing))}get xsize(){return this.tensor.shape.reduce((o,c)=>o*c,1)}each(){let o=this.tensor.shape,c=this.tensor.rank;if(c===0)return function*(A){yield A}(this);let m=o[0];return c===1?function*(A){for(let ae=1;ae<=m;ae+=1){let qe=A.tensor.data,So=ae-1;So>=0&&So<qe.length&&(yield A.engine.box(qe[So]))}}(this):function*(A){for(let ae=1;ae<=m;ae+=1){let qe=A.tensor.slice(ae-1);yield new cS(A.engine,{ops:qe.expression.ops,shape:qe.shape,dtype:qe.dtype})}}(this)}at(o){let c=this.tensor.slice(o);if(c.rank===0)return this.engine.box(c.data[0]);if(c.rank===1)return this.engine.box(c.data[0]);if(c.rank>1)return new cS(this.engine,{ops:c.expression.ops,shape:c.shape,dtype:c.dtype})}match(o,c){return V7(o)||(o=this.engine.box(o,{canonical:!1})),iy(o)?{[z7(o)]:this}:this.structural.match(o,c)}evaluate(o){return this._tensor&&this._tensor.dtype!=="expression"?this:this.structural.evaluate(o)}simplify(o){return this._tensor&&this._tensor.dtype!=="expression"?this:this.structural.simplify(o)}N(){return this._tensor&&this._tensor.dtype!=="expression"?this:this.structural.N()}};function D5(s){return s instanceof Yw}function _9(s,o){let c,m=[],A=!0,ae=(qe,So=0)=>{if(!A)return;let Hc=qe.length;if(Hc===0)return;if(m[So]===void 0)m[So]=Hc;else if(m[So]!==Hc){A=!1;return}let mf=0;for(let M1 of qe)M1.operator===s&&mf++;let p1=Hc-mf;if(mf>0&&p1>0){A=!1;return}if(mf===Hc){for(let M1 of qe)if(ae(M1.ops,So+1),!A)return}else for(let M1 of qe)c=Xw(c,TS(M1))};return ae(o),A?{shape:m,dtype:c}:void 0}function Qw(s,o,c,m,A){let ae=!0,qe=[],So=Gw(s,"expression"),Hc=So.cast.bind(So),mf=(p1,M1=0)=>{if(p1.length!==0){if(m[M1]===void 0)m[M1]=p1.length;else if(m[M1]!==p1.length){ae=!1;return}for(let R1 of p1){if(!ae)return;if(R1.operator===o)mf(R1.ops,M1+1);else{let G1=Hc(R1,A);if(G1===void 0){ae=!1;return}qe.push(G1)}}}};if(mf(c),!!ae)return{shape:m,rank:m.length,data:qe,dtype:A}}var o_=[{Matrix:{complexity:9e3,lazy:!0,signature:"(matrix, string?, string?) -> matrix",type:([s])=>s.type,canonical:Ax,evaluate:(s,o)=>s[0].evaluate(o)},Vector:{complexity:9e3,lazy:!0,signature:"(number+) -> vector",type:s=>R4(`vector<${s.length}>`,s[0].engine._typeResolver),canonical:(s,{engine:o})=>o._fn("Matrix",[o.function("List",s.map(c=>o.function("List",[c])))])}},{Shape:{complexity:8200,signature:"(value) -> tuple",evaluate:([s],{engine:o})=>o.tuple(...s.shape)},Rank:{description:"The length of the shape of the expression. Note this is not the matrix rank (the number of linearly independent rows or columns in the matrix)",complexity:8200,signature:"(value) -> number",sgn:()=>"positive",evaluate:([s],{engine:o})=>o.number(s.rank)},Reshape:{complexity:8200,signature:"(list<number>, tuple) -> value",type:([s,o])=>{if(!s.type.matches("list"))return"nothing";let c=s.type.type;return X2(c.elements,"number")?R4(`list<number^${o.ops.map(m=>m.toString()).join("x")}>`):"nothing"},evaluate:(s,{engine:o})=>{let c=s[0],m=s[1].ops?.map(A=>A.re)??[];if(!D5(c)&&o5(c)&&(c=o.function("List",[...c.each()])),D5(c))return m.join("x")===c.shape.join("x")?c:c.tensor.reshape(...m).expression}},Flatten:{complexity:8200,signature:"(value) -> list",evaluate:(s,{engine:o})=>{let c=s[0];if(D5(c))return o.box(["List",...c.tensor.flatten().map(m=>o.box(m))]);if(o5(c))return o.function("List",[...c.each()])}},Transpose:{complexity:8200,signature:"(matrix|vector, axis1: integer?, axis2: integer?) -> matrix",evaluate:(s,{engine:o})=>{let c=s[0],m=1,A=2;if(s.length===3&&(m=s[1].re,A=s[2].re,m>0&&A>0),m!==A&&(!D5(c)&&o5(c)&&(c=o.function("List",[...c.each()])),D5(c)))return m===1&&A===2?c.tensor.transpose()?.expression:c.tensor.transpose(m,A)?.expression}},ConjugateTranspose:{complexity:8200,signature:"(tensor, axis1: integer?, axis2: integer?) -> matrix",evaluate:s=>{let o=s[0],c=1,m=2;if(s.length===3&&(c=s[1].re,m=s[2].re,c>0&&m>0),c!==m&&D5(o))return o.tensor.conjugateTranspose(c,m)?.expression}},Determinant:{complexity:8200,signature:"(matrix) -> number",evaluate:s=>{let o=s[0];if(D5(o))return o.tensor.determinant()}},Inverse:{complexity:8200,signature:"(matrix) -> matrix",type:([s])=>s.type,evaluate:([s])=>{if(D5(s))return s.tensor.inverse()?.expression}},PseudoInverse:{complexity:8200,signature:"(matrix) -> matrix",evaluate:([s])=>{if(D5(s))return s.tensor.pseudoInverse()?.expression}},AdjugateMatrix:{complexity:8200,signature:"(matrix) -> matrix",evaluate:s=>{let o=s[0];if(D5(o))return o.tensor.adjugateMatrix()?.expression}},Trace:{complexity:8200,signature:"(matrix) -> number",evaluate:s=>{let o=s[0];if(D5(o))return o.tensor.trace()}}}];function Ax(s,{engine:o}){let c="Matrix";if(s.length===0)return o._fn(c,[]);let m=s[0].operator==="Vector"?s[0].canonical.ops[0]:s[0].canonical,A=s[1]?.canonical,ae=s[2]?.canonical;return s.length>3?o._fn(c,zv(o,s,3)):ae?o._fn(c,[m,A,ae]):A?o._fn(c,[m,A]):o._fn(c,[m])}var Cx={True:{wikidata:"Q16751793",type:"boolean",isConstant:!0},False:{wikidata:"Q5432619",type:"boolean",isConstant:!0},And:{wikidata:"Q191081",broadcastable:!0,associative:!0,commutative:!0,idempotent:!0,complexity:1e4,signature:"(boolean+) -> boolean",evaluate:x9},Or:{wikidata:"Q1651704",broadcastable:!0,associative:!0,commutative:!0,idempotent:!0,complexity:1e4,signature:"(boolean+) -> boolean",evaluate:Mx},Not:{wikidata:"Q190558",broadcastable:!0,involution:!0,complexity:10100,signature:"(boolean) -> boolean",evaluate:kx},Equivalent:{wikidata:"Q220433",broadcastable:!0,complexity:10200,signature:"(boolean, boolean) -> boolean",canonical:(s,{engine:o})=>{let c=s[0].symbol,m=s[1].symbol;return c==="True"&&m==="True"||c==="False"&&m==="False"?o.True:c==="True"&&m==="False"||c==="False"&&m==="True"?o.False:o._fn("Equivalent",s)},evaluate:Jw},Implies:{wikidata:"Q7881229",broadcastable:!0,complexity:10200,signature:"(boolean, boolean) -> boolean",evaluate:Rx},Exists:{signature:"function",lazy:!0},NotExists:{signature:"function",lazy:!0},ExistsUnique:{signature:"function",lazy:!0},ForAll:{signature:"function",lazy:!0},NotForAll:{signature:"function",lazy:!0},KroneckerDelta:{description:"Return 1 if the arguments are equal, 0 otherwise",signature:"(value+) -> integer",evaluate:(s,{engine:o})=>{if(s.length===1)return s[0].symbol==="True"?o.One:o.Zero;if(s.length===2)return s[0].isEqual(s[1])?o.One:o.Zero;for(let c=1;c<s.length;c++)if(!s[c].isEqual(s[0]))return o.Zero;return o.One}},Boole:{description:"Return 1 if the argument is true, 0 otherwise. Also known as the Iverson bracket",signature:"(boolean) -> integer",evaluate:(s,{engine:o})=>s[0].symbol==="True"?o.One:o.Zero}};function x9(s,{engine:o}){if(s.length===0)return o.True;let c=[];for(let m of s){if(m.symbol==="False")return o.False;if(m.symbol!=="True"){let A=!1;for(let ae of c)if(ae.isSame(m))A=!0;else if(m.operator==="Not"&&m.op1.isSame(ae)||ae.operator==="Not"&&ae.op1.isSame(m))return o.False;A||c.push(m)}}return c.length===0?o.True:c.length===1?c[0]:o._fn("And",c)}function Mx(s,{engine:o}){if(s.length===0)return o.True;let c=[];for(let m of s){if(m.symbol==="True")return o.True;if(m.symbol!=="False"){let A=!1;for(let ae of c)if(ae.isSame(m))A=!0;else if(m.operator==="Not"&&m.op1.isSame(ae)||ae.operator==="Not"&&ae.op1.isSame(m))return o.True;A||c.push(m)}}return c.length===0?o.False:c.length===1?c[0]:o._fn("Or",c)}function kx(s,{engine:o}){let c=s[0]?.symbol;if(c==="True")return o.False;if(c==="False")return o.True}function Jw(s,{engine:o}){let c=s[0].symbol,m=s[1].symbol;if(c==="True"&&m==="True"||c==="False"&&m==="False")return o.True;if(c==="True"&&m==="False"||c==="False"&&m==="True")return o.False}function Rx(s,{engine:o}){let c=s[0].symbol,m=s[1].symbol;if(c==="True"&&m==="True"||c==="False"&&m==="False"||c==="False"&&m==="True")return o.True;if(c==="True"&&m==="False")return o.False}function w9(s){let o={And:x9,Or:Mx,Not:kx,Equivalent:Jw,Implies:Rx}[s.operator]?.(s.engine,s.ops);if(o)return{value:o,because:"logic"}}var RS=[{Totient:{wikidata:"Q190026",description:"Eulers totient function (n): count of positive integers  n that are coprime to n.",signature:"(integer) -> integer",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null||c<1)return;let m=1n;for(let A=2n;A<c;A++)u8(A,c)===1n&&m++;return o.number(m)}},Sigma0:{description:"Number of positive divisors of n.",signature:"(integer) -> integer",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null||c<1)return;let m=0;for(let A=1n;A<=c;A++)c%A===0n&&m++;return o.number(m)}},Sigma1:{description:"Sum of positive divisors of n.",signature:"(integer) -> integer",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null||c<1)return;let m=o.bignum(0);for(let A=1n;A<=c;A++)c%A===0n&&(m=m.add(o.bignum(A)));return o.number(m)}},SigmaMinus1:{description:"Sum of reciprocals of positive divisors of n.",signature:"(integer) -> number",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null||c<1)return;let m=o.bignum(0);for(let A=1n;A<=c;A++)c%A===0n&&(m=m.add(o.bignum(1).div(o.bignum(A))));return o.number(m)}},IsPerfect:{wikidata:"Q170043",description:'Returns "True" if n is a perfect number, a positive integer which equals the sum of all its divisors.',signature:"(integer) -> boolean",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null||c<1)return;let m=0n;for(let A=1n;A<c;A++)c%A===0n&&(m+=A);return o.symbol(m===c?"True":"False")}},Eulerian:{description:"Eulerian number A(n, m): number of permutations of {1..n} with exactly m ascents.",signature:"(integer, integer) -> integer",evaluate:([s,o],{engine:c})=>{let m=z6(s),A=z6(o);if(m===null||A===null||m<0n||A<0n||A>=m)return;let ae=(qe,So)=>So===0n?1n:So>=qe?0n:(So+1n)*ae(qe-1n,So)+(qe-So)*ae(qe-1n,So-1n);return c.number(ae(m,A))}},Stirling:{description:"Stirling number of the second kind S(n, m): ways to partition n elements into m non-empty subsets.",signature:"(integer, integer) -> integer",evaluate:([s,o],{engine:c})=>{let m=z6(s),A=z6(o);if(m===null||A===null||m<0n||A<0n||A>m)return;let ae=(qe,So)=>qe===0n&&So===0n?1n:qe===0n||So===0n?0n:ae(qe-1n,So-1n)+So*ae(qe-1n,So);return c.number(ae(m,A))}},NPartition:{description:"Number of integer partitions of n.",signature:"(integer) -> integer",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null||c<0n)return;let m=new Map,A=ae=>{if(ae===0n)return 1n;if(ae<0n)return 0n;if(m.has(ae))return m.get(ae);let qe=0n;for(let So=1n;;So++){let Hc=So*(3n*So-1n)/2n,mf=So*(3n*So+1n)/2n;if(Hc>ae&&mf>ae)break;let p1=So%2n===0n?-1n:1n;qe+=p1*(A(ae-Hc)+A(ae-mf))}return m.set(ae,qe),qe};return o.number(A(c))}},IsTriangular:{description:"True if n is a triangular number.",signature:"(integer) -> boolean",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null||c<1n)return o.False;let m=8n*c+1n,A=BigInt(O4.sqrt(o.bignum(m)).toFixed(0));return o.symbol(A*A===m&&(A-1n)%2n===0n?"True":"False")}},IsSquare:{description:"True if n is a perfect square.",signature:"(integer) -> boolean",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null||c<0n)return o.False;let m=BigInt(O4.sqrt(o.bignum(c)).toFixed(0));return o.symbol(m*m===c?"True":"False")}},IsOctahedral:{description:"True if n is an octahedral number.",signature:"(integer) -> boolean",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null||c<1n)return o.False;let m=3n*c+1n,A=BigInt(O4.sqrt(o.bignum(m)).toFixed(0));return o.symbol(A*A===m?"True":"False")}},IsCenteredSquare:{description:"True if n is a centered square number.",signature:"(integer) -> boolean",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null||c<1n||(c-1n)%4n!==0n)return o.False;let m=(c-1n)/4n,A=BigInt(O4.sqrt(o.bignum(m)).toFixed(0));return o.symbol(A*A*4n+1n===c?"True":"False")}},IsHappy:{wikidata:"Q44535",description:"True if n is a happy number, a number which eventually reaches 1 when the number is replaced by the sum of the square of each digit",signature:"(integer) -> boolean",evaluate:([s],{engine:o})=>{let c=new Set,m=z6(s);if(m===null)return o.False;for(;!c.has(m);){if(m===1n)return o.True;c.add(m),m=PS(m)}return o.False}},IsAbundant:{description:"True if n is an abundant number (sum of divisors > 2n).",signature:"(integer) -> boolean",evaluate:([s],{engine:o})=>{let c=z6(s);if(c===null||c<1n)return o.False;let m=1n;for(let A=2n;A*A<=c;A++)if(c%A===0n){m+=A;let ae=c/A;ae!==A&&(m+=ae)}return o.symbol(m>c?"True":"False")}}}];function PS(s){return s.toString().split("").map(o=>BigInt(o)).reduce((o,c)=>o+c*c,0n)}function l_(s){let o=s.engine,c=s.operator;if(Zv(c))return o.function(c,s.ops.map(l_));if(c==="Divide")return s.ops[0].div(s.ops[1]);if(c==="Negate")return l_(s.ops[0]).neg();if(c==="Add"){let[m,A]=s.ops.reduce((ae,qe)=>(qe.operator==="Divide"?(ae[0].push(qe.ops[0]),ae[1].push(qe.ops[1])):ae[0].push(qe),ae),[[],[]]);return q3(...m).div(q3(...A))}return s}function o7(s){let o=s.operator;if(Zv(o)){let c=I5.from(s.op1),m=I5.from(s.op2),[A,ae]=Gb(c,m),qe=A.sgn()===-1;return A.isOne||(c.div(A),m.div(A)),ae.is(1)||(ae.isPositive?(c.div(ae),m.div(ae)):ae.isNegative&&(c.div(ae.neg()),m.div(ae.neg()),qe=!qe)),qe&&([c,m]=[m,c]),s.engine.function(o,[c.asExpression(),m.asExpression()])}if(o==="Negate")return o7(s.ops[0]).neg();if(o==="Add"){let c=s.engine,m,A=[];for(let qe of s.ops){let[So,Hc]=qe.toNumericValue();m=m?m.gcd(So):So,So.isZero||A.push({coeff:So,term:Hc})}if(!m||m.isOne)return s;let ae=A.map(({coeff:qe,term:So})=>Y5(So,c.box(qe.div(m))));return Y5(c.number(m),q3(...ae))}return I5.from(l_(s)).asExpression()}function F8(s,o,c,m){let A=s.engine;return s.operator===c?A.box([m,...s.ops.map(ae=>F8(ae,o,c,m))]):o.operator===c?A.box([m,...o.ops.map(ae=>F8(s,ae,c,m))]):A.box([m,s,o])}function Px(s,o="Add",c="Multiply"){if(s.operator!==c)return s;let m=s.ops;return!m||m.length<2?s:s.engine.box([o,m.slice(1).reduce((A,ae)=>F8(A,ae,o,c),m[0])])}var IS=[{Expand:{description:"Expand out products and positive integer powers",lazy:!0,signature:"(value)-> value",evaluate:([s])=>Av(s.canonical)??s.canonical},ExpandAll:{description:"Recursively expand out products and positive integer powers",lazy:!0,signature:"(value)-> value",evaluate:([s])=>m9(s.canonical)??s.canonical},Factor:{description:"Factors an algebraic expression into a product of irreducible factors",lazy:!0,signature:"(value)-> value",evaluate:([s])=>o7(s.canonical)??s.canonical},Together:{description:"Combine rational expressions into a single fraction",lazy:!0,signature:"(value)-> value",evaluate:([s])=>l_(s.canonical)},Distribute:{description:"Distribute multiplication over addition",lazy:!0,signature:"(value)-> value",evaluate:([s])=>s&&Px(s.canonical)}}],S9={Congruent:{description:"Indicate that two expressions are congruent modulo a number",complexity:11e3,signature:"(number, number, modulo: integer) -> boolean",evaluate:(s,{engine:o})=>{if(s.length<3)return;let[c,m,A]=s,ae=c.value,qe=m.value,So=A.value;if(typeof ae=="number"&&typeof qe=="number"&&typeof So=="number")return ae%So===qe%So?o.True:o.False}},IsSame:{description:"Compare two expressions for structural equality",lazy:!0,signature:"(any, any) -> boolean",evaluate:(s,{engine:o})=>{if(s.length!==2)return;let[c,m]=s;return c.isSame(m)?o.True:o.False}},Equal:{complexity:11e3,signature:"(any, any) -> boolean",lazy:!0,canonical:(s,{engine:o})=>T6(o,"Equal",s),eq:(s,o)=>s.operator!==o.operator?!1:s.op1.sub(s.op2).N().isEqual(o.op1.sub(o.op2).N()),evaluate:(s,{engine:o})=>{if(s.length<2)return o.True;let c;for(let m of s)if(!c)c=m;else if(I_(c,m)!==!0)return o.False;return o.True}},NotEqual:{wikidata:"Q28113351",complexity:11e3,signature:"(any, any) -> boolean",canonical:(s,{engine:o})=>T6(o,"NotEqual",s),eq:(s,o)=>s.operator!==o.operator?!1:!!(s.op1.isEqual(o.op1)&&s.op2.isEqual(o.op2)||s.op1.isEqual(o.op2)&&s.op2.isEqual(o.op1)),evaluate:(s,{engine:o})=>{if(s.length<2)return o.False;let c;for(let m of s)if(!c)c=m;else if(c.isEqual(m)===!0)return o.False;return o.True}},Less:{complexity:11e3,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>T6(o,"Less",s),eq:(s,o)=>Ix(s,o,"Greater"),evaluate:(s,{engine:o})=>{if(s.length===2){let[m,A]=s,ae=m.isLess(A);return ae===void 0?void 0:ae?o.True:o.False}if(s.length<2)return o.True;let c;for(let m of s)if(!c)c=m;else{let A=m.isLess(c);if(A===void 0)return;if(A===!1)return o.False;c=m}return o.True}},NotLess:{complexity:11e3,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>o._fn("Not",[T6(o,"Less",s)])},Greater:{complexity:11e3,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>T6(o,"Less",[...s].reverse())},NotGreater:{complexity:11e3,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>o._fn("Not",[o._fn("Greater",s)])},LessEqual:{complexity:11e3,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>T6(o,"LessEqual",s),eq:(s,o)=>Ix(s,o,"LessGreater"),evaluate:(s,{engine:o})=>{if(s.length===2){let[m,A]=s,ae=m.isLessEqual(A);return ae===void 0?void 0:ae?o.True:o.False}if(s.length<2)return o.True;let c;for(let m of s)if(!c)c=m;else{let A=m.isLessEqual(c);if(A===void 0)return;if(A===!1)return o.False;c=m}return o.True}},NotLessNotEqual:{complexity:11e3,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>o._fn("Not",[T6(o,"LessEqual",s)])},GreaterEqual:{complexity:11e3,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>T6(o,"LessEqual",[...s].reverse())},NotGreaterNotEqual:{complexity:11e3,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>o._fn("Not",[T6(o,"GreaterEqual",s)])},TildeFullEqual:{description:"Indicate isomorphism, congruence and homotopic equivalence",signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>T6(o,"TildeFullEqual",s)},NotTildeFullEqual:{complexity:11100,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>o._fn("Not",[T6(o,"TildeFullEqual",s)])},TildeEqual:{description:"Approximately or asymptotically equal",complexity:11e3,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>T6(o,"TildeEqual",s)},NotTildeEqual:{complexity:11100,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>o._fn("Not",[T6(o,"TildeEqual",s)])},Approx:{complexity:11100,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>T6(o,"Approx",s)},NotApprox:{complexity:11100,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>o._fn("Not",[T6(o,"Approx",s)])},ApproxEqual:{complexity:11100,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>T6(o,"ApproxEqual",s)},NotApproxEqual:{complexity:11100,canonical:(s,{engine:o})=>o._fn("Not",[T6(o,"ApproxEqual",s)])},ApproxNotEqual:{complexity:11100,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>T6(o,"ApproxNotEqual",s)},NotApproxNotEqual:{complexity:11100,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>o._fn("Not",[T6(o,"ApproxNotEqual",s)])},Precedes:{complexity:11100,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>T6(o,"Precedes",s)},NotPrecedes:{complexity:11100,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>o._fn("Not",[T6(o,"Precedes",s)])},Succeeds:{signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>T6(o,"Succeeds",s)},NotSucceeds:{complexity:11100,signature:"(any, any+) -> boolean",canonical:(s,{engine:o})=>o._fn("Not",[T6(o,"Succeeds",s)])}};function T6(s,o,c){c=$6(c,o);let m=[],A=[];for(let ae of c)Zv(ae.operator)?(m.push(ae),A.push(ae.ops[ae.ops.length-1])):A.push(ae);return m.length===0?s._fn(o,A):s._fn("And",[s._fn(o,A),...m])}function Ix(s,o,c){return s.operator===o.operator?s.nops!==o.nops?!1:s.ops.every((m,A)=>m.isEqual(o.ops[A])):o.operator===c?s.nops!==o.nops?!1:s.ops.every((m,A)=>m.isEqual(o.ops[o.nops-1-A])):!1}var eS={EmptySet:{type:"set",isConstant:!0,wikidata:"Q226183",description:"The empty set, a set containing no elements.",eq:s=>s.type.matches("set")&&s.xsize===0,collection:{iterator:()=>({next:()=>({value:void 0,done:!0})}),count:()=>0,isEmpty:()=>!0,isFinite:()=>!0,contains:()=>!1,subsetOf:()=>!0,eltsgn:()=>{},elttype:()=>"never"}},Numbers:{type:"set<number>",isConstant:!0,description:"The set of all numbers.",collection:{iterator:Dx,count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,contains:(s,o)=>o.type.matches("number"),subsetOf:(s,o,c)=>o.operator==="Range"||o.operator==="Linspace"?!0:o.type.matches(I4.setNumber)&&(!c||o.symbol!=="Numbers"),eltsgn:()=>"unsigned",elttype:()=>"number"}},ComplexNumbers:{type:"set<finite_complex>",isConstant:!0,description:"The set of all finite complex numbers.",collection:{iterator:Dx,count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,contains:(s,o)=>o.type.matches("finite_complex"),subsetOf:(s,o,c)=>o.operator==="Range"||o.operator==="Linspace"?!0:o.type.matches(I4.setComplex)&&(!c||o.symbol!=="ComplexNumbers"),eltsgn:()=>"unsigned",elttype:()=>"finite_complex"}},ExtendedComplexNumbers:{type:"set<complex>",isConstant:!0,description:"The set of all complex numbers, including infinities.",collection:{iterator:Dx,count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,contains:(s,o)=>o.type.matches("complex"),subsetOf:(s,o,c)=>o.operator==="Range"||o.operator==="Linspace"?!0:o.type.matches(I4.setComplex)&&(!c||o.symbol!=="ComplexNumbers"),eltsgn:()=>"unsigned",elttype:()=>"complex"}},ImaginaryNumbers:{type:"set<imaginary>",isConstant:!0,description:"The set of all imaginary numbers.",collection:{iterator:u_,count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,contains:(s,o)=>o.type.matches(I4.setImaginary),subsetOf:(s,o,c)=>o.type.matches(I4.setImaginary)&&(!c||o.symbol!=="ImaginaryNumbers"),eltsgn:()=>"unsigned",elttype:()=>"imaginary"}},RealNumbers:{type:"set<finite_real>",isConstant:!0,description:"The set of all finite real numbers.",collection:{iterator:s=>u7(s),contains:(s,o)=>o.type.matches("finite_real"),count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,subsetOf:(s,o,c)=>o.type.matches(I4.setReal)&&(!c||o.symbol!=="RealNumbers"),eltsgn:()=>{},elttype:()=>"finite_real"}},ExtendedRealNumbers:{type:"set<real>",isConstant:!0,description:"The set of all real numbers, including infinities.",collection:{iterator:s=>u7(s),contains:(s,o)=>o.type.matches("real"),count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,subsetOf:(s,o,c)=>o.type.matches(I4.setReal)&&(!c||o.symbol!=="ExtendedRealNumbers"),eltsgn:()=>{},elttype:()=>"real"}},Integers:{type:"set<finite_integer>",isConstant:!0,description:"The set of all finite integers.",collection:{iterator:c_,contains:(s,o)=>o.type.matches("finite_integer"),count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,subsetOf:(s,o,c)=>o.operator==="Range"?!0:o.type.matches(I4.setFiniteInteger)&&(!c||o.symbol!=="Integers"),eltsgn:()=>{},elttype:()=>"finite_integer"}},ExtendedIntegers:{type:"set<integer>",isConstant:!0,description:"The set of all integers, including infinities.",collection:{iterator:c_,contains:(s,o)=>o.type.matches("integer"),count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,subsetOf:(s,o,c)=>o.operator==="Range"?!0:o.type.matches(I4.setInteger)&&(!c||o.symbol!=="ExtendedIntegers"),eltsgn:()=>{},elttype:()=>"integer"}},RationalNumbers:{type:"set<finite_rational>",isConstant:!0,description:"The set of all finite rational numbers.",collection:{iterator:s=>u7(s),count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,contains:(s,o)=>o.type.matches("finite_rational"),subsetOf:(s,o,c)=>o.type.matches(I4.setRational)&&(!c||o.symbol!=="RationalNumbers"),eltsgn:()=>{},elttype:()=>"finite_rational"}},ExtendedRationalNumbers:{type:"set<rational>",isConstant:!0,description:"The set of all rational numbers, including infinities.",collection:{iterator:s=>u7(s),contains:(s,o)=>o.type.matches("rational"),count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,subsetOf:(s,o,c)=>o.type.matches(I4.setRational)&&(!c||o.symbol!=="ExtendedRationalNumbers"),eltsgn:()=>{},elttype:()=>"rational"}},NegativeNumbers:{type:"set<real>",isConstant:!0,description:"The set of all negative real numbers.",collection:{iterator:s=>u7(s,{sign:"-",includeZero:!1}),count:()=>1/0,contains:(s,o)=>o.type.matches("real")&&o.isNegative===!0,subsetOf:(s,o,c)=>{if(o.operator==="Range"||o.operator==="Linspace"){let m=o.ops[0].re,A=o.ops[1].re;return m<0&&A<0}return o.type.matches(I4.setReal)&&o.baseDefinition?.collection?.eltsgn?.(o)==="negative"&&(!c||o.symbol!=="NegativeNumbers")},eltsgn:()=>"negative",elttype:()=>"real"}},NonPositiveNumbers:{type:"set<real>",isConstant:!0,description:"The set of all non-positive real numbers.",collection:{iterator:s=>u7(s,{sign:"-",includeZero:!0}),contains:(s,o)=>o.type.matches("real")&&o.isNonPositive===!0,count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,subsetOf:(s,o,c)=>{if(o.operator==="Range"||o.operator==="Linspace"){let m=o.ops[0].re,A=o.ops[1].re;return m>=0&&A>=0}return o.type.matches(I4.setReal)&&o.baseDefinition?.collection?.eltsgn?.(o)==="non-positive"&&(!c||o.symbol!=="NonPositiveNumbers")},eltsgn:()=>"non-positive",elttype:()=>"real"}},NonNegativeNumbers:{type:"set<real>",isConstant:!0,description:"The set of all non-negative real numbers.",collection:{iterator:s=>u7(s,{sign:"+",includeZero:!0}),contains:(s,o)=>o.type.matches("real")&&o.isNonNegative===!0,count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,subsetOf:(s,o,c)=>{if(o.operator==="Range"||o.operator==="Linspace"){let m=o.ops[0].re,A=o.ops[1].re;return m<=0&&A<=0}return o.type.matches(I4.setReal)&&o.baseDefinition?.collection?.eltsgn?.(o)==="non-negative"&&(!c||o.symbol!=="NonNegativeNumbers")},eltsgn:()=>"non-negative",elttype:()=>"real"}},PositiveNumbers:{type:"set<real>",isConstant:!0,description:"The set of all positive real numbers.",collection:{iterator:s=>u7(s,{sign:"+",includeZero:!1}),contains:(s,o)=>o.type.matches("real")&&o.isPositive===!0,count:()=>1/0,subsetOf:(s,o,c)=>{if(o.operator==="Range"||o.operator==="Linspace"){let m=o.ops[0].re,A=o.ops[1].re;return m>0&&A>0}return o.type.matches(I4.setReal)&&o.baseDefinition?.collection?.eltsgn?.(o)==="positive"&&(!c||o.symbol!=="PositiveNumbers")},eltsgn:()=>"positive",elttype:()=>"real"}},NegativeIntegers:{type:"set<integer>",isConstant:!0,description:"The set of all negative integers.",collection:{iterator:s=>V8(s.engine,-1,-1),contains:(s,o)=>o.type.matches("integer")&&o.isNegative===!0,count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,subsetOf:(s,o,c)=>{if(o.operator==="Range"){let m=o.ops[0].re,A=o.ops[1].re;return m<0&&A<0}return o.type.matches(I4.setInteger)&&o.baseDefinition?.collection?.eltsgn?.(o)==="negative"&&(!c||o.symbol!=="NegativeIntegers")},eltsgn:()=>"negative",elttype:()=>"integer"}},NonPositiveIntegers:{type:"set<integer>",isConstant:!0,description:"The set of all non-positive integers.",collection:{iterator:s=>V8(s.engine,0,-1),contains:(s,o)=>o.type.matches("integer")&&o.isNonPositive===!0,count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,subsetOf:(s,o,c)=>{if(o.operator==="Range"){let m=o.ops[0].re,A=o.ops[1].re;return m<=0&&A<=0}return o.type.matches(I4.setInteger)&&o.baseDefinition?.collection?.eltsgn?.(o)==="non-positive"&&(!c||o.symbol!=="NonPositiveIntegers")},eltsgn:()=>"non-positive",elttype:()=>"integer"}},NonNegativeIntegers:{type:"set<integer>",isConstant:!0,description:"The set of all non-negative integers.",collection:{iterator:s=>V8(s.engine,0,1),contains:(s,o)=>o.type.matches("integer")&&o.isNonNegative===!0,count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,subsetOf:(s,o,c)=>{if(o.operator==="Range"){let m=o.ops[0].re,A=o.ops[1].re;return m>0&&A>0}return o.type.matches(I4.setInteger)&&o.baseDefinition?.collection?.eltsgn?.(o)==="non-negative"&&(!c||o.symbol!=="NonNegativeIntegers")},eltsgn:()=>"non-negative",elttype:()=>"integer"}},PositiveIntegers:{type:"set<integer>",isConstant:!0,description:"The set of all positive integers.",collection:{iterator:s=>V8(s.engine,1,1),contains:(s,o)=>o.type.matches("integer")&&o.isPositive===!0,count:()=>1/0,isEmpty:()=>!1,isFinite:()=>!1,subsetOf:(s,o,c)=>{if(o.operator==="Range"){let m=o.ops[0].re,A=o.ops[1].re;return m>0&&A>0}return o.type.matches(I4.setInteger)&&o.baseDefinition?.collection?.eltsgn?.(o)==="positive"&&(!c||o.symbol!=="PositiveIntegers")},eltsgn:()=>"positive",elttype:()=>"integer"}},Element:{complexity:11200,signature:"(value, collection) -> boolean",description:"Test whether a value is an element of a collection.",evaluate:([s,o],{engine:c})=>{let m=o.xcontains(s);if(m===!0)return c.True;if(m===!1)return c.False}},NotElement:{complexity:11200,signature:"(value, collection) -> boolean",description:"Test whether a value is not an element of a collection.",evaluate:([s,o],{engine:c})=>{let m=o.xcontains(s);if(m===!0)return c.False;if(m===!1)return c.True}},Subset:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",description:"Test whether the first collection is a strict subset of the second.",evaluate:([s,o],{engine:c})=>{let m=l7(s,o);if(m===!0)return c.True;if(m===!1)return c.False}},SubsetEqual:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",description:"Test whether the first collection is a subset (possibly equal) of the second.",evaluate:([s,o],{engine:c})=>{let m=l7(s,o,!1);if(m===!0)return c.True;if(m===!1)return c.False}},NotSubset:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",description:"Test whether the first collection is not a strict subset of the second.",evaluate:([s,o],{engine:c})=>{let m=l7(s,o);if(m===!0)return c.False;if(m===!1)return c.True}},Superset:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",description:"Test whether the first collection is a strict superset of the second.",evaluate:([s,o],{engine:c})=>{let m=l7(o,s);if(m===!0)return c.True;if(m===!1)return c.False}},SupersetEqual:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",description:"Test whether the first collection is a superset (possibly equal) of the second.",evaluate:([s,o],{engine:c})=>{let m=l7(o,s,!0);if(m===!0)return c.True;if(m===!1)return c.False}},NotSuperset:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",description:"Test whether the first collection is not a strict superset of the second.",evaluate:([s,o],{engine:c})=>{let m=l7(o,s);if(m===!0)return c.False;if(m===!1)return c.True}},NotSupersetEqual:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",description:"Test whether the first collection is not a superset (possibly equal) of the second.",evaluate:([s,o],{engine:c})=>{let m=l7(o,s,!0);if(m===!0)return c.False;if(m===!1)return c.True}},Complement:{wikidata:"Q242767",signature:"(set+) -> set",description:"Return the elements of the first set that are not in any of the subsequent sets.",collection:{contains:(s,o)=>{let[c,...m]=s.ops;return(c.xcontains(o)??!1)&&m.every(A=>!A.xcontains(o))},count:s=>jv(s,o=>s.ops.slice(1).every(c=>!c.xcontains(o))),iterator:iS}},Intersection:{wikidata:"Q185837",signature:"(set+) -> set",description:"Return the intersection of two or more sets.",canonical:(s,{engine:o})=>s.length===0||s.length===1?o.symbol("EmptySet"):(s=hv(o,$6(s,"Intersection"),R4("(set+) -> set"))??s,o._fn("Intersection",s)),evaluate:Nx,collection:{contains:E9,count:s=>jv(s,o=>s.ops.slice(1).every(c=>c.xcontains(o))),iterator:Ox}},Union:{wikidata:"Q185359",signature:"(collection+) -> set",description:"Return the union of two or more collections as a set.",canonical:(s,{engine:o})=>s.length===0?o.symbol("EmptySet"):(s=hv(o,$6(s,"Union"),R4("(collection+) -> set"))??s,o._fn("Union",s)),evaluate:tS,collection:{contains:(s,o)=>s.ops.some(c=>c.xcontains(o)),count:s=>h7(s,(o,c)=>c.every(m=>!m.xcontains(o))),isEmpty:s=>s.ops.every(o=>o.isEmptyCollection),isFinite:s=>s.ops.every(o=>o.isFiniteCollection),iterator:h_}},SetMinus:{wikidata:"Q18192442",signature:"(set, value*) -> set",description:"Return the set difference between the first set and subsequent values.",evaluate:rS,collection:{contains:(s,o)=>{let[c,...m]=s.ops;return(c.xcontains(o)??!1)&&!m.some(A=>A.isSame(o))},count:s=>jv(s,o=>{let[c,...m]=s.ops;return!m.some(A=>A.isSame(o))}),iterator:Lx}},SymmetricDifference:{wikidata:"Q1147242",signature:"(set, set) -> set",description:"Return the symmetric difference of two sets (elements in either set but not both).",collection:{contains:(s,o)=>{let[c,m]=s.ops,A=c.xcontains(o)??!1,ae=m.xcontains(o)??!1;return A&&!ae||!A&&ae},count:s=>jv(s,o=>{let[c,m]=s.ops,A=c.xcontains(o)??!1,ae=m.xcontains(o)??!1;return A&&!ae||!A&&ae}),iterator:c7}}};function l7(s,o,c=!0){return!s.isCollection||!o.isCollection?!1:!!s.baseDefinition?.collection?.subsetOf?.(s,o,c)}function tS(s,{engine:o}){let c=s.map(A=>A.isCollection?A:o.function("Set",[A]));if(c.reduce((A,ae)=>A+(ae.xsize??0),0)>q6)return o._fn("Union",c);let m=[];for(let A of c)for(let ae of A.each())m.every(qe=>!qe.isSame(ae))&&m.push(ae);return m.length===0?o.symbol("EmptySet"):o._fn("Set",m)}function Nx(s,{engine:o}){let c=[...s[0].ops??[]];for(let m of s.slice(1))o5(m)?c=c.filter(A=>[...m.each()].some(ae=>A.isSame(ae))):c=c.filter(A=>A.isSame(m));return c.length===0?o.symbol("EmptySet"):o._fn("Set",c)}function rS(s,{engine:o}){return o.symbol("EmptySet")}function u_(s){let o=Y2();return{next:()=>{let{value:c,done:m}=o.next();if(m)return{value:void 0,done:!0};let[A,ae]=c;return{value:s.engine.number({re:0,im:A/ae}),done:!1}}}}function Dx(s){let o=S4();return{next:()=>{let{value:c,done:m}=o.next();if(m)return{value:void 0,done:!0};let[A,ae]=c;return{value:s.engine.number({re:A,im:ae}),done:!1}}}}function*u7(s,o){let c=o?.sign??"+-",m=o?.includeZero??!0,A=c==="+-"?Y2():J2();m||A.next();for(let ae of A)if(c==="+-")yield s.engine.number(ae);else{let qe=c==="-"?-1:1,[So,Hc]=ae;yield s.engine.number([qe*So,Hc])}}function*c_(s){for(let o of D2())yield s.engine.number(o)}function*V8(s,o,c){let m=o;for(;;)yield s.number(m),m+=c}function*h_(s){let o=[];for(let c of s.ops){for(let m of c.each())o.every(A=>!A.xcontains(m))&&(yield m);o.push(c)}}function*Lx(s){let[o,...c]=s.ops;for(let m of o.each())c.some(A=>A.isSame(m))||(yield m)}function*iS(s){let[o,...c]=s.ops;for(let m of o.each())c.every(A=>!A.xcontains(m))&&(yield m)}function*Ox(s){for(let o of s.ops[0].each())s.ops.slice(1).every(c=>c.xcontains(o))&&(yield o)}function*c7(s){let[o,c]=s.ops;for(let m of o.each())(c.xcontains(m)??!1)||(yield m);for(let m of c.each())(o.xcontains(m)??!1)||(yield m)}function jv(s,o){if(s.ops.some(m=>m.xsize===1/0))return 1/0;let c=0;for(let m of s.ops[0].each())o(m)&&(c+=1);return c}function h7(s,o){if(s.ops.some(A=>A.xsize===1/0))return 1/0;let c=[],m=0;for(let A of s.ops){for(let ae of A.each())o(ae,c)&&(m+=1);c.push(A)}return m}function E9(s,o){return s.ops.every(c=>c.xcontains(o)??!1)}var T9=[{Erf:{complexity:7500,signature:"(number) -> number",evaluate:(s,{engine:o})=>{let c=s[0].re;if(Number.isFinite(c))return o.number(Q9(c))}},Erfc:{complexity:7500,signature:"(number) -> number",evaluate:(s,{engine:o})=>{let c=s[0].re;if(Number.isFinite(c))return o.number(1-Q9(c))}},ErfInv:{complexity:7500,signature:"(number) -> number",evaluate:(s,{engine:o})=>{let c=s[0].re;if(Number.isFinite(c))return o.number(by(c))}}},{Mean:{complexity:1200,broadcastable:!1,signature:"((collection|number)+) -> number",description:"The most frequently occurring value in the collection.",evaluate:(s,{engine:o})=>o.number(e5(o)?dw(o.bignum.bind(o),kv(s)):Vv(Hv(s)))},Median:{complexity:1200,broadcastable:!1,signature:"((collection|number)+) -> number",description:"The most frequently occurring value in the collection.",examples:["Mode([1, 2, 2, 3])  // Returns 2"],evaluate:(s,{engine:o})=>o.number(e5(o)?ey(kv(s)):Bv(Hv(s)))},Variance:{complexity:1200,broadcastable:!1,signature:"((collection|number)+) -> number",evaluate:(s,{engine:o})=>o.number(e5(o)?pw(o.bignum.bind(o),kv(s)):s6(Hv(s)))},PopulationVariance:{complexity:1200,broadcastable:!1,signature:"((collection|number)+) -> number",evaluate:(s,{engine:o})=>o.number(e5(o)?Y_(o.bignum.bind(o),kv(s)):c9(Hv(s)))},StandardDeviation:{complexity:1200,broadcastable:!1,description:"Sample Standard Deviation of a collection of numbers.",signature:"((collection|number)+) -> number",evaluate:(s,{engine:o})=>o.number(e5(o)?pw(o.bignum.bind(o),kv(s)).sqrt():Math.sqrt(s6(Hv(s))))},PopulationStandardDeviation:{complexity:1200,broadcastable:!1,description:"Population Standard Deviation of a collection of numbers.",signature:"((collection|number)+) -> number",evaluate:(s,{engine:o})=>o.number(e5(o)?Y_(o.bignum.bind(o),kv(s)).sqrt():Math.sqrt(c9(Hv(s))))},Kurtosis:{complexity:1200,broadcastable:!1,signature:"((collection|number)+) -> number",evaluate:(s,{engine:o})=>o.number(e5(o)?mw(o.bignum.bind(o),kv(s)):J9(Hv(s)))},Skewness:{complexity:1200,broadcastable:!1,signature:"((collection|number)+) -> number",evaluate:(s,{engine:o})=>o.number(e5(o)?ty(o.bignum.bind(o),kv(s)):N7(Hv(s)))},Mode:{complexity:1200,broadcastable:!1,signature:"((collection|number)+) -> number",evaluate:(s,{engine:o})=>o.number(e5(o)?Q_(o.bignum.bind(o),kv(s)):Ib(Hv(s)))},Quartiles:{complexity:1200,broadcastable:!1,signature:"((collection|number)+) -> tuple<mid:number, lower:number, upper:number>",examples:["Quartiles([1, 2, 3, 4, 5])  // Returns (3, 2, 4)"],evaluate:(s,{engine:o})=>{let[c,m,A]=(e5(o)?J_(kv(s)):Nb(Hv(s))).map(ae=>o.number(ae));return o.tuple(c,m,A)}},InterquartileRange:{complexity:1200,broadcastable:!1,signature:"((collection|number)+) -> number",evaluate:(s,{engine:o})=>o.number(e5(o)?Fb(kv(s)):h9(Hv(s)))},Histogram:{description:"Compute a histogram of the values in a collection. Returns a list of (bin start, count) tuples.",complexity:8200,signature:"(collection, integer | list<number>) -> list<tuple<number, integer>>",examples:["Histogram([1, 2, 2, 3], 3)  // Returns [(1,1), (1.6667,2), (2.3333,1)]"],evaluate:([s,o],{engine:c})=>{if(!s.isFiniteCollection)return;let m=Array.from(s.each()).map(Hc=>Hc.re).filter(Number.isFinite);if(m.length===0)return;let A=Math.min(...m),ae=Math.max(...m),qe;if(o?.operator==="List")qe=o.ops.map(Hc=>Hc.re);else{let Hc=d3(o);if(Hc===null||Hc<=0)return;let mf=(ae-A)/Hc;qe=Array.from({length:Hc+1},(p1,M1)=>A+M1*mf)}let So=Array(qe.length-1).fill(0);for(let Hc of m)for(let mf=0;mf<qe.length-1;mf++)if(Hc>=qe[mf]&&Hc<qe[mf+1]){So[mf]++;break}return c.function("List",So.map((Hc,mf)=>c._fn("Tuple",[c.number(qe[mf]),c.number(Hc)])))}},BinCounts:{description:"Count the number of elements falling into each bin.",complexity:8200,signature:"(collection, integer | list<number>) -> list<number>",examples:["BinCounts([1, 2, 2, 3], 3)  // Returns [1, 2, 1]"],evaluate:([s,o],{engine:c})=>{if(!s.isFiniteCollection)return;let m=Array.from(s.each()).map(Hc=>Hc.re).filter(Number.isFinite);if(m.length===0)return;let A=Math.min(...m),ae=Math.max(...m),qe;if(o.isCollection)qe=[...o.each()].map(Hc=>Hc.re);else{let Hc=d3(o);if(Hc===null||Hc<=0)return;let mf=(ae-A)/Hc;qe=Array.from({length:Hc+1},(p1,M1)=>A+M1*mf)}let So=Array(qe.length-1).fill(0);for(let Hc of m)for(let mf=0;mf<qe.length-1;mf++)if(Hc>=qe[mf]&&Hc<qe[mf+1]){So[mf]++;break}return c.function("List",So.map(Hc=>c.number(Hc)))}},SlidingWindow:{description:"Return overlapping sliding windows of fixed size over the collection.",complexity:8200,signature:"(collection, integer, integer?) -> list<list>",examples:["SlidingWindow([1, 2, 3, 4], 2)  // Returns [[1,2], [2,3], [3,4]]"],evaluate:([s,o,c],{engine:m})=>{if(!s.isFiniteCollection)return;let A=d3(o),ae=c?d3(c):1;if(A===null||A<=0||ae===null||ae<=0)return;let qe=Array.from(s.each()),So=[];for(let Hc=0;Hc<=qe.length-A;Hc+=ae)So.push(m.function("List",qe.slice(Hc,Hc+A)));return m.function("List",So)}}},{Sample:{description:"Return a random sample of k elements from the collection, without replacement.",complexity:8200,signature:"(collection, integer) -> list",evaluate:([s,o],{engine:c})=>{if(!s.isFiniteCollection)return;let m=d3(o);if(m===null||m<0)return;let A=Array.from(s.each());if(m>A.length)return;for(let qe=A.length-1;qe>0;qe--){let So=Math.floor(Math.random()*(qe+1));[A[qe],A[So]]=[A[So],A[qe]]}let ae=A.slice(0,m);return c.function("List",ae)}}}];function*Oy(s){for(let o of s)o.isFiniteCollection?yield*o.each():yield o}function*Hv(s){for(let o of Oy(s))yield o.re}function*kv(s){for(let o of Oy(s))yield o.bignumRe??o.engine.bignum(o.re)}var A9={Sin:[[1,"Sin"],[1,"Cos"],[-1,"Sin"],[-1,"Cos"]],Cos:[[1,"Cos"],[-1,"Sin"],[-1,"Cos"],[1,"Sin"]],Sec:[[1,"Sec"],[-1,"Csc"],[-1,"Sec"],[1,"Csc"]],Csc:[[1,"Csc"],[1,"Sec"],[-1,"Csc"],[-1,"Sec"]],Tan:[[1,"Tan"],[-1,"Cot"],[1,"Tan"],[-1,"Cot"]],Cot:[[1,"Cot"],[-1,"Tan"],[1,"Cot"],[-1,"Tan"]]},f7=["Sqrt",2],U7=["Sqrt",3],Fy=["Sqrt",5],C9=["Sqrt",6],NS=[[[0,1],{Sin:0,Cos:1,Tan:0,Cot:"ComplexInfinity",Sec:1,Csc:"ComplexInfinity"}],[[1,12],{Sin:["Divide",["Subtract",C9,f7],4],Cos:["Divide",["Add",C9,f7],4],Tan:["Subtract",2,U7],Cot:["Add",2,U7],Sec:["Subtract",C9,f7],Csc:["Add",C9,f7]}],[[1,10],{Sin:["Divide",["Subtract",Fy,1],4],Cos:["Divide",["Sqrt",["Add",10,["Multiply",2,Fy]]],4],Tan:["Divide",["Sqrt",["Subtract",25,["Multiply",10,Fy]]],5],Cot:["Sqrt",["Add",5,["Multiply",2,Fy]]],Sec:["Divide",["Sqrt",["Subtract",50,["Multiply",10,Fy]]],5],Csc:["Add",1,Fy]}],[[1,8],{Sin:"$\\frac{\\sqrt{2-\\sqrt2}}{2}$",Cos:"$\\frac{\\sqrt {2+{\\sqrt {2}}}}{2}$",Tan:"$\\sqrt{2} - 1$",Cot:"$\\sqrt{2} + 1$",Sec:"$\\sqrt{ 4 - 2\\sqrt{2}}$",Csc:"$\\sqrt{ 4 + 2\\sqrt{2}}$"}],[[1,6],{Sin:"$\\frac{1}{2}$",Cos:"$\\frac{\\sqrt{3}}{2}$",Tan:"$\\frac{\\sqrt{3}}{3}$",Cot:"$\\sqrt{3}$",Sec:"$\\frac{2\\sqrt{3}}{3}$",Csc:2}],[[1,5],{Sin:"$\\frac{\\sqrt{10- 2\\sqrt{5}}} {4}$",Cos:"$\\frac{1+ \\sqrt{5}} {4}$",Tan:"$\\sqrt{5-2\\sqrt5}$",Cot:"$\\frac{\\sqrt{25+10\\sqrt5}} {5}$",Sec:"$\\sqrt{5} - 1$",Csc:"$\\frac{\\sqrt{50+10\\sqrt{5}}} {5}$"}],[[1,4],{Sin:["Divide",f7,2],Cos:["Divide",f7,2],Tan:1,Cot:1,Sec:f7,Csc:f7}],[[3,10],{Sin:"$\\frac{1+ \\sqrt5} {4}$",Cos:"$\\frac{\\sqrt{10- 2\\sqrt5}} {4}$",Tan:"$\\frac{\\sqrt{25+10\\sqrt5}} {5}$",Cot:"$\\sqrt{5-2\\sqrt5}$",Sec:"$\\frac{\\sqrt{50+10\\sqrt5}} {5}$",Csc:"$\\sqrt5-1$"}],[[1,3],{Sin:["Divide",U7,2],Cos:"Half",Tan:U7,Cot:["Divide",U7,3],Sec:2,Csc:["Divide",["Multiply",2,U7],3]}],[[3,8],{Sin:"$\\frac{ \\sqrt{2 + \\sqrt{2}} } {2}$",Cos:"$\\frac{ \\sqrt{2 - \\sqrt{2}} } {2}$",Tan:"$\\sqrt{2} + 1$",Cot:"$\\sqrt{2} - 1$",Sec:"$\\sqrt{ 4 + 2 \\sqrt{2} }$",Csc:"$\\sqrt{ 4 - 2 \\sqrt{2} }$"}],[[2,5],{Sin:"$\\frac{\\sqrt{10+ 2\\sqrt{5}}} {4}$",Cos:"$\\frac{\\sqrt{5}-1} {4}$",Tan:"$\\sqrt{5+2\\sqrt{5}}$",Cot:"$\\frac{\\sqrt{25-10\\sqrt{5}}} {5}$",Sec:"$1 + \\sqrt{5}$",Csc:"$\\frac{\\sqrt{50-10\\sqrt{5}}} {5}$"}],[[5,12],{Sin:"$\\frac{\\sqrt{6} + \\sqrt{2}} {4}$",Cos:"$\\frac{ \\sqrt{6} - \\sqrt{2}} {4}$",Tan:"$2+\\sqrt{3}$",Cot:"$2-\\sqrt{3}$",Sec:"$\\sqrt{6}+\\sqrt{2}$",Csc:"$\\sqrt{6} - \\sqrt{2}$"}],[[1,2],{Sin:1,Cos:0,Tan:"ComplexInfinity",Cot:0,Sec:"ComplexInfinity",Csc:1}]];function $5(s,o,c,m){let A=J3(s)?.N();if(A!==void 0)return S6(A,o,c,m)}function z5(s){if(!s)return s;let o=s.engine,c=o.angularUnit;if(c==="rad")return s;let m=s.N().re;return Number.isNaN(m)?s:c==="deg"?o.number(m*(180/Math.PI)):c==="grad"?o.number(m*(200/Math.PI)):c==="turn"?o.number(m/(2*Math.PI)):s}function M9(s,o){if(!o)return;let c=o.engine;switch(s){case"Arccos":return z5(S6(o,Math.acos,m=>m.acos(),m=>m.acos()));case"Arccot":return z5(S6(o,m=>Math.atan2(1,m),m=>e4.atan2(c._BIGNUM_ONE,m),m=>m.inverse().atan()));case"Arccsc":return z5(S6(o,m=>Math.asin(1/m),m=>c._BIGNUM_ONE.div(m).asin(),m=>m.inverse().asin()));case"Arccosh":return z5(S6(o,Math.acosh,m=>m.acosh(),m=>m.acosh()));case"Arccoth":return z5(S6(o,m=>Math.log((1+m)/(m-1))/2,m=>c._BIGNUM_ONE.add(m).div(m.sub(c._BIGNUM_ONE)).log().div(2),m=>c.complex(1).add(m).div(m.sub(1)).log().div(2)));case"Arccsch":return z5(S6(o,m=>Math.log(1/m+Math.sqrt(1/(m*m)+1)),m=>c._BIGNUM_ONE.div(m.mul(m)).add(c._BIGNUM_ONE).sqrt().add(c._BIGNUM_ONE.div(m)).log(),m=>m.mul(m).inverse().add(1).sqrt().add(m.inverse()).log()));case"Arcsec":return z5(S6(o,m=>Math.acos(1/m),m=>c._BIGNUM_ONE.div(m).acos(),m=>m.inverse().acos()));case"Arcsin":return z5(S6(o,Math.asin,m=>m.asin(),m=>m.asin()));case"Arcsech":return z5(S6(o,m=>Math.log((1+Math.sqrt(1-m*m))/m),m=>c._BIGNUM_ONE.sub(m.mul(m).add(c._BIGNUM_ONE).div(m)).log(),m=>c.complex(1).sub(m.mul(m)).add(1).div(m).log()));case"Arcsinh":return z5(S6(o,Math.asinh,m=>m.asinh(),m=>m.asinh()));case"Arctan":return z5(S6(o,Math.atan,m=>m.atan(),m=>m.atan()));case"Arctanh":return z5(S6(o,Math.atanh,m=>m.atanh(),m=>m.atanh()));case"Cos":return $5(o,Math.cos,m=>c.chop(m.cos()),m=>m.cos());case"Cosh":return $5(o,Math.cosh,m=>m.cosh(),m=>m.cosh());case"Cot":return $5(o,m=>1/Math.tan(m),m=>c._BIGNUM_ONE.div(m.tan()),m=>m.tan().inverse());case"Coth":return $5(o,m=>1/Math.tanh(m),m=>c._BIGNUM_ONE.div(m.tanh()),m=>m.tanh().inverse());case"Csc":return $5(o,m=>1/Math.sin(m),m=>c._BIGNUM_ONE.div(m.sin()),m=>m.sin().inverse());case"Csch":return $5(o,m=>1/Math.sinh(m),m=>c._BIGNUM_ONE.div(m.sinh()),m=>m.sinh().inverse());case"Sec":return $5(o,m=>1/Math.cos(m),m=>c._BIGNUM_ONE.div(m.cos()),m=>m.cos().inverse());case"Sech":return $5(o,m=>1/Math.cosh(m),m=>c._BIGNUM_ONE.div(m.cosh()),m=>m.cosh().inverse());case"Sin":return $5(o,Math.sin,m=>c.chop(m.sin()),m=>m.sin());case"Sinh":return $5(o,Math.sinh,m=>m.sinh(),m=>m.sinh());case"Tan":return $5(o,m=>{let A=Math.tan(m);return A>1e6||A<-1e6?c.ComplexInfinity:A},m=>{let A=m.tan();return A.greaterThan(1e6)||A.lessThan(-1e6)?c.ComplexInfinity:A},m=>m.tan());case"Tanh":return $5(o,Math.tanh,m=>m.tanh(),m=>m.tanh())}}function k9(s){return!!(s.startsWith("Ar")&&R9(s))}function R9(s){return{Sin:"Arcsin",Cos:"Arccos",Tan:"Arctan",Sec:"Arcsec",Csc:" Arccsc",Sinh:"Arcsinh",Cosh:"Arccosh",Tanh:"Arctanh",Sech:"Arcsech",Csch:"Arccsch",Arccosh:"Cosh",Arccos:"Cos",Arccsc:"Csc",Arccsch:"Csch",Arcsec:"Sec",Arcsin:"Sin",Arcsinh:"Sinh",Arctan:"Tan",Arctanh:"Tanh"}[s]}function B8(s,o){if(o.length!==1||!o[0].isValid)return;let c=o[0];if(c.operator==="InverseFunction")return c.op1.canonical;let m=c.symbol;if(typeof m!="string")return;let A=R9(m);return A?s.symbol(A):void 0}function Fx(s){return s!=="Cos"&&s!=="Sec"?-1:1}function DS(s,o,c,m){if(!c)return;let A=c.N().re;if(Number.isNaN(A))return;let ae=R9(o),qe=s._cache("constructible-inverse-trigonometric-values-"+o,()=>{let Hc=[];for(let[[mf,p1],M1]of m){let R1=M1[ae];if(R1===void 0)continue;let G1=R1.N().re;Number.isNaN(G1)||Hc.push([[R1,G1],[mf,p1]])}return Hc},Hc=>{for(let[[mf,p1],[M1,R1]]of Hc)mf.reset();return Hc}),So=0;A<0&&(So=Fx(ae)==-1?-1:1,A=-A,c=c.neg());for(let[[Hc,mf],[p1,M1]]of qe)if(s.chop(A-mf)===0){let R1=s.Pi.mul(p1).div(M1);return So==-1?R1=R1.neg():So==1&&(R1=s.Pi.sub(R1)),R1.evaluate()}}function P9(s,o){let[c,m]=ve(o);if(c!==void 0)return m!==void 0&&((s==="Sin"||s==="Tan")&&(m===0||m===2)||(s==="Cos"||s==="Cot")&&(m===1||m===3))?"zero":{Sin:["positive","positive","negative","negative"],Cos:["positive","negative","negative","positive"],Sec:["positive","negative","negative","positive"],Csc:["positive","positive","negative","negative"],Tan:["positive","negative","positive","negative"],Cot:["positive","negative","positive","negative"]}[s]?.[c]}function y(s){return["Sin","Cos","Tan","Csc","Sec","Cot"].includes(typeof s=="string"?s:s.operator)}function W(s,o){if(!o||!y(s))return;let c=o.engine;if(o=o.N(),o.im!==0)return;let m=o.re;if(Number.isNaN(m))return;let A=c._cache("constructible-trigonometric-values",()=>NS.map(([mf,p1])=>[mf,Object.fromEntries(Object.entries(p1).map(([M1,R1])=>[M1,(c.parse(fy(R1))??c.box(R1)).simplify()]))]),mf=>{for(let[p1,M1]of mf)for(let R1 of Object.values(M1))R1.reset();return mf});if(k9(s))return DS(c,s,o,A);let ae=c.angularUnit;ae!=="rad"&&(ae==="deg"&&(m*=Math.PI/180),ae==="grad"&&(m*=Math.PI/200),ae==="turn"&&(m*=2*Math.PI));let qe=Fx(s)==-1?Math.sign(m):1;m=Math.abs(m%(2*Math.PI));let So=Math.floor(m*2/Math.PI);m=m%(Math.PI/2);let Hc;[Hc,s]=A9[s]?.[So]??[1,s];for(let[[mf,p1],M1]of A){let R1=M1[s];if(R1&&Math.abs(m-Math.PI*mf/p1)<=1e-12)return R1.symbol==="ComplexInfinity"?R1:qe*Hc<0?R1.neg():R1}}function ve(s){if(!s.isValid||!s.isNumberLiteral)return[void 0,void 0];if(s.im!==0)return[void 0,void 0];let o=s.re;if(isNaN(o))return[void 0,void 0];let c=(o%(2*Math.PI)+2*Math.PI)%(2*Math.PI);return Math.abs(c)<1e-12?[1,0]:Math.abs(c-Math.PI/2)<1e-12?[2,1]:Math.abs(c-Math.PI)<1e-12?[3,2]:Math.abs(c-3*Math.PI/2)<1e-12?[4,3]:[Math.floor(c/(Math.PI/2))+1,void 0]}var Ge=[{Pi:{type:"finite_real",isConstant:!0,holdUntil:"N",wikidata:"Q167",value:s=>s.number(e5(s)?s._BIGNUM_PI:Math.PI)}},{Degrees:{signature:"(real) -> real",canonical:(s,{engine:o})=>{let c=o;if(c.angularUnit==="deg")return s[0];if(s.length!==1)return c._fn("Degrees",s);let m=s[0];if(m.numericValue===null||!m.isValid)return c._fn("Degrees",s);let A=m.re;if(Number.isNaN(A))return m.mul(c.Pi).div(180);if(A=A%360,A<0&&(A+=360),Number.isInteger(A)){let ae=H9([A,180]);return ae[0]===0?c.Zero:ae[0]===1&&ae[1]===1?c.Pi:ae[0]===1?c.Pi.div(ae[1]):c.number(ae).mul(c.Pi)}return c.number(A).div(180).mul(c.Pi)},evaluate:(s,o)=>o.engine.angularUnit==="deg"?s[0]:s[0].mul(o.engine.Pi.div(180)).evaluate(o)},Hypot:{broadcastable:!0,signature:"(real, real) -> real",sgn:()=>"non-negative",evaluate:([s,o],{engine:c})=>c.box(["Sqrt",["Add",["Square",s],["Square",o]]])},Sin:To("Sin",5e3)},{Arctan:{wikidata:"Q2257242",complexity:5200,broadcastable:!0,signature:"(number) -> finite_real",sgn:([s])=>P9("Arctan",s),evaluate:([s],{numericApproximation:o})=>o?M9("Arctan",s):W("Arctan",s)??M9("Arctan",s)},Arctan2:{wikidata:"Q776598",complexity:5200,broadcastable:!0,signature:"(y:number, x: number) -> real",evaluate:([s,o],{engine:c,numericApproximation:m})=>m?bv(s,o,Math.atan2,(A,ae)=>e4.atan2(A,ae)):s.isFinite===!1&&o.isFinite===!1?c.NaN:s.is(0)&&o.is(0)?c.Zero:o.isFinite===!1?o.isPositive?c.Zero:c.Pi:s.isFinite===!1?s.isPositive?c.Pi.div(2):c.Pi.div(-2):s.is(0)?o.isPositive?c.Zero:c.Pi:c.function("Arctan",[s.div(o)]).evaluate()},Cos:To("Cos",5050),Tan:To("Tan",5100)},{Arccosh:To("Arccosh",6200),Arcsin:To("Arcsin",5500),Arcsinh:To("Arcsinh",6100),Arctanh:To("Arctanh",6300),Cosh:To("Cosh",6050),Cot:To("Cot",5600),Csc:To("Csc",5600,"Cosecant"),Sec:To("Sec",5600,"Secant, inverse of cosine"),Sinh:To("Sinh",6e3),Haversine:{wikidata:"Q2528380",broadcastable:!0,signature:"(real) -> number",evaluate:([s],{engine:o})=>o.box(["Divide",["Subtract",1,["Cos",s]],2])},InverseHaversine:{broadcastable:!0,signature:"(real) -> real",evaluate:([s],{engine:o})=>o.box(["Multiply",2,["Arcsin",["Sqrt",s]]])}},{Csch:To("Csch",6200,"Hyperbolic cosecant"),Sech:To("Sech",6200,"Hyperbolic secant"),Tanh:To("Tanh",6200,"Hyperbolic tangent")},{Arccos:To("Arccos",5550),Arccot:To("Arccot",5650),Arccoth:To("Arccoth",6350),Arccsch:To("Arccsch",6250),Arcsec:To("Arcsec",5650),Arcsech:To("Arcsech",6250),Arccsc:To("Arccsc",5650),Coth:To("Coth",6300),InverseFunction:{lazy:!0,signature:"(function) -> function",canonical:(s,{engine:o})=>(s=zv(o,s,1),B8(o,s)??o._fn("InverseFunction",s)),evaluate:(s,{engine:o})=>B8(o,s)}}];function To(s,o,c){return{complexity:o,description:c,broadcastable:!0,signature:"(number) -> number",sgn:([m])=>P9(s,m),evaluate:([m],{numericApproximation:A})=>A?M9(s,m):W(s,m)??M9(s,m)}}function Mh(s){if(s==="all")return Mh(["core","control-structures","logic","collections","relop","numeric","arithmetic","trigonometry","algebra","calculus","polynomials","combinatorics","number-theory","linear-algebra","statistics","dimensions","units","physics","other"]);typeof s=="string"&&(s=[s]);let o=[];for(let c of s){let m=f1[c];if(!m)throw Error(`Unknown library category ${c}`);Array.isArray(m)?o.push(...m):o.push(m)}return Object.freeze(o)}var f1={algebra:[],arithmetic:[...fx,...ES],calculus:bx,collections:[eS,X9],combinatorics:xS,"control-structures":i_,core:Ly,dimensions:[],domains:[],"linear-algebra":o_,logic:Cx,"number-theory":RS,numeric:[],other:[],relop:S9,polynomials:IS,physics:{Mu0:{description:"Vaccum permeability",isConstant:!0,wikidata:"Q1515261",type:"real",value:125663706212e-17}},statistics:T9,trigonometry:Ge,units:[]};function S1(s){if(s=s.normalize(),z3(s))return s;throw new Error(`Invalid definition name "${s}": ${m2(s)}`)}function H1(s,o){let c=s.context.lexicalScope.bindings;s.strict;for(let[m,A]of Object.entries(o))try{if(m=S1(m),cx(A))try{if(c.has(m))throw new Error(`Duplicate operator definition: "${m}"
${JSON.stringify(c.get(m),void 0,4)}
`);c.set(m,{operator:new W9(s,m,A)})}catch(ae){console.error([`
Error in operator definition`,JSON.stringify(A,void 0,4),"",ae.message].join(`
|   `)+`
`)}else if(hx(A))try{if(c.has(m))throw new Error(`The symbol "${m}" is already defined`);c.set(m,{value:new Ry(s,m,A)})}catch(ae){console.error([`
Error in value definition of "${m}"`,"",JSON.stringify(A,void 0,4),"",ae.message].join(`
|   `))}else{let ae=new Ry(s,m,{value:s.box(A)});c.set(m,{value:ae})}}catch(ae){console.error([`
Error in definition of "${m}"`,"",JSON.stringify(A,void 0,4),"",ae.message].join(`
|   `)+`
`)}}function y2(s){return typeof s=="number"?s===0?1:Number.isInteger(s)?Math.floor(Math.log2(Math.abs(s))/Math.log2(10))+(s>0?1:2):2:s.isZero?1:s.im!==0?y2(s.re)+y2(s.im)+1:y2(s.re)}function U2(s){if(s.symbol)return 1;if(s.isNumberLiteral)return y2(s.numericValue);let o=s.operator,c=2;if(["Add"].includes(o))c=3;else if(["Subtract","Negate"].includes(o))c=4;else if(["Square","Sqrt"].includes(o))c=5;else{if(["Power","Root"].includes(o))return U2(s.ops[1]);["Multiply"].includes(o)?c=7:["Divide"].includes(o)?c=8:["Ln","Exp","Log","Lb"].includes(o)?c=9:["Cos","Sin","Tan"].includes(o)?c=10:c=11}return c+(s.ops?.reduce((m,A)=>m+U2(A),0)??0)}var Q2=U2;function d2(s){for(let[o,c]of Object.entries(s))if(o!=="x"&&o!=="_x"&&c.has("_x"))return!1;return!0}var M2=[{match:["Multiply","_x","__a"],replace:0,id:"ax",condition:d2},{match:["Add",["Divide","_a","_x"],"__b"],replace:1/0,useVariations:!0,condition:d2},{match:["Add",["Multiply","_x","__a"],"__b"],replace:["Divide",["Negate","__b"],"__a"],useVariations:!0,condition:d2},{match:["Add",["Multiply","_a",["Power","_x","_n"]],"__b"],replace:["Power",["Divide",["Negate","__b"],"_a"],["Divide",1,"_n"]],useVariations:!0,condition:s=>d2(s)&&!s._n.is(0)},{match:["Add",["Multiply","_a",["Power","_x","_n"]],"__b"],replace:["Negate",["Power",["Divide",["Negate","__b"],"_a"],["Divide",1,"_n"]]],useVariations:!0,condition:s=>d2(s)&&!s._n.is(0)&&(s._n.isEven??!1)},{match:["Add",["Multiply","__a",["Power","_x",2]],["Multiply","__b","_x"],"__c"],replace:["Divide",["Add",["Negate","__b"],["Sqrt",["Subtract",["Square","__b"],["Multiply",4,"__a","__c"]]]],["Multiply",2,"__a"]],useVariations:!0,condition:d2},{match:["Add",["Multiply","__a",["Power","_x",2]],["Multiply","__b","_x"],"__c"],replace:["Divide",["Subtract",["Negate","__b"],["Sqrt",["Subtract",["Square","__b"],["Multiply",4,"__a","__c"]]]],["Multiply",2,"__a"]],useVariations:!0,condition:d2},{id:"a^x + b = 0",match:["Add",["Power","_a","_x"],"__b"],replace:["Ln",["Negate","__b"],"_a"],useVariations:!0,onBeforeMatch:()=>{},condition:s=>d2(s)&&(s._a.isPositive??!1)&&(s.__b.isNegative??!1)},{match:["Add",["Multiply","__a",["Exp",["Multiply","__b","_x"]]],"__c"],replace:["Divide",["Ln",["Negate",["Divide","__c","__a"]]],"__b"],useVariations:!0,condition:s=>d2(s)&&((!s.__a.is(0)&&s.__c.div(s.__a).isNegative)??!1)},{match:["Add",["Multiply","__a",["Exp","_x"]],"__c"],replace:["Ln",["Negate",["Divide","__c","__a"]]],useVariations:!0,condition:s=>d2(s)&&((!s.__a.is(0)&&s.__c.div(s.__a).isNegative)??!1)&&!s.__a.has("_x")&&!s.__c.has("_x")},{match:["Add",["Exp","_x"],"__c"],replace:["Ln",["Negate","__c"]],useVariations:!0,condition:s=>d2(s)&&(s.__c.isNegative??!1)},{match:["Add",["Exp",["Multiply","__b","_x"]],"__c"],replace:["Divide",["Ln",["Negate","__c"]],"__b"],useVariations:!0,condition:s=>d2(s)&&(s.__c.isNegative??!1)},{match:["Add",["Multiply","__a",["Log","_x","__b"]],"__c"],replace:["Power","__b",["Negate",["Divide","__c","__a"]]],useVariations:!0,condition:s=>(d2(s)&&!s.__a.is(0)&&s.__b.isPositive)??!1},{match:["Multiply","__a",["Log","_x","__b"]],replace:["Power","__b",["Negate",["Divide","__c","__a"]]],useVariations:!0,condition:s=>(d2(s)&&!s.__a.is(0)&&s.__b.isPositive)??!1},{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Divide",["Subtract","__b","__c"],"__a"],condition:d2},{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Divide",["Negate",["Add","__b","__c"],"__a"]],condition:d2},{match:"ax + \\mathrm{__b} \\sqrt{cx + \\mathrm{__d}} + \\mathrm{__g}",replace:"\\frac{-(2 a g - \\mathrm{__b}^2 c) + \\sqrt{(2 a \\mathrm{__g} - \\mathrm{__b}^2 c)^2 - 4 a^2(g^2 - b^2 \\mathrm{__d})}}{2 a^2}",useVariations:!0,condition:d2},{match:"ax + \\mathrm{__b} \\sqrt{cx + \\mathrm{__d}} + \\mathrm{__g}",replace:"\\frac{-(2 a g - \\mathrm{__b}^2 c) - \\sqrt{(2 a \\mathrm{__g} - \\mathrm{__b}^2 c)^2 - 4 a^2(g^2 - b^2 \\mathrm{__d})}}{2 a^2}",useVariations:!0,condition:d2}];function n3(s,o){let c=s.engine;s.operator==="Equal"?s=s.op1.expand().sub(s.op2.expand()).simplify():s=s.expand().simplify();let m=c.getRuleSet("solve-univariate"),A=[s.subs({[o]:"_x"},{canonical:!1})];c.pushScope(),c.declare("_x","number");let ae=A.flatMap(qe=>b9(qe,m,{_x:c.symbol("_x")},{useVariations:!0,canonical:!0}));return ae.length===0&&(A=A.flatMap(qe=>X3(qe)),ae=A.flatMap(qe=>b9(qe,m,{_x:c.symbol(o)},{useVariations:!0,canonical:!0}))),ae.length===0&&(A=A.flatMap(qe=>Av(qe.canonical)).filter(qe=>qe!==null),A=A.flatMap(qe=>X3(qe)),ae=A.flatMap(qe=>b9(qe,m,{_x:c.symbol(o)},{useVariations:!0,canonical:!0}))),c.popScope(),o2(s,o,ae.map(qe=>qe.evaluate().simplify()))}var J4=[{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Add",["Multiply","__a","_x"],"__b","__c"]},{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Add",["Negate",["Multiply","__a","_x"]],["Negate","__b"],"__c"]},{match:["Multiply","__a",["Power","_b","_n"]],replace:"_b",condition:({__a:s,_b:o,_n:c})=>!s.has("_x")&&o.has("_x")&&!c.is(0)&&!c.has("_x")},{match:["Multiply","__a",["Sqrt","_b"]],replace:["Multiply",["Square","_a"],"__b"],condition:({_b:s})=>s.has("_x")},{match:["Divide","_a","_b"],replace:"_a",condition:({_a:s,_b:o})=>s.has("_x")&&!o.is(0)},{match:["Multiply","__a","_b"],replace:"_b",condition:({__a:s,_b:o})=>!s.has("_x")&&o.has("_x")},{match:["Add",["Ln","_a"],["Ln","_b"],"__c"],replace:["Add",["Ln",["Multiply","_a","_b"]],"__c"]},{match:["Multiply",["Exp","__a"],["Exp","__b"],"__c"],replace:["Multiply",["Exp",["Add","_a","_b"]],"__c"]},{match:["Ln","_a"],replace:["Subtract","_a",1],condition:({_a:s})=>s.has("_x")},{match:["Sin","_a"],replace:"_a",condition:({_a:s})=>s.has("_x")},{match:["Cos","_a"],replace:["Subtract","_a",["Divide","Pi",2]],condition:({_a:s})=>s.has("_x")},{match:["Tan","_a"],replace:"_a",condition:({_a:s})=>s.has("_x")},{match:["Add",["Sin","_a"],["Cos","_a"]],replace:1,condition:({_a:s})=>s.has("_x")},{match:["Subtract",["Square",["Sin","_a"]],["Square",["Cos","_a"]]],replace:["PlusMinus",["Sin","_a"],["Divide",["Sqrt",2],2]],condition:({_a:s})=>s.has("_x")}];function X3(s){let o=s.engine,c=o.getRuleSet("harmonization");return b9(s,c,{_x:o.symbol("_x")})}function o2(s,o,c){return c.filter(m=>{let A=s.subs({[o]:m}).canonical.evaluate();return A===null||!A.isValid||A.isNaN||A.has(o)?!1:A.isEqual(0)})}function t2(s,o){if(!s.ops)return[];let c=s.ops,m=s.operatorDefinition;if(!m||c.length===0)return c;let A=m?.associative?s.operator:"";if(c=M7(c,A),m.lazy)return c;let ae=[];for(let qe of c){let So=qe.operator;if(So==="Hold")ae.push(qe);else{let Hc=So==="ReleaseHold"?qe.op1:qe;if(Hc){let mf=o(Hc);mf!==null&&ae.push(mf)}}}return M7(ae,A)}async function g2(s,o){if(!s.ops)return[];let c=s.ops,m=s.operatorDefinition;if(!m||c.length===0)return c;let A=m?.associative?s.operator:"";if(c=M7(c,A),m.lazy)return c;let ae=[];for(let qe of c){let So=qe.operator;if(So==="Hold")ae.push(qe);else{let Hc=So==="ReleaseHold"?qe.op1:qe;if(Hc){let mf=await o(Hc);mf!==null&&ae.push(mf)}}}return M7(ae,A)}function G2(s,o,c){if((ae=>c&&c.some(qe=>qe.value.isSame(ae)))(s)||(c||(c=[{value:s,because:"initial"}]),!s.isValid))return c;if(!(s.isCanonical||s.isStructural)){let ae=s.canonical;return ae.isCanonical||ae.isStructural?G2(ae,o,c):c}let m=s.engine,A=o?.rules?m.rules(o.rules,{canonical:!0}):m.getRuleSet("standard-simplification");o={...o,rules:A};do{let ae=q4(s,A,o,c);if(ae.length<=c.length)break;s=ae.at(-1).value,c=ae}while(!c.slice(0,-1).some(ae=>ae.value.isSame(s)));return c}function k4(s,o,c){if(o==null||s===o||s.isSame(o))return!1;let m=s.engine;return c??=A=>m.costFunction(A),c(o)<=1.2*c(s)}function _3(s,o){return s.ops?s.engine.function(s.operator,t2(s,c=>G2(c,o).at(-1).value)):s}function q4(s,o,c,m){if(s.isNumberLiteral||s.string)return m;if(s.symbol){let qe=I8(s,o,{recursive:!1,canonical:!0,useVariations:!1});return qe.length>0?[...m,...qe]:m}let A=_3(s,c);A.isSame(s)||(m=[...m,{value:A,because:"simplified operands"}],s=A);let ae=r3(s,o,c,m);return ae.length>m.length?ae:m}function r3(s,o,c,m){let A=I8(s,o,{recursive:!1,canonical:!0,useVariations:c.useVariations??!1});if(A.length===0)return m;let ae=A.at(-1).value;return ae.isSame(s)||(ae=_3(ae),!k4(s,ae,c?.costFunction))?m:(A.at(-1).value=ae,[...m,...A])}function H6(s){return typeof s=="string"?s.startsWith("_"):iy(s)?!0:s.ops?H6(s.operator)||s.ops.some(H6):!1}function N3(s,o,c){return s.startsWith("_"),s==="_"||s==="__"||s==="___"?c:s in c?o.isSame(c[s])?c:null:H6(o)?null:{...c,[s]:o}}function Q5(s,o,c,m){if(iy(o))return N3(z7(o),s,c);let A=m.acceptVariants??!0;if(m={...m,acceptVariants:!0},o.numericValue!==null)return s.numericValue===null?null:o.isEqual(s)?c:A?OS(s,o,c,m):null;let ae=o.string;if(ae!==null)return s.string===ae?c:null;let qe=o.symbol;if(qe!==null)return qe===s.symbol?c:A?OS(s,o,c,m):null;if(o.ops){let So=m.useVariations??!1,Hc=s.engine,mf=null,p1=o.operator;if(p1.startsWith("_")?(mf=N3(p1,Hc.box(s.operator),c),mf!==null&&(mf=FS(s,o.ops,mf,m))):p1===s.operator&&(mf=o.operatorDefinition.commutative?HE(s,o,c,m):FS(s,o.ops,c,m)),mf===null&&So){if(!A)return null;mf=OS(s,o,c,m)}return mf!==null&&(c=mf),m.recursive&&s.ops&&(mf=LS(s,o,c,{...m,acceptVariants:A})??mf),mf}return null}function LS(s,o,c,m){s.ops;let A=null;for(let ae of s.ops){let qe=Q5(ae,o,c,m);qe!==null&&(A=qe,c=qe)}return A}function OS(s,o,c,m){if(!m.useVariations)return null;let A=s.engine,ae={...m,acceptVariants:!1},qe=(Hc,mf)=>Q5(A.function(Hc,mf,{canonical:!1}),o,c,ae),So=o.operator;if(So==="Negate"&&s.is(0))return Q5(A.Zero,o.op1,c,ae);if(So==="Add"){let Hc=qe("Add",[0,s]);if(Hc!==null||(s.operator==="Subtract"&&(Hc=qe("Add",[s.op1,["Negate",s.op2]])),Hc!==null))return Hc}if(So==="Subtract"){let Hc=qe("Subtract",[s,0]);if(Hc!==null||(s.operator==="Negate"&&(Hc=qe("Subtract",[0,s.op1])),Hc!==null))return Hc}if(So==="Multiply"){let Hc=qe("Multiply",[1,s]);if(Hc!==null||s.operator==="Negate"&&(Hc=qe("Multiply",[-1,s.op1]),Hc!==null)||s.operator==="Divide"&&(Hc=qe("Multiply",[s.op1,["Divide",1,s.op2]]),Hc!==null))return Hc}if(So==="Divide"){let Hc=qe("Divide",[s,1]);if(Hc!==null)return Hc}if(So==="Square"){let Hc=qe("Power",[s,2]);if(Hc!==null)return Hc}if(So==="Exp"){let Hc=qe("Power",[A.E,s]);if(Hc!==null)return Hc}if(So==="Power"){if(o.op2.re===2&&o.op2.im===0){let Hc=qe("Square",[s]);if(Hc!==null)return Hc}if(o.op1.symbol==="ExponentialE"){let Hc=qe("Exp",[s]);if(Hc!==null)return Hc}{let Hc=qe("Power",[s,1]);if(Hc!==null)return Hc}}return null}function HE(s,o,c,m){s.operator,o.operator;let A=G7(o.ops);for(let ae of A){let qe=FS(s,ae,c,m);if(qe!==null)return qe}return null}function FS(s,o,c,m){if(o.length===0)return s.ops&&s.ops.length===0?c:null;let A=o[0].engine,ae={...c},qe=[...s.ops],So=0;for(;So<o.length;){let Hc=o[So],mf=z7(Hc);if(mf!==null)if(mf.startsWith("__")){let p1=0;if(o[So+1]===void 0)p1=qe.length+1;else{let R1=!1;for(;!R1&&p1<qe.length;)R1=Q5(qe[p1],o[So+1],ae,m)!==null,p1+=1;if(!R1&&mf.startsWith("___"))return null}if(!mf.startsWith("___")&&p1<=1)return null;let M1;if(p1<=1)s.operator==="Add"?M1=A.Zero:s.operator==="Multiply"?M1=A.One:M1=A.Nothing;else if(p1===2){if(qe.length===0)return null;M1=qe.shift()}else{let R1=A.lookupDefinition(s.operator),G1=qe.splice(0,p1-1);R1&&E6(R1)&&R1.operator.associative?M1=A.function(s.operator,G1,{canonical:!1}):M1=A.function("Sequence",G1,{canonical:!1})}ae=N3(mf,M1,ae)}else if(mf.startsWith("_")){if(qe.length===0)return null;ae=N3(mf,qe.shift(),ae)}else ae=Q5(qe.shift(),Hc,ae,m);else{let p1=qe.shift();if(!p1)return null;ae=Q5(p1,Hc,ae,m)}if(ae===null)return null;So+=1}return qe.length>0?null:ae}function VS(s,o,c){o=o.structural;let m=c?.useVariations??!1,A={recursive:c?.recursive??!1,useVariations:m,acceptVariants:m},ae=c?.substitution??{};return Q5(s.structural,o.structural,ae,A)}function GE(s){let o=s.engine;if(s.operator==="Hold")return;let c;if(s.ops){let m=s.operatorDefinition;return m?.sgn&&(c=m.sgn(s.ops,{engine:o})),c}return s.symbol||s.isNumberLiteral?s.sgn:"unsigned"}function BS(s){if(s!==void 0){if(s==="positive")return!0;if(["non-positive","zero","negative"].includes(s))return!1}}function qS(s){if(s!==void 0){if(["positive","positive-infinity","non-negative","zero"].includes(s))return!0;if(s==="negative")return!1}}function $S(s){if(s!==void 0){if(s==="negative")return!0;if(["non-negative","zero","positive"].includes(s))return!1}}function zS(s){if(s!==void 0){if(["negative","non-positive","zero"].includes(s))return!0;if(["positive","positive-infinity"].includes(s))return!1}}function XS(s,o,c){return s.generation=o,s.value=c(),s.value}var KE=[5,5],L5=class extends J6{_operator;_ops;_def;_capturedContext;_localScope;_isPure;_isStructural;_hash;_value={value:null,generation:-1};_valueN={value:null,generation:-1};_sgn={value:null,generation:-1};_type={value:null,generation:-1};constructor(s,o,c,m){super(s,m?.metadata),this._operator=o,this._ops=c,this._localScope=m?.scope,this._isStructural=m?.structural??!1,(m?.canonical||this._isStructural)&&this.bind()}get hash(){if(this._hash!==void 0)return this._hash;let s=0;for(let o of this._ops)s=s<<1^o.hash|0;return s=s^B7(this._operator)|0,this._hash=s,s}infer(s,o){let c=this.operatorDefinition;return!c||!c.inferredSignature?!1:(c.signature.is("function")?c.signature=new I4({kind:"signature",result:s},this.engine._typeResolver):O5(c.signature.type)&&(c.signature=new I4({kind:"signature",result:o==="narrow"?m5(c.signature.type.result,s):y3(c.signature.type.result,s)},this.engine._typeResolver)),this.engine._generation+=1,!0)}bind(){this._def=D_(this._operator,this._localScope??this.engine.context.lexicalScope)}reset(){}get value(){}get isCanonical(){return this._def!==void 0&&this._def!==null}get isPure(){if(this._isPure!==void 0)return this._isPure;let s=this.operatorDefinition?.pure??!1;return s&&(s=this._ops.every(o=>o.isPure)),this._isPure=s,s}get isConstant(){return this.isPure&&this._ops.every(s=>s.isConstant)}get constantValue(){return this.isConstant?this.value:void 0}get json(){return[this._operator,...this.structural.ops.map(s=>s.json)]}get operator(){return this._operator}get ops(){return this._ops}get nops(){return this._ops.length}get op1(){return this._ops[0]??this.engine.Nothing}get op2(){return this._ops[1]??this.engine.Nothing}get op3(){return this._ops[2]??this.engine.Nothing}get isScoped(){return this._localScope!==void 0}get localScope(){return this._localScope}get isValid(){return this._operator==="Error"?!1:this._ops.every(s=>s?.isValid)}get canonical(){return this.isCanonical||!this.isValid?this:this.engine.function(this._operator,this._ops)}get structural(){if(this.isStructural)return this;let s=this.operatorDefinition;if(s?.associative||s?.commutative){let o=this.ops.map(m=>m.structural),c=[];if(!s.associative)c=o;else for(let m of o)m.operator===this.operator?c.push(...m.ops):c.push(m);return this.engine.function(this._operator,this.isValid?L6(this._operator,c):c,{canonical:!1,structural:!0})}return this.engine.function(this._operator,this.ops.map(o=>o.structural),{canonical:!1,structural:!0})}get isStructural(){return this._isStructural}toNumericValue(){this.isCanonical||this.isStructural;let s=this.engine;if(this.operator==="Complex")return[s._numericValue({re:this.op1.re,im:this.op2.re}),s.One];let o=this;if(o.operator==="Add"&&(o=o7(this),o.numericValue!==null)){if(typeof o.numericValue=="number"){if(Number.isInteger(o.numericValue))return[s._numericValue(o.numericValue),s.One]}else if(o.numericValue.isExact)return[o.numericValue,s.One]}if(o.operator==="Negate"){let[c,m]=o.op1.toNumericValue();return[c.neg(),m]}if(o.operator==="Multiply"){let c=[],m=s._numericValue(1);for(let A of o.ops){let[ae,qe]=A.toNumericValue();m=m.mul(ae),qe.is(1)||c.push(qe)}return c.length===0?[m,s.One]:c.length===1?[m,c[0]]:[m,o6(this.engine,c)]}if(o.operator==="Divide"){let[c,m]=o.op1.toNumericValue(),[A,ae]=o.op2.toNumericValue(),qe=c.div(A);return ae.is(1)?[qe,m]:[qe,s.function("Divide",[m,ae])]}if(o.operator==="Power"){if(o.op2.numericValue===null)return[s._numericValue(1),this];let[c,m]=o.op1.toNumericValue();if(c.isOne)return[c,this];let A=R6(o.op2);return A!==null?[c.pow(A),s.function("Power",[m,o.op2])]:o.op2.is(.5)?[c.sqrt(),s.function("Sqrt",[m])]:[s._numericValue(1),this]}if(o.operator==="Sqrt"){let[c,m]=o.op1.toNumericValue();return m.is(1)||m.is(0)?c.isOne||c.isZero?[c,m]:[c.sqrt(),m]:[c.sqrt(),s.function("Sqrt",[m])]}if(o.operator==="Root"){let c=o.op2.re;if(isNaN(c)||o.op2.im!==0)return[s._numericValue(1),this];let[m,A]=o.op1.toNumericValue();return c===2?[m.sqrt(),s.function("Sqrt",[A])]:[m.root(c),s.function("Root",[A,o.op2])]}if(o.operator==="Abs"){let[c,m]=o.op1.toNumericValue();return[c.abs(),s.function("Abs",[m])]}if(o.operator,o.operator,o.operator==="Log"||o.operator==="Ln"){let c=o.op2.re;isNaN(c)&&o.operator==="Log"&&(c=10);let[m,A]=o.op1.toNumericValue();return m.isOne?[m,this]:s.box(m.ln(c)).add(s.function(o.operator,[A,o.op2])).toNumericValue()}return[s._numericValue(1),o]}subs(s,o){o??={canonical:void 0},o.canonical===void 0&&(o={canonical:this.isCanonical});let c=this._ops.map(m=>m.subs(s,o));return c.every(m=>m.isValid)?this.engine.function(this._operator,c,o):this.engine.function(this._operator,c,{canonical:!1})}replace(s,o){return I8(this,s,o).at(-1)?.value??null}match(s,o){return VS(this,s,o)}has(s){if(typeof s=="string"){if(this._operator===s)return!0}else if(s.includes(this._operator))return!0;return this._ops.some(o=>o.has(s))}get sgn(){let s=this.isPure&&this._ops.every(o=>o.isConstant)?void 0:this.engine._generation;return XS(this._sgn,s,()=>{if(!(!this.isValid||this.isNumber!==!0))return GE(this)})}get isNaN(){if(!this.isNumber)return!1}get isInfinity(){if(!this.isNumber)return!1}get isFinite(){if(this.isNumber!==!0||this.isNaN||this.isInfinity)return!1;if(!(this.isNaN===void 0||this.isInfinity===void 0))return!0}get isOne(){if(this.isNonPositive===!0||this.isReal===!1)return!1}get isNegativeOne(){if(this.isNonNegative===!0||this.isReal===!1)return!1}get isPositive(){return BS(this.sgn)}get isNonNegative(){return qS(this.sgn)}get isNegative(){return $S(this.sgn)}get isNonPositive(){return zS(this.sgn)}get numerator(){return this.numeratorDenominator[0]}get denominator(){return this.numeratorDenominator[1]}get numeratorDenominator(){if(!this.isCanonical)return[this,this.engine.One];if(this.isNumber!==!0)return[this.engine.Nothing,this.engine.Nothing];let s=this.operator;if(s==="Divide")return[this.op1,this.op2];if(s==="Negate"){let[o,c]=this.op1.numeratorDenominator;return[o.neg(),c]}if(s==="Power"){let[o,c]=this.op1.numeratorDenominator;return[o.pow(this.op2),c.pow(this.op2)]}if(s==="Root"){let[o,c]=this.op1.numeratorDenominator;return[o.root(this.op2),c.root(this.op2)]}if(s==="Sqrt"){let[o,c]=this.op1.numeratorDenominator;return[o.sqrt(),c.sqrt()]}if(s==="Abs"){let[o,c]=this.op1.numeratorDenominator;return[o.abs(),c.abs()]}return s==="Multiply"?new I5(this.engine,this.ops).asNumeratorDenominator():[this,this.engine.One]}neg(){if(!this.isCanonical)throw new Error("Not canonical");return ky(this)}inv(){if(!this.isCanonical)throw new Error("Not canonical");if(this.isOne)return this;if(this.isNegativeOne)return this;if(this.operator==="Sqrt")return this.op1.inv().sqrt();if(this.operator==="Divide")return this.op2.div(this.op1);if(this.operator==="Power"){let s=this.op2.neg();return s.operator!=="Negate"?this.op1.pow(s):this.engine.function("Power",[this.op1,s])}if(this.operator==="Root"){let s=this.op2.neg();return s.operator!=="Negate"?this.op1.root(s):this.engine.function("Root",[this.op1,s])}return this.operator==="Exp"?this.engine.E.pow(this.op1.neg()):this.operator==="Rational"?this.op2.div(this.op1):this.operator==="Negate"?this.op1.inv().neg():this.engine._fn("Divide",[this.engine.One,this])}abs(){if(!this.isCanonical)throw new Error("Not canonical");return this.operator==="Abs"||this.operator==="Negate"?this:this.isNonNegative?this:this.isNonPositive?this.neg():this.engine._fn("Abs",[this])}add(s){if(s===0)return this;if(!this.isCanonical)throw new Error("Not canonical");return q3(this,this.engine.box(s))}mul(s){if(!this.isCanonical)throw new Error("Not canonical");if(s===0)return this.engine.Zero;if(s===1)return this;if(s===-1)return this.neg();if(s instanceof D6){if(s.isZero)return this.engine.Zero;if(s.isOne)return this;if(s.isNegativeOne)return this.neg()}return Y5(this,this.engine.box(s))}div(s){if(!this.isCanonical)throw new Error("Not canonical");return Hb(this,s)}pow(s){return R5(this,s,{numericApproximation:!1})}root(s){if(!this.isCanonical||typeof s!="number"&&!s.isCanonical)throw new Error("Not canonical");let o=typeof s=="number"?s:s.im===0?s.re:void 0;if(o===0)return this.engine.NaN;if(o===1)return this;if(o===-1)return this.inv();if(o===2)return this.engine.function("Sqrt",[this]);if(this.operator==="Power"&&o!==void 0){let[c,m]=this.ops;return c.pow(m.div(o))}if(this.operator==="Divide"){let[c,m]=this.ops;return c.root(s).div(m.root(s))}if(this.operator==="Negate"&&o!==void 0)return o%2===0?this.op1.root(s):this.op1.root(s).neg();if(this.operator==="Sqrt"){if(o!==void 0)return this.op1.root(o*2);if(typeof s!="number")return this.op1.root(s.mul(2))}if(this.operator==="Root"){let[c,m]=this.ops;return c.root(m.mul(s))}if(this.operator==="Multiply"){let c=this.ops.map(m=>m.root(s));return Y5(...c)}if(this.isNumberLiteral){let c=this.numericValue;if(typeof c=="number"){if(c<0)return this.engine.NaN;if(c===0)return this.engine.Zero;if(c===1)return this.engine.One;if(o!==void 0){let m=this.engine.number(Math.pow(c,1/o));if(!m.isFinite||m.isInteger)return m}}else{if(c.isOne)return this.engine.One;if(c.isZero)return this.engine.Zero;if(o!==void 0){let m=c.root(o);if(m.isExact)return this.engine.number(m)}}}return this.engine._fn("Root",[this,this.engine.box(s)])}sqrt(){return this.root(2)}ln(s){let o=s?this.engine.box(s):void 0;if(!this.isCanonical)throw new Error("Not canonical");if(this.is(0))return this.engine.NegativeInfinity;if(this.operator==="Exp")return this.op1;if(o&&this.isSame(o))return this.engine.One;if(!o&&this.isSame(this.engine.E))return this.engine.One;if(this.operator==="Power"){let[c,m]=this.ops;return c.isSame(this.engine.E)?m:m.mul(c.ln(o))}if(this.operator==="Root"){let[c,m]=this.ops;return m.div(c.ln(o))}return this.operator==="Sqrt"?this.op1.ln(o).div(2):this.operator==="Divide"?this.op1.ln(o).sub(this.op2.ln(o)):o&&o.type.matches("finite_integer")?o.re===10?this.engine._fn("Log",[this]):this.engine._fn("Log",[this,o]):this.engine._fn("Ln",[this])}get complexity(){if(this.isCanonical)return this.operatorDefinition?.complexity??Fv}get baseDefinition(){if(this._def)return E6(this._def)?this._def.operator:this._def.value}get operatorDefinition(){if(this._def)return E6(this._def)?this._def.operator:void 0}get valueDefinition(){if(this._def)return j6(this._def)?this._def.value:void 0}get isNumber(){if(!this.type.isUnknown)return X2(this.type.type,"number")}get isInteger(){if(!this.type.isUnknown)return X2(this.type.type,"integer")}get isRational(){if(!this.type.isUnknown)return X2(this.type.type,"rational")}get isReal(){if(!this.type.isUnknown)return X2(this.type.type,"real")}get isFunctionExpression(){return!0}get type(){let s=this.isPure&&this._ops.every(o=>o.isConstant)?void 0:this.engine._generation;return XS(this._type,s,()=>new I4(WE(this),this.engine._typeResolver))??I4.unknown}simplify(s){return G2(this,s).at(-1)?.value??this}evaluate(s){return XE(this.engine,this._computeValue(s))()}evaluateAsync(s){return ZE(this.engine,this._computeValueAsync(s))()}N(){return this.evaluate({numericApproximation:!0})}solve(s){let o=C8(s??this.unknowns);return o.length!==1?null:n3(this,o[0])}get isCollection(){if(!this.isValid)return!1;let s=this.baseDefinition?.collection;return!s||s.count!==void 0&&s.iterator,s!==void 0}get isIndexedCollection(){return!this.isValid||!this.baseDefinition?.collection?.at?!1:this.type.matches("indexed_collection")}get isLazyCollection(){if(!this.isValid)return!1;let s=this.baseDefinition?.collection;return s?s?.isLazy?.(this)??!1:!1}xcontains(s){return this.baseDefinition?.collection?.contains?.(this,s)}get xsize(){return this.operatorDefinition?.collection?.count?.(this)}get isEmptyCollection(){if(this.isCollection)return this.operatorDefinition?.collection?.isEmpty?.(this)}get isFiniteCollection(){if(this.isCollection)return this.operatorDefinition?.collection?.isFinite?.(this)}each(){let s=this.operatorDefinition?.collection?.iterator?.(this);return s?function*(){let o=s.next();for(;!o.done;)yield o.value,o=s.next()}():function*(){}()}at(s){return this.operatorDefinition?.collection?.at?.(this,s)}get(s){if(typeof s=="string")return this.operatorDefinition?.collection?.at?.(this,s);if(s.string)return this.operatorDefinition?.collection?.at?.(this,s.string)}indexWhere(s){if(this.operatorDefinition?.collection?.indexWhere)return this.operatorDefinition.collection.indexWhere(this,s);if(!this.isIndexedCollection||!this.isFiniteCollection)return;let o=0;for(let c of this.each()){if(s(c))return o;o+=1}}subsetOf(s,o){return this.operatorDefinition?.collection?.subsetOf?.(this,s,o)??!1}_computeValue(s){return()=>{if(!this.isValid||!this._def)return this;let o=s?.numericApproximation??!1,c=s?.materialization??!1;if(j6(this._def))return ZS(this,this._def.value,s);let m=this._def.operator;if(m.broadcastable&&this.ops.some(So=>o5(So))){let So=J8(this._ops);if(!So)return this.engine.Nothing;let Hc=[];for(;;){let{done:mf,value:p1}=So.next();if(mf)break;Hc.push(this.engine._fn(this.operator,p1).evaluate(s))}return Hc.length===0?this.engine.Nothing:Hc.length===1?Hc[0]:this.engine._fn("List",Hc)}if(c!==!1&&!m.evaluate&&this.isLazyCollection)return YE(this,m,s);let A=t2(this,So=>So.evaluate(s)),ae=this._localScope!==void 0||s?.withArguments;if(ae&&(this.engine._pushEvalContext(this._localScope??{parent:this.engine.context?.lexicalScope,bindings:new Map}),s?.withArguments))for(let[So,Hc]of Object.entries(s.withArguments))this.engine.context.values[So]=Hc;let qe=m.evaluate?.(A,{numericApproximation:o,engine:this.engine,materialization:c});return ae&&this.engine._popEvalContext(),qe??this.engine.function(this._operator,A)}}_computeValueAsync(s){return async()=>{if(!this.isValid||!this._def)return this;let o=s?.numericApproximation??!1;if(j6(this._def))return ZS(this,this._def.value,s);let c=this._def.operator;if(c?.broadcastable&&this.ops.some(Hc=>o5(Hc))){let Hc=J8(this._ops);if(!Hc)return this.engine.Nothing;let mf=[];for(;;){let{done:p1,value:M1}=Hc.next();if(p1)break;mf.push(this.engine._fn(this.operator,M1).evaluateAsync(s))}return mf.length===0?this.engine.Nothing:mf.length===1?mf[0]:Promise.all(mf).then(p1=>this.engine._fn("List",p1))}let m=await g2(this,async Hc=>await Hc.evaluateAsync(s)),A=this._localScope!==void 0||s?.withArguments;if(A&&(this.engine._pushEvalContext(this._localScope??{parent:this.engine.context?.lexicalScope,bindings:new Map}),s?.withArguments))for(let[Hc,mf]of Object.entries(s.withArguments))this.engine.context.values[Hc]=mf;let ae=this.engine,qe={numericApproximation:o,engine:ae,signal:s?.signal,eager:s?.materialization},So=c.evaluateAsync?.(m,qe)??c.evaluate?.(m,qe);return A&&this.engine._popEvalContext(),Promise.resolve(So).then(Hc=>Hc??ae.function(this._operator,m))}}};function WE(s){if(!s.isValid)return"error";if(s.operator==="Function"){let c=s.ops[0].type,m=s.ops.slice(1);return R4(`(${m.map(A=>"unknown").join(", ")}) -> ${c}`,s.engine._typeResolver)}let o=s.operatorDefinition;if(o){let c=o.signature instanceof I4?o.signature.type:typeof o.signature=="string"?R4(o.signature,s.engine._typeResolver):o.signature,m=H3(c)??"unknown";if(typeof o.type=="function"){let A=o.type(s.ops,{engine:s.engine});A&&(A instanceof I4?m=A.type:m=R4(A,s.engine._typeResolver)??m)}return m}return s.valueDefinition?H3(s.valueDefinition.type.type)??"unknown":"unknown"}function XE(s,o){return()=>{if(s._deadline===void 0){s._deadline=Date.now()+s.timeLimit;let c=o();return s._deadline=void 0,c}return o()}}function ZE(s,o){return async()=>{if(s._deadline===void 0){s._deadline=Date.now()+s.timeLimit;let c=await o();return s._deadline=void 0,c}return o()}}function ZS(s,o,c){let m=o.isConstant?o.value:s.engine._getSymbolValue(s.operator);if(m&&!m.type.matches("function"))return m.isValid?s.engine.typeError("function",m.type,m.toString()):s;let A=s.ops.map(ae=>ae.evaluate(c));return!m||m.type.isUnknown?s.engine.function(s.operator,A):Wy(m,A)}function YE(s,o,c){if(!s.isValid||c?.materialization===!1)return s;let m=c?.materialization??!1;typeof m=="boolean"&&(m=KE);let A=s.isIndexedCollection,ae=s.isFiniteCollection,qe=[];if(!s.isEmptyCollection)if(!A||!ae){let Hc=typeof m=="number"?m:m[0],mf=s.each();for(let p1 of mf){if(qe.length===Hc){mf.next().done||qe.push(s.engine.symbol("ContinuationPlaceholder"));break}qe.push(p1.evaluate(c))}}else{let[Hc,mf]=typeof m=="number"?[Math.ceil(m/2),m-Math.ceil(m/2)]:m,p1=1,M1=s.each();for(let G1 of M1)if(qe.push(G1.evaluate(c)),p1+=1,p1>Hc)break;let R1=s.xsize;if(R1===void 0||R1<=Hc)(R1===void 0||qe.length<R1)&&qe.push(s.engine.symbol("ContinuationPlaceholder"));else{let G1=Math.max(Hc+1,R1-mf+1);for(R1>Hc+mf&&qe.push(s.engine.symbol("ContinuationPlaceholder")),p1=G1;p1<=R1;){let c4=s.at(p1);if(!c4)break;qe.push(c4.evaluate(c)),p1+=1}}}let So=o.collection?.elttype?.(s);return So&&X2(So,"tuple<string, any>")?s.engine.function("Dictionary",qe):A?s.engine._fn("List",qe):s.engine.function("Set",[...qe])}var nS=class UE extends J6{[Symbol.toStringTag]="[BoxedString]";_string;_utf8Buffer;_unicodeScalarValues;constructor(o,c,m){super(o,m),this._string=c.normalize()}get json(){return g5(this._string)&&!Z6(this._string)?this._string:`'${this._string}'`}get hash(){return B7("String"+this._string)}get operator(){return"String"}get isPure(){return!0}get isCanonical(){return!0}set isCanonical(o){}get value(){return this}get type(){return I4.string}get complexity(){return 19}get string(){return this._string}get buffer(){if(this._utf8Buffer===void 0){let o=new TextEncoder;this._utf8Buffer=o.encode(this._string)}return this._utf8Buffer}get unicodeScalars(){return this._unicodeScalarValues===void 0&&(this._unicodeScalarValues=QE(this._string)),this._unicodeScalarValues}match(o,c){return V7(o)||(o=this.engine.box(o,{canonical:!1})),iy(o)?{[z7(o)]:this}:o instanceof UE&&this._string===o._string?{}:null}};function QE(s){let o=[];for(let c=0;c<s.length;c++){let m=s.codePointAt(c);o.push(m),m>65535&&c++}return o}var YS=class WS extends J6{[Symbol.toStringTag]="[BoxedDictionary]";_keyValues={};_type;constructor(o,c,m){super(o,m?.metadata),c instanceof J6?this._initFromExpression(c,m):this._initFromRecord(c,m)}_initFromRecord(o,c){for(let m in o){if(typeof m!="string")throw new Error(`Dictionary keys must be strings, but got ${typeof m}`);if(m.length===0)throw new Error("Dictionary keys must not be empty strings");o[m]instanceof J6?this._keyValues[m]=o[m]:this._keyValues[m]=this.engine.box(o[m],c)}}_initFromExpression(o,c){if(o instanceof WS){Object.assign(this._keyValues,o._keyValues);return}if(o.operator==="Tuple"||o.operator==="Pair"||o.operator==="KeyValuePair"){if(o.nops!==2)throw new Error(`Expected a key/value pair, got ${o.nops} elements`);let[m,A]=o.ops,ae;if(m.string)ae=m.string;else if(m.symbol)ae=m.symbol;else throw new Error(`Expected a string key, got ${m.type}`);this._keyValues[ae]=A.canonical;return}if(o.operator==="Dictionary"){for(let m of o.ops)if(m.operator==="KeyValuePair"||m.operator==="Pair"||m.operator==="Tuple"){let[A,ae]=m.ops,qe;if(A.string)qe=A.string;else if(A.symbol)qe=A.symbol;else return;this._keyValues[qe]=ae.canonical}else throw new Error(`Expected a key/value pair, got ${m.type}`);return}}get json(){return["Dictionary",{dict:Object.fromEntries(Object.entries(this._keyValues).map(([o,c])=>[o,c.json]))}]}get hash(){return B7("Dictionary"+JSON.stringify(this._keyValues))}get operator(){return"Dictionary"}get type(){if(this._type)return this._type;let o=y3(...Object.values(this._keyValues).map(c=>c.type.type));return this._type=this.engine.type(`dictionary<${o}>`),this._type}get isPure(){return!0}get isCanonical(){return!0}set isCanonical(o){}get value(){}get complexity(){return 1e3}get isCollection(){return!0}get isIndexedCollection(){return!1}get isLazyCollection(){return!1}xcontains(o){}get xsize(){return Object.keys(this._keyValues).length}get isEmptyCollection(){return Object.keys(this._keyValues).length===0}get isFiniteCollection(){return!0}each(){let o=this.engine;return function*(c){for(let[m,A]of Object.entries(c._keyValues))yield o.tuple(o.string(m),A)}(this)}get(o){return this._keyValues[o]}has(o){return this._keyValues.hasOwnProperty(o)}get keys(){return Object.keys(this._keyValues)}get entries(){return Object.entries(this._keyValues)}get values(){return Object.values(this._keyValues)}match(o,c){if(iy(o))return{[z7(o)]:this};if(!(o instanceof WS))return null;let m=null,A=Object.keys(o._keyValues);for(let ae of A){if(!this._keyValues.hasOwnProperty(ae))return null;let qe=this._keyValues[ae],So=o._keyValues[ae];if(!qe.match(So))return null;if(iy(o._keyValues[ae])){let Hc=z7(o._keyValues[ae]);Hc&&(m={...m??{},[Hc]:qe})}}return m}};function US(s,o,c){if(o instanceof J6)return o;if(o=t3(o),typeof o=="string")return d7(s,o,c);if(Array.isArray(o)){let[m,...A]=o;return new L5(s,m,A.map(ae=>US(s,ae,c)),{canonical:!1})}if(typeof o=="object"){if("fn"in o)return US(s,o.fn,c);if("str"in o)return new nS(s,o.str);if("sym"in o)return d7(s,o.sym,c);if("num"in o)return d7(s,o.num,c)}return d7(s,o,c)}function jS(s,o,c,m){if(m=m?{...m}:{},"canonical"in m||(m.canonical=!0),!z3(o))throw new Error(`Unexpected operator: "${o}" is not a valid symbol: ${m2(o)}`);let A=m.structural??!1;if(o==="Hold")return new L5(s,"Hold",[US(s,c[0],m)],{...m,canonical:!0,structural:A});if(o==="Error"||o==="ErrorCode")return new L5(s,o,c.map(ae=>s.box(ae,{canonical:!1})),{metadata:m?.metadata,canonical:!0});if(o==="Number"&&c.length===1)return d7(s,c[0],m);if(A===!1&&m.canonical===!0){if((o==="Divide"||o==="Rational")&&c.length===2){let ae=R7(c[0]);if(ae!==null){let qe=R7(c[1]);if(qe!==null)return s.number([ae,qe],m)}o="Divide"}if(o==="Complex"){if(c.length===1){let ae=c[0];if(ae instanceof J6&&ae.isNumberLiteral)return s.number(s.complex(0,ae.re),m);let qe=Z4(c[0]);return qe!==null&&qe!==0?s.number(s.complex(0,qe),m):s.box(ae).mul(s.I)}if(c.length===2){let ae=c[0]instanceof J6?c[0].re:Z4(c[0]),qe=c[1]instanceof J6?c[1].re:Z4(c[1]);return qe!==null&&ae!==null&&!isNaN(qe)&&!isNaN(ae)?qe===0&&ae===0?s.Zero:qe!==0?s.number(s._numericValue({re:ae,im:qe}),m):d7(s,c[0],m):d7(s,c[0],m).add(d7(s,c[1],m).mul(s.I))}throw new Error("Expected one or two arguments with Complex expression")}if(o==="Negate"&&c.length===1){let ae=c[0];if(typeof ae=="number")return s.number(-ae,m);if(ae instanceof e4)return s.number(ae.neg(),m);let qe=s.box(ae,m),So=qe.numericValue;if(So!==null)return s.number(typeof So=="number"?-So:So.neg(),m);c=[qe]}}return m.canonical===!0?JE(s,o,c,m.metadata,m.scope):$7(new L5(s,o,c.map(ae=>d7(s,ae,{canonical:m.canonical,structural:A,scope:m.scope})),{metadata:m.metadata,canonical:!1,structural:A,scope:m.scope}),m.canonical??!1,m.scope)}function d7(s,o,c){if(o==null)return s.error("missing");if(o instanceof D6)return tT(s,o);if(o instanceof J6)return $7(o,c?.canonical??!0,c?.scope);c=c?{...c}:{},"canonical"in c||(c.canonical=!0);let m=c.canonical===!0,A=c.structural??!1;if(Array.isArray(o)){if(typeof o[0]!="string")throw new Error(`The first element of an array should be a string (the function name): ${JSON.stringify(o,void 0,4)}`);return $7(jS(s,o[0],o.slice(1),{canonical:m,structural:A,scope:c?.scope}),c?.canonical??!0,c?.scope)}if(typeof o=="number"||o instanceof e4||o instanceof Bs)return s.number(o);if(typeof o=="string"){if(g5(o)){let ae=_4(o);if(!ae||!z3(ae))return s.error("invalid-symbol",o);let qe=m||c.canonical!==!1;return s.symbol(ae,{canonical:qe})}return Z6(o)?s.number(o):(Pv(o),new nS(s,x4(o)))}if(typeof o=="object"){if("fn"in o){let[ae,...qe]=o.fn;return $7(jS(s,ae,qe,{canonical:m,structural:A}),c.canonical,c.scope)}if("str"in o)return new nS(s,o.str);if("sym"in o)return s.symbol(o.sym,{canonical:m});if("num"in o)return s.number(o,{canonical:m});if("dict"in o)return new YS(s,o.dict,{canonical:m});throw new Error(`Unexpected MathJSON object: ${JSON.stringify(o,void 0,4)}`)}return s.symbol("Undefined")}function JE(s,o,c,m,A){let ae=eT(s,o,c,m,A);if(ae)return ae;if(o==="List"){let M1=c.map(G1=>s.box(G1,{canonical:!1})),R1=_9("List",M1);return R1&&R1.dtype?new Yw(s,{ops:Jv(s,M1,A),shape:R1.shape,dtype:R1.dtype},{metadata:m}):new L5(s,"List",Jv(s,M1,A),{canonical:!0})}if(o==="Dictionary"){let M1=c.map(R1=>s.box(R1,{canonical:!1}));return new YS(s,s._fn("Dictionary",M1),{canonical:!0})}let qe=s.lookupDefinition(o);if(!qe)return s.declare(o,{type:"function",inferred:!0}),new L5(s,o,$6(I9(s,c)),{metadata:m,canonical:!0});if(j6(qe))return new L5(s,o,$6(I9(s,c)),{metadata:m,canonical:!0});let So=qe.operator;if(A??=So.scoped?{parent:s.context.lexicalScope,bindings:new Map}:void 0,So.lazy){let M1=c.map(R1=>s.box(R1,{canonical:!1}));if(So.canonical){try{if(ae=So.canonical(M1,{engine:s,scope:A}),ae)return ae}catch(R1){console.error(R1.message)}return ae=new L5(s,o,M1,{metadata:m,canonical:!1}),ae}return ae=new L5(s,o,hv(s,M1,So.signature.type,So.lazy,So.broadcastable)??M1,{metadata:m,canonical:!0,scope:A}),ae}let Hc=c.map(M1=>s.box(M1));if(So.canonical){try{let M1=So.canonical(Hc,{engine:s,scope:A});if(M1)return M1}catch(M1){console.error(M1.message)}return new L5(s,o,Hc,{metadata:m,canonical:!1})}let mf=$6(Hc,So.associative?o:void 0),p1=hv(s,mf,So.signature.type,So.lazy,So.broadcastable);if(p1)return new L5(s,o,p1,{metadata:m,canonical:!0,scope:A});if(mf.length===1&&mf[0].operator===o){if(So.involution)return mf[0].op1;if(So.idempotent)return new L5(s,o,Hc[0].ops,{metadata:m,canonical:!0,scope:A})}return new L5(s,o,L6(o,mf),{metadata:m,canonical:!0,scope:A})}function eT(s,o,c,m,A){let ae=[];if(o==="Add"||o==="Multiply")ae=B5(s,I9(s,c,A),{flatten:o});else if(o==="Negate"||o==="Square"||o==="Sqrt"||o==="Exp")ae=B5(s,I9(s,c,A),1);else if(o==="Ln"||o==="Log")ae=B5(s,I9(s,c,A)),ae.length===0&&(ae=[s.error("missing")]);else if(o==="Power"||o==="Root")ae=B5(s,I9(s,c,A),2);else if(o==="Divide")ae=B5(s,I9(s,c,A)),ae.length===0&&(ae=[s.error("missing"),s.error("missing")]),ae.length===1&&(ae=[ae[0],s.error("missing")]);else return null;if(!ae.every(qe=>qe.isValid))return new L5(s,o,ae,{metadata:m,canonical:!0});if(o==="Add")return Z5(s,ae);if(o==="Negate")return Cw(ae[0]);if(o==="Multiply")return o6(s,ae);if(o==="Divide")return ae.length===2?U6(...ae):ae.slice(1).reduce((qe,So)=>U6(qe,So),ae[0]);if(o==="Exp")return Yv(s.E,ae[0]);if(o==="Square")return Yv(ae[0],s.number(2));if(o==="Power")return Yv(ae[0],ae[1]);if(o==="Root")return Yy(ae[0],ae[1]);if(o==="Sqrt")return Yy(ae[0],2);if(o==="Ln"||o==="Log"){if(ae.length>0){if(ae[0].is(1))return s.Zero;if(ae.length===1)return new L5(s,o,ae,{metadata:m,canonical:!0})}return new L5(s,"Log",ae,{metadata:m,canonical:!0})}return null}function tT(s,o){if(o.isZero)return s.Zero;if(o.isOne)return s.One;if(o.isNegativeOne)return s.NegativeOne;if(o.isNaN)return s.NaN;if(o.isNegativeInfinity)return s.NegativeInfinity;if(o.isPositiveInfinity)return s.PositiveInfinity;if(o=o.asExact??o,!o.isExact){let ae=o.im;return ae===0?s.number(o.bignumRe??o.re):o.re===0?s.number(s.complex(0,ae)):o.bignumRe!==void 0&&!qv(o.bignumRe)?Z5(s,[s.number(o.bignumRe),s.number(s.complex(0,ae))]):s.number(s.complex(o.re,o.im))}let c=[],m=o;if(m.sign!==0)if(m.radical===1)c.push(s.number(m.rational));else{let ae=m.rational,qe=s.function("Sqrt",[s.number(m.radical)]);if(M5(ae))c.push(qe);else{let[So,Hc]=ae;Hc===1?So===1?c.push(qe):c.push(s.function("Multiply",[s.number(So),qe])):So===1?c.push(s.function("Divide",[qe,s.number(Hc)])):c.push(s.function("Divide",[s.function("Multiply",[s.number(So),qe]),s.number(Hc)]))}}let A;return o.im===0?c.length===0?s.Zero:(A=c.length===1?c[0]:o6(s,c),A):c.length===0?s.number(s.complex(0,o.im)):(A=c.length===1?c[0]:o6(s,c),Z5(s,[A,s.number(s.complex(0,o.im))]))}function I9(s,o,c){return o.every(m=>m instanceof J6&&m.isCanonical)?o:o.map(m=>s.box(m,{scope:c}))}var QS=class jE{_items;constructor(o){o?o instanceof jE?this._items=new Map(o._items):this._items=new Map(o):this._items=new Map}has(o){for(let c of this._items.keys())if(c.isSame(o))return!0;return!1}get(o){for(let[c,m]of this._items)if(c.isSame(o))return m}clear(){this._items.clear()}set(o,c){for(let m of this._items.keys())if(m.isSame(o)){this._items.set(m,c);return}this._items.set(o,c)}delete(o){this._items.delete(o)}[Symbol.iterator](){return this._items.entries()}entries(){return this._items.entries()}},ny=class extends J6{_value;_hash;constructor(s,o,c){super(s,c?.metadata),o instanceof D6||typeof o=="number"?this._value=o:this._value=s._numericValue(o)}get hash(){return this._hash??=B7(this._value.toString()),this._hash}get json(){let s=this._value;return typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?s:s>0?"PositiveInfinity":"NegativeInfinity":s.toJSON()}get operator(){return"Number"}get isPure(){return!0}get isCanonical(){return!0}set isCanonical(s){}get complexity(){return 1}valueOf(){return typeof this._value=="number"?this._value:this._value.N().valueOf()}get numericValue(){return this._value}get isNumberLiteral(){return!0}get re(){return typeof this._value=="number"?this._value:this._value.re}get im(){return typeof this._value=="number"?0:this._value.im}get bignumRe(){if(typeof this._value!="number")return this._value.bignumRe}get bignumIm(){return typeof this._value=="number"?this.engine._BIGNUM_ZERO:this.engine.bignum(this._value.im)}neg(){let s=this._value;return s===0?this:typeof s=="number"?this.engine.number(-s):this.engine.number(s.neg())}inv(){return typeof this._value=="number"?Math.abs(this._value)===1?this:Number.isInteger(this._value)?this.engine.number(this.engine._numericValue({rational:[1,this._value]})):this.engine.number(1/this._value):Math.abs(this.re)===1&&this.im===0?this:this.engine.number(this._value.inv())}abs(){return this.isPositive?this:typeof this._value=="number"?this.engine.number(-this._value):this.engine.number(this._value.abs())}add(s){let o=this.engine;return this.is(0)?o.box(s):typeof s=="number"?s===0?this:typeof this._value=="number"?o.number(this._value+s):o.number(this._value.add(s)):s.numericValue!==null?typeof this._value=="number"?typeof s.numericValue=="number"?o.number(this._value+s.numericValue):o.number(s.numericValue.add(this._value)):o.number(this._value.add(s.numericValue)):q3(this,s.canonical)}mul(s){if(this.is(1))return this.engine.box(s);if(this.is(-1))return this.engine.box(s).neg();let o=this.engine;return typeof s=="number"?s===1?this:s===0||this.is(0)?this.engine.Zero:s===-1?this.neg():o.number(typeof this._value=="number"?this._value*s:this._value.mul(s)):typeof this._value=="number"&&typeof s=="number"?o.number(this._value*s):s instanceof D6?this.is(1)?o.number(s):this.is(-1)?o.number(s.neg()):o.number(s.mul(this._value)):s.numericValue!==null?o.number(o._numericValue(this._value).mul(s.numericValue)):Y5(this,s)}div(s){return Hb(this,s)}pow(s){return R5(this,s,{numericApproximation:!1})}root(s){if(typeof s=="number"){if(s===0)return this.engine.NaN;if(s===1)return this;if(s===-1)return this.inv();if(s===2)return this.sqrt();if(this.isNegative){if(s%2===1)return this.neg().root(s).neg();if(s%2===0)return this.neg().root(s)}}else{if(s=s.canonical,s.is(0))return this.engine.NaN;if(s.is(1))return this;if(s.is(-1))return this.inv();if(s.is(2))return this.sqrt();if(this.isNegative){if(s.isOdd)return this.neg().root(s).neg();if(s.isEven)return this.neg().root(s)}}let o=typeof s=="number"?s:s.re;if(Number.isInteger(o))if(typeof this._value=="number"){let c=this._value**(1/o);if(Number.isInteger(c))return this.engine.number(c)}else{let c=this._value.root(o);if(X2(c.type,"integer"))return this.engine.number(c)}return this.engine._fn("Root",[this,this.engine.box(s)])}sqrt(){return typeof this._value=="number"?this._value===0||this._value===1?this:this._value===-1?this.engine.I:this._value>0&&Number.isInteger(this._value)&&this._value<Q4?this.engine.number(this.engine._numericValue({radical:this._value})):this.engine.number(this.engine._numericValue(this._value).sqrt()):this.is(0)||this.is(1)?this:this.engine.number(this._value.sqrt())}ln(s){let o=s?this.engine.box(s):void 0;if(this.is(0))return this.engine.NegativeInfinity;if(o&&this.isSame(o))return this.engine.One;if((!o||o.symbol==="ExponentialE")&&this.symbol==="ExponentialE")return this.engine.One;let c=this.re;if(Number.isInteger(c)&&c>0){let m=this.engine,[A,ae]=An(c,3);if(A!==1)return m.number(A).ln(o).mul(3).add(m.number(ae).ln(o));if([A,ae]=An(c,2),A!==1)return m.number(A).ln(o).mul(2).add(m.number(ae).ln(o))}return o&&o.isInteger?typeof this._value=="number"?this.engine.number(Math.log(this._value)/Math.log(o.re)):this.engine.number(this._value.ln(o.re)):o===void 0?typeof this._value=="number"?this.engine.number(Math.log(this._value)):this.engine.number(this._value.ln()):this.engine._fn("Ln",[this])}get value(){return this}get type(){return typeof this._value=="number"?Number.isNaN(this._value)?I4.number:Number.isFinite(this._value)?Number.isInteger(this._value)?I4.finite_integer:I4.finite_real:I4.non_finite_number:new I4(this._value.type,this.engine._typeResolver)}get sgn(){if(this._value===0)return"zero";let s;return typeof this._value=="number"?s=Math.sign(this._value):s=this._value.sgn(),s===void 0||Number.isNaN(s)?"unsigned":s===0?"zero":s>0?"positive":"negative"}get numerator(){return typeof this._value=="number"?this:this.engine.number(this._value.numerator)}get denominator(){return typeof this._value=="number"?this.engine.One:this.engine.number(this._value.denominator)}get numeratorDenominator(){if(typeof this._value=="number")return[this,this.engine.One];let s=this.engine;return[s.number(this._value.numerator),s.number(this._value.denominator)]}subs(s,o){return this.isStructural?this:this.structural.subs(s,o)}replace(s,o){return I8(this.structural,s,o).at(-1)?.value??null}match(s,o){return VS(this.structural,s,o)}get isPositive(){return typeof this._value=="number"?!Number.isNaN(this._value)&&this._value>0:BS(this.sgn)}get isNonNegative(){return typeof this._value=="number"?!Number.isNaN(this._value)&&this._value>=0:qS(this.sgn)}get isNegative(){return typeof this._value=="number"?!Number.isNaN(this._value)&&this._value<0:$S(this.sgn)}get isNonPositive(){return typeof this._value=="number"?!Number.isNaN(this._value)&&this._value<=0:zS(this.sgn)}get isOdd(){if(this.is(1)||this.is(-1))return!0;if(this.is(0))return!1;if(!this.isFinite||!this.isInteger)return;if(typeof this._value=="number")return this._value%2!==0;let[s,o]=[this._value.numerator,this._value.denominator];return o.isOne?s.re%2!==0:s.re%2!==0&&o.re%2===0}get isEven(){let s=this.isOdd;return s!==void 0?!s:void 0}get isInfinity(){return typeof this._value=="number"?!Number.isFinite(this._value)&&!Number.isNaN(this._value):Number.isFinite(this._value.im)?this._value.isPositiveInfinity||this._value.isNegativeInfinity:!0}get isNaN(){return typeof this._value=="number"?Number.isNaN(this._value):this._value.isNaN}get isFinite(){return this.isInfinity===!1&&this.isNaN===!1}get isNumber(){return!0}get isInteger(){return typeof this._value=="number"?Number.isInteger(this._value):X2(this._value.type,"integer")}get isRational(){return typeof this._value=="number"?Number.isInteger(this._value):X2(this._value.type,"rational")}get isReal(){return typeof this._value=="number"?!0:X2(this._value.type,"real")}is(s){return typeof s=="number"?typeof this._value=="number"?Object.is(this._value,s):this._value.isNaN?Object.is(s,NaN):this._value.eq(s):typeof s=="bigint"?typeof this._value=="number"?D3(this._value)===s:this._value.eq(this.engine._numericValue(s)):typeof s=="boolean"?!1:this.isSame(s)}get canonical(){return this}get isStructural(){return typeof this._value=="number"||this.type.matches("rational")?!0:!(this._value instanceof b5)}get structural(){return this.isStructural?this:this.engine.box(this.json,{canonical:!1,structural:!0})}toNumericValue(){let s=this._value;return typeof s=="number"?[this.engine._numericValue(s),this.engine.One]:[s,this.engine.One]}simplify(s){return G2(this.structural,s).at(-1).value??this}evaluate(s){return s?.numericApproximation?this.N():this}N(){let s=this._value;if(typeof s=="number")return this;let o=s.N();return s===o?this:this.engine.number(o)}};function HS(s,o){if(o==null)return NaN;if(o instanceof D6)return o;if(typeof o=="number")return Number.isInteger(o)&&o>=-Q4&&o<=Q4||!Number.isFinite(o)?o:s._numericValue(o);if(o instanceof e4){let c=o.toNumber();return o.isInteger()&&Math.abs(c)<=Q4?c:o.isNaN()?NaN:o.isFinite()?s._numericValue(o):c>0?1/0:-1/0}if(typeof o=="bigint")return o>=-Q4&&o<=Q4?Number(o):s._numericValue(o);if(o instanceof Bs)return o.im===0?HS(s,o.re):o.isNaN()?NaN:!o.isFinite()&&o.im===0?o.re>0?1/0:-1/0:s._numericValue({re:o.re,im:o.im});if(typeof o=="object"&&"num"in o){if(typeof o.num=="number")return HS(s,o.num);if(typeof o.num!="string")throw new Error("MathJSON `num` property should be a string of digits");return JS(s,o.num)}if(typeof o=="string")return JS(s,o);if(o[1]==0)return NaN;if(typeof o[1]=="number"&&!Number.isFinite(o[1]))return Number.isFinite(o[0])?0:NaN;if(typeof o[0]=="number"&&!Number.isFinite(o[0])){let c=o[0]>0?1:-1;return o[0]>0?c>0?1/0:-1/0:o[0]<0?c>0?-1/0:1/0:NaN}return s._numericValue(o)}function JS(s,o){if(o=o.toLowerCase(),/[0-9][nd]$/.test(o)&&(o=o.slice(0,-1)),o=o.replace(/[\u0009-\u000d\u0020\u00a0]/g,""),o==="nan")return NaN;if(o==="infinity"||o==="+infinity"||o==="oo"||o==="+oo")return Number.POSITIVE_INFINITY;if(o==="-infinity"||o==="-oo")return Number.NEGATIVE_INFINITY;if(o==="0")return 0;if(o==="1")return 1;if(o==="-1")return-1;if(/\([0-9]+\)/.test(o)){let[m,A,ae,qe]=o.match(/(.+)\(([0-9]+)\)(.+)?$/)??[];o=A+ae.repeat(Math.ceil(s.precision/ae.length))+(qe??"")}let c=D3(o);return c!==null?c>=-Q4&&c<=Q4?Number(c):s._numericValue(c):s._numericValue(s.bignum(o))}var aS=class extends J6{_hash;_id;_def;constructor(s,o,c){super(s,c?.metadata),z3(o),`${o}${m2(o)}`,this._id=o,this._def=c?.def}get json(){return g5(this._id)?this._id:{sym:this._id}}get hash(){return this._hash??=B7(this._id),this._hash}get isPure(){return!0}get isConstant(){let s=this._def;return(j6(s)&&s?.value.isConstant)??!1}bind(){}reset(){}get isCanonical(){return this._def!==void 0}set isCanonical(s){throw new Error("Setting the isCanonical property is not allowed. Use the canonical() method instead.")}get canonical(){return this._def?this:this.engine.symbol(this._id)}is(s){return s===!0?this.symbol==="True"||this.value?.symbol==="True":s===!1?this.symbol==="False"||this.value?.symbol==="False":s instanceof J6&&s.symbol?this.symbol===s.symbol:this.value?.is(s instanceof J6?s.value:s)??!1}toNumericValue(){this.isCanonical;let s=this.engine;return this.symbol==="ImaginaryUnit"?[s._numericValue({re:0,im:1}),s.One]:this.symbol==="PositiveInfinity"||this.isInfinity&&this.isPositive?[s._numericValue(1/0),s.One]:this.symbol==="NegativeInfinity"||this.isInfinity&&this.isNegative?[s._numericValue(-1/0),s.One]:this.symbol==="NaN"?[s._numericValue(NaN),s.One]:[s._numericValue(1),this]}neg(){return ky(this)}inv(){return this.engine._fn("Divide",[this.engine.One,this])}abs(){return this.isNonNegative?this:this.isNonPositive?this.neg():this.engine._fn("Abs",[this])}add(s){return s===0?this:q3(this,this.engine.box(s))}mul(s){if(s===1)return this;if(s===-1)return this.neg();if(s===0&&!this.isNaN)return this.engine.Zero;if(s instanceof D6){if(s.isOne)return this;if(s.isNegativeOne)return this.neg();if(s.isZero&&!this.isNaN)return this.engine.Zero}return Y5(this,this.engine.box(s))}div(s){return Hb(this,s)}pow(s){return R5(this,s,{numericApproximation:!1})}root(s){let o=typeof s=="number"?s:s.im===0?s.re:void 0,c=this.engine;return this.symbol==="ComplexInfinity"||o===0?c.NaN:o===1?this:o===2?this.sqrt():o===-1?this.inv():c._fn("Root",[this,c.box(s)])}sqrt(){let s=this.engine;return this.symbol==="ComplexInfinity"?s.NaN:this.is(0)?this:this.is(1)?this.engine.One:this.is(-1)?s.I:s._fn("Sqrt",[this])}ln(s){let o=s?this.engine.box(s):void 0;return this.is(0)?this.engine.NegativeInfinity:(!o||o.symbol==="ExponentialE")&&this.symbol==="ExponentialE"?this.engine.One:o?o.re===10?this.engine._fn("Log",[this]):this.engine._fn("Log",[this,o]):this.engine._fn("Ln",[this])}solve(s){let o=C8(s);return o.length!==1?null:o.includes(this.symbol)?[this.engine.Zero]:null}get complexity(){return 7}get operator(){return"Symbol"}get symbol(){return this._id}get baseDefinition(){return this.valueDefinition??this.operatorDefinition}get valueDefinition(){if(j6(this._def))return this._def.value}get operatorDefinition(){if(E6(this._def))return this._def.operator}infer(s,o="narrow"){if(!this._def)return!1;let c=this._def;if(j6(c))return c.value.inferredType||c.value.type.isUnknown?(c.value.isConstant,c.value.type=this.engine.type(o==="widen"?y3(c.value.type.type,s):m5(c.value.type.type,s)),!0):!1;if(E6(c)){let m=this.engine.type(o==="widen"?y3(c.operator.signature.type,s):m5(c.operator.signature.type,s));return m.matches("function")?(c.operator.signature=m,!0):(delete c.operator,c.value={value:{type:m}},!0)}return!1}get _value(){if(!(!this._def||E6(this._def)))return this._def.value.isConstant?this._def.value.value:this.engine._getSymbolValue(this._id)}get value(){return E6(this._def)?this.engine._fn("Operator",[this.engine.string(this._id)]):this._value}set value(s){if(!this._def)throw new Error(`Cannot set value of non-canonical ${this._id}`);let o=this.engine;o.forget(this._id);let c;if(typeof s=="boolean"&&(s=s?o.True:o.False),typeof s=="string"&&(s=o.string(s)),typeof s=="object")if("re"in s&&"im"in s)s=o.complex(s.re??0,s.im);else if("num"in s&&"denom"in s)s=o.number([s.num,s.denom]);else if(Array.isArray(s))s=o._fn("List",s.map(m=>o.box(m)));else throw new Error(`Invalid value for symbol ${this._id}: ${s}`);if(s!==void 0&&(c=o.box(s).evaluate()),c?.type.matches("function")){delete this._def.value,this._def.operator={signature:c.type,evaluate:c};return}if(j6(this._def)&&this._def.value.isConstant)throw new Error(`The value of the constant "${this._id}" cannot be changed`);o._setSymbolValue(this._id,c)}get type(){let s=this._def;return j6(s)?s.value.type:E6(s)?s.operator.signature:I4.unknown}set type(s){if(!this._def)throw new Error(`Cannot set type of non-canonical symbol "${this._id}"`);if(this._id[0]==="_")throw new Error(`The type of the wildcard "${this._id}" cannot be changed`);this.engine.forget(this._id),typeof s=="string"?s=R4(s):s instanceof I4&&(s=s.type),s==="function"||O5(s)?E6(this._def)?this._def.operator.signature=s:(delete this._def.value,this._def.operator={signature:s}):E6(this._def)?(delete this._def.operator,this._def.value={type:s}):this._def.value.type=s}has(s){return typeof s=="string"?this._id===s:s.includes(this._id)}match(s,o){return VS(this,s,o)}get sgn(){return this.value?.sgn}get isOdd(){return this.value?.isOdd}get isEven(){return this.value?.isEven}get isFinite(){return this.value?.isFinite}get isInfinity(){return this.value?.isInfinity}get isNaN(){return this.value?.isNaN}get isPositive(){return BS(this.sgn)}get isNonPositive(){return zS(this.sgn)}get isNegative(){return $S(this.sgn)}get isNonNegative(){return qS(this.sgn)}get isFunction(){if(!this.type.isUnknown)return this.type.matches("function")}get isNumber(){let s=this.type;if(!s.isUnknown)return s.matches("number")}get isInteger(){let s=this.type;if(!s.isUnknown)return s.matches("integer")}get isRational(){let s=this.type;if(!s.isUnknown)return s.matches("rational")}get isReal(){let s=this.type;if(!s.isUnknown)return s.matches("real")}get re(){return this.value?.re??NaN}get im(){return this.value?.im??NaN}get bignumRe(){return this.value?.bignumRe}get bignumIm(){return this.value?.bignumIm}simplify(s){return G2(this,s).at(-1)?.value??this}evaluate(s){let o=this.valueDefinition;if(!o)return this;let c=o.holdUntil;if(o.isConstant){if(s?.numericApproximation){if(c==="never"||c==="evaluate"||c==="N")return o.value?.N()??this}else if(c==="never"||c==="evaluate")return o.value?.evaluate(s)??this}else if(c==="never"||c==="evaluate"||c==="N"&&s?.numericApproximation){let m=this.engine._getSymbolValue(this._id)??this;return m.operator==="Unevaluated"&&(m=m.evaluate(s)??this),m}return this}N(){let s=this.valueDefinition;return s&&s.holdUntil==="never"?this:s?.value?.N()??this}replace(s,o){return I8(this,s,o).at(-1)?.value??null}subs(s,o){let c=o?.canonical??this.isCanonical;return s[this._id]===void 0?c?this.canonical:this:this.engine.box(s[this._id],{canonical:c})}get _asCollection(){if(j6(this._def))return this._def.value.collection}get isCollection(){return this._asCollection?.iterator!==void 0||(this._value?.isCollection??!1)}get isIndexedCollection(){return this._asCollection?.at!==void 0||(this._value?.isIndexedCollection??!1)}get isLazyCollection(){return this._asCollection?.isLazy?.(this._value??this)??this._value?.isLazyCollection??!1}xcontains(s){return this._asCollection?.contains?.(this._value??this,s)??this._value?.xcontains?.(s)}get xsize(){return this._asCollection?.count(this._value??this)??this._value?.xsize??0}get isEmptyCollection(){return this._asCollection?.isEmpty?.(this._value??this)??this._value?.isEmptyCollection??this.xsize===0}get isFiniteCollection(){return this._asCollection?.isFinite?.(this._value??this)??this._value?.isFiniteCollection??isFinite(this.xsize)}each(){let s=this._asCollection?.iterator?.(this._value??this);return s?function*(){let o=s.next();for(;!o.done;)yield o.value,o=s.next()}():this._value?.each()??function*(){}()}at(s){return this._asCollection?.at?.(this._value??this,s)??this._value?.at?.(s)}get(s){return this._value?.get?.(s)}indexWhere(s){return this._asCollection?.indexWhere?this._asCollection.indexWhere(this._value??this,s):this._value?.indexWhere(s)}subsetOf(s,o){return this._asCollection?.subsetOf?.(this._value??this,s,o)??this._value?.subsetOf?.(s,o)??!1}},rT=["\\varphi -> \\frac{1+\\sqrt{5}}{2}",iT,nT,s=>{let o=Av(s);return o?{value:o,because:"expand"}:void 0},s=>{if(s.operator==="Add")return{value:q3(...s.ops.map(o=>o.canonical.simplify())),because:"addition"}},s=>{if(s.operator==="Negate")return{value:s.op1.neg(),because:"negation"}},s=>{if(s.operator==="Multiply")return{value:Y5(...s.ops.map(o=>o.canonical.simplify())),because:"multiplication"}},s=>{if(s.operator==="Divide")return{value:s.op1.div(s.op2),because:"division"};if(s.operator==="Rational"&&s.nops===2)return{value:s.op1.div(s.op2),because:"rational"}},s=>{if(!s.op1.isNumberLiteral)return;if(s.operator==="Sqrt"){if(s.op1.isNegative)return{value:s.engine.box(["Multiply",["Sqrt",s.op1.neg()],"ImaginaryUnit"]).simplify(),because:"sqrt"};let m=s.op1.sqrt();return eE(m.numericValue)?{value:m,because:"sqrt"}:void 0}let o=s.op1,c=s.op2;if(c.isNumberLiteral&&o.isInteger&&c.isInteger&&o.re<Q4&&c.re<Q4){if(s.operator==="Power")return{value:s.op1.pow(s.op2),because:"power"};if(s.operator==="Root"){let m=s.op1.root(s.op2);if(eE(m.numericValue))return{value:s.op1.root(s.op2),because:"root"}}}},s=>{if(s.operator!=="Abs")return;let o=s.op1;if(o.isNonNegative)return{value:o,because:"|x| -> x"};if(o.isNegative)return{value:o.neg(),because:"|x| -> -x"}},s=>{if(s.operator!=="Sign")return;let o=s.sgn,c=s.engine;if(o!==void 0){if(o==="positive")return{value:c.One,because:"sign positive"};if(o==="negative")return{value:c.One,because:"sign negative"};if(o==="zero")return{value:c.Zero,because:"sign zero"};if(o==="unsigned")return{value:c.NaN,because:"sign unsinged"}}},s=>{if(s.operator==="Ln")return{value:s.op1.ln(s.ops[1]),because:"ln"};if(s.operator==="Log")return{value:s.op1.ln(s.ops[1]??10),because:"log"}},s=>{if(s.operator==="Max"){if(s.nops===0)return{value:s.engine.NegativeInfinity,because:"max"};if(s.nops===1)return{value:s.op1,because:"max"}}else if(s.operator==="Min"){if(s.nops===0)return{value:s.engine.PositiveInfinity,because:"min"};if(s.nops===1)return{value:s.op1,because:"min"}}else if(s.operator==="Supremum"){if(s.nops===0)return{value:s.engine.NegativeInfinity,because:"sup"};if(s.nops===1)return{value:s.op1,because:"sup"}}else if(s.operator==="Infimum"){if(s.nops===0)return{value:s.engine.PositiveInfinity,because:"inf"};if(s.nops===1)return{value:s.op1,because:"inf"}}},s=>{if(s.operator!=="Derivative")return;let o=s.engine,[c,m]=s.ops;if(s.nops===2)return{value:o.function("Derivative",[c.simplify(),m]),because:"derivative"};if(s.nops===1)return{value:o.function("Derivative",[c.simplify()]),because:"derivative"}},s=>s.operator!=="Hypot"?void 0:{value:s.engine.box(["Sqrt",["Add",["Square",s.op1],["Square",s.op2]]]).simplify(),because:"hypot(x,y) -> sqrt(x^2+y^2)"},s=>{if(s.operator!=="Congruent"||s.nops<3)return;let o=s.engine;return{value:o._fn("Equal",[o.function("Mod",[s.ops[0],s.ops[2]]).simplify(),o.function("Mod",[s.ops[1],s.ops[2]]).simplify()]).simplify(),because:"congruent"}},s=>{s.operator},s=>{if(!y(s))return;let o=W(s.operator,s.op1);if(o)return{value:o,because:"constructible value"}},s=>{if(s.operator!=="InverseFunction")return;let o=B8(s.engine,s.ops);if(o)return{value:o,because:"inverse function"}},s=>{if(s.operator!=="Arctan2")return;let[o,c]=s.ops,m=s.engine;return o.isFinite===!1&&c.isFinite===!1?{value:m.NaN,because:"arctan2"}:o.is(0)&&c.is(0)?{value:m.Zero,because:"arctan2"}:c.isFinite===!1?{value:c.isPositive?m.Zero:m.Pi,because:"arctan2"}:o.isFinite===!1?{value:o.isPositive?m.Pi.div(2):m.Pi.div(-2),because:"arctan2"}:o.is(0)?{value:c.isPositive?m.Zero:m.Pi,because:"arctan2"}:{value:m.function("Arctan",[o.div(c)]).simplify(),because:"arctan2"}},"\\arcsinh(x) -> \\ln(x+\\sqrt{x^2+1})","\\arccosh(x) -> \\ln(x+\\sqrt{x^2-1})","\\arctanh(x) -> \\frac{1}{2}\\ln(\\frac{1+x}{1-x})","\\arccoth(x) -> \\frac{1}{2}\\ln(\\frac{x+1}{x-1})","\\arcsech(x) -> \\ln(\\frac{1+\\sqrt{1-x^2}}{x})","\\arccsch(x) -> \\ln(\\frac{1}{x} + \\sqrt{\\frac{1}{x^2}+1})",w9];function iT(s){let o=s.operator;if(!vv(o)&&!Y6(o))return;let c=s,m=s.engine,A=s.op1.simplify(),ae=s.op2.simplify();if(s=m.function(s.operator,[A,ae]),s=o7(s)??s,Zv(s.operator),s.nops===2&&!s.op2.is(0)){let qe=o7(m.function(s.operator,[s.op1.sub(s.op2),m.Zero]));m.costFunction(qe)<m.costFunction(s)&&(s=qe)}if(!s.isSame(c))return{value:s,because:"simplify-relational-operator"}}function nT(s){return s.operator!=="List"||!s.ops.every(o=>Y6(o.operator)||vv(o.operator))?void 0:{value:s.engine.function("List",s.ops.map(o=>o.simplify())),because:"simplify-system-of-equations"}}function eE(s){return s===null?!1:typeof s=="number"?Number.isInteger(s):s.isExact}function aT(s){if(s.operator==="Element")return lT(s);if(s.operator==="Equal")return sT(s);if(vv(s.operator))return oT(s);throw new Error("Unsupported assumption. Use `Element`, `Equal` or an inequality")}function sT(s){s.operator;let o=s.unknowns;if(o.length===0){let A=s.evaluate();return A.symbol==="True"?"tautology":A.symbol==="False"?"contradiction":(s.canonical.evaluate(),"not-a-predicate")}let c=s.engine,m=s.op1.symbol;if(m&&!cT(c,m)&&!s.op2.has(m)){let A=s.op2.evaluate();if(!A.isValid)return"not-a-predicate";let ae=c.lookupDefinition(m);return!ae||!j6(ae)?(c.declare(m,{value:A}),"ok"):ae.value.type&&!A.type.matches(ae.value.type)&&!ae.value.inferredType?"contradiction":"ok"}if(o.length===1){let A=o[0],ae=n3(s,A);ae.length===0&&c.context.assumptions.set(c.function("Equal",[s.op1.sub(s.op2),0]),!0);let qe=ae.length===1?ae[0]:c.function("List",ae),So=c.lookupDefinition(A);return!So||!j6(So)?(c.declare(A,{value:qe}),"ok"):So.value.type&&!ae.every(Hc=>!Hc.type||qe.type.matches(Hc.type))?"contradiction":"ok"}return c.context.assumptions.set(s,!0),"ok"}function oT(s){let o=s.engine,c="",m,A;if(s.operator==="Less"?(m=s.op1,A=s.op2,c="<"):s.operator==="LessEqual"?(m=s.op1,A=s.op2,c="<="):s.operator==="Greater"?(m=s.op2,A=s.op1,c="<"):s.operator==="GreaterEqual"&&(m=s.op2,A=s.op1,c="<="),!c)return"internal-error";let ae=m.sub(A),qe=o.box([c==="<"?"Less":"LessEqual",ae,0]).evaluate();if(qe.symbol==="True")return"tautology";if(qe.symbol==="False")return"contradiction";let So=qe.unknowns;return So.length===0?"not-a-predicate":(So.length===1&&(o.lookupDefinition(So[0])||o.declare(So[0],{type:"real"})),qe.operator==="Less"||qe.operator,o.context.assumptions.set(qe,!0),"ok")}function lT(s){s.operator;let o=s.engine,c=uT(s.op1);if(c.length===1){let A=s.op2.evaluate();if(!A.isValid)return"not-a-predicate";let ae=Xb(A);if(ae==="unknown")throw new Error(`Invalid domain "${A.toString()}"`);return o.declare(c[0],ae),"ok"}if(s.op1.symbol&&tE(o,s.op1.symbol)){let A=s.op2.evaluate();if(!A.isValid)return"not-a-predicate";let ae=Xb(A);o.context?.lexicalScope?.bindings.has(s.op1.symbol)||o.declare(s.op1.symbol,Xb(A));let qe=o.lookupDefinition(s.op1.symbol);return j6(qe)?qe.value.type&&!X2(ae,qe.value.type.type)?"contradiction":(qe.value.type=new I4(ae,o._typeResolver),"ok"):E6(qe)?X2(ae,H3(qe.operator.signature.type))?"ok":"contradiction":"not-a-predicate"}if(c.length>0)return o.context.assumptions.set(s,!0),"ok";let m=s.evaluate();return m.symbol==="True"?"tautology":m.symbol==="False"?"contradiction":"not-a-predicate"}function tE(s,o){return s.lookupDefinition(o)!==void 0}function uT(s){return s.symbols.filter(o=>!tE(s.engine,o))}function cT(s,o){let c=s.lookupDefinition(o);return c?!!(j6(c)&&c.value.isConstant||s._getSymbolValue(o)!==void 0):!1}var rE=class hS{True;False;Pi;E;Nothing;Zero;One;Half;NegativeOne;Two;I;NaN;PositiveInfinity;NegativeInfinity;ComplexInfinity;decimalSeparator=".";_BIGNUM_NAN;_BIGNUM_ZERO;_BIGNUM_ONE;_BIGNUM_TWO;_BIGNUM_HALF;_BIGNUM_PI;_BIGNUM_NEGATIVE_ONE;_precision;_angularUnit;_tolerance;_bignumTolerance;_negBignumTolerance;__cache={};_configurationChangeTracker=new W7;_cost;_commonSymbols={Pi:null,True:null,False:null,All:null,Nothing:null,None:null,Undefined:null,ImaginaryUnit:null,ExponentialE:null};_commonNumbers={"-5":null,"-4":null,"-3":null,"-2":null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,12:null,36:null};_evalContextStack=[];get context(){return this._evalContextStack[this._evalContextStack.length-1]}get contextStack(){return[...this._evalContextStack]}set contextStack(o){this._evalContextStack=[...o]}get _typeResolver(){let o=this;return{get names(){let c=[],m=o.context.lexicalScope;for(;m;)m.types&&c.push(...Object.keys(m.types)),m=m.parent;return c},resolve:c=>{let m=o.context.lexicalScope;for(;m;){if(m.types?.[c])return m.types[c];m=m.parent}},forward:c=>{let m={kind:"reference",name:c,alias:!1,def:void 0};return o.context.lexicalScope.types??={},o.context.lexicalScope.types[c]=m,m}}}declareType(o,c,{alias:m}={}){if(!j5(o))throw Error(`The type name "${o}" is invalid`);let A=this.context.lexicalScope;if(A.types?.[o])throw Error(`The type "${o}" is already defined in the current scope`);A.types??={},m??=!1,A.types[o]={kind:"reference",name:o,alias:m,def:void 0};let ae=c instanceof I4?c.type:typeof c=="string"?R4(c,this._typeResolver):c;A.types[o].def=ae}get trace(){return this._evalContextStack.map(o=>o.name).filter(o=>o!==void 0).reverse()}_generation=0;strict;deadline;_latexDictionaryInput;__indexedLatexDictionary;_bignum;static getStandardLibrary(o="all"){return Mh(o)}static getLatexDictionary(o="all"){return B6(o)}constructor(o){if(o!==void 0&&typeof o!="object")throw Error("Unexpected argument");this.strict=!0;let c=o?.precision??g4;c==="machine"&&(c=Math.floor(n6)),this._bignum=e4.clone({precision:c}),this._precision=c,this.tolerance=o?.tolerance??"auto",this._angularUnit="rad",this.Zero=new ny(this,0),this.One=new ny(this,1),this.Half=new ny(this,{rational:[1,2]}),this.NegativeOne=new ny(this,-1),this.Two=new ny(this,2),this.NaN=new ny(this,Number.NaN),this.PositiveInfinity=new ny(this,Number.POSITIVE_INFINITY),this.NegativeInfinity=new ny(this,Number.NEGATIVE_INFINITY),this.I=new ny(this,{im:1}),this.ComplexInfinity=new ny(this,{re:1/0,im:1/0}),this._reset(),this.pushScope(void 0,"system"),this.declareType("limits","expression<Limits>");for(let A of hS.getStandardLibrary("domains"))H1(this,A);let m=o?.ids??hS.getStandardLibrary();for(let A of m)H1(this,A);for(let A of Object.keys(this._commonSymbols))this._commonSymbols[A]=new aS(this,A,{def:this.lookupDefinition(A)});this.True=this._commonSymbols.True,this.False=this._commonSymbols.False,this.Pi=this._commonSymbols.Pi,this.E=this._commonSymbols.ExponentialE,this.Nothing=this._commonSymbols.Nothing,this.pushScope(void 0,"global"),K7(this)}toJSON(){return"[ComputeEngine]"}[Symbol.toStringTag]="ComputeEngine";get latexDictionary(){return this._latexDictionaryInput??hS.getLatexDictionary()}set latexDictionary(o){this._latexDictionaryInput=o,this.__indexedLatexDictionary=E_(o,c=>{throw Error(typeof c.message=="string"?c.message:c.message.join(","))})}get _indexedLatexDictionary(){return this.__indexedLatexDictionary??=E_(this.latexDictionary,o=>console.error(o)),this.__indexedLatexDictionary}_reset(){this._bignum,this._generation+=1,this._BIGNUM_NEGATIVE_ONE=this.bignum(-1),this._BIGNUM_NAN=this.bignum(NaN),this._BIGNUM_ZERO=this.bignum(0),this._BIGNUM_ONE=this.bignum(1),this._BIGNUM_TWO=this.bignum(2),this._BIGNUM_HALF=this._BIGNUM_ONE.div(this._BIGNUM_TWO),this._BIGNUM_PI=this._BIGNUM_NEGATIVE_ONE.acos();for(let o of Object.values(this._commonSymbols))o?.reset();for(let o of Object.keys(this.__cache))this.__cache[o].value&&(this.__cache[o].purge?this.__cache[o].value=this.__cache[o].purge(this.__cache[o].value):delete this.__cache[o]);this._configurationChangeTracker.notifyNow()}listenToConfigurationChange(o){return this._configurationChangeTracker.listen(o)}get precision(){return this._precision}set precision(o){o==="machine"&&(o=n6),o==="auto"&&(o=g4);let c=this._precision;if(o!==c){if(typeof o!="number"||o<=0)throw Error('Expected "machine" or a positive number');this._precision=Math.max(o,n6),this._bignum=this._bignum.config({precision:this._precision}),this.tolerance="auto",this._reset()}}get angularUnit(){return this._angularUnit}set angularUnit(o){if(o!==this._angularUnit){if(typeof o!="string")throw Error("Expected a string");this._angularUnit=o,this._reset()}}get timeLimit(){return this._timeLimit}set timeLimit(o){o<=0&&(o=Number.POSITIVE_INFINITY),this._timeLimit=o}_timeLimit=2e3;_deadline=void 0;get _timeRemaining(){return this.deadline===void 0?Number.POSITIVE_INFINITY:this.deadline-Date.now()}get iterationLimit(){return this._iterationLimit}set iterationLimit(o){o<=0&&(o=Number.POSITIVE_INFINITY),this._iterationLimit=o}_iterationLimit=1024;get recursionLimit(){return this._recursionLimit}set recursionLimit(o){o<=0&&(o=Number.POSITIVE_INFINITY),this._recursionLimit=o}_recursionLimit=1024;get tolerance(){return this._tolerance}set tolerance(o){o==="auto"&&(o=E3),(!Number.isFinite(o)||o<0)&&(o=Math.pow(10,-this._precision+2)),this._tolerance=o,this._bignumTolerance=this.bignum(o),this._negBignumTolerance=this.bignum(-o)}chop(o){return typeof o=="number"?Math.abs(o)<=this._tolerance?0:o:o instanceof e4?o.isPositive()&&o.lte(this._bignumTolerance)||o.isNegative()&&o.gte(this._negBignumTolerance)||o.isZero()?0:o:o instanceof Bs&&Math.abs(o.re)<=this._tolerance&&Math.abs(o.im)<=this._tolerance?0:o}bignum(o){if(typeof o=="bigint")return new this._bignum(o.toString());try{return new this._bignum(o)}catch(c){console.error(c.message)}return this._BIGNUM_NAN}complex(o,c){return o instanceof e4&&(o=o.toNumber()),c instanceof e4&&(c=c.toNumber()),new Bs(o,c)}_numericValue(o){if(o instanceof D6)return o.asExact??o;let c=A=>this.bignum(A),m=this._precision>n6?A=>new t7(A,c):A=>new b6(A,c);if(typeof o=="number")return Number.isInteger(o)?new b5(o,m,c):m(o);if(typeof o=="bigint")return new b5(o,m,c);if(k7(o))return new b5({rational:o},m,c);if(o instanceof e4)return o.isInteger()&&o.e<=P6?new b5(D3(o.toString()),m,c):m(o);if(o instanceof Bs)return o.im===0?this._numericValue(o.re):m({re:o.re,im:o.im});if("im"in o||"re"in o)return o.im!==void 0&&o.im!==0?m(o):o.re instanceof e4&&o.re.isInteger()?new b5({rational:[D3(o.re.toString()),BigInt(1)]},m,c):typeof o.re=="number"&&Number.isInteger(o.re)?new b5({rational:[o.re,1]},m,c):m(o);if("radical"in o||"rational"in o){if(o.radical!==void 0&&(!Number.isInteger(o.radical)||o.radical>=Q4))throw Error("Unexpected value for radical part:"+o.radical);return o.rational&&f6(o.rational)&&(!Number.isInteger(o.rational[0])||!Number.isInteger(o.rational[1]))?m(o):new b5(o,m,c)}throw Error("Unexpected value")}get costFunction(){return this._cost??Q2}set costFunction(o){typeof o!="function"&&(this._cost=Q2),this._cost=o}lookupDefinition(o){return D_(o,this.context.lexicalScope)}_declareSymbolValue(o,c,m){m??=this.context.lexicalScope,m.bindings.set(o,{value:new Ry(this,o,{type:"unknown",inferred:!0})});let A=m.bindings.get(o);return Py(this,o,A,c),m===this.context.lexicalScope&&j6(A)&&A.value.value&&!A.value.isConstant&&(this.context.values[o]=A.value.value),this._generation+=1,A}_declareSymbolOperator(o,c,m){m??=this.context.lexicalScope,m.bindings.set(o,{value:new Ry(this,o,{type:"function"})});let A=m.bindings.get(o);return Py(this,o,A,c),this._generation+=1,A}pushScope(o,c){this._pushEvalContext(o??{parent:this.context?.lexicalScope,bindings:new Map},c)}popScope(){this._popEvalContext()}_pushEvalContext(o,c){if(!c){let A=this._evalContextStack.length;A===0&&(c="system"),A===1&&(c="global"),c??=`anonymous_${A-1}`}let m={};for(let[A,ae]of o.bindings.entries())j6(ae)&&!ae.value.isConstant&&(m[A]=ae.value.value);this._evalContextStack.push({lexicalScope:o,name:c,assumptions:new QS(this.context?.assumptions??[]),values:m})}_popEvalContext(){this._evalContextStack.pop()}_inScope(o,c){if(!o)return c();this._evalContextStack.push({lexicalScope:o,name:"",assumptions:new QS([]),values:{}});try{return c()}finally{this._evalContextStack.pop()}}_printStack(o){o?(o={...o},o.maxDepth??=1,o.details??=!1):o={details:!1,maxDepth:-2},o.maxDepth!==void 0&&o.maxDepth<0&&(o.maxDepth=this._evalContextStack.length+o.maxDepth),o.maxDepth=Math.min(this._evalContextStack.length-1,o.maxDepth);let c=0;for(;c<=o.maxDepth;){let m=this._evalContextStack[this._evalContextStack.length-1-c];c===0?console.group(`${c3}${A3}${m.name}${C4}`):console.groupCollapsed(`${c3}${A3}${m.name}${C4} ${H2}(${c})${C4}`);let A=[...m.assumptions.entries()].map(([qe,So])=>`${qe}: ${So}`);if(A.length>0){console.groupCollapsed(`${c3}${A.length} assumptions${C4}`);for(let qe of A)console.info(qe);console.groupEnd()}let ae=Object.entries(m.values);if(ae.length+m.lexicalScope.bindings.size===0){console.groupEnd(),c+=1;continue}for(let[qe,So]of ae)m.lexicalScope.bindings.has(qe)?console.info(aE(qe,m.lexicalScope.bindings.get(qe),So)):console.info(So===void 0?`${V6}${qe}${C4}: ${H2}undefined${C4}`:`${V6}${qe}${C4}: ${H2}${So.toString()}${C4}`);for(let[qe,So]of m.lexicalScope.bindings)qe in m.values||console.info(aE(qe,So));console.groupEnd(),c+=1}}_getSymbolValue(o){let c=this._evalContextStack.length-1;if(!(c<0))for(let m=c;m>=0;m--){let A=this._evalContextStack[m].values;if(o in A)return A[o]}}_setSymbolValue(o,c){let m=this._evalContextStack.length-1;if(m<0)throw new Error(`Unknown symbol "${o}"`);typeof c=="number"?c=this.number(c):typeof c=="boolean"&&(c=c?this.True:this.False);for(let ae=m;ae>=0;ae--){let qe=this._evalContextStack[ae].values;if(o in qe){qe[o]=c,this._generation+=1;return}}let A=this.lookupContext(o);if(!A)throw new Error(`Unknown symbol "${o}"`);A.values[o]=c}declare(o,c,m){if(typeof o!="string"){for(let[qe,So]of Object.entries(o))this.declare(qe,So);return this}let A=o;if(A==="Nothing")return this;if(c==null)throw Error(`Expected a definition or type for "${A}"`);if(typeof A!="string"||A.length===0||!z3(A))throw new Error(`Invalid symbol "${A}": ${m2(A)}`);if(m??=this.context.lexicalScope,m.bindings.has(A))throw new Error(`The symbol "${A}" is already declared in this scope`);let ae=c;if(hx(ae))return this._declareSymbolValue(A,ae,m),this;if(cx(ae))return this._declareSymbolOperator(A,ae,m),this;{let qe=R4(ae,this._typeResolver);if(!ev(qe))throw Error([`Invalid argument for "${A}"`,JSON.stringify(ae,void 0,4),"Use a type, a `OperatorDefinition` or a `ValueDefinition`"].join(`
|   `));this._declareSymbolValue(A,{type:qe},m)}return this}lookupContext(o){if(o.length===0||!z3(o))throw Error(`Invalid symbol "${o}": ${m2(o)}}`);let c=this._evalContextStack.length-1;if(!(c<0))for(let m=c;m>=0;m--){let A=this._evalContextStack[m];if(A.lexicalScope.bindings.has(o))return A}}_swapContext(o){for(;this._evalContextStack.length>0&&this._evalContextStack[this._evalContextStack.length-1]!==o;)this._evalContextStack.pop();this._evalContextStack.length===0&&(this._evalContextStack=[o])}assign(o,c){if(typeof o=="object"){for(let[So,Hc]of Object.entries(o))this.assign(So,Hc);return this}let m=o;if(m==="Nothing")return this;let A=this.lookupDefinition(m);if(E6(A)){if(iE(this,c))throw Error(`Cannot change the operator "${m}" to a value`);let So=nE(this,c);if(!So)throw Error(`Cannot change the operator "${m}" to a value`);return Py(this,m,A,So),this}let ae=iE(this,c);if(ae!==void 0){if(!A)return this._declareSymbolValue(m,{value:ae}),this;if(A.value.isConstant)throw Error(`Cannot assign a value to the constant "${m}"`);return A.value.inferredType&&(A.value.type=this.type(y3(A.value.type.type,ae.type.type))),this._setSymbolValue(m,ae),this}let qe=nE(this,c);if(qe===void 0)throw Error(`Invalid definition for symbol "${m}"`);return A?(Py(this,m,A,qe),this._setSymbolValue(m,void 0)):this.declare(m,qe),this}_shouldContinueExecution(){return this.deadline===void 0||this.deadline>=Date.now()}_checkContinueExecution(){if(!this._shouldContinueExecution())throw new Error("timeout")}_cache(o,c,m){if(this.__cache[o]===void 0)try{this.__cache[o]={build:c,purge:m,value:c()}}catch(A){console.error(`Fatal error building cache "${o}":
	 ${A.toString()}`)}return this.__cache[o]?.value}box(o,c){return d7(this,o,c)}function(o,c,m){return jS(this,o,c,m)}error(o,c){let m;typeof o=="string"?m=this.string(o):m=this.function("ErrorCode",o.map(qe=>this.string(qe)));let A;c&&j8(c)?A=this.function("LatexString",[this.string(fy(c))]):typeof c=="string"&&c.length>0&&(A=this.string(c));let ae=[this.box(m)];return A&&ae.push(A),this.function("Error",ae)}typeError(o,c,m){return c?this.error(["incompatible-type",u3(o),c.toString()],m):this.error(["incompatible-type",u3(o)],m)}hold(o){return this._fn("Hold",[this.box(o,{canonical:!1})])}tuple(...o){return new L5(this,"Tuple",o.map(c=>typeof c=="number"?this.number(c):c.canonical),{canonical:!0})}type(o){return o instanceof I4?o:new I4(o,this._typeResolver)}string(o,c){return new nS(this,o,c)}symbol(o,c){let m=c?.canonical??!0;o=o.normalize();let A=o.toLowerCase();if(A==="infinity"||A==="+infinity")return this.PositiveInfinity;if(A==="-infinity")return this.NegativeInfinity;if(this.strict&&!z3(o))return this.error(["invalid-symbol",m2(o)],o);if(!m)return new aS(this,o);let ae=this._commonSymbols[o];if(ae)return ae;let qe=this.lookupDefinition(o);return j6(qe)&&qe.value.holdUntil==="never"?qe.value.value??this.Nothing:qe?new aS(this,o,{def:qe}):(qe=this._declareSymbolValue(o,{type:"unknown",inferred:!0}),new aS(this,o,{def:qe}))}number(o,c){let m=c?.metadata,A=!1;if((!c||c.canonical===void 0||c.canonical==="Number"||c.canonical===!0||Array.isArray(c.canonical)&&c.canonical.includes("Number"))&&(A=!0),!A&&k7(o))return this._fn("Rational",[this.number(o[0]),this.number(o[1])],{...m,canonical:!1});if(o=HS(this,o),m===void 0){if(typeof o=="number"){let ae=o;if(ae===1)return this.One;if(ae===0)return this.Zero;if(ae===-1)return this.NegativeOne;if(ae===2)return this.Two;if(Number.isInteger(ae)&&this._commonNumbers[ae]!==void 0)return this._commonNumbers[ae]??=new ny(this,o),this._commonNumbers[ae];if(Number.isNaN(ae))return this.NaN;if(!Number.isFinite(ae))return ae<0?this.NegativeInfinity:this.PositiveInfinity}else if(o instanceof D6){if(o.isZero)return this.Zero;if(o.isOne)return this.One;if(o.isNegativeOne)return this.NegativeOne;if(o.isNaN)return this.NaN;if(o.isNegativeInfinity)return this.NegativeInfinity;if(o.isPositiveInfinity)return this.PositiveInfinity}}return new ny(this,o,{metadata:m})}rules(o,c){return q7(this,o,c)}getRuleSet(o){if(o??="standard-simplification",o==="standard-simplification")return this._cache("standard-simplification-rules",()=>q7(this,rT,{canonical:!0}));if(o==="solve-univariate")return this._cache("univariate-roots-rules",()=>q7(this,M2));if(o==="harmonization")return this._cache("harmonization-rules",()=>q7(this,J4))}_fn(o,c,m){let A=m?.canonical??!0;return new L5(this,o,c,{...m,canonical:A})}parse(o,c){if(o==null)return null;if(typeof o!="string")throw Error("ce.parse(): expected a LaTeX string");let m={imaginaryUnit:"\\imaginaryI",positiveInfinity:"\\infty",negativeInfinity:"-\\infty",notANumber:"\\operatorname{NaN}",decimalSeparator:this.decimalSeparator,digitGroup:3,digitGroupSeparator:"\\,",exponentProduct:"\\cdot",beginExponentMarker:"10^{",endExponentMarker:"}",truncationMarker:"\\ldots",repeatingDecimal:"auto",skipSpace:!0,parseNumbers:"auto",getSymbolType:ae=>{let qe=this.lookupDefinition(ae);return qe?E6(qe)?qe.operator.signature:j6(qe)?qe.value.type:I4.unknown:I4.unknown},parseUnexpectedToken:(ae,qe)=>null,preserveLatex:!1},A=M_(fy(o)??o,this._indexedLatexDictionary,{...m,...c});if(A===null)throw Error("Failed to parse LaTeX string");return this.box(A,{canonical:c?.canonical??!0})}ask(o){let c=this.box(o,{canonical:!1}),m=[],A=this.context.assumptions;for(let[ae,qe]of A){let So=c.match(ae);So!==null&&qe===!0&&m.push(So)}return m}verify(o){return!1}assume(o){try{let c=j8(o)?this.parse(o,{canonical:!1}):this.box(o,{canonical:!1});return this._generation+=1,aT(c)}catch(c){throw console.error(c.message.toString()),c}}forget(o){if(o===void 0){this.context.assumptions?.clear(),this._generation+=1;return}if(Array.isArray(o)){for(let c of o)this.forget(c);return}if(typeof o=="string")for(let[c,m]of this.context.assumptions)c.has(o)&&this.context.assumptions.delete(c);this._generation+=1}};function iE(s,o){if(o==null||typeof o=="function")return;if(typeof o=="boolean")return o?s.True:s.False;if(typeof o=="number"||typeof o=="bigint")return s.number(o);let c=s.box(o);if(!(c.unknowns.length>0))return c}function nE(s,o){if(typeof o=="function")return{evaluate:o,signature:"function"};if(o==null||typeof o=="boolean")return;let c=y5(s.box(o));if(c!==void 0)return{evaluate:c,signature:"function"}}function aE(s,o,c){let m="";if(j6(o)){let A=[];o.value.holdUntil==="never"&&A.push("(hold never)"),o.value.holdUntil==="N"&&A.push("(hold until N)"),o.value.inferredType&&A.push("inferred");let ae=A.length>0?` ${A.join(" ")}`:"";m=`${V6}${s}${C4}:${ae}`,o.value.isConstant?(m+=` const ${o.value.type.toString()}`,o.value.value!==void 0&&(m+=` = ${o.value.value?.toString()}`)):m+=` ${o.value.type.toString()}`}else if(E6(o)){let A=[];o.operator.inferredSignature&&A.push("(inferred)");let ae=A.length>0?` (${A.join(" ")})`:"";m=`${V6}${s}${C4}:${ae} ${o.operator.signature.toString()}`;let qe=[];o.operator.lazy&&qe.push("lazy"),o.operator.scoped&&qe.push("scoped"),o.operator.broadcastable&&qe.push("broadcastable"),o.operator.associative&&qe.push("associative"),o.operator.commutative&&qe.push("commutative"),o.operator.idempotent&&qe.push("idempotent"),o.operator.involution&&qe.push("involution"),o.operator.pure||qe.push("not pure");let So=qe.map(Hc=>`${H2}${Hc}${C4}`).join(" ");So.length>0&&(m+=`
    ${So}`)}else m="unknown";return c&&(c.isValid?c.isCanonical?m+=` = ${H2}${c.toString()}${C4}`:m+=` = ${x1}${c.toString()}${C4} (not canonical)`:m+=` = ${K4}${c.toString()}${C4} (not valid)`),m}var hT="0.30.2";return globalThis[Symbol.for("io.cortexjs.compute-engine")]={ComputeEngine:rE.prototype.constructor,version:"0.30.2"},Z(me)})();/*! Bundled license information:

		complex-esm/dist/src/complex.js:
		  (**
		   * @license Complex.js v2.1.1 12/05/2020
		   *
		   * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
		   * Dual licensed under the MIT or GPL Version 2 licenses.
		   **)

		decimal.js/decimal.mjs:
		  (*!
		   *  decimal.js v10.6.0
		   *  An arbitrary-precision Decimal type for JavaScript.
		   *  https://github.com/MikeMcl/decimal.js
		   *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
		   *  MIT Licence
		   *)
		*/Object.assign(r,a),Object.defineProperty(r,"__esModule",{value:!0})})}(computeEngine_min_umd$1,computeEngine_min_umd$1.exports)),computeEngine_min_umd$1.exports}requireComputeEngine_min_umd();var nerdamer_core$1={exports:{}},nerdamer_core=nerdamer_core$1.exports,hasRequiredNerdamer_core;function requireNerdamer_core(){return hasRequiredNerdamer_core||(hasRequiredNerdamer_core=1,function(t){var e=function(r){var a="1.1.13",l=new A3,u=r.bigInt,d=r.bigDec;d.set({precision:250});var g={},E=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083],P={},Z={callPeekers:!1,init_primes:1e3,exclude:[],suppress_errors:!1,PARSE2NUMBER:!1,SAFE:!1,IMAGINARY:"i",FUNCTION_MODULES:[Math],ALLOW_CHARS:[""],USE_MULTICHARACTER_VARS:!0,POWER_OPERATOR:"^",VALIDATION_REGEX:/^[a-z_ABEZHIKMNoOPTX][0-9a-z_ABEZHIKMNoOPTX]*$/i,IMPLIED_MULTIPLICATION_REGEX:/([\+\-\/\*]*[0-9]+)([a-z_ABEZHIKMNoOPTX]+[\+\-\/\*]*)/gi,ALIASES:{:"pi","":"Infinity"},POSITIVE_MULTIPLIERS:!1,CACHE:{},SILENCE_WARNINGS:!1,PRECISION:21,EXPRESSION_DECP:19,DEFAULT_DECP:16,VECTOR:"vector",PARENTHESIS:"parens",SQRT:"sqrt",ABS:"abs",FACTORIAL:"factorial",DOUBLEFACTORIAL:"dfactorial",LONG_PI:"3.14159265358979323846264338327950288419716939937510582097494459230781640628620899862803482534211706798214808651328230664709384460955058223172535940812848111745028410270193852110555964462294895493038196",LONG_E:"2.71828182845904523536028747135266249775724709369995957496696762772407663035354759457138217852516642742746639193200305992181741359662904357290033429526059563073813232862794349076323382988075319525101901",PI:Math.PI,E:Math.E,LOG:"log",LOG10:"log10",LOG10_LATEX:"log_{10}",MAX_EXP:2e5,SCIENTIFIC_MAX_DECIMAL_PLACES:14,SCIENTIFIC_IGNORE_ZERO_EXPONENTS:!0};(function(){Z.CACHE.roots={};for(var De=40,Fc=40,hf=2;hf<=De;hf++)for(var r1=2;r1<=Fc;r1++){var d1=u(hf).pow(r1);Z.CACHE.roots[d1+"-"+r1]=hf}})();var me=g.N=1,_e=g.P=2,He=g.S=3,Xe=g.EX=4,wt=g.FN=5,Do=g.PL=6,sr=g.CB=7,Ko=g.CP=8,Bs=Z.CONST_HASH="#",th=Z.PARENTHESIS,pf=Z.SQRT,_h=Z.ABS,cf=Z.FACTORIAL,df=Z.DOUBLEFACTORIAL,uf=[],li={},Vc=[],Rs=[],qc=function(De,Fc){if(!Z.suppress_errors)throw Fc?new Fc(De):new Error(De)},Qp=function(De){var Fc=function(hf){this.name=De,this.message=hf!==void 0?hf:"";var r1=new Error(this.message);r1.name=this.name,this.stack=r1.stack};return Fc.prototype=Object.create(Error.prototype),Fc},n1=function(De){return Vc.indexOf(De)!==-1},wh=function(De){for(var Fc=De[0],hf=1,r1=De.length;hf<r1;hf++)if(!De[hf].equals(Fc))return!1;return!0},gf=function(De){Rs.push(De),Z.SHOW_WARNINGS&&console&&console.warn&&console.warn(De)},yh=function(De,Fc){if(Fc=Fc||"variable",Z.ALLOW_CHARS.indexOf(De)===-1){var hf=Z.VALIDATION_REGEX;if(!hf.test(De))throw new u4(De+" is not a valid "+Fc+" name")}},ff=function(De){var Fc=Math.sign(De);if(De=Math.abs(De),/\d+\.?\d*e[\+\-]*\d+/i.test(De)){var hf="0",r1=String(De).toLowerCase().split("e"),d1=r1.pop(),y1=Math.abs(d1),v1=d1/y1,O1=r1[0].split(".");if(v1===-1)y1=y1-O1[0].length,y1<0?De=O1[0].slice(0,y1)+"."+O1[0].slice(y1)+(O1.length===2?O1[1]:""):De=hf+"."+new Array(y1+1).join(hf)+O1.join("");else{var m2=O1[1];m2&&(y1=y1-m2.length),y1<0?De=O1[0]+m2.slice(0,y1)+"."+m2.slice(y1):De=O1.join("")+new Array(y1+1).join(hf)}}return Fc<0?"-"+De:De},e1=function(De){for(var Fc=Math.floor(Math.sqrt(De)),hf=2;hf<=Fc;hf++)if(De%hf===0)return!1;return!0},s1=function(De,Fc){var hf={};return hf[De]=Fc,hf},b1=function(De){return/^\d+\.?\d*$/.test(De)},_1=function(De){for(var Fc=0;Fc<De.length;Fc++)if(!b1(De[Fc]))return!1;return!0},V1=function(De){return I1(De)?V1(De.multiplier.toDecimal()):De%1!==0},I1=function(De){return De instanceof x1},i2=function(De){return De instanceof O4},R2=function(De,Fc,hf){if(hf=hf||{c:[],add:function(O1){this.c.indexOf(O1)===-1&&isNaN(O1)&&this.c.push(O1)}},I1(De)){var r1=De.group,d1=De.previousGroup;if(r1===Xe&&R2(De.power,Fc,hf),r1===Ko||r1===sr||d1===Ko||d1===sr)for(var y1 in De.symbols)R2(De.symbols[y1],Fc,hf);else if(r1===He||d1===He)De.value==="e"||De.value==="pi"||De.value===Z.IMAGINARY||hf.add(De.value);else if(r1===Do||d1===Do)R2(u1(De.symbols),Fc,hf);else if(r1===Xe)isNaN(De.value)||hf.add(De.value),R2(De.power,Fc,hf);else if(r1===wt&&!Fc)for(var v1=0;v1<De.args.length;v1++)R2(De.args[v1],Fc,hf)}return hf.c.sort()},F2=function(De,Fc){for(var hf=new x1(0),r1=0;r1<De.length;r1++){var d1=De[r1];hf=l.add(hf,I1(d1)?d1:l.parse(d1))}return Fc?Number(hf):hf},X1=function(De,Fc){De=l.expand(De),Fc=Fc||{};var hf=function(r1,d1){Fc[r1]||(Fc[r1]=new x1(0)),Fc[r1]=l.add(Fc[r1],d1.clone())};return De.each(function(r1){if(r1.isConstant("all"))hf("constants",r1);else if(r1.group===He)hf(r1.value,r1);else if(r1.group===wt&&(r1.fname===_h||r1.fname===""))X1(r1.args[0]);else{if(r1.group===Xe||r1.group===wt)throw new Error("Unable to separate. Term cannot be a function!");hf(R2(r1).join(" "),r1)}}),Fc},W2=function(De,Fc){Fc=Fc||De.length;for(var hf=0;hf<Fc;hf++){var r1=De[hf];r1||(De[hf]=new x1(0))}return De},N2=function(De){return De instanceof c3},V2=function(De){return De instanceof b4},q2=function(De){return De instanceof Y4},B2=function(De){return De.group===me||De.group===_e},K2=function(De){return De.group===He&&De.multiplier.equals(1)&&De.power.equals(1)},S2=function(De){return Array.isArray(De)},E1=function(De){return/^[-+]?\d+e?\+?\d*$/gim.test(De.toString())},F1=function(De){return I1(De)&&(De=De.multiplier),De.lessThan(0)},K1=function(De){return De&&String(De)},N1=function(De){return"("+De+")"},J1=function(De,Fc,hf,r1){return De.substr(0,Fc)+r1+De.substr(hf,De.length)},E2=function(De){return De!==void 0&&De.custom},n2=function(De,Fc){return De<0==Fc<0},D1=function(){var De=[].slice.call(arguments),Fc=De.shift(),hf=Fc.replace(/{(\d+)}/g,function(r1,d1){var y1=De[d1];return typeof y1=="function"?y1():y1});return hf},i1=function(De,Fc,hf){var r1=[];hf=hf||1;for(var d1=De;d1<=Fc;d1++)r1.push(d1*hf);return r1},g1=Object.keys,u1=function(De,Fc,hf){for(var r1 in De)break;return Fc?r1:hf?{key:r1,obj:De[r1]}:De[r1]},L1=function(De,Fc,hf){for(var r1=5,d1={},y1,v1=0;v1<hf.length;v1++)d1[hf[v1]]=new x1(Math.floor(Math.random()*r1)+1);return z1("PARSE2NUMBER",function(){y1=l.parse(De,d1).equals(l.parse(Fc,d1))}),y1},B1=function(De,Fc,hf){return yh(De),n1(De)?null:(Fc=Fc||R2(l.parse(hf)),l.functions[De]=[l.mapped_function,Fc.length,{name:De,params:Fc,body:hf}],hf)},Q1=function(De){return Math.max.apply(void 0,De)},Z1=function(De){return Math.min.apply(void 0,De)},A1=function(De,Fc){if(De.sort(),Fc.sort(),De.length===Fc.length){for(var hf=0;hf<De.length;hf++)if(De[hf]!==Fc[hf])return!1;return!0}return!1},a2=function(De){for(var Fc=[],hf=De.length,r1=0;r1<hf;r1++)Fc[r1]=De[r1].clone();return Fc},v2=function(De,Fc){Fc=Fc||20;var hf=[],r1,d1,y1;hf.push(De[0]);for(var v1=0;v1<De.length-1;v1++){r1=De[v1],d1=De[v1+1]-r1,y1=d1/Fc;for(var O1=0;O1<Fc;O1++)r1+=y1,hf.push(r1)}return hf},A2=function(De){var Fc,hf;if(De.group===wt&&De.fname===""?(Fc=x1.unwrapPARENS(l.parse(De).toLinear()),hf=l.parse(De.power)):De.group===_e&&(Fc=l.parse(De.value),hf=l.parse(De.power)),Fc&&hf&&Fc.group===me&&hf.group===me&&Fc.multiplier.isNegative()){for(var r1=[],d1=x1.toPolarFormArray(c2(De)),y1=d1[0],v1=l.arg(Fc),O1=hf.multiplier.den.toString(),m2=hf.multiplier.num.toString(),T2="(({0})^({1})*(cos({3})+({2})*sin({3})))^({4})",w2=0;w2<O1;w2++){var d4=c2(l.parse(D1("(({0})+2*pi*({1}))/({2})",v1,w2,O1))).multiplier.toDecimal();r1.push(c2(l.parse(D1(T2,y1,O1,Z.IMAGINARY,d4,m2))))}return c3.fromArray(r1)}else if(De.isConstant(!0,!0)){var z2=De.sign(),v1=c2(De.abs()),i4=l.sqrt(v1),r1=[i4.clone(),i4.negate()];z2<0&&(r1=r1.map(function($4){return l.multiply($4,x1.imaginary())}))}else r1=[l.parse(De)];return c3.fromArray(r1)},l2=function(De,Fc){for(var hf=De.length,r1=[],d1=0;d1<De.length;d1++)r1.push([De[d1],Fc[d1]]);r1.sort(function(O1,m2){return O1[0]-m2[0]});var y1=[],v1=[];for(d1=0;d1<hf;d1++)y1.push(r1[d1][0]),v1.push(r1[d1][1]);return[y1,v1]},x2=function(De,Fc,hf){Fc=String(Fc);var r1,d1,y1,v1;if(De.group===Ko){var O1=l.expand(De.clone()).stripVar(Fc);r1=l.subtract(De.clone(),O1.clone()),v1=O1}else r1=De.clone();return d1=r1.stripVar(Fc),y1=l.divide(r1.clone(),d1.clone()),v1=v1||new x1(0),hf?{a:d1,x:y1,ax:r1,b:v1}:[d1,y1,r1,v1]},u2=function(De,Fc){return E1(De)?De>=Number.MAX_VALUE?De.toString():Number(De):(Fc=typeof Fc>"u"?14:Fc,Math.round(De*Math.pow(10,Fc))/Math.pow(10,Fc))},s2=function(De){for(var Fc="u",hf=Fc,r1=0,d1=R2(De);!(Vc.indexOf(hf)===-1&&d1.indexOf(hf)===-1);)hf=Fc+r1++;for(var y1=0,v1=Vc.length;y1<=v1;y1++)if(!Vc[y1]){Vc[y1]=hf;break}return hf},j2=function(De){var Fc=Vc.indexOf(De);Fc!==-1&&(Vc[Fc]=void 0)},h2=function(De,Fc){if(S2(De))for(var hf=De.length,r1=0;r1<hf;r1++)Fc.call(De,r1);else for(var d1 in De)De.hasOwnProperty(d1)&&Fc.call(De,d1)},k2=function(De){return De%2===0},a4=function(De){return 1/(De%1)%2===0},n4=function(De){for(var Fc=De.length,hf=[],r1=0;r1<Fc;r1++){var d1=De[r1];hf.indexOf(d1)===-1&&hf.push(d1)}return hf},o4=function(De){for(var Fc=R2(De[0],null,null),hf=1,r1=De.length;hf<r1;hf++)Fc=Fc.concat(R2(De[hf]));return Fc=n4(Fc).sort(),Fc},P4=function(De,Fc){var hf=typeof Fc;(hf!=="function"||hf==="undefined")&&(Fc=function(m2,T2){return m2===T2});for(var r1=[];De.length;){var d1=De[0];if(De.length===1){r1.push(d1);break}var y1=[];r1.push(d1);for(var v1=1;v1<De.length;v1++){var O1=De[v1];Fc(d1,O1)||y1.push(O1)}De=y1}return r1},v4=function(De){var Fc=function(hf){Vc.indexOf(hf)===-1&&Vc.push(hf)};typeof De=="string"?Fc(De):h2(De,function(hf){Fc(hf)})},P1=function(De,Fc){var hf;return S2(De)?hf=De.splice(Fc,1)[0]:(hf=De[Fc],delete De[Fc]),hf},z1=function(De,Fc,hf,r1){var d1=Z[De];Z[De]=hf===void 0?!0:!!hf;var y1=Fc.call(r1);return Z[De]=d1,y1},e2=function(){var De={};for(var Fc in l.functions)De[Fc]=l.functions[Fc][0];return De},b2=function(De){return[].slice.call(De)},P2=function(De,Fc,hf){var r1=[];De.each(function(y1){if(y1.contains(Fc))var v1=y1.stripVar(Fc),O1=l.divide(y1.clone(),v1.clone()),m2=O1.power.toDecimal();else v1=y1,m2=0;var T2=r1[m2];r1[m2]=T2?l.add(T2,v1):v1},!0);for(var d1=0;d1<r1.length;d1++)r1[d1]||(r1[d1]=new x1(0));return r1},c2=function(De,Fc){return z1("PARSE2NUMBER",function(){return l.parse(De,Fc)},!0)},$2=function(De){if(S2(De)){for(var Fc=new c3([]),hf=0;hf<De.length;hf++)Fc.elements.push($2(De[hf]));return Fc}return I1(De)?De:l.parse(De)},Z2=function(De){for(var Fc=E[E.length-1]||2,hf=Fc;hf<De;hf++)e1(hf)&&E.push(hf)},Ym=function(De){for(var Fc=0;Fc<De.length;Fc++)if(De[Fc].group!==me)return!1;return!0},o1=function(De){for(var Fc=0;Fc<De.length;Fc++)if(!(De[Fc].isPi()||De[Fc].isE())&&!De[Fc].isConstant(!0))return!1;return!0},a1=function(De,Fc,hf){(Fc.isComposite()&&!De.isComposite()||Fc.isLinear()&&!De.isLinear())&&([De,Fc]=[Fc,De]);var r1=new x1(0);return De.isLinear()?De.each(function(d1){if(Fc.isComposite())Fc.isLinear()?Fc.each(function(v1){var O1=l.multiply(l.parse(d1),l.parse(v1)),m2=l.expand(l.parse(O1),hf);r1=l.add(r1,m2)},!0):r1=l.add(r1,l.multiply(d1,l.parse(Fc)));else{var y1=l.multiply(l.parse(d1),l.parse(Fc));r1=l.add(r1,l.expand(y1,hf))}},!0):r1=l.multiply(De,Fc),r1},l1=Qp("DivisionByZero"),w1=Qp("ParseError"),h1=Qp("UndefinedError"),C1=Qp("OutOfFunctionDomainError"),q1=Qp("MaximumIterationsReached"),$1=Qp("NerdamerTypeError"),W1=Qp("ParityError"),Y1=Qp("OperatorError"),_2=Qp("OutOfRangeError"),O2=Qp("DimensionError"),u4=Qp("InvalidVariableNameError"),p4=Qp("ValueLimitExceededError"),l4=Qp("NerdamerValueError"),A4=Qp("SolveError"),h3=Qp("InfiniteLoopError"),s3=Qp("UnexpectedTokenError"),y4={DivisionByZero:l1,ParseError:w1,OutOfFunctionDomainError:C1,UndefinedError:h1,MaximumIterationsReached:q1,NerdamerTypeError:$1,ParityError:W1,OperatorError:Y1,OutOfRangeError:_2,DimensionError:O2,InvalidVariableNameError:u4,ValueLimitExceededError:p4,NerdamerValueError:l4,SolveError:A4,InfiniteLoopError:h3,UnexpectedTokenError:s3},r4={csc:function(De){return 1/Math.sin(De)},sec:function(De){return 1/Math.cos(De)},cot:function(De){return 1/Math.tan(De)},acsc:function(De){return Math.asin(1/De)},asec:function(De){return Math.acos(1/De)},acot:function(De){return Math.PI/2-Math.atan(De)},erf:function(De){var Fc=1/(1+.5*Math.abs(De)),hf=1-Fc*Math.exp(-De*De-1.26551223+Fc*(1.00002368+Fc*(.37409196+Fc*(.09678418+Fc*(-.18628806+Fc*(.27886807+Fc*(-1.13520398+Fc*(1.48851587+Fc*(-.82215223+Fc*.17087277)))))))));return De>=0?hf:-hf},diff:function(De){var Fc=.001,hf=function(r1){return(De(r1+Fc)-De(r1-Fc))/(2*Fc)};return hf},median:function(...De){De.sort(function(hf,r1){return hf-r1});var Fc=Math.floor(De.length/2);return De.length%2?De[Fc]:(De[Fc-1]+De[Fc])/2},fromContinued:function(De){for(var Fc=De.fractions.slice(),hf=1/Fc.pop(),r1=0,d1=Fc.length;r1<d1;r1++)hf=1/(Fc.pop()+hf);return De.sign*(De.whole+hf)},continuedFraction:function(De,Fc){Fc=Fc||20;for(var hf=Math.sign(De),r1=Math.abs(De),d1=Math.floor(r1),y1=r1-d1,v1=0,O1=!1,m2=1e-14,T2=1e7,w2,d4,z2={whole:d1,sign:hf,fractions:[]};!O1&&y1!==0;){if(w2=1/y1,d4=Math.floor(w2),d4>T2){var i4=r4.fromContinued(z2)-De;if(i4<=Number.EPSILON)break}z2.fractions.push(d4),y1=w2-d4,(y1<=m2||v1>=Fc-1)&&(O1=!0),v1++}var E4=z2.fractions.length-1;return z2.fractions[E4]===1&&(z2.fractions.pop(),z2.fractions[--E4]++),z2},bigpow:function(De,Fc){De instanceof H2||(De=H2.create(De)),Fc instanceof H2||(Fc=H2.create(Fc));var hf=new H2(0);if(Fc.isInteger())hf.num=De.num.pow(Fc.toString()),hf.den=De.den.pow(Fc.toString());else{var r1=H2.create(Math.pow(De.num,Fc.num)),d1=H2.create(Math.pow(De.den,Fc.num));hf.num=r4.nthroot(r1,Fc.den.toString()),hf.den=r4.nthroot(d1,Fc.den)}return hf},gamma:function(De){var Fc=7,hf=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(De<.5)return Math.PI/(Math.sin(Math.PI*De)*r4.gamma(1-De));De-=1;for(var r1=hf[0],d1=1;d1<Fc+2;d1++)r1+=hf[d1]/(De+d1);var y1=De+Fc+.5;return Math.sqrt(2*Math.PI)*Math.pow(y1,De+.5)*Math.exp(-y1)*r1},bigfactorial:function(De){for(var Fc=new u(1),hf=2;hf<=De;hf++)Fc=Fc.times(hf);return new H2(Fc)},bigLog:function(De){var Fc=["-253631954333118718762629409109262279926288908775918712466601196032/39970093576053625963957478139049824030906352922262642968060706375","0","24553090145869607172412918483124184864289170814122579923404694986469653261608528681589949629750677407356463601998534945057511664951799678336/35422621391945757431676178435630229283255250779216421054188228659061954317501699707236864189383591478024245495110561124597124995986978302375","369017335340917140706044240090243368728616279239227943871048759140274862131699550043150713059889196223917527172547/335894053932612728969975338549993764554481173661218585876475837409922537622385232776657791604345125227005476864000","24606853025626737903121303930100462245506322607985779603220820323211395607931699126390918477501325805513849611930008427268176602460462988972957593458726734897129954728102144/17750092415977639787139561330326170936321452137635322313122938207611787444311735251389066106937796085669460151963285086542745859461943369606018450213014148175716400146484375","399073568781976806715759409052286641738926636328983929439450824555613704676637191564699164303012247386095942144825603522401740680808466858044/247958349743620302021733249049411604982786755454514947379317600613433680222511897950658049325685140346169718465773927872179874971908848116625","1468102989495846944084741146947295378041808701256909016224309866143294556551407470861354311593351276612463858816796714569499021375899793849136855085849133702029337910502448189055357182595424959360/819363879309286303497217527375463120404739098260200279520788950777458900438307356738082930586032462601215802636320993648007907724899611296693997216938989854861043298494990214825163523387600982777","5896704855274661767824574093605344871722790278354431422729640950821239030785642943033153793245906863203822369276271050164634206965056233097479117980782641839669/3030306850569309344013726745100070601277982132543905537366562638553198167007159067544789592089960911065181606283478843359856123992707598685058297067179343872000","76631772943534985713873427262830314617912556928476573358548256872141516989538374761909611879922349479420014771499018155447198112155515453671128814488139633810493264352294560043912066253026059140653027326566801398784/36852092933388988649396042883218509607503204211148493545892849595498822817623842579026942621098851631842754395231561679671400197056377380063233740202370686144673585955581403046886083948450136247134308381940165804875","3159076083816399509754948610929467278257473888282947311280653574634802580912280940686954763313882823327077171624015737719617373932318151594325834524000275847475866299387913048/1437757485694188822758304467756419845842037623148461107362957994816554782989250555362514354661961482939226272309026092009962414616417412938087494467254146002233028411865234375","22266067259907364984531611601870291368272674573653403965630628996687370994139884833897773468149149664829922302484782423514167405397665098388400450149078982462318781750661005833037235183394221496186539779712428265837926417581952/9670030144664428565128962309657100138096047028794689249320859276197340398920725569428532293373676415359965773460364494998334259893079003125373872108770534788283842907318071170285038777091588292539102269617376180390982915567375","14604654564989239958569331443385369522850975185358647132770022716433280072271007767111036877803328768910274400515590151934676819262085211828028638417329558229123989556376108454497813055/6090614019162516693013973409650613208227889078878781039105047015752493519149314227721984436973374032279421344818329285207124280297611253861173835238379831004010748379874393292231671808","1901241885407696031217292877862925220917660047127261026827869027159993239567933534052663335498281439239753018507182016153657409777749792228538380379703411298411623469292891476969894084838876001545818141543890273256985768690847587711270930688/765116019778838839812655402103512685695769161212360553099732689795578904762091216998790589926057819838537805856579109910198553330075924857419395160755642371550113347465300208422126945265887065434116781678702741657275181694851670325469434625","139459806786604751793737926146840623607010208216289543036026206208962059593900745886202214788747453279179283344350478734275973878932538430194363355795823581315329311220701640235653288975569812161436/54371368534412517053056101353618694718215711767266376573138772968257303578467926450212293233332401067673270853953399269852376592855992724934941173346260129257754416412476202526978443681584633116375","1045669091124493070709683241190022970908640501171378776604126771144008324358233819560649021940145166254659028524319517244711645162132513416238958170819347361185944945680269442845829390112062101255500836072082817820950448463314034677353723256969344/396228259004446234921310936915931611736815598535963504660076315228798989932959459406702091180060429080345146735173591749448509810270759531977278642135591672189002006272326131885315743181289970885337574780897529347356567086535505950450897216796875","9912919238915437302006264477931031611447467070103973106567538528951878797932559935860738745374437522819124347510590800370471910492338584284092534264608801221235029062881964101996762011296996851893455828946521/3660537472668264151218961634689665210933936249986285290553357254224360417386515311493310199319523687171757653216994741150377508234317025158302057758196429623723072084157928224798322861732880034847243894784000","9263710175433181746575186369318246002919895649622127410824041370079225200282403368319370743363303164313395723904510539050157032684710468364067204876434546848634842333436957245275217583248805993142227630297924119330553308466662488683624783307023014909360640/3341177182697517248552428837661919299725031035849865632511882688786226888137634168024976033652753689210700218163621739078534353578510364301481093730054725078138658805025014615651043313990684347632166030359086885561104034510990826655289288319840595753002771","5116082230713622171832327542439052727465114322479570603905499496221224653983960598946033081212909066917137546065542953865612718836914393275681318667667521726785633638189373998191090501201427906618075889744489190209584/1805752553736060443820406101277706970767657006346276183748749630179442318063568286372320188433843729960294965366346522303898609655762491623098453269916163621089005711823488749297418113474056676109581110715068124438875","246569125619713282434448566970352231845414317018379160824176638351574938993535464763890962336882760882398479702237564384291290459961036068916857265499633061660562532011248501476114401629839742058389195725393702000011860799793778295606988057303225493814005789533570432/85307063020836305797178273029353623060860009152114361453434032434699636078115114412588719432277441055049132559782203988387794711585368296817222565434951256788867244687081233632650953850383220864394261763844194948389861147622944651546912394593164406926489862036343375","133672026303452911046163998480860917119290576658330909785707604886881155606725822685088929236266583416708668502760907677019598002175122453170574729028452721476464728566191464897928696630979863154661704374206171469014225143/45398130975270785045482567762871405072140548998125471025451666500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","6041693953360002800224091673336562508913199995987479264605216252220579740134601435770085920869376641180763419907442721705887169884230643795126568815123647603047739799302562095542459344811429882053086550900803768964612193941424128649976704727183797495759082741166938351872/2016766992122395667828553277997478570503475626107286343497917705446132017125079612756035254750822860815515899557855166824523851779156336235294914777307802256439645525835223691751931866188957324792276149549076500784191791380803500156776088683900346065830066370370083309875","705868391597244582764749229356331441978820024796066870551110486625729826111158236686696326058778874201639006234449557592353247542995871491078308187261304930042019640830629526023972693107193897009168955674240659026247094657679060/231848642748474339277532000336338632910990823562381469441716922006107433404523316252618490265927265734670539384485699132080062215196462178933963957679882342083893417545858074378754089719547920901917516016346211301054206383643383","101832160604157943093944673541651013907278188571533075311673249923948856034633446617630054761681006062910980371900782781226979391765818325065031889334563981235894369036439929651260587335544056975715076598739977065390678221999918899003881778449092038750712969437519295878491018112/32944277910571666002449086492515464541550138004002141571670657643770713783329063548790202120805341989608877739811787937782240802963962520261844114327432160788193314874913687387269408387417806176202979244637915812905426565263196954203487934225589622864145960079736633434831996625","10655703119271468913597640479490594180964700448340778168715956712130636958373270202484276402718566314881119559090842449610957974112230306343486091910217340665146602598568991520563987490686996746558858366002301982443029430290679385551/3398412687366638541233365137084722368200311117891192348532156645374786104142009695796409107380345795998400850838706661851176885183144928701608654514812261697598380070746520197171576610572921007069104300695592751543563472456384512000","1903039332876763837419920240543738799531131775028971323439870868730321221615515008394327723508670975623498588291298064320786970626232668956372004004897872810230178526101184611242511193415796638694370503100219710864543168952682617801833318493436174387568067811938490953495819438108686336/598806534367503338307287246320963280558134937382149405305466709787179429317914803617527827862441615350396864359976273212272586892074799651088317544101755361439294687323233086696182687664637422796995789967075271448560870681210580691574924544896656175563265378514188341796398162841796875","525573915563826130963525826191411949262846916750432019596028344808298471293378917508549164993368392834023782480702893643486699787870059946429810070222126260200026332874480239090370088123833491499400991181659445914352500247596757005142623368/163278727324937389095822405034435687776345799835442022795533783889356344755225815267819508608559076191292900367982490827396869405536484846115955581043091229202052407483776587687967125885665493681707461345895999542381476164157058393971431375","9263815657177858787273494705338516861045771674838057329170239610953039987023429736752079544014780707408666628475997291124805562998227296677616204140605356257712022384368492575381355563976330347792504605666631512343447560301417325154003481040250148561839861837778597346623630046623751094400/2843321709948499955095590862256744532227698001408929142548057792217790532624003190447363578048562448168721539177458065482170148482375585867230123873178100117094533143052886527452665480614620123764036974180917207421482431983407742154634391264619615289225747664532332469783301704643254076601","407959339726114455622180187758753007349209016396248763075759257357925636039752474207685682218422721827857994768023399625060206708378433960993946156803948655098667156937949174400873748557248801874735834957795040139401560494087476967548060208243867/123780218751812156744401121690996305978134694678934447237402511116731459214498784497436358160964198336874043702652746834763131444030185151143987331404604087778514863973633941401826334750268416015224906056576641018962863645043976537664227639296000","2547676391598917379516698439971914695230548782904479778605691338364453606537643088857116141939170899135026552016969320061900926954008522781162186995856580955090548471448276736878300717869625651893741316530109438876067419826217901657017506157997588944233677467357220316084583383623602865379325184/764562034757392298786420374672266498815021229519853724850874576419885380830752931701831256959159800764672605004880389358601658343203513177084389490286723240185146570925957286083025676875197029662038213216541352875570101363668917766225709569356861275434470568767077844675593176178611021135573625","186545352286463730559933346565311535598243666022232037054735807289501173444103692309735768703898330430135399033529355360391658728987379385732098960609744313878477967971557204207043802935782878745271859468248704012618254203101767841517569443555143252/55399179641621656233589820996143825959365789093262978988289445625153099592463372579496245442338653053662134699646413817866770218574795378644415019944304868289119443774932782235638737888469746745621382139263856603239588594078668393194675445556640625","664884440164786473344854955309049113269357314957985265728106924238588705533437169796551912202931185746193155801905841712503407258166135075966280435780812714252670362202091663287095423712596462690753468682634261029392794173636943978404002804413009590005984736612421172979101972556772005594499779860608/195485517776407145286424460448995460754674039560651791192647586550615878988380153730602665795647187884543361218962125172808792176382956599256188706636727418572541254480798303566840010217729386905041217793614214518363859058348249961790104618910877813067510758225302884815410347238200133693756493703875","2614957283934314904315471338485451166053664494383241929385424599389309215073267052860464009981063483440201193771607520572077231889699858482582363845275452280606276949653970992719332472370351170732899676316967244504534154616036371979031399425846100527685/761493664432749089312665480773496290658029971027686543404885407644062485746072719559288231362060149626237939029641098328278650939665665969011529293869562636656650999759724704272743235210867676873525147820749560155294022488994426729939894753293900972032","124843380518493746761140367283007507854364503961156704095198010255465940085534099747297600085903814014415830785663764373057896014399822131175202342399536439284123918855893825207202244831315575594886675813256448846863723093240955901916229136393454605455444105444987028391748121054399538064686074523506176/36022228212051654395480210378626648518430280334458144892889271272122662467638331091863215146548048144675657239846337165813938424387499358852301016926312083940212100001220180762189978024821166744964908871443681332664798940660421469519997746775275873085770018269706847741064037876137315001228315806659875","827992369063043155578730871896750570951766628472810506926098505028264552046829097082095665194000002802661600196840639204300804225352337632259980703832713031790922485730615305441309917696044954289187837653933158950774246017223571461858939407386087081525130831392/236805932823686534991153393869288530368011574665859226704279685567723830696754821658770176385138917722808377962346690757191122309876922069867472518117628639913077442806147910884267694879089753138429767401700283014143248445966474839193628309668702223994071394625","17347276886878323736540051321582548724378497839789943634071026331001588645519865992773157565595886250230140452154269197770615097377486013097979087647774513500701793885978192218455687078883766086309728287172567466406449372659680040183273634701092561727514713494914793425407149186041796935055187281744386432/4919325621804683623339606849970832094714371903709195539440424738973575902329797546592497378000858196173718145883783709223158260700365224756081275272021856393735663399552166737690038832550853145831185979094979556715294990257315369124065787473707136464772247917156232366320267601622617803514003753662109375","137984231830526866236186357461458917020538108058615632801298091031540729111527734872044790487396302545910108285921421417358113055522725197998483383380192391312304647004240060970929072498293210057120617332323445379424867965764749534125081131327565507524502163460761/38810445792642817561168950890315210470940006613819790543653745327778579787694809782601777514116858514049585074667085399925278459138508514838268321349069481334967221455722811414399738756151414906092225265355449011152267068726417045644222323488445626292574879744000","746567120547823334914136339633766098626636643449144032626270358619125402826113269699709721071135471625588981126637674402048519990010499180844665151971356149292818375448504122545400227696621572263621729512461528550588108384619064912224884465737417596190735966915167530332762203074440688676123756162572829692160/208334337057923929636884170505570363171441147899816815785150954417598643614152856767186132467069365605496210036171429712485182162940460120834349006784956522600679357307849981862006710239311750261522832996877712350330290831638640913932265004107623954913155144975252743257846945609734368518424172846119306643431","64649371728330695076928013661001819989330953381731372450140483779536126948957993261299287753791770622512248630224724990234903928056275080682537641377393210728546364176267034339221558641084730052304770498929958838997239635790469536857863963589118888238069738647239076/17903951498200212327802847425913723358452100686246224008745414214690047078122925247086521362329833307849817944645647750649290248110509395628305970523384831671737569872597295947593410067364379687588919135621621162007748635920864926867870502568935739725312687094047375","2454918942158003099688922026016393688092399295166304634317616773083386087532869193458590448918958337530406410803840837646465522656670050113548208618655070231274778592766244282964463702354872753657766121825196898916725498553882689210280080206627916046484942827487726300822318764058084323314109595329304407466188383616/674880185931325925966586583820010578979699141814417326552629206140252348822939845006845669570885271576698771404162512001549922909048916000017837898649100825976232784446638776021483802989797501705685620612986771521390439936066527738682396560462899753657942715306792783283782238662155922082005591512296007820682995125","74018558041066162916454010680594042518462756234254788158141115244349044958441521749277686851928706433556285971088455226217644009628399441967508838553345152310730562224910795446341601049647392069373970101491741830623078126344928804029524181578945586663110848142571149861/20204153620006780689923328634586091101021423979622170579036140596085566172775051595588438592742563923428900864000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","2127032036758045513335690185608563023954009095206088224487365541995326714285119384743928987635752931664240752323937321097955456543854943206092931247498833001499955456190701695430459583885125382086777607021670447795321669948733328973350279846928613949120929250312666393359442423066212311060931469017737106028339882830848/576612418511902928757340062840968526862381326698309578771238715462180282212422302261044980131594522407066369222998903808960617461164985318633518680304995784614308979881735537678182134128319596636920719106506829571072447362052319438091347699720147003209417806230149598345068078717948025207635448205253184540936478445125","35289653975561083576641954928762116897061274899517309102784750384002335187117263273488751066569234386120759866204372398611196356888479036949053282301027789530999737306501029700128744408015642211359442183943916106790666114870974212159410284751571905275610921784716184508440/9503006066880728386808143045924119024212377150217533250562188228062174064693375135306438120385877320162710918716613546077156389583384656340709638430674364232343609717735574035535102953482366914421205216675248471695111720986346092738728929878538430662191272737183832556131","102633551023964794485575491065909467125458972250222581133681080524371507544152979467328048718122409841060527545925136196267751819689935599599321090571687632103850847605493223603751038996548520557330016046032671961857623066292962260173840972332108111505971231021442896036760967107060309991355545554631003681544611731245475968/27459658121882266328752886605529964804078316737648012166874496015808620265471203512606463219297059547428855195782384236337998738233668399173746663289852416697917397644234441300570212555870401420579737973722145663287124151049692290432756231390864184491891697469874600345958989433125942336757049639797225309327019275689074625","10034393558388390065766795008210457368713365491566387292163814915435906649268119060550511145023450790393353937124495488860451123302412204483570913557762460385297770427946219119911920640306914453207097103853766023934602534502476962159682750262143380527529536498215384467975023/2667919902603322771586358077760621955455470781865624844984169443739075976572061827709528710108877015489050369589117491611045518221354793418884447632063538994046714401229510497599783726376490260140723032102883617341970952663947646017489439179953454964374887388652792446976000","248528145263843375390386172800048509380966183384567983242213959113927668429802237067505890436957693495616107089384741585283620097982859345081736730899912519273262934785992235852866637878831878448348444611412764161078458068549719800733237024285525816723480868704742804077255242682077291713092790250511567621735004237450946304/65676865669148624809340872151906045781446981664561196686217551358486802274698228825404698950974939545099727242259547145392352658637333562345477931951890984276718673618736565926663528625796412420753961231404680876558659735251469326707567479071881966875336951133475135427640218972722939427821842173216282390058040618896484375","7805448718805635696495809414501206964843262114470109146341305656318015059743127114324245035489577134938579856003956861881125856595981500593426840968087618241785931128978516340812066502964561231235073012672356530509663384739132686548934288703179479011016719045530855033205271548/2050525178024039744126592505352202216905491833360272553169520915020715464206141942151086176509423406413311520838568324134077402841030113427309725873344806030836314500267104070131451720947531994814710189000076651895520222646974590481497382830325485174899169093049299764813276375","3355325071293197839434119105039673324264765809771192815982246040415580387729382404624613875653005261578877047405365032178619450963731719777167015959920645055600439987161800547901539269321100559393048973255388860193948274255340335876890491746900991668165565729269698196233805991206691196045182214641935483083662356666996922240/876402579119117579582569839757462461050855174353108858954282915644790659429341853404829661899850841645529640454766173209897510988090318303454542547519850473808789222552969933222203420847859171250332350076509996295844203965564448154484566493395403967626596213792922784509892086361572955175655987334882030766001799867659814117","218871061991045868372866381545267589365410350294028138778572466235486397478028823720846191998825628156716190463263492304639890659254282445466806224943413446008645087186307985343574807361972238230520975439736199291019544576443791916302825193643774360055545186783819367378492631806297/56849560726416896431557940314760680962653658127458002233782028041537121216487790008085876994020812492987733987414743604239935223783349870516284048368761617736127892160849065895223288023531930411718807065209903593668117085505482007061969339237404945180379460053180570404846043136000","5008685108365226931582937964451700746853986170633433728409171904803795018146152804690759530990140552460596075588463394200510044617816085275660078502126507209302951286606953039953843685800941558212440519542602092919776366067720586295390886070120828199562643208637974347390938772070049344991272621102622931576339988103674070876518912/1293888539680354282541277646947380627241979967611883341823378331667976045287311988103163380651334828012840330710760757271860219584371109472132211215957402251594055009937397184768184517621978947384029376766290498101728971145633139541827544539988344772578184316843734267915665730981857376872622787627370859411909330227080697966353375","15388340113525711660227566446101909585796746979396093776960989868457211684028149502578116456785221720682202816140911944661051001675127262774824593420825587319436537346311831003212424497488485098543512314062112948777572038731823948224734505930748371522309451168088057190162878224801232/3954220582960831691377435160890656173654063611768428458807273708040518769541211737927975894584024448193835165167801976423275767590502552964407494549049777006346189436817215329891530811451811864579644894987864267389290848598289794977382504890216219362031324635609053075313568115234375","5099039333987561374222193551155323470675617979816941646196895589439391685938046865391119484510329634015275893520725135141878751153360264368353595348921951280561029028912953500944814771064409611917475818956659775131751121312316084465321917769679881052144364834485866477379437705913911371481828140817759401117780199246301705600020671104/1303503600297679371136943454060319958680553228879031326679449263682048703103464872914972900105569835004878963701599765030590097739639045890060548760692125546754294514068052902543220382104483822438283040090444827980927544440984823535260277595466339403795403200720622852069244768910603820007632395190204569927612348189089161551951106625","4902837141334073026145827027361937996261324349722726869116185158777439337041263482852376194988371853413467559557923410949898048139830183335197992754748294810838187068126867611615800383834975563313220497573778480109264178673389149671194149749735833378557143135481387904961537942569904075/1247045310545991266291285730016853118981099516935251861146038369985109288084420528171217942065832292739130145780833406014673689119563698528225048800794718789218267628507713621235056538202070171596177775095071513194885568843375526804796016261173388452184505503341132236719484809714335744","38114743522716832107917466438257616720476488812538316101658139632867788464381862291240727309611460187159930652186486096300862388591521625093237019662273764387591494074792574929490381910446287947994150655077877204446864004067956087975012773988833339521775463977233068498404144221045837190392670308437391686081418318624745039402145439223552/9647001083383999453668111809775451078976046488746916070976218645431946648087171586252172936600115032316383427265217993193444199863138429602138841976586190525451324093772097241349417938578878934577091671046050326087898259692917931230974174799815198493279413438192301437068820185757869608523761456160341754512329264442115351926967120404125","573695055225225727008803730767518906490704995929177617646275646884555707960986625481944101622708415415988844740028718027554452662358957933526173824325955904005404113684003841990198157072540659184995738719040024647370869010473254071681533880576462368600901824622431045529064651675640055917092/144509482511118816399089096021290587489594541280398871255876563615464628718527634679330291741479135415168539765887291789615790513527330600394937614433502341116068305347468133950204152174094704092402978083370792135432486240914953928188835819767755172666693219213868545854371103120604946200875","23876960329653589647925126180903391687666378233201794403339630995420215267415575142266707357255726330536094448314199602616026935251126469221925945960901748679919435908556550271504767784553484434363646489174587463466333864577705745452492395785557425904735048180164697040313528831173448025400634629163795223739061661461986923675833880378496/5986312408594306954013526197465608559068621248896320652512228238115589875514604632230098997609482248000888567135685167138762172475788060284232459813998201719590208742091697294562538265829954186149162974972471533202880368317237508987477069872431064075005305838801862900501819963793062041081601844759452202282545840716920793056488037109375","58168289917567723171226992383559866214094157894992327555495441698028867727845766488121900626912848698952863438654895252811583144479300382761129433911280049009362667380001406579175563745824368613319103673817094498117944856004415812877213722455299491145649879676787079744410765053845551958756701/14517067289347903655500020160671113450349743650636953726251191692074385521975132268313263723831804150872238173602847065423463131917373356798750100313145228608894881457107689499956903046984443545789053438946050974567665049237414588435796381674590098629779384355275820782532479708807512981504000","728621890568281859295409481422447012528302594365693410763821707074444799793690738137592101239862736313347273167450056625929591960610208335290882047413011571781161008296084630072829079783328937418641417642857196346026366370059522990813537731394823630207433267854616768658990289454635793326766697884798538576055949457122067828153655416688640/181030730759516991863708593747964787874073354051675597050399087612142539517308720603687322924426591889179726492403913356461908748733972707460063017057809060190437917851790767968877215795679844983288935075688219234885360839984681619084834228226744165610073685719017596630302462070188937998558312507638434329299017584329479516410907786681093","86855946923438322218622470067224691860808273886184997065663554841573982963995340977083049132518812923329423480393306918856650577072525633920456721265953575424233701929892019410099166322511413146891121248381648145391642571638857576890568882512129960291171866772665863159474602604647289052079991768/21485753507365901947528588896402264670781310878547726104482740647554738151100954835784115119035980523529677083504495839730499664052882400915208251594384038810917282207449860876251558307288700200910747338758723324686939379138206117634546981163355060740270734146780942696291669461182599512320099625","2158989152301022938148680102142188531448821359505188055264665167313418619665693092337665573150374231484840948447637297247277576415460889296724813940128955070240137590073233263168835678714131062764247434144994737610229909964847568491446606012581370840699582055341626266533733744293929658949697805855362114229666626620766245630122333733703618176/531794915405164005613733454597931482878479882704956110685223892325074211694837836221759995948610212818642789132749082430059593652854659130217225506942675608692701447738732031302987802196501895840510235161825501235133794449421919927396142470196961877376701957829921152848178076410141813926924749057304222282687697297216661687583257901415465125","139432548574396829074586704387656697097760057897628994548358619815052936481650396157428747411173567801047221928593253479330480454469358220685854351236980383914223693722868233819483137401339800304943891968050399345430243790898955416907228948287367356990263740207046902209563417267686591994743547621/34201151688775214071963206765436083445901621442002061707492082843232231754829227303539041286301398668437202547003300396162741375435703188500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","11008517174872833286150985180322584448162884832099344969609291070844193524816852920942383850580217443209402836100467940651581092350600329145627967515818684442171571156446321228596914355704205623857871497315955269266498229823278800717909321269179839084452384509142712677235552103459737790674103994445173074670347080506698168482564009465276165824768/2689223396936080856855299215659204161946704205931885125148201643087176556822542895325191478283706585400237901215485150928036895428721912118467760766508162631903585126377676412573187912443878232521444786090510891599171741773242011017926658231638022943018461086517502584854390836347781674626615709751386455292026775663545470794167629144456268750125","16108638074211260588800537540680707641986073914251424878121255234668558067988171568946079848860335948991834525552515669040163026131919804987340113244760738846884911038097907756220945883750502673899084880578229601870882631165510396775126850307838505063922101682333806284668762825609556049426829531780/3919363961344261777100658318137884299575193089462944554282218278496298610828757650104922583359642384253066896538203596057302203635134833545580869871333892935330950583664400555463557735723364497947986885146043017010159347046389604172186788902608216894094289769850517098027486468084407618748895626853","34420755849180279597302103726180110022640946692592540634353734157479505420320000324260530767186132260970572450489530034440214259559325114511265075416512316229177952140217732655405289808326341696986755141965043719344169685611217958619102774617224847284122901023774956887687026904767714958090256282893003000752947427857703259704682455375442735857024/8342030311716679826889917494957593165464748884572298173556257652389845294530325764837124998293398445804458613956489096007564811101361266196542129764287084823604897187311540561857741285793447174119667215803837719660675298308873496219385226998078648428368061868944322478384684509466965129972030932418920415308276430355882329457342937549162000252625","345888075261020004071220843714060353763382280664960929903544964118831237876694384053904571498830068831026644303797377762345709976595360421502594656308937649239978525713471393570536680412814805076323426256584504251728507416368609420882442293831684681071553766603478479006495757222912500012444787804577811/83505703731469734628961395063481893801938371516752417759131774530720075262459158384433785006689548434701904106312038822969658455364219435022841597243178757423598248565463985786213156556523685666430799283870548238467817226915680747412191245046634279766450629886904716776719219698922088211154187845632000","1061717830619177527082296723099890392273896386613997004874669053445943252046748251883532634529759169500795452576392700472771365240996842610207274128102329096619028487369622001737128463631016494371635687841733644339636164570819431573829173533941056258744442930643735587780907310433371453992062647737259587563398111688659657406089003293576961475848704/255359631537215747979895955806995352799574790340218399351168178555478073997876110889483456972687438702262017800167048243754141722496276537685853311434069991222324039005160057724073156957530106623908696241268268096879569794431919729620178375212905203484165745866913773304319069321426245521467122472046370356725530914587807274074293673038482666015625","274122944106300296738399632684955400761495830361663966466225652918683099779465438024846903286816813856490888796372134557295699980528187779624865098445756013563535339056233912394908544185885547842235097677765325396255649207317018754967666450708249125316192200151505568416495274671679500594656671785202496/65687592621976546250581560102201535533608158256953087745856906437400149205693427285162333502528793675585022025602144243543064185647792948495372442630333800126269123531636800213405254045262127593759539706750242430153456891792533267948231185296091297979933562727112487057234422009426868531651634706262125","7842680480716516803148821198697967237136721860017131244266974996267074742248599085253569637183007740566941125452215834642683053334607896723447140851344501084122965014242091312411884985569341166545074688756440728922408743841592658677792796881188604773469108807869960161395759837407978596679911066586626885830991556090978327508459276025943279064965688960/1872528612245648675720382138045071131304652050696842872529163720558126655075937845539792108048310219395746259570506175902206215101518698490144716531697689534559827422735649881381597761684154409796315455445459537515308174919488497154409643876490472215352056502193150125644288086294418253309947229151074464928874881827227706992859640236086417889990541889","5300824422251242070074569186825929119848111723012841627275830216301188228660779008353049603527567784119877706984722171178137272986345560485784907345500893648715341273841147320288851034078863843374665850852481747000237834238703248634174397792745914847774297223176674917912406659831206869442510948965571661/1261140476013707338477604677428573831791396352814802149994640617701773078174882455512668089072441176857892331468691160991310474734143842336092636848492066592397892638052212250229129355009939118431643425836944282456647571558383755315238500832868535816144280088644939696339160092963629012001958205063168000","2220223718762215584659309059880106334425515875615107369399767892051551634000614327272260081056973863669004224981561870246078120862256383581012183852291444462730018546753183156982897386563561418424093883164027305254176874653780425452987066512563140531367766900610414277825262239199580925879453806414860409441845631158680721091621460775043562065815179617536/526383206607841251253861841374779803798480623722760367843070466043030228662340154304405180907941079883976168609082254331465595267209149963786388600028701073430773581228212441424400748220833542964971495005714483235359479470452593264280645360131482713147116366500300066771223383007216182988263355451923333319170174755334598973202740108032097242475554128875","521891797109626296684891455959263713257353500867652268541535940159815152120871142196535233326890353914761242025931373491906127275561002910157909306979093246574207104081108188995072105948138299097848175016082947174156278439986705241571619793059501724269644447572323501261424770743329858038040685313621446524/123310256826873923765604825413207481739886340225713108649758575106598510022338480189649787216845041382860899099250547657534972156328080736149239332330143771138115695598493059325064119176038137294863053148618656356436332991079150723235214278848602671333076219529535123842212129829931654967367649078369140625","66086044538329677372986118727999622900471937619891337714357792768200341519193500393739322894033303245376225584865369486696276607060432449792893028061817203932068085863800494054274423512956136695211796751845295921015953538329385253280866669403169919614982155350899648626481405781514434761541281229159396787287553493046927448595964103589100429722948913403008/15562137339474350565671240515273666798063901504051979980452491653975250630723677279081058884163396938548780856293034775459223871281049026140999055923743471466471830572672766633086347312178711643724485955576579988182546105048041649947277672869613992334541438784737993706482731696809943027528882927942967419447250586964258807454003775693567366165507144866375","335377615394100148751647837967017467711612297170079949298328061159559939969228226474615711044891085626519877634842694983669611974807129333052471799687426665556738316626171408219730853872410792831871526174987402129691897433888027072807302411474690613948951673562473758814664346259109886876538510453475290967835/78715592752271462306588358880337347638000605031000575876214116610339827495261512281635361568951675037834544811575026718101166562072917855004822606752296233435017284127594847656529606648345533195437635894948829857913798336356647286032372695130461573940500785137424365840081503133157308796505622439791698116608","20090879701618729602554170716780970848925039917987945471322994867171660307998603515745066411687983450400412739285577269751603921163835619296822801840348319742203974023505186187060251544248644338412667631232247108675504629538319425769464277309915502144443973397371136256151336255138506001292355330875114245901820438821732843540725116728866301271466614762497024/4700223519410528857298732096729483544820841497820611795617923063440946097326817340637303431283005509904481323205480729806879570430868897342398783028649633951362398196137429076844504529051072393709154483678349272930361110568616112723747726853614661953537957117231900032044221535502745676310313569997665352252492568100075191900969170979460298189170486601502625","2904778979985524171206573028445379872240558084236464200857594814631031581387804621371822074061289363372523364167184697785570324832815972970658633551879143187709707164796663015180877412717910872234647704536817108676736661804878068078543241390828229923424191204586313620612539678930999769543756218765870513049986792/677408099044823641581658869221044375312077929976719183424865834811543737800956896926637625166844372424044003929341361734886232742770909683021563822987505236295727478159938135467975522336774471915167606673489722102077041330652185811196423400701795791669780695158730756241178262962515917389382302757366325768069625","31270155809329751863885224732454397292230969002004953832354065319735530624996254695453061851449600345977646455072512400760539747054003851289540339425848681804190284451253462663731135337775088379954403740058084949675460445909826322297817535400604180338201322667139062500269285493417563095365899631360901732684124930296643108551710704785906431324876072470231424/7269578038000504017073007978844992319987411732848567116655821196644382777088703228960020894756722675887473977480537577509061256138261063926845643360849217556370868752909531088361229374467207196928745673402380473721018157327193509586295879051411183657185176812738231456253321187419224704301236205478184115996135940848503487199394612616742961108684539794921875","432538822079707760382094121020421735679118830363764570640789368235407853152380328891350816400541189148550353337874309885334920995713154225799660601389784410911658967499100610376065640785585342035058364676314084595283850213942576431310823836792440218271879354669291052589804956435743500204185107215929849054782893113/100246574739326291035824954677502591279343311051719151327066341370995390423713403739043396503785261917771859220535505691760472395306543276314938287868734009582906895763073519374099272340577921671298878837400921045252035507925021904954445172372479744465666760762909731237634082051855588025732494461939980856983552000","1914333673689206389116942789116917579088664511118582610293383428712902211612554212779880638065888518488492298586641997844141510832940409501694726851666478650414191249534733087933879981733561565249818572204932715347752949087800778646065986244657260832234479202201129845117955957242616947361016603702640821256099895469088229339240402478576285854783063612307200/442333801076281757298117784528962837115323835962460661601905131618341609371649347131724700192551574625400701487125984359494804828935577124602622582550626336986871791407398609915208114339012374456785705161994343348351473385887949809051796407340988735853810174589261300681030826392672282630613354461927208579993042968520650313621522933214063366558703422757071","5704691626402072213006354545292364761246893919997531024861408248746241619817955824682639582830486790618668221530365426203424888737658778881721063941495350237419723855000515747725926735319471480027293210991869255971365522170749568996651406002311020883635577590045650037569906001924971041810547543163363976464780729932/1314240362076792592671773873754757443276256223533339004339330559325754574023619698171225777585408160438834449576526997055649849875516310105297894855264038450585295422343454458568152668980131977005808840141079502436391909349182185596381509091427752151860204235071122788499996991078935216686010888734471173124487937875","451219364084386208718456142329444023337343409261545444643031014769484085278440612677813682892926852469540118625738238137458321112005189595703619178533263706811689687213128887082197330137502064260105387500552856851972124172206996205919556553246133218441769325133725631665593372188755090094541462474970525820334385058333756591222492801647110594428922046641945259392/103648250172203340865458115839764297558925693061798169434516001775068769911768281084188883278842546791612199025413573394167639925287068809631958006622842716869211374513136766899877504136929177267362862319748507372147243911522667591375015611312165464514308451222180272935398828092646393830572838772085366567154646425598388620105539619174837489536378605144891769625","1591076564577634575701791393842535460875733974464805197283632670013516183281542903377750304419996681222758401497321278555686661981435637461350320471258386388843198706277657208526372100698700615835733712519332548607115875288787602084336341594576426630670911478276101702119972195558314357975365863803265163991961173/364433108410193393847203348728981296285742202617988970384277162225847256295865554341611171460436362780497179090329831885853324392923449579538286804729856000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","5307507148709435807261229345132535134848030343901300324623409721698217134932866488937772986386501538026693956121121771089740095760486362654754229904633476234090792827930433598453200536551779789049352131005222659995845427680686677324963223653949277037520711609343166926627713758990384011274777087968799793410506391884872456420041494598273703914689586637995139580794368/1212244290381524115082005575105703496583315188540177702780216570265159923654197746388568151706509243638302707511238539845531608313334248788980188054651601536067740709977678222790481348003085034888244447626347312094586389347535167903408519024105748523384932942441843118813819781347089702286481924493361058339731949844620763272778960860509570622673048786968660129650125","3046577098843580578619955603029073328361298436129791931304665777036152915858575282362742008136721284817899542475666054101957899858138590963789072530710775790433466847100422875906866496318804986202089528198912098377828580031852152997907433335176267300286466072997014023120087988748396598176622765923059385876855303940720/693911859077752895978833241338902695755528613729508555938416419864772385336777924892434701804078893822446727762077537955240605927550548046309823051841326355655848406646248595628715185413852040295631448250459076043816328082561248420925930431777502622148019371383254316636979070731427737764160145097293260938978413488819","155310926743873343426312607182060072939030765297630534544899230213054714482456829198485999782086944271490229412707980997432528653509945301574794242118433868747172279224118534460563400440670015323324602117517342201640016853927923976796453577048995243600967202462466681112804476672348206491490513419336308575442086511015101999847896197546900512764233674747415844045184/35278162986589659300679088538176070649273991865663041616088851923111175518405117391134863644540911005782372831496121355954470744169969774540892096320978686548284501139861783292226140413769665461494668479430833892857992401391262903582109993838728281915806394747833588629467613308837196269424421131934859079260185052081536487462257809987002198437182539441349474426375","46729591025621874782758519074451728476386657576036360734358719976400940301493939192083339293779149127132651616972817165172116269307276487158069293114860391502484125554406945249728802484128756924044633825692779783425628292959170597009935305429239702926898931975023598456207165067568919757902764815108751735753431153581849/10585868084079030838651390738371141142245086465033459640458366146849314274285871375459898014414833295804139979016362796357043372316321872357817727821559232353993714062535883074661734509440994664726425399880995133711038483607773782532430879196405793694658185175583691180757783597895616920432527125993118171361116684288000","3736372348124144720852190769710129461145889011598636925228657393934132828633132357232883470466940330848177425542748100211498184494252714616379450272611850068867816250209867530921278645286769418080018709947826876461419654782341309127709703626401211996255743831998918894661053669189312375159058718767082163156988766821194002596331826150321864927832618126580509732359424/844176851007504003627016945212023239308348428094023437269532743221937069345682900884618378849283002998220513307273333096775669556093005637615012750733216460458689282791632437851364674879152695438589692227159038555722539345972833161146108367329370564838671791241431125003401861887477969954740544092178721327724620450947646209914621007186497081420384347438812255859375","1258774755828991281578968023382624723772927642002016270484090409043454336040857926581316994594109169123354553321469500848146015719851609220423736153365139804086413284787598253618361769125996755159571523632747129480387254164008968993734442164892486441152227433281625391753702577143985047832519062595123255569172968685060844/283659859661671181526547833415653453506477950678651675193210969173130116121017723360258249430884213011988678011357458727603413521688184521573094783291496368005697481333739504490647194454695504722542014845706216224432373442438242355188461951883454664693262684873988061018976711201351382163527093784753398257094429403691625","84932063355292829988908961192574710493098897148701473172754949846455626381329456661808566365329266898990829247446356970454502007127269708487563279536825277374133681167235811080298134899629580318813382668399644553111080625918213250223197440426147821225593304993621451053135332451997633132772608233430131400186571793929377129211228689703376067763625568623535588709576320/19089978133324852910950469658566458037096027722326716800113107848115231563787455584278193954518442601810776347091253561956877155673550458955562102935555510392954425196165785410319126098393353878286400877305164869548380670204577544630353859009177051698096136470072137579698473017257397949994722015089768745013713383769765609613514021200888647472804720456494757423299627","802638881530832431828249604040579750916118423833791608589560402449036920165704012070349537114920882938466635598602387718300074733476150548724726460209016834416094317724261857969955414000155807312852092720310159572547644569797512233899495300028159721348599816083166712365215075728968005941610056018023633235372936903015771583/179951197386119079732438617407921535065140503043429174394605652913879982486051627760652197484142547447000508189455126493868229565647284332735552462525598465192073558793335913005459266977086104359621022691931002488052727597513413492393525660272900161375677499228252863529934576881596384036401784035248649026076581302370304000","25208742399375362881099811032135575360109715964024747212026245529087599633280142314962581193303683759605084995818253124445773115574470717199218828756449187055537877478033129862600982068782249943150019637186466260707552416433010545437321814115233841687700051830170191107127799355485920046505591193770164750886037885397478191534797655616745528343172318318678405576430544896/5637713398995569614196397857525646325234056219513202928587580534159596897880731043336790273040813044077153051260989730372846713618900145444802234629922717464041261370803598799826604841654608724727320798324006129524610666235998113655193642594744544226880944882342204407750193512869672849910003246504052298022468012594459974209940607450480609190841893267203392880360823875","732332637178584560220688900268566130246820235956768724845747830959547501950765063982943061181526237061809052444110437930100210105274824607344902764184151030827266142225894655531497849161692760385938786736436977268616029862577293984376170905024712952813234949508186306774257035535805330366742322777611063402455261391021097128/163377988152179636922409938163005948596822656868040662831003991395905185823836089887990201522673196719628247106777881741843786365701135555917263285268753605514812568258179391272113405920369587922702002732667842511108732068683407168090725712401954314293193572654347237716691784386690948494003094992876867763698101043701171875","22391374854299462107923583267570593886002658786775211597896252879708753450794332301142909715845151746786016535157797023153041007263258732991465037648536702217273897876864351559736449481285518249846264600935543582562018874574655740660800634883403597181876364712521253650744197321080655028374602772696770227741610874399454362583980465225235674816785988164157351243193265401728/4983275997188967758382167867656806681565521964135131710678447245984239733544941881418957694612909599261843693554043504855207170782744518943778096768859337980470219783210191765678908537645270392500777411134164918803949155037581108678968701961544979451081836872425574123683574475790997414488641534074873248802450108535183413970057319247033379016606809226547805269752123746375","21252344995592269775107236774689012760750850598567799560343535731251766780016530978663079386453430272698006977668063208502408607227544322945446079708000304179073184745623740466334127867464883762843346619853325415963062181018736410570113171387891518398846617197097407612852037905687899800932343156979591740310928257766081697645/4718515378484509142377558412184183991357747235892194234377932213613746008373918923611236346330189287336493794499188640380975364991548794341177060325509698404571318037298112293926833877103554546466055612498927474225619680186119313129604319096374924037870803554153458104225741255753314955115645304948564151765516183663634546688","76703085666560609319365659209445044957052359500745196718269665234646121134787807938680787341023203786904308047981099228357850016602203539979246579454229078497537148799349353250167621935384193502383187510928609818011142642954550330069991570983902841318203794113898871515702445720207144863877026526025447819537396146822201819435536435835285098485990260677737192230985069824/16989892821104122916312992616665764943723222199277412857053896319814438961475117951904867066845412639236790762432996309717924037467863024360211163971190006272168845197000304328480920483651558672879967350982199768255256753110375467976246339260326422891913564151453729285191351273342206198366624882195135056176502724912849575385576554208844814085228696838834665339811027625","40153831166521391225489894857551838468150576827129133168972859441122728710165233865309084872159583787083130713473702296122465319276461991457173085312407612757280915853584698420083436946976844240063731333638150599017886937783470942007376523947840104246927580254612991191040951001539641947153847776050138532219595746056076776809812/8873576113581065493273519627544307418139908640325227196912114520903505426722086265723900326735989771660987609604507503750212298754414472822477243293638486047313990878348820573874809636084574108909615044524663712495422565151340037564156235745628465172219286664653343193162657374410926171153516871765680561505768223660055617934625","200736374277835272485186523480177159453030082779872429648449412313247640312479214261681899286513818912991945046297334418102711629933437654377760028476767482162031641781499114859553677502002901248124750539270235098492377826240319766677856465093871367817683734079621359186477306173620331748496369122143019303740252461824523590096923561928354020960176605008889579578495073283712/44259440065125442964014453739391594153290923937737136823355312892557975399035370631521014554980129291582486968083228888083079118116286312583989433037097397252506140224404130371160608365777625538148303917306340620019882928744151294738308047800711028158277500317134537540772759486365658024194428796846364486187105343266398338060080611643110071184992193593643605709075927734375","488459049325494693259159444507437983381645757291858092983371672334043029615965882574409808932509285079401239403272414271652617474184321852388397021836909585659327974611273820676128650810907598106588433939541654215766888212287311943387232664417347883717203611092450971786083806323404432266197250919880225892099146722474124874256523/107455855466267410923480140898552598306699341366032095904938430084768624148829473848763761936703072253841751966906142283640379336131083461646777390874405323298406517250231389493084918065243079819898691146841695350589992171102939046740169198394671965069747042621265775948217054519855346617967866614303497258042439052681849864192000","8430374068596413768975326329313648683222744787097373111477788794692418932056901235174019333392845529821722488982447683794746518712070635063397464904489452840169472596494433874412726723065560358405027764015273789053064830528919091414531400589850704395887250756457780868677553068164933299802944396576360356896758745030955907258232257358056931680617626606715393885378887657377280/1850480358582748412767893656294669486390769246349349706200869446679212812264400876685764762211659843658541567071977813110496329850010288179702589501255367345935389050373021591572539260951149696801665953123597521983257852207280970577287472932167362521740230973547070264273850381896786822127290397075758780174083415923482640313277341120938690594859118603017930500014640169211239","58273615882491925540881784328370957720539797010816130007322211512070634295154626813477498607761260613353633996451797686143131893884559909668805628269959901044961666535533876340116728982072626875010391195372759135469446048394835148654407846242721443845351855234347422256700864370273092971804207514736924787577569355949601385705517152/12763172138328432984573837529764902730448666594097466544652830703737195804747682450548488162227364538052585484418491914323658215406327363805353540266048943197822838925184942600367647278764952826664684839953902567694832690683467635727409976388280092262839126779730168889686628630302519063225007497707028600865624133968363921915016625","2685278694947152969468407055109959900160804835228466214479525891103128459065131221736713585038130737099067040196326815283171857977706979990467444622550497565521863441617001097354649972660183038850033950647594754644997436624623325003537308428828750008305464174443210079059253920383411910911594636045517662796811001285984447671371943267419151220518726940455756833040934506414133888/586864816044968996825907488721678304211296267371936463272955488077666796280028127333229453342355554450708284934221461946991556216095213627059047984199091625921432110913096253352065238765240063555347292393427726758010888546427415276046238297382474708612526770055488323003698641493939145624184943388159614111350839555141202024991876221874110644879676602924730506882384603409121625","27700345710264347957758638741952394530538598225904772664391173119594616680996031886665218221392453628824570256438960349220263575741495285780845399187013582169907518462437966962923592601721119258663490655013419675469864809004562272799012227293974254329929404036071055528766397079743200179924243479370594973626764330855493789112414191/6040997839051213541001279276287478343874107660287651711609067205111574718442229224212245187655300348484144001298428958025052162253854676210451657425437588244676589965820312500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","80160269787574270953020489212619791839643207793889009503234879683494928396231769167082355143564723274576166638869430572977442020236299319718643894871736539109822173538266278165276591962215927816541165548699380129014840956895931285215480350321259054359835472320394089646764361802445068798451796525897304221529850133401768027469126408090577121172238802281079916258951770135485696/17444957084936455555074876721808241311651668802091828589911310253709517226715880722948267977560381436307152342821304525073651379763144281678911047276389231713860392794975453518107055568765009486973017341479560154792340888780337029481646046233967923289468141293699236815196553819373828280398488966665994092877680860643266914861837639322607761804740256920429518434353839878280875","2352816897072623416220002134476921108405735955266703519252095150412419264317091785317803024028565851487861978477208755211589867803009700996828082850796103789009194767813611798769297617674631277847910238088040257037678126316866517601388289837575778165301828137259948173292658462765645645868094197736382683775415645307647043205988394700/510973411316690313485681833991645423802776865720580280058344111363363091616558230182669376841383375321912553771027107891991318313938505988903735114191313214327683449514676737796942389784957658395806951715454372568523597420866050825822028817422805046287798054682484158011143949412956697442991898914560191411624040490122951328364833797","6403295584873165688372907494046202150046769667837790834896334486679541887567517050446119511695248926941383207478170182650927368177009669717288184903306689332746127845953193587519575304974203099873732502605739219028995266139383163062837007982999189114810534856227848568800302527760100163350814120545587074865568436789021082619398126713943637898657861949091545516403987546145915409024/1387794272010111535893205703999712437783041553900341112488641528986385462810448493444968969845352401058333929711237978223214186693177251566069419805757440174840170213159651962686467523533938145629444468366235554597245713128812532716616087753947246800626006504878203666972651384731498770435755225220796872155249202960801768048854869001310722927230237083418017482134588865244642658875","82993247683514419570466529457059660634483860665557779709153549045427987672829778520201315148149878525274005978368939092115193636113741972236218502664881450367443614971109677363668874484696543982239492409231870942414193419634675024621942196087473557914167832058111113476295926250739099284241826553737074679953551191767148712684157318697/17950946423927357725787689855263532224005643859095168852729513034456208872420513601894508438640531171097082516559962755244698695622824386001219435651555513795509616906355363573638916895074349491513539093024980575852693293474288638209680085037286354050958859425647536735341886663074581909148323105020337857959651624760873736590065664000","584891611376763781852144397260140844977346305541197362434227194779766612939978629636198589818106137319267243431810481928639442343946346034433828599323416877248326356345631611148749005937144684862502198147087702668524450709118588741606955966569427636630159793409544653944608958808602551061186799401212712216156799273254257486955348236914237644151956226336750212957092204830385441792/126256710861549838395499078249922986417488985866522660521294610280820007499099176190820291214370699289977888813109514854178180265382471972583921477022411657285850911270389720508719377071949050253246021921916685716353393018411683757067093259101151481189635423399611625009617884983318141463140199839724797412514785751549277231259345923662499623640886881048572831787168979644775390625","4743054867460856425399742072925732465660626340183690464743217147109403130730445842673866624947360862438925194786600531200056131309608642363389833474026007798643235346104937733349791667694862514383520689594596660275306247615314272223660862212527346572811422915223417783887717426641317921972456913534338708745549252254865615725859881457906376/1021840037832289788284691535543138164288462770384961802287250236519983887262771944174557087207566030730743075334169628971336358708580124427857321953981475719503574867471090607795242192417162791762511940848493176847925838738242153177311649130718886794249673254183907621449520415060660496225939963471753122766421338241291756892571824984344625","3784664074155769467702999785016514468281913375341134899878893061325465790589101335015569840325786070795267055386681356241209412947116340524588831510768864231937929260236754881829005065056310226407358204278658699999612596866156294195316867934035877283950841910726224355461522065773816109849107487214275801829843762482082803559183694631856772777313673086715631547326400170962722842240/813783281473223559981291694175087508812520505931454895884442580280342455516154674683217348039336712901850738745276445107477919518905155156380620466135946654952837573797479076027688866326359448543065305071605591497778941561986579230698384305536224430794233462949056326864499827444363206162251104552740175503996670997705423888382328014210171324376593090187604268086334796245552762333","1946671258536842642381655747294621776070051525209940130115769153666368932042152311477746728678182920842238801763565726086459485050237860693394471644023999467670017470376746609892484192072297938254898880354014176373253875722410186683852253828299669530022166361304397631667133689128358365296701757782382475692465977794960109690362462330857/417774039698408581013003883929127512062321623871486379101498968145670269174833505080260389860863417408848209525427705249526516766731427603641806256289098209429110794311660844125377702016056984573671024035213045475132134896835814746425864304907974005950155657789157496389234919107772201305672421982198984613601511388413381215220924416000","328578487723377153600821813410631465225159589727320893988991729306688663770697528156625398176929288628930496338036815910669579019719633124832162035588583242320537435554101841406566009219059042888412893352417446437227440076869427577701706713564212185163005644118869496869980925214424591264870388237079776503547314587137721633918824664946974571838634860386893404364499977966899068777016064/70382695927096628347637455030970644630942872888311870124896575877585692281624151103204551947776906510366521972834357031777287506848887607457751667816514216907338309372900327919413372044625602555866294337672022362865161523684052940126509854895320132828009551012639156341878073682501185688461720664801829933689280752623773789373199210473995823367199793407048741191786377993390965297664875","2617201476921368517857942326432090876874414269689140439151907982631768946799200744678055980827789859579196832718849393046147656447672531861353456343821196812881882023188898815179947651274131166835133965629115749368441605680383605331300030886676081418867305170012032824011912531673468215561506423833911621270680104083533917562622600478548/559567121085534865189976875600841717161617153776904752351231210970240323460800785728739412474960421770806162360125774000625035522428160837855944215417821324758873127567654244465281354654299068546570789547691342609793050301258532586131013585959164719533123826201937801986942606844854123769532447570107525081084531848318874835968017578125","636225736038986537559880265988431731529837451289737542395494683393492040808565905376235074534207026537145408562785279823547657299565440309510931336394031904920056464959974743525662459433889398003683078967642651812081450227654478095420306880762753401111260630654049389197602389949892636943971690212484981672010398108426002137114819838399222096538921225458913266993881960732663394566024064/135776510176793971074115131648637508758953050390591773574951317807919051619690313331192027871176160424663811116849856489187562728496099757910540362703888937768555824513740118941387831822900198029266206334350448626733139136083404404120210893986654422850183837974770675600952078956326317698998103770833069712616832650406225828969036781514645731022616236082175582937900731419575337473384125","266695771933124633677367149389643417608461366874310588884377151539325854547826373711099517873721616543570605935954334944030816383858485296542260152894035979141266909050267414072982042090341712035518685997484257326212454742816979806460287972757626105526907510197321350895873473656215941034605746494172316089636216915825022339855304925515685/56811706665210352283362623728191218698295056176625217939528332247537278605113496147630185544004654583441448319260578659922931798845493756189402805173037491645434052737405379674607517658118427614090338938517963215812444779184193933749520313676564187507594274551791388039139409235056119788261689087831209441779870873305232021728002651979776","3511806683161697708497547617957719390189982761002154386881580160856792742952365159764830433511949678304281539875366378131195670004345568047690216126001067194904446295336734931691743477531830892015690816210752795806120303198745685394015161323982229908105397857791180342330098240702332072396030780386362735967021055250450666535422528637737695053315137238368787607412459874094164027214953984/746741569878639983491390741637813989978804202898438708743258000150996080386381281307609038830698579358879333079215327202911977568726258527646560497079622703052765164031089590965199628534477381843079892123440214378949632707668935001371616475282883095939750704292616758568964786737752325652839226013335092148777788733453702438432279149298482004122593243860829060557386699231448957232420125","499543951252504651717279461487337168721376180441322735807713499521878076780205427598086756686061009718016175215146305489885835839673419698751530207404115002383180054704927695269921072232395828258826213554806570423602966743337801741633869267620843626804016742412046844770601322513184123515405692795346790813502805238635003099976693786012816/106032986203682550514602969462803214831559442358811656484036951559991322084935692953211120289352600484987931812632505499612220494311324679562152078883141464406938524087376964935494245010636163705698220308243980789514815579319533341929989455211613890905485981353837321342730307819060825125980500975023479813757024395422041501208805339176375","8540849722242122835873311629952985285477986765819584558233324868363310302206006773828897816547299245727087876984857726652932481899766510637403577175623031467933486823994040576431755172220921921877192006685053572215922347418846423419683723609799729359551828522978186208983138345476801247634773975311405913274552616037005854836040162212761099347518242200807692224460514057530656658616850816/1809694575992816440924165741094996511361288430727981159314194000585536832192004274726651828760263522962868944612215633976203596150606503849595633388319338251977160257979846235995654357082321611719654136058257458753105122024859078420173515189641515736029725847315662215778251370398007468665986604529263071981040014321717598469319370651877296085250322599247141397427185438573360443115234375","51377057693118720457387330519321684810411289582445982078756989158447711080414032055843805733348558621949380554029375294451303430269197115810494758213980833379214402452992657502777067850631862453239349835215260705131864911194740832694498014048717871429797341104227759557199716944554347879767916801106279081864127192611546757627038037780244683/10867246748205139797826516105458406878398263495890048637741584969144406206902037615496936724683237700974333817527350121106320991054058406504571347680049945745432432384570515723033245430148177097144850158758462968940525568041926860856763884474605057056550146491001458649244094211354153171337463406192651150028767064600270112838159624568832000","2517199821548153657910904242290029026229621935918771922146425373057248090467388430999870036608278542449661971830076845113363443421757278612394167195431759807908413353743377586893872930828548256216510734912027450642648789925142482023713336937258932978503310551945630359646777080073329099268529064437120002567758664419443374110941824106727218341795100740316967386497091058915066147604481280/531524260324016969370728057738851340792702640911631807178654723224511108065633433027773388768889035083734041289308124943130099580765995149865288328550751289346866467755881013217287175392101334538392596956248952430438673292186779006015549928829953979591250274457658042926539541422697852390294886719770034058916886894408015624288115732154492554105512936468520265305162358665491880968652687","937159485027553069020805864547349554547661693803137696125140510201297417077233061462068930061915381468160677500445535971818609631674361074587732183297775728389124966713749450996643183965795829780345678634356741756033039293590264355732129789110416943789326482663579413229893878422643110852069225671783017610387570935863228248464396615988222968188/197552642195166614912991396771845374656891854357948006221100585931656016640982345159207601253599235265353060942313995345483862152489766993442419668492877390774016299878943454249209917002169480134131612530977452579520564400124908392339263545911443803619972765231094502745980083350567509014991735227390978850048088378721210219321877150756855372125","5119346675109082499980756672052066247676641510661024682574296075659671743397880591881419516307292610449161239233139088348510165442597278965718490070997173182184417648987611422446347235659085092530927312760229499083348217392125906851921500360553758600756698605047197529446594606336369425040236883171542367713951500007600355406492128741649090501989105696576697387613035366083536629358444229248/1077349190930018641197987339365056771667455373500846354778079878558146320193384166982231171317419356136237346389570422332278447217033773023556383420372685049620361481309067017697564760747047839930422553324681218253359586320952896352245366885171583221864112040038531116947187482413031483309534553461613717398523132176948321964066833901215878133594739833910960843185464241840039390204295097875","58469980853327028628854378052548435225264353747414624620847476036979290604604988637469977624105451959796142112200285366199247075503424204044884512269071061176877225315884188402954249683107639777479663275428465242905314418930053869461904934138752031124685541853599407727446896558064252696813370692668496452783003306386669962110734257851955001481/12284458784412533668960387046583440199646081362484321078872891438551639470826582933879934711861551014258493898870867541349962531447724393381011633785884743889445407749238183080941846528000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","632694338036291086868292541736272151517212971647680989553388199374739841494700315711180961760384484042159533979873604395621016272772109619401112452105475906812313548587880899058905419220497456502543971131226430775692744506047039958551641270070996110661036371362526401525207493270590999387476275629412687473362310414634469788979236895300129227082421021999210841384596617452097273320509348159488/132710874087075221626157136110978536488168313127228703025408943153782802265472978945703742152954881438058373686972477195846162708986982742647038014147903817539418442869011995988024638278746664230046452545499722614320284478925059527086663455478374200352375121910000967044366831275681254530914306064535110528723482282501358749001657608122307686482720926189537227492041135055090784059994118192625","2022422468242151190347511883185841333968390991430363660248687284021524206079162212007263606819387821055183192871951076644707111802972354128011904720586729919826758651167984507804867954970064938022106484656560866447290934136610214175516487579122328055482392137619829739560923807880779865442016530712986750711199998190148885726144596663143651240/423528009127070458603837580844559347493775236970253513203186912091140251858605354218715508091394564000304400858761758838182654201653901408046974668599216804223721114331085507752600832390227068985693006017591304916519540245902645712532993889000048992026931475754508248265356181099817467608863068068953756055334213584649136541490530849577363647","150542201776735231618709653388506394887777837646651406023174643241783006776019388336318216053045300417086929061565868663031237502137150880313922488106751241006715449458736723129545400133450376339156062387859536289694727635468338235084533552501618659272047966040838509286942825414463511175531001410923014751124732748099355476332649458471135027773371541572374016038525336728276024676601778299264/31475618522527975728853391146702172347290819252268551219771201846701658848754300838383637247014705706066050673096278897933831272607774110183488615338021656923433335661890414740664480671162459271850877855521869741833030384682549648626038314686632195158507693321505500888988183270276134667071014075017317692121986144742473139078857816578133693776368882596780120407949076129685719314703426278875","162664351499283182546788129866259011542529017155637405328005084357078048074065548349602626724265307733005745244338982661090506394708170105916177679714664432754153795772811389612700051002336719842784098507498286260450939289109123759859710248621544296008356071415713931721102824434964336667980062728653562369697289761913925215639430496443820411811651/33956433298509232632327667206936379248172049619640091186698677954874297837764235300806836350019565970550533206216590639008637925266405524715041372407701947953283803854153876844320283735281209725651036513491246238622967031979233265136280687995181375582844780830517825595245506321879177965868747546127685256867456319112247572348416655367667187712000","27228583713734183629451808889147559240254570554044667607519238865891084165382075658707675405673276615039702916443152954157535195508033284355580742761569101934821088036084480297442018005972653124248838420021440899368869744141698556359295489470499243402799483082406238128875386939389123336303631993557844565927960009744780823166462314116039469622216263221278402673028225214534859076857413557466368/5675134787340359276387085910732530678163604187009567576895331134521132071092293139167824957253050637085885426100206370974479279292804959049999647539684766632278449357893560561608633329561385765035738071726214510832066885156767060324427330401967034889966727638276371320401053302413136551142103678412692111973028587922399670456670380189570979581674699102934733563330382821732200682163238525390625","1340937726818688387636018677960518622106989311577445614347061615417831160296369500704524022869612973331444242000788110133157689786976834913297544087249593601420972111789552905846168933014570399562460789075871112224533723259660967481288525220689577290386781169316008987012566216235876842757183233207943071523447855623001920854571597886491163165150556/279054368814522483241446594911968519760869180429079780837994812436395792594449929617293503975169489945136244602350941695478861584261665582123038340824700224583170270427163469762789603657025958695551448477050958557681299495041994050951692916032501884523150972841782658389836059236040091605838583126400660344344601879969354053137568588338096589095875","8910951660339249479517731530773509037034977353457185453617569046885132434552771722727442649095007828468878374139001808825741829728375370140505088133244952288239619141544661695065318568074863317054989982620944602245967155400712702259180443238473885690297281525960618905625084639870407113029712510345262279507055197024677292523214467306898573956604928730377318210588837126450942086527893437954864000/1851573255256476362977604759655284263358595254392797078730401113550522214182030016660458780180636930591149034499142464357511158868625309442843792189394292787657774627425816694628839987456477799348874853555586931850788645677998004186437300173080088839930384424797706381282430208961565555953254145002318893188197561315855286173276564036402546798318351229978103276843822345004757661005876638005274037","84997663352987536417038496128111159210386455419431137931308301989414462311135708114322046234708053448098538629166672456703651524480738219822858469100454933583774404032968304328859365484249897913676382909050450855222567147661842184538302991526635974158862033287154321908483007506326807469239745851379559259262425675035790574846229470041596801343087041/17634687575122715507915388096857069366146981156897230620371714518707518105157483283253374797127075689236298114335734874553183291806268149747826050838089931351158483980735336772879045027213982661634865556129548356487722537193914986994283729746578044621115589195066212043187229606921062007047940293972381121200723292297716621231320254309060321476608000","1648849257486312935416274009474520589799750757877252390543329851029437452988499485179026845292068377957697884739052491455807688429630524210823560524122596610276957537756142278585091315141096146341773982302888007751632401090642472506538817998043326415693840862261701364114923327286462650797963969289743571514890723145251583881752876340628073395708716735192690808352188867334842743895738955762067968/341580411902962140529547622267381834425264893226447658723654120920549166416114849731588552578626041597847002946105459812230979900480135423787717825697955152193526724029890829615845314765605770060975538542976523177976182401820926854406945392167140347444433885786340415437006775075196031433365827874254477351374236932624514469241634422312990555534789607377023339236417434574755566856489013828206625","4899626659231633406569362199187192352933567344960498139854460545644210119722856870634652562532083546344965166340063297647520613455037240144734014575196764021102614748218834054157165781057405100578668000290493431869797883155764963238760612333048336953434663867580862692267574574465371615023999531030446250351305046572267686566999209229202587258144318592/1013522377571209303732207048597964555261512342860326827024786500686692475697570284120359840724596444209277948648863014479460188496587721578075151793081823795161404110811480269106846359964436993190293615381593756076515012514100289406862487971220020752628653845345780766244842386136740768474703009091552043945843632199999007070800871588289737701416015625","362903847358088423032098939589019598036593525722040887883164115981767777873860799955715587436566233010543937498922435963385091400670303956612881974450548904906949032005878241638546734597308786514086678561900713741746905742866635779432216761799371793260025549698865319760786921444505323758235164807966277024031605673481480590193724980659448692487108892154809490199414370023696404259691299614147712/74959603173756091922435708504751461448318819548943586676159545028063979695880930926805574951275602951047845904770828900645717477098988124553474616764040938121171776556999069351772286262529729056288451037717198273521810585868307402693261479298923209587143468206907278220909447483738730657438961435587752873879244136801168836767273934997417156543866722171766794171623224855358640156858606843576125","8521348154958613550574095745596657249924328336262127244827955886474742319277424381360677655239017583606851483318951440691757875270001283229585075137091617073509041644097526047127618954293881264113694362598157456878784814696577083997902588926421675843291157049153701100218784481406086810264243143337016042301806376864424632290226377881206765051896745/1757584673254145109614914862134217345456065873908262753169404848658913774363650863904627183104777337461445063704655164325930891269843669860409763569362863600932267319335889540453302785099532688264425988677082044905948179153286276609910158854349711054144968131934713419772852663860893241364433872853338630216232313607969790083448433666334742108176384","1802461420562646993856730082999823508145602238125054717836501201545920604020389361370931345491160549787411668288359013059160331370751496329806488246135100776263777863399096485894306306621852596694700845918608199329091852956315870664531614358379176680326508877329862713333336188556181470928613423972314983964578645688876556351433429494008513812136152576866650152623510296911708111085518974142728903424/371238439252064016214448115231139360835481920731625321084601566992497057371416121407293286027832357816257507287295719261141426130159269433199862002841433235955835172774430690352481806933860390015899973299268361513643524088242973968537595085600335021120523852420135081643310663869327371821064862449426404044951571585406092523478861879148545678639697679215289523234342337347529225543852787599016265125","88795280670112240977945082069219541902481768504536167808816453021962616596410396813316064685579412429940019071114917828928080181638058444302439626425155946562362550070187433083541414569447612195370911498321149367969974762244140788494955146280201020345849385865084095189982291190135293114489407801749533448443222584092575861096946605418438181411489276/18262596223069549313969288693970246663726147886364354584825624311486557881239003216971630599389642752648815377795018130449384513824927138566203714891090017787258920529990523519479383032564209629983810866231367438270859421572641494420831435563580050954867101292568399107965982704216434467243223964964535464624988344342084084237484262612100980519602625","752911409358158070688133336918078236438086521781731735123294741731669530734909563155732092406099003582749182967246236657021875488130304108082404134004381196925042617909108654109138702993903561036987511410396567636331465803949049946947888490287210013788802287247422993384874670368649616782837096233384279817294778916419067404863458318451722971117669642134894906235066332205740872938406767767019265664/154635332883086377656813458754577288834216641577439356891585125701020579768315520324293435008561626926046988056302745604248220408154454267643222328696606367409715369481567213640103076112146615938180089303294709009813772509602954514391675152597458428326644988225555987883250642389550531163153338541870029415077982539614784206119074702022117790679351778993541426110436276530890609137713909149169921875","15286089077439918584953144558775765002061832952090847117286473868694909713791678395221438112006475047633028543501632631679316850512797978594476229228325228403849089079675681042224057234415951253954044235099139983386056610384489202589484570852048157272551098909455253037561994944665563291526597323199530997923272894119350512727802414680772513760081360291/3135161418037836259442831302977219750614726139657718770206960776514822107155928800694375522572523712277389679035632531727155957120566617736817225541673148354829212969778664144907503411589126111888917929495106029890532891919001138770210977012708107496187227751496980000137223047079127096028939624830654227758737339725345681745847598157538483308068864000","17723482381737693269787076798246423310802126092500438681864673375704464394105734049099094818738115345706100191580982712146882034618103161268453808819471603805345990162762722549964406042295355916458624836894291267553138041035528315839108252422478610879301656207772491548742981990469454529537049123948604931661837539943536878260665617524824604291547373872716194154198824107266275716083848262625068958720/3630091565725887087605600771358216927099748013831912080380983545872077197366172619225751217619097657405660172801849926220948413919823038425519006413005998509677472226729295278652284861834178791332630676772284971762683579047508016687969040658592436230062049051143001484384767836353233324570686249824980508520186643477313941054900197268584495128610811273834192099099592687485176400539748616360799518357","39160514032490258389003214587901781721548011632821053230881239001436341012396166857515197251499460842954863342641015306304854226194551189224721257664420778416733889030680295206179109679627522113592373938602737416822981698362363553492610842201005420727750505681358595340127099855823746410663750133019743170700888375554918213182862789028531284364877435896/8009919337434786244380818390213546866794958389603666737562053423775386173149395943310276429895991903753441584557917565343673605019989336264748588735390182130334278887642569515202100870042209261561001627386525182096090194076839370589780431326097965428311786635366819094633651297179987340498215947144870164066409654464551017761658775207392803825996394875","18188388167811476762477659006849121912679763597132233588170406666718758511478154418948855160838212151370453213943784067796172102916618102024199200086478021533171984254799008541948973652219533819511807681148179806051835318645591102296256347927018942348574774821478499092054497390790734798143983945096982240517058861467440217558586822663985584775920517755909444876443211404222400335500608733284461685888/3715278241795087610941547133490827711133909145414878217965273061493740719983191775105550559905283733134189195190321643965858771461560130864714477448011225816210219450040558581571206711791272284197614810026220745160693898421068168630870850392739817340370146186703867097982858560347971281142766235850971837330222970900661653800041795020382847588362774677568059355238174402415384788280852059532958121625","46353430636874284402376008361176880938798775506236714098123916668545331718677407145199311191108199195405139575147933283523305343027297808443653460575141799729554209181454676876263582758919969948546918471128299522715691694855904535448703118221685887195383025133924852224568922999317583667985459047407473419196367812949579858081181660610155317911318937349/9455890179897829052705408931064120820559254220394152447502395298827357144081378513080398823188243663943177539817982481713456798757563952162598464929784370305696420245648035222083207596797327498500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","13607414211126412689435920170832779523235279308039712294681570127241403406455725064605210473923965685858012114332021572088551127762628892611459785625407107300355287623761046438724706918300976102581928643740596336865698485838431972050267114940079353996100620311097561405192365496385584164725035842307146351211183443267583872067352881387294766804298681841402861626441205037637282007810811602289501477350144/2772205947240095684743358245950494400934136973845543049938212403703005150954425087866758842625041409060217562878157900197951382737615822655863548356735553650755342108183641353142157728364469706919993519071329069805875834057743793434164720370026073143626055293058601124362130539040404491770346043977106988100969901297669523170508321703496903672333781306743488573086901583022550356345156457496396749797875","23264350093315690507131500726914401771633259602904894387312742275462601574788485574913195967854009886824436237740789910851843045306673524324611130536719802717912615609109285261163220007241492964833933975789257681755002054890453747803418465119567389315754801791950553304034666399677630030683759466627797123971742061866928213780452325847848901682792886840980/4733430508316851445525799359992627142007028326865116523033957869609125212251136452396410236930025876982265915963089597825393317909648054808274488356887197933393799241941120691826916741647173843634076299630884655997401370400734954098249519111198509015387869462198674657171808841005212058822254513429836457539629035675822719720295352508916898476137111981397","538960934807826161927564251064896730663918579817797131801326848839524373936888402762331254883505157846659830555799909822861853145306547699817986010353774500545305596630924815657016569444824389893996399550343022444937690798126189162954188680257730893424775303801562327757655350002001080811866451425665301674688928515041429654624970707803336800125648742168380676815769457467038849213225206824671025803392/109517448833211208909213522579666376007937648875042608355810687327424621469323788799169718267715808580775296460944943658428295481347915131091297305260674731651980547668762317138753250458639043477453950774629862540017034566407286963562574188172753764978963685535201028286359818524519980885827473904574840285411260037264057197155527809916623487144493019982419606308144576939532055057697567269576800542875","24451481554350251656598350124163983489544445991992661049829014268366250968046589127810466483349378560701491445658725080497078590986743512397927747885285095846398852574219367580068049729894667374214861939897557930527646930793431512683750733092448862551580494245486308114129295467976874843852138144539250235632985676953662288536669286915983261820949386845806781/4962240683851186225340479316959605207278948397833849899236383273145853045488131674290332609876751222112917095096150531825255611911377071887145019702433883343849119017643117746273523770961304609989779231048095665388209125939879595509516490230961558353074751312876252070889983946768175488341370453053495319823381943793679003096504200440997908071027962806272000","166591964685609920525429719961758335887941461052357297159523350448241484106515158310298216150030768812873781356326923214637847449893575074813991141092681107583183275003570804134461187213143832123628701876041315736048451374824101256980832991214945762266748755723551899001458245164317581617731332466039757786839492869211248064662857987111284518155462148044812626055842061283907063784492325693994911811072/33765943466859756347231737285768516240749714264564410814839966011490233598006227246396923594069488496368994857718734549787000213944990695920130591750377483911116845697231074543526982580529937081378303555262933800375576494067959129682770065443667091668104132884375840812635624862495548888467575848428463895756394050252457592540570490061561616914443009224917652440212112452400106121785938739776611328125","142464729519206642943985715465196065680101634264787375740459792619754842396453535646509170066091478069799080172299369994438836484938378991283020978342879057271045033903518255546705211647900945143546293360496661466657600494787228476009216508124736254967761901224547269496682078470378676865981855568197705507111970901389105723589666709580851611656838285777566736/28839643075889294346635430272525349651555039807615358795334663734940126053968249608601725991946342449660829847322517564370606746964714098508298705743689729306507554363954348780144675937510900983622836770223945538844314468550644543502501484521561567788992156632892028591678742014134130878101553633195551605796158103033794695984958987367799607407626319024034625","380457154857422076784416625436182734840012277442496600178664323821064977485271288502806124740204295811759917468598315932331219906040253463960961995849761235911145436552991677050565022181516596464968316292789048809559129516930574340710998611088996508613850407294743457197519091160170604426002924022923388338999324182261954685794522778833029950214443271526469607532589775916381786492089432407550224137344640/76922142291839859196033215395526448408989799722090330866256930898223012427332209054699494033511478050536463051459450844520020426942553107946282832072826069342120835351421637970462054707566481086202287686453371483126873188020538661871147778312986131920021929455276187425940666580158173676284545586944833678819622895550345083175685846944633982680908505900099388037050135210936852210263717185637166725605577","79999800708369666670693340813609265988600461251844239982904928629083975986385235816587497657678297663151298709076884516168798694292862559083730259839524968813932151813233366175091317046758260934357096757322369138747731224414176608247605314668045838769433811781490030635374856042786947109101585097035794969502111354126773165391577217071956928171336060247633607/16154850265413610119312596299635391433380319311682208755390341659152160578366244774029302281068833963848811596545791104919556346810193385001196395489740571188884873246131813864782581356887110499639544662322008824704830818136660544673293865921754569356583698951612797219776290835161780326945625621758204931298948625885081325268123344406261740843197232316416000","26517014004241498798848003208133111307300592620947908933072661812816683085261359696887064436611747292468717739609776825664344064024535028242737616786238200200498291226984541942836459188328346609549239724653950302145388877472274074665166631509490297630344351573245265440164082334092997307729007429218385933622623935704482371360985836659823269511115937443161532987660855490906546130131716829909388620539153152/5348257529530073524280989257577050878033239486885664777340947102417077875628238501791711336803418503616042922880218860266611595594400020206192599559925169589023339295256084579966533260861249529670141854632965231468533448709363477120437277477668173149958267956654411822360053335695956270719680086524322530514249891157439878407417971839744392044064720476417844056346174795601710447583861127956455406902139625","71197348290771978405602732839537012310626009318133570890482364371056186523989330157966045289127980687764218363064941391483781008265266963537623770685390148810455244349859354857421474277963009857011653865476081389968122418691934354122230780300833008753686234433642072919923583176333668289998661499146617277981691372057042930131717336250309680764289256080895092/14342680993892886303954853579883363225921109635079605392320944523109187641283117181461662846411912306480691901515655220490850586434947504504317080144378185989596578890875561336496479576651516902048606328604696610314441229321219627021610788398730173161473456954861916116391687748151443335513249810808309201830214153565966339609616397865465842187404632568359375","342401018754023891059352629509715357053454506037284788725127073168445189422181540408896452651232759821766616850264122591225331120588918865882061344322996688880669665450231982002597398732201789017495427566260651180470635467002453249479483900268320570004293679361696197905823690145326531180324429318916092471863347575533714871355651558610515931373080997536792242278529575700808878786732127630024064418468916608/68894647682461956089382461406499759613691148650738957016015844830333168307020284281532026442272618372290646283794122772122665531108484704223311663270836645399554940741928358317884620420886609705267248656765357348477857852684140561714900614303731786621656041881975328169543884661780531057279582784036689401206706069028229798913082362331334839997133771880514515972024899408556517159759907883793675672065360125","190286571838805495686895463752492174798162827967490343625540320679760700551286395956241059969689020885714190883323266375067607282890063444652926151862650426323339187596278760962390404656342309737428214493422028545912504503974763216230927196187743439226243880933947417760147785405444976177822143722569696182520826218120595298059020305548681823408268556482981325/38242608291912408815838081993045123864617058390583394828737640036167893859507494091864963383596867701436244007905770284939991912884465101575490548813894148831966132970730263562113961685364216989999844961688441914455435934703797359360780356482629495214859917249465567846934284121032247250332634283689409883499295469118485912489058982596725212975311140618764288","15345379701153714436938289567639102307887273898834051456693981514956329731572600026866162286097662958712922836383881840211072389867463987895894067288699955858337488812343674818565432780224654423872618380928462939482247900055572079914753652915184313685270722583926261499687728814560680092231526501970431280783177357735398580700300402036873780385926225005561766822479878280891130232036389707452005183370152749056/3080426623087819678602049171756961824196425548529619576972793653585089380165862889092832375934535464160425580449193072125955685099151500755278763306599307218302635233595329082702148677300945556130106197481236122437978375963261172524503625593066102601042060541617791008722569799735202779005407381267021641545644264334109052258081225159748043792288699674153722046659880085850980843460715080965607434114275256125","36443601662144279337033484452272105547257065463167427418525882851507989449375452076227652634440476502702584889057376829320548464677623038648843251719168810701744338735202853412651160681259533015293997501525430222870696235141468274274064390273214484922080219643095978640300874086585386991338440415203863901714217818222666715642467237183267303214471854472286478344/7307237990148312451155090506264642657872224684879860008436735430879314349554023096366846856470375025555139219961666754780864835035902856314981482268319886395881809659368275720375576152008289949085453326722156553603358879420820012964006978808113307340321824660484441618487292138631579616351777191144073820686595597986548374588839763719082323114663844043046087375","1575294930860663922843149113097927168024893739962464327016763741314068438447271326302129681931564068796631337571133444163024224071270063174829664848259482066723104251718808936762938249028582992557822551950212098797718627418782376027133576209718376784834456568694813577764300716139817031545408608110880973380162736536313173329973171844528083756524804574267826691156368696436273087171467254161930265910972517504/315498546654512047637461608750018349421492986465373840347519942494904200733840189483934245529561231604050629653992944140351106887747105945984325466452136415067807666316202346895657914393512001212656936450425268507235863153258769360296536050028695266363553141327896064944506216017933135251875087069031098099192325817395958019524956320840925176589616439477134480262100237057953933117460110224783420562744140625","7692057599553133417225997786980128299372439542315125030077404519679450372805989755158000864378924877036225189784045171045139667691524763609840822628706422918926410377185494048355128046783294954373197082851501927410350313585640237550107070936498164597231431242858771457898152684298047446530220873884022213114819556822050178579707210264243087257050468000092842761/1538814487241112760739561704846381585063002784795057066438330325566843108114787083741788078680861495340026117682606689156065008672344707615420501964123121620401073675430690541617930520947170306763541251152854304975131871537939618684186766168376514664494488691311397307418298556185724993104760692216619178358268934740746932420562664234738576394742559349407744000","15190836470550557926140012263310230378455340797095100474720776113765300081463960235506950799869073894127884189857505951314428810423734978025409205413789025720642609035117121385453856877706229778165533034683130064865256448444765902482146676668197546098809055341050873494446231793312407516463576380102073171090898973046611572020564659042146465345334273595086941562425006763960197801018796906114925005810069684480/3035556598829526968124942916297025416522606357010637652635799096498208643970273828496655227572100159414352020909846298817521082538898702393916708804775798552206401718323929157863173504795127180177622667376867235806208021329981136637175570409791442328468473111768140746895005561471574356889047981458002257872092408771959478275534098789982899056118498417649167444480913552548249005268380838457505944462494874581","2923754549090941424546974281011770689534961442264350984393235983189168024079617848190236639328676436485460311093391982825027512234467853098757486086492333410753919927528867817406389678461354257841007722472106464785557179844602277350411593959136520732862935740433163383885526249897183805981219416420390137516812715245569037561966929572448247077578419534651990827044/583599691615378545100950777601104007812792435102945248411439102112424251478512952087517463400054567832353967731887062349496616445419782499817548928078665212077449420216892583997505908858360011413290038645573504472422610780073975450391707084016931661068694024023083417126286468909117254531307085545768412513447197205482285022417611018126886491416133665625891075125","441922815213568908489589193556560586318864326425397702047965372289295962228254658331201274291697626694859414786292266008476137667843874780506886929181835469302142365772763129838217316953835831059616268288399119642314758261677639945004547833810080700127847214666763863338091523753898362699222880772298183760217731228628442782431573977490761665091005756534420789258276075174436091798475838370152192077494553263232/88113527373573049332749294663402406454524640221866407165839162576979477138694653404281889227416977618913249275712917582743426231744980461918772793673202077716234026090308791893409200158969108910565467273725064769890443408324386897017825489615600787634985397885230455168591240328585041836771921929567914891379235573982442311269392541694564675053636078990836491104116280492254795616055818375774141667319774630875","91197133767962483852278456285591810579974783077874307589555559715577599604626819245000672929518645004771085106770784762994476973842713035791487204122653245797126906189270204029735872508462106527240320932458036231707311992868347221176460407003487373754014365881209649632547685657666691589606571865740595829983849941049450471212387808617247938941417000965198123059467/18163679611214677813643455199979098261849405189805364986036911945012016248297645596270602508015864371788974684317239728239847888960155365342460843559658233069613218442910226128113196984801126248862273503232000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","733396724434554481470656964167233690851279923085197144879644750437402627936723531635898542414136943003236478432848965516925891956615111678444586384493883113385335463639674699443808084827715994137410743992130712903997815471369201406683862985677774155704267039224546352414417632475628136460919900347977754644214725932476856018335195927604771408949980634142255497812566866795799230501026066145434755838336990365184/145912495644159810313026420025053989609942265686388630266226856650796088768164358961644113076809511566125145395699271530802891523741636707532676065833327082092521989958971154798465784847092870457944857590623097781956884297103961713362268264159015928554707158239398721416218953003215109202771651993622244788505649098445109438104466256408060944298437033058380804126574878377874459371251056800895394904459469832875","167606423853658713615749101123336326908381619586838606922565378505211386185130407423587264776519589295420758009764678759213587906216543160801059029133457062067529468464636376639307690657945597847080706144898920305379653754920571797771178341550808041652360635584401789901525709166172283390177673009483341826911179861584213314395893323035527116283758445038413646757280/33310364848744488727470761889861069993071965180756187311178124887286133554324042422503263994717993129539448310743598138364172889305532401505890384806078790034557049074169245078416704866867380089103064821732673967120808611636618526737138435792818828990403374766228037003927569643972203993263329403469747342204808360947840103843317533210523853631711601450617095736473","22466735478643771803624909352181817912387732117378538284107485621001246177152644141853604633676939694208131243081227668237716194316732125445041260568403752325416203858329469477774720998849334961751541191761521224644520742691981372782009394826739249604257098248751626957528543558542443122470657230835176462612530464044652140581367666271771882198747182114685116336512604038833327707163107207664705120728068987996560512/4460342260599110071819142535903990817893424192972341872394014748315090430999224107274777695306032783105944721337053156074851240201179902835353097683269298594190456286888326067932777720561181760369783486872666974623910515795208353605697065447942804414120030678603538761538385793829787734830129764152263691296719726909633580318897787729004972323599773548689272008712427926734258913271101899780538635213826239542884125","1972862002066252798837977155272535342727415329632252213508267781390870646909686724955861608046325765650407340102472833428905279473185818898693854344138403744757857928883601637909604082588338869612221777263582365745419719805587946558326048087138197694016224613118304623864709183681172362693106460535117459192992832969130895829916210933710820035479169562970982784580861/391262854245936198649509275719624152305206807261382621390946060636032376057385723427601113233050260359684153963520782285097664628279596618521963444574543409076428660874564026651742234728997339844161514273669735686516761239076529088145208958938384732800586298943281728435207452253170935715239392534815683367114290676180839217919539381651841151674859715992309727232000","25408691426286653276004556426513401767718328640048945917745783225459709487487356095164164652218100925888847689099153320777389381851598236046402124684511968385325107497047025485302333503075085562533472482645023963717347867696861885363417595298751490212495932766872748125111115039311507374363000062513977436921772096443948159289707996749061007112458126301618769295162649600673247799961118662602756889448152517364992/5033870770817104909025512331238419776407331281944565644457345507262881100618908405924951559853352841154730802006750688581603270849880756026262217651685813584900300357685874044482329601894134443542753690048962260914642678445058891387041919581376195543193199307524572671344323361282633828144708683536721118910549933336800461248338059209853766305058943888965279863852107507075916981165164543199352920055389404296875","616565940481577765011174617619124841631603944267256178093555235591208387588894068005162766513720546626399308168923904625210748051788652328072241494243040185611373035059619136712559505023703153194815611268503291295059648269772663939137446253437248541496631852986499688052678961495116210133458596866684413931188348798244969797973846568160999564540652111599082181871436/122025682149627484528651507368051367620578469392233875493556828623437869650284356703295836998178256875766319508797903923638967073687991229708051285605187358616531926112736402511567721889845693991963610192161413692928378708223712791930113386840109729368772998347036090902364801014045328348830748307179590755723160142468563977011700764517880467116766150322736003147125","979882056834583241477188686550561625289337025747787132773853690143359657519481397575561812727394470125172272246774578404543257210124412718725081536309818383310896102958167337333430555168671327992395916735022711297435263157670501117734412587691271084981140167017421900852550822579410636184333142944411060788723653596377015359036101170054828623669169047118551010102258802465554033173968468183492058271365801755986560/193732066620504775981759812703028757608600125742477178751189607602983198559778039141192492589734277739017909889924488699372940787977794555519474807920198944109549023547259912324279741006975129518191081373554817584214941629021088206977532599055014150433581544599721903881284581257812850697423350805715586436114842183295730680490110793225514602133304729484547181740290534056445482186430729398701311563285494964645419","1138059441890428903336718712159907364975959482163004276901676063186939296217569849990951930955270849692775077813359573394435924934540269310629731801376134549169322946310756738187834128956671195358413024062230774111935109203207768898525882417078119314003162592087920755572050993355843681931139257303484526223461840939880759908449181135029327442039666513325916729112853/224777393704985303260433439401503507705148576727364388720387174977154204629336985298082893443205223017966145098064861566754244624732671470935725326043491911142467178027013112527668183783450932992534517827863293825061296257420183669383719043873666284378647952385401303733274771042385666436214517205678674213118374889121542369996042313879258622144464565403138392064000","614262617634904509410555695398092190166323289787703954329113412647342230855826568873946233136303566178604275296873234926652080462259552775254755109931312516616838091852915397846984381183732773411263828600108443070778861986849272794442105107285234729077818614332155890946804257724112143631642663084660012362691100872465148864413343598067567142977134846266425075195546265101720326272502009234689388355365794889444257557504/121200854655310345878069155190734381476914416893031941761756379148622591310152793328910334357724762079139509813381997287954319983165971628429295803162563856219211627796200599196263868781937234015821367575512548522790158101892507996780675863234181700253545912643548466256938936835469646114659598727592390628209362096738343417775009361678599075671154405137663077798419897932404104579113056038271753988669813988076515476125","106893445531995430131837569895703697604978445859412739331042151546083234373443601923983714252801103551874986033841637079479794895452077803182698291822629713500021995241940133037200268381793282318691568234728329378829301282121562652452936297422136961147432559766896143081059518238234777055931999714973999553456547746825617168005650221542417216291412324174772893635832/21070287546583154895102927029203125577385528350171457634203261197137238923923245382493868134869009844094435068284335909266152042903157700510534904847257436666980671067329084409346149729385625108233234542133838924281113454526471855573271066865534480974484196644173270141056470857666632902827625475719738076524047736123182255306429677688129231682978570461273193359375","1112742798776748551928744983308584493817112400536084744850969025063360679785378789764875076529575583792571198510306186417773101346425704969671256564494135750783642910394213727189639661184379341961737135764570942961692159177189753139209638929302928699705042832922774012622017270172331722295881412111812933593370743210214549038212395941675257558442878012136484052827439007483777859391215222647499741572327725689840850048/219121905514652575155579185322367175400669386131891843382447432851122462422992147756333729893028362013318264155489537138133372703295804002840920402482110260590055749843170064921843460498824128274420925357547023876488939786863662801268798987685503391058250902634999352652063668663245829496836853509616873246554292796823779397317819134891873583857621623143253788854530146303641400986028503534408870194989478421253057625","983995170259637497940121707857673268620603982844439610076334749792119502557380361624096960070148627663305171311646851566811683351232268240169848810658089698606409195744471343416197434926513684882439596141368794175162315633192028977211909698595778839497844847281262559899914504080092844816319298286511436690429175757804604673752838786852277255064434365401871903307643705/193579499709739777577893639665643417521924510242119561765932078835121983190401762561436208758210519231103767232899529457440602166918701550386152070813526760823513884391055054076485295945972185402977095815609448651316824455250005505410192101148149284756928250258632031981439345164037318129987999546683113483700660879431801728391911161900686707231543216283304182063038464","30691013076836380319652884848585431917439358375118437035944950498156836885409110087616602043242747413728866747975631727566613593257623099549583001362246649928075859944695060947434885707102684568632559339383409378997568182445019183928058902445738702610436187907199482604867148445903921474846103586253320950728989228898324829144701782792767763794895137313050381112872972806712570559942583906619373159053654481250809168128/6031936190594376585238407905469035598668211679521553144958053099463931217856780171872253258738635531385711702176347575597387389685526098889278278029314982721284691198967204664771178761416891317672705719303088746953644978471289001577698554025410820041497108311270431130911021653860874238212040640737171103823631718483572464361276703378587106311153455557896527384426327053165214814954154328483257657424873929502112904625","33633002641218571027682690377239300567277297301791434890431645909447040830457253186262970747405514897340315490970846553666201190386457221846694126637998462873786334837901001833771510353365825087187582807843940479192544772559118293851131234910638705258664901225494129023244916125545283621607920983287799648992632814461828998517949449887522866259724675318233522060729654796/6603800575190864815125307817934327053530311915572323544225173935830559756077637251538096164499112411672913910767032482188570876526606118068929913515497400397562722669603861813453418621246538114872330536044519242663538662076583511078523573320035084744399535581216815034837553165853576616422592790103728141443697362408727056813977234078214386771115586436985105038873998875","9090550743395453237608373761422705922989356346696677314277463900103283296889488490217663400349361962695279888433677856471792856853109469433355422802663947305503479561493033851081993247556828544308258821557994512133708656174864544457143793106703578476914924328960109390350040954158797845288786321215010324565010420734044059968931558099077932776525974187717655105951506223649947806568984848883258144616897526257038550656/1783219994432430133950472014582130883873515063182143523712063859964133099770763874744121895885645346884371273930727450069430704145915261127061538288702855011220545530326588799412076879985026006593893648911637986337776174555198865379578424838210466703683642106934154603710587408512357351455891557594977191641529451749437270208258072920514602243985184744955476557012910446023911358037761232253615162335336208343505859375","396226087129511787616470716244996965529391571019620342657409150252952330537366537352182763477820160355931003174946109480036915624974500187179367618457008802667089004678925595775249725629495848146669773574395699032785024522882892752987825063933573399691764866816284097232869198405981830106568826923407996367321353003569052419999880089180418759265274331299787468134974811/77651132902382550540201641628906752945078964002822585000619340261128555048628863996784740469908853602590877726845475670110127527874088625214912598995012971630852593597027649154487264595100300180591016581254965295280089902497540043916128232871685159131211213497239568483141031137909208031392464815187505714066235868748950184065923236670418822911614780061752905170944000","1288523130900767412477856952035690867153496584747510253984686336382980221603917538996138294311274357713893956725672062832264871415025750136690143411884111580335458539824573239771267043414225271729141508235839982033182605445173050590151912297720800168687369852280323356691345317649445843078291369394324862039143247087442309135074453265658730028145500871559458519282433012494054724678302957276371418936282902434203225600/252284450515080370603949213084529993395050575951188044032908270470514999880554862449223347761507020354321422785760279154913310488296485989979706208254206974075438570521939826124860483842758137231373182496438568202110337751291106165654945352183167578675508602832478752400011567482434301614269579368882858973850914513870297071866544875650189106576672289734326492492059816669288907018095832842249738081022227281715919357","559506782175368748187145067236900803925823792088293851453005882621173124590368101213652371965740365119375069053747415415684193092607523211636912074219215053809881814859129515591479780669511533619258835199715146655774919418434080807837587396115955105126806762961292429904380132116986984435528307613054828929294602185927322238461491059740342387266084431988727321711184308176/109446188216864405154936682374609448082436347600301765944233278303643744736544109262794383069197271409398615846380701459882784547857821831816863216080069944818453908760476475874319791512782445408136169878207358663250499628002971644430164185578966399908622640732411885568638054229180673755690889471388585521113862492432946110902070139679164884208988489955874131206343597375","365842109776085256207829452385781129402656684569922320812625438296958174120084800064669048017227033185969596458778213306152397766619692644694641677223213185977626940193107608138827771259334379895020377700759789774994800008933137569543592829220611543060189849601828342989023692876182148818363689293009174358168826340010491728715549904988196347316703985894355217235339548078187164176255405596310602921647203428200269666176/71497266937783826306774367225149833789788300609530680399994804704196212252148324552193149332755057982662844988588678159610516634667597707204818296457616315484973288944637139939912166034691155272078609876888919170894915224022982785138928008133003473320018151370486895637936102520353951511525996197267572355782608352075229547764732602557133494648237258900273354364050662921889937355682486287799239363976556848320046933875","59378684894605773397070783936113244261297966863668546282887298999811950599772732377979382620766180662159460666220894896896564357533604962977968843474062092083279165837424210591042655271577974272394203253875965589611493384384257117088518521598379301169916060951350650621757237206805037261878212424267780312614942173870651684587166691539909068452932891649554575072205080763/11593916877920131260484148322810317629326850763057953025674154928920977965095141485536566217873796019006709247938019404840440511433467040918770165456925609124166970862430104329357419669175323763143377917913760028500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","440706629842402075137926797732405268015915199334341565218443748798479563505125605478061664327658137598204192554352688830679475840386882350034150077506804799859586772904929402683276898098601814091430598259347980573084686932949502809068565420937301632494387691284902026088950093888426872222813857928092871267130505744095697172494119689779474840037266295586359244899477781345249657455186847452249040895151288114085352974933708544/85971876318334010542313048056773419567285701852816309711738644074302467763075671531248793080425349570584102078764464196653843973936119037322000695949209283327606280423406302517302874806092835694196353778161663338667091195199032831587897410329509487165187753418615356836636352319310103639079123698118997500068644500893282438137614420288839230827096109835206605385673197123994357393257304049093683934224826006704198171592304125","13220371178312284248107863849287558696210741535280184003301555188086761767176560823174196915070378763091889333203635784037294769747641959860810039816533609140662043493962707445564057197150603226797446933532133956054671103942520142568674339411250001585991743608723150284270101326419464088290151483823061613403673956918458456165552482913079283537536214967294211244361353060/2576683013797055224377707713704899315377379548630511095136568220145808780162671473907260623503552385384482723173913562423316997528913651044277418227616447815609873991028073011738113927961824632868956802271260292075825561646156680740323686126811928372672670917332613490241615850953660246271541592056143611581223295045062157404996958100136358649109693659623847024011265147","1538372578072246705266078247950089219881197139399081643650271348770110178217959856819170325400476655944115553238940541695152110949081675985299189913515975242840473616169775880272489805123124548256666658584129873597192213080038937409046114908719298170078476325423466734429870048697383304265342125425087105698152643145531760853127801123272389134514333752173173161562273487752064850461823726948588221913540799816489566883798912/299566102446745552813544808169323270315327122249327394279467999308669285416179486075255023523726449428151807672528368606071047812907935426406886253284580296349349558797128593446316786243666290649442956134448480598303527795996222703837663605600624271807461605295956674925277658331760000117761013381199880905748188151556184620779667670278558839116983636972680749836497346863752662521197700717702790359162307617024566689271625","281696937222363685333688097915539146272117417024070728031063821781398985795813333650547982965341298894634762289669256129805545549280355643122501181852136332529515756074502902204877664395456278205770206019663082511098956468724829475220996427130295010430751942126263620206886404244432409164651524408198286831329682605959881993845189585640874220032515465014097345759490750307207/54806274927935495596891312029173862473687610099325998583092091915101265393157631244775387832621032230434007486602816972765210205596482942091518459849775458089575743699797096697542306049628939919466378189656065461708686421130956996965004776108499273871055615413566043083634090083096967567965373203683231171594922347812966905149873265654962896456451681332216735396249206784000","228506238533410805238253122961471637501498406104430046727793420497895852412513560203475440156216063574654372726194215013407325207763369075250819386897086702757125418327084312933061738392406321003231853349865003322697360659712771167066453430309997639548320673279964210730701373707765051246595806673865646607841876463608039111252607452843372970797479959213447237540830563469297144446069689149549515457318899981763489792/44418759813188470246596822974281932219088697005123285598909329328419879212164564561558656547678211265529803086702843380128457744445765859393426675396393053094588240457569380155526179040891009717323059641035189017918495485630657360525410506453554255734005459614858972904374739673834145083512160883402151636664208253116362089211658645312778404886460203600762546810897889629330022309705583438699250109493732452392578125","2396110297187570506257836426251930521245117960980667897194680897478996322590925380310917400763581787981992131769075961259393685331523600287377841990678117113566991100720996059187144934569703045966210306282348527729533806882408323961336166190162075154579344185244957673138372347997134388801085788353482276257401005734929059700346687783400772331280644647089520646562669857652648/465370154262863030800729180763091967573522779260407615567563274096037297593764955820626213827962697601334935773802201919483657310282236100250543992334865461800976838791035335861420892967699843608855185710753433852279737724446294443337363478679601049432404435672469098850676302728116369979460222148206944323730586138087862719386327396334468302608499235112520318322763857676375","1188272888075247520453568790651819187486389546755745961952033150576243575862120569399808467067800830890874391487822723879717525264875722720416173276963170672622214121308038530968291758445510982186014289745026439477197148445087614813262170975056866881909056450023324743409114115141145340480846088869807540798073417035168139476153897066325127540609756310068558610112731607522096096821938163134080426356894899245575410494080/230586762395914863625709048789913840511134004337945700368117795195769576856434588144361459740833007125516905017415184787078710001969815416281381427387949263792200577791644278234661952852149216540491852757174842146376788280677956350901082838474705227642420261641783722891948710833898248566893322144435457967452449965772543077421407816225704952270697016152452032506898311260979594550143344971416786595888053149375287120733","1072184299258468249004114536023934869518152618369895613271618698908405514630154819453979477077738526673716264830106745031385951736108376866253955319711026042389282009348594845497252059906901748860111986811345742998968284077119165082435598381810306691078037018432766116865792677955520465319184311529667642995217214507658693259694586107847099911341219913576038605872218680562047/207882129535607118520818565811162643811811563516006836924341123976848022970024793004700710992938987476728640943834012473687892481059618823520721737479364352887178017866425027953255856440099446112508663603319745066750522936408781591578321031173620445865113295407603090322283539974563690157418931060565698315406021569491751612761888641141446406531645379264720684248398299136000","158094023904374464057702010126993231151433474361820266584020400101533651587072432728050776506672527718975042616651177034635188178967462982926261516748842073587981953038445977514446838733557926696939591069712397947055261777416704028506441173540338327591514650398349069348381309688677335132100441905603664282735310299686268721634369502296867409514777359935022301425165750780988231639828675424239931533849896744198012747670272/30626384366513923671063955469537776291182594080083494737341604579575446319190916924682809546024369330706012653799783122328775875399363759308193432327358837772825609356553955350401725689682838701996446404559005896479618311357573203081153855961484398360670837599853294627153740224543175497655414585918231215639906924313779933211774291565425360415684556655021031131349317390382320286092667852173815259422737956767922154798375","12216278924286401897470540169822542417611356797676160128176706721343511598951866107858729405615631246003458062949723290192242594609994613705183460814797527214549142043573863947658832694800184691222426521703728394203722420336773310908687071670107794543022567943478843065246011544888390757810534211554666736239506503613750756246364621509359804902243487113673014588325806249988332/2364584127734680580481708368927921125934330000162935118371174269642831409084634375654239735054363928748162229294829526339927907778510530444646754603322373712788147193691037688552857183116332292048731726305451516954679277320777955342295564000586923227775208580772868590742136150431152495718132142742153643081187691849828217592954519485869135930755646768375299870967864990234375","578939195017447864385837341975558679292903716580114421030538728778491606282153588930983966100514147976321305616196463174070345884292672842497715966933722088536619333912687108737657068701352918582656105418491672377271304970407730786932913490869797471081081431072836814581099271832696990064828717287258860166842791984158634684078346453202928137987930328826212011774670396356151265781053547412633310327737900786639842674288716416/111966291649651600701875186827360807558960817589719096407887999108024557254221008849510152469119211567152616745769256123968832250104006560061907741567034087109512483357851919402017950812795426393415409198268246337542639470834168040295134130657073201020340432236723824670803498949071870597039309004562024033656488150406105175401372709011082725359382691270659245312133919518760328422827067578306005644825927050994860723405473375","8041514821545833865350873212853873042112343327573364523948780030849543753072688526717886590013028227714585965095216381829914996539132359247488639692828639170075726301411777307168737667077730792892326979446426349813642680537699905651125068091362135055902152994216233622733424128982011248923051410141033146604688083721413402395290842738021365861670415833356403364696759583009635/1553937833499559104910551811592138833189892464446761247731330672284191313590708439680460540329836344767557599746234213006493842842879398684745864919973051635127080738612248150108793397855113122368507483429209127035263504194847798809612278864438287815470711036548695032421148125849669175729331459149833945183228413961985381338162155596008680906676498435954178226973272371625984","12059659399309169167301353842123191409306995788633965680414620302285606896146667751472818541537183787935352700725982053536032930866708413010971856856768384974849695774437178790890015242323873769697407411558706626105140596160049735605389301414460825674631122462760014451298494875244754354054447697502521388381253293175367558014453865905104467382184997528879171136492277222127399012368677604910497789360212571238146627048080568400384/2328494054002703067219004484782931471919751585969487160602269605916676223315055450845942763690581877771159615428854802721943114463834992106300185328876910271612375509166975628540839858771078495267566008071532876816826751069408153323840515037497664871689085370699991860738368371510578076683395101062439493831773194498579620513073693022191702398601471237166387045790480861932005012807234071429628725981935147069738988682858417182625","683009426705008850682549700382901603742691705123356866338951397347368059105140826655486518416578697931244347554322654428162554903861783227680935341690740579867651545205562690172425016836559678937794312287639193745517811234257062356826622207475918293015140472942579713388671782202262396642735640315948612572908444501108579457520714632371056288874351015666995549139003946314085696/131769214246522869780429817236150406548549044658474416909806179734873399109656411633488099249198882165279745627038984487365589625562901914030850178330133080409420340227179447548044572594184601425691821617928130423410997853384425373999967759499571890326740433081063424903098252502791477854302204200941376983295622430177445507316706609802292121282957519571162158620971952084486375","1418116259749091420309271913909337143756589314597557128553117870573928055109322864794169592355058370891251425125187770724828108988587888087023982451205475980371440423992838481547236638456717520835668859093413956339261802305597694403381021863258753441889536361061407579332570493634254542013337999844407181346815549594836374497512447969751514466481466717590255369810506813543577735080228718660747940956248427356785784199073569408/273368882980516556922532339653303822104510203916024760371844491705599093435133738774975538364241630079468712981056336655766117378160822393876348755370711942273876284944422610974149712212944211513462921649872232656449940987552227525504529710373144228818606127541937831103642415534318303187393593236209298242574677293352798419428712873685798636474667204083938875672934235816396371477146089168375198141802684403955936431884765625","546411077581845999248238069684194831621691193366466972898628141511422317954477211865167402284211971296286346492698354214043840080181702652132835681239302798339667835439189275457116051279366194551632712819028177402221815140045210690908631767786711675029194359998826252332434573121740830827417293557234891406021102083555472155479148332697839972702631641910213821827820374586459319/105246945889799140338072754365901705544530661781295362563214285953881890233987516230568663143342952799036341701952267011236663118111226623815975847494372076420199418712941018288738590264475520229651370015377608638075866459684692488079223686296541020897904588347083045723167762682959422858996673894180805702299907478685374065593161226849447131100462022089783265346597553176576000","2398330640958841474772606439916070050977544535580605737383995160447105736276950196885906408317628083110923322157113892928963237845914017845444295040924101784423382681801754191301860383927129006953354739240926643562987838836997453985855576402628166875869041032631651591871962852884189548538272285387092843044669499688035134181859376665409767886188304314888753894905317929877238322615838524354191263502347881033855441181420399360/461588070868590122892265681879734295007029130965626060552783760068897000195207878227714842617470320231527222074701444349530952699708435668339712860464533455345665068841333232359698449088497137068713309811942968433868609329301082001752617420002377892756821532220676085014874112083615054550278903960627185675459015343606391094523511117705747842645927349130302549554534056269331809016770715819934970200483161548527932617036185253","6041015879424725383006424536130409209607854044642113747266098198777011981328765528361630516108680392500990580908509403483891763219659726090675140672989657743882183951954294745396417829943469201306594018454995862321821016087416840247422350906412007336103086620396467456181771583200365740253389107968122850063607085957109965406634738740996318415514360956028575560979203447735121436/1161752799109428422288020947061281540989708937450568100764830251908850596717606701047413407636907934320789870175907792017513896999208892282137299070761467096211814586909598705615312819596495636017728313513520193786266452836805291464826226833593878504804389728477191170027729963773716267868284479768397603444919008915279522376004326398403851684761808785381609370767169521034383625","13240077436443988749179508462267267187169441948722358165090554769250505713747934643200804819418670147225695324432684266924694524337920816452346599774452681831320005286326986675907899608537972384924882996757503264622991355949039882526389342174307168805166215838138277557052303430492669193939212362638263582899713198716541723383138016564027766560215944409353427176135895982596327685665844815618402881202645610620284792793420780517248/2544223084468158291883698813309541801455311468982232546872485444308211415529998472787377800559884210837213042932180479090277285630234238711851480232520137856848809986631784843528381778520727465146661792797924458540957133423665746229799675650290296217658444899605236550972043549278128087645211909479009099766619355677984218929672461506691980442071860591767266913041147587815452007726513853820116629482732060593116624596368806566625","1953999166296955830935495158735359200362904181792947794529339487489730042568305997099959302322956898299616194932283060554261566410988618045107398092345476532371402134206635235570281738377188438407703089325315446371127042537576093536896282955524842632708645655481028161471313608974238110718242273935956977555610147714316158486553633871312187084618154014921190595222799283957140353/375191165084882521037046014569185165885459082629136124177286500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"];if(Fc[De])return H2.quick.apply(null,Fc[De].split("/"));De=new H2(De);for(var hf=80,r1=new H2(0),d1=De.subtract(new H2(1)),y1=De.add(new H2(1)),v1=0;v1<hf;v1++){var O1=new H2(2*v1+1),m2=r4.bigpow(d1.divide(y1),O1),T2=O1.clone().invert().multiply(m2);r1=r1.add(T2)}return r1.multiply(new H2(2))},factorial:function(De){var Fc=De%1===0;if(Fc&&De<0)return NaN;if(!Fc)return r4.gamma(De+1);for(var hf=1,r1=2;r1<=De;r1++)hf=hf*r1;return hf},dfactorial:function(De){if(E1(De)){var Fc=De%2===0,hf=Fc?De/2:(De+1)/2,r1=new H2(1);if(Fc)for(var d1=1;d1<=hf;d1++)r1=r1.multiply(new H2(2).multiply(new H2(d1)));else for(var d1=1;d1<=hf;d1++)r1=r1.multiply(new H2(2).multiply(new H2(d1)).subtract(new H2(1)))}else r1=Math.pow(2,(1+2*De-Math.cos(Math.PI*De))/4)*Math.pow(Math.PI,(Math.cos(Math.PI*De)-1)/4)*r4.gamma(1+De/2);return r1},GCD:function(){for(var De=n4([].slice.call(arguments).map(function(d1){return Math.abs(d1)})).sort(),Fc=Math.abs(De.shift()),hf=De.length;hf-- >0;)for(var r1=Math.abs(De.shift());;){if(Fc%=r1,Fc===0){Fc=r1;break}if(r1%=Fc,r1===0)break}return Fc},QGCD:function(){for(var De=[].slice.call(arguments),Fc=De[0],hf=1;hf<De.length;hf++){var r1=De[hf],d1=Fc.isNegative()&&r1.isNegative()?-1:1;Fc=r1.gcd(Fc),d1<0&&Fc.negate()}return Fc},LCM:function(De,Fc){return De*Fc/r4.GCD(De,Fc)},pow:function(De,Fc){return De<0&&Math.abs(Fc)<1?1/Fc%2===0?NaN:-Math.pow(Math.abs(De),Fc):Math.pow(De,Fc)},factor:function(De){De=Number(De);var Fc=Math.sign(De);De=Math.abs(De);var hf=r4.ifactor(De),r1=new x1;r1.symbols={},r1.group=sr;for(var d1 in hf){var y1=new x1(1);y1.group=_e,y1.value=d1,y1.power=new x1(hf[d1]),r1.symbols[d1]=y1}return r1.updateHash(),De===1&&(r1=new x1(De)),Fc<0&&r1.negate(),r1},sfactor:function(De,Fc){Fc=Fc||{};var hf=Math.floor(Math.sqrt(De)),r1=E[E.length-1];hf>r1&&De<1e6&&Z2(hf);for(var d1=E.length,y1=0;y1<d1;y1++)for(var v1=E[y1];De%v1===0;)De=De/v1,Fc[v1]=(Fc[v1]||0)+1;return De>1&&(Fc[De]=1),Fc},ifactor:function(De){var Fc=new u(De);if(De=String(De),De==="0")return{0:1};De=new u(De);var hf=De.sign?-1:1;De=De.abs();var r1={};if(De.lt("65536"))r1=r4.sfactor(De,r1);else{var d1=function(w2){w2.isPrime()?r1[w2]=(r1[w2]||0)+1:r1=r4.sfactor(w2,r1)};try{for(var y1=1e3,v1=0;!De.abs().equals(1);)if(De.isPrime()){d1(De);break}else{let w2=function(d4){for(var z2=new u(d4),i4=2,E4=new u(d4),w4=new u(1);w4.equals(1);){for(var $4=0;$4<=i4&&w4.equals(1);$4++){if(v1++>y1)throw new Error("stopping");E4=E4.pow(2).add(1).mod(De),w4=u.gcd(E4.minus(z2).abs(),De)}i4=i4*2,z2=E4}return w4.equals(De)?w2(d4+1):w4};var T2=w2,O1=w2(2);d1(O1),De=De.divide(O1)}}catch{r1={},d1(Fc)}}if(hf===-1){var m2=Z1(g1(r1));r1["-"+m2]=r1[m2],delete r1[m2]}return r1},boxfactor:function(De,Fc){Fc=Fc||200;for(var hf,r1,d1=Math.floor(5/12*De),y1=0,v1=!1;hf=Math.floor(De/d1),r1=De%d1,r1!==0;){if(v1)return[De,1];d1=Math.max(r1,d1-r1),y1++,v1=y1>Fc}return[hf,d1,y1]},fib:function(De){var Fc=Math.sign(De);De=Math.abs(De),Fc=k2(De)?Fc:Math.abs(Fc);for(var hf=0,r1=1,d1=1,y1=2;y1<=De;y1++)d1=hf+r1,hf=r1,r1=d1;return d1*Fc},mod:function(De,Fc){return De%Fc},integer_part:function(De){var Fc=Math.sign(De);return Fc*Math.floor(Math.abs(De))},simpson:function(De,Fc,hf,r1){var d1=function(i4,E4,w4){var $4=i4(E4),U4=1e-12;return isNaN($4)&&($4=i4(w4===1?E4+U4:E4-U4)),$4};r1=r1||1e-4;var y1=Math.abs(Math.floor((hf-Fc)/r1));y1%2!==0&&y1++;for(var v1=(hf-Fc)/y1,O1=d1(De,Fc,1),m2=!1,T2=Fc+v1,w2,d4,z2=1;z2<y1;z2++)w2=m2?2:4,d4=w2*d1(De,T2,1),O1+=d4,m2=!m2,T2+=v1;return(O1+d1(De,T2,2))*(v1/3)},num_integrate:function(De,Fc,hf,r1,d1){if(d1<0)throw new Error("max depth cannot be negative");function y1(m2,T2,w2,d4,z2,i4,E4,w4,$4,U4,X2){if(X2.nanEncountered)return NaN;var f3,a3,D4,F3,Z3,U3,o3,v3,g3,k3;if(f3=w2-T2,a3=m2(T2+f3*.25),D4=m2(w2-f3*.25),isNaN(a3)){X2.nanEncountered=!0;return}if(isNaN(D4)){X2.nanEncountered=!0;return}if(F3=f3*(d4+4*a3+z2)/12,Z3=f3*(z2+4*D4+i4)/12,U3=F3+Z3,k3=(U3-E4)/15,!(X2.maxDepthCount>1e3*$4))return U4>$4?(X2.maxDepthCount++,U3+k3):Math.abs(k3)<w4?U3+k3:(o3=T2+f3*.5,v3=y1(m2,T2,o3,d4,a3,z2,F3,w4*.5,$4,U4+1,X2),isNaN(v3)?(X2.nanEncountered=!0,NaN):(g3=y1(m2,o3,w2,z2,D4,i4,Z3,w4*.5,$4,U4+1,X2),isNaN(g3)?(X2.nanEncountered=!0,NaN):v3+g3))}function v1(m2,T2,w2,d4,z2){var i4={maxDepthCount:0,nanEncountered:!1};d4===void 0&&(d4=1e-9),z2===void 0&&(z2=45);var E4=m2(T2),w4=m2(.5*(T2+w2)),$4=m2(w2),U4=(E4+4*w4+$4)*(w2-T2)/6,X2=y1(m2,T2,w2,E4,w4,$4,U4,d4,z2,1,i4);if(i4.maxDepthCount>0&&gf("integrate-adaptive-simpson: Warning: maximum recursion depth ("+z2+") reached "+i4.maxDepthCount+" times"),i4.nanEncountered)throw new Error("Function does not converge over interval!");return X2}var O1;try{O1=v1(De,Fc,hf,r1,d1)}catch{return r4.simpson(De,Fc,hf)}return u2(O1,12)},Ci:function(De){for(var Fc=20,hf=.5772156649015329,r1=0,d1=1;d1<Fc;d1++){var y1=2*d1;r1+=Math.pow(-1,d1)*Math.pow(De,y1)/(y1*r4.factorial(y1))}return Math.log(De)+hf+r1},Si:function(De){for(var Fc=20,hf=0,r1=0;r1<Fc;r1++){var d1=2*r1;hf+=Math.pow(-1,r1)*Math.pow(De,d1+1)/((d1+1)*r4.factorial(d1+1))}return hf},Ei:function(De){if(Number(De)===0)return-1/0;for(var Fc=30,hf=.5772156649015329,r1=0,d1=1;d1<Fc;d1++)r1+=Math.pow(De,d1)/(d1*r4.factorial(d1));return hf+Math.abs(Math.log(De))+r1},Shi:function(De){for(var Fc=30,hf=0,r1,d1,y1=0;y1<Fc;y1++)r1=2*y1,d1=r1+1,hf+=Math.pow(De,d1)/(d1*d1*r4.factorial(r1));return hf},Chi:function(De){var Fc,hf,r1;return Fc=.001,hf=.5772156649015329,r1=function(d1){return(Math.cosh(d1)-1)/d1},Math.log(De)+hf+r4.num_integrate(r1,.002,De,Fc)},Li:function(De){return r4.Ei(r4.bigLog(De))},gamma_incomplete:function(De,d1){for(var hf=De-1,r1=0,d1=d1||0,y1=0;y1<hf;y1++)r1+=Math.pow(d1,y1)/r4.factorial(y1);return r4.factorial(hf)*Math.exp(-d1)*r1},step:function(De){return De>0?1:De<0?0:.5},rect:function(Fc){var Fc=Math.abs(Fc);return Fc===.5?Fc:Fc>.5?0:1},sinc:function(De){return De.equals(0)?1:Math.sin(De)/De},tri:function(De){return De=Math.abs(De),De>=1?0:1-De},nthroot:function(De,Fc){if(De instanceof H2||(De=new H2(De.toString())),Fc instanceof H2||(Fc=new H2(Fc.toString())),Fc.equals(1))return De;var hf=De.divide(new H2(2)),r1=new H2(1e-15),d1,y1,v1,O1=Fc.clone().invert(),m2=Fc.subtract(new H2(1));do{var T2=r4.bigpow(hf,m2),w2=O1.multiply(De.divide(T2).subtract(hf)).toDecimal(25);if(d1=H2.create(w2),v1)break;hf=hf.add(d1);var w2=d1.toDecimal();v1=y1?y1===w2:!1,y1=w2}while(d1.abs().gte(r1));return hf},sqrt:function(De){De instanceof H2||(De=new H2(De));var Fc,hf,r1,d1,y1=0,v1=!1,O1=new H2(1e-20);Fc=De.divide(new H2(2));var m2=1e3;do{if(y1>m2)throw new Error("Unable to calculate square root for "+De);Fc=Fc.add(De.divide(Fc)).divide(new H2(2)),Fc=new H2(Fc.decimal(30)),hf=De.subtract(Fc.multiply(Fc)),d1=r1?r1.equals(hf):!1,(hf.clone().abs().lessThan(O1)||d1)&&(v1=!0),r1=hf,y1++}while(!v1);return Fc}};Z.FUNCTION_MODULES.push(r4),v4(r4),Math.sign=Math.sign||function(De){return De=+De,De===0||isNaN(De)?De:De>0?1:-1},Math.cosh=Math.cosh||function(De){var Fc=Math.exp(De);return(Fc+1/Fc)/2},Math.sech=Math.sech||function(De){return 1/Math.cosh(De)},Math.csch=Math.csch||function(De){return 1/Math.sinh(De)},Math.coth=Math.coth||function(De){return 1/Math.tanh(De)},Math.sinh=Math.sinh||function(De){var Fc=Math.exp(De);return(Fc-1/Fc)/2},Math.tanh=Math.tanh||function(De){if(De===1/0)return 1;if(De===-1/0)return-1;var Fc=Math.exp(2*De);return(Fc-1)/(Fc+1)},Math.asinh=Math.asinh||function(De){return De===-1/0?De:Math.log(De+Math.sqrt(De*De+1))},Math.acosh=Math.acosh||function(De){return Math.log(De+Math.sqrt(De*De-1))},Math.atanh=Math.atanh||function(De){return Math.log((1+De)/(1-De))/2},Math.log10=Math.log10||function(De){return Math.log(De)*Math.LOG10E},Math.trunc=Math.trunc||function(De){return isNaN(De)?NaN:De>0?Math.floor(De):Math.ceil(De)};function z4(De,Fc,hf,r1){var d1=Fc==="hash",y1=void 0,v1=d1?void 0:Fc,O1=v1==="decimal"||v1==="decimals";O1&&typeof r1>"u"&&(r1=Z.DEFAULT_DECP);function m2(o3){switch(Fc){case"decimals":case"decimal":return y1=y1||function(x6){return!1},o3.valueOf();case"recurring":y1=y1||function(x6){return x6.indexOf("'")!==-1};var u3=o3.toString(),r6=/^-?\d+(?:\/\d+)?$/.exec(u3);if(r6.length===0)return u3;var d5=r6[0].split("/"),v3=!1,g3=Number(d5[0]);g3<0&&(g3=-g3,v3=!0);var k3=Number(d5[1]);k3||(k3=1);var W6=Math.floor(g3/k3),t6=10*(g3-W6*k3);for(W6=W6.toString()+".";t6&&t6<k3;)t6*=10,W6+="0";for(var l3="",j4=[],g6=0;;){if(typeof j4[t6]<"u"){var j3=l3.slice(0,j4[t6]),i5=l3.slice(j4[t6]),K6=W6+j3+"'"+i5+"'";return(v3?"-":"")+K6.replace("'0'","").replace(/\.$/,"")}var n5=Math.floor(t6/k3),A6=t6-n5*k3;j4[t6]=g6,l3+=n5.toString(),g6+=1,t6=10*A6}case"mixed":y1=y1||function(x6){return x6.indexOf("/")!==-1};var u3=o3.toString(),r6=/^-?\d+(?:\/\d+)?$/.exec(u3);if(r6.length===0)return u3;var d5=r6[0].split("/"),Rv=new u(d5[0]),w5=new u(d5[1]);w5.equals(0)&&(w5=new u(1));var S5=Rv.divmod(w5),W6=S5.quotient,a5=S5.remainder,R4=d5[0][0]==="-"||W6.equals(0)||a5.equals(0)?"":"+";return(W6.equals(0)?"":W6.toString())+R4+(a5.equals(0)?"":a5.toString()+"/"+d5[1]);case"scientific":return y1=y1||function(x6){return!1},new C4(o3.valueOf()).toString(Z.SCIENTIFIC_MAX_DECIMAL_PLACES);default:return y1=y1||function(x6){return x6.indexOf("/")!==-1},o3.toString()}}if(I1(De)){var T2="",w2="",d4="",z2=De.group||hf,i4=De.value;if(!d1){var E4=m2(De.multiplier);E4=="-1"&&String(De.multiplier)==="-1"&&(d4="-",E4="1"),E4!="1"&&(T2=E4);var w4=De.power?m2(De.power):"";w4!="1"&&(I1(w4)?w2=z4(w4,v1):w2=w4)}switch(z2){case me:T2="";var $4=r1&&O1?De.multiplier.toDecimal(r1):m2(De.multiplier);i4=String(De.multiplier)=="-1"?"1":$4,w2="";break;case Do:i4=De.collectSymbols().map(function(o3){var v3=z4(o3,v1,hf,r1);return v3=="0"&&(v3=""),v3}).sort().join("+").replace(/\+\-/g,"-");break;case Ko:i4=De.collectSymbols().map(function(o3){var v3=z4(o3,v1,hf,r1);return v3=="0"&&(v3=""),v3}).sort().join("+").replace(/\+\-/g,"-");break;case sr:i4=De.collectSymbols(function(o3){var v3=o3.group;return(v3===Do||v3===Ko)&&o3.power.equals(1)&&o3.multiplier.equals(1)?N1(z4(o3,v1)):z4(o3,v1)}).join("*");break;case Xe:var U4=De.previousGroup,X2=De.power.group;U4===Do&&(i4=De.collectSymbols(z4,v1).join("+").replace("+-","-")),!(U4===me||U4===He||U4===wt)&&!d1&&(i4=N1(i4)),(X2===Ko||X2===sr||X2===Do||De.power.multiplier.toString()!="1")&&w2&&(w2=N1(w2));break}if(z2===wt&&(i4=De.fname+N1(De.args.map(function(o3){return z4(o3,v1)}).join(","))),z2===wt&&De.fname in P){var f3=z4(De.args[0]),a3=z4(De.args[1]);De.args[0].isComposite()&&(f3=N1(f3)),De.args[1].isComposite()&&(a3=N1(a3)),i4=f3+P[De.fname]+a3}w2&&z2!==Xe&&y1(w2)&&(w2=N1(w2)),((z2===Ko||z2===Do)&&(T2&&T2!="1"||d4==="-")||(z2===sr||z2===Ko||z2===Do)&&w2&&w2!="1"||!d1&&z2===_e&&i4==-1||De.fname===th)&&(i4=N1(i4)),r1&&(Fc==="decimal"||Fc==="decimals"&&T2)&&(T2=u2(T2,r1));var D4=d4+T2;if(T2&&y1(T2)&&(D4=N1(D4)),w2<0&&(w2=N1(w2)),T2&&(D4=D4+"*"),w2){if(i4==="e"&&Z.E_TO_EXP)return D4+"exp"+N1(w2);w2=Z.POWER_OPERATOR+w2}z2===Xe&&i4.charAt(0)==="-"&&(i4=N1(i4));var F3=D4+i4;return De.parens&&(F3=N1(F3)),F3+w2}else if(N2(De)){for(var Z3=De.elements.length,D4=[],U3=0;U3<Z3;U3++)D4.push(De.elements[U3].text(Fc));return"["+D4.join(",")+"]"}else try{return De.toString()}catch{return""}}function e4(De){if(e1(De))return[De];for(var Fc=De,hf=1,r1=[],d1=2220446049250313e-31;hf<Fc;){var y1=De/hf,v1=Math.floor(y1),O1=y1-v1;if(O1<=d1&&hf>1){if(e1(hf)&&(E.indexOf(hf)===-1&&E.push(hf),r1.push(hf)),e1(v1)){r1.push(v1);break}Fc=v1}hf++}return r1.sort(function(m2,T2){return m2-T2})}e4(314146179365);function O4(De){this.symbol=De}O4.getExpression=function(De,Fc){(De==="last"||!De)&&(De=uf.length),De==="first"&&(De=1);var hf=De-1,r1=uf[hf],d1=r1&&new O4(r1);return d1},O4.prototype={text:function(De,Fc){return Fc=Fc||Z.EXPRESSION_DECP,De=De||"decimals",this.symbol.text_?this.symbol.text_(De):z4(this.symbol,De,void 0,Fc)},latex:function(De){return this.symbol.latex?this.symbol.latex(De):K4.latex(this.symbol,De)},valueOf:function(){return this.symbol.valueOf()},evaluate:function(){if(N2(this.symbol)&&this.symbol.dimensions()===0)return this;var De=arguments[0],Fc,hf=1;typeof De=="string"?Fc=De.charAt(0)==="%"?O4.getExpression(De.substr(1)).text():De:De instanceof O4||I1(De)?Fc=De.text():(Fc=this.symbol.text(),hf--);var r1=arguments[hf]||{},d1=new O4(z1("PARSE2NUMBER",function(){return l.parse(Fc,r1)},!0));return d1},buildFunction:function(De){return z3.build(this.symbol,De)},isNumber:function(){return B2(this.symbol)},isInfinity:function(){return Math.abs(this.symbol.multiplier)===1/0},isImaginary:function(){return c2(l.parse(this.symbol)).isImaginary()},variables:function(){return R2(this.symbol)},toString:function(){try{return S2(this.symbol)?"["+this.symbol.toString()+"]":this.symbol.toString()}catch{return""}},toDecimal:function(De){Z.precision=De;var Fc=z4(this.symbol,"decimals");return Z.precision=void 0,Fc},isFraction:function(){return V1(this.symbol)},isPolynomial:function(){return this.symbol.isPoly()},sub:function(De,Fc){return new O4(this.symbol.sub(l.parse(De),l.parse(Fc)))},operation:function(De,Fc){return i2(Fc)?Fc=Fc.symbol:I1(Fc)||(Fc=l.parse(Fc)),new O4(l[De](this.symbol.clone(),Fc.clone()))},add:function(De){return this.operation("add",De)},subtract:function(De){return this.operation("subtract",De)},multiply:function(De){return this.operation("multiply",De)},divide:function(De){return this.operation("divide",De)},pow:function(De){return this.operation("pow",De)},expand:function(){return new O4(l.expand(this.symbol))},each:function(De,Fc){if(this.symbol.each)this.symbol.each(De,Fc);else if(S2(this.symbol))for(var Fc=0;Fc<this.symbol.length;Fc++)De.call(this.symbol,this.symbol[Fc],Fc);else De.call(this.symbol)},eq:function(De){I1(De)||(De=l.parse(De));try{var Fc=l.subtract(this.symbol.clone(),De);return Fc.equals(0)}catch{return!1}},lt:function(De){I1(De)||(De=l.parse(De));try{var Fc=c2(l.subtract(this.symbol.clone(),De));return Fc.lessThan(0)}catch{return!1}},gt:function(De){I1(De)||(De=l.parse(De));try{var Fc=c2(l.subtract(this.symbol.clone(),De));return Fc.greaterThan(0)}catch{return!1}},gte:function(De){return this.gt(De)||this.eq(De)},lte:function(De){return this.lt(De)||this.eq(De)},numerator:function(){return new O4(this.symbol.getNum())},denominator:function(){return new O4(this.symbol.getDenom())},hasFunction:function(De){return this.symbol.containsFunction(De)},contains:function(De){return this.symbol.contains(De)}},O4.prototype.toTeX=O4.prototype.latex;function C4(De){return this instanceof C4?(De=String(typeof De>"u"?0:De),De.startsWith("-")?(this.sign=-1,De=De.substr(1,De.length)):this.sign=1,C4.isScientific(De)?this.fromScientific(De):this.convert(De),this):new C4(De)}C4.prototype={fromScientific:function(De){var Fc=String(De).toLowerCase().split("e");return this.coeff=Fc[0],this.exponent=Fc[1],this},convert:function(De){var Fc=De.split("."),hf=Fc[0]||"",r1=Fc[1]||"";hf=C4.removeLeadingZeroes(hf),r1=C4.removeTrailingZeroes(r1);var d1=hf.length,y1=hf+r1,v1=C4.leadingZeroes(y1).length;this.exponent=d1-(v1+1);var O1=C4.removeLeadingZeroes(y1);this.coeff=O1.charAt(0)+"."+(O1.substr(1,O1.length)||"0");var m2=this.coeff.split(".")[1]||"";return this.decp=m2==="0"?0:m2.length,this.dec=r1,this.wholes=hf,this},round:function(De){var Fc=this.copy();if(De=Number(De),De===0)Fc.coeff=Fc.coeff.charAt(0);else{var hf=this.coeff.substring(0,De+1),r1=this.coeff.substring(De+1,De+3),d1=r1.charAt(0);r1.charAt(1)>4&&d1++,Fc.coeff=hf+d1}return Fc},copy:function(){var De=new C4(0);return De.coeff=this.coeff,De.exponent=this.exponent,De.sign=this.sign,De},toString:function(De){var Fc;if(Z.SCIENTIFIC_IGNORE_ZERO_EXPONENTS&&this.exponent===0&&this.decp<De)this.decp===0?Fc=this.wholes:Fc=this.coeff;else{var hf=typeof De>"u"?this.coeff:C4.round(this.coeff,Math.min(De,this.decp||1));Fc=this.exponent===0?hf:hf+"e"+this.exponent}return(this.sign===-1?"-":"")+Fc}},C4.isScientific=function(De){return/\d+\.?\d*e[\+\-]*\d+/i.test(De)},C4.leadingZeroes=function(De){var Fc=De.match(/^(0*).*$/);return Fc?Fc[1]:""},C4.removeLeadingZeroes=function(De){var Fc=De.match(/^0*(.*)$/);return Fc?Fc[1]:""},C4.removeTrailingZeroes=function(De){var Fc=De.match(/0*$/);return Fc?De.substring(0,De.length-Fc[0].length):""},C4.round=function(De,Fc){var hf=u2(De,Fc),r1=String(hf).split(".").pop(),d1=Fc-r1.length;return d1>0&&(hf=hf+new Array(d1+1).join(0)),hf};function H2(De){if(De instanceof H2)return De;if(De===void 0)return this;try{if(E1(De))try{this.num=u(De),this.den=u(1)}catch{return H2.simple(De)}else{var Fc=De instanceof d?V6.quickConversion(De):V6.convert(De);this.num=new u(Fc[0]),this.den=new u(Fc[1])}}catch{return H2.simple(De)}}H2.create=function(De){if(De instanceof H2)return De;De=De.toString();var Fc=De.charAt(0)==="-";Fc&&(De=De.substr(1,De.length-1));var hf=new H2(De);return Fc&&hf.negate(),hf},H2.isFrac=function(De){return De instanceof H2},H2.quick=function(De,Fc){var hf=new H2;return hf.num=new u(De),hf.den=new u(Fc),hf},H2.simple=function(De){for(var Fc=String(ff(De)),hf=Fc.split("."),r1=hf.join(""),d1=1,y1=(hf[1]||"").length,v1=0;v1<y1;v1++)d1+="0";var O1=H2.quick(r1,d1);return O1.simplify()},H2.prototype={multiply:function(De){if(this.isOne())return De.clone();if(De.isOne())return this.clone();var Fc=this.clone();return Fc.num=Fc.num.multiply(De.num),Fc.den=Fc.den.multiply(De.den),Fc.simplify()},divide:function(De){if(De.equals(0))throw new l1("Division by zero not allowed!");return this.clone().multiply(De.clone().invert()).simplify()},subtract:function(De){return this.clone().add(De.clone().neg())},neg:function(){return this.num=this.num.multiply(-1),this},add:function(De){var Fc=this.den,hf=De.den,r1=this.clone(),d1=r1.num,y1=De.num;return Fc.equals(hf)?r1.num=d1.add(y1):(r1.num=d1.multiply(hf).add(y1.multiply(Fc)),r1.den=Fc.multiply(hf)),r1.simplify()},mod:function(De){var Fc=this.clone(),hf=De.clone();return Fc.num=Fc.num.multiply(hf.den),Fc.den=Fc.den.multiply(hf.den),hf.num=hf.num.multiply(this.den),hf.den=hf.den.multiply(this.den),Fc.num=Fc.num.mod(hf.num),Fc.simplify()},simplify:function(){var De=u.gcd(this.num,this.den);return this.num=this.num.divide(De),this.den=this.den.divide(De),this},clone:function(){var De=new H2;return De.num=new u(this.num),De.den=new u(this.den),De},decimal:function(De){var Fc=this.num.isNegative()?"-":"";if(this.num.equals(this.den))return"1";De=De||Z.PRECISION,De++;for(var hf=[],r1=this.num.abs(),d1=this.den,y1=0;y1<De;y1++){var v1=r1.divide(d1),O1=r1.subtract(v1.multiply(d1));if(hf.push(v1),O1.equals(0))break;r1=O1.times(10)}var m2=hf.shift();if(hf.length===0)return Fc+m2.toString();if(y1===De){for(var T2=[],y1=0;y1<2;y1++)T2.unshift(hf.pop());hf.push(Math.round(T2.join(".")))}var w2=m2.toString()+"."+hf.join("");return Fc+w2},toDecimal:function(De){return De=De||Z.PRECISION,De?this.decimal(De):this.num/this.den},qcompare:function(De){return[this.num.multiply(De.den),De.num.multiply(this.den)]},equals:function(De){isNaN(De)||(De=new H2(De));var Fc=this.qcompare(De);return Fc[0].equals(Fc[1])},absEquals:function(De){isNaN(De)||(De=new H2(De));var Fc=this.qcompare(De);return Fc[0].abs().equals(Fc[1])},greaterThan:function(De){isNaN(De)||(De=new H2(De));var Fc=this.qcompare(De);return Fc[0].gt(Fc[1])},gte:function(De){return this.greaterThan(De)||this.equals(De)},lte:function(De){return this.lessThan(De)||this.equals(De)},lessThan:function(De){isNaN(De)||(De=new H2(De));var Fc=this.qcompare(De);return Fc[0].lt(Fc[1])},isInteger:function(){return this.den.equals(1)},negate:function(){return this.num=this.num.multiply(-1),this},invert:function(){var De=this.den;if(!this.num.equals(0)){var Fc=this.num.isNegative();this.den=this.num.abs(),this.num=De,Fc&&(this.num=this.num.multiply(-1))}return this},isOne:function(){return this.num.equals(1)&&this.den.equals(1)},sign:function(){return this.num.isNegative()?-1:1},abs:function(){return this.num=this.num.abs(),this},gcd:function(De){return H2.quick(u.gcd(De.num,this.num),u.lcm(De.den,this.den))},toString:function(){return this.den.equals(1)?this.num.toString():this.num.toString()+"/"+this.den.toString()},valueOf:function(){if(Z.USE_BIG)return new d(this.num.toString()).div(new d(this.den.toString()));var De=this.num/this.den;return De},isNegative:function(){return this.toDecimal()<0}};function x1(De){var Fc=De==="Infinity";return this instanceof x1?(De instanceof d&&(De=De.toString()),/^(\-?\+?\d+)\.?\d*e?\-?\+?\d*/i.test(De)||De instanceof d?(this.group=me,this.value=Bs,this.multiplier=new H2(De)):(this.group=He,yh(De),this.value=De,this.multiplier=new H2(1),this.imaginary=De===Z.IMAGINARY,this.isInfinity=Fc),this.power=new H2(1),this):new x1(De)}x1.imaginary=function(){var De=new x1(Z.IMAGINARY);return De.imaginary=!0,De},x1.infinity=function(De){var Fc=new x1("Infinity");return De===-1&&Fc.negate(),Fc},x1.shell=function(De,Fc){var hf=new x1(Fc);return hf.group=De,hf.symbols={},hf.length=0,hf},x1.unwrapSQRT=function(De,Fc){var hf=De.power;if(De.fname===pf&&(De.isLinear()||Fc)){var r1=De.args[0].clone();r1.power=r1.power.multiply(new H2(.5)),r1.multiplier=r1.multiplier.multiply(De.multiplier),De=r1,Fc&&(De.power=hf.multiply(new H2(.5)))}return De},x1.hyp=function(De,Fc){return De=De||new x1(0),Fc=Fc||new x1(0),l.sqrt(l.add(l.pow(De.clone(),new x1(2)),l.pow(Fc.clone(),new x1(2))))},x1.toPolarFormArray=function(De){var Fc,hf,r1,d1;return Fc=De.realpart(),hf=De.imagpart(),r1=x1.hyp(Fc,hf),d1=Fc.equals(0)?l.parse("pi/2"):l.trig.atan(l.divide(hf,Fc)),[r1,d1]},x1.unwrapPARENS=function(De){if(De.fname===""){var Fc=De.args[0];return Fc.power=Fc.power.multiply(De.power),Fc.multiplier=Fc.multiplier.multiply(De.multiplier),De.fname===""?x1.unwrapPARENS(Fc):Fc}return De},x1.create=function(De,Fc){return Fc=Fc===void 0?1:Fc,l.parse("("+De+")^("+Fc+")")},x1.prototype={getNth:function(De){var Fc=c2(l.pow(l.parse(this.multiplier),l.parse(De).invert())),hf=l.parse(u2(Fc)),r1=c2(l.pow(hf,l.parse(De)));return r1.equals(l.parse(this.multiplier))?hf:Fc},isToNth:function(De){var Fc=this.getNth(De),hf=E1(Fc),r1;return this.group===sr?(r1=!0,this.each(function(d1){var y1=d1.isToNth(De);y1||(r1=!1)})):r1=this.group===me?!0:E1(l.divide(l.parse(this.power),l.parse(De))),hf&&r1},isSquare:function(){return this.isToNth(2)},isCube:function(){return this.isToNth(3)},isSimple:function(){return this.power.equals(1)&&this.multiplier.equals(1)},powSimp:function(){if(this.group===sr){var De=[],hf=this.multiplier.sign();this.each(function(d4){var z2=d4.power;if(I1(z2)||z2.equals(1))return this.clone();De.push(z2)});var Fc=new H2(Z1(De)),hf=this.multiplier.sign(),r1=this.multiplier.clone().abs(),d1=r4.ifactor(r1),y1=new H2(1),v1=new H2(1);for(var O1 in d1){var m2=new H2(d1[O1]);m2.lessThan(Fc)||(m2=m2.divide(Fc).subtract(new H2(1)),v1=v1.multiply(new H2(O1))),y1=y1.multiply(l.parse(N1(O1)+"^"+N1(m2)).multiplier)}var T2=new x1(v1);this.each(function(d4){d4=d4.clone(),d4.power=d4.power.divide(Fc),T2=l.multiply(T2,d4)});var w2=l.symfunction(th,[T2]);return w2.power=Fc,w2.multiplier=hf<0?y1.negate():y1,w2}return this.clone()},equals:function(De){return I1(De)||(De=new x1(De)),this.value===De.value&&this.power.equals(De.power)&&this.multiplier.equals(De.multiplier)&&this.group===De.group},abs:function(){var De=this.clone();return De.multiplier.abs(),De},gt:function(De){return I1(De)||(De=new x1(De)),this.isConstant()&&De.isConstant()&&this.multiplier.greaterThan(De.multiplier)},gte:function(De){return I1(De)||(De=new x1(De)),this.equals(De)||this.isConstant()&&De.isConstant()&&this.multiplier.greaterThan(De.multiplier)},lt:function(De){return I1(De)||(De=new x1(De)),this.isConstant()&&De.isConstant()&&this.multiplier.lessThan(De.multiplier)},lte:function(De){return I1(De)||(De=new x1(De)),this.equals(De)||this.isConstant()&&De.isConstant()&&this.multiplier.lessThan(De.multiplier)},isPoly:function(De){var Fc=this.group,hf=this.power;if(!E1(hf)||hf<0)return!1;if(Fc===me||Fc===He||this.isConstant(!0))return!0;var r1=R2(this);if(Fc===sr&&r1.length===1){var d1=r1[0];if(!d1)return!0;for(var y1 in this.symbols){var v1=this.symbols[y1];if(v1.group===wt&&!v1.args[0].isConstant()||!v1.contains(d1)&&!v1.isConstant(!0))return!1}return!0}if(this.isComposite()||Fc===sr&&De){if(!De&&r1.length>1)return!1;for(var y1 in this.symbols)if(!this.symbols[y1].isPoly(De))return!1;return!0}else return!1},stripVar:function(De,Fc){var hf;return(this.group===Do||this.group===He)&&this.value===De?hf=new x1(Fc?0:this.multiplier):this.group===sr&&this.isLinear()?(hf=new x1(1),this.each(function(r1){r1.contains(De,!0)||(hf=l.multiply(hf,r1.clone()))}),hf.multiplier=hf.multiplier.multiply(this.multiplier)):this.group===Ko&&!this.isLinear()?hf=new x1(this.multiplier):this.group===Ko&&this.isLinear()?(hf=new x1(0),this.each(function(r1){if(!r1.contains(De)){var d1=r1.clone();d1.multiplier=d1.multiplier.multiply(this.multiplier),hf=l.add(hf,d1)}}),hf.equals(0)&&(hf=new x1(this.multiplier))):this.group===Xe&&this.power.contains(De,!0)?hf=new x1(this.multiplier):this.group===wt&&this.contains(De)?hf=new x1(this.multiplier):hf=this.clone(),hf},toArray:function(De,Fc){Fc=Fc||{arr:[],add:function(O1,m2){var T2=this.arr[m2];this.arr[m2]=T2?l.add(T2,O1):O1}};var hf=this.group;if(hf===He&&this.contains(De))Fc.add(new x1(this.multiplier),this.power);else if(hf===sr){var r1=this.stripVar(De),d1=l.divide(this.clone(),r1.clone()),y1=d1.isConstant()?0:d1.power;Fc.add(r1,y1)}else if(hf===Do&&this.value===De)this.each(function(O1,m2){Fc.add(O1.stripVar(De),m2)});else if(hf===Ko)this.each(function(O1){O1.toArray(De,Fc)});else{if(this.contains(De))throw new $1("Cannot convert to array! Exiting");Fc.add(this.clone(),0)}Fc=Fc.arr;for(var v1=0;v1<Fc.length;v1++)Fc[v1]||(Fc[v1]=new x1(0));return Fc},hasFunc:function(De){var Fc=this.group===wt||this.group===Xe;if(Fc&&!De||Fc&&this.contains(De))return!0;if(this.symbols){for(var hf in this.symbols)if(this.symbols[hf].hasFunc(De))return!0}return!1},sub:function(De,Fc){De=I1(De)?De.clone():l.parse(De),Fc=I1(Fc)?Fc.clone():l.parse(Fc),(De.group===me||De.group===_e)&&qc("Cannot substitute a number. Must be a variable");var hf=!1,r1=De.multiplier.equals(1),d1=this.multiplier.clone(),y1;if(this.value===De.value&&(this.group!==Do&&De.group!==Do||this.group===Do&&De.group===Do))(r1||De.multiplier.equals(this.multiplier))&&(De.isLinear()?y1=Fc:De.power.equals(this.power)&&(y1=Fc,hf=!0),De.multiplier.equals(this.multiplier)&&(d1=new H2(1)));else if(this.group===sr||this.previousGroup===sr)y1=new x1(1),this.each(function(i4){var E4=l.parse(i4.sub(De,Fc));y1=l.multiply(y1,E4)});else if(this.isComposite()){var v1=this.clone();if(De.isComposite()&&v1.isComposite()&&v1.isLinear()&&De.isLinear()){var O1=function(i4,E4){for(var w4 in i4.symbols){var $4=i4.symbols[w4];if($4.isComposite()&&O1($4,E4)||$4.equals(E4))return!0}return!1};for(var m2 in De.symbols)if(!O1(v1,De.symbols[m2]))return v1.clone();y1=l.add(l.subtract(v1.clone(),De),Fc)}else y1=new x1(0),v1.each(function(i4){y1=l.add(y1,i4.sub(De,Fc))})}else if(this.group===Xe)y1=l.parse(this.value).sub(De,Fc);else if(this.group===wt){for(var T2=[],w2=0;w2<this.args.length;w2++){var d4=this.args[w2];I1(d4)||(d4=l.parse(d4)),T2.push(d4.sub(De,Fc))}y1=l.symfunction(this.fname,T2)}if(y1){if(!hf){var z2=this.group===Xe?this.power.sub(De,Fc):l.parse(this.power);y1=l.pow(y1,z2)}return y1.multiplier=y1.multiplier.multiply(d1),y1}return this.clone()},isMonomial:function(){if(this.group===He)return!0;if(this.group===sr){for(var De in this.symbols)if(this.symbols[De].group!==He)return!1}else return!1;return!0},isPi:function(){return this.group===He&&this.value==="pi"},sign:function(){return this.multiplier.sign()},isE:function(){return this.value==="e"},isSQRT:function(){return this.fname===pf},isConstant:function(De,Fc){if(Fc&&this.group===sr){for(var hf in this.symbols)if(this.symbols[hf].isConstant(!0))return!0}if(De==="functions"&&this.isComposite()){var r1=!0;return this.each(function(y1){y1.isConstant(De,Fc)||(r1=!1)},!0),r1}if(De==="all"&&(this.isPi()||this.isE()))return!0;if(De&&this.group===wt){for(var d1=0;d1<this.args.length;d1++)if(!this.args[d1].isConstant(De))return!1;return!0}return De?B2(this):this.value===Bs},isImaginary:function(){if(this.imaginary)return!0;if(this.symbols){for(var De in this.symbols)if(this.symbols[De].isImaginary())return!0}return!1},realpart:function(){if(this.isConstant())return this.clone();if(this.imaginary)return new x1(0);if(this.isComposite()){var De=new x1(0);return this.each(function(Fc){De=l.add(De,Fc.realpart())}),De}else if(this.isImaginary())return new x1(0);return this.clone()},imagpart:function(){if(this.group===He&&this.isImaginary())return new x1(this.multiplier);if(this.isComposite()){var De=new x1(0);return this.each(function(Fc){De=l.add(De,Fc.imagpart())}),De}return this.group===sr?this.stripVar(Z.IMAGINARY):new x1(0)},isInteger:function(){return this.isConstant()&&this.multiplier.isInteger()},isLinear:function(De){if(De){if(this.isConstant())return!0;if(this.group===He)return this.value===De?this.power.equals(1):!0;if(this.isComposite()&&this.power.equals(1)){for(var Fc in this.symbols)if(!this.symbols[Fc].isLinear(De))return!1;return!0}return this.group===sr&&this.symbols[De]?this.symbols[De].isLinear(De):!1}else return this.power.equals(1)},containsFunction:function(De){if(typeof De=="string"&&(De=[De]),this.group===wt&&De.indexOf(this.fname)!==-1)return!0;if(this.symbols){for(var Fc in this.symbols)if(this.symbols[Fc].containsFunction(De))return!0}return!1},multiplyPower:function(De){if(this.group===me&&this.multiplier.equals(1))return this;var Fc=this.power;if(this.group!==Xe&&De.group===me){var hf=De.multiplier;this.group===me&&!hf.isInteger()&&this.convert(_e),this.power=Fc.equals(1)?hf.clone():Fc.multiply(hf),this.group===_e&&E1(this.power)&&(this.value=Math.pow(this.value,this.power),this.toLinear(),this.convert(me))}else this.group!==Xe&&(Fc=new x1(Fc),this.convert(Xe)),this.power=l.multiply(Fc,De);return this},setPower:function(De,Fc){if(this.group===me&&this.multiplier.equals(1))return this;if(this.group===Xe&&!I1(De))this.group=this.previousGroup,delete this.previousGroup,this.group===me?(this.multiplier=new H2(this.value),this.value=Bs):this.power=De;else{var hf=!1;I1(De)&&(De.group===me?De=De.multiplier:hf=!0);var r1=hf?Xe:_e;this.power=De,this.group===me&&r1&&this.convert(r1,Fc)}return this},isInverse:function(){return this.group===Xe?this.power.multiplier.lessThan(0):this.power<0},clone:function(De){var Fc=De||new x1(0),hf=["value","group","length","previousGroup","imaginary","fname","args","isInfinity","scientific"],r1=hf.length,d1;if(this.symbols){Fc.symbols={};for(var y1 in this.symbols)Fc.symbols[y1]=this.symbols[y1].clone()}for(d1=0;d1<r1;d1++)this[hf[d1]]!==void 0&&(Fc[hf[d1]]=this[hf[d1]]);return Fc.power=this.power.clone(),Fc.multiplier=this.multiplier.clone(),this.isConversion&&(Fc.isConversion=this.isConversion),this.isUnit&&(Fc.isUnit=this.isUnit),Fc},toUnitMultiplier:function(De){return this.multiplier.num=new u(this.multiplier.num.isNegative()&&De?-1:1),this.multiplier.den=new u(1),this},toLinear:function(){return this.power.equals(1)?this:(this.setPower(new H2(1)),this)},each:function(De,Fc){if(!this.symbols)De.call(this,this,this.value);else for(var hf in this.symbols){var r1=this.symbols[hf];if(r1.group===Do&&Fc)for(var d1 in r1.symbols)De.call(hf,r1.symbols[d1],d1);else De.call(this,r1,hf)}},valueOf:function(){return this.group===me?this.multiplier.valueOf():this.power===0?1:this.multiplier===0?0:z4(this,"decimals")},contains:function(De,Fc){De=String(De);var hf=this.group;if(this.value===De)return!0;if(this.symbols){for(var r1 in this.symbols)if(this.symbols[r1].contains(De,Fc))return!0}if(hf===wt||this.previousGroup===wt){for(var d1=0;d1<this.args.length;d1++)if(this.args[d1].contains(De,Fc))return!0}return hf===Xe&&(Fc&&this.power.contains(De,Fc)||this.value===De)?!0:this.value===De},negate:function(){return this.multiplier.negate(),(this.group===Ko||this.group===Do)&&this.distributeMultiplier(),this},invert:function(De,Fc){return De||(this.multiplier=this.multiplier.invert()),I1(this.power)?this.power.negate():this.group===sr&&Fc?this.each(function(hf){return hf.invert()}):this.power&&this.group!==me&&this.power.negate(),this},distributeMultiplier:function(De){var Fc=De?this.power.absEquals(1):this.power.equals(1);if(this.symbols&&Fc&&this.group!==sr&&!this.multiplier.equals(1)){for(var hf in this.symbols){var r1=this.symbols[hf];r1.multiplier=r1.multiplier.multiply(this.multiplier),r1.distributeMultiplier()}this.toUnitMultiplier()}return this},distributeExponent:function(){if(!this.power.equals(1)){var De=this.power;for(var Fc in this.symbols){var hf=this.symbols[Fc];hf.group===Xe?hf.power=l.multiply(hf.power,new x1(De)):this.symbols[Fc].power=this.symbols[Fc].power.multiply(De)}this.toLinear()}return this},convert:function(De,Fc){if(De>wt){var hf=this.clone();this.symbols={},De===sr?hf.toUnitMultiplier():this.toUnitMultiplier(),this.group===wt&&(hf.args=this.args,delete this.args,delete this.fname),this.isImgSymbol&&delete this.isImgSymbol,this.toLinear(),this.symbols[hf.keyForGroup(De)]=hf,this.group=De,this.length=1}else if(De===Xe)this.group===me&&this.multiplier.equals(1)||(this.group!==Xe&&(this.previousGroup=this.group),this.group===me?(this.value=this.multiplier.num.toString(),this.toUnitMultiplier()):this.value=z4(this,"hash"),this.group=Xe);else if(De===me){var r1=this.multiplier.toDecimal();this.symbols&&(this.symbols=void 0),new x1(this.group===_e?r1*Math.pow(this.value,this.power):r1).clone(this)}else De===_e&&this.group===me&&(this.value=Fc?this.multiplier.num.toString():Math.abs(this.multiplier.num.toString()),this.toUnitMultiplier(!Fc),this.group=_e);return this},insert:function(De,Fc){if(I1(De)||qc("Object "+De+" is not of type Symbol!"),this.symbols){var hf=this.group;if(hf>wt){var r1=De.keyForGroup(hf),d1=r1 in this.symbols?this.symbols[r1]:!1;if(Fc==="add"){var y1=r1;d1?(this.symbols[y1]=l.add(d1,De),this.symbols[y1].multiplier.equals(0)&&(delete this.symbols[y1],this.length--,this.length===0&&(this.convert(me),this.multiplier=new H2(0)))):(this.symbols[r1]=De,this.length++)}else De.group===_e&&E1(De.power)&&De.convert(me),De.group!==Xe?(this.multiplier=this.multiplier.multiply(De.multiplier),De.toUnitMultiplier()):(De.parens=De.multiplier.lessThan(0),this.multiplier=this.multiplier.multiply(De.multiplier.clone().abs()),De.toUnitMultiplier(!0)),d1&&(De=l.multiply(P1(this.symbols,r1),De),De.isConstant()&&(this.multiplier=this.multiplier.multiply(De.multiplier),De=new x1(1)),this.length--),De.isOne(!0)?De.multiplier.lessThan(0)&&this.negate():(this.symbols[r1]=De,this.length++);this.length===0&&this.convert(me),(this.group===Ko||this.group===sr)&&this.updateHash()}}return this},attach:function(De){if(S2(De)){for(var Fc=0;Fc<De.length;Fc++)this.insert(De[Fc],"add");return this}return this.insert(De,"add")},combine:function(De){if(S2(De)){for(var Fc=0;Fc<De.length;Fc++)this.insert(De[Fc],"multiply");return this}return this.insert(De,"multiply")},updateHash:function(){if(this.group!==me)if(this.group===wt){for(var De="",Fc=this.args,hf=this.fname===th,r1=0;r1<Fc.length;r1++)De+=(r1===0?"":",")+z4(Fc[r1]);var d1=hf?"":this.fname;this.value=d1+(hf?De:N1(De))}else this.group===He||this.group===Do||(this.value=z4(this,"hash"))},keyForGroup:function(De){var Fc=this.group,hf;if(Fc===me)hf=this.value;else if(Fc===He||Fc===_e)De===Do?hf=this.power.toDecimal():hf=this.value;else if(Fc===wt)De===Do?hf=this.power.toDecimal():hf=z4(this,"hash");else{if(Fc===Do)return De===sr?hf=z4(this,"hash"):De===Ko?this.power.equals(1)?hf=this.value:hf=N1(z4(this,"hash"))+Z.POWER_OPERATOR+this.power.toDecimal():De===Do?hf=this.power.toString():hf=this.value,hf;Fc===Ko?(De===Ko&&(hf=z4(this,"hash")),De===Do?hf=this.power.toDecimal():hf=this.value):Fc===sr?De===Do?hf=this.power.toDecimal():hf=z4(this,"hash"):Fc===Xe&&(De===Do?hf=z4(this.power):hf=z4(this,"hash"))}return hf},collectSymbols:function(De,Fc,hf,r1){var d1=[];if(!this.symbols)d1.push(this);else for(var y1 in this.symbols){var v1=this.symbols[y1];r1&&(v1.group===Do||v1.group===Ko)?d1=d1.concat(v1.collectSymbols()):d1.push(De?De(v1,Fc):v1)}return hf===null&&(hf=void 0),d1.sort(hf)},latex:function(De){return K4.latex(this,De)},text:function(De){return z4(this,De)},isOne:function(De){var Fc=De?"absEquals":"equals";return this.group===me?this.multiplier[Fc](1):this.power.equals(0)},isComposite:function(){var De=this.group,Fc=this.previousGroup;return De===Ko||De===Do||Fc===Do||Fc===Ko},isCombination:function(){var De=this.group,Fc=this.previousGroup;return De===sr||Fc===sr},lessThan:function(De){return this.multiplier.lessThan(De)},greaterThan:function(De){return I1(De)||(De=new x1(De)),!this.isConstant(!0)||!De.isConstant(!0)?!1:this.multiplier.greaterThan(De.multiplier)},getDenom:function(){var De,Fc;if(Fc=this.clone(),this.group===sr&&this.power.lessThan(0)&&(Fc=l.expand(Fc)),Fc.power.lessThan(0)||Fc.group===Xe&&Fc.power.multiplier.lessThan(0)){var hf=l.parse(Fc.multiplier.den);De=Fc.toUnitMultiplier(),De.power.negate(),De=l.multiply(hf,De)}else if(Fc.group===sr){De=l.parse(Fc.multiplier.den);for(var r1 in Fc.symbols){var d1=Fc.symbols[r1];(d1.power<0||d1.group===Xe&&d1.power.multiplier.lessThan(0))&&(De=l.multiply(De,Fc.symbols[r1].clone().invert()))}}else De=l.parse(Fc.multiplier.den);return De},getNum:function(){var De,Fc;return Fc=this.clone(),Fc.group===sr&&Fc.power.lessThan(0)&&(Fc=l.expand(Fc)),Fc.power.greaterThan(0)&&Fc.group!==sr||Fc.group===Xe&&Fc.power.multiplier.greaterThan(0)?De=l.multiply(l.parse(Fc.multiplier.num),Fc.toUnitMultiplier()):Fc.group===sr?(De=l.parse(Fc.multiplier.num),Fc.each(function(hf){(hf.power>0||hf.group===Xe&&hf.power.multiplier>0)&&(De=l.multiply(De,hf.clone()))})):De=l.parse(Fc.multiplier.num),De},toString:function(){return this.text()}};function A3(){var De=this,Fc={},hf={names:[],actions:[]};function r1(An,eh){this.start=An,this.end=eh}r1.prototype.isConstant=function(){return this.start.isConstant()&&this.end.isConstant()},r1.prototype.text=function(){return z4(this.start)+":"+z4(this.end)};function d1(){this.elements=[]}d1.prototype.append=function(An){this.elements.push(An)},d1.prototype.getItems=function(){return this.elements},d1.prototype.toString=function(){return De.pretty_print(this.elements)},d1.create=function(An){var eh=new d1;return An&&eh.append(An),eh};function y1(An,eh,m1){if(this.type=eh,this.value=An,m1!==void 0&&(this.column=m1+1),eh===y1.OPERATOR){var T1=T2[An];for(var U1 in T1)this[U1]=T1[U1]}else eh===y1.FUNCTION&&(this.precedence=y1.MAX_PRECEDENCE,this.leftAssoc=!1)}y1.prototype.toString=function(){return this.value},y1.prototype.toString=function(){return this.is_prefix?"`"+this.value:this.value},y1.OPERATOR="OPERATOR",y1.VARIABLE_OR_LITERAL="VARIABLE_OR_LITERAL",y1.FUNCTION="FUNCTION",y1.UNIT="UNIT",y1.KEYWORD="KEYWORD",y1.MAX_PRECEDENCE=999,this.classes={Collection:d1,Slice:r1,Token:y1};var v1={prec:void 0,cos:function(An,eh){var m1,T1;return m1=De.parse(Math.cos(An)*Math.cosh(eh)),T1=De.parse(Math.sin(An)*Math.sinh(eh)),De.subtract(m1,De.multiply(T1,x1.imaginary()))},sin:function(An,eh){var m1,T1;return m1=De.parse(Math.sin(An)*Math.cosh(eh)),T1=De.parse(Math.cos(An)*Math.sinh(eh)),De.subtract(m1,De.multiply(T1,x1.imaginary()))},tan:function(An,eh){var m1,T1;return m1=De.parse(Math.sin(2*An)/(Math.cos(2*An)+Math.cosh(2*eh))),T1=De.parse(Math.sinh(2*eh)/(Math.cos(2*An)+Math.cosh(2*eh))),De.add(m1,De.multiply(T1,x1.imaginary()))},sec:function(An,eh){var m1=this.removeDen(this.cos(An,eh));return De.subtract(m1[0],De.multiply(m1[1],x1.imaginary()))},csc:function(An,eh){var m1=this.removeDen(this.sin(An,eh));return De.add(m1[0],De.multiply(m1[1],x1.imaginary()))},cot:function(An,eh){var m1=this.removeDen(this.tan(An,eh));return De.subtract(m1[0],De.multiply(m1[1],x1.imaginary()))},acos:function(An,eh){var m1,T1,U1,r2,p2,C2;return m1=this.fromArray([An,eh]),C2=De.pow(m1.clone(),new x1(2)),T1=De.expand(C2),U1=De.multiply(l3(De.subtract(new x1(1),T1)),x1.imaginary()),r2=De.expand(De.add(m1.clone(),U1)),p2=R4(r2),De.expand(De.multiply(x1.imaginary().negate(),p2))},asin:function(An,eh){return De.subtract(De.parse("pi/2"),this.acos(An,eh))},atan:function(An,eh){if(An.equals(0)&&(eh.equals(1)||eh.equals(-1)))return De.parse(`${x1.infinity()}*${Z.IMAGINARY}*${eh}`);var m1,T1,U1,r2;return r2=v1.fromArray([An,eh]),m1=De.expand(De.multiply(x1.imaginary(),r2.clone())),T1=R4(De.expand(De.subtract(new x1(1),m1.clone()))),U1=R4(De.expand(De.add(new x1(1),m1.clone()))),De.expand(De.multiply(De.divide(x1.imaginary(),new x1(2)),De.subtract(T1,U1)))},asec:function(An,eh){var m1=this.removeDen([An,eh]);return m1[1].negate(),this.acos.apply(this,m1)},acsc:function(An,eh){var m1=this.removeDen([An,eh]);return m1[1].negate(),this.asin.apply(this,m1)},acot:function(An,eh){var m1=this.removeDen([An,eh]);return m1[1].negate(),this.atan.apply(this,m1)},cosh:function(An,eh){var m1,T1;return m1=De.parse(Math.cosh(An)*Math.cos(eh)),T1=De.parse(Math.sinh(An)*Math.sin(eh)),De.add(m1,De.multiply(T1,x1.imaginary()))},sinh:function(An,eh){var m1,T1;return m1=De.parse(Math.sinh(An)*Math.cos(eh)),T1=De.parse(Math.cosh(An)*Math.sin(eh)),De.add(m1,De.multiply(T1,x1.imaginary()))},tanh:function(An,eh){var m1,T1;return m1=De.parse(Math.sinh(2*An)/(Math.cos(2*eh)+Math.cosh(2*An))),T1=De.parse(Math.sin(2*eh)/(Math.cos(2*eh)+Math.cosh(2*An))),De.subtract(m1,De.multiply(T1,x1.imaginary()))},sech:function(An,eh){var m1=this.removeDen(this.cosh(An,eh));return De.subtract(m1[0],De.multiply(m1[1],x1.imaginary()))},csch:function(An,eh){var m1=this.removeDen(this.sinh(An,eh));return De.subtract(m1[0],De.multiply(m1[1],x1.imaginary()))},coth:function(An,eh){var m1=this.removeDen(this.tanh(An,eh));return De.add(m1[0],De.multiply(m1[1],x1.imaginary()))},acosh:function(An,eh){var m1,T1,U1;return U1=this.fromArray([An,eh]),m1=l3(De.add(U1.clone(),new x1(1))),T1=l3(De.subtract(U1.clone(),new x1(1))),De.expand(R4(De.add(U1,De.expand(De.multiply(m1,T1)))))},asinh:function(An,eh){var m1,T1;return T1=this.fromArray([An,eh]),m1=l3(De.add(new x1(1),De.expand(De.pow(T1.clone(),new x1(2))))),De.expand(R4(De.add(T1,m1)))},atanh:function(An,eh){var m1,T1,U1;return U1=this.fromArray([An,eh]),m1=R4(De.add(U1.clone(),new x1(1))),T1=R4(De.subtract(new x1(1),U1)),De.expand(De.divide(De.subtract(m1,T1),new x1(2)))},asech:function(An,eh){var m1=this.removeDen([An,eh]);return m1[1].negate(),this.acosh.apply(this,m1)},acsch:function(An,eh){var m1=this.removeDen([An,eh]);return m1[1].negate(),this.asinh.apply(this,m1)},acoth:function(An,eh){var m1=this.removeDen([An,eh]);return m1[1].negate(),this.atanh.apply(this,m1)},sqrt:function(An){var eh,m1,T1,U1,r2;return eh=An.realpart(),m1=An.imagpart(),T1=x1.hyp(eh,m1),U1=De.add(eh.clone(),T1),r2=l3(De.multiply(new x1(2),U1.clone())),De.add(De.divide(U1.clone(),r2.clone()),De.multiply(De.divide(m1,r2),x1.imaginary()))},log:function(An,eh){var m1,T1,U1;return m1=R4(x1.hyp(An,eh)),U1=Z.USE_BIG?x1(d.atan2(eh.multiplier.toDecimal(),An.multiplier.toDecimal())):Math.atan2(eh,An),T1=De.parse(U1),De.add(m1,De.multiply(x1.imaginary(),T1))},erf(An,eh){return De.symfunction("erf",[An])},removeDen:function(An){var eh,m1,T1,U1,r2;return S2(An)?(m1=An[0],T1=An[1]):(m1=An.realpart(),T1=An.imagpart()),eh=Math.pow(m1,2)+Math.pow(T1,2),U1=De.parse(m1/eh),r2=De.parse(T1/eh),[U1,r2]},fromArray:function(An){return De.add(An[0],De.multiply(x1.imaginary(),An[1]))},evaluate:function(An,eh){var m1,T1,U1;if(U1=An.power.sign(),An.power=An.power.abs(),An.power.greaterThan(1)&&(An=De.expand(An)),U1<0){var r2=this.removeDen(An);m1=r2[0],T1=r2[1]}else m1=An.realpart(),T1=An.imagpart();return m1.isConstant("all")&&T1.isConstant("all")?this[eh].call(this,m1,T1):De.symfunction(eh,[An])}},O1=this.trig={cos:function(An){if(An.equals("pi")&&An.multiplier.den.equals(2))return new x1(0);if(Z.PARSE2NUMBER){if(An.equals(new x1(Z.PI/2)))return new x1(0);if(An.isConstant())return Z.USE_BIG?new x1(d.cos(An.multiplier.toDecimal())):new x1(Math.cos(An.valueOf()));if(An.isImaginary())return v1.evaluate(An,"cos")}if(An.equals(0))return new x1(1);var eh,m1=!1,T1=p5(An.multiplier.toDecimal()),U1=An.multiplier.abs();if(An.multiplier=U1,An.isPi()&&An.isLinear())if(E1(U1))eh=new x1(k2(U1)?1:-1);else{Number(U1.num);var r2=Number(U1.den);r2===2?eh=new x1(0):r2===3?(eh=De.parse("1/2"),m1=!0):r2===4?(eh=De.parse("1/sqrt(2)"),m1=!0):r2===6?(eh=De.parse("sqrt(3)/2"),m1=!0):eh=De.symfunction("cos",[An])}return m1&&(T1===2||T1===3)&&eh.negate(),eh||(eh=De.symfunction("cos",[An])),eh},sin:function(An){if(Z.PARSE2NUMBER){if(An.isConstant())return An%Math.PI===0?new x1(0):Z.USE_BIG?new x1(d.sin(An.multiplier.toDecimal())):new x1(Math.sin(An.valueOf()));if(An.isImaginary())return v1.evaluate(An,"sin")}if(An.equals(0))return new x1(0);var eh,m1=!1,T1=p5(An.multiplier.toDecimal()),U1=An.multiplier.sign(),r2=An.multiplier.abs();if(An.multiplier=r2,An.equals("pi"))eh=new x1(0);else if(An.isPi()&&An.isLinear())if(E1(r2))eh=new x1(0);else{r2.num;var p2=r2.den;p2==2?(eh=new x1(1),m1=!0):p2==3?(eh=De.parse("sqrt(3)/2"),m1=!0):p2==4?(eh=De.parse("1/sqrt(2)"),m1=!0):p2==6?(eh=De.parse("1/2"),m1=!0):eh=De.multiply(new x1(U1),De.symfunction("sin",[An]))}return eh||(eh=De.multiply(new x1(U1),De.symfunction("sin",[An]))),m1&&(T1===3||T1===4)&&eh.negate(),eh},tan:function(An){if(Z.PARSE2NUMBER){if(An%Math.PI===0&&An.isLinear())return new x1(0);if(An.isConstant())return Z.USE_BIG?new x1(d.tan(An.multiplier.toDecimal())):new x1(Math.tan(An.valueOf()));if(An.isImaginary())return v1.evaluate(An,"tan")}var eh,m1=!1,T1=p5(An.multiplier.toDecimal()),U1=An.multiplier;if(An.multiplier=U1,An.isPi()&&An.isLinear())if(E1(U1))eh=new x1(0);else{U1.num;var r2=U1.den;if(r2==2)throw new h1("tan is undefined for "+An.toString());r2==3?(eh=De.parse("sqrt(3)"),m1=!0):r2==4?(eh=new x1(1),m1=!0):r2==6?(eh=De.parse("1/sqrt(3)"),m1=!0):eh=De.symfunction("tan",[An])}return eh||(eh=De.symfunction("tan",[An])),m1&&(T1===2||T1===4)&&eh.negate(),eh},sec:function(An){if(Z.PARSE2NUMBER)return An.isConstant()?Z.USE_BIG?new x1(new d(1).dividedBy(d.cos(An.multiplier.toDecimal()))):new x1(r4.sec(An.valueOf())):An.isImaginary()?v1.evaluate(An,"sec"):De.parse(D1("1/cos({0})",An));var eh,m1=!1,T1=p5(An.multiplier.toDecimal()),U1=An.multiplier.abs();if(An.multiplier=U1,An.isPi()&&An.isLinear())if(E1(U1))eh=new x1(k2(U1)?1:-1);else{U1.num;var r2=U1.den;if(r2==2)throw new h1("sec is undefined for "+An.toString());r2==3?(eh=new x1(2),m1=!0):r2==4?(eh=De.parse("sqrt(2)"),m1=!0):r2==6?(eh=De.parse("2/sqrt(3)"),m1=!0):eh=De.symfunction("sec",[An])}return m1&&(T1===2||T1===3)&&eh.negate(),eh||(eh=De.symfunction("sec",[An])),eh},csc:function(An){if(Z.PARSE2NUMBER)return An.isConstant()?Z.USE_BIG?new x1(new d(1).dividedBy(d.sin(An.multiplier.toDecimal()))):new x1(r4.csc(An.valueOf())):An.isImaginary()?v1.evaluate(An,"csc"):De.parse(D1("1/sin({0})",An));var eh,m1=!1,T1=p5(An.multiplier.toDecimal()),U1=An.multiplier.sign(),r2=An.multiplier.abs();if(An.multiplier=r2,An.isPi()&&An.isLinear()){if(E1(r2))throw new h1("csc is undefined for "+An.toString());r2.num;var p2=r2.den;p2==2?(eh=new x1(1),m1=!0):p2==3?(eh=De.parse("2/sqrt(3)"),m1=!0):p2==4?(eh=De.parse("sqrt(2)"),m1=!0):p2==6?(eh=new x1(2),m1=!0):eh=De.multiply(new x1(U1),De.symfunction("csc",[An]))}return eh||(eh=De.multiply(new x1(U1),De.symfunction("csc",[An]))),m1&&(T1===3||T1===4)&&eh.negate(),eh},cot:function(An){if(Z.PARSE2NUMBER)return An%(Math.PI/2)===0?new x1(0):An.isConstant()?Z.USE_BIG?new x1(new d(1).dividedBy(d.tan(An.multiplier.toDecimal()))):new x1(r4.cot(An.valueOf())):An.isImaginary()?v1.evaluate(An,"cot"):De.parse(D1("1/tan({0})",An));var eh,m1=!1,T1=p5(An.multiplier.toDecimal()),U1=An.multiplier;if(An.multiplier=U1,An.isPi()&&An.isLinear()){if(E1(U1))throw new h1("cot is undefined for "+An.toString());U1.num;var r2=U1.den;r2==2?eh=new x1(0):r2==3?(eh=De.parse("1/sqrt(3)"),m1=!0):r2==4?(eh=new x1(1),m1=!0):r2==6?(eh=De.parse("sqrt(3)"),m1=!0):eh=De.symfunction("cot",[An])}return eh||(eh=De.symfunction("cot",[An])),m1&&(T1===2||T1===4)&&eh.negate(),eh},acos:function(An){if(Z.PARSE2NUMBER){if(An.isConstant()){if(An.gt(1)||An.lt(-1)){var eh=An.toString();return y3(c2(`pi/2-asin(${eh})`))}return Z.USE_BIG?new x1(d.acos(An.multiplier.toDecimal())):new x1(Math.acos(An.valueOf()))}if(An.isImaginary())return v1.evaluate(An,"acos")}return De.symfunction("acos",arguments)},asin:function(An){if(Z.PARSE2NUMBER){if(An.isConstant()){if(An.gt(1)||An.lt(-1)){var eh=Z.IMAGINARY,m1=An.multiplier.toDecimal();return y3(c2(`${eh}*log(sqrt(1-${m1}^2)-${eh}*${m1})`))}return Z.USE_BIG?new x1(d.asin(An.multiplier.toDecimal())):new x1(Math.asin(An.valueOf()))}if(An.isImaginary())return v1.evaluate(An,"asin")}return De.symfunction("asin",arguments)},atan:function(An){var eh;if(An.equals(0))eh=new x1(0);else{if(Z.PARSE2NUMBER)return An.isConstant()?Z.USE_BIG?new x1(d.atan(An.multiplier.toDecimal())):new x1(Math.atan(An.valueOf())):An.isImaginary()?v1.evaluate(An,"atan"):De.symfunction("atan",arguments);An.equals(-1)?eh=De.parse("-pi/4"):eh=De.symfunction("atan",arguments)}return eh},asec:function(An){if(Z.PARSE2NUMBER){if(An.equals(0))throw new C1("Input is out of the domain of sec!");if(An.isConstant())return O1.acos(An.invert());if(An.isImaginary())return v1.evaluate(An,"asec")}return De.symfunction("asec",arguments)},acsc:function(An){if(Z.PARSE2NUMBER){if(An.isConstant())return O1.asin(An.invert());if(An.isImaginary())return v1.evaluate(An,"acsc")}return De.symfunction("acsc",arguments)},acot:function(An){if(Z.PARSE2NUMBER){if(An.isConstant())return new De.add(De.parse("pi/2"),O1.atan(An).negate());if(An.isImaginary())return v1.evaluate(An,"acot")}return De.symfunction("acot",arguments)},atan2:function(An,eh){if(An.equals(0)&&eh.equals(0))throw new h1("atan2 is undefined for 0, 0");return Z.PARSE2NUMBER&&An.isConstant()&&eh.isConstant()?new x1(Math.atan2(An,eh)):De.symfunction("atan2",arguments)}},m2=this.trigh={cosh:function(An){if(Z.PARSE2NUMBER){if(An.isConstant())return new x1(Math.cosh(An.valueOf()));if(An.isImaginary())return v1.evaluate(An,"cosh")}return De.symfunction("cosh",arguments)},sinh:function(An){if(Z.PARSE2NUMBER){if(An.isConstant())return new x1(Math.sinh(An.valueOf()));if(An.isImaginary())return v1.evaluate(An,"sinh")}return De.symfunction("sinh",arguments)},tanh:function(An){if(Z.PARSE2NUMBER){if(An.isConstant())return new x1(Math.tanh(An.valueOf()));if(An.isImaginary())return v1.evaluate(An,"tanh")}return De.symfunction("tanh",arguments)},sech:function(An){return Z.PARSE2NUMBER?An.isConstant()?new x1(Math.sech(An.valueOf())):An.isImaginary()?v1.evaluate(An,"sech"):De.parse(D1("1/cosh({0})",An)):De.symfunction("sech",arguments)},csch:function(An){return Z.PARSE2NUMBER?An.isConstant()?new x1(Math.csch(An.valueOf())):An.isImaginary()?v1.evaluate(An,"csch"):De.parse(D1("1/sinh({0})",An)):De.symfunction("csch",arguments)},coth:function(An){return Z.PARSE2NUMBER?An.isConstant()?new x1(Math.coth(An.valueOf())):An.isImaginary()?v1.evaluate(An,"coth"):De.parse(D1("1/tanh({0})",An)):De.symfunction("coth",arguments)},acosh:function(An){var eh;return Z.PARSE2NUMBER&&An.isImaginary()?eh=v1.evaluate(An,"acosh"):Z.PARSE2NUMBER?eh=c2(De.parse(D1(Z.LOG+"(({0})+sqrt(({0})^2-1))",An.toString()))):eh=De.symfunction("acosh",arguments),eh},asinh:function(An){var eh;return Z.PARSE2NUMBER&&An.isImaginary()?eh=v1.evaluate(An,"asinh"):Z.PARSE2NUMBER?eh=c2(De.parse(D1(Z.LOG+"(({0})+sqrt(({0})^2+1))",An.toString()))):eh=De.symfunction("asinh",arguments),eh},atanh:function(An){var eh;return Z.PARSE2NUMBER&&An.isImaginary()?eh=v1.evaluate(An,"atanh"):Z.PARSE2NUMBER?eh=c2(De.parse(D1("(1/2)*"+Z.LOG+"((1+({0}))/(1-({0})))",An.toString()))):eh=De.symfunction("atanh",arguments),eh},asech:function(An){var eh;return Z.PARSE2NUMBER&&An.isImaginary()?eh=v1.evaluate(An,"asech"):Z.PARSE2NUMBER?eh=c2(R4(De.add(An.clone().invert(),l3(De.subtract(De.pow(An,new x1(-2)),new x1(1)))))):eh=De.symfunction("asech",arguments),eh},acsch:function(An){var eh;return Z.PARSE2NUMBER&&An.isImaginary()?eh=v1.evaluate(An,"acsch"):Z.PARSE2NUMBER?eh=c2(De.parse(D1(Z.LOG+"((1+sqrt(1+({0})^2))/({0}))",An.toString()))):eh=De.symfunction("acsch",arguments),eh},acoth:function(An){var eh;return Z.PARSE2NUMBER&&An.isImaginary()?eh=v1.evaluate(An,"acoth"):Z.PARSE2NUMBER?An.equals(1)?eh=x1.infinity():eh=c2(De.divide(R4(De.divide(De.add(An.clone(),new x1(1)),De.subtract(An.clone(),new x1(1)))),new x1(2))):eh=De.symfunction("acoth",arguments),eh}};this.units={};var T2={"\\":{precedence:8,operator:"\\",action:"slash",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(An){return An}},"!!":{precedence:7,operator:"!!",action:"dfactorial",prefix:!1,postfix:!0,leftAssoc:!0,operation:function(An){return De.symfunction(Z.DOUBLEFACTORIAL,[An])}},"!":{precedence:7,operator:"!",action:"factorial",prefix:!1,postfix:!0,leftAssoc:!0,operation:function(An){return a3(An)}},"^":{precedence:6,operator:"^",action:"pow",prefix:!1,postfix:!1,leftAssoc:!0},"**":{precedence:6,operator:"**",action:"pow",prefix:!1,postfix:!1,leftAssoc:!0},"%":{precedence:4,operator:"%",action:"percent",prefix:!1,postfix:!0,leftAssoc:!0,overloaded:!0,overloadAction:"mod",overloadLeftAssoc:!1,operation:function(An){return De.divide(An,new x1(100))}},"*":{precedence:4,operator:"*",action:"multiply",prefix:!1,postfix:!1,leftAssoc:!1},"/":{precedence:4,operator:"/",action:"divide",prefix:!1,postfix:!1,leftAssoc:!1},"+":{precedence:3,operator:"+",action:"add",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(An){return An}},plus:{precedence:3,operator:"plus",action:"add",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(An){return An}},"-":{precedence:3,operator:"-",action:"subtract",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(An){return An.negate()}},"=":{precedence:2,operator:"=",action:"equals",prefix:!1,postfix:!1,leftAssoc:!1},"==":{precedence:1,operator:"==",action:"eq",prefix:!1,postfix:!1,leftAssoc:!1},"<":{precedence:1,operator:"<",action:"lt",prefix:!1,postfix:!1,leftAssoc:!1},"<=":{precedence:1,operator:"<=",action:"lte",prefix:!1,postfix:!1,leftAssoc:!1},">":{precedence:1,operator:">",action:"gt",prefix:!1,postfix:!1,leftAssoc:!1},"=>":{precedence:1,operator:"=>",action:"gte",prefix:!1,postfix:!1,leftAssoc:!1},",":{precedence:0,operator:",",action:"comma",prefix:!1,postfix:!1,leftAssoc:!1},":":{precedence:0,operator:",",action:"assign",prefix:!1,postfix:!1,leftAssoc:!1,vectorFn:"slice"},":=":{precedence:0,operator:",",action:"function_assign",prefix:!1,postfix:!1,leftAssoc:!0}},w2={"(":{type:"round",id:1,is_open:!0,is_close:!1},")":{type:"round",id:2,is_open:!1,is_close:!0},"[":{type:"square",id:3,is_open:!0,is_close:!1,maps_to:"vector"},"]":{type:"square",id:4,is_open:!1,is_close:!0},"{":{type:"curly",id:5,is_open:!0,is_close:!1,maps_to:"Set"},"}":{type:"curly",id:6,is_open:!1,is_close:!0}},d4=this.functions={cos:[O1.cos,1],sin:[O1.sin,1],tan:[O1.tan,1],sec:[O1.sec,1],csc:[O1.csc,1],cot:[O1.cot,1],acos:[O1.acos,1],asin:[O1.asin,1],atan:[O1.atan,1],arccos:[O1.acos,1],arcsin:[O1.asin,1],arctan:[O1.atan,1],asec:[O1.asec,1],acsc:[O1.acsc,1],acot:[O1.acot,1],atan2:[O1.atan2,2],acoth:[m2.acoth,1],asech:[m2.asech,1],acsch:[m2.acsch,1],sinh:[m2.sinh,1],cosh:[m2.cosh,1],tanh:[m2.tanh,1],asinh:[m2.asinh,1],sech:[m2.sech,1],csch:[m2.csch,1],coth:[m2.coth,1],acosh:[m2.acosh,1],atanh:[m2.atanh,1],log10:[,1],exp:[v3,1],radians:[g3,1],degrees:[k3,1],min:[S5,-1],max:[w5,-1],erf:[,1],floor:[,1],ceil:[,1],trunc:[,1],Si:[,1],step:[,1],rect:[,1],sinc:[o3,1],tri:[,1],sign:[W6,1],Ci:[,1],Ei:[,1],Shi:[,1],Chi:[,1],Li:[,1],fib:[,1],fact:[a3,1],factorial:[a3,1],continued_fraction:[D4,[1,2]],dfactorial:[,1],gamma_incomplete:[,[1,2]],round:[x6,[1,2]],scientific:[g6,[1,2]],mod:[F3,2],pfactor:[i5,1],vector:[W7,-1],matrix:[sy,-1],Set:[D3,-1],imatrix:[O5,-1],parens:[X2,-1],sqrt:[l3,1],cbrt:[j4,1],nthroot:[j3,2],log:[R4,[1,2]],expand:[m5,1],abs:[f3,1],invert:[c1,1],determinant:[X7,1],size:[$y,1],transpose:[t1,1],dot:[tv,2],cross:[Os,2],vecget:[H3,2],vecset:[j5,3],vectrim:[l6,[1,2]],matget:[ev,3],matset:[K7,4],matgetrow:[qy,2],matsetrow:[O3,3],matgetcol:[I4,2],matsetcol:[G7,3],rationalize:[t6,1],IF:[Z3,3],is_in:[U3,2],realpart:[K6,1],imagpart:[n5,1],conjugate:[A6,1],arg:[u3,1],polarform:[r6,1],rectform:[d5,1],sort:[a5,[1,2]],integer_part:[,1],union:[k1,2],contains:[L2,2],intersection:[f2,2],difference:[g4,2],intersects:[C3,2],is_subset:[n6,2],print:[E3,-1]};this.error=qc;var z2=function(An){for(var eh=Z.FUNCTION_MODULES,m1=eh.length,T1=0;T1<m1;T1++){var U1=eh[T1];if(An in U1)return U1[An]}qc("The function "+An+" is undefined!")};this.override=function(An,eh){Fc[An]||(Fc[An]=[]),Fc[An].push(this[An]),this[An]=eh},this.restore=function(An){this[An]&&(this[An]=Fc[An].pop())},this.extend=function(An,eh,m1){var T1=this,U1=this[An];if(typeof U1=="function"&&typeof eh=="function"){var r2=this[An];this[An]=function(p2,C2){return I1(p2)&&I1(C2)&&!m1?r2.call(T1,p2,C2):eh.call(T1,p2,C2,r2)}}},this.symfunction=function(An,eh){var m1=new x1(An);return m1.group=wt,typeof eh=="object"&&(eh=[].slice.call(eh)),m1.args=eh,m1.fname=An===th?"":An,m1.updateHash(),m1},this.callfunction=function(An,eh,m1){var T1=d4[An];T1||qc("Nerdamer currently does not support the function "+An);var U1=T1[1]||m1,r2=T1[0],p2;if(eh instanceof Array||(eh=eh!==void 0?[eh]:[]),U1!==-1){var C2=S2(U1),Y2=C2?U1[0]:U1,J2=C2?U1[1]:U1,S4=eh.length,D2=An+" requires a {0} of {1} arguments. {2} provided!";S4<Y2&&qc(D1(D2,"minimum",Y2,S4)),S4>J2&&qc(D1(D2,"maximum",J2,S4))}var F4=Ym(eh);return r2?p2=r2.apply(T1[2],eh):(r2=z2(An),Z.PARSE2NUMBER&&F4?p2=i6(r2.apply(r2,eh)):p2=De.symfunction(An,eh)),p2},this.operator_filter_regex=function(){var An="^\\"+Object.keys(T2).filter(function(eh){if(eh.length===1)return eh}).join("\\");return new RegExp("(["+An+"])\\s+(["+An+"])")}(),this.setOperator=function(An,eh,m1){var T1=An.operator;if(T2[T1]=An,eh&&(this[An.action]=eh),De[T1]=An.operation,!An.action&&!(An.prefix||An.postif)&&(An.action=T1),m1==="over"||m1==="under"){var U1=An.precedence;for(var r2 in T2){var p2=T2[r2],C2=m1==="over"?p2.precedence>=U1:p2.precedence>U1;C2&&p2.precedence++}}},this.getOperator=function(An){return T2[An]},this.aliasOperator=function(An,eh){var m1={},T1=T2[An];for(var U1 in T1)m1[U1]=T1[U1];m1.operator=eh,this.setOperator(m1)},this.getOperators=function(){return T2},this.getBrackets=function(){return w2};var i4=function(An){An=String(An);for(var eh=0;eh<hf.actions.length;eh++)An=hf.actions[eh].call(this,An);for(An=An.replace(/\s+/g," "),/e/gi.test(An)&&(An=An.replace(/\-*\d+\.*\d*e\+?\-?\d+/gi,function(T1){return ff(T1)})),An=An.replace(Z.IMPLIED_MULTIPLICATION_REGEX,function(){var T1=arguments[4],U1=arguments[1],r2=arguments[2],p2=arguments[3],C2=T1.charAt(p2),Y2="",J2="*";return C2.match(/[\+\-\/\*]/)||(Y2=T1.charAt(p2-1)),Y2.match(/[a-z]/i)&&(J2=""),U1+J2+r2}).replace(/([a-z0-9_]+)/gi,function(T1,U1){return Z.USE_MULTICHARACTER_VARS===!1&&!(U1 in d4)&&isNaN(U1)?U1.split("").join("*"):U1}).replace(/\)\(/g,")*(")||"0";;){var m1=An;if(An=An.replace(/([a-z0-9_]+)(\()|(\))([a-z0-9]+)/gi,function(T1,U1,r2,p2,C2){var Y2=U1||p2,J2=r2||C2;return Y2 in d4?Y2+J2:Y2+"*"+J2}),m1===An)break}return An};this.initConstants=function(){this.CONSTANTS={E:new x1(Z.E),PI:new x1(Z.PI)}},this.pretty_print=function(An){if(Array.isArray(An)){var eh=An.map(m1=>De.pretty_print(m1)).join(", ");return An.type==="vector"?"vector<"+eh+">":"("+eh+")"}return An.toString()},this.peekers={pre_operator:[],post_operator:[],pre_function:[],post_function:[]},this.callPeekers=function(An){if(Z.callPeekers)for(var eh=this.peekers[An],m1=b2(arguments).slice(1).map(K1),T1=0;T1<eh.length;T1++)eh[T1].apply(null,m1)},this.tokenize=function(An){An=String(An),An=An.trim().replace(/\s+/g," ");for(var eh in w2){var m1=new RegExp(w2[eh].is_close?"\\s+\\"+eh:"\\"+eh+"\\s+","g");An=An.replace(m1,eh)}for(var T1=0,U1=An.length,r2=0,p2=[],C2=[p2],Y2=C2[0],J2=0,S4=[],D2=!1,F4=" ",M4="",V4=",",W4="-",X4="*",p3=function(i3,t3){var h6=[];i3!==void 0&&(h6.type=i3),h6.column=t3,C2.push(h6),Y2.push(h6),Y2=h6,J2++},h4=function(){C2.pop(),Y2=C2[--J2]},x4=function(i3){i3=i3!==void 0?i3:T1;for(var t3=i3+1;An.charAt(t3++)in T2;);return An.substring(i3,t3-1)},x3=function(i3){for(var t3=T1-i3.length,h6=[],T5=i3.charAt(0),Z6=1,g5=i3.length;Z6<g5;Z6++){var Pv=i3.charAt(Z6),C6=T5+Pv;C6 in T2?T5=C6:(h6.push(new y1(T5,y1.OPERATOR,t3+Z6)),T5=Pv)}return h6.push(new y1(T5,y1.OPERATOR,t3+Z6)),h6},I2=function(i3,t3){t3===void 0&&(t3=An.substring(r2,i3)),t3 in De.units?Y2.push(new y1(t3,y1.UNIT,r2)):t3!==""&&Y2.push(new y1(t3,y1.VARIABLE_OR_LITERAL,r2))},s4=function(i3){Y2.push(new y1(i3,y1.FUNCTION,r2))},j1=function(i3){r2=i3+1},L4=function(){r2=r2+u6.length-2,T1=r2-1};T1<U1;T1++){var L3=An.charAt(T1);if(L3 in T2){I2(T1);var _4=Y2[0]&&b1(Y2[0]),p6=_4&&L3===X4;D2&&r2<T1&&!(L3===V4||p6)&&(D2=!1,h4()),j1(T1+1);var u6=x4(T1);L4(),Y2.push.apply(Y2,x3(u6))}else if(L3 in w2){var G3=w2[L3];if(G3.is_open){S4.push([G3,r2]);var c6=An.substring(r2,T1);c6 in d4?s4(c6):c6!==""&&Y2.push(new y1(c6,y1.VARIABLE_OR_LITERAL,r2)),p3(G3.maps_to,T1)}else if(G3.is_close){var Z4=S4.pop();if(Z4){if(Z4[0].id!==G3.id-1)throw new W1("Parity error")}else throw new W1("Missing open bracket for bracket at: "+(T1+1));I2(T1),h4()}j1(T1)}else if(L3===F4){var K3=An.substring(r2,T1),w6=An.charAt(T1+1);if(D2){if(K3 in T2)Y2.push(new y1(K3,y1.OPERATOR,T1));else{I2(void 0,K3),h4();var E5=w6 in T2;(E5&&T2[w6].value===W4||!E5)&&Y2.push(new y1(X4,y1.OPERATOR,T1))}D2=!1}else{var c6=An.substring(r2,T1);if(c6 in d4)D2=!0,s4(c6),p3();else if(c6 in T2)Y2.push(new y1(c6,y1.OPERATOR,T1));else{I2(void 0,c6);var w6=An.charAt(T1+1);K3!==M4&&w6!==M4&&!(K3 in T2)&&!(w6 in T2)&&Y2.push(new y1(X4,y1.OPERATOR,T1))}}j1(T1)}}if(S4.length){var X6=S4.pop();throw new W1("Missing closed bracket for bracket at "+(X6[1]+1))}return I2(T1),p2},this.toRPN=function(An){var eh=An.type,m1=An.length,T1,U1=[],r2=[],p2=[],C2=function(X4,p3){for(;X4.length;)p3.push(X4.pop())};for(T1=0;T1<m1;T1++){var Y2=An[T1];if(Y2.type!==y1.OPERATOR)break;if(!Y2.prefix)throw new Y1("Not a prefix operator");Y2.is_prefix=!0,r2.push(Y2)}for(;T1<m1;T1++){var J2=An[T1];if(J2.type===y1.OPERATOR){var S4=J2;if(S4.overloaded){var D2=An[T1+1];D2&&D2.type===y1.VARIABLE_OR_LITERAL&&(S4.postfix=!1,S4.action=S4.overloadAction,S4.leftAssoc=S4.overloadLeftAssoc)}for(;r2.length;){var F4=r2[r2.length-1];if(!(F4.precedence>S4.precedence||!S4.leftAssoc&&F4.precedence===S4.precedence))break;U1.push(r2.pop())}if((eh==="vector"||eh==="set")&&"vectorFn"in S4&&(S4.action=S4.vectorFn),S4.postfix){var M4=An[T1-1];if(M4){if(M4.type===y1.OPERATOR&&!M4.postfix)throw new Y1("Unexpected prefix operator '"+M4.value+"'! at "+M4.column)}else throw new Y1("Unexpected prefix operator '"+J2.value+"'! at "+J2.column)}else do{var D2=An[T1+1],V4=D2?D2.type===y1.OPERATOR:!1;if(V4){if(!D2.prefix)throw new Y1("A prefix operator was expected at "+D2.column);D2.is_prefix=!0,p2.push(D2),T1++}}while(V4);for(S4.is_prefix?p2.push(S4):r2.push(S4);p2.length&&(S4.leftAssoc||!S4.leftAssoc&&p2[p2.length-1].precedence>=S4.precedence);)r2.push(p2.pop())}else if(J2.type===y1.VARIABLE_OR_LITERAL){U1.length===0&&C2(p2,r2),U1.push(J2);var W4=r2[r2.length-1];(!W4||!W4.leftAssoc)&&C2(p2,U1)}else J2.type===y1.FUNCTION?r2.push(J2):J2.type===y1.UNIT&&U1.push(J2);Array.isArray(J2)&&(U1.push(this.toRPN(J2)),J2.type&&U1.push(new y1(J2.type,y1.FUNCTION,J2.column)))}return C2(r2,U1),C2(p2,U1),U1},this.parseRPN=function(An,eh){try{eh=eh||{};for(var m1 in eh)eh[m1]=De.parse(eh[m1],{});Z.PARSE2NUMBER&&("e"in eh||(eh.e=new x1(Z.E)),"pi"in eh||(eh.pi=new x1(Z.PI)));for(var T1=[],U1=0,r2=An.length;U1<r2;U1++){var p2=An[U1];if(Array.isArray(p2)&&(p2=this.parseRPN(p2,eh)),p2)if(p2.type===y1.OPERATOR)if(p2.is_prefix||p2.postfix)T1.push(p2.operation(T1.pop()));else{var C2=T1.pop(),Y2=T1.pop();if(typeof Y2>"u")throw new Y1(p2+" is not a valid postfix operator at "+p2.column);var J2=p2.action==="comma";Y2 instanceof Y4&&!J2&&(Y2=c3.fromSet(Y2)),C2 instanceof Y4&&!J2&&(C2=c3.fromSet(C2)),this.callPeekers("pre_operator",Y2,C2,p2);var S4=De[p2.action](Y2,C2);this.callPeekers("post_operator",S4,Y2,C2,p2),T1.push(S4)}else if(p2.type===y1.FUNCTION){var D2=T1.pop(),F4=D2.parent;D2 instanceof d1||(D2=d1.create(D2));var M4=p2.value,V4=D2.getItems();this.callPeekers("pre_function",M4,V4);var W4=De.callfunction(M4,V4);this.callPeekers("post_function",W4,M4,V4);var X4=T1[T1.length-1],p3=An[U1+1],h4=p3&&p3.type===y1.OPERATOR&&p3.value===",";if(!h4&&W4 instanceof c3&&X4&&X4.elements&&!(X4 instanceof d1)){var x4=T1.pop(),x3=W4.elements[0];if(!x3.isConstant())x4.getter=x3,T1.push(x4),T1.push(W4);else if(x3 instanceof r1)T1.push(c3.fromArray(x4.elements.slice(x3.start,x3.end)));else{var I2=Number(x3),s4=x4.elements.length;if(I2<0&&(I2=s4+I2),I2<0||I2>=s4)throw new _2("Index out of range "+(p2.column+1));var j1=x4.elements[I2];x4.getter=I2,j1.parent=x4,T1.push(j1)}}else F4&&(W4.parent=F4),T1.push(W4)}else{var L4,L3=p2.value;L3 in Z.ALIASES?p2=De.parse(Z.ALIASES[p2]):p2.type===y1.VARIABLE_OR_LITERAL?p2=new x1(L3):p2.type===y1.UNIT&&(p2=new x1(L3),p2.isUnit=!0),L3 in De.CONSTANTS?(L4=p2,p2=new x1(De.CONSTANTS[L3])):L3 in eh&&L3!==eh[L3].toString()?(L4=p2,p2=eh[L3].clone()):L3 in li&&(L4=p2,p2=li[L3].clone()),L4&&(p2.subbed=L4),T1.push(p2)}}var _4=T1[0];if(["undefined","string","number"].indexOf(typeof _4)!==-1)throw new s3("Unexpected token!");return _4}catch(u6){var p6=[C1];throw p6.forEach(function(G3){if(u6 instanceof G3)throw new G3(u6.message+": "+p2.column)}),new w1(u6.message+": "+p2.column)}};function E4(An){this.type=An.type,this.value=An.value,this.left=An.left,this.right=An.right}E4.prototype.toString=function(){var An=this.left?this.left.toString()+"---":"",eh=this.right?"---"+this.right.toString():"";return An+"("+this.value+")"+eh},E4.prototype.toHTML=function(An,eh){An=An||0,eh=typeof eh>"u"?4:eh;var m1=function(p2){return" ".repeat(eh*p2)},r2="",T1=this.left?m1(An+1)+`<li>
`+this.left.toHTML(An+2,eh)+m1(An+1)+`</li> 
`:"",U1=this.right?m1(An+1)+`<li>
`+this.right.toHTML(An+2,eh)+m1(An+1)+`</li>
`:"",r2=m1(An)+'<div class="'+this.type.toLowerCase()+'"><span>'+this.value+"</span></div>"+m1(An)+`
`;return(T1||U1)&&(r2+=m1(An)+`<ul>
`+T1+U1+m1(An)+`</ul>
`),r2+="",r2},this.tree=function(An){for(var eh=[],m1=0;m1<An.length;m1++){var T1=An[m1];if(Array.isArray(T1)){T1=this.tree(T1),eh.push(T1);continue}if(T1.type===y1.OPERATOR)if(T1.is_prefix||T1.postfix){var U1=T1.is_prefix?"left":"right",r2=eh.pop();T1=new E4(T1),T1[U1]=r2,eh.push(T1)}else T1=new E4(T1),T1.right=eh.pop(),T1.left=eh.pop(),eh.push(T1);else if(T1.type===y1.FUNCTION){T1=new E4(T1);var p2=eh.pop();if(T1.right=p2,T1.value==="object"){var r2=eh[eh.length-1];if(r2){for(;r2.right;)r2=r2.right;r2.right=T1;continue}}eh.push(T1)}else eh.push(new E4(T1))}return eh[0]},this.parse=function(An,eh){An=i4(An),eh=eh||{};var m1=this.tokenize(An),T1=this.toRPN(m1);return this.parseRPN(T1,eh)},this.toObject=function(An){var eh=function(m1){for(var T1=[],U1=0,r2=m1.length;U1<r2;U1++){var p2=m1[U1],C2=p2.value;if(p2.type===y1.VARIABLE_OR_LITERAL)T1.push(new x1(C2));else if(p2.type===y1.FUNCTION){U1++;var Y2=De.symfunction(C2,eh(m1[U1]));Y2.isConversion=!0,T1.push(Y2)}else p2.type===y1.OPERATOR?T1.push(C2):T1.push(eh(p2))}return T1};return eh(De.tokenize(An))};var w4=function(An){for(var eh,m1=0,T1=[[]],eh=0,U1=An.length;eh<U1;eh++)An[eh]===","?(m1++,T1[m1]=[]):T1[m1].push(An[eh]);return T1},$4=function(An){return An.replace(/^\\left\((.+)\\right\)$/g,function(eh,m1){return m1||eh})},U4=function(An){for(var eh=[];An.length;){var m1=An.shift(),T1=An[0],U1=S2(T1),r2=T1==="-";if(m1==="^"&&(T1==="+"?An.shift():U1&&T1[0]==="+"&&T1.shift(),U1&&T1.length===1&&An.unshift(An.shift()[0])),m1==="^"&&(U1&&T1[0]==="-"||r2)){var p2=eh.pop(),C2=eh[eh.length-1],Y2="1";C2==="*"?(eh.pop(),Y2=eh.pop()):S2(C2)&&(Y2=eh.pop()),eh.push(Y2,"/",p2,m1),U1?T1.shift():An.shift(),U1&&T1.length===1&&eh.push(An.shift()[0])}else eh.push(m1)}return eh};this.toTeX=function(An,eh){eh=eh||{};var m1=eh.decimals===!0?"decimals":void 0,T1=typeof An=="string"?this.toObject(An):An,U1=[],r2=typeof eh.cdot>"u"?"\\cdot":eh.cdot;if(T1=U4(T1),S2(T1)){for(var p2=[],C2,Y2,J2=0;J2<T1.length;J2++)C2=T1[J2],T1[J2+1]==="^"?(Y2=T1[J2+2],p2.push(K4.braces(this.toTeX([C2]))+"^"+K4.braces(this.toTeX([Y2]))),J2+=2):p2.push(C2);T1=p2}for(var J2=0,S4=T1.length;J2<S4;J2++){var D2=T1[J2];if(D2==="*"&&(D2=r2),I1(D2))if(D2.group===wt){var F4=D2.fname,M4;if(F4===pf)M4="\\sqrt"+K4.braces(this.toTeX(D2.args));else if(F4===_h)M4=K4.brackets(this.toTeX(D2.args),"abs");else if(F4===th)M4=K4.brackets(this.toTeX(D2.args),"parens");else if(F4===Z.LOG10)M4="\\"+Z.LOG10_LATEX+"\\left( "+this.toTeX(D2.args)+"\\right)";else if(F4==="integrate"){var V4=w4(D2.args),W4=K4.braces(this.toTeX(V4[0])),X4=this.toTeX(V4[1]);M4="\\int "+W4+"\\, d"+X4}else if(F4==="defint"){var V4=w4(D2.args),W4=K4.braces(this.toTeX(V4[0])),X4=this.toTeX(V4[3]),p3=this.toTeX(V4[1]),h4=this.toTeX(V4[2]);M4="\\int\\limits_{"+p3+"}^{"+h4+"} "+W4+"\\, d"+X4}else if(F4==="diff"){var V4=w4(D2.args),X4="",W4=K4.braces(this.toTeX(V4[0]));if(V4.length===1){var x4=[];for(I2=0;I2<V4[0].length;I2++)V4[0][I2].group===3&&x4.push(V4[0][I2].value);x4.sort(),X4=x4.length>0?"\\frac{d}{d "+x4[0]+"}":"\\frac{d}{d x}"}else V4.length===2?X4="\\frac{d}{d "+V4[1]+"}":X4="\\frac{d^{"+V4[2]+"}}{d "+this.toTeX(V4[1])+"^{"+V4[2]+"}}";M4=X4+"\\left("+W4+"\\right)"}else if(F4==="sum"||F4==="product"){var x3=[[],[],[],[]],I2=0,J2;for(J2=0;J2<D2.args.length;J2++){if(D2.args[J2]===","){I2++;continue}x3[I2].push(D2.args[J2])}M4=(F4==="sum"?"\\sum_":"\\prod_")+K4.braces(this.toTeX(x3[1])+" = "+this.toTeX(x3[2])),M4+="^"+K4.braces(this.toTeX(x3[3]))+K4.braces(this.toTeX(x3[0]))}else if(F4==="limit"){var s4=w4(D2.args).map(function(L4){return Array.isArray(L4)?De.toTeX(L4.join("")):De.toTeX(String(L4))});M4="\\lim_"+K4.braces(s4[1]+"\\to "+s4[2])+" "+K4.braces(s4[0])}else F4===cf||F4===df?M4=this.toTeX(D2.args)+(F4===cf?"!":"!!"):M4=K4.latex(D2,m1);U1.push(M4)}else U1.push(K4.latex(D2,m1));else S2(D2)?U1.push(K4.brackets(this.toTeX(D2))):D2==="/"?U1.push(K4.frac($4(U1.pop()),$4(this.toTeX([T1[++J2]])))):U1.push(D2)}return U1.join(" ")};function X2(An){return Z.PARSE2NUMBER?An:De.symfunction("parens",[An])}function f3(An){if(An.isInfinity)return x1.infinity();if(An.multiplier.lessThan(0)&&An.multiplier.negate(),An.isImaginary()){var eh=An.realpart(),m1=An.imagpart();if(eh.isConstant()&&m1.isConstant())return l3(De.add(De.pow(eh,new x1(2)),De.pow(m1,new x1(2))))}else if(B2(An)||k2(An.power))return An;if(An.isComposite()){var T1=[];An.each(function(p2){T1.push(p2.multiplier)});var U1=r4.QGCD.apply(null,T1);U1.lessThan(0)&&(An.multiplier=An.multiplier.multiply(new H2(-1)),An.distributeMultiplier())}var r2=De.parse(An.multiplier);return An.toUnitMultiplier(),De.multiply(r2,De.symfunction(_h,[An]))}function a3(An){var eh;if(N2(An)){var m1=new c3;return An.each(function(S4,D2){m1.set(D2-1,a3(S4))}),m1}if(V2(An)){var T1=new b4;return An.each(function(S4,D2,F4){T1.set(D2,F4,a3(S4))}),T1}if(Z.PARSE2NUMBER&&An.isConstant())return E1(An)?eh=r4.bigfactorial(An):eh=r4.gamma(An.multiplier.add(new H2(1)).toDecimal()),eh=i6(eh),eh;if(An.isConstant()){var U1=An.getDenom();if(U1.equals(2)){var r2=An.getNum(),p2,C2,Y2,J2;return An.multiplier.isNegative()?(J2=De.subtract(r2.negate(),new x1(1)).multiplier.divide(new H2(2)),p2=De.pow(new x1(-4),new x1(J2)).multiplier.multiply(r4.bigfactorial(J2)),C2=r4.bigfactorial(new H2(2).multiply(J2))):(J2=De.add(r2,new x1(1)).multiplier.divide(new H2(2)),p2=r4.bigfactorial(new H2(2).multiply(J2)),C2=De.pow(new x1(4),new x1(J2)).multiplier.multiply(r4.bigfactorial(J2))),Y2=p2.divide(C2),De.multiply(De.parse("sqrt(pi)"),new x1(Y2))}}return De.symfunction(cf,[An])}function D4(An,eh){var m1=c2(An);if(m1.isConstant()){var T1=r4.continuedFraction(m1,eh),U1=c3.fromArray(T1.fractions.map(function(r2){return new x1(r2)}));return c3.fromArray([new x1(T1.sign),new x1(T1.whole),U1])}return De.symfunction("continued_fraction",arguments)}function F3(An,eh){if(An.isConstant()&&eh.isConstant()){var m1=new x1(1);return m1.multiplier=m1.multiplier.multiply(An.multiplier.mod(eh.multiplier)),m1}var T1=De.divide(An.clone(),eh.clone());return E1(T1)?new x1(0):De.symfunction("mod",[An,eh])}function Z3(An,eh,m1){return typeof An!="boolean"&&B2(An)&&(An=!!Number(An)),An?eh:m1}function U3(An,eh){if(V2(An))for(var m1=0,T1=An.rows();m1<T1;m1++)for(var U1=0,r2=An.cols();U1<r2;U1++){var p2=An.elements[m1][U1];if(p2.equals(eh))return new x1(1)}else if(An.elements){for(var m1=0,T1=An.elements.length;m1<T1;m1++)if(An.elements[m1].equals(eh))return new x1(1)}return new x1(0)}function o3(An){return Z.PARSE2NUMBER?An.isConstant()?new x1(r4.sinc(An)):De.parse(D1("sin({0})/({0})",An)):De.symfunction("sinc",[An])}function v3(An){return An.fname===Z.LOG&&An.isLinear()?De.pow(An.args[0],x1.create(An.multiplier)):De.parse(D1("e^({0})",An))}function g3(An){return De.parse(D1("({0})*pi/180",An))}function k3(An){return De.parse(D1("({0})*180/pi",An))}function t6(An){if(An.isComposite()){var eh=new x1(0),m1,T1,U1,r2,p2,C2,Y2,J2;return An.each(function(S4){m1=S4.getNum(),T1=S4.getDenom(),U1=eh.getNum(),r2=eh.getDenom(),p2=De.multiply(T1,U1),C2=De.multiply(m1,r2),Y2=De.expand(De.add(p2,C2)),J2=De.multiply(r2,T1),eh=De.divide(Y2,J2)},!0),eh}return An}function l3(An){if(I1(An)||(An=De.parse(An)),An.group===Xe)return De.symfunction(pf,[An]);An.fname===""&&An.power.equals(1)&&(An=An.args[0]);var eh=An.multiplier.sign()<0;if(Z.PARSE2NUMBER){if(An.isConstant()&&!eh)return new x1(d.sqrt(An.multiplier.toDecimal()));if(An.isImaginary())return v1.sqrt(An);if(An.group===He)return De.symfunction("sqrt",[An])}var m1,T1,U1=An.isConstant();if(An.group===sr&&An.isLinear()){var r2=l3(x1(An.multiplier));for(var p2 in An.symbols){var C2=An.symbols[p2];r2=De.multiply(r2,l3(C2))}T1=r2}else if(An.fname===pf){var p2=An.args[0],Y2=An.multiplier;p2.setPower(An.power.multiply(new H2(.25))),T1=p2,Y2.equals(1)||(T1=De.multiply(l3(De.parse(Y2)),T1))}else if(!An.power.isInteger())An.setPower(An.power.multiply(new H2(.5))),T1=An;else if(An.multiplier<0&&An.group===He){var J2=De.parse(An.multiplier).negate(),S4=De.parse(An).toUnitMultiplier().negate();T1=De.multiply(De.symfunction(Z.SQRT,[S4]),l3(J2))}else{var D2=An.power.sign();An.power=An.power.abs(),U1&&An.multiplier.lessThan(0)&&(m1=x1.imaginary(),An.multiplier=An.multiplier.abs());var F4=An.multiplier.toDecimal(),M4=Math.abs(F4),V4=Math.sqrt(M4),r2;if(E1(V4))r2=new x1(V4);else if(E1(F4)){var W4=r4.ifactor(F4),X4=1;for(var C2 in W4){var p3=W4[C2],h4=p3-p3%2;if(h4){var x4=Math.pow(C2,h4);X4*=Math.pow(C2,h4/2),F4/=x4}}r2=De.multiply(De.symfunction(pf,[new x1(F4)]),new x1(X4))}else{for(var x3=[new x1(An.multiplier.num),new x1(An.multiplier.den)],I2=[new x1(1),new x1(1)],s4=[new x1(1),new x1(1)],j1=0;j1<2;j1++){var p3=x3[j1];i5(p3).each(function(_4){_4=x1.unwrapPARENS(_4);var p6=_4.clone().toLinear(),u6=Number(_4.power),G3=u6%2,c6=(u6-G3)/2;I2[j1]=De.multiply(I2[j1],De.pow(p6,new x1(c6))),s4[j1]=De.multiply(s4[j1],l3(De.pow(p6,new x1(G3))))})}r2=De.divide(De.multiply(I2[0],s4[0]),De.multiply(I2[1],s4[1]))}An=An.toUnitMultiplier(!0),An.isOne()?T1=An:k2(An.power.toString())?T1=De.pow(An.clone(),new x1(.5)):T1=De.symfunction(pf,[An]),D2<0&&T1.power.negate(),r2&&(T1=De.multiply(r2,T1)),m1&&(T1=De.multiply(m1,T1))}return eh&&Z.PARSE2NUMBER?De.parse(T1):T1}function j4(An){if(!An.isConstant(!0)){var eh,m1=An.power/3,T1=De.pow(De.parse(An.multiplier),new x1(1/3)),U1=An.toUnitMultiplier();return E1(m1)?eh=De.pow(U1.toLinear(),De.parse(m1)):U1.group===sr?(eh=new x1(1),U1.each(function(r2){eh=De.multiply(eh,j4(r2))})):eh=De.symfunction("cbrt",[U1]),De.multiply(T1,eh)}return j3(An,new x1(3))}function g6(An,eh){return An.scientific=eh||10,An}function j3(An,eh,m1,T1){if(eh=c2(De.parse(eh)),eh.equals(0))throw new h1("Unable to calculate nthroots of zero");if(An<0&&k2(eh))throw new Error("Cannot calculate nthroot of negative number for even powers");if(!An.isConstant(!0))return De.symfunction("nthroot",arguments);An.group!==me&&(An=c2(An)),typeof T1>"u"&&(T1=!0),m1=m1||25;var U1=An.sign(),r2,p2;if(U1<0&&(An=f3(An)),E1(An)&&eh.isConstant()){An<18446744073709552e3?p2=H2.create(Math.pow(An,1/eh)):p2=r4.nthroot(An,eh);var r2;return T1&&(r2=new x1(p2)),r2=new x1(p2.toDecimal(m1)),De.multiply(new x1(U1),r2)}}function i5(An){if(An.greaterThan(9999999999998891e26)||An.equals(-1))return An;if(An.equals(Math.PI))return new x1(Math.PI);if(An=c2(An.clone()),An.isConstant()){var eh=new x1(1),m1=An.toString();if(E1(m1)){var T1=r4.ifactor(m1);for(var U1 in T1){var r2=T1[U1];eh=De.multiply(eh,De.symfunction("parens",[new x1(U1).setPower(new H2(r2))]))}}else{var p2=i5(new x1(An.multiplier.num)),C2=i5(new x1(An.multiplier.den));eh=De.multiply(De.symfunction("parens",[p2]),De.symfunction("parens",[C2]).invert())}}else eh=De.symfunction("pfactor",arguments);return eh}function K6(An){return An.realpart()}function n5(An){return An.imagpart()}function A6(An){var eh=An.realpart(),m1=An.imagpart();return De.add(eh,De.multiply(m1.negate(),x1.imaginary()))}function u3(An){var eh=An.realpart(),m1=An.imagpart();return eh.isConstant()&&m1.isConstant()?m1.equals(0)&&eh.equals(-1)?De.parse("pi"):m1.equals(1)&&eh.equals(0)?De.parse("pi/2"):m1.equals(1)&&eh.equals(1)?De.parse("pi/4"):new x1(Math.atan2(m1,eh)):De.symfunction("atan2",[m1,eh])}function r6(An){var eh,m1,T1,U1;return eh=x1.toPolarFormArray(An),U1=eh[1],m1=eh[0],T1=De.parse(D1("e^({0}*({1}))",Z.IMAGINARY,U1)),De.multiply(m1,T1)}function d5(An){var eh=An.clone();try{var m1,T1,U1,r2,p2,C2,Y2;return m1=x2(An,"e",!0),T1=De.divide(m1.x.power,x1.imaginary()),U1=c2(O1.tan(T1)),r2=De.pow(m1.a,new x1(2)),C2=U1.getDenom(!0),Y2=U1.getNum(),p2=x1.hyp(Y2,C2),p2.equals(m1.a)?De.add(C2,De.multiply(x1.imaginary(),Y2)):eh}catch{return eh}}function Rv(An,eh){eh.map(function(r2){r2.numVal=c2(r2).multiplier});for(var m1,T1,U1;;){if(m1=eh.length,m1<2)return eh[0];T1=eh.pop(),U1=eh[m1-2],(An==="min"?T1.numVal<U1.numVal:T1.numVal>U1.numVal)&&(eh.pop(),eh.push(T1))}}function w5(){var An=[].slice.call(arguments);return wh(An)?An[0]:Ym(An)?new x1(Math.max.apply(null,An)):Z.SYMBOLIC_MIN_MAX&&o1(An)?Rv("max",An):De.symfunction("max",An)}function S5(){var An=[].slice.call(arguments);return wh(An)?An[0]:Ym(An)?new x1(Math.min.apply(null,An)):Z.SYMBOLIC_MIN_MAX&&o1(An)?Rv("min",An):De.symfunction("min",An)}function W6(An){return An.isConstant(!0)?new x1(Math.sign(c2(An))):De.symfunction("sign",arguments)}function a5(An,eh){eh=eh?eh.toString():"asc";var m1=function(U1){return U1.group===me?U1.multiplier:U1.group===wt?U1.fname===""?m1(U1.args[0]):U1.fname:U1.group===He?U1.power:U1.value},T1=N2(An)?An.elements:An.collectSymbols();return new c3(T1.sort(function(U1,r2){var p2=m1(U1),C2=m1(r2);return eh==="desc"?C2-p2:p2-C2}))}function R4(An,eh){if(An.equals(1))return new x1(0);var m1;if(An.fname===pf&&An.multiplier.equals(1))return m1=De.divide(R4(An.args[0]),new x1(2)),An.power.sign()<0&&m1.negate(),m1;if(An.equals(0))throw new h1(Z.LOG+"(0) is undefined!");if(An.isImaginary())return v1.evaluate(An,Z.LOG);if(An.isConstant()&&typeof eh<"u"&&eh.isConstant()){var T1=Math.log(An),U1=Math.log(eh);m1=new x1(T1/U1)}else if(An.group===Xe&&An.power.multiplier.lessThan(0)||An.power.toString()==="-1")An.power.negate(),m1=R4(An).negate();else if(An.value==="e"&&An.multiplier.equals(1)){var r2=An.power;m1=I1(r2)?r2:new x1(r2)}else if(An.group===wt&&An.fname==="exp"){var p2=An.args[0];An.multiplier.equals(1)?m1=De.multiply(p2,new x1(An.power)):m1=De.symfunction(Z.LOG,[An])}else if(Z.PARSE2NUMBER&&B2(An)){An=De.parse(An);var C2;An.multiplier.lessThan(0)&&(An.negate(),C2=De.multiply(new x1(Math.PI),new x1("i"))),m1=new x1(Math.log(An.multiplier.toDecimal())),C2&&(m1=De.add(m1,C2))}else{var p2;!An.power.equals(1)&&!An.contains("e")&&(p2=An.group===Xe?An.power:new x1(An.power),An.toLinear()),arguments.length>1&&wh(arguments)?m1=new x1(1):m1=De.symfunction(Z.LOG,arguments),p2&&(m1=De.multiply(p2,m1))}return m1}function x6(An,eh){var m1=eh&&eh.isConstant()||typeof eh>"u";if(An.isConstant()&&m1){var T1,U1,r2,p2;return T1=An,eh&&eh.lessThan(0)&&(eh=f3(eh),U1=Number(An).toExponential().toString().split("e"),T1=U1[0],r2=U1[1]),p2=new x1(u2(T1,Number(eh||0))),De.multiply(p2,De.pow(new x1(10),new x1(r2||0)))}return De.symfunction("round",arguments)}function p5(An){var eh=An%2,m1;return eh<0&&(eh=2+eh),eh>=0&&eh<=.5?m1=1:eh>.5&&eh<=1?m1=2:eh>1&&eh<=1.5?m1=3:m1=4,m1}function i6(An){if(!isFinite(An)){var eh=Math.sign(An),m1=new x1(String(Math.abs(An)));return m1.multiplier=m1.multiplier.multiply(new H2(eh)),m1}if(I1(An))return An;if(typeof An=="number")try{An=H2.simple(An)}catch{An=new H2(An)}var T1=new x1(0);return T1.multiplier=An,T1}function R3(An){var eh=An.group,m1;if(eh===Ko){var T1=An.getNum(),U1=An.getDenom()||new x1(1),r2=Number(An.power),p2=new x1(1);if(Math.abs(r2)===1){U1.each(function(J2){J2.group===sr?p2=De.multiply(p2,R3(J2.getDenom())):J2.power.lessThan(0)&&(p2=De.multiply(p2,R3(J2.clone().toUnitMultiplier())))});var C2=new x1(0);U1.each(function(J2){C2=De.add(De.divide(J2,p2.clone()),C2)}),p2.invert();var Y2;T1.isComposite()?(Y2=new x1(0),T1.each(function(J2){Y2=De.add(De.multiply(R3(J2),p2.clone()),Y2)})):Y2=De.multiply(p2,T1),m1=De.divide(Y2,C2)}}else eh===sr?(m1=new x1(1),An.each(function(J2){m1=De.multiply(m1,De.clean(J2))})):eh===wt&&An.args.length===1&&An.args[0].isConstant()&&(m1=z1("PARSE2NUMBER",function(){return De.parse(An)},!0));return m1||(m1=An),m1}function m5(An,eh){return eh=eh||{expand_denominator:!0,expand_functions:!0},y3(An,eh)}function y3(An,eh){if(Array.isArray(An))return An.map(function(V4){return y3(V4,eh)});if(eh=eh||{},An.group===wt&&An.fname===""){var m1=y3(An.args[0],eh),T1=y3(De.pow(m1,De.parse(An.power)),eh);return De.multiply(De.parse(An.multiplier),T1).distributeMultiplier()}if([me,_e,He].indexOf(An.group)!==-1)return An;var U1=An.clone();try{var r2=An.multiplier.toString(),p2=Number(An.power),C2=An;if(An.isComposite()&&E1(An.power)&&An.power>0){var Y2=p2-1,m1=new x1(0);An.each(function(W4){m1=De.add(m1,y3(De.parse(W4),eh))});for(var J2=De.parse(m1),S4=0;S4<Y2;S4++)J2=a1(J2,m1,eh);C2=De.multiply(De.parse(r2),J2).distributeMultiplier()}else if(An.group===wt&&eh.expand_functions===!0){var D2=[];An.args.forEach(function(V4){D2.push(y3(V4,eh))}),C2=De.pow(De.symfunction(An.fname,D2),De.parse(An.power)),C2=De.multiply(C2,De.parse(An.multiplier))}else if(An.isComposite()&&E1(An.power)&&An.power<0&&eh.expand_denominator===!0)An=An.invert(),C2=y3(An,eh),C2.invert();else if(An.group===sr){var F4=function(W4){switch(W4.group){case Ko:return 0;case Do:return 1;case sr:return 2;case wt:return 3;default:return 4}},M4=An.collectSymbols().sort(function(W4,X4){return F4(X4)-F4(W4)}).map(function(W4){var X4=De.pow(W4,De.parse(p2)),p3=y3(X4,eh);return p3}),m1=M4.pop();m1.isComposite()&&m1.isLinear()?(M4.forEach(function(W4){m1=a1(m1,W4,eh)}),m1.isComposite()?(m1.power>1&&(m1=y3(De.pow(m1,De.parse(m1.power)),eh)),C2=De.multiply(De.parse(r2),m1).distributeMultiplier()):C2=m1):(C2=m1,M4.forEach(function(W4){C2=De.multiply(C2,W4)}),C2=De.multiply(C2,De.parse(r2)).distributeMultiplier()),C2.group===sr&&(C2=De.parse(C2))}else C2=An;return C2}catch{return U1}return U1}function O5(An){return b4.identity(An)}function H3(An,eh){return eh.isConstant()&&E1(eh)?An.elements[eh]:De.symfunction("vecget",arguments)}function l6(An,eh){return eh=typeof eh>"u"?1e-14:eh,An=An.clone(),eh=Number(eh),An.elements.sort(function(m1,T1){return T1.group-m1.group}),An.elements=P4(An.elements,function(m1,T1){var U1=Number(De.subtract(c2(m1),c2(T1)).abs());return U1<=eh}),An}function j5(An,eh,m1){return eh.isConstant?(An.elements[eh]=m1,An):De.symfunction("vecset",arguments)}function ev(An,eh,m1){return eh.isConstant()&&m1.isConstant()?An.elements[eh][m1]:De.symfunction("matget",arguments)}function qy(An,eh){return eh.isConstant()?new b4(An.elements[eh]):De.symfunction("matgetrow",arguments)}function O3(An,eh,m1){if(!eh.isConstant())return De.symfunction("matsetrow",arguments);if(An.elements[eh].length!==m1.elements.length)throw new O2("Matrix row must match row dimensions!");var T1=An.clone();return T1.elements[eh]=m1.clone().elements,T1}function I4(An,eh){if(!eh.isConstant())return De.symfunction("matgetcol",arguments);eh=Number(eh);var m1=b4.fromArray([]);return An.each(function(T1,U1,r2){r2===eh&&m1.elements.push([T1.clone()])}),m1}function G7(An,eh,m1){if(!eh.isConstant())return De.symfunction("matsetcol",arguments);if(eh=Number(eh),An.rows()!==m1.elements.length)throw new O2("Matrix columns must match number of columns!");return m1.each(function(T1,U1){An.set(U1-1,eh,T1.elements[0].clone())}),An}function K7(An,eh,m1,T1){return An.elements[eh][m1]=T1,An}function W7(){return new c3([].slice.call(arguments))}function sy(){return b4.fromArray(arguments)}function D3(){return Y4.fromArray(arguments)}function X7(An){return V2(An)?An.determinant():An}function $y(An){var eh;return V2(An)?eh=[new x1(An.cols()),new x1(An.rows())]:N2(An)||q2(An)?eh=new x1(An.elements.length):qc("size expects a matrix or a vector"),eh}function tv(An,eh){if(N2(An)&&N2(eh))return An.dot(eh);qc("function dot expects 2 vectors")}function Os(An,eh){if(N2(An)&&N2(eh))return An.cross(eh);qc("function cross expects 2 vectors")}function t1(An){if(V2(An))return An.transpose();qc("function transpose expects a matrix")}function c1(An){if(V2(An))return An.invert();qc("invert expects a matrix")}function k1(An,eh){return An.union(eh)}function f2(An,eh){return An.intersection(eh)}function L2(An,eh){return An.contains(eh)}function g4(An,eh){return An.difference(eh)}function C3(An,eh){return new x1(Number(An.intersects(eh)))}function n6(An,eh){return new x1(Number(An.is_subset(eh)))}function E3(){b2(arguments).map(function(An){console.log(An.toString())})}function Q4(An){if(!I1(An.power)&&An.power.absEquals(.5)){var eh=An.power.sign(),m1=l3(An.group===_e?new x1(An.value):An.toLinear());return eh<0&&m1.invert(),m1}return An}function P6(An){if(An.group===_e){var eh=An.value,m1=e4(eh)[0];if(!m1)return gf("Unable to compute prime factors. This should not happen. Please review and report."),An;var T1=new H2(Math.log(eh)/Math.log(m1)),U1=T1.multiply(An.power);if(U1.den>An.power.den)return An;E1(U1)?An=x1(Math.pow(m1,U1)):An=new x1(m1).setPower(U1)}return An}this.expand=y3,this.round=x6,this.clean=R3,this.sqrt=l3,this.cbrt=j4,this.abs=f3,this.log=R4,this.rationalize=t6,this.nthroot=j3,this.arg=u3,this.conjugate=A6,this.imagpart=n5,this.realpart=K6,this.getFunction=function(An){return d4[An][0]},this.addPreprocessor=function(An,eh,m1,T1){var U1=hf.names,r2=hf.actions;if(typeof eh!="function")throw new PreprocessorError("Incorrect parameters. Function expected!");m1?T1?(U1.splice(m1,0,An),r2.splice(m1,0,eh)):(U1[m1]=An,r2[m1]=eh):(U1.push(An),r2.push(eh))},this.getPreprocessors=function(){for(var An={},eh=0,m1=An.names.length;eh<m1;eh++){var T1=An.names[eh];An[T1]={order:eh,action:An.actions[eh]}}return An},this.removePreprocessor=function(An,eh){var m1=hf.names.indexOf(An);eh?(P1(hf.names,m1),P1(hf.actions,m1)):(hf.names[m1]=void 0,hf.actions[m1]=void 0)},this.mapped_function=function(){for(var An={},eh=this.params,m1=0;m1<eh.length;m1++)An[eh[m1]]=String(arguments[m1]);return De.parse(this.body,An)},this.add=function(An,eh){var m1=I1(An),T1=I1(eh);if(m1&&T1){if(An.unit||eh.unit)return De.Unit.add(An,eh);if(An.isInfinity||eh.isInfinity){var U1=An.multiplier.lessThan(0),r2=eh.multiplier.lessThan(0);if(An.isInfinity&&eh.isInfinity&&U1!==r2)throw new h1("("+An+")+("+eh+") is not defined!");var p2=x1.infinity();return r2&&p2.negate(),p2}if(An.isComposite()&&An.isLinear()&&eh.isComposite()&&eh.isLinear()&&(An.distributeMultiplier(),eh.distributeMultiplier(),eh.length>An.length&&An.group===eh.group&&([An,eh]=[eh,An])),An.multiplier.equals(0))return eh;if(eh.multiplier.equals(0))return An;if(An.isConstant()&&eh.isConstant()&&Z.PARSE2NUMBER){var x4=new x1(An.multiplier.add(eh.multiplier).toDecimal(Z.PRECISION));return x4}var C2=An.group,Y2=eh.group,J2=An.power.toString(),S4=eh.power.toString();if(C2<Y2||C2===Y2&&J2>S4&&S4>0)return this.add(eh,An);if(C2===sr&&Y2===Do&&An.value===eh.value){var D2=An;An=eh,eh=D2,C2=An.group,Y2=eh.group,J2=An.power.toString(),S4=eh.power.toString()}var F4=J2===S4,M4=An.value,V4=eh.value,W4=An.isComposite(),X4=eh.isComposite(),p3,h4,x4;if(W4&&(p3=z4(An,"hash")),X4&&(h4=z4(eh,"hash")),C2===Ko&&Y2===Ko&&eh.isLinear()&&!An.isLinear()&&p3!==h4)return this.add(eh,An);C2===Do&&Y2===Do&&(M4=p3,V4=h4);var x3=C2===_e&&Y2===me,I2=An.value===eh.multiplier.toString(),s4=M4===V4||p3===h4&&p3!==void 0||x3&&I2;if(s4&&F4&&C2===Y2)if(x3&&(eh=eh.convert(_e)),C2===Do&&(Y2===He||Y2===_e))An.distributeMultiplier(),x4=An.attach(eh);else if(x4=An,An.multiplier.isOne()&&eh.multiplier.isOne()&&C2===Ko&&An.isLinear()&&eh.isLinear())for(var j1 in eh.symbols){var L4=eh.symbols[j1];x4.attach(L4)}else x4.multiplier=x4.multiplier.add(eh.multiplier);else if(s4&&C2!==Do)C2===Ko&&Y2===Do?(eh.insert(An,"add"),x4=eh):(x4=x1.shell(Do).attach([An,eh]),x4.value=C2===Do?p3:M4);else if(W4&&An.isLinear()){var L3=C2===Y2,_4=C2===Do&&Y2===Do;if(_4&&(L3=An.value===eh.value),An.distributeMultiplier(),eh.isComposite()&&eh.isLinear()&&L3){eh.distributeMultiplier();for(var j1 in eh.symbols){var L4=eh.symbols[j1];An.attach(L4)}x4=An}else _4&&An.value!==h4||C2===Do&&!s4?(x4=x1.shell(Ko).attach([An,eh]),x4.updateHash()):x4=An.attach(eh)}else{if(C2===wt&&An.fname===pf&&Y2!==Xe&&eh.power.equals(.5)){var p6=eh.multiplier.clone();eh=l3(eh.toUnitMultiplier().toLinear()),eh.multiplier=p6}An.length===2&&eh.length===2&&k2(An.power)&&k2(eh.power)?x4=De.add(y3(An),y3(eh)):(x4=x1.shell(Ko).attach([An,eh]),x4.updateHash())}if(x4.multiplier.equals(0)&&(x4=new x1(0)),x4.length===1){var p6=x4.multiplier;x4=u1(x4.symbols),x4.multiplier=x4.multiplier.multiply(p6)}return x4}else{if(T1&&!m1){var D2=An;An=eh,eh=D2,D2=T1,T1=m1,m1=D2}var u6=V2(eh);if(m1&&u6){var G3=new b4;eh.eachElement(function(Z4,K3,w6){G3.set(K3,w6,De.add(An.clone(),Z4))}),eh=G3}else if(V2(An)&&u6)eh=An.add(eh);else if(m1&&N2(eh))eh.each(function(Z4,K3){K3--,eh.elements[K3]=De.add(An.clone(),eh.elements[K3])});else if(N2(An)&&N2(eh))eh.each(function(Z4,K3){K3--,eh.elements[K3]=De.add(An.elements[K3],eh.elements[K3])});else{if(N2(An)&&V2(eh))return De.add(eh,An);if(V2(An)&&N2(eh))if(eh.elements.length===An.rows()){var G3=new b4,c6=An.cols();return eh.each(function(K3,w6){for(var E5=[],X6=0;X6<c6;X6++)E5.push(De.add(An.elements[w6-1][X6].clone(),K3.clone()));G3.elements.push(E5)}),G3}else qc("Dimensions must match!")}return eh}},this.subtract=function(An,eh){var m1=m1=I1(An),T1=I1(eh);if(m1&&T1)return An.unit||eh.unit?De.Unit.subtract(An,eh):this.add(An,eh.negate());if(T1&&N2(An))eh=An.map(function(p2){return De.subtract(p2,eh.clone())});else if(m1&&N2(eh))eh=eh.map(function(p2){return De.subtract(An.clone(),p2)});else if(N2(An)&&N2(eh))An.dimensions()===eh.dimensions()?eh=An.subtract(eh):De.error("Unable to subtract vectors. Dimensions do not match.");else if(V2(An)&&N2(eh))if(eh.elements.length===An.rows()){var U1=new b4,r2=An.cols();return eh.each(function(p2,C2){for(var Y2=[],J2=0;J2<r2;J2++)Y2.push(De.subtract(An.elements[C2-1][J2].clone(),p2.clone()));U1.elements.push(Y2)}),U1}else qc("Dimensions must match!");else if(N2(An)&&V2(eh)){var U1=eh.clone().negate();return De.add(U1,An)}else if(V2(An)&&V2(eh))eh=An.subtract(eh);else if(V2(An)&&T1){var U1=new b4;An.each(function(C2,Y2,J2){U1.set(Y2,J2,De.subtract(C2,eh.clone()))}),eh=U1}else if(m1&&V2(eh)){var U1=new b4;eh.each(function(C2,Y2,J2){U1.set(Y2,J2,De.subtract(An.clone(),C2))}),eh=U1}return eh},this.multiply=function(An,eh){var m1=I1(An),T1=I1(eh);if(m1&&eh instanceof d1)return eh.elements.push(An),eh;if(m1&&T1){if(eh.isUnit){var h4=An.clone();return An.unit=eh,h4}if(An.unit||eh.unit)return De.Unit.multiply(An,eh);if(An.isInfinity||eh.isInfinity){if(An.equals(0)||eh.equals(0))throw new h1(An+"*"+eh+" is undefined!");if(eh.power.lessThan(0)){if(An.isInfinity)throw new h1("Infinity/Infinity is not defined!");return new x1(0)}var W4=An.multiplier.multiply(eh.multiplier).sign(),U1=x1.infinity();if(An.isConstant()||eh.isConstant()||An.isInfinity&&eh.isInfinity)return W4<0&&U1.negate(),U1}if(An.isConstant()&&eh.isConstant()&&Z.PARSE2NUMBER){var r2=new d(An.multiplier.toDecimal()).times(new d(eh.multiplier.toDecimal())).toFixed(),p2=new x1(r2);return p2}if(An.isOne())return eh.clone();if(eh.isOne())return An.clone();if(An.multiplier.equals(0)||eh.multiplier.equals(0))return new x1(0);if(eh.group>An.group&&eh.group!==Ko)return this.multiply(eh,An);if(An.group===sr&&eh.group===Do&&An.value===eh.value){var r2=An;An=eh,eh=r2}var C2=An.group,Y2=eh.group,J2=eh.multiplier.num,S4=eh.multiplier.den;if(C2===wt&&An.fname===pf&&!eh.isConstant()&&An.args[0].value===eh.value&&!An.args[0].multiplier.lessThan(0)){var D2=An.power,F4=De.parse(An.multiplier);An=De.multiply(F4,An.args[0].clone()),An.setPower(new H2(.5).multiply(D2)),C2=An.group}else C2===wt&&An.fname===pf&&An.multiplier.equals(1)&&An.power.equals(-1)&&eh.isConstant()&&An.args[0].equals(eh)&&(An=De.symfunction(pf,[eh.clone()]),eh=new x1(1));var M4=An.value,V4=eh.value,W4=new H2(An.sign()),X4=C2===_e&&Y2===me&&eh.multiplier.equals(An.value),p3=X4?new H2(1).multiply(An.multiplier).abs():An.multiplier.multiply(eh.multiplier).abs(),h4=An.clone().toUnitMultiplier();if(eh=eh.clone().toUnitMultiplier(!0),C2===wt&&Y2===wt){var x4=An.args[0].clone(),x3=eh.args[0].clone();if(An.fname===pf&&eh.fname===pf&&An.isLinear()&&eh.isLinear()){var I2=De.divide(x4,x3).invert();I2.gt(1)&&E1(I2)&&(h4=De.multiply(An.args[0].clone(),l3(I2.clone())),eh=new x1(1))}else if(An.fname===cf&&eh.fname===cf&&!x4.isConstant()&&!x3.isConstant()&&eh.power<0){var s4=De.subtract(x4.clone(),x3.clone());if(s4.isConstant())if(r2=new x1(1),s4<0){for(var j1=0,L4=Math.abs(s4);j1<=L4;j1++){var L3=De.add(x4.clone(),new x1(j1));r2=De.multiply(r2,L3)}h4=De.multiply(De.pow(x4,new x1(An.power)),De.pow(r2,new x1(eh.power))),eh=new x1(1)}else{for(var j1=0,L4=Math.abs(s4);j1<=L4;j1++){var L3=De.add(x3.clone(),new x1(j1));r2=De.multiply(r2,L3)}h4=De.multiply(De.pow(r2,new x1(An.power)),De.pow(x3,new x1(eh.power))),eh=new x1(1)}}}if(M4===V4&&C2===Do&&C2===Y2&&(M4=An.text("hash"),V4=eh.text("hash")),Y2===Xe&&eh.previousGroup===Do&&C2===Do&&(M4=z4(An,"hash",Xe)),(M4===V4||X4)&&!(C2===Do&&(Y2===He||Y2===_e||Y2===wt))&&!(C2===Do&&Y2===sr)){var _4=An.power,p6=eh.power,u6=I1(_4),G3=I1(p6),c6=u6||G3;if(C2===Do&&Y2!==Do&&eh.previousGroup!==Do&&_4.equals(1))h4=new x1(0),An.each(function(M6){h4=De.add(h4,De.multiply(M6,eh.clone()))},!0);else{if(h4.power=c6?De.add(I1(_4)?_4:new x1(_4),I1(p6)?p6:new x1(p6)):C2===me?_4:_4.add(p6),h4.power.equals(0)&&(h4=h4.convert(me)),c6&&h4.convert(Xe),An.imaginary&&eh.imaginary){var Z4=k2(h4.power%2);Z4&&(h4=new x1(1),p3.negate())}h4.group!==Xe&&h4.previousGroup&&(h4.previousGroup=void 0),h4.multiplier=h4.multiplier.multiply(eh.multiplier)}}else if(C2===sr&&An.isLinear())if(Y2===sr&&eh.distributeExponent(),Y2===sr&&eh.isLinear()){for(var L3 in eh.symbols){var K3=eh.symbols[L3];h4=h4.combine(K3)}h4.multiplier=h4.multiplier.multiply(eh.multiplier)}else h4.combine(eh);else if(C2!==me){if(C2===sr)h4.distributeExponent(),h4.combine(eh);else if(!eh.isOne()){var w6=eh.multiplier.clone();eh.toUnitMultiplier(),h4=x1.shell(sr).combine([h4,eh]),h4.multiplier=h4.multiplier.multiply(w6)}}else h4=eh.clone().toUnitMultiplier();if(h4.group===_e){var E5=Math.log(h4.value),X6=Math.log(J2)/E5,i3=Math.log(S4)/E5,t3=p3.num/J2,h6=p3.den/S4;X6!==0&&E1(X6)&&E1(t3)&&(h4.power=h4.power.add(new H2(X6)),p3.num/=J2),i3!==0&&E1(i3)&&E1(h6)&&(h4.power=h4.power.subtract(new H2(i3)),p3.den/=S4)}if(h4.length===1){var r2=h4.multiplier;h4=u1(h4.symbols),h4.multiplier=h4.multiplier.multiply(r2)}var T5=h4.power.toString();if(k2(T5)&&h4.fname===pf){W4=W4*h4.sign();var Z6=h4.power;h4=h4.args[0],h4=De.multiply(new x1(p3),De.pow(h4,new x1(Z6.divide(new H2(2))))),W4<0&&h4.negate()}else h4.multiplier=h4.multiplier.multiply(p3).multiply(W4),h4.group===Ko&&h4.isImaginary()&&h4.distributeMultiplier();return h4.group===_e&&E1(h4.power.toDecimal())&&(h4=h4.convert(me)),h4}else{T1&&!m1&&(r2=An,An=eh,eh=r2,r2=T1,T1=m1,m1=r2);var g5=V2(eh),Pv=V2(An);if(m1&&g5){var C6=new b4;eh.eachElement(function(M6,Y3,dv){C6.set(Y3,dv,De.multiply(An.clone(),M6))}),eh=C6}else if(Pv&&g5)eh=An.multiply(eh);else if(m1&&N2(eh))eh.each(function(M6,Y3){Y3--,eh.elements[Y3]=De.multiply(An.clone(),eh.elements[Y3])});else if(N2(An)&&N2(eh))eh.each(function(M6,Y3){Y3--,eh.elements[Y3]=De.multiply(An.elements[Y3],eh.elements[Y3])});else{if(N2(An)&&V2(eh))return this.multiply(eh,An);if(V2(An)&&N2(eh))if(eh.elements.length===An.rows()){var C6=new b4,Iv=An.cols();return eh.each(function(Y3,dv){for(var pv=[],mv=0;mv<Iv;mv++)pv.push(De.multiply(An.elements[dv-1][mv].clone(),Y3.clone()));C6.elements.push(pv)}),C6}else qc("Dimensions must match!")}return eh}},this.divide=function(An,eh){var m1=I1(An),T1=I1(eh);if(m1&&T1){if(An.unit||eh.unit)return De.Unit.divide(An,eh);var U1;if(eh.equals(0))throw new l1("Division by zero not allowed!");return An.isConstant()&&eh.isConstant()?(U1=An.clone(),U1.multiplier=U1.multiplier.divide(eh.multiplier)):(eh.invert(),U1=De.multiply(An,eh)),U1}else{var r2=N2(An),p2=N2(eh);if(m1&&p2)eh=eh.map(function(S4){return De.divide(An.clone(),S4)});else if(r2&&T1)eh=An.map(function(S4){return De.divide(S4,eh.clone())});else if(r2&&p2)An.dimensions()===eh.dimensions()?eh=eh.map(function(S4,D2){return De.divide(An.elements[--D2],S4)}):De.error("Cannot divide vectors. Dimensions do not match!");else{var C2=V2(An),Y2=V2(eh);if(C2&&T1){var J2=new b4;An.eachElement(function(S4,D2,F4){J2.set(D2,F4,De.divide(S4,eh.clone()))}),eh=J2}else if(m1&&Y2){var J2=new b4;eh.eachElement(function(D2,F4,M4){J2.set(F4,M4,De.divide(An.clone(),D2))}),eh=J2}else if(C2&&Y2){var J2=new b4;An.rows()===eh.rows()&&An.cols()===eh.cols()?(An.eachElement(function(D2,F4,M4){J2.set(F4,M4,De.divide(D2,eh.elements[F4][M4]))}),eh=J2):De.error("Dimensions do not match!")}else if(C2&&p2)if(An.cols()===eh.dimensions()){var J2=new b4;An.eachElement(function(D2,F4,M4){J2.set(F4,M4,De.divide(D2,eh.elements[F4].clone()))}),eh=J2}else De.error("Unable to divide matrix by vector.")}return eh}},this.pow=function(An,eh){var m1=I1(An),T1=I1(eh);if(m1&&T1){if(An.unit||eh.unit)return De.Unit.pow(An,eh);if(An.group===wt&&An.fname===_h&&k2(eh)){var S4=An.multiplier.clone(),U1=De.pow(An.args[0],eh);return U1.multiplier=S4,U1}if(An.isInfinity||eh.isInfinity){if(An.isInfinity&&eh.isInfinity)throw new h1("("+An+")^("+eh+") is undefined!");if(An.isConstant()&&eh.isInfinity){if(An.equals(0)){if(eh.lessThan(0))throw new h1("0^Infinity is undefined!");return new x1(0)}if(An.equals(1))throw new h1("1^"+eh.toString()+" is undefined!");if(eh.lessThan(0))return new x1(0);if(!An.lessThan(0))return x1.infinity()}if(An.isInfinity&&eh.isConstant()){if(eh.equals(0))throw new h1(An+"^0 is undefined!");return eh.lessThan(0)?new x1(0):De.multiply(x1.infinity(),De.pow(new x1(An.sign()),eh.clone()))}}var r2=An.equals(0),p2=eh.equals(0);if(r2&&p2)throw new h1("0^0 is undefined!");if(r2&&eh.isConstant()&&eh.multiplier.greaterThan(0))return new x1(0);if(p2)return new x1(1);var C2=eh.isConstant(),Y2=An.isConstant(),J2=eh.isInteger(),S4=An.multiplier,D2=An.clone();if(Y2&&C2&&An.equals(0)&&eh.lessThan(0))throw new h1("Division by zero is not allowed!");if(Z.PARSE2NUMBER&&Y2&&C2&&An.sign()<0&&a4(eh)){var F4,M4,V4;return F4=Math.PI*eh,M4=new x1(Math.cos(F4)),V4=De.multiply(x1.imaginary(),new x1(Math.sin(F4))),De.add(M4,V4)}if(Z.PARSE2NUMBER&&An.isImaginary()&&C2&&E1(eh)&&!eh.lessThan(0)){var M4,V4,W4,X4,p3,h4,x4;if(M4=An.realpart(),V4=An.imagpart(),M4.isConstant("all")&&V4.isConstant("all"))return x4=Z.USE_BIG?x1(d.atan2(p6.multiplier.toDecimal(),W4.multiplier.toDecimal()).times(eh.toString())):Math.atan2(V4,M4)*eh,X4=new x1(x4),W4=De.pow(x1.hyp(M4,V4),eh),p3=De.multiply(W4.clone(),De.trig.cos(X4.clone())),h4=De.multiply(W4,De.trig.sin(X4)),De.add(p3,De.multiply(x1.imaginary(),h4))}if(D2.toUnitMultiplier(),D2.group===wt&&D2.fname===pf&&!C2){var x3=D2.args[0];x3.multiplyPower(new x1(.5)),x3.multiplier.multiply(D2.multiplier),x3.multiplyPower(eh),D2=x3}else{var I2=S4.sign();a4(eh)&&I2<0&&(D2.negate(),D2=De.symfunction(th,[D2]),D2.negate()),D2.multiplyPower(eh)}if(Y2&&C2&&Z.PARSE2NUMBER){var s4;I2<0&&(An.negate(),eh.multiplier.den.equals(2)?s4=new x1(Z.IMAGINARY):E1(eh.multiplier)?k2(eh.multiplier)?s4=new x1(1):s4=new x1(-1):k2(eh.multiplier.den)?s4=De.pow(De.symfunction(th,[new x1(I2)]),eh.clone()):s4=new x1(Math.pow(I2,eh.multiplier.num))),D2=new x1(Math.pow(An.multiplier.toDecimal(),eh.multiplier.toDecimal())),s4&&(D2=De.multiply(D2,s4))}else if(J2&&!S4.equals(1)){var j1=eh.abs();if(j1.gt(Z.MAX_EXP))return eh.sign()<0?new x1(0):x1.infinity();var L4=eh.multiplier.toDecimal(),L3=Math.sign(L4);L4=Math.abs(L4);var _4=new H2(1);_4.num=S4.num.pow(L4),_4.den=S4.den.pow(L4),L3<0&&_4.invert(),D2.multiplier=D2.multiplier.multiply(_4)}else{var I2=An.sign();if(eh.isConstant()&&An.isConstant()&&!eh.multiplier.den.equals(1)&&I2<0)if(eh.multiplier.den.equals(2)){var p6=new x1(Z.IMAGINARY);An.negate(),eh.lessThan(0)&&(p6.negate(),eh.negate()),D2=De.multiply(De.pow(An,eh),p6)}else{var u6=An.clone();u6.multiplier.negate(),D2=De.pow(De.symfunction(th,[new x1(I2)]),eh.clone());var G3=De.pow(new x1(u6.multiplier.num),eh.clone()),c6=De.pow(new x1(u6.multiplier.den),eh.clone()),W4=De.divide(G3,c6);D2=De.multiply(D2,W4)}else if(Z.PARSE2NUMBER&&eh.isImaginary()){var M4=eh.realpart(),V4=eh.imagpart(),u6=An.clone().toLinear(),Z4=De.pow(u6.clone(),M4),K3=R4(u6.clone()),w6=O1.cos(De.multiply(V4.clone(),K3)),E5=De.multiply(O1.sin(De.multiply(V4,R4(u6))),x1.imaginary());D2=De.multiply(Z4,De.add(w6,E5)),D2=De.expand(De.parse(D2))}else{var X6=An.group===me&&I2<0,i3=Q4(new x1(X6?S4.num:Math.abs(S4.num)).setPower(eh.clone())),t3=Q4(new x1(S4.den).setPower(eh.clone()).invert());if(An.imaginary)if(J2){var x3,L4,h6;x3=Math.sign(eh),L4=f3(eh),h6=L4%4,D2=new x1(k2(h6)?-1:Z.IMAGINARY),(h6===0||x3<0&&h6===1||x3>0&&h6===3)&&D2.negate()}else{var T5=eh.multiplier.multiply(H2.quick(1,2)),Z6=Math.pow(-1,T5.num);D2=k2(T5.den)?new x1(-1).setPower(T5,!0):new x1(Z6)}if(I2<0&&!X6&&D2.negate(),C2&&An.group!==Xe){var g5=k2(eh.multiplier.den),Pv=k2(An.power),h6=D2.power.toDecimal(),C6=k2(h6);if(g5&&Pv&&!C6){if(h6===1)D2=De.symfunction(_h,[D2]);else if(E1(h6))D2=De.multiply(De.symfunction(_h,[D2.clone().toLinear()]),D2.clone().setPower(new H2(h6-1)));else{var L4=D2.power;D2=De.symfunction(_h,[D2.toLinear()]).setPower(L4)}Z.POSITIVE_MULTIPLIERS&&D2.fname===_h&&(D2=D2.args[0])}}if(eh.equals(2)&&D2.group===sr){var Iv=new x1(1);D2.each(function(Kv){Iv=De.multiply(Iv,De.pow(Kv,eh))}),D2=Iv}}}if(D2=Q4(D2),i3&&t3&&(D2=De.multiply(D2,P6(De.multiply(i3,t3)))),D2.fname===pf){var M6=D2.group===Xe,Y3=M6?D2.power.multiplier.toString():D2.power.toString();if(k2(Y3)){var dv=M6?De.divide(D2.power,new x1(2)):new x1(D2.power.divide(new H2(2))),S4=D2.multiplier;D2=De.pow(D2.args[0],dv),D2.multiplier=D2.multiplier.multiply(S4)}}else if(!Z.IGNORE_E&&D2.isE()&&D2.group===Xe&&D2.power.contains("pi")&&D2.power.contains(Z.IMAGINARY)&&eh.group===sr){var X4=eh.stripVar(Z.IMAGINARY);D2=De.add(O1.cos(X4),De.multiply(x1.imaginary(),O1.sin(X4)))}return D2}else{if(N2(An)&&T1)An=An.map(function(mv){return De.pow(mv,eh.clone())});else if(V2(An)&&T1){var pv=new b4;An.eachElement(function(mv,Kv,v6){pv.set(Kv,v6,De.pow(mv,eh.clone()))}),An=pv}else if(m1&&V2(eh)){var pv=new b4;eh.eachElement(function(Kv,v6,oy){pv.set(v6,oy,De.pow(An.clone(),Kv))}),An=pv}return An}},this.comma=function(An,eh){return An instanceof d1||(An=d1.create(An)),An.append(eh),An},this.mod=function(An,eh){return F3(An,eh)},this.slice=function(An,eh){return new r1(An,eh)},this.equals=function(An,eh){return An.group!==He&&!An.isLinear()&&qc("Cannot set equality for "+An.toString()),li[An.value]=eh.clone(),eh},this.percent=function(An){return De.divide(An,new x1(100))},this.assign=function(An,eh){if(An instanceof d1&&eh instanceof d1)return An.elements.map(function(T1,U1){return De.assign(T1,eh.elements[U1])}),c3.fromArray(eh.elements);if(An.parent){var m1=An.parent;return m1.elements[m1.getter]=eh,delete m1.getter,m1}if(An.group!==He)throw new l4("Cannot complete operation. Incorrect LH value for "+An);return li[An.value]=eh,eh},this.function_assign=function(An,eh){var m1=An.elements.pop();return B1(m1,An.elements,eh)};var s5=function(An){return new x1(An===!0?1:0)};this.eq=function(An,eh){return s5(An.equals(eh))},this.gt=function(An,eh){return s5(An.gt(eh))},this.gte=function(An,eh){return s5(An.gte(eh))},this.lt=function(An,eh){return s5(An.lt(eh))},this.lte=function(An,eh){return s5(An.lte(eh))},this.factorial=function(An){return this.symfunction(cf,[An])},this.dfactorial=function(An){return this.symfunction(df,[An])}}var V6={convert:function(De,Fc){var hf;if(De===0)hf=[0,1];else if(De<1e-6||De>1e20){var r1=this.quickConversion(Number(De));if(r1[1]<=1e20){var d1=Math.abs(De),y1=De/d1;hf=this.fullConversion(d1.toFixed((r1[1]+"").length-1)),hf[0]=hf[0]*y1}else hf=r1}else hf=this.fullConversion(De);return hf},quickConversion:function(De){var Fc=function(r1){typeof r1!="string"&&(r1=r1.toString());var d1="",y1=r1.charAt(0);return y1==="-"?(r1=r1.substr(1,r1.length),d1="-"):y1==="+"&&(r1=r1.substr(1,r1.length)),{sign:d1,value:r1}};function hf(r1){C4.isScientific(r1)&&(r1=ff(r1));var d1=Fc(r1),y1=d1.value.split("."),v1;y1.length===1?v1=y1[0]:v1=y1[0]+y1[1];var O1=y1[1]?y1[1].length:0,m2=`1${"0".repeat(O1)}`;return v1!=="0"&&(v1=v1.replace(/^0+/,"")),[d1.sign+v1,m2]}return hf(De)},fullConversion:function(De){for(var Fc=!1,hf=0,r1=1,d1=1,y1=0,v1=0,O1=De,m2=1e-16;!Fc;){v1++,v1>1e4&&(Fc=!0);var T2=Math.floor(O1),w2=hf+T2*d1,d4=r1+T2*y1,z2=O1-T2;z2<m2&&(Fc=!0),O1=1/z2,hf=d1,r1=y1,d1=w2,y1=d4,(Math.abs(w2/d4-De)<m2||v1>30)&&(Fc=!0)}return[w2,d4]}},K4={parser:function(){var De=["classes","setOperator","getOperators","getBrackets","tokenize","toRPN","tree","units"],Fc=new A3;for(var hf in Fc)De.indexOf(hf)===-1&&delete Fc[hf];Fc.setOperator({precedence:8,operator:"\\",action:"slash",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(d1){return d1}}),Fc.setOperator({precedence:8,operator:"\\,",action:"slash_comma",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(d1){return d1}});var r1=Fc.getBrackets();return r1["{"].maps_to=void 0,Fc}(),space:"~",dot:" \\cdot ",latex:function(De,Fc){if(De.clone&&(De=De.clone()),De instanceof l.classes.Collection&&(De=De.elements),S2(De)){for(var hf=[],r1=0;r1<De.length;r1++){var d1=De[r1];I1(d1)||(d1=l.parse(d1)),hf.push(this.latex(d1,Fc))}return this.brackets(hf.join(", "),"square")}else if(V2(De)){for(var y1=`\\begin{pmatrix}
`,r1=0;r1<De.elements.length;r1++){for(var v1=[],O1=De.elements[r1],m2=0;m2<O1.length;m2++)v1.push(this.latex(O1[m2],Fc));y1+=v1.join(" & "),r1<De.elements.length-1&&(y1+=`\\\\
`)}return y1+="\\end{pmatrix}",y1}else if(N2(De)){for(var y1="\\left[",r1=0;r1<De.elements.length;r1++)y1+=this.latex(De.elements[r1],Fc)+" "+(r1!==De.elements.length-1?",\\,":"");return y1+="\\right]",y1}else if(q2(De)){for(var y1="\\{",r1=0;r1<De.elements.length;r1++)y1+=this.latex(De.elements[r1],Fc)+" "+(r1!==De.elements.length-1?",\\,":"");return y1+="\\}",y1}De=De.clone();var T2=Fc==="decimal"||Fc==="decimals",w2=De.power,d4=F1(w2),z2=De.multiplier.lessThan(0);if(De.group===_e&&T2)return String(De.multiplier.toDecimal()*Math.pow(De.value,De.power.toDecimal()));De.multiplier=De.multiplier.abs();var i4;if(T2){var E4=String(De.multiplier.toDecimal());i4=[E4,""]}else i4=[De.multiplier.num,De.multiplier.den];var w4=this.value(De,d4,Fc,z2),$4;d4&&w2.negate(),T2?($4=I1(w2)?K4.latex(w2,Fc):String(w2.toDecimal()),String($4)==="1"&&($4="")):I1(w2)?$4=this.latex(w2,Fc):$4=this.formatFrac(w2,!0);var U4=["",""],X2=d4?1:0;U4[X2]=$4;var f3=(z2?"-":"")+this.set(i4,w4,U4,De.group===sr);return f3.replace(/\+\-/gi,"-")},greek:{alpha:"\\alpha",beta:"\\beta",gamma:"\\gamma",delta:"\\delta",epsilon:"\\epsilon",zeta:"\\zeta",eta:"\\eta",theta:"\\theta",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",mu:"\\mu",nu:"\\nu",xi:"\\xi",omnikron:"\\omnikron",pi:"\\pi",rho:"\\rho",sigma:"\\sigma",tau:"\\tau",upsilon:"\\upsilon",phi:"\\phi",chi:"\\chi",psi:"\\psi",omega:"\\omega",Gamma:"\\Gamma",Delta:"\\Delta",Epsilon:"\\Epsilon",Theta:"\\Theta",Lambda:"\\Lambda",Xi:"\\Xi",Pi:"\\Pi",Sigma:"\\Sigma",Phi:"\\Phi",Psi:"\\Psi",Omega:"\\Omega"},symbols:{arccos:"\\arccos",cos:"\\cos",csc:"\\csc",exp:"\\exp",ker:"\\ker",limsup:"\\limsup",min:"\\min",sinh:"\\sinh",arcsin:"\\arcsin",cosh:"\\cosh",deg:"\\deg",gcd:"\\gcd",lg:"\\lg",ln:"\\ln",Pr:"\\Pr",sqrt:"\\sqrt",sup:"\\sup",arctan:"\\arctan",cot:"\\cot",det:"\\det",hom:"\\hom",lim:"\\lim",log:"\\log",LN:"\\LN",sec:"\\sec",tan:"\\tan",arg:"\\arg",coth:"\\coth",dim:"\\dim",inf:"\\inf",liminf:"\\liminf",max:"\\max",sin:"\\sin",tanh:"\\tanh"},value:function(De,Fc,hf,r1){var d1=De.group,y1=De.previousGroup,v1=["",""],O1=Fc?1:0;if(De.isInfinity)v1[O1]="\\infty";else if(d1===He||d1===_e||y1===He||y1===_e||y1===me){var m2=this.formatSubscripts(De.value);m2.replace&&(m2=m2.replace(/(.+)_$/,"$1\\_"));var T2=String(m2).split("_"),w2=this.greek[T2[0]];w2&&(T2[0]=w2,m2=T2.join("_"));var De=this.symbols[T2[0]];De&&(T2[0]=De,m2=T2.join("_")),v1[O1]=m2}else if(d1===wt||y1===wt){for(var d4,z2=[],i4=De.fname,E4=0;E4<De.args.length;E4++){var w4=De.args[E4],$4;typeof w4=="string"?$4=w4:$4=this.latex(w4,hf),z2.push($4)}if(i4===pf)v1[O1]="\\sqrt"+this.braces(z2.join(","));else if(i4===_h)v1[O1]=this.brackets(z2.join(","),"abs");else if(i4===th)v1[O1]=this.brackets(z2.join(","),"parens");else if(i4==="limit")v1[O1]=" \\lim\\limits_{"+z2[1]+" \\to "+z2[2]+"} "+z2[0];else if(i4==="integrate")v1[O1]="\\int"+this.braces(z2[0])+this.braces("d"+z2[1]);else if(i4==="defint")v1[O1]="\\int\\limits_"+this.braces(z2[1])+"^"+this.braces(z2[2])+" "+z2[0]+" d"+z2[3];else if(i4===cf||i4===df){var w4=De.args[0];w4.power.equals(1)&&(w4.isComposite()||w4.isCombination())&&(z2[0]=this.brackets(z2[0])),v1[O1]=z2[0]+(i4===cf?"!":"!!")}else if(i4==="floor")v1[O1]="\\left \\lfloor"+this.braces(z2[0])+"\\right \\rfloor";else if(i4==="ceil")v1[O1]="\\left \\lceil"+this.braces(z2[0])+"\\right \\rceil";else if(i4===Z.LOG&&z2.length>1)v1[O1]="\\mathrm"+this.braces(Z.LOG)+"_"+this.braces(z2[1])+this.brackets(z2[0]);else if(i4===Z.LOG10)v1[O1]="\\mathrm"+this.braces(Z.LOG)+"_"+this.braces(10)+this.brackets(z2[0]);else if(i4==="sum"){var U4=z2[0],X2=z2[1],f3=z2[2],a3=z2[3];v1[O1]="\\sum\\limits_{"+this.braces(X2)+"="+this.braces(f3)+"}^"+this.braces(a3)+" "+this.braces(U4)}else if(i4==="product"){var U4=z2[0],X2=z2[1],f3=z2[2],a3=z2[3];v1[O1]="\\prod\\limits_{"+this.braces(X2)+"="+this.braces(f3)+"}^"+this.braces(a3)+" "+this.braces(U4)}else if(i4==="nthroot")v1[O1]="\\sqrt["+z2[1]+"]"+this.braces(z2[0]);else if(i4==="mod")v1[O1]=z2[0]+" \\bmod "+z2[1];else if(i4==="realpart")v1[O1]="\\operatorname{Re}"+this.brackets(z2[0]);else if(i4==="imagpart")v1[O1]="\\operatorname{Im}"+this.brackets(z2[0]);else{var d4=i4!==""?"\\mathrm"+this.braces(i4.replace(/_/g,"\\_")):"";De.isConversion?v1[O1]=d4+this.brackets(z2.join(""),"parens"):v1[O1]=d4+this.brackets(z2.join(","),"parens")}}else if(De.isComposite()){for(var D4=De.collectSymbols().sort(d1===Ko||y1===Ko?function(g6,j3){return j3.group-g6.group}:function(g6,j3){var i5=I1(g6.power)?-1:g6.power,K6=I1(j3.power)?-1:j3.power;return K6-i5}),F3=[],Z3=D4.length,E4=0;E4<Z3;E4++)F3.push(K4.latex(D4[E4],hf));var m2=F3.join("+");v1[O1]=!(De.isLinear()&&De.multiplier.equals(1))||r1?this.brackets(m2,"parens"):m2}else if(d1===sr||y1===Xe||y1===sr){d1===sr&&De.distributeExponent();var U3=[],o3=[],v3=[],g3=[],k3=0,t6=0,l3=function(j4,g6,j3){if(j3>1&&g6.length>0)for(var i5=g6.length,K6=0;K6<i5;K6++){var n5=g6[K6],A6=j4[n5];/^\\left\(.+\\right\)\^\{.+\}$/g.test(A6)||/^\\left\(.+\\right\)$/g.test(A6)||(j4[n5]=K4.brackets(A6,"parens"))}return j4};De.each(function(j4){var g6=F1(j4.power),j3;g6?(j3=K4.latex(j4.invert(),hf),t6++,j4.isComposite()&&(De.multiplier.den!=1&&Math.abs(j4.power)==1&&(j3=K4.brackets(j3,"parens")),v3.push(U3.length)),U3.push(j3)):(j3=K4.latex(j4,hf),k3++,j4.isComposite()&&(De.multiplier.num!=1&&Math.abs(j4.power)==1&&(j3=K4.brackets(j3,"parens")),g3.push(o3.length)),o3.push(j3))}),l3(o3,g3,k3),v1[0]=o3.join(this.dot),l3(U3,v3,t6),v1[1]=U3.join(this.dot)}return v1},set:function(De,Fc,hf,r1){var d1=function(i4){return/^\\left\(.+\\right\)$/.test(i4)};if(hf&&(hf=this.formatP(hf)),r1){var y1=hf[0];hf[0]=""}Fc=this.merge(Fc,hf);var v1=De[0],O1=De[1],m2=Fc[0],T2=Fc[1];m2&&Number(v1)===1&&(v1=""),Number(O1)===1&&(O1="");var w2=this.join(v1,m2,d1(m2)?"":this.dot),d4=this.join(O1,T2,d1(T2)?"":this.dot);if(w2&&d4){var z2=this.frac(w2,d4);return r1&&y1&&(z2=this.brackets(z2)+y1),z2}else return w2},merge:function(De,Fc){for(var hf=[],r1=0;r1<2;r1++)hf[r1]=De[r1]+Fc[r1];return hf},join:function(De,Fc,hf){return!De&&!Fc?"":De&&!Fc?De:Fc&&!De?Fc:De+hf+Fc},formatSubscripts:function(De){for(var Fc=De.toString().split("_"),hf="";Fc.length>1;)Fc.length>0&&(hf="_"+this.braces(Fc.pop()+hf));return Fc[0]+hf},formatP:function(De){for(var Fc=0;Fc<2;Fc++){var hf=De[Fc];hf&&(De[Fc]="^"+this.braces(hf))}return De},formatFrac:function(De,Fc){var hf=De.num.toString(),r1=De.den.toString();return Fc&&hf==="1"&&r1==="1"?"":r1==="1"?hf:this.frac(hf,r1)},frac:function(De,Fc){return"\\frac"+this.braces(De)+this.braces(Fc)},braces:function(De){return"{"+De+"}"},brackets:function(De,Fc){Fc=Fc||"parens";var hf={parens:["(",")"],square:["[","]"],brace:["{","}"],abs:["|","|"],angle:["\\langle","\\rangle"]},r1=hf[Fc];return"\\left"+r1[0]+De+"\\right"+r1[1]},filterTokens:function(De){var Fc=[];S2(De)&&(Fc.type=De.type);for(var hf=["\\","left","right","big","Big","large","Large"],r1=0,d1=De.length;r1<d1;r1++){var y1=De[r1],v1=De[r1+1];y1.value==="\\"&&v1.value==="\\"?Fc.push(y1):S2(y1)?Fc.push(K4.filterTokens(y1)):hf.indexOf(y1.value)===-1&&Fc.push(y1)}return Fc},parse:function(De){var Fc,hf,r1="",d1=this.filterTokens(De),y1={cdot:"",times:"",infty:"Infinity"},v1=function(D4){return d1[typeof D4>"u"?++Fc:Fc+=D4]},O1=function(){return K4.parse(v1())},m2=function(D4){return D4 in y1?y1[D4]:D4==="*"&&d1[Fc+1].value==="&"?(v1(2),","):D4==="&"?(v1(),","):D4==="\\"?"],[":D4};for(Fc=0,hf=d1.length;Fc<hf;Fc++){var T2=d1[Fc];if(T2.value==="frac"){var w2=O1(),d4=O1();r1+=w2+"/"+d4}else if(T2.value in K4.symbols)if(T2.value===pf&&d1[Fc+1].type==="vector"&&d1[Fc+2].type==="Set"){var z2=O1(),i4=O1();r1+=i4+"^"+N1("1/"+z2)}else r1+=T2.value+O1();else if(T2.value==="int"){var E4=O1();Fc++;var w4=v1().value;w4=m2(w4.substring(1,w4.length)),r1+="integrate"+N1(E4+","+w4)}else if(T2.value==="int_"){var hf=O1();Fc++;var $4=v1().value;if($4===void 0){Fc--;var $4=O1()}var E4=O1(),w4=v1().value;if(w4===",")var w4=v1().value;if(w4==="differentialD"){Fc++;var w4=v1().value}if(w4==="mathrm"){Fc++;var w4=v1().value}r1+="defint"+N1(E4+","+hf+","+$4+","+w4)}else if(T2.value&&T2.value.startsWith("int_")){var hf=T2.value.replace("int_","");console.log("uppernow"),Fc++;var $4=v1().value;if($4===void 0){Fc--;var $4=O1()}var E4=O1(),w4=v1().value;if(w4===",")var w4=v1().value;if(w4==="differentialD"){Fc++;var w4=v1().value}if(w4==="mathrm"){Fc++;var w4=v1().value}r1+="defint"+N1(E4+","+hf+","+$4+","+w4)}else if(T2.value==="mathrm"){var E4=d1[++Fc][0].value;r1+=E4+O1()}else if(T2.value==="sum_"||T2.value==="prod_"){var U4=T2.value==="sum_"?"sum":"product",X2=v1();Fc++;var f3=O1(),E4=O1();r1+=U4+N1([E4,m2(X2[0]),m2(X2[2]),m2(f3)].join(","))}else if(T2.value==="lim_"){var X2=v1();r1+="limit"+N1([O1(),m2(X2[0]),m2(X2[2])].join(","))}else if(T2.value==="begin"){var X2=v1();if(Array.isArray(X2)){var a3=X2[0].value;a3==="matrix"&&(r1+="matrix([")}}else if(T2.value==="end"){var X2=v1();if(Array.isArray(X2)){var a3=X2[0].value;a3==="matrix"&&(r1+="])")}}else Array.isArray(T2)?r1+=m2(K4.parse(T2)):r1+=m2(T2.value.toString())}return N1(r1)}};function c3(De){N2(De)?this.elements=De.items.slice(0):S2(De)?this.elements=De.slice(0):this.elements=[].slice.call(arguments)}c3.arrayPrefill=function(De,Fc){var hf=[];Fc=Fc||0;for(var r1=0;r1<De;r1++)hf[r1]=Fc;return hf},c3.fromArray=function(De){var Fc=new c3;return Fc.elements=De,Fc},c3.fromSet=function(De){return c3.fromArray(De.elements)},c3.prototype={custom:!0,e:function(De){return De<1||De>this.elements.length?null:this.elements[De-1]},set:function(De,Fc){I1(Fc)||(Fc=new x1(Fc)),this.elements[De]=Fc},dimensions:function(){return this.elements.length},modulus:function(){return z1("SAFE",function(){return l.pow(this.dot(this.clone()),new x1(.5))},void 0,this)},eql:function(De){var Fc=this.elements.length,hf=De.elements||De;if(Fc!==hf.length)return!1;do if(Math.abs(l.subtract(this.elements[Fc-1],hf[Fc-1]).valueOf())>PRECISION)return!1;while(--Fc);return!0},clone:function(){for(var De=new c3,Fc=this.elements.length,hf=0;hf<Fc;hf++)De.elements.push(this.elements[hf].clone());return this.getter&&(De.getter=this.getter.clone()),De},map:function(De){var Fc=[];return this.each(function(hf,r1){Fc.push(De(hf,r1))}),new c3(Fc)},each:function(De){var Fc=this.elements.length,hf=Fc,r1;do r1=hf-Fc,De(this.elements[r1],r1+1);while(--Fc)},toUnitVector:function(){return z1("SAFE",function(){var De=this.modulus();return De.valueOf()===0?this.clone():this.map(function(Fc){return l.divide(Fc,De)})},void 0,this)},angleFrom:function(De){return z1("SAFE",function(){var Fc=De.elements||De,hf=this.elements.length;if(hf!==Fc.length)return null;var r1=new x1(0),d1=new x1(0),y1=new x1(0);this.each(function(T2,w2){r1=l.add(r1,l.multiply(T2,Fc[w2-1])),d1=l.add(d1,l.multiply(T2,T2)),y1=l.add(y1,l.multiply(Fc[w2-1],Fc[w2-1]))}),d1=l.pow(d1,new x1(.5)),y1=l.pow(y1,new x1(.5));var v1=l.multiply(d1,y1);if(v1.valueOf()===0)return null;var O1=l.divide(r1,v1),m2=O1.valueOf();return m2<-1&&(O1=-1),m2>1&&(O1=1),new x1(Math.acos(O1))},void 0,this)},isParallelTo:function(De){var Fc=this.angleFrom(De).valueOf();return Fc===null?null:Fc<=PRECISION},isAntiparallelTo:function(De){var Fc=this.angleFrom(De).valueOf();return Fc===null?null:Math.abs(Fc-Math.PI)<=PRECISION},isPerpendicularTo:function(De){var Fc=this.dot(De);return Fc===null?null:Math.abs(Fc)<=PRECISION},add:function(De){return z1("SAFE",function(){var Fc=De.elements||De;return this.elements.length!==Fc.length?null:this.map(function(hf,r1){return l.add(hf,Fc[r1-1])})},void 0,this)},subtract:function(De){return z1("SAFE",function(){var Fc=De.elements||De;return this.elements.length!==Fc.length?null:this.map(function(hf,r1){return l.subtract(hf,Fc[r1-1])})},void 0,this)},multiply:function(De){return this.map(function(Fc){return Fc.clone()*De.clone()})},x:function(De){return this.multiply(De)},dot:function(De){return z1("SAFE",function(){var Fc=De.elements||De,hf=new x1(0),r1=this.elements.length;if(r1!==Fc.length)return null;do hf=l.add(hf,l.multiply(this.elements[r1-1],Fc[r1-1]));while(--r1);return hf},void 0,this)},cross:function(De){var Fc=De.elements||De;if(this.elements.length!==3||Fc.length!==3)return null;var hf=this.elements;return z1("SAFE",function(){return new c3([l.subtract(l.multiply(hf[1],Fc[2]),l.multiply(hf[2],Fc[1])),l.subtract(l.multiply(hf[2],Fc[0]),l.multiply(hf[0],Fc[2])),l.subtract(l.multiply(hf[0],Fc[1]),l.multiply(hf[1],Fc[0]))])},void 0,this)},max:function(){var De=0,Fc=this.elements.length,hf=Fc,r1;do r1=hf-Fc,Math.abs(this.elements[r1].valueOf())>Math.abs(De.valueOf())&&(De=this.elements[r1]);while(--Fc);return De},magnitude:function(){var De=new x1(0);return this.each(function(Fc){De=l.add(De,l.pow(Fc,new x1(2)))}),l.sqrt(De)},indexOf:function(De){var Fc=null,hf=this.elements.length,r1=hf,d1;do d1=r1-hf,Fc===null&&this.elements[d1].valueOf()===De.valueOf()&&(Fc=d1+1);while(--hf);return Fc},text:function(De){return z4(this)},toString:function(){return this.text()},latex:function(De){for(var Fc=[],hf=0;hf<this.elements.length;hf++)Fc.push(K4.latex.call(K4,this.elements[hf],De));return"["+Fc.join(", ")+"]"}};function b4(){var De=arguments,Fc=De.length,hf,r1=[];if(V2(De))for(hf=0;hf<Fc;hf++)r1.push(De[hf].slice(0));else{var d1,y1,v1;for(hf=0;hf<Fc;hf++)d1=De[hf],N2(d1)&&(d1=d1.elements),S2(d1)||(d1=[d1]),v1=d1.length,y1&&y1!==v1&&qc("Unable to create Matrix. Row dimensions do not match!"),r1.push(d1),y1=v1}this.elements=r1}b4.identity=function(De){for(var Fc=new b4,hf=0;hf<De;hf++){Fc.elements.push([]);for(var r1=0;r1<De;r1++)Fc.set(hf,r1,hf===r1?new x1(1):new x1(0))}return Fc},b4.fromArray=function(De){function Fc(hf){return b4.apply(this,hf)}return Fc.prototype=b4.prototype,new Fc(De)},b4.zeroMatrix=function(De,Fc){for(var hf=new b4,r1=0;r1<De;r1++)hf.elements.push(c3.arrayPrefill(Fc,new x1(0)));return hf},b4.prototype={custom:!0,get:function(De,Fc){if(this.elements[De])return this.elements[De][Fc]},map:function(De,Fc){var hf=new b4;return this.each(function(r1,d1,y1){hf.set(d1,y1,De.call(hf,r1),Fc)}),hf},set:function(De,Fc,hf,r1){this.elements[De]||(this.elements[De]=[]),this.elements[De][Fc]=r1||I1(hf)?hf:new x1(hf)},cols:function(){return this.elements[0].length},rows:function(){return this.elements.length},row:function(De){return!De||De>this.cols()?[]:this.elements[De-1]},col:function(De){var Fc=this.rows(),hf=[];if(De>this.cols()||!De)return hf;for(var r1=0;r1<Fc;r1++)hf.push(this.elements[r1][De-1]);return hf},eachElement:function(De){var Fc=this.rows(),hf=this.cols(),r1,d1;for(r1=0;r1<Fc;r1++)for(d1=0;d1<hf;d1++)De.call(this,this.elements[r1][d1],r1,d1)},determinant:function(){if(!this.isSquare())return null;var De=this.toRightTriangular(),Fc=De.elements[0][0],hf=De.elements.length-1,r1=hf,d1;do d1=r1-hf+1,Fc=l.multiply(Fc,De.elements[d1][d1]);while(--hf);return Fc},isSquare:function(){return this.elements.length===this.elements[0].length},isSingular:function(){return this.isSquare()&&this.determinant()===0},augment:function(De){var Fc=this.rows(),hf=De.rows();Fc!==hf&&qc("Cannot augment matrix. Rows don't match.");for(var r1=0;r1<Fc;r1++)this.elements[r1]=this.elements[r1].concat(De.elements[r1]);return this},clone:function(){for(var De=this.rows(),Fc=this.cols(),hf=new b4,r1=0;r1<De;r1++){hf.elements[r1]=[];for(var d1=0;d1<Fc;d1++){var y1=this.elements[r1][d1];hf.elements[r1][d1]=I1(y1)?y1.clone():y1}}return hf},invert:function(){return this.isSquare()||qc("Matrix is not square!"),z1("SAFE",function(){var De=this.elements.length,Fc=De,hf,r1,d1=b4.identity(De),y1=this.augment(d1).toRightTriangular(),v1,O1=y1.elements[0].length,m2,T2,w2,d4=[],z2;do{hf=De-1,T2=[],v1=O1,d4[hf]=[],w2=y1.elements[hf][hf];do m2=O1-v1,z2=l.divide(y1.elements[hf][m2],w2.clone()),T2.push(z2),m2>=Fc&&d4[hf].push(z2);while(--v1);for(y1.elements[hf]=T2,r1=0;r1<hf;r1++){T2=[],v1=O1;do m2=O1-v1,T2.push(l.subtract(y1.elements[r1][m2].clone(),l.multiply(y1.elements[hf][m2].clone(),y1.elements[r1][hf].clone())));while(--v1);y1.elements[r1]=T2}}while(--De);return b4.fromArray(d4)},void 0,this)},toRightTriangular:function(){return z1("SAFE",function(){var De=this.clone(),Fc,hf,r1,d1=this.elements.length,y1=d1,v1,O1,m2=this.elements[0].length,T2;do{if(v1=y1-d1,hf=De.elements[v1][v1],hf.valueOf()===0){for(var w2=v1+1;w2<y1;w2++)if(r1=De.elements[w2][v1],r1&&r1.valueOf()!==0){Fc=[],O1=m2;do T2=m2-O1,Fc.push(l.add(De.elements[v1][T2].clone(),De.elements[w2][T2].clone()));while(--O1);De.elements[v1]=Fc;break}}var hf=De.elements[v1][v1];if(hf.valueOf()!==0)for(w2=v1+1;w2<y1;w2++){var d4=l.divide(De.elements[w2][v1].clone(),De.elements[v1][v1].clone());Fc=[],O1=m2;do T2=m2-O1,Fc.push(T2<=v1?new x1(0):l.subtract(De.elements[w2][T2].clone(),l.multiply(De.elements[v1][T2].clone(),d4.clone())));while(--O1);De.elements[w2]=Fc}}while(--d1);return De},void 0,this)},transpose:function(){var De=this.elements.length,Fc=this.elements[0].length,hf=new b4,r1=Fc,d1,y1,v1;do{d1=Fc-r1,hf.elements[d1]=[],y1=De;do v1=De-y1,hf.elements[d1][v1]=this.elements[v1][d1].clone();while(--y1)}while(--r1);return hf},canMultiplyFromLeft:function(De){var Fc=V2(De)?De.elements.length:De.length;return this.elements[0].length===Fc},sameSize:function(De){return this.rows()===De.rows()&&this.cols()===De.cols()},multiply:function(De){return z1("SAFE",function(){var Fc=De.elements||De;if(!this.canMultiplyFromLeft(Fc)){if(this.sameSize(De)){for(var hf=new b4,r1=this.rows(),O1=0;O1<r1;O1++){var d1=l.multiply(new c3(this.elements[O1]),new c3(De.elements[O1]));hf.elements[O1]=d1.elements}return hf}return null}var y1=this.elements.length,v1=y1,O1,m2,T2=Fc[0].length,w2,d4=this.elements[0].length,z2=[],i4,E4,w4;do{O1=v1-y1,z2[O1]=[],m2=T2;do{w2=T2-m2,i4=new x1(0),E4=d4;do w4=d4-E4,i4=l.add(i4,l.multiply(this.elements[O1][w4],Fc[w4][w2]));while(--E4);z2[O1][w2]=i4}while(--m2)}while(--y1);return b4.fromArray(z2)},void 0,this)},add:function(De,Fc){var hf=new b4;return this.sameSize(De)&&this.eachElement(function(r1,d1,y1){var v1=l.add(r1.clone(),De.elements[d1][y1].clone());Fc&&(v1=Fc.call(hf,v1,r1,De.elements[d1][y1])),hf.set(d1,y1,v1)}),hf},subtract:function(De,Fc){var hf=new b4;return this.sameSize(De)&&this.eachElement(function(r1,d1,y1){var v1=l.subtract(r1.clone(),De.elements[d1][y1].clone());Fc&&(v1=Fc.call(hf,v1,r1,De.elements[d1][y1])),hf.set(d1,y1,v1)}),hf},negate:function(){return this.each(function(De){return De.negate()}),this},toVector:function(){if(this.rows()===1||this.cols()===1){var De=new c3;return De.elements=this.elements,De}return this},toString:function(De,Fc){for(var hf=this.rows(),r1=[],d1=0;d1<hf;d1++)r1.push("["+this.elements[d1].map(function(y1){var v1=Fc?y1.multiplier.toDecimal():y1.toString();return y1!==void 0?v1:""}).join(",")+"]");return"matrix"+N1(r1.join(","))},text:function(){return"matrix("+this.elements.toString("")+")"},latex:function(De){var Fc=this.cols(),hf=this.elements;return D1("\\begin{vmatrix}{0}\\end{vmatrix}",function(){var r1=[];for(var d1 in hf){for(var y1=[],v1=0;v1<Fc;v1++)y1.push(K4.latex.call(K4,hf[d1][v1],De));r1.push(y1.join(" & "))}return r1.join(" \\cr ")})}},b4.prototype.each=b4.prototype.eachElement;function Y4(De){if(this.elements=[],N2(De)||(De=c3.fromArray(arguments)),De)for(var Fc=De.elements,hf=0,r1=Fc.length;hf<r1;hf++)this.add(Fc[hf])}Y4.fromArray=function(De){function Fc(hf){return Y4.apply(this,hf)}return Fc.prototype=Y4.prototype,new Fc(De)},Y4.prototype={add:function(De){this.contains(De)||this.elements.push(De.clone())},contains:function(De){for(var Fc=0;Fc<this.elements.length;Fc++){var hf=this.elements[Fc];if(De.equals(hf))return!0}return!1},each:function(De){for(var Fc=this.elements,hf=new Y4,r1=0,d1=Fc.length;r1<d1;r1++){var y1=Fc[r1];De.call(this,y1,hf,r1)}return hf},clone:function(){var De=new Y4;return this.each(function(Fc){De.add(Fc.clone())}),De},union:function(De){var Fc=this.clone();return De.each(function(hf){Fc.add(hf)}),Fc},difference:function(De){var Fc=this.clone();return De.each(function(hf){Fc.remove(hf)}),Fc},remove:function(De){for(var Fc=0,hf=this.elements.length;Fc<hf;Fc++){var r1=this.elements[Fc];if(r1.equals(De))return P1(this.elements,Fc),!0}return!1},intersection:function(De){var Fc=new Y4,hf=this;return De.each(function(r1){hf.contains(r1)&&Fc.add(r1)}),Fc},intersects:function(De){return this.intersection(De).elements.length>0},is_subset:function(De){for(var Fc=De.elements,hf=0,r1=Fc.length;hf<r1;hf++)if(!this.contains(Fc[hf]))return!1;return!0},toString:function(){return"{"+this.elements.join(",")+"}"}};var z3={dependencies:{_rename:{"Math2.factorial":"factorial"},factorial:{"Math2.gamma":r4.gamma},gamma_incomplete:{"Math2.factorial":r4.factorial},Li:{"Math2.Ei":r4.Ei,"Math2.bigLog":r4.bigLog,Frac:H2},Ci:{"Math2.factorial":r4.factorial},Ei:{"Math2.factorial":r4.factorial},Si:{"Math2.factorial":r4.factorial},Shi:{"Math2.factorial":r4.factorial},Chi:{isInt:E1,nround:u2,"Math2.num_integrate":r4.num_integrate},factor:{"Math2.ifactor":r4.ifactor,Symbol:x1},num_integrate:{"Math2.simpson":r4.simpson,nround:u2},fib:{even:k2}},reformat:{diff:function(De,Fc){var hf=De.args[1].toString(),r1="var f = "+z3.build(De.args[0].toString(),[hf])+";";return Fc[1]+="var diff = "+r4.diff.toString()+";",Fc[1]+=r1,["diff(f)("+hf+")",Fc]}},getProperName:function(De){var Fc={continued_fraction:"continuedFraction"};return Fc[De]||De},compileDependencies:function(De,Fc){var hf=z3.dependencies[De],r1=Fc&&Fc[1]?Fc[1]:"",d1=Fc&&Fc[0]?Fc[0]:{};for(var y1 in hf)if(typeof hf[y1]!="object"){var v1=y1.split(".");r1+="var "+(v1.length>1?v1[1]:v1[0])+"="+hf[y1]+";",d1[y1]=v1.pop()}return[d1,r1]},getArgsDeps:function(De,Fc){for(var hf=De.args,r1=0;r1<hf.length;r1++)De.args[r1].each(function(d1){d1.group===wt&&(Fc=z3.compileDependencies(d1.fname,Fc))});return Fc},build:function(De,Fc){De=z1("PARSE2NUMBER",function(){return l.parse(De)},!0);var hf=R2(De),r1=[],d1=[],y1=function(w2,d4){w2.fname===""&&(w2=x1.unwrapPARENS(w2)),d4=d4||[];var z2=[],i4=w2.group,E4="",w4=function(D4){var F3=D4===sr?"*":"+",Z3=[];for(var U3 in w2.symbols){var o3=w2.symbols[U3],v3=y1(o3,d4)[0];o3.isComposite()&&(v3=N1(v3)),Z3.push(v3)}var g3=Z3.join(F3);return g3=g3&&!w2.multiplier.equals(1)?N1(g3):g3,g3},$4=function(D4){var F3;return D4 in Math?F3="Math."+D4:(D4=z3.getProperName(D4),r1.indexOf(D4)===-1&&(d4.push("var "+D4+" = "+r4[D4].toString()+"; "),r1.push(D4)),F3=D4),F3=F3+N1(w2.args.map(function(Z3){return y1(Z3,d4)[0]}).join(",")),F3};i4===me?z2.push(w2.multiplier.toDecimal()):w2.multiplier.equals(-1)?E4="-":w2.multiplier.equals(1)||z2.push(w2.multiplier.toDecimal());var U4;if(i4===He||i4===_e)U4=w2.value;else if(i4===wt)if(d1=z3.compileDependencies(w2.fname,d1),d1=z3.getArgsDeps(w2,d1),z3.reformat[w2.fname]){var X2=z3.reformat[w2.fname](w2,d1);d1=X2[1],U4=X2[0]}else U4=$4(w2.fname);else if(i4===Xe){var f3=w2.previousGroup;f3===me||f3===He?U4=w2.value:f3===wt?(U4=$4(w2.fname),d1=z3.compileDependencies(w2.fname,d1),d1=z3.getArgsDeps(w2,d1)):U4=w4(w2.previousGroup)}else U4=w4(w2.group);if(w2.group!==me&&!w2.power.equals(1)){var a3=y1(l.parse(w2.power));d4.push(a3[1]),U4="Math.pow"+N1(U4+","+a3[0])}return U4&&z2.push(E4+U4),[z2.join("*"),d4.join("").replace(/\n+\s+/g," ")]};Fc&&(hf=Fc);var v1=y1(De);for(var O1 in d1[0]){var m2=d1[0][O1];v1[1]=v1[1].replace(O1,m2),d1[1]=d1[1].replace(O1,m2)}var T2=new Function(hf,(d1[1]||"")+v1[1]+" return "+v1[0]+";");return T2}};(function(){v4(l.CONSTANTS),v4(l.functions),l.initConstants(),l.error||(l.error=qc),Z.LOG_FNS={log:l.functions.log,log10:l.functions.log10}})();var d6={allSame:wh,allNumeric:_1,arguments2Array:b2,arrayAddSlices:v2,arrayClone:a2,arrayMax:Q1,arrayMin:Z1,arrayEqual:A1,arrayUnique:n4,arrayGetVariables:o4,arraySum:F2,block:z1,build:z3.build,clearU:j2,comboSort:l2,compare:L1,convertToVector:$2,customError:Qp,customType:E2,decompose_fn:x2,each:h2,evaluate:c2,even:k2,evenFraction:a4,fillHoles:W2,firstObject:u1,format:D1,generatePrimes:Z2,getCoeffs:P2,getU:s2,importFunctions:e2,inBrackets:N1,isArray:S2,isExpression:i2,isFraction:V1,isInt:E1,isMatrix:V2,isNegative:F1,isNumericSymbol:B2,isPrime:e1,isReserved:n1,isSymbol:I1,isVariableSymbol:K2,isVector:N2,keys:g1,knownVariable:s1,nroots:A2,remove:P1,reserveNames:v4,range:i1,round:u2,sameSign:n2,scientificToDecimal:ff,separate:X1,stringReplace:J1,text:z4,validateName:yh,variables:R2,warn:gf},G6={groups:g,Symbol:x1,Expression:O4,Frac:H2,Vector:c3,Matrix:b4,Parser:A3,Scientific:C4,Fraction:V6,Math2:r4,LaTeX:K4,Utils:d6,PARSER:l,PARENTHESIS:th,Settings:Z,err:qc,bigInt:u,bigDec:d,exceptions:y4},H4=function(De,Fc,hf,r1){var d1=!1,y1=/^([a-z_][a-z\d\_]*)\(([a-z_,\s]*)\):=(.+)$/gi.exec(De);if(y1)return e.setFunction(y1[1],y1[2].split(","),y1[3]);De instanceof O4&&(De=De.toString()),S2(hf)||(hf=typeof hf>"u"?[]:[hf]),hf.forEach(function(O1){if(O1==="numer"){d1=!0;return}var m2=l.functions[hf];m2&&m2[1]===1&&(De=`${O1}(${De})`)});var v1=z1("PARSE2NUMBER",function(){return l.parse(De,Fc)},d1||Z.PARSE2NUMBER);return r1?uf[r1-1]=v1:uf.push(v1),new O4(v1)};return H4.rpn=function(De){return l.tokenize(l.toRPN(De))},H4.convertToLaTeX=function(De,Fc){return l.toTeX(De,Fc)},H4.convertFromLaTeX=function(De){var Fc=K4.parse(l.tokenize(De));return new O4(l.parse(Fc))},H4.version=function(De){if(De)try{return G6[De].version}catch{return"No module named "+De+" found!"}return a},H4.getWarnings=function(){return Rs},H4.setConstant=function(De,Fc){if(yh(De),!n1(De))if(Fc==="delete"||Fc==="")delete l.CONSTANTS[De];else{if(isNaN(Fc))throw new $1("Constant must be a number!");l.CONSTANTS[De]=Fc}return this},H4.getConstant=function(De){return String(l.constant[De])},H4.setFunction=B1,H4.getCore=function(){return G6},H4.getExpression=H4.getEquation=O4.getExpression,H4.reserved=function(De){return De?Vc:Vc.join(", ")},H4.clear=function(De,Fc){if(De==="all")uf=[];else if(De==="last")uf.pop();else if(De==="first")uf.shift();else{var hf=De?De-1:uf.length;Fc===!0?uf[hf]=void 0:P1(uf,hf)}return this},H4.flush=function(){return this.clear("all"),this},H4.expressions=function(De,Fc,hf){for(var r1=De?{}:[],d1=0;d1<uf.length;d1++){var y1=Fc?K4.latex(uf[d1],hf):z4(uf[d1],hf);De?r1[d1+1]=y1:r1.push(y1)}return r1},H4.register=function(De){var Fc=this.getCore();if(S2(De))for(var hf=0;hf<De.length;hf++)De&&this.register(De[hf]);else if(De&&Z.exclude.indexOf(De.name)===-1){if(De.dependencies){for(var hf=0;hf<De.dependencies.length;hf++)if(!Fc[De.dependencies[hf]])throw new Error(D1("{0} requires {1} to be loaded!",De.name,De.dependencies[hf]))}var r1=De.parent,d1=De.build.call(Fc);if(r1){Fc[r1]||(Fc[De.parent]={});var y1=r1==="nerdamer"?this:Fc[r1];y1[De.name]=d1}De.visible&&(l.functions[De.name]=[d1,De.numargs])}},H4.validateName=yh,H4.validVarName=function(De){try{return yh(De),Vc.indexOf(De)===-1}catch{return!1}},H4.supported=function(){return g1(l.functions)},H4.numEquations=H4.numExpressions=function(){return uf.length},H4.setVar=function(De,Fc){return yh(De),De in l.CONSTANTS&&qc("Cannot set value for constant "+De),Fc==="delete"||Fc===""?delete li[De]:li[De]=I1(Fc)?Fc:l.parse(Fc),this},H4.getVar=function(De){return li[De]},H4.clearVars=function(){return li={},this},H4.load=function(De){return De.call(this),this},H4.getVars=function(De,Fc){De=De||"text";var hf={};if(De==="object")hf=li;else for(var r1 in li)De==="latex"?hf[r1]=li[r1].latex(Fc):De==="text"&&(hf[r1]=li[r1].text(Fc));return hf},H4.set=function(De,Fc){if(typeof De=="object")for(var hf in De)H4.set(hf,De[hf]);var r1=["SAFE"];r1.indexOf(De)!==-1&&qc("Cannot modify setting: "+De),De==="PRECISION"?(d.set({precision:Fc}),Z.PRECISION=Fc,Fc>21&&this.set("USE_BIG",!0)):De==="USE_LN"&&Fc===!0?(Z.LOG="LN",Z.LOG10="log",l.functions.log=Z.LOG_FNS.log10,l.functions.log[0]=function(d1){return d1.isConstant()?new x1(Math.log10(d1)):l.symfunction(Z.LOG10,[d1])},l.functions.LN=Z.LOG_FNS.log,delete l.functions.log10):Z[De]=Fc},H4.get=function(De){return Z[De]},H4.updateAPI=function(De){var Fc=function(r1){return function(){for(var d1=[].slice.call(arguments),y1=0;y1<d1.length;y1++)d1[y1]=l.parse(d1[y1]);return new O4(z1("PARSE2NUMBER",function(){return l.callfunction(r1,d1)}))}};for(var hf in l.functions)(!(hf in H4)||De)&&(H4[hf]=Fc(hf))},H4.replaceFunction=function(De,Fc,hf){var r1=l.functions[De],d1=typeof hf>"u"?r1[1]:hf;l.functions[De]=[Fc.call(void 0,r1[0],G6),d1]},H4.setOperator=function(De,Fc){l.setOperator(De,Fc)},H4.getOperator=function(De){return l.getOperator(De)},H4.aliasOperator=function(De,Fc){l.aliasOperator(De,Fc)},H4.tree=function(De){return l.tree(l.toRPN(l.tokenize(De)))},H4.htmlTree=function(De,Fc){var hf=this.tree(De);return`<div class="tree">
    <ul>
        <li>
`+hf.toHTML(3,Fc)+`
        </li>
    </ul>
</div>`},H4.addPeeker=function(De,Fc){l.peekers[De]&&l.peekers[De].push(Fc)},H4.removePeeker=function(De,Fc){P1(l.peekers[De],Fc)},H4.parse=function(De){return String(De).split(";").map(function(Fc){return l.parse(Fc)})},H4.updateAPI(),H4}({bigInt:function(){var r=function(a){var l=1e7,u=7,d=9007199254740992,g=He(d),E=Math.log(d);function P(i1,g1){return typeof i1>"u"?P[0]:typeof g1<"u"?+g1==10?n2(i1):S2(i1,g1):n2(i1)}function Z(i1,g1){this.value=i1,this.sign=g1,this.isSmall=!1}Z.prototype=Object.create(P.prototype);function me(i1){this.value=i1,this.sign=i1<0,this.isSmall=!0}me.prototype=Object.create(P.prototype);function _e(i1){return-d<i1&&i1<d}function He(i1){return i1<1e7?[i1]:i1<1e14?[i1%1e7,Math.floor(i1/1e7)]:[i1%1e7,Math.floor(i1/1e7)%1e7,Math.floor(i1/1e14)]}function Xe(i1){wt(i1);var g1=i1.length;if(g1<4&&ff(i1,g)<0)switch(g1){case 0:return 0;case 1:return i1[0];case 2:return i1[0]+i1[1]*l;default:return i1[0]+(i1[1]+i1[2]*l)*l}return i1}function wt(i1){for(var g1=i1.length;i1[--g1]===0;);i1.length=g1+1}function Do(i1){for(var g1=new Array(i1),u1=-1;++u1<i1;)g1[u1]=0;return g1}function sr(i1){return i1>0?Math.floor(i1):Math.ceil(i1)}function Ko(i1,g1){var u1=i1.length,L1=g1.length,B1=new Array(u1),Q1=0,Z1=l,A1,a2;for(a2=0;a2<L1;a2++)A1=i1[a2]+g1[a2]+Q1,Q1=A1>=Z1?1:0,B1[a2]=A1-Q1*Z1;for(;a2<u1;)A1=i1[a2]+Q1,Q1=A1===Z1?1:0,B1[a2++]=A1-Q1*Z1;return Q1>0&&B1.push(Q1),B1}function Bs(i1,g1){return i1.length>=g1.length?Ko(i1,g1):Ko(g1,i1)}function th(i1,g1){var u1=i1.length,L1=new Array(u1),B1=l,Q1,Z1;for(Z1=0;Z1<u1;Z1++)Q1=i1[Z1]-B1+g1,g1=Math.floor(Q1/B1),L1[Z1]=Q1-g1*B1,g1+=1;for(;g1>0;)L1[Z1++]=g1%B1,g1=Math.floor(g1/B1);return L1}Z.prototype.add=function(i1){var g1=n2(i1);if(this.sign!==g1.sign)return this.subtract(g1.negate());var u1=this.value,L1=g1.value;return g1.isSmall?new Z(th(u1,Math.abs(L1)),this.sign):new Z(Bs(u1,L1),this.sign)},Z.prototype.plus=Z.prototype.add,me.prototype.add=function(i1){var g1=n2(i1),u1=this.value;if(u1<0!==g1.sign)return this.subtract(g1.negate());var L1=g1.value;if(g1.isSmall){if(_e(u1+L1))return new me(u1+L1);L1=He(Math.abs(L1))}return new Z(th(L1,Math.abs(u1)),u1<0)},me.prototype.plus=me.prototype.add;function pf(i1,g1){var u1=i1.length,L1=g1.length,B1=new Array(u1),Q1=0,Z1=l,A1,a2;for(A1=0;A1<L1;A1++)a2=i1[A1]-Q1-g1[A1],a2<0?(a2+=Z1,Q1=1):Q1=0,B1[A1]=a2;for(A1=L1;A1<u1;A1++){if(a2=i1[A1]-Q1,a2<0)a2+=Z1;else{B1[A1++]=a2;break}B1[A1]=a2}for(;A1<u1;A1++)B1[A1]=i1[A1];return wt(B1),B1}function _h(i1,g1,u1){var L1;return ff(i1,g1)>=0?L1=pf(i1,g1):(L1=pf(g1,i1),u1=!u1),L1=Xe(L1),typeof L1=="number"?(u1&&(L1=-L1),new me(L1)):new Z(L1,u1)}function cf(i1,g1,u1){var L1=i1.length,B1=new Array(L1),Q1=-g1,Z1=l,A1,a2;for(A1=0;A1<L1;A1++)a2=i1[A1]+Q1,Q1=Math.floor(a2/Z1),a2%=Z1,B1[A1]=a2<0?a2+Z1:a2;return B1=Xe(B1),typeof B1=="number"?(u1&&(B1=-B1),new me(B1)):new Z(B1,u1)}Z.prototype.subtract=function(i1){var g1=n2(i1);if(this.sign!==g1.sign)return this.add(g1.negate());var u1=this.value,L1=g1.value;return g1.isSmall?cf(u1,Math.abs(L1),this.sign):_h(u1,L1,this.sign)},Z.prototype.minus=Z.prototype.subtract,me.prototype.subtract=function(i1){var g1=n2(i1),u1=this.value;if(u1<0!==g1.sign)return this.add(g1.negate());var L1=g1.value;return g1.isSmall?new me(u1-L1):cf(L1,Math.abs(u1),u1>=0)},me.prototype.minus=me.prototype.subtract,Z.prototype.negate=function(){return new Z(this.value,!this.sign)},me.prototype.negate=function(){var i1=this.sign,g1=new me(-this.value);return g1.sign=!i1,g1},Z.prototype.abs=function(){return new Z(this.value,!1)},me.prototype.abs=function(){return new me(Math.abs(this.value))};function df(i1,g1){var u1=i1.length,L1=g1.length,B1=u1+L1,Q1=Do(B1),Z1=l,A1,a2,v2,A2,l2;for(v2=0;v2<u1;++v2){A2=i1[v2];for(var x2=0;x2<L1;++x2)l2=g1[x2],A1=A2*l2+Q1[v2+x2],a2=Math.floor(A1/Z1),Q1[v2+x2]=A1-a2*Z1,Q1[v2+x2+1]+=a2}return wt(Q1),Q1}function uf(i1,g1){var u1=i1.length,L1=new Array(u1),B1=l,Q1=0,Z1,A1;for(A1=0;A1<u1;A1++)Z1=i1[A1]*g1+Q1,Q1=Math.floor(Z1/B1),L1[A1]=Z1-Q1*B1;for(;Q1>0;)L1[A1++]=Q1%B1,Q1=Math.floor(Q1/B1);return L1}function li(i1,g1){for(var u1=[];g1-- >0;)u1.push(0);return u1.concat(i1)}function Vc(i1,g1){var u1=Math.max(i1.length,g1.length);if(u1<=30)return df(i1,g1);u1=Math.ceil(u1/2);var L1=i1.slice(u1),B1=i1.slice(0,u1),Q1=g1.slice(u1),Z1=g1.slice(0,u1),A1=Vc(B1,Z1),a2=Vc(L1,Q1),v2=Vc(Bs(B1,L1),Bs(Z1,Q1)),A2=Bs(Bs(A1,li(pf(pf(v2,A1),a2),u1)),li(a2,2*u1));return wt(A2),A2}function Rs(i1,g1){return-.012*i1-.012*g1+15e-6*i1*g1>0}Z.prototype.multiply=function(i1){var g1=n2(i1),u1=this.value,L1=g1.value,B1=this.sign!==g1.sign,Q1;if(g1.isSmall){if(L1===0)return P[0];if(L1===1)return this;if(L1===-1)return this.negate();if(Q1=Math.abs(L1),Q1<l)return new Z(uf(u1,Q1),B1);L1=He(Q1)}return Rs(u1.length,L1.length)?new Z(Vc(u1,L1),B1):new Z(df(u1,L1),B1)},Z.prototype.times=Z.prototype.multiply;function qc(i1,g1,u1){return i1<l?new Z(uf(g1,i1),u1):new Z(df(g1,He(i1)),u1)}me.prototype._multiplyBySmall=function(i1){return _e(i1.value*this.value)?new me(i1.value*this.value):qc(Math.abs(i1.value),He(Math.abs(this.value)),this.sign!==i1.sign)},Z.prototype._multiplyBySmall=function(i1){return i1.value===0?P[0]:i1.value===1?this:i1.value===-1?this.negate():qc(Math.abs(i1.value),this.value,this.sign!==i1.sign)},me.prototype.multiply=function(i1){return n2(i1)._multiplyBySmall(this)},me.prototype.times=me.prototype.multiply;function Qp(i1){var g1=i1.length,u1=Do(g1+g1),L1=l,B1,Q1,Z1,A1,a2;for(Z1=0;Z1<g1;Z1++){A1=i1[Z1],Q1=0-A1*A1;for(var v2=Z1;v2<g1;v2++)a2=i1[v2],B1=2*(A1*a2)+u1[Z1+v2]+Q1,Q1=Math.floor(B1/L1),u1[Z1+v2]=B1-Q1*L1;u1[Z1+g1]=Q1}return wt(u1),u1}Z.prototype.square=function(){return new Z(Qp(this.value),!1)},me.prototype.square=function(){var i1=this.value*this.value;return _e(i1)?new me(i1):new Z(Qp(He(Math.abs(this.value))),!1)};function n1(i1,g1){var u1=i1.length,L1=g1.length,B1=l,Q1=Do(g1.length),Z1=g1[L1-1],A1=Math.ceil(B1/(2*Z1)),a2=uf(i1,A1),v2=uf(g1,A1),A2,l2,x2,u2,s2,j2,h2;for(a2.length<=u1&&a2.push(0),v2.push(0),Z1=v2[L1-1],l2=u1-L1;l2>=0;l2--){for(A2=B1-1,a2[l2+L1]!==Z1&&(A2=Math.floor((a2[l2+L1]*B1+a2[l2+L1-1])/Z1)),x2=0,u2=0,j2=v2.length,s2=0;s2<j2;s2++)x2+=A2*v2[s2],h2=Math.floor(x2/B1),u2+=a2[l2+s2]-(x2-h2*B1),x2=h2,u2<0?(a2[l2+s2]=u2+B1,u2=-1):(a2[l2+s2]=u2,u2=0);for(;u2!==0;){for(A2-=1,x2=0,s2=0;s2<j2;s2++)x2+=a2[l2+s2]-B1+v2[s2],x2<0?(a2[l2+s2]=x2+B1,x2=0):(a2[l2+s2]=x2,x2=1);u2+=x2}Q1[l2]=A2}return a2=gf(a2,A1)[0],[Xe(Q1),Xe(a2)]}function wh(i1,g1){for(var u1=i1.length,L1=g1.length,B1=[],Q1=[],Z1=l,A1,a2,v2,A2,l2;u1;){if(Q1.unshift(i1[--u1]),wt(Q1),ff(Q1,g1)<0){B1.push(0);continue}a2=Q1.length,v2=Q1[a2-1]*Z1+Q1[a2-2],A2=g1[L1-1]*Z1+g1[L1-2],a2>L1&&(v2=(v2+1)*Z1),A1=Math.ceil(v2/A2);do{if(l2=uf(g1,A1),ff(l2,Q1)<=0)break;A1--}while(A1);B1.push(A1),Q1=pf(Q1,l2)}return B1.reverse(),[Xe(B1),Xe(Q1)]}function gf(i1,g1){var u1=i1.length,L1=Do(u1),B1=l,Q1,Z1,A1,a2;for(A1=0,Q1=u1-1;Q1>=0;--Q1)a2=A1*B1+i1[Q1],Z1=sr(a2/g1),A1=a2-Z1*g1,L1[Q1]=Z1|0;return[L1,A1|0]}function yh(i1,g1){var u1,L1=n2(g1),B1=i1.value,Q1=L1.value,Z1;if(Q1===0)throw new Error("Cannot divide by zero");if(i1.isSmall)return L1.isSmall?[new me(sr(B1/Q1)),new me(B1%Q1)]:[P[0],i1];if(L1.isSmall){if(Q1===1)return[i1,P[0]];if(Q1==-1)return[i1.negate(),P[0]];var A1=Math.abs(Q1);if(A1<l){u1=gf(B1,A1),Z1=Xe(u1[0]);var a2=u1[1];return i1.sign&&(a2=-a2),typeof Z1=="number"?(i1.sign!==L1.sign&&(Z1=-Z1),[new me(Z1),new me(a2)]):[new Z(Z1,i1.sign!==L1.sign),new me(a2)]}Q1=He(A1)}var v2=ff(B1,Q1);if(v2===-1)return[P[0],i1];if(v2===0)return[P[i1.sign===L1.sign?1:-1],P[0]];B1.length+Q1.length<=200?u1=n1(B1,Q1):u1=wh(B1,Q1),Z1=u1[0];var A2=i1.sign!==L1.sign,l2=u1[1],x2=i1.sign;return typeof Z1=="number"?(A2&&(Z1=-Z1),Z1=new me(Z1)):Z1=new Z(Z1,A2),typeof l2=="number"?(x2&&(l2=-l2),l2=new me(l2)):l2=new Z(l2,x2),[Z1,l2]}Z.prototype.divmod=function(i1){var g1=yh(this,i1);return{quotient:g1[0],remainder:g1[1]}},me.prototype.divmod=Z.prototype.divmod,Z.prototype.divide=function(i1){return yh(this,i1)[0]},me.prototype.over=me.prototype.divide=Z.prototype.over=Z.prototype.divide,Z.prototype.mod=function(i1){return yh(this,i1)[1]},me.prototype.remainder=me.prototype.mod=Z.prototype.remainder=Z.prototype.mod,Z.prototype.pow=function(i1){var g1=n2(i1),u1=this.value,L1=g1.value,B1,Q1,Z1;if(L1===0)return P[1];if(u1===0)return P[0];if(u1===1)return P[1];if(u1===-1)return g1.isEven()?P[1]:P[-1];if(g1.sign)return P[0];if(!g1.isSmall)throw new Error("The exponent "+g1.toString()+" is too large.");if(this.isSmall&&_e(B1=Math.pow(u1,L1)))return new me(sr(B1));for(Q1=this,Z1=P[1];L1&!0&&(Z1=Z1.times(Q1),--L1),L1!==0;)L1/=2,Q1=Q1.square();return Z1},me.prototype.pow=Z.prototype.pow,Z.prototype.modPow=function(i1,g1){if(i1=n2(i1),g1=n2(g1),g1.isZero())throw new Error("Cannot take modPow with modulus 0");for(var u1=P[1],L1=this.mod(g1);i1.isPositive();){if(L1.isZero())return P[0];i1.isOdd()&&(u1=u1.multiply(L1).mod(g1)),i1=i1.divide(2),L1=L1.square().mod(g1)}return u1},me.prototype.modPow=Z.prototype.modPow;function ff(i1,g1){if(i1.length!==g1.length)return i1.length>g1.length?1:-1;for(var u1=i1.length-1;u1>=0;u1--)if(i1[u1]!==g1[u1])return i1[u1]>g1[u1]?1:-1;return 0}Z.prototype.compareAbs=function(i1){var g1=n2(i1),u1=this.value,L1=g1.value;return g1.isSmall?1:ff(u1,L1)},me.prototype.compareAbs=function(i1){var g1=n2(i1),u1=Math.abs(this.value),L1=g1.value;return g1.isSmall?(L1=Math.abs(L1),u1===L1?0:u1>L1?1:-1):-1},Z.prototype.compare=function(i1){if(i1===1/0)return-1;if(i1===-1/0)return 1;var g1=n2(i1),u1=this.value,L1=g1.value;return this.sign!==g1.sign?g1.sign?1:-1:g1.isSmall?this.sign?-1:1:ff(u1,L1)*(this.sign?-1:1)},Z.prototype.compareTo=Z.prototype.compare,me.prototype.compare=function(i1){if(i1===1/0)return-1;if(i1===-1/0)return 1;var g1=n2(i1),u1=this.value,L1=g1.value;return g1.isSmall?u1==L1?0:u1>L1?1:-1:u1<0!==g1.sign?u1<0?-1:1:u1<0?1:-1},me.prototype.compareTo=me.prototype.compare,Z.prototype.equals=function(i1){return this.compare(i1)===0},me.prototype.eq=me.prototype.equals=Z.prototype.eq=Z.prototype.equals,Z.prototype.notEquals=function(i1){return this.compare(i1)!==0},me.prototype.neq=me.prototype.notEquals=Z.prototype.neq=Z.prototype.notEquals,Z.prototype.greater=function(i1){return this.compare(i1)>0},me.prototype.gt=me.prototype.greater=Z.prototype.gt=Z.prototype.greater,Z.prototype.lesser=function(i1){return this.compare(i1)<0},me.prototype.lt=me.prototype.lesser=Z.prototype.lt=Z.prototype.lesser,Z.prototype.greaterOrEquals=function(i1){return this.compare(i1)>=0},me.prototype.geq=me.prototype.greaterOrEquals=Z.prototype.geq=Z.prototype.greaterOrEquals,Z.prototype.lesserOrEquals=function(i1){return this.compare(i1)<=0},me.prototype.leq=me.prototype.lesserOrEquals=Z.prototype.leq=Z.prototype.lesserOrEquals,Z.prototype.isEven=function(){return(this.value[0]&1)===0},me.prototype.isEven=function(){return(this.value&1)===0},Z.prototype.isOdd=function(){return(this.value[0]&1)===1},me.prototype.isOdd=function(){return(this.value&1)===1},Z.prototype.isPositive=function(){return!this.sign},me.prototype.isPositive=function(){return this.value>0},Z.prototype.isNegative=function(){return this.sign},me.prototype.isNegative=function(){return this.value<0},Z.prototype.isUnit=function(){return!1},me.prototype.isUnit=function(){return Math.abs(this.value)===1},Z.prototype.isZero=function(){return!1},me.prototype.isZero=function(){return this.value===0},Z.prototype.isDivisibleBy=function(i1){var g1=n2(i1),u1=g1.value;return u1===0?!1:u1===1?!0:u1===2?this.isEven():this.mod(g1).equals(P[0])},me.prototype.isDivisibleBy=Z.prototype.isDivisibleBy;function e1(i1){var g1=i1.abs();if(g1.isUnit())return!1;if(g1.equals(2)||g1.equals(3)||g1.equals(5))return!0;if(g1.isEven()||g1.isDivisibleBy(3)||g1.isDivisibleBy(5))return!1;if(g1.lesser(49))return!0}function s1(i1,g1){for(var u1=i1.prev(),L1=u1,B1=0,Q1,Z1,A1;L1.isEven();)L1=L1.divide(2),B1++;e:for(Z1=0;Z1<g1.length;Z1++)if(!i1.lesser(g1[Z1])&&(A1=r(g1[Z1]).modPow(L1,i1),!(A1.equals(P[1])||A1.equals(u1)))){for(Q1=B1-1;Q1!=0;Q1--){if(A1=A1.square().mod(i1),A1.isUnit())return!1;if(A1.equals(u1))continue e}return!1}return!0}Z.prototype.isPrime=function(i1){var g1=e1(this);if(g1!==a)return g1;var u1=this.abs(),L1=u1.bitLength();if(L1<=64)return s1(u1,[2,325,9375,28178,450775,9780504,1795265022]);for(var B1=Math.log(2)*L1,Q1=Math.ceil(i1===!0?2*Math.pow(B1,2):B1),Z1=[],A1=0;A1<Q1;A1++)Z1.push(r(A1+2));return s1(u1,Z1)},me.prototype.isPrime=Z.prototype.isPrime,Z.prototype.isProbablePrime=function(i1){var g1=e1(this);if(g1!==a)return g1;for(var u1=this.abs(),L1=i1===a?5:i1,B1=[],Q1=0;Q1<L1;Q1++)B1.push(r.randBetween(2,u1.minus(2)));return s1(u1,B1)},me.prototype.isProbablePrime=Z.prototype.isProbablePrime,Z.prototype.modInv=function(i1){for(var g1=r.zero,u1=r.one,L1=n2(i1),B1=this.abs(),Q1,Z1,A1;!B1.equals(r.zero);)Q1=L1.divide(B1),Z1=g1,A1=L1,g1=u1,L1=B1,u1=Z1.subtract(Q1.multiply(u1)),B1=A1.subtract(Q1.multiply(B1));if(!L1.equals(1))throw new Error(this.toString()+" and "+i1.toString()+" are not co-prime");return g1.compare(0)===-1&&(g1=g1.add(i1)),this.isNegative()?g1.negate():g1},me.prototype.modInv=Z.prototype.modInv,Z.prototype.next=function(){var i1=this.value;return this.sign?cf(i1,1,this.sign):new Z(th(i1,1),this.sign)},me.prototype.next=function(){var i1=this.value;return i1+1<d?new me(i1+1):new Z(g,!1)},Z.prototype.prev=function(){var i1=this.value;return this.sign?new Z(th(i1,1),!0):cf(i1,1,this.sign)},me.prototype.prev=function(){var i1=this.value;return i1-1>-d?new me(i1-1):new Z(g,!0)};for(var b1=[1];2*b1[b1.length-1]<=l;)b1.push(2*b1[b1.length-1]);var _1=b1.length,V1=b1[_1-1];function I1(i1){return(typeof i1=="number"||typeof i1=="string")&&+Math.abs(i1)<=l||i1 instanceof Z&&i1.value.length<=1}Z.prototype.shiftLeft=function(i1){if(!I1(i1))throw new Error(String(i1)+" is too large for shifting.");if(i1=+i1,i1<0)return this.shiftRight(-i1);var g1=this;if(g1.isZero())return g1;for(;i1>=_1;)g1=g1.multiply(V1),i1-=_1-1;return g1.multiply(b1[i1])},me.prototype.shiftLeft=Z.prototype.shiftLeft,Z.prototype.shiftRight=function(i1){var g1;if(!I1(i1))throw new Error(String(i1)+" is too large for shifting.");if(i1=+i1,i1<0)return this.shiftLeft(-i1);for(var u1=this;i1>=_1;){if(u1.isZero()||u1.isNegative()&&u1.isUnit())return u1;g1=yh(u1,V1),u1=g1[1].isNegative()?g1[0].prev():g1[0],i1-=_1-1}return g1=yh(u1,b1[i1]),g1[1].isNegative()?g1[0].prev():g1[0]},me.prototype.shiftRight=Z.prototype.shiftRight;function i2(i1,g1,u1){g1=n2(g1);for(var L1=i1.isNegative(),B1=g1.isNegative(),Q1=L1?i1.not():i1,Z1=B1?g1.not():g1,A1=0,a2=0,v2=null,A2=null,l2=[];!Q1.isZero()||!Z1.isZero();)v2=yh(Q1,V1),A1=v2[1].toJSNumber(),L1&&(A1=V1-1-A1),A2=yh(Z1,V1),a2=A2[1].toJSNumber(),B1&&(a2=V1-1-a2),Q1=v2[0],Z1=A2[0],l2.push(u1(A1,a2));for(var x2=u1(L1?1:0,B1?1:0)!==0?r(-1):r(0),u2=l2.length-1;u2>=0;u2-=1)x2=x2.multiply(V1).add(r(l2[u2]));return x2}Z.prototype.not=function(){return this.negate().prev()},me.prototype.not=Z.prototype.not,Z.prototype.and=function(i1){return i2(this,i1,function(g1,u1){return g1&u1})},me.prototype.and=Z.prototype.and,Z.prototype.or=function(i1){return i2(this,i1,function(g1,u1){return g1|u1})},me.prototype.or=Z.prototype.or,Z.prototype.xor=function(i1){return i2(this,i1,function(g1,u1){return g1^u1})},me.prototype.xor=Z.prototype.xor;var R2=1<<30,F2=(l&-l)*(l&-l)|R2;function X1(i1){var g1=i1.value,u1=typeof g1=="number"?g1|R2:g1[0]+g1[1]*l|F2;return u1&-u1}function W2(i1,g1){if(g1.compareTo(i1)<=0){var u1=W2(i1,g1.square(g1)),L1=u1.p,B1=u1.e,Q1=L1.multiply(g1);return Q1.compareTo(i1)<=0?{p:Q1,e:B1*2+1}:{p:L1,e:B1*2}}return{p:r(1),e:0}}Z.prototype.bitLength=function(){var i1=this;return i1.compareTo(r(0))<0&&(i1=i1.negate().subtract(r(1))),i1.compareTo(r(0))===0?r(0):r(W2(i1,r(2)).e).add(r(1))},me.prototype.bitLength=Z.prototype.bitLength;function N2(i1,g1){return i1=n2(i1),g1=n2(g1),i1.greater(g1)?i1:g1}function V2(i1,g1){return i1=n2(i1),g1=n2(g1),i1.lesser(g1)?i1:g1}function q2(i1,g1){if(i1=n2(i1).abs(),g1=n2(g1).abs(),i1.equals(g1))return i1;if(i1.isZero())return g1;if(g1.isZero())return i1;for(var u1=P[1],L1,B1;i1.isEven()&&g1.isEven();)L1=Math.min(X1(i1),X1(g1)),i1=i1.divide(L1),g1=g1.divide(L1),u1=u1.multiply(L1);for(;i1.isEven();)i1=i1.divide(X1(i1));do{for(;g1.isEven();)g1=g1.divide(X1(g1));i1.greater(g1)&&(B1=g1,g1=i1,i1=B1),g1=g1.subtract(i1)}while(!g1.isZero());return u1.isUnit()?i1:i1.multiply(u1)}function B2(i1,g1){return i1=n2(i1).abs(),g1=n2(g1).abs(),i1.divide(q2(i1,g1)).multiply(g1)}function K2(i1,g1){i1=n2(i1),g1=n2(g1);var u1=V2(i1,g1),L1=N2(i1,g1),B1=L1.subtract(u1).add(1);if(B1.isSmall)return u1.add(Math.floor(Math.random()*B1));for(var Q1=B1.value.length-1,Z1=[],A1=!0,a2=Q1;a2>=0;a2--){var v2=A1?B1.value[a2]:l,A2=sr(Math.random()*v2);Z1.unshift(A2),A2<v2&&(A1=!1)}return Z1=Xe(Z1),u1.add(typeof Z1=="number"?new me(Z1):new Z(Z1,!1))}var S2=function(i1,g1){for(var u1=i1.length,L1,B1=Math.abs(g1),L1=0;L1<u1;L1++){var Q1=i1[L1].toLowerCase();if(Q1!=="-"&&/[a-z0-9]/.test(Q1)){if(/[0-9]/.test(Q1)&&+Q1>=B1){if(Q1==="1"&&B1===1)continue;throw new Error(Q1+" is not a valid digit in base "+g1+".")}else if(Q1.charCodeAt(0)-87>=B1)throw new Error(Q1+" is not a valid digit in base "+g1+".")}}if(2<=g1&&g1<=36&&u1<=E/Math.log(g1)){var Z1=parseInt(i1,g1);if(isNaN(Z1))throw new Error(Q1+" is not a valid digit in base "+g1+".");return new me(parseInt(i1,g1))}g1=n2(g1);var A1=[],a2=i1[0]==="-";for(L1=a2?1:0;L1<i1.length;L1++){var Q1=i1[L1].toLowerCase(),v2=Q1.charCodeAt(0);if(48<=v2&&v2<=57)A1.push(n2(Q1));else if(97<=v2&&v2<=122)A1.push(n2(Q1.charCodeAt(0)-87));else if(Q1==="<"){var A2=L1;do L1++;while(i1[L1]!==">");A1.push(n2(i1.slice(A2+1,L1)))}else throw new Error(Q1+" is not a valid character")}return E1(A1,g1,a2)};function E1(i1,g1,u1){var L1=P[0],B1=P[1],Q1;for(Q1=i1.length-1;Q1>=0;Q1--)L1=L1.add(i1[Q1].times(B1)),B1=B1.times(g1);return u1?L1.negate():L1}function F1(i1){return i1<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(i1):"<"+i1+">"}function K1(i1,g1){if(g1=r(g1),g1.isZero()){if(i1.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(g1.equals(-1)){if(i1.isZero())return{value:[0],isNegative:!1};if(i1.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-i1)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var u1=Array.apply(null,Array(+i1-1)).map(Array.prototype.valueOf,[0,1]);return u1.unshift([1]),{value:[].concat.apply([],u1),isNegative:!1}}var L1=!1;if(i1.isNegative()&&g1.isPositive()&&(L1=!0,i1=i1.abs()),g1.equals(1))return i1.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+i1)).map(Number.prototype.valueOf,1),isNegative:L1};for(var B1=[],Q1=i1,Z1;Q1.isNegative()||Q1.compareAbs(g1)>=0;){Z1=Q1.divmod(g1),Q1=Z1.quotient;var A1=Z1.remainder;A1.isNegative()&&(A1=g1.minus(A1).abs(),Q1=Q1.next()),B1.push(A1.toJSNumber())}return B1.push(Q1.toJSNumber()),{value:B1.reverse(),isNegative:L1}}function N1(i1,g1){var u1=K1(i1,g1);return(u1.isNegative?"-":"")+u1.value.map(F1).join("")}Z.prototype.toArray=function(i1){return K1(this,i1)},me.prototype.toArray=function(i1){return K1(this,i1)},Z.prototype.toString=function(i1){if(i1===a&&(i1=10),i1!==10)return N1(this,i1);for(var g1=this.value,u1=g1.length,L1=String(g1[--u1]),B1="0000000",Q1;--u1>=0;)Q1=String(g1[u1]),L1+=B1.slice(Q1.length)+Q1;var Z1=this.sign?"-":"";return Z1+L1},me.prototype.toString=function(i1){return i1===a&&(i1=10),i1!=10?N1(this,i1):String(this.value)},Z.prototype.toJSON=me.prototype.toJSON=function(){return this.toString()},Z.prototype.valueOf=function(){return parseInt(this.toString(),10)},Z.prototype.toJSNumber=Z.prototype.valueOf,me.prototype.valueOf=function(){return this.value},me.prototype.toJSNumber=me.prototype.valueOf;function J1(i1){if(_e(+i1)){var g1=+i1;if(g1===sr(g1))return new me(g1);throw new Error("Invalid integer: "+i1)}var u1=i1[0]==="-";u1&&(i1=i1.slice(1));var L1=i1.split(/e/i);if(L1.length>2)throw new Error("Invalid integer: "+L1.join("e"));if(L1.length===2){var B1=L1[1];if(B1[0]==="+"&&(B1=B1.slice(1)),B1=+B1,B1!==sr(B1)||!_e(B1))throw new Error("Invalid integer: "+B1+" is not a valid exponent.");var Q1=L1[0],Z1=Q1.indexOf(".");if(Z1>=0&&(B1-=Q1.length-Z1-1,Q1=Q1.slice(0,Z1)+Q1.slice(Z1+1)),B1<0)throw new Error("Cannot include negative exponent part for integers");Q1+=new Array(B1+1).join("0"),i1=Q1}var A1=/^([0-9][0-9]*)$/.test(i1);if(!A1)throw new Error("Invalid integer: "+i1);for(var a2=[],v2=i1.length,A2=u,l2=v2-A2;v2>0;)a2.push(+i1.slice(l2,v2)),l2-=A2,l2<0&&(l2=0),v2-=A2;return wt(a2),new Z(a2,u1)}function E2(i1){if(_e(i1)){if(i1!==sr(i1))throw new Error(i1+" is not an integer.");return new me(i1)}return J1(i1.toString())}function n2(i1){return typeof i1=="number"?E2(i1):typeof i1=="string"?J1(i1):i1}for(var D1=0;D1<1e3;D1++)P[D1]=new me(D1),D1>0&&(P[-D1]=new me(-D1));return P.one=P[1],P.zero=P[0],P.minusOne=P[-1],P.max=N2,P.min=V2,P.gcd=q2,P.lcm=B2,P.isInstance=function(i1){return i1 instanceof Z||i1 instanceof me},P.randBetween=K2,P.fromArray=function(i1,g1,u1){return E1(i1.map(n2),n2(g1||10),u1)},P}();return t.hasOwnProperty("exports")&&(t.exports=r),r}(),bigDec:function(r){var a,l,u,d,g=9e15,E=1e9,P="0123456789abcdef",Z="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",me="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",_e={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-g,maxE:g,crypto:!1},He=!0,Xe="[DecimalError] ",wt=Xe+"Invalid argument: ",Do=Xe+"Precision limit exceeded",sr=Xe+"crypto unavailable",Ko=Math.floor,Bs=Math.pow,th=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,pf=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,_h=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,cf=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,df=1e7,uf=7,li=Z.length-1,Vc=me.length-1,Rs={name:"[object Decimal]"};function qc(Ym){var o1,a1,l1,w1=Ym.length-1,h1="",C1=Ym[0];if(w1>0){for(h1+=C1,o1=1;o1<w1;o1++)l1=Ym[o1]+"",(a1=uf-l1.length)&&(h1+=V1(a1)),h1+=l1;C1=Ym[o1],(a1=uf-(l1=C1+"").length)&&(h1+=V1(a1))}else if(C1===0)return"0";for(;C1%10==0;)C1/=10;return h1+C1}function Qp(Ym,o1,a1){if(Ym!==~~Ym||Ym<o1||Ym>a1)throw Error(wt+Ym)}function n1(Ym,o1,a1,l1){var w1,h1,C1,q1;for(h1=Ym[0];h1>=10;h1/=10)--o1;return--o1<0?(o1+=uf,w1=0):(w1=Math.ceil((o1+1)/uf),o1%=uf),h1=Bs(10,uf-o1),q1=Ym[w1]%h1|0,l1==null?o1<3?(o1==0?q1=q1/100|0:o1==1&&(q1=q1/10|0),C1=a1<4&&q1==99999||a1>3&&q1==49999||q1==5e4||q1==0):C1=(a1<4&&q1+1==h1||a1>3&&q1+1==h1/2)&&(Ym[w1+1]/h1/100|0)==Bs(10,o1-2)-1||(q1==h1/2||q1==0)&&(Ym[w1+1]/h1/100|0)==0:o1<4?(o1==0?q1=q1/1e3|0:o1==1?q1=q1/100|0:o1==2&&(q1=q1/10|0),C1=(l1||a1<4)&&q1==9999||!l1&&a1>3&&q1==4999):C1=((l1||a1<4)&&q1+1==h1||!l1&&a1>3&&q1+1==h1/2)&&(Ym[w1+1]/h1/1e3|0)==Bs(10,o1-3)-1,C1}function wh(Ym,o1,a1){for(var l1,w1,h1=[0],C1=0,q1=Ym.length;C1<q1;){for(w1=h1.length;w1--;)h1[w1]*=o1;for(h1[0]+=P.indexOf(Ym.charAt(C1++)),l1=0;l1<h1.length;l1++)h1[l1]>a1-1&&(h1[l1+1]===void 0&&(h1[l1+1]=0),h1[l1+1]+=h1[l1]/a1|0,h1[l1]%=a1)}return h1.reverse()}Rs.absoluteValue=Rs.abs=function(){var Ym=new this.constructor(this);return Ym.s<0&&(Ym.s=1),yh(Ym)},Rs.ceil=function(){return yh(new this.constructor(this),this.e+1,2)},Rs.comparedTo=Rs.cmp=function(Ym){var o1,a1,l1,w1,h1=this,C1=h1.d,q1=(Ym=new h1.constructor(Ym)).d,$1=h1.s,W1=Ym.s;if(!C1||!q1)return $1&&W1?$1!==W1?$1:C1===q1?0:!C1^$1<0?1:-1:NaN;if(!C1[0]||!q1[0])return C1[0]?$1:q1[0]?-W1:0;if($1!==W1)return $1;if(h1.e!==Ym.e)return h1.e>Ym.e^$1<0?1:-1;for(o1=0,a1=(l1=C1.length)<(w1=q1.length)?l1:w1;o1<a1;++o1)if(C1[o1]!==q1[o1])return C1[o1]>q1[o1]^$1<0?1:-1;return l1===w1?0:l1>w1^$1<0?1:-1},Rs.cosine=Rs.cos=function(){var Ym,o1,a1=this,l1=a1.constructor;return a1.d?a1.d[0]?(Ym=l1.precision,o1=l1.rounding,l1.precision=Ym+Math.max(a1.e,a1.sd())+uf,l1.rounding=1,a1=function(w1,h1){var C1,q1,$1=h1.d.length;$1<32?(C1=Math.ceil($1/3),q1=(1/B2(4,C1)).toString()):(C1=16,q1="2.3283064365386962890625e-10"),w1.precision+=C1,h1=q2(w1,1,h1.times(q1),new w1(1));for(var W1=C1;W1--;){var Y1=h1.times(h1);h1=Y1.times(Y1).minus(Y1).times(8).plus(1)}return w1.precision-=C1,h1}(l1,K2(l1,a1)),l1.precision=Ym,l1.rounding=o1,yh(d==2||d==3?a1.neg():a1,Ym,o1,!0)):new l1(1):new l1(NaN)},Rs.cubeRoot=Rs.cbrt=function(){var Ym,o1,a1,l1,w1,h1,C1,q1,$1,W1,Y1=this,_2=Y1.constructor;if(!Y1.isFinite()||Y1.isZero())return new _2(Y1);for(He=!1,(h1=Y1.s*Bs(Y1.s*Y1,.3333333333333333))&&Math.abs(h1)!=1/0?l1=new _2(h1.toString()):(a1=qc(Y1.d),(h1=((Ym=Y1.e)-a1.length+1)%3)&&(a1+=h1==1||h1==-2?"0":"00"),h1=Bs(a1,.3333333333333333),Ym=Ko((Ym+1)/3)-(Ym%3==(Ym<0?-1:2)),(l1=new _2(a1=h1==1/0?"5e"+Ym:(a1=h1.toExponential()).slice(0,a1.indexOf("e")+1)+Ym)).s=Y1.s),C1=(Ym=_2.precision)+3;;)if(W1=($1=(q1=l1).times(q1).times(q1)).plus(Y1),l1=gf(W1.plus(Y1).times(q1),W1.plus($1),C1+2,1),qc(q1.d).slice(0,C1)===(a1=qc(l1.d)).slice(0,C1)){if((a1=a1.slice(C1-3,C1+1))!="9999"&&(w1||a1!="4999")){+a1&&(+a1.slice(1)||a1.charAt(0)!="5")||(yh(l1,Ym+1,1),o1=!l1.times(l1).times(l1).eq(Y1));break}if(!w1&&(yh(q1,Ym+1,0),q1.times(q1).times(q1).eq(Y1))){l1=q1;break}C1+=4,w1=1}return He=!0,yh(l1,Ym,_2.rounding,o1)},Rs.decimalPlaces=Rs.dp=function(){var Ym,o1=this.d,a1=NaN;if(o1){if(a1=((Ym=o1.length-1)-Ko(this.e/uf))*uf,Ym=o1[Ym])for(;Ym%10==0;Ym/=10)a1--;a1<0&&(a1=0)}return a1},Rs.dividedBy=Rs.div=function(Ym){return gf(this,new this.constructor(Ym))},Rs.dividedToIntegerBy=Rs.divToInt=function(Ym){var o1=this.constructor;return yh(gf(this,new o1(Ym),0,1,1),o1.precision,o1.rounding)},Rs.equals=Rs.eq=function(Ym){return this.cmp(Ym)===0},Rs.floor=function(){return yh(new this.constructor(this),this.e+1,3)},Rs.greaterThan=Rs.gt=function(Ym){return this.cmp(Ym)>0},Rs.greaterThanOrEqualTo=Rs.gte=function(Ym){var o1=this.cmp(Ym);return o1==1||o1===0},Rs.hyperbolicCosine=Rs.cosh=function(){var Ym,o1,a1,l1,w1,h1=this,C1=h1.constructor,q1=new C1(1);if(!h1.isFinite())return new C1(h1.s?1/0:NaN);if(h1.isZero())return q1;a1=C1.precision,l1=C1.rounding,C1.precision=a1+Math.max(h1.e,h1.sd())+4,C1.rounding=1,(w1=h1.d.length)<32?o1=(1/B2(4,Ym=Math.ceil(w1/3))).toString():(Ym=16,o1="2.3283064365386962890625e-10"),h1=q2(C1,1,h1.times(o1),new C1(1),!0);for(var $1,W1=Ym,Y1=new C1(8);W1--;)$1=h1.times(h1),h1=q1.minus($1.times(Y1.minus($1.times(Y1))));return yh(h1,C1.precision=a1,C1.rounding=l1,!0)},Rs.hyperbolicSine=Rs.sinh=function(){var Ym,o1,a1,l1,w1=this,h1=w1.constructor;if(!w1.isFinite()||w1.isZero())return new h1(w1);if(o1=h1.precision,a1=h1.rounding,h1.precision=o1+Math.max(w1.e,w1.sd())+4,h1.rounding=1,(l1=w1.d.length)<3)w1=q2(h1,2,w1,w1,!0);else{Ym=(Ym=1.4*Math.sqrt(l1))>16?16:0|Ym,w1=q2(h1,2,w1=w1.times(1/B2(5,Ym)),w1,!0);for(var C1,q1=new h1(5),$1=new h1(16),W1=new h1(20);Ym--;)C1=w1.times(w1),w1=w1.times(q1.plus(C1.times($1.times(C1).plus(W1))))}return h1.precision=o1,h1.rounding=a1,yh(w1,o1,a1,!0)},Rs.hyperbolicTangent=Rs.tanh=function(){var Ym,o1,a1=this,l1=a1.constructor;return a1.isFinite()?a1.isZero()?new l1(a1):(Ym=l1.precision,o1=l1.rounding,l1.precision=Ym+7,l1.rounding=1,gf(a1.sinh(),a1.cosh(),l1.precision=Ym,l1.rounding=o1)):new l1(a1.s)},Rs.inverseCosine=Rs.acos=function(){var Ym,o1=this,a1=o1.constructor,l1=o1.abs().cmp(1),w1=a1.precision,h1=a1.rounding;return l1!==-1?l1===0?o1.isNeg()?b1(a1,w1,h1):new a1(0):new a1(NaN):o1.isZero()?b1(a1,w1+4,h1).times(.5):(a1.precision=w1+6,a1.rounding=1,o1=o1.asin(),Ym=b1(a1,w1+4,h1).times(.5),a1.precision=w1,a1.rounding=h1,Ym.minus(o1))},Rs.inverseHyperbolicCosine=Rs.acosh=function(){var Ym,o1,a1=this,l1=a1.constructor;return a1.lte(1)?new l1(a1.eq(1)?0:NaN):a1.isFinite()?(Ym=l1.precision,o1=l1.rounding,l1.precision=Ym+Math.max(Math.abs(a1.e),a1.sd())+4,l1.rounding=1,He=!1,a1=a1.times(a1).minus(1).sqrt().plus(a1),He=!0,l1.precision=Ym,l1.rounding=o1,a1.ln()):new l1(a1)},Rs.inverseHyperbolicSine=Rs.asinh=function(){var Ym,o1,a1=this,l1=a1.constructor;return!a1.isFinite()||a1.isZero()?new l1(a1):(Ym=l1.precision,o1=l1.rounding,l1.precision=Ym+2*Math.max(Math.abs(a1.e),a1.sd())+6,l1.rounding=1,He=!1,a1=a1.times(a1).plus(1).sqrt().plus(a1),He=!0,l1.precision=Ym,l1.rounding=o1,a1.ln())},Rs.inverseHyperbolicTangent=Rs.atanh=function(){var Ym,o1,a1,l1,w1=this,h1=w1.constructor;return w1.isFinite()?w1.e>=0?new h1(w1.abs().eq(1)?w1.s/0:w1.isZero()?w1:NaN):(Ym=h1.precision,o1=h1.rounding,l1=w1.sd(),Math.max(l1,Ym)<2*-w1.e-1?yh(new h1(w1),Ym,o1,!0):(h1.precision=a1=l1-w1.e,w1=gf(w1.plus(1),new h1(1).minus(w1),a1+Ym,1),h1.precision=Ym+4,h1.rounding=1,w1=w1.ln(),h1.precision=Ym,h1.rounding=o1,w1.times(.5))):new h1(NaN)},Rs.inverseSine=Rs.asin=function(){var Ym,o1,a1,l1,w1=this,h1=w1.constructor;return w1.isZero()?new h1(w1):(o1=w1.abs().cmp(1),a1=h1.precision,l1=h1.rounding,o1!==-1?o1===0?((Ym=b1(h1,a1+4,l1).times(.5)).s=w1.s,Ym):new h1(NaN):(h1.precision=a1+6,h1.rounding=1,w1=w1.div(new h1(1).minus(w1.times(w1)).sqrt().plus(1)).atan(),h1.precision=a1,h1.rounding=l1,w1.times(2)))},Rs.inverseTangent=Rs.atan=function(){var Ym,o1,a1,l1,w1,h1,C1,q1,$1,W1=this,Y1=W1.constructor,_2=Y1.precision,O2=Y1.rounding;if(W1.isFinite()){if(W1.isZero())return new Y1(W1);if(W1.abs().eq(1)&&_2+4<=Vc)return(C1=b1(Y1,_2+4,O2).times(.25)).s=W1.s,C1}else{if(!W1.s)return new Y1(NaN);if(_2+4<=Vc)return(C1=b1(Y1,_2+4,O2).times(.5)).s=W1.s,C1}for(Y1.precision=q1=_2+10,Y1.rounding=1,Ym=a1=Math.min(28,q1/uf+2|0);Ym;--Ym)W1=W1.div(W1.times(W1).plus(1).sqrt().plus(1));for(He=!1,o1=Math.ceil(q1/uf),l1=1,$1=W1.times(W1),C1=new Y1(W1),w1=W1;Ym!==-1;)if(w1=w1.times($1),h1=C1.minus(w1.div(l1+=2)),w1=w1.times($1),(C1=h1.plus(w1.div(l1+=2))).d[o1]!==void 0)for(Ym=o1;C1.d[Ym]===h1.d[Ym]&&Ym--;);return a1&&(C1=C1.times(2<<a1-1)),He=!0,yh(C1,Y1.precision=_2,Y1.rounding=O2,!0)},Rs.isFinite=function(){return!!this.d},Rs.isInteger=Rs.isInt=function(){return!!this.d&&Ko(this.e/uf)>this.d.length-2},Rs.isNaN=function(){return!this.s},Rs.isNegative=Rs.isNeg=function(){return this.s<0},Rs.isPositive=Rs.isPos=function(){return this.s>0},Rs.isZero=function(){return!!this.d&&this.d[0]===0},Rs.lessThan=Rs.lt=function(Ym){return this.cmp(Ym)<0},Rs.lessThanOrEqualTo=Rs.lte=function(Ym){return this.cmp(Ym)<1},Rs.logarithm=Rs.log=function(Ym){var o1,a1,l1,w1,h1,C1,q1,$1,W1=this.constructor,Y1=W1.precision,_2=W1.rounding;if(Ym==null)Ym=new W1(10),o1=!0;else{if(a1=(Ym=new W1(Ym)).d,Ym.s<0||!a1||!a1[0]||Ym.eq(1))return new W1(NaN);o1=Ym.eq(10)}if(a1=this.d,this.s<0||!a1||!a1[0]||this.eq(1))return new W1(a1&&!a1[0]?-1/0:this.s!=1?NaN:a1?0:1/0);if(o1)if(a1.length>1)h1=!0;else{for(w1=a1[0];w1%10==0;)w1/=10;h1=w1!==1}if(He=!1,C1=X1(this,q1=Y1+5),l1=o1?s1(W1,q1+10):X1(Ym,q1),n1(($1=gf(C1,l1,q1,1)).d,w1=Y1,_2))do if(C1=X1(this,q1+=10),l1=o1?s1(W1,q1+10):X1(Ym,q1),$1=gf(C1,l1,q1,1),!h1){+qc($1.d).slice(w1+1,w1+15)+1==1e14&&($1=yh($1,Y1+1,0));break}while(n1($1.d,w1+=10,_2));return He=!0,yh($1,Y1,_2)},Rs.minus=Rs.sub=function(Ym){var o1,a1,l1,w1,h1,C1,q1,$1,W1,Y1,_2,O2,u4=this,p4=u4.constructor;if(Ym=new p4(Ym),!u4.d||!Ym.d)return u4.s&&Ym.s?u4.d?Ym.s=-Ym.s:Ym=new p4(Ym.d||u4.s!==Ym.s?u4:NaN):Ym=new p4(NaN),Ym;if(u4.s!=Ym.s)return Ym.s=-Ym.s,u4.plus(Ym);if(W1=u4.d,O2=Ym.d,q1=p4.precision,$1=p4.rounding,!W1[0]||!O2[0]){if(O2[0])Ym.s=-Ym.s;else{if(!W1[0])return new p4($1===3?-0:0);Ym=new p4(u4)}return He?yh(Ym,q1,$1):Ym}if(a1=Ko(Ym.e/uf),Y1=Ko(u4.e/uf),W1=W1.slice(),h1=Y1-a1){for((_2=h1<0)?(o1=W1,h1=-h1,C1=O2.length):(o1=O2,a1=Y1,C1=W1.length),h1>(l1=Math.max(Math.ceil(q1/uf),C1)+2)&&(h1=l1,o1.length=1),o1.reverse(),l1=h1;l1--;)o1.push(0);o1.reverse()}else{for((_2=(l1=W1.length)<(C1=O2.length))&&(C1=l1),l1=0;l1<C1;l1++)if(W1[l1]!=O2[l1]){_2=W1[l1]<O2[l1];break}h1=0}for(_2&&(o1=W1,W1=O2,O2=o1,Ym.s=-Ym.s),C1=W1.length,l1=O2.length-C1;l1>0;--l1)W1[C1++]=0;for(l1=O2.length;l1>h1;){if(W1[--l1]<O2[l1]){for(w1=l1;w1&&W1[--w1]===0;)W1[w1]=df-1;--W1[w1],W1[l1]+=df}W1[l1]-=O2[l1]}for(;W1[--C1]===0;)W1.pop();for(;W1[0]===0;W1.shift())--a1;return W1[0]?(Ym.d=W1,Ym.e=e1(W1,a1),He?yh(Ym,q1,$1):Ym):new p4($1===3?-0:0)},Rs.modulo=Rs.mod=function(Ym){var o1,a1=this,l1=a1.constructor;return Ym=new l1(Ym),!a1.d||!Ym.s||Ym.d&&!Ym.d[0]?new l1(NaN):!Ym.d||a1.d&&!a1.d[0]?yh(new l1(a1),l1.precision,l1.rounding):(He=!1,l1.modulo==9?(o1=gf(a1,Ym.abs(),0,3,1)).s*=Ym.s:o1=gf(a1,Ym,0,l1.modulo,1),o1=o1.times(Ym),He=!0,a1.minus(o1))},Rs.naturalExponential=Rs.exp=function(){return F2(this)},Rs.naturalLogarithm=Rs.ln=function(){return X1(this)},Rs.negated=Rs.neg=function(){var Ym=new this.constructor(this);return Ym.s=-Ym.s,yh(Ym)},Rs.plus=Rs.add=function(Ym){var o1,a1,l1,w1,h1,C1,q1,$1,W1,Y1,_2=this,O2=_2.constructor;if(Ym=new O2(Ym),!_2.d||!Ym.d)return _2.s&&Ym.s?_2.d||(Ym=new O2(Ym.d||_2.s===Ym.s?_2:NaN)):Ym=new O2(NaN),Ym;if(_2.s!=Ym.s)return Ym.s=-Ym.s,_2.minus(Ym);if(W1=_2.d,Y1=Ym.d,q1=O2.precision,$1=O2.rounding,!W1[0]||!Y1[0])return Y1[0]||(Ym=new O2(_2)),He?yh(Ym,q1,$1):Ym;if(h1=Ko(_2.e/uf),l1=Ko(Ym.e/uf),W1=W1.slice(),w1=h1-l1){for(w1<0?(a1=W1,w1=-w1,C1=Y1.length):(a1=Y1,l1=h1,C1=W1.length),w1>(C1=(h1=Math.ceil(q1/uf))>C1?h1+1:C1+1)&&(w1=C1,a1.length=1),a1.reverse();w1--;)a1.push(0);a1.reverse()}for((C1=W1.length)-(w1=Y1.length)<0&&(w1=C1,a1=Y1,Y1=W1,W1=a1),o1=0;w1;)o1=(W1[--w1]=W1[w1]+Y1[w1]+o1)/df|0,W1[w1]%=df;for(o1&&(W1.unshift(o1),++l1),C1=W1.length;W1[--C1]==0;)W1.pop();return Ym.d=W1,Ym.e=e1(W1,l1),He?yh(Ym,q1,$1):Ym},Rs.precision=Rs.sd=function(Ym){var o1,a1=this;if(Ym!==void 0&&Ym!==!!Ym&&Ym!==1&&Ym!==0)throw Error(wt+Ym);return a1.d?(o1=_1(a1.d),Ym&&a1.e+1>o1&&(o1=a1.e+1)):o1=NaN,o1},Rs.round=function(){var Ym=this,o1=Ym.constructor;return yh(new o1(Ym),Ym.e+1,o1.rounding)},Rs.sine=Rs.sin=function(){var Ym,o1,a1=this,l1=a1.constructor;return a1.isFinite()?a1.isZero()?new l1(a1):(Ym=l1.precision,o1=l1.rounding,l1.precision=Ym+Math.max(a1.e,a1.sd())+uf,l1.rounding=1,a1=function(w1,h1){var C1,q1=h1.d.length;if(q1<3)return q2(w1,2,h1,h1);C1=(C1=1.4*Math.sqrt(q1))>16?16:0|C1,h1=h1.times(1/B2(5,C1)),h1=q2(w1,2,h1,h1);for(var $1,W1=new w1(5),Y1=new w1(16),_2=new w1(20);C1--;)$1=h1.times(h1),h1=h1.times(W1.plus($1.times(Y1.times($1).minus(_2))));return h1}(l1,K2(l1,a1)),l1.precision=Ym,l1.rounding=o1,yh(d>2?a1.neg():a1,Ym,o1,!0)):new l1(NaN)},Rs.squareRoot=Rs.sqrt=function(){var Ym,o1,a1,l1,w1,h1,C1=this,q1=C1.d,$1=C1.e,W1=C1.s,Y1=C1.constructor;if(W1!==1||!q1||!q1[0])return new Y1(!W1||W1<0&&(!q1||q1[0])?NaN:q1?C1:1/0);for(He=!1,(W1=Math.sqrt(+C1))==0||W1==1/0?(((o1=qc(q1)).length+$1)%2==0&&(o1+="0"),W1=Math.sqrt(o1),$1=Ko(($1+1)/2)-($1<0||$1%2),l1=new Y1(o1=W1==1/0?"5e"+$1:(o1=W1.toExponential()).slice(0,o1.indexOf("e")+1)+$1)):l1=new Y1(W1.toString()),a1=($1=Y1.precision)+3;;)if(l1=(h1=l1).plus(gf(C1,h1,a1+2,1)).times(.5),qc(h1.d).slice(0,a1)===(o1=qc(l1.d)).slice(0,a1)){if((o1=o1.slice(a1-3,a1+1))!="9999"&&(w1||o1!="4999")){+o1&&(+o1.slice(1)||o1.charAt(0)!="5")||(yh(l1,$1+1,1),Ym=!l1.times(l1).eq(C1));break}if(!w1&&(yh(h1,$1+1,0),h1.times(h1).eq(C1))){l1=h1;break}a1+=4,w1=1}return He=!0,yh(l1,$1,Y1.rounding,Ym)},Rs.tangent=Rs.tan=function(){var Ym,o1,a1=this,l1=a1.constructor;return a1.isFinite()?a1.isZero()?new l1(a1):(Ym=l1.precision,o1=l1.rounding,l1.precision=Ym+10,l1.rounding=1,(a1=a1.sin()).s=1,a1=gf(a1,new l1(1).minus(a1.times(a1)).sqrt(),Ym+10,0),l1.precision=Ym,l1.rounding=o1,yh(d==2||d==4?a1.neg():a1,Ym,o1,!0)):new l1(NaN)},Rs.times=Rs.mul=function(Ym){var o1,a1,l1,w1,h1,C1,q1,$1,W1,Y1=this,_2=Y1.constructor,O2=Y1.d,u4=(Ym=new _2(Ym)).d;if(Ym.s*=Y1.s,!(O2&&O2[0]&&u4&&u4[0]))return new _2(!Ym.s||O2&&!O2[0]&&!u4||u4&&!u4[0]&&!O2?NaN:O2&&u4?0*Ym.s:Ym.s/0);for(a1=Ko(Y1.e/uf)+Ko(Ym.e/uf),($1=O2.length)<(W1=u4.length)&&(h1=O2,O2=u4,u4=h1,C1=$1,$1=W1,W1=C1),h1=[],l1=C1=$1+W1;l1--;)h1.push(0);for(l1=W1;--l1>=0;){for(o1=0,w1=$1+l1;w1>l1;)q1=h1[w1]+u4[l1]*O2[w1-l1-1]+o1,h1[w1--]=q1%df|0,o1=q1/df|0;h1[w1]=(h1[w1]+o1)%df|0}for(;!h1[--C1];)h1.pop();return o1?++a1:h1.shift(),Ym.d=h1,Ym.e=e1(h1,a1),He?yh(Ym,_2.precision,_2.rounding):Ym},Rs.toBinary=function(Ym,o1){return S2(this,2,Ym,o1)},Rs.toDecimalPlaces=Rs.toDP=function(Ym,o1){var a1=this,l1=a1.constructor;return a1=new l1(a1),Ym===void 0?a1:(Qp(Ym,0,E),o1===void 0?o1=l1.rounding:Qp(o1,0,8),yh(a1,Ym+a1.e+1,o1))},Rs.toExponential=function(Ym,o1){var a1,l1=this,w1=l1.constructor;return Ym===void 0?a1=ff(l1,!0):(Qp(Ym,0,E),o1===void 0?o1=w1.rounding:Qp(o1,0,8),a1=ff(l1=yh(new w1(l1),Ym+1,o1),!0,Ym+1)),l1.isNeg()&&!l1.isZero()?"-"+a1:a1},Rs.toFixed=function(Ym,o1){var a1,l1,w1=this,h1=w1.constructor;return Ym===void 0?a1=ff(w1):(Qp(Ym,0,E),o1===void 0?o1=h1.rounding:Qp(o1,0,8),a1=ff(l1=yh(new h1(w1),Ym+w1.e+1,o1),!1,Ym+l1.e+1)),w1.isNeg()&&!w1.isZero()?"-"+a1:a1},Rs.toFraction=function(Ym){var o1,a1,l1,w1,h1,C1,q1,$1,W1,Y1,_2,O2,u4=this,p4=u4.d,l4=u4.constructor;if(!p4)return new l4(u4);if(W1=a1=new l4(1),l1=$1=new l4(0),C1=(h1=(o1=new l4(l1)).e=_1(p4)-u4.e-1)%uf,o1.d[0]=Bs(10,C1<0?uf+C1:C1),Ym==null)Ym=h1>0?o1:W1;else{if(!(q1=new l4(Ym)).isInt()||q1.lt(W1))throw Error(wt+q1);Ym=q1.gt(o1)?h1>0?o1:W1:q1}for(He=!1,q1=new l4(qc(p4)),Y1=l4.precision,l4.precision=h1=p4.length*uf*2;_2=gf(q1,o1,0,1,1),(w1=a1.plus(_2.times(l1))).cmp(Ym)!=1;)a1=l1,l1=w1,w1=W1,W1=$1.plus(_2.times(w1)),$1=w1,w1=o1,o1=q1.minus(_2.times(w1)),q1=w1;return w1=gf(Ym.minus(a1),l1,0,1,1),$1=$1.plus(w1.times(W1)),a1=a1.plus(w1.times(l1)),$1.s=W1.s=u4.s,O2=gf(W1,l1,h1,1).minus(u4).abs().cmp(gf($1,a1,h1,1).minus(u4).abs())<1?[W1,l1]:[$1,a1],l4.precision=Y1,He=!0,O2},Rs.toHexadecimal=Rs.toHex=function(Ym,o1){return S2(this,16,Ym,o1)},Rs.toNearest=function(Ym,o1){var a1=this,l1=a1.constructor;if(a1=new l1(a1),Ym==null){if(!a1.d)return a1;Ym=new l1(1),o1=l1.rounding}else{if(Ym=new l1(Ym),o1===void 0?o1=l1.rounding:Qp(o1,0,8),!a1.d)return Ym.s?a1:Ym;if(!Ym.d)return Ym.s&&(Ym.s=a1.s),Ym}return Ym.d[0]?(He=!1,a1=gf(a1,Ym,0,o1,1).times(Ym),He=!0,yh(a1)):(Ym.s=a1.s,a1=Ym),a1},Rs.toNumber=function(){return+this},Rs.toOctal=function(Ym,o1){return S2(this,8,Ym,o1)},Rs.toPower=Rs.pow=function(Ym){var o1,a1,l1,w1,h1,C1,q1=this,$1=q1.constructor,W1=+(Ym=new $1(Ym));if(!(q1.d&&Ym.d&&q1.d[0]&&Ym.d[0]))return new $1(Bs(+q1,W1));if((q1=new $1(q1)).eq(1))return q1;if(l1=$1.precision,h1=$1.rounding,Ym.eq(1))return yh(q1,l1,h1);if((o1=Ko(Ym.e/uf))>=Ym.d.length-1&&(a1=W1<0?-W1:W1)<=9007199254740991)return w1=I1($1,q1,a1,l1),Ym.s<0?new $1(1).div(w1):yh(w1,l1,h1);if((C1=q1.s)<0){if(o1<Ym.d.length-1)return new $1(NaN);if((1&Ym.d[o1])==0&&(C1=1),q1.e==0&&q1.d[0]==1&&q1.d.length==1)return q1.s=C1,q1}return(o1=(a1=Bs(+q1,W1))!=0&&isFinite(a1)?new $1(a1+"").e:Ko(W1*(Math.log("0."+qc(q1.d))/Math.LN10+q1.e+1)))>$1.maxE+1||o1<$1.minE-1?new $1(o1>0?C1/0:0):(He=!1,$1.rounding=q1.s=1,a1=Math.min(12,(o1+"").length),(w1=F2(Ym.times(X1(q1,l1+a1)),l1)).d&&n1((w1=yh(w1,l1+5,1)).d,l1,h1)&&(o1=l1+10,+qc((w1=yh(F2(Ym.times(X1(q1,o1+a1)),o1),o1+5,1)).d).slice(l1+1,l1+15)+1==1e14&&(w1=yh(w1,l1+1,0))),w1.s=C1,He=!0,$1.rounding=h1,yh(w1,l1,h1))},Rs.toPrecision=function(Ym,o1){var a1,l1=this,w1=l1.constructor;return Ym===void 0?a1=ff(l1,l1.e<=w1.toExpNeg||l1.e>=w1.toExpPos):(Qp(Ym,1,E),o1===void 0?o1=w1.rounding:Qp(o1,0,8),a1=ff(l1=yh(new w1(l1),Ym,o1),Ym<=l1.e||l1.e<=w1.toExpNeg,Ym)),l1.isNeg()&&!l1.isZero()?"-"+a1:a1},Rs.toSignificantDigits=Rs.toSD=function(Ym,o1){var a1=this.constructor;return Ym===void 0?(Ym=a1.precision,o1=a1.rounding):(Qp(Ym,1,E),o1===void 0?o1=a1.rounding:Qp(o1,0,8)),yh(new a1(this),Ym,o1)},Rs.toString=function(){var Ym=this,o1=Ym.constructor,a1=ff(Ym,Ym.e<=o1.toExpNeg||Ym.e>=o1.toExpPos);return Ym.isNeg()&&!Ym.isZero()?"-"+a1:a1},Rs.truncated=Rs.trunc=function(){return yh(new this.constructor(this),this.e+1,1)},Rs.valueOf=Rs.toJSON=function(){var Ym=this,o1=Ym.constructor,a1=ff(Ym,Ym.e<=o1.toExpNeg||Ym.e>=o1.toExpPos);return Ym.isNeg()?"-"+a1:a1};var gf=function(){function Ym(l1,w1,h1){var C1,q1=0,$1=l1.length;for(l1=l1.slice();$1--;)C1=l1[$1]*w1+q1,l1[$1]=C1%h1|0,q1=C1/h1|0;return q1&&l1.unshift(q1),l1}function o1(l1,w1,h1,C1){var q1,$1;if(h1!=C1)$1=h1>C1?1:-1;else for(q1=$1=0;q1<h1;q1++)if(l1[q1]!=w1[q1]){$1=l1[q1]>w1[q1]?1:-1;break}return $1}function a1(l1,w1,h1,C1){for(var q1=0;h1--;)l1[h1]-=q1,q1=l1[h1]<w1[h1]?1:0,l1[h1]=q1*C1+l1[h1]-w1[h1];for(;!l1[0]&&l1.length>1;)l1.shift()}return function(l1,w1,h1,C1,q1,$1){var W1,Y1,_2,O2,u4,p4,l4,A4,h3,s3,y4,r4,z4,e4,O4,C4,H2,x1,A3,V6,K4=l1.constructor,c3=l1.s==w1.s?1:-1,b4=l1.d,Y4=w1.d;if(!(b4&&b4[0]&&Y4&&Y4[0]))return new K4(l1.s&&w1.s&&(b4?!Y4||b4[0]!=Y4[0]:Y4)?b4&&b4[0]==0||!Y4?0*c3:c3/0:NaN);for($1?(u4=1,Y1=l1.e-w1.e):($1=df,u4=uf,Y1=Ko(l1.e/u4)-Ko(w1.e/u4)),A3=Y4.length,H2=b4.length,s3=(h3=new K4(c3)).d=[],_2=0;Y4[_2]==(b4[_2]||0);_2++);if(Y4[_2]>(b4[_2]||0)&&Y1--,h1==null?(e4=h1=K4.precision,C1=K4.rounding):e4=q1?h1+(l1.e-w1.e)+1:h1,e4<0)s3.push(1),p4=!0;else{if(e4=e4/u4+2|0,_2=0,A3==1){for(O2=0,Y4=Y4[0],e4++;(_2<H2||O2)&&e4--;_2++)O4=O2*$1+(b4[_2]||0),s3[_2]=O4/Y4|0,O2=O4%Y4|0;p4=O2||_2<H2}else{for((O2=$1/(Y4[0]+1)|0)>1&&(Y4=Ym(Y4,O2,$1),b4=Ym(b4,O2,$1),A3=Y4.length,H2=b4.length),C4=A3,r4=(y4=b4.slice(0,A3)).length;r4<A3;)y4[r4++]=0;(V6=Y4.slice()).unshift(0),x1=Y4[0],Y4[1]>=$1/2&&++x1;do O2=0,(W1=o1(Y4,y4,A3,r4))<0?(z4=y4[0],A3!=r4&&(z4=z4*$1+(y4[1]||0)),(O2=z4/x1|0)>1?(O2>=$1&&(O2=$1-1),(W1=o1(l4=Ym(Y4,O2,$1),y4,A4=l4.length,r4=y4.length))==1&&(O2--,a1(l4,A3<A4?V6:Y4,A4,$1))):(O2==0&&(W1=O2=1),l4=Y4.slice()),(A4=l4.length)<r4&&l4.unshift(0),a1(y4,l4,r4,$1),W1==-1&&(W1=o1(Y4,y4,A3,r4=y4.length))<1&&(O2++,a1(y4,A3<r4?V6:Y4,r4,$1)),r4=y4.length):W1===0&&(O2++,y4=[0]),s3[_2++]=O2,W1&&y4[0]?y4[r4++]=b4[C4]||0:(y4=[b4[C4]],r4=1);while((C4++<H2||y4[0]!==void 0)&&e4--);p4=y4[0]!==void 0}s3[0]||s3.shift()}if(u4==1)h3.e=Y1,l=p4;else{for(_2=1,O2=s3[0];O2>=10;O2/=10)_2++;h3.e=_2+Y1*u4-1,yh(h3,q1?h1+h3.e+1:h1,C1,p4)}return h3}}();function yh(Ym,o1,a1,l1){var w1,h1,C1,q1,$1,W1,Y1,_2,O2,u4=Ym.constructor;e:if(o1!=null){if(!(_2=Ym.d))return Ym;for(w1=1,q1=_2[0];q1>=10;q1/=10)w1++;if((h1=o1-w1)<0)h1+=uf,C1=o1,$1=(Y1=_2[O2=0])/Bs(10,w1-C1-1)%10|0;else if((O2=Math.ceil((h1+1)/uf))>=(q1=_2.length)){if(!l1)break e;for(;q1++<=O2;)_2.push(0);Y1=$1=0,w1=1,C1=(h1%=uf)-uf+1}else{for(Y1=q1=_2[O2],w1=1;q1>=10;q1/=10)w1++;$1=(C1=(h1%=uf)-uf+w1)<0?0:Y1/Bs(10,w1-C1-1)%10|0}if(l1=l1||o1<0||_2[O2+1]!==void 0||(C1<0?Y1:Y1%Bs(10,w1-C1-1)),W1=a1<4?($1||l1)&&(a1==0||a1==(Ym.s<0?3:2)):$1>5||$1==5&&(a1==4||l1||a1==6&&(h1>0?C1>0?Y1/Bs(10,w1-C1):0:_2[O2-1])%10&1||a1==(Ym.s<0?8:7)),o1<1||!_2[0])return _2.length=0,W1?(o1-=Ym.e+1,_2[0]=Bs(10,(uf-o1%uf)%uf),Ym.e=-o1||0):_2[0]=Ym.e=0,Ym;if(h1==0?(_2.length=O2,q1=1,O2--):(_2.length=O2+1,q1=Bs(10,uf-h1),_2[O2]=C1>0?(Y1/Bs(10,w1-C1)%Bs(10,C1)|0)*q1:0),W1)for(;;){if(O2==0){for(h1=1,C1=_2[0];C1>=10;C1/=10)h1++;for(C1=_2[0]+=q1,q1=1;C1>=10;C1/=10)q1++;h1!=q1&&(Ym.e++,_2[0]==df&&(_2[0]=1));break}if(_2[O2]+=q1,_2[O2]!=df)break;_2[O2--]=0,q1=1}for(h1=_2.length;_2[--h1]===0;)_2.pop()}return He&&(Ym.e>u4.maxE?(Ym.d=null,Ym.e=NaN):Ym.e<u4.minE&&(Ym.e=0,Ym.d=[0])),Ym}function ff(Ym,o1,a1){if(!Ym.isFinite())return W2(Ym);var l1,w1=Ym.e,h1=qc(Ym.d),C1=h1.length;return o1?(a1&&(l1=a1-C1)>0?h1=h1.charAt(0)+"."+h1.slice(1)+V1(l1):C1>1&&(h1=h1.charAt(0)+"."+h1.slice(1)),h1=h1+(Ym.e<0?"e":"e+")+Ym.e):w1<0?(h1="0."+V1(-w1-1)+h1,a1&&(l1=a1-C1)>0&&(h1+=V1(l1))):w1>=C1?(h1+=V1(w1+1-C1),a1&&(l1=a1-w1-1)>0&&(h1=h1+"."+V1(l1))):((l1=w1+1)<C1&&(h1=h1.slice(0,l1)+"."+h1.slice(l1)),a1&&(l1=a1-C1)>0&&(w1+1===C1&&(h1+="."),h1+=V1(l1))),h1}function e1(Ym,o1){var a1=Ym[0];for(o1*=uf;a1>=10;a1/=10)o1++;return o1}function s1(Ym,o1,a1){if(o1>li)throw He=!0,a1&&(Ym.precision=a1),Error(Do);return yh(new Ym(Z),o1,1,!0)}function b1(Ym,o1,a1){if(o1>Vc)throw Error(Do);return yh(new Ym(me),o1,a1,!0)}function _1(Ym){var o1=Ym.length-1,a1=o1*uf+1;if(o1=Ym[o1]){for(;o1%10==0;o1/=10)a1--;for(o1=Ym[0];o1>=10;o1/=10)a1++}return a1}function V1(Ym){for(var o1="";Ym--;)o1+="0";return o1}function I1(Ym,o1,a1,l1){var w1,h1=new Ym(1),C1=Math.ceil(l1/uf+4);for(He=!1;;){if(a1%2&&E1((h1=h1.times(o1)).d,C1)&&(w1=!0),(a1=Ko(a1/2))===0){a1=h1.d.length-1,w1&&h1.d[a1]===0&&++h1.d[a1];break}E1((o1=o1.times(o1)).d,C1)}return He=!0,h1}function i2(Ym){return 1&Ym.d[Ym.d.length-1]}function R2(Ym,o1,a1){for(var l1,w1=new Ym(o1[0]),h1=0;++h1<o1.length;){if(!(l1=new Ym(o1[h1])).s){w1=l1;break}w1[a1](l1)&&(w1=l1)}return w1}function F2(Ym,o1){var a1,l1,w1,h1,C1,q1,$1,W1=0,Y1=0,_2=0,O2=Ym.constructor,u4=O2.rounding,p4=O2.precision;if(!Ym.d||!Ym.d[0]||Ym.e>17)return new O2(Ym.d?Ym.d[0]?Ym.s<0?0:1/0:1:Ym.s?Ym.s<0?0:Ym:NaN);for(o1==null?(He=!1,$1=p4):$1=o1,q1=new O2(.03125);Ym.e>-2;)Ym=Ym.times(q1),_2+=5;for($1+=l1=Math.log(Bs(2,_2))/Math.LN10*2+5|0,a1=h1=C1=new O2(1),O2.precision=$1;;){if(h1=yh(h1.times(Ym),$1,1),a1=a1.times(++Y1),qc((q1=C1.plus(gf(h1,a1,$1,1))).d).slice(0,$1)===qc(C1.d).slice(0,$1)){for(w1=_2;w1--;)C1=yh(C1.times(C1),$1,1);if(o1!=null)return O2.precision=p4,C1;if(!(W1<3&&n1(C1.d,$1-l1,u4,W1)))return yh(C1,O2.precision=p4,u4,He=!0);O2.precision=$1+=10,a1=h1=q1=new O2(1),Y1=0,W1++}C1=q1}}function X1(Ym,o1){var a1,l1,w1,h1,C1,q1,$1,W1,Y1,_2,O2,u4=1,p4=Ym,l4=p4.d,A4=p4.constructor,h3=A4.rounding,s3=A4.precision;if(p4.s<0||!l4||!l4[0]||!p4.e&&l4[0]==1&&l4.length==1)return new A4(l4&&!l4[0]?-1/0:p4.s!=1?NaN:l4?0:p4);if(o1==null?(He=!1,Y1=s3):Y1=o1,A4.precision=Y1+=10,l1=(a1=qc(l4)).charAt(0),!(Math.abs(h1=p4.e)<15e14))return W1=s1(A4,Y1+2,s3).times(h1+""),p4=X1(new A4(l1+"."+a1.slice(1)),Y1-10).plus(W1),A4.precision=s3,o1==null?yh(p4,s3,h3,He=!0):p4;for(;l1<7&&l1!=1||l1==1&&a1.charAt(1)>3;)l1=(a1=qc((p4=p4.times(Ym)).d)).charAt(0),u4++;for(h1=p4.e,l1>1?(p4=new A4("0."+a1),h1++):p4=new A4(l1+"."+a1.slice(1)),_2=p4,$1=C1=p4=gf(p4.minus(1),p4.plus(1),Y1,1),O2=yh(p4.times(p4),Y1,1),w1=3;;){if(C1=yh(C1.times(O2),Y1,1),qc((W1=$1.plus(gf(C1,new A4(w1),Y1,1))).d).slice(0,Y1)===qc($1.d).slice(0,Y1)){if($1=$1.times(2),h1!==0&&($1=$1.plus(s1(A4,Y1+2,s3).times(h1+""))),$1=gf($1,new A4(u4),Y1,1),o1!=null)return A4.precision=s3,$1;if(!n1($1.d,Y1-10,h3,q1))return yh($1,A4.precision=s3,h3,He=!0);A4.precision=Y1+=10,W1=C1=p4=gf(_2.minus(1),_2.plus(1),Y1,1),O2=yh(p4.times(p4),Y1,1),w1=q1=1}$1=W1,w1+=2}}function W2(Ym){return String(Ym.s*Ym.s/0)}function N2(Ym,o1){var a1,l1,w1;for((a1=o1.indexOf("."))>-1&&(o1=o1.replace(".","")),(l1=o1.search(/e/i))>0?(a1<0&&(a1=l1),a1+=+o1.slice(l1+1),o1=o1.substring(0,l1)):a1<0&&(a1=o1.length),l1=0;o1.charCodeAt(l1)===48;l1++);for(w1=o1.length;o1.charCodeAt(w1-1)===48;--w1);if(o1=o1.slice(l1,w1)){if(w1-=l1,Ym.e=a1=a1-l1-1,Ym.d=[],l1=(a1+1)%uf,a1<0&&(l1+=uf),l1<w1){for(l1&&Ym.d.push(+o1.slice(0,l1)),w1-=uf;l1<w1;)Ym.d.push(+o1.slice(l1,l1+=uf));o1=o1.slice(l1),l1=uf-o1.length}else l1-=w1;for(;l1--;)o1+="0";Ym.d.push(+o1),He&&(Ym.e>Ym.constructor.maxE?(Ym.d=null,Ym.e=NaN):Ym.e<Ym.constructor.minE&&(Ym.e=0,Ym.d=[0]))}else Ym.e=0,Ym.d=[0];return Ym}function V2(Ym,o1){var a1,l1,w1,h1,C1,q1,$1,W1,Y1;if(o1==="Infinity"||o1==="NaN")return+o1||(Ym.s=NaN),Ym.e=NaN,Ym.d=null,Ym;if(pf.test(o1))a1=16,o1=o1.toLowerCase();else if(th.test(o1))a1=2;else{if(!_h.test(o1))throw Error(wt+o1);a1=8}for((h1=o1.search(/p/i))>0?($1=+o1.slice(h1+1),o1=o1.substring(2,h1)):o1=o1.slice(2),C1=(h1=o1.indexOf("."))>=0,l1=Ym.constructor,C1&&(h1=(q1=(o1=o1.replace(".","")).length)-h1,w1=I1(l1,new l1(a1),h1,2*h1)),h1=Y1=(W1=wh(o1,a1,df)).length-1;W1[h1]===0;--h1)W1.pop();return h1<0?new l1(0*Ym.s):(Ym.e=e1(W1,Y1),Ym.d=W1,He=!1,C1&&(Ym=gf(Ym,w1,4*q1)),$1&&(Ym=Ym.times(Math.abs($1)<54?Bs(2,$1):a.pow(2,$1))),He=!0,Ym)}function q2(Ym,o1,a1,l1,w1){var h1,C1,q1,$1,W1=Ym.precision,Y1=Math.ceil(W1/uf);for(He=!1,$1=a1.times(a1),q1=new Ym(l1);;){if(C1=gf(q1.times($1),new Ym(o1++*o1++),W1,1),q1=w1?l1.plus(C1):l1.minus(C1),l1=gf(C1.times($1),new Ym(o1++*o1++),W1,1),(C1=q1.plus(l1)).d[Y1]!==void 0){for(h1=Y1;C1.d[h1]===q1.d[h1]&&h1--;);if(h1==-1)break}h1=q1,q1=l1,l1=C1,C1=h1}return He=!0,C1.d.length=Y1+1,C1}function B2(Ym,o1){for(var a1=Ym;--o1;)a1*=Ym;return a1}function K2(Ym,o1){var a1,l1=o1.s<0,w1=b1(Ym,Ym.precision,1),h1=w1.times(.5);if((o1=o1.abs()).lte(h1))return d=l1?4:1,o1;if((a1=o1.divToInt(w1)).isZero())d=l1?3:2;else{if((o1=o1.minus(a1.times(w1))).lte(h1))return d=i2(a1)?l1?2:3:l1?4:1,o1;d=i2(a1)?l1?1:4:l1?3:2}return o1.minus(w1).abs()}function S2(Ym,o1,a1,l1){var w1,h1,C1,q1,$1,W1,Y1,_2,O2,u4=Ym.constructor,p4=a1!==void 0;if(p4?(Qp(a1,1,E),l1===void 0?l1=u4.rounding:Qp(l1,0,8)):(a1=u4.precision,l1=u4.rounding),Ym.isFinite()){for(p4?(w1=2,o1==16?a1=4*a1-3:o1==8&&(a1=3*a1-2)):w1=o1,(C1=(Y1=ff(Ym)).indexOf("."))>=0&&(Y1=Y1.replace(".",""),(O2=new u4(1)).e=Y1.length-C1,O2.d=wh(ff(O2),10,w1),O2.e=O2.d.length),h1=$1=(_2=wh(Y1,10,w1)).length;_2[--$1]==0;)_2.pop();if(_2[0]){if(C1<0?h1--:((Ym=new u4(Ym)).d=_2,Ym.e=h1,_2=(Ym=gf(Ym,O2,a1,l1,0,w1)).d,h1=Ym.e,W1=l),C1=_2[a1],q1=w1/2,W1=W1||_2[a1+1]!==void 0,W1=l1<4?(C1!==void 0||W1)&&(l1===0||l1===(Ym.s<0?3:2)):C1>q1||C1===q1&&(l1===4||W1||l1===6&&1&_2[a1-1]||l1===(Ym.s<0?8:7)),_2.length=a1,W1)for(;++_2[--a1]>w1-1;)_2[a1]=0,a1||(++h1,_2.unshift(1));for($1=_2.length;!_2[$1-1];--$1);for(C1=0,Y1="";C1<$1;C1++)Y1+=P.charAt(_2[C1]);if(p4){if($1>1)if(o1==16||o1==8){for(C1=o1==16?4:3,--$1;$1%C1;$1++)Y1+="0";for($1=(_2=wh(Y1,w1,o1)).length;!_2[$1-1];--$1);for(C1=1,Y1="1.";C1<$1;C1++)Y1+=P.charAt(_2[C1])}else Y1=Y1.charAt(0)+"."+Y1.slice(1);Y1=Y1+(h1<0?"p":"p+")+h1}else if(h1<0){for(;++h1;)Y1="0"+Y1;Y1="0."+Y1}else if(++h1>$1)for(h1-=$1;h1--;)Y1+="0";else h1<$1&&(Y1=Y1.slice(0,h1)+"."+Y1.slice(h1))}else Y1=p4?"0p+0":"0";Y1=(o1==16?"0x":o1==2?"0b":o1==8?"0o":"")+Y1}else Y1=W2(Ym);return Ym.s<0?"-"+Y1:Y1}function E1(Ym,o1){if(Ym.length>o1)return Ym.length=o1,!0}function F1(Ym){return new this(Ym).abs()}function K1(Ym){return new this(Ym).acos()}function N1(Ym){return new this(Ym).acosh()}function J1(Ym,o1){return new this(Ym).plus(o1)}function E2(Ym){return new this(Ym).asin()}function n2(Ym){return new this(Ym).asinh()}function D1(Ym){return new this(Ym).atan()}function i1(Ym){return new this(Ym).atanh()}function g1(Ym,o1){Ym=new this(Ym),o1=new this(o1);var a1,l1=this.precision,w1=this.rounding,h1=l1+4;return Ym.s&&o1.s?Ym.d||o1.d?!o1.d||Ym.isZero()?(a1=o1.s<0?b1(this,l1,w1):new this(0)).s=Ym.s:!Ym.d||o1.isZero()?(a1=b1(this,h1,1).times(.5)).s=Ym.s:o1.s<0?(this.precision=h1,this.rounding=1,a1=this.atan(gf(Ym,o1,h1,1)),o1=b1(this,h1,1),this.precision=l1,this.rounding=w1,a1=Ym.s<0?a1.minus(o1):a1.plus(o1)):a1=this.atan(gf(Ym,o1,h1,1)):(a1=b1(this,h1,1).times(o1.s>0?.25:.75)).s=Ym.s:a1=new this(NaN),a1}function u1(Ym){return new this(Ym).cbrt()}function L1(Ym){return yh(Ym=new this(Ym),Ym.e+1,2)}function B1(Ym){if(!Ym||typeof Ym!="object")throw Error(Xe+"Object expected");var o1,a1,l1,w1=Ym.defaults===!0,h1=["precision",1,E,"rounding",0,8,"toExpNeg",-g,0,"toExpPos",0,g,"maxE",0,g,"minE",-g,0,"modulo",0,9];for(o1=0;o1<h1.length;o1+=3)if(a1=h1[o1],w1&&(this[a1]=_e[a1]),(l1=Ym[a1])!==void 0){if(!(Ko(l1)===l1&&l1>=h1[o1+1]&&l1<=h1[o1+2]))throw Error(wt+a1+": "+l1);this[a1]=l1}if(a1="crypto",w1&&(this[a1]=_e[a1]),(l1=Ym[a1])!==void 0){if(l1!==!0&&l1!==!1&&l1!==0&&l1!==1)throw Error(wt+a1+": "+l1);if(l1){if(typeof crypto>"u"||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(sr);this[a1]=!0}else this[a1]=!1}return this}function Q1(Ym){return new this(Ym).cos()}function Z1(Ym){return new this(Ym).cosh()}function A1(Ym,o1){return new this(Ym).div(o1)}function a2(Ym){return new this(Ym).exp()}function v2(Ym){return yh(Ym=new this(Ym),Ym.e+1,3)}function A2(){var Ym,o1,a1=new this(0);for(He=!1,Ym=0;Ym<arguments.length;)if((o1=new this(arguments[Ym++])).d)a1.d&&(a1=a1.plus(o1.times(o1)));else{if(o1.s)return He=!0,new this(1/0);a1=o1}return He=!0,a1.sqrt()}function l2(Ym){return Ym instanceof a||Ym&&Ym.name==="[object Decimal]"||!1}function x2(Ym){return new this(Ym).ln()}function u2(Ym,o1){return new this(Ym).log(o1)}function s2(Ym){return new this(Ym).log(2)}function j2(Ym){return new this(Ym).log(10)}function h2(){return R2(this,arguments,"lt")}function k2(){return R2(this,arguments,"gt")}function a4(Ym,o1){return new this(Ym).mod(o1)}function n4(Ym,o1){return new this(Ym).mul(o1)}function o4(Ym,o1){return new this(Ym).pow(o1)}function P4(Ym){var o1,a1,l1,w1,h1=0,C1=new this(1),q1=[];if(Ym===void 0?Ym=this.precision:Qp(Ym,1,E),l1=Math.ceil(Ym/uf),this.crypto)if(crypto.getRandomValues)for(o1=crypto.getRandomValues(new Uint32Array(l1));h1<l1;)(w1=o1[h1])>=429e7?o1[h1]=crypto.getRandomValues(new Uint32Array(1))[0]:q1[h1++]=w1%1e7;else{if(!crypto.randomBytes)throw Error(sr);for(o1=crypto.randomBytes(l1*=4);h1<l1;)(w1=o1[h1]+(o1[h1+1]<<8)+(o1[h1+2]<<16)+((127&o1[h1+3])<<24))>=214e7?crypto.randomBytes(4).copy(o1,h1):(q1.push(w1%1e7),h1+=4);h1=l1/4}else for(;h1<l1;)q1[h1++]=1e7*Math.random()|0;for(l1=q1[--h1],Ym%=uf,l1&&Ym&&(w1=Bs(10,uf-Ym),q1[h1]=(l1/w1|0)*w1);q1[h1]===0;h1--)q1.pop();if(h1<0)a1=0,q1=[0];else{for(a1=-1;q1[0]===0;a1-=uf)q1.shift();for(l1=1,w1=q1[0];w1>=10;w1/=10)l1++;l1<uf&&(a1-=uf-l1)}return C1.e=a1,C1.d=q1,C1}function v4(Ym){return yh(Ym=new this(Ym),Ym.e+1,this.rounding)}function P1(Ym){return(Ym=new this(Ym)).d?Ym.d[0]?Ym.s:0*Ym.s:Ym.s||NaN}function z1(Ym){return new this(Ym).sin()}function e2(Ym){return new this(Ym).sinh()}function b2(Ym){return new this(Ym).sqrt()}function P2(Ym,o1){return new this(Ym).sub(o1)}function c2(Ym){return new this(Ym).tan()}function $2(Ym){return new this(Ym).tanh()}function Z2(Ym){return yh(Ym=new this(Ym),Ym.e+1,1)}return(a=function Ym(o1){var a1,l1,w1;function h1(C1){var q1,$1,W1,Y1=this;if(!(Y1 instanceof h1))return new h1(C1);if(Y1.constructor=h1,C1 instanceof h1)return Y1.s=C1.s,void(He?!C1.d||C1.e>h1.maxE?(Y1.e=NaN,Y1.d=null):C1.e<h1.minE?(Y1.e=0,Y1.d=[0]):(Y1.e=C1.e,Y1.d=C1.d.slice()):(Y1.e=C1.e,Y1.d=C1.d?C1.d.slice():C1.d));if((W1=typeof C1)=="number"){if(C1===0)return Y1.s=1/C1<0?-1:1,Y1.e=0,void(Y1.d=[0]);if(C1<0?(C1=-C1,Y1.s=-1):Y1.s=1,C1===~~C1&&C1<1e7){for(q1=0,$1=C1;$1>=10;$1/=10)q1++;return void(He?q1>h1.maxE?(Y1.e=NaN,Y1.d=null):q1<h1.minE?(Y1.e=0,Y1.d=[0]):(Y1.e=q1,Y1.d=[C1]):(Y1.e=q1,Y1.d=[C1]))}return 0*C1!=0?(C1||(Y1.s=NaN),Y1.e=NaN,void(Y1.d=null)):N2(Y1,C1.toString())}if(W1!=="string")throw Error(wt+C1);return($1=C1.charCodeAt(0))===45?(C1=C1.slice(1),Y1.s=-1):($1===43&&(C1=C1.slice(1)),Y1.s=1),cf.test(C1)?N2(Y1,C1):V2(Y1,C1)}if(h1.prototype=Rs,h1.ROUND_UP=0,h1.ROUND_DOWN=1,h1.ROUND_CEIL=2,h1.ROUND_FLOOR=3,h1.ROUND_HALF_UP=4,h1.ROUND_HALF_DOWN=5,h1.ROUND_HALF_EVEN=6,h1.ROUND_HALF_CEIL=7,h1.ROUND_HALF_FLOOR=8,h1.EUCLID=9,h1.config=h1.set=B1,h1.clone=Ym,h1.isDecimal=l2,h1.abs=F1,h1.acos=K1,h1.acosh=N1,h1.add=J1,h1.asin=E2,h1.asinh=n2,h1.atan=D1,h1.atanh=i1,h1.atan2=g1,h1.cbrt=u1,h1.ceil=L1,h1.cos=Q1,h1.cosh=Z1,h1.div=A1,h1.exp=a2,h1.floor=v2,h1.hypot=A2,h1.ln=x2,h1.log=u2,h1.log10=j2,h1.log2=s2,h1.max=h2,h1.min=k2,h1.mod=a4,h1.mul=n4,h1.pow=o4,h1.random=P4,h1.round=v4,h1.sign=P1,h1.sin=z1,h1.sinh=e2,h1.sqrt=b2,h1.sub=P2,h1.tan=c2,h1.tanh=$2,h1.trunc=Z2,o1===void 0&&(o1={}),o1&&o1.defaults!==!0)for(w1=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],a1=0;a1<w1.length;)o1.hasOwnProperty(l1=w1[a1++])||(o1[l1]=this[l1]);return h1.config(o1),h1}(_e)).default=a.Decimal=a,Z=new a(Z),me=new a(me),t.exports?(typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(Rs[Symbol.for("nodejs.util.inspect.custom")]=Rs.toString,Rs[Symbol.toStringTag]="Decimal"),t.exports=a):(r||(r=typeof self<"u"&&self&&self.self==self?self:window),u=r.Decimal,a.noConflict=function(){return r.Decimal=u,a},r.Decimal=a),a}(nerdamer_core)});t.exports=e}(nerdamer_core$1)),nerdamer_core$1.exports}var nerdamer_coreExports=requireNerdamer_core();const nerdamer=getDefaultExportFromCjs(nerdamer_coreExports);var Algebra={exports:{}},Calculus={exports:{}},hasRequiredCalculus;function requireCalculus(){return hasRequiredCalculus||(hasRequiredCalculus=1,function(t){if(typeof e>"u"){var e=requireNerdamer_core();requireAlgebra()}(function(){var r=e.getCore(),a=r.PARSER,l=r.Frac,u=r.Settings,d=r.Utils.isSymbol,Do=r.groups.FN,g=r.Symbol,E=r.Utils.text,P=r.Utils.inBrackets,Z=r.Utils.isInt,me=r.Utils.format,_e=r.Utils.even,He=r.Utils.evaluate,Xe=r.groups.N,wt=r.groups.S,Do=r.groups.FN,sr=r.groups.PL,Ko=r.groups.CP,Bs=r.groups.CB,th=r.groups.EX,pf=r.groups.P,_h=u.LOG,cf="exp",df="abs",uf="sqrt",li="sin",Vc="cos",Rs="tan",qc="sec",Qp="csc",n1="cot",wh="asin",gf="acos",yh="atan",ff="asec",e1="acsc",s1="acot",b1="sinh",_1="cosh",V1="tanh",I1="csch",i2="sech",R2="coth",F2="asech",X1="acsch",W2="acoth";function N2(F1){this.message=F1||""}N2.prototype=new Error,g.prototype.hasIntegral=function(){return this.containsFunction("integrate")},g.prototype.fnTransform=function(){if(this.group!==Do)return this;var F1,K1=this.args[0],N1=new g(this.multiplier),J1=this.clone().toUnitMultiplier();if(this.isLinear())switch(this.fname){case b1:F1=a.parse(me("(e^({0})-e^(-({0})))/2",K1));break;case _1:F1=a.parse(me("(e^({0})+e^(-({0})))/2",K1));break;case V1:F1=a.parse(me("(e^({0})-e^(-({0})))/(e^({0})+e^(-({0})))",K1));break;case Rs:F1=a.parse(me("sin({0})/cos({0})",K1));break;case Qp:F1=a.parse(me("1/sin({0})",K1));break;case qc:F1=a.parse(me("1/cos({0})",K1));break;default:F1=J1}else if(this.power.equals(2))switch(this.fname){case li:F1=a.parse(me("1/2-cos(2*({0}))/2",K1));break;case Vc:F1=a.parse(me("1/2+cos(2*({0}))/2",K1));break;case Rs:F1=a.parse(me("sin({0})^2/cos({0})^2",K1));break;case _1:F1=a.parse(me("1/2+cosh(2*({0}))/2",K1));break;case b1:F1=a.parse(me("-1/2+cosh(2*({0}))/2",K1));break;case V1:F1=a.parse(me("(1+cosh(2*({0})))/(-1+cosh(2*({0})))",K1));break;case qc:F1=a.parse(me("(1-cos(2*({0})))/(1+cos(2*({0})))+1",K1));break;default:F1=J1}else if(this.fname===qc)F1=a.parse(me("1/cos({0})^({1})",this.args[0],this.power));else if(this.fname===Qp)F1=a.parse(me("1/sin({0})^({1})",this.args[0],this.power));else if(this.fname===Rs)this.power.lessThan(0)?F1=a.parse(me("cos({0})^(-({1}))/sin({0})^({1})",this.args[0],this.power.negate())):F1=a.parse(me("sin({0})^({1})/cos({0})^({1})",this.args[0],this.power));else if(this.fname===li&&this.power.lessThan(0))F1=a.parse(me("csc({0})^(-({1}))",this.args[0],this.power.negate()));else if(this.fname===Vc&&this.power.lessThan(0))F1=a.parse(me("sec({0})^(-({1}))",this.args[0],this.power.negate()));else if(this.fname===li&&this.power.equals(3))F1=a.parse(me("(3*sin({0})-sin(3*({0})))/4",this.args[0]));else if(this.fname===Vc&&this.power.equals(3))F1=a.parse(me("(cos(3*({0}))+3*cos({0}))/4",this.args[0]));else if((this.fname===Vc||this.fname===li)&&_e(this.power)){var E2=this.power/2,n2=a.pow(this.clone().toLinear(),a.parse(2)).fnTransform(),D1=a.expand(a.pow(n2,a.parse(E2)));F1=new g(0),D1.each(function(i1){var g1=i1.fnTransform();F1=a.add(F1,g1)},!0)}else F1=J1;return a.multiply(F1,N1)},g.prototype.hasTrig=function(){if(this.isConstant(!0)||this.group===wt)return!1;if(this.fname&&(r.Utils.in_trig(this.fname)||r.Utils.in_inverse_trig(this.fname)))return!0;if(this.symbols){for(var F1 in this.symbols)if(this.symbols[F1].hasTrig())return!0}return!1},r.Expression.prototype.hasIntegral=function(){return this.symbol.hasIntegral()},r.Utils.toCommonDenominator=function(F1){if(F1.isComposite()&&F1.isLinear()){var K1=new g(F1.multiplier),N1=new g(1),J1=new g(0);F1.each(function(n2){N1=a.multiply(N1,n2.getDenom())},!0),F1.each(function(n2){var D1=n2.getNum(),i1=n2.getDenom(),g1=a.multiply(D1,a.divide(N1.clone(),i1));J1=a.add(J1,g1)});var E2=a.multiply(K1,r.Algebra.divide(a.expand(J1),a.expand(N1)));return E2}return F1},r.Utils.in_inverse_trig=function(F1){var K1=[wh,gf,yh,e1,ff,s1];return K1.indexOf(F1)!==-1},r.Utils.in_trig=function(F1){var K1=[Vc,li,Rs,qc,Qp,n1];return K1.indexOf(F1)!==-1},r.Utils.in_htrig=function(F1){var K1=[b1,_1,V1,X1,F2,W2];return K1.indexOf(F1)!==-1},r.Matrix.jacobian=function(F1,K1){var N1=new r.Matrix;return K1||(K1=r.Utils.arrayGetVariables(F1)),K1.forEach(function(J1,E2){F1.forEach(function(n2,D1){var i1=r.Calculus.diff(n2.clone(),J1);N1.set(D1,E2,i1)})}),N1},r.Matrix.prototype.max=function(){var F1=new g(0);return this.each(function(K1){var N1=K1.abs();N1.gt(F1)&&(F1=N1)}),F1},r.Matrix.cMatrix=function(F1,K1){var N1=new r.Matrix;return K1.forEach(function(J1,E2){N1.set(E2,0,a.parse(F1))}),N1};var V2=r.Utils.all_functions=function(F1){for(var K1=0,N1=F1.length;K1<N1;K1++)if(F1[K1].group!==Do)return!1;return!0},q2=r.Utils.cosAsinBtranform=function(F1,K1){var N1,J1;return N1=F1.args[0],J1=K1.args[0],a.parse(me("(sin(({0})+({1}))-sin(({0})-({1})))/2",N1,J1))},B2=r.Utils.cosAsinAtranform=function(F1,K1){if(Number(K1.power)!==1)return a.multiply(F1,K1);var N1;return N1=F1.args[0],a.parse(me("(sin(2*({0})))/2",N1))},K2=r.Utils.cosAsinBtranform=function(F1,K1){var N1,J1;return N1=F1.args[0],J1=K1.args[0],a.parse(me("(cos(({0})+({1}))-cos(({0})-({1})))/2",N1,J1))},S2=r.Utils.trigTransform=function(F1){for(var K1={},N1,J1,E2=new g(1),n2=0,D1=F1.length;n2<D1;n2++)if(N1=F1[n2],N1.group===Do){var i1=N1.fname;i1===Vc&&K1[li]?(K1[li].args[0].toString()!==N1.args[0].toString()?J1=q2(N1,K1[li]):J1=B2(N1,K1[li]),delete K1[li],E2=a.multiply(E2,J1)):i1===li&&K1[Vc]?(K1[Vc].args[0].toString()!==N1.args[0].toString()?J1=q2(N1,K1[Vc]):J1=B2(N1,K1[Vc]),delete K1[Vc],E2=a.multiply(E2,J1)):i1===li&&K1[li]?(K1[li].args[0].toString()!==N1.args[0].toString()?(J1=K2(N1,K1[li]),delete K1[li]):(J1=a.multiply(N1,K1[li]),delete K1[li]),E2=J1):K1[i1]=N1}else E2=a.multiply(E2,N1);for(var g1 in K1)E2=a.multiply(E2,K1[g1]);return E2};r.Settings.integration_depth=10,r.Settings.max_lim_depth=10;var E1=r.Calculus={version:"1.4.6",sum:function(F1,K1,N1,J1){if(K1.group!==r.groups.S)throw new r.exceptions.NerdamerTypeError("Index must be symbol. "+E(K1)+" provided");K1=K1.value;var E2;if(r.Utils.isNumericSymbol(N1)&&r.Utils.isNumericSymbol(J1)){var n2=J1-N1<200?"":"PARSE2NUMBER";N1=Number(N1),J1=Number(J1),E2=r.Utils.block(n2,function(){for(var D1=F1.text(),i1={"~":!0},g1=new r.Symbol(0),u1=N1;u1<=J1;u1++){i1[K1]=new g(u1);var L1=a.parse(D1,i1);g1=a.add(g1,L1)}return g1})}else E2=a.symfunction("sum",arguments);return E2},product:function(F1,K1,N1,J1){if(K1.group!==r.groups.S)throw new r.exceptions.NerdamerTypeError("Index must be symbol. "+E(K1)+" provided");K1=K1.value;var E2;if(r.Utils.isNumericSymbol(N1)&&r.Utils.isNumericSymbol(J1)){var n2=J1-N1<200?"":"PARSE2NUMBER";E2=r.Utils.block(n2,function(){N1=Number(N1),J1=Number(J1.multiplier);for(var D1=F1.text(),i1={},g1=new r.Symbol(1),u1=N1;u1<=J1;u1++)i1[K1]=new g(u1),g1=a.multiply(g1,a.parse(D1,i1));return g1})}else E2=a.symfunction("product",arguments);return E2},diff:function(F1,K1,N1){if(r.Utils.isVector(F1)){var J1=new r.Vector([]);return F1.each(function(A1){J1.elements.push(E1.diff(A1,K1,N1))}),J1}else if(r.Utils.isMatrix(F1)){var E2=new r.Matrix;return F1.each(function(A1,a2,v2){E2.set(a2,v2,E1.diff(A1,K1,N1))}),E2}var n2=d(K1)?K1.text():K1;if(N1=d(N1)?N1.multiplier:N1||1,n2===void 0&&(n2=r.Utils.variables(F1)[0]),F1.group===Do&&F1.fname===uf){var D1=F1.args[0],i1=F1.power.clone();(D1.group!==Xe||D1.group!==pf)&&(D1.power=d(D1.power)?a.multiply(D1.power,a.multiply(new g(1/2)),i1):D1.power.multiply(new l(.5)).multiply(i1),D1.multiplier=D1.multiplier.multiply(F1.multiplier)),F1=D1}if(F1.group===Do&&!d(F1.power)){var g1=B1(a.parse(F1)),u1=E1.diff(F1.args[0].clone(),n2);F1=a.multiply(g1,u1)}else F1=B1(F1);return N1>1&&(N1--,F1=E1.diff(F1,K1,N1)),F1;function L1(A1){return(A1.value===n2||A1.contains(n2,!0))&&(A1.multiplier=A1.multiplier.multiply(A1.power),A1.power=A1.power.subtract(new l(1)),A1.power.equals(0)&&(A1=g(A1.multiplier))),A1}function B1(A1){var a2=A1.group,v2,A2;if(a2===Xe||a2===wt&&A1.value!==n2||a2===pf)A1=g(0);else if(a2===wt)A1=L1(A1);else if(a2===Bs){var l2=A1.multiplier.clone();A1.toUnitMultiplier();var x2=a.multiply(Z1(A1),L1(A1));return x2.multiplier=x2.multiplier.multiply(l2),x2}else if(a2===Do&&A1.power.equals(1))switch(A1.fname){case _h:A2=A1.clone(),A1=A1.args[0].clone(),A1.power=A1.power.negate(),A1.multiplier=A2.multiplier.divide(A1.multiplier);break;case Vc:A1.fname=li,A1.multiplier.negate();break;case li:A1.fname=Vc;break;case Rs:A1.fname=qc,A1.power=new l(2);break;case qc:A1=Q1(A1,Rs);break;case Qp:A1=Q1(A1,"-cot");break;case n1:A1.fname=Qp,A1.multiplier.negate(),A1.power=new l(2);break;case wh:A1=a.parse("(sqrt(1-("+E(A1.args[0])+")^2))^(-1)");break;case gf:A1=a.parse("-(sqrt(1-("+E(A1.args[0])+")^2))^(-1)");break;case yh:A1=a.parse("(1+("+E(A1.args[0])+")^2)^(-1)");break;case df:l2=A1.multiplier.clone(),A1.toUnitMultiplier(),v2=A1.args[0].clone(),v2.toUnitMultiplier(),A1=a.parse(P(E(A1.args[0]))+"/abs"+P(E(v2))),A1.multiplier=l2;break;case"parens":A1=g(1);break;case"cosh":A1.fname="sinh";break;case"sinh":A1.fname="cosh";break;case V1:A1.fname=i2,A1.power=new l(2);break;case i2:A1=Q1(A1,"-tanh");break;case I1:var u2=String(A1.args[0]);return a.parse("-coth("+u2+")*csch("+u2+")");case R2:var u2=String(A1.args[0]);return a.parse("-csch("+u2+")^2");case"asinh":A1=a.parse("(sqrt(1+("+E(A1.args[0])+")^2))^(-1)");break;case"acosh":A1=a.parse("(sqrt(-1+("+E(A1.args[0])+")^2))^(-1)");break;case"atanh":A1=a.parse("(1-("+E(A1.args[0])+")^2)^(-1)");break;case F2:var u2=String(A1.args[0]);A1=a.parse("-1/(sqrt(1/("+u2+")^2-1)*("+u2+")^2)");break;case W2:A1=a.parse("-1/(("+A1.args[0]+")^2-1)");break;case X1:var u2=String(A1.args[0]);A1=a.parse("-1/(sqrt(1/("+u2+")^2+1)*("+u2+")^2)");break;case ff:var u2=String(A1.args[0]);A1=a.parse("1/(sqrt(1-1/("+u2+")^2)*("+u2+")^2)");break;case e1:var u2=String(A1.args[0]);A1=a.parse("-1/(sqrt(1-1/("+u2+")^2)*("+u2+")^2)");break;case s1:A1=a.parse("-1/(("+A1.args[0]+")^2+1)");break;case"S":var u2=String(A1.args[0]);A1=a.parse("sin((pi*("+u2+")^2)/2)");break;case"C":var u2=String(A1.args[0]);A1=a.parse("cos((pi*("+u2+")^2)/2)");break;case"Si":var u2=A1.args[0];A1=a.parse("sin("+u2+")/("+u2+")");break;case"Shi":var u2=A1.args[0];A1=a.parse("sinh("+u2+")/("+u2+")");break;case"Ci":var u2=A1.args[0];A1=a.parse("cos("+u2+")/("+u2+")");break;case"Chi":var u2=A1.args[0];A1=a.parse("cosh("+u2+")/("+u2+")");break;case"Ei":var u2=A1.args[0];A1=a.parse("e^("+u2+")/("+u2+")");break;case"Li":var u2=A1.args[0];A1=a.parse("1/"+u.LOG+"("+u2+")");break;case"erf":A1=a.parse("(2*e^(-("+A1.args[0]+")^2))/sqrt(pi)");break;case"atan2":var s2=String(A1.args[0]),j2=String(A1.args[1]);A1=a.parse("("+j2+")/(("+j2+")^2+("+s2+")^2)");break;case"sign":A1=new g(0);break;case"sinc":A1=a.parse(me("(({0})*cos({0})-sin({0}))*({0})^(-2)",A1.args[0]));break;case u.LOG10:A1=a.parse("1/(("+A1.args[0]+")*"+u.LOG+"(10))");break;default:A1=a.symfunction("diff",[A1,K1])}else if(a2===th||a2===Do&&d(A1.power)){var h2;a2===th?h2=A1.value:a2===Do&&A1.contains(n2)?h2=A1.fname+P(E(A1.args[0])):h2=A1.value+P(E(A1.args[0])),a.multiply(a.parse(_h+P(h2)),A1.power.clone()),v2=E1.diff(a.multiply(a.parse(_h+P(h2)),A1.power.clone()),n2),A1=a.multiply(A1,v2)}else if(a2===Do&&!A1.power.equals(1))v2=A1.clone(),v2.toLinear(),v2.toUnitMultiplier(),A1=a.multiply(L1(A1.clone()),B1(v2));else if(a2===Ko||a2===sr){var k2=A1.clone(),a4=new g(0);for(var n4 in A1.symbols)a4=a.add(a4,E1.diff(A1.symbols[n4].clone(),n2));A1=a.multiply(L1(k2),a4)}return A1.updateHash(),A1}function Q1(A1,a2,v2){return a.multiply(A1,a.parse(a2+P(E(A1.args[0]))))}function Z1(A1){for(var a2=A1.collectSymbols(),v2=new g(0),A2=a2.length,l2=0;l2<A2;l2++){for(var x2=E1.diff(a2[l2].clone(),n2),u2=0;u2<A2;u2++)l2!==u2&&(x2=a.multiply(x2,a2[u2].clone()));v2=a.add(v2,x2)}return v2}},integration:{u_substitution:function(F1,K1){function N1(j2,h2,k2){var a4=E1.diff(h2,K1),n4=k2?k2(j2,h2):a.divide(j2.clone(),a4);return n4.contains(K1,!0)?null:n4}function J1(j2,h2){var k2=E1.integrate(a.symfunction(j2,[new g(g1)]),g1,0);return k2=k2.sub(new g(g1),h2),k2.updateHash(),k2}var E2=F1[0].clone(),n2=F1[1].clone(),D1=E2.group,i1=n2.group,g1="__u__",u1;if(D1===Do&&i1!==Do){var L1=E2.args[0];if(u1=N1(n2,L1.clone()),u1)return a.multiply(u1,J1(E2.fname,L1));if(u1=N1(n2,E2),u1)return E1.integration.poly_integrate(E2)}else if(i1===Do&&D1!==Do){var L1=n2.args[0];if(u1=N1(E2,L1.clone()),u1)return a.multiply(u1,J1(n2.fname,L1))}else if(D1===Do&&i1===Do){if(u1=N1(E2.clone(),n2.clone()),u1||(u1=N1(n2.clone(),E2.clone()),u1))return a.multiply(E1.integration.poly_integrate(n2),u1)}else if(D1===th&&i1!==th){var B1=E2.power;if(u1=N1(n2,B1.clone()),!u1){var Q1=E1.integration.decompose_arg(B1.clone(),K1),Z1=E1.diff(Q1[2].clone(),K1),A1=E1.integration.decompose_arg(Z1.clone(),K1);if(a.multiply(Q1[1],A1[1]).power.equals(n2.power)){var a2=a.divide(Q1[0].clone(),A1[0].clone()),v2=a.multiply(a2.clone(),a.pow(new g(E2.value),a.multiply(Q1[0],new g(g1))));return v2=a.multiply(v2,new g(g1)),E1.integration.by_parts(v2,g1,0,{}).sub(g1,Q1[1].clone())}}var A2=E1.integrate(E2.sub(B1.clone(),new g(g1)),g1,0),l2=a.multiply(A2.sub(new g(g1),B1),u1);return l2}else if(i1===th&&D1!==th){var B1=n2.power;u1=N1(E2,B1.clone());var A2=E1.integrate(n2.sub(B1,new g(g1)),g1,0);return a.multiply(A2.sub(new g(g1),B1),u1)}else if(E2.isComposite()||n2.isComposite()){var x2=function(j2,h2){var k2=E1.diff(h2,K1),a4=r.Algebra.Factor.factor(j2),n4=r.Algebra.Factor.factor(k2),o4=a.divide(a4,n4);return o4},u2=E2.isComposite()?E2.clone().toLinear():E2.clone(),s2=n2.isComposite()?n2.clone().toLinear():n2.clone();if(u1=N1(u2.clone(),s2.clone(),x2),u1)return a.multiply(E1.integration.poly_integrate(n2),u1);if(u1=N1(s2.clone(),u2.clone(),x2),u1)return a.multiply(E1.integration.poly_integrate(E2),u1)}},poly_integrate:function(F1){var K1=F1.power.toString(),N1=F1.multiplier.toDecimal(),J1=F1.toUnitMultiplier().toLinear();return Number(K1)===-1?a.multiply(new g(N1),a.symfunction(_h,[J1])):a.parse(me("({0})*({1})^(({2})+1)/(({2})+1)",N1,J1,K1))},stop:function(F1){throw F1=F1||"Unable to compute integral!",r.Utils.warn(F1),new N2(F1)},partial_fraction:function(F1,K1,N1,J1){d(K1)||(K1=a.parse(K1));var E2,n2;return E2=new g(0),n2=r.Algebra.PartFrac.partfrac(F1,K1),n2.group===Bs&&n2.isLinear()?(n2.each(function(D1){D1.isLinear()||E1.integration.stop()}),n2.each(function(D1){E2=a.add(E2,E1.integrate(D1,K1,N1,J1))})):E2=a.add(E2,E1.integrate(n2,K1,N1,J1)),E2},get_udv:function(F1){var K1=[[],[],[],[],[]],N1=function(L1){var B1=L1.group;if(B1===Do){var Q1=L1.fname;r.Utils.in_trig(Q1)||r.Utils.in_htrig(Q1)?K1[3].push(L1):r.Utils.in_inverse_trig(Q1)?K1[1].push(L1):Q1===_h?K1[0].push(L1):E1.integration.stop()}else B1===wt||L1.isComposite()&&L1.isLinear()||B1===Bs&&L1.isLinear()?K1[2].push(L1):B1===th||L1.isComposite()&&!L1.isLinear()?K1[4].push(L1):E1.integration.stop()};F1.group===Bs?F1.each(function(L1){N1(g.unwrapSQRT(L1,!0))}):N1(F1);for(var J1,E2=new g(1),n2=0;n2<5;n2++){var D1=K1[n2],i1,g1=D1.length;if(g1>0){if(g1>1){i1=new g(1);for(var u1=0;u1<g1;u1++)i1=a.multiply(i1,D1[u1].clone())}else i1=D1[0].clone();J1?E2=a.multiply(E2,i1):(J1=i1,J1.multiplier=J1.multiplier.multiply(F1.multiplier))}}return[J1,E2]},trig_sub:function(F1,K1,N1,J1,E2,n2){E2=E2||E1.integration.decompose_arg(F1.clone().toLinear(),K1),E2[3],E2[2];var D1=E2[0],i1=E2[1];if(i1.power.equals(2)&&D1.greaterThan(0)){var g1=r.Utils.getU(F1),u1=a.parse(Rs+P(g1)),L1=a.parse(qc+P(g1)+"^2"),B1=a.multiply(F1.sub(i1,u1),L1),Q1=E1.integrate(B1,g1,N1,J1).sub(u1,i1);return r.Utils.clearU(u1),Q1}},by_parts:function(F1,K1,N1,J1){J1.previous=J1.previous||[];var E2,n2,D1,i1,g1,u1,L1,B1,Q1,Z1,A1,a2;if(E2=E1.integration.get_udv(F1),n2=E2[0],D1=E2[1],i1=g.unwrapSQRT(a.expand(E1.diff(n2.clone(),K1)),!0),A1=i1.clone().stripVar(K1),i1=a.divide(i1,A1.clone()),g1=E1.integrate(D1.clone(),K1,N1||0),u1=a.multiply(g1.clone(),i1),a2=u1.toString(),J1.previous.indexOf(a2)!==-1&&r.Utils.in_trig(n2.fname)&&D1.isE())return J1.is_cyclic=!0,new g(1);if(J1.previous.push(a2),L1=a.multiply(n2,g1),Z1=u1.multiplier.clone(),u1.toUnitMultiplier(),Q1=a.multiply(E1.integrate(u1.clone(),K1,N1,J1),A1),Q1.multiplier=Q1.multiplier.multiply(Z1),B1=a.subtract(L1,Q1),J1.is_cyclic&&(J1.previous.pop(),J1.previous.length===0)){B1=a.expand(B1);var v2=new g(0);B1.each(function(A2){A2.contains(K1)||(v2=a.add(v2,A2.clone()))}),B1=a.divide(a.subtract(B1,v2.clone()),a.subtract(new g(1),v2))}return B1},decompose_arg:r.Utils.decompose_fn},integrate:function(F1,K1,N1,J1){if(!K1){var E2=r.Utils.variables(F1);E2.length===1&&(K1=E2[0]),K1=K1||"x"}if(r.Utils.isVector(F1)){var n2=new r.Vector([]);return F1.each(function(D1){n2.elements.push(E1.integrate(D1,K1))}),n2}return isNaN(K1)||a.error("variable expected but received "+K1),F1.isConstant(!0)?a.multiply(F1.clone(),a.parse(K1)):(J1=J1||{},r.Utils.block("PARSE2NUMBER",function(){N1=N1||0;var D1=d(K1)?K1.toString():K1,i1=g.unwrapSQRT(F1.clone(),!0),g1=i1.group,u1;try{if(++N1>r.Settings.integration_depth&&E1.integration.stop("Maximum depth reached. Exiting!"),!i1.contains(D1,!0))u1=a.multiply(i1.clone(),a.parse(D1));else if(g1===wt)u1=E1.integration.poly_integrate(i1,D1,N1);else if(g1===th)if(i1.previousGroup===Do&&!(i1.fname==="sqrt"||i1.fname===u.PARENTHESIS)&&E1.integration.stop(),i1.contains(D1)&&i1.previousGroup!==Do)if(i1.power.contains(D1))E1.integration.stop();else{var L1=E1.diff(i1.clone().toLinear(),D1);L1.contains(D1)&&E1.integration.stop(),u1=E1.integration.poly_integrate(i1,D1,N1)}else{var B1=E1.diff(i1.power.clone(),D1);if(B1.contains(D1)){var Q1=B1.stripVar(D1),Z1=a.divide(B1.clone(),Q1.clone());if(Z1.group===wt&&Z1.isLinear())return Q1.multiplier=Q1.multiplier.divide(new l(2)),a.parse(me("({2})*(sqrt(pi)*erf(sqrt(-{0})*{1}))/(2*sqrt(-{0}))",Q1,D1,i1.multiplier));E1.integration.stop()}if(i1.isE())B1.isLinear()?u1=i1:B1.isE()&&B1.power.group===wt&&B1.power.power.equals(1)?u1=a.multiply(a.symfunction("Ei",[i1.power.clone()]),i1.power):E1.integration.stop();else{var A1=a.symfunction(_h,[a.parse(i1.value)]);u1=a.divide(i1,A1)}u1=a.divide(u1,B1)}else if(i1.isComposite()&&i1.isLinear()){var a2=a.parse(i1.multiplier);i1.toUnitMultiplier(),u1=new g(0),i1.each(function(i6){u1=a.add(u1,E1.integrate(i6,D1,N1))}),u1=a.multiply(a2,u1)}else if(g1===Ko)if(i1.power.greaterThan(1)&&(i1=a.expand(i1)),i1.power.equals(1))u1=new g(0),i1.each(function(i6){u1=a.add(u1,E1.integrate(i6,D1,N1))},!0);else{var v2=Number(i1.power),a2=i1.multiplier.clone();i1.toUnitMultiplier();var A2=i1.clone().toLinear(),l2=E1.integration.decompose_arg(A2,D1),x2=l2[3],u2=l2[2],B1=l2[0],Z1=l2[1];if(v2===-1&&Z1.group!==sr&&Z1.power.equals(2)){var s2=Z(x2)?x2>0:!0;if(Z1.group===wt&&Z1.power.equals(2)&&s2){var j2=function(O5){var H3=new g(1);return O5.each(function(l6){H3=a.multiply(H3,l6.fname==="abs"?l6.args[0]:l6)}),H3},h2=B1.clone(),k2=x2.clone();h2=a.pow(h2,new g(1/2)),k2=a.pow(k2,new g(1/2));var A1=a.multiply(j2(k2),j2(h2)),a4=a.symfunction(yh,[a.divide(a.multiply(B1,Z1.toLinear()),A1.clone())]);u1=a.divide(a4,A1)}else if(Z1.group===wt&&Z1.isLinear())u1=a.divide(E1.integration.poly_integrate(i1),B1);else if(Z1.power.equals(4)){var h2,k2,n4,o4,P4,v4,P1,z1,e2,b2,P2,c2,$2=P;h2=a.parse(uf+$2(B1)+"*"+D1+"^2"),k2=a.parse(uf+$2(2)+"*"+$2(B1)+"^"+$2("1/4")+"*"+$2(x2)+"^"+$2("1/4")+"*"+D1),n4=a.parse(uf+$2(x2)),P1=a.add(a.add(h2.clone(),k2.clone()),n4.clone()),z1=a.add(a.subtract(h2,k2),n4),o4=a.parse(uf+$2(2)+"*"+$2(x2)+"^"+$2("3/4")),P4=a.parse(uf+$2(x2)+"*"+$2(x2)+"^"+$2("1/4")+"*"+D1),v4=a.parse("2*"+$2(x2)+"*"+uf+$2(2)+"*"+$2(x2)+"^"+$2("1/4")),P2=a.divide(a.subtract(o4.clone(),P4.clone()),a.multiply(v4.clone(),z1)),c2=a.divide(a.add(o4,P4),a.multiply(v4,P1.clone())),u1=a.add(E1.integrate(P2,D1,N1,J1),E1.integrate(c2,D1,N1,J1))}else u1=E1.integration.partial_fraction(i1,D1,N1)}else if(v2===-1/2)if(Z1.group===wt&&Z1.power.equals(2))if(u2.multiplier.lessThan(0)&&!x2.multiplier.lessThan(0))if(B1.negate(),x2.isConstant()&&B1.isConstant()){var A1=a.symfunction(uf,[B1.clone()]),Z2=a.symfunction(uf,[a.multiply(B1.clone(),x2)]);u1=a.divide(a.symfunction(wh,[a.divide(u2.toLinear(),Z2)]),A1)}else{var Ym=a.symfunction(uf,[B1]),o1=a.multiply(Ym.clone(),Z1.clone().toLinear());u1=a.divide(a.symfunction(yh,[a.divide(o1,a.symfunction(uf,[A2.clone()]))]),Ym)}else E1.integration.stop();else E1.integration.stop();else if(v2===1/2&&Z1.power.equals(2)&&B1.greaterThan(0))E1.integration.stop();else if(Z1.isLinear()&&Z1.group!==sr)u1=a.divide(E1.integration.poly_integrate(i1),B1);else if(Z1.power.equals(2)&&B1.greaterThan(0)){var a1,l1,w1,h1,W1,Y1,C1,q1,$1;a1=a.parse(uf+P(B1)),l1=a.parse(uf+P(x2)),w1=a.multiply(a1.clone(),l1.clone()).invert(),h1=a.pow(x2,new g(i1.power)),$1=r.Utils.getU(i1),C1=a.multiply(w1,Z1.clone().toLinear()),q1=a.parse(yh+P(C1));var W1=(Math.abs(i1.power)-1)*2,Y1=E1.integrate(a.parse(Vc+P($1)+"^"+W1));return r.Utils.clearU($1),a.multiply(Y1.sub($1,q1),h1)}else if(i1.group!==Bs&&!i1.power.lessThan(0))u1=E1.integration.by_parts(i1,D1,N1,J1);else{var a4=i1.clone().toLinear(),_2=r.Algebra.Factor.factor(a4),O2=_2.toString()!==a4.toString();if(r.Algebra.degree(a4,a.parse(D1)).equals(2)&&!O2)try{var P1,u4,C1,p4;p4=r.Algebra.sqComplete(a4,D1),C1=r.Utils.getU(a4),P1=p4.f.sub(p4.a,C1),u4=a.pow(P1,a.parse(i1.power)),u1=E1.integrate(u4,C1).sub(C1,p4.a)}catch{E1.integration.stop()}else u1=E1.integration.partial_fraction(i1,D1,N1,J1)}u1.multiplier=u1.multiplier.multiply(a2)}else if(g1===Do){var l4=i1.args[0],a2=i1.multiplier.clone();i1.toUnitMultiplier();var l2=E1.integration.decompose_arg(l4,D1),B1=l2[0],Z1=l2[1],A4=i1.fname;if(A4===_h||A4===wh||A4===gf||A4===yh&&Z1.isLinear()){var v2=i1.power.toString();if(Z(v2)&&(N1=N1-v2),!l4.isComposite())u1=a.multiply(a.parse(a2),E1.integration.by_parts(i1,D1,N1,J1));else{var C1=r.Utils.getU(i1),a4=a.pow(a.parse(_h+P(C1)),new g(v2)),h3=E1.diff(l4,D1),s3=a.multiply(a4,h3),Y1=E1.integrate(s3,C1,N1,J1);u1=a.multiply(a.parse(a2),Y1.sub(C1,l4))}}else if(A4===Rs&&i1.power.lessThan(0)){var y4=i1.clone();return y4.power.negate(),y4.fname=n1,a.multiply(a.parse(a2),E1.integrate(y4,D1,N1))}else{if(!B1.contains(D1,!0)&&i1.isLinear())if(A4===df){var Z1=a.divide(l4.clone(),B1.clone());if(Z1.group===wt&&!Z1.power.lessThan(0))if(r.Utils.even(Z1.power))u1=E1.integrate(l4,D1,N1);else{var r4=E1.integrate(Z1,D1,N1);r4.power=r4.power.subtract(new l(1)),u1=a.multiply(a.multiply(a.symfunction(df,[Z1.toLinear()]),r4),B1)}else E1.integration.stop()}else{var z4=i1.args[0].group,e4=E1.integration.decompose_arg(l4,D1);switch((!(z4===Ko||z4===wt||z4===Bs)||!e4[1].power.equals(1)||l4.hasFunc())&&E1.integration.stop(),A4){case Vc:u1=a.symfunction(li,[l4]);break;case li:u1=a.symfunction(Vc,[l4]),u1.negate();break;case Rs:u1=a.parse(me(u.LOG+"(sec({0}))",l4));break;case qc:u1=a.parse(me(u.LOG+"(tan({0})+sec({0}))",l4));break;case Qp:u1=a.parse(me("-"+u.LOG+"(csc({0})+cot({0}))",l4));break;case n1:u1=a.parse(me(u.LOG+"(sin({0}))",l4));break;case b1:u1=a.symfunction(_1,[l4]);break;case _1:u1=a.symfunction(b1,[l4]);break;case V1:u1=a.parse(me(u.LOG+"(cosh({0}))",l4));break;case ff:u1=E1.integration.by_parts(i1,D1,N1,J1);break;case e1:u1=E1.integration.by_parts(i1,D1,N1,J1);break;case s1:u1=E1.integration.by_parts(i1,D1,N1,J1);break;case F2:u1=E1.integration.by_parts(i1,D1,N1,J1);break;case X1:u1=E1.integration.by_parts(i1,D1,N1,J1);break;case W2:u1=E1.integration.by_parts(i1,D1,N1,J1);break;case i2:u1=a.parse(me("atan(sinh({0}))",l4));break;case I1:u1=a.parse(me(u.LOG+"(tanh(({0})/2))",l4));break;case R2:u1=a.parse(me(u.LOG+"(sinh({0}))",l4));break;case cf:u1=E1.integrate(a.parse(me("e^({0})",l4)),D1,N1);break;case"S":var l4=i1.args[0].clone(),C4=E1.integration.decompose_arg(l4,D1),H2=C4[1],x1=C4[0],O4=C4[3];u1=a.parse(me("(cos((1/2)*pi*(({1})+({0})*({2}))^2)+pi*(({1})+({0})*({2}))*S(({1})+({0})*({2})))/(({0})*pi)",x1,O4,Z1));break;case"C":var l4=i1.args[0].clone(),C4=E1.integration.decompose_arg(l4,D1),H2=C4[1],x1=C4[0],O4=C4[3];u1=a.parse(me("(pi*(({1})+({0})*({2}))*C(({1})+({0})*({2}))-sin((1/2)*pi*(({1})+({0})*({2}))^2))/(({0})*pi)",x1,O4,H2));break;case"erf":var l4=i1.args[0].clone(),C4=E1.integration.decompose_arg(l4,D1),H2=C4[1],x1=C4[0];u1=a.parse(me("e^(-(({2}))^2)/(({0})*sqrt(pi))+(1/({0})+({1}))*erf(({2}))",x1,H2,l4));break;case"sign":u1=a.multiply(i1.clone(),l4.clone());break;default:E1.integration.stop()}u1=a.divide(u1,B1)}else if(Z1.isLinear())if(A4===Vc||A4===li){var v2=Number(i1.power);if(v2<0)i1.fname=A4===li?Qp:qc,i1.invert().updateHash(),u1=E1.integrate(i1,D1,N1);else{var l4=i1.args[0],A3=i1.clone(),V6=i1.clone(),K4=new g((v2-1)/v2),c3=a.multiply(B1.clone(),new g(v2)).invert();A3.power=A3.power.subtract(new l(1)),V6.power=V6.power.subtract(new l(2));var L1=a.symfunction(A4===Vc?li:Vc,[l4.clone()]);A4===li&&L1.negate(),u1=a.add(a.multiply(a.multiply(c3,A3),L1),a.multiply(K4,E1.integrate(a.parse(V6),D1,N1)))}}else if(A4===Rs||A4===n1){if(i1.args[0].isLinear(D1)){var W1=i1.power.subtract(new l(1)).toString(),b4=i1.clone().toUnitMultiplier(),Y4=a.parse(me((A4===n1?"-":"")+"1/({2}*{0})*{3}({1})^({0})",W1,l4,B1,A4));b4.power=b4.power.subtract(new l(2)),b4.power.equals(0)&&(b4=a.parse(b4)),u1=a.subtract(Y4,E1.integrate(b4,D1,N1))}}else if(A4===qc||A4===Qp){var z3=i1.power.subtract(new l(1)).toString(),d6=i1.power.subtract(new l(2)).toString(),z1=A4===qc?Rs:n1,b4=i1.clone().toUnitMultiplier(),G6=me((A4===Qp?"-":"")+"1/({0}*{1})*{4}({3})^({2})*{5}({3})",B1,z3,d6,l4,A4,z1),Y4=a.parse(G6);b4.power=b4.power.subtract(new l(2)),b4.power.equals(0)&&(b4=a.parse(b4)),u1=a.add(Y4,a.multiply(new g(d6/z3),E1.integrate(b4,D1,N1)))}else(A4===_1||A4===b1)&&i1.power.equals(2)?u1=E1.integrate(i1.fnTransform(),D1,N1):E1.integration.stop();else E1.integration.stop();u1.multiplier=u1.multiplier.multiply(a2)}}else if(g1===sr)u1=E1.integration.partial_fraction(i1,D1,N1);else if(g1===Bs){var H4=i1.getDenom();H4.group===wt&&(i1=a.expand(i1));var De=i1.stripVar(D1),Fc=a.divide(i1.clone(),De.clone());if(De.contains(D1)&&(Fc=a.multiply(Fc,De),De=new g(1)),Fc.group!==Bs){if(Fc.equals(1))return E1.integrate(a.expand(i1),D1,N1);Fc.clone().toLinear().isPoly(!0)&&r.Utils.variables(Fc).length>1&&(Fc=r.Algebra.Factor.factor(Fc)),u1=E1.integrate(Fc,D1,N1)}else{var hf=Fc.collectSymbols().sort(function(i6,R3){return i6.group===R3.group?Number(i6.power)===Number(R3.power)?i6<R3?1:-1:R3.power-i6.power:R3.group-i6.group}).map(function(i6){var R3=g.unwrapSQRT(i6,!0);return R3.fname===cf?a.parse(me("({1})*e^({0})",R3.args[0],R3.multiplier)):R3}),r1=hf.length;if(i1.power<0){if(r1===2)return E1.integrate(a.expand(i1),D1,N1,J1)}else if(r1===2){try{u1=E1.integration.u_substitution(hf,D1)}catch{}if(!u1){var d1=hf[0].group,y1=hf[1].group,v1=hf[0],O1=hf[1],m2=v1.fname,T2=O1.fname;if(i1=a.multiply(v1.clone(),O1.clone()),d1===Do&&y1===Do)if(m2===_h||T2===_h)u1=E1.integration.by_parts(i1.clone(),D1,N1,J1);else{hf.sort(function(R3,m5){return m5.fname>R3.fname});var w2=v1.args[0];(!w2.isLinear()||!(w2.group===Ko||w2.group===Bs||w2.group===wt))&&E1.integration.stop();var l2=E1.integration.decompose_arg(w2,D1);Z1=l2[1],B1=l2[0],Z1.isLinear()||E1.integration.stop();var d4=O1.args[0];if(w2.equals(d4))if(m2===li&&T2===Vc||m2===Vc&&T2===li)if(v1.power.lessThan(0)&&E1.integration.stop(),m2===li&&v1.power.add(O1.power).equals(0))v1.fname=Rs,v1.updateHash(),u1=E1.integrate(v1,D1,N1);else if(_e(v1.power)&&T2===Vc&&O1.power.lessThan(0)){var W1=Number(v1.power)/2,z2=a.parse(me("(1-cos({0})^2)^({1})",v1.args[0],W1));u1=E1.integrate(a.expand(a.multiply(z2,O1.clone())),D1,N1,J1)}else if(_e(v1.power)&&T2===li&&O1.power.lessThan(0)){var W1=Number(v1.power)/2,z2=a.parse(me("(1-sin({0})^2)^({1})",v1.args[0],W1));u1=E1.integrate(a.expand(a.multiply(z2,O1.clone())),D1,N1,J1)}else{var i4=r.Utils.even(v1.power),E4=r.Utils.even(O1.power);if(u1=new g(0),!i4||!E4){var C1,b4,U4;i4?(C1=v1,b4=O1):(C1=O1,b4=v1);var w4=C1.fname===Vc?-1:1,W1=b4.power,$4=(W1-1)/2,U4=a.parse("(1-"+C1.fname+r.Utils.inBrackets(w2)+"^2)^"+$4),y4=a.expand(a.multiply(new g(w4),a.multiply(C1.clone(),U4)));y4.each(function(H3){u1=a.add(u1,E1.integration.poly_integrate(H3.clone()))})}else{var X2=function(H3){var l6=H3.power,j5=l6/2,ev;return H3.fname===Vc?ev="((1/2)+(cos(2*("+H3.args[0]+"))/2))^"+j5:ev="((1/2)-(cos(2*("+H3.args[0]+"))/2))^"+j5,a.parse(ev)},B1=X2(v1),x2=X2(O1),L1=a.multiply(B1,x2),y4=a.expand(L1);return y4.each(function(H3){u1=a.add(u1,E1.integrate(H3,D1,N1))}),a.multiply(u1,De)}}else if(m2===qc&&T2===Rs&&Z1.isLinear()&&O1.isLinear())u1=a.parse(me("sec({0})^({1})/({1})",v1.args[0],v1.power));else if(m2===Rs&&T2===qc&&Z1.isLinear())if(v1.isLinear()&&O1.isLinear())u1=a.divide(a.symfunction(qc,[w2.clone()]),B1);else if(_e(v1.power)){var v2=Number(v1.power)/2,L1=a.parse(me("(sec({0})^2-1)^({1})",v1.args[0],v2));u1=E1.integrate(a.expand(a.multiply(L1,O1)),D1,N1)}else E1.integration.stop();else if(m2===qc&&T2===Vc)v1.fname=Vc,v1.invert().updateHash(),u1=E1.integrate(a.multiply(v1,O1),D1,N1);else if(m2===li&&T2===Qp)O1.fname=li,O1.invert().updateHash(),u1=E1.integrate(a.multiply(v1,O1),D1,N1);else if(m2===Rs&&(T2===Vc||T2===li)&&O1.power.lessThan(0)){var L1=a.multiply(v1.fnTransform(),O1);u1=E1.integrate(a.expand(L1),D1,N1)}else{var L1=a.multiply(v1.fnTransform(),O1.fnTransform());u1=E1.integrate(a.expand(L1),D1,N1)}else if((m2===li||m2===Vc)&&(T2===li||T2===Vc))if(v1.isLinear()&&O1.isLinear())if(v1.args[0].isLinear()&&O1.args[0].isLinear()){var u2,f3;T2===li?(u2=v1.args[0],f3=O1.args[0]):(f3=v1.args[0],u2=O1.args[0]),a4=a.parse(me("(sin(({1})+({0}))+sin(({1})-({0})))/2",u2.toString(),f3.toString())),u1=E1.integrate(a4,D1,N1)}else{var a3=S2(hf);u1=E1.integrate(a.expand(a3),D1,N1)}else{var a3=new g(1);hf.map(function(y3){var O5=y3.fnTransform();a3=a.multiply(a3,O5)});var L1=a.expand(a3);u1=E1.integrate(L1,D1,N1),u1.hasIntegral()&&(u1=E1.integrate(S2(a3.collectSymbols()),D1,N1))}else E1.integration.stop()}else if(d1===Do&&y1===wt){var D4=v1.isLinear();if(v1.fname===Vc&&D4&&O1.power.equals(-1))u1=a.symfunction("Ci",[v1.args[0]]);else if(v1.fname===Vc&&O1.power.equals(-1))u1=E1.integrate(a.multiply(v1.fnTransform(),O1.clone()),D1,N1);else if(v1.fname===_1&&D4&&O1.power.equals(-1))u1=a.symfunction("Chi",[v1.args[0]]);else if(v1.fname===_1&&O1.power.equals(-1))u1=E1.integrate(a.multiply(v1.fnTransform(),O1.clone()),D1,N1);else if(v1.fname===li&&D4&&O1.power.equals(-1))u1=a.symfunction("Si",[v1.args[0]]);else if(v1.fname===li&&O1.power.equals(-1))u1=E1.integrate(a.multiply(v1.fnTransform(),O1.clone()),D1,N1);else if(v1.fname===b1&&D4&&O1.power.equals(-1))u1=a.symfunction("Shi",[v1.args[0]]);else if(v1.fname===b1&&O1.power.equals(-1))u1=E1.integrate(a.multiply(v1.fnTransform(),O1.clone()),D1,N1);else if(v1.fname===_h&&O1.power.equals(-1))u1=E1.integration.poly_integrate(v1,D1,N1);else if(v1.fname==="erf"){if(O1.power.equals(1)){var C4=E1.integration.decompose_arg(v1.args[0],D1),x1=C4[0],H2=C4[1],l4=v1.args[0].toString();u1=a.parse(me("(e^(-(({2}))^2)*(sqrt(pi)*e^((({2}))^2)*(2*({0})^2*({1})^2-3)*erf(({2}))+2*({0})*({1})-2))/(4*sqrt(pi)*({0})^2)",x1,H2,l4))}}else u1=E1.integration.by_parts(i1,D1,N1,J1)}else if(d1===th&&y1===wt){var Z1=m2===_h?E1.integration.decompose_arg(v1.args[0],D1)[1]:null;v1.isE()&&(v1.power.group===wt||v1.power.group===Bs)&&O1.power.equals(-1)?u1=a.symfunction("Ei",[v1.power.clone()]):m2===_h&&Z1.value===O1.value?u1=E1.integration.poly_integrate(v1,D1,N1):u1=E1.integration.by_parts(i1,D1,N1,J1)}else if(d1===sr&&y1===wt){if(O1.value===v1.value&&v1.power.equals(-1)){var F3=Math.min.apply(null,r.Utils.keys(v1.symbols)),Z3=Math.min(F3,O1.power),U3=O1.clone();U3.power=new l(Z3),O1=a.divide(O1,U3.clone());var L1=new g(0);v1.each(function(R3){L1=a.add(L1,a.divide(R3.clone(),U3.clone()))}),L1.multiplier=v1.multiplier,i1=a.divide(O1,L1)}else i1=a.expand(i1);u1=E1.integration.partial_fraction(i1,D1,N1)}else if(d1===Ko&&y1===wt){var a4=v1.clone().toLinear(),o3=r.Algebra.degree(a4,a.parse(D1)).equals(1);if(v1.power.equals(-1/2)){var l2=E1.integration.decompose_arg(v1.clone().toLinear(),D1),B1=l2[0].negate(),Z1=l2[1],x2=l2[3],v3=Number(v1.power),g3=Number(O1.power);if(Z(g3)&&r.Utils.even(g3)&&Z1.power.equals(2)){var k3=a.divide(a.multiply(a.pow(x2.clone(),new g(2)),a.symfunction(uf,[a.divide(x2.clone(),B1.clone())])),a.pow(B1.clone(),new g(2)));k3=a.multiply(k3,a.symfunction(uf,[x2]).invert());var t6=a.parse("sin(u)");t6.power=t6.power.multiply(O1.power);var Y1=E1.integrate(t6,"u",N1),l3=a.parse(wh+"("+uf+"("+B1+"/"+x2+")*"+D1+")");u1=a.multiply(k3,Y1.sub(new g("u"),l3))}else if(v3===-1/2){var j4=function(H3,l6){var j5=a.parse(E1.integrate(H3,D1,N1,J1).sub(D1,me(l6,D1)));if(!j5.hasIntegral())return j5};g3===-1?u1=j4(a.expand(a.expand(a.pow(a.multiply(v1.invert(),O1.invert()),new g(2)))).invert(),"sqrt(1-1/({0})^2)"):g3===-2&&(u1=j4(a.sqrt(a.expand(a.divide(a.pow(i1,new g(2)).invert(),a.pow(new g(D1),new g(2))).negate())).invert(),"sqrt(1-1/({0})^2)"))}}else if(v1.power.equals(-1)&&O1.isLinear()&&o3)u1=E1.integration.partial_fraction(i1,D1,N1);else if(!v1.power.lessThan(0)&&Z(v1.power)){var g6=a.expand(v1);u1=new g(0),g6.each(function(R3){R3.group===sr?R3.each(function(m5){u1=a.add(u1,E1.integrate(a.multiply(O1.clone(),m5),D1,N1))}):u1=a.add(u1,E1.integrate(a.multiply(O1.clone(),R3),D1,N1))})}else if(v1.power.lessThan(-2))u1=E1.integration.by_parts(i1,D1,N1,J1);else if(v1.power.lessThan(0)&&O1.power.greaterThan(1)){var l2=E1.integration.decompose_arg(v1.clone().toLinear(),D1),B1=l2[0].negate(),Z1=l2[1],x2=l2[3],A2=v1.clone().toLinear();if(Z1.group!==sr&&Z1.isLinear()){var v2=Number(O1.power),h3="_u_",C1=new g(h3),j3=a.expand(a.divide(a.pow(a.subtract(C1.clone(),x2.clone()),new g(v2)),C1.clone())),i5={};i5[h3]=A2;var K6=a.parse(j3,i5);u1=E1.integrate(K6,D1,0)}else if(O1.power.greaterThan(Z1.power)||O1.power.equals(Z1.power)){var n5=new r.Algebra.Classes.Factors;v1=r.Algebra.Factor.coeffFactor(v1.invert(),n5);var A6=r.Algebra.divide(O1,v1);A6.group!==Bs?(u1=new g(0),A6.each(function(l6){u1=a.add(u1,E1.integrate(l6,D1,N1))}),n5.each(function(l6){u1=a.divide(u1,l6)}),u1=a.expand(u1)):u1=E1.integration.by_parts(i1,D1,N1,J1)}else u1=E1.integration.partial_fraction(i1,D1,N1)}else if(v1.power.den.equals(2)){var C4=E1.integration.decompose_arg(v1.clone().toLinear(),D1),B1=C4[3],Z1=C4[1],x2=C4[0],f3=C4[2];if(Z1.power.equals(2)&&x2.lessThan(0)){B1.equals(1)||(De=a.multiply(De,a.pow(B1,new g(2))));var C1=D1,k3=a.divide(a.pow(x2.clone().negate(),new g(1/2)),a.pow(B1,new g(1/2))),h3=a.symfunction(Vc,[new g(C1)]),u3=a.pow(a.symfunction(Vc,[new g(C1)]),new g(v1.power.num)),r6=a.pow(a.symfunction(li,[new g(C1)]),new g(O1.power)),d5=a.multiply(a.multiply(u3,h3),r6),Y1=E1.integrate(d5,C1,N1);u1=Y1.sub(C1,a.symfunction(wh,[a.multiply(new g(D1),k3)]))}else u1=E1.integration.partial_fraction(i1,D1,N1,J1)}else o3&&(u1=E1.integration.partial_fraction(i1,D1,N1))}else if(v1.isComposite()&&O1.isComposite())if(u1=new g(0),v1.power.greaterThan(0)&&O1.power.greaterThan(0)){var y4=a.expand(i1);y4.each(function(R3){u1=a.add(u1,E1.integrate(R3,D1,N1))},!0)}else{var v3=Number(v1.power),g3=Number(O1.power);if(v3<0&&g3>0){var L1=v1;v1=O1,O1=L1}v3===-1&&g3===-1?u1=E1.integration.partial_fraction(i1,D1):v1.each(function(m5){var y3=a.multiply(m5,O1.clone()),O5=E1.integrate(y3,D1,N1);u1=a.add(u1,O5)})}else if(d1===Ko&&hf[0].power.greaterThan(0))v1=a.expand(v1),u1=new g(0),v1.each(function(i6){u1=a.add(u1,E1.integrate(a.multiply(i6,O1.clone()),D1,N1))},!0);else if(d1===Do&&y1===th&&r.Utils.in_htrig(v1.fname))v1=v1.fnTransform(),u1=E1.integrate(a.expand(a.multiply(v1,O1)),D1,N1);else if(d1===Do&&y1===Ko||y1===Do&&d1===Ko){if(y1===Do&&d1===Ko){var L1=v1;v1=O1,O1=L1}var h3,Rv,v2,K4,w5,S5;if(h3=g.unwrapSQRT(E1.diff(v1.clone(),D1),!0),Rv=g.unwrapSQRT(O1,!0),h3.power.equals(Rv.power)){if(v2=new g(O1.power),w5=h3.clone().toLinear(),S5=O1.clone().toLinear(),K4=r.Algebra.divide(w5.toLinear(),S5),K4.isConstant()){var W6=a.pow(K4,v2.negate());u1=a.multiply(W6,E1.integration.poly_integrate(v1.clone()))}}else u1=E1.integration.by_parts(i1,D1,N1,J1)}else{var a5=v1.clone().toLinear(),R4=O1.clone().toLinear();d1===th&&y1===th&&v1.power.contains(D1)&&O1.power.contains(D1)&&!a5.contains(D1)&&!R4.contains(D1)?u1=a.parse(me("(({0})^(({2})*({4}))*({1})^(({3})*({4})))/(log(({0})^({2}))+log(({1})^({3})))",a5.toString(),R4.toString(),v1.power.multiplier.toString(),O1.power.multiplier.toString(),D1)):u1=E1.integration.by_parts(i1,D1,N1,J1)}}}else if(r1===3&&(hf[2].group===wt&&hf[2].power.lessThan(2)||hf[0].group===Ko)){var x6=hf[0];if(x6.group===Ko){x6.power.greaterThan(1)&&(x6=a.expand(x6));var b4=a.multiply(hf[1],hf[2]);u1=new g(0),x6.each(function(R3){var m5=a.multiply(R3,b4.clone()),y3=E1.integrate(m5,D1,N1);u1=a.add(u1,y3)},!0)}else u1=E1.integration.by_parts(i1,D1,N1,J1)}else if(V2(hf)){for(var L1=new g(1),p5=0,r1=hf.length;p5<r1;p5++)L1=a.multiply(L1,hf[p5].fnTransform());L1=a.expand(L1),u1=E1.integrate(L1,D1,N1)}else{var a3=S2(hf);u1=E1.integrate(a.expand(a3),D1,N1)}}u1=a.multiply(u1,De)}if(u1)return u1}catch(i6){if(!(i6 instanceof N2||i6 instanceof r.exceptions.DivisionByZero))throw i6}return a.symfunction("integrate",[F1,K1])},!1))},defint:function(F1,K1,N1,J1){J1=J1||"x";var E2=function(A1,a2,v2){try{return a.parse(A1,a2)}catch{var A2=E1.Limit.limit(A1,J1,v2);return A2}},n2=r.Utils.variables(F1),D1=F1.hasTrig(),i1,g1;if(n2.length===1&&!J1&&(J1=n2[0]),D1||(g1=E1.integrate(F1,J1)),!D1&&!g1.hasIntegral()){var u1={},L1={},B1,Q1;u1[J1]=N1,L1[J1]=K1,B1=E2(g1,u1,N1),Q1=E2(g1,L1,K1),i1=a.subtract(B1,Q1)}else if(n2.length===1&&K1.isConstant()&&N1.isConstant()){var Z1=r.Utils.build(F1);i1=new g(r.Math2.num_integrate(Z1,Number(K1),Number(N1)))}else i1=a.symfunction("defint",[F1,K1,N1,J1]);return i1},Limit:{interval:function(F1,K1){return a.parse(me("[{0}, {1}]",F1,K1))},diverges:function(){return E1.Limit.interval("-Infinity","Infinity")},divide:function(F1,K1,N1,J1,E2){if(!(E2++>u.max_lim_depth)){F1.clone();var n2=K1.clone();if(K1.fname===df){var D1=F1.sign(),i1=J1.sign();if(J1.isInfinity)return a.multiply(new g(D1),new g(i1));if(J1.equals(0)){var g1=a.parse(F1.multiplier),u1=a.parse(K1.multiplier);return a.divide(a.multiply(g1,E1.Limit.interval("-1","1")),u1)}else E1.Limit.diverges()}var L1=function(s2){if(r.Utils.isVector(s2)){for(var j2=0;j2<s2.elements.length;j2++)if(!s2.elements[j2].isInfinity)return!1;return!0}return s2.isInfinity},B1=function(s2,j2){return r.Utils.isVector(s2)?!1:s2.equals(j2)},Q1;do{var Z1=He(E1.Limit.limit(F1.clone(),N1,J1,E2)),A1=He(E1.Limit.limit(K1.clone(),N1,J1,E2)),a2=L1(Z1)&&L1(A1)||B1(Z1,0)&&B1(A1,0);if(a2){var v2=E1.diff(F1.clone(),N1),A2=E1.diff(K1.clone(),N1),l2=a.expand(a.divide(v2,A2));F1=l2.getNum(),K1=l2.getDenom()}}while(a2);var x2=A1.equals(0),u2=Number(n2.power);return J1.isConstant(!0)&&x2?Q1=g.infinity(r.Utils.even(u2)&&Z1.lessThan(0)?-1:void 0):x2?Q1=E1.Limit.diverges():Q1=a.divide(Z1,A1),Q1}},rewriteToLog:function(F1){var K1=F1.power.clone();return F1.toLinear(),a.pow(new g("e"),a.multiply(K1,a.symfunction(u.LOG+"",[F1])))},getSubbed:function(F1,K1,N1){var J1;F1.group===th&&(F1=E1.rewriteToLog(F1));try{J1=F1.sub(K1,N1)}catch{J1=F1}return J1},isInterval:function(F1){return r.Utils.isVector(F1)},isConvergent:function(F1){return!(E1.Limit.isInterval(F1)&&F1.elements[0].isInfinity&&F1.elements[1].isInfinity||F1.containsFunction("limit"))},limit:function(F1,K1,N1,J1){if(F1.isLinear()&&F1.isComposite()){var E2=new g(0);return F1.each(function(Ym){E2=a.add(E2,E1.Limit.limit(Ym,K1,N1,J1))},!0),E2}if(F1=r.Algebra.Simplify.simplify(F1),J1=J1||1,!(J1++>u.max_lim_depth)){var n2=a.parse(F1.multiplier);F1.toUnitMultiplier();try{var D1;if(F1.isConstant(!0))D1=F1;else{var i1={};i1[K1]=N1;try{var g1=a.parse(F1.sub(K1,N1),i1);(g1.isConstant(!0)||g1.isInfinity)&&(D1=g1)}catch{}if(!D1){var u1=F1.getNum(),L1=F1.getDenom();if(L1.isConstant(!0)){if(F1.group===th){var B1=F1.clone().toLinear(),Q1=F1.power.clone(),Z1=B1.getNum(),A1=B1.getDenom(),a2=r.Utils.decompose_fn(A1,K1,!0);if(Z1.group===wt&&Z1.multiplier.isOne()&&a2.ax.group===wt&&a2.b.isConstant(!0)&&a2.a.isOne()&&a2.b.isConstant(!0))D1=a.parse(me("(1/e^({0}))",a2.b));else{var v2=E1.Limit.rewriteToLog(F1.clone()),A2=v2.power.clone(),l2=v2.clone().toLinear(),x2=E1.Limit.limit(l2,K1,N1,J1),u2=E1.Limit.limit(A2,K1,N1,J1);D1=a.pow(x2,u2)}}else if(F1.group===Do&&F1.args.length===1){var s2,j2=E1.Limit.limit(F1.args[0],K1,N1,J1);if(r.Utils.isVector(j2))return D1=j2.map(function(Ym){var o1=F1.clone();return o1.args[0]=Ym,E1.Limit.limit(a.symfunction(F1.fname,[Ym]),K1,N1,J1)}),a.multiply(n2,D1);if(j2.isConstant(!0)){var h2=a.symfunction(F1.fname,[j2]);try{He(h2),s2=!0}catch{s2=!1}}if(s2)D1=h2;else if(E1.Limit.isConvergent(j2)){if(F1.fname===_h)switch(j2.toString()){case"0":D1=g.infinity().negate();break;case"Infinity":D1=g.infinity();break;case"-Infinity":D1=g.infinity();break}else if((F1.fname===Vc||F1.fname===li)&&N1.isInfinity)D1=E1.Limit.interval(-1,1);else if(F1.fname===Rs){var k2=F1.args[0],a4=k2.getNum(),n4=k2.getDenom(),o4=a4.toUnitMultiplier();(N1.isInfinity||o4.equals("pi")&&n4.equals(2))&&(D1=divergent())}else if(F1.fname===u.FACTORIAL&&j2.isInfinity)return g.infinity()}}else if(F1.group===wt){if(F1.power>0)return a.parse(F1,i1);r.Utils.even(F1.power)?D1=g.infinity():D1=E1.Limit.diverges()}else if(F1.group===Bs){var P4,v4,P1=F1.collectSymbols().sort(function(o1,a1){return o1.group-a1.group}),B1=P1.pop();for(P4=He(E1.Limit.limit(B1,K1,N1,J1));P1.length;){var z1=P1.pop();v4=He(E1.Limit.limit(z1,K1,N1,J1)),P4.isInfinity||!E1.Limit.isConvergent(P4)&&v4.equals(0)||P4.equals(0)&&E1.Limit.isConvergent(v4)?(z1.containsFunction(_h)&&(z1=[B1,B1=z1][0]),z1.invert(),P4.isInfinity&&v4.isInfinity?P4=g.infinity():P4=E1.Limit.divide(B1,z1,K1,N1,J1)):(P4=a.multiply(P4,v4),B1=a.multiply(B1,z1))}D1=P4}else if(F1.isComposite()){var e2;F1.isLinear()||(F1=a.expand(F1)),D1=new g(0);for(var P1=F1.collectSymbols().sort(function(o1,a1){return a1.group-o1.group}),b2=[],P2=new g(0),c2=0,$2=P1.length;c2<$2;c2++){var Z2=P1[c2].clone();Z2.group===Do||Z2.group===Bs&&Z2.hasFunc()?P2=a.add(P2,Z2):b2.push(Z2)}b2.unshift(P2),b2.length!==1&&(P1=b2);for(var c2=0,$2=P1.length;c2<$2;c2++){var Z2=P1[c2];try{e2=E1.Limit.limit(Z2,K1,N1,J1)}catch{e2=E1.Limit.diverges()}try{D1=a.add(D1,e2)}catch{if(J1++>u.max_lim_depth)return;D1=E1.Limit.limit(E1.diff(F1,K1),K1,N1,J1)}}}}else D1=E1.Limit.divide(u1,L1,K1,N1,J1)}}D1||(D1=a.symfunction("limit",[F1,K1,N1]))}catch{D1=a.symfunction("limit",[F1,K1,N1])}return a.multiply(n2,D1)}}},Fresnel:{S:function(F1){return F1.isConstant(!0)?E1.defint(a.parse("sin(pi*x^2/2)"),g(0),F1,"x"):a.symfunction("S",arguments)},C:function(F1){return F1.isConstant(!0)?E1.defint(a.parse("cos(pi*x^2/2)"),g(0),F1,"x"):a.symfunction("C",arguments)}}};e.register([{name:"diff",visible:!0,numargs:[1,3],build:function(){return E1.diff}},{name:"sum",visible:!0,numargs:4,build:function(){return E1.sum}},{name:"product",visible:!0,numargs:4,build:function(){return E1.product}},{name:"integrate",visible:!0,numargs:[1,2],build:function(){return E1.integrate}},{name:"defint",visible:!0,numargs:[3,4],build:function(){return E1.defint}},{name:"S",visible:!0,numargs:1,build:function(){return E1.Fresnel.S}},{name:"C",visible:!0,numargs:1,build:function(){return E1.Fresnel.C}},{name:"limit",visible:!0,numargs:[3,4],build:function(){return E1.Limit.limit}}]),e.updateAPI()})()}()),Calculus.exports}var hasRequiredAlgebra;function requireAlgebra(){return hasRequiredAlgebra||(hasRequiredAlgebra=1,function(t){{var e=requireNerdamer_core();requireCalculus()}(function(){var r=e.getCore(),a=r.PARSER,l=r.groups.N,u=r.groups.P,d=r.groups.S,g=r.groups.EX,E=r.groups.FN,P=r.groups.PL,Z=r.groups.CP,me=r.groups.CB,_e=r.Utils.keys,He=r.Utils.even,Xe=r.Utils.variables,wt=r.Utils.format,Do=r.Utils.round,sr=r.Frac,Ko=r.Utils.isInt,Bs=r.Symbol,th=r.Settings.CONST_HASH,pf=r.Utils.importFunctions();r.Utils.evaluate;function _h(li,Vc,Rs){if(r.Utils.isSymbol(li))this.parse(li),this.variable=this.variable||Vc;else if(isNaN(li))typeof li=="string"&&this.parse(a.parse(li));else{if(Rs=Rs||0,Vc===void 0)throw new r.exceptions.InvalidVariableNameError("Polynomial expects a variable name when creating using order");this.coeffs=[],this.coeffs[Rs]=li,this.fill(li)}}_h.fromArray=function(li,Vc){if(typeof Vc>"u")throw new r.exceptions.InvalidVariableNameError("A variable name must be specified when creating polynomial from array");var Rs=new _h;return Rs.coeffs=li,Rs.variable=Vc,Rs},_h.fit=function(li,Vc,Rs,qc,Qp,n1){var wh=new Array(Qp+1),gf=Rs-Vc;wh[0]=Vc,wh[Qp]=li,gf-=li*Math.pow(qc,Qp);for(var yh=Qp-1;yh>0;yh--){var ff=Math.pow(qc,yh),e1=gf/ff,s1=Math.sign(e1),b1=s1*Math.floor(Math.abs(e1));gf-=b1*ff,wh[yh]=b1}if(gf!==0)return null;for(var yh=0;yh<wh.length;yh++)wh[yh]=new sr(wh[yh]);return _h.fromArray(wh,n1)},_h.prototype={parse:function(li,Vc){if(this.variable=Xe(li)[0],!li.isPoly())throw r.exceptions.NerdamerTypeError("Polynomial Expected! Received "+r.Utils.text(li));if(Vc=Vc||[],li.power.absEquals(1)||(li=a.expand(li)),li.group===r.groups.N)Vc[0]=li.multiplier;else if(li.group===r.groups.S)Vc[li.power.toDecimal()]=li.multiplier;else for(var Rs in li.symbols){var qc=li.symbols[Rs],Qp=qc.power;if(r.Utils.isSymbol(Qp))throw new r.exceptions.NerdamerTypeError("power cannot be a Symbol");Qp=qc.group===l?0:Qp.toDecimal(),qc.symbols?this.parse(qc,Vc):Vc[Qp]=qc.multiplier}this.coeffs=Vc,this.fill()},fill:function(li){li=Number(li)||0;for(var Vc=this.coeffs.length,Rs=0;Rs<Vc;Rs++)this.coeffs[Rs]===void 0&&(this.coeffs[Rs]=new sr(li));return this},trim:function(){for(var li=this.coeffs.length;li--;){var Vc=this.coeffs[li],Rs=Vc.equals(0);if(Vc&&Rs){if(li===0)break;this.coeffs.pop()}else break}return this},modP:function(li){for(var Vc=this.coeffs.length,Rs=0;Rs<Vc;Rs++){var qc=this.coeffs[Rs];if(qc<0){for(var Qp,n1=Rs;n1<Vc;n1++)if(this.coeffs[n1]>0){Qp=this.coeffs[n1];break}if(Qp){for(n1;n1>Rs;n1--)this.coeffs[n1]=this.coeffs[n1].subtract(new sr(1)),this.coeffs[n1-1]=this.coeffs[n1-1].add(new sr(li));qc=this.coeffs[Rs]}}var wh=qc.mod(li),gf=qc.subtract(wh).divide(li);if(!gf.equals(0)){var yh=Rs+1,ff=this.coeffs[yh]||new sr(0);ff=ff.add(gf),this.coeffs[yh]=new sr(ff),this.coeffs[Rs]=new sr(wh)}}return this},add:function(li){for(var Vc=Math.max(this.coeffs.length,li.coeffs.length),Rs=0;Rs<Vc;Rs++){var qc=this.coeffs[Rs]||new sr(0),Qp=li.coeffs[Rs]||new sr(0);this.coeffs[Rs]=qc.add(Qp)}return this},subtract:function(li){for(var Vc=Math.max(this.coeffs.length,li.coeffs.length),Rs=0;Rs<Vc;Rs++){var qc=this.coeffs[Rs]||new sr(0),Qp=li.coeffs[Rs]||new sr(0);this.coeffs[Rs]=qc.subtract(Qp)}return this},divide:function(li){for(var Vc=this.variable,Rs=r.Utils.arrayClone(this.coeffs),qc=r.Utils.arrayClone(li.coeffs),Qp=Rs.length,n1=qc.length-1,wh=[],gf=0;gf<Qp;gf++){var yh=Qp-(gf+1),ff=yh-n1,e1=Rs[yh].divide(qc[n1]);if(ff<0)break;wh[ff]=e1;for(var s1=0;s1<=n1;s1++)Rs[s1+ff]=Rs[s1+ff].subtract(qc[s1].multiply(e1))}var b1=_h.fromArray(Rs,Vc||"x").trim(),_1=_h.fromArray(wh,Vc||"x");return[_1,b1]},multiply:function(li){for(var Vc=this.coeffs.length,Rs=li.coeffs.length,qc=[],Qp=0;Qp<Vc;Qp++)for(var n1=this.coeffs[Qp],wh=0;wh<Rs;wh++){var gf=Qp+wh,yh=li.coeffs[wh],ff=qc[gf]||new sr(0);qc[gf]=ff.add(n1.multiply(yh))}return this.coeffs=qc,this},isZero:function(){for(var li=this.coeffs.length,Vc=0;Vc<li;Vc++){var Rs=this.coeffs[Vc];if(!Rs.equals(0))return!1}return!0},sub:function(li){for(var Vc=new sr(0),Rs=this.coeffs.length,qc=0;qc<Rs;qc++){var Qp=this.coeffs[qc];Qp.equals(0)||(Vc=Vc.add(Qp.multiply(new sr(Math.pow(li,qc)))))}return Vc},clone:function(){var li=new _h;return li.coeffs=this.coeffs,li.variable=this.variable,li},deg:function(){return this.trim(),this.coeffs.length-1},lc:function(){return this.coeffs[this.deg()].clone()},monic:function(){for(var li=this.lc(),Vc=this.coeffs.length,Rs=0;Rs<Vc;Rs++)this.coeffs[Rs]=this.coeffs[Rs].divide(li);return this},gcd:function(li){var Vc=this.coeffs.length-1,Rs=li.coeffs.length-1,qc;if(Vc<Rs)return li.gcd(this);for(var Qp=this;!li.isZero();){var n1=li.clone();Qp=Qp.clone(),qc=Qp.divide(n1),li=qc[1],Qp=n1}var wh=r.Math2.QGCD.apply(null,Qp.coeffs);if(!wh.equals(1))for(var gf=Qp.coeffs.length,yh=0;yh<gf;yh++)Qp.coeffs[yh]=Qp.coeffs[yh].divide(wh);return Qp},diff:function(){for(var li=[],Vc=this.coeffs.length,Rs=1;Rs<Vc;Rs++)li.push(this.coeffs[Rs].multiply(new sr(Rs)));return this.coeffs=li,this},integrate:function(){for(var li=[0],Vc=this.coeffs.length,Rs=0;Rs<Vc;Rs++){var qc=new sr(Rs+1);li[qc]=this.coeffs[Rs].divide(qc)}return this.coeffs=li,this},gcf:function(li){for(var Vc=function(gf){for(var yh=0;yh<gf.length;yh++)if(!gf[yh].equals(0))return yh},Rs=[],qc=0;qc<this.coeffs.length;qc++){var Qp=this.coeffs[qc];!Qp.equals(0)&&Rs.indexOf(Qp)===-1&&Rs.push(Qp)}var n1=[r.Math2.QGCD.apply(void 0,Rs),Vc(this.coeffs)].toDecimal();if(li){var wh=[];wh[n1[1]-1]=n1[0],n1=_h.fromArray(wh,this.variable).fill()}return n1},quad:function(li){var Vc=[];if(this.coeffs.length>3)throw new Error("Cannot calculate quadratic order of "+(this.coeffs.length-1));if(this.coeffs.length===0)throw new Error("Polynomial array has no terms");var Rs=this.coeffs[2]||0,qc=this.coeffs[1]||0,Qp=this.coeffs[0],n1=qc*qc-4*Rs*Qp;return n1<0&&!li||(Vc[0]=(-qc+Math.sqrt(n1))/(2*Rs),Vc[1]=(-qc-Math.sqrt(n1))/(2*Rs)),Vc},squareFree:function(){for(var li=this.clone(),Vc=1,Rs=li.clone().diff(),qc=li.clone().gcd(Rs),Qp=li.divide(qc)[0],n1=_h.fromArray([new sr(1)],li.variable);!qc.equalsNumber(1);){var wh=Qp.gcd(qc),gf=Qp.divide(wh)[0];if(!gf.equalsNumber(1)&&Vc>1){for(var yh=gf.clone(),ff=1;ff<Vc;ff++)yh.multiply(gf.clone());gf=yh}n1=n1.multiply(gf),Vc++,Qp=wh,qc=qc.divide(wh)[0]}return[n1,Qp,Vc]},toSymbol:function(){var li=this.coeffs.length,Vc=this.variable;if(li===0)return new r.Symbol(0);for(var Rs=li-1,qc="",Qp=0;Qp<li;Qp++){var n1=Qp===Rs?"":"+",wh=this.coeffs[Qp];wh.equals(0)||(qc+=wh+"*"+Vc+"^"+Qp+n1)}return a.parse(qc)},equalsNumber:function(li){return this.trim(),this.coeffs.length===1&&this.coeffs[0].toDecimal()===String(li)},toString:function(){return this.toSymbol().toString()}},Bs.prototype.coeffs=function(li,Vc){Vc&&!this.isPoly(!0)&&a.error("Polynomial expected when requesting coefficients with order"),li=li||[];var Rs=this.clone().distributeMultiplier();if(Rs.isComposite())for(var qc in Rs.symbols){var Qp=Rs.symbols[qc];Qp.isComposite()?Qp.clone().distributeMultiplier().coeffs(li,Vc):Vc?li[Qp.isConstant()?0:Qp.power.toDecimal()]=Qp.multiplier:li.push(Qp.multiplier)}else if(Vc)li[Rs.isConstant(!0)?0:Rs.power.toDecimal()]=Rs.multiplier;else if(Rs.group===me&&Rs.isImaginary()){var n1=new Bs(Rs.multiplier);Rs.each(function(gf){(gf.isConstant(!0)||gf.imaginary)&&(n1=a.multiply(n1,gf))}),li.push(n1)}else li.push(Rs.multiplier);if(Vc)for(var wh=0;wh<li.length;wh++)li[wh]===void 0&&(li[wh]=new Bs(0));return li},Bs.prototype.tBase=function(li){if(typeof li>"u")throw new Error("Symbol.tBase requires a map object!");for(var Vc=[],Rs=this.collectSymbols(null,null,null,!0),qc=Rs.length,Qp=0;Qp<qc;Qp++){var n1=Rs[Qp],wh=n1.group,gf=new df(n1.multiplier,[],li);if(wh===me)for(var yh in n1.symbols){var ff=n1.symbols[yh];gf.terms[li[yh]]=ff.power}else gf.terms[li[n1.value]]=n1.power;Vc.push(gf.fill()),gf.updateCount()}return Vc},Bs.prototype.altVar=function(li){var Vc=this.multiplier.toString(),Rs=this.power.toString();return(Vc==="1"?"":Vc+"*")+li+(Rs==="1"?"":"^"+Rs)},Bs.prototype.sameVars=function(li){if(!(this.symbols||this.group===li.group))return!1;for(var Vc in this.symbols){var Rs=this.symbols[Vc],qc=li.symbols[Vc];if(!qc||Rs.value!==qc.value)return!1}return!0},Bs.prototype.groupTerms=function(li){li=String(li);var Vc,Rs,qc,Qp=[];return this.each(function(n1){if(n1.group===P){qc=n1.groupTerms(li);for(var wh=0;wh<qc.length;wh++){var gf=qc[wh];gf&&(Qp[wh]=gf)}}else Vc=r.Utils.decompose_fn(n1,li,!0),Rs=Vc.x.value===li?Number(Vc.x.power):0,Qp[Rs]=a.add(Qp[Rs]||new Bs(0),Vc.a)}),Qp},Bs.prototype.collectFactors=function(){var li=[];return this.group===me?this.each(function(Vc){li.push(Vc.clone())}):li.push(this.clone()),li};function cf(){this.factors={},this.length=0}cf.prototype.getNumberSymbolics=function(){var li=0;return this.each(function(Vc){Vc.isConstant(!0)||li++}),li},cf.prototype.add=function(li){if(li.equals(0))return this;if(li.equals(-1)&&this.length>0){var Vc=r.Utils.firstObject(this.factors,null,!0);return this.add(a.symfunction(r.Settings.PARENTHESIS,[Vc.obj]).negate()),delete this.factors[Vc.key],this.length--,this}if(li.group===me){var Rs=this;li.multiplier.equals(1)||Rs.add(new Bs(li.multiplier)),li.each(function(n1){Rs.add(n1)})}else{this.preAdd&&(li=this.preAdd(li)),this.pFactor&&(li=a.pow(li,new Bs(this.pFactor)));var qc=li.isConstant();if(qc&&li.equals(1))return this;var Qp=qc?li.value:li.text();Qp in this.factors?(this.factors[Qp]=a.multiply(this.factors[Qp],li),this.factors[Qp].equals(1)&&(delete this.factors[Qp],this.length--)):(this.factors[Qp]=li,this.length++)}return this},cf.prototype.toSymbol=function(){for(var li=new Bs(1),Vc=Object.values(this.factors).sort(function(wh,gf){return wh.group>gf.group}),Rs=0,qc=Vc.length;Rs<qc;Rs++){var Qp=Vc[Rs],n1=Qp.power.equals(1)&&Qp.fname!==""?a.symfunction(r.PARENTHESIS,[Qp]):Qp;li=a.multiply(li,n1)}return li.fname===""&&(li=Bs.unwrapPARENS(li)),li},cf.prototype.merge=function(li){for(var Vc in li)Vc in this.factors?this.factors[Vc]=a.multiply(this.factors[Vc],li[Vc]):this.factors[Vc]=li[Vc];return this},cf.prototype.each=function(li){for(var Vc in this.factors){var Rs=this.factors[Vc];Rs.fname===r.PARENTHESIS&&Rs.isLinear()&&(Rs=Rs.args[0]),li.call(this,Rs,Vc)}return this},cf.prototype.count=function(){return _e(this.factors).length},cf.prototype.clean=function(){try{var li=r.Settings.CONST_HASH;this.factors[li].lessThan(0)&&(this.factors[li].equals(-1)?delete this.factors[li]:this.factors[li].negate(),this.each(function(Vc){Vc.negate()}))}catch{}},cf.prototype.toString=function(){return this.toSymbol().toString()};function df(li,Vc,Rs){this.terms=Vc||[],this.coeff=li,this.map=Rs,this.sum=new r.Frac(0),this.image=void 0}df.prototype.updateCount=function(){this.count=this.count||0;for(var li=0;li<this.terms.length;li++)this.terms[li].equals(0)||this.count++;return this},df.prototype.getVars=function(){for(var li=[],Vc=0;Vc<this.terms.length;Vc++){var Rs=this.terms[Vc];this.getRevMap(),Rs.equals(0)||li.push(this.rev_map[Vc])}return li.join(" ")},df.prototype.len=function(){return typeof this.count>"u"&&this.updateCount(),this.count},df.prototype.toSymbol=function(li){li=li||this.getRevMap();for(var Vc=new Bs(this.coeff),Rs=0;Rs<this.terms.length;Rs++){var qc=li[Rs],Qp=this.terms[Rs];if(!(Qp.equals(0)||qc===th)){var n1=new Bs(qc);n1.power=Qp,Vc=a.multiply(Vc,n1)}}return Vc},df.prototype.getRevMap=function(){if(this.rev_map)return this.rev_map;var li={};for(var Vc in this.map)li[this.map[Vc]]=Vc;return this.rev_map=li,li},df.prototype.generateImage=function(){return this.image=this.terms.join(" "),this},df.prototype.getImg=function(){return this.image||this.generateImage(),this.image},df.prototype.fill=function(){for(var li=this.map.length,Vc=0;Vc<li;Vc++)typeof this.terms[Vc]>"u"?this.terms[Vc]=new r.Frac(0):this.sum=this.sum.add(this.terms[Vc]);return this},df.prototype.divide=function(li){for(var Vc=this.coeff.divide(li.coeff),Rs=this.terms.length,qc=new df(Vc,[],this.map),Qp=0;Qp<Rs;Qp++)qc.terms[Qp]=this.terms[Qp].subtract(li.terms[Qp]),qc.sum=qc.sum.add(qc.terms[Qp]);return qc},df.prototype.multiply=function(li){for(var Vc=this.coeff.multiply(li.coeff),Rs=this.terms.length,qc=new df(Vc,[],this.map),Qp=0;Qp<Rs;Qp++)qc.terms[Qp]=this.terms[Qp].add(li.terms[Qp]),qc.sum=qc.sum.add(qc.terms[Qp]);return qc},df.prototype.isZero=function(){return this.coeff.equals(0)},df.prototype.toString=function(){return"{ coeff: "+this.coeff.toString()+", terms: ["+this.terms.join(",")+"]: sum: "+this.sum.toString()+", count: "+this.count+"}"},r.Utils.toMapObj=function(li){for(var Vc=0,Rs={},qc=0;qc<li.length;qc++){var Qp=li[qc];typeof Rs[Qp]>"u"&&(Rs[Qp]=Vc,Vc++)}return Rs.length=Vc,Rs},r.Utils.filledArray=function(li,Vc,Rs){for(var qc=[];Vc--;)qc[Vc]=Rs?new Rs(li):li;return qc},r.Utils.arrSum=function(li){for(var Vc=0,Rs=li.length,qc=0;qc<Rs;qc++)Vc+=li[qc];return Vc},r.Utils.haveIntersection=function(li,Vc){var Rs;return Vc.length>li.length&&(Rs=Vc,Vc=li,li=Rs),li.some(function(qc){return Vc.indexOf(qc)>-1})},r.Utils.subFunctions=function(li,Vc){Vc=Vc||{};var Rs=[];return li.each(function(qc){if(qc.group===E||qc.previousGroup===E){var Qp=r.Utils.text(qc,"hash"),n1=Vc[Qp];if(n1)Rs.push(qc.altVar(n1));else{var wh=qc.fname+_e(Vc).length;Vc[Qp]=wh,Rs.push(qc.altVar(wh))}}else qc.group===me||qc.group===P||qc.group===Z?Rs.push(r.Utils.subFunctions(qc,Vc)):Rs.push(qc.text())}),li.group===Z||li.group===P?li.altVar(r.Utils.inBrackets(Rs.join("+"))):li.group===me?li.altVar(r.Utils.inBrackets(Rs.join("*"))):li.text()},r.Utils.getFunctionsSubs=function(li){var Vc={};for(var Rs in li)Vc[li[Rs]]=a.parse(Rs);return Vc};var uf=r.Algebra={version:"1.4.6",proots:function(li,Vc){Vc=Vc||7;var Rs=0,qc=[],Qp=function(q2,B2,K2){for(var S2=V2(q2,B2,K2).concat(qc),E1=0;E1<Rs;E1++)S2.unshift(0);return S2};if(li instanceof Bs&&li.isPoly()){if(li.distributeMultiplier(),li.group===P){var n1=r.Utils.arrayMin(_e(li.symbols)),wh=li.symbols[n1].clone().toUnitMultiplier();li=a.expand(a.divide(li,wh)),qc.push(0)}if(li.group===r.groups.S)return[0];if(li.group===r.groups.PL)var s1=_e(li.symbols),gf=r.Utils.arrayMin(s1),li=r.PARSER.divide(li,r.PARSER.parse(li.value+"^"+gf));for(var yh=_e(li.symbols).sort().pop(),ff=li.group===r.groups.PL?li.symbols:li.symbols[yh],e1=ff.group,s1=e1===d?[ff.power.toDecimal()]:_e(ff.symbols),b1=[],_1=r.Utils.arrayMax(s1),V1=1;V1<=_1;V1++){var I1=0;s1.indexOf(V1+"")!==-1&&(e1===d?I1=ff.multiplier:I1=ff.symbols[V1].multiplier),b1.unshift(I1)}return b1.push(li.symbols[th].multiplier),ff.group===d&&(b1[0]=ff.multiplier),Qp(b1,s1,_1)}else if(r.Utils.isArray(li)){for(var i2=li,b1=[],s1=[],R2=0,V1=0;V1<i2.length;V1++){for(var F2=i2[V1][0],X1=i2[V1][1],W2=X1-R2-1,N2=0;N2<W2;N2++)b1.unshift(0);b1.unshift(F2),X1!==0&&s1.push(X1),R2=X1}var _1=Math.max.apply(void 0,s1);return Qp(b1,s1,_1)}else throw new r.exceptions.NerdamerTypeError("Cannot calculate roots. Symbol must be a polynomial!");function V2(q2,B2,K2){var S2=100,E1=q2.slice(0);if(q2.unshift(K2),K2>S2)throw new r.exceptions.ValueLimitExceededError("This utility accepts polynomials of degree up to "+S2+". ");var F1=[],K1={};for(K1.Degree=K2,V1=0;V1<K2;V1++)F1.push(0);var N1=F1.slice(0);function J1(A2,l2,x2,u2,s2,j2){s2[0]=j2.b=u2[0],s2[1]=j2.a=-(l2*j2.b)+u2[1];for(var h2=2;h2<A2;h2++)s2[h2]=-(l2*j2.a+x2*j2.b)+u2[h2],j2.b=j2.a,j2.a=s2[h2]}function E2(A2,l2,x2,u2,s2,j2,h2,k2,a4){var n4=new Object,o4=3;return n4.b=n4.a=0,J1(l2,h2,k2,j2,a4,n4),s2.c=n4.a,s2.d=n4.b,Math.abs(s2.c)<=100*A2*Math.abs(j2[l2-1])&&Math.abs(s2.d)<=100*A2*Math.abs(j2[l2-2])||(s2.h=k2*u2,Math.abs(s2.d)>=Math.abs(s2.c)?(o4=2,s2.e=x2/s2.d,s2.f=s2.c/s2.d,s2.g=h2*u2,s2.a3=s2.e*(s2.g+x2)+s2.h*(u2/s2.d),s2.a1=-x2+s2.f*u2,s2.a7=s2.h+(s2.f+h2)*x2):(o4=1,s2.e=x2/s2.c,s2.f=s2.d/s2.c,s2.g=s2.e*h2,s2.a3=s2.e*x2+(s2.g+s2.h/s2.c)*u2,s2.a1=-(x2*(s2.d/s2.c))+u2,s2.a7=s2.g*s2.d+s2.h*s2.f+x2)),o4}function n2(A2,l2,x2,u2,s2,j2,h2,k2,a4){var n4;if(x2==3){h2[1]=h2[0]=0;for(var o4=2;o4<l2;o4++)h2[o4]=k2[o4-2];return}if(n4=x2==1?s2:u2,Math.abs(j2.a1)>10*A2*Math.abs(n4)){j2.a7/=j2.a1,j2.a3/=j2.a1,h2[0]=a4[0],h2[1]=-(a4[0]*j2.a7)+a4[1];for(var o4=2;o4<l2;o4++)h2[o4]=-(a4[o4-1]*j2.a7)+k2[o4-2]*j2.a3+a4[o4]}else{h2[0]=0,h2[1]=-(a4[0]*j2.a7);for(var o4=2;o4<l2;o4++)h2[o4]=-(a4[o4-1]*j2.a7)+k2[o4-2]*j2.a3}}function D1(A2,l2,x2,u2,s2,j2,h2,k2,a4,n4,o4,P4,v4,P1,z1,e2,b2){var P2,c2,$2,Z2,Ym,o1,a1,l1,w1;l2.b=l2.a=0,A2!=3&&(A2!=2?(P2=x2+v4*h2+P4*n4,c2=k2+(v4+P1*n4)*a4):(P2=(x2+o4)*n4+P4,c2=(n4+v4)*k2+P1*a4),$2=-(z1[e2-1]/b2[e2]),Z2=-(z1[e2-2]+$2*b2[e2-1])/b2[e2],Ym=P1*Z2*u2,o1=$2*j2,a1=$2*$2*s2,l1=-(o1+a1)+Ym,w1=-l1+c2+$2*P2,w1!=0&&(l2.a=-((v4*(a1+o1)+P1*($2*u2+Z2*j2))/w1)+v4,l2.b=P1*(1+l1/w1)))}function i1(A2,l2,x2,u2){var s2,j2,h2;if(u2.sr=u2.si=u2.lr=u2.li=0,A2==0){u2.sr=l2!=0?-(x2/l2):u2.sr;return}if(x2==0){u2.lr=-(l2/A2);return}s2=l2/2,Math.abs(s2)<Math.abs(x2)?(h2=x2>=0?A2:-A2,h2=-h2+s2*(s2/Math.abs(x2)),j2=Math.sqrt(Math.abs(h2))*Math.sqrt(Math.abs(x2))):(h2=-(A2/s2*(x2/s2))+1,j2=Math.sqrt(Math.abs(h2))*Math.abs(s2)),h2>=0?(j2=s2>=0?-j2:j2,u2.lr=(-s2+j2)/A2,u2.sr=u2.lr!=0?x2/u2.lr/A2:u2.sr):(u2.lr=u2.sr=-(s2/A2),u2.si=Math.abs(j2/A2),u2.li=-u2.si)}function g1(A2,l2,x2,u2,s2,j2,h2,k2,a4,n4,o4,P4){var v4=new Object,P1,z1,e2,b2,P2,c2,$2,Z2,Ym,o1,a1,l1=0,w1,h1=0;x2.NZ=0,c2=u2,Z2=s2;do{if(v4.li=v4.lr=v4.si=v4.sr=0,i1(1,c2,Z2,v4),x2.szr=v4.sr,x2.szi=v4.si,x2.lzr=v4.lr,x2.lzi=v4.li,Math.abs(Math.abs(x2.szr)-Math.abs(x2.lzr))>.01*Math.abs(x2.lzr))break;for(J1(h2,c2,Z2,a4,j2,k2),z1=Math.abs(-(x2.szr*k2.b)+k2.a)+Math.abs(x2.szi*k2.b),o1=Math.sqrt(Math.abs(Z2)),P1=2*Math.abs(j2[0]),P2=-(x2.szr*k2.b),a1=1;a1<l2;a1++)P1=P1*o1+Math.abs(j2[a1]);if(P1=P1*o1+Math.abs(P2+k2.a),P1=(9*P1+2*Math.abs(P2)-7*(Math.abs(k2.a+P2)+o1*Math.abs(k2.b)))*A2,z1<=20*P1){x2.NZ=2;break}if(l1++,l1>20)break;if(l1>=2&&b2<=.01&&z1>=e2&&!h1){for(b2=b2<A2?Math.sqrt(A2):Math.sqrt(b2),c2-=c2*b2,Z2+=Z2*b2,J1(h2,c2,Z2,a4,j2,k2),a1=0;a1<5;a1++)w1=E2(A2,l2,k2.a,k2.b,o4,P4,c2,Z2,n4),n2(A2,l2,w1,k2.a,k2.b,o4,P4,n4,j2);h1=1,l1=0}e2=z1,w1=E2(A2,l2,k2.a,k2.b,o4,P4,c2,Z2,n4),n2(A2,l2,w1,k2.a,k2.b,o4,P4,n4,j2),w1=E2(A2,l2,k2.a,k2.b,o4,P4,c2,Z2,n4),D1(w1,k2,k2.a,o4.a1,o4.a3,o4.a7,k2.b,o4.c,o4.d,o4.f,o4.g,o4.h,c2,Z2,P4,l2,a4),$2=k2.a,Ym=k2.b,Ym!=0&&(b2=Math.abs((-Z2+Ym)/Ym),c2=$2,Z2=Ym)}while(Ym!=0)}function u1(A2,l2,x2,u2,s2,j2,h2,k2,a4){var n4,o4,P4,v4,P1,z1,e2,b2,P2,c2,$2,Z2=u2-1;for(l2.NZ=$2=P2=0,e2=x2.a;;){for(z1=s2[0],h2[0]=z1,c2=1;c2<j2;c2++)h2[c2]=z1=z1*e2+s2[c2];for(P4=Math.abs(z1),v4=Math.abs(e2),n4=.5*Math.abs(h2[0]),c2=1;c2<j2;c2++)n4=n4*v4+Math.abs(h2[c2]);if(P4<=20*A2*(2*n4-P4)){l2.NZ=1,l2.szr=e2,l2.szi=0;break}if($2++,$2>10)break;if($2>=2&&Math.abs(b2)<=.001*Math.abs(-b2+e2)&&P4>P1){P2=1,l2.a=e2;break}for(P1=P4,a4[0]=o4=k2[0],c2=1;c2<u2;c2++)a4[c2]=o4=o4*e2+k2[c2];if(Math.abs(o4)>Math.abs(k2[Z2])*10*A2)for(b2=-(z1/o4),k2[0]=h2[0],c2=1;c2<u2;c2++)k2[c2]=b2*a4[c2-1]+h2[c2];else for(k2[0]=0,c2=1;c2<u2;c2++)k2[c2]=a4[c2-1];for(o4=k2[0],c2=1;c2<u2;c2++)o4=o4*e2+k2[c2];b2=Math.abs(o4)>Math.abs(k2[Z2])*10*A2?-(z1/o4):0,e2+=b2}return P2}function L1(A2,l2,x2,u2,s2,j2,h2,k2,a4,n4,o4,P4){var v4=new Object,P1=new Object,z1=new Array(l2),e2=new Array(l2),b2,P2,c2,$2,Z2,Ym,o1,a1,l1,w1,h1,C1,q1,$1,W1,Y1,_2,O2,u4,p4=1,l4,A4,h3,s3,y4,r4;for(P4.NZ=0,$2=c2=.25,Z2=u2,a1=s2,v4.b=v4.a=0,J1(a4,o4,s2,k2,n4,v4),b2=v4.a,P2=v4.b,P1.h=P1.g=P1.f=P1.e=P1.d=P1.c=P1.a7=P1.a3=P1.a1=0,s3=E2(A2,h2,b2,P2,P1,j2,o4,s2,z1),l4=0;l4<x2;l4++){if(O2=1,n2(A2,h2,s3,b2,P2,P1,j2,z1,n4),s3=E2(A2,h2,b2,P2,P1,j2,o4,s2,z1),D1(s3,v4,b2,P1.a1,P1.a3,P1.a7,P2,P1.c,P1.d,P1.f,P1.g,P1.h,o4,s2,j2,h2,k2),W1=v4.a,_2=Y1=v4.b,w1=j2[h2-1]!=0?-(k2[h2]/j2[h2-1]):0,h1=q1=1,l4!=0&&s3!=3&&(q1=_2!=0?Math.abs((_2-a1)/_2):q1,h1=w1!=0?Math.abs((w1-Z2)/w1):h1,$1=q1<o1?q1*o1:1,C1=h1<Ym?h1*Ym:1,y4=$1<$2?1:0,A4=C1<c2?1:0,A4||y4)){for(u4=0;u4<h2;u4++)e2[u4]=j2[u4];for(l1=w1,h3=r4=0;;){if(!(O2&&(O2=0)==0&&A4&&(!y4||C1<$1))){if(g1(A2,h2,P4,W1,Y1,n4,a4,v4,k2,z1,P1,j2),b2=v4.a,P2=v4.b,P4.NZ>0)return;if(p4=r4=1,$2*=.25,h3||!A4)p4=0;else for(u4=0;u4<h2;u4++)j2[u4]=e2[u4]}if(p4!=0){if(v4.a=l1,p4=u1(A2,P4,v4,h2,k2,a4,n4,j2,z1),l1=v4.a,P4.NZ>0)return;if(h3=1,c2*=.25,p4!=0){W1=-(l1+l1),Y1=l1*l1;continue}}for(u4=0;u4<h2;u4++)j2[u4]=e2[u4];if(!y4||r4)break}J1(a4,o4,s2,k2,n4,v4),b2=v4.a,P2=v4.b,s3=E2(A2,h2,b2,P2,P1,j2,o4,s2,z1)}a1=_2,Z2=w1,o1=q1,Ym=h1}}function B1(A2,l2,x2,u2){var s2=A2.Degree,j2=3.141592653589793/180,h2=Math.LN2,k2=A2.Degree+1,a4=new Array(k2),n4=new Array(k2),o4=new Array(k2),P4=new Array(k2),v4=new Object,P1=new Object,z1,e2,b2,P2,c2,$2,Z2,Ym,o1,a1,l1,w1,h1,C1,q1,$1,W1,Y1,_2,O2,u4,p4,l4,A4;w1=1;do e2=w1,w1/=2,h1=1+w1;while(h1>1);var h3=Number.MIN_VALUE/e2,s3=Math.cos(94*j2),y4=Math.sin(94*j2),r4=Math.sqrt(.5),z4=-r4;for(P1.NZ=_2=0,P1.szr=P1.szi=P1.lzr=P1.lzi=0;l2[s2]==0;)x2[_2]=u2[_2]=0,s2--,_2++;for(l4=s2+1;s2>=1;){if(s2<=2){s2<2?(x2[A2.Degree-1]=-(l2[1]/l2[0]),u2[A2.Degree-1]=0):(v4.li=v4.lr=v4.si=v4.sr=0,i1(l2[0],l2[1],l2[2],v4),x2[A2.Degree-2]=v4.sr,u2[A2.Degree-2]=v4.si,x2[A2.Degree-1]=v4.lr,u2[A2.Degree-1]=v4.li);break}for(Z2=0,Ym=Number.MAX_VALUE,e4=0;e4<l4;e4++)a1=Math.abs(l2[e4]),a1>Z2&&(Z2=a1),a1!=0&&a1<Ym&&(Ym=a1);if(o1=h3/Ym,(o1<=1&&Z2>=10||o1>1&&Number.MAX_VALUE/o1>=Z2)&&(o1=o1==0?Number.MIN_VALUE:o1,u4=Math.floor(Math.log(o1)/h2+.5),c2=Math.pow(2,u4),c2!=1))for(e4=0;e4<l4;e4++)l2[e4]*=c2;for(var e4=0;e4<l4;e4++)n4[e4]=Math.abs(l2[e4]);n4[s2]=-n4[s2],p4=s2-1,a1=Math.exp((Math.log(-n4[s2])-Math.log(n4[0]))/s2),n4[p4]!=0&&(l1=-n4[s2]/n4[p4],a1=l1<a1?l1:a1),l1=a1;do{a1=l1,l1=.1*a1,$2=n4[0];for(var e4=1;e4<l4;e4++)$2=$2*l1+n4[e4]}while($2>0);P2=a1;do{b2=$2=n4[0];for(var e4=1;e4<s2;e4++)$2=a1*$2+n4[e4],b2=a1*b2+$2;$2=a1*$2+n4[s2],P2=$2/b2,a1-=P2}while(Math.abs(P2/a1)>.005);z1=a1;for(var e4=1;e4<s2;e4++)a4[e4]=(s2-e4)*l2[e4]/s2;for(a4[0]=l2[0],w1=l2[s2],h1=l2[p4],A4=a4[p4]==0?1:0,O2=0;O2<5;O2++)if(C1=a4[p4],A4){for(var e4=0;e4<p4;e4++)_2=p4-e4,a4[_2]=a4[_2-1];a4[0]=0,A4=a4[p4]==0?1:0}else{$1=-w1/C1;for(var e4=0;e4<p4;e4++)_2=p4-e4,a4[_2]=$1*a4[_2-1]+l2[_2];a4[0]=l2[0],A4=Math.abs(a4[p4])<=Math.abs(h1)*e2*10?1:0}for(var e4=0;e4<s2;e4++)P4[e4]=a4[e4];for(O2=1;O2<=20;O2++)if(Y1=-(y4*z4)+s3*r4,z4=y4*r4+s3*z4,r4=Y1,q1=z1*r4,W1=-(2*q1),L1(e2,k2,20*O2,q1,z1,a4,s2,l2,l4,o4,W1,P1),P1.NZ!=0){_2=A2.Degree-s2,x2[_2]=P1.szr,u2[_2]=P1.szi,l4=l4-P1.NZ,s2=l4-1;for(var e4=0;e4<l4;e4++)l2[e4]=o4[e4];P1.NZ!=1&&(x2[_2+1]=P1.lzr,u2[_2+1]=P1.lzi);break}else for(var e4=0;e4<s2;e4++)a4[e4]=P4[e4];if(O2>20){A2.Degree-=s2;break}}}B1(K1,E1,N1,F1);var Q1=F1.length;for(V1=0;V1<Q1;V1++){var Z1=Do(F1[V1],Vc+8),A1=Do(N1[V1],Vc+8);A1=Vc-String(A1).length>2?A1:N1[V1];var a2=Z1<0?"-":"";A1===0&&(A1=""),Z1===0&&(Z1=""),Z1=Math.abs(Z1)===1?a2+"i":Z1?Z1+"*i":"";var v2=A1&&Z1?A1+"+"+Z1:A1+Z1;N1[V1]=v2.replace(/\+\-/g,"-")}return N1}},roots:function(li){if(li.isConstant(!0,!0))return r.Utils.nroots(li);var Vc=uf.proots(li).map(function(Rs){return a.parse(Rs)});return r.Vector.fromArray(Vc)},froot:function(li,Vc,Rs){var qc=function(Qp){for(var n1=1e-12,wh=Rs||r.Utils.build(r.Calculus.diff(li.clone())),gf=li instanceof Function?li:r.Utils.build(li),yh=1e4,ff=!1,e1=0;!ff;){var s1=Qp-gf(Qp)/wh(Qp),b1=Math.abs(s1)-Math.abs(Qp),_1=Math.abs(b1);Qp=s1,_1<n1?ff=!0:e1>yh&&(Qp=null,ff=!0),e1++}return Qp};return qc(Number(Vc))},quad:function(li,Vc,Rs){var qc=function(Qp,n1,wh,gf){return a.parse("-("+n1+"+"+gf+"*sqrt(("+n1+")^2-4*("+Qp+")*("+wh+")))/(2*"+Qp+")")};return[qc(li,Vc,Rs,1),qc(li,Vc,Rs,-1)]},sumProd:function(li,Vc){return uf.quad(-Vc,li,-1).map(function(Rs){return Rs.invert()})},coeffs:function(li,Vc,Rs){Vc=String(Vc),li=a.expand(li),Rs=Rs||[new Bs(0)],li.group===g&&li.contains(Vc,!0)&&a.error("Unable to get coefficients using expression "+li.toString());var qc=Xe(li);if(qc.length===1&&qc[0]===Vc&&!li.isImaginary())for(var Qp=new _h(li).coeffs.map(function(s1){return new Bs(s1)}),n1=0,wh=Qp.length;n1<wh;n1++){var gf=Qp[n1],yh=Rs[n1];yh&&(gf=a.add(yh,gf)),Rs[n1]=gf}else if(Vc||a.error("Polynomial contains more than one variable. Please specify which variable is to be used!"),qc.indexOf(Vc)===-1)Rs[0]=a.add(li,Rs[0]);else if(Rs=Rs||[new Bs(0)],li.group===me){var ff=li.symbols[Vc];ff||a.error("Expression is not a polynomial!");var e1=Number(ff.power);gf=a.divide(li.clone(),ff.clone()),(gf.contains(Vc,!0)||e1<0||!Ko(e1))&&a.error("Expression is not a polynomial!");var yh=Rs[e1];yh&&(gf=a.add(yh,gf)),Rs[e1]=gf}else li.group===Z&&li.each(function(s1){uf.coeffs(s1.clone(),Vc,Rs)},!0);for(var n1=0,wh=Rs.length;n1<wh;n1++)typeof Rs[n1]>"u"&&(Rs[n1]=new Bs(0));return Rs},polyPowers:function(li,Vc,Rs){Rs=Rs||[];var qc=qc=li.group;if(qc===P&&Vc===li.value)Rs=Rs.concat(_e(li.symbols));else if(qc===Z)for(var Qp in li.symbols){var n1=li.symbols[Qp],qc=n1.group,wh=n1.value;if(qc===d&&Vc===wh)Rs.push(n1.power);else if(qc===P||qc===Z)Rs=uf.polyPowers(n1,Vc,Rs);else if(qc===me&&n1.contains(Vc)){var gf=n1.symbols[Vc];gf&&Rs.push(gf.power)}else(qc===l||Vc!==wh)&&Rs.push(0)}else qc===me&&li.contains(Vc)&&Rs.push(r.Utils.decompose_fn(li,Vc,!0).x.power);return r.Utils.arrayUnique(Rs).sort()},Factor:{split:function(li){var Vc=new Bs(1),Rs=new Bs(1);return uf.Factor.factor(li,new cf).each(function(qc){var Qp=a.parse(qc);qc.isConstant(!0)?Vc=a.multiply(Vc,Qp):Rs=a.multiply(Rs,Qp)}),[Vc,Rs]},mix:function(li,Vc){for(var Rs=_e(li),qc=Rs.length,Qp=[],n1=0;n1<qc;n1++){for(var wh=Rs[n1],gf=li[wh],yh=Qp.length,ff=0;ff<yh;ff++){var e1=Qp[ff]*wh;Qp.push(e1),Vc&&Qp.push(-e1)}for(var ff=1;ff<=gf;ff++)Qp.push(Math.pow(wh,ff))}return Qp},common:function(li,Vc){try{if(li.group===Z){for(var Rs=a.expand(li.clone(),!0).collectSymbols(null,null,function(e1,s1){return(s1.length||1)-(e1.length||1)}),qc={},Qp=[],n1=0;n1<Rs.length;n1++){var wh=Rs[n1];Qp.push(wh.multiplier.clone()),wh.each(function(e1){var s1=Number(e1.power);if(isNaN(s1))throw new Error("exiting");e1.value in qc?(s1<qc[e1.value][0]&&(qc[e1.value][0]=s1),qc[e1.value][1].push(e1)):qc[e1.value]=[s1,[e1]]})}var gf=new Bs(1);for(var yh in qc)qc[yh][1].length===Rs.length&&(gf=a.multiply(gf,a.pow(new Bs(yh),new Bs(qc[yh][0]))));var ff=r.Math2.QGCD.apply(null,Qp);if(!ff.equals(1)){Vc.add(new Bs(ff));for(var n1=0;n1<Rs.length;n1++)Rs[n1].multiplier=Rs[n1].multiplier.divide(ff)}if(!gf.equals(1)){Vc.add(gf),li=new Bs(0);for(var n1=0;n1<Rs.length;n1++)li=a.add(li,a.divide(Rs[n1],gf.clone()))}}}catch{}return li},zeroes:function(li,Vc){var Rs=function(){throw new r.exceptions.ValueLimitExceededError("Exiting")};try{var qc,Qp,n1,wh,gf;li=a.expand(li.clone()),gf=li.toString(),qc=Xe(li),n1=new Bs(0);for(var yh=[],ff=[],e1=0,s1=qc.length;e1<qc.length;e1++){for(var b1={},_1=0;_1<s1;_1++)e1!==_1&&(b1[qc[_1]]=0);Qp=a.parse(gf,b1);var V1=Qp.power;Ko(V1)||Rs(),yh.push(Qp),ff.push(Qp.power)}if(r.Utils.allSame(ff)){var I1=li.length,i2=yh.length;i2===2&&(wh=new sr(ff[0]/(I1-1))),i2===3&&(wh=new sr(ff[0]/Math.round((Math.sqrt(8*I1-1)-3)/2)))}else wh=r.Math2.QGCD.apply(null,ff);Ko(wh)||Rs();for(var e1=0;e1<yh.length;e1++){var R2=yh[e1],F2=R2.power.clone().divide(wh);R2.multiplier=new sr(Math.pow(R2.multiplier,1/F2)),R2.power=wh.clone(),n1=a.add(n1,R2)}if(n1.group!==Z)return li;for(;;){var X1=uf.div(li.clone(),n1.clone());if(X1[1].equals(0)){if(li=X1[0],Vc.add(n1.clone()),li.equals(1))break}else break}}catch{}return li},factor:function(li,Vc){if(li.isConstant())return r.Math2.factor(li);var Rs=a.parse(li),qc=uf.Factor._factor(Rs,Vc);if(qc.equals(li))return qc;if(qc.group===me){var Qp=new Bs(1),n1=a.parse(qc.power),wh=a.parse(qc.multiplier);qc.toUnitMultiplier(),qc.multiplier.lessThan(0)&&(Qp.negate(),qc.negate()),qc.each(function(gf){var yh=a.parse(uf.Factor._factor(gf));yh.group===me?(wh=a.multiply(wh,Bs.create(yh.multiplier)),yh.each(function(ff){var e1=a.parse(uf.Factor._factor(ff));Qp=a.multiply(Qp,e1),e1.group===me&&(wh=a.multiply(wh,Bs.create(e1.multiplier)))})):Qp=a.multiply(Qp,yh)}),qc=a.pow(a.multiply(wh,Qp),n1)}return qc},quadFactor:function(li,Vc){if(li.isPoly()&&uf.degree(li.equals(2))){var Rs=r.Utils.variables(li)[0],qc=uf.coeffs(li,Rs),Qp=uf.Factor._factor(qc[2].clone());if(Qp.group===me){var n1=Qp.collectSymbols();if(n1.length>2)return li;var wh=a.multiply(a.parse(qc[0]),a.parse(n1[0])),gf=a.parse(qc[1]).negate(),yh=a.parse(n1[1]),ff=uf.quad(yh,gf,wh).filter(function(b1){if(r.Utils.isInt(b1))return b1});if(ff.length===1){var e1=ff[0],s1=a.divide(qc[0],a.parse(e1));r.Utils.isInt(s1)&&(Vc.add(a.parse(wt("({0})*({1})+({2})",n1[1],Rs,s1))),Vc.add(a.parse(wt("({0})*({1})+({2})",n1[0],Rs,e1))),li=new Bs(1))}}}return li},cubeFactor:function(li,Vc){if(li.isComposite()){var Rs=li.collectSymbols();if(Rs.length===2){var qc=Rs[0].sign(),Qp=Rs[0].clone().abs(),n1=Rs[1].sign(),wh=Rs[1].clone().abs();if(Qp.isCube()&&wh.isCube()){qc<n1&&([qc,n1]=[n1,qc],[Qp,wh]=[wh,Qp]);var gf=a.parse(Qp.getNth(3)),yh=a.parse(wh.getNth(3)),ff=a.multiply(a.expand(a.pow(Qp.clone().toUnitMultiplier(),a.parse("1/3"))),gf),e1=a.multiply(a.expand(a.pow(wh.clone().toUnitMultiplier(),a.parse("1/3"))),yh);qc===1&&n1===-1?(Vc.add(a.parse(wt("(({0})-({1}))",ff,e1))),Vc.add(a.parse(wt("(({0})^2+({0})*({1})+({1})^2)",ff,e1))),li=Bs(1)):qc===1&&n1===1&&(Vc.add(a.parse(wt("(({0})+({1}))",ff,e1))),Vc.add(a.parse(wt("(({0})^2-({0})*({1})+({1})^2)",ff,e1))),li=Bs(1))}}}return li},_factor:function(li,Vc){if(li.group,li.group===E){var Rs=li.args[0];if(Rs.group===d&&Rs.isSimple())return li}else if(li.group===d&&li.isSimple())return li;if(li.group===Z){li.distributeMultiplier(!0);var qc=new Bs(0);li.each(function(N1){(N1.group===Z&&N1.power.greaterThan(1)||N1.group===me)&&(N1=a.expand(N1)),qc=a.add(qc,N1)}),qc.power=li.power,li=qc}li.group===E&&li.fname!=="sqrt"&&(li=r.Utils.evaluate(li));var Qp=li.clone();try{if(li.group===me){var I1=a.parse(li.power),n1,wh,gf,yh,ff,e1;if(n1=uf.Simplify.strip(li.getDenom()),wh=uf.Simplify.strip(li.getNum()),gf=n1.pop(),yh=wh.pop(),yh.equals(li))return li;e1=uf.Factor.factor(yh),ff=uf.Factor.factor(gf);var s1=uf.Simplify.unstrip(wh,e1),b1=uf.Simplify.unstrip(n1,ff),_1=a.divide(s1,b1);return _1}if(li.group===d)return li;if(li.isConstant()){if(li.equals(1))return li.clone();var V1=r.Math2.factor(li);return V1}var I1=li.power.clone();if(Ko(I1)&&!(I1.lessThan(0)&&li.group===E)){var i2=I1.sign();li.toLinear(),Vc=Vc||new cf;var R2={};li=a.parse(r.Utils.subFunctions(li,R2)),_e(R2).length>0&&(Vc.preAdd=function(J1){var E2=a.parse(J1,r.Utils.getFunctionsSubs(R2));return E2}),li.isLinear()||(Vc.pFactor=li.power.toString(),li.toLinear());var F2=Xe(li);li.isImaginary()&&F2.push(r.Settings.IMAGINARY);var X1=F2.length>1;if(X1){var W2=!0,N2=!0;if(li.each(function(J1){J1.group!==d&&(W2=!1),J1.multiplier.equals(1)||(N2=!1)}),W2&&N2)return a.pow(a.parse(li,r.Utils.getFunctionsSubs(R2)),a.parse(I1))}var V2=new cf;li=uf.Factor.coeffFactor(li,V2),V2.each(function(J1){He(I1)&&J1.lessThan(0)&&J1.negate(),i2<0&&J1.invert(),Vc.add(J1)});var q2=new cf;if(li=uf.Factor.powerFactor(li,q2),q2.each(function(J1){i2<0&&J1.invert(),Vc.add(J1)}),X1)li=uf.Factor.cubeFactor(li,Vc),li=uf.Factor.mfactor(li,Vc),Vc.each(function(J1){i2<0&&J1.power.negate()});else{var B2=F2[0];li=uf.Factor.squareFree(li,Vc,B2);var K2=new cf;li=uf.Factor.trialAndError(li,K2,B2);var S2=K2.toSymbol();if(S2.equals(Qp))return S2;for(var E1 in K2.factors){var F1=K2.factors[E1];Vc.add(a.pow(F1,a.parse(I1)))}li.equals(Qp)&&(li=uf.Factor.quadFactor(li,Vc))}li=a.parse(li,r.Utils.getFunctionsSubs(R2));var K1=Vc.length===1;Vc.add(a.pow(li,a.parse(I1)));var _1=Vc.toSymbol();return K1&&li.equals(1)&&_1.isLinear()&&(_1=a.pow(_1,a.parse(I1))),_1}return li}catch{return Qp}},reduce:function(li,Vc){if(li.group===Z&&li.length===2){var Rs=li.collectSymbols().sort(function(s1,b1){return b1.multiplier-s1.multiplier});if(Rs[0].power.equals(Rs[1].power)){var qc=a.parse(Rs[0].power),Qp=Rs[0].clone().toLinear(),n1=Rs[1].clone().toLinear();Vc.add(a.add(Qp.clone(),n1.clone())),n1.negate();for(var wh=Number(qc),gf=new Bs(0),yh=1;yh<=wh;yh++){var ff=a.pow(Qp.clone(),a.subtract(qc.clone(),new Bs(yh))),e1=a.pow(n1.clone(),a.subtract(new Bs(yh),new Bs(1)));gf=a.add(gf,a.multiply(ff,e1))}return gf}}return li},squareFree:function(li,Vc,Rs){if(li.isConstant()||li.group===d)return li;var qc=new _h(li,Rs),Qp=qc.squareFree(),n1=Qp[2];if(n1!==1){var wh=Qp[1].toSymbol();wh.power=wh.power.multiply(new sr(n1)),Vc.add(uf.Factor.factor(wh));var gf=uf.Factor.squareFree(Qp[0].toSymbol(),Vc);return gf}return li},powerFactor:function(li,Vc){if(li.group!==P||li.previousGroup===g)return li;var Rs=_e(li.symbols);if(!r.Utils.allNumeric(Rs))return li;var qc=r.Utils.arrayMin(Rs),Qp=new Bs(0),n1=a.parse(li.value+"^"+qc);return li.each(function(wh){wh=a.divide(wh,n1.clone()),Qp=a.add(Qp,wh)}),Vc.add(n1),Qp},coeffFactor:function(li,Vc){if(li.isComposite()){var Rs=r.Math2.QGCD.apply(null,li.coeffs());if(!Rs.equals(1))li.each(function(wh){wh.isComposite()?wh.each(function(gf){gf.multiplier=gf.multiplier.divide(Rs)}):wh.multiplier=wh.multiplier.divide(Rs)}),li.updateHash();else{var qc=function(wh){var gf;return wh.group===me?(gf=0,wh.each(function(yh){gf+=yh.power})):gf=Number(wh.power),gf},Qp=li.collectSymbols(null,null,null,!0).sort(function(wh,gf){return wh.isConstant(!0)?1:gf.power-wh.power}),n1=Qp[0];(qc(n1)>qc(Qp[1])||Qp[1].isConstant(!0))&&n1.multiplier.lessThan(0)&&(Vc.add(new Bs(-1)),li.each(function(wh){wh.negate()},!0))}Vc&&Vc.add(new Bs(Rs))}return li},trialAndError:function(li,Vc,Rs){var qc=li.clone();try{var Qp=[];if(li.isConstant()||li.group===d)return li;for(var n1=new _h(li,Rs),wh=n1.coeffs[0],gf=r.Math2.ifactor(wh),yh=uf.proots(li),ff=0;ff<yh.length;ff++){var e1=yh[ff],s1=1;if(!isNaN(e1)){for(var b1 in gf){var _1=r.Utils.round(Math.log(b1)/Math.log(Math.abs(e1)),8);if(Ko(_1)){e1=b1,s1=_1;break}}var V1=new sr(e1),I1=[new sr(V1.num).negate()];I1[s1]=new sr(V1.den);var i2=_h.fromArray(I1,n1.variable).fill(),R2=n1.divide(i2);R2[1].equalsNumber(0)&&(n1=R2[0],Qp.push(i2.toSymbol()))}}return n1.equalsNumber(1)||(n1=uf.Factor.search(n1,Vc)),Qp.forEach(function(F2){Vc.add(F2)}),n1.toSymbol()}catch{return qc}},search:function(li,Vc,Rs){Rs=Rs||10;var qc=li.variable,Qp=function(X1,W2,N2,V2){var q2=_h.fit(X1,W2,N2,Rs,V2,qc);if(q2&&q2.coeffs.length>1){var B2=li.divide(q2);if(B2[1].equalsNumber(0))return Vc.add(q2.toSymbol()),[B2[0],q2]}return null},n1=li.coeffs[0],wh=r.Math2.ifactor(n1),gf=li.lc(),yh=r.Math2.ifactor(gf),ff=li.sub(Rs),e1=r.Math2.ifactor(ff),s1=uf.Factor.mix(e1,ff<0),b1=Math.ceil(li.coeffs.length/2),_1=gf.lessThan(0),V1=n1.lessThan(0);for(yh[1]=1,wh[1]=1;b1--;)for(var I1 in yh)for(var i2 in wh)for(var R2=0;R2<s1.length;R2++){var F2=Qp(I1,i2,s1[R2],b1);if(F2)return li=F2[0],r.Utils.isPrime(li.sub(Rs))||(li=uf.Factor.search(li,Vc)),li;F2||(_1&&V1?F2=Qp(-I1,-i2,s1[R2],b1):_1?F2=Qp(-I1,i2,s1[R2],b1):V1&&(F2=Qp(I1,-i2,s1[R2],b1)))}return li},mSqfrFactor:function(li,Vc){if(li.group!==E)for(var Rs=Xe(li).reverse(),qc=0;qc<Rs.length;qc++)do{if(Rs[qc]===li.value){Vc.add(li),li=new Bs(1);continue}var Qp=r.Calculus.diff(li,Rs[qc]),n1=uf.Factor.coeffFactor(Qp);if(n1.equals(0))break;var wh=!0;if(n1.isConstant()&&li.isComposite()&&li.each(function(ff){ff.multiplier%n1!==0&&(wh=!1)},!0),wh){var gf=uf.div(li,n1.clone()),yh=gf[1].equals(0);if(li.equals(gf[0])&&gf[1].equals(0))break;if(gf[0].isConstant()){Vc.add(gf[0]);break}}else yh=!1;yh&&(Vc.add(gf[0]),li=n1)}while(yh);return li},sqdiff:function(li,Vc){if(li.isConstant("all"))return li;try{var Rs=function(e1){return r.Utils.block("POSITIVE_MULTIPLIERS",function(){return Bs.unwrapPARENS(pf.sqrt(pf.abs(e1)))},!0)},qc=r.Utils.separate(li.clone()),Qp=[];for(var n1 in qc)n1!=="constants"&&Qp.push(qc[n1]);if(Qp.sort(function(e1,s1){return s1.power-e1.power}),Qp.length===2){var wh,gf;if(wh=Qp.pop(),gf=Qp.pop(),He(wh.power)&&He(gf.power)&&wh.sign()===gf.sign()&&wh.group===d&&gf.group===d)throw new Error("Unable to factor");if(wh.isComposite()&&gf.power.equals(2)){gf=Rs(gf);var yh=uf.Factor.factor(a.add(wh,qc.constants));yh.power.equals(2)&&(yh.toLinear(),Vc.add(a.subtract(yh.clone(),gf.clone())),Vc.add(a.add(yh,gf)),li=new Bs(1))}else if(wh=wh.powSimp(),gf=gf.powSimp(),(wh.group===d||wh.fname==="")&&wh.power.equals(2)&&(gf.group===d||gf.fname==="")&&gf.power.equals(2)&&!qc.constants){if(wh.multiplier.lessThan(0)){var ff=gf;gf=wh,wh=ff}wh.multiplier.greaterThan(0)&&(wh=Rs(wh),gf=Rs(gf)),Vc.add(a.subtract(wh.clone(),gf.clone())),Vc.add(a.add(wh,gf)),li=new Bs(1)}}}catch{}return li},mfactor:function(li,Vc){if(li.group===E)if(li.fname==="sqrt"){var Rs=new cf,qc=uf.Factor.common(li.args[0].clone(),Rs);qc=uf.Factor.coeffFactor(qc,Rs),li=a.multiply(a.symfunction("sqrt",[qc]),a.parse(li.multiplier)),Rs.each(function(K2){li=a.multiply(li,a.parse(r.Utils.format("sqrt({0})",K2)))})}else Vc.add(li);else{li=uf.Factor.mSqfrFactor(li,Vc);for(var Qp=Xe(li),n1=li.collectSymbols().map(function(K2){return Bs.unwrapSQRT(K2)}),wh={},gf={},yh=Qp.length,ff=n1.length,e1=0;e1<yh;e1++){var s1=Qp[e1];wh[s1]=new Bs(0);for(var b1=0;b1<ff;b1++){var _1=n1[b1];if(_1.contains(s1)){var V1=_1.value===s1?_1.power.toDecimal():_1.symbols[s1].power.toDecimal();(!gf[s1]||V1<gf[s1])&&(gf[s1]=V1),wh[s1]=a.add(wh[s1],_1.clone())}}}for(var I1 in wh){var i2=a.parse(I1+"^"+gf[I1]),R2=a.divide(wh[I1],i2),F2=a.expand(R2);if(F2.equals(1))break;var X1=uf.div(li.clone(),F2);if(X1[0].equals(0))break;if(X1[1].equals(0)){var W2=!1;if(X1[0].each(function(K2){Ko(K2.multiplier)||(W2=!0)}),W2){X1[1]=a.expand(a.multiply(X1[1],F2));break}}var N2=Ko(F2)&&F2.lessThan(0);if(X1[1].equals(0)&&!N2){var V2=uf.div(li.clone(),X1[0].clone()),i2=V2[0];if(i2.equals(0)||(li=V2[1],i2.equals(-1)&&!li.equals(0)))return li;var q2=X1[0];if(li.equals(q2)){var B2=uf.Factor.reduce(q2,Vc);return li.equals(B2)?B2:uf.Factor.mfactor(B2,Vc)}else if(Vc.add(q2),li.equals(0))return i2;return i2.isConstant("all")?(Vc.add(i2),i2):uf.Factor.mfactor(i2,Vc)}}}return li=uf.Factor.sqdiff(li,Vc),li=uf.Factor.zeroes(li,Vc),li}},allLinear:function(li){for(var Vc=li.length,Rs=0;Rs<Vc;Rs++)if(!uf.isLinear(li[Rs]))return!1;return!0},isLinear:function(li){var Vc=!1,Rs=li.group;if(Rs===P||Rs===Z){Vc=!0;for(var qc in li.symbols){var Qp=li.symbols[qc],n1=Qp.group;if((n1===E||n1===g)&&(Vc=!1),n1===me)Vc=Xe(Qp).length===1;else if(n1===P||n1===Z)Vc=uf.isLinear(Qp);else if(Qp.group!==l&&Qp.power.toString()!=="1"){Vc=!1;break}}}else Rs===d&&li.power===1&&(Vc=!0);return Vc},gcd:function(){var li;if(arguments.length===1&&arguments[0]instanceof r.Vector?li=arguments[0].elements:li=r.Utils.arguments2Array(arguments),li.length===0)return new Bs(1);if(li.length===1)return li[0];for(var Vc=[],Rs=!1,qc=0;qc<li.length;qc++)if(li[qc].group===E&&li[qc].fname==="gcd")li=li.concat(arguments[qc].args),li.splice(qc,1);else{var Qp=Xe(li[qc]);if(r.Utils.haveIntersection(Qp,Vc)){Rs=!0;break}else Vc=Vc.concat(Qp)}if(Rs||Vc.length===0)if(li.every(function(wh){return wh.getDenom().equals(1)})){for(var n1=li[0],qc=1;qc<li.length;qc++)n1=uf.gcd_(li[qc],n1);return n1}else return a.divide(uf.gcd.apply(null,li.map(function(wh){return wh.getNum()})),uf.lcm.apply(null,li.map(function(wh){return wh.getDenom()})));else return a.symfunction("gcd",li)},gcd_:function(li,Vc){if((li.group===E||li.group===u)&&(li=r.Utils.block("PARSE2NUMBER",function(){return a.parse(li)})),Vc.group===E&&(Vc=r.Utils.block("PARSE2NUMBER",function(){return a.parse(Vc)})),li.isConstant()&&Vc.isConstant())return new Bs(r.Math2.QGCD(new sr(+li),new sr(+Vc)));var Rs=a.multiply(li.getDenom()||new Bs(1),Vc.getDenom()||new Bs(1)).invert();if(li=a.multiply(li.clone(),Rs.clone()),Vc=a.multiply(Vc.clone(),Rs.clone()),li=a.expand(li),Vc=a.expand(Vc),li.group===me||Vc.group===me){var qc=a.divide(li.clone(),Vc.clone()),Qp=a.multiply(Vc.clone(),qc.getDenom().invert());if(!Qp.equals(1))return Qp}if(li.group===g||Vc.group===g){var n1=new Bs(r.Math2.GCD(li.multiplier,Vc.multiplier)),wh=uf.gcd_(li.value===th?new Bs(1):a.parse(li.value),Vc.value===th?new Bs(1):a.parse(Vc.value)),gf=uf.gcd_(a.parse(li.power),a.parse(Vc.power));return a.multiply(n1,a.pow(wh,gf))}if(li.length<Vc.length){var Qp=li;li=Vc,Vc=Qp}var yh=Xe(li),ff=Xe(Vc);if(yh.length===ff.length&&yh.length===1&&yh[0]===ff[0]||yh.length===1&&ff.length===0||yh.length===0&&ff.length===1)return li=new _h(li),Vc=new _h(Vc),a.divide(li.gcd(Vc).toSymbol(),Rs);var e1=[];li.each(function(_1){e1.push(_1.multiplier)}),Vc.each(function(_1){e1.push(_1.multiplier)});for(var s1;!Vc.equals(0);){var Qp=Vc.clone();if(li=li.clone(),s1=uf.div(li,Qp),Vc=s1[1],s1[0].equals(0))return a.divide(new Bs(r.Math2.QGCD(li.multiplier,Vc.multiplier)),Rs);li=Qp}var b1=r.Math2.QGCD.apply(void 0,e1);return b1.equals(1)||li.each(function(_1){_1.multiplier=_1.multiplier.divide(b1)}),li.equals(1)&&!li.isConstant()&&!Vc.isConstant()?a.divide(a.symfunction("gcd",arguments),Rs):a.divide(li,Rs)},lcm:function(){var li;arguments.length===1?arguments[0]instanceof r.Vector?li=arguments[0].elements:a.error("lcm expects either 1 vector or 2 or more arguments"):li=r.Utils.arguments2Array(arguments);var Vc=li.reduce(function(n1,wh){return a.multiply(n1,wh.clone())},new Bs(1)),Rs=function(n1,wh){wh=Number(wh);var gf=[],yh,ff,e1,s1=Math.pow(2,n1.length);for(ff=wh;ff<s1;ff++){yh=[],e1=n1.length-1;do(ff&1<<e1)!==0&&yh.push(n1[e1]);while(e1--);yh.length===wh&&gf.push(yh)}return gf}(arguments,arguments.length-1).map(function(n1){return n1.reduce(function(wh,gf){return a.multiply(wh,gf.clone())},new Bs(1))}),qc;li.every(function(n1){return r.Utils.isVariableSymbol(n1)})?qc=a.symfunction("gcd",r.Utils.arrayUnique(Rs)):qc=uf.gcd.apply(null,Rs);var Qp=a.divide(Vc,qc);return Qp},divide:function(li,Vc){var Rs,qc,Qp,n1;return Qp=r.Algebra.Factor.factor(li.clone()),n1=Qp.getDenom(),n1.isConstant("all")?n1=new Bs(1):li=a.expand(Bs.unwrapPARENS(a.multiply(Qp,n1.clone()))),Rs=uf.div(li,Vc),qc=a.divide(Rs[1],Vc),a.divide(a.add(Rs[0],qc),n1)},div:function(li,Vc){var Rs=[new Bs(0),li.clone()];try{if(Vc.isConstant("all"))return li.each(function(v2){v2.multiplier=v2.multiplier.divide(Vc.multiplier)}),[li,new Bs(0)];if(li=a.expand(li),Vc=a.expand(Vc),li.group===d&&Vc.group===Z){var qc=li.value,Qp=r.Utils.decompose_fn(Vc.clone(),qc,!0);if(li.isLinear()&&Qp.x&&Qp.x.isLinear()&&Vc.isLinear()){var n1=Bs.create(li.multiplier);return[a.divide(n1.clone(),Qp.a.clone()),a.divide(a.multiply(n1,Qp.b),Qp.a).negate()]}}if(li.group===d&&Vc.group===d){var wh=a.divide(li.clone(),Vc.clone());return wh.isConstant()?[wh,new Bs(0)]:[new Bs(0),li.clone()]}var gf=li.hasFunc(),yh=Vc.hasFunc(),ff=!1;if(gf||yh){ff=!0;var e1={},li=a.parse(r.Utils.subFunctions(li,e1)),Vc=a.parse(r.Utils.subFunctions(Vc,e1)),s1=r.Utils.getFunctionsSubs(e1)}var b1=r.Utils.arrayUnique(Xe(li).concat(Xe(Vc))),_1,V1;if((li.isImaginary()||Vc.isImaginary())&&b1.push(r.Settings.IMAGINARY),b1.length===1){var I1=new _h(li).divide(new _h(Vc));_1=I1[0].toSymbol(),V1=I1[1].toSymbol()}else{b1.push(th);var i2=function(v2){for(var A2=new Bs(0),l2=0;l2<v2.length;l2++){var x2=v2[l2].toSymbol();A2=a.add(A2,x2)}return A2},R2=function(v2,A2){var l2=Math.max.apply(null,v2.terms),x2=0,u2;if(!A2){for(var s2=0;s2<v2.terms.length;s2++)if(v2.terms[s2].equals(l2)&&(u2=s2,x2++),x2>1)return}if(A2){for(s2=0;s2<v2.terms.length;s2++)if(v2.terms[s2].equals(l2)){u2=s2;break}}return[l2,u2,v2]},F2=function(v2,A2){A2=A2||0;var l2=v2[A2],x2=v2.length;if(l2){for(var u2=R2(l2),s2=A2+1;s2<x2;s2++){var j2=v2[s2],h2=l2.sum.equals(j2.sum);if(!h2&&u2)break;if(h2){for(var k2,a4,n4,o4,P4=l2.terms.length,v4=0;v4<P4;v4++){var P1=l2.terms[v4],z1=j2.terms[v4];(typeof k2>"u"||P1.greaterThan(k2))&&(k2=P1,n4=v4),(typeof a4>"u"||z1.greaterThan(a4))&&(a4=z1,o4=v4)}var e2=k2.subtract(j2.terms[n4]),b2=a4.subtract(l2.terms[o4]);if(b2>e2){u2=[a4,o4,j2];break}if(e2>b2){u2=[k2,n4,l2];break}}else if(u2=R2(j2),u2)break;u2=R2(j2)}if(!u2)return R2(v2[0],!0);for(var P2,c2,s2=0;s2<q2.length;s2++){var $2=q2[s2].terms;if(c2=u2[1],c2===$2.length-1)return;if(P2=$2[c2],!P2.equals(0))break}return P2.equals(0)?F2(v2,++A2):u2}},X1=r.Utils.toMapObj(b1),W2=function(v2,A2){return A2.sum.subtract(v2.sum)},N2=function(v2,A2){if(!v2||!A2)return!1;for(var l2=0;l2<v2.terms.length;l2++)if(v2.terms[l2].lessThan(A2.terms[l2]))return!1;return!0},V2=li.tBase(X1).sort(W2),q2=Vc.tBase(X1).sort(W2),B2=N2(V2[0],q2[0])&&V2[0].count>q2[0].count?q2:V2,K2=F2(B2),S2=[];if(K2){var E1=K2[1],F1=function(v2,A2){return v2[0].sum.equals(A2[0].sum)?v2.length>=A2.length:!0},K1=function(v2,A2,l2){for(var x2=[],u2=0;u2<v2.length;u2++)for(var s2=v2[u2],j2=0;j2<s2.terms.length;j2++){var h2=x2[j2],k2=s2.terms[j2];u2===0?x2[j2]=k2:h2&&!h2.equals(k2)&&(x2[j2]=void 0)}for(var u2=0;u2<x2.length;u2++){var s2=x2[u2];if(s2&&!s2.equals(0))return u2}return l2},N1=function(v2,A2){var l2=v2.len(),x2=A2.len(),u2=A2.terms[E1],s2=v2.terms[E1];return x2>l2&&u2.greaterThan(s2)?x2-l2:u2.subtract(s2)};E1=K1(V2,q2,E1),V2.sort(N1),q2.sort(N1);var J1=q2[0],E2=V2[0],n2=new df(new sr(1),[],E2.map);if(J1.sum.greaterThan(E2.sum)&&E2.len()>1)for(var D1=0;D1<E2.terms.length;D1++){var i1=J1.terms[D1].subtract(E2.terms[D1]);if(i1.equals(0))n2.terms[D1]=new sr(0);else{var g1=i1.add(new sr(1));n2.terms[D1]=i1;for(var u1=0;u1<V2.length;u1++)V2[u1].terms[D1]=V2[u1].terms[D1].add(g1)}}for(var L1=N2(V2[0],q2[0]),B1=0,Q1=200;L1&&F1(V2,q2);){if(B1++>Q1)throw new r.exceptions.InfiniteLoopError("Unable to compute!");var I1=V2[0].divide(q2[0]);S2.push(I1),V2.shift();for(var D1=1;D1<q2.length;D1++){var Z1=q2[D1].multiply(I1).generateImage(),A1=V2.length;A1===0&&(Z1.coeff=Z1.coeff.neg(),V2.push(Z1),V2.sort(N1));for(var u1=0;u1<A1;u1++){var a2=V2[u1];if(a2.getImg()===Z1.getImg()){a2.coeff=a2.coeff.subtract(Z1.coeff),a2.coeff.equals(0)&&(r.Utils.remove(V2,u1),u1--);break}u1===A1-1&&(Z1.coeff=Z1.coeff.neg(),V2.push(Z1),V2.sort(N1))}}if(L1=N2(V2[0],q2[0]),!L1&&V2.length>=q2.length){for(var D1=1;D1<V2.length;D1++)if(L1=N2(V2[D1],q2[0]),L1){V2.unshift(r.Utils.remove(V2,D1));break}}}}_1=i2(S2),V1=i2(V2),typeof n2<"u"&&(n2=n2.toSymbol(),_1=a.divide(_1,n2.clone()),V1=a.divide(V1,n2))}return ff&&(_1=a.parse(_1.text(),s1),V1=a.parse(V1.text(),s1)),[_1,V1]}catch{return Rs}},line:function(li,Vc,Rs){r.Utils.isArray(li)&&(li=r.Utils.convertToVector(li)),r.Utils.isArray(Vc)&&(Vc=r.Utils.convertToVector(Vc)),Rs=a.parse(Rs||"x"),(!r.Utils.isVector(li)||!r.Utils.isVector(Vc))&&a.error('Line expects a vector! Received "'+li+'" & "'+Vc+'"');var qc=a.subtract(Vc.e(1).clone(),li.e(1).clone()),Qp=a.subtract(Vc.e(2).clone(),li.e(2).clone()),n1=a.divide(Qp,qc),wh=a.multiply(Rs,n1.clone()),gf=a.multiply(li.e(1).clone(),n1);return a.add(a.subtract(wh,gf),li.e(2).clone())},PartFrac:{createTemplate:function(li,Vc,Rs,qc){li=uf.Factor.factor(li),li.each(function(i2,R2){if(i2.group===E&&i2.fname===""&&i2.args[0].group===d){var F2=i2.args[0];this.symbols?(delete this.symbols[R2],this.symbols[F2.value]=F2):li=i2.args[0]}});var Qp,n1,wh,gf,yh,ff,e1;Qp=Vc.collectFactors(),n1=[],ff=[],e1=new Bs(1);for(var s1=0;s1<Qp.length;s1++){var b1=Bs.unwrapPARENS(Qp[s1]);if(b1.power.greaterThan(1)){gf=Number(b1.power),wh=b1.clone().toLinear(),yh=Number(uf.degree(wh,qc));for(var _1=0;_1<gf;_1++){var V1=a.pow(wh.clone(),new Bs(_1+1));Rs.push(V1.clone());var I1=a.divide(li.clone(),V1.clone());ff.push(yh),n1.push(I1)}}else{yh=Number(uf.degree(b1,qc)),Rs.push(b1);var I1=a.divide(li.clone(),b1.clone());I1=a.expand(Bs.unwrapPARENS(I1)),ff.push(yh),n1.push(I1)}}return Rs=Rs.map(function(i2){return a.multiply(i2,e1.clone())}),[Rs,n1,ff]},partfrac:function(li,Vc,Rs){var qc=Xe(li);Vc=Vc||a.parse(qc[0]);try{var Qp,n1,wh,W2,gf,yh,ff,e1,s1,b1,_1,V1,I1,i2,R2,F2,X1,W2;if(Qp=a.expand(li.getNum()),n1=a.expand(li.getDenom().toUnitMultiplier()),Qp.multiplier=li.multiplier,yh=Qp.groupTerms(Vc),Number(uf.degree(Qp,Vc))>=Number(uf.degree(n1,Vc))?(I1=uf.div(Qp.clone(),a.expand(n1.clone())),i2=I1[0],Qp=I1[1],yh=Qp.groupTerms(Vc)):i2=new Bs(0),Number(uf.degree(n1,Vc))===1){var N2=a.divide(Qp,n1);return Rs?[i2,N2]:a.add(i2,N2)}gf=uf.Factor.factor(n1),X1=uf.PartFrac.createTemplate(n1.clone(),gf,[],Vc),W2=X1[0],R2=X1[1],ff=X1[2],V1=[yh.length],e1=[],wh=[],F2=[];var V2,q2;R2.map(function(N1,J1){V2=W2[J1],q2=ff[J1];for(var E2=0;E2<q2;E2++){wh.push(V2.clone());var n2=Bs.create(Vc,E2),D1=a.expand(a.multiply(N1,n2.clone())).groupTerms(Vc),i1=D1.length;V1.push(i1),e1.push(D1),F2.push(n2.clone())}}),s1=r.Utils.arrayMax(V1),_1=new r.Matrix(r.Utils.fillHoles(yh,s1)).transpose(),b1=new r.Matrix;for(var B2=0;B2<e1.length;B2++)b1.elements.push(r.Utils.fillHoles(e1[B2],s1));var K2=a.multiply(b1.transpose().invert(),_1),S2=Rs?[i2]:i2;return K2.each(function(N1,J1){var E2=a.multiply(F2[J1],a.divide(N1,wh[J1]));Rs?S2.push(E2):S2=a.add(S2,E2)}),S2}catch{try{if(li.isComposite()){var E1={};li.each(function(J1){var E2=J1.getDenom(),n2=J1.getNum(),D1=E1[E2];E1[E2]=D1?a.add(D1,n2):n2});var F1=new Bs(0);for(var K1 in E1)F1=a.add(F1,a.divide(E1[K1],a.parse(K1)));li=F1}}catch{}}return li}},degree:function(li,Vc,Rs){if(Rs=Rs||{nd:[],sd:[],depth:0},!Vc){var qc=Xe(li);if(qc.length>1)throw new Error("You must specify the variable for multivariate polynomials!");if(qc.length===0)return new Bs(0);Vc=a.parse(qc[0])}var Qp=li.group;li.isComposite()?(li=li.clone(),li.distributeExponent(),li.each(function(wh){Rs.depth++,uf.degree(wh,Vc,Rs),Rs.depth--})):li.group===me?li.each(function(wh){Rs.depth++,uf.degree(wh,Vc,Rs),Rs.depth++}):Qp===g&&li.value===Vc.value?Rs.sd.push(li.power.clone()):Qp===d&&li.value===Vc.value?Rs.nd.push(a.parse(li.power)):Rs.nd.push(new Bs(0));var n1=Rs.nd.length>0?r.Utils.arrayMax(Rs.nd):void 0;return Rs.depth===0&&Rs.sd.length>0?(n1!==void 0&&Rs.sd.unshift(n1),a.symfunction("max",Rs.sd)):(r.Utils.isSymbol(n1)||(n1=a.parse(n1)),n1)},sqComplete:function(li,Vc,Rs){r.Utils.isSymbol(Vc)||(Vc=a.parse(Vc));var qc=function(I1){throw I1=I1||"Stopping",new r.exceptions.ValueLimitExceededError(I1)};li.isPoly(!0)||qc("Must be a polynomial!");var Qp,n1,wh,gf,yh,ff,e1,s1,b1,_1,V1;return b1=r.Utils.inBrackets,li=li.clone(),Qp=r.Algebra.degree(li,Vc),Qp.equals(2)||qc("Cannot complete square for degree "+Qp),e1=r.Algebra.coeffs(li,Vc),n1=e1[2],s1=e1[1].sign(),wh=a.divide(e1[1],new Bs(2)),gf=a.pow(wh.clone(),new Bs(2)),Rs?[n1,wh,yh]:(V1=pf.sqrt(n1),ff=a.divide(pf.sqrt(gf),V1.clone()),yh=a.subtract(e1[0],a.pow(ff.clone(),new Bs(2))),_1=a.parse(b1(V1.clone()+"*"+Vc+(s1<0?"-":"+")+ff)),{a:_1,c:yh,f:a.add(a.pow(_1.clone(),new Bs(2)),yh.clone())})},Simplify:{strip:function(li){var Vc=a.parse(li.multiplier);li.toUnitMultiplier();var Rs=a.parse(li.power);return li.toLinear(),[Vc,Rs,li]},unstrip:function(li,Vc){var Rs=li[0],qc=li[1];return a.multiply(Rs,a.pow(Vc,qc))},complexSimp:function(li,Vc){var Rs,qc,Qp,n1,wh,gf,yh,ff,e1;return gf=li.realpart(),ff=li.imagpart(),yh=Vc.realpart(),e1=Vc.imagpart(),Rs=a.multiply(gf.clone(),yh.clone()),qc=a.multiply(ff.clone(),e1.clone()),Qp=a.multiply(yh.clone(),ff),n1=a.multiply(gf,e1.clone()),wh=a.add(a.pow(yh,new Bs(2)),a.pow(e1,new Bs(2))),a.divide(a.add(a.add(Rs,qc),a.multiply(a.subtract(Qp,n1),Bs.imaginary())),wh)},trigSimp:function(li){if(li.containsFunction(["cos","sin","tan"])){li=li.clone();var Vc=uf.Simplify.strip(li);li=Vc.pop();var Rs=li.clone();if(li.group===Z){var qc=new Bs(0);li.each(function(gf){var yh=uf.Simplify.trigSimp(gf.fnTransform());qc=a.add(qc,yh)},!0),Rs=a.pow(a.multiply(new Bs(li.multiplier),qc),new Bs(li.power))}else if(li.group===me){var Qp=li.getNum(),n1=li.getDenom();if(Qp.fname==="sin"&&n1.fname==="cos"&&Qp.args[0].equals(n1.args[0])&&Qp.power.equals(n1.power)&&(Rs=a.parse(r.Utils.format("({0})*({1})*tan({2})^({3})",n1.multiplier,Qp.multiplier,Qp.args[0],Qp.power))),Rs.group===me){var wh=new Bs(1);Rs.each(function(gf){gf.fname==="tan"&&(gf=a.parse(r.Utils.format("({0})*sin({1})^({2})/cos({1})^({2})",gf.multiplier,uf.Simplify.simplify(gf.args[0]),gf.power))),wh=a.multiply(wh,gf)}),Rs=wh}}Rs=uf.Simplify.unstrip(Vc,Rs).distributeMultiplier(),li=Rs}return li},fracSimp:function(li){var Vc=li.getDenom(),Rs=li.getNum();if(Rs.isImaginary()&&Vc.isImaginary()&&(li=uf.Simplify.complexSimp(Rs,Vc)),li.isComposite()){li.power>1&&(li=a.expand(li));var qc=li.collectSymbols(),Qp,n1,wh,gf,yh,ff,e1,s1,b1,_1,V1,Vc,Rs;for(n1=qc.pop();qc.length;)wh=qc.pop(),gf=a.parse(n1.getDenom()),yh=a.parse(wh.getDenom()),ff=n1.getNum(),e1=wh.getNum(),V1=a.multiply(gf.clone(),yh.clone()),b1=a.multiply(ff,yh),_1=a.multiply(e1,gf),s1=a.add(b1,_1),n1=a.divide(s1,V1);return Vc=a.expand(n1.getDenom()),Rs=a.expand(n1.getNum()),Rs.isImaginary()&&Vc.isImaginary()?Qp=uf.Simplify.complexSimp(Rs,Vc):Qp=a.divide(Rs,Vc),Qp.equals(li)?li:uf.Simplify.simplify(Qp)}return li},ratSimp:function(li){if(li.group===me){var Vc=li.getDenom(),Rs=li.getNum().distributeMultiplier(),qc=uf.Simplify.fracSimp(Vc),Qp=uf.Simplify.fracSimp(Rs);li=a.divide(Qp,qc)}return li},sqrtSimp:function(li,Vc){var Rs;if(li.isSQRT()){var qc=uf.Factor.factor(li.args[0].clone()),Qp=a.parse(qc.multiplier),n1=Qp.sign(),Rs=a.sqrt(Qp.abs()),wh;if(Ko(Rs)){if(qc.group===me){var gf=new Bs(1);qc.each(function(e1){if(e1.group===l){var s1=a.sqrt(e1.clone());Ko(s1)?Rs=a.multiply(Rs,s1):gf=a.multiply(gf,e1)}else gf=a.multiply(gf,e1)});var yh=a.multiply(gf,a.parse(n1));wh=a.sqrt(yh.clone()),wh.isImaginary&&(wh=a.sqrt(a.expand(yh.clone())))}else wh=a.sqrt(qc.clone().toUnitMultiplier());return a.multiply(Rs,wh)}}else li.isComposite()&&li.isLinear()?(Rs=new Bs(0),li.each(function(ff){Rs=a.add(Rs,uf.Simplify.sqrtSimp(ff))},!0),Rs=a.multiply(Rs,a.parse(li.multiplier))):li.group===me&&(Rs=a.parse(li.multiplier),li.each(function(ff){var e1=uf.Simplify.sqrtSimp(ff);Rs=a.multiply(Rs,e1)},!0),Rs=a.pow(Rs,a.parse(li.power)));return Rs||a.parse(li)},patternSub:function(li){var Vc={},Rs=function(Qp){var n1=!1;return Qp.each(function(wh){wh.group===Z?n1=!0:wh.symbols&&(n1=Rs(wh))}),n1},qc=function(Qp){Qp.each(function(n1){if(!(!n1.symbols&&n1.group!==E)){if(Rs(n1))qc(n1);else if(!Vc[n1.value]){var wh=r.Utils.getU(li);Vc[n1.value]=wh,li=li.sub(n1.value,wh)}}},!0)};return qc(li),[li,Vc]},simplify:function(li){var Vc=uf.Simplify.strip(li);if(li=Vc.pop(),li=uf.Simplify.fracSimp(li),li.isConstant()||li.group===r.groups.S){Vc.push(li);var Rs=uf.Simplify.unstrip(Vc,li);return Rs}var qc=li.clone();if(qc=uf.Simplify.trigSimp(qc),qc=uf.Simplify.ratSimp(qc),qc=uf.Factor.factor(qc),qc.group===r.groups.CP&&qc.isLinear()){var Qp=qc.multiplier.clone();qc.toUnitMultiplier();var n1=new Bs(0);qc.each(function(gf){var yh=uf.Simplify.simplify(gf);n1=a.add(n1,yh)}),qc=n1,n1.multiplier=n1.multiplier.multiply(Qp)}var wh=uf.Simplify.unstrip(Vc,qc);return wh}},Classes:{Polynomial:_h,Factors:cf,MVTerm:df}};r.Expression.prototype.simplify=function(){return uf.Simplify.simplify(this.symbol)},e.useAlgebraDiv=function(){var li=uf.divideFn=a.divide,Vc=0;a.divide=function(Rs,qc){Vc++;var Qp;return Vc===1?Qp=r.Algebra.divide(Rs,qc):Qp=li(Rs,qc),Vc=0,Qp}},e.useParserDiv=function(){uf.divideFn&&(a.divide=uf.divideFn),delete uf.divideFn},e.register([{name:"factor",visible:!0,numargs:1,build:function(){return uf.Factor.factor}},{name:"simplify",visible:!0,numargs:1,build:function(){return uf.Simplify.simplify}},{name:"gcd",visible:!0,numargs:[1],build:function(){return uf.gcd}},{name:"lcm",visible:!0,numargs:[1],build:function(){return uf.lcm}},{name:"roots",visible:!0,numargs:-1,build:function(){return uf.roots}},{name:"divide",visible:!0,numargs:2,build:function(){return uf.divide}},{name:"div",visible:!0,numargs:2,build:function(){return uf.div}},{name:"partfrac",visible:!0,numargs:[1,2],build:function(){return uf.PartFrac.partfrac}},{name:"deg",visible:!0,numargs:[1,2],build:function(){return uf.degree}},{name:"coeffs",visible:!0,numargs:[1,2],build:function(){var li=function(){var Vc=uf.coeffs.apply(uf,arguments);return new r.Vector(Vc)};return li}},{name:"line",visible:!0,numargs:[2,3],build:function(){return uf.line}},{name:"sqcomp",visible:!0,numargs:[1,2],build:function(){var li=function(Vc,Rs){try{Rs=Rs||Xe(Vc)[0];var qc=uf.sqComplete(Vc.clone(),Rs);return qc.f}catch{return Vc}};return li}}]),e.updateAPI()})()}()),Algebra.exports}requireAlgebra();requireCalculus();var Solve={exports:{}},hasRequiredSolve;function requireSolve(){return hasRequiredSolve||(hasRequiredSolve=1,function(t){{var e=requireNerdamer_core();requireCalculus(),requireAlgebra()}(function(){var r=e.getCore(),a=r.PARSER,l=r.Algebra,u=r.Calculus,d=u.integration.decompose_arg,g=r.Utils.evaluate,E=r.Utils.remove,P=r.Utils.format,Z=r.Utils.build,me=r.Utils.knownVariable,_e=r.Symbol,He=r.Utils.isSymbol,Xe=r.Utils.variables,wt=r.groups.S,Do=r.groups.PL,sr=r.groups.CB,Ko=r.groups.CP,Bs=r.groups.FN,th=r.Settings,pf=r.Utils.range,_h=r.Utils.isArray;r.Settings.SOLVE_RADIUS=1e3,r.Settings.ROOTS_PER_SIDE=10,r.Settings.make_pi_conversions=!1,r.Settings.STEP_SIZE=.1,r.Settings.EPSILON=1e-13,r.Settings.MAX_NEWTON_ITERATIONS=200,r.Settings.MAX_NON_LINEAR_TRIES=12,r.Settings.NON_LINEAR_JUMP_AT=50,r.Settings.NON_LINEAR_JUMP_SIZE=100,r.Settings.NON_LINEAR_START=.01,r.Settings.NEWTON_SLICES=200,r.Settings.NEWTON_EPSILON=Number.EPSILON*2,r.Settings.SOLUTION_PROXIMITY=1e-14,r.Settings.FILTER_SOLUTIONS=!0,r.Settings.MAX_SOLVE_DEPTH=10,r.Settings.ZERO_EPSILON=1e-9,r.Settings.MAX_BISECTION_ITER=2e3,r.Settings.BI_SECTION_EPSILON=1e-12,r.Symbol.prototype.hasTrig=function(){return this.containsFunction(["cos","sin","tan","cot","csc","sec"])},r.Symbol.prototype.hasNegativeTerms=function(){if(this.isComposite())for(var Rs in this.symbols){var qc=this.symbols[Rs];if(qc.group===Do&&qc.hasNegativeTerms()||this.symbols[Rs].power.lessThan(0))return!0}return!1};function cf(Rs,qc){if(qc.isConstant()&&Rs.isConstant()&&!Rs.equals(qc)||Rs.equals(r.Settings.IMAGINARY)&&qc.isConstant(!0)||qc.equals(r.Settings.IMAGINARY)&&Rs.isConstant(!0))throw new r.exceptions.NerdamerValueError(Rs.toString()+" does not equal "+qc.toString());this.LHS=Rs,this.RHS=qc}cf.prototype={toString:function(){return this.LHS.toString()+"="+this.RHS.toString()},text:function(Rs){return this.LHS.text(Rs)+"="+this.RHS.text(Rs)},toLHS:function(Rs){Rs=typeof Rs>"u";var qc;Rs?qc=this.removeDenom():qc=this.clone();var Qp=qc.LHS,n1=qc.RHS;Qp.isConstant(!0)&&!n1.isConstant(!0)&&([Qp,n1]=[n1,Qp]);var wh=a.subtract(Qp,n1),gf=Rs?a.expand(wh):wh;return gf=new cf(gf,new _e(0)).removeDenom().LHS,gf},removeDenom:function(){var Rs=this.LHS.clone(),qc=this.RHS.clone(),Qp=a.multiply(Rs.getDenom(),qc.getDenom());if(Rs=a.expand(a.multiply(Rs,Qp.clone())),qc=a.expand(a.multiply(qc,Qp)),qc.group===Ko&&qc.group!==Ko){var n1=Rs;Rs=qc,qc=n1}if(Rs.group===sr){var n1=new _e(Rs.multiplier),wh=qc.clone();Rs.each(function(b1){b1.power.lessThan(0)?wh=a.divide(wh,b1):n1=a.multiply(n1,b1)}),Rs=n1,qc=wh}else if(Rs.group===Ko)for(var gf in Rs.symbols){var yh=Rs.symbols[gf];if(yh.group===sr)for(var ff in yh.symbols){var e1=yh.symbols[ff];if(e1.power.lessThan(0))return new cf(a.expand(a.multiply(e1.clone().toLinear(),Rs)),a.expand(a.multiply(e1.clone().toLinear(),qc)))}}return new cf(Rs,qc)},clone:function(){return new cf(this.LHS.clone(),this.RHS.clone())},sub:function(Rs,qc){var Qp=this.clone();return Qp.LHS=Qp.LHS.sub(Rs.clone(),qc.clone()),Qp.RHS=Qp.RHS.sub(Rs.clone(),qc.clone()),Qp},isZero:function(){return r.Utils.evaluate(this.toLHS()).equals(0)},latex:function(Rs){return[this.LHS.latex(Rs),this.RHS.latex(Rs)].join("=")}},a.equals=function(Rs,qc){return new cf(Rs,qc)},function(){var Rs=a.functions.simplify[0];a.functions.simplify[0]=function(qc){return qc instanceof cf?(qc.LHS=Rs(qc.LHS),qc.RHS=Rs(qc.RHS),qc):Rs(qc)}}(),r.Expression.prototype.equals=function(Rs){Rs instanceof r.Expression&&(Rs=Rs.symbol);var qc=new cf(this.symbol,Rs);return qc},r.Expression.prototype.solveFor=function(Rs){var qc;if(this.symbol instanceof cf){if(this.symbol.LHS.isConstant()&&this.symbol.RHS.equals(Rs))return new r.Expression(this.symbol.LHS);if(this.symbol.RHS.isConstant()&&this.symbol.LHS.equals(Rs))return new r.Expression(this.symbol.RHS);qc=this.symbol.toLHS()}else qc=this.symbol;return Vc(qc,Rs).map(function(Qp){return new r.Expression(Qp)})},r.Expression.prototype.expand=function(){if(this.symbol instanceof cf){var Rs=this.symbol.clone();return Rs.RHS=a.expand(Rs.RHS),Rs.LHS=a.expand(Rs.LHS),new r.Expression(Rs)}return new r.Expression(a.expand(this.symbol))},r.Expression.prototype.variables=function(){return this.symbol instanceof cf?r.Utils.arrayUnique(Xe(this.symbol.LHS).concat(Xe(this.symbol.RHS))):Xe(this.symbol)};var df=function(Rs,qc){return a.equals(Rs,qc)};r.Equation=cf;var uf=r.Utils.checkAll=function(Rs,qc){for(var Qp=0;Qp<Rs.length;Qp++)if(qc(Rs[Qp]))return!1;return!0},li=r.Solve={version:"2.0.3",solutions:[],solve:function(Rs,qc){var Qp=Vc(Rs,String(qc));return new r.Vector(Qp)},toLHS:function(Rs,qc){if(He(Rs))return Rs;if(!(Rs instanceof cf)){var Qp=Rs.split("=");Qp[1]=Qp[1]||"0",Rs=new cf(a.parse(Qp[0]),a.parse(Qp[1]))}return Rs.toLHS(qc)},solveCircle:function(Rs,qc){for(var Qp=qc.map(function(i2){return a.parse(i2)}),n1=[],wh=[],gf=0;gf<Rs.length;gf++){for(var yh=[],ff=0;ff<Qp.length;ff++)yh.push(Number(r.Algebra.degree(Rs[gf],Qp[ff])));yh.push(r.Utils.arraySum(yh,!0)),n1.push(yh)}var e1=Rs[0],s1=Rs[1];if(n1[0][2]>n1[1][2]&&([s1,e1]=[e1,s1],[n1[1],n1[0]]=[n1[0],n1[1]]),n1[0][0]===1&&n1[0][2]===2&&n1[1][0]===2&&n1[1][2]===4){var b1=qc[0],_1=qc[1],V1=Vc(a.parse(s1,me(b1,Vc(a.parse(e1),b1)[0])),_1).map(function(i2){return i2.toString()}),I1=[Vc(a.parse(e1,me(_1,V1[0])))[0].toString()];if(V1[1]&&I1.push(Vc(a.parse(e1,me(_1,V1[1])))[0].toString()),th.SOLUTIONS_AS_OBJECT){var wh={};wh[b1]=I1,wh[_1]=V1}else V1.unshift(_1),I1.unshift(b1),wh=[I1,V1]}return wh},solveNonLinearSystem:function(Rs,qc,Qp){if(qc<0)return[];Qp=typeof Qp>"u"?r.Settings.NON_LINEAR_START:Qp;var n1=r.Settings.MAX_NON_LINEAR_TRIES,wh=Math.floor(n1/2);qc=typeof qc>"u"?n1:qc;var gf=r.Settings.NON_LINEAR_JUMP_AT,yh=r.Settings.NON_LINEAR_JUMP_SIZE,ff=function(S2,E1){return S2.map(function(F1,K1){return Number(E1.get(K1,0))})},e1=r.Utils.arrayGetVariables(Rs),s1=r.Matrix.jacobian(Rs,e1,function(S2){return Z(S2,e1)},!0),b1=r.Settings.MAX_NEWTON_ITERATIONS,_1,V1,I1,i2,R2,F2,X1,W2,N2=Rs.map(function(S2){return Z(S2,e1)}),V2=s1.map(function(S2){return Z(S2,e1)},!0);i2=r.Matrix.cMatrix(0,e1);var q2=r.Matrix.cMatrix(Qp,e1);I1=0;do{if(I1>b1)break;_1=ff(e1,q2),X1=q2.clone(),N2.forEach(function(S2,E1){q2.set(E1,0,S2.apply(null,_1))});var B2=new r.Matrix;if(V2.each(function(S2,E1,F1){var K1=S2.apply(null,_1);B2.set(E1,F1,K1)}),B2=B2.invert(),V1=a.multiply(B2,q2).negate(),W2=V1.subtract(i2,function(S2){return a.parse(Number(S2))}),i2=X1.add(V1,function(S2){return a.parse(Number(S2))}),q2=i2,I1>=gf&&R2>1){qc===wh&&(Qp=0);var K2=qc>wh?1:-1;return n=qc%Math.floor(wh)+1,Qp+=K2*n*yh,li.solveNonLinearSystem(Rs,--qc,Qp)}if(F2=R2,I1++,R2=W2.max(),Number(R2)===Number(F2))break}while(Number(R2)>=Number.EPSILON);return li.systemSolutions(q2,e1,!0,function(S2){return r.Utils.round(Number(S2),14)})},systemSolutions:function(Rs,qc,Qp,n1){var wh=r.Settings.SOLUTIONS_AS_OBJECT?{}:[];return Rs.each(function(gf,yh){var ff=(Qp?a.expand(gf):gf).valueOf();n1&&(ff=n1.call(gf,ff));var e1=qc[yh];r.Settings.SOLUTIONS_AS_OBJECT?wh[e1]=ff:wh.push([e1,ff])}),wh},solveSystemBySubstitution:function(Rs){var qc=Xe(Rs[0]),Qp=Xe(Rs[1]);return Rs.length===2&&qc.length===2&&r.Utils.arrayEqual(qc,Qp)?li.solveCircle(Rs,qc):[]},solveSystem:function(Rs,qc){for(var Qp=0;Qp<Rs.length;Qp++)Rs[Qp]=li.toLHS(Rs[Qp]);var n1=Rs.length,wh=new r.Matrix,gf=new r.Matrix,yh=!1,ff;if(typeof qc>"u"){if(!l.allLinear(Rs))try{return li.solveNonLinearSystem(Rs)}catch(F1){if(F1 instanceof r.exceptions.DivisionByZero)return li.solveSystemBySubstitution(Rs)}if(ff=r.Utils.arrayGetVariables(Rs),ff.length===1){var e1=0,s1,b1;do{var b1=Rs[e1].clone();e1>0&&(b1=b1.sub(ff[0],s1[0])),s1=Vc(b1,ff[0])}while(++e1<Rs.length);var _1;return th.SOLUTIONS_AS_OBJECT?(_1={},_1[ff[0]]=s1):s1.length===0?_1=s1:_1=[ff[0],s1],_1}if(ff.length<Rs.length){for(var V1=[],e1=Rs.length,Qp=0;Qp<e1-1;Qp++)V1.push(a.parse(Rs[Qp]));var I1={},_1=li.solveSystem(V1,ff);Array.isArray(_1)?_1.forEach(function(N1){I1[N1[0]]=N1[1]}):I1=_1;for(var i2=!0,Qp=e1-1;Qp<e1;Qp++)a.parse(Rs[Qp],I1).equals(0)||(i2=!1);if(i2)return _1}for(var Qp=0;Qp<ff.length;Qp++)e.setVar(ff[Qp],"delete");for(var Qp=0;Qp<n1;Qp++){for(var b1=Rs[Qp],R2=0;R2<ff.length;R2++){var F2=ff[R2],X1=[];b1.each(function(N1){N1.contains(F2)&&(X1=X1.concat(N1.coeffs()))});var W2=r.Utils.arraySum(X1);wh.set(Qp,R2,W2)}var N2=b1.clone();ff.map(function(N1){N2=N2.stripVar(N1,!0)}),gf.set(Qp,0,N2.negate())}}else for(ff=qc,yh=!0,Qp=0;Qp<n1;Qp++){gf.set(Qp,0,new _e(0));for(var b1=a.expand(Rs[Qp]).collectSymbols(),R2=0;R2<qc.length;R2++){wh.set(Qp,R2,new _e(0));for(var F2=qc[R2],V2=0;V2<b1.length;V2++){for(var q2=b1[V2],B2=!1,K2=0;K2<qc.length;K2++)q2.contains(qc[K2])&&(B2&&r.err("Multiple variables found for term "+q2),B2=!0);if(q2.contains(F2)){var S2=d(E(b1,V2),F2);wh.set(Qp,R2,a.add(wh.get(Qp,R2),S2[0]))}}}for(V2=0;V2<b1.length;V2++)gf.set(Qp,0,a.add(gf.get(Qp,0),b1[V2]))}if(ff.length!==Rs.length||wh.determinant().equals(0))throw new r.exceptions.SolveError("System does not have a distinct solution");wh=wh.invert();var E1=wh.multiply(gf);return r.Utils.isArray(qc)&&E1.each(function(F1){return F1.negate()}),li.systemSolutions(E1,ff,yh)},quad:function(Rs,qc,Qp){var n1=a.subtract(a.pow(qc.clone(),_e(2)),a.multiply(a.multiply(Qp.clone(),Rs.clone()),_e(4)));n1=a.expand(n1);var wh=a.pow(n1,_e(.5)),gf=a.parse(a.multiply(new _e(2),Qp.clone())),yh=[a.parse(P("(-({0})+({1}))/({2})",qc,wh,gf)),a.parse(P("(-({0})-({1}))/({2})",qc,wh,gf))];return yh},cubic:function(Rs,qc,Qp,n1){var wh=n1.text(),gf=Qp.text(),yh=qc.text(),ff=Rs.text(),e1=`(-(${gf})^3/(27*(${wh})^3)+(${gf})*(${yh})/(6*(${wh})^2)-(${ff})/(2*(${wh})))`,s1=`((${yh})/(3*(${wh}))-(${gf})^2/(9*(${wh})^2))`,b1=`(${gf})/(3*(${wh}))`,_1=`((${e1})+sqrt((${e1})^2+(${s1})^3))^(1/3)+((${e1})-sqrt((${e1})^2+(${s1})^3))^(1/3)-(${b1})`,V1="1/2+sqrt(3)/2*i";return[a.parse(_1),a.parse(`(${_1})(${V1})`),a.parse(`(${_1})(${V1})^2`)]},quartic:function(Rs,qc,Qp,n1,wh){r.Utils.arrayUnique(Xe(wh).concat(Xe(n1)).concat(Xe(Qp)).concat(Xe(qc)).concat(Xe(Rs))).map(function(i2){}),wh=wh.toString(),n1=n1.toString(),Qp=Qp.toString(),qc=qc.toString(),Rs=Rs.toString();var gf,yh,ff,e1,s1,b1,_1,V1,I1;return gf=a.parse(P("(8*({0})*({2})-3*({1})^2)/(8*({0})^2)",wh,n1,Qp)).toString(),yh=a.parse(P("(({1})^3-4*({0})*({1})*({2})+8*({0})^2*({3}))/(8*({0})^3)",wh,n1,Qp,qc)).toString(),ff=a.parse(P("12*({0})*({4})-3*({1})*({3})+({2})^2",wh,n1,Qp,qc,Rs)).toString(),e1=a.parse(P("2*({2})^3-9*({1})*({2})*({3})+27*({1})^2*({4})+27*({0})*({3})^2-72*({0})*({2})*({4})",wh,n1,Qp,qc,Rs)).toString(),s1=a.parse(P("((({1})+(({1})^2-4*({0})^3)^(1/2))/2)^(1/3)",ff,e1)).toString(),wt=a.parse(P("(1/2)*(-(2/3)*({1})+(1/(3*({0}))*(({2})+(({3})/({2})))))^(1/2)",wh,gf,s1,ff)).toString(),b1=a.parse(P("-(({1})/(4*({0})))-({4})+(1/2)*sqrt(-4*({4})^2-2*({2})+(({3})/({4})))",wh,n1,gf,yh,wt)),_1=a.parse(P("-(({1})/(4*({0})))-({4})-(1/2)*sqrt(-4*({4})^2-2*({2})+(({3})/({4})))",wh,n1,gf,yh,wt)),V1=a.parse(P("-(({1})/(4*({0})))+({4})+(1/2)*sqrt(-4*({4})^2-2*({2})-(({3})/({4})))",wh,n1,gf,yh,wt)),I1=a.parse(P("-(({1})/(4*({0})))+({4})-(1/2)*sqrt(-4*({4})^2-2*({2})-(({3})/({4})))",wh,n1,gf,yh,wt)),[b1,_1,V1,I1]},divideAndConquer:function(Rs,qc){var Qp=[],n1=r.Algebra.Factor.factor(Rs);return n1.group===sr&&n1.each(function(wh){wh=_e.unwrapPARENS(wh),Qp=Qp.concat(Vc(wh,qc))}),Qp},csolve:function(Rs,qc){return r.Utils.block("IGNORE_E",function(){var Qp,n1,wh,gf,yh,ff,e1,s1;if(s1=[],Qp=r.Utils.decompose_fn(Rs,qc,!0),Qp.x.group===wt){n1=a.parse(Qp.x.power),wh=Number(n1),gf=a.pow(a.divide(Qp.b.negate(),Qp.a),n1.invert()),yh=_e.toPolarFormArray(gf),ff=yh[0],yh[1],e1=ff.toString(),n1.toString();for(var b1,_1,V1,I1=0;I1<wh;I1++)b1=I1,V1=P("({0})*e^(2*{1}*pi*{2}*{3})",e1,b1,n1,r.Settings.IMAGINARY),_1=a.parse(V1),s1.push(_1)}return s1},!0)},getPoints:function(Rs,qc,Qp){qc=qc||.01,Qp=Qp||[];var n1=Z(Rs),wh=0,gf=Math.round(wh),yh=n1(gf),ff=yh/Math.abs(yh),e1=r.Settings.ROOTS_PER_SIDE,s1=e1;Qp.push(Math.floor(gf/2)),Qp.push(Math.abs(gf)),Qp.push(gf),Rs.each(function(I1){I1.containsFunction(r.Settings.LOG)&&Qp.push(.1)});var b1=pf(-r.Settings.SOLVE_RADIUS,gf,qc),_1=pf(gf,r.Settings.SOLVE_RADIUS,qc),V1=function(I1,i2){for(var R2,F2,X1,W2=[],N2=0,V2=I1.length;N2<V2;N2++)R2=I1[N2],F2=n1(R2),X1=F2/Math.abs(F2),!(isNaN(F2)||!isFinite(F2)||W2.length>i2)&&(X1!==ff&&W2.push(R2),ff=X1);Qp=Qp.concat(W2)};return V1(b1,s1),V1(_1,e1),Qp},bisection:function(Rs,qc){var Qp=Rs-1,n1=Rs+1;if(Math.sign(qc(Qp))!==Math.sign(qc(n1))){var wh=0,gf,yh;do{if(gf=Math.abs(n1-Qp),wh++>r.Settings.MAX_BISECTION_ITER||isNaN(gf))return;yh=(Qp+n1)/2,qc(Qp)*qc(yh)>0?Qp=yh:n1=yh}while(gf>=th.EPSILON);var ff=(Qp+n1)/2,e1=qc(ff);if(!isNaN(e1)&&Math.abs(e1)<=r.Settings.BI_SECTION_EPSILON)return r.Utils.round(ff,13)}},Newton:function(Rs,qc,Qp){var n1=r.Settings.MAX_NEWTON_ITERATIONS,wh=0,gf=Rs,yh;do{var ff=qc(gf);if(gf===0&&ff===0){yh=0;break}if(wh++,wh>n1)return;yh=gf-ff/Qp(gf);var e1=Math.abs(yh-gf);gf=yh}while(e1>th.NEWTON_EPSILON);if(Math.abs(qc(yh))<=th.EPSILON)return yh},rewrite:function(Rs,qc,Qp){if(qc=qc||new _e(0),Rs.isComposite()&&Rs.isLinear()){var n1=[],wh=[];Rs.each(function(s1){s1=s1.clone(),s1.fname==="sqrt"&&s1.contains(Qp)?n1.push(s1):wh.push(s1)},!0),n1.length===1&&(qc=a.expand(a.pow(a.subtract(qc,r.Utils.arraySum(wh)),new _e(2))),Rs=a.expand(a.pow(_e.unwrapSQRT(n1[0]),new _e(2))))}else Rs=_e.unwrapSQRT(a.expand(Rs));var gf=0,yh=Rs.length;if(Rs.group===Ko&&Rs.contains(Qp)&&Rs.isLinear()){Rs.distributeMultiplier();var ff=new _e(0);return Rs.each(function(s1){s1.contains(Qp)?(gf++,ff=a.add(ff,s1.clone())):qc=a.subtract(qc,s1.clone())}),Rs=ff,gf!==yh?li.rewrite(Rs,qc,Qp):[Rs,qc]}else if(Rs.group===sr&&Rs.contains(Qp)&&Rs.isLinear()){if(Rs.multiplier.lessThan(0)&&(Rs.multiplier=Rs.multiplier.multiply(new r.Frac(-1)),qc.multiplier=qc.multiplier.multiply(new r.Frac(-1))),qc.equals(0))return new _e(0);var ff=new _e(1);return Rs.each(function(b1){b1.contains(Qp)?ff=a.multiply(ff,b1.clone()):qc=a.divide(qc,b1.clone())}),Rs=ff,li.rewrite(Rs,qc,Qp)}else if(!Rs.isLinear()&&Rs.contains(Qp)){var e1=a.parse(Rs.power.clone().invert());return Rs=a.pow(Rs,e1.clone()),qc=a.pow(a.expand(qc),e1.clone()),li.rewrite(Rs,qc,Qp)}else if(Rs.group===Bs||Rs.group===wt||Rs.group===Do)return[Rs,qc]},sqrtSolve:function(Rs,qc){var Qp=new _e(0),n1=new _e(0);if(Rs.isComposite()&&(Rs.each(function(yh){yh.fname==="sqrt"&&yh.contains(qc)?Qp=a.add(Qp,yh.clone()):n1=a.add(n1,yh.clone())}),!Qp.equals(0))){var wh=a.expand(a.multiply(a.parse(Rs.multiplier),a.subtract(a.pow(n1,new _e(2)),a.pow(Qp,new _e(2))))),gf=Vc(wh,qc);return gf=gf.filter(function(yh){if(yh.isImaginary())return yh;var ff={};ff[qc]=yh;var e1=g(Rs,ff);if(e1.equals(0))return yh}),gf}}},Vc=function(Rs,qc,Qp,n1,wh){if(n1=n1||0,n1++>th.MAX_SOLVE_DEPTH)return Qp;if(Rs instanceof cf){if(Rs.isZero())return[new _e(0)];if(Rs.LHS.equals(qc)&&!Rs.RHS.contains(qc))return[Rs.RHS];if(Rs.RHS.equals(qc)&&!Rs.LHS.contains(qc))return[Rs.LHS]}if(Rs instanceof r.Vector&&(Rs=Rs.elements),qc=qc||"x",_h(Rs))return li.solveSystem.apply(void 0,arguments);Qp=Qp||[];var gf={},yh={};if(yh[qc]=0,He(Rs)&&g(Rs.getDenom(),yh).equals(0)===!0)return Qp;var ff=function(h2,k2){var a4=He(h2);if(!(h2===void 0||typeof h2=="number"&&isNaN(h2))){if(_h(h2))h2.forEach(function(z1){ff(z1)});else if(h2.valueOf()!=="null"){if(typeof r.Settings.PRE_ADD_SOLUTION=="function"&&(h2=r.Settings.PRE_ADD_SOLUTION(h2)),a4||(h2=a.parse(h2)),r.Settings.make_pi_conversions&&k2){var n4=a.divide(h2.clone(),new _e(Math.PI)),o4=n4.multiplier,P4=Math.abs(o4.num),v4=Math.abs(o4.den);P4<10&&v4<10&&(h2=a.multiply(n4,new _e("pi")))}var P1=h2.toString();gf[P1]||Qp.push(h2),gf[P1]=!0}}};if(Rs.group===wt&&Rs.contains(qc)){try{var e1={};e1[qc]=0,g(wh,e1,"numer"),ff(new _e(0))}catch{}return Qp}if(Rs.group===sr){var s1=Rs.getNum();if(s1.group===sr){var b1=String(qc);return s1.each(function(h2){h2.contains(b1)&&Vc(h2,qc,Qp,n1,Rs)}),Qp}return Vc(s1,qc,Qp,n1,wh)}Rs.group===Bs&&Rs.fname==="sqrt"&&(Rs=a.pow(_e.unwrapSQRT(Rs),new _e(2)));var _1=(r.Utils.isSymbol(Rs)?Rs:li.toLHS(Rs,!1)).getNum(),V1=r.Utils.variables(_1),I1=V1.length;if(r.Utils.isInt(_1.power)&&_1.power>0&&(_1=a.parse(_1).toLinear()),_1.group===wt||_1.group===sr&&_1.contains(qc))return[new _e(0)];var i2={},R2,F2=function(h2){h2=a.expand(h2,{expand_denominator:!0,expand_functions:!0});var k2=h2.clone();if(h2.symbols)for(var a4 in h2.symbols){var n4=h2.symbols[a4],o4=n4.getDenom();if(!o4.isConstant(!0)&&h2.isComposite()){var P4=new _e(0);return h2.each(function(Z2){P4=a.add(P4,a.multiply(Z2,o4.clone()))}),F2(a.multiply(a.parse(h2.multiplier),P4))}var v4=d(n4,qc),P1=v4[1].fname===r.Settings.SQRT,z1=_e.unwrapSQRT(v4[1]),e2=z1.power.clone();if(!He(e2)&&!e2.equals(1/2)){if(e2.den.gt(1)){if(P1)return h2=a.subtract(h2,n4.clone()),h2=a.add(h2,a.multiply(v4[0].clone(),z1)),F2(h2);var b2=i2[e2.den];i2[e2.den]=b2?b2++:1}else if(e2.sign()===-1){var P2=a.parse(qc+"^"+Math.abs(e2));return h2.each(function(Z2,Ym){Z2.contains(qc)&&(h2.symbols[Ym]=a.multiply(Z2,P2.clone()))}),i2={},F2(a.parse(h2))}else if(n4.group===Do){var c2=r.Utils.arrayMin(r.Utils.keys(n4.symbols));if(c2<0){var P2=a.parse(qc+"^"+Math.abs(c2)),$2=new _e(0);return k2.each(function(Ym){$2=a.add($2,a.multiply(Ym.clone(),P2.clone()))},!0),$2}}}}return h2},X1=function(h2){var k2=new _e(0),a4=new _e(0);return h2.each(function(n4){n4.contains(qc,!0)?k2=a.add(k2,n4.clone()):a4=a.subtract(a4,n4.clone())}),[k2,a4]};if(li.inverseFunctionSolve=function(h2,k2,a4){var n4=d(k2.args[0],qc),o4=n4[1];if(o4.group===wt)return a.divide(a.symfunction(h2,[a.divide(a4,a.parse(k2.multiplier))]),n4[0])},_1=F2(_1),_1.equals(0))return[_1];var W2=r.Utils.keys(i2);if(W2.length===1&&(R2=W2[0],_1.each(function(h2,k2){if(h2.contains(qc)){var a4=d(h2,qc),n4=a4[1],o4=n4.power;o4.den.gt(1)&&(n4.power=o4.multiply(new r.Frac(R2)),_1.symbols[k2]=a.multiply(n4,a4[0]))}}),_1=a.parse(_1)),ff(li.sqrtSolve(_1,qc)),I1===1)if(_1.isPoly(!0)){var N2=new r.Algebra.Classes.Factors;if(r.Algebra.Factor.factor(_1,N2),N2.getNumberSymbolics()>1)for(var V2 in N2.factors)ff(Vc(N2.factors[V2],qc));else{var q2=r.Utils.getCoeffs(_1,qc),B2=q2.length-1,K2=!1;if(V1[0]===qc){if(uf(q2,function(h2){return h2.group!==r.groups.N})){var S2=r.Algebra.proots(_1);uf(S2,function(h2){return!r.Utils.isInt(h2)})&&(K2=!0,S2.map(function(h2){ff(new _e(h2))}))}if(!K2)if(Rs=a.parse(Rs),Rs instanceof r.Equation&&(Rs=Rs.toLHS()),B2===1)ff(a.divide(q2[0],q2[1].negate()));else if(B2===2)ff(a.expand(li.quad.apply(void 0,q2)));else if(B2===3){var Qp=[],E1=r.Algebra.Factor.factor(Rs),Qp=[];Qp.length>0?ff(Qp):ff(li.cubic.apply(void 0,q2))}else l.proots(_1).map(ff)}}}else try{var F1=_1.hasTrig(),K1=li.getPoints(_1,.1),N1=li.getPoints(_1,.05),J1=li.getPoints(_1,.01),E2=r.Utils.arrayUnique(K1.concat(N1).concat(J1)).sort(function(h2,k2){return h2-k2}),n2,D1,i1,g1=Z(_1.clone()),u1=[];for(n2=0;n2<E2.length;n2++){if(D1=E2[n2],i1=li.bisection(D1,g1),typeof i1>"u"){u1.push(D1);continue}ff(i1,F1)}E2=u1;var L1=u.diff(_1.clone()),B1=Z(L1);for(n2=0;n2<E2.length;n2++)D1=E2[n2],ff(li.Newton(D1,g1,B1),F1);Qp.sort()}catch(h2){console.log(h2)}else if(!_1.hasFunc(qc)&&_1.isComposite())try{var E1=r.Algebra.Factor.factor(_1.clone());if(E1.group===sr)E1.each(function(k2){ff(Vc(k2,qc))});else{var q2=r.Utils.getCoeffs(_1,qc),Q1=q2.length,B2=Q1-1;switch(B2){case 0:var Z1=X1(_1),A1=Z1[0],a2=Z1[1];if(A1.group===r.groups.EX){var v2=r.Settings.LOG,A2=`${v2}((${a2})/(${A1.multiplier}))/${v2}(${A1.value})/${A1.power.multiplier}`;ff(a.parse(A2))}break;case 1:ff(a.divide(q2[0],q2[1].negate()));break;case 2:ff(li.quad.apply(void 0,q2));break;case 3:ff(li.cubic.apply(void 0,q2));break;case 4:ff(li.quartic.apply(void 0,q2));break;default:ff(li.csolve(_1,qc)),Qp.length===0&&ff(li.divideAndConquer(_1,qc))}Qp.length===0&&ff(Vc(E1,qc,Qp,n1))}}catch{}else try{var l2=li.rewrite(_1,null,qc),A1=l2[0],a2=l2[1];if(A1.group===Bs)if(A1.fname==="abs")ff([a2.clone(),a2.negate()]);else if(A1.fname==="sin")ff(li.inverseFunctionSolve("asin",A1,a2));else if(A1.fname==="cos")ff(li.inverseFunctionSolve("acos",A1,a2));else if(A1.fname==="tan")ff(li.inverseFunctionSolve("atan",A1,a2));else if(A1.fname===r.Settings.LOG){var x2=d(A1.args[0],qc),V2=x2[1];if(V2.group===wt){a2=a.divide(a.subtract(a.pow(A1.args.length>1?A1.args[1]:new _e("e"),a.divide(a2,a.parse(A1.multiplier))),x2[3]),x2[0]);var _1=new cf(V2,a2).toLHS();ff(Vc(_1,qc))}}else ff(a.subtract(A1,a2));else{var u2=new cf(A1,a2).toLHS();if(u2.equals(_1))throw new Error("Stopping. No stop condition exists");ff(Vc(u2,qc))}}catch{try{if(_1.group===sr)ff(0);else if(_1.group===Ko){var Z1=X1(_1),A1=Z1[0],a2=Z1[1];if(A1.group===r.groups.EX&&A1.value===qc){var s2=A1.power.clone().invert();ff(a.pow(a2,s2))}}}catch{}}if(R2&&(Qp=Qp.map(function(h2){return a.pow(h2,new _e(R2))})),He(Rs)){var j2={};Qp=Qp.filter(function(h2){try{j2[qc]=h2;var k2=Number(g(Rs,j2));return isNaN(k2),!0}catch{return!1}})}return Qp};e.register([{name:"solveEquations",parent:"nerdamer",numargs:-1,visible:!0,build:function(){return Vc}},{name:"solve",parent:"Solve",numargs:2,visible:!0,build:function(){return r.Solve.solve}},{name:"setEquation",parent:"Solve",visible:!0,build:function(){return df}}]),e.updateAPI()})()}()),Solve.exports}requireSolve();var Extra={exports:{}},hasRequiredExtra;function requireExtra(){return hasRequiredExtra||(hasRequiredExtra=1,function(t){{var e=requireNerdamer_core();requireCalculus(),requireAlgebra()}(function(){var r=e.getCore(),a=r.PARSER,l=r.Symbol,u=r.Utils.format,d=r.Utils.isVector,g=r.Utils.isArray;r.Vector;var E=r.groups.S;r.groups.EX;var P=r.groups.CP,Z=r.groups.CB,me=r.groups.FN;r.Settings.Laplace_integration_depth=40,l.prototype.findFunction=function(He){if(this.group===me&&this.fname===He)return this.clone();var Xe;if(this.symbols){for(var wt in this.symbols)if(Xe=this.symbols[wt].findFunction(He),Xe)break}return Xe};var _e=r.Extra={version:"1.4.2",LaPlace:{transform:function(He,Xe,wt){He=He.clone(),Xe=Xe.toString(),He=l.unwrapSQRT(He,!0);var Do,sr=He.stripVar(Xe),Ko=He.group;if(He=a.divide(He,sr.clone()),He.isConstant()||!He.contains(Xe,!0))Do=a.parse(u("({0})/({1})",He,wt));else if(Ko===E&&r.Utils.isInt(He.power)){var Bs=String(He.power);Do=a.parse(u("factorial({0})/({1})^({0}+1)",Bs,wt))}else if(He.group===E&&He.power.equals(1/2))Do=a.parse(u("sqrt(pi)/(2*({0})^(3/2))",wt));else if(He.isComposite())Do=new l(0),He.each(function(df){Do=a.add(Do,_e.LaPlace.transform(df,Xe,wt))},!0);else if(He.isE()&&(He.power.group===E||He.power.group===Z)){var th=He.power.stripVar(Xe);Do=a.parse(u("1/(({1})-({0}))",th,wt))}else{var pf=["sin","cos","sinh","cosh"];if(He.group===me&&pf.indexOf(He.fname)!==-1&&(He.args[0].group===E||He.args[0].group===Z)){var th=He.args[0].stripVar(Xe);switch(He.fname){case"sin":Do=a.parse(u("({0})/(({1})^2+({0})^2)",th,wt));break;case"cos":Do=a.parse(u("({1})/(({1})^2+({0})^2)",th,wt));break;case"sinh":Do=a.parse(u("({0})/(({1})^2-({0})^2)",th,wt));break;case"cosh":Do=a.parse(u("({1})/(({1})^2-({0})^2)",th,wt));break}}else{var _h=r.Settings.integration_depth<r.Settings.Laplace_integration_depth;if(_h){var cf=r.Settings.integration_depth;r.Settings.integration_depth=r.Settings.Laplace_integration_depth}r.Utils.block("PARSE2NUMBER",function(){var df=Xe,uf=He.sub(Xe,df),li=a.parse("e^(-"+wt+"*"+df+")*"+uf);if(Do=r.Calculus.integrate(li,df),Do.hasIntegral())return a.symfunction("laplace",arguments);Do=Do.sub(Xe,0),Do=a.expand(a.multiply(Do,new l(-1))),Do=Do.sub(df,Xe)},!1),Do=r.Utils.block("PARSE2NUMBER",function(){return a.parse(Do)},!0),_h&&(r.Settings.integration_depth=cf)}}return a.multiply(Do,sr)},inverse:function(He,Xe,wt){var Do=He.clone();return r.Utils.block("POSITIVE_MULTIPLIERS",function(){if(He.group===Z&&(He=r.Algebra.PartFrac.partfrac(a.expand(He),Xe)),He.group===E||He.group===Z||He.isComposite()){var sr=function(){pf=a.multiply(pf,Ko),pf.multiplier=pf.multiplier.multiply(He.multiplier),pf=a.divide(pf,_h.a)},Ko,Bs,th,pf,_h,cf,df,uf;if(df=He.multiplier.clone(),He.toUnitMultiplier(),Ko=He.getNum(),Bs=He.getDenom().toUnitMultiplier(),Bs.group===P?(uf=Bs.power.clone(),Bs.toLinear()):uf=new r.Frac(1),th=Xe.toString(),_h=r.Utils.decompose_fn(Bs,th,!0),r.Utils.decompose_fn(a.expand(Ko.clone()),th,!0),Ko.multiplier=Ko.multiplier.multiply(df),(Bs.group===E||Bs.group===Z)&&_h.x.value===th&&_h.b.equals(0)&&r.Utils.isInt(_h.x.power)){var li,cf;cf=_h.x.power-1,li=r.Math2.factorial(cf),pf=a.divide(a.pow(wt,new l(cf)),new l(li)),sr()}else if(Bs.group===P&&uf.equals(1)){if(_h.x.group===r.groups.PL&&r.Algebra.degree(Bs).equals(2)){var Vc=r.Algebra.sqComplete(Bs,th),Rs=r.Utils.getU(Bs),qc=r.Utils.decompose_fn(Vc.a,th,!0).b,Qp=_e.LaPlace.inverse(a.parse(`1/((${Rs})^2+(${Vc.c}))`),Rs,wt);pf=a.multiply(Qp,a.parse(`(${df})*e^(-(${qc})*(${wt}))`))}else if(_h.x.isLinear()&&!Ko.contains(th)){wt=a.divide(wt,_h.a.clone());var cf=uf-1,li=cf===0||cf===1?"1":`(${uf}-1)!`;pf=a.parse(u("(({0})^({3}-1)*e^(-(({2})*({0}))/({1})))/(({4})*({1})^({3}))",wt,_h.a,_h.b,uf,li)),sr()}else if(_h.x.group===E&&_h.x.power.equals(2))if(!Ko.contains(th))pf=a.parse(u("(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/sqrt(({2})*({3}))",wt,Ko,_h.a,_h.b));else{var qc=new l(1);if(Ko.group===Z){var n1=new l(1);Ko.each(function(K2){K2.contains(th)?n1=a.multiply(n1,K2):qc=a.multiply(qc,K2)}),Ko=n1}var wh=r.Utils.decompose_fn(Ko,th,!0),gf,yh,ff,e1,s1,b1;if(gf=wh.a,yh=wh.b,ff=gf.containsFunction("sin"),s1=gf.containsFunction("cos"),e1=yh.containsFunction("cos"),b1=yh.containsFunction("sin"),wh.x.value===th&&wh.x.isLinear()&&!(ff&&e1||s1||b1))pf=a.parse(u("(({1})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})",wt,wh.a,_h.a,_h.b));else if(ff&&e1){var _1,V1;if(_1=gf.findFunction("sin"),V1=yh.findFunction("cos"),_1.args[0].equals(V1.args[0])&&!_1.args[0].contains(th)){var I1,i2,R2,F2;I1=a.divide(yh,V1.toUnitMultiplier()).toString(),i2=_1.args[0].toString(),R2=_h.b,F2=a.divide(gf,_1.toUnitMultiplier()),X1="(({1})*({2})*cos({3})*sin(sqrt({4})*({0})))/sqrt({4})+({1})*sin({3})*({5})*cos(sqrt({4})*({0}))",pf=a.parse(u(X1,wt,qc,I1,i2,R2,F2))}}}}else if(_h.x.power.num&&_h.x.power.num.equals(3)&&_h.x.power.den.equals(2)&&Ko.contains("sqrt(pi)")&&!Ko.contains(th)&&Ko.isLinear()){var I1=a.divide(Ko.clone(),a.parse("sqrt(pi)"));pf=a.parse(u("(2*({2})*sqrt({0}))/({1})",wt,_h.a,I1,Ko))}else if(uf.equals(2)&&_h.x.power.equals(2)){var qc,R2,X1;if(!Ko.contains(th))qc=a.divide(Ko,new l(2)),X1="(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({3})*sqrt(({2})*({3})))-(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*({3}))",pf=a.parse(u(X1,wt,qc,_h.a,_h.b));else if(wh=r.Utils.decompose_fn(a.expand(Ko.clone()),th,!0),wh.x.isComposite()){var W2=[],N2=Ko.collectSymbols(function(S2){S2=l.unwrapPARENS(S2);var E1=r.Utils.decompose_fn(S2,th,!0);return E1.symbol=S2,E1}).sort(function(S2,E1){var F1,K1;return F1=S2.x.value!==th?0:S2.x.power,K1=E1.x.value!==th?0:E1.x.power,K1-F1});qc=new l(-1);for(var V2=0;V2<N2.length;V2++){var q2=N2[V2];q2.x.value===th?W2.push(q2):qc=a.multiply(qc,q2.symbol)}W2[0].x.power.equals(2)&&W2[1].x.power.equals(1)&&W2[1].b.equals(0)&&!W2[0].b.equals(0)&&(I1=W2[0].a.negate(),X1="-(({1})*({2})*({5})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})^2*sqrt(({4})*({5})))-(({1})*({3})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})*sqrt(({4})*({5})))+(({1})*({2})*cos((sqrt(({4})*({5}))*({0}))/({4})))/({4})^2",pf=a.parse(u(X1,wt,qc,I1,W2[0].b,_h.a,_h.b)))}else wh.x.isLinear()?(qc=a.divide(wh.a,new l(2)),X1="(({1})*({0})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))",pf=a.parse(u(X1,wt,qc,_h.a,_h.b))):wh.x.power.equals(2)&&(wh.b.equals(0)?(qc=a.divide(wh.a,new l(2)),X1="(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",pf=a.parse(u(X1,wt,qc,_h.a,_h.b))):(qc=a.divide(wh.a,new l(2)),R2=wh.b.negate(),X1="-((({2})*({4})-2*({1})*({3}))*sin((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3})*sqrt(({2})*({3})))+(({4})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3}))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",pf=a.parse(u(X1,wt,qc,_h.a,_h.b,R2))))}else He.isComposite()&&(uf.equals(2)&&_h.x.group===E?pf=a.parse(`(${df})*(${wt})*e^(-(${_h.b})*(${wt}))`):(pf=new l(0),He.each(function(B2){pf=a.add(pf,_e.LaPlace.inverse(B2,Xe,wt))},!0)))}return pf||(pf=a.symfunction("ilt",[Do,Xe,wt])),pf},!0)}},Statistics:{frequencyMap:function(He){for(var Xe={},wt=0,Do=He.length;wt<Do;wt++){var sr=He[wt],Ko=sr.toString();Xe[Ko]||(Xe[Ko]=0),Xe[Ko]++}return Xe},sort:function(He){return He.sort(function(Xe,wt){return(!Xe.isConstant()||!wt.isConstant())&&a.error("Unable to sort! All values must be numeric"),Xe.multiplier.subtract(wt.multiplier)})},count:function(He){return new l(He.length)},sum:function(He,Xe){for(var wt=new l(0),Do=0,sr=He.length;Do<sr;Do++){var Ko=He[Do].clone();Xe?wt=a.add(a.pow(a.subtract(Ko,Xe.clone()),new l(2)),wt):wt=a.add(Ko,wt)}return wt},mean:function(){var He=[].slice.call(arguments);return d(He[0])?_e.Statistics.mean.apply(this,He[0].elements):a.divide(_e.Statistics.sum(He),_e.Statistics.count(He))},median:function(){var He=[].slice.call(arguments),Xe;if(d(He[0]))return _e.Statistics.median.apply(this,He[0].elements);try{var wt=_e.Statistics.sort(He),Do=He.length;if(r.Utils.even(Do)){var sr=Do/2;Xe=_e.Statistics.mean(wt[sr-1],wt[sr])}else Xe=wt[Math.floor(Do/2)]}catch{Xe=a.symfunction("median",He)}return Xe},mode:function(){var He=[].slice.call(arguments),Xe;if(d(He[0]))return _e.Statistics.mode.apply(this,He[0].elements);var wt=_e.Statistics.frequencyMap(He);if(r.Utils.keys(wt).length===1)Xe=He[0];else{var Do={};for(var sr in wt){var Ko=wt[sr];if(!(Ko in Do))Do[Ko]=sr;else{var Bs=Do[Ko];g(Bs)?Bs.push(sr):Do[Ko]=[sr,Do[Ko]]}}var th=Do[Math.max.apply(null,r.Utils.keys(Do))];g(th)?Xe=a.symfunction("mode",th.sort()):Xe=a.parse(th)}return Xe},gVariance:function(He,Xe){var wt=_e.Statistics.mean.apply(_e.Statistics,Xe),Do=_e.Statistics.sum(Xe,wt);return a.multiply(He,Do)},variance:function(){var He=[].slice.call(arguments);if(d(He[0]))return _e.Statistics.variance.apply(this,He[0].elements);var Xe=a.divide(new l(1),_e.Statistics.count(He));return _e.Statistics.gVariance(Xe,He)},sampleVariance:function(){var He=[].slice.call(arguments);if(d(He[0]))return _e.Statistics.sampleVariance.apply(this,He[0].elements);var Xe=a.divide(new l(1),a.subtract(_e.Statistics.count(He),new l(1)));return _e.Statistics.gVariance(Xe,He)},standardDeviation:function(){var He=[].slice.call(arguments);return d(He[0])?_e.Statistics.standardDeviation.apply(this,He[0].elements):a.pow(_e.Statistics.variance.apply(_e.Statistics,He),new l(1/2))},sampleStandardDeviation:function(){var He=[].slice.call(arguments);return d(He[0])?_e.Statistics.sampleStandardDeviation.apply(this,He[0].elements):a.pow(_e.Statistics.sampleVariance.apply(_e.Statistics,He),new l(1/2))},zScore:function(He,Xe,wt){return a.divide(a.subtract(He,Xe),wt)}},Units:{table:{foot:"12 inch",meter:"100 cm",decimeter:"10 cm"}}};e.register([{name:"laplace",visible:!0,numargs:3,build:function(){return _e.LaPlace.transform}},{name:"ilt",visible:!0,numargs:3,build:function(){return _e.LaPlace.inverse}},{name:"mean",visible:!0,numargs:-1,build:function(){return _e.Statistics.mean}},{name:"median",visible:!0,numargs:-1,build:function(){return _e.Statistics.median}},{name:"mode",visible:!0,numargs:-1,build:function(){return _e.Statistics.mode}},{name:"smpvar",visible:!0,numargs:-1,build:function(){return _e.Statistics.sampleVariance}},{name:"variance",visible:!0,numargs:-1,build:function(){return _e.Statistics.variance}},{name:"smpstdev",visible:!0,numargs:-1,build:function(){return _e.Statistics.sampleStandardDeviation}},{name:"stdev",visible:!0,numargs:-1,build:function(){return _e.Statistics.standardDeviation}},{name:"zscore",visible:!0,numargs:3,build:function(){return _e.Statistics.zScore}}]),e.updateAPI()})(),t.exports=e}(Extra)),Extra.exports}requireExtra();function useMaths(){const t=d=>d.replace(/\\left|\\right/g,"").replace(/\\,/g,"").trim(),e=d=>{try{const g=nerdamer.convertFromLaTeX(t(d));return nerdamer(g)}catch(g){throw g}},r=(d,g)=>{try{return Math.abs(Number(d.subtract(g).evaluate().text()))<=.02}catch{return!1}},a=(d,g)=>{try{return d.eq(g)}catch{return!1}},l=(d,g)=>{const E=Z=>t(Z),P=Z=>{const me=E(Z).match(/\(([^)]+)\)/);if(!me)throw new Error("Bad coordinate");const[_e,He]=me[1].split(",").map(Xe=>Xe.trim());return{x:nerdamer(_e),y:nerdamer(He)}};try{const Z=P(d),me=P(g);return Z.x.eq(me.x)&&Z.y.eq(me.y)}catch{return!1}};return{isCorrect:(d,g)=>{if(/^\s*\\?\(?[^,]+,[^)]+\)?\s*$/.test(d)||g.includes(","))return l(d,g);try{const E=e(d),P=e(g),Z=r(E,P)||a(E,P);return console.log(`input: ${E.toString()}, answer: ${P.toString()}, correct: ${Z}`),Z}catch{return!1}}}}function MathInput({answer:t}){const[e,r]=reactExports.useState(""),{isCorrect:a}=useMaths(),l=reactExports.useRef(null);reactExports.useEffect(()=>{if(!l.current)return;const d=l.current;d.autocomplete="off",d.menuItems=[],d.suggestions="none",d.inlineShortcuts={sqrt:"\\sqrt{#?}",frac:"\\frac{#?}{#?}","/":"\\frac{#@}{#?}",sin:"\\sin",cos:"\\cos",tan:"\\tan"},d.keybindings=[{key:"[Backspace]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"shift+[Backspace]",command:"deleteForward"},{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"}],l.current.removeExtraneousParentheses=!1},[]);const u=d=>{const E=d.target.value,P=window.MathfieldElement?.computeEngine;if(P){const me=P.parse(E,{canonical:!1}).toLatex({fractionStyle:()=>"quotient"});r(me)}else r(E)};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("math-field",{ref:l,"default-mode":"inline-math",onInput:u,className:`txtbox outline-none bg-none color-txt-main inline-block \r
          focus:border-3 color-shadow-accent w-50 mx-4\r
          h-auto overflow-scroll`,style:{background:"none",outline:"none",fontSize:24}}),a(e,t)?jsxRuntimeExports.jsx("span",{className:"color-txt-main",children:"Correct!"}):jsxRuntimeExports.jsx("span",{className:"color-txt-accent",children:"Wrong!"})]})}const QReplyCard=({userImage:t,username:e,time:r,content:a,replyCount:l=0,onPressReply:u,onPressReplies:d,imageURL:g})=>{const[E,P]=reactExports.useState(null);reactExports.useEffect(()=>{P(g??null)},[g]);const Z=r?.toDate?.()?.toLocaleTimeString?.([],{hour:"2-digit",minute:"2-digit"})??(r instanceof Date?r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Just now");return jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-4 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mt-2 mb-3",children:[t?jsxRuntimeExports.jsx("img",{src:t,alt:e||"user",className:"w-7 h-7 rounded-full mr-3 object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full mr-3 bg-light-grey dark:bg-grey"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"txt-bold text-black dark:text-white",children:e}),jsxRuntimeExports.jsx("span",{className:"txt-sub text-grey dark:text-light-grey",children:Z})]})]}),E&&jsxRuntimeExports.jsx("img",{src:E,alt:"Post",className:"w-full h-[200px] object-cover rounded-lg my-3"}),jsxRuntimeExports.jsx("p",{className:"text-[20px] text-black dark:text-white mb-6",children:a}),(u||l>0&&d)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-1",children:[u&&jsxRuntimeExports.jsx("button",{type:"button",onClick:u,className:"flex items-center px-2 py-1 text-sm text-blue dark:text-blue-light hover:underline",children:"Reply"}),l>0&&d&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:d,className:"flex items-center px-2 py-1 text-sm text-blue dark:text-blue-light font-semibold hover:underline",children:[l," ",l===1?"reply":"replies"]})]})]})},ReplyThread=({reply:t,questionId:e,onReply:r})=>{const[a,l]=reactExports.useState([]),[u,d]=reactExports.useState(!1);return reactExports.useEffect(()=>{(async()=>{const E=query(collection(db$1,"certchamps-questions",e,"replies",t.id,"replies"),orderBy("timestamp","asc")),P=onSnapshot(E,async Z=>{const me=await Promise.all(Z.docs.map(async _e=>{const He=_e.data(),Xe=He.userId,wt=query(collection(db$1,"user-data"),where("uid","==",Xe)),Do=await getDocs(wt);let sr="Unknown",Ko=null;if(!Do.empty){const Bs=Do.docs[0].data();sr=Bs.username;try{const th=getStorage(),pf=ref(th,Bs.picture);Ko=await getDownloadURL(pf)}catch(th){console.warn("Image error:",th)}}return{id:_e.id,content:He.content,timestamp:He.timestamp,username:sr,userImage:Ko,replyingTo:He.replyingTo,replyingToUser:He.replyingToUser}}));l(me),me.length>0&&d(!0)});return()=>P()})()},[t.id,e]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(QReplyCard,{content:t.content,userImage:t.userImage,username:t.username,time:t.timestamp,replyCount:a.length,onPressReply:()=>r(t.id,t.username),onPressReplies:a.length>0?()=>d(!u):void 0}),u&&a.length>0&&jsxRuntimeExports.jsx("div",{className:"ml-6 pl-4 border-l-2 border-light-grey dark:border-grey space-y-3",children:a.map(g=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(QReplyCard,{content:g.content,userImage:g.userImage,username:g.username,time:g.timestamp,replyCount:0,onPressReply:void 0,onPressReplies:void 0})},g.id))})]})},QThread=t=>{const{user:e}=reactExports.useContext(UserContext),[r,a]=reactExports.useState(""),[l,u]=reactExports.useState(null),[d,g]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{const Xe=query(collection(db$1,"certchamps-questions",t.questionId,"replies"),orderBy("timestamp","desc")),wt=onSnapshot(Xe,async Do=>{const sr=await Promise.all(Do.docs.map(async Ko=>{const Bs=Ko.data(),th=Ko.id,pf=Bs.userId,_h=query(collection(db$1,"user-data"),where("uid","==",pf)),cf=await getDocs(_h);let df="Unknown",uf=null;if(!cf.empty){const Rs=cf.docs[0].data();df=Rs.username;try{const qc=getStorage(),Qp=ref(qc,Rs.picture);uf=await getDownloadURL(Qp)}catch(qc){console.warn("Image error:",qc)}}const Vc=(await getDocs(collection(db$1,"posts",th,"replies"))).size;return{id:Ko.id,content:Bs.content,timestamp:Bs.timestamp,username:df,userImage:uf,replyCount:Vc}}));g(sr)});return()=>wt()})()},[t.questionId]);const E=async()=>{try{const He=`q${t.part+1}`,Xe=doc(db$1,"certchamps-questions",t.questionId,"content",He),wt=await getDoc(Xe);if(wt.exists()){const Do=wt.data().image;return console.log(Do),Do}else return console.log("Document doesn't exist!"),""}catch(He){return console.error("Error fetching document:",He),""}},P=async()=>{if(r.trim())try{const He=await E();if(console.log(He),l&&l.type==="reply")await addDoc(collection(db$1,"certchamps-questions",t.questionId,"replies",l.id,"replies"),{userId:e.uid,content:r.trim(),timestamp:serverTimestamp(),replyingTo:l.id,replyingToUser:l.username});else{const Xe=await addDoc(collection(db$1,"certchamps-questions",t.questionId,"replies"),{userId:e.uid,content:r.trim(),timestamp:serverTimestamp()});await addDoc(collection(db$1,"posts"),{userId:e.uid,content:r.trim(),timestamp:serverTimestamp(),imageUrl:He,likes:0,isFlashcard:!0,flashcardId:t.questionId,replyId:Xe.id}),console.log("Created social post for practice reply:",Xe.id)}a(""),u(null)}catch(He){console.error("Error sending message: ",He)}},Z=(He,Xe)=>{u({id:He,username:Xe,type:"reply"})},me=()=>{u(null),a("")},_e=He=>{He.key==="Enter"&&!He.shiftKey&&(He.preventDefault(),P())};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full min-h-0 overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"mx-auto max-w-3xl w-full space-y-4 flex-1 pb-28 px-3 pt-2",children:d.map(He=>jsxRuntimeExports.jsx(ReplyThread,{reply:He,questionId:t.questionId,onReply:Z},He.id))}),jsxRuntimeExports.jsxs("div",{className:"sticky bottom-0 left-0 border-t border-light-grey dark:border-grey bg-white dark:bg-black p-3 z-10",children:[l&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2 px-3 py-1 rounded-full bg-light-grey/40 dark:bg-grey/30",children:[jsxRuntimeExports.jsxs("span",{className:"txt-sub text-black dark:text-white",children:["Replying to ",jsxRuntimeExports.jsxs("span",{className:"txt-bold",children:["@",l.username]})]}),jsxRuntimeExports.jsx("button",{onClick:me,className:"txt-sub text-grey dark:text-light-grey hover:text-red",type:"button",children:"Cancel"})]}),jsxRuntimeExports.jsx("textarea",{value:r,onChange:He=>a(He.target.value),onKeyDown:_e,placeholder:"Say something excuisite...",rows:3,className:"w-full p-3 rounded-xl border-2 border-light-grey dark:border-grey bg-button dark:bg-button-dark text-black dark:text-white focus:outline-none resize-none"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:me,className:"px-3 py-1 txt-sub text-grey dark:text-light-grey hover:text-black dark:hover:text-white",children:"Clear"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:P,disabled:!r.trim(),className:"px-4 py-2 rounded-xl bg-blue text-white disabled:opacity-50 hover:bg-blue-light",children:"Send"})]})]})]})},useDeckHandler=()=>{const{user:t,setUser:e}=reactExports.useContext(UserContext);return{createDeck:async(P,Z,me,_e)=>{try{const He=await addDoc(collection(db$1,"user-data",t.uid,"decks"),{name:P,description:Z,questions:me,timestamp:Timestamp.now(),questionsCompleted:[],color:_e,timeElapsed:0});e(Xe=>({...Xe,decks:[...Xe.decks||[],{name:P,description:Z,questions:me,timestamp:Timestamp.now(),questionsCompleted:[],color:_e,id:He.id,timeElapsed:0}]}))}catch(He){console.log(He)}},deleteDeck:async P=>{try{await deleteDoc(doc(db$1,"user-data",t.uid,"decks",P)),e(Z=>({...Z,decks:Z.decks.filter(me=>me.id!=P)}))}catch(Z){console.log(Z)}},addQuestiontoDeck:(P,Z)=>{try{updateDoc(doc(db$1,"user-data",t.uid,"decks",Z),{questions:arrayUnion(...P)}),e(me=>({...me,decks:me.decks.map(_e=>_e.id==Z?{..._e,questions:[..._e.questions||[],...P]}:_e)}))}catch(me){console.log(me)}},shareDeck:async(P,Z,me)=>{try{const _e=(await getDoc(doc(db$1,"user-data",P.uid))).ref;updateDoc(_e,{notifications:arrayUnion({type:"deck-share",from:t.uid,timestamp:Timestamp.now(),deckID:Z})}),me(He=>He.map(Xe=>Xe.uid===P.uid?{...Xe,sent:!0}:Xe))}catch(_e){console.log(_e)}},addtoDecks:async(P,Z,me)=>{try{const _e=await addDoc(collection(db$1,"user-data",t.uid,"decks"),{name:P,description:Z,questions:me,timestamp:Timestamp.now(),questionsCompleted:[],color:"#FFFFFF",timeElapsed:0});e(He=>({...He,decks:[...He.decks||[],{name:P,description:Z,questions:me,timestamp:Timestamp.now(),questionsCompleted:[],color:"#FFFFFF",id:_e.id,timeElapsed:0}]}))}catch(_e){console.log(_e)}},saveProgress:async(P,Z,me)=>{try{const He=[{...t.decks.find(Xe=>Xe.id==Z),questionsCompleted:P,timeElapsed:me},...t.decks.filter(Xe=>Xe.id!=Z)];console.log(He),e(Xe=>({...Xe,decks:He})),updateDoc(doc(db$1,"user-data",t.uid,"decks",Z),{questionsCompleted:P,timeElapsed:me})}catch(_e){console.error("Failed to save progress:",_e)}},getDeckbyID:async(P,Z)=>{try{return(await getDoc(doc(db$1,"user-data",Z,"decks",P))).data()}catch(me){return console.log(me),null}}}};var lib={},flattenNames={},_freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var t=typeof commonjsGlobal$2=="object"&&commonjsGlobal$2&&commonjsGlobal$2.Object===Object&&commonjsGlobal$2;return _freeGlobal=t,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var t=require_freeGlobal(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return _root=r,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var t=require_root(),e=t.Symbol;return _Symbol=e,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var t=require_Symbol(),e=Object.prototype,r=e.hasOwnProperty,a=e.toString,l=t?t.toStringTag:void 0;function u(d){var g=r.call(d,l),E=d[l];try{d[l]=void 0;var P=!0}catch{}var Z=a.call(d);return P&&(g?d[l]=E:delete d[l]),Z}return _getRawTag=u,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var t=Object.prototype,e=t.toString;function r(a){return e.call(a)}return _objectToString=r,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var t=require_Symbol(),e=require_getRawTag(),r=require_objectToString(),a="[object Null]",l="[object Undefined]",u=t?t.toStringTag:void 0;function d(g){return g==null?g===void 0?l:a:u&&u in Object(g)?e(g):r(g)}return _baseGetTag=d,_baseGetTag}var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var t=Array.isArray;return isArray_1=t,isArray_1}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function t(e){return e!=null&&typeof e=="object"}return isObjectLike_1=t,isObjectLike_1}var isString_1,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var t=require_baseGetTag(),e=requireIsArray(),r=requireIsObjectLike(),a="[object String]";function l(u){return typeof u=="string"||!e(u)&&r(u)&&t(u)==a}return isString_1=l,isString_1}var _createBaseFor,hasRequired_createBaseFor;function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;hasRequired_createBaseFor=1;function t(e){return function(r,a,l){for(var u=-1,d=Object(r),g=l(r),E=g.length;E--;){var P=g[e?E:++u];if(a(d[P],P,d)===!1)break}return r}}return _createBaseFor=t,_createBaseFor}var _baseFor,hasRequired_baseFor;function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var t=require_createBaseFor(),e=t();return _baseFor=e,_baseFor}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function t(e,r){for(var a=-1,l=Array(e);++a<e;)l[a]=r(a);return l}return _baseTimes=t,_baseTimes}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var t=require_baseGetTag(),e=requireIsObjectLike(),r="[object Arguments]";function a(l){return e(l)&&t(l)==r}return _baseIsArguments=a,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var t=require_baseIsArguments(),e=requireIsObjectLike(),r=Object.prototype,a=r.hasOwnProperty,l=r.propertyIsEnumerable,u=t(function(){return arguments}())?t:function(d){return e(d)&&a.call(d,"callee")&&!l.call(d,"callee")};return isArguments_1=u,isArguments_1}var isBuffer$1={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function t(){return!1}return stubFalse_1=t,stubFalse_1}isBuffer$1.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,function(t,e){var r=require_root(),a=requireStubFalse(),l=e&&!e.nodeType&&e,u=l&&!0&&t&&!t.nodeType&&t,d=u&&u.exports===l,g=d?r.Buffer:void 0,E=g?g.isBuffer:void 0,P=E||a;t.exports=P}(isBuffer$1,isBuffer$1.exports)),isBuffer$1.exports}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(a,l){var u=typeof a;return l=l??t,!!l&&(u=="number"||u!="symbol"&&e.test(a))&&a>-1&&a%1==0&&a<l}return _isIndex=r,_isIndex}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return isLength_1=e,isLength_1}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var t=require_baseGetTag(),e=requireIsLength(),r=requireIsObjectLike(),a="[object Arguments]",l="[object Array]",u="[object Boolean]",d="[object Date]",g="[object Error]",E="[object Function]",P="[object Map]",Z="[object Number]",me="[object Object]",_e="[object RegExp]",He="[object Set]",Xe="[object String]",wt="[object WeakMap]",Do="[object ArrayBuffer]",sr="[object DataView]",Ko="[object Float32Array]",Bs="[object Float64Array]",th="[object Int8Array]",pf="[object Int16Array]",_h="[object Int32Array]",cf="[object Uint8Array]",df="[object Uint8ClampedArray]",uf="[object Uint16Array]",li="[object Uint32Array]",Vc={};Vc[Ko]=Vc[Bs]=Vc[th]=Vc[pf]=Vc[_h]=Vc[cf]=Vc[df]=Vc[uf]=Vc[li]=!0,Vc[a]=Vc[l]=Vc[Do]=Vc[u]=Vc[sr]=Vc[d]=Vc[g]=Vc[E]=Vc[P]=Vc[Z]=Vc[me]=Vc[_e]=Vc[He]=Vc[Xe]=Vc[wt]=!1;function Rs(qc){return r(qc)&&e(qc.length)&&!!Vc[t(qc)]}return _baseIsTypedArray=Rs,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function t(e){return function(r){return e(r)}}return _baseUnary=t,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,function(t,e){var r=require_freeGlobal(),a=e&&!e.nodeType&&e,l=a&&!0&&t&&!t.nodeType&&t,u=l&&l.exports===a,d=u&&r.process,g=function(){try{var E=l&&l.require&&l.require("util").types;return E||d&&d.binding&&d.binding("util")}catch{}}();t.exports=g}(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var t=require_baseIsTypedArray(),e=require_baseUnary(),r=require_nodeUtil(),a=r&&r.isTypedArray,l=a?e(a):t;return isTypedArray_1=l,isTypedArray_1}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var t=require_baseTimes(),e=requireIsArguments(),r=requireIsArray(),a=requireIsBuffer(),l=require_isIndex(),u=requireIsTypedArray(),d=Object.prototype,g=d.hasOwnProperty;function E(P,Z){var me=r(P),_e=!me&&e(P),He=!me&&!_e&&a(P),Xe=!me&&!_e&&!He&&u(P),wt=me||_e||He||Xe,Do=wt?t(P.length,String):[],sr=Do.length;for(var Ko in P)(Z||g.call(P,Ko))&&!(wt&&(Ko=="length"||He&&(Ko=="offset"||Ko=="parent")||Xe&&(Ko=="buffer"||Ko=="byteLength"||Ko=="byteOffset")||l(Ko,sr)))&&Do.push(Ko);return Do}return _arrayLikeKeys=E,_arrayLikeKeys}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var t=Object.prototype;function e(r){var a=r&&r.constructor,l=typeof a=="function"&&a.prototype||t;return r===l}return _isPrototype=e,_isPrototype}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function t(e,r){return function(a){return e(r(a))}}return _overArg=t,_overArg}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var t=require_overArg(),e=t(Object.keys,Object);return _nativeKeys=e,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var t=require_isPrototype(),e=require_nativeKeys(),r=Object.prototype,a=r.hasOwnProperty;function l(u){if(!t(u))return e(u);var d=[];for(var g in Object(u))a.call(u,g)&&g!="constructor"&&d.push(g);return d}return _baseKeys=l,_baseKeys}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return isObject_1=t,isObject_1}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var t=require_baseGetTag(),e=requireIsObject(),r="[object AsyncFunction]",a="[object Function]",l="[object GeneratorFunction]",u="[object Proxy]";function d(g){if(!e(g))return!1;var E=t(g);return E==a||E==l||E==r||E==u}return isFunction_1=d,isFunction_1}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var t=requireIsFunction(),e=requireIsLength();function r(a){return a!=null&&e(a.length)&&!t(a)}return isArrayLike_1=r,isArrayLike_1}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var t=require_arrayLikeKeys(),e=require_baseKeys(),r=requireIsArrayLike();function a(l){return r(l)?t(l):e(l)}return keys_1=a,keys_1}var _baseForOwn,hasRequired_baseForOwn;function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var t=require_baseFor(),e=requireKeys();function r(a,l){return a&&t(a,l,e)}return _baseForOwn=r,_baseForOwn}var identity_1,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity_1;hasRequiredIdentity=1;function t(e){return e}return identity_1=t,identity_1}var _castFunction,hasRequired_castFunction;function require_castFunction(){if(hasRequired_castFunction)return _castFunction;hasRequired_castFunction=1;var t=requireIdentity();function e(r){return typeof r=="function"?r:t}return _castFunction=e,_castFunction}var forOwn_1,hasRequiredForOwn;function requireForOwn(){if(hasRequiredForOwn)return forOwn_1;hasRequiredForOwn=1;var t=require_baseForOwn(),e=require_castFunction();function r(a,l){return a&&t(a,e(l))}return forOwn_1=r,forOwn_1}var _getPrototype,hasRequired_getPrototype;function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var t=require_overArg(),e=t(Object.getPrototypeOf,Object);return _getPrototype=e,_getPrototype}var isPlainObject_1,hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject_1;hasRequiredIsPlainObject=1;var t=require_baseGetTag(),e=require_getPrototype(),r=requireIsObjectLike(),a="[object Object]",l=Function.prototype,u=Object.prototype,d=l.toString,g=u.hasOwnProperty,E=d.call(Object);function P(Z){if(!r(Z)||t(Z)!=a)return!1;var me=e(Z);if(me===null)return!0;var _e=g.call(me,"constructor")&&me.constructor;return typeof _e=="function"&&_e instanceof _e&&d.call(_e)==E}return isPlainObject_1=P,isPlainObject_1}var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function t(e,r){for(var a=-1,l=e==null?0:e.length,u=Array(l);++a<l;)u[a]=r(e[a],a,e);return u}return _arrayMap=t,_arrayMap}var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function t(){this.__data__=[],this.size=0}return _listCacheClear=t,_listCacheClear}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function t(e,r){return e===r||e!==e&&r!==r}return eq_1=t,eq_1}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var t=requireEq();function e(r,a){for(var l=r.length;l--;)if(t(r[l][0],a))return l;return-1}return _assocIndexOf=e,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var t=require_assocIndexOf(),e=Array.prototype,r=e.splice;function a(l){var u=this.__data__,d=t(u,l);if(d<0)return!1;var g=u.length-1;return d==g?u.pop():r.call(u,d,1),--this.size,!0}return _listCacheDelete=a,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var t=require_assocIndexOf();function e(r){var a=this.__data__,l=t(a,r);return l<0?void 0:a[l][1]}return _listCacheGet=e,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var t=require_assocIndexOf();function e(r){return t(this.__data__,r)>-1}return _listCacheHas=e,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var t=require_assocIndexOf();function e(r,a){var l=this.__data__,u=t(l,r);return u<0?(++this.size,l.push([r,a])):l[u][1]=a,this}return _listCacheSet=e,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var t=require_listCacheClear(),e=require_listCacheDelete(),r=require_listCacheGet(),a=require_listCacheHas(),l=require_listCacheSet();function u(d){var g=-1,E=d==null?0:d.length;for(this.clear();++g<E;){var P=d[g];this.set(P[0],P[1])}}return u.prototype.clear=t,u.prototype.delete=e,u.prototype.get=r,u.prototype.has=a,u.prototype.set=l,_ListCache=u,_ListCache}var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var t=require_ListCache();function e(){this.__data__=new t,this.size=0}return _stackClear=e,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function t(e){var r=this.__data__,a=r.delete(e);return this.size=r.size,a}return _stackDelete=t,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function t(e){return this.__data__.get(e)}return _stackGet=t,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function t(e){return this.__data__.has(e)}return _stackHas=t,_stackHas}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var t=require_root(),e=t["__core-js_shared__"];return _coreJsData=e,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var t=require_coreJsData(),e=function(){var a=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function r(a){return!!e&&e in a}return _isMasked=r,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var t=Function.prototype,e=t.toString;function r(a){if(a!=null){try{return e.call(a)}catch{}try{return a+""}catch{}}return""}return _toSource=r,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var t=requireIsFunction(),e=require_isMasked(),r=requireIsObject(),a=require_toSource(),l=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,d=Function.prototype,g=Object.prototype,E=d.toString,P=g.hasOwnProperty,Z=RegExp("^"+E.call(P).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function me(_e){if(!r(_e)||e(_e))return!1;var He=t(_e)?Z:u;return He.test(a(_e))}return _baseIsNative=me,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function t(e,r){return e?.[r]}return _getValue=t,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var t=require_baseIsNative(),e=require_getValue();function r(a,l){var u=e(a,l);return t(u)?u:void 0}return _getNative=r,_getNative}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var t=require_getNative(),e=require_root(),r=t(e,"Map");return _Map=r,_Map}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var t=require_getNative(),e=t(Object,"create");return _nativeCreate=e,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var t=require_nativeCreate();function e(){this.__data__=t?t(null):{},this.size=0}return _hashClear=e,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return _hashDelete=t,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var t=require_nativeCreate(),e="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function l(u){var d=this.__data__;if(t){var g=d[u];return g===e?void 0:g}return a.call(d,u)?d[u]:void 0}return _hashGet=l,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var t=require_nativeCreate(),e=Object.prototype,r=e.hasOwnProperty;function a(l){var u=this.__data__;return t?u[l]!==void 0:r.call(u,l)}return _hashHas=a,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var t=require_nativeCreate(),e="__lodash_hash_undefined__";function r(a,l){var u=this.__data__;return this.size+=this.has(a)?0:1,u[a]=t&&l===void 0?e:l,this}return _hashSet=r,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var t=require_hashClear(),e=require_hashDelete(),r=require_hashGet(),a=require_hashHas(),l=require_hashSet();function u(d){var g=-1,E=d==null?0:d.length;for(this.clear();++g<E;){var P=d[g];this.set(P[0],P[1])}}return u.prototype.clear=t,u.prototype.delete=e,u.prototype.get=r,u.prototype.has=a,u.prototype.set=l,_Hash=u,_Hash}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var t=require_Hash(),e=require_ListCache(),r=require_Map();function a(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return _mapCacheClear=a,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return _isKeyable=t,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var t=require_isKeyable();function e(r,a){var l=r.__data__;return t(a)?l[typeof a=="string"?"string":"hash"]:l.map}return _getMapData=e,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var t=require_getMapData();function e(r){var a=t(this,r).delete(r);return this.size-=a?1:0,a}return _mapCacheDelete=e,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var t=require_getMapData();function e(r){return t(this,r).get(r)}return _mapCacheGet=e,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var t=require_getMapData();function e(r){return t(this,r).has(r)}return _mapCacheHas=e,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var t=require_getMapData();function e(r,a){var l=t(this,r),u=l.size;return l.set(r,a),this.size+=l.size==u?0:1,this}return _mapCacheSet=e,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var t=require_mapCacheClear(),e=require_mapCacheDelete(),r=require_mapCacheGet(),a=require_mapCacheHas(),l=require_mapCacheSet();function u(d){var g=-1,E=d==null?0:d.length;for(this.clear();++g<E;){var P=d[g];this.set(P[0],P[1])}}return u.prototype.clear=t,u.prototype.delete=e,u.prototype.get=r,u.prototype.has=a,u.prototype.set=l,_MapCache=u,_MapCache}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var t=require_ListCache(),e=require_Map(),r=require_MapCache(),a=200;function l(u,d){var g=this.__data__;if(g instanceof t){var E=g.__data__;if(!e||E.length<a-1)return E.push([u,d]),this.size=++g.size,this;g=this.__data__=new r(E)}return g.set(u,d),this.size=g.size,this}return _stackSet=l,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var t=require_ListCache(),e=require_stackClear(),r=require_stackDelete(),a=require_stackGet(),l=require_stackHas(),u=require_stackSet();function d(g){var E=this.__data__=new t(g);this.size=E.size}return d.prototype.clear=e,d.prototype.delete=r,d.prototype.get=a,d.prototype.has=l,d.prototype.set=u,_Stack=d,_Stack}var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return _setCacheAdd=e,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function t(e){return this.__data__.has(e)}return _setCacheHas=t,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var t=require_MapCache(),e=require_setCacheAdd(),r=require_setCacheHas();function a(l){var u=-1,d=l==null?0:l.length;for(this.__data__=new t;++u<d;)this.add(l[u])}return a.prototype.add=a.prototype.push=e,a.prototype.has=r,_SetCache=a,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function t(e,r){for(var a=-1,l=e==null?0:e.length;++a<l;)if(r(e[a],a,e))return!0;return!1}return _arraySome=t,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function t(e,r){return e.has(r)}return _cacheHas=t,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var t=require_SetCache(),e=require_arraySome(),r=require_cacheHas(),a=1,l=2;function u(d,g,E,P,Z,me){var _e=E&a,He=d.length,Xe=g.length;if(He!=Xe&&!(_e&&Xe>He))return!1;var wt=me.get(d),Do=me.get(g);if(wt&&Do)return wt==g&&Do==d;var sr=-1,Ko=!0,Bs=E&l?new t:void 0;for(me.set(d,g),me.set(g,d);++sr<He;){var th=d[sr],pf=g[sr];if(P)var _h=_e?P(pf,th,sr,g,d,me):P(th,pf,sr,d,g,me);if(_h!==void 0){if(_h)continue;Ko=!1;break}if(Bs){if(!e(g,function(cf,df){if(!r(Bs,df)&&(th===cf||Z(th,cf,E,P,me)))return Bs.push(df)})){Ko=!1;break}}else if(!(th===pf||Z(th,pf,E,P,me))){Ko=!1;break}}return me.delete(d),me.delete(g),Ko}return _equalArrays=u,_equalArrays}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var t=require_root(),e=t.Uint8Array;return _Uint8Array=e,_Uint8Array}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function t(e){var r=-1,a=Array(e.size);return e.forEach(function(l,u){a[++r]=[u,l]}),a}return _mapToArray=t,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function t(e){var r=-1,a=Array(e.size);return e.forEach(function(l){a[++r]=l}),a}return _setToArray=t,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var t=require_Symbol(),e=require_Uint8Array(),r=requireEq(),a=require_equalArrays(),l=require_mapToArray(),u=require_setToArray(),d=1,g=2,E="[object Boolean]",P="[object Date]",Z="[object Error]",me="[object Map]",_e="[object Number]",He="[object RegExp]",Xe="[object Set]",wt="[object String]",Do="[object Symbol]",sr="[object ArrayBuffer]",Ko="[object DataView]",Bs=t?t.prototype:void 0,th=Bs?Bs.valueOf:void 0;function pf(_h,cf,df,uf,li,Vc,Rs){switch(df){case Ko:if(_h.byteLength!=cf.byteLength||_h.byteOffset!=cf.byteOffset)return!1;_h=_h.buffer,cf=cf.buffer;case sr:return!(_h.byteLength!=cf.byteLength||!Vc(new e(_h),new e(cf)));case E:case P:case _e:return r(+_h,+cf);case Z:return _h.name==cf.name&&_h.message==cf.message;case He:case wt:return _h==cf+"";case me:var qc=l;case Xe:var Qp=uf&d;if(qc||(qc=u),_h.size!=cf.size&&!Qp)return!1;var n1=Rs.get(_h);if(n1)return n1==cf;uf|=g,Rs.set(_h,cf);var wh=a(qc(_h),qc(cf),uf,li,Vc,Rs);return Rs.delete(_h),wh;case Do:if(th)return th.call(_h)==th.call(cf)}return!1}return _equalByTag=pf,_equalByTag}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function t(e,r){for(var a=-1,l=r.length,u=e.length;++a<l;)e[u+a]=r[a];return e}return _arrayPush=t,_arrayPush}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var t=require_arrayPush(),e=requireIsArray();function r(a,l,u){var d=l(a);return e(a)?d:t(d,u(a))}return _baseGetAllKeys=r,_baseGetAllKeys}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function t(e,r){for(var a=-1,l=e==null?0:e.length,u=0,d=[];++a<l;){var g=e[a];r(g,a,e)&&(d[u++]=g)}return d}return _arrayFilter=t,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function t(){return[]}return stubArray_1=t,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var t=require_arrayFilter(),e=requireStubArray(),r=Object.prototype,a=r.propertyIsEnumerable,l=Object.getOwnPropertySymbols,u=l?function(d){return d==null?[]:(d=Object(d),t(l(d),function(g){return a.call(d,g)}))}:e;return _getSymbols=u,_getSymbols}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var t=require_baseGetAllKeys(),e=require_getSymbols(),r=requireKeys();function a(l){return t(l,r,e)}return _getAllKeys=a,_getAllKeys}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var t=require_getAllKeys(),e=1,r=Object.prototype,a=r.hasOwnProperty;function l(u,d,g,E,P,Z){var me=g&e,_e=t(u),He=_e.length,Xe=t(d),wt=Xe.length;if(He!=wt&&!me)return!1;for(var Do=He;Do--;){var sr=_e[Do];if(!(me?sr in d:a.call(d,sr)))return!1}var Ko=Z.get(u),Bs=Z.get(d);if(Ko&&Bs)return Ko==d&&Bs==u;var th=!0;Z.set(u,d),Z.set(d,u);for(var pf=me;++Do<He;){sr=_e[Do];var _h=u[sr],cf=d[sr];if(E)var df=me?E(cf,_h,sr,d,u,Z):E(_h,cf,sr,u,d,Z);if(!(df===void 0?_h===cf||P(_h,cf,g,E,Z):df)){th=!1;break}pf||(pf=sr=="constructor")}if(th&&!pf){var uf=u.constructor,li=d.constructor;uf!=li&&"constructor"in u&&"constructor"in d&&!(typeof uf=="function"&&uf instanceof uf&&typeof li=="function"&&li instanceof li)&&(th=!1)}return Z.delete(u),Z.delete(d),th}return _equalObjects=l,_equalObjects}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var t=require_getNative(),e=require_root(),r=t(e,"DataView");return _DataView=r,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var t=require_getNative(),e=require_root(),r=t(e,"Promise");return _Promise=r,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var t=require_getNative(),e=require_root(),r=t(e,"Set");return _Set=r,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var t=require_getNative(),e=require_root(),r=t(e,"WeakMap");return _WeakMap=r,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var t=require_DataView(),e=require_Map(),r=require_Promise(),a=require_Set(),l=require_WeakMap(),u=require_baseGetTag(),d=require_toSource(),g="[object Map]",E="[object Object]",P="[object Promise]",Z="[object Set]",me="[object WeakMap]",_e="[object DataView]",He=d(t),Xe=d(e),wt=d(r),Do=d(a),sr=d(l),Ko=u;return(t&&Ko(new t(new ArrayBuffer(1)))!=_e||e&&Ko(new e)!=g||r&&Ko(r.resolve())!=P||a&&Ko(new a)!=Z||l&&Ko(new l)!=me)&&(Ko=function(Bs){var th=u(Bs),pf=th==E?Bs.constructor:void 0,_h=pf?d(pf):"";if(_h)switch(_h){case He:return _e;case Xe:return g;case wt:return P;case Do:return Z;case sr:return me}return th}),_getTag=Ko,_getTag}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var t=require_Stack(),e=require_equalArrays(),r=require_equalByTag(),a=require_equalObjects(),l=require_getTag(),u=requireIsArray(),d=requireIsBuffer(),g=requireIsTypedArray(),E=1,P="[object Arguments]",Z="[object Array]",me="[object Object]",_e=Object.prototype,He=_e.hasOwnProperty;function Xe(wt,Do,sr,Ko,Bs,th){var pf=u(wt),_h=u(Do),cf=pf?Z:l(wt),df=_h?Z:l(Do);cf=cf==P?me:cf,df=df==P?me:df;var uf=cf==me,li=df==me,Vc=cf==df;if(Vc&&d(wt)){if(!d(Do))return!1;pf=!0,uf=!1}if(Vc&&!uf)return th||(th=new t),pf||g(wt)?e(wt,Do,sr,Ko,Bs,th):r(wt,Do,cf,sr,Ko,Bs,th);if(!(sr&E)){var Rs=uf&&He.call(wt,"__wrapped__"),qc=li&&He.call(Do,"__wrapped__");if(Rs||qc){var Qp=Rs?wt.value():wt,n1=qc?Do.value():Do;return th||(th=new t),Bs(Qp,n1,sr,Ko,th)}}return Vc?(th||(th=new t),a(wt,Do,sr,Ko,Bs,th)):!1}return _baseIsEqualDeep=Xe,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var t=require_baseIsEqualDeep(),e=requireIsObjectLike();function r(a,l,u,d,g){return a===l?!0:a==null||l==null||!e(a)&&!e(l)?a!==a&&l!==l:t(a,l,u,d,r,g)}return _baseIsEqual=r,_baseIsEqual}var _baseIsMatch,hasRequired_baseIsMatch;function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var t=require_Stack(),e=require_baseIsEqual(),r=1,a=2;function l(u,d,g,E){var P=g.length,Z=P,me=!E;if(u==null)return!Z;for(u=Object(u);P--;){var _e=g[P];if(me&&_e[2]?_e[1]!==u[_e[0]]:!(_e[0]in u))return!1}for(;++P<Z;){_e=g[P];var He=_e[0],Xe=u[He],wt=_e[1];if(me&&_e[2]){if(Xe===void 0&&!(He in u))return!1}else{var Do=new t;if(E)var sr=E(Xe,wt,He,u,d,Do);if(!(sr===void 0?e(wt,Xe,r|a,E,Do):sr))return!1}}return!0}return _baseIsMatch=l,_baseIsMatch}var _isStrictComparable,hasRequired_isStrictComparable;function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var t=requireIsObject();function e(r){return r===r&&!t(r)}return _isStrictComparable=e,_isStrictComparable}var _getMatchData,hasRequired_getMatchData;function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var t=require_isStrictComparable(),e=requireKeys();function r(a){for(var l=e(a),u=l.length;u--;){var d=l[u],g=a[d];l[u]=[d,g,t(g)]}return l}return _getMatchData=r,_getMatchData}var _matchesStrictComparable,hasRequired_matchesStrictComparable;function require_matchesStrictComparable(){if(hasRequired_matchesStrictComparable)return _matchesStrictComparable;hasRequired_matchesStrictComparable=1;function t(e,r){return function(a){return a==null?!1:a[e]===r&&(r!==void 0||e in Object(a))}}return _matchesStrictComparable=t,_matchesStrictComparable}var _baseMatches,hasRequired_baseMatches;function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var t=require_baseIsMatch(),e=require_getMatchData(),r=require_matchesStrictComparable();function a(l){var u=e(l);return u.length==1&&u[0][2]?r(u[0][0],u[0][1]):function(d){return d===l||t(d,l,u)}}return _baseMatches=a,_baseMatches}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var t=require_baseGetTag(),e=requireIsObjectLike(),r="[object Symbol]";function a(l){return typeof l=="symbol"||e(l)&&t(l)==r}return isSymbol_1=a,isSymbol_1}var _isKey,hasRequired_isKey;function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var t=requireIsArray(),e=requireIsSymbol(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function l(u,d){if(t(u))return!1;var g=typeof u;return g=="number"||g=="symbol"||g=="boolean"||u==null||e(u)?!0:a.test(u)||!r.test(u)||d!=null&&u in Object(d)}return _isKey=l,_isKey}var memoize_1,hasRequiredMemoize;function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var t=require_MapCache(),e="Expected a function";function r(a,l){if(typeof a!="function"||l!=null&&typeof l!="function")throw new TypeError(e);var u=function(){var d=arguments,g=l?l.apply(this,d):d[0],E=u.cache;if(E.has(g))return E.get(g);var P=a.apply(this,d);return u.cache=E.set(g,P)||E,P};return u.cache=new(r.Cache||t),u}return r.Cache=t,memoize_1=r,memoize_1}var _memoizeCapped,hasRequired_memoizeCapped;function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var t=requireMemoize(),e=500;function r(a){var l=t(a,function(d){return u.size===e&&u.clear(),d}),u=l.cache;return l}return _memoizeCapped=r,_memoizeCapped}var _stringToPath,hasRequired_stringToPath;function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var t=require_memoizeCapped(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=t(function(l){var u=[];return l.charCodeAt(0)===46&&u.push(""),l.replace(e,function(d,g,E,P){u.push(E?P.replace(r,"$1"):g||d)}),u});return _stringToPath=a,_stringToPath}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var t=require_Symbol(),e=require_arrayMap(),r=requireIsArray(),a=requireIsSymbol(),l=t?t.prototype:void 0,u=l?l.toString:void 0;function d(g){if(typeof g=="string")return g;if(r(g))return e(g,d)+"";if(a(g))return u?u.call(g):"";var E=g+"";return E=="0"&&1/g==-1/0?"-0":E}return _baseToString=d,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var t=require_baseToString();function e(r){return r==null?"":t(r)}return toString_1=e,toString_1}var _castPath,hasRequired_castPath;function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var t=requireIsArray(),e=require_isKey(),r=require_stringToPath(),a=requireToString();function l(u,d){return t(u)?u:e(u,d)?[u]:r(a(u))}return _castPath=l,_castPath}var _toKey,hasRequired_toKey;function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var t=requireIsSymbol();function e(r){if(typeof r=="string"||t(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return _toKey=e,_toKey}var _baseGet,hasRequired_baseGet;function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var t=require_castPath(),e=require_toKey();function r(a,l){l=t(l,a);for(var u=0,d=l.length;a!=null&&u<d;)a=a[e(l[u++])];return u&&u==d?a:void 0}return _baseGet=r,_baseGet}var get_1,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get_1;hasRequiredGet=1;var t=require_baseGet();function e(r,a,l){var u=r==null?void 0:t(r,a);return u===void 0?l:u}return get_1=e,get_1}var _baseHasIn,hasRequired_baseHasIn;function require_baseHasIn(){if(hasRequired_baseHasIn)return _baseHasIn;hasRequired_baseHasIn=1;function t(e,r){return e!=null&&r in Object(e)}return _baseHasIn=t,_baseHasIn}var _hasPath,hasRequired_hasPath;function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var t=require_castPath(),e=requireIsArguments(),r=requireIsArray(),a=require_isIndex(),l=requireIsLength(),u=require_toKey();function d(g,E,P){E=t(E,g);for(var Z=-1,me=E.length,_e=!1;++Z<me;){var He=u(E[Z]);if(!(_e=g!=null&&P(g,He)))break;g=g[He]}return _e||++Z!=me?_e:(me=g==null?0:g.length,!!me&&l(me)&&a(He,me)&&(r(g)||e(g)))}return _hasPath=d,_hasPath}var hasIn_1,hasRequiredHasIn;function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var t=require_baseHasIn(),e=require_hasPath();function r(a,l){return a!=null&&e(a,l,t)}return hasIn_1=r,hasIn_1}var _baseMatchesProperty,hasRequired_baseMatchesProperty;function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var t=require_baseIsEqual(),e=requireGet(),r=requireHasIn(),a=require_isKey(),l=require_isStrictComparable(),u=require_matchesStrictComparable(),d=require_toKey(),g=1,E=2;function P(Z,me){return a(Z)&&l(me)?u(d(Z),me):function(_e){var He=e(_e,Z);return He===void 0&&He===me?r(_e,Z):t(me,He,g|E)}}return _baseMatchesProperty=P,_baseMatchesProperty}var _baseProperty,hasRequired_baseProperty;function require_baseProperty(){if(hasRequired_baseProperty)return _baseProperty;hasRequired_baseProperty=1;function t(e){return function(r){return r?.[e]}}return _baseProperty=t,_baseProperty}var _basePropertyDeep,hasRequired_basePropertyDeep;function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var t=require_baseGet();function e(r){return function(a){return t(a,r)}}return _basePropertyDeep=e,_basePropertyDeep}var property_1,hasRequiredProperty;function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var t=require_baseProperty(),e=require_basePropertyDeep(),r=require_isKey(),a=require_toKey();function l(u){return r(u)?t(a(u)):e(u)}return property_1=l,property_1}var _baseIteratee,hasRequired_baseIteratee;function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var t=require_baseMatches(),e=require_baseMatchesProperty(),r=requireIdentity(),a=requireIsArray(),l=requireProperty();function u(d){return typeof d=="function"?d:d==null?r:typeof d=="object"?a(d)?e(d[0],d[1]):t(d):l(d)}return _baseIteratee=u,_baseIteratee}var _createBaseEach,hasRequired_createBaseEach;function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var t=requireIsArrayLike();function e(r,a){return function(l,u){if(l==null)return l;if(!t(l))return r(l,u);for(var d=l.length,g=a?d:-1,E=Object(l);(a?g--:++g<d)&&u(E[g],g,E)!==!1;);return l}}return _createBaseEach=e,_createBaseEach}var _baseEach,hasRequired_baseEach;function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var t=require_baseForOwn(),e=require_createBaseEach(),r=e(t);return _baseEach=r,_baseEach}var _baseMap,hasRequired_baseMap;function require_baseMap(){if(hasRequired_baseMap)return _baseMap;hasRequired_baseMap=1;var t=require_baseEach(),e=requireIsArrayLike();function r(a,l){var u=-1,d=e(a)?Array(a.length):[];return t(a,function(g,E,P){d[++u]=l(g,E,P)}),d}return _baseMap=r,_baseMap}var map_1,hasRequiredMap;function requireMap(){if(hasRequiredMap)return map_1;hasRequiredMap=1;var t=require_arrayMap(),e=require_baseIteratee(),r=require_baseMap(),a=requireIsArray();function l(u,d){var g=a(u)?t:r;return g(u,e(d,3))}return map_1=l,map_1}var hasRequiredFlattenNames;function requireFlattenNames(){if(hasRequiredFlattenNames)return flattenNames;hasRequiredFlattenNames=1,Object.defineProperty(flattenNames,"__esModule",{value:!0}),flattenNames.flattenNames=void 0;var t=requireIsString(),e=E(t),r=requireForOwn(),a=E(r),l=requireIsPlainObject(),u=E(l),d=requireMap(),g=E(d);function E(Z){return Z&&Z.__esModule?Z:{default:Z}}var P=flattenNames.flattenNames=function Z(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_e=[];return(0,g.default)(me,function(He){Array.isArray(He)?Z(He).map(function(Xe){return _e.push(Xe)}):(0,u.default)(He)?(0,a.default)(He,function(Xe,wt){Xe===!0&&_e.push(wt),_e.push(wt+"-"+Xe)}):(0,e.default)(He)&&_e.push(He)}),_e};return flattenNames.default=P,flattenNames}var mergeClasses={},_arrayEach,hasRequired_arrayEach;function require_arrayEach(){if(hasRequired_arrayEach)return _arrayEach;hasRequired_arrayEach=1;function t(e,r){for(var a=-1,l=e==null?0:e.length;++a<l&&r(e[a],a,e)!==!1;);return e}return _arrayEach=t,_arrayEach}var _defineProperty$1,hasRequired_defineProperty;function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty$1;hasRequired_defineProperty=1;var t=require_getNative(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return _defineProperty$1=e,_defineProperty$1}var _baseAssignValue,hasRequired_baseAssignValue;function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var t=require_defineProperty();function e(r,a,l){a=="__proto__"&&t?t(r,a,{configurable:!0,enumerable:!0,value:l,writable:!0}):r[a]=l}return _baseAssignValue=e,_baseAssignValue}var _assignValue,hasRequired_assignValue;function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var t=require_baseAssignValue(),e=requireEq(),r=Object.prototype,a=r.hasOwnProperty;function l(u,d,g){var E=u[d];(!(a.call(u,d)&&e(E,g))||g===void 0&&!(d in u))&&t(u,d,g)}return _assignValue=l,_assignValue}var _copyObject,hasRequired_copyObject;function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var t=require_assignValue(),e=require_baseAssignValue();function r(a,l,u,d){var g=!u;u||(u={});for(var E=-1,P=l.length;++E<P;){var Z=l[E],me=d?d(u[Z],a[Z],Z,u,a):void 0;me===void 0&&(me=a[Z]),g?e(u,Z,me):t(u,Z,me)}return u}return _copyObject=r,_copyObject}var _baseAssign,hasRequired_baseAssign;function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var t=require_copyObject(),e=requireKeys();function r(a,l){return a&&t(l,e(l),a)}return _baseAssign=r,_baseAssign}var _nativeKeysIn,hasRequired_nativeKeysIn;function require_nativeKeysIn(){if(hasRequired_nativeKeysIn)return _nativeKeysIn;hasRequired_nativeKeysIn=1;function t(e){var r=[];if(e!=null)for(var a in Object(e))r.push(a);return r}return _nativeKeysIn=t,_nativeKeysIn}var _baseKeysIn,hasRequired_baseKeysIn;function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var t=requireIsObject(),e=require_isPrototype(),r=require_nativeKeysIn(),a=Object.prototype,l=a.hasOwnProperty;function u(d){if(!t(d))return r(d);var g=e(d),E=[];for(var P in d)P=="constructor"&&(g||!l.call(d,P))||E.push(P);return E}return _baseKeysIn=u,_baseKeysIn}var keysIn_1,hasRequiredKeysIn;function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var t=require_arrayLikeKeys(),e=require_baseKeysIn(),r=requireIsArrayLike();function a(l){return r(l)?t(l,!0):e(l)}return keysIn_1=a,keysIn_1}var _baseAssignIn,hasRequired_baseAssignIn;function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var t=require_copyObject(),e=requireKeysIn();function r(a,l){return a&&t(l,e(l),a)}return _baseAssignIn=r,_baseAssignIn}var _cloneBuffer={exports:{}};_cloneBuffer.exports;var hasRequired_cloneBuffer;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,function(t,e){var r=require_root(),a=e&&!e.nodeType&&e,l=a&&!0&&t&&!t.nodeType&&t,u=l&&l.exports===a,d=u?r.Buffer:void 0,g=d?d.allocUnsafe:void 0;function E(P,Z){if(Z)return P.slice();var me=P.length,_e=g?g(me):new P.constructor(me);return P.copy(_e),_e}t.exports=E}(_cloneBuffer,_cloneBuffer.exports)),_cloneBuffer.exports}var _copyArray,hasRequired_copyArray;function require_copyArray(){if(hasRequired_copyArray)return _copyArray;hasRequired_copyArray=1;function t(e,r){var a=-1,l=e.length;for(r||(r=Array(l));++a<l;)r[a]=e[a];return r}return _copyArray=t,_copyArray}var _copySymbols,hasRequired_copySymbols;function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var t=require_copyObject(),e=require_getSymbols();function r(a,l){return t(a,e(a),l)}return _copySymbols=r,_copySymbols}var _getSymbolsIn,hasRequired_getSymbolsIn;function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var t=require_arrayPush(),e=require_getPrototype(),r=require_getSymbols(),a=requireStubArray(),l=Object.getOwnPropertySymbols,u=l?function(d){for(var g=[];d;)t(g,r(d)),d=e(d);return g}:a;return _getSymbolsIn=u,_getSymbolsIn}var _copySymbolsIn,hasRequired_copySymbolsIn;function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var t=require_copyObject(),e=require_getSymbolsIn();function r(a,l){return t(a,e(a),l)}return _copySymbolsIn=r,_copySymbolsIn}var _getAllKeysIn,hasRequired_getAllKeysIn;function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var t=require_baseGetAllKeys(),e=require_getSymbolsIn(),r=requireKeysIn();function a(l){return t(l,r,e)}return _getAllKeysIn=a,_getAllKeysIn}var _initCloneArray,hasRequired_initCloneArray;function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var t=Object.prototype,e=t.hasOwnProperty;function r(a){var l=a.length,u=new a.constructor(l);return l&&typeof a[0]=="string"&&e.call(a,"index")&&(u.index=a.index,u.input=a.input),u}return _initCloneArray=r,_initCloneArray}var _cloneArrayBuffer,hasRequired_cloneArrayBuffer;function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var t=require_Uint8Array();function e(r){var a=new r.constructor(r.byteLength);return new t(a).set(new t(r)),a}return _cloneArrayBuffer=e,_cloneArrayBuffer}var _cloneDataView,hasRequired_cloneDataView;function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var t=require_cloneArrayBuffer();function e(r,a){var l=a?t(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.byteLength)}return _cloneDataView=e,_cloneDataView}var _cloneRegExp,hasRequired_cloneRegExp;function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var t=/\w*$/;function e(r){var a=new r.constructor(r.source,t.exec(r));return a.lastIndex=r.lastIndex,a}return _cloneRegExp=e,_cloneRegExp}var _cloneSymbol,hasRequired_cloneSymbol;function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var t=require_Symbol(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function a(l){return r?Object(r.call(l)):{}}return _cloneSymbol=a,_cloneSymbol}var _cloneTypedArray,hasRequired_cloneTypedArray;function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var t=require_cloneArrayBuffer();function e(r,a){var l=a?t(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.length)}return _cloneTypedArray=e,_cloneTypedArray}var _initCloneByTag,hasRequired_initCloneByTag;function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var t=require_cloneArrayBuffer(),e=require_cloneDataView(),r=require_cloneRegExp(),a=require_cloneSymbol(),l=require_cloneTypedArray(),u="[object Boolean]",d="[object Date]",g="[object Map]",E="[object Number]",P="[object RegExp]",Z="[object Set]",me="[object String]",_e="[object Symbol]",He="[object ArrayBuffer]",Xe="[object DataView]",wt="[object Float32Array]",Do="[object Float64Array]",sr="[object Int8Array]",Ko="[object Int16Array]",Bs="[object Int32Array]",th="[object Uint8Array]",pf="[object Uint8ClampedArray]",_h="[object Uint16Array]",cf="[object Uint32Array]";function df(uf,li,Vc){var Rs=uf.constructor;switch(li){case He:return t(uf);case u:case d:return new Rs(+uf);case Xe:return e(uf,Vc);case wt:case Do:case sr:case Ko:case Bs:case th:case pf:case _h:case cf:return l(uf,Vc);case g:return new Rs;case E:case me:return new Rs(uf);case P:return r(uf);case Z:return new Rs;case _e:return a(uf)}}return _initCloneByTag=df,_initCloneByTag}var _baseCreate,hasRequired_baseCreate;function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var t=requireIsObject(),e=Object.create,r=function(){function a(){}return function(l){if(!t(l))return{};if(e)return e(l);a.prototype=l;var u=new a;return a.prototype=void 0,u}}();return _baseCreate=r,_baseCreate}var _initCloneObject,hasRequired_initCloneObject;function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var t=require_baseCreate(),e=require_getPrototype(),r=require_isPrototype();function a(l){return typeof l.constructor=="function"&&!r(l)?t(e(l)):{}}return _initCloneObject=a,_initCloneObject}var _baseIsMap,hasRequired_baseIsMap;function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var t=require_getTag(),e=requireIsObjectLike(),r="[object Map]";function a(l){return e(l)&&t(l)==r}return _baseIsMap=a,_baseIsMap}var isMap_1,hasRequiredIsMap;function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var t=require_baseIsMap(),e=require_baseUnary(),r=require_nodeUtil(),a=r&&r.isMap,l=a?e(a):t;return isMap_1=l,isMap_1}var _baseIsSet,hasRequired_baseIsSet;function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var t=require_getTag(),e=requireIsObjectLike(),r="[object Set]";function a(l){return e(l)&&t(l)==r}return _baseIsSet=a,_baseIsSet}var isSet_1,hasRequiredIsSet;function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var t=require_baseIsSet(),e=require_baseUnary(),r=require_nodeUtil(),a=r&&r.isSet,l=a?e(a):t;return isSet_1=l,isSet_1}var _baseClone,hasRequired_baseClone;function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var t=require_Stack(),e=require_arrayEach(),r=require_assignValue(),a=require_baseAssign(),l=require_baseAssignIn(),u=require_cloneBuffer(),d=require_copyArray(),g=require_copySymbols(),E=require_copySymbolsIn(),P=require_getAllKeys(),Z=require_getAllKeysIn(),me=require_getTag(),_e=require_initCloneArray(),He=require_initCloneByTag(),Xe=require_initCloneObject(),wt=requireIsArray(),Do=requireIsBuffer(),sr=requireIsMap(),Ko=requireIsObject(),Bs=requireIsSet(),th=requireKeys(),pf=requireKeysIn(),_h=1,cf=2,df=4,uf="[object Arguments]",li="[object Array]",Vc="[object Boolean]",Rs="[object Date]",qc="[object Error]",Qp="[object Function]",n1="[object GeneratorFunction]",wh="[object Map]",gf="[object Number]",yh="[object Object]",ff="[object RegExp]",e1="[object Set]",s1="[object String]",b1="[object Symbol]",_1="[object WeakMap]",V1="[object ArrayBuffer]",I1="[object DataView]",i2="[object Float32Array]",R2="[object Float64Array]",F2="[object Int8Array]",X1="[object Int16Array]",W2="[object Int32Array]",N2="[object Uint8Array]",V2="[object Uint8ClampedArray]",q2="[object Uint16Array]",B2="[object Uint32Array]",K2={};K2[uf]=K2[li]=K2[V1]=K2[I1]=K2[Vc]=K2[Rs]=K2[i2]=K2[R2]=K2[F2]=K2[X1]=K2[W2]=K2[wh]=K2[gf]=K2[yh]=K2[ff]=K2[e1]=K2[s1]=K2[b1]=K2[N2]=K2[V2]=K2[q2]=K2[B2]=!0,K2[qc]=K2[Qp]=K2[_1]=!1;function S2(E1,F1,K1,N1,J1,E2){var n2,D1=F1&_h,i1=F1&cf,g1=F1&df;if(K1&&(n2=J1?K1(E1,N1,J1,E2):K1(E1)),n2!==void 0)return n2;if(!Ko(E1))return E1;var u1=wt(E1);if(u1){if(n2=_e(E1),!D1)return d(E1,n2)}else{var L1=me(E1),B1=L1==Qp||L1==n1;if(Do(E1))return u(E1,D1);if(L1==yh||L1==uf||B1&&!J1){if(n2=i1||B1?{}:Xe(E1),!D1)return i1?E(E1,l(n2,E1)):g(E1,a(n2,E1))}else{if(!K2[L1])return J1?E1:{};n2=He(E1,L1,D1)}}E2||(E2=new t);var Q1=E2.get(E1);if(Q1)return Q1;E2.set(E1,n2),Bs(E1)?E1.forEach(function(a2){n2.add(S2(a2,F1,K1,a2,E1,E2))}):sr(E1)&&E1.forEach(function(a2,v2){n2.set(v2,S2(a2,F1,K1,v2,E1,E2))});var Z1=g1?i1?Z:P:i1?pf:th,A1=u1?void 0:Z1(E1);return e(A1||E1,function(a2,v2){A1&&(v2=a2,a2=E1[v2]),r(n2,v2,S2(a2,F1,K1,v2,E1,E2))}),n2}return _baseClone=S2,_baseClone}var cloneDeep_1,hasRequiredCloneDeep;function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var t=require_baseClone(),e=1,r=4;function a(l){return t(l,e|r)}return cloneDeep_1=a,cloneDeep_1}var hasRequiredMergeClasses;function requireMergeClasses(){if(hasRequiredMergeClasses)return mergeClasses;hasRequiredMergeClasses=1,Object.defineProperty(mergeClasses,"__esModule",{value:!0}),mergeClasses.mergeClasses=void 0;var t=requireForOwn(),e=u(t),r=requireCloneDeep(),a=u(r),l=Object.assign||function(g){for(var E=1;E<arguments.length;E++){var P=arguments[E];for(var Z in P)Object.prototype.hasOwnProperty.call(P,Z)&&(g[Z]=P[Z])}return g};function u(g){return g&&g.__esModule?g:{default:g}}var d=mergeClasses.mergeClasses=function(E){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Z=E.default&&(0,a.default)(E.default)||{};return P.map(function(me){var _e=E[me];return _e&&(0,e.default)(_e,function(He,Xe){Z[Xe]||(Z[Xe]={}),Z[Xe]=l({},Z[Xe],_e[Xe])}),me}),Z};return mergeClasses.default=d,mergeClasses}var autoprefix={},hasRequiredAutoprefix;function requireAutoprefix(){if(hasRequiredAutoprefix)return autoprefix;hasRequiredAutoprefix=1,Object.defineProperty(autoprefix,"__esModule",{value:!0}),autoprefix.autoprefix=void 0;var t=requireForOwn(),e=a(t),r=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var E=arguments[g];for(var P in E)Object.prototype.hasOwnProperty.call(E,P)&&(d[P]=E[P])}return d};function a(d){return d&&d.__esModule?d:{default:d}}var l={borderRadius:function(g){return{msBorderRadius:g,MozBorderRadius:g,OBorderRadius:g,WebkitBorderRadius:g,borderRadius:g}},boxShadow:function(g){return{msBoxShadow:g,MozBoxShadow:g,OBoxShadow:g,WebkitBoxShadow:g,boxShadow:g}},userSelect:function(g){return{WebkitTouchCallout:g,KhtmlUserSelect:g,MozUserSelect:g,msUserSelect:g,WebkitUserSelect:g,userSelect:g}},flex:function(g){return{WebkitBoxFlex:g,MozBoxFlex:g,WebkitFlex:g,msFlex:g,flex:g}},flexBasis:function(g){return{WebkitFlexBasis:g,flexBasis:g}},justifyContent:function(g){return{WebkitJustifyContent:g,justifyContent:g}},transition:function(g){return{msTransition:g,MozTransition:g,OTransition:g,WebkitTransition:g,transition:g}},transform:function(g){return{msTransform:g,MozTransform:g,OTransform:g,WebkitTransform:g,transform:g}},absolute:function(g){var E=g&&g.split(" ");return{position:"absolute",top:E&&E[0],right:E&&E[1],bottom:E&&E[2],left:E&&E[3]}},extend:function(g,E){var P=E[g];return P||{extend:g}}},u=autoprefix.autoprefix=function(g){var E={};return(0,e.default)(g,function(P,Z){var me={};(0,e.default)(P,function(_e,He){var Xe=l[He];Xe?me=r({},me,Xe(_e)):me[He]=_e}),E[Z]=me}),E};return autoprefix.default=u,autoprefix}var hover$1={},hasRequiredHover;function requireHover(){if(hasRequiredHover)return hover$1;hasRequiredHover=1,Object.defineProperty(hover$1,"__esModule",{value:!0}),hover$1.hover=void 0;var t=Object.assign||function(E){for(var P=1;P<arguments.length;P++){var Z=arguments[P];for(var me in Z)Object.prototype.hasOwnProperty.call(Z,me)&&(E[me]=Z[me])}return E},e=requireReact(),r=a(e);function a(E){return E&&E.__esModule?E:{default:E}}function l(E,P){if(!(E instanceof P))throw new TypeError("Cannot call a class as a function")}function u(E,P){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:E}function d(E,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);E.prototype=Object.create(P&&P.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(E,P):E.__proto__=P)}var g=hover$1.hover=function(P){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(me){d(_e,me);function _e(){var He,Xe,wt,Do;l(this,_e);for(var sr=arguments.length,Ko=Array(sr),Bs=0;Bs<sr;Bs++)Ko[Bs]=arguments[Bs];return Do=(Xe=(wt=u(this,(He=_e.__proto__||Object.getPrototypeOf(_e)).call.apply(He,[this].concat(Ko))),wt),wt.state={hover:!1},wt.handleMouseOver=function(){return wt.setState({hover:!0})},wt.handleMouseOut=function(){return wt.setState({hover:!1})},wt.render=function(){return r.default.createElement(Z,{onMouseOver:wt.handleMouseOver,onMouseOut:wt.handleMouseOut},r.default.createElement(P,t({},wt.props,wt.state)))},Xe),u(wt,Do)}return _e}(r.default.Component)};return hover$1.default=g,hover$1}var active={},hasRequiredActive;function requireActive(){if(hasRequiredActive)return active;hasRequiredActive=1,Object.defineProperty(active,"__esModule",{value:!0}),active.active=void 0;var t=Object.assign||function(E){for(var P=1;P<arguments.length;P++){var Z=arguments[P];for(var me in Z)Object.prototype.hasOwnProperty.call(Z,me)&&(E[me]=Z[me])}return E},e=requireReact(),r=a(e);function a(E){return E&&E.__esModule?E:{default:E}}function l(E,P){if(!(E instanceof P))throw new TypeError("Cannot call a class as a function")}function u(E,P){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:E}function d(E,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);E.prototype=Object.create(P&&P.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(E,P):E.__proto__=P)}var g=active.active=function(P){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(me){d(_e,me);function _e(){var He,Xe,wt,Do;l(this,_e);for(var sr=arguments.length,Ko=Array(sr),Bs=0;Bs<sr;Bs++)Ko[Bs]=arguments[Bs];return Do=(Xe=(wt=u(this,(He=_e.__proto__||Object.getPrototypeOf(_e)).call.apply(He,[this].concat(Ko))),wt),wt.state={active:!1},wt.handleMouseDown=function(){return wt.setState({active:!0})},wt.handleMouseUp=function(){return wt.setState({active:!1})},wt.render=function(){return r.default.createElement(Z,{onMouseDown:wt.handleMouseDown,onMouseUp:wt.handleMouseUp},r.default.createElement(P,t({},wt.props,wt.state)))},Xe),u(wt,Do)}return _e}(r.default.Component)};return active.default=g,active}var loop={},hasRequiredLoop;function requireLoop(){if(hasRequiredLoop)return loop;hasRequiredLoop=1,Object.defineProperty(loop,"__esModule",{value:!0});var t=function(r,a){var l={},u=function(g){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;l[g]=E};return r===0&&u("first-child"),r===a-1&&u("last-child"),(r===0||r%2===0)&&u("even"),Math.abs(r%2)===1&&u("odd"),u("nth-child",r),l};return loop.default=t,loop}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ReactCSS=lib.loop=lib.handleActive=lib.handleHover=lib.hover=void 0;var t=requireFlattenNames(),e=_e(t),r=requireMergeClasses(),a=_e(r),l=requireAutoprefix(),u=_e(l),d=requireHover(),g=_e(d),E=requireActive(),P=_e(E),Z=requireLoop(),me=_e(Z);function _e(Xe){return Xe&&Xe.__esModule?Xe:{default:Xe}}lib.hover=g.default,lib.handleHover=g.default,lib.handleActive=P.default,lib.loop=me.default;var He=lib.ReactCSS=function(wt){for(var Do=arguments.length,sr=Array(Do>1?Do-1:0),Ko=1;Ko<Do;Ko++)sr[Ko-1]=arguments[Ko];var Bs=(0,e.default)(sr),th=(0,a.default)(wt,Bs);return(0,u.default)(th)};return lib.default=He,lib}var libExports=requireLib();const reactCSS=getDefaultExportFromCjs(libExports);var calculateChange$2=function t(e,r,a,l,u){var d=u.clientWidth,g=u.clientHeight,E=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,P=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,Z=E-(u.getBoundingClientRect().left+window.pageXOffset),me=P-(u.getBoundingClientRect().top+window.pageYOffset);if(a==="vertical"){var _e=void 0;if(me<0?_e=0:me>g?_e=1:_e=Math.round(me*100/g)/100,r.a!==_e)return{h:r.h,s:r.s,l:r.l,a:_e,source:"rgb"}}else{var He=void 0;if(Z<0?He=0:Z>d?He=1:He=Math.round(Z*100/d)/100,l!==He)return{h:r.h,s:r.s,l:r.l,a:He,source:"rgb"}}return null},checkboardCache={},render=function t(e,r,a,l){if(typeof document>"u"&&!l)return null;var u=l?new l:document.createElement("canvas");u.width=a*2,u.height=a*2;var d=u.getContext("2d");return d?(d.fillStyle=e,d.fillRect(0,0,u.width,u.height),d.fillStyle=r,d.fillRect(0,0,a,a),d.translate(a,a),d.fillRect(0,0,a,a),u.toDataURL()):null},get$1=function t(e,r,a,l){var u=e+"-"+r+"-"+a+(l?"-server":"");if(checkboardCache[u])return checkboardCache[u];var d=render(e,r,a,l);return checkboardCache[u]=d,d},_extends$8=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Checkboard=function t(e){var r=e.white,a=e.grey,l=e.size,u=e.renderers,d=e.borderRadius,g=e.boxShadow,E=e.children,P=reactCSS({default:{grid:{borderRadius:d,boxShadow:g,absolute:"0px 0px 0px 0px",background:"url("+get$1(r,a,l,u.canvas)+") center left"}}});return reactExports.isValidElement(E)?React.cloneElement(E,_extends$8({},E.props,{style:_extends$8({},E.props.style,P.grid)})):React.createElement("div",{style:P.grid})};Checkboard.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var _extends$7=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},_createClass$7=function(){function t(e,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();function _classCallCheck$7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Alpha=function(t){_inherits$7(e,t);function e(){var r,a,l,u;_classCallCheck$7(this,e);for(var d=arguments.length,g=Array(d),E=0;E<d;E++)g[E]=arguments[E];return u=(a=(l=_possibleConstructorReturn$7(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(g))),l),l.handleChange=function(P){var Z=calculateChange$2(P,l.props.hsl,l.props.direction,l.props.a,l.container);Z&&typeof l.props.onChange=="function"&&l.props.onChange(Z,P)},l.handleMouseDown=function(P){l.handleChange(P),window.addEventListener("mousemove",l.handleChange),window.addEventListener("mouseup",l.handleMouseUp)},l.handleMouseUp=function(){l.unbindEventListeners()},l.unbindEventListeners=function(){window.removeEventListener("mousemove",l.handleChange),window.removeEventListener("mouseup",l.handleMouseUp)},a),_possibleConstructorReturn$7(l,u)}return _createClass$7(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var a=this,l=this.props.rgb,u=reactCSS({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+l.r+","+l.g+","+l.b+`, 0) 0%,
           rgba(`+l.r+","+l.g+","+l.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:l.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+l.r+","+l.g+","+l.b+`, 0) 0%,
           rgba(`+l.r+","+l.g+","+l.b+", 1) 100%)"},pointer:{left:0,top:l.a*100+"%"}},overwrite:_extends$7({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return React.createElement("div",{style:u.alpha},React.createElement("div",{style:u.checkboard},React.createElement(Checkboard,{renderers:this.props.renderers})),React.createElement("div",{style:u.gradient}),React.createElement("div",{style:u.container,ref:function(g){return a.container=g},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},React.createElement("div",{style:u.pointer},this.props.pointer?React.createElement(this.props.pointer,this.props):React.createElement("div",{style:u.slider}))))}}]),e}(reactExports.PureComponent||reactExports.Component),_createClass$6=function(){function t(e,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _classCallCheck$6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$6(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var DEFAULT_ARROW_OFFSET=1,UP_KEY_CODE=38,DOWN_KEY_CODE=40,VALID_KEY_CODES=[UP_KEY_CODE,DOWN_KEY_CODE],isValidKeyCode=function t(e){return VALID_KEY_CODES.indexOf(e)>-1},getNumberValue=function t(e){return Number(String(e).replace(/%/g,""))},idCounter=1,EditableInput=function(t){_inherits$6(e,t);function e(r){_classCallCheck$6(this,e);var a=_possibleConstructorReturn$6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.handleBlur=function(){a.state.blurValue&&a.setState({value:a.state.blurValue,blurValue:null})},a.handleChange=function(l){a.setUpdatedValue(l.target.value,l)},a.handleKeyDown=function(l){var u=getNumberValue(l.target.value);if(!isNaN(u)&&isValidKeyCode(l.keyCode)){var d=a.getArrowOffset(),g=l.keyCode===UP_KEY_CODE?u+d:u-d;a.setUpdatedValue(g,l)}},a.handleDrag=function(l){if(a.props.dragLabel){var u=Math.round(a.props.value+l.movementX);u>=0&&u<=a.props.dragMax&&a.props.onChange&&a.props.onChange(a.getValueObjectWithLabel(u),l)}},a.handleMouseDown=function(l){a.props.dragLabel&&(l.preventDefault(),a.handleDrag(l),window.addEventListener("mousemove",a.handleDrag),window.addEventListener("mouseup",a.handleMouseUp))},a.handleMouseUp=function(){a.unbindEventListeners()},a.unbindEventListeners=function(){window.removeEventListener("mousemove",a.handleDrag),window.removeEventListener("mouseup",a.handleMouseUp)},a.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},a.inputId="rc-editable-input-"+idCounter++,a}return _createClass$6(e,[{key:"componentDidUpdate",value:function(a,l){this.props.value!==this.state.value&&(a.value!==this.props.value||l.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(a){return _defineProperty({},this.props.label,a)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||DEFAULT_ARROW_OFFSET}},{key:"setUpdatedValue",value:function(a,l){var u=this.props.label?this.getValueObjectWithLabel(a):a;this.props.onChange&&this.props.onChange(u,l),this.setState({value:a})}},{key:"render",value:function(){var a=this,l=reactCSS({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return React.createElement("div",{style:l.wrap},React.createElement("input",{id:this.inputId,style:l.input,ref:function(d){return a.input=d},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?React.createElement("label",{htmlFor:this.inputId,style:l.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(reactExports.PureComponent||reactExports.Component),calculateChange$1=function t(e,r,a,l){var u=l.clientWidth,d=l.clientHeight,g=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,E=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,P=g-(l.getBoundingClientRect().left+window.pageXOffset),Z=E-(l.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var me=void 0;if(Z<0)me=359;else if(Z>d)me=0;else{var _e=-(Z*100/d)+100;me=360*_e/100}if(a.h!==me)return{h:me,s:a.s,l:a.l,a:a.a,source:"hsl"}}else{var He=void 0;if(P<0)He=0;else if(P>u)He=359;else{var Xe=P*100/u;He=360*Xe/100}if(a.h!==He)return{h:He,s:a.s,l:a.l,a:a.a,source:"hsl"}}return null},_createClass$5=function(){function t(e,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();function _classCallCheck$5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$5(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Hue=function(t){_inherits$5(e,t);function e(){var r,a,l,u;_classCallCheck$5(this,e);for(var d=arguments.length,g=Array(d),E=0;E<d;E++)g[E]=arguments[E];return u=(a=(l=_possibleConstructorReturn$5(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(g))),l),l.handleChange=function(P){var Z=calculateChange$1(P,l.props.direction,l.props.hsl,l.container);Z&&typeof l.props.onChange=="function"&&l.props.onChange(Z,P)},l.handleMouseDown=function(P){l.handleChange(P),window.addEventListener("mousemove",l.handleChange),window.addEventListener("mouseup",l.handleMouseUp)},l.handleMouseUp=function(){l.unbindEventListeners()},a),_possibleConstructorReturn$5(l,u)}return _createClass$5(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var a=this,l=this.props.direction,u=l===void 0?"horizontal":l,d=reactCSS({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:u==="vertical"});return React.createElement("div",{style:d.hue},React.createElement("div",{className:"hue-"+u,style:d.container,ref:function(E){return a.container=E},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},React.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),React.createElement("div",{style:d.pointer},this.props.pointer?React.createElement(this.props.pointer,this.props):React.createElement("div",{style:d.slider}))))}}]),e}(reactExports.PureComponent||reactExports.Component),propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=t,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var t=requireReactPropTypesSecret();function e(){}function r(){}return r.resetWarningCache=e,factoryWithThrowingShims=function(){function a(d,g,E,P,Z,me){if(me!==t){var _e=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _e.name="Invariant Violation",_e}}a.isRequired=a;function l(){return a}var u={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:l,element:a,elementType:a,instanceOf:l,node:a,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:r,resetWarningCache:e};return u.PropTypes=u,u},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports);function listCacheClear(){this.__data__=[],this.size=0}function eq(t,e){return t===e||t!==t&&e!==e}function assocIndexOf(t,e){for(var r=t.length;r--;)if(eq(t[r][0],e))return r;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var e=this.__data__,r=assocIndexOf(e,t);if(r<0)return!1;var a=e.length-1;return r==a?e.pop():splice.call(e,r,1),--this.size,!0}function listCacheGet(t){var e=this.__data__,r=assocIndexOf(e,t);return r<0?void 0:e[r][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,e){var r=this.__data__,a=assocIndexOf(r,t);return a<0?(++this.size,r.push([t,e])):r[a][1]=e,this}function ListCache(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function stackGet(t){return this.__data__.get(t)}function stackHas(t){return this.__data__.has(t)}var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$e=Object.prototype,hasOwnProperty$b=objectProto$e.hasOwnProperty,nativeObjectToString$1=objectProto$e.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(t){var e=hasOwnProperty$b.call(t,symToStringTag$1),r=t[symToStringTag$1];try{t[symToStringTag$1]=void 0;var a=!0}catch{}var l=nativeObjectToString$1.call(t);return a&&(e?t[symToStringTag$1]=r:delete t[symToStringTag$1]),l}var objectProto$d=Object.prototype,nativeObjectToString=objectProto$d.toString;function objectToString(t){return nativeObjectToString.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(t){return t==null?t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString(t)}function isObject$1(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(t){if(!isObject$1(t))return!1;var e=baseGetTag(t);return e==funcTag$1||e==genTag||e==asyncTag||e==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(t){if(t!=null){try{return funcToString$2.call(t)}catch{}try{return t+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$c=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$a=objectProto$c.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$a).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){if(!isObject$1(t)||isMasked(t))return!1;var e=isFunction(t)?reIsNative:reIsHostCtor;return e.test(toSource(t))}function getValue(t,e){return t?.[e]}function getNative(t,e){var r=getValue(t,e);return baseIsNative(r)?r:void 0}var Map$1=getNative(root,"Map"),nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function hashGet(t){var e=this.__data__;if(nativeCreate){var r=e[t];return r===HASH_UNDEFINED$2?void 0:r}return hasOwnProperty$9.call(e,t)?e[t]:void 0}var objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function hashHas(t){var e=this.__data__;return nativeCreate?e[t]!==void 0:hasOwnProperty$8.call(e,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=nativeCreate&&e===void 0?HASH_UNDEFINED$1:e,this}function Hash(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function getMapData(t,e){var r=t.__data__;return isKeyable(e)?r[typeof e=="string"?"string":"hash"]:r.map}function mapCacheDelete(t){var e=getMapData(this,t).delete(t);return this.size-=e?1:0,e}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,e){var r=getMapData(this,t),a=r.size;return r.set(t,e),this.size+=r.size==a?0:1,this}function MapCache(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;function stackSet(t,e){var r=this.__data__;if(r instanceof ListCache){var a=r.__data__;if(!Map$1||a.length<LARGE_ARRAY_SIZE-1)return a.push([t,e]),this.size=++r.size,this;r=this.__data__=new MapCache(a)}return r.set(t,e),this.size=r.size,this}function Stack(t){var e=this.__data__=new ListCache(t);this.size=e.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch{}}();function baseAssignValue(t,e,r){e=="__proto__"&&defineProperty?defineProperty(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function assignMergeValue(t,e,r){(r!==void 0&&!eq(t[e],r)||r===void 0&&!(e in t))&&baseAssignValue(t,e,r)}function createBaseFor(t){return function(e,r,a){for(var l=-1,u=Object(e),d=a(e),g=d.length;g--;){var E=d[++l];if(r(u[E],E,u)===!1)break}return e}}var baseFor=createBaseFor(),freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root.Buffer:void 0;Buffer$2&&Buffer$2.allocUnsafe;function cloneBuffer(t,e){return t.slice()}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(t){var e=new t.constructor(t.byteLength);return new Uint8Array$1(e).set(new Uint8Array$1(t)),e}function cloneTypedArray(t,e){var r=cloneArrayBuffer(t.buffer);return new t.constructor(r,t.byteOffset,t.length)}function copyArray(t,e){var r=-1,a=t.length;for(e||(e=Array(a));++r<a;)e[r]=t[r];return e}var objectCreate=Object.create,baseCreate=function(){function t(){}return function(e){if(!isObject$1(e))return{};if(objectCreate)return objectCreate(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function overArg(t,e){return function(r){return t(e(r))}}var getPrototype=overArg(Object.getPrototypeOf,Object),objectProto$9=Object.prototype;function isPrototype(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||objectProto$9;return t===r}function initCloneObject(t){return typeof t.constructor=="function"&&!isPrototype(t)?baseCreate(getPrototype(t)):{}}function isObjectLike(t){return t!=null&&typeof t=="object"}var argsTag$2="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag$2}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty,propertyIsEnumerable$1=objectProto$8.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$7.call(t,"callee")&&!propertyIsEnumerable$1.call(t,"callee")},isArray=Array.isArray,MAX_SAFE_INTEGER$1=9007199254740991;function isLength(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MAX_SAFE_INTEGER$1}function isArrayLike(t){return t!=null&&isLength(t.length)&&!isFunction(t)}function isArrayLikeObject(t){return isObjectLike(t)&&isArrayLike(t)}function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer$1=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$7=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$6=objectProto$7.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(t){if(!isObjectLike(t)||baseGetTag(t)!=objectTag$3)return!1;var e=getPrototype(t);if(e===null)return!0;var r=hasOwnProperty$6.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&funcToString.call(r)==objectCtorString}var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(t){return function(e){return t(e)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var t=freeModule&&freeModule.require&&freeModule.require("util").types;return t||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function safeGet(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function assignValue(t,e,r){var a=t[e];(!(hasOwnProperty$5.call(t,e)&&eq(a,r))||r===void 0&&!(e in t))&&baseAssignValue(t,e,r)}function copyObject(t,e,r,a){var l=!r;r||(r={});for(var u=-1,d=e.length;++u<d;){var g=e[u],E=void 0;E===void 0&&(E=t[g]),l?baseAssignValue(r,g,E):assignValue(r,g,E)}return r}function baseTimes(t,e){for(var r=-1,a=Array(t);++r<t;)a[r]=e(r);return a}var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,e){var r=typeof t;return e=e??MAX_SAFE_INTEGER,!!e&&(r=="number"||r!="symbol"&&reIsUint.test(t))&&t>-1&&t%1==0&&t<e}var objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function arrayLikeKeys(t,e){var r=isArray(t),a=!r&&isArguments(t),l=!r&&!a&&isBuffer(t),u=!r&&!a&&!l&&isTypedArray(t),d=r||a||l||u,g=d?baseTimes(t.length,String):[],E=g.length;for(var P in t)(e||hasOwnProperty$4.call(t,P))&&!(d&&(P=="length"||l&&(P=="offset"||P=="parent")||u&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||isIndex(P,E)))&&g.push(P);return g}function nativeKeysIn(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function baseKeysIn(t){if(!isObject$1(t))return nativeKeysIn(t);var e=isPrototype(t),r=[];for(var a in t)a=="constructor"&&(e||!hasOwnProperty$3.call(t,a))||r.push(a);return r}function keysIn(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}function toPlainObject(t){return copyObject(t,keysIn(t))}function baseMergeDeep(t,e,r,a,l,u,d){var g=safeGet(t,r),E=safeGet(e,r),P=d.get(E);if(P){assignMergeValue(t,r,P);return}var Z=u?u(g,E,r+"",t,e,d):void 0,me=Z===void 0;if(me){var _e=isArray(E),He=!_e&&isBuffer(E),Xe=!_e&&!He&&isTypedArray(E);Z=E,_e||He||Xe?isArray(g)?Z=g:isArrayLikeObject(g)?Z=copyArray(g):He?(me=!1,Z=cloneBuffer(E)):Xe?(me=!1,Z=cloneTypedArray(E)):Z=[]:isPlainObject(E)||isArguments(E)?(Z=g,isArguments(g)?Z=toPlainObject(g):(!isObject$1(g)||isFunction(g))&&(Z=initCloneObject(E))):me=!1}me&&(d.set(E,Z),l(Z,E,a,u,d),d.delete(E)),assignMergeValue(t,r,Z)}function baseMerge(t,e,r,a,l){t!==e&&baseFor(e,function(u,d){if(l||(l=new Stack),isObject$1(u))baseMergeDeep(t,e,d,r,baseMerge,a,l);else{var g=a?a(safeGet(t,d),u,d+"",t,e,l):void 0;g===void 0&&(g=u),assignMergeValue(t,d,g)}},keysIn)}function identity(t){return t}function apply(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var nativeMax$1=Math.max;function overRest(t,e,r){return e=nativeMax$1(e===void 0?t.length-1:e,0),function(){for(var a=arguments,l=-1,u=nativeMax$1(a.length-e,0),d=Array(u);++l<u;)d[l]=a[e+l];l=-1;for(var g=Array(e+1);++l<e;)g[l]=a[l];return g[e]=r(d),apply(t,this,g)}}function constant(t){return function(){return t}}var baseSetToString=defineProperty?function(t,e){return defineProperty(t,"toString",{configurable:!0,enumerable:!1,value:constant(e),writable:!0})}:identity,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(t){var e=0,r=0;return function(){var a=nativeNow(),l=HOT_SPAN-(a-r);if(r=a,l>0){if(++e>=HOT_COUNT)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var setToString=shortOut(baseSetToString);function baseRest(t,e){return setToString(overRest(t,e,identity),t+"")}function isIterateeCall(t,e,r){if(!isObject$1(r))return!1;var a=typeof e;return(a=="number"?isArrayLike(r)&&isIndex(e,r.length):a=="string"&&e in r)?eq(r[e],t):!1}function createAssigner(t){return baseRest(function(e,r){var a=-1,l=r.length,u=l>1?r[l-1]:void 0,d=l>2?r[2]:void 0;for(u=t.length>3&&typeof u=="function"?(l--,u):void 0,d&&isIterateeCall(r[0],r[1],d)&&(u=l<3?void 0:u,l=1),e=Object(e);++a<l;){var g=r[a];g&&t(e,g,a,u)}return e})}var merge=createAssigner(function(t,e,r){baseMerge(t,e,r)}),Raised=function t(e){var r=e.zDepth,a=e.radius,l=e.background,u=e.children,d=e.styles,g=d===void 0?{}:d,E=reactCSS(merge({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:a,background:l}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},g),{"zDepth-1":r===1});return React.createElement("div",{style:E.wrap},React.createElement("div",{style:E.bg}),React.createElement("div",{style:E.content},u))};Raised.propTypes={background:PropTypes.string,zDepth:PropTypes.oneOf([0,1,2,3,4,5]),radius:PropTypes.number,styles:PropTypes.object};Raised.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var now$1=function(){return root.Date.now()},reWhitespace=/\s/;function trimmedEndIndex(t){for(var e=t.length;e--&&reWhitespace.test(t.charAt(e)););return e}var reTrimStart=/^\s+/;function baseTrim(t){return t&&t.slice(0,trimmedEndIndex(t)+1).replace(reTrimStart,"")}var symbolTag$1="[object Symbol]";function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&baseGetTag(t)==symbolTag$1}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if(typeof t=="number")return t;if(isSymbol(t))return NAN;if(isObject$1(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=isObject$1(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=baseTrim(t);var r=reIsBinary.test(t);return r||reIsOctal.test(t)?freeParseInt(t.slice(2),r?2:8):reIsBadHex.test(t)?NAN:+t}var FUNC_ERROR_TEXT$2="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(t,e,r){var a,l,u,d,g,E,P=0,Z=!1,me=!1,_e=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT$2);e=toNumber(e)||0,isObject$1(r)&&(Z=!!r.leading,me="maxWait"in r,u=me?nativeMax(toNumber(r.maxWait)||0,e):u,_e="trailing"in r?!!r.trailing:_e);function He(_h){var cf=a,df=l;return a=l=void 0,P=_h,d=t.apply(df,cf),d}function Xe(_h){return P=_h,g=setTimeout(sr,e),Z?He(_h):d}function wt(_h){var cf=_h-E,df=_h-P,uf=e-cf;return me?nativeMin(uf,u-df):uf}function Do(_h){var cf=_h-E,df=_h-P;return E===void 0||cf>=e||cf<0||me&&df>=u}function sr(){var _h=now$1();if(Do(_h))return Ko(_h);g=setTimeout(sr,wt(_h))}function Ko(_h){return g=void 0,_e&&a?He(_h):(a=l=void 0,d)}function Bs(){g!==void 0&&clearTimeout(g),P=0,a=E=l=g=void 0}function th(){return g===void 0?d:Ko(now$1())}function pf(){var _h=now$1(),cf=Do(_h);if(a=arguments,l=this,E=_h,cf){if(g===void 0)return Xe(E);if(me)return clearTimeout(g),g=setTimeout(sr,e),He(E)}return g===void 0&&(g=setTimeout(sr,e)),d}return pf.cancel=Bs,pf.flush=th,pf}var FUNC_ERROR_TEXT$1="Expected a function";function throttle(t,e,r){var a=!0,l=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT$1);return isObject$1(r)&&(a="leading"in r?!!r.leading:a,l="trailing"in r?!!r.trailing:l),debounce(t,e,{leading:a,maxWait:e,trailing:l})}var calculateChange=function t(e,r,a){var l=a.getBoundingClientRect(),u=l.width,d=l.height,g=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,E=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,P=g-(a.getBoundingClientRect().left+window.pageXOffset),Z=E-(a.getBoundingClientRect().top+window.pageYOffset);P<0?P=0:P>u&&(P=u),Z<0?Z=0:Z>d&&(Z=d);var me=P/u,_e=1-Z/d;return{h:r.h,s:me,v:_e,a:r.a,source:"hsv"}},_createClass$4=function(){function t(e,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();function _classCallCheck$4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$4(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Saturation=function(t){_inherits$4(e,t);function e(r){_classCallCheck$4(this,e);var a=_possibleConstructorReturn$4(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return a.handleChange=function(l){typeof a.props.onChange=="function"&&a.throttle(a.props.onChange,calculateChange(l,a.props.hsl,a.container),l)},a.handleMouseDown=function(l){a.handleChange(l);var u=a.getContainerRenderWindow();u.addEventListener("mousemove",a.handleChange),u.addEventListener("mouseup",a.handleMouseUp)},a.handleMouseUp=function(){a.unbindEventListeners()},a.throttle=throttle(function(l,u,d){l(u,d)},50),a}return _createClass$4(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var a=this.container,l=window;!l.document.contains(a)&&l.parent!==l;)l=l.parent;return l}},{key:"unbindEventListeners",value:function(){var a=this.getContainerRenderWindow();a.removeEventListener("mousemove",this.handleChange),a.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var a=this,l=this.props.style||{},u=l.color,d=l.white,g=l.black,E=l.pointer,P=l.circle,Z=reactCSS({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:u,white:d,black:g,pointer:E,circle:P}},{custom:!!this.props.style});return React.createElement("div",{style:Z.color,ref:function(_e){return a.container=_e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},React.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),React.createElement("div",{style:Z.white,className:"saturation-white"},React.createElement("div",{style:Z.black,className:"saturation-black"}),React.createElement("div",{style:Z.pointer},this.props.pointer?React.createElement(this.props.pointer,this.props):React.createElement("div",{style:Z.circle}))))}}]),e}(reactExports.PureComponent||reactExports.Component);function arrayEach(t,e){for(var r=-1,a=t==null?0:t.length;++r<a&&e(t[r],r,t)!==!1;);return t}var nativeKeys=overArg(Object.keys,Object),objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys(t);var e=[];for(var r in Object(t))hasOwnProperty$2.call(t,r)&&r!="constructor"&&e.push(r);return e}function keys(t){return isArrayLike(t)?arrayLikeKeys(t):baseKeys(t)}function baseForOwn(t,e){return t&&baseFor(t,e,keys)}function createBaseEach(t,e){return function(r,a){if(r==null)return r;if(!isArrayLike(r))return t(r,a);for(var l=r.length,u=-1,d=Object(r);++u<l&&a(d[u],u,d)!==!1;);return r}}var baseEach=createBaseEach(baseForOwn);function castFunction(t){return typeof t=="function"?t:identity}function forEach(t,e){var r=isArray(t)?arrayEach:baseEach;return r(t,castFunction(e))}function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}var trimLeft=/^\s+/,trimRight=/\s+$/;function tinycolor(t,e){if(t=t||"",e=e||{},t instanceof tinycolor)return t;if(!(this instanceof tinycolor))return new tinycolor(t,e);var r=inputToRGB(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}tinycolor.prototype={isDark:function t(){return this.getBrightness()<128},isLight:function t(){return!this.isDark()},isValid:function t(){return this._ok},getOriginalInput:function t(){return this._originalInput},getFormat:function t(){return this._format},getAlpha:function t(){return this._a},getBrightness:function t(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function t(){var e=this.toRgb(),r,a,l,u,d,g;return r=e.r/255,a=e.g/255,l=e.b/255,r<=.03928?u=r/12.92:u=Math.pow((r+.055)/1.055,2.4),a<=.03928?d=a/12.92:d=Math.pow((a+.055)/1.055,2.4),l<=.03928?g=l/12.92:g=Math.pow((l+.055)/1.055,2.4),.2126*u+.7152*d+.0722*g},setAlpha:function t(e){return this._a=boundAlpha(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function t(){var e=rgbToHsv(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function t(){var e=rgbToHsv(this._r,this._g,this._b),r=Math.round(e.h*360),a=Math.round(e.s*100),l=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+a+"%, "+l+"%)":"hsva("+r+", "+a+"%, "+l+"%, "+this._roundA+")"},toHsl:function t(){var e=rgbToHsl(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function t(){var e=rgbToHsl(this._r,this._g,this._b),r=Math.round(e.h*360),a=Math.round(e.s*100),l=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+a+"%, "+l+"%)":"hsla("+r+", "+a+"%, "+l+"%, "+this._roundA+")"},toHex:function t(e){return rgbToHex(this._r,this._g,this._b,e)},toHexString:function t(e){return"#"+this.toHex(e)},toHex8:function t(e){return rgbaToHex(this._r,this._g,this._b,this._a,e)},toHex8String:function t(e){return"#"+this.toHex8(e)},toRgb:function t(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function t(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function t(){return{r:Math.round(bound01(this._r,255)*100)+"%",g:Math.round(bound01(this._g,255)*100)+"%",b:Math.round(bound01(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function t(){return this._a==1?"rgb("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%)":"rgba("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%, "+this._roundA+")"},toName:function t(){return this._a===0?"transparent":this._a<1?!1:hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1},toFilter:function t(e){var r="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),a=r,l=this._gradientType?"GradientType = 1, ":"";if(e){var u=tinycolor(e);a="#"+rgbaToArgbHex(u._r,u._g,u._b,u._a)}return"progid:DXImageTransform.Microsoft.gradient("+l+"startColorstr="+r+",endColorstr="+a+")"},toString:function t(e){var r=!!e;e=e||this._format;var a=!1,l=this._a<1&&this._a>=0,u=!r&&l&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return u?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(a=this.toRgbString()),e==="prgb"&&(a=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(a=this.toHexString()),e==="hex3"&&(a=this.toHexString(!0)),e==="hex4"&&(a=this.toHex8String(!0)),e==="hex8"&&(a=this.toHex8String()),e==="name"&&(a=this.toName()),e==="hsl"&&(a=this.toHslString()),e==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},clone:function t(){return tinycolor(this.toString())},_applyModification:function t(e,r){var a=e.apply(null,[this].concat([].slice.call(r)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function t(){return this._applyModification(_lighten,arguments)},brighten:function t(){return this._applyModification(_brighten,arguments)},darken:function t(){return this._applyModification(_darken,arguments)},desaturate:function t(){return this._applyModification(_desaturate,arguments)},saturate:function t(){return this._applyModification(_saturate,arguments)},greyscale:function t(){return this._applyModification(_greyscale,arguments)},spin:function t(){return this._applyModification(_spin,arguments)},_applyCombination:function t(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function t(){return this._applyCombination(_analogous,arguments)},complement:function t(){return this._applyCombination(_complement,arguments)},monochromatic:function t(){return this._applyCombination(_monochromatic,arguments)},splitcomplement:function t(){return this._applyCombination(_splitcomplement,arguments)},triad:function t(){return this._applyCombination(polyad,[3])},tetrad:function t(){return this._applyCombination(polyad,[4])}};tinycolor.fromRatio=function(t,e){if(_typeof(t)=="object"){var r={};for(var a in t)t.hasOwnProperty(a)&&(a==="a"?r[a]=t[a]:r[a]=convertToPercentage(t[a]));t=r}return tinycolor(t,e)};function inputToRGB(t){var e={r:0,g:0,b:0},r=1,a=null,l=null,u=null,d=!1,g=!1;return typeof t=="string"&&(t=stringInputToObject(t)),_typeof(t)=="object"&&(isValidCSSUnit(t.r)&&isValidCSSUnit(t.g)&&isValidCSSUnit(t.b)?(e=rgbToRgb(t.r,t.g,t.b),d=!0,g=String(t.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.v)?(a=convertToPercentage(t.s),l=convertToPercentage(t.v),e=hsvToRgb(t.h,a,l),d=!0,g="hsv"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.l)&&(a=convertToPercentage(t.s),u=convertToPercentage(t.l),e=hslToRgb(t.h,a,u),d=!0,g="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=boundAlpha(r),{ok:d,format:t.format||g,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function rgbToRgb(t,e,r){return{r:bound01(t,255)*255,g:bound01(e,255)*255,b:bound01(r,255)*255}}function rgbToHsl(t,e,r){t=bound01(t,255),e=bound01(e,255),r=bound01(r,255);var a=Math.max(t,e,r),l=Math.min(t,e,r),u,d,g=(a+l)/2;if(a==l)u=d=0;else{var E=a-l;switch(d=g>.5?E/(2-a-l):E/(a+l),a){case t:u=(e-r)/E+(e<r?6:0);break;case e:u=(r-t)/E+2;break;case r:u=(t-e)/E+4;break}u/=6}return{h:u,s:d,l:g}}function hslToRgb(t,e,r){var a,l,u;t=bound01(t,360),e=bound01(e,100),r=bound01(r,100);function d(P,Z,me){return me<0&&(me+=1),me>1&&(me-=1),me<1/6?P+(Z-P)*6*me:me<1/2?Z:me<2/3?P+(Z-P)*(2/3-me)*6:P}if(e===0)a=l=u=r;else{var g=r<.5?r*(1+e):r+e-r*e,E=2*r-g;a=d(E,g,t+1/3),l=d(E,g,t),u=d(E,g,t-1/3)}return{r:a*255,g:l*255,b:u*255}}function rgbToHsv(t,e,r){t=bound01(t,255),e=bound01(e,255),r=bound01(r,255);var a=Math.max(t,e,r),l=Math.min(t,e,r),u,d,g=a,E=a-l;if(d=a===0?0:E/a,a==l)u=0;else{switch(a){case t:u=(e-r)/E+(e<r?6:0);break;case e:u=(r-t)/E+2;break;case r:u=(t-e)/E+4;break}u/=6}return{h:u,s:d,v:g}}function hsvToRgb(t,e,r){t=bound01(t,360)*6,e=bound01(e,100),r=bound01(r,100);var a=Math.floor(t),l=t-a,u=r*(1-e),d=r*(1-l*e),g=r*(1-(1-l)*e),E=a%6,P=[r,d,u,u,g,r][E],Z=[g,r,r,d,u,u][E],me=[u,u,g,r,r,d][E];return{r:P*255,g:Z*255,b:me*255}}function rgbToHex(t,e,r,a){var l=[pad2(Math.round(t).toString(16)),pad2(Math.round(e).toString(16)),pad2(Math.round(r).toString(16))];return a&&l[0].charAt(0)==l[0].charAt(1)&&l[1].charAt(0)==l[1].charAt(1)&&l[2].charAt(0)==l[2].charAt(1)?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0):l.join("")}function rgbaToHex(t,e,r,a,l){var u=[pad2(Math.round(t).toString(16)),pad2(Math.round(e).toString(16)),pad2(Math.round(r).toString(16)),pad2(convertDecimalToHex(a))];return l&&u[0].charAt(0)==u[0].charAt(1)&&u[1].charAt(0)==u[1].charAt(1)&&u[2].charAt(0)==u[2].charAt(1)&&u[3].charAt(0)==u[3].charAt(1)?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0)+u[3].charAt(0):u.join("")}function rgbaToArgbHex(t,e,r,a){var l=[pad2(convertDecimalToHex(a)),pad2(Math.round(t).toString(16)),pad2(Math.round(e).toString(16)),pad2(Math.round(r).toString(16))];return l.join("")}tinycolor.equals=function(t,e){return!t||!e?!1:tinycolor(t).toRgbString()==tinycolor(e).toRgbString()};tinycolor.random=function(){return tinycolor.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function _desaturate(t,e){e=e===0?0:e||10;var r=tinycolor(t).toHsl();return r.s-=e/100,r.s=clamp01(r.s),tinycolor(r)}function _saturate(t,e){e=e===0?0:e||10;var r=tinycolor(t).toHsl();return r.s+=e/100,r.s=clamp01(r.s),tinycolor(r)}function _greyscale(t){return tinycolor(t).desaturate(100)}function _lighten(t,e){e=e===0?0:e||10;var r=tinycolor(t).toHsl();return r.l+=e/100,r.l=clamp01(r.l),tinycolor(r)}function _brighten(t,e){e=e===0?0:e||10;var r=tinycolor(t).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),tinycolor(r)}function _darken(t,e){e=e===0?0:e||10;var r=tinycolor(t).toHsl();return r.l-=e/100,r.l=clamp01(r.l),tinycolor(r)}function _spin(t,e){var r=tinycolor(t).toHsl(),a=(r.h+e)%360;return r.h=a<0?360+a:a,tinycolor(r)}function _complement(t){var e=tinycolor(t).toHsl();return e.h=(e.h+180)%360,tinycolor(e)}function polyad(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=tinycolor(t).toHsl(),a=[tinycolor(t)],l=360/e,u=1;u<e;u++)a.push(tinycolor({h:(r.h+u*l)%360,s:r.s,l:r.l}));return a}function _splitcomplement(t){var e=tinycolor(t).toHsl(),r=e.h;return[tinycolor(t),tinycolor({h:(r+72)%360,s:e.s,l:e.l}),tinycolor({h:(r+216)%360,s:e.s,l:e.l})]}function _analogous(t,e,r){e=e||6,r=r||30;var a=tinycolor(t).toHsl(),l=360/r,u=[tinycolor(t)];for(a.h=(a.h-(l*e>>1)+720)%360;--e;)a.h=(a.h+l)%360,u.push(tinycolor(a));return u}function _monochromatic(t,e){e=e||6;for(var r=tinycolor(t).toHsv(),a=r.h,l=r.s,u=r.v,d=[],g=1/e;e--;)d.push(tinycolor({h:a,s:l,v:u})),u=(u+g)%1;return d}tinycolor.mix=function(t,e,r){r=r===0?0:r||50;var a=tinycolor(t).toRgb(),l=tinycolor(e).toRgb(),u=r/100,d={r:(l.r-a.r)*u+a.r,g:(l.g-a.g)*u+a.g,b:(l.b-a.b)*u+a.b,a:(l.a-a.a)*u+a.a};return tinycolor(d)};tinycolor.readability=function(t,e){var r=tinycolor(t),a=tinycolor(e);return(Math.max(r.getLuminance(),a.getLuminance())+.05)/(Math.min(r.getLuminance(),a.getLuminance())+.05)};tinycolor.isReadable=function(t,e,r){var a=tinycolor.readability(t,e),l,u;switch(u=!1,l=validateWCAG2Parms(r),l.level+l.size){case"AAsmall":case"AAAlarge":u=a>=4.5;break;case"AAlarge":u=a>=3;break;case"AAAsmall":u=a>=7;break}return u};tinycolor.mostReadable=function(t,e,r){var a=null,l=0,u,d,g,E;r=r||{},d=r.includeFallbackColors,g=r.level,E=r.size;for(var P=0;P<e.length;P++)u=tinycolor.readability(t,e[P]),u>l&&(l=u,a=tinycolor(e[P]));return tinycolor.isReadable(t,a,{level:g,size:E})||!d?a:(r.includeFallbackColors=!1,tinycolor.mostReadable(t,["#fff","#000"],r))};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names);function flip(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function boundAlpha(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function bound01(t,e){isOnePointZero(t)&&(t="100%");var r=isPercentage(t);return t=Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function clamp01(t){return Math.min(1,Math.max(0,t))}function parseIntFromHex(t){return parseInt(t,16)}function isOnePointZero(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function isPercentage(t){return typeof t=="string"&&t.indexOf("%")!=-1}function pad2(t){return t.length==1?"0"+t:""+t}function convertToPercentage(t){return t<=1&&(t=t*100+"%"),t}function convertDecimalToHex(t){return Math.round(parseFloat(t)*255).toString(16)}function convertHexToDecimal(t){return parseIntFromHex(t)/255}var matchers=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+t+")",a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",l="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+l),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+l),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+l),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function isValidCSSUnit(t){return!!matchers.CSS_UNIT.exec(t)}function stringInputToObject(t){t=t.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var e=!1;if(names[t])t=names[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=matchers.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=matchers.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=matchers.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=matchers.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=matchers.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=matchers.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=matchers.hex8.exec(t))?{r:parseIntFromHex(r[1]),g:parseIntFromHex(r[2]),b:parseIntFromHex(r[3]),a:convertHexToDecimal(r[4]),format:e?"name":"hex8"}:(r=matchers.hex6.exec(t))?{r:parseIntFromHex(r[1]),g:parseIntFromHex(r[2]),b:parseIntFromHex(r[3]),format:e?"name":"hex"}:(r=matchers.hex4.exec(t))?{r:parseIntFromHex(r[1]+""+r[1]),g:parseIntFromHex(r[2]+""+r[2]),b:parseIntFromHex(r[3]+""+r[3]),a:convertHexToDecimal(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=matchers.hex3.exec(t))?{r:parseIntFromHex(r[1]+""+r[1]),g:parseIntFromHex(r[2]+""+r[2]),b:parseIntFromHex(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function validateWCAG2Parms(t){var e,r;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}var simpleCheckForValidColor=function t(e){var r=["r","g","b","a","h","s","l","v"],a=0,l=0;return forEach(r,function(u){if(e[u]&&(a+=1,isNaN(e[u])||(l+=1),u==="s"||u==="l")){var d=/^\d+%$/;d.test(e[u])&&(l+=1)}}),a===l?e:!1},toState=function t(e,r){var a=e.hex?tinycolor(e.hex):tinycolor(e),l=a.toHsl(),u=a.toHsv(),d=a.toRgb(),g=a.toHex();l.s===0&&(l.h=r||0,u.h=r||0);var E=g==="000000"&&d.a===0;return{hsl:l,hex:E?"transparent":"#"+g,rgb:d,hsv:u,oldHue:e.h||r||l.h,source:e.source}},isValidHex=function t(e){if(e==="transparent")return!0;var r=String(e).charAt(0)==="#"?1:0;return e.length!==4+r&&e.length<7+r&&tinycolor(e).isValid()},getContrastingColor=function t(e){if(!e)return"#fff";var r=toState(e);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var a=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return a>=128?"#000":"#fff"},isvalidColorString=function t(e,r){var a=e.replace("","");return tinycolor(r+" ("+a+")")._ok},_extends$6=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},_createClass$3=function(){function t(e,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();function _classCallCheck$3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$3(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ColorWrap=function t(e){var r=function(a){_inherits$3(l,a);function l(u){_classCallCheck$3(this,l);var d=_possibleConstructorReturn$3(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return d.handleChange=function(g,E){var P=simpleCheckForValidColor(g);if(P){var Z=toState(g,g.h||d.state.oldHue);d.setState(Z),d.props.onChangeComplete&&d.debounce(d.props.onChangeComplete,Z,E),d.props.onChange&&d.props.onChange(Z,E)}},d.handleSwatchHover=function(g,E){var P=simpleCheckForValidColor(g);if(P){var Z=toState(g,g.h||d.state.oldHue);d.props.onSwatchHover&&d.props.onSwatchHover(Z,E)}},d.state=_extends$6({},toState(u.color,0)),d.debounce=debounce(function(g,E,P){g(E,P)},100),d}return _createClass$3(l,[{key:"render",value:function(){var d={};return this.props.onSwatchHover&&(d.onSwatchHover=this.handleSwatchHover),React.createElement(e,_extends$6({},this.props,this.state,{onChange:this.handleChange},d))}}],[{key:"getDerivedStateFromProps",value:function(d,g){return _extends$6({},toState(d.color,g.oldHue))}}]),l}(reactExports.PureComponent||reactExports.Component);return r.propTypes=_extends$6({},e.propTypes),r.defaultProps=_extends$6({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},_extends$5=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},_createClass$2=function(){function t(e,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();function _classCallCheck$2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$2(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var handleFocus=function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(a){_inherits$2(l,a);function l(){var u,d,g,E;_classCallCheck$2(this,l);for(var P=arguments.length,Z=Array(P),me=0;me<P;me++)Z[me]=arguments[me];return E=(d=(g=_possibleConstructorReturn$2(this,(u=l.__proto__||Object.getPrototypeOf(l)).call.apply(u,[this].concat(Z))),g),g.state={focus:!1},g.handleFocus=function(){return g.setState({focus:!0})},g.handleBlur=function(){return g.setState({focus:!1})},d),_possibleConstructorReturn$2(g,E)}return _createClass$2(l,[{key:"render",value:function(){return React.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},React.createElement(e,_extends$5({},this.props,this.state)))}}]),l}(React.Component)},_extends$4=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ENTER=13,Swatch=function t(e){var r=e.color,a=e.style,l=e.onClick,u=l===void 0?function(){}:l,d=e.onHover,g=e.title,E=g===void 0?r:g,P=e.children,Z=e.focus,me=e.focusStyle,_e=me===void 0?{}:me,He=r==="transparent",Xe=reactCSS({default:{swatch:_extends$4({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},a,Z?_e:{})}}),wt=function(th){return u(r,th)},Do=function(th){return th.keyCode===ENTER&&u(r,th)},sr=function(th){return d(r,th)},Ko={};return d&&(Ko.onMouseOver=sr),React.createElement("div",_extends$4({style:Xe.swatch,onClick:wt,title:E,tabIndex:0,onKeyDown:Do},Ko),P,He&&React.createElement(Checkboard,{borderRadius:Xe.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Swatch$1=handleFocus(Swatch);var AlphaPointer=function t(e){var r=e.direction,a=reactCSS({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return React.createElement("div",{style:a.picker})},_extends$3=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},AlphaPicker=function t(e){var r=e.rgb,a=e.hsl,l=e.width,u=e.height,d=e.onChange,g=e.direction,E=e.style,P=e.renderers,Z=e.pointer,me=e.className,_e=me===void 0?"":me,He=reactCSS({default:{picker:{position:"relative",width:l,height:u},alpha:{radius:"2px",style:E}}});return React.createElement("div",{style:He.picker,className:"alpha-picker "+_e},React.createElement(Alpha,_extends$3({},He.alpha,{rgb:r,hsl:a,pointer:Z,renderers:P,onChange:d,direction:g})))};AlphaPicker.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:AlphaPointer};ColorWrap(AlphaPicker);function arrayMap(t,e){for(var r=-1,a=t==null?0:t.length,l=Array(a);++r<a;)l[r]=e(t[r],r,t);return l}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(t){return this.__data__.set(t,HASH_UNDEFINED),this}function setCacheHas(t){return this.__data__.has(t)}function SetCache(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new MapCache;++e<r;)this.add(t[e])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(t,e){for(var r=-1,a=t==null?0:t.length;++r<a;)if(e(t[r],r,t))return!0;return!1}function cacheHas(t,e){return t.has(e)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(t,e,r,a,l,u){var d=r&COMPARE_PARTIAL_FLAG$5,g=t.length,E=e.length;if(g!=E&&!(d&&E>g))return!1;var P=u.get(t),Z=u.get(e);if(P&&Z)return P==e&&Z==t;var me=-1,_e=!0,He=r&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(u.set(t,e),u.set(e,t);++me<g;){var Xe=t[me],wt=e[me];if(a)var Do=d?a(wt,Xe,me,e,t,u):a(Xe,wt,me,t,e,u);if(Do!==void 0){if(Do)continue;_e=!1;break}if(He){if(!arraySome(e,function(sr,Ko){if(!cacheHas(He,Ko)&&(Xe===sr||l(Xe,sr,r,a,u)))return He.push(Ko)})){_e=!1;break}}else if(!(Xe===wt||l(Xe,wt,r,a,u))){_e=!1;break}}return u.delete(t),u.delete(e),_e}function mapToArray(t){var e=-1,r=Array(t.size);return t.forEach(function(a,l){r[++e]=[l,a]}),r}function setToArray(t){var e=-1,r=Array(t.size);return t.forEach(function(a){r[++e]=a}),r}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function equalByTag(t,e,r,a,l,u,d){switch(r){case dataViewTag$1:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case arrayBufferTag:return!(t.byteLength!=e.byteLength||!u(new Uint8Array$1(t),new Uint8Array$1(e)));case boolTag:case dateTag:case numberTag:return eq(+t,+e);case errorTag:return t.name==e.name&&t.message==e.message;case regexpTag:case stringTag:return t==e+"";case mapTag$1:var g=mapToArray;case setTag$1:var E=a&COMPARE_PARTIAL_FLAG$4;if(g||(g=setToArray),t.size!=e.size&&!E)return!1;var P=d.get(t);if(P)return P==e;a|=COMPARE_UNORDERED_FLAG$2,d.set(t,e);var Z=equalArrays(g(t),g(e),a,l,u,d);return d.delete(t),Z;case symbolTag:if(symbolValueOf)return symbolValueOf.call(t)==symbolValueOf.call(e)}return!1}function arrayPush(t,e){for(var r=-1,a=e.length,l=t.length;++r<a;)t[l+r]=e[r];return t}function baseGetAllKeys(t,e,r){var a=e(t);return isArray(t)?a:arrayPush(a,r(t))}function arrayFilter(t,e){for(var r=-1,a=t==null?0:t.length,l=0,u=[];++r<a;){var d=t[r];e(d,r,t)&&(u[l++]=d)}return u}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(t){return t==null?[]:(t=Object(t),arrayFilter(nativeGetSymbols(t),function(e){return propertyIsEnumerable.call(t,e)}))}:stubArray;function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols)}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(t,e,r,a,l,u){var d=r&COMPARE_PARTIAL_FLAG$3,g=getAllKeys(t),E=g.length,P=getAllKeys(e),Z=P.length;if(E!=Z&&!d)return!1;for(var me=E;me--;){var _e=g[me];if(!(d?_e in e:hasOwnProperty$1.call(e,_e)))return!1}var He=u.get(t),Xe=u.get(e);if(He&&Xe)return He==e&&Xe==t;var wt=!0;u.set(t,e),u.set(e,t);for(var Do=d;++me<E;){_e=g[me];var sr=t[_e],Ko=e[_e];if(a)var Bs=d?a(Ko,sr,_e,e,t,u):a(sr,Ko,_e,t,e,u);if(!(Bs===void 0?sr===Ko||l(sr,Ko,r,a,u):Bs)){wt=!1;break}Do||(Do=_e=="constructor")}if(wt&&!Do){var th=t.constructor,pf=e.constructor;th!=pf&&"constructor"in t&&"constructor"in e&&!(typeof th=="function"&&th instanceof th&&typeof pf=="function"&&pf instanceof pf)&&(wt=!1)}return u.delete(t),u.delete(e),wt}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),WeakMap$1=getNative(root,"WeakMap"),mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag(new Map$1)!=mapTag||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag)&&(getTag=function(t){var e=baseGetTag(t),r=e==objectTag$1?t.constructor:void 0,a=r?toSource(r):"";if(a)switch(a){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return e});var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(t,e,r,a,l,u){var d=isArray(t),g=isArray(e),E=d?arrayTag:getTag(t),P=g?arrayTag:getTag(e);E=E==argsTag?objectTag:E,P=P==argsTag?objectTag:P;var Z=E==objectTag,me=P==objectTag,_e=E==P;if(_e&&isBuffer(t)){if(!isBuffer(e))return!1;d=!0,Z=!1}if(_e&&!Z)return u||(u=new Stack),d||isTypedArray(t)?equalArrays(t,e,r,a,l,u):equalByTag(t,e,E,r,a,l,u);if(!(r&COMPARE_PARTIAL_FLAG$2)){var He=Z&&hasOwnProperty.call(t,"__wrapped__"),Xe=me&&hasOwnProperty.call(e,"__wrapped__");if(He||Xe){var wt=He?t.value():t,Do=Xe?e.value():e;return u||(u=new Stack),l(wt,Do,r,a,u)}}return _e?(u||(u=new Stack),equalObjects(t,e,r,a,l,u)):!1}function baseIsEqual(t,e,r,a,l){return t===e?!0:t==null||e==null||!isObjectLike(t)&&!isObjectLike(e)?t!==t&&e!==e:baseIsEqualDeep(t,e,r,a,baseIsEqual,l)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(t,e,r,a){var l=r.length,u=l;if(t==null)return!u;for(t=Object(t);l--;){var d=r[l];if(d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++l<u;){d=r[l];var g=d[0],E=t[g],P=d[1];if(d[2]){if(E===void 0&&!(g in t))return!1}else{var Z=new Stack,me;if(!(me===void 0?baseIsEqual(P,E,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,a,Z):me))return!1}}return!0}function isStrictComparable(t){return t===t&&!isObject$1(t)}function getMatchData(t){for(var e=keys(t),r=e.length;r--;){var a=e[r],l=t[a];e[r]=[a,l,isStrictComparable(l)]}return e}function matchesStrictComparable(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function baseMatches(t){var e=getMatchData(t);return e.length==1&&e[0][2]?matchesStrictComparable(e[0][0],e[0][1]):function(r){return r===t||baseIsMatch(r,t,e)}}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(t,e){if(isArray(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||isSymbol(t)?!0:reIsPlainProp.test(t)||!reIsDeepProp.test(t)||e!=null&&t in Object(e)}var FUNC_ERROR_TEXT="Expected a function";function memoize(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var a=arguments,l=e?e.apply(this,a):a[0],u=r.cache;if(u.has(l))return u.get(l);var d=t.apply(this,a);return r.cache=u.set(l,d)||u,d};return r.cache=new(memoize.Cache||MapCache),r}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var e=memoize(t,function(a){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),a}),r=e.cache;return e}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(rePropName,function(r,a,l,u){e.push(l?u.replace(reEscapeChar,"$1"):a||r)}),e}),symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(t){if(typeof t=="string")return t;if(isArray(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function toString(t){return t==null?"":baseToString(t)}function castPath(t,e){return isArray(t)?t:isKey(t,e)?[t]:stringToPath(toString(t))}function toKey(t){if(typeof t=="string"||isSymbol(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function baseGet(t,e){e=castPath(e,t);for(var r=0,a=e.length;t!=null&&r<a;)t=t[toKey(e[r++])];return r&&r==a?t:void 0}function get(t,e,r){var a=t==null?void 0:baseGet(t,e);return a===void 0?r:a}function baseHasIn(t,e){return t!=null&&e in Object(t)}function hasPath(t,e,r){e=castPath(e,t);for(var a=-1,l=e.length,u=!1;++a<l;){var d=toKey(e[a]);if(!(u=t!=null&&r(t,d)))break;t=t[d]}return u||++a!=l?u:(l=t==null?0:t.length,!!l&&isLength(l)&&isIndex(d,l)&&(isArray(t)||isArguments(t)))}function hasIn(t,e){return t!=null&&hasPath(t,e,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(t,e){return isKey(t)&&isStrictComparable(e)?matchesStrictComparable(toKey(t),e):function(r){var a=get(r,t);return a===void 0&&a===e?hasIn(r,t):baseIsEqual(e,a,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(t){return function(e){return e?.[t]}}function basePropertyDeep(t){return function(e){return baseGet(e,t)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return typeof t=="function"?t:t==null?identity:typeof t=="object"?isArray(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}function baseMap(t,e){var r=-1,a=isArrayLike(t)?Array(t.length):[];return baseEach(t,function(l,u,d){a[++r]=e(l,u,d)}),a}function map(t,e){var r=isArray(t)?arrayMap:baseMap;return r(t,baseIteratee(e))}var BlockSwatches=function t(e){var r=e.colors,a=e.onClick,l=e.onSwatchHover,u=reactCSS({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return React.createElement("div",{style:u.swatches},map(r,function(d){return React.createElement(Swatch$1,{key:d,color:d,style:u.swatch,onClick:a,onHover:l,focusStyle:{boxShadow:"0 0 4px "+d}})}),React.createElement("div",{style:u.clear}))},Block=function t(e){var r=e.onChange,a=e.onSwatchHover,l=e.hex,u=e.colors,d=e.width,g=e.triangle,E=e.styles,P=E===void 0?{}:E,Z=e.className,me=Z===void 0?"":Z,_e=l==="transparent",He=function(Do,sr){isValidHex(Do)&&r({hex:Do,source:"hex"},sr)},Xe=reactCSS(merge({default:{card:{width:d,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:l,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:getContrastingColor(l),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+l+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},P),{"hide-triangle":g==="hide"});return React.createElement("div",{style:Xe.card,className:"block-picker "+me},React.createElement("div",{style:Xe.triangle}),React.createElement("div",{style:Xe.head},_e&&React.createElement(Checkboard,{borderRadius:"6px 6px 0 0"}),React.createElement("div",{style:Xe.label},l)),React.createElement("div",{style:Xe.body},React.createElement(BlockSwatches,{colors:u,onClick:He,onSwatchHover:a}),React.createElement(EditableInput,{style:{input:Xe.input},value:l,onChange:He})))};Block.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),colors:PropTypes.arrayOf(PropTypes.string),triangle:PropTypes.oneOf(["top","hide"]),styles:PropTypes.object};Block.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};ColorWrap(Block);var red={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},pink={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},purple={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},deepPurple={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},indigo={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},blue={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},lightBlue={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},cyan={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},teal={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},green={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},lightGreen={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},lime={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},yellow={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},amber={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},orange={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},deepOrange={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},brown={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},blueGrey={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},CircleSwatch=function t(e){var r=e.color,a=e.onClick,l=e.onSwatchHover,u=e.hover,d=e.active,g=e.circleSize,E=e.circleSpacing,P=reactCSS({default:{swatch:{width:g,height:g,marginRight:E,marginBottom:E,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(g/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:u,active:d});return React.createElement("div",{style:P.swatch},React.createElement(Swatch$1,{style:P.Swatch,color:r,onClick:a,onHover:l,focusStyle:{boxShadow:P.Swatch.boxShadow+", 0 0 5px "+r}}))};CircleSwatch.defaultProps={circleSize:28,circleSpacing:14};const CircleSwatch$1=libExports.handleHover(CircleSwatch);var Circle=function t(e){var r=e.width,a=e.onChange,l=e.onSwatchHover,u=e.colors,d=e.hex,g=e.circleSize,E=e.styles,P=E===void 0?{}:E,Z=e.circleSpacing,me=e.className,_e=me===void 0?"":me,He=reactCSS(merge({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-Z,marginBottom:-Z}}},P)),Xe=function(Do,sr){return a({hex:Do,source:"hex"},sr)};return React.createElement("div",{style:He.card,className:"circle-picker "+_e},map(u,function(wt){return React.createElement(CircleSwatch$1,{key:wt,color:wt,onClick:Xe,onSwatchHover:l,active:d===wt.toLowerCase(),circleSize:g,circleSpacing:Z})}))};Circle.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),circleSize:PropTypes.number,circleSpacing:PropTypes.number,styles:PropTypes.object};Circle.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[red[500],pink[500],purple[500],deepPurple[500],indigo[500],blue[500],lightBlue[500],cyan[500],teal[500],green[500],lightGreen[500],lime[500],yellow[500],amber[500],orange[500],deepOrange[500],brown[500],blueGrey[500]],styles:{}};const CirclePicker=ColorWrap(Circle);function isUndefined(t){return t===void 0}var UnfoldMoreHorizontalIcon$1={},hasRequiredUnfoldMoreHorizontalIcon;function requireUnfoldMoreHorizontalIcon(){if(hasRequiredUnfoldMoreHorizontalIcon)return UnfoldMoreHorizontalIcon$1;hasRequiredUnfoldMoreHorizontalIcon=1,Object.defineProperty(UnfoldMoreHorizontalIcon$1,"__esModule",{value:!0});var t=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var E=arguments[g];for(var P in E)Object.prototype.hasOwnProperty.call(E,P)&&(d[P]=E[P])}return d},e=requireReact(),r=a(e);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,g){var E={};for(var P in d)g.indexOf(P)>=0||Object.prototype.hasOwnProperty.call(d,P)&&(E[P]=d[P]);return E}var u=24;return UnfoldMoreHorizontalIcon$1.default=function(d){var g=d.fill,E=g===void 0?"currentColor":g,P=d.width,Z=P===void 0?u:P,me=d.height,_e=me===void 0?u:me,He=d.style,Xe=He===void 0?{}:He,wt=l(d,["fill","width","height","style"]);return r.default.createElement("svg",t({viewBox:"0 0 "+u+" "+u,style:t({fill:E,width:Z,height:_e},Xe)},wt),r.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},UnfoldMoreHorizontalIcon$1}var UnfoldMoreHorizontalIconExports=requireUnfoldMoreHorizontalIcon();const UnfoldMoreHorizontalIcon=getDefaultExportFromCjs(UnfoldMoreHorizontalIconExports);var _createClass$1=function(){function t(e,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();function _classCallCheck$1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$1(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ChromeFields=function(t){_inherits$1(e,t);function e(r){_classCallCheck$1(this,e);var a=_possibleConstructorReturn$1(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.toggleViews=function(){a.state.view==="hex"?a.setState({view:"rgb"}):a.state.view==="rgb"?a.setState({view:"hsl"}):a.state.view==="hsl"&&(a.props.hsl.a===1?a.setState({view:"hex"}):a.setState({view:"rgb"}))},a.handleChange=function(l,u){l.hex?isValidHex(l.hex)&&a.props.onChange({hex:l.hex,source:"hex"},u):l.r||l.g||l.b?a.props.onChange({r:l.r||a.props.rgb.r,g:l.g||a.props.rgb.g,b:l.b||a.props.rgb.b,source:"rgb"},u):l.a?(l.a<0?l.a=0:l.a>1&&(l.a=1),a.props.onChange({h:a.props.hsl.h,s:a.props.hsl.s,l:a.props.hsl.l,a:Math.round(l.a*100)/100,source:"rgb"},u)):(l.h||l.s||l.l)&&(typeof l.s=="string"&&l.s.includes("%")&&(l.s=l.s.replace("%","")),typeof l.l=="string"&&l.l.includes("%")&&(l.l=l.l.replace("%","")),l.s==1?l.s=.01:l.l==1&&(l.l=.01),a.props.onChange({h:l.h||a.props.hsl.h,s:Number(isUndefined(l.s)?a.props.hsl.s:l.s),l:Number(isUndefined(l.l)?a.props.hsl.l:l.l),source:"hsl"},u))},a.showHighlight=function(l){l.currentTarget.style.background="#eee"},a.hideHighlight=function(l){l.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?a.state={view:"rgb"}:a.state={view:r.view},a}return _createClass$1(e,[{key:"render",value:function(){var a=this,l=reactCSS({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),u=void 0;return this.state.view==="hex"?u=React.createElement("div",{style:l.fields,className:"flexbox-fix"},React.createElement("div",{style:l.field},React.createElement(EditableInput,{style:{input:l.input,label:l.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?u=React.createElement("div",{style:l.fields,className:"flexbox-fix"},React.createElement("div",{style:l.field},React.createElement(EditableInput,{style:{input:l.input,label:l.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),React.createElement("div",{style:l.field},React.createElement(EditableInput,{style:{input:l.input,label:l.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),React.createElement("div",{style:l.field},React.createElement(EditableInput,{style:{input:l.input,label:l.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),React.createElement("div",{style:l.alpha},React.createElement(EditableInput,{style:{input:l.input,label:l.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(u=React.createElement("div",{style:l.fields,className:"flexbox-fix"},React.createElement("div",{style:l.field},React.createElement(EditableInput,{style:{input:l.input,label:l.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),React.createElement("div",{style:l.field},React.createElement(EditableInput,{style:{input:l.input,label:l.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),React.createElement("div",{style:l.field},React.createElement(EditableInput,{style:{input:l.input,label:l.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),React.createElement("div",{style:l.alpha},React.createElement(EditableInput,{style:{input:l.input,label:l.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),React.createElement("div",{style:l.wrap,className:"flexbox-fix"},u,React.createElement("div",{style:l.toggle},React.createElement("div",{style:l.icon,onClick:this.toggleViews,ref:function(g){return a.icon=g}},React.createElement(UnfoldMoreHorizontalIcon,{style:l.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(a,l){return a.hsl.a!==1&&l.view==="hex"?{view:"rgb"}:null}}]),e}(React.Component);ChromeFields.defaultProps={view:"hex"};var ChromePointer=function t(){var e=reactCSS({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return React.createElement("div",{style:e.picker})},ChromePointerCircle=function t(){var e=reactCSS({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return React.createElement("div",{style:e.picker})},Chrome=function t(e){var r=e.width,a=e.onChange,l=e.disableAlpha,u=e.rgb,d=e.hsl,g=e.hsv,E=e.hex,P=e.renderers,Z=e.styles,me=Z===void 0?{}:Z,_e=e.className,He=_e===void 0?"":_e,Xe=e.defaultView,wt=reactCSS(merge({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+u.r+", "+u.g+", "+u.b+", "+u.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},me),{disableAlpha:l});return React.createElement("div",{style:wt.picker,className:"chrome-picker "+He},React.createElement("div",{style:wt.saturation},React.createElement(Saturation,{style:wt.Saturation,hsl:d,hsv:g,pointer:ChromePointerCircle,onChange:a})),React.createElement("div",{style:wt.body},React.createElement("div",{style:wt.controls,className:"flexbox-fix"},React.createElement("div",{style:wt.color},React.createElement("div",{style:wt.swatch},React.createElement("div",{style:wt.active}),React.createElement(Checkboard,{renderers:P}))),React.createElement("div",{style:wt.toggles},React.createElement("div",{style:wt.hue},React.createElement(Hue,{style:wt.Hue,hsl:d,pointer:ChromePointer,onChange:a})),React.createElement("div",{style:wt.alpha},React.createElement(Alpha,{style:wt.Alpha,rgb:u,hsl:d,pointer:ChromePointer,renderers:P,onChange:a})))),React.createElement(ChromeFields,{rgb:u,hsl:d,hex:E,view:Xe,onChange:a,disableAlpha:l})))};Chrome.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),disableAlpha:PropTypes.bool,styles:PropTypes.object,defaultView:PropTypes.oneOf(["hex","rgb","hsl"])};Chrome.defaultProps={width:225,disableAlpha:!1,styles:{}};ColorWrap(Chrome);var CompactColor=function t(e){var r=e.color,a=e.onClick,l=a===void 0?function(){}:a,u=e.onSwatchHover,d=e.active,g=reactCSS({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:getContrastingColor(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:d,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return React.createElement(Swatch$1,{style:g.color,color:r,onClick:l,onHover:u,focusStyle:{boxShadow:"0 0 4px "+r}},React.createElement("div",{style:g.dot}))},CompactFields=function t(e){var r=e.hex,a=e.rgb,l=e.onChange,u=reactCSS({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),d=function(E,P){E.r||E.g||E.b?l({r:E.r||a.r,g:E.g||a.g,b:E.b||a.b,source:"rgb"},P):l({hex:E.hex,source:"hex"},P)};return React.createElement("div",{style:u.fields,className:"flexbox-fix"},React.createElement("div",{style:u.active}),React.createElement(EditableInput,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"hex",value:r,onChange:d}),React.createElement(EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:a.r,onChange:d}),React.createElement(EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:a.g,onChange:d}),React.createElement(EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:a.b,onChange:d}))},Compact=function t(e){var r=e.onChange,a=e.onSwatchHover,l=e.colors,u=e.hex,d=e.rgb,g=e.styles,E=g===void 0?{}:g,P=e.className,Z=P===void 0?"":P,me=reactCSS(merge({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},E)),_e=function(Xe,wt){Xe.hex?isValidHex(Xe.hex)&&r({hex:Xe.hex,source:"hex"},wt):r(Xe,wt)};return React.createElement(Raised,{style:me.Compact,styles:E},React.createElement("div",{style:me.compact,className:"compact-picker "+Z},React.createElement("div",null,map(l,function(He){return React.createElement(CompactColor,{key:He,color:He,active:He.toLowerCase()===u,onClick:_e,onSwatchHover:a})}),React.createElement("div",{style:me.clear})),React.createElement(CompactFields,{hex:u,rgb:d,onChange:_e})))};Compact.propTypes={colors:PropTypes.arrayOf(PropTypes.string),styles:PropTypes.object};Compact.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};ColorWrap(Compact);var GithubSwatch=function t(e){var r=e.hover,a=e.color,l=e.onClick,u=e.onSwatchHover,d={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},g=reactCSS({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:d}},{hover:r});return React.createElement("div",{style:g.swatch},React.createElement(Swatch$1,{color:a,onClick:l,onHover:u,focusStyle:d}))};const GithubSwatch$1=libExports.handleHover(GithubSwatch);var Github=function t(e){var r=e.width,a=e.colors,l=e.onChange,u=e.onSwatchHover,d=e.triangle,g=e.styles,E=g===void 0?{}:g,P=e.className,Z=P===void 0?"":P,me=reactCSS(merge({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},E),{"hide-triangle":d==="hide","top-left-triangle":d==="top-left","top-right-triangle":d==="top-right","bottom-left-triangle":d==="bottom-left","bottom-right-triangle":d==="bottom-right"}),_e=function(Xe,wt){return l({hex:Xe,source:"hex"},wt)};return React.createElement("div",{style:me.card,className:"github-picker "+Z},React.createElement("div",{style:me.triangleShadow}),React.createElement("div",{style:me.triangle}),map(a,function(He){return React.createElement(GithubSwatch$1,{color:He,key:He,onClick:_e,onSwatchHover:u})}))};Github.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),colors:PropTypes.arrayOf(PropTypes.string),triangle:PropTypes.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:PropTypes.object};Github.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};ColorWrap(Github);var SliderPointer$1=function t(e){var r=e.direction,a=reactCSS({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return React.createElement("div",{style:a.picker})},_extends$2=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},HuePicker=function t(e){var r=e.width,a=e.height,l=e.onChange,u=e.hsl,d=e.direction,g=e.pointer,E=e.styles,P=E===void 0?{}:E,Z=e.className,me=Z===void 0?"":Z,_e=reactCSS(merge({default:{picker:{position:"relative",width:r,height:a},hue:{radius:"2px"}}},P)),He=function(wt){return l({a:1,h:wt.h,l:.5,s:1})};return React.createElement("div",{style:_e.picker,className:"hue-picker "+me},React.createElement(Hue,_extends$2({},_e.hue,{hsl:u,pointer:g,onChange:He,direction:d})))};HuePicker.propTypes={styles:PropTypes.object};HuePicker.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:SliderPointer$1,styles:{}};ColorWrap(HuePicker);var Material=function t(e){var r=e.onChange,a=e.hex,l=e.rgb,u=e.styles,d=u===void 0?{}:u,g=e.className,E=g===void 0?"":g,P=reactCSS(merge({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+a,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},d)),Z=function(_e,He){_e.hex?isValidHex(_e.hex)&&r({hex:_e.hex,source:"hex"},He):(_e.r||_e.g||_e.b)&&r({r:_e.r||l.r,g:_e.g||l.g,b:_e.b||l.b,source:"rgb"},He)};return React.createElement(Raised,{styles:d},React.createElement("div",{style:P.material,className:"material-picker "+E},React.createElement(EditableInput,{style:{wrap:P.HEXwrap,input:P.HEXinput,label:P.HEXlabel},label:"hex",value:a,onChange:Z}),React.createElement("div",{style:P.split,className:"flexbox-fix"},React.createElement("div",{style:P.third},React.createElement(EditableInput,{style:{wrap:P.RGBwrap,input:P.RGBinput,label:P.RGBlabel},label:"r",value:l.r,onChange:Z})),React.createElement("div",{style:P.third},React.createElement(EditableInput,{style:{wrap:P.RGBwrap,input:P.RGBinput,label:P.RGBlabel},label:"g",value:l.g,onChange:Z})),React.createElement("div",{style:P.third},React.createElement(EditableInput,{style:{wrap:P.RGBwrap,input:P.RGBinput,label:P.RGBlabel},label:"b",value:l.b,onChange:Z})))))};ColorWrap(Material);var PhotoshopPicker=function t(e){var r=e.onChange,a=e.rgb,l=e.hsv,u=e.hex,d=reactCSS({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),g=function(P,Z){P["#"]?isValidHex(P["#"])&&r({hex:P["#"],source:"hex"},Z):P.r||P.g||P.b?r({r:P.r||a.r,g:P.g||a.g,b:P.b||a.b,source:"rgb"},Z):(P.h||P.s||P.v)&&r({h:P.h||l.h,s:P.s||l.s,v:P.v||l.v,source:"hsv"},Z)};return React.createElement("div",{style:d.fields},React.createElement(EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"h",value:Math.round(l.h),onChange:g}),React.createElement(EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"s",value:Math.round(l.s*100),onChange:g}),React.createElement(EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"v",value:Math.round(l.v*100),onChange:g}),React.createElement("div",{style:d.divider}),React.createElement(EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"r",value:a.r,onChange:g}),React.createElement(EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"g",value:a.g,onChange:g}),React.createElement(EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"b",value:a.b,onChange:g}),React.createElement("div",{style:d.divider}),React.createElement(EditableInput,{style:{wrap:d.HEXwrap,input:d.HEXinput,label:d.HEXlabel},label:"#",value:u.replace("#",""),onChange:g}),React.createElement("div",{style:d.fieldSymbols},React.createElement("div",{style:d.symbol},""),React.createElement("div",{style:d.symbol},"%"),React.createElement("div",{style:d.symbol},"%")))},PhotoshopPointerCircle$1=function t(e){var r=e.hsl,a=reactCSS({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return React.createElement("div",{style:a.picker})},PhotoshopPointerCircle=function t(){var e=reactCSS({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return React.createElement("div",{style:e.pointer},React.createElement("div",{style:e.left},React.createElement("div",{style:e.leftInside})),React.createElement("div",{style:e.right},React.createElement("div",{style:e.rightInside})))},PhotoshopButton=function t(e){var r=e.onClick,a=e.label,l=e.children,u=e.active,d=reactCSS({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:u});return React.createElement("div",{style:d.button,onClick:r},a||l)},PhotoshopPreviews=function t(e){var r=e.rgb,a=e.currentColor,l=reactCSS({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:a,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return React.createElement("div",null,React.createElement("div",{style:l.label},"new"),React.createElement("div",{style:l.swatches},React.createElement("div",{style:l.new}),React.createElement("div",{style:l.current})),React.createElement("div",{style:l.label},"current"))},_createClass=function(){function t(e,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Photoshop=function(t){_inherits(e,t);function e(r){_classCallCheck(this,e);var a=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.state={currentColor:r.hex},a}return _createClass(e,[{key:"render",value:function(){var a=this.props,l=a.styles,u=l===void 0?{}:l,d=a.className,g=d===void 0?"":d,E=reactCSS(merge({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},u));return React.createElement("div",{style:E.picker,className:"photoshop-picker "+g},React.createElement("div",{style:E.head},this.props.header),React.createElement("div",{style:E.body,className:"flexbox-fix"},React.createElement("div",{style:E.saturation},React.createElement(Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:PhotoshopPointerCircle$1,onChange:this.props.onChange})),React.createElement("div",{style:E.hue},React.createElement(Hue,{direction:"vertical",hsl:this.props.hsl,pointer:PhotoshopPointerCircle,onChange:this.props.onChange})),React.createElement("div",{style:E.controls},React.createElement("div",{style:E.top,className:"flexbox-fix"},React.createElement("div",{style:E.previews},React.createElement(PhotoshopPreviews,{rgb:this.props.rgb,currentColor:this.state.currentColor})),React.createElement("div",{style:E.actions},React.createElement(PhotoshopButton,{label:"OK",onClick:this.props.onAccept,active:!0}),React.createElement(PhotoshopButton,{label:"Cancel",onClick:this.props.onCancel}),React.createElement(PhotoshopPicker,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(React.Component);Photoshop.propTypes={header:PropTypes.string,styles:PropTypes.object};Photoshop.defaultProps={header:"Color Picker",styles:{}};ColorWrap(Photoshop);var SketchFields=function t(e){var r=e.onChange,a=e.rgb,l=e.hsl,u=e.hex,d=e.disableAlpha,g=reactCSS({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:d}),E=function(Z,me){Z.hex?isValidHex(Z.hex)&&r({hex:Z.hex,source:"hex"},me):Z.r||Z.g||Z.b?r({r:Z.r||a.r,g:Z.g||a.g,b:Z.b||a.b,a:a.a,source:"rgb"},me):Z.a&&(Z.a<0?Z.a=0:Z.a>100&&(Z.a=100),Z.a/=100,r({h:l.h,s:l.s,l:l.l,a:Z.a,source:"rgb"},me))};return React.createElement("div",{style:g.fields,className:"flexbox-fix"},React.createElement("div",{style:g.double},React.createElement(EditableInput,{style:{input:g.input,label:g.label},label:"hex",value:u.replace("#",""),onChange:E})),React.createElement("div",{style:g.single},React.createElement(EditableInput,{style:{input:g.input,label:g.label},label:"r",value:a.r,onChange:E,dragLabel:"true",dragMax:"255"})),React.createElement("div",{style:g.single},React.createElement(EditableInput,{style:{input:g.input,label:g.label},label:"g",value:a.g,onChange:E,dragLabel:"true",dragMax:"255"})),React.createElement("div",{style:g.single},React.createElement(EditableInput,{style:{input:g.input,label:g.label},label:"b",value:a.b,onChange:E,dragLabel:"true",dragMax:"255"})),React.createElement("div",{style:g.alpha},React.createElement(EditableInput,{style:{input:g.input,label:g.label},label:"a",value:Math.round(a.a*100),onChange:E,dragLabel:"true",dragMax:"100"})))},_extends$1=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},SketchPresetColors=function t(e){var r=e.colors,a=e.onClick,l=a===void 0?function(){}:a,u=e.onSwatchHover,d=reactCSS({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),g=function(P,Z){l({hex:P,source:"hex"},Z)};return React.createElement("div",{style:d.colors,className:"flexbox-fix"},r.map(function(E){var P=typeof E=="string"?{color:E}:E,Z=""+P.color+(P.title||"");return React.createElement("div",{key:Z,style:d.swatchWrap},React.createElement(Swatch$1,_extends$1({},P,{style:d.swatch,onClick:g,onHover:u,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+P.color}})))}))};SketchPresetColors.propTypes={colors:PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string,PropTypes.shape({color:PropTypes.string,title:PropTypes.string})])).isRequired};var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Sketch=function t(e){var r=e.width,a=e.rgb,l=e.hex,u=e.hsv,d=e.hsl,g=e.onChange,E=e.onSwatchHover,P=e.disableAlpha,Z=e.presetColors,me=e.renderers,_e=e.styles,He=_e===void 0?{}:_e,Xe=e.className,wt=Xe===void 0?"":Xe,Do=reactCSS(merge({default:_extends({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+a.r+","+a.g+","+a.b+","+a.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},He),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},He),{disableAlpha:P});return React.createElement("div",{style:Do.picker,className:"sketch-picker "+wt},React.createElement("div",{style:Do.saturation},React.createElement(Saturation,{style:Do.Saturation,hsl:d,hsv:u,onChange:g})),React.createElement("div",{style:Do.controls,className:"flexbox-fix"},React.createElement("div",{style:Do.sliders},React.createElement("div",{style:Do.hue},React.createElement(Hue,{style:Do.Hue,hsl:d,onChange:g})),React.createElement("div",{style:Do.alpha},React.createElement(Alpha,{style:Do.Alpha,rgb:a,hsl:d,renderers:me,onChange:g}))),React.createElement("div",{style:Do.color},React.createElement(Checkboard,null),React.createElement("div",{style:Do.activeColor}))),React.createElement(SketchFields,{rgb:a,hsl:d,hex:l,onChange:g,disableAlpha:P}),React.createElement(SketchPresetColors,{colors:Z,onClick:g,onSwatchHover:E}))};Sketch.propTypes={disableAlpha:PropTypes.bool,width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),styles:PropTypes.object};Sketch.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};ColorWrap(Sketch);var SliderSwatch=function t(e){var r=e.hsl,a=e.offset,l=e.onClick,u=l===void 0?function(){}:l,d=e.active,g=e.first,E=e.last,P=reactCSS({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+a*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:d,first:g,last:E}),Z=function(_e){return u({h:r.h,s:.5,l:a,source:"hsl"},_e)};return React.createElement("div",{style:P.swatch,onClick:Z})},SliderSwatches=function t(e){var r=e.onClick,a=e.hsl,l=reactCSS({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),u=.1;return React.createElement("div",{style:l.swatches},React.createElement("div",{style:l.swatch},React.createElement(SliderSwatch,{hsl:a,offset:".80",active:Math.abs(a.l-.8)<u&&Math.abs(a.s-.5)<u,onClick:r,first:!0})),React.createElement("div",{style:l.swatch},React.createElement(SliderSwatch,{hsl:a,offset:".65",active:Math.abs(a.l-.65)<u&&Math.abs(a.s-.5)<u,onClick:r})),React.createElement("div",{style:l.swatch},React.createElement(SliderSwatch,{hsl:a,offset:".50",active:Math.abs(a.l-.5)<u&&Math.abs(a.s-.5)<u,onClick:r})),React.createElement("div",{style:l.swatch},React.createElement(SliderSwatch,{hsl:a,offset:".35",active:Math.abs(a.l-.35)<u&&Math.abs(a.s-.5)<u,onClick:r})),React.createElement("div",{style:l.swatch},React.createElement(SliderSwatch,{hsl:a,offset:".20",active:Math.abs(a.l-.2)<u&&Math.abs(a.s-.5)<u,onClick:r,last:!0})),React.createElement("div",{style:l.clear}))},SliderPointer=function t(){var e=reactCSS({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return React.createElement("div",{style:e.picker})},Slider=function t(e){var r=e.hsl,a=e.onChange,l=e.pointer,u=e.styles,d=u===void 0?{}:u,g=e.className,E=g===void 0?"":g,P=reactCSS(merge({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},d));return React.createElement("div",{style:P.wrap||{},className:"slider-picker "+E},React.createElement("div",{style:P.hue},React.createElement(Hue,{style:P.Hue,hsl:r,pointer:l,onChange:a})),React.createElement("div",{style:P.swatches},React.createElement(SliderSwatches,{hsl:r,onClick:a})))};Slider.propTypes={styles:PropTypes.object};Slider.defaultProps={pointer:SliderPointer,styles:{}};ColorWrap(Slider);var CheckIcon$1={},hasRequiredCheckIcon;function requireCheckIcon(){if(hasRequiredCheckIcon)return CheckIcon$1;hasRequiredCheckIcon=1,Object.defineProperty(CheckIcon$1,"__esModule",{value:!0});var t=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var E=arguments[g];for(var P in E)Object.prototype.hasOwnProperty.call(E,P)&&(d[P]=E[P])}return d},e=requireReact(),r=a(e);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,g){var E={};for(var P in d)g.indexOf(P)>=0||Object.prototype.hasOwnProperty.call(d,P)&&(E[P]=d[P]);return E}var u=24;return CheckIcon$1.default=function(d){var g=d.fill,E=g===void 0?"currentColor":g,P=d.width,Z=P===void 0?u:P,me=d.height,_e=me===void 0?u:me,He=d.style,Xe=He===void 0?{}:He,wt=l(d,["fill","width","height","style"]);return r.default.createElement("svg",t({viewBox:"0 0 "+u+" "+u,style:t({fill:E,width:Z,height:_e},Xe)},wt),r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},CheckIcon$1}var CheckIconExports=requireCheckIcon();const CheckIcon=getDefaultExportFromCjs(CheckIconExports);var SwatchesColor=function t(e){var r=e.color,a=e.onClick,l=a===void 0?function(){}:a,u=e.onSwatchHover,d=e.first,g=e.last,E=e.active,P=reactCSS({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:getContrastingColor(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:d,last:g,active:E,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return React.createElement(Swatch$1,{color:r,style:P.color,onClick:l,onHover:u,focusStyle:{boxShadow:"0 0 4px "+r}},React.createElement("div",{style:P.check},React.createElement(CheckIcon,null)))},SwatchesGroup=function t(e){var r=e.onClick,a=e.onSwatchHover,l=e.group,u=e.active,d=reactCSS({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return React.createElement("div",{style:d.group},map(l,function(g,E){return React.createElement(SwatchesColor,{key:g,color:g,active:g.toLowerCase()===u,first:E===0,last:E===l.length-1,onClick:r,onSwatchHover:a})}))},Swatches=function t(e){var r=e.width,a=e.height,l=e.onChange,u=e.onSwatchHover,d=e.colors,g=e.hex,E=e.styles,P=E===void 0?{}:E,Z=e.className,me=Z===void 0?"":Z,_e=reactCSS(merge({default:{picker:{width:r,height:a},overflow:{height:a,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},P)),He=function(wt,Do){return l({hex:wt,source:"hex"},Do)};return React.createElement("div",{style:_e.picker,className:"swatches-picker "+me},React.createElement(Raised,null,React.createElement("div",{style:_e.overflow},React.createElement("div",{style:_e.body},map(d,function(Xe){return React.createElement(SwatchesGroup,{key:Xe.toString(),group:Xe,active:g,onClick:He,onSwatchHover:u})}),React.createElement("div",{style:_e.clear})))))};Swatches.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),height:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),colors:PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)),styles:PropTypes.object};Swatches.defaultProps={width:320,height:240,colors:[[red[900],red[700],red[500],red[300],red[100]],[pink[900],pink[700],pink[500],pink[300],pink[100]],[purple[900],purple[700],purple[500],purple[300],purple[100]],[deepPurple[900],deepPurple[700],deepPurple[500],deepPurple[300],deepPurple[100]],[indigo[900],indigo[700],indigo[500],indigo[300],indigo[100]],[blue[900],blue[700],blue[500],blue[300],blue[100]],[lightBlue[900],lightBlue[700],lightBlue[500],lightBlue[300],lightBlue[100]],[cyan[900],cyan[700],cyan[500],cyan[300],cyan[100]],[teal[900],teal[700],teal[500],teal[300],teal[100]],["#194D33",green[700],green[500],green[300],green[100]],[lightGreen[900],lightGreen[700],lightGreen[500],lightGreen[300],lightGreen[100]],[lime[900],lime[700],lime[500],lime[300],lime[100]],[yellow[900],yellow[700],yellow[500],yellow[300],yellow[100]],[amber[900],amber[700],amber[500],amber[300],amber[100]],[orange[900],orange[700],orange[500],orange[300],orange[100]],[deepOrange[900],deepOrange[700],deepOrange[500],deepOrange[300],deepOrange[100]],[brown[900],brown[700],brown[500],brown[300],brown[100]],[blueGrey[900],blueGrey[700],blueGrey[500],blueGrey[300],blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};ColorWrap(Swatches);var Twitter=function t(e){var r=e.onChange,a=e.onSwatchHover,l=e.hex,u=e.colors,d=e.width,g=e.triangle,E=e.styles,P=E===void 0?{}:E,Z=e.className,me=Z===void 0?"":Z,_e=reactCSS(merge({default:{card:{width:d,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},P),{"hide-triangle":g==="hide","top-left-triangle":g==="top-left","top-right-triangle":g==="top-right"}),He=function(wt,Do){isValidHex(wt)&&r({hex:wt,source:"hex"},Do)};return React.createElement("div",{style:_e.card,className:"twitter-picker "+me},React.createElement("div",{style:_e.triangleShadow}),React.createElement("div",{style:_e.triangle}),React.createElement("div",{style:_e.body},map(u,function(Xe,wt){return React.createElement(Swatch$1,{key:wt,color:Xe,hex:Xe,style:_e.swatch,onClick:He,onHover:a,focusStyle:{boxShadow:"0 0 4px "+Xe}})}),React.createElement("div",{style:_e.hash},"#"),React.createElement(EditableInput,{label:null,style:{input:_e.input},value:l.replace("#",""),onChange:He}),React.createElement("div",{style:_e.clear})))};Twitter.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),triangle:PropTypes.oneOf(["hide","top-left","top-right"]),colors:PropTypes.arrayOf(PropTypes.string),styles:PropTypes.object};Twitter.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};ColorWrap(Twitter);var GooglePointerCircle=function t(e){var r=reactCSS({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return React.createElement("div",{style:r.picker})};GooglePointerCircle.propTypes={hsl:PropTypes.shape({h:PropTypes.number,s:PropTypes.number,l:PropTypes.number,a:PropTypes.number})};GooglePointerCircle.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var GooglePointer=function t(e){var r=reactCSS({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return React.createElement("div",{style:r.picker})};GooglePointer.propTypes={hsl:PropTypes.shape({h:PropTypes.number,s:PropTypes.number,l:PropTypes.number,a:PropTypes.number})};GooglePointer.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var GoogleFields=function t(e){var r=e.onChange,a=e.rgb,l=e.hsl,u=e.hex,d=e.hsv,g=function(He,Xe){if(He.hex)isValidHex(He.hex)&&r({hex:He.hex,source:"hex"},Xe);else if(He.rgb){var wt=He.rgb.split(",");isvalidColorString(He.rgb,"rgb")&&r({r:wt[0],g:wt[1],b:wt[2],a:1,source:"rgb"},Xe)}else if(He.hsv){var Do=He.hsv.split(",");isvalidColorString(He.hsv,"hsv")&&(Do[2]=Do[2].replace("%",""),Do[1]=Do[1].replace("%",""),Do[0]=Do[0].replace("",""),Do[1]==1?Do[1]=.01:Do[2]==1&&(Do[2]=.01),r({h:Number(Do[0]),s:Number(Do[1]),v:Number(Do[2]),source:"hsv"},Xe))}else if(He.hsl){var sr=He.hsl.split(",");isvalidColorString(He.hsl,"hsl")&&(sr[2]=sr[2].replace("%",""),sr[1]=sr[1].replace("%",""),sr[0]=sr[0].replace("",""),me[1]==1?me[1]=.01:me[2]==1&&(me[2]=.01),r({h:Number(sr[0]),s:Number(sr[1]),v:Number(sr[2]),source:"hsl"},Xe))}},E=reactCSS({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),P=a.r+", "+a.g+", "+a.b,Z=Math.round(l.h)+", "+Math.round(l.s*100)+"%, "+Math.round(l.l*100)+"%",me=Math.round(d.h)+", "+Math.round(d.s*100)+"%, "+Math.round(d.v*100)+"%";return React.createElement("div",{style:E.wrap,className:"flexbox-fix"},React.createElement("div",{style:E.fields},React.createElement("div",{style:E.double},React.createElement(EditableInput,{style:{input:E.input,label:E.label},label:"hex",value:u,onChange:g})),React.createElement("div",{style:E.column},React.createElement("div",{style:E.single},React.createElement(EditableInput,{style:{input:E.input2,label:E.label2},label:"rgb",value:P,onChange:g})),React.createElement("div",{style:E.single},React.createElement(EditableInput,{style:{input:E.input2,label:E.label2},label:"hsv",value:me,onChange:g})),React.createElement("div",{style:E.single},React.createElement(EditableInput,{style:{input:E.input2,label:E.label2},label:"hsl",value:Z,onChange:g})))))},Google=function t(e){var r=e.width,a=e.onChange,l=e.rgb,u=e.hsl,d=e.hsv,g=e.hex,E=e.header,P=e.styles,Z=P===void 0?{}:P,me=e.className,_e=me===void 0?"":me,He=reactCSS(merge({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+l.r+", "+l.g+", "+l.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},Z));return React.createElement("div",{style:He.picker,className:"google-picker "+_e},React.createElement("div",{style:He.head},E),React.createElement("div",{style:He.swatch}),React.createElement("div",{style:He.saturation},React.createElement(Saturation,{hsl:u,hsv:d,pointer:GooglePointerCircle,onChange:a})),React.createElement("div",{style:He.body},React.createElement("div",{style:He.controls,className:"flexbox-fix"},React.createElement("div",{style:He.hue},React.createElement(Hue,{style:He.Hue,hsl:u,radius:"4px",pointer:GooglePointer,onChange:a}))),React.createElement(GoogleFields,{rgb:l,hsl:u,hex:g,hsv:d,onChange:a})))};Google.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),styles:PropTypes.object,header:PropTypes.string};Google.defaultProps={width:652,styles:{},header:"Color picker"};ColorWrap(Google);function ViewDecks(t){const[e,r]=reactExports.useState("decks"),[a,l]=reactExports.useState(""),[u,d]=reactExports.useState(""),[g,E]=reactExports.useState(""),{user:P}=reactExports.useContext(UserContext),Z=useNavigate(),{createDeck:me,addQuestiontoDeck:_e}=useDeckHandler();return jsxRuntimeExports.jsx("div",{className:"h-container items-start w-full overflow-y-scroll p-4",children:e==="decks"?jsxRuntimeExports.jsxs("div",{className:"w-full",children:[P.decks?.map(He=>jsxRuntimeExports.jsxs("div",{className:"deck",onClick:()=>{Z(`/decks/${P.uid}/${He.id}`)},children:[jsxRuntimeExports.jsx("div",{className:"color-strip",style:{backgroundColor:He.color}}),jsxRuntimeExports.jsxs("div",{className:"deck-txt",children:[jsxRuntimeExports.jsx("span",{className:"txt-heading-colour",children:He.name}),jsxRuntimeExports.jsx("span",{className:"txt-sub",children:He.timestamp?new Date(He.timestamp.seconds*1e3).toLocaleDateString():""})]}),jsxRuntimeExports.jsxs("div",{className:"deck-txt",children:[jsxRuntimeExports.jsx("span",{className:"txt-sub",children:He.description}),jsxRuntimeExports.jsxs("span",{className:"txt-sub",children:[He?.questions?.length," question",He?.questions?.length!==1?"s":""]})]}),jsxRuntimeExports.jsx("span",{className:"plain-btn color-txt-main cursor-pointer my-2 bg-green-300",onClick:Xe=>{_e([t?.question],He.id),Xe.stopPropagation()},children:"Add to deck"})]},He.id)),jsxRuntimeExports.jsx("div",{className:"new-deck my-3",onClick:()=>r("create"),children:jsxRuntimeExports.jsx("p",{className:"color-txt-main text-center",children:"New Deck"})})]}):e==="create"?jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("p",{onClick:()=>r("decks"),children:"Back"}),jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox m-4",placeholder:"Name",onChange:He=>{l(He.target.value)}}),jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox m-4",placeholder:"Description",onChange:He=>{d(He.target.value)}}),jsxRuntimeExports.jsx(CirclePicker,{color:g,onChangeComplete:He=>{E(He.hex)}}),jsxRuntimeExports.jsx("span",{className:"create-deck",onClick:()=>{me(a,u,[t?.question??null],g),r("decks")},children:"Create Deck"})]}):null})}function SharePanel(){const{id:t}=useParams(),{fetchFriends:e}=useFetch(),{shareDeck:r}=useDeckHandler(),[a,l]=reactExports.useState(),{user:u}=reactExports.useContext(UserContext);return reactExports.useEffect(()=>{(async()=>{l([]);const g=await e(u.uid);l(g)})()},[]),jsxRuntimeExports.jsx("div",{className:"w-h-container justify-start items-start flex-col overflow-y-scroll p-4",children:a?a?.map(d=>jsxRuntimeExports.jsxs("div",{className:"m-4",children:[jsxRuntimeExports.jsx("img",{src:d.picture,alt:d.picture,className:"w-10 h-10 rounded-full object-cover inline"}),jsxRuntimeExports.jsx("span",{className:"txt-bold mx-4 inline",children:d.username}),d.sent?jsxRuntimeExports.jsx("span",{className:"blue-btn opacity-70 cursor-default inline",children:"Sent!"}):jsxRuntimeExports.jsx("span",{className:"blue-btn cursor-pointer inline",onClick:()=>{r(d,t,l)},children:"Share"})]})):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnim,loop:!0,autoplay:!0,className:"h-40 w-40"})})})}function Question(t){const[e,r]=reactExports.useState(),[a,l]=reactExports.useState(),[u,d]=reactExports.useState(0),[g,E]=reactExports.useState(""),{toRoman:P}=useQuestions(),Z=48,me=2;return reactExports.useEffect(()=>{d(0);const He=(Array.isArray(t.questions)?t.questions:[])[t.position]??{},Xe=(He.content??[]).map(wt=>({question:wt?.question??"",answer:Array.isArray(wt?.answer)?wt.answer:[],image:wt?.image??""}));r(Xe),l(He.properties??{})},[t.position,t.questions]),jsxRuntimeExports.jsx("div",{className:"card-container",children:t.questions[t.position]?jsxRuntimeExports.jsxs("div",{className:"h-container items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"p-8 w-2/3",children:[jsxRuntimeExports.jsxs("p",{className:"txt-bold color-txt-accent",children:[a?.name,jsxRuntimeExports.jsx("span",{className:"txt-sub mx-2",children:a?.tags?.join?.(", ")}),e?.[u]?.answer.map(_e=>jsxRuntimeExports.jsx("span",{className:"txt-sub",children:`ANS: ${_e}`}))]}),jsxRuntimeExports.jsx("div",{className:"flex",children:e.length>1&&e.map((_e,He)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center h-10",onClick:()=>d(He),children:[jsxRuntimeExports.jsx("p",{className:`part-number ${u===He?"bg-white/5":"hover:bg-white/10"}`,children:P(He+1)}),jsxRuntimeExports.jsx(LuChevronRight,{className:`${He+1===e.length?"invisible":"visible"} color-txt-sub`})]},He))}),jsxRuntimeExports.jsxs("div",{className:"w-2/3 m-4",children:[jsxRuntimeExports.jsx(RenderMath,{text:e[u]?.question??"",className:"txt text-xl"}),e?.[u]?.image&&jsxRuntimeExports.jsx("img",{src:e[u].image,className:"max-h-30 m-4 dark:invert-100"})]}),t.preview?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):e?.[u]?.answer?.map((_e,He)=>jsxRuntimeExports.jsx(MathInput,{answer:_e},He))]}),g==="thread"?jsxRuntimeExports.jsx("div",{className:"border-l border-light-grey dark:border-grey h-full w-150",children:jsxRuntimeExports.jsx(QThread,{questionId:a?.id??t.questions[t.position]?.id,part:u})}):null,g==="decks"?jsxRuntimeExports.jsx("div",{className:"border-l border-light-grey dark:border-grey h-full w-150",children:jsxRuntimeExports.jsx(ViewDecks,{question:a?.id})}):null,g==="share"?jsxRuntimeExports.jsx("div",{className:"border-l border-light-grey dark:border-grey h-full w-150",children:jsxRuntimeExports.jsx(SharePanel,{})}):null,t.preview?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsxs("div",{className:"h-full rounded-r-out p-4",children:[jsxRuntimeExports.jsx("div",{className:g=="thread"?"nav-item-selected mb-4 mt-0":"nav-item mb-4",onClick:()=>{E(_e=>_e!="thread"?"thread":"")},children:jsxRuntimeExports.jsx(LuMessageSquareText,{strokeWidth:me,size:Z,className:g=="thread"?"nav-icon-selected":"nav-icon",fill:g=="thread"?"currentColor":"none"})}),t.deckmode?jsxRuntimeExports.jsx("div",{className:g=="share"?"nav-item-selected mb-4":"nav-item mb-4",onClick:()=>{E(_e=>_e!="share"?"share":"")},children:jsxRuntimeExports.jsx(LuShare2,{strokeWidth:me,size:Z,className:g=="share"?"nav-icon-selected":"nav-icon",fill:g=="share"?"currentColor":"none"})}):jsxRuntimeExports.jsx("div",{className:g=="decks"?"nav-item-selected mb-4":"nav-item mb-4",onClick:()=>{E(_e=>_e!="decks"?"decks":"")},children:jsxRuntimeExports.jsx(TbCards,{strokeWidth:me,size:Z,className:g=="decks"?"nav-icon-selected":"nav-icon",fill:g=="decks"?"currentColor":"none"})})]})]}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnim,loop:!0,autoplay:!0,className:"h-40 w-40"})})})}const LayoutGroupContext=reactExports.createContext({});function useConstant(t){const e=reactExports.useRef(null);return e.current===null&&(e.current=t()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(t,e){t.indexOf(e)===-1&&t.push(e)}function removeItem(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const clamp=(t,e,r)=>r>e?e:r<t?t:r;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function isObject(t){return typeof t=="object"&&t!==null}const isZeroValueString=t=>/^0[^.\s]+$/u.test(t);function memo(t){let e;return()=>(e===void 0&&(e=t()),e)}const noop=t=>t,combineFunctions=(t,e)=>r=>e(t(r)),pipe=(...t)=>t.reduce(combineFunctions),progress=(t,e,r)=>{const a=e-t;return a===0?1:(r-t)/a};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,r,a){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](e,r,a);else for(let u=0;u<l;u++){const d=this.subscriptions[u];d&&d(e,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=t=>t*1e3,millisecondsToSeconds=t=>t/1e3;function velocityPerSecond(t,e){return e?t*(1e3/e):0}const calcBezier=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(t,e,r,a,l){let u,d,g=0;do d=e+(r-e)/2,u=calcBezier(d,a,l)-t,u>0?r=d:e=d;while(Math.abs(u)>subdivisionPrecision&&++g<subdivisionMaxIterations);return d}function cubicBezier(t,e,r,a){if(t===e&&r===a)return noop;const l=u=>binarySubdivide(u,0,1,t,r);return u=>u===0||u===1?u:calcBezier(l(u),e,a)}const mirrorEasing=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,reverseEasing=t=>e=>1-t(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=t=>(t*=2)<1?.5*backIn(t):.5*(2-Math.pow(2,-10*(t-1))),circIn=t=>1-Math.sin(Math.acos(t)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=t=>Array.isArray(t)&&typeof t[0]!="number",isBezierDefinition=t=>Array.isArray(t)&&typeof t[0]=="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=t=>typeof t=="string",easingDefinitionToFunction=t=>{if(isBezierDefinition(t)){invariant(t.length===4);const[e,r,a,l]=t;return cubicBezier(e,r,a,l)}else if(isValidEasing(t))return easingLookup[t];return t},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(t,e){let r=new Set,a=new Set,l=!1,u=!1;const d=new WeakSet;let g={delta:0,timestamp:0,isProcessing:!1};function E(Z){d.has(Z)&&(P.schedule(Z),t()),Z(g)}const P={schedule:(Z,me=!1,_e=!1)=>{const Xe=_e&&l?r:a;return me&&d.add(Z),Xe.has(Z)||Xe.add(Z),Z},cancel:Z=>{a.delete(Z),d.delete(Z)},process:Z=>{if(g=Z,l){u=!0;return}l=!0,[r,a]=[a,r],r.forEach(E),r.clear(),l=!1,u&&(u=!1,P.process(Z))}};return P}const maxElapsed=40;function createRenderBatcher(t,e){let r=!1,a=!0;const l={delta:0,timestamp:0,isProcessing:!1},u=()=>r=!0,d=stepsOrder.reduce((Bs,th)=>(Bs[th]=createRenderStep(u),Bs),{}),{setup:g,read:E,resolveKeyframes:P,preUpdate:Z,update:me,preRender:_e,render:He,postRender:Xe}=d,wt=()=>{const Bs=MotionGlobalConfig.useManualTiming?l.timestamp:performance.now();r=!1,MotionGlobalConfig.useManualTiming||(l.delta=a?1e3/60:Math.max(Math.min(Bs-l.timestamp,maxElapsed),1)),l.timestamp=Bs,l.isProcessing=!0,g.process(l),E.process(l),P.process(l),Z.process(l),me.process(l),_e.process(l),He.process(l),Xe.process(l),l.isProcessing=!1,r&&e&&(a=!1,t(wt))},Do=()=>{r=!0,a=!0,l.isProcessing||t(wt)};return{schedule:stepsOrder.reduce((Bs,th)=>{const pf=d[th];return Bs[th]=(_h,cf=!1,df=!1)=>(r||Do(),pf.schedule(_h,cf,df)),Bs},{}),cancel:Bs=>{for(let th=0;th<stepsOrder.length;th++)d[stepsOrder[th]].cancel(Bs)},state:l,steps:d}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:t=>{now=t,queueMicrotask(clearTime)}},checkStringStartsWith=t=>e=>typeof e=="string"&&e.startsWith(t),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=t=>startsAsVariableToken(t)?singleCssVariableRegex.test(t.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},alpha={...number,transform:t=>clamp(0,1,t)},scale={...number,default:1},sanitize=t=>Math.round(t*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(t){return t==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(t,e)=>r=>!!(typeof r=="string"&&singleColorRegex.test(r)&&r.startsWith(t)||e&&!isNullish(r)&&Object.prototype.hasOwnProperty.call(r,e)),splitColor=(t,e,r)=>a=>{if(typeof a!="string")return a;const[l,u,d,g]=a.match(floatRegex);return{[t]:parseFloat(l),[e]:parseFloat(u),[r]:parseFloat(d),alpha:g!==void 0?parseFloat(g):1}},clampRgbUnit=t=>clamp(0,255,t),rgbUnit={...number,transform:t=>Math.round(clampRgbUnit(t))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:a=1})=>"rgba("+rgbUnit.transform(t)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(r)+", "+sanitize(alpha.transform(a))+")"};function parseHex(t){let e="",r="",a="",l="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),a=t.substring(5,7),l=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),a=t.substring(3,4),l=t.substring(4,5),e+=e,r+=r,a+=a,l+=l),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:l?parseInt(l,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:t=>percent.parse(t)/100,transform:t=>percent.transform(t*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:a=1})=>"hsla("+Math.round(t)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(r))+", "+sanitize(alpha.transform(a))+")"},color={test:t=>rgba.test(t)||hex.test(t)||hsla.test(t),parse:t=>rgba.test(t)?rgba.parse(t):hsla.test(t)?hsla.parse(t):hex.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rgba.transform(t):hsla.transform(t),getAnimatableNone:t=>{const e=color.parse(t);return e.alpha=0,color.transform(e)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(t){return isNaN(t)&&typeof t=="string"&&(t.match(floatRegex)?.length||0)+(t.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(t){const e=t.toString(),r=[],a={color:[],number:[],var:[]},l=[];let u=0;const g=e.replace(complexRegex,E=>(color.test(E)?(a.color.push(u),l.push(COLOR_TOKEN),r.push(color.parse(E))):E.startsWith(VAR_FUNCTION_TOKEN)?(a.var.push(u),l.push(VAR_TOKEN),r.push(E)):(a.number.push(u),l.push(NUMBER_TOKEN),r.push(parseFloat(E))),++u,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:r,split:g,indexes:a,types:l}}function parseComplexValue(t){return analyseComplexValue(t).values}function createTransformer(t){const{split:e,types:r}=analyseComplexValue(t),a=e.length;return l=>{let u="";for(let d=0;d<a;d++)if(u+=e[d],l[d]!==void 0){const g=r[d];g===NUMBER_TOKEN?u+=sanitize(l[d]):g===COLOR_TOKEN?u+=color.transform(l[d]):u+=l[d]}return u}}const convertNumbersToZero=t=>typeof t=="number"?0:color.test(t)?color.getAnimatableNone(t):t;function getAnimatableNone$1(t){const e=parseComplexValue(t);return createTransformer(t)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function hslaToRgba({hue:t,saturation:e,lightness:r,alpha:a}){t/=360,e/=100,r/=100;let l=0,u=0,d=0;if(!e)l=u=d=r;else{const g=r<.5?r*(1+e):r+e-r*e,E=2*r-g;l=hueToRgb(E,g,t+1/3),u=hueToRgb(E,g,t),d=hueToRgb(E,g,t-1/3)}return{red:Math.round(l*255),green:Math.round(u*255),blue:Math.round(d*255),alpha:a}}function mixImmediate(t,e){return r=>r>0?e:t}const mixNumber$1=(t,e,r)=>t+(e-t)*r,mixLinearColor=(t,e,r)=>{const a=t*t,l=r*(e*e-a)+a;return l<0?0:Math.sqrt(l)},colorTypes=[hex,rgba,hsla],getColorType=t=>colorTypes.find(e=>e.test(t));function asRGBA(t){const e=getColorType(t);if(!e)return!1;let r=e.parse(t);return e===hsla&&(r=hslaToRgba(r)),r}const mixColor=(t,e)=>{const r=asRGBA(t),a=asRGBA(e);if(!r||!a)return mixImmediate(t,e);const l={...r};return u=>(l.red=mixLinearColor(r.red,a.red,u),l.green=mixLinearColor(r.green,a.green,u),l.blue=mixLinearColor(r.blue,a.blue,u),l.alpha=mixNumber$1(r.alpha,a.alpha,u),rgba.transform(l))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(t,e){return invisibleValues.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function mixNumber(t,e){return r=>mixNumber$1(t,e,r)}function getMixer(t){return typeof t=="number"?mixNumber:typeof t=="string"?isCSSVariableToken(t)?mixImmediate:color.test(t)?mixColor:mixComplex:Array.isArray(t)?mixArray:typeof t=="object"?color.test(t)?mixColor:mixObject:mixImmediate}function mixArray(t,e){const r=[...t],a=r.length,l=t.map((u,d)=>getMixer(u)(u,e[d]));return u=>{for(let d=0;d<a;d++)r[d]=l[d](u);return r}}function mixObject(t,e){const r={...t,...e},a={};for(const l in r)t[l]!==void 0&&e[l]!==void 0&&(a[l]=getMixer(t[l])(t[l],e[l]));return l=>{for(const u in a)r[u]=a[u](l);return r}}function matchOrder(t,e){const r=[],a={color:0,var:0,number:0};for(let l=0;l<e.values.length;l++){const u=e.types[l],d=t.indexes[u][a[u]],g=t.values[d]??0;r[l]=g,a[u]++}return r}const mixComplex=(t,e)=>{const r=complex.createTransformer(e),a=analyseComplexValue(t),l=analyseComplexValue(e);return a.indexes.var.length===l.indexes.var.length&&a.indexes.color.length===l.indexes.color.length&&a.indexes.number.length>=l.indexes.number.length?invisibleValues.has(t)&&!l.values.length||invisibleValues.has(e)&&!a.values.length?mixVisibility(t,e):pipe(mixArray(matchOrder(a,l),l.values),r):mixImmediate(t,e)};function mix(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?mixNumber$1(t,e,r):getMixer(t)(t,e)}const frameloopDriver=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>frame.update(e,r),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(t,e,r=10)=>{let a="";const l=Math.max(Math.round(e/r),2);for(let u=0;u<l;u++)a+=Math.round(t(u/(l-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(t){let e=0;const r=50;let a=t.next(e);for(;!a.done&&e<maxGeneratorDuration;)e+=r,a=t.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(t,e=100,r){const a=r({...t,keyframes:[0,e]}),l=Math.min(calcGeneratorDuration(a),maxGeneratorDuration);return{type:"keyframes",ease:u=>a.next(l*u).value/e,duration:millisecondsToSeconds(l)}}const velocitySampleDuration=5;function calcGeneratorVelocity(t,e,r){const a=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(r-t(a),e-a)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:t=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:r=springDefaults.velocity,mass:a=springDefaults.mass}){let l,u,d=1-e;d=clamp(springDefaults.minDamping,springDefaults.maxDamping,d),t=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(t)),d<1?(l=P=>{const Z=P*d,me=Z*t,_e=Z-r,He=calcAngularFreq(P,d),Xe=Math.exp(-me);return safeMin-_e/He*Xe},u=P=>{const me=P*d*t,_e=me*r+r,He=Math.pow(d,2)*Math.pow(P,2)*t,Xe=Math.exp(-me),wt=calcAngularFreq(Math.pow(P,2),d);return(-l(P)+safeMin>0?-1:1)*((_e-He)*Xe)/wt}):(l=P=>{const Z=Math.exp(-P*t),me=(P-r)*t+1;return-safeMin+Z*me},u=P=>{const Z=Math.exp(-P*t),me=(r-P)*(t*t);return Z*me});const g=5/t,E=approximateRoot(l,u,g);if(t=secondsToMilliseconds(t),isNaN(E))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:t};{const P=Math.pow(E,2)*a;return{stiffness:P,damping:d*2*Math.sqrt(a*P),duration:t}}}const rootIterations=12;function approximateRoot(t,e,r){let a=r;for(let l=1;l<rootIterations;l++)a=a-t(a)/e(a);return a}function calcAngularFreq(t,e){return t*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(t,e){return e.some(r=>t[r]!==void 0)}function getSpringOptions(t){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...t};if(!isSpringType(t,physicsKeys)&&isSpringType(t,durationKeys))if(t.visualDuration){const r=t.visualDuration,a=2*Math.PI/(r*1.2),l=a*a,u=2*clamp(.05,1,1-(t.bounce||0))*Math.sqrt(l);e={...e,mass:springDefaults.mass,stiffness:l,damping:u}}else{const r=findSpring(t);e={...e,...r,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(t=springDefaults.visualDuration,e=springDefaults.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:a,restDelta:l}=r;const u=r.keyframes[0],d=r.keyframes[r.keyframes.length-1],g={done:!1,value:u},{stiffness:E,damping:P,mass:Z,duration:me,velocity:_e,isResolvedFromDuration:He}=getSpringOptions({...r,velocity:-millisecondsToSeconds(r.velocity||0)}),Xe=_e||0,wt=P/(2*Math.sqrt(E*Z)),Do=d-u,sr=millisecondsToSeconds(Math.sqrt(E/Z)),Ko=Math.abs(Do)<5;a||(a=Ko?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),l||(l=Ko?springDefaults.restDelta.granular:springDefaults.restDelta.default);let Bs;if(wt<1){const pf=calcAngularFreq(sr,wt);Bs=_h=>{const cf=Math.exp(-wt*sr*_h);return d-cf*((Xe+wt*sr*Do)/pf*Math.sin(pf*_h)+Do*Math.cos(pf*_h))}}else if(wt===1)Bs=pf=>d-Math.exp(-sr*pf)*(Do+(Xe+sr*Do)*pf);else{const pf=sr*Math.sqrt(wt*wt-1);Bs=_h=>{const cf=Math.exp(-wt*sr*_h),df=Math.min(pf*_h,300);return d-cf*((Xe+wt*sr*Do)*Math.sinh(df)+pf*Do*Math.cosh(df))/pf}}const th={calculatedDuration:He&&me||null,next:pf=>{const _h=Bs(pf);if(He)g.done=pf>=me;else{let cf=pf===0?Xe:0;wt<1&&(cf=pf===0?secondsToMilliseconds(Xe):calcGeneratorVelocity(Bs,pf,_h));const df=Math.abs(cf)<=a,uf=Math.abs(d-_h)<=l;g.done=df&&uf}return g.value=g.done?d:_h,g},toString:()=>{const pf=Math.min(calcGeneratorDuration(th),maxGeneratorDuration),_h=generateLinearEasing(cf=>th.next(pf*cf).value,pf,30);return pf+"ms "+_h},toTransition:()=>{}};return th}spring.applyToOptions=t=>{const e=createGeneratorEasing(t,100,spring);return t.ease=e.ease,t.duration=secondsToMilliseconds(e.duration),t.type="keyframes",t};function inertia({keyframes:t,velocity:e=0,power:r=.8,timeConstant:a=325,bounceDamping:l=10,bounceStiffness:u=500,modifyTarget:d,min:g,max:E,restDelta:P=.5,restSpeed:Z}){const me=t[0],_e={done:!1,value:me},He=df=>g!==void 0&&df<g||E!==void 0&&df>E,Xe=df=>g===void 0?E:E===void 0||Math.abs(g-df)<Math.abs(E-df)?g:E;let wt=r*e;const Do=me+wt,sr=d===void 0?Do:d(Do);sr!==Do&&(wt=sr-me);const Ko=df=>-wt*Math.exp(-df/a),Bs=df=>sr+Ko(df),th=df=>{const uf=Ko(df),li=Bs(df);_e.done=Math.abs(uf)<=P,_e.value=_e.done?sr:li};let pf,_h;const cf=df=>{He(_e.value)&&(pf=df,_h=spring({keyframes:[_e.value,Xe(_e.value)],velocity:calcGeneratorVelocity(Bs,df,_e.value),damping:l,stiffness:u,restDelta:P,restSpeed:Z}))};return cf(0),{calculatedDuration:null,next:df=>{let uf=!1;return!_h&&pf===void 0&&(uf=!0,th(df),cf(df)),pf!==void 0&&df>=pf?_h.next(df-pf):(!uf&&th(df),_e)}}}function createMixers(t,e,r){const a=[],l=r||MotionGlobalConfig.mix||mix,u=t.length-1;for(let d=0;d<u;d++){let g=l(t[d],t[d+1]);if(e){const E=Array.isArray(e)?e[d]||noop:e;g=pipe(E,g)}a.push(g)}return a}function interpolate(t,e,{clamp:r=!0,ease:a,mixer:l}={}){const u=t.length;if(invariant(u===e.length),u===1)return()=>e[0];if(u===2&&e[0]===e[1])return()=>e[1];const d=t[0]===t[1];t[0]>t[u-1]&&(t=[...t].reverse(),e=[...e].reverse());const g=createMixers(e,a,l),E=g.length,P=Z=>{if(d&&Z<t[0])return e[0];let me=0;if(E>1)for(;me<t.length-2&&!(Z<t[me+1]);me++);const _e=progress(t[me],t[me+1],Z);return g[me](_e)};return r?Z=>P(clamp(t[0],t[u-1],Z)):P}function fillOffset(t,e){const r=t[t.length-1];for(let a=1;a<=e;a++){const l=progress(0,e,a);t.push(mixNumber$1(r,1,l))}}function defaultOffset(t){const e=[0];return fillOffset(e,t.length-1),e}function convertOffsetToTimes(t,e){return t.map(r=>r*e)}function defaultEasing(t,e){return t.map(()=>e||easeInOut).splice(0,t.length-1)}function keyframes({duration:t=300,keyframes:e,times:r,ease:a="easeInOut"}){const l=isEasingArray(a)?a.map(easingDefinitionToFunction):easingDefinitionToFunction(a),u={done:!1,value:e[0]},d=convertOffsetToTimes(r&&r.length===e.length?r:defaultOffset(e),t),g=interpolate(d,e,{ease:Array.isArray(l)?l:defaultEasing(e,l)});return{calculatedDuration:t,next:E=>(u.value=g(E),u.done=E>=t,u)}}const isNotNull$1=t=>t!==null;function getFinalKeyframe$1(t,{repeat:e,repeatType:r="loop"},a,l=1){const u=t.filter(isNotNull$1),g=l<0||e&&r!=="loop"&&e%2===1?0:u.length-1;return!g||a===void 0?u[g]:a}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(t){typeof t.type=="string"&&(t.type=transitionTypeMap[t.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const percentToProgress=t=>t/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:r=keyframes,repeat:a=0,repeatDelay:l=0,repeatType:u,velocity:d=0}=e;let{keyframes:g}=e;const E=r||keyframes;E!==keyframes&&typeof g[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(g[0],g[1])),g=[0,100]);const P=E({...e,keyframes:g});u==="mirror"&&(this.mirroredGenerator=E({...e,keyframes:[...g].reverse(),velocity:-d})),P.calculatedDuration===null&&(P.calculatedDuration=calcGeneratorDuration(P));const{calculatedDuration:Z}=P;this.calculatedDuration=Z,this.resolvedDuration=Z+l,this.totalDuration=this.resolvedDuration*(a+1)-l,this.generator=P}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:a,totalDuration:l,mixKeyframes:u,mirroredGenerator:d,resolvedDuration:g,calculatedDuration:E}=this;if(this.startTime===null)return a.next(0);const{delay:P=0,keyframes:Z,repeat:me,repeatType:_e,repeatDelay:He,type:Xe,onUpdate:wt,finalKeyframe:Do}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-l/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const sr=this.currentTime-P*(this.playbackSpeed>=0?1:-1),Ko=this.playbackSpeed>=0?sr<0:sr>l;this.currentTime=Math.max(sr,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let Bs=this.currentTime,th=a;if(me){const df=Math.min(this.currentTime,l)/g;let uf=Math.floor(df),li=df%1;!li&&df>=1&&(li=1),li===1&&uf--,uf=Math.min(uf,me+1),!!(uf%2)&&(_e==="reverse"?(li=1-li,He&&(li-=He/g)):_e==="mirror"&&(th=d)),Bs=clamp(0,1,li)*g}const pf=Ko?{done:!1,value:Z[0]}:th.next(Bs);u&&(pf.value=u(pf.value));let{done:_h}=pf;!Ko&&E!==null&&(_h=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const cf=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_h);return cf&&Xe!==inertia&&(pf.value=getFinalKeyframe$1(Z,this.options,Do,this.speed)),wt&&wt(pf.value),cf&&this.finish(),pf}then(e,r){return this.finished.then(e,r)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:r}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),this.options.onPlay?.();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fillWildcards(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const radToDeg=t=>t*180/Math.PI,rotate=t=>{const e=radToDeg(Math.atan2(t[1],t[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate,rotateZ:rotate,skewX:t=>radToDeg(Math.atan(t[1])),skewY:t=>radToDeg(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rebaseAngle=t=>(t=t%360,t<0&&(t+=360),t),rotateZ=rotate,scaleX=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),scaleY=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:t=>(scaleX(t)+scaleY(t))/2,rotateX:t=>rebaseAngle(radToDeg(Math.atan2(t[6],t[5]))),rotateY:t=>rebaseAngle(radToDeg(Math.atan2(-t[2],t[0]))),rotateZ,rotate:rotateZ,skewX:t=>radToDeg(Math.atan(t[4])),skewY:t=>radToDeg(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function defaultTransformValue(t){return t.includes("scale")?1:0}function parseValueFromTransform(t,e){if(!t||t==="none")return defaultTransformValue(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,l;if(r)a=matrix3dParsers,l=r;else{const g=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=matrix2dParsers,l=g}if(!l)return defaultTransformValue(e);const u=a[e],d=l[1].split(",").map(convertTransformToNumber);return typeof u=="function"?u(d):d[u]}const readTransformValue=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return parseValueFromTransform(r,e)};function convertTransformToNumber(t){return parseFloat(t.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=t=>t===number||t===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(t=>!transformKeys.has(t));function removeNonTranslationalTransform(t){const e=[];return nonTranslationalTransformKeys.forEach(r=>{const a=t.getValue(r);a!==void 0&&(e.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>parseValueFromTransform(e,"x"),y:(t,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const t=Array.from(toResolve).filter(a=>a.needsMeasurement),e=new Set(t.map(a=>a.element)),r=new Map;e.forEach(a=>{const l=removeNonTranslationalTransform(a);l.length&&(r.set(a,l),a.render())}),t.forEach(a=>a.measureInitialState()),e.forEach(a=>{a.render();const l=r.get(a);l&&l.forEach(([u,d])=>{a.getValue(u)?.set(d)})}),t.forEach(a=>a.measureEndState()),t.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(t=>t.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,r,a,l,u,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=a,this.motionValue=l,this.element=u,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:a,motionValue:l}=this;if(e[0]===null){const u=l?.get(),d=e[e.length-1];if(u!==void 0)e[0]=u;else if(a&&r){const g=a.readValue(r,d);g!=null&&(e[0]=g)}e[0]===void 0&&(e[0]=d),l&&u===void 0&&l.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=t=>t.startsWith("--");function setStyle(t,e,r){isCSSVar(e)?t.style.setProperty(e,r):t.style[e]=r}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(t,e){const r=memo(t);return()=>supportsFlags[e]??r()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([t,e,r,a])=>`cubic-bezier(${t}, ${e}, ${r}, ${a})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(t,e){if(t)return typeof t=="function"?supportsLinearEasing()?generateLinearEasing(t,e):"ease-out":isBezierDefinition(t)?cubicBezierAsString(t):Array.isArray(t)?t.map(r=>mapEasingToNativeEasing(r,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[t]}function startWaapiAnimation(t,e,r,{delay:a=0,duration:l=300,repeat:u=0,repeatType:d="loop",ease:g="easeOut",times:E}={},P=void 0){const Z={[e]:r};E&&(Z.offset=E);const me=mapEasingToNativeEasing(g,l);Array.isArray(me)&&(Z.easing=me);const _e={delay:a,duration:l,easing:Array.isArray(me)?"linear":me,fill:"both",iterations:u+1,direction:d==="reverse"?"alternate":"normal"};return P&&(_e.pseudoElement=P),t.animate(Z,_e)}function isGenerator(t){return typeof t=="function"&&"applyToOptions"in t}function applyGeneratorOptions({type:t,...e}){return isGenerator(t)&&supportsLinearEasing()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:a,keyframes:l,pseudoElement:u,allowFlatten:d=!1,finalKeyframe:g,onComplete:E}=e;this.isPseudoElement=!!u,this.allowFlatten=d,this.options=e,invariant(typeof e.type!="string");const P=applyGeneratorOptions(e);this.animation=startWaapiAnimation(r,a,l,P,u),P.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const Z=getFinalKeyframe$1(l,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(Z):setStyle(r,a,Z),this.animation.cancel()}E?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop):r(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(t){return t in unsupportedEasingFunctions}function replaceStringEasing(t){typeof t.ease=="string"&&isUnsupportedEase(t.ease)&&(t.ease=unsupportedEasingFunctions[t.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:a,onComplete:l,element:u,...d}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const g=new JSAnimation({...d,autoplay:!1}),E=secondsToMilliseconds(this.finishedTime??this.time);r.setWithVelocity(g.sample(E-sampleDelta).value,g.sample(E).value,sampleDelta),g.stop()}}const isAnimatable=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(complex.test(t)||t==="0")&&!t.startsWith("url("));function hasKeyframesChanged(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function canAnimate(t,e,r,a){const l=t[0];if(l===null)return!1;if(e==="display"||e==="visibility")return!0;const u=t[t.length-1],d=isAnimatable(l,e),g=isAnimatable(u,e);return!d||!g?!1:hasKeyframesChanged(t)||(r==="spring"||isGenerator(r))&&a}function makeAnimationInstant(t){t.duration=0,t.type}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(t){const{motionValue:e,name:r,repeatDelay:a,repeatType:l,damping:u,type:d}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:E,transformTemplate:P}=e.owner.getProps();return supportsWaapi()&&r&&acceleratedValues.has(r)&&(r!=="transform"||!P)&&!E&&!a&&l!=="mirror"&&u!==0&&d!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:r=0,type:a="keyframes",repeat:l=0,repeatDelay:u=0,repeatType:d="loop",keyframes:g,name:E,motionValue:P,element:Z,...me}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const _e={autoplay:e,delay:r,type:a,repeat:l,repeatDelay:u,repeatType:d,name:E,motionValue:P,element:Z,...me},He=Z?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new He(g,(Xe,wt,Do)=>this.onKeyframesResolved(Xe,wt,_e,!Do),E,P,Z),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,r,a,l){this.keyframeResolver=void 0;const{name:u,type:d,velocity:g,delay:E,isHandoff:P,onUpdate:Z}=a;this.resolvedAt=time.now(),canAnimate(e,u,d,g)||((MotionGlobalConfig.instantAnimations||!E)&&Z?.(getFinalKeyframe$1(e,a,r)),e[0]=e[e.length-1],makeAnimationInstant(a),a.repeat=0);const _e={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:e},He=!P&&supportsBrowserAnimation(_e)?new NativeAnimationExtended({..._e,element:_e.motionValue.owner.current}):new JSAnimation(_e);He.finished.then(()=>this.notifyFinished()).catch(noop),this.pendingTimeline&&(this.stopTimeline=He.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=He}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(t){const e=splitCSSVariableRegex.exec(t);if(!e)return[,];const[,r,a,l]=e;return[`--${r??a}`,l]}function getVariableValue(t,e,r=1){const[a,l]=parseCSSVariable(t);if(!a)return;const u=window.getComputedStyle(e).getPropertyValue(a);if(u){const d=u.trim();return isNumericalString(d)?parseFloat(d):d}return isCSSVariableToken(l)?getVariableValue(l,e,r+1):l}function getValueTransition(t,e){return t?.[e]??t?.default??t}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:t=>t==="auto",parse:t=>t},testValueType=t=>e=>e.test(t),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=t=>dimensionValueTypes.find(testValueType(t));function isNone(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||isZeroValueString(t):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[a]=r.match(floatRegex)||[];if(!a)return t;const l=r.replace(a,"");let u=maxDefaults.has(e)?1:0;return a!==r&&(u*=100),e+"("+u+l+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:t=>{const e=t.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):t}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=t=>defaultValueTypes[t];function getAnimatableNone(t,e){let r=getDefaultValueType(t);return r!==filter&&(r=complex),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(t,e,r){let a=0,l;for(;a<t.length&&!l;){const u=t[a];typeof u=="string"&&!invalidTemplates.has(u)&&analyseComplexValue(u).values.length&&(l=t[a]),a++}if(l&&r)for(const u of e)t[u]=getAnimatableNone(r,l)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,r,a,l,u){super(e,r,a,l,u,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let E=0;E<e.length;E++){let P=e[E];if(typeof P=="string"&&(P=P.trim(),isCSSVariableToken(P))){const Z=getVariableValue(P,r.current);Z!==void 0&&(e[E]=Z),E===e.length-1&&(this.finalKeyframe=P)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(a)||e.length!==2)return;const[l,u]=e,d=findDimensionValueType(l),g=findDimensionValueType(u);if(d!==g)if(isNumOrPxType(d)&&isNumOrPxType(g))for(let E=0;E<e.length;E++){const P=e[E];typeof P=="string"&&(e[E]=parseFloat(P))}else positionalValues[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,a=[];for(let l=0;l<e.length;l++)(e[l]===null||isNone(e[l]))&&a.push(l);a.length&&makeNoneKeyframesAnimatable(e,a,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:a}=this;if(!e||!e.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[a](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const l=r[r.length-1];l!==void 0&&e.getValue(a,l).jump(l,!1)}measureEndState(){const{element:e,name:r,unresolvedKeyframes:a}=this;if(!e||!e.current)return;const l=e.getValue(r);l&&l.jump(this.measuredOrigin,!1);const u=a.length-1,d=a[u];a[u]=positionalValues[r](e.measureViewportBox(),window.getComputedStyle(e.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([g,E])=>{e.getValue(g).set(E)}),this.resolveNoneKeyframes()}}function resolveElements(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let a=document;const l=r?.[t]??a.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}const getValueAsType=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function isHTMLElement(t){return isObject(t)&&"offsetHeight"in t}const MAX_VELOCITY_DELTA=30,isFloat=t=>!isNaN(parseFloat(t));class MotionValue{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{const l=time.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new SubscriptionManager);const a=this.events[e].add(r);return e==="change"?()=>{a(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-a}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(t,e){return new MotionValue(t,e)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(t){return t==="x"||t==="y"?isDragging[t]?null:(isDragging[t]=!0,()=>{isDragging[t]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(t,e){const r=resolveElements(t),a=new AbortController,l={passive:!0,...e,signal:a.signal};return[r,l,()=>a.abort()]}function isValidHover(t){return!(t.pointerType==="touch"||isDragActive())}function hover(t,e,r={}){const[a,l,u]=setupGesture(t,r),d=g=>{if(!isValidHover(g))return;const{target:E}=g,P=e(E,g);if(typeof P!="function"||!E)return;const Z=me=>{isValidHover(me)&&(P(me),E.removeEventListener("pointerleave",Z))};E.addEventListener("pointerleave",Z,l)};return a.forEach(g=>{g.addEventListener("pointerenter",d,l)}),u}const isNodeOrChild=(t,e)=>e?t===e?!0:isNodeOrChild(t,e.parentElement):!1,isPrimaryPointer=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(t){return focusableElements.has(t.tagName)||t.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(t){return e=>{e.key==="Enter"&&t(e)}}function firePointerEvent(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(t,e)=>{const r=t.currentTarget;if(!r)return;const a=filterEvents(()=>{if(isPressing.has(r))return;firePointerEvent(r,"down");const l=filterEvents(()=>{firePointerEvent(r,"up")}),u=()=>firePointerEvent(r,"cancel");r.addEventListener("keyup",l,e),r.addEventListener("blur",u,e)});r.addEventListener("keydown",a,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),e)};function isValidPressEvent(t){return isPrimaryPointer(t)&&!isDragActive()}function press(t,e,r={}){const[a,l,u]=setupGesture(t,r),d=g=>{const E=g.currentTarget;if(!isValidPressEvent(g))return;isPressing.add(E);const P=e(E,g),Z=(He,Xe)=>{window.removeEventListener("pointerup",me),window.removeEventListener("pointercancel",_e),isPressing.has(E)&&isPressing.delete(E),isValidPressEvent(He)&&typeof P=="function"&&P(He,{success:Xe})},me=He=>{Z(He,E===window||E===document||r.useGlobalTarget||isNodeOrChild(E,He.target))},_e=He=>{Z(He,!1)};window.addEventListener("pointerup",me,l),window.addEventListener("pointercancel",_e,l)};return a.forEach(g=>{(r.useGlobalTarget?window:g).addEventListener("pointerdown",d,l),isHTMLElement(g)&&(g.addEventListener("focus",P=>enableKeyboardPress(P,l)),!isElementKeyboardAccessible(g)&&!g.hasAttribute("tabindex")&&(g.tabIndex=0))}),u}function isSVGElement(t){return isObject(t)&&"ownerSVGElement"in t}function isSVGSVGElement(t){return isSVGElement(t)&&t.tagName==="svg"}const isMotionValue=t=>!!(t&&t.getVelocity),valueTypes=[...dimensionValueTypes,color,complex],findValueType=t=>valueTypes.find(testValueType(t)),MotionConfigContext=reactExports.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function usePresence(t=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:l}=e,u=reactExports.useId();reactExports.useEffect(()=>{if(t)return l(u)},[t]);const d=reactExports.useCallback(()=>t&&a&&a(u),[u,a,t]);return!r&&a?[!1,d]:[!0]}const LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const t in featureProps)featureDefinitions[t]={isEnabled:e=>featureProps[t].some(r=>!!e[r])};function loadFeatures(t){for(const e in t)featureDefinitions[e]={...featureDefinitions[e],...t[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||validMotionProps.has(t)}let shouldForward=t=>!isValidMotionProp(t);function loadExternalIsValidProp(t){typeof t=="function"&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):t(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(t,e,r){const a={};for(const l in t)l==="values"&&typeof t.values=="object"||(shouldForward(l)||r===!0&&isValidMotionProp(l)||!e&&!isValidMotionProp(l)||t.draggable&&l.startsWith("onDrag"))&&(a[l]=t[l]);return a}const MotionContext=reactExports.createContext({});function isAnimationControls(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function isVariantLabel(t){return typeof t=="string"||Array.isArray(t)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(t){return isAnimationControls(t.animate)||variantProps.some(e=>isVariantLabel(t[e]))}function isVariantNode(t){return!!(isControllingVariants(t)||t.variants)}function getCurrentTreeVariants(t,e){if(isControllingVariants(t)){const{initial:r,animate:a}=t;return{initial:r===!1||isVariantLabel(r)?r:void 0,animate:isVariantLabel(a)?a:void 0}}return t.inherit!==!1?e:{}}function useCreateMotionContext(t){const{initial:e,animate:r}=getCurrentTreeVariants(t,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:r}),[variantLabelsAsDependency(e),variantLabelsAsDependency(r)])}function variantLabelsAsDependency(t){return Array.isArray(t)?t.join(" "):t}const scaleCorrectors={};function addScaleCorrector(t){for(const e in t)scaleCorrectors[e]=t[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(t,{layout:e,layoutId:r}){return transformProps.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!scaleCorrectors[t]||t==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(t,e,r){let a="",l=!0;for(let u=0;u<numTransforms;u++){const d=transformPropOrder[u],g=t[d];if(g===void 0)continue;let E=!0;if(typeof g=="number"?E=g===(d.startsWith("scale")?1:0):E=parseFloat(g)===0,!E||r){const P=getValueAsType(g,numberValueTypes[d]);if(!E){l=!1;const Z=translateAlias[d]||d;a+=`${Z}(${P}) `}r&&(e[d]=P)}}return a=a.trim(),r?a=r(e,l?"":a):l&&(a="none"),a}function buildHTMLStyles(t,e,r){const{style:a,vars:l,transformOrigin:u}=t;let d=!1,g=!1;for(const E in e){const P=e[E];if(transformProps.has(E)){d=!0;continue}else if(isCSSVariableName(E)){l[E]=P;continue}else{const Z=getValueAsType(P,numberValueTypes[E]);E.startsWith("origin")?(g=!0,u[E]=Z):a[E]=Z}}if(e.transform||(d||r?a.transform=buildTransform(e,t.transform,r):a.transform&&(a.transform="none")),g){const{originX:E="50%",originY:P="50%",originZ:Z=0}=u;a.transformOrigin=`${E} ${P} ${Z}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(t,e,r){for(const a in e)!isMotionValue(e[a])&&!isForcedMotionValue(a,r)&&(t[a]=e[a])}function useInitialMotionValues({transformTemplate:t},e){return reactExports.useMemo(()=>{const r=createHtmlRenderState();return buildHTMLStyles(r,e,t),Object.assign({},r.vars,r.style)},[e])}function useStyle(t,e){const r=t.style||{},a={};return copyRawValuesOnly(a,r,t),Object.assign(a,useInitialMotionValues(t,e)),a}function useHTMLProps(t,e){const r={},a=useStyle(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=a,r}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(t,e,r=1,a=0,l=!0){t.pathLength=1;const u=l?dashKeys:camelKeys;t[u.offset]=px.transform(-a);const d=px.transform(e),g=px.transform(r);t[u.array]=`${d} ${g}`}function buildSVGAttrs(t,{attrX:e,attrY:r,attrScale:a,pathLength:l,pathSpacing:u=1,pathOffset:d=0,...g},E,P,Z){if(buildHTMLStyles(t,g,P),E){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:me,style:_e}=t;me.transform&&(_e.transform=me.transform,delete me.transform),(_e.transform||me.transformOrigin)&&(_e.transformOrigin=me.transformOrigin??"50% 50%",delete me.transformOrigin),_e.transform&&(_e.transformBox=Z?.transformBox??"fill-box",delete me.transformBox),e!==void 0&&(me.x=e),r!==void 0&&(me.y=r),a!==void 0&&(me.scale=a),l!==void 0&&buildSVGPath(me,l,u,d,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=t=>typeof t=="string"&&t.toLowerCase()==="svg";function useSVGProps(t,e,r,a){const l=reactExports.useMemo(()=>{const u=createSvgRenderState();return buildSVGAttrs(u,e,isSVGTag(a),t.transformTemplate,t.style),{...u.attrs,style:{...u.style}}},[e]);if(t.style){const u={};copyRawValuesOnly(u,t.style,t),l.style={...u,...l.style}}return l}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(t){return typeof t!="string"||t.includes("-")?!1:!!(lowercaseSVGElements.indexOf(t)>-1||/[A-Z]/u.test(t))}function useRender(t,e,r,{latestValues:a},l,u=!1){const g=(isSVGComponent(t)?useSVGProps:useHTMLProps)(e,a,l,t),E=filterProps(e,typeof t=="string",u),P=t!==reactExports.Fragment?{...E,...g,ref:r}:{},{children:Z}=e,me=reactExports.useMemo(()=>isMotionValue(Z)?Z.get():Z,[Z]);return reactExports.createElement(t,{...P,children:me})}function getValueState(t){const e=[{},{}];return t?.values.forEach((r,a)=>{e[0][a]=r.get(),e[1][a]=r.getVelocity()}),e}function resolveVariantFromProps(t,e,r,a){if(typeof e=="function"){const[l,u]=getValueState(a);e=e(r!==void 0?r:t.custom,l,u)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[l,u]=getValueState(a);e=e(r!==void 0?r:t.custom,l,u)}return e}function resolveMotionValue(t){return isMotionValue(t)?t.get():t}function makeState({scrapeMotionValuesFromProps:t,createRenderState:e},r,a,l){return{latestValues:makeLatestValues(r,a,l,t),renderState:e()}}function makeLatestValues(t,e,r,a){const l={},u=a(t,{});for(const _e in u)l[_e]=resolveMotionValue(u[_e]);let{initial:d,animate:g}=t;const E=isControllingVariants(t),P=isVariantNode(t);e&&P&&!E&&t.inherit!==!1&&(d===void 0&&(d=e.initial),g===void 0&&(g=e.animate));let Z=r?r.initial===!1:!1;Z=Z||d===!1;const me=Z?g:d;if(me&&typeof me!="boolean"&&!isAnimationControls(me)){const _e=Array.isArray(me)?me:[me];for(let He=0;He<_e.length;He++){const Xe=resolveVariantFromProps(t,_e[He]);if(Xe){const{transitionEnd:wt,transition:Do,...sr}=Xe;for(const Ko in sr){let Bs=sr[Ko];if(Array.isArray(Bs)){const th=Z?Bs.length-1:0;Bs=Bs[th]}Bs!==null&&(l[Ko]=Bs)}for(const Ko in wt)l[Ko]=wt[Ko]}}}return l}const makeUseVisualState=t=>(e,r)=>{const a=reactExports.useContext(MotionContext),l=reactExports.useContext(PresenceContext),u=()=>makeState(t,e,a,l);return r?u():useConstant(u)};function scrapeMotionValuesFromProps$1(t,e,r){const{style:a}=t,l={};for(const u in a)(isMotionValue(a[u])||e.style&&isMotionValue(e.style[u])||isForcedMotionValue(u,t)||r?.getValue(u)?.liveStyle!==void 0)&&(l[u]=a[u]);return l}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(t,e,r){const a=scrapeMotionValuesFromProps$1(t,e,r);for(const l in t)if(isMotionValue(t[l])||isMotionValue(e[l])){const u=transformPropOrder.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;a[u]=t[l]}return a}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function useMotionRef(t,e,r){return reactExports.useCallback(a=>{a&&t.onMount&&t.onMount(a),e&&(a?e.mount(a):e.unmount()),r&&(typeof r=="function"?r(a):isRefObject(r)&&(r.current=a))},[e])}const camelToDash=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(t,e,r,a,l){const{visualElement:u}=reactExports.useContext(MotionContext),d=reactExports.useContext(LazyContext),g=reactExports.useContext(PresenceContext),E=reactExports.useContext(MotionConfigContext).reducedMotion,P=reactExports.useRef(null);a=a||d.renderer,!P.current&&a&&(P.current=a(t,{visualState:e,parent:u,props:r,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:E}));const Z=P.current,me=reactExports.useContext(SwitchLayoutGroupContext);Z&&!Z.projection&&l&&(Z.type==="html"||Z.type==="svg")&&createProjectionNode$1(P.current,r,l,me);const _e=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{Z&&_e.current&&Z.update(r,g)});const He=r[optimizedAppearDataAttribute],Xe=reactExports.useRef(!!He&&!window.MotionHandoffIsComplete?.(He)&&window.MotionHasOptimisedAnimation?.(He));return useIsomorphicLayoutEffect(()=>{Z&&(_e.current=!0,window.MotionIsMounted=!0,Z.updateFeatures(),Z.scheduleRenderMicrotask(),Xe.current&&Z.animationState&&Z.animationState.animateChanges())}),reactExports.useEffect(()=>{Z&&(!Xe.current&&Z.animationState&&Z.animationState.animateChanges(),Xe.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(He)}),Xe.current=!1),Z.enteringChildren=void 0)}),Z}function createProjectionNode$1(t,e,r,a){const{layoutId:l,layout:u,drag:d,dragConstraints:g,layoutScroll:E,layoutRoot:P,layoutCrossfade:Z}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(t.parent)),t.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!d||g&&isRefObject(g),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:a,crossfade:Z,layoutScroll:E,layoutRoot:P})}function getClosestProjectingNode(t){if(t)return t.options.allowProjection!==!1?t.projection:getClosestProjectingNode(t.parent)}function createMotionComponent(t,{forwardMotionProps:e=!1}={},r,a){r&&loadFeatures(r);const l=isSVGComponent(t)?useSVGVisualState:useHTMLVisualState;function u(g,E){let P;const Z={...reactExports.useContext(MotionConfigContext),...g,layoutId:useLayoutId(g)},{isStatic:me}=Z,_e=useCreateMotionContext(g),He=l(g,me);if(!me&&isBrowser){useStrictMode();const Xe=getProjectionFunctionality(Z);P=Xe.MeasureLayout,_e.visualElement=useVisualElement(t,He,Z,a,Xe.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:_e,children:[P&&_e.visualElement?jsxRuntimeExports.jsx(P,{visualElement:_e.visualElement,...Z}):null,useRender(t,g,useMotionRef(He,_e.visualElement,E),He,me,e)]})}u.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const d=reactExports.forwardRef(u);return d[motionComponentSymbol]=t,d}function useLayoutId({layoutId:t}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&t!==void 0?e+"-"+t:t}function useStrictMode(t,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(t){const{drag:e,layout:r}=featureDefinitions;if(!e&&!r)return{};const a={...e,...r};return{MeasureLayout:e?.isEnabled(t)||r?.isEnabled(t)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function createMotionProxy(t,e){if(typeof Proxy>"u")return createMotionComponent;const r=new Map,a=(u,d)=>createMotionComponent(u,d,t,e),l=(u,d)=>a(u,d);return new Proxy(l,{get:(u,d)=>d==="create"?a:(r.has(d)||r.set(d,createMotionComponent(d,void 0,t,e)),r.get(d))})}function convertBoundingBoxToBox({top:t,left:e,right:r,bottom:a}){return{x:{min:e,max:r},y:{min:t,max:a}}}function convertBoxToBoundingBox({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function transformBoxPoints(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),a=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function isIdentityScale(t){return t===void 0||t===1}function hasScale({scale:t,scaleX:e,scaleY:r}){return!isIdentityScale(t)||!isIdentityScale(e)||!isIdentityScale(r)}function hasTransform(t){return hasScale(t)||has2DTranslate(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function has2DTranslate(t){return is2DTranslate(t.x)||is2DTranslate(t.y)}function is2DTranslate(t){return t&&t!=="0%"}function scalePoint(t,e,r){const a=t-r,l=e*a;return r+l}function applyPointDelta(t,e,r,a,l){return l!==void 0&&(t=scalePoint(t,l,a)),scalePoint(t,r,a)+e}function applyAxisDelta(t,e=0,r=1,a,l){t.min=applyPointDelta(t.min,e,r,a,l),t.max=applyPointDelta(t.max,e,r,a,l)}function applyBoxDelta(t,{x:e,y:r}){applyAxisDelta(t.x,e.translate,e.scale,e.originPoint),applyAxisDelta(t.y,r.translate,r.scale,r.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(t,e,r,a=!1){const l=r.length;if(!l)return;e.x=e.y=1;let u,d;for(let g=0;g<l;g++){u=r[g],d=u.projectionDelta;const{visualElement:E}=u.options;E&&E.props.style&&E.props.style.display==="contents"||(a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&transformBox(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),d&&(e.x*=d.x.scale,e.y*=d.y.scale,applyBoxDelta(t,d)),a&&hasTransform(u.latestValues)&&transformBox(t,u.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(t,e){t.min=t.min+e,t.max=t.max+e}function transformAxis(t,e,r,a,l=.5){const u=mixNumber$1(t.min,t.max,l);applyAxisDelta(t,e,r,u,a)}function transformBox(t,e){transformAxis(t.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(t.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(t,e){return convertBoundingBoxToBox(transformBoxPoints(t.getBoundingClientRect(),e))}function measurePageBox(t,e,r){const a=measureViewportBox(t,r),{scroll:l}=e;return l&&(translateAxis(a.x,l.offset.x),translateAxis(a.y,l.offset.y)),a}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=t.matches;t.addEventListener("change",e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(t,e,r){for(const a in e){const l=e[a],u=r[a];if(isMotionValue(l))t.addValue(a,l);else if(isMotionValue(u))t.addValue(a,motionValue(l,{owner:t}));else if(u!==l)if(t.hasValue(a)){const d=t.getValue(a);d.liveStyle===!0?d.jump(l):d.hasAnimated||d.set(l)}else{const d=t.getStaticValue(a);t.addValue(a,motionValue(d!==void 0?d:l,{owner:t}))}}for(const a in r)e[a]===void 0&&t.removeValue(a);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,r,a){return{}}constructor({parent:e,props:r,presenceContext:a,reducedMotionConfig:l,blockInitialAnimation:u,visualState:d},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _e=time.now();this.renderScheduledAt<_e&&(this.renderScheduledAt=_e,frame.render(this.render,!1,!0))};const{latestValues:E,renderState:P}=d;this.latestValues=E,this.baseTarget={...E},this.initialValues=r.initial?{...E}:{},this.renderState=P,this.parent=e,this.props=r,this.presenceContext=a,this.depth=e?e.depth+1:0,this.reducedMotionConfig=l,this.options=g,this.blockInitialAnimation=!!u,this.isControllingVariants=isControllingVariants(r),this.isVariantNode=isVariantNode(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:Z,...me}=this.scrapeMotionValuesFromProps(r,{},this);for(const _e in me){const He=me[_e];E[_e]!==void 0&&isMotionValue(He)&&He.set(E[_e])}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const a=transformProps.has(e);a&&this.onBindTransform&&this.onBindTransform();const l=r.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&frame.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{l(),u&&u(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const r=featureDefinitions[e];if(!r)continue;const{isEnabled:a,Feature:l}=r;if(!this.features[e]&&l&&a(this.props)&&(this.features[e]=new l(this)),this.features[e]){const u=this.features[e];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<propEventHandlers.length;a++){const l=propEventHandlers[a];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const u="on"+l,d=e[u];d&&(this.propEventSubscriptions[l]=this.on(l,d))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const a=this.values.get(e);r!==a&&(a&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let a=this.values.get(e);return a===void 0&&r!==void 0&&(a=motionValue(r===null?void 0:r,{owner:this}),this.addValue(e,a)),a}readValue(e,r){let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(isNumericalString(a)||isZeroValueString(a))?a=parseFloat(a):!findValueType(a)&&complex.test(r)&&(a=getAnimatableNone(e,r)),this.setBaseTarget(e,isMotionValue(a)?a.get():a)),isMotionValue(a)?a.get():a}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const u=resolveVariantFromProps(this.props,r,this.presenceContext?.custom);u&&(a=u[e])}if(r&&a!==void 0)return a;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!isMotionValue(l)?l:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:a}){delete r[e],delete a[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function renderHTML(t,{style:e,vars:r},a,l){const u=t.style;let d;for(d in e)u[d]=e[d];l?.applyProjectionStyles(u,a);for(d in r)u.setProperty(d,r[d])}function getComputedStyle$1(t){return window.getComputedStyle(t)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,r){if(transformProps.has(r))return this.projection?.isProjecting?defaultTransformValue(r):readTransformValue(e,r);{const a=getComputedStyle$1(e),l=(isCSSVariableName(r)?a.getPropertyValue(r):a[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:r}){return measureViewportBox(e,r)}build(e,r,a){buildHTMLStyles(e,r,a.transformTemplate)}scrapeMotionValuesFromProps(e,r,a){return scrapeMotionValuesFromProps$1(e,r,a)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(t,e,r,a){renderHTML(t,e,void 0,a);for(const l in e.attrs)t.setAttribute(camelCaseAttributes.has(l)?l:camelToDash(l),e.attrs[l])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(transformProps.has(r)){const a=getDefaultValueType(r);return a&&a.default||0}return r=camelCaseAttributes.has(r)?r:camelToDash(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,a){return scrapeMotionValuesFromProps(e,r,a)}build(e,r,a){buildSVGAttrs(e,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(e,r,a,l){renderSVG(e,r,a,l)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(t,e)=>isSVGComponent(t)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:t!==reactExports.Fragment});function resolveVariant(t,e,r){const a=t.getProps();return resolveVariantFromProps(a,e,r!==void 0?r:a.custom,t)}const isKeyframesTarget=t=>Array.isArray(t);function setMotionValue(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,motionValue(r))}function resolveFinalValueInKeyframes(t){return isKeyframesTarget(t)?t[t.length-1]||0:t}function setTarget(t,e){const r=resolveVariant(t,e);let{transitionEnd:a={},transition:l={},...u}=r||{};u={...u,...a};for(const d in u){const g=resolveFinalValueInKeyframes(u[d]);setMotionValue(t,d,g)}}function isWillChangeMotionValue(t){return!!(isMotionValue(t)&&t.add)}function addValueToWillChange(t,e){const r=t.getValue("willChange");if(isWillChangeMotionValue(r))return r.add(e);if(!r&&MotionGlobalConfig.WillChange){const a=new MotionGlobalConfig.WillChange("auto");t.addValue("willChange",a),a.add(e)}}function getOptimisedAppearId(t){return t.props[optimizedAppearDataAttribute]}const isNotNull=t=>t!==null;function getFinalKeyframe(t,{repeat:e,repeatType:r="loop"},a){const l=t.filter(isNotNull),u=e&&r!=="loop"&&e%2===1?0:l.length-1;return l[u]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(t,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(t)?t.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:t,delay:e,delayChildren:r,staggerChildren:a,staggerDirection:l,repeat:u,repeatType:d,repeatDelay:g,from:E,elapsed:P,...Z}){return!!Object.keys(Z).length}const animateMotionValue=(t,e,r,a={},l,u)=>d=>{const g=getValueTransition(a,t)||{},E=g.delay||a.delay||0;let{elapsed:P=0}=a;P=P-secondsToMilliseconds(E);const Z={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...g,delay:-P,onUpdate:_e=>{e.set(_e),g.onUpdate&&g.onUpdate(_e)},onComplete:()=>{d(),g.onComplete&&g.onComplete()},name:t,motionValue:e,element:u?void 0:l};isTransitionDefined(g)||Object.assign(Z,getDefaultTransition(t,Z)),Z.duration&&(Z.duration=secondsToMilliseconds(Z.duration)),Z.repeatDelay&&(Z.repeatDelay=secondsToMilliseconds(Z.repeatDelay)),Z.from!==void 0&&(Z.keyframes[0]=Z.from);let me=!1;if((Z.type===!1||Z.duration===0&&!Z.repeatDelay)&&(makeAnimationInstant(Z),Z.delay===0&&(me=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(me=!0,makeAnimationInstant(Z),Z.delay=0),Z.allowFlatten=!g.type&&!g.ease,me&&!u&&e.get()!==void 0){const _e=getFinalKeyframe(Z.keyframes,g);if(_e!==void 0){frame.update(()=>{Z.onUpdate(_e),Z.onComplete()});return}}return g.isSync?new JSAnimation(Z):new AsyncMotionValueAnimation(Z)};function shouldBlockAnimation({protectedKeys:t,needsAnimating:e},r){const a=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,a}function animateTarget(t,e,{delay:r=0,transitionOverride:a,type:l}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:d,...g}=e;a&&(u=a);const E=[],P=l&&t.animationState&&t.animationState.getState()[l];for(const Z in g){const me=t.getValue(Z,t.latestValues[Z]??null),_e=g[Z];if(_e===void 0||P&&shouldBlockAnimation(P,Z))continue;const He={delay:r,...getValueTransition(u||{},Z)},Xe=me.get();if(Xe!==void 0&&!me.isAnimating&&!Array.isArray(_e)&&_e===Xe&&!He.velocity)continue;let wt=!1;if(window.MotionHandoffAnimation){const sr=getOptimisedAppearId(t);if(sr){const Ko=window.MotionHandoffAnimation(sr,Z,frame);Ko!==null&&(He.startTime=Ko,wt=!0)}}addValueToWillChange(t,Z),me.start(animateMotionValue(Z,me,_e,t.shouldReduceMotion&&positionalKeys.has(Z)?{type:!1}:He,t,wt));const Do=me.animation;Do&&E.push(Do)}return d&&Promise.all(E).then(()=>{frame.update(()=>{d&&setTarget(t,d)})}),E}function calcChildStagger(t,e,r,a=0,l=1){const u=Array.from(t).sort((P,Z)=>P.sortNodePosition(Z)).indexOf(e),d=t.size,g=(d-1)*a;return typeof r=="function"?r(u,d):l===1?u*a:g-u*a}function animateVariant(t,e,r={}){const a=resolveVariant(t,e,r.type==="exit"?t.presenceContext?.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(l=r.transitionOverride);const u=a?()=>Promise.all(animateTarget(t,a,r)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(E=0)=>{const{delayChildren:P=0,staggerChildren:Z,staggerDirection:me}=l;return animateChildren(t,e,E,P,Z,me,r)}:()=>Promise.resolve(),{when:g}=l;if(g){const[E,P]=g==="beforeChildren"?[u,d]:[d,u];return E().then(()=>P())}else return Promise.all([u(),d(r.delay)])}function animateChildren(t,e,r=0,a=0,l=0,u=1,d){const g=[];for(const E of t.variantChildren)E.notify("AnimationStart",e),g.push(animateVariant(E,e,{...d,delay:r+(typeof a=="function"?0:a)+calcChildStagger(t.variantChildren,E,a,l,u)}).then(()=>E.notify("AnimationComplete",e)));return Promise.all(g)}function animateVisualElement(t,e,r={}){t.notify("AnimationStart",e);let a;if(Array.isArray(e)){const l=e.map(u=>animateVariant(t,u,r));a=Promise.all(l)}else if(typeof e=="string")a=animateVariant(t,e,r);else{const l=typeof e=="function"?resolveVariant(t,e,r.custom):e;a=Promise.all(animateTarget(t,l,r))}return a.then(()=>{t.notify("AnimationComplete",e)})}function shallowCompare(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let a=0;a<r;a++)if(e[a]!==t[a])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?getVariantContext(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<numVariantProps;r++){const a=variantProps[r],l=t.props[a];(isVariantLabel(l)||l===!1)&&(e[a]=l)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(t){return e=>Promise.all(e.map(({animation:r,options:a})=>animateVisualElement(t,r,a)))}function createAnimationState(t){let e=animateList(t),r=createState(),a=!0;const l=E=>(P,Z)=>{const me=resolveVariant(t,Z,E==="exit"?t.presenceContext?.custom:void 0);if(me){const{transition:_e,transitionEnd:He,...Xe}=me;P={...P,...Xe,...He}}return P};function u(E){e=E(t)}function d(E){const{props:P}=t,Z=getVariantContext(t.parent)||{},me=[],_e=new Set;let He={},Xe=1/0;for(let Do=0;Do<numAnimationTypes;Do++){const sr=reversePriorityOrder[Do],Ko=r[sr],Bs=P[sr]!==void 0?P[sr]:Z[sr],th=isVariantLabel(Bs),pf=sr===E?Ko.isActive:null;pf===!1&&(Xe=Do);let _h=Bs===Z[sr]&&Bs!==P[sr]&&th;if(_h&&a&&t.manuallyAnimateOnMount&&(_h=!1),Ko.protectedKeys={...He},!Ko.isActive&&pf===null||!Bs&&!Ko.prevProp||isAnimationControls(Bs)||typeof Bs=="boolean")continue;const cf=checkVariantsDidChange(Ko.prevProp,Bs);let df=cf||sr===E&&Ko.isActive&&!_h&&th||Do>Xe&&th,uf=!1;const li=Array.isArray(Bs)?Bs:[Bs];let Vc=li.reduce(l(sr),{});pf===!1&&(Vc={});const{prevResolvedValues:Rs={}}=Ko,qc={...Rs,...Vc},Qp=gf=>{df=!0,_e.has(gf)&&(uf=!0,_e.delete(gf)),Ko.needsAnimating[gf]=!0;const yh=t.getValue(gf);yh&&(yh.liveStyle=!1)};for(const gf in qc){const yh=Vc[gf],ff=Rs[gf];if(He.hasOwnProperty(gf))continue;let e1=!1;isKeyframesTarget(yh)&&isKeyframesTarget(ff)?e1=!shallowCompare(yh,ff):e1=yh!==ff,e1?yh!=null?Qp(gf):_e.add(gf):yh!==void 0&&_e.has(gf)?Qp(gf):Ko.protectedKeys[gf]=!0}Ko.prevProp=Bs,Ko.prevResolvedValues=Vc,Ko.isActive&&(He={...He,...Vc}),a&&t.blockInitialAnimation&&(df=!1);const n1=_h&&cf;df&&(!n1||uf)&&me.push(...li.map(gf=>{const yh={type:sr};if(typeof gf=="string"&&a&&!n1&&t.manuallyAnimateOnMount&&t.parent){const{parent:ff}=t,e1=resolveVariant(ff,gf);if(ff.enteringChildren&&e1){const{delayChildren:s1}=e1.transition||{};yh.delay=calcChildStagger(ff.enteringChildren,t,s1)}}return{animation:gf,options:yh}}))}if(_e.size){const Do={};if(typeof P.initial!="boolean"){const sr=resolveVariant(t,Array.isArray(P.initial)?P.initial[0]:P.initial);sr&&sr.transition&&(Do.transition=sr.transition)}_e.forEach(sr=>{const Ko=t.getBaseTarget(sr),Bs=t.getValue(sr);Bs&&(Bs.liveStyle=!0),Do[sr]=Ko??null}),me.push({animation:Do})}let wt=!!me.length;return a&&(P.initial===!1||P.initial===P.animate)&&!t.manuallyAnimateOnMount&&(wt=!1),a=!1,wt?e(me):Promise.resolve()}function g(E,P){if(r[E].isActive===P)return Promise.resolve();t.variantChildren?.forEach(me=>me.animationState?.setActive(E,P)),r[E].isActive=P;const Z=d(E);for(const me in r)r[me].protectedKeys={};return Z}return{animateChanges:d,setActive:g,setAnimateFunction:u,getState:()=>r,reset:()=>{r=createState(),a=!0}}}function checkVariantsDidChange(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!shallowCompare(e,t):!1}function createTypeState(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const l=this.node.animationState.setActive("exit",!e);r&&!e&&l.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(t,e,r,a={passive:!0}){return t.addEventListener(e,r,a),()=>t.removeEventListener(e,r)}function extractEventInfo(t){return{point:{x:t.pageX,y:t.pageY}}}const addPointerInfo=t=>e=>isPrimaryPointer(e)&&t(e,extractEventInfo(e));function addPointerEvent(t,e,r,a){return addDomEvent(t,e,addPointerInfo(r),a)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(t){return t.max-t.min}function isNear(t,e,r){return Math.abs(t-e)<=r}function calcAxisDelta(t,e,r,a=.5){t.origin=a,t.originPoint=mixNumber$1(e.min,e.max,t.origin),t.scale=calcLength(r)/calcLength(e),t.translate=mixNumber$1(r.min,r.max,t.origin)-t.originPoint,(t.scale>=SCALE_MIN&&t.scale<=SCALE_MAX||isNaN(t.scale))&&(t.scale=1),(t.translate>=TRANSLATE_MIN&&t.translate<=TRANSLATE_MAX||isNaN(t.translate))&&(t.translate=0)}function calcBoxDelta(t,e,r,a){calcAxisDelta(t.x,e.x,r.x,a?a.originX:void 0),calcAxisDelta(t.y,e.y,r.y,a?a.originY:void 0)}function calcRelativeAxis(t,e,r){t.min=r.min+e.min,t.max=t.min+calcLength(e)}function calcRelativeBox(t,e,r){calcRelativeAxis(t.x,e.x,r.x),calcRelativeAxis(t.y,e.y,r.y)}function calcRelativeAxisPosition(t,e,r){t.min=e.min-r.min,t.max=t.min+calcLength(e)}function calcRelativePosition(t,e,r){calcRelativeAxisPosition(t.x,e.x,r.x),calcRelativeAxisPosition(t.y,e.y,r.y)}function eachAxis(t){return[t("x"),t("y")]}const getContextWindow=({current:t})=>t?t.ownerDocument.defaultView:null,distance=(t,e)=>Math.abs(t-e);function distance2D(t,e){const r=distance(t.x,e.x),a=distance(t.y,e.y);return Math.sqrt(r**2+a**2)}class PanSession{constructor(e,r,{transformPagePoint:a,contextWindow:l=window,dragSnapToOrigin:u=!1,distanceThreshold:d=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _e=getPanInfo(this.lastMoveEventInfo,this.history),He=this.startEvent!==null,Xe=distance2D(_e.offset,{x:0,y:0})>=this.distanceThreshold;if(!He&&!Xe)return;const{point:wt}=_e,{timestamp:Do}=frameData;this.history.push({...wt,timestamp:Do});const{onStart:sr,onMove:Ko}=this.handlers;He||(sr&&sr(this.lastMoveEvent,_e),this.startEvent=this.lastMoveEvent),Ko&&Ko(this.lastMoveEvent,_e)},this.handlePointerMove=(_e,He)=>{this.lastMoveEvent=_e,this.lastMoveEventInfo=transformPoint(He,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(_e,He)=>{this.end();const{onEnd:Xe,onSessionEnd:wt,resumeAnimation:Do}=this.handlers;if(this.dragSnapToOrigin&&Do&&Do(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const sr=getPanInfo(_e.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(He,this.transformPagePoint),this.history);this.startEvent&&Xe&&Xe(_e,sr),wt&&wt(_e,sr)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=u,this.handlers=r,this.transformPagePoint=a,this.distanceThreshold=d,this.contextWindow=l||window;const g=extractEventInfo(e),E=transformPoint(g,this.transformPagePoint),{point:P}=E,{timestamp:Z}=frameData;this.history=[{...P,timestamp:Z}];const{onSessionStart:me}=r;me&&me(e,getPanInfo(E,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(t,e){return e?{point:e(t.point)}:t}function subtractPoint(t,e){return{x:t.x-e.x,y:t.y-e.y}}function getPanInfo({point:t},e){return{point:t,delta:subtractPoint(t,lastDevicePoint(e)),offset:subtractPoint(t,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(t){return t[0]}function lastDevicePoint(t){return t[t.length-1]}function getVelocity(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,a=null;const l=lastDevicePoint(t);for(;r>=0&&(a=t[r],!(l.timestamp-a.timestamp>secondsToMilliseconds(e)));)r--;if(!a)return{x:0,y:0};const u=millisecondsToSeconds(l.timestamp-a.timestamp);if(u===0)return{x:0,y:0};const d={x:(l.x-a.x)/u,y:(l.y-a.y)/u};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function applyConstraints(t,{min:e,max:r},a){return e!==void 0&&t<e?t=a?mixNumber$1(e,t,a.min):Math.max(t,e):r!==void 0&&t>r&&(t=a?mixNumber$1(r,t,a.max):Math.min(t,r)),t}function calcRelativeAxisConstraints(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function calcRelativeConstraints(t,{top:e,left:r,bottom:a,right:l}){return{x:calcRelativeAxisConstraints(t.x,r,l),y:calcRelativeAxisConstraints(t.y,e,a)}}function calcViewportAxisConstraints(t,e){let r=e.min-t.min,a=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,a]=[a,r]),{min:r,max:a}}function calcViewportConstraints(t,e){return{x:calcViewportAxisConstraints(t.x,e.x),y:calcViewportAxisConstraints(t.y,e.y)}}function calcOrigin(t,e){let r=.5;const a=calcLength(t),l=calcLength(e);return l>a?r=progress(e.min,e.max-a,t.min):a>l&&(r=progress(t.min,t.max-l,e.min)),clamp(0,1,r)}function rebaseAxisConstraints(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const defaultElastic=.35;function resolveDragElastic(t=defaultElastic){return t===!1?t=0:t===!0&&(t=defaultElastic),{x:resolveAxisElastic(t,"left","right"),y:resolveAxisElastic(t,"top","bottom")}}function resolveAxisElastic(t,e,r){return{min:resolvePointElastic(t,e),max:resolvePointElastic(t,r)}}function resolvePointElastic(t,e){return typeof t=="number"?t:t[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:a}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const u=me=>{const{dragSnapToOrigin:_e}=this.getProps();_e?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(extractEventInfo(me).point)},d=(me,_e)=>{const{drag:He,dragPropagation:Xe,onDragStart:wt}=this.getProps();if(He&&!Xe&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(He),!this.openDragLock))return;this.latestPointerEvent=me,this.latestPanInfo=_e,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(sr=>{let Ko=this.getAxisMotionValue(sr).get()||0;if(percent.test(Ko)){const{projection:Bs}=this.visualElement;if(Bs&&Bs.layout){const th=Bs.layout.layoutBox[sr];th&&(Ko=calcLength(th)*(parseFloat(Ko)/100))}}this.originPoint[sr]=Ko}),wt&&frame.postRender(()=>wt(me,_e)),addValueToWillChange(this.visualElement,"transform");const{animationState:Do}=this.visualElement;Do&&Do.setActive("whileDrag",!0)},g=(me,_e)=>{this.latestPointerEvent=me,this.latestPanInfo=_e;const{dragPropagation:He,dragDirectionLock:Xe,onDirectionLock:wt,onDrag:Do}=this.getProps();if(!He&&!this.openDragLock)return;const{offset:sr}=_e;if(Xe&&this.currentDirection===null){this.currentDirection=getCurrentDirection(sr),this.currentDirection!==null&&wt&&wt(this.currentDirection);return}this.updateAxis("x",_e.point,sr),this.updateAxis("y",_e.point,sr),this.visualElement.render(),Do&&Do(me,_e)},E=(me,_e)=>{this.latestPointerEvent=me,this.latestPanInfo=_e,this.stop(me,_e),this.latestPointerEvent=null,this.latestPanInfo=null},P=()=>eachAxis(me=>this.getAnimationState(me)==="paused"&&this.getAxisMotionValue(me).animation?.play()),{dragSnapToOrigin:Z}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:u,onStart:d,onMove:g,onSessionEnd:E,resumeAnimation:P},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:Z,distanceThreshold:a,contextWindow:getContextWindow(this.visualElement)})}stop(e,r){const a=e||this.latestPointerEvent,l=r||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!l||!a)return;const{velocity:d}=l;this.startAnimation(d);const{onDragEnd:g}=this.getProps();g&&frame.postRender(()=>g(a,l))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,a){const{drag:l}=this.getProps();if(!a||!shouldDrag(e,l,this.currentDirection))return;const u=this.getAxisMotionValue(e);let d=this.originPoint[e]+a[e];this.constraints&&this.constraints[e]&&(d=applyConstraints(d,this.constraints[e],this.elastic[e])),u.set(d)}resolveConstraints(){const{dragConstraints:e,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,l=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&a?this.constraints=calcRelativeConstraints(a.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(r),l!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=rebaseAxisConstraints(a.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!isRefObject(e))return!1;const a=e.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const u=measurePageBox(a,l.root,this.visualElement.getTransformPagePoint());let d=calcViewportConstraints(l.layout.layoutBox,u);if(r){const g=r(convertBoxToBoundingBox(d));this.hasMutatedConstraints=!!g,g&&(d=convertBoundingBoxToBox(g))}return d}startAnimation(e){const{drag:r,dragMomentum:a,dragElastic:l,dragTransition:u,dragSnapToOrigin:d,onDragTransitionEnd:g}=this.getProps(),E=this.constraints||{},P=eachAxis(Z=>{if(!shouldDrag(Z,r,this.currentDirection))return;let me=E&&E[Z]||{};d&&(me={min:0,max:0});const _e=l?200:1e6,He=l?40:1e7,Xe={type:"inertia",velocity:a?e[Z]:0,bounceStiffness:_e,bounceDamping:He,timeConstant:750,restDelta:1,restSpeed:10,...u,...me};return this.startAxisValueAnimation(Z,Xe)});return Promise.all(P).then(g)}startAxisValueAnimation(e,r){const a=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),a.start(animateMotionValue(e,a,0,r,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,a=this.visualElement.getProps(),l=a[r];return l||this.visualElement.getValue(e,(a.initial?a.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(r=>{const{drag:a}=this.getProps();if(!shouldDrag(r,a,this.currentDirection))return;const{projection:l}=this.visualElement,u=this.getAxisMotionValue(r);if(l&&l.layout){const{min:d,max:g}=l.layout.layoutBox[r];u.set(e[r]-mixNumber$1(d,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!isRefObject(r)||!a||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};eachAxis(d=>{const g=this.getAxisMotionValue(d);if(g&&this.constraints!==!1){const E=g.get();l[d]=calcOrigin({min:E,max:E},this.constraints[d])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),eachAxis(d=>{if(!shouldDrag(d,e,null))return;const g=this.getAxisMotionValue(d),{min:E,max:P}=this.constraints[d];g.set(mixNumber$1(E,P,l[d]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,r=addPointerEvent(e,"pointerdown",E=>{const{drag:P,dragListener:Z=!0}=this.getProps();P&&Z&&this.start(E)}),a=()=>{const{dragConstraints:E}=this.getProps();isRefObject(E)&&E.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,u=l.addEventListener("measure",a);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),frame.read(a);const d=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),g=l.addEventListener("didUpdate",({delta:E,hasLayoutChanged:P})=>{this.isDragging&&P&&(eachAxis(Z=>{const me=this.getAxisMotionValue(Z);me&&(this.originPoint[Z]+=E[Z].translate,me.set(me.get()+E[Z].translate))}),this.visualElement.render())});return()=>{d(),r(),u(),g&&g()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:l=!1,dragConstraints:u=!1,dragElastic:d=defaultElastic,dragMomentum:g=!0}=e;return{...e,drag:r,dragDirectionLock:a,dragPropagation:l,dragConstraints:u,dragElastic:d,dragMomentum:g}}}function shouldDrag(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function getCurrentDirection(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=t=>(e,r)=>{t&&frame.postRender(()=>t(e,r))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:a,onPanEnd:l}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(r),onMove:a,onEnd:(u,d)=>{delete this.session,l&&frame.postRender(()=>l(u,d))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const correctBorderRadius={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(px.test(t))t=parseFloat(t);else return t;const r=pixelsToPercent(t,e.target.x),a=pixelsToPercent(t,e.target.y);return`${r}% ${a}%`}},correctBoxShadow={correct:(t,{treeScale:e,projectionDelta:r})=>{const a=t,l=complex.parse(t);if(l.length>5)return a;const u=complex.createTransformer(t),d=typeof l[0]!="number"?1:0,g=r.x.scale*e.x,E=r.y.scale*e.y;l[0+d]/=g,l[1+d]/=E;const P=mixNumber$1(g,E,.5);return typeof l[2+d]=="number"&&(l[2+d]/=P),typeof l[3+d]=="number"&&(l[3+d]/=P),u(l)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:a,layoutId:l}=this.props,{projection:u}=e;addScaleCorrector(defaultScaleCorrectors),u&&(r.group&&r.group.add(u),a&&a.register&&l&&a.register(u),hasTakenAnySnapshot&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:a,drag:l,isPresent:u}=this.props,{projection:d}=a;return d&&(d.isPresent=u,hasTakenAnySnapshot=!0,l||e.layoutDependency!==r||r===void 0||e.isPresent!==u?d.willUpdate():this.safeToRemove(),e.isPresent!==u&&(u?d.promote():d.relegate()||frame.postRender(()=>{const g=d.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:l}=e;hasTakenAnySnapshot=!0,l&&(l.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(l),a&&a.deregister&&a.deregister(l))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(t){const[e,r]=usePresence(),a=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...t,layoutGroup:a,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:r})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(t,e,r){const a=isMotionValue(t)?t:motionValue(t);return a.start(animateMotionValue("",a,e,r)),a.animation}const compareByDepth=(t,e)=>t.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(t,e){const r=time.now(),a=({timestamp:l})=>{const u=l-r;u>=e&&(cancelFrame(a),t(u-e))};return frame.setup(a,!0),()=>cancelFrame(a)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=t=>typeof t=="string"?parseFloat(t):t,isPx=t=>typeof t=="number"||px.test(t);function mixValues(t,e,r,a,l,u){l?(t.opacity=mixNumber$1(0,r.opacity??1,easeCrossfadeIn(a)),t.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(a))):u&&(t.opacity=mixNumber$1(e.opacity??1,r.opacity??1,a));for(let d=0;d<numBorders;d++){const g=`border${borders[d]}Radius`;let E=getRadius(e,g),P=getRadius(r,g);if(E===void 0&&P===void 0)continue;E||(E=0),P||(P=0),E===0||P===0||isPx(E)===isPx(P)?(t[g]=Math.max(mixNumber$1(asNumber(E),asNumber(P),a),0),(percent.test(P)||percent.test(E))&&(t[g]+="%")):t[g]=P}(e.rotate||r.rotate)&&(t.rotate=mixNumber$1(e.rotate||0,r.rotate||0,a))}function getRadius(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(t,e,r){return a=>a<t?0:a>e?1:r(progress(t,e,a))}function copyAxisInto(t,e){t.min=e.min,t.max=e.max}function copyBoxInto(t,e){copyAxisInto(t.x,e.x),copyAxisInto(t.y,e.y)}function copyAxisDeltaInto(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function removePointDelta(t,e,r,a,l){return t-=e,t=scalePoint(t,1/r,a),l!==void 0&&(t=scalePoint(t,1/l,a)),t}function removeAxisDelta(t,e=0,r=1,a=.5,l,u=t,d=t){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(d.min,d.max,e/100)-d.min),typeof e!="number")return;let g=mixNumber$1(u.min,u.max,a);t===u&&(g-=e),t.min=removePointDelta(t.min,e,r,g,l),t.max=removePointDelta(t.max,e,r,g,l)}function removeAxisTransforms(t,e,[r,a,l],u,d){removeAxisDelta(t,e[r],e[a],e[l],e.scale,u,d)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(t,e,r,a){removeAxisTransforms(t.x,e,xKeys,r?r.x:void 0,a?a.x:void 0),removeAxisTransforms(t.y,e,yKeys,r?r.y:void 0,a?a.y:void 0)}function isAxisDeltaZero(t){return t.translate===0&&t.scale===1}function isDeltaZero(t){return isAxisDeltaZero(t.x)&&isAxisDeltaZero(t.y)}function axisEquals(t,e){return t.min===e.min&&t.max===e.max}function boxEquals(t,e){return axisEquals(t.x,e.x)&&axisEquals(t.y,e.y)}function axisEqualsRounded(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function boxEqualsRounded(t,e){return axisEqualsRounded(t.x,e.x)&&axisEqualsRounded(t.y,e.y)}function aspectRatio(t){return calcLength(t.x)/calcLength(t.y)}function axisDeltaEquals(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(l=>e===l);if(r===0)return!1;let a;for(let l=r;l>=0;l--){const u=this.members[l];if(u.isPresent!==!1){a=u;break}}return a?(this.promote(a),!0):!1}promote(e,r){const a=this.lead;if(e!==a&&(this.prevLead=a,this.lead=e,e.show(),a)){a.instance&&a.scheduleRender(),e.scheduleRender(),e.resumeFrom=a,r&&(e.resumeFrom.preserveOpacity=!0),a.snapshot&&(e.snapshot=a.snapshot,e.snapshot.latestValues=a.animationValues||a.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:l}=e.options;l===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:a}=e;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(t,e,r){let a="";const l=t.x.translate/e.x,u=t.y.translate/e.y,d=r?.z||0;if((l||u||d)&&(a=`translate3d(${l}px, ${u}px, ${d}px) `),(e.x!==1||e.y!==1)&&(a+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:P,rotate:Z,rotateX:me,rotateY:_e,skewX:He,skewY:Xe}=r;P&&(a=`perspective(${P}px) ${a}`),Z&&(a+=`rotate(${Z}deg) `),me&&(a+=`rotateX(${me}deg) `),_e&&(a+=`rotateY(${_e}deg) `),He&&(a+=`skewX(${He}deg) `),Xe&&(a+=`skewY(${Xe}deg) `)}const g=t.x.scale*e.x,E=t.y.scale*e.y;return(g!==1||E!==1)&&(a+=`scale(${g}, ${E})`),a||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(t,e,r,a){const{latestValues:l}=e;l[t]&&(r[t]=l[t],e.setStaticValue(t,0),a&&(a[t]=0))}function cancelTreeOptimisedTransformAnimations(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:l,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",frame,!(l||u))}const{parent:a}=t;a&&!a.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(a)}function createProjectionNode({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:a,resetTransform:l}){return class{constructor(d={},g=e?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let E=0;E<this.path.length;E++)this.path[E].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(d,g){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new SubscriptionManager),this.eventHandlers.get(d).add(g)}notifyListeners(d,...g){const E=this.eventHandlers.get(d);E&&E.notify(...g)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=isSVGElement(d)&&!isSVGSVGElement(d),this.instance=d;const{layoutId:g,layout:E,visualElement:P}=this.options;if(P&&!P.current&&P.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(E||g)&&(this.isLayoutDirty=!0),t){let Z,me=0;const _e=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{me=window.innerWidth}),t(d,()=>{const He=window.innerWidth;He!==me&&(me=He,this.root.updateBlockedByResize=!0,Z&&Z(),Z=delay(_e,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&P&&(g||E)&&this.addEventListener("didUpdate",({delta:Z,hasLayoutChanged:me,hasRelativeLayoutChanged:_e,layout:He})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Xe=this.options.transition||P.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:wt,onLayoutAnimationComplete:Do}=P.getProps(),sr=!this.targetLayout||!boxEqualsRounded(this.targetLayout,He),Ko=!me&&_e;if(this.options.layoutRoot||this.resumeFrom||Ko||me&&(sr||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Bs={...getValueTransition(Xe,"layout"),onPlay:wt,onComplete:Do};(P.shouldReduceMotion||this.options.layoutRoot)&&(Bs.delay=0,Bs.type=!1),this.startAnimation(Bs),this.setAnimationOrigin(Z,Ko)}else me||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=He})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let Z=0;Z<this.path.length;Z++){const me=this.path[Z];me.shouldResetTransform=!0,me.updateScroll("snapshot"),me.options.layoutRoot&&me.willUpdate(!1)}const{layoutId:g,layout:E}=this.options;if(g===void 0&&!E)return;const P=this.getTransformTemplate();this.prevTransformTemplateValue=P?P(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const g=time.now();frameData.delta=clamp(0,1e3/60,g-frameData.timestamp),frameData.timestamp=g,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let E=0;E<this.path.length;E++)this.path[E].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(g=!1),g&&this.instance){const E=a(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:E,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:E}}}resetTransform(){if(!l)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!isDeltaZero(this.projectionDelta),E=this.getTransformTemplate(),P=E?E(this.latestValues,""):void 0,Z=P!==this.prevTransformTemplateValue;d&&this.instance&&(g||hasTransform(this.latestValues)||Z)&&(l(this.instance,P),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const g=this.measurePageBox();let E=this.removeElementScroll(g);return d&&(E=this.removeTransform(E)),roundBox(E),{animationId:this.root.animationId,measuredBox:g,layoutBox:E,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return createBox();const g=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:P}=this.root;P&&(translateAxis(g.x,P.offset.x),translateAxis(g.y,P.offset.y))}return g}removeElementScroll(d){const g=createBox();if(copyBoxInto(g,d),this.scroll?.wasRoot)return g;for(let E=0;E<this.path.length;E++){const P=this.path[E],{scroll:Z,options:me}=P;P!==this.root&&Z&&me.layoutScroll&&(Z.wasRoot&&copyBoxInto(g,d),translateAxis(g.x,Z.offset.x),translateAxis(g.y,Z.offset.y))}return g}applyTransform(d,g=!1){const E=createBox();copyBoxInto(E,d);for(let P=0;P<this.path.length;P++){const Z=this.path[P];!g&&Z.options.layoutScroll&&Z.scroll&&Z!==Z.root&&transformBox(E,{x:-Z.scroll.offset.x,y:-Z.scroll.offset.y}),hasTransform(Z.latestValues)&&transformBox(E,Z.latestValues)}return hasTransform(this.latestValues)&&transformBox(E,this.latestValues),E}removeTransform(d){const g=createBox();copyBoxInto(g,d);for(let E=0;E<this.path.length;E++){const P=this.path[E];if(!P.instance||!hasTransform(P.latestValues))continue;hasScale(P.latestValues)&&P.updateSnapshot();const Z=createBox(),me=P.measurePageBox();copyBoxInto(Z,me),removeBoxTransforms(g,P.latestValues,P.snapshot?P.snapshot.layoutBox:void 0,Z)}return hasTransform(this.latestValues)&&removeBoxTransforms(g,this.latestValues),g}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const E=!!this.resumingFrom||this!==g;if(!(d||E&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:Z,layoutId:me}=this.options;if(!(!this.layout||!(Z||me))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const _e=this.getClosestProjectingParent();_e&&_e.layout&&this.animationProgress!==1?(this.relativeParent=_e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,_e.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _e=this.getClosestProjectingParent();_e&&!!_e.resumingFrom==!!this.resumingFrom&&!_e.options.layoutScroll&&_e.target&&this.animationProgress!==1?(this.relativeParent=_e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,_e.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const d=this.getLead(),g=!!this.resumingFrom||this!==d;let E=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(E=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(E=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(E=!1),E)return;const{layout:P,layoutId:Z}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(P||Z))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const me=this.treeScale.x,_e=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,g),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=createBox());const{target:He}=d;if(!He){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,He,this.latestValues),(this.treeScale.x!==me||this.treeScale.y!==_e||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",He))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(d,g=!1){const E=this.snapshot,P=E?E.latestValues:{},Z={...this.latestValues},me=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const _e=createBox(),He=E?E.source:void 0,Xe=this.layout?this.layout.source:void 0,wt=He!==Xe,Do=this.getStack(),sr=!Do||Do.members.length<=1,Ko=!!(wt&&!sr&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let Bs;this.mixTargetDelta=th=>{const pf=th/1e3;mixAxisDelta(me.x,d.x,pf),mixAxisDelta(me.y,d.y,pf),this.setTargetDelta(me),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(_e,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,_e,pf),Bs&&boxEquals(this.relativeTarget,Bs)&&(this.isProjectionDirty=!1),Bs||(Bs=createBox()),copyBoxInto(Bs,this.relativeTarget)),wt&&(this.animationValues=Z,mixValues(Z,P,this.latestValues,pf,Ko,sr)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=pf},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),d.onUpdate&&d.onUpdate(g)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:g,target:E,layout:P,latestValues:Z}=d;if(!(!g||!E||!P)){if(this!==d&&this.layout&&P&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,P.layoutBox)){E=this.target||createBox();const me=calcLength(this.layout.layoutBox.x);E.x.min=d.target.x.min,E.x.max=E.x.min+me;const _e=calcLength(this.layout.layoutBox.y);E.y.min=d.target.y.min,E.y.max=E.y.min+_e}copyBoxInto(g,E),transformBox(g,Z),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,g,Z)}}registerSharedNode(d,g){this.sharedNodes.has(d)||this.sharedNodes.set(d,new NodeStack),this.sharedNodes.get(d).add(g);const P=g.options.initialPromotionConfig;g.promote({transition:P?P.transition:void 0,preserveFollowOpacity:P&&P.shouldPreserveFollowOpacity?P.shouldPreserveFollowOpacity(g):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:g,preserveFollowOpacity:E}={}){const P=this.getStack();P&&P.promote(this,E),d&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let g=!1;const{latestValues:E}=d;if((E.z||E.rotate||E.rotateX||E.rotateY||E.rotateZ||E.skewX||E.skewY)&&(g=!0),!g)return;const P={};E.z&&resetDistortingTransform("z",d,P,this.animationValues);for(let Z=0;Z<transformAxes.length;Z++)resetDistortingTransform(`rotate${transformAxes[Z]}`,d,P,this.animationValues),resetDistortingTransform(`skew${transformAxes[Z]}`,d,P,this.animationValues);d.render();for(const Z in P)d.setStaticValue(Z,P[Z]),this.animationValues&&(this.animationValues[Z]=P[Z]);d.scheduleRender()}applyProjectionStyles(d,g){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const E=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=resolveMotionValue(g?.pointerEvents)||"",d.transform=E?E(this.latestValues,""):"none";return}const P=this.getLead();if(!this.projectionDelta||!this.layout||!P.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=resolveMotionValue(g?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(d.transform=E?E({},""):"none",this.hasProjected=!1);return}d.visibility="";const Z=P.animationValues||P.latestValues;this.applyTransformsToTarget();let me=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,Z);E&&(me=E(Z,me)),d.transform=me;const{x:_e,y:He}=this.projectionDelta;d.transformOrigin=`${_e.origin*100}% ${He.origin*100}% 0`,P.animationValues?d.opacity=P===this?Z.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:Z.opacityExit:d.opacity=P===this?Z.opacity!==void 0?Z.opacity:"":Z.opacityExit!==void 0?Z.opacityExit:0;for(const Xe in scaleCorrectors){if(Z[Xe]===void 0)continue;const{correct:wt,applyTo:Do,isCSSVariable:sr}=scaleCorrectors[Xe],Ko=me==="none"?Z[Xe]:wt(Z[Xe],P);if(Do){const Bs=Do.length;for(let th=0;th<Bs;th++)d[Do[th]]=Ko}else sr?this.options.visualElement.renderState.vars[Xe]=Ko:d[Xe]=Ko}this.options.layoutId&&(d.pointerEvents=P===this?resolveMotionValue(g?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(t){t.updateLayout()}function notifyLayoutUpdate(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=t.layout,{animationType:l}=t.options,u=e.source!==t.layout.source;l==="size"?eachAxis(Z=>{const me=u?e.measuredBox[Z]:e.layoutBox[Z],_e=calcLength(me);me.min=r[Z].min,me.max=me.min+_e}):shouldAnimatePositionOnly(l,e.layoutBox,r)&&eachAxis(Z=>{const me=u?e.measuredBox[Z]:e.layoutBox[Z],_e=calcLength(r[Z]);me.max=me.min+_e,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[Z].max=t.relativeTarget[Z].min+_e)});const d=createDelta();calcBoxDelta(d,r,e.layoutBox);const g=createDelta();u?calcBoxDelta(g,t.applyTransform(a,!0),e.measuredBox):calcBoxDelta(g,r,e.layoutBox);const E=!isDeltaZero(d);let P=!1;if(!t.resumeFrom){const Z=t.getClosestProjectingParent();if(Z&&!Z.resumeFrom){const{snapshot:me,layout:_e}=Z;if(me&&_e){const He=createBox();calcRelativePosition(He,e.layoutBox,me.layoutBox);const Xe=createBox();calcRelativePosition(Xe,r,_e.layoutBox),boxEqualsRounded(He,Xe)||(P=!0),Z.options.layoutRoot&&(t.relativeTarget=Xe,t.relativeTargetOrigin=He,t.relativeParent=Z)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:g,layoutDelta:d,hasLayoutChanged:E,hasRelativeLayoutChanged:P})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function propagateDirtyNodes(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cleanDirtyNodes(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function clearSnapshot(t){t.clearSnapshot()}function clearMeasurements(t){t.clearMeasurements()}function clearIsLayoutDirty(t){t.isLayoutDirty=!1}function resetTransformStyle(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function finishAnimation(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function resolveTargetDelta(t){t.resolveTargetDelta()}function calcProjection(t){t.calcProjection()}function resetSkewAndRotation(t){t.resetSkewAndRotation()}function removeLeadSnapshots(t){t.removeLeadSnapshot()}function mixAxisDelta(t,e,r){t.translate=mixNumber$1(e.translate,0,r),t.scale=mixNumber$1(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function mixAxis(t,e,r,a){t.min=mixNumber$1(e.min,r.min,a),t.max=mixNumber$1(e.max,r.max,a)}function mixBox(t,e,r,a){mixAxis(t.x,e.x,r.x,a),mixAxis(t.y,e.y,r.y,a)}function hasOpacityCrossfade(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(t){t.min=roundPoint(t.min),t.max=roundPoint(t.max)}function roundBox(t){roundAxis(t.x),roundAxis(t.y)}function shouldAnimatePositionOnly(t,e,r){return t==="position"||t==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(r),.2)}function checkNodeWasScrollRoot(t){return t!==t.root&&t.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(t,e)=>addDomEvent(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const t=new DocumentProjectionNode({});t.mount(window),t.setOptions({layoutScroll:!0}),rootProjectionNode.current=t}return rootProjectionNode.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(t,e,r){const{props:a}=t;t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",r==="Start");const l="onHover"+r,u=a[l];u&&frame.postRender(()=>u(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(r,a)=>(handleHoverEvent(this.node,a,"Start"),l=>handleHoverEvent(this.node,l,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(t,e,r){const{props:a}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&a.whileTap&&t.animationState.setActive("whileTap",r==="Start");const l="onTap"+(r==="End"?"":r),u=a[l];u&&frame.postRender(()=>u(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(r,a)=>(handlePressEvent(this.node,a,"Start"),(l,{success:u})=>handlePressEvent(this.node,l,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=t=>{const e=observerCallbacks.get(t.target);e&&e(t)},fireAllObserverCallbacks=t=>{t.forEach(fireObserverCallback)};function initIntersectionObserver({root:t,...e}){const r=t||document;observers.has(r)||observers.set(r,{});const a=observers.get(r),l=JSON.stringify(e);return a[l]||(a[l]=new IntersectionObserver(fireAllObserverCallbacks,{root:t,...e})),a[l]}function observeIntersection(t,e,r){const a=initIntersectionObserver(e);return observerCallbacks.set(t,r),a.observe(t),()=>{observerCallbacks.delete(t),a.unobserve(t)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:a,amount:l="some",once:u}=e,d={root:r?r.current:void 0,rootMargin:a,threshold:typeof l=="number"?l:thresholdNames[l]},g=E=>{const{isIntersecting:P}=E;if(this.isInView===P||(this.isInView=P,u&&!P&&this.hasEnteredView))return;P&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",P);const{onViewportEnter:Z,onViewportLeave:me}=this.node.getProps(),_e=P?Z:me;_e&&_e(E)};return observeIntersection(this.node.current,d,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,r))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement),Rank1="/assets/Rank1-Bcywuq91.png",Rank2="/assets/Rank2-CCOkr3g2.png",Rank3="/assets/Rank3-BDc3e0jP.png",Rank4="/assets/Rank4-CB3BLUCa.png",Rank5="/assets/Rank5-7WXb3Hjh.png",Rank6="/assets/Rank6-Cr9dJ75F.png",RankBar=({rank:t,progress:e=0})=>{const r=[Rank1,Rank2,Rank3,Rank4,Rank5,Rank6];return jsxRuntimeExports.jsx("div",{className:"w-full flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center",children:[jsxRuntimeExports.jsx("img",{src:r[t]||r[0],alt:`Rank ${t}`,className:"w-[80px] h-[70px] mr-2"}),jsxRuntimeExports.jsx("div",{className:"progress-bar",children:jsxRuntimeExports.jsx(motion.div,{className:"progress-fill",initial:{width:0},animate:{width:`${e}%`},transition:{duration:.6,ease:"easeInOut"}})})]})})};function Questions(){const[t,e]=reactExports.useState([]),[r,a]=reactExports.useState(0),{loadQuestions:l}=useQuestions({setQuestions:e}),{user:u}=reactExports.useContext(UserContext);return reactExports.useEffect(()=>{l();const d=g=>{g.which===13&&(l(),a(E=>E+1))};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[]),jsxRuntimeExports.jsxs("div",{className:"w-h-container flex-col p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-end justify-end",children:[jsxRuntimeExports.jsx("div",{className:"flex mr-20",children:jsxRuntimeExports.jsx(RankBar,{rank:u.rank,progress:Math.min(u.xp,100)})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 w-full color-bg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center txtbox w-full max-w-xs  color-bg",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search Questions",className:" w-full p-1 outline-none border-none"}),jsxRuntimeExports.jsx(LuSearch,{className:"color-txt-sub ",size:24})]}),jsxRuntimeExports.jsx("button",{type:"button",className:"p-1",children:jsxRuntimeExports.jsx(LuFilter,{className:"color-txt-sub m-4",size:30})})]})]}),jsxRuntimeExports.jsx(Question,{questions:t,position:r})]})}const FriendsBar=()=>{const[t,e]=reactExports.useState([]),{user:r}=reactExports.useContext(UserContext),a=useNavigate();return reactExports.useEffect(()=>{(async()=>{if(e([]),!r.friends)return;const u=r.friends.map(async g=>{try{const P=(await getDoc(doc(db$1,"user-data",g))).data();if(!P)return null;const Z=getStorage(),me=ref(Z,P.picture),_e=await getDownloadURL(me);return{uid:P.uid,username:P.username,picture:_e}}catch(E){return console.log(E),null}}),d=(await Promise.all(u)).filter(g=>g!==null);e(d)})()},[r.friends]),jsxRuntimeExports.jsxs("div",{className:` w-16 h-full m-0\r
                        flex flex-col\r
                        bg-button dark:bg-button-dark border-r-2 border-light-grey dark:border-grey\r
                        overflow-y-auto scrollbar-hide`,children:[t.map(l=>jsxRuntimeExports.jsx(FriendsBarIcon,{icon:jsxRuntimeExports.jsx("img",{src:l.picture,alt:l.username,className:"w-10 h-10 rounded-full object-cover border-2 border-light-grey dark:border-grey"}),tooltip:l.username,onClick:()=>{a(`/viewProfile/${l.uid}`)}},l.uid)),jsxRuntimeExports.jsx(FriendsBarIcon,{icon:jsxRuntimeExports.jsx(LuUserPlus,{size:32}),tooltip:"Add Friends",onClick:()=>{}})]})},FriendsBarIcon=({icon:t,onClick:e})=>jsxRuntimeExports.jsx("div",{className:"sidebar-icon",onClick:e,children:t}),PostCard=({userImage:t,username:e,time:r,content:a,replyCount:l,imageURL:u,onPressReplies:d})=>{const[g,E]=reactExports.useState(null),P=r?.toDate?.()?.toLocaleDateString()??"Unknown date";return reactExports.useEffect(()=>{(async()=>{if(u)try{const me=ref(storage,u),_e=await getDownloadURL(me);E(_e),console.log(_e)}catch(me){console.error("Error fetching image:",me),E(null)}else E(null)})()},[u]),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-black border border-light-grey dark:border-grey rounded-lg shadow-small p-4 mb-4 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-3",children:[jsxRuntimeExports.jsx("img",{src:t,alt:e,className:"w-10 h-10 rounded-full mr-3 object-cover border border-light-grey dark:border-grey"}),jsxRuntimeExports.jsx("span",{className:"txt-bold text-black dark:text-white",children:e})]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"txt text-black dark:text-white mb-2",children:a}),g&&jsxRuntimeExports.jsx("img",{src:g,alt:"Post content",className:"w-full max-w-lg rounded-lg object-cover border border-light-grey dark:border-grey"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-grey dark:text-light-grey txt-sub",children:[jsxRuntimeExports.jsx("span",{children:P}),jsxRuntimeExports.jsxs("span",{onClick:d,className:"cursor-pointer hover:text-blue dark:hover:text-blue-light transition-colors",children:[l," Replies"]})]})]})};function useFriends(){const{user:t,setUser:e}=reactExports.useContext(UserContext),{fetchImage:r}=useFetch();return{getSearch:async u=>{try{const d=query(collection(db$1,"user-data"),where("username",">=",u),where("username","<=",u+""),limit(20),orderBy("rank","desc")),E=(await getDocs(d)).docs.map(async me=>{const _e=me.data();if(_e.uid==t.uid)return null;if(t.friends.some(He=>He.uid==_e.uid))return null;if(t.pendingFriends.some(He=>He==_e.uid))return null;{const He=await r(_e.picture);return{..._e,picture:He,uid:me.id,sent:!1}}});return(await Promise.all(E)).filter(me=>me!==null)}catch(d){console.log(d)}},sendFriendRequest:async u=>{try{const d=query(collection(db$1,"user-data"),where("username","==",u)),g=(await getDocs(d)).docs[0],E=g.ref;e(P=>({...P,pendingFriends:[...P.pendingFriends,g.data().uid]})),updateDoc(E,{notifications:arrayUnion({type:"friend-request",from:t.uid,timestamp:Timestamp.now()}),pendingFriends:arrayUnion(t.uid)}),updateDoc(doc(db$1,"user-data",t.uid),{pendingFriends:arrayUnion(g.data().uid)})}catch(d){console.log(d)}}}}function FriendsSearch(){const{getSearch:t,sendFriendRequest:e}=useFriends(),[r,a]=reactExports.useState(""),[l,u]=reactExports.useState(),[d,g]=reactExports.useState(!1);return reactExports.useEffect(()=>{(async()=>{if(r.length>0){g(!0);const P=await t(r);u(P),g(!1)}})()},[r]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 w-full color-bg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center txtbox w-full max-w-xs  color-bg",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search Questions",className:" w-full p-1 outline-none border-none",onChange:E=>{a(E.target.value)}}),jsxRuntimeExports.jsx(LuSearch,{className:"color-txt-sub ",size:24})]})}),d?jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnim,loop:!0,autoplay:!0,className:"h-40 w-40"})}):l?.length>0&&r.length>0?jsxRuntimeExports.jsx("div",{children:l?.map(E=>jsxRuntimeExports.jsxs("div",{className:"m-4",children:[jsxRuntimeExports.jsx("img",{src:E.picture,alt:E.picture,className:"w-10 h-10 rounded-full object-cover inline"}),jsxRuntimeExports.jsx("span",{className:"txt-bold mx-4 inline",children:E.username}),jsxRuntimeExports.jsx("span",{className:"blue-btn cursor-pointer inline",onClick:()=>{e(E.username),a("")},children:"Send Request"})]}))}):jsxRuntimeExports.jsx("span",{className:"txt-heading",children:"No Results"})]})}function useNotifications(){const{user:t,setUser:e}=reactExports.useContext(UserContext),{fetchUser:r}=useFetch(),[a,l]=reactExports.useState();reactExports.useEffect(()=>{(async()=>{if(t.notifications){const P=t.notifications.map(async me=>{if(me.type=="friend-request"){const{username:_e,picture:He}=await r(me.from),Xe=u(me.timestamp);return{...me,username:_e,picture:He,timeago:Xe}}else if(me.type=="deck-share"){const{username:_e,picture:He}=await r(me.from),Xe=u(me.timestamp);return{...me,username:_e,picture:He,timeago:Xe,deckID:me.deckID}}return me}),Z=await Promise.all(P);l(Z)}else l([])})()},[t]);function u(E){const P=new Date,Z=E.toDate(),me=Math.floor((P.getTime()-Z.getTime())/1e3);if(me<5)return"just now";if(me<60)return`${me} s`;const _e=Math.floor(me/60);if(_e<60)return`${_e} m`;const He=Math.floor(_e/60);if(He<24)return`${He} h`;const Xe=Math.floor(He/24);return`${Xe} day${Xe===1?"":"s"} ago`}const d=async E=>{try{const P=t.notifications.filter(Z=>Z.timestamp?.seconds!==E.timestamp?.seconds||Z.timestamp?.nanoseconds!==E.timestamp?.nanoseconds);e(Z=>({...Z,notifications:P})),await updateDoc(doc(db$1,"user-data",t.uid),{notifications:P}),E.type=="friend-request"&&(e(Z=>({...Z,pendingFriends:Z.pendingFriends?.filter(me=>me!==E.from)})),await updateDoc(doc(db$1,"user-data",t.uid),{pendingFriends:arrayRemove(E.from)}),await updateDoc(doc(db$1,"user-data",E.from),{pendingFriends:arrayRemove(t.uid)}))}catch(P){console.log(P)}};return{removeNotification:d,addFriend:async E=>{try{d(E),updateDoc(doc(db$1,"user-data",t.uid),{friends:arrayUnion(E.from)}),updateDoc(doc(db$1,"user-data",E.from),{friends:arrayUnion(t.uid)}),e(P=>({...P,friends:[...P.friends,E.from]}))}catch(P){console.log(P)}},notis:a}}function Notifications(){const{notis:t,addFriend:e,removeNotification:r}=useNotifications(),a=useNavigate();return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"txt-heading-colour",children:"Your Notificiations"}),t?.map(l=>l.type=="friend-request"?jsxRuntimeExports.jsxs("div",{className:"my-5 ",children:[jsxRuntimeExports.jsx("img",{src:l.picture,className:"w-8 h-8 rounded-full object-cover inline mx-2"}),jsxRuntimeExports.jsx("p",{className:"text-base inline text-2sxs",children:`${l.username} has sent you a new deck`}),jsxRuntimeExports.jsx("span",{className:"blue-btn inline mx-2",onClick:()=>e(l),children:"Add"}),jsxRuntimeExports.jsx(LuX,{className:"inline hover:scale-110 duration-200 transition-all mx-2",onClick:()=>r(l)}),jsxRuntimeExports.jsx("p",{className:"txt-sub inline",children:l.timeago})]},l.from):l.type=="deck-share"?jsxRuntimeExports.jsxs("div",{className:"my-5 ",children:[jsxRuntimeExports.jsx("img",{src:l.picture,className:"w-8 h-8 rounded-full object-cover inline mx-2"}),jsxRuntimeExports.jsx("p",{className:"text-base inline text-2sxs",children:`${l.username} has sent you a new deck`}),jsxRuntimeExports.jsx("p",{className:"blue-btn inline mx-2",onClick:()=>a(`/decks/${l.from}/${l.deckID}/preview`),children:"View Deck"}),jsxRuntimeExports.jsx(LuX,{className:"inline hover:scale-110 duration-200 transition-all mx-2",onClick:()=>r(l)}),jsxRuntimeExports.jsx("p",{className:"txt-sub inline",children:l.timeago})]},l.from):jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{children:"All clear! no notifications"})}))]})}function Social$1(){const{user:t,setUser:e}=reactExports.useContext(UserContext),[r,a]=reactExports.useState([]),[l,u]=reactExports.useState(""),[d,g]=reactExports.useState([]),[E,P]=reactExports.useState("practice");console.log(d,E);const Z=useNavigate(),me=(Do,sr)=>{P(Do),Z(`/${Do}`,sr)},_e=async()=>{if(l.trim())try{await addDoc(collection(db$1,"posts"),{userId:t.uid,content:l.trim(),timestamp:serverTimestamp(),imageUrl:null,likes:0,isFlashcard:!1}),u(""),console.log("Post added!")}catch(Do){console.error("Error sending post:",Do)}};reactExports.useEffect(()=>{(async()=>{const sr=query(collection(db$1,"posts"),orderBy("timestamp","desc")),Ko=onSnapshot(sr,async Bs=>{const th=await Promise.all(Bs.docs.map(async pf=>{const _h=pf.data(),cf=_h.userId,df=pf.id,uf=query(collection(db$1,"user-data"),where("uid","==",cf)),li=await getDocs(uf);let Vc="Unknown",Rs=null;if(!li.empty){const n1=li.docs[0].data();Vc=n1.username;try{const wh=getStorage(),gf=ref(wh,n1.picture);Rs=await getDownloadURL(gf)}catch(wh){console.warn("Image error:",wh)}}let qc=await getDocs(collection(db$1,"posts",df,"replies")),Qp=qc.size;return _h.flashcardId&&(qc=await getDocs(collection(db$1,"certchamps-questions",_h.flashcardId,"replies",_h.replyId,"replies")),Qp=qc.size),{id:pf.id,content:_h.content,timestamp:_h.timestamp,username:Vc,userImage:Rs,imageURL:_h.imageUrl,replyCount:Qp,isFlashcard:_h.isFlashcard,flashcardId:_h.flashcardId,replyId:_h.replyId}}));a(th)});return()=>Ko()})()},[]),reactExports.useEffect(()=>{(async()=>{g([]),console.log("debug"),t.friends.forEach(async sr=>{try{const Ko=(await getDoc(doc(db$1,"user-data",sr))).data(),Bs=getStorage(),th=ref(Bs,Ko?.picture),pf=await getDownloadURL(th);g(_h=>[..._h,{username:Ko?.username,picture:pf,uid:Ko?.uid}])}catch(Ko){console.log(Ko)}})})()},[]),reactExports.useEffect(()=>{const Do=onSnapshot(doc(db$1,"user-data",t.uid),sr=>{const Ko=sr.data();Ko&&e(Bs=>({...Bs,friends:Ko.friends??[],notifications:Ko.notifications??[]}))},sr=>{console.error("Firestore listener error:",sr)});return()=>Do()},[]);const He=["Confess your math sins.","Type like no ones judging.","Unleash your inner genius!!!","Got wisdom? Spill it.","Your keyboard misses you.","Type away, genius!","Your thoughts matter here.","Share your brilliance.","Type it out, lets see!","Got a thought? Type it!","Your keyboard is waiting.","Type like you mean it!","Let your thoughts flow.","Type it, were listening.","Your keyboard is your canvas.","Type your way to greatness.","Tell them how you love maths..."],[Xe,wt]=reactExports.useState("");return reactExports.useEffect(()=>{const Do=Math.floor(Math.random()*He.length);wt(He[Do]);const sr=onSnapshot(doc(db$1,"user-data",t.uid),Ko=>{const Bs=Ko.data();Bs&&e(th=>({...th,friends:Bs.friends??[],notifications:Bs.notifications??[]}))},Ko=>{console.error("Firestore listener error:",Ko)});return()=>sr()},[]),jsxRuntimeExports.jsxs("div",{className:"flex  w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-auto overflow-y-scroll",children:jsxRuntimeExports.jsx(FriendsBar,{})}),jsxRuntimeExports.jsx("div",{className:"w-1/4 overflow-y-scroll h-full",children:jsxRuntimeExports.jsx(Notifications,{})}),jsxRuntimeExports.jsx("div",{className:"w-auto overflow-y-scroll h-full",children:jsxRuntimeExports.jsx(FriendsSearch,{})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 h-screen overflow-y-auto p-4",children:jsxRuntimeExports.jsx("div",{className:"mx-auto max-w-3xl w-full space-y-4",children:r.map(Do=>jsxRuntimeExports.jsx(PostCard,{content:Do.content,userImage:Do.userImage,username:Do.username,time:Do.timestamp,replyCount:Do.replyCount,imageURL:Do.imageURL,onPressReplies:()=>{Do.isFlashcard?me("social/q_replies",{state:{id:Do.id,flashcardId:Do.flashcardId,replyId:Do.replyId}}):me("social/replies",{state:{id:Do.id}})}},Do.id))})}),jsxRuntimeExports.jsxs("div",{className:"sticky bottom-0 left-0 border-t border-light-grey dark:border-grey bg-white dark:bg-black p-3 z-10",children:[jsxRuntimeExports.jsx("textarea",{value:l,onChange:Do=>u(Do.target.value),placeholder:Xe,rows:3,className:"w-full p-3 rounded-xl border-2 border-light-grey dark:border-grey bg-button dark:bg-button-dark text-black dark:text-white focus:outline-none resize-none"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-1 txt-sub text-grey dark:text-light-grey hover:text-black dark:hover:text-white",children:"Clear"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:_e,disabled:!l.trim(),className:"px-4 py-2 rounded-xl bg-blue text-white disabled:opacity-50 hover:bg-blue-light",children:"Send"})]})]})]})]})}function Social(){const[t,e]=reactExports.useState(""),r=reactExports.useRef(null);reactExports.useEffect(()=>{r.current&&(r.current.value=t)},[t]);const[a,l]=reactExports.useState(0),[u,d]=reactExports.useState(""),g=["In $\\triangle PQR$, $P(0, 0)$, $Q(8, 0)$, and $R(4, h)$. If the orthocentre is at $(4, 2)$, find $h$.","A point $P(x,y)$ moves such that its distance to line $3x - 4y + 1 = 0$ is twice its distance to line $6x - 8y - 3 = 0$. Show that $P$ lies on one of two lines and find their equations.","In a right triangle, the lengths of the legs are $a$ and $b$. If the area is $A$, find the relationship between $A$, $a$, and $b$.","Line $l: kx - 3y + 4 = 0$ makes angle $\\theta$ with $3x - y + 2 = 0$ where $\\tan\\theta = \\frac{1}{2}$. Find $k$."];return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Social"}),jsxRuntimeExports.jsx("p",{className:"txt-sub italic",children:"#Tags for the questions"}),jsxRuntimeExports.jsx("p",{className:"txt",children:"Wow so much space I actually dont know what to do with myself here"}),jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox w-full max-w-xs",placeholder:"Answer"}),jsxRuntimeExports.jsx("math-field",{ref:r,onInput:E=>e(E.target.value),style:{display:"block",minHeight:"60px",padding:"8px",backgroundColor:"#f0f0f0",border:"2px solid #888",borderRadius:"8px",fontSize:"18px",color:"black"},children:t}),jsxRuntimeExports.jsxs("p",{children:["Value: ",t]}),jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox w-full max-w-xs",placeholder:"Answer",onChange:E=>d(E.target.value)}),jsxRuntimeExports.jsx(RenderMath,{text:u,className:"txt"}),jsxRuntimeExports.jsx(RenderMath,{text:g[a],className:"txt"}),jsxRuntimeExports.jsx("p",{className:"plain-btn m-4 cursor-pointer",onClick:()=>l((a+1)%g.length),children:"Next Questions"})]})}function Navbar(){const{user:r}=reactExports.useContext(UserContext),[a,l]=reactExports.useState("practice"),u=useNavigate(),d=g=>{l(g),u(`/${g}`)};return jsxRuntimeExports.jsxs("div",{className:"container group",children:[jsxRuntimeExports.jsxs("div",{className:"user-container",children:[jsxRuntimeExports.jsx("img",{src:r.picture,className:"user-img",onClick:()=>{u(`/viewProfile/${r.uid}`)}}),jsxRuntimeExports.jsxs("div",{className:"user-info",children:[jsxRuntimeExports.jsx("p",{className:"nav-txt username",children:r.username}),jsxRuntimeExports.jsx("p",{className:"nav-txt txt-sub text-nowrap",children:"Rank: Elite"})]}),jsxRuntimeExports.jsx(LuSettings,{className:"nav-txt settings",size:24,onClick:()=>{d("user/settings")}})]}),jsxRuntimeExports.jsxs("div",{className:a=="practice"?"nav-item-selected":"nav-item",onClick:()=>{d("practice")},children:[jsxRuntimeExports.jsx(LuPencil,{strokeWidth:2,size:36,className:a=="practice"?"nav-icon-selected":"nav-icon",fill:a=="practice"?"currentColor":"none"}),jsxRuntimeExports.jsx("p",{className:a=="practice"?"nav-txt-selected":"nav-txt",children:"Practice"})]}),jsxRuntimeExports.jsxs("div",{className:a=="social"?"nav-item-selected":"nav-item",onClick:()=>{d("social/social")},children:[jsxRuntimeExports.jsx(LuUsers,{strokeWidth:2,size:36,className:a=="social"?"nav-icon-selected":"nav-icon",fill:a=="social"?"currentColor":"none"}),jsxRuntimeExports.jsx("p",{className:a=="social"?"nav-txt-selected":"nav-txt",children:"Social"})]}),jsxRuntimeExports.jsxs("div",{className:a=="games"?"nav-item-selected":"nav-item",onClick:()=>{d("games")},children:[jsxRuntimeExports.jsx(LuGamepad2,{strokeWidth:2,size:36,className:a=="games"?"nav-icon-selected":"nav-icon",fill:a=="games"?"currentColor":"none"}),jsxRuntimeExports.jsx("p",{className:a=="games"?"nav-txt-selected":"nav-txt",children:"Games"})]})]})}function Replies(){const{state:t}=useLocation(),e=t?.id,[r,a]=reactExports.useState(null),[l,u]=reactExports.useState([]),[d,g]=reactExports.useState(""),[E,P]=reactExports.useState(null),{user:Z}=reactExports.useContext(UserContext);reactExports.useEffect(()=>{P(null),(async()=>{if(!e)return;const sr=doc(db$1,"posts",e),Ko=await getDoc(sr);if(!Ko.exists())return;const Bs=Ko.data();let th="Unknown",pf=null;try{const _h=query(collection(db$1,"user-data"),where("uid","==",Bs.userId)),cf=await getDocs(_h);if(!cf.empty){const df=cf.docs[0].data();th=df.username??"Unknown",df.picture&&(pf=await getDownloadURL(ref(storage,df.picture)))}}catch(_h){console.warn("Failed to load author profile:",_h)}a({id:Ko.id,...Bs,username:th,userImage:pf})})()},[e]),reactExports.useEffect(()=>{if(!e)return;const Do=query(collection(db$1,"posts",e,"replies"),orderBy("timestamp","asc")),sr=onSnapshot(Do,async Ko=>{const Bs=await Promise.all(Ko.docs.map(async th=>{const pf=th.data(),_h=pf.userId,cf=query(collection(db$1,"user-data"),where("uid","==",_h)),df=await getDocs(cf);let uf="Unknown",li=null;if(!df.empty){const Vc=df.docs[0].data();uf=Vc.username;try{li=await getDownloadURL(ref(storage,Vc.picture))}catch(Rs){console.warn("Image error:",Rs)}}return{id:th.id,content:pf.content,timestamp:pf.timestamp,username:uf,userImage:li}}));u(Bs)});return()=>sr()},[e]);const me=async()=>{if(d.trim())try{await addDoc(collection(db$1,"posts",Array.isArray(e)?e[0]:e,"replies"),{content:d.trim(),timestamp:serverTimestamp(),userId:Z.uid}),g(""),console.log("Reply sent successfully!")}catch(Do){console.error("Error sending reply:",Do)}},_e=["Confess your math sins.","Type like no ones judging.","Unleash your inner genius!!!","Got wisdom? Spill it.","Your keyboard misses you.","Type away, genius!","Your thoughts matter here.","Share your brilliance.","Type it out, lets see!","Got a thought? Type it!","Your keyboard is waiting.","Type like you mean it!","Let your thoughts flow.","Type it, were listening.","Your keyboard is your canvas.","Type your way to greatness.","Tell them how you love maths..."],[He,Xe]=reactExports.useState("");reactExports.useEffect(()=>{const Do=Math.floor(Math.random()*_e.length);Xe(_e[Do])},[]);const wt=r?.timestamp?.toDate?.()?.toLocaleDateString()??"Unknown date";return jsxRuntimeExports.jsxs("div",{className:"flex w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-64 overflow-y-auto",children:jsxRuntimeExports.jsx(FriendsBar,{})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-4",children:[r&&jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 mb-4 rounded",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-3",children:[r.userImage&&jsxRuntimeExports.jsx("img",{src:r.userImage,alt:r.username,className:"w-10 h-10 rounded-full mr-3 object-cover"}),jsxRuntimeExports.jsx("span",{className:"font-bold",children:r.username})]}),jsxRuntimeExports.jsx("p",{className:"mb-2",children:r.content}),E&&jsxRuntimeExports.jsx("img",{src:E,alt:"Post content",className:"w-full max-w-lg rounded-lg object-cover"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:wt})]}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Replies"}),l.length>0?l.map(Do=>jsxRuntimeExports.jsxs("div",{className:"p-3 rounded mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-2",children:[Do.userImage&&jsxRuntimeExports.jsx("img",{src:Do.userImage,alt:Do.username,className:"w-8 h-8 rounded-full mr-2 object-cover"}),jsxRuntimeExports.jsx("span",{className:"font-semibold",children:Do.username})]}),jsxRuntimeExports.jsx("p",{children:Do.content})]},Do.id)):jsxRuntimeExports.jsx("p",{children:"No replies yet."})]}),jsxRuntimeExports.jsxs("div",{className:"sticky bottom-0 left-0 border-t border-light-grey dark:border-grey bg-white dark:bg-black p-3 z-10",children:[jsxRuntimeExports.jsx("textarea",{value:d,onChange:Do=>g(Do.target.value),placeholder:He,rows:3,className:"w-full p-3 rounded-xl border-2 border-light-grey dark:border-grey bg-button dark:bg-button-dark text-black dark:text-white focus:outline-none resize-none"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-1 txt-sub text-grey dark:text-light-grey hover:text-black dark:hover:text-white",children:"Clear"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:me,disabled:!d.trim(),className:"px-4 py-2 rounded-xl bg-blue text-white disabled:opacity-50 hover:bg-blue-light",children:"Send"})]})]})]})}function QReplies(){const{state:t}=useLocation(),e=t?.flashcardId,r=t?.replyId,[a,l]=reactExports.useState([]),[u,d]=reactExports.useState({username:"Unknown",userImage:null}),[g,E]=reactExports.useState(""),{user:P}=reactExports.useContext(UserContext);reactExports.useEffect(()=>{(async()=>{if(!(!e||!r))try{const wt=doc(db$1,"certchamps-questions",e,"replies",r),Do=await getDoc(wt);if(Do.exists()){const Ko=Do.data().userId,Bs=query(collection(db$1,"user-data"),where("uid","==",Ko)),th=await getDocs(Bs);if(!th.empty){const pf=th.docs[0].data();let _h=null;if(pf.picture)try{_h=await getDownloadURL(ref(storage,pf.picture))}catch(cf){console.warn("Image error:",cf)}d({username:pf.username??"Unknown",userImage:_h})}}}catch(wt){console.error("Error fetching parent reply author:",wt)}})()},[e,r]),reactExports.useEffect(()=>{if(!e||!r)return;const Xe=query(collection(db$1,"certchamps-questions",e,"replies",r,"replies"),orderBy("timestamp","asc")),wt=onSnapshot(Xe,async Do=>{const sr=await Promise.all(Do.docs.map(async Ko=>{const Bs=Ko.data(),th=Bs.userId,pf=query(collection(db$1,"user-data"),where("uid","==",th)),_h=await getDocs(pf);let cf="Unknown",df=null;if(!_h.empty){const uf=_h.docs[0].data();cf=uf.username;try{df=await getDownloadURL(ref(storage,uf.picture))}catch(li){console.warn("Image error:",li)}}return{id:Ko.id,content:Bs.content,timestamp:Bs.timestamp,username:cf,userImage:df}}));l(sr)});return()=>wt()},[e,r]);const Z=async()=>{if(g.trim())try{await addDoc(collection(db$1,"certchamps-questions",e,"replies",r,"replies"),{content:g.trim(),timestamp:serverTimestamp(),userId:P.uid}),E(""),console.log("Sub-reply sent successfully!")}catch(Xe){console.error("Error sending sub-reply:",Xe)}},me=["Confess your math sins.","Type like no ones judging.","Unleash your inner genius!!!","Got wisdom? Spill it.","Your keyboard misses you.","Type away, genius!","Your thoughts matter here.","Share your brilliance.","Type it out, lets see!","Got a thought? Type it!","Your keyboard is waiting.","Type like you mean it!","Let your thoughts flow.","Type it, were listening.","Your keyboard is your canvas.","Type your way to greatness.","Tell them how you love maths..."],[_e,He]=reactExports.useState("");return reactExports.useEffect(()=>{const Xe=Math.floor(Math.random()*me.length);He(me[Xe])},[]),jsxRuntimeExports.jsxs("div",{className:"flex w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-64 overflow-y-auto",children:jsxRuntimeExports.jsx(FriendsBar,{})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 mb-4rounded",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-3",children:[u.userImage&&jsxRuntimeExports.jsx("img",{src:u.userImage,alt:u.username,className:"w-10 h-10 rounded-full mr-3 object-cover"}),jsxRuntimeExports.jsx("span",{className:"font-bold",children:u.username})]}),jsxRuntimeExports.jsxs("p",{children:["Flashcard Question ID: ",e]})]}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Replies"}),a.length>0?a.map(Xe=>jsxRuntimeExports.jsxs("div",{className:"p-3 border rounded mb-2 bg-gray-50 dark:bg-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-2",children:[Xe.userImage&&jsxRuntimeExports.jsx("img",{src:Xe.userImage,alt:Xe.username,className:"w-8 h-8 rounded-full mr-2 object-cover border"}),jsxRuntimeExports.jsx("span",{className:"font-semibold",children:Xe.username})]}),jsxRuntimeExports.jsx("p",{children:Xe.content})]},Xe.id)):jsxRuntimeExports.jsx("p",{children:"No replies yet."})]}),jsxRuntimeExports.jsxs("div",{className:"sticky bottom-0 left-0 border-t border-light-grey dark:border-grey bg-white dark:bg-black p-3 z-10",children:[jsxRuntimeExports.jsx("textarea",{value:g,onChange:Xe=>E(Xe.target.value),placeholder:_e,rows:3,className:"w-full p-3 rounded-xl border-2 border-light-grey dark:border-grey bg-button dark:bg-button-dark text-black dark:text-white focus:outline-none resize-none"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-1 txt-sub text-grey dark:text-light-grey hover:text-black dark:hover:text-white",children:"Clear"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Z,disabled:!g.trim(),className:"px-4 py-2 rounded-xl bg-blue text-white disabled:opacity-50 hover:bg-blue-light",children:"Send"})]})]})]})}function Settings(){const{setOptions:t}=reactExports.useContext(OptionsContext),e=useNavigate(),r=l=>{t(u=>({...u,theme:l}))},a=async()=>{await auth.signOut(),e("/")};return jsxRuntimeExports.jsx("div",{className:"w-h-container","data-theme":"ishtar",children:jsxRuntimeExports.jsxs("div",{className:"w-h-container background-white flex-col",children:[jsxRuntimeExports.jsx("p",{className:"color-black",children:"Pick a theme"}),jsxRuntimeExports.jsx("span",{className:" bg-white text-black theme-button",onClick:()=>r("light"),children:"Light"}),jsxRuntimeExports.jsx("span",{className:"bg-black text-white theme-button ",onClick:()=>r("dark"),children:"Dark"}),jsxRuntimeExports.jsx("span",{className:"bg-markoteal text-markored theme-button",onClick:()=>r("markoblank"),children:"Markoblank"}),jsxRuntimeExports.jsx("span",{className:"bg-discordblack text-discordblue theme-button",onClick:()=>r("discord"),children:"Discord"}),jsxRuntimeExports.jsx("span",{className:"bg-ishtarblack text-ishtarred theme-button",onClick:()=>r("ishtar"),children:"Ishtar"}),jsxRuntimeExports.jsx("span",{className:"color-bg-accent color-txt-main theme-button",onClick:()=>{a()},children:"Log Out"})]})})}const formatTime=t=>{const e=Math.floor(t/3600),r=Math.floor(t%3600/60),a=t%60,l=u=>String(u).padStart(2,"0");return`${l(e)}:${l(r)}:${l(a)}`},useStopwatch=()=>{const[t,e]=reactExports.useState(0),[r,a]=reactExports.useState(!1),l=reactExports.useRef(null),u=()=>{l.current||(l.current=setInterval(()=>{e(E=>E+1)},1e3),a(!0))},d=()=>{l.current&&(clearInterval(l.current),l.current=null,a(!1))},g=()=>{d(),e(0)};return reactExports.useEffect(()=>()=>{l.current&&clearInterval(l.current)},[]),{timeFormatted:formatTime(t),secondsElapsed:t,setSecondsElapsed:e,isRunning:r,start:u,stop:d,reset:g}};function DeckViewer(){const{userID:t,id:e,"*":r}=useParams(),{getDeckbyID:a,deleteDeck:l,saveProgress:u,addtoDecks:d}=useDeckHandler(),{fetchQuestion:g}=useQuestions(),E=useNavigate(),{user:P}=reactExports.useContext(UserContext),[Z,me]=reactExports.useState(),[_e,He]=reactExports.useState([]),[Xe,wt]=reactExports.useState(0),{timeFormatted:Do,start:sr,stop:Ko,secondsElapsed:Bs,setSecondsElapsed:th}=useStopwatch();return reactExports.useEffect(()=>{!r&&!P?.decks?.some(_h=>_h.id===e)&&E(`/decks/${t}/${e}/preview`),(async()=>{try{const _h=await a(e,t);me(_h),th(_h?.timeElapsed),sr();const cf=_h?.questions.map(async li=>await g(li)),uf=(await Promise.all(cf)).filter(li=>li!==null);He(uf)}catch(_h){console.error("Error loading questions:",_h)}})()},[]),reactExports.useEffect(()=>{const pf=_h=>{_h.which===13&&wt(cf=>cf<_e.length-1?cf+1:0)};return window.addEventListener("keydown",pf),()=>window.removeEventListener("keydown",pf)},[_e,Xe]),jsxRuntimeExports.jsxs("div",{className:"w-h-container flex-col",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(LuArrowLeft,{className:"hover:scale-110 duration-200 transition-all color-txt-main inline",onClick:()=>{r==="preview"&&u([],e,Bs),E("/practice"),Ko()}}),r!=="preview"?jsxRuntimeExports.jsx("span",{className:"txt-heading-colour mx-8",children:Do}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx("span",{className:"txt-heading-colour mx-8",children:Z?.name}),r!=="preview"?jsxRuntimeExports.jsx(LuTrash,{className:"hover:scale-110 duration-200 transition-all color-txt-main inline",onClick:()=>{l(e),E("/practice"),Ko()}}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]}),jsxRuntimeExports.jsx(Question,{questions:_e,position:Xe,deckmode:!0,preview:r==="preview"}),r==="preview"?jsxRuntimeExports.jsx("span",{className:"blue-btn w-1/2 m-auto",onClick:()=>{d(Z.name,Z.description,Z.questions),E("/practice")},children:"Add to Decks"}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]})}function ProfileViewer(){const{userID:t}=useParams(),e=useNavigate(),[r,a]=reactExports.useState(),[l,u]=reactExports.useState(),[d,g]=reactExports.useState(),{fetchFriends:E,fetchUser:P,fetchDecks:Z}=useFetch();return reactExports.useEffect(()=>{(async()=>{const _e=await P(t),He=await E(t),Xe=await Z(t);console.log(_e),a(_e),u(He),g(Xe)})()},[]),jsxRuntimeExports.jsx("div",{className:"w-h-container justify-start items-start p-8",children:r?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:r.picture,className:"w-10 h-10 rounded-full inline object-cover border-2 border-light-grey dark:border-grey"}),jsxRuntimeExports.jsx("span",{className:"txt-heading-colour mx-4",children:r.username}),jsxRuntimeExports.jsx("span",{className:"txt-sub mx-4 inline",children:r.email})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"txt-heading",children:"User Friends"}),l?.map(me=>jsxRuntimeExports.jsxs("div",{className:"m-2",children:[jsxRuntimeExports.jsx("img",{src:me.picture,alt:me.picture,className:"w-10 h-10 rounded-full object-cover inline"}),jsxRuntimeExports.jsx("span",{className:"txt-bold mx-4 inline",children:me.username})]})),jsxRuntimeExports.jsx("p",{className:"txt-heading",children:"User Decks"}),d?.map(me=>jsxRuntimeExports.jsxs("div",{className:"deck",onClick:()=>{e(`/decks/${r.uid}/${me.id}`)},children:[jsxRuntimeExports.jsx("div",{className:"color-strip",style:{backgroundColor:me.color}}),jsxRuntimeExports.jsxs("div",{className:"deck-txt",children:[jsxRuntimeExports.jsx("span",{className:"txt-heading-colour",children:me.name}),jsxRuntimeExports.jsx("span",{className:"txt-sub",children:me.timestamp?new Date(me.timestamp.seconds*1e3).toLocaleDateString():""})]}),jsxRuntimeExports.jsxs("div",{className:"deck-txt",children:[jsxRuntimeExports.jsx("span",{className:"txt-sub",children:me.description}),jsxRuntimeExports.jsxs("span",{className:"txt-sub",children:[me.questions.length," question",me.questions.length!==1?"s":""]})]})]},me.id))]})]}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnim,loop:!0,autoplay:!0,className:"h-40 w-40"})})})}const router=createBrowserRouter([{path:"/",element:jsxRuntimeExports.jsx(Login,{})},{path:"/practice",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Questions,{})]})},{path:"/social/social",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Social$1,{})]})},{path:"/social/replies",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Replies,{})]})},{path:"/social/q_replies",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(QReplies,{})]})},{path:"/games",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Social,{})]})},{path:"/",element:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Login,{})})},{path:"/practice",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Questions,{})]})},{path:"/social",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Social$1,{})]})},{path:"/games",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Social,{})]})},{path:"/user/settings",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Settings,{})]})},{path:"/decks/:userID/:id/*",element:jsxRuntimeExports.jsx(DeckViewer,{})},{path:"/viewProfile/:userID",element:jsxRuntimeExports.jsx(ProfileViewer,{})}]);function AppRouter(){return jsxRuntimeExports.jsx(RouterProvider2,{router})}function App(){const[t,e]=reactExports.useState(()=>{const l=localStorage.getItem("USER");return l?JSON.parse(l):{}}),[r,a]=reactExports.useState(()=>{const l=localStorage.getItem("OPTIONS");return l?JSON.parse(l):{theme:"light"}});return reactExports.useEffect(()=>{localStorage.setItem("USER",JSON.stringify(t))},[t]),reactExports.useEffect(()=>{localStorage.setItem("OPTIONS",JSON.stringify(r))},[r]),jsxRuntimeExports.jsx(OptionsContext.Provider,{value:{options:r,setOptions:a},children:jsxRuntimeExports.jsx(UserContext.Provider,{value:{user:t,setUser:e},children:jsxRuntimeExports.jsx("div",{"data-theme":r.theme,children:jsxRuntimeExports.jsx("div",{className:"color-bg h-screen w-screen flex flex-row",children:jsxRuntimeExports.jsx(AppRouter,{})})})})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}))});export default dT();
