var Yx=t=>{throw TypeError(t)};var g9=(t,e,a)=>e.has(t)||Yx("Cannot "+a);var R3=(t,e,a)=>(g9(t,e,"read from private field"),a?a.call(t):e.get(t)),l5=(t,e,a)=>e.has(t)?Yx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),R6=(t,e,a,s)=>(g9(t,e,"write to private field"),s?s.call(t,a):e.set(t,a),a),u5=(t,e,a)=>(g9(t,e,"access private method"),a);var Qx=(t,e,a,s)=>({set _(o){R6(t,e,o,a)},get _(){return R3(t,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function a(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var c in o)c!=="key"&&(l[c]=o[c])}else l=o;return o=l.ref,{$$typeof:t,type:s,key:u,ref:o!==void 0?o:null,props:l}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=a,reactJsxRuntime_production.jsxs=a,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(t){function e(Fc,_h){var qc=Fc.length;Fc.push(_h);e:for(;0<qc;){var Mh=qc-1>>>1,cf=Fc[Mh];if(0<o(cf,_h))Fc[Mh]=_h,Fc[qc]=cf,qc=Mh;else break e}}function a(Fc){return Fc.length===0?null:Fc[0]}function s(Fc){if(Fc.length===0)return null;var _h=Fc[0],qc=Fc.pop();if(qc!==_h){Fc[0]=qc;e:for(var Mh=0,cf=Fc.length,mf=cf>>>1;Mh<mf;){var a1=2*(Mh+1)-1,s1=Fc[a1],E1=a1+1,T1=Fc[E1];if(0>o(s1,qc))E1<cf&&0>o(T1,s1)?(Fc[Mh]=T1,Fc[E1]=qc,Mh=E1):(Fc[Mh]=s1,Fc[a1]=qc,Mh=a1);else if(E1<cf&&0>o(T1,qc))Fc[Mh]=T1,Fc[E1]=qc,Mh=E1;else break e}}return _h}function o(Fc,_h){var qc=Fc.sortIndex-_h.sortIndex;return qc!==0?qc:Fc.id-_h.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var d=[],m=[],g=1,A=null,P=3,W=!1,me=!1,ve=!1,He=!1,De=typeof setTimeout=="function"?setTimeout:null,Xe=typeof clearTimeout=="function"?clearTimeout:null,qe=typeof setImmediate<"u"?setImmediate:null;function Rs(Fc){for(var _h=a(m);_h!==null;){if(_h.callback===null)s(m);else if(_h.startTime<=Fc)s(m),_h.sortIndex=_h.expirationTime,e(d,_h);else break;_h=a(m)}}function Vc(Fc){if(ve=!1,Rs(Fc),!me)if(a(d)!==null)me=!0,So||(So=!0,wt());else{var _h=a(m);_h!==null&&df(Vc,_h.startTime-Fc)}}var So=!1,Do=-1,eh=5,Ko=-1;function Ge(){return He?!0:!(t.unstable_now()-Ko<eh)}function An(){if(He=!1,So){var Fc=t.unstable_now();Ko=Fc;var _h=!0;try{e:{me=!1,ve&&(ve=!1,Xe(Do),Do=-1),W=!0;var qc=P;try{t:{for(Rs(Fc),A=a(d);A!==null&&!(A.expirationTime>Fc&&Ge());){var Mh=A.callback;if(typeof Mh=="function"){A.callback=null,P=A.priorityLevel;var cf=Mh(A.expirationTime<=Fc);if(Fc=t.unstable_now(),typeof cf=="function"){A.callback=cf,Rs(Fc),_h=!0;break t}A===a(d)&&s(d),Rs(Fc)}else s(d);A=a(d)}if(A!==null)_h=!0;else{var mf=a(m);mf!==null&&df(Vc,mf.startTime-Fc),_h=!1}}break e}finally{A=null,P=qc,W=!1}_h=void 0}}finally{_h?wt():So=!1}}}var wt;if(typeof qe=="function")wt=function(){qe(An)};else if(typeof MessageChannel<"u"){var Bs=new MessageChannel,yh=Bs.port2;Bs.port1.onmessage=An,wt=function(){yh.postMessage(null)}}else wt=function(){De(An,0)};function df(Fc,_h){Do=De(function(){Fc(t.unstable_now())},_h)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Fc){Fc.callback=null},t.unstable_forceFrameRate=function(Fc){0>Fc||125<Fc?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):eh=0<Fc?Math.floor(1e3/Fc):5},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_next=function(Fc){switch(P){case 1:case 2:case 3:var _h=3;break;default:_h=P}var qc=P;P=_h;try{return Fc()}finally{P=qc}},t.unstable_requestPaint=function(){He=!0},t.unstable_runWithPriority=function(Fc,_h){switch(Fc){case 1:case 2:case 3:case 4:case 5:break;default:Fc=3}var qc=P;P=Fc;try{return _h()}finally{P=qc}},t.unstable_scheduleCallback=function(Fc,_h,qc){var Mh=t.unstable_now();switch(typeof qc=="object"&&qc!==null?(qc=qc.delay,qc=typeof qc=="number"&&0<qc?Mh+qc:Mh):qc=Mh,Fc){case 1:var cf=-1;break;case 2:cf=250;break;case 5:cf=1073741823;break;case 4:cf=1e4;break;default:cf=5e3}return cf=qc+cf,Fc={id:g++,callback:_h,priorityLevel:Fc,startTime:qc,expirationTime:cf,sortIndex:-1},qc>Mh?(Fc.sortIndex=qc,e(m,Fc),a(d)===null&&Fc===a(m)&&(ve?(Xe(Do),Do=-1):ve=!0,df(Vc,qc-Mh))):(Fc.sortIndex=cf,e(d,Fc),me||W||(me=!0,So||(So=!0,wt()))),Fc},t.unstable_shouldYield=Ge,t.unstable_wrapCallback=function(Fc){var _h=P;return function(){var qc=P;P=_h;try{return Fc.apply(this,arguments)}finally{P=qc}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),A=Symbol.iterator;function P(cf){return cf===null||typeof cf!="object"?null:(cf=A&&cf[A]||cf["@@iterator"],typeof cf=="function"?cf:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},me=Object.assign,ve={};function He(cf,mf,a1){this.props=cf,this.context=mf,this.refs=ve,this.updater=a1||W}He.prototype.isReactComponent={},He.prototype.setState=function(cf,mf){if(typeof cf!="object"&&typeof cf!="function"&&cf!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,cf,mf,"setState")},He.prototype.forceUpdate=function(cf){this.updater.enqueueForceUpdate(this,cf,"forceUpdate")};function De(){}De.prototype=He.prototype;function Xe(cf,mf,a1){this.props=cf,this.context=mf,this.refs=ve,this.updater=a1||W}var qe=Xe.prototype=new De;qe.constructor=Xe,me(qe,He.prototype),qe.isPureReactComponent=!0;var Rs=Array.isArray,Vc={H:null,A:null,T:null,S:null,V:null},So=Object.prototype.hasOwnProperty;function Do(cf,mf,a1,s1,E1,T1){return a1=T1.ref,{$$typeof:t,type:cf,key:mf,ref:a1!==void 0?a1:null,props:T1}}function eh(cf,mf){return Do(cf.type,mf,void 0,void 0,void 0,cf.props)}function Ko(cf){return typeof cf=="object"&&cf!==null&&cf.$$typeof===t}function Ge(cf){var mf={"=":"=0",":":"=2"};return"$"+cf.replace(/[=:]/g,function(a1){return mf[a1]})}var An=/\/+/g;function wt(cf,mf){return typeof cf=="object"&&cf!==null&&cf.key!=null?Ge(""+cf.key):mf.toString(36)}function Bs(){}function yh(cf){switch(cf.status){case"fulfilled":return cf.value;case"rejected":throw cf.reason;default:switch(typeof cf.status=="string"?cf.then(Bs,Bs):(cf.status="pending",cf.then(function(mf){cf.status==="pending"&&(cf.status="fulfilled",cf.value=mf)},function(mf){cf.status==="pending"&&(cf.status="rejected",cf.reason=mf)})),cf.status){case"fulfilled":return cf.value;case"rejected":throw cf.reason}}throw cf}function df(cf,mf,a1,s1,E1){var T1=typeof cf;(T1==="undefined"||T1==="boolean")&&(cf=null);var z1=!1;if(cf===null)z1=!0;else switch(T1){case"bigint":case"string":case"number":z1=!0;break;case"object":switch(cf.$$typeof){case t:case e:z1=!0;break;case g:return z1=cf._init,df(z1(cf._payload),mf,a1,s1,E1)}}if(z1)return E1=E1(cf),z1=s1===""?"."+wt(cf,0):s1,Rs(E1)?(a1="",z1!=null&&(a1=z1.replace(An,"$&/")+"/"),df(E1,mf,a1,"",function(C2){return C2})):E1!=null&&(Ko(E1)&&(E1=eh(E1,a1+(E1.key==null||cf&&cf.key===E1.key?"":(""+E1.key).replace(An,"$&/")+"/")+z1)),mf.push(E1)),1;z1=0;var W1=s1===""?".":s1+":";if(Rs(cf))for(var m2=0;m2<cf.length;m2++)s1=cf[m2],T1=W1+wt(s1,m2),z1+=df(s1,mf,a1,T1,E1);else if(m2=P(cf),typeof m2=="function")for(cf=m2.call(cf),m2=0;!(s1=cf.next()).done;)s1=s1.value,T1=W1+wt(s1,m2++),z1+=df(s1,mf,a1,T1,E1);else if(T1==="object"){if(typeof cf.then=="function")return df(yh(cf),mf,a1,s1,E1);throw mf=String(cf),Error("Objects are not valid as a React child (found: "+(mf==="[object Object]"?"object with keys {"+Object.keys(cf).join(", ")+"}":mf)+"). If you meant to render a collection of children, use an array instead.")}return z1}function Fc(cf,mf,a1){if(cf==null)return cf;var s1=[],E1=0;return df(cf,s1,"","",function(T1){return mf.call(a1,T1,E1++)}),s1}function _h(cf){if(cf._status===-1){var mf=cf._result;mf=mf(),mf.then(function(a1){(cf._status===0||cf._status===-1)&&(cf._status=1,cf._result=a1)},function(a1){(cf._status===0||cf._status===-1)&&(cf._status=2,cf._result=a1)}),cf._status===-1&&(cf._status=0,cf._result=mf)}if(cf._status===1)return cf._result.default;throw cf._result}var qc=typeof reportError=="function"?reportError:function(cf){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var mf=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof cf=="object"&&cf!==null&&typeof cf.message=="string"?String(cf.message):String(cf),error:cf});if(!window.dispatchEvent(mf))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",cf);return}console.error(cf)};function Mh(){}return react_production.Children={map:Fc,forEach:function(cf,mf,a1){Fc(cf,function(){mf.apply(this,arguments)},a1)},count:function(cf){var mf=0;return Fc(cf,function(){mf++}),mf},toArray:function(cf){return Fc(cf,function(mf){return mf})||[]},only:function(cf){if(!Ko(cf))throw Error("React.Children.only expected to receive a single React element child.");return cf}},react_production.Component=He,react_production.Fragment=a,react_production.Profiler=o,react_production.PureComponent=Xe,react_production.StrictMode=s,react_production.Suspense=d,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Vc,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(cf){return Vc.H.useMemoCache(cf)}},react_production.cache=function(cf){return function(){return cf.apply(null,arguments)}},react_production.cloneElement=function(cf,mf,a1){if(cf==null)throw Error("The argument must be a React element, but you passed "+cf+".");var s1=me({},cf.props),E1=cf.key,T1=void 0;if(mf!=null)for(z1 in mf.ref!==void 0&&(T1=void 0),mf.key!==void 0&&(E1=""+mf.key),mf)!So.call(mf,z1)||z1==="key"||z1==="__self"||z1==="__source"||z1==="ref"&&mf.ref===void 0||(s1[z1]=mf[z1]);var z1=arguments.length-2;if(z1===1)s1.children=a1;else if(1<z1){for(var W1=Array(z1),m2=0;m2<z1;m2++)W1[m2]=arguments[m2+2];s1.children=W1}return Do(cf.type,E1,void 0,void 0,T1,s1)},react_production.createContext=function(cf){return cf={$$typeof:u,_currentValue:cf,_currentValue2:cf,_threadCount:0,Provider:null,Consumer:null},cf.Provider=cf,cf.Consumer={$$typeof:l,_context:cf},cf},react_production.createElement=function(cf,mf,a1){var s1,E1={},T1=null;if(mf!=null)for(s1 in mf.key!==void 0&&(T1=""+mf.key),mf)So.call(mf,s1)&&s1!=="key"&&s1!=="__self"&&s1!=="__source"&&(E1[s1]=mf[s1]);var z1=arguments.length-2;if(z1===1)E1.children=a1;else if(1<z1){for(var W1=Array(z1),m2=0;m2<z1;m2++)W1[m2]=arguments[m2+2];E1.children=W1}if(cf&&cf.defaultProps)for(s1 in z1=cf.defaultProps,z1)E1[s1]===void 0&&(E1[s1]=z1[s1]);return Do(cf,T1,void 0,void 0,null,E1)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(cf){return{$$typeof:c,render:cf}},react_production.isValidElement=Ko,react_production.lazy=function(cf){return{$$typeof:g,_payload:{_status:-1,_result:cf},_init:_h}},react_production.memo=function(cf,mf){return{$$typeof:m,type:cf,compare:mf===void 0?null:mf}},react_production.startTransition=function(cf){var mf=Vc.T,a1={};Vc.T=a1;try{var s1=cf(),E1=Vc.S;E1!==null&&E1(a1,s1),typeof s1=="object"&&s1!==null&&typeof s1.then=="function"&&s1.then(Mh,qc)}catch(T1){qc(T1)}finally{Vc.T=mf}},react_production.unstable_useCacheRefresh=function(){return Vc.H.useCacheRefresh()},react_production.use=function(cf){return Vc.H.use(cf)},react_production.useActionState=function(cf,mf,a1){return Vc.H.useActionState(cf,mf,a1)},react_production.useCallback=function(cf,mf){return Vc.H.useCallback(cf,mf)},react_production.useContext=function(cf){return Vc.H.useContext(cf)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(cf,mf){return Vc.H.useDeferredValue(cf,mf)},react_production.useEffect=function(cf,mf,a1){var s1=Vc.H;if(typeof a1=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s1.useEffect(cf,mf)},react_production.useId=function(){return Vc.H.useId()},react_production.useImperativeHandle=function(cf,mf,a1){return Vc.H.useImperativeHandle(cf,mf,a1)},react_production.useInsertionEffect=function(cf,mf){return Vc.H.useInsertionEffect(cf,mf)},react_production.useLayoutEffect=function(cf,mf){return Vc.H.useLayoutEffect(cf,mf)},react_production.useMemo=function(cf,mf){return Vc.H.useMemo(cf,mf)},react_production.useOptimistic=function(cf,mf){return Vc.H.useOptimistic(cf,mf)},react_production.useReducer=function(cf,mf,a1){return Vc.H.useReducer(cf,mf,a1)},react_production.useRef=function(cf){return Vc.H.useRef(cf)},react_production.useState=function(cf){return Vc.H.useState(cf)},react_production.useSyncExternalStore=function(cf,mf,a1){return Vc.H.useSyncExternalStore(cf,mf,a1)},react_production.useTransition=function(){return Vc.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(e(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(d,m,g){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:d,containerInfo:m,implementation:g}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,reactDom_production.createPortal=function(d,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(d,m,null,g)},reactDom_production.flushSync=function(d){var m=u.T,g=s.p;try{if(u.T=null,s.p=2,d)return d()}finally{u.T=m,s.p=g,s.d.f()}},reactDom_production.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(d,m))},reactDom_production.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},reactDom_production.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var g=m.as,A=c(g,m.crossOrigin),P=typeof m.integrity=="string"?m.integrity:void 0,W=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?s.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:A,integrity:P,fetchPriority:W}):g==="script"&&s.d.X(d,{crossOrigin:A,integrity:P,fetchPriority:W,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},reactDom_production.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=c(m.as,m.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(d)},reactDom_production.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,A=c(g,m.crossOrigin);s.d.L(d,g,{crossOrigin:A,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},reactDom_production.preloadModule=function(d,m){if(typeof d=="string")if(m){var g=c(m.as,m.crossOrigin);s.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(d)},reactDom_production.requestFormReset=function(d){s.d.r(d)},reactDom_production.unstable_batchedUpdates=function(d,m){return d(m)},reactDom_production.useFormState=function(d,m,g){return u.H.useFormState(d,m,g)},reactDom_production.useFormStatus=function(){return u.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),a=requireReactDom();function s(y){var E="https://react.dev/errors/"+y;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var Z=2;Z<arguments.length;Z++)E+="&args[]="+encodeURIComponent(arguments[Z])}return"Minified React error #"+y+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)}function l(y){var E=y,Z=y;if(y.alternate)for(;E.return;)E=E.return;else{y=E;do E=y,(E.flags&4098)!==0&&(Z=E.return),y=E.return;while(y)}return E.tag===3?Z:null}function u(y){if(y.tag===13){var E=y.memoizedState;if(E===null&&(y=y.alternate,y!==null&&(E=y.memoizedState)),E!==null)return E.dehydrated}return null}function c(y){if(l(y)!==y)throw Error(s(188))}function d(y){var E=y.alternate;if(!E){if(E=l(y),E===null)throw Error(s(188));return E!==y?null:y}for(var Z=y,_e=E;;){var Os=Z.return;if(Os===null)break;var th=Os.alternate;if(th===null){if(_e=Os.return,_e!==null){Z=_e;continue}break}if(Os.child===th.child){for(th=Os.child;th;){if(th===Z)return c(Os),y;if(th===_e)return c(Os),E;th=th.sibling}throw Error(s(188))}if(Z.return!==_e.return)Z=Os,_e=th;else{for(var i1=!1,f1=Os.child;f1;){if(f1===Z){i1=!0,Z=Os,_e=th;break}if(f1===_e){i1=!0,_e=Os,Z=th;break}f1=f1.sibling}if(!i1){for(f1=th.child;f1;){if(f1===Z){i1=!0,Z=th,_e=Os;break}if(f1===_e){i1=!0,_e=th,Z=Os;break}f1=f1.sibling}if(!i1)throw Error(s(189))}}if(Z.alternate!==_e)throw Error(s(190))}if(Z.tag!==3)throw Error(s(188));return Z.stateNode.current===Z?y:E}function m(y){var E=y.tag;if(E===5||E===26||E===27||E===6)return y;for(y=y.child;y!==null;){if(E=m(y),E!==null)return E;y=y.sibling}return null}var g=Object.assign,A=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),me=Symbol.for("react.fragment"),ve=Symbol.for("react.strict_mode"),He=Symbol.for("react.profiler"),De=Symbol.for("react.provider"),Xe=Symbol.for("react.consumer"),qe=Symbol.for("react.context"),Rs=Symbol.for("react.forward_ref"),Vc=Symbol.for("react.suspense"),So=Symbol.for("react.suspense_list"),Do=Symbol.for("react.memo"),eh=Symbol.for("react.lazy"),Ko=Symbol.for("react.activity"),Ge=Symbol.for("react.memo_cache_sentinel"),An=Symbol.iterator;function wt(y){return y===null||typeof y!="object"?null:(y=An&&y[An]||y["@@iterator"],typeof y=="function"?y:null)}var Bs=Symbol.for("react.client.reference");function yh(y){if(y==null)return null;if(typeof y=="function")return y.$$typeof===Bs?null:y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case me:return"Fragment";case He:return"Profiler";case ve:return"StrictMode";case Vc:return"Suspense";case So:return"SuspenseList";case Ko:return"Activity"}if(typeof y=="object")switch(y.$$typeof){case W:return"Portal";case qe:return(y.displayName||"Context")+".Provider";case Xe:return(y._context.displayName||"Context")+".Consumer";case Rs:var E=y.render;return y=y.displayName,y||(y=E.displayName||E.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case Do:return E=y.displayName||null,E!==null?E:yh(y.type)||"Memo";case eh:E=y._payload,y=y._init;try{return yh(y(E))}catch{}}return null}var df=Array.isArray,Fc=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_h=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qc={pending:!1,data:null,method:null,action:null},Mh=[],cf=-1;function mf(y){return{current:y}}function a1(y){0>cf||(y.current=Mh[cf],Mh[cf]=null,cf--)}function s1(y,E){cf++,Mh[cf]=y.current,y.current=E}var E1=mf(null),T1=mf(null),z1=mf(null),W1=mf(null);function m2(y,E){switch(s1(z1,E),s1(T1,y),s1(E1,null),E.nodeType){case 9:case 11:y=(y=E.documentElement)&&(y=y.namespaceURI)?Sx(y):0;break;default:if(y=E.tagName,E=E.namespaceURI)E=Sx(E),y=Ax(E,y);else switch(y){case"svg":y=1;break;case"math":y=2;break;default:y=0}}a1(E1),s1(E1,y)}function C2(){a1(E1),a1(T1),a1(z1)}function A2(y){y.memoizedState!==null&&s1(W1,y);var E=E1.current,Z=Ax(E,y.type);E!==Z&&(s1(T1,y),s1(E1,Z))}function b2(y){T1.current===y&&(a1(E1),a1(T1)),W1.current===y&&(a1(W1),Ty._currentValue=qc)}var _2=Object.prototype.hasOwnProperty,q1=t.unstable_scheduleCallback,U1=t.unstable_cancelCallback,M2=t.unstable_shouldYield,x2=t.unstable_requestPaint,p1=t.unstable_now,S1=t.unstable_getCurrentPriorityLevel,D1=t.unstable_ImmediatePriority,_1=t.unstable_UserBlockingPriority,B1=t.unstable_NormalPriority,c2=t.unstable_LowPriority,H1=t.unstable_IdlePriority,x1=t.log,pf=t.unstable_setDisableYieldValue,o1=null,e1=null;function w1(y){if(typeof x1=="function"&&pf(y),e1&&typeof e1.setStrictMode=="function")try{e1.setStrictMode(o1,y)}catch{}}var C1=Math.clz32?Math.clz32:v1,F1=Math.log,N1=Math.LN2;function v1(y){return y>>>=0,y===0?32:31-(F1(y)/N1|0)|0}var X1=256,i2=4194304;function f2(y){var E=y&42;if(E!==0)return E;switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return y&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return y}}function Y1(y,E,Z){var _e=y.pendingLanes;if(_e===0)return 0;var Os=0,th=y.suspendedLanes,i1=y.pingedLanes;y=y.warmLanes;var f1=_e&134217727;return f1!==0?(_e=f1&~th,_e!==0?Os=f2(_e):(i1&=f1,i1!==0?Os=f2(i1):Z||(Z=f1&~y,Z!==0&&(Os=f2(Z))))):(f1=_e&~th,f1!==0?Os=f2(f1):i1!==0?Os=f2(i1):Z||(Z=_e&~y,Z!==0&&(Os=f2(Z)))),Os===0?0:E!==0&&E!==Os&&(E&th)===0&&(th=Os&-Os,Z=E&-E,th>=Z||th===32&&(Z&4194048)!==0)?E:Os}function l2(y,E){return(y.pendingLanes&~(y.suspendedLanes&~y.pingedLanes)&E)===0}function Q1(y,E){switch(y){case 1:case 2:case 4:case 8:case 64:return E+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G1(){var y=X1;return X1<<=1,(X1&4194048)===0&&(X1=256),y}function P2(){var y=i2;return i2<<=1,(i2&62914560)===0&&(i2=4194304),y}function J1(y){for(var E=[],Z=0;31>Z;Z++)E.push(y);return E}function v2(y,E){y.pendingLanes|=E,E!==268435456&&(y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0)}function z2(y,E,Z,_e,Os,th){var i1=y.pendingLanes;y.pendingLanes=Z,y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0,y.expiredLanes&=Z,y.entangledLanes&=Z,y.errorRecoveryDisabledLanes&=Z,y.shellSuspendCounter=0;var f1=y.entanglements,I1=y.expirationTimes,o2=y.hiddenUpdates;for(Z=i1&~Z;0<Z;){var k2=31-C1(Z),O2=1<<k2;f1[k2]=0,I1[k2]=-1;var d2=o2[k2];if(d2!==null)for(o2[k2]=null,k2=0;k2<d2.length;k2++){var p2=d2[k2];p2!==null&&(p2.lane&=-536870913)}Z&=~O2}_e!==0&&q2(y,_e,0),th!==0&&Os===0&&y.tag!==0&&(y.suspendedLanes|=th&~(i1&~E))}function q2(y,E,Z){y.pendingLanes|=E,y.suspendedLanes&=~E;var _e=31-C1(E);y.entangledLanes|=E,y.entanglements[_e]=y.entanglements[_e]|1073741824|Z&4194090}function j2(y,E){var Z=y.entangledLanes|=E;for(y=y.entanglements;Z;){var _e=31-C1(Z),Os=1<<_e;Os&E|y[_e]&E&&(y[_e]|=E),Z&=~Os}}function n4(y){switch(y){case 2:y=1;break;case 8:y=4;break;case 32:y=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:y=128;break;case 268435456:y=134217728;break;default:y=0}return y}function X2(y){return y&=-y,2<y?8<y?(y&134217727)!==0?32:268435456:8:2}function b1(){var y=_h.p;return y!==0?y:(y=window.event,y===void 0?32:Ux(y.type))}function k1(y,E){var Z=_h.p;try{return _h.p=y,E()}finally{_h.p=Z}}var V1=Math.random().toString(36).slice(2),n2="__reactFiber$"+V1,y2="__reactProps$"+V1,Z1="__reactContainer$"+V1,T2="__reactEvents$"+V1,L2="__reactListeners$"+V1,uf="__reactHandles$"+V1,Qp="__reactResources$"+V1,gf="__reactMarker$"+V1;function Ym(y){delete y[n2],delete y[y2],delete y[T2],delete y[L2],delete y[uf]}function d1(y){var E=y[n2];if(E)return E;for(var Z=y.parentNode;Z;){if(E=Z[Z1]||Z[n2]){if(Z=E.alternate,E.child!==null||Z!==null&&Z.child!==null)for(y=Mx(y);y!==null;){if(Z=y[n2])return Z;y=Mx(y)}return E}y=Z,Z=y.parentNode}return null}function r1(y){if(y=y[n2]||y[Z1]){var E=y.tag;if(E===5||E===6||E===13||E===26||E===27||E===3)return y}return null}function g1(y){var E=y.tag;if(E===5||E===26||E===27||E===6)return y.stateNode;throw Error(s(33))}function R1(y){var E=y[Qp];return E||(E=y[Qp]={hoistableStyles:new Map,hoistableScripts:new Map}),E}function M1(y){y[gf]=!0}var L1=new Set,O1={};function a2(y,E){S2(y,E),S2(y+"Capture",E)}function S2(y,E){for(O1[y]=E,y=0;y<E.length;y++)L1.add(E[y])}var U2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),H2={},$2={};function r4(y){return _2.call($2,y)?!0:_2.call(H2,y)?!1:U2.test(y)?$2[y]=!0:(H2[y]=!0,!1)}function P4(y,E,Z){if(r4(E))if(Z===null)y.removeAttribute(E);else{switch(typeof Z){case"undefined":case"function":case"symbol":y.removeAttribute(E);return;case"boolean":var _e=E.toLowerCase().slice(0,5);if(_e!=="data-"&&_e!=="aria-"){y.removeAttribute(E);return}}y.setAttribute(E,""+Z)}}function A4(y,E,Z){if(Z===null)y.removeAttribute(E);else{switch(typeof Z){case"undefined":case"function":case"symbol":case"boolean":y.removeAttribute(E);return}y.setAttribute(E,""+Z)}}function Y2(y,E,Z,_e){if(_e===null)y.removeAttribute(Z);else{switch(typeof _e){case"undefined":case"function":case"symbol":case"boolean":y.removeAttribute(Z);return}y.setAttributeNS(E,Z,""+_e)}}var B2,d4;function Z2(y){if(B2===void 0)try{throw Error()}catch(Z){var E=Z.stack.trim().match(/\n( *(at )?)/);B2=E&&E[1]||"",d4=-1<Z.stack.indexOf(`
    at`)?" (<anonymous>)":-1<Z.stack.indexOf("@")?"@unknown:0:0":""}return`
`+B2+y+d4}var l4=!1;function f4(y,E){if(!y||l4)return"";l4=!0;var Z=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _e={DetermineComponentFrameRoot:function(){try{if(E){var O2=function(){throw Error()};if(Object.defineProperty(O2.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(O2,[])}catch(p2){var d2=p2}Reflect.construct(y,[],O2)}else{try{O2.call()}catch(p2){d2=p2}y.call(O2.prototype)}}else{try{throw Error()}catch(p2){d2=p2}(O2=y())&&typeof O2.catch=="function"&&O2.catch(function(){})}}catch(p2){if(p2&&d2&&typeof p2.stack=="string")return[p2.stack,d2.stack]}return[null,null]}};_e.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Os=Object.getOwnPropertyDescriptor(_e.DetermineComponentFrameRoot,"name");Os&&Os.configurable&&Object.defineProperty(_e.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var th=_e.DetermineComponentFrameRoot(),i1=th[0],f1=th[1];if(i1&&f1){var I1=i1.split(`
`),o2=f1.split(`
`);for(Os=_e=0;_e<I1.length&&!I1[_e].includes("DetermineComponentFrameRoot");)_e++;for(;Os<o2.length&&!o2[Os].includes("DetermineComponentFrameRoot");)Os++;if(_e===I1.length||Os===o2.length)for(_e=I1.length-1,Os=o2.length-1;1<=_e&&0<=Os&&I1[_e]!==o2[Os];)Os--;for(;1<=_e&&0<=Os;_e--,Os--)if(I1[_e]!==o2[Os]){if(_e!==1||Os!==1)do if(_e--,Os--,0>Os||I1[_e]!==o2[Os]){var k2=`
`+I1[_e].replace(" at new "," at ");return y.displayName&&k2.includes("<anonymous>")&&(k2=k2.replace("<anonymous>",y.displayName)),k2}while(1<=_e&&0<=Os);break}}}finally{l4=!1,Error.prepareStackTrace=Z}return(Z=y?y.displayName||y.name:"")?Z2(Z):""}function I2(y){switch(y.tag){case 26:case 27:case 5:return Z2(y.type);case 16:return Z2("Lazy");case 13:return Z2("Suspense");case 19:return Z2("SuspenseList");case 0:case 15:return f4(y.type,!1);case 11:return f4(y.type.render,!1);case 1:return f4(y.type,!0);case 31:return Z2("Activity");default:return""}}function h1(y){try{var E="";do E+=I2(y),y=y.return;while(y);return E}catch(Z){return`
Error generating stack: `+Z.message+`
`+Z.stack}}function H4(y){switch(typeof y){case"bigint":case"boolean":case"number":case"string":case"undefined":return y;case"object":return y;default:return""}}function s6(y){var E=y.type;return(y=y.nodeName)&&y.toLowerCase()==="input"&&(E==="checkbox"||E==="radio")}function g4(y){var E=s6(y)?"checked":"value",Z=Object.getOwnPropertyDescriptor(y.constructor.prototype,E),_e=""+y[E];if(!y.hasOwnProperty(E)&&typeof Z<"u"&&typeof Z.get=="function"&&typeof Z.set=="function"){var Os=Z.get,th=Z.set;return Object.defineProperty(y,E,{configurable:!0,get:function(){return Os.call(this)},set:function(i1){_e=""+i1,th.call(this,i1)}}),Object.defineProperty(y,E,{enumerable:Z.enumerable}),{getValue:function(){return _e},setValue:function(i1){_e=""+i1},stopTracking:function(){y._valueTracker=null,delete y[E]}}}}function I4(y){y._valueTracker||(y._valueTracker=g4(y))}function Q2(y){if(!y)return!1;var E=y._valueTracker;if(!E)return!0;var Z=E.getValue(),_e="";return y&&(_e=s6(y)?y.checked?"true":"false":y.value),y=_e,y!==Z?(E.setValue(y),!0):!1}function x4(y){if(y=y||(typeof document<"u"?document:void 0),typeof y>"u")return null;try{return y.activeElement||y.body}catch{return y.body}}var K3=/[\n"\\]/g;function b3(y){return y.replace(K3,function(E){return"\\"+E.charCodeAt(0).toString(16)+" "})}function W3(y,E,Z,_e,Os,th,i1,f1){y.name="",i1!=null&&typeof i1!="function"&&typeof i1!="symbol"&&typeof i1!="boolean"?y.type=i1:y.removeAttribute("type"),E!=null?i1==="number"?(E===0&&y.value===""||y.value!=E)&&(y.value=""+H4(E)):y.value!==""+H4(E)&&(y.value=""+H4(E)):i1!=="submit"&&i1!=="reset"||y.removeAttribute("value"),E!=null?ae(y,i1,H4(E)):Z!=null?ae(y,i1,H4(Z)):_e!=null&&y.removeAttribute("value"),Os==null&&th!=null&&(y.defaultChecked=!!th),Os!=null&&(y.checked=Os&&typeof Os!="function"&&typeof Os!="symbol"),f1!=null&&typeof f1!="function"&&typeof f1!="symbol"&&typeof f1!="boolean"?y.name=""+H4(f1):y.removeAttribute("name")}function m4(y,E,Z,_e,Os,th,i1,f1){if(th!=null&&typeof th!="function"&&typeof th!="symbol"&&typeof th!="boolean"&&(y.type=th),E!=null||Z!=null){if(!(th!=="submit"&&th!=="reset"||E!=null))return;Z=Z!=null?""+H4(Z):"",E=E!=null?""+H4(E):Z,f1||E===y.value||(y.value=E),y.defaultValue=E}_e=_e??Os,_e=typeof _e!="function"&&typeof _e!="symbol"&&!!_e,y.checked=f1?y.checked:!!_e,y.defaultChecked=!!_e,i1!=null&&typeof i1!="function"&&typeof i1!="symbol"&&typeof i1!="boolean"&&(y.name=i1)}function ae(y,E,Z){E==="number"&&x4(y.ownerDocument)===y||y.defaultValue===""+Z||(y.defaultValue=""+Z)}function To(y,E,Z,_e){if(y=y.options,E){E={};for(var Os=0;Os<Z.length;Os++)E["$"+Z[Os]]=!0;for(Z=0;Z<y.length;Z++)Os=E.hasOwnProperty("$"+y[Z].value),y[Z].selected!==Os&&(y[Z].selected=Os),Os&&_e&&(y[Z].defaultSelected=!0)}else{for(Z=""+H4(Z),E=null,Os=0;Os<y.length;Os++){if(y[Os].value===Z){y[Os].selected=!0,_e&&(y[Os].defaultSelected=!0);return}E!==null||y[Os].disabled||(E=y[Os])}E!==null&&(E.selected=!0)}}function wh(y,E,Z){if(E!=null&&(E=""+H4(E),E!==y.value&&(y.value=E),Z==null)){y.defaultValue!==E&&(y.defaultValue=E);return}y.defaultValue=Z!=null?""+H4(Z):""}function ff(y,E,Z,_e){if(E==null){if(_e!=null){if(Z!=null)throw Error(s(92));if(df(_e)){if(1<_e.length)throw Error(s(93));_e=_e[0]}Z=_e}Z==null&&(Z=""),E=Z}Z=H4(E),y.defaultValue=Z,_e=y.textContent,_e===Z&&_e!==""&&_e!==null&&(y.value=_e)}function n1(y,E){if(E){var Z=y.firstChild;if(Z&&Z===y.lastChild&&Z.nodeType===3){Z.nodeValue=E;return}}y.textContent=E}var c1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function u1(y,E,Z){var _e=E.indexOf("--")===0;Z==null||typeof Z=="boolean"||Z===""?_e?y.setProperty(E,""):E==="float"?y.cssFloat="":y[E]="":_e?y.setProperty(E,Z):typeof Z!="number"||Z===0||c1.has(E)?E==="float"?y.cssFloat=Z:y[E]=(""+Z).trim():y[E]=Z+"px"}function A1(y,E,Z){if(E!=null&&typeof E!="object")throw Error(s(62));if(y=y.style,Z!=null){for(var _e in Z)!Z.hasOwnProperty(_e)||E!=null&&E.hasOwnProperty(_e)||(_e.indexOf("--")===0?y.setProperty(_e,""):_e==="float"?y.cssFloat="":y[_e]="");for(var Os in E)_e=E[Os],E.hasOwnProperty(Os)&&Z[Os]!==_e&&u1(y,Os,_e)}else for(var th in E)E.hasOwnProperty(th)&&u1(y,th,E[th])}function u2(y){if(y.indexOf("-")===-1)return!1;switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var s2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),h2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function K2(y){return h2.test(""+y)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":y}var R2=null;function V2(y){return y=y.target||y.srcElement||window,y.correspondingUseElement&&(y=y.correspondingUseElement),y.nodeType===3?y.parentNode:y}var e4=null,t4=null;function v4(y){var E=r1(y);if(E&&(y=E.stateNode)){var Z=y[y2]||null;e:switch(y=E.stateNode,E.type){case"input":if(W3(y,Z.value,Z.defaultValue,Z.defaultValue,Z.checked,Z.defaultChecked,Z.type,Z.name),E=Z.name,Z.type==="radio"&&E!=null){for(Z=y;Z.parentNode;)Z=Z.parentNode;for(Z=Z.querySelectorAll('input[name="'+b3(""+E)+'"][type="radio"]'),E=0;E<Z.length;E++){var _e=Z[E];if(_e!==y&&_e.form===y.form){var Os=_e[y2]||null;if(!Os)throw Error(s(90));W3(_e,Os.value,Os.defaultValue,Os.defaultValue,Os.checked,Os.defaultChecked,Os.type,Os.name)}}for(E=0;E<Z.length;E++)_e=Z[E],_e.form===y.form&&Q2(_e)}break e;case"textarea":wh(y,Z.value,Z.defaultValue);break e;case"select":E=Z.value,E!=null&&To(y,!!Z.multiple,E,!1)}}}var w4=!1;function T4(y,E,Z){if(w4)return y(E,Z);w4=!0;try{var _e=y(E);return _e}finally{if(w4=!1,(e4!==null||t4!==null)&&(c8(),e4&&(E=e4,y=t4,t4=e4=null,v4(E),y)))for(E=0;E<y.length;E++)v4(y[E])}}function D4(y,E){var Z=y.stateNode;if(Z===null)return null;var _e=Z[y2]||null;if(_e===null)return null;Z=_e[E];e:switch(E){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_e=!_e.disabled)||(y=y.type,_e=!(y==="button"||y==="input"||y==="select"||y==="textarea")),y=!_e;break e;default:y=!1}if(y)return null;if(Z&&typeof Z!="function")throw Error(s(231,E,typeof Z));return Z}var C4=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s4=!1;if(C4)try{var Z4={};Object.defineProperty(Z4,"passive",{get:function(){s4=!0}}),window.addEventListener("test",Z4,Z4),window.removeEventListener("test",Z4,Z4)}catch{s4=!1}var h3=null,r3=null,R4=null;function B4(){if(R4)return R4;var y,E=r3,Z=E.length,_e,Os="value"in h3?h3.value:h3.textContent,th=Os.length;for(y=0;y<Z&&E[y]===Os[y];y++);var i1=Z-y;for(_e=1;_e<=i1&&E[Z-_e]===Os[th-_e];_e++);return R4=Os.slice(y,1<_e?1-_e:void 0)}function N4(y){var E=y.keyCode;return"charCode"in y?(y=y.charCode,y===0&&E===13&&(y=13)):y=E,y===10&&(y=13),32<=y||y===13?y:0}function W4(){return!0}function m3(){return!1}function M4(y){function E(Z,_e,Os,th,i1){this._reactName=Z,this._targetInst=Os,this.type=_e,this.nativeEvent=th,this.target=i1,this.currentTarget=null;for(var f1 in y)y.hasOwnProperty(f1)&&(Z=y[f1],this[f1]=Z?Z(th):th[f1]);return this.isDefaultPrevented=(th.defaultPrevented!=null?th.defaultPrevented:th.returnValue===!1)?W4:m3,this.isPropagationStopped=m3,this}return g(E.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Z=this.nativeEvent;Z&&(Z.preventDefault?Z.preventDefault():typeof Z.returnValue!="unknown"&&(Z.returnValue=!1),this.isDefaultPrevented=W4)},stopPropagation:function(){var Z=this.nativeEvent;Z&&(Z.stopPropagation?Z.stopPropagation():typeof Z.cancelBubble!="unknown"&&(Z.cancelBubble=!0),this.isPropagationStopped=W4)},persist:function(){},isPersistent:W4}),E}var p4={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(y){return y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E3=M4(p4),J4=g({},p4,{view:0,detail:0}),e6=M4(J4),X3,t6,I3,Y3=g({},J4,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:S3,button:0,buttons:0,relatedTarget:function(y){return y.relatedTarget===void 0?y.fromElement===y.srcElement?y.toElement:y.fromElement:y.relatedTarget},movementX:function(y){return"movementX"in y?y.movementX:(y!==I3&&(I3&&y.type==="mousemove"?(X3=y.screenX-I3.screenX,t6=y.screenY-I3.screenY):t6=X3=0,I3=y),X3)},movementY:function(y){return"movementY"in y?y.movementY:t6}}),D3=M4(Y3),h6=g({},Y3,{dataTransfer:0}),X6=M4(h6),d6=g({},J4,{relatedTarget:0}),b6=M4(d6),Q3=g({},p4,{animationName:0,elapsedTime:0,pseudoElement:0}),p6=M4(Q3),g3=g({},p4,{clipboardData:function(y){return"clipboardData"in y?y.clipboardData:window.clipboardData}}),k3=M4(g3),_6=g({},p4,{data:0}),d3=M4(_6),G4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},x6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w6(y){var E=this.nativeEvent;return E.getModifierState?E.getModifierState(y):(y=_3[y])?!!E[y]:!1}function S3(){return w6}var r6=g({},J4,{key:function(y){if(y.key){var E=G4[y.key]||y.key;if(E!=="Unidentified")return E}return y.type==="keypress"?(y=N4(y),y===13?"Enter":String.fromCharCode(y)):y.type==="keydown"||y.type==="keyup"?x6[y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:S3,charCode:function(y){return y.type==="keypress"?N4(y):0},keyCode:function(y){return y.type==="keydown"||y.type==="keyup"?y.keyCode:0},which:function(y){return y.type==="keypress"?N4(y):y.type==="keydown"||y.type==="keyup"?y.keyCode:0}}),E6=M4(r6),e5=g({},Y3,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J5=M4(e5),Y6=g({},J4,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:S3}),vv=M4(Y6),yv=g({},p4,{propertyName:0,elapsedTime:0,pseudoElement:0}),bv=M4(yv),_v=g({},Y3,{deltaX:function(y){return"deltaX"in y?y.deltaX:"wheelDeltaX"in y?-y.wheelDeltaX:0},deltaY:function(y){return"deltaY"in y?y.deltaY:"wheelDeltaY"in y?-y.wheelDeltaY:"wheelDelta"in y?-y.wheelDelta:0},deltaZ:0,deltaMode:0}),C5=M4(_v),o6=g({},p4,{newState:0,oldState:0}),xv=M4(o6),wv=[9,13,27,32],O6=C4&&"CompositionEvent"in window,li=null;C4&&"documentMode"in document&&(li=document.documentMode);var hf=C4&&"TextEvent"in window&&!li,t1=C4&&(!O6||li&&8<li&&11>=li),y1=" ",e2=!1;function E2(y,E){switch(y){case"keyup":return wv.indexOf(E.keyCode)!==-1;case"keydown":return E.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W2(y){return y=y.detail,typeof y=="object"&&"data"in y?y.data:null}var $4=!1;function B3(y,E){switch(y){case"compositionend":return W2(E);case"keypress":return E.which!==32?null:(e2=!0,y1);case"textInput":return y=E.data,y===y1&&e2?null:y;default:return null}}function U4(y,E){if($4)return y==="compositionend"||!O6&&E2(y,E)?(y=B4(),R4=r3=h3=null,$4=!1,y):null;switch(y){case"paste":return null;case"keypress":if(!(E.ctrlKey||E.altKey||E.metaKey)||E.ctrlKey&&E.altKey){if(E.char&&1<E.char.length)return E.char;if(E.which)return String.fromCharCode(E.which)}return null;case"compositionend":return t1&&E.locale!=="ko"?null:E.data;default:return null}}var L3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V3(y){var E=y&&y.nodeName&&y.nodeName.toLowerCase();return E==="input"?!!L3[y.type]:E==="textarea"}function m6(y,E,Z,_e){e4?t4?t4.push(_e):t4=[_e]:e4=_e,E=g8(E,"onChange"),0<E.length&&(Z=new E3("onChange","change",null,Z,_e),y.push({event:Z,listeners:E}))}var sr=null,Hc=null;function l1(y){bx(y,0)}function m1(y){var E=g1(y);if(Q2(E))return y}function P1(y,E){if(y==="change")return E}var $1=!1;if(C4){var t2;if(C4){var g2="oninput"in document;if(!g2){var N2=document.createElement("div");N2.setAttribute("oninput","return;"),g2=typeof N2.oninput=="function"}t2=g2}else t2=!1;$1=t2&&(!document.documentMode||9<document.documentMode)}function F2(){sr&&(sr.detachEvent("onpropertychange",J2),Hc=sr=null)}function J2(y){if(y.propertyName==="value"&&m1(Hc)){var E=[];m6(E,Hc,y,V2(y)),T4(l1,E)}}function w2(y,E,Z){y==="focusin"?(F2(),sr=E,Hc=Z,sr.attachEvent("onpropertychange",J2)):y==="focusout"&&F2()}function u4(y){if(y==="selectionchange"||y==="keyup"||y==="keydown")return m1(Hc)}function a4(y,E){if(y==="click")return m1(E)}function c4(y,E){if(y==="input"||y==="change")return m1(E)}function b4(y,E){return y===E&&(y!==0||1/y===1/E)||y!==y&&E!==E}var y4=typeof Object.is=="function"?Object.is:b4;function L4(y,E){if(y4(y,E))return!0;if(typeof y!="object"||y===null||typeof E!="object"||E===null)return!1;var Z=Object.keys(y),_e=Object.keys(E);if(Z.length!==_e.length)return!1;for(_e=0;_e<Z.length;_e++){var Os=Z[_e];if(!_2.call(E,Os)||!y4(y[Os],E[Os]))return!1}return!0}function G2(y){for(;y&&y.firstChild;)y=y.firstChild;return y}function h4(y,E){var Z=G2(y);y=0;for(var _e;Z;){if(Z.nodeType===3){if(_e=y+Z.textContent.length,y<=E&&_e>=E)return{node:Z,offset:E-y};y=_e}e:{for(;Z;){if(Z.nextSibling){Z=Z.nextSibling;break e}Z=Z.parentNode}Z=void 0}Z=G2(Z)}}function V4(y,E){return y&&E?y===E?!0:y&&y.nodeType===3?!1:E&&E.nodeType===3?V4(y,E.parentNode):"contains"in y?y.contains(E):y.compareDocumentPosition?!!(y.compareDocumentPosition(E)&16):!1:!1}function k4(y){y=y!=null&&y.ownerDocument!=null&&y.ownerDocument.defaultView!=null?y.ownerDocument.defaultView:window;for(var E=x4(y.document);E instanceof y.HTMLIFrameElement;){try{var Z=typeof E.contentWindow.location.href=="string"}catch{Z=!1}if(Z)y=E.contentWindow;else break;E=x4(y.document)}return E}function K4(y){var E=y&&y.nodeName&&y.nodeName.toLowerCase();return E&&(E==="input"&&(y.type==="text"||y.type==="search"||y.type==="tel"||y.type==="url"||y.type==="password")||E==="textarea"||y.contentEditable==="true")}var i3=C4&&"documentMode"in document&&11>=document.documentMode,q4=null,Y4=null,e3=null,A3=!1;function x3(y,E,Z){var _e=Z.window===Z?Z.document:Z.nodeType===9?Z:Z.ownerDocument;A3||q4==null||q4!==x4(_e)||(_e=q4,"selectionStart"in _e&&K4(_e)?_e={start:_e.selectionStart,end:_e.selectionEnd}:(_e=(_e.ownerDocument&&_e.ownerDocument.defaultView||window).getSelection(),_e={anchorNode:_e.anchorNode,anchorOffset:_e.anchorOffset,focusNode:_e.focusNode,focusOffset:_e.focusOffset}),e3&&L4(e3,_e)||(e3=_e,_e=g8(Y4,"onSelect"),0<_e.length&&(E=new E3("onSelect","select",null,E,Z),y.push({event:E,listeners:_e}),E.target=q4)))}function n3(y,E){var Z={};return Z[y.toLowerCase()]=E.toLowerCase(),Z["Webkit"+y]="webkit"+E,Z["Moz"+y]="moz"+E,Z}var v3={animationend:n3("Animation","AnimationEnd"),animationiteration:n3("Animation","AnimationIteration"),animationstart:n3("Animation","AnimationStart"),transitionrun:n3("Transition","TransitionRun"),transitionstart:n3("Transition","TransitionStart"),transitioncancel:n3("Transition","TransitionCancel"),transitionend:n3("Transition","TransitionEnd")},S6={},w3={};C4&&(w3=document.createElement("div").style,"AnimationEvent"in window||(delete v3.animationend.animation,delete v3.animationiteration.animation,delete v3.animationstart.animation),"TransitionEvent"in window||delete v3.transitionend.transition);function q3(y){if(S6[y])return S6[y];if(!v3[y])return y;var E=v3[y],Z;for(Z in E)if(E.hasOwnProperty(Z)&&Z in w3)return S6[y]=E[Z];return y}var M6=q3("animationend"),g6=q3("animationiteration"),a3=q3("animationstart"),z3=q3("transitionrun"),T3=q3("transitionstart"),k6=q3("transitioncancel"),B6=q3("transitionend"),c5=new Map,t5="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");t5.push("scrollEnd");function N3(y,E){c5.set(y,E),a2(E,[y])}var R5=new WeakMap;function j3(y,E){if(typeof y=="object"&&y!==null){var Z=R5.get(y);return Z!==void 0?Z:(E={value:y,source:E,stack:h1(E)},R5.set(y,E),E)}return{value:y,source:E,stack:h1(E)}}var f3=[],V6=0,q6=0;function z6(){for(var y=V6,E=q6=V6=0;E<y;){var Z=f3[E];f3[E++]=null;var _e=f3[E];f3[E++]=null;var Os=f3[E];f3[E++]=null;var th=f3[E];if(f3[E++]=null,_e!==null&&Os!==null){var i1=_e.pending;i1===null?Os.next=Os:(Os.next=i1.next,i1.next=Os),_e.pending=Os}th!==0&&v9(Z,Os,th)}}function r5(y,E,Z,_e){f3[V6++]=y,f3[V6++]=E,f3[V6++]=Z,f3[V6++]=_e,q6|=_e,y.lanes|=_e,y=y.alternate,y!==null&&(y.lanes|=_e)}function ev(y,E,Z,_e){return r5(y,E,Z,_e),Ly(y)}function M5(y,E){return r5(y,null,null,E),Ly(y)}function v9(y,E,Z){y.lanes|=Z;var _e=y.alternate;_e!==null&&(_e.lanes|=Z);for(var Os=!1,th=y.return;th!==null;)th.childLanes|=Z,_e=th.alternate,_e!==null&&(_e.childLanes|=Z),th.tag===22&&(y=th.stateNode,y===null||y._visibility&1||(Os=!0)),y=th,th=th.return;return y.tag===3?(th=y.stateNode,Os&&E!==null&&(Os=31-C1(Z),y=th.hiddenUpdates,_e=y[Os],_e===null?y[Os]=[E]:_e.push(E),E.lane=Z|536870912),th):null}function Ly(y){if(50<yy)throw yy=0,q7=null,Error(s(185));for(var E=y.return;E!==null;)y=E,E=y.return;return y.tag===3?y.stateNode:null}var Ev={};function Fw(y,E,Z,_e){this.tag=y,this.key=Z,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_e,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function P6(y,E,Z,_e){return new Fw(y,E,Z,_e)}function N8(y){return y=y.prototype,!(!y||!y.isReactComponent)}function h5(y,E){var Z=y.alternate;return Z===null?(Z=P6(y.tag,E,y.key,y.mode),Z.elementType=y.elementType,Z.type=y.type,Z.stateNode=y.stateNode,Z.alternate=y,y.alternate=Z):(Z.pendingProps=E,Z.type=y.type,Z.flags=0,Z.subtreeFlags=0,Z.deletions=null),Z.flags=y.flags&65011712,Z.childLanes=y.childLanes,Z.lanes=y.lanes,Z.child=y.child,Z.memoizedProps=y.memoizedProps,Z.memoizedState=y.memoizedState,Z.updateQueue=y.updateQueue,E=y.dependencies,Z.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},Z.sibling=y.sibling,Z.index=y.index,Z.ref=y.ref,Z.refCleanup=y.refCleanup,Z}function y9(y,E){y.flags&=65011714;var Z=y.alternate;return Z===null?(y.childLanes=0,y.lanes=E,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=Z.childLanes,y.lanes=Z.lanes,y.child=Z.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=Z.memoizedProps,y.memoizedState=Z.memoizedState,y.updateQueue=Z.updateQueue,y.type=Z.type,E=Z.dependencies,y.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),y}function Ny(y,E,Z,_e,Os,th){var i1=0;if(_e=y,typeof y=="function")N8(y)&&(i1=1);else if(typeof y=="string")i1=BE(y,Z,E1.current)?26:y==="html"||y==="head"||y==="body"?27:5;else e:switch(y){case Ko:return y=P6(31,Z,E,Os),y.elementType=Ko,y.lanes=th,y;case me:return tv(Z.children,Os,th,E);case ve:i1=8,Os|=24;break;case He:return y=P6(12,Z,E,Os|2),y.elementType=He,y.lanes=th,y;case Vc:return y=P6(13,Z,E,Os),y.elementType=Vc,y.lanes=th,y;case So:return y=P6(19,Z,E,Os),y.elementType=So,y.lanes=th,y;default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case De:case qe:i1=10;break e;case Xe:i1=9;break e;case Rs:i1=11;break e;case Do:i1=14;break e;case eh:i1=16,_e=null;break e}i1=29,Z=Error(s(130,y===null?"null":typeof y,"")),_e=null}return E=P6(i1,Z,E,Os),E.elementType=y,E.type=_e,E.lanes=th,E}function tv(y,E,Z,_e){return y=P6(7,y,_e,E),y.lanes=Z,y}function F8(y,E,Z){return y=P6(6,y,null,E),y.lanes=Z,y}function O8(y,E,Z){return E=P6(4,y.children!==null?y.children:[],y.key,E),E.lanes=Z,E.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},E}var Sv=[],Av=0,Fy=null,Oy=0,j6=[],$6=0,rv=null,d5=1,f5="";function iv(y,E){Sv[Av++]=Oy,Sv[Av++]=Fy,Fy=y,Oy=E}function b9(y,E,Z){j6[$6++]=d5,j6[$6++]=f5,j6[$6++]=rv,rv=y;var _e=d5;y=f5;var Os=32-C1(_e)-1;_e&=~(1<<Os),Z+=1;var th=32-C1(E)+Os;if(30<th){var i1=Os-Os%5;th=(_e&(1<<i1)-1).toString(32),_e>>=i1,Os-=i1,d5=1<<32-C1(E)+Os|Z<<Os|_e,f5=th+y}else d5=1<<th|Z<<Os|_e,f5=y}function B8(y){y.return!==null&&(iv(y,1),b9(y,1,0))}function V8(y){for(;y===Fy;)Fy=Sv[--Av],Sv[Av]=null,Oy=Sv[--Av],Sv[Av]=null;for(;y===rv;)rv=j6[--$6],j6[$6]=null,f5=j6[--$6],j6[$6]=null,d5=j6[--$6],j6[$6]=null}var v6=null,F3=null,t3=!1,nv=null,i5=!1,q8=Error(s(519));function av(y){var E=Error(s(418,""));throw Yv(j3(E,y)),q8}function _9(y){var E=y.stateNode,Z=y.type,_e=y.memoizedProps;switch(E[n2]=y,E[y2]=_e,Z){case"dialog":j4("cancel",E),j4("close",E);break;case"iframe":case"object":case"embed":j4("load",E);break;case"video":case"audio":for(Z=0;Z<_y.length;Z++)j4(_y[Z],E);break;case"source":j4("error",E);break;case"img":case"image":case"link":j4("error",E),j4("load",E);break;case"details":j4("toggle",E);break;case"input":j4("invalid",E),m4(E,_e.value,_e.defaultValue,_e.checked,_e.defaultChecked,_e.type,_e.name,!0),I4(E);break;case"select":j4("invalid",E);break;case"textarea":j4("invalid",E),ff(E,_e.value,_e.defaultValue,_e.children),I4(E)}Z=_e.children,typeof Z!="string"&&typeof Z!="number"&&typeof Z!="bigint"||E.textContent===""+Z||_e.suppressHydrationWarning===!0||Ex(E.textContent,Z)?(_e.popover!=null&&(j4("beforetoggle",E),j4("toggle",E)),_e.onScroll!=null&&j4("scroll",E),_e.onScrollEnd!=null&&j4("scrollend",E),_e.onClick!=null&&(E.onclick=v8),E=!0):E=!1,E||av(y)}function x9(y){for(v6=y.return;v6;)switch(v6.tag){case 5:case 13:i5=!1;return;case 27:case 3:i5=!0;return;default:v6=v6.return}}function Wv(y){if(y!==v6)return!1;if(!t3)return x9(y),t3=!0,!1;var E=y.tag,Z;if((Z=E!==3&&E!==27)&&((Z=E===5)&&(Z=y.type,Z=!(Z!=="form"&&Z!=="button")||r9(y.type,y.memoizedProps)),Z=!Z),Z&&F3&&av(y),x9(y),E===13){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));e:{for(y=y.nextSibling,E=0;y;){if(y.nodeType===8)if(Z=y.data,Z==="/$"){if(E===0){F3=Z6(y.nextSibling);break e}E--}else Z!=="$"&&Z!=="$!"&&Z!=="$?"||E++;y=y.nextSibling}F3=null}}else E===27?(E=F3,H5(y.type)?(y=s9,s9=null,F3=y):F3=E):F3=v6?Z6(y.stateNode.nextSibling):null;return!0}function Xv(){F3=v6=null,t3=!1}function w9(){var y=nv;return y!==null&&(C6===null?C6=y:C6.push.apply(C6,y),nv=null),y}function Yv(y){nv===null?nv=[y]:nv.push(y)}var z8=mf(null),sv=null,p5=null;function k5(y,E,Z){s1(z8,E._currentValue),E._currentValue=Z}function m5(y){y._currentValue=z8.current,a1(z8)}function j8(y,E,Z){for(;y!==null;){var _e=y.alternate;if((y.childLanes&E)!==E?(y.childLanes|=E,_e!==null&&(_e.childLanes|=E)):_e!==null&&(_e.childLanes&E)!==E&&(_e.childLanes|=E),y===Z)break;y=y.return}}function $8(y,E,Z,_e){var Os=y.child;for(Os!==null&&(Os.return=y);Os!==null;){var th=Os.dependencies;if(th!==null){var i1=Os.child;th=th.firstContext;e:for(;th!==null;){var f1=th;th=Os;for(var I1=0;I1<E.length;I1++)if(f1.context===E[I1]){th.lanes|=Z,f1=th.alternate,f1!==null&&(f1.lanes|=Z),j8(th.return,Z,y),_e||(i1=null);break e}th=f1.next}}else if(Os.tag===18){if(i1=Os.return,i1===null)throw Error(s(341));i1.lanes|=Z,th=i1.alternate,th!==null&&(th.lanes|=Z),j8(i1,Z,y),i1=null}else i1=Os.child;if(i1!==null)i1.return=Os;else for(i1=Os;i1!==null;){if(i1===y){i1=null;break}if(Os=i1.sibling,Os!==null){Os.return=i1.return,i1=Os;break}i1=i1.return}Os=i1}}function Qv(y,E,Z,_e){y=null;for(var Os=E,th=!1;Os!==null;){if(!th){if((Os.flags&524288)!==0)th=!0;else if((Os.flags&262144)!==0)break}if(Os.tag===10){var i1=Os.alternate;if(i1===null)throw Error(s(387));if(i1=i1.memoizedProps,i1!==null){var f1=Os.type;y4(Os.pendingProps.value,i1.value)||(y!==null?y.push(f1):y=[f1])}}else if(Os===W1.current){if(i1=Os.alternate,i1===null)throw Error(s(387));i1.memoizedState.memoizedState!==Os.memoizedState.memoizedState&&(y!==null?y.push(Ty):y=[Ty])}Os=Os.return}y!==null&&$8(E,y,Z,_e),E.flags|=262144}function By(y){for(y=y.firstContext;y!==null;){if(!y4(y.context._currentValue,y.memoizedValue))return!0;y=y.next}return!1}function ov(y){sv=y,p5=null,y=y.dependencies,y!==null&&(y.firstContext=null)}function f6(y){return E9(sv,y)}function Vy(y,E){return sv===null&&ov(y),E9(y,E)}function E9(y,E){var Z=E._currentValue;if(E={context:E,memoizedValue:Z,next:null},p5===null){if(y===null)throw Error(s(308));p5=E,y.dependencies={lanes:0,firstContext:E},y.flags|=524288}else p5=p5.next=E;return Z}var Ow=typeof AbortController<"u"?AbortController:function(){var y=[],E=this.signal={aborted:!1,addEventListener:function(Z,_e){y.push(_e)}};this.abort=function(){E.aborted=!0,y.forEach(function(Z){return Z()})}},Bw=t.unstable_scheduleCallback,Vw=t.unstable_NormalPriority,Z3={$$typeof:qe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function U8(){return{controller:new Ow,data:new Map,refCount:0}}function Zv(y){y.refCount--,y.refCount===0&&Bw(Vw,function(){y.controller.abort()})}var Jv=null,H8=0,Tv=0,Cv=null;function qw(y,E){if(Jv===null){var Z=Jv=[];H8=0,Tv=K7(),Cv={status:"pending",value:void 0,then:function(_e){Z.push(_e)}}}return H8++,E.then(S9,S9),E}function S9(){if(--H8===0&&Jv!==null){Cv!==null&&(Cv.status="fulfilled");var y=Jv;Jv=null,Tv=0,Cv=null;for(var E=0;E<y.length;E++)(0,y[E])()}}function zw(y,E){var Z=[],_e={status:"pending",value:null,reason:null,then:function(Os){Z.push(Os)}};return y.then(function(){_e.status="fulfilled",_e.value=E;for(var Os=0;Os<Z.length;Os++)(0,Z[Os])(E)},function(Os){for(_e.status="rejected",_e.reason=Os,Os=0;Os<Z.length;Os++)(0,Z[Os])(void 0)}),_e}var A9=Fc.S;Fc.S=function(y,E){typeof E=="object"&&E!==null&&typeof E.then=="function"&&qw(y,E),A9!==null&&A9(y,E)};var lv=mf(null);function G8(){var y=lv.current;return y!==null?y:y3.pooledCache}function qy(y,E){E===null?s1(lv,lv.current):s1(lv,E.pool)}function T9(){var y=G8();return y===null?null:{parent:Z3._currentValue,pool:y}}var ey=Error(s(460)),C9=Error(s(474)),zy=Error(s(542)),K8={then:function(){}};function R9(y){return y=y.status,y==="fulfilled"||y==="rejected"}function jy(){}function M9(y,E,Z){switch(Z=y[Z],Z===void 0?y.push(E):Z!==E&&(E.then(jy,jy),E=Z),E.status){case"fulfilled":return E.value;case"rejected":throw y=E.reason,P9(y),y;default:if(typeof E.status=="string")E.then(jy,jy);else{if(y=y3,y!==null&&100<y.shellSuspendCounter)throw Error(s(482));y=E,y.status="pending",y.then(function(_e){if(E.status==="pending"){var Os=E;Os.status="fulfilled",Os.value=_e}},function(_e){if(E.status==="pending"){var Os=E;Os.status="rejected",Os.reason=_e}})}switch(E.status){case"fulfilled":return E.value;case"rejected":throw y=E.reason,P9(y),y}throw ty=E,ey}}var ty=null;function k9(){if(ty===null)throw Error(s(459));var y=ty;return ty=null,y}function P9(y){if(y===ey||y===zy)throw Error(s(483))}var P5=!1;function W8(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function X8(y,E){y=y.updateQueue,E.updateQueue===y&&(E.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,callbacks:null})}function I5(y){return{lane:y,tag:0,payload:null,callback:null,next:null}}function D5(y,E,Z){var _e=y.updateQueue;if(_e===null)return null;if(_e=_e.shared,(s3&2)!==0){var Os=_e.pending;return Os===null?E.next=E:(E.next=Os.next,Os.next=E),_e.pending=E,E=Ly(y),v9(y,null,Z),E}return r5(y,_e,E,Z),Ly(y)}function ry(y,E,Z){if(E=E.updateQueue,E!==null&&(E=E.shared,(Z&4194048)!==0)){var _e=E.lanes;_e&=y.pendingLanes,Z|=_e,E.lanes=Z,j2(y,Z)}}function Y8(y,E){var Z=y.updateQueue,_e=y.alternate;if(_e!==null&&(_e=_e.updateQueue,Z===_e)){var Os=null,th=null;if(Z=Z.firstBaseUpdate,Z!==null){do{var i1={lane:Z.lane,tag:Z.tag,payload:Z.payload,callback:null,next:null};th===null?Os=th=i1:th=th.next=i1,Z=Z.next}while(Z!==null);th===null?Os=th=E:th=th.next=E}else Os=th=E;Z={baseState:_e.baseState,firstBaseUpdate:Os,lastBaseUpdate:th,shared:_e.shared,callbacks:_e.callbacks},y.updateQueue=Z;return}y=Z.lastBaseUpdate,y===null?Z.firstBaseUpdate=E:y.next=E,Z.lastBaseUpdate=E}var Q8=!1;function iy(){if(Q8){var y=Cv;if(y!==null)throw y}}function ny(y,E,Z,_e){Q8=!1;var Os=y.updateQueue;P5=!1;var th=Os.firstBaseUpdate,i1=Os.lastBaseUpdate,f1=Os.shared.pending;if(f1!==null){Os.shared.pending=null;var I1=f1,o2=I1.next;I1.next=null,i1===null?th=o2:i1.next=o2,i1=I1;var k2=y.alternate;k2!==null&&(k2=k2.updateQueue,f1=k2.lastBaseUpdate,f1!==i1&&(f1===null?k2.firstBaseUpdate=o2:f1.next=o2,k2.lastBaseUpdate=I1))}if(th!==null){var O2=Os.baseState;i1=0,k2=o2=I1=null,f1=th;do{var d2=f1.lane&-536870913,p2=d2!==f1.lane;if(p2?(X4&d2)===d2:(_e&d2)===d2){d2!==0&&d2===Tv&&(Q8=!0),k2!==null&&(k2=k2.next={lane:0,tag:f1.tag,payload:f1.payload,callback:null,next:null});e:{var S4=y,_4=f1;d2=E;var c3=Z;switch(_4.tag){case 1:if(S4=_4.payload,typeof S4=="function"){O2=S4.call(c3,O2,d2);break e}O2=S4;break e;case 3:S4.flags=S4.flags&-65537|128;case 0:if(S4=_4.payload,d2=typeof S4=="function"?S4.call(c3,O2,d2):S4,d2==null)break e;O2=g({},O2,d2);break e;case 2:P5=!0}}d2=f1.callback,d2!==null&&(y.flags|=64,p2&&(y.flags|=8192),p2=Os.callbacks,p2===null?Os.callbacks=[d2]:p2.push(d2))}else p2={lane:d2,tag:f1.tag,payload:f1.payload,callback:f1.callback,next:null},k2===null?(o2=k2=p2,I1=O2):k2=k2.next=p2,i1|=d2;if(f1=f1.next,f1===null){if(f1=Os.shared.pending,f1===null)break;p2=f1,f1=p2.next,p2.next=null,Os.lastBaseUpdate=p2,Os.shared.pending=null}}while(!0);k2===null&&(I1=O2),Os.baseState=I1,Os.firstBaseUpdate=o2,Os.lastBaseUpdate=k2,th===null&&(Os.shared.lanes=0),z5|=i1,y.lanes=i1,y.memoizedState=O2}}function I9(y,E){if(typeof y!="function")throw Error(s(191,y));y.call(E)}function D9(y,E){var Z=y.callbacks;if(Z!==null)for(y.callbacks=null,y=0;y<Z.length;y++)I9(Z[y],E)}var Rv=mf(null),$y=mf(0);function L9(y,E){y=w5,s1($y,y),s1(Rv,E),w5=y|E.baseLanes}function Z8(){s1($y,w5),s1(Rv,Rv.current)}function J8(){w5=$y.current,a1(Rv),a1($y)}var L5=0,F4=null,l3=null,H3=null,Uy=!1,Mv=!1,uv=!1,Hy=0,ay=0,kv=null,jw=0;function $3(){throw Error(s(321))}function e7(y,E){if(E===null)return!1;for(var Z=0;Z<E.length&&Z<y.length;Z++)if(!y4(y[Z],E[Z]))return!1;return!0}function t7(y,E,Z,_e,Os,th){return L5=th,F4=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,Fc.H=y===null||y.memoizedState===null?r_:i_,uv=!1,th=Z(_e,Os),uv=!1,Mv&&(th=F9(E,Z,_e,Os)),N9(y),th}function N9(y){Fc.H=Qy;var E=l3!==null&&l3.next!==null;if(L5=0,H3=l3=F4=null,Uy=!1,ay=0,kv=null,E)throw Error(s(300));y===null||i6||(y=y.dependencies,y!==null&&By(y)&&(i6=!0))}function F9(y,E,Z,_e){F4=y;var Os=0;do{if(Mv&&(kv=null),ay=0,Mv=!1,25<=Os)throw Error(s(301));if(Os+=1,H3=l3=null,y.updateQueue!=null){var th=y.updateQueue;th.lastEffect=null,th.events=null,th.stores=null,th.memoCache!=null&&(th.memoCache.index=0)}Fc.H=Xw,th=E(Z,_e)}while(Mv);return th}function $w(){var y=Fc.H,E=y.useState()[0];return E=typeof E.then=="function"?sy(E):E,y=y.useState()[0],(l3!==null?l3.memoizedState:null)!==y&&(F4.flags|=1024),E}function r7(){var y=Hy!==0;return Hy=0,y}function i7(y,E,Z){E.updateQueue=y.updateQueue,E.flags&=-2053,y.lanes&=~Z}function n7(y){if(Uy){for(y=y.memoizedState;y!==null;){var E=y.queue;E!==null&&(E.pending=null),y=y.next}Uy=!1}L5=0,H3=l3=F4=null,Mv=!1,ay=Hy=0,kv=null}function A6(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return H3===null?F4.memoizedState=H3=y:H3=H3.next=y,H3}function G3(){if(l3===null){var y=F4.alternate;y=y!==null?y.memoizedState:null}else y=l3.next;var E=H3===null?F4.memoizedState:H3.next;if(E!==null)H3=E,l3=y;else{if(y===null)throw F4.alternate===null?Error(s(467)):Error(s(310));l3=y,y={memoizedState:l3.memoizedState,baseState:l3.baseState,baseQueue:l3.baseQueue,queue:l3.queue,next:null},H3===null?F4.memoizedState=H3=y:H3=H3.next=y}return H3}function a7(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sy(y){var E=ay;return ay+=1,kv===null&&(kv=[]),y=M9(kv,y,E),E=F4,(H3===null?E.memoizedState:H3.next)===null&&(E=E.alternate,Fc.H=E===null||E.memoizedState===null?r_:i_),y}function Gy(y){if(y!==null&&typeof y=="object"){if(typeof y.then=="function")return sy(y);if(y.$$typeof===qe)return f6(y)}throw Error(s(438,String(y)))}function s7(y){var E=null,Z=F4.updateQueue;if(Z!==null&&(E=Z.memoCache),E==null){var _e=F4.alternate;_e!==null&&(_e=_e.updateQueue,_e!==null&&(_e=_e.memoCache,_e!=null&&(E={data:_e.data.map(function(Os){return Os.slice()}),index:0})))}if(E==null&&(E={data:[],index:0}),Z===null&&(Z=a7(),F4.updateQueue=Z),Z.memoCache=E,Z=E.data[E.index],Z===void 0)for(Z=E.data[E.index]=Array(y),_e=0;_e<y;_e++)Z[_e]=Ge;return E.index++,Z}function g5(y,E){return typeof E=="function"?E(y):E}function Ky(y){var E=G3();return o7(E,l3,y)}function o7(y,E,Z){var _e=y.queue;if(_e===null)throw Error(s(311));_e.lastRenderedReducer=Z;var Os=y.baseQueue,th=_e.pending;if(th!==null){if(Os!==null){var i1=Os.next;Os.next=th.next,th.next=i1}E.baseQueue=Os=th,_e.pending=null}if(th=y.baseState,Os===null)y.memoizedState=th;else{E=Os.next;var f1=i1=null,I1=null,o2=E,k2=!1;do{var O2=o2.lane&-536870913;if(O2!==o2.lane?(X4&O2)===O2:(L5&O2)===O2){var d2=o2.revertLane;if(d2===0)I1!==null&&(I1=I1.next={lane:0,revertLane:0,action:o2.action,hasEagerState:o2.hasEagerState,eagerState:o2.eagerState,next:null}),O2===Tv&&(k2=!0);else if((L5&d2)===d2){o2=o2.next,d2===Tv&&(k2=!0);continue}else O2={lane:0,revertLane:o2.revertLane,action:o2.action,hasEagerState:o2.hasEagerState,eagerState:o2.eagerState,next:null},I1===null?(f1=I1=O2,i1=th):I1=I1.next=O2,F4.lanes|=d2,z5|=d2;O2=o2.action,uv&&Z(th,O2),th=o2.hasEagerState?o2.eagerState:Z(th,O2)}else d2={lane:O2,revertLane:o2.revertLane,action:o2.action,hasEagerState:o2.hasEagerState,eagerState:o2.eagerState,next:null},I1===null?(f1=I1=d2,i1=th):I1=I1.next=d2,F4.lanes|=O2,z5|=O2;o2=o2.next}while(o2!==null&&o2!==E);if(I1===null?i1=th:I1.next=f1,!y4(th,y.memoizedState)&&(i6=!0,k2&&(Z=Cv,Z!==null)))throw Z;y.memoizedState=th,y.baseState=i1,y.baseQueue=I1,_e.lastRenderedState=th}return Os===null&&(_e.lanes=0),[y.memoizedState,_e.dispatch]}function l7(y){var E=G3(),Z=E.queue;if(Z===null)throw Error(s(311));Z.lastRenderedReducer=y;var _e=Z.dispatch,Os=Z.pending,th=E.memoizedState;if(Os!==null){Z.pending=null;var i1=Os=Os.next;do th=y(th,i1.action),i1=i1.next;while(i1!==Os);y4(th,E.memoizedState)||(i6=!0),E.memoizedState=th,E.baseQueue===null&&(E.baseState=th),Z.lastRenderedState=th}return[th,_e]}function O9(y,E,Z){var _e=F4,Os=G3(),th=t3;if(th){if(Z===void 0)throw Error(s(407));Z=Z()}else Z=E();var i1=!y4((l3||Os).memoizedState,Z);i1&&(Os.memoizedState=Z,i6=!0),Os=Os.queue;var f1=q9.bind(null,_e,Os,y);if(oy(2048,8,f1,[y]),Os.getSnapshot!==E||i1||H3!==null&&H3.memoizedState.tag&1){if(_e.flags|=2048,Pv(9,Wy(),V9.bind(null,_e,Os,Z,E),null),y3===null)throw Error(s(349));th||(L5&124)!==0||B9(_e,E,Z)}return Z}function B9(y,E,Z){y.flags|=16384,y={getSnapshot:E,value:Z},E=F4.updateQueue,E===null?(E=a7(),F4.updateQueue=E,E.stores=[y]):(Z=E.stores,Z===null?E.stores=[y]:Z.push(y))}function V9(y,E,Z,_e){E.value=Z,E.getSnapshot=_e,z9(E)&&j9(y)}function q9(y,E,Z){return Z(function(){z9(E)&&j9(y)})}function z9(y){var E=y.getSnapshot;y=y.value;try{var Z=E();return!y4(y,Z)}catch{return!0}}function j9(y){var E=M5(y,2);E!==null&&F6(E,y,2)}function u7(y){var E=A6();if(typeof y=="function"){var Z=y;if(y=Z(),uv){w1(!0);try{Z()}finally{w1(!1)}}}return E.memoizedState=E.baseState=y,E.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g5,lastRenderedState:y},E}function $9(y,E,Z,_e){return y.baseState=Z,o7(y,l3,typeof _e=="function"?_e:g5)}function Uw(y,E,Z,_e,Os){if(Yy(y))throw Error(s(485));if(y=E.action,y!==null){var th={payload:Os,action:y,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i1){th.listeners.push(i1)}};Fc.T!==null?Z(!0):th.isTransition=!1,_e(th),Z=E.pending,Z===null?(th.next=E.pending=th,U9(E,th)):(th.next=Z.next,E.pending=Z.next=th)}}function U9(y,E){var Z=E.action,_e=E.payload,Os=y.state;if(E.isTransition){var th=Fc.T,i1={};Fc.T=i1;try{var f1=Z(Os,_e),I1=Fc.S;I1!==null&&I1(i1,f1),H9(y,E,f1)}catch(o2){c7(y,E,o2)}finally{Fc.T=th}}else try{th=Z(Os,_e),H9(y,E,th)}catch(o2){c7(y,E,o2)}}function H9(y,E,Z){Z!==null&&typeof Z=="object"&&typeof Z.then=="function"?Z.then(function(_e){G9(y,E,_e)},function(_e){return c7(y,E,_e)}):G9(y,E,Z)}function G9(y,E,Z){E.status="fulfilled",E.value=Z,K9(E),y.state=Z,E=y.pending,E!==null&&(Z=E.next,Z===E?y.pending=null:(Z=Z.next,E.next=Z,U9(y,Z)))}function c7(y,E,Z){var _e=y.pending;if(y.pending=null,_e!==null){_e=_e.next;do E.status="rejected",E.reason=Z,K9(E),E=E.next;while(E!==_e)}y.action=null}function K9(y){y=y.listeners;for(var E=0;E<y.length;E++)(0,y[E])()}function W9(y,E){return E}function X9(y,E){if(t3){var Z=y3.formState;if(Z!==null){e:{var _e=F4;if(t3){if(F3){t:{for(var Os=F3,th=i5;Os.nodeType!==8;){if(!th){Os=null;break t}if(Os=Z6(Os.nextSibling),Os===null){Os=null;break t}}th=Os.data,Os=th==="F!"||th==="F"?Os:null}if(Os){F3=Z6(Os.nextSibling),_e=Os.data==="F!";break e}}av(_e)}_e=!1}_e&&(E=Z[0])}}return Z=A6(),Z.memoizedState=Z.baseState=E,_e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:W9,lastRenderedState:E},Z.queue=_e,Z=Jb.bind(null,F4,_e),_e.dispatch=Z,_e=u7(!1),th=m7.bind(null,F4,!1,_e.queue),_e=A6(),Os={state:E,dispatch:null,action:y,pending:null},_e.queue=Os,Z=Uw.bind(null,F4,Os,th,Z),Os.dispatch=Z,_e.memoizedState=y,[E,Z,!1]}function Y9(y){var E=G3();return Q9(E,l3,y)}function Q9(y,E,Z){if(E=o7(y,E,W9)[0],y=Ky(g5)[0],typeof E=="object"&&E!==null&&typeof E.then=="function")try{var _e=sy(E)}catch(i1){throw i1===ey?zy:i1}else _e=E;E=G3();var Os=E.queue,th=Os.dispatch;return Z!==E.memoizedState&&(F4.flags|=2048,Pv(9,Wy(),Hw.bind(null,Os,Z),null)),[_e,th,y]}function Hw(y,E){y.action=E}function Z9(y){var E=G3(),Z=l3;if(Z!==null)return Q9(E,Z,y);G3(),E=E.memoizedState,Z=G3();var _e=Z.queue.dispatch;return Z.memoizedState=y,[E,_e,!1]}function Pv(y,E,Z,_e){return y={tag:y,create:Z,deps:_e,inst:E,next:null},E=F4.updateQueue,E===null&&(E=a7(),F4.updateQueue=E),Z=E.lastEffect,Z===null?E.lastEffect=y.next=y:(_e=Z.next,Z.next=y,y.next=_e,E.lastEffect=y),y}function Wy(){return{destroy:void 0,resource:void 0}}function J9(){return G3().memoizedState}function Xy(y,E,Z,_e){var Os=A6();_e=_e===void 0?null:_e,F4.flags|=y,Os.memoizedState=Pv(1|E,Wy(),Z,_e)}function oy(y,E,Z,_e){var Os=G3();_e=_e===void 0?null:_e;var th=Os.memoizedState.inst;l3!==null&&_e!==null&&e7(_e,l3.memoizedState.deps)?Os.memoizedState=Pv(E,th,Z,_e):(F4.flags|=y,Os.memoizedState=Pv(1|E,th,Z,_e))}function Ib(y,E){Xy(8390656,8,y,E)}function Nb(y,E){oy(2048,8,y,E)}function Fb(y,E){return oy(4,2,y,E)}function zb(y,E){return oy(4,4,y,E)}function jb(y,E){if(typeof E=="function"){y=y();var Z=E(y);return function(){typeof Z=="function"?Z():E(null)}}if(E!=null)return y=y(),E.current=y,function(){E.current=null}}function $b(y,E,Z){Z=Z!=null?Z.concat([y]):null,oy(4,4,jb.bind(null,E,y),Z)}function h7(){}function Ub(y,E){var Z=G3();E=E===void 0?null:E;var _e=Z.memoizedState;return E!==null&&e7(E,_e[1])?_e[0]:(Z.memoizedState=[y,E],y)}function Hb(y,E){var Z=G3();E=E===void 0?null:E;var _e=Z.memoizedState;if(E!==null&&e7(E,_e[1]))return _e[0];if(_e=y(),uv){w1(!0);try{y()}finally{w1(!1)}}return Z.memoizedState=[_e,E],_e}function d7(y,E,Z){return Z===void 0||(L5&1073741824)!==0?y.memoizedState=E:(y.memoizedState=Z,y=X_(),F4.lanes|=y,z5|=y,Z)}function Gb(y,E,Z,_e){return y4(Z,E)?Z:Rv.current!==null?(y=d7(y,Z,_e),y4(y,E)||(i6=!0),y):(L5&42)===0?(i6=!0,y.memoizedState=Z):(y=X_(),F4.lanes|=y,z5|=y,E)}function Wb(y,E,Z,_e,Os){var th=_h.p;_h.p=th!==0&&8>th?th:8;var i1=Fc.T,f1={};Fc.T=f1,m7(y,!1,E,Z);try{var I1=Os(),o2=Fc.S;if(o2!==null&&o2(f1,I1),I1!==null&&typeof I1=="object"&&typeof I1.then=="function"){var k2=zw(I1,_e);ly(y,E,k2,N6(y))}else ly(y,E,_e,N6(y))}catch(O2){ly(y,E,{then:function(){},status:"rejected",reason:O2},N6())}finally{_h.p=th,Fc.T=i1}}function Gw(){}function f7(y,E,Z,_e){if(y.tag!==5)throw Error(s(476));var Os=Xb(y).queue;Wb(y,Os,E,qc,Z===null?Gw:function(){return Yb(y),Z(_e)})}function Xb(y){var E=y.memoizedState;if(E!==null)return E;E={memoizedState:qc,baseState:qc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:g5,lastRenderedState:qc},next:null};var Z={};return E.next={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:g5,lastRenderedState:Z},next:null},y.memoizedState=E,y=y.alternate,y!==null&&(y.memoizedState=E),E}function Yb(y){var E=Xb(y).next.queue;ly(y,E,{},N6())}function p7(){return f6(Ty)}function Qb(){return G3().memoizedState}function Zb(){return G3().memoizedState}function Kw(y){for(var E=y.return;E!==null;){switch(E.tag){case 24:case 3:var Z=N6();y=I5(Z);var _e=D5(E,y,Z);_e!==null&&(F6(_e,E,Z),ry(_e,E,Z)),E={cache:U8()},y.payload=E;return}E=E.return}}function Ww(y,E,Z){var _e=N6();Z={lane:_e,revertLane:0,action:Z,hasEagerState:!1,eagerState:null,next:null},Yy(y)?e_(E,Z):(Z=ev(y,E,Z,_e),Z!==null&&(F6(Z,y,_e),t_(Z,E,_e)))}function Jb(y,E,Z){var _e=N6();ly(y,E,Z,_e)}function ly(y,E,Z,_e){var Os={lane:_e,revertLane:0,action:Z,hasEagerState:!1,eagerState:null,next:null};if(Yy(y))e_(E,Os);else{var th=y.alternate;if(y.lanes===0&&(th===null||th.lanes===0)&&(th=E.lastRenderedReducer,th!==null))try{var i1=E.lastRenderedState,f1=th(i1,Z);if(Os.hasEagerState=!0,Os.eagerState=f1,y4(f1,i1))return r5(y,E,Os,0),y3===null&&z6(),!1}catch{}finally{}if(Z=ev(y,E,Os,_e),Z!==null)return F6(Z,y,_e),t_(Z,E,_e),!0}return!1}function m7(y,E,Z,_e){if(_e={lane:2,revertLane:K7(),action:_e,hasEagerState:!1,eagerState:null,next:null},Yy(y)){if(E)throw Error(s(479))}else E=ev(y,Z,_e,2),E!==null&&F6(E,y,2)}function Yy(y){var E=y.alternate;return y===F4||E!==null&&E===F4}function e_(y,E){Mv=Uy=!0;var Z=y.pending;Z===null?E.next=E:(E.next=Z.next,Z.next=E),y.pending=E}function t_(y,E,Z){if((Z&4194048)!==0){var _e=E.lanes;_e&=y.pendingLanes,Z|=_e,E.lanes=Z,j2(y,Z)}}var Qy={readContext:f6,use:Gy,useCallback:$3,useContext:$3,useEffect:$3,useImperativeHandle:$3,useLayoutEffect:$3,useInsertionEffect:$3,useMemo:$3,useReducer:$3,useRef:$3,useState:$3,useDebugValue:$3,useDeferredValue:$3,useTransition:$3,useSyncExternalStore:$3,useId:$3,useHostTransitionStatus:$3,useFormState:$3,useActionState:$3,useOptimistic:$3,useMemoCache:$3,useCacheRefresh:$3},r_={readContext:f6,use:Gy,useCallback:function(y,E){return A6().memoizedState=[y,E===void 0?null:E],y},useContext:f6,useEffect:Ib,useImperativeHandle:function(y,E,Z){Z=Z!=null?Z.concat([y]):null,Xy(4194308,4,jb.bind(null,E,y),Z)},useLayoutEffect:function(y,E){return Xy(4194308,4,y,E)},useInsertionEffect:function(y,E){Xy(4,2,y,E)},useMemo:function(y,E){var Z=A6();E=E===void 0?null:E;var _e=y();if(uv){w1(!0);try{y()}finally{w1(!1)}}return Z.memoizedState=[_e,E],_e},useReducer:function(y,E,Z){var _e=A6();if(Z!==void 0){var Os=Z(E);if(uv){w1(!0);try{Z(E)}finally{w1(!1)}}}else Os=E;return _e.memoizedState=_e.baseState=Os,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:Os},_e.queue=y,y=y.dispatch=Ww.bind(null,F4,y),[_e.memoizedState,y]},useRef:function(y){var E=A6();return y={current:y},E.memoizedState=y},useState:function(y){y=u7(y);var E=y.queue,Z=Jb.bind(null,F4,E);return E.dispatch=Z,[y.memoizedState,Z]},useDebugValue:h7,useDeferredValue:function(y,E){var Z=A6();return d7(Z,y,E)},useTransition:function(){var y=u7(!1);return y=Wb.bind(null,F4,y.queue,!0,!1),A6().memoizedState=y,[!1,y]},useSyncExternalStore:function(y,E,Z){var _e=F4,Os=A6();if(t3){if(Z===void 0)throw Error(s(407));Z=Z()}else{if(Z=E(),y3===null)throw Error(s(349));(X4&124)!==0||B9(_e,E,Z)}Os.memoizedState=Z;var th={value:Z,getSnapshot:E};return Os.queue=th,Ib(q9.bind(null,_e,th,y),[y]),_e.flags|=2048,Pv(9,Wy(),V9.bind(null,_e,th,Z,E),null),Z},useId:function(){var y=A6(),E=y3.identifierPrefix;if(t3){var Z=f5,_e=d5;Z=(_e&~(1<<32-C1(_e)-1)).toString(32)+Z,E=""+E+"R"+Z,Z=Hy++,0<Z&&(E+="H"+Z.toString(32)),E+=""}else Z=jw++,E=""+E+"r"+Z.toString(32)+"";return y.memoizedState=E},useHostTransitionStatus:p7,useFormState:X9,useActionState:X9,useOptimistic:function(y){var E=A6();E.memoizedState=E.baseState=y;var Z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return E.queue=Z,E=m7.bind(null,F4,!0,Z),Z.dispatch=E,[y,E]},useMemoCache:s7,useCacheRefresh:function(){return A6().memoizedState=Kw.bind(null,F4)}},i_={readContext:f6,use:Gy,useCallback:Ub,useContext:f6,useEffect:Nb,useImperativeHandle:$b,useInsertionEffect:Fb,useLayoutEffect:zb,useMemo:Hb,useReducer:Ky,useRef:J9,useState:function(){return Ky(g5)},useDebugValue:h7,useDeferredValue:function(y,E){var Z=G3();return Gb(Z,l3.memoizedState,y,E)},useTransition:function(){var y=Ky(g5)[0],E=G3().memoizedState;return[typeof y=="boolean"?y:sy(y),E]},useSyncExternalStore:O9,useId:Qb,useHostTransitionStatus:p7,useFormState:Y9,useActionState:Y9,useOptimistic:function(y,E){var Z=G3();return $9(Z,l3,y,E)},useMemoCache:s7,useCacheRefresh:Zb},Xw={readContext:f6,use:Gy,useCallback:Ub,useContext:f6,useEffect:Nb,useImperativeHandle:$b,useInsertionEffect:Fb,useLayoutEffect:zb,useMemo:Hb,useReducer:l7,useRef:J9,useState:function(){return l7(g5)},useDebugValue:h7,useDeferredValue:function(y,E){var Z=G3();return l3===null?d7(Z,y,E):Gb(Z,l3.memoizedState,y,E)},useTransition:function(){var y=l7(g5)[0],E=G3().memoizedState;return[typeof y=="boolean"?y:sy(y),E]},useSyncExternalStore:O9,useId:Qb,useHostTransitionStatus:p7,useFormState:Z9,useActionState:Z9,useOptimistic:function(y,E){var Z=G3();return l3!==null?$9(Z,l3,y,E):(Z.baseState=y,[y,Z.queue.dispatch])},useMemoCache:s7,useCacheRefresh:Zb},Iv=null,uy=0;function Zy(y){var E=uy;return uy+=1,Iv===null&&(Iv=[]),M9(Iv,y,E)}function cy(y,E){E=E.props.ref,y.ref=E!==void 0?E:null}function Jy(y,E){throw E.$$typeof===A?Error(s(525)):(y=Object.prototype.toString.call(E),Error(s(31,y==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":y)))}function n_(y){var E=y._init;return E(y._payload)}function a_(y){function E(K1,j1){if(y){var r2=K1.deletions;r2===null?(K1.deletions=[j1],K1.flags|=16):r2.push(j1)}}function Z(K1,j1){if(!y)return null;for(;j1!==null;)E(K1,j1),j1=j1.sibling;return null}function _e(K1){for(var j1=new Map;K1!==null;)K1.key!==null?j1.set(K1.key,K1):j1.set(K1.index,K1),K1=K1.sibling;return j1}function Os(K1,j1){return K1=h5(K1,j1),K1.index=0,K1.sibling=null,K1}function th(K1,j1,r2){return K1.index=r2,y?(r2=K1.alternate,r2!==null?(r2=r2.index,r2<j1?(K1.flags|=67108866,j1):r2):(K1.flags|=67108866,j1)):(K1.flags|=1048576,j1)}function i1(K1){return y&&K1.alternate===null&&(K1.flags|=67108866),K1}function f1(K1,j1,r2,D2){return j1===null||j1.tag!==6?(j1=F8(r2,K1.mode,D2),j1.return=K1,j1):(j1=Os(j1,r2),j1.return=K1,j1)}function I1(K1,j1,r2,D2){var i4=r2.type;return i4===me?k2(K1,j1,r2.props.children,D2,r2.key):j1!==null&&(j1.elementType===i4||typeof i4=="object"&&i4!==null&&i4.$$typeof===eh&&n_(i4)===j1.type)?(j1=Os(j1,r2.props),cy(j1,r2),j1.return=K1,j1):(j1=Ny(r2.type,r2.key,r2.props,null,K1.mode,D2),cy(j1,r2),j1.return=K1,j1)}function o2(K1,j1,r2,D2){return j1===null||j1.tag!==4||j1.stateNode.containerInfo!==r2.containerInfo||j1.stateNode.implementation!==r2.implementation?(j1=O8(r2,K1.mode,D2),j1.return=K1,j1):(j1=Os(j1,r2.children||[]),j1.return=K1,j1)}function k2(K1,j1,r2,D2,i4){return j1===null||j1.tag!==7?(j1=tv(r2,K1.mode,D2,i4),j1.return=K1,j1):(j1=Os(j1,r2),j1.return=K1,j1)}function O2(K1,j1,r2){if(typeof j1=="string"&&j1!==""||typeof j1=="number"||typeof j1=="bigint")return j1=F8(""+j1,K1.mode,r2),j1.return=K1,j1;if(typeof j1=="object"&&j1!==null){switch(j1.$$typeof){case P:return r2=Ny(j1.type,j1.key,j1.props,null,K1.mode,r2),cy(r2,j1),r2.return=K1,r2;case W:return j1=O8(j1,K1.mode,r2),j1.return=K1,j1;case eh:var D2=j1._init;return j1=D2(j1._payload),O2(K1,j1,r2)}if(df(j1)||wt(j1))return j1=tv(j1,K1.mode,r2,null),j1.return=K1,j1;if(typeof j1.then=="function")return O2(K1,Zy(j1),r2);if(j1.$$typeof===qe)return O2(K1,Vy(K1,j1),r2);Jy(K1,j1)}return null}function d2(K1,j1,r2,D2){var i4=j1!==null?j1.key:null;if(typeof r2=="string"&&r2!==""||typeof r2=="number"||typeof r2=="bigint")return i4!==null?null:f1(K1,j1,""+r2,D2);if(typeof r2=="object"&&r2!==null){switch(r2.$$typeof){case P:return r2.key===i4?I1(K1,j1,r2,D2):null;case W:return r2.key===i4?o2(K1,j1,r2,D2):null;case eh:return i4=r2._init,r2=i4(r2._payload),d2(K1,j1,r2,D2)}if(df(r2)||wt(r2))return i4!==null?null:k2(K1,j1,r2,D2,null);if(typeof r2.then=="function")return d2(K1,j1,Zy(r2),D2);if(r2.$$typeof===qe)return d2(K1,j1,Vy(K1,r2),D2);Jy(K1,r2)}return null}function p2(K1,j1,r2,D2,i4){if(typeof D2=="string"&&D2!==""||typeof D2=="number"||typeof D2=="bigint")return K1=K1.get(r2)||null,f1(j1,K1,""+D2,i4);if(typeof D2=="object"&&D2!==null){switch(D2.$$typeof){case P:return K1=K1.get(D2.key===null?r2:D2.key)||null,I1(j1,K1,D2,i4);case W:return K1=K1.get(D2.key===null?r2:D2.key)||null,o2(j1,K1,D2,i4);case eh:var O4=D2._init;return D2=O4(D2._payload),p2(K1,j1,r2,D2,i4)}if(df(D2)||wt(D2))return K1=K1.get(r2)||null,k2(j1,K1,D2,i4,null);if(typeof D2.then=="function")return p2(K1,j1,r2,Zy(D2),i4);if(D2.$$typeof===qe)return p2(K1,j1,r2,Vy(j1,D2),i4);Jy(j1,D2)}return null}function S4(K1,j1,r2,D2){for(var i4=null,O4=null,o4=j1,E4=j1=0,a6=null;o4!==null&&E4<r2.length;E4++){o4.index>E4?(a6=o4,o4=null):a6=o4.sibling;var Q4=d2(K1,o4,r2[E4],D2);if(Q4===null){o4===null&&(o4=a6);break}y&&o4&&Q4.alternate===null&&E(K1,o4),j1=th(Q4,j1,E4),O4===null?i4=Q4:O4.sibling=Q4,O4=Q4,o4=a6}if(E4===r2.length)return Z(K1,o4),t3&&iv(K1,E4),i4;if(o4===null){for(;E4<r2.length;E4++)o4=O2(K1,r2[E4],D2),o4!==null&&(j1=th(o4,j1,E4),O4===null?i4=o4:O4.sibling=o4,O4=o4);return t3&&iv(K1,E4),i4}for(o4=_e(o4);E4<r2.length;E4++)a6=p2(o4,K1,E4,r2[E4],D2),a6!==null&&(y&&a6.alternate!==null&&o4.delete(a6.key===null?E4:a6.key),j1=th(a6,j1,E4),O4===null?i4=a6:O4.sibling=a6,O4=a6);return y&&o4.forEach(function(Y5){return E(K1,Y5)}),t3&&iv(K1,E4),i4}function _4(K1,j1,r2,D2){if(r2==null)throw Error(s(151));for(var i4=null,O4=null,o4=j1,E4=j1=0,a6=null,Q4=r2.next();o4!==null&&!Q4.done;E4++,Q4=r2.next()){o4.index>E4?(a6=o4,o4=null):a6=o4.sibling;var Y5=d2(K1,o4,Q4.value,D2);if(Y5===null){o4===null&&(o4=a6);break}y&&o4&&Y5.alternate===null&&E(K1,o4),j1=th(Y5,j1,E4),O4===null?i4=Y5:O4.sibling=Y5,O4=Y5,o4=a6}if(Q4.done)return Z(K1,o4),t3&&iv(K1,E4),i4;if(o4===null){for(;!Q4.done;E4++,Q4=r2.next())Q4=O2(K1,Q4.value,D2),Q4!==null&&(j1=th(Q4,j1,E4),O4===null?i4=Q4:O4.sibling=Q4,O4=Q4);return t3&&iv(K1,E4),i4}for(o4=_e(o4);!Q4.done;E4++,Q4=r2.next())Q4=p2(o4,K1,E4,Q4.value,D2),Q4!==null&&(y&&Q4.alternate!==null&&o4.delete(Q4.key===null?E4:Q4.key),j1=th(Q4,j1,E4),O4===null?i4=Q4:O4.sibling=Q4,O4=Q4);return y&&o4.forEach(function(YE){return E(K1,YE)}),t3&&iv(K1,E4),i4}function c3(K1,j1,r2,D2){if(typeof r2=="object"&&r2!==null&&r2.type===me&&r2.key===null&&(r2=r2.props.children),typeof r2=="object"&&r2!==null){switch(r2.$$typeof){case P:e:{for(var i4=r2.key;j1!==null;){if(j1.key===i4){if(i4=r2.type,i4===me){if(j1.tag===7){Z(K1,j1.sibling),D2=Os(j1,r2.props.children),D2.return=K1,K1=D2;break e}}else if(j1.elementType===i4||typeof i4=="object"&&i4!==null&&i4.$$typeof===eh&&n_(i4)===j1.type){Z(K1,j1.sibling),D2=Os(j1,r2.props),cy(D2,r2),D2.return=K1,K1=D2;break e}Z(K1,j1);break}else E(K1,j1);j1=j1.sibling}r2.type===me?(D2=tv(r2.props.children,K1.mode,D2,r2.key),D2.return=K1,K1=D2):(D2=Ny(r2.type,r2.key,r2.props,null,K1.mode,D2),cy(D2,r2),D2.return=K1,K1=D2)}return i1(K1);case W:e:{for(i4=r2.key;j1!==null;){if(j1.key===i4)if(j1.tag===4&&j1.stateNode.containerInfo===r2.containerInfo&&j1.stateNode.implementation===r2.implementation){Z(K1,j1.sibling),D2=Os(j1,r2.children||[]),D2.return=K1,K1=D2;break e}else{Z(K1,j1);break}else E(K1,j1);j1=j1.sibling}D2=O8(r2,K1.mode,D2),D2.return=K1,K1=D2}return i1(K1);case eh:return i4=r2._init,r2=i4(r2._payload),c3(K1,j1,r2,D2)}if(df(r2))return S4(K1,j1,r2,D2);if(wt(r2)){if(i4=wt(r2),typeof i4!="function")throw Error(s(150));return r2=i4.call(r2),_4(K1,j1,r2,D2)}if(typeof r2.then=="function")return c3(K1,j1,Zy(r2),D2);if(r2.$$typeof===qe)return c3(K1,j1,Vy(K1,r2),D2);Jy(K1,r2)}return typeof r2=="string"&&r2!==""||typeof r2=="number"||typeof r2=="bigint"?(r2=""+r2,j1!==null&&j1.tag===6?(Z(K1,j1.sibling),D2=Os(j1,r2),D2.return=K1,K1=D2):(Z(K1,j1),D2=F8(r2,K1.mode,D2),D2.return=K1,K1=D2),i1(K1)):Z(K1,j1)}return function(K1,j1,r2,D2){try{uy=0;var i4=c3(K1,j1,r2,D2);return Iv=null,i4}catch(o4){if(o4===ey||o4===zy)throw o4;var O4=P6(29,o4,null,K1.mode);return O4.lanes=D2,O4.return=K1,O4}finally{}}}var Dv=a_(!0),s_=a_(!1),U6=mf(null),n5=null;function N5(y){var E=y.alternate;s1(J3,J3.current&1),s1(U6,y),n5===null&&(E===null||Rv.current!==null||E.memoizedState!==null)&&(n5=y)}function o_(y){if(y.tag===22){if(s1(J3,J3.current),s1(U6,y),n5===null){var E=y.alternate;E!==null&&E.memoizedState!==null&&(n5=y)}}else F5()}function F5(){s1(J3,J3.current),s1(U6,U6.current)}function v5(y){a1(U6),n5===y&&(n5=null),a1(J3)}var J3=mf(0);function e8(y){for(var E=y;E!==null;){if(E.tag===13){var Z=E.memoizedState;if(Z!==null&&(Z=Z.dehydrated,Z===null||Z.data==="$?"||a9(Z)))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if((E.flags&128)!==0)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===y)break;for(;E.sibling===null;){if(E.return===null||E.return===y)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}function g7(y,E,Z,_e){E=y.memoizedState,Z=Z(_e,E),Z=Z==null?E:g({},E,Z),y.memoizedState=Z,y.lanes===0&&(y.updateQueue.baseState=Z)}var v7={enqueueSetState:function(y,E,Z){y=y._reactInternals;var _e=N6(),Os=I5(_e);Os.payload=E,Z!=null&&(Os.callback=Z),E=D5(y,Os,_e),E!==null&&(F6(E,y,_e),ry(E,y,_e))},enqueueReplaceState:function(y,E,Z){y=y._reactInternals;var _e=N6(),Os=I5(_e);Os.tag=1,Os.payload=E,Z!=null&&(Os.callback=Z),E=D5(y,Os,_e),E!==null&&(F6(E,y,_e),ry(E,y,_e))},enqueueForceUpdate:function(y,E){y=y._reactInternals;var Z=N6(),_e=I5(Z);_e.tag=2,E!=null&&(_e.callback=E),E=D5(y,_e,Z),E!==null&&(F6(E,y,Z),ry(E,y,Z))}};function l_(y,E,Z,_e,Os,th,i1){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(_e,th,i1):E.prototype&&E.prototype.isPureReactComponent?!L4(Z,_e)||!L4(Os,th):!0}function u_(y,E,Z,_e){y=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(Z,_e),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(Z,_e),E.state!==y&&v7.enqueueReplaceState(E,E.state,null)}function cv(y,E){var Z=E;if("ref"in E){Z={};for(var _e in E)_e!=="ref"&&(Z[_e]=E[_e])}if(y=y.defaultProps){Z===E&&(Z=g({},Z));for(var Os in y)Z[Os]===void 0&&(Z[Os]=y[Os])}return Z}var t8=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)};function c_(y){t8(y)}function h_(y){console.error(y)}function d_(y){t8(y)}function r8(y,E){try{var Z=y.onUncaughtError;Z(E.value,{componentStack:E.stack})}catch(_e){setTimeout(function(){throw _e})}}function f_(y,E,Z){try{var _e=y.onCaughtError;_e(Z.value,{componentStack:Z.stack,errorBoundary:E.tag===1?E.stateNode:null})}catch(Os){setTimeout(function(){throw Os})}}function y7(y,E,Z){return Z=I5(Z),Z.tag=3,Z.payload={element:null},Z.callback=function(){r8(y,E)},Z}function p_(y){return y=I5(y),y.tag=3,y}function m_(y,E,Z,_e){var Os=Z.type.getDerivedStateFromError;if(typeof Os=="function"){var th=_e.value;y.payload=function(){return Os(th)},y.callback=function(){f_(E,Z,_e)}}var i1=Z.stateNode;i1!==null&&typeof i1.componentDidCatch=="function"&&(y.callback=function(){f_(E,Z,_e),typeof Os!="function"&&(j5===null?j5=new Set([this]):j5.add(this));var f1=_e.stack;this.componentDidCatch(_e.value,{componentStack:f1!==null?f1:""})})}function Yw(y,E,Z,_e,Os){if(Z.flags|=32768,_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){if(E=Z.alternate,E!==null&&Qv(E,Z,Os,!0),Z=U6.current,Z!==null){switch(Z.tag){case 13:return n5===null?j7():Z.alternate===null&&O3===0&&(O3=3),Z.flags&=-257,Z.flags|=65536,Z.lanes=Os,_e===K8?Z.flags|=16384:(E=Z.updateQueue,E===null?Z.updateQueue=new Set([_e]):E.add(_e),U7(y,_e,Os)),!1;case 22:return Z.flags|=65536,_e===K8?Z.flags|=16384:(E=Z.updateQueue,E===null?(E={transitions:null,markerInstances:null,retryQueue:new Set([_e])},Z.updateQueue=E):(Z=E.retryQueue,Z===null?E.retryQueue=new Set([_e]):Z.add(_e)),U7(y,_e,Os)),!1}throw Error(s(435,Z.tag))}return U7(y,_e,Os),j7(),!1}if(t3)return E=U6.current,E!==null?((E.flags&65536)===0&&(E.flags|=256),E.flags|=65536,E.lanes=Os,_e!==q8&&(y=Error(s(422),{cause:_e}),Yv(j3(y,Z)))):(_e!==q8&&(E=Error(s(423),{cause:_e}),Yv(j3(E,Z))),y=y.current.alternate,y.flags|=65536,Os&=-Os,y.lanes|=Os,_e=j3(_e,Z),Os=y7(y.stateNode,_e,Os),Y8(y,Os),O3!==4&&(O3=2)),!1;var th=Error(s(520),{cause:_e});if(th=j3(th,Z),vy===null?vy=[th]:vy.push(th),O3!==4&&(O3=2),E===null)return!0;_e=j3(_e,Z),Z=E;do{switch(Z.tag){case 3:return Z.flags|=65536,y=Os&-Os,Z.lanes|=y,y=y7(Z.stateNode,_e,y),Y8(Z,y),!1;case 1:if(E=Z.type,th=Z.stateNode,(Z.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||th!==null&&typeof th.componentDidCatch=="function"&&(j5===null||!j5.has(th))))return Z.flags|=65536,Os&=-Os,Z.lanes|=Os,Os=p_(Os),m_(Os,y,Z,_e),Y8(Z,Os),!1}Z=Z.return}while(Z!==null);return!1}var g_=Error(s(461)),i6=!1;function l6(y,E,Z,_e){E.child=y===null?s_(E,null,Z,_e):Dv(E,y.child,Z,_e)}function v_(y,E,Z,_e,Os){Z=Z.render;var th=E.ref;if("ref"in _e){var i1={};for(var f1 in _e)f1!=="ref"&&(i1[f1]=_e[f1])}else i1=_e;return ov(E),_e=t7(y,E,Z,i1,th,Os),f1=r7(),y!==null&&!i6?(i7(y,E,Os),y5(y,E,Os)):(t3&&f1&&B8(E),E.flags|=1,l6(y,E,_e,Os),E.child)}function y_(y,E,Z,_e,Os){if(y===null){var th=Z.type;return typeof th=="function"&&!N8(th)&&th.defaultProps===void 0&&Z.compare===null?(E.tag=15,E.type=th,b_(y,E,th,_e,Os)):(y=Ny(Z.type,null,_e,E,E.mode,Os),y.ref=E.ref,y.return=E,E.child=y)}if(th=y.child,!T7(y,Os)){var i1=th.memoizedProps;if(Z=Z.compare,Z=Z!==null?Z:L4,Z(i1,_e)&&y.ref===E.ref)return y5(y,E,Os)}return E.flags|=1,y=h5(th,_e),y.ref=E.ref,y.return=E,E.child=y}function b_(y,E,Z,_e,Os){if(y!==null){var th=y.memoizedProps;if(L4(th,_e)&&y.ref===E.ref)if(i6=!1,E.pendingProps=_e=th,T7(y,Os))(y.flags&131072)!==0&&(i6=!0);else return E.lanes=y.lanes,y5(y,E,Os)}return b7(y,E,Z,_e,Os)}function __(y,E,Z){var _e=E.pendingProps,Os=_e.children,th=y!==null?y.memoizedState:null;if(_e.mode==="hidden"){if((E.flags&128)!==0){if(_e=th!==null?th.baseLanes|Z:Z,y!==null){for(Os=E.child=y.child,th=0;Os!==null;)th=th|Os.lanes|Os.childLanes,Os=Os.sibling;E.childLanes=th&~_e}else E.childLanes=0,E.child=null;return x_(y,E,_e,Z)}if((Z&536870912)!==0)E.memoizedState={baseLanes:0,cachePool:null},y!==null&&qy(E,th!==null?th.cachePool:null),th!==null?L9(E,th):Z8(),o_(E);else return E.lanes=E.childLanes=536870912,x_(y,E,th!==null?th.baseLanes|Z:Z,Z)}else th!==null?(qy(E,th.cachePool),L9(E,th),F5(),E.memoizedState=null):(y!==null&&qy(E,null),Z8(),F5());return l6(y,E,Os,Z),E.child}function x_(y,E,Z,_e){var Os=G8();return Os=Os===null?null:{parent:Z3._currentValue,pool:Os},E.memoizedState={baseLanes:Z,cachePool:Os},y!==null&&qy(E,null),Z8(),o_(E),y!==null&&Qv(y,E,_e,!0),null}function i8(y,E){var Z=E.ref;if(Z===null)y!==null&&y.ref!==null&&(E.flags|=4194816);else{if(typeof Z!="function"&&typeof Z!="object")throw Error(s(284));(y===null||y.ref!==Z)&&(E.flags|=4194816)}}function b7(y,E,Z,_e,Os){return ov(E),Z=t7(y,E,Z,_e,void 0,Os),_e=r7(),y!==null&&!i6?(i7(y,E,Os),y5(y,E,Os)):(t3&&_e&&B8(E),E.flags|=1,l6(y,E,Z,Os),E.child)}function w_(y,E,Z,_e,Os,th){return ov(E),E.updateQueue=null,Z=F9(E,_e,Z,Os),N9(y),_e=r7(),y!==null&&!i6?(i7(y,E,th),y5(y,E,th)):(t3&&_e&&B8(E),E.flags|=1,l6(y,E,Z,th),E.child)}function E_(y,E,Z,_e,Os){if(ov(E),E.stateNode===null){var th=Ev,i1=Z.contextType;typeof i1=="object"&&i1!==null&&(th=f6(i1)),th=new Z(_e,th),E.memoizedState=th.state!==null&&th.state!==void 0?th.state:null,th.updater=v7,E.stateNode=th,th._reactInternals=E,th=E.stateNode,th.props=_e,th.state=E.memoizedState,th.refs={},W8(E),i1=Z.contextType,th.context=typeof i1=="object"&&i1!==null?f6(i1):Ev,th.state=E.memoizedState,i1=Z.getDerivedStateFromProps,typeof i1=="function"&&(g7(E,Z,i1,_e),th.state=E.memoizedState),typeof Z.getDerivedStateFromProps=="function"||typeof th.getSnapshotBeforeUpdate=="function"||typeof th.UNSAFE_componentWillMount!="function"&&typeof th.componentWillMount!="function"||(i1=th.state,typeof th.componentWillMount=="function"&&th.componentWillMount(),typeof th.UNSAFE_componentWillMount=="function"&&th.UNSAFE_componentWillMount(),i1!==th.state&&v7.enqueueReplaceState(th,th.state,null),ny(E,_e,th,Os),iy(),th.state=E.memoizedState),typeof th.componentDidMount=="function"&&(E.flags|=4194308),_e=!0}else if(y===null){th=E.stateNode;var f1=E.memoizedProps,I1=cv(Z,f1);th.props=I1;var o2=th.context,k2=Z.contextType;i1=Ev,typeof k2=="object"&&k2!==null&&(i1=f6(k2));var O2=Z.getDerivedStateFromProps;k2=typeof O2=="function"||typeof th.getSnapshotBeforeUpdate=="function",f1=E.pendingProps!==f1,k2||typeof th.UNSAFE_componentWillReceiveProps!="function"&&typeof th.componentWillReceiveProps!="function"||(f1||o2!==i1)&&u_(E,th,_e,i1),P5=!1;var d2=E.memoizedState;th.state=d2,ny(E,_e,th,Os),iy(),o2=E.memoizedState,f1||d2!==o2||P5?(typeof O2=="function"&&(g7(E,Z,O2,_e),o2=E.memoizedState),(I1=P5||l_(E,Z,I1,_e,d2,o2,i1))?(k2||typeof th.UNSAFE_componentWillMount!="function"&&typeof th.componentWillMount!="function"||(typeof th.componentWillMount=="function"&&th.componentWillMount(),typeof th.UNSAFE_componentWillMount=="function"&&th.UNSAFE_componentWillMount()),typeof th.componentDidMount=="function"&&(E.flags|=4194308)):(typeof th.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=_e,E.memoizedState=o2),th.props=_e,th.state=o2,th.context=i1,_e=I1):(typeof th.componentDidMount=="function"&&(E.flags|=4194308),_e=!1)}else{th=E.stateNode,X8(y,E),i1=E.memoizedProps,k2=cv(Z,i1),th.props=k2,O2=E.pendingProps,d2=th.context,o2=Z.contextType,I1=Ev,typeof o2=="object"&&o2!==null&&(I1=f6(o2)),f1=Z.getDerivedStateFromProps,(o2=typeof f1=="function"||typeof th.getSnapshotBeforeUpdate=="function")||typeof th.UNSAFE_componentWillReceiveProps!="function"&&typeof th.componentWillReceiveProps!="function"||(i1!==O2||d2!==I1)&&u_(E,th,_e,I1),P5=!1,d2=E.memoizedState,th.state=d2,ny(E,_e,th,Os),iy();var p2=E.memoizedState;i1!==O2||d2!==p2||P5||y!==null&&y.dependencies!==null&&By(y.dependencies)?(typeof f1=="function"&&(g7(E,Z,f1,_e),p2=E.memoizedState),(k2=P5||l_(E,Z,k2,_e,d2,p2,I1)||y!==null&&y.dependencies!==null&&By(y.dependencies))?(o2||typeof th.UNSAFE_componentWillUpdate!="function"&&typeof th.componentWillUpdate!="function"||(typeof th.componentWillUpdate=="function"&&th.componentWillUpdate(_e,p2,I1),typeof th.UNSAFE_componentWillUpdate=="function"&&th.UNSAFE_componentWillUpdate(_e,p2,I1)),typeof th.componentDidUpdate=="function"&&(E.flags|=4),typeof th.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof th.componentDidUpdate!="function"||i1===y.memoizedProps&&d2===y.memoizedState||(E.flags|=4),typeof th.getSnapshotBeforeUpdate!="function"||i1===y.memoizedProps&&d2===y.memoizedState||(E.flags|=1024),E.memoizedProps=_e,E.memoizedState=p2),th.props=_e,th.state=p2,th.context=I1,_e=k2):(typeof th.componentDidUpdate!="function"||i1===y.memoizedProps&&d2===y.memoizedState||(E.flags|=4),typeof th.getSnapshotBeforeUpdate!="function"||i1===y.memoizedProps&&d2===y.memoizedState||(E.flags|=1024),_e=!1)}return th=_e,i8(y,E),_e=(E.flags&128)!==0,th||_e?(th=E.stateNode,Z=_e&&typeof Z.getDerivedStateFromError!="function"?null:th.render(),E.flags|=1,y!==null&&_e?(E.child=Dv(E,y.child,null,Os),E.child=Dv(E,null,Z,Os)):l6(y,E,Z,Os),E.memoizedState=th.state,y=E.child):y=y5(y,E,Os),y}function S_(y,E,Z,_e){return Xv(),E.flags|=256,l6(y,E,Z,_e),E.child}var _7={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function x7(y){return{baseLanes:y,cachePool:T9()}}function w7(y,E,Z){return y=y!==null?y.childLanes&~Z:0,E&&(y|=H6),y}function A_(y,E,Z){var _e=E.pendingProps,Os=!1,th=(E.flags&128)!==0,i1;if((i1=th)||(i1=y!==null&&y.memoizedState===null?!1:(J3.current&2)!==0),i1&&(Os=!0,E.flags&=-129),i1=(E.flags&32)!==0,E.flags&=-33,y===null){if(t3){if(Os?N5(E):F5(),t3){var f1=F3,I1;if(I1=f1){e:{for(I1=f1,f1=i5;I1.nodeType!==8;){if(!f1){f1=null;break e}if(I1=Z6(I1.nextSibling),I1===null){f1=null;break e}}f1=I1}f1!==null?(E.memoizedState={dehydrated:f1,treeContext:rv!==null?{id:d5,overflow:f5}:null,retryLane:536870912,hydrationErrors:null},I1=P6(18,null,null,0),I1.stateNode=f1,I1.return=E,E.child=I1,v6=E,F3=null,I1=!0):I1=!1}I1||av(E)}if(f1=E.memoizedState,f1!==null&&(f1=f1.dehydrated,f1!==null))return a9(f1)?E.lanes=32:E.lanes=536870912,null;v5(E)}return f1=_e.children,_e=_e.fallback,Os?(F5(),Os=E.mode,f1=n8({mode:"hidden",children:f1},Os),_e=tv(_e,Os,Z,null),f1.return=E,_e.return=E,f1.sibling=_e,E.child=f1,Os=E.child,Os.memoizedState=x7(Z),Os.childLanes=w7(y,i1,Z),E.memoizedState=_7,_e):(N5(E),E7(E,f1))}if(I1=y.memoizedState,I1!==null&&(f1=I1.dehydrated,f1!==null)){if(th)E.flags&256?(N5(E),E.flags&=-257,E=S7(y,E,Z)):E.memoizedState!==null?(F5(),E.child=y.child,E.flags|=128,E=null):(F5(),Os=_e.fallback,f1=E.mode,_e=n8({mode:"visible",children:_e.children},f1),Os=tv(Os,f1,Z,null),Os.flags|=2,_e.return=E,Os.return=E,_e.sibling=Os,E.child=_e,Dv(E,y.child,null,Z),_e=E.child,_e.memoizedState=x7(Z),_e.childLanes=w7(y,i1,Z),E.memoizedState=_7,E=Os);else if(N5(E),a9(f1)){if(i1=f1.nextSibling&&f1.nextSibling.dataset,i1)var o2=i1.dgst;i1=o2,_e=Error(s(419)),_e.stack="",_e.digest=i1,Yv({value:_e,source:null,stack:null}),E=S7(y,E,Z)}else if(i6||Qv(y,E,Z,!1),i1=(Z&y.childLanes)!==0,i6||i1){if(i1=y3,i1!==null&&(_e=Z&-Z,_e=(_e&42)!==0?1:n4(_e),_e=(_e&(i1.suspendedLanes|Z))!==0?0:_e,_e!==0&&_e!==I1.retryLane))throw I1.retryLane=_e,M5(y,_e),F6(i1,y,_e),g_;f1.data==="$?"||j7(),E=S7(y,E,Z)}else f1.data==="$?"?(E.flags|=192,E.child=y.child,E=null):(y=I1.treeContext,F3=Z6(f1.nextSibling),v6=E,t3=!0,nv=null,i5=!1,y!==null&&(j6[$6++]=d5,j6[$6++]=f5,j6[$6++]=rv,d5=y.id,f5=y.overflow,rv=E),E=E7(E,_e.children),E.flags|=4096);return E}return Os?(F5(),Os=_e.fallback,f1=E.mode,I1=y.child,o2=I1.sibling,_e=h5(I1,{mode:"hidden",children:_e.children}),_e.subtreeFlags=I1.subtreeFlags&65011712,o2!==null?Os=h5(o2,Os):(Os=tv(Os,f1,Z,null),Os.flags|=2),Os.return=E,_e.return=E,_e.sibling=Os,E.child=_e,_e=Os,Os=E.child,f1=y.child.memoizedState,f1===null?f1=x7(Z):(I1=f1.cachePool,I1!==null?(o2=Z3._currentValue,I1=I1.parent!==o2?{parent:o2,pool:o2}:I1):I1=T9(),f1={baseLanes:f1.baseLanes|Z,cachePool:I1}),Os.memoizedState=f1,Os.childLanes=w7(y,i1,Z),E.memoizedState=_7,_e):(N5(E),Z=y.child,y=Z.sibling,Z=h5(Z,{mode:"visible",children:_e.children}),Z.return=E,Z.sibling=null,y!==null&&(i1=E.deletions,i1===null?(E.deletions=[y],E.flags|=16):i1.push(y)),E.child=Z,E.memoizedState=null,Z)}function E7(y,E){return E=n8({mode:"visible",children:E},y.mode),E.return=y,y.child=E}function n8(y,E){return y=P6(22,y,null,E),y.lanes=0,y.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},y}function S7(y,E,Z){return Dv(E,y.child,null,Z),y=E7(E,E.pendingProps.children),y.flags|=2,E.memoizedState=null,y}function T_(y,E,Z){y.lanes|=E;var _e=y.alternate;_e!==null&&(_e.lanes|=E),j8(y.return,E,Z)}function A7(y,E,Z,_e,Os){var th=y.memoizedState;th===null?y.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:_e,tail:Z,tailMode:Os}:(th.isBackwards=E,th.rendering=null,th.renderingStartTime=0,th.last=_e,th.tail=Z,th.tailMode=Os)}function C_(y,E,Z){var _e=E.pendingProps,Os=_e.revealOrder,th=_e.tail;if(l6(y,E,_e.children,Z),_e=J3.current,(_e&2)!==0)_e=_e&1|2,E.flags|=128;else{if(y!==null&&(y.flags&128)!==0)e:for(y=E.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&T_(y,Z,E);else if(y.tag===19)T_(y,Z,E);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===E)break e;for(;y.sibling===null;){if(y.return===null||y.return===E)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}_e&=1}switch(s1(J3,_e),Os){case"forwards":for(Z=E.child,Os=null;Z!==null;)y=Z.alternate,y!==null&&e8(y)===null&&(Os=Z),Z=Z.sibling;Z=Os,Z===null?(Os=E.child,E.child=null):(Os=Z.sibling,Z.sibling=null),A7(E,!1,Os,Z,th);break;case"backwards":for(Z=null,Os=E.child,E.child=null;Os!==null;){if(y=Os.alternate,y!==null&&e8(y)===null){E.child=Os;break}y=Os.sibling,Os.sibling=Z,Z=Os,Os=y}A7(E,!0,Z,null,th);break;case"together":A7(E,!1,null,null,void 0);break;default:E.memoizedState=null}return E.child}function y5(y,E,Z){if(y!==null&&(E.dependencies=y.dependencies),z5|=E.lanes,(Z&E.childLanes)===0)if(y!==null){if(Qv(y,E,Z,!1),(Z&E.childLanes)===0)return null}else return null;if(y!==null&&E.child!==y.child)throw Error(s(153));if(E.child!==null){for(y=E.child,Z=h5(y,y.pendingProps),E.child=Z,Z.return=E;y.sibling!==null;)y=y.sibling,Z=Z.sibling=h5(y,y.pendingProps),Z.return=E;Z.sibling=null}return E.child}function T7(y,E){return(y.lanes&E)!==0?!0:(y=y.dependencies,!!(y!==null&&By(y)))}function Qw(y,E,Z){switch(E.tag){case 3:m2(E,E.stateNode.containerInfo),k5(E,Z3,y.memoizedState.cache),Xv();break;case 27:case 5:A2(E);break;case 4:m2(E,E.stateNode.containerInfo);break;case 10:k5(E,E.type,E.memoizedProps.value);break;case 13:var _e=E.memoizedState;if(_e!==null)return _e.dehydrated!==null?(N5(E),E.flags|=128,null):(Z&E.child.childLanes)!==0?A_(y,E,Z):(N5(E),y=y5(y,E,Z),y!==null?y.sibling:null);N5(E);break;case 19:var Os=(y.flags&128)!==0;if(_e=(Z&E.childLanes)!==0,_e||(Qv(y,E,Z,!1),_e=(Z&E.childLanes)!==0),Os){if(_e)return C_(y,E,Z);E.flags|=128}if(Os=E.memoizedState,Os!==null&&(Os.rendering=null,Os.tail=null,Os.lastEffect=null),s1(J3,J3.current),_e)break;return null;case 22:case 23:return E.lanes=0,__(y,E,Z);case 24:k5(E,Z3,y.memoizedState.cache)}return y5(y,E,Z)}function R_(y,E,Z){if(y!==null)if(y.memoizedProps!==E.pendingProps)i6=!0;else{if(!T7(y,Z)&&(E.flags&128)===0)return i6=!1,Qw(y,E,Z);i6=(y.flags&131072)!==0}else i6=!1,t3&&(E.flags&1048576)!==0&&b9(E,Oy,E.index);switch(E.lanes=0,E.tag){case 16:e:{y=E.pendingProps;var _e=E.elementType,Os=_e._init;if(_e=Os(_e._payload),E.type=_e,typeof _e=="function")N8(_e)?(y=cv(_e,y),E.tag=1,E=E_(null,E,_e,y,Z)):(E.tag=0,E=b7(null,E,_e,y,Z));else{if(_e!=null){if(Os=_e.$$typeof,Os===Rs){E.tag=11,E=v_(null,E,_e,y,Z);break e}else if(Os===Do){E.tag=14,E=y_(null,E,_e,y,Z);break e}}throw E=yh(_e)||_e,Error(s(306,E,""))}}return E;case 0:return b7(y,E,E.type,E.pendingProps,Z);case 1:return _e=E.type,Os=cv(_e,E.pendingProps),E_(y,E,_e,Os,Z);case 3:e:{if(m2(E,E.stateNode.containerInfo),y===null)throw Error(s(387));_e=E.pendingProps;var th=E.memoizedState;Os=th.element,X8(y,E),ny(E,_e,null,Z);var i1=E.memoizedState;if(_e=i1.cache,k5(E,Z3,_e),_e!==th.cache&&$8(E,[Z3],Z,!0),iy(),_e=i1.element,th.isDehydrated)if(th={element:_e,isDehydrated:!1,cache:i1.cache},E.updateQueue.baseState=th,E.memoizedState=th,E.flags&256){E=S_(y,E,_e,Z);break e}else if(_e!==Os){Os=j3(Error(s(424)),E),Yv(Os),E=S_(y,E,_e,Z);break e}else{switch(y=E.stateNode.containerInfo,y.nodeType){case 9:y=y.body;break;default:y=y.nodeName==="HTML"?y.ownerDocument.body:y}for(F3=Z6(y.firstChild),v6=E,t3=!0,nv=null,i5=!0,Z=s_(E,null,_e,Z),E.child=Z;Z;)Z.flags=Z.flags&-3|4096,Z=Z.sibling}else{if(Xv(),_e===Os){E=y5(y,E,Z);break e}l6(y,E,_e,Z)}E=E.child}return E;case 26:return i8(y,E),y===null?(Z=Dx(E.type,null,E.pendingProps,null))?E.memoizedState=Z:t3||(Z=E.type,y=E.pendingProps,_e=y8(z1.current).createElement(Z),_e[n2]=E,_e[y2]=y,c6(_e,Z,y),M1(_e),E.stateNode=_e):E.memoizedState=Dx(E.type,y.memoizedProps,E.pendingProps,y.memoizedState),null;case 27:return A2(E),y===null&&t3&&(_e=E.stateNode=kx(E.type,E.pendingProps,z1.current),v6=E,i5=!0,Os=F3,H5(E.type)?(s9=Os,F3=Z6(_e.firstChild)):F3=Os),l6(y,E,E.pendingProps.children,Z),i8(y,E),y===null&&(E.flags|=4194304),E.child;case 5:return y===null&&t3&&((Os=_e=F3)&&(_e=AE(_e,E.type,E.pendingProps,i5),_e!==null?(E.stateNode=_e,v6=E,F3=Z6(_e.firstChild),i5=!1,Os=!0):Os=!1),Os||av(E)),A2(E),Os=E.type,th=E.pendingProps,i1=y!==null?y.memoizedProps:null,_e=th.children,r9(Os,th)?_e=null:i1!==null&&r9(Os,i1)&&(E.flags|=32),E.memoizedState!==null&&(Os=t7(y,E,$w,null,null,Z),Ty._currentValue=Os),i8(y,E),l6(y,E,_e,Z),E.child;case 6:return y===null&&t3&&((y=Z=F3)&&(Z=TE(Z,E.pendingProps,i5),Z!==null?(E.stateNode=Z,v6=E,F3=null,y=!0):y=!1),y||av(E)),null;case 13:return A_(y,E,Z);case 4:return m2(E,E.stateNode.containerInfo),_e=E.pendingProps,y===null?E.child=Dv(E,null,_e,Z):l6(y,E,_e,Z),E.child;case 11:return v_(y,E,E.type,E.pendingProps,Z);case 7:return l6(y,E,E.pendingProps,Z),E.child;case 8:return l6(y,E,E.pendingProps.children,Z),E.child;case 12:return l6(y,E,E.pendingProps.children,Z),E.child;case 10:return _e=E.pendingProps,k5(E,E.type,_e.value),l6(y,E,_e.children,Z),E.child;case 9:return Os=E.type._context,_e=E.pendingProps.children,ov(E),Os=f6(Os),_e=_e(Os),E.flags|=1,l6(y,E,_e,Z),E.child;case 14:return y_(y,E,E.type,E.pendingProps,Z);case 15:return b_(y,E,E.type,E.pendingProps,Z);case 19:return C_(y,E,Z);case 31:return _e=E.pendingProps,Z=E.mode,_e={mode:_e.mode,children:_e.children},y===null?(Z=n8(_e,Z),Z.ref=E.ref,E.child=Z,Z.return=E,E=Z):(Z=h5(y.child,_e),Z.ref=E.ref,E.child=Z,Z.return=E,E=Z),E;case 22:return __(y,E,Z);case 24:return ov(E),_e=f6(Z3),y===null?(Os=G8(),Os===null&&(Os=y3,th=U8(),Os.pooledCache=th,th.refCount++,th!==null&&(Os.pooledCacheLanes|=Z),Os=th),E.memoizedState={parent:_e,cache:Os},W8(E),k5(E,Z3,Os)):((y.lanes&Z)!==0&&(X8(y,E),ny(E,null,null,Z),iy()),Os=y.memoizedState,th=E.memoizedState,Os.parent!==_e?(Os={parent:_e,cache:_e},E.memoizedState=Os,E.lanes===0&&(E.memoizedState=E.updateQueue.baseState=Os),k5(E,Z3,_e)):(_e=th.cache,k5(E,Z3,_e),_e!==Os.cache&&$8(E,[Z3],Z,!0))),l6(y,E,E.pendingProps.children,Z),E.child;case 29:throw E.pendingProps}throw Error(s(156,E.tag))}function b5(y){y.flags|=4}function M_(y,E){if(E.type!=="stylesheet"||(E.state.loading&4)!==0)y.flags&=-16777217;else if(y.flags|=16777216,!Bx(E)){if(E=U6.current,E!==null&&((X4&4194048)===X4?n5!==null:(X4&62914560)!==X4&&(X4&536870912)===0||E!==n5))throw ty=K8,C9;y.flags|=8192}}function a8(y,E){E!==null&&(y.flags|=4),y.flags&16384&&(E=y.tag!==22?P2():536870912,y.lanes|=E,Ov|=E)}function hy(y,E){if(!t3)switch(y.tailMode){case"hidden":E=y.tail;for(var Z=null;E!==null;)E.alternate!==null&&(Z=E),E=E.sibling;Z===null?y.tail=null:Z.sibling=null;break;case"collapsed":Z=y.tail;for(var _e=null;Z!==null;)Z.alternate!==null&&(_e=Z),Z=Z.sibling;_e===null?E||y.tail===null?y.tail=null:y.tail.sibling=null:_e.sibling=null}}function P3(y){var E=y.alternate!==null&&y.alternate.child===y.child,Z=0,_e=0;if(E)for(var Os=y.child;Os!==null;)Z|=Os.lanes|Os.childLanes,_e|=Os.subtreeFlags&65011712,_e|=Os.flags&65011712,Os.return=y,Os=Os.sibling;else for(Os=y.child;Os!==null;)Z|=Os.lanes|Os.childLanes,_e|=Os.subtreeFlags,_e|=Os.flags,Os.return=y,Os=Os.sibling;return y.subtreeFlags|=_e,y.childLanes=Z,E}function Zw(y,E,Z){var _e=E.pendingProps;switch(V8(E),E.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return P3(E),null;case 1:return P3(E),null;case 3:return Z=E.stateNode,_e=null,y!==null&&(_e=y.memoizedState.cache),E.memoizedState.cache!==_e&&(E.flags|=2048),m5(Z3),C2(),Z.pendingContext&&(Z.context=Z.pendingContext,Z.pendingContext=null),(y===null||y.child===null)&&(Wv(E)?b5(E):y===null||y.memoizedState.isDehydrated&&(E.flags&256)===0||(E.flags|=1024,w9())),P3(E),null;case 26:return Z=E.memoizedState,y===null?(b5(E),Z!==null?(P3(E),M_(E,Z)):(P3(E),E.flags&=-16777217)):Z?Z!==y.memoizedState?(b5(E),P3(E),M_(E,Z)):(P3(E),E.flags&=-16777217):(y.memoizedProps!==_e&&b5(E),P3(E),E.flags&=-16777217),null;case 27:b2(E),Z=z1.current;var Os=E.type;if(y!==null&&E.stateNode!=null)y.memoizedProps!==_e&&b5(E);else{if(!_e){if(E.stateNode===null)throw Error(s(166));return P3(E),null}y=E1.current,Wv(E)?_9(E):(y=kx(Os,_e,Z),E.stateNode=y,b5(E))}return P3(E),null;case 5:if(b2(E),Z=E.type,y!==null&&E.stateNode!=null)y.memoizedProps!==_e&&b5(E);else{if(!_e){if(E.stateNode===null)throw Error(s(166));return P3(E),null}if(y=E1.current,Wv(E))_9(E);else{switch(Os=y8(z1.current),y){case 1:y=Os.createElementNS("http://www.w3.org/2000/svg",Z);break;case 2:y=Os.createElementNS("http://www.w3.org/1998/Math/MathML",Z);break;default:switch(Z){case"svg":y=Os.createElementNS("http://www.w3.org/2000/svg",Z);break;case"math":y=Os.createElementNS("http://www.w3.org/1998/Math/MathML",Z);break;case"script":y=Os.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof _e.is=="string"?Os.createElement("select",{is:_e.is}):Os.createElement("select"),_e.multiple?y.multiple=!0:_e.size&&(y.size=_e.size);break;default:y=typeof _e.is=="string"?Os.createElement(Z,{is:_e.is}):Os.createElement(Z)}}y[n2]=E,y[y2]=_e;e:for(Os=E.child;Os!==null;){if(Os.tag===5||Os.tag===6)y.appendChild(Os.stateNode);else if(Os.tag!==4&&Os.tag!==27&&Os.child!==null){Os.child.return=Os,Os=Os.child;continue}if(Os===E)break e;for(;Os.sibling===null;){if(Os.return===null||Os.return===E)break e;Os=Os.return}Os.sibling.return=Os.return,Os=Os.sibling}E.stateNode=y;e:switch(c6(y,Z,_e),Z){case"button":case"input":case"select":case"textarea":y=!!_e.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&b5(E)}}return P3(E),E.flags&=-16777217,null;case 6:if(y&&E.stateNode!=null)y.memoizedProps!==_e&&b5(E);else{if(typeof _e!="string"&&E.stateNode===null)throw Error(s(166));if(y=z1.current,Wv(E)){if(y=E.stateNode,Z=E.memoizedProps,_e=null,Os=v6,Os!==null)switch(Os.tag){case 27:case 5:_e=Os.memoizedProps}y[n2]=E,y=!!(y.nodeValue===Z||_e!==null&&_e.suppressHydrationWarning===!0||Ex(y.nodeValue,Z)),y||av(E)}else y=y8(y).createTextNode(_e),y[n2]=E,E.stateNode=y}return P3(E),null;case 13:if(_e=E.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(Os=Wv(E),_e!==null&&_e.dehydrated!==null){if(y===null){if(!Os)throw Error(s(318));if(Os=E.memoizedState,Os=Os!==null?Os.dehydrated:null,!Os)throw Error(s(317));Os[n2]=E}else Xv(),(E.flags&128)===0&&(E.memoizedState=null),E.flags|=4;P3(E),Os=!1}else Os=w9(),y!==null&&y.memoizedState!==null&&(y.memoizedState.hydrationErrors=Os),Os=!0;if(!Os)return E.flags&256?(v5(E),E):(v5(E),null)}if(v5(E),(E.flags&128)!==0)return E.lanes=Z,E;if(Z=_e!==null,y=y!==null&&y.memoizedState!==null,Z){_e=E.child,Os=null,_e.alternate!==null&&_e.alternate.memoizedState!==null&&_e.alternate.memoizedState.cachePool!==null&&(Os=_e.alternate.memoizedState.cachePool.pool);var th=null;_e.memoizedState!==null&&_e.memoizedState.cachePool!==null&&(th=_e.memoizedState.cachePool.pool),th!==Os&&(_e.flags|=2048)}return Z!==y&&Z&&(E.child.flags|=8192),a8(E,E.updateQueue),P3(E),null;case 4:return C2(),y===null&&Q7(E.stateNode.containerInfo),P3(E),null;case 10:return m5(E.type),P3(E),null;case 19:if(a1(J3),Os=E.memoizedState,Os===null)return P3(E),null;if(_e=(E.flags&128)!==0,th=Os.rendering,th===null)if(_e)hy(Os,!1);else{if(O3!==0||y!==null&&(y.flags&128)!==0)for(y=E.child;y!==null;){if(th=e8(y),th!==null){for(E.flags|=128,hy(Os,!1),y=th.updateQueue,E.updateQueue=y,a8(E,y),E.subtreeFlags=0,y=Z,Z=E.child;Z!==null;)y9(Z,y),Z=Z.sibling;return s1(J3,J3.current&1|2),E.child}y=y.sibling}Os.tail!==null&&p1()>l8&&(E.flags|=128,_e=!0,hy(Os,!1),E.lanes=4194304)}else{if(!_e)if(y=e8(th),y!==null){if(E.flags|=128,_e=!0,y=y.updateQueue,E.updateQueue=y,a8(E,y),hy(Os,!0),Os.tail===null&&Os.tailMode==="hidden"&&!th.alternate&&!t3)return P3(E),null}else 2*p1()-Os.renderingStartTime>l8&&Z!==536870912&&(E.flags|=128,_e=!0,hy(Os,!1),E.lanes=4194304);Os.isBackwards?(th.sibling=E.child,E.child=th):(y=Os.last,y!==null?y.sibling=th:E.child=th,Os.last=th)}return Os.tail!==null?(E=Os.tail,Os.rendering=E,Os.tail=E.sibling,Os.renderingStartTime=p1(),E.sibling=null,y=J3.current,s1(J3,_e?y&1|2:y&1),E):(P3(E),null);case 22:case 23:return v5(E),J8(),_e=E.memoizedState!==null,y!==null?y.memoizedState!==null!==_e&&(E.flags|=8192):_e&&(E.flags|=8192),_e?(Z&536870912)!==0&&(E.flags&128)===0&&(P3(E),E.subtreeFlags&6&&(E.flags|=8192)):P3(E),Z=E.updateQueue,Z!==null&&a8(E,Z.retryQueue),Z=null,y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(Z=y.memoizedState.cachePool.pool),_e=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(_e=E.memoizedState.cachePool.pool),_e!==Z&&(E.flags|=2048),y!==null&&a1(lv),null;case 24:return Z=null,y!==null&&(Z=y.memoizedState.cache),E.memoizedState.cache!==Z&&(E.flags|=2048),m5(Z3),P3(E),null;case 25:return null;case 30:return null}throw Error(s(156,E.tag))}function Jw(y,E){switch(V8(E),E.tag){case 1:return y=E.flags,y&65536?(E.flags=y&-65537|128,E):null;case 3:return m5(Z3),C2(),y=E.flags,(y&65536)!==0&&(y&128)===0?(E.flags=y&-65537|128,E):null;case 26:case 27:case 5:return b2(E),null;case 13:if(v5(E),y=E.memoizedState,y!==null&&y.dehydrated!==null){if(E.alternate===null)throw Error(s(340));Xv()}return y=E.flags,y&65536?(E.flags=y&-65537|128,E):null;case 19:return a1(J3),null;case 4:return C2(),null;case 10:return m5(E.type),null;case 22:case 23:return v5(E),J8(),y!==null&&a1(lv),y=E.flags,y&65536?(E.flags=y&-65537|128,E):null;case 24:return m5(Z3),null;case 25:return null;default:return null}}function k_(y,E){switch(V8(E),E.tag){case 3:m5(Z3),C2();break;case 26:case 27:case 5:b2(E);break;case 4:C2();break;case 13:v5(E);break;case 19:a1(J3);break;case 10:m5(E.type);break;case 22:case 23:v5(E),J8(),y!==null&&a1(lv);break;case 24:m5(Z3)}}function dy(y,E){try{var Z=E.updateQueue,_e=Z!==null?Z.lastEffect:null;if(_e!==null){var Os=_e.next;Z=Os;do{if((Z.tag&y)===y){_e=void 0;var th=Z.create,i1=Z.inst;_e=th(),i1.destroy=_e}Z=Z.next}while(Z!==Os)}}catch(f1){p3(E,E.return,f1)}}function O5(y,E,Z){try{var _e=E.updateQueue,Os=_e!==null?_e.lastEffect:null;if(Os!==null){var th=Os.next;_e=th;do{if((_e.tag&y)===y){var i1=_e.inst,f1=i1.destroy;if(f1!==void 0){i1.destroy=void 0,Os=E;var I1=Z,o2=f1;try{o2()}catch(k2){p3(Os,I1,k2)}}}_e=_e.next}while(_e!==th)}}catch(k2){p3(E,E.return,k2)}}function P_(y){var E=y.updateQueue;if(E!==null){var Z=y.stateNode;try{D9(E,Z)}catch(_e){p3(y,y.return,_e)}}}function I_(y,E,Z){Z.props=cv(y.type,y.memoizedProps),Z.state=y.memoizedState;try{Z.componentWillUnmount()}catch(_e){p3(y,E,_e)}}function fy(y,E){try{var Z=y.ref;if(Z!==null){switch(y.tag){case 26:case 27:case 5:var _e=y.stateNode;break;case 30:_e=y.stateNode;break;default:_e=y.stateNode}typeof Z=="function"?y.refCleanup=Z(_e):Z.current=_e}}catch(Os){p3(y,E,Os)}}function a5(y,E){var Z=y.ref,_e=y.refCleanup;if(Z!==null)if(typeof _e=="function")try{_e()}catch(Os){p3(y,E,Os)}finally{y.refCleanup=null,y=y.alternate,y!=null&&(y.refCleanup=null)}else if(typeof Z=="function")try{Z(null)}catch(Os){p3(y,E,Os)}else Z.current=null}function D_(y){var E=y.type,Z=y.memoizedProps,_e=y.stateNode;try{e:switch(E){case"button":case"input":case"select":case"textarea":Z.autoFocus&&_e.focus();break e;case"img":Z.src?_e.src=Z.src:Z.srcSet&&(_e.srcset=Z.srcSet)}}catch(Os){p3(y,y.return,Os)}}function C7(y,E,Z){try{var _e=y.stateNode;_E(_e,y.type,Z,E),_e[y2]=E}catch(Os){p3(y,y.return,Os)}}function L_(y){return y.tag===5||y.tag===3||y.tag===26||y.tag===27&&H5(y.type)||y.tag===4}function R7(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||L_(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.tag===27&&H5(y.type)||y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function M7(y,E,Z){var _e=y.tag;if(_e===5||_e===6)y=y.stateNode,E?(Z.nodeType===9?Z.body:Z.nodeName==="HTML"?Z.ownerDocument.body:Z).insertBefore(y,E):(E=Z.nodeType===9?Z.body:Z.nodeName==="HTML"?Z.ownerDocument.body:Z,E.appendChild(y),Z=Z._reactRootContainer,Z!=null||E.onclick!==null||(E.onclick=v8));else if(_e!==4&&(_e===27&&H5(y.type)&&(Z=y.stateNode,E=null),y=y.child,y!==null))for(M7(y,E,Z),y=y.sibling;y!==null;)M7(y,E,Z),y=y.sibling}function s8(y,E,Z){var _e=y.tag;if(_e===5||_e===6)y=y.stateNode,E?Z.insertBefore(y,E):Z.appendChild(y);else if(_e!==4&&(_e===27&&H5(y.type)&&(Z=y.stateNode),y=y.child,y!==null))for(s8(y,E,Z),y=y.sibling;y!==null;)s8(y,E,Z),y=y.sibling}function N_(y){var E=y.stateNode,Z=y.memoizedProps;try{for(var _e=y.type,Os=E.attributes;Os.length;)E.removeAttributeNode(Os[0]);c6(E,_e,Z),E[n2]=y,E[y2]=Z}catch(th){p3(y,y.return,th)}}var _5=!1,U3=!1,k7=!1,F_=typeof WeakSet=="function"?WeakSet:Set,n6=null;function eE(y,E){if(y=y.containerInfo,e9=S8,y=k4(y),K4(y)){if("selectionStart"in y)var Z={start:y.selectionStart,end:y.selectionEnd};else e:{Z=(Z=y.ownerDocument)&&Z.defaultView||window;var _e=Z.getSelection&&Z.getSelection();if(_e&&_e.rangeCount!==0){Z=_e.anchorNode;var Os=_e.anchorOffset,th=_e.focusNode;_e=_e.focusOffset;try{Z.nodeType,th.nodeType}catch{Z=null;break e}var i1=0,f1=-1,I1=-1,o2=0,k2=0,O2=y,d2=null;t:for(;;){for(var p2;O2!==Z||Os!==0&&O2.nodeType!==3||(f1=i1+Os),O2!==th||_e!==0&&O2.nodeType!==3||(I1=i1+_e),O2.nodeType===3&&(i1+=O2.nodeValue.length),(p2=O2.firstChild)!==null;)d2=O2,O2=p2;for(;;){if(O2===y)break t;if(d2===Z&&++o2===Os&&(f1=i1),d2===th&&++k2===_e&&(I1=i1),(p2=O2.nextSibling)!==null)break;O2=d2,d2=O2.parentNode}O2=p2}Z=f1===-1||I1===-1?null:{start:f1,end:I1}}else Z=null}Z=Z||{start:0,end:0}}else Z=null;for(t9={focusedElem:y,selectionRange:Z},S8=!1,n6=E;n6!==null;)if(E=n6,y=E.child,(E.subtreeFlags&1024)!==0&&y!==null)y.return=E,n6=y;else for(;n6!==null;){switch(E=n6,th=E.alternate,y=E.flags,E.tag){case 0:break;case 11:case 15:break;case 1:if((y&1024)!==0&&th!==null){y=void 0,Z=E,Os=th.memoizedProps,th=th.memoizedState,_e=Z.stateNode;try{var S4=cv(Z.type,Os,Z.elementType===Z.type);y=_e.getSnapshotBeforeUpdate(S4,th),_e.__reactInternalSnapshotBeforeUpdate=y}catch(_4){p3(Z,Z.return,_4)}}break;case 3:if((y&1024)!==0){if(y=E.stateNode.containerInfo,Z=y.nodeType,Z===9)n9(y);else if(Z===1)switch(y.nodeName){case"HEAD":case"HTML":case"BODY":n9(y);break;default:y.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((y&1024)!==0)throw Error(s(163))}if(y=E.sibling,y!==null){y.return=E.return,n6=y;break}n6=E.return}}function O_(y,E,Z){var _e=Z.flags;switch(Z.tag){case 0:case 11:case 15:B5(y,Z),_e&4&&dy(5,Z);break;case 1:if(B5(y,Z),_e&4)if(y=Z.stateNode,E===null)try{y.componentDidMount()}catch(i1){p3(Z,Z.return,i1)}else{var Os=cv(Z.type,E.memoizedProps);E=E.memoizedState;try{y.componentDidUpdate(Os,E,y.__reactInternalSnapshotBeforeUpdate)}catch(i1){p3(Z,Z.return,i1)}}_e&64&&P_(Z),_e&512&&fy(Z,Z.return);break;case 3:if(B5(y,Z),_e&64&&(y=Z.updateQueue,y!==null)){if(E=null,Z.child!==null)switch(Z.child.tag){case 27:case 5:E=Z.child.stateNode;break;case 1:E=Z.child.stateNode}try{D9(y,E)}catch(i1){p3(Z,Z.return,i1)}}break;case 27:E===null&&_e&4&&N_(Z);case 26:case 5:B5(y,Z),E===null&&_e&4&&D_(Z),_e&512&&fy(Z,Z.return);break;case 12:B5(y,Z);break;case 13:B5(y,Z),_e&4&&q_(y,Z),_e&64&&(y=Z.memoizedState,y!==null&&(y=y.dehydrated,y!==null&&(Z=uE.bind(null,Z),CE(y,Z))));break;case 22:if(_e=Z.memoizedState!==null||_5,!_e){E=E!==null&&E.memoizedState!==null||U3,Os=_5;var th=U3;_5=_e,(U3=E)&&!th?V5(y,Z,(Z.subtreeFlags&8772)!==0):B5(y,Z),_5=Os,U3=th}break;case 30:break;default:B5(y,Z)}}function B_(y){var E=y.alternate;E!==null&&(y.alternate=null,B_(E)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(E=y.stateNode,E!==null&&Ym(E)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}var C3=null,T6=!1;function x5(y,E,Z){for(Z=Z.child;Z!==null;)V_(y,E,Z),Z=Z.sibling}function V_(y,E,Z){if(e1&&typeof e1.onCommitFiberUnmount=="function")try{e1.onCommitFiberUnmount(o1,Z)}catch{}switch(Z.tag){case 26:U3||a5(Z,E),x5(y,E,Z),Z.memoizedState?Z.memoizedState.count--:Z.stateNode&&(Z=Z.stateNode,Z.parentNode.removeChild(Z));break;case 27:U3||a5(Z,E);var _e=C3,Os=T6;H5(Z.type)&&(C3=Z.stateNode,T6=!1),x5(y,E,Z),wy(Z.stateNode),C3=_e,T6=Os;break;case 5:U3||a5(Z,E);case 6:if(_e=C3,Os=T6,C3=null,x5(y,E,Z),C3=_e,T6=Os,C3!==null)if(T6)try{(C3.nodeType===9?C3.body:C3.nodeName==="HTML"?C3.ownerDocument.body:C3).removeChild(Z.stateNode)}catch(th){p3(Z,E,th)}else try{C3.removeChild(Z.stateNode)}catch(th){p3(Z,E,th)}break;case 18:C3!==null&&(T6?(y=C3,Rx(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,Z.stateNode),ky(y)):Rx(C3,Z.stateNode));break;case 4:_e=C3,Os=T6,C3=Z.stateNode.containerInfo,T6=!0,x5(y,E,Z),C3=_e,T6=Os;break;case 0:case 11:case 14:case 15:U3||O5(2,Z,E),U3||O5(4,Z,E),x5(y,E,Z);break;case 1:U3||(a5(Z,E),_e=Z.stateNode,typeof _e.componentWillUnmount=="function"&&I_(Z,E,_e)),x5(y,E,Z);break;case 21:x5(y,E,Z);break;case 22:U3=(_e=U3)||Z.memoizedState!==null,x5(y,E,Z),U3=_e;break;default:x5(y,E,Z)}}function q_(y,E){if(E.memoizedState===null&&(y=E.alternate,y!==null&&(y=y.memoizedState,y!==null&&(y=y.dehydrated,y!==null))))try{ky(y)}catch(Z){p3(E,E.return,Z)}}function tE(y){switch(y.tag){case 13:case 19:var E=y.stateNode;return E===null&&(E=y.stateNode=new F_),E;case 22:return y=y.stateNode,E=y._retryCache,E===null&&(E=y._retryCache=new F_),E;default:throw Error(s(435,y.tag))}}function P7(y,E){var Z=tE(y);E.forEach(function(_e){var Os=cE.bind(null,y,_e);Z.has(_e)||(Z.add(_e),_e.then(Os,Os))})}function I6(y,E){var Z=E.deletions;if(Z!==null)for(var _e=0;_e<Z.length;_e++){var Os=Z[_e],th=y,i1=E,f1=i1;e:for(;f1!==null;){switch(f1.tag){case 27:if(H5(f1.type)){C3=f1.stateNode,T6=!1;break e}break;case 5:C3=f1.stateNode,T6=!1;break e;case 3:case 4:C3=f1.stateNode.containerInfo,T6=!0;break e}f1=f1.return}if(C3===null)throw Error(s(160));V_(th,i1,Os),C3=null,T6=!1,th=Os.alternate,th!==null&&(th.return=null),Os.return=null}if(E.subtreeFlags&13878)for(E=E.child;E!==null;)z_(E,y),E=E.sibling}var Q6=null;function z_(y,E){var Z=y.alternate,_e=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:I6(E,y),D6(y),_e&4&&(O5(3,y,y.return),dy(3,y),O5(5,y,y.return));break;case 1:I6(E,y),D6(y),_e&512&&(U3||Z===null||a5(Z,Z.return)),_e&64&&_5&&(y=y.updateQueue,y!==null&&(_e=y.callbacks,_e!==null&&(Z=y.shared.hiddenCallbacks,y.shared.hiddenCallbacks=Z===null?_e:Z.concat(_e))));break;case 26:var Os=Q6;if(I6(E,y),D6(y),_e&512&&(U3||Z===null||a5(Z,Z.return)),_e&4){var th=Z!==null?Z.memoizedState:null;if(_e=y.memoizedState,Z===null)if(_e===null)if(y.stateNode===null){e:{_e=y.type,Z=y.memoizedProps,Os=Os.ownerDocument||Os;t:switch(_e){case"title":th=Os.getElementsByTagName("title")[0],(!th||th[gf]||th[n2]||th.namespaceURI==="http://www.w3.org/2000/svg"||th.hasAttribute("itemprop"))&&(th=Os.createElement(_e),Os.head.insertBefore(th,Os.querySelector("head > title"))),c6(th,_e,Z),th[n2]=y,M1(th),_e=th;break e;case"link":var i1=Fx("link","href",Os).get(_e+(Z.href||""));if(i1){for(var f1=0;f1<i1.length;f1++)if(th=i1[f1],th.getAttribute("href")===(Z.href==null||Z.href===""?null:Z.href)&&th.getAttribute("rel")===(Z.rel==null?null:Z.rel)&&th.getAttribute("title")===(Z.title==null?null:Z.title)&&th.getAttribute("crossorigin")===(Z.crossOrigin==null?null:Z.crossOrigin)){i1.splice(f1,1);break t}}th=Os.createElement(_e),c6(th,_e,Z),Os.head.appendChild(th);break;case"meta":if(i1=Fx("meta","content",Os).get(_e+(Z.content||""))){for(f1=0;f1<i1.length;f1++)if(th=i1[f1],th.getAttribute("content")===(Z.content==null?null:""+Z.content)&&th.getAttribute("name")===(Z.name==null?null:Z.name)&&th.getAttribute("property")===(Z.property==null?null:Z.property)&&th.getAttribute("http-equiv")===(Z.httpEquiv==null?null:Z.httpEquiv)&&th.getAttribute("charset")===(Z.charSet==null?null:Z.charSet)){i1.splice(f1,1);break t}}th=Os.createElement(_e),c6(th,_e,Z),Os.head.appendChild(th);break;default:throw Error(s(468,_e))}th[n2]=y,M1(th),_e=th}y.stateNode=_e}else Ox(Os,y.type,y.stateNode);else y.stateNode=Nx(Os,_e,y.memoizedProps);else th!==_e?(th===null?Z.stateNode!==null&&(Z=Z.stateNode,Z.parentNode.removeChild(Z)):th.count--,_e===null?Ox(Os,y.type,y.stateNode):Nx(Os,_e,y.memoizedProps)):_e===null&&y.stateNode!==null&&C7(y,y.memoizedProps,Z.memoizedProps)}break;case 27:I6(E,y),D6(y),_e&512&&(U3||Z===null||a5(Z,Z.return)),Z!==null&&_e&4&&C7(y,y.memoizedProps,Z.memoizedProps);break;case 5:if(I6(E,y),D6(y),_e&512&&(U3||Z===null||a5(Z,Z.return)),y.flags&32){Os=y.stateNode;try{n1(Os,"")}catch(p2){p3(y,y.return,p2)}}_e&4&&y.stateNode!=null&&(Os=y.memoizedProps,C7(y,Os,Z!==null?Z.memoizedProps:Os)),_e&1024&&(k7=!0);break;case 6:if(I6(E,y),D6(y),_e&4){if(y.stateNode===null)throw Error(s(162));_e=y.memoizedProps,Z=y.stateNode;try{Z.nodeValue=_e}catch(p2){p3(y,y.return,p2)}}break;case 3:if(x8=null,Os=Q6,Q6=b8(E.containerInfo),I6(E,y),Q6=Os,D6(y),_e&4&&Z!==null&&Z.memoizedState.isDehydrated)try{ky(E.containerInfo)}catch(p2){p3(y,y.return,p2)}k7&&(k7=!1,j_(y));break;case 4:_e=Q6,Q6=b8(y.stateNode.containerInfo),I6(E,y),D6(y),Q6=_e;break;case 12:I6(E,y),D6(y);break;case 13:I6(E,y),D6(y),y.child.flags&8192&&y.memoizedState!==null!=(Z!==null&&Z.memoizedState!==null)&&(O7=p1()),_e&4&&(_e=y.updateQueue,_e!==null&&(y.updateQueue=null,P7(y,_e)));break;case 22:Os=y.memoizedState!==null;var I1=Z!==null&&Z.memoizedState!==null,o2=_5,k2=U3;if(_5=o2||Os,U3=k2||I1,I6(E,y),U3=k2,_5=o2,D6(y),_e&8192)e:for(E=y.stateNode,E._visibility=Os?E._visibility&-2:E._visibility|1,Os&&(Z===null||I1||_5||U3||hv(y)),Z=null,E=y;;){if(E.tag===5||E.tag===26){if(Z===null){I1=Z=E;try{if(th=I1.stateNode,Os)i1=th.style,typeof i1.setProperty=="function"?i1.setProperty("display","none","important"):i1.display="none";else{f1=I1.stateNode;var O2=I1.memoizedProps.style,d2=O2!=null&&O2.hasOwnProperty("display")?O2.display:null;f1.style.display=d2==null||typeof d2=="boolean"?"":(""+d2).trim()}}catch(p2){p3(I1,I1.return,p2)}}}else if(E.tag===6){if(Z===null){I1=E;try{I1.stateNode.nodeValue=Os?"":I1.memoizedProps}catch(p2){p3(I1,I1.return,p2)}}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===y)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===y)break e;for(;E.sibling===null;){if(E.return===null||E.return===y)break e;Z===E&&(Z=null),E=E.return}Z===E&&(Z=null),E.sibling.return=E.return,E=E.sibling}_e&4&&(_e=y.updateQueue,_e!==null&&(Z=_e.retryQueue,Z!==null&&(_e.retryQueue=null,P7(y,Z))));break;case 19:I6(E,y),D6(y),_e&4&&(_e=y.updateQueue,_e!==null&&(y.updateQueue=null,P7(y,_e)));break;case 30:break;case 21:break;default:I6(E,y),D6(y)}}function D6(y){var E=y.flags;if(E&2){try{for(var Z,_e=y.return;_e!==null;){if(L_(_e)){Z=_e;break}_e=_e.return}if(Z==null)throw Error(s(160));switch(Z.tag){case 27:var Os=Z.stateNode,th=R7(y);s8(y,th,Os);break;case 5:var i1=Z.stateNode;Z.flags&32&&(n1(i1,""),Z.flags&=-33);var f1=R7(y);s8(y,f1,i1);break;case 3:case 4:var I1=Z.stateNode.containerInfo,o2=R7(y);M7(y,o2,I1);break;default:throw Error(s(161))}}catch(k2){p3(y,y.return,k2)}y.flags&=-3}E&4096&&(y.flags&=-4097)}function j_(y){if(y.subtreeFlags&1024)for(y=y.child;y!==null;){var E=y;j_(E),E.tag===5&&E.flags&1024&&E.stateNode.reset(),y=y.sibling}}function B5(y,E){if(E.subtreeFlags&8772)for(E=E.child;E!==null;)O_(y,E.alternate,E),E=E.sibling}function hv(y){for(y=y.child;y!==null;){var E=y;switch(E.tag){case 0:case 11:case 14:case 15:O5(4,E,E.return),hv(E);break;case 1:a5(E,E.return);var Z=E.stateNode;typeof Z.componentWillUnmount=="function"&&I_(E,E.return,Z),hv(E);break;case 27:wy(E.stateNode);case 26:case 5:a5(E,E.return),hv(E);break;case 22:E.memoizedState===null&&hv(E);break;case 30:hv(E);break;default:hv(E)}y=y.sibling}}function V5(y,E,Z){for(Z=Z&&(E.subtreeFlags&8772)!==0,E=E.child;E!==null;){var _e=E.alternate,Os=y,th=E,i1=th.flags;switch(th.tag){case 0:case 11:case 15:V5(Os,th,Z),dy(4,th);break;case 1:if(V5(Os,th,Z),_e=th,Os=_e.stateNode,typeof Os.componentDidMount=="function")try{Os.componentDidMount()}catch(o2){p3(_e,_e.return,o2)}if(_e=th,Os=_e.updateQueue,Os!==null){var f1=_e.stateNode;try{var I1=Os.shared.hiddenCallbacks;if(I1!==null)for(Os.shared.hiddenCallbacks=null,Os=0;Os<I1.length;Os++)I9(I1[Os],f1)}catch(o2){p3(_e,_e.return,o2)}}Z&&i1&64&&P_(th),fy(th,th.return);break;case 27:N_(th);case 26:case 5:V5(Os,th,Z),Z&&_e===null&&i1&4&&D_(th),fy(th,th.return);break;case 12:V5(Os,th,Z);break;case 13:V5(Os,th,Z),Z&&i1&4&&q_(Os,th);break;case 22:th.memoizedState===null&&V5(Os,th,Z),fy(th,th.return);break;case 30:break;default:V5(Os,th,Z)}E=E.sibling}}function I7(y,E){var Z=null;y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(Z=y.memoizedState.cachePool.pool),y=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(y=E.memoizedState.cachePool.pool),y!==Z&&(y!=null&&y.refCount++,Z!=null&&Zv(Z))}function D7(y,E){y=null,E.alternate!==null&&(y=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==y&&(E.refCount++,y!=null&&Zv(y))}function s5(y,E,Z,_e){if(E.subtreeFlags&10256)for(E=E.child;E!==null;)$_(y,E,Z,_e),E=E.sibling}function $_(y,E,Z,_e){var Os=E.flags;switch(E.tag){case 0:case 11:case 15:s5(y,E,Z,_e),Os&2048&&dy(9,E);break;case 1:s5(y,E,Z,_e);break;case 3:s5(y,E,Z,_e),Os&2048&&(y=null,E.alternate!==null&&(y=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==y&&(E.refCount++,y!=null&&Zv(y)));break;case 12:if(Os&2048){s5(y,E,Z,_e),y=E.stateNode;try{var th=E.memoizedProps,i1=th.id,f1=th.onPostCommit;typeof f1=="function"&&f1(i1,E.alternate===null?"mount":"update",y.passiveEffectDuration,-0)}catch(I1){p3(E,E.return,I1)}}else s5(y,E,Z,_e);break;case 13:s5(y,E,Z,_e);break;case 23:break;case 22:th=E.stateNode,i1=E.alternate,E.memoizedState!==null?th._visibility&2?s5(y,E,Z,_e):py(y,E):th._visibility&2?s5(y,E,Z,_e):(th._visibility|=2,Lv(y,E,Z,_e,(E.subtreeFlags&10256)!==0)),Os&2048&&I7(i1,E);break;case 24:s5(y,E,Z,_e),Os&2048&&D7(E.alternate,E);break;default:s5(y,E,Z,_e)}}function Lv(y,E,Z,_e,Os){for(Os=Os&&(E.subtreeFlags&10256)!==0,E=E.child;E!==null;){var th=y,i1=E,f1=Z,I1=_e,o2=i1.flags;switch(i1.tag){case 0:case 11:case 15:Lv(th,i1,f1,I1,Os),dy(8,i1);break;case 23:break;case 22:var k2=i1.stateNode;i1.memoizedState!==null?k2._visibility&2?Lv(th,i1,f1,I1,Os):py(th,i1):(k2._visibility|=2,Lv(th,i1,f1,I1,Os)),Os&&o2&2048&&I7(i1.alternate,i1);break;case 24:Lv(th,i1,f1,I1,Os),Os&&o2&2048&&D7(i1.alternate,i1);break;default:Lv(th,i1,f1,I1,Os)}E=E.sibling}}function py(y,E){if(E.subtreeFlags&10256)for(E=E.child;E!==null;){var Z=y,_e=E,Os=_e.flags;switch(_e.tag){case 22:py(Z,_e),Os&2048&&I7(_e.alternate,_e);break;case 24:py(Z,_e),Os&2048&&D7(_e.alternate,_e);break;default:py(Z,_e)}E=E.sibling}}var my=8192;function Nv(y){if(y.subtreeFlags&my)for(y=y.child;y!==null;)U_(y),y=y.sibling}function U_(y){switch(y.tag){case 26:Nv(y),y.flags&my&&y.memoizedState!==null&&qE(Q6,y.memoizedState,y.memoizedProps);break;case 5:Nv(y);break;case 3:case 4:var E=Q6;Q6=b8(y.stateNode.containerInfo),Nv(y),Q6=E;break;case 22:y.memoizedState===null&&(E=y.alternate,E!==null&&E.memoizedState!==null?(E=my,my=16777216,Nv(y),my=E):Nv(y));break;default:Nv(y)}}function H_(y){var E=y.alternate;if(E!==null&&(y=E.child,y!==null)){E.child=null;do E=y.sibling,y.sibling=null,y=E;while(y!==null)}}function gy(y){var E=y.deletions;if((y.flags&16)!==0){if(E!==null)for(var Z=0;Z<E.length;Z++){var _e=E[Z];n6=_e,K_(_e,y)}H_(y)}if(y.subtreeFlags&10256)for(y=y.child;y!==null;)G_(y),y=y.sibling}function G_(y){switch(y.tag){case 0:case 11:case 15:gy(y),y.flags&2048&&O5(9,y,y.return);break;case 3:gy(y);break;case 12:gy(y);break;case 22:var E=y.stateNode;y.memoizedState!==null&&E._visibility&2&&(y.return===null||y.return.tag!==13)?(E._visibility&=-3,o8(y)):gy(y);break;default:gy(y)}}function o8(y){var E=y.deletions;if((y.flags&16)!==0){if(E!==null)for(var Z=0;Z<E.length;Z++){var _e=E[Z];n6=_e,K_(_e,y)}H_(y)}for(y=y.child;y!==null;){switch(E=y,E.tag){case 0:case 11:case 15:O5(8,E,E.return),o8(E);break;case 22:Z=E.stateNode,Z._visibility&2&&(Z._visibility&=-3,o8(E));break;default:o8(E)}y=y.sibling}}function K_(y,E){for(;n6!==null;){var Z=n6;switch(Z.tag){case 0:case 11:case 15:O5(8,Z,E);break;case 23:case 22:if(Z.memoizedState!==null&&Z.memoizedState.cachePool!==null){var _e=Z.memoizedState.cachePool.pool;_e!=null&&_e.refCount++}break;case 24:Zv(Z.memoizedState.cache)}if(_e=Z.child,_e!==null)_e.return=Z,n6=_e;else e:for(Z=y;n6!==null;){_e=n6;var Os=_e.sibling,th=_e.return;if(B_(_e),_e===Z){n6=null;break e}if(Os!==null){Os.return=th,n6=Os;break e}n6=th}}}var rE={getCacheForType:function(y){var E=f6(Z3),Z=E.data.get(y);return Z===void 0&&(Z=y(),E.data.set(y,Z)),Z}},iE=typeof WeakMap=="function"?WeakMap:Map,s3=0,y3=null,z4=null,X4=0,o3=0,L6=null,q5=!1,Fv=!1,L7=!1,w5=0,O3=0,z5=0,dv=0,N7=0,H6=0,Ov=0,vy=null,C6=null,F7=!1,O7=0,l8=1/0,u8=null,j5=null,u6=0,$5=null,Bv=null,Vv=0,B7=0,V7=null,W_=null,yy=0,q7=null;function N6(){if((s3&2)!==0&&X4!==0)return X4&-X4;if(Fc.T!==null){var y=Tv;return y!==0?y:K7()}return b1()}function X_(){H6===0&&(H6=(X4&536870912)===0||t3?G1():536870912);var y=U6.current;return y!==null&&(y.flags|=32),H6}function F6(y,E,Z){(y===y3&&(o3===2||o3===9)||y.cancelPendingCommit!==null)&&(qv(y,0),U5(y,X4,H6,!1)),v2(y,Z),((s3&2)===0||y!==y3)&&(y===y3&&((s3&2)===0&&(dv|=Z),O3===4&&U5(y,X4,H6,!1)),o5(y))}function Y_(y,E,Z){if((s3&6)!==0)throw Error(s(327));var _e=!Z&&(E&124)===0&&(E&y.expiredLanes)===0||l2(y,E),Os=_e?sE(y,E):$7(y,E,!0),th=_e;do{if(Os===0){Fv&&!_e&&U5(y,E,0,!1);break}else{if(Z=y.current.alternate,th&&!nE(Z)){Os=$7(y,E,!1),th=!1;continue}if(Os===2){if(th=E,y.errorRecoveryDisabledLanes&th)var i1=0;else i1=y.pendingLanes&-536870913,i1=i1!==0?i1:i1&536870912?536870912:0;if(i1!==0){E=i1;e:{var f1=y;Os=vy;var I1=f1.current.memoizedState.isDehydrated;if(I1&&(qv(f1,i1).flags|=256),i1=$7(f1,i1,!1),i1!==2){if(L7&&!I1){f1.errorRecoveryDisabledLanes|=th,dv|=th,Os=4;break e}th=C6,C6=Os,th!==null&&(C6===null?C6=th:C6.push.apply(C6,th))}Os=i1}if(th=!1,Os!==2)continue}}if(Os===1){qv(y,0),U5(y,E,0,!0);break}e:{switch(_e=y,th=Os,th){case 0:case 1:throw Error(s(345));case 4:if((E&4194048)!==E)break;case 6:U5(_e,E,H6,!q5);break e;case 2:C6=null;break;case 3:case 5:break;default:throw Error(s(329))}if((E&62914560)===E&&(Os=O7+300-p1(),10<Os)){if(U5(_e,E,H6,!q5),Y1(_e,0,!0)!==0)break e;_e.timeoutHandle=Tx(Q_.bind(null,_e,Z,C6,u8,F7,E,H6,dv,Ov,q5,th,2,-0,0),Os);break e}Q_(_e,Z,C6,u8,F7,E,H6,dv,Ov,q5,th,0,-0,0)}}break}while(!0);o5(y)}function Q_(y,E,Z,_e,Os,th,i1,f1,I1,o2,k2,O2,d2,p2){if(y.timeoutHandle=-1,O2=E.subtreeFlags,(O2&8192||(O2&16785408)===16785408)&&(Ay={stylesheets:null,count:0,unsuspend:VE},U_(E),O2=zE(),O2!==null)){y.cancelPendingCommit=O2(nx.bind(null,y,E,th,Z,_e,Os,i1,f1,I1,k2,1,d2,p2)),U5(y,th,i1,!o2);return}nx(y,E,th,Z,_e,Os,i1,f1,I1)}function nE(y){for(var E=y;;){var Z=E.tag;if((Z===0||Z===11||Z===15)&&E.flags&16384&&(Z=E.updateQueue,Z!==null&&(Z=Z.stores,Z!==null)))for(var _e=0;_e<Z.length;_e++){var Os=Z[_e],th=Os.getSnapshot;Os=Os.value;try{if(!y4(th(),Os))return!1}catch{return!1}}if(Z=E.child,E.subtreeFlags&16384&&Z!==null)Z.return=E,E=Z;else{if(E===y)break;for(;E.sibling===null;){if(E.return===null||E.return===y)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function U5(y,E,Z,_e){E&=~N7,E&=~dv,y.suspendedLanes|=E,y.pingedLanes&=~E,_e&&(y.warmLanes|=E),_e=y.expirationTimes;for(var Os=E;0<Os;){var th=31-C1(Os),i1=1<<th;_e[th]=-1,Os&=~i1}Z!==0&&q2(y,Z,E)}function c8(){return(s3&6)===0?(by(0),!1):!0}function z7(){if(z4!==null){if(o3===0)var y=z4.return;else y=z4,p5=sv=null,n7(y),Iv=null,uy=0,y=z4;for(;y!==null;)k_(y.alternate,y),y=y.return;z4=null}}function qv(y,E){var Z=y.timeoutHandle;Z!==-1&&(y.timeoutHandle=-1,wE(Z)),Z=y.cancelPendingCommit,Z!==null&&(y.cancelPendingCommit=null,Z()),z7(),y3=y,z4=Z=h5(y.current,null),X4=E,o3=0,L6=null,q5=!1,Fv=l2(y,E),L7=!1,Ov=H6=N7=dv=z5=O3=0,C6=vy=null,F7=!1,(E&8)!==0&&(E|=E&32);var _e=y.entangledLanes;if(_e!==0)for(y=y.entanglements,_e&=E;0<_e;){var Os=31-C1(_e),th=1<<Os;E|=y[Os],_e&=~th}return w5=E,z6(),Z}function Z_(y,E){F4=null,Fc.H=Qy,E===ey||E===zy?(E=k9(),o3=3):E===C9?(E=k9(),o3=4):o3=E===g_?8:E!==null&&typeof E=="object"&&typeof E.then=="function"?6:1,L6=E,z4===null&&(O3=1,r8(y,j3(E,y.current)))}function J_(){var y=Fc.H;return Fc.H=Qy,y===null?Qy:y}function ex(){var y=Fc.A;return Fc.A=rE,y}function j7(){O3=4,q5||(X4&4194048)!==X4&&U6.current!==null||(Fv=!0),(z5&134217727)===0&&(dv&134217727)===0||y3===null||U5(y3,X4,H6,!1)}function $7(y,E,Z){var _e=s3;s3|=2;var Os=J_(),th=ex();(y3!==y||X4!==E)&&(u8=null,qv(y,E)),E=!1;var i1=O3;e:do try{if(o3!==0&&z4!==null){var f1=z4,I1=L6;switch(o3){case 8:z7(),i1=6;break e;case 3:case 2:case 9:case 6:U6.current===null&&(E=!0);var o2=o3;if(o3=0,L6=null,zv(y,f1,I1,o2),Z&&Fv){i1=0;break e}break;default:o2=o3,o3=0,L6=null,zv(y,f1,I1,o2)}}aE(),i1=O3;break}catch(k2){Z_(y,k2)}while(!0);return E&&y.shellSuspendCounter++,p5=sv=null,s3=_e,Fc.H=Os,Fc.A=th,z4===null&&(y3=null,X4=0,z6()),i1}function aE(){for(;z4!==null;)tx(z4)}function sE(y,E){var Z=s3;s3|=2;var _e=J_(),Os=ex();y3!==y||X4!==E?(u8=null,l8=p1()+500,qv(y,E)):Fv=l2(y,E);e:do try{if(o3!==0&&z4!==null){E=z4;var th=L6;t:switch(o3){case 1:o3=0,L6=null,zv(y,E,th,1);break;case 2:case 9:if(R9(th)){o3=0,L6=null,rx(E);break}E=function(){o3!==2&&o3!==9||y3!==y||(o3=7),o5(y)},th.then(E,E);break e;case 3:o3=7;break e;case 4:o3=5;break e;case 7:R9(th)?(o3=0,L6=null,rx(E)):(o3=0,L6=null,zv(y,E,th,7));break;case 5:var i1=null;switch(z4.tag){case 26:i1=z4.memoizedState;case 5:case 27:var f1=z4;if(!i1||Bx(i1)){o3=0,L6=null;var I1=f1.sibling;if(I1!==null)z4=I1;else{var o2=f1.return;o2!==null?(z4=o2,h8(o2)):z4=null}break t}}o3=0,L6=null,zv(y,E,th,5);break;case 6:o3=0,L6=null,zv(y,E,th,6);break;case 8:z7(),O3=6;break e;default:throw Error(s(462))}}oE();break}catch(k2){Z_(y,k2)}while(!0);return p5=sv=null,Fc.H=_e,Fc.A=Os,s3=Z,z4!==null?0:(y3=null,X4=0,z6(),O3)}function oE(){for(;z4!==null&&!M2();)tx(z4)}function tx(y){var E=R_(y.alternate,y,w5);y.memoizedProps=y.pendingProps,E===null?h8(y):z4=E}function rx(y){var E=y,Z=E.alternate;switch(E.tag){case 15:case 0:E=w_(Z,E,E.pendingProps,E.type,void 0,X4);break;case 11:E=w_(Z,E,E.pendingProps,E.type.render,E.ref,X4);break;case 5:n7(E);default:k_(Z,E),E=z4=y9(E,w5),E=R_(Z,E,w5)}y.memoizedProps=y.pendingProps,E===null?h8(y):z4=E}function zv(y,E,Z,_e){p5=sv=null,n7(E),Iv=null,uy=0;var Os=E.return;try{if(Yw(y,Os,E,Z,X4)){O3=1,r8(y,j3(Z,y.current)),z4=null;return}}catch(th){if(Os!==null)throw z4=Os,th;O3=1,r8(y,j3(Z,y.current)),z4=null;return}E.flags&32768?(t3||_e===1?y=!0:Fv||(X4&536870912)!==0?y=!1:(q5=y=!0,(_e===2||_e===9||_e===3||_e===6)&&(_e=U6.current,_e!==null&&_e.tag===13&&(_e.flags|=16384))),ix(E,y)):h8(E)}function h8(y){var E=y;do{if((E.flags&32768)!==0){ix(E,q5);return}y=E.return;var Z=Zw(E.alternate,E,w5);if(Z!==null){z4=Z;return}if(E=E.sibling,E!==null){z4=E;return}z4=E=y}while(E!==null);O3===0&&(O3=5)}function ix(y,E){do{var Z=Jw(y.alternate,y);if(Z!==null){Z.flags&=32767,z4=Z;return}if(Z=y.return,Z!==null&&(Z.flags|=32768,Z.subtreeFlags=0,Z.deletions=null),!E&&(y=y.sibling,y!==null)){z4=y;return}z4=y=Z}while(y!==null);O3=6,z4=null}function nx(y,E,Z,_e,Os,th,i1,f1,I1){y.cancelPendingCommit=null;do d8();while(u6!==0);if((s3&6)!==0)throw Error(s(327));if(E!==null){if(E===y.current)throw Error(s(177));if(th=E.lanes|E.childLanes,th|=q6,z2(y,Z,th,i1,f1,I1),y===y3&&(z4=y3=null,X4=0),Bv=E,$5=y,Vv=Z,B7=th,V7=Os,W_=_e,(E.subtreeFlags&10256)!==0||(E.flags&10256)!==0?(y.callbackNode=null,y.callbackPriority=0,hE(B1,function(){return ux(),null})):(y.callbackNode=null,y.callbackPriority=0),_e=(E.flags&13878)!==0,(E.subtreeFlags&13878)!==0||_e){_e=Fc.T,Fc.T=null,Os=_h.p,_h.p=2,i1=s3,s3|=4;try{eE(y,E,Z)}finally{s3=i1,_h.p=Os,Fc.T=_e}}u6=1,ax(),sx(),ox()}}function ax(){if(u6===1){u6=0;var y=$5,E=Bv,Z=(E.flags&13878)!==0;if((E.subtreeFlags&13878)!==0||Z){Z=Fc.T,Fc.T=null;var _e=_h.p;_h.p=2;var Os=s3;s3|=4;try{z_(E,y);var th=t9,i1=k4(y.containerInfo),f1=th.focusedElem,I1=th.selectionRange;if(i1!==f1&&f1&&f1.ownerDocument&&V4(f1.ownerDocument.documentElement,f1)){if(I1!==null&&K4(f1)){var o2=I1.start,k2=I1.end;if(k2===void 0&&(k2=o2),"selectionStart"in f1)f1.selectionStart=o2,f1.selectionEnd=Math.min(k2,f1.value.length);else{var O2=f1.ownerDocument||document,d2=O2&&O2.defaultView||window;if(d2.getSelection){var p2=d2.getSelection(),S4=f1.textContent.length,_4=Math.min(I1.start,S4),c3=I1.end===void 0?_4:Math.min(I1.end,S4);!p2.extend&&_4>c3&&(i1=c3,c3=_4,_4=i1);var K1=h4(f1,_4),j1=h4(f1,c3);if(K1&&j1&&(p2.rangeCount!==1||p2.anchorNode!==K1.node||p2.anchorOffset!==K1.offset||p2.focusNode!==j1.node||p2.focusOffset!==j1.offset)){var r2=O2.createRange();r2.setStart(K1.node,K1.offset),p2.removeAllRanges(),_4>c3?(p2.addRange(r2),p2.extend(j1.node,j1.offset)):(r2.setEnd(j1.node,j1.offset),p2.addRange(r2))}}}}for(O2=[],p2=f1;p2=p2.parentNode;)p2.nodeType===1&&O2.push({element:p2,left:p2.scrollLeft,top:p2.scrollTop});for(typeof f1.focus=="function"&&f1.focus(),f1=0;f1<O2.length;f1++){var D2=O2[f1];D2.element.scrollLeft=D2.left,D2.element.scrollTop=D2.top}}S8=!!e9,t9=e9=null}finally{s3=Os,_h.p=_e,Fc.T=Z}}y.current=E,u6=2}}function sx(){if(u6===2){u6=0;var y=$5,E=Bv,Z=(E.flags&8772)!==0;if((E.subtreeFlags&8772)!==0||Z){Z=Fc.T,Fc.T=null;var _e=_h.p;_h.p=2;var Os=s3;s3|=4;try{O_(y,E.alternate,E)}finally{s3=Os,_h.p=_e,Fc.T=Z}}u6=3}}function ox(){if(u6===4||u6===3){u6=0,x2();var y=$5,E=Bv,Z=Vv,_e=W_;(E.subtreeFlags&10256)!==0||(E.flags&10256)!==0?u6=5:(u6=0,Bv=$5=null,lx(y,y.pendingLanes));var Os=y.pendingLanes;if(Os===0&&(j5=null),X2(Z),E=E.stateNode,e1&&typeof e1.onCommitFiberRoot=="function")try{e1.onCommitFiberRoot(o1,E,void 0,(E.current.flags&128)===128)}catch{}if(_e!==null){E=Fc.T,Os=_h.p,_h.p=2,Fc.T=null;try{for(var th=y.onRecoverableError,i1=0;i1<_e.length;i1++){var f1=_e[i1];th(f1.value,{componentStack:f1.stack})}}finally{Fc.T=E,_h.p=Os}}(Vv&3)!==0&&d8(),o5(y),Os=y.pendingLanes,(Z&4194090)!==0&&(Os&42)!==0?y===q7?yy++:(yy=0,q7=y):yy=0,by(0)}}function lx(y,E){(y.pooledCacheLanes&=E)===0&&(E=y.pooledCache,E!=null&&(y.pooledCache=null,Zv(E)))}function d8(y){return ax(),sx(),ox(),ux()}function ux(){if(u6!==5)return!1;var y=$5,E=B7;B7=0;var Z=X2(Vv),_e=Fc.T,Os=_h.p;try{_h.p=32>Z?32:Z,Fc.T=null,Z=V7,V7=null;var th=$5,i1=Vv;if(u6=0,Bv=$5=null,Vv=0,(s3&6)!==0)throw Error(s(331));var f1=s3;if(s3|=4,G_(th.current),$_(th,th.current,i1,Z),s3=f1,by(0,!1),e1&&typeof e1.onPostCommitFiberRoot=="function")try{e1.onPostCommitFiberRoot(o1,th)}catch{}return!0}finally{_h.p=Os,Fc.T=_e,lx(y,E)}}function cx(y,E,Z){E=j3(Z,E),E=y7(y.stateNode,E,2),y=D5(y,E,2),y!==null&&(v2(y,2),o5(y))}function p3(y,E,Z){if(y.tag===3)cx(y,y,Z);else for(;E!==null;){if(E.tag===3){cx(E,y,Z);break}else if(E.tag===1){var _e=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof _e.componentDidCatch=="function"&&(j5===null||!j5.has(_e))){y=j3(Z,y),Z=p_(2),_e=D5(E,Z,2),_e!==null&&(m_(Z,_e,E,y),v2(_e,2),o5(_e));break}}E=E.return}}function U7(y,E,Z){var _e=y.pingCache;if(_e===null){_e=y.pingCache=new iE;var Os=new Set;_e.set(E,Os)}else Os=_e.get(E),Os===void 0&&(Os=new Set,_e.set(E,Os));Os.has(Z)||(L7=!0,Os.add(Z),y=lE.bind(null,y,E,Z),E.then(y,y))}function lE(y,E,Z){var _e=y.pingCache;_e!==null&&_e.delete(E),y.pingedLanes|=y.suspendedLanes&Z,y.warmLanes&=~Z,y3===y&&(X4&Z)===Z&&(O3===4||O3===3&&(X4&62914560)===X4&&300>p1()-O7?(s3&2)===0&&qv(y,0):N7|=Z,Ov===X4&&(Ov=0)),o5(y)}function hx(y,E){E===0&&(E=P2()),y=M5(y,E),y!==null&&(v2(y,E),o5(y))}function uE(y){var E=y.memoizedState,Z=0;E!==null&&(Z=E.retryLane),hx(y,Z)}function cE(y,E){var Z=0;switch(y.tag){case 13:var _e=y.stateNode,Os=y.memoizedState;Os!==null&&(Z=Os.retryLane);break;case 19:_e=y.stateNode;break;case 22:_e=y.stateNode._retryCache;break;default:throw Error(s(314))}_e!==null&&_e.delete(E),hx(y,Z)}function hE(y,E){return q1(y,E)}var f8=null,jv=null,H7=!1,p8=!1,G7=!1,fv=0;function o5(y){y!==jv&&y.next===null&&(jv===null?f8=jv=y:jv=jv.next=y),p8=!0,H7||(H7=!0,fE())}function by(y,E){if(!G7&&p8){G7=!0;do for(var Z=!1,_e=f8;_e!==null;){if(y!==0){var Os=_e.pendingLanes;if(Os===0)var th=0;else{var i1=_e.suspendedLanes,f1=_e.pingedLanes;th=(1<<31-C1(42|y)+1)-1,th&=Os&~(i1&~f1),th=th&201326741?th&201326741|1:th?th|2:0}th!==0&&(Z=!0,gx(_e,th))}else th=X4,th=Y1(_e,_e===y3?th:0,_e.cancelPendingCommit!==null||_e.timeoutHandle!==-1),(th&3)===0||l2(_e,th)||(Z=!0,gx(_e,th));_e=_e.next}while(Z);G7=!1}}function dE(){dx()}function dx(){p8=H7=!1;var y=0;fv!==0&&(xE()&&(y=fv),fv=0);for(var E=p1(),Z=null,_e=f8;_e!==null;){var Os=_e.next,th=fx(_e,E);th===0?(_e.next=null,Z===null?f8=Os:Z.next=Os,Os===null&&(jv=Z)):(Z=_e,(y!==0||(th&3)!==0)&&(p8=!0)),_e=Os}by(y)}function fx(y,E){for(var Z=y.suspendedLanes,_e=y.pingedLanes,Os=y.expirationTimes,th=y.pendingLanes&-62914561;0<th;){var i1=31-C1(th),f1=1<<i1,I1=Os[i1];I1===-1?((f1&Z)===0||(f1&_e)!==0)&&(Os[i1]=Q1(f1,E)):I1<=E&&(y.expiredLanes|=f1),th&=~f1}if(E=y3,Z=X4,Z=Y1(y,y===E?Z:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),_e=y.callbackNode,Z===0||y===E&&(o3===2||o3===9)||y.cancelPendingCommit!==null)return _e!==null&&_e!==null&&U1(_e),y.callbackNode=null,y.callbackPriority=0;if((Z&3)===0||l2(y,Z)){if(E=Z&-Z,E===y.callbackPriority)return E;switch(_e!==null&&U1(_e),X2(Z)){case 2:case 8:Z=_1;break;case 32:Z=B1;break;case 268435456:Z=H1;break;default:Z=B1}return _e=mx.bind(null,y),Z=q1(Z,_e),y.callbackPriority=E,y.callbackNode=Z,E}return _e!==null&&_e!==null&&U1(_e),y.callbackPriority=2,y.callbackNode=null,2}function mx(y,E){if(u6!==0&&u6!==5)return y.callbackNode=null,y.callbackPriority=0,null;var Z=y.callbackNode;if(d8()&&y.callbackNode!==Z)return null;var _e=X4;return _e=Y1(y,y===y3?_e:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),_e===0?null:(Y_(y,_e,E),fx(y,p1()),y.callbackNode!=null&&y.callbackNode===Z?mx.bind(null,y):null)}function gx(y,E){if(d8())return null;Y_(y,E,!0)}function fE(){EE(function(){(s3&6)!==0?q1(D1,dE):dx()})}function K7(){return fv===0&&(fv=G1()),fv}function vx(y){return y==null||typeof y=="symbol"||typeof y=="boolean"?null:typeof y=="function"?y:K2(""+y)}function yx(y,E){var Z=E.ownerDocument.createElement("input");return Z.name=E.name,Z.value=E.value,y.id&&Z.setAttribute("form",y.id),E.parentNode.insertBefore(Z,E),y=new FormData(y),Z.parentNode.removeChild(Z),y}function pE(y,E,Z,_e,Os){if(E==="submit"&&Z&&Z.stateNode===Os){var th=vx((Os[y2]||null).action),i1=_e.submitter;i1&&(E=(E=i1[y2]||null)?vx(E.formAction):i1.getAttribute("formAction"),E!==null&&(th=E,i1=null));var f1=new E3("action","action",null,_e,Os);y.push({event:f1,listeners:[{instance:null,listener:function(){if(_e.defaultPrevented){if(fv!==0){var I1=i1?yx(Os,i1):new FormData(Os);f7(Z,{pending:!0,data:I1,method:Os.method,action:th},null,I1)}}else typeof th=="function"&&(f1.preventDefault(),I1=i1?yx(Os,i1):new FormData(Os),f7(Z,{pending:!0,data:I1,method:Os.method,action:th},th,I1))},currentTarget:Os}]})}}for(var W7=0;W7<t5.length;W7++){var X7=t5[W7],mE=X7.toLowerCase(),gE=X7[0].toUpperCase()+X7.slice(1);N3(mE,"on"+gE)}N3(M6,"onAnimationEnd"),N3(g6,"onAnimationIteration"),N3(a3,"onAnimationStart"),N3("dblclick","onDoubleClick"),N3("focusin","onFocus"),N3("focusout","onBlur"),N3(z3,"onTransitionRun"),N3(T3,"onTransitionStart"),N3(k6,"onTransitionCancel"),N3(B6,"onTransitionEnd"),S2("onMouseEnter",["mouseout","mouseover"]),S2("onMouseLeave",["mouseout","mouseover"]),S2("onPointerEnter",["pointerout","pointerover"]),S2("onPointerLeave",["pointerout","pointerover"]),a2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a2("onBeforeInput",["compositionend","keypress","textInput","paste"]),a2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _y="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_y));function bx(y,E){E=(E&4)!==0;for(var Z=0;Z<y.length;Z++){var _e=y[Z],Os=_e.event;_e=_e.listeners;e:{var th=void 0;if(E)for(var i1=_e.length-1;0<=i1;i1--){var f1=_e[i1],I1=f1.instance,o2=f1.currentTarget;if(f1=f1.listener,I1!==th&&Os.isPropagationStopped())break e;th=f1,Os.currentTarget=o2;try{th(Os)}catch(k2){t8(k2)}Os.currentTarget=null,th=I1}else for(i1=0;i1<_e.length;i1++){if(f1=_e[i1],I1=f1.instance,o2=f1.currentTarget,f1=f1.listener,I1!==th&&Os.isPropagationStopped())break e;th=f1,Os.currentTarget=o2;try{th(Os)}catch(k2){t8(k2)}Os.currentTarget=null,th=I1}}}}function j4(y,E){var Z=E[T2];Z===void 0&&(Z=E[T2]=new Set);var _e=y+"__bubble";Z.has(_e)||(_x(E,y,2,!1),Z.add(_e))}function Y7(y,E,Z){var _e=0;E&&(_e|=4),_x(Z,y,_e,E)}var m8="_reactListening"+Math.random().toString(36).slice(2);function Q7(y){if(!y[m8]){y[m8]=!0,L1.forEach(function(Z){Z!=="selectionchange"&&(vE.has(Z)||Y7(Z,!1,y),Y7(Z,!0,y))});var E=y.nodeType===9?y:y.ownerDocument;E===null||E[m8]||(E[m8]=!0,Y7("selectionchange",!1,E))}}function _x(y,E,Z,_e){switch(Ux(E)){case 2:var Os=UE;break;case 8:Os=HE;break;default:Os=h9}Z=Os.bind(null,E,Z,y),Os=void 0,!s4||E!=="touchstart"&&E!=="touchmove"&&E!=="wheel"||(Os=!0),_e?Os!==void 0?y.addEventListener(E,Z,{capture:!0,passive:Os}):y.addEventListener(E,Z,!0):Os!==void 0?y.addEventListener(E,Z,{passive:Os}):y.addEventListener(E,Z,!1)}function Z7(y,E,Z,_e,Os){var th=_e;if((E&1)===0&&(E&2)===0&&_e!==null)e:for(;;){if(_e===null)return;var i1=_e.tag;if(i1===3||i1===4){var f1=_e.stateNode.containerInfo;if(f1===Os)break;if(i1===4)for(i1=_e.return;i1!==null;){var I1=i1.tag;if((I1===3||I1===4)&&i1.stateNode.containerInfo===Os)return;i1=i1.return}for(;f1!==null;){if(i1=d1(f1),i1===null)return;if(I1=i1.tag,I1===5||I1===6||I1===26||I1===27){_e=th=i1;continue e}f1=f1.parentNode}}_e=_e.return}T4(function(){var o2=th,k2=V2(Z),O2=[];e:{var d2=c5.get(y);if(d2!==void 0){var p2=E3,S4=y;switch(y){case"keypress":if(N4(Z)===0)break e;case"keydown":case"keyup":p2=E6;break;case"focusin":S4="focus",p2=b6;break;case"focusout":S4="blur",p2=b6;break;case"beforeblur":case"afterblur":p2=b6;break;case"click":if(Z.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p2=D3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p2=X6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p2=vv;break;case M6:case g6:case a3:p2=p6;break;case B6:p2=bv;break;case"scroll":case"scrollend":p2=e6;break;case"wheel":p2=C5;break;case"copy":case"cut":case"paste":p2=k3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p2=J5;break;case"toggle":case"beforetoggle":p2=xv}var _4=(E&4)!==0,c3=!_4&&(y==="scroll"||y==="scrollend"),K1=_4?d2!==null?d2+"Capture":null:d2;_4=[];for(var j1=o2,r2;j1!==null;){var D2=j1;if(r2=D2.stateNode,D2=D2.tag,D2!==5&&D2!==26&&D2!==27||r2===null||K1===null||(D2=D4(j1,K1),D2!=null&&_4.push(xy(j1,D2,r2))),c3)break;j1=j1.return}0<_4.length&&(d2=new p2(d2,S4,null,Z,k2),O2.push({event:d2,listeners:_4}))}}if((E&7)===0){e:{if(d2=y==="mouseover"||y==="pointerover",p2=y==="mouseout"||y==="pointerout",d2&&Z!==R2&&(S4=Z.relatedTarget||Z.fromElement)&&(d1(S4)||S4[Z1]))break e;if((p2||d2)&&(d2=k2.window===k2?k2:(d2=k2.ownerDocument)?d2.defaultView||d2.parentWindow:window,p2?(S4=Z.relatedTarget||Z.toElement,p2=o2,S4=S4?d1(S4):null,S4!==null&&(c3=l(S4),_4=S4.tag,S4!==c3||_4!==5&&_4!==27&&_4!==6)&&(S4=null)):(p2=null,S4=o2),p2!==S4)){if(_4=D3,D2="onMouseLeave",K1="onMouseEnter",j1="mouse",(y==="pointerout"||y==="pointerover")&&(_4=J5,D2="onPointerLeave",K1="onPointerEnter",j1="pointer"),c3=p2==null?d2:g1(p2),r2=S4==null?d2:g1(S4),d2=new _4(D2,j1+"leave",p2,Z,k2),d2.target=c3,d2.relatedTarget=r2,D2=null,d1(k2)===o2&&(_4=new _4(K1,j1+"enter",S4,Z,k2),_4.target=r2,_4.relatedTarget=c3,D2=_4),c3=D2,p2&&S4)t:{for(_4=p2,K1=S4,j1=0,r2=_4;r2;r2=$v(r2))j1++;for(r2=0,D2=K1;D2;D2=$v(D2))r2++;for(;0<j1-r2;)_4=$v(_4),j1--;for(;0<r2-j1;)K1=$v(K1),r2--;for(;j1--;){if(_4===K1||K1!==null&&_4===K1.alternate)break t;_4=$v(_4),K1=$v(K1)}_4=null}else _4=null;p2!==null&&xx(O2,d2,p2,_4,!1),S4!==null&&c3!==null&&xx(O2,c3,S4,_4,!0)}}e:{if(d2=o2?g1(o2):window,p2=d2.nodeName&&d2.nodeName.toLowerCase(),p2==="select"||p2==="input"&&d2.type==="file")var i4=P1;else if(V3(d2))if($1)i4=c4;else{i4=u4;var O4=w2}else p2=d2.nodeName,!p2||p2.toLowerCase()!=="input"||d2.type!=="checkbox"&&d2.type!=="radio"?o2&&u2(o2.elementType)&&(i4=P1):i4=a4;if(i4&&(i4=i4(y,o2))){m6(O2,i4,Z,k2);break e}O4&&O4(y,d2,o2),y==="focusout"&&o2&&d2.type==="number"&&o2.memoizedProps.value!=null&&ae(d2,"number",d2.value)}switch(O4=o2?g1(o2):window,y){case"focusin":(V3(O4)||O4.contentEditable==="true")&&(q4=O4,Y4=o2,e3=null);break;case"focusout":e3=Y4=q4=null;break;case"mousedown":A3=!0;break;case"contextmenu":case"mouseup":case"dragend":A3=!1,x3(O2,Z,k2);break;case"selectionchange":if(i3)break;case"keydown":case"keyup":x3(O2,Z,k2)}var o4;if(O6)e:{switch(y){case"compositionstart":var E4="onCompositionStart";break e;case"compositionend":E4="onCompositionEnd";break e;case"compositionupdate":E4="onCompositionUpdate";break e}E4=void 0}else $4?E2(y,Z)&&(E4="onCompositionEnd"):y==="keydown"&&Z.keyCode===229&&(E4="onCompositionStart");E4&&(t1&&Z.locale!=="ko"&&($4||E4!=="onCompositionStart"?E4==="onCompositionEnd"&&$4&&(o4=B4()):(h3=k2,r3="value"in h3?h3.value:h3.textContent,$4=!0)),O4=g8(o2,E4),0<O4.length&&(E4=new d3(E4,y,null,Z,k2),O2.push({event:E4,listeners:O4}),o4?E4.data=o4:(o4=W2(Z),o4!==null&&(E4.data=o4)))),(o4=hf?B3(y,Z):U4(y,Z))&&(E4=g8(o2,"onBeforeInput"),0<E4.length&&(O4=new d3("onBeforeInput","beforeinput",null,Z,k2),O2.push({event:O4,listeners:E4}),O4.data=o4)),pE(O2,y,o2,Z,k2)}bx(O2,E)})}function xy(y,E,Z){return{instance:y,listener:E,currentTarget:Z}}function g8(y,E){for(var Z=E+"Capture",_e=[];y!==null;){var Os=y,th=Os.stateNode;if(Os=Os.tag,Os!==5&&Os!==26&&Os!==27||th===null||(Os=D4(y,Z),Os!=null&&_e.unshift(xy(y,Os,th)),Os=D4(y,E),Os!=null&&_e.push(xy(y,Os,th))),y.tag===3)return _e;y=y.return}return[]}function $v(y){if(y===null)return null;do y=y.return;while(y&&y.tag!==5&&y.tag!==27);return y||null}function xx(y,E,Z,_e,Os){for(var th=E._reactName,i1=[];Z!==null&&Z!==_e;){var f1=Z,I1=f1.alternate,o2=f1.stateNode;if(f1=f1.tag,I1!==null&&I1===_e)break;f1!==5&&f1!==26&&f1!==27||o2===null||(I1=o2,Os?(o2=D4(Z,th),o2!=null&&i1.unshift(xy(Z,o2,I1))):Os||(o2=D4(Z,th),o2!=null&&i1.push(xy(Z,o2,I1)))),Z=Z.return}i1.length!==0&&y.push({event:E,listeners:i1})}var yE=/\r\n?/g,bE=/\u0000|\uFFFD/g;function wx(y){return(typeof y=="string"?y:""+y).replace(yE,`
`).replace(bE,"")}function Ex(y,E){return E=wx(E),wx(y)===E}function v8(){}function u3(y,E,Z,_e,Os,th){switch(Z){case"children":typeof _e=="string"?E==="body"||E==="textarea"&&_e===""||n1(y,_e):(typeof _e=="number"||typeof _e=="bigint")&&E!=="body"&&n1(y,""+_e);break;case"className":A4(y,"class",_e);break;case"tabIndex":A4(y,"tabindex",_e);break;case"dir":case"role":case"viewBox":case"width":case"height":A4(y,Z,_e);break;case"style":A1(y,_e,th);break;case"data":if(E!=="object"){A4(y,"data",_e);break}case"src":case"href":if(_e===""&&(E!=="a"||Z!=="href")){y.removeAttribute(Z);break}if(_e==null||typeof _e=="function"||typeof _e=="symbol"||typeof _e=="boolean"){y.removeAttribute(Z);break}_e=K2(""+_e),y.setAttribute(Z,_e);break;case"action":case"formAction":if(typeof _e=="function"){y.setAttribute(Z,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof th=="function"&&(Z==="formAction"?(E!=="input"&&u3(y,E,"name",Os.name,Os,null),u3(y,E,"formEncType",Os.formEncType,Os,null),u3(y,E,"formMethod",Os.formMethod,Os,null),u3(y,E,"formTarget",Os.formTarget,Os,null)):(u3(y,E,"encType",Os.encType,Os,null),u3(y,E,"method",Os.method,Os,null),u3(y,E,"target",Os.target,Os,null)));if(_e==null||typeof _e=="symbol"||typeof _e=="boolean"){y.removeAttribute(Z);break}_e=K2(""+_e),y.setAttribute(Z,_e);break;case"onClick":_e!=null&&(y.onclick=v8);break;case"onScroll":_e!=null&&j4("scroll",y);break;case"onScrollEnd":_e!=null&&j4("scrollend",y);break;case"dangerouslySetInnerHTML":if(_e!=null){if(typeof _e!="object"||!("__html"in _e))throw Error(s(61));if(Z=_e.__html,Z!=null){if(Os.children!=null)throw Error(s(60));y.innerHTML=Z}}break;case"multiple":y.multiple=_e&&typeof _e!="function"&&typeof _e!="symbol";break;case"muted":y.muted=_e&&typeof _e!="function"&&typeof _e!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_e==null||typeof _e=="function"||typeof _e=="boolean"||typeof _e=="symbol"){y.removeAttribute("xlink:href");break}Z=K2(""+_e),y.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Z);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_e!=null&&typeof _e!="function"&&typeof _e!="symbol"?y.setAttribute(Z,""+_e):y.removeAttribute(Z);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_e&&typeof _e!="function"&&typeof _e!="symbol"?y.setAttribute(Z,""):y.removeAttribute(Z);break;case"capture":case"download":_e===!0?y.setAttribute(Z,""):_e!==!1&&_e!=null&&typeof _e!="function"&&typeof _e!="symbol"?y.setAttribute(Z,_e):y.removeAttribute(Z);break;case"cols":case"rows":case"size":case"span":_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&!isNaN(_e)&&1<=_e?y.setAttribute(Z,_e):y.removeAttribute(Z);break;case"rowSpan":case"start":_e==null||typeof _e=="function"||typeof _e=="symbol"||isNaN(_e)?y.removeAttribute(Z):y.setAttribute(Z,_e);break;case"popover":j4("beforetoggle",y),j4("toggle",y),P4(y,"popover",_e);break;case"xlinkActuate":Y2(y,"http://www.w3.org/1999/xlink","xlink:actuate",_e);break;case"xlinkArcrole":Y2(y,"http://www.w3.org/1999/xlink","xlink:arcrole",_e);break;case"xlinkRole":Y2(y,"http://www.w3.org/1999/xlink","xlink:role",_e);break;case"xlinkShow":Y2(y,"http://www.w3.org/1999/xlink","xlink:show",_e);break;case"xlinkTitle":Y2(y,"http://www.w3.org/1999/xlink","xlink:title",_e);break;case"xlinkType":Y2(y,"http://www.w3.org/1999/xlink","xlink:type",_e);break;case"xmlBase":Y2(y,"http://www.w3.org/XML/1998/namespace","xml:base",_e);break;case"xmlLang":Y2(y,"http://www.w3.org/XML/1998/namespace","xml:lang",_e);break;case"xmlSpace":Y2(y,"http://www.w3.org/XML/1998/namespace","xml:space",_e);break;case"is":P4(y,"is",_e);break;case"innerText":case"textContent":break;default:(!(2<Z.length)||Z[0]!=="o"&&Z[0]!=="O"||Z[1]!=="n"&&Z[1]!=="N")&&(Z=s2.get(Z)||Z,P4(y,Z,_e))}}function J7(y,E,Z,_e,Os,th){switch(Z){case"style":A1(y,_e,th);break;case"dangerouslySetInnerHTML":if(_e!=null){if(typeof _e!="object"||!("__html"in _e))throw Error(s(61));if(Z=_e.__html,Z!=null){if(Os.children!=null)throw Error(s(60));y.innerHTML=Z}}break;case"children":typeof _e=="string"?n1(y,_e):(typeof _e=="number"||typeof _e=="bigint")&&n1(y,""+_e);break;case"onScroll":_e!=null&&j4("scroll",y);break;case"onScrollEnd":_e!=null&&j4("scrollend",y);break;case"onClick":_e!=null&&(y.onclick=v8);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!O1.hasOwnProperty(Z))e:{if(Z[0]==="o"&&Z[1]==="n"&&(Os=Z.endsWith("Capture"),E=Z.slice(2,Os?Z.length-7:void 0),th=y[y2]||null,th=th!=null?th[Z]:null,typeof th=="function"&&y.removeEventListener(E,th,Os),typeof _e=="function")){typeof th!="function"&&th!==null&&(Z in y?y[Z]=null:y.hasAttribute(Z)&&y.removeAttribute(Z)),y.addEventListener(E,_e,Os);break e}Z in y?y[Z]=_e:_e===!0?y.setAttribute(Z,""):P4(y,Z,_e)}}}function c6(y,E,Z){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":j4("error",y),j4("load",y);var _e=!1,Os=!1,th;for(th in Z)if(Z.hasOwnProperty(th)){var i1=Z[th];if(i1!=null)switch(th){case"src":_e=!0;break;case"srcSet":Os=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,E));default:u3(y,E,th,i1,Z,null)}}Os&&u3(y,E,"srcSet",Z.srcSet,Z,null),_e&&u3(y,E,"src",Z.src,Z,null);return;case"input":j4("invalid",y);var f1=th=i1=Os=null,I1=null,o2=null;for(_e in Z)if(Z.hasOwnProperty(_e)){var k2=Z[_e];if(k2!=null)switch(_e){case"name":Os=k2;break;case"type":i1=k2;break;case"checked":I1=k2;break;case"defaultChecked":o2=k2;break;case"value":th=k2;break;case"defaultValue":f1=k2;break;case"children":case"dangerouslySetInnerHTML":if(k2!=null)throw Error(s(137,E));break;default:u3(y,E,_e,k2,Z,null)}}m4(y,th,f1,I1,o2,i1,Os,!1),I4(y);return;case"select":j4("invalid",y),_e=i1=th=null;for(Os in Z)if(Z.hasOwnProperty(Os)&&(f1=Z[Os],f1!=null))switch(Os){case"value":th=f1;break;case"defaultValue":i1=f1;break;case"multiple":_e=f1;default:u3(y,E,Os,f1,Z,null)}E=th,Z=i1,y.multiple=!!_e,E!=null?To(y,!!_e,E,!1):Z!=null&&To(y,!!_e,Z,!0);return;case"textarea":j4("invalid",y),th=Os=_e=null;for(i1 in Z)if(Z.hasOwnProperty(i1)&&(f1=Z[i1],f1!=null))switch(i1){case"value":_e=f1;break;case"defaultValue":Os=f1;break;case"children":th=f1;break;case"dangerouslySetInnerHTML":if(f1!=null)throw Error(s(91));break;default:u3(y,E,i1,f1,Z,null)}ff(y,_e,Os,th),I4(y);return;case"option":for(I1 in Z)if(Z.hasOwnProperty(I1)&&(_e=Z[I1],_e!=null))switch(I1){case"selected":y.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:u3(y,E,I1,_e,Z,null)}return;case"dialog":j4("beforetoggle",y),j4("toggle",y),j4("cancel",y),j4("close",y);break;case"iframe":case"object":j4("load",y);break;case"video":case"audio":for(_e=0;_e<_y.length;_e++)j4(_y[_e],y);break;case"image":j4("error",y),j4("load",y);break;case"details":j4("toggle",y);break;case"embed":case"source":case"link":j4("error",y),j4("load",y);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(o2 in Z)if(Z.hasOwnProperty(o2)&&(_e=Z[o2],_e!=null))switch(o2){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,E));default:u3(y,E,o2,_e,Z,null)}return;default:if(u2(E)){for(k2 in Z)Z.hasOwnProperty(k2)&&(_e=Z[k2],_e!==void 0&&J7(y,E,k2,_e,Z,void 0));return}}for(f1 in Z)Z.hasOwnProperty(f1)&&(_e=Z[f1],_e!=null&&u3(y,E,f1,_e,Z,null))}function _E(y,E,Z,_e){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Os=null,th=null,i1=null,f1=null,I1=null,o2=null,k2=null;for(p2 in Z){var O2=Z[p2];if(Z.hasOwnProperty(p2)&&O2!=null)switch(p2){case"checked":break;case"value":break;case"defaultValue":I1=O2;default:_e.hasOwnProperty(p2)||u3(y,E,p2,null,_e,O2)}}for(var d2 in _e){var p2=_e[d2];if(O2=Z[d2],_e.hasOwnProperty(d2)&&(p2!=null||O2!=null))switch(d2){case"type":th=p2;break;case"name":Os=p2;break;case"checked":o2=p2;break;case"defaultChecked":k2=p2;break;case"value":i1=p2;break;case"defaultValue":f1=p2;break;case"children":case"dangerouslySetInnerHTML":if(p2!=null)throw Error(s(137,E));break;default:p2!==O2&&u3(y,E,d2,p2,_e,O2)}}W3(y,i1,f1,I1,o2,k2,th,Os);return;case"select":p2=i1=f1=d2=null;for(th in Z)if(I1=Z[th],Z.hasOwnProperty(th)&&I1!=null)switch(th){case"value":break;case"multiple":p2=I1;default:_e.hasOwnProperty(th)||u3(y,E,th,null,_e,I1)}for(Os in _e)if(th=_e[Os],I1=Z[Os],_e.hasOwnProperty(Os)&&(th!=null||I1!=null))switch(Os){case"value":d2=th;break;case"defaultValue":f1=th;break;case"multiple":i1=th;default:th!==I1&&u3(y,E,Os,th,_e,I1)}E=f1,Z=i1,_e=p2,d2!=null?To(y,!!Z,d2,!1):!!_e!=!!Z&&(E!=null?To(y,!!Z,E,!0):To(y,!!Z,Z?[]:"",!1));return;case"textarea":p2=d2=null;for(f1 in Z)if(Os=Z[f1],Z.hasOwnProperty(f1)&&Os!=null&&!_e.hasOwnProperty(f1))switch(f1){case"value":break;case"children":break;default:u3(y,E,f1,null,_e,Os)}for(i1 in _e)if(Os=_e[i1],th=Z[i1],_e.hasOwnProperty(i1)&&(Os!=null||th!=null))switch(i1){case"value":d2=Os;break;case"defaultValue":p2=Os;break;case"children":break;case"dangerouslySetInnerHTML":if(Os!=null)throw Error(s(91));break;default:Os!==th&&u3(y,E,i1,Os,_e,th)}wh(y,d2,p2);return;case"option":for(var S4 in Z)if(d2=Z[S4],Z.hasOwnProperty(S4)&&d2!=null&&!_e.hasOwnProperty(S4))switch(S4){case"selected":y.selected=!1;break;default:u3(y,E,S4,null,_e,d2)}for(I1 in _e)if(d2=_e[I1],p2=Z[I1],_e.hasOwnProperty(I1)&&d2!==p2&&(d2!=null||p2!=null))switch(I1){case"selected":y.selected=d2&&typeof d2!="function"&&typeof d2!="symbol";break;default:u3(y,E,I1,d2,_e,p2)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _4 in Z)d2=Z[_4],Z.hasOwnProperty(_4)&&d2!=null&&!_e.hasOwnProperty(_4)&&u3(y,E,_4,null,_e,d2);for(o2 in _e)if(d2=_e[o2],p2=Z[o2],_e.hasOwnProperty(o2)&&d2!==p2&&(d2!=null||p2!=null))switch(o2){case"children":case"dangerouslySetInnerHTML":if(d2!=null)throw Error(s(137,E));break;default:u3(y,E,o2,d2,_e,p2)}return;default:if(u2(E)){for(var c3 in Z)d2=Z[c3],Z.hasOwnProperty(c3)&&d2!==void 0&&!_e.hasOwnProperty(c3)&&J7(y,E,c3,void 0,_e,d2);for(k2 in _e)d2=_e[k2],p2=Z[k2],!_e.hasOwnProperty(k2)||d2===p2||d2===void 0&&p2===void 0||J7(y,E,k2,d2,_e,p2);return}}for(var K1 in Z)d2=Z[K1],Z.hasOwnProperty(K1)&&d2!=null&&!_e.hasOwnProperty(K1)&&u3(y,E,K1,null,_e,d2);for(O2 in _e)d2=_e[O2],p2=Z[O2],!_e.hasOwnProperty(O2)||d2===p2||d2==null&&p2==null||u3(y,E,O2,d2,_e,p2)}var e9=null,t9=null;function y8(y){return y.nodeType===9?y:y.ownerDocument}function Sx(y){switch(y){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ax(y,E){if(y===0)switch(E){case"svg":return 1;case"math":return 2;default:return 0}return y===1&&E==="foreignObject"?0:y}function r9(y,E){return y==="textarea"||y==="noscript"||typeof E.children=="string"||typeof E.children=="number"||typeof E.children=="bigint"||typeof E.dangerouslySetInnerHTML=="object"&&E.dangerouslySetInnerHTML!==null&&E.dangerouslySetInnerHTML.__html!=null}var i9=null;function xE(){var y=window.event;return y&&y.type==="popstate"?y===i9?!1:(i9=y,!0):(i9=null,!1)}var Tx=typeof setTimeout=="function"?setTimeout:void 0,wE=typeof clearTimeout=="function"?clearTimeout:void 0,Cx=typeof Promise=="function"?Promise:void 0,EE=typeof queueMicrotask=="function"?queueMicrotask:typeof Cx<"u"?function(y){return Cx.resolve(null).then(y).catch(SE)}:Tx;function SE(y){setTimeout(function(){throw y})}function H5(y){return y==="head"}function Rx(y,E){var Z=E,_e=0,Os=0;do{var th=Z.nextSibling;if(y.removeChild(Z),th&&th.nodeType===8)if(Z=th.data,Z==="/$"){if(0<_e&&8>_e){Z=_e;var i1=y.ownerDocument;if(Z&1&&wy(i1.documentElement),Z&2&&wy(i1.body),Z&4)for(Z=i1.head,wy(Z),i1=Z.firstChild;i1;){var f1=i1.nextSibling,I1=i1.nodeName;i1[gf]||I1==="SCRIPT"||I1==="STYLE"||I1==="LINK"&&i1.rel.toLowerCase()==="stylesheet"||Z.removeChild(i1),i1=f1}}if(Os===0){y.removeChild(th),ky(E);return}Os--}else Z==="$"||Z==="$?"||Z==="$!"?Os++:_e=Z.charCodeAt(0)-48;else _e=0;Z=th}while(Z);ky(E)}function n9(y){var E=y.firstChild;for(E&&E.nodeType===10&&(E=E.nextSibling);E;){var Z=E;switch(E=E.nextSibling,Z.nodeName){case"HTML":case"HEAD":case"BODY":n9(Z),Ym(Z);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(Z.rel.toLowerCase()==="stylesheet")continue}y.removeChild(Z)}}function AE(y,E,Z,_e){for(;y.nodeType===1;){var Os=Z;if(y.nodeName.toLowerCase()!==E.toLowerCase()){if(!_e&&(y.nodeName!=="INPUT"||y.type!=="hidden"))break}else if(_e){if(!y[gf])switch(E){case"meta":if(!y.hasAttribute("itemprop"))break;return y;case"link":if(th=y.getAttribute("rel"),th==="stylesheet"&&y.hasAttribute("data-precedence"))break;if(th!==Os.rel||y.getAttribute("href")!==(Os.href==null||Os.href===""?null:Os.href)||y.getAttribute("crossorigin")!==(Os.crossOrigin==null?null:Os.crossOrigin)||y.getAttribute("title")!==(Os.title==null?null:Os.title))break;return y;case"style":if(y.hasAttribute("data-precedence"))break;return y;case"script":if(th=y.getAttribute("src"),(th!==(Os.src==null?null:Os.src)||y.getAttribute("type")!==(Os.type==null?null:Os.type)||y.getAttribute("crossorigin")!==(Os.crossOrigin==null?null:Os.crossOrigin))&&th&&y.hasAttribute("async")&&!y.hasAttribute("itemprop"))break;return y;default:return y}}else if(E==="input"&&y.type==="hidden"){var th=Os.name==null?null:""+Os.name;if(Os.type==="hidden"&&y.getAttribute("name")===th)return y}else return y;if(y=Z6(y.nextSibling),y===null)break}return null}function TE(y,E,Z){if(E==="")return null;for(;y.nodeType!==3;)if((y.nodeType!==1||y.nodeName!=="INPUT"||y.type!=="hidden")&&!Z||(y=Z6(y.nextSibling),y===null))return null;return y}function a9(y){return y.data==="$!"||y.data==="$?"&&y.ownerDocument.readyState==="complete"}function CE(y,E){var Z=y.ownerDocument;if(y.data!=="$?"||Z.readyState==="complete")E();else{var _e=function(){E(),Z.removeEventListener("DOMContentLoaded",_e)};Z.addEventListener("DOMContentLoaded",_e),y._reactRetry=_e}}function Z6(y){for(;y!=null;y=y.nextSibling){var E=y.nodeType;if(E===1||E===3)break;if(E===8){if(E=y.data,E==="$"||E==="$!"||E==="$?"||E==="F!"||E==="F")break;if(E==="/$")return null}}return y}var s9=null;function Mx(y){y=y.previousSibling;for(var E=0;y;){if(y.nodeType===8){var Z=y.data;if(Z==="$"||Z==="$!"||Z==="$?"){if(E===0)return y;E--}else Z==="/$"&&E++}y=y.previousSibling}return null}function kx(y,E,Z){switch(E=y8(Z),y){case"html":if(y=E.documentElement,!y)throw Error(s(452));return y;case"head":if(y=E.head,!y)throw Error(s(453));return y;case"body":if(y=E.body,!y)throw Error(s(454));return y;default:throw Error(s(451))}}function wy(y){for(var E=y.attributes;E.length;)y.removeAttributeNode(E[0]);Ym(y)}var G6=new Map,Px=new Set;function b8(y){return typeof y.getRootNode=="function"?y.getRootNode():y.nodeType===9?y:y.ownerDocument}var E5=_h.d;_h.d={f:RE,r:ME,D:kE,C:PE,L:IE,m:DE,X:NE,S:LE,M:FE};function RE(){var y=E5.f(),E=c8();return y||E}function ME(y){var E=r1(y);E!==null&&E.tag===5&&E.type==="form"?Yb(E):E5.r(y)}var Uv=typeof document>"u"?null:document;function Ix(y,E,Z){var _e=Uv;if(_e&&typeof E=="string"&&E){var Os=b3(E);Os='link[rel="'+y+'"][href="'+Os+'"]',typeof Z=="string"&&(Os+='[crossorigin="'+Z+'"]'),Px.has(Os)||(Px.add(Os),y={rel:y,crossOrigin:Z,href:E},_e.querySelector(Os)===null&&(E=_e.createElement("link"),c6(E,"link",y),M1(E),_e.head.appendChild(E)))}}function kE(y){E5.D(y),Ix("dns-prefetch",y,null)}function PE(y,E){E5.C(y,E),Ix("preconnect",y,E)}function IE(y,E,Z){E5.L(y,E,Z);var _e=Uv;if(_e&&y&&E){var Os='link[rel="preload"][as="'+b3(E)+'"]';E==="image"&&Z&&Z.imageSrcSet?(Os+='[imagesrcset="'+b3(Z.imageSrcSet)+'"]',typeof Z.imageSizes=="string"&&(Os+='[imagesizes="'+b3(Z.imageSizes)+'"]')):Os+='[href="'+b3(y)+'"]';var th=Os;switch(E){case"style":th=Hv(y);break;case"script":th=Gv(y)}G6.has(th)||(y=g({rel:"preload",href:E==="image"&&Z&&Z.imageSrcSet?void 0:y,as:E},Z),G6.set(th,y),_e.querySelector(Os)!==null||E==="style"&&_e.querySelector(Ey(th))||E==="script"&&_e.querySelector(Sy(th))||(E=_e.createElement("link"),c6(E,"link",y),M1(E),_e.head.appendChild(E)))}}function DE(y,E){E5.m(y,E);var Z=Uv;if(Z&&y){var _e=E&&typeof E.as=="string"?E.as:"script",Os='link[rel="modulepreload"][as="'+b3(_e)+'"][href="'+b3(y)+'"]',th=Os;switch(_e){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":th=Gv(y)}if(!G6.has(th)&&(y=g({rel:"modulepreload",href:y},E),G6.set(th,y),Z.querySelector(Os)===null)){switch(_e){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(Z.querySelector(Sy(th)))return}_e=Z.createElement("link"),c6(_e,"link",y),M1(_e),Z.head.appendChild(_e)}}}function LE(y,E,Z){E5.S(y,E,Z);var _e=Uv;if(_e&&y){var Os=R1(_e).hoistableStyles,th=Hv(y);E=E||"default";var i1=Os.get(th);if(!i1){var f1={loading:0,preload:null};if(i1=_e.querySelector(Ey(th)))f1.loading=5;else{y=g({rel:"stylesheet",href:y,"data-precedence":E},Z),(Z=G6.get(th))&&o9(y,Z);var I1=i1=_e.createElement("link");M1(I1),c6(I1,"link",y),I1._p=new Promise(function(o2,k2){I1.onload=o2,I1.onerror=k2}),I1.addEventListener("load",function(){f1.loading|=1}),I1.addEventListener("error",function(){f1.loading|=2}),f1.loading|=4,_8(i1,E,_e)}i1={type:"stylesheet",instance:i1,count:1,state:f1},Os.set(th,i1)}}}function NE(y,E){E5.X(y,E);var Z=Uv;if(Z&&y){var _e=R1(Z).hoistableScripts,Os=Gv(y),th=_e.get(Os);th||(th=Z.querySelector(Sy(Os)),th||(y=g({src:y,async:!0},E),(E=G6.get(Os))&&l9(y,E),th=Z.createElement("script"),M1(th),c6(th,"link",y),Z.head.appendChild(th)),th={type:"script",instance:th,count:1,state:null},_e.set(Os,th))}}function FE(y,E){E5.M(y,E);var Z=Uv;if(Z&&y){var _e=R1(Z).hoistableScripts,Os=Gv(y),th=_e.get(Os);th||(th=Z.querySelector(Sy(Os)),th||(y=g({src:y,async:!0,type:"module"},E),(E=G6.get(Os))&&l9(y,E),th=Z.createElement("script"),M1(th),c6(th,"link",y),Z.head.appendChild(th)),th={type:"script",instance:th,count:1,state:null},_e.set(Os,th))}}function Dx(y,E,Z,_e){var Os=(Os=z1.current)?b8(Os):null;if(!Os)throw Error(s(446));switch(y){case"meta":case"title":return null;case"style":return typeof Z.precedence=="string"&&typeof Z.href=="string"?(E=Hv(Z.href),Z=R1(Os).hoistableStyles,_e=Z.get(E),_e||(_e={type:"style",instance:null,count:0,state:null},Z.set(E,_e)),_e):{type:"void",instance:null,count:0,state:null};case"link":if(Z.rel==="stylesheet"&&typeof Z.href=="string"&&typeof Z.precedence=="string"){y=Hv(Z.href);var th=R1(Os).hoistableStyles,i1=th.get(y);if(i1||(Os=Os.ownerDocument||Os,i1={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},th.set(y,i1),(th=Os.querySelector(Ey(y)))&&!th._p&&(i1.instance=th,i1.state.loading=5),G6.has(y)||(Z={rel:"preload",as:"style",href:Z.href,crossOrigin:Z.crossOrigin,integrity:Z.integrity,media:Z.media,hrefLang:Z.hrefLang,referrerPolicy:Z.referrerPolicy},G6.set(y,Z),th||OE(Os,y,Z,i1.state))),E&&_e===null)throw Error(s(528,""));return i1}if(E&&_e!==null)throw Error(s(529,""));return null;case"script":return E=Z.async,Z=Z.src,typeof Z=="string"&&E&&typeof E!="function"&&typeof E!="symbol"?(E=Gv(Z),Z=R1(Os).hoistableScripts,_e=Z.get(E),_e||(_e={type:"script",instance:null,count:0,state:null},Z.set(E,_e)),_e):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,y))}}function Hv(y){return'href="'+b3(y)+'"'}function Ey(y){return'link[rel="stylesheet"]['+y+"]"}function Lx(y){return g({},y,{"data-precedence":y.precedence,precedence:null})}function OE(y,E,Z,_e){y.querySelector('link[rel="preload"][as="style"]['+E+"]")?_e.loading=1:(E=y.createElement("link"),_e.preload=E,E.addEventListener("load",function(){return _e.loading|=1}),E.addEventListener("error",function(){return _e.loading|=2}),c6(E,"link",Z),M1(E),y.head.appendChild(E))}function Gv(y){return'[src="'+b3(y)+'"]'}function Sy(y){return"script[async]"+y}function Nx(y,E,Z){if(E.count++,E.instance===null)switch(E.type){case"style":var _e=y.querySelector('style[data-href~="'+b3(Z.href)+'"]');if(_e)return E.instance=_e,M1(_e),_e;var Os=g({},Z,{"data-href":Z.href,"data-precedence":Z.precedence,href:null,precedence:null});return _e=(y.ownerDocument||y).createElement("style"),M1(_e),c6(_e,"style",Os),_8(_e,Z.precedence,y),E.instance=_e;case"stylesheet":Os=Hv(Z.href);var th=y.querySelector(Ey(Os));if(th)return E.state.loading|=4,E.instance=th,M1(th),th;_e=Lx(Z),(Os=G6.get(Os))&&o9(_e,Os),th=(y.ownerDocument||y).createElement("link"),M1(th);var i1=th;return i1._p=new Promise(function(f1,I1){i1.onload=f1,i1.onerror=I1}),c6(th,"link",_e),E.state.loading|=4,_8(th,Z.precedence,y),E.instance=th;case"script":return th=Gv(Z.src),(Os=y.querySelector(Sy(th)))?(E.instance=Os,M1(Os),Os):(_e=Z,(Os=G6.get(th))&&(_e=g({},Z),l9(_e,Os)),y=y.ownerDocument||y,Os=y.createElement("script"),M1(Os),c6(Os,"link",_e),y.head.appendChild(Os),E.instance=Os);case"void":return null;default:throw Error(s(443,E.type))}else E.type==="stylesheet"&&(E.state.loading&4)===0&&(_e=E.instance,E.state.loading|=4,_8(_e,Z.precedence,y));return E.instance}function _8(y,E,Z){for(var _e=Z.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Os=_e.length?_e[_e.length-1]:null,th=Os,i1=0;i1<_e.length;i1++){var f1=_e[i1];if(f1.dataset.precedence===E)th=f1;else if(th!==Os)break}th?th.parentNode.insertBefore(y,th.nextSibling):(E=Z.nodeType===9?Z.head:Z,E.insertBefore(y,E.firstChild))}function o9(y,E){y.crossOrigin==null&&(y.crossOrigin=E.crossOrigin),y.referrerPolicy==null&&(y.referrerPolicy=E.referrerPolicy),y.title==null&&(y.title=E.title)}function l9(y,E){y.crossOrigin==null&&(y.crossOrigin=E.crossOrigin),y.referrerPolicy==null&&(y.referrerPolicy=E.referrerPolicy),y.integrity==null&&(y.integrity=E.integrity)}var x8=null;function Fx(y,E,Z){if(x8===null){var _e=new Map,Os=x8=new Map;Os.set(Z,_e)}else Os=x8,_e=Os.get(Z),_e||(_e=new Map,Os.set(Z,_e));if(_e.has(y))return _e;for(_e.set(y,null),Z=Z.getElementsByTagName(y),Os=0;Os<Z.length;Os++){var th=Z[Os];if(!(th[gf]||th[n2]||y==="link"&&th.getAttribute("rel")==="stylesheet")&&th.namespaceURI!=="http://www.w3.org/2000/svg"){var i1=th.getAttribute(E)||"";i1=y+i1;var f1=_e.get(i1);f1?f1.push(th):_e.set(i1,[th])}}return _e}function Ox(y,E,Z){y=y.ownerDocument||y,y.head.insertBefore(Z,E==="title"?y.querySelector("head > title"):null)}function BE(y,E,Z){if(Z===1||E.itemProp!=null)return!1;switch(y){case"meta":case"title":return!0;case"style":if(typeof E.precedence!="string"||typeof E.href!="string"||E.href==="")break;return!0;case"link":if(typeof E.rel!="string"||typeof E.href!="string"||E.href===""||E.onLoad||E.onError)break;switch(E.rel){case"stylesheet":return y=E.disabled,typeof E.precedence=="string"&&y==null;default:return!0}case"script":if(E.async&&typeof E.async!="function"&&typeof E.async!="symbol"&&!E.onLoad&&!E.onError&&E.src&&typeof E.src=="string")return!0}return!1}function Bx(y){return!(y.type==="stylesheet"&&(y.state.loading&3)===0)}var Ay=null;function VE(){}function qE(y,E,Z){if(Ay===null)throw Error(s(475));var _e=Ay;if(E.type==="stylesheet"&&(typeof Z.media!="string"||matchMedia(Z.media).matches!==!1)&&(E.state.loading&4)===0){if(E.instance===null){var Os=Hv(Z.href),th=y.querySelector(Ey(Os));if(th){y=th._p,y!==null&&typeof y=="object"&&typeof y.then=="function"&&(_e.count++,_e=w8.bind(_e),y.then(_e,_e)),E.state.loading|=4,E.instance=th,M1(th);return}th=y.ownerDocument||y,Z=Lx(Z),(Os=G6.get(Os))&&o9(Z,Os),th=th.createElement("link"),M1(th);var i1=th;i1._p=new Promise(function(f1,I1){i1.onload=f1,i1.onerror=I1}),c6(th,"link",Z),E.instance=th}_e.stylesheets===null&&(_e.stylesheets=new Map),_e.stylesheets.set(E,y),(y=E.state.preload)&&(E.state.loading&3)===0&&(_e.count++,E=w8.bind(_e),y.addEventListener("load",E),y.addEventListener("error",E))}}function zE(){if(Ay===null)throw Error(s(475));var y=Ay;return y.stylesheets&&y.count===0&&u9(y,y.stylesheets),0<y.count?function(E){var Z=setTimeout(function(){if(y.stylesheets&&u9(y,y.stylesheets),y.unsuspend){var _e=y.unsuspend;y.unsuspend=null,_e()}},6e4);return y.unsuspend=E,function(){y.unsuspend=null,clearTimeout(Z)}}:null}function w8(){if(this.count--,this.count===0){if(this.stylesheets)u9(this,this.stylesheets);else if(this.unsuspend){var y=this.unsuspend;this.unsuspend=null,y()}}}var E8=null;function u9(y,E){y.stylesheets=null,y.unsuspend!==null&&(y.count++,E8=new Map,E.forEach(jE,y),E8=null,w8.call(y))}function jE(y,E){if(!(E.state.loading&4)){var Z=E8.get(y);if(Z)var _e=Z.get(null);else{Z=new Map,E8.set(y,Z);for(var Os=y.querySelectorAll("link[data-precedence],style[data-precedence]"),th=0;th<Os.length;th++){var i1=Os[th];(i1.nodeName==="LINK"||i1.getAttribute("media")!=="not all")&&(Z.set(i1.dataset.precedence,i1),_e=i1)}_e&&Z.set(null,_e)}Os=E.instance,i1=Os.getAttribute("data-precedence"),th=Z.get(i1)||_e,th===_e&&Z.set(null,Os),Z.set(i1,Os),this.count++,_e=w8.bind(this),Os.addEventListener("load",_e),Os.addEventListener("error",_e),th?th.parentNode.insertBefore(Os,th.nextSibling):(y=y.nodeType===9?y.head:y,y.insertBefore(Os,y.firstChild)),E.state.loading|=4}}var Ty={$$typeof:qe,Provider:null,Consumer:null,_currentValue:qc,_currentValue2:qc,_threadCount:0};function $E(y,E,Z,_e,Os,th,i1,f1){this.tag=1,this.containerInfo=y,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=J1(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J1(0),this.hiddenUpdates=J1(null),this.identifierPrefix=_e,this.onUncaughtError=Os,this.onCaughtError=th,this.onRecoverableError=i1,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=f1,this.incompleteTransitions=new Map}function Vx(y,E,Z,_e,Os,th,i1,f1,I1,o2,k2,O2){return y=new $E(y,E,Z,i1,f1,I1,o2,O2),E=1,th===!0&&(E|=24),th=P6(3,null,null,E),y.current=th,th.stateNode=y,E=U8(),E.refCount++,y.pooledCache=E,E.refCount++,th.memoizedState={element:_e,isDehydrated:Z,cache:E},W8(th),y}function qx(y){return y?(y=Ev,y):Ev}function zx(y,E,Z,_e,Os,th){Os=qx(Os),_e.context===null?_e.context=Os:_e.pendingContext=Os,_e=I5(E),_e.payload={element:Z},th=th===void 0?null:th,th!==null&&(_e.callback=th),Z=D5(y,_e,E),Z!==null&&(F6(Z,y,E),ry(Z,y,E))}function jx(y,E){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var Z=y.retryLane;y.retryLane=Z!==0&&Z<E?Z:E}}function c9(y,E){jx(y,E),(y=y.alternate)&&jx(y,E)}function $x(y){if(y.tag===13){var E=M5(y,67108864);E!==null&&F6(E,y,67108864),c9(y,67108864)}}var S8=!0;function UE(y,E,Z,_e){var Os=Fc.T;Fc.T=null;var th=_h.p;try{_h.p=2,h9(y,E,Z,_e)}finally{_h.p=th,Fc.T=Os}}function HE(y,E,Z,_e){var Os=Fc.T;Fc.T=null;var th=_h.p;try{_h.p=8,h9(y,E,Z,_e)}finally{_h.p=th,Fc.T=Os}}function h9(y,E,Z,_e){if(S8){var Os=d9(_e);if(Os===null)Z7(y,E,_e,A8,Z),Hx(y,_e);else if(KE(Os,y,E,Z,_e))_e.stopPropagation();else if(Hx(y,_e),E&4&&-1<GE.indexOf(y)){for(;Os!==null;){var th=r1(Os);if(th!==null)switch(th.tag){case 3:if(th=th.stateNode,th.current.memoizedState.isDehydrated){var i1=f2(th.pendingLanes);if(i1!==0){var f1=th;for(f1.pendingLanes|=2,f1.entangledLanes|=2;i1;){var I1=1<<31-C1(i1);f1.entanglements[1]|=I1,i1&=~I1}o5(th),(s3&6)===0&&(l8=p1()+500,by(0))}}break;case 13:f1=M5(th,2),f1!==null&&F6(f1,th,2),c8(),c9(th,2)}if(th=d9(_e),th===null&&Z7(y,E,_e,A8,Z),th===Os)break;Os=th}Os!==null&&_e.stopPropagation()}else Z7(y,E,_e,null,Z)}}function d9(y){return y=V2(y),f9(y)}var A8=null;function f9(y){if(A8=null,y=d1(y),y!==null){var E=l(y);if(E===null)y=null;else{var Z=E.tag;if(Z===13){if(y=u(E),y!==null)return y;y=null}else if(Z===3){if(E.stateNode.current.memoizedState.isDehydrated)return E.tag===3?E.stateNode.containerInfo:null;y=null}else E!==y&&(y=null)}}return A8=y,null}function Ux(y){switch(y){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(S1()){case D1:return 2;case _1:return 8;case B1:case c2:return 32;case H1:return 268435456;default:return 32}default:return 32}}var p9=!1,G5=null,K5=null,W5=null,Cy=new Map,Ry=new Map,X5=[],GE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hx(y,E){switch(y){case"focusin":case"focusout":G5=null;break;case"dragenter":case"dragleave":K5=null;break;case"mouseover":case"mouseout":W5=null;break;case"pointerover":case"pointerout":Cy.delete(E.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ry.delete(E.pointerId)}}function My(y,E,Z,_e,Os,th){return y===null||y.nativeEvent!==th?(y={blockedOn:E,domEventName:Z,eventSystemFlags:_e,nativeEvent:th,targetContainers:[Os]},E!==null&&(E=r1(E),E!==null&&$x(E)),y):(y.eventSystemFlags|=_e,E=y.targetContainers,Os!==null&&E.indexOf(Os)===-1&&E.push(Os),y)}function KE(y,E,Z,_e,Os){switch(E){case"focusin":return G5=My(G5,y,E,Z,_e,Os),!0;case"dragenter":return K5=My(K5,y,E,Z,_e,Os),!0;case"mouseover":return W5=My(W5,y,E,Z,_e,Os),!0;case"pointerover":var th=Os.pointerId;return Cy.set(th,My(Cy.get(th)||null,y,E,Z,_e,Os)),!0;case"gotpointercapture":return th=Os.pointerId,Ry.set(th,My(Ry.get(th)||null,y,E,Z,_e,Os)),!0}return!1}function Gx(y){var E=d1(y.target);if(E!==null){var Z=l(E);if(Z!==null){if(E=Z.tag,E===13){if(E=u(Z),E!==null){y.blockedOn=E,k1(y.priority,function(){if(Z.tag===13){var _e=N6();_e=n4(_e);var Os=M5(Z,_e);Os!==null&&F6(Os,Z,_e),c9(Z,_e)}});return}}else if(E===3&&Z.stateNode.current.memoizedState.isDehydrated){y.blockedOn=Z.tag===3?Z.stateNode.containerInfo:null;return}}}y.blockedOn=null}function T8(y){if(y.blockedOn!==null)return!1;for(var E=y.targetContainers;0<E.length;){var Z=d9(y.nativeEvent);if(Z===null){Z=y.nativeEvent;var _e=new Z.constructor(Z.type,Z);R2=_e,Z.target.dispatchEvent(_e),R2=null}else return E=r1(Z),E!==null&&$x(E),y.blockedOn=Z,!1;E.shift()}return!0}function Kx(y,E,Z){T8(y)&&Z.delete(E)}function WE(){p9=!1,G5!==null&&T8(G5)&&(G5=null),K5!==null&&T8(K5)&&(K5=null),W5!==null&&T8(W5)&&(W5=null),Cy.forEach(Kx),Ry.forEach(Kx)}function C8(y,E){y.blockedOn===E&&(y.blockedOn=null,p9||(p9=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,WE)))}var R8=null;function Wx(y){R8!==y&&(R8=y,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){R8===y&&(R8=null);for(var E=0;E<y.length;E+=3){var Z=y[E],_e=y[E+1],Os=y[E+2];if(typeof _e!="function"){if(f9(_e||Z)===null)continue;break}var th=r1(Z);th!==null&&(y.splice(E,3),E-=3,f7(th,{pending:!0,data:Os,method:Z.method,action:_e},_e,Os))}}))}function ky(y){function E(I1){return C8(I1,y)}G5!==null&&C8(G5,y),K5!==null&&C8(K5,y),W5!==null&&C8(W5,y),Cy.forEach(E),Ry.forEach(E);for(var Z=0;Z<X5.length;Z++){var _e=X5[Z];_e.blockedOn===y&&(_e.blockedOn=null)}for(;0<X5.length&&(Z=X5[0],Z.blockedOn===null);)Gx(Z),Z.blockedOn===null&&X5.shift();if(Z=(y.ownerDocument||y).$$reactFormReplay,Z!=null)for(_e=0;_e<Z.length;_e+=3){var Os=Z[_e],th=Z[_e+1],i1=Os[y2]||null;if(typeof th=="function")i1||Wx(Z);else if(i1){var f1=null;if(th&&th.hasAttribute("formAction")){if(Os=th,i1=th[y2]||null)f1=i1.formAction;else if(f9(Os)!==null)continue}else f1=i1.action;typeof f1=="function"?Z[_e+1]=f1:(Z.splice(_e,3),_e-=3),Wx(Z)}}}function m9(y){this._internalRoot=y}M8.prototype.render=m9.prototype.render=function(y){var E=this._internalRoot;if(E===null)throw Error(s(409));var Z=E.current,_e=N6();zx(Z,_e,y,E,null,null)},M8.prototype.unmount=m9.prototype.unmount=function(){var y=this._internalRoot;if(y!==null){this._internalRoot=null;var E=y.containerInfo;zx(y.current,2,null,y,null,null),c8(),E[Z1]=null}};function M8(y){this._internalRoot=y}M8.prototype.unstable_scheduleHydration=function(y){if(y){var E=b1();y={blockedOn:null,target:y,priority:E};for(var Z=0;Z<X5.length&&E!==0&&E<X5[Z].priority;Z++);X5.splice(Z,0,y),Z===0&&Gx(y)}};var Xx=e.version;if(Xx!=="19.1.1")throw Error(s(527,Xx,"19.1.1"));_h.findDOMNode=function(y){var E=y._reactInternals;if(E===void 0)throw typeof y.render=="function"?Error(s(188)):(y=Object.keys(y).join(","),Error(s(268,y)));return y=d(E),y=y!==null?m(y):null,y=y===null?null:y.stateNode,y};var XE={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Fc,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var k8=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!k8.isDisabled&&k8.supportsFiber)try{o1=k8.inject(XE),e1=k8}catch{}}return reactDomClient_production.createRoot=function(y,E){if(!o(y))throw Error(s(299));var Z=!1,_e="",Os=c_,th=h_,i1=d_,f1=null;return E!=null&&(E.unstable_strictMode===!0&&(Z=!0),E.identifierPrefix!==void 0&&(_e=E.identifierPrefix),E.onUncaughtError!==void 0&&(Os=E.onUncaughtError),E.onCaughtError!==void 0&&(th=E.onCaughtError),E.onRecoverableError!==void 0&&(i1=E.onRecoverableError),E.unstable_transitionCallbacks!==void 0&&(f1=E.unstable_transitionCallbacks)),E=Vx(y,1,!1,null,null,Z,_e,Os,th,i1,f1,null),y[Z1]=E.current,Q7(y),new m9(E)},reactDomClient_production.hydrateRoot=function(y,E,Z){if(!o(y))throw Error(s(299));var _e=!1,Os="",th=c_,i1=h_,f1=d_,I1=null,o2=null;return Z!=null&&(Z.unstable_strictMode===!0&&(_e=!0),Z.identifierPrefix!==void 0&&(Os=Z.identifierPrefix),Z.onUncaughtError!==void 0&&(th=Z.onUncaughtError),Z.onCaughtError!==void 0&&(i1=Z.onCaughtError),Z.onRecoverableError!==void 0&&(f1=Z.onRecoverableError),Z.unstable_transitionCallbacks!==void 0&&(I1=Z.unstable_transitionCallbacks),Z.formState!==void 0&&(o2=Z.formState)),E=Vx(y,1,!0,E,Z??null,_e,Os,th,i1,f1,I1,o2),E.context=qx(null),Z=E.current,_e=N6(),_e=n4(_e),Os=I5(_e),Os.callback=null,D5(Z,Os,_e),Z=_e,E.current.lanes=Z,v2(E,Z),o5(E),y[Z1]=E.current,Q7(y),new M8(E)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),UserContext=reactExports.createContext({user:{uid:"",username:"",email:"",picture:"",friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,questionStreak:0,savedQuestions:[],decks:[],streak:0},setUser:()=>{}}),OptionsContext=reactExports.createContext({options:{theme:"light"},setOptions:()=>{}});/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var __typeError=t=>{throw TypeError(t)},__accessCheck=(t,e,a)=>e.has(t)||__typeError("Cannot "+a),__privateGet=(t,e,a)=>(__accessCheck(t,e,"read from private field"),a?a.call(t):e.get(t)),__privateAdd=(t,e,a)=>e.has(t)?__typeError("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),PopStateEventType="popstate";function createHashHistory(t={}){function e(o,l){let{pathname:u="/",search:c="",hash:d=""}=parsePath(o.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),createLocation("",{pathname:u,search:c,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(o,l){let u=o.document.querySelector("base"),c="";if(u&&u.getAttribute("href")){let d=o.location.href,m=d.indexOf("#");c=m===-1?d:d.slice(0,m)}return c+"#"+(typeof l=="string"?l:createPath(l))}function s(o,l){warning$1(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return getUrlBasedHistory(e,a,s,t)}function invariant$2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning$1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey$1(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,a=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:a,key:e&&e.key||s||createKey$1()}}function createPath({pathname:t="/",search:e="",hash:a=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function parsePath(t){let e={};if(t){let a=t.indexOf("#");a>=0&&(e.hash=t.substring(a),t=t.substring(0,a));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,a,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,u=o.history,c="POP",d=null,m=g();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function g(){return(u.state||{idx:null}).idx}function A(){c="POP";let He=g(),De=He==null?null:He-m;m=He,d&&d({action:c,location:ve.location,delta:De})}function P(He,De){c="PUSH";let Xe=createLocation(ve.location,He,De);a&&a(Xe,He),m=g()+1;let qe=getHistoryState(Xe,m),Rs=ve.createHref(Xe);try{u.pushState(qe,"",Rs)}catch(Vc){if(Vc instanceof DOMException&&Vc.name==="DataCloneError")throw Vc;o.location.assign(Rs)}l&&d&&d({action:c,location:ve.location,delta:1})}function W(He,De){c="REPLACE";let Xe=createLocation(ve.location,He,De);a&&a(Xe,He),m=g();let qe=getHistoryState(Xe,m),Rs=ve.createHref(Xe);u.replaceState(qe,"",Rs),l&&d&&d({action:c,location:ve.location,delta:0})}function me(He){return createBrowserURLImpl(He)}let ve={get action(){return c},get location(){return t(o,u)},listen(He){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,A),d=He,()=>{o.removeEventListener(PopStateEventType,A),d=null}},createHref(He){return e(o,He)},createURL:me,encodeLocation(He){let De=me(He);return{pathname:De.pathname,search:De.search,hash:De.hash}},push:P,replace:W,go(He){return u.go(He)}};return ve}function createBrowserURLImpl(t,e=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$2(a,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:createPath(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=a+s),new URL(s,a)}var _map,unstable_RouterContextProvider=class{constructor(t){if(__privateAdd(this,_map,new Map),t)for(let[e,a]of t)this.set(e,a)}get(t){if(__privateGet(this,_map).has(t))return __privateGet(this,_map).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){__privateGet(this,_map).set(t,e)}};_map=new WeakMap;var unsupportedLazyRouteObjectKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isUnsupportedLazyRouteObjectKey(t){return unsupportedLazyRouteObjectKeys.has(t)}var unsupportedLazyRouteFunctionKeys=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function isUnsupportedLazyRouteFunctionKey(t){return unsupportedLazyRouteFunctionKeys.has(t)}function isIndexRoute(t){return t.index===!0}function convertRoutesToDataRoutes(t,e,a=[],s={},o=!1){return t.map((l,u)=>{let c=[...a,String(u)],d=typeof l.id=="string"?l.id:c.join("-");if(invariant$2(l.index!==!0||!l.children,"Cannot specify children on an index route"),invariant$2(o||!s[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),isIndexRoute(l)){let m={...l,...e(l),id:d};return s[d]=m,m}else{let m={...l,...e(l),id:d,children:void 0};return s[d]=m,l.children&&(m.children=convertRoutesToDataRoutes(l.children,e,c,s,o)),m}})}function matchRoutes(t,e,a="/"){return matchRoutesImpl(t,e,a,!1)}function matchRoutesImpl(t,e,a,s){let o=typeof e=="string"?parsePath(e):e,l=stripBasename(o.pathname||"/",a);if(l==null)return null;let u=flattenRoutes(t);rankRouteBranches(u);let c=null;for(let d=0;c==null&&d<u.length;++d){let m=decodePath(l);c=matchRouteBranch(u[d],m,s)}return c}function convertRouteMatchToUiMatch(t,e){let{route:a,pathname:s,params:o}=t;return{id:a.id,pathname:s,params:o,data:e[a.id],handle:a.handle}}function flattenRoutes(t,e=[],a=[],s=""){let o=(l,u,c)=>{let d={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};d.relativePath.startsWith("/")&&(invariant$2(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length));let m=joinPaths([s,d.relativePath]),g=a.concat(d);l.children&&l.children.length>0&&(invariant$2(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),flattenRoutes(l.children,e,g,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:computeScore$2(m,l.index),routesMeta:g})};return t.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let c of explodeOptionalSegments(l.path))o(l,u,c)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[a,...s]=e,o=a.endsWith("?"),l=a.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let u=explodeOptionalSegments(s.join("/")),c=[];return c.push(...u.map(d=>d===""?l:[l,d].join("/"))),o&&c.push(...u),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function rankRouteBranches(t){t.sort((e,a)=>e.score!==a.score?a.score-e.score:compareIndexes(e.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore$2(t,e){let a=t.split("/"),s=a.length;return a.some(isSplat)&&(s+=splatPenalty),e&&(s+=indexRouteValue),a.filter(o=>!isSplat(o)).reduce((o,l)=>o+(paramRe.test(l)?dynamicSegmentValue:l===""?emptySegmentValue:staticSegmentValue),s)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((s,o)=>s===e[o])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,a=!1){let{routesMeta:s}=t,o={},l="/",u=[];for(let c=0;c<s.length;++c){let d=s[c],m=c===s.length-1,g=l==="/"?e:e.slice(l.length)||"/",A=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),P=d.route;if(!A&&m&&a&&!s[s.length-1].route.index&&(A=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!A)return null;Object.assign(o,A.params),u.push({params:o,pathname:joinPaths([l,A.pathname]),pathnameBase:normalizePathname(joinPaths([l,A.pathnameBase])),route:P}),A.pathnameBase!=="/"&&(l=joinPaths([l,A.pathnameBase]))}return u}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,s]=compilePath(t.path,t.caseSensitive,t.end),o=e.match(a);if(!o)return null;let l=o[0],u=l.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:s.reduce((m,{paramName:g,isOptional:A},P)=>{if(g==="*"){let me=c[P]||"";u=l.slice(0,l.length-me.length).replace(/(.)\/+$/,"$1")}const W=c[P];return A&&!W?m[g]=void 0:m[g]=(W||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:u,pattern:t}}function compilePath(t,e=!1,a=!0){warning$1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning$1(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let a=e.endsWith("/")?e.length-1:e.length,s=t.charAt(a);return s&&s!=="/"?null:t.slice(a)||"/"}function prependBasename({basename:t,pathname:e}){return e==="/"?t:joinPaths([t,e])}function resolvePath(t,e="/"){let{pathname:a,search:s="",hash:o=""}=typeof t=="string"?parsePath(t):t;return{pathname:a?a.startsWith("/")?a:resolvePathname(a,e):e,search:normalizeSearch(s),hash:normalizeHash(o)}}function resolvePathname(t,e){let a=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?a.length>1&&a.pop():o!=="."&&a.push(o)}),a.length>1?a.join("/"):"/"}function getInvalidPathError(t,e,a,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((e,a)=>a===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t){let e=getPathContributingMatches(t);return e.map((a,s)=>s===e.length-1?a.pathname:a.pathnameBase)}function resolveTo(t,e,a,s=!1){let o;typeof t=="string"?o=parsePath(t):(o={...t},invariant$2(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant$2(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant$2(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let l=t===""||o.pathname==="",u=l?"/":o.pathname,c;if(u==null)c=a;else{let A=e.length-1;if(!s&&u.startsWith("..")){let P=u.split("/");for(;P[0]==="..";)P.shift(),A-=1;o.pathname=P.join("/")}c=A>=0?e[A]:"/"}let d=resolvePath(o,c),m=u&&u!=="/"&&u.endsWith("/"),g=(l||u===".")&&a.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,ErrorResponseImpl=class{constructor(t,e,a,s=!1){this.status=t,this.statusText=e||"",this.internal=s,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["GET",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=t=>ABSOLUTE_URL_REGEX.test(t),defaultMapRouteProperties=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions",ResetLoaderDataSymbol=Symbol("ResetLoaderData");function createRouter(t){const e=t.window?t.window:typeof window<"u"?window:void 0,a=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";invariant$2(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s=t.hydrationRouteProperties||[],o=t.mapRouteProperties||defaultMapRouteProperties,l={},u=convertRoutesToDataRoutes(t.routes,o,void 0,l),c,d=t.basename||"/",m=t.dataStrategy||defaultDataStrategyWithMiddleware,g={unstable_middleware:!1,...t.future},A=null,P=new Set,W=null,me=null,ve=null,He=t.hydrationData!=null,De=matchRoutes(u,t.history.location,d),Xe=!1,qe=null,Rs;if(De==null&&!t.patchRoutesOnNavigation){let b1=getInternalRouterError(404,{pathname:t.history.location.pathname}),{matches:k1,route:V1}=getShortCircuitMatches(u);Rs=!0,De=k1,qe={[V1.id]:b1}}else if(De&&!t.hydrationData&&q2(De,u,t.history.location.pathname).active&&(De=null),De)if(De.some(b1=>b1.route.lazy))Rs=!1;else if(!De.some(b1=>b1.route.loader))Rs=!0;else{let b1=t.hydrationData?t.hydrationData.loaderData:null,k1=t.hydrationData?t.hydrationData.errors:null;if(k1){let V1=De.findIndex(n2=>k1[n2.route.id]!==void 0);Rs=De.slice(0,V1+1).every(n2=>!shouldLoadRouteOnHydration(n2.route,b1,k1))}else Rs=De.every(V1=>!shouldLoadRouteOnHydration(V1.route,b1,k1))}else{Rs=!1,De=[];let b1=q2(null,u,t.history.location.pathname);b1.active&&b1.matches&&(Xe=!0,De=b1.matches)}let Vc,So={historyAction:t.history.action,location:t.history.location,matches:De,initialized:Rs,navigation:IDLE_NAVIGATION,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||qe,fetchers:new Map,blockers:new Map},Do="POP",eh=!1,Ko,Ge=!1,An=new Map,wt=null,Bs=!1,yh=!1,df=new Set,Fc=new Map,_h=0,qc=-1,Mh=new Map,cf=new Set,mf=new Map,a1=new Map,s1=new Set,E1=new Map,T1,z1=null;function W1(){if(A=t.history.listen(({action:b1,location:k1,delta:V1})=>{if(T1){T1(),T1=void 0;return}warning$1(E1.size===0||V1!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let n2=Q1({currentLocation:So.location,nextLocation:k1,historyAction:b1});if(n2&&V1!=null){let y2=new Promise(Z1=>{T1=Z1});t.history.go(V1*-1),l2(n2,{state:"blocked",location:k1,proceed(){l2(n2,{state:"proceeding",proceed:void 0,reset:void 0,location:k1}),y2.then(()=>t.history.go(V1))},reset(){let Z1=new Map(So.blockers);Z1.set(n2,IDLE_BLOCKER),A2({blockers:Z1})}});return}return U1(b1,k1)}),a){restoreAppliedTransitions(e,An);let b1=()=>persistAppliedTransitions(e,An);e.addEventListener("pagehide",b1),wt=()=>e.removeEventListener("pagehide",b1)}return So.initialized||U1("POP",So.location,{initialHydration:!0}),Vc}function m2(){A&&A(),wt&&wt(),P.clear(),Ko&&Ko.abort(),So.fetchers.forEach((b1,k1)=>C1(k1)),So.blockers.forEach((b1,k1)=>Y1(k1))}function C2(b1){return P.add(b1),()=>P.delete(b1)}function A2(b1,k1={}){b1.matches&&(b1.matches=b1.matches.map(y2=>{let Z1=l[y2.route.id],T2=y2.route;return T2.element!==Z1.element||T2.errorElement!==Z1.errorElement||T2.hydrateFallbackElement!==Z1.hydrateFallbackElement?{...y2,route:Z1}:y2})),So={...So,...b1};let V1=[],n2=[];So.fetchers.forEach((y2,Z1)=>{y2.state==="idle"&&(s1.has(Z1)?V1.push(Z1):n2.push(Z1))}),s1.forEach(y2=>{!So.fetchers.has(y2)&&!Fc.has(y2)&&V1.push(y2)}),[...P].forEach(y2=>y2(So,{deletedFetchers:V1,viewTransitionOpts:k1.viewTransitionOpts,flushSync:k1.flushSync===!0})),V1.forEach(y2=>C1(y2)),n2.forEach(y2=>So.fetchers.delete(y2))}function b2(b1,k1,{flushSync:V1}={}){let n2=So.actionData!=null&&So.navigation.formMethod!=null&&isMutationMethod(So.navigation.formMethod)&&So.navigation.state==="loading"&&b1.state?._isRedirect!==!0,y2;k1.actionData?Object.keys(k1.actionData).length>0?y2=k1.actionData:y2=null:n2?y2=So.actionData:y2=null;let Z1=k1.loaderData?mergeLoaderData(So.loaderData,k1.loaderData,k1.matches||[],k1.errors):So.loaderData,T2=So.blockers;T2.size>0&&(T2=new Map(T2),T2.forEach((gf,Ym)=>T2.set(Ym,IDLE_BLOCKER)));let L2=Bs?!1:z2(b1,k1.matches||So.matches),uf=eh===!0||So.navigation.formMethod!=null&&isMutationMethod(So.navigation.formMethod)&&b1.state?._isRedirect!==!0;c&&(u=c,c=void 0),Bs||Do==="POP"||(Do==="PUSH"?t.history.push(b1,b1.state):Do==="REPLACE"&&t.history.replace(b1,b1.state));let Qp;if(Do==="POP"){let gf=An.get(So.location.pathname);gf&&gf.has(b1.pathname)?Qp={currentLocation:So.location,nextLocation:b1}:An.has(b1.pathname)&&(Qp={currentLocation:b1,nextLocation:So.location})}else if(Ge){let gf=An.get(So.location.pathname);gf?gf.add(b1.pathname):(gf=new Set([b1.pathname]),An.set(So.location.pathname,gf)),Qp={currentLocation:So.location,nextLocation:b1}}A2({...k1,actionData:y2,loaderData:Z1,historyAction:Do,location:b1,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:L2,preventScrollReset:uf,blockers:T2},{viewTransitionOpts:Qp,flushSync:V1===!0}),Do="POP",eh=!1,Ge=!1,Bs=!1,yh=!1,z1?.resolve(),z1=null}async function _2(b1,k1){if(typeof b1=="number"){t.history.go(b1);return}let V1=normalizeTo(So.location,So.matches,d,b1,k1?.fromRouteId,k1?.relative),{path:n2,submission:y2,error:Z1}=normalizeNavigateOptions(!1,V1,k1),T2=So.location,L2=createLocation(So.location,n2,k1&&k1.state);L2={...L2,...t.history.encodeLocation(L2)};let uf=k1&&k1.replace!=null?k1.replace:void 0,Qp="PUSH";uf===!0?Qp="REPLACE":uf===!1||y2!=null&&isMutationMethod(y2.formMethod)&&y2.formAction===So.location.pathname+So.location.search&&(Qp="REPLACE");let gf=k1&&"preventScrollReset"in k1?k1.preventScrollReset===!0:void 0,Ym=(k1&&k1.flushSync)===!0,d1=Q1({currentLocation:T2,nextLocation:L2,historyAction:Qp});if(d1){l2(d1,{state:"blocked",location:L2,proceed(){l2(d1,{state:"proceeding",proceed:void 0,reset:void 0,location:L2}),_2(b1,k1)},reset(){let r1=new Map(So.blockers);r1.set(d1,IDLE_BLOCKER),A2({blockers:r1})}});return}await U1(Qp,L2,{submission:y2,pendingError:Z1,preventScrollReset:gf,replace:k1&&k1.replace,enableViewTransition:k1&&k1.viewTransition,flushSync:Ym})}function q1(){z1||(z1=createDeferred()),pf(),A2({revalidation:"loading"});let b1=z1.promise;return So.navigation.state==="submitting"?b1:So.navigation.state==="idle"?(U1(So.historyAction,So.location,{startUninterruptedRevalidation:!0}),b1):(U1(Do||So.historyAction,So.navigation.location,{overrideNavigation:So.navigation,enableViewTransition:Ge===!0}),b1)}async function U1(b1,k1,V1){Ko&&Ko.abort(),Ko=null,Do=b1,Bs=(V1&&V1.startUninterruptedRevalidation)===!0,v2(So.location,So.matches),eh=(V1&&V1.preventScrollReset)===!0,Ge=(V1&&V1.enableViewTransition)===!0;let n2=c||u,y2=V1&&V1.overrideNavigation,Z1=V1?.initialHydration&&So.matches&&So.matches.length>0&&!Xe?So.matches:matchRoutes(n2,k1,d),T2=(V1&&V1.flushSync)===!0;if(Z1&&So.initialized&&!yh&&isHashChangeOnly(So.location,k1)&&!(V1&&V1.submission&&isMutationMethod(V1.submission.formMethod))){b2(k1,{matches:Z1},{flushSync:T2});return}let L2=q2(Z1,n2,k1.pathname);if(L2.active&&L2.matches&&(Z1=L2.matches),!Z1){let{error:R1,notFoundMatches:M1,route:L1}=G1(k1.pathname);b2(k1,{matches:M1,loaderData:{},errors:{[L1.id]:R1}},{flushSync:T2});return}Ko=new AbortController;let uf=createClientSideRequest(t.history,k1,Ko.signal,V1&&V1.submission),Qp=new unstable_RouterContextProvider(t.unstable_getContext?await t.unstable_getContext():void 0),gf;if(V1&&V1.pendingError)gf=[findNearestBoundary(Z1).route.id,{type:"error",error:V1.pendingError}];else if(V1&&V1.submission&&isMutationMethod(V1.submission.formMethod)){let R1=await M2(uf,k1,V1.submission,Z1,Qp,L2.active,V1&&V1.initialHydration===!0,{replace:V1.replace,flushSync:T2});if(R1.shortCircuited)return;if(R1.pendingActionResult){let[M1,L1]=R1.pendingActionResult;if(isErrorResult(L1)&&isRouteErrorResponse(L1.error)&&L1.error.status===404){Ko=null,b2(k1,{matches:R1.matches,loaderData:{},errors:{[M1]:L1.error}});return}}Z1=R1.matches||Z1,gf=R1.pendingActionResult,y2=getLoadingNavigation(k1,V1.submission),T2=!1,L2.active=!1,uf=createClientSideRequest(t.history,uf.url,uf.signal)}let{shortCircuited:Ym,matches:d1,loaderData:r1,errors:g1}=await x2(uf,k1,Z1,Qp,L2.active,y2,V1&&V1.submission,V1&&V1.fetcherSubmission,V1&&V1.replace,V1&&V1.initialHydration===!0,T2,gf);Ym||(Ko=null,b2(k1,{matches:d1||Z1,...getActionDataForCommit(gf),loaderData:r1,errors:g1}))}async function M2(b1,k1,V1,n2,y2,Z1,T2,L2={}){pf();let uf=getSubmittingNavigation(k1,V1);if(A2({navigation:uf},{flushSync:L2.flushSync===!0}),Z1){let Ym=await j2(n2,k1.pathname,b1.signal);if(Ym.type==="aborted")return{shortCircuited:!0};if(Ym.type==="error"){let d1=findNearestBoundary(Ym.partialMatches).route.id;return{matches:Ym.partialMatches,pendingActionResult:[d1,{type:"error",error:Ym.error}]}}else if(Ym.matches)n2=Ym.matches;else{let{notFoundMatches:d1,error:r1,route:g1}=G1(k1.pathname);return{matches:d1,pendingActionResult:[g1.id,{type:"error",error:r1}]}}}let Qp,gf=getTargetMatch(n2,k1);if(!gf.route.action&&!gf.route.lazy)Qp={type:"error",error:getInternalRouterError(405,{method:b1.method,pathname:k1.pathname,routeId:gf.route.id})};else{let Ym=getTargetedDataStrategyMatches(o,l,b1,n2,gf,T2?[]:s,y2),d1=await H1(b1,Ym,y2,null);if(Qp=d1[gf.route.id],!Qp){for(let r1 of n2)if(d1[r1.route.id]){Qp=d1[r1.route.id];break}}if(b1.signal.aborted)return{shortCircuited:!0}}if(isRedirectResult(Qp)){let Ym;return L2&&L2.replace!=null?Ym=L2.replace:Ym=normalizeRedirectLocation(Qp.response.headers.get("Location"),new URL(b1.url),d)===So.location.pathname+So.location.search,await c2(b1,Qp,!0,{submission:V1,replace:Ym}),{shortCircuited:!0}}if(isErrorResult(Qp)){let Ym=findNearestBoundary(n2,gf.route.id);return(L2&&L2.replace)!==!0&&(Do="PUSH"),{matches:n2,pendingActionResult:[Ym.route.id,Qp,gf.route.id]}}return{matches:n2,pendingActionResult:[gf.route.id,Qp]}}async function x2(b1,k1,V1,n2,y2,Z1,T2,L2,uf,Qp,gf,Ym){let d1=Z1||getLoadingNavigation(k1,T2),r1=T2||L2||getSubmissionFromNavigation(d1),g1=!Bs&&!Qp;if(y2){if(g1){let B2=p1(Ym);A2({navigation:d1,...B2!==void 0?{actionData:B2}:{}},{flushSync:gf})}let Y2=await j2(V1,k1.pathname,b1.signal);if(Y2.type==="aborted")return{shortCircuited:!0};if(Y2.type==="error"){let B2=findNearestBoundary(Y2.partialMatches).route.id;return{matches:Y2.partialMatches,loaderData:{},errors:{[B2]:Y2.error}}}else if(Y2.matches)V1=Y2.matches;else{let{error:B2,notFoundMatches:d4,route:Z2}=G1(k1.pathname);return{matches:d4,loaderData:{},errors:{[Z2.id]:B2}}}}let R1=c||u,{dsMatches:M1,revalidatingFetchers:L1}=getMatchesToLoad(b1,n2,o,l,t.history,So,V1,r1,k1,Qp?[]:s,Qp===!0,yh,df,s1,mf,cf,R1,d,t.patchRoutesOnNavigation!=null,Ym);if(qc=++_h,!t.dataStrategy&&!M1.some(Y2=>Y2.shouldLoad)&&L1.length===0){let Y2=X1();return b2(k1,{matches:V1,loaderData:{},errors:Ym&&isErrorResult(Ym[1])?{[Ym[0]]:Ym[1].error}:null,...getActionDataForCommit(Ym),...Y2?{fetchers:new Map(So.fetchers)}:{}},{flushSync:gf}),{shortCircuited:!0}}if(g1){let Y2={};if(!y2){Y2.navigation=d1;let B2=p1(Ym);B2!==void 0&&(Y2.actionData=B2)}L1.length>0&&(Y2.fetchers=S1(L1)),A2(Y2,{flushSync:gf})}L1.forEach(Y2=>{N1(Y2.key),Y2.controller&&Fc.set(Y2.key,Y2.controller)});let O1=()=>L1.forEach(Y2=>N1(Y2.key));Ko&&Ko.signal.addEventListener("abort",O1);let{loaderResults:a2,fetcherResults:S2}=await x1(M1,L1,b1,n2);if(b1.signal.aborted)return{shortCircuited:!0};Ko&&Ko.signal.removeEventListener("abort",O1),L1.forEach(Y2=>Fc.delete(Y2.key));let U2=findRedirect(a2);if(U2)return await c2(b1,U2.result,!0,{replace:uf}),{shortCircuited:!0};if(U2=findRedirect(S2),U2)return cf.add(U2.key),await c2(b1,U2.result,!0,{replace:uf}),{shortCircuited:!0};let{loaderData:H2,errors:$2}=processLoaderData(So,V1,a2,Ym,L1,S2);Qp&&So.errors&&($2={...So.errors,...$2});let r4=X1(),P4=i2(qc),A4=r4||P4||L1.length>0;return{matches:V1,loaderData:H2,errors:$2,...A4?{fetchers:new Map(So.fetchers)}:{}}}function p1(b1){if(b1&&!isErrorResult(b1[1]))return{[b1[0]]:b1[1].data};if(So.actionData)return Object.keys(So.actionData).length===0?null:So.actionData}function S1(b1){return b1.forEach(k1=>{let V1=So.fetchers.get(k1.key),n2=getLoadingFetcher(void 0,V1?V1.data:void 0);So.fetchers.set(k1.key,n2)}),new Map(So.fetchers)}async function D1(b1,k1,V1,n2){N1(b1);let y2=(n2&&n2.flushSync)===!0,Z1=c||u,T2=normalizeTo(So.location,So.matches,d,V1,k1,n2?.relative),L2=matchRoutes(Z1,T2,d),uf=q2(L2,Z1,T2);if(uf.active&&uf.matches&&(L2=uf.matches),!L2){e1(b1,k1,getInternalRouterError(404,{pathname:T2}),{flushSync:y2});return}let{path:Qp,submission:gf,error:Ym}=normalizeNavigateOptions(!0,T2,n2);if(Ym){e1(b1,k1,Ym,{flushSync:y2});return}let d1=new unstable_RouterContextProvider(t.unstable_getContext?await t.unstable_getContext():void 0),r1=(n2&&n2.preventScrollReset)===!0;if(gf&&isMutationMethod(gf.formMethod)){await _1(b1,k1,Qp,L2,d1,uf.active,y2,r1,gf);return}mf.set(b1,{routeId:k1,path:Qp}),await B1(b1,k1,Qp,L2,d1,uf.active,y2,r1,gf)}async function _1(b1,k1,V1,n2,y2,Z1,T2,L2,uf){pf(),mf.delete(b1);let Qp=So.fetchers.get(b1);o1(b1,getSubmittingFetcher(uf,Qp),{flushSync:T2});let gf=new AbortController,Ym=createClientSideRequest(t.history,V1,gf.signal,uf);if(Z1){let l4=await j2(n2,new URL(Ym.url).pathname,Ym.signal,b1);if(l4.type==="aborted")return;if(l4.type==="error"){e1(b1,k1,l4.error,{flushSync:T2});return}else if(l4.matches)n2=l4.matches;else{e1(b1,k1,getInternalRouterError(404,{pathname:V1}),{flushSync:T2});return}}let d1=getTargetMatch(n2,V1);if(!d1.route.action&&!d1.route.lazy){let l4=getInternalRouterError(405,{method:uf.formMethod,pathname:V1,routeId:k1});e1(b1,k1,l4,{flushSync:T2});return}Fc.set(b1,gf);let r1=_h,g1=getTargetedDataStrategyMatches(o,l,Ym,n2,d1,s,y2),M1=(await H1(Ym,g1,y2,b1))[d1.route.id];if(Ym.signal.aborted){Fc.get(b1)===gf&&Fc.delete(b1);return}if(s1.has(b1)){if(isRedirectResult(M1)||isErrorResult(M1)){o1(b1,getDoneFetcher(void 0));return}}else{if(isRedirectResult(M1))if(Fc.delete(b1),qc>r1){o1(b1,getDoneFetcher(void 0));return}else return cf.add(b1),o1(b1,getLoadingFetcher(uf)),c2(Ym,M1,!1,{fetcherSubmission:uf,preventScrollReset:L2});if(isErrorResult(M1)){e1(b1,k1,M1.error);return}}let L1=So.navigation.location||So.location,O1=createClientSideRequest(t.history,L1,gf.signal),a2=c||u,S2=So.navigation.state!=="idle"?matchRoutes(a2,So.navigation.location,d):So.matches;invariant$2(S2,"Didn't find any matches after fetcher action");let U2=++_h;Mh.set(b1,U2);let H2=getLoadingFetcher(uf,M1.data);So.fetchers.set(b1,H2);let{dsMatches:$2,revalidatingFetchers:r4}=getMatchesToLoad(O1,y2,o,l,t.history,So,S2,uf,L1,s,!1,yh,df,s1,mf,cf,a2,d,t.patchRoutesOnNavigation!=null,[d1.route.id,M1]);r4.filter(l4=>l4.key!==b1).forEach(l4=>{let f4=l4.key,I2=So.fetchers.get(f4),h1=getLoadingFetcher(void 0,I2?I2.data:void 0);So.fetchers.set(f4,h1),N1(f4),l4.controller&&Fc.set(f4,l4.controller)}),A2({fetchers:new Map(So.fetchers)});let P4=()=>r4.forEach(l4=>N1(l4.key));gf.signal.addEventListener("abort",P4);let{loaderResults:A4,fetcherResults:Y2}=await x1($2,r4,O1,y2);if(gf.signal.aborted)return;if(gf.signal.removeEventListener("abort",P4),Mh.delete(b1),Fc.delete(b1),r4.forEach(l4=>Fc.delete(l4.key)),So.fetchers.has(b1)){let l4=getDoneFetcher(M1.data);So.fetchers.set(b1,l4)}let B2=findRedirect(A4);if(B2)return c2(O1,B2.result,!1,{preventScrollReset:L2});if(B2=findRedirect(Y2),B2)return cf.add(B2.key),c2(O1,B2.result,!1,{preventScrollReset:L2});let{loaderData:d4,errors:Z2}=processLoaderData(So,S2,A4,void 0,r4,Y2);i2(U2),So.navigation.state==="loading"&&U2>qc?(invariant$2(Do,"Expected pending action"),Ko&&Ko.abort(),b2(So.navigation.location,{matches:S2,loaderData:d4,errors:Z2,fetchers:new Map(So.fetchers)})):(A2({errors:Z2,loaderData:mergeLoaderData(So.loaderData,d4,S2,Z2),fetchers:new Map(So.fetchers)}),yh=!1)}async function B1(b1,k1,V1,n2,y2,Z1,T2,L2,uf){let Qp=So.fetchers.get(b1);o1(b1,getLoadingFetcher(uf,Qp?Qp.data:void 0),{flushSync:T2});let gf=new AbortController,Ym=createClientSideRequest(t.history,V1,gf.signal);if(Z1){let L1=await j2(n2,new URL(Ym.url).pathname,Ym.signal,b1);if(L1.type==="aborted")return;if(L1.type==="error"){e1(b1,k1,L1.error,{flushSync:T2});return}else if(L1.matches)n2=L1.matches;else{e1(b1,k1,getInternalRouterError(404,{pathname:V1}),{flushSync:T2});return}}let d1=getTargetMatch(n2,V1);Fc.set(b1,gf);let r1=_h,g1=getTargetedDataStrategyMatches(o,l,Ym,n2,d1,s,y2),M1=(await H1(Ym,g1,y2,b1))[d1.route.id];if(Fc.get(b1)===gf&&Fc.delete(b1),!Ym.signal.aborted){if(s1.has(b1)){o1(b1,getDoneFetcher(void 0));return}if(isRedirectResult(M1))if(qc>r1){o1(b1,getDoneFetcher(void 0));return}else{cf.add(b1),await c2(Ym,M1,!1,{preventScrollReset:L2});return}if(isErrorResult(M1)){e1(b1,k1,M1.error);return}o1(b1,getDoneFetcher(M1.data))}}async function c2(b1,k1,V1,{submission:n2,fetcherSubmission:y2,preventScrollReset:Z1,replace:T2}={}){k1.response.headers.has("X-Remix-Revalidate")&&(yh=!0);let L2=k1.response.headers.get("Location");invariant$2(L2,"Expected a Location header on the redirect Response"),L2=normalizeRedirectLocation(L2,new URL(b1.url),d);let uf=createLocation(So.location,L2,{_isRedirect:!0});if(a){let g1=!1;if(k1.response.headers.has("X-Remix-Reload-Document"))g1=!0;else if(isAbsoluteUrl(L2)){const R1=createBrowserURLImpl(L2,!0);g1=R1.origin!==e.location.origin||stripBasename(R1.pathname,d)==null}if(g1){T2?e.location.replace(L2):e.location.assign(L2);return}}Ko=null;let Qp=T2===!0||k1.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:gf,formAction:Ym,formEncType:d1}=So.navigation;!n2&&!y2&&gf&&Ym&&d1&&(n2=getSubmissionFromNavigation(So.navigation));let r1=n2||y2;if(redirectPreserveMethodStatusCodes.has(k1.response.status)&&r1&&isMutationMethod(r1.formMethod))await U1(Qp,uf,{submission:{...r1,formAction:L2},preventScrollReset:Z1||eh,enableViewTransition:V1?Ge:void 0});else{let g1=getLoadingNavigation(uf,n2);await U1(Qp,uf,{overrideNavigation:g1,fetcherSubmission:y2,preventScrollReset:Z1||eh,enableViewTransition:V1?Ge:void 0})}}async function H1(b1,k1,V1,n2){let y2,Z1={};try{y2=await callDataStrategyImpl(m,b1,k1,n2,V1,!1)}catch(T2){return k1.filter(L2=>L2.shouldLoad).forEach(L2=>{Z1[L2.route.id]={type:"error",error:T2}}),Z1}if(b1.signal.aborted)return Z1;for(let[T2,L2]of Object.entries(y2))if(isRedirectDataStrategyResult(L2)){let uf=L2.result;Z1[T2]={type:"redirect",response:normalizeRelativeRoutingRedirectResponse(uf,b1,T2,k1,d)}}else Z1[T2]=await convertDataStrategyResultToDataResult(L2);return Z1}async function x1(b1,k1,V1,n2){let y2=H1(V1,b1,n2,null),Z1=Promise.all(k1.map(async uf=>{if(uf.matches&&uf.match&&uf.request&&uf.controller){let gf=(await H1(uf.request,uf.matches,n2,uf.key))[uf.match.route.id];return{[uf.key]:gf}}else return Promise.resolve({[uf.key]:{type:"error",error:getInternalRouterError(404,{pathname:uf.path})}})})),T2=await y2,L2=(await Z1).reduce((uf,Qp)=>Object.assign(uf,Qp),{});return{loaderResults:T2,fetcherResults:L2}}function pf(){yh=!0,mf.forEach((b1,k1)=>{Fc.has(k1)&&df.add(k1),N1(k1)})}function o1(b1,k1,V1={}){So.fetchers.set(b1,k1),A2({fetchers:new Map(So.fetchers)},{flushSync:(V1&&V1.flushSync)===!0})}function e1(b1,k1,V1,n2={}){let y2=findNearestBoundary(So.matches,k1);C1(b1),A2({errors:{[y2.route.id]:V1},fetchers:new Map(So.fetchers)},{flushSync:(n2&&n2.flushSync)===!0})}function w1(b1){return a1.set(b1,(a1.get(b1)||0)+1),s1.has(b1)&&s1.delete(b1),So.fetchers.get(b1)||IDLE_FETCHER}function C1(b1){let k1=So.fetchers.get(b1);Fc.has(b1)&&!(k1&&k1.state==="loading"&&Mh.has(b1))&&N1(b1),mf.delete(b1),Mh.delete(b1),cf.delete(b1),s1.delete(b1),df.delete(b1),So.fetchers.delete(b1)}function F1(b1){let k1=(a1.get(b1)||0)-1;k1<=0?(a1.delete(b1),s1.add(b1)):a1.set(b1,k1),A2({fetchers:new Map(So.fetchers)})}function N1(b1){let k1=Fc.get(b1);k1&&(k1.abort(),Fc.delete(b1))}function v1(b1){for(let k1 of b1){let V1=w1(k1),n2=getDoneFetcher(V1.data);So.fetchers.set(k1,n2)}}function X1(){let b1=[],k1=!1;for(let V1 of cf){let n2=So.fetchers.get(V1);invariant$2(n2,`Expected fetcher: ${V1}`),n2.state==="loading"&&(cf.delete(V1),b1.push(V1),k1=!0)}return v1(b1),k1}function i2(b1){let k1=[];for(let[V1,n2]of Mh)if(n2<b1){let y2=So.fetchers.get(V1);invariant$2(y2,`Expected fetcher: ${V1}`),y2.state==="loading"&&(N1(V1),Mh.delete(V1),k1.push(V1))}return v1(k1),k1.length>0}function f2(b1,k1){let V1=So.blockers.get(b1)||IDLE_BLOCKER;return E1.get(b1)!==k1&&E1.set(b1,k1),V1}function Y1(b1){So.blockers.delete(b1),E1.delete(b1)}function l2(b1,k1){let V1=So.blockers.get(b1)||IDLE_BLOCKER;invariant$2(V1.state==="unblocked"&&k1.state==="blocked"||V1.state==="blocked"&&k1.state==="blocked"||V1.state==="blocked"&&k1.state==="proceeding"||V1.state==="blocked"&&k1.state==="unblocked"||V1.state==="proceeding"&&k1.state==="unblocked",`Invalid blocker state transition: ${V1.state} -> ${k1.state}`);let n2=new Map(So.blockers);n2.set(b1,k1),A2({blockers:n2})}function Q1({currentLocation:b1,nextLocation:k1,historyAction:V1}){if(E1.size===0)return;E1.size>1&&warning$1(!1,"A router only supports one blocker at a time");let n2=Array.from(E1.entries()),[y2,Z1]=n2[n2.length-1],T2=So.blockers.get(y2);if(!(T2&&T2.state==="proceeding")&&Z1({currentLocation:b1,nextLocation:k1,historyAction:V1}))return y2}function G1(b1){let k1=getInternalRouterError(404,{pathname:b1}),V1=c||u,{matches:n2,route:y2}=getShortCircuitMatches(V1);return{notFoundMatches:n2,route:y2,error:k1}}function P2(b1,k1,V1){if(W=b1,ve=k1,me=V1||null,!He&&So.navigation===IDLE_NAVIGATION){He=!0;let n2=z2(So.location,So.matches);n2!=null&&A2({restoreScrollPosition:n2})}return()=>{W=null,ve=null,me=null}}function J1(b1,k1){return me&&me(b1,k1.map(n2=>convertRouteMatchToUiMatch(n2,So.loaderData)))||b1.key}function v2(b1,k1){if(W&&ve){let V1=J1(b1,k1);W[V1]=ve()}}function z2(b1,k1){if(W){let V1=J1(b1,k1),n2=W[V1];if(typeof n2=="number")return n2}return null}function q2(b1,k1,V1){if(t.patchRoutesOnNavigation)if(b1){if(Object.keys(b1[0].params).length>0)return{active:!0,matches:matchRoutesImpl(k1,V1,d,!0)}}else return{active:!0,matches:matchRoutesImpl(k1,V1,d,!0)||[]};return{active:!1,matches:null}}async function j2(b1,k1,V1,n2){if(!t.patchRoutesOnNavigation)return{type:"success",matches:b1};let y2=b1;for(;;){let Z1=c==null,T2=c||u,L2=l;try{await t.patchRoutesOnNavigation({signal:V1,path:k1,matches:y2,fetcherKey:n2,patch:(gf,Ym)=>{V1.aborted||patchRoutesImpl(gf,Ym,T2,L2,o,!1)}})}catch(gf){return{type:"error",error:gf,partialMatches:y2}}finally{Z1&&!V1.aborted&&(u=[...u])}if(V1.aborted)return{type:"aborted"};let uf=matchRoutes(T2,k1,d);if(uf)return{type:"success",matches:uf};let Qp=matchRoutesImpl(T2,k1,d,!0);if(!Qp||y2.length===Qp.length&&y2.every((gf,Ym)=>gf.route.id===Qp[Ym].route.id))return{type:"success",matches:null};y2=Qp}}function n4(b1){l={},c=convertRoutesToDataRoutes(b1,o,void 0,l)}function X2(b1,k1,V1=!1){let n2=c==null;patchRoutesImpl(b1,k1,c||u,l,o,V1),n2&&(u=[...u],A2({}))}return Vc={get basename(){return d},get future(){return g},get state(){return So},get routes(){return u},get window(){return e},initialize:W1,subscribe:C2,enableScrollRestoration:P2,navigate:_2,fetch:D1,revalidate:q1,createHref:b1=>t.history.createHref(b1),encodeLocation:b1=>t.history.encodeLocation(b1),getFetcher:w1,deleteFetcher:F1,dispose:m2,getBlocker:f2,deleteBlocker:Y1,patchRoutes:X2,_internalFetchControllers:Fc,_internalSetRoutes:n4,_internalSetStateDoNotUseOrYouWillBreakYourApp(b1){A2(b1)}},Vc}function isSubmissionNavigation(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function normalizeTo(t,e,a,s,o,l){let u,c;if(o){u=[];for(let m of e)if(u.push(m),m.route.id===o){c=m;break}}else u=e,c=e[e.length-1];let d=resolveTo(s||".",getResolveToMatches(u),stripBasename(t.pathname,a)||t.pathname,l==="path");if(s==null&&(d.search=t.search,d.hash=t.hash),(s==null||s===""||s===".")&&c){let m=hasNakedIndexQuery(d.search);if(c.route.index&&!m)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&m){let g=new URLSearchParams(d.search),A=g.getAll("index");g.delete("index"),A.filter(W=>W).forEach(W=>g.append("index",W));let P=g.toString();d.search=P?`?${P}`:""}}return a!=="/"&&(d.pathname=prependBasename({basename:a,pathname:d.pathname})),createPath(d)}function normalizeNavigateOptions(t,e,a){if(!a||!isSubmissionNavigation(a))return{path:e};if(a.formMethod&&!isValidMethod(a.formMethod))return{path:e,error:getInternalRouterError(405,{method:a.formMethod})};let s=()=>({path:e,error:getInternalRouterError(400,{type:"invalid-body"})}),l=(a.formMethod||"get").toUpperCase(),u=stripHashFromPath(e);if(a.body!==void 0){if(a.formEncType==="text/plain"){if(!isMutationMethod(l))return s();let A=typeof a.body=="string"?a.body:a.body instanceof FormData||a.body instanceof URLSearchParams?Array.from(a.body.entries()).reduce((P,[W,me])=>`${P}${W}=${me}
`,""):String(a.body);return{path:e,submission:{formMethod:l,formAction:u,formEncType:a.formEncType,formData:void 0,json:void 0,text:A}}}else if(a.formEncType==="application/json"){if(!isMutationMethod(l))return s();try{let A=typeof a.body=="string"?JSON.parse(a.body):a.body;return{path:e,submission:{formMethod:l,formAction:u,formEncType:a.formEncType,formData:void 0,json:A,text:void 0}}}catch{return s()}}}invariant$2(typeof FormData=="function","FormData is not available in this environment");let c,d;if(a.formData)c=convertFormDataToSearchParams(a.formData),d=a.formData;else if(a.body instanceof FormData)c=convertFormDataToSearchParams(a.body),d=a.body;else if(a.body instanceof URLSearchParams)c=a.body,d=convertSearchParamsToFormData(c);else if(a.body==null)c=new URLSearchParams,d=new FormData;else try{c=new URLSearchParams(a.body),d=convertSearchParamsToFormData(c)}catch{return s()}let m={formMethod:l,formAction:u,formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(isMutationMethod(m.formMethod))return{path:e,submission:m};let g=parsePath(e);return t&&g.search&&hasNakedIndexQuery(g.search)&&c.append("index",""),g.search=`?${c}`,{path:createPath(g),submission:m}}function getMatchesToLoad(t,e,a,s,o,l,u,c,d,m,g,A,P,W,me,ve,He,De,Xe,qe){let Rs=qe?isErrorResult(qe[1])?qe[1].error:qe[1].data:void 0,Vc=o.createURL(l.location),So=o.createURL(d),Do;if(g&&l.errors){let Bs=Object.keys(l.errors)[0];Do=u.findIndex(yh=>yh.route.id===Bs)}else if(qe&&isErrorResult(qe[1])){let Bs=qe[0];Do=u.findIndex(yh=>yh.route.id===Bs)-1}let eh=qe?qe[1].statusCode:void 0,Ko=eh&&eh>=400,Ge={currentUrl:Vc,currentParams:l.matches[0]?.params||{},nextUrl:So,nextParams:u[0].params,...c,actionResult:Rs,actionStatus:eh},An=u.map((Bs,yh)=>{let{route:df}=Bs,Fc=null;if(Do!=null&&yh>Do?Fc=!1:df.lazy?Fc=!0:df.loader==null?Fc=!1:g?Fc=shouldLoadRouteOnHydration(df,l.loaderData,l.errors):isNewLoader(l.loaderData,l.matches[yh],Bs)&&(Fc=!0),Fc!==null)return getDataStrategyMatch(a,s,t,Bs,m,e,Fc);let _h=Ko?!1:A||Vc.pathname+Vc.search===So.pathname+So.search||Vc.search!==So.search||isNewRouteInstance(l.matches[yh],Bs),qc={...Ge,defaultShouldRevalidate:_h},Mh=shouldRevalidateLoader(Bs,qc);return getDataStrategyMatch(a,s,t,Bs,m,e,Mh,qc)}),wt=[];return me.forEach((Bs,yh)=>{if(g||!u.some(a1=>a1.route.id===Bs.routeId)||W.has(yh))return;let df=l.fetchers.get(yh),Fc=df&&df.state!=="idle"&&df.data===void 0,_h=matchRoutes(He,Bs.path,De);if(!_h){if(Xe&&Fc)return;wt.push({key:yh,routeId:Bs.routeId,path:Bs.path,matches:null,match:null,request:null,controller:null});return}if(ve.has(yh))return;let qc=getTargetMatch(_h,Bs.path),Mh=new AbortController,cf=createClientSideRequest(o,Bs.path,Mh.signal),mf=null;if(P.has(yh))P.delete(yh),mf=getTargetedDataStrategyMatches(a,s,cf,_h,qc,m,e);else if(Fc)A&&(mf=getTargetedDataStrategyMatches(a,s,cf,_h,qc,m,e));else{let a1={...Ge,defaultShouldRevalidate:Ko?!1:A};shouldRevalidateLoader(qc,a1)&&(mf=getTargetedDataStrategyMatches(a,s,cf,_h,qc,m,e,a1))}mf&&wt.push({key:yh,routeId:Bs.routeId,path:Bs.path,matches:mf,match:qc,request:cf,controller:Mh})}),{dsMatches:An,revalidatingFetchers:wt}}function shouldLoadRouteOnHydration(t,e,a){if(t.lazy)return!0;if(!t.loader)return!1;let s=e!=null&&t.id in e,o=a!=null&&a[t.id]!==void 0;return!s&&o?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!s&&!o}function isNewLoader(t,e,a){let s=!e||a.route.id!==e.route.id,o=!t.hasOwnProperty(a.route.id);return s||o}function isNewRouteInstance(t,e){let a=t.route.path;return t.pathname!==e.pathname||a!=null&&a.endsWith("*")&&t.params["*"]!==e.params["*"]}function shouldRevalidateLoader(t,e){if(t.route.shouldRevalidate){let a=t.route.shouldRevalidate(e);if(typeof a=="boolean")return a}return e.defaultShouldRevalidate}function patchRoutesImpl(t,e,a,s,o,l){let u;if(t){let m=s[t];invariant$2(m,`No route found to patch children into: routeId = ${t}`),m.children||(m.children=[]),u=m.children}else u=a;let c=[],d=[];if(e.forEach(m=>{let g=u.find(A=>isSameRoute(m,A));g?d.push({existingRoute:g,newRoute:m}):c.push(m)}),c.length>0){let m=convertRoutesToDataRoutes(c,o,[t||"_","patch",String(u?.length||"0")],s);u.push(...m)}if(l&&d.length>0)for(let m=0;m<d.length;m++){let{existingRoute:g,newRoute:A}=d[m],P=g,[W]=convertRoutesToDataRoutes([A],o,[],{},!0);Object.assign(P,{element:W.element?W.element:P.element,errorElement:W.errorElement?W.errorElement:P.errorElement,hydrateFallbackElement:W.hydrateFallbackElement?W.hydrateFallbackElement:P.hydrateFallbackElement})}}function isSameRoute(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((a,s)=>e.children?.some(o=>isSameRoute(a,o))):!1}var lazyRoutePropertyCache=new WeakMap,loadLazyRouteProperty=({key:t,route:e,manifest:a,mapRouteProperties:s})=>{let o=a[e.id];if(invariant$2(o,"No route found in manifest"),!o.lazy||typeof o.lazy!="object")return;let l=o.lazy[t];if(!l)return;let u=lazyRoutePropertyCache.get(o);u||(u={},lazyRoutePropertyCache.set(o,u));let c=u[t];if(c)return c;let d=(async()=>{let m=isUnsupportedLazyRouteObjectKey(t),A=o[t]!==void 0&&t!=="hasErrorBoundary";if(m)warning$1(!m,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),u[t]=Promise.resolve();else if(A)warning$1(!1,`Route "${o.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let P=await l();P!=null&&(Object.assign(o,{[t]:P}),Object.assign(o,s(o)))}typeof o.lazy=="object"&&(o.lazy[t]=void 0,Object.values(o.lazy).every(P=>P===void 0)&&(o.lazy=void 0))})();return u[t]=d,d},lazyRouteFunctionCache=new WeakMap;function loadLazyRoute(t,e,a,s,o){let l=a[t.id];if(invariant$2(l,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let g=lazyRouteFunctionCache.get(l);if(g)return{lazyRoutePromise:g,lazyHandlerPromise:g};let A=(async()=>{invariant$2(typeof t.lazy=="function","No lazy route function found");let P=await t.lazy(),W={};for(let me in P){let ve=P[me];if(ve===void 0)continue;let He=isUnsupportedLazyRouteFunctionKey(me),Xe=l[me]!==void 0&&me!=="hasErrorBoundary";He?warning$1(!He,"Route property "+me+" is not a supported property to be returned from a lazy route function. This property will be ignored."):Xe?warning$1(!Xe,`Route "${l.id}" has a static property "${me}" defined but its lazy function is also returning a value for this property. The lazy route property "${me}" will be ignored.`):W[me]=ve}Object.assign(l,W),Object.assign(l,{...s(l),lazy:void 0})})();return lazyRouteFunctionCache.set(l,A),A.catch(()=>{}),{lazyRoutePromise:A,lazyHandlerPromise:A}}let u=Object.keys(t.lazy),c=[],d;for(let g of u){if(o&&o.includes(g))continue;let A=loadLazyRouteProperty({key:g,route:t,manifest:a,mapRouteProperties:s});A&&(c.push(A),g===e&&(d=A))}let m=c.length>0?Promise.all(c).then(()=>{}):void 0;return m?.catch(()=>{}),d?.catch(()=>{}),{lazyRoutePromise:m,lazyHandlerPromise:d}}async function defaultDataStrategy(t){let e=t.matches.filter(o=>o.shouldLoad),a={};return(await Promise.all(e.map(o=>o.resolve()))).forEach((o,l)=>{a[e[l].route.id]=o}),a}async function defaultDataStrategyWithMiddleware(t){return t.matches.some(e=>e.route.unstable_middleware)?runMiddlewarePipeline(t,!1,()=>defaultDataStrategy(t),(e,a)=>({[a]:{type:"error",result:e}})):defaultDataStrategy(t)}async function runMiddlewarePipeline(t,e,a,s){let{matches:o,request:l,params:u,context:c}=t,d={handlerResult:void 0};try{let m=o.flatMap(A=>A.route.unstable_middleware?A.route.unstable_middleware.map(P=>[A.route.id,P]):[]),g=await callRouteMiddleware({request:l,params:u,context:c},m,e,d,a);return e?g:d.handlerResult}catch(m){if(!d.middlewareError)throw m;let g=await s(d.middlewareError.error,d.middlewareError.routeId);return d.handlerResult?Object.assign(d.handlerResult,g):g}}async function callRouteMiddleware(t,e,a,s,o,l=0){let{request:u}=t;if(u.signal.aborted)throw u.signal.reason?u.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${u.method} ${u.url}`);let c=e[l];if(!c)return s.handlerResult=await o(),s.handlerResult;let[d,m]=c,g=!1,A,P=async()=>{if(g)throw new Error("You may only call `next()` once per middleware");g=!0,await callRouteMiddleware(t,e,a,s,o,l+1)};try{let W=await m({request:t.request,params:t.params,context:t.context},P);return g?W===void 0?A:W:P()}catch(W){throw s.middlewareError?s.middlewareError.error!==W&&(s.middlewareError={routeId:d,error:W}):s.middlewareError={routeId:d,error:W},W}}function getDataStrategyMatchLazyPromises(t,e,a,s,o){let l=loadLazyRouteProperty({key:"unstable_middleware",route:s.route,manifest:e,mapRouteProperties:t}),u=loadLazyRoute(s.route,isMutationMethod(a.method)?"action":"loader",e,t,o);return{middleware:l,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function getDataStrategyMatch(t,e,a,s,o,l,u,c=null){let d=!1,m=getDataStrategyMatchLazyPromises(t,e,a,s,o);return{...s,_lazyPromises:m,shouldLoad:u,unstable_shouldRevalidateArgs:c,unstable_shouldCallHandler(g){return d=!0,c?typeof g=="boolean"?shouldRevalidateLoader(s,{...c,defaultShouldRevalidate:g}):shouldRevalidateLoader(s,c):u},resolve(g){return d||u||g&&!isMutationMethod(a.method)&&(s.route.lazy||s.route.loader)?callLoaderOrAction({request:a,match:s,lazyHandlerPromise:m?.handler,lazyRoutePromise:m?.route,handlerOverride:g,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function getTargetedDataStrategyMatches(t,e,a,s,o,l,u,c=null){return s.map(d=>d.route.id!==o.route.id?{...d,shouldLoad:!1,unstable_shouldRevalidateArgs:c,unstable_shouldCallHandler:()=>!1,_lazyPromises:getDataStrategyMatchLazyPromises(t,e,a,d,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:getDataStrategyMatch(t,e,a,d,l,u,!0,c))}async function callDataStrategyImpl(t,e,a,s,o,l){a.some(m=>m._lazyPromises?.middleware)&&await Promise.all(a.map(m=>m._lazyPromises?.middleware));let u={request:e,params:a[0].params,context:o,matches:a},d=await t({...u,fetcherKey:s,unstable_runClientMiddleware:m=>{let g=u;return runMiddlewarePipeline(g,!1,()=>m({...g,fetcherKey:s,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(A,P)=>({[P]:{type:"error",result:A}}))}});try{await Promise.all(a.flatMap(m=>[m._lazyPromises?.handler,m._lazyPromises?.route]))}catch{}return d}async function callLoaderOrAction({request:t,match:e,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:o,scopedContext:l}){let u,c,d=isMutationMethod(t.method),m=d?"action":"loader",g=A=>{let P,W=new Promise((He,De)=>P=De);c=()=>P(),t.signal.addEventListener("abort",c);let me=He=>typeof A!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${m}" [routeId: ${e.route.id}]`)):A({request:t,params:e.params,context:l},...He!==void 0?[He]:[]),ve=(async()=>{try{return{type:"data",result:await(o?o(De=>me(De)):me())}}catch(He){return{type:"error",result:He}}})();return Promise.race([ve,W])};try{let A=d?e.route.action:e.route.loader;if(a||s)if(A){let P,[W]=await Promise.all([g(A).catch(me=>{P=me}),a,s]);if(P!==void 0)throw P;u=W}else{await a;let P=d?e.route.action:e.route.loader;if(P)[u]=await Promise.all([g(P),s]);else if(m==="action"){let W=new URL(t.url),me=W.pathname+W.search;throw getInternalRouterError(405,{method:t.method,pathname:me,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(A)u=await g(A);else{let P=new URL(t.url),W=P.pathname+P.search;throw getInternalRouterError(404,{pathname:W})}}catch(A){return{type:"error",result:A}}finally{c&&t.signal.removeEventListener("abort",c)}return u}async function convertDataStrategyResultToDataResult(t){let{result:e,type:a}=t;if(isResponse(e)){let s;try{let o=e.headers.get("Content-Type");o&&/\bapplication\/json\b/.test(o)?e.body==null?s=null:s=await e.json():s=await e.text()}catch(o){return{type:"error",error:o}}return a==="error"?{type:"error",error:new ErrorResponseImpl(e.status,e.statusText,s),statusCode:e.status,headers:e.headers}:{type:"data",data:s,statusCode:e.status,headers:e.headers}}return a==="error"?isDataWithResponseInit(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new ErrorResponseImpl(e.init?.status||500,void 0,e.data),statusCode:isRouteErrorResponse(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:isRouteErrorResponse(e)?e.status:void 0}:isDataWithResponseInit(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function normalizeRelativeRoutingRedirectResponse(t,e,a,s,o){let l=t.headers.get("Location");if(invariant$2(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!isAbsoluteUrl(l)){let u=s.slice(0,s.findIndex(c=>c.route.id===a)+1);l=normalizeTo(new URL(e.url),u,o,l),t.headers.set("Location",l)}return t}function normalizeRedirectLocation(t,e,a){if(isAbsoluteUrl(t)){let s=t,o=s.startsWith("//")?new URL(e.protocol+s):new URL(s),l=stripBasename(o.pathname,a)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}return t}function createClientSideRequest(t,e,a,s){let o=t.createURL(stripHashFromPath(e)).toString(),l={signal:a};if(s&&isMutationMethod(s.formMethod)){let{formMethod:u,formEncType:c}=s;l.method=u.toUpperCase(),c==="application/json"?(l.headers=new Headers({"Content-Type":c}),l.body=JSON.stringify(s.json)):c==="text/plain"?l.body=s.text:c==="application/x-www-form-urlencoded"&&s.formData?l.body=convertFormDataToSearchParams(s.formData):l.body=s.formData}return new Request(o,l)}function convertFormDataToSearchParams(t){let e=new URLSearchParams;for(let[a,s]of t.entries())e.append(a,typeof s=="string"?s:s.name);return e}function convertSearchParamsToFormData(t){let e=new FormData;for(let[a,s]of t.entries())e.append(a,s);return e}function processRouteLoaderData(t,e,a,s=!1,o=!1){let l={},u=null,c,d=!1,m={},g=a&&isErrorResult(a[1])?a[1].error:void 0;return t.forEach(A=>{if(!(A.route.id in e))return;let P=A.route.id,W=e[P];if(invariant$2(!isRedirectResult(W),"Cannot handle redirect results in processLoaderData"),isErrorResult(W)){let me=W.error;if(g!==void 0&&(me=g,g=void 0),u=u||{},o)u[P]=me;else{let ve=findNearestBoundary(t,P);u[ve.route.id]==null&&(u[ve.route.id]=me)}s||(l[P]=ResetLoaderDataSymbol),d||(d=!0,c=isRouteErrorResponse(W.error)?W.error.status:500),W.headers&&(m[P]=W.headers)}else l[P]=W.data,W.statusCode&&W.statusCode!==200&&!d&&(c=W.statusCode),W.headers&&(m[P]=W.headers)}),g!==void 0&&a&&(u={[a[0]]:g},a[2]&&(l[a[2]]=void 0)),{loaderData:l,errors:u,statusCode:c||200,loaderHeaders:m}}function processLoaderData(t,e,a,s,o,l){let{loaderData:u,errors:c}=processRouteLoaderData(e,a,s);return o.filter(d=>!d.matches||d.matches.some(m=>m.shouldLoad)).forEach(d=>{let{key:m,match:g,controller:A}=d,P=l[m];if(invariant$2(P,"Did not find corresponding fetcher result"),!(A&&A.signal.aborted))if(isErrorResult(P)){let W=findNearestBoundary(t.matches,g?.route.id);c&&c[W.route.id]||(c={...c,[W.route.id]:P.error}),t.fetchers.delete(m)}else if(isRedirectResult(P))invariant$2(!1,"Unhandled fetcher revalidation redirect");else{let W=getDoneFetcher(P.data);t.fetchers.set(m,W)}}),{loaderData:u,errors:c}}function mergeLoaderData(t,e,a,s){let o=Object.entries(e).filter(([,l])=>l!==ResetLoaderDataSymbol).reduce((l,[u,c])=>(l[u]=c,l),{});for(let l of a){let u=l.route.id;if(!e.hasOwnProperty(u)&&t.hasOwnProperty(u)&&l.route.loader&&(o[u]=t[u]),s&&s.hasOwnProperty(u))break}return o}function getActionDataForCommit(t){return t?isErrorResult(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function findNearestBoundary(t,e){return(e?t.slice(0,t.findIndex(s=>s.route.id===e)+1):[...t]).reverse().find(s=>s.route.hasErrorBoundary===!0)||t[0]}function getShortCircuitMatches(t){let e=t.length===1?t[0]:t.find(a=>a.index||!a.path||a.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function getInternalRouterError(t,{pathname:e,routeId:a,method:s,type:o,message:l}={}){let u="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(u="Bad Request",s&&e&&a?c=`You made a ${s} request to "${e}" but did not provide a \`loader\` for route "${a}", so there is no way to handle the request.`:o==="invalid-body"&&(c="Unable to encode submission body")):t===403?(u="Forbidden",c=`Route "${a}" does not match URL "${e}"`):t===404?(u="Not Found",c=`No route matches URL "${e}"`):t===405&&(u="Method Not Allowed",s&&e&&a?c=`You made a ${s.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${a}", so there is no way to handle the request.`:s&&(c=`Invalid request method "${s.toUpperCase()}"`)),new ErrorResponseImpl(t||500,u,new Error(c),!0)}function findRedirect(t){let e=Object.entries(t);for(let a=e.length-1;a>=0;a--){let[s,o]=e[a];if(isRedirectResult(o))return{key:s,result:o}}}function stripHashFromPath(t){let e=typeof t=="string"?parsePath(t):t;return createPath({...e,hash:""})}function isHashChangeOnly(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function isRedirectDataStrategyResult(t){return isResponse(t.result)&&redirectStatusCodes.has(t.result.status)}function isErrorResult(t){return t.type==="error"}function isRedirectResult(t){return(t&&t.type)==="redirect"}function isDataWithResponseInit(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function isResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function isValidMethod(t){return validRequestMethods.has(t.toUpperCase())}function isMutationMethod(t){return validMutationMethods.has(t.toUpperCase())}function hasNakedIndexQuery(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function getTargetMatch(t,e){let a=typeof e=="string"?parsePath(e).search:e.search;if(t[t.length-1].route.index&&hasNakedIndexQuery(a||""))return t[t.length-1];let s=getPathContributingMatches(t);return s[s.length-1]}function getSubmissionFromNavigation(t){let{formMethod:e,formAction:a,formEncType:s,text:o,formData:l,json:u}=t;if(!(!e||!a||!s)){if(o!=null)return{formMethod:e,formAction:a,formEncType:s,formData:void 0,json:void 0,text:o};if(l!=null)return{formMethod:e,formAction:a,formEncType:s,formData:l,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:a,formEncType:s,formData:void 0,json:u,text:void 0}}}function getLoadingNavigation(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function getLoadingFetcher(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function getSubmittingFetcher(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function getDoneFetcher(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function restoreAppliedTransitions(t,e){try{let a=t.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(a){let s=JSON.parse(a);for(let[o,l]of Object.entries(s||{}))l&&Array.isArray(l)&&e.set(o,new Set(l||[]))}}catch{}}function persistAppliedTransitions(t,e){if(e.size>0){let a={};for(let[s,o]of e)a[s]=[...o];try{t.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(a))}catch(s){warning$1(!1,`Failed to save applied view transitions in sessionStorage (${s}).`)}}}function createDeferred(){let t,e,a=new Promise((s,o)=>{t=async l=>{s(l);try{await a}catch{}},e=async l=>{o(l);try{await a}catch{}}});return{promise:a,resolve:t,reject:e}}var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(t,{relative:e}={}){invariant$2(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=reactExports.useContext(NavigationContext),{hash:o,pathname:l,search:u}=useResolvedPath(t,{relative:e}),c=l;return a!=="/"&&(c=l==="/"?a:joinPaths([a,l])),s.createHref({pathname:c,search:u,hash:o})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$2(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$2(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:a}=reactExports.useContext(NavigationContext),{matches:s}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),l=JSON.stringify(getResolveToMatches(s)),u=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{u.current=!0}),reactExports.useCallback((d,m={})=>{if(warning$1(u.current,navigateEffectWarning),!u.current)return;if(typeof d=="number"){a.go(d);return}let g=resolveTo(d,JSON.parse(l),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:joinPaths([e,g.pathname])),(m.replace?a.replace:a.push)(g,m.state,m)},[e,a,l,o,t])}reactExports.createContext(null);function useParams(){let{matches:t}=reactExports.useContext(RouteContext),e=t[t.length-1];return e?e.params:{}}function useResolvedPath(t,{relative:e}={}){let{matches:a}=reactExports.useContext(RouteContext),{pathname:s}=useLocation(),o=JSON.stringify(getResolveToMatches(a));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(o),s,e==="path"),[t,o,s,e])}function useRoutesImpl(t,e,a,s){invariant$2(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=reactExports.useContext(NavigationContext),{matches:l}=reactExports.useContext(RouteContext),u=l[l.length-1],c=u?u.params:{},d=u?u.pathname:"/",m=u?u.pathnameBase:"/",g=u&&u.route;{let De=g&&g.path||"";warningOnce(d,!g||De.endsWith("*")||De.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${De}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${De}"> to <Route path="${De==="/"?"*":`${De}/*`}">.`)}let A=useLocation(),P;P=A;let W=P.pathname||"/",me=W;if(m!=="/"){let De=m.replace(/^\//,"").split("/");me="/"+W.replace(/^\//,"").split("/").slice(De.length).join("/")}let ve=matchRoutes(t,{pathname:me});return warning$1(g||ve!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),warning$1(ve==null||ve[ve.length-1].route.element!==void 0||ve[ve.length-1].route.Component!==void 0||ve[ve.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(ve&&ve.map(De=>Object.assign({},De,{params:Object.assign({},c,De.params),pathname:joinPaths([m,o.encodeLocation?o.encodeLocation(De.pathname).pathname:De.pathname]),pathnameBase:De.pathnameBase==="/"?m:joinPaths([m,o.encodeLocation?o.encodeLocation(De.pathnameBase).pathname:De.pathnameBase])})),l,a,s)}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:l},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:l},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),a?reactExports.createElement("pre",{style:o},a):null,u)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:t,match:e,children:a}){let s=reactExports.useContext(DataRouterContext);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:t},a)}function _renderMatches(t,e=[],a=null,s=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(e.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let o=t,l=a?.errors;if(l!=null){let d=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);invariant$2(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(a)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=d),m.route.id){let{loaderData:g,errors:A}=a,P=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!A||A[m.route.id]===void 0);if(m.route.lazy||P){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,m,g)=>{let A,P=!1,W=null,me=null;a&&(A=l&&m.route.id?l[m.route.id]:void 0,W=m.route.errorElement||defaultErrorElement,u&&(c<0&&g===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,me=null):c===g&&(P=!0,me=m.route.hydrateFallbackElement||null)));let ve=e.concat(o.slice(0,g+1)),He=()=>{let De;return A?De=W:P?De=me:m.route.Component?De=reactExports.createElement(m.route.Component,null):m.route.element?De=m.route.element:De=d,reactExports.createElement(RenderedRoute,{match:m,routeContext:{outlet:d,matches:ve,isDataRoute:a!=null},children:De})};return a&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?reactExports.createElement(RenderErrorBoundary,{location:a.location,revalidation:a.revalidation,component:W,error:A,children:He(),routeContext:{outlet:null,matches:ve,isDataRoute:!0}}):He()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return invariant$2(e,getDataRouterConsoleError(t)),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return invariant$2(e,getDataRouterConsoleError(t)),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return invariant$2(e,getDataRouterConsoleError(t)),e}function useCurrentRouteId(t){let e=useRouteContext(t),a=e.matches[e.matches.length-1];return invariant$2(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let t=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),a=useCurrentRouteId("useRouteError");return t!==void 0?t:e.errors?.[a]}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),a=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{a.current=!0}),reactExports.useCallback(async(o,l={})=>{warning$1(a.current,navigateEffectWarning),a.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...l}))},[t,e])}var alreadyWarned={};function warningOnce(t,e,a){!e&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning$1(!1,a))}var alreadyWarned2={};function warnOnce(t,e){!t&&!alreadyWarned2[e]&&(alreadyWarned2[e]=!0,console.warn(e))}function mapRouteProperties(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&warning$1(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:reactExports.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&warning$1(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:reactExports.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&warning$1(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:reactExports.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var hydrationRouteProperties=["HydrateFallback","hydrateFallbackElement"],Deferred$1=class{constructor(){this.status="pending",this.promise=new Promise((e,a)=>{this.resolve=s=>{this.status==="pending"&&(this.status="resolved",e(s))},this.reject=s=>{this.status==="pending"&&(this.status="rejected",a(s))}})}};function RouterProvider({router:t,flushSync:e}){let[a,s]=reactExports.useState(t.state),[o,l]=reactExports.useState(),[u,c]=reactExports.useState({isTransitioning:!1}),[d,m]=reactExports.useState(),[g,A]=reactExports.useState(),[P,W]=reactExports.useState(),me=reactExports.useRef(new Map),ve=reactExports.useCallback((qe,{deletedFetchers:Rs,flushSync:Vc,viewTransitionOpts:So})=>{qe.fetchers.forEach((eh,Ko)=>{eh.data!==void 0&&me.current.set(Ko,eh.data)}),Rs.forEach(eh=>me.current.delete(eh)),warnOnce(Vc===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let Do=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(warnOnce(So==null||Do,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!So||!Do){e&&Vc?e(()=>s(qe)):reactExports.startTransition(()=>s(qe));return}if(e&&Vc){e(()=>{g&&(d&&d.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:So.currentLocation,nextLocation:So.nextLocation})});let eh=t.window.document.startViewTransition(()=>{e(()=>s(qe))});eh.finished.finally(()=>{e(()=>{m(void 0),A(void 0),l(void 0),c({isTransitioning:!1})})}),e(()=>A(eh));return}g?(d&&d.resolve(),g.skipTransition(),W({state:qe,currentLocation:So.currentLocation,nextLocation:So.nextLocation})):(l(qe),c({isTransitioning:!0,flushSync:!1,currentLocation:So.currentLocation,nextLocation:So.nextLocation}))},[t.window,e,g,d]);reactExports.useLayoutEffect(()=>t.subscribe(ve),[t,ve]),reactExports.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new Deferred$1)},[u]),reactExports.useEffect(()=>{if(d&&o&&t.window){let qe=o,Rs=d.promise,Vc=t.window.document.startViewTransition(async()=>{reactExports.startTransition(()=>s(qe)),await Rs});Vc.finished.finally(()=>{m(void 0),A(void 0),l(void 0),c({isTransitioning:!1})}),A(Vc)}},[o,d,t.window]),reactExports.useEffect(()=>{d&&o&&a.location.key===o.location.key&&d.resolve()},[d,g,a.location,o]),reactExports.useEffect(()=>{!u.isTransitioning&&P&&(l(P.state),c({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}),W(void 0))},[u.isTransitioning,P]);let He=reactExports.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:qe=>t.navigate(qe),push:(qe,Rs,Vc)=>t.navigate(qe,{state:Rs,preventScrollReset:Vc?.preventScrollReset}),replace:(qe,Rs,Vc)=>t.navigate(qe,{replace:!0,state:Rs,preventScrollReset:Vc?.preventScrollReset})}),[t]),De=t.basename||"/",Xe=reactExports.useMemo(()=>({router:t,navigator:He,static:!1,basename:De}),[t,He,De]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:Xe},reactExports.createElement(DataRouterStateContext.Provider,{value:a},reactExports.createElement(FetchersContext.Provider,{value:me.current},reactExports.createElement(ViewTransitionContext.Provider,{value:u},reactExports.createElement(Router,{basename:De,location:a.location,navigationType:a.historyAction,navigator:He},reactExports.createElement(MemoizedDataRoutes,{routes:t.routes,future:t.future,state:a})))))),null)}var MemoizedDataRoutes=reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:e,state:a}){return useRoutesImpl(t,void 0,a,e)}function Navigate({to:t,replace:e,state:a,relative:s}){invariant$2(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=reactExports.useContext(NavigationContext);warning$1(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=reactExports.useContext(RouteContext),{pathname:u}=useLocation(),c=useNavigate(),d=resolveTo(t,getResolveToMatches(l),u,s==="path"),m=JSON.stringify(d);return reactExports.useEffect(()=>{c(JSON.parse(m),{replace:e,state:a,relative:s})},[c,m,s,e,a]),null}function Router({basename:t="/",children:e=null,location:a,navigationType:s="POP",navigator:o,static:l=!1}){invariant$2(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),c=reactExports.useMemo(()=>({basename:u,navigator:o,static:l,future:{}}),[u,o,l]);typeof a=="string"&&(a=parsePath(a));let{pathname:d="/",search:m="",hash:g="",state:A=null,key:P="default"}=a,W=reactExports.useMemo(()=>{let me=stripBasename(d,u);return me==null?null:{location:{pathname:me,search:m,hash:g,state:A,key:P},navigationType:s}},[u,d,m,g,A,P,s]);return warning$1(W!=null,`<Router basename="${u}"> is not able to match the URL "${d}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:reactExports.createElement(NavigationContext.Provider,{value:c},reactExports.createElement(LocationContext.Provider,{children:e,value:W}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return t!=null&&typeof t.tagName=="string"}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning$1(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,e){let a,s,o,l,u;if(isFormElement(t)){let c=t.getAttribute("action");s=c?stripBasename(c,e):null,a=t.getAttribute("method")||defaultMethod,o=getFormEncType(t.getAttribute("enctype"))||defaultEncType,l=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||c.getAttribute("action");if(s=d?stripBasename(d,e):null,a=t.getAttribute("formmethod")||c.getAttribute("method")||defaultMethod,o=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(c.getAttribute("enctype"))||defaultEncType,l=new FormData(c,t),!isFormDataSubmitterSupported()){let{name:m,type:g,value:A}=t;if(g==="image"){let P=m?`${m}.`:"";l.append(`${P}x`,"0"),l.append(`${P}y`,"0")}else m&&l.append(m,A)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=defaultMethod,s=null,o=defaultEncType,u=t}return l&&o==="text/plain"&&(u=l,l=void 0),{action:s,method:a.toLowerCase(),encType:o,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function singleFetchUrl(t,e,a){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${a}`:e&&stripBasename(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function loadRouteModule(t,e){if(t.id in e)return e[t.id];try{let a=await import(t.module);return e[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,e,a){let s=await Promise.all(t.map(async o=>{let l=e.routes[o.route.id];if(l){let u=await loadRouteModule(l,a);return u.links?u.links():[]}return[]}));return dedupeLinkDescriptors(s.flat(1).filter(isHtmlLinkDescriptor).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function getNewMatchesForLinks(t,e,a,s,o,l){let u=(d,m)=>a[m]?d.route.id!==a[m].route.id:!0,c=(d,m)=>a[m].pathname!==d.pathname||a[m].route.path?.endsWith("*")&&a[m].params["*"]!==d.params["*"];return l==="assets"?e.filter((d,m)=>u(d,m)||c(d,m)):l==="data"?e.filter((d,m)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(u(d,m)||c(d,m))return!0;if(d.route.shouldRevalidate){let A=d.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function getModuleLinkHrefs(t,e,{includeHydrateFallback:a}={}){return dedupeHrefs(t.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),a&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let e={},a=Object.keys(t).sort();for(let s of a)e[s]=t[s];return e}function dedupeLinkDescriptors(t,e){let a=new Set;return new Set(e),t.reduce((s,o)=>{let l=JSON.stringify(sortKeys(o));return a.has(l)||(a.add(l),s.push({key:l,link:o})),s},[])}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,e){let a=reactExports.useContext(FrameworkContext),[s,o]=reactExports.useState(!1),[l,u]=reactExports.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:A}=e,P=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let ve=De=>{De.forEach(Xe=>{u(Xe.isIntersecting)})},He=new IntersectionObserver(ve,{threshold:.5});return P.current&&He.observe(P.current),()=>{He.disconnect()}}},[t]),reactExports.useEffect(()=>{if(s){let ve=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(ve)}}},[s]);let W=()=>{o(!0)},me=()=>{o(!1),u(!1)};return a?t!=="intent"?[l,P,{}]:[l,P,{onFocus:composeEventHandlers(c,W),onBlur:composeEventHandlers(d,me),onMouseEnter:composeEventHandlers(m,W),onMouseLeave:composeEventHandlers(g,me),onTouchStart:composeEventHandlers(A,W)}]:[!1,P,{}]}function composeEventHandlers(t,e){return a=>{t&&t(a),a.defaultPrevented||e(a)}}function PrefetchPageLinks({page:t,...e}){let{router:a}=useDataRouterContext2(),s=reactExports.useMemo(()=>matchRoutes(a.routes,t,a.basename),[a.routes,t,a.basename]);return s?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:s,...e}):null}function useKeyedPrefetchLinks(t){let{manifest:e,routeModules:a}=useFrameworkContext(),[s,o]=reactExports.useState([]);return reactExports.useEffect(()=>{let l=!1;return getKeyedPrefetchLinks(t,e,a).then(u=>{l||o(u)}),()=>{l=!0}},[t,e,a]),s}function PrefetchPageLinksImpl({page:t,matches:e,...a}){let s=useLocation(),{manifest:o,routeModules:l}=useFrameworkContext(),{basename:u}=useDataRouterContext2(),{loaderData:c,matches:d}=useDataRouterStateContext(),m=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,d,o,s,"data"),[t,e,d,o,s]),g=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,d,o,s,"assets"),[t,e,d,o,s]),A=reactExports.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let me=new Set,ve=!1;if(e.forEach(De=>{let Xe=o.routes[De.route.id];!Xe||!Xe.hasLoader||(!m.some(qe=>qe.route.id===De.route.id)&&De.route.id in c&&l[De.route.id]?.shouldRevalidate||Xe.hasClientLoader?ve=!0:me.add(De.route.id))}),me.size===0)return[];let He=singleFetchUrl(t,u,"data");return ve&&me.size>0&&He.searchParams.set("_routes",e.filter(De=>me.has(De.route.id)).map(De=>De.route.id).join(",")),[He.pathname+He.search]},[u,c,s,o,m,e,t,l]),P=reactExports.useMemo(()=>getModuleLinkHrefs(g,o),[g,o]),W=useKeyedPrefetchLinks(g);return reactExports.createElement(reactExports.Fragment,null,A.map(me=>reactExports.createElement("link",{key:me,rel:"prefetch",as:"fetch",href:me,...a})),P.map(me=>reactExports.createElement("link",{key:me,rel:"modulepreload",href:me,...a})),W.map(({key:me,link:ve})=>reactExports.createElement("link",{key:me,...ve})))}function mergeRefs$1(...t){return e=>{t.forEach(a=>{typeof a=="function"?a(e):a!=null&&(a.current=e)})}}var isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$2&&(window.__reactRouterVersion="7.7.1")}catch{}function createHashRouter(t,e){return createRouter({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:createHashHistory({window:e?.window}),hydrationData:parseHydrationData(),routes:t,mapRouteProperties,hydrationRouteProperties,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function parseHydrationData(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:deserializeErrors(t.errors)}),t}function deserializeErrors(t){if(!t)return null;let e=Object.entries(t),a={};for(let[s,o]of e)if(o&&o.__type==="RouteErrorResponse")a[s]=new ErrorResponseImpl(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let l=window[o.__subType];if(typeof l=="function")try{let u=new l(o.message);u.stack="",a[s]=u}catch{}}if(a[s]==null){let l=new Error(o.message);l.stack="",a[s]=l}}else a[s]=o;return a}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:a="render",prefetch:s="none",relative:o,reloadDocument:l,replace:u,state:c,target:d,to:m,preventScrollReset:g,viewTransition:A,...P},W){let{basename:me}=reactExports.useContext(NavigationContext),ve=typeof m=="string"&&ABSOLUTE_URL_REGEX2.test(m),He,De=!1;if(typeof m=="string"&&ve&&(He=m,isBrowser$2))try{let Ko=new URL(window.location.href),Ge=m.startsWith("//")?new URL(Ko.protocol+m):new URL(m),An=stripBasename(Ge.pathname,me);Ge.origin===Ko.origin&&An!=null?m=An+Ge.search+Ge.hash:De=!0}catch{warning$1(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Xe=useHref(m,{relative:o}),[qe,Rs,Vc]=usePrefetchBehavior(s,P),So=useLinkClickHandler(m,{replace:u,state:c,target:d,preventScrollReset:g,relative:o,viewTransition:A});function Do(Ko){e&&e(Ko),Ko.defaultPrevented||So(Ko)}let eh=reactExports.createElement("a",{...P,...Vc,href:He||Xe,onClick:De||l?e:Do,ref:mergeRefs$1(W,Rs),target:d,"data-discover":!ve&&a==="render"?"true":void 0});return qe&&!ve?reactExports.createElement(reactExports.Fragment,null,eh,reactExports.createElement(PrefetchPageLinks,{page:Xe})):eh});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:a=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:c,children:d,...m},g){let A=useResolvedPath(u,{relative:m.relative}),P=useLocation(),W=reactExports.useContext(DataRouterStateContext),{navigator:me,basename:ve}=reactExports.useContext(NavigationContext),He=W!=null&&useViewTransitionState(A)&&c===!0,De=me.encodeLocation?me.encodeLocation(A).pathname:A.pathname,Xe=P.pathname,qe=W&&W.navigation&&W.navigation.location?W.navigation.location.pathname:null;a||(Xe=Xe.toLowerCase(),qe=qe?qe.toLowerCase():null,De=De.toLowerCase()),qe&&ve&&(qe=stripBasename(qe,ve)||qe);const Rs=De!=="/"&&De.endsWith("/")?De.length-1:De.length;let Vc=Xe===De||!o&&Xe.startsWith(De)&&Xe.charAt(Rs)==="/",So=qe!=null&&(qe===De||!o&&qe.startsWith(De)&&qe.charAt(De.length)==="/"),Do={isActive:Vc,isPending:So,isTransitioning:He},eh=Vc?e:void 0,Ko;typeof s=="function"?Ko=s(Do):Ko=[s,Vc?"active":null,So?"pending":null,He?"transitioning":null].filter(Boolean).join(" ");let Ge=typeof l=="function"?l(Do):l;return reactExports.createElement(Link,{...m,"aria-current":eh,className:Ko,ref:g,style:Ge,to:u,viewTransition:c},typeof d=="function"?d(Do):d)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:e,navigate:a,reloadDocument:s,replace:o,state:l,method:u=defaultMethod,action:c,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:A,...P},W)=>{let me=useSubmit(),ve=useFormAction(c,{relative:m}),He=u.toLowerCase()==="get"?"get":"post",De=typeof c=="string"&&ABSOLUTE_URL_REGEX2.test(c),Xe=qe=>{if(d&&d(qe),qe.defaultPrevented)return;qe.preventDefault();let Rs=qe.nativeEvent.submitter,Vc=Rs?.getAttribute("formmethod")||u;me(Rs||qe.currentTarget,{fetcherKey:e,method:Vc,navigate:a,replace:o,state:l,relative:m,preventScrollReset:g,viewTransition:A})};return reactExports.createElement("form",{ref:W,method:He,action:ve,onSubmit:s?d:Xe,...P,"data-discover":!De&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let e=reactExports.useContext(DataRouterContext);return invariant$2(e,getDataRouterConsoleError2(t)),e}function useLinkClickHandler(t,{target:e,replace:a,state:s,preventScrollReset:o,relative:l,viewTransition:u}={}){let c=useNavigate(),d=useLocation(),m=useResolvedPath(t,{relative:l});return reactExports.useCallback(g=>{if(shouldProcessLinkClick(g,e)){g.preventDefault();let A=a!==void 0?a:createPath(d)===createPath(m);c(t,{replace:A,state:s,preventScrollReset:o,relative:l,viewTransition:u})}},[d,c,m,a,s,e,t,o,l,u])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),a=useRouteId();return reactExports.useCallback(async(s,o={})=>{let{action:l,method:u,encType:c,formData:d,body:m}=getFormSubmissionInfo(s,e);if(o.navigate===!1){let g=o.fetcherKey||getUniqueFetcherId();await t.fetch(g,a,o.action||l,{preventScrollReset:o.preventScrollReset,formData:d,body:m,formMethod:o.method||u,formEncType:o.encType||c,flushSync:o.flushSync})}else await t.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:d,body:m,formMethod:o.method||u,formEncType:o.encType||c,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,a])}function useFormAction(t,{relative:e}={}){let{basename:a}=reactExports.useContext(NavigationContext),s=reactExports.useContext(RouteContext);invariant$2(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...useResolvedPath(t||".",{relative:e})},u=useLocation();if(t==null){l.search=u.search;let c=new URLSearchParams(l.search),d=c.getAll("index");if(d.some(g=>g==="")){c.delete("index"),d.filter(A=>A).forEach(A=>c.append("index",A));let g=c.toString();l.search=g?`?${g}`:""}}return(!t||t===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(l.pathname=l.pathname==="/"?a:joinPaths([a,l.pathname])),createPath(l)}function useViewTransitionState(t,{relative:e}={}){let a=reactExports.useContext(ViewTransitionContext);invariant$2(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=useDataRouterContext3("useViewTransitionState"),o=useResolvedPath(t,{relative:e});if(!a.isTransitioning)return!1;let l=stripBasename(a.currentLocation.pathname,s)||a.currentLocation.pathname,u=stripBasename(a.nextLocation.pathname,s)||a.nextLocation.pathname;return matchPath(o.pathname,u)!=null||matchPath(o.pathname,l)!=null}var reactDomExports=requireReactDom();function RouterProvider2(t){return reactExports.createElement(RouterProvider,{flushSync:reactDomExports.flushSync,...t})}const crown="/assets/Rank6-Cr9dJ75F.png";var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded$2=["attr","size","title"];function _objectWithoutProperties$1(t,e){if(t==null)return{};var a=_objectWithoutPropertiesLoose$1(t,e),s,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)s=l[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function _objectWithoutPropertiesLoose$1(t,e){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;a[s]=t[s]}return a}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},_extends$9.apply(this,arguments)}function ownKeys$1(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,s)}return a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(a),!0).forEach(function(s){_defineProperty$3(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys$1(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function _defineProperty$3(t,e,a){return e=_toPropertyKey$1(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _toPropertyKey$1(t){var e=_toPrimitive$1(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$1(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tree2Element(t){return t&&t.map((e,a)=>React.createElement(e.tag,_objectSpread({key:a},e.attr),Tree2Element(e.child)))}function GenIcon(t){return e=>React.createElement(IconBase,_extends$9({attr:_objectSpread({},t.attr)},e),Tree2Element(t.child))}function IconBase(t){var e=a=>{var{attr:s,size:o,title:l}=t,u=_objectWithoutProperties$1(t,_excluded$2),c=o||a.size||"1em",d;return a.className&&(d=a.className),t.className&&(d=(d?d+" ":"")+t.className),React.createElement("svg",_extends$9({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,u,{className:d,style:_objectSpread(_objectSpread({color:t.color||a.color},a.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&React.createElement("title",null,l),t.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,a=>e(a)):e(DefaultContext)}function FaGoogle(t){return GenIcon({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(t)}const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(t){const e=[];let a=0;for(let s=0;s<t.length;s++){let o=t.charCodeAt(s);o<128?e[a++]=o:o<2048?(e[a++]=o>>6|192,e[a++]=o&63|128):(o&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++s)&1023),e[a++]=o>>18|240,e[a++]=o>>12&63|128,e[a++]=o>>6&63|128,e[a++]=o&63|128):(e[a++]=o>>12|224,e[a++]=o>>6&63|128,e[a++]=o&63|128)}return e},byteArrayToString=function(t){const e=[];let a=0,s=0;for(;a<t.length;){const o=t[a++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[a++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[a++],u=t[a++],c=t[a++],d=((o&7)<<18|(l&63)<<12|(u&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{const l=t[a++],u=t[a++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<t.length;o+=3){const l=t[o],u=o+1<t.length,c=u?t[o+1]:0,d=o+2<t.length,m=d?t[o+2]:0,g=l>>2,A=(l&3)<<4|c>>4;let P=(c&15)<<2|m>>6,W=m&63;d||(W=64,u||(P=64)),s.push(a[g],a[A],a[P],a[W])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(stringToByteArray$1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):byteArrayToString(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const a=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<t.length;){const l=a[t.charAt(o++)],c=o<t.length?a[t.charAt(o)]:0;++o;const m=o<t.length?a[t.charAt(o)]:64;++o;const A=o<t.length?a[t.charAt(o)]:64;if(++o,l==null||c==null||m==null||A==null)throw new DecodeBase64StringError;const P=l<<2|c>>4;if(s.push(P),m!==64){const W=c<<4&240|m>>2;if(s.push(W),A!==64){const me=m<<6&192|A;s.push(me)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(t){const e=stringToByteArray$1(t);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(t){return base64Encode(t).replace(/\./g,"")},base64Decode=function(t){try{return base64.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const t=define_process_env_default.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&base64Decode(t[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},getDefaultEmulatorHost=t=>getDefaults()?.emulatorHosts?.[t],getDefaultEmulatorHostnameAndPort=t=>{const e=getDefaultEmulatorHost(t);if(!e)return;const a=e.lastIndexOf(":");if(a<=0||a+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(a+1),10);return e[0]==="["?[e.substring(1,a-1),s]:[e.substring(0,a),s]},getDefaultAppConfig=()=>getDefaults()?.config,getExperimentalSetting=t=>getDefaults()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}wrapCallback(e){return(a,s)=>{a?this.reject(a):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(a):e(a,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},s=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[base64urlEncodeWithoutPadding(JSON.stringify(a)),base64urlEncodeWithoutPadding(JSON.stringify(u)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const t={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?t.emulator.push(e):t.prod.push(e);return t}function getOrCreateEl(t){let e=document.getElementById(t),a=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),a=!0),{created:a,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(t,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[t]===e||emulatorStatus[t]||previouslyDismissed)return;emulatorStatus[t]=e;function a(P){return`__firebase__banner__${P}`}const s="__firebase__banner",l=getEmulatorSummary().prod.length>0;function u(){const P=document.getElementById(s);P&&P.remove()}function c(P){P.style.display="flex",P.style.background="#7faaf0",P.style.position="fixed",P.style.bottom="5px",P.style.left="5px",P.style.padding=".5em",P.style.borderRadius="5px",P.style.alignItems="center"}function d(P,W){P.setAttribute("width","24"),P.setAttribute("id",W),P.setAttribute("height","24"),P.setAttribute("viewBox","0 0 24 24"),P.setAttribute("fill","none"),P.style.marginLeft="-6px"}function m(){const P=document.createElement("span");return P.style.cursor="pointer",P.style.marginLeft="16px",P.style.fontSize="24px",P.innerHTML=" &times;",P.onclick=()=>{previouslyDismissed=!0,u()},P}function g(P,W){P.setAttribute("id",W),P.innerText="Learn more",P.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",P.setAttribute("target","__blank"),P.style.paddingLeft="5px",P.style.textDecoration="underline"}function A(){const P=getOrCreateEl(s),W=a("text"),me=document.getElementById(W)||document.createElement("span"),ve=a("learnmore"),He=document.getElementById(ve)||document.createElement("a"),De=a("preprendIcon"),Xe=document.getElementById(De)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(P.created){const qe=P.element;c(qe),g(He,ve);const Rs=m();d(Xe,De),qe.append(Xe,me,He,Rs),document.body.appendChild(qe)}l?(me.innerText="Preview backend disconnected.",Xe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Xe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,me.innerText="Preview backend running in this workspace."),me.setAttribute("id",W)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){const t=getDefaults()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const t=getUA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((t,e)=>{try{let a=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),a||self.indexedDB.deleteDatabase(s),t(!0)},o.onupgradeneeded=()=>{a=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(a){e(a)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,a,s){super(a),this.code=e,this.customData=s,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,a,s){this.service=e,this.serviceName=a,this.errors=s}create(e,...a){const s=a[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?replaceTemplate(l,s):"Error",c=`${this.serviceName}: ${u} (${o}).`;return new FirebaseError(o,c,s)}}function replaceTemplate(t,e){return t.replace(PATTERN,(a,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function deepEqual(t,e){if(t===e)return!0;const a=Object.keys(t),s=Object.keys(e);for(const o of a){if(!s.includes(o))return!1;const l=t[o],u=e[o];if(isObject$3(l)&&isObject$3(u)){if(!deepEqual(l,u))return!1}else if(l!==u)return!1}for(const o of s)if(!a.includes(o))return!1;return!0}function isObject$3(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(t){const e=[];for(const[a,s]of Object.entries(t))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(a)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(a)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function querystringDecode(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function extractQuerystring(t){const e=t.indexOf("?");if(!e)return"";const a=t.indexOf("#",e);return t.substring(e,a>0?a:void 0)}function createSubscribe(t,e){const a=new ObserverProxy(t,e);return a.subscribe.bind(a)}class ObserverProxy{constructor(e,a){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=a,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(a=>{a.next(e)})}error(e){this.forEachObserver(a=>{a.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,a,s){let o;if(e===void 0&&a===void 0&&s===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?o=e:o={next:e,error:a,complete:s},o.next===void 0&&(o.next=noop$1),o.error===void 0&&(o.error=noop$1),o.complete===void 0&&(o.complete=noop$1);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let a=0;a<this.observers.length;a++)this.sendOne(a,e)}sendOne(e,a){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{a(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(t,e){if(typeof t!="object"||t===null)return!1;for(const a of e)if(a in t&&typeof t[a]=="function")return!0;return!1}function noop$1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(t){return t&&t._delegate?t._delegate:t}class Component{constructor(e,a,s){this.name=e,this.instanceFactory=a,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,a){this.name=e,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const a=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(a)){const s=new Deferred;if(this.instancesDeferred.set(a,s),this.isInitialized(a)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:a});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(e){const a=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...e.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:a={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:a});for(const[l,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(l);s===c&&u.resolve(o)}return o}onInit(e,a){const s=this.normalizeInstanceIdentifier(a),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,a){const s=this.onInitCallbacks.get(a);if(s)for(const o of s)try{o(e,a)}catch{}}getOrInitializeService({instanceIdentifier:e,options:a={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:a}),this.instances.set(e,s),this.instancesOptions.set(e,a),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(t){return t===DEFAULT_ENTRY_NAME$1?void 0:t}function isComponentEager(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const a=this.getProvider(e.name);if(a.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);a.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const a=new Provider(e,this);return this.providers.set(e,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(t,e,...a)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),o=ConsoleMethod[e];if(o)console[o](`[${s}]  ${t.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(t,e)=>e.some(a=>t instanceof a);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(t){const e=new Promise((a,s)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{a(wrap(t.result)),o()},u=()=>{s(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(a=>{a instanceof IDBCursor&&cursorRequestMap.set(a,t)}).catch(()=>{}),reverseTransformCache.set(e,t),e}function cacheDonePromiseForTransaction(t){if(transactionDoneMap.has(t))return;const e=new Promise((a,s)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{a(),o()},u=()=>{s(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});transactionDoneMap.set(t,e)}let idbProxyTraps={get(t,e,a){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||transactionStoreNamesMap.get(t);if(e==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return wrap(t[e])},set(t,e,a){return t[e]=a,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps(t){idbProxyTraps=t(idbProxyTraps)}function wrapFunction(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...a){const s=t.call(unwrap(this),e,...a);return transactionStoreNamesMap.set(s,e.sort?e.sort():[e]),wrap(s)}:getCursorAdvanceMethods().includes(t)?function(...e){return t.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(t.apply(unwrap(this),e))}}function transformCachableValue(t){return typeof t=="function"?wrapFunction(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction(t),instanceOfAny(t,getIdbProxyableTypes())?new Proxy(t,idbProxyTraps):t)}function wrap(t){if(t instanceof IDBRequest)return promisifyRequest(t);if(transformCache.has(t))return transformCache.get(t);const e=transformCachableValue(t);return e!==t&&(transformCache.set(t,e),reverseTransformCache.set(e,t)),e}const unwrap=t=>reverseTransformCache.get(t);function openDB(t,e,{blocked:a,upgrade:s,blocking:o,terminated:l}={}){const u=indexedDB.open(t,e),c=wrap(u);return s&&u.addEventListener("upgradeneeded",d=>{s(wrap(u.result),d.oldVersion,d.newVersion,wrap(u.transaction),d)}),a&&u.addEventListener("blocked",d=>a(d.oldVersion,d.newVersion,d)),c.then(d=>{l&&d.addEventListener("close",()=>l()),o&&d.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),c}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const a=e.replace(/FromIndex$/,""),s=e!==a,o=writeMethods.includes(a);if(!(a in(s?IDBIndex:IDBObjectStore).prototype)||!(o||readMethods.includes(a)))return;const l=async function(u,...c){const d=this.transaction(u,o?"readwrite":"readonly");let m=d.store;return s&&(m=m.index(c.shift())),(await Promise.all([m[a](...c),o&&d.done]))[0]};return cachedMethods.set(e,l),l}replaceTraps(t=>({...t,get:(e,a,s)=>getMethod(e,a)||t.get(e,a,s),has:(e,a)=>!!getMethod(e,a)||t.has(e,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(isVersionServiceProvider(a)){const s=a.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(a=>a).join(" ")}}function isVersionServiceProvider(t){return t.getComponent()?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$5="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(t,e){try{t.container.addComponent(e)}catch(a){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,a)}}function _registerComponent(t){const e=t.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,t);for(const a of _apps.values())_addComponent(a,t);for(const a of _serverApps.values())_addComponent(a,t);return!0}function _getProvider(t,e){const a=t.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),t.container.getProvider(e)}function _isFirebaseServerApp(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,a,s){this._isDeleted=!1,this._options={...e},this._config={...a},this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$5;function initializeApp(t,e={}){let a=t;typeof e!="object"&&(e={name:e});const s={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ERROR_FACTORY.create("bad-app-name",{appName:String(o)});if(a||(a=getDefaultAppConfig()),!a)throw ERROR_FACTORY.create("no-options");const l=_apps.get(o);if(l){if(deepEqual(a,l.options)&&deepEqual(s,l.config))return l;throw ERROR_FACTORY.create("duplicate-app",{appName:o})}const u=new ComponentContainer(o);for(const d of _components.values())u.addComponent(d);const c=new FirebaseAppImpl(a,s,u);return _apps.set(o,c),c}function getApp(t=DEFAULT_ENTRY_NAME){const e=_apps.get(t);if(!e&&t===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:t});return e}function registerVersion(t,e,a){let s=PLATFORM_LOG_STRING[t]??t;a&&(s+=`-${a}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(u.join(" "));return}_registerComponent(new Component(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(STORE_NAME)}catch(a){console.warn(a)}}}}).catch(t=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:t.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(t){try{const a=(await getDbPromise()).transaction(STORE_NAME),s=await a.objectStore(STORE_NAME).get(computeKey(t));return await a.done,s}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const a=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e?.message});logger.warn(a.message)}}}async function writeHeartbeatsToIndexedDB(t,e){try{const s=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await s.objectStore(STORE_NAME).put(e,computeKey(t)),await s.done}catch(a){if(a instanceof FirebaseError)logger.warn(a.message);else{const s=ERROR_FACTORY.create("idb-set",{originalErrorMessage:a?.message});logger.warn(s.message)}}}function computeKey(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(a),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=getUTCDateString();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const o=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){logger.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=getUTCDateString(),{heartbeatsToSend:a,unsentEntries:s}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),o=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return logger.warn(e),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(t,e=MAX_HEADER_BYTES){const a=[];let s=t.slice();for(const o of t){const l=a.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),countBytes(a)>e){l.dates.pop();break}}else if(a.push({agent:o.agent,dates:[o.date]}),countBytes(a)>e){a.pop();break}s=s.slice(1)}return{heartbeatsToSend:a,unsentEntries:s}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await readHeartbeatsFromIndexedDB(this.app);return a?.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function countBytes(t){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}function getEarliestHeartbeatIdx(t){if(t.length===0)return-1;let e=0,a=t[0].date;for(let s=1;s<t.length;s++)t[s].date<a&&(a=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(t){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,t),registerVersion(name$q,version$1$1,"esm2020"),registerVersion("fire-js","")}registerCoreComponents("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=120*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StorageError extends FirebaseError{constructor(e,a,s=0){super(prependCode(e),`Firebase Storage: ${a} (${prependCode(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return prependCode(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(t){return"storage/"+t}function unknown(){const t="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,t)}function objectNotFound(t){return new StorageError(StorageErrorCode.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function quotaExceeded(t){return new StorageError(StorageErrorCode.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function unauthenticated(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new StorageError(StorageErrorCode.UNAUTHENTICATED,t)}function unauthorizedApp(){return new StorageError(StorageErrorCode.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function unauthorized(t){return new StorageError(StorageErrorCode.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(t){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+t+"'.")}function invalidDefaultBucket(t){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function noDefaultBucket(){return new StorageError(StorageErrorCode.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CONFIG_STORAGE_BUCKET_KEY+"' property when initializing the app?")}function cannotSliceBlob(){return new StorageError(StorageErrorCode.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function noDownloadURL(){return new StorageError(StorageErrorCode.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function missingPolyFill(t){return new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function invalidArgument(t){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,t)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(t){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function invalidFormat(t,e){return new StorageError(StorageErrorCode.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function internalError(t){throw new StorageError(StorageErrorCode.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Location{constructor(e,a){this.bucket=e,this.path_=a}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,a){let s;try{s=Location.makeFromUrl(e,a)}catch{return new Location(e,"")}if(s.path==="")return s;throw invalidDefaultBucket(e)}static makeFromUrl(e,a){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(Rs){Rs.path.charAt(Rs.path.length-1)==="/"&&(Rs.path_=Rs.path_.slice(0,-1))}const u="(/(.*))?$",c=new RegExp("^gs://"+o+u,"i"),d={bucket:1,path:3};function m(Rs){Rs.path_=decodeURIComponent(Rs.path)}const g="v[A-Za-z0-9_]+",A=a.replace(/[.]/g,"\\."),P="(/([^?#]*).*)?$",W=new RegExp(`^https?://${A}/${g}/b/${o}/o${P}`,"i"),me={bucket:1,path:3},ve=a===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":a,He="([^?#]*)",De=new RegExp(`^https?://${ve}/${o}/${He}`,"i"),qe=[{regex:c,indices:d,postModify:l},{regex:W,indices:me,postModify:m},{regex:De,indices:{bucket:1,path:2},postModify:m}];for(let Rs=0;Rs<qe.length;Rs++){const Vc=qe[Rs],So=Vc.regex.exec(e);if(So){const Do=So[Vc.indices.bucket];let eh=So[Vc.indices.path];eh||(eh=""),s=new Location(Do,eh),Vc.postModify(s);break}}if(s==null)throw invalidUrl(e);return s}}class FailRequest{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start(t,e,a){let s=1,o=null,l=null,u=!1,c=0;function d(){return c===2}let m=!1;function g(...He){m||(m=!0,e.apply(null,He))}function A(He){o=setTimeout(()=>{o=null,t(W,d())},He)}function P(){l&&clearTimeout(l)}function W(He,...De){if(m){P();return}if(He){P(),g.call(null,He,...De);return}if(d()||u){P(),g.call(null,He,...De);return}s<64&&(s*=2);let qe;c===1?(c=2,qe=0):qe=(s+Math.random())*1e3,A(qe)}let me=!1;function ve(He){me||(me=!0,P(),!m&&(o!==null?(He||(c=2),clearTimeout(o),A(0)):He||(c=1)))}return A(0),l=setTimeout(()=>{u=!0,ve(!0)},a),ve}function stop(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(t){return t!==void 0}function isNonArrayObject(t){return typeof t=="object"&&!Array.isArray(t)}function isString$2(t){return typeof t=="string"||t instanceof String}function isNativeBlob(t){return isNativeBlobDefined()&&t instanceof Blob}function isNativeBlobDefined(){return typeof Blob<"u"}function validateNumber(t,e,a,s){if(s<e)throw invalidArgument(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>a)throw invalidArgument(`Invalid value for '${t}'. Expected ${a} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function makeUrl(t,e,a){let s=e;return a==null&&(s=`https://${e}`),`${a}://${s}/v0${t}`}function makeQueryString(t){const e=encodeURIComponent;let a="?";for(const s in t)if(t.hasOwnProperty(s)){const o=e(s)+"="+e(t[s]);a=a+o+"&"}return a=a.slice(0,-1),a}var ErrorCode$1;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ErrorCode$1||(ErrorCode$1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isRetryStatusCode(t,e){const a=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return a||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NetworkRequest{constructor(e,a,s,o,l,u,c,d,m,g,A,P=!0,W=!1){this.url_=e,this.method_=a,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=c,this.errorCallback_=d,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=A,this.retry=P,this.isUsingEmulator=W,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((me,ve)=>{this.resolve_=me,this.reject_=ve,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new RequestEndStatus(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=c=>{const d=c.loaded,m=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,m)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const c=l.getErrorCode()===ErrorCode$1.NO_ERROR,d=l.getStatus();if(!c||isRetryStatusCode(d,this.additionalRetryCodes_)&&this.retry){const g=l.getErrorCode()===ErrorCode$1.ABORT;s(!1,new RequestEndStatus(!1,null,g));return}const m=this.successCodes_.indexOf(d)!==-1;s(!0,new RequestEndStatus(m,l))})},a=(s,o)=>{const l=this.resolve_,u=this.reject_,c=o.connection;if(o.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());isJustDef(d)?l(d):l()}catch(d){u(d)}else if(c!==null){const d=unknown();d.serverResponse=c.getErrorText(),this.errorCallback_?u(this.errorCallback_(c,d)):u(d)}else if(o.canceled){const d=this.appDelete_?appDeleted():canceled();u(d)}else{const d=retryLimitExceeded();u(d)}};this.canceled_?a(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(e,a,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(e,a,s){this.wasSuccessCode=e,this.connection=a,this.canceled=!!s}}function addAuthHeader_(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function addVersionHeader_(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function addGmpidHeader_(t,e){e&&(t["X-Firebase-GMPID"]=e)}function addAppCheckHeader_(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function makeRequest(t,e,a,s,o,l,u=!0,c=!1){const d=makeQueryString(t.urlParams),m=t.url+d,g=Object.assign({},t.headers);return addGmpidHeader_(g,e),addAuthHeader_(g,a),addVersionHeader_(g,l),addAppCheckHeader_(g,s),new NetworkRequest(m,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,u,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getBlobBuilder(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function getBlob$1(...t){const e=getBlobBuilder();if(e!==void 0){const a=new e;for(let s=0;s<t.length;s++)a.append(t[s]);return a.getBlob()}else{if(isNativeBlobDefined())return new Blob(t);throw new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sliceBlob(t,e,a){return t.webkitSlice?t.webkitSlice(e,a):t.mozSlice?t.mozSlice(e,a):t.slice?t.slice(e,a):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodeBase64(t){if(typeof atob>"u")throw missingPolyFill("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class StringData{constructor(e,a){this.data=e,this.contentType=a||null}}function dataFromString(t,e){switch(t){case StringFormat.RAW:return new StringData(utf8Bytes_(e));case StringFormat.BASE64:case StringFormat.BASE64URL:return new StringData(base64Bytes_(t,e));case StringFormat.DATA_URL:return new StringData(dataURLBytes_(e),dataURLContentType_(e))}throw unknown()}function utf8Bytes_(t){const e=[];for(let a=0;a<t.length;a++){let s=t.charCodeAt(a);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(a<t.length-1&&(t.charCodeAt(a+1)&64512)===56320))e.push(239,191,189);else{const l=s,u=t.charCodeAt(++a);s=65536|(l&1023)<<10|u&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function percentEncodedBytes_(t){let e;try{e=decodeURIComponent(t)}catch{throw invalidFormat(StringFormat.DATA_URL,"Malformed data URL.")}return utf8Bytes_(e)}function base64Bytes_(t,e){switch(t){case StringFormat.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw invalidFormat(t,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case StringFormat.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw invalidFormat(t,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let a;try{a=decodeBase64(e)}catch(o){throw o.message.includes("polyfill")?o:invalidFormat(t,"Invalid character found")}const s=new Uint8Array(a.length);for(let o=0;o<a.length;o++)s[o]=a.charCodeAt(o);return s}class DataURLParts{constructor(e){this.base64=!1,this.contentType=null;const a=e.match(/^data:([^,]+)?,/);if(a===null)throw invalidFormat(StringFormat.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=a[1]||null;s!=null&&(this.base64=endsWith(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function dataURLBytes_(t){const e=new DataURLParts(t);return e.base64?base64Bytes_(StringFormat.BASE64,e.rest):percentEncodedBytes_(e.rest)}function dataURLContentType_(t){return new DataURLParts(t).contentType}function endsWith(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FbsBlob{constructor(e,a){let s=0,o="";isNativeBlob(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(a?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(a?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,a){if(isNativeBlob(this.data_)){const s=this.data_,o=sliceBlob(s,e,a);return o===null?null:new FbsBlob(o)}else{const s=new Uint8Array(this.data_.buffer,e,a-e);return new FbsBlob(s,!0)}}static getBlob(...e){if(isNativeBlobDefined()){const a=e.map(s=>s instanceof FbsBlob?s.data_:s);return new FbsBlob(getBlob$1.apply(null,a))}else{const a=e.map(u=>isString$2(u)?dataFromString(StringFormat.RAW,u).data:u.data_);let s=0;a.forEach(u=>{s+=u.byteLength});const o=new Uint8Array(s);let l=0;return a.forEach(u=>{for(let c=0;c<u.length;c++)o[l++]=u[c]}),new FbsBlob(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonObjectOrNull(t){let e;try{e=JSON.parse(t)}catch{return null}return isNonArrayObject(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function child(t,e){const a=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?a:t+"/"+a}function lastComponent(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noXform_(t,e){return e}class Mapping{constructor(e,a,s,o){this.server=e,this.local=a||e,this.writable=!!s,this.xform=o||noXform_}}let mappings_=null;function xformPath(t){return!isString$2(t)||t.length<2?t:lastComponent(t)}function getMappings(){if(mappings_)return mappings_;const t=[];t.push(new Mapping("bucket")),t.push(new Mapping("generation")),t.push(new Mapping("metageneration")),t.push(new Mapping("name","fullPath",!0));function e(l,u){return xformPath(u)}const a=new Mapping("name");a.xform=e,t.push(a);function s(l,u){return u!==void 0?Number(u):u}const o=new Mapping("size");return o.xform=s,t.push(o),t.push(new Mapping("timeCreated")),t.push(new Mapping("updated")),t.push(new Mapping("md5Hash",null,!0)),t.push(new Mapping("cacheControl",null,!0)),t.push(new Mapping("contentDisposition",null,!0)),t.push(new Mapping("contentEncoding",null,!0)),t.push(new Mapping("contentLanguage",null,!0)),t.push(new Mapping("contentType",null,!0)),t.push(new Mapping("metadata","customMetadata",!0)),mappings_=t,mappings_}function addRef(t,e){function a(){const s=t.bucket,o=t.fullPath,l=new Location(s,o);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:a})}function fromResource(t,e,a){const s={};s.type="file";const o=a.length;for(let l=0;l<o;l++){const u=a[l];s[u.local]=u.xform(s,e[u.server])}return addRef(s,t),s}function fromResourceString(t,e,a){const s=jsonObjectOrNull(e);return s===null?null:fromResource(t,s,a)}function downloadUrlFromResourceString(t,e,a,s){const o=jsonObjectOrNull(e);if(o===null||!isString$2(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(m=>{const g=t.bucket,A=t.fullPath,P="/b/"+u(g)+"/o/"+u(A),W=makeUrl(P,a,s),me=makeQueryString({alt:"media",token:m});return W+me})[0]}function toResourceString(t,e){const a={},s=e.length;for(let o=0;o<s;o++){const l=e[o];l.writable&&(a[l.server]=t[l.local])}return JSON.stringify(a)}class RequestInfo{constructor(e,a,s,o){this.url=e,this.method=a,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function handlerCheck(t){if(!t)throw unknown()}function metadataHandler(t,e){function a(s,o){const l=fromResourceString(t,o,e);return handlerCheck(l!==null),l}return a}function downloadUrlHandler(t,e){function a(s,o){const l=fromResourceString(t,o,e);return handlerCheck(l!==null),downloadUrlFromResourceString(l,o,t.host,t._protocol)}return a}function sharedErrorHandler(t){function e(a,s){let o;return a.getStatus()===401?a.getErrorText().includes("Firebase App Check token is invalid")?o=unauthorizedApp():o=unauthenticated():a.getStatus()===402?o=quotaExceeded(t.bucket):a.getStatus()===403?o=unauthorized(t.path):o=s,o.status=a.getStatus(),o.serverResponse=s.serverResponse,o}return e}function objectErrorHandler(t){const e=sharedErrorHandler(t);function a(s,o){let l=e(s,o);return s.getStatus()===404&&(l=objectNotFound(t.path)),l.serverResponse=o.serverResponse,l}return a}function getDownloadUrl(t,e,a){const s=e.fullServerUrl(),o=makeUrl(s,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,c=new RequestInfo(o,l,downloadUrlHandler(t,a),u);return c.errorHandler=objectErrorHandler(e),c}function determineContentType_(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function metadataForUpload_(t,e,a){const s=Object.assign({},a);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=determineContentType_(null,e)),s}function multipartUpload(t,e,a,s,o){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function c(){let qe="";for(let Rs=0;Rs<2;Rs++)qe=qe+Math.random().toString().slice(2);return qe}const d=c();u["Content-Type"]="multipart/related; boundary="+d;const m=metadataForUpload_(e,s,o),g=toResourceString(m,a),A="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+d+`\r
Content-Type: `+m.contentType+`\r
\r
`,P=`\r
--`+d+"--",W=FbsBlob.getBlob(A,s,P);if(W===null)throw cannotSliceBlob();const me={name:m.fullPath},ve=makeUrl(l,t.host,t._protocol),He="POST",De=t.maxUploadRetryTime,Xe=new RequestInfo(ve,He,metadataHandler(t,a),De);return Xe.urlParams=me,Xe.headers=u,Xe.body=W.uploadData(),Xe.errorHandler=sharedErrorHandler(e),Xe}class XhrConnection{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ErrorCode$1.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ErrorCode$1.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ErrorCode$1.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,a,s,o,l){if(this.sent_)throw internalError("cannot .send() more than once");if(isCloudWorkstation(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(a,e,!0),l!==void 0)for(const u in l)l.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,l[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw internalError("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw internalError("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XhrTextConnection extends XhrConnection{initXhr(){this.xhr_.responseType="text"}}function newTextConnection(){return new XhrTextConnection}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(e,a){this._service=e,a instanceof Location?this._location=a:this._location=Location.makeFromUrl(a,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,a){return new Reference(e,a)}get root(){const e=new Location(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const e=parent(this._location.path);if(e===null)return null;const a=new Location(this._location.bucket,e);return new Reference(this._service,a)}_throwIfRoot(e){if(this._location.path==="")throw invalidRootOperation(e)}}function uploadBytes$1(t,e,a){t._throwIfRoot("uploadBytes");const s=multipartUpload(t.storage,t._location,getMappings(),new FbsBlob(e,!0),a);return t.storage.makeRequestWithTokens(s,newTextConnection).then(o=>({metadata:o,ref:t}))}function getDownloadURL$1(t){t._throwIfRoot("getDownloadURL");const e=getDownloadUrl(t.storage,t._location,getMappings());return t.storage.makeRequestWithTokens(e,newTextConnection).then(a=>{if(a===null)throw noDownloadURL();return a})}function _getChild$1(t,e){const a=child(t._location.path,e),s=new Location(t._location.bucket,a);return new Reference(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isUrl(t){return/^[A-Za-z]+:\/\//.test(t)}function refFromURL(t,e){return new Reference(t,e)}function refFromPath(t,e){if(t instanceof FirebaseStorageImpl){const a=t;if(a._bucket==null)throw noDefaultBucket();const s=new Reference(a,a._bucket);return e!=null?refFromPath(s,e):s}else return e!==void 0?_getChild$1(t,e):t}function ref$1(t,e){if(e&&isUrl(e)){if(t instanceof FirebaseStorageImpl)return refFromURL(t,e);throw invalidArgument("To use ref(service, url), the first argument must be a Storage instance.")}else return refFromPath(t,e)}function extractBucket(t,e){const a=e?.[CONFIG_STORAGE_BUCKET_KEY];return a==null?null:Location.makeFromBucketSpec(a,t)}function connectStorageEmulator$1(t,e,a,s={}){t.host=`${e}:${a}`;const o=isCloudWorkstation(e);o&&(pingServer(`https://${t.host}/b`),updateEmulatorBanner("Storage",!0)),t._isUsingEmulator=!0,t._protocol=o?"https":"http";const{mockUserToken:l}=s;l&&(t._overrideAuthToken=typeof l=="string"?l:createMockUserToken(l,t.app.options.projectId))}class FirebaseStorageImpl{constructor(e,a,s,o,l,u=!1){this.app=e,this._authProvider=a,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,o!=null?this._bucket=Location.makeFromBucketSpec(o,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,e):this._bucket=extractBucket(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const a=await e.getToken();if(a!==null)return a.accessToken}return null}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Reference(this,e)}_makeRequest(e,a,s,o,l=!0){if(this._deleted)return new FailRequest(appDeleted());{const u=makeRequest(e,this._appId,s,o,a,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,a){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,a,s,o).getPromise()}}const name$2="@firebase/storage",version$4="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STORAGE_TYPE="storage";function uploadBytes(t,e,a){return t=getModularInstance(t),uploadBytes$1(t,e,a)}function getDownloadURL(t){return t=getModularInstance(t),getDownloadURL$1(t)}function ref(t,e){return t=getModularInstance(t),ref$1(t,e)}function getStorage(t=getApp(),e){t=getModularInstance(t);const s=_getProvider(t,STORAGE_TYPE).getImmediate({identifier:e}),o=getDefaultEmulatorHostnameAndPort("storage");return o&&connectStorageEmulator(s,...o),s}function connectStorageEmulator(t,e,a,s={}){connectStorageEmulator$1(t,e,a,s)}function factory(t,{instanceIdentifier:e}){const a=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new FirebaseStorageImpl(a,s,o,e,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),registerVersion(name$2,version$4,""),registerVersion(name$2,version$4,"esm2020")}registerStorage();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(Do,eh){function Ko(){}Ko.prototype=eh.prototype,Do.D=eh.prototype,Do.prototype=new Ko,Do.prototype.constructor=Do,Do.C=function(Ge,An,wt){for(var Bs=Array(arguments.length-2),yh=2;yh<arguments.length;yh++)Bs[yh-2]=arguments[yh];return eh.prototype[An].apply(Ge,Bs)}}function a(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,a),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(Do,eh,Ko){Ko||(Ko=0);var Ge=Array(16);if(typeof eh=="string")for(var An=0;16>An;++An)Ge[An]=eh.charCodeAt(Ko++)|eh.charCodeAt(Ko++)<<8|eh.charCodeAt(Ko++)<<16|eh.charCodeAt(Ko++)<<24;else for(An=0;16>An;++An)Ge[An]=eh[Ko++]|eh[Ko++]<<8|eh[Ko++]<<16|eh[Ko++]<<24;eh=Do.g[0],Ko=Do.g[1],An=Do.g[2];var wt=Do.g[3],Bs=eh+(wt^Ko&(An^wt))+Ge[0]+3614090360&4294967295;eh=Ko+(Bs<<7&4294967295|Bs>>>25),Bs=wt+(An^eh&(Ko^An))+Ge[1]+3905402710&4294967295,wt=eh+(Bs<<12&4294967295|Bs>>>20),Bs=An+(Ko^wt&(eh^Ko))+Ge[2]+606105819&4294967295,An=wt+(Bs<<17&4294967295|Bs>>>15),Bs=Ko+(eh^An&(wt^eh))+Ge[3]+3250441966&4294967295,Ko=An+(Bs<<22&4294967295|Bs>>>10),Bs=eh+(wt^Ko&(An^wt))+Ge[4]+4118548399&4294967295,eh=Ko+(Bs<<7&4294967295|Bs>>>25),Bs=wt+(An^eh&(Ko^An))+Ge[5]+1200080426&4294967295,wt=eh+(Bs<<12&4294967295|Bs>>>20),Bs=An+(Ko^wt&(eh^Ko))+Ge[6]+2821735955&4294967295,An=wt+(Bs<<17&4294967295|Bs>>>15),Bs=Ko+(eh^An&(wt^eh))+Ge[7]+4249261313&4294967295,Ko=An+(Bs<<22&4294967295|Bs>>>10),Bs=eh+(wt^Ko&(An^wt))+Ge[8]+1770035416&4294967295,eh=Ko+(Bs<<7&4294967295|Bs>>>25),Bs=wt+(An^eh&(Ko^An))+Ge[9]+2336552879&4294967295,wt=eh+(Bs<<12&4294967295|Bs>>>20),Bs=An+(Ko^wt&(eh^Ko))+Ge[10]+4294925233&4294967295,An=wt+(Bs<<17&4294967295|Bs>>>15),Bs=Ko+(eh^An&(wt^eh))+Ge[11]+2304563134&4294967295,Ko=An+(Bs<<22&4294967295|Bs>>>10),Bs=eh+(wt^Ko&(An^wt))+Ge[12]+1804603682&4294967295,eh=Ko+(Bs<<7&4294967295|Bs>>>25),Bs=wt+(An^eh&(Ko^An))+Ge[13]+4254626195&4294967295,wt=eh+(Bs<<12&4294967295|Bs>>>20),Bs=An+(Ko^wt&(eh^Ko))+Ge[14]+2792965006&4294967295,An=wt+(Bs<<17&4294967295|Bs>>>15),Bs=Ko+(eh^An&(wt^eh))+Ge[15]+1236535329&4294967295,Ko=An+(Bs<<22&4294967295|Bs>>>10),Bs=eh+(An^wt&(Ko^An))+Ge[1]+4129170786&4294967295,eh=Ko+(Bs<<5&4294967295|Bs>>>27),Bs=wt+(Ko^An&(eh^Ko))+Ge[6]+3225465664&4294967295,wt=eh+(Bs<<9&4294967295|Bs>>>23),Bs=An+(eh^Ko&(wt^eh))+Ge[11]+643717713&4294967295,An=wt+(Bs<<14&4294967295|Bs>>>18),Bs=Ko+(wt^eh&(An^wt))+Ge[0]+3921069994&4294967295,Ko=An+(Bs<<20&4294967295|Bs>>>12),Bs=eh+(An^wt&(Ko^An))+Ge[5]+3593408605&4294967295,eh=Ko+(Bs<<5&4294967295|Bs>>>27),Bs=wt+(Ko^An&(eh^Ko))+Ge[10]+38016083&4294967295,wt=eh+(Bs<<9&4294967295|Bs>>>23),Bs=An+(eh^Ko&(wt^eh))+Ge[15]+3634488961&4294967295,An=wt+(Bs<<14&4294967295|Bs>>>18),Bs=Ko+(wt^eh&(An^wt))+Ge[4]+3889429448&4294967295,Ko=An+(Bs<<20&4294967295|Bs>>>12),Bs=eh+(An^wt&(Ko^An))+Ge[9]+568446438&4294967295,eh=Ko+(Bs<<5&4294967295|Bs>>>27),Bs=wt+(Ko^An&(eh^Ko))+Ge[14]+3275163606&4294967295,wt=eh+(Bs<<9&4294967295|Bs>>>23),Bs=An+(eh^Ko&(wt^eh))+Ge[3]+4107603335&4294967295,An=wt+(Bs<<14&4294967295|Bs>>>18),Bs=Ko+(wt^eh&(An^wt))+Ge[8]+1163531501&4294967295,Ko=An+(Bs<<20&4294967295|Bs>>>12),Bs=eh+(An^wt&(Ko^An))+Ge[13]+2850285829&4294967295,eh=Ko+(Bs<<5&4294967295|Bs>>>27),Bs=wt+(Ko^An&(eh^Ko))+Ge[2]+4243563512&4294967295,wt=eh+(Bs<<9&4294967295|Bs>>>23),Bs=An+(eh^Ko&(wt^eh))+Ge[7]+1735328473&4294967295,An=wt+(Bs<<14&4294967295|Bs>>>18),Bs=Ko+(wt^eh&(An^wt))+Ge[12]+2368359562&4294967295,Ko=An+(Bs<<20&4294967295|Bs>>>12),Bs=eh+(Ko^An^wt)+Ge[5]+4294588738&4294967295,eh=Ko+(Bs<<4&4294967295|Bs>>>28),Bs=wt+(eh^Ko^An)+Ge[8]+2272392833&4294967295,wt=eh+(Bs<<11&4294967295|Bs>>>21),Bs=An+(wt^eh^Ko)+Ge[11]+1839030562&4294967295,An=wt+(Bs<<16&4294967295|Bs>>>16),Bs=Ko+(An^wt^eh)+Ge[14]+4259657740&4294967295,Ko=An+(Bs<<23&4294967295|Bs>>>9),Bs=eh+(Ko^An^wt)+Ge[1]+2763975236&4294967295,eh=Ko+(Bs<<4&4294967295|Bs>>>28),Bs=wt+(eh^Ko^An)+Ge[4]+1272893353&4294967295,wt=eh+(Bs<<11&4294967295|Bs>>>21),Bs=An+(wt^eh^Ko)+Ge[7]+4139469664&4294967295,An=wt+(Bs<<16&4294967295|Bs>>>16),Bs=Ko+(An^wt^eh)+Ge[10]+3200236656&4294967295,Ko=An+(Bs<<23&4294967295|Bs>>>9),Bs=eh+(Ko^An^wt)+Ge[13]+681279174&4294967295,eh=Ko+(Bs<<4&4294967295|Bs>>>28),Bs=wt+(eh^Ko^An)+Ge[0]+3936430074&4294967295,wt=eh+(Bs<<11&4294967295|Bs>>>21),Bs=An+(wt^eh^Ko)+Ge[3]+3572445317&4294967295,An=wt+(Bs<<16&4294967295|Bs>>>16),Bs=Ko+(An^wt^eh)+Ge[6]+76029189&4294967295,Ko=An+(Bs<<23&4294967295|Bs>>>9),Bs=eh+(Ko^An^wt)+Ge[9]+3654602809&4294967295,eh=Ko+(Bs<<4&4294967295|Bs>>>28),Bs=wt+(eh^Ko^An)+Ge[12]+3873151461&4294967295,wt=eh+(Bs<<11&4294967295|Bs>>>21),Bs=An+(wt^eh^Ko)+Ge[15]+530742520&4294967295,An=wt+(Bs<<16&4294967295|Bs>>>16),Bs=Ko+(An^wt^eh)+Ge[2]+3299628645&4294967295,Ko=An+(Bs<<23&4294967295|Bs>>>9),Bs=eh+(An^(Ko|~wt))+Ge[0]+4096336452&4294967295,eh=Ko+(Bs<<6&4294967295|Bs>>>26),Bs=wt+(Ko^(eh|~An))+Ge[7]+1126891415&4294967295,wt=eh+(Bs<<10&4294967295|Bs>>>22),Bs=An+(eh^(wt|~Ko))+Ge[14]+2878612391&4294967295,An=wt+(Bs<<15&4294967295|Bs>>>17),Bs=Ko+(wt^(An|~eh))+Ge[5]+4237533241&4294967295,Ko=An+(Bs<<21&4294967295|Bs>>>11),Bs=eh+(An^(Ko|~wt))+Ge[12]+1700485571&4294967295,eh=Ko+(Bs<<6&4294967295|Bs>>>26),Bs=wt+(Ko^(eh|~An))+Ge[3]+2399980690&4294967295,wt=eh+(Bs<<10&4294967295|Bs>>>22),Bs=An+(eh^(wt|~Ko))+Ge[10]+4293915773&4294967295,An=wt+(Bs<<15&4294967295|Bs>>>17),Bs=Ko+(wt^(An|~eh))+Ge[1]+2240044497&4294967295,Ko=An+(Bs<<21&4294967295|Bs>>>11),Bs=eh+(An^(Ko|~wt))+Ge[8]+1873313359&4294967295,eh=Ko+(Bs<<6&4294967295|Bs>>>26),Bs=wt+(Ko^(eh|~An))+Ge[15]+4264355552&4294967295,wt=eh+(Bs<<10&4294967295|Bs>>>22),Bs=An+(eh^(wt|~Ko))+Ge[6]+2734768916&4294967295,An=wt+(Bs<<15&4294967295|Bs>>>17),Bs=Ko+(wt^(An|~eh))+Ge[13]+1309151649&4294967295,Ko=An+(Bs<<21&4294967295|Bs>>>11),Bs=eh+(An^(Ko|~wt))+Ge[4]+4149444226&4294967295,eh=Ko+(Bs<<6&4294967295|Bs>>>26),Bs=wt+(Ko^(eh|~An))+Ge[11]+3174756917&4294967295,wt=eh+(Bs<<10&4294967295|Bs>>>22),Bs=An+(eh^(wt|~Ko))+Ge[2]+718787259&4294967295,An=wt+(Bs<<15&4294967295|Bs>>>17),Bs=Ko+(wt^(An|~eh))+Ge[9]+3951481745&4294967295,Do.g[0]=Do.g[0]+eh&4294967295,Do.g[1]=Do.g[1]+(An+(Bs<<21&4294967295|Bs>>>11))&4294967295,Do.g[2]=Do.g[2]+An&4294967295,Do.g[3]=Do.g[3]+wt&4294967295}s.prototype.u=function(Do,eh){eh===void 0&&(eh=Do.length);for(var Ko=eh-this.blockSize,Ge=this.B,An=this.h,wt=0;wt<eh;){if(An==0)for(;wt<=Ko;)o(this,Do,wt),wt+=this.blockSize;if(typeof Do=="string"){for(;wt<eh;)if(Ge[An++]=Do.charCodeAt(wt++),An==this.blockSize){o(this,Ge),An=0;break}}else for(;wt<eh;)if(Ge[An++]=Do[wt++],An==this.blockSize){o(this,Ge),An=0;break}}this.h=An,this.o+=eh},s.prototype.v=function(){var Do=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Do[0]=128;for(var eh=1;eh<Do.length-8;++eh)Do[eh]=0;var Ko=8*this.o;for(eh=Do.length-8;eh<Do.length;++eh)Do[eh]=Ko&255,Ko/=256;for(this.u(Do),Do=Array(16),eh=Ko=0;4>eh;++eh)for(var Ge=0;32>Ge;Ge+=8)Do[Ko++]=this.g[eh]>>>Ge&255;return Do};function l(Do,eh){var Ko=c;return Object.prototype.hasOwnProperty.call(Ko,Do)?Ko[Do]:Ko[Do]=eh(Do)}function u(Do,eh){this.h=eh;for(var Ko=[],Ge=!0,An=Do.length-1;0<=An;An--){var wt=Do[An]|0;Ge&&wt==eh||(Ko[An]=wt,Ge=!1)}this.g=Ko}var c={};function d(Do){return-128<=Do&&128>Do?l(Do,function(eh){return new u([eh|0],0>eh?-1:0)}):new u([Do|0],0>Do?-1:0)}function m(Do){if(isNaN(Do)||!isFinite(Do))return A;if(0>Do)return He(m(-Do));for(var eh=[],Ko=1,Ge=0;Do>=Ko;Ge++)eh[Ge]=Do/Ko|0,Ko*=4294967296;return new u(eh,0)}function g(Do,eh){if(Do.length==0)throw Error("number format error: empty string");if(eh=eh||10,2>eh||36<eh)throw Error("radix out of range: "+eh);if(Do.charAt(0)=="-")return He(g(Do.substring(1),eh));if(0<=Do.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ko=m(Math.pow(eh,8)),Ge=A,An=0;An<Do.length;An+=8){var wt=Math.min(8,Do.length-An),Bs=parseInt(Do.substring(An,An+wt),eh);8>wt?(wt=m(Math.pow(eh,wt)),Ge=Ge.j(wt).add(m(Bs))):(Ge=Ge.j(Ko),Ge=Ge.add(m(Bs)))}return Ge}var A=d(0),P=d(1),W=d(16777216);t=u.prototype,t.m=function(){if(ve(this))return-He(this).m();for(var Do=0,eh=1,Ko=0;Ko<this.g.length;Ko++){var Ge=this.i(Ko);Do+=(0<=Ge?Ge:4294967296+Ge)*eh,eh*=4294967296}return Do},t.toString=function(Do){if(Do=Do||10,2>Do||36<Do)throw Error("radix out of range: "+Do);if(me(this))return"0";if(ve(this))return"-"+He(this).toString(Do);for(var eh=m(Math.pow(Do,6)),Ko=this,Ge="";;){var An=Rs(Ko,eh).g;Ko=De(Ko,An.j(eh));var wt=((0<Ko.g.length?Ko.g[0]:Ko.h)>>>0).toString(Do);if(Ko=An,me(Ko))return wt+Ge;for(;6>wt.length;)wt="0"+wt;Ge=wt+Ge}},t.i=function(Do){return 0>Do?0:Do<this.g.length?this.g[Do]:this.h};function me(Do){if(Do.h!=0)return!1;for(var eh=0;eh<Do.g.length;eh++)if(Do.g[eh]!=0)return!1;return!0}function ve(Do){return Do.h==-1}t.l=function(Do){return Do=De(this,Do),ve(Do)?-1:me(Do)?0:1};function He(Do){for(var eh=Do.g.length,Ko=[],Ge=0;Ge<eh;Ge++)Ko[Ge]=~Do.g[Ge];return new u(Ko,~Do.h).add(P)}t.abs=function(){return ve(this)?He(this):this},t.add=function(Do){for(var eh=Math.max(this.g.length,Do.g.length),Ko=[],Ge=0,An=0;An<=eh;An++){var wt=Ge+(this.i(An)&65535)+(Do.i(An)&65535),Bs=(wt>>>16)+(this.i(An)>>>16)+(Do.i(An)>>>16);Ge=Bs>>>16,wt&=65535,Bs&=65535,Ko[An]=Bs<<16|wt}return new u(Ko,Ko[Ko.length-1]&-2147483648?-1:0)};function De(Do,eh){return Do.add(He(eh))}t.j=function(Do){if(me(this)||me(Do))return A;if(ve(this))return ve(Do)?He(this).j(He(Do)):He(He(this).j(Do));if(ve(Do))return He(this.j(He(Do)));if(0>this.l(W)&&0>Do.l(W))return m(this.m()*Do.m());for(var eh=this.g.length+Do.g.length,Ko=[],Ge=0;Ge<2*eh;Ge++)Ko[Ge]=0;for(Ge=0;Ge<this.g.length;Ge++)for(var An=0;An<Do.g.length;An++){var wt=this.i(Ge)>>>16,Bs=this.i(Ge)&65535,yh=Do.i(An)>>>16,df=Do.i(An)&65535;Ko[2*Ge+2*An]+=Bs*df,Xe(Ko,2*Ge+2*An),Ko[2*Ge+2*An+1]+=wt*df,Xe(Ko,2*Ge+2*An+1),Ko[2*Ge+2*An+1]+=Bs*yh,Xe(Ko,2*Ge+2*An+1),Ko[2*Ge+2*An+2]+=wt*yh,Xe(Ko,2*Ge+2*An+2)}for(Ge=0;Ge<eh;Ge++)Ko[Ge]=Ko[2*Ge+1]<<16|Ko[2*Ge];for(Ge=eh;Ge<2*eh;Ge++)Ko[Ge]=0;return new u(Ko,0)};function Xe(Do,eh){for(;(Do[eh]&65535)!=Do[eh];)Do[eh+1]+=Do[eh]>>>16,Do[eh]&=65535,eh++}function qe(Do,eh){this.g=Do,this.h=eh}function Rs(Do,eh){if(me(eh))throw Error("division by zero");if(me(Do))return new qe(A,A);if(ve(Do))return eh=Rs(He(Do),eh),new qe(He(eh.g),He(eh.h));if(ve(eh))return eh=Rs(Do,He(eh)),new qe(He(eh.g),eh.h);if(30<Do.g.length){if(ve(Do)||ve(eh))throw Error("slowDivide_ only works with positive integers.");for(var Ko=P,Ge=eh;0>=Ge.l(Do);)Ko=Vc(Ko),Ge=Vc(Ge);var An=So(Ko,1),wt=So(Ge,1);for(Ge=So(Ge,2),Ko=So(Ko,2);!me(Ge);){var Bs=wt.add(Ge);0>=Bs.l(Do)&&(An=An.add(Ko),wt=Bs),Ge=So(Ge,1),Ko=So(Ko,1)}return eh=De(Do,An.j(eh)),new qe(An,eh)}for(An=A;0<=Do.l(eh);){for(Ko=Math.max(1,Math.floor(Do.m()/eh.m())),Ge=Math.ceil(Math.log(Ko)/Math.LN2),Ge=48>=Ge?1:Math.pow(2,Ge-48),wt=m(Ko),Bs=wt.j(eh);ve(Bs)||0<Bs.l(Do);)Ko-=Ge,wt=m(Ko),Bs=wt.j(eh);me(wt)&&(wt=P),An=An.add(wt),Do=De(Do,Bs)}return new qe(An,Do)}t.A=function(Do){return Rs(this,Do).h},t.and=function(Do){for(var eh=Math.max(this.g.length,Do.g.length),Ko=[],Ge=0;Ge<eh;Ge++)Ko[Ge]=this.i(Ge)&Do.i(Ge);return new u(Ko,this.h&Do.h)},t.or=function(Do){for(var eh=Math.max(this.g.length,Do.g.length),Ko=[],Ge=0;Ge<eh;Ge++)Ko[Ge]=this.i(Ge)|Do.i(Ge);return new u(Ko,this.h|Do.h)},t.xor=function(Do){for(var eh=Math.max(this.g.length,Do.g.length),Ko=[],Ge=0;Ge<eh;Ge++)Ko[Ge]=this.i(Ge)^Do.i(Ge);return new u(Ko,this.h^Do.h)};function Vc(Do){for(var eh=Do.g.length+1,Ko=[],Ge=0;Ge<eh;Ge++)Ko[Ge]=Do.i(Ge)<<1|Do.i(Ge-1)>>>31;return new u(Ko,Do.h)}function So(Do,eh){var Ko=eh>>5;eh%=32;for(var Ge=Do.g.length-Ko,An=[],wt=0;wt<Ge;wt++)An[wt]=0<eh?Do.i(wt+Ko)>>>eh|Do.i(wt+Ko+1)<<32-eh:Do.i(wt+Ko);return new u(An,Do.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Md5=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=g,Integer=u}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(li,hf,t1){return li==Array.prototype||li==Object.prototype||(li[hf]=t1.value),li};function a(li){li=[typeof globalThis=="object"&&globalThis,li,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var hf=0;hf<li.length;++hf){var t1=li[hf];if(t1&&t1.Math==Math)return t1}throw Error("Cannot find global object")}var s=a(this);function o(li,hf){if(hf)e:{var t1=s;li=li.split(".");for(var y1=0;y1<li.length-1;y1++){var e2=li[y1];if(!(e2 in t1))break e;t1=t1[e2]}li=li[li.length-1],y1=t1[li],hf=hf(y1),hf!=y1&&hf!=null&&e(t1,li,{configurable:!0,writable:!0,value:hf})}}function l(li,hf){li instanceof String&&(li+="");var t1=0,y1=!1,e2={next:function(){if(!y1&&t1<li.length){var E2=t1++;return{value:hf(E2,li[E2]),done:!1}}return y1=!0,{done:!0,value:void 0}}};return e2[Symbol.iterator]=function(){return e2},e2}o("Array.prototype.values",function(li){return li||function(){return l(this,function(hf,t1){return t1})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function d(li){var hf=typeof li;return hf=hf!="object"?hf:li?Array.isArray(li)?"array":hf:"null",hf=="array"||hf=="object"&&typeof li.length=="number"}function m(li){var hf=typeof li;return hf=="object"&&li!=null||hf=="function"}function g(li,hf,t1){return li.call.apply(li.bind,arguments)}function A(li,hf,t1){if(!li)throw Error();if(2<arguments.length){var y1=Array.prototype.slice.call(arguments,2);return function(){var e2=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e2,y1),li.apply(hf,e2)}}return function(){return li.apply(hf,arguments)}}function P(li,hf,t1){return P=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:A,P.apply(null,arguments)}function W(li,hf){var t1=Array.prototype.slice.call(arguments,1);return function(){var y1=t1.slice();return y1.push.apply(y1,arguments),li.apply(this,y1)}}function me(li,hf){function t1(){}t1.prototype=hf.prototype,li.aa=hf.prototype,li.prototype=new t1,li.prototype.constructor=li,li.Qb=function(y1,e2,E2){for(var W2=Array(arguments.length-2),$4=2;$4<arguments.length;$4++)W2[$4-2]=arguments[$4];return hf.prototype[e2].apply(y1,W2)}}function ve(li){const hf=li.length;if(0<hf){const t1=Array(hf);for(let y1=0;y1<hf;y1++)t1[y1]=li[y1];return t1}return[]}function He(li,hf){for(let t1=1;t1<arguments.length;t1++){const y1=arguments[t1];if(d(y1)){const e2=li.length||0,E2=y1.length||0;li.length=e2+E2;for(let W2=0;W2<E2;W2++)li[e2+W2]=y1[W2]}else li.push(y1)}}class De{constructor(hf,t1){this.i=hf,this.j=t1,this.h=0,this.g=null}get(){let hf;return 0<this.h?(this.h--,hf=this.g,this.g=hf.next,hf.next=null):hf=this.i(),hf}}function Xe(li){return/^[\s\xa0]*$/.test(li)}function qe(){var li=c.navigator;return li&&(li=li.userAgent)?li:""}function Rs(li){return Rs[" "](li),li}Rs[" "]=function(){};var Vc=qe().indexOf("Gecko")!=-1&&!(qe().toLowerCase().indexOf("webkit")!=-1&&qe().indexOf("Edge")==-1)&&!(qe().indexOf("Trident")!=-1||qe().indexOf("MSIE")!=-1)&&qe().indexOf("Edge")==-1;function So(li,hf,t1){for(const y1 in li)hf.call(t1,li[y1],y1,li)}function Do(li,hf){for(const t1 in li)hf.call(void 0,li[t1],t1,li)}function eh(li){const hf={};for(const t1 in li)hf[t1]=li[t1];return hf}const Ko="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ge(li,hf){let t1,y1;for(let e2=1;e2<arguments.length;e2++){y1=arguments[e2];for(t1 in y1)li[t1]=y1[t1];for(let E2=0;E2<Ko.length;E2++)t1=Ko[E2],Object.prototype.hasOwnProperty.call(y1,t1)&&(li[t1]=y1[t1])}}function An(li){var hf=1;li=li.split(":");const t1=[];for(;0<hf&&li.length;)t1.push(li.shift()),hf--;return li.length&&t1.push(li.join(":")),t1}function wt(li){c.setTimeout(()=>{throw li},0)}function Bs(){var li=Mh;let hf=null;return li.g&&(hf=li.g,li.g=li.g.next,li.g||(li.h=null),hf.next=null),hf}class yh{constructor(){this.h=this.g=null}add(hf,t1){const y1=df.get();y1.set(hf,t1),this.h?this.h.next=y1:this.g=y1,this.h=y1}}var df=new De(()=>new Fc,li=>li.reset());class Fc{constructor(){this.next=this.g=this.h=null}set(hf,t1){this.h=hf,this.g=t1,this.next=null}reset(){this.next=this.g=this.h=null}}let _h,qc=!1,Mh=new yh,cf=()=>{const li=c.Promise.resolve(void 0);_h=()=>{li.then(mf)}};var mf=()=>{for(var li;li=Bs();){try{li.h.call(li.g)}catch(t1){wt(t1)}var hf=df;hf.j(li),100>hf.h&&(hf.h++,li.next=hf.g,hf.g=li)}qc=!1};function a1(){this.s=this.s,this.C=this.C}a1.prototype.s=!1,a1.prototype.ma=function(){this.s||(this.s=!0,this.N())},a1.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function s1(li,hf){this.type=li,this.g=this.target=hf,this.defaultPrevented=!1}s1.prototype.h=function(){this.defaultPrevented=!0};var E1=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var li=!1,hf=Object.defineProperty({},"passive",{get:function(){li=!0}});try{const t1=()=>{};c.addEventListener("test",t1,hf),c.removeEventListener("test",t1,hf)}catch{}return li}();function T1(li,hf){if(s1.call(this,li?li.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,li){var t1=this.type=li.type,y1=li.changedTouches&&li.changedTouches.length?li.changedTouches[0]:null;if(this.target=li.target||li.srcElement,this.g=hf,hf=li.relatedTarget){if(Vc){e:{try{Rs(hf.nodeName);var e2=!0;break e}catch{}e2=!1}e2||(hf=null)}}else t1=="mouseover"?hf=li.fromElement:t1=="mouseout"&&(hf=li.toElement);this.relatedTarget=hf,y1?(this.clientX=y1.clientX!==void 0?y1.clientX:y1.pageX,this.clientY=y1.clientY!==void 0?y1.clientY:y1.pageY,this.screenX=y1.screenX||0,this.screenY=y1.screenY||0):(this.clientX=li.clientX!==void 0?li.clientX:li.pageX,this.clientY=li.clientY!==void 0?li.clientY:li.pageY,this.screenX=li.screenX||0,this.screenY=li.screenY||0),this.button=li.button,this.key=li.key||"",this.ctrlKey=li.ctrlKey,this.altKey=li.altKey,this.shiftKey=li.shiftKey,this.metaKey=li.metaKey,this.pointerId=li.pointerId||0,this.pointerType=typeof li.pointerType=="string"?li.pointerType:z1[li.pointerType]||"",this.state=li.state,this.i=li,li.defaultPrevented&&T1.aa.h.call(this)}}me(T1,s1);var z1={2:"touch",3:"pen",4:"mouse"};T1.prototype.h=function(){T1.aa.h.call(this);var li=this.i;li.preventDefault?li.preventDefault():li.returnValue=!1};var W1="closure_listenable_"+(1e6*Math.random()|0),m2=0;function C2(li,hf,t1,y1,e2){this.listener=li,this.proxy=null,this.src=hf,this.type=t1,this.capture=!!y1,this.ha=e2,this.key=++m2,this.da=this.fa=!1}function A2(li){li.da=!0,li.listener=null,li.proxy=null,li.src=null,li.ha=null}function b2(li){this.src=li,this.g={},this.h=0}b2.prototype.add=function(li,hf,t1,y1,e2){var E2=li.toString();li=this.g[E2],li||(li=this.g[E2]=[],this.h++);var W2=q1(li,hf,y1,e2);return-1<W2?(hf=li[W2],t1||(hf.fa=!1)):(hf=new C2(hf,this.src,E2,!!y1,e2),hf.fa=t1,li.push(hf)),hf};function _2(li,hf){var t1=hf.type;if(t1 in li.g){var y1=li.g[t1],e2=Array.prototype.indexOf.call(y1,hf,void 0),E2;(E2=0<=e2)&&Array.prototype.splice.call(y1,e2,1),E2&&(A2(hf),li.g[t1].length==0&&(delete li.g[t1],li.h--))}}function q1(li,hf,t1,y1){for(var e2=0;e2<li.length;++e2){var E2=li[e2];if(!E2.da&&E2.listener==hf&&E2.capture==!!t1&&E2.ha==y1)return e2}return-1}var U1="closure_lm_"+(1e6*Math.random()|0),M2={};function x2(li,hf,t1,y1,e2){if(Array.isArray(hf)){for(var E2=0;E2<hf.length;E2++)x2(li,hf[E2],t1,y1,e2);return null}return t1=pf(t1),li&&li[W1]?li.K(hf,t1,m(y1)?!!y1.capture:!1,e2):p1(li,hf,t1,!1,y1,e2)}function p1(li,hf,t1,y1,e2,E2){if(!hf)throw Error("Invalid event type");var W2=m(e2)?!!e2.capture:!!e2,$4=H1(li);if($4||(li[U1]=$4=new b2(li)),t1=$4.add(hf,t1,y1,W2,E2),t1.proxy)return t1;if(y1=S1(),t1.proxy=y1,y1.src=li,y1.listener=t1,li.addEventListener)E1||(e2=W2),e2===void 0&&(e2=!1),li.addEventListener(hf.toString(),y1,e2);else if(li.attachEvent)li.attachEvent(B1(hf.toString()),y1);else if(li.addListener&&li.removeListener)li.addListener(y1);else throw Error("addEventListener and attachEvent are unavailable.");return t1}function S1(){function li(t1){return hf.call(li.src,li.listener,t1)}const hf=c2;return li}function D1(li,hf,t1,y1,e2){if(Array.isArray(hf))for(var E2=0;E2<hf.length;E2++)D1(li,hf[E2],t1,y1,e2);else y1=m(y1)?!!y1.capture:!!y1,t1=pf(t1),li&&li[W1]?(li=li.i,hf=String(hf).toString(),hf in li.g&&(E2=li.g[hf],t1=q1(E2,t1,y1,e2),-1<t1&&(A2(E2[t1]),Array.prototype.splice.call(E2,t1,1),E2.length==0&&(delete li.g[hf],li.h--)))):li&&(li=H1(li))&&(hf=li.g[hf.toString()],li=-1,hf&&(li=q1(hf,t1,y1,e2)),(t1=-1<li?hf[li]:null)&&_1(t1))}function _1(li){if(typeof li!="number"&&li&&!li.da){var hf=li.src;if(hf&&hf[W1])_2(hf.i,li);else{var t1=li.type,y1=li.proxy;hf.removeEventListener?hf.removeEventListener(t1,y1,li.capture):hf.detachEvent?hf.detachEvent(B1(t1),y1):hf.addListener&&hf.removeListener&&hf.removeListener(y1),(t1=H1(hf))?(_2(t1,li),t1.h==0&&(t1.src=null,hf[U1]=null)):A2(li)}}}function B1(li){return li in M2?M2[li]:M2[li]="on"+li}function c2(li,hf){if(li.da)li=!0;else{hf=new T1(hf,this);var t1=li.listener,y1=li.ha||li.src;li.fa&&_1(li),li=t1.call(y1,hf)}return li}function H1(li){return li=li[U1],li instanceof b2?li:null}var x1="__closure_events_fn_"+(1e9*Math.random()>>>0);function pf(li){return typeof li=="function"?li:(li[x1]||(li[x1]=function(hf){return li.handleEvent(hf)}),li[x1])}function o1(){a1.call(this),this.i=new b2(this),this.M=this,this.F=null}me(o1,a1),o1.prototype[W1]=!0,o1.prototype.removeEventListener=function(li,hf,t1,y1){D1(this,li,hf,t1,y1)};function e1(li,hf){var t1,y1=li.F;if(y1)for(t1=[];y1;y1=y1.F)t1.push(y1);if(li=li.M,y1=hf.type||hf,typeof hf=="string")hf=new s1(hf,li);else if(hf instanceof s1)hf.target=hf.target||li;else{var e2=hf;hf=new s1(y1,li),Ge(hf,e2)}if(e2=!0,t1)for(var E2=t1.length-1;0<=E2;E2--){var W2=hf.g=t1[E2];e2=w1(W2,y1,!0,hf)&&e2}if(W2=hf.g=li,e2=w1(W2,y1,!0,hf)&&e2,e2=w1(W2,y1,!1,hf)&&e2,t1)for(E2=0;E2<t1.length;E2++)W2=hf.g=t1[E2],e2=w1(W2,y1,!1,hf)&&e2}o1.prototype.N=function(){if(o1.aa.N.call(this),this.i){var li=this.i,hf;for(hf in li.g){for(var t1=li.g[hf],y1=0;y1<t1.length;y1++)A2(t1[y1]);delete li.g[hf],li.h--}}this.F=null},o1.prototype.K=function(li,hf,t1,y1){return this.i.add(String(li),hf,!1,t1,y1)},o1.prototype.L=function(li,hf,t1,y1){return this.i.add(String(li),hf,!0,t1,y1)};function w1(li,hf,t1,y1){if(hf=li.i.g[String(hf)],!hf)return!0;hf=hf.concat();for(var e2=!0,E2=0;E2<hf.length;++E2){var W2=hf[E2];if(W2&&!W2.da&&W2.capture==t1){var $4=W2.listener,B3=W2.ha||W2.src;W2.fa&&_2(li.i,W2),e2=$4.call(B3,y1)!==!1&&e2}}return e2&&!y1.defaultPrevented}function C1(li,hf,t1){if(typeof li=="function")t1&&(li=P(li,t1));else if(li&&typeof li.handleEvent=="function")li=P(li.handleEvent,li);else throw Error("Invalid listener argument");return 2147483647<Number(hf)?-1:c.setTimeout(li,hf||0)}function F1(li){li.g=C1(()=>{li.g=null,li.i&&(li.i=!1,F1(li))},li.l);const hf=li.h;li.h=null,li.m.apply(null,hf)}class N1 extends a1{constructor(hf,t1){super(),this.m=hf,this.l=t1,this.h=null,this.i=!1,this.g=null}j(hf){this.h=arguments,this.g?this.i=!0:F1(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function v1(li){a1.call(this),this.h=li,this.g={}}me(v1,a1);var X1=[];function i2(li){So(li.g,function(hf,t1){this.g.hasOwnProperty(t1)&&_1(hf)},li),li.g={}}v1.prototype.N=function(){v1.aa.N.call(this),i2(this)},v1.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var f2=c.JSON.stringify,Y1=c.JSON.parse,l2=class{stringify(li){return c.JSON.stringify(li,void 0)}parse(li){return c.JSON.parse(li,void 0)}};function Q1(){}Q1.prototype.h=null;function G1(li){return li.h||(li.h=li.i())}function P2(){}var J1={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function v2(){s1.call(this,"d")}me(v2,s1);function z2(){s1.call(this,"c")}me(z2,s1);var q2={},j2=null;function n4(){return j2=j2||new o1}q2.La="serverreachability";function X2(li){s1.call(this,q2.La,li)}me(X2,s1);function b1(li){const hf=n4();e1(hf,new X2(hf))}q2.STAT_EVENT="statevent";function k1(li,hf){s1.call(this,q2.STAT_EVENT,li),this.stat=hf}me(k1,s1);function V1(li){const hf=n4();e1(hf,new k1(hf,li))}q2.Ma="timingevent";function n2(li,hf){s1.call(this,q2.Ma,li),this.size=hf}me(n2,s1);function y2(li,hf){if(typeof li!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){li()},hf)}function Z1(){this.g=!0}Z1.prototype.xa=function(){this.g=!1};function T2(li,hf,t1,y1,e2,E2){li.info(function(){if(li.g)if(E2)for(var W2="",$4=E2.split("&"),B3=0;B3<$4.length;B3++){var U4=$4[B3].split("=");if(1<U4.length){var L3=U4[0];U4=U4[1];var V3=L3.split("_");W2=2<=V3.length&&V3[1]=="type"?W2+(L3+"="+U4+"&"):W2+(L3+"=redacted&")}}else W2=null;else W2=E2;return"XMLHTTP REQ ("+y1+") [attempt "+e2+"]: "+hf+`
`+t1+`
`+W2})}function L2(li,hf,t1,y1,e2,E2,W2){li.info(function(){return"XMLHTTP RESP ("+y1+") [ attempt "+e2+"]: "+hf+`
`+t1+`
`+E2+" "+W2})}function uf(li,hf,t1,y1){li.info(function(){return"XMLHTTP TEXT ("+hf+"): "+gf(li,t1)+(y1?" "+y1:"")})}function Qp(li,hf){li.info(function(){return"TIMEOUT: "+hf})}Z1.prototype.info=function(){};function gf(li,hf){if(!li.g)return hf;if(!hf)return null;try{var t1=JSON.parse(hf);if(t1){for(li=0;li<t1.length;li++)if(Array.isArray(t1[li])){var y1=t1[li];if(!(2>y1.length)){var e2=y1[1];if(Array.isArray(e2)&&!(1>e2.length)){var E2=e2[0];if(E2!="noop"&&E2!="stop"&&E2!="close")for(var W2=1;W2<e2.length;W2++)e2[W2]=""}}}}return f2(t1)}catch{return hf}}var Ym={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},d1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},r1;function g1(){}me(g1,Q1),g1.prototype.g=function(){return new XMLHttpRequest},g1.prototype.i=function(){return{}},r1=new g1;function R1(li,hf,t1,y1){this.j=li,this.i=hf,this.l=t1,this.R=y1||1,this.U=new v1(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new M1}function M1(){this.i=null,this.g="",this.h=!1}var L1={},O1={};function a2(li,hf,t1){li.L=1,li.v=ff(W3(hf)),li.m=t1,li.P=!0,S2(li,null)}function S2(li,hf){li.F=Date.now(),$2(li),li.A=W3(li.v);var t1=li.A,y1=li.R;Array.isArray(y1)||(y1=[String(y1)]),v4(t1.i,"t",y1),li.C=0,t1=li.j.J,li.h=new M1,li.g=bv(li.j,t1?hf:null,!li.m),0<li.O&&(li.M=new N1(P(li.Y,li,li.g),li.O)),hf=li.U,t1=li.g,y1=li.ca;var e2="readystatechange";Array.isArray(e2)||(e2&&(X1[0]=e2.toString()),e2=X1);for(var E2=0;E2<e2.length;E2++){var W2=x2(t1,e2[E2],y1||hf.handleEvent,!1,hf.h||hf);if(!W2)break;hf.g[W2.key]=W2}hf=li.H?eh(li.H):{},li.m?(li.u||(li.u="POST"),hf["Content-Type"]="application/x-www-form-urlencoded",li.g.ea(li.A,li.u,li.m,hf)):(li.u="GET",li.g.ea(li.A,li.u,null,hf)),b1(),T2(li.i,li.u,li.A,li.l,li.R,li.m)}R1.prototype.ca=function(li){li=li.target;const hf=this.M;hf&&D3(li)==3?hf.j():this.Y(li)},R1.prototype.Y=function(li){try{if(li==this.g)e:{const V3=D3(this.g);var hf=this.g.Ba();const m6=this.g.Z();if(!(3>V3)&&(V3!=3||this.g&&(this.h.h||this.g.oa()||h6(this.g)))){this.J||V3!=4||hf==7||(hf==8||0>=m6?b1(3):b1(2)),P4(this);var t1=this.g.Z();this.X=t1;t:if(U2(this)){var y1=h6(this.g);li="";var e2=y1.length,E2=D3(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Y2(this),A4(this);var W2="";break t}this.h.i=new c.TextDecoder}for(hf=0;hf<e2;hf++)this.h.h=!0,li+=this.h.i.decode(y1[hf],{stream:!(E2&&hf==e2-1)});y1.length=0,this.h.g+=li,this.C=0,W2=this.h.g}else W2=this.g.oa();if(this.o=t1==200,L2(this.i,this.u,this.A,this.l,this.R,V3,t1),this.o){if(this.T&&!this.K){t:{if(this.g){var $4,B3=this.g;if(($4=B3.g?B3.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xe($4)){var U4=$4;break t}}U4=null}if(t1=U4)uf(this.i,this.l,t1,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,B2(this,t1);else{this.o=!1,this.s=3,V1(12),Y2(this),A4(this);break e}}if(this.P){t1=!0;let sr;for(;!this.J&&this.C<W2.length;)if(sr=H2(this,W2),sr==O1){V3==4&&(this.s=4,V1(14),t1=!1),uf(this.i,this.l,null,"[Incomplete Response]");break}else if(sr==L1){this.s=4,V1(15),uf(this.i,this.l,W2,"[Invalid Chunk]"),t1=!1;break}else uf(this.i,this.l,sr,null),B2(this,sr);if(U2(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),V3!=4||W2.length!=0||this.h.h||(this.s=1,V1(16),t1=!1),this.o=this.o&&t1,!t1)uf(this.i,this.l,W2,"[Invalid Chunked Response]"),Y2(this),A4(this);else if(0<W2.length&&!this.W){this.W=!0;var L3=this.j;L3.g==this&&L3.ba&&!L3.M&&(L3.j.info("Great, no buffering proxy detected. Bytes received: "+W2.length),S3(L3),L3.M=!0,V1(11))}}else uf(this.i,this.l,W2,null),B2(this,W2);V3==4&&Y2(this),this.o&&!this.J&&(V3==4?e5(this.j,this):(this.o=!1,$2(this)))}else X6(this.g),t1==400&&0<W2.indexOf("Unknown SID")?(this.s=3,V1(12)):(this.s=0,V1(13)),Y2(this),A4(this)}}}catch{}finally{}};function U2(li){return li.g?li.u=="GET"&&li.L!=2&&li.j.Ca:!1}function H2(li,hf){var t1=li.C,y1=hf.indexOf(`
`,t1);return y1==-1?O1:(t1=Number(hf.substring(t1,y1)),isNaN(t1)?L1:(y1+=1,y1+t1>hf.length?O1:(hf=hf.slice(y1,y1+t1),li.C=y1+t1,hf)))}R1.prototype.cancel=function(){this.J=!0,Y2(this)};function $2(li){li.S=Date.now()+li.I,r4(li,li.I)}function r4(li,hf){if(li.B!=null)throw Error("WatchDog timer not null");li.B=y2(P(li.ba,li),hf)}function P4(li){li.B&&(c.clearTimeout(li.B),li.B=null)}R1.prototype.ba=function(){this.B=null;const li=Date.now();0<=li-this.S?(Qp(this.i,this.A),this.L!=2&&(b1(),V1(17)),Y2(this),this.s=2,A4(this)):r4(this,this.S-li)};function A4(li){li.j.G==0||li.J||e5(li.j,li)}function Y2(li){P4(li);var hf=li.M;hf&&typeof hf.ma=="function"&&hf.ma(),li.M=null,i2(li.U),li.g&&(hf=li.g,li.g=null,hf.abort(),hf.ma())}function B2(li,hf){try{var t1=li.j;if(t1.G!=0&&(t1.g==li||I2(t1.h,li))){if(!li.K&&I2(t1.h,li)&&t1.G==3){try{var y1=t1.Da.g.parse(hf)}catch{y1=null}if(Array.isArray(y1)&&y1.length==3){var e2=y1;if(e2[0]==0){e:if(!t1.u){if(t1.g)if(t1.g.F+3e3<li.F)E6(t1),p6(t1);else break e;w6(t1),V1(18)}}else t1.za=e2[1],0<t1.za-t1.T&&37500>e2[2]&&t1.F&&t1.v==0&&!t1.C&&(t1.C=y2(P(t1.Za,t1),6e3));if(1>=f4(t1.h)&&t1.ca){try{t1.ca()}catch{}t1.ca=void 0}}else Y6(t1,11)}else if((li.K||t1.g==li)&&E6(t1),!Xe(hf))for(e2=t1.Da.g.parse(hf),hf=0;hf<e2.length;hf++){let U4=e2[hf];if(t1.T=U4[0],U4=U4[1],t1.G==2)if(U4[0]=="c"){t1.K=U4[1],t1.ia=U4[2];const L3=U4[3];L3!=null&&(t1.la=L3,t1.j.info("VER="+t1.la));const V3=U4[4];V3!=null&&(t1.Aa=V3,t1.j.info("SVER="+t1.Aa));const m6=U4[5];m6!=null&&typeof m6=="number"&&0<m6&&(y1=1.5*m6,t1.L=y1,t1.j.info("backChannelRequestTimeoutMs_="+y1)),y1=t1;const sr=li.g;if(sr){const Hc=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hc){var E2=y1.h;E2.g||Hc.indexOf("spdy")==-1&&Hc.indexOf("quic")==-1&&Hc.indexOf("h2")==-1||(E2.j=E2.l,E2.g=new Set,E2.h&&(h1(E2,E2.h),E2.h=null))}if(y1.D){const l1=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;l1&&(y1.ya=l1,wh(y1.I,y1.D,l1))}}t1.G=3,t1.l&&t1.l.ua(),t1.ba&&(t1.R=Date.now()-li.F,t1.j.info("Handshake RTT: "+t1.R+"ms")),y1=t1;var W2=li;if(y1.qa=yv(y1,y1.J?y1.ia:null,y1.W),W2.K){H4(y1.h,W2);var $4=W2,B3=y1.L;B3&&($4.I=B3),$4.B&&(P4($4),$2($4)),y1.g=W2}else _3(y1);0<t1.i.length&&k3(t1)}else U4[0]!="stop"&&U4[0]!="close"||Y6(t1,7);else t1.G==3&&(U4[0]=="stop"||U4[0]=="close"?U4[0]=="stop"?Y6(t1,7):Q3(t1):U4[0]!="noop"&&t1.l&&t1.l.ta(U4),t1.v=0)}}b1(4)}catch{}}var d4=class{constructor(li,hf){this.g=li,this.map=hf}};function Z2(li){this.l=li||10,c.PerformanceNavigationTiming?(li=c.performance.getEntriesByType("navigation"),li=0<li.length&&(li[0].nextHopProtocol=="hq"||li[0].nextHopProtocol=="h2")):li=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=li?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function l4(li){return li.h?!0:li.g?li.g.size>=li.j:!1}function f4(li){return li.h?1:li.g?li.g.size:0}function I2(li,hf){return li.h?li.h==hf:li.g?li.g.has(hf):!1}function h1(li,hf){li.g?li.g.add(hf):li.h=hf}function H4(li,hf){li.h&&li.h==hf?li.h=null:li.g&&li.g.has(hf)&&li.g.delete(hf)}Z2.prototype.cancel=function(){if(this.i=s6(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const li of this.g.values())li.cancel();this.g.clear()}};function s6(li){if(li.h!=null)return li.i.concat(li.h.D);if(li.g!=null&&li.g.size!==0){let hf=li.i;for(const t1 of li.g.values())hf=hf.concat(t1.D);return hf}return ve(li.i)}function g4(li){if(li.V&&typeof li.V=="function")return li.V();if(typeof Map<"u"&&li instanceof Map||typeof Set<"u"&&li instanceof Set)return Array.from(li.values());if(typeof li=="string")return li.split("");if(d(li)){for(var hf=[],t1=li.length,y1=0;y1<t1;y1++)hf.push(li[y1]);return hf}hf=[],t1=0;for(y1 in li)hf[t1++]=li[y1];return hf}function I4(li){if(li.na&&typeof li.na=="function")return li.na();if(!li.V||typeof li.V!="function"){if(typeof Map<"u"&&li instanceof Map)return Array.from(li.keys());if(!(typeof Set<"u"&&li instanceof Set)){if(d(li)||typeof li=="string"){var hf=[];li=li.length;for(var t1=0;t1<li;t1++)hf.push(t1);return hf}hf=[],t1=0;for(const y1 in li)hf[t1++]=y1;return hf}}}function Q2(li,hf){if(li.forEach&&typeof li.forEach=="function")li.forEach(hf,void 0);else if(d(li)||typeof li=="string")Array.prototype.forEach.call(li,hf,void 0);else for(var t1=I4(li),y1=g4(li),e2=y1.length,E2=0;E2<e2;E2++)hf.call(void 0,y1[E2],t1&&t1[E2],li)}var x4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function K3(li,hf){if(li){li=li.split("&");for(var t1=0;t1<li.length;t1++){var y1=li[t1].indexOf("="),e2=null;if(0<=y1){var E2=li[t1].substring(0,y1);e2=li[t1].substring(y1+1)}else E2=li[t1];hf(E2,e2?decodeURIComponent(e2.replace(/\+/g," ")):"")}}}function b3(li){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,li instanceof b3){this.h=li.h,m4(this,li.j),this.o=li.o,this.g=li.g,ae(this,li.s),this.l=li.l;var hf=li.i,t1=new R2;t1.i=hf.i,hf.g&&(t1.g=new Map(hf.g),t1.h=hf.h),To(this,t1),this.m=li.m}else li&&(hf=String(li).match(x4))?(this.h=!1,m4(this,hf[1]||"",!0),this.o=n1(hf[2]||""),this.g=n1(hf[3]||"",!0),ae(this,hf[4]),this.l=n1(hf[5]||"",!0),To(this,hf[6]||"",!0),this.m=n1(hf[7]||"")):(this.h=!1,this.i=new R2(null,this.h))}b3.prototype.toString=function(){var li=[],hf=this.j;hf&&li.push(c1(hf,A1,!0),":");var t1=this.g;return(t1||hf=="file")&&(li.push("//"),(hf=this.o)&&li.push(c1(hf,A1,!0),"@"),li.push(encodeURIComponent(String(t1)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t1=this.s,t1!=null&&li.push(":",String(t1))),(t1=this.l)&&(this.g&&t1.charAt(0)!="/"&&li.push("/"),li.push(c1(t1,t1.charAt(0)=="/"?s2:u2,!0))),(t1=this.i.toString())&&li.push("?",t1),(t1=this.m)&&li.push("#",c1(t1,K2)),li.join("")};function W3(li){return new b3(li)}function m4(li,hf,t1){li.j=t1?n1(hf,!0):hf,li.j&&(li.j=li.j.replace(/:$/,""))}function ae(li,hf){if(hf){if(hf=Number(hf),isNaN(hf)||0>hf)throw Error("Bad port number "+hf);li.s=hf}else li.s=null}function To(li,hf,t1){hf instanceof R2?(li.i=hf,T4(li.i,li.h)):(t1||(hf=c1(hf,h2)),li.i=new R2(hf,li.h))}function wh(li,hf,t1){li.i.set(hf,t1)}function ff(li){return wh(li,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),li}function n1(li,hf){return li?hf?decodeURI(li.replace(/%25/g,"%2525")):decodeURIComponent(li):""}function c1(li,hf,t1){return typeof li=="string"?(li=encodeURI(li).replace(hf,u1),t1&&(li=li.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),li):null}function u1(li){return li=li.charCodeAt(0),"%"+(li>>4&15).toString(16)+(li&15).toString(16)}var A1=/[#\/\?@]/g,u2=/[#\?:]/g,s2=/[#\?]/g,h2=/[#\?@]/g,K2=/#/g;function R2(li,hf){this.h=this.g=null,this.i=li||null,this.j=!!hf}function V2(li){li.g||(li.g=new Map,li.h=0,li.i&&K3(li.i,function(hf,t1){li.add(decodeURIComponent(hf.replace(/\+/g," ")),t1)}))}t=R2.prototype,t.add=function(li,hf){V2(this),this.i=null,li=w4(this,li);var t1=this.g.get(li);return t1||this.g.set(li,t1=[]),t1.push(hf),this.h+=1,this};function e4(li,hf){V2(li),hf=w4(li,hf),li.g.has(hf)&&(li.i=null,li.h-=li.g.get(hf).length,li.g.delete(hf))}function t4(li,hf){return V2(li),hf=w4(li,hf),li.g.has(hf)}t.forEach=function(li,hf){V2(this),this.g.forEach(function(t1,y1){t1.forEach(function(e2){li.call(hf,e2,y1,this)},this)},this)},t.na=function(){V2(this);const li=Array.from(this.g.values()),hf=Array.from(this.g.keys()),t1=[];for(let y1=0;y1<hf.length;y1++){const e2=li[y1];for(let E2=0;E2<e2.length;E2++)t1.push(hf[y1])}return t1},t.V=function(li){V2(this);let hf=[];if(typeof li=="string")t4(this,li)&&(hf=hf.concat(this.g.get(w4(this,li))));else{li=Array.from(this.g.values());for(let t1=0;t1<li.length;t1++)hf=hf.concat(li[t1])}return hf},t.set=function(li,hf){return V2(this),this.i=null,li=w4(this,li),t4(this,li)&&(this.h-=this.g.get(li).length),this.g.set(li,[hf]),this.h+=1,this},t.get=function(li,hf){return li?(li=this.V(li),0<li.length?String(li[0]):hf):hf};function v4(li,hf,t1){e4(li,hf),0<t1.length&&(li.i=null,li.g.set(w4(li,hf),ve(t1)),li.h+=t1.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const li=[],hf=Array.from(this.g.keys());for(var t1=0;t1<hf.length;t1++){var y1=hf[t1];const E2=encodeURIComponent(String(y1)),W2=this.V(y1);for(y1=0;y1<W2.length;y1++){var e2=E2;W2[y1]!==""&&(e2+="="+encodeURIComponent(String(W2[y1]))),li.push(e2)}}return this.i=li.join("&")};function w4(li,hf){return hf=String(hf),li.j&&(hf=hf.toLowerCase()),hf}function T4(li,hf){hf&&!li.j&&(V2(li),li.i=null,li.g.forEach(function(t1,y1){var e2=y1.toLowerCase();y1!=e2&&(e4(this,y1),v4(this,e2,t1))},li)),li.j=hf}function D4(li,hf){const t1=new Z1;if(c.Image){const y1=new Image;y1.onload=W(s4,t1,"TestLoadImage: loaded",!0,hf,y1),y1.onerror=W(s4,t1,"TestLoadImage: error",!1,hf,y1),y1.onabort=W(s4,t1,"TestLoadImage: abort",!1,hf,y1),y1.ontimeout=W(s4,t1,"TestLoadImage: timeout",!1,hf,y1),c.setTimeout(function(){y1.ontimeout&&y1.ontimeout()},1e4),y1.src=li}else hf(!1)}function C4(li,hf){const t1=new Z1,y1=new AbortController,e2=setTimeout(()=>{y1.abort(),s4(t1,"TestPingServer: timeout",!1,hf)},1e4);fetch(li,{signal:y1.signal}).then(E2=>{clearTimeout(e2),E2.ok?s4(t1,"TestPingServer: ok",!0,hf):s4(t1,"TestPingServer: server error",!1,hf)}).catch(()=>{clearTimeout(e2),s4(t1,"TestPingServer: error",!1,hf)})}function s4(li,hf,t1,y1,e2){try{e2&&(e2.onload=null,e2.onerror=null,e2.onabort=null,e2.ontimeout=null),y1(t1)}catch{}}function Z4(){this.g=new l2}function h3(li,hf,t1){const y1=t1||"";try{Q2(li,function(e2,E2){let W2=e2;m(e2)&&(W2=f2(e2)),hf.push(y1+E2+"="+encodeURIComponent(W2))})}catch(e2){throw hf.push(y1+"type="+encodeURIComponent("_badmap")),e2}}function r3(li){this.l=li.Ub||null,this.j=li.eb||!1}me(r3,Q1),r3.prototype.g=function(){return new R4(this.l,this.j)},r3.prototype.i=function(li){return function(){return li}}({});function R4(li,hf){o1.call(this),this.D=li,this.o=hf,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}me(R4,o1),t=R4.prototype,t.open=function(li,hf){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=li,this.A=hf,this.readyState=1,W4(this)},t.send=function(li){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const hf={headers:this.u,method:this.B,credentials:this.m,cache:void 0};li&&(hf.body=li),(this.D||c).fetch(new Request(this.A,hf)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,N4(this)),this.readyState=0},t.Sa=function(li){if(this.g&&(this.l=li,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=li.headers,this.readyState=2,W4(this)),this.g&&(this.readyState=3,W4(this),this.g)))if(this.responseType==="arraybuffer")li.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in li){if(this.j=li.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;B4(this)}else li.text().then(this.Ra.bind(this),this.ga.bind(this))};function B4(li){li.j.read().then(li.Pa.bind(li)).catch(li.ga.bind(li))}t.Pa=function(li){if(this.g){if(this.o&&li.value)this.response.push(li.value);else if(!this.o){var hf=li.value?li.value:new Uint8Array(0);(hf=this.v.decode(hf,{stream:!li.done}))&&(this.response=this.responseText+=hf)}li.done?N4(this):W4(this),this.readyState==3&&B4(this)}},t.Ra=function(li){this.g&&(this.response=this.responseText=li,N4(this))},t.Qa=function(li){this.g&&(this.response=li,N4(this))},t.ga=function(){this.g&&N4(this)};function N4(li){li.readyState=4,li.l=null,li.j=null,li.v=null,W4(li)}t.setRequestHeader=function(li,hf){this.u.append(li,hf)},t.getResponseHeader=function(li){return this.h&&this.h.get(li.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const li=[],hf=this.h.entries();for(var t1=hf.next();!t1.done;)t1=t1.value,li.push(t1[0]+": "+t1[1]),t1=hf.next();return li.join(`\r
`)};function W4(li){li.onreadystatechange&&li.onreadystatechange.call(li)}Object.defineProperty(R4.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(li){this.m=li?"include":"same-origin"}});function m3(li){let hf="";return So(li,function(t1,y1){hf+=y1,hf+=":",hf+=t1,hf+=`\r
`}),hf}function M4(li,hf,t1){e:{for(y1 in t1){var y1=!1;break e}y1=!0}y1||(t1=m3(t1),typeof li=="string"?t1!=null&&encodeURIComponent(String(t1)):wh(li,hf,t1))}function p4(li){o1.call(this),this.headers=new Map,this.o=li||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}me(p4,o1);var E3=/^https?$/i,J4=["POST","PUT"];t=p4.prototype,t.Ha=function(li){this.J=li},t.ea=function(li,hf,t1,y1){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+li);hf=hf?hf.toUpperCase():"GET",this.D=li,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():r1.g(),this.v=this.o?G1(this.o):G1(r1),this.g.onreadystatechange=P(this.Ea,this);try{this.B=!0,this.g.open(hf,String(li),!0),this.B=!1}catch(E2){e6(this,E2);return}if(li=t1||"",t1=new Map(this.headers),y1)if(Object.getPrototypeOf(y1)===Object.prototype)for(var e2 in y1)t1.set(e2,y1[e2]);else if(typeof y1.keys=="function"&&typeof y1.get=="function")for(const E2 of y1.keys())t1.set(E2,y1.get(E2));else throw Error("Unknown input type for opt_headers: "+String(y1));y1=Array.from(t1.keys()).find(E2=>E2.toLowerCase()=="content-type"),e2=c.FormData&&li instanceof c.FormData,!(0<=Array.prototype.indexOf.call(J4,hf,void 0))||y1||e2||t1.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[E2,W2]of t1)this.g.setRequestHeader(E2,W2);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Y3(this),this.u=!0,this.g.send(li),this.u=!1}catch(E2){e6(this,E2)}};function e6(li,hf){li.h=!1,li.g&&(li.j=!0,li.g.abort(),li.j=!1),li.l=hf,li.m=5,X3(li),I3(li)}function X3(li){li.A||(li.A=!0,e1(li,"complete"),e1(li,"error"))}t.abort=function(li){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=li||7,e1(this,"complete"),e1(this,"abort"),I3(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),I3(this,!0)),p4.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?t6(this):this.bb())},t.bb=function(){t6(this)};function t6(li){if(li.h&&typeof u<"u"&&(!li.v[1]||D3(li)!=4||li.Z()!=2)){if(li.u&&D3(li)==4)C1(li.Ea,0,li);else if(e1(li,"readystatechange"),D3(li)==4){li.h=!1;try{const W2=li.Z();e:switch(W2){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var hf=!0;break e;default:hf=!1}var t1;if(!(t1=hf)){var y1;if(y1=W2===0){var e2=String(li.D).match(x4)[1]||null;!e2&&c.self&&c.self.location&&(e2=c.self.location.protocol.slice(0,-1)),y1=!E3.test(e2?e2.toLowerCase():"")}t1=y1}if(t1)e1(li,"complete"),e1(li,"success");else{li.m=6;try{var E2=2<D3(li)?li.g.statusText:""}catch{E2=""}li.l=E2+" ["+li.Z()+"]",X3(li)}}finally{I3(li)}}}}function I3(li,hf){if(li.g){Y3(li);const t1=li.g,y1=li.v[0]?()=>{}:null;li.g=null,li.v=null,hf||e1(li,"ready");try{t1.onreadystatechange=y1}catch{}}}function Y3(li){li.I&&(c.clearTimeout(li.I),li.I=null)}t.isActive=function(){return!!this.g};function D3(li){return li.g?li.g.readyState:0}t.Z=function(){try{return 2<D3(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(li){if(this.g){var hf=this.g.responseText;return li&&hf.indexOf(li)==0&&(hf=hf.substring(li.length)),Y1(hf)}};function h6(li){try{if(!li.g)return null;if("response"in li.g)return li.g.response;switch(li.H){case"":case"text":return li.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in li.g)return li.g.mozResponseArrayBuffer}return null}catch{return null}}function X6(li){const hf={};li=(li.g&&2<=D3(li)&&li.g.getAllResponseHeaders()||"").split(`\r
`);for(let y1=0;y1<li.length;y1++){if(Xe(li[y1]))continue;var t1=An(li[y1]);const e2=t1[0];if(t1=t1[1],typeof t1!="string")continue;t1=t1.trim();const E2=hf[e2]||[];hf[e2]=E2,E2.push(t1)}Do(hf,function(y1){return y1.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function d6(li,hf,t1){return t1&&t1.internalChannelParams&&t1.internalChannelParams[li]||hf}function b6(li){this.Aa=0,this.i=[],this.j=new Z1,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=d6("failFast",!1,li),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=d6("baseRetryDelayMs",5e3,li),this.cb=d6("retryDelaySeedMs",1e4,li),this.Wa=d6("forwardChannelMaxRetries",2,li),this.wa=d6("forwardChannelRequestTimeoutMs",2e4,li),this.pa=li&&li.xmlHttpFactory||void 0,this.Xa=li&&li.Tb||void 0,this.Ca=li&&li.useFetchStreams||!1,this.L=void 0,this.J=li&&li.supportsCrossDomainXhr||!1,this.K="",this.h=new Z2(li&&li.concurrentRequestLimit),this.Da=new Z4,this.P=li&&li.fastHandshake||!1,this.O=li&&li.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=li&&li.Rb||!1,li&&li.xa&&this.j.xa(),li&&li.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&li&&li.detectBufferingProxy||!1,this.ja=void 0,li&&li.longPollingTimeout&&0<li.longPollingTimeout&&(this.ja=li.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=b6.prototype,t.la=8,t.G=1,t.connect=function(li,hf,t1,y1){V1(0),this.W=li,this.H=hf||{},t1&&y1!==void 0&&(this.H.OSID=t1,this.H.OAID=y1),this.F=this.X,this.I=yv(this,null,this.W),k3(this)};function Q3(li){if(g3(li),li.G==3){var hf=li.U++,t1=W3(li.I);if(wh(t1,"SID",li.K),wh(t1,"RID",hf),wh(t1,"TYPE","terminate"),G4(li,t1),hf=new R1(li,li.j,hf),hf.L=2,hf.v=ff(W3(t1)),t1=!1,c.navigator&&c.navigator.sendBeacon)try{t1=c.navigator.sendBeacon(hf.v.toString(),"")}catch{}!t1&&c.Image&&(new Image().src=hf.v,t1=!0),t1||(hf.g=bv(hf.j,null),hf.g.ea(hf.v)),hf.F=Date.now(),$2(hf)}vv(li)}function p6(li){li.g&&(S3(li),li.g.cancel(),li.g=null)}function g3(li){p6(li),li.u&&(c.clearTimeout(li.u),li.u=null),E6(li),li.h.cancel(),li.s&&(typeof li.s=="number"&&c.clearTimeout(li.s),li.s=null)}function k3(li){if(!l4(li.h)&&!li.s){li.s=!0;var hf=li.Ga;_h||cf(),qc||(_h(),qc=!0),Mh.add(hf,li),li.B=0}}function _6(li,hf){return f4(li.h)>=li.h.j-(li.s?1:0)?!1:li.s?(li.i=hf.D.concat(li.i),!0):li.G==1||li.G==2||li.B>=(li.Va?0:li.Wa)?!1:(li.s=y2(P(li.Ga,li,hf),J5(li,li.B)),li.B++,!0)}t.Ga=function(li){if(this.s)if(this.s=null,this.G==1){if(!li){this.U=Math.floor(1e5*Math.random()),li=this.U++;const e2=new R1(this,this.j,li);let E2=this.o;if(this.S&&(E2?(E2=eh(E2),Ge(E2,this.S)):E2=this.S),this.m!==null||this.O||(e2.H=E2,E2=null),this.P)e:{for(var hf=0,t1=0;t1<this.i.length;t1++){t:{var y1=this.i[t1];if("__data__"in y1.map&&(y1=y1.map.__data__,typeof y1=="string")){y1=y1.length;break t}y1=void 0}if(y1===void 0)break;if(hf+=y1,4096<hf){hf=t1;break e}if(hf===4096||t1===this.i.length-1){hf=t1+1;break e}}hf=1e3}else hf=1e3;hf=x6(this,e2,hf),t1=W3(this.I),wh(t1,"RID",li),wh(t1,"CVER",22),this.D&&wh(t1,"X-HTTP-Session-Id",this.D),G4(this,t1),E2&&(this.O?hf="headers="+encodeURIComponent(String(m3(E2)))+"&"+hf:this.m&&M4(t1,this.m,E2)),h1(this.h,e2),this.Ua&&wh(t1,"TYPE","init"),this.P?(wh(t1,"$req",hf),wh(t1,"SID","null"),e2.T=!0,a2(e2,t1,null)):a2(e2,t1,hf),this.G=2}}else this.G==3&&(li?d3(this,li):this.i.length==0||l4(this.h)||d3(this))};function d3(li,hf){var t1;hf?t1=hf.l:t1=li.U++;const y1=W3(li.I);wh(y1,"SID",li.K),wh(y1,"RID",t1),wh(y1,"AID",li.T),G4(li,y1),li.m&&li.o&&M4(y1,li.m,li.o),t1=new R1(li,li.j,t1,li.B+1),li.m===null&&(t1.H=li.o),hf&&(li.i=hf.D.concat(li.i)),hf=x6(li,t1,1e3),t1.I=Math.round(.5*li.wa)+Math.round(.5*li.wa*Math.random()),h1(li.h,t1),a2(t1,y1,hf)}function G4(li,hf){li.H&&So(li.H,function(t1,y1){wh(hf,y1,t1)}),li.l&&Q2({},function(t1,y1){wh(hf,y1,t1)})}function x6(li,hf,t1){t1=Math.min(li.i.length,t1);var y1=li.l?P(li.l.Na,li.l,li):null;e:{var e2=li.i;let E2=-1;for(;;){const W2=["count="+t1];E2==-1?0<t1?(E2=e2[0].g,W2.push("ofs="+E2)):E2=0:W2.push("ofs="+E2);let $4=!0;for(let B3=0;B3<t1;B3++){let U4=e2[B3].g;const L3=e2[B3].map;if(U4-=E2,0>U4)E2=Math.max(0,e2[B3].g-100),$4=!1;else try{h3(L3,W2,"req"+U4+"_")}catch{y1&&y1(L3)}}if($4){y1=W2.join("&");break e}}}return li=li.i.splice(0,t1),hf.D=li,y1}function _3(li){if(!li.g&&!li.u){li.Y=1;var hf=li.Fa;_h||cf(),qc||(_h(),qc=!0),Mh.add(hf,li),li.v=0}}function w6(li){return li.g||li.u||3<=li.v?!1:(li.Y++,li.u=y2(P(li.Fa,li),J5(li,li.v)),li.v++,!0)}t.Fa=function(){if(this.u=null,r6(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var li=2*this.R;this.j.info("BP detection timer enabled: "+li),this.A=y2(P(this.ab,this),li)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,V1(10),p6(this),r6(this))};function S3(li){li.A!=null&&(c.clearTimeout(li.A),li.A=null)}function r6(li){li.g=new R1(li,li.j,"rpc",li.Y),li.m===null&&(li.g.H=li.o),li.g.O=0;var hf=W3(li.qa);wh(hf,"RID","rpc"),wh(hf,"SID",li.K),wh(hf,"AID",li.T),wh(hf,"CI",li.F?"0":"1"),!li.F&&li.ja&&wh(hf,"TO",li.ja),wh(hf,"TYPE","xmlhttp"),G4(li,hf),li.m&&li.o&&M4(hf,li.m,li.o),li.L&&(li.g.I=li.L);var t1=li.g;li=li.ia,t1.L=1,t1.v=ff(W3(hf)),t1.m=null,t1.P=!0,S2(t1,li)}t.Za=function(){this.C!=null&&(this.C=null,p6(this),w6(this),V1(19))};function E6(li){li.C!=null&&(c.clearTimeout(li.C),li.C=null)}function e5(li,hf){var t1=null;if(li.g==hf){E6(li),S3(li),li.g=null;var y1=2}else if(I2(li.h,hf))t1=hf.D,H4(li.h,hf),y1=1;else return;if(li.G!=0){if(hf.o)if(y1==1){t1=hf.m?hf.m.length:0,hf=Date.now()-hf.F;var e2=li.B;y1=n4(),e1(y1,new n2(y1,t1)),k3(li)}else _3(li);else if(e2=hf.s,e2==3||e2==0&&0<hf.X||!(y1==1&&_6(li,hf)||y1==2&&w6(li)))switch(t1&&0<t1.length&&(hf=li.h,hf.i=hf.i.concat(t1)),e2){case 1:Y6(li,5);break;case 4:Y6(li,10);break;case 3:Y6(li,6);break;default:Y6(li,2)}}}function J5(li,hf){let t1=li.Ta+Math.floor(Math.random()*li.cb);return li.isActive()||(t1*=2),t1*hf}function Y6(li,hf){if(li.j.info("Error code "+hf),hf==2){var t1=P(li.fb,li),y1=li.Xa;const e2=!y1;y1=new b3(y1||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||m4(y1,"https"),ff(y1),e2?D4(y1.toString(),t1):C4(y1.toString(),t1)}else V1(2);li.G=0,li.l&&li.l.sa(hf),vv(li),g3(li)}t.fb=function(li){li?(this.j.info("Successfully pinged google.com"),V1(2)):(this.j.info("Failed to ping google.com"),V1(1))};function vv(li){if(li.G=0,li.ka=[],li.l){const hf=s6(li.h);(hf.length!=0||li.i.length!=0)&&(He(li.ka,hf),He(li.ka,li.i),li.h.i.length=0,ve(li.i),li.i.length=0),li.l.ra()}}function yv(li,hf,t1){var y1=t1 instanceof b3?W3(t1):new b3(t1);if(y1.g!="")hf&&(y1.g=hf+"."+y1.g),ae(y1,y1.s);else{var e2=c.location;y1=e2.protocol,hf=hf?hf+"."+e2.hostname:e2.hostname,e2=+e2.port;var E2=new b3(null);y1&&m4(E2,y1),hf&&(E2.g=hf),e2&&ae(E2,e2),t1&&(E2.l=t1),y1=E2}return t1=li.D,hf=li.ya,t1&&hf&&wh(y1,t1,hf),wh(y1,"VER",li.la),G4(li,y1),y1}function bv(li,hf,t1){if(hf&&!li.J)throw Error("Can't create secondary domain capable XhrIo object.");return hf=li.Ca&&!li.pa?new p4(new r3({eb:t1})):new p4(li.pa),hf.Ha(li.J),hf}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _v(){}t=_v.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function C5(){}C5.prototype.g=function(li,hf){return new o6(li,hf)};function o6(li,hf){o1.call(this),this.g=new b6(hf),this.l=li,this.h=hf&&hf.messageUrlParams||null,li=hf&&hf.messageHeaders||null,hf&&hf.clientProtocolHeaderRequired&&(li?li["X-Client-Protocol"]="webchannel":li={"X-Client-Protocol":"webchannel"}),this.g.o=li,li=hf&&hf.initMessageHeaders||null,hf&&hf.messageContentType&&(li?li["X-WebChannel-Content-Type"]=hf.messageContentType:li={"X-WebChannel-Content-Type":hf.messageContentType}),hf&&hf.va&&(li?li["X-WebChannel-Client-Profile"]=hf.va:li={"X-WebChannel-Client-Profile":hf.va}),this.g.S=li,(li=hf&&hf.Sb)&&!Xe(li)&&(this.g.m=li),this.v=hf&&hf.supportsCrossDomainXhr||!1,this.u=hf&&hf.sendRawJson||!1,(hf=hf&&hf.httpSessionIdParam)&&!Xe(hf)&&(this.g.D=hf,li=this.h,li!==null&&hf in li&&(li=this.h,hf in li&&delete li[hf])),this.j=new O6(this)}me(o6,o1),o6.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},o6.prototype.close=function(){Q3(this.g)},o6.prototype.o=function(li){var hf=this.g;if(typeof li=="string"){var t1={};t1.__data__=li,li=t1}else this.u&&(t1={},t1.__data__=f2(li),li=t1);hf.i.push(new d4(hf.Ya++,li)),hf.G==3&&k3(hf)},o6.prototype.N=function(){this.g.l=null,delete this.j,Q3(this.g),delete this.g,o6.aa.N.call(this)};function xv(li){v2.call(this),li.__headers__&&(this.headers=li.__headers__,this.statusCode=li.__status__,delete li.__headers__,delete li.__status__);var hf=li.__sm__;if(hf){e:{for(const t1 in hf){li=t1;break e}li=void 0}(this.i=li)&&(li=this.i,hf=hf!==null&&li in hf?hf[li]:void 0),this.data=hf}else this.data=li}me(xv,v2);function wv(){z2.call(this),this.status=1}me(wv,z2);function O6(li){this.g=li}me(O6,_v),O6.prototype.ua=function(){e1(this.g,"a")},O6.prototype.ta=function(li){e1(this.g,new xv(li))},O6.prototype.sa=function(li){e1(this.g,new wv)},O6.prototype.ra=function(){e1(this.g,"b")},C5.prototype.createWebChannel=C5.prototype.g,o6.prototype.send=o6.prototype.o,o6.prototype.open=o6.prototype.m,o6.prototype.close=o6.prototype.close,createWebChannelTransport=function(){return new C5},getStatEventTarget=function(){return n4()},Event$1=q2,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ym.NO_ERROR=0,Ym.TIMEOUT=8,Ym.HTTP_ERROR=6,ErrorCode=Ym,d1.COMPLETE="complete",EventType=d1,P2.EventType=J1,J1.OPEN="a",J1.CLOSE="b",J1.ERROR="c",J1.MESSAGE="d",o1.prototype.listen=o1.prototype.K,WebChannel=P2,p4.prototype.listenOnce=p4.prototype.L,p4.prototype.getLastError=p4.prototype.Ka,p4.prototype.getLastErrorCode=p4.prototype.Ba,p4.prototype.getStatus=p4.prototype.Z,p4.prototype.getResponseJson=p4.prototype.Oa,p4.prototype.getResponseText=p4.prototype.oa,p4.prototype.send=p4.prototype.ea,p4.prototype.setWithCredentials=p4.prototype.Ha,XhrIo=p4}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F="@firebase/firestore",M="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$1=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O$1.logLevel}function __PRIVATE_logDebug(t,...e){if(O$1.logLevel<=LogLevel.DEBUG){const a=e.map(__PRIVATE_argToString);O$1.debug(`Firestore (${x}): ${t}`,...a)}}function __PRIVATE_logError(t,...e){if(O$1.logLevel<=LogLevel.ERROR){const a=e.map(__PRIVATE_argToString);O$1.error(`Firestore (${x}): ${t}`,...a)}}function __PRIVATE_logWarn(t,...e){if(O$1.logLevel<=LogLevel.WARN){const a=e.map(__PRIVATE_argToString);O$1.warn(`Firestore (${x}): ${t}`,...a)}}function __PRIVATE_argToString(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(a){return JSON.stringify(a)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(t,e,a){let s="Unexpected state";typeof e=="string"?s=e:a=e,__PRIVATE__fail(t,s,a)}function __PRIVATE__fail(t,e,a){let s=`FIRESTORE (${x}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(a!==void 0)try{s+=" CONTEXT: "+JSON.stringify(a)}catch{s+=" CONTEXT: "+a}throw __PRIVATE_logError(s),new Error(s)}function __PRIVATE_hardAssert(t,e,a,s){let o="Unexpected state";typeof a=="string"?o=a:s=a,t||__PRIVATE__fail(e,o,s)}function __PRIVATE_debugCast(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,a){super(e,a),this.code=e,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,a){e.enqueueRetryable(()=>a(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,a){this.changeListener=a,e.enqueueRetryable(()=>a(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,a){__PRIVATE_hardAssert(this.o===void 0,42304);let s=this.i;const o=d=>this.i!==s?(s=this.i,a(d)):Promise.resolve();let l=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new __PRIVATE_Deferred,e.enqueueRetryable(()=>o(this.currentUser))};const u=()=>{const d=l;e.enqueueRetryable(async()=>{await d.promise,await o(this.currentUser)})},c=d=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new __PRIVATE_Deferred)}},0),u()}getToken(){const e=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(s=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(__PRIVATE_hardAssert(typeof s.accessToken=="string",31837,{l:s}),new __PRIVATE_OAuthToken(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,a,s){this.P=e,this.T=a,this.I=s,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,a,s){this.P=e,this.T=a,this.I=s}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,a){e.enqueueRetryable(()=>a(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,a){this.V=a,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,a){__PRIVATE_hardAssert(this.o===void 0,3512);const s=l=>{l.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?a(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(a=>a?(__PRIVATE_hardAssert(typeof a.token=="string",44558,{tokenResult:a}),this.m=a.token,new AppCheckToken(a.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(a);else for(let s=0;s<t;s++)a[s]=Math.floor(256*Math.random());return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=__PRIVATE_randomBytes(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<a&&(s+=e.charAt(o[l]%62))}return s}}function __PRIVATE_primitiveComparator(t,e){return t<e?-1:t>e?1:0}function __PRIVATE_compareUtf8Strings(t,e){const a=Math.min(t.length,e.length);for(let s=0;s<a;s++){const o=t.charAt(s),l=e.charAt(s);if(o!==l)return __PRIVATE_isSurrogate(o)===__PRIVATE_isSurrogate(l)?__PRIVATE_primitiveComparator(o,l):__PRIVATE_isSurrogate(o)?1:-1}return __PRIVATE_primitiveComparator(t.length,e.length)}const B=55296,L=57343;function __PRIVATE_isSurrogate(t){const e=t.charCodeAt(0);return e>=B&&e<=L}function __PRIVATE_arrayEquals(t,e,a){return t.length===e.length&&t.every((s,o)=>a(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k="__name__";class BasePath{constructor(e,a,s){a===void 0?a=0:a>e.length&&fail(637,{offset:a,range:e.length}),s===void 0?s=e.length-a:s>e.length-a&&fail(1746,{length:s,range:e.length-a}),this.segments=e,this.offset=a,this.len=s}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const a=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(s=>{a.push(s)}):a.push(e),this.construct(a)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}forEach(e){for(let a=this.offset,s=this.limit();a<s;a++)e(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,a){const s=Math.min(e.length,a.length);for(let o=0;o<s;o++){const l=BasePath.compareSegments(e.get(o),a.get(o));if(l!==0)return l}return __PRIVATE_primitiveComparator(e.length,a.length)}static compareSegments(e,a){const s=BasePath.isNumericId(e),o=BasePath.isNumericId(a);return s&&!o?-1:!s&&o?1:s&&o?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(a)):__PRIVATE_compareUtf8Strings(e,a)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,a,s){return new ResourcePath(e,a,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const a=[];for(const s of e){if(s.indexOf("//")>=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);a.push(...s.split("/").filter(o=>o.length>0))}return new ResourcePath(a)}static emptyPath(){return new ResourcePath([])}}const q$1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,a,s){return new FieldPath$1(e,a,s)}static isValidIdentifier(e){return q$1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k}static keyField(){return new FieldPath$1([k])}static fromServerFormat(e){const a=[];let s="",o=0;const l=()=>{if(s.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(s),s=""};let u=!1;for(;o<e.length;){const c=e[o];if(c==="\\"){if(o+1===e.length)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[o+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=d,o+=2}else c==="`"?(u=!u,o++):c!=="."||u?(s+=c,o++):(l(),o++)}if(l(),u)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(a)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,a){return ResourcePath.comparator(e.path,a.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(t,e,a){if(!a)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(t,e,a,s){if(e===!0&&s===!0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`${t} and ${a} cannot be used together.`)}function __PRIVATE_validateDocumentPath(t){if(!DocumentKey.isDocumentKey(t))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_validateCollectionPath(t){if(DocumentKey.isDocumentKey(t))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_isPlainObject(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function __PRIVATE_valueDescription(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fail(12329,{type:typeof t})}function __PRIVATE_cast(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=__PRIVATE_valueDescription(t);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${a}`)}}return t}function __PRIVATE_validatePositiveNumber(t,e){if(e<=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property$1(t,e){const a={typeString:t};return e&&(a.value=e),a}function __PRIVATE_validateJSON(t,e){if(!__PRIVATE_isPlainObject(t))throw new FirestoreError(N$1.INVALID_ARGUMENT,"JSON must be an object");let a;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){a=`JSON missing required field: '${s}'`;break}const u=t[s];if(o&&typeof u!==o){a=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&u!==l.value){a=`Expected '${s}' field to equal '${l.value}'`;break}}if(a)throw new FirestoreError(N$1.INVALID_ARGUMENT,a);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$1=-62135596800,$$1=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const a=Math.floor(e/1e3),s=Math.floor((e-1e3*a)*$$1);return new Timestamp(a,s)}constructor(e,a){if(this.seconds=e,this.nanoseconds=a,a<0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(e<Q$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$$1}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q$1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property$1("string",Timestamp._jsonSchemaVersion),seconds:property$1("number"),nanoseconds:property$1("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$1=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(t,e){const a=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,o=SnapshotVersion.fromTimestamp(s===1e9?new Timestamp(a+1,0):new Timestamp(a,s));return new IndexOffset(o,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(t){return new IndexOffset(t.readTime,t.key,U$1)}class IndexOffset{constructor(e,a,s){this.readTime=e,this.documentKey=a,this.largestBatchId=s}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),U$1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),U$1)}}function __PRIVATE_indexOffsetComparator(t,e){let a=t.readTime.compareTo(e.readTime);return a!==0?a:(a=DocumentKey.comparator(t.documentKey,e.documentKey),a!==0?a:__PRIVATE_primitiveComparator(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(t){if(t.code!==N$1.FAILED_PRECONDITION||t.message!==K)throw t;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)},a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)})}catch(e){return this.next(void 0,e)}next(e,a){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(a,l).next(s,o)}})}toPromise(){return new Promise((e,a)=>{this.next(e,a)})}wrapUserFunction(e){try{const a=e();return a instanceof PersistencePromise?a:PersistencePromise.resolve(a)}catch(a){return PersistencePromise.reject(a)}}wrapSuccess(e,a){return e?this.wrapUserFunction(()=>e(a)):PersistencePromise.resolve(a)}wrapFailure(e,a){return e?this.wrapUserFunction(()=>e(a)):PersistencePromise.reject(a)}static resolve(e){return new PersistencePromise((a,s)=>{a(e)})}static reject(e){return new PersistencePromise((a,s)=>{s(e)})}static waitFor(e){return new PersistencePromise((a,s)=>{let o=0,l=0,u=!1;e.forEach(c=>{++o,c.next(()=>{++l,u&&l===o&&a()},d=>s(d))}),u=!0,l===o&&a()})}static or(e){let a=PersistencePromise.resolve(!1);for(const s of e)a=a.next(o=>o?PersistencePromise.resolve(o):s());return a}static forEach(e,a){const s=[];return e.forEach((o,l)=>{s.push(a.call(this,o,l))}),this.waitFor(s)}static mapArray(e,a){return new PersistencePromise((s,o)=>{const l=e.length,u=new Array(l);let c=0;for(let d=0;d<l;d++){const m=d;a(e[m]).next(g=>{u[m]=g,++c,c===l&&s(u)},g=>o(g))}})}static doWhile(e,a){return new PersistencePromise((s,o)=>{const l=()=>{e()===!0?a().next(()=>{l()},o):s()};l()})}}function __PRIVATE_getAndroidVersion(t){const e=t.match(/Android ([\d.]+)/i),a=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(a)}function __PRIVATE_isIndexedDbTransactionError(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,a){this.previousValue=e,a&&(a.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>a.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}__PRIVATE_ListenSequence.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$1=-1;function __PRIVATE_isNullOrUndefined(t){return t==null}function __PRIVATE_isNegativeZero(t){return t===0&&1/t==-1/0}function isSafeInteger(t){return typeof t=="number"&&Number.isInteger(t)&&!__PRIVATE_isNegativeZero(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J="";function __PRIVATE_encodeResourcePath(t){let e="";for(let a=0;a<t.length;a++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(t.get(a),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(t,e){let a=e;const s=t.length;for(let o=0;o<s;o++){const l=t.charAt(o);switch(l){case"\0":a+="";break;case J:a+="";break;default:a+=l}}return a}function __PRIVATE_encodeSeparator(t){return t+J+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(t){let e=0;for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e++;return e}function forEach$1(t,e){for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e(a,t[a])}function __PRIVATE_mapToArray(t,e){const a=[];for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.push(e(t[s],s,t));return a}function isEmpty(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,a){this.comparator=e,this.root=a||LLRBNode.EMPTY}insert(e,a){return new SortedMap(this.comparator,this.root.insert(e,a,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return a.value;s<0?a=a.left:s>0&&(a=a.right)}return null}indexOf(e){let a=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return a+s.left.size;o<0?s=s.left:(a+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((a,s)=>(e(a,s),!1))}toString(){const e=[];return this.inorderTraversal((a,s)=>(e.push(`${a}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,a,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=a?s(e.key,a):1,a&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const a={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,a,s,o,l){this.key=e,this.value=a,this.color=s??LLRBNode.RED,this.left=o??LLRBNode.EMPTY,this.right=l??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,a,s,o,l){return new LLRBNode(e??this.key,a??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,a,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,a,s),null):l===0?o.copy(null,a,null,null,null):o.copy(null,null,null,null,o.right.insert(e,a,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,a){let s,o=this;if(a(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,a),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),a(e,o.key)===0){if(o.right.isEmpty())return LLRBNode.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,a))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,a)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,a,s,o,l){return this}insert(e,a,s){return new LLRBNode(e,a)}remove(e,a){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((a,s)=>(e(a),!1))}forEachInRange(e,a){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;a(o.key)}}forEachWhile(e,a){let s;for(s=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const a=this.data.getIteratorFrom(e);return a.hasNext()?a.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let a=this;return a.size<e.size&&(a=e,e=this),e.forEach(s=>{a=a.add(s)}),a}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const a=this.data.getIterator(),s=e.data.getIterator();for(;a.hasNext();){const o=a.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(a=>{e.push(a)}),e}toString(){const e=[];return this.forEach(a=>e.push(a)),"SortedSet("+e.toString()+")"}copy(e){const a=new SortedSet(this.comparator);return a.data=e,a}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let a=new SortedSet(FieldPath$1.comparator);for(const s of this.fields)a=a.add(s);for(const s of e)a=a.add(s);return new FieldMask(a.toArray())}covers(e){for(const a of this.fields)if(a.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(a,s)=>a.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const a=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+l):l}}(e);return new ByteString(a)}static fromUint8Array(e){const a=function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l}(e);return new ByteString(a)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(a){return btoa(a)}(this.binaryString)}toUint8Array(){return function(a){const s=new Uint8Array(a.length);for(let o=0;o<a.length;o++)s[o]=a.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ot$1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(t){if(__PRIVATE_hardAssert(!!t,39018),typeof t=="string"){let e=0;const a=ot$1.exec(t);if(__PRIVATE_hardAssert(!!a,46558,{timestamp:t}),a[1]){let o=a[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(t.seconds),nanos:__PRIVATE_normalizeNumber(t.nanos)}}function __PRIVATE_normalizeNumber(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function __PRIVATE_normalizeByteString(t){return typeof t=="string"?ByteString.fromBase64String(t):ByteString.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t$1="server_timestamp",at$1="__type__",ut$1="__previous_value__",ct$1="__local_write_time__";function __PRIVATE_isServerTimestamp(t){return(t?.mapValue?.fields||{})[at$1]?.stringValue===_t$1}function __PRIVATE_getPreviousValue(t){const e=t.mapValue.fields[ut$1];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(t){const e=__PRIVATE_normalizeTimestamp(t.mapValue.fields[ct$1].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,a,s,o,l,u,c,d,m,g){this.databaseId=e,this.appId=a,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g}}const lt$1="(default)";class DatabaseId{constructor(e,a){this.projectId=e,this.database=a||lt$1}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===lt$1}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht$1="__type__",Pt$1="__max__",Tt$1={mapValue:{}},It$1="__vector__",Et$1="value";function __PRIVATE_typeOrder(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?__PRIVATE_isServerTimestamp(t)?4:__PRIVATE_isMaxValue(t)?9007199254740991:__PRIVATE_isVectorValue(t)?10:11:fail(28295,{value:t})}function __PRIVATE_valueEquals(t,e){if(t===e)return!0;const a=__PRIVATE_typeOrder(t);if(a!==__PRIVATE_typeOrder(e))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(t).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=__PRIVATE_normalizeTimestamp(o.timestampValue),c=__PRIVATE_normalizeTimestamp(l.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,l){return __PRIVATE_normalizeByteString(o.bytesValue).isEqual(__PRIVATE_normalizeByteString(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,l){return __PRIVATE_normalizeNumber(o.geoPointValue.latitude)===__PRIVATE_normalizeNumber(l.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(o.geoPointValue.longitude)===__PRIVATE_normalizeNumber(l.geoPointValue.longitude)}(t,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return __PRIVATE_normalizeNumber(o.integerValue)===__PRIVATE_normalizeNumber(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=__PRIVATE_normalizeNumber(o.doubleValue),c=__PRIVATE_normalizeNumber(l.doubleValue);return u===c?__PRIVATE_isNegativeZero(u)===__PRIVATE_isNegativeZero(c):isNaN(u)&&isNaN(c)}return!1}(t,e);case 9:return __PRIVATE_arrayEquals(t.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(o,l){const u=o.mapValue.fields||{},c=l.mapValue.fields||{};if(__PRIVATE_objectSize(u)!==__PRIVATE_objectSize(c))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(c[d]===void 0||!__PRIVATE_valueEquals(u[d],c[d])))return!1;return!0}(t,e);default:return fail(52216,{left:t})}}function __PRIVATE_arrayValueContains(t,e){return(t.values||[]).find(a=>__PRIVATE_valueEquals(a,e))!==void 0}function __PRIVATE_valueCompare(t,e){if(t===e)return 0;const a=__PRIVATE_typeOrder(t),s=__PRIVATE_typeOrder(e);if(a!==s)return __PRIVATE_primitiveComparator(a,s);switch(a){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(t.booleanValue,e.booleanValue);case 2:return function(l,u){const c=__PRIVATE_normalizeNumber(l.integerValue||l.doubleValue),d=__PRIVATE_normalizeNumber(u.integerValue||u.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return __PRIVATE_compareTimestamps(t.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(t),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(t.stringValue,e.stringValue);case 6:return function(l,u){const c=__PRIVATE_normalizeByteString(l),d=__PRIVATE_normalizeByteString(u);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(l,u){const c=l.split("/"),d=u.split("/");for(let m=0;m<c.length&&m<d.length;m++){const g=__PRIVATE_primitiveComparator(c[m],d[m]);if(g!==0)return g}return __PRIVATE_primitiveComparator(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,u){const c=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(l.latitude),__PRIVATE_normalizeNumber(u.latitude));return c!==0?c:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(l.longitude),__PRIVATE_normalizeNumber(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(t.arrayValue,e.arrayValue);case 10:return function(l,u){const c=l.fields||{},d=u.fields||{},m=c[Et$1]?.arrayValue,g=d[Et$1]?.arrayValue,A=__PRIVATE_primitiveComparator(m?.values?.length||0,g?.values?.length||0);return A!==0?A:__PRIVATE_compareArrays(m,g)}(t.mapValue,e.mapValue);case 11:return function(l,u){if(l===Tt$1.mapValue&&u===Tt$1.mapValue)return 0;if(l===Tt$1.mapValue)return 1;if(u===Tt$1.mapValue)return-1;const c=l.fields||{},d=Object.keys(c),m=u.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let A=0;A<d.length&&A<g.length;++A){const P=__PRIVATE_compareUtf8Strings(d[A],g[A]);if(P!==0)return P;const W=__PRIVATE_valueCompare(c[d[A]],m[g[A]]);if(W!==0)return W}return __PRIVATE_primitiveComparator(d.length,g.length)}(t.mapValue,e.mapValue);default:throw fail(23264,{he:a})}}function __PRIVATE_compareTimestamps(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return __PRIVATE_primitiveComparator(t,e);const a=__PRIVATE_normalizeTimestamp(t),s=__PRIVATE_normalizeTimestamp(e),o=__PRIVATE_primitiveComparator(a.seconds,s.seconds);return o!==0?o:__PRIVATE_primitiveComparator(a.nanos,s.nanos)}function __PRIVATE_compareArrays(t,e){const a=t.values||[],s=e.values||[];for(let o=0;o<a.length&&o<s.length;++o){const l=__PRIVATE_valueCompare(a[o],s[o]);if(l)return l}return __PRIVATE_primitiveComparator(a.length,s.length)}function canonicalId(t){return __PRIVATE_canonifyValue(t)}function __PRIVATE_canonifyValue(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(a){const s=__PRIVATE_normalizeTimestamp(a);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(a){return __PRIVATE_normalizeByteString(a).toBase64()}(t.bytesValue):"referenceValue"in t?function(a){return DocumentKey.fromName(a).toString()}(t.referenceValue):"geoPointValue"in t?function(a){return`geo(${a.latitude},${a.longitude})`}(t.geoPointValue):"arrayValue"in t?function(a){let s="[",o=!0;for(const l of a.values||[])o?o=!1:s+=",",s+=__PRIVATE_canonifyValue(l);return s+"]"}(t.arrayValue):"mapValue"in t?function(a){const s=Object.keys(a.fields||{}).sort();let o="{",l=!0;for(const u of s)l?l=!1:o+=",",o+=`${u}:${__PRIVATE_canonifyValue(a.fields[u])}`;return o+"}"}(t.mapValue):fail(61005,{value:t})}function __PRIVATE_estimateByteSize(t){switch(__PRIVATE_typeOrder(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(t);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*t.stringValue.length;case 6:return __PRIVATE_normalizeByteString(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+__PRIVATE_estimateByteSize(l),0)}(t.arrayValue);case 10:case 11:return function(s){let o=0;return forEach$1(s.fields,(l,u)=>{o+=l.length+__PRIVATE_estimateByteSize(u)}),o}(t.mapValue);default:throw fail(13486,{value:t})}}function __PRIVATE_refValue(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function isInteger(t){return!!t&&"integerValue"in t}function isArray$2(t){return!!t&&"arrayValue"in t}function __PRIVATE_isNullValue(t){return!!t&&"nullValue"in t}function __PRIVATE_isNanValue(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function __PRIVATE_isMapValue(t){return!!t&&"mapValue"in t}function __PRIVATE_isVectorValue(t){return(t?.mapValue?.fields||{})[ht$1]?.stringValue===It$1}function __PRIVATE_deepClone(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return forEach$1(t.mapValue.fields,(a,s)=>e.mapValue.fields[a]=__PRIVATE_deepClone(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let a=0;a<(t.arrayValue.values||[]).length;++a)e.arrayValue.values[a]=__PRIVATE_deepClone(t.arrayValue.values[a]);return e}return{...t}}function __PRIVATE_isMaxValue(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Pt$1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let a=this.value;for(let s=0;s<e.length-1;++s)if(a=(a.mapValue.fields||{})[e.get(s)],!__PRIVATE_isMapValue(a))return null;return a=(a.mapValue.fields||{})[e.lastSegment()],a||null}}set(e,a){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(a)}setAll(e){let a=FieldPath$1.emptyPath(),s={},o=[];e.forEach((u,c)=>{if(!a.isImmediateParentOf(c)){const d=this.getFieldsMap(a);this.applyChanges(d,s,o),s={},o=[],a=c.popLast()}u?s[c.lastSegment()]=__PRIVATE_deepClone(u):o.push(c.lastSegment())});const l=this.getFieldsMap(a);this.applyChanges(l,s,o)}delete(e){const a=this.field(e.popLast());__PRIVATE_isMapValue(a)&&a.mapValue.fields&&delete a.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=a.mapValue.fields[e.get(s)];__PRIVATE_isMapValue(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},a.mapValue.fields[e.get(s)]=o),a=o}return a.mapValue.fields}applyChanges(e,a,s){forEach$1(a,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(t){const e=[];return forEach$1(t.fields,(a,s)=>{const o=new FieldPath$1([a]);if(__PRIVATE_isMapValue(s)){const l=__PRIVATE_extractFieldMask(s.mapValue).fields;if(l.length===0)e.push(o);else for(const u of l)e.push(o.child(u))}else e.push(o)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,a,s,o,l,u,c){this.key=e,this.documentType=a,this.version=s,this.readTime=o,this.createTime=l,this.data=u,this.documentState=c}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,a,s,o){return new MutableDocument(e,1,a,SnapshotVersion.min(),s,o,0)}static newNoDocument(e,a){return new MutableDocument(e,2,a,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,a){return new MutableDocument(e,3,a,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,a){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,a){this.position=e,this.inclusive=a}}function __PRIVATE_boundCompareToDocument(t,e,a){let s=0;for(let o=0;o<t.position.length;o++){const l=e[o],u=t.position[o];if(l.field.isKeyField()?s=DocumentKey.comparator(DocumentKey.fromName(u.referenceValue),a.key):s=__PRIVATE_valueCompare(u,a.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function __PRIVATE_boundEquals(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let a=0;a<t.position.length;a++)if(!__PRIVATE_valueEquals(t.position[a],e.position[a]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,a="asc"){this.field=e,this.dir=a}}function __PRIVATE_orderByEquals(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Filter$1=class{};class FieldFilter extends Filter$1{constructor(e,a,s){super(),this.field=e,this.op=a,this.value=s}static create(e,a,s){return e.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(e,a,s):new __PRIVATE_KeyFieldFilter(e,a,s):a==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,s):a==="in"?new __PRIVATE_InFilter(e,s):a==="not-in"?new __PRIVATE_NotInFilter(e,s):a==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,s):new FieldFilter(e,a,s)}static createKeyFieldInFilter(e,a,s){return a==="in"?new __PRIVATE_KeyFieldInFilter(e,s):new __PRIVATE_KeyFieldNotInFilter(e,s)}matches(e){const a=e.data.field(this.field);return this.op==="!="?a!==null&&a.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(a,this.value)):a!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(a)&&this.matchesComparison(__PRIVATE_valueCompare(a,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter$1{constructor(e,a){super(),this.filters=e,this.op=a,this.Pe=null}static create(e,a){return new CompositeFilter(e,a)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(a=>!a.matches(e))===void 0:this.filters.find(a=>a.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,a)=>e.concat(a.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(t){return t.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(t){return __PRIVATE_compositeFilterIsFlat(t)&&__PRIVATE_compositeFilterIsConjunction(t)}function __PRIVATE_compositeFilterIsFlat(t){for(const e of t.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(t){if(t instanceof FieldFilter)return t.field.canonicalString()+t.op.toString()+canonicalId(t.value);if(__PRIVATE_compositeFilterIsFlatConjunction(t))return t.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=t.filters.map(a=>__PRIVATE_canonifyFilter(a)).join(",");return`${t.op}(${e})`}}function __PRIVATE_filterEquals(t,e){return t instanceof FieldFilter?function(s,o){return o instanceof FieldFilter&&s.op===o.op&&s.field.isEqual(o.field)&&__PRIVATE_valueEquals(s.value,o.value)}(t,e):t instanceof CompositeFilter?function(s,o){return o instanceof CompositeFilter&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,u,c)=>l&&__PRIVATE_filterEquals(u,o.filters[c]),!0):!1}(t,e):void fail(19439)}function __PRIVATE_stringifyFilter(t){return t instanceof FieldFilter?function(a){return`${a.field.canonicalString()} ${a.op} ${canonicalId(a.value)}`}(t):t instanceof CompositeFilter?function(a){return a.op.toString()+" {"+a.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(t):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,a,s){super(e,a,s),this.key=DocumentKey.fromName(s.referenceValue)}matches(e){const a=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(a)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,a){super(e,"in",a),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",a)}matches(e){return this.keys.some(a=>a.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,a){super(e,"not-in",a),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",a)}matches(e){return!this.keys.some(a=>a.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(t,e){return(e.arrayValue?.values||[]).map(a=>DocumentKey.fromName(a.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,a){super(e,"array-contains",a)}matches(e){const a=e.data.field(this.field);return isArray$2(a)&&__PRIVATE_arrayValueContains(a.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,a){super(e,"in",a)}matches(e){const a=e.data.field(this.field);return a!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,a)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,a){super(e,"not-in",a)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=e.data.field(this.field);return a!==null&&a.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,a)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,a){super(e,"array-contains-any",a)}matches(e){const a=e.data.field(this.field);return!(!isArray$2(a)||!a.arrayValue.values)&&a.arrayValue.values.some(s=>__PRIVATE_arrayValueContains(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,a=null,s=[],o=[],l=null,u=null,c=null){this.path=e,this.collectionGroup=a,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=u,this.endAt=c,this.Te=null}}function __PRIVATE_newTarget(t,e=null,a=[],s=[],o=null,l=null,u=null){return new __PRIVATE_TargetImpl(t,e,a,s,o,l,u)}function __PRIVATE_canonifyTarget(t){const e=__PRIVATE_debugCast(t);if(e.Te===null){let a=e.path.canonicalString();e.collectionGroup!==null&&(a+="|cg:"+e.collectionGroup),a+="|f:",a+=e.filters.map(s=>__PRIVATE_canonifyFilter(s)).join(","),a+="|ob:",a+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(a+="|l:",a+=e.limit),e.startAt&&(a+="|lb:",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(s=>canonicalId(s)).join(",")),e.endAt&&(a+="|ub:",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(s=>canonicalId(s)).join(",")),e.Te=a}return e.Te}function __PRIVATE_targetEquals(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<t.orderBy.length;a++)if(!__PRIVATE_orderByEquals(t.orderBy[a],e.orderBy[a]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let a=0;a<t.filters.length;a++)if(!__PRIVATE_filterEquals(t.filters[a],e.filters[a]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(t.startAt,e.startAt)&&__PRIVATE_boundEquals(t.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(t){return DocumentKey.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,a=null,s=[],o=[],l=null,u="F",c=null,d=null){this.path=e,this.collectionGroup=a,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=u,this.startAt=c,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(t,e,a,s,o,l,u,c){return new __PRIVATE_QueryImpl(t,e,a,s,o,l,u,c)}function __PRIVATE_newQueryForPath(t){return new __PRIVATE_QueryImpl(t)}function __PRIVATE_queryMatchesAllDocuments(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(t){return t.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(t){const e=__PRIVATE_debugCast(t);if(e.Ie===null){e.Ie=[];const a=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),a.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new SortedSet(FieldPath$1.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(c=c.add(m.field))})}),c})(e).forEach(l=>{a.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new OrderBy(l,s))}),a.has(FieldPath$1.keyField().canonicalString())||e.Ie.push(new OrderBy(FieldPath$1.keyField(),s))}return e.Ie}function __PRIVATE_queryToTarget(t){const e=__PRIVATE_debugCast(t);return e.Ee||(e.Ee=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(t))),e.Ee}function __PRIVATE_queryToAggregateTarget(t){const e=__PRIVATE_debugCast(t);return e.de||(e.de=__PRIVATE__queryToTarget(e,t.explicitOrderBy)),e.de}function __PRIVATE__queryToTarget(t,e){if(t.limitType==="F")return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new OrderBy(o.field,l)});const a=t.endAt?new Bound(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Bound(t.startAt.position,t.startAt.inclusive):null;return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,a,s)}}function __PRIVATE_queryWithAddedFilter(t,e){const a=t.filters.concat([e]);return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),a,t.limit,t.limitType,t.startAt,t.endAt)}function __PRIVATE_queryWithLimit(t,e,a){return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,a,t.startAt,t.endAt)}function __PRIVATE_queryEquals(t,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(t),__PRIVATE_queryToTarget(e))&&t.limitType===e.limitType}function __PRIVATE_canonifyQuery(t){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(t))}|lt:${t.limitType}`}function __PRIVATE_stringifyQuery(t){return`Query(target=${function(a){let s=a.path.canonicalString();return a.collectionGroup!==null&&(s+=" collectionGroup="+a.collectionGroup),a.filters.length>0&&(s+=`, filters: [${a.filters.map(o=>__PRIVATE_stringifyFilter(o)).join(", ")}]`),__PRIVATE_isNullOrUndefined(a.limit)||(s+=", limit: "+a.limit),a.orderBy.length>0&&(s+=`, orderBy: [${a.orderBy.map(o=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(o)).join(", ")}]`),a.startAt&&(s+=", startAt: ",s+=a.startAt.inclusive?"b:":"a:",s+=a.startAt.position.map(o=>canonicalId(o)).join(",")),a.endAt&&(s+=", endAt: ",s+=a.endAt.inclusive?"a:":"b:",s+=a.endAt.position.map(o=>canonicalId(o)).join(",")),`Target(${s})`}(__PRIVATE_queryToTarget(t))}; limitType=${t.limitType})`}function __PRIVATE_queryMatches(t,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):DocumentKey.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(t,e)&&function(s,o){for(const l of __PRIVATE_queryNormalizedOrderBy(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(t,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(t,e)&&function(s,o){return!(s.startAt&&!function(u,c,d){const m=__PRIVATE_boundCompareToDocument(u,c,d);return u.inclusive?m<=0:m<0}(s.startAt,__PRIVATE_queryNormalizedOrderBy(s),o)||s.endAt&&!function(u,c,d){const m=__PRIVATE_boundCompareToDocument(u,c,d);return u.inclusive?m>=0:m>0}(s.endAt,__PRIVATE_queryNormalizedOrderBy(s),o))}(t,e)}function __PRIVATE_queryCollectionGroup(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function __PRIVATE_newQueryComparator(t){return(e,a)=>{let s=!1;for(const o of __PRIVATE_queryNormalizedOrderBy(t)){const l=__PRIVATE_compareDocs(o,e,a);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(t,e,a){const s=t.field.isKeyField()?DocumentKey.comparator(e.key,a.key):function(l,u,c){const d=u.data.field(l),m=c.data.field(l);return d!==null&&m!==null?__PRIVATE_valueCompare(d,m):fail(42886)}(t.field,e,a);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return fail(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,a){this.mapKeyFn=e,this.equalsFn=a,this.inner={},this.innerSize=0}get(e){const a=this.mapKeyFn(e),s=this.inner[a];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,a){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,a]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,a]);o.push([e,a]),this.innerSize++}delete(e){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[a]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){forEach$1(this.inner,(a,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt$1=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Rt$1}const Vt$1=new SortedMap(DocumentKey.comparator);function documentMap(...t){let e=Vt$1;for(const a of t)e=e.insert(a.key,a);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(t){let e=Vt$1;return t.forEach((a,s)=>e=e.insert(a,s.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(t=>t.toString(),(t,e)=>t.isEqual(e))}const mt$1=new SortedMap(DocumentKey.comparator),ft$1=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...t){let e=ft$1;for(const a of t)e=e.add(a);return e}const gt$1=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return gt$1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(t){return{integerValue:""+t}}function toNumber$1(t,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(t,e,a){return t instanceof __PRIVATE_ServerTimestampTransform?function(o,l){const u={fields:{[at$1]:{stringValue:_t$1},[ct$1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&__PRIVATE_isServerTimestamp(l)&&(l=__PRIVATE_getPreviousValue(l)),l&&(u.fields[ut$1]=l),{mapValue:u}}(a,e):t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):function(o,l){const u=__PRIVATE_computeTransformOperationBaseValue(o,l),c=asNumber$1(u)+asNumber$1(o.Ae);return isInteger(u)&&isInteger(o.Ae)?__PRIVATE_toInteger(c):__PRIVATE_toDouble(o.serializer,c)}(t,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(t,e,a){return t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):a}function __PRIVATE_computeTransformOperationBaseValue(t,e){return t instanceof __PRIVATE_NumericIncrementTransformOperation?function(s){return isInteger(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(t,e){const a=__PRIVATE_coercedFieldValuesArray(e);for(const s of t.elements)a.some(o=>__PRIVATE_valueEquals(o,s))||a.push(s);return{arrayValue:{values:a}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(t,e){let a=__PRIVATE_coercedFieldValuesArray(e);for(const s of t.elements)a=a.filter(o=>!__PRIVATE_valueEquals(o,s));return{arrayValue:{values:a}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,a){super(),this.serializer=e,this.Ae=a}}function asNumber$1(t){return __PRIVATE_normalizeNumber(t.integerValue||t.doubleValue)}function __PRIVATE_coercedFieldValuesArray(t){return isArray$2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldTransform{constructor(e,a){this.field=e,this.transform=a}}function __PRIVATE_fieldTransformEquals(t,e){return t.field.isEqual(e.field)&&function(s,o){return s instanceof __PRIVATE_ArrayUnionTransformOperation&&o instanceof __PRIVATE_ArrayUnionTransformOperation||s instanceof __PRIVATE_ArrayRemoveTransformOperation&&o instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(s.elements,o.elements,__PRIVATE_valueEquals):s instanceof __PRIVATE_NumericIncrementTransformOperation&&o instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(s.Ae,o.Ae):s instanceof __PRIVATE_ServerTimestampTransform&&o instanceof __PRIVATE_ServerTimestampTransform}(t.transform,e.transform)}class MutationResult{constructor(e,a){this.version=e,this.transformResults=a}}class Precondition{constructor(e,a){this.updateTime=e,this.exists=a}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new __PRIVATE_DeleteMutation(t.key,Precondition.none()):new __PRIVATE_SetMutation(t.key,t.data,Precondition.none());{const a=t.data,s=ObjectValue.empty();let o=new SortedSet(FieldPath$1.comparator);for(let l of e.fields)if(!o.has(l)){let u=a.field(l);u===null&&l.length>1&&(l=l.popLast(),u=a.field(l)),u===null?s.delete(l):s.set(l,u),o=o.add(l)}return new __PRIVATE_PatchMutation(t.key,s,new FieldMask(o.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(t,e,a){t instanceof __PRIVATE_SetMutation?function(o,l,u){const c=o.value.clone(),d=__PRIVATE_serverTransformResults(o.fieldTransforms,l,u.transformResults);c.setAll(d),l.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(t,e,a):t instanceof __PRIVATE_PatchMutation?function(o,l,u){if(!__PRIVATE_preconditionIsValidForDocument(o.precondition,l))return void l.convertToUnknownDocument(u.version);const c=__PRIVATE_serverTransformResults(o.fieldTransforms,l,u.transformResults),d=l.data;d.setAll(__PRIVATE_getPatch(o)),d.setAll(c),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(t,e,a):function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,a)}function __PRIVATE_mutationApplyToLocalView(t,e,a,s){return t instanceof __PRIVATE_SetMutation?function(l,u,c,d){if(!__PRIVATE_preconditionIsValidForDocument(l.precondition,u))return c;const m=l.value.clone(),g=__PRIVATE_localTransformResults(l.fieldTransforms,d,u);return m.setAll(g),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(t,e,a,s):t instanceof __PRIVATE_PatchMutation?function(l,u,c,d){if(!__PRIVATE_preconditionIsValidForDocument(l.precondition,u))return c;const m=__PRIVATE_localTransformResults(l.fieldTransforms,d,u),g=u.data;return g.setAll(__PRIVATE_getPatch(l)),g.setAll(m),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),c===null?null:c.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(A=>A.field))}(t,e,a,s):function(l,u,c){return __PRIVATE_preconditionIsValidForDocument(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c}(t,e,a)}function __PRIVATE_mutationExtractBaseValue(t,e){let a=null;for(const s of t.fieldTransforms){const o=e.data.field(s.field),l=__PRIVATE_computeTransformOperationBaseValue(s.transform,o||null);l!=null&&(a===null&&(a=ObjectValue.empty()),a.set(s.field,l))}return a||null}function __PRIVATE_mutationEquals(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&__PRIVATE_arrayEquals(s,o,(l,u)=>__PRIVATE_fieldTransformEquals(l,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,a,s,o=[]){super(),this.key=e,this.value=a,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,a,s,o,l=[]){super(),this.key=e,this.data=a,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(t){const e=new Map;return t.fieldMask.fields.forEach(a=>{if(!a.isEmpty()){const s=t.data.field(a);e.set(a,s)}}),e}function __PRIVATE_serverTransformResults(t,e,a){const s=new Map;__PRIVATE_hardAssert(t.length===a.length,32656,{Re:a.length,Ve:t.length});for(let o=0;o<a.length;o++){const l=t[o],u=l.transform,c=e.data.field(l.field);s.set(l.field,__PRIVATE_applyTransformOperationToRemoteDocument(u,c,a[o]))}return s}function __PRIVATE_localTransformResults(t,e,a){const s=new Map;for(const o of t){const l=o.transform,u=a.data.field(o.field);s.set(o.field,__PRIVATE_applyTransformOperationToLocalView(l,u,e))}return s}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,a,s,o){this.batchId=e,this.localWriteTime=a,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,a){const s=a.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(l,e,s[o])}}applyToLocalView(e,a){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(a=__PRIVATE_mutationApplyToLocalView(s,e,a,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(a=__PRIVATE_mutationApplyToLocalView(s,e,a,this.localWriteTime));return a}applyToLocalDocumentSet(e,a){const s=__PRIVATE_newMutationMap();return this.mutations.forEach(o=>{const l=e.get(o.key),u=l.overlayedDocument;let c=this.applyToLocalView(u,l.mutatedFields);c=a.has(o.key)?null:c;const d=__PRIVATE_calculateOverlayMutation(u,c);d!==null&&s.set(o.key,d),u.isValidDocument()||u.convertToNoDocument(SnapshotVersion.min())}),s}keys(){return this.mutations.reduce((e,a)=>e.add(a.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(a,s)=>__PRIVATE_mutationEquals(a,s))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(a,s)=>__PRIVATE_mutationEquals(a,s))}}class MutationBatchResult{constructor(e,a,s,o){this.batch=e,this.commitVersion=a,this.mutationResults=s,this.docVersions=o}static from(e,a,s){__PRIVATE_hardAssert(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=function(){return mt$1}();const l=e.mutations;for(let u=0;u<l.length;u++)o=o.insert(l[u].key,s[u].version);return new MutationBatchResult(e,a,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,a){this.largestBatchId=e,this.mutation=a}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AggregateImpl{constructor(e,a,s){this.alias=e,this.aggregateType=a,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,a){this.count=e,this.unchangedNames=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt$1,yt$1;function __PRIVATE_isPermanentError(t){switch(t){case N$1.OK:return fail(64938);case N$1.CANCELLED:case N$1.UNKNOWN:case N$1.DEADLINE_EXCEEDED:case N$1.RESOURCE_EXHAUSTED:case N$1.INTERNAL:case N$1.UNAVAILABLE:case N$1.UNAUTHENTICATED:return!1;case N$1.INVALID_ARGUMENT:case N$1.NOT_FOUND:case N$1.ALREADY_EXISTS:case N$1.PERMISSION_DENIED:case N$1.FAILED_PRECONDITION:case N$1.ABORTED:case N$1.OUT_OF_RANGE:case N$1.UNIMPLEMENTED:case N$1.DATA_LOSS:return!0;default:return fail(15467,{code:t})}}function __PRIVATE_mapCodeFromRpcCode(t){if(t===void 0)return __PRIVATE_logError("GRPC error has no .code"),N$1.UNKNOWN;switch(t){case pt$1.OK:return N$1.OK;case pt$1.CANCELLED:return N$1.CANCELLED;case pt$1.UNKNOWN:return N$1.UNKNOWN;case pt$1.DEADLINE_EXCEEDED:return N$1.DEADLINE_EXCEEDED;case pt$1.RESOURCE_EXHAUSTED:return N$1.RESOURCE_EXHAUSTED;case pt$1.INTERNAL:return N$1.INTERNAL;case pt$1.UNAVAILABLE:return N$1.UNAVAILABLE;case pt$1.UNAUTHENTICATED:return N$1.UNAUTHENTICATED;case pt$1.INVALID_ARGUMENT:return N$1.INVALID_ARGUMENT;case pt$1.NOT_FOUND:return N$1.NOT_FOUND;case pt$1.ALREADY_EXISTS:return N$1.ALREADY_EXISTS;case pt$1.PERMISSION_DENIED:return N$1.PERMISSION_DENIED;case pt$1.FAILED_PRECONDITION:return N$1.FAILED_PRECONDITION;case pt$1.ABORTED:return N$1.ABORTED;case pt$1.OUT_OF_RANGE:return N$1.OUT_OF_RANGE;case pt$1.UNIMPLEMENTED:return N$1.UNIMPLEMENTED;case pt$1.DATA_LOSS:return N$1.DATA_LOSS;default:return fail(39323,{code:t})}}(yt$1=pt$1||(pt$1={}))[yt$1.OK=0]="OK",yt$1[yt$1.CANCELLED=1]="CANCELLED",yt$1[yt$1.UNKNOWN=2]="UNKNOWN",yt$1[yt$1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt$1[yt$1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt$1[yt$1.NOT_FOUND=5]="NOT_FOUND",yt$1[yt$1.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt$1[yt$1.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt$1[yt$1.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt$1[yt$1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt$1[yt$1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt$1[yt$1.ABORTED=10]="ABORTED",yt$1[yt$1.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt$1[yt$1.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt$1[yt$1.INTERNAL=13]="INTERNAL",yt$1[yt$1.UNAVAILABLE=14]="UNAVAILABLE",yt$1[yt$1.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St$1=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(t){const e=__PRIVATE_newTextEncoder().encode(t),a=new Md5;return a.update(e),new Uint8Array(a.digest())}function __PRIVATE_get64BitUints(t){const e=new DataView(t.buffer),a=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Integer([a,s],0),new Integer([o,l],0)]}class BloomFilter{constructor(e,a,s){if(this.bitmap=e,this.padding=a,this.hashCount=s,a<0||a>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${a}`);if(s<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${s}`);if(e.length===0&&a!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${a}`);this.ge=8*e.length-a,this.pe=Integer.fromNumber(this.ge)}ye(e,a,s){let o=e.add(a.multiply(Integer.fromNumber(s)));return o.compare(St$1)===1&&(o=new Integer([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const a=__PRIVATE_getMd5HashValue(e),[s,o]=__PRIVATE_get64BitUints(a);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,o,l);if(!this.we(u))return!1}return!0}static create(e,a,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new BloomFilter(l,o,a);return s.forEach(c=>u.insert(c)),u}insert(e){if(this.ge===0)return;const a=__PRIVATE_getMd5HashValue(e),[s,o]=__PRIVATE_get64BitUints(a);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,o,l);this.Se(u)}}Se(e){const a=Math.floor(e/8),s=e%8;this.bitmap[a]|=1<<s}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,a,s,o,l){this.snapshotVersion=e,this.targetChanges=a,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,a,s){const o=new Map;return o.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,a,s)),new RemoteEvent(SnapshotVersion.min(),o,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,a,s,o,l){this.resumeToken=e,this.current=a,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,a,s){return new TargetChange(s,a,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,a,s,o){this.be=e,this.removedTargetIds=a,this.key=s,this.De=o}}class __PRIVATE_ExistenceFilterChange{constructor(e,a){this.targetId=e,this.Ce=a}}class __PRIVATE_WatchTargetChange{constructor(e,a,s=ByteString.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=a,this.resumeToken=s,this.cause=o}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Fe=__PRIVATE_snapshotChangesMap(),this.Me=ByteString.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet(),s=__PRIVATE_documentKeySet();return this.Fe.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:a=a.add(o);break;case 1:s=s.add(o);break;default:fail(38017,{changeType:l})}}),new TargetChange(this.Me,this.xe,e,a,s)}qe(){this.Oe=!1,this.Fe=__PRIVATE_snapshotChangesMap()}Qe(e,a){this.Oe=!0,this.Fe=this.Fe.insert(e,a)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.Ge=e,this.ze=new Map,this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator)}Ze(e){for(const a of e.be)e.De&&e.De.isFoundDocument()?this.Xe(a,e.De):this.et(a,e.key,e.De);for(const a of e.removedTargetIds)this.et(a,e.key,e.De)}tt(e){this.forEachTarget(e,a=>{const s=this.nt(a);switch(e.state){case 0:this.rt(a)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(a);break;case 3:this.rt(a)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(a)&&(this.it(a),s.Le(e.resumeToken));break;default:fail(56790,{state:e.state})}})}forEachTarget(e,a){e.targetIds.length>0?e.targetIds.forEach(a):this.ze.forEach((s,o)=>{this.rt(o)&&a(o)})}st(e){const a=e.targetId,s=e.Ce.count,o=this.ot(a);if(o){const l=o.target;if(__PRIVATE_targetIsDocumentTarget(l))if(s===0){const u=new DocumentKey(l.path);this.et(a,u,MutableDocument.newNoDocument(u,SnapshotVersion.min()))}else __PRIVATE_hardAssert(s===1,20013,{expectedCount:s});else{const u=this._t(a);if(u!==s){const c=this.ut(e),d=c?this.ct(c,e,u):1;if(d!==0){this.it(a);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(a,m)}}}}}ut(e){const a=e.Ce.unchangedNames;if(!a||!a.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=a;let u,c;try{u=__PRIVATE_normalizeByteString(s).toUint8Array()}catch(d){if(d instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new BloomFilter(u,o,l)}catch(d){return __PRIVATE_logWarn(d instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.ge===0?null:c}ct(e,a,s){return a.Ce.count===s-this.Pt(e,a.targetId)?0:2}Pt(e,a){const s=this.Ge.getRemoteKeysForTarget(a);let o=0;return s.forEach(l=>{const u=this.Ge.ht(),c=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(c)||(this.et(a,l,null),o++)}),o}Tt(e){const a=new Map;this.ze.forEach((l,u)=>{const c=this.ot(u);if(c){if(l.current&&__PRIVATE_targetIsDocumentTarget(c.target)){const d=new DocumentKey(c.target.path);this.It(d).has(u)||this.Et(u,d)||this.et(u,d,MutableDocument.newNoDocument(d,e))}l.Be&&(a.set(u,l.ke()),l.qe())}});let s=__PRIVATE_documentKeySet();this.He.forEach((l,u)=>{let c=!0;u.forEachWhile(d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(s=s.add(l))}),this.je.forEach((l,u)=>u.setReadTime(e));const o=new RemoteEvent(e,a,this.Ye,this.je,s);return this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator),o}Xe(e,a){if(!this.rt(e))return;const s=this.Et(e,a.key)?2:0;this.nt(e).Qe(a.key,s),this.je=this.je.insert(a.key,a),this.Je=this.Je.insert(a.key,this.It(a.key).add(e)),this.He=this.He.insert(a.key,this.dt(a.key).add(e))}et(e,a,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,a)?o.Qe(a,1):o.$e(a),this.He=this.He.insert(a,this.dt(a).delete(e)),this.He=this.He.insert(a,this.dt(a).add(e)),s&&(this.je=this.je.insert(a,s))}removeTarget(e){this.ze.delete(e)}_t(e){const a=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+a.addedDocuments.size-a.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let a=this.ze.get(e);return a||(a=new __PRIVATE_TargetState,this.ze.set(e,a)),a}dt(e){let a=this.He.get(e);return a||(a=new SortedSet(__PRIVATE_primitiveComparator),this.He=this.He.insert(e,a)),a}It(e){let a=this.Je.get(e);return a||(a=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,a)),a}rt(e){const a=this.ot(e)!==null;return a||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),a}ot(e){const a=this.ze.get(e);return a&&a.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new __PRIVATE_TargetState),this.Ge.getRemoteKeysForTarget(e).forEach(a=>{this.et(e,a,null)})}Et(e,a){return this.Ge.getRemoteKeysForTarget(e).has(a)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const bt$1={asc:"ASCENDING",desc:"DESCENDING"},Dt$1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ct$1={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,a){this.databaseId=e,this.useProto3Json=a}}function __PRIVATE_toInt32Proto(t,e){return t.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(t,e){return toTimestamp(t,e.toTimestamp())}function __PRIVATE_fromVersion(t){return __PRIVATE_hardAssert(!!t,49232),SnapshotVersion.fromTimestamp(function(a){const s=__PRIVATE_normalizeTimestamp(a);return new Timestamp(s.seconds,s.nanos)}(t))}function __PRIVATE_toResourceName(t,e){return __PRIVATE_toResourcePath(t,e).canonicalString()}function __PRIVATE_toResourcePath(t,e){const a=function(o){return new ResourcePath(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?a:a.child(e)}function __PRIVATE_fromResourceName(t){const e=ResourcePath.fromString(t);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(t,e){return __PRIVATE_toResourceName(t.databaseId,e.path)}function fromName(t,e){const a=__PRIVATE_fromResourceName(e);if(a.get(1)!==t.databaseId.projectId)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+t.databaseId.projectId);if(a.get(3)!==t.databaseId.database)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+t.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(a))}function __PRIVATE_toQueryPath(t,e){return __PRIVATE_toResourceName(t.databaseId,e)}function __PRIVATE_fromQueryPath(t){const e=__PRIVATE_fromResourceName(t);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(t){return new ResourcePath(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(t){return __PRIVATE_hardAssert(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function __PRIVATE_toMutationDocument(t,e,a){return{name:__PRIVATE_toName(t,e),fields:a.value.mapValue.fields}}function __PRIVATE_fromWatchChange(t,e){let a;if("targetChange"in e){e.targetChange;const s=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:fail(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(m,g){return m.useProto3Json?(__PRIVATE_hardAssert(g===void 0||typeof g=="string",58123),ByteString.fromBase64String(g||"")):(__PRIVATE_hardAssert(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),ByteString.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&function(m){const g=m.code===void 0?N$1.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(m.code);return new FirestoreError(g,m.message||"")}(u);a=new __PRIVATE_WatchTargetChange(s,o,l,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=fromName(t,s.document.name),l=__PRIVATE_fromVersion(s.document.updateTime),u=s.document.createTime?__PRIVATE_fromVersion(s.document.createTime):SnapshotVersion.min(),c=new ObjectValue({mapValue:{fields:s.document.fields}}),d=MutableDocument.newFoundDocument(o,l,u,c),m=s.targetIds||[],g=s.removedTargetIds||[];a=new __PRIVATE_DocumentWatchChange(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=fromName(t,s.document),l=s.readTime?__PRIVATE_fromVersion(s.readTime):SnapshotVersion.min(),u=MutableDocument.newNoDocument(o,l),c=s.removedTargetIds||[];a=new __PRIVATE_DocumentWatchChange([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=fromName(t,s.document),l=s.removedTargetIds||[];a=new __PRIVATE_DocumentWatchChange([],l,o,null)}else{if(!("filter"in e))return fail(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,u=new ExistenceFilter(o,l),c=s.targetId;a=new __PRIVATE_ExistenceFilterChange(c,u)}}return a}function toMutation(t,e){let a;if(e instanceof __PRIVATE_SetMutation)a={update:__PRIVATE_toMutationDocument(t,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)a={delete:__PRIVATE_toName(t,e.key)};else if(e instanceof __PRIVATE_PatchMutation)a={update:__PRIVATE_toMutationDocument(t,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{Vt:e.type});a={verify:__PRIVATE_toName(t,e.key)}}return e.fieldTransforms.length>0&&(a.updateTransforms=e.fieldTransforms.map(s=>function(l,u){const c=u.transform;if(c instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:u.field.canonicalString(),increment:c.Ae};throw fail(20930,{transform:u.transform})}(0,s))),e.precondition.isNone||(a.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:fail(27497)}(t,e.precondition)),a}function __PRIVATE_fromWriteResults(t,e){return t&&t.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),t.map(a=>function(o,l){let u=o.updateTime?__PRIVATE_fromVersion(o.updateTime):__PRIVATE_fromVersion(l);return u.isEqual(SnapshotVersion.min())&&(u=__PRIVATE_fromVersion(l)),new MutationResult(u,o.transformResults||[])}(a,e))):[]}function __PRIVATE_toDocumentsTarget(t,e){return{documents:[__PRIVATE_toQueryPath(t,e.path)]}}function __PRIVATE_toQueryTarget(t,e){const a={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,a.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),a.structuredQuery.from=[{collectionId:s.lastSegment()}]),a.parent=__PRIVATE_toQueryPath(t,o);const l=function(m){if(m.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(m,"and"))}(e.filters);l&&(a.structuredQuery.where=l);const u=function(m){if(m.length!==0)return m.map(g=>function(P){return{field:__PRIVATE_toFieldPathReference(P.field),direction:__PRIVATE_toDirection(P.dir)}}(g))}(e.orderBy);u&&(a.structuredQuery.orderBy=u);const c=__PRIVATE_toInt32Proto(t,e.limit);return c!==null&&(a.structuredQuery.limit=c),e.startAt&&(a.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(a.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ft:a,parent:o}}function __PRIVATE_toRunAggregationQueryRequest(t,e,a,s){const{ft:o,parent:l}=__PRIVATE_toQueryTarget(t,e),u={},c=[];let d=0;return a.forEach(m=>{const g="aggregate_"+d++;u[g]=m.alias,m.aggregateType==="count"?c.push({alias:g,count:{}}):m.aggregateType==="avg"?c.push({alias:g,avg:{field:__PRIVATE_toFieldPathReference(m.fieldPath)}}):m.aggregateType==="sum"&&c.push({alias:g,sum:{field:__PRIVATE_toFieldPathReference(m.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:c,structuredQuery:o.structuredQuery},parent:o.parent},gt:u,parent:l}}function __PRIVATE_convertQueryTargetToQuery(t){let e=__PRIVATE_fromQueryPath(t.parent);const a=t.structuredQuery,s=a.from?a.from.length:0;let o=null;if(s>0){__PRIVATE_hardAssert(s===1,65062);const g=a.from[0];g.allDescendants?o=g.collectionId:e=e.child(g.collectionId)}let l=[];a.where&&(l=function(A){const P=__PRIVATE_fromFilter(A);return P instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(P)?P.getFilters():[P]}(a.where));let u=[];a.orderBy&&(u=function(A){return A.map(P=>function(me){return new OrderBy(__PRIVATE_fromFieldPathReference(me.field),function(He){switch(He){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(me.direction))}(P))}(a.orderBy));let c=null;a.limit&&(c=function(A){let P;return P=typeof A=="object"?A.value:A,__PRIVATE_isNullOrUndefined(P)?null:P}(a.limit));let d=null;a.startAt&&(d=function(A){const P=!!A.before,W=A.values||[];return new Bound(W,P)}(a.startAt));let m=null;return a.endAt&&(m=function(A){const P=!A.before,W=A.values||[];return new Bound(W,P)}(a.endAt)),__PRIVATE_newQuery(e,o,u,l,c,"F",d,m)}function __PRIVATE_toListenRequestLabels(t,e){const a=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:o})}}(e.purpose);return a==null?null:{"goog-listen-tags":a}}function __PRIVATE_fromFilter(t){return t.unaryFilter!==void 0?function(a){switch(a.unaryFilter.op){case"IS_NAN":const s=__PRIVATE_fromFieldPathReference(a.unaryFilter.field);return FieldFilter.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=__PRIVATE_fromFieldPathReference(a.unaryFilter.field);return FieldFilter.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=__PRIVATE_fromFieldPathReference(a.unaryFilter.field);return FieldFilter.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=__PRIVATE_fromFieldPathReference(a.unaryFilter.field);return FieldFilter.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(t):t.fieldFilter!==void 0?function(a){return FieldFilter.create(__PRIVATE_fromFieldPathReference(a.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(a.fieldFilter.op),a.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(a){return CompositeFilter.create(a.compositeFilter.filters.map(s=>__PRIVATE_fromFilter(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(a.compositeFilter.op))}(t):fail(30097,{filter:t})}function __PRIVATE_toDirection(t){return bt$1[t]}function __PRIVATE_toOperatorName(t){return Dt$1[t]}function __PRIVATE_toCompositeOperatorName(t){return Ct$1[t]}function __PRIVATE_toFieldPathReference(t){return{fieldPath:t.canonicalString()}}function __PRIVATE_fromFieldPathReference(t){return FieldPath$1.fromServerFormat(t.fieldPath)}function __PRIVATE_toFilter(t){return t instanceof FieldFilter?function(a){if(a.op==="=="){if(__PRIVATE_isNanValue(a.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(a.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(a.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(a.field),op:"IS_NULL"}}}else if(a.op==="!="){if(__PRIVATE_isNanValue(a.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(a.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(a.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(a.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(a.field),op:__PRIVATE_toOperatorName(a.op),value:a.value}}}(t):t instanceof CompositeFilter?function(a){const s=a.getFilters().map(o=>__PRIVATE_toFilter(o));return s.length===1?s[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(a.op),filters:s}}}(t):fail(54877,{filter:t})}function __PRIVATE_toDocumentMask(t){const e=[];return t.fields.forEach(a=>e.push(a.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,a,s,o,l=SnapshotVersion.min(),u=SnapshotVersion.min(),c=ByteString.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=a,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,a){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.yt=e}}function __PRIVATE_fromBundledQuery(t){const e=__PRIVATE_convertQueryTargetToQuery({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,a){return this.Cn.add(a),PersistencePromise.resolve()}getCollectionParents(e,a){return PersistencePromise.resolve(this.Cn.getEntries(a))}addFieldIndex(e,a){return PersistencePromise.resolve()}deleteFieldIndex(e,a){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,a){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,a){return PersistencePromise.resolve(null)}getIndexType(e,a){return PersistencePromise.resolve(0)}getFieldIndexes(e,a){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,a){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,a){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,a,s){return PersistencePromise.resolve()}updateIndexEntries(e,a){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const a=e.lastSegment(),s=e.popLast(),o=this.index[a]||new SortedSet(ResourcePath.comparator),l=!o.has(s);return this.index[a]=o.add(s),l}has(e){const a=e.lastSegment(),s=e.popLast(),o=this.index[a];return o&&o.has(s)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt$1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ot$1=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,a,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=a,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Ot$1,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new __PRIVATE_TargetIdGenerator(0)}static cr(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt$1="LruGarbageCollector",Bt$1=1048576;function __PRIVATE_bufferEntryComparator([t,e],[a,s]){const o=__PRIVATE_primitiveComparator(t,a);return o===0?__PRIVATE_primitiveComparator(e,s):o}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Ir=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Er=0}dr(){return++this.Er}Ar(e){const a=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(a);else{const s=this.buffer.last();__PRIVATE_bufferEntryComparator(a,s)<0&&(this.buffer=this.buffer.delete(s).add(a))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,a,s){this.garbageCollector=e,this.asyncQueue=a,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){__PRIVATE_logDebug(Nt$1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(a){__PRIVATE_isIndexedDbTransactionError(a)?__PRIVATE_logDebug(Nt$1,"Ignoring IndexedDB error during garbage collection: ",a):await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}await this.Vr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,a){this.mr=e,this.params=a}calculateTargetCount(e,a){return this.mr.gr(e).next(s=>Math.floor(a/100*s))}nthSequenceNumber(e,a){if(a===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ce);const s=new __PRIVATE_RollingSequenceNumberBuffer(a);return this.mr.forEachTarget(e,o=>s.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>s.Ar(o))).next(()=>s.maxValue)}removeTargets(e,a,s){return this.mr.removeTargets(e,a,s)}removeOrphanedDocuments(e,a){return this.mr.removeOrphanedDocuments(e,a)}collect(e,a){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(xt$1)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xt$1):this.yr(e,a))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,a){let s,o,l,u,c,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,u=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(s=A,c=Date.now(),this.removeTargets(e,s,a))).next(A=>(l=A,d=Date.now(),this.removeOrphanedDocuments(e,s))).next(A=>(m=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-g}ms
	Determined least recently used ${o} in `+(c-u)+`ms
	Removed ${l} targets in `+(d-c)+`ms
	Removed ${A} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:A})))}}function __PRIVATE_newLruGarbageCollector(t,e){return new __PRIVATE_LruGarbageCollectorImpl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,a)=>e.isEqual(a)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,a){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(a))}getEntry(e,a){this.assertNotApplied();const s=this.changes.get(a);return s!==void 0?PersistencePromise.resolve(s):this.getFromCache(e,a)}getEntries(e,a){return this.getAllFromCache(e,a)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,a){this.overlayedDocument=e,this.mutatedFields=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,a,s,o){this.remoteDocumentCache=e,this.mutationQueue=a,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,a){let s=null;return this.documentOverlayCache.getOverlay(e,a).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,a))).next(o=>(s!==null&&__PRIVATE_mutationApplyToLocalView(s.mutation,o,FieldMask.empty(),Timestamp.now()),o))}getDocuments(e,a){return this.remoteDocumentCache.getEntries(e,a).next(s=>this.getLocalViewOfDocuments(e,s,__PRIVATE_documentKeySet()).next(()=>s))}getLocalViewOfDocuments(e,a,s=__PRIVATE_documentKeySet()){const o=__PRIVATE_newOverlayMap();return this.populateOverlays(e,o,a).next(()=>this.computeViews(e,a,o,s).next(l=>{let u=documentMap();return l.forEach((c,d)=>{u=u.insert(c,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,a){const s=__PRIVATE_newOverlayMap();return this.populateOverlays(e,s,a).next(()=>this.computeViews(e,a,s,__PRIVATE_documentKeySet()))}populateOverlays(e,a,s){const o=[];return s.forEach(l=>{a.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((u,c)=>{a.set(u,c)})})}computeViews(e,a,s,o){let l=__PRIVATE_mutableDocumentMap();const u=__PRIVATE_newDocumentKeyMap(),c=function(){return __PRIVATE_newDocumentKeyMap()}();return a.forEach((d,m)=>{const g=s.get(m.key);o.has(m.key)&&(g===void 0||g.mutation instanceof __PRIVATE_PatchMutation)?l=l.insert(m.key,m):g!==void 0?(u.set(m.key,g.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(g.mutation,m,g.mutation.getFieldMask(),Timestamp.now())):u.set(m.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,l).next(d=>(d.forEach((m,g)=>u.set(m,g)),a.forEach((m,g)=>c.set(m,new OverlayedDocument(g,u.get(m)??null))),c))}recalculateAndSaveOverlays(e,a){const s=__PRIVATE_newDocumentKeyMap();let o=new SortedMap((u,c)=>u-c),l=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,a).next(u=>{for(const c of u)c.keys().forEach(d=>{const m=a.get(d);if(m===null)return;let g=s.get(d)||FieldMask.empty();g=c.applyToLocalView(m,g),s.set(d,g);const A=(o.get(c.batchId)||__PRIVATE_documentKeySet()).add(d);o=o.insert(c.batchId,A)})}).next(()=>{const u=[],c=o.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),m=d.key,g=d.value,A=__PRIVATE_newMutationMap();g.forEach(P=>{if(!l.has(P)){const W=__PRIVATE_calculateOverlayMutation(a.get(P),s.get(P));W!==null&&A.set(P,W),l=l.add(P)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,A))}return PersistencePromise.waitFor(u)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,a){return this.remoteDocumentCache.getEntries(e,a).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,a,s,o){return function(u){return DocumentKey.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(a)?this.getDocumentsMatchingDocumentQuery(e,a.path):__PRIVATE_isCollectionGroupQuery(a)?this.getDocumentsMatchingCollectionGroupQuery(e,a,s,o):this.getDocumentsMatchingCollectionQuery(e,a,s,o)}getNextDocuments(e,a,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,a,s,o).next(l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,a,s.largestBatchId,o-l.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let c=U$1,d=l;return u.next(m=>PersistencePromise.forEach(m,(g,A)=>(c<A.largestBatchId&&(c=A.largestBatchId),l.get(g)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,g).next(P=>{d=d.insert(g,P)}))).next(()=>this.populateOverlays(e,m,l)).next(()=>this.computeViews(e,d,m,__PRIVATE_documentKeySet())).next(g=>({batchId:c,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(g)})))})}getDocumentsMatchingDocumentQuery(e,a){return this.getDocument(e,new DocumentKey(a)).next(s=>{let o=documentMap();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,a,s,o){const l=a.collectionGroup;let u=documentMap();return this.indexManager.getCollectionParents(e,l).next(c=>PersistencePromise.forEach(c,d=>{const m=function(A,P){return new __PRIVATE_QueryImpl(P,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(a,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next(g=>{g.forEach((A,P)=>{u=u.insert(A,P)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,a,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,a.path,s.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,a,s,l,o))).next(u=>{l.forEach((d,m)=>{const g=m.getKey();u.get(g)===null&&(u=u.insert(g,MutableDocument.newInvalidDocument(g)))});let c=documentMap();return u.forEach((d,m)=>{const g=l.get(d);g!==void 0&&__PRIVATE_mutationApplyToLocalView(g.mutation,m,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(a,m)&&(c=c.insert(d,m))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,a){return PersistencePromise.resolve(this.Lr.get(a))}saveBundleMetadata(e,a){return this.Lr.set(a.id,function(o){return{id:o.id,version:o.version,createTime:__PRIVATE_fromVersion(o.createTime)}}(a)),PersistencePromise.resolve()}getNamedQuery(e,a){return PersistencePromise.resolve(this.kr.get(a))}saveNamedQuery(e,a){return this.kr.set(a.name,function(o){return{name:o.name,query:__PRIVATE_fromBundledQuery(o.bundledQuery),readTime:__PRIVATE_fromVersion(o.readTime)}}(a)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.qr=new Map}getOverlay(e,a){return PersistencePromise.resolve(this.overlays.get(a))}getOverlays(e,a){const s=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(a,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,a,s){return s.forEach((o,l)=>{this.St(e,a,l)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,a,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(s)),PersistencePromise.resolve()}getOverlaysForCollection(e,a,s){const o=__PRIVATE_newOverlayMap(),l=a.length+1,u=new DocumentKey(a.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const d=c.getNext().value,m=d.getKey();if(!a.isPrefixOf(m.path))break;m.path.length===l&&d.largestBatchId>s&&o.set(d.getKey(),d)}return PersistencePromise.resolve(o)}getOverlaysForCollectionGroup(e,a,s,o){let l=new SortedMap((m,g)=>m-g);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===a&&m.largestBatchId>s){let g=l.get(m.largestBatchId);g===null&&(g=__PRIVATE_newOverlayMap(),l=l.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const c=__PRIVATE_newOverlayMap(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,g)=>c.set(m,g)),!(c.size()>=o)););return PersistencePromise.resolve(c)}St(e,a,s){const o=this.overlays.get(s.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new Overlay(a,s));let l=this.qr.get(a);l===void 0&&(l=__PRIVATE_documentKeySet(),this.qr.set(a,l)),this.qr.set(a,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,a){return this.sessionToken=a,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Qr=new SortedSet(__PRIVATE_DocReference.$r),this.Ur=new SortedSet(__PRIVATE_DocReference.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,a){const s=new __PRIVATE_DocReference(e,a);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,a){e.forEach(s=>this.addReference(s,a))}removeReference(e,a){this.Gr(new __PRIVATE_DocReference(e,a))}zr(e,a){e.forEach(s=>this.removeReference(s,a))}jr(e){const a=new DocumentKey(new ResourcePath([])),s=new __PRIVATE_DocReference(a,e),o=new __PRIVATE_DocReference(a,e+1),l=[];return this.Ur.forEachInRange([s,o],u=>{this.Gr(u),l.push(u.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const a=new DocumentKey(new ResourcePath([])),s=new __PRIVATE_DocReference(a,e),o=new __PRIVATE_DocReference(a,e+1);let l=__PRIVATE_documentKeySet();return this.Ur.forEachInRange([s,o],u=>{l=l.add(u.key)}),l}containsKey(e){const a=new __PRIVATE_DocReference(e,0),s=this.Qr.firstAfterOrEqual(a);return s!==null&&e.isEqual(s.key)}}class __PRIVATE_DocReference{constructor(e,a){this.key=e,this.Yr=a}static $r(e,a){return DocumentKey.comparator(e.key,a.key)||__PRIVATE_primitiveComparator(e.Yr,a.Yr)}static Kr(e,a){return __PRIVATE_primitiveComparator(e.Yr,a.Yr)||DocumentKey.comparator(e.key,a.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,a){this.indexManager=e,this.referenceDelegate=a,this.mutationQueue=[],this.tr=1,this.Zr=new SortedSet(__PRIVATE_DocReference.$r)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,a,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new MutationBatch(l,a,s,o);this.mutationQueue.push(u);for(const c of o)this.Zr=this.Zr.add(new __PRIVATE_DocReference(c.key,l)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return PersistencePromise.resolve(u)}lookupMutationBatch(e,a){return PersistencePromise.resolve(this.Xr(a))}getNextMutationBatchAfterBatchId(e,a){const s=a+1,o=this.ei(s),l=o<0?0:o;return PersistencePromise.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?j$1:this.tr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,a){const s=new __PRIVATE_DocReference(a,0),o=new __PRIVATE_DocReference(a,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],u=>{const c=this.Xr(u.Yr);l.push(c)}),PersistencePromise.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,a){let s=new SortedSet(__PRIVATE_primitiveComparator);return a.forEach(o=>{const l=new __PRIVATE_DocReference(o,0),u=new __PRIVATE_DocReference(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],c=>{s=s.add(c.Yr)})}),PersistencePromise.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,a){const s=a.path,o=s.length+1;let l=s;DocumentKey.isDocumentKey(l)||(l=l.child(""));const u=new __PRIVATE_DocReference(new DocumentKey(l),0);let c=new SortedSet(__PRIVATE_primitiveComparator);return this.Zr.forEachWhile(d=>{const m=d.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(c=c.add(d.Yr)),!0)},u),PersistencePromise.resolve(this.ti(c))}ti(e){const a=[];return e.forEach(s=>{const o=this.Xr(s);o!==null&&a.push(o)}),a}removeMutationBatch(e,a){__PRIVATE_hardAssert(this.ni(a.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return PersistencePromise.forEach(a.mutations,o=>{const l=new __PRIVATE_DocReference(o.key,a.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,a){const s=new __PRIVATE_DocReference(a,0),o=this.Zr.firstAfterOrEqual(s);return PersistencePromise.resolve(a.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ni(e,a){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const a=this.ei(e);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ri=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,a){const s=a.key,o=this.docs.get(s),l=o?o.size:0,u=this.ri(a);return this.docs=this.docs.insert(s,{document:a.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const a=this.docs.get(e);a&&(this.docs=this.docs.remove(e),this.size-=a.size)}getEntry(e,a){const s=this.docs.get(a);return PersistencePromise.resolve(s?s.document.mutableCopy():MutableDocument.newInvalidDocument(a))}getEntries(e,a){let s=__PRIVATE_mutableDocumentMap();return a.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():MutableDocument.newInvalidDocument(o))}),PersistencePromise.resolve(s)}getDocumentsMatchingQuery(e,a,s,o){let l=__PRIVATE_mutableDocumentMap();const u=a.path,c=new DocumentKey(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(g),s)<=0||(o.has(g.key)||__PRIVATE_queryMatches(a,g))&&(l=l.insert(g.key,g.mutableCopy()))}return PersistencePromise.resolve(l)}getAllFromCollectionGroup(e,a,s,o){fail(9500)}ii(e,a){return PersistencePromise.forEach(this.docs,s=>a(s))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Nr=e}applyChanges(e){const a=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?a.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)}),PersistencePromise.waitFor(a)}getFromCache(e,a){return this.Nr.getEntry(e,a)}getAllFromCache(e,a){return this.Nr.getEntries(e,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.si=new ObjectMap(a=>__PRIVATE_canonifyTarget(a),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.oi=0,this._i=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ai=__PRIVATE_TargetIdGenerator.ur()}forEachTarget(e,a){return this.si.forEach((s,o)=>a(o)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,a,s){return s&&(this.lastRemoteSnapshotVersion=s),a>this.oi&&(this.oi=a),PersistencePromise.resolve()}Pr(e){this.si.set(e.target,e);const a=e.targetId;a>this.highestTargetId&&(this.ai=new __PRIVATE_TargetIdGenerator(a),this.highestTargetId=a),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,a){return this.Pr(a),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,a){return this.Pr(a),PersistencePromise.resolve()}removeTargetData(e,a){return this.si.delete(a.target),this._i.jr(a.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,a,s){let o=0;const l=[];return this.si.forEach((u,c)=>{c.sequenceNumber<=a&&s.get(c.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,c.targetId)),o++)}),PersistencePromise.waitFor(l).next(()=>o)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,a){const s=this.si.get(a)||null;return PersistencePromise.resolve(s)}addMatchingKeys(e,a,s){return this._i.Wr(a,s),PersistencePromise.resolve()}removeMatchingKeys(e,a,s){this._i.zr(a,s);const o=this.persistence.referenceDelegate,l=[];return o&&a.forEach(u=>{l.push(o.markPotentiallyOrphaned(e,u))}),PersistencePromise.waitFor(l)}removeMatchingKeysForTargetId(e,a){return this._i.jr(a),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,a){const s=this._i.Hr(a);return PersistencePromise.resolve(s)}containsKey(e,a){return PersistencePromise.resolve(this._i.containsKey(a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,a){this.ui={},this.overlays={},this.ci=new __PRIVATE_ListenSequence(0),this.li=!1,this.li=!0,this.hi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Pi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(o){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(o)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new __PRIVATE_LocalSerializer(a),this.Ii=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let a=this.overlays[e.toKey()];return a||(a=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=a),a}getMutationQueue(e,a){let s=this.ui[e.toKey()];return s||(s=new __PRIVATE_MemoryMutationQueue(a,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,a,s){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const o=new __PRIVATE_MemoryTransaction(this.ci.next());return this.referenceDelegate.Ei(),s(o).next(l=>this.referenceDelegate.di(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ai(e,a){return PersistencePromise.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,a)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ri=new __PRIVATE_ReferenceSet,this.Vi=null}static mi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get fi(){if(this.Vi)return this.Vi;throw fail(60996)}addReference(e,a,s){return this.Ri.addReference(s,a),this.fi.delete(s.toString()),PersistencePromise.resolve()}removeReference(e,a,s){return this.Ri.removeReference(s,a),this.fi.add(s.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,a){return this.fi.add(a.toString()),PersistencePromise.resolve()}removeTarget(e,a){this.Ri.jr(a.targetId).forEach(o=>this.fi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,a.targetId).next(o=>{o.forEach(l=>this.fi.add(l.toString()))}).next(()=>s.removeTargetData(e,a))}Ei(){this.Vi=new Set}di(e){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.fi,s=>{const o=DocumentKey.fromPath(s);return this.gi(e,o).next(l=>{l||a.removeEntry(o,SnapshotVersion.min())})}).next(()=>(this.Vi=null,a.apply(e)))}updateLimboDocument(e,a){return this.gi(e,a).next(s=>{s?this.fi.delete(a.toString()):this.fi.add(a.toString())})}Ti(e){return 0}gi(e,a){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ri.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(e,a),()=>this.persistence.Ai(e,a)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,a){this.persistence=e,this.pi=new ObjectMap(s=>__PRIVATE_encodeResourcePath(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,a)}static mi(e,a){return new __PRIVATE_MemoryLruDelegate(e,a)}Ei(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,a){return this.persistence.getTargetCache().forEachTarget(e,a)}gr(e){const a=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>a.next(o=>s+o))}wr(e){let a=0;return this.pr(e,s=>{a++}).next(()=>a)}pr(e,a){return PersistencePromise.forEach(this.pi,(s,o)=>this.br(e,s,o).next(l=>l?PersistencePromise.resolve():a(o)))}removeTargets(e,a,s){return this.persistence.getTargetCache().removeTargets(e,a,s)}removeOrphanedDocuments(e,a){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,u=>this.br(e,u,a).next(c=>{c||(s++,l.removeEntry(u,SnapshotVersion.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,a){return this.pi.set(a,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,a){const s=a.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,a,s){return this.pi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,a,s){return this.pi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,a){return this.pi.set(a,e.currentSequenceNumber),PersistencePromise.resolve()}Ti(e){let a=e.key.toString().length;return e.isFoundDocument()&&(a+=__PRIVATE_estimateByteSize(e.data.value)),a}br(e,a,s){return PersistencePromise.or([()=>this.persistence.Ai(e,a),()=>this.persistence.getTargetCache().containsKey(e,a),()=>{const o=this.pi.get(a);return PersistencePromise.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,a,s,o){this.targetId=e,this.fromCache=a,this.Es=s,this.ds=o}static As(e,a){let s=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();for(const l of a.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new __PRIVATE_LocalViewChanges(e,a.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,a){this.ps=e,this.indexManager=a,this.Rs=!0}getDocumentsMatchingQuery(e,a,s,o){const l={result:null};return this.ys(e,a).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ws(e,a,o,s).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new QueryContext;return this.Ss(e,a,u).next(c=>{if(l.result=c,this.Vs)return this.bs(e,a,u,c.size)})}).next(()=>l.result)}bs(e,a,s,o){return s.documentReadCount<this.fs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(a),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(a),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(a),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(a))):PersistencePromise.resolve())}ys(e,a){if(__PRIVATE_queryMatchesAllDocuments(a))return PersistencePromise.resolve(null);let s=__PRIVATE_queryToTarget(a);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(a.limit!==null&&o===1&&(a=__PRIVATE_queryWithLimit(a,null,"F"),s=__PRIVATE_queryToTarget(a)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const u=__PRIVATE_documentKeySet(...l);return this.ps.getDocuments(e,u).next(c=>this.indexManager.getMinOffset(e,s).next(d=>{const m=this.Ds(a,c);return this.Cs(a,m,u,d.readTime)?this.ys(e,__PRIVATE_queryWithLimit(a,null,"F")):this.vs(e,m,a,d)}))})))}ws(e,a,s,o){return __PRIVATE_queryMatchesAllDocuments(a)||o.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ps.getDocuments(e,s).next(l=>{const u=this.Ds(a,l);return this.Cs(a,u,s,o)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),__PRIVATE_stringifyQuery(a)),this.vs(e,u,a,__PRIVATE_newIndexOffsetSuccessorFromReadTime(o,U$1)).next(c=>c))})}Ds(e,a){let s=new SortedSet(__PRIVATE_newQueryComparator(e));return a.forEach((o,l)=>{__PRIVATE_queryMatches(e,l)&&(s=s.add(l))}),s}Cs(e,a,s,o){if(e.limit===null)return!1;if(s.size!==a.size)return!0;const l=e.limitType==="F"?a.last():a.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,a,s){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(a)),this.ps.getDocumentsMatchingQuery(e,a,IndexOffset.min(),s)}vs(e,a,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next(l=>(a.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut$1="LocalStore",Kt$1=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,a,s,o){this.persistence=e,this.Fs=a,this.serializer=o,this.Ms=new SortedMap(__PRIVATE_primitiveComparator),this.xs=new ObjectMap(l=>__PRIVATE_canonifyTarget(l),__PRIVATE_targetEquals),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",a=>e.collect(a,this.Ms))}}function __PRIVATE_newLocalStore(t,e,a,s){return new __PRIVATE_LocalStoreImpl(t,e,a,s)}async function __PRIVATE_localStoreHandleUserChange(t,e){const a=__PRIVATE_debugCast(t);return await a.persistence.runTransaction("Handle user change","readonly",s=>{let o;return a.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,a.Bs(e),a.mutationQueue.getAllMutationBatches(s))).next(l=>{const u=[],c=[];let d=__PRIVATE_documentKeySet();for(const m of o){u.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of l){c.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return a.localDocuments.getDocuments(s,d).next(m=>({Ls:m,removedBatchIds:u,addedBatchIds:c}))})})}function __PRIVATE_localStoreAcknowledgeBatch(t,e){const a=__PRIVATE_debugCast(t);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=a.Ns.newChangeBuffer({trackRemovals:!0});return function(c,d,m,g){const A=m.batch,P=A.keys();let W=PersistencePromise.resolve();return P.forEach(me=>{W=W.next(()=>g.getEntry(d,me)).next(ve=>{const He=m.docVersions.get(me);__PRIVATE_hardAssert(He!==null,48541),ve.version.compareTo(He)<0&&(A.applyToRemoteDocument(ve,m),ve.isValidDocument()&&(ve.setReadTime(m.commitVersion),g.addEntry(ve)))})}),W.next(()=>c.mutationQueue.removeMutationBatch(d,A))}(a,s,e,l).next(()=>l.apply(s)).next(()=>a.mutationQueue.performConsistencyCheck(s)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(c){let d=__PRIVATE_documentKeySet();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(d=d.add(c.batch.mutations[m].key));return d}(e))).next(()=>a.localDocuments.getDocuments(s,o))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t){const e=__PRIVATE_debugCast(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",a=>e.Pi.getLastRemoteSnapshotVersion(a))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(t,e){const a=__PRIVATE_debugCast(t),s=e.snapshotVersion;let o=a.Ms;return a.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=a.Ns.newChangeBuffer({trackRemovals:!0});o=a.Ms;const c=[];e.targetChanges.forEach((g,A)=>{const P=o.get(A);if(!P)return;c.push(a.Pi.removeMatchingKeys(l,g.removedDocuments,A).next(()=>a.Pi.addMatchingKeys(l,g.addedDocuments,A)));let W=P.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(A)!==null?W=W.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):g.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(g.resumeToken,s)),o=o.insert(A,W),function(ve,He,De){return ve.resumeToken.approximateByteSize()===0||He.snapshotVersion.toMicroseconds()-ve.snapshotVersion.toMicroseconds()>=Kt$1?!0:De.addedDocuments.size+De.modifiedDocuments.size+De.removedDocuments.size>0}(P,W,g)&&c.push(a.Pi.updateTargetData(l,W))});let d=__PRIVATE_mutableDocumentMap(),m=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(a.persistence.referenceDelegate.updateLimboDocument(l,g))}),c.push(__PRIVATE_populateDocumentChangeBuffer(l,u,e.documentUpdates).next(g=>{d=g.ks,m=g.qs})),!s.isEqual(SnapshotVersion.min())){const g=a.Pi.getLastRemoteSnapshotVersion(l).next(A=>a.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s));c.push(g)}return PersistencePromise.waitFor(c).next(()=>u.apply(l)).next(()=>a.localDocuments.getLocalViewOfDocuments(l,d,m)).next(()=>d)}).then(l=>(a.Ms=o,l))}function __PRIVATE_populateDocumentChangeBuffer(t,e,a){let s=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();return a.forEach(l=>s=s.add(l)),e.getEntries(t,s).next(l=>{let u=__PRIVATE_mutableDocumentMap();return a.forEach((c,d)=>{const m=l.get(c);d.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(c)),d.isNoDocument()&&d.version.isEqual(SnapshotVersion.min())?(e.removeEntry(c,d.readTime),u=u.insert(c,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),u=u.insert(c,d)):__PRIVATE_logDebug(Ut$1,"Ignoring outdated watch update for ",c,". Current version:",m.version," Watch version:",d.version)}),{ks:u,qs:o}})}function __PRIVATE_localStoreGetNextMutationBatch(t,e){const a=__PRIVATE_debugCast(t);return a.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=j$1),a.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function __PRIVATE_localStoreAllocateTarget(t,e){const a=__PRIVATE_debugCast(t);return a.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return a.Pi.getTargetData(s,e).next(l=>l?(o=l,PersistencePromise.resolve(o)):a.Pi.allocateTargetId(s).next(u=>(o=new TargetData(e,u,"TargetPurposeListen",s.currentSequenceNumber),a.Pi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=a.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(a.Ms=a.Ms.insert(s.targetId,s),a.xs.set(e,s.targetId)),s})}async function __PRIVATE_localStoreReleaseTarget(t,e,a){const s=__PRIVATE_debugCast(t),o=s.Ms.get(e),l=a?"readwrite":"readwrite-primary";try{a||await s.persistence.runTransaction("Release target",l,u=>s.persistence.referenceDelegate.removeTarget(u,o))}catch(u){if(!__PRIVATE_isIndexedDbTransactionError(u))throw u;__PRIVATE_logDebug(Ut$1,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function __PRIVATE_localStoreExecuteQuery(t,e,a){const s=__PRIVATE_debugCast(t);let o=SnapshotVersion.min(),l=__PRIVATE_documentKeySet();return s.persistence.runTransaction("Execute query","readwrite",u=>function(d,m,g){const A=__PRIVATE_debugCast(d),P=A.xs.get(g);return P!==void 0?PersistencePromise.resolve(A.Ms.get(P)):A.Pi.getTargetData(m,g)}(s,u,__PRIVATE_queryToTarget(e)).next(c=>{if(c)return o=c.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,c.targetId).next(d=>{l=d})}).next(()=>s.Fs.getDocumentsMatchingQuery(u,e,a?o:SnapshotVersion.min(),a?l:__PRIVATE_documentKeySet())).next(c=>(__PRIVATE_setMaxReadTime(s,__PRIVATE_queryCollectionGroup(e),c),{documents:c,Qs:l})))}function __PRIVATE_setMaxReadTime(t,e,a){let s=t.Os.get(e)||SnapshotVersion.min();a.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),t.Os.set(e,s)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Mo=new __PRIVATE_LocalClientState,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,a,s){}addLocalQueryTarget(e,a=!0){return a&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,a,s){this.xo[e]=a}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,a,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt$1="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){__PRIVATE_logDebug(Jt$1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){__PRIVATE_logDebug(Jt$1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht$1=null;function __PRIVATE_generateUniqueDebugId(){return Ht$1===null?Ht$1=function(){return 268435456+Math.round(2147483648*Math.random())}():Ht$1++,"0x"+Ht$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt$1="RestConnection",Zt$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const a=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=a+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===lt$1?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,a,s,o,l){const u=__PRIVATE_generateUniqueDebugId(),c=this.zo(e,a.toUriEncodedString());__PRIVATE_logDebug(Yt$1,`Sending RPC '${e}' ${u}:`,c,s);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,o,l);const{host:m}=new URL(c),g=isCloudWorkstation(m);return this.Jo(e,c,d,s,g).then(A=>(__PRIVATE_logDebug(Yt$1,`Received RPC '${e}' ${u}: `,A),A),A=>{throw __PRIVATE_logWarn(Yt$1,`RPC '${e}' ${u} failed with error: `,A,"url: ",c,"request:",s),A})}Ho(e,a,s,o,l,u){return this.Go(e,a,s,o,l)}jo(e,a,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach((o,l)=>e[l]=o),s&&s.headers.forEach((o,l)=>e[l]=o)}zo(e,a){const s=Zt$1[e];return`${this.Uo}/v1/${a}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt$1="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,a,s,o,l){const u=__PRIVATE_generateUniqueDebugId();return new Promise((c,d)=>{const m=new XhrIo;m.setWithCredentials(!0),m.listenOnce(EventType.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case ErrorCode.NO_ERROR:const A=m.getResponseJson();__PRIVATE_logDebug(Xt$1,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(A)),c(A);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${u} timed out`),d(new FirestoreError(N$1.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const P=m.getStatus();if(__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${u} failed with status:`,P,"response text:",m.getResponseText()),P>0){let W=m.getResponseJson();Array.isArray(W)&&(W=W[0]);const me=W?.error;if(me&&me.status&&me.message){const ve=function(De){const Xe=De.toLowerCase().replace(/_/g,"-");return Object.values(N$1).indexOf(Xe)>=0?Xe:N$1.UNKNOWN}(me.status);d(new FirestoreError(ve,me.message))}else d(new FirestoreError(N$1.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new FirestoreError(N$1.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${u} sending request:`,o),m.send(a,"POST",g,s,15)})}T_(e,a,s){const o=__PRIVATE_generateUniqueDebugId(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=createWebChannelTransport(),c=getStatEventTarget(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,a,s),d.encodeInitMessageHeaders=!0;const g=l.join("");__PRIVATE_logDebug(Xt$1,`Creating RPC '${e}' stream ${o}: ${g}`,d);const A=u.createWebChannel(g,d);this.I_(A);let P=!1,W=!1;const me=new __PRIVATE_StreamBridge({Yo:He=>{W?__PRIVATE_logDebug(Xt$1,`Not sending because RPC '${e}' stream ${o} is closed:`,He):(P||(__PRIVATE_logDebug(Xt$1,`Opening RPC '${e}' stream ${o} transport.`),A.open(),P=!0),__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${o} sending:`,He),A.send(He))},Zo:()=>A.close()}),ve=(He,De,Xe)=>{He.listen(De,qe=>{try{Xe(qe)}catch(Rs){setTimeout(()=>{throw Rs},0)}})};return ve(A,WebChannel.EventType.OPEN,()=>{W||(__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${o} transport opened.`),me.o_())}),ve(A,WebChannel.EventType.CLOSE,()=>{W||(W=!0,__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${o} transport closed`),me.a_(),this.E_(A))}),ve(A,WebChannel.EventType.ERROR,He=>{W||(W=!0,__PRIVATE_logWarn(Xt$1,`RPC '${e}' stream ${o} transport errored. Name:`,He.name,"Message:",He.message),me.a_(new FirestoreError(N$1.UNAVAILABLE,"The operation could not be completed")))}),ve(A,WebChannel.EventType.MESSAGE,He=>{if(!W){const De=He.data[0];__PRIVATE_hardAssert(!!De,16349);const Xe=De,qe=Xe?.error||Xe[0]?.error;if(qe){__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${o} received error:`,qe);const Rs=qe.status;let Vc=function(eh){const Ko=pt$1[eh];if(Ko!==void 0)return __PRIVATE_mapCodeFromRpcCode(Ko)}(Rs),So=qe.message;Vc===void 0&&(Vc=N$1.INTERNAL,So="Unknown error status: "+Rs+" with message "+qe.message),W=!0,me.a_(new FirestoreError(Vc,So)),A.close()}else __PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${o} received:`,De),me.u_(De)}}),ve(c,Event$1.STAT_EVENT,He=>{He.stat===Stat.PROXY?__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${o} detected buffering proxy`):He.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{me.__()},0),me}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(a=>a===e)}}function getDocument$1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(t){return new JsonProtoSerializer(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,a,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=a,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const a=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,a-s);o>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${a} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en$1="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,a,s,o,l,u,c,d){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new __PRIVATE_ExponentialBackoff(e,a)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,a){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():a&&a.code===N$1.RESOURCE_EXHAUSTED?(__PRIVATE_logError(a.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):a&&a.code===N$1.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(a)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),a=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.D_===a&&this.G_(s,o)},s=>{e(()=>{const o=new FirestoreError(N$1.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)})})}G_(e,a){const s=this.W_(this.D_);this.stream=this.j_(e,a),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{s(()=>this.z_(o))}),this.stream.onMessage(o=>{s(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return __PRIVATE_logDebug(en$1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return a=>{this.Mi.enqueueAndForget(()=>this.D_===e?a():(__PRIVATE_logDebug(en$1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,a,s,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,s,o,u),this.serializer=l}j_(e,a){return this.connection.T_("Listen",e,a)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const a=__PRIVATE_fromWatchChange(this.serializer,e),s=function(l){if(!("targetChange"in l))return SnapshotVersion.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?SnapshotVersion.min():u.readTime?__PRIVATE_fromVersion(u.readTime):SnapshotVersion.min()}(e);return this.listener.H_(a,s)}Y_(e){const a={};a.database=__PRIVATE_getEncodedDatabaseId(this.serializer),a.addTarget=function(l,u){let c;const d=u.target;if(c=__PRIVATE_targetIsDocumentTarget(d)?{documents:__PRIVATE_toDocumentsTarget(l,d)}:{query:__PRIVATE_toQueryTarget(l,d).ft},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=__PRIVATE_toBytes(l,u.resumeToken);const m=__PRIVATE_toInt32Proto(l,u.expectedCount);m!==null&&(c.expectedCount=m)}else if(u.snapshotVersion.compareTo(SnapshotVersion.min())>0){c.readTime=toTimestamp(l,u.snapshotVersion.toTimestamp());const m=__PRIVATE_toInt32Proto(l,u.expectedCount);m!==null&&(c.expectedCount=m)}return c}(this.serializer,e);const s=__PRIVATE_toListenRequestLabels(this.serializer,e);s&&(a.labels=s),this.q_(a)}Z_(e){const a={};a.database=__PRIVATE_getEncodedDatabaseId(this.serializer),a.removeTarget=e,this.q_(a)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,a,s,o,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,s,o,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,a){return this.connection.T_("Write",e,a)}J_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const a=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),s=__PRIVATE_fromVersion(e.commitTime);return this.listener.na(s,a)}ra(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.q_(e)}ea(e){const a={streamToken:this.lastStreamToken,writes:e.map(s=>toMutation(this.serializer,s))};this.q_(a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,a,s,o){super(),this.authCredentials=e,this.appCheckCredentials=a,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,a,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Go(e,__PRIVATE_toResourcePath(a,s),o,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new FirestoreError(N$1.UNKNOWN,l.toString())})}Ho(e,a,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Ho(e,__PRIVATE_toResourcePath(a,s),o,u,c,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new FirestoreError(N$1.UNKNOWN,u.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,a){this.asyncQueue=e,this.onlineStateHandler=a,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const a=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(__PRIVATE_logError(a),this.aa=!1):__PRIVATE_logDebug("OnlineStateTracker",a)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn$1="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,a,s,o,l){this.localStore=e,this.datastore=a,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(u=>{s.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(tn$1,"Restarting streams for network reachability change."),await async function(d){const m=__PRIVATE_debugCast(d);m.Ea.add(4),await __PRIVATE_disableNetworkInternal(m),m.Ra.set("Unknown"),m.Ea.delete(4),await __PRIVATE_enableNetworkInternal(m)}(this))})}),this.Ra=new __PRIVATE_OnlineStateTracker(s,o)}}async function __PRIVATE_enableNetworkInternal(t){if(__PRIVATE_canUseNetwork(t))for(const e of t.da)await e(!0)}async function __PRIVATE_disableNetworkInternal(t){for(const e of t.da)await e(!1)}function __PRIVATE_remoteStoreListen(t,e){const a=__PRIVATE_debugCast(t);a.Ia.has(e.targetId)||(a.Ia.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(a)?__PRIVATE_startWatchStream(a):__PRIVATE_ensureWatchStream(a).O_()&&__PRIVATE_sendWatchRequest(a,e))}function __PRIVATE_remoteStoreUnlisten(t,e){const a=__PRIVATE_debugCast(t),s=__PRIVATE_ensureWatchStream(a);a.Ia.delete(e),s.O_()&&__PRIVATE_sendUnwatchRequest(a,e),a.Ia.size===0&&(s.O_()?s.L_():__PRIVATE_canUseNetwork(a)&&a.Ra.set("Unknown"))}function __PRIVATE_sendWatchRequest(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const a=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(a)}__PRIVATE_ensureWatchStream(t).Y_(e)}function __PRIVATE_sendUnwatchRequest(t,e){t.Va.Ue(e),__PRIVATE_ensureWatchStream(t).Z_(e)}function __PRIVATE_startWatchStream(t){t.Va=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(t).start(),t.Ra.ua()}function __PRIVATE_shouldStartWatchStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWatchStream(t).x_()&&t.Ia.size>0}function __PRIVATE_canUseNetwork(t){return __PRIVATE_debugCast(t).Ea.size===0}function __PRIVATE_cleanUpWatchStreamState(t){t.Va=void 0}async function __PRIVATE_onWatchStreamConnected(t){t.Ra.set("Online")}async function __PRIVATE_onWatchStreamOpen(t){t.Ia.forEach((e,a)=>{__PRIVATE_sendWatchRequest(t,e)})}async function __PRIVATE_onWatchStreamClose(t,e){__PRIVATE_cleanUpWatchStreamState(t),__PRIVATE_shouldStartWatchStream(t)?(t.Ra.ha(e),__PRIVATE_startWatchStream(t)):t.Ra.set("Unknown")}async function __PRIVATE_onWatchStreamChange(t,e,a){if(t.Ra.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(o,l){const u=l.cause;for(const c of l.targetIds)o.Ia.has(c)&&(await o.remoteSyncer.rejectListen(c,u),o.Ia.delete(c),o.Va.removeTarget(c))}(t,e)}catch(s){__PRIVATE_logDebug(tn$1,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await __PRIVATE_disableNetworkUntilRecovery(t,s)}else if(e instanceof __PRIVATE_DocumentWatchChange?t.Va.Ze(e):e instanceof __PRIVATE_ExistenceFilterChange?t.Va.st(e):t.Va.tt(e),!a.isEqual(SnapshotVersion.min()))try{const s=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore);a.compareTo(s)>=0&&await function(l,u){const c=l.Va.Tt(u);return c.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=l.Ia.get(m);g&&l.Ia.set(m,g.withResumeToken(d.resumeToken,u))}}),c.targetMismatches.forEach((d,m)=>{const g=l.Ia.get(d);if(!g)return;l.Ia.set(d,g.withResumeToken(ByteString.EMPTY_BYTE_STRING,g.snapshotVersion)),__PRIVATE_sendUnwatchRequest(l,d);const A=new TargetData(g.target,d,m,g.sequenceNumber);__PRIVATE_sendWatchRequest(l,A)}),l.remoteSyncer.applyRemoteEvent(c)}(t,a)}catch(s){__PRIVATE_logDebug(tn$1,"Failed to raise snapshot:",s),await __PRIVATE_disableNetworkUntilRecovery(t,s)}}async function __PRIVATE_disableNetworkUntilRecovery(t,e,a){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;t.Ea.add(1),await __PRIVATE_disableNetworkInternal(t),t.Ra.set("Offline"),a||(a=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(tn$1,"Retrying IndexedDB access"),await a(),t.Ea.delete(1),await __PRIVATE_enableNetworkInternal(t)})}function __PRIVATE_executeWithRecovery(t,e){return e().catch(a=>__PRIVATE_disableNetworkUntilRecovery(t,a,e))}async function __PRIVATE_fillWritePipeline(t){const e=__PRIVATE_debugCast(t),a=__PRIVATE_ensureWriteStream(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j$1;for(;__PRIVATE_canAddToWritePipeline(e);)try{const o=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,s);if(o===null){e.Ta.length===0&&a.L_();break}s=o.batchId,__PRIVATE_addToWritePipeline(e,o)}catch(o){await __PRIVATE_disableNetworkUntilRecovery(e,o)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(t){return __PRIVATE_canUseNetwork(t)&&t.Ta.length<10}function __PRIVATE_addToWritePipeline(t,e){t.Ta.push(e);const a=__PRIVATE_ensureWriteStream(t);a.O_()&&a.X_&&a.ea(e.mutations)}function __PRIVATE_shouldStartWriteStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWriteStream(t).x_()&&t.Ta.length>0}function __PRIVATE_startWriteStream(t){__PRIVATE_ensureWriteStream(t).start()}async function __PRIVATE_onWriteStreamOpen(t){__PRIVATE_ensureWriteStream(t).ra()}async function __PRIVATE_onWriteHandshakeComplete(t){const e=__PRIVATE_ensureWriteStream(t);for(const a of t.Ta)e.ea(a.mutations)}async function __PRIVATE_onMutationResult(t,e,a){const s=t.Ta.shift(),o=MutationBatchResult.from(s,e,a);await __PRIVATE_executeWithRecovery(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await __PRIVATE_fillWritePipeline(t)}async function __PRIVATE_onWriteStreamClose(t,e){e&&__PRIVATE_ensureWriteStream(t).X_&&await async function(s,o){if(function(u){return __PRIVATE_isPermanentError(u)&&u!==N$1.ABORTED}(o.code)){const l=s.Ta.shift();__PRIVATE_ensureWriteStream(s).B_(),await __PRIVATE_executeWithRecovery(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await __PRIVATE_fillWritePipeline(s)}}(t,e),__PRIVATE_shouldStartWriteStream(t)&&__PRIVATE_startWriteStream(t)}async function __PRIVATE_remoteStoreHandleCredentialChange(t,e){const a=__PRIVATE_debugCast(t);a.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(tn$1,"RemoteStore received new credentials");const s=__PRIVATE_canUseNetwork(a);a.Ea.add(3),await __PRIVATE_disableNetworkInternal(a),s&&a.Ra.set("Unknown"),await a.remoteSyncer.handleCredentialChange(e),a.Ea.delete(3),await __PRIVATE_enableNetworkInternal(a)}async function __PRIVATE_remoteStoreApplyPrimaryState(t,e){const a=__PRIVATE_debugCast(t);e?(a.Ea.delete(2),await __PRIVATE_enableNetworkInternal(a)):e||(a.Ea.add(2),await __PRIVATE_disableNetworkInternal(a),a.Ra.set("Unknown"))}function __PRIVATE_ensureWatchStream(t){return t.ma||(t.ma=function(a,s,o){const l=__PRIVATE_debugCast(a);return l.sa(),new __PRIVATE_PersistentListenStream(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Xo:__PRIVATE_onWatchStreamConnected.bind(null,t),t_:__PRIVATE_onWatchStreamOpen.bind(null,t),r_:__PRIVATE_onWatchStreamClose.bind(null,t),H_:__PRIVATE_onWatchStreamChange.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),__PRIVATE_shouldStartWatchStream(t)?__PRIVATE_startWatchStream(t):t.Ra.set("Unknown")):(await t.ma.stop(),__PRIVATE_cleanUpWatchStreamState(t))})),t.ma}function __PRIVATE_ensureWriteStream(t){return t.fa||(t.fa=function(a,s,o){const l=__PRIVATE_debugCast(a);return l.sa(),new __PRIVATE_PersistentWriteStream(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:__PRIVATE_onWriteStreamOpen.bind(null,t),r_:__PRIVATE_onWriteStreamClose.bind(null,t),ta:__PRIVATE_onWriteHandshakeComplete.bind(null,t),na:__PRIVATE_onMutationResult.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await __PRIVATE_fillWritePipeline(t)):(await t.fa.stop(),t.Ta.length>0&&(__PRIVATE_logDebug(tn$1,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,a,s,o,l){this.asyncQueue=e,this.timerId=a,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,a,s,o,l){const u=Date.now()+s,c=new DelayedOperation(e,a,u,o,l);return c.start(s),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N$1.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(t,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${t}`),__PRIVATE_isIndexedDbTransactionError(t))return new FirestoreError(N$1.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(a,s)=>e(a,s)||DocumentKey.comparator(a.key,s.key):(a,s)=>DocumentKey.comparator(a.key,s.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const a=this.keyedMap.get(e);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((a,s)=>(e(a),!1))}add(e){const a=this.delete(e.key);return a.copy(a.keyedMap.insert(e.key,e),a.sortedSet.insert(e,null))}delete(e){const a=this.get(e);return a?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(a)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const a=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;a.hasNext();){const o=a.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(a=>{e.push(a.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,a){const s=new DocumentSet;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=a,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.ga=new SortedMap(DocumentKey.comparator)}track(e){const a=e.doc.key,s=this.ga.get(a);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(a,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(a,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(a,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(a,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(a):e.type===1&&s.type===2?this.ga=this.ga.insert(a,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(a,{type:2,doc:e.doc}):fail(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(a,e)}ya(){const e=[];return this.ga.inorderTraversal((a,s)=>{e.push(s)}),e}}class ViewSnapshot{constructor(e,a,s,o,l,u,c,d,m){this.query=e,this.docs=a,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,a,s,o,l){const u=[];return a.forEach(c=>{u.push({type:0,doc:c})}),new ViewSnapshot(e,a,DocumentSet.emptySet(a),u,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const a=this.docChanges,s=e.docChanges;if(a.length!==s.length)return!1;for(let o=0;o<a.length;o++)if(a[o].type!==s[o].type||!a[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(a,s){const o=__PRIVATE_debugCast(a),l=o.queries;o.queries=__PRIVATE_newQueriesObjectMap(),l.forEach((u,c)=>{for(const d of c.Sa)d.onError(s)})})(this,new FirestoreError(N$1.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(t=>__PRIVATE_canonifyQuery(t),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(t,e){const a=__PRIVATE_debugCast(t);let s=3;const o=e.query;let l=a.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new __PRIVATE_QueryListenersInfo,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await a.onListen(o,!0);break;case 1:l.wa=await a.onListen(o,!1);break;case 2:await a.onFirstRemoteStoreListen(o)}}catch(u){const c=__PRIVATE_wrapInUserErrorIfRecoverable(u,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(c)}a.queries.set(o,l),l.Sa.push(e),e.va(a.onlineState),l.wa&&e.Fa(l.wa)&&__PRIVATE_raiseSnapshotsInSyncEvent(a)}async function __PRIVATE_eventManagerUnlisten(t,e){const a=__PRIVATE_debugCast(t),s=e.query;let o=3;const l=a.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return a.queries.delete(s),a.onUnlisten(s,!0);case 1:return a.queries.delete(s),a.onUnlisten(s,!1);case 2:return a.onLastRemoteStoreUnlisten(s);default:return}}function __PRIVATE_eventManagerOnWatchChange(t,e){const a=__PRIVATE_debugCast(t);let s=!1;for(const o of e){const l=o.query,u=a.queries.get(l);if(u){for(const c of u.Sa)c.Fa(o)&&(s=!0);u.wa=o}}s&&__PRIVATE_raiseSnapshotsInSyncEvent(a)}function __PRIVATE_eventManagerOnWatchError(t,e,a){const s=__PRIVATE_debugCast(t),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(a);s.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(t){t.Ca.forEach(e=>{e.next()})}var nn$1,rn$1;(rn$1=nn$1||(nn$1={})).Ma="default",rn$1.Cache="cache";class __PRIVATE_QueryListener{constructor(e,a,s){this.query=e,this.xa=a,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let a=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),a=!0):this.La(e,this.onlineState)&&(this.ka(e),a=!0),this.Na=e,a}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let a=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),a=!0),a}La(e,a){if(!e.fromCache||!this.Da())return!0;const s=a!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||a==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const a=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}ka(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nn$1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,a){this.query=e,this.Ya=a,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.eu=__PRIVATE_newQueryComparator(e),this.tu=new DocumentSet(this.eu)}get nu(){return this.Ya}ru(e,a){const s=a?a.iu:new __PRIVATE_DocumentChangeSet,o=a?a.tu:this.tu;let l=a?a.mutatedKeys:this.mutatedKeys,u=o,c=!1;const d=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((g,A)=>{const P=o.get(g),W=__PRIVATE_queryMatches(this.query,A)?A:null,me=!!P&&this.mutatedKeys.has(P.key),ve=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let He=!1;P&&W?P.data.isEqual(W.data)?me!==ve&&(s.track({type:3,doc:W}),He=!0):this.su(P,W)||(s.track({type:2,doc:W}),He=!0,(d&&this.eu(W,d)>0||m&&this.eu(W,m)<0)&&(c=!0)):!P&&W?(s.track({type:0,doc:W}),He=!0):P&&!W&&(s.track({type:1,doc:P}),He=!0,(d||m)&&(c=!0)),He&&(W?(u=u.add(W),l=ve?l.add(g):l.delete(g)):(u=u.delete(g),l=l.delete(g)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const g=this.query.limitType==="F"?u.last():u.first();u=u.delete(g.key),l=l.delete(g.key),s.track({type:1,doc:g})}return{tu:u,iu:s,Cs:c,mutatedKeys:l}}su(e,a){return e.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(e,a,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort((g,A)=>function(W,me){const ve=He=>{switch(He){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Rt:He})}};return ve(W)-ve(me)}(g.type,A.type)||this.eu(g.doc,A.doc)),this.ou(s),o=o??!1;const c=a&&!o?this._u():[],d=this.Xa.size===0&&this.current&&!o?1:0,m=d!==this.Za;return this.Za=d,u.length!==0||m?{snapshot:new ViewSnapshot(this.query,e.tu,l,u,e.mutatedKeys,d===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(a=>this.Ya=this.Ya.add(a)),e.modifiedDocuments.forEach(a=>{}),e.removedDocuments.forEach(a=>this.Ya=this.Ya.delete(a)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=__PRIVATE_documentKeySet(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const a=[];return e.forEach(s=>{this.Xa.has(s)||a.push(new __PRIVATE_RemovedLimboDocument(s))}),this.Xa.forEach(s=>{e.has(s)||a.push(new __PRIVATE_AddedLimboDocument(s))}),a}cu(e){this.Ya=e.Qs,this.Xa=__PRIVATE_documentKeySet();const a=this.ru(e.documents);return this.applyChanges(a,!0)}lu(){return ViewSnapshot.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sn$1="SyncEngine";class __PRIVATE_QueryView{constructor(e,a,s){this.query=e,this.targetId=a,this.view=s}}class LimboResolution{constructor(e){this.key=e,this.hu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,a,s,o,l,u){this.localStore=e,this.remoteStore=a,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ObjectMap(c=>__PRIVATE_canonifyQuery(c),__PRIVATE_queryEquals),this.Iu=new Map,this.Eu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Au=new Map,this.Ru=new __PRIVATE_ReferenceSet,this.Vu={},this.mu=new Map,this.fu=__PRIVATE_TargetIdGenerator.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function __PRIVATE_syncEngineListen(t,e,a=!0){const s=__PRIVATE_ensureWatchCallbacks(t);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await __PRIVATE_allocateTargetAndMaybeListen(s,e,a,!0),o}async function __PRIVATE_triggerRemoteStoreListen(t,e){const a=__PRIVATE_ensureWatchCallbacks(t);await __PRIVATE_allocateTargetAndMaybeListen(a,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(t,e,a,s){const o=await __PRIVATE_localStoreAllocateTarget(t.localStore,__PRIVATE_queryToTarget(e)),l=o.targetId,u=t.sharedClientState.addLocalQueryTarget(l,a);let c;return s&&(c=await __PRIVATE_initializeViewAndComputeSnapshot(t,e,l,u==="current",o.resumeToken)),t.isPrimaryClient&&a&&__PRIVATE_remoteStoreListen(t.remoteStore,o),c}async function __PRIVATE_initializeViewAndComputeSnapshot(t,e,a,s,o){t.pu=(A,P,W)=>async function(ve,He,De,Xe){let qe=He.view.ru(De);qe.Cs&&(qe=await __PRIVATE_localStoreExecuteQuery(ve.localStore,He.query,!1).then(({documents:Do})=>He.view.ru(Do,qe)));const Rs=Xe&&Xe.targetChanges.get(He.targetId),Vc=Xe&&Xe.targetMismatches.get(He.targetId)!=null,So=He.view.applyChanges(qe,ve.isPrimaryClient,Rs,Vc);return __PRIVATE_updateTrackedLimbos(ve,He.targetId,So.au),So.snapshot}(t,A,P,W);const l=await __PRIVATE_localStoreExecuteQuery(t.localStore,e,!0),u=new __PRIVATE_View(e,l.Qs),c=u.ru(l.documents),d=TargetChange.createSynthesizedTargetChangeForCurrentChange(a,s&&t.onlineState!=="Offline",o),m=u.applyChanges(c,t.isPrimaryClient,d);__PRIVATE_updateTrackedLimbos(t,a,m.au);const g=new __PRIVATE_QueryView(e,a,u);return t.Tu.set(e,g),t.Iu.has(a)?t.Iu.get(a).push(e):t.Iu.set(a,[e]),m.snapshot}async function __PRIVATE_syncEngineUnlisten(t,e,a){const s=__PRIVATE_debugCast(t),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter(u=>!__PRIVATE_queryEquals(u,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await __PRIVATE_localStoreReleaseTarget(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),a&&__PRIVATE_remoteStoreUnlisten(s.remoteStore,o.targetId),__PRIVATE_removeAndCleanupTarget(s,o.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(s,o.targetId),await __PRIVATE_localStoreReleaseTarget(s.localStore,o.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(t,e){const a=__PRIVATE_debugCast(t),s=a.Tu.get(e),o=a.Iu.get(s.targetId);a.isPrimaryClient&&o.length===1&&(a.sharedClientState.removeLocalQueryTarget(s.targetId),__PRIVATE_remoteStoreUnlisten(a.remoteStore,s.targetId))}async function __PRIVATE_syncEngineWrite(t,e,a){const s=__PRIVATE_syncEngineEnsureWriteCallbacks(t);try{const o=await function(u,c){const d=__PRIVATE_debugCast(u),m=Timestamp.now(),g=c.reduce((W,me)=>W.add(me.key),__PRIVATE_documentKeySet());let A,P;return d.persistence.runTransaction("Locally write mutations","readwrite",W=>{let me=__PRIVATE_mutableDocumentMap(),ve=__PRIVATE_documentKeySet();return d.Ns.getEntries(W,g).next(He=>{me=He,me.forEach((De,Xe)=>{Xe.isValidDocument()||(ve=ve.add(De))})}).next(()=>d.localDocuments.getOverlayedDocuments(W,me)).next(He=>{A=He;const De=[];for(const Xe of c){const qe=__PRIVATE_mutationExtractBaseValue(Xe,A.get(Xe.key).overlayedDocument);qe!=null&&De.push(new __PRIVATE_PatchMutation(Xe.key,qe,__PRIVATE_extractFieldMask(qe.value.mapValue),Precondition.exists(!0)))}return d.mutationQueue.addMutationBatch(W,m,De,c)}).next(He=>{P=He;const De=He.applyToLocalDocumentSet(A,ve);return d.documentOverlayCache.saveOverlays(W,He.batchId,De)})}).then(()=>({batchId:P.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(A)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(u,c,d){let m=u.Vu[u.currentUser.toKey()];m||(m=new SortedMap(__PRIVATE_primitiveComparator)),m=m.insert(c,d),u.Vu[u.currentUser.toKey()]=m}(s,o.batchId,a),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o.changes),await __PRIVATE_fillWritePipeline(s.remoteStore)}catch(o){const l=__PRIVATE_wrapInUserErrorIfRecoverable(o,"Failed to persist write");a.reject(l)}}async function __PRIVATE_syncEngineApplyRemoteEvent(t,e){const a=__PRIVATE_debugCast(t);try{const s=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(a.localStore,e);e.targetChanges.forEach((o,l)=>{const u=a.Au.get(l);u&&(__PRIVATE_hardAssert(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?__PRIVATE_hardAssert(u.hu,14607):o.removedDocuments.size>0&&(__PRIVATE_hardAssert(u.hu,42227),u.hu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(a,s,e)}catch(s){await __PRIVATE_ignoreIfPrimaryLeaseLoss(s)}}function __PRIVATE_syncEngineApplyOnlineStateChange(t,e,a){const s=__PRIVATE_debugCast(t);if(s.isPrimaryClient&&a===0||!s.isPrimaryClient&&a===1){const o=[];s.Tu.forEach((l,u)=>{const c=u.view.va(e);c.snapshot&&o.push(c.snapshot)}),function(u,c){const d=__PRIVATE_debugCast(u);d.onlineState=c;let m=!1;d.queries.forEach((g,A)=>{for(const P of A.Sa)P.va(c)&&(m=!0)}),m&&__PRIVATE_raiseSnapshotsInSyncEvent(d)}(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(t,e,a){const s=__PRIVATE_debugCast(t);s.sharedClientState.updateQueryState(e,"rejected",a);const o=s.Au.get(e),l=o&&o.key;if(l){let u=new SortedMap(DocumentKey.comparator);u=u.insert(l,MutableDocument.newNoDocument(l,SnapshotVersion.min()));const c=__PRIVATE_documentKeySet().add(l),d=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),u,c);await __PRIVATE_syncEngineApplyRemoteEvent(s,d),s.du=s.du.remove(l),s.Au.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(s)}else await __PRIVATE_localStoreReleaseTarget(s.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(s,e,a)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(t,e){const a=__PRIVATE_debugCast(t),s=e.batch.batchId;try{const o=await __PRIVATE_localStoreAcknowledgeBatch(a.localStore,e);__PRIVATE_processUserCallback(a,s,null),__PRIVATE_triggerPendingWritesCallbacks(a,s),a.sharedClientState.updateMutationState(s,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(a,o)}catch(o){await __PRIVATE_ignoreIfPrimaryLeaseLoss(o)}}async function __PRIVATE_syncEngineRejectFailedWrite(t,e,a){const s=__PRIVATE_debugCast(t);try{const o=await function(u,c){const d=__PRIVATE_debugCast(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let g;return d.mutationQueue.lookupMutationBatch(m,c).next(A=>(__PRIVATE_hardAssert(A!==null,37113),g=A.keys(),d.mutationQueue.removeMutationBatch(m,A))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g)).next(()=>d.localDocuments.getDocuments(m,g))})}(s.localStore,e);__PRIVATE_processUserCallback(s,e,a),__PRIVATE_triggerPendingWritesCallbacks(s,e),s.sharedClientState.updateMutationState(e,"rejected",a),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o)}catch(o){await __PRIVATE_ignoreIfPrimaryLeaseLoss(o)}}function __PRIVATE_triggerPendingWritesCallbacks(t,e){(t.mu.get(e)||[]).forEach(a=>{a.resolve()}),t.mu.delete(e)}function __PRIVATE_processUserCallback(t,e,a){const s=__PRIVATE_debugCast(t);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(a?l.reject(a):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function __PRIVATE_removeAndCleanupTarget(t,e,a=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),a&&t.Pu.yu(s,a);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||__PRIVATE_removeLimboTarget(t,s)})}function __PRIVATE_removeLimboTarget(t,e){t.Eu.delete(e.path.canonicalString());const a=t.du.get(e);a!==null&&(__PRIVATE_remoteStoreUnlisten(t.remoteStore,a),t.du=t.du.remove(e),t.Au.delete(a),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_updateTrackedLimbos(t,e,a){for(const s of a)s instanceof __PRIVATE_AddedLimboDocument?(t.Ru.addReference(s.key,e),__PRIVATE_trackLimboChange(t,s)):s instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(sn$1,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||__PRIVATE_removeLimboTarget(t,s.key)):fail(19791,{wu:s})}function __PRIVATE_trackLimboChange(t,e){const a=e.key,s=a.path.canonicalString();t.du.get(a)||t.Eu.has(s)||(__PRIVATE_logDebug(sn$1,"New document in limbo: "+a),t.Eu.add(s),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_pumpEnqueuedLimboResolutions(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const a=new DocumentKey(ResourcePath.fromString(e)),s=t.fu.next();t.Au.set(s,new LimboResolution(a)),t.du=t.du.insert(a,s),__PRIVATE_remoteStoreListen(t.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(a.path)),s,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ce))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,e,a){const s=__PRIVATE_debugCast(t),o=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach((c,d)=>{u.push(s.pu(d,e,a).then(m=>{if((m||a)&&s.isPrimaryClient){const g=m?!m.fromCache:a?.targetChanges.get(d.targetId)?.current;s.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(m){o.push(m);const g=__PRIVATE_LocalViewChanges.As(d.targetId,m);l.push(g)}}))}),await Promise.all(u),s.Pu.H_(o),await async function(d,m){const g=__PRIVATE_debugCast(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>PersistencePromise.forEach(m,P=>PersistencePromise.forEach(P.Es,W=>g.persistence.referenceDelegate.addReference(A,P.targetId,W)).next(()=>PersistencePromise.forEach(P.ds,W=>g.persistence.referenceDelegate.removeReference(A,P.targetId,W)))))}catch(A){if(!__PRIVATE_isIndexedDbTransactionError(A))throw A;__PRIVATE_logDebug(Ut$1,"Failed to update sequence numbers: "+A)}for(const A of m){const P=A.targetId;if(!A.fromCache){const W=g.Ms.get(P),me=W.snapshotVersion,ve=W.withLastLimboFreeSnapshotVersion(me);g.Ms=g.Ms.insert(P,ve)}}}(s.localStore,l))}async function __PRIVATE_syncEngineHandleCredentialChange(t,e){const a=__PRIVATE_debugCast(t);if(!a.currentUser.isEqual(e)){__PRIVATE_logDebug(sn$1,"User change. New user:",e.toKey());const s=await __PRIVATE_localStoreHandleUserChange(a.localStore,e);a.currentUser=e,function(l,u){l.mu.forEach(c=>{c.forEach(d=>{d.reject(new FirestoreError(N$1.CANCELLED,u))})}),l.mu.clear()}(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(a,s.Ls)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(t,e){const a=__PRIVATE_debugCast(t),s=a.Au.get(e);if(s&&s.hu)return __PRIVATE_documentKeySet().add(s.key);{let o=__PRIVATE_documentKeySet();const l=a.Iu.get(e);if(!l)return o;for(const u of l){const c=a.Tu.get(u);o=o.unionWith(c.view.nu)}return o}}function __PRIVATE_ensureWatchCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.Pu.H_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.Pu.yu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,a){return null}Mu(e,a){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Cu(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.mi,this.serializer)}Du(e){return new __PRIVATE_MemorySharedClientState}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,a){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(s,e.asyncQueue,a)}Cu(e){const a=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(s=>__PRIVATE_MemoryLruDelegate.mi(s,a),this.serializer)}}class OnlineComponentProvider{async initialize(e,a){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const a=__PRIVATE_newSerializer(e.databaseInfo.databaseId),s=function(l){return new __PRIVATE_WebChannelConnection(l)}(e.databaseInfo);return function(l,u,c,d){return new __PRIVATE_DatastoreImpl(l,u,c,d)}(e.authCredentials,e.appCheckCredentials,s,a)}createRemoteStore(e){return function(s,o,l,u,c){return new __PRIVATE_RemoteStoreImpl(s,o,l,u,c)}(this.localStore,this.datastore,e.asyncQueue,a=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,a,0),function(){return __PRIVATE_BrowserConnectivityMonitor.v()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,a){return function(o,l,u,c,d,m,g){const A=new __PRIVATE_SyncEngineImpl(o,l,u,c,d,m);return g&&(A.gu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,a)}async terminate(){await async function(a){const s=__PRIVATE_debugCast(a);__PRIVATE_logDebug(tn$1,"RemoteStore shutting down."),s.Ea.add(5),await __PRIVATE_disableNetworkInternal(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,a){setTimeout(()=>{this.muted||e(a)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on$1="FirestoreClient";class FirestoreClient{constructor(e,a,s,o,l){this.authCredentials=e,this.appCheckCredentials=a,this.asyncQueue=s,this.databaseInfo=o,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async u=>{__PRIVATE_logDebug(on$1,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(s,u=>(__PRIVATE_logDebug(on$1,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(a){const s=__PRIVATE_wrapInUserErrorIfRecoverable(a,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(on$1,"Initializing OfflineComponentProvider");const a=t.configuration;await e.initialize(a);let s=a.initialUser;t.setCredentialChangeListener(async o=>{s.isEqual(o)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress();const a=await __PRIVATE_ensureOfflineComponents(t);__PRIVATE_logDebug(on$1,"Initializing OnlineComponentProvider"),await e.initialize(a,t.configuration),t.setCredentialChangeListener(s=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,o)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,o)),t._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){__PRIVATE_logDebug(on$1,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(t,t._uninitializedComponentsProvider._offline)}catch(e){const a=e;if(!function(o){return o.name==="FirebaseError"?o.code===N$1.FAILED_PRECONDITION||o.code===N$1.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(a))throw a;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+a),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(on$1,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return t._offlineComponents}async function __PRIVATE_ensureOnlineComponents(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(__PRIVATE_logDebug(on$1,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,t._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(on$1,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,new OnlineComponentProvider))),t._onlineComponents}function __PRIVATE_getSyncEngine(t){return __PRIVATE_ensureOnlineComponents(t).then(e=>e.syncEngine)}function __PRIVATE_getDatastore(t){return __PRIVATE_ensureOnlineComponents(t).then(e=>e.datastore)}async function __PRIVATE_getEventManager(t){const e=await __PRIVATE_ensureOnlineComponents(t),a=e.eventManager;return a.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),a.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),a.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),a.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),a}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(t,e,a={}){const s=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>function(l,u,c,d,m){const g=new __PRIVATE_AsyncObserver({next:P=>{g.Nu(),u.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(l,A));const W=P.docs.has(c);!W&&P.fromCache?m.reject(new FirestoreError(N$1.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&P.fromCache&&d&&d.source==="server"?m.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(P)},error:P=>m.reject(P)}),A=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(c.path),g,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(l,A)}(await __PRIVATE_getEventManager(t),t.asyncQueue,e,a,s)),s.promise}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(t,e,a={}){const s=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>function(l,u,c,d,m){const g=new __PRIVATE_AsyncObserver({next:P=>{g.Nu(),u.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(l,A)),P.fromCache&&d.source==="server"?m.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(P)},error:P=>m.reject(P)}),A=new __PRIVATE_QueryListener(c,g,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(l,A)}(await __PRIVATE_getEventManager(t),t.asyncQueue,e,a,s)),s.promise}function __PRIVATE_firestoreClientRunAggregateQuery(t,e,a){const s=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>{try{const o=await __PRIVATE_getDatastore(t);s.resolve(async function(u,c,d){const m=__PRIVATE_debugCast(u),{request:g,gt:A,parent:P}=__PRIVATE_toRunAggregationQueryRequest(m.serializer,__PRIVATE_queryToAggregateTarget(c),d);m.connection.$o||delete g.parent;const W=(await m.Ho("RunAggregationQuery",m.serializer.databaseId,P,g,1)).filter(ve=>!!ve.result);__PRIVATE_hardAssert(W.length===1,64727);const me=W[0].result?.aggregateFields;return Object.keys(me).reduce((ve,He)=>(ve[A[He]]=me[He],ve),{})}(o,e,a))}catch(o){s.reject(o)}}),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n$1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an$1="firestore.googleapis.com",un$1=!0;class FirestoreSettingsImpl{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=an$1,this.ssl=un$1}else this.host=e.host,this.ssl=e.ssl??un$1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ot$1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bt$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,a,s,o){this._authCredentials=e,this._appCheckCredentials=a,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(s.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new FirestoreError(N$1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(a){const s=_n$1.get(a);s&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),_n$1.delete(a),s.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(t,e,a,s={}){t=__PRIVATE_cast(t,Firestore$1);const o=isCloudWorkstation(e),l=t._getSettings(),u={...l,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${a}`;o&&(pingServer(`https://${c}`),updateEmulatorBanner("Firestore",!0)),l.host!==an$1&&l.host!==c&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:c,ssl:o,emulatorOptions:s};if(!deepEqual(d,u)&&(t._setSettings(d),s.mockUserToken)){let m,g;if(typeof s.mockUserToken=="string")m=s.mockUserToken,g=User.MOCK_USER;else{m=createMockUserToken(s.mockUserToken,t._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new FirestoreError(N$1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new User(A)}t._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,a,s){this.converter=a,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,a,s){this.converter=a,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,a,s){if(__PRIVATE_validateJSON(a,DocumentReference._jsonSchema))return new DocumentReference(e,s||null,new DocumentKey(ResourcePath.fromString(a.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property$1("string",DocumentReference._jsonSchemaVersion),referencePath:property$1("string")};class CollectionReference extends Query{constructor(e,a,s){super(e,a,__PRIVATE_newQueryForPath(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(t,e,...a){if(t=getModularInstance(t),__PRIVATE_validateNonEmptyArgument("collection","path",e),t instanceof Firestore$1){const s=ResourcePath.fromString(e,...a);return __PRIVATE_validateCollectionPath(s),new CollectionReference(t,null,s)}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ResourcePath.fromString(e,...a));return __PRIVATE_validateCollectionPath(s),new CollectionReference(t.firestore,null,s)}}function doc(t,e,...a){if(t=getModularInstance(t),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),t instanceof Firestore$1){const s=ResourcePath.fromString(e,...a);return __PRIVATE_validateDocumentPath(s),new DocumentReference(t,null,new DocumentKey(s))}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ResourcePath.fromString(e,...a));return __PRIVATE_validateDocumentPath(s),new DocumentReference(t.firestore,t instanceof CollectionReference?t.converter:null,new DocumentKey(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn$1="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._c=()=>{const s=getDocument$1();s&&__PRIVATE_logDebug(cn$1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const a=getDocument$1();a&&typeof a.addEventListener=="function"&&a.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const a=getDocument$1();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const a=new __PRIVATE_Deferred;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(a.resolve,a.reject),a.promise)).then(()=>a.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(cn$1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const a=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=a,a}enqueueAfterDelay(e,a,s){this.uc(),this.oc.indexOf(e)>-1&&(a=0);const o=DelayedOperation.createAndSchedule(this,e,a,s,l=>this.hc(l));return this.tc.push(o),o}uc(){this.nc&&fail(47125,{Pc:__PRIVATE_getMessageOrStack(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const a of this.tc)if(a.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((a,s)=>a.targetTimeMs-s.targetTimeMs);for(const a of this.tc)if(a.skipDelay(),e!=="all"&&a.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const a=this.tc.indexOf(e);this.tc.splice(a,1)}}function __PRIVATE_getMessageOrStack(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isPartialObserver(t){return function(a,s){if(typeof a!="object"||a===null)return!1;const o=a;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1}(t,["next","error","complete"])}class Firestore extends Firestore$1{constructor(e,a,s,o){super(e,a,s,o),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(t,e){const a=typeof t=="object"?t:getApp(),s=typeof t=="string"?t:lt$1,o=_getProvider(a,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=getDefaultEmulatorHostnameAndPort("firestore");l&&connectFirestoreEmulator(o,...l)}return o}function ensureFirestoreConfigured(t){if(t._terminated)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||__PRIVATE_configureFirestore(t),t._firestoreClient}function __PRIVATE_configureFirestore(t){const e=t._freezeSettings(),a=function(o,l,u,c){return new DatabaseInfo(o,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new FirestoreClient(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AggregateField{constructor(e="count",a){this._internalFieldPath=a,this.type="AggregateField",this.aggregateType=e}}class AggregateQuerySnapshot{constructor(e,a,s){this._userDataWriter=a,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(a){throw new FirestoreError(N$1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property$1("string",Bytes._jsonSchemaVersion),bytes:property$1("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let a=0;a<e.length;++a)if(e[a].length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,a){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(a)||a<-180||a>180)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=e,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property$1("string",GeoPoint._jsonSchemaVersion),latitude:property$1("number"),longitude:property$1("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(a=>a)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(a=>typeof a=="number"))return new VectorValue(e.vectorValues);throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property$1("string",VectorValue._jsonSchemaVersion),vectorValues:property$1("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn$1=/^__.*__$/;class ParsedSetData{constructor(e,a,s){this.data=e,this.fieldMask=a,this.fieldTransforms=s}toMutation(e,a){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,a,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,a,this.fieldTransforms)}}class ParsedUpdateData{constructor(e,a,s){this.data=e,this.fieldMask=a,this.fieldTransforms=s}toMutation(e,a){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,a,this.fieldTransforms)}}function __PRIVATE_isWrite(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ac:t})}}class __PRIVATE_ParseContextImpl{constructor(e,a,s,o,l,u){this.settings=e,this.databaseId=a,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new __PRIVATE_ParseContextImpl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const a=this.path?.child(e),s=this.Vc({path:a,fc:!1});return s.gc(e),s}yc(e){const a=this.path?.child(e),s=this.Vc({path:a,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(a=>e.isPrefixOf(a))!==void 0||this.fieldTransforms.find(a=>e.isPrefixOf(a.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ac)&&hn$1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,a,s){this.databaseId=e,this.ignoreUndefinedProperties=a,this.serializer=s||__PRIVATE_newSerializer(e)}Cc(e,a,s,o=!1){return new __PRIVATE_ParseContextImpl({Ac:e,methodName:a,Dc:s,path:FieldPath$1.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(t){const e=t._freezeSettings(),a=__PRIVATE_newSerializer(t._databaseId);return new __PRIVATE_UserDataReader(t._databaseId,!!e.ignoreUndefinedProperties,a)}function __PRIVATE_parseSetData(t,e,a,s,o,l={}){const u=t.Cc(l.merge||l.mergeFields?2:0,e,a,o);__PRIVATE_validatePlainObject("Data must be an object, but it was:",u,s);const c=__PRIVATE_parseObject(s,u);let d,m;if(l.merge)d=new FieldMask(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const g=[];for(const A of l.mergeFields){const P=__PRIVATE_fieldPathFromArgument$1(e,A,a);if(!u.contains(P))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(g,P)||g.push(P)}d=new FieldMask(g),m=u.fieldTransforms.filter(A=>d.covers(A.field))}else d=null,m=u.fieldTransforms;return new ParsedSetData(new ObjectValue(c),d,m)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}function __PRIVATE_createSentinelChildContext(t,e,a){return new __PRIVATE_ParseContextImpl({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:a},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class __PRIVATE_ServerTimestampFieldValueImpl extends FieldValue{_toFieldTransform(e){return new FieldTransform(e.path,new __PRIVATE_ServerTimestampTransform)}isEqual(e){return e instanceof __PRIVATE_ServerTimestampFieldValueImpl}}class __PRIVATE_ArrayUnionFieldValueImpl extends FieldValue{constructor(e,a){super(e),this.vc=a}_toFieldTransform(e){const a=__PRIVATE_createSentinelChildContext(this,e,!0),s=this.vc.map(l=>__PRIVATE_parseData(l,a)),o=new __PRIVATE_ArrayUnionTransformOperation(s);return new FieldTransform(e.path,o)}isEqual(e){return e instanceof __PRIVATE_ArrayUnionFieldValueImpl&&deepEqual(this.vc,e.vc)}}class __PRIVATE_ArrayRemoveFieldValueImpl extends FieldValue{constructor(e,a){super(e),this.vc=a}_toFieldTransform(e){const a=__PRIVATE_createSentinelChildContext(this,e,!0),s=this.vc.map(l=>__PRIVATE_parseData(l,a)),o=new __PRIVATE_ArrayRemoveTransformOperation(s);return new FieldTransform(e.path,o)}isEqual(e){return e instanceof __PRIVATE_ArrayRemoveFieldValueImpl&&deepEqual(this.vc,e.vc)}}function __PRIVATE_parseUpdateData(t,e,a,s){const o=t.Cc(1,e,a);__PRIVATE_validatePlainObject("Data must be an object, but it was:",o,s);const l=[],u=ObjectValue.empty();forEach$1(s,(d,m)=>{const g=__PRIVATE_fieldPathFromDotSeparatedString(e,d,a);m=getModularInstance(m);const A=o.yc(g);if(m instanceof __PRIVATE_DeleteFieldValueImpl)l.push(g);else{const P=__PRIVATE_parseData(m,A);P!=null&&(l.push(g),u.set(g,P))}});const c=new FieldMask(l);return new ParsedUpdateData(u,c,o.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(t,e,a,s,o,l){const u=t.Cc(1,e,a),c=[__PRIVATE_fieldPathFromArgument$1(e,s,a)],d=[o];if(l.length%2!=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<l.length;P+=2)c.push(__PRIVATE_fieldPathFromArgument$1(e,l[P])),d.push(l[P+1]);const m=[],g=ObjectValue.empty();for(let P=c.length-1;P>=0;--P)if(!__PRIVATE_fieldMaskContains(m,c[P])){const W=c[P];let me=d[P];me=getModularInstance(me);const ve=u.yc(W);if(me instanceof __PRIVATE_DeleteFieldValueImpl)m.push(W);else{const He=__PRIVATE_parseData(me,ve);He!=null&&(m.push(W),g.set(W,He))}}const A=new FieldMask(m);return new ParsedUpdateData(g,A,u.fieldTransforms)}function __PRIVATE_parseQueryValue(t,e,a,s=!1){return __PRIVATE_parseData(a,t.Cc(s?4:3,e))}function __PRIVATE_parseData(t,e){if(__PRIVATE_looksLikeJsonObject(t=getModularInstance(t)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,t),__PRIVATE_parseObject(t,e);if(t instanceof FieldValue)return function(s,o){if(!__PRIVATE_isWrite(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,o){const l=[];let u=0;for(const c of s){let d=__PRIVATE_parseData(c,o.wc(u));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),u++}return{arrayValue:{values:l}}}(t,e)}return function(s,o){if((s=getModularInstance(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return toNumber$1(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Timestamp.fromDate(s);return{timestampValue:toTimestamp(o.serializer,l)}}if(s instanceof Timestamp){const l=new Timestamp(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:toTimestamp(o.serializer,l)}}if(s instanceof GeoPoint)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(o.serializer,s._byteString)};if(s instanceof DocumentReference){const l=o.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:__PRIVATE_toResourceName(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof VectorValue)return function(u,c){return{mapValue:{fields:{[ht$1]:{stringValue:It$1},[Et$1]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw c.Sc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(c.serializer,m)})}}}}}}(s,o);throw o.Sc(`Unsupported field value: ${__PRIVATE_valueDescription(s)}`)}(t,e)}function __PRIVATE_parseObject(t,e){const a={};return isEmpty(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach$1(t,(s,o)=>{const l=__PRIVATE_parseData(o,e.mc(s));l!=null&&(a[s]=l)}),{mapValue:{fields:a}}}function __PRIVATE_looksLikeJsonObject(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Timestamp||t instanceof GeoPoint||t instanceof Bytes||t instanceof DocumentReference||t instanceof FieldValue||t instanceof VectorValue)}function __PRIVATE_validatePlainObject(t,e,a){if(!__PRIVATE_looksLikeJsonObject(a)||!__PRIVATE_isPlainObject(a)){const s=__PRIVATE_valueDescription(a);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function __PRIVATE_fieldPathFromArgument$1(t,e,a){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(t,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",t,!1,void 0,a)}const Pn$1=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(t,e,a){if(e.search(Pn$1)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,a);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,a)}}function __PRIVATE_createError(t,e,a,s,o){const l=s&&!s.isEmpty(),u=o!==void 0;let c=`Function ${e}() called with invalid data`;a&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(l||u)&&(d+=" (found",l&&(d+=` in field ${s}`),u&&(d+=` in document ${o}`),d+=")"),new FirestoreError(N$1.INVALID_ARGUMENT,c+t+d)}function __PRIVATE_fieldMaskContains(t,e){return t.some(a=>a.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,a,s,o,l){this._firestore=e,this._userDataWriter=a,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const a=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(t,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(t,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new FirestoreError(N$1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(t,e,...a){let s=[];e instanceof AppliableConstraint&&s.push(e),s=s.concat(a),function(l){const u=l.filter(d=>d instanceof QueryCompositeFilterConstraint).length,c=l.filter(d=>d instanceof QueryFieldFilterConstraint).length;if(u>1||u>0&&c>0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)t=o._apply(t);return t}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,a,s){super(),this._field=e,this._op=a,this._value=s,this.type="where"}static _create(e,a,s){return new QueryFieldFilterConstraint(e,a,s)}_apply(e){const a=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,a),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,a))}_parse(e){const a=__PRIVATE_newUserDataReader(e.firestore);return function(l,u,c,d,m,g,A){let P;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(A,g);const me=[];for(const ve of A)me.push(__PRIVATE_parseDocumentIdValue(d,l,ve));P={arrayValue:{values:me}}}else P=__PRIVATE_parseDocumentIdValue(d,l,A)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(A,g),P=__PRIVATE_parseQueryValue(c,u,A,g==="in"||g==="not-in");return FieldFilter.create(m,g,P)}(e._query,"where",a,e.firestore._databaseId,this._field,this._op,this._value)}}function where(t,e,a){const s=e,o=__PRIVATE_fieldPathFromArgument("where",t);return QueryFieldFilterConstraint._create(o,s,a)}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,a){super(),this.type=e,this._queryConstraints=a}static _create(e,a){return new QueryCompositeFilterConstraint(e,a)}_parse(e){const a=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return a.length===1?a[0]:CompositeFilter.create(a,this._getOperator())}_apply(e){const a=this._parse(e);return a.getFilters().length===0?e:(function(o,l){let u=o;const c=l.getFlattenedFilters();for(const d of c)__PRIVATE_validateNewFieldFilter(u,d),u=__PRIVATE_queryWithAddedFilter(u,d)}(e._query,a),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,a){super(),this._field=e,this._direction=a,this.type="orderBy"}static _create(e,a){return new QueryOrderByConstraint(e,a)}_apply(e){const a=function(o,l,u){if(o.startAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(l,u)}(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,function(o,l){const u=o.explicitOrderBy.concat([l]);return new __PRIVATE_QueryImpl(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,a))}}function orderBy(t,e="asc"){const a=e,s=__PRIVATE_fieldPathFromArgument("orderBy",t);return QueryOrderByConstraint._create(s,a)}class QueryLimitConstraint extends QueryConstraint{constructor(e,a,s){super(),this.type=e,this._limit=a,this._limitType=s}static _create(e,a,s){return new QueryLimitConstraint(e,a,s)}_apply(e){return new Query(e.firestore,e.converter,__PRIVATE_queryWithLimit(e._query,this._limit,this._limitType))}}function limit(t){return __PRIVATE_validatePositiveNumber("limit",t),QueryLimitConstraint._create("limit",t,"F")}function __PRIVATE_parseDocumentIdValue(t,e,a){if(typeof(a=getModularInstance(a))=="string"){if(a==="")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&a.indexOf("/")!==-1)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const s=e.path.child(ResourcePath.fromString(a));if(!DocumentKey.isDocumentKey(s))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return __PRIVATE_refValue(t,new DocumentKey(s))}if(a instanceof DocumentReference)return __PRIVATE_refValue(t,a._key);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(a)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(t,e){if(!Array.isArray(t)||t.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(t,e){const a=function(o,l){for(const u of o)for(const c of u.getFlattenedFilters())if(l.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(a!==null)throw a===e.op?new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${a.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,a="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,a);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,a);case 11:return this.convertObject(e.mapValue,a);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,a){return this.convertObjectMap(e.fields,a)}convertObjectMap(e,a="none"){const s={};return forEach$1(e,(o,l)=>{s[o]=this.convertValue(l,a)}),s}convertVectorValue(e){const a=e.fields?.[Et$1].arrayValue?.values?.map(s=>__PRIVATE_normalizeNumber(s.doubleValue));return new VectorValue(a)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,a){return(e.values||[]).map(s=>this.convertValue(s,a))}convertServerTimestamp(e,a){switch(a){case"previous":const s=__PRIVATE_getPreviousValue(e);return s==null?null:this.convertValue(s,a);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const a=__PRIVATE_normalizeTimestamp(e);return new Timestamp(a.seconds,a.nanos)}convertDocumentKey(e,a){const s=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(s),9688,{name:e});const o=new DatabaseId(s.get(1),s.get(3)),l=new DocumentKey(s.popFirst(5));return o.isEqual(a)||__PRIVATE_logError(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(t,e,a){let s;return s=t?a&&(a.merge||a.mergeFields)?t.toFirestore(e,a):t.toFirestore(e):e,s}function count(){return new AggregateField("count")}class SnapshotMetadata{constructor(e,a){this.hasPendingWrites=e,this.fromCache=a}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,a,s,o,l,u){super(e,a,s,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const a=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,a={}){if(this._document){const s=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,a.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,a={};return a.type=DocumentSnapshot._jsonSchemaVersion,a.bundle="",a.bundleSource="DocumentSnapshot",a.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?a:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),a.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),a)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property$1("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property$1("string","DocumentSnapshot"),bundleName:property$1("string"),bundle:property$1("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,a,s,o){this._firestore=e,this._userDataWriter=a,this._snapshot=o,this.metadata=new SnapshotMetadata(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(a=>e.push(a)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,a){this._snapshot.docs.forEach(s=>{e.call(a,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,s.key,s,new SnapshotMetadata(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const a=!!e.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N$1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map(c=>{const d=new QueryDocumentSnapshot(o._firestore,o._userDataWriter,c.doc.key,c.doc,new SnapshotMetadata(o._snapshot.mutatedKeys.has(c.doc.key),o._snapshot.fromCache),o.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(c=>l||c.type!==3).map(c=>{const d=new QueryDocumentSnapshot(o._firestore,o._userDataWriter,c.doc.key,c.doc,new SnapshotMetadata(o._snapshot.mutatedKeys.has(c.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,g=-1;return c.type!==0&&(m=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(u=u.add(c.doc),g=u.indexOf(c.doc.key)),{type:__PRIVATE_resultChangeType(c.type),doc:d,oldIndex:m,newIndex:g}})}}(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const a=[],s=[],o=[];return this.docs.forEach(l=>{l._document!==null&&(a.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(t){t=__PRIVATE_cast(t,DocumentReference);const e=__PRIVATE_cast(t.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),t._key).then(a=>__PRIVATE_convertToDocSnapshot(e,t,a))}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property$1("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property$1("string","QuerySnapshot"),bundleName:property$1("string"),bundle:property$1("string")};class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const a=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,a)}}function getDocs(t){t=__PRIVATE_cast(t,Query);const e=__PRIVATE_cast(t.firestore,Firestore),a=ensureFirestoreConfigured(e),s=new __PRIVATE_ExpUserDataWriter(e);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(t._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(a,t._query).then(o=>new QuerySnapshot(e,s,t,o))}function setDoc(t,e,a){t=__PRIVATE_cast(t,DocumentReference);const s=__PRIVATE_cast(t.firestore,Firestore),o=__PRIVATE_applyFirestoreDataConverter(t.converter,e,a);return executeWrite(s,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(s),"setDoc",t._key,o,t.converter!==null,a).toMutation(t._key,Precondition.none())])}function updateDoc(t,e,a,...s){t=__PRIVATE_cast(t,DocumentReference);const o=__PRIVATE_cast(t.firestore,Firestore),l=__PRIVATE_newUserDataReader(o);let u;return u=typeof(e=getModularInstance(e))=="string"||e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(l,"updateDoc",t._key,e,a,s):__PRIVATE_parseUpdateData(l,"updateDoc",t._key,e),executeWrite(o,[u.toMutation(t._key,Precondition.exists(!0))])}function deleteDoc(t){return executeWrite(__PRIVATE_cast(t.firestore,Firestore),[new __PRIVATE_DeleteMutation(t._key,Precondition.none())])}function addDoc(t,e){const a=__PRIVATE_cast(t.firestore,Firestore),s=doc(t),o=__PRIVATE_applyFirestoreDataConverter(t.converter,e);return executeWrite(a,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(t.firestore),"addDoc",s._key,o,t.converter!==null,{}).toMutation(s._key,Precondition.exists(!1))]).then(()=>s)}function onSnapshot(t,...e){t=getModularInstance(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||__PRIVATE_isPartialObserver(e[s])||(a=e[s++]);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(__PRIVATE_isPartialObserver(e[s])){const d=e[s];e[s]=d.next?.bind(d),e[s+1]=d.error?.bind(d),e[s+2]=d.complete?.bind(d)}let l,u,c;if(t instanceof DocumentReference)u=__PRIVATE_cast(t.firestore,Firestore),c=__PRIVATE_newQueryForPath(t._key.path),l={next:d=>{e[s]&&e[s](__PRIVATE_convertToDocSnapshot(u,t,d))},error:e[s+1],complete:e[s+2]};else{const d=__PRIVATE_cast(t,Query);u=__PRIVATE_cast(d.firestore,Firestore),c=d._query;const m=new __PRIVATE_ExpUserDataWriter(u);l={next:g=>{e[s]&&e[s](new QuerySnapshot(u,m,d,g))},error:e[s+1],complete:e[s+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(t._query)}return function(m,g,A,P){const W=new __PRIVATE_AsyncObserver(P),me=new __PRIVATE_QueryListener(g,W,A);return m.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(m),me)),()=>{W.Nu(),m.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(m),me))}}(ensureFirestoreConfigured(u),c,o,l)}function executeWrite(t,e){return function(s,o){const l=new __PRIVATE_Deferred;return s.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(s),o,l)),l.promise}(ensureFirestoreConfigured(t),e)}function __PRIVATE_convertToDocSnapshot(t,e,a){const s=a.docs.get(e._key),o=new __PRIVATE_ExpUserDataWriter(t);return new DocumentSnapshot(t,o,e._key,s,new SnapshotMetadata(a.hasPendingWrites,a.fromCache),e.converter)}function getCountFromServer(t){return getAggregateFromServer(t,{count:count()})}function getAggregateFromServer(t,e){const a=__PRIVATE_cast(t.firestore,Firestore),s=ensureFirestoreConfigured(a),o=__PRIVATE_mapToArray(e,(l,u)=>new __PRIVATE_AggregateImpl(u,l.aggregateType,l._internalFieldPath));return __PRIVATE_firestoreClientRunAggregateQuery(s,t._query,o).then(l=>function(c,d,m){const g=new __PRIVATE_ExpUserDataWriter(c);return new AggregateQuerySnapshot(d,g,m)}(a,t,l))}function serverTimestamp(){return new __PRIVATE_ServerTimestampFieldValueImpl("serverTimestamp")}function arrayUnion(...t){return new __PRIVATE_ArrayUnionFieldValueImpl("arrayUnion",t)}function arrayRemove(...t){return new __PRIVATE_ArrayRemoveFieldValueImpl("arrayRemove",t)}(function(e,a=!0){(function(o){x=o})(SDK_VERSION),_registerComponent(new Component("firestore",(s,{instanceIdentifier:o,options:l})=>{const u=s.getProvider("app").getImmediate(),c=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(s.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(u,s.getProvider("app-check-internal")),function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new FirestoreError(N$1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(m.options.projectId,g)}(u,o),u);return l={useFetchStreams:a,...l},c._setSettings(l),c},"PUBLIC").setMultipleInstances(!0)),registerVersion(F,M,e),registerVersion(F,M,"esm2020")})();var name$1="firebase",version$3="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$1,version$3,"app");function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(t,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${t}`,...e)}function _logError(t,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(t,...e){throw createErrorInternal(t,...e)}function _createError(t,...e){return createErrorInternal(t,...e)}function _errorWithCustomMessage(t,e,a){const s={...prodErrorMap(),[e]:a};return new ErrorFactory("auth","Firebase",s).create(e,{appName:t.name})}function _serverAppCurrentUserOperationNotSupportedError(t){return _errorWithCustomMessage(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(t,e,a){const s=a;if(!(e instanceof s))throw s.name!==e.constructor.name&&_fail(t,"argument-error"),_errorWithCustomMessage(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(t,...e){if(typeof t!="string"){const a=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(a,...s)}return _DEFAULT_AUTH_ERROR_FACTORY.create(t,...e)}function _assert(t,e,...a){if(!t)throw createErrorInternal(e,...a)}function debugFail(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _logError(e),new Error(e)}function debugAssert(t,e){t||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){return typeof self<"u"&&self.location?.href||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,a){this.shortDelay=e,this.longDelay=a,debugAssert(a>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(t,e){debugAssert(t.emulator,"Emulator should always be set here");const{url:a}=t.emulator;return e?`${a}${e.startsWith("/")?e.slice(1):e}`:a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,a,s){this.fetchImpl=e,a&&(this.headersImpl=a),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function _performApiRequest(t,e,a,s,o={}){return _performFetchWithErrorHandling(t,o,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const c=querystring({key:t.config.apiKey,...u}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m={method:e,headers:d,...l};return isCloudflareWorker()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(m.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(t,t.config.apiHost,a,c),m)})}async function _performFetchWithErrorHandling(t,e,a){t._canInitEmulator=!1;const s={...SERVER_ERROR_MAP,...e};try{const o=new NetworkTimeout(t),l=await Promise.race([a(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw _makeTaggedError(t,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const c=l.ok?u.errorMessage:u.error.message,[d,m]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(t,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw _makeTaggedError(t,"email-already-in-use",u);if(d==="USER_DISABLED")throw _makeTaggedError(t,"user-disabled",u);const g=s[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw _errorWithCustomMessage(t,g,m);_fail(t,g)}}catch(o){if(o instanceof FirebaseError)throw o;_fail(t,"network-request-failed",{message:String(o)})}}async function _performSignInRequest(t,e,a,s,o={}){const l=await _performApiRequest(t,e,a,s,o);return"mfaPendingCredential"in l&&_fail(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function _getFinalTarget(t,e,a,s){const o=`${e}${a}?${s}`,l=t,u=l.config.emulator?_emulatorUrl(t.config,o):`${t.config.apiScheme}://${o}`;return CookieAuthProxiedEndpoints.includes(a)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function _parseEnforcementState(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((a,s)=>{this.timer=setTimeout(()=>s(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(t,e,a){const s={appName:t.name};a.email&&(s.email=a.email),a.phoneNumber&&(s.phoneNumber=a.phoneNumber);const o=_createError(t,e,s);return o.customData._tokenResponse=a,o}function isEnterprise(t){return t!==void 0&&t.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const a of this.recaptchaEnforcementState)if(a.provider&&a.provider===e)return _parseEnforcementState(a.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(t,e){return _performApiRequest(t,"GET","/v2/recaptchaConfig",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(t,e){return _performApiRequest(t,"POST","/v1/accounts:delete",e)}async function getAccountInfo(t,e){return _performApiRequest(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(t,e=!1){const a=getModularInstance(t),s=await a.getIdToken(e),o=_parseToken(s);_assert(o&&o.exp&&o.auth_time&&o.iat,a.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l?.sign_in_provider;return{claims:o,token:s,authTime:utcTimestampToDateString(secondsStringToMilliseconds(o.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(o.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(o.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function secondsStringToMilliseconds(t){return Number(t)*1e3}function _parseToken(t){const[e,a,s]=t.split(".");if(e===void 0||a===void 0||s===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const o=base64Decode(a);return o?JSON.parse(o):(_logError("Failed to decode base64 JWT payload"),null)}catch(o){return _logError("Caught error parsing JWT payload as JSON",o?.toString()),null}}function _tokenExpiresIn(t){const e=_parseToken(t);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(t,e,a=!1){if(a)return e;try{return await e}catch(s){throw s instanceof FirebaseError&&isUserInvalidated(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function isUserInvalidated({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const a=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},a)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,a){this.createdAt=e,this.lastLoginAt=a,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(t){const e=t.auth,a=await t.getIdToken(),s=await _logoutIfInvalidated(t,getAccountInfo(e,{idToken:a}));_assert(s?.users.length,e,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=o.providerUserInfo?.length?extractProviderData(o.providerUserInfo):[],u=mergeProviderData(t.providerData,l),c=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!u?.length,m=c?d:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new UserMetadata(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function reload(t){const e=getModularInstance(t);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(t,e){return[...t.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function extractProviderData(t){return t.map(({providerId:e,...a})=>({providerId:e,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(t,e){const a=await _performFetchWithErrorHandling(t,{},async()=>{const s=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=t.config,u=await _getFinalTarget(t,o,"/v1/token",`key=${l}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:s};return t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(d.credentials="include"),FetchProvider.fetch()(u,d)});return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}}async function revokeToken(t,e){return _performApiRequest(t,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const a="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,a)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const a=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,a)}async getToken(e,a=!1){return!a&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,a){const{accessToken:s,refreshToken:o,expiresIn:l}=await requestStsToken(e,a);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,a,s){this.refreshToken=a||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,a){const{refreshToken:s,accessToken:o,expirationTime:l}=a,u=new StsTokenManager;return s&&(_assert(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(_assert(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(_assert(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(t,e){_assert(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class UserImpl{constructor({uid:e,auth:a,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=a,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new UserMetadata(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const a=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(a,this.auth,"internal-error"),this.accessToken!==a&&(this.accessToken=a,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),a}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(a=>({...a})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const a=new UserImpl({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return a.metadata._copy(this.metadata),a}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,a=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),a&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,a){const s=a.displayName??void 0,o=a.email??void 0,l=a.phoneNumber??void 0,u=a.photoURL??void 0,c=a.tenantId??void 0,d=a._redirectEventId??void 0,m=a.createdAt??void 0,g=a.lastLoginAt??void 0,{uid:A,emailVerified:P,isAnonymous:W,providerData:me,stsTokenManager:ve}=a;_assert(A&&ve,e,"internal-error");const He=StsTokenManager.fromJSON(this.name,ve);_assert(typeof A=="string",e,"internal-error"),assertStringOrUndefined(s,e.name),assertStringOrUndefined(o,e.name),_assert(typeof P=="boolean",e,"internal-error"),_assert(typeof W=="boolean",e,"internal-error"),assertStringOrUndefined(l,e.name),assertStringOrUndefined(u,e.name),assertStringOrUndefined(c,e.name),assertStringOrUndefined(d,e.name),assertStringOrUndefined(m,e.name),assertStringOrUndefined(g,e.name);const De=new UserImpl({uid:A,auth:e,email:o,emailVerified:P,displayName:s,isAnonymous:W,photoURL:u,phoneNumber:l,tenantId:c,stsTokenManager:He,createdAt:m,lastLoginAt:g});return me&&Array.isArray(me)&&(De.providerData=me.map(Xe=>({...Xe}))),d&&(De._redirectEventId=d),De}static async _fromIdTokenResponse(e,a,s=!1){const o=new StsTokenManager;o.updateFromServerResponse(a);const l=new UserImpl({uid:a.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await _reloadWithoutSaving(l),l}static async _fromGetAccountInfoResponse(e,a,s){const o=a.users[0];_assert(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?extractProviderData(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!l?.length,c=new StsTokenManager;c.updateFromIdToken(s);const d=new UserImpl({uid:o.localId,auth:e,stsTokenManager:c,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new UserMetadata(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(t){debugAssert(t instanceof Function,"Expected a class definition");let e=instanceCache.get(t);return e?(debugAssert(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,instanceCache.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,a){this.storage[e]=a}async _get(e){const a=this.storage[e];return a===void 0?null:a}async _remove(e){delete this.storage[e]}_addListener(e,a){}_removeListener(e,a){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(t,e,a){return`firebase:${t}:${e}:${a}`}class PersistenceUserManager{constructor(e,a,s){this.persistence=e,this.auth=a,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,o.apiKey,l),this.fullPersistenceKey=_persistenceKeyName("persistence",o.apiKey,l),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const a=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return a?UserImpl._fromGetAccountInfoResponse(this.auth,a,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const a=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,a)return this.setCurrentUser(a)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,a,s="authUser"){if(!a.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,s);const o=(await Promise.all(a.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||_getInstance(inMemoryPersistence);const u=_persistenceKeyName(s,e.config.apiKey,e.name);let c=null;for(const m of a)try{const g=await m._get(u);if(g){let A;if(typeof g=="string"){const P=await getAccountInfo(e,{idToken:g}).catch(()=>{});if(!P)break;A=await UserImpl._fromGetAccountInfoResponse(e,P,g)}else A=UserImpl._fromJSON(e,g);m!==l&&(c=A),l=m;break}}catch{}const d=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new PersistenceUserManager(l,e,s):(l=d[0],c&&await l._set(u,c.toJSON()),await Promise.all(a.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new PersistenceUserManager(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const a=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(a);if(s?.length===2)return s[1]}return"Other"}function _isFirefox(t=getUA()){return/firefox\//i.test(t)}function _isSafari(t=getUA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(t=getUA()){return/crios\//i.test(t)}function _isIEMobile(t=getUA()){return/iemobile/i.test(t)}function _isAndroid(t=getUA()){return/android/i.test(t)}function _isBlackBerry(t=getUA()){return/blackberry/i.test(t)}function _isWebOS(t=getUA()){return/webos/i.test(t)}function _isIOS(t=getUA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _isIOSStandalone(t=getUA()){return _isIOS(t)&&!!window.navigator?.standalone}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(t=getUA()){return _isIOS(t)||_isAndroid(t)||_isWebOS(t)||_isBlackBerry(t)||/windows phone/i.test(t)||_isIEMobile(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(t,e=[]){let a;switch(t){case"Browser":a=_getBrowserName(getUA());break;case"Worker":a=`${_getBrowserName(getUA())}-${t}`;break;default:a=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${a}/JsCore/${SDK_VERSION}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,a){const s=l=>new Promise((u,c)=>{try{const d=e(l);u(d)}catch(d){c(d)}});s.onAbort=a,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const a=[];try{for(const s of this.queue)await s(e),s.onAbort&&a.push(s.onAbort)}catch(s){a.reverse();for(const o of a)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(t,e={}){return _performApiRequest(t,"GET","/v2/passwordPolicy",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=a.minPasswordLength??MINIMUM_MIN_PASSWORD_LENGTH,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=a.meetsMinPasswordLength??!0),a.isValid&&(a.isValid=a.meetsMaxPasswordLength??!0),a.isValid&&(a.isValid=a.containsLowercaseLetter??!0),a.isValid&&(a.isValid=a.containsUppercaseLetter??!0),a.isValid&&(a.isValid=a.containsNumericCharacter??!0),a.isValid&&(a.isValid=a.containsNonAlphanumericCharacter??!0),a}validatePasswordLengthOptions(e,a){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(a.meetsMinPasswordLength=e.length>=s),o&&(a.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,a){this.updatePasswordCharacterOptionsStatuses(a,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(a,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,a,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=a)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,a,s,o){this.app=e,this.heartbeatServiceProvider=a,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,a){return a&&(this._popupRedirectResolver=_getInstance(a)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(a),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const a=await getAccountInfo(this,{idToken:e}),s=await UserImpl._fromGetAccountInfoResponse(this,a,e);await this.directlySetCurrentUser(s)}catch(a){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",a),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_isFirebaseServerApp(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let s=a,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=s?._redirectEventId,c=await this.tryRedirectSignIn(e);(!l||l===u)&&c?.user&&(s=c.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let a=null;try{a=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return a}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(a){if(a?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const a=e?getModularInstance(e):null;return a&&_assert(a.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(a&&a._clone(this))}async _updateCurrentUser(e,a=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),a||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const a=this._getPasswordPolicyInternal();return a.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):a.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),a=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=a:this._tenantPasswordPolicies[this.tenantId]=a}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,a,s){return this.registerStateListener(this.authStateSubscription,e,a,s)}beforeAuthStateChanged(e,a){return this.beforeStateQueue.pushCallback(e,a)}onIdTokenChanged(e,a,s){return this.registerStateListener(this.idTokenSubscription,e,a,s)}authStateReady(){return new Promise((e,a)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},a)}})}async revokeAccessToken(e){if(this.currentUser){const a=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:a};this.tenantId!=null&&(s.tenantId=this.tenantId),await revokeToken(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,a){const s=await this.getOrInitRedirectPersistenceManager(a);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const a=e&&_getInstance(e)||this._popupRedirectResolver;_assert(a,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(a._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,a,s,o){if(this._deleted)return()=>{};const l=typeof a=="function"?a:a.next.bind(a);let u=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(c,this,"internal-error"),c.then(()=>{u||l(this.currentUser)}),typeof a=="function"){const d=e.addObserver(a,s,o);return()=>{u=!0,d()}}else{const d=e.addObserver(a);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const a=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();a&&(e["X-Firebase-Client"]=a);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_logWarn(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _castAuth(t){return getModularInstance(t)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(a=>this.observer=a)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(t){externalJSProvider=t}function _loadJS(t){return externalJSProvider.loadJS(t)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(e){e()}execute(e,a){return Promise.resolve("token")}render(e,a){return""}}class MockGreCAPTCHA{ready(e){e()}execute(e,a){return Promise.resolve("token")}render(e,a){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",a=!1){async function s(l){if(!a){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,c)=>{getRecaptchaConfig(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const m=new RecaptchaConfig(d);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(d=>{c(d)})})}function o(l,u,c){const d=window.grecaptcha;isEnterprise(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(FAKE_TOKEN)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(c=>{if(!a&&isEnterprise(window.grecaptcha))o(c,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=_recaptchaEnterpriseScriptUrl();d.length!==0&&(d+=c),_loadJS(d).then(()=>{o(c,l,u)}).catch(m=>{u(m)})}}).catch(c=>{u(c)})})}}async function injectRecaptchaFields(t,e,a,s=!1,o=!1){const l=new RecaptchaEnterpriseVerifier(t);let u;if(o)u=FAKE_TOKEN;else try{u=await l.verify(a)}catch{u=await l.verify(a,!0)}const c={...e};if(a==="mfaSmsEnrollment"||a==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,m=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return s?Object.assign(c,{captchaResp:u}):Object.assign(c,{captchaResponse:u}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function handleRecaptchaFlow(t,e,a,s,o){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await injectRecaptchaFields(t,e,a,a==="getOobCode");return s(t,l)}else return s(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${a} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await injectRecaptchaFields(t,e,a,a==="getOobCode");return s(t,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(t,e){const a=_getProvider(t,"auth");if(a.isInitialized()){const o=a.getImmediate(),l=a.getOptions();if(deepEqual(l,e??{}))return o;_fail(o,"already-initialized")}return a.initialize({options:e})}function _initializeAuthInstance(t,e){const a=e?.persistence||[],s=(Array.isArray(a)?a:[a]).map(_getInstance);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function connectAuthEmulator(t,e,a){const s=_castAuth(t);_assert(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=extractProtocol(e),{host:u,port:c}=extractHostAndPort(e),d=c===null?"":`:${c}`,m={url:`${l}//${u}${d}/`},g=Object.freeze({host:u,port:c,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){_assert(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_assert(deepEqual(m,s.config.emulator)&&deepEqual(g,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=g,s.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(u)?(pingServer(`${l}//${u}${d}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function extractHostAndPort(t){const e=extractProtocol(t),a=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!a)return{host:"",port:null};const s=a[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:parsePort(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:parsePort(u)}}}function parsePort(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function emitEmulatorWarning(){function t(){const e=document.createElement("p"),a=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,a){this.providerId=e,this.signInMethod=a}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,a){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function linkEmailPassword(t,e){return _performApiRequest(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}async function signInWithEmailLinkForLinking(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(e,a,s,o=null){super("password",s),this._email=e,this._password=a,this._tenantId=o}static _fromEmailAndPassword(e,a){return new EmailAuthCredential(e,a,"password")}static _fromEmailAndCode(e,a,s=null){return new EmailAuthCredential(e,a,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e;if(a?.email&&a?.password){if(a.signInMethod==="password")return this._fromEmailAndPassword(a.email,a.password);if(a.signInMethod==="emailLink")return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const a={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,a,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,a){switch(this.signInMethod){case"password":const s={idToken:a,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,s,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:a,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const a=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(a.idToken=e.idToken),e.accessToken&&(a.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(a.nonce=e.nonce),e.pendingToken&&(a.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(a.accessToken=e.oauthToken,a.secret=e.oauthTokenSecret):_fail("argument-error"),a}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=a;if(!s||!o)return null;const u=new OAuthCredential(s,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const a=this.buildRequest();return signInWithIdp(e,a)}_linkToIdToken(e,a){const s=this.buildRequest();return s.idToken=a,signInWithIdp(e,s)}_getReauthenticationResolver(e){const a=this.buildRequest();return a.autoCreate=!1,signInWithIdp(e,a)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),e.postBody=querystring(a)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(t){const e=querystringDecode(extractQuerystring(t)).link,a=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,s=querystringDecode(extractQuerystring(t)).deep_link_id;return(s?querystringDecode(extractQuerystring(s)).link:null)||s||a||e||t}class ActionCodeURL{constructor(e){const a=querystringDecode(extractQuerystring(e)),s=a.apiKey??null,o=a.oobCode??null,l=parseMode(a.mode??null);_assert(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=a.continueUrl??null,this.languageCode=a.lang??null,this.tenantId=a.tenantId??null}static parseLink(e){const a=parseDeepLink(e);try{return new ActionCodeURL(a)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,a){return EmailAuthCredential._fromEmailAndPassword(e,a)}static credentialWithLink(e,a){const s=ActionCodeURL.parseLink(a);return _assert(s,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,s.code,s.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,a){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:a})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:a,oauthAccessToken:s}=e;if(!a&&!s)return null;try{return GoogleAuthProvider.credential(a,s)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,a){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:a})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:a,oauthTokenSecret:s}=e;if(!a||!s)return null;try{return TwitterAuthProvider.credential(a,s)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signUp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,a,s,o=!1){const l=await UserImpl._fromIdTokenResponse(e,s,o),u=providerIdForResponse(s);return new UserCredentialImpl({user:l,providerId:u,_tokenResponse:s,operationType:a})}static async _forOperation(e,a,s){await e._updateTokensIfNecessary(s,!0);const o=providerIdForResponse(s);return new UserCredentialImpl({user:e,providerId:o,_tokenResponse:s,operationType:a})}}function providerIdForResponse(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,a,s,o){super(a.code,a.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:a.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,a,s,o){return new MultiFactorError(e,a,s,o)}}function _processCredentialSavingMfaContextIfNecessary(t,e,a,s){return(e==="reauthenticate"?a._getReauthenticationResolver(t):a._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(t,l,e,s):l})}async function _link$1(t,e,a=!1){const s=await _logoutIfInvalidated(t,e._linkToIdToken(t.auth,await t.getIdToken()),a);return UserCredentialImpl._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(t,e,a=!1){const{auth:s}=t;if(_isFirebaseServerApp(s.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(s));const o="reauthenticate";try{const l=await _logoutIfInvalidated(t,_processCredentialSavingMfaContextIfNecessary(s,o,e,t),a);_assert(l.idToken,s,"internal-error");const u=_parseToken(l.idToken);_assert(u,s,"internal-error");const{sub:c}=u;return _assert(t.uid===c,s,"user-mismatch"),UserCredentialImpl._forOperation(t,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&_fail(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(t,e,a=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const s="signIn",o=await _processCredentialSavingMfaContextIfNecessary(t,s,e),l=await UserCredentialImpl._fromIdTokenResponse(t,s,o);return a||await t._updateCurrentUser(l.user),l}async function signInWithCredential(t,e){return _signInWithCredential(_castAuth(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(t){const e=_castAuth(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function createUserWithEmailAndPassword(t,e,a){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const s=_castAuth(t),u=await handleRecaptchaFlow(s,{returnSecureToken:!0,email:e,password:a,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),d}),c=await UserCredentialImpl._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(c.user),c}function signInWithEmailAndPassword(t,e,a){return _isFirebaseServerApp(t.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t)):signInWithCredential(getModularInstance(t),EmailAuthProvider.credential(e,a)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),s})}function onIdTokenChanged(t,e,a,s){return getModularInstance(t).onIdTokenChanged(e,a,s)}function beforeAuthStateChanged(t,e,a){return getModularInstance(t).beforeAuthStateChanged(e,a)}function onAuthStateChanged(t,e,a,s){return getModularInstance(t).onAuthStateChanged(e,a,s)}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,a){this.storageRetriever=e,this.type=a}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,a){return this.storage.setItem(e,JSON.stringify(a)),Promise.resolve()}_get(e){const a=this.storage.getItem(e);return Promise.resolve(a?JSON.parse(a):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,a)=>this.onStorageEvent(e,a),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const a of Object.keys(this.listeners)){const s=this.storage.getItem(a),o=this.localCache[a];s!==o&&e(a,o,s)}}onStorageEvent(e,a=!1){if(!e.key){this.forAllChangedKeys((u,c,d)=>{this.notifyListeners(u,d)});return}const s=e.key;a?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!a&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);_isIE10()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,IE10_LOCAL_STORAGE_SYNC_DELAY):o()}notifyListeners(e,a){this.localCache[e]=a;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(a&&JSON.parse(a))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,a,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:a,newValue:s}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,a){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,a){await super._set(e,a),this.localCache[e]=JSON.stringify(a)}async _get(e){const a=await super._get(e);return this.localCache[e]=JSON.stringify(a),a}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,a){}_removeListener(e,a){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(a){return{fulfilled:!1,reason:a}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const a=this.receivers.find(o=>o.isListeningto(e));if(a)return a;const s=new Receiver(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const a=e,{eventId:s,eventType:o,data:l}=a.data,u=this.handlersMap[o];if(!u?.size)return;a.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(u).map(async m=>m(a.origin,l)),d=await _allSettled(c);a.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:d})}_subscribe(e,a){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(a)}_unsubscribe(e,a){this.handlersMap[e]&&a&&this.handlersMap[e].delete(a),(!a||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(t="",e=10){let a="";for(let s=0;s<e;s++)a+=Math.floor(Math.random()*10);return t+a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,a,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((c,d)=>{const m=_generateEventId("",20);o.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(A){const P=A;if(P.data.eventId===m)switch(P.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),c(P.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:a},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(t){_window().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){return navigator?.serviceWorker?.controller||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,a)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{a(this.request.error)})})}}function getObjectStore(t,e){return t.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const t=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(t).toPromise()}function _openDatabase(){const t=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,a)=>{t.addEventListener("error",()=>{a(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(o){a(o)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(s):(s.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(t,e,a){const s=getObjectStore(t,!0).put({[DB_DATA_KEYPATH]:e,value:a});return new DBPromise(s).toPromise()}async function getObject(t,e){const a=getObjectStore(t,!1).get(e),s=await new DBPromise(a).toPromise();return s===void 0?null:s.value}function _deleteObject(t,e){const a=getObjectStore(t,!0).delete(e);return new DBPromise(a).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let a=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(a++>_TRANSACTION_RETRY_COUNT)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,a)=>({keyProcessed:(await this._poll()).includes(a.key)})),this.receiver._subscribe("ping",async(e,a)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,a){return this._withPendingWrite(async()=>(await this._withRetries(s=>_putObject(s,e,a)),this.localCache[e]=a,this.notifyServiceWorker(e)))}async _get(e){const a=await this._withRetries(s=>getObject(s,e));return this.localCache[e]=a,a}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(a=>_deleteObject(a,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=getObjectStore(o,!1).getAll();return new DBPromise(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const a=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),a.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),a.push(o));return a}notifyListeners(e,a){this.localCache[e]=a;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(a)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,a){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(t,e){return e?_getInstance(e):(_assert(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,a){return signInWithIdp(e,this._buildIdpRequest(a))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const a={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(a.idToken=e),a}}function _signIn(t){return _signInWithCredential(t.auth,new IdpCredential(t),t.bypassAuthState)}function _reauth(t){const{auth:e,user:a}=t;return _assert(a,e,"internal-error"),_reauthenticate(a,new IdpCredential(t),t.bypassAuthState)}async function _link(t){const{auth:e,user:a}=t;return _assert(a,e,"internal-error"),_link$1(a,new IdpCredential(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,a,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){return new Promise(async(e,a)=>{this.pendingPromise={resolve:e,reject:a};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:a,sessionId:s,postBody:o,tenantId:l,error:u,type:c}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:a,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(t,e,a){if(_isFirebaseServerApp(t.app))return Promise.reject(_createError(t,"operation-not-supported-in-this-environment"));const s=_castAuth(t);_assertInstanceOf(t,e,FederatedAuthProvider);const o=_withDefaultResolver(s,a);return new PopupOperation(s,"signInViaPopup",e,o).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,a,s,o,l){super(e,a,o,l),this.provider=s,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(a=>{this.reject(a)}),this.resolver._isIframeWebStorageSupported(this.auth,a=>{a||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,a,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],a,void 0,s),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const s=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(a){e=()=>Promise.reject(a)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const a=await this.auth._redirectUserForId(e.eventId);if(a)return this.user=a,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(t,e){const a=pendingRedirectKey(e),s=resolverPersistence(t);if(!await s._isAvailable())return!1;const o=await s._get(a)==="true";return await s._remove(a),o}function _overrideRedirectResult(t,e){redirectOutcomeMap.set(t._key(),e)}function resolverPersistence(t){return _getInstance(t._redirectPersistence)}function pendingRedirectKey(t){return _persistenceKeyName(PENDING_REDIRECT_KEY,t.config.apiKey,t.name)}async function _getRedirectResult(t,e,a=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const s=_castAuth(t),o=_withDefaultResolver(s,e),u=await new RedirectAction(s,o,a).execute();return u&&!a&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=600*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let a=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(a=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,a||(this.queuedRedirectEvent=e,a=!0)),a}sendToConsumer(e,a){if(e.error&&!isNullRedirectEvent(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";a.onError(_createError(this.auth,s))}else a.onAuthEvent(e)}isEventForConsumer(e,a){const s=a.eventId===null||!!e.eventId&&e.eventId===a.eventId;return a.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function isRedirectEvent(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(t,e={}){return _performApiRequest(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(t);for(const a of e)try{if(matchDomain(a))return}catch{}_fail(t,"unauthorized-domain")}function matchDomain(t){const e=_getCurrentUrl(),{protocol:a,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&s===""?a==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):a==="chrome-extension:"&&u.hostname===s}if(!HTTP_REGEX.test(a))return!1;if(IP_ADDRESS_REGEX.test(t))return s===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const t=_window().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let a=0;a<t.CP.length;a++)t.CP[a]=null}}function loadGapi(t){return new Promise((e,a)=>{function s(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),a(_createError(t,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(_window().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_window().gapi?.load)s();else{const o=_generateCallbackName("iframefcb");return _window()[o]=()=>{gapi.load?s():a(_createError(t,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${o}`).catch(l=>a(l))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(t){return cachedGApiLoader=cachedGApiLoader||loadGapi(t),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(t){const e=t.config;_assert(e.authDomain,t,"auth-domain-config-required");const a=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${t.config.authDomain}/${IFRAME_PATH}`,s={apiKey:e.apiKey,appName:t.name,v:SDK_VERSION},o=EID_FROM_APIHOST.get(t.config.apiHost);o&&(s.eid=o);const l=t._getFrameworks();return l.length&&(s.fw=l.join(",")),`${a}?${querystring(s).slice(1)}`}async function _openIframe(t){const e=await _loadGapi(t),a=_window().gapi;return _assert(a,t,"internal-error"),e.open({where:document.body,url:getIframeUrl(t),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const u=_createError(t,"network-request-failed"),c=_window().setTimeout(()=>{l(u)},PING_TIMEOUT.get());function d(){_window().clearTimeout(c),o(s)}s.ping(d).then(d,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(t,e,a,s=DEFAULT_WIDTH,o=DEFAULT_HEIGHT){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const d={...BASE_POPUP_OPTIONS,width:s.toString(),height:o.toString(),top:l,left:u},m=getUA().toLowerCase();a&&(c=_isChromeIOS(m)?TARGET_BLANK:a),_isFirefox(m)&&(e=e||FIREFOX_EMPTY_URL,d.scrollbars="yes");const g=Object.entries(d).reduce((P,[W,me])=>`${P}${W}=${me},`,"");if(_isIOSStandalone(m)&&c!=="_self")return openAsNewWindowIOS(e||"",c),new AuthPopup(null);const A=window.open(e||"",c,g);_assert(A,t,"popup-blocked");try{A.focus()}catch{}return new AuthPopup(A)}function openAsNewWindowIOS(t,e){const a=document.createElement("a");a.href=t,a.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(t,e,a,s,o,l){_assert(t.config.authDomain,t,"auth-domain-config-required"),_assert(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:a,redirectUrl:s,v:SDK_VERSION,eventId:o};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",isEmpty$1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,A]of Object.entries({}))u[g]=A}if(e instanceof BaseOAuthProvider){const g=e.getScopes().filter(A=>A!=="");g.length>0&&(u.scopes=g.join(","))}t.tenantId&&(u.tid=t.tenantId);const c=u;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const d=await t._getAppCheckToken(),m=d?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(d)}`:"";return`${getHandlerBase(t)}?${querystring(c).slice(1)}${m}`}function getHandlerBase({config:t}){return t.emulator?_emulatorUrl(t,EMULATOR_WIDGET_PATH):`https://${t.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,a,s,o){debugAssert(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await _getRedirectUrl(e,a,s,_getCurrentUrl(),o);return _open(e,l,_generateEventId())}async _openRedirect(e,a,s,o){await this._originValidation(e);const l=await _getRedirectUrl(e,a,s,_getCurrentUrl(),o);return _setWindowLocation(l),new Promise(()=>{})}_initialize(e){const a=e._key();if(this.eventManagers[a]){const{manager:o,promise:l}=this.eventManagers[a];return o?Promise.resolve(o):(debugAssert(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[a]={promise:s},s.catch(()=>{delete this.eventManagers[a]}),s}async initAndGetManager(e){const a=await _openIframe(e),s=new AuthEventManager(e);return a.register("authEvent",o=>(_assert(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=a,s}_isIframeWebStorageSupported(e,a){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},o=>{const l=o?.[0]?.[WEB_STORAGE_SUPPORT_KEY];l!==void 0&&a(!!l),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const a=e._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=_validateOrigin(e)),this.originValidationPromises[a]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name="@firebase/auth",version$2="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const a=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,a),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const a=this.internalListeners.get(e);a&&(this.internalListeners.delete(e),a(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(t){_registerComponent(new Component("auth",(e,{options:a})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:c}=s.options;_assert(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const d={apiKey:u,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(t)},m=new AuthImpl(s,o,l,d);return _initializeAuthInstance(m,a),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,a,s)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const a=_castAuth(e.getProvider("auth").getImmediate());return(s=>new AuthInterop(s))(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name,version$2,getVersionForPlatform(t)),registerVersion(name,version$2,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=300,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=t=>async e=>{const a=e&&await e.getIdTokenResult(),s=a&&(new Date().getTime()-Date.parse(a.issuedAtTime))/1e3;if(s&&s>authIdTokenMaxAge)return;const o=a?.token;lastPostedIdToken!==o&&(lastPostedIdToken=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function getAuth(t=getApp()){const e=_getProvider(t,"auth");if(e.isInitialized())return e.getImmediate();const a=initializeAuth(t,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),s=getExperimentalSetting("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=mintCookieFactory(l.toString());beforeAuthStateChanged(a,u,()=>u(a.currentUser)),onIdTokenChanged(a,c=>u(c))}}const o=getDefaultEmulatorHost("auth");return o&&connectAuthEmulator(a,`http://${o}`),a}function getScriptParentElement(){return document.getElementsByTagName("head")?.[0]??document}_setExternalJSProvider({loadJS(t){return new Promise((e,a)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=o=>{const l=_createError("internal-error");l.customData=o,a(l)},s.type="text/javascript",s.charset="UTF-8",getScriptParentElement().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");const firebaseConfig={apiKey:"AIzaSyBuJhHXA4rtD1w3cHXtvOPgnDhcWsRfrtU",authDomain:"certchamps-a7527.firebaseapp.com",databaseURL:"https://certchamps-a7527-default-rtdb.firebaseio.com",projectId:"certchamps-a7527",storageBucket:"certchamps-a7527.firebasestorage.app",messagingSenderId:"433584407503",appId:"1:433584407503:web:dabeb6a07906ae0d6ac8ba",measurementId:"G-7SKFDGYV8J"},app=initializeApp(firebaseConfig),auth=getAuth(app),db$1=getFirestore(app),storage=getStorage(app);function useAuthentication(t){const{setUser:e}=reactExports.useContext(UserContext),[a,s]=reactExports.useState({}),o=getStorage(),l=useNavigate(),u=async(P,W,me)=>{const ve=await getDownloadURL(ref(o,"crown.png"));e({uid:P,username:W,email:me,picture:ve,friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,streak:0,savedQuestions:[],decks:[]}),await setDoc(doc(db$1,"user-data",P),{uid:P,username:W,email:me,picture:"crown.png",friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,streak:0,savedQuestions:[]}),t?.prevRoute?l(`${t.prevRoute}`):l("/practice")},c=async(P,W,me)=>{try{const ve=await getDoc(doc(db$1,"user-data",P)),He=collection(db$1,"user-data",P,"decks"),Xe=(await getDocs(He)).docs.map(qe=>({id:qe.id,...qe.data()}));if(ve.exists()){const qe=await getDownloadURL(ref(o,ve.data().picture));e({uid:ve.id,username:ve.data().username,email:ve.data().email,picture:qe,friends:ve.data().friends,pendingFriends:ve.data().pendingFriends,notifications:ve.data().notifications,rank:ve.data().rank,xp:ve.data().xp,streak:ve.data().streak,savedQuestions:ve.data().savedQuestions,decks:Xe})}else u(P,W,me)}catch(ve){console.log(ve)}t?.prevRoute?l(`${t.prevRoute}`):l("/practice")},d=async()=>{const P=new GoogleAuthProvider;try{const me=(await signInWithPopup(auth,P)).user;me&&me.email&&c(me.uid,me.displayName??"newUser",me.email)}catch{s(me=>({...me,general:"Something went wrong. Please try again"}))}},m=async(P,W,me)=>{if(s({}),P.length<2){s(ve=>({...ve,username:"Username is too short. Min 2 char."}));return}if(P.length>10){s(ve=>({...ve,username:"Username is too long. Max 10 char."}));return}try{const He=(await createUserWithEmailAndPassword(auth,W,me)).user;He&&u(He.uid,P,W)}catch(ve){const He=ve.code,De=ve.message;s(He==="auth/email-already-in-use"?Xe=>({...Xe,email:"This email is already in use."}):He==="auth/invalid-email"?Xe=>({...Xe,email:"The email address is not valid."}):He==="auth/weak-password"?Xe=>({...Xe,password:"Password too short. Min 6 chars"}):De==="Firebase: Error (auth/missing-password)."?Xe=>({...Xe,password:"Please enter a password"}):Xe=>({...Xe,general:"Something went wrong. Please try again"}))}},g=async(P,W)=>{s({});try{const ve=(await signInWithEmailAndPassword(auth,P,W)).user;ve&&c(ve.uid,"",P)}catch(me){const ve=me.code,He=me.message;s(ve==="auth/user-not-found"?De=>({...De,email:"No account found with this email address."}):ve==="auth/wrong-password"?De=>({...De,password:"Incorrect password. Please try again."}):ve==="auth/invalid-email"?De=>({...De,email:"The email address is not valid."}):He==="Firebase: Error (auth/missing-password)."?De=>({...De,password:"Please enter a password."}):ve==="auth/invalid-credential"?De=>({...De,email:"User not found"}):De=>({...De,general:"Something went wrong. Please try again."}))}};reactExports.useEffect(()=>{const P=onAuthStateChanged(auth,W=>{A(W)});return()=>P()},[]);const A=async P=>{P&&P.email&&P.uid&&(await c(P.uid,"",P.email),t?.prevRoute?l(`${t.prevRoute}`):l("/practice"))};return{loginWithGoogle:d,signUpWithEmail:m,signInWithEmail:g,userSetup:c,error:a}}function Login(){const t=useNavigate(),{signInWithEmail:e,loginWithGoogle:a,error:s}=useAuthentication(),[o,l]=reactExports.useState(),[u,c]=reactExports.useState(),d="txt-sub text-xs font-bold w-9/12 mx-auto mb-1";return jsxRuntimeExports.jsx("div",{className:" h-full flex justify-center items-center w-full color-bg-grey-5",children:jsxRuntimeExports.jsxs("div",{className:" py-8 w-72 h-10/12 color-shadow border-2 rounded-out color-bg",children:[jsxRuntimeExports.jsx("img",{src:crown,className:"w-34 m-auto object-cover h-24"}),jsxRuntimeExports.jsx("h1",{className:"txt-heading-colour text-center text-2xl mb-4",children:"Login"}),jsxRuntimeExports.jsx("p",{className:"font-light text-red ml-0.5 text-center",children:s?.general?s.general:""}),jsxRuntimeExports.jsxs("p",{className:d,children:["email",jsxRuntimeExports.jsx("span",{className:"font-light text-red ml-1",children:s?.email?s.email:""})]}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"email",className:"txtbox mx-auto mb-2 w-9/12",onChange:m=>{l(m.target.value)}}),jsxRuntimeExports.jsxs("p",{className:d,children:["password",jsxRuntimeExports.jsx("span",{className:"font-light text-red ml-1",children:s?.password?s.password:""})]}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"password",className:"txtbox mx-auto mb-4 w-9/12",onChange:m=>{c(m.target.value)}}),jsxRuntimeExports.jsx("p",{className:"blue-btn mx-auto my-2 w-9/12 text-center",onClick:()=>{e(o??"",u??"")},children:"Login"}),jsxRuntimeExports.jsxs("div",{className:"red-btn mx-auto my-2 w-9/12 text-center bg-[#4C8BF5] flex justify-center items-center",children:[jsxRuntimeExports.jsx(FaGoogle,{className:"mr-2 text-white",size:17}),jsxRuntimeExports.jsx("p",{onClick:()=>{a()},children:"Login With Google"})]}),jsxRuntimeExports.jsxs("p",{className:"txt-sub text-center mt-auto hover:color-txt-accent duration-250 transition-all",onClick:()=>{t("/")},children:["Don't have an account? ",jsxRuntimeExports.jsx("span",{className:"underline",children:"Sign up here."})]})]})})}function SignUp(){const t=useNavigate(),a=useLocation().state?.prevRoute;reactExports.useEffect(()=>{console.log("Previous Route: ",a)},[a]);const{signUpWithEmail:s,loginWithGoogle:o,error:l}=useAuthentication({prevRoute:a}),[u,c]=reactExports.useState(),[d,m]=reactExports.useState(),[g,A]=reactExports.useState(),P="txt-sub text-xs font-bold w-9/12 mx-auto mb-1";return jsxRuntimeExports.jsx("div",{className:" h-full flex justify-center items-center w-full color-bg-grey-5",children:jsxRuntimeExports.jsxs("div",{className:" py-8 w-72 h-10/12 color-shadow border-2 rounded-out color-bg",children:[jsxRuntimeExports.jsx("img",{src:crown,className:"w-34 m-auto object-cover h-24 mb-4"}),jsxRuntimeExports.jsx("h1",{className:"txt-heading-colour text-center text-2xl mb-4",children:"Sign Up"}),jsxRuntimeExports.jsx("p",{className:"font-light text-red ml-0.5 text-center",children:l?.general?l.general:""}),jsxRuntimeExports.jsxs("p",{className:P,children:["username",jsxRuntimeExports.jsx("span",{className:"font-light text-red ml-1",children:l?.username?l.username:""})]}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"username",className:"txtbox mx-auto mb-2 w-9/12",onChange:W=>{A(W.target.value)}}),jsxRuntimeExports.jsxs("p",{className:P,children:["email",jsxRuntimeExports.jsx("span",{className:"font-light text-red ml-1",children:l?.email?l.email:""})]}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"email",className:"txtbox mx-auto mb-2 w-9/12",onChange:W=>{c(W.target.value),console.log(W.target.value)}}),jsxRuntimeExports.jsxs("p",{className:P,children:["password",jsxRuntimeExports.jsx("span",{className:"font-light text-red ml-1",children:l?.password?l.password:""})]}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"password",className:"txtbox mx-auto mb-4 w-9/12",onChange:W=>{m(W.target.value)}}),jsxRuntimeExports.jsx("p",{className:"blue-btn mx-auto my-2 w-9/12 text-center",onClick:()=>{s(g??"",u??"",d??"")},children:"Sign Up"}),jsxRuntimeExports.jsxs("div",{className:"red-btn mx-auto my-2 w-9/12 text-center bg-[#4C8BF5] flex justify-center items-center",children:[jsxRuntimeExports.jsx(FaGoogle,{className:"mr-2 text-white",size:17}),jsxRuntimeExports.jsx("p",{onClick:()=>{o()},children:"Sign Up With Google"})]}),jsxRuntimeExports.jsxs("p",{className:"txt-sub text-center hover:color-txt-accent duration-250 transition-all",onClick:()=>{t("./login")},children:["Already have an account? ",jsxRuntimeExports.jsx("span",{className:"underline",children:"Login here."})]})]})})}function useFetch(){const t=getStorage(),e=async u=>{try{return await getDownloadURL(ref(t,u))}catch(c){return console.log(` Failed to load image for path: ${u}`,c.code,c.message),null}},a=async(u,c)=>{const d=await s(u);if(!d.friends)return;const m=d.friends.map(async g=>{try{const P=(await getDoc(doc(db$1,"user-data",g))).data();if(!P)return null;const W=await e(P.picture);return{...P,...c,picture:W}}catch(A){return console.log(A),null}});return(await Promise.all(m)).filter(g=>g!==null)},s=async(u,c)=>{try{const d=(await getDoc(doc(db$1,"user-data",u))).data(),m=await e(d?.picture);return{...d,...c,picture:m}}catch(d){return console.log(d),null}};return{fetchImage:e,fetchFriends:a,fetchUser:s,fetchDecks:async u=>{try{return(await getDocs(collection(db$1,"user-data",u,"decks"))).docs.map(m=>({id:m.id,...m.data()}))}catch(c){return console.log(c),null}},fetchPost:async u=>{try{const c=await getDoc(doc(db$1,"posts",u));let d=null;c.exists()&&(d=c.data());const m=s(d?.id);return{...d,...m,id:c.id}}catch(c){return console.log(c),null}}}}function useQuestions(t){const{fetchImage:e}=useFetch(),[a,s]=reactExports.useState([]),o=A=>Math.floor(Math.random()*A)+1,l=A=>`CCQ${o(A).toString().padStart(8,"0")}`,u=async A=>{let P=query(collection(db$1,"certchamps-questions"));const W=await getCountFromServer(P),me=l(W.data().count);return t?.filters&&t?.filters.length>0?(console.log(t.filters),P=query(collection(db$1,"certchamps-questions"),where("id","<=",me),where("id","!=",A),where("tags","array-contains-any",t.filters),orderBy("id","desc"),limit(1)),(await getDocs(P)).empty&&(P=query(collection(db$1,"certchamps-questions"),where("id",">=",me),where("id","!=",A),where("tags","array-contains-any",t.filters),orderBy("id","asc"),limit(1)))):(P=query(collection(db$1,"certchamps-questions"),where("id","<=",me),where("id","!=",A),orderBy("id","desc"),limit(1)),(await getDocs(P)).empty&&(P=query(collection(db$1,"certchamps-questions"),where("id",">=",me),where("id","!=",A),orderBy("id","asc"),limit(1)))),(await getDocs(P)).docs[0].id},c=async A=>{const P=(await getDoc(doc(db$1,"certchamps-questions",A))).data(),me=(await getDocs(collection(db$1,"certchamps-questions",A,"content"))).docs.map(async He=>{const De=await He.data();if(De.image){const Xe=await e(De.image);De.image=Xe}return De}),ve=await Promise.all(me);return{id:A,properties:P,content:ve}},d=async A=>{let P=null;A?P=await c(A):P=await c(await u("")),t?.setQuestions(W=>[...W,P])},m=async()=>{const A=await getDocs(collection(db$1,"certchamps-questions")),P=await Promise.all(A.docs.map(async W=>{const me=W.id,ve=W.data(),De=(await getDocs(collection(db$1,"certchamps-questions",me,"content"))).docs.map(async qe=>{const Rs=qe.data();if(Rs.image){const Vc=await e(Rs.image);Rs.image=Vc}return Rs}),Xe=await Promise.all(De);return{id:me,properties:ve,content:Xe}}));return s(P),P};function g(A){return{1:"i",2:"ii",3:"iii",4:"iv",5:"v",6:"vi",7:"vii",8:"viii",9:"ix",10:"x"}[A]??null}return{getRandomQuestion:u,fetchQuestion:c,loadQuestions:d,toRoman:g,fetchAllQuestions:m,allQuestions:a}}function LuArrowLeft(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 19-7-7 7-7"},child:[]},{tag:"path",attr:{d:"M19 12H5"},child:[]}]})(t)}function LuArrowRight(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12h14"},child:[]},{tag:"path",attr:{d:"m12 5 7 7-7 7"},child:[]}]})(t)}function LuBell(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"},child:[]},{tag:"path",attr:{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"},child:[]}]})(t)}function LuBookMarked(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 2v8l3-3 3 3V2"},child:[]},{tag:"path",attr:{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"},child:[]}]})(t)}function LuCheck(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 6 9 17l-5-5"},child:[]}]})(t)}function LuChevronRight(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m9 18 6-6-6-6"},child:[]}]})(t)}function LuFilter(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function LuFlame(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"},child:[]}]})(t)}function LuImage(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"9",r:"2"},child:[]},{tag:"path",attr:{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"},child:[]}]})(t)}function LuLogOut(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",x2:"9",y1:"12",y2:"12"},child:[]}]})(t)}function LuMessageCircleMore(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]},{tag:"path",attr:{d:"M8 12h.01"},child:[]},{tag:"path",attr:{d:"M12 12h.01"},child:[]},{tag:"path",attr:{d:"M16 12h.01"},child:[]}]})(t)}function LuMessageSquareText(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]},{tag:"path",attr:{d:"M13 8H7"},child:[]},{tag:"path",attr:{d:"M17 12H7"},child:[]}]})(t)}function LuPencil(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"},child:[]},{tag:"path",attr:{d:"m15 5 4 4"},child:[]}]})(t)}function LuSearch(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"path",attr:{d:"m21 21-4.3-4.3"},child:[]}]})(t)}function LuSettings(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function LuShare2(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49"},child:[]}]})(t)}function LuTimer(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"10",x2:"14",y1:"2",y2:"2"},child:[]},{tag:"line",attr:{x1:"12",x2:"15",y1:"14",y2:"11"},child:[]},{tag:"circle",attr:{cx:"12",cy:"14",r:"8"},child:[]}]})(t)}function LuTrash(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 6h18"},child:[]},{tag:"path",attr:{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"},child:[]},{tag:"path",attr:{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},child:[]}]})(t)}function LuUsers(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function LuX(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(t)}function TbCards(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3.604 7.197l7.138 -3.109a.96 .96 0 0 1 1.27 .527l4.924 11.902a1 1 0 0 1 -.514 1.304l-7.137 3.109a.96 .96 0 0 1 -1.271 -.527l-4.924 -11.903a1 1 0 0 1 .514 -1.304z"},child:[]},{tag:"path",attr:{d:"M15 4h1a1 1 0 0 1 1 1v3.5"},child:[]},{tag:"path",attr:{d:"M20 6c.264 .112 .52 .217 .768 .315a1 1 0 0 1 .53 1.311l-2.298 5.374"},child:[]}]})(t)}const correctSound="/assets/Click-Bounce_Success-BsX0OnJY.wav",incorrectSound="/assets/Click-Bounce_Failure-BVe7miNv.wav";var nerdamer_core$1={exports:{}},nerdamer_core=nerdamer_core$1.exports,hasRequiredNerdamer_core;function requireNerdamer_core(){return hasRequiredNerdamer_core||(hasRequiredNerdamer_core=1,function(t){var e=function(a){var s="1.1.13",o=new H4,l=a.bigInt,u=a.bigDec;u.set({precision:250});var c={},d=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083],m={},g={callPeekers:!1,init_primes:1e3,exclude:[],suppress_errors:!1,PARSE2NUMBER:!1,SAFE:!1,IMAGINARY:"i",FUNCTION_MODULES:[Math],ALLOW_CHARS:[""],USE_MULTICHARACTER_VARS:!0,POWER_OPERATOR:"^",VALIDATION_REGEX:/^[a-z_ABEZHIKMNoOPTX][0-9a-z_ABEZHIKMNoOPTX]*$/i,IMPLIED_MULTIPLICATION_REGEX:/([\+\-\/\*]*[0-9]+)([a-z_ABEZHIKMNoOPTX]+[\+\-\/\*]*)/gi,ALIASES:{:"pi","":"Infinity"},POSITIVE_MULTIPLIERS:!1,CACHE:{},SILENCE_WARNINGS:!1,PRECISION:21,EXPRESSION_DECP:19,DEFAULT_DECP:16,VECTOR:"vector",PARENTHESIS:"parens",SQRT:"sqrt",ABS:"abs",FACTORIAL:"factorial",DOUBLEFACTORIAL:"dfactorial",LONG_PI:"3.14159265358979323846264338327950288419716939937510582097494459230781640628620899862803482534211706798214808651328230664709384460955058223172535940812848111745028410270193852110555964462294895493038196",LONG_E:"2.71828182845904523536028747135266249775724709369995957496696762772407663035354759457138217852516642742746639193200305992181741359662904357290033429526059563073813232862794349076323382988075319525101901",PI:Math.PI,E:Math.E,LOG:"log",LOG10:"log10",LOG10_LATEX:"log_{10}",MAX_EXP:2e5,SCIENTIFIC_MAX_DECIMAL_PLACES:14,SCIENTIFIC_IGNORE_ZERO_EXPONENTS:!0};(function(){g.CACHE.roots={};for(var ae=40,To=40,wh=2;wh<=ae;wh++)for(var ff=2;ff<=To;ff++){var n1=l(wh).pow(ff);g.CACHE.roots[n1+"-"+ff]=wh}})();var A=c.N=1,P=c.P=2,W=c.S=3,me=c.EX=4,ve=c.FN=5,He=c.PL=6,De=c.CB=7,Xe=c.CP=8,qe=g.CONST_HASH="#",Rs=g.PARENTHESIS,Vc=g.SQRT,So=g.ABS,Do=g.FACTORIAL,eh=g.DOUBLEFACTORIAL,Ko=[],Ge={},An=[],wt=[],Bs=function(ae,To){if(!g.suppress_errors)throw To?new To(ae):new Error(ae)},yh=function(ae){var To=function(wh){this.name=ae,this.message=wh!==void 0?wh:"";var ff=new Error(this.message);ff.name=this.name,this.stack=ff.stack};return To.prototype=Object.create(Error.prototype),To},df=function(ae){return An.indexOf(ae)!==-1},Fc=function(ae){for(var To=ae[0],wh=1,ff=ae.length;wh<ff;wh++)if(!ae[wh].equals(To))return!1;return!0},_h=function(ae){wt.push(ae),g.SHOW_WARNINGS&&console&&console.warn&&console.warn(ae)},qc=function(ae,To){if(To=To||"variable",g.ALLOW_CHARS.indexOf(ae)===-1){var wh=g.VALIDATION_REGEX;if(!wh.test(ae))throw new U2(ae+" is not a valid "+To+" name")}},Mh=function(ae){var To=Math.sign(ae);if(ae=Math.abs(ae),/\d+\.?\d*e[\+\-]*\d+/i.test(ae)){var wh="0",ff=String(ae).toLowerCase().split("e"),n1=ff.pop(),c1=Math.abs(n1),u1=n1/c1,A1=ff[0].split(".");if(u1===-1)c1=c1-A1[0].length,c1<0?ae=A1[0].slice(0,c1)+"."+A1[0].slice(c1)+(A1.length===2?A1[1]:""):ae=wh+"."+new Array(c1+1).join(wh)+A1.join("");else{var u2=A1[1];u2&&(c1=c1-u2.length),c1<0?ae=A1[0]+u2.slice(0,c1)+"."+u2.slice(c1):ae=A1.join("")+new Array(c1+1).join(wh)}}return To<0?"-"+ae:ae},cf=function(ae){for(var To=Math.floor(Math.sqrt(ae)),wh=2;wh<=To;wh++)if(ae%wh===0)return!1;return!0},mf=function(ae,To){var wh={};return wh[ae]=To,wh},a1=function(ae){return/^\d+\.?\d*$/.test(ae)},s1=function(ae){for(var To=0;To<ae.length;To++)if(!a1(ae[To]))return!1;return!0},E1=function(ae){return T1(ae)?E1(ae.multiplier.toDecimal()):ae%1!==0},T1=function(ae){return ae instanceof h1},z1=function(ae){return ae instanceof l4},W1=function(ae,To,wh){if(wh=wh||{c:[],add:function(A1){this.c.indexOf(A1)===-1&&isNaN(A1)&&this.c.push(A1)}},T1(ae)){var ff=ae.group,n1=ae.previousGroup;if(ff===me&&W1(ae.power,To,wh),ff===Xe||ff===De||n1===Xe||n1===De)for(var c1 in ae.symbols)W1(ae.symbols[c1],To,wh);else if(ff===W||n1===W)ae.value==="e"||ae.value==="pi"||ae.value===g.IMAGINARY||wh.add(ae.value);else if(ff===He||n1===He)W1(e1(ae.symbols),To,wh);else if(ff===me)isNaN(ae.value)||wh.add(ae.value),W1(ae.power,To,wh);else if(ff===ve&&!To)for(var u1=0;u1<ae.args.length;u1++)W1(ae.args[u1],To,wh)}return wh.c.sort()},m2=function(ae,To){for(var wh=new h1(0),ff=0;ff<ae.length;ff++){var n1=ae[ff];wh=o.add(wh,T1(n1)?n1:o.parse(n1))}return To?Number(wh):wh},C2=function(ae,To){ae=o.expand(ae),To=To||{};var wh=function(ff,n1){To[ff]||(To[ff]=new h1(0)),To[ff]=o.add(To[ff],n1.clone())};return ae.each(function(ff){if(ff.isConstant("all"))wh("constants",ff);else if(ff.group===W)wh(ff.value,ff);else if(ff.group===ve&&(ff.fname===So||ff.fname===""))C2(ff.args[0]);else{if(ff.group===me||ff.group===ve)throw new Error("Unable to separate. Term cannot be a function!");wh(W1(ff).join(" "),ff)}}),To},A2=function(ae,To){To=To||ae.length;for(var wh=0;wh<To;wh++){var ff=ae[wh];ff||(ae[wh]=new h1(0))}return ae},b2=function(ae){return ae instanceof I4},_2=function(ae){return ae instanceof Q2},q1=function(ae){return ae instanceof x4},U1=function(ae){return ae.group===A||ae.group===P},M2=function(ae){return ae.group===W&&ae.multiplier.equals(1)&&ae.power.equals(1)},x2=function(ae){return Array.isArray(ae)},p1=function(ae){return/^[-+]?\d+e?\+?\d*$/gim.test(ae.toString())},S1=function(ae){return T1(ae)&&(ae=ae.multiplier),ae.lessThan(0)},D1=function(ae){return ae&&String(ae)},_1=function(ae){return"("+ae+")"},B1=function(ae,To,wh,ff){return ae.substr(0,To)+ff+ae.substr(wh,ae.length)},c2=function(ae){return ae!==void 0&&ae.custom},H1=function(ae,To){return ae<0==To<0},x1=function(){var ae=[].slice.call(arguments),To=ae.shift(),wh=To.replace(/{(\d+)}/g,function(ff,n1){var c1=ae[n1];return typeof c1=="function"?c1():c1});return wh},pf=function(ae,To,wh){var ff=[];wh=wh||1;for(var n1=ae;n1<=To;n1++)ff.push(n1*wh);return ff},o1=Object.keys,e1=function(ae,To,wh){for(var ff in ae)break;return To?ff:wh?{key:ff,obj:ae[ff]}:ae[ff]},w1=function(ae,To,wh){for(var ff=5,n1={},c1,u1=0;u1<wh.length;u1++)n1[wh[u1]]=new h1(Math.floor(Math.random()*ff)+1);return k1("PARSE2NUMBER",function(){c1=o.parse(ae,n1).equals(o.parse(To,n1))}),c1},C1=function(ae,To,wh){return qc(ae),df(ae)?null:(To=To||W1(o.parse(wh)),o.functions[ae]=[o.mapped_function,To.length,{name:ae,params:To,body:wh}],wh)},F1=function(ae){return Math.max.apply(void 0,ae)},N1=function(ae){return Math.min.apply(void 0,ae)},v1=function(ae,To){if(ae.sort(),To.sort(),ae.length===To.length){for(var wh=0;wh<ae.length;wh++)if(ae[wh]!==To[wh])return!1;return!0}return!1},X1=function(ae){for(var To=[],wh=ae.length,ff=0;ff<wh;ff++)To[ff]=ae[ff].clone();return To},i2=function(ae,To){To=To||20;var wh=[],ff,n1,c1;wh.push(ae[0]);for(var u1=0;u1<ae.length-1;u1++){ff=ae[u1],n1=ae[u1+1]-ff,c1=n1/To;for(var A1=0;A1<To;A1++)ff+=c1,wh.push(ff)}return wh},f2=function(ae){var To,wh;if(ae.group===ve&&ae.fname===""?(To=h1.unwrapPARENS(o.parse(ae).toLinear()),wh=o.parse(ae.power)):ae.group===P&&(To=o.parse(ae.value),wh=o.parse(ae.power)),To&&wh&&To.group===A&&wh.group===A&&To.multiplier.isNegative()){for(var ff=[],n1=h1.toPolarFormArray(Z1(ae)),c1=n1[0],u1=o.arg(To),A1=wh.multiplier.den.toString(),u2=wh.multiplier.num.toString(),s2="(({0})^({1})*(cos({3})+({2})*sin({3})))^({4})",h2=0;h2<A1;h2++){var K2=Z1(o.parse(x1("(({0})+2*pi*({1}))/({2})",u1,h2,A1))).multiplier.toDecimal();ff.push(Z1(o.parse(x1(s2,c1,A1,g.IMAGINARY,K2,u2))))}return I4.fromArray(ff)}else if(ae.isConstant(!0,!0)){var R2=ae.sign(),u1=Z1(ae.abs()),V2=o.sqrt(u1),ff=[V2.clone(),V2.negate()];R2<0&&(ff=ff.map(function(v4){return o.multiply(v4,h1.imaginary())}))}else ff=[o.parse(ae)];return I4.fromArray(ff)},Y1=function(ae,To){for(var wh=ae.length,ff=[],n1=0;n1<ae.length;n1++)ff.push([ae[n1],To[n1]]);ff.sort(function(A1,u2){return A1[0]-u2[0]});var c1=[],u1=[];for(n1=0;n1<wh;n1++)c1.push(ff[n1][0]),u1.push(ff[n1][1]);return[c1,u1]},l2=function(ae,To,wh){To=String(To);var ff,n1,c1,u1;if(ae.group===Xe){var A1=o.expand(ae.clone()).stripVar(To);ff=o.subtract(ae.clone(),A1.clone()),u1=A1}else ff=ae.clone();return n1=ff.stripVar(To),c1=o.divide(ff.clone(),n1.clone()),u1=u1||new h1(0),wh?{a:n1,x:c1,ax:ff,b:u1}:[n1,c1,ff,u1]},Q1=function(ae,To){return p1(ae)?ae>=Number.MAX_VALUE?ae.toString():Number(ae):(To=typeof To>"u"?14:To,Math.round(ae*Math.pow(10,To))/Math.pow(10,To))},G1=function(ae){for(var To="u",wh=To,ff=0,n1=W1(ae);!(An.indexOf(wh)===-1&&n1.indexOf(wh)===-1);)wh=To+ff++;for(var c1=0,u1=An.length;c1<=u1;c1++)if(!An[c1]){An[c1]=wh;break}return wh},P2=function(ae){var To=An.indexOf(ae);To!==-1&&(An[To]=void 0)},J1=function(ae,To){if(x2(ae))for(var wh=ae.length,ff=0;ff<wh;ff++)To.call(ae,ff);else for(var n1 in ae)ae.hasOwnProperty(n1)&&To.call(ae,n1)},v2=function(ae){return ae%2===0},z2=function(ae){return 1/(ae%1)%2===0},q2=function(ae){for(var To=ae.length,wh=[],ff=0;ff<To;ff++){var n1=ae[ff];wh.indexOf(n1)===-1&&wh.push(n1)}return wh},j2=function(ae){for(var To=W1(ae[0],null,null),wh=1,ff=ae.length;wh<ff;wh++)To=To.concat(W1(ae[wh]));return To=q2(To).sort(),To},n4=function(ae,To){var wh=typeof To;(wh!=="function"||wh==="undefined")&&(To=function(u2,s2){return u2===s2});for(var ff=[];ae.length;){var n1=ae[0];if(ae.length===1){ff.push(n1);break}var c1=[];ff.push(n1);for(var u1=1;u1<ae.length;u1++){var A1=ae[u1];To(n1,A1)||c1.push(A1)}ae=c1}return ff},X2=function(ae){var To=function(wh){An.indexOf(wh)===-1&&An.push(wh)};typeof ae=="string"?To(ae):J1(ae,function(wh){To(wh)})},b1=function(ae,To){var wh;return x2(ae)?wh=ae.splice(To,1)[0]:(wh=ae[To],delete ae[To]),wh},k1=function(ae,To,wh,ff){var n1=g[ae];g[ae]=wh===void 0?!0:!!wh;var c1=To.call(ff);return g[ae]=n1,c1},V1=function(){var ae={};for(var To in o.functions)ae[To]=o.functions[To][0];return ae},n2=function(ae){return[].slice.call(ae)},y2=function(ae,To,wh){var ff=[];ae.each(function(c1){if(c1.contains(To))var u1=c1.stripVar(To),A1=o.divide(c1.clone(),u1.clone()),u2=A1.power.toDecimal();else u1=c1,u2=0;var s2=ff[u2];ff[u2]=s2?o.add(s2,u1):u1},!0);for(var n1=0;n1<ff.length;n1++)ff[n1]||(ff[n1]=new h1(0));return ff},Z1=function(ae,To){return k1("PARSE2NUMBER",function(){return o.parse(ae,To)},!0)},T2=function(ae){if(x2(ae)){for(var To=new I4([]),wh=0;wh<ae.length;wh++)To.elements.push(T2(ae[wh]));return To}return T1(ae)?ae:o.parse(ae)},L2=function(ae){for(var To=d[d.length-1]||2,wh=To;wh<ae;wh++)cf(wh)&&d.push(wh)},uf=function(ae){for(var To=0;To<ae.length;To++)if(ae[To].group!==A)return!1;return!0},Qp=function(ae){for(var To=0;To<ae.length;To++)if(!(ae[To].isPi()||ae[To].isE())&&!ae[To].isConstant(!0))return!1;return!0},gf=function(ae,To,wh){(To.isComposite()&&!ae.isComposite()||To.isLinear()&&!ae.isLinear())&&([ae,To]=[To,ae]);var ff=new h1(0);return ae.isLinear()?ae.each(function(n1){if(To.isComposite())To.isLinear()?To.each(function(u1){var A1=o.multiply(o.parse(n1),o.parse(u1)),u2=o.expand(o.parse(A1),wh);ff=o.add(ff,u2)},!0):ff=o.add(ff,o.multiply(n1,o.parse(To)));else{var c1=o.multiply(o.parse(n1),o.parse(To));ff=o.add(ff,o.expand(c1,wh))}},!0):ff=o.multiply(ae,To),ff},Ym=yh("DivisionByZero"),d1=yh("ParseError"),r1=yh("UndefinedError"),g1=yh("OutOfFunctionDomainError"),R1=yh("MaximumIterationsReached"),M1=yh("NerdamerTypeError"),L1=yh("ParityError"),O1=yh("OperatorError"),a2=yh("OutOfRangeError"),S2=yh("DimensionError"),U2=yh("InvalidVariableNameError"),H2=yh("ValueLimitExceededError"),$2=yh("NerdamerValueError"),r4=yh("SolveError"),P4=yh("InfiniteLoopError"),A4=yh("UnexpectedTokenError"),Y2={DivisionByZero:Ym,ParseError:d1,OutOfFunctionDomainError:g1,UndefinedError:r1,MaximumIterationsReached:R1,NerdamerTypeError:M1,ParityError:L1,OperatorError:O1,OutOfRangeError:a2,DimensionError:S2,InvalidVariableNameError:U2,ValueLimitExceededError:H2,NerdamerValueError:$2,SolveError:r4,InfiniteLoopError:P4,UnexpectedTokenError:A4},B2={csc:function(ae){return 1/Math.sin(ae)},sec:function(ae){return 1/Math.cos(ae)},cot:function(ae){return 1/Math.tan(ae)},acsc:function(ae){return Math.asin(1/ae)},asec:function(ae){return Math.acos(1/ae)},acot:function(ae){return Math.PI/2-Math.atan(ae)},erf:function(ae){var To=1/(1+.5*Math.abs(ae)),wh=1-To*Math.exp(-ae*ae-1.26551223+To*(1.00002368+To*(.37409196+To*(.09678418+To*(-.18628806+To*(.27886807+To*(-1.13520398+To*(1.48851587+To*(-.82215223+To*.17087277)))))))));return ae>=0?wh:-wh},diff:function(ae){var To=.001,wh=function(ff){return(ae(ff+To)-ae(ff-To))/(2*To)};return wh},median:function(...ae){ae.sort(function(wh,ff){return wh-ff});var To=Math.floor(ae.length/2);return ae.length%2?ae[To]:(ae[To-1]+ae[To])/2},fromContinued:function(ae){for(var To=ae.fractions.slice(),wh=1/To.pop(),ff=0,n1=To.length;ff<n1;ff++)wh=1/(To.pop()+wh);return ae.sign*(ae.whole+wh)},continuedFraction:function(ae,To){To=To||20;for(var wh=Math.sign(ae),ff=Math.abs(ae),n1=Math.floor(ff),c1=ff-n1,u1=0,A1=!1,u2=1e-14,s2=1e7,h2,K2,R2={whole:n1,sign:wh,fractions:[]};!A1&&c1!==0;){if(h2=1/c1,K2=Math.floor(h2),K2>s2){var V2=B2.fromContinued(R2)-ae;if(V2<=Number.EPSILON)break}R2.fractions.push(K2),c1=h2-K2,(c1<=u2||u1>=To-1)&&(A1=!0),u1++}var e4=R2.fractions.length-1;return R2.fractions[e4]===1&&(R2.fractions.pop(),R2.fractions[--e4]++),R2},bigpow:function(ae,To){ae instanceof I2||(ae=I2.create(ae)),To instanceof I2||(To=I2.create(To));var wh=new I2(0);if(To.isInteger())wh.num=ae.num.pow(To.toString()),wh.den=ae.den.pow(To.toString());else{var ff=I2.create(Math.pow(ae.num,To.num)),n1=I2.create(Math.pow(ae.den,To.num));wh.num=B2.nthroot(ff,To.den.toString()),wh.den=B2.nthroot(n1,To.den)}return wh},gamma:function(ae){var To=7,wh=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(ae<.5)return Math.PI/(Math.sin(Math.PI*ae)*B2.gamma(1-ae));ae-=1;for(var ff=wh[0],n1=1;n1<To+2;n1++)ff+=wh[n1]/(ae+n1);var c1=ae+To+.5;return Math.sqrt(2*Math.PI)*Math.pow(c1,ae+.5)*Math.exp(-c1)*ff},bigfactorial:function(ae){for(var To=new l(1),wh=2;wh<=ae;wh++)To=To.times(wh);return new I2(To)},bigLog:function(ae){var To=["-253631954333118718762629409109262279926288908775918712466601196032/39970093576053625963957478139049824030906352922262642968060706375","0","24553090145869607172412918483124184864289170814122579923404694986469653261608528681589949629750677407356463601998534945057511664951799678336/35422621391945757431676178435630229283255250779216421054188228659061954317501699707236864189383591478024245495110561124597124995986978302375","369017335340917140706044240090243368728616279239227943871048759140274862131699550043150713059889196223917527172547/335894053932612728969975338549993764554481173661218585876475837409922537622385232776657791604345125227005476864000","24606853025626737903121303930100462245506322607985779603220820323211395607931699126390918477501325805513849611930008427268176602460462988972957593458726734897129954728102144/17750092415977639787139561330326170936321452137635322313122938207611787444311735251389066106937796085669460151963285086542745859461943369606018450213014148175716400146484375","399073568781976806715759409052286641738926636328983929439450824555613704676637191564699164303012247386095942144825603522401740680808466858044/247958349743620302021733249049411604982786755454514947379317600613433680222511897950658049325685140346169718465773927872179874971908848116625","1468102989495846944084741146947295378041808701256909016224309866143294556551407470861354311593351276612463858816796714569499021375899793849136855085849133702029337910502448189055357182595424959360/819363879309286303497217527375463120404739098260200279520788950777458900438307356738082930586032462601215802636320993648007907724899611296693997216938989854861043298494990214825163523387600982777","5896704855274661767824574093605344871722790278354431422729640950821239030785642943033153793245906863203822369276271050164634206965056233097479117980782641839669/3030306850569309344013726745100070601277982132543905537366562638553198167007159067544789592089960911065181606283478843359856123992707598685058297067179343872000","76631772943534985713873427262830314617912556928476573358548256872141516989538374761909611879922349479420014771499018155447198112155515453671128814488139633810493264352294560043912066253026059140653027326566801398784/36852092933388988649396042883218509607503204211148493545892849595498822817623842579026942621098851631842754395231561679671400197056377380063233740202370686144673585955581403046886083948450136247134308381940165804875","3159076083816399509754948610929467278257473888282947311280653574634802580912280940686954763313882823327077171624015737719617373932318151594325834524000275847475866299387913048/1437757485694188822758304467756419845842037623148461107362957994816554782989250555362514354661961482939226272309026092009962414616417412938087494467254146002233028411865234375","22266067259907364984531611601870291368272674573653403965630628996687370994139884833897773468149149664829922302484782423514167405397665098388400450149078982462318781750661005833037235183394221496186539779712428265837926417581952/9670030144664428565128962309657100138096047028794689249320859276197340398920725569428532293373676415359965773460364494998334259893079003125373872108770534788283842907318071170285038777091588292539102269617376180390982915567375","14604654564989239958569331443385369522850975185358647132770022716433280072271007767111036877803328768910274400515590151934676819262085211828028638417329558229123989556376108454497813055/6090614019162516693013973409650613208227889078878781039105047015752493519149314227721984436973374032279421344818329285207124280297611253861173835238379831004010748379874393292231671808","1901241885407696031217292877862925220917660047127261026827869027159993239567933534052663335498281439239753018507182016153657409777749792228538380379703411298411623469292891476969894084838876001545818141543890273256985768690847587711270930688/765116019778838839812655402103512685695769161212360553099732689795578904762091216998790589926057819838537805856579109910198553330075924857419395160755642371550113347465300208422126945265887065434116781678702741657275181694851670325469434625","139459806786604751793737926146840623607010208216289543036026206208962059593900745886202214788747453279179283344350478734275973878932538430194363355795823581315329311220701640235653288975569812161436/54371368534412517053056101353618694718215711767266376573138772968257303578467926450212293233332401067673270853953399269852376592855992724934941173346260129257754416412476202526978443681584633116375","1045669091124493070709683241190022970908640501171378776604126771144008324358233819560649021940145166254659028524319517244711645162132513416238958170819347361185944945680269442845829390112062101255500836072082817820950448463314034677353723256969344/396228259004446234921310936915931611736815598535963504660076315228798989932959459406702091180060429080345146735173591749448509810270759531977278642135591672189002006272326131885315743181289970885337574780897529347356567086535505950450897216796875","9912919238915437302006264477931031611447467070103973106567538528951878797932559935860738745374437522819124347510590800370471910492338584284092534264608801221235029062881964101996762011296996851893455828946521/3660537472668264151218961634689665210933936249986285290553357254224360417386515311493310199319523687171757653216994741150377508234317025158302057758196429623723072084157928224798322861732880034847243894784000","9263710175433181746575186369318246002919895649622127410824041370079225200282403368319370743363303164313395723904510539050157032684710468364067204876434546848634842333436957245275217583248805993142227630297924119330553308466662488683624783307023014909360640/3341177182697517248552428837661919299725031035849865632511882688786226888137634168024976033652753689210700218163621739078534353578510364301481093730054725078138658805025014615651043313990684347632166030359086885561104034510990826655289288319840595753002771","5116082230713622171832327542439052727465114322479570603905499496221224653983960598946033081212909066917137546065542953865612718836914393275681318667667521726785633638189373998191090501201427906618075889744489190209584/1805752553736060443820406101277706970767657006346276183748749630179442318063568286372320188433843729960294965366346522303898609655762491623098453269916163621089005711823488749297418113474056676109581110715068124438875","246569125619713282434448566970352231845414317018379160824176638351574938993535464763890962336882760882398479702237564384291290459961036068916857265499633061660562532011248501476114401629839742058389195725393702000011860799793778295606988057303225493814005789533570432/85307063020836305797178273029353623060860009152114361453434032434699636078115114412588719432277441055049132559782203988387794711585368296817222565434951256788867244687081233632650953850383220864394261763844194948389861147622944651546912394593164406926489862036343375","133672026303452911046163998480860917119290576658330909785707604886881155606725822685088929236266583416708668502760907677019598002175122453170574729028452721476464728566191464897928696630979863154661704374206171469014225143/45398130975270785045482567762871405072140548998125471025451666500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","6041693953360002800224091673336562508913199995987479264605216252220579740134601435770085920869376641180763419907442721705887169884230643795126568815123647603047739799302562095542459344811429882053086550900803768964612193941424128649976704727183797495759082741166938351872/2016766992122395667828553277997478570503475626107286343497917705446132017125079612756035254750822860815515899557855166824523851779156336235294914777307802256439645525835223691751931866188957324792276149549076500784191791380803500156776088683900346065830066370370083309875","705868391597244582764749229356331441978820024796066870551110486625729826111158236686696326058778874201639006234449557592353247542995871491078308187261304930042019640830629526023972693107193897009168955674240659026247094657679060/231848642748474339277532000336338632910990823562381469441716922006107433404523316252618490265927265734670539384485699132080062215196462178933963957679882342083893417545858074378754089719547920901917516016346211301054206383643383","101832160604157943093944673541651013907278188571533075311673249923948856034633446617630054761681006062910980371900782781226979391765818325065031889334563981235894369036439929651260587335544056975715076598739977065390678221999918899003881778449092038750712969437519295878491018112/32944277910571666002449086492515464541550138004002141571670657643770713783329063548790202120805341989608877739811787937782240802963962520261844114327432160788193314874913687387269408387417806176202979244637915812905426565263196954203487934225589622864145960079736633434831996625","10655703119271468913597640479490594180964700448340778168715956712130636958373270202484276402718566314881119559090842449610957974112230306343486091910217340665146602598568991520563987490686996746558858366002301982443029430290679385551/3398412687366638541233365137084722368200311117891192348532156645374786104142009695796409107380345795998400850838706661851176885183144928701608654514812261697598380070746520197171576610572921007069104300695592751543563472456384512000","1903039332876763837419920240543738799531131775028971323439870868730321221615515008394327723508670975623498588291298064320786970626232668956372004004897872810230178526101184611242511193415796638694370503100219710864543168952682617801833318493436174387568067811938490953495819438108686336/598806534367503338307287246320963280558134937382149405305466709787179429317914803617527827862441615350396864359976273212272586892074799651088317544101755361439294687323233086696182687664637422796995789967075271448560870681210580691574924544896656175563265378514188341796398162841796875","525573915563826130963525826191411949262846916750432019596028344808298471293378917508549164993368392834023782480702893643486699787870059946429810070222126260200026332874480239090370088123833491499400991181659445914352500247596757005142623368/163278727324937389095822405034435687776345799835442022795533783889356344755225815267819508608559076191292900367982490827396869405536484846115955581043091229202052407483776587687967125885665493681707461345895999542381476164157058393971431375","9263815657177858787273494705338516861045771674838057329170239610953039987023429736752079544014780707408666628475997291124805562998227296677616204140605356257712022384368492575381355563976330347792504605666631512343447560301417325154003481040250148561839861837778597346623630046623751094400/2843321709948499955095590862256744532227698001408929142548057792217790532624003190447363578048562448168721539177458065482170148482375585867230123873178100117094533143052886527452665480614620123764036974180917207421482431983407742154634391264619615289225747664532332469783301704643254076601","407959339726114455622180187758753007349209016396248763075759257357925636039752474207685682218422721827857994768023399625060206708378433960993946156803948655098667156937949174400873748557248801874735834957795040139401560494087476967548060208243867/123780218751812156744401121690996305978134694678934447237402511116731459214498784497436358160964198336874043702652746834763131444030185151143987331404604087778514863973633941401826334750268416015224906056576641018962863645043976537664227639296000","2547676391598917379516698439971914695230548782904479778605691338364453606537643088857116141939170899135026552016969320061900926954008522781162186995856580955090548471448276736878300717869625651893741316530109438876067419826217901657017506157997588944233677467357220316084583383623602865379325184/764562034757392298786420374672266498815021229519853724850874576419885380830752931701831256959159800764672605004880389358601658343203513177084389490286723240185146570925957286083025676875197029662038213216541352875570101363668917766225709569356861275434470568767077844675593176178611021135573625","186545352286463730559933346565311535598243666022232037054735807289501173444103692309735768703898330430135399033529355360391658728987379385732098960609744313878477967971557204207043802935782878745271859468248704012618254203101767841517569443555143252/55399179641621656233589820996143825959365789093262978988289445625153099592463372579496245442338653053662134699646413817866770218574795378644415019944304868289119443774932782235638737888469746745621382139263856603239588594078668393194675445556640625","664884440164786473344854955309049113269357314957985265728106924238588705533437169796551912202931185746193155801905841712503407258166135075966280435780812714252670362202091663287095423712596462690753468682634261029392794173636943978404002804413009590005984736612421172979101972556772005594499779860608/195485517776407145286424460448995460754674039560651791192647586550615878988380153730602665795647187884543361218962125172808792176382956599256188706636727418572541254480798303566840010217729386905041217793614214518363859058348249961790104618910877813067510758225302884815410347238200133693756493703875","2614957283934314904315471338485451166053664494383241929385424599389309215073267052860464009981063483440201193771607520572077231889699858482582363845275452280606276949653970992719332472370351170732899676316967244504534154616036371979031399425846100527685/761493664432749089312665480773496290658029971027686543404885407644062485746072719559288231362060149626237939029641098328278650939665665969011529293869562636656650999759724704272743235210867676873525147820749560155294022488994426729939894753293900972032","124843380518493746761140367283007507854364503961156704095198010255465940085534099747297600085903814014415830785663764373057896014399822131175202342399536439284123918855893825207202244831315575594886675813256448846863723093240955901916229136393454605455444105444987028391748121054399538064686074523506176/36022228212051654395480210378626648518430280334458144892889271272122662467638331091863215146548048144675657239846337165813938424387499358852301016926312083940212100001220180762189978024821166744964908871443681332664798940660421469519997746775275873085770018269706847741064037876137315001228315806659875","827992369063043155578730871896750570951766628472810506926098505028264552046829097082095665194000002802661600196840639204300804225352337632259980703832713031790922485730615305441309917696044954289187837653933158950774246017223571461858939407386087081525130831392/236805932823686534991153393869288530368011574665859226704279685567723830696754821658770176385138917722808377962346690757191122309876922069867472518117628639913077442806147910884267694879089753138429767401700283014143248445966474839193628309668702223994071394625","17347276886878323736540051321582548724378497839789943634071026331001588645519865992773157565595886250230140452154269197770615097377486013097979087647774513500701793885978192218455687078883766086309728287172567466406449372659680040183273634701092561727514713494914793425407149186041796935055187281744386432/4919325621804683623339606849970832094714371903709195539440424738973575902329797546592497378000858196173718145883783709223158260700365224756081275272021856393735663399552166737690038832550853145831185979094979556715294990257315369124065787473707136464772247917156232366320267601622617803514003753662109375","137984231830526866236186357461458917020538108058615632801298091031540729111527734872044790487396302545910108285921421417358113055522725197998483383380192391312304647004240060970929072498293210057120617332323445379424867965764749534125081131327565507524502163460761/38810445792642817561168950890315210470940006613819790543653745327778579787694809782601777514116858514049585074667085399925278459138508514838268321349069481334967221455722811414399738756151414906092225265355449011152267068726417045644222323488445626292574879744000","746567120547823334914136339633766098626636643449144032626270358619125402826113269699709721071135471625588981126637674402048519990010499180844665151971356149292818375448504122545400227696621572263621729512461528550588108384619064912224884465737417596190735966915167530332762203074440688676123756162572829692160/208334337057923929636884170505570363171441147899816815785150954417598643614152856767186132467069365605496210036171429712485182162940460120834349006784956522600679357307849981862006710239311750261522832996877712350330290831638640913932265004107623954913155144975252743257846945609734368518424172846119306643431","64649371728330695076928013661001819989330953381731372450140483779536126948957993261299287753791770622512248630224724990234903928056275080682537641377393210728546364176267034339221558641084730052304770498929958838997239635790469536857863963589118888238069738647239076/17903951498200212327802847425913723358452100686246224008745414214690047078122925247086521362329833307849817944645647750649290248110509395628305970523384831671737569872597295947593410067364379687588919135621621162007748635920864926867870502568935739725312687094047375","2454918942158003099688922026016393688092399295166304634317616773083386087532869193458590448918958337530406410803840837646465522656670050113548208618655070231274778592766244282964463702354872753657766121825196898916725498553882689210280080206627916046484942827487726300822318764058084323314109595329304407466188383616/674880185931325925966586583820010578979699141814417326552629206140252348822939845006845669570885271576698771404162512001549922909048916000017837898649100825976232784446638776021483802989797501705685620612986771521390439936066527738682396560462899753657942715306792783283782238662155922082005591512296007820682995125","74018558041066162916454010680594042518462756234254788158141115244349044958441521749277686851928706433556285971088455226217644009628399441967508838553345152310730562224910795446341601049647392069373970101491741830623078126344928804029524181578945586663110848142571149861/20204153620006780689923328634586091101021423979622170579036140596085566172775051595588438592742563923428900864000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","2127032036758045513335690185608563023954009095206088224487365541995326714285119384743928987635752931664240752323937321097955456543854943206092931247498833001499955456190701695430459583885125382086777607021670447795321669948733328973350279846928613949120929250312666393359442423066212311060931469017737106028339882830848/576612418511902928757340062840968526862381326698309578771238715462180282212422302261044980131594522407066369222998903808960617461164985318633518680304995784614308979881735537678182134128319596636920719106506829571072447362052319438091347699720147003209417806230149598345068078717948025207635448205253184540936478445125","35289653975561083576641954928762116897061274899517309102784750384002335187117263273488751066569234386120759866204372398611196356888479036949053282301027789530999737306501029700128744408015642211359442183943916106790666114870974212159410284751571905275610921784716184508440/9503006066880728386808143045924119024212377150217533250562188228062174064693375135306438120385877320162710918716613546077156389583384656340709638430674364232343609717735574035535102953482366914421205216675248471695111720986346092738728929878538430662191272737183832556131","102633551023964794485575491065909467125458972250222581133681080524371507544152979467328048718122409841060527545925136196267751819689935599599321090571687632103850847605493223603751038996548520557330016046032671961857623066292962260173840972332108111505971231021442896036760967107060309991355545554631003681544611731245475968/27459658121882266328752886605529964804078316737648012166874496015808620265471203512606463219297059547428855195782384236337998738233668399173746663289852416697917397644234441300570212555870401420579737973722145663287124151049692290432756231390864184491891697469874600345958989433125942336757049639797225309327019275689074625","10034393558388390065766795008210457368713365491566387292163814915435906649268119060550511145023450790393353937124495488860451123302412204483570913557762460385297770427946219119911920640306914453207097103853766023934602534502476962159682750262143380527529536498215384467975023/2667919902603322771586358077760621955455470781865624844984169443739075976572061827709528710108877015489050369589117491611045518221354793418884447632063538994046714401229510497599783726376490260140723032102883617341970952663947646017489439179953454964374887388652792446976000","248528145263843375390386172800048509380966183384567983242213959113927668429802237067505890436957693495616107089384741585283620097982859345081736730899912519273262934785992235852866637878831878448348444611412764161078458068549719800733237024285525816723480868704742804077255242682077291713092790250511567621735004237450946304/65676865669148624809340872151906045781446981664561196686217551358486802274698228825404698950974939545099727242259547145392352658637333562345477931951890984276718673618736565926663528625796412420753961231404680876558659735251469326707567479071881966875336951133475135427640218972722939427821842173216282390058040618896484375","7805448718805635696495809414501206964843262114470109146341305656318015059743127114324245035489577134938579856003956861881125856595981500593426840968087618241785931128978516340812066502964561231235073012672356530509663384739132686548934288703179479011016719045530855033205271548/2050525178024039744126592505352202216905491833360272553169520915020715464206141942151086176509423406413311520838568324134077402841030113427309725873344806030836314500267104070131451720947531994814710189000076651895520222646974590481497382830325485174899169093049299764813276375","3355325071293197839434119105039673324264765809771192815982246040415580387729382404624613875653005261578877047405365032178619450963731719777167015959920645055600439987161800547901539269321100559393048973255388860193948274255340335876890491746900991668165565729269698196233805991206691196045182214641935483083662356666996922240/876402579119117579582569839757462461050855174353108858954282915644790659429341853404829661899850841645529640454766173209897510988090318303454542547519850473808789222552969933222203420847859171250332350076509996295844203965564448154484566493395403967626596213792922784509892086361572955175655987334882030766001799867659814117","218871061991045868372866381545267589365410350294028138778572466235486397478028823720846191998825628156716190463263492304639890659254282445466806224943413446008645087186307985343574807361972238230520975439736199291019544576443791916302825193643774360055545186783819367378492631806297/56849560726416896431557940314760680962653658127458002233782028041537121216487790008085876994020812492987733987414743604239935223783349870516284048368761617736127892160849065895223288023531930411718807065209903593668117085505482007061969339237404945180379460053180570404846043136000","5008685108365226931582937964451700746853986170633433728409171904803795018146152804690759530990140552460596075588463394200510044617816085275660078502126507209302951286606953039953843685800941558212440519542602092919776366067720586295390886070120828199562643208637974347390938772070049344991272621102622931576339988103674070876518912/1293888539680354282541277646947380627241979967611883341823378331667976045287311988103163380651334828012840330710760757271860219584371109472132211215957402251594055009937397184768184517621978947384029376766290498101728971145633139541827544539988344772578184316843734267915665730981857376872622787627370859411909330227080697966353375","15388340113525711660227566446101909585796746979396093776960989868457211684028149502578116456785221720682202816140911944661051001675127262774824593420825587319436537346311831003212424497488485098543512314062112948777572038731823948224734505930748371522309451168088057190162878224801232/3954220582960831691377435160890656173654063611768428458807273708040518769541211737927975894584024448193835165167801976423275767590502552964407494549049777006346189436817215329891530811451811864579644894987864267389290848598289794977382504890216219362031324635609053075313568115234375","5099039333987561374222193551155323470675617979816941646196895589439391685938046865391119484510329634015275893520725135141878751153360264368353595348921951280561029028912953500944814771064409611917475818956659775131751121312316084465321917769679881052144364834485866477379437705913911371481828140817759401117780199246301705600020671104/1303503600297679371136943454060319958680553228879031326679449263682048703103464872914972900105569835004878963701599765030590097739639045890060548760692125546754294514068052902543220382104483822438283040090444827980927544440984823535260277595466339403795403200720622852069244768910603820007632395190204569927612348189089161551951106625","4902837141334073026145827027361937996261324349722726869116185158777439337041263482852376194988371853413467559557923410949898048139830183335197992754748294810838187068126867611615800383834975563313220497573778480109264178673389149671194149749735833378557143135481387904961537942569904075/1247045310545991266291285730016853118981099516935251861146038369985109288084420528171217942065832292739130145780833406014673689119563698528225048800794718789218267628507713621235056538202070171596177775095071513194885568843375526804796016261173388452184505503341132236719484809714335744","38114743522716832107917466438257616720476488812538316101658139632867788464381862291240727309611460187159930652186486096300862388591521625093237019662273764387591494074792574929490381910446287947994150655077877204446864004067956087975012773988833339521775463977233068498404144221045837190392670308437391686081418318624745039402145439223552/9647001083383999453668111809775451078976046488746916070976218645431946648087171586252172936600115032316383427265217993193444199863138429602138841976586190525451324093772097241349417938578878934577091671046050326087898259692917931230974174799815198493279413438192301437068820185757869608523761456160341754512329264442115351926967120404125","573695055225225727008803730767518906490704995929177617646275646884555707960986625481944101622708415415988844740028718027554452662358957933526173824325955904005404113684003841990198157072540659184995738719040024647370869010473254071681533880576462368600901824622431045529064651675640055917092/144509482511118816399089096021290587489594541280398871255876563615464628718527634679330291741479135415168539765887291789615790513527330600394937614433502341116068305347468133950204152174094704092402978083370792135432486240914953928188835819767755172666693219213868545854371103120604946200875","23876960329653589647925126180903391687666378233201794403339630995420215267415575142266707357255726330536094448314199602616026935251126469221925945960901748679919435908556550271504767784553484434363646489174587463466333864577705745452492395785557425904735048180164697040313528831173448025400634629163795223739061661461986923675833880378496/5986312408594306954013526197465608559068621248896320652512228238115589875514604632230098997609482248000888567135685167138762172475788060284232459813998201719590208742091697294562538265829954186149162974972471533202880368317237508987477069872431064075005305838801862900501819963793062041081601844759452202282545840716920793056488037109375","58168289917567723171226992383559866214094157894992327555495441698028867727845766488121900626912848698952863438654895252811583144479300382761129433911280049009362667380001406579175563745824368613319103673817094498117944856004415812877213722455299491145649879676787079744410765053845551958756701/14517067289347903655500020160671113450349743650636953726251191692074385521975132268313263723831804150872238173602847065423463131917373356798750100313145228608894881457107689499956903046984443545789053438946050974567665049237414588435796381674590098629779384355275820782532479708807512981504000","728621890568281859295409481422447012528302594365693410763821707074444799793690738137592101239862736313347273167450056625929591960610208335290882047413011571781161008296084630072829079783328937418641417642857196346026366370059522990813537731394823630207433267854616768658990289454635793326766697884798538576055949457122067828153655416688640/181030730759516991863708593747964787874073354051675597050399087612142539517308720603687322924426591889179726492403913356461908748733972707460063017057809060190437917851790767968877215795679844983288935075688219234885360839984681619084834228226744165610073685719017596630302462070188937998558312507638434329299017584329479516410907786681093","86855946923438322218622470067224691860808273886184997065663554841573982963995340977083049132518812923329423480393306918856650577072525633920456721265953575424233701929892019410099166322511413146891121248381648145391642571638857576890568882512129960291171866772665863159474602604647289052079991768/21485753507365901947528588896402264670781310878547726104482740647554738151100954835784115119035980523529677083504495839730499664052882400915208251594384038810917282207449860876251558307288700200910747338758723324686939379138206117634546981163355060740270734146780942696291669461182599512320099625","2158989152301022938148680102142188531448821359505188055264665167313418619665693092337665573150374231484840948447637297247277576415460889296724813940128955070240137590073233263168835678714131062764247434144994737610229909964847568491446606012581370840699582055341626266533733744293929658949697805855362114229666626620766245630122333733703618176/531794915405164005613733454597931482878479882704956110685223892325074211694837836221759995948610212818642789132749082430059593652854659130217225506942675608692701447738732031302987802196501895840510235161825501235133794449421919927396142470196961877376701957829921152848178076410141813926924749057304222282687697297216661687583257901415465125","139432548574396829074586704387656697097760057897628994548358619815052936481650396157428747411173567801047221928593253479330480454469358220685854351236980383914223693722868233819483137401339800304943891968050399345430243790898955416907228948287367356990263740207046902209563417267686591994743547621/34201151688775214071963206765436083445901621442002061707492082843232231754829227303539041286301398668437202547003300396162741375435703188500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","11008517174872833286150985180322584448162884832099344969609291070844193524816852920942383850580217443209402836100467940651581092350600329145627967515818684442171571156446321228596914355704205623857871497315955269266498229823278800717909321269179839084452384509142712677235552103459737790674103994445173074670347080506698168482564009465276165824768/2689223396936080856855299215659204161946704205931885125148201643087176556822542895325191478283706585400237901215485150928036895428721912118467760766508162631903585126377676412573187912443878232521444786090510891599171741773242011017926658231638022943018461086517502584854390836347781674626615709751386455292026775663545470794167629144456268750125","16108638074211260588800537540680707641986073914251424878121255234668558067988171568946079848860335948991834525552515669040163026131919804987340113244760738846884911038097907756220945883750502673899084880578229601870882631165510396775126850307838505063922101682333806284668762825609556049426829531780/3919363961344261777100658318137884299575193089462944554282218278496298610828757650104922583359642384253066896538203596057302203635134833545580869871333892935330950583664400555463557735723364497947986885146043017010159347046389604172186788902608216894094289769850517098027486468084407618748895626853","34420755849180279597302103726180110022640946692592540634353734157479505420320000324260530767186132260970572450489530034440214259559325114511265075416512316229177952140217732655405289808326341696986755141965043719344169685611217958619102774617224847284122901023774956887687026904767714958090256282893003000752947427857703259704682455375442735857024/8342030311716679826889917494957593165464748884572298173556257652389845294530325764837124998293398445804458613956489096007564811101361266196542129764287084823604897187311540561857741285793447174119667215803837719660675298308873496219385226998078648428368061868944322478384684509466965129972030932418920415308276430355882329457342937549162000252625","345888075261020004071220843714060353763382280664960929903544964118831237876694384053904571498830068831026644303797377762345709976595360421502594656308937649239978525713471393570536680412814805076323426256584504251728507416368609420882442293831684681071553766603478479006495757222912500012444787804577811/83505703731469734628961395063481893801938371516752417759131774530720075262459158384433785006689548434701904106312038822969658455364219435022841597243178757423598248565463985786213156556523685666430799283870548238467817226915680747412191245046634279766450629886904716776719219698922088211154187845632000","1061717830619177527082296723099890392273896386613997004874669053445943252046748251883532634529759169500795452576392700472771365240996842610207274128102329096619028487369622001737128463631016494371635687841733644339636164570819431573829173533941056258744442930643735587780907310433371453992062647737259587563398111688659657406089003293576961475848704/255359631537215747979895955806995352799574790340218399351168178555478073997876110889483456972687438702262017800167048243754141722496276537685853311434069991222324039005160057724073156957530106623908696241268268096879569794431919729620178375212905203484165745866913773304319069321426245521467122472046370356725530914587807274074293673038482666015625","274122944106300296738399632684955400761495830361663966466225652918683099779465438024846903286816813856490888796372134557295699980528187779624865098445756013563535339056233912394908544185885547842235097677765325396255649207317018754967666450708249125316192200151505568416495274671679500594656671785202496/65687592621976546250581560102201535533608158256953087745856906437400149205693427285162333502528793675585022025602144243543064185647792948495372442630333800126269123531636800213405254045262127593759539706750242430153456891792533267948231185296091297979933562727112487057234422009426868531651634706262125","7842680480716516803148821198697967237136721860017131244266974996267074742248599085253569637183007740566941125452215834642683053334607896723447140851344501084122965014242091312411884985569341166545074688756440728922408743841592658677792796881188604773469108807869960161395759837407978596679911066586626885830991556090978327508459276025943279064965688960/1872528612245648675720382138045071131304652050696842872529163720558126655075937845539792108048310219395746259570506175902206215101518698490144716531697689534559827422735649881381597761684154409796315455445459537515308174919488497154409643876490472215352056502193150125644288086294418253309947229151074464928874881827227706992859640236086417889990541889","5300824422251242070074569186825929119848111723012841627275830216301188228660779008353049603527567784119877706984722171178137272986345560485784907345500893648715341273841147320288851034078863843374665850852481747000237834238703248634174397792745914847774297223176674917912406659831206869442510948965571661/1261140476013707338477604677428573831791396352814802149994640617701773078174882455512668089072441176857892331468691160991310474734143842336092636848492066592397892638052212250229129355009939118431643425836944282456647571558383755315238500832868535816144280088644939696339160092963629012001958205063168000","2220223718762215584659309059880106334425515875615107369399767892051551634000614327272260081056973863669004224981561870246078120862256383581012183852291444462730018546753183156982897386563561418424093883164027305254176874653780425452987066512563140531367766900610414277825262239199580925879453806414860409441845631158680721091621460775043562065815179617536/526383206607841251253861841374779803798480623722760367843070466043030228662340154304405180907941079883976168609082254331465595267209149963786388600028701073430773581228212441424400748220833542964971495005714483235359479470452593264280645360131482713147116366500300066771223383007216182988263355451923333319170174755334598973202740108032097242475554128875","521891797109626296684891455959263713257353500867652268541535940159815152120871142196535233326890353914761242025931373491906127275561002910157909306979093246574207104081108188995072105948138299097848175016082947174156278439986705241571619793059501724269644447572323501261424770743329858038040685313621446524/123310256826873923765604825413207481739886340225713108649758575106598510022338480189649787216845041382860899099250547657534972156328080736149239332330143771138115695598493059325064119176038137294863053148618656356436332991079150723235214278848602671333076219529535123842212129829931654967367649078369140625","66086044538329677372986118727999622900471937619891337714357792768200341519193500393739322894033303245376225584865369486696276607060432449792893028061817203932068085863800494054274423512956136695211796751845295921015953538329385253280866669403169919614982155350899648626481405781514434761541281229159396787287553493046927448595964103589100429722948913403008/15562137339474350565671240515273666798063901504051979980452491653975250630723677279081058884163396938548780856293034775459223871281049026140999055923743471466471830572672766633086347312178711643724485955576579988182546105048041649947277672869613992334541438784737993706482731696809943027528882927942967419447250586964258807454003775693567366165507144866375","335377615394100148751647837967017467711612297170079949298328061159559939969228226474615711044891085626519877634842694983669611974807129333052471799687426665556738316626171408219730853872410792831871526174987402129691897433888027072807302411474690613948951673562473758814664346259109886876538510453475290967835/78715592752271462306588358880337347638000605031000575876214116610339827495261512281635361568951675037834544811575026718101166562072917855004822606752296233435017284127594847656529606648345533195437635894948829857913798336356647286032372695130461573940500785137424365840081503133157308796505622439791698116608","20090879701618729602554170716780970848925039917987945471322994867171660307998603515745066411687983450400412739285577269751603921163835619296822801840348319742203974023505186187060251544248644338412667631232247108675504629538319425769464277309915502144443973397371136256151336255138506001292355330875114245901820438821732843540725116728866301271466614762497024/4700223519410528857298732096729483544820841497820611795617923063440946097326817340637303431283005509904481323205480729806879570430868897342398783028649633951362398196137429076844504529051072393709154483678349272930361110568616112723747726853614661953537957117231900032044221535502745676310313569997665352252492568100075191900969170979460298189170486601502625","2904778979985524171206573028445379872240558084236464200857594814631031581387804621371822074061289363372523364167184697785570324832815972970658633551879143187709707164796663015180877412717910872234647704536817108676736661804878068078543241390828229923424191204586313620612539678930999769543756218765870513049986792/677408099044823641581658869221044375312077929976719183424865834811543737800956896926637625166844372424044003929341361734886232742770909683021563822987505236295727478159938135467975522336774471915167606673489722102077041330652185811196423400701795791669780695158730756241178262962515917389382302757366325768069625","31270155809329751863885224732454397292230969002004953832354065319735530624996254695453061851449600345977646455072512400760539747054003851289540339425848681804190284451253462663731135337775088379954403740058084949675460445909826322297817535400604180338201322667139062500269285493417563095365899631360901732684124930296643108551710704785906431324876072470231424/7269578038000504017073007978844992319987411732848567116655821196644382777088703228960020894756722675887473977480537577509061256138261063926845643360849217556370868752909531088361229374467207196928745673402380473721018157327193509586295879051411183657185176812738231456253321187419224704301236205478184115996135940848503487199394612616742961108684539794921875","432538822079707760382094121020421735679118830363764570640789368235407853152380328891350816400541189148550353337874309885334920995713154225799660601389784410911658967499100610376065640785585342035058364676314084595283850213942576431310823836792440218271879354669291052589804956435743500204185107215929849054782893113/100246574739326291035824954677502591279343311051719151327066341370995390423713403739043396503785261917771859220535505691760472395306543276314938287868734009582906895763073519374099272340577921671298878837400921045252035507925021904954445172372479744465666760762909731237634082051855588025732494461939980856983552000","1914333673689206389116942789116917579088664511118582610293383428712902211612554212779880638065888518488492298586641997844141510832940409501694726851666478650414191249534733087933879981733561565249818572204932715347752949087800778646065986244657260832234479202201129845117955957242616947361016603702640821256099895469088229339240402478576285854783063612307200/442333801076281757298117784528962837115323835962460661601905131618341609371649347131724700192551574625400701487125984359494804828935577124602622582550626336986871791407398609915208114339012374456785705161994343348351473385887949809051796407340988735853810174589261300681030826392672282630613354461927208579993042968520650313621522933214063366558703422757071","5704691626402072213006354545292364761246893919997531024861408248746241619817955824682639582830486790618668221530365426203424888737658778881721063941495350237419723855000515747725926735319471480027293210991869255971365522170749568996651406002311020883635577590045650037569906001924971041810547543163363976464780729932/1314240362076792592671773873754757443276256223533339004339330559325754574023619698171225777585408160438834449576526997055649849875516310105297894855264038450585295422343454458568152668980131977005808840141079502436391909349182185596381509091427752151860204235071122788499996991078935216686010888734471173124487937875","451219364084386208718456142329444023337343409261545444643031014769484085278440612677813682892926852469540118625738238137458321112005189595703619178533263706811689687213128887082197330137502064260105387500552856851972124172206996205919556553246133218441769325133725631665593372188755090094541462474970525820334385058333756591222492801647110594428922046641945259392/103648250172203340865458115839764297558925693061798169434516001775068769911768281084188883278842546791612199025413573394167639925287068809631958006622842716869211374513136766899877504136929177267362862319748507372147243911522667591375015611312165464514308451222180272935398828092646393830572838772085366567154646425598388620105539619174837489536378605144891769625","1591076564577634575701791393842535460875733974464805197283632670013516183281542903377750304419996681222758401497321278555686661981435637461350320471258386388843198706277657208526372100698700615835733712519332548607115875288787602084336341594576426630670911478276101702119972195558314357975365863803265163991961173/364433108410193393847203348728981296285742202617988970384277162225847256295865554341611171460436362780497179090329831885853324392923449579538286804729856000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","5307507148709435807261229345132535134848030343901300324623409721698217134932866488937772986386501538026693956121121771089740095760486362654754229904633476234090792827930433598453200536551779789049352131005222659995845427680686677324963223653949277037520711609343166926627713758990384011274777087968799793410506391884872456420041494598273703914689586637995139580794368/1212244290381524115082005575105703496583315188540177702780216570265159923654197746388568151706509243638302707511238539845531608313334248788980188054651601536067740709977678222790481348003085034888244447626347312094586389347535167903408519024105748523384932942441843118813819781347089702286481924493361058339731949844620763272778960860509570622673048786968660129650125","3046577098843580578619955603029073328361298436129791931304665777036152915858575282362742008136721284817899542475666054101957899858138590963789072530710775790433466847100422875906866496318804986202089528198912098377828580031852152997907433335176267300286466072997014023120087988748396598176622765923059385876855303940720/693911859077752895978833241338902695755528613729508555938416419864772385336777924892434701804078893822446727762077537955240605927550548046309823051841326355655848406646248595628715185413852040295631448250459076043816328082561248420925930431777502622148019371383254316636979070731427737764160145097293260938978413488819","155310926743873343426312607182060072939030765297630534544899230213054714482456829198485999782086944271490229412707980997432528653509945301574794242118433868747172279224118534460563400440670015323324602117517342201640016853927923976796453577048995243600967202462466681112804476672348206491490513419336308575442086511015101999847896197546900512764233674747415844045184/35278162986589659300679088538176070649273991865663041616088851923111175518405117391134863644540911005782372831496121355954470744169969774540892096320978686548284501139861783292226140413769665461494668479430833892857992401391262903582109993838728281915806394747833588629467613308837196269424421131934859079260185052081536487462257809987002198437182539441349474426375","46729591025621874782758519074451728476386657576036360734358719976400940301493939192083339293779149127132651616972817165172116269307276487158069293114860391502484125554406945249728802484128756924044633825692779783425628292959170597009935305429239702926898931975023598456207165067568919757902764815108751735753431153581849/10585868084079030838651390738371141142245086465033459640458366146849314274285871375459898014414833295804139979016362796357043372316321872357817727821559232353993714062535883074661734509440994664726425399880995133711038483607773782532430879196405793694658185175583691180757783597895616920432527125993118171361116684288000","3736372348124144720852190769710129461145889011598636925228657393934132828633132357232883470466940330848177425542748100211498184494252714616379450272611850068867816250209867530921278645286769418080018709947826876461419654782341309127709703626401211996255743831998918894661053669189312375159058718767082163156988766821194002596331826150321864927832618126580509732359424/844176851007504003627016945212023239308348428094023437269532743221937069345682900884618378849283002998220513307273333096775669556093005637615012750733216460458689282791632437851364674879152695438589692227159038555722539345972833161146108367329370564838671791241431125003401861887477969954740544092178721327724620450947646209914621007186497081420384347438812255859375","1258774755828991281578968023382624723772927642002016270484090409043454336040857926581316994594109169123354553321469500848146015719851609220423736153365139804086413284787598253618361769125996755159571523632747129480387254164008968993734442164892486441152227433281625391753702577143985047832519062595123255569172968685060844/283659859661671181526547833415653453506477950678651675193210969173130116121017723360258249430884213011988678011357458727603413521688184521573094783291496368005697481333739504490647194454695504722542014845706216224432373442438242355188461951883454664693262684873988061018976711201351382163527093784753398257094429403691625","84932063355292829988908961192574710493098897148701473172754949846455626381329456661808566365329266898990829247446356970454502007127269708487563279536825277374133681167235811080298134899629580318813382668399644553111080625918213250223197440426147821225593304993621451053135332451997633132772608233430131400186571793929377129211228689703376067763625568623535588709576320/19089978133324852910950469658566458037096027722326716800113107848115231563787455584278193954518442601810776347091253561956877155673550458955562102935555510392954425196165785410319126098393353878286400877305164869548380670204577544630353859009177051698096136470072137579698473017257397949994722015089768745013713383769765609613514021200888647472804720456494757423299627","802638881530832431828249604040579750916118423833791608589560402449036920165704012070349537114920882938466635598602387718300074733476150548724726460209016834416094317724261857969955414000155807312852092720310159572547644569797512233899495300028159721348599816083166712365215075728968005941610056018023633235372936903015771583/179951197386119079732438617407921535065140503043429174394605652913879982486051627760652197484142547447000508189455126493868229565647284332735552462525598465192073558793335913005459266977086104359621022691931002488052727597513413492393525660272900161375677499228252863529934576881596384036401784035248649026076581302370304000","25208742399375362881099811032135575360109715964024747212026245529087599633280142314962581193303683759605084995818253124445773115574470717199218828756449187055537877478033129862600982068782249943150019637186466260707552416433010545437321814115233841687700051830170191107127799355485920046505591193770164750886037885397478191534797655616745528343172318318678405576430544896/5637713398995569614196397857525646325234056219513202928587580534159596897880731043336790273040813044077153051260989730372846713618900145444802234629922717464041261370803598799826604841654608724727320798324006129524610666235998113655193642594744544226880944882342204407750193512869672849910003246504052298022468012594459974209940607450480609190841893267203392880360823875","732332637178584560220688900268566130246820235956768724845747830959547501950765063982943061181526237061809052444110437930100210105274824607344902764184151030827266142225894655531497849161692760385938786736436977268616029862577293984376170905024712952813234949508186306774257035535805330366742322777611063402455261391021097128/163377988152179636922409938163005948596822656868040662831003991395905185823836089887990201522673196719628247106777881741843786365701135555917263285268753605514812568258179391272113405920369587922702002732667842511108732068683407168090725712401954314293193572654347237716691784386690948494003094992876867763698101043701171875","22391374854299462107923583267570593886002658786775211597896252879708753450794332301142909715845151746786016535157797023153041007263258732991465037648536702217273897876864351559736449481285518249846264600935543582562018874574655740660800634883403597181876364712521253650744197321080655028374602772696770227741610874399454362583980465225235674816785988164157351243193265401728/4983275997188967758382167867656806681565521964135131710678447245984239733544941881418957694612909599261843693554043504855207170782744518943778096768859337980470219783210191765678908537645270392500777411134164918803949155037581108678968701961544979451081836872425574123683574475790997414488641534074873248802450108535183413970057319247033379016606809226547805269752123746375","21252344995592269775107236774689012760750850598567799560343535731251766780016530978663079386453430272698006977668063208502408607227544322945446079708000304179073184745623740466334127867464883762843346619853325415963062181018736410570113171387891518398846617197097407612852037905687899800932343156979591740310928257766081697645/4718515378484509142377558412184183991357747235892194234377932213613746008373918923611236346330189287336493794499188640380975364991548794341177060325509698404571318037298112293926833877103554546466055612498927474225619680186119313129604319096374924037870803554153458104225741255753314955115645304948564151765516183663634546688","76703085666560609319365659209445044957052359500745196718269665234646121134787807938680787341023203786904308047981099228357850016602203539979246579454229078497537148799349353250167621935384193502383187510928609818011142642954550330069991570983902841318203794113898871515702445720207144863877026526025447819537396146822201819435536435835285098485990260677737192230985069824/16989892821104122916312992616665764943723222199277412857053896319814438961475117951904867066845412639236790762432996309717924037467863024360211163971190006272168845197000304328480920483651558672879967350982199768255256753110375467976246339260326422891913564151453729285191351273342206198366624882195135056176502724912849575385576554208844814085228696838834665339811027625","40153831166521391225489894857551838468150576827129133168972859441122728710165233865309084872159583787083130713473702296122465319276461991457173085312407612757280915853584698420083436946976844240063731333638150599017886937783470942007376523947840104246927580254612991191040951001539641947153847776050138532219595746056076776809812/8873576113581065493273519627544307418139908640325227196912114520903505426722086265723900326735989771660987609604507503750212298754414472822477243293638486047313990878348820573874809636084574108909615044524663712495422565151340037564156235745628465172219286664653343193162657374410926171153516871765680561505768223660055617934625","200736374277835272485186523480177159453030082779872429648449412313247640312479214261681899286513818912991945046297334418102711629933437654377760028476767482162031641781499114859553677502002901248124750539270235098492377826240319766677856465093871367817683734079621359186477306173620331748496369122143019303740252461824523590096923561928354020960176605008889579578495073283712/44259440065125442964014453739391594153290923937737136823355312892557975399035370631521014554980129291582486968083228888083079118116286312583989433037097397252506140224404130371160608365777625538148303917306340620019882928744151294738308047800711028158277500317134537540772759486365658024194428796846364486187105343266398338060080611643110071184992193593643605709075927734375","488459049325494693259159444507437983381645757291858092983371672334043029615965882574409808932509285079401239403272414271652617474184321852388397021836909585659327974611273820676128650810907598106588433939541654215766888212287311943387232664417347883717203611092450971786083806323404432266197250919880225892099146722474124874256523/107455855466267410923480140898552598306699341366032095904938430084768624148829473848763761936703072253841751966906142283640379336131083461646777390874405323298406517250231389493084918065243079819898691146841695350589992171102939046740169198394671965069747042621265775948217054519855346617967866614303497258042439052681849864192000","8430374068596413768975326329313648683222744787097373111477788794692418932056901235174019333392845529821722488982447683794746518712070635063397464904489452840169472596494433874412726723065560358405027764015273789053064830528919091414531400589850704395887250756457780868677553068164933299802944396576360356896758745030955907258232257358056931680617626606715393885378887657377280/1850480358582748412767893656294669486390769246349349706200869446679212812264400876685764762211659843658541567071977813110496329850010288179702589501255367345935389050373021591572539260951149696801665953123597521983257852207280970577287472932167362521740230973547070264273850381896786822127290397075758780174083415923482640313277341120938690594859118603017930500014640169211239","58273615882491925540881784328370957720539797010816130007322211512070634295154626813477498607761260613353633996451797686143131893884559909668805628269959901044961666535533876340116728982072626875010391195372759135469446048394835148654407846242721443845351855234347422256700864370273092971804207514736924787577569355949601385705517152/12763172138328432984573837529764902730448666594097466544652830703737195804747682450548488162227364538052585484418491914323658215406327363805353540266048943197822838925184942600367647278764952826664684839953902567694832690683467635727409976388280092262839126779730168889686628630302519063225007497707028600865624133968363921915016625","2685278694947152969468407055109959900160804835228466214479525891103128459065131221736713585038130737099067040196326815283171857977706979990467444622550497565521863441617001097354649972660183038850033950647594754644997436624623325003537308428828750008305464174443210079059253920383411910911594636045517662796811001285984447671371943267419151220518726940455756833040934506414133888/586864816044968996825907488721678304211296267371936463272955488077666796280028127333229453342355554450708284934221461946991556216095213627059047984199091625921432110913096253352065238765240063555347292393427726758010888546427415276046238297382474708612526770055488323003698641493939145624184943388159614111350839555141202024991876221874110644879676602924730506882384603409121625","27700345710264347957758638741952394530538598225904772664391173119594616680996031886665218221392453628824570256438960349220263575741495285780845399187013582169907518462437966962923592601721119258663490655013419675469864809004562272799012227293974254329929404036071055528766397079743200179924243479370594973626764330855493789112414191/6040997839051213541001279276287478343874107660287651711609067205111574718442229224212245187655300348484144001298428958025052162253854676210451657425437588244676589965820312500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","80160269787574270953020489212619791839643207793889009503234879683494928396231769167082355143564723274576166638869430572977442020236299319718643894871736539109822173538266278165276591962215927816541165548699380129014840956895931285215480350321259054359835472320394089646764361802445068798451796525897304221529850133401768027469126408090577121172238802281079916258951770135485696/17444957084936455555074876721808241311651668802091828589911310253709517226715880722948267977560381436307152342821304525073651379763144281678911047276389231713860392794975453518107055568765009486973017341479560154792340888780337029481646046233967923289468141293699236815196553819373828280398488966665994092877680860643266914861837639322607761804740256920429518434353839878280875","2352816897072623416220002134476921108405735955266703519252095150412419264317091785317803024028565851487861978477208755211589867803009700996828082850796103789009194767813611798769297617674631277847910238088040257037678126316866517601388289837575778165301828137259948173292658462765645645868094197736382683775415645307647043205988394700/510973411316690313485681833991645423802776865720580280058344111363363091616558230182669376841383375321912553771027107891991318313938505988903735114191313214327683449514676737796942389784957658395806951715454372568523597420866050825822028817422805046287798054682484158011143949412956697442991898914560191411624040490122951328364833797","6403295584873165688372907494046202150046769667837790834896334486679541887567517050446119511695248926941383207478170182650927368177009669717288184903306689332746127845953193587519575304974203099873732502605739219028995266139383163062837007982999189114810534856227848568800302527760100163350814120545587074865568436789021082619398126713943637898657861949091545516403987546145915409024/1387794272010111535893205703999712437783041553900341112488641528986385462810448493444968969845352401058333929711237978223214186693177251566069419805757440174840170213159651962686467523533938145629444468366235554597245713128812532716616087753947246800626006504878203666972651384731498770435755225220796872155249202960801768048854869001310722927230237083418017482134588865244642658875","82993247683514419570466529457059660634483860665557779709153549045427987672829778520201315148149878525274005978368939092115193636113741972236218502664881450367443614971109677363668874484696543982239492409231870942414193419634675024621942196087473557914167832058111113476295926250739099284241826553737074679953551191767148712684157318697/17950946423927357725787689855263532224005643859095168852729513034456208872420513601894508438640531171097082516559962755244698695622824386001219435651555513795509616906355363573638916895074349491513539093024980575852693293474288638209680085037286354050958859425647536735341886663074581909148323105020337857959651624760873736590065664000","584891611376763781852144397260140844977346305541197362434227194779766612939978629636198589818106137319267243431810481928639442343946346034433828599323416877248326356345631611148749005937144684862502198147087702668524450709118588741606955966569427636630159793409544653944608958808602551061186799401212712216156799273254257486955348236914237644151956226336750212957092204830385441792/126256710861549838395499078249922986417488985866522660521294610280820007499099176190820291214370699289977888813109514854178180265382471972583921477022411657285850911270389720508719377071949050253246021921916685716353393018411683757067093259101151481189635423399611625009617884983318141463140199839724797412514785751549277231259345923662499623640886881048572831787168979644775390625","4743054867460856425399742072925732465660626340183690464743217147109403130730445842673866624947360862438925194786600531200056131309608642363389833474026007798643235346104937733349791667694862514383520689594596660275306247615314272223660862212527346572811422915223417783887717426641317921972456913534338708745549252254865615725859881457906376/1021840037832289788284691535543138164288462770384961802287250236519983887262771944174557087207566030730743075334169628971336358708580124427857321953981475719503574867471090607795242192417162791762511940848493176847925838738242153177311649130718886794249673254183907621449520415060660496225939963471753122766421338241291756892571824984344625","3784664074155769467702999785016514468281913375341134899878893061325465790589101335015569840325786070795267055386681356241209412947116340524588831510768864231937929260236754881829005065056310226407358204278658699999612596866156294195316867934035877283950841910726224355461522065773816109849107487214275801829843762482082803559183694631856772777313673086715631547326400170962722842240/813783281473223559981291694175087508812520505931454895884442580280342455516154674683217348039336712901850738745276445107477919518905155156380620466135946654952837573797479076027688866326359448543065305071605591497778941561986579230698384305536224430794233462949056326864499827444363206162251104552740175503996670997705423888382328014210171324376593090187604268086334796245552762333","1946671258536842642381655747294621776070051525209940130115769153666368932042152311477746728678182920842238801763565726086459485050237860693394471644023999467670017470376746609892484192072297938254898880354014176373253875722410186683852253828299669530022166361304397631667133689128358365296701757782382475692465977794960109690362462330857/417774039698408581013003883929127512062321623871486379101498968145670269174833505080260389860863417408848209525427705249526516766731427603641806256289098209429110794311660844125377702016056984573671024035213045475132134896835814746425864304907974005950155657789157496389234919107772201305672421982198984613601511388413381215220924416000","328578487723377153600821813410631465225159589727320893988991729306688663770697528156625398176929288628930496338036815910669579019719633124832162035588583242320537435554101841406566009219059042888412893352417446437227440076869427577701706713564212185163005644118869496869980925214424591264870388237079776503547314587137721633918824664946974571838634860386893404364499977966899068777016064/70382695927096628347637455030970644630942872888311870124896575877585692281624151103204551947776906510366521972834357031777287506848887607457751667816514216907338309372900327919413372044625602555866294337672022362865161523684052940126509854895320132828009551012639156341878073682501185688461720664801829933689280752623773789373199210473995823367199793407048741191786377993390965297664875","2617201476921368517857942326432090876874414269689140439151907982631768946799200744678055980827789859579196832718849393046147656447672531861353456343821196812881882023188898815179947651274131166835133965629115749368441605680383605331300030886676081418867305170012032824011912531673468215561506423833911621270680104083533917562622600478548/559567121085534865189976875600841717161617153776904752351231210970240323460800785728739412474960421770806162360125774000625035522428160837855944215417821324758873127567654244465281354654299068546570789547691342609793050301258532586131013585959164719533123826201937801986942606844854123769532447570107525081084531848318874835968017578125","636225736038986537559880265988431731529837451289737542395494683393492040808565905376235074534207026537145408562785279823547657299565440309510931336394031904920056464959974743525662459433889398003683078967642651812081450227654478095420306880762753401111260630654049389197602389949892636943971690212484981672010398108426002137114819838399222096538921225458913266993881960732663394566024064/135776510176793971074115131648637508758953050390591773574951317807919051619690313331192027871176160424663811116849856489187562728496099757910540362703888937768555824513740118941387831822900198029266206334350448626733139136083404404120210893986654422850183837974770675600952078956326317698998103770833069712616832650406225828969036781514645731022616236082175582937900731419575337473384125","266695771933124633677367149389643417608461366874310588884377151539325854547826373711099517873721616543570605935954334944030816383858485296542260152894035979141266909050267414072982042090341712035518685997484257326212454742816979806460287972757626105526907510197321350895873473656215941034605746494172316089636216915825022339855304925515685/56811706665210352283362623728191218698295056176625217939528332247537278605113496147630185544004654583441448319260578659922931798845493756189402805173037491645434052737405379674607517658118427614090338938517963215812444779184193933749520313676564187507594274551791388039139409235056119788261689087831209441779870873305232021728002651979776","3511806683161697708497547617957719390189982761002154386881580160856792742952365159764830433511949678304281539875366378131195670004345568047690216126001067194904446295336734931691743477531830892015690816210752795806120303198745685394015161323982229908105397857791180342330098240702332072396030780386362735967021055250450666535422528637737695053315137238368787607412459874094164027214953984/746741569878639983491390741637813989978804202898438708743258000150996080386381281307609038830698579358879333079215327202911977568726258527646560497079622703052765164031089590965199628534477381843079892123440214378949632707668935001371616475282883095939750704292616758568964786737752325652839226013335092148777788733453702438432279149298482004122593243860829060557386699231448957232420125","499543951252504651717279461487337168721376180441322735807713499521878076780205427598086756686061009718016175215146305489885835839673419698751530207404115002383180054704927695269921072232395828258826213554806570423602966743337801741633869267620843626804016742412046844770601322513184123515405692795346790813502805238635003099976693786012816/106032986203682550514602969462803214831559442358811656484036951559991322084935692953211120289352600484987931812632505499612220494311324679562152078883141464406938524087376964935494245010636163705698220308243980789514815579319533341929989455211613890905485981353837321342730307819060825125980500975023479813757024395422041501208805339176375","8540849722242122835873311629952985285477986765819584558233324868363310302206006773828897816547299245727087876984857726652932481899766510637403577175623031467933486823994040576431755172220921921877192006685053572215922347418846423419683723609799729359551828522978186208983138345476801247634773975311405913274552616037005854836040162212761099347518242200807692224460514057530656658616850816/1809694575992816440924165741094996511361288430727981159314194000585536832192004274726651828760263522962868944612215633976203596150606503849595633388319338251977160257979846235995654357082321611719654136058257458753105122024859078420173515189641515736029725847315662215778251370398007468665986604529263071981040014321717598469319370651877296085250322599247141397427185438573360443115234375","51377057693118720457387330519321684810411289582445982078756989158447711080414032055843805733348558621949380554029375294451303430269197115810494758213980833379214402452992657502777067850631862453239349835215260705131864911194740832694498014048717871429797341104227759557199716944554347879767916801106279081864127192611546757627038037780244683/10867246748205139797826516105458406878398263495890048637741584969144406206902037615496936724683237700974333817527350121106320991054058406504571347680049945745432432384570515723033245430148177097144850158758462968940525568041926860856763884474605057056550146491001458649244094211354153171337463406192651150028767064600270112838159624568832000","2517199821548153657910904242290029026229621935918771922146425373057248090467388430999870036608278542449661971830076845113363443421757278612394167195431759807908413353743377586893872930828548256216510734912027450642648789925142482023713336937258932978503310551945630359646777080073329099268529064437120002567758664419443374110941824106727218341795100740316967386497091058915066147604481280/531524260324016969370728057738851340792702640911631807178654723224511108065633433027773388768889035083734041289308124943130099580765995149865288328550751289346866467755881013217287175392101334538392596956248952430438673292186779006015549928829953979591250274457658042926539541422697852390294886719770034058916886894408015624288115732154492554105512936468520265305162358665491880968652687","937159485027553069020805864547349554547661693803137696125140510201297417077233061462068930061915381468160677500445535971818609631674361074587732183297775728389124966713749450996643183965795829780345678634356741756033039293590264355732129789110416943789326482663579413229893878422643110852069225671783017610387570935863228248464396615988222968188/197552642195166614912991396771845374656891854357948006221100585931656016640982345159207601253599235265353060942313995345483862152489766993442419668492877390774016299878943454249209917002169480134131612530977452579520564400124908392339263545911443803619972765231094502745980083350567509014991735227390978850048088378721210219321877150756855372125","5119346675109082499980756672052066247676641510661024682574296075659671743397880591881419516307292610449161239233139088348510165442597278965718490070997173182184417648987611422446347235659085092530927312760229499083348217392125906851921500360553758600756698605047197529446594606336369425040236883171542367713951500007600355406492128741649090501989105696576697387613035366083536629358444229248/1077349190930018641197987339365056771667455373500846354778079878558146320193384166982231171317419356136237346389570422332278447217033773023556383420372685049620361481309067017697564760747047839930422553324681218253359586320952896352245366885171583221864112040038531116947187482413031483309534553461613717398523132176948321964066833901215878133594739833910960843185464241840039390204295097875","58469980853327028628854378052548435225264353747414624620847476036979290604604988637469977624105451959796142112200285366199247075503424204044884512269071061176877225315884188402954249683107639777479663275428465242905314418930053869461904934138752031124685541853599407727446896558064252696813370692668496452783003306386669962110734257851955001481/12284458784412533668960387046583440199646081362484321078872891438551639470826582933879934711861551014258493898870867541349962531447724393381011633785884743889445407749238183080941846528000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","632694338036291086868292541736272151517212971647680989553388199374739841494700315711180961760384484042159533979873604395621016272772109619401112452105475906812313548587880899058905419220497456502543971131226430775692744506047039958551641270070996110661036371362526401525207493270590999387476275629412687473362310414634469788979236895300129227082421021999210841384596617452097273320509348159488/132710874087075221626157136110978536488168313127228703025408943153782802265472978945703742152954881438058373686972477195846162708986982742647038014147903817539418442869011995988024638278746664230046452545499722614320284478925059527086663455478374200352375121910000967044366831275681254530914306064535110528723482282501358749001657608122307686482720926189537227492041135055090784059994118192625","2022422468242151190347511883185841333968390991430363660248687284021524206079162212007263606819387821055183192871951076644707111802972354128011904720586729919826758651167984507804867954970064938022106484656560866447290934136610214175516487579122328055482392137619829739560923807880779865442016530712986750711199998190148885726144596663143651240/423528009127070458603837580844559347493775236970253513203186912091140251858605354218715508091394564000304400858761758838182654201653901408046974668599216804223721114331085507752600832390227068985693006017591304916519540245902645712532993889000048992026931475754508248265356181099817467608863068068953756055334213584649136541490530849577363647","150542201776735231618709653388506394887777837646651406023174643241783006776019388336318216053045300417086929061565868663031237502137150880313922488106751241006715449458736723129545400133450376339156062387859536289694727635468338235084533552501618659272047966040838509286942825414463511175531001410923014751124732748099355476332649458471135027773371541572374016038525336728276024676601778299264/31475618522527975728853391146702172347290819252268551219771201846701658848754300838383637247014705706066050673096278897933831272607774110183488615338021656923433335661890414740664480671162459271850877855521869741833030384682549648626038314686632195158507693321505500888988183270276134667071014075017317692121986144742473139078857816578133693776368882596780120407949076129685719314703426278875","162664351499283182546788129866259011542529017155637405328005084357078048074065548349602626724265307733005745244338982661090506394708170105916177679714664432754153795772811389612700051002336719842784098507498286260450939289109123759859710248621544296008356071415713931721102824434964336667980062728653562369697289761913925215639430496443820411811651/33956433298509232632327667206936379248172049619640091186698677954874297837764235300806836350019565970550533206216590639008637925266405524715041372407701947953283803854153876844320283735281209725651036513491246238622967031979233265136280687995181375582844780830517825595245506321879177965868747546127685256867456319112247572348416655367667187712000","27228583713734183629451808889147559240254570554044667607519238865891084165382075658707675405673276615039702916443152954157535195508033284355580742761569101934821088036084480297442018005972653124248838420021440899368869744141698556359295489470499243402799483082406238128875386939389123336303631993557844565927960009744780823166462314116039469622216263221278402673028225214534859076857413557466368/5675134787340359276387085910732530678163604187009567576895331134521132071092293139167824957253050637085885426100206370974479279292804959049999647539684766632278449357893560561608633329561385765035738071726214510832066885156767060324427330401967034889966727638276371320401053302413136551142103678412692111973028587922399670456670380189570979581674699102934733563330382821732200682163238525390625","1340937726818688387636018677960518622106989311577445614347061615417831160296369500704524022869612973331444242000788110133157689786976834913297544087249593601420972111789552905846168933014570399562460789075871112224533723259660967481288525220689577290386781169316008987012566216235876842757183233207943071523447855623001920854571597886491163165150556/279054368814522483241446594911968519760869180429079780837994812436395792594449929617293503975169489945136244602350941695478861584261665582123038340824700224583170270427163469762789603657025958695551448477050958557681299495041994050951692916032501884523150972841782658389836059236040091605838583126400660344344601879969354053137568588338096589095875","8910951660339249479517731530773509037034977353457185453617569046885132434552771722727442649095007828468878374139001808825741829728375370140505088133244952288239619141544661695065318568074863317054989982620944602245967155400712702259180443238473885690297281525960618905625084639870407113029712510345262279507055197024677292523214467306898573956604928730377318210588837126450942086527893437954864000/1851573255256476362977604759655284263358595254392797078730401113550522214182030016660458780180636930591149034499142464357511158868625309442843792189394292787657774627425816694628839987456477799348874853555586931850788645677998004186437300173080088839930384424797706381282430208961565555953254145002318893188197561315855286173276564036402546798318351229978103276843822345004757661005876638005274037","84997663352987536417038496128111159210386455419431137931308301989414462311135708114322046234708053448098538629166672456703651524480738219822858469100454933583774404032968304328859365484249897913676382909050450855222567147661842184538302991526635974158862033287154321908483007506326807469239745851379559259262425675035790574846229470041596801343087041/17634687575122715507915388096857069366146981156897230620371714518707518105157483283253374797127075689236298114335734874553183291806268149747826050838089931351158483980735336772879045027213982661634865556129548356487722537193914986994283729746578044621115589195066212043187229606921062007047940293972381121200723292297716621231320254309060321476608000","1648849257486312935416274009474520589799750757877252390543329851029437452988499485179026845292068377957697884739052491455807688429630524210823560524122596610276957537756142278585091315141096146341773982302888007751632401090642472506538817998043326415693840862261701364114923327286462650797963969289743571514890723145251583881752876340628073395708716735192690808352188867334842743895738955762067968/341580411902962140529547622267381834425264893226447658723654120920549166416114849731588552578626041597847002946105459812230979900480135423787717825697955152193526724029890829615845314765605770060975538542976523177976182401820926854406945392167140347444433885786340415437006775075196031433365827874254477351374236932624514469241634422312990555534789607377023339236417434574755566856489013828206625","4899626659231633406569362199187192352933567344960498139854460545644210119722856870634652562532083546344965166340063297647520613455037240144734014575196764021102614748218834054157165781057405100578668000290493431869797883155764963238760612333048336953434663867580862692267574574465371615023999531030446250351305046572267686566999209229202587258144318592/1013522377571209303732207048597964555261512342860326827024786500686692475697570284120359840724596444209277948648863014479460188496587721578075151793081823795161404110811480269106846359964436993190293615381593756076515012514100289406862487971220020752628653845345780766244842386136740768474703009091552043945843632199999007070800871588289737701416015625","362903847358088423032098939589019598036593525722040887883164115981767777873860799955715587436566233010543937498922435963385091400670303956612881974450548904906949032005878241638546734597308786514086678561900713741746905742866635779432216761799371793260025549698865319760786921444505323758235164807966277024031605673481480590193724980659448692487108892154809490199414370023696404259691299614147712/74959603173756091922435708504751461448318819548943586676159545028063979695880930926805574951275602951047845904770828900645717477098988124553474616764040938121171776556999069351772286262529729056288451037717198273521810585868307402693261479298923209587143468206907278220909447483738730657438961435587752873879244136801168836767273934997417156543866722171766794171623224855358640156858606843576125","8521348154958613550574095745596657249924328336262127244827955886474742319277424381360677655239017583606851483318951440691757875270001283229585075137091617073509041644097526047127618954293881264113694362598157456878784814696577083997902588926421675843291157049153701100218784481406086810264243143337016042301806376864424632290226377881206765051896745/1757584673254145109614914862134217345456065873908262753169404848658913774363650863904627183104777337461445063704655164325930891269843669860409763569362863600932267319335889540453302785099532688264425988677082044905948179153286276609910158854349711054144968131934713419772852663860893241364433872853338630216232313607969790083448433666334742108176384","1802461420562646993856730082999823508145602238125054717836501201545920604020389361370931345491160549787411668288359013059160331370751496329806488246135100776263777863399096485894306306621852596694700845918608199329091852956315870664531614358379176680326508877329862713333336188556181470928613423972314983964578645688876556351433429494008513812136152576866650152623510296911708111085518974142728903424/371238439252064016214448115231139360835481920731625321084601566992497057371416121407293286027832357816257507287295719261141426130159269433199862002841433235955835172774430690352481806933860390015899973299268361513643524088242973968537595085600335021120523852420135081643310663869327371821064862449426404044951571585406092523478861879148545678639697679215289523234342337347529225543852787599016265125","88795280670112240977945082069219541902481768504536167808816453021962616596410396813316064685579412429940019071114917828928080181638058444302439626425155946562362550070187433083541414569447612195370911498321149367969974762244140788494955146280201020345849385865084095189982291190135293114489407801749533448443222584092575861096946605418438181411489276/18262596223069549313969288693970246663726147886364354584825624311486557881239003216971630599389642752648815377795018130449384513824927138566203714891090017787258920529990523519479383032564209629983810866231367438270859421572641494420831435563580050954867101292568399107965982704216434467243223964964535464624988344342084084237484262612100980519602625","752911409358158070688133336918078236438086521781731735123294741731669530734909563155732092406099003582749182967246236657021875488130304108082404134004381196925042617909108654109138702993903561036987511410396567636331465803949049946947888490287210013788802287247422993384874670368649616782837096233384279817294778916419067404863458318451722971117669642134894906235066332205740872938406767767019265664/154635332883086377656813458754577288834216641577439356891585125701020579768315520324293435008561626926046988056302745604248220408154454267643222328696606367409715369481567213640103076112146615938180089303294709009813772509602954514391675152597458428326644988225555987883250642389550531163153338541870029415077982539614784206119074702022117790679351778993541426110436276530890609137713909149169921875","15286089077439918584953144558775765002061832952090847117286473868694909713791678395221438112006475047633028543501632631679316850512797978594476229228325228403849089079675681042224057234415951253954044235099139983386056610384489202589484570852048157272551098909455253037561994944665563291526597323199530997923272894119350512727802414680772513760081360291/3135161418037836259442831302977219750614726139657718770206960776514822107155928800694375522572523712277389679035632531727155957120566617736817225541673148354829212969778664144907503411589126111888917929495106029890532891919001138770210977012708107496187227751496980000137223047079127096028939624830654227758737339725345681745847598157538483308068864000","17723482381737693269787076798246423310802126092500438681864673375704464394105734049099094818738115345706100191580982712146882034618103161268453808819471603805345990162762722549964406042295355916458624836894291267553138041035528315839108252422478610879301656207772491548742981990469454529537049123948604931661837539943536878260665617524824604291547373872716194154198824107266275716083848262625068958720/3630091565725887087605600771358216927099748013831912080380983545872077197366172619225751217619097657405660172801849926220948413919823038425519006413005998509677472226729295278652284861834178791332630676772284971762683579047508016687969040658592436230062049051143001484384767836353233324570686249824980508520186643477313941054900197268584495128610811273834192099099592687485176400539748616360799518357","39160514032490258389003214587901781721548011632821053230881239001436341012396166857515197251499460842954863342641015306304854226194551189224721257664420778416733889030680295206179109679627522113592373938602737416822981698362363553492610842201005420727750505681358595340127099855823746410663750133019743170700888375554918213182862789028531284364877435896/8009919337434786244380818390213546866794958389603666737562053423775386173149395943310276429895991903753441584557917565343673605019989336264748588735390182130334278887642569515202100870042209261561001627386525182096090194076839370589780431326097965428311786635366819094633651297179987340498215947144870164066409654464551017761658775207392803825996394875","18188388167811476762477659006849121912679763597132233588170406666718758511478154418948855160838212151370453213943784067796172102916618102024199200086478021533171984254799008541948973652219533819511807681148179806051835318645591102296256347927018942348574774821478499092054497390790734798143983945096982240517058861467440217558586822663985584775920517755909444876443211404222400335500608733284461685888/3715278241795087610941547133490827711133909145414878217965273061493740719983191775105550559905283733134189195190321643965858771461560130864714477448011225816210219450040558581571206711791272284197614810026220745160693898421068168630870850392739817340370146186703867097982858560347971281142766235850971837330222970900661653800041795020382847588362774677568059355238174402415384788280852059532958121625","46353430636874284402376008361176880938798775506236714098123916668545331718677407145199311191108199195405139575147933283523305343027297808443653460575141799729554209181454676876263582758919969948546918471128299522715691694855904535448703118221685887195383025133924852224568922999317583667985459047407473419196367812949579858081181660610155317911318937349/9455890179897829052705408931064120820559254220394152447502395298827357144081378513080398823188243663943177539817982481713456798757563952162598464929784370305696420245648035222083207596797327498500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","13607414211126412689435920170832779523235279308039712294681570127241403406455725064605210473923965685858012114332021572088551127762628892611459785625407107300355287623761046438724706918300976102581928643740596336865698485838431972050267114940079353996100620311097561405192365496385584164725035842307146351211183443267583872067352881387294766804298681841402861626441205037637282007810811602289501477350144/2772205947240095684743358245950494400934136973845543049938212403703005150954425087866758842625041409060217562878157900197951382737615822655863548356735553650755342108183641353142157728364469706919993519071329069805875834057743793434164720370026073143626055293058601124362130539040404491770346043977106988100969901297669523170508321703496903672333781306743488573086901583022550356345156457496396749797875","23264350093315690507131500726914401771633259602904894387312742275462601574788485574913195967854009886824436237740789910851843045306673524324611130536719802717912615609109285261163220007241492964833933975789257681755002054890453747803418465119567389315754801791950553304034666399677630030683759466627797123971742061866928213780452325847848901682792886840980/4733430508316851445525799359992627142007028326865116523033957869609125212251136452396410236930025876982265915963089597825393317909648054808274488356887197933393799241941120691826916741647173843634076299630884655997401370400734954098249519111198509015387869462198674657171808841005212058822254513429836457539629035675822719720295352508916898476137111981397","538960934807826161927564251064896730663918579817797131801326848839524373936888402762331254883505157846659830555799909822861853145306547699817986010353774500545305596630924815657016569444824389893996399550343022444937690798126189162954188680257730893424775303801562327757655350002001080811866451425665301674688928515041429654624970707803336800125648742168380676815769457467038849213225206824671025803392/109517448833211208909213522579666376007937648875042608355810687327424621469323788799169718267715808580775296460944943658428295481347915131091297305260674731651980547668762317138753250458639043477453950774629862540017034566407286963562574188172753764978963685535201028286359818524519980885827473904574840285411260037264057197155527809916623487144493019982419606308144576939532055057697567269576800542875","24451481554350251656598350124163983489544445991992661049829014268366250968046589127810466483349378560701491445658725080497078590986743512397927747885285095846398852574219367580068049729894667374214861939897557930527646930793431512683750733092448862551580494245486308114129295467976874843852138144539250235632985676953662288536669286915983261820949386845806781/4962240683851186225340479316959605207278948397833849899236383273145853045488131674290332609876751222112917095096150531825255611911377071887145019702433883343849119017643117746273523770961304609989779231048095665388209125939879595509516490230961558353074751312876252070889983946768175488341370453053495319823381943793679003096504200440997908071027962806272000","166591964685609920525429719961758335887941461052357297159523350448241484106515158310298216150030768812873781356326923214637847449893575074813991141092681107583183275003570804134461187213143832123628701876041315736048451374824101256980832991214945762266748755723551899001458245164317581617731332466039757786839492869211248064662857987111284518155462148044812626055842061283907063784492325693994911811072/33765943466859756347231737285768516240749714264564410814839966011490233598006227246396923594069488496368994857718734549787000213944990695920130591750377483911116845697231074543526982580529937081378303555262933800375576494067959129682770065443667091668104132884375840812635624862495548888467575848428463895756394050252457592540570490061561616914443009224917652440212112452400106121785938739776611328125","142464729519206642943985715465196065680101634264787375740459792619754842396453535646509170066091478069799080172299369994438836484938378991283020978342879057271045033903518255546705211647900945143546293360496661466657600494787228476009216508124736254967761901224547269496682078470378676865981855568197705507111970901389105723589666709580851611656838285777566736/28839643075889294346635430272525349651555039807615358795334663734940126053968249608601725991946342449660829847322517564370606746964714098508298705743689729306507554363954348780144675937510900983622836770223945538844314468550644543502501484521561567788992156632892028591678742014134130878101553633195551605796158103033794695984958987367799607407626319024034625","380457154857422076784416625436182734840012277442496600178664323821064977485271288502806124740204295811759917468598315932331219906040253463960961995849761235911145436552991677050565022181516596464968316292789048809559129516930574340710998611088996508613850407294743457197519091160170604426002924022923388338999324182261954685794522778833029950214443271526469607532589775916381786492089432407550224137344640/76922142291839859196033215395526448408989799722090330866256930898223012427332209054699494033511478050536463051459450844520020426942553107946282832072826069342120835351421637970462054707566481086202287686453371483126873188020538661871147778312986131920021929455276187425940666580158173676284545586944833678819622895550345083175685846944633982680908505900099388037050135210936852210263717185637166725605577","79999800708369666670693340813609265988600461251844239982904928629083975986385235816587497657678297663151298709076884516168798694292862559083730259839524968813932151813233366175091317046758260934357096757322369138747731224414176608247605314668045838769433811781490030635374856042786947109101585097035794969502111354126773165391577217071956928171336060247633607/16154850265413610119312596299635391433380319311682208755390341659152160578366244774029302281068833963848811596545791104919556346810193385001196395489740571188884873246131813864782581356887110499639544662322008824704830818136660544673293865921754569356583698951612797219776290835161780326945625621758204931298948625885081325268123344406261740843197232316416000","26517014004241498798848003208133111307300592620947908933072661812816683085261359696887064436611747292468717739609776825664344064024535028242737616786238200200498291226984541942836459188328346609549239724653950302145388877472274074665166631509490297630344351573245265440164082334092997307729007429218385933622623935704482371360985836659823269511115937443161532987660855490906546130131716829909388620539153152/5348257529530073524280989257577050878033239486885664777340947102417077875628238501791711336803418503616042922880218860266611595594400020206192599559925169589023339295256084579966533260861249529670141854632965231468533448709363477120437277477668173149958267956654411822360053335695956270719680086524322530514249891157439878407417971839744392044064720476417844056346174795601710447583861127956455406902139625","71197348290771978405602732839537012310626009318133570890482364371056186523989330157966045289127980687764218363064941391483781008265266963537623770685390148810455244349859354857421474277963009857011653865476081389968122418691934354122230780300833008753686234433642072919923583176333668289998661499146617277981691372057042930131717336250309680764289256080895092/14342680993892886303954853579883363225921109635079605392320944523109187641283117181461662846411912306480691901515655220490850586434947504504317080144378185989596578890875561336496479576651516902048606328604696610314441229321219627021610788398730173161473456954861916116391687748151443335513249810808309201830214153565966339609616397865465842187404632568359375","342401018754023891059352629509715357053454506037284788725127073168445189422181540408896452651232759821766616850264122591225331120588918865882061344322996688880669665450231982002597398732201789017495427566260651180470635467002453249479483900268320570004293679361696197905823690145326531180324429318916092471863347575533714871355651558610515931373080997536792242278529575700808878786732127630024064418468916608/68894647682461956089382461406499759613691148650738957016015844830333168307020284281532026442272618372290646283794122772122665531108484704223311663270836645399554940741928358317884620420886609705267248656765357348477857852684140561714900614303731786621656041881975328169543884661780531057279582784036689401206706069028229798913082362331334839997133771880514515972024899408556517159759907883793675672065360125","190286571838805495686895463752492174798162827967490343625540320679760700551286395956241059969689020885714190883323266375067607282890063444652926151862650426323339187596278760962390404656342309737428214493422028545912504503974763216230927196187743439226243880933947417760147785405444976177822143722569696182520826218120595298059020305548681823408268556482981325/38242608291912408815838081993045123864617058390583394828737640036167893859507494091864963383596867701436244007905770284939991912884465101575490548813894148831966132970730263562113961685364216989999844961688441914455435934703797359360780356482629495214859917249465567846934284121032247250332634283689409883499295469118485912489058982596725212975311140618764288","15345379701153714436938289567639102307887273898834051456693981514956329731572600026866162286097662958712922836383881840211072389867463987895894067288699955858337488812343674818565432780224654423872618380928462939482247900055572079914753652915184313685270722583926261499687728814560680092231526501970431280783177357735398580700300402036873780385926225005561766822479878280891130232036389707452005183370152749056/3080426623087819678602049171756961824196425548529619576972793653585089380165862889092832375934535464160425580449193072125955685099151500755278763306599307218302635233595329082702148677300945556130106197481236122437978375963261172524503625593066102601042060541617791008722569799735202779005407381267021641545644264334109052258081225159748043792288699674153722046659880085850980843460715080965607434114275256125","36443601662144279337033484452272105547257065463167427418525882851507989449375452076227652634440476502702584889057376829320548464677623038648843251719168810701744338735202853412651160681259533015293997501525430222870696235141468274274064390273214484922080219643095978640300874086585386991338440415203863901714217818222666715642467237183267303214471854472286478344/7307237990148312451155090506264642657872224684879860008436735430879314349554023096366846856470375025555139219961666754780864835035902856314981482268319886395881809659368275720375576152008289949085453326722156553603358879420820012964006978808113307340321824660484441618487292138631579616351777191144073820686595597986548374588839763719082323114663844043046087375","1575294930860663922843149113097927168024893739962464327016763741314068438447271326302129681931564068796631337571133444163024224071270063174829664848259482066723104251718808936762938249028582992557822551950212098797718627418782376027133576209718376784834456568694813577764300716139817031545408608110880973380162736536313173329973171844528083756524804574267826691156368696436273087171467254161930265910972517504/315498546654512047637461608750018349421492986465373840347519942494904200733840189483934245529561231604050629653992944140351106887747105945984325466452136415067807666316202346895657914393512001212656936450425268507235863153258769360296536050028695266363553141327896064944506216017933135251875087069031098099192325817395958019524956320840925176589616439477134480262100237057953933117460110224783420562744140625","7692057599553133417225997786980128299372439542315125030077404519679450372805989755158000864378924877036225189784045171045139667691524763609840822628706422918926410377185494048355128046783294954373197082851501927410350313585640237550107070936498164597231431242858771457898152684298047446530220873884022213114819556822050178579707210264243087257050468000092842761/1538814487241112760739561704846381585063002784795057066438330325566843108114787083741788078680861495340026117682606689156065008672344707615420501964123121620401073675430690541617930520947170306763541251152854304975131871537939618684186766168376514664494488691311397307418298556185724993104760692216619178358268934740746932420562664234738576394742559349407744000","15190836470550557926140012263310230378455340797095100474720776113765300081463960235506950799869073894127884189857505951314428810423734978025409205413789025720642609035117121385453856877706229778165533034683130064865256448444765902482146676668197546098809055341050873494446231793312407516463576380102073171090898973046611572020564659042146465345334273595086941562425006763960197801018796906114925005810069684480/3035556598829526968124942916297025416522606357010637652635799096498208643970273828496655227572100159414352020909846298817521082538898702393916708804775798552206401718323929157863173504795127180177622667376867235806208021329981136637175570409791442328468473111768140746895005561471574356889047981458002257872092408771959478275534098789982899056118498417649167444480913552548249005268380838457505944462494874581","2923754549090941424546974281011770689534961442264350984393235983189168024079617848190236639328676436485460311093391982825027512234467853098757486086492333410753919927528867817406389678461354257841007722472106464785557179844602277350411593959136520732862935740433163383885526249897183805981219416420390137516812715245569037561966929572448247077578419534651990827044/583599691615378545100950777601104007812792435102945248411439102112424251478512952087517463400054567832353967731887062349496616445419782499817548928078665212077449420216892583997505908858360011413290038645573504472422610780073975450391707084016931661068694024023083417126286468909117254531307085545768412513447197205482285022417611018126886491416133665625891075125","441922815213568908489589193556560586318864326425397702047965372289295962228254658331201274291697626694859414786292266008476137667843874780506886929181835469302142365772763129838217316953835831059616268288399119642314758261677639945004547833810080700127847214666763863338091523753898362699222880772298183760217731228628442782431573977490761665091005756534420789258276075174436091798475838370152192077494553263232/88113527373573049332749294663402406454524640221866407165839162576979477138694653404281889227416977618913249275712917582743426231744980461918772793673202077716234026090308791893409200158969108910565467273725064769890443408324386897017825489615600787634985397885230455168591240328585041836771921929567914891379235573982442311269392541694564675053636078990836491104116280492254795616055818375774141667319774630875","91197133767962483852278456285591810579974783077874307589555559715577599604626819245000672929518645004771085106770784762994476973842713035791487204122653245797126906189270204029735872508462106527240320932458036231707311992868347221176460407003487373754014365881209649632547685657666691589606571865740595829983849941049450471212387808617247938941417000965198123059467/18163679611214677813643455199979098261849405189805364986036911945012016248297645596270602508015864371788974684317239728239847888960155365342460843559658233069613218442910226128113196984801126248862273503232000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","733396724434554481470656964167233690851279923085197144879644750437402627936723531635898542414136943003236478432848965516925891956615111678444586384493883113385335463639674699443808084827715994137410743992130712903997815471369201406683862985677774155704267039224546352414417632475628136460919900347977754644214725932476856018335195927604771408949980634142255497812566866795799230501026066145434755838336990365184/145912495644159810313026420025053989609942265686388630266226856650796088768164358961644113076809511566125145395699271530802891523741636707532676065833327082092521989958971154798465784847092870457944857590623097781956884297103961713362268264159015928554707158239398721416218953003215109202771651993622244788505649098445109438104466256408060944298437033058380804126574878377874459371251056800895394904459469832875","167606423853658713615749101123336326908381619586838606922565378505211386185130407423587264776519589295420758009764678759213587906216543160801059029133457062067529468464636376639307690657945597847080706144898920305379653754920571797771178341550808041652360635584401789901525709166172283390177673009483341826911179861584213314395893323035527116283758445038413646757280/33310364848744488727470761889861069993071965180756187311178124887286133554324042422503263994717993129539448310743598138364172889305532401505890384806078790034557049074169245078416704866867380089103064821732673967120808611636618526737138435792818828990403374766228037003927569643972203993263329403469747342204808360947840103843317533210523853631711601450617095736473","22466735478643771803624909352181817912387732117378538284107485621001246177152644141853604633676939694208131243081227668237716194316732125445041260568403752325416203858329469477774720998849334961751541191761521224644520742691981372782009394826739249604257098248751626957528543558542443122470657230835176462612530464044652140581367666271771882198747182114685116336512604038833327707163107207664705120728068987996560512/4460342260599110071819142535903990817893424192972341872394014748315090430999224107274777695306032783105944721337053156074851240201179902835353097683269298594190456286888326067932777720561181760369783486872666974623910515795208353605697065447942804414120030678603538761538385793829787734830129764152263691296719726909633580318897787729004972323599773548689272008712427926734258913271101899780538635213826239542884125","1972862002066252798837977155272535342727415329632252213508267781390870646909686724955861608046325765650407340102472833428905279473185818898693854344138403744757857928883601637909604082588338869612221777263582365745419719805587946558326048087138197694016224613118304623864709183681172362693106460535117459192992832969130895829916210933710820035479169562970982784580861/391262854245936198649509275719624152305206807261382621390946060636032376057385723427601113233050260359684153963520782285097664628279596618521963444574543409076428660874564026651742234728997339844161514273669735686516761239076529088145208958938384732800586298943281728435207452253170935715239392534815683367114290676180839217919539381651841151674859715992309727232000","25408691426286653276004556426513401767718328640048945917745783225459709487487356095164164652218100925888847689099153320777389381851598236046402124684511968385325107497047025485302333503075085562533472482645023963717347867696861885363417595298751490212495932766872748125111115039311507374363000062513977436921772096443948159289707996749061007112458126301618769295162649600673247799961118662602756889448152517364992/5033870770817104909025512331238419776407331281944565644457345507262881100618908405924951559853352841154730802006750688581603270849880756026262217651685813584900300357685874044482329601894134443542753690048962260914642678445058891387041919581376195543193199307524572671344323361282633828144708683536721118910549933336800461248338059209853766305058943888965279863852107507075916981165164543199352920055389404296875","616565940481577765011174617619124841631603944267256178093555235591208387588894068005162766513720546626399308168923904625210748051788652328072241494243040185611373035059619136712559505023703153194815611268503291295059648269772663939137446253437248541496631852986499688052678961495116210133458596866684413931188348798244969797973846568160999564540652111599082181871436/122025682149627484528651507368051367620578469392233875493556828623437869650284356703295836998178256875766319508797903923638967073687991229708051285605187358616531926112736402511567721889845693991963610192161413692928378708223712791930113386840109729368772998347036090902364801014045328348830748307179590755723160142468563977011700764517880467116766150322736003147125","979882056834583241477188686550561625289337025747787132773853690143359657519481397575561812727394470125172272246774578404543257210124412718725081536309818383310896102958167337333430555168671327992395916735022711297435263157670501117734412587691271084981140167017421900852550822579410636184333142944411060788723653596377015359036101170054828623669169047118551010102258802465554033173968468183492058271365801755986560/193732066620504775981759812703028757608600125742477178751189607602983198559778039141192492589734277739017909889924488699372940787977794555519474807920198944109549023547259912324279741006975129518191081373554817584214941629021088206977532599055014150433581544599721903881284581257812850697423350805715586436114842183295730680490110793225514602133304729484547181740290534056445482186430729398701311563285494964645419","1138059441890428903336718712159907364975959482163004276901676063186939296217569849990951930955270849692775077813359573394435924934540269310629731801376134549169322946310756738187834128956671195358413024062230774111935109203207768898525882417078119314003162592087920755572050993355843681931139257303484526223461840939880759908449181135029327442039666513325916729112853/224777393704985303260433439401503507705148576727364388720387174977154204629336985298082893443205223017966145098064861566754244624732671470935725326043491911142467178027013112527668183783450932992534517827863293825061296257420183669383719043873666284378647952385401303733274771042385666436214517205678674213118374889121542369996042313879258622144464565403138392064000","614262617634904509410555695398092190166323289787703954329113412647342230855826568873946233136303566178604275296873234926652080462259552775254755109931312516616838091852915397846984381183732773411263828600108443070778861986849272794442105107285234729077818614332155890946804257724112143631642663084660012362691100872465148864413343598067567142977134846266425075195546265101720326272502009234689388355365794889444257557504/121200854655310345878069155190734381476914416893031941761756379148622591310152793328910334357724762079139509813381997287954319983165971628429295803162563856219211627796200599196263868781937234015821367575512548522790158101892507996780675863234181700253545912643548466256938936835469646114659598727592390628209362096738343417775009361678599075671154405137663077798419897932404104579113056038271753988669813988076515476125","106893445531995430131837569895703697604978445859412739331042151546083234373443601923983714252801103551874986033841637079479794895452077803182698291822629713500021995241940133037200268381793282318691568234728329378829301282121562652452936297422136961147432559766896143081059518238234777055931999714973999553456547746825617168005650221542417216291412324174772893635832/21070287546583154895102927029203125577385528350171457634203261197137238923923245382493868134869009844094435068284335909266152042903157700510534904847257436666980671067329084409346149729385625108233234542133838924281113454526471855573271066865534480974484196644173270141056470857666632902827625475719738076524047736123182255306429677688129231682978570461273193359375","1112742798776748551928744983308584493817112400536084744850969025063360679785378789764875076529575583792571198510306186417773101346425704969671256564494135750783642910394213727189639661184379341961737135764570942961692159177189753139209638929302928699705042832922774012622017270172331722295881412111812933593370743210214549038212395941675257558442878012136484052827439007483777859391215222647499741572327725689840850048/219121905514652575155579185322367175400669386131891843382447432851122462422992147756333729893028362013318264155489537138133372703295804002840920402482110260590055749843170064921843460498824128274420925357547023876488939786863662801268798987685503391058250902634999352652063668663245829496836853509616873246554292796823779397317819134891873583857621623143253788854530146303641400986028503534408870194989478421253057625","983995170259637497940121707857673268620603982844439610076334749792119502557380361624096960070148627663305171311646851566811683351232268240169848810658089698606409195744471343416197434926513684882439596141368794175162315633192028977211909698595778839497844847281262559899914504080092844816319298286511436690429175757804604673752838786852277255064434365401871903307643705/193579499709739777577893639665643417521924510242119561765932078835121983190401762561436208758210519231103767232899529457440602166918701550386152070813526760823513884391055054076485295945972185402977095815609448651316824455250005505410192101148149284756928250258632031981439345164037318129987999546683113483700660879431801728391911161900686707231543216283304182063038464","30691013076836380319652884848585431917439358375118437035944950498156836885409110087616602043242747413728866747975631727566613593257623099549583001362246649928075859944695060947434885707102684568632559339383409378997568182445019183928058902445738702610436187907199482604867148445903921474846103586253320950728989228898324829144701782792767763794895137313050381112872972806712570559942583906619373159053654481250809168128/6031936190594376585238407905469035598668211679521553144958053099463931217856780171872253258738635531385711702176347575597387389685526098889278278029314982721284691198967204664771178761416891317672705719303088746953644978471289001577698554025410820041497108311270431130911021653860874238212040640737171103823631718483572464361276703378587106311153455557896527384426327053165214814954154328483257657424873929502112904625","33633002641218571027682690377239300567277297301791434890431645909447040830457253186262970747405514897340315490970846553666201190386457221846694126637998462873786334837901001833771510353365825087187582807843940479192544772559118293851131234910638705258664901225494129023244916125545283621607920983287799648992632814461828998517949449887522866259724675318233522060729654796/6603800575190864815125307817934327053530311915572323544225173935830559756077637251538096164499112411672913910767032482188570876526606118068929913515497400397562722669603861813453418621246538114872330536044519242663538662076583511078523573320035084744399535581216815034837553165853576616422592790103728141443697362408727056813977234078214386771115586436985105038873998875","9090550743395453237608373761422705922989356346696677314277463900103283296889488490217663400349361962695279888433677856471792856853109469433355422802663947305503479561493033851081993247556828544308258821557994512133708656174864544457143793106703578476914924328960109390350040954158797845288786321215010324565010420734044059968931558099077932776525974187717655105951506223649947806568984848883258144616897526257038550656/1783219994432430133950472014582130883873515063182143523712063859964133099770763874744121895885645346884371273930727450069430704145915261127061538288702855011220545530326588799412076879985026006593893648911637986337776174555198865379578424838210466703683642106934154603710587408512357351455891557594977191641529451749437270208258072920514602243985184744955476557012910446023911358037761232253615162335336208343505859375","396226087129511787616470716244996965529391571019620342657409150252952330537366537352182763477820160355931003174946109480036915624974500187179367618457008802667089004678925595775249725629495848146669773574395699032785024522882892752987825063933573399691764866816284097232869198405981830106568826923407996367321353003569052419999880089180418759265274331299787468134974811/77651132902382550540201641628906752945078964002822585000619340261128555048628863996784740469908853602590877726845475670110127527874088625214912598995012971630852593597027649154487264595100300180591016581254965295280089902497540043916128232871685159131211213497239568483141031137909208031392464815187505714066235868748950184065923236670418822911614780061752905170944000","1288523130900767412477856952035690867153496584747510253984686336382980221603917538996138294311274357713893956725672062832264871415025750136690143411884111580335458539824573239771267043414225271729141508235839982033182605445173050590151912297720800168687369852280323356691345317649445843078291369394324862039143247087442309135074453265658730028145500871559458519282433012494054724678302957276371418936282902434203225600/252284450515080370603949213084529993395050575951188044032908270470514999880554862449223347761507020354321422785760279154913310488296485989979706208254206974075438570521939826124860483842758137231373182496438568202110337751291106165654945352183167578675508602832478752400011567482434301614269579368882858973850914513870297071866544875650189106576672289734326492492059816669288907018095832842249738081022227281715919357","559506782175368748187145067236900803925823792088293851453005882621173124590368101213652371965740365119375069053747415415684193092607523211636912074219215053809881814859129515591479780669511533619258835199715146655774919418434080807837587396115955105126806762961292429904380132116986984435528307613054828929294602185927322238461491059740342387266084431988727321711184308176/109446188216864405154936682374609448082436347600301765944233278303643744736544109262794383069197271409398615846380701459882784547857821831816863216080069944818453908760476475874319791512782445408136169878207358663250499628002971644430164185578966399908622640732411885568638054229180673755690889471388585521113862492432946110902070139679164884208988489955874131206343597375","365842109776085256207829452385781129402656684569922320812625438296958174120084800064669048017227033185969596458778213306152397766619692644694641677223213185977626940193107608138827771259334379895020377700759789774994800008933137569543592829220611543060189849601828342989023692876182148818363689293009174358168826340010491728715549904988196347316703985894355217235339548078187164176255405596310602921647203428200269666176/71497266937783826306774367225149833789788300609530680399994804704196212252148324552193149332755057982662844988588678159610516634667597707204818296457616315484973288944637139939912166034691155272078609876888919170894915224022982785138928008133003473320018151370486895637936102520353951511525996197267572355782608352075229547764732602557133494648237258900273354364050662921889937355682486287799239363976556848320046933875","59378684894605773397070783936113244261297966863668546282887298999811950599772732377979382620766180662159460666220894896896564357533604962977968843474062092083279165837424210591042655271577974272394203253875965589611493384384257117088518521598379301169916060951350650621757237206805037261878212424267780312614942173870651684587166691539909068452932891649554575072205080763/11593916877920131260484148322810317629326850763057953025674154928920977965095141485536566217873796019006709247938019404840440511433467040918770165456925609124166970862430104329357419669175323763143377917913760028500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","440706629842402075137926797732405268015915199334341565218443748798479563505125605478061664327658137598204192554352688830679475840386882350034150077506804799859586772904929402683276898098601814091430598259347980573084686932949502809068565420937301632494387691284902026088950093888426872222813857928092871267130505744095697172494119689779474840037266295586359244899477781345249657455186847452249040895151288114085352974933708544/85971876318334010542313048056773419567285701852816309711738644074302467763075671531248793080425349570584102078764464196653843973936119037322000695949209283327606280423406302517302874806092835694196353778161663338667091195199032831587897410329509487165187753418615356836636352319310103639079123698118997500068644500893282438137614420288839230827096109835206605385673197123994357393257304049093683934224826006704198171592304125","13220371178312284248107863849287558696210741535280184003301555188086761767176560823174196915070378763091889333203635784037294769747641959860810039816533609140662043493962707445564057197150603226797446933532133956054671103942520142568674339411250001585991743608723150284270101326419464088290151483823061613403673956918458456165552482913079283537536214967294211244361353060/2576683013797055224377707713704899315377379548630511095136568220145808780162671473907260623503552385384482723173913562423316997528913651044277418227616447815609873991028073011738113927961824632868956802271260292075825561646156680740323686126811928372672670917332613490241615850953660246271541592056143611581223295045062157404996958100136358649109693659623847024011265147","1538372578072246705266078247950089219881197139399081643650271348770110178217959856819170325400476655944115553238940541695152110949081675985299189913515975242840473616169775880272489805123124548256666658584129873597192213080038937409046114908719298170078476325423466734429870048697383304265342125425087105698152643145531760853127801123272389134514333752173173161562273487752064850461823726948588221913540799816489566883798912/299566102446745552813544808169323270315327122249327394279467999308669285416179486075255023523726449428151807672528368606071047812907935426406886253284580296349349558797128593446316786243666290649442956134448480598303527795996222703837663605600624271807461605295956674925277658331760000117761013381199880905748188151556184620779667670278558839116983636972680749836497346863752662521197700717702790359162307617024566689271625","281696937222363685333688097915539146272117417024070728031063821781398985795813333650547982965341298894634762289669256129805545549280355643122501181852136332529515756074502902204877664395456278205770206019663082511098956468724829475220996427130295010430751942126263620206886404244432409164651524408198286831329682605959881993845189585640874220032515465014097345759490750307207/54806274927935495596891312029173862473687610099325998583092091915101265393157631244775387832621032230434007486602816972765210205596482942091518459849775458089575743699797096697542306049628939919466378189656065461708686421130956996965004776108499273871055615413566043083634090083096967567965373203683231171594922347812966905149873265654962896456451681332216735396249206784000","228506238533410805238253122961471637501498406104430046727793420497895852412513560203475440156216063574654372726194215013407325207763369075250819386897086702757125418327084312933061738392406321003231853349865003322697360659712771167066453430309997639548320673279964210730701373707765051246595806673865646607841876463608039111252607452843372970797479959213447237540830563469297144446069689149549515457318899981763489792/44418759813188470246596822974281932219088697005123285598909329328419879212164564561558656547678211265529803086702843380128457744445765859393426675396393053094588240457569380155526179040891009717323059641035189017918495485630657360525410506453554255734005459614858972904374739673834145083512160883402151636664208253116362089211658645312778404886460203600762546810897889629330022309705583438699250109493732452392578125","2396110297187570506257836426251930521245117960980667897194680897478996322590925380310917400763581787981992131769075961259393685331523600287377841990678117113566991100720996059187144934569703045966210306282348527729533806882408323961336166190162075154579344185244957673138372347997134388801085788353482276257401005734929059700346687783400772331280644647089520646562669857652648/465370154262863030800729180763091967573522779260407615567563274096037297593764955820626213827962697601334935773802201919483657310282236100250543992334865461800976838791035335861420892967699843608855185710753433852279737724446294443337363478679601049432404435672469098850676302728116369979460222148206944323730586138087862719386327396334468302608499235112520318322763857676375","1188272888075247520453568790651819187486389546755745961952033150576243575862120569399808467067800830890874391487822723879717525264875722720416173276963170672622214121308038530968291758445510982186014289745026439477197148445087614813262170975056866881909056450023324743409114115141145340480846088869807540798073417035168139476153897066325127540609756310068558610112731607522096096821938163134080426356894899245575410494080/230586762395914863625709048789913840511134004337945700368117795195769576856434588144361459740833007125516905017415184787078710001969815416281381427387949263792200577791644278234661952852149216540491852757174842146376788280677956350901082838474705227642420261641783722891948710833898248566893322144435457967452449965772543077421407816225704952270697016152452032506898311260979594550143344971416786595888053149375287120733","1072184299258468249004114536023934869518152618369895613271618698908405514630154819453979477077738526673716264830106745031385951736108376866253955319711026042389282009348594845497252059906901748860111986811345742998968284077119165082435598381810306691078037018432766116865792677955520465319184311529667642995217214507658693259694586107847099911341219913576038605872218680562047/207882129535607118520818565811162643811811563516006836924341123976848022970024793004700710992938987476728640943834012473687892481059618823520721737479364352887178017866425027953255856440099446112508663603319745066750522936408781591578321031173620445865113295407603090322283539974563690157418931060565698315406021569491751612761888641141446406531645379264720684248398299136000","158094023904374464057702010126993231151433474361820266584020400101533651587072432728050776506672527718975042616651177034635188178967462982926261516748842073587981953038445977514446838733557926696939591069712397947055261777416704028506441173540338327591514650398349069348381309688677335132100441905603664282735310299686268721634369502296867409514777359935022301425165750780988231639828675424239931533849896744198012747670272/30626384366513923671063955469537776291182594080083494737341604579575446319190916924682809546024369330706012653799783122328775875399363759308193432327358837772825609356553955350401725689682838701996446404559005896479618311357573203081153855961484398360670837599853294627153740224543175497655414585918231215639906924313779933211774291565425360415684556655021031131349317390382320286092667852173815259422737956767922154798375","12216278924286401897470540169822542417611356797676160128176706721343511598951866107858729405615631246003458062949723290192242594609994613705183460814797527214549142043573863947658832694800184691222426521703728394203722420336773310908687071670107794543022567943478843065246011544888390757810534211554666736239506503613750756246364621509359804902243487113673014588325806249988332/2364584127734680580481708368927921125934330000162935118371174269642831409084634375654239735054363928748162229294829526339927907778510530444646754603322373712788147193691037688552857183116332292048731726305451516954679277320777955342295564000586923227775208580772868590742136150431152495718132142742153643081187691849828217592954519485869135930755646768375299870967864990234375","578939195017447864385837341975558679292903716580114421030538728778491606282153588930983966100514147976321305616196463174070345884292672842497715966933722088536619333912687108737657068701352918582656105418491672377271304970407730786932913490869797471081081431072836814581099271832696990064828717287258860166842791984158634684078346453202928137987930328826212011774670396356151265781053547412633310327737900786639842674288716416/111966291649651600701875186827360807558960817589719096407887999108024557254221008849510152469119211567152616745769256123968832250104006560061907741567034087109512483357851919402017950812795426393415409198268246337542639470834168040295134130657073201020340432236723824670803498949071870597039309004562024033656488150406105175401372709011082725359382691270659245312133919518760328422827067578306005644825927050994860723405473375","8041514821545833865350873212853873042112343327573364523948780030849543753072688526717886590013028227714585965095216381829914996539132359247488639692828639170075726301411777307168737667077730792892326979446426349813642680537699905651125068091362135055902152994216233622733424128982011248923051410141033146604688083721413402395290842738021365861670415833356403364696759583009635/1553937833499559104910551811592138833189892464446761247731330672284191313590708439680460540329836344767557599746234213006493842842879398684745864919973051635127080738612248150108793397855113122368507483429209127035263504194847798809612278864438287815470711036548695032421148125849669175729331459149833945183228413961985381338162155596008680906676498435954178226973272371625984","12059659399309169167301353842123191409306995788633965680414620302285606896146667751472818541537183787935352700725982053536032930866708413010971856856768384974849695774437178790890015242323873769697407411558706626105140596160049735605389301414460825674631122462760014451298494875244754354054447697502521388381253293175367558014453865905104467382184997528879171136492277222127399012368677604910497789360212571238146627048080568400384/2328494054002703067219004484782931471919751585969487160602269605916676223315055450845942763690581877771159615428854802721943114463834992106300185328876910271612375509166975628540839858771078495267566008071532876816826751069408153323840515037497664871689085370699991860738368371510578076683395101062439493831773194498579620513073693022191702398601471237166387045790480861932005012807234071429628725981935147069738988682858417182625","683009426705008850682549700382901603742691705123356866338951397347368059105140826655486518416578697931244347554322654428162554903861783227680935341690740579867651545205562690172425016836559678937794312287639193745517811234257062356826622207475918293015140472942579713388671782202262396642735640315948612572908444501108579457520714632371056288874351015666995549139003946314085696/131769214246522869780429817236150406548549044658474416909806179734873399109656411633488099249198882165279745627038984487365589625562901914030850178330133080409420340227179447548044572594184601425691821617928130423410997853384425373999967759499571890326740433081063424903098252502791477854302204200941376983295622430177445507316706609802292121282957519571162158620971952084486375","1418116259749091420309271913909337143756589314597557128553117870573928055109322864794169592355058370891251425125187770724828108988587888087023982451205475980371440423992838481547236638456717520835668859093413956339261802305597694403381021863258753441889536361061407579332570493634254542013337999844407181346815549594836374497512447969751514466481466717590255369810506813543577735080228718660747940956248427356785784199073569408/273368882980516556922532339653303822104510203916024760371844491705599093435133738774975538364241630079468712981056336655766117378160822393876348755370711942273876284944422610974149712212944211513462921649872232656449940987552227525504529710373144228818606127541937831103642415534318303187393593236209298242574677293352798419428712873685798636474667204083938875672934235816396371477146089168375198141802684403955936431884765625","546411077581845999248238069684194831621691193366466972898628141511422317954477211865167402284211971296286346492698354214043840080181702652132835681239302798339667835439189275457116051279366194551632712819028177402221815140045210690908631767786711675029194359998826252332434573121740830827417293557234891406021102083555472155479148332697839972702631641910213821827820374586459319/105246945889799140338072754365901705544530661781295362563214285953881890233987516230568663143342952799036341701952267011236663118111226623815975847494372076420199418712941018288738590264475520229651370015377608638075866459684692488079223686296541020897904588347083045723167762682959422858996673894180805702299907478685374065593161226849447131100462022089783265346597553176576000","2398330640958841474772606439916070050977544535580605737383995160447105736276950196885906408317628083110923322157113892928963237845914017845444295040924101784423382681801754191301860383927129006953354739240926643562987838836997453985855576402628166875869041032631651591871962852884189548538272285387092843044669499688035134181859376665409767886188304314888753894905317929877238322615838524354191263502347881033855441181420399360/461588070868590122892265681879734295007029130965626060552783760068897000195207878227714842617470320231527222074701444349530952699708435668339712860464533455345665068841333232359698449088497137068713309811942968433868609329301082001752617420002377892756821532220676085014874112083615054550278903960627185675459015343606391094523511117705747842645927349130302549554534056269331809016770715819934970200483161548527932617036185253","6041015879424725383006424536130409209607854044642113747266098198777011981328765528361630516108680392500990580908509403483891763219659726090675140672989657743882183951954294745396417829943469201306594018454995862321821016087416840247422350906412007336103086620396467456181771583200365740253389107968122850063607085957109965406634738740996318415514360956028575560979203447735121436/1161752799109428422288020947061281540989708937450568100764830251908850596717606701047413407636907934320789870175907792017513896999208892282137299070761467096211814586909598705615312819596495636017728313513520193786266452836805291464826226833593878504804389728477191170027729963773716267868284479768397603444919008915279522376004326398403851684761808785381609370767169521034383625","13240077436443988749179508462267267187169441948722358165090554769250505713747934643200804819418670147225695324432684266924694524337920816452346599774452681831320005286326986675907899608537972384924882996757503264622991355949039882526389342174307168805166215838138277557052303430492669193939212362638263582899713198716541723383138016564027766560215944409353427176135895982596327685665844815618402881202645610620284792793420780517248/2544223084468158291883698813309541801455311468982232546872485444308211415529998472787377800559884210837213042932180479090277285630234238711851480232520137856848809986631784843528381778520727465146661792797924458540957133423665746229799675650290296217658444899605236550972043549278128087645211909479009099766619355677984218929672461506691980442071860591767266913041147587815452007726513853820116629482732060593116624596368806566625","1953999166296955830935495158735359200362904181792947794529339487489730042568305997099959302322956898299616194932283060554261566410988618045107398092345476532371402134206635235570281738377188438407703089325315446371127042537576093536896282955524842632708645655481028161471313608974238110718242273935956977555610147714316158486553633871312187084618154014921190595222799283957140353/375191165084882521037046014569185165885459082629136124177286500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"];if(To[ae])return I2.quick.apply(null,To[ae].split("/"));ae=new I2(ae);for(var wh=80,ff=new I2(0),n1=ae.subtract(new I2(1)),c1=ae.add(new I2(1)),u1=0;u1<wh;u1++){var A1=new I2(2*u1+1),u2=B2.bigpow(n1.divide(c1),A1),s2=A1.clone().invert().multiply(u2);ff=ff.add(s2)}return ff.multiply(new I2(2))},factorial:function(ae){var To=ae%1===0;if(To&&ae<0)return NaN;if(!To)return B2.gamma(ae+1);for(var wh=1,ff=2;ff<=ae;ff++)wh=wh*ff;return wh},dfactorial:function(ae){if(p1(ae)){var To=ae%2===0,wh=To?ae/2:(ae+1)/2,ff=new I2(1);if(To)for(var n1=1;n1<=wh;n1++)ff=ff.multiply(new I2(2).multiply(new I2(n1)));else for(var n1=1;n1<=wh;n1++)ff=ff.multiply(new I2(2).multiply(new I2(n1)).subtract(new I2(1)))}else ff=Math.pow(2,(1+2*ae-Math.cos(Math.PI*ae))/4)*Math.pow(Math.PI,(Math.cos(Math.PI*ae)-1)/4)*B2.gamma(1+ae/2);return ff},GCD:function(){for(var ae=q2([].slice.call(arguments).map(function(n1){return Math.abs(n1)})).sort(),To=Math.abs(ae.shift()),wh=ae.length;wh-- >0;)for(var ff=Math.abs(ae.shift());;){if(To%=ff,To===0){To=ff;break}if(ff%=To,ff===0)break}return To},QGCD:function(){for(var ae=[].slice.call(arguments),To=ae[0],wh=1;wh<ae.length;wh++){var ff=ae[wh],n1=To.isNegative()&&ff.isNegative()?-1:1;To=ff.gcd(To),n1<0&&To.negate()}return To},LCM:function(ae,To){return ae*To/B2.GCD(ae,To)},pow:function(ae,To){return ae<0&&Math.abs(To)<1?1/To%2===0?NaN:-Math.pow(Math.abs(ae),To):Math.pow(ae,To)},factor:function(ae){ae=Number(ae);var To=Math.sign(ae);ae=Math.abs(ae);var wh=B2.ifactor(ae),ff=new h1;ff.symbols={},ff.group=De;for(var n1 in wh){var c1=new h1(1);c1.group=P,c1.value=n1,c1.power=new h1(wh[n1]),ff.symbols[n1]=c1}return ff.updateHash(),ae===1&&(ff=new h1(ae)),To<0&&ff.negate(),ff},sfactor:function(ae,To){To=To||{};var wh=Math.floor(Math.sqrt(ae)),ff=d[d.length-1];wh>ff&&ae<1e6&&L2(wh);for(var n1=d.length,c1=0;c1<n1;c1++)for(var u1=d[c1];ae%u1===0;)ae=ae/u1,To[u1]=(To[u1]||0)+1;return ae>1&&(To[ae]=1),To},ifactor:function(ae){var To=new l(ae);if(ae=String(ae),ae==="0")return{0:1};ae=new l(ae);var wh=ae.sign?-1:1;ae=ae.abs();var ff={};if(ae.lt("65536"))ff=B2.sfactor(ae,ff);else{var n1=function(s2){s2.isPrime()?ff[s2]=(ff[s2]||0)+1:ff=B2.sfactor(s2,ff)};try{for(var c1=1e3,u1=0;!ae.abs().equals(1);)if(ae.isPrime()){n1(ae);break}else{let s2=function(h2){for(var K2=new l(h2),R2=2,V2=new l(h2),e4=new l(1);e4.equals(1);){for(var t4=0;t4<=R2&&e4.equals(1);t4++){if(u1++>c1)throw new Error("stopping");V2=V2.pow(2).add(1).mod(ae),e4=l.gcd(V2.minus(K2).abs(),ae)}R2=R2*2,K2=V2}return e4.equals(ae)?s2(h2+1):e4};var A1=s2(2);n1(A1),ae=ae.divide(A1)}}catch{ff={},n1(To)}}if(wh===-1){var u2=N1(o1(ff));ff["-"+u2]=ff[u2],delete ff[u2]}return ff},boxfactor:function(ae,To){To=To||200;for(var wh,ff,n1=Math.floor(5/12*ae),c1=0,u1=!1;wh=Math.floor(ae/n1),ff=ae%n1,ff!==0;){if(u1)return[ae,1];n1=Math.max(ff,n1-ff),c1++,u1=c1>To}return[wh,n1,c1]},fib:function(ae){var To=Math.sign(ae);ae=Math.abs(ae),To=v2(ae)?To:Math.abs(To);for(var wh=0,ff=1,n1=1,c1=2;c1<=ae;c1++)n1=wh+ff,wh=ff,ff=n1;return n1*To},mod:function(ae,To){return ae%To},integer_part:function(ae){var To=Math.sign(ae);return To*Math.floor(Math.abs(ae))},simpson:function(ae,To,wh,ff){var n1=function(V2,e4,t4){var v4=V2(e4),w4=1e-12;return isNaN(v4)&&(v4=V2(t4===1?e4+w4:e4-w4)),v4};ff=ff||1e-4;var c1=Math.abs(Math.floor((wh-To)/ff));c1%2!==0&&c1++;for(var u1=(wh-To)/c1,A1=n1(ae,To,1),u2=!1,s2=To+u1,h2,K2,R2=1;R2<c1;R2++)h2=u2?2:4,K2=h2*n1(ae,s2,1),A1+=K2,u2=!u2,s2+=u1;return(A1+n1(ae,s2,2))*(u1/3)},num_integrate:function(ae,To,wh,ff,n1){if(n1<0)throw new Error("max depth cannot be negative");function c1(u2,s2,h2,K2,R2,V2,e4,t4,v4,w4,T4){if(T4.nanEncountered)return NaN;var D4,C4,s4,Z4,h3,r3,R4,B4,N4,W4;if(D4=h2-s2,C4=u2(s2+D4*.25),s4=u2(h2-D4*.25),isNaN(C4)){T4.nanEncountered=!0;return}if(isNaN(s4)){T4.nanEncountered=!0;return}if(Z4=D4*(K2+4*C4+R2)/12,h3=D4*(R2+4*s4+V2)/12,r3=Z4+h3,W4=(r3-e4)/15,!(T4.maxDepthCount>1e3*v4))return w4>v4?(T4.maxDepthCount++,r3+W4):Math.abs(W4)<t4?r3+W4:(R4=s2+D4*.5,B4=c1(u2,s2,R4,K2,C4,R2,Z4,t4*.5,v4,w4+1,T4),isNaN(B4)?(T4.nanEncountered=!0,NaN):(N4=c1(u2,R4,h2,R2,s4,V2,h3,t4*.5,v4,w4+1,T4),isNaN(N4)?(T4.nanEncountered=!0,NaN):B4+N4))}function u1(u2,s2,h2,K2,R2){var V2={maxDepthCount:0,nanEncountered:!1};K2===void 0&&(K2=1e-9),R2===void 0&&(R2=45);var e4=u2(s2),t4=u2(.5*(s2+h2)),v4=u2(h2),w4=(e4+4*t4+v4)*(h2-s2)/6,T4=c1(u2,s2,h2,e4,t4,v4,w4,K2,R2,1,V2);if(V2.maxDepthCount>0&&_h("integrate-adaptive-simpson: Warning: maximum recursion depth ("+R2+") reached "+V2.maxDepthCount+" times"),V2.nanEncountered)throw new Error("Function does not converge over interval!");return T4}var A1;try{A1=u1(ae,To,wh,ff,n1)}catch{return B2.simpson(ae,To,wh)}return Q1(A1,12)},Ci:function(ae){for(var To=20,wh=.5772156649015329,ff=0,n1=1;n1<To;n1++){var c1=2*n1;ff+=Math.pow(-1,n1)*Math.pow(ae,c1)/(c1*B2.factorial(c1))}return Math.log(ae)+wh+ff},Si:function(ae){for(var To=20,wh=0,ff=0;ff<To;ff++){var n1=2*ff;wh+=Math.pow(-1,ff)*Math.pow(ae,n1+1)/((n1+1)*B2.factorial(n1+1))}return wh},Ei:function(ae){if(Number(ae)===0)return-1/0;for(var To=30,wh=.5772156649015329,ff=0,n1=1;n1<To;n1++)ff+=Math.pow(ae,n1)/(n1*B2.factorial(n1));return wh+Math.abs(Math.log(ae))+ff},Shi:function(ae){for(var To=30,wh=0,ff,n1,c1=0;c1<To;c1++)ff=2*c1,n1=ff+1,wh+=Math.pow(ae,n1)/(n1*n1*B2.factorial(ff));return wh},Chi:function(ae){var To,wh,ff;return To=.001,wh=.5772156649015329,ff=function(n1){return(Math.cosh(n1)-1)/n1},Math.log(ae)+wh+B2.num_integrate(ff,.002,ae,To)},Li:function(ae){return B2.Ei(B2.bigLog(ae))},gamma_incomplete:function(ae,n1){for(var wh=ae-1,ff=0,n1=n1||0,c1=0;c1<wh;c1++)ff+=Math.pow(n1,c1)/B2.factorial(c1);return B2.factorial(wh)*Math.exp(-n1)*ff},step:function(ae){return ae>0?1:ae<0?0:.5},rect:function(To){var To=Math.abs(To);return To===.5?To:To>.5?0:1},sinc:function(ae){return ae.equals(0)?1:Math.sin(ae)/ae},tri:function(ae){return ae=Math.abs(ae),ae>=1?0:1-ae},nthroot:function(ae,To){if(ae instanceof I2||(ae=new I2(ae.toString())),To instanceof I2||(To=new I2(To.toString())),To.equals(1))return ae;var wh=ae.divide(new I2(2)),ff=new I2(1e-15),n1,c1,u1,A1=To.clone().invert(),u2=To.subtract(new I2(1));do{var s2=B2.bigpow(wh,u2),h2=A1.multiply(ae.divide(s2).subtract(wh)).toDecimal(25);if(n1=I2.create(h2),u1)break;wh=wh.add(n1);var h2=n1.toDecimal();u1=c1?c1===h2:!1,c1=h2}while(n1.abs().gte(ff));return wh},sqrt:function(ae){ae instanceof I2||(ae=new I2(ae));var To,wh,ff,n1,c1=0,u1=!1,A1=new I2(1e-20);To=ae.divide(new I2(2));var u2=1e3;do{if(c1>u2)throw new Error("Unable to calculate square root for "+ae);To=To.add(ae.divide(To)).divide(new I2(2)),To=new I2(To.decimal(30)),wh=ae.subtract(To.multiply(To)),n1=ff?ff.equals(wh):!1,(wh.clone().abs().lessThan(A1)||n1)&&(u1=!0),ff=wh,c1++}while(!u1);return To}};g.FUNCTION_MODULES.push(B2),X2(B2),Math.sign=Math.sign||function(ae){return ae=+ae,ae===0||isNaN(ae)?ae:ae>0?1:-1},Math.cosh=Math.cosh||function(ae){var To=Math.exp(ae);return(To+1/To)/2},Math.sech=Math.sech||function(ae){return 1/Math.cosh(ae)},Math.csch=Math.csch||function(ae){return 1/Math.sinh(ae)},Math.coth=Math.coth||function(ae){return 1/Math.tanh(ae)},Math.sinh=Math.sinh||function(ae){var To=Math.exp(ae);return(To-1/To)/2},Math.tanh=Math.tanh||function(ae){if(ae===1/0)return 1;if(ae===-1/0)return-1;var To=Math.exp(2*ae);return(To-1)/(To+1)},Math.asinh=Math.asinh||function(ae){return ae===-1/0?ae:Math.log(ae+Math.sqrt(ae*ae+1))},Math.acosh=Math.acosh||function(ae){return Math.log(ae+Math.sqrt(ae*ae-1))},Math.atanh=Math.atanh||function(ae){return Math.log((1+ae)/(1-ae))/2},Math.log10=Math.log10||function(ae){return Math.log(ae)*Math.LOG10E},Math.trunc=Math.trunc||function(ae){return isNaN(ae)?NaN:ae>0?Math.floor(ae):Math.ceil(ae)};function d4(ae,To,wh,ff){var n1=To==="hash",c1=void 0,u1=n1?void 0:To,A1=u1==="decimal"||u1==="decimals";A1&&typeof ff>"u"&&(ff=g.DEFAULT_DECP);function u2(R4){switch(To){case"decimals":case"decimal":return c1=c1||function(k3){return!1},R4.valueOf();case"recurring":c1=c1||function(k3){return k3.indexOf("'")!==-1};var Y3=R4.toString(),D3=/^-?\d+(?:\/\d+)?$/.exec(Y3);if(D3.length===0)return Y3;var h6=D3[0].split("/"),B4=!1,N4=Number(h6[0]);N4<0&&(N4=-N4,B4=!0);var W4=Number(h6[1]);W4||(W4=1);var Q3=Math.floor(N4/W4),m3=10*(N4-Q3*W4);for(Q3=Q3.toString()+".";m3&&m3<W4;)m3*=10,Q3+="0";for(var M4="",p4=[],E3=0;;){if(typeof p4[m3]<"u"){var J4=M4.slice(0,p4[m3]),e6=M4.slice(p4[m3]),X3=Q3+J4+"'"+e6+"'";return(B4?"-":"")+X3.replace("'0'","").replace(/\.$/,"")}var t6=Math.floor(m3/W4),I3=m3-t6*W4;p4[m3]=E3,M4+=t6.toString(),E3+=1,m3=10*I3}case"mixed":c1=c1||function(k3){return k3.indexOf("/")!==-1};var Y3=R4.toString(),D3=/^-?\d+(?:\/\d+)?$/.exec(Y3);if(D3.length===0)return Y3;var h6=D3[0].split("/"),X6=new l(h6[0]),d6=new l(h6[1]);d6.equals(0)&&(d6=new l(1));var b6=X6.divmod(d6),Q3=b6.quotient,p6=b6.remainder,g3=h6[0][0]==="-"||Q3.equals(0)||p6.equals(0)?"":"+";return(Q3.equals(0)?"":Q3.toString())+g3+(p6.equals(0)?"":p6.toString()+"/"+h6[1]);case"scientific":return c1=c1||function(k3){return!1},new f4(R4.valueOf()).toString(g.SCIENTIFIC_MAX_DECIMAL_PLACES);default:return c1=c1||function(k3){return k3.indexOf("/")!==-1},R4.toString()}}if(T1(ae)){var s2="",h2="",K2="",R2=ae.group||wh,V2=ae.value;if(!n1){var e4=u2(ae.multiplier);e4=="-1"&&String(ae.multiplier)==="-1"&&(K2="-",e4="1"),e4!="1"&&(s2=e4);var t4=ae.power?u2(ae.power):"";t4!="1"&&(T1(t4)?h2=d4(t4,u1):h2=t4)}switch(R2){case A:s2="";var v4=ff&&A1?ae.multiplier.toDecimal(ff):u2(ae.multiplier);V2=String(ae.multiplier)=="-1"?"1":v4,h2="";break;case He:V2=ae.collectSymbols().map(function(R4){var B4=d4(R4,u1,wh,ff);return B4=="0"&&(B4=""),B4}).sort().join("+").replace(/\+\-/g,"-");break;case Xe:V2=ae.collectSymbols().map(function(R4){var B4=d4(R4,u1,wh,ff);return B4=="0"&&(B4=""),B4}).sort().join("+").replace(/\+\-/g,"-");break;case De:V2=ae.collectSymbols(function(R4){var B4=R4.group;return(B4===He||B4===Xe)&&R4.power.equals(1)&&R4.multiplier.equals(1)?_1(d4(R4,u1)):d4(R4,u1)}).join("*");break;case me:var w4=ae.previousGroup,T4=ae.power.group;w4===He&&(V2=ae.collectSymbols(d4,u1).join("+").replace("+-","-")),!(w4===A||w4===W||w4===ve)&&!n1&&(V2=_1(V2)),(T4===Xe||T4===De||T4===He||ae.power.multiplier.toString()!="1")&&h2&&(h2=_1(h2));break}if(R2===ve&&(V2=ae.fname+_1(ae.args.map(function(R4){return d4(R4,u1)}).join(","))),R2===ve&&ae.fname in m){var D4=d4(ae.args[0]),C4=d4(ae.args[1]);ae.args[0].isComposite()&&(D4=_1(D4)),ae.args[1].isComposite()&&(C4=_1(C4)),V2=D4+m[ae.fname]+C4}h2&&R2!==me&&c1(h2)&&(h2=_1(h2)),((R2===Xe||R2===He)&&(s2&&s2!="1"||K2==="-")||(R2===De||R2===Xe||R2===He)&&h2&&h2!="1"||!n1&&R2===P&&V2==-1||ae.fname===Rs)&&(V2=_1(V2)),ff&&(To==="decimal"||To==="decimals"&&s2)&&(s2=Q1(s2,ff));var s4=K2+s2;if(s2&&c1(s2)&&(s4=_1(s4)),h2<0&&(h2=_1(h2)),s2&&(s4=s4+"*"),h2){if(V2==="e"&&g.E_TO_EXP)return s4+"exp"+_1(h2);h2=g.POWER_OPERATOR+h2}R2===me&&V2.charAt(0)==="-"&&(V2=_1(V2));var Z4=s4+V2;return ae.parens&&(Z4=_1(Z4)),Z4+h2}else if(b2(ae)){for(var h3=ae.elements.length,s4=[],r3=0;r3<h3;r3++)s4.push(ae.elements[r3].text(To));return"["+s4.join(",")+"]"}else try{return ae.toString()}catch{return""}}function Z2(ae){if(cf(ae))return[ae];for(var To=ae,wh=1,ff=[],n1=2220446049250313e-31;wh<To;){var c1=ae/wh,u1=Math.floor(c1),A1=c1-u1;if(A1<=n1&&wh>1){if(cf(wh)&&(d.indexOf(wh)===-1&&d.push(wh),ff.push(wh)),cf(u1)){ff.push(u1);break}To=u1}wh++}return ff.sort(function(u2,s2){return u2-s2})}Z2(314146179365);function l4(ae){this.symbol=ae}l4.getExpression=function(ae,To){(ae==="last"||!ae)&&(ae=Ko.length),ae==="first"&&(ae=1);var wh=ae-1,ff=Ko[wh],n1=ff&&new l4(ff);return n1},l4.prototype={text:function(ae,To){return To=To||g.EXPRESSION_DECP,ae=ae||"decimals",this.symbol.text_?this.symbol.text_(ae):d4(this.symbol,ae,void 0,To)},latex:function(ae){return this.symbol.latex?this.symbol.latex(ae):g4.latex(this.symbol,ae)},valueOf:function(){return this.symbol.valueOf()},evaluate:function(){if(b2(this.symbol)&&this.symbol.dimensions()===0)return this;var ae=arguments[0],To,wh=1;typeof ae=="string"?To=ae.charAt(0)==="%"?l4.getExpression(ae.substr(1)).text():ae:ae instanceof l4||T1(ae)?To=ae.text():(To=this.symbol.text(),wh--);var ff=arguments[wh]||{},n1=new l4(k1("PARSE2NUMBER",function(){return o.parse(To,ff)},!0));return n1},buildFunction:function(ae){return K3.build(this.symbol,ae)},isNumber:function(){return U1(this.symbol)},isInfinity:function(){return Math.abs(this.symbol.multiplier)===1/0},isImaginary:function(){return Z1(o.parse(this.symbol)).isImaginary()},variables:function(){return W1(this.symbol)},toString:function(){try{return x2(this.symbol)?"["+this.symbol.toString()+"]":this.symbol.toString()}catch{return""}},toDecimal:function(ae){g.precision=ae;var To=d4(this.symbol,"decimals");return g.precision=void 0,To},isFraction:function(){return E1(this.symbol)},isPolynomial:function(){return this.symbol.isPoly()},sub:function(ae,To){return new l4(this.symbol.sub(o.parse(ae),o.parse(To)))},operation:function(ae,To){return z1(To)?To=To.symbol:T1(To)||(To=o.parse(To)),new l4(o[ae](this.symbol.clone(),To.clone()))},add:function(ae){return this.operation("add",ae)},subtract:function(ae){return this.operation("subtract",ae)},multiply:function(ae){return this.operation("multiply",ae)},divide:function(ae){return this.operation("divide",ae)},pow:function(ae){return this.operation("pow",ae)},expand:function(){return new l4(o.expand(this.symbol))},each:function(ae,To){if(this.symbol.each)this.symbol.each(ae,To);else if(x2(this.symbol))for(var To=0;To<this.symbol.length;To++)ae.call(this.symbol,this.symbol[To],To);else ae.call(this.symbol)},eq:function(ae){T1(ae)||(ae=o.parse(ae));try{var To=o.subtract(this.symbol.clone(),ae);return To.equals(0)}catch{return!1}},lt:function(ae){T1(ae)||(ae=o.parse(ae));try{var To=Z1(o.subtract(this.symbol.clone(),ae));return To.lessThan(0)}catch{return!1}},gt:function(ae){T1(ae)||(ae=o.parse(ae));try{var To=Z1(o.subtract(this.symbol.clone(),ae));return To.greaterThan(0)}catch{return!1}},gte:function(ae){return this.gt(ae)||this.eq(ae)},lte:function(ae){return this.lt(ae)||this.eq(ae)},numerator:function(){return new l4(this.symbol.getNum())},denominator:function(){return new l4(this.symbol.getDenom())},hasFunction:function(ae){return this.symbol.containsFunction(ae)},contains:function(ae){return this.symbol.contains(ae)}},l4.prototype.toTeX=l4.prototype.latex;function f4(ae){return this instanceof f4?(ae=String(typeof ae>"u"?0:ae),ae.startsWith("-")?(this.sign=-1,ae=ae.substr(1,ae.length)):this.sign=1,f4.isScientific(ae)?this.fromScientific(ae):this.convert(ae),this):new f4(ae)}f4.prototype={fromScientific:function(ae){var To=String(ae).toLowerCase().split("e");return this.coeff=To[0],this.exponent=To[1],this},convert:function(ae){var To=ae.split("."),wh=To[0]||"",ff=To[1]||"";wh=f4.removeLeadingZeroes(wh),ff=f4.removeTrailingZeroes(ff);var n1=wh.length,c1=wh+ff,u1=f4.leadingZeroes(c1).length;this.exponent=n1-(u1+1);var A1=f4.removeLeadingZeroes(c1);this.coeff=A1.charAt(0)+"."+(A1.substr(1,A1.length)||"0");var u2=this.coeff.split(".")[1]||"";return this.decp=u2==="0"?0:u2.length,this.dec=ff,this.wholes=wh,this},round:function(ae){var To=this.copy();if(ae=Number(ae),ae===0)To.coeff=To.coeff.charAt(0);else{var wh=this.coeff.substring(0,ae+1),ff=this.coeff.substring(ae+1,ae+3),n1=ff.charAt(0);ff.charAt(1)>4&&n1++,To.coeff=wh+n1}return To},copy:function(){var ae=new f4(0);return ae.coeff=this.coeff,ae.exponent=this.exponent,ae.sign=this.sign,ae},toString:function(ae){var To;if(g.SCIENTIFIC_IGNORE_ZERO_EXPONENTS&&this.exponent===0&&this.decp<ae)this.decp===0?To=this.wholes:To=this.coeff;else{var wh=typeof ae>"u"?this.coeff:f4.round(this.coeff,Math.min(ae,this.decp||1));To=this.exponent===0?wh:wh+"e"+this.exponent}return(this.sign===-1?"-":"")+To}},f4.isScientific=function(ae){return/\d+\.?\d*e[\+\-]*\d+/i.test(ae)},f4.leadingZeroes=function(ae){var To=ae.match(/^(0*).*$/);return To?To[1]:""},f4.removeLeadingZeroes=function(ae){var To=ae.match(/^0*(.*)$/);return To?To[1]:""},f4.removeTrailingZeroes=function(ae){var To=ae.match(/0*$/);return To?ae.substring(0,ae.length-To[0].length):""},f4.round=function(ae,To){var wh=Q1(ae,To),ff=String(wh).split(".").pop(),n1=To-ff.length;return n1>0&&(wh=wh+new Array(n1+1).join(0)),wh};function I2(ae){if(ae instanceof I2)return ae;if(ae===void 0)return this;try{if(p1(ae))try{this.num=l(ae),this.den=l(1)}catch{return I2.simple(ae)}else{var To=ae instanceof u?s6.quickConversion(ae):s6.convert(ae);this.num=new l(To[0]),this.den=new l(To[1])}}catch{return I2.simple(ae)}}I2.create=function(ae){if(ae instanceof I2)return ae;ae=ae.toString();var To=ae.charAt(0)==="-";To&&(ae=ae.substr(1,ae.length-1));var wh=new I2(ae);return To&&wh.negate(),wh},I2.isFrac=function(ae){return ae instanceof I2},I2.quick=function(ae,To){var wh=new I2;return wh.num=new l(ae),wh.den=new l(To),wh},I2.simple=function(ae){for(var To=String(Mh(ae)),wh=To.split("."),ff=wh.join(""),n1=1,c1=(wh[1]||"").length,u1=0;u1<c1;u1++)n1+="0";var A1=I2.quick(ff,n1);return A1.simplify()},I2.prototype={multiply:function(ae){if(this.isOne())return ae.clone();if(ae.isOne())return this.clone();var To=this.clone();return To.num=To.num.multiply(ae.num),To.den=To.den.multiply(ae.den),To.simplify()},divide:function(ae){if(ae.equals(0))throw new Ym("Division by zero not allowed!");return this.clone().multiply(ae.clone().invert()).simplify()},subtract:function(ae){return this.clone().add(ae.clone().neg())},neg:function(){return this.num=this.num.multiply(-1),this},add:function(ae){var To=this.den,wh=ae.den,ff=this.clone(),n1=ff.num,c1=ae.num;return To.equals(wh)?ff.num=n1.add(c1):(ff.num=n1.multiply(wh).add(c1.multiply(To)),ff.den=To.multiply(wh)),ff.simplify()},mod:function(ae){var To=this.clone(),wh=ae.clone();return To.num=To.num.multiply(wh.den),To.den=To.den.multiply(wh.den),wh.num=wh.num.multiply(this.den),wh.den=wh.den.multiply(this.den),To.num=To.num.mod(wh.num),To.simplify()},simplify:function(){var ae=l.gcd(this.num,this.den);return this.num=this.num.divide(ae),this.den=this.den.divide(ae),this},clone:function(){var ae=new I2;return ae.num=new l(this.num),ae.den=new l(this.den),ae},decimal:function(ae){var To=this.num.isNegative()?"-":"";if(this.num.equals(this.den))return"1";ae=ae||g.PRECISION,ae++;for(var wh=[],ff=this.num.abs(),n1=this.den,c1=0;c1<ae;c1++){var u1=ff.divide(n1),A1=ff.subtract(u1.multiply(n1));if(wh.push(u1),A1.equals(0))break;ff=A1.times(10)}var u2=wh.shift();if(wh.length===0)return To+u2.toString();if(c1===ae){for(var s2=[],c1=0;c1<2;c1++)s2.unshift(wh.pop());wh.push(Math.round(s2.join(".")))}var h2=u2.toString()+"."+wh.join("");return To+h2},toDecimal:function(ae){return ae=ae||g.PRECISION,ae?this.decimal(ae):this.num/this.den},qcompare:function(ae){return[this.num.multiply(ae.den),ae.num.multiply(this.den)]},equals:function(ae){isNaN(ae)||(ae=new I2(ae));var To=this.qcompare(ae);return To[0].equals(To[1])},absEquals:function(ae){isNaN(ae)||(ae=new I2(ae));var To=this.qcompare(ae);return To[0].abs().equals(To[1])},greaterThan:function(ae){isNaN(ae)||(ae=new I2(ae));var To=this.qcompare(ae);return To[0].gt(To[1])},gte:function(ae){return this.greaterThan(ae)||this.equals(ae)},lte:function(ae){return this.lessThan(ae)||this.equals(ae)},lessThan:function(ae){isNaN(ae)||(ae=new I2(ae));var To=this.qcompare(ae);return To[0].lt(To[1])},isInteger:function(){return this.den.equals(1)},negate:function(){return this.num=this.num.multiply(-1),this},invert:function(){var ae=this.den;if(!this.num.equals(0)){var To=this.num.isNegative();this.den=this.num.abs(),this.num=ae,To&&(this.num=this.num.multiply(-1))}return this},isOne:function(){return this.num.equals(1)&&this.den.equals(1)},sign:function(){return this.num.isNegative()?-1:1},abs:function(){return this.num=this.num.abs(),this},gcd:function(ae){return I2.quick(l.gcd(ae.num,this.num),l.lcm(ae.den,this.den))},toString:function(){return this.den.equals(1)?this.num.toString():this.num.toString()+"/"+this.den.toString()},valueOf:function(){if(g.USE_BIG)return new u(this.num.toString()).div(new u(this.den.toString()));var ae=this.num/this.den;return ae},isNegative:function(){return this.toDecimal()<0}};function h1(ae){var To=ae==="Infinity";return this instanceof h1?(ae instanceof u&&(ae=ae.toString()),/^(\-?\+?\d+)\.?\d*e?\-?\+?\d*/i.test(ae)||ae instanceof u?(this.group=A,this.value=qe,this.multiplier=new I2(ae)):(this.group=W,qc(ae),this.value=ae,this.multiplier=new I2(1),this.imaginary=ae===g.IMAGINARY,this.isInfinity=To),this.power=new I2(1),this):new h1(ae)}h1.imaginary=function(){var ae=new h1(g.IMAGINARY);return ae.imaginary=!0,ae},h1.infinity=function(ae){var To=new h1("Infinity");return ae===-1&&To.negate(),To},h1.shell=function(ae,To){var wh=new h1(To);return wh.group=ae,wh.symbols={},wh.length=0,wh},h1.unwrapSQRT=function(ae,To){var wh=ae.power;if(ae.fname===Vc&&(ae.isLinear()||To)){var ff=ae.args[0].clone();ff.power=ff.power.multiply(new I2(.5)),ff.multiplier=ff.multiplier.multiply(ae.multiplier),ae=ff,To&&(ae.power=wh.multiply(new I2(.5)))}return ae},h1.hyp=function(ae,To){return ae=ae||new h1(0),To=To||new h1(0),o.sqrt(o.add(o.pow(ae.clone(),new h1(2)),o.pow(To.clone(),new h1(2))))},h1.toPolarFormArray=function(ae){var To,wh,ff,n1;return To=ae.realpart(),wh=ae.imagpart(),ff=h1.hyp(To,wh),n1=To.equals(0)?o.parse("pi/2"):o.trig.atan(o.divide(wh,To)),[ff,n1]},h1.unwrapPARENS=function(ae){if(ae.fname===""){var To=ae.args[0];return To.power=To.power.multiply(ae.power),To.multiplier=To.multiplier.multiply(ae.multiplier),ae.fname===""?h1.unwrapPARENS(To):To}return ae},h1.create=function(ae,To){return To=To===void 0?1:To,o.parse("("+ae+")^("+To+")")},h1.prototype={getNth:function(ae){var To=Z1(o.pow(o.parse(this.multiplier),o.parse(ae).invert())),wh=o.parse(Q1(To)),ff=Z1(o.pow(wh,o.parse(ae)));return ff.equals(o.parse(this.multiplier))?wh:To},isToNth:function(ae){var To=this.getNth(ae),wh=p1(To),ff;return this.group===De?(ff=!0,this.each(function(n1){var c1=n1.isToNth(ae);c1||(ff=!1)})):ff=this.group===A?!0:p1(o.divide(o.parse(this.power),o.parse(ae))),wh&&ff},isSquare:function(){return this.isToNth(2)},isCube:function(){return this.isToNth(3)},isSimple:function(){return this.power.equals(1)&&this.multiplier.equals(1)},powSimp:function(){if(this.group===De){var ae=[],wh=this.multiplier.sign();this.each(function(K2){var R2=K2.power;if(T1(R2)||R2.equals(1))return this.clone();ae.push(R2)});var To=new I2(N1(ae)),wh=this.multiplier.sign(),ff=this.multiplier.clone().abs(),n1=B2.ifactor(ff),c1=new I2(1),u1=new I2(1);for(var A1 in n1){var u2=new I2(n1[A1]);u2.lessThan(To)||(u2=u2.divide(To).subtract(new I2(1)),u1=u1.multiply(new I2(A1))),c1=c1.multiply(o.parse(_1(A1)+"^"+_1(u2)).multiplier)}var s2=new h1(u1);this.each(function(K2){K2=K2.clone(),K2.power=K2.power.divide(To),s2=o.multiply(s2,K2)});var h2=o.symfunction(Rs,[s2]);return h2.power=To,h2.multiplier=wh<0?c1.negate():c1,h2}return this.clone()},equals:function(ae){return T1(ae)||(ae=new h1(ae)),this.value===ae.value&&this.power.equals(ae.power)&&this.multiplier.equals(ae.multiplier)&&this.group===ae.group},abs:function(){var ae=this.clone();return ae.multiplier.abs(),ae},gt:function(ae){return T1(ae)||(ae=new h1(ae)),this.isConstant()&&ae.isConstant()&&this.multiplier.greaterThan(ae.multiplier)},gte:function(ae){return T1(ae)||(ae=new h1(ae)),this.equals(ae)||this.isConstant()&&ae.isConstant()&&this.multiplier.greaterThan(ae.multiplier)},lt:function(ae){return T1(ae)||(ae=new h1(ae)),this.isConstant()&&ae.isConstant()&&this.multiplier.lessThan(ae.multiplier)},lte:function(ae){return T1(ae)||(ae=new h1(ae)),this.equals(ae)||this.isConstant()&&ae.isConstant()&&this.multiplier.lessThan(ae.multiplier)},isPoly:function(ae){var To=this.group,wh=this.power;if(!p1(wh)||wh<0)return!1;if(To===A||To===W||this.isConstant(!0))return!0;var ff=W1(this);if(To===De&&ff.length===1){var n1=ff[0];if(!n1)return!0;for(var c1 in this.symbols){var u1=this.symbols[c1];if(u1.group===ve&&!u1.args[0].isConstant()||!u1.contains(n1)&&!u1.isConstant(!0))return!1}return!0}if(this.isComposite()||To===De&&ae){if(!ae&&ff.length>1)return!1;for(var c1 in this.symbols)if(!this.symbols[c1].isPoly(ae))return!1;return!0}else return!1},stripVar:function(ae,To){var wh;return(this.group===He||this.group===W)&&this.value===ae?wh=new h1(To?0:this.multiplier):this.group===De&&this.isLinear()?(wh=new h1(1),this.each(function(ff){ff.contains(ae,!0)||(wh=o.multiply(wh,ff.clone()))}),wh.multiplier=wh.multiplier.multiply(this.multiplier)):this.group===Xe&&!this.isLinear()?wh=new h1(this.multiplier):this.group===Xe&&this.isLinear()?(wh=new h1(0),this.each(function(ff){if(!ff.contains(ae)){var n1=ff.clone();n1.multiplier=n1.multiplier.multiply(this.multiplier),wh=o.add(wh,n1)}}),wh.equals(0)&&(wh=new h1(this.multiplier))):this.group===me&&this.power.contains(ae,!0)?wh=new h1(this.multiplier):this.group===ve&&this.contains(ae)?wh=new h1(this.multiplier):wh=this.clone(),wh},toArray:function(ae,To){To=To||{arr:[],add:function(A1,u2){var s2=this.arr[u2];this.arr[u2]=s2?o.add(s2,A1):A1}};var wh=this.group;if(wh===W&&this.contains(ae))To.add(new h1(this.multiplier),this.power);else if(wh===De){var ff=this.stripVar(ae),n1=o.divide(this.clone(),ff.clone()),c1=n1.isConstant()?0:n1.power;To.add(ff,c1)}else if(wh===He&&this.value===ae)this.each(function(A1,u2){To.add(A1.stripVar(ae),u2)});else if(wh===Xe)this.each(function(A1){A1.toArray(ae,To)});else{if(this.contains(ae))throw new M1("Cannot convert to array! Exiting");To.add(this.clone(),0)}To=To.arr;for(var u1=0;u1<To.length;u1++)To[u1]||(To[u1]=new h1(0));return To},hasFunc:function(ae){var To=this.group===ve||this.group===me;if(To&&!ae||To&&this.contains(ae))return!0;if(this.symbols){for(var wh in this.symbols)if(this.symbols[wh].hasFunc(ae))return!0}return!1},sub:function(ae,To){ae=T1(ae)?ae.clone():o.parse(ae),To=T1(To)?To.clone():o.parse(To),(ae.group===A||ae.group===P)&&Bs("Cannot substitute a number. Must be a variable");var wh=!1,ff=ae.multiplier.equals(1),n1=this.multiplier.clone(),c1;if(this.value===ae.value&&(this.group!==He&&ae.group!==He||this.group===He&&ae.group===He))(ff||ae.multiplier.equals(this.multiplier))&&(ae.isLinear()?c1=To:ae.power.equals(this.power)&&(c1=To,wh=!0),ae.multiplier.equals(this.multiplier)&&(n1=new I2(1)));else if(this.group===De||this.previousGroup===De)c1=new h1(1),this.each(function(V2){var e4=o.parse(V2.sub(ae,To));c1=o.multiply(c1,e4)});else if(this.isComposite()){var u1=this.clone();if(ae.isComposite()&&u1.isComposite()&&u1.isLinear()&&ae.isLinear()){var A1=function(V2,e4){for(var t4 in V2.symbols){var v4=V2.symbols[t4];if(v4.isComposite()&&A1(v4,e4)||v4.equals(e4))return!0}return!1};for(var u2 in ae.symbols)if(!A1(u1,ae.symbols[u2]))return u1.clone();c1=o.add(o.subtract(u1.clone(),ae),To)}else c1=new h1(0),u1.each(function(V2){c1=o.add(c1,V2.sub(ae,To))})}else if(this.group===me)c1=o.parse(this.value).sub(ae,To);else if(this.group===ve){for(var s2=[],h2=0;h2<this.args.length;h2++){var K2=this.args[h2];T1(K2)||(K2=o.parse(K2)),s2.push(K2.sub(ae,To))}c1=o.symfunction(this.fname,s2)}if(c1){if(!wh){var R2=this.group===me?this.power.sub(ae,To):o.parse(this.power);c1=o.pow(c1,R2)}return c1.multiplier=c1.multiplier.multiply(n1),c1}return this.clone()},isMonomial:function(){if(this.group===W)return!0;if(this.group===De){for(var ae in this.symbols)if(this.symbols[ae].group!==W)return!1}else return!1;return!0},isPi:function(){return this.group===W&&this.value==="pi"},sign:function(){return this.multiplier.sign()},isE:function(){return this.value==="e"},isSQRT:function(){return this.fname===Vc},isConstant:function(ae,To){if(To&&this.group===De){for(var wh in this.symbols)if(this.symbols[wh].isConstant(!0))return!0}if(ae==="functions"&&this.isComposite()){var ff=!0;return this.each(function(c1){c1.isConstant(ae,To)||(ff=!1)},!0),ff}if(ae==="all"&&(this.isPi()||this.isE()))return!0;if(ae&&this.group===ve){for(var n1=0;n1<this.args.length;n1++)if(!this.args[n1].isConstant(ae))return!1;return!0}return ae?U1(this):this.value===qe},isImaginary:function(){if(this.imaginary)return!0;if(this.symbols){for(var ae in this.symbols)if(this.symbols[ae].isImaginary())return!0}return!1},realpart:function(){if(this.isConstant())return this.clone();if(this.imaginary)return new h1(0);if(this.isComposite()){var ae=new h1(0);return this.each(function(To){ae=o.add(ae,To.realpart())}),ae}else if(this.isImaginary())return new h1(0);return this.clone()},imagpart:function(){if(this.group===W&&this.isImaginary())return new h1(this.multiplier);if(this.isComposite()){var ae=new h1(0);return this.each(function(To){ae=o.add(ae,To.imagpart())}),ae}return this.group===De?this.stripVar(g.IMAGINARY):new h1(0)},isInteger:function(){return this.isConstant()&&this.multiplier.isInteger()},isLinear:function(ae){if(ae){if(this.isConstant())return!0;if(this.group===W)return this.value===ae?this.power.equals(1):!0;if(this.isComposite()&&this.power.equals(1)){for(var To in this.symbols)if(!this.symbols[To].isLinear(ae))return!1;return!0}return this.group===De&&this.symbols[ae]?this.symbols[ae].isLinear(ae):!1}else return this.power.equals(1)},containsFunction:function(ae){if(typeof ae=="string"&&(ae=[ae]),this.group===ve&&ae.indexOf(this.fname)!==-1)return!0;if(this.symbols){for(var To in this.symbols)if(this.symbols[To].containsFunction(ae))return!0}return!1},multiplyPower:function(ae){if(this.group===A&&this.multiplier.equals(1))return this;var To=this.power;if(this.group!==me&&ae.group===A){var wh=ae.multiplier;this.group===A&&!wh.isInteger()&&this.convert(P),this.power=To.equals(1)?wh.clone():To.multiply(wh),this.group===P&&p1(this.power)&&(this.value=Math.pow(this.value,this.power),this.toLinear(),this.convert(A))}else this.group!==me&&(To=new h1(To),this.convert(me)),this.power=o.multiply(To,ae);return this},setPower:function(ae,To){if(this.group===A&&this.multiplier.equals(1))return this;if(this.group===me&&!T1(ae))this.group=this.previousGroup,delete this.previousGroup,this.group===A?(this.multiplier=new I2(this.value),this.value=qe):this.power=ae;else{var wh=!1;T1(ae)&&(ae.group===A?ae=ae.multiplier:wh=!0);var ff=wh?me:P;this.power=ae,this.group===A&&ff&&this.convert(ff,To)}return this},isInverse:function(){return this.group===me?this.power.multiplier.lessThan(0):this.power<0},clone:function(ae){var To=ae||new h1(0),wh=["value","group","length","previousGroup","imaginary","fname","args","isInfinity","scientific"],ff=wh.length,n1;if(this.symbols){To.symbols={};for(var c1 in this.symbols)To.symbols[c1]=this.symbols[c1].clone()}for(n1=0;n1<ff;n1++)this[wh[n1]]!==void 0&&(To[wh[n1]]=this[wh[n1]]);return To.power=this.power.clone(),To.multiplier=this.multiplier.clone(),this.isConversion&&(To.isConversion=this.isConversion),this.isUnit&&(To.isUnit=this.isUnit),To},toUnitMultiplier:function(ae){return this.multiplier.num=new l(this.multiplier.num.isNegative()&&ae?-1:1),this.multiplier.den=new l(1),this},toLinear:function(){return this.power.equals(1)?this:(this.setPower(new I2(1)),this)},each:function(ae,To){if(!this.symbols)ae.call(this,this,this.value);else for(var wh in this.symbols){var ff=this.symbols[wh];if(ff.group===He&&To)for(var n1 in ff.symbols)ae.call(wh,ff.symbols[n1],n1);else ae.call(this,ff,wh)}},valueOf:function(){return this.group===A?this.multiplier.valueOf():this.power===0?1:this.multiplier===0?0:d4(this,"decimals")},contains:function(ae,To){ae=String(ae);var wh=this.group;if(this.value===ae)return!0;if(this.symbols){for(var ff in this.symbols)if(this.symbols[ff].contains(ae,To))return!0}if(wh===ve||this.previousGroup===ve){for(var n1=0;n1<this.args.length;n1++)if(this.args[n1].contains(ae,To))return!0}return wh===me&&(To&&this.power.contains(ae,To)||this.value===ae)?!0:this.value===ae},negate:function(){return this.multiplier.negate(),(this.group===Xe||this.group===He)&&this.distributeMultiplier(),this},invert:function(ae,To){return ae||(this.multiplier=this.multiplier.invert()),T1(this.power)?this.power.negate():this.group===De&&To?this.each(function(wh){return wh.invert()}):this.power&&this.group!==A&&this.power.negate(),this},distributeMultiplier:function(ae){var To=ae?this.power.absEquals(1):this.power.equals(1);if(this.symbols&&To&&this.group!==De&&!this.multiplier.equals(1)){for(var wh in this.symbols){var ff=this.symbols[wh];ff.multiplier=ff.multiplier.multiply(this.multiplier),ff.distributeMultiplier()}this.toUnitMultiplier()}return this},distributeExponent:function(){if(!this.power.equals(1)){var ae=this.power;for(var To in this.symbols){var wh=this.symbols[To];wh.group===me?wh.power=o.multiply(wh.power,new h1(ae)):this.symbols[To].power=this.symbols[To].power.multiply(ae)}this.toLinear()}return this},convert:function(ae,To){if(ae>ve){var wh=this.clone();this.symbols={},ae===De?wh.toUnitMultiplier():this.toUnitMultiplier(),this.group===ve&&(wh.args=this.args,delete this.args,delete this.fname),this.isImgSymbol&&delete this.isImgSymbol,this.toLinear(),this.symbols[wh.keyForGroup(ae)]=wh,this.group=ae,this.length=1}else if(ae===me)this.group===A&&this.multiplier.equals(1)||(this.group!==me&&(this.previousGroup=this.group),this.group===A?(this.value=this.multiplier.num.toString(),this.toUnitMultiplier()):this.value=d4(this,"hash"),this.group=me);else if(ae===A){var ff=this.multiplier.toDecimal();this.symbols&&(this.symbols=void 0),new h1(this.group===P?ff*Math.pow(this.value,this.power):ff).clone(this)}else ae===P&&this.group===A&&(this.value=To?this.multiplier.num.toString():Math.abs(this.multiplier.num.toString()),this.toUnitMultiplier(!To),this.group=P);return this},insert:function(ae,To){if(T1(ae)||Bs("Object "+ae+" is not of type Symbol!"),this.symbols){var wh=this.group;if(wh>ve){var ff=ae.keyForGroup(wh),n1=ff in this.symbols?this.symbols[ff]:!1;if(To==="add"){var c1=ff;n1?(this.symbols[c1]=o.add(n1,ae),this.symbols[c1].multiplier.equals(0)&&(delete this.symbols[c1],this.length--,this.length===0&&(this.convert(A),this.multiplier=new I2(0)))):(this.symbols[ff]=ae,this.length++)}else ae.group===P&&p1(ae.power)&&ae.convert(A),ae.group!==me?(this.multiplier=this.multiplier.multiply(ae.multiplier),ae.toUnitMultiplier()):(ae.parens=ae.multiplier.lessThan(0),this.multiplier=this.multiplier.multiply(ae.multiplier.clone().abs()),ae.toUnitMultiplier(!0)),n1&&(ae=o.multiply(b1(this.symbols,ff),ae),ae.isConstant()&&(this.multiplier=this.multiplier.multiply(ae.multiplier),ae=new h1(1)),this.length--),ae.isOne(!0)?ae.multiplier.lessThan(0)&&this.negate():(this.symbols[ff]=ae,this.length++);this.length===0&&this.convert(A),(this.group===Xe||this.group===De)&&this.updateHash()}}return this},attach:function(ae){if(x2(ae)){for(var To=0;To<ae.length;To++)this.insert(ae[To],"add");return this}return this.insert(ae,"add")},combine:function(ae){if(x2(ae)){for(var To=0;To<ae.length;To++)this.insert(ae[To],"multiply");return this}return this.insert(ae,"multiply")},updateHash:function(){if(this.group!==A)if(this.group===ve){for(var ae="",To=this.args,wh=this.fname===Rs,ff=0;ff<To.length;ff++)ae+=(ff===0?"":",")+d4(To[ff]);var n1=wh?"":this.fname;this.value=n1+(wh?ae:_1(ae))}else this.group===W||this.group===He||(this.value=d4(this,"hash"))},keyForGroup:function(ae){var To=this.group,wh;if(To===A)wh=this.value;else if(To===W||To===P)ae===He?wh=this.power.toDecimal():wh=this.value;else if(To===ve)ae===He?wh=this.power.toDecimal():wh=d4(this,"hash");else{if(To===He)return ae===De?wh=d4(this,"hash"):ae===Xe?this.power.equals(1)?wh=this.value:wh=_1(d4(this,"hash"))+g.POWER_OPERATOR+this.power.toDecimal():ae===He?wh=this.power.toString():wh=this.value,wh;To===Xe?(ae===Xe&&(wh=d4(this,"hash")),ae===He?wh=this.power.toDecimal():wh=this.value):To===De?ae===He?wh=this.power.toDecimal():wh=d4(this,"hash"):To===me&&(ae===He?wh=d4(this.power):wh=d4(this,"hash"))}return wh},collectSymbols:function(ae,To,wh,ff){var n1=[];if(!this.symbols)n1.push(this);else for(var c1 in this.symbols){var u1=this.symbols[c1];ff&&(u1.group===He||u1.group===Xe)?n1=n1.concat(u1.collectSymbols()):n1.push(ae?ae(u1,To):u1)}return wh===null&&(wh=void 0),n1.sort(wh)},latex:function(ae){return g4.latex(this,ae)},text:function(ae){return d4(this,ae)},isOne:function(ae){var To=ae?"absEquals":"equals";return this.group===A?this.multiplier[To](1):this.power.equals(0)},isComposite:function(){var ae=this.group,To=this.previousGroup;return ae===Xe||ae===He||To===He||To===Xe},isCombination:function(){var ae=this.group,To=this.previousGroup;return ae===De||To===De},lessThan:function(ae){return this.multiplier.lessThan(ae)},greaterThan:function(ae){return T1(ae)||(ae=new h1(ae)),!this.isConstant(!0)||!ae.isConstant(!0)?!1:this.multiplier.greaterThan(ae.multiplier)},getDenom:function(){var ae,To;if(To=this.clone(),this.group===De&&this.power.lessThan(0)&&(To=o.expand(To)),To.power.lessThan(0)||To.group===me&&To.power.multiplier.lessThan(0)){var wh=o.parse(To.multiplier.den);ae=To.toUnitMultiplier(),ae.power.negate(),ae=o.multiply(wh,ae)}else if(To.group===De){ae=o.parse(To.multiplier.den);for(var ff in To.symbols){var n1=To.symbols[ff];(n1.power<0||n1.group===me&&n1.power.multiplier.lessThan(0))&&(ae=o.multiply(ae,To.symbols[ff].clone().invert()))}}else ae=o.parse(To.multiplier.den);return ae},getNum:function(){var ae,To;return To=this.clone(),To.group===De&&To.power.lessThan(0)&&(To=o.expand(To)),To.power.greaterThan(0)&&To.group!==De||To.group===me&&To.power.multiplier.greaterThan(0)?ae=o.multiply(o.parse(To.multiplier.num),To.toUnitMultiplier()):To.group===De?(ae=o.parse(To.multiplier.num),To.each(function(wh){(wh.power>0||wh.group===me&&wh.power.multiplier>0)&&(ae=o.multiply(ae,wh.clone()))})):ae=o.parse(To.multiplier.num),ae},toString:function(){return this.text()}};function H4(){var ae=this,To={},wh={names:[],actions:[]};function ff(sr,Hc){this.start=sr,this.end=Hc}ff.prototype.isConstant=function(){return this.start.isConstant()&&this.end.isConstant()},ff.prototype.text=function(){return d4(this.start)+":"+d4(this.end)};function n1(){this.elements=[]}n1.prototype.append=function(sr){this.elements.push(sr)},n1.prototype.getItems=function(){return this.elements},n1.prototype.toString=function(){return ae.pretty_print(this.elements)},n1.create=function(sr){var Hc=new n1;return sr&&Hc.append(sr),Hc};function c1(sr,Hc,l1){if(this.type=Hc,this.value=sr,l1!==void 0&&(this.column=l1+1),Hc===c1.OPERATOR){var m1=s2[sr];for(var P1 in m1)this[P1]=m1[P1]}else Hc===c1.FUNCTION&&(this.precedence=c1.MAX_PRECEDENCE,this.leftAssoc=!1)}c1.prototype.toString=function(){return this.value},c1.prototype.toString=function(){return this.is_prefix?"`"+this.value:this.value},c1.OPERATOR="OPERATOR",c1.VARIABLE_OR_LITERAL="VARIABLE_OR_LITERAL",c1.FUNCTION="FUNCTION",c1.UNIT="UNIT",c1.KEYWORD="KEYWORD",c1.MAX_PRECEDENCE=999,this.classes={Collection:n1,Slice:ff,Token:c1};var u1={prec:void 0,cos:function(sr,Hc){var l1,m1;return l1=ae.parse(Math.cos(sr)*Math.cosh(Hc)),m1=ae.parse(Math.sin(sr)*Math.sinh(Hc)),ae.subtract(l1,ae.multiply(m1,h1.imaginary()))},sin:function(sr,Hc){var l1,m1;return l1=ae.parse(Math.sin(sr)*Math.cosh(Hc)),m1=ae.parse(Math.cos(sr)*Math.sinh(Hc)),ae.subtract(l1,ae.multiply(m1,h1.imaginary()))},tan:function(sr,Hc){var l1,m1;return l1=ae.parse(Math.sin(2*sr)/(Math.cos(2*sr)+Math.cosh(2*Hc))),m1=ae.parse(Math.sinh(2*Hc)/(Math.cos(2*sr)+Math.cosh(2*Hc))),ae.add(l1,ae.multiply(m1,h1.imaginary()))},sec:function(sr,Hc){var l1=this.removeDen(this.cos(sr,Hc));return ae.subtract(l1[0],ae.multiply(l1[1],h1.imaginary()))},csc:function(sr,Hc){var l1=this.removeDen(this.sin(sr,Hc));return ae.add(l1[0],ae.multiply(l1[1],h1.imaginary()))},cot:function(sr,Hc){var l1=this.removeDen(this.tan(sr,Hc));return ae.subtract(l1[0],ae.multiply(l1[1],h1.imaginary()))},acos:function(sr,Hc){var l1,m1,P1,$1,t2,g2;return l1=this.fromArray([sr,Hc]),g2=ae.pow(l1.clone(),new h1(2)),m1=ae.expand(g2),P1=ae.multiply(M4(ae.subtract(new h1(1),m1)),h1.imaginary()),$1=ae.expand(ae.add(l1.clone(),P1)),t2=g3($1),ae.expand(ae.multiply(h1.imaginary().negate(),t2))},asin:function(sr,Hc){return ae.subtract(ae.parse("pi/2"),this.acos(sr,Hc))},atan:function(sr,Hc){if(sr.equals(0)&&(Hc.equals(1)||Hc.equals(-1)))return ae.parse(`${h1.infinity()}*${g.IMAGINARY}*${Hc}`);var l1,m1,P1,$1;return $1=u1.fromArray([sr,Hc]),l1=ae.expand(ae.multiply(h1.imaginary(),$1.clone())),m1=g3(ae.expand(ae.subtract(new h1(1),l1.clone()))),P1=g3(ae.expand(ae.add(new h1(1),l1.clone()))),ae.expand(ae.multiply(ae.divide(h1.imaginary(),new h1(2)),ae.subtract(m1,P1)))},asec:function(sr,Hc){var l1=this.removeDen([sr,Hc]);return l1[1].negate(),this.acos.apply(this,l1)},acsc:function(sr,Hc){var l1=this.removeDen([sr,Hc]);return l1[1].negate(),this.asin.apply(this,l1)},acot:function(sr,Hc){var l1=this.removeDen([sr,Hc]);return l1[1].negate(),this.atan.apply(this,l1)},cosh:function(sr,Hc){var l1,m1;return l1=ae.parse(Math.cosh(sr)*Math.cos(Hc)),m1=ae.parse(Math.sinh(sr)*Math.sin(Hc)),ae.add(l1,ae.multiply(m1,h1.imaginary()))},sinh:function(sr,Hc){var l1,m1;return l1=ae.parse(Math.sinh(sr)*Math.cos(Hc)),m1=ae.parse(Math.cosh(sr)*Math.sin(Hc)),ae.add(l1,ae.multiply(m1,h1.imaginary()))},tanh:function(sr,Hc){var l1,m1;return l1=ae.parse(Math.sinh(2*sr)/(Math.cos(2*Hc)+Math.cosh(2*sr))),m1=ae.parse(Math.sin(2*Hc)/(Math.cos(2*Hc)+Math.cosh(2*sr))),ae.subtract(l1,ae.multiply(m1,h1.imaginary()))},sech:function(sr,Hc){var l1=this.removeDen(this.cosh(sr,Hc));return ae.subtract(l1[0],ae.multiply(l1[1],h1.imaginary()))},csch:function(sr,Hc){var l1=this.removeDen(this.sinh(sr,Hc));return ae.subtract(l1[0],ae.multiply(l1[1],h1.imaginary()))},coth:function(sr,Hc){var l1=this.removeDen(this.tanh(sr,Hc));return ae.add(l1[0],ae.multiply(l1[1],h1.imaginary()))},acosh:function(sr,Hc){var l1,m1,P1;return P1=this.fromArray([sr,Hc]),l1=M4(ae.add(P1.clone(),new h1(1))),m1=M4(ae.subtract(P1.clone(),new h1(1))),ae.expand(g3(ae.add(P1,ae.expand(ae.multiply(l1,m1)))))},asinh:function(sr,Hc){var l1,m1;return m1=this.fromArray([sr,Hc]),l1=M4(ae.add(new h1(1),ae.expand(ae.pow(m1.clone(),new h1(2))))),ae.expand(g3(ae.add(m1,l1)))},atanh:function(sr,Hc){var l1,m1,P1;return P1=this.fromArray([sr,Hc]),l1=g3(ae.add(P1.clone(),new h1(1))),m1=g3(ae.subtract(new h1(1),P1)),ae.expand(ae.divide(ae.subtract(l1,m1),new h1(2)))},asech:function(sr,Hc){var l1=this.removeDen([sr,Hc]);return l1[1].negate(),this.acosh.apply(this,l1)},acsch:function(sr,Hc){var l1=this.removeDen([sr,Hc]);return l1[1].negate(),this.asinh.apply(this,l1)},acoth:function(sr,Hc){var l1=this.removeDen([sr,Hc]);return l1[1].negate(),this.atanh.apply(this,l1)},sqrt:function(sr){var Hc,l1,m1,P1,$1;return Hc=sr.realpart(),l1=sr.imagpart(),m1=h1.hyp(Hc,l1),P1=ae.add(Hc.clone(),m1),$1=M4(ae.multiply(new h1(2),P1.clone())),ae.add(ae.divide(P1.clone(),$1.clone()),ae.multiply(ae.divide(l1,$1),h1.imaginary()))},log:function(sr,Hc){var l1,m1,P1;return l1=g3(h1.hyp(sr,Hc)),P1=g.USE_BIG?h1(u.atan2(Hc.multiplier.toDecimal(),sr.multiplier.toDecimal())):Math.atan2(Hc,sr),m1=ae.parse(P1),ae.add(l1,ae.multiply(h1.imaginary(),m1))},erf(sr,Hc){return ae.symfunction("erf",[sr])},removeDen:function(sr){var Hc,l1,m1,P1,$1;return x2(sr)?(l1=sr[0],m1=sr[1]):(l1=sr.realpart(),m1=sr.imagpart()),Hc=Math.pow(l1,2)+Math.pow(m1,2),P1=ae.parse(l1/Hc),$1=ae.parse(m1/Hc),[P1,$1]},fromArray:function(sr){return ae.add(sr[0],ae.multiply(h1.imaginary(),sr[1]))},evaluate:function(sr,Hc){var l1,m1,P1;if(P1=sr.power.sign(),sr.power=sr.power.abs(),sr.power.greaterThan(1)&&(sr=ae.expand(sr)),P1<0){var $1=this.removeDen(sr);l1=$1[0],m1=$1[1]}else l1=sr.realpart(),m1=sr.imagpart();return l1.isConstant("all")&&m1.isConstant("all")?this[Hc].call(this,l1,m1):ae.symfunction(Hc,[sr])}},A1=this.trig={cos:function(sr){if(sr.equals("pi")&&sr.multiplier.den.equals(2))return new h1(0);if(g.PARSE2NUMBER){if(sr.equals(new h1(g.PI/2)))return new h1(0);if(sr.isConstant())return g.USE_BIG?new h1(u.cos(sr.multiplier.toDecimal())):new h1(Math.cos(sr.valueOf()));if(sr.isImaginary())return u1.evaluate(sr,"cos")}if(sr.equals(0))return new h1(1);var Hc,l1=!1,m1=_6(sr.multiplier.toDecimal()),P1=sr.multiplier.abs();if(sr.multiplier=P1,sr.isPi()&&sr.isLinear())if(p1(P1))Hc=new h1(v2(P1)?1:-1);else{Number(P1.num);var $1=Number(P1.den);$1===2?Hc=new h1(0):$1===3?(Hc=ae.parse("1/2"),l1=!0):$1===4?(Hc=ae.parse("1/sqrt(2)"),l1=!0):$1===6?(Hc=ae.parse("sqrt(3)/2"),l1=!0):Hc=ae.symfunction("cos",[sr])}return l1&&(m1===2||m1===3)&&Hc.negate(),Hc||(Hc=ae.symfunction("cos",[sr])),Hc},sin:function(sr){if(g.PARSE2NUMBER){if(sr.isConstant())return sr%Math.PI===0?new h1(0):g.USE_BIG?new h1(u.sin(sr.multiplier.toDecimal())):new h1(Math.sin(sr.valueOf()));if(sr.isImaginary())return u1.evaluate(sr,"sin")}if(sr.equals(0))return new h1(0);var Hc,l1=!1,m1=_6(sr.multiplier.toDecimal()),P1=sr.multiplier.sign(),$1=sr.multiplier.abs();if(sr.multiplier=$1,sr.equals("pi"))Hc=new h1(0);else if(sr.isPi()&&sr.isLinear())if(p1($1))Hc=new h1(0);else{$1.num;var t2=$1.den;t2==2?(Hc=new h1(1),l1=!0):t2==3?(Hc=ae.parse("sqrt(3)/2"),l1=!0):t2==4?(Hc=ae.parse("1/sqrt(2)"),l1=!0):t2==6?(Hc=ae.parse("1/2"),l1=!0):Hc=ae.multiply(new h1(P1),ae.symfunction("sin",[sr]))}return Hc||(Hc=ae.multiply(new h1(P1),ae.symfunction("sin",[sr]))),l1&&(m1===3||m1===4)&&Hc.negate(),Hc},tan:function(sr){if(g.PARSE2NUMBER){if(sr%Math.PI===0&&sr.isLinear())return new h1(0);if(sr.isConstant())return g.USE_BIG?new h1(u.tan(sr.multiplier.toDecimal())):new h1(Math.tan(sr.valueOf()));if(sr.isImaginary())return u1.evaluate(sr,"tan")}var Hc,l1=!1,m1=_6(sr.multiplier.toDecimal()),P1=sr.multiplier;if(sr.multiplier=P1,sr.isPi()&&sr.isLinear())if(p1(P1))Hc=new h1(0);else{P1.num;var $1=P1.den;if($1==2)throw new r1("tan is undefined for "+sr.toString());$1==3?(Hc=ae.parse("sqrt(3)"),l1=!0):$1==4?(Hc=new h1(1),l1=!0):$1==6?(Hc=ae.parse("1/sqrt(3)"),l1=!0):Hc=ae.symfunction("tan",[sr])}return Hc||(Hc=ae.symfunction("tan",[sr])),l1&&(m1===2||m1===4)&&Hc.negate(),Hc},sec:function(sr){if(g.PARSE2NUMBER)return sr.isConstant()?g.USE_BIG?new h1(new u(1).dividedBy(u.cos(sr.multiplier.toDecimal()))):new h1(B2.sec(sr.valueOf())):sr.isImaginary()?u1.evaluate(sr,"sec"):ae.parse(x1("1/cos({0})",sr));var Hc,l1=!1,m1=_6(sr.multiplier.toDecimal()),P1=sr.multiplier.abs();if(sr.multiplier=P1,sr.isPi()&&sr.isLinear())if(p1(P1))Hc=new h1(v2(P1)?1:-1);else{P1.num;var $1=P1.den;if($1==2)throw new r1("sec is undefined for "+sr.toString());$1==3?(Hc=new h1(2),l1=!0):$1==4?(Hc=ae.parse("sqrt(2)"),l1=!0):$1==6?(Hc=ae.parse("2/sqrt(3)"),l1=!0):Hc=ae.symfunction("sec",[sr])}return l1&&(m1===2||m1===3)&&Hc.negate(),Hc||(Hc=ae.symfunction("sec",[sr])),Hc},csc:function(sr){if(g.PARSE2NUMBER)return sr.isConstant()?g.USE_BIG?new h1(new u(1).dividedBy(u.sin(sr.multiplier.toDecimal()))):new h1(B2.csc(sr.valueOf())):sr.isImaginary()?u1.evaluate(sr,"csc"):ae.parse(x1("1/sin({0})",sr));var Hc,l1=!1,m1=_6(sr.multiplier.toDecimal()),P1=sr.multiplier.sign(),$1=sr.multiplier.abs();if(sr.multiplier=$1,sr.isPi()&&sr.isLinear()){if(p1($1))throw new r1("csc is undefined for "+sr.toString());$1.num;var t2=$1.den;t2==2?(Hc=new h1(1),l1=!0):t2==3?(Hc=ae.parse("2/sqrt(3)"),l1=!0):t2==4?(Hc=ae.parse("sqrt(2)"),l1=!0):t2==6?(Hc=new h1(2),l1=!0):Hc=ae.multiply(new h1(P1),ae.symfunction("csc",[sr]))}return Hc||(Hc=ae.multiply(new h1(P1),ae.symfunction("csc",[sr]))),l1&&(m1===3||m1===4)&&Hc.negate(),Hc},cot:function(sr){if(g.PARSE2NUMBER)return sr%(Math.PI/2)===0?new h1(0):sr.isConstant()?g.USE_BIG?new h1(new u(1).dividedBy(u.tan(sr.multiplier.toDecimal()))):new h1(B2.cot(sr.valueOf())):sr.isImaginary()?u1.evaluate(sr,"cot"):ae.parse(x1("1/tan({0})",sr));var Hc,l1=!1,m1=_6(sr.multiplier.toDecimal()),P1=sr.multiplier;if(sr.multiplier=P1,sr.isPi()&&sr.isLinear()){if(p1(P1))throw new r1("cot is undefined for "+sr.toString());P1.num;var $1=P1.den;$1==2?Hc=new h1(0):$1==3?(Hc=ae.parse("1/sqrt(3)"),l1=!0):$1==4?(Hc=new h1(1),l1=!0):$1==6?(Hc=ae.parse("sqrt(3)"),l1=!0):Hc=ae.symfunction("cot",[sr])}return Hc||(Hc=ae.symfunction("cot",[sr])),l1&&(m1===2||m1===4)&&Hc.negate(),Hc},acos:function(sr){if(g.PARSE2NUMBER){if(sr.isConstant()){if(sr.gt(1)||sr.lt(-1)){var Hc=sr.toString();return _3(Z1(`pi/2-asin(${Hc})`))}return g.USE_BIG?new h1(u.acos(sr.multiplier.toDecimal())):new h1(Math.acos(sr.valueOf()))}if(sr.isImaginary())return u1.evaluate(sr,"acos")}return ae.symfunction("acos",arguments)},asin:function(sr){if(g.PARSE2NUMBER){if(sr.isConstant()){if(sr.gt(1)||sr.lt(-1)){var Hc=g.IMAGINARY,l1=sr.multiplier.toDecimal();return _3(Z1(`${Hc}*log(sqrt(1-${l1}^2)-${Hc}*${l1})`))}return g.USE_BIG?new h1(u.asin(sr.multiplier.toDecimal())):new h1(Math.asin(sr.valueOf()))}if(sr.isImaginary())return u1.evaluate(sr,"asin")}return ae.symfunction("asin",arguments)},atan:function(sr){var Hc;if(sr.equals(0))Hc=new h1(0);else{if(g.PARSE2NUMBER)return sr.isConstant()?g.USE_BIG?new h1(u.atan(sr.multiplier.toDecimal())):new h1(Math.atan(sr.valueOf())):sr.isImaginary()?u1.evaluate(sr,"atan"):ae.symfunction("atan",arguments);sr.equals(-1)?Hc=ae.parse("-pi/4"):Hc=ae.symfunction("atan",arguments)}return Hc},asec:function(sr){if(g.PARSE2NUMBER){if(sr.equals(0))throw new g1("Input is out of the domain of sec!");if(sr.isConstant())return A1.acos(sr.invert());if(sr.isImaginary())return u1.evaluate(sr,"asec")}return ae.symfunction("asec",arguments)},acsc:function(sr){if(g.PARSE2NUMBER){if(sr.isConstant())return A1.asin(sr.invert());if(sr.isImaginary())return u1.evaluate(sr,"acsc")}return ae.symfunction("acsc",arguments)},acot:function(sr){if(g.PARSE2NUMBER){if(sr.isConstant())return new ae.add(ae.parse("pi/2"),A1.atan(sr).negate());if(sr.isImaginary())return u1.evaluate(sr,"acot")}return ae.symfunction("acot",arguments)},atan2:function(sr,Hc){if(sr.equals(0)&&Hc.equals(0))throw new r1("atan2 is undefined for 0, 0");return g.PARSE2NUMBER&&sr.isConstant()&&Hc.isConstant()?new h1(Math.atan2(sr,Hc)):ae.symfunction("atan2",arguments)}},u2=this.trigh={cosh:function(sr){if(g.PARSE2NUMBER){if(sr.isConstant())return new h1(Math.cosh(sr.valueOf()));if(sr.isImaginary())return u1.evaluate(sr,"cosh")}return ae.symfunction("cosh",arguments)},sinh:function(sr){if(g.PARSE2NUMBER){if(sr.isConstant())return new h1(Math.sinh(sr.valueOf()));if(sr.isImaginary())return u1.evaluate(sr,"sinh")}return ae.symfunction("sinh",arguments)},tanh:function(sr){if(g.PARSE2NUMBER){if(sr.isConstant())return new h1(Math.tanh(sr.valueOf()));if(sr.isImaginary())return u1.evaluate(sr,"tanh")}return ae.symfunction("tanh",arguments)},sech:function(sr){return g.PARSE2NUMBER?sr.isConstant()?new h1(Math.sech(sr.valueOf())):sr.isImaginary()?u1.evaluate(sr,"sech"):ae.parse(x1("1/cosh({0})",sr)):ae.symfunction("sech",arguments)},csch:function(sr){return g.PARSE2NUMBER?sr.isConstant()?new h1(Math.csch(sr.valueOf())):sr.isImaginary()?u1.evaluate(sr,"csch"):ae.parse(x1("1/sinh({0})",sr)):ae.symfunction("csch",arguments)},coth:function(sr){return g.PARSE2NUMBER?sr.isConstant()?new h1(Math.coth(sr.valueOf())):sr.isImaginary()?u1.evaluate(sr,"coth"):ae.parse(x1("1/tanh({0})",sr)):ae.symfunction("coth",arguments)},acosh:function(sr){var Hc;return g.PARSE2NUMBER&&sr.isImaginary()?Hc=u1.evaluate(sr,"acosh"):g.PARSE2NUMBER?Hc=Z1(ae.parse(x1(g.LOG+"(({0})+sqrt(({0})^2-1))",sr.toString()))):Hc=ae.symfunction("acosh",arguments),Hc},asinh:function(sr){var Hc;return g.PARSE2NUMBER&&sr.isImaginary()?Hc=u1.evaluate(sr,"asinh"):g.PARSE2NUMBER?Hc=Z1(ae.parse(x1(g.LOG+"(({0})+sqrt(({0})^2+1))",sr.toString()))):Hc=ae.symfunction("asinh",arguments),Hc},atanh:function(sr){var Hc;return g.PARSE2NUMBER&&sr.isImaginary()?Hc=u1.evaluate(sr,"atanh"):g.PARSE2NUMBER?Hc=Z1(ae.parse(x1("(1/2)*"+g.LOG+"((1+({0}))/(1-({0})))",sr.toString()))):Hc=ae.symfunction("atanh",arguments),Hc},asech:function(sr){var Hc;return g.PARSE2NUMBER&&sr.isImaginary()?Hc=u1.evaluate(sr,"asech"):g.PARSE2NUMBER?Hc=Z1(g3(ae.add(sr.clone().invert(),M4(ae.subtract(ae.pow(sr,new h1(-2)),new h1(1)))))):Hc=ae.symfunction("asech",arguments),Hc},acsch:function(sr){var Hc;return g.PARSE2NUMBER&&sr.isImaginary()?Hc=u1.evaluate(sr,"acsch"):g.PARSE2NUMBER?Hc=Z1(ae.parse(x1(g.LOG+"((1+sqrt(1+({0})^2))/({0}))",sr.toString()))):Hc=ae.symfunction("acsch",arguments),Hc},acoth:function(sr){var Hc;return g.PARSE2NUMBER&&sr.isImaginary()?Hc=u1.evaluate(sr,"acoth"):g.PARSE2NUMBER?sr.equals(1)?Hc=h1.infinity():Hc=Z1(ae.divide(g3(ae.divide(ae.add(sr.clone(),new h1(1)),ae.subtract(sr.clone(),new h1(1)))),new h1(2))):Hc=ae.symfunction("acoth",arguments),Hc}};this.units={};var s2={"\\":{precedence:8,operator:"\\",action:"slash",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(sr){return sr}},"!!":{precedence:7,operator:"!!",action:"dfactorial",prefix:!1,postfix:!0,leftAssoc:!0,operation:function(sr){return ae.symfunction(g.DOUBLEFACTORIAL,[sr])}},"!":{precedence:7,operator:"!",action:"factorial",prefix:!1,postfix:!0,leftAssoc:!0,operation:function(sr){return C4(sr)}},"^":{precedence:6,operator:"^",action:"pow",prefix:!1,postfix:!1,leftAssoc:!0},"**":{precedence:6,operator:"**",action:"pow",prefix:!1,postfix:!1,leftAssoc:!0},"%":{precedence:4,operator:"%",action:"percent",prefix:!1,postfix:!0,leftAssoc:!0,overloaded:!0,overloadAction:"mod",overloadLeftAssoc:!1,operation:function(sr){return ae.divide(sr,new h1(100))}},"*":{precedence:4,operator:"*",action:"multiply",prefix:!1,postfix:!1,leftAssoc:!1},"/":{precedence:4,operator:"/",action:"divide",prefix:!1,postfix:!1,leftAssoc:!1},"+":{precedence:3,operator:"+",action:"add",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(sr){return sr}},plus:{precedence:3,operator:"plus",action:"add",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(sr){return sr}},"-":{precedence:3,operator:"-",action:"subtract",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(sr){return sr.negate()}},"=":{precedence:2,operator:"=",action:"equals",prefix:!1,postfix:!1,leftAssoc:!1},"==":{precedence:1,operator:"==",action:"eq",prefix:!1,postfix:!1,leftAssoc:!1},"<":{precedence:1,operator:"<",action:"lt",prefix:!1,postfix:!1,leftAssoc:!1},"<=":{precedence:1,operator:"<=",action:"lte",prefix:!1,postfix:!1,leftAssoc:!1},">":{precedence:1,operator:">",action:"gt",prefix:!1,postfix:!1,leftAssoc:!1},"=>":{precedence:1,operator:"=>",action:"gte",prefix:!1,postfix:!1,leftAssoc:!1},",":{precedence:0,operator:",",action:"comma",prefix:!1,postfix:!1,leftAssoc:!1},":":{precedence:0,operator:",",action:"assign",prefix:!1,postfix:!1,leftAssoc:!1,vectorFn:"slice"},":=":{precedence:0,operator:",",action:"function_assign",prefix:!1,postfix:!1,leftAssoc:!0}},h2={"(":{type:"round",id:1,is_open:!0,is_close:!1},")":{type:"round",id:2,is_open:!1,is_close:!0},"[":{type:"square",id:3,is_open:!0,is_close:!1,maps_to:"vector"},"]":{type:"square",id:4,is_open:!1,is_close:!0},"{":{type:"curly",id:5,is_open:!0,is_close:!1,maps_to:"Set"},"}":{type:"curly",id:6,is_open:!1,is_close:!0}},K2=this.functions={cos:[A1.cos,1],sin:[A1.sin,1],tan:[A1.tan,1],sec:[A1.sec,1],csc:[A1.csc,1],cot:[A1.cot,1],acos:[A1.acos,1],asin:[A1.asin,1],atan:[A1.atan,1],arccos:[A1.acos,1],arcsin:[A1.asin,1],arctan:[A1.atan,1],asec:[A1.asec,1],acsc:[A1.acsc,1],acot:[A1.acot,1],atan2:[A1.atan2,2],acoth:[u2.acoth,1],asech:[u2.asech,1],acsch:[u2.acsch,1],sinh:[u2.sinh,1],cosh:[u2.cosh,1],tanh:[u2.tanh,1],asinh:[u2.asinh,1],sech:[u2.sech,1],csch:[u2.csch,1],coth:[u2.coth,1],acosh:[u2.acosh,1],atanh:[u2.atanh,1],log10:[,1],exp:[B4,1],radians:[N4,1],degrees:[W4,1],min:[b6,-1],max:[d6,-1],erf:[,1],floor:[,1],ceil:[,1],trunc:[,1],Si:[,1],step:[,1],rect:[,1],sinc:[R4,1],tri:[,1],sign:[Q3,1],Ci:[,1],Ei:[,1],Shi:[,1],Chi:[,1],Li:[,1],fib:[,1],fact:[C4,1],factorial:[C4,1],continued_fraction:[s4,[1,2]],dfactorial:[,1],gamma_incomplete:[,[1,2]],round:[k3,[1,2]],scientific:[E3,[1,2]],mod:[Z4,2],pfactor:[e6,1],vector:[_v,-1],matrix:[C5,-1],Set:[o6,-1],imatrix:[w6,-1],parens:[T4,-1],sqrt:[M4,1],cbrt:[p4,1],nthroot:[J4,2],log:[g3,[1,2]],expand:[x6,1],abs:[D4,1],invert:[t1,1],determinant:[xv,1],size:[wv,1],transpose:[hf,1],dot:[O6,2],cross:[li,2],vecget:[S3,2],vecset:[E6,3],vectrim:[r6,[1,2]],matget:[e5,3],matset:[bv,4],matgetrow:[J5,2],matsetrow:[Y6,3],matgetcol:[vv,2],matsetcol:[yv,3],rationalize:[m3,1],IF:[h3,3],is_in:[r3,2],realpart:[X3,1],imagpart:[t6,1],conjugate:[I3,1],arg:[Y3,1],polarform:[D3,1],rectform:[h6,1],sort:[p6,[1,2]],integer_part:[,1],union:[y1,2],contains:[E2,2],intersection:[e2,2],difference:[W2,2],intersects:[$4,2],is_subset:[B3,2],print:[U4,-1]};this.error=Bs;var R2=function(sr){for(var Hc=g.FUNCTION_MODULES,l1=Hc.length,m1=0;m1<l1;m1++){var P1=Hc[m1];if(sr in P1)return P1[sr]}Bs("The function "+sr+" is undefined!")};this.override=function(sr,Hc){To[sr]||(To[sr]=[]),To[sr].push(this[sr]),this[sr]=Hc},this.restore=function(sr){this[sr]&&(this[sr]=To[sr].pop())},this.extend=function(sr,Hc,l1){var m1=this,P1=this[sr];if(typeof P1=="function"&&typeof Hc=="function"){var $1=this[sr];this[sr]=function(t2,g2){return T1(t2)&&T1(g2)&&!l1?$1.call(m1,t2,g2):Hc.call(m1,t2,g2,$1)}}},this.symfunction=function(sr,Hc){var l1=new h1(sr);return l1.group=ve,typeof Hc=="object"&&(Hc=[].slice.call(Hc)),l1.args=Hc,l1.fname=sr===Rs?"":sr,l1.updateHash(),l1},this.callfunction=function(sr,Hc,l1){var m1=K2[sr];m1||Bs("Nerdamer currently does not support the function "+sr);var P1=m1[1]||l1,$1=m1[0],t2;if(Hc instanceof Array||(Hc=Hc!==void 0?[Hc]:[]),P1!==-1){var g2=x2(P1),N2=g2?P1[0]:P1,F2=g2?P1[1]:P1,J2=Hc.length,w2=sr+" requires a {0} of {1} arguments. {2} provided!";J2<N2&&Bs(x1(w2,"minimum",N2,J2)),J2>F2&&Bs(x1(w2,"maximum",F2,J2))}var u4=uf(Hc);return $1?t2=$1.apply(m1[2],Hc):($1=R2(sr),g.PARSE2NUMBER&&u4?t2=d3($1.apply($1,Hc)):t2=ae.symfunction(sr,Hc)),t2},this.operator_filter_regex=function(){var sr="^\\"+Object.keys(s2).filter(function(Hc){if(Hc.length===1)return Hc}).join("\\");return new RegExp("(["+sr+"])\\s+(["+sr+"])")}(),this.setOperator=function(sr,Hc,l1){var m1=sr.operator;if(s2[m1]=sr,Hc&&(this[sr.action]=Hc),ae[m1]=sr.operation,!sr.action&&!(sr.prefix||sr.postif)&&(sr.action=m1),l1==="over"||l1==="under"){var P1=sr.precedence;for(var $1 in s2){var t2=s2[$1],g2=l1==="over"?t2.precedence>=P1:t2.precedence>P1;g2&&t2.precedence++}}},this.getOperator=function(sr){return s2[sr]},this.aliasOperator=function(sr,Hc){var l1={},m1=s2[sr];for(var P1 in m1)l1[P1]=m1[P1];l1.operator=Hc,this.setOperator(l1)},this.getOperators=function(){return s2},this.getBrackets=function(){return h2};var V2=function(sr){sr=String(sr);for(var Hc=0;Hc<wh.actions.length;Hc++)sr=wh.actions[Hc].call(this,sr);for(sr=sr.replace(/\s+/g," "),/e/gi.test(sr)&&(sr=sr.replace(/\-*\d+\.*\d*e\+?\-?\d+/gi,function(m1){return Mh(m1)})),sr=sr.replace(g.IMPLIED_MULTIPLICATION_REGEX,function(){var m1=arguments[4],P1=arguments[1],$1=arguments[2],t2=arguments[3],g2=m1.charAt(t2),N2="",F2="*";return g2.match(/[\+\-\/\*]/)||(N2=m1.charAt(t2-1)),N2.match(/[a-z]/i)&&(F2=""),P1+F2+$1}).replace(/([a-z0-9_]+)/gi,function(m1,P1){return g.USE_MULTICHARACTER_VARS===!1&&!(P1 in K2)&&isNaN(P1)?P1.split("").join("*"):P1}).replace(/\)\(/g,")*(")||"0";;){var l1=sr;if(sr=sr.replace(/([a-z0-9_]+)(\()|(\))([a-z0-9]+)/gi,function(m1,P1,$1,t2,g2){var N2=P1||t2,F2=$1||g2;return N2 in K2?N2+F2:N2+"*"+F2}),l1===sr)break}return sr};this.initConstants=function(){this.CONSTANTS={E:new h1(g.E),PI:new h1(g.PI)}},this.pretty_print=function(sr){if(Array.isArray(sr)){var Hc=sr.map(l1=>ae.pretty_print(l1)).join(", ");return sr.type==="vector"?"vector<"+Hc+">":"("+Hc+")"}return sr.toString()},this.peekers={pre_operator:[],post_operator:[],pre_function:[],post_function:[]},this.callPeekers=function(sr){if(g.callPeekers)for(var Hc=this.peekers[sr],l1=n2(arguments).slice(1).map(D1),m1=0;m1<Hc.length;m1++)Hc[m1].apply(null,l1)},this.tokenize=function(sr){sr=String(sr),sr=sr.trim().replace(/\s+/g," ");for(var Hc in h2){var l1=new RegExp(h2[Hc].is_close?"\\s+\\"+Hc:"\\"+Hc+"\\s+","g");sr=sr.replace(l1,Hc)}for(var m1=0,P1=sr.length,$1=0,t2=[],g2=[t2],N2=g2[0],F2=0,J2=[],w2=!1,u4=" ",a4="",c4=",",b4="-",y4="*",L4=function(a3,z3){var T3=[];a3!==void 0&&(T3.type=a3),T3.column=z3,g2.push(T3),N2.push(T3),N2=T3,F2++},G2=function(){g2.pop(),N2=g2[--F2]},h4=function(a3){a3=a3!==void 0?a3:m1;for(var z3=a3+1;sr.charAt(z3++)in s2;);return sr.substring(a3,z3-1)},V4=function(a3){for(var z3=m1-a3.length,T3=[],k6=a3.charAt(0),B6=1,c5=a3.length;B6<c5;B6++){var t5=a3.charAt(B6),N3=k6+t5;N3 in s2?k6=N3:(T3.push(new c1(k6,c1.OPERATOR,z3+B6)),k6=t5)}return T3.push(new c1(k6,c1.OPERATOR,z3+B6)),T3},k4=function(a3,z3){z3===void 0&&(z3=sr.substring($1,a3)),z3 in ae.units?N2.push(new c1(z3,c1.UNIT,$1)):z3!==""&&N2.push(new c1(z3,c1.VARIABLE_OR_LITERAL,$1))},K4=function(a3){N2.push(new c1(a3,c1.FUNCTION,$1))},i3=function(a3){$1=a3+1},q4=function(){$1=$1+x3.length-2,m1=$1-1};m1<P1;m1++){var Y4=sr.charAt(m1);if(Y4 in s2){k4(m1);var e3=N2[0]&&a1(N2[0]),A3=e3&&Y4===y4;w2&&$1<m1&&!(Y4===c4||A3)&&(w2=!1,G2()),i3(m1+1);var x3=h4(m1);q4(),N2.push.apply(N2,V4(x3))}else if(Y4 in h2){var n3=h2[Y4];if(n3.is_open){J2.push([n3,$1]);var v3=sr.substring($1,m1);v3 in K2?K4(v3):v3!==""&&N2.push(new c1(v3,c1.VARIABLE_OR_LITERAL,$1)),L4(n3.maps_to,m1)}else if(n3.is_close){var S6=J2.pop();if(S6){if(S6[0].id!==n3.id-1)throw new L1("Parity error")}else throw new L1("Missing open bracket for bracket at: "+(m1+1));k4(m1),G2()}i3(m1)}else if(Y4===u4){var w3=sr.substring($1,m1),q3=sr.charAt(m1+1);if(w2){if(w3 in s2)N2.push(new c1(w3,c1.OPERATOR,m1));else{k4(void 0,w3),G2();var M6=q3 in s2;(M6&&s2[q3].value===b4||!M6)&&N2.push(new c1(y4,c1.OPERATOR,m1))}w2=!1}else{var v3=sr.substring($1,m1);if(v3 in K2)w2=!0,K4(v3),L4();else if(v3 in s2)N2.push(new c1(v3,c1.OPERATOR,m1));else{k4(void 0,v3);var q3=sr.charAt(m1+1);w3!==a4&&q3!==a4&&!(w3 in s2)&&!(q3 in s2)&&N2.push(new c1(y4,c1.OPERATOR,m1))}}i3(m1)}}if(J2.length){var g6=J2.pop();throw new L1("Missing closed bracket for bracket at "+(g6[1]+1))}return k4(m1),t2},this.toRPN=function(sr){var Hc=sr.type,l1=sr.length,m1,P1=[],$1=[],t2=[],g2=function(y4,L4){for(;y4.length;)L4.push(y4.pop())};for(m1=0;m1<l1;m1++){var N2=sr[m1];if(N2.type!==c1.OPERATOR)break;if(!N2.prefix)throw new O1("Not a prefix operator");N2.is_prefix=!0,$1.push(N2)}for(;m1<l1;m1++){var F2=sr[m1];if(F2.type===c1.OPERATOR){var J2=F2;if(J2.overloaded){var w2=sr[m1+1];w2&&w2.type===c1.VARIABLE_OR_LITERAL&&(J2.postfix=!1,J2.action=J2.overloadAction,J2.leftAssoc=J2.overloadLeftAssoc)}for(;$1.length;){var u4=$1[$1.length-1];if(!(u4.precedence>J2.precedence||!J2.leftAssoc&&u4.precedence===J2.precedence))break;P1.push($1.pop())}if((Hc==="vector"||Hc==="set")&&"vectorFn"in J2&&(J2.action=J2.vectorFn),J2.postfix){var a4=sr[m1-1];if(a4){if(a4.type===c1.OPERATOR&&!a4.postfix)throw new O1("Unexpected prefix operator '"+a4.value+"'! at "+a4.column)}else throw new O1("Unexpected prefix operator '"+F2.value+"'! at "+F2.column)}else do{var w2=sr[m1+1],c4=w2?w2.type===c1.OPERATOR:!1;if(c4){if(!w2.prefix)throw new O1("A prefix operator was expected at "+w2.column);w2.is_prefix=!0,t2.push(w2),m1++}}while(c4);for(J2.is_prefix?t2.push(J2):$1.push(J2);t2.length&&(J2.leftAssoc||!J2.leftAssoc&&t2[t2.length-1].precedence>=J2.precedence);)$1.push(t2.pop())}else if(F2.type===c1.VARIABLE_OR_LITERAL){P1.length===0&&g2(t2,$1),P1.push(F2);var b4=$1[$1.length-1];(!b4||!b4.leftAssoc)&&g2(t2,P1)}else F2.type===c1.FUNCTION?$1.push(F2):F2.type===c1.UNIT&&P1.push(F2);Array.isArray(F2)&&(P1.push(this.toRPN(F2)),F2.type&&P1.push(new c1(F2.type,c1.FUNCTION,F2.column)))}return g2($1,P1),g2(t2,P1),P1},this.parseRPN=function(sr,Hc){try{Hc=Hc||{};for(var l1 in Hc)Hc[l1]=ae.parse(Hc[l1],{});g.PARSE2NUMBER&&("e"in Hc||(Hc.e=new h1(g.E)),"pi"in Hc||(Hc.pi=new h1(g.PI)));for(var m1=[],P1=0,$1=sr.length;P1<$1;P1++){var t2=sr[P1];if(Array.isArray(t2)&&(t2=this.parseRPN(t2,Hc)),t2)if(t2.type===c1.OPERATOR)if(t2.is_prefix||t2.postfix)m1.push(t2.operation(m1.pop()));else{var g2=m1.pop(),N2=m1.pop();if(typeof N2>"u")throw new O1(t2+" is not a valid postfix operator at "+t2.column);var F2=t2.action==="comma";N2 instanceof x4&&!F2&&(N2=I4.fromSet(N2)),g2 instanceof x4&&!F2&&(g2=I4.fromSet(g2)),this.callPeekers("pre_operator",N2,g2,t2);var J2=ae[t2.action](N2,g2);this.callPeekers("post_operator",J2,N2,g2,t2),m1.push(J2)}else if(t2.type===c1.FUNCTION){var w2=m1.pop(),u4=w2.parent;w2 instanceof n1||(w2=n1.create(w2));var a4=t2.value,c4=w2.getItems();this.callPeekers("pre_function",a4,c4);var b4=ae.callfunction(a4,c4);this.callPeekers("post_function",b4,a4,c4);var y4=m1[m1.length-1],L4=sr[P1+1],G2=L4&&L4.type===c1.OPERATOR&&L4.value===",";if(!G2&&b4 instanceof I4&&y4&&y4.elements&&!(y4 instanceof n1)){var h4=m1.pop(),V4=b4.elements[0];if(!V4.isConstant())h4.getter=V4,m1.push(h4),m1.push(b4);else if(V4 instanceof ff)m1.push(I4.fromArray(h4.elements.slice(V4.start,V4.end)));else{var k4=Number(V4),K4=h4.elements.length;if(k4<0&&(k4=K4+k4),k4<0||k4>=K4)throw new a2("Index out of range "+(t2.column+1));var i3=h4.elements[k4];h4.getter=k4,i3.parent=h4,m1.push(i3)}}else u4&&(b4.parent=u4),m1.push(b4)}else{var q4,Y4=t2.value;Y4 in g.ALIASES?t2=ae.parse(g.ALIASES[t2]):t2.type===c1.VARIABLE_OR_LITERAL?t2=new h1(Y4):t2.type===c1.UNIT&&(t2=new h1(Y4),t2.isUnit=!0),Y4 in ae.CONSTANTS?(q4=t2,t2=new h1(ae.CONSTANTS[Y4])):Y4 in Hc&&Y4!==Hc[Y4].toString()?(q4=t2,t2=Hc[Y4].clone()):Y4 in Ge&&(q4=t2,t2=Ge[Y4].clone()),q4&&(t2.subbed=q4),m1.push(t2)}}var e3=m1[0];if(["undefined","string","number"].indexOf(typeof e3)!==-1)throw new A4("Unexpected token!");return e3}catch(x3){var A3=[g1];throw A3.forEach(function(n3){if(x3 instanceof n3)throw new n3(x3.message+": "+t2.column)}),new d1(x3.message+": "+t2.column)}};function e4(sr){this.type=sr.type,this.value=sr.value,this.left=sr.left,this.right=sr.right}e4.prototype.toString=function(){var sr=this.left?this.left.toString()+"---":"",Hc=this.right?"---"+this.right.toString():"";return sr+"("+this.value+")"+Hc},e4.prototype.toHTML=function(sr,Hc){sr=sr||0,Hc=typeof Hc>"u"?4:Hc;var l1=function(t2){return" ".repeat(Hc*t2)},$1="",m1=this.left?l1(sr+1)+`<li>
`+this.left.toHTML(sr+2,Hc)+l1(sr+1)+`</li> 
`:"",P1=this.right?l1(sr+1)+`<li>
`+this.right.toHTML(sr+2,Hc)+l1(sr+1)+`</li>
`:"",$1=l1(sr)+'<div class="'+this.type.toLowerCase()+'"><span>'+this.value+"</span></div>"+l1(sr)+`
`;return(m1||P1)&&($1+=l1(sr)+`<ul>
`+m1+P1+l1(sr)+`</ul>
`),$1+="",$1},this.tree=function(sr){for(var Hc=[],l1=0;l1<sr.length;l1++){var m1=sr[l1];if(Array.isArray(m1)){m1=this.tree(m1),Hc.push(m1);continue}if(m1.type===c1.OPERATOR)if(m1.is_prefix||m1.postfix){var P1=m1.is_prefix?"left":"right",$1=Hc.pop();m1=new e4(m1),m1[P1]=$1,Hc.push(m1)}else m1=new e4(m1),m1.right=Hc.pop(),m1.left=Hc.pop(),Hc.push(m1);else if(m1.type===c1.FUNCTION){m1=new e4(m1);var t2=Hc.pop();if(m1.right=t2,m1.value==="object"){var $1=Hc[Hc.length-1];if($1){for(;$1.right;)$1=$1.right;$1.right=m1;continue}}Hc.push(m1)}else Hc.push(new e4(m1))}return Hc[0]},this.parse=function(sr,Hc){sr=V2(sr),Hc=Hc||{};var l1=this.tokenize(sr),m1=this.toRPN(l1);return this.parseRPN(m1,Hc)},this.toObject=function(sr){var Hc=function(l1){for(var m1=[],P1=0,$1=l1.length;P1<$1;P1++){var t2=l1[P1],g2=t2.value;if(t2.type===c1.VARIABLE_OR_LITERAL)m1.push(new h1(g2));else if(t2.type===c1.FUNCTION){P1++;var N2=ae.symfunction(g2,Hc(l1[P1]));N2.isConversion=!0,m1.push(N2)}else t2.type===c1.OPERATOR?m1.push(g2):m1.push(Hc(t2))}return m1};return Hc(ae.tokenize(sr))};var t4=function(sr){for(var Hc,l1=0,m1=[[]],Hc=0,P1=sr.length;Hc<P1;Hc++)sr[Hc]===","?(l1++,m1[l1]=[]):m1[l1].push(sr[Hc]);return m1},v4=function(sr){return sr.replace(/^\\left\((.+)\\right\)$/g,function(Hc,l1){return l1||Hc})},w4=function(sr){for(var Hc=[];sr.length;){var l1=sr.shift(),m1=sr[0],P1=x2(m1),$1=m1==="-";if(l1==="^"&&(m1==="+"?sr.shift():P1&&m1[0]==="+"&&m1.shift(),P1&&m1.length===1&&sr.unshift(sr.shift()[0])),l1==="^"&&(P1&&m1[0]==="-"||$1)){var t2=Hc.pop(),g2=Hc[Hc.length-1],N2="1";g2==="*"?(Hc.pop(),N2=Hc.pop()):x2(g2)&&(N2=Hc.pop()),Hc.push(N2,"/",t2,l1),P1?m1.shift():sr.shift(),P1&&m1.length===1&&Hc.push(sr.shift()[0])}else Hc.push(l1)}return Hc};this.toTeX=function(sr,Hc){Hc=Hc||{};var l1=Hc.decimals===!0?"decimals":void 0,m1=typeof sr=="string"?this.toObject(sr):sr,P1=[],$1=typeof Hc.cdot>"u"?"\\cdot":Hc.cdot;if(m1=w4(m1),x2(m1)){for(var t2=[],g2,N2,F2=0;F2<m1.length;F2++)g2=m1[F2],m1[F2+1]==="^"?(N2=m1[F2+2],t2.push(g4.braces(this.toTeX([g2]))+"^"+g4.braces(this.toTeX([N2]))),F2+=2):t2.push(g2);m1=t2}for(var F2=0,J2=m1.length;F2<J2;F2++){var w2=m1[F2];if(w2==="*"&&(w2=$1),T1(w2))if(w2.group===ve){var u4=w2.fname,a4;if(u4===Vc)a4="\\sqrt"+g4.braces(this.toTeX(w2.args));else if(u4===So)a4=g4.brackets(this.toTeX(w2.args),"abs");else if(u4===Rs)a4=g4.brackets(this.toTeX(w2.args),"parens");else if(u4===g.LOG10)a4="\\"+g.LOG10_LATEX+"\\left( "+this.toTeX(w2.args)+"\\right)";else if(u4==="integrate"){var c4=t4(w2.args),b4=g4.braces(this.toTeX(c4[0])),y4=this.toTeX(c4[1]);a4="\\int "+b4+"\\, d"+y4}else if(u4==="defint"){var c4=t4(w2.args),b4=g4.braces(this.toTeX(c4[0])),y4=this.toTeX(c4[3]),L4=this.toTeX(c4[1]),G2=this.toTeX(c4[2]);a4="\\int\\limits_{"+L4+"}^{"+G2+"} "+b4+"\\, d"+y4}else if(u4==="diff"){var c4=t4(w2.args),y4="",b4=g4.braces(this.toTeX(c4[0]));if(c4.length===1){var h4=[];for(k4=0;k4<c4[0].length;k4++)c4[0][k4].group===3&&h4.push(c4[0][k4].value);h4.sort(),y4=h4.length>0?"\\frac{d}{d "+h4[0]+"}":"\\frac{d}{d x}"}else c4.length===2?y4="\\frac{d}{d "+c4[1]+"}":y4="\\frac{d^{"+c4[2]+"}}{d "+this.toTeX(c4[1])+"^{"+c4[2]+"}}";a4=y4+"\\left("+b4+"\\right)"}else if(u4==="sum"||u4==="product"){var V4=[[],[],[],[]],k4=0,F2;for(F2=0;F2<w2.args.length;F2++){if(w2.args[F2]===","){k4++;continue}V4[k4].push(w2.args[F2])}a4=(u4==="sum"?"\\sum_":"\\prod_")+g4.braces(this.toTeX(V4[1])+" = "+this.toTeX(V4[2])),a4+="^"+g4.braces(this.toTeX(V4[3]))+g4.braces(this.toTeX(V4[0]))}else if(u4==="limit"){var K4=t4(w2.args).map(function(q4){return Array.isArray(q4)?ae.toTeX(q4.join("")):ae.toTeX(String(q4))});a4="\\lim_"+g4.braces(K4[1]+"\\to "+K4[2])+" "+g4.braces(K4[0])}else u4===Do||u4===eh?a4=this.toTeX(w2.args)+(u4===Do?"!":"!!"):a4=g4.latex(w2,l1);P1.push(a4)}else P1.push(g4.latex(w2,l1));else x2(w2)?P1.push(g4.brackets(this.toTeX(w2))):w2==="/"?P1.push(g4.frac(v4(P1.pop()),v4(this.toTeX([m1[++F2]])))):P1.push(w2)}return P1.join(" ")};function T4(sr){return g.PARSE2NUMBER?sr:ae.symfunction("parens",[sr])}function D4(sr){if(sr.isInfinity)return h1.infinity();if(sr.multiplier.lessThan(0)&&sr.multiplier.negate(),sr.isImaginary()){var Hc=sr.realpart(),l1=sr.imagpart();if(Hc.isConstant()&&l1.isConstant())return M4(ae.add(ae.pow(Hc,new h1(2)),ae.pow(l1,new h1(2))))}else if(U1(sr)||v2(sr.power))return sr;if(sr.isComposite()){var m1=[];sr.each(function(t2){m1.push(t2.multiplier)});var P1=B2.QGCD.apply(null,m1);P1.lessThan(0)&&(sr.multiplier=sr.multiplier.multiply(new I2(-1)),sr.distributeMultiplier())}var $1=ae.parse(sr.multiplier);return sr.toUnitMultiplier(),ae.multiply($1,ae.symfunction(So,[sr]))}function C4(sr){var Hc;if(b2(sr)){var l1=new I4;return sr.each(function(J2,w2){l1.set(w2-1,C4(J2))}),l1}if(_2(sr)){var m1=new Q2;return sr.each(function(J2,w2,u4){m1.set(w2,u4,C4(J2))}),m1}if(g.PARSE2NUMBER&&sr.isConstant())return p1(sr)?Hc=B2.bigfactorial(sr):Hc=B2.gamma(sr.multiplier.add(new I2(1)).toDecimal()),Hc=d3(Hc),Hc;if(sr.isConstant()){var P1=sr.getDenom();if(P1.equals(2)){var $1=sr.getNum(),t2,g2,N2,F2;return sr.multiplier.isNegative()?(F2=ae.subtract($1.negate(),new h1(1)).multiplier.divide(new I2(2)),t2=ae.pow(new h1(-4),new h1(F2)).multiplier.multiply(B2.bigfactorial(F2)),g2=B2.bigfactorial(new I2(2).multiply(F2))):(F2=ae.add($1,new h1(1)).multiplier.divide(new I2(2)),t2=B2.bigfactorial(new I2(2).multiply(F2)),g2=ae.pow(new h1(4),new h1(F2)).multiplier.multiply(B2.bigfactorial(F2))),N2=t2.divide(g2),ae.multiply(ae.parse("sqrt(pi)"),new h1(N2))}}return ae.symfunction(Do,[sr])}function s4(sr,Hc){var l1=Z1(sr);if(l1.isConstant()){var m1=B2.continuedFraction(l1,Hc),P1=I4.fromArray(m1.fractions.map(function($1){return new h1($1)}));return I4.fromArray([new h1(m1.sign),new h1(m1.whole),P1])}return ae.symfunction("continued_fraction",arguments)}function Z4(sr,Hc){if(sr.isConstant()&&Hc.isConstant()){var l1=new h1(1);return l1.multiplier=l1.multiplier.multiply(sr.multiplier.mod(Hc.multiplier)),l1}var m1=ae.divide(sr.clone(),Hc.clone());return p1(m1)?new h1(0):ae.symfunction("mod",[sr,Hc])}function h3(sr,Hc,l1){return typeof sr!="boolean"&&U1(sr)&&(sr=!!Number(sr)),sr?Hc:l1}function r3(sr,Hc){if(_2(sr))for(var l1=0,m1=sr.rows();l1<m1;l1++)for(var P1=0,$1=sr.cols();P1<$1;P1++){var t2=sr.elements[l1][P1];if(t2.equals(Hc))return new h1(1)}else if(sr.elements){for(var l1=0,m1=sr.elements.length;l1<m1;l1++)if(sr.elements[l1].equals(Hc))return new h1(1)}return new h1(0)}function R4(sr){return g.PARSE2NUMBER?sr.isConstant()?new h1(B2.sinc(sr)):ae.parse(x1("sin({0})/({0})",sr)):ae.symfunction("sinc",[sr])}function B4(sr){return sr.fname===g.LOG&&sr.isLinear()?ae.pow(sr.args[0],h1.create(sr.multiplier)):ae.parse(x1("e^({0})",sr))}function N4(sr){return ae.parse(x1("({0})*pi/180",sr))}function W4(sr){return ae.parse(x1("({0})*180/pi",sr))}function m3(sr){if(sr.isComposite()){var Hc=new h1(0),l1,m1,P1,$1,t2,g2,N2,F2;return sr.each(function(J2){l1=J2.getNum(),m1=J2.getDenom(),P1=Hc.getNum(),$1=Hc.getDenom(),t2=ae.multiply(m1,P1),g2=ae.multiply(l1,$1),N2=ae.expand(ae.add(t2,g2)),F2=ae.multiply($1,m1),Hc=ae.divide(N2,F2)},!0),Hc}return sr}function M4(sr){if(T1(sr)||(sr=ae.parse(sr)),sr.group===me)return ae.symfunction(Vc,[sr]);sr.fname===""&&sr.power.equals(1)&&(sr=sr.args[0]);var Hc=sr.multiplier.sign()<0;if(g.PARSE2NUMBER){if(sr.isConstant()&&!Hc)return new h1(u.sqrt(sr.multiplier.toDecimal()));if(sr.isImaginary())return u1.sqrt(sr);if(sr.group===W)return ae.symfunction("sqrt",[sr])}var l1,m1,P1=sr.isConstant();if(sr.group===De&&sr.isLinear()){var $1=M4(h1(sr.multiplier));for(var t2 in sr.symbols){var g2=sr.symbols[t2];$1=ae.multiply($1,M4(g2))}m1=$1}else if(sr.fname===Vc){var t2=sr.args[0],N2=sr.multiplier;t2.setPower(sr.power.multiply(new I2(.25))),m1=t2,N2.equals(1)||(m1=ae.multiply(M4(ae.parse(N2)),m1))}else if(!sr.power.isInteger())sr.setPower(sr.power.multiply(new I2(.5))),m1=sr;else if(sr.multiplier<0&&sr.group===W){var F2=ae.parse(sr.multiplier).negate(),J2=ae.parse(sr).toUnitMultiplier().negate();m1=ae.multiply(ae.symfunction(g.SQRT,[J2]),M4(F2))}else{var w2=sr.power.sign();sr.power=sr.power.abs(),P1&&sr.multiplier.lessThan(0)&&(l1=h1.imaginary(),sr.multiplier=sr.multiplier.abs());var u4=sr.multiplier.toDecimal(),a4=Math.abs(u4),c4=Math.sqrt(a4),$1;if(p1(c4))$1=new h1(c4);else if(p1(u4)){var b4=B2.ifactor(u4),y4=1;for(var g2 in b4){var L4=b4[g2],G2=L4-L4%2;if(G2){var h4=Math.pow(g2,G2);y4*=Math.pow(g2,G2/2),u4/=h4}}$1=ae.multiply(ae.symfunction(Vc,[new h1(u4)]),new h1(y4))}else{for(var V4=[new h1(sr.multiplier.num),new h1(sr.multiplier.den)],k4=[new h1(1),new h1(1)],K4=[new h1(1),new h1(1)],i3=0;i3<2;i3++){var L4=V4[i3];e6(L4).each(function(e3){e3=h1.unwrapPARENS(e3);var A3=e3.clone().toLinear(),x3=Number(e3.power),n3=x3%2,v3=(x3-n3)/2;k4[i3]=ae.multiply(k4[i3],ae.pow(A3,new h1(v3))),K4[i3]=ae.multiply(K4[i3],M4(ae.pow(A3,new h1(n3))))})}$1=ae.divide(ae.multiply(k4[0],K4[0]),ae.multiply(k4[1],K4[1]))}sr=sr.toUnitMultiplier(!0),sr.isOne()?m1=sr:v2(sr.power.toString())?m1=ae.pow(sr.clone(),new h1(.5)):m1=ae.symfunction(Vc,[sr]),w2<0&&m1.power.negate(),$1&&(m1=ae.multiply($1,m1)),l1&&(m1=ae.multiply(l1,m1))}return Hc&&g.PARSE2NUMBER?ae.parse(m1):m1}function p4(sr){if(!sr.isConstant(!0)){var Hc,l1=sr.power/3,m1=ae.pow(ae.parse(sr.multiplier),new h1(1/3)),P1=sr.toUnitMultiplier();return p1(l1)?Hc=ae.pow(P1.toLinear(),ae.parse(l1)):P1.group===De?(Hc=new h1(1),P1.each(function($1){Hc=ae.multiply(Hc,p4($1))})):Hc=ae.symfunction("cbrt",[P1]),ae.multiply(m1,Hc)}return J4(sr,new h1(3))}function E3(sr,Hc){return sr.scientific=Hc||10,sr}function J4(sr,Hc,l1,m1){if(Hc=Z1(ae.parse(Hc)),Hc.equals(0))throw new r1("Unable to calculate nthroots of zero");if(sr<0&&v2(Hc))throw new Error("Cannot calculate nthroot of negative number for even powers");if(!sr.isConstant(!0))return ae.symfunction("nthroot",arguments);sr.group!==A&&(sr=Z1(sr)),typeof m1>"u"&&(m1=!0),l1=l1||25;var P1=sr.sign(),$1,t2;if(P1<0&&(sr=D4(sr)),p1(sr)&&Hc.isConstant()){sr<18446744073709552e3?t2=I2.create(Math.pow(sr,1/Hc)):t2=B2.nthroot(sr,Hc);var $1;return m1&&($1=new h1(t2)),$1=new h1(t2.toDecimal(l1)),ae.multiply(new h1(P1),$1)}}function e6(sr){if(sr.greaterThan(9999999999998891e26)||sr.equals(-1))return sr;if(sr.equals(Math.PI))return new h1(Math.PI);if(sr=Z1(sr.clone()),sr.isConstant()){var Hc=new h1(1),l1=sr.toString();if(p1(l1)){var m1=B2.ifactor(l1);for(var P1 in m1){var $1=m1[P1];Hc=ae.multiply(Hc,ae.symfunction("parens",[new h1(P1).setPower(new I2($1))]))}}else{var t2=e6(new h1(sr.multiplier.num)),g2=e6(new h1(sr.multiplier.den));Hc=ae.multiply(ae.symfunction("parens",[t2]),ae.symfunction("parens",[g2]).invert())}}else Hc=ae.symfunction("pfactor",arguments);return Hc}function X3(sr){return sr.realpart()}function t6(sr){return sr.imagpart()}function I3(sr){var Hc=sr.realpart(),l1=sr.imagpart();return ae.add(Hc,ae.multiply(l1.negate(),h1.imaginary()))}function Y3(sr){var Hc=sr.realpart(),l1=sr.imagpart();return Hc.isConstant()&&l1.isConstant()?l1.equals(0)&&Hc.equals(-1)?ae.parse("pi"):l1.equals(1)&&Hc.equals(0)?ae.parse("pi/2"):l1.equals(1)&&Hc.equals(1)?ae.parse("pi/4"):new h1(Math.atan2(l1,Hc)):ae.symfunction("atan2",[l1,Hc])}function D3(sr){var Hc,l1,m1,P1;return Hc=h1.toPolarFormArray(sr),P1=Hc[1],l1=Hc[0],m1=ae.parse(x1("e^({0}*({1}))",g.IMAGINARY,P1)),ae.multiply(l1,m1)}function h6(sr){var Hc=sr.clone();try{var l1,m1,P1,$1,t2,g2,N2;return l1=l2(sr,"e",!0),m1=ae.divide(l1.x.power,h1.imaginary()),P1=Z1(A1.tan(m1)),$1=ae.pow(l1.a,new h1(2)),g2=P1.getDenom(!0),N2=P1.getNum(),t2=h1.hyp(N2,g2),t2.equals(l1.a)?ae.add(g2,ae.multiply(h1.imaginary(),N2)):Hc}catch{return Hc}}function X6(sr,Hc){Hc.map(function($1){$1.numVal=Z1($1).multiplier});for(var l1,m1,P1;;){if(l1=Hc.length,l1<2)return Hc[0];m1=Hc.pop(),P1=Hc[l1-2],(sr==="min"?m1.numVal<P1.numVal:m1.numVal>P1.numVal)&&(Hc.pop(),Hc.push(m1))}}function d6(){var sr=[].slice.call(arguments);return Fc(sr)?sr[0]:uf(sr)?new h1(Math.max.apply(null,sr)):g.SYMBOLIC_MIN_MAX&&Qp(sr)?X6("max",sr):ae.symfunction("max",sr)}function b6(){var sr=[].slice.call(arguments);return Fc(sr)?sr[0]:uf(sr)?new h1(Math.min.apply(null,sr)):g.SYMBOLIC_MIN_MAX&&Qp(sr)?X6("min",sr):ae.symfunction("min",sr)}function Q3(sr){return sr.isConstant(!0)?new h1(Math.sign(Z1(sr))):ae.symfunction("sign",arguments)}function p6(sr,Hc){Hc=Hc?Hc.toString():"asc";var l1=function(P1){return P1.group===A?P1.multiplier:P1.group===ve?P1.fname===""?l1(P1.args[0]):P1.fname:P1.group===W?P1.power:P1.value},m1=b2(sr)?sr.elements:sr.collectSymbols();return new I4(m1.sort(function(P1,$1){var t2=l1(P1),g2=l1($1);return Hc==="desc"?g2-t2:t2-g2}))}function g3(sr,Hc){if(sr.equals(1))return new h1(0);var l1;if(sr.fname===Vc&&sr.multiplier.equals(1))return l1=ae.divide(g3(sr.args[0]),new h1(2)),sr.power.sign()<0&&l1.negate(),l1;if(sr.equals(0))throw new r1(g.LOG+"(0) is undefined!");if(sr.isImaginary())return u1.evaluate(sr,g.LOG);if(sr.isConstant()&&typeof Hc<"u"&&Hc.isConstant()){var m1=Math.log(sr),P1=Math.log(Hc);l1=new h1(m1/P1)}else if(sr.group===me&&sr.power.multiplier.lessThan(0)||sr.power.toString()==="-1")sr.power.negate(),l1=g3(sr).negate();else if(sr.value==="e"&&sr.multiplier.equals(1)){var $1=sr.power;l1=T1($1)?$1:new h1($1)}else if(sr.group===ve&&sr.fname==="exp"){var t2=sr.args[0];sr.multiplier.equals(1)?l1=ae.multiply(t2,new h1(sr.power)):l1=ae.symfunction(g.LOG,[sr])}else if(g.PARSE2NUMBER&&U1(sr)){sr=ae.parse(sr);var g2;sr.multiplier.lessThan(0)&&(sr.negate(),g2=ae.multiply(new h1(Math.PI),new h1("i"))),l1=new h1(Math.log(sr.multiplier.toDecimal())),g2&&(l1=ae.add(l1,g2))}else{var t2;!sr.power.equals(1)&&!sr.contains("e")&&(t2=sr.group===me?sr.power:new h1(sr.power),sr.toLinear()),arguments.length>1&&Fc(arguments)?l1=new h1(1):l1=ae.symfunction(g.LOG,arguments),t2&&(l1=ae.multiply(t2,l1))}return l1}function k3(sr,Hc){var l1=Hc&&Hc.isConstant()||typeof Hc>"u";if(sr.isConstant()&&l1){var m1,P1,$1,t2;return m1=sr,Hc&&Hc.lessThan(0)&&(Hc=D4(Hc),P1=Number(sr).toExponential().toString().split("e"),m1=P1[0],$1=P1[1]),t2=new h1(Q1(m1,Number(Hc||0))),ae.multiply(t2,ae.pow(new h1(10),new h1($1||0)))}return ae.symfunction("round",arguments)}function _6(sr){var Hc=sr%2,l1;return Hc<0&&(Hc=2+Hc),Hc>=0&&Hc<=.5?l1=1:Hc>.5&&Hc<=1?l1=2:Hc>1&&Hc<=1.5?l1=3:l1=4,l1}function d3(sr){if(!isFinite(sr)){var Hc=Math.sign(sr),l1=new h1(String(Math.abs(sr)));return l1.multiplier=l1.multiplier.multiply(new I2(Hc)),l1}if(T1(sr))return sr;if(typeof sr=="number")try{sr=I2.simple(sr)}catch{sr=new I2(sr)}var m1=new h1(0);return m1.multiplier=sr,m1}function G4(sr){var Hc=sr.group,l1;if(Hc===Xe){var m1=sr.getNum(),P1=sr.getDenom()||new h1(1),$1=Number(sr.power),t2=new h1(1);if(Math.abs($1)===1){P1.each(function(F2){F2.group===De?t2=ae.multiply(t2,G4(F2.getDenom())):F2.power.lessThan(0)&&(t2=ae.multiply(t2,G4(F2.clone().toUnitMultiplier())))});var g2=new h1(0);P1.each(function(F2){g2=ae.add(ae.divide(F2,t2.clone()),g2)}),t2.invert();var N2;m1.isComposite()?(N2=new h1(0),m1.each(function(F2){N2=ae.add(ae.multiply(G4(F2),t2.clone()),N2)})):N2=ae.multiply(t2,m1),l1=ae.divide(N2,g2)}}else Hc===De?(l1=new h1(1),sr.each(function(F2){l1=ae.multiply(l1,ae.clean(F2))})):Hc===ve&&sr.args.length===1&&sr.args[0].isConstant()&&(l1=k1("PARSE2NUMBER",function(){return ae.parse(sr)},!0));return l1||(l1=sr),l1}function x6(sr,Hc){return Hc=Hc||{expand_denominator:!0,expand_functions:!0},_3(sr,Hc)}function _3(sr,Hc){if(Array.isArray(sr))return sr.map(function(c4){return _3(c4,Hc)});if(Hc=Hc||{},sr.group===ve&&sr.fname===""){var l1=_3(sr.args[0],Hc),m1=_3(ae.pow(l1,ae.parse(sr.power)),Hc);return ae.multiply(ae.parse(sr.multiplier),m1).distributeMultiplier()}if([A,P,W].indexOf(sr.group)!==-1)return sr;var P1=sr.clone();try{var $1=sr.multiplier.toString(),t2=Number(sr.power),g2=sr;if(sr.isComposite()&&p1(sr.power)&&sr.power>0){var N2=t2-1,l1=new h1(0);sr.each(function(b4){l1=ae.add(l1,_3(ae.parse(b4),Hc))});for(var F2=ae.parse(l1),J2=0;J2<N2;J2++)F2=gf(F2,l1,Hc);g2=ae.multiply(ae.parse($1),F2).distributeMultiplier()}else if(sr.group===ve&&Hc.expand_functions===!0){var w2=[];sr.args.forEach(function(c4){w2.push(_3(c4,Hc))}),g2=ae.pow(ae.symfunction(sr.fname,w2),ae.parse(sr.power)),g2=ae.multiply(g2,ae.parse(sr.multiplier))}else if(sr.isComposite()&&p1(sr.power)&&sr.power<0&&Hc.expand_denominator===!0)sr=sr.invert(),g2=_3(sr,Hc),g2.invert();else if(sr.group===De){var u4=function(b4){switch(b4.group){case Xe:return 0;case He:return 1;case De:return 2;case ve:return 3;default:return 4}},a4=sr.collectSymbols().sort(function(b4,y4){return u4(y4)-u4(b4)}).map(function(b4){var y4=ae.pow(b4,ae.parse(t2)),L4=_3(y4,Hc);return L4}),l1=a4.pop();l1.isComposite()&&l1.isLinear()?(a4.forEach(function(b4){l1=gf(l1,b4,Hc)}),l1.isComposite()?(l1.power>1&&(l1=_3(ae.pow(l1,ae.parse(l1.power)),Hc)),g2=ae.multiply(ae.parse($1),l1).distributeMultiplier()):g2=l1):(g2=l1,a4.forEach(function(b4){g2=ae.multiply(g2,b4)}),g2=ae.multiply(g2,ae.parse($1)).distributeMultiplier()),g2.group===De&&(g2=ae.parse(g2))}else g2=sr;return g2}catch{return P1}return P1}function w6(sr){return Q2.identity(sr)}function S3(sr,Hc){return Hc.isConstant()&&p1(Hc)?sr.elements[Hc]:ae.symfunction("vecget",arguments)}function r6(sr,Hc){return Hc=typeof Hc>"u"?1e-14:Hc,sr=sr.clone(),Hc=Number(Hc),sr.elements.sort(function(l1,m1){return m1.group-l1.group}),sr.elements=n4(sr.elements,function(l1,m1){var P1=Number(ae.subtract(Z1(l1),Z1(m1)).abs());return P1<=Hc}),sr}function E6(sr,Hc,l1){return Hc.isConstant?(sr.elements[Hc]=l1,sr):ae.symfunction("vecset",arguments)}function e5(sr,Hc,l1){return Hc.isConstant()&&l1.isConstant()?sr.elements[Hc][l1]:ae.symfunction("matget",arguments)}function J5(sr,Hc){return Hc.isConstant()?new Q2(sr.elements[Hc]):ae.symfunction("matgetrow",arguments)}function Y6(sr,Hc,l1){if(!Hc.isConstant())return ae.symfunction("matsetrow",arguments);if(sr.elements[Hc].length!==l1.elements.length)throw new S2("Matrix row must match row dimensions!");var m1=sr.clone();return m1.elements[Hc]=l1.clone().elements,m1}function vv(sr,Hc){if(!Hc.isConstant())return ae.symfunction("matgetcol",arguments);Hc=Number(Hc);var l1=Q2.fromArray([]);return sr.each(function(m1,P1,$1){$1===Hc&&l1.elements.push([m1.clone()])}),l1}function yv(sr,Hc,l1){if(!Hc.isConstant())return ae.symfunction("matsetcol",arguments);if(Hc=Number(Hc),sr.rows()!==l1.elements.length)throw new S2("Matrix columns must match number of columns!");return l1.each(function(m1,P1){sr.set(P1-1,Hc,m1.elements[0].clone())}),sr}function bv(sr,Hc,l1,m1){return sr.elements[Hc][l1]=m1,sr}function _v(){return new I4([].slice.call(arguments))}function C5(){return Q2.fromArray(arguments)}function o6(){return x4.fromArray(arguments)}function xv(sr){return _2(sr)?sr.determinant():sr}function wv(sr){var Hc;return _2(sr)?Hc=[new h1(sr.cols()),new h1(sr.rows())]:b2(sr)||q1(sr)?Hc=new h1(sr.elements.length):Bs("size expects a matrix or a vector"),Hc}function O6(sr,Hc){if(b2(sr)&&b2(Hc))return sr.dot(Hc);Bs("function dot expects 2 vectors")}function li(sr,Hc){if(b2(sr)&&b2(Hc))return sr.cross(Hc);Bs("function cross expects 2 vectors")}function hf(sr){if(_2(sr))return sr.transpose();Bs("function transpose expects a matrix")}function t1(sr){if(_2(sr))return sr.invert();Bs("invert expects a matrix")}function y1(sr,Hc){return sr.union(Hc)}function e2(sr,Hc){return sr.intersection(Hc)}function E2(sr,Hc){return sr.contains(Hc)}function W2(sr,Hc){return sr.difference(Hc)}function $4(sr,Hc){return new h1(Number(sr.intersects(Hc)))}function B3(sr,Hc){return new h1(Number(sr.is_subset(Hc)))}function U4(){n2(arguments).map(function(sr){console.log(sr.toString())})}function L3(sr){if(!T1(sr.power)&&sr.power.absEquals(.5)){var Hc=sr.power.sign(),l1=M4(sr.group===P?new h1(sr.value):sr.toLinear());return Hc<0&&l1.invert(),l1}return sr}function V3(sr){if(sr.group===P){var Hc=sr.value,l1=Z2(Hc)[0];if(!l1)return _h("Unable to compute prime factors. This should not happen. Please review and report."),sr;var m1=new I2(Math.log(Hc)/Math.log(l1)),P1=m1.multiply(sr.power);if(P1.den>sr.power.den)return sr;p1(P1)?sr=h1(Math.pow(l1,P1)):sr=new h1(l1).setPower(P1)}return sr}this.expand=_3,this.round=k3,this.clean=G4,this.sqrt=M4,this.cbrt=p4,this.abs=D4,this.log=g3,this.rationalize=m3,this.nthroot=J4,this.arg=Y3,this.conjugate=I3,this.imagpart=t6,this.realpart=X3,this.getFunction=function(sr){return K2[sr][0]},this.addPreprocessor=function(sr,Hc,l1,m1){var P1=wh.names,$1=wh.actions;if(typeof Hc!="function")throw new PreprocessorError("Incorrect parameters. Function expected!");l1?m1?(P1.splice(l1,0,sr),$1.splice(l1,0,Hc)):(P1[l1]=sr,$1[l1]=Hc):(P1.push(sr),$1.push(Hc))},this.getPreprocessors=function(){for(var sr={},Hc=0,l1=sr.names.length;Hc<l1;Hc++){var m1=sr.names[Hc];sr[m1]={order:Hc,action:sr.actions[Hc]}}return sr},this.removePreprocessor=function(sr,Hc){var l1=wh.names.indexOf(sr);Hc?(b1(wh.names,l1),b1(wh.actions,l1)):(wh.names[l1]=void 0,wh.actions[l1]=void 0)},this.mapped_function=function(){for(var sr={},Hc=this.params,l1=0;l1<Hc.length;l1++)sr[Hc[l1]]=String(arguments[l1]);return ae.parse(this.body,sr)},this.add=function(sr,Hc){var l1=T1(sr),m1=T1(Hc);if(l1&&m1){if(sr.unit||Hc.unit)return ae.Unit.add(sr,Hc);if(sr.isInfinity||Hc.isInfinity){var P1=sr.multiplier.lessThan(0),$1=Hc.multiplier.lessThan(0);if(sr.isInfinity&&Hc.isInfinity&&P1!==$1)throw new r1("("+sr+")+("+Hc+") is not defined!");var t2=h1.infinity();return $1&&t2.negate(),t2}if(sr.isComposite()&&sr.isLinear()&&Hc.isComposite()&&Hc.isLinear()&&(sr.distributeMultiplier(),Hc.distributeMultiplier(),Hc.length>sr.length&&sr.group===Hc.group&&([sr,Hc]=[Hc,sr])),sr.multiplier.equals(0))return Hc;if(Hc.multiplier.equals(0))return sr;if(sr.isConstant()&&Hc.isConstant()&&g.PARSE2NUMBER){var h4=new h1(sr.multiplier.add(Hc.multiplier).toDecimal(g.PRECISION));return h4}var g2=sr.group,N2=Hc.group,F2=sr.power.toString(),J2=Hc.power.toString();if(g2<N2||g2===N2&&F2>J2&&J2>0)return this.add(Hc,sr);if(g2===De&&N2===He&&sr.value===Hc.value){var w2=sr;sr=Hc,Hc=w2,g2=sr.group,N2=Hc.group,F2=sr.power.toString(),J2=Hc.power.toString()}var u4=F2===J2,a4=sr.value,c4=Hc.value,b4=sr.isComposite(),y4=Hc.isComposite(),L4,G2,h4;if(b4&&(L4=d4(sr,"hash")),y4&&(G2=d4(Hc,"hash")),g2===Xe&&N2===Xe&&Hc.isLinear()&&!sr.isLinear()&&L4!==G2)return this.add(Hc,sr);g2===He&&N2===He&&(a4=L4,c4=G2);var V4=g2===P&&N2===A,k4=sr.value===Hc.multiplier.toString(),K4=a4===c4||L4===G2&&L4!==void 0||V4&&k4;if(K4&&u4&&g2===N2)if(V4&&(Hc=Hc.convert(P)),g2===He&&(N2===W||N2===P))sr.distributeMultiplier(),h4=sr.attach(Hc);else if(h4=sr,sr.multiplier.isOne()&&Hc.multiplier.isOne()&&g2===Xe&&sr.isLinear()&&Hc.isLinear())for(var i3 in Hc.symbols){var q4=Hc.symbols[i3];h4.attach(q4)}else h4.multiplier=h4.multiplier.add(Hc.multiplier);else if(K4&&g2!==He)g2===Xe&&N2===He?(Hc.insert(sr,"add"),h4=Hc):(h4=h1.shell(He).attach([sr,Hc]),h4.value=g2===He?L4:a4);else if(b4&&sr.isLinear()){var Y4=g2===N2,e3=g2===He&&N2===He;if(e3&&(Y4=sr.value===Hc.value),sr.distributeMultiplier(),Hc.isComposite()&&Hc.isLinear()&&Y4){Hc.distributeMultiplier();for(var i3 in Hc.symbols){var q4=Hc.symbols[i3];sr.attach(q4)}h4=sr}else e3&&sr.value!==G2||g2===He&&!K4?(h4=h1.shell(Xe).attach([sr,Hc]),h4.updateHash()):h4=sr.attach(Hc)}else{if(g2===ve&&sr.fname===Vc&&N2!==me&&Hc.power.equals(.5)){var A3=Hc.multiplier.clone();Hc=M4(Hc.toUnitMultiplier().toLinear()),Hc.multiplier=A3}sr.length===2&&Hc.length===2&&v2(sr.power)&&v2(Hc.power)?h4=ae.add(_3(sr),_3(Hc)):(h4=h1.shell(Xe).attach([sr,Hc]),h4.updateHash())}if(h4.multiplier.equals(0)&&(h4=new h1(0)),h4.length===1){var A3=h4.multiplier;h4=e1(h4.symbols),h4.multiplier=h4.multiplier.multiply(A3)}return h4}else{if(m1&&!l1){var w2=sr;sr=Hc,Hc=w2,w2=m1,m1=l1,l1=w2}var x3=_2(Hc);if(l1&&x3){var n3=new Q2;Hc.eachElement(function(S6,w3,q3){n3.set(w3,q3,ae.add(sr.clone(),S6))}),Hc=n3}else if(_2(sr)&&x3)Hc=sr.add(Hc);else if(l1&&b2(Hc))Hc.each(function(S6,w3){w3--,Hc.elements[w3]=ae.add(sr.clone(),Hc.elements[w3])});else if(b2(sr)&&b2(Hc))Hc.each(function(S6,w3){w3--,Hc.elements[w3]=ae.add(sr.elements[w3],Hc.elements[w3])});else{if(b2(sr)&&_2(Hc))return ae.add(Hc,sr);if(_2(sr)&&b2(Hc))if(Hc.elements.length===sr.rows()){var n3=new Q2,v3=sr.cols();return Hc.each(function(w3,q3){for(var M6=[],g6=0;g6<v3;g6++)M6.push(ae.add(sr.elements[q3-1][g6].clone(),w3.clone()));n3.elements.push(M6)}),n3}else Bs("Dimensions must match!")}return Hc}},this.subtract=function(sr,Hc){var l1=l1=T1(sr),m1=T1(Hc);if(l1&&m1)return sr.unit||Hc.unit?ae.Unit.subtract(sr,Hc):this.add(sr,Hc.negate());if(m1&&b2(sr))Hc=sr.map(function(t2){return ae.subtract(t2,Hc.clone())});else if(l1&&b2(Hc))Hc=Hc.map(function(t2){return ae.subtract(sr.clone(),t2)});else if(b2(sr)&&b2(Hc))sr.dimensions()===Hc.dimensions()?Hc=sr.subtract(Hc):ae.error("Unable to subtract vectors. Dimensions do not match.");else if(_2(sr)&&b2(Hc))if(Hc.elements.length===sr.rows()){var P1=new Q2,$1=sr.cols();return Hc.each(function(t2,g2){for(var N2=[],F2=0;F2<$1;F2++)N2.push(ae.subtract(sr.elements[g2-1][F2].clone(),t2.clone()));P1.elements.push(N2)}),P1}else Bs("Dimensions must match!");else if(b2(sr)&&_2(Hc)){var P1=Hc.clone().negate();return ae.add(P1,sr)}else if(_2(sr)&&_2(Hc))Hc=sr.subtract(Hc);else if(_2(sr)&&m1){var P1=new Q2;sr.each(function(g2,N2,F2){P1.set(N2,F2,ae.subtract(g2,Hc.clone()))}),Hc=P1}else if(l1&&_2(Hc)){var P1=new Q2;Hc.each(function(g2,N2,F2){P1.set(N2,F2,ae.subtract(sr.clone(),g2))}),Hc=P1}return Hc},this.multiply=function(sr,Hc){var l1=T1(sr),m1=T1(Hc);if(l1&&Hc instanceof n1)return Hc.elements.push(sr),Hc;if(l1&&m1){if(Hc.isUnit){var G2=sr.clone();return sr.unit=Hc,G2}if(sr.unit||Hc.unit)return ae.Unit.multiply(sr,Hc);if(sr.isInfinity||Hc.isInfinity){if(sr.equals(0)||Hc.equals(0))throw new r1(sr+"*"+Hc+" is undefined!");if(Hc.power.lessThan(0)){if(sr.isInfinity)throw new r1("Infinity/Infinity is not defined!");return new h1(0)}var b4=sr.multiplier.multiply(Hc.multiplier).sign(),P1=h1.infinity();if(sr.isConstant()||Hc.isConstant()||sr.isInfinity&&Hc.isInfinity)return b4<0&&P1.negate(),P1}if(sr.isConstant()&&Hc.isConstant()&&g.PARSE2NUMBER){var $1=new u(sr.multiplier.toDecimal()).times(new u(Hc.multiplier.toDecimal())).toFixed(),t2=new h1($1);return t2}if(sr.isOne())return Hc.clone();if(Hc.isOne())return sr.clone();if(sr.multiplier.equals(0)||Hc.multiplier.equals(0))return new h1(0);if(Hc.group>sr.group&&Hc.group!==Xe)return this.multiply(Hc,sr);if(sr.group===De&&Hc.group===He&&sr.value===Hc.value){var $1=sr;sr=Hc,Hc=$1}var g2=sr.group,N2=Hc.group,F2=Hc.multiplier.num,J2=Hc.multiplier.den;if(g2===ve&&sr.fname===Vc&&!Hc.isConstant()&&sr.args[0].value===Hc.value&&!sr.args[0].multiplier.lessThan(0)){var w2=sr.power,u4=ae.parse(sr.multiplier);sr=ae.multiply(u4,sr.args[0].clone()),sr.setPower(new I2(.5).multiply(w2)),g2=sr.group}else g2===ve&&sr.fname===Vc&&sr.multiplier.equals(1)&&sr.power.equals(-1)&&Hc.isConstant()&&sr.args[0].equals(Hc)&&(sr=ae.symfunction(Vc,[Hc.clone()]),Hc=new h1(1));var a4=sr.value,c4=Hc.value,b4=new I2(sr.sign()),y4=g2===P&&N2===A&&Hc.multiplier.equals(sr.value),L4=y4?new I2(1).multiply(sr.multiplier).abs():sr.multiplier.multiply(Hc.multiplier).abs(),G2=sr.clone().toUnitMultiplier();if(Hc=Hc.clone().toUnitMultiplier(!0),g2===ve&&N2===ve){var h4=sr.args[0].clone(),V4=Hc.args[0].clone();if(sr.fname===Vc&&Hc.fname===Vc&&sr.isLinear()&&Hc.isLinear()){var k4=ae.divide(h4,V4).invert();k4.gt(1)&&p1(k4)&&(G2=ae.multiply(sr.args[0].clone(),M4(k4.clone())),Hc=new h1(1))}else if(sr.fname===Do&&Hc.fname===Do&&!h4.isConstant()&&!V4.isConstant()&&Hc.power<0){var K4=ae.subtract(h4.clone(),V4.clone());if(K4.isConstant())if($1=new h1(1),K4<0){for(var i3=0,q4=Math.abs(K4);i3<=q4;i3++){var Y4=ae.add(h4.clone(),new h1(i3));$1=ae.multiply($1,Y4)}G2=ae.multiply(ae.pow(h4,new h1(sr.power)),ae.pow($1,new h1(Hc.power))),Hc=new h1(1)}else{for(var i3=0,q4=Math.abs(K4);i3<=q4;i3++){var Y4=ae.add(V4.clone(),new h1(i3));$1=ae.multiply($1,Y4)}G2=ae.multiply(ae.pow($1,new h1(sr.power)),ae.pow(V4,new h1(Hc.power))),Hc=new h1(1)}}}if(a4===c4&&g2===He&&g2===N2&&(a4=sr.text("hash"),c4=Hc.text("hash")),N2===me&&Hc.previousGroup===He&&g2===He&&(a4=d4(sr,"hash",me)),(a4===c4||y4)&&!(g2===He&&(N2===W||N2===P||N2===ve))&&!(g2===He&&N2===De)){var e3=sr.power,A3=Hc.power,x3=T1(e3),n3=T1(A3),v3=x3||n3;if(g2===He&&N2!==He&&Hc.previousGroup!==He&&e3.equals(1))G2=new h1(0),sr.each(function(j3){G2=ae.add(G2,ae.multiply(j3,Hc.clone()))},!0);else{if(G2.power=v3?ae.add(T1(e3)?e3:new h1(e3),T1(A3)?A3:new h1(A3)):g2===A?e3:e3.add(A3),G2.power.equals(0)&&(G2=G2.convert(A)),v3&&G2.convert(me),sr.imaginary&&Hc.imaginary){var S6=v2(G2.power%2);S6&&(G2=new h1(1),L4.negate())}G2.group!==me&&G2.previousGroup&&(G2.previousGroup=void 0),G2.multiplier=G2.multiplier.multiply(Hc.multiplier)}}else if(g2===De&&sr.isLinear())if(N2===De&&Hc.distributeExponent(),N2===De&&Hc.isLinear()){for(var Y4 in Hc.symbols){var w3=Hc.symbols[Y4];G2=G2.combine(w3)}G2.multiplier=G2.multiplier.multiply(Hc.multiplier)}else G2.combine(Hc);else if(g2!==A){if(g2===De)G2.distributeExponent(),G2.combine(Hc);else if(!Hc.isOne()){var q3=Hc.multiplier.clone();Hc.toUnitMultiplier(),G2=h1.shell(De).combine([G2,Hc]),G2.multiplier=G2.multiplier.multiply(q3)}}else G2=Hc.clone().toUnitMultiplier();if(G2.group===P){var M6=Math.log(G2.value),g6=Math.log(F2)/M6,a3=Math.log(J2)/M6,z3=L4.num/F2,T3=L4.den/J2;g6!==0&&p1(g6)&&p1(z3)&&(G2.power=G2.power.add(new I2(g6)),L4.num/=F2),a3!==0&&p1(a3)&&p1(T3)&&(G2.power=G2.power.subtract(new I2(a3)),L4.den/=J2)}if(G2.length===1){var $1=G2.multiplier;G2=e1(G2.symbols),G2.multiplier=G2.multiplier.multiply($1)}var k6=G2.power.toString();if(v2(k6)&&G2.fname===Vc){b4=b4*G2.sign();var B6=G2.power;G2=G2.args[0],G2=ae.multiply(new h1(L4),ae.pow(G2,new h1(B6.divide(new I2(2))))),b4<0&&G2.negate()}else G2.multiplier=G2.multiplier.multiply(L4).multiply(b4),G2.group===Xe&&G2.isImaginary()&&G2.distributeMultiplier();return G2.group===P&&p1(G2.power.toDecimal())&&(G2=G2.convert(A)),G2}else{m1&&!l1&&($1=sr,sr=Hc,Hc=$1,$1=m1,m1=l1,l1=$1);var c5=_2(Hc),t5=_2(sr);if(l1&&c5){var N3=new Q2;Hc.eachElement(function(j3,f3,V6){N3.set(f3,V6,ae.multiply(sr.clone(),j3))}),Hc=N3}else if(t5&&c5)Hc=sr.multiply(Hc);else if(l1&&b2(Hc))Hc.each(function(j3,f3){f3--,Hc.elements[f3]=ae.multiply(sr.clone(),Hc.elements[f3])});else if(b2(sr)&&b2(Hc))Hc.each(function(j3,f3){f3--,Hc.elements[f3]=ae.multiply(sr.elements[f3],Hc.elements[f3])});else{if(b2(sr)&&_2(Hc))return this.multiply(Hc,sr);if(_2(sr)&&b2(Hc))if(Hc.elements.length===sr.rows()){var N3=new Q2,R5=sr.cols();return Hc.each(function(f3,V6){for(var q6=[],z6=0;z6<R5;z6++)q6.push(ae.multiply(sr.elements[V6-1][z6].clone(),f3.clone()));N3.elements.push(q6)}),N3}else Bs("Dimensions must match!")}return Hc}},this.divide=function(sr,Hc){var l1=T1(sr),m1=T1(Hc);if(l1&&m1){if(sr.unit||Hc.unit)return ae.Unit.divide(sr,Hc);var P1;if(Hc.equals(0))throw new Ym("Division by zero not allowed!");return sr.isConstant()&&Hc.isConstant()?(P1=sr.clone(),P1.multiplier=P1.multiplier.divide(Hc.multiplier)):(Hc.invert(),P1=ae.multiply(sr,Hc)),P1}else{var $1=b2(sr),t2=b2(Hc);if(l1&&t2)Hc=Hc.map(function(J2){return ae.divide(sr.clone(),J2)});else if($1&&m1)Hc=sr.map(function(J2){return ae.divide(J2,Hc.clone())});else if($1&&t2)sr.dimensions()===Hc.dimensions()?Hc=Hc.map(function(J2,w2){return ae.divide(sr.elements[--w2],J2)}):ae.error("Cannot divide vectors. Dimensions do not match!");else{var g2=_2(sr),N2=_2(Hc);if(g2&&m1){var F2=new Q2;sr.eachElement(function(J2,w2,u4){F2.set(w2,u4,ae.divide(J2,Hc.clone()))}),Hc=F2}else if(l1&&N2){var F2=new Q2;Hc.eachElement(function(w2,u4,a4){F2.set(u4,a4,ae.divide(sr.clone(),w2))}),Hc=F2}else if(g2&&N2){var F2=new Q2;sr.rows()===Hc.rows()&&sr.cols()===Hc.cols()?(sr.eachElement(function(w2,u4,a4){F2.set(u4,a4,ae.divide(w2,Hc.elements[u4][a4]))}),Hc=F2):ae.error("Dimensions do not match!")}else if(g2&&t2)if(sr.cols()===Hc.dimensions()){var F2=new Q2;sr.eachElement(function(w2,u4,a4){F2.set(u4,a4,ae.divide(w2,Hc.elements[u4].clone()))}),Hc=F2}else ae.error("Unable to divide matrix by vector.")}return Hc}},this.pow=function(sr,Hc){var l1=T1(sr),m1=T1(Hc);if(l1&&m1){if(sr.unit||Hc.unit)return ae.Unit.pow(sr,Hc);if(sr.group===ve&&sr.fname===So&&v2(Hc)){var J2=sr.multiplier.clone(),P1=ae.pow(sr.args[0],Hc);return P1.multiplier=J2,P1}if(sr.isInfinity||Hc.isInfinity){if(sr.isInfinity&&Hc.isInfinity)throw new r1("("+sr+")^("+Hc+") is undefined!");if(sr.isConstant()&&Hc.isInfinity){if(sr.equals(0)){if(Hc.lessThan(0))throw new r1("0^Infinity is undefined!");return new h1(0)}if(sr.equals(1))throw new r1("1^"+Hc.toString()+" is undefined!");if(Hc.lessThan(0))return new h1(0);if(!sr.lessThan(0))return h1.infinity()}if(sr.isInfinity&&Hc.isConstant()){if(Hc.equals(0))throw new r1(sr+"^0 is undefined!");return Hc.lessThan(0)?new h1(0):ae.multiply(h1.infinity(),ae.pow(new h1(sr.sign()),Hc.clone()))}}var $1=sr.equals(0),t2=Hc.equals(0);if($1&&t2)throw new r1("0^0 is undefined!");if($1&&Hc.isConstant()&&Hc.multiplier.greaterThan(0))return new h1(0);if(t2)return new h1(1);var g2=Hc.isConstant(),N2=sr.isConstant(),F2=Hc.isInteger(),J2=sr.multiplier,w2=sr.clone();if(N2&&g2&&sr.equals(0)&&Hc.lessThan(0))throw new r1("Division by zero is not allowed!");if(g.PARSE2NUMBER&&N2&&g2&&sr.sign()<0&&z2(Hc)){var u4,a4,c4;return u4=Math.PI*Hc,a4=new h1(Math.cos(u4)),c4=ae.multiply(h1.imaginary(),new h1(Math.sin(u4))),ae.add(a4,c4)}if(g.PARSE2NUMBER&&sr.isImaginary()&&g2&&p1(Hc)&&!Hc.lessThan(0)){var a4,c4,b4,y4,L4,G2,h4;if(a4=sr.realpart(),c4=sr.imagpart(),a4.isConstant("all")&&c4.isConstant("all"))return h4=g.USE_BIG?h1(u.atan2(A3.multiplier.toDecimal(),b4.multiplier.toDecimal()).times(Hc.toString())):Math.atan2(c4,a4)*Hc,y4=new h1(h4),b4=ae.pow(h1.hyp(a4,c4),Hc),L4=ae.multiply(b4.clone(),ae.trig.cos(y4.clone())),G2=ae.multiply(b4,ae.trig.sin(y4)),ae.add(L4,ae.multiply(h1.imaginary(),G2))}if(w2.toUnitMultiplier(),w2.group===ve&&w2.fname===Vc&&!g2){var V4=w2.args[0];V4.multiplyPower(new h1(.5)),V4.multiplier.multiply(w2.multiplier),V4.multiplyPower(Hc),w2=V4}else{var k4=J2.sign();z2(Hc)&&k4<0&&(w2.negate(),w2=ae.symfunction(Rs,[w2]),w2.negate()),w2.multiplyPower(Hc)}if(N2&&g2&&g.PARSE2NUMBER){var K4;k4<0&&(sr.negate(),Hc.multiplier.den.equals(2)?K4=new h1(g.IMAGINARY):p1(Hc.multiplier)?v2(Hc.multiplier)?K4=new h1(1):K4=new h1(-1):v2(Hc.multiplier.den)?K4=ae.pow(ae.symfunction(Rs,[new h1(k4)]),Hc.clone()):K4=new h1(Math.pow(k4,Hc.multiplier.num))),w2=new h1(Math.pow(sr.multiplier.toDecimal(),Hc.multiplier.toDecimal())),K4&&(w2=ae.multiply(w2,K4))}else if(F2&&!J2.equals(1)){var i3=Hc.abs();if(i3.gt(g.MAX_EXP))return Hc.sign()<0?new h1(0):h1.infinity();var q4=Hc.multiplier.toDecimal(),Y4=Math.sign(q4);q4=Math.abs(q4);var e3=new I2(1);e3.num=J2.num.pow(q4),e3.den=J2.den.pow(q4),Y4<0&&e3.invert(),w2.multiplier=w2.multiplier.multiply(e3)}else{var k4=sr.sign();if(Hc.isConstant()&&sr.isConstant()&&!Hc.multiplier.den.equals(1)&&k4<0)if(Hc.multiplier.den.equals(2)){var A3=new h1(g.IMAGINARY);sr.negate(),Hc.lessThan(0)&&(A3.negate(),Hc.negate()),w2=ae.multiply(ae.pow(sr,Hc),A3)}else{var x3=sr.clone();x3.multiplier.negate(),w2=ae.pow(ae.symfunction(Rs,[new h1(k4)]),Hc.clone());var n3=ae.pow(new h1(x3.multiplier.num),Hc.clone()),v3=ae.pow(new h1(x3.multiplier.den),Hc.clone()),b4=ae.divide(n3,v3);w2=ae.multiply(w2,b4)}else if(g.PARSE2NUMBER&&Hc.isImaginary()){var a4=Hc.realpart(),c4=Hc.imagpart(),x3=sr.clone().toLinear(),S6=ae.pow(x3.clone(),a4),w3=g3(x3.clone()),q3=A1.cos(ae.multiply(c4.clone(),w3)),M6=ae.multiply(A1.sin(ae.multiply(c4,g3(x3))),h1.imaginary());w2=ae.multiply(S6,ae.add(q3,M6)),w2=ae.expand(ae.parse(w2))}else{var g6=sr.group===A&&k4<0,a3=L3(new h1(g6?J2.num:Math.abs(J2.num)).setPower(Hc.clone())),z3=L3(new h1(J2.den).setPower(Hc.clone()).invert());if(sr.imaginary)if(F2){var V4,q4,T3;V4=Math.sign(Hc),q4=D4(Hc),T3=q4%4,w2=new h1(v2(T3)?-1:g.IMAGINARY),(T3===0||V4<0&&T3===1||V4>0&&T3===3)&&w2.negate()}else{var k6=Hc.multiplier.multiply(I2.quick(1,2)),B6=Math.pow(-1,k6.num);w2=v2(k6.den)?new h1(-1).setPower(k6,!0):new h1(B6)}if(k4<0&&!g6&&w2.negate(),g2&&sr.group!==me){var c5=v2(Hc.multiplier.den),t5=v2(sr.power),T3=w2.power.toDecimal(),N3=v2(T3);if(c5&&t5&&!N3){if(T3===1)w2=ae.symfunction(So,[w2]);else if(p1(T3))w2=ae.multiply(ae.symfunction(So,[w2.clone().toLinear()]),w2.clone().setPower(new I2(T3-1)));else{var q4=w2.power;w2=ae.symfunction(So,[w2.toLinear()]).setPower(q4)}g.POSITIVE_MULTIPLIERS&&w2.fname===So&&(w2=w2.args[0])}}if(Hc.equals(2)&&w2.group===De){var R5=new h1(1);w2.each(function(r5){R5=ae.multiply(R5,ae.pow(r5,Hc))}),w2=R5}}}if(w2=L3(w2),a3&&z3&&(w2=ae.multiply(w2,V3(ae.multiply(a3,z3)))),w2.fname===Vc){var j3=w2.group===me,f3=j3?w2.power.multiplier.toString():w2.power.toString();if(v2(f3)){var V6=j3?ae.divide(w2.power,new h1(2)):new h1(w2.power.divide(new I2(2))),J2=w2.multiplier;w2=ae.pow(w2.args[0],V6),w2.multiplier=w2.multiplier.multiply(J2)}}else if(!g.IGNORE_E&&w2.isE()&&w2.group===me&&w2.power.contains("pi")&&w2.power.contains(g.IMAGINARY)&&Hc.group===De){var y4=Hc.stripVar(g.IMAGINARY);w2=ae.add(A1.cos(y4),ae.multiply(h1.imaginary(),A1.sin(y4)))}return w2}else{if(b2(sr)&&m1)sr=sr.map(function(z6){return ae.pow(z6,Hc.clone())});else if(_2(sr)&&m1){var q6=new Q2;sr.eachElement(function(z6,r5,ev){q6.set(r5,ev,ae.pow(z6,Hc.clone()))}),sr=q6}else if(l1&&_2(Hc)){var q6=new Q2;Hc.eachElement(function(r5,ev,M5){q6.set(ev,M5,ae.pow(sr.clone(),r5))}),sr=q6}return sr}},this.comma=function(sr,Hc){return sr instanceof n1||(sr=n1.create(sr)),sr.append(Hc),sr},this.mod=function(sr,Hc){return Z4(sr,Hc)},this.slice=function(sr,Hc){return new ff(sr,Hc)},this.equals=function(sr,Hc){return sr.group!==W&&!sr.isLinear()&&Bs("Cannot set equality for "+sr.toString()),Ge[sr.value]=Hc.clone(),Hc},this.percent=function(sr){return ae.divide(sr,new h1(100))},this.assign=function(sr,Hc){if(sr instanceof n1&&Hc instanceof n1)return sr.elements.map(function(m1,P1){return ae.assign(m1,Hc.elements[P1])}),I4.fromArray(Hc.elements);if(sr.parent){var l1=sr.parent;return l1.elements[l1.getter]=Hc,delete l1.getter,l1}if(sr.group!==W)throw new $2("Cannot complete operation. Incorrect LH value for "+sr);return Ge[sr.value]=Hc,Hc},this.function_assign=function(sr,Hc){var l1=sr.elements.pop();return C1(l1,sr.elements,Hc)};var m6=function(sr){return new h1(sr===!0?1:0)};this.eq=function(sr,Hc){return m6(sr.equals(Hc))},this.gt=function(sr,Hc){return m6(sr.gt(Hc))},this.gte=function(sr,Hc){return m6(sr.gte(Hc))},this.lt=function(sr,Hc){return m6(sr.lt(Hc))},this.lte=function(sr,Hc){return m6(sr.lte(Hc))},this.factorial=function(sr){return this.symfunction(Do,[sr])},this.dfactorial=function(sr){return this.symfunction(eh,[sr])}}var s6={convert:function(ae,To){var wh;if(ae===0)wh=[0,1];else if(ae<1e-6||ae>1e20){var ff=this.quickConversion(Number(ae));if(ff[1]<=1e20){var n1=Math.abs(ae),c1=ae/n1;wh=this.fullConversion(n1.toFixed((ff[1]+"").length-1)),wh[0]=wh[0]*c1}else wh=ff}else wh=this.fullConversion(ae);return wh},quickConversion:function(ae){var To=function(ff){typeof ff!="string"&&(ff=ff.toString());var n1="",c1=ff.charAt(0);return c1==="-"?(ff=ff.substr(1,ff.length),n1="-"):c1==="+"&&(ff=ff.substr(1,ff.length)),{sign:n1,value:ff}};function wh(ff){f4.isScientific(ff)&&(ff=Mh(ff));var n1=To(ff),c1=n1.value.split("."),u1;c1.length===1?u1=c1[0]:u1=c1[0]+c1[1];var A1=c1[1]?c1[1].length:0,u2=`1${"0".repeat(A1)}`;return u1!=="0"&&(u1=u1.replace(/^0+/,"")),[n1.sign+u1,u2]}return wh(ae)},fullConversion:function(ae){for(var To=!1,wh=0,ff=1,n1=1,c1=0,u1=0,A1=ae,u2=1e-16;!To;){u1++,u1>1e4&&(To=!0);var s2=Math.floor(A1),h2=wh+s2*n1,K2=ff+s2*c1,R2=A1-s2;R2<u2&&(To=!0),A1=1/R2,wh=n1,ff=c1,n1=h2,c1=K2,(Math.abs(h2/K2-ae)<u2||u1>30)&&(To=!0)}return[h2,K2]}},g4={parser:function(){var ae=["classes","setOperator","getOperators","getBrackets","tokenize","toRPN","tree","units"],To=new H4;for(var wh in To)ae.indexOf(wh)===-1&&delete To[wh];To.setOperator({precedence:8,operator:"\\",action:"slash",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(n1){return n1}}),To.setOperator({precedence:8,operator:"\\,",action:"slash_comma",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(n1){return n1}});var ff=To.getBrackets();return ff["{"].maps_to=void 0,To}(),space:"~",dot:" \\cdot ",latex:function(ae,To){if(ae.clone&&(ae=ae.clone()),ae instanceof o.classes.Collection&&(ae=ae.elements),x2(ae)){for(var wh=[],ff=0;ff<ae.length;ff++){var n1=ae[ff];T1(n1)||(n1=o.parse(n1)),wh.push(this.latex(n1,To))}return this.brackets(wh.join(", "),"square")}else if(_2(ae)){for(var c1=`\\begin{pmatrix}
`,ff=0;ff<ae.elements.length;ff++){for(var u1=[],A1=ae.elements[ff],u2=0;u2<A1.length;u2++)u1.push(this.latex(A1[u2],To));c1+=u1.join(" & "),ff<ae.elements.length-1&&(c1+=`\\\\
`)}return c1+="\\end{pmatrix}",c1}else if(b2(ae)){for(var c1="\\left[",ff=0;ff<ae.elements.length;ff++)c1+=this.latex(ae.elements[ff],To)+" "+(ff!==ae.elements.length-1?",\\,":"");return c1+="\\right]",c1}else if(q1(ae)){for(var c1="\\{",ff=0;ff<ae.elements.length;ff++)c1+=this.latex(ae.elements[ff],To)+" "+(ff!==ae.elements.length-1?",\\,":"");return c1+="\\}",c1}ae=ae.clone();var s2=To==="decimal"||To==="decimals",h2=ae.power,K2=S1(h2),R2=ae.multiplier.lessThan(0);if(ae.group===P&&s2)return String(ae.multiplier.toDecimal()*Math.pow(ae.value,ae.power.toDecimal()));ae.multiplier=ae.multiplier.abs();var V2;if(s2){var e4=String(ae.multiplier.toDecimal());V2=[e4,""]}else V2=[ae.multiplier.num,ae.multiplier.den];var t4=this.value(ae,K2,To,R2),v4;K2&&h2.negate(),s2?(v4=T1(h2)?g4.latex(h2,To):String(h2.toDecimal()),String(v4)==="1"&&(v4="")):T1(h2)?v4=this.latex(h2,To):v4=this.formatFrac(h2,!0);var w4=["",""],T4=K2?1:0;w4[T4]=v4;var D4=(R2?"-":"")+this.set(V2,t4,w4,ae.group===De);return D4.replace(/\+\-/gi,"-")},greek:{alpha:"\\alpha",beta:"\\beta",gamma:"\\gamma",delta:"\\delta",epsilon:"\\epsilon",zeta:"\\zeta",eta:"\\eta",theta:"\\theta",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",mu:"\\mu",nu:"\\nu",xi:"\\xi",omnikron:"\\omnikron",pi:"\\pi",rho:"\\rho",sigma:"\\sigma",tau:"\\tau",upsilon:"\\upsilon",phi:"\\phi",chi:"\\chi",psi:"\\psi",omega:"\\omega",Gamma:"\\Gamma",Delta:"\\Delta",Epsilon:"\\Epsilon",Theta:"\\Theta",Lambda:"\\Lambda",Xi:"\\Xi",Pi:"\\Pi",Sigma:"\\Sigma",Phi:"\\Phi",Psi:"\\Psi",Omega:"\\Omega"},symbols:{arccos:"\\arccos",cos:"\\cos",csc:"\\csc",exp:"\\exp",ker:"\\ker",limsup:"\\limsup",min:"\\min",sinh:"\\sinh",arcsin:"\\arcsin",cosh:"\\cosh",deg:"\\deg",gcd:"\\gcd",lg:"\\lg",ln:"\\ln",Pr:"\\Pr",sqrt:"\\sqrt",sup:"\\sup",arctan:"\\arctan",cot:"\\cot",det:"\\det",hom:"\\hom",lim:"\\lim",log:"\\log",LN:"\\LN",sec:"\\sec",tan:"\\tan",arg:"\\arg",coth:"\\coth",dim:"\\dim",inf:"\\inf",liminf:"\\liminf",max:"\\max",sin:"\\sin",tanh:"\\tanh"},value:function(ae,To,wh,ff){var n1=ae.group,c1=ae.previousGroup,u1=["",""],A1=To?1:0;if(ae.isInfinity)u1[A1]="\\infty";else if(n1===W||n1===P||c1===W||c1===P||c1===A){var u2=this.formatSubscripts(ae.value);u2.replace&&(u2=u2.replace(/(.+)_$/,"$1\\_"));var s2=String(u2).split("_"),h2=this.greek[s2[0]];h2&&(s2[0]=h2,u2=s2.join("_"));var ae=this.symbols[s2[0]];ae&&(s2[0]=ae,u2=s2.join("_")),u1[A1]=u2}else if(n1===ve||c1===ve){for(var K2,R2=[],V2=ae.fname,e4=0;e4<ae.args.length;e4++){var t4=ae.args[e4],v4;typeof t4=="string"?v4=t4:v4=this.latex(t4,wh),R2.push(v4)}if(V2===Vc)u1[A1]="\\sqrt"+this.braces(R2.join(","));else if(V2===So)u1[A1]=this.brackets(R2.join(","),"abs");else if(V2===Rs)u1[A1]=this.brackets(R2.join(","),"parens");else if(V2==="limit")u1[A1]=" \\lim\\limits_{"+R2[1]+" \\to "+R2[2]+"} "+R2[0];else if(V2==="integrate")u1[A1]="\\int"+this.braces(R2[0])+this.braces("d"+R2[1]);else if(V2==="defint")u1[A1]="\\int\\limits_"+this.braces(R2[1])+"^"+this.braces(R2[2])+" "+R2[0]+" d"+R2[3];else if(V2===Do||V2===eh){var t4=ae.args[0];t4.power.equals(1)&&(t4.isComposite()||t4.isCombination())&&(R2[0]=this.brackets(R2[0])),u1[A1]=R2[0]+(V2===Do?"!":"!!")}else if(V2==="floor")u1[A1]="\\left \\lfloor"+this.braces(R2[0])+"\\right \\rfloor";else if(V2==="ceil")u1[A1]="\\left \\lceil"+this.braces(R2[0])+"\\right \\rceil";else if(V2===g.LOG&&R2.length>1)u1[A1]="\\mathrm"+this.braces(g.LOG)+"_"+this.braces(R2[1])+this.brackets(R2[0]);else if(V2===g.LOG10)u1[A1]="\\mathrm"+this.braces(g.LOG)+"_"+this.braces(10)+this.brackets(R2[0]);else if(V2==="sum"){var w4=R2[0],T4=R2[1],D4=R2[2],C4=R2[3];u1[A1]="\\sum\\limits_{"+this.braces(T4)+"="+this.braces(D4)+"}^"+this.braces(C4)+" "+this.braces(w4)}else if(V2==="product"){var w4=R2[0],T4=R2[1],D4=R2[2],C4=R2[3];u1[A1]="\\prod\\limits_{"+this.braces(T4)+"="+this.braces(D4)+"}^"+this.braces(C4)+" "+this.braces(w4)}else if(V2==="nthroot")u1[A1]="\\sqrt["+R2[1]+"]"+this.braces(R2[0]);else if(V2==="mod")u1[A1]=R2[0]+" \\bmod "+R2[1];else if(V2==="realpart")u1[A1]="\\operatorname{Re}"+this.brackets(R2[0]);else if(V2==="imagpart")u1[A1]="\\operatorname{Im}"+this.brackets(R2[0]);else{var K2=V2!==""?"\\mathrm"+this.braces(V2.replace(/_/g,"\\_")):"";ae.isConversion?u1[A1]=K2+this.brackets(R2.join(""),"parens"):u1[A1]=K2+this.brackets(R2.join(","),"parens")}}else if(ae.isComposite()){for(var s4=ae.collectSymbols().sort(n1===Xe||c1===Xe?function(E3,J4){return J4.group-E3.group}:function(E3,J4){var e6=T1(E3.power)?-1:E3.power,X3=T1(J4.power)?-1:J4.power;return X3-e6}),Z4=[],h3=s4.length,e4=0;e4<h3;e4++)Z4.push(g4.latex(s4[e4],wh));var u2=Z4.join("+");u1[A1]=!(ae.isLinear()&&ae.multiplier.equals(1))||ff?this.brackets(u2,"parens"):u2}else if(n1===De||c1===me||c1===De){n1===De&&ae.distributeExponent();var r3=[],R4=[],B4=[],N4=[],W4=0,m3=0,M4=function(p4,E3,J4){if(J4>1&&E3.length>0)for(var e6=E3.length,X3=0;X3<e6;X3++){var t6=E3[X3],I3=p4[t6];/^\\left\(.+\\right\)\^\{.+\}$/g.test(I3)||/^\\left\(.+\\right\)$/g.test(I3)||(p4[t6]=g4.brackets(I3,"parens"))}return p4};ae.each(function(p4){var E3=S1(p4.power),J4;E3?(J4=g4.latex(p4.invert(),wh),m3++,p4.isComposite()&&(ae.multiplier.den!=1&&Math.abs(p4.power)==1&&(J4=g4.brackets(J4,"parens")),B4.push(r3.length)),r3.push(J4)):(J4=g4.latex(p4,wh),W4++,p4.isComposite()&&(ae.multiplier.num!=1&&Math.abs(p4.power)==1&&(J4=g4.brackets(J4,"parens")),N4.push(R4.length)),R4.push(J4))}),M4(R4,N4,W4),u1[0]=R4.join(this.dot),M4(r3,B4,m3),u1[1]=r3.join(this.dot)}return u1},set:function(ae,To,wh,ff){var n1=function(V2){return/^\\left\(.+\\right\)$/.test(V2)};if(wh&&(wh=this.formatP(wh)),ff){var c1=wh[0];wh[0]=""}To=this.merge(To,wh);var u1=ae[0],A1=ae[1],u2=To[0],s2=To[1];u2&&Number(u1)===1&&(u1=""),Number(A1)===1&&(A1="");var h2=this.join(u1,u2,n1(u2)?"":this.dot),K2=this.join(A1,s2,n1(s2)?"":this.dot);if(h2&&K2){var R2=this.frac(h2,K2);return ff&&c1&&(R2=this.brackets(R2)+c1),R2}else return h2},merge:function(ae,To){for(var wh=[],ff=0;ff<2;ff++)wh[ff]=ae[ff]+To[ff];return wh},join:function(ae,To,wh){return!ae&&!To?"":ae&&!To?ae:To&&!ae?To:ae+wh+To},formatSubscripts:function(ae){for(var To=ae.toString().split("_"),wh="";To.length>1;)To.length>0&&(wh="_"+this.braces(To.pop()+wh));return To[0]+wh},formatP:function(ae){for(var To=0;To<2;To++){var wh=ae[To];wh&&(ae[To]="^"+this.braces(wh))}return ae},formatFrac:function(ae,To){var wh=ae.num.toString(),ff=ae.den.toString();return To&&wh==="1"&&ff==="1"?"":ff==="1"?wh:this.frac(wh,ff)},frac:function(ae,To){return"\\frac"+this.braces(ae)+this.braces(To)},braces:function(ae){return"{"+ae+"}"},brackets:function(ae,To){To=To||"parens";var wh={parens:["(",")"],square:["[","]"],brace:["{","}"],abs:["|","|"],angle:["\\langle","\\rangle"]},ff=wh[To];return"\\left"+ff[0]+ae+"\\right"+ff[1]},filterTokens:function(ae){var To=[];x2(ae)&&(To.type=ae.type);for(var wh=["\\","left","right","big","Big","large","Large"],ff=0,n1=ae.length;ff<n1;ff++){var c1=ae[ff],u1=ae[ff+1];c1.value==="\\"&&u1.value==="\\"?To.push(c1):x2(c1)?To.push(g4.filterTokens(c1)):wh.indexOf(c1.value)===-1&&To.push(c1)}return To},parse:function(ae){var To,wh,ff="",n1=this.filterTokens(ae),c1={cdot:"",times:"",infty:"Infinity"},u1=function(s4){return n1[typeof s4>"u"?++To:To+=s4]},A1=function(){return g4.parse(u1())},u2=function(s4){return s4 in c1?c1[s4]:s4==="*"&&n1[To+1].value==="&"?(u1(2),","):s4==="&"?(u1(),","):s4==="\\"?"],[":s4};for(To=0,wh=n1.length;To<wh;To++){var s2=n1[To];if(s2.value==="frac"){var h2=A1(),K2=A1();ff+=h2+"/"+K2}else if(s2.value in g4.symbols)if(s2.value===Vc&&n1[To+1].type==="vector"&&n1[To+2].type==="Set"){var R2=A1(),V2=A1();ff+=V2+"^"+_1("1/"+R2)}else ff+=s2.value+A1();else if(s2.value==="int"){var e4=A1();To++;var t4=u1().value;t4=u2(t4.substring(1,t4.length)),ff+="integrate"+_1(e4+","+t4)}else if(s2.value==="int_"){var wh=A1();To++;var v4=u1().value;if(v4===void 0){To--;var v4=A1()}var e4=A1(),t4=u1().value;if(t4===",")var t4=u1().value;if(t4==="differentialD"){To++;var t4=u1().value}if(t4==="mathrm"){To++;var t4=u1().value}ff+="defint"+_1(e4+","+wh+","+v4+","+t4)}else if(s2.value&&s2.value.startsWith("int_")){var wh=s2.value.replace("int_","");console.log("uppernow"),To++;var v4=u1().value;if(v4===void 0){To--;var v4=A1()}var e4=A1(),t4=u1().value;if(t4===",")var t4=u1().value;if(t4==="differentialD"){To++;var t4=u1().value}if(t4==="mathrm"){To++;var t4=u1().value}ff+="defint"+_1(e4+","+wh+","+v4+","+t4)}else if(s2.value==="mathrm"){var e4=n1[++To][0].value;ff+=e4+A1()}else if(s2.value==="sum_"||s2.value==="prod_"){var w4=s2.value==="sum_"?"sum":"product",T4=u1();To++;var D4=A1(),e4=A1();ff+=w4+_1([e4,u2(T4[0]),u2(T4[2]),u2(D4)].join(","))}else if(s2.value==="lim_"){var T4=u1();ff+="limit"+_1([A1(),u2(T4[0]),u2(T4[2])].join(","))}else if(s2.value==="begin"){var T4=u1();if(Array.isArray(T4)){var C4=T4[0].value;C4==="matrix"&&(ff+="matrix([")}}else if(s2.value==="end"){var T4=u1();if(Array.isArray(T4)){var C4=T4[0].value;C4==="matrix"&&(ff+="])")}}else Array.isArray(s2)?ff+=u2(g4.parse(s2)):ff+=u2(s2.value.toString())}return _1(ff)}};function I4(ae){b2(ae)?this.elements=ae.items.slice(0):x2(ae)?this.elements=ae.slice(0):this.elements=[].slice.call(arguments)}I4.arrayPrefill=function(ae,To){var wh=[];To=To||0;for(var ff=0;ff<ae;ff++)wh[ff]=To;return wh},I4.fromArray=function(ae){var To=new I4;return To.elements=ae,To},I4.fromSet=function(ae){return I4.fromArray(ae.elements)},I4.prototype={custom:!0,e:function(ae){return ae<1||ae>this.elements.length?null:this.elements[ae-1]},set:function(ae,To){T1(To)||(To=new h1(To)),this.elements[ae]=To},dimensions:function(){return this.elements.length},modulus:function(){return k1("SAFE",function(){return o.pow(this.dot(this.clone()),new h1(.5))},void 0,this)},eql:function(ae){var To=this.elements.length,wh=ae.elements||ae;if(To!==wh.length)return!1;do if(Math.abs(o.subtract(this.elements[To-1],wh[To-1]).valueOf())>PRECISION)return!1;while(--To);return!0},clone:function(){for(var ae=new I4,To=this.elements.length,wh=0;wh<To;wh++)ae.elements.push(this.elements[wh].clone());return this.getter&&(ae.getter=this.getter.clone()),ae},map:function(ae){var To=[];return this.each(function(wh,ff){To.push(ae(wh,ff))}),new I4(To)},each:function(ae){var To=this.elements.length,wh=To,ff;do ff=wh-To,ae(this.elements[ff],ff+1);while(--To)},toUnitVector:function(){return k1("SAFE",function(){var ae=this.modulus();return ae.valueOf()===0?this.clone():this.map(function(To){return o.divide(To,ae)})},void 0,this)},angleFrom:function(ae){return k1("SAFE",function(){var To=ae.elements||ae,wh=this.elements.length;if(wh!==To.length)return null;var ff=new h1(0),n1=new h1(0),c1=new h1(0);this.each(function(s2,h2){ff=o.add(ff,o.multiply(s2,To[h2-1])),n1=o.add(n1,o.multiply(s2,s2)),c1=o.add(c1,o.multiply(To[h2-1],To[h2-1]))}),n1=o.pow(n1,new h1(.5)),c1=o.pow(c1,new h1(.5));var u1=o.multiply(n1,c1);if(u1.valueOf()===0)return null;var A1=o.divide(ff,u1),u2=A1.valueOf();return u2<-1&&(A1=-1),u2>1&&(A1=1),new h1(Math.acos(A1))},void 0,this)},isParallelTo:function(ae){var To=this.angleFrom(ae).valueOf();return To===null?null:To<=PRECISION},isAntiparallelTo:function(ae){var To=this.angleFrom(ae).valueOf();return To===null?null:Math.abs(To-Math.PI)<=PRECISION},isPerpendicularTo:function(ae){var To=this.dot(ae);return To===null?null:Math.abs(To)<=PRECISION},add:function(ae){return k1("SAFE",function(){var To=ae.elements||ae;return this.elements.length!==To.length?null:this.map(function(wh,ff){return o.add(wh,To[ff-1])})},void 0,this)},subtract:function(ae){return k1("SAFE",function(){var To=ae.elements||ae;return this.elements.length!==To.length?null:this.map(function(wh,ff){return o.subtract(wh,To[ff-1])})},void 0,this)},multiply:function(ae){return this.map(function(To){return To.clone()*ae.clone()})},x:function(ae){return this.multiply(ae)},dot:function(ae){return k1("SAFE",function(){var To=ae.elements||ae,wh=new h1(0),ff=this.elements.length;if(ff!==To.length)return null;do wh=o.add(wh,o.multiply(this.elements[ff-1],To[ff-1]));while(--ff);return wh},void 0,this)},cross:function(ae){var To=ae.elements||ae;if(this.elements.length!==3||To.length!==3)return null;var wh=this.elements;return k1("SAFE",function(){return new I4([o.subtract(o.multiply(wh[1],To[2]),o.multiply(wh[2],To[1])),o.subtract(o.multiply(wh[2],To[0]),o.multiply(wh[0],To[2])),o.subtract(o.multiply(wh[0],To[1]),o.multiply(wh[1],To[0]))])},void 0,this)},max:function(){var ae=0,To=this.elements.length,wh=To,ff;do ff=wh-To,Math.abs(this.elements[ff].valueOf())>Math.abs(ae.valueOf())&&(ae=this.elements[ff]);while(--To);return ae},magnitude:function(){var ae=new h1(0);return this.each(function(To){ae=o.add(ae,o.pow(To,new h1(2)))}),o.sqrt(ae)},indexOf:function(ae){var To=null,wh=this.elements.length,ff=wh,n1;do n1=ff-wh,To===null&&this.elements[n1].valueOf()===ae.valueOf()&&(To=n1+1);while(--wh);return To},text:function(ae){return d4(this)},toString:function(){return this.text()},latex:function(ae){for(var To=[],wh=0;wh<this.elements.length;wh++)To.push(g4.latex.call(g4,this.elements[wh],ae));return"["+To.join(", ")+"]"}};function Q2(){var ae=arguments,To=ae.length,wh,ff=[];if(_2(ae))for(wh=0;wh<To;wh++)ff.push(ae[wh].slice(0));else{var n1,c1,u1;for(wh=0;wh<To;wh++)n1=ae[wh],b2(n1)&&(n1=n1.elements),x2(n1)||(n1=[n1]),u1=n1.length,c1&&c1!==u1&&Bs("Unable to create Matrix. Row dimensions do not match!"),ff.push(n1),c1=u1}this.elements=ff}Q2.identity=function(ae){for(var To=new Q2,wh=0;wh<ae;wh++){To.elements.push([]);for(var ff=0;ff<ae;ff++)To.set(wh,ff,wh===ff?new h1(1):new h1(0))}return To},Q2.fromArray=function(ae){function To(wh){return Q2.apply(this,wh)}return To.prototype=Q2.prototype,new To(ae)},Q2.zeroMatrix=function(ae,To){for(var wh=new Q2,ff=0;ff<ae;ff++)wh.elements.push(I4.arrayPrefill(To,new h1(0)));return wh},Q2.prototype={custom:!0,get:function(ae,To){if(this.elements[ae])return this.elements[ae][To]},map:function(ae,To){var wh=new Q2;return this.each(function(ff,n1,c1){wh.set(n1,c1,ae.call(wh,ff),To)}),wh},set:function(ae,To,wh,ff){this.elements[ae]||(this.elements[ae]=[]),this.elements[ae][To]=ff||T1(wh)?wh:new h1(wh)},cols:function(){return this.elements[0].length},rows:function(){return this.elements.length},row:function(ae){return!ae||ae>this.cols()?[]:this.elements[ae-1]},col:function(ae){var To=this.rows(),wh=[];if(ae>this.cols()||!ae)return wh;for(var ff=0;ff<To;ff++)wh.push(this.elements[ff][ae-1]);return wh},eachElement:function(ae){var To=this.rows(),wh=this.cols(),ff,n1;for(ff=0;ff<To;ff++)for(n1=0;n1<wh;n1++)ae.call(this,this.elements[ff][n1],ff,n1)},determinant:function(){if(!this.isSquare())return null;var ae=this.toRightTriangular(),To=ae.elements[0][0],wh=ae.elements.length-1,ff=wh,n1;do n1=ff-wh+1,To=o.multiply(To,ae.elements[n1][n1]);while(--wh);return To},isSquare:function(){return this.elements.length===this.elements[0].length},isSingular:function(){return this.isSquare()&&this.determinant()===0},augment:function(ae){var To=this.rows(),wh=ae.rows();To!==wh&&Bs("Cannot augment matrix. Rows don't match.");for(var ff=0;ff<To;ff++)this.elements[ff]=this.elements[ff].concat(ae.elements[ff]);return this},clone:function(){for(var ae=this.rows(),To=this.cols(),wh=new Q2,ff=0;ff<ae;ff++){wh.elements[ff]=[];for(var n1=0;n1<To;n1++){var c1=this.elements[ff][n1];wh.elements[ff][n1]=T1(c1)?c1.clone():c1}}return wh},invert:function(){return this.isSquare()||Bs("Matrix is not square!"),k1("SAFE",function(){var ae=this.elements.length,To=ae,wh,ff,n1=Q2.identity(ae),c1=this.augment(n1).toRightTriangular(),u1,A1=c1.elements[0].length,u2,s2,h2,K2=[],R2;do{wh=ae-1,s2=[],u1=A1,K2[wh]=[],h2=c1.elements[wh][wh];do u2=A1-u1,R2=o.divide(c1.elements[wh][u2],h2.clone()),s2.push(R2),u2>=To&&K2[wh].push(R2);while(--u1);for(c1.elements[wh]=s2,ff=0;ff<wh;ff++){s2=[],u1=A1;do u2=A1-u1,s2.push(o.subtract(c1.elements[ff][u2].clone(),o.multiply(c1.elements[wh][u2].clone(),c1.elements[ff][wh].clone())));while(--u1);c1.elements[ff]=s2}}while(--ae);return Q2.fromArray(K2)},void 0,this)},toRightTriangular:function(){return k1("SAFE",function(){var ae=this.clone(),To,wh,ff,n1=this.elements.length,c1=n1,u1,A1,u2=this.elements[0].length,s2;do{if(u1=c1-n1,wh=ae.elements[u1][u1],wh.valueOf()===0){for(var h2=u1+1;h2<c1;h2++)if(ff=ae.elements[h2][u1],ff&&ff.valueOf()!==0){To=[],A1=u2;do s2=u2-A1,To.push(o.add(ae.elements[u1][s2].clone(),ae.elements[h2][s2].clone()));while(--A1);ae.elements[u1]=To;break}}var wh=ae.elements[u1][u1];if(wh.valueOf()!==0)for(h2=u1+1;h2<c1;h2++){var K2=o.divide(ae.elements[h2][u1].clone(),ae.elements[u1][u1].clone());To=[],A1=u2;do s2=u2-A1,To.push(s2<=u1?new h1(0):o.subtract(ae.elements[h2][s2].clone(),o.multiply(ae.elements[u1][s2].clone(),K2.clone())));while(--A1);ae.elements[h2]=To}}while(--n1);return ae},void 0,this)},transpose:function(){var ae=this.elements.length,To=this.elements[0].length,wh=new Q2,ff=To,n1,c1,u1;do{n1=To-ff,wh.elements[n1]=[],c1=ae;do u1=ae-c1,wh.elements[n1][u1]=this.elements[u1][n1].clone();while(--c1)}while(--ff);return wh},canMultiplyFromLeft:function(ae){var To=_2(ae)?ae.elements.length:ae.length;return this.elements[0].length===To},sameSize:function(ae){return this.rows()===ae.rows()&&this.cols()===ae.cols()},multiply:function(ae){return k1("SAFE",function(){var To=ae.elements||ae;if(!this.canMultiplyFromLeft(To)){if(this.sameSize(ae)){for(var wh=new Q2,ff=this.rows(),A1=0;A1<ff;A1++){var n1=o.multiply(new I4(this.elements[A1]),new I4(ae.elements[A1]));wh.elements[A1]=n1.elements}return wh}return null}var c1=this.elements.length,u1=c1,A1,u2,s2=To[0].length,h2,K2=this.elements[0].length,R2=[],V2,e4,t4;do{A1=u1-c1,R2[A1]=[],u2=s2;do{h2=s2-u2,V2=new h1(0),e4=K2;do t4=K2-e4,V2=o.add(V2,o.multiply(this.elements[A1][t4],To[t4][h2]));while(--e4);R2[A1][h2]=V2}while(--u2)}while(--c1);return Q2.fromArray(R2)},void 0,this)},add:function(ae,To){var wh=new Q2;return this.sameSize(ae)&&this.eachElement(function(ff,n1,c1){var u1=o.add(ff.clone(),ae.elements[n1][c1].clone());To&&(u1=To.call(wh,u1,ff,ae.elements[n1][c1])),wh.set(n1,c1,u1)}),wh},subtract:function(ae,To){var wh=new Q2;return this.sameSize(ae)&&this.eachElement(function(ff,n1,c1){var u1=o.subtract(ff.clone(),ae.elements[n1][c1].clone());To&&(u1=To.call(wh,u1,ff,ae.elements[n1][c1])),wh.set(n1,c1,u1)}),wh},negate:function(){return this.each(function(ae){return ae.negate()}),this},toVector:function(){if(this.rows()===1||this.cols()===1){var ae=new I4;return ae.elements=this.elements,ae}return this},toString:function(ae,To){for(var wh=this.rows(),ff=[],n1=0;n1<wh;n1++)ff.push("["+this.elements[n1].map(function(c1){var u1=To?c1.multiplier.toDecimal():c1.toString();return c1!==void 0?u1:""}).join(",")+"]");return"matrix"+_1(ff.join(","))},text:function(){return"matrix("+this.elements.toString("")+")"},latex:function(ae){var To=this.cols(),wh=this.elements;return x1("\\begin{vmatrix}{0}\\end{vmatrix}",function(){var ff=[];for(var n1 in wh){for(var c1=[],u1=0;u1<To;u1++)c1.push(g4.latex.call(g4,wh[n1][u1],ae));ff.push(c1.join(" & "))}return ff.join(" \\cr ")})}},Q2.prototype.each=Q2.prototype.eachElement;function x4(ae){if(this.elements=[],b2(ae)||(ae=I4.fromArray(arguments)),ae)for(var To=ae.elements,wh=0,ff=To.length;wh<ff;wh++)this.add(To[wh])}x4.fromArray=function(ae){function To(wh){return x4.apply(this,wh)}return To.prototype=x4.prototype,new To(ae)},x4.prototype={add:function(ae){this.contains(ae)||this.elements.push(ae.clone())},contains:function(ae){for(var To=0;To<this.elements.length;To++){var wh=this.elements[To];if(ae.equals(wh))return!0}return!1},each:function(ae){for(var To=this.elements,wh=new x4,ff=0,n1=To.length;ff<n1;ff++){var c1=To[ff];ae.call(this,c1,wh,ff)}return wh},clone:function(){var ae=new x4;return this.each(function(To){ae.add(To.clone())}),ae},union:function(ae){var To=this.clone();return ae.each(function(wh){To.add(wh)}),To},difference:function(ae){var To=this.clone();return ae.each(function(wh){To.remove(wh)}),To},remove:function(ae){for(var To=0,wh=this.elements.length;To<wh;To++){var ff=this.elements[To];if(ff.equals(ae))return b1(this.elements,To),!0}return!1},intersection:function(ae){var To=new x4,wh=this;return ae.each(function(ff){wh.contains(ff)&&To.add(ff)}),To},intersects:function(ae){return this.intersection(ae).elements.length>0},is_subset:function(ae){for(var To=ae.elements,wh=0,ff=To.length;wh<ff;wh++)if(!this.contains(To[wh]))return!1;return!0},toString:function(){return"{"+this.elements.join(",")+"}"}};var K3={dependencies:{_rename:{"Math2.factorial":"factorial"},factorial:{"Math2.gamma":B2.gamma},gamma_incomplete:{"Math2.factorial":B2.factorial},Li:{"Math2.Ei":B2.Ei,"Math2.bigLog":B2.bigLog,Frac:I2},Ci:{"Math2.factorial":B2.factorial},Ei:{"Math2.factorial":B2.factorial},Si:{"Math2.factorial":B2.factorial},Shi:{"Math2.factorial":B2.factorial},Chi:{isInt:p1,nround:Q1,"Math2.num_integrate":B2.num_integrate},factor:{"Math2.ifactor":B2.ifactor,Symbol:h1},num_integrate:{"Math2.simpson":B2.simpson,nround:Q1},fib:{even:v2}},reformat:{diff:function(ae,To){var wh=ae.args[1].toString(),ff="var f = "+K3.build(ae.args[0].toString(),[wh])+";";return To[1]+="var diff = "+B2.diff.toString()+";",To[1]+=ff,["diff(f)("+wh+")",To]}},getProperName:function(ae){var To={continued_fraction:"continuedFraction"};return To[ae]||ae},compileDependencies:function(ae,To){var wh=K3.dependencies[ae],ff=To&&To[1]?To[1]:"",n1=To&&To[0]?To[0]:{};for(var c1 in wh)if(typeof wh[c1]!="object"){var u1=c1.split(".");ff+="var "+(u1.length>1?u1[1]:u1[0])+"="+wh[c1]+";",n1[c1]=u1.pop()}return[n1,ff]},getArgsDeps:function(ae,To){for(var wh=ae.args,ff=0;ff<wh.length;ff++)ae.args[ff].each(function(n1){n1.group===ve&&(To=K3.compileDependencies(n1.fname,To))});return To},build:function(ae,To){ae=k1("PARSE2NUMBER",function(){return o.parse(ae)},!0);var wh=W1(ae),ff=[],n1=[],c1=function(h2,K2){h2.fname===""&&(h2=h1.unwrapPARENS(h2)),K2=K2||[];var R2=[],V2=h2.group,e4="",t4=function(s4){var Z4=s4===De?"*":"+",h3=[];for(var r3 in h2.symbols){var R4=h2.symbols[r3],B4=c1(R4,K2)[0];R4.isComposite()&&(B4=_1(B4)),h3.push(B4)}var N4=h3.join(Z4);return N4=N4&&!h2.multiplier.equals(1)?_1(N4):N4,N4},v4=function(s4){var Z4;return s4 in Math?Z4="Math."+s4:(s4=K3.getProperName(s4),ff.indexOf(s4)===-1&&(K2.push("var "+s4+" = "+B2[s4].toString()+"; "),ff.push(s4)),Z4=s4),Z4=Z4+_1(h2.args.map(function(h3){return c1(h3,K2)[0]}).join(",")),Z4};V2===A?R2.push(h2.multiplier.toDecimal()):h2.multiplier.equals(-1)?e4="-":h2.multiplier.equals(1)||R2.push(h2.multiplier.toDecimal());var w4;if(V2===W||V2===P)w4=h2.value;else if(V2===ve)if(n1=K3.compileDependencies(h2.fname,n1),n1=K3.getArgsDeps(h2,n1),K3.reformat[h2.fname]){var T4=K3.reformat[h2.fname](h2,n1);n1=T4[1],w4=T4[0]}else w4=v4(h2.fname);else if(V2===me){var D4=h2.previousGroup;D4===A||D4===W?w4=h2.value:D4===ve?(w4=v4(h2.fname),n1=K3.compileDependencies(h2.fname,n1),n1=K3.getArgsDeps(h2,n1)):w4=t4(h2.previousGroup)}else w4=t4(h2.group);if(h2.group!==A&&!h2.power.equals(1)){var C4=c1(o.parse(h2.power));K2.push(C4[1]),w4="Math.pow"+_1(w4+","+C4[0])}return w4&&R2.push(e4+w4),[R2.join("*"),K2.join("").replace(/\n+\s+/g," ")]};To&&(wh=To);var u1=c1(ae);for(var A1 in n1[0]){var u2=n1[0][A1];u1[1]=u1[1].replace(A1,u2),n1[1]=n1[1].replace(A1,u2)}var s2=new Function(wh,(n1[1]||"")+u1[1]+" return "+u1[0]+";");return s2}};(function(){X2(o.CONSTANTS),X2(o.functions),o.initConstants(),o.error||(o.error=Bs),g.LOG_FNS={log:o.functions.log,log10:o.functions.log10}})();var b3={allSame:Fc,allNumeric:s1,arguments2Array:n2,arrayAddSlices:i2,arrayClone:X1,arrayMax:F1,arrayMin:N1,arrayEqual:v1,arrayUnique:q2,arrayGetVariables:j2,arraySum:m2,block:k1,build:K3.build,clearU:P2,comboSort:Y1,compare:w1,convertToVector:T2,customError:yh,customType:c2,decompose_fn:l2,each:J1,evaluate:Z1,even:v2,evenFraction:z2,fillHoles:A2,firstObject:e1,format:x1,generatePrimes:L2,getCoeffs:y2,getU:G1,importFunctions:V1,inBrackets:_1,isArray:x2,isExpression:z1,isFraction:E1,isInt:p1,isMatrix:_2,isNegative:S1,isNumericSymbol:U1,isPrime:cf,isReserved:df,isSymbol:T1,isVariableSymbol:M2,isVector:b2,keys:o1,knownVariable:mf,nroots:f2,remove:b1,reserveNames:X2,range:pf,round:Q1,sameSign:H1,scientificToDecimal:Mh,separate:C2,stringReplace:B1,text:d4,validateName:qc,variables:W1,warn:_h},W3={groups:c,Symbol:h1,Expression:l4,Frac:I2,Vector:I4,Matrix:Q2,Parser:H4,Scientific:f4,Fraction:s6,Math2:B2,LaTeX:g4,Utils:b3,PARSER:o,PARENTHESIS:Rs,Settings:g,err:Bs,bigInt:l,bigDec:u,exceptions:Y2},m4=function(ae,To,wh,ff){var n1=!1,c1=/^([a-z_][a-z\d\_]*)\(([a-z_,\s]*)\):=(.+)$/gi.exec(ae);if(c1)return e.setFunction(c1[1],c1[2].split(","),c1[3]);ae instanceof l4&&(ae=ae.toString()),x2(wh)||(wh=typeof wh>"u"?[]:[wh]),wh.forEach(function(A1){if(A1==="numer"){n1=!0;return}var u2=o.functions[wh];u2&&u2[1]===1&&(ae=`${A1}(${ae})`)});var u1=k1("PARSE2NUMBER",function(){return o.parse(ae,To)},n1||g.PARSE2NUMBER);return ff?Ko[ff-1]=u1:Ko.push(u1),new l4(u1)};return m4.rpn=function(ae){return o.tokenize(o.toRPN(ae))},m4.convertToLaTeX=function(ae,To){return o.toTeX(ae,To)},m4.convertFromLaTeX=function(ae){var To=g4.parse(o.tokenize(ae));return new l4(o.parse(To))},m4.version=function(ae){if(ae)try{return W3[ae].version}catch{return"No module named "+ae+" found!"}return s},m4.getWarnings=function(){return wt},m4.setConstant=function(ae,To){if(qc(ae),!df(ae))if(To==="delete"||To==="")delete o.CONSTANTS[ae];else{if(isNaN(To))throw new M1("Constant must be a number!");o.CONSTANTS[ae]=To}return this},m4.getConstant=function(ae){return String(o.constant[ae])},m4.setFunction=C1,m4.getCore=function(){return W3},m4.getExpression=m4.getEquation=l4.getExpression,m4.reserved=function(ae){return ae?An:An.join(", ")},m4.clear=function(ae,To){if(ae==="all")Ko=[];else if(ae==="last")Ko.pop();else if(ae==="first")Ko.shift();else{var wh=ae?ae-1:Ko.length;To===!0?Ko[wh]=void 0:b1(Ko,wh)}return this},m4.flush=function(){return this.clear("all"),this},m4.expressions=function(ae,To,wh){for(var ff=ae?{}:[],n1=0;n1<Ko.length;n1++){var c1=To?g4.latex(Ko[n1],wh):d4(Ko[n1],wh);ae?ff[n1+1]=c1:ff.push(c1)}return ff},m4.register=function(ae){var To=this.getCore();if(x2(ae))for(var wh=0;wh<ae.length;wh++)ae&&this.register(ae[wh]);else if(ae&&g.exclude.indexOf(ae.name)===-1){if(ae.dependencies){for(var wh=0;wh<ae.dependencies.length;wh++)if(!To[ae.dependencies[wh]])throw new Error(x1("{0} requires {1} to be loaded!",ae.name,ae.dependencies[wh]))}var ff=ae.parent,n1=ae.build.call(To);if(ff){To[ff]||(To[ae.parent]={});var c1=ff==="nerdamer"?this:To[ff];c1[ae.name]=n1}ae.visible&&(o.functions[ae.name]=[n1,ae.numargs])}},m4.validateName=qc,m4.validVarName=function(ae){try{return qc(ae),An.indexOf(ae)===-1}catch{return!1}},m4.supported=function(){return o1(o.functions)},m4.numEquations=m4.numExpressions=function(){return Ko.length},m4.setVar=function(ae,To){return qc(ae),ae in o.CONSTANTS&&Bs("Cannot set value for constant "+ae),To==="delete"||To===""?delete Ge[ae]:Ge[ae]=T1(To)?To:o.parse(To),this},m4.getVar=function(ae){return Ge[ae]},m4.clearVars=function(){return Ge={},this},m4.load=function(ae){return ae.call(this),this},m4.getVars=function(ae,To){ae=ae||"text";var wh={};if(ae==="object")wh=Ge;else for(var ff in Ge)ae==="latex"?wh[ff]=Ge[ff].latex(To):ae==="text"&&(wh[ff]=Ge[ff].text(To));return wh},m4.set=function(ae,To){if(typeof ae=="object")for(var wh in ae)m4.set(wh,ae[wh]);var ff=["SAFE"];ff.indexOf(ae)!==-1&&Bs("Cannot modify setting: "+ae),ae==="PRECISION"?(u.set({precision:To}),g.PRECISION=To,To>21&&this.set("USE_BIG",!0)):ae==="USE_LN"&&To===!0?(g.LOG="LN",g.LOG10="log",o.functions.log=g.LOG_FNS.log10,o.functions.log[0]=function(n1){return n1.isConstant()?new h1(Math.log10(n1)):o.symfunction(g.LOG10,[n1])},o.functions.LN=g.LOG_FNS.log,delete o.functions.log10):g[ae]=To},m4.get=function(ae){return g[ae]},m4.updateAPI=function(ae){var To=function(ff){return function(){for(var n1=[].slice.call(arguments),c1=0;c1<n1.length;c1++)n1[c1]=o.parse(n1[c1]);return new l4(k1("PARSE2NUMBER",function(){return o.callfunction(ff,n1)}))}};for(var wh in o.functions)(!(wh in m4)||ae)&&(m4[wh]=To(wh))},m4.replaceFunction=function(ae,To,wh){var ff=o.functions[ae],n1=typeof wh>"u"?ff[1]:wh;o.functions[ae]=[To.call(void 0,ff[0],W3),n1]},m4.setOperator=function(ae,To){o.setOperator(ae,To)},m4.getOperator=function(ae){return o.getOperator(ae)},m4.aliasOperator=function(ae,To){o.aliasOperator(ae,To)},m4.tree=function(ae){return o.tree(o.toRPN(o.tokenize(ae)))},m4.htmlTree=function(ae,To){var wh=this.tree(ae);return`<div class="tree">
    <ul>
        <li>
`+wh.toHTML(3,To)+`
        </li>
    </ul>
</div>`},m4.addPeeker=function(ae,To){o.peekers[ae]&&o.peekers[ae].push(To)},m4.removePeeker=function(ae,To){b1(o.peekers[ae],To)},m4.parse=function(ae){return String(ae).split(";").map(function(To){return o.parse(To)})},m4.updateAPI(),m4}({bigInt:function(){var a=function(s){var o=1e7,l=7,u=9007199254740992,c=W(u),d=Math.log(u);function m(pf,o1){return typeof pf>"u"?m[0]:typeof o1<"u"?+o1==10?H1(pf):x2(pf,o1):H1(pf)}function g(pf,o1){this.value=pf,this.sign=o1,this.isSmall=!1}g.prototype=Object.create(m.prototype);function A(pf){this.value=pf,this.sign=pf<0,this.isSmall=!0}A.prototype=Object.create(m.prototype);function P(pf){return-u<pf&&pf<u}function W(pf){return pf<1e7?[pf]:pf<1e14?[pf%1e7,Math.floor(pf/1e7)]:[pf%1e7,Math.floor(pf/1e7)%1e7,Math.floor(pf/1e14)]}function me(pf){ve(pf);var o1=pf.length;if(o1<4&&Mh(pf,c)<0)switch(o1){case 0:return 0;case 1:return pf[0];case 2:return pf[0]+pf[1]*o;default:return pf[0]+(pf[1]+pf[2]*o)*o}return pf}function ve(pf){for(var o1=pf.length;pf[--o1]===0;);pf.length=o1+1}function He(pf){for(var o1=new Array(pf),e1=-1;++e1<pf;)o1[e1]=0;return o1}function De(pf){return pf>0?Math.floor(pf):Math.ceil(pf)}function Xe(pf,o1){var e1=pf.length,w1=o1.length,C1=new Array(e1),F1=0,N1=o,v1,X1;for(X1=0;X1<w1;X1++)v1=pf[X1]+o1[X1]+F1,F1=v1>=N1?1:0,C1[X1]=v1-F1*N1;for(;X1<e1;)v1=pf[X1]+F1,F1=v1===N1?1:0,C1[X1++]=v1-F1*N1;return F1>0&&C1.push(F1),C1}function qe(pf,o1){return pf.length>=o1.length?Xe(pf,o1):Xe(o1,pf)}function Rs(pf,o1){var e1=pf.length,w1=new Array(e1),C1=o,F1,N1;for(N1=0;N1<e1;N1++)F1=pf[N1]-C1+o1,o1=Math.floor(F1/C1),w1[N1]=F1-o1*C1,o1+=1;for(;o1>0;)w1[N1++]=o1%C1,o1=Math.floor(o1/C1);return w1}g.prototype.add=function(pf){var o1=H1(pf);if(this.sign!==o1.sign)return this.subtract(o1.negate());var e1=this.value,w1=o1.value;return o1.isSmall?new g(Rs(e1,Math.abs(w1)),this.sign):new g(qe(e1,w1),this.sign)},g.prototype.plus=g.prototype.add,A.prototype.add=function(pf){var o1=H1(pf),e1=this.value;if(e1<0!==o1.sign)return this.subtract(o1.negate());var w1=o1.value;if(o1.isSmall){if(P(e1+w1))return new A(e1+w1);w1=W(Math.abs(w1))}return new g(Rs(w1,Math.abs(e1)),e1<0)},A.prototype.plus=A.prototype.add;function Vc(pf,o1){var e1=pf.length,w1=o1.length,C1=new Array(e1),F1=0,N1=o,v1,X1;for(v1=0;v1<w1;v1++)X1=pf[v1]-F1-o1[v1],X1<0?(X1+=N1,F1=1):F1=0,C1[v1]=X1;for(v1=w1;v1<e1;v1++){if(X1=pf[v1]-F1,X1<0)X1+=N1;else{C1[v1++]=X1;break}C1[v1]=X1}for(;v1<e1;v1++)C1[v1]=pf[v1];return ve(C1),C1}function So(pf,o1,e1){var w1;return Mh(pf,o1)>=0?w1=Vc(pf,o1):(w1=Vc(o1,pf),e1=!e1),w1=me(w1),typeof w1=="number"?(e1&&(w1=-w1),new A(w1)):new g(w1,e1)}function Do(pf,o1,e1){var w1=pf.length,C1=new Array(w1),F1=-o1,N1=o,v1,X1;for(v1=0;v1<w1;v1++)X1=pf[v1]+F1,F1=Math.floor(X1/N1),X1%=N1,C1[v1]=X1<0?X1+N1:X1;return C1=me(C1),typeof C1=="number"?(e1&&(C1=-C1),new A(C1)):new g(C1,e1)}g.prototype.subtract=function(pf){var o1=H1(pf);if(this.sign!==o1.sign)return this.add(o1.negate());var e1=this.value,w1=o1.value;return o1.isSmall?Do(e1,Math.abs(w1),this.sign):So(e1,w1,this.sign)},g.prototype.minus=g.prototype.subtract,A.prototype.subtract=function(pf){var o1=H1(pf),e1=this.value;if(e1<0!==o1.sign)return this.add(o1.negate());var w1=o1.value;return o1.isSmall?new A(e1-w1):Do(w1,Math.abs(e1),e1>=0)},A.prototype.minus=A.prototype.subtract,g.prototype.negate=function(){return new g(this.value,!this.sign)},A.prototype.negate=function(){var pf=this.sign,o1=new A(-this.value);return o1.sign=!pf,o1},g.prototype.abs=function(){return new g(this.value,!1)},A.prototype.abs=function(){return new A(Math.abs(this.value))};function eh(pf,o1){var e1=pf.length,w1=o1.length,C1=e1+w1,F1=He(C1),N1=o,v1,X1,i2,f2,Y1;for(i2=0;i2<e1;++i2){f2=pf[i2];for(var l2=0;l2<w1;++l2)Y1=o1[l2],v1=f2*Y1+F1[i2+l2],X1=Math.floor(v1/N1),F1[i2+l2]=v1-X1*N1,F1[i2+l2+1]+=X1}return ve(F1),F1}function Ko(pf,o1){var e1=pf.length,w1=new Array(e1),C1=o,F1=0,N1,v1;for(v1=0;v1<e1;v1++)N1=pf[v1]*o1+F1,F1=Math.floor(N1/C1),w1[v1]=N1-F1*C1;for(;F1>0;)w1[v1++]=F1%C1,F1=Math.floor(F1/C1);return w1}function Ge(pf,o1){for(var e1=[];o1-- >0;)e1.push(0);return e1.concat(pf)}function An(pf,o1){var e1=Math.max(pf.length,o1.length);if(e1<=30)return eh(pf,o1);e1=Math.ceil(e1/2);var w1=pf.slice(e1),C1=pf.slice(0,e1),F1=o1.slice(e1),N1=o1.slice(0,e1),v1=An(C1,N1),X1=An(w1,F1),i2=An(qe(C1,w1),qe(N1,F1)),f2=qe(qe(v1,Ge(Vc(Vc(i2,v1),X1),e1)),Ge(X1,2*e1));return ve(f2),f2}function wt(pf,o1){return-.012*pf-.012*o1+15e-6*pf*o1>0}g.prototype.multiply=function(pf){var o1=H1(pf),e1=this.value,w1=o1.value,C1=this.sign!==o1.sign,F1;if(o1.isSmall){if(w1===0)return m[0];if(w1===1)return this;if(w1===-1)return this.negate();if(F1=Math.abs(w1),F1<o)return new g(Ko(e1,F1),C1);w1=W(F1)}return wt(e1.length,w1.length)?new g(An(e1,w1),C1):new g(eh(e1,w1),C1)},g.prototype.times=g.prototype.multiply;function Bs(pf,o1,e1){return pf<o?new g(Ko(o1,pf),e1):new g(eh(o1,W(pf)),e1)}A.prototype._multiplyBySmall=function(pf){return P(pf.value*this.value)?new A(pf.value*this.value):Bs(Math.abs(pf.value),W(Math.abs(this.value)),this.sign!==pf.sign)},g.prototype._multiplyBySmall=function(pf){return pf.value===0?m[0]:pf.value===1?this:pf.value===-1?this.negate():Bs(Math.abs(pf.value),this.value,this.sign!==pf.sign)},A.prototype.multiply=function(pf){return H1(pf)._multiplyBySmall(this)},A.prototype.times=A.prototype.multiply;function yh(pf){var o1=pf.length,e1=He(o1+o1),w1=o,C1,F1,N1,v1,X1;for(N1=0;N1<o1;N1++){v1=pf[N1],F1=0-v1*v1;for(var i2=N1;i2<o1;i2++)X1=pf[i2],C1=2*(v1*X1)+e1[N1+i2]+F1,F1=Math.floor(C1/w1),e1[N1+i2]=C1-F1*w1;e1[N1+o1]=F1}return ve(e1),e1}g.prototype.square=function(){return new g(yh(this.value),!1)},A.prototype.square=function(){var pf=this.value*this.value;return P(pf)?new A(pf):new g(yh(W(Math.abs(this.value))),!1)};function df(pf,o1){var e1=pf.length,w1=o1.length,C1=o,F1=He(o1.length),N1=o1[w1-1],v1=Math.ceil(C1/(2*N1)),X1=Ko(pf,v1),i2=Ko(o1,v1),f2,Y1,l2,Q1,G1,P2,J1;for(X1.length<=e1&&X1.push(0),i2.push(0),N1=i2[w1-1],Y1=e1-w1;Y1>=0;Y1--){for(f2=C1-1,X1[Y1+w1]!==N1&&(f2=Math.floor((X1[Y1+w1]*C1+X1[Y1+w1-1])/N1)),l2=0,Q1=0,P2=i2.length,G1=0;G1<P2;G1++)l2+=f2*i2[G1],J1=Math.floor(l2/C1),Q1+=X1[Y1+G1]-(l2-J1*C1),l2=J1,Q1<0?(X1[Y1+G1]=Q1+C1,Q1=-1):(X1[Y1+G1]=Q1,Q1=0);for(;Q1!==0;){for(f2-=1,l2=0,G1=0;G1<P2;G1++)l2+=X1[Y1+G1]-C1+i2[G1],l2<0?(X1[Y1+G1]=l2+C1,l2=0):(X1[Y1+G1]=l2,l2=1);Q1+=l2}F1[Y1]=f2}return X1=_h(X1,v1)[0],[me(F1),me(X1)]}function Fc(pf,o1){for(var e1=pf.length,w1=o1.length,C1=[],F1=[],N1=o,v1,X1,i2,f2,Y1;e1;){if(F1.unshift(pf[--e1]),ve(F1),Mh(F1,o1)<0){C1.push(0);continue}X1=F1.length,i2=F1[X1-1]*N1+F1[X1-2],f2=o1[w1-1]*N1+o1[w1-2],X1>w1&&(i2=(i2+1)*N1),v1=Math.ceil(i2/f2);do{if(Y1=Ko(o1,v1),Mh(Y1,F1)<=0)break;v1--}while(v1);C1.push(v1),F1=Vc(F1,Y1)}return C1.reverse(),[me(C1),me(F1)]}function _h(pf,o1){var e1=pf.length,w1=He(e1),C1=o,F1,N1,v1,X1;for(v1=0,F1=e1-1;F1>=0;--F1)X1=v1*C1+pf[F1],N1=De(X1/o1),v1=X1-N1*o1,w1[F1]=N1|0;return[w1,v1|0]}function qc(pf,o1){var e1,w1=H1(o1),C1=pf.value,F1=w1.value,N1;if(F1===0)throw new Error("Cannot divide by zero");if(pf.isSmall)return w1.isSmall?[new A(De(C1/F1)),new A(C1%F1)]:[m[0],pf];if(w1.isSmall){if(F1===1)return[pf,m[0]];if(F1==-1)return[pf.negate(),m[0]];var v1=Math.abs(F1);if(v1<o){e1=_h(C1,v1),N1=me(e1[0]);var X1=e1[1];return pf.sign&&(X1=-X1),typeof N1=="number"?(pf.sign!==w1.sign&&(N1=-N1),[new A(N1),new A(X1)]):[new g(N1,pf.sign!==w1.sign),new A(X1)]}F1=W(v1)}var i2=Mh(C1,F1);if(i2===-1)return[m[0],pf];if(i2===0)return[m[pf.sign===w1.sign?1:-1],m[0]];C1.length+F1.length<=200?e1=df(C1,F1):e1=Fc(C1,F1),N1=e1[0];var f2=pf.sign!==w1.sign,Y1=e1[1],l2=pf.sign;return typeof N1=="number"?(f2&&(N1=-N1),N1=new A(N1)):N1=new g(N1,f2),typeof Y1=="number"?(l2&&(Y1=-Y1),Y1=new A(Y1)):Y1=new g(Y1,l2),[N1,Y1]}g.prototype.divmod=function(pf){var o1=qc(this,pf);return{quotient:o1[0],remainder:o1[1]}},A.prototype.divmod=g.prototype.divmod,g.prototype.divide=function(pf){return qc(this,pf)[0]},A.prototype.over=A.prototype.divide=g.prototype.over=g.prototype.divide,g.prototype.mod=function(pf){return qc(this,pf)[1]},A.prototype.remainder=A.prototype.mod=g.prototype.remainder=g.prototype.mod,g.prototype.pow=function(pf){var o1=H1(pf),e1=this.value,w1=o1.value,C1,F1,N1;if(w1===0)return m[1];if(e1===0)return m[0];if(e1===1)return m[1];if(e1===-1)return o1.isEven()?m[1]:m[-1];if(o1.sign)return m[0];if(!o1.isSmall)throw new Error("The exponent "+o1.toString()+" is too large.");if(this.isSmall&&P(C1=Math.pow(e1,w1)))return new A(De(C1));for(F1=this,N1=m[1];w1&!0&&(N1=N1.times(F1),--w1),w1!==0;)w1/=2,F1=F1.square();return N1},A.prototype.pow=g.prototype.pow,g.prototype.modPow=function(pf,o1){if(pf=H1(pf),o1=H1(o1),o1.isZero())throw new Error("Cannot take modPow with modulus 0");for(var e1=m[1],w1=this.mod(o1);pf.isPositive();){if(w1.isZero())return m[0];pf.isOdd()&&(e1=e1.multiply(w1).mod(o1)),pf=pf.divide(2),w1=w1.square().mod(o1)}return e1},A.prototype.modPow=g.prototype.modPow;function Mh(pf,o1){if(pf.length!==o1.length)return pf.length>o1.length?1:-1;for(var e1=pf.length-1;e1>=0;e1--)if(pf[e1]!==o1[e1])return pf[e1]>o1[e1]?1:-1;return 0}g.prototype.compareAbs=function(pf){var o1=H1(pf),e1=this.value,w1=o1.value;return o1.isSmall?1:Mh(e1,w1)},A.prototype.compareAbs=function(pf){var o1=H1(pf),e1=Math.abs(this.value),w1=o1.value;return o1.isSmall?(w1=Math.abs(w1),e1===w1?0:e1>w1?1:-1):-1},g.prototype.compare=function(pf){if(pf===1/0)return-1;if(pf===-1/0)return 1;var o1=H1(pf),e1=this.value,w1=o1.value;return this.sign!==o1.sign?o1.sign?1:-1:o1.isSmall?this.sign?-1:1:Mh(e1,w1)*(this.sign?-1:1)},g.prototype.compareTo=g.prototype.compare,A.prototype.compare=function(pf){if(pf===1/0)return-1;if(pf===-1/0)return 1;var o1=H1(pf),e1=this.value,w1=o1.value;return o1.isSmall?e1==w1?0:e1>w1?1:-1:e1<0!==o1.sign?e1<0?-1:1:e1<0?1:-1},A.prototype.compareTo=A.prototype.compare,g.prototype.equals=function(pf){return this.compare(pf)===0},A.prototype.eq=A.prototype.equals=g.prototype.eq=g.prototype.equals,g.prototype.notEquals=function(pf){return this.compare(pf)!==0},A.prototype.neq=A.prototype.notEquals=g.prototype.neq=g.prototype.notEquals,g.prototype.greater=function(pf){return this.compare(pf)>0},A.prototype.gt=A.prototype.greater=g.prototype.gt=g.prototype.greater,g.prototype.lesser=function(pf){return this.compare(pf)<0},A.prototype.lt=A.prototype.lesser=g.prototype.lt=g.prototype.lesser,g.prototype.greaterOrEquals=function(pf){return this.compare(pf)>=0},A.prototype.geq=A.prototype.greaterOrEquals=g.prototype.geq=g.prototype.greaterOrEquals,g.prototype.lesserOrEquals=function(pf){return this.compare(pf)<=0},A.prototype.leq=A.prototype.lesserOrEquals=g.prototype.leq=g.prototype.lesserOrEquals,g.prototype.isEven=function(){return(this.value[0]&1)===0},A.prototype.isEven=function(){return(this.value&1)===0},g.prototype.isOdd=function(){return(this.value[0]&1)===1},A.prototype.isOdd=function(){return(this.value&1)===1},g.prototype.isPositive=function(){return!this.sign},A.prototype.isPositive=function(){return this.value>0},g.prototype.isNegative=function(){return this.sign},A.prototype.isNegative=function(){return this.value<0},g.prototype.isUnit=function(){return!1},A.prototype.isUnit=function(){return Math.abs(this.value)===1},g.prototype.isZero=function(){return!1},A.prototype.isZero=function(){return this.value===0},g.prototype.isDivisibleBy=function(pf){var o1=H1(pf),e1=o1.value;return e1===0?!1:e1===1?!0:e1===2?this.isEven():this.mod(o1).equals(m[0])},A.prototype.isDivisibleBy=g.prototype.isDivisibleBy;function cf(pf){var o1=pf.abs();if(o1.isUnit())return!1;if(o1.equals(2)||o1.equals(3)||o1.equals(5))return!0;if(o1.isEven()||o1.isDivisibleBy(3)||o1.isDivisibleBy(5))return!1;if(o1.lesser(49))return!0}function mf(pf,o1){for(var e1=pf.prev(),w1=e1,C1=0,F1,N1,v1;w1.isEven();)w1=w1.divide(2),C1++;e:for(N1=0;N1<o1.length;N1++)if(!pf.lesser(o1[N1])&&(v1=a(o1[N1]).modPow(w1,pf),!(v1.equals(m[1])||v1.equals(e1)))){for(F1=C1-1;F1!=0;F1--){if(v1=v1.square().mod(pf),v1.isUnit())return!1;if(v1.equals(e1))continue e}return!1}return!0}g.prototype.isPrime=function(pf){var o1=cf(this);if(o1!==s)return o1;var e1=this.abs(),w1=e1.bitLength();if(w1<=64)return mf(e1,[2,325,9375,28178,450775,9780504,1795265022]);for(var C1=Math.log(2)*w1,F1=Math.ceil(pf===!0?2*Math.pow(C1,2):C1),N1=[],v1=0;v1<F1;v1++)N1.push(a(v1+2));return mf(e1,N1)},A.prototype.isPrime=g.prototype.isPrime,g.prototype.isProbablePrime=function(pf){var o1=cf(this);if(o1!==s)return o1;for(var e1=this.abs(),w1=pf===s?5:pf,C1=[],F1=0;F1<w1;F1++)C1.push(a.randBetween(2,e1.minus(2)));return mf(e1,C1)},A.prototype.isProbablePrime=g.prototype.isProbablePrime,g.prototype.modInv=function(pf){for(var o1=a.zero,e1=a.one,w1=H1(pf),C1=this.abs(),F1,N1,v1;!C1.equals(a.zero);)F1=w1.divide(C1),N1=o1,v1=w1,o1=e1,w1=C1,e1=N1.subtract(F1.multiply(e1)),C1=v1.subtract(F1.multiply(C1));if(!w1.equals(1))throw new Error(this.toString()+" and "+pf.toString()+" are not co-prime");return o1.compare(0)===-1&&(o1=o1.add(pf)),this.isNegative()?o1.negate():o1},A.prototype.modInv=g.prototype.modInv,g.prototype.next=function(){var pf=this.value;return this.sign?Do(pf,1,this.sign):new g(Rs(pf,1),this.sign)},A.prototype.next=function(){var pf=this.value;return pf+1<u?new A(pf+1):new g(c,!1)},g.prototype.prev=function(){var pf=this.value;return this.sign?new g(Rs(pf,1),!0):Do(pf,1,this.sign)},A.prototype.prev=function(){var pf=this.value;return pf-1>-u?new A(pf-1):new g(c,!0)};for(var a1=[1];2*a1[a1.length-1]<=o;)a1.push(2*a1[a1.length-1]);var s1=a1.length,E1=a1[s1-1];function T1(pf){return(typeof pf=="number"||typeof pf=="string")&&+Math.abs(pf)<=o||pf instanceof g&&pf.value.length<=1}g.prototype.shiftLeft=function(pf){if(!T1(pf))throw new Error(String(pf)+" is too large for shifting.");if(pf=+pf,pf<0)return this.shiftRight(-pf);var o1=this;if(o1.isZero())return o1;for(;pf>=s1;)o1=o1.multiply(E1),pf-=s1-1;return o1.multiply(a1[pf])},A.prototype.shiftLeft=g.prototype.shiftLeft,g.prototype.shiftRight=function(pf){var o1;if(!T1(pf))throw new Error(String(pf)+" is too large for shifting.");if(pf=+pf,pf<0)return this.shiftLeft(-pf);for(var e1=this;pf>=s1;){if(e1.isZero()||e1.isNegative()&&e1.isUnit())return e1;o1=qc(e1,E1),e1=o1[1].isNegative()?o1[0].prev():o1[0],pf-=s1-1}return o1=qc(e1,a1[pf]),o1[1].isNegative()?o1[0].prev():o1[0]},A.prototype.shiftRight=g.prototype.shiftRight;function z1(pf,o1,e1){o1=H1(o1);for(var w1=pf.isNegative(),C1=o1.isNegative(),F1=w1?pf.not():pf,N1=C1?o1.not():o1,v1=0,X1=0,i2=null,f2=null,Y1=[];!F1.isZero()||!N1.isZero();)i2=qc(F1,E1),v1=i2[1].toJSNumber(),w1&&(v1=E1-1-v1),f2=qc(N1,E1),X1=f2[1].toJSNumber(),C1&&(X1=E1-1-X1),F1=i2[0],N1=f2[0],Y1.push(e1(v1,X1));for(var l2=e1(w1?1:0,C1?1:0)!==0?a(-1):a(0),Q1=Y1.length-1;Q1>=0;Q1-=1)l2=l2.multiply(E1).add(a(Y1[Q1]));return l2}g.prototype.not=function(){return this.negate().prev()},A.prototype.not=g.prototype.not,g.prototype.and=function(pf){return z1(this,pf,function(o1,e1){return o1&e1})},A.prototype.and=g.prototype.and,g.prototype.or=function(pf){return z1(this,pf,function(o1,e1){return o1|e1})},A.prototype.or=g.prototype.or,g.prototype.xor=function(pf){return z1(this,pf,function(o1,e1){return o1^e1})},A.prototype.xor=g.prototype.xor;var W1=1<<30,m2=(o&-o)*(o&-o)|W1;function C2(pf){var o1=pf.value,e1=typeof o1=="number"?o1|W1:o1[0]+o1[1]*o|m2;return e1&-e1}function A2(pf,o1){if(o1.compareTo(pf)<=0){var e1=A2(pf,o1.square(o1)),w1=e1.p,C1=e1.e,F1=w1.multiply(o1);return F1.compareTo(pf)<=0?{p:F1,e:C1*2+1}:{p:w1,e:C1*2}}return{p:a(1),e:0}}g.prototype.bitLength=function(){var pf=this;return pf.compareTo(a(0))<0&&(pf=pf.negate().subtract(a(1))),pf.compareTo(a(0))===0?a(0):a(A2(pf,a(2)).e).add(a(1))},A.prototype.bitLength=g.prototype.bitLength;function b2(pf,o1){return pf=H1(pf),o1=H1(o1),pf.greater(o1)?pf:o1}function _2(pf,o1){return pf=H1(pf),o1=H1(o1),pf.lesser(o1)?pf:o1}function q1(pf,o1){if(pf=H1(pf).abs(),o1=H1(o1).abs(),pf.equals(o1))return pf;if(pf.isZero())return o1;if(o1.isZero())return pf;for(var e1=m[1],w1,C1;pf.isEven()&&o1.isEven();)w1=Math.min(C2(pf),C2(o1)),pf=pf.divide(w1),o1=o1.divide(w1),e1=e1.multiply(w1);for(;pf.isEven();)pf=pf.divide(C2(pf));do{for(;o1.isEven();)o1=o1.divide(C2(o1));pf.greater(o1)&&(C1=o1,o1=pf,pf=C1),o1=o1.subtract(pf)}while(!o1.isZero());return e1.isUnit()?pf:pf.multiply(e1)}function U1(pf,o1){return pf=H1(pf).abs(),o1=H1(o1).abs(),pf.divide(q1(pf,o1)).multiply(o1)}function M2(pf,o1){pf=H1(pf),o1=H1(o1);var e1=_2(pf,o1),w1=b2(pf,o1),C1=w1.subtract(e1).add(1);if(C1.isSmall)return e1.add(Math.floor(Math.random()*C1));for(var F1=C1.value.length-1,N1=[],v1=!0,X1=F1;X1>=0;X1--){var i2=v1?C1.value[X1]:o,f2=De(Math.random()*i2);N1.unshift(f2),f2<i2&&(v1=!1)}return N1=me(N1),e1.add(typeof N1=="number"?new A(N1):new g(N1,!1))}var x2=function(pf,o1){for(var e1=pf.length,w1,C1=Math.abs(o1),w1=0;w1<e1;w1++){var F1=pf[w1].toLowerCase();if(F1!=="-"&&/[a-z0-9]/.test(F1)){if(/[0-9]/.test(F1)&&+F1>=C1){if(F1==="1"&&C1===1)continue;throw new Error(F1+" is not a valid digit in base "+o1+".")}else if(F1.charCodeAt(0)-87>=C1)throw new Error(F1+" is not a valid digit in base "+o1+".")}}if(2<=o1&&o1<=36&&e1<=d/Math.log(o1)){var N1=parseInt(pf,o1);if(isNaN(N1))throw new Error(F1+" is not a valid digit in base "+o1+".");return new A(parseInt(pf,o1))}o1=H1(o1);var v1=[],X1=pf[0]==="-";for(w1=X1?1:0;w1<pf.length;w1++){var F1=pf[w1].toLowerCase(),i2=F1.charCodeAt(0);if(48<=i2&&i2<=57)v1.push(H1(F1));else if(97<=i2&&i2<=122)v1.push(H1(F1.charCodeAt(0)-87));else if(F1==="<"){var f2=w1;do w1++;while(pf[w1]!==">");v1.push(H1(pf.slice(f2+1,w1)))}else throw new Error(F1+" is not a valid character")}return p1(v1,o1,X1)};function p1(pf,o1,e1){var w1=m[0],C1=m[1],F1;for(F1=pf.length-1;F1>=0;F1--)w1=w1.add(pf[F1].times(C1)),C1=C1.times(o1);return e1?w1.negate():w1}function S1(pf){return pf<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(pf):"<"+pf+">"}function D1(pf,o1){if(o1=a(o1),o1.isZero()){if(pf.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(o1.equals(-1)){if(pf.isZero())return{value:[0],isNegative:!1};if(pf.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-pf)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var e1=Array.apply(null,Array(+pf-1)).map(Array.prototype.valueOf,[0,1]);return e1.unshift([1]),{value:[].concat.apply([],e1),isNegative:!1}}var w1=!1;if(pf.isNegative()&&o1.isPositive()&&(w1=!0,pf=pf.abs()),o1.equals(1))return pf.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+pf)).map(Number.prototype.valueOf,1),isNegative:w1};for(var C1=[],F1=pf,N1;F1.isNegative()||F1.compareAbs(o1)>=0;){N1=F1.divmod(o1),F1=N1.quotient;var v1=N1.remainder;v1.isNegative()&&(v1=o1.minus(v1).abs(),F1=F1.next()),C1.push(v1.toJSNumber())}return C1.push(F1.toJSNumber()),{value:C1.reverse(),isNegative:w1}}function _1(pf,o1){var e1=D1(pf,o1);return(e1.isNegative?"-":"")+e1.value.map(S1).join("")}g.prototype.toArray=function(pf){return D1(this,pf)},A.prototype.toArray=function(pf){return D1(this,pf)},g.prototype.toString=function(pf){if(pf===s&&(pf=10),pf!==10)return _1(this,pf);for(var o1=this.value,e1=o1.length,w1=String(o1[--e1]),C1="0000000",F1;--e1>=0;)F1=String(o1[e1]),w1+=C1.slice(F1.length)+F1;var N1=this.sign?"-":"";return N1+w1},A.prototype.toString=function(pf){return pf===s&&(pf=10),pf!=10?_1(this,pf):String(this.value)},g.prototype.toJSON=A.prototype.toJSON=function(){return this.toString()},g.prototype.valueOf=function(){return parseInt(this.toString(),10)},g.prototype.toJSNumber=g.prototype.valueOf,A.prototype.valueOf=function(){return this.value},A.prototype.toJSNumber=A.prototype.valueOf;function B1(pf){if(P(+pf)){var o1=+pf;if(o1===De(o1))return new A(o1);throw new Error("Invalid integer: "+pf)}var e1=pf[0]==="-";e1&&(pf=pf.slice(1));var w1=pf.split(/e/i);if(w1.length>2)throw new Error("Invalid integer: "+w1.join("e"));if(w1.length===2){var C1=w1[1];if(C1[0]==="+"&&(C1=C1.slice(1)),C1=+C1,C1!==De(C1)||!P(C1))throw new Error("Invalid integer: "+C1+" is not a valid exponent.");var F1=w1[0],N1=F1.indexOf(".");if(N1>=0&&(C1-=F1.length-N1-1,F1=F1.slice(0,N1)+F1.slice(N1+1)),C1<0)throw new Error("Cannot include negative exponent part for integers");F1+=new Array(C1+1).join("0"),pf=F1}var v1=/^([0-9][0-9]*)$/.test(pf);if(!v1)throw new Error("Invalid integer: "+pf);for(var X1=[],i2=pf.length,f2=l,Y1=i2-f2;i2>0;)X1.push(+pf.slice(Y1,i2)),Y1-=f2,Y1<0&&(Y1=0),i2-=f2;return ve(X1),new g(X1,e1)}function c2(pf){if(P(pf)){if(pf!==De(pf))throw new Error(pf+" is not an integer.");return new A(pf)}return B1(pf.toString())}function H1(pf){return typeof pf=="number"?c2(pf):typeof pf=="string"?B1(pf):pf}for(var x1=0;x1<1e3;x1++)m[x1]=new A(x1),x1>0&&(m[-x1]=new A(-x1));return m.one=m[1],m.zero=m[0],m.minusOne=m[-1],m.max=b2,m.min=_2,m.gcd=q1,m.lcm=U1,m.isInstance=function(pf){return pf instanceof g||pf instanceof A},m.randBetween=M2,m.fromArray=function(pf,o1,e1){return p1(pf.map(H1),H1(o1||10),e1)},m}();return t.hasOwnProperty("exports")&&(t.exports=a),a}(),bigDec:function(a){var s,o,l,u,c=9e15,d=1e9,m="0123456789abcdef",g="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",A="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",P={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-c,maxE:c,crypto:!1},W=!0,me="[DecimalError] ",ve=me+"Invalid argument: ",He=me+"Precision limit exceeded",De=me+"crypto unavailable",Xe=Math.floor,qe=Math.pow,Rs=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Vc=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,So=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Do=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,eh=1e7,Ko=7,Ge=g.length-1,An=A.length-1,wt={name:"[object Decimal]"};function Bs(uf){var Qp,gf,Ym,d1=uf.length-1,r1="",g1=uf[0];if(d1>0){for(r1+=g1,Qp=1;Qp<d1;Qp++)Ym=uf[Qp]+"",(gf=Ko-Ym.length)&&(r1+=E1(gf)),r1+=Ym;g1=uf[Qp],(gf=Ko-(Ym=g1+"").length)&&(r1+=E1(gf))}else if(g1===0)return"0";for(;g1%10==0;)g1/=10;return r1+g1}function yh(uf,Qp,gf){if(uf!==~~uf||uf<Qp||uf>gf)throw Error(ve+uf)}function df(uf,Qp,gf,Ym){var d1,r1,g1,R1;for(r1=uf[0];r1>=10;r1/=10)--Qp;return--Qp<0?(Qp+=Ko,d1=0):(d1=Math.ceil((Qp+1)/Ko),Qp%=Ko),r1=qe(10,Ko-Qp),R1=uf[d1]%r1|0,Ym==null?Qp<3?(Qp==0?R1=R1/100|0:Qp==1&&(R1=R1/10|0),g1=gf<4&&R1==99999||gf>3&&R1==49999||R1==5e4||R1==0):g1=(gf<4&&R1+1==r1||gf>3&&R1+1==r1/2)&&(uf[d1+1]/r1/100|0)==qe(10,Qp-2)-1||(R1==r1/2||R1==0)&&(uf[d1+1]/r1/100|0)==0:Qp<4?(Qp==0?R1=R1/1e3|0:Qp==1?R1=R1/100|0:Qp==2&&(R1=R1/10|0),g1=(Ym||gf<4)&&R1==9999||!Ym&&gf>3&&R1==4999):g1=((Ym||gf<4)&&R1+1==r1||!Ym&&gf>3&&R1+1==r1/2)&&(uf[d1+1]/r1/1e3|0)==qe(10,Qp-3)-1,g1}function Fc(uf,Qp,gf){for(var Ym,d1,r1=[0],g1=0,R1=uf.length;g1<R1;){for(d1=r1.length;d1--;)r1[d1]*=Qp;for(r1[0]+=m.indexOf(uf.charAt(g1++)),Ym=0;Ym<r1.length;Ym++)r1[Ym]>gf-1&&(r1[Ym+1]===void 0&&(r1[Ym+1]=0),r1[Ym+1]+=r1[Ym]/gf|0,r1[Ym]%=gf)}return r1.reverse()}wt.absoluteValue=wt.abs=function(){var uf=new this.constructor(this);return uf.s<0&&(uf.s=1),qc(uf)},wt.ceil=function(){return qc(new this.constructor(this),this.e+1,2)},wt.comparedTo=wt.cmp=function(uf){var Qp,gf,Ym,d1,r1=this,g1=r1.d,R1=(uf=new r1.constructor(uf)).d,M1=r1.s,L1=uf.s;if(!g1||!R1)return M1&&L1?M1!==L1?M1:g1===R1?0:!g1^M1<0?1:-1:NaN;if(!g1[0]||!R1[0])return g1[0]?M1:R1[0]?-L1:0;if(M1!==L1)return M1;if(r1.e!==uf.e)return r1.e>uf.e^M1<0?1:-1;for(Qp=0,gf=(Ym=g1.length)<(d1=R1.length)?Ym:d1;Qp<gf;++Qp)if(g1[Qp]!==R1[Qp])return g1[Qp]>R1[Qp]^M1<0?1:-1;return Ym===d1?0:Ym>d1^M1<0?1:-1},wt.cosine=wt.cos=function(){var uf,Qp,gf=this,Ym=gf.constructor;return gf.d?gf.d[0]?(uf=Ym.precision,Qp=Ym.rounding,Ym.precision=uf+Math.max(gf.e,gf.sd())+Ko,Ym.rounding=1,gf=function(d1,r1){var g1,R1,M1=r1.d.length;M1<32?(g1=Math.ceil(M1/3),R1=(1/U1(4,g1)).toString()):(g1=16,R1="2.3283064365386962890625e-10"),d1.precision+=g1,r1=q1(d1,1,r1.times(R1),new d1(1));for(var L1=g1;L1--;){var O1=r1.times(r1);r1=O1.times(O1).minus(O1).times(8).plus(1)}return d1.precision-=g1,r1}(Ym,M2(Ym,gf)),Ym.precision=uf,Ym.rounding=Qp,qc(u==2||u==3?gf.neg():gf,uf,Qp,!0)):new Ym(1):new Ym(NaN)},wt.cubeRoot=wt.cbrt=function(){var uf,Qp,gf,Ym,d1,r1,g1,R1,M1,L1,O1=this,a2=O1.constructor;if(!O1.isFinite()||O1.isZero())return new a2(O1);for(W=!1,(r1=O1.s*qe(O1.s*O1,.3333333333333333))&&Math.abs(r1)!=1/0?Ym=new a2(r1.toString()):(gf=Bs(O1.d),(r1=((uf=O1.e)-gf.length+1)%3)&&(gf+=r1==1||r1==-2?"0":"00"),r1=qe(gf,.3333333333333333),uf=Xe((uf+1)/3)-(uf%3==(uf<0?-1:2)),(Ym=new a2(gf=r1==1/0?"5e"+uf:(gf=r1.toExponential()).slice(0,gf.indexOf("e")+1)+uf)).s=O1.s),g1=(uf=a2.precision)+3;;)if(L1=(M1=(R1=Ym).times(R1).times(R1)).plus(O1),Ym=_h(L1.plus(O1).times(R1),L1.plus(M1),g1+2,1),Bs(R1.d).slice(0,g1)===(gf=Bs(Ym.d)).slice(0,g1)){if((gf=gf.slice(g1-3,g1+1))!="9999"&&(d1||gf!="4999")){+gf&&(+gf.slice(1)||gf.charAt(0)!="5")||(qc(Ym,uf+1,1),Qp=!Ym.times(Ym).times(Ym).eq(O1));break}if(!d1&&(qc(R1,uf+1,0),R1.times(R1).times(R1).eq(O1))){Ym=R1;break}g1+=4,d1=1}return W=!0,qc(Ym,uf,a2.rounding,Qp)},wt.decimalPlaces=wt.dp=function(){var uf,Qp=this.d,gf=NaN;if(Qp){if(gf=((uf=Qp.length-1)-Xe(this.e/Ko))*Ko,uf=Qp[uf])for(;uf%10==0;uf/=10)gf--;gf<0&&(gf=0)}return gf},wt.dividedBy=wt.div=function(uf){return _h(this,new this.constructor(uf))},wt.dividedToIntegerBy=wt.divToInt=function(uf){var Qp=this.constructor;return qc(_h(this,new Qp(uf),0,1,1),Qp.precision,Qp.rounding)},wt.equals=wt.eq=function(uf){return this.cmp(uf)===0},wt.floor=function(){return qc(new this.constructor(this),this.e+1,3)},wt.greaterThan=wt.gt=function(uf){return this.cmp(uf)>0},wt.greaterThanOrEqualTo=wt.gte=function(uf){var Qp=this.cmp(uf);return Qp==1||Qp===0},wt.hyperbolicCosine=wt.cosh=function(){var uf,Qp,gf,Ym,d1,r1=this,g1=r1.constructor,R1=new g1(1);if(!r1.isFinite())return new g1(r1.s?1/0:NaN);if(r1.isZero())return R1;gf=g1.precision,Ym=g1.rounding,g1.precision=gf+Math.max(r1.e,r1.sd())+4,g1.rounding=1,(d1=r1.d.length)<32?Qp=(1/U1(4,uf=Math.ceil(d1/3))).toString():(uf=16,Qp="2.3283064365386962890625e-10"),r1=q1(g1,1,r1.times(Qp),new g1(1),!0);for(var M1,L1=uf,O1=new g1(8);L1--;)M1=r1.times(r1),r1=R1.minus(M1.times(O1.minus(M1.times(O1))));return qc(r1,g1.precision=gf,g1.rounding=Ym,!0)},wt.hyperbolicSine=wt.sinh=function(){var uf,Qp,gf,Ym,d1=this,r1=d1.constructor;if(!d1.isFinite()||d1.isZero())return new r1(d1);if(Qp=r1.precision,gf=r1.rounding,r1.precision=Qp+Math.max(d1.e,d1.sd())+4,r1.rounding=1,(Ym=d1.d.length)<3)d1=q1(r1,2,d1,d1,!0);else{uf=(uf=1.4*Math.sqrt(Ym))>16?16:0|uf,d1=q1(r1,2,d1=d1.times(1/U1(5,uf)),d1,!0);for(var g1,R1=new r1(5),M1=new r1(16),L1=new r1(20);uf--;)g1=d1.times(d1),d1=d1.times(R1.plus(g1.times(M1.times(g1).plus(L1))))}return r1.precision=Qp,r1.rounding=gf,qc(d1,Qp,gf,!0)},wt.hyperbolicTangent=wt.tanh=function(){var uf,Qp,gf=this,Ym=gf.constructor;return gf.isFinite()?gf.isZero()?new Ym(gf):(uf=Ym.precision,Qp=Ym.rounding,Ym.precision=uf+7,Ym.rounding=1,_h(gf.sinh(),gf.cosh(),Ym.precision=uf,Ym.rounding=Qp)):new Ym(gf.s)},wt.inverseCosine=wt.acos=function(){var uf,Qp=this,gf=Qp.constructor,Ym=Qp.abs().cmp(1),d1=gf.precision,r1=gf.rounding;return Ym!==-1?Ym===0?Qp.isNeg()?a1(gf,d1,r1):new gf(0):new gf(NaN):Qp.isZero()?a1(gf,d1+4,r1).times(.5):(gf.precision=d1+6,gf.rounding=1,Qp=Qp.asin(),uf=a1(gf,d1+4,r1).times(.5),gf.precision=d1,gf.rounding=r1,uf.minus(Qp))},wt.inverseHyperbolicCosine=wt.acosh=function(){var uf,Qp,gf=this,Ym=gf.constructor;return gf.lte(1)?new Ym(gf.eq(1)?0:NaN):gf.isFinite()?(uf=Ym.precision,Qp=Ym.rounding,Ym.precision=uf+Math.max(Math.abs(gf.e),gf.sd())+4,Ym.rounding=1,W=!1,gf=gf.times(gf).minus(1).sqrt().plus(gf),W=!0,Ym.precision=uf,Ym.rounding=Qp,gf.ln()):new Ym(gf)},wt.inverseHyperbolicSine=wt.asinh=function(){var uf,Qp,gf=this,Ym=gf.constructor;return!gf.isFinite()||gf.isZero()?new Ym(gf):(uf=Ym.precision,Qp=Ym.rounding,Ym.precision=uf+2*Math.max(Math.abs(gf.e),gf.sd())+6,Ym.rounding=1,W=!1,gf=gf.times(gf).plus(1).sqrt().plus(gf),W=!0,Ym.precision=uf,Ym.rounding=Qp,gf.ln())},wt.inverseHyperbolicTangent=wt.atanh=function(){var uf,Qp,gf,Ym,d1=this,r1=d1.constructor;return d1.isFinite()?d1.e>=0?new r1(d1.abs().eq(1)?d1.s/0:d1.isZero()?d1:NaN):(uf=r1.precision,Qp=r1.rounding,Ym=d1.sd(),Math.max(Ym,uf)<2*-d1.e-1?qc(new r1(d1),uf,Qp,!0):(r1.precision=gf=Ym-d1.e,d1=_h(d1.plus(1),new r1(1).minus(d1),gf+uf,1),r1.precision=uf+4,r1.rounding=1,d1=d1.ln(),r1.precision=uf,r1.rounding=Qp,d1.times(.5))):new r1(NaN)},wt.inverseSine=wt.asin=function(){var uf,Qp,gf,Ym,d1=this,r1=d1.constructor;return d1.isZero()?new r1(d1):(Qp=d1.abs().cmp(1),gf=r1.precision,Ym=r1.rounding,Qp!==-1?Qp===0?((uf=a1(r1,gf+4,Ym).times(.5)).s=d1.s,uf):new r1(NaN):(r1.precision=gf+6,r1.rounding=1,d1=d1.div(new r1(1).minus(d1.times(d1)).sqrt().plus(1)).atan(),r1.precision=gf,r1.rounding=Ym,d1.times(2)))},wt.inverseTangent=wt.atan=function(){var uf,Qp,gf,Ym,d1,r1,g1,R1,M1,L1=this,O1=L1.constructor,a2=O1.precision,S2=O1.rounding;if(L1.isFinite()){if(L1.isZero())return new O1(L1);if(L1.abs().eq(1)&&a2+4<=An)return(g1=a1(O1,a2+4,S2).times(.25)).s=L1.s,g1}else{if(!L1.s)return new O1(NaN);if(a2+4<=An)return(g1=a1(O1,a2+4,S2).times(.5)).s=L1.s,g1}for(O1.precision=R1=a2+10,O1.rounding=1,uf=gf=Math.min(28,R1/Ko+2|0);uf;--uf)L1=L1.div(L1.times(L1).plus(1).sqrt().plus(1));for(W=!1,Qp=Math.ceil(R1/Ko),Ym=1,M1=L1.times(L1),g1=new O1(L1),d1=L1;uf!==-1;)if(d1=d1.times(M1),r1=g1.minus(d1.div(Ym+=2)),d1=d1.times(M1),(g1=r1.plus(d1.div(Ym+=2))).d[Qp]!==void 0)for(uf=Qp;g1.d[uf]===r1.d[uf]&&uf--;);return gf&&(g1=g1.times(2<<gf-1)),W=!0,qc(g1,O1.precision=a2,O1.rounding=S2,!0)},wt.isFinite=function(){return!!this.d},wt.isInteger=wt.isInt=function(){return!!this.d&&Xe(this.e/Ko)>this.d.length-2},wt.isNaN=function(){return!this.s},wt.isNegative=wt.isNeg=function(){return this.s<0},wt.isPositive=wt.isPos=function(){return this.s>0},wt.isZero=function(){return!!this.d&&this.d[0]===0},wt.lessThan=wt.lt=function(uf){return this.cmp(uf)<0},wt.lessThanOrEqualTo=wt.lte=function(uf){return this.cmp(uf)<1},wt.logarithm=wt.log=function(uf){var Qp,gf,Ym,d1,r1,g1,R1,M1,L1=this.constructor,O1=L1.precision,a2=L1.rounding;if(uf==null)uf=new L1(10),Qp=!0;else{if(gf=(uf=new L1(uf)).d,uf.s<0||!gf||!gf[0]||uf.eq(1))return new L1(NaN);Qp=uf.eq(10)}if(gf=this.d,this.s<0||!gf||!gf[0]||this.eq(1))return new L1(gf&&!gf[0]?-1/0:this.s!=1?NaN:gf?0:1/0);if(Qp)if(gf.length>1)r1=!0;else{for(d1=gf[0];d1%10==0;)d1/=10;r1=d1!==1}if(W=!1,g1=C2(this,R1=O1+5),Ym=Qp?mf(L1,R1+10):C2(uf,R1),df((M1=_h(g1,Ym,R1,1)).d,d1=O1,a2))do if(g1=C2(this,R1+=10),Ym=Qp?mf(L1,R1+10):C2(uf,R1),M1=_h(g1,Ym,R1,1),!r1){+Bs(M1.d).slice(d1+1,d1+15)+1==1e14&&(M1=qc(M1,O1+1,0));break}while(df(M1.d,d1+=10,a2));return W=!0,qc(M1,O1,a2)},wt.minus=wt.sub=function(uf){var Qp,gf,Ym,d1,r1,g1,R1,M1,L1,O1,a2,S2,U2=this,H2=U2.constructor;if(uf=new H2(uf),!U2.d||!uf.d)return U2.s&&uf.s?U2.d?uf.s=-uf.s:uf=new H2(uf.d||U2.s!==uf.s?U2:NaN):uf=new H2(NaN),uf;if(U2.s!=uf.s)return uf.s=-uf.s,U2.plus(uf);if(L1=U2.d,S2=uf.d,R1=H2.precision,M1=H2.rounding,!L1[0]||!S2[0]){if(S2[0])uf.s=-uf.s;else{if(!L1[0])return new H2(M1===3?-0:0);uf=new H2(U2)}return W?qc(uf,R1,M1):uf}if(gf=Xe(uf.e/Ko),O1=Xe(U2.e/Ko),L1=L1.slice(),r1=O1-gf){for((a2=r1<0)?(Qp=L1,r1=-r1,g1=S2.length):(Qp=S2,gf=O1,g1=L1.length),r1>(Ym=Math.max(Math.ceil(R1/Ko),g1)+2)&&(r1=Ym,Qp.length=1),Qp.reverse(),Ym=r1;Ym--;)Qp.push(0);Qp.reverse()}else{for((a2=(Ym=L1.length)<(g1=S2.length))&&(g1=Ym),Ym=0;Ym<g1;Ym++)if(L1[Ym]!=S2[Ym]){a2=L1[Ym]<S2[Ym];break}r1=0}for(a2&&(Qp=L1,L1=S2,S2=Qp,uf.s=-uf.s),g1=L1.length,Ym=S2.length-g1;Ym>0;--Ym)L1[g1++]=0;for(Ym=S2.length;Ym>r1;){if(L1[--Ym]<S2[Ym]){for(d1=Ym;d1&&L1[--d1]===0;)L1[d1]=eh-1;--L1[d1],L1[Ym]+=eh}L1[Ym]-=S2[Ym]}for(;L1[--g1]===0;)L1.pop();for(;L1[0]===0;L1.shift())--gf;return L1[0]?(uf.d=L1,uf.e=cf(L1,gf),W?qc(uf,R1,M1):uf):new H2(M1===3?-0:0)},wt.modulo=wt.mod=function(uf){var Qp,gf=this,Ym=gf.constructor;return uf=new Ym(uf),!gf.d||!uf.s||uf.d&&!uf.d[0]?new Ym(NaN):!uf.d||gf.d&&!gf.d[0]?qc(new Ym(gf),Ym.precision,Ym.rounding):(W=!1,Ym.modulo==9?(Qp=_h(gf,uf.abs(),0,3,1)).s*=uf.s:Qp=_h(gf,uf,0,Ym.modulo,1),Qp=Qp.times(uf),W=!0,gf.minus(Qp))},wt.naturalExponential=wt.exp=function(){return m2(this)},wt.naturalLogarithm=wt.ln=function(){return C2(this)},wt.negated=wt.neg=function(){var uf=new this.constructor(this);return uf.s=-uf.s,qc(uf)},wt.plus=wt.add=function(uf){var Qp,gf,Ym,d1,r1,g1,R1,M1,L1,O1,a2=this,S2=a2.constructor;if(uf=new S2(uf),!a2.d||!uf.d)return a2.s&&uf.s?a2.d||(uf=new S2(uf.d||a2.s===uf.s?a2:NaN)):uf=new S2(NaN),uf;if(a2.s!=uf.s)return uf.s=-uf.s,a2.minus(uf);if(L1=a2.d,O1=uf.d,R1=S2.precision,M1=S2.rounding,!L1[0]||!O1[0])return O1[0]||(uf=new S2(a2)),W?qc(uf,R1,M1):uf;if(r1=Xe(a2.e/Ko),Ym=Xe(uf.e/Ko),L1=L1.slice(),d1=r1-Ym){for(d1<0?(gf=L1,d1=-d1,g1=O1.length):(gf=O1,Ym=r1,g1=L1.length),d1>(g1=(r1=Math.ceil(R1/Ko))>g1?r1+1:g1+1)&&(d1=g1,gf.length=1),gf.reverse();d1--;)gf.push(0);gf.reverse()}for((g1=L1.length)-(d1=O1.length)<0&&(d1=g1,gf=O1,O1=L1,L1=gf),Qp=0;d1;)Qp=(L1[--d1]=L1[d1]+O1[d1]+Qp)/eh|0,L1[d1]%=eh;for(Qp&&(L1.unshift(Qp),++Ym),g1=L1.length;L1[--g1]==0;)L1.pop();return uf.d=L1,uf.e=cf(L1,Ym),W?qc(uf,R1,M1):uf},wt.precision=wt.sd=function(uf){var Qp,gf=this;if(uf!==void 0&&uf!==!!uf&&uf!==1&&uf!==0)throw Error(ve+uf);return gf.d?(Qp=s1(gf.d),uf&&gf.e+1>Qp&&(Qp=gf.e+1)):Qp=NaN,Qp},wt.round=function(){var uf=this,Qp=uf.constructor;return qc(new Qp(uf),uf.e+1,Qp.rounding)},wt.sine=wt.sin=function(){var uf,Qp,gf=this,Ym=gf.constructor;return gf.isFinite()?gf.isZero()?new Ym(gf):(uf=Ym.precision,Qp=Ym.rounding,Ym.precision=uf+Math.max(gf.e,gf.sd())+Ko,Ym.rounding=1,gf=function(d1,r1){var g1,R1=r1.d.length;if(R1<3)return q1(d1,2,r1,r1);g1=(g1=1.4*Math.sqrt(R1))>16?16:0|g1,r1=r1.times(1/U1(5,g1)),r1=q1(d1,2,r1,r1);for(var M1,L1=new d1(5),O1=new d1(16),a2=new d1(20);g1--;)M1=r1.times(r1),r1=r1.times(L1.plus(M1.times(O1.times(M1).minus(a2))));return r1}(Ym,M2(Ym,gf)),Ym.precision=uf,Ym.rounding=Qp,qc(u>2?gf.neg():gf,uf,Qp,!0)):new Ym(NaN)},wt.squareRoot=wt.sqrt=function(){var uf,Qp,gf,Ym,d1,r1,g1=this,R1=g1.d,M1=g1.e,L1=g1.s,O1=g1.constructor;if(L1!==1||!R1||!R1[0])return new O1(!L1||L1<0&&(!R1||R1[0])?NaN:R1?g1:1/0);for(W=!1,(L1=Math.sqrt(+g1))==0||L1==1/0?(((Qp=Bs(R1)).length+M1)%2==0&&(Qp+="0"),L1=Math.sqrt(Qp),M1=Xe((M1+1)/2)-(M1<0||M1%2),Ym=new O1(Qp=L1==1/0?"5e"+M1:(Qp=L1.toExponential()).slice(0,Qp.indexOf("e")+1)+M1)):Ym=new O1(L1.toString()),gf=(M1=O1.precision)+3;;)if(Ym=(r1=Ym).plus(_h(g1,r1,gf+2,1)).times(.5),Bs(r1.d).slice(0,gf)===(Qp=Bs(Ym.d)).slice(0,gf)){if((Qp=Qp.slice(gf-3,gf+1))!="9999"&&(d1||Qp!="4999")){+Qp&&(+Qp.slice(1)||Qp.charAt(0)!="5")||(qc(Ym,M1+1,1),uf=!Ym.times(Ym).eq(g1));break}if(!d1&&(qc(r1,M1+1,0),r1.times(r1).eq(g1))){Ym=r1;break}gf+=4,d1=1}return W=!0,qc(Ym,M1,O1.rounding,uf)},wt.tangent=wt.tan=function(){var uf,Qp,gf=this,Ym=gf.constructor;return gf.isFinite()?gf.isZero()?new Ym(gf):(uf=Ym.precision,Qp=Ym.rounding,Ym.precision=uf+10,Ym.rounding=1,(gf=gf.sin()).s=1,gf=_h(gf,new Ym(1).minus(gf.times(gf)).sqrt(),uf+10,0),Ym.precision=uf,Ym.rounding=Qp,qc(u==2||u==4?gf.neg():gf,uf,Qp,!0)):new Ym(NaN)},wt.times=wt.mul=function(uf){var Qp,gf,Ym,d1,r1,g1,R1,M1,L1,O1=this,a2=O1.constructor,S2=O1.d,U2=(uf=new a2(uf)).d;if(uf.s*=O1.s,!(S2&&S2[0]&&U2&&U2[0]))return new a2(!uf.s||S2&&!S2[0]&&!U2||U2&&!U2[0]&&!S2?NaN:S2&&U2?0*uf.s:uf.s/0);for(gf=Xe(O1.e/Ko)+Xe(uf.e/Ko),(M1=S2.length)<(L1=U2.length)&&(r1=S2,S2=U2,U2=r1,g1=M1,M1=L1,L1=g1),r1=[],Ym=g1=M1+L1;Ym--;)r1.push(0);for(Ym=L1;--Ym>=0;){for(Qp=0,d1=M1+Ym;d1>Ym;)R1=r1[d1]+U2[Ym]*S2[d1-Ym-1]+Qp,r1[d1--]=R1%eh|0,Qp=R1/eh|0;r1[d1]=(r1[d1]+Qp)%eh|0}for(;!r1[--g1];)r1.pop();return Qp?++gf:r1.shift(),uf.d=r1,uf.e=cf(r1,gf),W?qc(uf,a2.precision,a2.rounding):uf},wt.toBinary=function(uf,Qp){return x2(this,2,uf,Qp)},wt.toDecimalPlaces=wt.toDP=function(uf,Qp){var gf=this,Ym=gf.constructor;return gf=new Ym(gf),uf===void 0?gf:(yh(uf,0,d),Qp===void 0?Qp=Ym.rounding:yh(Qp,0,8),qc(gf,uf+gf.e+1,Qp))},wt.toExponential=function(uf,Qp){var gf,Ym=this,d1=Ym.constructor;return uf===void 0?gf=Mh(Ym,!0):(yh(uf,0,d),Qp===void 0?Qp=d1.rounding:yh(Qp,0,8),gf=Mh(Ym=qc(new d1(Ym),uf+1,Qp),!0,uf+1)),Ym.isNeg()&&!Ym.isZero()?"-"+gf:gf},wt.toFixed=function(uf,Qp){var gf,Ym,d1=this,r1=d1.constructor;return uf===void 0?gf=Mh(d1):(yh(uf,0,d),Qp===void 0?Qp=r1.rounding:yh(Qp,0,8),gf=Mh(Ym=qc(new r1(d1),uf+d1.e+1,Qp),!1,uf+Ym.e+1)),d1.isNeg()&&!d1.isZero()?"-"+gf:gf},wt.toFraction=function(uf){var Qp,gf,Ym,d1,r1,g1,R1,M1,L1,O1,a2,S2,U2=this,H2=U2.d,$2=U2.constructor;if(!H2)return new $2(U2);if(L1=gf=new $2(1),Ym=M1=new $2(0),g1=(r1=(Qp=new $2(Ym)).e=s1(H2)-U2.e-1)%Ko,Qp.d[0]=qe(10,g1<0?Ko+g1:g1),uf==null)uf=r1>0?Qp:L1;else{if(!(R1=new $2(uf)).isInt()||R1.lt(L1))throw Error(ve+R1);uf=R1.gt(Qp)?r1>0?Qp:L1:R1}for(W=!1,R1=new $2(Bs(H2)),O1=$2.precision,$2.precision=r1=H2.length*Ko*2;a2=_h(R1,Qp,0,1,1),(d1=gf.plus(a2.times(Ym))).cmp(uf)!=1;)gf=Ym,Ym=d1,d1=L1,L1=M1.plus(a2.times(d1)),M1=d1,d1=Qp,Qp=R1.minus(a2.times(d1)),R1=d1;return d1=_h(uf.minus(gf),Ym,0,1,1),M1=M1.plus(d1.times(L1)),gf=gf.plus(d1.times(Ym)),M1.s=L1.s=U2.s,S2=_h(L1,Ym,r1,1).minus(U2).abs().cmp(_h(M1,gf,r1,1).minus(U2).abs())<1?[L1,Ym]:[M1,gf],$2.precision=O1,W=!0,S2},wt.toHexadecimal=wt.toHex=function(uf,Qp){return x2(this,16,uf,Qp)},wt.toNearest=function(uf,Qp){var gf=this,Ym=gf.constructor;if(gf=new Ym(gf),uf==null){if(!gf.d)return gf;uf=new Ym(1),Qp=Ym.rounding}else{if(uf=new Ym(uf),Qp===void 0?Qp=Ym.rounding:yh(Qp,0,8),!gf.d)return uf.s?gf:uf;if(!uf.d)return uf.s&&(uf.s=gf.s),uf}return uf.d[0]?(W=!1,gf=_h(gf,uf,0,Qp,1).times(uf),W=!0,qc(gf)):(uf.s=gf.s,gf=uf),gf},wt.toNumber=function(){return+this},wt.toOctal=function(uf,Qp){return x2(this,8,uf,Qp)},wt.toPower=wt.pow=function(uf){var Qp,gf,Ym,d1,r1,g1,R1=this,M1=R1.constructor,L1=+(uf=new M1(uf));if(!(R1.d&&uf.d&&R1.d[0]&&uf.d[0]))return new M1(qe(+R1,L1));if((R1=new M1(R1)).eq(1))return R1;if(Ym=M1.precision,r1=M1.rounding,uf.eq(1))return qc(R1,Ym,r1);if((Qp=Xe(uf.e/Ko))>=uf.d.length-1&&(gf=L1<0?-L1:L1)<=9007199254740991)return d1=T1(M1,R1,gf,Ym),uf.s<0?new M1(1).div(d1):qc(d1,Ym,r1);if((g1=R1.s)<0){if(Qp<uf.d.length-1)return new M1(NaN);if((1&uf.d[Qp])==0&&(g1=1),R1.e==0&&R1.d[0]==1&&R1.d.length==1)return R1.s=g1,R1}return(Qp=(gf=qe(+R1,L1))!=0&&isFinite(gf)?new M1(gf+"").e:Xe(L1*(Math.log("0."+Bs(R1.d))/Math.LN10+R1.e+1)))>M1.maxE+1||Qp<M1.minE-1?new M1(Qp>0?g1/0:0):(W=!1,M1.rounding=R1.s=1,gf=Math.min(12,(Qp+"").length),(d1=m2(uf.times(C2(R1,Ym+gf)),Ym)).d&&df((d1=qc(d1,Ym+5,1)).d,Ym,r1)&&(Qp=Ym+10,+Bs((d1=qc(m2(uf.times(C2(R1,Qp+gf)),Qp),Qp+5,1)).d).slice(Ym+1,Ym+15)+1==1e14&&(d1=qc(d1,Ym+1,0))),d1.s=g1,W=!0,M1.rounding=r1,qc(d1,Ym,r1))},wt.toPrecision=function(uf,Qp){var gf,Ym=this,d1=Ym.constructor;return uf===void 0?gf=Mh(Ym,Ym.e<=d1.toExpNeg||Ym.e>=d1.toExpPos):(yh(uf,1,d),Qp===void 0?Qp=d1.rounding:yh(Qp,0,8),gf=Mh(Ym=qc(new d1(Ym),uf,Qp),uf<=Ym.e||Ym.e<=d1.toExpNeg,uf)),Ym.isNeg()&&!Ym.isZero()?"-"+gf:gf},wt.toSignificantDigits=wt.toSD=function(uf,Qp){var gf=this.constructor;return uf===void 0?(uf=gf.precision,Qp=gf.rounding):(yh(uf,1,d),Qp===void 0?Qp=gf.rounding:yh(Qp,0,8)),qc(new gf(this),uf,Qp)},wt.toString=function(){var uf=this,Qp=uf.constructor,gf=Mh(uf,uf.e<=Qp.toExpNeg||uf.e>=Qp.toExpPos);return uf.isNeg()&&!uf.isZero()?"-"+gf:gf},wt.truncated=wt.trunc=function(){return qc(new this.constructor(this),this.e+1,1)},wt.valueOf=wt.toJSON=function(){var uf=this,Qp=uf.constructor,gf=Mh(uf,uf.e<=Qp.toExpNeg||uf.e>=Qp.toExpPos);return uf.isNeg()?"-"+gf:gf};var _h=function(){function uf(Ym,d1,r1){var g1,R1=0,M1=Ym.length;for(Ym=Ym.slice();M1--;)g1=Ym[M1]*d1+R1,Ym[M1]=g1%r1|0,R1=g1/r1|0;return R1&&Ym.unshift(R1),Ym}function Qp(Ym,d1,r1,g1){var R1,M1;if(r1!=g1)M1=r1>g1?1:-1;else for(R1=M1=0;R1<r1;R1++)if(Ym[R1]!=d1[R1]){M1=Ym[R1]>d1[R1]?1:-1;break}return M1}function gf(Ym,d1,r1,g1){for(var R1=0;r1--;)Ym[r1]-=R1,R1=Ym[r1]<d1[r1]?1:0,Ym[r1]=R1*g1+Ym[r1]-d1[r1];for(;!Ym[0]&&Ym.length>1;)Ym.shift()}return function(Ym,d1,r1,g1,R1,M1){var L1,O1,a2,S2,U2,H2,$2,r4,P4,A4,Y2,B2,d4,Z2,l4,f4,I2,h1,H4,s6,g4=Ym.constructor,I4=Ym.s==d1.s?1:-1,Q2=Ym.d,x4=d1.d;if(!(Q2&&Q2[0]&&x4&&x4[0]))return new g4(Ym.s&&d1.s&&(Q2?!x4||Q2[0]!=x4[0]:x4)?Q2&&Q2[0]==0||!x4?0*I4:I4/0:NaN);for(M1?(U2=1,O1=Ym.e-d1.e):(M1=eh,U2=Ko,O1=Xe(Ym.e/U2)-Xe(d1.e/U2)),H4=x4.length,I2=Q2.length,A4=(P4=new g4(I4)).d=[],a2=0;x4[a2]==(Q2[a2]||0);a2++);if(x4[a2]>(Q2[a2]||0)&&O1--,r1==null?(Z2=r1=g4.precision,g1=g4.rounding):Z2=R1?r1+(Ym.e-d1.e)+1:r1,Z2<0)A4.push(1),H2=!0;else{if(Z2=Z2/U2+2|0,a2=0,H4==1){for(S2=0,x4=x4[0],Z2++;(a2<I2||S2)&&Z2--;a2++)l4=S2*M1+(Q2[a2]||0),A4[a2]=l4/x4|0,S2=l4%x4|0;H2=S2||a2<I2}else{for((S2=M1/(x4[0]+1)|0)>1&&(x4=uf(x4,S2,M1),Q2=uf(Q2,S2,M1),H4=x4.length,I2=Q2.length),f4=H4,B2=(Y2=Q2.slice(0,H4)).length;B2<H4;)Y2[B2++]=0;(s6=x4.slice()).unshift(0),h1=x4[0],x4[1]>=M1/2&&++h1;do S2=0,(L1=Qp(x4,Y2,H4,B2))<0?(d4=Y2[0],H4!=B2&&(d4=d4*M1+(Y2[1]||0)),(S2=d4/h1|0)>1?(S2>=M1&&(S2=M1-1),(L1=Qp($2=uf(x4,S2,M1),Y2,r4=$2.length,B2=Y2.length))==1&&(S2--,gf($2,H4<r4?s6:x4,r4,M1))):(S2==0&&(L1=S2=1),$2=x4.slice()),(r4=$2.length)<B2&&$2.unshift(0),gf(Y2,$2,B2,M1),L1==-1&&(L1=Qp(x4,Y2,H4,B2=Y2.length))<1&&(S2++,gf(Y2,H4<B2?s6:x4,B2,M1)),B2=Y2.length):L1===0&&(S2++,Y2=[0]),A4[a2++]=S2,L1&&Y2[0]?Y2[B2++]=Q2[f4]||0:(Y2=[Q2[f4]],B2=1);while((f4++<I2||Y2[0]!==void 0)&&Z2--);H2=Y2[0]!==void 0}A4[0]||A4.shift()}if(U2==1)P4.e=O1,o=H2;else{for(a2=1,S2=A4[0];S2>=10;S2/=10)a2++;P4.e=a2+O1*U2-1,qc(P4,R1?r1+P4.e+1:r1,g1,H2)}return P4}}();function qc(uf,Qp,gf,Ym){var d1,r1,g1,R1,M1,L1,O1,a2,S2,U2=uf.constructor;e:if(Qp!=null){if(!(a2=uf.d))return uf;for(d1=1,R1=a2[0];R1>=10;R1/=10)d1++;if((r1=Qp-d1)<0)r1+=Ko,g1=Qp,M1=(O1=a2[S2=0])/qe(10,d1-g1-1)%10|0;else if((S2=Math.ceil((r1+1)/Ko))>=(R1=a2.length)){if(!Ym)break e;for(;R1++<=S2;)a2.push(0);O1=M1=0,d1=1,g1=(r1%=Ko)-Ko+1}else{for(O1=R1=a2[S2],d1=1;R1>=10;R1/=10)d1++;M1=(g1=(r1%=Ko)-Ko+d1)<0?0:O1/qe(10,d1-g1-1)%10|0}if(Ym=Ym||Qp<0||a2[S2+1]!==void 0||(g1<0?O1:O1%qe(10,d1-g1-1)),L1=gf<4?(M1||Ym)&&(gf==0||gf==(uf.s<0?3:2)):M1>5||M1==5&&(gf==4||Ym||gf==6&&(r1>0?g1>0?O1/qe(10,d1-g1):0:a2[S2-1])%10&1||gf==(uf.s<0?8:7)),Qp<1||!a2[0])return a2.length=0,L1?(Qp-=uf.e+1,a2[0]=qe(10,(Ko-Qp%Ko)%Ko),uf.e=-Qp||0):a2[0]=uf.e=0,uf;if(r1==0?(a2.length=S2,R1=1,S2--):(a2.length=S2+1,R1=qe(10,Ko-r1),a2[S2]=g1>0?(O1/qe(10,d1-g1)%qe(10,g1)|0)*R1:0),L1)for(;;){if(S2==0){for(r1=1,g1=a2[0];g1>=10;g1/=10)r1++;for(g1=a2[0]+=R1,R1=1;g1>=10;g1/=10)R1++;r1!=R1&&(uf.e++,a2[0]==eh&&(a2[0]=1));break}if(a2[S2]+=R1,a2[S2]!=eh)break;a2[S2--]=0,R1=1}for(r1=a2.length;a2[--r1]===0;)a2.pop()}return W&&(uf.e>U2.maxE?(uf.d=null,uf.e=NaN):uf.e<U2.minE&&(uf.e=0,uf.d=[0])),uf}function Mh(uf,Qp,gf){if(!uf.isFinite())return A2(uf);var Ym,d1=uf.e,r1=Bs(uf.d),g1=r1.length;return Qp?(gf&&(Ym=gf-g1)>0?r1=r1.charAt(0)+"."+r1.slice(1)+E1(Ym):g1>1&&(r1=r1.charAt(0)+"."+r1.slice(1)),r1=r1+(uf.e<0?"e":"e+")+uf.e):d1<0?(r1="0."+E1(-d1-1)+r1,gf&&(Ym=gf-g1)>0&&(r1+=E1(Ym))):d1>=g1?(r1+=E1(d1+1-g1),gf&&(Ym=gf-d1-1)>0&&(r1=r1+"."+E1(Ym))):((Ym=d1+1)<g1&&(r1=r1.slice(0,Ym)+"."+r1.slice(Ym)),gf&&(Ym=gf-g1)>0&&(d1+1===g1&&(r1+="."),r1+=E1(Ym))),r1}function cf(uf,Qp){var gf=uf[0];for(Qp*=Ko;gf>=10;gf/=10)Qp++;return Qp}function mf(uf,Qp,gf){if(Qp>Ge)throw W=!0,gf&&(uf.precision=gf),Error(He);return qc(new uf(g),Qp,1,!0)}function a1(uf,Qp,gf){if(Qp>An)throw Error(He);return qc(new uf(A),Qp,gf,!0)}function s1(uf){var Qp=uf.length-1,gf=Qp*Ko+1;if(Qp=uf[Qp]){for(;Qp%10==0;Qp/=10)gf--;for(Qp=uf[0];Qp>=10;Qp/=10)gf++}return gf}function E1(uf){for(var Qp="";uf--;)Qp+="0";return Qp}function T1(uf,Qp,gf,Ym){var d1,r1=new uf(1),g1=Math.ceil(Ym/Ko+4);for(W=!1;;){if(gf%2&&p1((r1=r1.times(Qp)).d,g1)&&(d1=!0),(gf=Xe(gf/2))===0){gf=r1.d.length-1,d1&&r1.d[gf]===0&&++r1.d[gf];break}p1((Qp=Qp.times(Qp)).d,g1)}return W=!0,r1}function z1(uf){return 1&uf.d[uf.d.length-1]}function W1(uf,Qp,gf){for(var Ym,d1=new uf(Qp[0]),r1=0;++r1<Qp.length;){if(!(Ym=new uf(Qp[r1])).s){d1=Ym;break}d1[gf](Ym)&&(d1=Ym)}return d1}function m2(uf,Qp){var gf,Ym,d1,r1,g1,R1,M1,L1=0,O1=0,a2=0,S2=uf.constructor,U2=S2.rounding,H2=S2.precision;if(!uf.d||!uf.d[0]||uf.e>17)return new S2(uf.d?uf.d[0]?uf.s<0?0:1/0:1:uf.s?uf.s<0?0:uf:NaN);for(Qp==null?(W=!1,M1=H2):M1=Qp,R1=new S2(.03125);uf.e>-2;)uf=uf.times(R1),a2+=5;for(M1+=Ym=Math.log(qe(2,a2))/Math.LN10*2+5|0,gf=r1=g1=new S2(1),S2.precision=M1;;){if(r1=qc(r1.times(uf),M1,1),gf=gf.times(++O1),Bs((R1=g1.plus(_h(r1,gf,M1,1))).d).slice(0,M1)===Bs(g1.d).slice(0,M1)){for(d1=a2;d1--;)g1=qc(g1.times(g1),M1,1);if(Qp!=null)return S2.precision=H2,g1;if(!(L1<3&&df(g1.d,M1-Ym,U2,L1)))return qc(g1,S2.precision=H2,U2,W=!0);S2.precision=M1+=10,gf=r1=R1=new S2(1),O1=0,L1++}g1=R1}}function C2(uf,Qp){var gf,Ym,d1,r1,g1,R1,M1,L1,O1,a2,S2,U2=1,H2=uf,$2=H2.d,r4=H2.constructor,P4=r4.rounding,A4=r4.precision;if(H2.s<0||!$2||!$2[0]||!H2.e&&$2[0]==1&&$2.length==1)return new r4($2&&!$2[0]?-1/0:H2.s!=1?NaN:$2?0:H2);if(Qp==null?(W=!1,O1=A4):O1=Qp,r4.precision=O1+=10,Ym=(gf=Bs($2)).charAt(0),!(Math.abs(r1=H2.e)<15e14))return L1=mf(r4,O1+2,A4).times(r1+""),H2=C2(new r4(Ym+"."+gf.slice(1)),O1-10).plus(L1),r4.precision=A4,Qp==null?qc(H2,A4,P4,W=!0):H2;for(;Ym<7&&Ym!=1||Ym==1&&gf.charAt(1)>3;)Ym=(gf=Bs((H2=H2.times(uf)).d)).charAt(0),U2++;for(r1=H2.e,Ym>1?(H2=new r4("0."+gf),r1++):H2=new r4(Ym+"."+gf.slice(1)),a2=H2,M1=g1=H2=_h(H2.minus(1),H2.plus(1),O1,1),S2=qc(H2.times(H2),O1,1),d1=3;;){if(g1=qc(g1.times(S2),O1,1),Bs((L1=M1.plus(_h(g1,new r4(d1),O1,1))).d).slice(0,O1)===Bs(M1.d).slice(0,O1)){if(M1=M1.times(2),r1!==0&&(M1=M1.plus(mf(r4,O1+2,A4).times(r1+""))),M1=_h(M1,new r4(U2),O1,1),Qp!=null)return r4.precision=A4,M1;if(!df(M1.d,O1-10,P4,R1))return qc(M1,r4.precision=A4,P4,W=!0);r4.precision=O1+=10,L1=g1=H2=_h(a2.minus(1),a2.plus(1),O1,1),S2=qc(H2.times(H2),O1,1),d1=R1=1}M1=L1,d1+=2}}function A2(uf){return String(uf.s*uf.s/0)}function b2(uf,Qp){var gf,Ym,d1;for((gf=Qp.indexOf("."))>-1&&(Qp=Qp.replace(".","")),(Ym=Qp.search(/e/i))>0?(gf<0&&(gf=Ym),gf+=+Qp.slice(Ym+1),Qp=Qp.substring(0,Ym)):gf<0&&(gf=Qp.length),Ym=0;Qp.charCodeAt(Ym)===48;Ym++);for(d1=Qp.length;Qp.charCodeAt(d1-1)===48;--d1);if(Qp=Qp.slice(Ym,d1)){if(d1-=Ym,uf.e=gf=gf-Ym-1,uf.d=[],Ym=(gf+1)%Ko,gf<0&&(Ym+=Ko),Ym<d1){for(Ym&&uf.d.push(+Qp.slice(0,Ym)),d1-=Ko;Ym<d1;)uf.d.push(+Qp.slice(Ym,Ym+=Ko));Qp=Qp.slice(Ym),Ym=Ko-Qp.length}else Ym-=d1;for(;Ym--;)Qp+="0";uf.d.push(+Qp),W&&(uf.e>uf.constructor.maxE?(uf.d=null,uf.e=NaN):uf.e<uf.constructor.minE&&(uf.e=0,uf.d=[0]))}else uf.e=0,uf.d=[0];return uf}function _2(uf,Qp){var gf,Ym,d1,r1,g1,R1,M1,L1,O1;if(Qp==="Infinity"||Qp==="NaN")return+Qp||(uf.s=NaN),uf.e=NaN,uf.d=null,uf;if(Vc.test(Qp))gf=16,Qp=Qp.toLowerCase();else if(Rs.test(Qp))gf=2;else{if(!So.test(Qp))throw Error(ve+Qp);gf=8}for((r1=Qp.search(/p/i))>0?(M1=+Qp.slice(r1+1),Qp=Qp.substring(2,r1)):Qp=Qp.slice(2),g1=(r1=Qp.indexOf("."))>=0,Ym=uf.constructor,g1&&(r1=(R1=(Qp=Qp.replace(".","")).length)-r1,d1=T1(Ym,new Ym(gf),r1,2*r1)),r1=O1=(L1=Fc(Qp,gf,eh)).length-1;L1[r1]===0;--r1)L1.pop();return r1<0?new Ym(0*uf.s):(uf.e=cf(L1,O1),uf.d=L1,W=!1,g1&&(uf=_h(uf,d1,4*R1)),M1&&(uf=uf.times(Math.abs(M1)<54?qe(2,M1):s.pow(2,M1))),W=!0,uf)}function q1(uf,Qp,gf,Ym,d1){var r1,g1,R1,M1,L1=uf.precision,O1=Math.ceil(L1/Ko);for(W=!1,M1=gf.times(gf),R1=new uf(Ym);;){if(g1=_h(R1.times(M1),new uf(Qp++*Qp++),L1,1),R1=d1?Ym.plus(g1):Ym.minus(g1),Ym=_h(g1.times(M1),new uf(Qp++*Qp++),L1,1),(g1=R1.plus(Ym)).d[O1]!==void 0){for(r1=O1;g1.d[r1]===R1.d[r1]&&r1--;);if(r1==-1)break}r1=R1,R1=Ym,Ym=g1,g1=r1}return W=!0,g1.d.length=O1+1,g1}function U1(uf,Qp){for(var gf=uf;--Qp;)gf*=uf;return gf}function M2(uf,Qp){var gf,Ym=Qp.s<0,d1=a1(uf,uf.precision,1),r1=d1.times(.5);if((Qp=Qp.abs()).lte(r1))return u=Ym?4:1,Qp;if((gf=Qp.divToInt(d1)).isZero())u=Ym?3:2;else{if((Qp=Qp.minus(gf.times(d1))).lte(r1))return u=z1(gf)?Ym?2:3:Ym?4:1,Qp;u=z1(gf)?Ym?1:4:Ym?3:2}return Qp.minus(d1).abs()}function x2(uf,Qp,gf,Ym){var d1,r1,g1,R1,M1,L1,O1,a2,S2,U2=uf.constructor,H2=gf!==void 0;if(H2?(yh(gf,1,d),Ym===void 0?Ym=U2.rounding:yh(Ym,0,8)):(gf=U2.precision,Ym=U2.rounding),uf.isFinite()){for(H2?(d1=2,Qp==16?gf=4*gf-3:Qp==8&&(gf=3*gf-2)):d1=Qp,(g1=(O1=Mh(uf)).indexOf("."))>=0&&(O1=O1.replace(".",""),(S2=new U2(1)).e=O1.length-g1,S2.d=Fc(Mh(S2),10,d1),S2.e=S2.d.length),r1=M1=(a2=Fc(O1,10,d1)).length;a2[--M1]==0;)a2.pop();if(a2[0]){if(g1<0?r1--:((uf=new U2(uf)).d=a2,uf.e=r1,a2=(uf=_h(uf,S2,gf,Ym,0,d1)).d,r1=uf.e,L1=o),g1=a2[gf],R1=d1/2,L1=L1||a2[gf+1]!==void 0,L1=Ym<4?(g1!==void 0||L1)&&(Ym===0||Ym===(uf.s<0?3:2)):g1>R1||g1===R1&&(Ym===4||L1||Ym===6&&1&a2[gf-1]||Ym===(uf.s<0?8:7)),a2.length=gf,L1)for(;++a2[--gf]>d1-1;)a2[gf]=0,gf||(++r1,a2.unshift(1));for(M1=a2.length;!a2[M1-1];--M1);for(g1=0,O1="";g1<M1;g1++)O1+=m.charAt(a2[g1]);if(H2){if(M1>1)if(Qp==16||Qp==8){for(g1=Qp==16?4:3,--M1;M1%g1;M1++)O1+="0";for(M1=(a2=Fc(O1,d1,Qp)).length;!a2[M1-1];--M1);for(g1=1,O1="1.";g1<M1;g1++)O1+=m.charAt(a2[g1])}else O1=O1.charAt(0)+"."+O1.slice(1);O1=O1+(r1<0?"p":"p+")+r1}else if(r1<0){for(;++r1;)O1="0"+O1;O1="0."+O1}else if(++r1>M1)for(r1-=M1;r1--;)O1+="0";else r1<M1&&(O1=O1.slice(0,r1)+"."+O1.slice(r1))}else O1=H2?"0p+0":"0";O1=(Qp==16?"0x":Qp==2?"0b":Qp==8?"0o":"")+O1}else O1=A2(uf);return uf.s<0?"-"+O1:O1}function p1(uf,Qp){if(uf.length>Qp)return uf.length=Qp,!0}function S1(uf){return new this(uf).abs()}function D1(uf){return new this(uf).acos()}function _1(uf){return new this(uf).acosh()}function B1(uf,Qp){return new this(uf).plus(Qp)}function c2(uf){return new this(uf).asin()}function H1(uf){return new this(uf).asinh()}function x1(uf){return new this(uf).atan()}function pf(uf){return new this(uf).atanh()}function o1(uf,Qp){uf=new this(uf),Qp=new this(Qp);var gf,Ym=this.precision,d1=this.rounding,r1=Ym+4;return uf.s&&Qp.s?uf.d||Qp.d?!Qp.d||uf.isZero()?(gf=Qp.s<0?a1(this,Ym,d1):new this(0)).s=uf.s:!uf.d||Qp.isZero()?(gf=a1(this,r1,1).times(.5)).s=uf.s:Qp.s<0?(this.precision=r1,this.rounding=1,gf=this.atan(_h(uf,Qp,r1,1)),Qp=a1(this,r1,1),this.precision=Ym,this.rounding=d1,gf=uf.s<0?gf.minus(Qp):gf.plus(Qp)):gf=this.atan(_h(uf,Qp,r1,1)):(gf=a1(this,r1,1).times(Qp.s>0?.25:.75)).s=uf.s:gf=new this(NaN),gf}function e1(uf){return new this(uf).cbrt()}function w1(uf){return qc(uf=new this(uf),uf.e+1,2)}function C1(uf){if(!uf||typeof uf!="object")throw Error(me+"Object expected");var Qp,gf,Ym,d1=uf.defaults===!0,r1=["precision",1,d,"rounding",0,8,"toExpNeg",-c,0,"toExpPos",0,c,"maxE",0,c,"minE",-c,0,"modulo",0,9];for(Qp=0;Qp<r1.length;Qp+=3)if(gf=r1[Qp],d1&&(this[gf]=P[gf]),(Ym=uf[gf])!==void 0){if(!(Xe(Ym)===Ym&&Ym>=r1[Qp+1]&&Ym<=r1[Qp+2]))throw Error(ve+gf+": "+Ym);this[gf]=Ym}if(gf="crypto",d1&&(this[gf]=P[gf]),(Ym=uf[gf])!==void 0){if(Ym!==!0&&Ym!==!1&&Ym!==0&&Ym!==1)throw Error(ve+gf+": "+Ym);if(Ym){if(typeof crypto>"u"||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(De);this[gf]=!0}else this[gf]=!1}return this}function F1(uf){return new this(uf).cos()}function N1(uf){return new this(uf).cosh()}function v1(uf,Qp){return new this(uf).div(Qp)}function X1(uf){return new this(uf).exp()}function i2(uf){return qc(uf=new this(uf),uf.e+1,3)}function f2(){var uf,Qp,gf=new this(0);for(W=!1,uf=0;uf<arguments.length;)if((Qp=new this(arguments[uf++])).d)gf.d&&(gf=gf.plus(Qp.times(Qp)));else{if(Qp.s)return W=!0,new this(1/0);gf=Qp}return W=!0,gf.sqrt()}function Y1(uf){return uf instanceof s||uf&&uf.name==="[object Decimal]"||!1}function l2(uf){return new this(uf).ln()}function Q1(uf,Qp){return new this(uf).log(Qp)}function G1(uf){return new this(uf).log(2)}function P2(uf){return new this(uf).log(10)}function J1(){return W1(this,arguments,"lt")}function v2(){return W1(this,arguments,"gt")}function z2(uf,Qp){return new this(uf).mod(Qp)}function q2(uf,Qp){return new this(uf).mul(Qp)}function j2(uf,Qp){return new this(uf).pow(Qp)}function n4(uf){var Qp,gf,Ym,d1,r1=0,g1=new this(1),R1=[];if(uf===void 0?uf=this.precision:yh(uf,1,d),Ym=Math.ceil(uf/Ko),this.crypto)if(crypto.getRandomValues)for(Qp=crypto.getRandomValues(new Uint32Array(Ym));r1<Ym;)(d1=Qp[r1])>=429e7?Qp[r1]=crypto.getRandomValues(new Uint32Array(1))[0]:R1[r1++]=d1%1e7;else{if(!crypto.randomBytes)throw Error(De);for(Qp=crypto.randomBytes(Ym*=4);r1<Ym;)(d1=Qp[r1]+(Qp[r1+1]<<8)+(Qp[r1+2]<<16)+((127&Qp[r1+3])<<24))>=214e7?crypto.randomBytes(4).copy(Qp,r1):(R1.push(d1%1e7),r1+=4);r1=Ym/4}else for(;r1<Ym;)R1[r1++]=1e7*Math.random()|0;for(Ym=R1[--r1],uf%=Ko,Ym&&uf&&(d1=qe(10,Ko-uf),R1[r1]=(Ym/d1|0)*d1);R1[r1]===0;r1--)R1.pop();if(r1<0)gf=0,R1=[0];else{for(gf=-1;R1[0]===0;gf-=Ko)R1.shift();for(Ym=1,d1=R1[0];d1>=10;d1/=10)Ym++;Ym<Ko&&(gf-=Ko-Ym)}return g1.e=gf,g1.d=R1,g1}function X2(uf){return qc(uf=new this(uf),uf.e+1,this.rounding)}function b1(uf){return(uf=new this(uf)).d?uf.d[0]?uf.s:0*uf.s:uf.s||NaN}function k1(uf){return new this(uf).sin()}function V1(uf){return new this(uf).sinh()}function n2(uf){return new this(uf).sqrt()}function y2(uf,Qp){return new this(uf).sub(Qp)}function Z1(uf){return new this(uf).tan()}function T2(uf){return new this(uf).tanh()}function L2(uf){return qc(uf=new this(uf),uf.e+1,1)}return(s=function uf(Qp){var gf,Ym,d1;function r1(g1){var R1,M1,L1,O1=this;if(!(O1 instanceof r1))return new r1(g1);if(O1.constructor=r1,g1 instanceof r1)return O1.s=g1.s,void(W?!g1.d||g1.e>r1.maxE?(O1.e=NaN,O1.d=null):g1.e<r1.minE?(O1.e=0,O1.d=[0]):(O1.e=g1.e,O1.d=g1.d.slice()):(O1.e=g1.e,O1.d=g1.d?g1.d.slice():g1.d));if((L1=typeof g1)=="number"){if(g1===0)return O1.s=1/g1<0?-1:1,O1.e=0,void(O1.d=[0]);if(g1<0?(g1=-g1,O1.s=-1):O1.s=1,g1===~~g1&&g1<1e7){for(R1=0,M1=g1;M1>=10;M1/=10)R1++;return void(W?R1>r1.maxE?(O1.e=NaN,O1.d=null):R1<r1.minE?(O1.e=0,O1.d=[0]):(O1.e=R1,O1.d=[g1]):(O1.e=R1,O1.d=[g1]))}return 0*g1!=0?(g1||(O1.s=NaN),O1.e=NaN,void(O1.d=null)):b2(O1,g1.toString())}if(L1!=="string")throw Error(ve+g1);return(M1=g1.charCodeAt(0))===45?(g1=g1.slice(1),O1.s=-1):(M1===43&&(g1=g1.slice(1)),O1.s=1),Do.test(g1)?b2(O1,g1):_2(O1,g1)}if(r1.prototype=wt,r1.ROUND_UP=0,r1.ROUND_DOWN=1,r1.ROUND_CEIL=2,r1.ROUND_FLOOR=3,r1.ROUND_HALF_UP=4,r1.ROUND_HALF_DOWN=5,r1.ROUND_HALF_EVEN=6,r1.ROUND_HALF_CEIL=7,r1.ROUND_HALF_FLOOR=8,r1.EUCLID=9,r1.config=r1.set=C1,r1.clone=uf,r1.isDecimal=Y1,r1.abs=S1,r1.acos=D1,r1.acosh=_1,r1.add=B1,r1.asin=c2,r1.asinh=H1,r1.atan=x1,r1.atanh=pf,r1.atan2=o1,r1.cbrt=e1,r1.ceil=w1,r1.cos=F1,r1.cosh=N1,r1.div=v1,r1.exp=X1,r1.floor=i2,r1.hypot=f2,r1.ln=l2,r1.log=Q1,r1.log10=P2,r1.log2=G1,r1.max=J1,r1.min=v2,r1.mod=z2,r1.mul=q2,r1.pow=j2,r1.random=n4,r1.round=X2,r1.sign=b1,r1.sin=k1,r1.sinh=V1,r1.sqrt=n2,r1.sub=y2,r1.tan=Z1,r1.tanh=T2,r1.trunc=L2,Qp===void 0&&(Qp={}),Qp&&Qp.defaults!==!0)for(d1=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],gf=0;gf<d1.length;)Qp.hasOwnProperty(Ym=d1[gf++])||(Qp[Ym]=this[Ym]);return r1.config(Qp),r1}(P)).default=s.Decimal=s,g=new s(g),A=new s(A),t.exports?(typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(wt[Symbol.for("nodejs.util.inspect.custom")]=wt.toString,wt[Symbol.toStringTag]="Decimal"),t.exports=s):(a||(a=typeof self<"u"&&self&&self.self==self?self:window),l=a.Decimal,s.noConflict=function(){return a.Decimal=l,s},a.Decimal=s),s}(nerdamer_core)});t.exports=e}(nerdamer_core$1)),nerdamer_core$1.exports}var nerdamer_coreExports=requireNerdamer_core();const nerdamer=getDefaultExportFromCjs(nerdamer_coreExports);var Algebra={exports:{}},Calculus={exports:{}},hasRequiredCalculus;function requireCalculus(){return hasRequiredCalculus||(hasRequiredCalculus=1,function(t){if(typeof e>"u"){var e=requireNerdamer_core();requireAlgebra()}(function(){var a=e.getCore(),s=a.PARSER,o=a.Frac,l=a.Settings,u=a.Utils.isSymbol,He=a.groups.FN,c=a.Symbol,d=a.Utils.text,m=a.Utils.inBrackets,g=a.Utils.isInt,A=a.Utils.format,P=a.Utils.even,W=a.Utils.evaluate,me=a.groups.N,ve=a.groups.S,He=a.groups.FN,De=a.groups.PL,Xe=a.groups.CP,qe=a.groups.CB,Rs=a.groups.EX,Vc=a.groups.P,So=l.LOG,Do="exp",eh="abs",Ko="sqrt",Ge="sin",An="cos",wt="tan",Bs="sec",yh="csc",df="cot",Fc="asin",_h="acos",qc="atan",Mh="asec",cf="acsc",mf="acot",a1="sinh",s1="cosh",E1="tanh",T1="csch",z1="sech",W1="coth",m2="asech",C2="acsch",A2="acoth";function b2(S1){this.message=S1||""}b2.prototype=new Error,c.prototype.hasIntegral=function(){return this.containsFunction("integrate")},c.prototype.fnTransform=function(){if(this.group!==He)return this;var S1,D1=this.args[0],_1=new c(this.multiplier),B1=this.clone().toUnitMultiplier();if(this.isLinear())switch(this.fname){case a1:S1=s.parse(A("(e^({0})-e^(-({0})))/2",D1));break;case s1:S1=s.parse(A("(e^({0})+e^(-({0})))/2",D1));break;case E1:S1=s.parse(A("(e^({0})-e^(-({0})))/(e^({0})+e^(-({0})))",D1));break;case wt:S1=s.parse(A("sin({0})/cos({0})",D1));break;case yh:S1=s.parse(A("1/sin({0})",D1));break;case Bs:S1=s.parse(A("1/cos({0})",D1));break;default:S1=B1}else if(this.power.equals(2))switch(this.fname){case Ge:S1=s.parse(A("1/2-cos(2*({0}))/2",D1));break;case An:S1=s.parse(A("1/2+cos(2*({0}))/2",D1));break;case wt:S1=s.parse(A("sin({0})^2/cos({0})^2",D1));break;case s1:S1=s.parse(A("1/2+cosh(2*({0}))/2",D1));break;case a1:S1=s.parse(A("-1/2+cosh(2*({0}))/2",D1));break;case E1:S1=s.parse(A("(1+cosh(2*({0})))/(-1+cosh(2*({0})))",D1));break;case Bs:S1=s.parse(A("(1-cos(2*({0})))/(1+cos(2*({0})))+1",D1));break;default:S1=B1}else if(this.fname===Bs)S1=s.parse(A("1/cos({0})^({1})",this.args[0],this.power));else if(this.fname===yh)S1=s.parse(A("1/sin({0})^({1})",this.args[0],this.power));else if(this.fname===wt)this.power.lessThan(0)?S1=s.parse(A("cos({0})^(-({1}))/sin({0})^({1})",this.args[0],this.power.negate())):S1=s.parse(A("sin({0})^({1})/cos({0})^({1})",this.args[0],this.power));else if(this.fname===Ge&&this.power.lessThan(0))S1=s.parse(A("csc({0})^(-({1}))",this.args[0],this.power.negate()));else if(this.fname===An&&this.power.lessThan(0))S1=s.parse(A("sec({0})^(-({1}))",this.args[0],this.power.negate()));else if(this.fname===Ge&&this.power.equals(3))S1=s.parse(A("(3*sin({0})-sin(3*({0})))/4",this.args[0]));else if(this.fname===An&&this.power.equals(3))S1=s.parse(A("(cos(3*({0}))+3*cos({0}))/4",this.args[0]));else if((this.fname===An||this.fname===Ge)&&P(this.power)){var c2=this.power/2,H1=s.pow(this.clone().toLinear(),s.parse(2)).fnTransform(),x1=s.expand(s.pow(H1,s.parse(c2)));S1=new c(0),x1.each(function(pf){var o1=pf.fnTransform();S1=s.add(S1,o1)},!0)}else S1=B1;return s.multiply(S1,_1)},c.prototype.hasTrig=function(){if(this.isConstant(!0)||this.group===ve)return!1;if(this.fname&&(a.Utils.in_trig(this.fname)||a.Utils.in_inverse_trig(this.fname)))return!0;if(this.symbols){for(var S1 in this.symbols)if(this.symbols[S1].hasTrig())return!0}return!1},a.Expression.prototype.hasIntegral=function(){return this.symbol.hasIntegral()},a.Utils.toCommonDenominator=function(S1){if(S1.isComposite()&&S1.isLinear()){var D1=new c(S1.multiplier),_1=new c(1),B1=new c(0);S1.each(function(H1){_1=s.multiply(_1,H1.getDenom())},!0),S1.each(function(H1){var x1=H1.getNum(),pf=H1.getDenom(),o1=s.multiply(x1,s.divide(_1.clone(),pf));B1=s.add(B1,o1)});var c2=s.multiply(D1,a.Algebra.divide(s.expand(B1),s.expand(_1)));return c2}return S1},a.Utils.in_inverse_trig=function(S1){var D1=[Fc,_h,qc,cf,Mh,mf];return D1.indexOf(S1)!==-1},a.Utils.in_trig=function(S1){var D1=[An,Ge,wt,Bs,yh,df];return D1.indexOf(S1)!==-1},a.Utils.in_htrig=function(S1){var D1=[a1,s1,E1,C2,m2,A2];return D1.indexOf(S1)!==-1},a.Matrix.jacobian=function(S1,D1){var _1=new a.Matrix;return D1||(D1=a.Utils.arrayGetVariables(S1)),D1.forEach(function(B1,c2){S1.forEach(function(H1,x1){var pf=a.Calculus.diff(H1.clone(),B1);_1.set(x1,c2,pf)})}),_1},a.Matrix.prototype.max=function(){var S1=new c(0);return this.each(function(D1){var _1=D1.abs();_1.gt(S1)&&(S1=_1)}),S1},a.Matrix.cMatrix=function(S1,D1){var _1=new a.Matrix;return D1.forEach(function(B1,c2){_1.set(c2,0,s.parse(S1))}),_1};var _2=a.Utils.all_functions=function(S1){for(var D1=0,_1=S1.length;D1<_1;D1++)if(S1[D1].group!==He)return!1;return!0},q1=a.Utils.cosAsinBtranform=function(S1,D1){var _1,B1;return _1=S1.args[0],B1=D1.args[0],s.parse(A("(sin(({0})+({1}))-sin(({0})-({1})))/2",_1,B1))},U1=a.Utils.cosAsinAtranform=function(S1,D1){if(Number(D1.power)!==1)return s.multiply(S1,D1);var _1;return _1=S1.args[0],s.parse(A("(sin(2*({0})))/2",_1))},M2=a.Utils.cosAsinBtranform=function(S1,D1){var _1,B1;return _1=S1.args[0],B1=D1.args[0],s.parse(A("(cos(({0})+({1}))-cos(({0})-({1})))/2",_1,B1))},x2=a.Utils.trigTransform=function(S1){for(var D1={},_1,B1,c2=new c(1),H1=0,x1=S1.length;H1<x1;H1++)if(_1=S1[H1],_1.group===He){var pf=_1.fname;pf===An&&D1[Ge]?(D1[Ge].args[0].toString()!==_1.args[0].toString()?B1=q1(_1,D1[Ge]):B1=U1(_1,D1[Ge]),delete D1[Ge],c2=s.multiply(c2,B1)):pf===Ge&&D1[An]?(D1[An].args[0].toString()!==_1.args[0].toString()?B1=q1(_1,D1[An]):B1=U1(_1,D1[An]),delete D1[An],c2=s.multiply(c2,B1)):pf===Ge&&D1[Ge]?(D1[Ge].args[0].toString()!==_1.args[0].toString()?(B1=M2(_1,D1[Ge]),delete D1[Ge]):(B1=s.multiply(_1,D1[Ge]),delete D1[Ge]),c2=B1):D1[pf]=_1}else c2=s.multiply(c2,_1);for(var o1 in D1)c2=s.multiply(c2,D1[o1]);return c2};a.Settings.integration_depth=10,a.Settings.max_lim_depth=10;var p1=a.Calculus={version:"1.4.6",sum:function(S1,D1,_1,B1){if(D1.group!==a.groups.S)throw new a.exceptions.NerdamerTypeError("Index must be symbol. "+d(D1)+" provided");D1=D1.value;var c2;if(a.Utils.isNumericSymbol(_1)&&a.Utils.isNumericSymbol(B1)){var H1=B1-_1<200?"":"PARSE2NUMBER";_1=Number(_1),B1=Number(B1),c2=a.Utils.block(H1,function(){for(var x1=S1.text(),pf={"~":!0},o1=new a.Symbol(0),e1=_1;e1<=B1;e1++){pf[D1]=new c(e1);var w1=s.parse(x1,pf);o1=s.add(o1,w1)}return o1})}else c2=s.symfunction("sum",arguments);return c2},product:function(S1,D1,_1,B1){if(D1.group!==a.groups.S)throw new a.exceptions.NerdamerTypeError("Index must be symbol. "+d(D1)+" provided");D1=D1.value;var c2;if(a.Utils.isNumericSymbol(_1)&&a.Utils.isNumericSymbol(B1)){var H1=B1-_1<200?"":"PARSE2NUMBER";c2=a.Utils.block(H1,function(){_1=Number(_1),B1=Number(B1.multiplier);for(var x1=S1.text(),pf={},o1=new a.Symbol(1),e1=_1;e1<=B1;e1++)pf[D1]=new c(e1),o1=s.multiply(o1,s.parse(x1,pf));return o1})}else c2=s.symfunction("product",arguments);return c2},diff:function(S1,D1,_1){if(a.Utils.isVector(S1)){var B1=new a.Vector([]);return S1.each(function(v1){B1.elements.push(p1.diff(v1,D1,_1))}),B1}else if(a.Utils.isMatrix(S1)){var c2=new a.Matrix;return S1.each(function(v1,X1,i2){c2.set(X1,i2,p1.diff(v1,D1,_1))}),c2}var H1=u(D1)?D1.text():D1;if(_1=u(_1)?_1.multiplier:_1||1,H1===void 0&&(H1=a.Utils.variables(S1)[0]),S1.group===He&&S1.fname===Ko){var x1=S1.args[0],pf=S1.power.clone();(x1.group!==me||x1.group!==Vc)&&(x1.power=u(x1.power)?s.multiply(x1.power,s.multiply(new c(1/2)),pf):x1.power.multiply(new o(.5)).multiply(pf),x1.multiplier=x1.multiplier.multiply(S1.multiplier)),S1=x1}if(S1.group===He&&!u(S1.power)){var o1=C1(s.parse(S1)),e1=p1.diff(S1.args[0].clone(),H1);S1=s.multiply(o1,e1)}else S1=C1(S1);return _1>1&&(_1--,S1=p1.diff(S1,D1,_1)),S1;function w1(v1){return(v1.value===H1||v1.contains(H1,!0))&&(v1.multiplier=v1.multiplier.multiply(v1.power),v1.power=v1.power.subtract(new o(1)),v1.power.equals(0)&&(v1=c(v1.multiplier))),v1}function C1(v1){var X1=v1.group,i2,f2;if(X1===me||X1===ve&&v1.value!==H1||X1===Vc)v1=c(0);else if(X1===ve)v1=w1(v1);else if(X1===qe){var Y1=v1.multiplier.clone();v1.toUnitMultiplier();var l2=s.multiply(N1(v1),w1(v1));return l2.multiplier=l2.multiplier.multiply(Y1),l2}else if(X1===He&&v1.power.equals(1))switch(v1.fname){case So:f2=v1.clone(),v1=v1.args[0].clone(),v1.power=v1.power.negate(),v1.multiplier=f2.multiplier.divide(v1.multiplier);break;case An:v1.fname=Ge,v1.multiplier.negate();break;case Ge:v1.fname=An;break;case wt:v1.fname=Bs,v1.power=new o(2);break;case Bs:v1=F1(v1,wt);break;case yh:v1=F1(v1,"-cot");break;case df:v1.fname=yh,v1.multiplier.negate(),v1.power=new o(2);break;case Fc:v1=s.parse("(sqrt(1-("+d(v1.args[0])+")^2))^(-1)");break;case _h:v1=s.parse("-(sqrt(1-("+d(v1.args[0])+")^2))^(-1)");break;case qc:v1=s.parse("(1+("+d(v1.args[0])+")^2)^(-1)");break;case eh:Y1=v1.multiplier.clone(),v1.toUnitMultiplier(),i2=v1.args[0].clone(),i2.toUnitMultiplier(),v1=s.parse(m(d(v1.args[0]))+"/abs"+m(d(i2))),v1.multiplier=Y1;break;case"parens":v1=c(1);break;case"cosh":v1.fname="sinh";break;case"sinh":v1.fname="cosh";break;case E1:v1.fname=z1,v1.power=new o(2);break;case z1:v1=F1(v1,"-tanh");break;case T1:var Q1=String(v1.args[0]);return s.parse("-coth("+Q1+")*csch("+Q1+")");case W1:var Q1=String(v1.args[0]);return s.parse("-csch("+Q1+")^2");case"asinh":v1=s.parse("(sqrt(1+("+d(v1.args[0])+")^2))^(-1)");break;case"acosh":v1=s.parse("(sqrt(-1+("+d(v1.args[0])+")^2))^(-1)");break;case"atanh":v1=s.parse("(1-("+d(v1.args[0])+")^2)^(-1)");break;case m2:var Q1=String(v1.args[0]);v1=s.parse("-1/(sqrt(1/("+Q1+")^2-1)*("+Q1+")^2)");break;case A2:v1=s.parse("-1/(("+v1.args[0]+")^2-1)");break;case C2:var Q1=String(v1.args[0]);v1=s.parse("-1/(sqrt(1/("+Q1+")^2+1)*("+Q1+")^2)");break;case Mh:var Q1=String(v1.args[0]);v1=s.parse("1/(sqrt(1-1/("+Q1+")^2)*("+Q1+")^2)");break;case cf:var Q1=String(v1.args[0]);v1=s.parse("-1/(sqrt(1-1/("+Q1+")^2)*("+Q1+")^2)");break;case mf:v1=s.parse("-1/(("+v1.args[0]+")^2+1)");break;case"S":var Q1=String(v1.args[0]);v1=s.parse("sin((pi*("+Q1+")^2)/2)");break;case"C":var Q1=String(v1.args[0]);v1=s.parse("cos((pi*("+Q1+")^2)/2)");break;case"Si":var Q1=v1.args[0];v1=s.parse("sin("+Q1+")/("+Q1+")");break;case"Shi":var Q1=v1.args[0];v1=s.parse("sinh("+Q1+")/("+Q1+")");break;case"Ci":var Q1=v1.args[0];v1=s.parse("cos("+Q1+")/("+Q1+")");break;case"Chi":var Q1=v1.args[0];v1=s.parse("cosh("+Q1+")/("+Q1+")");break;case"Ei":var Q1=v1.args[0];v1=s.parse("e^("+Q1+")/("+Q1+")");break;case"Li":var Q1=v1.args[0];v1=s.parse("1/"+l.LOG+"("+Q1+")");break;case"erf":v1=s.parse("(2*e^(-("+v1.args[0]+")^2))/sqrt(pi)");break;case"atan2":var G1=String(v1.args[0]),P2=String(v1.args[1]);v1=s.parse("("+P2+")/(("+P2+")^2+("+G1+")^2)");break;case"sign":v1=new c(0);break;case"sinc":v1=s.parse(A("(({0})*cos({0})-sin({0}))*({0})^(-2)",v1.args[0]));break;case l.LOG10:v1=s.parse("1/(("+v1.args[0]+")*"+l.LOG+"(10))");break;default:v1=s.symfunction("diff",[v1,D1])}else if(X1===Rs||X1===He&&u(v1.power)){var J1;X1===Rs?J1=v1.value:X1===He&&v1.contains(H1)?J1=v1.fname+m(d(v1.args[0])):J1=v1.value+m(d(v1.args[0])),s.multiply(s.parse(So+m(J1)),v1.power.clone()),i2=p1.diff(s.multiply(s.parse(So+m(J1)),v1.power.clone()),H1),v1=s.multiply(v1,i2)}else if(X1===He&&!v1.power.equals(1))i2=v1.clone(),i2.toLinear(),i2.toUnitMultiplier(),v1=s.multiply(w1(v1.clone()),C1(i2));else if(X1===Xe||X1===De){var v2=v1.clone(),z2=new c(0);for(var q2 in v1.symbols)z2=s.add(z2,p1.diff(v1.symbols[q2].clone(),H1));v1=s.multiply(w1(v2),z2)}return v1.updateHash(),v1}function F1(v1,X1,i2){return s.multiply(v1,s.parse(X1+m(d(v1.args[0]))))}function N1(v1){for(var X1=v1.collectSymbols(),i2=new c(0),f2=X1.length,Y1=0;Y1<f2;Y1++){for(var l2=p1.diff(X1[Y1].clone(),H1),Q1=0;Q1<f2;Q1++)Y1!==Q1&&(l2=s.multiply(l2,X1[Q1].clone()));i2=s.add(i2,l2)}return i2}},integration:{u_substitution:function(S1,D1){function _1(P2,J1,v2){var z2=p1.diff(J1,D1),q2=v2?v2(P2,J1):s.divide(P2.clone(),z2);return q2.contains(D1,!0)?null:q2}function B1(P2,J1){var v2=p1.integrate(s.symfunction(P2,[new c(o1)]),o1,0);return v2=v2.sub(new c(o1),J1),v2.updateHash(),v2}var c2=S1[0].clone(),H1=S1[1].clone(),x1=c2.group,pf=H1.group,o1="__u__",e1;if(x1===He&&pf!==He){var w1=c2.args[0];if(e1=_1(H1,w1.clone()),e1)return s.multiply(e1,B1(c2.fname,w1));if(e1=_1(H1,c2),e1)return p1.integration.poly_integrate(c2)}else if(pf===He&&x1!==He){var w1=H1.args[0];if(e1=_1(c2,w1.clone()),e1)return s.multiply(e1,B1(H1.fname,w1))}else if(x1===He&&pf===He){if(e1=_1(c2.clone(),H1.clone()),e1||(e1=_1(H1.clone(),c2.clone()),e1))return s.multiply(p1.integration.poly_integrate(H1),e1)}else if(x1===Rs&&pf!==Rs){var C1=c2.power;if(e1=_1(H1,C1.clone()),!e1){var F1=p1.integration.decompose_arg(C1.clone(),D1),N1=p1.diff(F1[2].clone(),D1),v1=p1.integration.decompose_arg(N1.clone(),D1);if(s.multiply(F1[1],v1[1]).power.equals(H1.power)){var X1=s.divide(F1[0].clone(),v1[0].clone()),i2=s.multiply(X1.clone(),s.pow(new c(c2.value),s.multiply(F1[0],new c(o1))));return i2=s.multiply(i2,new c(o1)),p1.integration.by_parts(i2,o1,0,{}).sub(o1,F1[1].clone())}}var f2=p1.integrate(c2.sub(C1.clone(),new c(o1)),o1,0),Y1=s.multiply(f2.sub(new c(o1),C1),e1);return Y1}else if(pf===Rs&&x1!==Rs){var C1=H1.power;e1=_1(c2,C1.clone());var f2=p1.integrate(H1.sub(C1,new c(o1)),o1,0);return s.multiply(f2.sub(new c(o1),C1),e1)}else if(c2.isComposite()||H1.isComposite()){var l2=function(P2,J1){var v2=p1.diff(J1,D1),z2=a.Algebra.Factor.factor(P2),q2=a.Algebra.Factor.factor(v2),j2=s.divide(z2,q2);return j2},Q1=c2.isComposite()?c2.clone().toLinear():c2.clone(),G1=H1.isComposite()?H1.clone().toLinear():H1.clone();if(e1=_1(Q1.clone(),G1.clone(),l2),e1)return s.multiply(p1.integration.poly_integrate(H1),e1);if(e1=_1(G1.clone(),Q1.clone(),l2),e1)return s.multiply(p1.integration.poly_integrate(c2),e1)}},poly_integrate:function(S1){var D1=S1.power.toString(),_1=S1.multiplier.toDecimal(),B1=S1.toUnitMultiplier().toLinear();return Number(D1)===-1?s.multiply(new c(_1),s.symfunction(So,[B1])):s.parse(A("({0})*({1})^(({2})+1)/(({2})+1)",_1,B1,D1))},stop:function(S1){throw S1=S1||"Unable to compute integral!",a.Utils.warn(S1),new b2(S1)},partial_fraction:function(S1,D1,_1,B1){u(D1)||(D1=s.parse(D1));var c2,H1;return c2=new c(0),H1=a.Algebra.PartFrac.partfrac(S1,D1),H1.group===qe&&H1.isLinear()?(H1.each(function(x1){x1.isLinear()||p1.integration.stop()}),H1.each(function(x1){c2=s.add(c2,p1.integrate(x1,D1,_1,B1))})):c2=s.add(c2,p1.integrate(H1,D1,_1,B1)),c2},get_udv:function(S1){var D1=[[],[],[],[],[]],_1=function(w1){var C1=w1.group;if(C1===He){var F1=w1.fname;a.Utils.in_trig(F1)||a.Utils.in_htrig(F1)?D1[3].push(w1):a.Utils.in_inverse_trig(F1)?D1[1].push(w1):F1===So?D1[0].push(w1):p1.integration.stop()}else C1===ve||w1.isComposite()&&w1.isLinear()||C1===qe&&w1.isLinear()?D1[2].push(w1):C1===Rs||w1.isComposite()&&!w1.isLinear()?D1[4].push(w1):p1.integration.stop()};S1.group===qe?S1.each(function(w1){_1(c.unwrapSQRT(w1,!0))}):_1(S1);for(var B1,c2=new c(1),H1=0;H1<5;H1++){var x1=D1[H1],pf,o1=x1.length;if(o1>0){if(o1>1){pf=new c(1);for(var e1=0;e1<o1;e1++)pf=s.multiply(pf,x1[e1].clone())}else pf=x1[0].clone();B1?c2=s.multiply(c2,pf):(B1=pf,B1.multiplier=B1.multiplier.multiply(S1.multiplier))}}return[B1,c2]},trig_sub:function(S1,D1,_1,B1,c2,H1){c2=c2||p1.integration.decompose_arg(S1.clone().toLinear(),D1),c2[3],c2[2];var x1=c2[0],pf=c2[1];if(pf.power.equals(2)&&x1.greaterThan(0)){var o1=a.Utils.getU(S1),e1=s.parse(wt+m(o1)),w1=s.parse(Bs+m(o1)+"^2"),C1=s.multiply(S1.sub(pf,e1),w1),F1=p1.integrate(C1,o1,_1,B1).sub(e1,pf);return a.Utils.clearU(e1),F1}},by_parts:function(S1,D1,_1,B1){B1.previous=B1.previous||[];var c2,H1,x1,pf,o1,e1,w1,C1,F1,N1,v1,X1;if(c2=p1.integration.get_udv(S1),H1=c2[0],x1=c2[1],pf=c.unwrapSQRT(s.expand(p1.diff(H1.clone(),D1)),!0),v1=pf.clone().stripVar(D1),pf=s.divide(pf,v1.clone()),o1=p1.integrate(x1.clone(),D1,_1||0),e1=s.multiply(o1.clone(),pf),X1=e1.toString(),B1.previous.indexOf(X1)!==-1&&a.Utils.in_trig(H1.fname)&&x1.isE())return B1.is_cyclic=!0,new c(1);if(B1.previous.push(X1),w1=s.multiply(H1,o1),N1=e1.multiplier.clone(),e1.toUnitMultiplier(),F1=s.multiply(p1.integrate(e1.clone(),D1,_1,B1),v1),F1.multiplier=F1.multiplier.multiply(N1),C1=s.subtract(w1,F1),B1.is_cyclic&&(B1.previous.pop(),B1.previous.length===0)){C1=s.expand(C1);var i2=new c(0);C1.each(function(f2){f2.contains(D1)||(i2=s.add(i2,f2.clone()))}),C1=s.divide(s.subtract(C1,i2.clone()),s.subtract(new c(1),i2))}return C1},decompose_arg:a.Utils.decompose_fn},integrate:function(S1,D1,_1,B1){if(!D1){var c2=a.Utils.variables(S1);c2.length===1&&(D1=c2[0]),D1=D1||"x"}if(a.Utils.isVector(S1)){var H1=new a.Vector([]);return S1.each(function(x1){H1.elements.push(p1.integrate(x1,D1))}),H1}return isNaN(D1)||s.error("variable expected but received "+D1),S1.isConstant(!0)?s.multiply(S1.clone(),s.parse(D1)):(B1=B1||{},a.Utils.block("PARSE2NUMBER",function(){_1=_1||0;var x1=u(D1)?D1.toString():D1,pf=c.unwrapSQRT(S1.clone(),!0),o1=pf.group,e1;try{if(++_1>a.Settings.integration_depth&&p1.integration.stop("Maximum depth reached. Exiting!"),!pf.contains(x1,!0))e1=s.multiply(pf.clone(),s.parse(x1));else if(o1===ve)e1=p1.integration.poly_integrate(pf,x1,_1);else if(o1===Rs)if(pf.previousGroup===He&&!(pf.fname==="sqrt"||pf.fname===l.PARENTHESIS)&&p1.integration.stop(),pf.contains(x1)&&pf.previousGroup!==He)if(pf.power.contains(x1))p1.integration.stop();else{var w1=p1.diff(pf.clone().toLinear(),x1);w1.contains(x1)&&p1.integration.stop(),e1=p1.integration.poly_integrate(pf,x1,_1)}else{var C1=p1.diff(pf.power.clone(),x1);if(C1.contains(x1)){var F1=C1.stripVar(x1),N1=s.divide(C1.clone(),F1.clone());if(N1.group===ve&&N1.isLinear())return F1.multiplier=F1.multiplier.divide(new o(2)),s.parse(A("({2})*(sqrt(pi)*erf(sqrt(-{0})*{1}))/(2*sqrt(-{0}))",F1,x1,pf.multiplier));p1.integration.stop()}if(pf.isE())C1.isLinear()?e1=pf:C1.isE()&&C1.power.group===ve&&C1.power.power.equals(1)?e1=s.multiply(s.symfunction("Ei",[pf.power.clone()]),pf.power):p1.integration.stop();else{var v1=s.symfunction(So,[s.parse(pf.value)]);e1=s.divide(pf,v1)}e1=s.divide(e1,C1)}else if(pf.isComposite()&&pf.isLinear()){var X1=s.parse(pf.multiplier);pf.toUnitMultiplier(),e1=new c(0),pf.each(function(d3){e1=s.add(e1,p1.integrate(d3,x1,_1))}),e1=s.multiply(X1,e1)}else if(o1===Xe)if(pf.power.greaterThan(1)&&(pf=s.expand(pf)),pf.power.equals(1))e1=new c(0),pf.each(function(d3){e1=s.add(e1,p1.integrate(d3,x1,_1))},!0);else{var i2=Number(pf.power),X1=pf.multiplier.clone();pf.toUnitMultiplier();var f2=pf.clone().toLinear(),Y1=p1.integration.decompose_arg(f2,x1),l2=Y1[3],Q1=Y1[2],C1=Y1[0],N1=Y1[1];if(i2===-1&&N1.group!==De&&N1.power.equals(2)){var G1=g(l2)?l2>0:!0;if(N1.group===ve&&N1.power.equals(2)&&G1){var P2=function(w6){var S3=new c(1);return w6.each(function(r6){S3=s.multiply(S3,r6.fname==="abs"?r6.args[0]:r6)}),S3},J1=C1.clone(),v2=l2.clone();J1=s.pow(J1,new c(1/2)),v2=s.pow(v2,new c(1/2));var v1=s.multiply(P2(v2),P2(J1)),z2=s.symfunction(qc,[s.divide(s.multiply(C1,N1.toLinear()),v1.clone())]);e1=s.divide(z2,v1)}else if(N1.group===ve&&N1.isLinear())e1=s.divide(p1.integration.poly_integrate(pf),C1);else if(N1.power.equals(4)){var J1,v2,q2,j2,n4,X2,b1,k1,V1,n2,y2,Z1,T2=m;J1=s.parse(Ko+T2(C1)+"*"+x1+"^2"),v2=s.parse(Ko+T2(2)+"*"+T2(C1)+"^"+T2("1/4")+"*"+T2(l2)+"^"+T2("1/4")+"*"+x1),q2=s.parse(Ko+T2(l2)),b1=s.add(s.add(J1.clone(),v2.clone()),q2.clone()),k1=s.add(s.subtract(J1,v2),q2),j2=s.parse(Ko+T2(2)+"*"+T2(l2)+"^"+T2("3/4")),n4=s.parse(Ko+T2(l2)+"*"+T2(l2)+"^"+T2("1/4")+"*"+x1),X2=s.parse("2*"+T2(l2)+"*"+Ko+T2(2)+"*"+T2(l2)+"^"+T2("1/4")),y2=s.divide(s.subtract(j2.clone(),n4.clone()),s.multiply(X2.clone(),k1)),Z1=s.divide(s.add(j2,n4),s.multiply(X2,b1.clone())),e1=s.add(p1.integrate(y2,x1,_1,B1),p1.integrate(Z1,x1,_1,B1))}else e1=p1.integration.partial_fraction(pf,x1,_1)}else if(i2===-1/2)if(N1.group===ve&&N1.power.equals(2))if(Q1.multiplier.lessThan(0)&&!l2.multiplier.lessThan(0))if(C1.negate(),l2.isConstant()&&C1.isConstant()){var v1=s.symfunction(Ko,[C1.clone()]),L2=s.symfunction(Ko,[s.multiply(C1.clone(),l2)]);e1=s.divide(s.symfunction(Fc,[s.divide(Q1.toLinear(),L2)]),v1)}else{var uf=s.symfunction(Ko,[C1]),Qp=s.multiply(uf.clone(),N1.clone().toLinear());e1=s.divide(s.symfunction(qc,[s.divide(Qp,s.symfunction(Ko,[f2.clone()]))]),uf)}else p1.integration.stop();else p1.integration.stop();else if(i2===1/2&&N1.power.equals(2)&&C1.greaterThan(0))p1.integration.stop();else if(N1.isLinear()&&N1.group!==De)e1=s.divide(p1.integration.poly_integrate(pf),C1);else if(N1.power.equals(2)&&C1.greaterThan(0)){var gf,Ym,d1,r1,L1,O1,g1,R1,M1;gf=s.parse(Ko+m(C1)),Ym=s.parse(Ko+m(l2)),d1=s.multiply(gf.clone(),Ym.clone()).invert(),r1=s.pow(l2,new c(pf.power)),M1=a.Utils.getU(pf),g1=s.multiply(d1,N1.clone().toLinear()),R1=s.parse(qc+m(g1));var L1=(Math.abs(pf.power)-1)*2,O1=p1.integrate(s.parse(An+m(M1)+"^"+L1));return a.Utils.clearU(M1),s.multiply(O1.sub(M1,R1),r1)}else if(pf.group!==qe&&!pf.power.lessThan(0))e1=p1.integration.by_parts(pf,x1,_1,B1);else{var z2=pf.clone().toLinear(),a2=a.Algebra.Factor.factor(z2),S2=a2.toString()!==z2.toString();if(a.Algebra.degree(z2,s.parse(x1)).equals(2)&&!S2)try{var b1,U2,g1,H2;H2=a.Algebra.sqComplete(z2,x1),g1=a.Utils.getU(z2),b1=H2.f.sub(H2.a,g1),U2=s.pow(b1,s.parse(pf.power)),e1=p1.integrate(U2,g1).sub(g1,H2.a)}catch{p1.integration.stop()}else e1=p1.integration.partial_fraction(pf,x1,_1,B1)}e1.multiplier=e1.multiplier.multiply(X1)}else if(o1===He){var $2=pf.args[0],X1=pf.multiplier.clone();pf.toUnitMultiplier();var Y1=p1.integration.decompose_arg($2,x1),C1=Y1[0],N1=Y1[1],r4=pf.fname;if(r4===So||r4===Fc||r4===_h||r4===qc&&N1.isLinear()){var i2=pf.power.toString();if(g(i2)&&(_1=_1-i2),!$2.isComposite())e1=s.multiply(s.parse(X1),p1.integration.by_parts(pf,x1,_1,B1));else{var g1=a.Utils.getU(pf),z2=s.pow(s.parse(So+m(g1)),new c(i2)),P4=p1.diff($2,x1),A4=s.multiply(z2,P4),O1=p1.integrate(A4,g1,_1,B1);e1=s.multiply(s.parse(X1),O1.sub(g1,$2))}}else if(r4===wt&&pf.power.lessThan(0)){var Y2=pf.clone();return Y2.power.negate(),Y2.fname=df,s.multiply(s.parse(X1),p1.integrate(Y2,x1,_1))}else{if(!C1.contains(x1,!0)&&pf.isLinear())if(r4===eh){var N1=s.divide($2.clone(),C1.clone());if(N1.group===ve&&!N1.power.lessThan(0))if(a.Utils.even(N1.power))e1=p1.integrate($2,x1,_1);else{var B2=p1.integrate(N1,x1,_1);B2.power=B2.power.subtract(new o(1)),e1=s.multiply(s.multiply(s.symfunction(eh,[N1.toLinear()]),B2),C1)}else p1.integration.stop()}else{var d4=pf.args[0].group,Z2=p1.integration.decompose_arg($2,x1);switch((!(d4===Xe||d4===ve||d4===qe)||!Z2[1].power.equals(1)||$2.hasFunc())&&p1.integration.stop(),r4){case An:e1=s.symfunction(Ge,[$2]);break;case Ge:e1=s.symfunction(An,[$2]),e1.negate();break;case wt:e1=s.parse(A(l.LOG+"(sec({0}))",$2));break;case Bs:e1=s.parse(A(l.LOG+"(tan({0})+sec({0}))",$2));break;case yh:e1=s.parse(A("-"+l.LOG+"(csc({0})+cot({0}))",$2));break;case df:e1=s.parse(A(l.LOG+"(sin({0}))",$2));break;case a1:e1=s.symfunction(s1,[$2]);break;case s1:e1=s.symfunction(a1,[$2]);break;case E1:e1=s.parse(A(l.LOG+"(cosh({0}))",$2));break;case Mh:e1=p1.integration.by_parts(pf,x1,_1,B1);break;case cf:e1=p1.integration.by_parts(pf,x1,_1,B1);break;case mf:e1=p1.integration.by_parts(pf,x1,_1,B1);break;case m2:e1=p1.integration.by_parts(pf,x1,_1,B1);break;case C2:e1=p1.integration.by_parts(pf,x1,_1,B1);break;case A2:e1=p1.integration.by_parts(pf,x1,_1,B1);break;case z1:e1=s.parse(A("atan(sinh({0}))",$2));break;case T1:e1=s.parse(A(l.LOG+"(tanh(({0})/2))",$2));break;case W1:e1=s.parse(A(l.LOG+"(sinh({0}))",$2));break;case Do:e1=p1.integrate(s.parse(A("e^({0})",$2)),x1,_1);break;case"S":var $2=pf.args[0].clone(),f4=p1.integration.decompose_arg($2,x1),I2=f4[1],h1=f4[0],l4=f4[3];e1=s.parse(A("(cos((1/2)*pi*(({1})+({0})*({2}))^2)+pi*(({1})+({0})*({2}))*S(({1})+({0})*({2})))/(({0})*pi)",h1,l4,N1));break;case"C":var $2=pf.args[0].clone(),f4=p1.integration.decompose_arg($2,x1),I2=f4[1],h1=f4[0],l4=f4[3];e1=s.parse(A("(pi*(({1})+({0})*({2}))*C(({1})+({0})*({2}))-sin((1/2)*pi*(({1})+({0})*({2}))^2))/(({0})*pi)",h1,l4,I2));break;case"erf":var $2=pf.args[0].clone(),f4=p1.integration.decompose_arg($2,x1),I2=f4[1],h1=f4[0];e1=s.parse(A("e^(-(({2}))^2)/(({0})*sqrt(pi))+(1/({0})+({1}))*erf(({2}))",h1,I2,$2));break;case"sign":e1=s.multiply(pf.clone(),$2.clone());break;default:p1.integration.stop()}e1=s.divide(e1,C1)}else if(N1.isLinear())if(r4===An||r4===Ge){var i2=Number(pf.power);if(i2<0)pf.fname=r4===Ge?yh:Bs,pf.invert().updateHash(),e1=p1.integrate(pf,x1,_1);else{var $2=pf.args[0],H4=pf.clone(),s6=pf.clone(),g4=new c((i2-1)/i2),I4=s.multiply(C1.clone(),new c(i2)).invert();H4.power=H4.power.subtract(new o(1)),s6.power=s6.power.subtract(new o(2));var w1=s.symfunction(r4===An?Ge:An,[$2.clone()]);r4===Ge&&w1.negate(),e1=s.add(s.multiply(s.multiply(I4,H4),w1),s.multiply(g4,p1.integrate(s.parse(s6),x1,_1)))}}else if(r4===wt||r4===df){if(pf.args[0].isLinear(x1)){var L1=pf.power.subtract(new o(1)).toString(),Q2=pf.clone().toUnitMultiplier(),x4=s.parse(A((r4===df?"-":"")+"1/({2}*{0})*{3}({1})^({0})",L1,$2,C1,r4));Q2.power=Q2.power.subtract(new o(2)),Q2.power.equals(0)&&(Q2=s.parse(Q2)),e1=s.subtract(x4,p1.integrate(Q2,x1,_1))}}else if(r4===Bs||r4===yh){var K3=pf.power.subtract(new o(1)).toString(),b3=pf.power.subtract(new o(2)).toString(),k1=r4===Bs?wt:df,Q2=pf.clone().toUnitMultiplier(),W3=A((r4===yh?"-":"")+"1/({0}*{1})*{4}({3})^({2})*{5}({3})",C1,K3,b3,$2,r4,k1),x4=s.parse(W3);Q2.power=Q2.power.subtract(new o(2)),Q2.power.equals(0)&&(Q2=s.parse(Q2)),e1=s.add(x4,s.multiply(new c(b3/K3),p1.integrate(Q2,x1,_1)))}else(r4===s1||r4===a1)&&pf.power.equals(2)?e1=p1.integrate(pf.fnTransform(),x1,_1):p1.integration.stop();else p1.integration.stop();e1.multiplier=e1.multiplier.multiply(X1)}}else if(o1===De)e1=p1.integration.partial_fraction(pf,x1,_1);else if(o1===qe){var m4=pf.getDenom();m4.group===ve&&(pf=s.expand(pf));var ae=pf.stripVar(x1),To=s.divide(pf.clone(),ae.clone());if(ae.contains(x1)&&(To=s.multiply(To,ae),ae=new c(1)),To.group!==qe){if(To.equals(1))return p1.integrate(s.expand(pf),x1,_1);To.clone().toLinear().isPoly(!0)&&a.Utils.variables(To).length>1&&(To=a.Algebra.Factor.factor(To)),e1=p1.integrate(To,x1,_1)}else{var wh=To.collectSymbols().sort(function(d3,G4){return d3.group===G4.group?Number(d3.power)===Number(G4.power)?d3<G4?1:-1:G4.power-d3.power:G4.group-d3.group}).map(function(d3){var G4=c.unwrapSQRT(d3,!0);return G4.fname===Do?s.parse(A("({1})*e^({0})",G4.args[0],G4.multiplier)):G4}),ff=wh.length;if(pf.power<0){if(ff===2)return p1.integrate(s.expand(pf),x1,_1,B1)}else if(ff===2){try{e1=p1.integration.u_substitution(wh,x1)}catch{}if(!e1){var n1=wh[0].group,c1=wh[1].group,u1=wh[0],A1=wh[1],u2=u1.fname,s2=A1.fname;if(pf=s.multiply(u1.clone(),A1.clone()),n1===He&&c1===He)if(u2===So||s2===So)e1=p1.integration.by_parts(pf.clone(),x1,_1,B1);else{wh.sort(function(G4,x6){return x6.fname>G4.fname});var h2=u1.args[0];(!h2.isLinear()||!(h2.group===Xe||h2.group===qe||h2.group===ve))&&p1.integration.stop();var Y1=p1.integration.decompose_arg(h2,x1);N1=Y1[1],C1=Y1[0],N1.isLinear()||p1.integration.stop();var K2=A1.args[0];if(h2.equals(K2))if(u2===Ge&&s2===An||u2===An&&s2===Ge)if(u1.power.lessThan(0)&&p1.integration.stop(),u2===Ge&&u1.power.add(A1.power).equals(0))u1.fname=wt,u1.updateHash(),e1=p1.integrate(u1,x1,_1);else if(P(u1.power)&&s2===An&&A1.power.lessThan(0)){var L1=Number(u1.power)/2,R2=s.parse(A("(1-cos({0})^2)^({1})",u1.args[0],L1));e1=p1.integrate(s.expand(s.multiply(R2,A1.clone())),x1,_1,B1)}else if(P(u1.power)&&s2===Ge&&A1.power.lessThan(0)){var L1=Number(u1.power)/2,R2=s.parse(A("(1-sin({0})^2)^({1})",u1.args[0],L1));e1=p1.integrate(s.expand(s.multiply(R2,A1.clone())),x1,_1,B1)}else{var V2=a.Utils.even(u1.power),e4=a.Utils.even(A1.power);if(e1=new c(0),!V2||!e4){var g1,Q2,w4;V2?(g1=u1,Q2=A1):(g1=A1,Q2=u1);var t4=g1.fname===An?-1:1,L1=Q2.power,v4=(L1-1)/2,w4=s.parse("(1-"+g1.fname+a.Utils.inBrackets(h2)+"^2)^"+v4),Y2=s.expand(s.multiply(new c(t4),s.multiply(g1.clone(),w4)));Y2.each(function(S3){e1=s.add(e1,p1.integration.poly_integrate(S3.clone()))})}else{var T4=function(S3){var r6=S3.power,E6=r6/2,e5;return S3.fname===An?e5="((1/2)+(cos(2*("+S3.args[0]+"))/2))^"+E6:e5="((1/2)-(cos(2*("+S3.args[0]+"))/2))^"+E6,s.parse(e5)},C1=T4(u1),l2=T4(A1),w1=s.multiply(C1,l2),Y2=s.expand(w1);return Y2.each(function(S3){e1=s.add(e1,p1.integrate(S3,x1,_1))}),s.multiply(e1,ae)}}else if(u2===Bs&&s2===wt&&N1.isLinear()&&A1.isLinear())e1=s.parse(A("sec({0})^({1})/({1})",u1.args[0],u1.power));else if(u2===wt&&s2===Bs&&N1.isLinear())if(u1.isLinear()&&A1.isLinear())e1=s.divide(s.symfunction(Bs,[h2.clone()]),C1);else if(P(u1.power)){var i2=Number(u1.power)/2,w1=s.parse(A("(sec({0})^2-1)^({1})",u1.args[0],i2));e1=p1.integrate(s.expand(s.multiply(w1,A1)),x1,_1)}else p1.integration.stop();else if(u2===Bs&&s2===An)u1.fname=An,u1.invert().updateHash(),e1=p1.integrate(s.multiply(u1,A1),x1,_1);else if(u2===Ge&&s2===yh)A1.fname=Ge,A1.invert().updateHash(),e1=p1.integrate(s.multiply(u1,A1),x1,_1);else if(u2===wt&&(s2===An||s2===Ge)&&A1.power.lessThan(0)){var w1=s.multiply(u1.fnTransform(),A1);e1=p1.integrate(s.expand(w1),x1,_1)}else{var w1=s.multiply(u1.fnTransform(),A1.fnTransform());e1=p1.integrate(s.expand(w1),x1,_1)}else if((u2===Ge||u2===An)&&(s2===Ge||s2===An))if(u1.isLinear()&&A1.isLinear())if(u1.args[0].isLinear()&&A1.args[0].isLinear()){var Q1,D4;s2===Ge?(Q1=u1.args[0],D4=A1.args[0]):(D4=u1.args[0],Q1=A1.args[0]),z2=s.parse(A("(sin(({1})+({0}))+sin(({1})-({0})))/2",Q1.toString(),D4.toString())),e1=p1.integrate(z2,x1,_1)}else{var C4=x2(wh);e1=p1.integrate(s.expand(C4),x1,_1)}else{var C4=new c(1);wh.map(function(_3){var w6=_3.fnTransform();C4=s.multiply(C4,w6)});var w1=s.expand(C4);e1=p1.integrate(w1,x1,_1),e1.hasIntegral()&&(e1=p1.integrate(x2(C4.collectSymbols()),x1,_1))}else p1.integration.stop()}else if(n1===He&&c1===ve){var s4=u1.isLinear();if(u1.fname===An&&s4&&A1.power.equals(-1))e1=s.symfunction("Ci",[u1.args[0]]);else if(u1.fname===An&&A1.power.equals(-1))e1=p1.integrate(s.multiply(u1.fnTransform(),A1.clone()),x1,_1);else if(u1.fname===s1&&s4&&A1.power.equals(-1))e1=s.symfunction("Chi",[u1.args[0]]);else if(u1.fname===s1&&A1.power.equals(-1))e1=p1.integrate(s.multiply(u1.fnTransform(),A1.clone()),x1,_1);else if(u1.fname===Ge&&s4&&A1.power.equals(-1))e1=s.symfunction("Si",[u1.args[0]]);else if(u1.fname===Ge&&A1.power.equals(-1))e1=p1.integrate(s.multiply(u1.fnTransform(),A1.clone()),x1,_1);else if(u1.fname===a1&&s4&&A1.power.equals(-1))e1=s.symfunction("Shi",[u1.args[0]]);else if(u1.fname===a1&&A1.power.equals(-1))e1=p1.integrate(s.multiply(u1.fnTransform(),A1.clone()),x1,_1);else if(u1.fname===So&&A1.power.equals(-1))e1=p1.integration.poly_integrate(u1,x1,_1);else if(u1.fname==="erf"){if(A1.power.equals(1)){var f4=p1.integration.decompose_arg(u1.args[0],x1),h1=f4[0],I2=f4[1],$2=u1.args[0].toString();e1=s.parse(A("(e^(-(({2}))^2)*(sqrt(pi)*e^((({2}))^2)*(2*({0})^2*({1})^2-3)*erf(({2}))+2*({0})*({1})-2))/(4*sqrt(pi)*({0})^2)",h1,I2,$2))}}else e1=p1.integration.by_parts(pf,x1,_1,B1)}else if(n1===Rs&&c1===ve){var N1=u2===So?p1.integration.decompose_arg(u1.args[0],x1)[1]:null;u1.isE()&&(u1.power.group===ve||u1.power.group===qe)&&A1.power.equals(-1)?e1=s.symfunction("Ei",[u1.power.clone()]):u2===So&&N1.value===A1.value?e1=p1.integration.poly_integrate(u1,x1,_1):e1=p1.integration.by_parts(pf,x1,_1,B1)}else if(n1===De&&c1===ve){if(A1.value===u1.value&&u1.power.equals(-1)){var Z4=Math.min.apply(null,a.Utils.keys(u1.symbols)),h3=Math.min(Z4,A1.power),r3=A1.clone();r3.power=new o(h3),A1=s.divide(A1,r3.clone());var w1=new c(0);u1.each(function(G4){w1=s.add(w1,s.divide(G4.clone(),r3.clone()))}),w1.multiplier=u1.multiplier,pf=s.divide(A1,w1)}else pf=s.expand(pf);e1=p1.integration.partial_fraction(pf,x1,_1)}else if(n1===Xe&&c1===ve){var z2=u1.clone().toLinear(),R4=a.Algebra.degree(z2,s.parse(x1)).equals(1);if(u1.power.equals(-1/2)){var Y1=p1.integration.decompose_arg(u1.clone().toLinear(),x1),C1=Y1[0].negate(),N1=Y1[1],l2=Y1[3],B4=Number(u1.power),N4=Number(A1.power);if(g(N4)&&a.Utils.even(N4)&&N1.power.equals(2)){var W4=s.divide(s.multiply(s.pow(l2.clone(),new c(2)),s.symfunction(Ko,[s.divide(l2.clone(),C1.clone())])),s.pow(C1.clone(),new c(2)));W4=s.multiply(W4,s.symfunction(Ko,[l2]).invert());var m3=s.parse("sin(u)");m3.power=m3.power.multiply(A1.power);var O1=p1.integrate(m3,"u",_1),M4=s.parse(Fc+"("+Ko+"("+C1+"/"+l2+")*"+x1+")");e1=s.multiply(W4,O1.sub(new c("u"),M4))}else if(B4===-1/2){var p4=function(S3,r6){var E6=s.parse(p1.integrate(S3,x1,_1,B1).sub(x1,A(r6,x1)));if(!E6.hasIntegral())return E6};N4===-1?e1=p4(s.expand(s.expand(s.pow(s.multiply(u1.invert(),A1.invert()),new c(2)))).invert(),"sqrt(1-1/({0})^2)"):N4===-2&&(e1=p4(s.sqrt(s.expand(s.divide(s.pow(pf,new c(2)).invert(),s.pow(new c(x1),new c(2))).negate())).invert(),"sqrt(1-1/({0})^2)"))}}else if(u1.power.equals(-1)&&A1.isLinear()&&R4)e1=p1.integration.partial_fraction(pf,x1,_1);else if(!u1.power.lessThan(0)&&g(u1.power)){var E3=s.expand(u1);e1=new c(0),E3.each(function(G4){G4.group===De?G4.each(function(x6){e1=s.add(e1,p1.integrate(s.multiply(A1.clone(),x6),x1,_1))}):e1=s.add(e1,p1.integrate(s.multiply(A1.clone(),G4),x1,_1))})}else if(u1.power.lessThan(-2))e1=p1.integration.by_parts(pf,x1,_1,B1);else if(u1.power.lessThan(0)&&A1.power.greaterThan(1)){var Y1=p1.integration.decompose_arg(u1.clone().toLinear(),x1),C1=Y1[0].negate(),N1=Y1[1],l2=Y1[3],f2=u1.clone().toLinear();if(N1.group!==De&&N1.isLinear()){var i2=Number(A1.power),P4="_u_",g1=new c(P4),J4=s.expand(s.divide(s.pow(s.subtract(g1.clone(),l2.clone()),new c(i2)),g1.clone())),e6={};e6[P4]=f2;var X3=s.parse(J4,e6);e1=p1.integrate(X3,x1,0)}else if(A1.power.greaterThan(N1.power)||A1.power.equals(N1.power)){var t6=new a.Algebra.Classes.Factors;u1=a.Algebra.Factor.coeffFactor(u1.invert(),t6);var I3=a.Algebra.divide(A1,u1);I3.group!==qe?(e1=new c(0),I3.each(function(r6){e1=s.add(e1,p1.integrate(r6,x1,_1))}),t6.each(function(r6){e1=s.divide(e1,r6)}),e1=s.expand(e1)):e1=p1.integration.by_parts(pf,x1,_1,B1)}else e1=p1.integration.partial_fraction(pf,x1,_1)}else if(u1.power.den.equals(2)){var f4=p1.integration.decompose_arg(u1.clone().toLinear(),x1),C1=f4[3],N1=f4[1],l2=f4[0],D4=f4[2];if(N1.power.equals(2)&&l2.lessThan(0)){C1.equals(1)||(ae=s.multiply(ae,s.pow(C1,new c(2))));var g1=x1,W4=s.divide(s.pow(l2.clone().negate(),new c(1/2)),s.pow(C1,new c(1/2))),P4=s.symfunction(An,[new c(g1)]),Y3=s.pow(s.symfunction(An,[new c(g1)]),new c(u1.power.num)),D3=s.pow(s.symfunction(Ge,[new c(g1)]),new c(A1.power)),h6=s.multiply(s.multiply(Y3,P4),D3),O1=p1.integrate(h6,g1,_1);e1=O1.sub(g1,s.symfunction(Fc,[s.multiply(new c(x1),W4)]))}else e1=p1.integration.partial_fraction(pf,x1,_1,B1)}else R4&&(e1=p1.integration.partial_fraction(pf,x1,_1))}else if(u1.isComposite()&&A1.isComposite())if(e1=new c(0),u1.power.greaterThan(0)&&A1.power.greaterThan(0)){var Y2=s.expand(pf);Y2.each(function(G4){e1=s.add(e1,p1.integrate(G4,x1,_1))},!0)}else{var B4=Number(u1.power),N4=Number(A1.power);if(B4<0&&N4>0){var w1=u1;u1=A1,A1=w1}B4===-1&&N4===-1?e1=p1.integration.partial_fraction(pf,x1):u1.each(function(x6){var _3=s.multiply(x6,A1.clone()),w6=p1.integrate(_3,x1,_1);e1=s.add(e1,w6)})}else if(n1===Xe&&wh[0].power.greaterThan(0))u1=s.expand(u1),e1=new c(0),u1.each(function(d3){e1=s.add(e1,p1.integrate(s.multiply(d3,A1.clone()),x1,_1))},!0);else if(n1===He&&c1===Rs&&a.Utils.in_htrig(u1.fname))u1=u1.fnTransform(),e1=p1.integrate(s.expand(s.multiply(u1,A1)),x1,_1);else if(n1===He&&c1===Xe||c1===He&&n1===Xe){if(c1===He&&n1===Xe){var w1=u1;u1=A1,A1=w1}var P4,X6,i2,g4,d6,b6;if(P4=c.unwrapSQRT(p1.diff(u1.clone(),x1),!0),X6=c.unwrapSQRT(A1,!0),P4.power.equals(X6.power)){if(i2=new c(A1.power),d6=P4.clone().toLinear(),b6=A1.clone().toLinear(),g4=a.Algebra.divide(d6.toLinear(),b6),g4.isConstant()){var Q3=s.pow(g4,i2.negate());e1=s.multiply(Q3,p1.integration.poly_integrate(u1.clone()))}}else e1=p1.integration.by_parts(pf,x1,_1,B1)}else{var p6=u1.clone().toLinear(),g3=A1.clone().toLinear();n1===Rs&&c1===Rs&&u1.power.contains(x1)&&A1.power.contains(x1)&&!p6.contains(x1)&&!g3.contains(x1)?e1=s.parse(A("(({0})^(({2})*({4}))*({1})^(({3})*({4})))/(log(({0})^({2}))+log(({1})^({3})))",p6.toString(),g3.toString(),u1.power.multiplier.toString(),A1.power.multiplier.toString(),x1)):e1=p1.integration.by_parts(pf,x1,_1,B1)}}}else if(ff===3&&(wh[2].group===ve&&wh[2].power.lessThan(2)||wh[0].group===Xe)){var k3=wh[0];if(k3.group===Xe){k3.power.greaterThan(1)&&(k3=s.expand(k3));var Q2=s.multiply(wh[1],wh[2]);e1=new c(0),k3.each(function(G4){var x6=s.multiply(G4,Q2.clone()),_3=p1.integrate(x6,x1,_1);e1=s.add(e1,_3)},!0)}else e1=p1.integration.by_parts(pf,x1,_1,B1)}else if(_2(wh)){for(var w1=new c(1),_6=0,ff=wh.length;_6<ff;_6++)w1=s.multiply(w1,wh[_6].fnTransform());w1=s.expand(w1),e1=p1.integrate(w1,x1,_1)}else{var C4=x2(wh);e1=p1.integrate(s.expand(C4),x1,_1)}}e1=s.multiply(e1,ae)}if(e1)return e1}catch(d3){if(!(d3 instanceof b2||d3 instanceof a.exceptions.DivisionByZero))throw d3}return s.symfunction("integrate",[S1,D1])},!1))},defint:function(S1,D1,_1,B1){B1=B1||"x";var c2=function(v1,X1,i2){try{return s.parse(v1,X1)}catch{var f2=p1.Limit.limit(v1,B1,i2);return f2}},H1=a.Utils.variables(S1),x1=S1.hasTrig(),pf,o1;if(H1.length===1&&!B1&&(B1=H1[0]),x1||(o1=p1.integrate(S1,B1)),!x1&&!o1.hasIntegral()){var e1={},w1={},C1,F1;e1[B1]=_1,w1[B1]=D1,C1=c2(o1,e1,_1),F1=c2(o1,w1,D1),pf=s.subtract(C1,F1)}else if(H1.length===1&&D1.isConstant()&&_1.isConstant()){var N1=a.Utils.build(S1);pf=new c(a.Math2.num_integrate(N1,Number(D1),Number(_1)))}else pf=s.symfunction("defint",[S1,D1,_1,B1]);return pf},Limit:{interval:function(S1,D1){return s.parse(A("[{0}, {1}]",S1,D1))},diverges:function(){return p1.Limit.interval("-Infinity","Infinity")},divide:function(S1,D1,_1,B1,c2){if(!(c2++>l.max_lim_depth)){S1.clone();var H1=D1.clone();if(D1.fname===eh){var x1=S1.sign(),pf=B1.sign();if(B1.isInfinity)return s.multiply(new c(x1),new c(pf));if(B1.equals(0)){var o1=s.parse(S1.multiplier),e1=s.parse(D1.multiplier);return s.divide(s.multiply(o1,p1.Limit.interval("-1","1")),e1)}else p1.Limit.diverges()}var w1=function(G1){if(a.Utils.isVector(G1)){for(var P2=0;P2<G1.elements.length;P2++)if(!G1.elements[P2].isInfinity)return!1;return!0}return G1.isInfinity},C1=function(G1,P2){return a.Utils.isVector(G1)?!1:G1.equals(P2)},F1;do{var N1=W(p1.Limit.limit(S1.clone(),_1,B1,c2)),v1=W(p1.Limit.limit(D1.clone(),_1,B1,c2)),X1=w1(N1)&&w1(v1)||C1(N1,0)&&C1(v1,0);if(X1){var i2=p1.diff(S1.clone(),_1),f2=p1.diff(D1.clone(),_1),Y1=s.expand(s.divide(i2,f2));S1=Y1.getNum(),D1=Y1.getDenom()}}while(X1);var l2=v1.equals(0),Q1=Number(H1.power);return B1.isConstant(!0)&&l2?F1=c.infinity(a.Utils.even(Q1)&&N1.lessThan(0)?-1:void 0):l2?F1=p1.Limit.diverges():F1=s.divide(N1,v1),F1}},rewriteToLog:function(S1){var D1=S1.power.clone();return S1.toLinear(),s.pow(new c("e"),s.multiply(D1,s.symfunction(l.LOG+"",[S1])))},getSubbed:function(S1,D1,_1){var B1;S1.group===Rs&&(S1=p1.rewriteToLog(S1));try{B1=S1.sub(D1,_1)}catch{B1=S1}return B1},isInterval:function(S1){return a.Utils.isVector(S1)},isConvergent:function(S1){return!(p1.Limit.isInterval(S1)&&S1.elements[0].isInfinity&&S1.elements[1].isInfinity||S1.containsFunction("limit"))},limit:function(S1,D1,_1,B1){if(S1.isLinear()&&S1.isComposite()){var c2=new c(0);return S1.each(function(uf){c2=s.add(c2,p1.Limit.limit(uf,D1,_1,B1))},!0),c2}if(S1=a.Algebra.Simplify.simplify(S1),B1=B1||1,!(B1++>l.max_lim_depth)){var H1=s.parse(S1.multiplier);S1.toUnitMultiplier();try{var x1;if(S1.isConstant(!0))x1=S1;else{var pf={};pf[D1]=_1;try{var o1=s.parse(S1.sub(D1,_1),pf);(o1.isConstant(!0)||o1.isInfinity)&&(x1=o1)}catch{}if(!x1){var e1=S1.getNum(),w1=S1.getDenom();if(w1.isConstant(!0)){if(S1.group===Rs){var C1=S1.clone().toLinear(),F1=S1.power.clone(),N1=C1.getNum(),v1=C1.getDenom(),X1=a.Utils.decompose_fn(v1,D1,!0);if(N1.group===ve&&N1.multiplier.isOne()&&X1.ax.group===ve&&X1.b.isConstant(!0)&&X1.a.isOne()&&X1.b.isConstant(!0))x1=s.parse(A("(1/e^({0}))",X1.b));else{var i2=p1.Limit.rewriteToLog(S1.clone()),f2=i2.power.clone(),Y1=i2.clone().toLinear(),l2=p1.Limit.limit(Y1,D1,_1,B1),Q1=p1.Limit.limit(f2,D1,_1,B1);x1=s.pow(l2,Q1)}}else if(S1.group===He&&S1.args.length===1){var G1,P2=p1.Limit.limit(S1.args[0],D1,_1,B1);if(a.Utils.isVector(P2))return x1=P2.map(function(uf){var Qp=S1.clone();return Qp.args[0]=uf,p1.Limit.limit(s.symfunction(S1.fname,[uf]),D1,_1,B1)}),s.multiply(H1,x1);if(P2.isConstant(!0)){var J1=s.symfunction(S1.fname,[P2]);try{W(J1),G1=!0}catch{G1=!1}}if(G1)x1=J1;else if(p1.Limit.isConvergent(P2)){if(S1.fname===So)switch(P2.toString()){case"0":x1=c.infinity().negate();break;case"Infinity":x1=c.infinity();break;case"-Infinity":x1=c.infinity();break}else if((S1.fname===An||S1.fname===Ge)&&_1.isInfinity)x1=p1.Limit.interval(-1,1);else if(S1.fname===wt){var v2=S1.args[0],z2=v2.getNum(),q2=v2.getDenom(),j2=z2.toUnitMultiplier();(_1.isInfinity||j2.equals("pi")&&q2.equals(2))&&(x1=divergent())}else if(S1.fname===l.FACTORIAL&&P2.isInfinity)return c.infinity()}}else if(S1.group===ve){if(S1.power>0)return s.parse(S1,pf);a.Utils.even(S1.power)?x1=c.infinity():x1=p1.Limit.diverges()}else if(S1.group===qe){var n4,X2,b1=S1.collectSymbols().sort(function(Qp,gf){return Qp.group-gf.group}),C1=b1.pop();for(n4=W(p1.Limit.limit(C1,D1,_1,B1));b1.length;){var k1=b1.pop();X2=W(p1.Limit.limit(k1,D1,_1,B1)),n4.isInfinity||!p1.Limit.isConvergent(n4)&&X2.equals(0)||n4.equals(0)&&p1.Limit.isConvergent(X2)?(k1.containsFunction(So)&&(k1=[C1,C1=k1][0]),k1.invert(),n4.isInfinity&&X2.isInfinity?n4=c.infinity():n4=p1.Limit.divide(C1,k1,D1,_1,B1)):(n4=s.multiply(n4,X2),C1=s.multiply(C1,k1))}x1=n4}else if(S1.isComposite()){var V1;S1.isLinear()||(S1=s.expand(S1)),x1=new c(0);for(var b1=S1.collectSymbols().sort(function(Qp,gf){return gf.group-Qp.group}),n2=[],y2=new c(0),Z1=0,T2=b1.length;Z1<T2;Z1++){var L2=b1[Z1].clone();L2.group===He||L2.group===qe&&L2.hasFunc()?y2=s.add(y2,L2):n2.push(L2)}n2.unshift(y2),n2.length!==1&&(b1=n2);for(var Z1=0,T2=b1.length;Z1<T2;Z1++){var L2=b1[Z1];try{V1=p1.Limit.limit(L2,D1,_1,B1)}catch{V1=p1.Limit.diverges()}try{x1=s.add(x1,V1)}catch{if(B1++>l.max_lim_depth)return;x1=p1.Limit.limit(p1.diff(S1,D1),D1,_1,B1)}}}}else x1=p1.Limit.divide(e1,w1,D1,_1,B1)}}x1||(x1=s.symfunction("limit",[S1,D1,_1]))}catch{x1=s.symfunction("limit",[S1,D1,_1])}return s.multiply(H1,x1)}}},Fresnel:{S:function(S1){return S1.isConstant(!0)?p1.defint(s.parse("sin(pi*x^2/2)"),c(0),S1,"x"):s.symfunction("S",arguments)},C:function(S1){return S1.isConstant(!0)?p1.defint(s.parse("cos(pi*x^2/2)"),c(0),S1,"x"):s.symfunction("C",arguments)}}};e.register([{name:"diff",visible:!0,numargs:[1,3],build:function(){return p1.diff}},{name:"sum",visible:!0,numargs:4,build:function(){return p1.sum}},{name:"product",visible:!0,numargs:4,build:function(){return p1.product}},{name:"integrate",visible:!0,numargs:[1,2],build:function(){return p1.integrate}},{name:"defint",visible:!0,numargs:[3,4],build:function(){return p1.defint}},{name:"S",visible:!0,numargs:1,build:function(){return p1.Fresnel.S}},{name:"C",visible:!0,numargs:1,build:function(){return p1.Fresnel.C}},{name:"limit",visible:!0,numargs:[3,4],build:function(){return p1.Limit.limit}}]),e.updateAPI()})()}()),Calculus.exports}var hasRequiredAlgebra;function requireAlgebra(){return hasRequiredAlgebra||(hasRequiredAlgebra=1,function(t){{var e=requireNerdamer_core();requireCalculus()}(function(){var a=e.getCore(),s=a.PARSER,o=a.groups.N,l=a.groups.P,u=a.groups.S,c=a.groups.EX,d=a.groups.FN,m=a.groups.PL,g=a.groups.CP,A=a.groups.CB,P=a.Utils.keys,W=a.Utils.even,me=a.Utils.variables,ve=a.Utils.format,He=a.Utils.round,De=a.Frac,Xe=a.Utils.isInt,qe=a.Symbol,Rs=a.Settings.CONST_HASH,Vc=a.Utils.importFunctions();a.Utils.evaluate;function So(Ge,An,wt){if(a.Utils.isSymbol(Ge))this.parse(Ge),this.variable=this.variable||An;else if(isNaN(Ge))typeof Ge=="string"&&this.parse(s.parse(Ge));else{if(wt=wt||0,An===void 0)throw new a.exceptions.InvalidVariableNameError("Polynomial expects a variable name when creating using order");this.coeffs=[],this.coeffs[wt]=Ge,this.fill(Ge)}}So.fromArray=function(Ge,An){if(typeof An>"u")throw new a.exceptions.InvalidVariableNameError("A variable name must be specified when creating polynomial from array");var wt=new So;return wt.coeffs=Ge,wt.variable=An,wt},So.fit=function(Ge,An,wt,Bs,yh,df){var Fc=new Array(yh+1),_h=wt-An;Fc[0]=An,Fc[yh]=Ge,_h-=Ge*Math.pow(Bs,yh);for(var qc=yh-1;qc>0;qc--){var Mh=Math.pow(Bs,qc),cf=_h/Mh,mf=Math.sign(cf),a1=mf*Math.floor(Math.abs(cf));_h-=a1*Mh,Fc[qc]=a1}if(_h!==0)return null;for(var qc=0;qc<Fc.length;qc++)Fc[qc]=new De(Fc[qc]);return So.fromArray(Fc,df)},So.prototype={parse:function(Ge,An){if(this.variable=me(Ge)[0],!Ge.isPoly())throw a.exceptions.NerdamerTypeError("Polynomial Expected! Received "+a.Utils.text(Ge));if(An=An||[],Ge.power.absEquals(1)||(Ge=s.expand(Ge)),Ge.group===a.groups.N)An[0]=Ge.multiplier;else if(Ge.group===a.groups.S)An[Ge.power.toDecimal()]=Ge.multiplier;else for(var wt in Ge.symbols){var Bs=Ge.symbols[wt],yh=Bs.power;if(a.Utils.isSymbol(yh))throw new a.exceptions.NerdamerTypeError("power cannot be a Symbol");yh=Bs.group===o?0:yh.toDecimal(),Bs.symbols?this.parse(Bs,An):An[yh]=Bs.multiplier}this.coeffs=An,this.fill()},fill:function(Ge){Ge=Number(Ge)||0;for(var An=this.coeffs.length,wt=0;wt<An;wt++)this.coeffs[wt]===void 0&&(this.coeffs[wt]=new De(Ge));return this},trim:function(){for(var Ge=this.coeffs.length;Ge--;){var An=this.coeffs[Ge],wt=An.equals(0);if(An&&wt){if(Ge===0)break;this.coeffs.pop()}else break}return this},modP:function(Ge){for(var An=this.coeffs.length,wt=0;wt<An;wt++){var Bs=this.coeffs[wt];if(Bs<0){for(var yh,df=wt;df<An;df++)if(this.coeffs[df]>0){yh=this.coeffs[df];break}if(yh){for(df;df>wt;df--)this.coeffs[df]=this.coeffs[df].subtract(new De(1)),this.coeffs[df-1]=this.coeffs[df-1].add(new De(Ge));Bs=this.coeffs[wt]}}var Fc=Bs.mod(Ge),_h=Bs.subtract(Fc).divide(Ge);if(!_h.equals(0)){var qc=wt+1,Mh=this.coeffs[qc]||new De(0);Mh=Mh.add(_h),this.coeffs[qc]=new De(Mh),this.coeffs[wt]=new De(Fc)}}return this},add:function(Ge){for(var An=Math.max(this.coeffs.length,Ge.coeffs.length),wt=0;wt<An;wt++){var Bs=this.coeffs[wt]||new De(0),yh=Ge.coeffs[wt]||new De(0);this.coeffs[wt]=Bs.add(yh)}return this},subtract:function(Ge){for(var An=Math.max(this.coeffs.length,Ge.coeffs.length),wt=0;wt<An;wt++){var Bs=this.coeffs[wt]||new De(0),yh=Ge.coeffs[wt]||new De(0);this.coeffs[wt]=Bs.subtract(yh)}return this},divide:function(Ge){for(var An=this.variable,wt=a.Utils.arrayClone(this.coeffs),Bs=a.Utils.arrayClone(Ge.coeffs),yh=wt.length,df=Bs.length-1,Fc=[],_h=0;_h<yh;_h++){var qc=yh-(_h+1),Mh=qc-df,cf=wt[qc].divide(Bs[df]);if(Mh<0)break;Fc[Mh]=cf;for(var mf=0;mf<=df;mf++)wt[mf+Mh]=wt[mf+Mh].subtract(Bs[mf].multiply(cf))}var a1=So.fromArray(wt,An||"x").trim(),s1=So.fromArray(Fc,An||"x");return[s1,a1]},multiply:function(Ge){for(var An=this.coeffs.length,wt=Ge.coeffs.length,Bs=[],yh=0;yh<An;yh++)for(var df=this.coeffs[yh],Fc=0;Fc<wt;Fc++){var _h=yh+Fc,qc=Ge.coeffs[Fc],Mh=Bs[_h]||new De(0);Bs[_h]=Mh.add(df.multiply(qc))}return this.coeffs=Bs,this},isZero:function(){for(var Ge=this.coeffs.length,An=0;An<Ge;An++){var wt=this.coeffs[An];if(!wt.equals(0))return!1}return!0},sub:function(Ge){for(var An=new De(0),wt=this.coeffs.length,Bs=0;Bs<wt;Bs++){var yh=this.coeffs[Bs];yh.equals(0)||(An=An.add(yh.multiply(new De(Math.pow(Ge,Bs)))))}return An},clone:function(){var Ge=new So;return Ge.coeffs=this.coeffs,Ge.variable=this.variable,Ge},deg:function(){return this.trim(),this.coeffs.length-1},lc:function(){return this.coeffs[this.deg()].clone()},monic:function(){for(var Ge=this.lc(),An=this.coeffs.length,wt=0;wt<An;wt++)this.coeffs[wt]=this.coeffs[wt].divide(Ge);return this},gcd:function(Ge){var An=this.coeffs.length-1,wt=Ge.coeffs.length-1,Bs;if(An<wt)return Ge.gcd(this);for(var yh=this;!Ge.isZero();){var df=Ge.clone();yh=yh.clone(),Bs=yh.divide(df),Ge=Bs[1],yh=df}var Fc=a.Math2.QGCD.apply(null,yh.coeffs);if(!Fc.equals(1))for(var _h=yh.coeffs.length,qc=0;qc<_h;qc++)yh.coeffs[qc]=yh.coeffs[qc].divide(Fc);return yh},diff:function(){for(var Ge=[],An=this.coeffs.length,wt=1;wt<An;wt++)Ge.push(this.coeffs[wt].multiply(new De(wt)));return this.coeffs=Ge,this},integrate:function(){for(var Ge=[0],An=this.coeffs.length,wt=0;wt<An;wt++){var Bs=new De(wt+1);Ge[Bs]=this.coeffs[wt].divide(Bs)}return this.coeffs=Ge,this},gcf:function(Ge){for(var An=function(_h){for(var qc=0;qc<_h.length;qc++)if(!_h[qc].equals(0))return qc},wt=[],Bs=0;Bs<this.coeffs.length;Bs++){var yh=this.coeffs[Bs];!yh.equals(0)&&wt.indexOf(yh)===-1&&wt.push(yh)}var df=[a.Math2.QGCD.apply(void 0,wt),An(this.coeffs)].toDecimal();if(Ge){var Fc=[];Fc[df[1]-1]=df[0],df=So.fromArray(Fc,this.variable).fill()}return df},quad:function(Ge){var An=[];if(this.coeffs.length>3)throw new Error("Cannot calculate quadratic order of "+(this.coeffs.length-1));if(this.coeffs.length===0)throw new Error("Polynomial array has no terms");var wt=this.coeffs[2]||0,Bs=this.coeffs[1]||0,yh=this.coeffs[0],df=Bs*Bs-4*wt*yh;return df<0&&!Ge||(An[0]=(-Bs+Math.sqrt(df))/(2*wt),An[1]=(-Bs-Math.sqrt(df))/(2*wt)),An},squareFree:function(){for(var Ge=this.clone(),An=1,wt=Ge.clone().diff(),Bs=Ge.clone().gcd(wt),yh=Ge.divide(Bs)[0],df=So.fromArray([new De(1)],Ge.variable);!Bs.equalsNumber(1);){var Fc=yh.gcd(Bs),_h=yh.divide(Fc)[0];if(!_h.equalsNumber(1)&&An>1){for(var qc=_h.clone(),Mh=1;Mh<An;Mh++)qc.multiply(_h.clone());_h=qc}df=df.multiply(_h),An++,yh=Fc,Bs=Bs.divide(Fc)[0]}return[df,yh,An]},toSymbol:function(){var Ge=this.coeffs.length,An=this.variable;if(Ge===0)return new a.Symbol(0);for(var wt=Ge-1,Bs="",yh=0;yh<Ge;yh++){var df=yh===wt?"":"+",Fc=this.coeffs[yh];Fc.equals(0)||(Bs+=Fc+"*"+An+"^"+yh+df)}return s.parse(Bs)},equalsNumber:function(Ge){return this.trim(),this.coeffs.length===1&&this.coeffs[0].toDecimal()===String(Ge)},toString:function(){return this.toSymbol().toString()}},qe.prototype.coeffs=function(Ge,An){An&&!this.isPoly(!0)&&s.error("Polynomial expected when requesting coefficients with order"),Ge=Ge||[];var wt=this.clone().distributeMultiplier();if(wt.isComposite())for(var Bs in wt.symbols){var yh=wt.symbols[Bs];yh.isComposite()?yh.clone().distributeMultiplier().coeffs(Ge,An):An?Ge[yh.isConstant()?0:yh.power.toDecimal()]=yh.multiplier:Ge.push(yh.multiplier)}else if(An)Ge[wt.isConstant(!0)?0:wt.power.toDecimal()]=wt.multiplier;else if(wt.group===A&&wt.isImaginary()){var df=new qe(wt.multiplier);wt.each(function(_h){(_h.isConstant(!0)||_h.imaginary)&&(df=s.multiply(df,_h))}),Ge.push(df)}else Ge.push(wt.multiplier);if(An)for(var Fc=0;Fc<Ge.length;Fc++)Ge[Fc]===void 0&&(Ge[Fc]=new qe(0));return Ge},qe.prototype.tBase=function(Ge){if(typeof Ge>"u")throw new Error("Symbol.tBase requires a map object!");for(var An=[],wt=this.collectSymbols(null,null,null,!0),Bs=wt.length,yh=0;yh<Bs;yh++){var df=wt[yh],Fc=df.group,_h=new eh(df.multiplier,[],Ge);if(Fc===A)for(var qc in df.symbols){var Mh=df.symbols[qc];_h.terms[Ge[qc]]=Mh.power}else _h.terms[Ge[df.value]]=df.power;An.push(_h.fill()),_h.updateCount()}return An},qe.prototype.altVar=function(Ge){var An=this.multiplier.toString(),wt=this.power.toString();return(An==="1"?"":An+"*")+Ge+(wt==="1"?"":"^"+wt)},qe.prototype.sameVars=function(Ge){if(!(this.symbols||this.group===Ge.group))return!1;for(var An in this.symbols){var wt=this.symbols[An],Bs=Ge.symbols[An];if(!Bs||wt.value!==Bs.value)return!1}return!0},qe.prototype.groupTerms=function(Ge){Ge=String(Ge);var An,wt,Bs,yh=[];return this.each(function(df){if(df.group===m){Bs=df.groupTerms(Ge);for(var Fc=0;Fc<Bs.length;Fc++){var _h=Bs[Fc];_h&&(yh[Fc]=_h)}}else An=a.Utils.decompose_fn(df,Ge,!0),wt=An.x.value===Ge?Number(An.x.power):0,yh[wt]=s.add(yh[wt]||new qe(0),An.a)}),yh},qe.prototype.collectFactors=function(){var Ge=[];return this.group===A?this.each(function(An){Ge.push(An.clone())}):Ge.push(this.clone()),Ge};function Do(){this.factors={},this.length=0}Do.prototype.getNumberSymbolics=function(){var Ge=0;return this.each(function(An){An.isConstant(!0)||Ge++}),Ge},Do.prototype.add=function(Ge){if(Ge.equals(0))return this;if(Ge.equals(-1)&&this.length>0){var An=a.Utils.firstObject(this.factors,null,!0);return this.add(s.symfunction(a.Settings.PARENTHESIS,[An.obj]).negate()),delete this.factors[An.key],this.length--,this}if(Ge.group===A){var wt=this;Ge.multiplier.equals(1)||wt.add(new qe(Ge.multiplier)),Ge.each(function(df){wt.add(df)})}else{this.preAdd&&(Ge=this.preAdd(Ge)),this.pFactor&&(Ge=s.pow(Ge,new qe(this.pFactor)));var Bs=Ge.isConstant();if(Bs&&Ge.equals(1))return this;var yh=Bs?Ge.value:Ge.text();yh in this.factors?(this.factors[yh]=s.multiply(this.factors[yh],Ge),this.factors[yh].equals(1)&&(delete this.factors[yh],this.length--)):(this.factors[yh]=Ge,this.length++)}return this},Do.prototype.toSymbol=function(){for(var Ge=new qe(1),An=Object.values(this.factors).sort(function(Fc,_h){return Fc.group>_h.group}),wt=0,Bs=An.length;wt<Bs;wt++){var yh=An[wt],df=yh.power.equals(1)&&yh.fname!==""?s.symfunction(a.PARENTHESIS,[yh]):yh;Ge=s.multiply(Ge,df)}return Ge.fname===""&&(Ge=qe.unwrapPARENS(Ge)),Ge},Do.prototype.merge=function(Ge){for(var An in Ge)An in this.factors?this.factors[An]=s.multiply(this.factors[An],Ge[An]):this.factors[An]=Ge[An];return this},Do.prototype.each=function(Ge){for(var An in this.factors){var wt=this.factors[An];wt.fname===a.PARENTHESIS&&wt.isLinear()&&(wt=wt.args[0]),Ge.call(this,wt,An)}return this},Do.prototype.count=function(){return P(this.factors).length},Do.prototype.clean=function(){try{var Ge=a.Settings.CONST_HASH;this.factors[Ge].lessThan(0)&&(this.factors[Ge].equals(-1)?delete this.factors[Ge]:this.factors[Ge].negate(),this.each(function(An){An.negate()}))}catch{}},Do.prototype.toString=function(){return this.toSymbol().toString()};function eh(Ge,An,wt){this.terms=An||[],this.coeff=Ge,this.map=wt,this.sum=new a.Frac(0),this.image=void 0}eh.prototype.updateCount=function(){this.count=this.count||0;for(var Ge=0;Ge<this.terms.length;Ge++)this.terms[Ge].equals(0)||this.count++;return this},eh.prototype.getVars=function(){for(var Ge=[],An=0;An<this.terms.length;An++){var wt=this.terms[An];this.getRevMap(),wt.equals(0)||Ge.push(this.rev_map[An])}return Ge.join(" ")},eh.prototype.len=function(){return typeof this.count>"u"&&this.updateCount(),this.count},eh.prototype.toSymbol=function(Ge){Ge=Ge||this.getRevMap();for(var An=new qe(this.coeff),wt=0;wt<this.terms.length;wt++){var Bs=Ge[wt],yh=this.terms[wt];if(!(yh.equals(0)||Bs===Rs)){var df=new qe(Bs);df.power=yh,An=s.multiply(An,df)}}return An},eh.prototype.getRevMap=function(){if(this.rev_map)return this.rev_map;var Ge={};for(var An in this.map)Ge[this.map[An]]=An;return this.rev_map=Ge,Ge},eh.prototype.generateImage=function(){return this.image=this.terms.join(" "),this},eh.prototype.getImg=function(){return this.image||this.generateImage(),this.image},eh.prototype.fill=function(){for(var Ge=this.map.length,An=0;An<Ge;An++)typeof this.terms[An]>"u"?this.terms[An]=new a.Frac(0):this.sum=this.sum.add(this.terms[An]);return this},eh.prototype.divide=function(Ge){for(var An=this.coeff.divide(Ge.coeff),wt=this.terms.length,Bs=new eh(An,[],this.map),yh=0;yh<wt;yh++)Bs.terms[yh]=this.terms[yh].subtract(Ge.terms[yh]),Bs.sum=Bs.sum.add(Bs.terms[yh]);return Bs},eh.prototype.multiply=function(Ge){for(var An=this.coeff.multiply(Ge.coeff),wt=this.terms.length,Bs=new eh(An,[],this.map),yh=0;yh<wt;yh++)Bs.terms[yh]=this.terms[yh].add(Ge.terms[yh]),Bs.sum=Bs.sum.add(Bs.terms[yh]);return Bs},eh.prototype.isZero=function(){return this.coeff.equals(0)},eh.prototype.toString=function(){return"{ coeff: "+this.coeff.toString()+", terms: ["+this.terms.join(",")+"]: sum: "+this.sum.toString()+", count: "+this.count+"}"},a.Utils.toMapObj=function(Ge){for(var An=0,wt={},Bs=0;Bs<Ge.length;Bs++){var yh=Ge[Bs];typeof wt[yh]>"u"&&(wt[yh]=An,An++)}return wt.length=An,wt},a.Utils.filledArray=function(Ge,An,wt){for(var Bs=[];An--;)Bs[An]=wt?new wt(Ge):Ge;return Bs},a.Utils.arrSum=function(Ge){for(var An=0,wt=Ge.length,Bs=0;Bs<wt;Bs++)An+=Ge[Bs];return An},a.Utils.haveIntersection=function(Ge,An){var wt;return An.length>Ge.length&&(wt=An,An=Ge,Ge=wt),Ge.some(function(Bs){return An.indexOf(Bs)>-1})},a.Utils.subFunctions=function(Ge,An){An=An||{};var wt=[];return Ge.each(function(Bs){if(Bs.group===d||Bs.previousGroup===d){var yh=a.Utils.text(Bs,"hash"),df=An[yh];if(df)wt.push(Bs.altVar(df));else{var Fc=Bs.fname+P(An).length;An[yh]=Fc,wt.push(Bs.altVar(Fc))}}else Bs.group===A||Bs.group===m||Bs.group===g?wt.push(a.Utils.subFunctions(Bs,An)):wt.push(Bs.text())}),Ge.group===g||Ge.group===m?Ge.altVar(a.Utils.inBrackets(wt.join("+"))):Ge.group===A?Ge.altVar(a.Utils.inBrackets(wt.join("*"))):Ge.text()},a.Utils.getFunctionsSubs=function(Ge){var An={};for(var wt in Ge)An[Ge[wt]]=s.parse(wt);return An};var Ko=a.Algebra={version:"1.4.6",proots:function(Ge,An){An=An||7;var wt=0,Bs=[],yh=function(q1,U1,M2){for(var x2=_2(q1,U1,M2).concat(Bs),p1=0;p1<wt;p1++)x2.unshift(0);return x2};if(Ge instanceof qe&&Ge.isPoly()){if(Ge.distributeMultiplier(),Ge.group===m){var df=a.Utils.arrayMin(P(Ge.symbols)),Fc=Ge.symbols[df].clone().toUnitMultiplier();Ge=s.expand(s.divide(Ge,Fc)),Bs.push(0)}if(Ge.group===a.groups.S)return[0];if(Ge.group===a.groups.PL)var mf=P(Ge.symbols),_h=a.Utils.arrayMin(mf),Ge=a.PARSER.divide(Ge,a.PARSER.parse(Ge.value+"^"+_h));for(var qc=P(Ge.symbols).sort().pop(),Mh=Ge.group===a.groups.PL?Ge.symbols:Ge.symbols[qc],cf=Mh.group,mf=cf===u?[Mh.power.toDecimal()]:P(Mh.symbols),a1=[],s1=a.Utils.arrayMax(mf),E1=1;E1<=s1;E1++){var T1=0;mf.indexOf(E1+"")!==-1&&(cf===u?T1=Mh.multiplier:T1=Mh.symbols[E1].multiplier),a1.unshift(T1)}return a1.push(Ge.symbols[Rs].multiplier),Mh.group===u&&(a1[0]=Mh.multiplier),yh(a1,mf,s1)}else if(a.Utils.isArray(Ge)){for(var z1=Ge,a1=[],mf=[],W1=0,E1=0;E1<z1.length;E1++){for(var m2=z1[E1][0],C2=z1[E1][1],A2=C2-W1-1,b2=0;b2<A2;b2++)a1.unshift(0);a1.unshift(m2),C2!==0&&mf.push(C2),W1=C2}var s1=Math.max.apply(void 0,mf);return yh(a1,mf,s1)}else throw new a.exceptions.NerdamerTypeError("Cannot calculate roots. Symbol must be a polynomial!");function _2(q1,U1,M2){var x2=100,p1=q1.slice(0);if(q1.unshift(M2),M2>x2)throw new a.exceptions.ValueLimitExceededError("This utility accepts polynomials of degree up to "+x2+". ");var S1=[],D1={};for(D1.Degree=M2,E1=0;E1<M2;E1++)S1.push(0);var _1=S1.slice(0);function B1(f2,Y1,l2,Q1,G1,P2){G1[0]=P2.b=Q1[0],G1[1]=P2.a=-(Y1*P2.b)+Q1[1];for(var J1=2;J1<f2;J1++)G1[J1]=-(Y1*P2.a+l2*P2.b)+Q1[J1],P2.b=P2.a,P2.a=G1[J1]}function c2(f2,Y1,l2,Q1,G1,P2,J1,v2,z2){var q2=new Object,j2=3;return q2.b=q2.a=0,B1(Y1,J1,v2,P2,z2,q2),G1.c=q2.a,G1.d=q2.b,Math.abs(G1.c)<=100*f2*Math.abs(P2[Y1-1])&&Math.abs(G1.d)<=100*f2*Math.abs(P2[Y1-2])||(G1.h=v2*Q1,Math.abs(G1.d)>=Math.abs(G1.c)?(j2=2,G1.e=l2/G1.d,G1.f=G1.c/G1.d,G1.g=J1*Q1,G1.a3=G1.e*(G1.g+l2)+G1.h*(Q1/G1.d),G1.a1=-l2+G1.f*Q1,G1.a7=G1.h+(G1.f+J1)*l2):(j2=1,G1.e=l2/G1.c,G1.f=G1.d/G1.c,G1.g=G1.e*J1,G1.a3=G1.e*l2+(G1.g+G1.h/G1.c)*Q1,G1.a1=-(l2*(G1.d/G1.c))+Q1,G1.a7=G1.g*G1.d+G1.h*G1.f+l2)),j2}function H1(f2,Y1,l2,Q1,G1,P2,J1,v2,z2){var q2;if(l2==3){J1[1]=J1[0]=0;for(var j2=2;j2<Y1;j2++)J1[j2]=v2[j2-2];return}if(q2=l2==1?G1:Q1,Math.abs(P2.a1)>10*f2*Math.abs(q2)){P2.a7/=P2.a1,P2.a3/=P2.a1,J1[0]=z2[0],J1[1]=-(z2[0]*P2.a7)+z2[1];for(var j2=2;j2<Y1;j2++)J1[j2]=-(z2[j2-1]*P2.a7)+v2[j2-2]*P2.a3+z2[j2]}else{J1[0]=0,J1[1]=-(z2[0]*P2.a7);for(var j2=2;j2<Y1;j2++)J1[j2]=-(z2[j2-1]*P2.a7)+v2[j2-2]*P2.a3}}function x1(f2,Y1,l2,Q1,G1,P2,J1,v2,z2,q2,j2,n4,X2,b1,k1,V1,n2){var y2,Z1,T2,L2,uf,Qp,gf,Ym,d1;Y1.b=Y1.a=0,f2!=3&&(f2!=2?(y2=l2+X2*J1+n4*q2,Z1=v2+(X2+b1*q2)*z2):(y2=(l2+j2)*q2+n4,Z1=(q2+X2)*v2+b1*z2),T2=-(k1[V1-1]/n2[V1]),L2=-(k1[V1-2]+T2*n2[V1-1])/n2[V1],uf=b1*L2*Q1,Qp=T2*P2,gf=T2*T2*G1,Ym=-(Qp+gf)+uf,d1=-Ym+Z1+T2*y2,d1!=0&&(Y1.a=-((X2*(gf+Qp)+b1*(T2*Q1+L2*P2))/d1)+X2,Y1.b=b1*(1+Ym/d1)))}function pf(f2,Y1,l2,Q1){var G1,P2,J1;if(Q1.sr=Q1.si=Q1.lr=Q1.li=0,f2==0){Q1.sr=Y1!=0?-(l2/Y1):Q1.sr;return}if(l2==0){Q1.lr=-(Y1/f2);return}G1=Y1/2,Math.abs(G1)<Math.abs(l2)?(J1=l2>=0?f2:-f2,J1=-J1+G1*(G1/Math.abs(l2)),P2=Math.sqrt(Math.abs(J1))*Math.sqrt(Math.abs(l2))):(J1=-(f2/G1*(l2/G1))+1,P2=Math.sqrt(Math.abs(J1))*Math.abs(G1)),J1>=0?(P2=G1>=0?-P2:P2,Q1.lr=(-G1+P2)/f2,Q1.sr=Q1.lr!=0?l2/Q1.lr/f2:Q1.sr):(Q1.lr=Q1.sr=-(G1/f2),Q1.si=Math.abs(P2/f2),Q1.li=-Q1.si)}function o1(f2,Y1,l2,Q1,G1,P2,J1,v2,z2,q2,j2,n4){var X2=new Object,b1,k1,V1,n2,y2,Z1,T2,L2,uf,Qp,gf,Ym=0,d1,r1=0;l2.NZ=0,Z1=Q1,L2=G1;do{if(X2.li=X2.lr=X2.si=X2.sr=0,pf(1,Z1,L2,X2),l2.szr=X2.sr,l2.szi=X2.si,l2.lzr=X2.lr,l2.lzi=X2.li,Math.abs(Math.abs(l2.szr)-Math.abs(l2.lzr))>.01*Math.abs(l2.lzr))break;for(B1(J1,Z1,L2,z2,P2,v2),k1=Math.abs(-(l2.szr*v2.b)+v2.a)+Math.abs(l2.szi*v2.b),Qp=Math.sqrt(Math.abs(L2)),b1=2*Math.abs(P2[0]),y2=-(l2.szr*v2.b),gf=1;gf<Y1;gf++)b1=b1*Qp+Math.abs(P2[gf]);if(b1=b1*Qp+Math.abs(y2+v2.a),b1=(9*b1+2*Math.abs(y2)-7*(Math.abs(v2.a+y2)+Qp*Math.abs(v2.b)))*f2,k1<=20*b1){l2.NZ=2;break}if(Ym++,Ym>20)break;if(Ym>=2&&n2<=.01&&k1>=V1&&!r1){for(n2=n2<f2?Math.sqrt(f2):Math.sqrt(n2),Z1-=Z1*n2,L2+=L2*n2,B1(J1,Z1,L2,z2,P2,v2),gf=0;gf<5;gf++)d1=c2(f2,Y1,v2.a,v2.b,j2,n4,Z1,L2,q2),H1(f2,Y1,d1,v2.a,v2.b,j2,n4,q2,P2);r1=1,Ym=0}V1=k1,d1=c2(f2,Y1,v2.a,v2.b,j2,n4,Z1,L2,q2),H1(f2,Y1,d1,v2.a,v2.b,j2,n4,q2,P2),d1=c2(f2,Y1,v2.a,v2.b,j2,n4,Z1,L2,q2),x1(d1,v2,v2.a,j2.a1,j2.a3,j2.a7,v2.b,j2.c,j2.d,j2.f,j2.g,j2.h,Z1,L2,n4,Y1,z2),T2=v2.a,uf=v2.b,uf!=0&&(n2=Math.abs((-L2+uf)/uf),Z1=T2,L2=uf)}while(uf!=0)}function e1(f2,Y1,l2,Q1,G1,P2,J1,v2,z2){var q2,j2,n4,X2,b1,k1,V1,n2,y2,Z1,T2,L2=Q1-1;for(Y1.NZ=T2=y2=0,V1=l2.a;;){for(k1=G1[0],J1[0]=k1,Z1=1;Z1<P2;Z1++)J1[Z1]=k1=k1*V1+G1[Z1];for(n4=Math.abs(k1),X2=Math.abs(V1),q2=.5*Math.abs(J1[0]),Z1=1;Z1<P2;Z1++)q2=q2*X2+Math.abs(J1[Z1]);if(n4<=20*f2*(2*q2-n4)){Y1.NZ=1,Y1.szr=V1,Y1.szi=0;break}if(T2++,T2>10)break;if(T2>=2&&Math.abs(n2)<=.001*Math.abs(-n2+V1)&&n4>b1){y2=1,Y1.a=V1;break}for(b1=n4,z2[0]=j2=v2[0],Z1=1;Z1<Q1;Z1++)z2[Z1]=j2=j2*V1+v2[Z1];if(Math.abs(j2)>Math.abs(v2[L2])*10*f2)for(n2=-(k1/j2),v2[0]=J1[0],Z1=1;Z1<Q1;Z1++)v2[Z1]=n2*z2[Z1-1]+J1[Z1];else for(v2[0]=0,Z1=1;Z1<Q1;Z1++)v2[Z1]=z2[Z1-1];for(j2=v2[0],Z1=1;Z1<Q1;Z1++)j2=j2*V1+v2[Z1];n2=Math.abs(j2)>Math.abs(v2[L2])*10*f2?-(k1/j2):0,V1+=n2}return y2}function w1(f2,Y1,l2,Q1,G1,P2,J1,v2,z2,q2,j2,n4){var X2=new Object,b1=new Object,k1=new Array(Y1),V1=new Array(Y1),n2,y2,Z1,T2,L2,uf,Qp,gf,Ym,d1,r1,g1,R1,M1,L1,O1,a2,S2,U2,H2=1,$2,r4,P4,A4,Y2,B2;for(n4.NZ=0,T2=Z1=.25,L2=Q1,gf=G1,X2.b=X2.a=0,B1(z2,j2,G1,v2,q2,X2),n2=X2.a,y2=X2.b,b1.h=b1.g=b1.f=b1.e=b1.d=b1.c=b1.a7=b1.a3=b1.a1=0,A4=c2(f2,J1,n2,y2,b1,P2,j2,G1,k1),$2=0;$2<l2;$2++){if(S2=1,H1(f2,J1,A4,n2,y2,b1,P2,k1,q2),A4=c2(f2,J1,n2,y2,b1,P2,j2,G1,k1),x1(A4,X2,n2,b1.a1,b1.a3,b1.a7,y2,b1.c,b1.d,b1.f,b1.g,b1.h,j2,G1,P2,J1,v2),L1=X2.a,a2=O1=X2.b,d1=P2[J1-1]!=0?-(v2[J1]/P2[J1-1]):0,r1=R1=1,$2!=0&&A4!=3&&(R1=a2!=0?Math.abs((a2-gf)/a2):R1,r1=d1!=0?Math.abs((d1-L2)/d1):r1,M1=R1<Qp?R1*Qp:1,g1=r1<uf?r1*uf:1,Y2=M1<T2?1:0,r4=g1<Z1?1:0,r4||Y2)){for(U2=0;U2<J1;U2++)V1[U2]=P2[U2];for(Ym=d1,P4=B2=0;;){if(!(S2&&(S2=0)==0&&r4&&(!Y2||g1<M1))){if(o1(f2,J1,n4,L1,O1,q2,z2,X2,v2,k1,b1,P2),n2=X2.a,y2=X2.b,n4.NZ>0)return;if(H2=B2=1,T2*=.25,P4||!r4)H2=0;else for(U2=0;U2<J1;U2++)P2[U2]=V1[U2]}if(H2!=0){if(X2.a=Ym,H2=e1(f2,n4,X2,J1,v2,z2,q2,P2,k1),Ym=X2.a,n4.NZ>0)return;if(P4=1,Z1*=.25,H2!=0){L1=-(Ym+Ym),O1=Ym*Ym;continue}}for(U2=0;U2<J1;U2++)P2[U2]=V1[U2];if(!Y2||B2)break}B1(z2,j2,G1,v2,q2,X2),n2=X2.a,y2=X2.b,A4=c2(f2,J1,n2,y2,b1,P2,j2,G1,k1)}gf=a2,L2=d1,Qp=R1,uf=r1}}function C1(f2,Y1,l2,Q1){var G1=f2.Degree,P2=3.141592653589793/180,J1=Math.LN2,v2=f2.Degree+1,z2=new Array(v2),q2=new Array(v2),j2=new Array(v2),n4=new Array(v2),X2=new Object,b1=new Object,k1,V1,n2,y2,Z1,T2,L2,uf,Qp,gf,Ym,d1,r1,g1,R1,M1,L1,O1,a2,S2,U2,H2,$2,r4;d1=1;do V1=d1,d1/=2,r1=1+d1;while(r1>1);var P4=Number.MIN_VALUE/V1,A4=Math.cos(94*P2),Y2=Math.sin(94*P2),B2=Math.sqrt(.5),d4=-B2;for(b1.NZ=a2=0,b1.szr=b1.szi=b1.lzr=b1.lzi=0;Y1[G1]==0;)l2[a2]=Q1[a2]=0,G1--,a2++;for($2=G1+1;G1>=1;){if(G1<=2){G1<2?(l2[f2.Degree-1]=-(Y1[1]/Y1[0]),Q1[f2.Degree-1]=0):(X2.li=X2.lr=X2.si=X2.sr=0,pf(Y1[0],Y1[1],Y1[2],X2),l2[f2.Degree-2]=X2.sr,Q1[f2.Degree-2]=X2.si,l2[f2.Degree-1]=X2.lr,Q1[f2.Degree-1]=X2.li);break}for(L2=0,uf=Number.MAX_VALUE,Z2=0;Z2<$2;Z2++)gf=Math.abs(Y1[Z2]),gf>L2&&(L2=gf),gf!=0&&gf<uf&&(uf=gf);if(Qp=P4/uf,(Qp<=1&&L2>=10||Qp>1&&Number.MAX_VALUE/Qp>=L2)&&(Qp=Qp==0?Number.MIN_VALUE:Qp,U2=Math.floor(Math.log(Qp)/J1+.5),Z1=Math.pow(2,U2),Z1!=1))for(Z2=0;Z2<$2;Z2++)Y1[Z2]*=Z1;for(var Z2=0;Z2<$2;Z2++)q2[Z2]=Math.abs(Y1[Z2]);q2[G1]=-q2[G1],H2=G1-1,gf=Math.exp((Math.log(-q2[G1])-Math.log(q2[0]))/G1),q2[H2]!=0&&(Ym=-q2[G1]/q2[H2],gf=Ym<gf?Ym:gf),Ym=gf;do{gf=Ym,Ym=.1*gf,T2=q2[0];for(var Z2=1;Z2<$2;Z2++)T2=T2*Ym+q2[Z2]}while(T2>0);y2=gf;do{n2=T2=q2[0];for(var Z2=1;Z2<G1;Z2++)T2=gf*T2+q2[Z2],n2=gf*n2+T2;T2=gf*T2+q2[G1],y2=T2/n2,gf-=y2}while(Math.abs(y2/gf)>.005);k1=gf;for(var Z2=1;Z2<G1;Z2++)z2[Z2]=(G1-Z2)*Y1[Z2]/G1;for(z2[0]=Y1[0],d1=Y1[G1],r1=Y1[H2],r4=z2[H2]==0?1:0,S2=0;S2<5;S2++)if(g1=z2[H2],r4){for(var Z2=0;Z2<H2;Z2++)a2=H2-Z2,z2[a2]=z2[a2-1];z2[0]=0,r4=z2[H2]==0?1:0}else{M1=-d1/g1;for(var Z2=0;Z2<H2;Z2++)a2=H2-Z2,z2[a2]=M1*z2[a2-1]+Y1[a2];z2[0]=Y1[0],r4=Math.abs(z2[H2])<=Math.abs(r1)*V1*10?1:0}for(var Z2=0;Z2<G1;Z2++)n4[Z2]=z2[Z2];for(S2=1;S2<=20;S2++)if(O1=-(Y2*d4)+A4*B2,d4=Y2*B2+A4*d4,B2=O1,R1=k1*B2,L1=-(2*R1),w1(V1,v2,20*S2,R1,k1,z2,G1,Y1,$2,j2,L1,b1),b1.NZ!=0){a2=f2.Degree-G1,l2[a2]=b1.szr,Q1[a2]=b1.szi,$2=$2-b1.NZ,G1=$2-1;for(var Z2=0;Z2<$2;Z2++)Y1[Z2]=j2[Z2];b1.NZ!=1&&(l2[a2+1]=b1.lzr,Q1[a2+1]=b1.lzi);break}else for(var Z2=0;Z2<G1;Z2++)z2[Z2]=n4[Z2];if(S2>20){f2.Degree-=G1;break}}}C1(D1,p1,_1,S1);var F1=S1.length;for(E1=0;E1<F1;E1++){var N1=He(S1[E1],An+8),v1=He(_1[E1],An+8);v1=An-String(v1).length>2?v1:_1[E1];var X1=N1<0?"-":"";v1===0&&(v1=""),N1===0&&(N1=""),N1=Math.abs(N1)===1?X1+"i":N1?N1+"*i":"";var i2=v1&&N1?v1+"+"+N1:v1+N1;_1[E1]=i2.replace(/\+\-/g,"-")}return _1}},roots:function(Ge){if(Ge.isConstant(!0,!0))return a.Utils.nroots(Ge);var An=Ko.proots(Ge).map(function(wt){return s.parse(wt)});return a.Vector.fromArray(An)},froot:function(Ge,An,wt){var Bs=function(yh){for(var df=1e-12,Fc=wt||a.Utils.build(a.Calculus.diff(Ge.clone())),_h=Ge instanceof Function?Ge:a.Utils.build(Ge),qc=1e4,Mh=!1,cf=0;!Mh;){var mf=yh-_h(yh)/Fc(yh),a1=Math.abs(mf)-Math.abs(yh),s1=Math.abs(a1);yh=mf,s1<df?Mh=!0:cf>qc&&(yh=null,Mh=!0),cf++}return yh};return Bs(Number(An))},quad:function(Ge,An,wt){var Bs=function(yh,df,Fc,_h){return s.parse("-("+df+"+"+_h+"*sqrt(("+df+")^2-4*("+yh+")*("+Fc+")))/(2*"+yh+")")};return[Bs(Ge,An,wt,1),Bs(Ge,An,wt,-1)]},sumProd:function(Ge,An){return Ko.quad(-An,Ge,-1).map(function(wt){return wt.invert()})},coeffs:function(Ge,An,wt){An=String(An),Ge=s.expand(Ge),wt=wt||[new qe(0)],Ge.group===c&&Ge.contains(An,!0)&&s.error("Unable to get coefficients using expression "+Ge.toString());var Bs=me(Ge);if(Bs.length===1&&Bs[0]===An&&!Ge.isImaginary())for(var yh=new So(Ge).coeffs.map(function(mf){return new qe(mf)}),df=0,Fc=yh.length;df<Fc;df++){var _h=yh[df],qc=wt[df];qc&&(_h=s.add(qc,_h)),wt[df]=_h}else if(An||s.error("Polynomial contains more than one variable. Please specify which variable is to be used!"),Bs.indexOf(An)===-1)wt[0]=s.add(Ge,wt[0]);else if(wt=wt||[new qe(0)],Ge.group===A){var Mh=Ge.symbols[An];Mh||s.error("Expression is not a polynomial!");var cf=Number(Mh.power);_h=s.divide(Ge.clone(),Mh.clone()),(_h.contains(An,!0)||cf<0||!Xe(cf))&&s.error("Expression is not a polynomial!");var qc=wt[cf];qc&&(_h=s.add(qc,_h)),wt[cf]=_h}else Ge.group===g&&Ge.each(function(mf){Ko.coeffs(mf.clone(),An,wt)},!0);for(var df=0,Fc=wt.length;df<Fc;df++)typeof wt[df]>"u"&&(wt[df]=new qe(0));return wt},polyPowers:function(Ge,An,wt){wt=wt||[];var Bs=Bs=Ge.group;if(Bs===m&&An===Ge.value)wt=wt.concat(P(Ge.symbols));else if(Bs===g)for(var yh in Ge.symbols){var df=Ge.symbols[yh],Bs=df.group,Fc=df.value;if(Bs===u&&An===Fc)wt.push(df.power);else if(Bs===m||Bs===g)wt=Ko.polyPowers(df,An,wt);else if(Bs===A&&df.contains(An)){var _h=df.symbols[An];_h&&wt.push(_h.power)}else(Bs===o||An!==Fc)&&wt.push(0)}else Bs===A&&Ge.contains(An)&&wt.push(a.Utils.decompose_fn(Ge,An,!0).x.power);return a.Utils.arrayUnique(wt).sort()},Factor:{split:function(Ge){var An=new qe(1),wt=new qe(1);return Ko.Factor.factor(Ge,new Do).each(function(Bs){var yh=s.parse(Bs);Bs.isConstant(!0)?An=s.multiply(An,yh):wt=s.multiply(wt,yh)}),[An,wt]},mix:function(Ge,An){for(var wt=P(Ge),Bs=wt.length,yh=[],df=0;df<Bs;df++){for(var Fc=wt[df],_h=Ge[Fc],qc=yh.length,Mh=0;Mh<qc;Mh++){var cf=yh[Mh]*Fc;yh.push(cf),An&&yh.push(-cf)}for(var Mh=1;Mh<=_h;Mh++)yh.push(Math.pow(Fc,Mh))}return yh},common:function(Ge,An){try{if(Ge.group===g){for(var wt=s.expand(Ge.clone(),!0).collectSymbols(null,null,function(cf,mf){return(mf.length||1)-(cf.length||1)}),Bs={},yh=[],df=0;df<wt.length;df++){var Fc=wt[df];yh.push(Fc.multiplier.clone()),Fc.each(function(cf){var mf=Number(cf.power);if(isNaN(mf))throw new Error("exiting");cf.value in Bs?(mf<Bs[cf.value][0]&&(Bs[cf.value][0]=mf),Bs[cf.value][1].push(cf)):Bs[cf.value]=[mf,[cf]]})}var _h=new qe(1);for(var qc in Bs)Bs[qc][1].length===wt.length&&(_h=s.multiply(_h,s.pow(new qe(qc),new qe(Bs[qc][0]))));var Mh=a.Math2.QGCD.apply(null,yh);if(!Mh.equals(1)){An.add(new qe(Mh));for(var df=0;df<wt.length;df++)wt[df].multiplier=wt[df].multiplier.divide(Mh)}if(!_h.equals(1)){An.add(_h),Ge=new qe(0);for(var df=0;df<wt.length;df++)Ge=s.add(Ge,s.divide(wt[df],_h.clone()))}}}catch{}return Ge},zeroes:function(Ge,An){var wt=function(){throw new a.exceptions.ValueLimitExceededError("Exiting")};try{var Bs,yh,df,Fc,_h;Ge=s.expand(Ge.clone()),_h=Ge.toString(),Bs=me(Ge),df=new qe(0);for(var qc=[],Mh=[],cf=0,mf=Bs.length;cf<Bs.length;cf++){for(var a1={},s1=0;s1<mf;s1++)cf!==s1&&(a1[Bs[s1]]=0);yh=s.parse(_h,a1);var E1=yh.power;Xe(E1)||wt(),qc.push(yh),Mh.push(yh.power)}if(a.Utils.allSame(Mh)){var T1=Ge.length,z1=qc.length;z1===2&&(Fc=new De(Mh[0]/(T1-1))),z1===3&&(Fc=new De(Mh[0]/Math.round((Math.sqrt(8*T1-1)-3)/2)))}else Fc=a.Math2.QGCD.apply(null,Mh);Xe(Fc)||wt();for(var cf=0;cf<qc.length;cf++){var W1=qc[cf],m2=W1.power.clone().divide(Fc);W1.multiplier=new De(Math.pow(W1.multiplier,1/m2)),W1.power=Fc.clone(),df=s.add(df,W1)}if(df.group!==g)return Ge;for(;;){var C2=Ko.div(Ge.clone(),df.clone());if(C2[1].equals(0)){if(Ge=C2[0],An.add(df.clone()),Ge.equals(1))break}else break}}catch{}return Ge},factor:function(Ge,An){if(Ge.isConstant())return a.Math2.factor(Ge);var wt=s.parse(Ge),Bs=Ko.Factor._factor(wt,An);if(Bs.equals(Ge))return Bs;if(Bs.group===A){var yh=new qe(1),df=s.parse(Bs.power),Fc=s.parse(Bs.multiplier);Bs.toUnitMultiplier(),Bs.multiplier.lessThan(0)&&(yh.negate(),Bs.negate()),Bs.each(function(_h){var qc=s.parse(Ko.Factor._factor(_h));qc.group===A?(Fc=s.multiply(Fc,qe.create(qc.multiplier)),qc.each(function(Mh){var cf=s.parse(Ko.Factor._factor(Mh));yh=s.multiply(yh,cf),cf.group===A&&(Fc=s.multiply(Fc,qe.create(cf.multiplier)))})):yh=s.multiply(yh,qc)}),Bs=s.pow(s.multiply(Fc,yh),df)}return Bs},quadFactor:function(Ge,An){if(Ge.isPoly()&&Ko.degree(Ge.equals(2))){var wt=a.Utils.variables(Ge)[0],Bs=Ko.coeffs(Ge,wt),yh=Ko.Factor._factor(Bs[2].clone());if(yh.group===A){var df=yh.collectSymbols();if(df.length>2)return Ge;var Fc=s.multiply(s.parse(Bs[0]),s.parse(df[0])),_h=s.parse(Bs[1]).negate(),qc=s.parse(df[1]),Mh=Ko.quad(qc,_h,Fc).filter(function(a1){if(a.Utils.isInt(a1))return a1});if(Mh.length===1){var cf=Mh[0],mf=s.divide(Bs[0],s.parse(cf));a.Utils.isInt(mf)&&(An.add(s.parse(ve("({0})*({1})+({2})",df[1],wt,mf))),An.add(s.parse(ve("({0})*({1})+({2})",df[0],wt,cf))),Ge=new qe(1))}}}return Ge},cubeFactor:function(Ge,An){if(Ge.isComposite()){var wt=Ge.collectSymbols();if(wt.length===2){var Bs=wt[0].sign(),yh=wt[0].clone().abs(),df=wt[1].sign(),Fc=wt[1].clone().abs();if(yh.isCube()&&Fc.isCube()){Bs<df&&([Bs,df]=[df,Bs],[yh,Fc]=[Fc,yh]);var _h=s.parse(yh.getNth(3)),qc=s.parse(Fc.getNth(3)),Mh=s.multiply(s.expand(s.pow(yh.clone().toUnitMultiplier(),s.parse("1/3"))),_h),cf=s.multiply(s.expand(s.pow(Fc.clone().toUnitMultiplier(),s.parse("1/3"))),qc);Bs===1&&df===-1?(An.add(s.parse(ve("(({0})-({1}))",Mh,cf))),An.add(s.parse(ve("(({0})^2+({0})*({1})+({1})^2)",Mh,cf))),Ge=qe(1)):Bs===1&&df===1&&(An.add(s.parse(ve("(({0})+({1}))",Mh,cf))),An.add(s.parse(ve("(({0})^2-({0})*({1})+({1})^2)",Mh,cf))),Ge=qe(1))}}}return Ge},_factor:function(Ge,An){if(Ge.group,Ge.group===d){var wt=Ge.args[0];if(wt.group===u&&wt.isSimple())return Ge}else if(Ge.group===u&&Ge.isSimple())return Ge;if(Ge.group===g){Ge.distributeMultiplier(!0);var Bs=new qe(0);Ge.each(function(_1){(_1.group===g&&_1.power.greaterThan(1)||_1.group===A)&&(_1=s.expand(_1)),Bs=s.add(Bs,_1)}),Bs.power=Ge.power,Ge=Bs}Ge.group===d&&Ge.fname!=="sqrt"&&(Ge=a.Utils.evaluate(Ge));var yh=Ge.clone();try{if(Ge.group===A){var T1=s.parse(Ge.power),df,Fc,_h,qc,Mh,cf;if(df=Ko.Simplify.strip(Ge.getDenom()),Fc=Ko.Simplify.strip(Ge.getNum()),_h=df.pop(),qc=Fc.pop(),qc.equals(Ge))return Ge;cf=Ko.Factor.factor(qc),Mh=Ko.Factor.factor(_h);var mf=Ko.Simplify.unstrip(Fc,cf),a1=Ko.Simplify.unstrip(df,Mh),s1=s.divide(mf,a1);return s1}if(Ge.group===u)return Ge;if(Ge.isConstant()){if(Ge.equals(1))return Ge.clone();var E1=a.Math2.factor(Ge);return E1}var T1=Ge.power.clone();if(Xe(T1)&&!(T1.lessThan(0)&&Ge.group===d)){var z1=T1.sign();Ge.toLinear(),An=An||new Do;var W1={};Ge=s.parse(a.Utils.subFunctions(Ge,W1)),P(W1).length>0&&(An.preAdd=function(B1){var c2=s.parse(B1,a.Utils.getFunctionsSubs(W1));return c2}),Ge.isLinear()||(An.pFactor=Ge.power.toString(),Ge.toLinear());var m2=me(Ge);Ge.isImaginary()&&m2.push(a.Settings.IMAGINARY);var C2=m2.length>1;if(C2){var A2=!0,b2=!0;if(Ge.each(function(B1){B1.group!==u&&(A2=!1),B1.multiplier.equals(1)||(b2=!1)}),A2&&b2)return s.pow(s.parse(Ge,a.Utils.getFunctionsSubs(W1)),s.parse(T1))}var _2=new Do;Ge=Ko.Factor.coeffFactor(Ge,_2),_2.each(function(B1){W(T1)&&B1.lessThan(0)&&B1.negate(),z1<0&&B1.invert(),An.add(B1)});var q1=new Do;if(Ge=Ko.Factor.powerFactor(Ge,q1),q1.each(function(B1){z1<0&&B1.invert(),An.add(B1)}),C2)Ge=Ko.Factor.cubeFactor(Ge,An),Ge=Ko.Factor.mfactor(Ge,An),An.each(function(B1){z1<0&&B1.power.negate()});else{var U1=m2[0];Ge=Ko.Factor.squareFree(Ge,An,U1);var M2=new Do;Ge=Ko.Factor.trialAndError(Ge,M2,U1);var x2=M2.toSymbol();if(x2.equals(yh))return x2;for(var p1 in M2.factors){var S1=M2.factors[p1];An.add(s.pow(S1,s.parse(T1)))}Ge.equals(yh)&&(Ge=Ko.Factor.quadFactor(Ge,An))}Ge=s.parse(Ge,a.Utils.getFunctionsSubs(W1));var D1=An.length===1;An.add(s.pow(Ge,s.parse(T1)));var s1=An.toSymbol();return D1&&Ge.equals(1)&&s1.isLinear()&&(s1=s.pow(s1,s.parse(T1))),s1}return Ge}catch{return yh}},reduce:function(Ge,An){if(Ge.group===g&&Ge.length===2){var wt=Ge.collectSymbols().sort(function(mf,a1){return a1.multiplier-mf.multiplier});if(wt[0].power.equals(wt[1].power)){var Bs=s.parse(wt[0].power),yh=wt[0].clone().toLinear(),df=wt[1].clone().toLinear();An.add(s.add(yh.clone(),df.clone())),df.negate();for(var Fc=Number(Bs),_h=new qe(0),qc=1;qc<=Fc;qc++){var Mh=s.pow(yh.clone(),s.subtract(Bs.clone(),new qe(qc))),cf=s.pow(df.clone(),s.subtract(new qe(qc),new qe(1)));_h=s.add(_h,s.multiply(Mh,cf))}return _h}}return Ge},squareFree:function(Ge,An,wt){if(Ge.isConstant()||Ge.group===u)return Ge;var Bs=new So(Ge,wt),yh=Bs.squareFree(),df=yh[2];if(df!==1){var Fc=yh[1].toSymbol();Fc.power=Fc.power.multiply(new De(df)),An.add(Ko.Factor.factor(Fc));var _h=Ko.Factor.squareFree(yh[0].toSymbol(),An);return _h}return Ge},powerFactor:function(Ge,An){if(Ge.group!==m||Ge.previousGroup===c)return Ge;var wt=P(Ge.symbols);if(!a.Utils.allNumeric(wt))return Ge;var Bs=a.Utils.arrayMin(wt),yh=new qe(0),df=s.parse(Ge.value+"^"+Bs);return Ge.each(function(Fc){Fc=s.divide(Fc,df.clone()),yh=s.add(yh,Fc)}),An.add(df),yh},coeffFactor:function(Ge,An){if(Ge.isComposite()){var wt=a.Math2.QGCD.apply(null,Ge.coeffs());if(!wt.equals(1))Ge.each(function(Fc){Fc.isComposite()?Fc.each(function(_h){_h.multiplier=_h.multiplier.divide(wt)}):Fc.multiplier=Fc.multiplier.divide(wt)}),Ge.updateHash();else{var Bs=function(Fc){var _h;return Fc.group===A?(_h=0,Fc.each(function(qc){_h+=qc.power})):_h=Number(Fc.power),_h},yh=Ge.collectSymbols(null,null,null,!0).sort(function(Fc,_h){return Fc.isConstant(!0)?1:_h.power-Fc.power}),df=yh[0];(Bs(df)>Bs(yh[1])||yh[1].isConstant(!0))&&df.multiplier.lessThan(0)&&(An.add(new qe(-1)),Ge.each(function(Fc){Fc.negate()},!0))}An&&An.add(new qe(wt))}return Ge},trialAndError:function(Ge,An,wt){var Bs=Ge.clone();try{var yh=[];if(Ge.isConstant()||Ge.group===u)return Ge;for(var df=new So(Ge,wt),Fc=df.coeffs[0],_h=a.Math2.ifactor(Fc),qc=Ko.proots(Ge),Mh=0;Mh<qc.length;Mh++){var cf=qc[Mh],mf=1;if(!isNaN(cf)){for(var a1 in _h){var s1=a.Utils.round(Math.log(a1)/Math.log(Math.abs(cf)),8);if(Xe(s1)){cf=a1,mf=s1;break}}var E1=new De(cf),T1=[new De(E1.num).negate()];T1[mf]=new De(E1.den);var z1=So.fromArray(T1,df.variable).fill(),W1=df.divide(z1);W1[1].equalsNumber(0)&&(df=W1[0],yh.push(z1.toSymbol()))}}return df.equalsNumber(1)||(df=Ko.Factor.search(df,An)),yh.forEach(function(m2){An.add(m2)}),df.toSymbol()}catch{return Bs}},search:function(Ge,An,wt){wt=wt||10;var Bs=Ge.variable,yh=function(C2,A2,b2,_2){var q1=So.fit(C2,A2,b2,wt,_2,Bs);if(q1&&q1.coeffs.length>1){var U1=Ge.divide(q1);if(U1[1].equalsNumber(0))return An.add(q1.toSymbol()),[U1[0],q1]}return null},df=Ge.coeffs[0],Fc=a.Math2.ifactor(df),_h=Ge.lc(),qc=a.Math2.ifactor(_h),Mh=Ge.sub(wt),cf=a.Math2.ifactor(Mh),mf=Ko.Factor.mix(cf,Mh<0),a1=Math.ceil(Ge.coeffs.length/2),s1=_h.lessThan(0),E1=df.lessThan(0);for(qc[1]=1,Fc[1]=1;a1--;)for(var T1 in qc)for(var z1 in Fc)for(var W1=0;W1<mf.length;W1++){var m2=yh(T1,z1,mf[W1],a1);if(m2)return Ge=m2[0],a.Utils.isPrime(Ge.sub(wt))||(Ge=Ko.Factor.search(Ge,An)),Ge;m2||(s1&&E1?m2=yh(-T1,-z1,mf[W1],a1):s1?m2=yh(-T1,z1,mf[W1],a1):E1&&(m2=yh(T1,-z1,mf[W1],a1)))}return Ge},mSqfrFactor:function(Ge,An){if(Ge.group!==d)for(var wt=me(Ge).reverse(),Bs=0;Bs<wt.length;Bs++)do{if(wt[Bs]===Ge.value){An.add(Ge),Ge=new qe(1);continue}var yh=a.Calculus.diff(Ge,wt[Bs]),df=Ko.Factor.coeffFactor(yh);if(df.equals(0))break;var Fc=!0;if(df.isConstant()&&Ge.isComposite()&&Ge.each(function(Mh){Mh.multiplier%df!==0&&(Fc=!1)},!0),Fc){var _h=Ko.div(Ge,df.clone()),qc=_h[1].equals(0);if(Ge.equals(_h[0])&&_h[1].equals(0))break;if(_h[0].isConstant()){An.add(_h[0]);break}}else qc=!1;qc&&(An.add(_h[0]),Ge=df)}while(qc);return Ge},sqdiff:function(Ge,An){if(Ge.isConstant("all"))return Ge;try{var wt=function(cf){return a.Utils.block("POSITIVE_MULTIPLIERS",function(){return qe.unwrapPARENS(Vc.sqrt(Vc.abs(cf)))},!0)},Bs=a.Utils.separate(Ge.clone()),yh=[];for(var df in Bs)df!=="constants"&&yh.push(Bs[df]);if(yh.sort(function(cf,mf){return mf.power-cf.power}),yh.length===2){var Fc,_h;if(Fc=yh.pop(),_h=yh.pop(),W(Fc.power)&&W(_h.power)&&Fc.sign()===_h.sign()&&Fc.group===u&&_h.group===u)throw new Error("Unable to factor");if(Fc.isComposite()&&_h.power.equals(2)){_h=wt(_h);var qc=Ko.Factor.factor(s.add(Fc,Bs.constants));qc.power.equals(2)&&(qc.toLinear(),An.add(s.subtract(qc.clone(),_h.clone())),An.add(s.add(qc,_h)),Ge=new qe(1))}else if(Fc=Fc.powSimp(),_h=_h.powSimp(),(Fc.group===u||Fc.fname==="")&&Fc.power.equals(2)&&(_h.group===u||_h.fname==="")&&_h.power.equals(2)&&!Bs.constants){if(Fc.multiplier.lessThan(0)){var Mh=_h;_h=Fc,Fc=Mh}Fc.multiplier.greaterThan(0)&&(Fc=wt(Fc),_h=wt(_h)),An.add(s.subtract(Fc.clone(),_h.clone())),An.add(s.add(Fc,_h)),Ge=new qe(1)}}}catch{}return Ge},mfactor:function(Ge,An){if(Ge.group===d)if(Ge.fname==="sqrt"){var wt=new Do,Bs=Ko.Factor.common(Ge.args[0].clone(),wt);Bs=Ko.Factor.coeffFactor(Bs,wt),Ge=s.multiply(s.symfunction("sqrt",[Bs]),s.parse(Ge.multiplier)),wt.each(function(M2){Ge=s.multiply(Ge,s.parse(a.Utils.format("sqrt({0})",M2)))})}else An.add(Ge);else{Ge=Ko.Factor.mSqfrFactor(Ge,An);for(var yh=me(Ge),df=Ge.collectSymbols().map(function(M2){return qe.unwrapSQRT(M2)}),Fc={},_h={},qc=yh.length,Mh=df.length,cf=0;cf<qc;cf++){var mf=yh[cf];Fc[mf]=new qe(0);for(var a1=0;a1<Mh;a1++){var s1=df[a1];if(s1.contains(mf)){var E1=s1.value===mf?s1.power.toDecimal():s1.symbols[mf].power.toDecimal();(!_h[mf]||E1<_h[mf])&&(_h[mf]=E1),Fc[mf]=s.add(Fc[mf],s1.clone())}}}for(var T1 in Fc){var z1=s.parse(T1+"^"+_h[T1]),W1=s.divide(Fc[T1],z1),m2=s.expand(W1);if(m2.equals(1))break;var C2=Ko.div(Ge.clone(),m2);if(C2[0].equals(0))break;if(C2[1].equals(0)){var A2=!1;if(C2[0].each(function(M2){Xe(M2.multiplier)||(A2=!0)}),A2){C2[1]=s.expand(s.multiply(C2[1],m2));break}}var b2=Xe(m2)&&m2.lessThan(0);if(C2[1].equals(0)&&!b2){var _2=Ko.div(Ge.clone(),C2[0].clone()),z1=_2[0];if(z1.equals(0)||(Ge=_2[1],z1.equals(-1)&&!Ge.equals(0)))return Ge;var q1=C2[0];if(Ge.equals(q1)){var U1=Ko.Factor.reduce(q1,An);return Ge.equals(U1)?U1:Ko.Factor.mfactor(U1,An)}else if(An.add(q1),Ge.equals(0))return z1;return z1.isConstant("all")?(An.add(z1),z1):Ko.Factor.mfactor(z1,An)}}}return Ge=Ko.Factor.sqdiff(Ge,An),Ge=Ko.Factor.zeroes(Ge,An),Ge}},allLinear:function(Ge){for(var An=Ge.length,wt=0;wt<An;wt++)if(!Ko.isLinear(Ge[wt]))return!1;return!0},isLinear:function(Ge){var An=!1,wt=Ge.group;if(wt===m||wt===g){An=!0;for(var Bs in Ge.symbols){var yh=Ge.symbols[Bs],df=yh.group;if((df===d||df===c)&&(An=!1),df===A)An=me(yh).length===1;else if(df===m||df===g)An=Ko.isLinear(yh);else if(yh.group!==o&&yh.power.toString()!=="1"){An=!1;break}}}else wt===u&&Ge.power===1&&(An=!0);return An},gcd:function(){var Ge;if(arguments.length===1&&arguments[0]instanceof a.Vector?Ge=arguments[0].elements:Ge=a.Utils.arguments2Array(arguments),Ge.length===0)return new qe(1);if(Ge.length===1)return Ge[0];for(var An=[],wt=!1,Bs=0;Bs<Ge.length;Bs++)if(Ge[Bs].group===d&&Ge[Bs].fname==="gcd")Ge=Ge.concat(arguments[Bs].args),Ge.splice(Bs,1);else{var yh=me(Ge[Bs]);if(a.Utils.haveIntersection(yh,An)){wt=!0;break}else An=An.concat(yh)}if(wt||An.length===0)if(Ge.every(function(Fc){return Fc.getDenom().equals(1)})){for(var df=Ge[0],Bs=1;Bs<Ge.length;Bs++)df=Ko.gcd_(Ge[Bs],df);return df}else return s.divide(Ko.gcd.apply(null,Ge.map(function(Fc){return Fc.getNum()})),Ko.lcm.apply(null,Ge.map(function(Fc){return Fc.getDenom()})));else return s.symfunction("gcd",Ge)},gcd_:function(Ge,An){if((Ge.group===d||Ge.group===l)&&(Ge=a.Utils.block("PARSE2NUMBER",function(){return s.parse(Ge)})),An.group===d&&(An=a.Utils.block("PARSE2NUMBER",function(){return s.parse(An)})),Ge.isConstant()&&An.isConstant())return new qe(a.Math2.QGCD(new De(+Ge),new De(+An)));var wt=s.multiply(Ge.getDenom()||new qe(1),An.getDenom()||new qe(1)).invert();if(Ge=s.multiply(Ge.clone(),wt.clone()),An=s.multiply(An.clone(),wt.clone()),Ge=s.expand(Ge),An=s.expand(An),Ge.group===A||An.group===A){var Bs=s.divide(Ge.clone(),An.clone()),yh=s.multiply(An.clone(),Bs.getDenom().invert());if(!yh.equals(1))return yh}if(Ge.group===c||An.group===c){var df=new qe(a.Math2.GCD(Ge.multiplier,An.multiplier)),Fc=Ko.gcd_(Ge.value===Rs?new qe(1):s.parse(Ge.value),An.value===Rs?new qe(1):s.parse(An.value)),_h=Ko.gcd_(s.parse(Ge.power),s.parse(An.power));return s.multiply(df,s.pow(Fc,_h))}if(Ge.length<An.length){var yh=Ge;Ge=An,An=yh}var qc=me(Ge),Mh=me(An);if(qc.length===Mh.length&&qc.length===1&&qc[0]===Mh[0]||qc.length===1&&Mh.length===0||qc.length===0&&Mh.length===1)return Ge=new So(Ge),An=new So(An),s.divide(Ge.gcd(An).toSymbol(),wt);var cf=[];Ge.each(function(s1){cf.push(s1.multiplier)}),An.each(function(s1){cf.push(s1.multiplier)});for(var mf;!An.equals(0);){var yh=An.clone();if(Ge=Ge.clone(),mf=Ko.div(Ge,yh),An=mf[1],mf[0].equals(0))return s.divide(new qe(a.Math2.QGCD(Ge.multiplier,An.multiplier)),wt);Ge=yh}var a1=a.Math2.QGCD.apply(void 0,cf);return a1.equals(1)||Ge.each(function(s1){s1.multiplier=s1.multiplier.divide(a1)}),Ge.equals(1)&&!Ge.isConstant()&&!An.isConstant()?s.divide(s.symfunction("gcd",arguments),wt):s.divide(Ge,wt)},lcm:function(){var Ge;arguments.length===1?arguments[0]instanceof a.Vector?Ge=arguments[0].elements:s.error("lcm expects either 1 vector or 2 or more arguments"):Ge=a.Utils.arguments2Array(arguments);var An=Ge.reduce(function(df,Fc){return s.multiply(df,Fc.clone())},new qe(1)),wt=function(df,Fc){Fc=Number(Fc);var _h=[],qc,Mh,cf,mf=Math.pow(2,df.length);for(Mh=Fc;Mh<mf;Mh++){qc=[],cf=df.length-1;do(Mh&1<<cf)!==0&&qc.push(df[cf]);while(cf--);qc.length===Fc&&_h.push(qc)}return _h}(arguments,arguments.length-1).map(function(df){return df.reduce(function(Fc,_h){return s.multiply(Fc,_h.clone())},new qe(1))}),Bs;Ge.every(function(df){return a.Utils.isVariableSymbol(df)})?Bs=s.symfunction("gcd",a.Utils.arrayUnique(wt)):Bs=Ko.gcd.apply(null,wt);var yh=s.divide(An,Bs);return yh},divide:function(Ge,An){var wt,Bs,yh,df;return yh=a.Algebra.Factor.factor(Ge.clone()),df=yh.getDenom(),df.isConstant("all")?df=new qe(1):Ge=s.expand(qe.unwrapPARENS(s.multiply(yh,df.clone()))),wt=Ko.div(Ge,An),Bs=s.divide(wt[1],An),s.divide(s.add(wt[0],Bs),df)},div:function(Ge,An){var wt=[new qe(0),Ge.clone()];try{if(An.isConstant("all"))return Ge.each(function(i2){i2.multiplier=i2.multiplier.divide(An.multiplier)}),[Ge,new qe(0)];if(Ge=s.expand(Ge),An=s.expand(An),Ge.group===u&&An.group===g){var Bs=Ge.value,yh=a.Utils.decompose_fn(An.clone(),Bs,!0);if(Ge.isLinear()&&yh.x&&yh.x.isLinear()&&An.isLinear()){var df=qe.create(Ge.multiplier);return[s.divide(df.clone(),yh.a.clone()),s.divide(s.multiply(df,yh.b),yh.a).negate()]}}if(Ge.group===u&&An.group===u){var Fc=s.divide(Ge.clone(),An.clone());return Fc.isConstant()?[Fc,new qe(0)]:[new qe(0),Ge.clone()]}var _h=Ge.hasFunc(),qc=An.hasFunc(),Mh=!1;if(_h||qc){Mh=!0;var cf={},Ge=s.parse(a.Utils.subFunctions(Ge,cf)),An=s.parse(a.Utils.subFunctions(An,cf)),mf=a.Utils.getFunctionsSubs(cf)}var a1=a.Utils.arrayUnique(me(Ge).concat(me(An))),s1,E1;if((Ge.isImaginary()||An.isImaginary())&&a1.push(a.Settings.IMAGINARY),a1.length===1){var T1=new So(Ge).divide(new So(An));s1=T1[0].toSymbol(),E1=T1[1].toSymbol()}else{a1.push(Rs);var z1=function(i2){for(var f2=new qe(0),Y1=0;Y1<i2.length;Y1++){var l2=i2[Y1].toSymbol();f2=s.add(f2,l2)}return f2},W1=function(i2,f2){var Y1=Math.max.apply(null,i2.terms),l2=0,Q1;if(!f2){for(var G1=0;G1<i2.terms.length;G1++)if(i2.terms[G1].equals(Y1)&&(Q1=G1,l2++),l2>1)return}if(f2){for(G1=0;G1<i2.terms.length;G1++)if(i2.terms[G1].equals(Y1)){Q1=G1;break}}return[Y1,Q1,i2]},m2=function(i2,f2){f2=f2||0;var Y1=i2[f2],l2=i2.length;if(Y1){for(var Q1=W1(Y1),G1=f2+1;G1<l2;G1++){var P2=i2[G1],J1=Y1.sum.equals(P2.sum);if(!J1&&Q1)break;if(J1){for(var v2,z2,q2,j2,n4=Y1.terms.length,X2=0;X2<n4;X2++){var b1=Y1.terms[X2],k1=P2.terms[X2];(typeof v2>"u"||b1.greaterThan(v2))&&(v2=b1,q2=X2),(typeof z2>"u"||k1.greaterThan(z2))&&(z2=k1,j2=X2)}var V1=v2.subtract(P2.terms[q2]),n2=z2.subtract(Y1.terms[j2]);if(n2>V1){Q1=[z2,j2,P2];break}if(V1>n2){Q1=[v2,q2,Y1];break}}else if(Q1=W1(P2),Q1)break;Q1=W1(P2)}if(!Q1)return W1(i2[0],!0);for(var y2,Z1,G1=0;G1<q1.length;G1++){var T2=q1[G1].terms;if(Z1=Q1[1],Z1===T2.length-1)return;if(y2=T2[Z1],!y2.equals(0))break}return y2.equals(0)?m2(i2,++f2):Q1}},C2=a.Utils.toMapObj(a1),A2=function(i2,f2){return f2.sum.subtract(i2.sum)},b2=function(i2,f2){if(!i2||!f2)return!1;for(var Y1=0;Y1<i2.terms.length;Y1++)if(i2.terms[Y1].lessThan(f2.terms[Y1]))return!1;return!0},_2=Ge.tBase(C2).sort(A2),q1=An.tBase(C2).sort(A2),U1=b2(_2[0],q1[0])&&_2[0].count>q1[0].count?q1:_2,M2=m2(U1),x2=[];if(M2){var p1=M2[1],S1=function(i2,f2){return i2[0].sum.equals(f2[0].sum)?i2.length>=f2.length:!0},D1=function(i2,f2,Y1){for(var l2=[],Q1=0;Q1<i2.length;Q1++)for(var G1=i2[Q1],P2=0;P2<G1.terms.length;P2++){var J1=l2[P2],v2=G1.terms[P2];Q1===0?l2[P2]=v2:J1&&!J1.equals(v2)&&(l2[P2]=void 0)}for(var Q1=0;Q1<l2.length;Q1++){var G1=l2[Q1];if(G1&&!G1.equals(0))return Q1}return Y1},_1=function(i2,f2){var Y1=i2.len(),l2=f2.len(),Q1=f2.terms[p1],G1=i2.terms[p1];return l2>Y1&&Q1.greaterThan(G1)?l2-Y1:Q1.subtract(G1)};p1=D1(_2,q1,p1),_2.sort(_1),q1.sort(_1);var B1=q1[0],c2=_2[0],H1=new eh(new De(1),[],c2.map);if(B1.sum.greaterThan(c2.sum)&&c2.len()>1)for(var x1=0;x1<c2.terms.length;x1++){var pf=B1.terms[x1].subtract(c2.terms[x1]);if(pf.equals(0))H1.terms[x1]=new De(0);else{var o1=pf.add(new De(1));H1.terms[x1]=pf;for(var e1=0;e1<_2.length;e1++)_2[e1].terms[x1]=_2[e1].terms[x1].add(o1)}}for(var w1=b2(_2[0],q1[0]),C1=0,F1=200;w1&&S1(_2,q1);){if(C1++>F1)throw new a.exceptions.InfiniteLoopError("Unable to compute!");var T1=_2[0].divide(q1[0]);x2.push(T1),_2.shift();for(var x1=1;x1<q1.length;x1++){var N1=q1[x1].multiply(T1).generateImage(),v1=_2.length;v1===0&&(N1.coeff=N1.coeff.neg(),_2.push(N1),_2.sort(_1));for(var e1=0;e1<v1;e1++){var X1=_2[e1];if(X1.getImg()===N1.getImg()){X1.coeff=X1.coeff.subtract(N1.coeff),X1.coeff.equals(0)&&(a.Utils.remove(_2,e1),e1--);break}e1===v1-1&&(N1.coeff=N1.coeff.neg(),_2.push(N1),_2.sort(_1))}}if(w1=b2(_2[0],q1[0]),!w1&&_2.length>=q1.length){for(var x1=1;x1<_2.length;x1++)if(w1=b2(_2[x1],q1[0]),w1){_2.unshift(a.Utils.remove(_2,x1));break}}}}s1=z1(x2),E1=z1(_2),typeof H1<"u"&&(H1=H1.toSymbol(),s1=s.divide(s1,H1.clone()),E1=s.divide(E1,H1))}return Mh&&(s1=s.parse(s1.text(),mf),E1=s.parse(E1.text(),mf)),[s1,E1]}catch{return wt}},line:function(Ge,An,wt){a.Utils.isArray(Ge)&&(Ge=a.Utils.convertToVector(Ge)),a.Utils.isArray(An)&&(An=a.Utils.convertToVector(An)),wt=s.parse(wt||"x"),(!a.Utils.isVector(Ge)||!a.Utils.isVector(An))&&s.error('Line expects a vector! Received "'+Ge+'" & "'+An+'"');var Bs=s.subtract(An.e(1).clone(),Ge.e(1).clone()),yh=s.subtract(An.e(2).clone(),Ge.e(2).clone()),df=s.divide(yh,Bs),Fc=s.multiply(wt,df.clone()),_h=s.multiply(Ge.e(1).clone(),df);return s.add(s.subtract(Fc,_h),Ge.e(2).clone())},PartFrac:{createTemplate:function(Ge,An,wt,Bs){Ge=Ko.Factor.factor(Ge),Ge.each(function(z1,W1){if(z1.group===d&&z1.fname===""&&z1.args[0].group===u){var m2=z1.args[0];this.symbols?(delete this.symbols[W1],this.symbols[m2.value]=m2):Ge=z1.args[0]}});var yh,df,Fc,_h,qc,Mh,cf;yh=An.collectFactors(),df=[],Mh=[],cf=new qe(1);for(var mf=0;mf<yh.length;mf++){var a1=qe.unwrapPARENS(yh[mf]);if(a1.power.greaterThan(1)){_h=Number(a1.power),Fc=a1.clone().toLinear(),qc=Number(Ko.degree(Fc,Bs));for(var s1=0;s1<_h;s1++){var E1=s.pow(Fc.clone(),new qe(s1+1));wt.push(E1.clone());var T1=s.divide(Ge.clone(),E1.clone());Mh.push(qc),df.push(T1)}}else{qc=Number(Ko.degree(a1,Bs)),wt.push(a1);var T1=s.divide(Ge.clone(),a1.clone());T1=s.expand(qe.unwrapPARENS(T1)),Mh.push(qc),df.push(T1)}}return wt=wt.map(function(z1){return s.multiply(z1,cf.clone())}),[wt,df,Mh]},partfrac:function(Ge,An,wt){var Bs=me(Ge);An=An||s.parse(Bs[0]);try{var yh,df,Fc,A2,_h,qc,Mh,cf,mf,a1,s1,E1,T1,z1,W1,m2,C2,A2;if(yh=s.expand(Ge.getNum()),df=s.expand(Ge.getDenom().toUnitMultiplier()),yh.multiplier=Ge.multiplier,qc=yh.groupTerms(An),Number(Ko.degree(yh,An))>=Number(Ko.degree(df,An))?(T1=Ko.div(yh.clone(),s.expand(df.clone())),z1=T1[0],yh=T1[1],qc=yh.groupTerms(An)):z1=new qe(0),Number(Ko.degree(df,An))===1){var b2=s.divide(yh,df);return wt?[z1,b2]:s.add(z1,b2)}_h=Ko.Factor.factor(df),C2=Ko.PartFrac.createTemplate(df.clone(),_h,[],An),A2=C2[0],W1=C2[1],Mh=C2[2],E1=[qc.length],cf=[],Fc=[],m2=[];var _2,q1;W1.map(function(_1,B1){_2=A2[B1],q1=Mh[B1];for(var c2=0;c2<q1;c2++){Fc.push(_2.clone());var H1=qe.create(An,c2),x1=s.expand(s.multiply(_1,H1.clone())).groupTerms(An),pf=x1.length;E1.push(pf),cf.push(x1),m2.push(H1.clone())}}),mf=a.Utils.arrayMax(E1),s1=new a.Matrix(a.Utils.fillHoles(qc,mf)).transpose(),a1=new a.Matrix;for(var U1=0;U1<cf.length;U1++)a1.elements.push(a.Utils.fillHoles(cf[U1],mf));var M2=s.multiply(a1.transpose().invert(),s1),x2=wt?[z1]:z1;return M2.each(function(_1,B1){var c2=s.multiply(m2[B1],s.divide(_1,Fc[B1]));wt?x2.push(c2):x2=s.add(x2,c2)}),x2}catch{try{if(Ge.isComposite()){var p1={};Ge.each(function(B1){var c2=B1.getDenom(),H1=B1.getNum(),x1=p1[c2];p1[c2]=x1?s.add(x1,H1):H1});var S1=new qe(0);for(var D1 in p1)S1=s.add(S1,s.divide(p1[D1],s.parse(D1)));Ge=S1}}catch{}}return Ge}},degree:function(Ge,An,wt){if(wt=wt||{nd:[],sd:[],depth:0},!An){var Bs=me(Ge);if(Bs.length>1)throw new Error("You must specify the variable for multivariate polynomials!");if(Bs.length===0)return new qe(0);An=s.parse(Bs[0])}var yh=Ge.group;Ge.isComposite()?(Ge=Ge.clone(),Ge.distributeExponent(),Ge.each(function(Fc){wt.depth++,Ko.degree(Fc,An,wt),wt.depth--})):Ge.group===A?Ge.each(function(Fc){wt.depth++,Ko.degree(Fc,An,wt),wt.depth++}):yh===c&&Ge.value===An.value?wt.sd.push(Ge.power.clone()):yh===u&&Ge.value===An.value?wt.nd.push(s.parse(Ge.power)):wt.nd.push(new qe(0));var df=wt.nd.length>0?a.Utils.arrayMax(wt.nd):void 0;return wt.depth===0&&wt.sd.length>0?(df!==void 0&&wt.sd.unshift(df),s.symfunction("max",wt.sd)):(a.Utils.isSymbol(df)||(df=s.parse(df)),df)},sqComplete:function(Ge,An,wt){a.Utils.isSymbol(An)||(An=s.parse(An));var Bs=function(T1){throw T1=T1||"Stopping",new a.exceptions.ValueLimitExceededError(T1)};Ge.isPoly(!0)||Bs("Must be a polynomial!");var yh,df,Fc,_h,qc,Mh,cf,mf,a1,s1,E1;return a1=a.Utils.inBrackets,Ge=Ge.clone(),yh=a.Algebra.degree(Ge,An),yh.equals(2)||Bs("Cannot complete square for degree "+yh),cf=a.Algebra.coeffs(Ge,An),df=cf[2],mf=cf[1].sign(),Fc=s.divide(cf[1],new qe(2)),_h=s.pow(Fc.clone(),new qe(2)),wt?[df,Fc,qc]:(E1=Vc.sqrt(df),Mh=s.divide(Vc.sqrt(_h),E1.clone()),qc=s.subtract(cf[0],s.pow(Mh.clone(),new qe(2))),s1=s.parse(a1(E1.clone()+"*"+An+(mf<0?"-":"+")+Mh)),{a:s1,c:qc,f:s.add(s.pow(s1.clone(),new qe(2)),qc.clone())})},Simplify:{strip:function(Ge){var An=s.parse(Ge.multiplier);Ge.toUnitMultiplier();var wt=s.parse(Ge.power);return Ge.toLinear(),[An,wt,Ge]},unstrip:function(Ge,An){var wt=Ge[0],Bs=Ge[1];return s.multiply(wt,s.pow(An,Bs))},complexSimp:function(Ge,An){var wt,Bs,yh,df,Fc,_h,qc,Mh,cf;return _h=Ge.realpart(),Mh=Ge.imagpart(),qc=An.realpart(),cf=An.imagpart(),wt=s.multiply(_h.clone(),qc.clone()),Bs=s.multiply(Mh.clone(),cf.clone()),yh=s.multiply(qc.clone(),Mh),df=s.multiply(_h,cf.clone()),Fc=s.add(s.pow(qc,new qe(2)),s.pow(cf,new qe(2))),s.divide(s.add(s.add(wt,Bs),s.multiply(s.subtract(yh,df),qe.imaginary())),Fc)},trigSimp:function(Ge){if(Ge.containsFunction(["cos","sin","tan"])){Ge=Ge.clone();var An=Ko.Simplify.strip(Ge);Ge=An.pop();var wt=Ge.clone();if(Ge.group===g){var Bs=new qe(0);Ge.each(function(_h){var qc=Ko.Simplify.trigSimp(_h.fnTransform());Bs=s.add(Bs,qc)},!0),wt=s.pow(s.multiply(new qe(Ge.multiplier),Bs),new qe(Ge.power))}else if(Ge.group===A){var yh=Ge.getNum(),df=Ge.getDenom();if(yh.fname==="sin"&&df.fname==="cos"&&yh.args[0].equals(df.args[0])&&yh.power.equals(df.power)&&(wt=s.parse(a.Utils.format("({0})*({1})*tan({2})^({3})",df.multiplier,yh.multiplier,yh.args[0],yh.power))),wt.group===A){var Fc=new qe(1);wt.each(function(_h){_h.fname==="tan"&&(_h=s.parse(a.Utils.format("({0})*sin({1})^({2})/cos({1})^({2})",_h.multiplier,Ko.Simplify.simplify(_h.args[0]),_h.power))),Fc=s.multiply(Fc,_h)}),wt=Fc}}wt=Ko.Simplify.unstrip(An,wt).distributeMultiplier(),Ge=wt}return Ge},fracSimp:function(Ge){var An=Ge.getDenom(),wt=Ge.getNum();if(wt.isImaginary()&&An.isImaginary()&&(Ge=Ko.Simplify.complexSimp(wt,An)),Ge.isComposite()){Ge.power>1&&(Ge=s.expand(Ge));var Bs=Ge.collectSymbols(),yh,df,Fc,_h,qc,Mh,cf,mf,a1,s1,E1,An,wt;for(df=Bs.pop();Bs.length;)Fc=Bs.pop(),_h=s.parse(df.getDenom()),qc=s.parse(Fc.getDenom()),Mh=df.getNum(),cf=Fc.getNum(),E1=s.multiply(_h.clone(),qc.clone()),a1=s.multiply(Mh,qc),s1=s.multiply(cf,_h),mf=s.add(a1,s1),df=s.divide(mf,E1);return An=s.expand(df.getDenom()),wt=s.expand(df.getNum()),wt.isImaginary()&&An.isImaginary()?yh=Ko.Simplify.complexSimp(wt,An):yh=s.divide(wt,An),yh.equals(Ge)?Ge:Ko.Simplify.simplify(yh)}return Ge},ratSimp:function(Ge){if(Ge.group===A){var An=Ge.getDenom(),wt=Ge.getNum().distributeMultiplier(),Bs=Ko.Simplify.fracSimp(An),yh=Ko.Simplify.fracSimp(wt);Ge=s.divide(yh,Bs)}return Ge},sqrtSimp:function(Ge,An){var wt;if(Ge.isSQRT()){var Bs=Ko.Factor.factor(Ge.args[0].clone()),yh=s.parse(Bs.multiplier),df=yh.sign(),wt=s.sqrt(yh.abs()),Fc;if(Xe(wt)){if(Bs.group===A){var _h=new qe(1);Bs.each(function(cf){if(cf.group===o){var mf=s.sqrt(cf.clone());Xe(mf)?wt=s.multiply(wt,mf):_h=s.multiply(_h,cf)}else _h=s.multiply(_h,cf)});var qc=s.multiply(_h,s.parse(df));Fc=s.sqrt(qc.clone()),Fc.isImaginary&&(Fc=s.sqrt(s.expand(qc.clone())))}else Fc=s.sqrt(Bs.clone().toUnitMultiplier());return s.multiply(wt,Fc)}}else Ge.isComposite()&&Ge.isLinear()?(wt=new qe(0),Ge.each(function(Mh){wt=s.add(wt,Ko.Simplify.sqrtSimp(Mh))},!0),wt=s.multiply(wt,s.parse(Ge.multiplier))):Ge.group===A&&(wt=s.parse(Ge.multiplier),Ge.each(function(Mh){var cf=Ko.Simplify.sqrtSimp(Mh);wt=s.multiply(wt,cf)},!0),wt=s.pow(wt,s.parse(Ge.power)));return wt||s.parse(Ge)},patternSub:function(Ge){var An={},wt=function(yh){var df=!1;return yh.each(function(Fc){Fc.group===g?df=!0:Fc.symbols&&(df=wt(Fc))}),df},Bs=function(yh){yh.each(function(df){if(!(!df.symbols&&df.group!==d)){if(wt(df))Bs(df);else if(!An[df.value]){var Fc=a.Utils.getU(Ge);An[df.value]=Fc,Ge=Ge.sub(df.value,Fc)}}},!0)};return Bs(Ge),[Ge,An]},simplify:function(Ge){var An=Ko.Simplify.strip(Ge);if(Ge=An.pop(),Ge=Ko.Simplify.fracSimp(Ge),Ge.isConstant()||Ge.group===a.groups.S){An.push(Ge);var wt=Ko.Simplify.unstrip(An,Ge);return wt}var Bs=Ge.clone();if(Bs=Ko.Simplify.trigSimp(Bs),Bs=Ko.Simplify.ratSimp(Bs),Bs=Ko.Factor.factor(Bs),Bs.group===a.groups.CP&&Bs.isLinear()){var yh=Bs.multiplier.clone();Bs.toUnitMultiplier();var df=new qe(0);Bs.each(function(_h){var qc=Ko.Simplify.simplify(_h);df=s.add(df,qc)}),Bs=df,df.multiplier=df.multiplier.multiply(yh)}var Fc=Ko.Simplify.unstrip(An,Bs);return Fc}},Classes:{Polynomial:So,Factors:Do,MVTerm:eh}};a.Expression.prototype.simplify=function(){return Ko.Simplify.simplify(this.symbol)},e.useAlgebraDiv=function(){var Ge=Ko.divideFn=s.divide,An=0;s.divide=function(wt,Bs){An++;var yh;return An===1?yh=a.Algebra.divide(wt,Bs):yh=Ge(wt,Bs),An=0,yh}},e.useParserDiv=function(){Ko.divideFn&&(s.divide=Ko.divideFn),delete Ko.divideFn},e.register([{name:"factor",visible:!0,numargs:1,build:function(){return Ko.Factor.factor}},{name:"simplify",visible:!0,numargs:1,build:function(){return Ko.Simplify.simplify}},{name:"gcd",visible:!0,numargs:[1],build:function(){return Ko.gcd}},{name:"lcm",visible:!0,numargs:[1],build:function(){return Ko.lcm}},{name:"roots",visible:!0,numargs:-1,build:function(){return Ko.roots}},{name:"divide",visible:!0,numargs:2,build:function(){return Ko.divide}},{name:"div",visible:!0,numargs:2,build:function(){return Ko.div}},{name:"partfrac",visible:!0,numargs:[1,2],build:function(){return Ko.PartFrac.partfrac}},{name:"deg",visible:!0,numargs:[1,2],build:function(){return Ko.degree}},{name:"coeffs",visible:!0,numargs:[1,2],build:function(){var Ge=function(){var An=Ko.coeffs.apply(Ko,arguments);return new a.Vector(An)};return Ge}},{name:"line",visible:!0,numargs:[2,3],build:function(){return Ko.line}},{name:"sqcomp",visible:!0,numargs:[1,2],build:function(){var Ge=function(An,wt){try{wt=wt||me(An)[0];var Bs=Ko.sqComplete(An.clone(),wt);return Bs.f}catch{return An}};return Ge}}]),e.updateAPI()})()}()),Algebra.exports}requireAlgebra();requireCalculus();var Solve={exports:{}},hasRequiredSolve;function requireSolve(){return hasRequiredSolve||(hasRequiredSolve=1,function(t){{var e=requireNerdamer_core();requireCalculus(),requireAlgebra()}(function(){var a=e.getCore(),s=a.PARSER,o=a.Algebra,l=a.Calculus,u=l.integration.decompose_arg,c=a.Utils.evaluate,d=a.Utils.remove,m=a.Utils.format,g=a.Utils.build,A=a.Utils.knownVariable,P=a.Symbol,W=a.Utils.isSymbol,me=a.Utils.variables,ve=a.groups.S,He=a.groups.PL,De=a.groups.CB,Xe=a.groups.CP,qe=a.groups.FN,Rs=a.Settings,Vc=a.Utils.range,So=a.Utils.isArray;a.Settings.SOLVE_RADIUS=1e3,a.Settings.ROOTS_PER_SIDE=10,a.Settings.make_pi_conversions=!1,a.Settings.STEP_SIZE=.1,a.Settings.EPSILON=1e-13,a.Settings.MAX_NEWTON_ITERATIONS=200,a.Settings.MAX_NON_LINEAR_TRIES=12,a.Settings.NON_LINEAR_JUMP_AT=50,a.Settings.NON_LINEAR_JUMP_SIZE=100,a.Settings.NON_LINEAR_START=.01,a.Settings.NEWTON_SLICES=200,a.Settings.NEWTON_EPSILON=Number.EPSILON*2,a.Settings.SOLUTION_PROXIMITY=1e-14,a.Settings.FILTER_SOLUTIONS=!0,a.Settings.MAX_SOLVE_DEPTH=10,a.Settings.ZERO_EPSILON=1e-9,a.Settings.MAX_BISECTION_ITER=2e3,a.Settings.BI_SECTION_EPSILON=1e-12,a.Symbol.prototype.hasTrig=function(){return this.containsFunction(["cos","sin","tan","cot","csc","sec"])},a.Symbol.prototype.hasNegativeTerms=function(){if(this.isComposite())for(var wt in this.symbols){var Bs=this.symbols[wt];if(Bs.group===He&&Bs.hasNegativeTerms()||this.symbols[wt].power.lessThan(0))return!0}return!1};function Do(wt,Bs){if(Bs.isConstant()&&wt.isConstant()&&!wt.equals(Bs)||wt.equals(a.Settings.IMAGINARY)&&Bs.isConstant(!0)||Bs.equals(a.Settings.IMAGINARY)&&wt.isConstant(!0))throw new a.exceptions.NerdamerValueError(wt.toString()+" does not equal "+Bs.toString());this.LHS=wt,this.RHS=Bs}Do.prototype={toString:function(){return this.LHS.toString()+"="+this.RHS.toString()},text:function(wt){return this.LHS.text(wt)+"="+this.RHS.text(wt)},toLHS:function(wt){wt=typeof wt>"u";var Bs;wt?Bs=this.removeDenom():Bs=this.clone();var yh=Bs.LHS,df=Bs.RHS;yh.isConstant(!0)&&!df.isConstant(!0)&&([yh,df]=[df,yh]);var Fc=s.subtract(yh,df),_h=wt?s.expand(Fc):Fc;return _h=new Do(_h,new P(0)).removeDenom().LHS,_h},removeDenom:function(){var wt=this.LHS.clone(),Bs=this.RHS.clone(),yh=s.multiply(wt.getDenom(),Bs.getDenom());if(wt=s.expand(s.multiply(wt,yh.clone())),Bs=s.expand(s.multiply(Bs,yh)),Bs.group===Xe&&Bs.group!==Xe){var df=wt;wt=Bs,Bs=df}if(wt.group===De){var df=new P(wt.multiplier),Fc=Bs.clone();wt.each(function(a1){a1.power.lessThan(0)?Fc=s.divide(Fc,a1):df=s.multiply(df,a1)}),wt=df,Bs=Fc}else if(wt.group===Xe)for(var _h in wt.symbols){var qc=wt.symbols[_h];if(qc.group===De)for(var Mh in qc.symbols){var cf=qc.symbols[Mh];if(cf.power.lessThan(0))return new Do(s.expand(s.multiply(cf.clone().toLinear(),wt)),s.expand(s.multiply(cf.clone().toLinear(),Bs)))}}return new Do(wt,Bs)},clone:function(){return new Do(this.LHS.clone(),this.RHS.clone())},sub:function(wt,Bs){var yh=this.clone();return yh.LHS=yh.LHS.sub(wt.clone(),Bs.clone()),yh.RHS=yh.RHS.sub(wt.clone(),Bs.clone()),yh},isZero:function(){return a.Utils.evaluate(this.toLHS()).equals(0)},latex:function(wt){return[this.LHS.latex(wt),this.RHS.latex(wt)].join("=")}},s.equals=function(wt,Bs){return new Do(wt,Bs)},function(){var wt=s.functions.simplify[0];s.functions.simplify[0]=function(Bs){return Bs instanceof Do?(Bs.LHS=wt(Bs.LHS),Bs.RHS=wt(Bs.RHS),Bs):wt(Bs)}}(),a.Expression.prototype.equals=function(wt){wt instanceof a.Expression&&(wt=wt.symbol);var Bs=new Do(this.symbol,wt);return Bs},a.Expression.prototype.solveFor=function(wt){var Bs;if(this.symbol instanceof Do){if(this.symbol.LHS.isConstant()&&this.symbol.RHS.equals(wt))return new a.Expression(this.symbol.LHS);if(this.symbol.RHS.isConstant()&&this.symbol.LHS.equals(wt))return new a.Expression(this.symbol.RHS);Bs=this.symbol.toLHS()}else Bs=this.symbol;return An(Bs,wt).map(function(yh){return new a.Expression(yh)})},a.Expression.prototype.expand=function(){if(this.symbol instanceof Do){var wt=this.symbol.clone();return wt.RHS=s.expand(wt.RHS),wt.LHS=s.expand(wt.LHS),new a.Expression(wt)}return new a.Expression(s.expand(this.symbol))},a.Expression.prototype.variables=function(){return this.symbol instanceof Do?a.Utils.arrayUnique(me(this.symbol.LHS).concat(me(this.symbol.RHS))):me(this.symbol)};var eh=function(wt,Bs){return s.equals(wt,Bs)};a.Equation=Do;var Ko=a.Utils.checkAll=function(wt,Bs){for(var yh=0;yh<wt.length;yh++)if(Bs(wt[yh]))return!1;return!0},Ge=a.Solve={version:"2.0.3",solutions:[],solve:function(wt,Bs){var yh=An(wt,String(Bs));return new a.Vector(yh)},toLHS:function(wt,Bs){if(W(wt))return wt;if(!(wt instanceof Do)){var yh=wt.split("=");yh[1]=yh[1]||"0",wt=new Do(s.parse(yh[0]),s.parse(yh[1]))}return wt.toLHS(Bs)},solveCircle:function(wt,Bs){for(var yh=Bs.map(function(z1){return s.parse(z1)}),df=[],Fc=[],_h=0;_h<wt.length;_h++){for(var qc=[],Mh=0;Mh<yh.length;Mh++)qc.push(Number(a.Algebra.degree(wt[_h],yh[Mh])));qc.push(a.Utils.arraySum(qc,!0)),df.push(qc)}var cf=wt[0],mf=wt[1];if(df[0][2]>df[1][2]&&([mf,cf]=[cf,mf],[df[1],df[0]]=[df[0],df[1]]),df[0][0]===1&&df[0][2]===2&&df[1][0]===2&&df[1][2]===4){var a1=Bs[0],s1=Bs[1],E1=An(s.parse(mf,A(a1,An(s.parse(cf),a1)[0])),s1).map(function(z1){return z1.toString()}),T1=[An(s.parse(cf,A(s1,E1[0])))[0].toString()];if(E1[1]&&T1.push(An(s.parse(cf,A(s1,E1[1])))[0].toString()),Rs.SOLUTIONS_AS_OBJECT){var Fc={};Fc[a1]=T1,Fc[s1]=E1}else E1.unshift(s1),T1.unshift(a1),Fc=[T1,E1]}return Fc},solveNonLinearSystem:function(wt,Bs,yh){if(Bs<0)return[];yh=typeof yh>"u"?a.Settings.NON_LINEAR_START:yh;var df=a.Settings.MAX_NON_LINEAR_TRIES,Fc=Math.floor(df/2);Bs=typeof Bs>"u"?df:Bs;var _h=a.Settings.NON_LINEAR_JUMP_AT,qc=a.Settings.NON_LINEAR_JUMP_SIZE,Mh=function(x2,p1){return x2.map(function(S1,D1){return Number(p1.get(D1,0))})},cf=a.Utils.arrayGetVariables(wt),mf=a.Matrix.jacobian(wt,cf,function(x2){return g(x2,cf)},!0),a1=a.Settings.MAX_NEWTON_ITERATIONS,s1,E1,T1,z1,W1,m2,C2,A2,b2=wt.map(function(x2){return g(x2,cf)}),_2=mf.map(function(x2){return g(x2,cf)},!0);z1=a.Matrix.cMatrix(0,cf);var q1=a.Matrix.cMatrix(yh,cf);T1=0;do{if(T1>a1)break;s1=Mh(cf,q1),C2=q1.clone(),b2.forEach(function(x2,p1){q1.set(p1,0,x2.apply(null,s1))});var U1=new a.Matrix;if(_2.each(function(x2,p1,S1){var D1=x2.apply(null,s1);U1.set(p1,S1,D1)}),U1=U1.invert(),E1=s.multiply(U1,q1).negate(),A2=E1.subtract(z1,function(x2){return s.parse(Number(x2))}),z1=C2.add(E1,function(x2){return s.parse(Number(x2))}),q1=z1,T1>=_h&&W1>1){Bs===Fc&&(yh=0);var M2=Bs>Fc?1:-1;return n=Bs%Math.floor(Fc)+1,yh+=M2*n*qc,Ge.solveNonLinearSystem(wt,--Bs,yh)}if(m2=W1,T1++,W1=A2.max(),Number(W1)===Number(m2))break}while(Number(W1)>=Number.EPSILON);return Ge.systemSolutions(q1,cf,!0,function(x2){return a.Utils.round(Number(x2),14)})},systemSolutions:function(wt,Bs,yh,df){var Fc=a.Settings.SOLUTIONS_AS_OBJECT?{}:[];return wt.each(function(_h,qc){var Mh=(yh?s.expand(_h):_h).valueOf();df&&(Mh=df.call(_h,Mh));var cf=Bs[qc];a.Settings.SOLUTIONS_AS_OBJECT?Fc[cf]=Mh:Fc.push([cf,Mh])}),Fc},solveSystemBySubstitution:function(wt){var Bs=me(wt[0]),yh=me(wt[1]);return wt.length===2&&Bs.length===2&&a.Utils.arrayEqual(Bs,yh)?Ge.solveCircle(wt,Bs):[]},solveSystem:function(wt,Bs){for(var yh=0;yh<wt.length;yh++)wt[yh]=Ge.toLHS(wt[yh]);var df=wt.length,Fc=new a.Matrix,_h=new a.Matrix,qc=!1,Mh;if(typeof Bs>"u"){if(!o.allLinear(wt))try{return Ge.solveNonLinearSystem(wt)}catch(S1){if(S1 instanceof a.exceptions.DivisionByZero)return Ge.solveSystemBySubstitution(wt)}if(Mh=a.Utils.arrayGetVariables(wt),Mh.length===1){var cf=0,mf,a1;do{var a1=wt[cf].clone();cf>0&&(a1=a1.sub(Mh[0],mf[0])),mf=An(a1,Mh[0])}while(++cf<wt.length);var s1;return Rs.SOLUTIONS_AS_OBJECT?(s1={},s1[Mh[0]]=mf):mf.length===0?s1=mf:s1=[Mh[0],mf],s1}if(Mh.length<wt.length){for(var E1=[],cf=wt.length,yh=0;yh<cf-1;yh++)E1.push(s.parse(wt[yh]));var T1={},s1=Ge.solveSystem(E1,Mh);Array.isArray(s1)?s1.forEach(function(_1){T1[_1[0]]=_1[1]}):T1=s1;for(var z1=!0,yh=cf-1;yh<cf;yh++)s.parse(wt[yh],T1).equals(0)||(z1=!1);if(z1)return s1}for(var yh=0;yh<Mh.length;yh++)e.setVar(Mh[yh],"delete");for(var yh=0;yh<df;yh++){for(var a1=wt[yh],W1=0;W1<Mh.length;W1++){var m2=Mh[W1],C2=[];a1.each(function(_1){_1.contains(m2)&&(C2=C2.concat(_1.coeffs()))});var A2=a.Utils.arraySum(C2);Fc.set(yh,W1,A2)}var b2=a1.clone();Mh.map(function(_1){b2=b2.stripVar(_1,!0)}),_h.set(yh,0,b2.negate())}}else for(Mh=Bs,qc=!0,yh=0;yh<df;yh++){_h.set(yh,0,new P(0));for(var a1=s.expand(wt[yh]).collectSymbols(),W1=0;W1<Bs.length;W1++){Fc.set(yh,W1,new P(0));for(var m2=Bs[W1],_2=0;_2<a1.length;_2++){for(var q1=a1[_2],U1=!1,M2=0;M2<Bs.length;M2++)q1.contains(Bs[M2])&&(U1&&a.err("Multiple variables found for term "+q1),U1=!0);if(q1.contains(m2)){var x2=u(d(a1,_2),m2);Fc.set(yh,W1,s.add(Fc.get(yh,W1),x2[0]))}}}for(_2=0;_2<a1.length;_2++)_h.set(yh,0,s.add(_h.get(yh,0),a1[_2]))}if(Mh.length!==wt.length||Fc.determinant().equals(0))throw new a.exceptions.SolveError("System does not have a distinct solution");Fc=Fc.invert();var p1=Fc.multiply(_h);return a.Utils.isArray(Bs)&&p1.each(function(S1){return S1.negate()}),Ge.systemSolutions(p1,Mh,qc)},quad:function(wt,Bs,yh){var df=s.subtract(s.pow(Bs.clone(),P(2)),s.multiply(s.multiply(yh.clone(),wt.clone()),P(4)));df=s.expand(df);var Fc=s.pow(df,P(.5)),_h=s.parse(s.multiply(new P(2),yh.clone())),qc=[s.parse(m("(-({0})+({1}))/({2})",Bs,Fc,_h)),s.parse(m("(-({0})-({1}))/({2})",Bs,Fc,_h))];return qc},cubic:function(wt,Bs,yh,df){var Fc=df.text(),_h=yh.text(),qc=Bs.text(),Mh=wt.text(),cf=`(-(${_h})^3/(27*(${Fc})^3)+(${_h})*(${qc})/(6*(${Fc})^2)-(${Mh})/(2*(${Fc})))`,mf=`((${qc})/(3*(${Fc}))-(${_h})^2/(9*(${Fc})^2))`,a1=`(${_h})/(3*(${Fc}))`,s1=`((${cf})+sqrt((${cf})^2+(${mf})^3))^(1/3)+((${cf})-sqrt((${cf})^2+(${mf})^3))^(1/3)-(${a1})`,E1="1/2+sqrt(3)/2*i";return[s.parse(s1),s.parse(`(${s1})(${E1})`),s.parse(`(${s1})(${E1})^2`)]},quartic:function(wt,Bs,yh,df,Fc){a.Utils.arrayUnique(me(Fc).concat(me(df)).concat(me(yh)).concat(me(Bs)).concat(me(wt))).map(function(z1){}),Fc=Fc.toString(),df=df.toString(),yh=yh.toString(),Bs=Bs.toString(),wt=wt.toString();var _h,qc,Mh,cf,mf,a1,s1,E1,T1;return _h=s.parse(m("(8*({0})*({2})-3*({1})^2)/(8*({0})^2)",Fc,df,yh)).toString(),qc=s.parse(m("(({1})^3-4*({0})*({1})*({2})+8*({0})^2*({3}))/(8*({0})^3)",Fc,df,yh,Bs)).toString(),Mh=s.parse(m("12*({0})*({4})-3*({1})*({3})+({2})^2",Fc,df,yh,Bs,wt)).toString(),cf=s.parse(m("2*({2})^3-9*({1})*({2})*({3})+27*({1})^2*({4})+27*({0})*({3})^2-72*({0})*({2})*({4})",Fc,df,yh,Bs,wt)).toString(),mf=s.parse(m("((({1})+(({1})^2-4*({0})^3)^(1/2))/2)^(1/3)",Mh,cf)).toString(),ve=s.parse(m("(1/2)*(-(2/3)*({1})+(1/(3*({0}))*(({2})+(({3})/({2})))))^(1/2)",Fc,_h,mf,Mh)).toString(),a1=s.parse(m("-(({1})/(4*({0})))-({4})+(1/2)*sqrt(-4*({4})^2-2*({2})+(({3})/({4})))",Fc,df,_h,qc,ve)),s1=s.parse(m("-(({1})/(4*({0})))-({4})-(1/2)*sqrt(-4*({4})^2-2*({2})+(({3})/({4})))",Fc,df,_h,qc,ve)),E1=s.parse(m("-(({1})/(4*({0})))+({4})+(1/2)*sqrt(-4*({4})^2-2*({2})-(({3})/({4})))",Fc,df,_h,qc,ve)),T1=s.parse(m("-(({1})/(4*({0})))+({4})-(1/2)*sqrt(-4*({4})^2-2*({2})-(({3})/({4})))",Fc,df,_h,qc,ve)),[a1,s1,E1,T1]},divideAndConquer:function(wt,Bs){var yh=[],df=a.Algebra.Factor.factor(wt);return df.group===De&&df.each(function(Fc){Fc=P.unwrapPARENS(Fc),yh=yh.concat(An(Fc,Bs))}),yh},csolve:function(wt,Bs){return a.Utils.block("IGNORE_E",function(){var yh,df,Fc,_h,qc,Mh,cf,mf;if(mf=[],yh=a.Utils.decompose_fn(wt,Bs,!0),yh.x.group===ve){df=s.parse(yh.x.power),Fc=Number(df),_h=s.pow(s.divide(yh.b.negate(),yh.a),df.invert()),qc=P.toPolarFormArray(_h),Mh=qc[0],qc[1],cf=Mh.toString(),df.toString();for(var a1,s1,E1,T1=0;T1<Fc;T1++)a1=T1,E1=m("({0})*e^(2*{1}*pi*{2}*{3})",cf,a1,df,a.Settings.IMAGINARY),s1=s.parse(E1),mf.push(s1)}return mf},!0)},getPoints:function(wt,Bs,yh){Bs=Bs||.01,yh=yh||[];var df=g(wt),Fc=0,_h=Math.round(Fc),qc=df(_h),Mh=qc/Math.abs(qc),cf=a.Settings.ROOTS_PER_SIDE,mf=cf;yh.push(Math.floor(_h/2)),yh.push(Math.abs(_h)),yh.push(_h),wt.each(function(T1){T1.containsFunction(a.Settings.LOG)&&yh.push(.1)});var a1=Vc(-a.Settings.SOLVE_RADIUS,_h,Bs),s1=Vc(_h,a.Settings.SOLVE_RADIUS,Bs),E1=function(T1,z1){for(var W1,m2,C2,A2=[],b2=0,_2=T1.length;b2<_2;b2++)W1=T1[b2],m2=df(W1),C2=m2/Math.abs(m2),!(isNaN(m2)||!isFinite(m2)||A2.length>z1)&&(C2!==Mh&&A2.push(W1),Mh=C2);yh=yh.concat(A2)};return E1(a1,mf),E1(s1,cf),yh},bisection:function(wt,Bs){var yh=wt-1,df=wt+1;if(Math.sign(Bs(yh))!==Math.sign(Bs(df))){var Fc=0,_h,qc;do{if(_h=Math.abs(df-yh),Fc++>a.Settings.MAX_BISECTION_ITER||isNaN(_h))return;qc=(yh+df)/2,Bs(yh)*Bs(qc)>0?yh=qc:df=qc}while(_h>=Rs.EPSILON);var Mh=(yh+df)/2,cf=Bs(Mh);if(!isNaN(cf)&&Math.abs(cf)<=a.Settings.BI_SECTION_EPSILON)return a.Utils.round(Mh,13)}},Newton:function(wt,Bs,yh){var df=a.Settings.MAX_NEWTON_ITERATIONS,Fc=0,_h=wt,qc;do{var Mh=Bs(_h);if(_h===0&&Mh===0){qc=0;break}if(Fc++,Fc>df)return;qc=_h-Mh/yh(_h);var cf=Math.abs(qc-_h);_h=qc}while(cf>Rs.NEWTON_EPSILON);if(Math.abs(Bs(qc))<=Rs.EPSILON)return qc},rewrite:function(wt,Bs,yh){if(Bs=Bs||new P(0),wt.isComposite()&&wt.isLinear()){var df=[],Fc=[];wt.each(function(mf){mf=mf.clone(),mf.fname==="sqrt"&&mf.contains(yh)?df.push(mf):Fc.push(mf)},!0),df.length===1&&(Bs=s.expand(s.pow(s.subtract(Bs,a.Utils.arraySum(Fc)),new P(2))),wt=s.expand(s.pow(P.unwrapSQRT(df[0]),new P(2))))}else wt=P.unwrapSQRT(s.expand(wt));var _h=0,qc=wt.length;if(wt.group===Xe&&wt.contains(yh)&&wt.isLinear()){wt.distributeMultiplier();var Mh=new P(0);return wt.each(function(mf){mf.contains(yh)?(_h++,Mh=s.add(Mh,mf.clone())):Bs=s.subtract(Bs,mf.clone())}),wt=Mh,_h!==qc?Ge.rewrite(wt,Bs,yh):[wt,Bs]}else if(wt.group===De&&wt.contains(yh)&&wt.isLinear()){if(wt.multiplier.lessThan(0)&&(wt.multiplier=wt.multiplier.multiply(new a.Frac(-1)),Bs.multiplier=Bs.multiplier.multiply(new a.Frac(-1))),Bs.equals(0))return new P(0);var Mh=new P(1);return wt.each(function(a1){a1.contains(yh)?Mh=s.multiply(Mh,a1.clone()):Bs=s.divide(Bs,a1.clone())}),wt=Mh,Ge.rewrite(wt,Bs,yh)}else if(!wt.isLinear()&&wt.contains(yh)){var cf=s.parse(wt.power.clone().invert());return wt=s.pow(wt,cf.clone()),Bs=s.pow(s.expand(Bs),cf.clone()),Ge.rewrite(wt,Bs,yh)}else if(wt.group===qe||wt.group===ve||wt.group===He)return[wt,Bs]},sqrtSolve:function(wt,Bs){var yh=new P(0),df=new P(0);if(wt.isComposite()&&(wt.each(function(qc){qc.fname==="sqrt"&&qc.contains(Bs)?yh=s.add(yh,qc.clone()):df=s.add(df,qc.clone())}),!yh.equals(0))){var Fc=s.expand(s.multiply(s.parse(wt.multiplier),s.subtract(s.pow(df,new P(2)),s.pow(yh,new P(2))))),_h=An(Fc,Bs);return _h=_h.filter(function(qc){if(qc.isImaginary())return qc;var Mh={};Mh[Bs]=qc;var cf=c(wt,Mh);if(cf.equals(0))return qc}),_h}}},An=function(wt,Bs,yh,df,Fc){if(df=df||0,df++>Rs.MAX_SOLVE_DEPTH)return yh;if(wt instanceof Do){if(wt.isZero())return[new P(0)];if(wt.LHS.equals(Bs)&&!wt.RHS.contains(Bs))return[wt.RHS];if(wt.RHS.equals(Bs)&&!wt.LHS.contains(Bs))return[wt.LHS]}if(wt instanceof a.Vector&&(wt=wt.elements),Bs=Bs||"x",So(wt))return Ge.solveSystem.apply(void 0,arguments);yh=yh||[];var _h={},qc={};if(qc[Bs]=0,W(wt)&&c(wt.getDenom(),qc).equals(0)===!0)return yh;var Mh=function(J1,v2){var z2=W(J1);if(!(J1===void 0||typeof J1=="number"&&isNaN(J1))){if(So(J1))J1.forEach(function(k1){Mh(k1)});else if(J1.valueOf()!=="null"){if(typeof a.Settings.PRE_ADD_SOLUTION=="function"&&(J1=a.Settings.PRE_ADD_SOLUTION(J1)),z2||(J1=s.parse(J1)),a.Settings.make_pi_conversions&&v2){var q2=s.divide(J1.clone(),new P(Math.PI)),j2=q2.multiplier,n4=Math.abs(j2.num),X2=Math.abs(j2.den);n4<10&&X2<10&&(J1=s.multiply(q2,new P("pi")))}var b1=J1.toString();_h[b1]||yh.push(J1),_h[b1]=!0}}};if(wt.group===ve&&wt.contains(Bs)){try{var cf={};cf[Bs]=0,c(Fc,cf,"numer"),Mh(new P(0))}catch{}return yh}if(wt.group===De){var mf=wt.getNum();if(mf.group===De){var a1=String(Bs);return mf.each(function(J1){J1.contains(a1)&&An(J1,Bs,yh,df,wt)}),yh}return An(mf,Bs,yh,df,Fc)}wt.group===qe&&wt.fname==="sqrt"&&(wt=s.pow(P.unwrapSQRT(wt),new P(2)));var s1=(a.Utils.isSymbol(wt)?wt:Ge.toLHS(wt,!1)).getNum(),E1=a.Utils.variables(s1),T1=E1.length;if(a.Utils.isInt(s1.power)&&s1.power>0&&(s1=s.parse(s1).toLinear()),s1.group===ve||s1.group===De&&s1.contains(Bs))return[new P(0)];var z1={},W1,m2=function(J1){J1=s.expand(J1,{expand_denominator:!0,expand_functions:!0});var v2=J1.clone();if(J1.symbols)for(var z2 in J1.symbols){var q2=J1.symbols[z2],j2=q2.getDenom();if(!j2.isConstant(!0)&&J1.isComposite()){var n4=new P(0);return J1.each(function(L2){n4=s.add(n4,s.multiply(L2,j2.clone()))}),m2(s.multiply(s.parse(J1.multiplier),n4))}var X2=u(q2,Bs),b1=X2[1].fname===a.Settings.SQRT,k1=P.unwrapSQRT(X2[1]),V1=k1.power.clone();if(!W(V1)&&!V1.equals(1/2)){if(V1.den.gt(1)){if(b1)return J1=s.subtract(J1,q2.clone()),J1=s.add(J1,s.multiply(X2[0].clone(),k1)),m2(J1);var n2=z1[V1.den];z1[V1.den]=n2?n2++:1}else if(V1.sign()===-1){var y2=s.parse(Bs+"^"+Math.abs(V1));return J1.each(function(L2,uf){L2.contains(Bs)&&(J1.symbols[uf]=s.multiply(L2,y2.clone()))}),z1={},m2(s.parse(J1))}else if(q2.group===He){var Z1=a.Utils.arrayMin(a.Utils.keys(q2.symbols));if(Z1<0){var y2=s.parse(Bs+"^"+Math.abs(Z1)),T2=new P(0);return v2.each(function(uf){T2=s.add(T2,s.multiply(uf.clone(),y2.clone()))},!0),T2}}}}return J1},C2=function(J1){var v2=new P(0),z2=new P(0);return J1.each(function(q2){q2.contains(Bs,!0)?v2=s.add(v2,q2.clone()):z2=s.subtract(z2,q2.clone())}),[v2,z2]};if(Ge.inverseFunctionSolve=function(J1,v2,z2){var q2=u(v2.args[0],Bs),j2=q2[1];if(j2.group===ve)return s.divide(s.symfunction(J1,[s.divide(z2,s.parse(v2.multiplier))]),q2[0])},s1=m2(s1),s1.equals(0))return[s1];var A2=a.Utils.keys(z1);if(A2.length===1&&(W1=A2[0],s1.each(function(J1,v2){if(J1.contains(Bs)){var z2=u(J1,Bs),q2=z2[1],j2=q2.power;j2.den.gt(1)&&(q2.power=j2.multiply(new a.Frac(W1)),s1.symbols[v2]=s.multiply(q2,z2[0]))}}),s1=s.parse(s1)),Mh(Ge.sqrtSolve(s1,Bs)),T1===1)if(s1.isPoly(!0)){var b2=new a.Algebra.Classes.Factors;if(a.Algebra.Factor.factor(s1,b2),b2.getNumberSymbolics()>1)for(var _2 in b2.factors)Mh(An(b2.factors[_2],Bs));else{var q1=a.Utils.getCoeffs(s1,Bs),U1=q1.length-1,M2=!1;if(E1[0]===Bs){if(Ko(q1,function(J1){return J1.group!==a.groups.N})){var x2=a.Algebra.proots(s1);Ko(x2,function(J1){return!a.Utils.isInt(J1)})&&(M2=!0,x2.map(function(J1){Mh(new P(J1))}))}if(!M2)if(wt=s.parse(wt),wt instanceof a.Equation&&(wt=wt.toLHS()),U1===1)Mh(s.divide(q1[0],q1[1].negate()));else if(U1===2)Mh(s.expand(Ge.quad.apply(void 0,q1)));else if(U1===3){var yh=[],p1=a.Algebra.Factor.factor(wt),yh=[];yh.length>0?Mh(yh):Mh(Ge.cubic.apply(void 0,q1))}else o.proots(s1).map(Mh)}}}else try{var S1=s1.hasTrig(),D1=Ge.getPoints(s1,.1),_1=Ge.getPoints(s1,.05),B1=Ge.getPoints(s1,.01),c2=a.Utils.arrayUnique(D1.concat(_1).concat(B1)).sort(function(J1,v2){return J1-v2}),H1,x1,pf,o1=g(s1.clone()),e1=[];for(H1=0;H1<c2.length;H1++){if(x1=c2[H1],pf=Ge.bisection(x1,o1),typeof pf>"u"){e1.push(x1);continue}Mh(pf,S1)}c2=e1;var w1=l.diff(s1.clone()),C1=g(w1);for(H1=0;H1<c2.length;H1++)x1=c2[H1],Mh(Ge.Newton(x1,o1,C1),S1);yh.sort()}catch(J1){console.log(J1)}else if(!s1.hasFunc(Bs)&&s1.isComposite())try{var p1=a.Algebra.Factor.factor(s1.clone());if(p1.group===De)p1.each(function(v2){Mh(An(v2,Bs))});else{var q1=a.Utils.getCoeffs(s1,Bs),F1=q1.length,U1=F1-1;switch(U1){case 0:var N1=C2(s1),v1=N1[0],X1=N1[1];if(v1.group===a.groups.EX){var i2=a.Settings.LOG,f2=`${i2}((${X1})/(${v1.multiplier}))/${i2}(${v1.value})/${v1.power.multiplier}`;Mh(s.parse(f2))}break;case 1:Mh(s.divide(q1[0],q1[1].negate()));break;case 2:Mh(Ge.quad.apply(void 0,q1));break;case 3:Mh(Ge.cubic.apply(void 0,q1));break;case 4:Mh(Ge.quartic.apply(void 0,q1));break;default:Mh(Ge.csolve(s1,Bs)),yh.length===0&&Mh(Ge.divideAndConquer(s1,Bs))}yh.length===0&&Mh(An(p1,Bs,yh,df))}}catch{}else try{var Y1=Ge.rewrite(s1,null,Bs),v1=Y1[0],X1=Y1[1];if(v1.group===qe)if(v1.fname==="abs")Mh([X1.clone(),X1.negate()]);else if(v1.fname==="sin")Mh(Ge.inverseFunctionSolve("asin",v1,X1));else if(v1.fname==="cos")Mh(Ge.inverseFunctionSolve("acos",v1,X1));else if(v1.fname==="tan")Mh(Ge.inverseFunctionSolve("atan",v1,X1));else if(v1.fname===a.Settings.LOG){var l2=u(v1.args[0],Bs),_2=l2[1];if(_2.group===ve){X1=s.divide(s.subtract(s.pow(v1.args.length>1?v1.args[1]:new P("e"),s.divide(X1,s.parse(v1.multiplier))),l2[3]),l2[0]);var s1=new Do(_2,X1).toLHS();Mh(An(s1,Bs))}}else Mh(s.subtract(v1,X1));else{var Q1=new Do(v1,X1).toLHS();if(Q1.equals(s1))throw new Error("Stopping. No stop condition exists");Mh(An(Q1,Bs))}}catch{try{if(s1.group===De)Mh(0);else if(s1.group===Xe){var N1=C2(s1),v1=N1[0],X1=N1[1];if(v1.group===a.groups.EX&&v1.value===Bs){var G1=v1.power.clone().invert();Mh(s.pow(X1,G1))}}}catch{}}if(W1&&(yh=yh.map(function(J1){return s.pow(J1,new P(W1))})),W(wt)){var P2={};yh=yh.filter(function(J1){try{P2[Bs]=J1;var v2=Number(c(wt,P2));return isNaN(v2),!0}catch{return!1}})}return yh};e.register([{name:"solveEquations",parent:"nerdamer",numargs:-1,visible:!0,build:function(){return An}},{name:"solve",parent:"Solve",numargs:2,visible:!0,build:function(){return a.Solve.solve}},{name:"setEquation",parent:"Solve",visible:!0,build:function(){return eh}}]),e.updateAPI()})()}()),Solve.exports}requireSolve();var Extra={exports:{}},hasRequiredExtra;function requireExtra(){return hasRequiredExtra||(hasRequiredExtra=1,function(t){{var e=requireNerdamer_core();requireCalculus(),requireAlgebra()}(function(){var a=e.getCore(),s=a.PARSER,o=a.Symbol,l=a.Utils.format,u=a.Utils.isVector,c=a.Utils.isArray;a.Vector;var d=a.groups.S;a.groups.EX;var m=a.groups.CP,g=a.groups.CB,A=a.groups.FN;a.Settings.Laplace_integration_depth=40,o.prototype.findFunction=function(W){if(this.group===A&&this.fname===W)return this.clone();var me;if(this.symbols){for(var ve in this.symbols)if(me=this.symbols[ve].findFunction(W),me)break}return me};var P=a.Extra={version:"1.4.2",LaPlace:{transform:function(W,me,ve){W=W.clone(),me=me.toString(),W=o.unwrapSQRT(W,!0);var He,De=W.stripVar(me),Xe=W.group;if(W=s.divide(W,De.clone()),W.isConstant()||!W.contains(me,!0))He=s.parse(l("({0})/({1})",W,ve));else if(Xe===d&&a.Utils.isInt(W.power)){var qe=String(W.power);He=s.parse(l("factorial({0})/({1})^({0}+1)",qe,ve))}else if(W.group===d&&W.power.equals(1/2))He=s.parse(l("sqrt(pi)/(2*({0})^(3/2))",ve));else if(W.isComposite())He=new o(0),W.each(function(eh){He=s.add(He,P.LaPlace.transform(eh,me,ve))},!0);else if(W.isE()&&(W.power.group===d||W.power.group===g)){var Rs=W.power.stripVar(me);He=s.parse(l("1/(({1})-({0}))",Rs,ve))}else{var Vc=["sin","cos","sinh","cosh"];if(W.group===A&&Vc.indexOf(W.fname)!==-1&&(W.args[0].group===d||W.args[0].group===g)){var Rs=W.args[0].stripVar(me);switch(W.fname){case"sin":He=s.parse(l("({0})/(({1})^2+({0})^2)",Rs,ve));break;case"cos":He=s.parse(l("({1})/(({1})^2+({0})^2)",Rs,ve));break;case"sinh":He=s.parse(l("({0})/(({1})^2-({0})^2)",Rs,ve));break;case"cosh":He=s.parse(l("({1})/(({1})^2-({0})^2)",Rs,ve));break}}else{var So=a.Settings.integration_depth<a.Settings.Laplace_integration_depth;if(So){var Do=a.Settings.integration_depth;a.Settings.integration_depth=a.Settings.Laplace_integration_depth}a.Utils.block("PARSE2NUMBER",function(){var eh=me,Ko=W.sub(me,eh),Ge=s.parse("e^(-"+ve+"*"+eh+")*"+Ko);if(He=a.Calculus.integrate(Ge,eh),He.hasIntegral())return s.symfunction("laplace",arguments);He=He.sub(me,0),He=s.expand(s.multiply(He,new o(-1))),He=He.sub(eh,me)},!1),He=a.Utils.block("PARSE2NUMBER",function(){return s.parse(He)},!0),So&&(a.Settings.integration_depth=Do)}}return s.multiply(He,De)},inverse:function(W,me,ve){var He=W.clone();return a.Utils.block("POSITIVE_MULTIPLIERS",function(){if(W.group===g&&(W=a.Algebra.PartFrac.partfrac(s.expand(W),me)),W.group===d||W.group===g||W.isComposite()){var De=function(){Vc=s.multiply(Vc,Xe),Vc.multiplier=Vc.multiplier.multiply(W.multiplier),Vc=s.divide(Vc,So.a)},Xe,qe,Rs,Vc,So,Do,eh,Ko;if(eh=W.multiplier.clone(),W.toUnitMultiplier(),Xe=W.getNum(),qe=W.getDenom().toUnitMultiplier(),qe.group===m?(Ko=qe.power.clone(),qe.toLinear()):Ko=new a.Frac(1),Rs=me.toString(),So=a.Utils.decompose_fn(qe,Rs,!0),a.Utils.decompose_fn(s.expand(Xe.clone()),Rs,!0),Xe.multiplier=Xe.multiplier.multiply(eh),(qe.group===d||qe.group===g)&&So.x.value===Rs&&So.b.equals(0)&&a.Utils.isInt(So.x.power)){var Ge,Do;Do=So.x.power-1,Ge=a.Math2.factorial(Do),Vc=s.divide(s.pow(ve,new o(Do)),new o(Ge)),De()}else if(qe.group===m&&Ko.equals(1)){if(So.x.group===a.groups.PL&&a.Algebra.degree(qe).equals(2)){var An=a.Algebra.sqComplete(qe,Rs),wt=a.Utils.getU(qe),Bs=a.Utils.decompose_fn(An.a,Rs,!0).b,yh=P.LaPlace.inverse(s.parse(`1/((${wt})^2+(${An.c}))`),wt,ve);Vc=s.multiply(yh,s.parse(`(${eh})*e^(-(${Bs})*(${ve}))`))}else if(So.x.isLinear()&&!Xe.contains(Rs)){ve=s.divide(ve,So.a.clone());var Do=Ko-1,Ge=Do===0||Do===1?"1":`(${Ko}-1)!`;Vc=s.parse(l("(({0})^({3}-1)*e^(-(({2})*({0}))/({1})))/(({4})*({1})^({3}))",ve,So.a,So.b,Ko,Ge)),De()}else if(So.x.group===d&&So.x.power.equals(2))if(!Xe.contains(Rs))Vc=s.parse(l("(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/sqrt(({2})*({3}))",ve,Xe,So.a,So.b));else{var Bs=new o(1);if(Xe.group===g){var df=new o(1);Xe.each(function(M2){M2.contains(Rs)?df=s.multiply(df,M2):Bs=s.multiply(Bs,M2)}),Xe=df}var Fc=a.Utils.decompose_fn(Xe,Rs,!0),_h,qc,Mh,cf,mf,a1;if(_h=Fc.a,qc=Fc.b,Mh=_h.containsFunction("sin"),mf=_h.containsFunction("cos"),cf=qc.containsFunction("cos"),a1=qc.containsFunction("sin"),Fc.x.value===Rs&&Fc.x.isLinear()&&!(Mh&&cf||mf||a1))Vc=s.parse(l("(({1})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})",ve,Fc.a,So.a,So.b));else if(Mh&&cf){var s1,E1;if(s1=_h.findFunction("sin"),E1=qc.findFunction("cos"),s1.args[0].equals(E1.args[0])&&!s1.args[0].contains(Rs)){var T1,z1,W1,m2;T1=s.divide(qc,E1.toUnitMultiplier()).toString(),z1=s1.args[0].toString(),W1=So.b,m2=s.divide(_h,s1.toUnitMultiplier()),C2="(({1})*({2})*cos({3})*sin(sqrt({4})*({0})))/sqrt({4})+({1})*sin({3})*({5})*cos(sqrt({4})*({0}))",Vc=s.parse(l(C2,ve,Bs,T1,z1,W1,m2))}}}}else if(So.x.power.num&&So.x.power.num.equals(3)&&So.x.power.den.equals(2)&&Xe.contains("sqrt(pi)")&&!Xe.contains(Rs)&&Xe.isLinear()){var T1=s.divide(Xe.clone(),s.parse("sqrt(pi)"));Vc=s.parse(l("(2*({2})*sqrt({0}))/({1})",ve,So.a,T1,Xe))}else if(Ko.equals(2)&&So.x.power.equals(2)){var Bs,W1,C2;if(!Xe.contains(Rs))Bs=s.divide(Xe,new o(2)),C2="(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({3})*sqrt(({2})*({3})))-(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*({3}))",Vc=s.parse(l(C2,ve,Bs,So.a,So.b));else if(Fc=a.Utils.decompose_fn(s.expand(Xe.clone()),Rs,!0),Fc.x.isComposite()){var A2=[],b2=Xe.collectSymbols(function(x2){x2=o.unwrapPARENS(x2);var p1=a.Utils.decompose_fn(x2,Rs,!0);return p1.symbol=x2,p1}).sort(function(x2,p1){var S1,D1;return S1=x2.x.value!==Rs?0:x2.x.power,D1=p1.x.value!==Rs?0:p1.x.power,D1-S1});Bs=new o(-1);for(var _2=0;_2<b2.length;_2++){var q1=b2[_2];q1.x.value===Rs?A2.push(q1):Bs=s.multiply(Bs,q1.symbol)}A2[0].x.power.equals(2)&&A2[1].x.power.equals(1)&&A2[1].b.equals(0)&&!A2[0].b.equals(0)&&(T1=A2[0].a.negate(),C2="-(({1})*({2})*({5})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})^2*sqrt(({4})*({5})))-(({1})*({3})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})*sqrt(({4})*({5})))+(({1})*({2})*cos((sqrt(({4})*({5}))*({0}))/({4})))/({4})^2",Vc=s.parse(l(C2,ve,Bs,T1,A2[0].b,So.a,So.b)))}else Fc.x.isLinear()?(Bs=s.divide(Fc.a,new o(2)),C2="(({1})*({0})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))",Vc=s.parse(l(C2,ve,Bs,So.a,So.b))):Fc.x.power.equals(2)&&(Fc.b.equals(0)?(Bs=s.divide(Fc.a,new o(2)),C2="(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",Vc=s.parse(l(C2,ve,Bs,So.a,So.b))):(Bs=s.divide(Fc.a,new o(2)),W1=Fc.b.negate(),C2="-((({2})*({4})-2*({1})*({3}))*sin((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3})*sqrt(({2})*({3})))+(({4})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3}))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",Vc=s.parse(l(C2,ve,Bs,So.a,So.b,W1))))}else W.isComposite()&&(Ko.equals(2)&&So.x.group===d?Vc=s.parse(`(${eh})*(${ve})*e^(-(${So.b})*(${ve}))`):(Vc=new o(0),W.each(function(U1){Vc=s.add(Vc,P.LaPlace.inverse(U1,me,ve))},!0)))}return Vc||(Vc=s.symfunction("ilt",[He,me,ve])),Vc},!0)}},Statistics:{frequencyMap:function(W){for(var me={},ve=0,He=W.length;ve<He;ve++){var De=W[ve],Xe=De.toString();me[Xe]||(me[Xe]=0),me[Xe]++}return me},sort:function(W){return W.sort(function(me,ve){return(!me.isConstant()||!ve.isConstant())&&s.error("Unable to sort! All values must be numeric"),me.multiplier.subtract(ve.multiplier)})},count:function(W){return new o(W.length)},sum:function(W,me){for(var ve=new o(0),He=0,De=W.length;He<De;He++){var Xe=W[He].clone();me?ve=s.add(s.pow(s.subtract(Xe,me.clone()),new o(2)),ve):ve=s.add(Xe,ve)}return ve},mean:function(){var W=[].slice.call(arguments);return u(W[0])?P.Statistics.mean.apply(this,W[0].elements):s.divide(P.Statistics.sum(W),P.Statistics.count(W))},median:function(){var W=[].slice.call(arguments),me;if(u(W[0]))return P.Statistics.median.apply(this,W[0].elements);try{var ve=P.Statistics.sort(W),He=W.length;if(a.Utils.even(He)){var De=He/2;me=P.Statistics.mean(ve[De-1],ve[De])}else me=ve[Math.floor(He/2)]}catch{me=s.symfunction("median",W)}return me},mode:function(){var W=[].slice.call(arguments),me;if(u(W[0]))return P.Statistics.mode.apply(this,W[0].elements);var ve=P.Statistics.frequencyMap(W);if(a.Utils.keys(ve).length===1)me=W[0];else{var He={};for(var De in ve){var Xe=ve[De];if(!(Xe in He))He[Xe]=De;else{var qe=He[Xe];c(qe)?qe.push(De):He[Xe]=[De,He[Xe]]}}var Rs=He[Math.max.apply(null,a.Utils.keys(He))];c(Rs)?me=s.symfunction("mode",Rs.sort()):me=s.parse(Rs)}return me},gVariance:function(W,me){var ve=P.Statistics.mean.apply(P.Statistics,me),He=P.Statistics.sum(me,ve);return s.multiply(W,He)},variance:function(){var W=[].slice.call(arguments);if(u(W[0]))return P.Statistics.variance.apply(this,W[0].elements);var me=s.divide(new o(1),P.Statistics.count(W));return P.Statistics.gVariance(me,W)},sampleVariance:function(){var W=[].slice.call(arguments);if(u(W[0]))return P.Statistics.sampleVariance.apply(this,W[0].elements);var me=s.divide(new o(1),s.subtract(P.Statistics.count(W),new o(1)));return P.Statistics.gVariance(me,W)},standardDeviation:function(){var W=[].slice.call(arguments);return u(W[0])?P.Statistics.standardDeviation.apply(this,W[0].elements):s.pow(P.Statistics.variance.apply(P.Statistics,W),new o(1/2))},sampleStandardDeviation:function(){var W=[].slice.call(arguments);return u(W[0])?P.Statistics.sampleStandardDeviation.apply(this,W[0].elements):s.pow(P.Statistics.sampleVariance.apply(P.Statistics,W),new o(1/2))},zScore:function(W,me,ve){return s.divide(s.subtract(W,me),ve)}},Units:{table:{foot:"12 inch",meter:"100 cm",decimeter:"10 cm"}}};e.register([{name:"laplace",visible:!0,numargs:3,build:function(){return P.LaPlace.transform}},{name:"ilt",visible:!0,numargs:3,build:function(){return P.LaPlace.inverse}},{name:"mean",visible:!0,numargs:-1,build:function(){return P.Statistics.mean}},{name:"median",visible:!0,numargs:-1,build:function(){return P.Statistics.median}},{name:"mode",visible:!0,numargs:-1,build:function(){return P.Statistics.mode}},{name:"smpvar",visible:!0,numargs:-1,build:function(){return P.Statistics.sampleVariance}},{name:"variance",visible:!0,numargs:-1,build:function(){return P.Statistics.variance}},{name:"smpstdev",visible:!0,numargs:-1,build:function(){return P.Statistics.sampleStandardDeviation}},{name:"stdev",visible:!0,numargs:-1,build:function(){return P.Statistics.standardDeviation}},{name:"zscore",visible:!0,numargs:3,build:function(){return P.Statistics.zScore}}]),e.updateAPI()})(),t.exports=e}(Extra)),Extra.exports}requireExtra();function useMaths(){const t=m=>m.replace(/\\frac\s*([^{}\s])\s*([^{}\s])/g,"\\frac{$1}{$2}"),e=m=>m.replace(/\\sqrt\(([^)]+)\)/g,"\\sqrt{$1}").replace(/\\sqrt\s*([^{}\s(])/g,"\\sqrt{$1}"),a=m=>e(t(m).replace(/\\left|\\right/g,"").replace(/\\,/g,"").trim()),s=m=>{try{const g=nerdamer.convertFromLaTeX(a(m));return nerdamer(g)}catch(g){throw g}},o=(m,g)=>{try{return Math.abs(Number(m.subtract(g).evaluate().text()))<=.02}catch{return!1}},l=(m,g)=>{try{return m.eq(g)}catch{return!1}},u=(m,g)=>{const A=W=>a(W),P=W=>{const me=A(W).match(/\(([^)]+)\)/);if(!me)throw new Error("Bad coordinate");const[ve,He]=me[1].split(",").map(De=>De.trim());return{x:nerdamer(ve),y:nerdamer(He)}};try{const W=P(m),me=P(g);return W.x.eq(me.x)&&W.y.eq(me.y)}catch{return!1}},c=(m,g)=>{if(m=(m??"").trim(),g=(g??"").trim(),/^\s*\\?\(?[^,]+,[^)]+\)?\s*$/.test(m)||g.includes(","))return u(m,g);try{const A=s(m),P=s(g);return o(A,P)||l(A,P)}catch{return!1}};return{isCorrect:(m,g,A)=>{if(!Array.isArray(m)||!Array.isArray(g)||m.length!==g.length)return!1;if(A)return m.every((W,me)=>c(W,g[me]));const P=new Array(m.length).fill(!1);for(const W of g){let me=!1;for(let ve=0;ve<m.length;ve++)if(!P[ve]&&c(m[ve],W)){P[ve]=!0,me=!0;break}if(!me)return!1}return!0}}}function useRank(t){const{user:e,setUser:a}=reactExports.useContext(UserContext),{isCorrect:s}=useMaths(),[o,l]=reactExports.useState(e.rank),[u,c]=reactExports.useState(0),[d,m]=reactExports.useState(e.xp),[g,A]=reactExports.useState(e.streak);reactExports.useEffect(()=>{if(e&&a({...e,rank:o,progress:u,xp:d,streak:g}),e){const Xe=doc(db$1,"user-data",e.uid);updateDoc(Xe,{rank:o,progress:u,xp:d,streak:g})}},[o,u,d,g]),reactExports.useEffect(()=>{setTimeout(()=>{P()},1e3)},[d]);const P=()=>{const Xe=[100,300,1e3,5e3,1e4,1e5];let qe=d;for(let Rs=0;Rs<Xe.length;Rs++){if(qe<Xe[Rs]){const Vc=qe/Xe[Rs]*100;l(Rs+1),c(Vc);return}qe-=Xe[Rs]}l(Xe.length),c(100)};async function W(Xe){if(!e)return;const qe=doc(db$1,"user-data",e.uid);await updateDoc(qe,Xe),a({...e,...Xe})}function me(Xe){if(!t.rankRef.current)return;const So={x:0,y:-(t.rankRef.current.parentElement??t.rankRef.current).getBoundingClientRect().height/2},Do=10,eh=Math.floor(Xe/Do),Ko=Xe%Do,Ge=.08,An=Date.now(),wt=[];for(let Bs=0;Bs<eh;Bs++)wt.push({id:An+Bs,to:So,amount:Do,delay:Bs*Ge,pitchIndex:Bs});Ko>0&&wt.push({id:An+eh,to:So,amount:Ko,delay:eh*Ge,pitchIndex:eh}),t.setXpFlyers(Bs=>[...Bs,...wt])}async function ve(Xe,qe){const Rs=s(Xe,qe);Rs?(He(),A(Vc=>{const So=Vc+1,Do=So*10;return m(eh=>{const Ko=eh+Do;return W({xp:Ko,streak:So}),me(Do),Ko}),So})):(De(),A(0)),t.setIsRight(Rs),t.setShowNoti(!0)}function He(){try{const Xe=new Audio(correctSound);Xe.volume=.6,Xe.play().catch(()=>{})}catch(Xe){console.error("Could not play sound",Xe)}}function De(){try{const Xe=new Audio(incorrectSound);Xe.volume=.6,Xe.play().catch(()=>{})}catch(Xe){console.error("Could not play sound",Xe)}}return{rank:o,progress:u,setProgress:c,xp:d,streak:g,onCheck:ve}}var lottie$2={exports:{}},lottie$1=lottie$2.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,function(module,exports){typeof document<"u"&&typeof navigator<"u"&&function(t,e){module.exports=e()}(lottie$1,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(t){return document.createElement(t)}function extendPrototype(t,e){var a,s=t.length,o;for(a=0;a<s;a+=1){o=t[a].prototype;for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e.prototype[l]=o[l])}}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}var audioControllerFactory=function(){function t(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(a){this.audios.push(a)},pause:function(){var a,s=this.audios.length;for(a=0;a<s;a+=1)this.audios[a].pause()},resume:function(){var a,s=this.audios.length;for(a=0;a<s;a+=1)this.audios[a].resume()},setRate:function(a){var s,o=this.audios.length;for(s=0;s<o;s+=1)this.audios[s].setRate(a)},createAudio:function(a){return this.audioFactory?this.audioFactory(a):window.Howl?new window.Howl({src:[a]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(a){this.audioFactory=a},setVolume:function(a){this._volume=a,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var a,s=this.audios.length;for(a=0;a<s;a+=1)this.audios[a].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),createTypedArray=function(){function t(a,s){var o=0,l=[],u;switch(a){case"int16":case"uint8c":u=1;break;default:u=1.1;break}for(o=0;o<s;o+=1)l.push(u);return l}function e(a,s){return a==="float32"?new Float32Array(s):a==="int16"?new Int16Array(s):a==="uint8c"?new Uint8ClampedArray(s):t(a,s)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?e:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function _typeof$6(t){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(t)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e,a=t.length;for(e=0;e<a;e+=1)BMMath[t[e]]=Math[t[e]]})(),BMMath.random=Math.random,BMMath.abs=function(t){var e=_typeof$6(t);if(e==="object"&&t.length){var a=createSizedArray(t.length),s,o=t.length;for(s=0;s<o;s+=1)a[s]=Math.abs(t[s]);return a}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,a,s){this.type=t,this.currentTime=e,this.totalTime=a,this.direction=s<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,a,s){this.type=t,this.currentLoop=a,this.totalLoops=e,this.direction=s<0?-1:1}function BMSegmentStartEvent(t,e,a){this.type=t,this.firstFrame=e,this.totalFrames=a}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}var createElementID=function(){var t=0;return function(){return t+=1,idPrefix$1+"__lottie_element_"+t}}();function HSVtoRGB(t,e,a){var s,o,l,u,c,d,m,g;switch(u=Math.floor(t*6),c=t*6-u,d=a*(1-e),m=a*(1-c*e),g=a*(1-(1-c)*e),u%6){case 0:s=a,o=g,l=d;break;case 1:s=m,o=a,l=d;break;case 2:s=d,o=a,l=g;break;case 3:s=d,o=m,l=a;break;case 4:s=g,o=d,l=a;break;case 5:s=a,o=d,l=m;break}return[s,o,l]}function RGBtoHSV(t,e,a){var s=Math.max(t,e,a),o=Math.min(t,e,a),l=s-o,u,c=s===0?0:l/s,d=s/255;switch(s){case o:u=0;break;case t:u=e-a+l*(e<a?6:0),u/=6*l;break;case e:u=a-t+l*2,u/=6*l;break;case a:u=t-e+l*4,u/=6*l;break}return[u,c,d]}function addSaturationToRGB(t,e){var a=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return a[1]+=e,a[1]>1?a[1]=1:a[1]<=0&&(a[1]=0),HSVtoRGB(a[0],a[1],a[2])}function addBrightnessToRGB(t,e){var a=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return a[2]+=e,a[2]>1?a[2]=1:a[2]<0&&(a[2]=0),HSVtoRGB(a[0],a[1],a[2])}function addHueToRGB(t,e){var a=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return a[0]+=e/360,a[0]>1?a[0]-=1:a[0]<0&&(a[0]+=1),HSVtoRGB(a[0],a[1],a[2])}var rgbToHex=function(){var t=[],e,a;for(e=0;e<256;e+=1)a=e.toString(16),t[e]=a.length===1?"0"+a:a;return function(s,o,l){return s<0&&(s=0),o<0&&(o=0),l<0&&(l=0),"#"+t[s]+t[o]+t[l]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e};function createNS(t){return document.createElementNS(svgNS,t)}function _typeof$5(t){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(t)}var dataManager=function(){var t=1,e=[],a,s,o={onmessage:function(){},postMessage:function(W){a({data:W})}},l={postMessage:function(W){o.onmessage({data:W})}};function u(P){if(window.Worker&&window.Blob&&getWebWorker()){var W=new Blob(["var _workerSelf = self; self.onmessage = ",P.toString()],{type:"text/javascript"}),me=URL.createObjectURL(W);return new Worker(me)}return a=P,o}function c(){s||(s=u(function(W){function me(){function He(df,Fc){var _h,qc,Mh=df.length,cf,mf,a1,s1;for(qc=0;qc<Mh;qc+=1)if(_h=df[qc],"ks"in _h&&!_h.completed){if(_h.completed=!0,_h.hasMask){var E1=_h.masksProperties;for(mf=E1.length,cf=0;cf<mf;cf+=1)if(E1[cf].pt.k.i)Vc(E1[cf].pt.k);else for(s1=E1[cf].pt.k.length,a1=0;a1<s1;a1+=1)E1[cf].pt.k[a1].s&&Vc(E1[cf].pt.k[a1].s[0]),E1[cf].pt.k[a1].e&&Vc(E1[cf].pt.k[a1].e[0])}_h.ty===0?(_h.layers=qe(_h.refId,Fc),He(_h.layers,Fc)):_h.ty===4?Rs(_h.shapes):_h.ty===5&&Bs(_h)}}function De(df,Fc){if(df){var _h=0,qc=df.length;for(_h=0;_h<qc;_h+=1)df[_h].t===1&&(df[_h].data.layers=qe(df[_h].data.refId,Fc),He(df[_h].data.layers,Fc))}}function Xe(df,Fc){for(var _h=0,qc=Fc.length;_h<qc;){if(Fc[_h].id===df)return Fc[_h];_h+=1}return null}function qe(df,Fc){var _h=Xe(df,Fc);return _h?_h.layers.__used?JSON.parse(JSON.stringify(_h.layers)):(_h.layers.__used=!0,_h.layers):null}function Rs(df){var Fc,_h=df.length,qc,Mh;for(Fc=_h-1;Fc>=0;Fc-=1)if(df[Fc].ty==="sh")if(df[Fc].ks.k.i)Vc(df[Fc].ks.k);else for(Mh=df[Fc].ks.k.length,qc=0;qc<Mh;qc+=1)df[Fc].ks.k[qc].s&&Vc(df[Fc].ks.k[qc].s[0]),df[Fc].ks.k[qc].e&&Vc(df[Fc].ks.k[qc].e[0]);else df[Fc].ty==="gr"&&Rs(df[Fc].it)}function Vc(df){var Fc,_h=df.i.length;for(Fc=0;Fc<_h;Fc+=1)df.i[Fc][0]+=df.v[Fc][0],df.i[Fc][1]+=df.v[Fc][1],df.o[Fc][0]+=df.v[Fc][0],df.o[Fc][1]+=df.v[Fc][1]}function So(df,Fc){var _h=Fc?Fc.split("."):[100,100,100];return df[0]>_h[0]?!0:_h[0]>df[0]?!1:df[1]>_h[1]?!0:_h[1]>df[1]?!1:df[2]>_h[2]?!0:_h[2]>df[2]?!1:null}var Do=function(){var df=[4,4,14];function Fc(qc){var Mh=qc.t.d;qc.t.d={k:[{s:Mh,t:0}]}}function _h(qc){var Mh,cf=qc.length;for(Mh=0;Mh<cf;Mh+=1)qc[Mh].ty===5&&Fc(qc[Mh])}return function(qc){if(So(df,qc.v)&&(_h(qc.layers),qc.assets)){var Mh,cf=qc.assets.length;for(Mh=0;Mh<cf;Mh+=1)qc.assets[Mh].layers&&_h(qc.assets[Mh].layers)}}}(),eh=function(){var df=[4,7,99];return function(Fc){if(Fc.chars&&!So(df,Fc.v)){var _h,qc=Fc.chars.length;for(_h=0;_h<qc;_h+=1){var Mh=Fc.chars[_h];Mh.data&&Mh.data.shapes&&(Rs(Mh.data.shapes),Mh.data.ip=0,Mh.data.op=99999,Mh.data.st=0,Mh.data.sr=1,Mh.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Fc.chars[_h].t||(Mh.data.shapes.push({ty:"no"}),Mh.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Ko=function(){var df=[5,7,15];function Fc(qc){var Mh=qc.t.p;typeof Mh.a=="number"&&(Mh.a={a:0,k:Mh.a}),typeof Mh.p=="number"&&(Mh.p={a:0,k:Mh.p}),typeof Mh.r=="number"&&(Mh.r={a:0,k:Mh.r})}function _h(qc){var Mh,cf=qc.length;for(Mh=0;Mh<cf;Mh+=1)qc[Mh].ty===5&&Fc(qc[Mh])}return function(qc){if(So(df,qc.v)&&(_h(qc.layers),qc.assets)){var Mh,cf=qc.assets.length;for(Mh=0;Mh<cf;Mh+=1)qc.assets[Mh].layers&&_h(qc.assets[Mh].layers)}}}(),Ge=function(){var df=[4,1,9];function Fc(qc){var Mh,cf=qc.length,mf,a1;for(Mh=0;Mh<cf;Mh+=1)if(qc[Mh].ty==="gr")Fc(qc[Mh].it);else if(qc[Mh].ty==="fl"||qc[Mh].ty==="st")if(qc[Mh].c.k&&qc[Mh].c.k[0].i)for(a1=qc[Mh].c.k.length,mf=0;mf<a1;mf+=1)qc[Mh].c.k[mf].s&&(qc[Mh].c.k[mf].s[0]/=255,qc[Mh].c.k[mf].s[1]/=255,qc[Mh].c.k[mf].s[2]/=255,qc[Mh].c.k[mf].s[3]/=255),qc[Mh].c.k[mf].e&&(qc[Mh].c.k[mf].e[0]/=255,qc[Mh].c.k[mf].e[1]/=255,qc[Mh].c.k[mf].e[2]/=255,qc[Mh].c.k[mf].e[3]/=255);else qc[Mh].c.k[0]/=255,qc[Mh].c.k[1]/=255,qc[Mh].c.k[2]/=255,qc[Mh].c.k[3]/=255}function _h(qc){var Mh,cf=qc.length;for(Mh=0;Mh<cf;Mh+=1)qc[Mh].ty===4&&Fc(qc[Mh].shapes)}return function(qc){if(So(df,qc.v)&&(_h(qc.layers),qc.assets)){var Mh,cf=qc.assets.length;for(Mh=0;Mh<cf;Mh+=1)qc.assets[Mh].layers&&_h(qc.assets[Mh].layers)}}}(),An=function(){var df=[4,4,18];function Fc(qc){var Mh,cf=qc.length,mf,a1;for(Mh=cf-1;Mh>=0;Mh-=1)if(qc[Mh].ty==="sh")if(qc[Mh].ks.k.i)qc[Mh].ks.k.c=qc[Mh].closed;else for(a1=qc[Mh].ks.k.length,mf=0;mf<a1;mf+=1)qc[Mh].ks.k[mf].s&&(qc[Mh].ks.k[mf].s[0].c=qc[Mh].closed),qc[Mh].ks.k[mf].e&&(qc[Mh].ks.k[mf].e[0].c=qc[Mh].closed);else qc[Mh].ty==="gr"&&Fc(qc[Mh].it)}function _h(qc){var Mh,cf,mf=qc.length,a1,s1,E1,T1;for(cf=0;cf<mf;cf+=1){if(Mh=qc[cf],Mh.hasMask){var z1=Mh.masksProperties;for(s1=z1.length,a1=0;a1<s1;a1+=1)if(z1[a1].pt.k.i)z1[a1].pt.k.c=z1[a1].cl;else for(T1=z1[a1].pt.k.length,E1=0;E1<T1;E1+=1)z1[a1].pt.k[E1].s&&(z1[a1].pt.k[E1].s[0].c=z1[a1].cl),z1[a1].pt.k[E1].e&&(z1[a1].pt.k[E1].e[0].c=z1[a1].cl)}Mh.ty===4&&Fc(Mh.shapes)}}return function(qc){if(So(df,qc.v)&&(_h(qc.layers),qc.assets)){var Mh,cf=qc.assets.length;for(Mh=0;Mh<cf;Mh+=1)qc.assets[Mh].layers&&_h(qc.assets[Mh].layers)}}}();function wt(df){df.__complete||(Ge(df),Do(df),eh(df),Ko(df),An(df),He(df.layers,df.assets),De(df.chars,df.assets),df.__complete=!0)}function Bs(df){df.t.a.length===0&&"m"in df.t.p}var yh={};return yh.completeData=wt,yh.checkColors=Ge,yh.checkChars=eh,yh.checkPathProperties=Ko,yh.checkShapes=An,yh.completeLayers=He,yh}if(l.dataManager||(l.dataManager=me()),l.assetLoader||(l.assetLoader=function(){function He(Xe){var qe=Xe.getResponseHeader("content-type");return qe&&Xe.responseType==="json"&&qe.indexOf("json")!==-1||Xe.response&&_typeof$5(Xe.response)==="object"?Xe.response:Xe.response&&typeof Xe.response=="string"?JSON.parse(Xe.response):Xe.responseText?JSON.parse(Xe.responseText):null}function De(Xe,qe,Rs,Vc){var So,Do=new XMLHttpRequest;try{Do.responseType="json"}catch{}Do.onreadystatechange=function(){if(Do.readyState===4)if(Do.status===200)So=He(Do),Rs(So);else try{So=He(Do),Rs(So)}catch(eh){Vc&&Vc(eh)}};try{Do.open(["G","E","T"].join(""),Xe,!0)}catch{Do.open(["G","E","T"].join(""),qe+"/"+Xe,!0)}Do.send()}return{load:De}}()),W.data.type==="loadAnimation")l.assetLoader.load(W.data.path,W.data.fullPath,function(He){l.dataManager.completeData(He),l.postMessage({id:W.data.id,payload:He,status:"success"})},function(){l.postMessage({id:W.data.id,status:"error"})});else if(W.data.type==="complete"){var ve=W.data.animation;l.dataManager.completeData(ve),l.postMessage({id:W.data.id,payload:ve,status:"success"})}else W.data.type==="loadData"&&l.assetLoader.load(W.data.path,W.data.fullPath,function(He){l.postMessage({id:W.data.id,payload:He,status:"success"})},function(){l.postMessage({id:W.data.id,status:"error"})})}),s.onmessage=function(P){var W=P.data,me=W.id,ve=e[me];e[me]=null,W.status==="success"?ve.onComplete(W.payload):ve.onError&&ve.onError()})}function d(P,W){t+=1;var me="processId_"+t;return e[me]={onComplete:P,onError:W},me}function m(P,W,me){c();var ve=d(W,me);s.postMessage({type:"loadAnimation",path:P,fullPath:window.location.origin+window.location.pathname,id:ve})}function g(P,W,me){c();var ve=d(W,me);s.postMessage({type:"loadData",path:P,fullPath:window.location.origin+window.location.pathname,id:ve})}function A(P,W,me){c();var ve=d(W,me);s.postMessage({type:"complete",animation:P,id:ve})}return{loadAnimation:m,loadData:g,completeAnimation:A}}(),ImagePreloader=function(){var t=function(){var De=createTag("canvas");De.width=1,De.height=1;var Xe=De.getContext("2d");return Xe.fillStyle="rgba(0,0,0,0)",Xe.fillRect(0,0,1,1),De}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function a(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function s(De,Xe,qe){var Rs="";if(De.e)Rs=De.p;else if(Xe){var Vc=De.p;Vc.indexOf("images/")!==-1&&(Vc=Vc.split("/")[1]),Rs=Xe+Vc}else Rs=qe,Rs+=De.u?De.u:"",Rs+=De.p;return Rs}function o(De){var Xe=0,qe=setInterval((function(){var Rs=De.getBBox();(Rs.width||Xe>500)&&(this._imageLoaded(),clearInterval(qe)),Xe+=1}).bind(this),50)}function l(De){var Xe=s(De,this.assetsPath,this.path),qe=createNS("image");isSafari?this.testImageLoaded(qe):qe.addEventListener("load",this._imageLoaded,!1),qe.addEventListener("error",(function(){Rs.img=t,this._imageLoaded()}).bind(this),!1),qe.setAttributeNS("http://www.w3.org/1999/xlink","href",Xe),this._elementHelper.append?this._elementHelper.append(qe):this._elementHelper.appendChild(qe);var Rs={img:qe,assetData:De};return Rs}function u(De){var Xe=s(De,this.assetsPath,this.path),qe=createTag("img");qe.crossOrigin="anonymous",qe.addEventListener("load",this._imageLoaded,!1),qe.addEventListener("error",(function(){Rs.img=t,this._imageLoaded()}).bind(this),!1),qe.src=Xe;var Rs={img:qe,assetData:De};return Rs}function c(De){var Xe={assetData:De},qe=s(De,this.assetsPath,this.path);return dataManager.loadData(qe,(function(Rs){Xe.img=Rs,this._footageLoaded()}).bind(this),(function(){Xe.img={},this._footageLoaded()}).bind(this)),Xe}function d(De,Xe){this.imagesLoadedCb=Xe;var qe,Rs=De.length;for(qe=0;qe<Rs;qe+=1)De[qe].layers||(!De[qe].t||De[qe].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(De[qe]))):De[qe].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(De[qe]))))}function m(De){this.path=De||""}function g(De){this.assetsPath=De||""}function A(De){for(var Xe=0,qe=this.images.length;Xe<qe;){if(this.images[Xe].assetData===De)return this.images[Xe].img;Xe+=1}return null}function P(){this.imagesLoadedCb=null,this.images.length=0}function W(){return this.totalImages===this.loadedAssets}function me(){return this.totalFootages===this.loadedFootagesCount}function ve(De,Xe){De==="svg"?(this._elementHelper=Xe,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function He(){this._imageLoaded=e.bind(this),this._footageLoaded=a.bind(this),this.testImageLoaded=o.bind(this),this.createFootageData=c.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return He.prototype={loadAssets:d,setAssetsPath:g,setPath:m,loadedImages:W,loadedFootages:me,destroy:P,getAsset:A,createImgData:u,createImageData:l,imageLoaded:e,footageLoaded:a,setCacheType:ve},He}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,a){if(this._cbs[e])for(var s=this._cbs[e],o=0;o<s.length;o+=1)s[o](a)},addEventListener:function(e,a){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(a),(function(){this.removeEventListener(e,a)}).bind(this)},removeEventListener:function(e,a){if(!a)this._cbs[e]=null;else if(this._cbs[e]){for(var s=0,o=this._cbs[e].length;s<o;)this._cbs[e][s]===a&&(this._cbs[e].splice(s,1),s-=1,o-=1),s+=1;this._cbs[e].length||(this._cbs[e]=null)}}};var markerParser=function(){function t(e){for(var a=e.split(`\r
`),s={},o,l=0,u=0;u<a.length;u+=1)o=a[u].split(":"),o.length===2&&(s[o[0]]=o[1].trim(),l+=1);if(l===0)throw new Error;return s}return function(e){for(var a=[],s=0;s<e.length;s+=1){var o=e[s],l={time:o.tm,duration:o.dr};try{l.payload=JSON.parse(e[s].cm)}catch{try{l.payload=t(e[s].cm)}catch{l.payload={name:e[s].cm}}}a.push(l)}return a}}(),ProjectInterface=function(){function t(e){this.compositions.push(e)}return function(){function e(a){for(var s=0,o=this.compositions.length;s<o;){if(this.compositions[s].data&&this.compositions[s].data.nm===a)return this.compositions[s].prepareFrame&&this.compositions[s].data.xt&&this.compositions[s].prepareFrame(this.currentFrame),this.compositions[s].compInterface;s+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),renderers={},registerRenderer=function(e,a){renderers[e]=a};function getRenderer(t){return renderers[t]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var t in renderers)if(renderers[t])return t;return""}function _typeof$4(t){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(t)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";t.animType?e=t.animType:t.renderer&&(e=t.renderer);var a=getRenderer(e);this.renderer=new a(this,t.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,t.loop===""||t.loop===null||t.loop===void 0||t.loop===!0?this.loop=!0:t.loop===!1?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay="autoplay"in t?t.autoplay:!0,this.name=t.name?t.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(t,"autoloadSegments")?t.autoloadSegments:!0,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(t.path.lastIndexOf("\\")!==-1?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(t){dataManager.completeAnimation(t,this.configAnimation)},AnimationItem.prototype.setData=function(t,e){e&&_typeof$4(e)!=="object"&&(e=JSON.parse(e));var a={wrapper:t,animationData:e},s=t.attributes;a.path=s.getNamedItem("data-animation-path")?s.getNamedItem("data-animation-path").value:s.getNamedItem("data-bm-path")?s.getNamedItem("data-bm-path").value:s.getNamedItem("bm-path")?s.getNamedItem("bm-path").value:"",a.animType=s.getNamedItem("data-anim-type")?s.getNamedItem("data-anim-type").value:s.getNamedItem("data-bm-type")?s.getNamedItem("data-bm-type").value:s.getNamedItem("bm-type")?s.getNamedItem("bm-type").value:s.getNamedItem("data-bm-renderer")?s.getNamedItem("data-bm-renderer").value:s.getNamedItem("bm-renderer")?s.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var o=s.getNamedItem("data-anim-loop")?s.getNamedItem("data-anim-loop").value:s.getNamedItem("data-bm-loop")?s.getNamedItem("data-bm-loop").value:s.getNamedItem("bm-loop")?s.getNamedItem("bm-loop").value:"";o==="false"?a.loop=!1:o==="true"?a.loop=!0:o!==""&&(a.loop=parseInt(o,10));var l=s.getNamedItem("data-anim-autoplay")?s.getNamedItem("data-anim-autoplay").value:s.getNamedItem("data-bm-autoplay")?s.getNamedItem("data-bm-autoplay").value:s.getNamedItem("bm-autoplay")?s.getNamedItem("bm-autoplay").value:!0;a.autoplay=l!=="false",a.name=s.getNamedItem("data-name")?s.getNamedItem("data-name").value:s.getNamedItem("data-bm-name")?s.getNamedItem("data-bm-name").value:s.getNamedItem("bm-name")?s.getNamedItem("bm-name").value:"";var u=s.getNamedItem("data-anim-prerender")?s.getNamedItem("data-anim-prerender").value:s.getNamedItem("data-bm-prerender")?s.getNamedItem("data-bm-prerender").value:s.getNamedItem("bm-prerender")?s.getNamedItem("bm-prerender").value:"";u==="false"&&(a.prerender=!1),a.path?this.setParams(a):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e=this.animationData.layers,a,s=e.length,o=t.layers,l,u=o.length;for(l=0;l<u;l+=1)for(a=0;a<s;){if(e[a].id===o[l].id){e[a]=o[l];break}a+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(s=t.assets.length,a=0;a<s;a+=1)this.animationData.assets.push(t.assets[a]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(t){this.animationData=t;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||t.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var e=t.shift();this.timeCompleted=e.time*this.frameRate;var a=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(a,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var t=this.animationData.segments;t||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(t,e){var a=typeof t=="number"?t:void 0,s=typeof e=="number"?e:void 0;this.renderer.updateContainerSize(a,s)},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,a=0;a<this.markers.length;a+=1)if(e=this.markers[a],e.payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,a){if(!(a&&this.name!==a)){var s=Number(t);if(isNaN(s)){var o=this.getMarkerData(t);o&&this.goToAndStop(o.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,a){if(!(a&&this.name!==a)){var s=Number(t);if(isNaN(s)){var o=this.getMarkerData(t);o&&(o.duration?this.playSegments([o.time,o.time+o.duration],!0):this.goToAndStop(o.time,!0))}else this.goToAndStop(s,e,a);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!(this.isPaused===!0||this.isLoaded===!1)){var e=this.currentRawFrame+t*this.frameModifier,a=!1;e>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(a=!0,e=this.totalFrames-1):e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):e<0?this.checkSegments(e%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(a=!0,e=0)):this.setCurrentRawFrameValue(e),a&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var a=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?a=t:this.currentRawFrame+this.firstFrame>e&&(a=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,a!==-1&&this.goToAndStop(a,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),_typeof$4(t[0])==="object"){var a,s=t.length;for(a=0;a<s;a+=1)this.segments.push(t[a])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return this.segments.length?(this.adjustSegment(this.segments.shift(),t),!0):!1},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(t){this.loop=t},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var a=t.p;a.indexOf("images/")!==-1&&(a=a.split("/")[1]),e=this.assetsPath+a}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,a=this.assets.length;e<a;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(t,e,a){try{var s=this.renderer.getElementByPath(t);s.updateDocumentData(e,a)}catch{}},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(t,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}t==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),t==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),t==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),t==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),t==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var t={},e=[],a=0,s=0,o=0,l=!0,u=!1;function c(Fc){for(var _h=0,qc=Fc.target;_h<s;)e[_h].animation===qc&&(e.splice(_h,1),_h-=1,s-=1,qc.isPaused||A()),_h+=1}function d(Fc,_h){if(!Fc)return null;for(var qc=0;qc<s;){if(e[qc].elem===Fc&&e[qc].elem!==null)return e[qc].animation;qc+=1}var Mh=new AnimationItem;return P(Mh,Fc),Mh.setData(Fc,_h),Mh}function m(){var Fc,_h=e.length,qc=[];for(Fc=0;Fc<_h;Fc+=1)qc.push(e[Fc].animation);return qc}function g(){o+=1,Ge()}function A(){o-=1}function P(Fc,_h){Fc.addEventListener("destroy",c),Fc.addEventListener("_active",g),Fc.addEventListener("_idle",A),e.push({elem:_h,animation:Fc}),s+=1}function W(Fc){var _h=new AnimationItem;return P(_h,null),_h.setParams(Fc),_h}function me(Fc,_h){var qc;for(qc=0;qc<s;qc+=1)e[qc].animation.setSpeed(Fc,_h)}function ve(Fc,_h){var qc;for(qc=0;qc<s;qc+=1)e[qc].animation.setDirection(Fc,_h)}function He(Fc){var _h;for(_h=0;_h<s;_h+=1)e[_h].animation.play(Fc)}function De(Fc){var _h=Fc-a,qc;for(qc=0;qc<s;qc+=1)e[qc].animation.advanceTime(_h);a=Fc,o&&!u?window.requestAnimationFrame(De):l=!0}function Xe(Fc){a=Fc,window.requestAnimationFrame(De)}function qe(Fc){var _h;for(_h=0;_h<s;_h+=1)e[_h].animation.pause(Fc)}function Rs(Fc,_h,qc){var Mh;for(Mh=0;Mh<s;Mh+=1)e[Mh].animation.goToAndStop(Fc,_h,qc)}function Vc(Fc){var _h;for(_h=0;_h<s;_h+=1)e[_h].animation.stop(Fc)}function So(Fc){var _h;for(_h=0;_h<s;_h+=1)e[_h].animation.togglePause(Fc)}function Do(Fc){var _h;for(_h=s-1;_h>=0;_h-=1)e[_h].animation.destroy(Fc)}function eh(Fc,_h,qc){var Mh=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),cf,mf=Mh.length;for(cf=0;cf<mf;cf+=1)qc&&Mh[cf].setAttribute("data-bm-type",qc),d(Mh[cf],Fc);if(_h&&mf===0){qc||(qc="svg");var a1=document.getElementsByTagName("body")[0];a1.innerText="";var s1=createTag("div");s1.style.width="100%",s1.style.height="100%",s1.setAttribute("data-bm-type",qc),a1.appendChild(s1),d(s1,Fc)}}function Ko(){var Fc;for(Fc=0;Fc<s;Fc+=1)e[Fc].animation.resize()}function Ge(){!u&&o&&l&&(window.requestAnimationFrame(Xe),l=!1)}function An(){u=!0}function wt(){u=!1,Ge()}function Bs(Fc,_h){var qc;for(qc=0;qc<s;qc+=1)e[qc].animation.setVolume(Fc,_h)}function yh(Fc){var _h;for(_h=0;_h<s;_h+=1)e[_h].animation.mute(Fc)}function df(Fc){var _h;for(_h=0;_h<s;_h+=1)e[_h].animation.unmute(Fc)}return t.registerAnimation=d,t.loadAnimation=W,t.setSpeed=me,t.setDirection=ve,t.play=He,t.pause=qe,t.stop=Vc,t.togglePause=So,t.searchAnimations=eh,t.resize=Ko,t.goToAndStop=Rs,t.destroy=Do,t.freeze=An,t.unfreeze=wt,t.setVolume=Bs,t.mute=yh,t.unmute=df,t.getRegisteredAnimations=m,t}(),BezierFactory=function(){var t={};t.getBezierEasing=a;var e={};function a(Xe,qe,Rs,Vc,So){var Do=So||("bez_"+Xe+"_"+qe+"_"+Rs+"_"+Vc).replace(/\./g,"p");if(e[Do])return e[Do];var eh=new De([Xe,qe,Rs,Vc]);return e[Do]=eh,eh}var s=4,o=.001,l=1e-7,u=10,c=11,d=1/(c-1),m=typeof Float32Array=="function";function g(Xe,qe){return 1-3*qe+3*Xe}function A(Xe,qe){return 3*qe-6*Xe}function P(Xe){return 3*Xe}function W(Xe,qe,Rs){return((g(qe,Rs)*Xe+A(qe,Rs))*Xe+P(qe))*Xe}function me(Xe,qe,Rs){return 3*g(qe,Rs)*Xe*Xe+2*A(qe,Rs)*Xe+P(qe)}function ve(Xe,qe,Rs,Vc,So){var Do,eh,Ko=0;do eh=qe+(Rs-qe)/2,Do=W(eh,Vc,So)-Xe,Do>0?Rs=eh:qe=eh;while(Math.abs(Do)>l&&++Ko<u);return eh}function He(Xe,qe,Rs,Vc){for(var So=0;So<s;++So){var Do=me(qe,Rs,Vc);if(Do===0)return qe;var eh=W(qe,Rs,Vc)-Xe;qe-=eh/Do}return qe}function De(Xe){this._p=Xe,this._mSampleValues=m?new Float32Array(c):new Array(c),this._precomputed=!1,this.get=this.get.bind(this)}return De.prototype={get:function(qe){var Rs=this._p[0],Vc=this._p[1],So=this._p[2],Do=this._p[3];return this._precomputed||this._precompute(),Rs===Vc&&So===Do?qe:qe===0?0:qe===1?1:W(this._getTForX(qe),Vc,Do)},_precompute:function(){var qe=this._p[0],Rs=this._p[1],Vc=this._p[2],So=this._p[3];this._precomputed=!0,(qe!==Rs||Vc!==So)&&this._calcSampleValues()},_calcSampleValues:function(){for(var qe=this._p[0],Rs=this._p[2],Vc=0;Vc<c;++Vc)this._mSampleValues[Vc]=W(Vc*d,qe,Rs)},_getTForX:function(qe){for(var Rs=this._p[0],Vc=this._p[2],So=this._mSampleValues,Do=0,eh=1,Ko=c-1;eh!==Ko&&So[eh]<=qe;++eh)Do+=d;--eh;var Ge=(qe-So[eh])/(So[eh+1]-So[eh]),An=Do+Ge*d,wt=me(An,Rs,Vc);return wt>=o?He(qe,An,Rs,Vc):wt===0?An:ve(qe,Do,Do+d,Rs,Vc)}},t}(),pooling=function(){function t(e){return e.concat(createSizedArray(e.length))}return{double:t}}(),poolFactory=function(){return function(t,e,a){var s=0,o=t,l=createSizedArray(o),u={newElement:c,release:d};function c(){var m;return s?(s-=1,m=l[s]):m=e(),m}function d(m){s===o&&(l=pooling.double(l),o*=2),a&&a(m),l[s]=m,s+=1}return u}}(),bezierLengthPool=function(){function t(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,t)}(),segmentsLengthPool=function(){function t(){return{lengths:[],totalLength:0}}function e(a){var s,o=a.lengths.length;for(s=0;s<o;s+=1)bezierLengthPool.release(a.lengths[s]);a.lengths.length=0}return poolFactory(8,t,e)}();function bezFunction(){var t=Math;function e(P,W,me,ve,He,De){var Xe=P*ve+W*He+me*De-He*ve-De*P-me*W;return Xe>-.001&&Xe<.001}function a(P,W,me,ve,He,De,Xe,qe,Rs){if(me===0&&De===0&&Rs===0)return e(P,W,ve,He,Xe,qe);var Vc=t.sqrt(t.pow(ve-P,2)+t.pow(He-W,2)+t.pow(De-me,2)),So=t.sqrt(t.pow(Xe-P,2)+t.pow(qe-W,2)+t.pow(Rs-me,2)),Do=t.sqrt(t.pow(Xe-ve,2)+t.pow(qe-He,2)+t.pow(Rs-De,2)),eh;return Vc>So?Vc>Do?eh=Vc-So-Do:eh=Do-So-Vc:Do>So?eh=Do-So-Vc:eh=So-Vc-Do,eh>-1e-4&&eh<1e-4}var s=function(){return function(P,W,me,ve){var He=getDefaultCurveSegments(),De,Xe,qe,Rs,Vc,So=0,Do,eh=[],Ko=[],Ge=bezierLengthPool.newElement();for(qe=me.length,De=0;De<He;De+=1){for(Vc=De/(He-1),Do=0,Xe=0;Xe<qe;Xe+=1)Rs=bmPow(1-Vc,3)*P[Xe]+3*bmPow(1-Vc,2)*Vc*me[Xe]+3*(1-Vc)*bmPow(Vc,2)*ve[Xe]+bmPow(Vc,3)*W[Xe],eh[Xe]=Rs,Ko[Xe]!==null&&(Do+=bmPow(eh[Xe]-Ko[Xe],2)),Ko[Xe]=eh[Xe];Do&&(Do=bmSqrt(Do),So+=Do),Ge.percents[De]=Vc,Ge.lengths[De]=So}return Ge.addedLength=So,Ge}}();function o(P){var W=segmentsLengthPool.newElement(),me=P.c,ve=P.v,He=P.o,De=P.i,Xe,qe=P._length,Rs=W.lengths,Vc=0;for(Xe=0;Xe<qe-1;Xe+=1)Rs[Xe]=s(ve[Xe],ve[Xe+1],He[Xe],De[Xe+1]),Vc+=Rs[Xe].addedLength;return me&&qe&&(Rs[Xe]=s(ve[Xe],ve[0],He[Xe],De[0]),Vc+=Rs[Xe].addedLength),W.totalLength=Vc,W}function l(P){this.segmentLength=0,this.points=new Array(P)}function u(P,W){this.partialLength=P,this.point=W}var c=function(){var P={};return function(W,me,ve,He){var De=(W[0]+"_"+W[1]+"_"+me[0]+"_"+me[1]+"_"+ve[0]+"_"+ve[1]+"_"+He[0]+"_"+He[1]).replace(/\./g,"p");if(!P[De]){var Xe=getDefaultCurveSegments(),qe,Rs,Vc,So,Do,eh=0,Ko,Ge,An=null;W.length===2&&(W[0]!==me[0]||W[1]!==me[1])&&e(W[0],W[1],me[0],me[1],W[0]+ve[0],W[1]+ve[1])&&e(W[0],W[1],me[0],me[1],me[0]+He[0],me[1]+He[1])&&(Xe=2);var wt=new l(Xe);for(Vc=ve.length,qe=0;qe<Xe;qe+=1){for(Ge=createSizedArray(Vc),Do=qe/(Xe-1),Ko=0,Rs=0;Rs<Vc;Rs+=1)So=bmPow(1-Do,3)*W[Rs]+3*bmPow(1-Do,2)*Do*(W[Rs]+ve[Rs])+3*(1-Do)*bmPow(Do,2)*(me[Rs]+He[Rs])+bmPow(Do,3)*me[Rs],Ge[Rs]=So,An!==null&&(Ko+=bmPow(Ge[Rs]-An[Rs],2));Ko=bmSqrt(Ko),eh+=Ko,wt.points[qe]=new u(Ko,Ge),An=Ge}wt.segmentLength=eh,P[De]=wt}return P[De]}}();function d(P,W){var me=W.percents,ve=W.lengths,He=me.length,De=bmFloor((He-1)*P),Xe=P*W.addedLength,qe=0;if(De===He-1||De===0||Xe===ve[De])return me[De];for(var Rs=ve[De]>Xe?-1:1,Vc=!0;Vc;)if(ve[De]<=Xe&&ve[De+1]>Xe?(qe=(Xe-ve[De])/(ve[De+1]-ve[De]),Vc=!1):De+=Rs,De<0||De>=He-1){if(De===He-1)return me[De];Vc=!1}return me[De]+(me[De+1]-me[De])*qe}function m(P,W,me,ve,He,De){var Xe=d(He,De),qe=1-Xe,Rs=t.round((qe*qe*qe*P[0]+(Xe*qe*qe+qe*Xe*qe+qe*qe*Xe)*me[0]+(Xe*Xe*qe+qe*Xe*Xe+Xe*qe*Xe)*ve[0]+Xe*Xe*Xe*W[0])*1e3)/1e3,Vc=t.round((qe*qe*qe*P[1]+(Xe*qe*qe+qe*Xe*qe+qe*qe*Xe)*me[1]+(Xe*Xe*qe+qe*Xe*Xe+Xe*qe*Xe)*ve[1]+Xe*Xe*Xe*W[1])*1e3)/1e3;return[Rs,Vc]}var g=createTypedArray("float32",8);function A(P,W,me,ve,He,De,Xe){He<0?He=0:He>1&&(He=1);var qe=d(He,Xe);De=De>1?1:De;var Rs=d(De,Xe),Vc,So=P.length,Do=1-qe,eh=1-Rs,Ko=Do*Do*Do,Ge=qe*Do*Do*3,An=qe*qe*Do*3,wt=qe*qe*qe,Bs=Do*Do*eh,yh=qe*Do*eh+Do*qe*eh+Do*Do*Rs,df=qe*qe*eh+Do*qe*Rs+qe*Do*Rs,Fc=qe*qe*Rs,_h=Do*eh*eh,qc=qe*eh*eh+Do*Rs*eh+Do*eh*Rs,Mh=qe*Rs*eh+Do*Rs*Rs+qe*eh*Rs,cf=qe*Rs*Rs,mf=eh*eh*eh,a1=Rs*eh*eh+eh*Rs*eh+eh*eh*Rs,s1=Rs*Rs*eh+eh*Rs*Rs+Rs*eh*Rs,E1=Rs*Rs*Rs;for(Vc=0;Vc<So;Vc+=1)g[Vc*4]=t.round((Ko*P[Vc]+Ge*me[Vc]+An*ve[Vc]+wt*W[Vc])*1e3)/1e3,g[Vc*4+1]=t.round((Bs*P[Vc]+yh*me[Vc]+df*ve[Vc]+Fc*W[Vc])*1e3)/1e3,g[Vc*4+2]=t.round((_h*P[Vc]+qc*me[Vc]+Mh*ve[Vc]+cf*W[Vc])*1e3)/1e3,g[Vc*4+3]=t.round((mf*P[Vc]+a1*me[Vc]+s1*ve[Vc]+E1*W[Vc])*1e3)/1e3;return g}return{getSegmentsLength:o,getNewSegment:A,getPointInSegment:m,buildBezierData:c,pointOnLine2D:e,pointOnLine3D:a}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(t,e){var a=this.offsetTime,s;this.propType==="multidimensional"&&(s=createTypedArray("float32",this.pv.length));for(var o=e.lastIndex,l=o,u=this.keyframes.length-1,c=!0,d,m,g;c;){if(d=this.keyframes[l],m=this.keyframes[l+1],l===u-1&&t>=m.t-a){d.h&&(d=m),o=0;break}if(m.t-a>t){o=l;break}l<u-1?l+=1:(o=0,c=!1)}g=this.keyframesMetadata[l]||{};var A,P,W,me,ve,He,De=m.t-a,Xe=d.t-a,qe;if(d.to){g.bezierData||(g.bezierData=bez.buildBezierData(d.s,m.s||d.e,d.to,d.ti));var Rs=g.bezierData;if(t>=De||t<Xe){var Vc=t>=De?Rs.points.length-1:0;for(P=Rs.points[Vc].point.length,A=0;A<P;A+=1)s[A]=Rs.points[Vc].point[A]}else{g.__fnct?He=g.__fnct:(He=BezierFactory.getBezierEasing(d.o.x,d.o.y,d.i.x,d.i.y,d.n).get,g.__fnct=He),W=He((t-Xe)/(De-Xe));var So=Rs.segmentLength*W,Do,eh=e.lastFrame<t&&e._lastKeyframeIndex===l?e._lastAddedLength:0;for(ve=e.lastFrame<t&&e._lastKeyframeIndex===l?e._lastPoint:0,c=!0,me=Rs.points.length;c;){if(eh+=Rs.points[ve].partialLength,So===0||W===0||ve===Rs.points.length-1){for(P=Rs.points[ve].point.length,A=0;A<P;A+=1)s[A]=Rs.points[ve].point[A];break}else if(So>=eh&&So<eh+Rs.points[ve+1].partialLength){for(Do=(So-eh)/Rs.points[ve+1].partialLength,P=Rs.points[ve].point.length,A=0;A<P;A+=1)s[A]=Rs.points[ve].point[A]+(Rs.points[ve+1].point[A]-Rs.points[ve].point[A])*Do;break}ve<me-1?ve+=1:c=!1}e._lastPoint=ve,e._lastAddedLength=eh-Rs.points[ve].partialLength,e._lastKeyframeIndex=l}}else{var Ko,Ge,An,wt,Bs;if(u=d.s.length,qe=m.s||d.e,this.sh&&d.h!==1)if(t>=De)s[0]=qe[0],s[1]=qe[1],s[2]=qe[2];else if(t<=Xe)s[0]=d.s[0],s[1]=d.s[1],s[2]=d.s[2];else{var yh=createQuaternion(d.s),df=createQuaternion(qe),Fc=(t-Xe)/(De-Xe);quaternionToEuler(s,slerp(yh,df,Fc))}else for(l=0;l<u;l+=1)d.h!==1&&(t>=De?W=1:t<Xe?W=0:(d.o.x.constructor===Array?(g.__fnct||(g.__fnct=[]),g.__fnct[l]?He=g.__fnct[l]:(Ko=d.o.x[l]===void 0?d.o.x[0]:d.o.x[l],Ge=d.o.y[l]===void 0?d.o.y[0]:d.o.y[l],An=d.i.x[l]===void 0?d.i.x[0]:d.i.x[l],wt=d.i.y[l]===void 0?d.i.y[0]:d.i.y[l],He=BezierFactory.getBezierEasing(Ko,Ge,An,wt).get,g.__fnct[l]=He)):g.__fnct?He=g.__fnct:(Ko=d.o.x,Ge=d.o.y,An=d.i.x,wt=d.i.y,He=BezierFactory.getBezierEasing(Ko,Ge,An,wt).get,d.keyframeMetadata=He),W=He((t-Xe)/(De-Xe)))),qe=m.s||d.e,Bs=d.h===1?d.s[l]:d.s[l]+(qe[l]-d.s[l])*W,this.propType==="multidimensional"?s[l]=Bs:s=Bs}return e.lastIndex=o,s}function slerp(t,e,a){var s=[],o=t[0],l=t[1],u=t[2],c=t[3],d=e[0],m=e[1],g=e[2],A=e[3],P,W,me,ve,He;return W=o*d+l*m+u*g+c*A,W<0&&(W=-W,d=-d,m=-m,g=-g,A=-A),1-W>1e-6?(P=Math.acos(W),me=Math.sin(P),ve=Math.sin((1-a)*P)/me,He=Math.sin(a*P)/me):(ve=1-a,He=a),s[0]=ve*o+He*d,s[1]=ve*l+He*m,s[2]=ve*u+He*g,s[3]=ve*c+He*A,s}function quaternionToEuler(t,e){var a=e[0],s=e[1],o=e[2],l=e[3],u=Math.atan2(2*s*l-2*a*o,1-2*s*s-2*o*o),c=Math.asin(2*a*s+2*o*l),d=Math.atan2(2*a*l-2*s*o,1-2*a*a-2*o*o);t[0]=u/degToRads,t[1]=c/degToRads,t[2]=d/degToRads}function createQuaternion(t){var e=t[0]*degToRads,a=t[1]*degToRads,s=t[2]*degToRads,o=Math.cos(e/2),l=Math.cos(a/2),u=Math.cos(s/2),c=Math.sin(e/2),d=Math.sin(a/2),m=Math.sin(s/2),g=o*l*u-c*d*m,A=c*d*u+o*l*m,P=c*l*u+o*d*m,W=o*d*u-c*l*m;return[A,P,W,g]}function getValueAtCurrentTime(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,a=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=a&&t>=a||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var s=this.interpolateValue(t,this._caching);this.pv=s}return this._caching.lastFrame=t,this.pv}function setVValue(t){var e;if(this.propType==="unidimensional")e=t*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var a=0,s=this.v.length;a<s;)e=t[a]*this.mult,mathAbs(this.v[a]-e)>1e-5&&(this.v[a]=e,this._mdf=!0),a+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var t,e=this.effectsSequence.length,a=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)a=this.effectsSequence[t](a);this.setVValue(a),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function ValueProperty(t,e,a,s){this.propType="unidimensional",this.mult=a||1,this.data=e,this.v=a?e.k*a:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=s,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(t,e,a,s){this.propType="multidimensional",this.mult=a||1,this.data=e,this._mdf=!1,this.elem=t,this.container=s,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var o,l=e.k.length;for(this.v=createTypedArray("float32",l),this.pv=createTypedArray("float32",l),this.vel=createTypedArray("float32",l),o=0;o<l;o+=1)this.v[o]=e.k[o]*this.mult,this.pv[o]=e.k[o];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(t,e,a,s){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=a||1,this.elem=t,this.container=s,this.comp=t.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(t,e,a,s){this.propType="multidimensional";var o,l=e.k.length,u,c,d,m;for(o=0;o<l-1;o+=1)e.k[o].to&&e.k[o].s&&e.k[o+1]&&e.k[o+1].s&&(u=e.k[o].s,c=e.k[o+1].s,d=e.k[o].to,m=e.k[o].ti,(u.length===2&&!(u[0]===c[0]&&u[1]===c[1])&&bez.pointOnLine2D(u[0],u[1],c[0],c[1],u[0]+d[0],u[1]+d[1])&&bez.pointOnLine2D(u[0],u[1],c[0],c[1],c[0]+m[0],c[1]+m[1])||u.length===3&&!(u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2])&&bez.pointOnLine3D(u[0],u[1],u[2],c[0],c[1],c[2],u[0]+d[0],u[1]+d[1],u[2]+d[2])&&bez.pointOnLine3D(u[0],u[1],u[2],c[0],c[1],c[2],c[0]+m[0],c[1]+m[1],c[2]+m[2]))&&(e.k[o].to=null,e.k[o].ti=null),u[0]===c[0]&&u[1]===c[1]&&d[0]===0&&d[1]===0&&m[0]===0&&m[1]===0&&(u.length===2||u[2]===c[2]&&d[2]===0&&m[2]===0)&&(e.k[o].to=null,e.k[o].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=a||1,this.elem=t,this.container=s,this.comp=t.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var g=e.k[0].s.length;for(this.v=createTypedArray("float32",g),this.pv=createTypedArray("float32",g),o=0;o<g;o+=1)this.v[o]=initFrame,this.pv[o]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",g)},this.addEffect=addEffect}var PropertyFactory=function(){function t(a,s,o,l,u){s.sid&&(s=a.globalData.slotManager.getProp(s));var c;if(!s.k.length)c=new ValueProperty(a,s,l,u);else if(typeof s.k[0]=="number")c=new MultiDimensionalProperty(a,s,l,u);else switch(o){case 0:c=new KeyframedValueProperty(a,s,l,u);break;case 1:c=new KeyframedMultidimensionalProperty(a,s,l,u);break}return c.effectsSequence.length&&u.addDynamicProperty(c),c}var e={getProp:t};return e}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var e,a=this.dynamicProperties.length;for(e=0;e<a;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function t(){return createTypedArray("float32",2)}return poolFactory(8,t)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var a=0;a<e;)this.v[a]=pointPool.newElement(),this.o[a]=pointPool.newElement(),this.i[a]=pointPool.newElement(),a+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,a,s,o){var l;switch(this._length=Math.max(this._length,s+1),this._length>=this._maxLength&&this.doubleArrayLength(),a){case"v":l=this.v;break;case"i":l=this.i;break;case"o":l=this.o;break;default:l=[];break}(!l[s]||l[s]&&!o)&&(l[s]=pointPool.newElement()),l[s][0]=t,l[s][1]=e},ShapePath.prototype.setTripleAt=function(t,e,a,s,o,l,u,c){this.setXYAt(t,e,"v",u,c),this.setXYAt(a,s,"o",u,c),this.setXYAt(o,l,"i",u,c)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,a=this.o,s=this.i,o=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],s[0][0],s[0][1],a[0][0],a[0][1],0,!1),o=1);var l=this._length-1,u=this._length,c;for(c=o;c<u;c+=1)t.setTripleAt(e[l][0],e[l][1],s[l][0],s[l][1],a[l][0],a[l][1],c,!1),l-=1;return t},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function t(){return new ShapePath}function e(o){var l=o._length,u;for(u=0;u<l;u+=1)pointPool.release(o.v[u]),pointPool.release(o.i[u]),pointPool.release(o.o[u]),o.v[u]=null,o.i[u]=null,o.o[u]=null;o._length=0,o.c=!1}function a(o){var l=s.newElement(),u,c=o._length===void 0?o.v.length:o._length;for(l.setLength(c),l.c=o.c,u=0;u<c;u+=1)l.setTripleAt(o.v[u][0],o.v[u][1],o.o[u][0],o.o[u][1],o.i[u][0],o.i[u][1],u);return l}var s=poolFactory(4,t,e);return s.clone=a,s}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0};var shapeCollectionPool=function(){var t={newShapeCollection:o,release:l},e=0,a=4,s=createSizedArray(a);function o(){var u;return e?(e-=1,u=s[e]):u=new ShapeCollection,u}function l(u){var c,d=u._length;for(c=0;c<d;c+=1)shapePool.release(u.shapes[c]);u._length=0,e===a&&(s=pooling.double(s),a*=2),s[e]=u,e+=1}return t}(),ShapePropertyFactory=function(){var t=-999999;function e(De,Xe,qe){var Rs=qe.lastIndex,Vc,So,Do,eh,Ko,Ge,An,wt,Bs,yh=this.keyframes;if(De<yh[0].t-this.offsetTime)Vc=yh[0].s[0],Do=!0,Rs=0;else if(De>=yh[yh.length-1].t-this.offsetTime)Vc=yh[yh.length-1].s?yh[yh.length-1].s[0]:yh[yh.length-2].e[0],Do=!0;else{for(var df=Rs,Fc=yh.length-1,_h=!0,qc,Mh,cf;_h&&(qc=yh[df],Mh=yh[df+1],!(Mh.t-this.offsetTime>De));)df<Fc-1?df+=1:_h=!1;if(cf=this.keyframesMetadata[df]||{},Do=qc.h===1,Rs=df,!Do){if(De>=Mh.t-this.offsetTime)wt=1;else if(De<qc.t-this.offsetTime)wt=0;else{var mf;cf.__fnct?mf=cf.__fnct:(mf=BezierFactory.getBezierEasing(qc.o.x,qc.o.y,qc.i.x,qc.i.y).get,cf.__fnct=mf),wt=mf((De-(qc.t-this.offsetTime))/(Mh.t-this.offsetTime-(qc.t-this.offsetTime)))}So=Mh.s?Mh.s[0]:qc.e[0]}Vc=qc.s[0]}for(Ge=Xe._length,An=Vc.i[0].length,qe.lastIndex=Rs,eh=0;eh<Ge;eh+=1)for(Ko=0;Ko<An;Ko+=1)Bs=Do?Vc.i[eh][Ko]:Vc.i[eh][Ko]+(So.i[eh][Ko]-Vc.i[eh][Ko])*wt,Xe.i[eh][Ko]=Bs,Bs=Do?Vc.o[eh][Ko]:Vc.o[eh][Ko]+(So.o[eh][Ko]-Vc.o[eh][Ko])*wt,Xe.o[eh][Ko]=Bs,Bs=Do?Vc.v[eh][Ko]:Vc.v[eh][Ko]+(So.v[eh][Ko]-Vc.v[eh][Ko])*wt,Xe.v[eh][Ko]=Bs}function a(){var De=this.comp.renderedFrame-this.offsetTime,Xe=this.keyframes[0].t-this.offsetTime,qe=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Rs=this._caching.lastFrame;return Rs!==t&&(Rs<Xe&&De<Xe||Rs>qe&&De>qe)||(this._caching.lastIndex=Rs<De?this._caching.lastIndex:0,this.interpolateShape(De,this.pv,this._caching)),this._caching.lastFrame=De,this.pv}function s(){this.paths=this.localShapeCollection}function o(De,Xe){if(De._length!==Xe._length||De.c!==Xe.c)return!1;var qe,Rs=De._length;for(qe=0;qe<Rs;qe+=1)if(De.v[qe][0]!==Xe.v[qe][0]||De.v[qe][1]!==Xe.v[qe][1]||De.o[qe][0]!==Xe.o[qe][0]||De.o[qe][1]!==Xe.o[qe][1]||De.i[qe][0]!==Xe.i[qe][0]||De.i[qe][1]!==Xe.i[qe][1])return!1;return!0}function l(De){o(this.v,De)||(this.v=shapePool.clone(De),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function u(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var De;this.kf?De=this.pv:this.data.ks?De=this.data.ks.k:De=this.data.pt.k;var Xe,qe=this.effectsSequence.length;for(Xe=0;Xe<qe;Xe+=1)De=this.effectsSequence[Xe](De);this.setVValue(De),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function c(De,Xe,qe){this.propType="shape",this.comp=De.comp,this.container=De,this.elem=De,this.data=Xe,this.k=!1,this.kf=!1,this._mdf=!1;var Rs=qe===3?Xe.pt.k:Xe.ks.k;this.v=shapePool.clone(Rs),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=s,this.effectsSequence=[]}function d(De){this.effectsSequence.push(De),this.container.addDynamicProperty(this)}c.prototype.interpolateShape=e,c.prototype.getValue=u,c.prototype.setVValue=l,c.prototype.addEffect=d;function m(De,Xe,qe){this.propType="shape",this.comp=De.comp,this.elem=De,this.container=De,this.offsetTime=De.data.st,this.keyframes=qe===3?Xe.pt.k:Xe.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Rs=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Rs),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=s,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[a.bind(this)]}m.prototype.getValue=u,m.prototype.interpolateShape=e,m.prototype.setVValue=l,m.prototype.addEffect=d;var g=function(){var De=roundCorner;function Xe(qe,Rs){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Rs.d,this.elem=qe,this.comp=qe.comp,this.frameId=-1,this.initDynamicPropertyContainer(qe),this.p=PropertyFactory.getProp(qe,Rs.p,1,0,this),this.s=PropertyFactory.getProp(qe,Rs.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Xe.prototype={reset:s,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Rs=this.p.v[0],Vc=this.p.v[1],So=this.s.v[0]/2,Do=this.s.v[1]/2,eh=this.d!==3,Ko=this.v;Ko.v[0][0]=Rs,Ko.v[0][1]=Vc-Do,Ko.v[1][0]=eh?Rs+So:Rs-So,Ko.v[1][1]=Vc,Ko.v[2][0]=Rs,Ko.v[2][1]=Vc+Do,Ko.v[3][0]=eh?Rs-So:Rs+So,Ko.v[3][1]=Vc,Ko.i[0][0]=eh?Rs-So*De:Rs+So*De,Ko.i[0][1]=Vc-Do,Ko.i[1][0]=eh?Rs+So:Rs-So,Ko.i[1][1]=Vc-Do*De,Ko.i[2][0]=eh?Rs+So*De:Rs-So*De,Ko.i[2][1]=Vc+Do,Ko.i[3][0]=eh?Rs-So:Rs+So,Ko.i[3][1]=Vc+Do*De,Ko.o[0][0]=eh?Rs+So*De:Rs-So*De,Ko.o[0][1]=Vc-Do,Ko.o[1][0]=eh?Rs+So:Rs-So,Ko.o[1][1]=Vc+Do*De,Ko.o[2][0]=eh?Rs-So*De:Rs+So*De,Ko.o[2][1]=Vc+Do,Ko.o[3][0]=eh?Rs-So:Rs+So,Ko.o[3][1]=Vc-Do*De}},extendPrototype([DynamicPropertyContainer],Xe),Xe}(),A=function(){function De(Xe,qe){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Xe,this.comp=Xe.comp,this.data=qe,this.frameId=-1,this.d=qe.d,this.initDynamicPropertyContainer(Xe),qe.sy===1?(this.ir=PropertyFactory.getProp(Xe,qe.ir,0,0,this),this.is=PropertyFactory.getProp(Xe,qe.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Xe,qe.pt,0,0,this),this.p=PropertyFactory.getProp(Xe,qe.p,1,0,this),this.r=PropertyFactory.getProp(Xe,qe.r,0,degToRads,this),this.or=PropertyFactory.getProp(Xe,qe.or,0,0,this),this.os=PropertyFactory.getProp(Xe,qe.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return De.prototype={reset:s,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var qe=Math.floor(this.pt.v)*2,Rs=Math.PI*2/qe,Vc=!0,So=this.or.v,Do=this.ir.v,eh=this.os.v,Ko=this.is.v,Ge=2*Math.PI*So/(qe*2),An=2*Math.PI*Do/(qe*2),wt,Bs,yh,df,Fc=-Math.PI/2;Fc+=this.r.v;var _h=this.data.d===3?-1:1;for(this.v._length=0,wt=0;wt<qe;wt+=1){Bs=Vc?So:Do,yh=Vc?eh:Ko,df=Vc?Ge:An;var qc=Bs*Math.cos(Fc),Mh=Bs*Math.sin(Fc),cf=qc===0&&Mh===0?0:Mh/Math.sqrt(qc*qc+Mh*Mh),mf=qc===0&&Mh===0?0:-qc/Math.sqrt(qc*qc+Mh*Mh);qc+=+this.p.v[0],Mh+=+this.p.v[1],this.v.setTripleAt(qc,Mh,qc-cf*df*yh*_h,Mh-mf*df*yh*_h,qc+cf*df*yh*_h,Mh+mf*df*yh*_h,wt,!0),Vc=!Vc,Fc+=Rs*_h}},convertPolygonToPath:function(){var qe=Math.floor(this.pt.v),Rs=Math.PI*2/qe,Vc=this.or.v,So=this.os.v,Do=2*Math.PI*Vc/(qe*4),eh,Ko=-Math.PI*.5,Ge=this.data.d===3?-1:1;for(Ko+=this.r.v,this.v._length=0,eh=0;eh<qe;eh+=1){var An=Vc*Math.cos(Ko),wt=Vc*Math.sin(Ko),Bs=An===0&&wt===0?0:wt/Math.sqrt(An*An+wt*wt),yh=An===0&&wt===0?0:-An/Math.sqrt(An*An+wt*wt);An+=+this.p.v[0],wt+=+this.p.v[1],this.v.setTripleAt(An,wt,An-Bs*Do*So*Ge,wt-yh*Do*So*Ge,An+Bs*Do*So*Ge,wt+yh*Do*So*Ge,eh,!0),Ko+=Rs*Ge}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],De),De}(),P=function(){function De(Xe,qe){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Xe,this.comp=Xe.comp,this.frameId=-1,this.d=qe.d,this.initDynamicPropertyContainer(Xe),this.p=PropertyFactory.getProp(Xe,qe.p,1,0,this),this.s=PropertyFactory.getProp(Xe,qe.s,1,0,this),this.r=PropertyFactory.getProp(Xe,qe.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return De.prototype={convertRectToPath:function(){var qe=this.p.v[0],Rs=this.p.v[1],Vc=this.s.v[0]/2,So=this.s.v[1]/2,Do=bmMin(Vc,So,this.r.v),eh=Do*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(qe+Vc,Rs-So+Do,qe+Vc,Rs-So+Do,qe+Vc,Rs-So+eh,0,!0),this.v.setTripleAt(qe+Vc,Rs+So-Do,qe+Vc,Rs+So-eh,qe+Vc,Rs+So-Do,1,!0),Do!==0?(this.v.setTripleAt(qe+Vc-Do,Rs+So,qe+Vc-Do,Rs+So,qe+Vc-eh,Rs+So,2,!0),this.v.setTripleAt(qe-Vc+Do,Rs+So,qe-Vc+eh,Rs+So,qe-Vc+Do,Rs+So,3,!0),this.v.setTripleAt(qe-Vc,Rs+So-Do,qe-Vc,Rs+So-Do,qe-Vc,Rs+So-eh,4,!0),this.v.setTripleAt(qe-Vc,Rs-So+Do,qe-Vc,Rs-So+eh,qe-Vc,Rs-So+Do,5,!0),this.v.setTripleAt(qe-Vc+Do,Rs-So,qe-Vc+Do,Rs-So,qe-Vc+eh,Rs-So,6,!0),this.v.setTripleAt(qe+Vc-Do,Rs-So,qe+Vc-eh,Rs-So,qe+Vc-Do,Rs-So,7,!0)):(this.v.setTripleAt(qe-Vc,Rs+So,qe-Vc+eh,Rs+So,qe-Vc,Rs+So,2),this.v.setTripleAt(qe-Vc,Rs-So,qe-Vc,Rs-So+eh,qe-Vc,Rs-So,3))):(this.v.setTripleAt(qe+Vc,Rs-So+Do,qe+Vc,Rs-So+eh,qe+Vc,Rs-So+Do,0,!0),Do!==0?(this.v.setTripleAt(qe+Vc-Do,Rs-So,qe+Vc-Do,Rs-So,qe+Vc-eh,Rs-So,1,!0),this.v.setTripleAt(qe-Vc+Do,Rs-So,qe-Vc+eh,Rs-So,qe-Vc+Do,Rs-So,2,!0),this.v.setTripleAt(qe-Vc,Rs-So+Do,qe-Vc,Rs-So+Do,qe-Vc,Rs-So+eh,3,!0),this.v.setTripleAt(qe-Vc,Rs+So-Do,qe-Vc,Rs+So-eh,qe-Vc,Rs+So-Do,4,!0),this.v.setTripleAt(qe-Vc+Do,Rs+So,qe-Vc+Do,Rs+So,qe-Vc+eh,Rs+So,5,!0),this.v.setTripleAt(qe+Vc-Do,Rs+So,qe+Vc-eh,Rs+So,qe+Vc-Do,Rs+So,6,!0),this.v.setTripleAt(qe+Vc,Rs+So-Do,qe+Vc,Rs+So-Do,qe+Vc,Rs+So-eh,7,!0)):(this.v.setTripleAt(qe-Vc,Rs-So,qe-Vc+eh,Rs-So,qe-Vc,Rs-So,1,!0),this.v.setTripleAt(qe-Vc,Rs+So,qe-Vc,Rs+So-eh,qe-Vc,Rs+So,2,!0),this.v.setTripleAt(qe+Vc,Rs+So,qe+Vc-eh,Rs+So,qe+Vc,Rs+So,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:s},extendPrototype([DynamicPropertyContainer],De),De}();function W(De,Xe,qe){var Rs;if(qe===3||qe===4){var Vc=qe===3?Xe.pt:Xe.ks,So=Vc.k;So.length?Rs=new m(De,Xe,qe):Rs=new c(De,Xe,qe)}else qe===5?Rs=new P(De,Xe):qe===6?Rs=new g(De,Xe):qe===7&&(Rs=new A(De,Xe));return Rs.k&&De.addDynamicProperty(Rs),Rs}function me(){return c}function ve(){return m}var He={};return He.getShapeProp=W,He.getConstructorFunction=me,He.getKeyframedConstructorFunction=ve,He}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var t=Math.cos,e=Math.sin,a=Math.tan,s=Math.round;function o(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function l(qc){if(qc===0)return this;var Mh=t(qc),cf=e(qc);return this._t(Mh,-cf,0,0,cf,Mh,0,0,0,0,1,0,0,0,0,1)}function u(qc){if(qc===0)return this;var Mh=t(qc),cf=e(qc);return this._t(1,0,0,0,0,Mh,-cf,0,0,cf,Mh,0,0,0,0,1)}function c(qc){if(qc===0)return this;var Mh=t(qc),cf=e(qc);return this._t(Mh,0,cf,0,0,1,0,0,-cf,0,Mh,0,0,0,0,1)}function d(qc){if(qc===0)return this;var Mh=t(qc),cf=e(qc);return this._t(Mh,-cf,0,0,cf,Mh,0,0,0,0,1,0,0,0,0,1)}function m(qc,Mh){return this._t(1,Mh,qc,1,0,0)}function g(qc,Mh){return this.shear(a(qc),a(Mh))}function A(qc,Mh){var cf=t(Mh),mf=e(Mh);return this._t(cf,mf,0,0,-mf,cf,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,a(qc),1,0,0,0,0,1,0,0,0,0,1)._t(cf,-mf,0,0,mf,cf,0,0,0,0,1,0,0,0,0,1)}function P(qc,Mh,cf){return!cf&&cf!==0&&(cf=1),qc===1&&Mh===1&&cf===1?this:this._t(qc,0,0,0,0,Mh,0,0,0,0,cf,0,0,0,0,1)}function W(qc,Mh,cf,mf,a1,s1,E1,T1,z1,W1,m2,C2,A2,b2,_2,q1){return this.props[0]=qc,this.props[1]=Mh,this.props[2]=cf,this.props[3]=mf,this.props[4]=a1,this.props[5]=s1,this.props[6]=E1,this.props[7]=T1,this.props[8]=z1,this.props[9]=W1,this.props[10]=m2,this.props[11]=C2,this.props[12]=A2,this.props[13]=b2,this.props[14]=_2,this.props[15]=q1,this}function me(qc,Mh,cf){return cf=cf||0,qc!==0||Mh!==0||cf!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,qc,Mh,cf,1):this}function ve(qc,Mh,cf,mf,a1,s1,E1,T1,z1,W1,m2,C2,A2,b2,_2,q1){var U1=this.props;if(qc===1&&Mh===0&&cf===0&&mf===0&&a1===0&&s1===1&&E1===0&&T1===0&&z1===0&&W1===0&&m2===1&&C2===0)return U1[12]=U1[12]*qc+U1[15]*A2,U1[13]=U1[13]*s1+U1[15]*b2,U1[14]=U1[14]*m2+U1[15]*_2,U1[15]*=q1,this._identityCalculated=!1,this;var M2=U1[0],x2=U1[1],p1=U1[2],S1=U1[3],D1=U1[4],_1=U1[5],B1=U1[6],c2=U1[7],H1=U1[8],x1=U1[9],pf=U1[10],o1=U1[11],e1=U1[12],w1=U1[13],C1=U1[14],F1=U1[15];return U1[0]=M2*qc+x2*a1+p1*z1+S1*A2,U1[1]=M2*Mh+x2*s1+p1*W1+S1*b2,U1[2]=M2*cf+x2*E1+p1*m2+S1*_2,U1[3]=M2*mf+x2*T1+p1*C2+S1*q1,U1[4]=D1*qc+_1*a1+B1*z1+c2*A2,U1[5]=D1*Mh+_1*s1+B1*W1+c2*b2,U1[6]=D1*cf+_1*E1+B1*m2+c2*_2,U1[7]=D1*mf+_1*T1+B1*C2+c2*q1,U1[8]=H1*qc+x1*a1+pf*z1+o1*A2,U1[9]=H1*Mh+x1*s1+pf*W1+o1*b2,U1[10]=H1*cf+x1*E1+pf*m2+o1*_2,U1[11]=H1*mf+x1*T1+pf*C2+o1*q1,U1[12]=e1*qc+w1*a1+C1*z1+F1*A2,U1[13]=e1*Mh+w1*s1+C1*W1+F1*b2,U1[14]=e1*cf+w1*E1+C1*m2+F1*_2,U1[15]=e1*mf+w1*T1+C1*C2+F1*q1,this._identityCalculated=!1,this}function He(qc){var Mh=qc.props;return this.transform(Mh[0],Mh[1],Mh[2],Mh[3],Mh[4],Mh[5],Mh[6],Mh[7],Mh[8],Mh[9],Mh[10],Mh[11],Mh[12],Mh[13],Mh[14],Mh[15])}function De(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Xe(qc){for(var Mh=0;Mh<16;){if(qc.props[Mh]!==this.props[Mh])return!1;Mh+=1}return!0}function qe(qc){var Mh;for(Mh=0;Mh<16;Mh+=1)qc.props[Mh]=this.props[Mh];return qc}function Rs(qc){var Mh;for(Mh=0;Mh<16;Mh+=1)this.props[Mh]=qc[Mh]}function Vc(qc,Mh,cf){return{x:qc*this.props[0]+Mh*this.props[4]+cf*this.props[8]+this.props[12],y:qc*this.props[1]+Mh*this.props[5]+cf*this.props[9]+this.props[13],z:qc*this.props[2]+Mh*this.props[6]+cf*this.props[10]+this.props[14]}}function So(qc,Mh,cf){return qc*this.props[0]+Mh*this.props[4]+cf*this.props[8]+this.props[12]}function Do(qc,Mh,cf){return qc*this.props[1]+Mh*this.props[5]+cf*this.props[9]+this.props[13]}function eh(qc,Mh,cf){return qc*this.props[2]+Mh*this.props[6]+cf*this.props[10]+this.props[14]}function Ko(){var qc=this.props[0]*this.props[5]-this.props[1]*this.props[4],Mh=this.props[5]/qc,cf=-this.props[1]/qc,mf=-this.props[4]/qc,a1=this.props[0]/qc,s1=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/qc,E1=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/qc,T1=new Matrix;return T1.props[0]=Mh,T1.props[1]=cf,T1.props[4]=mf,T1.props[5]=a1,T1.props[12]=s1,T1.props[13]=E1,T1}function Ge(qc){var Mh=this.getInverseMatrix();return Mh.applyToPointArray(qc[0],qc[1],qc[2]||0)}function An(qc){var Mh,cf=qc.length,mf=[];for(Mh=0;Mh<cf;Mh+=1)mf[Mh]=Ge(qc[Mh]);return mf}function wt(qc,Mh,cf){var mf=createTypedArray("float32",6);if(this.isIdentity())mf[0]=qc[0],mf[1]=qc[1],mf[2]=Mh[0],mf[3]=Mh[1],mf[4]=cf[0],mf[5]=cf[1];else{var a1=this.props[0],s1=this.props[1],E1=this.props[4],T1=this.props[5],z1=this.props[12],W1=this.props[13];mf[0]=qc[0]*a1+qc[1]*E1+z1,mf[1]=qc[0]*s1+qc[1]*T1+W1,mf[2]=Mh[0]*a1+Mh[1]*E1+z1,mf[3]=Mh[0]*s1+Mh[1]*T1+W1,mf[4]=cf[0]*a1+cf[1]*E1+z1,mf[5]=cf[0]*s1+cf[1]*T1+W1}return mf}function Bs(qc,Mh,cf){var mf;return this.isIdentity()?mf=[qc,Mh,cf]:mf=[qc*this.props[0]+Mh*this.props[4]+cf*this.props[8]+this.props[12],qc*this.props[1]+Mh*this.props[5]+cf*this.props[9]+this.props[13],qc*this.props[2]+Mh*this.props[6]+cf*this.props[10]+this.props[14]],mf}function yh(qc,Mh){if(this.isIdentity())return qc+","+Mh;var cf=this.props;return Math.round((qc*cf[0]+Mh*cf[4]+cf[12])*100)/100+","+Math.round((qc*cf[1]+Mh*cf[5]+cf[13])*100)/100}function df(){for(var qc=0,Mh=this.props,cf="matrix3d(",mf=1e4;qc<16;)cf+=s(Mh[qc]*mf)/mf,cf+=qc===15?")":",",qc+=1;return cf}function Fc(qc){var Mh=1e4;return qc<1e-6&&qc>0||qc>-1e-6&&qc<0?s(qc*Mh)/Mh:qc}function _h(){var qc=this.props,Mh=Fc(qc[0]),cf=Fc(qc[1]),mf=Fc(qc[4]),a1=Fc(qc[5]),s1=Fc(qc[12]),E1=Fc(qc[13]);return"matrix("+Mh+","+cf+","+mf+","+a1+","+s1+","+E1+")"}return function(){this.reset=o,this.rotate=l,this.rotateX=u,this.rotateY=c,this.rotateZ=d,this.skew=g,this.skewFromAxis=A,this.shear=m,this.scale=P,this.setTransform=W,this.translate=me,this.transform=ve,this.multiply=He,this.applyToPoint=Vc,this.applyToX=So,this.applyToY=Do,this.applyToZ=eh,this.applyToPointArray=Bs,this.applyToTriplePoints=wt,this.applyToPointStringified=yh,this.toCSS=df,this.to2dCSS=_h,this.clone=qe,this.cloneFromProps=Rs,this.equals=Xe,this.inversePoints=An,this.inversePoint=Ge,this.getInverseMatrix=Ko,this._t=this.transform,this.isIdentity=De,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(t){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(t)}var lottie={};function setLocation(t){setLocationHref(t)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(t){setSubframeEnabled(t)}function setPrefix(t){setIdPrefix(t)}function loadAnimation(t){return animationManager.loadAnimation(t)}function setQuality(t){if(typeof t=="string")switch(t){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(t)&&t>1&&setDefaultCurveSegments(t)}function inBrowser(){return typeof navigator<"u"}function installPlugin(t,e){t==="expressions"&&setExpressionsPlugin(e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),a=0;a<e.length;a+=1){var s=e[a].split("=");if(decodeURIComponent(s[0])==t)return decodeURIComponent(s[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(t){}var ShapeModifiers=function(){var t={},e={};t.registerModifier=a,t.getModifier=s;function a(o,l){e[o]||(e[o]=l)}function s(o,l,u){return new e[o](l,u)}return t}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,a,s,o){var l=[];e<=1?l.push({s:t,e}):t>=1?l.push({s:t-1,e:e-1}):(l.push({s:t,e:1}),l.push({s:0,e:e-1}));var u=[],c,d=l.length,m;for(c=0;c<d;c+=1)if(m=l[c],!(m.e*o<s||m.s*o>s+a)){var g,A;m.s*o<=s?g=0:g=(m.s*o-s)/a,m.e*o>=s+a?A=1:A=(m.e*o-s)/a,u.push([g,A])}return u.length||u.push([0,0]),u},TrimModifier.prototype.releasePathsData=function(t){var e,a=t.length;for(e=0;e<a;e+=1)segmentsLengthPool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,a;if(this._mdf||t){var s=this.o.v%360/360;if(s<0&&(s+=1),this.s.v>1?e=1+s:this.s.v<0?e=0+s:e=this.s.v+s,this.e.v>1?a=1+s:this.e.v<0?a=0+s:a=this.e.v+s,e>a){var o=e;e=a,a=o}e=Math.round(e*1e4)*1e-4,a=Math.round(a*1e4)*1e-4,this.sValue=e,this.eValue=a}else e=this.sValue,a=this.eValue;var l,u,c=this.shapes.length,d,m,g,A,P,W=0;if(a===e)for(u=0;u<c;u+=1)this.shapes[u].localShapeCollection.releaseShapes(),this.shapes[u].shape._mdf=!0,this.shapes[u].shape.paths=this.shapes[u].localShapeCollection,this._mdf&&(this.shapes[u].pathsData.length=0);else if(a===1&&e===0||a===0&&e===1){if(this._mdf)for(u=0;u<c;u+=1)this.shapes[u].pathsData.length=0,this.shapes[u].shape._mdf=!0}else{var me=[],ve,He;for(u=0;u<c;u+=1)if(ve=this.shapes[u],!ve.shape._mdf&&!this._mdf&&!t&&this.m!==2)ve.shape.paths=ve.localShapeCollection;else{if(l=ve.shape.paths,m=l._length,P=0,!ve.shape._mdf&&ve.pathsData.length)P=ve.totalShapeLength;else{for(g=this.releasePathsData(ve.pathsData),d=0;d<m;d+=1)A=bez.getSegmentsLength(l.shapes[d]),g.push(A),P+=A.totalLength;ve.totalShapeLength=P,ve.pathsData=g}W+=P,ve.shape._mdf=!0}var De=e,Xe=a,qe=0,Rs;for(u=c-1;u>=0;u-=1)if(ve=this.shapes[u],ve.shape._mdf){for(He=ve.localShapeCollection,He.releaseShapes(),this.m===2&&c>1?(Rs=this.calculateShapeEdges(e,a,ve.totalShapeLength,qe,W),qe+=ve.totalShapeLength):Rs=[[De,Xe]],m=Rs.length,d=0;d<m;d+=1){De=Rs[d][0],Xe=Rs[d][1],me.length=0,Xe<=1?me.push({s:ve.totalShapeLength*De,e:ve.totalShapeLength*Xe}):De>=1?me.push({s:ve.totalShapeLength*(De-1),e:ve.totalShapeLength*(Xe-1)}):(me.push({s:ve.totalShapeLength*De,e:ve.totalShapeLength}),me.push({s:0,e:ve.totalShapeLength*(Xe-1)}));var Vc=this.addShapes(ve,me[0]);if(me[0].s!==me[0].e){if(me.length>1){var So=ve.shape.paths.shapes[ve.shape.paths._length-1];if(So.c){var Do=Vc.pop();this.addPaths(Vc,He),Vc=this.addShapes(ve,me[1],Do)}else this.addPaths(Vc,He),Vc=this.addShapes(ve,me[1])}this.addPaths(Vc,He)}}ve.shape.paths=He}}},TrimModifier.prototype.addPaths=function(t,e){var a,s=t.length;for(a=0;a<s;a+=1)e.addShape(t[a])},TrimModifier.prototype.addSegment=function(t,e,a,s,o,l,u){o.setXYAt(e[0],e[1],"o",l),o.setXYAt(a[0],a[1],"i",l+1),u&&o.setXYAt(t[0],t[1],"v",l),o.setXYAt(s[0],s[1],"v",l+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,a,s){e.setXYAt(t[1],t[5],"o",a),e.setXYAt(t[2],t[6],"i",a+1),s&&e.setXYAt(t[0],t[4],"v",a),e.setXYAt(t[3],t[7],"v",a+1)},TrimModifier.prototype.addShapes=function(t,e,a){var s=t.pathsData,o=t.shape.paths.shapes,l,u=t.shape.paths._length,c,d,m=0,g,A,P,W,me=[],ve,He=!0;for(a?(A=a._length,ve=a._length):(a=shapePool.newElement(),A=0,ve=0),me.push(a),l=0;l<u;l+=1){for(P=s[l].lengths,a.c=o[l].c,d=o[l].c?P.length:P.length+1,c=1;c<d;c+=1)if(g=P[c-1],m+g.addedLength<e.s)m+=g.addedLength,a.c=!1;else if(m>e.e){a.c=!1;break}else e.s<=m&&e.e>=m+g.addedLength?(this.addSegment(o[l].v[c-1],o[l].o[c-1],o[l].i[c],o[l].v[c],a,A,He),He=!1):(W=bez.getNewSegment(o[l].v[c-1],o[l].v[c],o[l].o[c-1],o[l].i[c],(e.s-m)/g.addedLength,(e.e-m)/g.addedLength,P[c-1]),this.addSegmentFromArray(W,a,A,He),He=!1,a.c=!1),m+=g.addedLength,A+=1;if(o[l].c&&P.length){if(g=P[c-1],m<=e.e){var De=P[c-1].addedLength;e.s<=m&&e.e>=m+De?(this.addSegment(o[l].v[c-1],o[l].o[c-1],o[l].i[0],o[l].v[0],a,A,He),He=!1):(W=bez.getNewSegment(o[l].v[c-1],o[l].v[0],o[l].o[c-1],o[l].i[0],(e.s-m)/De,(e.e-m)/De,P[c-1]),this.addSegmentFromArray(W,a,A,He),He=!1,a.c=!1)}else a.c=!1;m+=g.addedLength,A+=1}if(a._length&&(a.setXYAt(a.v[ve][0],a.v[ve][1],"i",ve),a.setXYAt(a.v[a._length-1][0],a.v[a._length-1][1],"o",a._length-1)),m>e.e)break;l<u-1&&(a=shapePool.newElement(),He=!0,me.push(a),A=0)}return me};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var a=e/100,s=[0,0],o=t._length,l=0;for(l=0;l<o;l+=1)s[0]+=t.v[l][0],s[1]+=t.v[l][1];s[0]/=o,s[1]/=o;var u=shapePool.newElement();u.c=t.c;var c,d,m,g,A,P;for(l=0;l<o;l+=1)c=t.v[l][0]+(s[0]-t.v[l][0])*a,d=t.v[l][1]+(s[1]-t.v[l][1])*a,m=t.o[l][0]+(s[0]-t.o[l][0])*-a,g=t.o[l][1]+(s[1]-t.o[l][1])*-a,A=t.i[l][0]+(s[0]-t.i[l][0])*-a,P=t.i[l][1]+(s[1]-t.i[l][1])*-a,u.setTripleAt(c,d,m,g,A,P,l);return u},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,a,s=this.shapes.length,o,l,u=this.amount.v;if(u!==0){var c,d;for(a=0;a<s;a+=1){if(c=this.shapes[a],d=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!t))for(d.releaseShapes(),c.shape._mdf=!0,e=c.shape.paths.shapes,l=c.shape.paths._length,o=0;o<l;o+=1)d.addShape(this.processPath(e[o],u));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var t=[0,0];function e(d){var m=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||m,this.a&&d.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&d.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&d.skewFromAxis(-this.sk.v,this.sa.v),this.r?d.rotate(-this.r.v):d.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?d.translate(this.px.v,this.py.v,-this.pz.v):d.translate(this.px.v,this.py.v,0):d.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function a(d){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||d){var m;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var g,A;if(m=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(g=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/m,0),A=this.p.getValueAtTime(this.p.keyframes[0].t/m,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(g=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/m,0),A=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/m,0)):(g=this.p.pv,A=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/m,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){g=[],A=[];var P=this.px,W=this.py;P._caching.lastFrame+P.offsetTime<=P.keyframes[0].t?(g[0]=P.getValueAtTime((P.keyframes[0].t+.01)/m,0),g[1]=W.getValueAtTime((W.keyframes[0].t+.01)/m,0),A[0]=P.getValueAtTime(P.keyframes[0].t/m,0),A[1]=W.getValueAtTime(W.keyframes[0].t/m,0)):P._caching.lastFrame+P.offsetTime>=P.keyframes[P.keyframes.length-1].t?(g[0]=P.getValueAtTime(P.keyframes[P.keyframes.length-1].t/m,0),g[1]=W.getValueAtTime(W.keyframes[W.keyframes.length-1].t/m,0),A[0]=P.getValueAtTime((P.keyframes[P.keyframes.length-1].t-.01)/m,0),A[1]=W.getValueAtTime((W.keyframes[W.keyframes.length-1].t-.01)/m,0)):(g=[P.pv,W.pv],A[0]=P.getValueAtTime((P._caching.lastFrame+P.offsetTime-.01)/m,P.offsetTime),A[1]=W.getValueAtTime((W._caching.lastFrame+W.offsetTime-.01)/m,W.offsetTime))}else A=t,g=A;this.v.rotate(-Math.atan2(g[1]-A[1],g[0]-A[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function s(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function o(){}function l(d){this._addDynamicProperty(d),this.elem.addDynamicProperty(d),this._isDirty=!0}function u(d,m,g){if(this.elem=d,this.frameId=-1,this.propType="transform",this.data=m,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(g||d),m.p&&m.p.s?(this.px=PropertyFactory.getProp(d,m.p.x,0,0,this),this.py=PropertyFactory.getProp(d,m.p.y,0,0,this),m.p.z&&(this.pz=PropertyFactory.getProp(d,m.p.z,0,0,this))):this.p=PropertyFactory.getProp(d,m.p||{k:[0,0,0]},1,0,this),m.rx){if(this.rx=PropertyFactory.getProp(d,m.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(d,m.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(d,m.rz,0,degToRads,this),m.or.k[0].ti){var A,P=m.or.k.length;for(A=0;A<P;A+=1)m.or.k[A].to=null,m.or.k[A].ti=null}this.or=PropertyFactory.getProp(d,m.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(d,m.r||{k:0},0,degToRads,this);m.sk&&(this.sk=PropertyFactory.getProp(d,m.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(d,m.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(d,m.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(d,m.s||{k:[100,100,100]},1,.01,this),m.o?this.o=PropertyFactory.getProp(d,m.o,0,.01,d):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}u.prototype={applyToMatrix:e,getValue:a,precalculateMatrix:s,autoOrient:o},extendPrototype([DynamicPropertyContainer],u),u.prototype.addDynamicProperty=l,u.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function c(d,m,g){return new u(d,m,g)}return{getTransformProperty:c}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,a,s,o,l){var u=l?-1:1,c=s.s.v[0]+(1-s.s.v[0])*(1-o),d=s.s.v[1]+(1-s.s.v[1])*(1-o);t.translate(s.p.v[0]*u*o,s.p.v[1]*u*o,s.p.v[2]),e.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]),e.rotate(-s.r.v*u*o),e.translate(s.a.v[0],s.a.v[1],s.a.v[2]),a.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]),a.scale(l?1/c:c,l?1/d:d),a.translate(s.a.v[0],s.a.v[1],s.a.v[2])},RepeaterModifier.prototype.init=function(t,e,a,s){for(this.elem=t,this.arr=e,this.pos=a,this.elemsData=s,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[a]);a>0;)a-=1,this._elements.unshift(e[a]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,a=t.length;for(e=0;e<a;e+=1)t[e]._processed=!1,t[e].ty==="gr"&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var a,s=t.length;for(a=0;a<s;a+=1)t[a]._render=e,t[a].ty==="gr"&&this.changeGroupRender(t[a].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,a,s,o,l,u=!1;if(this._mdf||t){var c=Math.ceil(this.c.v);if(this._groups.length<c){for(;this._groups.length<c;){var d={it:this.cloneElements(this._elements),ty:"gr"};d.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,d),this._groups.splice(0,0,d),this._currentCopies+=1}this.elem.reloadShapes(),u=!0}l=0;var m;for(s=0;s<=this._groups.length-1;s+=1){if(m=l<c,this._groups[s]._render=m,this.changeGroupRender(this._groups[s].it,m),!m){var g=this.elemsData[s].it,A=g[g.length-1];A.transform.op.v!==0?(A.transform.op._mdf=!0,A.transform.op.v=0):A.transform.op._mdf=!1}l+=1}this._currentCopies=c;var P=this.o.v,W=P%1,me=P>0?Math.floor(P):Math.ceil(P),ve=this.pMatrix.props,He=this.rMatrix.props,De=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Xe=0;if(P>0){for(;Xe<me;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Xe+=1;W&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,W,!1),Xe+=W)}else if(P<0){for(;Xe>me;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Xe-=1;W&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-W,!0),Xe-=W)}s=this.data.m===1?0:this._currentCopies-1,o=this.data.m===1?1:-1,l=this._currentCopies;for(var qe,Rs;l;){if(e=this.elemsData[s].it,a=e[e.length-1].transform.mProps.v.props,Rs=a.length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(s/(this._currentCopies-1)),Xe!==0){for((s!==0&&o===1||s!==this._currentCopies-1&&o===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(He[0],He[1],He[2],He[3],He[4],He[5],He[6],He[7],He[8],He[9],He[10],He[11],He[12],He[13],He[14],He[15]),this.matrix.transform(De[0],De[1],De[2],De[3],De[4],De[5],De[6],De[7],De[8],De[9],De[10],De[11],De[12],De[13],De[14],De[15]),this.matrix.transform(ve[0],ve[1],ve[2],ve[3],ve[4],ve[5],ve[6],ve[7],ve[8],ve[9],ve[10],ve[11],ve[12],ve[13],ve[14],ve[15]),qe=0;qe<Rs;qe+=1)a[qe]=this.matrix.props[qe];this.matrix.reset()}else for(this.matrix.reset(),qe=0;qe<Rs;qe+=1)a[qe]=this.matrix.props[qe];Xe+=1,l-=1,s+=o}}else for(l=this._currentCopies,s=0,o=1;l;)e=this.elemsData[s].it,a=e[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,l-=1,s+=o;return u},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var a=shapePool.newElement();a.c=t.c;var s,o=t._length,l,u,c,d,m,g,A=0,P,W,me,ve,He,De;for(s=0;s<o;s+=1)l=t.v[s],c=t.o[s],u=t.i[s],l[0]===c[0]&&l[1]===c[1]&&l[0]===u[0]&&l[1]===u[1]?(s===0||s===o-1)&&!t.c?(a.setTripleAt(l[0],l[1],c[0],c[1],u[0],u[1],A),A+=1):(s===0?d=t.v[o-1]:d=t.v[s-1],m=Math.sqrt(Math.pow(l[0]-d[0],2)+Math.pow(l[1]-d[1],2)),g=m?Math.min(m/2,e)/m:0,He=l[0]+(d[0]-l[0])*g,P=He,De=l[1]-(l[1]-d[1])*g,W=De,me=P-(P-l[0])*roundCorner,ve=W-(W-l[1])*roundCorner,a.setTripleAt(P,W,me,ve,He,De,A),A+=1,s===o-1?d=t.v[0]:d=t.v[s+1],m=Math.sqrt(Math.pow(l[0]-d[0],2)+Math.pow(l[1]-d[1],2)),g=m?Math.min(m/2,e)/m:0,me=l[0]+(d[0]-l[0])*g,P=me,ve=l[1]+(d[1]-l[1])*g,W=ve,He=P-(P-l[0])*roundCorner,De=W-(W-l[1])*roundCorner,a.setTripleAt(P,W,me,ve,He,De,A),A+=1):(a.setTripleAt(t.v[s][0],t.v[s][1],t.o[s][0],t.o[s][1],t.i[s][0],t.i[s][1],A),A+=1);return a},RoundCornersModifier.prototype.processShapes=function(t){var e,a,s=this.shapes.length,o,l,u=this.rd.v;if(u!==0){var c,d;for(a=0;a<s;a+=1){if(c=this.shapes[a],d=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!t))for(d.releaseShapes(),c.shape._mdf=!0,e=c.shape.paths.shapes,l=c.shape.paths._length,o=0;o<l;o+=1)d.addShape(this.processPath(e[o],u));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(t,e){return Math.abs(t-e)*1e5<=Math.min(Math.abs(t),Math.abs(e))}function floatZero(t){return Math.abs(t)<=1e-5}function lerp(t,e,a){return t*(1-a)+e*a}function lerpPoint(t,e,a){return[lerp(t[0],e[0],a),lerp(t[1],e[1],a)]}function quadRoots(t,e,a){if(t===0)return[];var s=e*e-4*t*a;if(s<0)return[];var o=-e/(2*t);if(s===0)return[o];var l=Math.sqrt(s)/(2*t);return[o-l,o+l]}function polynomialCoefficients(t,e,a,s){return[-t+3*e-3*a+s,3*t-6*e+3*a,-3*t+3*e,t]}function singlePoint(t){return new PolynomialBezier(t,t,t,t,!1)}function PolynomialBezier(t,e,a,s,o){o&&pointEqual(t,e)&&(e=lerpPoint(t,s,1/3)),o&&pointEqual(a,s)&&(a=lerpPoint(t,s,2/3));var l=polynomialCoefficients(t[0],e[0],a[0],s[0]),u=polynomialCoefficients(t[1],e[1],a[1],s[1]);this.a=[l[0],u[0]],this.b=[l[1],u[1]],this.c=[l[2],u[2]],this.d=[l[3],u[3]],this.points=[t,e,a,s]}PolynomialBezier.prototype.point=function(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]},PolynomialBezier.prototype.derivative=function(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(t){var e=this.derivative(t);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(t){var e=this.derivative(t);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(t))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,a=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(a<0)return[];var s=Math.sqrt(a);return floatZero(s)?s>0&&s<1?[e]:[]:[e-s,e+s].filter(function(o){return o>0&&o<1})},PolynomialBezier.prototype.split=function(t){if(t<=0)return[singlePoint(this.points[0]),this];if(t>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],t),a=lerpPoint(this.points[1],this.points[2],t),s=lerpPoint(this.points[2],this.points[3],t),o=lerpPoint(e,a,t),l=lerpPoint(a,s,t),u=lerpPoint(o,l,t);return[new PolynomialBezier(this.points[0],e,o,u,!0),new PolynomialBezier(u,l,s,this.points[3],!0)]};function extrema(t,e){var a=t.points[0][e],s=t.points[t.points.length-1][e];if(a>s){var o=s;s=a,a=o}for(var l=quadRoots(3*t.a[e],2*t.b[e],t.c[e]),u=0;u<l.length;u+=1)if(l[u]>0&&l[u]<1){var c=t.point(l[u])[e];c<a?a=c:c>s&&(s=c)}return{min:a,max:s}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var t=this.bounds();return{left:t.x.min,right:t.x.max,top:t.y.min,bottom:t.y.max,width:t.x.max-t.x.min,height:t.y.max-t.y.min,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2}};function intersectData(t,e,a){var s=t.boundingBox();return{cx:s.cx,cy:s.cy,width:s.width,height:s.height,bez:t,t:(e+a)/2,t1:e,t2:a}}function splitData(t){var e=t.bez.split(.5);return[intersectData(e[0],t.t1,t.t),intersectData(e[1],t.t,t.t2)]}function boxIntersect(t,e){return Math.abs(t.cx-e.cx)*2<t.width+e.width&&Math.abs(t.cy-e.cy)*2<t.height+e.height}function intersectsImpl(t,e,a,s,o,l){if(boxIntersect(t,e)){if(a>=l||t.width<=s&&t.height<=s&&e.width<=s&&e.height<=s){o.push([t.t,e.t]);return}var u=splitData(t),c=splitData(e);intersectsImpl(u[0],c[0],a+1,s,o,l),intersectsImpl(u[0],c[1],a+1,s,o,l),intersectsImpl(u[1],c[0],a+1,s,o,l),intersectsImpl(u[1],c[1],a+1,s,o,l)}}PolynomialBezier.prototype.intersections=function(t,e,a){e===void 0&&(e=2),a===void 0&&(a=7);var s=[];return intersectsImpl(intersectData(this,0,1),intersectData(t,0,1),0,e,s,a),s},PolynomialBezier.shapeSegment=function(t,e){var a=(e+1)%t.length();return new PolynomialBezier(t.v[e],t.o[e],t.i[a],t.v[a],!0)},PolynomialBezier.shapeSegmentInverted=function(t,e){var a=(e+1)%t.length();return new PolynomialBezier(t.v[a],t.i[a],t.o[e],t.v[e],!0)};function crossProduct(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function lineIntersection(t,e,a,s){var o=[t[0],t[1],1],l=[e[0],e[1],1],u=[a[0],a[1],1],c=[s[0],s[1],1],d=crossProduct(crossProduct(o,l),crossProduct(u,c));return floatZero(d[2])?null:[d[0]/d[2],d[1]/d[2]]}function polarOffset(t,e,a){return[t[0]+Math.cos(e)*a,t[1]-Math.sin(e)*a]}function pointDistance(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1])}function pointEqual(t,e){return floatEqual(t[0],e[0])&&floatEqual(t[1],e[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(t,e.s,0,null,this),this.frequency=PropertyFactory.getProp(t,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(t,e.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(t,e,a,s,o,l,u){var c=a-Math.PI/2,d=a+Math.PI/2,m=e[0]+Math.cos(a)*s*o,g=e[1]-Math.sin(a)*s*o;t.setTripleAt(m,g,m+Math.cos(c)*l,g-Math.sin(c)*l,m+Math.cos(d)*u,g-Math.sin(d)*u,t.length())}function getPerpendicularVector(t,e){var a=[e[0]-t[0],e[1]-t[1]],s=-Math.PI*.5,o=[Math.cos(s)*a[0]-Math.sin(s)*a[1],Math.sin(s)*a[0]+Math.cos(s)*a[1]];return o}function getProjectingAngle(t,e){var a=e===0?t.length()-1:e-1,s=(e+1)%t.length(),o=t.v[a],l=t.v[s],u=getPerpendicularVector(o,l);return Math.atan2(0,1)-Math.atan2(u[1],u[0])}function zigZagCorner(t,e,a,s,o,l,u){var c=getProjectingAngle(e,a),d=e.v[a%e._length],m=e.v[a===0?e._length-1:a-1],g=e.v[(a+1)%e._length],A=l===2?Math.sqrt(Math.pow(d[0]-m[0],2)+Math.pow(d[1]-m[1],2)):0,P=l===2?Math.sqrt(Math.pow(d[0]-g[0],2)+Math.pow(d[1]-g[1],2)):0;setPoint(t,e.v[a%e._length],c,u,s,P/((o+1)*2),A/((o+1)*2))}function zigZagSegment(t,e,a,s,o,l){for(var u=0;u<s;u+=1){var c=(u+1)/(s+1),d=o===2?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,m=e.normalAngle(c),g=e.point(c);setPoint(t,g,m,l,a,d/((s+1)*2),d/((s+1)*2)),l=-l}return l}ZigZagModifier.prototype.processPath=function(t,e,a,s){var o=t._length,l=shapePool.newElement();if(l.c=t.c,t.c||(o-=1),o===0)return l;var u=-1,c=PolynomialBezier.shapeSegment(t,0);zigZagCorner(l,t,0,e,a,s,u);for(var d=0;d<o;d+=1)u=zigZagSegment(l,c,e,a,s,-u),d===o-1&&!t.c?c=null:c=PolynomialBezier.shapeSegment(t,(d+1)%o),zigZagCorner(l,t,d+1,e,a,s,u);return l},ZigZagModifier.prototype.processShapes=function(t){var e,a,s=this.shapes.length,o,l,u=this.amplitude.v,c=Math.max(0,Math.round(this.frequency.v)),d=this.pointsType.v;if(u!==0){var m,g;for(a=0;a<s;a+=1){if(m=this.shapes[a],g=m.localShapeCollection,!(!m.shape._mdf&&!this._mdf&&!t))for(g.releaseShapes(),m.shape._mdf=!0,e=m.shape.paths.shapes,l=m.shape.paths._length,o=0;o<l;o+=1)g.addShape(this.processPath(e[o],u,c,d));m.shape.paths=m.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(t,e,a){var s=Math.atan2(e[0]-t[0],e[1]-t[1]);return[polarOffset(t,s,a),polarOffset(e,s,a)]}function offsetSegment(t,e){var a,s,o,l,u,c,d;d=linearOffset(t.points[0],t.points[1],e),a=d[0],s=d[1],d=linearOffset(t.points[1],t.points[2],e),o=d[0],l=d[1],d=linearOffset(t.points[2],t.points[3],e),u=d[0],c=d[1];var m=lineIntersection(a,s,o,l);m===null&&(m=s);var g=lineIntersection(u,c,o,l);return g===null&&(g=u),new PolynomialBezier(a,m,g,c)}function joinLines(t,e,a,s,o){var l=e.points[3],u=a.points[0];if(s===3||pointEqual(l,u))return l;if(s===2){var c=-e.tangentAngle(1),d=-a.tangentAngle(0)+Math.PI,m=lineIntersection(l,polarOffset(l,c+Math.PI/2,100),u,polarOffset(u,c+Math.PI/2,100)),g=m?pointDistance(m,l):pointDistance(l,u)/2,A=polarOffset(l,c,2*g*roundCorner);return t.setXYAt(A[0],A[1],"o",t.length()-1),A=polarOffset(u,d,2*g*roundCorner),t.setTripleAt(u[0],u[1],u[0],u[1],A[0],A[1],t.length()),u}var P=pointEqual(l,e.points[2])?e.points[0]:e.points[2],W=pointEqual(u,a.points[1])?a.points[3]:a.points[1],me=lineIntersection(P,l,u,W);return me&&pointDistance(me,l)<o?(t.setTripleAt(me[0],me[1],me[0],me[1],me[0],me[1],t.length()),me):l}function getIntersection(t,e){var a=t.intersections(e);return a.length&&floatEqual(a[0][0],1)&&a.shift(),a.length?a[0]:null}function pruneSegmentIntersection(t,e){var a=t.slice(),s=e.slice(),o=getIntersection(t[t.length-1],e[0]);return o&&(a[t.length-1]=t[t.length-1].split(o[0])[0],s[0]=e[0].split(o[1])[1]),t.length>1&&e.length>1&&(o=getIntersection(t[0],e[e.length-1]),o)?[[t[0].split(o[0])[0]],[e[e.length-1].split(o[1])[1]]]:[a,s]}function pruneIntersections(t){for(var e,a=1;a<t.length;a+=1)e=pruneSegmentIntersection(t[a-1],t[a]),t[a-1]=e[0],t[a]=e[1];return t.length>1&&(e=pruneSegmentIntersection(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t}function offsetSegmentSplit(t,e){var a=t.inflectionPoints(),s,o,l,u;if(a.length===0)return[offsetSegment(t,e)];if(a.length===1||floatEqual(a[1],1))return l=t.split(a[0]),s=l[0],o=l[1],[offsetSegment(s,e),offsetSegment(o,e)];l=t.split(a[0]),s=l[0];var c=(a[1]-a[0])/(1-a[0]);return l=l[1].split(c),u=l[0],o=l[1],[offsetSegment(s,e),offsetSegment(u,e),offsetSegment(o,e)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(t,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(t,e,a,s){var o=shapePool.newElement();o.c=t.c;var l=t.length();t.c||(l-=1);var u,c,d,m=[];for(u=0;u<l;u+=1)d=PolynomialBezier.shapeSegment(t,u),m.push(offsetSegmentSplit(d,e));if(!t.c)for(u=l-1;u>=0;u-=1)d=PolynomialBezier.shapeSegmentInverted(t,u),m.push(offsetSegmentSplit(d,e));m=pruneIntersections(m);var g=null,A=null;for(u=0;u<m.length;u+=1){var P=m[u];for(A&&(g=joinLines(o,A,P[0],a,s)),A=P[P.length-1],c=0;c<P.length;c+=1)d=P[c],g&&pointEqual(d.points[0],g)?o.setXYAt(d.points[1][0],d.points[1][1],"o",o.length()-1):o.setTripleAt(d.points[0][0],d.points[0][1],d.points[1][0],d.points[1][1],d.points[0][0],d.points[0][1],o.length()),o.setTripleAt(d.points[3][0],d.points[3][1],d.points[3][0],d.points[3][1],d.points[2][0],d.points[2][1],o.length()),g=d.points[3]}return m.length&&joinLines(o,A,m[0][0],a,s),o},OffsetPathModifier.prototype.processShapes=function(t){var e,a,s=this.shapes.length,o,l,u=this.amount.v,c=this.miterLimit.v,d=this.lineJoin;if(u!==0){var m,g;for(a=0;a<s;a+=1){if(m=this.shapes[a],g=m.localShapeCollection,!(!m.shape._mdf&&!this._mdf&&!t))for(g.releaseShapes(),m.shape._mdf=!0,e=m.shape.paths.shapes,l=m.shape.paths._length,o=0;o<l;o+=1)g.addShape(this.processPath(e[o],u,d,c));m.shape.paths=m.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],a="normal",s="normal",o=e.length,l,u=0;u<o;u+=1)switch(l=e[u].toLowerCase(),l){case"italic":s="italic";break;case"bold":a="700";break;case"black":a="900";break;case"medium":a="500";break;case"regular":case"normal":a="400";break;case"light":case"thin":a="200";break}return{style:s,weight:t.fWeight||a}}var FontManager=function(){var t=5e3,e={w:0,size:0,shapes:[],data:{shapes:[]}},a=[];a=a.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var s=127988,o=917631,l=917601,u=917626,c=65039,d=8205,m=127462,g=127487,A=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function P(Fc){var _h=Fc.split(","),qc,Mh=_h.length,cf=[];for(qc=0;qc<Mh;qc+=1)_h[qc]!=="sans-serif"&&_h[qc]!=="monospace"&&cf.push(_h[qc]);return cf.join(",")}function W(Fc,_h){var qc=createTag("span");qc.setAttribute("aria-hidden",!0),qc.style.fontFamily=_h;var Mh=createTag("span");Mh.innerText="giItT1WQy@!-/#",qc.style.position="absolute",qc.style.left="-10000px",qc.style.top="-10000px",qc.style.fontSize="300px",qc.style.fontVariant="normal",qc.style.fontStyle="normal",qc.style.fontWeight="normal",qc.style.letterSpacing="0",qc.appendChild(Mh),document.body.appendChild(qc);var cf=Mh.offsetWidth;return Mh.style.fontFamily=P(Fc)+", "+_h,{node:Mh,w:cf,parent:qc}}function me(){var Fc,_h=this.fonts.length,qc,Mh,cf=_h;for(Fc=0;Fc<_h;Fc+=1)this.fonts[Fc].loaded?cf-=1:this.fonts[Fc].fOrigin==="n"||this.fonts[Fc].origin===0?this.fonts[Fc].loaded=!0:(qc=this.fonts[Fc].monoCase.node,Mh=this.fonts[Fc].monoCase.w,qc.offsetWidth!==Mh?(cf-=1,this.fonts[Fc].loaded=!0):(qc=this.fonts[Fc].sansCase.node,Mh=this.fonts[Fc].sansCase.w,qc.offsetWidth!==Mh&&(cf-=1,this.fonts[Fc].loaded=!0)),this.fonts[Fc].loaded&&(this.fonts[Fc].sansCase.parent.parentNode.removeChild(this.fonts[Fc].sansCase.parent),this.fonts[Fc].monoCase.parent.parentNode.removeChild(this.fonts[Fc].monoCase.parent)));cf!==0&&Date.now()-this.initTime<t?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function ve(Fc,_h){var qc=document.body&&_h?"svg":"canvas",Mh,cf=getFontProperties(Fc);if(qc==="svg"){var mf=createNS("text");mf.style.fontSize="100px",mf.setAttribute("font-family",Fc.fFamily),mf.setAttribute("font-style",cf.style),mf.setAttribute("font-weight",cf.weight),mf.textContent="1",Fc.fClass?(mf.style.fontFamily="inherit",mf.setAttribute("class",Fc.fClass)):mf.style.fontFamily=Fc.fFamily,_h.appendChild(mf),Mh=mf}else{var a1=new OffscreenCanvas(500,500).getContext("2d");a1.font=cf.style+" "+cf.weight+" 100px "+Fc.fFamily,Mh=a1}function s1(E1){return qc==="svg"?(Mh.textContent=E1,Mh.getComputedTextLength()):Mh.measureText(E1).width}return{measureText:s1}}function He(Fc,_h){if(!Fc){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=Fc.list;return}if(!document.body){this.isLoaded=!0,Fc.list.forEach(function(m2){m2.helper=ve(m2),m2.cache={}}),this.fonts=Fc.list;return}var qc=Fc.list,Mh,cf=qc.length,mf=cf;for(Mh=0;Mh<cf;Mh+=1){var a1=!0,s1,E1;if(qc[Mh].loaded=!1,qc[Mh].monoCase=W(qc[Mh].fFamily,"monospace"),qc[Mh].sansCase=W(qc[Mh].fFamily,"sans-serif"),!qc[Mh].fPath)qc[Mh].loaded=!0,mf-=1;else if(qc[Mh].fOrigin==="p"||qc[Mh].origin===3){if(s1=document.querySelectorAll('style[f-forigin="p"][f-family="'+qc[Mh].fFamily+'"], style[f-origin="3"][f-family="'+qc[Mh].fFamily+'"]'),s1.length>0&&(a1=!1),a1){var T1=createTag("style");T1.setAttribute("f-forigin",qc[Mh].fOrigin),T1.setAttribute("f-origin",qc[Mh].origin),T1.setAttribute("f-family",qc[Mh].fFamily),T1.type="text/css",T1.innerText="@font-face {font-family: "+qc[Mh].fFamily+"; font-style: normal; src: url('"+qc[Mh].fPath+"');}",_h.appendChild(T1)}}else if(qc[Mh].fOrigin==="g"||qc[Mh].origin===1){for(s1=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),E1=0;E1<s1.length;E1+=1)s1[E1].href.indexOf(qc[Mh].fPath)!==-1&&(a1=!1);if(a1){var z1=createTag("link");z1.setAttribute("f-forigin",qc[Mh].fOrigin),z1.setAttribute("f-origin",qc[Mh].origin),z1.type="text/css",z1.rel="stylesheet",z1.href=qc[Mh].fPath,document.body.appendChild(z1)}}else if(qc[Mh].fOrigin==="t"||qc[Mh].origin===2){for(s1=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),E1=0;E1<s1.length;E1+=1)qc[Mh].fPath===s1[E1].src&&(a1=!1);if(a1){var W1=createTag("link");W1.setAttribute("f-forigin",qc[Mh].fOrigin),W1.setAttribute("f-origin",qc[Mh].origin),W1.setAttribute("rel","stylesheet"),W1.setAttribute("href",qc[Mh].fPath),_h.appendChild(W1)}}qc[Mh].helper=ve(qc[Mh],_h),qc[Mh].cache={},this.fonts.push(qc[Mh])}mf===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function De(Fc){if(Fc){this.chars||(this.chars=[]);var _h,qc=Fc.length,Mh,cf=this.chars.length,mf;for(_h=0;_h<qc;_h+=1){for(Mh=0,mf=!1;Mh<cf;)this.chars[Mh].style===Fc[_h].style&&this.chars[Mh].fFamily===Fc[_h].fFamily&&this.chars[Mh].ch===Fc[_h].ch&&(mf=!0),Mh+=1;mf||(this.chars.push(Fc[_h]),cf+=1)}}}function Xe(Fc,_h,qc){for(var Mh=0,cf=this.chars.length;Mh<cf;){if(this.chars[Mh].ch===Fc&&this.chars[Mh].style===_h&&this.chars[Mh].fFamily===qc)return this.chars[Mh];Mh+=1}return(typeof Fc=="string"&&Fc.charCodeAt(0)!==13||!Fc)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",Fc,_h,qc)),e}function qe(Fc,_h,qc){var Mh=this.getFontByName(_h),cf=Fc;if(!Mh.cache[cf]){var mf=Mh.helper;if(Fc===" "){var a1=mf.measureText("|"+Fc+"|"),s1=mf.measureText("||");Mh.cache[cf]=(a1-s1)/100}else Mh.cache[cf]=mf.measureText(Fc)/100}return Mh.cache[cf]*qc}function Rs(Fc){for(var _h=0,qc=this.fonts.length;_h<qc;){if(this.fonts[_h].fName===Fc)return this.fonts[_h];_h+=1}return this.fonts[0]}function Vc(Fc){var _h=0,qc=Fc.charCodeAt(0);if(qc>=55296&&qc<=56319){var Mh=Fc.charCodeAt(1);Mh>=56320&&Mh<=57343&&(_h=(qc-55296)*1024+Mh-56320+65536)}return _h}function So(Fc,_h){var qc=Fc.toString(16)+_h.toString(16);return A.indexOf(qc)!==-1}function Do(Fc){return Fc===d}function eh(Fc){return Fc===c}function Ko(Fc){var _h=Vc(Fc);return _h>=m&&_h<=g}function Ge(Fc){return Ko(Fc.substr(0,2))&&Ko(Fc.substr(2,2))}function An(Fc){return a.indexOf(Fc)!==-1}function wt(Fc,_h){var qc=Vc(Fc.substr(_h,2));if(qc!==s)return!1;var Mh=0;for(_h+=2;Mh<5;){if(qc=Vc(Fc.substr(_h,2)),qc<l||qc>u)return!1;Mh+=1,_h+=2}return Vc(Fc.substr(_h,2))===o}function Bs(){this.isLoaded=!0}var yh=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};yh.isModifier=So,yh.isZeroWidthJoiner=Do,yh.isFlagEmoji=Ge,yh.isRegionalCode=Ko,yh.isCombinedCharacter=An,yh.isRegionalFlag=wt,yh.isVariationSelector=eh,yh.BLACK_FLAG_CODE_POINT=s;var df={addChars:De,addFonts:He,getCharData:Xe,getFontByName:Rs,measureText:qe,checkLoadedFonts:me,setIsLoaded:Bs};return yh.prototype=df,yh}();function SlotManager(t){this.animationData=t}SlotManager.prototype.getProp=function(t){return this.animationData.slots&&this.animationData.slots[t.sid]?Object.assign(t,this.animationData.slots[t.sid].p):t};function slotFactory(t){return new SlotManager(t)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){this.renderableComponents.indexOf(e)===-1&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){this.renderableComponents.indexOf(e)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,a=this.renderableComponents.length;for(e=0;e<a;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var t={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(e){return t[e]||""}}();function SliderEffect(t,e,a){this.p=PropertyFactory.getProp(e,t.v,0,0,a)}function AngleEffect(t,e,a){this.p=PropertyFactory.getProp(e,t.v,0,0,a)}function ColorEffect(t,e,a){this.p=PropertyFactory.getProp(e,t.v,1,0,a)}function PointEffect(t,e,a){this.p=PropertyFactory.getProp(e,t.v,1,0,a)}function LayerIndexEffect(t,e,a){this.p=PropertyFactory.getProp(e,t.v,0,0,a)}function MaskIndexEffect(t,e,a){this.p=PropertyFactory.getProp(e,t.v,0,0,a)}function CheckboxEffect(t,e,a){this.p=PropertyFactory.getProp(e,t.v,0,0,a)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var a=t.ef||[];this.effectElements=[];var s,o=a.length,l;for(s=0;s<o;s+=1)l=new GroupEffect(a[s],e),this.effectElements.push(l)}function GroupEffect(t,e){this.init(t,e)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var a,s=this.data.ef.length,o,l=this.data.ef;for(a=0;a<s;a+=1){switch(o=null,l[a].ty){case 0:o=new SliderEffect(l[a],e,this);break;case 1:o=new AngleEffect(l[a],e,this);break;case 2:o=new ColorEffect(l[a],e,this);break;case 3:o=new PointEffect(l[a],e,this);break;case 4:case 7:o=new CheckboxEffect(l[a],e,this);break;case 10:o=new LayerIndexEffect(l[a],e,this);break;case 11:o=new MaskIndexEffect(l[a],e,this);break;case 5:o=new EffectsManager(l[a],e);break;default:o=new NoValueEffect(l[a]);break}o&&this.effectElements.push(o)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,a=this.data.masksProperties.length;e<a;){if(this.data.masksProperties[e].mode!=="n"&&this.data.masksProperties[e].cl!==!1)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var a=e("layer"),s=e("effects"),o=e("shape"),l=e("text"),u=e("comp");this.layerInterface=a(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var c=s.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(c),this.data.ty===0||this.data.xt?this.compInterface=u(this):this.data.ty===4?(this.layerInterface.shapeInterface=o(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=l(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm),a=this.baseElement||this.layerElement;a.style["mix-blend-mode"]=e},initBaseData:function(e,a,s){this.globalData=a,this.comp=s,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,a){var s,o=this.dynamicProperties.length;for(s=0;s<o;s+=1)(a||this._isParent&&this.dynamicProperties[s].propType==="transform")&&(this.dynamicProperties[s].getValue(),this.dynamicProperties[s]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&this.dynamicProperties.push(e)}};function FootageElement(t,e,a){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,a)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var t=getExpressionInterfaces();if(t){var e=t("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(t,e,a){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,a),this._isPlaying=!1,this._canPlay=!1;var s=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(s),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,t.au&&t.au.lv?t.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var a=this._volume*this._volumeMultiplier;this._previousVolume!==a&&(this._previousVolume=a,this.audio.volume(a))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(t){var e,a=this.layers.length,s;for(this.completeLayers=!0,e=a-1;e>=0;e-=1)this.elements[e]||(s=this.layers[e],s.ip-s.st<=t-this.layers[e].st&&s.op-s.st>t-this.layers[e].st&&this.buildItem(e)),this.completeLayers=this.elements[e]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t);default:return this.createNull(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;var e,a=t.length,s,o=this.layers.length;for(e=0;e<a;e+=1)for(s=0;s<o;){if(this.layers[s].id===t[e].id){this.layers[s]=t[e];break}s+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,a){for(var s=this.elements,o=this.layers,l=0,u=o.length;l<u;)o[l].ind==e&&(!s[l]||s[l]===!0?(this.buildItem(l),this.addPendingElement(t)):(a.push(s[l]),s[l].setAsParent(),o[l].parent!==void 0?this.buildElementParenting(t,o[l].parent,a):t.setHierarchy(a))),l+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,a=t.length;for(e=0;e<a;e+=1)if(t[e].xt){var s=this.createComp(t[e]);s.initExpressions(),this.globalData.projectInterface.registerComposition(s)}},BaseRenderer.prototype.getElementById=function(t){var e,a=this.elements.length;for(e=0;e<a;e+=1)if(this.elements[e].data.ind===t)return this.elements[e];return null},BaseRenderer.prototype.getElementByPath=function(t){var e=t.shift(),a;if(typeof e=="number")a=this.elements[e];else{var s,o=this.elements.length;for(s=0;s<o;s+=1)if(this.elements[s].data.nm===e){a=this.elements[s];break}}return t.length===0?a:a.getElementByPath(t)},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(t),this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,a=this.finalTransform.mat,s=0,o=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;s<o;){if(this.hierarchy[s].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}s+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,a.cloneFromProps(e),s=0;s<o;s+=1)a.multiply(this.hierarchy[s].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,a=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<a;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var s=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(s),e=1;e<a;e+=1){var o=this.localTransforms[e].matrix;s.multiply(o)}s.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var l=this.finalTransform.localOpacity;for(e=0;e<a;e+=1)l*=this.localTransforms[e].opacity*.01;this.finalTransform.localOpacity=l}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var a=0,s=e.length;for(a=0;a<s;a+=1)this.localTransforms.push(e[a])}}},globalToLocal:function(e){var a=[];a.push(this.finalTransform);for(var s=!0,o=this.comp;s;)o.finalTransform?(o.data.hasMask&&a.splice(0,0,o.finalTransform),o=o.comp):s=!1;var l,u=a.length,c;for(l=0;l<u;l+=1)c=a[l].mat.applyToPointArray(0,0,0),e=[e[0]-c[0],e[1]-c[1],0];return e},mHelper:new Matrix};function MaskElement(t,e,a){this.data=t,this.element=e,this.globalData=a,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var s=this.globalData.defs,o,l=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(l),this.solidPath="";var u,c=this.masksProperties,d=0,m=[],g,A,P=createElementID(),W,me,ve,He,De="clipPath",Xe="clip-path";for(o=0;o<l;o+=1)if((c[o].mode!=="a"&&c[o].mode!=="n"||c[o].inv||c[o].o.k!==100||c[o].o.x)&&(De="mask",Xe="mask"),(c[o].mode==="s"||c[o].mode==="i")&&d===0?(W=createNS("rect"),W.setAttribute("fill","#ffffff"),W.setAttribute("width",this.element.comp.data.w||0),W.setAttribute("height",this.element.comp.data.h||0),m.push(W)):W=null,u=createNS("path"),c[o].mode==="n")this.viewData[o]={op:PropertyFactory.getProp(this.element,c[o].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[o],3),elem:u,lastPath:""},s.appendChild(u);else{d+=1,u.setAttribute("fill",c[o].mode==="s"?"#000000":"#ffffff"),u.setAttribute("clip-rule","nonzero");var qe;if(c[o].x.k!==0?(De="mask",Xe="mask",He=PropertyFactory.getProp(this.element,c[o].x,0,null,this.element),qe=createElementID(),me=createNS("filter"),me.setAttribute("id",qe),ve=createNS("feMorphology"),ve.setAttribute("operator","erode"),ve.setAttribute("in","SourceGraphic"),ve.setAttribute("radius","0"),me.appendChild(ve),s.appendChild(me),u.setAttribute("stroke",c[o].mode==="s"?"#000000":"#ffffff")):(ve=null,He=null),this.storedData[o]={elem:u,x:He,expan:ve,lastPath:"",lastOperator:"",filterId:qe,lastRadius:0},c[o].mode==="i"){A=m.length;var Rs=createNS("g");for(g=0;g<A;g+=1)Rs.appendChild(m[g]);var Vc=createNS("mask");Vc.setAttribute("mask-type","alpha"),Vc.setAttribute("id",P+"_"+d),Vc.appendChild(u),s.appendChild(Vc),Rs.setAttribute("mask","url("+getLocationHref()+"#"+P+"_"+d+")"),m.length=0,m.push(Rs)}else m.push(u);c[o].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[o]={elem:u,lastPath:"",op:PropertyFactory.getProp(this.element,c[o].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[o],3),invRect:W},this.viewData[o].prop.k||this.drawPath(c[o],this.viewData[o].prop.v,this.viewData[o])}for(this.maskElement=createNS(De),l=m.length,o=0;o<l;o+=1)this.maskElement.appendChild(m[o]);d>0&&(this.maskElement.setAttribute("id",P),this.element.maskedElement.setAttribute(Xe,"url("+getLocationHref()+"#"+P+")"),s.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e=this.element.finalTransform.mat,a,s=this.masksProperties.length;for(a=0;a<s;a+=1)if((this.viewData[a].prop._mdf||t)&&this.drawPath(this.masksProperties[a],this.viewData[a].prop.v,this.viewData[a]),(this.viewData[a].op._mdf||t)&&this.viewData[a].elem.setAttribute("fill-opacity",this.viewData[a].op.v),this.masksProperties[a].mode!=="n"&&(this.viewData[a].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[a].invRect.setAttribute("transform",e.getInverseMatrix().to2dCSS()),this.storedData[a].x&&(this.storedData[a].x._mdf||t))){var o=this.storedData[a].expan;this.storedData[a].x.v<0?(this.storedData[a].lastOperator!=="erode"&&(this.storedData[a].lastOperator="erode",this.storedData[a].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[a].filterId+")")),o.setAttribute("radius",-this.storedData[a].x.v)):(this.storedData[a].lastOperator!=="dilate"&&(this.storedData[a].lastOperator="dilate",this.storedData[a].elem.setAttribute("filter",null)),this.storedData[a].elem.setAttribute("stroke-width",this.storedData[a].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" ",t},MaskElement.prototype.drawPath=function(t,e,a){var s=" M"+e.v[0][0]+","+e.v[0][1],o,l;for(l=e._length,o=1;o<l;o+=1)s+=" C"+e.o[o-1][0]+","+e.o[o-1][1]+" "+e.i[o][0]+","+e.i[o][1]+" "+e.v[o][0]+","+e.v[o][1];if(e.c&&l>1&&(s+=" C"+e.o[o-1][0]+","+e.o[o-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),a.lastPath!==s){var u="";a.elem&&(e.c&&(u=t.inv?this.solidPath+s:s),a.elem.setAttribute("d",u)),a.lastPath=s}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var t={};t.createFilter=e,t.createAlphaToLuminanceFilter=a;function e(s,o){var l=createNS("filter");return l.setAttribute("id",s),o!==!0&&(l.setAttribute("filterUnits","objectBoundingBox"),l.setAttribute("x","0%"),l.setAttribute("y","0%"),l.setAttribute("width","100%"),l.setAttribute("height","100%")),l}function a(){var s=createNS("feColorMatrix");return s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),s}return t}(),featureSupport=function(){var t={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),/firefox/i.test(navigator.userAgent)&&(t.svgLumaHidden=!1),t}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(t){var e,a="SourceGraphic",s=t.data.ef?t.data.ef.length:0,o=createElementID(),l=filtersFactory.createFilter(o,!0),u=0;this.filters=[];var c;for(e=0;e<s;e+=1){c=null;var d=t.data.ef[e].ty;if(registeredEffects$1[d]){var m=registeredEffects$1[d].effect;c=new m(l,t.effectsManager.effectElements[e],t,idPrefix+u,a),a=idPrefix+u,registeredEffects$1[d].countsAsEffect&&(u+=1)}c&&this.filters.push(c)}u&&(t.globalData.defs.appendChild(l),t.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+o+")")),this.filters.length&&t.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(t){var e,a=this.filters.length;for(e=0;e<a;e+=1)this.filters[e].renderFrame(t)},SVGEffects.prototype.getEffects=function(t){var e,a=this.filters.length,s=[];for(e=0;e<a;e+=1)this.filters[e].type===t&&s.push(this.filters[e]);return s};function registerEffect$1(t,e,a){registeredEffects$1[t]={effect:e,countsAsEffect:a}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var a=createNS("g");a.setAttribute("id",this.layerId),a.appendChild(this.layerElement),e=a,this.globalData.defs.appendChild(a)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var s=createNS("clipPath"),o=createNS("path");o.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var l=createElementID();if(s.setAttribute("id",l),s.appendChild(o),this.globalData.defs.appendChild(s),this.checkMasks()){var u=createNS("g");u.setAttribute("clip-path","url("+getLocationHref()+"#"+l+")"),u.appendChild(this.layerElement),this.transformedElement=u,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+l+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var a=this.layerId+"_"+e,s,o,l,u;if(e===1||e===3){var c=createNS("mask");c.setAttribute("id",a),c.setAttribute("mask-type",e===3?"luminance":"alpha"),l=createNS("use"),l.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),c.appendChild(l),this.globalData.defs.appendChild(c),!featureSupport.maskType&&e===1&&(c.setAttribute("mask-type","luminance"),s=createElementID(),o=filtersFactory.createFilter(s),this.globalData.defs.appendChild(o),o.appendChild(filtersFactory.createAlphaToLuminanceFilter()),u=createNS("g"),u.appendChild(l),c.appendChild(u),u.setAttribute("filter","url("+getLocationHref()+"#"+s+")"))}else if(e===2){var d=createNS("mask");d.setAttribute("id",a),d.setAttribute("mask-type","alpha");var m=createNS("g");d.appendChild(m),s=createElementID(),o=filtersFactory.createFilter(s);var g=createNS("feComponentTransfer");g.setAttribute("in","SourceGraphic"),o.appendChild(g);var A=createNS("feFuncA");A.setAttribute("type","table"),A.setAttribute("tableValues","1.0 0.0"),g.appendChild(A),this.globalData.defs.appendChild(o);var P=createNS("rect");P.setAttribute("width",this.comp.data.w),P.setAttribute("height",this.comp.data.h),P.setAttribute("x","0"),P.setAttribute("y","0"),P.setAttribute("fill","#ffffff"),P.setAttribute("opacity","0"),m.setAttribute("filter","url("+getLocationHref()+"#"+s+")"),m.appendChild(P),l=createNS("use"),l.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),m.appendChild(l),featureSupport.maskType||(d.setAttribute("mask-type","luminance"),o.appendChild(filtersFactory.createAlphaToLuminanceFilter()),u=createNS("g"),m.appendChild(P),u.appendChild(this.layerElement),m.appendChild(u)),this.globalData.defs.appendChild(d)}this.matteMasks[e]=a}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var t={initElement:function(a,s,o){this.initFrame(),this.initBaseData(a,s,o),this.initTransform(a,s,o),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var a=this.baseElement||this.layerElement;a.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var a=this.baseElement||this.layerElement;a.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(a){this._mdf=!1,this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(t)],RenderableDOMElement)})();function IImageElement(t,e,a){this.assetData=e.getAssetData(t.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(t,e,a),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(t,e){this.elem=t,this.pos=e}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(e){var a,s=this.shapeModifiers.length;for(a=0;a<s;a+=1)this.shapeModifiers[a].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var a=0,s=this.shapeModifiers.length;a<s;)if(this.shapeModifiers[a].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,a=this.shapes.length;for(e=0;e<a;e+=1)this.shapes[e].sh.reset();a=this.shapeModifiers.length;var s;for(e=a-1;e>=0&&(s=this.shapeModifiers[e].processShapes(this._isFirstFrame),!s);e-=1);}},searchProcessedElement:function(e){for(var a=this.processedElements,s=0,o=a.length;s<o;){if(a[s].elem===e)return a[s].pos;s+=1}return 0},addProcessedElement:function(e,a){for(var s=this.processedElements,o=s.length;o;)if(o-=1,s[o].elem===e){s[o].pos=a;return}s.push(new ProcessedElement(e,a))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(t,e,a){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=a,this.lvl=e,this._isAnimated=!!a.k;for(var s=0,o=t.length;s<o;){if(t[s].mProps.dynamicProperties.length){this._isAnimated=!0;break}s+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=t.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(t,e,a,s){this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=a,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(s);var o,l=e.length||0,u;for(o=0;o<l;o+=1)u=PropertyFactory.getProp(t,e[o].v,0,0,this),this.k=u.k||this.k,this.dataProps[o]={n:e[o].n,p:u};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(t){if(!(this.elem.globalData.frameId===this.frameId&&!t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,a=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),e=0;e<a;e+=1)this.dataProps[e].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(t,e,a){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=a,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(t,e,a){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=a}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(t,e,a){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=a}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(t,e,a){this.data=e,this.c=createTypedArray("uint8c",e.p*4);var s=e.k.k[0].s?e.k.k[0].s.length-e.p*4:e.k.k.length-e.p*4;this.o=createTypedArray("float32",s),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=s,this.initDynamicPropertyContainer(a),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(t,e){for(var a=0,s=this.o.length/2,o;a<s;){if(o=Math.abs(t[a*4]-t[e*4+a*2]),o>.01)return!1;a+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,a=this.data.p*4,s,o;for(e=0;e<a;e+=1)s=e%4===0?100:255,o=Math.round(this.prop.v[e]*s),this.c[e]!==o&&(this.c[e]=o,this._cmdf=!t);if(this.o.length)for(a=this.prop.v.length,e=this.data.p*4;e<a;e+=1)s=e%2===0?100:1,o=e%2===0?Math.round(this.prop.v[e]*100):this.prop.v[e],this.o[e-this.data.p*4]!==o&&(this.o[e-this.data.p*4]=o,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(t,e,a){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,a)}SVGGradientFillStyleData.prototype.initGradientData=function(t,e,a){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=a,this.stops=[],this.setGradientData(a.pElem,e),this.setGradientOpacity(e,a),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var a=createElementID(),s=createNS(e.t===1?"linearGradient":"radialGradient");s.setAttribute("id",a),s.setAttribute("spreadMethod","pad"),s.setAttribute("gradientUnits","userSpaceOnUse");var o=[],l,u,c;for(c=e.g.p*4,u=0;u<c;u+=4)l=createNS("stop"),s.appendChild(l),o.push(l);t.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+a+")"),this.gf=s,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var a,s,o,l=createNS("mask"),u=createNS("path");l.appendChild(u);var c=createElementID(),d=createElementID();l.setAttribute("id",d);var m=createNS(t.t===1?"linearGradient":"radialGradient");m.setAttribute("id",c),m.setAttribute("spreadMethod","pad"),m.setAttribute("gradientUnits","userSpaceOnUse"),o=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var g=this.stops;for(s=t.g.p*4;s<o;s+=2)a=createNS("stop"),a.setAttribute("stop-color","rgb(255,255,255)"),m.appendChild(a),g.push(a);u.setAttribute(t.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+c+")"),t.ty==="gs"&&(u.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),u.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),t.lj===1&&u.setAttribute("stroke-miterlimit",t.ml)),this.of=m,this.ms=l,this.ost=g,this.maskId=d,e.msElem=u}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(t,e,a){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,a),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(t,e,a){this.transform={mProps:t,op:e,container:a},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(e,a,s,o){if(a===0)return"";var l=e.o,u=e.i,c=e.v,d,m=" M"+o.applyToPointStringified(c[0][0],c[0][1]);for(d=1;d<a;d+=1)m+=" C"+o.applyToPointStringified(l[d-1][0],l[d-1][1])+" "+o.applyToPointStringified(u[d][0],u[d][1])+" "+o.applyToPointStringified(c[d][0],c[d][1]);return s&&a&&(m+=" C"+o.applyToPointStringified(l[d-1][0],l[d-1][1])+" "+o.applyToPointStringified(u[0][0],u[0][1])+" "+o.applyToPointStringified(c[0][0],c[0][1]),m+="z"),m},SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix,a={createRenderFunction:s};function s(A){switch(A.ty){case"fl":return c;case"gf":return m;case"gs":return d;case"st":return g;case"sh":case"el":case"rc":case"sr":return u;case"tr":return o;case"no":return l;default:return null}}function o(A,P,W){(W||P.transform.op._mdf)&&P.transform.container.setAttribute("opacity",P.transform.op.v),(W||P.transform.mProps._mdf)&&P.transform.container.setAttribute("transform",P.transform.mProps.v.to2dCSS())}function l(){}function u(A,P,W){var me,ve,He,De,Xe,qe,Rs=P.styles.length,Vc=P.lvl,So,Do,eh,Ko;for(qe=0;qe<Rs;qe+=1){if(De=P.sh._mdf||W,P.styles[qe].lvl<Vc){for(Do=e.reset(),eh=Vc-P.styles[qe].lvl,Ko=P.transformers.length-1;!De&&eh>0;)De=P.transformers[Ko].mProps._mdf||De,eh-=1,Ko-=1;if(De)for(eh=Vc-P.styles[qe].lvl,Ko=P.transformers.length-1;eh>0;)Do.multiply(P.transformers[Ko].mProps.v),eh-=1,Ko-=1}else Do=t;if(So=P.sh.paths,ve=So._length,De){for(He="",me=0;me<ve;me+=1)Xe=So.shapes[me],Xe&&Xe._length&&(He+=buildShapeString(Xe,Xe._length,Xe.c,Do));P.caches[qe]=He}else He=P.caches[qe];P.styles[qe].d+=A.hd===!0?"":He,P.styles[qe]._mdf=De||P.styles[qe]._mdf}}function c(A,P,W){var me=P.style;(P.c._mdf||W)&&me.pElem.setAttribute("fill","rgb("+bmFloor(P.c.v[0])+","+bmFloor(P.c.v[1])+","+bmFloor(P.c.v[2])+")"),(P.o._mdf||W)&&me.pElem.setAttribute("fill-opacity",P.o.v)}function d(A,P,W){m(A,P,W),g(A,P,W)}function m(A,P,W){var me=P.gf,ve=P.g._hasOpacity,He=P.s.v,De=P.e.v;if(P.o._mdf||W){var Xe=A.ty==="gf"?"fill-opacity":"stroke-opacity";P.style.pElem.setAttribute(Xe,P.o.v)}if(P.s._mdf||W){var qe=A.t===1?"x1":"cx",Rs=qe==="x1"?"y1":"cy";me.setAttribute(qe,He[0]),me.setAttribute(Rs,He[1]),ve&&!P.g._collapsable&&(P.of.setAttribute(qe,He[0]),P.of.setAttribute(Rs,He[1]))}var Vc,So,Do,eh;if(P.g._cmdf||W){Vc=P.cst;var Ko=P.g.c;for(Do=Vc.length,So=0;So<Do;So+=1)eh=Vc[So],eh.setAttribute("offset",Ko[So*4]+"%"),eh.setAttribute("stop-color","rgb("+Ko[So*4+1]+","+Ko[So*4+2]+","+Ko[So*4+3]+")")}if(ve&&(P.g._omdf||W)){var Ge=P.g.o;for(P.g._collapsable?Vc=P.cst:Vc=P.ost,Do=Vc.length,So=0;So<Do;So+=1)eh=Vc[So],P.g._collapsable||eh.setAttribute("offset",Ge[So*2]+"%"),eh.setAttribute("stop-opacity",Ge[So*2+1])}if(A.t===1)(P.e._mdf||W)&&(me.setAttribute("x2",De[0]),me.setAttribute("y2",De[1]),ve&&!P.g._collapsable&&(P.of.setAttribute("x2",De[0]),P.of.setAttribute("y2",De[1])));else{var An;if((P.s._mdf||P.e._mdf||W)&&(An=Math.sqrt(Math.pow(He[0]-De[0],2)+Math.pow(He[1]-De[1],2)),me.setAttribute("r",An),ve&&!P.g._collapsable&&P.of.setAttribute("r",An)),P.s._mdf||P.e._mdf||P.h._mdf||P.a._mdf||W){An||(An=Math.sqrt(Math.pow(He[0]-De[0],2)+Math.pow(He[1]-De[1],2)));var wt=Math.atan2(De[1]-He[1],De[0]-He[0]),Bs=P.h.v;Bs>=1?Bs=.99:Bs<=-1&&(Bs=-.99);var yh=An*Bs,df=Math.cos(wt+P.a.v)*yh+He[0],Fc=Math.sin(wt+P.a.v)*yh+He[1];me.setAttribute("fx",df),me.setAttribute("fy",Fc),ve&&!P.g._collapsable&&(P.of.setAttribute("fx",df),P.of.setAttribute("fy",Fc))}}}function g(A,P,W){var me=P.style,ve=P.d;ve&&(ve._mdf||W)&&ve.dashStr&&(me.pElem.setAttribute("stroke-dasharray",ve.dashStr),me.pElem.setAttribute("stroke-dashoffset",ve.dashoffset[0])),P.c&&(P.c._mdf||W)&&me.pElem.setAttribute("stroke","rgb("+bmFloor(P.c.v[0])+","+bmFloor(P.c.v[1])+","+bmFloor(P.c.v[2])+")"),(P.o._mdf||W)&&me.pElem.setAttribute("stroke-opacity",P.o.v),(P.w._mdf||W)&&(me.pElem.setAttribute("stroke-width",P.w.v),me.msElem&&me.msElem.setAttribute("stroke-width",P.w.v))}return a}();function SVGShapeElement(t,e,a){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,a),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e=this.shapes.length,a,s,o=this.stylesList.length,l,u=[],c=!1;for(s=0;s<o;s+=1){for(l=this.stylesList[s],c=!1,u.length=0,t=0;t<e;t+=1)a=this.shapes[t],a.styles.indexOf(l)!==-1&&(u.push(a),c=a._isAnimated||c);u.length>1&&c&&this.setShapesAsAnimated(u)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,a=t.length;for(e=0;e<a;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var a,s=new SVGStyleData(t,e),o=s.pElem;if(t.ty==="st")a=new SVGStrokeStyleData(this,t,s);else if(t.ty==="fl")a=new SVGFillStyleData(this,t,s);else if(t.ty==="gf"||t.ty==="gs"){var l=t.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;a=new l(this,t,s),this.globalData.defs.appendChild(a.gf),a.maskId&&(this.globalData.defs.appendChild(a.ms),this.globalData.defs.appendChild(a.of),o.setAttribute("mask","url("+getLocationHref()+"#"+a.maskId+")"))}else t.ty==="no"&&(a=new SVGNoStyleData(this,t,s));return(t.ty==="st"||t.ty==="gs")&&(o.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),o.setAttribute("fill-opacity","0"),t.lj===1&&o.setAttribute("stroke-miterlimit",t.ml)),t.r===2&&o.setAttribute("fill-rule","evenodd"),t.ln&&o.setAttribute("id",t.ln),t.cl&&o.setAttribute("class",t.cl),t.bm&&(o.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(s),this.addToAnimatedContents(t,a),a},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var a=TransformPropertyFactory.getTransformProperty(this,t,this),s=new SVGTransformData(a,a.o,e);return this.addToAnimatedContents(t,s),s},SVGShapeElement.prototype.createShapeElement=function(t,e,a){var s=4;t.ty==="rc"?s=5:t.ty==="el"?s=6:t.ty==="sr"&&(s=7);var o=ShapePropertyFactory.getShapeProp(this,t,s,this),l=new SVGShapeData(e,a,o);return this.shapes.push(l),this.addShapeToModifiers(l),this.addToAnimatedContents(t,l),l},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var a=0,s=this.animatedContents.length;a<s;){if(this.animatedContents[a].element===e)return;a+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e=t.styles,a,s=this.stylesList.length;for(a=0;a<s;a+=1)e.indexOf(this.stylesList[a])===-1&&!this.stylesList[a].closed&&e.push(this.stylesList[a])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,a,s,o,l,u){var c=[].concat(l),d,m=t.length-1,g,A,P=[],W=[],me,ve,He;for(d=m;d>=0;d-=1){if(He=this.searchProcessedElement(t[d]),He?e[d]=a[He-1]:t[d]._render=u,t[d].ty==="fl"||t[d].ty==="st"||t[d].ty==="gf"||t[d].ty==="gs"||t[d].ty==="no")He?e[d].style.closed=t[d].hd:e[d]=this.createStyleElement(t[d],o),t[d]._render&&e[d].style.pElem.parentNode!==s&&s.appendChild(e[d].style.pElem),P.push(e[d].style);else if(t[d].ty==="gr"){if(!He)e[d]=this.createGroupElement(t[d]);else for(A=e[d].it.length,g=0;g<A;g+=1)e[d].prevViewData[g]=e[d].it[g];this.searchShapes(t[d].it,e[d].it,e[d].prevViewData,e[d].gr,o+1,c,u),t[d]._render&&e[d].gr.parentNode!==s&&s.appendChild(e[d].gr)}else t[d].ty==="tr"?(He||(e[d]=this.createTransformElement(t[d],s)),me=e[d].transform,c.push(me)):t[d].ty==="sh"||t[d].ty==="rc"||t[d].ty==="el"||t[d].ty==="sr"?(He||(e[d]=this.createShapeElement(t[d],c,o)),this.setElementStyles(e[d])):t[d].ty==="tm"||t[d].ty==="rd"||t[d].ty==="ms"||t[d].ty==="pb"||t[d].ty==="zz"||t[d].ty==="op"?(He?(ve=e[d],ve.closed=!1):(ve=ShapeModifiers.getModifier(t[d].ty),ve.init(this,t[d]),e[d]=ve,this.shapeModifiers.push(ve)),W.push(ve)):t[d].ty==="rp"&&(He?(ve=e[d],ve.closed=!0):(ve=ShapeModifiers.getModifier(t[d].ty),e[d]=ve,ve.init(this,t,d,e),this.shapeModifiers.push(ve),u=!1),W.push(ve));this.addProcessedElement(t[d],d+1)}for(m=P.length,d=0;d<m;d+=1)P[d].closed=!0;for(m=W.length,d=0;d<m;d+=1)W[d].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e=this.animatedContents.length,a;for(t=0;t<e;t+=1)a=this.animatedContents[t],(this._isFirstFrame||a.element._isAnimated)&&a.data!==!0&&a.fn(a.data,a.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(t,e,a,s,o,l){this.o=t,this.sw=e,this.sc=a,this.fc=s,this.m=o,this.p=l,this._mdf={o:!0,sw:!!e,sc:!!a,fc:!!s,m:!0,p:!0}}LetterProps.prototype.update=function(t,e,a,s,o,l){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var u=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,u=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,u=!0),this.sc!==a&&(this.sc=a,this._mdf.sc=!0,u=!0),this.fc!==s&&(this.fc=s,this._mdf.fc=!0,u=!0),this.m!==o&&(this.m=o,this._mdf.m=!0,u=!0),l.length&&(this.p[0]!==l[0]||this.p[1]!==l[1]||this.p[4]!==l[4]||this.p[5]!==l[5]||this.p[12]!==l[12]||this.p[13]!==l[13])&&(this.p=l,this._mdf.p=!0,u=!0),u};function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=t.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!t)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,a=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var s,o=this.effectsSequence.length,l=t||this.data.d.k[this.keysIndex].s;for(s=0;s<o;s+=1)a!==this.keysIndex?l=this.effectsSequence[s](l,l.t):l=this.effectsSequence[s](this.currentData,l.t);e!==l&&this.setCurrentData(l),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,a=0,s=t.length;a<=s-1&&!(a===s-1||t[a+1].t>e);)a+=1;return this.keysIndex!==a&&(this.keysIndex=a),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e=[],a=0,s=t.length,o,l,u=!1,c=!1,d="";a<s;)u=c,c=!1,o=t.charCodeAt(a),d=t.charAt(a),FontManager.isCombinedCharacter(o)?u=!0:o>=55296&&o<=56319?FontManager.isRegionalFlag(t,a)?d=t.substr(a,14):(l=t.charCodeAt(a+1),l>=56320&&l<=57343&&(FontManager.isModifier(o,l)?(d=t.substr(a,2),u=!0):FontManager.isFlagEmoji(t.substr(a,4))?d=t.substr(a,4):d=t.substr(a,2))):o>56319?(l=t.charCodeAt(a+1),FontManager.isVariationSelector(o)&&(u=!0)):FontManager.isZeroWidthJoiner(o)&&(u=!0,c=!0),u?(e[e.length-1]+=d,u=!1):e.push(d),a+=d.length;return e},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e=this.elem.globalData.fontManager,a=this.data,s=[],o,l,u,c=0,d,m=a.m.g,g=0,A=0,P=0,W=[],me=0,ve=0,He,De,Xe=e.getFontByName(t.f),qe,Rs=0,Vc=getFontProperties(Xe);t.fWeight=Vc.weight,t.fStyle=Vc.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),l=t.finalText.length,t.finalLineHeight=t.lh;var So=t.tr/1e3*t.finalSize,Do;if(t.sz)for(var eh=!0,Ko=t.sz[0],Ge=t.sz[1],An,wt;eh;){wt=this.buildFinalText(t.t),An=0,me=0,l=wt.length,So=t.tr/1e3*t.finalSize;var Bs=-1;for(o=0;o<l;o+=1)Do=wt[o].charCodeAt(0),u=!1,wt[o]===" "?Bs=o:(Do===13||Do===3)&&(me=0,u=!0,An+=t.finalLineHeight||t.finalSize*1.2),e.chars?(qe=e.getCharData(wt[o],Xe.fStyle,Xe.fFamily),Rs=u?0:qe.w*t.finalSize/100):Rs=e.measureText(wt[o],t.f,t.finalSize),me+Rs>Ko&&wt[o]!==" "?(Bs===-1?l+=1:o=Bs,An+=t.finalLineHeight||t.finalSize*1.2,wt.splice(o,Bs===o?1:0,"\r"),Bs=-1,me=0):(me+=Rs,me+=So);An+=Xe.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&Ge<An?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=wt,l=t.finalText.length,eh=!1)}me=-So,Rs=0;var yh=0,df;for(o=0;o<l;o+=1)if(u=!1,df=t.finalText[o],Do=df.charCodeAt(0),Do===13||Do===3?(yh=0,W.push(me),ve=me>ve?me:ve,me=-2*So,d="",u=!0,P+=1):d=df,e.chars?(qe=e.getCharData(df,Xe.fStyle,e.getFontByName(t.f).fFamily),Rs=u?0:qe.w*t.finalSize/100):Rs=e.measureText(d,t.f,t.finalSize),df===" "?yh+=Rs+So:(me+=Rs+So+yh,yh=0),s.push({l:Rs,an:Rs,add:g,n:u,anIndexes:[],val:d,line:P,animatorJustifyOffset:0}),m==2){if(g+=Rs,d===""||d===" "||o===l-1){for((d===""||d===" ")&&(g-=Rs);A<=o;)s[A].an=g,s[A].ind=c,s[A].extra=Rs,A+=1;c+=1,g=0}}else if(m==3){if(g+=Rs,d===""||o===l-1){for(d===""&&(g-=Rs);A<=o;)s[A].an=g,s[A].ind=c,s[A].extra=Rs,A+=1;g=0,c+=1}}else s[c].ind=c,s[c].extra=0,c+=1;if(t.l=s,ve=me>ve?me:ve,W.push(me),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=ve,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=W;var Fc=a.a,_h,qc;De=Fc.length;var Mh,cf,mf=[];for(He=0;He<De;He+=1){for(_h=Fc[He],_h.a.sc&&(t.strokeColorAnim=!0),_h.a.sw&&(t.strokeWidthAnim=!0),(_h.a.fc||_h.a.fh||_h.a.fs||_h.a.fb)&&(t.fillColorAnim=!0),cf=0,Mh=_h.s.b,o=0;o<l;o+=1)qc=s[o],qc.anIndexes[He]=cf,(Mh==1&&qc.val!==""||Mh==2&&qc.val!==""&&qc.val!==" "||Mh==3&&(qc.n||qc.val==" "||o==l-1)||Mh==4&&(qc.n||o==l-1))&&(_h.s.rn===1&&mf.push(cf),cf+=1);a.a[He].s.totalChars=cf;var a1=-1,s1;if(_h.s.rn===1)for(o=0;o<l;o+=1)qc=s[o],a1!=qc.anIndexes[He]&&(a1=qc.anIndexes[He],s1=mf.splice(Math.floor(Math.random()*mf.length),1)[0]),qc.anIndexes[He]=s1}t.yOffset=t.finalLineHeight||t.finalSize*1.2,t.ls=t.ls||0,t.ascent=Xe.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=e===void 0?this.keysIndex:e;var a=this.copyData({},this.data.d.k[e].s);a=this.copyData(a,t),this.data.d.k[e].s=a,this.recalculate(e),this.setCurrentData(a),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,a=Math.floor;function s(l,u){this._currentTextLength=-1,this.k=!1,this.data=u,this.elem=l,this.comp=l.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(l),this.s=PropertyFactory.getProp(l,u.s||{k:0},0,0,this),"e"in u?this.e=PropertyFactory.getProp(l,u.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(l,u.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(l,u.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(l,u.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(l,u.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(l,u.a,0,.01,this),this.dynamicProperties.length||this.getValue()}s.prototype={getMult:function(u){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var c=0,d=0,m=1,g=1;this.ne.v>0?c=this.ne.v/100:d=-this.ne.v/100,this.xe.v>0?m=1-this.xe.v/100:g=1+this.xe.v/100;var A=BezierFactory.getBezierEasing(c,d,m,g).get,P=0,W=this.finalS,me=this.finalE,ve=this.data.sh;if(ve===2)me===W?P=u>=me?1:0:P=t(0,e(.5/(me-W)+(u-W)/(me-W),1)),P=A(P);else if(ve===3)me===W?P=u>=me?0:1:P=1-t(0,e(.5/(me-W)+(u-W)/(me-W),1)),P=A(P);else if(ve===4)me===W?P=0:(P=t(0,e(.5/(me-W)+(u-W)/(me-W),1)),P<.5?P*=2:P=1-2*(P-.5)),P=A(P);else if(ve===5){if(me===W)P=0;else{var He=me-W;u=e(t(0,u+.5-W),me-W);var De=-He/2+u,Xe=He/2;P=Math.sqrt(1-De*De/(Xe*Xe))}P=A(P)}else ve===6?(me===W?P=0:(u=e(t(0,u+.5-W),me-W),P=(1+Math.cos(Math.PI+Math.PI*2*u/(me-W)))/2),P=A(P)):(u>=a(W)&&(u-W<0?P=t(0,e(e(me,1)-(W-u),1)):P=t(0,e(me-u,1))),P=A(P));if(this.sm.v!==100){var qe=this.sm.v*.01;qe===0&&(qe=1e-8);var Rs=.5-qe*.5;P<Rs?P=0:(P=(P-Rs)/qe,P>1&&(P=1))}return P*this.a.v},getValue:function(u){this.iterateDynamicProperties(),this._mdf=u||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,u&&this.data.r===2&&(this.e.v=this._currentTextLength);var c=this.data.r===2?1:100/this.data.totalChars,d=this.o.v/c,m=this.s.v/c+d,g=this.e.v/c+d;if(m>g){var A=m;m=g,g=A}this.finalS=m,this.finalE=g}},extendPrototype([DynamicPropertyContainer],s);function o(l,u,c){return new s(l,u)}return{getTextSelectorProp:o}}();function TextAnimatorDataProperty(t,e,a){var s={propType:!1},o=PropertyFactory.getProp,l=e.a;this.a={r:l.r?o(t,l.r,0,degToRads,a):s,rx:l.rx?o(t,l.rx,0,degToRads,a):s,ry:l.ry?o(t,l.ry,0,degToRads,a):s,sk:l.sk?o(t,l.sk,0,degToRads,a):s,sa:l.sa?o(t,l.sa,0,degToRads,a):s,s:l.s?o(t,l.s,1,.01,a):s,a:l.a?o(t,l.a,1,0,a):s,o:l.o?o(t,l.o,0,.01,a):s,p:l.p?o(t,l.p,1,0,a):s,sw:l.sw?o(t,l.sw,0,0,a):s,sc:l.sc?o(t,l.sc,1,0,a):s,fc:l.fc?o(t,l.fc,1,0,a):s,fh:l.fh?o(t,l.fh,0,0,a):s,fs:l.fs?o(t,l.fs,0,.01,a):s,fb:l.fb?o(t,l.fb,0,.01,a):s,t:l.t?o(t,l.t,0,0,a):s},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,a),this.s.t=e.s.t}function TextAnimatorProperty(t,e,a){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=a,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(a)}TextAnimatorProperty.prototype.searchProperties=function(){var t,e=this._textData.a.length,a,s=PropertyFactory.getProp;for(t=0;t<e;t+=1)a=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,a,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:s(this._elem,this._textData.p.a,0,0,this),f:s(this._elem,this._textData.p.f,0,0,this),l:s(this._elem,this._textData.p.l,0,0,this),r:s(this._elem,this._textData.p.r,0,0,this),p:s(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=s(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,!(!this._mdf&&!this._isFirstFrame&&!e&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var a=this._moreOptions.alignment.v,s=this._animatorsData,o=this._textData,l=this.mHelper,u=this._renderType,c=this.renderedLetters.length,d,m,g,A,P=t.l,W,me,ve,He,De,Xe,qe,Rs,Vc,So,Do,eh,Ko,Ge,An;if(this._hasMaskedPath){if(An=this._pathData.m,!this._pathData.n||this._pathData._mdf){var wt=An.v;this._pathData.r.v&&(wt=wt.reverse()),W={tLength:0,segments:[]},A=wt._length-1;var Bs;for(eh=0,g=0;g<A;g+=1)Bs=bez.buildBezierData(wt.v[g],wt.v[g+1],[wt.o[g][0]-wt.v[g][0],wt.o[g][1]-wt.v[g][1]],[wt.i[g+1][0]-wt.v[g+1][0],wt.i[g+1][1]-wt.v[g+1][1]]),W.tLength+=Bs.segmentLength,W.segments.push(Bs),eh+=Bs.segmentLength;g=A,An.v.c&&(Bs=bez.buildBezierData(wt.v[g],wt.v[0],[wt.o[g][0]-wt.v[g][0],wt.o[g][1]-wt.v[g][1]],[wt.i[0][0]-wt.v[0][0],wt.i[0][1]-wt.v[0][1]]),W.tLength+=Bs.segmentLength,W.segments.push(Bs),eh+=Bs.segmentLength),this._pathData.pi=W}if(W=this._pathData.pi,me=this._pathData.f.v,qe=0,Xe=1,He=0,De=!0,So=W.segments,me<0&&An.v.c)for(W.tLength<Math.abs(me)&&(me=-Math.abs(me)%W.tLength),qe=So.length-1,Vc=So[qe].points,Xe=Vc.length-1;me<0;)me+=Vc[Xe].partialLength,Xe-=1,Xe<0&&(qe-=1,Vc=So[qe].points,Xe=Vc.length-1);Vc=So[qe].points,Rs=Vc[Xe-1],ve=Vc[Xe],Do=ve.partialLength}A=P.length,d=0,m=0;var yh=t.finalSize*1.2*.714,df=!0,Fc,_h,qc,Mh,cf;Mh=s.length;var mf,a1=-1,s1,E1,T1,z1=me,W1=qe,m2=Xe,C2=-1,A2,b2,_2,q1,U1,M2,x2,p1,S1="",D1=this.defaultPropsArray,_1;if(t.j===2||t.j===1){var B1=0,c2=0,H1=t.j===2?-.5:-1,x1=0,pf=!0;for(g=0;g<A;g+=1)if(P[g].n){for(B1&&(B1+=c2);x1<g;)P[x1].animatorJustifyOffset=B1,x1+=1;B1=0,pf=!0}else{for(qc=0;qc<Mh;qc+=1)Fc=s[qc].a,Fc.t.propType&&(pf&&t.j===2&&(c2+=Fc.t.v*H1),_h=s[qc].s,mf=_h.getMult(P[g].anIndexes[qc],o.a[qc].s.totalChars),mf.length?B1+=Fc.t.v*mf[0]*H1:B1+=Fc.t.v*mf*H1);pf=!1}for(B1&&(B1+=c2);x1<g;)P[x1].animatorJustifyOffset=B1,x1+=1}for(g=0;g<A;g+=1){if(l.reset(),A2=1,P[g].n)d=0,m+=t.yOffset,m+=df?1:0,me=z1,df=!1,this._hasMaskedPath&&(qe=W1,Xe=m2,Vc=So[qe].points,Rs=Vc[Xe-1],ve=Vc[Xe],Do=ve.partialLength,He=0),S1="",p1="",M2="",_1="",D1=this.defaultPropsArray;else{if(this._hasMaskedPath){if(C2!==P[g].line){switch(t.j){case 1:me+=eh-t.lineWidths[P[g].line];break;case 2:me+=(eh-t.lineWidths[P[g].line])/2;break}C2=P[g].line}a1!==P[g].ind&&(P[a1]&&(me+=P[a1].extra),me+=P[g].an/2,a1=P[g].ind),me+=a[0]*P[g].an*.005;var o1=0;for(qc=0;qc<Mh;qc+=1)Fc=s[qc].a,Fc.p.propType&&(_h=s[qc].s,mf=_h.getMult(P[g].anIndexes[qc],o.a[qc].s.totalChars),mf.length?o1+=Fc.p.v[0]*mf[0]:o1+=Fc.p.v[0]*mf),Fc.a.propType&&(_h=s[qc].s,mf=_h.getMult(P[g].anIndexes[qc],o.a[qc].s.totalChars),mf.length?o1+=Fc.a.v[0]*mf[0]:o1+=Fc.a.v[0]*mf);for(De=!0,this._pathData.a.v&&(me=P[0].an*.5+(eh-this._pathData.f.v-P[0].an*.5-P[P.length-1].an*.5)*a1/(A-1),me+=this._pathData.f.v);De;)He+Do>=me+o1||!Vc?(Ko=(me+o1-He)/ve.partialLength,E1=Rs.point[0]+(ve.point[0]-Rs.point[0])*Ko,T1=Rs.point[1]+(ve.point[1]-Rs.point[1])*Ko,l.translate(-a[0]*P[g].an*.005,-(a[1]*yh)*.01),De=!1):Vc&&(He+=ve.partialLength,Xe+=1,Xe>=Vc.length&&(Xe=0,qe+=1,So[qe]?Vc=So[qe].points:An.v.c?(Xe=0,qe=0,Vc=So[qe].points):(He-=ve.partialLength,Vc=null)),Vc&&(Rs=ve,ve=Vc[Xe],Do=ve.partialLength));s1=P[g].an/2-P[g].add,l.translate(-s1,0,0)}else s1=P[g].an/2-P[g].add,l.translate(-s1,0,0),l.translate(-a[0]*P[g].an*.005,-a[1]*yh*.01,0);for(qc=0;qc<Mh;qc+=1)Fc=s[qc].a,Fc.t.propType&&(_h=s[qc].s,mf=_h.getMult(P[g].anIndexes[qc],o.a[qc].s.totalChars),(d!==0||t.j!==0)&&(this._hasMaskedPath?mf.length?me+=Fc.t.v*mf[0]:me+=Fc.t.v*mf:mf.length?d+=Fc.t.v*mf[0]:d+=Fc.t.v*mf));for(t.strokeWidthAnim&&(_2=t.sw||0),t.strokeColorAnim&&(t.sc?b2=[t.sc[0],t.sc[1],t.sc[2]]:b2=[0,0,0]),t.fillColorAnim&&t.fc&&(q1=[t.fc[0],t.fc[1],t.fc[2]]),qc=0;qc<Mh;qc+=1)Fc=s[qc].a,Fc.a.propType&&(_h=s[qc].s,mf=_h.getMult(P[g].anIndexes[qc],o.a[qc].s.totalChars),mf.length?l.translate(-Fc.a.v[0]*mf[0],-Fc.a.v[1]*mf[1],Fc.a.v[2]*mf[2]):l.translate(-Fc.a.v[0]*mf,-Fc.a.v[1]*mf,Fc.a.v[2]*mf));for(qc=0;qc<Mh;qc+=1)Fc=s[qc].a,Fc.s.propType&&(_h=s[qc].s,mf=_h.getMult(P[g].anIndexes[qc],o.a[qc].s.totalChars),mf.length?l.scale(1+(Fc.s.v[0]-1)*mf[0],1+(Fc.s.v[1]-1)*mf[1],1):l.scale(1+(Fc.s.v[0]-1)*mf,1+(Fc.s.v[1]-1)*mf,1));for(qc=0;qc<Mh;qc+=1){if(Fc=s[qc].a,_h=s[qc].s,mf=_h.getMult(P[g].anIndexes[qc],o.a[qc].s.totalChars),Fc.sk.propType&&(mf.length?l.skewFromAxis(-Fc.sk.v*mf[0],Fc.sa.v*mf[1]):l.skewFromAxis(-Fc.sk.v*mf,Fc.sa.v*mf)),Fc.r.propType&&(mf.length?l.rotateZ(-Fc.r.v*mf[2]):l.rotateZ(-Fc.r.v*mf)),Fc.ry.propType&&(mf.length?l.rotateY(Fc.ry.v*mf[1]):l.rotateY(Fc.ry.v*mf)),Fc.rx.propType&&(mf.length?l.rotateX(Fc.rx.v*mf[0]):l.rotateX(Fc.rx.v*mf)),Fc.o.propType&&(mf.length?A2+=(Fc.o.v*mf[0]-A2)*mf[0]:A2+=(Fc.o.v*mf-A2)*mf),t.strokeWidthAnim&&Fc.sw.propType&&(mf.length?_2+=Fc.sw.v*mf[0]:_2+=Fc.sw.v*mf),t.strokeColorAnim&&Fc.sc.propType)for(U1=0;U1<3;U1+=1)mf.length?b2[U1]+=(Fc.sc.v[U1]-b2[U1])*mf[0]:b2[U1]+=(Fc.sc.v[U1]-b2[U1])*mf;if(t.fillColorAnim&&t.fc){if(Fc.fc.propType)for(U1=0;U1<3;U1+=1)mf.length?q1[U1]+=(Fc.fc.v[U1]-q1[U1])*mf[0]:q1[U1]+=(Fc.fc.v[U1]-q1[U1])*mf;Fc.fh.propType&&(mf.length?q1=addHueToRGB(q1,Fc.fh.v*mf[0]):q1=addHueToRGB(q1,Fc.fh.v*mf)),Fc.fs.propType&&(mf.length?q1=addSaturationToRGB(q1,Fc.fs.v*mf[0]):q1=addSaturationToRGB(q1,Fc.fs.v*mf)),Fc.fb.propType&&(mf.length?q1=addBrightnessToRGB(q1,Fc.fb.v*mf[0]):q1=addBrightnessToRGB(q1,Fc.fb.v*mf))}}for(qc=0;qc<Mh;qc+=1)Fc=s[qc].a,Fc.p.propType&&(_h=s[qc].s,mf=_h.getMult(P[g].anIndexes[qc],o.a[qc].s.totalChars),this._hasMaskedPath?mf.length?l.translate(0,Fc.p.v[1]*mf[0],-Fc.p.v[2]*mf[1]):l.translate(0,Fc.p.v[1]*mf,-Fc.p.v[2]*mf):mf.length?l.translate(Fc.p.v[0]*mf[0],Fc.p.v[1]*mf[1],-Fc.p.v[2]*mf[2]):l.translate(Fc.p.v[0]*mf,Fc.p.v[1]*mf,-Fc.p.v[2]*mf));if(t.strokeWidthAnim&&(M2=_2<0?0:_2),t.strokeColorAnim&&(x2="rgb("+Math.round(b2[0]*255)+","+Math.round(b2[1]*255)+","+Math.round(b2[2]*255)+")"),t.fillColorAnim&&t.fc&&(p1="rgb("+Math.round(q1[0]*255)+","+Math.round(q1[1]*255)+","+Math.round(q1[2]*255)+")"),this._hasMaskedPath){if(l.translate(0,-t.ls),l.translate(0,a[1]*yh*.01+m,0),this._pathData.p.v){Ge=(ve.point[1]-Rs.point[1])/(ve.point[0]-Rs.point[0]);var e1=Math.atan(Ge)*180/Math.PI;ve.point[0]<Rs.point[0]&&(e1+=180),l.rotate(-e1*Math.PI/180)}l.translate(E1,T1,0),me-=a[0]*P[g].an*.005,P[g+1]&&a1!==P[g+1].ind&&(me+=P[g].an/2,me+=t.tr*.001*t.finalSize)}else{switch(l.translate(d,m,0),t.ps&&l.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:l.translate(P[g].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[P[g].line]),0,0);break;case 2:l.translate(P[g].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[P[g].line])/2,0,0);break}l.translate(0,-t.ls),l.translate(s1,0,0),l.translate(a[0]*P[g].an*.005,a[1]*yh*.01,0),d+=P[g].l+t.tr*.001*t.finalSize}u==="html"?S1=l.toCSS():u==="svg"?S1=l.to2dCSS():D1=[l.props[0],l.props[1],l.props[2],l.props[3],l.props[4],l.props[5],l.props[6],l.props[7],l.props[8],l.props[9],l.props[10],l.props[11],l.props[12],l.props[13],l.props[14],l.props[15]],_1=A2}c<=g?(cf=new LetterProps(_1,M2,x2,p1,S1,D1),this.renderedLetters.push(cf),c+=1,this.lettersChangedFlag=!0):(cf=this.renderedLetters[g],this.lettersChangedFlag=cf.update(_1,M2,x2,p1,S1,D1)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(t,e,a){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,a),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,a),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)},ITextElement.prototype.createPathShape=function(t,e){var a,s=e.length,o,l="";for(a=0;a<s;a+=1)e[a].ty==="sh"&&(o=e[a].ks.k,l+=buildShapeString(o,o.i.length,!0,t));return l},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,a,s,o){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[a]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[a])/2,0,0);break}e.translate(s,o,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(t[0]*255)+","+Math.round(t[1]*255)+","+Math.round(t[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(t,e,a){this.textSpans=[],this.renderType="svg",this.initElement(t,e,a)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,a=t.length,s=[],o="";e<a;)t[e]==="\r"||t[e]===""?(s.push(o),o=""):o+=t[e],e+=1;return s.push(o),s},SVGTextLottieElement.prototype.buildShapeData=function(t,e){if(t.shapes&&t.shapes.length){var a=t.shapes[0];if(a.it){var s=a.it[a.it.length-1];s.s&&(s.s.k[0]=e,s.s.k[1]=e)}}return t},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var t,e,a=this.textProperty.currentData;this.renderedLetters=createSizedArray(a?a.l.length:0),a.fc?this.layerElement.setAttribute("fill",this.buildColor(a.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),a.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(a.sc)),this.layerElement.setAttribute("stroke-width",a.sw)),this.layerElement.setAttribute("font-size",a.finalSize);var s=this.globalData.fontManager.getFontByName(a.f);if(s.fClass)this.layerElement.setAttribute("class",s.fClass);else{this.layerElement.setAttribute("font-family",s.fFamily);var o=a.fWeight,l=a.fStyle;this.layerElement.setAttribute("font-style",l),this.layerElement.setAttribute("font-weight",o)}this.layerElement.setAttribute("aria-label",a.t);var u=a.l||[],c=!!this.globalData.fontManager.chars;e=u.length;var d,m=this.mHelper,g="",A=this.data.singleShape,P=0,W=0,me=!0,ve=a.tr*.001*a.finalSize;if(A&&!c&&!a.sz){var He=this.textContainer,De="start";switch(a.j){case 1:De="end";break;case 2:De="middle";break;default:De="start";break}He.setAttribute("text-anchor",De),He.setAttribute("letter-spacing",ve);var Xe=this.buildTextContents(a.finalText);for(e=Xe.length,W=a.ps?a.ps[1]+a.ascent:0,t=0;t<e;t+=1)d=this.textSpans[t].span||createNS("tspan"),d.textContent=Xe[t],d.setAttribute("x",0),d.setAttribute("y",W),d.style.display="inherit",He.appendChild(d),this.textSpans[t]||(this.textSpans[t]={span:null,glyph:null}),this.textSpans[t].span=d,W+=a.finalLineHeight;this.layerElement.appendChild(He)}else{var qe=this.textSpans.length,Rs;for(t=0;t<e;t+=1){if(this.textSpans[t]||(this.textSpans[t]={span:null,childSpan:null,glyph:null}),!c||!A||t===0){if(d=qe>t?this.textSpans[t].span:createNS(c?"g":"text"),qe<=t){if(d.setAttribute("stroke-linecap","butt"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit","4"),this.textSpans[t].span=d,c){var Vc=createNS("g");d.appendChild(Vc),this.textSpans[t].childSpan=Vc}this.textSpans[t].span=d,this.layerElement.appendChild(d)}d.style.display="inherit"}if(m.reset(),A&&(u[t].n&&(P=-ve,W+=a.yOffset,W+=me?1:0,me=!1),this.applyTextPropertiesToMatrix(a,m,u[t].line,P,W),P+=u[t].l||0,P+=ve),c){Rs=this.globalData.fontManager.getCharData(a.finalText[t],s.fStyle,this.globalData.fontManager.getFontByName(a.f).fFamily);var So;if(Rs.t===1)So=new SVGCompElement(Rs.data,this.globalData,this);else{var Do=emptyShapeData;Rs.data&&Rs.data.shapes&&(Do=this.buildShapeData(Rs.data,a.finalSize)),So=new SVGShapeElement(Do,this.globalData,this)}if(this.textSpans[t].glyph){var eh=this.textSpans[t].glyph;this.textSpans[t].childSpan.removeChild(eh.layerElement),eh.destroy()}this.textSpans[t].glyph=So,So._debug=!0,So.prepareFrame(0),So.renderFrame(),this.textSpans[t].childSpan.appendChild(So.layerElement),Rs.t===1&&this.textSpans[t].childSpan.setAttribute("transform","scale("+a.finalSize/100+","+a.finalSize/100+")")}else A&&d.setAttribute("transform","translate("+m.props[12]+","+m.props[13]+")"),d.textContent=u[t].val,d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}A&&d&&d.setAttribute("d",g)}for(;t<this.textSpans.length;)this.textSpans[t].span.style.display="none",t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var t,e=this.textSpans.length,a;for(this.renderedFrame=this.comp.renderedFrame,t=0;t<e;t+=1)a=this.textSpans[t].glyph,a&&(a.prepareFrame(this.comp.renderedFrame-this.data.st),a._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var t,e,a=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l;e=s.length;var o,l,u;for(t=0;t<e;t+=1)s[t].n||(o=a[t],l=this.textSpans[t].span,u=this.textSpans[t].glyph,u&&u.renderFrame(),o._mdf.m&&l.setAttribute("transform",o.m),o._mdf.o&&l.setAttribute("opacity",o.o),o._mdf.sw&&l.setAttribute("stroke-width",o.sw),o._mdf.sc&&l.setAttribute("stroke",o.sc),o._mdf.fc&&l.setAttribute("fill",o.fc))}};function ISolidElement(t,e,a){this.initElement(t,e,a)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)};function NullElement(t,e,a){this.initFrame(),this.initBaseData(t,e,a),this.initFrame(),this.initTransform(t,e,a),this.initHierarchy()}NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRendererBase.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRendererBase.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRendererBase.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var a=createNS("clipPath"),s=createNS("rect");s.setAttribute("width",t.w),s.setAttribute("height",t.h),s.setAttribute("x",0),s.setAttribute("y",0);var o=createElementID();a.setAttribute("id",o),a.appendChild(s),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+o+")"),e.appendChild(a),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(t){var e=0,a=this.layers.length;for(e=0;e<a;e+=1)if(this.layers[e].ind===t)return e;return-1},SVGRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty===99)){e[t]=!0;var a=this.createItem(this.layers[t]);if(e[t]=a,getExpressionsPlugin()&&(this.layers[t].ty===0&&this.globalData.projectInterface.registerComposition(a),a.initExpressions()),this.appendElementInPos(a,t),this.layers[t].tt){var s="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(s===-1)return;if(!this.elements[s]||this.elements[s]===!0)this.buildItem(s),this.addPendingElement(a);else{var o=e[s],l=o.getMatte(this.layers[t].tt);a.setMatte(l)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,a=this.elements.length;e<a;){if(this.elements[e]===t){var s="tp"in t.data?this.findIndexByInd(t.data.tp):e-1,o=this.elements[s],l=o.getMatte(this.layers[e].tt);t.setMatte(l);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(t){if(!(this.renderedFrame===t||this.destroyed)){t===null?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var e,a=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=a-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<a;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(t,e){var a=t.getBaseElement();if(a){for(var s=0,o;s<e;)this.elements[s]&&this.elements[s]!==!0&&this.elements[s].getBaseElement()&&(o=this.elements[s].getBaseElement()),s+=1;o?this.layerElement.insertBefore(a,o):this.layerElement.appendChild(a)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,a){this.initFrame(),this.initBaseData(t,e,a),this.initTransform(t,e,a),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!e.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var a,s=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),a=s-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&(this.elements[a].prepareFrame(this.renderedFrame-this.layers[a].st),this.elements[a]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(t,e,a){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,a),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)};function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var a="";if(e&&e.title){var s=createNS("title"),o=createElementID();s.setAttribute("id",o),s.textContent=e.title,this.svgElement.appendChild(s),a+=o}if(e&&e.description){var l=createNS("desc"),u=createElementID();l.setAttribute("id",u),l.textContent=e.description,this.svgElement.appendChild(l),a+=" "+u}a&&this.svgElement.setAttribute("aria-labelledby",a);var c=createNS("defs");this.svgElement.appendChild(c);var d=createNS("g");this.svgElement.appendChild(d),this.layerElement=d,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&e.hideOnTransparent===!1),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:c,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(e){var a,s=e.length,o="_";for(a=0;a<s;a+=1)o+=e[a].transform.key+"_";var l=this.sequences[o];return l||(l={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[o]=l,this.sequenceList.push(l)),l},processSequence:function(e,a){for(var s=0,o=e.transforms.length,l=a;s<o&&!a;){if(e.transforms[s].transform.mProps._mdf){l=!0;break}s+=1}if(l)for(e.finalTransform.reset(),s=o-1;s>=0;s-=1)e.finalTransform.multiply(e.transforms[s].transform.mProps.v);e._mdf=l},processSequences:function(e){var a,s=this.sequenceList.length;for(a=0;a<s;a+=1)this.processSequence(this.sequenceList[a],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",a=null,s=null,o=null;function l(){var d=createNS("svg"),m=createNS("filter"),g=createNS("feColorMatrix");return m.setAttribute("id",e),g.setAttribute("type","matrix"),g.setAttribute("color-interpolation-filters","sRGB"),g.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),m.appendChild(g),d.appendChild(m),d.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(d.style.display="none"),d}function u(){a||(o=l(),document.body.appendChild(o),a=createTag("canvas"),s=a.getContext("2d"),s.filter="url(#"+e+")",s.fillStyle="rgba(0,0,0,0)",s.fillRect(0,0,1,1))}function c(d){return a||u(),a.width=d.width,a.height=d.height,s.filter="url(#"+e+")",a}return{load:u,get:c}};function createCanvas(t,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(t,e);var a=createTag("canvas");return a.width=t,a.height=e,a}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(t){var e,a=t.data.ef?t.data.ef.length:0;this.filters=[];var s;for(e=0;e<a;e+=1){s=null;var o=t.data.ef[e].ty;if(registeredEffects[o]){var l=registeredEffects[o].effect;s=new l(t.effectsManager.effectElements[e],t)}s&&this.filters.push(s)}this.filters.length&&t.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(t){var e,a=this.filters.length;for(e=0;e<a;e+=1)this.filters[e].renderFrame(t)},CVEffects.prototype.getEffects=function(t){var e,a=this.filters.length,s=[];for(e=0;e<a;e+=1)this.filters[e].type===t&&s.push(this.filters[e]);return s};function registerEffect(t,e){registeredEffects[t]={effect:e}}function CVMaskElement(t,e){this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var a,s=this.masksProperties.length,o=!1;for(a=0;a<s;a+=1)this.masksProperties[a].mode!=="n"&&(o=!0),this.viewData[a]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[a],3);this.hasMasks=o,o&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t=this.element.finalTransform.mat,e=this.element.canvasContext,a,s=this.masksProperties.length,o,l,u;for(e.beginPath(),a=0;a<s;a+=1)if(this.masksProperties[a].mode!=="n"){this.masksProperties[a].inv&&(e.moveTo(0,0),e.lineTo(this.element.globalData.compSize.w,0),e.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),e.lineTo(0,this.element.globalData.compSize.h),e.lineTo(0,0)),u=this.viewData[a].v,o=t.applyToPointArray(u.v[0][0],u.v[0][1],0),e.moveTo(o[0],o[1]);var c,d=u._length;for(c=1;c<d;c+=1)l=t.applyToTriplePoints(u.o[c-1],u.i[c],u.v[c]),e.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);l=t.applyToTriplePoints(u.o[c-1],u.i[0],u.v[0]),e.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5])}this.element.globalData.renderer.save(!0),e.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,a=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(a);var s=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(s),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var a=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=a}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0],a=e.getContext("2d");this.clearCanvas(a),a.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],a=e.getContext("2d");this.clearCanvas(a),a.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var s=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(s.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var o=assetLoader.getLumaCanvas(this.canvasContext.canvas),l=o.getContext("2d");l.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(o,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var a=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(a),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(a),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(t,e,a,s){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var o=4;e.ty==="rc"?o=5:e.ty==="el"?o=6:e.ty==="sr"&&(o=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,o,t);var l,u=a.length,c;for(l=0;l<u;l+=1)a[l].closed||(c={transforms:s.addTransformSequence(a[l].transforms),trNodes:[]},this.styledShapes.push(c),a[l].elements.push(c))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(t,e,a){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var a={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:t.hd===!0},s={};if(t.ty==="fl"||t.ty==="st"?(s.c=PropertyFactory.getProp(this,t.c,1,255,this),s.c.k||(a.co="rgb("+bmFloor(s.c.v[0])+","+bmFloor(s.c.v[1])+","+bmFloor(s.c.v[2])+")")):(t.ty==="gf"||t.ty==="gs")&&(s.s=PropertyFactory.getProp(this,t.s,1,null,this),s.e=PropertyFactory.getProp(this,t.e,1,null,this),s.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),s.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),s.g=new GradientProperty(this,t.g,this)),s.o=PropertyFactory.getProp(this,t.o,0,.01,this),t.ty==="st"||t.ty==="gs"){if(a.lc=lineCapEnum[t.lc||2],a.lj=lineJoinEnum[t.lj||2],t.lj==1&&(a.ml=t.ml),s.w=PropertyFactory.getProp(this,t.w,0,null,this),s.w.k||(a.wi=s.w.v),t.d){var o=new DashProperty(this,t.d,"canvas",this);s.d=o,s.d.k||(a.da=s.d.dashArray,a.do=s.d.dashoffset[0])}}else a.r=t.r===2?"evenodd":"nonzero";return this.stylesList.push(a),s.style=a,s},CVShapeElement.prototype.createGroupElement=function(){var t={it:[],prevViewData:[]};return t},CVShapeElement.prototype.createTransformElement=function(t){var e={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}};return e},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,a=this.stylesList.length;for(e=0;e<a;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,a=t.length;for(e=0;e<a;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,a,s,o){var l,u=t.length-1,c,d,m=[],g=[],A,P,W,me=[].concat(o);for(l=u;l>=0;l-=1){if(A=this.searchProcessedElement(t[l]),A?e[l]=a[A-1]:t[l]._shouldRender=s,t[l].ty==="fl"||t[l].ty==="st"||t[l].ty==="gf"||t[l].ty==="gs")A?e[l].style.closed=!1:e[l]=this.createStyleElement(t[l],me),m.push(e[l].style);else if(t[l].ty==="gr"){if(!A)e[l]=this.createGroupElement(t[l]);else for(d=e[l].it.length,c=0;c<d;c+=1)e[l].prevViewData[c]=e[l].it[c];this.searchShapes(t[l].it,e[l].it,e[l].prevViewData,s,me)}else t[l].ty==="tr"?(A||(W=this.createTransformElement(t[l]),e[l]=W),me.push(e[l]),this.addTransformToStyleList(e[l])):t[l].ty==="sh"||t[l].ty==="rc"||t[l].ty==="el"||t[l].ty==="sr"?A||(e[l]=this.createShapeElement(t[l])):t[l].ty==="tm"||t[l].ty==="rd"||t[l].ty==="pb"||t[l].ty==="zz"||t[l].ty==="op"?(A?(P=e[l],P.closed=!1):(P=ShapeModifiers.getModifier(t[l].ty),P.init(this,t[l]),e[l]=P,this.shapeModifiers.push(P)),g.push(P)):t[l].ty==="rp"&&(A?(P=e[l],P.closed=!0):(P=ShapeModifiers.getModifier(t[l].ty),e[l]=P,P.init(this,t,l,e),this.shapeModifiers.push(P),s=!1),g.push(P));this.addProcessedElement(t[l],l+1)}for(this.removeTransformFromStyleList(),this.closeStyles(m),u=g.length,l=0;l<u;l+=1)g[l].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e=this.stylesList.length,a,s,o,l,u,c,d=this.globalData.renderer,m=this.globalData.canvasContext,g,A;for(t=0;t<e;t+=1)if(A=this.stylesList[t],g=A.type,!((g==="st"||g==="gs")&&A.wi===0||!A.data._shouldRender||A.coOp===0||this.globalData.currentGlobalAlpha===0)){for(d.save(),u=A.elements,g==="st"||g==="gs"?(d.ctxStrokeStyle(g==="st"?A.co:A.grd),d.ctxLineWidth(A.wi),d.ctxLineCap(A.lc),d.ctxLineJoin(A.lj),d.ctxMiterLimit(A.ml||0)):d.ctxFillStyle(g==="fl"?A.co:A.grd),d.ctxOpacity(A.coOp),g!=="st"&&g!=="gs"&&m.beginPath(),d.ctxTransform(A.preTransforms.finalTransform.props),s=u.length,a=0;a<s;a+=1){for((g==="st"||g==="gs")&&(m.beginPath(),A.da&&(m.setLineDash(A.da),m.lineDashOffset=A.do)),c=u[a].trNodes,l=c.length,o=0;o<l;o+=1)c[o].t==="m"?m.moveTo(c[o].p[0],c[o].p[1]):c[o].t==="c"?m.bezierCurveTo(c[o].pts[0],c[o].pts[1],c[o].pts[2],c[o].pts[3],c[o].pts[4],c[o].pts[5]):m.closePath();(g==="st"||g==="gs")&&(d.ctxStroke(),A.da&&m.setLineDash(this.dashResetter))}g!=="st"&&g!=="gs"&&this.globalData.renderer.ctxFill(A.r),d.restore()}},CVShapeElement.prototype.renderShape=function(t,e,a,s){var o,l=e.length-1,u;for(u=t,o=l;o>=0;o-=1)e[o].ty==="tr"?(u=a[o].transform,this.renderShapeTransform(t,u)):e[o].ty==="sh"||e[o].ty==="el"||e[o].ty==="rc"||e[o].ty==="sr"?this.renderPath(e[o],a[o]):e[o].ty==="fl"?this.renderFill(e[o],a[o],u):e[o].ty==="st"?this.renderStroke(e[o],a[o],u):e[o].ty==="gf"||e[o].ty==="gs"?this.renderGradientFill(e[o],a[o],u):e[o].ty==="gr"?this.renderShape(u,e[o].it,a[o].it):e[o].ty;s&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var a=t.trNodes,s=e.paths,o,l,u,c=s._length;a.length=0;var d=t.transforms.finalTransform;for(u=0;u<c;u+=1){var m=s.shapes[u];if(m&&m.v){for(l=m._length,o=1;o<l;o+=1)o===1&&a.push({t:"m",p:d.applyToPointArray(m.v[0][0],m.v[0][1],0)}),a.push({t:"c",pts:d.applyToTriplePoints(m.o[o-1],m.i[o],m.v[o])});l===1&&a.push({t:"m",p:d.applyToPointArray(m.v[0][0],m.v[0][1],0)}),m.c&&l&&(a.push({t:"c",pts:d.applyToTriplePoints(m.o[o-1],m.i[0],m.v[0])}),a.push({t:"z"}))}}t.trNodes=a}},CVShapeElement.prototype.renderPath=function(t,e){if(t.hd!==!0&&t._shouldRender){var a,s=e.styledShapes.length;for(a=0;a<s;a+=1)this.renderStyledShape(e.styledShapes[a],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,a){var s=e.style;(e.c._mdf||this._isFirstFrame)&&(s.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||a._opMdf||this._isFirstFrame)&&(s.coOp=e.o.v*a.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,a){var s=e.style,o;if(!s.grd||e.g._mdf||e.s._mdf||e.e._mdf||t.t!==1&&(e.h._mdf||e.a._mdf)){var l=this.globalData.canvasContext,u=e.s.v,c=e.e.v;if(t.t===1)o=l.createLinearGradient(u[0],u[1],c[0],c[1]);else{var d=Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)),m=Math.atan2(c[1]-u[1],c[0]-u[0]),g=e.h.v;g>=1?g=.99:g<=-1&&(g=-.99);var A=d*g,P=Math.cos(m+e.a.v)*A+u[0],W=Math.sin(m+e.a.v)*A+u[1];o=l.createRadialGradient(P,W,0,u[0],u[1],d)}var me,ve=t.g.p,He=e.g.c,De=1;for(me=0;me<ve;me+=1)e.g._hasOpacity&&e.g._collapsable&&(De=e.g.o[me*2+1]),o.addColorStop(He[me*4]/100,"rgba("+He[me*4+1]+","+He[me*4+2]+","+He[me*4+3]+","+De+")");s.grd=o}s.coOp=e.o.v*a.opacity},CVShapeElement.prototype.renderStroke=function(t,e,a){var s=e.style,o=e.d;o&&(o._mdf||this._isFirstFrame)&&(s.da=o.dashArray,s.do=o.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(s.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||a._opMdf||this._isFirstFrame)&&(s.coOp=e.o.v*a.opacity),(e.w._mdf||this._isFirstFrame)&&(s.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(t,e,a){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var a=!1;t.sc&&(a=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var s=this.globalData.fontManager.getFontByName(t.f),o,l,u=t.l,c=this.mHelper;this.stroke=a,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,l=t.finalText.length;var d,m,g,A,P,W,me,ve,He,De,Xe=this.data.singleShape,qe=t.tr*.001*t.finalSize,Rs=0,Vc=0,So=!0,Do=0;for(o=0;o<l;o+=1){d=this.globalData.fontManager.getCharData(t.finalText[o],s.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),m=d&&d.data||{},c.reset(),Xe&&u[o].n&&(Rs=-qe,Vc+=t.yOffset,Vc+=So?1:0,So=!1),P=m.shapes?m.shapes[0].it:[],me=P.length,c.scale(t.finalSize/100,t.finalSize/100),Xe&&this.applyTextPropertiesToMatrix(t,c,u[o].line,Rs,Vc),He=createSizedArray(me-1);var eh=0;for(W=0;W<me;W+=1)if(P[W].ty==="sh"){for(A=P[W].ks.k.i.length,ve=P[W].ks.k,De=[],g=1;g<A;g+=1)g===1&&De.push(c.applyToX(ve.v[0][0],ve.v[0][1],0),c.applyToY(ve.v[0][0],ve.v[0][1],0)),De.push(c.applyToX(ve.o[g-1][0],ve.o[g-1][1],0),c.applyToY(ve.o[g-1][0],ve.o[g-1][1],0),c.applyToX(ve.i[g][0],ve.i[g][1],0),c.applyToY(ve.i[g][0],ve.i[g][1],0),c.applyToX(ve.v[g][0],ve.v[g][1],0),c.applyToY(ve.v[g][0],ve.v[g][1],0));De.push(c.applyToX(ve.o[g-1][0],ve.o[g-1][1],0),c.applyToY(ve.o[g-1][0],ve.o[g-1][1],0),c.applyToX(ve.i[0][0],ve.i[0][1],0),c.applyToY(ve.i[0][0],ve.i[0][1],0),c.applyToX(ve.v[0][0],ve.v[0][1],0),c.applyToY(ve.v[0][0],ve.v[0][1],0)),He[eh]=De,eh+=1}Xe&&(Rs+=u[o].l,Rs+=qe),this.textSpans[Do]?this.textSpans[Do].elem=He:this.textSpans[Do]={elem:He},Do+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var t=this.canvasContext;t.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var e,a,s,o,l,u,c=this.textAnimator.renderedLetters,d=this.textProperty.currentData.l;a=d.length;var m,g=null,A=null,P=null,W,me,ve=this.globalData.renderer;for(e=0;e<a;e+=1)if(!d[e].n){if(m=c[e],m&&(ve.save(),ve.ctxTransform(m.p),ve.ctxOpacity(m.o)),this.fill){for(m&&m.fc?g!==m.fc&&(ve.ctxFillStyle(m.fc),g=m.fc):g!==this.values.fill&&(g=this.values.fill,ve.ctxFillStyle(this.values.fill)),W=this.textSpans[e].elem,o=W.length,this.globalData.canvasContext.beginPath(),s=0;s<o;s+=1)for(me=W[s],u=me.length,this.globalData.canvasContext.moveTo(me[0],me[1]),l=2;l<u;l+=6)this.globalData.canvasContext.bezierCurveTo(me[l],me[l+1],me[l+2],me[l+3],me[l+4],me[l+5]);this.globalData.canvasContext.closePath(),ve.ctxFill()}if(this.stroke){for(m&&m.sw?P!==m.sw&&(P=m.sw,ve.ctxLineWidth(m.sw)):P!==this.values.sWidth&&(P=this.values.sWidth,ve.ctxLineWidth(this.values.sWidth)),m&&m.sc?A!==m.sc&&(A=m.sc,ve.ctxStrokeStyle(m.sc)):A!==this.values.stroke&&(A=this.values.stroke,ve.ctxStrokeStyle(this.values.stroke)),W=this.textSpans[e].elem,o=W.length,this.globalData.canvasContext.beginPath(),s=0;s<o;s+=1)for(me=W[s],u=me.length,this.globalData.canvasContext.moveTo(me[0],me[1]),l=2;l<u;l+=6)this.globalData.canvasContext.bezierCurveTo(me[l],me[l+1],me[l+2],me[l+3],me[l+4],me[l+5]);this.globalData.canvasContext.closePath(),ve.ctxStroke()}m&&this.globalData.renderer.restore()}};function CVImageElement(t,e,a){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e=t.getContext("2d"),a=this.img.width,s=this.img.height,o=a/s,l=this.assetData.w/this.assetData.h,u,c,d=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;o>l&&d==="xMidYMid slice"||o<l&&d!=="xMidYMid slice"?(c=s,u=c*l):(u=a,c=u/l),e.drawImage(this.img,(a-u)/2,(s-c)/2,u,c,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(t,e,a){this.initElement(t,e,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRendererBase.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(t){t[0]===1&&t[1]===0&&t[4]===0&&t[5]===1&&t[12]===0&&t[13]===0||this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRendererBase.prototype.ctxOpacity=function(t){this.canvasContext.globalAlpha*=t<0?0:t},CanvasRendererBase.prototype.ctxFillStyle=function(t){this.canvasContext.fillStyle=t},CanvasRendererBase.prototype.ctxStrokeStyle=function(t){this.canvasContext.strokeStyle=t},CanvasRendererBase.prototype.ctxLineWidth=function(t){this.canvasContext.lineWidth=t},CanvasRendererBase.prototype.ctxLineCap=function(t){this.canvasContext.lineCap=t},CanvasRendererBase.prototype.ctxLineJoin=function(t){this.canvasContext.lineJoin=t},CanvasRendererBase.prototype.ctxMiterLimit=function(t){this.canvasContext.miterLimit=t},CanvasRendererBase.prototype.ctxFill=function(t){this.canvasContext.fill(t)},CanvasRendererBase.prototype.ctxFillRect=function(t,e,a,s){this.canvasContext.fillRect(t,e,a,s)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(t){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}t&&(this.globalData.blendMode="source-over"),this.contextData.restore(t)},CanvasRendererBase.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var a="0px 0px 0px";e.transformOrigin=a,e.mozTransformOrigin=a,e.webkitTransformOrigin=a,e["-webkit-transform"]=a,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(t,e){this.reset();var a,s;t?(a=t,s=e,this.canvasContext.canvas.width=a,this.canvasContext.canvas.height=s):(this.animationItem.wrapper&&this.animationItem.container?(a=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight):(a=this.canvasContext.canvas.width,s=this.canvasContext.canvas.height),this.canvasContext.canvas.width=a*this.renderConfig.dpr,this.canvasContext.canvas.height=s*this.renderConfig.dpr);var o,l;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var u=this.renderConfig.preserveAspectRatio.split(" "),c=u[1]||"meet",d=u[0]||"xMidYMid",m=d.substr(0,4),g=d.substr(4);o=a/s,l=this.transformCanvas.w/this.transformCanvas.h,l>o&&c==="meet"||l<o&&c==="slice"?(this.transformCanvas.sx=a/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=a/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=s/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.h/this.renderConfig.dpr)),m==="xMid"&&(l<o&&c==="meet"||l>o&&c==="slice")?this.transformCanvas.tx=(a-this.transformCanvas.w*(s/this.transformCanvas.h))/2*this.renderConfig.dpr:m==="xMax"&&(l<o&&c==="meet"||l>o&&c==="slice")?this.transformCanvas.tx=(a-this.transformCanvas.w*(s/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,g==="YMid"&&(l>o&&c==="meet"||l<o&&c==="slice")?this.transformCanvas.ty=(s-this.transformCanvas.h*(a/this.transformCanvas.w))/2*this.renderConfig.dpr:g==="YMax"&&(l>o&&c==="meet"||l<o&&c==="slice")?this.transformCanvas.ty=(s-this.transformCanvas.h*(a/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=a/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var t,e=this.layers?this.layers.length:0;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(t,e){if(!(this.renderedFrame===t&&this.renderConfig.clearCanvas===!0&&!e||this.destroyed||t===-1)){this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var a,s=this.layers.length;for(this.completeLayers||this.checkLayers(t),a=s-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&this.elements[a].prepareFrame(t-this.layers[a].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),a=s-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&this.elements[a].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty===99)){var a=this.createItem(this.layers[t],this,this.globalData);e[t]=a,a.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var t,e=15;for(t=0;t<e;t+=1){var a=new CanvasContext;this.stack[t]=a}this._length=e,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var t=this._length*2,e=0;for(e=this._length;e<t;e+=1)this.stack[e]=new CanvasContext;this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(t){this.cArrPos-=1;var e=this.stack[this.cArrPos],a=e.transform,s,o=this.cTr.props;for(s=0;s<16;s+=1)o[s]=a[s];if(t){this.nativeContext.restore();var l=this.stack[this.cArrPos+1];this.appliedFillStyle=l.fillStyle,this.appliedStrokeStyle=l.strokeStyle,this.appliedLineWidth=l.lineWidth,this.appliedLineCap=l.lineCap,this.appliedLineJoin=l.lineJoin,this.appliedMiterLimit=l.miterLimit}this.nativeContext.setTransform(a[0],a[1],a[4],a[5],a[12],a[13]),(t||e.opacity!==-1&&this.currentOpacity!==e.opacity)&&(this.nativeContext.globalAlpha=e.opacity,this.currentOpacity=e.opacity),this.currentFillStyle=e.fillStyle,this.currentStrokeStyle=e.strokeStyle,this.currentLineWidth=e.lineWidth,this.currentLineCap=e.lineCap,this.currentLineJoin=e.lineJoin,this.currentMiterLimit=e.miterLimit},CVContextData.prototype.save=function(t){t&&this.nativeContext.save();var e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var a=this.stack[this.cArrPos],s;for(s=0;s<16;s+=1)a.transform[s]=e[s];this.cArrPos+=1;var o=this.stack[this.cArrPos];o.opacity=a.opacity,o.fillStyle=a.fillStyle,o.strokeStyle=a.strokeStyle,o.lineWidth=a.lineWidth,o.lineCap=a.lineCap,o.lineJoin=a.lineJoin,o.miterLimit=a.miterLimit},CVContextData.prototype.setOpacity=function(t){this.stack[this.cArrPos].opacity=t},CVContextData.prototype.setContext=function(t){this.nativeContext=t},CVContextData.prototype.fillStyle=function(t){this.stack[this.cArrPos].fillStyle!==t&&(this.currentFillStyle=t,this.stack[this.cArrPos].fillStyle=t)},CVContextData.prototype.strokeStyle=function(t){this.stack[this.cArrPos].strokeStyle!==t&&(this.currentStrokeStyle=t,this.stack[this.cArrPos].strokeStyle=t)},CVContextData.prototype.lineWidth=function(t){this.stack[this.cArrPos].lineWidth!==t&&(this.currentLineWidth=t,this.stack[this.cArrPos].lineWidth=t)},CVContextData.prototype.lineCap=function(t){this.stack[this.cArrPos].lineCap!==t&&(this.currentLineCap=t,this.stack[this.cArrPos].lineCap=t)},CVContextData.prototype.lineJoin=function(t){this.stack[this.cArrPos].lineJoin!==t&&(this.currentLineJoin=t,this.stack[this.cArrPos].lineJoin=t)},CVContextData.prototype.miterLimit=function(t){this.stack[this.cArrPos].miterLimit!==t&&(this.currentMiterLimit=t,this.stack[this.cArrPos].miterLimit=t)},CVContextData.prototype.transform=function(t){this.transformMat.cloneFromProps(t);var e=this.cTr;this.transformMat.multiply(e),e.cloneFromProps(this.transformMat.props);var a=e.props;this.nativeContext.setTransform(a[0],a[1],a[4],a[5],a[12],a[13])},CVContextData.prototype.opacity=function(t){var e=this.stack[this.cArrPos].opacity;e*=t<0?0:t,this.stack[this.cArrPos].opacity!==e&&(this.currentOpacity!==t&&(this.nativeContext.globalAlpha=t,this.currentOpacity=t),this.stack[this.cArrPos].opacity=e)},CVContextData.prototype.fill=function(t){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(t)},CVContextData.prototype.fillRect=function(t,e,a,s){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(t,e,a,s)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(t,e,a){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,a),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip();var e,a=this.layers.length;for(e=a-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var t,e=this.layers.length;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)};function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:e&&e.clearCanvas!==void 0?e.clearCanvas:!0,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var a=this.finalTransform.mat.toCSS();e.transform=a,e.webkitTransform=a}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(t,e,a){this.initElement(t,e,a)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?(t=createNS("rect"),t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(t=createTag("div"),t.style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)};function HShapeElement(t,e,a){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,a),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var a,s=t.length;for(a=0;a<s;a+=1)e=t[a].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var a=t.sh.v,s=t.transformers,o,l=a._length,u,c,d,m;if(!(l<=1)){for(o=0;o<l-1;o+=1)u=this.getTransformedPoint(s,a.v[o]),c=this.getTransformedPoint(s,a.o[o]),d=this.getTransformedPoint(s,a.i[o+1]),m=this.getTransformedPoint(s,a.v[o+1]),this.checkBounds(u,c,d,m,e);a.c&&(u=this.getTransformedPoint(s,a.v[o]),c=this.getTransformedPoint(s,a.o[o]),d=this.getTransformedPoint(s,a.i[0]),m=this.getTransformedPoint(s,a.v[0]),this.checkBounds(u,c,d,m,e))}},HShapeElement.prototype.checkBounds=function(t,e,a,s,o){this.getBoundsOfCurve(t,e,a,s);var l=this.shapeBoundingBox;o.x=bmMin(l.left,o.x),o.xMax=bmMax(l.right,o.xMax),o.y=bmMin(l.top,o.y),o.yMax=bmMax(l.bottom,o.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,a,s){for(var o=[[t[0],s[0]],[t[1],s[1]]],l,u,c,d,m,g,A,P=0;P<2;++P)u=6*t[P]-12*e[P]+6*a[P],l=-3*t[P]+9*e[P]-9*a[P]+3*s[P],c=3*e[P]-3*t[P],u|=0,l|=0,c|=0,l===0&&u===0||(l===0?(d=-c/u,d>0&&d<1&&o[P].push(this.calculateF(d,t,e,a,s,P))):(m=u*u-4*c*l,m>=0&&(g=(-u+bmSqrt(m))/(2*l),g>0&&g<1&&o[P].push(this.calculateF(g,t,e,a,s,P)),A=(-u-bmSqrt(m))/(2*l),A>0&&A<1&&o[P].push(this.calculateF(A,t,e,a,s,P)))));this.shapeBoundingBox.left=bmMin.apply(null,o[0]),this.shapeBoundingBox.top=bmMin.apply(null,o[1]),this.shapeBoundingBox.right=bmMax.apply(null,o[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,o[1])},HShapeElement.prototype.calculateF=function(t,e,a,s,o,l){return bmPow(1-t,3)*e[l]+3*bmPow(1-t,2)*t*a[l]+3*(1-t)*bmPow(t,2)*s[l]+bmPow(t,3)*o[l]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var a,s=t.length;for(a=0;a<s;a+=1)t[a]&&t[a].sh?this.calculateShapeBoundingBox(t[a],e):t[a]&&t[a].it?this.calculateBoundingBox(t[a].it,e):t[a]&&t[a].style&&t[a].w&&this.expandStrokeBoundingBox(t[a].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(t,e){var a=0;if(t.keyframes){for(var s=0;s<t.keyframes.length;s+=1){var o=t.keyframes[s].s;o>a&&(a=o)}a*=t.mult}else a=t.v*t.mult;e.x-=a,e.xMax+=a,e.y-=a,e.yMax+=a},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var a=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),a=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),a=!0),a||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var s=this.shapeCont.style,o="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";s.transform=o,s.webkitTransform=o}}};function HTextElement(t,e,a){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,a)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,a=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=a,e.color=a,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var s=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",s.fClass)this.innerElem.className=s.fClass;else{e.fontFamily=s.fFamily;var o=t.fWeight,l=t.fStyle;e.fontStyle=l,e.fontWeight=o}var u,c,d=t.l;c=d.length;var m,g,A,P=this.mHelper,W,me="",ve=0;for(u=0;u<c;u+=1){if(this.globalData.fontManager.chars?(this.textPaths[ve]?m=this.textPaths[ve]:(m=createNS("path"),m.setAttribute("stroke-linecap",lineCapEnum[1]),m.setAttribute("stroke-linejoin",lineJoinEnum[2]),m.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[ve]?(g=this.textSpans[ve],A=g.children[0]):(g=createTag("div"),g.style.lineHeight=0,A=createNS("svg"),A.appendChild(m),styleDiv(g)))):this.isMasked?m=this.textPaths[ve]?this.textPaths[ve]:createNS("text"):this.textSpans[ve]?(g=this.textSpans[ve],m=this.textPaths[ve]):(g=createTag("span"),styleDiv(g),m=createTag("span"),styleDiv(m),g.appendChild(m)),this.globalData.fontManager.chars){var He=this.globalData.fontManager.getCharData(t.finalText[u],s.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),De;if(He?De=He.data:De=null,P.reset(),De&&De.shapes&&De.shapes.length&&(W=De.shapes[0].it,P.scale(t.finalSize/100,t.finalSize/100),me=this.createPathShape(P,W),m.setAttribute("d",me)),this.isMasked)this.innerElem.appendChild(m);else{if(this.innerElem.appendChild(g),De&&De.shapes){document.body.appendChild(A);var Xe=A.getBBox();A.setAttribute("width",Xe.width+2),A.setAttribute("height",Xe.height+2),A.setAttribute("viewBox",Xe.x-1+" "+(Xe.y-1)+" "+(Xe.width+2)+" "+(Xe.height+2));var qe=A.style,Rs="translate("+(Xe.x-1)+"px,"+(Xe.y-1)+"px)";qe.transform=Rs,qe.webkitTransform=Rs,d[u].yOffset=Xe.y-1}else A.setAttribute("width",1),A.setAttribute("height",1);g.appendChild(A)}}else if(m.textContent=d[u].val,m.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(m);else{this.innerElem.appendChild(g);var Vc=m.style,So="translate3d(0,"+-t.finalSize/1.2+"px,0)";Vc.transform=So,Vc.webkitTransform=So}this.isMasked?this.textSpans[ve]=m:this.textSpans[ve]=g,this.textSpans[ve].style.display="block",this.textPaths[ve]=m,ve+=1}for(;ve<this.textSpans.length;)this.textSpans[ve].style.display="none",ve+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var t;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";t.transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var a,s,o=0,l=this.textAnimator.renderedLetters,u=this.textProperty.currentData.l;s=u.length;var c,d,m;for(a=0;a<s;a+=1)u[a].n?o+=1:(d=this.textSpans[a],m=this.textPaths[a],c=l[o],o+=1,c._mdf.m&&(this.isMasked?d.setAttribute("transform",c.m):(d.style.webkitTransform=c.m,d.style.transform=c.m)),d.style.opacity=c.o,c.sw&&c._mdf.sw&&m.setAttribute("stroke-width",c.sw),c.sc&&c._mdf.sc&&m.setAttribute("stroke",c.sc),c.fc&&c._mdf.fc&&(m.setAttribute("fill",c.fc),m.style.color=c.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var g=this.innerElem.getBBox();this.currentBBox.w!==g.width&&(this.currentBBox.w=g.width,this.svgElement.setAttribute("width",g.width)),this.currentBBox.h!==g.height&&(this.currentBBox.h=g.height,this.svgElement.setAttribute("height",g.height));var A=1;if(this.currentBBox.w!==g.width+A*2||this.currentBBox.h!==g.height+A*2||this.currentBBox.x!==g.x-A||this.currentBBox.y!==g.y-A){this.currentBBox.w=g.width+A*2,this.currentBBox.h=g.height+A*2,this.currentBBox.x=g.x-A,this.currentBBox.y=g.y-A,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style;var P="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=P,t.webkitTransform=P}}}};function HCameraElement(t,e,a){this.initFrame(),this.initBaseData(t,e,a),this.initHierarchy();var s=PropertyFactory.getProp;if(this.pe=s(this,t.pe,0,0,this),t.ks.p.s?(this.px=s(this,t.ks.p.x,1,0,this),this.py=s(this,t.ks.p.y,1,0,this),this.pz=s(this,t.ks.p.z,1,0,this)):this.p=s(this,t.ks.p,1,0,this),t.ks.a&&(this.a=s(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var o,l=t.ks.or.k.length;for(o=0;o<l;o+=1)t.ks.or.k[o].to=null,t.ks.or.k[o].ti=null}this.or=s(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=s(this,t.ks.rx,0,degToRads,this),this.ry=s(this,t.ks.ry,0,degToRads,this),this.rz=s(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e=this.comp.threeDElements.length,a,s,o;for(t=0;t<e;t+=1)if(a=this.comp.threeDElements[t],a.type==="3d"){s=a.perspectiveElem.style,o=a.container.style;var l=this.pe.v+"px",u="0px 0px 0px",c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";s.perspective=l,s.webkitPerspective=l,o.transformOrigin=u,o.mozTransformOrigin=u,o.webkitTransformOrigin=u,s.transform=c,s.webkitTransform=c}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t=this._isFirstFrame,e,a;if(this.hierarchy)for(a=this.hierarchy.length,e=0;e<a;e+=1)t=this.hierarchy[e].finalTransform.mProp._mdf||t;if(t||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(a=this.hierarchy.length-1,e=a;e>=0;e-=1){var s=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-s.p.v[0],-s.p.v[1],s.p.v[2]),this.mat.rotateX(-s.or.v[0]).rotateY(-s.or.v[1]).rotateZ(s.or.v[2]),this.mat.rotateX(-s.rx.v).rotateY(-s.ry.v).rotateZ(s.rz.v),this.mat.scale(1/s.s.v[0],1/s.s.v[1],1/s.s.v[2]),this.mat.translate(s.a.v[0],s.a.v[1],s.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var o;this.p?o=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:o=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var l=Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2)+Math.pow(o[2],2)),u=[o[0]/l,o[1]/l,o[2]/l],c=Math.sqrt(u[2]*u[2]+u[0]*u[0]),d=Math.atan2(u[1],c),m=Math.atan2(u[0],-u[2]);this.mat.rotateY(m).rotateX(-d)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var g=!this._prevMat.equals(this.mat);if((g||this.pe._mdf)&&this.comp.threeDElements){a=this.comp.threeDElements.length;var A,P,W;for(e=0;e<a;e+=1)if(A=this.comp.threeDElements[e],A.type==="3d"){if(g){var me=this.mat.toCSS();W=A.container.style,W.transform=me,W.webkitTransform=me}this.pe._mdf&&(P=A.perspectiveElem.style,P.perspective=this.pe.v+"px",P.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(t,e,a){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,a)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(t,e){var a=t.getBaseElement();if(a){var s=this.layers[e];if(!s.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(a,e);else{for(var o=0,l,u,c;o<e;)this.elements[o]&&this.elements[o]!==!0&&this.elements[o].getBaseElement&&(u=this.elements[o],c=this.layers[o].ddd?this.getThreeDContainerByPos(o):u.getBaseElement(),l=c||l),o+=1;l?(!s.ddd||!this.supports3d)&&this.layerElement.insertBefore(a,l):(!s.ddd||!this.supports3d)&&this.layerElement.appendChild(a)}else this.addTo3dContainer(a,e)}},HybridRendererBase.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRendererBase.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(t){for(var e=0,a=this.threeDElements.length;e<a;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(t,e){var a=createTag("div"),s,o;styleDiv(a);var l=createTag("div");if(styleDiv(l),e==="3d"){s=a.style,s.width=this.globalData.compSize.w+"px",s.height=this.globalData.compSize.h+"px";var u="50% 50%";s.webkitTransformOrigin=u,s.mozTransformOrigin=u,s.transformOrigin=u,o=l.style;var c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";o.transform=c,o.webkitTransform=c}a.appendChild(l);var d={container:l,perspectiveElem:a,startPos:t,endPos:t,type:e};return this.threeDElements.push(d),d},HybridRendererBase.prototype.build3dContainers=function(){var t,e=this.layers.length,a,s="";for(t=0;t<e;t+=1)this.layers[t].ddd&&this.layers[t].ty!==3?(s!=="3d"&&(s="3d",a=this.createThreeDContainer(t,"3d")),a.endPos=Math.max(a.endPos,t)):(s!=="2d"&&(s="2d",a=this.createThreeDContainer(t,"2d")),a.endPos=Math.max(a.endPos,t));for(e=this.threeDElements.length,t=e-1;t>=0;t-=1)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(t,e){for(var a=0,s=this.threeDElements.length;a<s;){if(e<=this.threeDElements[a].endPos){for(var o=this.threeDElements[a].startPos,l;o<e;)this.elements[o]&&this.elements[o].getBaseElement&&(l=this.elements[o].getBaseElement()),o+=1;l?this.threeDElements[a].container.insertBefore(t,l):this.threeDElements[a].container.appendChild(t);break}a+=1}},HybridRendererBase.prototype.configAnimation=function(t){var e=createTag("div"),a=this.animationItem.wrapper,s=e.style;s.width=t.w+"px",s.height=t.h+"px",this.resizerElem=e,styleDiv(e),s.transformStyle="flat",s.mozTransformStyle="flat",s.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),a.appendChild(e),s.overflow="hidden";var o=createNS("svg");o.setAttribute("width","1"),o.setAttribute("height","1"),styleDiv(o),this.resizerElem.appendChild(o);var l=createNS("defs");o.appendChild(l),this.data=t,this.setupGlobalData(t,o),this.globalData.defs=l,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,a=t/e,s=this.globalData.compSize.w/this.globalData.compSize.h,o,l,u,c;s>a?(o=t/this.globalData.compSize.w,l=t/this.globalData.compSize.w,u=0,c=(e-this.globalData.compSize.h*(t/this.globalData.compSize.w))/2):(o=e/this.globalData.compSize.h,l=e/this.globalData.compSize.h,u=(t-this.globalData.compSize.w*(e/this.globalData.compSize.h))/2,c=0);var d=this.resizerElem.style;d.webkitTransform="matrix3d("+o+",0,0,0,0,"+l+",0,0,0,0,1,0,"+u+","+c+",0,1)",d.transform=d.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t=this.globalData.compSize.w,e=this.globalData.compSize.h,a,s=this.threeDElements.length;for(a=0;a<s;a+=1){var o=this.threeDElements[a].perspectiveElem.style;o.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))+"px",o.perspective=o.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(t){var e,a=t.length,s=createTag("div");for(e=0;e<a;e+=1)if(t[e].xt){var o=this.createComp(t[e],s,this.globalData.comp,null);o.initExpressions(),this.globalData.projectInterface.registerComposition(o)}};function HCompElement(t,e,a){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,a),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var a=0,s;a<e;)this.elements[a]&&this.elements[a].getBaseElement&&(s=this.elements[a].getBaseElement()),a+=1;s?this.layerElement.insertBefore(t,s):this.layerElement.appendChild(t)},HCompElement.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};var CompExpressionInterface=function(){return function(t){function e(a){for(var s=0,o=t.layers.length;s<o;){if(t.layers[s].nm===a||t.layers[s].ind===a)return t.elements[s].layerInterface;s+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e}}();function _typeof$2(t){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(t)}function seedRandom(t,e){var a=this,s=256,o=6,l=52,u="random",c=e.pow(s,o),d=e.pow(2,l),m=d*2,g=s-1,A;function P(qe,Rs,Vc){var So=[];Rs=Rs===!0?{entropy:!0}:Rs||{};var Do=He(ve(Rs.entropy?[qe,Xe(t)]:qe===null?De():qe,3),So),eh=new W(So),Ko=function(){for(var An=eh.g(o),wt=c,Bs=0;An<d;)An=(An+Bs)*s,wt*=s,Bs=eh.g(1);for(;An>=m;)An/=2,wt/=2,Bs>>>=1;return(An+Bs)/wt};return Ko.int32=function(){return eh.g(4)|0},Ko.quick=function(){return eh.g(4)/4294967296},Ko.double=Ko,He(Xe(eh.S),t),(Rs.pass||Vc||function(Ge,An,wt,Bs){return Bs&&(Bs.S&&me(Bs,eh),Ge.state=function(){return me(eh,{})}),wt?(e[u]=Ge,An):Ge})(Ko,Do,"global"in Rs?Rs.global:this==e,Rs.state)}e["seed"+u]=P;function W(qe){var Rs,Vc=qe.length,So=this,Do=0,eh=So.i=So.j=0,Ko=So.S=[];for(Vc||(qe=[Vc++]);Do<s;)Ko[Do]=Do++;for(Do=0;Do<s;Do++)Ko[Do]=Ko[eh=g&eh+qe[Do%Vc]+(Rs=Ko[Do])],Ko[eh]=Rs;So.g=function(Ge){for(var An,wt=0,Bs=So.i,yh=So.j,df=So.S;Ge--;)An=df[Bs=g&Bs+1],wt=wt*s+df[g&(df[Bs]=df[yh=g&yh+An])+(df[yh]=An)];return So.i=Bs,So.j=yh,wt}}function me(qe,Rs){return Rs.i=qe.i,Rs.j=qe.j,Rs.S=qe.S.slice(),Rs}function ve(qe,Rs){var Vc=[],So=_typeof$2(qe),Do;if(Rs&&So=="object")for(Do in qe)try{Vc.push(ve(qe[Do],Rs-1))}catch{}return Vc.length?Vc:So=="string"?qe:qe+"\0"}function He(qe,Rs){for(var Vc=qe+"",So,Do=0;Do<Vc.length;)Rs[g&Do]=g&(So^=Rs[g&Do]*19)+Vc.charCodeAt(Do++);return Xe(Rs)}function De(){try{var qe=new Uint8Array(s);return(a.crypto||a.msCrypto).getRandomValues(qe),Xe(qe)}catch{var Rs=a.navigator,Vc=Rs&&Rs.plugins;return[+new Date,a,Vc,a.screen,Xe(t)]}}function Xe(qe){return String.fromCharCode.apply(0,qe)}He(e.random(),t)}function initialize$2(t){seedRandom([],t)}var propTypes={SHAPE:"shape"};function _typeof$1(t){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(t)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return t==="number"||e instanceof Number||t==="boolean"||t==="string"}function $bm_neg(t){var e=_typeof$1(t);if(e==="number"||t instanceof Number||e==="boolean")return-t;if($bm_isInstanceOfArray(t)){var a,s=t.length,o=[];for(a=0;a<s;a+=1)o[a]=-t[a];return o}return t.propType?t.v:-t}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var a=_typeof$1(t),s=_typeof$1(e);if(isNumerable(a,t)&&isNumerable(s,e)||a==="string"||s==="string")return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(s,e))return t=t.slice(0),t[0]+=e,t;if(isNumerable(a,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var o=0,l=t.length,u=e.length,c=[];o<l||o<u;)(typeof t[o]=="number"||t[o]instanceof Number)&&(typeof e[o]=="number"||e[o]instanceof Number)?c[o]=t[o]+e[o]:c[o]=e[o]===void 0?t[o]:t[o]||e[o],o+=1;return c}return 0}var add=sum;function sub(t,e){var a=_typeof$1(t),s=_typeof$1(e);if(isNumerable(a,t)&&isNumerable(s,e))return a==="string"&&(t=parseInt(t,10)),s==="string"&&(e=parseInt(e,10)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(s,e))return t=t.slice(0),t[0]-=e,t;if(isNumerable(a,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var o=0,l=t.length,u=e.length,c=[];o<l||o<u;)(typeof t[o]=="number"||t[o]instanceof Number)&&(typeof e[o]=="number"||e[o]instanceof Number)?c[o]=t[o]-e[o]:c[o]=e[o]===void 0?t[o]:t[o]||e[o],o+=1;return c}return 0}function mul(t,e){var a=_typeof$1(t),s=_typeof$1(e),o;if(isNumerable(a,t)&&isNumerable(s,e))return t*e;var l,u;if($bm_isInstanceOfArray(t)&&isNumerable(s,e)){for(u=t.length,o=createTypedArray("float32",u),l=0;l<u;l+=1)o[l]=t[l]*e;return o}if(isNumerable(a,t)&&$bm_isInstanceOfArray(e)){for(u=e.length,o=createTypedArray("float32",u),l=0;l<u;l+=1)o[l]=t*e[l];return o}return 0}function div(t,e){var a=_typeof$1(t),s=_typeof$1(e),o;if(isNumerable(a,t)&&isNumerable(s,e))return t/e;var l,u;if($bm_isInstanceOfArray(t)&&isNumerable(s,e)){for(u=t.length,o=createTypedArray("float32",u),l=0;l<u;l+=1)o[l]=t[l]/e;return o}if(isNumerable(a,t)&&$bm_isInstanceOfArray(e)){for(u=e.length,o=createTypedArray("float32",u),l=0;l<u;l+=1)o[l]=t/e[l];return o}return 0}function mod(t,e){return typeof t=="string"&&(t=parseInt(t,10)),typeof e=="string"&&(e=parseInt(e,10)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,a){if(e>a){var s=a;a=e,e=s}return Math.min(Math.max(t,e),a)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if(typeof t=="number"||t instanceof Number)return e=e||0,Math.abs(t-e);e||(e=helperLengthArray);var a,s=Math.min(t.length,e.length),o=0;for(a=0;a<s;a+=1)o+=Math.pow(e[a]-t[a],2);return Math.sqrt(o)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e=t[0],a=t[1],s=t[2],o=Math.max(e,a,s),l=Math.min(e,a,s),u,c,d=(o+l)/2;if(o===l)u=0,c=0;else{var m=o-l;switch(c=d>.5?m/(2-o-l):m/(o+l),o){case e:u=(a-s)/m+(a<s?6:0);break;case a:u=(s-e)/m+2;break;case s:u=(e-a)/m+4;break}u/=6}return[u,c,d,t[3]]}function hue2rgb(t,e,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(e-t)*6*a:a<1/2?e:a<2/3?t+(e-t)*(2/3-a)*6:t}function hslToRgb(t){var e=t[0],a=t[1],s=t[2],o,l,u;if(a===0)o=s,u=s,l=s;else{var c=s<.5?s*(1+a):s+a-s*a,d=2*s-c;o=hue2rgb(d,c,e+1/3),l=hue2rgb(d,c,e),u=hue2rgb(d,c,e-1/3)}return[o,l,u,t[3]]}function linear(t,e,a,s,o){if((s===void 0||o===void 0)&&(s=e,o=a,e=0,a=1),a<e){var l=a;a=e,e=l}if(t<=e)return s;if(t>=a)return o;var u=a===e?0:(t-e)/(a-e);if(!s.length)return s+(o-s)*u;var c,d=s.length,m=createTypedArray("float32",d);for(c=0;c<d;c+=1)m[c]=s[c]+(o[c]-s[c])*u;return m}function random(t,e){if(e===void 0&&(t===void 0?(t=0,e=1):(e=t,t=void 0)),e.length){var a,s=e.length;t||(t=createTypedArray("float32",s));var o=createTypedArray("float32",s),l=BMMath.random();for(a=0;a<s;a+=1)o[a]=t[a]+l*(e[a]-t[a]);return o}t===void 0&&(t=0);var u=BMMath.random();return t+u*(e-t)}function createPath(t,e,a,s){var o,l=t.length,u=shapePool.newElement();u.setPathData(!!s,l);var c=[0,0],d,m;for(o=0;o<l;o+=1)d=e&&e[o]?e[o]:c,m=a&&a[o]?a[o]:c,u.setTripleAt(t[o][0],t[o][1],m[0]+t[o][0],m[1]+t[o][1],d[0]+t[o][0],d[1]+t[o][1],o,!0);return u}function initiateExpression(elem,data,property){function noOp(t){return t}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function t(e,a){var s,o,l=this.pv.length?this.pv.length:1,u=createTypedArray("float32",l);e=5;var c=Math.floor(time*e);for(s=0,o=0;s<c;){for(o=0;o<l;o+=1)u[o]+=-a+a*2*BMMath.random();s+=1}var d=time*e,m=d-Math.floor(d),g=createTypedArray("float32",l);if(l>1){for(o=0;o<l;o+=1)g[o]=this.pv[o]+u[o]+(-a+a*2*BMMath.random())*m;return g}return this.pv+u[0]+(-a+a*2*BMMath.random())*m}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(t,e){var a=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],s=Math.atan2(a[0],Math.sqrt(a[1]*a[1]+a[2]*a[2]))/degToRads,o=-Math.atan2(a[1],a[2])/degToRads;return[o,s,0]}function easeOut(t,e,a,s,o){return applyEase(easeOutBez,t,e,a,s,o)}function easeIn(t,e,a,s,o){return applyEase(easeInBez,t,e,a,s,o)}function ease(t,e,a,s,o){return applyEase(easeInOutBez,t,e,a,s,o)}function applyEase(t,e,a,s,o,l){o===void 0?(o=a,l=s):e=(e-a)/(s-a),e>1?e=1:e<0&&(e=0);var u=t(e);if($bm_isInstanceOfArray(o)){var c,d=o.length,m=createTypedArray("float32",d);for(c=0;c<d;c+=1)m[c]=(l[c]-o[c])*u+o[c];return m}return(l-o)*u+o}function nearestKey(t){var e,a=data.k.length,s,o;if(!data.k.length||typeof data.k[0]=="number")s=0,o=0;else if(s=-1,t*=elem.comp.globalData.frameRate,t<data.k[0].t)s=1,o=data.k[0].t;else{for(e=0;e<a-1;e+=1)if(t===data.k[e].t){s=e+1,o=data.k[e].t;break}else if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(s=e+2,o=data.k[e+1].t):(s=e+1,o=data.k[e].t);break}s===-1&&(s=e+1,o=data.k[e].t)}var l={};return l.index=s,l.time=o/elem.comp.globalData.frameRate,l}function key(t){var e,a,s;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var o=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(s=o.length,a=0;a<s;a+=1)e[a]=o[a],e.value[a]=o[a];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return!t&&t!==0&&(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return typeof value=="string"?e===void 0?value.substring(t):value.substring(t,e):""}function substr(t,e){return typeof value=="string"?e===void 0?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=t===0?0:Math.floor(time*t)/t,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(t){return value=t,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var t={};t.initExpressions=e,t.resetFrame=ExpressionManager.resetFrame;function e(a){var s=0,o=[];function l(){s+=1}function u(){s-=1,s===0&&d()}function c(m){o.indexOf(m)===-1&&o.push(m)}function d(){var m,g=o.length;for(m=0;m<g;m+=1)o[m].release();o.length=0}a.renderer.compInterface=CompExpressionInterface(a.renderer),a.renderer.globalData.projectInterface.registerComposition(a.renderer),a.renderer.globalData.pushExpression=l,a.renderer.globalData.popExpression=u,a.renderer.globalData.registerExpressionProperty=c}return t}(),MaskManagerInterface=function(){function t(a,s){this._mask=a,this._data=s}Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var e=function(s){var o=createSizedArray(s.viewData.length),l,u=s.viewData.length;for(l=0;l<u;l+=1)o[l]=new t(s.viewData[l],s.masksProperties[l]);var c=function(m){for(l=0;l<u;){if(s.masksProperties[l].nm===m)return o[l];l+=1}return null};return c};return e}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function a(u,c,d){Object.defineProperty(u,"velocity",{get:function(){return c.getVelocityAtTime(c.comp.currentFrame)}}),u.numKeys=c.keyframes?c.keyframes.length:0,u.key=function(m){if(!u.numKeys)return 0;var g="";"s"in c.keyframes[m-1]?g=c.keyframes[m-1].s:"e"in c.keyframes[m-2]?g=c.keyframes[m-2].e:g=c.keyframes[m-2].s;var A=d==="unidimensional"?new Number(g):Object.assign({},g);return A.time=c.keyframes[m-1].t/c.elem.comp.globalData.frameRate,A.value=d==="unidimensional"?g[0]:g,A},u.valueAtTime=c.getValueAtTime,u.speedAtTime=c.getSpeedAtTime,u.velocityAtTime=c.getVelocityAtTime,u.propertyGroup=c.propertyGroup}function s(u){(!u||!("pv"in u))&&(u=t);var c=1/u.mult,d=u.pv*c,m=new Number(d);return m.value=d,a(m,u,"unidimensional"),function(){return u.k&&u.getValue(),d=u.v*c,m.value!==d&&(m=new Number(d),m.value=d,m[0]=d,a(m,u,"unidimensional")),m}}function o(u){(!u||!("pv"in u))&&(u=e);var c=1/u.mult,d=u.data&&u.data.l||u.pv.length,m=createTypedArray("float32",d),g=createTypedArray("float32",d);return m.value=g,a(m,u,"multidimensional"),function(){u.k&&u.getValue();for(var A=0;A<d;A+=1)g[A]=u.v[A]*c,m[A]=g[A];return m}}function l(){return t}return function(u){return u?u.propType==="unidimensional"?s(u):o(u):l}}(),TransformExpressionInterface=function(){return function(t){function e(u){switch(u){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)});var a,s,o,l;return t.p?l=ExpressionPropertyInterface(t.p):(a=ExpressionPropertyInterface(t.px),s=ExpressionPropertyInterface(t.py),t.pz&&(o=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?l():[a(),s(),o?o():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e}}(),LayerExpressionInterface=function(){function t(m){var g=new Matrix;if(m!==void 0){var A=this._elem.finalTransform.mProp.getValueAtTime(m);A.clone(g)}else{var P=this._elem.finalTransform.mProp;P.applyToMatrix(g)}return g}function e(m,g){var A=this.getMatrix(g);return A.props[12]=0,A.props[13]=0,A.props[14]=0,this.applyPoint(A,m)}function a(m,g){var A=this.getMatrix(g);return this.applyPoint(A,m)}function s(m,g){var A=this.getMatrix(g);return A.props[12]=0,A.props[13]=0,A.props[14]=0,this.invertPoint(A,m)}function o(m,g){var A=this.getMatrix(g);return this.invertPoint(A,m)}function l(m,g){if(this._elem.hierarchy&&this._elem.hierarchy.length){var A,P=this._elem.hierarchy.length;for(A=0;A<P;A+=1)this._elem.hierarchy[A].finalTransform.mProp.applyToMatrix(m)}return m.applyToPointArray(g[0],g[1],g[2]||0)}function u(m,g){if(this._elem.hierarchy&&this._elem.hierarchy.length){var A,P=this._elem.hierarchy.length;for(A=0;A<P;A+=1)this._elem.hierarchy[A].finalTransform.mProp.applyToMatrix(m)}return m.inversePoint(g)}function c(m){var g=new Matrix;if(g.reset(),this._elem.finalTransform.mProp.applyToMatrix(g),this._elem.hierarchy&&this._elem.hierarchy.length){var A,P=this._elem.hierarchy.length;for(A=0;A<P;A+=1)this._elem.hierarchy[A].finalTransform.mProp.applyToMatrix(g);return g.inversePoint(m)}return g.inversePoint(m)}function d(){return[1,1,1,1]}return function(m){var g;function A(ve){W.mask=new MaskManagerInterface(ve,m)}function P(ve){W.effect=ve}function W(ve){switch(ve){case"ADBE Root Vectors Group":case"Contents":case 2:return W.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return g;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return W.effect;case"ADBE Text Properties":return W.textInterface;default:return null}}W.getMatrix=t,W.invertPoint=u,W.applyPoint=l,W.toWorld=a,W.toWorldVec=e,W.fromWorld=o,W.fromWorldVec=s,W.toComp=a,W.fromComp=c,W.sampleImage=d,W.sourceRectAtTime=m.sourceRectAtTime.bind(m),W._elem=m,g=TransformExpressionInterface(m.finalTransform.mProp);var me=getDescriptor(g,"anchorPoint");return Object.defineProperties(W,{hasParent:{get:function(){return m.hierarchy.length}},parent:{get:function(){return m.hierarchy[0].layerInterface}},rotation:getDescriptor(g,"rotation"),scale:getDescriptor(g,"scale"),position:getDescriptor(g,"position"),opacity:getDescriptor(g,"opacity"),anchorPoint:me,anchor_point:me,transform:{get:function(){return g}},active:{get:function(){return m.isInRange}}}),W.startTime=m.data.st,W.index=m.data.ind,W.source=m.data.refId,W.height=m.data.ty===0?m.data.h:100,W.width=m.data.ty===0?m.data.w:100,W.inPoint=m.data.ip/m.comp.globalData.frameRate,W.outPoint=m.data.op/m.comp.globalData.frameRate,W._name=m.data.nm,W.registerMaskInterface=A,W.registerEffectsInterface=P,W}}(),propertyGroupFactory=function(){return function(t,e){return function(a){return a=a===void 0?1:a,a<=0?t:e(a-1)}}}(),PropertyInterface=function(){return function(t,e){var a={_name:t};function s(o){return o=o===void 0?1:o,o<=0?a:e(o-1)}return s}}(),EffectsExpressionInterface=function(){var t={createEffectsInterface:e};function e(o,l){if(o.effectsManager){var u=[],c=o.data.ef,d,m=o.effectsManager.effectElements.length;for(d=0;d<m;d+=1)u.push(a(c[d],o.effectsManager.effectElements[d],l,o));var g=o.data.ef||[],A=function(W){for(d=0,m=g.length;d<m;){if(W===g[d].nm||W===g[d].mn||W===g[d].ix)return u[d];d+=1}return null};return Object.defineProperty(A,"numProperties",{get:function(){return g.length}}),A}return null}function a(o,l,u,c){function d(W){for(var me=o.ef,ve=0,He=me.length;ve<He;){if(W===me[ve].nm||W===me[ve].mn||W===me[ve].ix)return me[ve].ty===5?g[ve]:g[ve]();ve+=1}throw new Error}var m=propertyGroupFactory(d,u),g=[],A,P=o.ef.length;for(A=0;A<P;A+=1)o.ef[A].ty===5?g.push(a(o.ef[A],l.effectElements[A],l.effectElements[A].propertyGroup,c)):g.push(s(l.effectElements[A],o.ef[A].ty,c,m));return o.mn==="ADBE Color Control"&&Object.defineProperty(d,"color",{get:function(){return g[0]()}}),Object.defineProperties(d,{numProperties:{get:function(){return o.np}},_name:{value:o.nm},propertyGroup:{value:m}}),d.enabled=o.en!==0,d.active=d.enabled,d}function s(o,l,u,c){var d=ExpressionPropertyInterface(o.p);function m(){return l===10?u.comp.compInterface(o.p.v):d()}return o.p.setGroupProperty&&o.p.setGroupProperty(PropertyInterface("",c)),m}return t}(),ShapePathInterface=function(){return function(e,a,s){var o=a.sh;function l(c){return c==="Shape"||c==="shape"||c==="Path"||c==="path"||c==="ADBE Vector Shape"||c===2?l.path:null}var u=propertyGroupFactory(l,s);return o.setGroupProperty(PropertyInterface("Path",u)),Object.defineProperties(l,{path:{get:function(){return o.k&&o.getValue(),o}},shape:{get:function(){return o.k&&o.getValue(),o}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:s}}),l}}(),ShapeExpressionInterface=function(){function t(me,ve,He){var De=[],Xe,qe=me?me.length:0;for(Xe=0;Xe<qe;Xe+=1)me[Xe].ty==="gr"?De.push(a(me[Xe],ve[Xe],He)):me[Xe].ty==="fl"?De.push(s(me[Xe],ve[Xe],He)):me[Xe].ty==="st"?De.push(u(me[Xe],ve[Xe],He)):me[Xe].ty==="tm"?De.push(c(me[Xe],ve[Xe],He)):me[Xe].ty==="tr"||(me[Xe].ty==="el"?De.push(m(me[Xe],ve[Xe],He)):me[Xe].ty==="sr"?De.push(g(me[Xe],ve[Xe],He)):me[Xe].ty==="sh"?De.push(ShapePathInterface(me[Xe],ve[Xe],He)):me[Xe].ty==="rc"?De.push(A(me[Xe],ve[Xe],He)):me[Xe].ty==="rd"?De.push(P(me[Xe],ve[Xe],He)):me[Xe].ty==="rp"?De.push(W(me[Xe],ve[Xe],He)):me[Xe].ty==="gf"?De.push(o(me[Xe],ve[Xe],He)):De.push(l(me[Xe],ve[Xe])));return De}function e(me,ve,He){var De,Xe=function(Vc){for(var So=0,Do=De.length;So<Do;){if(De[So]._name===Vc||De[So].mn===Vc||De[So].propertyIndex===Vc||De[So].ix===Vc||De[So].ind===Vc)return De[So];So+=1}return typeof Vc=="number"?De[Vc-1]:null};Xe.propertyGroup=propertyGroupFactory(Xe,He),De=t(me.it,ve.it,Xe.propertyGroup),Xe.numProperties=De.length;var qe=d(me.it[me.it.length-1],ve.it[ve.it.length-1],Xe.propertyGroup);return Xe.transform=qe,Xe.propertyIndex=me.cix,Xe._name=me.nm,Xe}function a(me,ve,He){var De=function(Vc){switch(Vc){case"ADBE Vectors Group":case"Contents":case 2:return De.content;default:return De.transform}};De.propertyGroup=propertyGroupFactory(De,He);var Xe=e(me,ve,De.propertyGroup),qe=d(me.it[me.it.length-1],ve.it[ve.it.length-1],De.propertyGroup);return De.content=Xe,De.transform=qe,Object.defineProperty(De,"_name",{get:function(){return me.nm}}),De.numProperties=me.np,De.propertyIndex=me.ix,De.nm=me.nm,De.mn=me.mn,De}function s(me,ve,He){function De(Xe){return Xe==="Color"||Xe==="color"?De.color:Xe==="Opacity"||Xe==="opacity"?De.opacity:null}return Object.defineProperties(De,{color:{get:ExpressionPropertyInterface(ve.c)},opacity:{get:ExpressionPropertyInterface(ve.o)},_name:{value:me.nm},mn:{value:me.mn}}),ve.c.setGroupProperty(PropertyInterface("Color",He)),ve.o.setGroupProperty(PropertyInterface("Opacity",He)),De}function o(me,ve,He){function De(Xe){return Xe==="Start Point"||Xe==="start point"?De.startPoint:Xe==="End Point"||Xe==="end point"?De.endPoint:Xe==="Opacity"||Xe==="opacity"?De.opacity:null}return Object.defineProperties(De,{startPoint:{get:ExpressionPropertyInterface(ve.s)},endPoint:{get:ExpressionPropertyInterface(ve.e)},opacity:{get:ExpressionPropertyInterface(ve.o)},type:{get:function(){return"a"}},_name:{value:me.nm},mn:{value:me.mn}}),ve.s.setGroupProperty(PropertyInterface("Start Point",He)),ve.e.setGroupProperty(PropertyInterface("End Point",He)),ve.o.setGroupProperty(PropertyInterface("Opacity",He)),De}function l(){function me(){return null}return me}function u(me,ve,He){var De=propertyGroupFactory(Do,He),Xe=propertyGroupFactory(So,De);function qe(eh){Object.defineProperty(So,me.d[eh].nm,{get:ExpressionPropertyInterface(ve.d.dataProps[eh].p)})}var Rs,Vc=me.d?me.d.length:0,So={};for(Rs=0;Rs<Vc;Rs+=1)qe(Rs),ve.d.dataProps[Rs].p.setGroupProperty(Xe);function Do(eh){return eh==="Color"||eh==="color"?Do.color:eh==="Opacity"||eh==="opacity"?Do.opacity:eh==="Stroke Width"||eh==="stroke width"?Do.strokeWidth:null}return Object.defineProperties(Do,{color:{get:ExpressionPropertyInterface(ve.c)},opacity:{get:ExpressionPropertyInterface(ve.o)},strokeWidth:{get:ExpressionPropertyInterface(ve.w)},dash:{get:function(){return So}},_name:{value:me.nm},mn:{value:me.mn}}),ve.c.setGroupProperty(PropertyInterface("Color",De)),ve.o.setGroupProperty(PropertyInterface("Opacity",De)),ve.w.setGroupProperty(PropertyInterface("Stroke Width",De)),Do}function c(me,ve,He){function De(qe){return qe===me.e.ix||qe==="End"||qe==="end"?De.end:qe===me.s.ix?De.start:qe===me.o.ix?De.offset:null}var Xe=propertyGroupFactory(De,He);return De.propertyIndex=me.ix,ve.s.setGroupProperty(PropertyInterface("Start",Xe)),ve.e.setGroupProperty(PropertyInterface("End",Xe)),ve.o.setGroupProperty(PropertyInterface("Offset",Xe)),De.propertyIndex=me.ix,De.propertyGroup=He,Object.defineProperties(De,{start:{get:ExpressionPropertyInterface(ve.s)},end:{get:ExpressionPropertyInterface(ve.e)},offset:{get:ExpressionPropertyInterface(ve.o)},_name:{value:me.nm}}),De.mn=me.mn,De}function d(me,ve,He){function De(qe){return me.a.ix===qe||qe==="Anchor Point"?De.anchorPoint:me.o.ix===qe||qe==="Opacity"?De.opacity:me.p.ix===qe||qe==="Position"?De.position:me.r.ix===qe||qe==="Rotation"||qe==="ADBE Vector Rotation"?De.rotation:me.s.ix===qe||qe==="Scale"?De.scale:me.sk&&me.sk.ix===qe||qe==="Skew"?De.skew:me.sa&&me.sa.ix===qe||qe==="Skew Axis"?De.skewAxis:null}var Xe=propertyGroupFactory(De,He);return ve.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Xe)),ve.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Xe)),ve.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Xe)),ve.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Xe)),ve.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Xe)),ve.transform.mProps.sk&&(ve.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Xe)),ve.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Xe))),ve.transform.op.setGroupProperty(PropertyInterface("Opacity",Xe)),Object.defineProperties(De,{opacity:{get:ExpressionPropertyInterface(ve.transform.mProps.o)},position:{get:ExpressionPropertyInterface(ve.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(ve.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(ve.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(ve.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(ve.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(ve.transform.mProps.sa)},_name:{value:me.nm}}),De.ty="tr",De.mn=me.mn,De.propertyGroup=He,De}function m(me,ve,He){function De(Rs){return me.p.ix===Rs?De.position:me.s.ix===Rs?De.size:null}var Xe=propertyGroupFactory(De,He);De.propertyIndex=me.ix;var qe=ve.sh.ty==="tm"?ve.sh.prop:ve.sh;return qe.s.setGroupProperty(PropertyInterface("Size",Xe)),qe.p.setGroupProperty(PropertyInterface("Position",Xe)),Object.defineProperties(De,{size:{get:ExpressionPropertyInterface(qe.s)},position:{get:ExpressionPropertyInterface(qe.p)},_name:{value:me.nm}}),De.mn=me.mn,De}function g(me,ve,He){function De(Rs){return me.p.ix===Rs?De.position:me.r.ix===Rs?De.rotation:me.pt.ix===Rs?De.points:me.or.ix===Rs||Rs==="ADBE Vector Star Outer Radius"?De.outerRadius:me.os.ix===Rs?De.outerRoundness:me.ir&&(me.ir.ix===Rs||Rs==="ADBE Vector Star Inner Radius")?De.innerRadius:me.is&&me.is.ix===Rs?De.innerRoundness:null}var Xe=propertyGroupFactory(De,He),qe=ve.sh.ty==="tm"?ve.sh.prop:ve.sh;return De.propertyIndex=me.ix,qe.or.setGroupProperty(PropertyInterface("Outer Radius",Xe)),qe.os.setGroupProperty(PropertyInterface("Outer Roundness",Xe)),qe.pt.setGroupProperty(PropertyInterface("Points",Xe)),qe.p.setGroupProperty(PropertyInterface("Position",Xe)),qe.r.setGroupProperty(PropertyInterface("Rotation",Xe)),me.ir&&(qe.ir.setGroupProperty(PropertyInterface("Inner Radius",Xe)),qe.is.setGroupProperty(PropertyInterface("Inner Roundness",Xe))),Object.defineProperties(De,{position:{get:ExpressionPropertyInterface(qe.p)},rotation:{get:ExpressionPropertyInterface(qe.r)},points:{get:ExpressionPropertyInterface(qe.pt)},outerRadius:{get:ExpressionPropertyInterface(qe.or)},outerRoundness:{get:ExpressionPropertyInterface(qe.os)},innerRadius:{get:ExpressionPropertyInterface(qe.ir)},innerRoundness:{get:ExpressionPropertyInterface(qe.is)},_name:{value:me.nm}}),De.mn=me.mn,De}function A(me,ve,He){function De(Rs){return me.p.ix===Rs?De.position:me.r.ix===Rs?De.roundness:me.s.ix===Rs||Rs==="Size"||Rs==="ADBE Vector Rect Size"?De.size:null}var Xe=propertyGroupFactory(De,He),qe=ve.sh.ty==="tm"?ve.sh.prop:ve.sh;return De.propertyIndex=me.ix,qe.p.setGroupProperty(PropertyInterface("Position",Xe)),qe.s.setGroupProperty(PropertyInterface("Size",Xe)),qe.r.setGroupProperty(PropertyInterface("Rotation",Xe)),Object.defineProperties(De,{position:{get:ExpressionPropertyInterface(qe.p)},roundness:{get:ExpressionPropertyInterface(qe.r)},size:{get:ExpressionPropertyInterface(qe.s)},_name:{value:me.nm}}),De.mn=me.mn,De}function P(me,ve,He){function De(Rs){return me.r.ix===Rs||Rs==="Round Corners 1"?De.radius:null}var Xe=propertyGroupFactory(De,He),qe=ve;return De.propertyIndex=me.ix,qe.rd.setGroupProperty(PropertyInterface("Radius",Xe)),Object.defineProperties(De,{radius:{get:ExpressionPropertyInterface(qe.rd)},_name:{value:me.nm}}),De.mn=me.mn,De}function W(me,ve,He){function De(Rs){return me.c.ix===Rs||Rs==="Copies"?De.copies:me.o.ix===Rs||Rs==="Offset"?De.offset:null}var Xe=propertyGroupFactory(De,He),qe=ve;return De.propertyIndex=me.ix,qe.c.setGroupProperty(PropertyInterface("Copies",Xe)),qe.o.setGroupProperty(PropertyInterface("Offset",Xe)),Object.defineProperties(De,{copies:{get:ExpressionPropertyInterface(qe.c)},offset:{get:ExpressionPropertyInterface(qe.o)},_name:{value:me.nm}}),De.mn=me.mn,De}return function(me,ve,He){var De;function Xe(Rs){if(typeof Rs=="number")return Rs=Rs===void 0?1:Rs,Rs===0?He:De[Rs-1];for(var Vc=0,So=De.length;Vc<So;){if(De[Vc]._name===Rs)return De[Vc];Vc+=1}return null}function qe(){return He}return Xe.propertyGroup=propertyGroupFactory(Xe,qe),De=t(me,ve,Xe.propertyGroup),Xe.numProperties=De.length,Xe._name="Contents",Xe}}(),TextExpressionInterface=function(){return function(t){var e;function a(s){switch(s){case"ADBE Text Document":return a.sourceText;default:return null}}return Object.defineProperty(a,"sourceText",{get:function(){t.textProperty.getValue();var o=t.textProperty.currentData.t;return(!e||o!==e.value)&&(e=new String(o),e.value=o||new String(o),Object.defineProperty(e,"style",{get:function(){return{fillColor:t.textProperty.currentData.fc}}})),e}}),a}}();function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}var FootageInterface=function(){var t=function(s){var o="",l=s.getFootageData();function u(){return o="",l=s.getFootageData(),c}function c(d){if(l[d])return o=d,l=l[d],_typeof(l)==="object"?c:l;var m=d.indexOf(o);if(m!==-1){var g=parseInt(d.substr(m+o.length),10);return l=l[g],_typeof(l)==="object"?c:l}return""}return u},e=function(s){function o(l){return l==="Outline"?o.outlineInterface():null}return o._name="Outline",o.outlineInterface=t(s),o};return function(a){function s(o){return o==="Data"?s.dataInterface:null}return s._name="Data",s.dataInterface=e(a),s}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(t){return interfaces[t]||null}var expressionHelpers=function(){function t(u,c,d){c.x&&(d.k=!0,d.x=!0,d.initiateExpression=ExpressionManager.initiateExpression,d.effectsSequence.push(d.initiateExpression(u,c,d).bind(d)))}function e(u){return u*=this.elem.globalData.frameRate,u-=this.offsetTime,u!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<u?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(u,this._cachingAtTime),this._cachingAtTime.lastFrame=u),this._cachingAtTime.value}function a(u){var c=-.01,d=this.getValueAtTime(u),m=this.getValueAtTime(u+c),g=0;if(d.length){var A;for(A=0;A<d.length;A+=1)g+=Math.pow(m[A]-d[A],2);g=Math.sqrt(g)*100}else g=0;return g}function s(u){if(this.vel!==void 0)return this.vel;var c=-.001,d=this.getValueAtTime(u),m=this.getValueAtTime(u+c),g;if(d.length){g=createTypedArray("float32",d.length);var A;for(A=0;A<d.length;A+=1)g[A]=(m[A]-d[A])/c}else g=(m-d)/c;return g}function o(){return this.pv}function l(u){this.propertyGroup=u}return{searchExpressions:t,getSpeedAtTime:a,getVelocityAtTime:s,getValueAtTime:e,getStaticValueAtTime:o,setGroupProperty:l}}();function addPropertyDecorator(){function t(P,W,me){if(!this.k||!this.keyframes)return this.pv;P=P?P.toLowerCase():"";var ve=this.comp.renderedFrame,He=this.keyframes,De=He[He.length-1].t;if(ve<=De)return this.pv;var Xe,qe;me?(W?Xe=Math.abs(De-this.elem.comp.globalData.frameRate*W):Xe=Math.max(0,De-this.elem.data.ip),qe=De-Xe):((!W||W>He.length-1)&&(W=He.length-1),qe=He[He.length-1-W].t,Xe=De-qe);var Rs,Vc,So;if(P==="pingpong"){var Do=Math.floor((ve-qe)/Xe);if(Do%2!==0)return this.getValueAtTime((Xe-(ve-qe)%Xe+qe)/this.comp.globalData.frameRate,0)}else if(P==="offset"){var eh=this.getValueAtTime(qe/this.comp.globalData.frameRate,0),Ko=this.getValueAtTime(De/this.comp.globalData.frameRate,0),Ge=this.getValueAtTime(((ve-qe)%Xe+qe)/this.comp.globalData.frameRate,0),An=Math.floor((ve-qe)/Xe);if(this.pv.length){for(So=new Array(eh.length),Vc=So.length,Rs=0;Rs<Vc;Rs+=1)So[Rs]=(Ko[Rs]-eh[Rs])*An+Ge[Rs];return So}return(Ko-eh)*An+Ge}else if(P==="continue"){var wt=this.getValueAtTime(De/this.comp.globalData.frameRate,0),Bs=this.getValueAtTime((De-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(So=new Array(wt.length),Vc=So.length,Rs=0;Rs<Vc;Rs+=1)So[Rs]=wt[Rs]+(wt[Rs]-Bs[Rs])*((ve-De)/this.comp.globalData.frameRate)/5e-4;return So}return wt+(wt-Bs)*((ve-De)/.001)}return this.getValueAtTime(((ve-qe)%Xe+qe)/this.comp.globalData.frameRate,0)}function e(P,W,me){if(!this.k)return this.pv;P=P?P.toLowerCase():"";var ve=this.comp.renderedFrame,He=this.keyframes,De=He[0].t;if(ve>=De)return this.pv;var Xe,qe;me?(W?Xe=Math.abs(this.elem.comp.globalData.frameRate*W):Xe=Math.max(0,this.elem.data.op-De),qe=De+Xe):((!W||W>He.length-1)&&(W=He.length-1),qe=He[W].t,Xe=qe-De);var Rs,Vc,So;if(P==="pingpong"){var Do=Math.floor((De-ve)/Xe);if(Do%2===0)return this.getValueAtTime(((De-ve)%Xe+De)/this.comp.globalData.frameRate,0)}else if(P==="offset"){var eh=this.getValueAtTime(De/this.comp.globalData.frameRate,0),Ko=this.getValueAtTime(qe/this.comp.globalData.frameRate,0),Ge=this.getValueAtTime((Xe-(De-ve)%Xe+De)/this.comp.globalData.frameRate,0),An=Math.floor((De-ve)/Xe)+1;if(this.pv.length){for(So=new Array(eh.length),Vc=So.length,Rs=0;Rs<Vc;Rs+=1)So[Rs]=Ge[Rs]-(Ko[Rs]-eh[Rs])*An;return So}return Ge-(Ko-eh)*An}else if(P==="continue"){var wt=this.getValueAtTime(De/this.comp.globalData.frameRate,0),Bs=this.getValueAtTime((De+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(So=new Array(wt.length),Vc=So.length,Rs=0;Rs<Vc;Rs+=1)So[Rs]=wt[Rs]+(wt[Rs]-Bs[Rs])*(De-ve)/.001;return So}return wt+(wt-Bs)*(De-ve)/.001}return this.getValueAtTime((Xe-((De-ve)%Xe+De))/this.comp.globalData.frameRate,0)}function a(P,W){if(!this.k)return this.pv;if(P=(P||.4)*.5,W=Math.floor(W||5),W<=1)return this.pv;var me=this.comp.renderedFrame/this.comp.globalData.frameRate,ve=me-P,He=me+P,De=W>1?(He-ve)/(W-1):1,Xe=0,qe=0,Rs;this.pv.length?Rs=createTypedArray("float32",this.pv.length):Rs=0;for(var Vc;Xe<W;){if(Vc=this.getValueAtTime(ve+Xe*De),this.pv.length)for(qe=0;qe<this.pv.length;qe+=1)Rs[qe]+=Vc[qe];else Rs+=Vc;Xe+=1}if(this.pv.length)for(qe=0;qe<this.pv.length;qe+=1)Rs[qe]/=W;else Rs/=W;return Rs}function s(P){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var W=this._transformCachingAtTime.v;if(W.cloneFromProps(this.pre.props),this.appliedTransformations<1){var me=this.a.getValueAtTime(P);W.translate(-me[0]*this.a.mult,-me[1]*this.a.mult,me[2]*this.a.mult)}if(this.appliedTransformations<2){var ve=this.s.getValueAtTime(P);W.scale(ve[0]*this.s.mult,ve[1]*this.s.mult,ve[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var He=this.sk.getValueAtTime(P),De=this.sa.getValueAtTime(P);W.skewFromAxis(-He*this.sk.mult,De*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Xe=this.r.getValueAtTime(P);W.rotate(-Xe*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var qe=this.rz.getValueAtTime(P),Rs=this.ry.getValueAtTime(P),Vc=this.rx.getValueAtTime(P),So=this.or.getValueAtTime(P);W.rotateZ(-qe*this.rz.mult).rotateY(Rs*this.ry.mult).rotateX(Vc*this.rx.mult).rotateZ(-So[2]*this.or.mult).rotateY(So[1]*this.or.mult).rotateX(So[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Do=this.px.getValueAtTime(P),eh=this.py.getValueAtTime(P);if(this.data.p.z){var Ko=this.pz.getValueAtTime(P);W.translate(Do*this.px.mult,eh*this.py.mult,-Ko*this.pz.mult)}else W.translate(Do*this.px.mult,eh*this.py.mult,0)}else{var Ge=this.p.getValueAtTime(P);W.translate(Ge[0]*this.p.mult,Ge[1]*this.p.mult,-Ge[2]*this.p.mult)}return W}function o(){return this.v.clone(new Matrix)}var l=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(P,W,me){var ve=l(P,W,me);return ve.dynamicProperties.length?ve.getValueAtTime=s.bind(ve):ve.getValueAtTime=o.bind(ve),ve.setGroupProperty=expressionHelpers.setGroupProperty,ve};var u=PropertyFactory.getProp;PropertyFactory.getProp=function(P,W,me,ve,He){var De=u(P,W,me,ve,He);De.kf?De.getValueAtTime=expressionHelpers.getValueAtTime.bind(De):De.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(De),De.setGroupProperty=expressionHelpers.setGroupProperty,De.loopOut=t,De.loopIn=e,De.smooth=a,De.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(De),De.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(De),De.numKeys=W.a===1?W.k.length:0,De.propertyIndex=W.ix;var Xe=0;return me!==0&&(Xe=createTypedArray("float32",W.a===1?W.k[0].s.length:W.k.length)),De._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Xe},expressionHelpers.searchExpressions(P,W,De),De.k&&He.addDynamicProperty(De),De};function c(P){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),P*=this.elem.globalData.frameRate,P-=this.offsetTime,P!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<P?this._caching.lastIndex:0,this._cachingAtTime.lastTime=P,this.interpolateShape(P,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var d=ShapePropertyFactory.getConstructorFunction(),m=ShapePropertyFactory.getKeyframedConstructorFunction();function g(){}g.prototype={vertices:function(W,me){this.k&&this.getValue();var ve=this.v;me!==void 0&&(ve=this.getValueAtTime(me,0));var He,De=ve._length,Xe=ve[W],qe=ve.v,Rs=createSizedArray(De);for(He=0;He<De;He+=1)W==="i"||W==="o"?Rs[He]=[Xe[He][0]-qe[He][0],Xe[He][1]-qe[He][1]]:Rs[He]=[Xe[He][0],Xe[He][1]];return Rs},points:function(W){return this.vertices("v",W)},inTangents:function(W){return this.vertices("i",W)},outTangents:function(W){return this.vertices("o",W)},isClosed:function(){return this.v.c},pointOnPath:function(W,me){var ve=this.v;me!==void 0&&(ve=this.getValueAtTime(me,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(ve));for(var He=this._segmentsLength,De=He.lengths,Xe=He.totalLength*W,qe=0,Rs=De.length,Vc=0,So;qe<Rs;){if(Vc+De[qe].addedLength>Xe){var Do=qe,eh=ve.c&&qe===Rs-1?0:qe+1,Ko=(Xe-Vc)/De[qe].addedLength;So=bez.getPointInSegment(ve.v[Do],ve.v[eh],ve.o[Do],ve.i[eh],Ko,De[qe]);break}else Vc+=De[qe].addedLength;qe+=1}return So||(So=ve.c?[ve.v[0][0],ve.v[0][1]]:[ve.v[ve._length-1][0],ve.v[ve._length-1][1]]),So},vectorOnPath:function(W,me,ve){W==1?W=this.v.c:W==0&&(W=.999);var He=this.pointOnPath(W,me),De=this.pointOnPath(W+.001,me),Xe=De[0]-He[0],qe=De[1]-He[1],Rs=Math.sqrt(Math.pow(Xe,2)+Math.pow(qe,2));if(Rs===0)return[0,0];var Vc=ve==="tangent"?[Xe/Rs,qe/Rs]:[-qe/Rs,Xe/Rs];return Vc},tangentOnPath:function(W,me){return this.vectorOnPath(W,me,"tangent")},normalOnPath:function(W,me){return this.vectorOnPath(W,me,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([g],d),extendPrototype([g],m),m.prototype.getValueAtTime=c,m.prototype.initiateExpression=ExpressionManager.initiateExpression;var A=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(P,W,me,ve,He){var De=A(P,W,me,ve,He);return De.propertyIndex=W.ix,De.lock=!1,me===3?expressionHelpers.searchExpressions(P,W.pt,De):me===4&&expressionHelpers.searchExpressions(P,W.ks,De),De.k&&P.addDynamicProperty(De),De}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function t(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(e,a){var s=this.calculateExpression(a);if(e.t!==s){var o={};return this.copyData(o,e),o.t=s.toString(),o.__complete=!1,o}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),a=this.searchExpressions();return this.kf=e||a,this.kf},TextProperty.prototype.searchExpressions=t}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function t(e,a){var s=createNS("feMerge");s.setAttribute("result",e);var o,l;for(l=0;l<a.length;l+=1)o=createNS("feMergeNode"),o.setAttribute("in",a[l]),s.appendChild(o),s.appendChild(o);return s}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(t,e,a,s,o){this.filterManager=e;var l=createNS("feColorMatrix");l.setAttribute("type","matrix"),l.setAttribute("color-interpolation-filters","linearRGB"),l.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=l,l.setAttribute("result",s+"_tint_1"),t.appendChild(l),l=createNS("feColorMatrix"),l.setAttribute("type","matrix"),l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),l.setAttribute("result",s+"_tint_2"),t.appendChild(l),this.matrixFilter=l;var u=this.createMergeNode(s,[o,s+"_tint_1",s+"_tint_2"]);t.appendChild(u)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,a=this.filterManager.effectElements[1].p.v,s=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+s+" 0"),this.matrixFilter.setAttribute("values",a[0]-e[0]+" 0 0 0 "+e[0]+" "+(a[1]-e[1])+" 0 0 0 "+e[1]+" "+(a[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}};function SVGFillFilter(t,e,a,s){this.filterManager=e;var o=createNS("feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),o.setAttribute("result",s),t.appendChild(o),this.matrixFilter=o}SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,a=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+a+" 0")}};function SVGStrokeEffect(t,e,a){this.initialized=!1,this.filterManager=e,this.elem=a,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var t=this.elem.layerElement.children||this.elem.layerElement.childNodes,e,a,s,o;for(this.filterManager.effectElements[1].p.v===1?(o=this.elem.maskManager.masksProperties.length,s=0):(s=this.filterManager.effectElements[0].p.v-1,o=s+1),a=createNS("g"),a.setAttribute("fill","none"),a.setAttribute("stroke-linecap","round"),a.setAttribute("stroke-dashoffset",1),s;s<o;s+=1)e=createNS("path"),a.appendChild(e),this.paths.push({p:e,m:s});if(this.filterManager.effectElements[10].p.v===3){var l=createNS("mask"),u=createElementID();l.setAttribute("id",u),l.setAttribute("mask-type","alpha"),l.appendChild(a),this.elem.globalData.defs.appendChild(l);var c=createNS("g");for(c.setAttribute("mask","url("+getLocationHref()+"#"+u+")");t[0];)c.appendChild(t[0]);this.elem.layerElement.appendChild(c),this.masker=l,a.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(t=this.elem.layerElement.children||this.elem.layerElement.childNodes;t.length;)this.elem.layerElement.removeChild(t[0]);this.elem.layerElement.appendChild(a),this.elem.layerElement.removeAttribute("mask"),a.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=a},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,a=this.paths.length,s,o;for(e=0;e<a;e+=1)if(this.paths[e].m!==-1&&(s=this.elem.maskManager.viewData[this.paths[e].m],o=this.paths[e].p,(t||this.filterManager._mdf||s.prop._mdf)&&o.setAttribute("d",s.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||s.prop._mdf)){var l;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var u=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,c=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,d=o.getTotalLength();l="0 0 0 "+d*u+" ";var m=d*(c-u),g=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,A=Math.floor(m/g),P;for(P=0;P<A;P+=1)l+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";l+="0 "+d*10+" 0 0"}else l="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;o.setAttribute("stroke-dasharray",l)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(t||this.filterManager.effectElements[3].p._mdf)){var W=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(W[0]*255)+","+bmFloor(W[1]*255)+","+bmFloor(W[2]*255)+")")}};function SVGTritoneFilter(t,e,a,s){this.filterManager=e;var o=createNS("feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","linearRGB"),o.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),t.appendChild(o);var l=createNS("feComponentTransfer");l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("result",s),this.matrixFilter=l;var u=createNS("feFuncR");u.setAttribute("type","table"),l.appendChild(u),this.feFuncR=u;var c=createNS("feFuncG");c.setAttribute("type","table"),l.appendChild(c),this.feFuncG=c;var d=createNS("feFuncB");d.setAttribute("type","table"),l.appendChild(d),this.feFuncB=d,t.appendChild(l)}SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,a=this.filterManager.effectElements[1].p.v,s=this.filterManager.effectElements[2].p.v,o=s[0]+" "+a[0]+" "+e[0],l=s[1]+" "+a[1]+" "+e[1],u=s[2]+" "+a[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",o),this.feFuncG.setAttribute("tableValues",l),this.feFuncB.setAttribute("tableValues",u)}};function SVGProLevelsFilter(t,e,a,s){this.filterManager=e;var o=this.filterManager.effectElements,l=createNS("feComponentTransfer");(o[10].p.k||o[10].p.v!==0||o[11].p.k||o[11].p.v!==1||o[12].p.k||o[12].p.v!==1||o[13].p.k||o[13].p.v!==0||o[14].p.k||o[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",l)),(o[17].p.k||o[17].p.v!==0||o[18].p.k||o[18].p.v!==1||o[19].p.k||o[19].p.v!==1||o[20].p.k||o[20].p.v!==0||o[21].p.k||o[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",l)),(o[24].p.k||o[24].p.v!==0||o[25].p.k||o[25].p.v!==1||o[26].p.k||o[26].p.v!==1||o[27].p.k||o[27].p.v!==0||o[28].p.k||o[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",l)),(o[31].p.k||o[31].p.v!==0||o[32].p.k||o[32].p.v!==1||o[33].p.k||o[33].p.v!==1||o[34].p.k||o[34].p.v!==0||o[35].p.k||o[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",l)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(l.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(l)),(o[3].p.k||o[3].p.v!==0||o[4].p.k||o[4].p.v!==1||o[5].p.k||o[5].p.v!==1||o[6].p.k||o[6].p.v!==0||o[7].p.k||o[7].p.v!==1)&&(l=createNS("feComponentTransfer"),l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("result",s),t.appendChild(l),this.feFuncRComposed=this.createFeFunc("feFuncR",l),this.feFuncGComposed=this.createFeFunc("feFuncG",l),this.feFuncBComposed=this.createFeFunc("feFuncB",l))}SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var a=createNS(t);return a.setAttribute("type","table"),e.appendChild(a),a},SVGProLevelsFilter.prototype.getTableValue=function(t,e,a,s,o){for(var l=0,u=256,c,d=Math.min(t,e),m=Math.max(t,e),g=Array.call(null,{length:u}),A,P=0,W=o-s,me=e-t;l<=256;)c=l/256,c<=d?A=me<0?o:s:c>=m?A=me<0?s:o:A=s+W*Math.pow((c-t)/me,1/a),g[P]=A,P+=1,l+=256/(u-1);return g.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,a=this.filterManager.effectElements;this.feFuncRComposed&&(t||a[3].p._mdf||a[4].p._mdf||a[5].p._mdf||a[6].p._mdf||a[7].p._mdf)&&(e=this.getTableValue(a[3].p.v,a[4].p.v,a[5].p.v,a[6].p.v,a[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||a[10].p._mdf||a[11].p._mdf||a[12].p._mdf||a[13].p._mdf||a[14].p._mdf)&&(e=this.getTableValue(a[10].p.v,a[11].p.v,a[12].p.v,a[13].p.v,a[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||a[17].p._mdf||a[18].p._mdf||a[19].p._mdf||a[20].p._mdf||a[21].p._mdf)&&(e=this.getTableValue(a[17].p.v,a[18].p.v,a[19].p.v,a[20].p.v,a[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||a[24].p._mdf||a[25].p._mdf||a[26].p._mdf||a[27].p._mdf||a[28].p._mdf)&&(e=this.getTableValue(a[24].p.v,a[25].p.v,a[26].p.v,a[27].p.v,a[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||a[31].p._mdf||a[32].p._mdf||a[33].p._mdf||a[34].p._mdf||a[35].p._mdf)&&(e=this.getTableValue(a[31].p.v,a[32].p.v,a[33].p.v,a[34].p.v,a[35].p.v),this.feFuncA.setAttribute("tableValues",e))}};function SVGDropShadowEffect(t,e,a,s,o){var l=e.container.globalData.renderConfig.filterSize,u=e.data.fs||l;t.setAttribute("x",u.x||l.x),t.setAttribute("y",u.y||l.y),t.setAttribute("width",u.width||l.width),t.setAttribute("height",u.height||l.height),this.filterManager=e;var c=createNS("feGaussianBlur");c.setAttribute("in","SourceAlpha"),c.setAttribute("result",s+"_drop_shadow_1"),c.setAttribute("stdDeviation","0"),this.feGaussianBlur=c,t.appendChild(c);var d=createNS("feOffset");d.setAttribute("dx","25"),d.setAttribute("dy","0"),d.setAttribute("in",s+"_drop_shadow_1"),d.setAttribute("result",s+"_drop_shadow_2"),this.feOffset=d,t.appendChild(d);var m=createNS("feFlood");m.setAttribute("flood-color","#00ff00"),m.setAttribute("flood-opacity","1"),m.setAttribute("result",s+"_drop_shadow_3"),this.feFlood=m,t.appendChild(m);var g=createNS("feComposite");g.setAttribute("in",s+"_drop_shadow_3"),g.setAttribute("in2",s+"_drop_shadow_2"),g.setAttribute("operator","in"),g.setAttribute("result",s+"_drop_shadow_4"),t.appendChild(g);var A=this.createMergeNode(s,[s+"_drop_shadow_4",o]);t.appendChild(A)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(e[0]*255),Math.round(e[1]*255),Math.round(e[2]*255)))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var a=this.filterManager.effectElements[3].p.v,s=(this.filterManager.effectElements[2].p.v-90)*degToRads,o=a*Math.cos(s),l=a*Math.sin(s);this.feOffset.setAttribute("dx",o),this.feOffset.setAttribute("dy",l)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,a){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=a,a.matteElement=createNS("g"),a.matteElement.appendChild(a.layerElement),a.matteElement.appendChild(a.transformedElement),a.baseElement=a.matteElement}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,a=_svgMatteSymbols.length;e<a;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var a=t.layerElement.parentNode;if(a){for(var s=a.children,o=0,l=s.length;o<l&&s[o]!==t.layerElement;)o+=1;var u;o<=l-2&&(u=s[o+1]);var c=createNS("use");c.setAttribute("href","#"+e),u?a.insertBefore(c,u):a.appendChild(c)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var a=createElementID(),s=createNS("mask");s.setAttribute("id",e.layerId),s.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var o=t.globalData.defs;o.appendChild(s);var l=createNS("symbol");l.setAttribute("id",a),this.replaceInParent(e,a),l.appendChild(e.layerElement),o.appendChild(l);var u=createNS("use");u.setAttribute("href","#"+a),s.appendChild(u),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,a=0,s=e.length;a<s;)e[a]&&e[a].data.ind===t&&this.setElementAsMask(this.elem,e[a]),a+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(t,e,a,s){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var o=createNS("feGaussianBlur");o.setAttribute("result",s),t.appendChild(o),this.feGaussianBlur=o}SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3,a=this.filterManager.effectElements[0].p.v*e,s=this.filterManager.effectElements[1].p.v,o=s==3?0:a,l=s==2?0:a;this.feGaussianBlur.setAttribute("stdDeviation",o+" "+l);var u=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",u)}};function TransformEffect(){}TransformEffect.prototype.init=function(t){this.effectsManager=t,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(t){if(this._opMdf=!1,this._mdf=!1,t||this.effectsManager._mdf){var e=this.effectsManager.effectElements,a=e[0].p.v,s=e[1].p.v,o=e[2].p.v===1,l=e[3].p.v,u=o?l:e[4].p.v,c=e[5].p.v,d=e[6].p.v,m=e[7].p.v;this.matrix.reset(),this.matrix.translate(-a[0],-a[1],a[2]),this.matrix.scale(u*.01,l*.01,1),this.matrix.rotate(-m*degToRads),this.matrix.skewFromAxis(-c*degToRads,(d+90)*degToRads),this.matrix.translate(s[0],s[1],0),this._mdf=!0,this.opacity!==e[8].p.v&&(this.opacity=e[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(t,e){this.init(e)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(t){this.init(t)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})}(lottie$2,lottie$2.exports)),lottie$2.exports}var lottieExports=requireLottie();const lottie=getDefaultExportFromCjs(lottieExports);function _arrayLikeToArray(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,s=Array(e);a<e;a++)s[a]=t[a];return s}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _defineProperty$2(t,e,a){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _iterableToArrayLimit(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,o,l,u,c=[],d=!0,m=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(d=(s=l.call(a)).done)&&(c.push(s.value),c.length!==e);d=!0);}catch(g){m=!0,o=g}finally{try{if(!d&&a.return!=null&&(u=a.return(),Object(u)!==u))return}finally{if(m)throw o}}return c}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,s)}return a}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(s){_defineProperty$2(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function _objectWithoutProperties(t,e){if(t==null)return{};var a,s,o=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)a=l[s],e.includes(a)||{}.propertyIsEnumerable.call(t,a)&&(o[a]=t[a])}return o}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var a={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.includes(s))continue;a[s]=t[s]}return a}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _toPrimitive(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return typeof e=="symbol"?e:e+""}function _unsupportedIterableToArray(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray(t,e);var a={}.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function t(e,a){var s=e.animationData,o=e.loop,l=e.autoplay,u=e.initialSegment,c=e.onComplete,d=e.onLoopComplete,m=e.onEnterFrame,g=e.onSegmentStart,A=e.onConfigReady,P=e.onDataReady,W=e.onDataFailed,me=e.onLoadedImages,ve=e.onDOMLoaded,He=e.onDestroy;e.lottieRef,e.renderer,e.name,e.assetsPath,e.rendererSettings;var De=_objectWithoutProperties(e,_excluded$1),Xe=reactExports.useState(!1),qe=_slicedToArray(Xe,2),Rs=qe[0],Vc=qe[1],So=reactExports.useRef(),Do=reactExports.useRef(null),eh=function(){var a1;(a1=So.current)===null||a1===void 0||a1.play()},Ko=function(){var a1;(a1=So.current)===null||a1===void 0||a1.stop()},Ge=function(){var a1;(a1=So.current)===null||a1===void 0||a1.pause()},An=function(a1){var s1;(s1=So.current)===null||s1===void 0||s1.setSpeed(a1)},wt=function(a1,s1){var E1;(E1=So.current)===null||E1===void 0||E1.goToAndPlay(a1,s1)},Bs=function(a1,s1){var E1;(E1=So.current)===null||E1===void 0||E1.goToAndStop(a1,s1)},yh=function(a1){var s1;(s1=So.current)===null||s1===void 0||s1.setDirection(a1)},df=function(a1,s1){var E1;(E1=So.current)===null||E1===void 0||E1.playSegments(a1,s1)},Fc=function(a1){var s1;(s1=So.current)===null||s1===void 0||s1.setSubframe(a1)},_h=function(a1){var s1;return(s1=So.current)===null||s1===void 0?void 0:s1.getDuration(a1)},qc=function(){var a1;(a1=So.current)===null||a1===void 0||a1.destroy(),So.current=void 0},Mh=function(){var a1=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s1;if(Do.current){(s1=So.current)===null||s1===void 0||s1.destroy();var E1=_objectSpread2(_objectSpread2(_objectSpread2({},e),a1),{},{container:Do.current});return So.current=lottie.loadAnimation(E1),Vc(!!So.current),function(){var T1;(T1=So.current)===null||T1===void 0||T1.destroy(),So.current=void 0}}};reactExports.useEffect(function(){var mf=Mh();return function(){return mf?.()}},[s,o]),reactExports.useEffect(function(){So.current&&(So.current.autoplay=!!l)},[l]),reactExports.useEffect(function(){if(So.current){if(!u){So.current.resetSegments(!0);return}!Array.isArray(u)||!u.length||((So.current.currentRawFrame<u[0]||So.current.currentRawFrame>u[1])&&(So.current.currentRawFrame=u[0]),So.current.setSegment(u[0],u[1]))}},[u]),reactExports.useEffect(function(){var mf=[{name:"complete",handler:c},{name:"loopComplete",handler:d},{name:"enterFrame",handler:m},{name:"segmentStart",handler:g},{name:"config_ready",handler:A},{name:"data_ready",handler:P},{name:"data_failed",handler:W},{name:"loaded_images",handler:me},{name:"DOMLoaded",handler:ve},{name:"destroy",handler:He}],a1=mf.filter(function(E1){return E1.handler!=null});if(a1.length){var s1=a1.map(function(E1){var T1;return(T1=So.current)===null||T1===void 0||T1.addEventListener(E1.name,E1.handler),function(){var z1;(z1=So.current)===null||z1===void 0||z1.removeEventListener(E1.name,E1.handler)}});return function(){s1.forEach(function(E1){return E1()})}}},[c,d,m,g,A,P,W,me,ve,He]);var cf=React.createElement("div",_objectSpread2({style:a,ref:Do},De));return{View:cf,play:eh,stop:Ko,pause:Ge,setSpeed:An,goToAndStop:Bs,goToAndPlay:wt,setDirection:yh,playSegments:df,setSubframe:Fc,getDuration:_h,destroy:qc,animationContainerRef:Do,animationLoaded:Rs,animationItem:So.current}};function getContainerVisibility(t){var e=t.getBoundingClientRect(),a=e.top,s=e.height,o=window.innerHeight-a,l=window.innerHeight+s;return o/l}function getContainerCursorPosition(t,e,a){var s=t.getBoundingClientRect(),o=s.top,l=s.left,u=s.width,c=s.height,d=(e-l)/u,m=(a-o)/c;return{x:d,y:m}}var useInitInteractivity=function t(e){var a=e.wrapperRef,s=e.animationItem,o=e.mode,l=e.actions;reactExports.useEffect(function(){var u=a.current;if(!(!u||!s||!l.length)){s.stop();var c=function(){var g=null,A=function(){var W=getContainerVisibility(u),me=l.find(function(He){var De=He.visibility;return De&&W>=De[0]&&W<=De[1]});if(me){if(me.type==="seek"&&me.visibility&&me.frames.length===2){var ve=me.frames[0]+Math.ceil((W-me.visibility[0])/(me.visibility[1]-me.visibility[0])*me.frames[1]);//! goToAndStop must be relative to the start of the current segment
s.goToAndStop(ve-s.firstFrame-1,!0)}me.type==="loop"&&(g===null||g!==me.frames||s.isPaused)&&(s.playSegments(me.frames,!0),g=me.frames),me.type==="play"&&s.isPaused&&(s.resetSegments(!0),s.play()),me.type==="stop"&&s.goToAndStop(me.frames[0]-s.firstFrame-1,!0)}};return document.addEventListener("scroll",A),function(){document.removeEventListener("scroll",A)}},d=function(){var g=function(me,ve){var He=me,De=ve;if(He!==-1&&De!==-1){var Xe=getContainerCursorPosition(u,He,De);He=Xe.x,De=Xe.y}var qe=l.find(function(So){var Do=So.position;return Do&&Array.isArray(Do.x)&&Array.isArray(Do.y)?He>=Do.x[0]&&He<=Do.x[1]&&De>=Do.y[0]&&De<=Do.y[1]:Do&&!Number.isNaN(Do.x)&&!Number.isNaN(Do.y)?He===Do.x&&De===Do.y:!1});if(qe){if(qe.type==="seek"&&qe.position&&Array.isArray(qe.position.x)&&Array.isArray(qe.position.y)&&qe.frames.length===2){var Rs=(He-qe.position.x[0])/(qe.position.x[1]-qe.position.x[0]),Vc=(De-qe.position.y[0])/(qe.position.y[1]-qe.position.y[0]);s.playSegments(qe.frames,!0),s.goToAndStop(Math.ceil((Rs+Vc)/2*(qe.frames[1]-qe.frames[0])),!0)}qe.type==="loop"&&s.playSegments(qe.frames,!0),qe.type==="play"&&(s.isPaused&&s.resetSegments(!1),s.playSegments(qe.frames)),qe.type==="stop"&&s.goToAndStop(qe.frames[0],!0)}},A=function(me){g(me.clientX,me.clientY)},P=function(){g(-1,-1)};return u.addEventListener("mousemove",A),u.addEventListener("mouseout",P),function(){u.removeEventListener("mousemove",A),u.removeEventListener("mouseout",P)}};switch(o){case"scroll":return c();case"cursor":return d()}}},[o,s])},useLottieInteractivity=function t(e){var a=e.actions,s=e.mode,o=e.lottieObj,l=o.animationItem,u=o.View,c=o.animationContainerRef;return useInitInteractivity({actions:a,animationItem:l,mode:s,wrapperRef:c}),u},_excluded=["style","interactivity"],Lottie=function t(e){var a,s,o,l=e.style,u=e.interactivity,c=_objectWithoutProperties(e,_excluded),d=useLottie(c,l),m=d.View,g=d.play,A=d.stop,P=d.pause,W=d.setSpeed,me=d.goToAndStop,ve=d.goToAndPlay,He=d.setDirection,De=d.playSegments,Xe=d.setSubframe,qe=d.getDuration,Rs=d.destroy,Vc=d.animationContainerRef,So=d.animationLoaded,Do=d.animationItem;return reactExports.useEffect(function(){e.lottieRef&&(e.lottieRef.current={play:g,stop:A,pause:P,setSpeed:W,goToAndPlay:ve,goToAndStop:me,setDirection:He,playSegments:De,setSubframe:Xe,getDuration:qe,destroy:Rs,animationContainerRef:Vc,animationLoaded:So,animationItem:Do})},[(a=e.lottieRef)===null||a===void 0?void 0:a.current]),useLottieInteractivity({lottieObj:{View:m,play:g,stop:A,pause:P,setSpeed:W,goToAndStop:me,goToAndPlay:ve,setDirection:He,playSegments:De,setSubframe:Xe,getDuration:qe,destroy:Rs,animationContainerRef:Vc,animationLoaded:So,animationItem:Do},actions:(s=u?.actions)!==null&&s!==void 0?s:[],mode:(o=u?.mode)!==null&&o!==void 0?o:"scroll"})};const v$1="5.5.5",fr$1=25,ip$1=0,op$2=79,w=300,h=150,nm$1="Loading-2",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"icon 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:39,s:[-90]},{t:79,s:[270]}],ix:10},p:{a:0,k:[150,75,0],ix:2},a:{a:0,k:[53,53,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[28,-15.464],[15.464,28],[-28,15.464],[-15.464,-28]],o:[[28,15.464],[-15.464,28],[-28,-15.464],[15.464,-28]],v:[[28,0],[0,28],[-28,0],[0,-28]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1,_render:!0},{ty:"st",c:{a:0,k:[.349,.3529,.3647,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:10,ix:5},lc:2,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1,_render:!0},{ty:"tr",p:{a:0,k:[53,53],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform",_render:!0}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1,_render:!0},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:51,s:[0]},{t:79,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:39,s:[0]},{t:64,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1,_render:!0}],ip:39,op:79,st:39,bm:0,completed:!0},{ddd:0,ind:2,ty:4,nm:"icon",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[-90]},{t:40,s:[270]}],ix:10},p:{a:0,k:[150,75,0],ix:2},a:{a:0,k:[53,53,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[28,-15.464],[15.464,28],[-28,15.464],[-15.464,-28]],o:[[28,15.464],[-15.464,28],[-28,-15.464],[15.464,-28]],v:[[28,0],[0,28],[-28,0],[0,-28]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1,_render:!0},{ty:"st",c:{a:0,k:[.349,.3529,.3647,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:10,ix:5},lc:2,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1,_render:!0},{ty:"tr",p:{a:0,k:[53,53],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform",_render:!0}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1,_render:!0},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:12,s:[0]},{t:40,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:25,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1,_render:!0}],ip:0,op:40,st:0,bm:0,completed:!0}],markers=[],__complete=!0,loadingAnim={v:v$1,fr:fr$1,ip:ip$1,op:op$2,w,h,nm:nm$1,ddd,assets,layers,markers,__complete};class SourceLocation{constructor(e,a,s){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=a,this.end=s}static range(e,a){return a?!e||!e.loc||!a.loc||e.loc.lexer!==a.loc.lexer?null:new SourceLocation(e.loc.lexer,e.loc.start,a.loc.end):e&&e.loc}}class Token{constructor(e,a){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=a}range(e,a){return new Token(a,SourceLocation.range(this,e))}}class ParseError{constructor(e,a){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var s="KaTeX parse error: "+e,o,l,u=a&&a.loc;if(u&&u.start<=u.end){var c=u.lexer.input;o=u.start,l=u.end,o===c.length?s+=" at end of input: ":s+=" at position "+(o+1)+": ";var d=c.slice(o,l).replace(/[^]/g,"$&"),m;o>15?m=""+c.slice(o-15,o):m=c.slice(0,o);var g;l+15<c.length?g=c.slice(l,l+15)+"":g=c.slice(l),s+=m+d+g}var A=new Error(s);return A.name="ParseError",A.__proto__=ParseError.prototype,A.position=o,o!=null&&l!=null&&(A.length=l-o),A.rawMessage=e,A}}ParseError.prototype.__proto__=Error.prototype;var contains=function t(e,a){return e.indexOf(a)!==-1},deflt=function t(e,a){return e===void 0?a:e},uppercase=/([A-Z])/g,hyphenate=function t(e){return e.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape$1(t){return String(t).replace(ESCAPE_REGEX,e=>ESCAPE_LOOKUP[e])}var getBaseElem=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},isCharacterBox=function t(e){var a=getBaseElem(e);return a.type==="mathord"||a.type==="textord"||a.type==="atom"},assert$1=function t(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},protocolFromUrl=function t(e){var a=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return a?a[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(a[1])?null:a[1].toLowerCase():"_relative"},utils={contains,deflt,escape:escape$1,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl},SETTINGS_SCHEMA={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function getDefaultValue(t){if(t.default)return t.default;var e=t.type,a=Array.isArray(e)?e[0]:e;if(typeof a!="string")return a.enum[0];switch(a){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}let Settings$1=class{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var a in SETTINGS_SCHEMA)if(SETTINGS_SCHEMA.hasOwnProperty(a)){var s=SETTINGS_SCHEMA[a];this[a]=e[a]!==void 0?s.processor?s.processor(e[a]):e[a]:getDefaultValue(s)}}reportNonstrict(e,a,s){var o=this.strict;if(typeof o=="function"&&(o=o(e,a,s)),!(!o||o==="ignore")){if(o===!0||o==="error")throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': "+(a+" ["+e+"]"),s);o==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(a+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+o+"': "+a+" ["+e+"]"))}}useStrictBehavior(e,a,s){var o=this.strict;if(typeof o=="function")try{o=o(e,a,s)}catch{o="error"}return!o||o==="ignore"?!1:o===!0||o==="error"?!0:o==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(a+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+o+"': "+a+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var a=utils.protocolFromUrl(e.url);if(a==null)return!1;e.protocol=a}var s=typeof this.trust=="function"?this.trust(e):this.trust;return!!s}};class Style{constructor(e,a,s){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=a,this.cramped=s}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D=0,Dc$1=1,T$1=2,Tc$1=3,S$1=4,Sc$1=5,SS=6,SSc=7,styles=[new Style(D,0,!1),new Style(Dc$1,0,!0),new Style(T$1,1,!1),new Style(Tc$1,1,!0),new Style(S$1,2,!1),new Style(Sc$1,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S$1,Sc$1,S$1,Sc$1,SS,SSc,SS,SSc],sub=[Sc$1,Sc$1,Sc$1,Sc$1,SSc,SSc,SSc,SSc],fracNum=[T$1,Tc$1,S$1,Sc$1,SS,SSc,SS,SSc],fracDen=[Tc$1,Tc$1,Sc$1,Sc$1,SSc,SSc,SSc,SSc],cramp=[Dc$1,Dc$1,Tc$1,Tc$1,Sc$1,Sc$1,SSc,SSc],text$1=[D,Dc$1,T$1,Tc$1,T$1,Tc$1,T$1,Tc$1],Style$1={DISPLAY:styles[D],TEXT:styles[T$1],SCRIPT:styles[S$1],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(t){for(var e=0;e<scriptData.length;e++)for(var a=scriptData[e],s=0;s<a.blocks.length;s++){var o=a.blocks[s];if(t>=o[0]&&t<=o[1])return a.name}return null}var allBlocks=[];scriptData.forEach(t=>t.blocks.forEach(e=>allBlocks.push(...e)));function supportedCodepoint(t){for(var e=0;e<allBlocks.length;e+=2)if(t>=allBlocks[e]&&t<=allBlocks[e+1])return!0;return!1}var hLinePad=80,sqrtMain=function t(e,a){return"M95,"+(622+e+a)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+a+"h400000v"+(40+e)+"h-400000z"},sqrtSize1=function t(e,a){return"M263,"+(601+e+a)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+a+"h400000v"+(40+e)+"h-400000z"},sqrtSize2=function t(e,a){return"M983 "+(10+e+a)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+a+"h400000v"+(40+e)+"h-400000z"},sqrtSize3=function t(e,a){return"M424,"+(2398+e+a)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+a+`
h400000v`+(40+e)+"h-400000z"},sqrtSize4=function t(e,a){return"M473,"+(2713+e+a)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+a+"h400000v"+(40+e)+"H1017.7z"},phasePath=function t(e){var a=e/2;return"M400000 "+e+" H0 L"+a+" 0 l65 45 L145 "+(e-80)+" H400000z"},sqrtTall=function t(e,a,s){var o=s-54-a-e;return"M702 "+(e+a)+"H400000"+(40+e)+`
H742v`+o+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+a+"H400000v"+(40+e)+"H742z"},sqrtPath=function t(e,a,s){a=1e3*a;var o="";switch(e){case"sqrtMain":o=sqrtMain(a,hLinePad);break;case"sqrtSize1":o=sqrtSize1(a,hLinePad);break;case"sqrtSize2":o=sqrtSize2(a,hLinePad);break;case"sqrtSize3":o=sqrtSize3(a,hLinePad);break;case"sqrtSize4":o=sqrtSize4(a,hLinePad);break;case"sqrtTall":o=sqrtTall(a,hLinePad,s)}return o},innerPath=function t(e,a){switch(e){case"":return"M291 0 H417 V"+a+" H291z M291 0 H417 V"+a+" H291z";case"":return"M145 0 H188 V"+a+" H145z M145 0 H188 V"+a+" H145z";case"":return"M145 0 H188 V"+a+" H145z M145 0 H188 V"+a+" H145z"+("M367 0 H410 V"+a+" H367z M367 0 H410 V"+a+" H367z");case"":return"M457 0 H583 V"+a+" H457z M457 0 H583 V"+a+" H457z";case"":return"M319 0 H403 V"+a+" H319z M319 0 H403 V"+a+" H319z";case"":return"M263 0 H347 V"+a+" H263z M263 0 H347 V"+a+" H263z";case"":return"M384 0 H504 V"+a+" H384z M384 0 H504 V"+a+" H384z";case"":return"M312 0 H355 V"+a+" H312z M312 0 H355 V"+a+" H312z";case"":return"M257 0 H300 V"+a+" H257z M257 0 H300 V"+a+" H257z"+("M478 0 H521 V"+a+" H478z M478 0 H521 V"+a+" H478z");default:return""}},path={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function t(e,a){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+a+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+a+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+a+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+a+" v1759 h84z";case"vert":return"M145 15 v585 v"+a+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-a+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+a+" v585 h43z";case"doublevert":return"M145 15 v585 v"+a+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-a+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+a+` v585 h43z
M367 15 v585 v`+a+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-a+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+a+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+a+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+a+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+a+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+a+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+a+` v602 h84z
M403 1759 V0 H319 V1759 v`+a+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+a+` v602 h84z
M347 1759 V0 h-84 V1759 v`+a+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(a+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(a+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(a+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(a+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class DocumentFragment{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return utils.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),a=0;a<this.children.length;a++)e.appendChild(this.children[a].toNode());return e}toMarkup(){for(var e="",a=0;a<this.children.length;a++)e+=this.children[a].toMarkup();return e}toText(){var e=a=>a.toText();return this.children.map(e).join("")}}var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sigmasAndXis={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},extraCharacterMap={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function setFontMetrics(t,e){fontMetricsData[t]=e}function getCharacterMetrics(t,e,a){if(!fontMetricsData[e])throw new Error("Font metrics not found for font: "+e+".");var s=t.charCodeAt(0),o=fontMetricsData[e][s];if(!o&&t[0]in extraCharacterMap&&(s=extraCharacterMap[t[0]].charCodeAt(0),o=fontMetricsData[e][s]),!o&&a==="text"&&supportedCodepoint(s)&&(o=fontMetricsData[e][77]),o)return{depth:o[0],height:o[1],italic:o[2],skew:o[3],width:o[4]}}var fontMetricsBySizeIndex={};function getGlobalMetrics(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!fontMetricsBySizeIndex[e]){var a=fontMetricsBySizeIndex[e]={cssEmPerMu:sigmasAndXis.quad[e]/18};for(var s in sigmasAndXis)sigmasAndXis.hasOwnProperty(s)&&(a[s]=sigmasAndXis[s][e])}return fontMetricsBySizeIndex[e]}var sizeStyleMap=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],sizeMultipliers=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],sizeAtStyle=function t(e,a){return a.size<2?e:sizeStyleMap[e-1][a.size-1]};class Options{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Options.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=sizeMultipliers[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var a={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);return new Options(a)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:sizeAtStyle(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:sizeMultipliers[e-1]})}havingBaseStyle(e){e=e||this.style.text();var a=sizeAtStyle(Options.BASESIZE,e);return this.size===a&&this.textSize===Options.BASESIZE&&this.style===e?this:this.extend({style:e,size:a})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Options.BASESIZE?["sizing","reset-size"+this.size,"size"+Options.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=getGlobalMetrics(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Options.BASESIZE=6;var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function t(e){return typeof e!="string"&&(e=e.unit),e in ptPerUnit||e in relativeUnit||e==="ex"},calculateSize=function t(e,a){var s;if(e.unit in ptPerUnit)s=ptPerUnit[e.unit]/a.fontMetrics().ptPerEm/a.sizeMultiplier;else if(e.unit==="mu")s=a.fontMetrics().cssEmPerMu;else{var o;if(a.style.isTight()?o=a.havingStyle(a.style.text()):o=a,e.unit==="ex")s=o.fontMetrics().xHeight;else if(e.unit==="em")s=o.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+e.unit+"'");o!==a&&(s*=o.sizeMultiplier/a.sizeMultiplier)}return Math.min(e.number*s,a.maxSize)},makeEm=function t(e){return+e.toFixed(4)+"em"},createClass=function t(e){return e.filter(a=>a).join(" ")},initNode=function t(e,a,s){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=s||{},a){a.style.isTight()&&this.classes.push("mtight");var o=a.getColor();o&&(this.style.color=o)}},toNode=function t(e){var a=document.createElement(e);a.className=createClass(this.classes);for(var s in this.style)this.style.hasOwnProperty(s)&&(a.style[s]=this.style[s]);for(var o in this.attributes)this.attributes.hasOwnProperty(o)&&a.setAttribute(o,this.attributes[o]);for(var l=0;l<this.children.length;l++)a.appendChild(this.children[l].toNode());return a},invalidAttributeNameRegex=/[\s"'>/=\x00-\x1f]/,toMarkup=function t(e){var a="<"+e;this.classes.length&&(a+=' class="'+utils.escape(createClass(this.classes))+'"');var s="";for(var o in this.style)this.style.hasOwnProperty(o)&&(s+=utils.hyphenate(o)+":"+this.style[o]+";");s&&(a+=' style="'+utils.escape(s)+'"');for(var l in this.attributes)if(this.attributes.hasOwnProperty(l)){if(invalidAttributeNameRegex.test(l))throw new ParseError("Invalid attribute name '"+l+"'");a+=" "+l+'="'+utils.escape(this.attributes[l])+'"'}a+=">";for(var u=0;u<this.children.length;u++)a+=this.children[u].toMarkup();return a+="</"+e+">",a};class Span{constructor(e,a,s,o){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,e,s,o),this.children=a||[]}setAttribute(e,a){this.attributes[e]=a}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(e,a,s,o){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,a,o),this.children=s||[],this.setAttribute("href",e)}setAttribute(e,a){this.attributes[e]=a}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(e,a,s){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=a,this.src=e,this.classes=["mord"],this.style=s}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var a in this.style)this.style.hasOwnProperty(a)&&(e.style[a]=this.style[a]);return e}toMarkup(){var e='<img src="'+utils.escape(this.src)+'"'+(' alt="'+utils.escape(this.alt)+'"'),a="";for(var s in this.style)this.style.hasOwnProperty(s)&&(a+=utils.hyphenate(s)+":"+this.style[s]+";");return a&&(e+=' style="'+utils.escape(a)+'"'),e+="'/>",e}}var iCombinations={:"",:"",:"",:""};class SymbolNode{constructor(e,a,s,o,l,u,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=a||0,this.depth=s||0,this.italic=o||0,this.skew=l||0,this.width=u||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var m=scriptFromCodepoint(this.text.charCodeAt(0));m&&this.classes.push(m+"_fallback"),/[]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),a=null;this.italic>0&&(a=document.createElement("span"),a.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(a=a||document.createElement("span"),a.className=createClass(this.classes));for(var s in this.style)this.style.hasOwnProperty(s)&&(a=a||document.createElement("span"),a.style[s]=this.style[s]);return a?(a.appendChild(e),a):e}toMarkup(){var e=!1,a="<span";this.classes.length&&(e=!0,a+=' class="',a+=utils.escape(createClass(this.classes)),a+='"');var s="";this.italic>0&&(s+="margin-right:"+this.italic+"em;");for(var o in this.style)this.style.hasOwnProperty(o)&&(s+=utils.hyphenate(o)+":"+this.style[o]+";");s&&(e=!0,a+=' style="'+utils.escape(s)+'"');var l=utils.escape(this.text);return e?(a+=">",a+=l,a+="</span>",a):l}}class SvgNode{constructor(e,a){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=a||{}}toNode(){var e="http://www.w3.org/2000/svg",a=document.createElementNS(e,"svg");for(var s in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,s)&&a.setAttribute(s,this.attributes[s]);for(var o=0;o<this.children.length;o++)a.appendChild(this.children[o].toNode());return a}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&(e+=" "+a+'="'+utils.escape(this.attributes[a])+'"');e+=">";for(var s=0;s<this.children.length;s++)e+=this.children[s].toMarkup();return e+="</svg>",e}}class PathNode{constructor(e,a){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=a}toNode(){var e="http://www.w3.org/2000/svg",a=document.createElementNS(e,"path");return this.alternate?a.setAttribute("d",this.alternate):a.setAttribute("d",path[this.pathName]),a}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path[this.pathName])+'"/>'}}class LineNode{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",a=document.createElementNS(e,"line");for(var s in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,s)&&a.setAttribute(s,this.attributes[s]);return a}toMarkup(){var e="<line";for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&(e+=" "+a+'="'+utils.escape(this.attributes[a])+'"');return e+="/>",e}}function assertSymbolDomNode(t){if(t instanceof SymbolNode)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function assertSpan(t){if(t instanceof Span)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var ATOMS={bin:1,close:1,inner:1,open:1,punct:1,rel:1},NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(t,e,a,s,o,l){symbols[t][o]={font:e,group:a,replace:s},l&&s&&(symbols[t][s]=symbols[t][o])}var math="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op$1="op-token",open="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math,main,rel,"","\\equiv",!0);defineSymbol(math,main,rel,"","\\prec",!0);defineSymbol(math,main,rel,"","\\succ",!0);defineSymbol(math,main,rel,"","\\sim",!0);defineSymbol(math,main,rel,"","\\perp");defineSymbol(math,main,rel,"","\\preceq",!0);defineSymbol(math,main,rel,"","\\succeq",!0);defineSymbol(math,main,rel,"","\\simeq",!0);defineSymbol(math,main,rel,"","\\mid",!0);defineSymbol(math,main,rel,"","\\ll",!0);defineSymbol(math,main,rel,"","\\gg",!0);defineSymbol(math,main,rel,"","\\asymp",!0);defineSymbol(math,main,rel,"","\\parallel");defineSymbol(math,main,rel,"","\\bowtie",!0);defineSymbol(math,main,rel,"","\\smile",!0);defineSymbol(math,main,rel,"","\\sqsubseteq",!0);defineSymbol(math,main,rel,"","\\sqsupseteq",!0);defineSymbol(math,main,rel,"","\\doteq",!0);defineSymbol(math,main,rel,"","\\frown",!0);defineSymbol(math,main,rel,"","\\ni",!0);defineSymbol(math,main,rel,"","\\propto",!0);defineSymbol(math,main,rel,"","\\vdash",!0);defineSymbol(math,main,rel,"","\\dashv",!0);defineSymbol(math,main,rel,"","\\owns");defineSymbol(math,main,punct,".","\\ldotp");defineSymbol(math,main,punct,"","\\cdotp");defineSymbol(math,main,textord,"#","\\#");defineSymbol(text,main,textord,"#","\\#");defineSymbol(math,main,textord,"&","\\&");defineSymbol(text,main,textord,"&","\\&");defineSymbol(math,main,textord,"","\\aleph",!0);defineSymbol(math,main,textord,"","\\forall",!0);defineSymbol(math,main,textord,"","\\hbar",!0);defineSymbol(math,main,textord,"","\\exists",!0);defineSymbol(math,main,textord,"","\\nabla",!0);defineSymbol(math,main,textord,"","\\flat",!0);defineSymbol(math,main,textord,"","\\ell",!0);defineSymbol(math,main,textord,"","\\natural",!0);defineSymbol(math,main,textord,"","\\clubsuit",!0);defineSymbol(math,main,textord,"","\\wp",!0);defineSymbol(math,main,textord,"","\\sharp",!0);defineSymbol(math,main,textord,"","\\diamondsuit",!0);defineSymbol(math,main,textord,"","\\Re",!0);defineSymbol(math,main,textord,"","\\heartsuit",!0);defineSymbol(math,main,textord,"","\\Im",!0);defineSymbol(math,main,textord,"","\\spadesuit",!0);defineSymbol(math,main,textord,"","\\S",!0);defineSymbol(text,main,textord,"","\\S");defineSymbol(math,main,textord,"","\\P",!0);defineSymbol(text,main,textord,"","\\P");defineSymbol(math,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\textdagger");defineSymbol(math,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\textdaggerdbl");defineSymbol(math,main,close,"","\\rmoustache",!0);defineSymbol(math,main,open,"","\\lmoustache",!0);defineSymbol(math,main,close,"","\\rgroup",!0);defineSymbol(math,main,open,"","\\lgroup",!0);defineSymbol(math,main,bin,"","\\mp",!0);defineSymbol(math,main,bin,"","\\ominus",!0);defineSymbol(math,main,bin,"","\\uplus",!0);defineSymbol(math,main,bin,"","\\sqcap",!0);defineSymbol(math,main,bin,"","\\ast");defineSymbol(math,main,bin,"","\\sqcup",!0);defineSymbol(math,main,bin,"","\\bigcirc",!0);defineSymbol(math,main,bin,"","\\bullet",!0);defineSymbol(math,main,bin,"","\\ddagger");defineSymbol(math,main,bin,"","\\wr",!0);defineSymbol(math,main,bin,"","\\amalg");defineSymbol(math,main,bin,"&","\\And");defineSymbol(math,main,rel,"","\\longleftarrow",!0);defineSymbol(math,main,rel,"","\\Leftarrow",!0);defineSymbol(math,main,rel,"","\\Longleftarrow",!0);defineSymbol(math,main,rel,"","\\longrightarrow",!0);defineSymbol(math,main,rel,"","\\Rightarrow",!0);defineSymbol(math,main,rel,"","\\Longrightarrow",!0);defineSymbol(math,main,rel,"","\\leftrightarrow",!0);defineSymbol(math,main,rel,"","\\longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\Leftrightarrow",!0);defineSymbol(math,main,rel,"","\\Longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\mapsto",!0);defineSymbol(math,main,rel,"","\\longmapsto",!0);defineSymbol(math,main,rel,"","\\nearrow",!0);defineSymbol(math,main,rel,"","\\hookleftarrow",!0);defineSymbol(math,main,rel,"","\\hookrightarrow",!0);defineSymbol(math,main,rel,"","\\searrow",!0);defineSymbol(math,main,rel,"","\\leftharpoonup",!0);defineSymbol(math,main,rel,"","\\rightharpoonup",!0);defineSymbol(math,main,rel,"","\\swarrow",!0);defineSymbol(math,main,rel,"","\\leftharpoondown",!0);defineSymbol(math,main,rel,"","\\rightharpoondown",!0);defineSymbol(math,main,rel,"","\\nwarrow",!0);defineSymbol(math,main,rel,"","\\rightleftharpoons",!0);defineSymbol(math,ams,rel,"","\\nless",!0);defineSymbol(math,ams,rel,"","\\@nleqslant");defineSymbol(math,ams,rel,"","\\@nleqq");defineSymbol(math,ams,rel,"","\\lneq",!0);defineSymbol(math,ams,rel,"","\\lneqq",!0);defineSymbol(math,ams,rel,"","\\@lvertneqq");defineSymbol(math,ams,rel,"","\\lnsim",!0);defineSymbol(math,ams,rel,"","\\lnapprox",!0);defineSymbol(math,ams,rel,"","\\nprec",!0);defineSymbol(math,ams,rel,"","\\npreceq",!0);defineSymbol(math,ams,rel,"","\\precnsim",!0);defineSymbol(math,ams,rel,"","\\precnapprox",!0);defineSymbol(math,ams,rel,"","\\nsim",!0);defineSymbol(math,ams,rel,"","\\@nshortmid");defineSymbol(math,ams,rel,"","\\nmid",!0);defineSymbol(math,ams,rel,"","\\nvdash",!0);defineSymbol(math,ams,rel,"","\\nvDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleleft");defineSymbol(math,ams,rel,"","\\ntrianglelefteq",!0);defineSymbol(math,ams,rel,"","\\subsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneq");defineSymbol(math,ams,rel,"","\\subsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneqq");defineSymbol(math,ams,rel,"","\\ngtr",!0);defineSymbol(math,ams,rel,"","\\@ngeqslant");defineSymbol(math,ams,rel,"","\\@ngeqq");defineSymbol(math,ams,rel,"","\\gneq",!0);defineSymbol(math,ams,rel,"","\\gneqq",!0);defineSymbol(math,ams,rel,"","\\@gvertneqq");defineSymbol(math,ams,rel,"","\\gnsim",!0);defineSymbol(math,ams,rel,"","\\gnapprox",!0);defineSymbol(math,ams,rel,"","\\nsucc",!0);defineSymbol(math,ams,rel,"","\\nsucceq",!0);defineSymbol(math,ams,rel,"","\\succnsim",!0);defineSymbol(math,ams,rel,"","\\succnapprox",!0);defineSymbol(math,ams,rel,"","\\ncong",!0);defineSymbol(math,ams,rel,"","\\@nshortparallel");defineSymbol(math,ams,rel,"","\\nparallel",!0);defineSymbol(math,ams,rel,"","\\nVDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleright");defineSymbol(math,ams,rel,"","\\ntrianglerighteq",!0);defineSymbol(math,ams,rel,"","\\@nsupseteqq");defineSymbol(math,ams,rel,"","\\supsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneq");defineSymbol(math,ams,rel,"","\\supsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneqq");defineSymbol(math,ams,rel,"","\\nVdash",!0);defineSymbol(math,ams,rel,"","\\precneqq",!0);defineSymbol(math,ams,rel,"","\\succneqq",!0);defineSymbol(math,ams,rel,"","\\@nsubseteqq");defineSymbol(math,ams,bin,"","\\unlhd");defineSymbol(math,ams,bin,"","\\unrhd");defineSymbol(math,ams,rel,"","\\nleftarrow",!0);defineSymbol(math,ams,rel,"","\\nrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftarrow",!0);defineSymbol(math,ams,rel,"","\\nRightarrow",!0);defineSymbol(math,ams,rel,"","\\nleftrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftrightarrow",!0);defineSymbol(math,ams,rel,"","\\vartriangle");defineSymbol(math,ams,textord,"","\\hslash");defineSymbol(math,ams,textord,"","\\triangledown");defineSymbol(math,ams,textord,"","\\lozenge");defineSymbol(math,ams,textord,"","\\circledS");defineSymbol(math,ams,textord,"","\\circledR");defineSymbol(text,ams,textord,"","\\circledR");defineSymbol(math,ams,textord,"","\\measuredangle",!0);defineSymbol(math,ams,textord,"","\\nexists");defineSymbol(math,ams,textord,"","\\mho");defineSymbol(math,ams,textord,"","\\Finv",!0);defineSymbol(math,ams,textord,"","\\Game",!0);defineSymbol(math,ams,textord,"","\\backprime");defineSymbol(math,ams,textord,"","\\blacktriangle");defineSymbol(math,ams,textord,"","\\blacktriangledown");defineSymbol(math,ams,textord,"","\\blacksquare");defineSymbol(math,ams,textord,"","\\blacklozenge");defineSymbol(math,ams,textord,"","\\bigstar");defineSymbol(math,ams,textord,"","\\sphericalangle",!0);defineSymbol(math,ams,textord,"","\\complement",!0);defineSymbol(math,ams,textord,"","\\eth",!0);defineSymbol(text,main,textord,"","");defineSymbol(math,ams,textord,"","\\diagup");defineSymbol(math,ams,textord,"","\\diagdown");defineSymbol(math,ams,textord,"","\\square");defineSymbol(math,ams,textord,"","\\Box");defineSymbol(math,ams,textord,"","\\Diamond");defineSymbol(math,ams,textord,"","\\yen",!0);defineSymbol(text,ams,textord,"","\\yen",!0);defineSymbol(math,ams,textord,"","\\checkmark",!0);defineSymbol(text,ams,textord,"","\\checkmark");defineSymbol(math,ams,textord,"","\\beth",!0);defineSymbol(math,ams,textord,"","\\daleth",!0);defineSymbol(math,ams,textord,"","\\gimel",!0);defineSymbol(math,ams,textord,"","\\digamma",!0);defineSymbol(math,ams,textord,"","\\varkappa");defineSymbol(math,ams,open,"","\\@ulcorner",!0);defineSymbol(math,ams,close,"","\\@urcorner",!0);defineSymbol(math,ams,open,"","\\@llcorner",!0);defineSymbol(math,ams,close,"","\\@lrcorner",!0);defineSymbol(math,ams,rel,"","\\leqq",!0);defineSymbol(math,ams,rel,"","\\leqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantless",!0);defineSymbol(math,ams,rel,"","\\lesssim",!0);defineSymbol(math,ams,rel,"","\\lessapprox",!0);defineSymbol(math,ams,rel,"","\\approxeq",!0);defineSymbol(math,ams,bin,"","\\lessdot");defineSymbol(math,ams,rel,"","\\lll",!0);defineSymbol(math,ams,rel,"","\\lessgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqqgtr",!0);defineSymbol(math,ams,rel,"","\\doteqdot");defineSymbol(math,ams,rel,"","\\risingdotseq",!0);defineSymbol(math,ams,rel,"","\\fallingdotseq",!0);defineSymbol(math,ams,rel,"","\\backsim",!0);defineSymbol(math,ams,rel,"","\\backsimeq",!0);defineSymbol(math,ams,rel,"","\\subseteqq",!0);defineSymbol(math,ams,rel,"","\\Subset",!0);defineSymbol(math,ams,rel,"","\\sqsubset",!0);defineSymbol(math,ams,rel,"","\\preccurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqprec",!0);defineSymbol(math,ams,rel,"","\\precsim",!0);defineSymbol(math,ams,rel,"","\\precapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleleft");defineSymbol(math,ams,rel,"","\\trianglelefteq");defineSymbol(math,ams,rel,"","\\vDash",!0);defineSymbol(math,ams,rel,"","\\Vvdash",!0);defineSymbol(math,ams,rel,"","\\smallsmile");defineSymbol(math,ams,rel,"","\\smallfrown");defineSymbol(math,ams,rel,"","\\bumpeq",!0);defineSymbol(math,ams,rel,"","\\Bumpeq",!0);defineSymbol(math,ams,rel,"","\\geqq",!0);defineSymbol(math,ams,rel,"","\\geqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantgtr",!0);defineSymbol(math,ams,rel,"","\\gtrsim",!0);defineSymbol(math,ams,rel,"","\\gtrapprox",!0);defineSymbol(math,ams,bin,"","\\gtrdot");defineSymbol(math,ams,rel,"","\\ggg",!0);defineSymbol(math,ams,rel,"","\\gtrless",!0);defineSymbol(math,ams,rel,"","\\gtreqless",!0);defineSymbol(math,ams,rel,"","\\gtreqqless",!0);defineSymbol(math,ams,rel,"","\\eqcirc",!0);defineSymbol(math,ams,rel,"","\\circeq",!0);defineSymbol(math,ams,rel,"","\\triangleq",!0);defineSymbol(math,ams,rel,"","\\thicksim");defineSymbol(math,ams,rel,"","\\thickapprox");defineSymbol(math,ams,rel,"","\\supseteqq",!0);defineSymbol(math,ams,rel,"","\\Supset",!0);defineSymbol(math,ams,rel,"","\\sqsupset",!0);defineSymbol(math,ams,rel,"","\\succcurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqsucc",!0);defineSymbol(math,ams,rel,"","\\succsim",!0);defineSymbol(math,ams,rel,"","\\succapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleright");defineSymbol(math,ams,rel,"","\\trianglerighteq");defineSymbol(math,ams,rel,"","\\Vdash",!0);defineSymbol(math,ams,rel,"","\\shortmid");defineSymbol(math,ams,rel,"","\\shortparallel");defineSymbol(math,ams,rel,"","\\between",!0);defineSymbol(math,ams,rel,"","\\pitchfork",!0);defineSymbol(math,ams,rel,"","\\varpropto");defineSymbol(math,ams,rel,"","\\blacktriangleleft");defineSymbol(math,ams,rel,"","\\therefore",!0);defineSymbol(math,ams,rel,"","\\backepsilon");defineSymbol(math,ams,rel,"","\\blacktriangleright");defineSymbol(math,ams,rel,"","\\because",!0);defineSymbol(math,ams,rel,"","\\llless");defineSymbol(math,ams,rel,"","\\gggtr");defineSymbol(math,ams,bin,"","\\lhd");defineSymbol(math,ams,bin,"","\\rhd");defineSymbol(math,ams,rel,"","\\eqsim",!0);defineSymbol(math,main,rel,"","\\Join");defineSymbol(math,ams,rel,"","\\Doteq",!0);defineSymbol(math,ams,bin,"","\\dotplus",!0);defineSymbol(math,ams,bin,"","\\smallsetminus");defineSymbol(math,ams,bin,"","\\Cap",!0);defineSymbol(math,ams,bin,"","\\Cup",!0);defineSymbol(math,ams,bin,"","\\doublebarwedge",!0);defineSymbol(math,ams,bin,"","\\boxminus",!0);defineSymbol(math,ams,bin,"","\\boxplus",!0);defineSymbol(math,ams,bin,"","\\divideontimes",!0);defineSymbol(math,ams,bin,"","\\ltimes",!0);defineSymbol(math,ams,bin,"","\\rtimes",!0);defineSymbol(math,ams,bin,"","\\leftthreetimes",!0);defineSymbol(math,ams,bin,"","\\rightthreetimes",!0);defineSymbol(math,ams,bin,"","\\curlywedge",!0);defineSymbol(math,ams,bin,"","\\curlyvee",!0);defineSymbol(math,ams,bin,"","\\circleddash",!0);defineSymbol(math,ams,bin,"","\\circledast",!0);defineSymbol(math,ams,bin,"","\\centerdot");defineSymbol(math,ams,bin,"","\\intercal",!0);defineSymbol(math,ams,bin,"","\\doublecap");defineSymbol(math,ams,bin,"","\\doublecup");defineSymbol(math,ams,bin,"","\\boxtimes",!0);defineSymbol(math,ams,rel,"","\\dashrightarrow",!0);defineSymbol(math,ams,rel,"","\\dashleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftleftarrows",!0);defineSymbol(math,ams,rel,"","\\leftrightarrows",!0);defineSymbol(math,ams,rel,"","\\Lleftarrow",!0);defineSymbol(math,ams,rel,"","\\twoheadleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowleft",!0);defineSymbol(math,ams,rel,"","\\leftrightharpoons",!0);defineSymbol(math,ams,rel,"","\\curvearrowleft",!0);defineSymbol(math,ams,rel,"","\\circlearrowleft",!0);defineSymbol(math,ams,rel,"","\\Lsh",!0);defineSymbol(math,ams,rel,"","\\upuparrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonleft",!0);defineSymbol(math,ams,rel,"","\\downharpoonleft",!0);defineSymbol(math,main,rel,"","\\origof",!0);defineSymbol(math,main,rel,"","\\imageof",!0);defineSymbol(math,ams,rel,"","\\multimap",!0);defineSymbol(math,ams,rel,"","\\leftrightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\rightrightarrows",!0);defineSymbol(math,ams,rel,"","\\rightleftarrows",!0);defineSymbol(math,ams,rel,"","\\twoheadrightarrow",!0);defineSymbol(math,ams,rel,"","\\rightarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowright",!0);defineSymbol(math,ams,rel,"","\\curvearrowright",!0);defineSymbol(math,ams,rel,"","\\circlearrowright",!0);defineSymbol(math,ams,rel,"","\\Rsh",!0);defineSymbol(math,ams,rel,"","\\downdownarrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonright",!0);defineSymbol(math,ams,rel,"","\\downharpoonright",!0);defineSymbol(math,ams,rel,"","\\rightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\leadsto");defineSymbol(math,ams,rel,"","\\Rrightarrow",!0);defineSymbol(math,ams,rel,"","\\restriction");defineSymbol(math,main,textord,"","`");defineSymbol(math,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\textdollar");defineSymbol(math,main,textord,"%","\\%");defineSymbol(text,main,textord,"%","\\%");defineSymbol(math,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\textunderscore");defineSymbol(math,main,textord,"","\\angle",!0);defineSymbol(math,main,textord,"","\\infty",!0);defineSymbol(math,main,textord,"","\\prime");defineSymbol(math,main,textord,"","\\triangle");defineSymbol(math,main,textord,"","\\Gamma",!0);defineSymbol(math,main,textord,"","\\Delta",!0);defineSymbol(math,main,textord,"","\\Theta",!0);defineSymbol(math,main,textord,"","\\Lambda",!0);defineSymbol(math,main,textord,"","\\Xi",!0);defineSymbol(math,main,textord,"","\\Pi",!0);defineSymbol(math,main,textord,"","\\Sigma",!0);defineSymbol(math,main,textord,"","\\Upsilon",!0);defineSymbol(math,main,textord,"","\\Phi",!0);defineSymbol(math,main,textord,"","\\Psi",!0);defineSymbol(math,main,textord,"","\\Omega",!0);defineSymbol(math,main,textord,"A","");defineSymbol(math,main,textord,"B","");defineSymbol(math,main,textord,"E","");defineSymbol(math,main,textord,"Z","");defineSymbol(math,main,textord,"H","");defineSymbol(math,main,textord,"I","");defineSymbol(math,main,textord,"K","");defineSymbol(math,main,textord,"M","");defineSymbol(math,main,textord,"N","");defineSymbol(math,main,textord,"O","");defineSymbol(math,main,textord,"P","");defineSymbol(math,main,textord,"T","");defineSymbol(math,main,textord,"X","");defineSymbol(math,main,textord,"","\\neg",!0);defineSymbol(math,main,textord,"","\\lnot");defineSymbol(math,main,textord,"","\\top");defineSymbol(math,main,textord,"","\\bot");defineSymbol(math,main,textord,"","\\emptyset");defineSymbol(math,ams,textord,"","\\varnothing");defineSymbol(math,main,mathord,"","\\alpha",!0);defineSymbol(math,main,mathord,"","\\beta",!0);defineSymbol(math,main,mathord,"","\\gamma",!0);defineSymbol(math,main,mathord,"","\\delta",!0);defineSymbol(math,main,mathord,"","\\epsilon",!0);defineSymbol(math,main,mathord,"","\\zeta",!0);defineSymbol(math,main,mathord,"","\\eta",!0);defineSymbol(math,main,mathord,"","\\theta",!0);defineSymbol(math,main,mathord,"","\\iota",!0);defineSymbol(math,main,mathord,"","\\kappa",!0);defineSymbol(math,main,mathord,"","\\lambda",!0);defineSymbol(math,main,mathord,"","\\mu",!0);defineSymbol(math,main,mathord,"","\\nu",!0);defineSymbol(math,main,mathord,"","\\xi",!0);defineSymbol(math,main,mathord,"","\\omicron",!0);defineSymbol(math,main,mathord,"","\\pi",!0);defineSymbol(math,main,mathord,"","\\rho",!0);defineSymbol(math,main,mathord,"","\\sigma",!0);defineSymbol(math,main,mathord,"","\\tau",!0);defineSymbol(math,main,mathord,"","\\upsilon",!0);defineSymbol(math,main,mathord,"","\\phi",!0);defineSymbol(math,main,mathord,"","\\chi",!0);defineSymbol(math,main,mathord,"","\\psi",!0);defineSymbol(math,main,mathord,"","\\omega",!0);defineSymbol(math,main,mathord,"","\\varepsilon",!0);defineSymbol(math,main,mathord,"","\\vartheta",!0);defineSymbol(math,main,mathord,"","\\varpi",!0);defineSymbol(math,main,mathord,"","\\varrho",!0);defineSymbol(math,main,mathord,"","\\varsigma",!0);defineSymbol(math,main,mathord,"","\\varphi",!0);defineSymbol(math,main,bin,"","*",!0);defineSymbol(math,main,bin,"+","+");defineSymbol(math,main,bin,"","-",!0);defineSymbol(math,main,bin,"","\\cdot",!0);defineSymbol(math,main,bin,"","\\circ",!0);defineSymbol(math,main,bin,"","\\div",!0);defineSymbol(math,main,bin,"","\\pm",!0);defineSymbol(math,main,bin,"","\\times",!0);defineSymbol(math,main,bin,"","\\cap",!0);defineSymbol(math,main,bin,"","\\cup",!0);defineSymbol(math,main,bin,"","\\setminus",!0);defineSymbol(math,main,bin,"","\\land");defineSymbol(math,main,bin,"","\\lor");defineSymbol(math,main,bin,"","\\wedge",!0);defineSymbol(math,main,bin,"","\\vee",!0);defineSymbol(math,main,textord,"","\\surd");defineSymbol(math,main,open,"","\\langle",!0);defineSymbol(math,main,open,"","\\lvert");defineSymbol(math,main,open,"","\\lVert");defineSymbol(math,main,close,"?","?");defineSymbol(math,main,close,"!","!");defineSymbol(math,main,close,"","\\rangle",!0);defineSymbol(math,main,close,"","\\rvert");defineSymbol(math,main,close,"","\\rVert");defineSymbol(math,main,rel,"=","=");defineSymbol(math,main,rel,":",":");defineSymbol(math,main,rel,"","\\approx",!0);defineSymbol(math,main,rel,"","\\cong",!0);defineSymbol(math,main,rel,"","\\ge");defineSymbol(math,main,rel,"","\\geq",!0);defineSymbol(math,main,rel,"","\\gets");defineSymbol(math,main,rel,">","\\gt",!0);defineSymbol(math,main,rel,"","\\in",!0);defineSymbol(math,main,rel,"","\\@not");defineSymbol(math,main,rel,"","\\subset",!0);defineSymbol(math,main,rel,"","\\supset",!0);defineSymbol(math,main,rel,"","\\subseteq",!0);defineSymbol(math,main,rel,"","\\supseteq",!0);defineSymbol(math,ams,rel,"","\\nsubseteq",!0);defineSymbol(math,ams,rel,"","\\nsupseteq",!0);defineSymbol(math,main,rel,"","\\models");defineSymbol(math,main,rel,"","\\leftarrow",!0);defineSymbol(math,main,rel,"","\\le");defineSymbol(math,main,rel,"","\\leq",!0);defineSymbol(math,main,rel,"<","\\lt",!0);defineSymbol(math,main,rel,"","\\rightarrow",!0);defineSymbol(math,main,rel,"","\\to");defineSymbol(math,ams,rel,"","\\ngeq",!0);defineSymbol(math,ams,rel,"","\\nleq",!0);defineSymbol(math,main,spacing,"","\\ ");defineSymbol(math,main,spacing,"","\\space");defineSymbol(math,main,spacing,"","\\nobreakspace");defineSymbol(text,main,spacing,"","\\ ");defineSymbol(text,main,spacing,""," ");defineSymbol(text,main,spacing,"","\\space");defineSymbol(text,main,spacing,"","\\nobreakspace");defineSymbol(math,main,spacing,null,"\\nobreak");defineSymbol(math,main,spacing,null,"\\allowbreak");defineSymbol(math,main,punct,",",",");defineSymbol(math,main,punct,";",";");defineSymbol(math,ams,bin,"","\\barwedge",!0);defineSymbol(math,ams,bin,"","\\veebar",!0);defineSymbol(math,main,bin,"","\\odot",!0);defineSymbol(math,main,bin,"","\\oplus",!0);defineSymbol(math,main,bin,"","\\otimes",!0);defineSymbol(math,main,textord,"","\\partial",!0);defineSymbol(math,main,bin,"","\\oslash",!0);defineSymbol(math,ams,bin,"","\\circledcirc",!0);defineSymbol(math,ams,bin,"","\\boxdot",!0);defineSymbol(math,main,bin,"","\\bigtriangleup");defineSymbol(math,main,bin,"","\\bigtriangledown");defineSymbol(math,main,bin,"","\\dagger");defineSymbol(math,main,bin,"","\\diamond");defineSymbol(math,main,bin,"","\\star");defineSymbol(math,main,bin,"","\\triangleleft");defineSymbol(math,main,bin,"","\\triangleright");defineSymbol(math,main,open,"{","\\{");defineSymbol(text,main,textord,"{","\\{");defineSymbol(text,main,textord,"{","\\textbraceleft");defineSymbol(math,main,close,"}","\\}");defineSymbol(text,main,textord,"}","\\}");defineSymbol(text,main,textord,"}","\\textbraceright");defineSymbol(math,main,open,"{","\\lbrace");defineSymbol(math,main,close,"}","\\rbrace");defineSymbol(math,main,open,"[","\\lbrack",!0);defineSymbol(text,main,textord,"[","\\lbrack",!0);defineSymbol(math,main,close,"]","\\rbrack",!0);defineSymbol(text,main,textord,"]","\\rbrack",!0);defineSymbol(math,main,open,"(","\\lparen",!0);defineSymbol(math,main,close,")","\\rparen",!0);defineSymbol(text,main,textord,"<","\\textless",!0);defineSymbol(text,main,textord,">","\\textgreater",!0);defineSymbol(math,main,open,"","\\lfloor",!0);defineSymbol(math,main,close,"","\\rfloor",!0);defineSymbol(math,main,open,"","\\lceil",!0);defineSymbol(math,main,close,"","\\rceil",!0);defineSymbol(math,main,textord,"\\","\\backslash");defineSymbol(math,main,textord,"","|");defineSymbol(math,main,textord,"","\\vert");defineSymbol(text,main,textord,"|","\\textbar",!0);defineSymbol(math,main,textord,"","\\|");defineSymbol(math,main,textord,"","\\Vert");defineSymbol(text,main,textord,"","\\textbardbl");defineSymbol(text,main,textord,"~","\\textasciitilde");defineSymbol(text,main,textord,"\\","\\textbackslash");defineSymbol(text,main,textord,"^","\\textasciicircum");defineSymbol(math,main,rel,"","\\uparrow",!0);defineSymbol(math,main,rel,"","\\Uparrow",!0);defineSymbol(math,main,rel,"","\\downarrow",!0);defineSymbol(math,main,rel,"","\\Downarrow",!0);defineSymbol(math,main,rel,"","\\updownarrow",!0);defineSymbol(math,main,rel,"","\\Updownarrow",!0);defineSymbol(math,main,op$1,"","\\coprod");defineSymbol(math,main,op$1,"","\\bigvee");defineSymbol(math,main,op$1,"","\\bigwedge");defineSymbol(math,main,op$1,"","\\biguplus");defineSymbol(math,main,op$1,"","\\bigcap");defineSymbol(math,main,op$1,"","\\bigcup");defineSymbol(math,main,op$1,"","\\int");defineSymbol(math,main,op$1,"","\\intop");defineSymbol(math,main,op$1,"","\\iint");defineSymbol(math,main,op$1,"","\\iiint");defineSymbol(math,main,op$1,"","\\prod");defineSymbol(math,main,op$1,"","\\sum");defineSymbol(math,main,op$1,"","\\bigotimes");defineSymbol(math,main,op$1,"","\\bigoplus");defineSymbol(math,main,op$1,"","\\bigodot");defineSymbol(math,main,op$1,"","\\oint");defineSymbol(math,main,op$1,"","\\oiint");defineSymbol(math,main,op$1,"","\\oiiint");defineSymbol(math,main,op$1,"","\\bigsqcup");defineSymbol(math,main,op$1,"","\\smallint");defineSymbol(text,main,inner,"","\\textellipsis");defineSymbol(math,main,inner,"","\\mathellipsis");defineSymbol(text,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\@cdots",!0);defineSymbol(math,main,inner,"","\\ddots",!0);defineSymbol(math,main,textord,"","\\varvdots");defineSymbol(text,main,textord,"","\\varvdots");defineSymbol(math,main,accent,"","\\acute");defineSymbol(math,main,accent,"","\\grave");defineSymbol(math,main,accent,"","\\ddot");defineSymbol(math,main,accent,"~","\\tilde");defineSymbol(math,main,accent,"","\\bar");defineSymbol(math,main,accent,"","\\breve");defineSymbol(math,main,accent,"","\\check");defineSymbol(math,main,accent,"^","\\hat");defineSymbol(math,main,accent,"","\\vec");defineSymbol(math,main,accent,"","\\dot");defineSymbol(math,main,accent,"","\\mathring");defineSymbol(math,main,mathord,"","\\@imath");defineSymbol(math,main,mathord,"","\\@jmath");defineSymbol(math,main,textord,"","");defineSymbol(math,main,textord,"","");defineSymbol(text,main,textord,"","\\i",!0);defineSymbol(text,main,textord,"","\\j",!0);defineSymbol(text,main,textord,"","\\ss",!0);defineSymbol(text,main,textord,"","\\ae",!0);defineSymbol(text,main,textord,"","\\oe",!0);defineSymbol(text,main,textord,"","\\o",!0);defineSymbol(text,main,textord,"","\\AE",!0);defineSymbol(text,main,textord,"","\\OE",!0);defineSymbol(text,main,textord,"","\\O",!0);defineSymbol(text,main,accent,"","\\'");defineSymbol(text,main,accent,"","\\`");defineSymbol(text,main,accent,"","\\^");defineSymbol(text,main,accent,"","\\~");defineSymbol(text,main,accent,"","\\=");defineSymbol(text,main,accent,"","\\u");defineSymbol(text,main,accent,"","\\.");defineSymbol(text,main,accent,"","\\c");defineSymbol(text,main,accent,"","\\r");defineSymbol(text,main,accent,"","\\v");defineSymbol(text,main,accent,"",'\\"');defineSymbol(text,main,accent,"","\\H");defineSymbol(text,main,accent,"","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"","--",!0);defineSymbol(text,main,textord,"","\\textendash");defineSymbol(text,main,textord,"","---",!0);defineSymbol(text,main,textord,"","\\textemdash");defineSymbol(text,main,textord,"","`",!0);defineSymbol(text,main,textord,"","\\textquoteleft");defineSymbol(text,main,textord,"","'",!0);defineSymbol(text,main,textord,"","\\textquoteright");defineSymbol(text,main,textord,"","``",!0);defineSymbol(text,main,textord,"","\\textquotedblleft");defineSymbol(text,main,textord,"","''",!0);defineSymbol(text,main,textord,"","\\textquotedblright");defineSymbol(math,main,textord,"","\\degree",!0);defineSymbol(text,main,textord,"","\\degree");defineSymbol(text,main,textord,"","\\textdegree",!0);defineSymbol(math,main,textord,"","\\pounds");defineSymbol(math,main,textord,"","\\mathsterling",!0);defineSymbol(text,main,textord,"","\\pounds");defineSymbol(text,main,textord,"","\\textsterling",!0);defineSymbol(math,ams,textord,"","\\maltese");defineSymbol(text,ams,textord,"","\\maltese");var mathTextSymbols='0123456789/@."';for(var i=0;i<mathTextSymbols.length;i++){var ch$1=mathTextSymbols.charAt(i);defineSymbol(math,main,textord,ch$1,ch$1)}var textSymbols='0123456789!@*()-=+";:?/.,';for(var _i$1=0;_i$1<textSymbols.length;_i$1++){var _ch=textSymbols.charAt(_i$1);defineSymbol(text,main,textord,_ch,_ch)}var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math,ams,textord,"C","");defineSymbol(text,ams,textord,"C","");defineSymbol(math,ams,textord,"H","");defineSymbol(text,ams,textord,"H","");defineSymbol(math,ams,textord,"N","");defineSymbol(text,ams,textord,"N","");defineSymbol(math,ams,textord,"P","");defineSymbol(text,ams,textord,"P","");defineSymbol(math,ams,textord,"Q","");defineSymbol(text,ams,textord,"Q","");defineSymbol(math,ams,textord,"R","");defineSymbol(text,ams,textord,"R","");defineSymbol(math,ams,textord,"Z","");defineSymbol(text,ams,textord,"Z","");defineSymbol(math,main,mathord,"h","");defineSymbol(text,main,mathord,"h","");var wideChar="";for(var _i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="";defineSymbol(math,main,mathord,"k",wideChar);defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}var extraLatin="";for(var _i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function t(e,a){var s=e.charCodeAt(0),o=e.charCodeAt(1),l=(s-55296)*1024+(o-56320)+65536,u=a==="math"?0:1;if(119808<=l&&l<120484){var c=Math.floor((l-119808)/26);return[wideLatinLetterData[c][2],wideLatinLetterData[c][u]]}else if(120782<=l&&l<=120831){var d=Math.floor((l-120782)/10);return[wideNumeralData[d][2],wideNumeralData[d][u]]}else{if(l===120485||l===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][u]];if(120486<l&&l<120782)return["",""];throw new ParseError("Unsupported character: "+e)}},lookupSymbol=function t(e,a,s){return symbols[s][e]&&symbols[s][e].replace&&(e=symbols[s][e].replace),{value:e,metrics:getCharacterMetrics(e,a,s)}},makeSymbol=function t(e,a,s,o,l){var u=lookupSymbol(e,a,s),c=u.metrics;e=u.value;var d;if(c){var m=c.italic;(s==="text"||o&&o.font==="mathit")&&(m=0),d=new SymbolNode(e,c.height,c.depth,m,c.skew,c.width,l)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+a+"' and mode '"+s+"'")),d=new SymbolNode(e,0,0,0,0,0,l);if(o){d.maxFontSize=o.sizeMultiplier,o.style.isTight()&&d.classes.push("mtight");var g=o.getColor();g&&(d.style.color=g)}return d},mathsym=function t(e,a,s,o){return o===void 0&&(o=[]),s.font==="boldsymbol"&&lookupSymbol(e,"Main-Bold",a).metrics?makeSymbol(e,"Main-Bold",a,s,o.concat(["mathbf"])):e==="\\"||symbols[a][e].font==="main"?makeSymbol(e,"Main-Regular",a,s,o):makeSymbol(e,"AMS-Regular",a,s,o.concat(["amsrm"]))},boldsymbol=function t(e,a,s,o,l){return l!=="textord"&&lookupSymbol(e,"Math-BoldItalic",a).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function t(e,a,s){var o=e.mode,l=e.text,u=["mord"],c=o==="math"||o==="text"&&a.font,d=c?a.font:a.fontFamily,m="",g="";if(l.charCodeAt(0)===55349&&([m,g]=wideCharacterFont(l,o)),m.length>0)return makeSymbol(l,m,o,a,u.concat(g));if(d){var A,P;if(d==="boldsymbol"){var W=boldsymbol(l,o,a,u,s);A=W.fontName,P=[W.fontClass]}else c?(A=fontMap[d].fontName,P=[d]):(A=retrieveTextFontName(d,a.fontWeight,a.fontShape),P=[d,a.fontWeight,a.fontShape]);if(lookupSymbol(l,A,o).metrics)return makeSymbol(l,A,o,a,u.concat(P));if(ligatures.hasOwnProperty(l)&&A.slice(0,10)==="Typewriter"){for(var me=[],ve=0;ve<l.length;ve++)me.push(makeSymbol(l[ve],A,o,a,u.concat(P)));return makeFragment(me)}}if(s==="mathord")return makeSymbol(l,"Math-Italic",o,a,u.concat(["mathnormal"]));if(s==="textord"){var He=symbols[o][l]&&symbols[o][l].font;if(He==="ams"){var De=retrieveTextFontName("amsrm",a.fontWeight,a.fontShape);return makeSymbol(l,De,o,a,u.concat("amsrm",a.fontWeight,a.fontShape))}else if(He==="main"||!He){var Xe=retrieveTextFontName("textrm",a.fontWeight,a.fontShape);return makeSymbol(l,Xe,o,a,u.concat(a.fontWeight,a.fontShape))}else{var qe=retrieveTextFontName(He,a.fontWeight,a.fontShape);return makeSymbol(l,qe,o,a,u.concat(qe,a.fontWeight,a.fontShape))}}else throw new Error("unexpected type: "+s+" in makeOrd")},canCombine=(t,e)=>{if(createClass(t.classes)!==createClass(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var a=t.classes[0];if(a==="mbin"||a==="mord")return!1}for(var s in t.style)if(t.style.hasOwnProperty(s)&&t.style[s]!==e.style[s])return!1;for(var o in e.style)if(e.style.hasOwnProperty(o)&&t.style[o]!==e.style[o])return!1;return!0},tryCombineChars=t=>{for(var e=0;e<t.length-1;e++){var a=t[e],s=t[e+1];a instanceof SymbolNode&&s instanceof SymbolNode&&canCombine(a,s)&&(a.text+=s.text,a.height=Math.max(a.height,s.height),a.depth=Math.max(a.depth,s.depth),a.italic=s.italic,t.splice(e+1,1),e--)}return t},sizeElementFromChildren=function t(e){for(var a=0,s=0,o=0,l=0;l<e.children.length;l++){var u=e.children[l];u.height>a&&(a=u.height),u.depth>s&&(s=u.depth),u.maxFontSize>o&&(o=u.maxFontSize)}e.height=a,e.depth=s,e.maxFontSize=o},makeSpan$2=function t(e,a,s,o){var l=new Span(e,a,s,o);return sizeElementFromChildren(l),l},makeSvgSpan=(t,e,a,s)=>new Span(t,e,a,s),makeLineSpan=function t(e,a,s){var o=makeSpan$2([e],[],a);return o.height=Math.max(s||a.fontMetrics().defaultRuleThickness,a.minRuleThickness),o.style.borderBottomWidth=makeEm(o.height),o.maxFontSize=1,o},makeAnchor=function t(e,a,s,o){var l=new Anchor(e,a,s,o);return sizeElementFromChildren(l),l},makeFragment=function t(e){var a=new DocumentFragment(e);return sizeElementFromChildren(a),a},wrapFragment=function t(e,a){return e instanceof DocumentFragment?makeSpan$2([],[e],a):e},getVListChildrenAndDepth=function t(e){if(e.positionType==="individualShift"){for(var a=e.children,s=[a[0]],o=-a[0].shift-a[0].elem.depth,l=o,u=1;u<a.length;u++){var c=-a[u].shift-l-a[u].elem.depth,d=c-(a[u-1].elem.height+a[u-1].elem.depth);l=l+c,s.push({type:"kern",size:d}),s.push(a[u])}return{children:s,depth:o}}var m;if(e.positionType==="top"){for(var g=e.positionData,A=0;A<e.children.length;A++){var P=e.children[A];g-=P.type==="kern"?P.size:P.elem.height+P.elem.depth}m=g}else if(e.positionType==="bottom")m=-e.positionData;else{var W=e.children[0];if(W.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")m=-W.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")m=-W.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:m}},makeVList=function t(e,a){for(var{children:s,depth:o}=getVListChildrenAndDepth(e),l=0,u=0;u<s.length;u++){var c=s[u];if(c.type==="elem"){var d=c.elem;l=Math.max(l,d.maxFontSize,d.height)}}l+=2;var m=makeSpan$2(["pstrut"],[]);m.style.height=makeEm(l);for(var g=[],A=o,P=o,W=o,me=0;me<s.length;me++){var ve=s[me];if(ve.type==="kern")W+=ve.size;else{var He=ve.elem,De=ve.wrapperClasses||[],Xe=ve.wrapperStyle||{},qe=makeSpan$2(De,[m,He],void 0,Xe);qe.style.top=makeEm(-l-W-He.depth),ve.marginLeft&&(qe.style.marginLeft=ve.marginLeft),ve.marginRight&&(qe.style.marginRight=ve.marginRight),g.push(qe),W+=He.height+He.depth}A=Math.min(A,W),P=Math.max(P,W)}var Rs=makeSpan$2(["vlist"],g);Rs.style.height=makeEm(P);var Vc;if(A<0){var So=makeSpan$2([],[]),Do=makeSpan$2(["vlist"],[So]);Do.style.height=makeEm(-A);var eh=makeSpan$2(["vlist-s"],[new SymbolNode("")]);Vc=[makeSpan$2(["vlist-r"],[Rs,eh]),makeSpan$2(["vlist-r"],[Do])]}else Vc=[makeSpan$2(["vlist-r"],[Rs])];var Ko=makeSpan$2(["vlist-t"],Vc);return Vc.length===2&&Ko.classes.push("vlist-t2"),Ko.height=P,Ko.depth=-A,Ko},makeGlue=(t,e)=>{var a=makeSpan$2(["mspace"],[],e),s=calculateSize(t,e);return a.style.marginRight=makeEm(s),a},retrieveTextFontName=function t(e,a,s){var o="";switch(e){case"amsrm":o="AMS";break;case"textrm":o="Main";break;case"textsf":o="SansSerif";break;case"texttt":o="Typewriter";break;default:o=e}var l;return a==="textbf"&&s==="textit"?l="BoldItalic":a==="textbf"?l="Bold":a==="textit"?l="Italic":l="Regular",o+"-"+l},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function t(e,a){var[s,o,l]=svgData[e],u=new PathNode(s),c=new SvgNode([u],{width:makeEm(o),height:makeEm(l),style:"width:"+makeEm(o),viewBox:"0 0 "+1e3*o+" "+1e3*l,preserveAspectRatio:"xMinYMin"}),d=makeSvgSpan(["overlay"],[c],a);return d.height=l,d.style.height=makeEm(l),d.style.width=makeEm(o),d},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(t){for(var{type:e,names:a,props:s,handler:o,htmlBuilder:l,mathmlBuilder:u}=t,c={type:e,numArgs:s.numArgs,argTypes:s.argTypes,allowedInArgument:!!s.allowedInArgument,allowedInText:!!s.allowedInText,allowedInMath:s.allowedInMath===void 0?!0:s.allowedInMath,numOptionalArgs:s.numOptionalArgs||0,infix:!!s.infix,primitive:!!s.primitive,handler:o},d=0;d<a.length;++d)_functions[a[d]]=c;e&&(l&&(_htmlGroupBuilders[e]=l),u&&(_mathmlGroupBuilders[e]=u))}function defineFunctionBuilders(t){var{type:e,htmlBuilder:a,mathmlBuilder:s}=t;defineFunction({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:a,mathmlBuilder:s})}var normalizeArgument=function t(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ordargument=function t(e){return e.type==="ordgroup"?e.body:[e]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function t(e,a,s,o){o===void 0&&(o=[null,null]);for(var l=[],u=0;u<e.length;u++){var c=buildGroup$1(e[u],a);if(c instanceof DocumentFragment){var d=c.children;l.push(...d)}else l.push(c)}if(buildCommon.tryCombineChars(l),!s)return l;var m=a;if(e.length===1){var g=e[0];g.type==="sizing"?m=a.havingSize(g.size):g.type==="styling"&&(m=a.havingStyle(styleMap$1[g.style]))}var A=makeSpan$1([o[0]||"leftmost"],[],a),P=makeSpan$1([o[1]||"rightmost"],[],a),W=s==="root";return traverseNonSpaceNodes(l,(me,ve)=>{var He=ve.classes[0],De=me.classes[0];He==="mbin"&&utils.contains(binRightCanceller,De)?ve.classes[0]="mord":De==="mbin"&&utils.contains(binLeftCanceller,He)&&(me.classes[0]="mord")},{node:A},P,W),traverseNonSpaceNodes(l,(me,ve)=>{var He=getTypeOfDomTree(ve),De=getTypeOfDomTree(me),Xe=He&&De?me.hasClass("mtight")?tightSpacings[He][De]:spacings[He][De]:null;if(Xe)return buildCommon.makeGlue(Xe,m)},{node:A},P,W),l},traverseNonSpaceNodes=function t(e,a,s,o,l){o&&e.push(o);for(var u=0;u<e.length;u++){var c=e[u],d=checkPartialGroup(c);if(d){t(d.children,a,s,null,l);continue}var m=!c.hasClass("mspace");if(m){var g=a(c,s.node);g&&(s.insertAfter?s.insertAfter(g):(e.unshift(g),u++))}m?s.node=c:l&&c.hasClass("newline")&&(s.node=makeSpan$1(["leftmost"])),s.insertAfter=(A=>P=>{e.splice(A+1,0,P),u++})(u)}o&&e.pop()},checkPartialGroup=function t(e){return e instanceof DocumentFragment||e instanceof Anchor||e instanceof Span&&e.hasClass("enclosing")?e:null},getOutermostNode=function t(e,a){var s=checkPartialGroup(e);if(s){var o=s.children;if(o.length){if(a==="right")return t(o[o.length-1],"right");if(a==="left")return t(o[0],"left")}}return e},getTypeOfDomTree=function t(e,a){return e?(a&&(e=getOutermostNode(e,a)),DomEnum[e.classes[0]]||null):null},makeNullDelimiter=function t(e,a){var s=["nulldelimiter"].concat(e.baseSizingClasses());return makeSpan$1(a.concat(s))},buildGroup$1=function t(e,a,s){if(!e)return makeSpan$1();if(_htmlGroupBuilders[e.type]){var o=_htmlGroupBuilders[e.type](e,a);if(s&&a.size!==s.size){o=makeSpan$1(a.sizingClasses(s),[o],a);var l=a.sizeMultiplier/s.sizeMultiplier;o.height*=l,o.depth*=l}return o}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildHTMLUnbreakable(t,e){var a=makeSpan$1(["base"],t,e),s=makeSpan$1(["strut"]);return s.style.height=makeEm(a.height+a.depth),a.depth&&(s.style.verticalAlign=makeEm(-a.depth)),a.children.unshift(s),a}function buildHTML(t,e){var a=null;t.length===1&&t[0].type==="tag"&&(a=t[0].tag,t=t[0].body);var s=buildExpression$1(t,e,"root"),o;s.length===2&&s[1].hasClass("tag")&&(o=s.pop());for(var l=[],u=[],c=0;c<s.length;c++)if(u.push(s[c]),s[c].hasClass("mbin")||s[c].hasClass("mrel")||s[c].hasClass("allowbreak")){for(var d=!1;c<s.length-1&&s[c+1].hasClass("mspace")&&!s[c+1].hasClass("newline");)c++,u.push(s[c]),s[c].hasClass("nobreak")&&(d=!0);d||(l.push(buildHTMLUnbreakable(u,e)),u=[])}else s[c].hasClass("newline")&&(u.pop(),u.length>0&&(l.push(buildHTMLUnbreakable(u,e)),u=[]),l.push(s[c]));u.length>0&&l.push(buildHTMLUnbreakable(u,e));var m;a?(m=buildHTMLUnbreakable(buildExpression$1(a,e,!0)),m.classes=["tag"],l.push(m)):o&&l.push(o);var g=makeSpan$1(["katex-html"],l);if(g.setAttribute("aria-hidden","true"),m){var A=m.children[0];A.style.height=makeEm(g.height+g.depth),g.depth&&(A.style.verticalAlign=makeEm(-g.depth))}return g}function newDocumentFragment(t){return new DocumentFragment(t)}class MathNode{constructor(e,a,s){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=a||[],this.classes=s||[]}setAttribute(e,a){this.attributes[e]=a}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&e.setAttribute(a,this.attributes[a]);this.classes.length>0&&(e.className=createClass(this.classes));for(var s=0;s<this.children.length;s++)if(this.children[s]instanceof TextNode&&this.children[s+1]instanceof TextNode){for(var o=this.children[s].toText()+this.children[++s].toText();this.children[s+1]instanceof TextNode;)o+=this.children[++s].toText();e.appendChild(new TextNode(o).toNode())}else e.appendChild(this.children[s].toNode());return e}toMarkup(){var e="<"+this.type;for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&(e+=" "+a+'="',e+=utils.escape(this.attributes[a]),e+='"');this.classes.length>0&&(e+=' class ="'+utils.escape(createClass(this.classes))+'"'),e+=">";for(var s=0;s<this.children.length;s++)e+=this.children[s].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class TextNode{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",makeEm(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function t(e,a,s){return symbols[a][e]&&symbols[a][e].replace&&e.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(e)&&s&&(s.fontFamily&&s.fontFamily.slice(4,6)==="tt"||s.font&&s.font.slice(4,6)==="tt"))&&(e=symbols[a][e].replace),new mathMLTree.TextNode(e)},makeRow=function t(e){return e.length===1?e[0]:new mathMLTree.MathNode("mrow",e)},getVariant=function t(e,a){if(a.fontFamily==="texttt")return"monospace";if(a.fontFamily==="textsf")return a.fontShape==="textit"&&a.fontWeight==="textbf"?"sans-serif-bold-italic":a.fontShape==="textit"?"sans-serif-italic":a.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(a.fontShape==="textit"&&a.fontWeight==="textbf")return"bold-italic";if(a.fontShape==="textit")return"italic";if(a.fontWeight==="textbf")return"bold";var s=a.font;if(!s||s==="mathnormal")return null;var o=e.mode;if(s==="mathit")return"italic";if(s==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(s==="mathbf")return"bold";if(s==="mathbb")return"double-struck";if(s==="mathsfit")return"sans-serif-italic";if(s==="mathfrak")return"fraktur";if(s==="mathscr"||s==="mathcal")return"script";if(s==="mathsf")return"sans-serif";if(s==="mathtt")return"monospace";var l=e.text;if(utils.contains(["\\imath","\\jmath"],l))return null;symbols[o][l]&&symbols[o][l].replace&&(l=symbols[o][l].replace);var u=buildCommon.fontMap[s].fontName;return getCharacterMetrics(l,u,o)?buildCommon.fontMap[s].variant:null};function isNumberPunctuation(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof TextNode&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var a=t.children[0];return a instanceof TextNode&&a.text===","}else return!1}var buildExpression=function t(e,a,s){if(e.length===1){var o=buildGroup(e[0],a);return s&&o instanceof MathNode&&o.type==="mo"&&(o.setAttribute("lspace","0em"),o.setAttribute("rspace","0em")),[o]}for(var l=[],u,c=0;c<e.length;c++){var d=buildGroup(e[c],a);if(d instanceof MathNode&&u instanceof MathNode){if(d.type==="mtext"&&u.type==="mtext"&&d.getAttribute("mathvariant")===u.getAttribute("mathvariant")){u.children.push(...d.children);continue}else if(d.type==="mn"&&u.type==="mn"){u.children.push(...d.children);continue}else if(isNumberPunctuation(d)&&u.type==="mn"){u.children.push(...d.children);continue}else if(d.type==="mn"&&isNumberPunctuation(u))d.children=[...u.children,...d.children],l.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(u.type==="mn"||isNumberPunctuation(u))){var m=d.children[0];m instanceof MathNode&&m.type==="mn"&&(m.children=[...u.children,...m.children],l.pop())}else if(u.type==="mi"&&u.children.length===1){var g=u.children[0];if(g instanceof TextNode&&g.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var A=d.children[0];A instanceof TextNode&&A.text.length>0&&(A.text=A.text.slice(0,1)+""+A.text.slice(1),l.pop())}}}l.push(d),u=d}return l},buildExpressionRow=function t(e,a,s){return makeRow(buildExpression(e,a,s))},buildGroup=function t(e,a){if(!e)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[e.type]){var s=_mathmlGroupBuilders[e.type](e,a);return s}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildMathML(t,e,a,s,o){var l=buildExpression(t,a),u;l.length===1&&l[0]instanceof MathNode&&utils.contains(["mrow","mtable"],l[0].type)?u=l[0]:u=new mathMLTree.MathNode("mrow",l);var c=new mathMLTree.MathNode("annotation",[new mathMLTree.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new mathMLTree.MathNode("semantics",[u,c]),m=new mathMLTree.MathNode("math",[d]);m.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),s&&m.setAttribute("display","block");var g=o?"katex":"katex-mathml";return buildCommon.makeSpan([g],[m])}var optionsFromSettings=function t(e){return new Options({style:e.displayMode?Style$1.DISPLAY:Style$1.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},displayWrap=function t(e,a){if(a.displayMode){var s=["katex-display"];a.leqno&&s.push("leqno"),a.fleqn&&s.push("fleqn"),e=buildCommon.makeSpan(s,[e])}return e},buildTree=function t(e,a,s){var o=optionsFromSettings(s),l;if(s.output==="mathml")return buildMathML(e,a,o,s.displayMode,!0);if(s.output==="html"){var u=buildHTML(e,o);l=buildCommon.makeSpan(["katex"],[u])}else{var c=buildMathML(e,a,o,s.displayMode,!1),d=buildHTML(e,o);l=buildCommon.makeSpan(["katex"],[c,d])}return displayWrap(l,s)},buildHTMLTree=function t(e,a,s){var o=optionsFromSettings(s),l=buildHTML(e,o),u=buildCommon.makeSpan(["katex"],[l]);return displayWrap(u,s)},stretchyCodePoint={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},mathMLnode=function t(e){var a=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[e.replace(/^\\/,"")])]);return a.setAttribute("stretchy","true"),a},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function t(e){return e.type==="ordgroup"?e.body.length:1},svgSpan=function t(e,a){function s(){var c=4e5,d=e.label.slice(1);if(utils.contains(["widehat","widecheck","widetilde","utilde"],d)){var m=e,g=groupLength(m.base),A,P,W;if(g>5)d==="widehat"||d==="widecheck"?(A=420,c=2364,W=.42,P=d+"4"):(A=312,c=2340,W=.34,P="tilde4");else{var me=[1,1,2,2,3,3][g];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][me],A=[0,239,300,360,420][me],W=[0,.24,.3,.3,.36,.42][me],P=d+me):(c=[0,600,1033,2339,2340][me],A=[0,260,286,306,312][me],W=[0,.26,.286,.3,.306,.34][me],P="tilde"+me)}var ve=new PathNode(P),He=new SvgNode([ve],{width:"100%",height:makeEm(W),viewBox:"0 0 "+c+" "+A,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[He],a),minWidth:0,height:W}}else{var De=[],Xe=katexImagesData[d],[qe,Rs,Vc]=Xe,So=Vc/1e3,Do=qe.length,eh,Ko;if(Do===1){var Ge=Xe[3];eh=["hide-tail"],Ko=[Ge]}else if(Do===2)eh=["halfarrow-left","halfarrow-right"],Ko=["xMinYMin","xMaxYMin"];else if(Do===3)eh=["brace-left","brace-center","brace-right"],Ko=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+Do+" children.");for(var An=0;An<Do;An++){var wt=new PathNode(qe[An]),Bs=new SvgNode([wt],{width:"400em",height:makeEm(So),viewBox:"0 0 "+c+" "+Vc,preserveAspectRatio:Ko[An]+" slice"}),yh=buildCommon.makeSvgSpan([eh[An]],[Bs],a);if(Do===1)return{span:yh,minWidth:Rs,height:So};yh.style.height=makeEm(So),De.push(yh)}return{span:buildCommon.makeSpan(["stretchy"],De,a),minWidth:Rs,height:So}}}var{span:o,minWidth:l,height:u}=s();return o.height=u,o.style.height=makeEm(u),l>0&&(o.style.minWidth=makeEm(l)),o},encloseSpan=function t(e,a,s,o,l){var u,c=e.height+e.depth+s+o;if(/fbox|color|angl/.test(a)){if(u=buildCommon.makeSpan(["stretchy",a],[],l),a==="fbox"){var d=l.color&&l.getColor();d&&(u.style.borderColor=d)}}else{var m=[];/^[bx]cancel$/.test(a)&&m.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(a)&&m.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var g=new SvgNode(m,{width:"100%",height:makeEm(c)});u=buildCommon.makeSvgSpan([],[g],l)}return u.height=c,u.style.height=makeEm(c),u},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function assertSymbolNodeType(t){var e=checkSymbolNodeType(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function checkSymbolNodeType(t){return t&&(t.type==="atom"||NON_ATOMS.hasOwnProperty(t.type))?t:null}var htmlBuilder$a=(t,e)=>{var a,s,o;t&&t.type==="supsub"?(s=assertNodeType(t.base,"accent"),a=s.base,t.base=a,o=assertSpan(buildGroup$1(t,e)),t.base=s):(s=assertNodeType(t,"accent"),a=s.base);var l=buildGroup$1(a,e.havingCrampedStyle()),u=s.isShifty&&utils.isCharacterBox(a),c=0;if(u){var d=utils.getBaseElem(a),m=buildGroup$1(d,e.havingCrampedStyle());c=assertSymbolDomNode(m).skew}var g=s.label==="\\c",A=g?l.height+l.depth:Math.min(l.height,e.fontMetrics().xHeight),P;if(s.isStretchy)P=stretchy.svgSpan(s,e),P=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"elem",elem:P,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+makeEm(2*c)+")",marginLeft:makeEm(2*c)}:void 0}]},e);else{var W,me;s.label==="\\vec"?(W=buildCommon.staticSvg("vec",e),me=buildCommon.svgData.vec[1]):(W=buildCommon.makeOrd({mode:s.mode,text:s.label},e,"textord"),W=assertSymbolDomNode(W),W.italic=0,me=W.width,g&&(A+=W.depth)),P=buildCommon.makeSpan(["accent-body"],[W]);var ve=s.label==="\\textcircled";ve&&(P.classes.push("accent-full"),A=l.height);var He=c;ve||(He-=me/2),P.style.left=makeEm(He),s.label==="\\textcircled"&&(P.style.top=".2em"),P=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:-A},{type:"elem",elem:P}]},e)}var De=buildCommon.makeSpan(["mord","accent"],[P],e);return o?(o.children[0]=De,o.height=Math.max(De.height,o.height),o.classes[0]="mord",o):De},mathmlBuilder$9=(t,e)=>{var a=t.isStretchy?stretchy.mathMLnode(t.label):new mathMLTree.MathNode("mo",[makeText(t.label,t.mode)]),s=new mathMLTree.MathNode("mover",[buildGroup(t.base,e),a]);return s.setAttribute("accent","true"),s},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var a=normalizeArgument(e[0]),s=!NON_STRETCHY_ACCENT_REGEX.test(t.funcName),o=!s||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:s,isShifty:o,base:a}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var a=e[0],s=t.parser.mode;return s==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),s="text"),{type:"accent",mode:s,label:t.funcName,isStretchy:!1,isShifty:!0,base:a}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:a,funcName:s}=t,o=e[0];return{type:"accentUnder",mode:a.mode,label:s,base:o}},htmlBuilder:(t,e)=>{var a=buildGroup$1(t.base,e),s=stretchy.svgSpan(t,e),o=t.label==="\\utilde"?.12:0,l=buildCommon.makeVList({positionType:"top",positionData:a.height,children:[{type:"elem",elem:s,wrapperClasses:["svg-align"]},{type:"kern",size:o},{type:"elem",elem:a}]},e);return buildCommon.makeSpan(["mord","accentunder"],[l],e)},mathmlBuilder:(t,e)=>{var a=stretchy.mathMLnode(t.label),s=new mathMLTree.MathNode("munder",[buildGroup(t.base,e),a]);return s.setAttribute("accentunder","true"),s}});var paddedNode=t=>{var e=new mathMLTree.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,a){var{parser:s,funcName:o}=t;return{type:"xArrow",mode:s.mode,label:o,body:e[0],below:a[0]}},htmlBuilder(t,e){var a=e.style,s=e.havingStyle(a.sup()),o=buildCommon.wrapFragment(buildGroup$1(t.body,s,e),e),l=t.label.slice(0,2)==="\\x"?"x":"cd";o.classes.push(l+"-arrow-pad");var u;t.below&&(s=e.havingStyle(a.sub()),u=buildCommon.wrapFragment(buildGroup$1(t.below,s,e),e),u.classes.push(l+"-arrow-pad"));var c=stretchy.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,m=-e.fontMetrics().axisHeight-.5*c.height-.111;(o.depth>.25||t.label==="\\xleftequilibrium")&&(m-=o.depth);var g;if(u){var A=-e.fontMetrics().axisHeight+u.height+.5*c.height+.111;g=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:m},{type:"elem",elem:c,shift:d},{type:"elem",elem:u,shift:A}]},e)}else g=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:m},{type:"elem",elem:c,shift:d}]},e);return g.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[g],e)},mathmlBuilder(t,e){var a=stretchy.mathMLnode(t.label);a.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var s;if(t.body){var o=paddedNode(buildGroup(t.body,e));if(t.below){var l=paddedNode(buildGroup(t.below,e));s=new mathMLTree.MathNode("munderover",[a,l,o])}else s=new mathMLTree.MathNode("mover",[a,o])}else if(t.below){var u=paddedNode(buildGroup(t.below,e));s=new mathMLTree.MathNode("munder",[a,u])}else s=paddedNode(),s=new mathMLTree.MathNode("mover",[a,s]);return s}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(t,e){var a=buildExpression$1(t.body,e,!0);return makeSpan([t.mclass],a,e)}function mathmlBuilder$8(t,e){var a,s=buildExpression(t.body,e);return t.mclass==="minner"?a=new mathMLTree.MathNode("mpadded",s):t.mclass==="mord"?t.isCharacterBox?(a=s[0],a.type="mi"):a=new mathMLTree.MathNode("mi",s):(t.isCharacterBox?(a=s[0],a.type="mo"):a=new mathMLTree.MathNode("mo",s),t.mclass==="mbin"?(a.attributes.lspace="0.22em",a.attributes.rspace="0.22em"):t.mclass==="mpunct"?(a.attributes.lspace="0em",a.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(a.attributes.lspace="0em",a.attributes.rspace="0em"):t.mclass==="minner"&&(a.attributes.lspace="0.0556em",a.attributes.width="+0.1111em")),a}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:a,funcName:s}=t,o=e[0];return{type:"mclass",mode:a.mode,mclass:"m"+s.slice(5),body:ordargument(o),isCharacterBox:utils.isCharacterBox(o)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:a}=t;return{type:"mclass",mode:a.mode,mclass:binrelClass(e[0]),body:ordargument(e[1]),isCharacterBox:utils.isCharacterBox(e[1])}}});defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:a,funcName:s}=t,o=e[1],l=e[0],u;s!=="\\stackrel"?u=binrelClass(o):u="mrel";var c={type:"op",mode:o.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:s!=="\\stackrel",body:ordargument(o)},d={type:"supsub",mode:l.mode,base:c,sup:s==="\\underset"?null:l,sub:s==="\\underset"?l:null};return{type:"mclass",mode:a.mode,mclass:u,body:[d],isCharacterBox:utils.isCharacterBox(d)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:a}=t;return{type:"pmb",mode:a.mode,mclass:binrelClass(e[0]),body:ordargument(e[0])}},htmlBuilder(t,e){var a=buildExpression$1(t.body,e,!0),s=buildCommon.makeSpan([t.mclass],a,e);return s.style.textShadow="0.02em 0.01em 0.04px",s},mathmlBuilder(t,e){var a=buildExpression(t.body,e),s=new mathMLTree.MathNode("mstyle",a);return s.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),s}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=t=>t.type==="textord"&&t.text==="@",isLabelEnd=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function cdArrow(t,e,a){var s=cdArrowFunctionName[t];switch(s){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return a.callFunction(s,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var o=a.callFunction("\\\\cdleft",[e[0]],[]),l={type:"atom",text:s,mode:"math",family:"rel"},u=a.callFunction("\\Big",[l],[]),c=a.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[o,u,c]};return a.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return a.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var m={type:"textord",text:"\\Vert",mode:"math"};return a.callFunction("\\Big",[m],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var a=t.fetch().text;if(a==="&"||a==="\\\\")t.consume();else if(a==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var s=[],o=[s],l=0;l<e.length;l++){for(var u=e[l],c=newCell(),d=0;d<u.length;d++)if(!isStartOfArrow(u[d]))c.body.push(u[d]);else{s.push(c),d+=1;var m=assertSymbolNodeType(u[d]).text,g=new Array(2);if(g[0]={type:"ordgroup",mode:"math",body:[]},g[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(m)>-1))if("<>AV".indexOf(m)>-1)for(var A=0;A<2;A++){for(var P=!0,W=d+1;W<u.length;W++){if(isLabelEnd(u[W],m)){P=!1,d=W;break}if(isStartOfArrow(u[W]))throw new ParseError("Missing a "+m+" character to complete a CD arrow.",u[W]);g[A].body.push(u[W])}if(P)throw new ParseError("Missing a "+m+" character to complete a CD arrow.",u[d])}else throw new ParseError('Expected one of "<>AV=|." after @',u[d]);var me=cdArrow(m,g,t),ve={type:"styling",body:[me],mode:"math",style:"display"};s.push(ve),c=newCell()}l%2===0?s.push(c):s.shift(),s=[],o.push(s)}t.gullet.endGroup(),t.gullet.endGroup();var He=new Array(o[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:o,arraystretch:1,addJot:!0,rowGaps:[null],cols:He,colSeparationType:"CD",hLinesBeforeRow:new Array(o.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:a,funcName:s}=t;return{type:"cdlabel",mode:a.mode,side:s.slice(4),label:e[0]}},htmlBuilder(t,e){var a=e.havingStyle(e.style.sup()),s=buildCommon.wrapFragment(buildGroup$1(t.label,a,e),e);return s.classes.push("cd-label-"+t.side),s.style.bottom=makeEm(.8-s.depth),s.height=0,s.depth=0,s},mathmlBuilder(t,e){var a=new mathMLTree.MathNode("mrow",[buildGroup(t.label,e)]);return a=new mathMLTree.MathNode("mpadded",[a]),a.setAttribute("width","0"),t.side==="left"&&a.setAttribute("lspace","-1width"),a.setAttribute("voffset","0.7em"),a=new mathMLTree.MathNode("mstyle",[a]),a.setAttribute("displaystyle","false"),a.setAttribute("scriptlevel","1"),a}});defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:a}=t;return{type:"cdlabelparent",mode:a.mode,fragment:e[0]}},htmlBuilder(t,e){var a=buildCommon.wrapFragment(buildGroup$1(t.fragment,e),e);return a.classes.push("cd-vert-arrow"),a},mathmlBuilder(t,e){return new mathMLTree.MathNode("mrow",[buildGroup(t.fragment,e)])}});defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:a}=t,s=assertNodeType(e[0],"ordgroup"),o=s.body,l="",u=0;u<o.length;u++){var c=assertNodeType(o[u],"textord");l+=c.text}var d=parseInt(l),m;if(isNaN(d))throw new ParseError("\\@char has non-numeric argument "+l);if(d<0||d>=1114111)throw new ParseError("\\@char with invalid code point "+l);return d<=65535?m=String.fromCharCode(d):(d-=65536,m=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:a.mode,text:m}}});var htmlBuilder$8=(t,e)=>{var a=buildExpression$1(t.body,e.withColor(t.color),!1);return buildCommon.makeFragment(a)},mathmlBuilder$7=(t,e)=>{var a=buildExpression(t.body,e.withColor(t.color)),s=new mathMLTree.MathNode("mstyle",a);return s.setAttribute("mathcolor",t.color),s};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:a}=t,s=assertNodeType(e[0],"color-token").color,o=e[1];return{type:"color",mode:a.mode,color:s,body:ordargument(o)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:a,breakOnTokenText:s}=t,o=assertNodeType(e[0],"color-token").color;a.gullet.macros.set("\\current@color",o);var l=a.parseExpression(!0,s);return{type:"color",mode:a.mode,color:o,body:l}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,a){var{parser:s}=t,o=s.gullet.future().text==="["?s.parseSizeGroup(!0):null,l=!s.settings.displayMode||!s.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:s.mode,newLine:l,size:o&&assertNodeType(o,"size").value}},htmlBuilder(t,e){var a=buildCommon.makeSpan(["mspace"],[],e);return t.newLine&&(a.classes.push("newline"),t.size&&(a.style.marginTop=makeEm(calculateSize(t.size,e)))),a},mathmlBuilder(t,e){var a=new mathMLTree.MathNode("mspace");return t.newLine&&(a.setAttribute("linebreak","newline"),t.size&&a.setAttribute("height",makeEm(calculateSize(t.size,e)))),a}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ParseError("Expected a control sequence",t);return e},getRHS=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},letCommand=(t,e,a,s)=>{var o=t.gullet.macros.get(a.text);o==null&&(a.noexpand=!0,o={tokens:[a],numArgs:0,unexpandable:!t.gullet.isExpandable(a.text)}),t.gullet.macros.set(e,o,s)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:a}=t;e.consumeSpaces();var s=e.fetch();if(globalMap[s.text])return(a==="\\global"||a==="\\\\globallong")&&(s.text=globalMap[s.text]),assertNodeType(e.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",s)}});defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:a}=t,s=e.gullet.popToken(),o=s.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(o))throw new ParseError("Expected a control sequence",s);for(var l=0,u,c=[[]];e.gullet.future().text!=="{";)if(s=e.gullet.popToken(),s.text==="#"){if(e.gullet.future().text==="{"){u=e.gullet.future(),c[l].push("{");break}if(s=e.gullet.popToken(),!/^[1-9]$/.test(s.text))throw new ParseError('Invalid argument number "'+s.text+'"');if(parseInt(s.text)!==l+1)throw new ParseError('Argument number "'+s.text+'" out of order');l++,c.push([])}else{if(s.text==="EOF")throw new ParseError("Expected a macro definition");c[l].push(s.text)}var{tokens:d}=e.gullet.consumeArg();return u&&d.unshift(u),(a==="\\edef"||a==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(o,{tokens:d,numArgs:l,delimiters:c},a===globalMap[a]),{type:"internal",mode:e.mode}}});defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:a}=t,s=checkControlSequence(e.gullet.popToken());e.gullet.consumeSpaces();var o=getRHS(e);return letCommand(e,s,o,a==="\\\\globallet"),{type:"internal",mode:e.mode}}});defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:a}=t,s=checkControlSequence(e.gullet.popToken()),o=e.gullet.popToken(),l=e.gullet.popToken();return letCommand(e,s,l,a==="\\\\globalfuture"),e.gullet.pushToken(l),e.gullet.pushToken(o),{type:"internal",mode:e.mode}}});var getMetrics=function t(e,a,s){var o=symbols.math[e]&&symbols.math[e].replace,l=getCharacterMetrics(o||e,a,s);if(!l)throw new Error("Unsupported symbol "+e+" and font size "+a+".");return l},styleWrap=function t(e,a,s,o){var l=s.havingBaseStyle(a),u=buildCommon.makeSpan(o.concat(l.sizingClasses(s)),[e],s),c=l.sizeMultiplier/s.sizeMultiplier;return u.height*=c,u.depth*=c,u.maxFontSize=l.sizeMultiplier,u},centerSpan=function t(e,a,s){var o=a.havingBaseStyle(s),l=(1-a.sizeMultiplier/o.sizeMultiplier)*a.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=makeEm(l),e.height-=l,e.depth+=l},makeSmallDelim=function t(e,a,s,o,l,u){var c=buildCommon.makeSymbol(e,"Main-Regular",l,o),d=styleWrap(c,a,o,u);return s&&centerSpan(d,o,a),d},mathrmSize=function t(e,a,s,o){return buildCommon.makeSymbol(e,"Size"+a+"-Regular",s,o)},makeLargeDelim=function t(e,a,s,o,l,u){var c=mathrmSize(e,a,l,o),d=styleWrap(buildCommon.makeSpan(["delimsizing","size"+a],[c],o),Style$1.TEXT,o,u);return s&&centerSpan(d,o,Style$1.TEXT),d},makeGlyphSpan=function t(e,a,s){var o;a==="Size1-Regular"?o="delim-size1":o="delim-size4";var l=buildCommon.makeSpan(["delimsizinginner",o],[buildCommon.makeSpan([],[buildCommon.makeSymbol(e,a,s)])]);return{type:"elem",elem:l}},makeInner=function t(e,a,s){var o=fontMetricsData["Size4-Regular"][e.charCodeAt(0)]?fontMetricsData["Size4-Regular"][e.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][e.charCodeAt(0)][4],l=new PathNode("inner",innerPath(e,Math.round(1e3*a))),u=new SvgNode([l],{width:makeEm(o),height:makeEm(a),style:"width:"+makeEm(o),viewBox:"0 0 "+1e3*o+" "+Math.round(1e3*a),preserveAspectRatio:"xMinYMin"}),c=buildCommon.makeSvgSpan([],[u],s);return c.height=a,c.style.height=makeEm(a),c.style.width=makeEm(o),{type:"elem",elem:c}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function t(e,a,s,o,l,u){var c,d,m,g,A="",P=0;c=m=g=e,d=null;var W="Size1-Regular";e==="\\uparrow"?m=g="":e==="\\Uparrow"?m=g="":e==="\\downarrow"?c=m="":e==="\\Downarrow"?c=m="":e==="\\updownarrow"?(c="\\uparrow",m="",g="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",m="",g="\\Downarrow"):utils.contains(verts,e)?(m="",A="vert",P=333):utils.contains(doubleVerts,e)?(m="",A="doublevert",P=556):e==="["||e==="\\lbrack"?(c="",m="",g="",W="Size4-Regular",A="lbrack",P=667):e==="]"||e==="\\rbrack"?(c="",m="",g="",W="Size4-Regular",A="rbrack",P=667):e==="\\lfloor"||e===""?(m=c="",g="",W="Size4-Regular",A="lfloor",P=667):e==="\\lceil"||e===""?(c="",m=g="",W="Size4-Regular",A="lceil",P=667):e==="\\rfloor"||e===""?(m=c="",g="",W="Size4-Regular",A="rfloor",P=667):e==="\\rceil"||e===""?(c="",m=g="",W="Size4-Regular",A="rceil",P=667):e==="("||e==="\\lparen"?(c="",m="",g="",W="Size4-Regular",A="lparen",P=875):e===")"||e==="\\rparen"?(c="",m="",g="",W="Size4-Regular",A="rparen",P=875):e==="\\{"||e==="\\lbrace"?(c="",d="",g="",m="",W="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",g="",m="",W="Size4-Regular"):e==="\\lgroup"||e===""?(c="",g="",m="",W="Size4-Regular"):e==="\\rgroup"||e===""?(c="",g="",m="",W="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",g="",m="",W="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",g="",m="",W="Size4-Regular");var me=getMetrics(c,W,l),ve=me.height+me.depth,He=getMetrics(m,W,l),De=He.height+He.depth,Xe=getMetrics(g,W,l),qe=Xe.height+Xe.depth,Rs=0,Vc=1;if(d!==null){var So=getMetrics(d,W,l);Rs=So.height+So.depth,Vc=2}var Do=ve+qe+Rs,eh=Math.max(0,Math.ceil((a-Do)/(Vc*De))),Ko=Do+eh*Vc*De,Ge=o.fontMetrics().axisHeight;s&&(Ge*=o.sizeMultiplier);var An=Ko/2-Ge,wt=[];if(A.length>0){var Bs=Ko-ve-qe,yh=Math.round(Ko*1e3),df=tallDelim(A,Math.round(Bs*1e3)),Fc=new PathNode(A,df),_h=(P/1e3).toFixed(3)+"em",qc=(yh/1e3).toFixed(3)+"em",Mh=new SvgNode([Fc],{width:_h,height:qc,viewBox:"0 0 "+P+" "+yh}),cf=buildCommon.makeSvgSpan([],[Mh],o);cf.height=yh/1e3,cf.style.width=_h,cf.style.height=qc,wt.push({type:"elem",elem:cf})}else{if(wt.push(makeGlyphSpan(g,W,l)),wt.push(lap),d===null){var mf=Ko-ve-qe+2*lapInEms;wt.push(makeInner(m,mf,o))}else{var a1=(Ko-ve-qe-Rs)/2+2*lapInEms;wt.push(makeInner(m,a1,o)),wt.push(lap),wt.push(makeGlyphSpan(d,W,l)),wt.push(lap),wt.push(makeInner(m,a1,o))}wt.push(lap),wt.push(makeGlyphSpan(c,W,l))}var s1=o.havingBaseStyle(Style$1.TEXT),E1=buildCommon.makeVList({positionType:"bottom",positionData:An,children:wt},s1);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[E1],s1),Style$1.TEXT,o,u)},vbPad=80,emPad=.08,sqrtSvg=function t(e,a,s,o,l){var u=sqrtPath(e,o,s),c=new PathNode(e,u),d=new SvgNode([c],{width:"400em",height:makeEm(a),viewBox:"0 0 400000 "+s,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[d],l)},makeSqrtImage=function t(e,a){var s=a.havingBaseSizing(),o=traverseSequence("\\surd",e*s.sizeMultiplier,stackLargeDelimiterSequence,s),l=s.sizeMultiplier,u=Math.max(0,a.minRuleThickness-a.fontMetrics().sqrtRuleThickness),c,d=0,m=0,g=0,A;return o.type==="small"?(g=1e3+1e3*u+vbPad,e<1?l=1:e<1.4&&(l=.7),d=(1+u+emPad)/l,m=(1+u)/l,c=sqrtSvg("sqrtMain",d,g,u,a),c.style.minWidth="0.853em",A=.833/l):o.type==="large"?(g=(1e3+vbPad)*sizeToMaxHeight[o.size],m=(sizeToMaxHeight[o.size]+u)/l,d=(sizeToMaxHeight[o.size]+u+emPad)/l,c=sqrtSvg("sqrtSize"+o.size,d,g,u,a),c.style.minWidth="1.02em",A=1/l):(d=e+u+emPad,m=e+u,g=Math.floor(1e3*e+u)+vbPad,c=sqrtSvg("sqrtTall",d,g,u,a),c.style.minWidth="0.742em",A=1.056),c.height=m,c.style.height=makeEm(d),{span:c,advanceWidth:A,ruleWidth:(a.fontMetrics().sqrtRuleThickness+u)*l}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function t(e,a,s,o,l){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),utils.contains(stackLargeDelimiters,e)||utils.contains(stackNeverDelimiters,e))return makeLargeDelim(e,a,!1,s,o,l);if(utils.contains(stackAlwaysDelimiters,e))return makeStackedDelim(e,sizeToMaxHeight[a],!1,s,o,l);throw new ParseError("Illegal delimiter: '"+e+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function t(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},traverseSequence=function t(e,a,s,o){for(var l=Math.min(2,3-o.style.size),u=l;u<s.length&&s[u].type!=="stack";u++){var c=getMetrics(e,delimTypeToFont(s[u]),"math"),d=c.height+c.depth;if(s[u].type==="small"){var m=o.havingBaseStyle(s[u].style);d*=m.sizeMultiplier}if(d>a)return s[u]}return s[s.length-1]},makeCustomSizedDelim=function t(e,a,s,o,l,u){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;utils.contains(stackNeverDelimiters,e)?c=stackNeverDelimiterSequence:utils.contains(stackLargeDelimiters,e)?c=stackLargeDelimiterSequence:c=stackAlwaysDelimiterSequence;var d=traverseSequence(e,a,c,o);return d.type==="small"?makeSmallDelim(e,d.style,s,o,l,u):d.type==="large"?makeLargeDelim(e,d.size,s,o,l,u):makeStackedDelim(e,a,s,o,l,u)},makeLeftRightDelim=function t(e,a,s,o,l,u){var c=o.fontMetrics().axisHeight*o.sizeMultiplier,d=901,m=5/o.fontMetrics().ptPerEm,g=Math.max(a-c,s+c),A=Math.max(g/500*d,2*g-m);return makeCustomSizedDelim(e,A,!0,o,l,u)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(t,e){var a=checkSymbolNodeType(t);if(a&&utils.contains(delimiters,a.text))return a;throw a?new ParseError("Invalid delimiter '"+a.text+"' after '"+e.funcName+"'",t):new ParseError("Invalid delimiter type '"+t.type+"'",t)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var a=checkDelimiter(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:delimiterSizes[t.funcName].size,mclass:delimiterSizes[t.funcName].mclass,delim:a.text}},htmlBuilder:(t,e)=>t.delim==="."?buildCommon.makeSpan([t.mclass]):delimiter.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(makeText(t.delim,t.mode));var a=new mathMLTree.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?a.setAttribute("fence","true"):a.setAttribute("fence","false"),a.setAttribute("stretchy","true");var s=makeEm(delimiter.sizeToMaxHeight[t.size]);return a.setAttribute("minsize",s),a.setAttribute("maxsize",s),a}});function assertParsed(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var a=t.parser.gullet.macros.get("\\current@color");if(a&&typeof a!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:checkDelimiter(e[0],t).text,color:a}}});defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var a=checkDelimiter(e[0],t),s=t.parser;++s.leftrightDepth;var o=s.parseExpression(!1);--s.leftrightDepth,s.expect("\\right",!1);var l=assertNodeType(s.parseFunction(),"leftright-right");return{type:"leftright",mode:s.mode,body:o,left:a.text,right:l.delim,rightColor:l.color}},htmlBuilder:(t,e)=>{assertParsed(t);for(var a=buildExpression$1(t.body,e,!0,["mopen","mclose"]),s=0,o=0,l=!1,u=0;u<a.length;u++)a[u].isMiddle?l=!0:(s=Math.max(a[u].height,s),o=Math.max(a[u].depth,o));s*=e.sizeMultiplier,o*=e.sizeMultiplier;var c;if(t.left==="."?c=makeNullDelimiter(e,["mopen"]):c=delimiter.leftRightDelim(t.left,s,o,e,t.mode,["mopen"]),a.unshift(c),l)for(var d=1;d<a.length;d++){var m=a[d],g=m.isMiddle;g&&(a[d]=delimiter.leftRightDelim(g.delim,s,o,g.options,t.mode,[]))}var A;if(t.right===".")A=makeNullDelimiter(e,["mclose"]);else{var P=t.rightColor?e.withColor(t.rightColor):e;A=delimiter.leftRightDelim(t.right,s,o,P,t.mode,["mclose"])}return a.push(A),buildCommon.makeSpan(["minner"],a,e)},mathmlBuilder:(t,e)=>{assertParsed(t);var a=buildExpression(t.body,e);if(t.left!=="."){var s=new mathMLTree.MathNode("mo",[makeText(t.left,t.mode)]);s.setAttribute("fence","true"),a.unshift(s)}if(t.right!=="."){var o=new mathMLTree.MathNode("mo",[makeText(t.right,t.mode)]);o.setAttribute("fence","true"),t.rightColor&&o.setAttribute("mathcolor",t.rightColor),a.push(o)}return makeRow(a)}});defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var a=checkDelimiter(e[0],t);if(!t.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",a);return{type:"middle",mode:t.parser.mode,delim:a.text}},htmlBuilder:(t,e)=>{var a;if(t.delim===".")a=makeNullDelimiter(e,[]);else{a=delimiter.sizedDelim(t.delim,1,e,t.mode,[]);var s={delim:t.delim,options:e};a.isMiddle=s}return a},mathmlBuilder:(t,e)=>{var a=t.delim==="\\vert"||t.delim==="|"?makeText("|","text"):makeText(t.delim,t.mode),s=new mathMLTree.MathNode("mo",[a]);return s.setAttribute("fence","true"),s.setAttribute("lspace","0.05em"),s.setAttribute("rspace","0.05em"),s}});var htmlBuilder$7=(t,e)=>{var a=buildCommon.wrapFragment(buildGroup$1(t.body,e),e),s=t.label.slice(1),o=e.sizeMultiplier,l,u=0,c=utils.isCharacterBox(t.body);if(s==="sout")l=buildCommon.makeSpan(["stretchy","sout"]),l.height=e.fontMetrics().defaultRuleThickness/o,u=-.5*e.fontMetrics().xHeight;else if(s==="phase"){var d=calculateSize({number:.6,unit:"pt"},e),m=calculateSize({number:.35,unit:"ex"},e),g=e.havingBaseSizing();o=o/g.sizeMultiplier;var A=a.height+a.depth+d+m;a.style.paddingLeft=makeEm(A/2+d);var P=Math.floor(1e3*A*o),W=phasePath(P),me=new SvgNode([new PathNode("phase",W)],{width:"400em",height:makeEm(P/1e3),viewBox:"0 0 400000 "+P,preserveAspectRatio:"xMinYMin slice"});l=buildCommon.makeSvgSpan(["hide-tail"],[me],e),l.style.height=makeEm(A),u=a.depth+d+m}else{/cancel/.test(s)?c||a.classes.push("cancel-pad"):s==="angl"?a.classes.push("anglpad"):a.classes.push("boxpad");var ve=0,He=0,De=0;/box/.test(s)?(De=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),ve=e.fontMetrics().fboxsep+(s==="colorbox"?0:De),He=ve):s==="angl"?(De=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),ve=4*De,He=Math.max(0,.25-a.depth)):(ve=c?.2:0,He=ve),l=stretchy.encloseSpan(a,s,ve,He,e),/fbox|boxed|fcolorbox/.test(s)?(l.style.borderStyle="solid",l.style.borderWidth=makeEm(De)):s==="angl"&&De!==.049&&(l.style.borderTopWidth=makeEm(De),l.style.borderRightWidth=makeEm(De)),u=a.depth+He,t.backgroundColor&&(l.style.backgroundColor=t.backgroundColor,t.borderColor&&(l.style.borderColor=t.borderColor))}var Xe;if(t.backgroundColor)Xe=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:u},{type:"elem",elem:a,shift:0}]},e);else{var qe=/cancel|phase/.test(s)?["svg-align"]:[];Xe=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:l,shift:u,wrapperClasses:qe}]},e)}return/cancel/.test(s)&&(Xe.height=a.height,Xe.depth=a.depth),/cancel/.test(s)&&!c?buildCommon.makeSpan(["mord","cancel-lap"],[Xe],e):buildCommon.makeSpan(["mord"],[Xe],e)},mathmlBuilder$6=(t,e)=>{var a=0,s=new mathMLTree.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(t.body,e)]);switch(t.label){case"\\cancel":s.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":s.setAttribute("notation","downdiagonalstrike");break;case"\\phase":s.setAttribute("notation","phasorangle");break;case"\\sout":s.setAttribute("notation","horizontalstrike");break;case"\\fbox":s.setAttribute("notation","box");break;case"\\angl":s.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(a=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,s.setAttribute("width","+"+2*a+"pt"),s.setAttribute("height","+"+2*a+"pt"),s.setAttribute("lspace",a+"pt"),s.setAttribute("voffset",a+"pt"),t.label==="\\fcolorbox"){var o=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);s.setAttribute("style","border: "+o+"em solid "+String(t.borderColor))}break;case"\\xcancel":s.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&s.setAttribute("mathbackground",t.backgroundColor),s};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,a){var{parser:s,funcName:o}=t,l=assertNodeType(e[0],"color-token").color,u=e[1];return{type:"enclose",mode:s.mode,label:o,backgroundColor:l,body:u}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,a){var{parser:s,funcName:o}=t,l=assertNodeType(e[0],"color-token").color,u=assertNodeType(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:s.mode,label:o,backgroundColor:u,borderColor:l,body:c}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:a}=t;return{type:"enclose",mode:a.mode,label:"\\fbox",body:e[0]}}});defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:a,funcName:s}=t,o=e[0];return{type:"enclose",mode:a.mode,label:s,body:o}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:a}=t;return{type:"enclose",mode:a.mode,label:"\\angl",body:e[0]}}});var _environments={};function defineEnvironment(t){for(var{type:e,names:a,props:s,handler:o,htmlBuilder:l,mathmlBuilder:u}=t,c={type:e,numArgs:s.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:o},d=0;d<a.length;++d)_environments[a[d]]=c;l&&(_htmlGroupBuilders[e]=l),u&&(_mathmlGroupBuilders[e]=u)}var _macros={};function defineMacro(t,e){_macros[t]=e}function getHLines(t){var e=[];t.consumeSpaces();var a=t.fetch().text;for(a==="\\relax"&&(t.consume(),t.consumeSpaces(),a=t.fetch().text);a==="\\hline"||a==="\\hdashline";)t.consume(),e.push(a==="\\hdashline"),t.consumeSpaces(),a=t.fetch().text;return e}var validateAmsEnvironmentContext=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ParseError("{"+t.envName+"} can be used only in display mode.")};function getAutoTag(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function parseArray(t,e,a){var{hskipBeforeAndAfter:s,addJot:o,cols:l,arraystretch:u,colSeparationType:c,autoTag:d,singleRow:m,emptySingleRow:g,maxNumCols:A,leqno:P}=e;if(t.gullet.beginGroup(),m||t.gullet.macros.set("\\cr","\\\\\\relax"),!u){var W=t.gullet.expandMacroAsText("\\arraystretch");if(W==null)u=1;else if(u=parseFloat(W),!u||u<0)throw new ParseError("Invalid \\arraystretch: "+W)}t.gullet.beginGroup();var me=[],ve=[me],He=[],De=[],Xe=d!=null?[]:void 0;function qe(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function Rs(){Xe&&(t.gullet.macros.get("\\df@tag")?(Xe.push(t.subparse([new Token("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):Xe.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(qe(),De.push(getHLines(t));;){var Vc=t.parseExpression(!1,m?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),Vc={type:"ordgroup",mode:t.mode,body:Vc},a&&(Vc={type:"styling",mode:t.mode,style:a,body:[Vc]}),me.push(Vc);var So=t.fetch().text;if(So==="&"){if(A&&me.length===A){if(m||c)throw new ParseError("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(So==="\\end"){Rs(),me.length===1&&Vc.type==="styling"&&Vc.body[0].body.length===0&&(ve.length>1||!g)&&ve.pop(),De.length<ve.length+1&&De.push([]);break}else if(So==="\\\\"){t.consume();var Do=void 0;t.gullet.future().text!==" "&&(Do=t.parseSizeGroup(!0)),He.push(Do?Do.value:null),Rs(),De.push(getHLines(t)),me=[],ve.push(me),qe()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:o,arraystretch:u,body:ve,cols:l,rowGaps:He,hskipBeforeAndAfter:s,hLinesBeforeRow:De,colSeparationType:c,tags:Xe,leqno:P}}function dCellStyle(t){return t.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function t(e,a){var s,o,l=e.body.length,u=e.hLinesBeforeRow,c=0,d=new Array(l),m=[],g=Math.max(a.fontMetrics().arrayRuleWidth,a.minRuleThickness),A=1/a.fontMetrics().ptPerEm,P=5*A;if(e.colSeparationType&&e.colSeparationType==="small"){var W=a.havingStyle(Style$1.SCRIPT).sizeMultiplier;P=.2778*(W/a.sizeMultiplier)}var me=e.colSeparationType==="CD"?calculateSize({number:3,unit:"ex"},a):12*A,ve=3*A,He=e.arraystretch*me,De=.7*He,Xe=.3*He,qe=0;function Rs(S1){for(var D1=0;D1<S1.length;++D1)D1>0&&(qe+=.25),m.push({pos:qe,isDashed:S1[D1]})}for(Rs(u[0]),s=0;s<e.body.length;++s){var Vc=e.body[s],So=De,Do=Xe;c<Vc.length&&(c=Vc.length);var eh=new Array(Vc.length);for(o=0;o<Vc.length;++o){var Ko=buildGroup$1(Vc[o],a);Do<Ko.depth&&(Do=Ko.depth),So<Ko.height&&(So=Ko.height),eh[o]=Ko}var Ge=e.rowGaps[s],An=0;Ge&&(An=calculateSize(Ge,a),An>0&&(An+=Xe,Do<An&&(Do=An),An=0)),e.addJot&&(Do+=ve),eh.height=So,eh.depth=Do,qe+=So,eh.pos=qe,qe+=Do+An,d[s]=eh,Rs(u[s+1])}var wt=qe/2+a.fontMetrics().axisHeight,Bs=e.cols||[],yh=[],df,Fc,_h=[];if(e.tags&&e.tags.some(S1=>S1))for(s=0;s<l;++s){var qc=d[s],Mh=qc.pos-wt,cf=e.tags[s],mf=void 0;cf===!0?mf=buildCommon.makeSpan(["eqn-num"],[],a):cf===!1?mf=buildCommon.makeSpan([],[],a):mf=buildCommon.makeSpan([],buildExpression$1(cf,a,!0),a),mf.depth=qc.depth,mf.height=qc.height,_h.push({type:"elem",elem:mf,shift:Mh})}for(o=0,Fc=0;o<c||Fc<Bs.length;++o,++Fc){for(var a1=Bs[Fc]||{},s1=!0;a1.type==="separator";){if(s1||(df=buildCommon.makeSpan(["arraycolsep"],[]),df.style.width=makeEm(a.fontMetrics().doubleRuleSep),yh.push(df)),a1.separator==="|"||a1.separator===":"){var E1=a1.separator==="|"?"solid":"dashed",T1=buildCommon.makeSpan(["vertical-separator"],[],a);T1.style.height=makeEm(qe),T1.style.borderRightWidth=makeEm(g),T1.style.borderRightStyle=E1,T1.style.margin="0 "+makeEm(-g/2);var z1=qe-wt;z1&&(T1.style.verticalAlign=makeEm(-z1)),yh.push(T1)}else throw new ParseError("Invalid separator type: "+a1.separator);Fc++,a1=Bs[Fc]||{},s1=!1}if(!(o>=c)){var W1=void 0;(o>0||e.hskipBeforeAndAfter)&&(W1=utils.deflt(a1.pregap,P),W1!==0&&(df=buildCommon.makeSpan(["arraycolsep"],[]),df.style.width=makeEm(W1),yh.push(df)));var m2=[];for(s=0;s<l;++s){var C2=d[s],A2=C2[o];if(A2){var b2=C2.pos-wt;A2.depth=C2.depth,A2.height=C2.height,m2.push({type:"elem",elem:A2,shift:b2})}}m2=buildCommon.makeVList({positionType:"individualShift",children:m2},a),m2=buildCommon.makeSpan(["col-align-"+(a1.align||"c")],[m2]),yh.push(m2),(o<c-1||e.hskipBeforeAndAfter)&&(W1=utils.deflt(a1.postgap,P),W1!==0&&(df=buildCommon.makeSpan(["arraycolsep"],[]),df.style.width=makeEm(W1),yh.push(df)))}}if(d=buildCommon.makeSpan(["mtable"],yh),m.length>0){for(var _2=buildCommon.makeLineSpan("hline",a,g),q1=buildCommon.makeLineSpan("hdashline",a,g),U1=[{type:"elem",elem:d,shift:0}];m.length>0;){var M2=m.pop(),x2=M2.pos-wt;M2.isDashed?U1.push({type:"elem",elem:q1,shift:x2}):U1.push({type:"elem",elem:_2,shift:x2})}d=buildCommon.makeVList({positionType:"individualShift",children:U1},a)}if(_h.length===0)return buildCommon.makeSpan(["mord"],[d],a);var p1=buildCommon.makeVList({positionType:"individualShift",children:_h},a);return p1=buildCommon.makeSpan(["tag"],[p1],a),buildCommon.makeFragment([d,p1])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function t(e,a){for(var s=[],o=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),l=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),u=0;u<e.body.length;u++){for(var c=e.body[u],d=[],m=0;m<c.length;m++)d.push(new mathMLTree.MathNode("mtd",[buildGroup(c[m],a)]));e.tags&&e.tags[u]&&(d.unshift(o),d.push(o),e.leqno?d.unshift(l):d.push(l)),s.push(new mathMLTree.MathNode("mtr",d))}var g=new mathMLTree.MathNode("mtable",s),A=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);g.setAttribute("rowspacing",makeEm(A));var P="",W="";if(e.cols&&e.cols.length>0){var me=e.cols,ve="",He=!1,De=0,Xe=me.length;me[0].type==="separator"&&(P+="top ",De=1),me[me.length-1].type==="separator"&&(P+="bottom ",Xe-=1);for(var qe=De;qe<Xe;qe++)me[qe].type==="align"?(W+=alignMap[me[qe].align],He&&(ve+="none "),He=!0):me[qe].type==="separator"&&He&&(ve+=me[qe].separator==="|"?"solid ":"dashed ",He=!1);g.setAttribute("columnalign",W.trim()),/[sd]/.test(ve)&&g.setAttribute("columnlines",ve.trim())}if(e.colSeparationType==="align"){for(var Rs=e.cols||[],Vc="",So=1;So<Rs.length;So++)Vc+=So%2?"0em ":"1em ";g.setAttribute("columnspacing",Vc.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?g.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?g.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?g.setAttribute("columnspacing","0.5em"):g.setAttribute("columnspacing","1em");var Do="",eh=e.hLinesBeforeRow;P+=eh[0].length>0?"left ":"",P+=eh[eh.length-1].length>0?"right ":"";for(var Ko=1;Ko<eh.length-1;Ko++)Do+=eh[Ko].length===0?"none ":eh[Ko][0]?"dashed ":"solid ";return/[sd]/.test(Do)&&g.setAttribute("rowlines",Do.trim()),P!==""&&(g=new mathMLTree.MathNode("menclose",[g]),g.setAttribute("notation",P.trim())),e.arraystretch&&e.arraystretch<1&&(g=new mathMLTree.MathNode("mstyle",[g]),g.setAttribute("scriptlevel","1")),g},alignedHandler=function t(e,a){e.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(e);var s=[],o=e.envName.indexOf("at")>-1?"alignat":"align",l=e.envName==="split",u=parseArray(e.parser,{cols:s,addJot:!0,autoTag:l?void 0:getAutoTag(e.envName),emptySingleRow:!0,colSeparationType:o,maxNumCols:l?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,m={type:"ordgroup",mode:e.mode,body:[]};if(a[0]&&a[0].type==="ordgroup"){for(var g="",A=0;A<a[0].body.length;A++){var P=assertNodeType(a[0].body[A],"textord");g+=P.text}c=Number(g),d=c*2}var W=!d;u.body.forEach(function(De){for(var Xe=1;Xe<De.length;Xe+=2){var qe=assertNodeType(De[Xe],"styling"),Rs=assertNodeType(qe.body[0],"ordgroup");Rs.body.unshift(m)}if(W)d<De.length&&(d=De.length);else{var Vc=De.length/2;if(c<Vc)throw new ParseError("Too many math in a row: "+("expected "+c+", but got "+Vc),De[0])}});for(var me=0;me<d;++me){var ve="r",He=0;me%2===1?ve="l":me>0&&W&&(He=1),s[me]={type:"align",align:ve,pregap:He,postgap:0}}return u.colSeparationType=W?"align":"alignat",u};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var a=checkSymbolNodeType(e[0]),s=a?[e[0]]:assertNodeType(e[0],"ordgroup").body,o=s.map(function(u){var c=assertSymbolNodeType(u),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+d,u)}),l={cols:o,hskipBeforeAndAfter:!0,maxNumCols:o.length};return parseArray(t.parser,l,dCellStyle(t.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],a="c",s={hskipBeforeAndAfter:!1,cols:[{type:"align",align:a}]};if(t.envName.charAt(t.envName.length-1)==="*"){var o=t.parser;if(o.consumeSpaces(),o.fetch().text==="["){if(o.consume(),o.consumeSpaces(),a=o.fetch().text,"lcr".indexOf(a)===-1)throw new ParseError("Expected l or c or r",o.nextToken);o.consume(),o.consumeSpaces(),o.expect("]"),o.consume(),s.cols=[{type:"align",align:a}]}}var l=parseArray(t.parser,s,dCellStyle(t.envName)),u=Math.max(0,...l.body.map(c=>c.length));return l.cols=new Array(u).fill({type:"align",align:a}),e?{type:"leftright",mode:t.mode,body:[l],left:e[0],right:e[1],rightColor:void 0}:l},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},a=parseArray(t.parser,e,"script");return a.colSeparationType="small",a},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var a=checkSymbolNodeType(e[0]),s=a?[e[0]]:assertNodeType(e[0],"ordgroup").body,o=s.map(function(u){var c=assertSymbolNodeType(u),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new ParseError("Unknown column alignment: "+d,u)});if(o.length>1)throw new ParseError("{subarray} can contain only one column");var l={cols:o,hskipBeforeAndAfter:!1,arraystretch:.5};if(l=parseArray(t.parser,l,"script"),l.body.length>0&&l.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return l},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},a=parseArray(t.parser,e,dCellStyle(t.envName));return{type:"leftright",mode:t.mode,body:[a],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){utils.contains(["gather","gather*"],t.envName)&&validateAmsEnvironmentContext(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return parseArray(t.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){validateAmsEnvironmentContext(t);var e={autoTag:getAutoTag(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return parseArray(t.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(t){return validateAmsEnvironmentContext(t),parseCD(t.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineMacro("\\nonumber","\\gdef\\@eqnsw{0}");defineMacro("\\notag","\\nonumber");defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ParseError(t.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:a,funcName:s}=t,o=e[0];if(o.type!=="ordgroup")throw new ParseError("Invalid environment name",o);for(var l="",u=0;u<o.body.length;++u)l+=assertNodeType(o.body[u],"textord").text;if(s==="\\begin"){if(!environments.hasOwnProperty(l))throw new ParseError("No such environment: "+l,o);var c=environments[l],{args:d,optArgs:m}=a.parseArguments("\\begin{"+l+"}",c),g={mode:a.mode,envName:l,parser:a},A=c.handler(g,d,m);a.expect("\\end",!1);var P=a.nextToken,W=assertNodeType(a.parseFunction(),"environment");if(W.name!==l)throw new ParseError("Mismatch: \\begin{"+l+"} matched by \\end{"+W.name+"}",P);return A}return{type:"environment",mode:a.mode,name:l,nameGroup:o}}});var htmlBuilder$5=(t,e)=>{var a=t.font,s=e.withFont(a);return buildGroup$1(t.body,s)},mathmlBuilder$4=(t,e)=>{var a=t.font,s=e.withFont(a);return buildGroup(t.body,s)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:a,funcName:s}=t,o=normalizeArgument(e[0]),l=s;return l in fontAliases&&(l=fontAliases[l]),{type:"font",mode:a.mode,font:l.slice(1),body:o}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:a}=t,s=e[0],o=utils.isCharacterBox(s);return{type:"mclass",mode:a.mode,mclass:binrelClass(s),body:[{type:"font",mode:a.mode,font:"boldsymbol",body:s}],isCharacterBox:o}}});defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:a,funcName:s,breakOnTokenText:o}=t,{mode:l}=a,u=a.parseExpression(!0,o),c="math"+s.slice(1);return{type:"font",mode:l,font:c,body:{type:"ordgroup",mode:a.mode,body:u}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(t,e)=>{var a=e;return t==="display"?a=a.id>=Style$1.SCRIPT.id?a.text():Style$1.DISPLAY:t==="text"&&a.size===Style$1.DISPLAY.size?a=Style$1.TEXT:t==="script"?a=Style$1.SCRIPT:t==="scriptscript"&&(a=Style$1.SCRIPTSCRIPT),a},htmlBuilder$4=(t,e)=>{var a=adjustStyle(t.size,e.style),s=a.fracNum(),o=a.fracDen(),l;l=e.havingStyle(s);var u=buildGroup$1(t.numer,l,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;u.height=u.height<c?c:u.height,u.depth=u.depth<d?d:u.depth}l=e.havingStyle(o);var m=buildGroup$1(t.denom,l,e),g,A,P;t.hasBarLine?(t.barSize?(A=calculateSize(t.barSize,e),g=buildCommon.makeLineSpan("frac-line",e,A)):g=buildCommon.makeLineSpan("frac-line",e),A=g.height,P=g.height):(g=null,A=0,P=e.fontMetrics().defaultRuleThickness);var W,me,ve;a.size===Style$1.DISPLAY.size||t.size==="display"?(W=e.fontMetrics().num1,A>0?me=3*P:me=7*P,ve=e.fontMetrics().denom1):(A>0?(W=e.fontMetrics().num2,me=P):(W=e.fontMetrics().num3,me=3*P),ve=e.fontMetrics().denom2);var He;if(g){var Xe=e.fontMetrics().axisHeight;W-u.depth-(Xe+.5*A)<me&&(W+=me-(W-u.depth-(Xe+.5*A))),Xe-.5*A-(m.height-ve)<me&&(ve+=me-(Xe-.5*A-(m.height-ve)));var qe=-(Xe-.5*A);He=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:m,shift:ve},{type:"elem",elem:g,shift:qe},{type:"elem",elem:u,shift:-W}]},e)}else{var De=W-u.depth-(m.height-ve);De<me&&(W+=.5*(me-De),ve+=.5*(me-De)),He=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:m,shift:ve},{type:"elem",elem:u,shift:-W}]},e)}l=e.havingStyle(a),He.height*=l.sizeMultiplier/e.sizeMultiplier,He.depth*=l.sizeMultiplier/e.sizeMultiplier;var Rs;a.size===Style$1.DISPLAY.size?Rs=e.fontMetrics().delim1:a.size===Style$1.SCRIPTSCRIPT.size?Rs=e.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:Rs=e.fontMetrics().delim2;var Vc,So;return t.leftDelim==null?Vc=makeNullDelimiter(e,["mopen"]):Vc=delimiter.customSizedDelim(t.leftDelim,Rs,!0,e.havingStyle(a),t.mode,["mopen"]),t.continued?So=buildCommon.makeSpan([]):t.rightDelim==null?So=makeNullDelimiter(e,["mclose"]):So=delimiter.customSizedDelim(t.rightDelim,Rs,!0,e.havingStyle(a),t.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(l.sizingClasses(e)),[Vc,buildCommon.makeSpan(["mfrac"],[He]),So],e)},mathmlBuilder$3=(t,e)=>{var a=new mathMLTree.MathNode("mfrac",[buildGroup(t.numer,e),buildGroup(t.denom,e)]);if(!t.hasBarLine)a.setAttribute("linethickness","0px");else if(t.barSize){var s=calculateSize(t.barSize,e);a.setAttribute("linethickness",makeEm(s))}var o=adjustStyle(t.size,e.style);if(o.size!==e.style.size){a=new mathMLTree.MathNode("mstyle",[a]);var l=o.size===Style$1.DISPLAY.size?"true":"false";a.setAttribute("displaystyle",l),a.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var u=[];if(t.leftDelim!=null){var c=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),u.push(c)}if(u.push(a),t.rightDelim!=null){var d=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),u.push(d)}return makeRow(u)}return a};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:a,funcName:s}=t,o=e[0],l=e[1],u,c=null,d=null,m="auto";switch(s){case"\\dfrac":case"\\frac":case"\\tfrac":u=!0;break;case"\\\\atopfrac":u=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":u=!1,c="(",d=")";break;case"\\\\bracefrac":u=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":u=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(s){case"\\dfrac":case"\\dbinom":m="display";break;case"\\tfrac":case"\\tbinom":m="text";break}return{type:"genfrac",mode:a.mode,continued:!1,numer:o,denom:l,hasBarLine:u,leftDelim:c,rightDelim:d,size:m,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:a,funcName:s}=t,o=e[0],l=e[1];return{type:"genfrac",mode:a.mode,continued:!0,numer:o,denom:l,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:a,token:s}=t,o;switch(a){case"\\over":o="\\frac";break;case"\\choose":o="\\binom";break;case"\\atop":o="\\\\atopfrac";break;case"\\brace":o="\\\\bracefrac";break;case"\\brack":o="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:o,token:s}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function t(e){var a=null;return e.length>0&&(a=e,a=a==="."?null:a),a};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:a}=t,s=e[4],o=e[5],l=normalizeArgument(e[0]),u=l.type==="atom"&&l.family==="open"?delimFromValue(l.text):null,c=normalizeArgument(e[1]),d=c.type==="atom"&&c.family==="close"?delimFromValue(c.text):null,m=assertNodeType(e[2],"size"),g,A=null;m.isBlank?g=!0:(A=m.value,g=A.number>0);var P="auto",W=e[3];if(W.type==="ordgroup"){if(W.body.length>0){var me=assertNodeType(W.body[0],"textord");P=stylArray[Number(me.text)]}}else W=assertNodeType(W,"textord"),P=stylArray[Number(W.text)];return{type:"genfrac",mode:a.mode,numer:s,denom:o,continued:!1,hasBarLine:g,barSize:A,leftDelim:u,rightDelim:d,size:P}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:a,funcName:s,token:o}=t;return{type:"infix",mode:a.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(e[0],"size").value,token:o}}});defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:a,funcName:s}=t,o=e[0],l=assert$1(assertNodeType(e[1],"infix").size),u=e[2],c=l.number>0;return{type:"genfrac",mode:a.mode,numer:o,denom:u,continued:!1,hasBarLine:c,barSize:l,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(t,e)=>{var a=e.style,s,o;t.type==="supsub"?(s=t.sup?buildGroup$1(t.sup,e.havingStyle(a.sup()),e):buildGroup$1(t.sub,e.havingStyle(a.sub()),e),o=assertNodeType(t.base,"horizBrace")):o=assertNodeType(t,"horizBrace");var l=buildGroup$1(o.base,e.havingBaseStyle(Style$1.DISPLAY)),u=stretchy.svgSpan(o,e),c;if(o.isOver?(c=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.1},{type:"elem",elem:u}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=buildCommon.makeVList({positionType:"bottom",positionData:l.depth+.1+u.height,children:[{type:"elem",elem:u},{type:"kern",size:.1},{type:"elem",elem:l}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),s){var d=buildCommon.makeSpan(["mord",o.isOver?"mover":"munder"],[c],e);o.isOver?c=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:s}]},e):c=buildCommon.makeVList({positionType:"bottom",positionData:d.depth+.2+s.height+s.depth,children:[{type:"elem",elem:s},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return buildCommon.makeSpan(["mord",o.isOver?"mover":"munder"],[c],e)},mathmlBuilder$2=(t,e)=>{var a=stretchy.mathMLnode(t.label);return new mathMLTree.MathNode(t.isOver?"mover":"munder",[buildGroup(t.base,e),a])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:a,funcName:s}=t;return{type:"horizBrace",mode:a.mode,label:s,isOver:/^\\over/.test(s),base:e[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2});defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:a}=t,s=e[1],o=assertNodeType(e[0],"url").url;return a.settings.isTrusted({command:"\\href",url:o})?{type:"href",mode:a.mode,href:o,body:ordargument(s)}:a.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var a=buildExpression$1(t.body,e,!1);return buildCommon.makeAnchor(t.href,[],a,e)},mathmlBuilder:(t,e)=>{var a=buildExpressionRow(t.body,e);return a instanceof MathNode||(a=new MathNode("mrow",[a])),a.setAttribute("href",t.href),a}});defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:a}=t,s=assertNodeType(e[0],"url").url;if(!a.settings.isTrusted({command:"\\url",url:s}))return a.formatUnsupportedCmd("\\url");for(var o=[],l=0;l<s.length;l++){var u=s[l];u==="~"&&(u="\\textasciitilde"),o.push({type:"textord",mode:"text",text:u})}var c={type:"text",mode:a.mode,font:"\\texttt",body:o};return{type:"href",mode:a.mode,href:s,body:ordargument(c)}}});defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:a}=t;return{type:"hbox",mode:a.mode,body:ordargument(e[0])}},htmlBuilder(t,e){var a=buildExpression$1(t.body,e,!1);return buildCommon.makeFragment(a)},mathmlBuilder(t,e){return new mathMLTree.MathNode("mrow",buildExpression(t.body,e))}});defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:a,funcName:s,token:o}=t,l=assertNodeType(e[0],"raw").string,u=e[1];a.settings.strict&&a.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(s){case"\\htmlClass":d.class=l,c={command:"\\htmlClass",class:l};break;case"\\htmlId":d.id=l,c={command:"\\htmlId",id:l};break;case"\\htmlStyle":d.style=l,c={command:"\\htmlStyle",style:l};break;case"\\htmlData":{for(var m=l.split(","),g=0;g<m.length;g++){var A=m[g].split("=");if(A.length!==2)throw new ParseError("Error parsing key-value for \\htmlData");d["data-"+A[0].trim()]=A[1].trim()}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return a.settings.isTrusted(c)?{type:"html",mode:a.mode,attributes:d,body:ordargument(u)}:a.formatUnsupportedCmd(s)},htmlBuilder:(t,e)=>{var a=buildExpression$1(t.body,e,!1),s=["enclosing"];t.attributes.class&&s.push(...t.attributes.class.trim().split(/\s+/));var o=buildCommon.makeSpan(s,a,e);for(var l in t.attributes)l!=="class"&&t.attributes.hasOwnProperty(l)&&o.setAttribute(l,t.attributes[l]);return o},mathmlBuilder:(t,e)=>buildExpressionRow(t.body,e)});defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:a}=t;return{type:"htmlmathml",mode:a.mode,html:ordargument(e[0]),mathml:ordargument(e[1])}},htmlBuilder:(t,e)=>{var a=buildExpression$1(t.html,e,!1);return buildCommon.makeFragment(a)},mathmlBuilder:(t,e)=>buildExpressionRow(t.mathml,e)});var sizeData=function t(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!a)throw new ParseError("Invalid size: '"+e+"' in \\includegraphics");var s={number:+(a[1]+a[2]),unit:a[3]};if(!validUnit(s))throw new ParseError("Invalid unit: '"+s.unit+"' in \\includegraphics.");return s};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,a)=>{var{parser:s}=t,o={number:0,unit:"em"},l={number:.9,unit:"em"},u={number:0,unit:"em"},c="";if(a[0])for(var d=assertNodeType(a[0],"raw").string,m=d.split(","),g=0;g<m.length;g++){var A=m[g].split("=");if(A.length===2){var P=A[1].trim();switch(A[0].trim()){case"alt":c=P;break;case"width":o=sizeData(P);break;case"height":l=sizeData(P);break;case"totalheight":u=sizeData(P);break;default:throw new ParseError("Invalid key: '"+A[0]+"' in \\includegraphics.")}}}var W=assertNodeType(e[0],"url").url;return c===""&&(c=W,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),s.settings.isTrusted({command:"\\includegraphics",url:W})?{type:"includegraphics",mode:s.mode,alt:c,width:o,height:l,totalheight:u,src:W}:s.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var a=calculateSize(t.height,e),s=0;t.totalheight.number>0&&(s=calculateSize(t.totalheight,e)-a);var o=0;t.width.number>0&&(o=calculateSize(t.width,e));var l={height:makeEm(a+s)};o>0&&(l.width=makeEm(o)),s>0&&(l.verticalAlign=makeEm(-s));var u=new Img(t.src,t.alt,l);return u.height=a,u.depth=s,u},mathmlBuilder:(t,e)=>{var a=new mathMLTree.MathNode("mglyph",[]);a.setAttribute("alt",t.alt);var s=calculateSize(t.height,e),o=0;if(t.totalheight.number>0&&(o=calculateSize(t.totalheight,e)-s,a.setAttribute("valign",makeEm(-o))),a.setAttribute("height",makeEm(s+o)),t.width.number>0){var l=calculateSize(t.width,e);a.setAttribute("width",makeEm(l))}return a.setAttribute("src",t.src),a}});defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:a,funcName:s}=t,o=assertNodeType(e[0],"size");if(a.settings.strict){var l=s[1]==="m",u=o.value.unit==="mu";l?(u||a.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+s+" supports only mu units, "+("not "+o.value.unit+" units")),a.mode!=="math"&&a.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+s+" works only in math mode")):u&&a.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+s+" doesn't support mu units")}return{type:"kern",mode:a.mode,dimension:o.value}},htmlBuilder(t,e){return buildCommon.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var a=calculateSize(t.dimension,e);return new mathMLTree.SpaceNode(a)}});defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:a,funcName:s}=t,o=e[0];return{type:"lap",mode:a.mode,alignment:s.slice(5),body:o}},htmlBuilder:(t,e)=>{var a;t.alignment==="clap"?(a=buildCommon.makeSpan([],[buildGroup$1(t.body,e)]),a=buildCommon.makeSpan(["inner"],[a],e)):a=buildCommon.makeSpan(["inner"],[buildGroup$1(t.body,e)]);var s=buildCommon.makeSpan(["fix"],[]),o=buildCommon.makeSpan([t.alignment],[a,s],e),l=buildCommon.makeSpan(["strut"]);return l.style.height=makeEm(o.height+o.depth),o.depth&&(l.style.verticalAlign=makeEm(-o.depth)),o.children.unshift(l),o=buildCommon.makeSpan(["thinbox"],[o],e),buildCommon.makeSpan(["mord","vbox"],[o],e)},mathmlBuilder:(t,e)=>{var a=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)]);if(t.alignment!=="rlap"){var s=t.alignment==="llap"?"-1":"-0.5";a.setAttribute("lspace",s+"width")}return a.setAttribute("width","0px"),a}});defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:a,parser:s}=t,o=s.mode;s.switchMode("math");var l=a==="\\("?"\\)":"$",u=s.parseExpression(!1,l);return s.expect(l),s.switchMode(o),{type:"styling",mode:s.mode,style:"text",body:u}}});defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ParseError("Mismatched "+t.funcName)}});var chooseMathStyle=(t,e)=>{switch(e.style.size){case Style$1.DISPLAY.size:return t.display;case Style$1.TEXT.size:return t.text;case Style$1.SCRIPT.size:return t.script;case Style$1.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:a}=t;return{type:"mathchoice",mode:a.mode,display:ordargument(e[0]),text:ordargument(e[1]),script:ordargument(e[2]),scriptscript:ordargument(e[3])}},htmlBuilder:(t,e)=>{var a=chooseMathStyle(t,e),s=buildExpression$1(a,e,!1);return buildCommon.makeFragment(s)},mathmlBuilder:(t,e)=>{var a=chooseMathStyle(t,e);return buildExpressionRow(a,e)}});var assembleSupSub=(t,e,a,s,o,l,u)=>{t=buildCommon.makeSpan([],[t]);var c=a&&utils.isCharacterBox(a),d,m;if(e){var g=buildGroup$1(e,s.havingStyle(o.sup()),s);m={elem:g,kern:Math.max(s.fontMetrics().bigOpSpacing1,s.fontMetrics().bigOpSpacing3-g.depth)}}if(a){var A=buildGroup$1(a,s.havingStyle(o.sub()),s);d={elem:A,kern:Math.max(s.fontMetrics().bigOpSpacing2,s.fontMetrics().bigOpSpacing4-A.height)}}var P;if(m&&d){var W=s.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+u;P=buildCommon.makeVList({positionType:"bottom",positionData:W,children:[{type:"kern",size:s.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:makeEm(-l)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:m.kern},{type:"elem",elem:m.elem,marginLeft:makeEm(l)},{type:"kern",size:s.fontMetrics().bigOpSpacing5}]},s)}else if(d){var me=t.height-u;P=buildCommon.makeVList({positionType:"top",positionData:me,children:[{type:"kern",size:s.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:makeEm(-l)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},s)}else if(m){var ve=t.depth+u;P=buildCommon.makeVList({positionType:"bottom",positionData:ve,children:[{type:"elem",elem:t},{type:"kern",size:m.kern},{type:"elem",elem:m.elem,marginLeft:makeEm(l)},{type:"kern",size:s.fontMetrics().bigOpSpacing5}]},s)}else return t;var He=[P];if(d&&l!==0&&!c){var De=buildCommon.makeSpan(["mspace"],[],s);De.style.marginRight=makeEm(l),He.unshift(De)}return buildCommon.makeSpan(["mop","op-limits"],He,s)},noSuccessor=["\\smallint"],htmlBuilder$2=(t,e)=>{var a,s,o=!1,l;t.type==="supsub"?(a=t.sup,s=t.sub,l=assertNodeType(t.base,"op"),o=!0):l=assertNodeType(t,"op");var u=e.style,c=!1;u.size===Style$1.DISPLAY.size&&l.symbol&&!utils.contains(noSuccessor,l.name)&&(c=!0);var d;if(l.symbol){var m=c?"Size2-Regular":"Size1-Regular",g="";if((l.name==="\\oiint"||l.name==="\\oiiint")&&(g=l.name.slice(1),l.name=g==="oiint"?"\\iint":"\\iiint"),d=buildCommon.makeSymbol(l.name,m,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),g.length>0){var A=d.italic,P=buildCommon.staticSvg(g+"Size"+(c?"2":"1"),e);d=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:P,shift:c?.08:0}]},e),l.name="\\"+g,d.classes.unshift("mop"),d.italic=A}}else if(l.body){var W=buildExpression$1(l.body,e,!0);W.length===1&&W[0]instanceof SymbolNode?(d=W[0],d.classes[0]="mop"):d=buildCommon.makeSpan(["mop"],W,e)}else{for(var me=[],ve=1;ve<l.name.length;ve++)me.push(buildCommon.mathsym(l.name[ve],l.mode,e));d=buildCommon.makeSpan(["mop"],me,e)}var He=0,De=0;return(d instanceof SymbolNode||l.name==="\\oiint"||l.name==="\\oiiint")&&!l.suppressBaseShift&&(He=(d.height-d.depth)/2-e.fontMetrics().axisHeight,De=d.italic),o?assembleSupSub(d,a,s,e,u,De,He):(He&&(d.style.position="relative",d.style.top=makeEm(He)),d)},mathmlBuilder$1=(t,e)=>{var a;if(t.symbol)a=new MathNode("mo",[makeText(t.name,t.mode)]),utils.contains(noSuccessor,t.name)&&a.setAttribute("largeop","false");else if(t.body)a=new MathNode("mo",buildExpression(t.body,e));else{a=new MathNode("mi",[new TextNode(t.name.slice(1))]);var s=new MathNode("mo",[makeText("","text")]);t.parentIsSupSub?a=new MathNode("mrow",[a,s]):a=newDocumentFragment([a,s])}return a},singleCharBigOps={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:a,funcName:s}=t,o=s;return o.length===1&&(o=singleCharBigOps[o]),{type:"op",mode:a.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:o}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:a}=t,s=e[0];return{type:"op",mode:a.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(s)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:a}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:a}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:a}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:a}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(t){var{parser:e,funcName:a}=t,s=a;return s.length===1&&(s=singleCharIntegrals[s]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(t,e)=>{var a,s,o=!1,l;t.type==="supsub"?(a=t.sup,s=t.sub,l=assertNodeType(t.base,"operatorname"),o=!0):l=assertNodeType(t,"operatorname");var u;if(l.body.length>0){for(var c=l.body.map(A=>{var P=A.text;return typeof P=="string"?{type:"textord",mode:A.mode,text:P}:A}),d=buildExpression$1(c,e.withFont("mathrm"),!0),m=0;m<d.length;m++){var g=d[m];g instanceof SymbolNode&&(g.text=g.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}u=buildCommon.makeSpan(["mop"],d,e)}else u=buildCommon.makeSpan(["mop"],[],e);return o?assembleSupSub(u,a,s,e,e.style,0,0):u},mathmlBuilder=(t,e)=>{for(var a=buildExpression(t.body,e.withFont("mathrm")),s=!0,o=0;o<a.length;o++){var l=a[o];if(!(l instanceof mathMLTree.SpaceNode))if(l instanceof mathMLTree.MathNode)switch(l.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var u=l.children[0];l.children.length===1&&u instanceof mathMLTree.TextNode?u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):s=!1;break}default:s=!1}else s=!1}if(s){var c=a.map(g=>g.toText()).join("");a=[new mathMLTree.TextNode(c)]}var d=new mathMLTree.MathNode("mi",a);d.setAttribute("mathvariant","normal");var m=new mathMLTree.MathNode("mo",[makeText("","text")]);return t.parentIsSupSub?new mathMLTree.MathNode("mrow",[d,m]):mathMLTree.newDocumentFragment([d,m])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:a,funcName:s}=t,o=e[0];return{type:"operatorname",mode:a.mode,body:ordargument(o),alwaysHandleSupSub:s==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder});defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");defineFunctionBuilders({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?buildCommon.makeFragment(buildExpression$1(t.body,e,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(t.body,e,!0),e)},mathmlBuilder(t,e){return buildExpressionRow(t.body,e,!0)}});defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:a}=t,s=e[0];return{type:"overline",mode:a.mode,body:s}},htmlBuilder(t,e){var a=buildGroup$1(t.body,e.havingCrampedStyle()),s=buildCommon.makeLineSpan("overline-line",e),o=e.fontMetrics().defaultRuleThickness,l=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:3*o},{type:"elem",elem:s},{type:"kern",size:o}]},e);return buildCommon.makeSpan(["mord","overline"],[l],e)},mathmlBuilder(t,e){var a=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);a.setAttribute("stretchy","true");var s=new mathMLTree.MathNode("mover",[buildGroup(t.body,e),a]);return s.setAttribute("accent","true"),s}});defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:a}=t,s=e[0];return{type:"phantom",mode:a.mode,body:ordargument(s)}},htmlBuilder:(t,e)=>{var a=buildExpression$1(t.body,e.withPhantom(),!1);return buildCommon.makeFragment(a)},mathmlBuilder:(t,e)=>{var a=buildExpression(t.body,e);return new mathMLTree.MathNode("mphantom",a)}});defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:a}=t,s=e[0];return{type:"hphantom",mode:a.mode,body:s}},htmlBuilder:(t,e)=>{var a=buildCommon.makeSpan([],[buildGroup$1(t.body,e.withPhantom())]);if(a.height=0,a.depth=0,a.children)for(var s=0;s<a.children.length;s++)a.children[s].height=0,a.children[s].depth=0;return a=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a}]},e),buildCommon.makeSpan(["mord"],[a],e)},mathmlBuilder:(t,e)=>{var a=buildExpression(ordargument(t.body),e),s=new mathMLTree.MathNode("mphantom",a),o=new mathMLTree.MathNode("mpadded",[s]);return o.setAttribute("height","0px"),o.setAttribute("depth","0px"),o}});defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:a}=t,s=e[0];return{type:"vphantom",mode:a.mode,body:s}},htmlBuilder:(t,e)=>{var a=buildCommon.makeSpan(["inner"],[buildGroup$1(t.body,e.withPhantom())]),s=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[a,s],e)},mathmlBuilder:(t,e)=>{var a=buildExpression(ordargument(t.body),e),s=new mathMLTree.MathNode("mphantom",a),o=new mathMLTree.MathNode("mpadded",[s]);return o.setAttribute("width","0px"),o}});defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:a}=t,s=assertNodeType(e[0],"size").value,o=e[1];return{type:"raisebox",mode:a.mode,dy:s,body:o}},htmlBuilder(t,e){var a=buildGroup$1(t.body,e),s=calculateSize(t.dy,e);return buildCommon.makeVList({positionType:"shift",positionData:-s,children:[{type:"elem",elem:a}]},e)},mathmlBuilder(t,e){var a=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)]),s=t.dy.number+t.dy.unit;return a.setAttribute("voffset",s),a}});defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,a){var{parser:s}=t,o=a[0],l=assertNodeType(e[0],"size"),u=assertNodeType(e[1],"size");return{type:"rule",mode:s.mode,shift:o&&assertNodeType(o,"size").value,width:l.value,height:u.value}},htmlBuilder(t,e){var a=buildCommon.makeSpan(["mord","rule"],[],e),s=calculateSize(t.width,e),o=calculateSize(t.height,e),l=t.shift?calculateSize(t.shift,e):0;return a.style.borderRightWidth=makeEm(s),a.style.borderTopWidth=makeEm(o),a.style.bottom=makeEm(l),a.width=s,a.height=o+l,a.depth=-l,a.maxFontSize=o*1.125*e.sizeMultiplier,a},mathmlBuilder(t,e){var a=calculateSize(t.width,e),s=calculateSize(t.height,e),o=t.shift?calculateSize(t.shift,e):0,l=e.color&&e.getColor()||"black",u=new mathMLTree.MathNode("mspace");u.setAttribute("mathbackground",l),u.setAttribute("width",makeEm(a)),u.setAttribute("height",makeEm(s));var c=new mathMLTree.MathNode("mpadded",[u]);return o>=0?c.setAttribute("height",makeEm(o)):(c.setAttribute("height",makeEm(o)),c.setAttribute("depth",makeEm(-o))),c.setAttribute("voffset",makeEm(o)),c}});function sizingGroup(t,e,a){for(var s=buildExpression$1(t,e,!1),o=e.sizeMultiplier/a.sizeMultiplier,l=0;l<s.length;l++){var u=s[l].classes.indexOf("sizing");u<0?Array.prototype.push.apply(s[l].classes,e.sizingClasses(a)):s[l].classes[u+1]==="reset-size"+e.size&&(s[l].classes[u+1]="reset-size"+a.size),s[l].height*=o,s[l].depth*=o}return buildCommon.makeFragment(s)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(t,e)=>{var a=e.havingSize(t.size);return sizingGroup(t.body,a,e)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:a,funcName:s,parser:o}=t,l=o.parseExpression(!1,a);return{type:"sizing",mode:o.mode,size:sizeFuncs.indexOf(s)+1,body:l}},htmlBuilder,mathmlBuilder:(t,e)=>{var a=e.havingSize(t.size),s=buildExpression(t.body,a),o=new mathMLTree.MathNode("mstyle",s);return o.setAttribute("mathsize",makeEm(a.sizeMultiplier)),o}});defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,a)=>{var{parser:s}=t,o=!1,l=!1,u=a[0]&&assertNodeType(a[0],"ordgroup");if(u)for(var c="",d=0;d<u.body.length;++d){var m=u.body[d];if(c=m.text,c==="t")o=!0;else if(c==="b")l=!0;else{o=!1,l=!1;break}}else o=!0,l=!0;var g=e[0];return{type:"smash",mode:s.mode,body:g,smashHeight:o,smashDepth:l}},htmlBuilder:(t,e)=>{var a=buildCommon.makeSpan([],[buildGroup$1(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return a;if(t.smashHeight&&(a.height=0,a.children))for(var s=0;s<a.children.length;s++)a.children[s].height=0;if(t.smashDepth&&(a.depth=0,a.children))for(var o=0;o<a.children.length;o++)a.children[o].depth=0;var l=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a}]},e);return buildCommon.makeSpan(["mord"],[l],e)},mathmlBuilder:(t,e)=>{var a=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)]);return t.smashHeight&&a.setAttribute("height","0px"),t.smashDepth&&a.setAttribute("depth","0px"),a}});defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,a){var{parser:s}=t,o=a[0],l=e[0];return{type:"sqrt",mode:s.mode,body:l,index:o}},htmlBuilder(t,e){var a=buildGroup$1(t.body,e.havingCrampedStyle());a.height===0&&(a.height=e.fontMetrics().xHeight),a=buildCommon.wrapFragment(a,e);var s=e.fontMetrics(),o=s.defaultRuleThickness,l=o;e.style.id<Style$1.TEXT.id&&(l=e.fontMetrics().xHeight);var u=o+l/4,c=a.height+a.depth+u+o,{span:d,ruleWidth:m,advanceWidth:g}=delimiter.sqrtImage(c,e),A=d.height-m;A>a.height+a.depth+u&&(u=(u+A-a.height-a.depth)/2);var P=d.height-a.height-u-m;a.style.paddingLeft=makeEm(g);var W=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a,wrapperClasses:["svg-align"]},{type:"kern",size:-(a.height+P)},{type:"elem",elem:d},{type:"kern",size:m}]},e);if(t.index){var me=e.havingStyle(Style$1.SCRIPTSCRIPT),ve=buildGroup$1(t.index,me,e),He=.6*(W.height-W.depth),De=buildCommon.makeVList({positionType:"shift",positionData:-He,children:[{type:"elem",elem:ve}]},e),Xe=buildCommon.makeSpan(["root"],[De]);return buildCommon.makeSpan(["mord","sqrt"],[Xe,W],e)}else return buildCommon.makeSpan(["mord","sqrt"],[W],e)},mathmlBuilder(t,e){var{body:a,index:s}=t;return s?new mathMLTree.MathNode("mroot",[buildGroup(a,e),buildGroup(s,e)]):new mathMLTree.MathNode("msqrt",[buildGroup(a,e)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:a,funcName:s,parser:o}=t,l=o.parseExpression(!0,a),u=s.slice(1,s.length-5);return{type:"styling",mode:o.mode,style:u,body:l}},htmlBuilder(t,e){var a=styleMap[t.style],s=e.havingStyle(a).withFont("");return sizingGroup(t.body,s,e)},mathmlBuilder(t,e){var a=styleMap[t.style],s=e.havingStyle(a),o=buildExpression(t.body,s),l=new mathMLTree.MathNode("mstyle",o),u={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=u[t.style];return l.setAttribute("scriptlevel",c[0]),l.setAttribute("displaystyle",c[1]),l}});var htmlBuilderDelegate=function t(e,a){var s=e.base;if(s)if(s.type==="op"){var o=s.limits&&(a.style.size===Style$1.DISPLAY.size||s.alwaysHandleSupSub);return o?htmlBuilder$2:null}else if(s.type==="operatorname"){var l=s.alwaysHandleSupSub&&(a.style.size===Style$1.DISPLAY.size||s.limits);return l?htmlBuilder$1:null}else{if(s.type==="accent")return utils.isCharacterBox(s.base)?htmlBuilder$a:null;if(s.type==="horizBrace"){var u=!e.sub;return u===s.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(t,e){var a=htmlBuilderDelegate(t,e);if(a)return a(t,e);var{base:s,sup:o,sub:l}=t,u=buildGroup$1(s,e),c,d,m=e.fontMetrics(),g=0,A=0,P=s&&utils.isCharacterBox(s);if(o){var W=e.havingStyle(e.style.sup());c=buildGroup$1(o,W,e),P||(g=u.height-W.fontMetrics().supDrop*W.sizeMultiplier/e.sizeMultiplier)}if(l){var me=e.havingStyle(e.style.sub());d=buildGroup$1(l,me,e),P||(A=u.depth+me.fontMetrics().subDrop*me.sizeMultiplier/e.sizeMultiplier)}var ve;e.style===Style$1.DISPLAY?ve=m.sup1:e.style.cramped?ve=m.sup3:ve=m.sup2;var He=e.sizeMultiplier,De=makeEm(.5/m.ptPerEm/He),Xe=null;if(d){var qe=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(u instanceof SymbolNode||qe)&&(Xe=makeEm(-u.italic))}var Rs;if(c&&d){g=Math.max(g,ve,c.depth+.25*m.xHeight),A=Math.max(A,m.sub2);var Vc=m.defaultRuleThickness,So=4*Vc;if(g-c.depth-(d.height-A)<So){A=So-(g-c.depth)+d.height;var Do=.8*m.xHeight-(g-c.depth);Do>0&&(g+=Do,A-=Do)}var eh=[{type:"elem",elem:d,shift:A,marginRight:De,marginLeft:Xe},{type:"elem",elem:c,shift:-g,marginRight:De}];Rs=buildCommon.makeVList({positionType:"individualShift",children:eh},e)}else if(d){A=Math.max(A,m.sub1,d.height-.8*m.xHeight);var Ko=[{type:"elem",elem:d,marginLeft:Xe,marginRight:De}];Rs=buildCommon.makeVList({positionType:"shift",positionData:A,children:Ko},e)}else if(c)g=Math.max(g,ve,c.depth+.25*m.xHeight),Rs=buildCommon.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:c,marginRight:De}]},e);else throw new Error("supsub must have either sup or sub.");var Ge=getTypeOfDomTree(u,"right")||"mord";return buildCommon.makeSpan([Ge],[u,buildCommon.makeSpan(["msupsub"],[Rs])],e)},mathmlBuilder(t,e){var a=!1,s,o;t.base&&t.base.type==="horizBrace"&&(o=!!t.sup,o===t.base.isOver&&(a=!0,s=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var l=[buildGroup(t.base,e)];t.sub&&l.push(buildGroup(t.sub,e)),t.sup&&l.push(buildGroup(t.sup,e));var u;if(a)u=s?"mover":"munder";else if(t.sub)if(t.sup){var m=t.base;m&&m.type==="op"&&m.limits&&e.style===Style$1.DISPLAY||m&&m.type==="operatorname"&&m.alwaysHandleSupSub&&(e.style===Style$1.DISPLAY||m.limits)?u="munderover":u="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Style$1.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Style$1.DISPLAY)?u="munder":u="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Style$1.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Style$1.DISPLAY)?u="mover":u="msup"}return new mathMLTree.MathNode(u,l)}});defineFunctionBuilders({type:"atom",htmlBuilder(t,e){return buildCommon.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var a=new mathMLTree.MathNode("mo",[makeText(t.text,t.mode)]);if(t.family==="bin"){var s=getVariant(t,e);s==="bold-italic"&&a.setAttribute("mathvariant",s)}else t.family==="punct"?a.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&a.setAttribute("stretchy","false");return a}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(t,e){return buildCommon.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var a=new mathMLTree.MathNode("mi",[makeText(t.text,t.mode,e)]),s=getVariant(t,e)||"italic";return s!==defaultVariant[a.type]&&a.setAttribute("mathvariant",s),a}});defineFunctionBuilders({type:"textord",htmlBuilder(t,e){return buildCommon.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var a=makeText(t.text,t.mode,e),s=getVariant(t,e)||"normal",o;return t.mode==="text"?o=new mathMLTree.MathNode("mtext",[a]):/[0-9]/.test(t.text)?o=new mathMLTree.MathNode("mn",[a]):t.text==="\\prime"?o=new mathMLTree.MathNode("mo",[a]):o=new mathMLTree.MathNode("mi",[a]),s!==defaultVariant[o.type]&&o.setAttribute("mathvariant",s),o}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(t,e){if(regularSpace.hasOwnProperty(t.text)){var a=regularSpace[t.text].className||"";if(t.mode==="text"){var s=buildCommon.makeOrd(t,e,"textord");return s.classes.push(a),s}else return buildCommon.makeSpan(["mspace",a],[buildCommon.mathsym(t.text,t.mode,e)],e)}else{if(cssSpace.hasOwnProperty(t.text))return buildCommon.makeSpan(["mspace",cssSpace[t.text]],[],e);throw new ParseError('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var a;if(regularSpace.hasOwnProperty(t.text))a=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode("")]);else{if(cssSpace.hasOwnProperty(t.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+t.text+'"')}return a}});var pad=()=>{var t=new mathMLTree.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};defineFunctionBuilders({type:"tag",mathmlBuilder(t,e){var a=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(t.body,e)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(t.tag,e)])])]);return a.setAttribute("width","100%"),a}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(t,e)=>{var a=t.font;if(a){if(textFontFamilies[a])return e.withTextFontFamily(textFontFamilies[a]);if(textFontWeights[a])return e.withTextFontWeight(textFontWeights[a]);if(a==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(textFontShapes[a])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:a,funcName:s}=t,o=e[0];return{type:"text",mode:a.mode,body:ordargument(o),font:s}},htmlBuilder(t,e){var a=optionsWithFont(t,e),s=buildExpression$1(t.body,a,!0);return buildCommon.makeSpan(["mord","text"],s,a)},mathmlBuilder(t,e){var a=optionsWithFont(t,e);return buildExpressionRow(t.body,a)}});defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:a}=t;return{type:"underline",mode:a.mode,body:e[0]}},htmlBuilder(t,e){var a=buildGroup$1(t.body,e),s=buildCommon.makeLineSpan("underline-line",e),o=e.fontMetrics().defaultRuleThickness,l=buildCommon.makeVList({positionType:"top",positionData:a.height,children:[{type:"kern",size:o},{type:"elem",elem:s},{type:"kern",size:3*o},{type:"elem",elem:a}]},e);return buildCommon.makeSpan(["mord","underline"],[l],e)},mathmlBuilder(t,e){var a=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);a.setAttribute("stretchy","true");var s=new mathMLTree.MathNode("munder",[buildGroup(t.body,e),a]);return s.setAttribute("accentunder","true"),s}});defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:a}=t;return{type:"vcenter",mode:a.mode,body:e[0]}},htmlBuilder(t,e){var a=buildGroup$1(t.body,e),s=e.fontMetrics().axisHeight,o=.5*(a.height-s-(a.depth+s));return buildCommon.makeVList({positionType:"shift",positionData:o,children:[{type:"elem",elem:a}]},e)},mathmlBuilder(t,e){return new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)],["vcenter"])}});defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,a){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var a=makeVerb(t),s=[],o=e.havingStyle(e.style.text()),l=0;l<a.length;l++){var u=a[l];u==="~"&&(u="\\textasciitilde"),s.push(buildCommon.makeSymbol(u,"Typewriter-Regular",t.mode,o,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(o.sizingClasses(e)),buildCommon.tryCombineChars(s),o)},mathmlBuilder(t,e){var a=new mathMLTree.TextNode(makeVerb(t)),s=new mathMLTree.MathNode("mtext",[a]);return s.setAttribute("mathvariant","monospace"),s}});var makeVerb=t=>t.body.replace(/ /g,t.star?"":""),functions=_functions,spaceRegexString=`[ \r
	]`,controlWordRegexString="\\\\[a-zA-Z@]+",controlSymbolRegexString="\\\\[^\uD800-\uDFFF]",controlWordWhitespaceRegexString="("+controlWordRegexString+")"+spaceRegexString+"*",controlSpaceRegexString=`\\\\(
|[ \r	]+
?)[ \r	]*`,combiningDiacriticalMarkString="[-]",combiningDiacriticalMarksEndRegex=new RegExp(combiningDiacriticalMarkString+"+$"),tokenRegexString="("+spaceRegexString+"+)|"+(controlSpaceRegexString+"|")+"([!-\\[\\]---]"+(combiningDiacriticalMarkString+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(combiningDiacriticalMarkString+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+controlWordWhitespaceRegexString)+("|"+controlSymbolRegexString+")");class Lexer{constructor(e,a){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=a,this.tokenRegex=new RegExp(tokenRegexString,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,a){this.catcodes[e]=a}lex(){var e=this.input,a=this.tokenRegex.lastIndex;if(a===e.length)return new Token("EOF",new SourceLocation(this,a,a));var s=this.tokenRegex.exec(e);if(s===null||s.index!==a)throw new ParseError("Unexpected character: '"+e[a]+"'",new Token(e[a],new SourceLocation(this,a,a+1)));var o=s[6]||s[3]||(s[2]?"\\ ":" ");if(this.catcodes[o]===14){var l=e.indexOf(`
`,this.tokenRegex.lastIndex);return l===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=l+1,this.lex()}return new Token(o,new SourceLocation(this,a,this.tokenRegex.lastIndex))}}class Namespace{constructor(e,a){e===void 0&&(e={}),a===void 0&&(a={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=a,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ParseError("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var a in e)e.hasOwnProperty(a)&&(e[a]==null?delete this.current[a]:this.current[a]=e[a])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,a,s){if(s===void 0&&(s=!1),s){for(var o=0;o<this.undefStack.length;o++)delete this.undefStack[o][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=a)}else{var l=this.undefStack[this.undefStack.length-1];l&&!l.hasOwnProperty(e)&&(l[e]=this.current[e])}a==null?delete this.current[e]:this.current[e]=a}}var macros=_macros;defineMacro("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});defineMacro("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});defineMacro("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});defineMacro("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});defineMacro("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var a=t.future();return e[0].length===1&&e[0][0].text===a.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");defineMacro("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(t){var e=t.popToken(),a,s="";if(e.text==="'")a=8,e=t.popToken();else if(e.text==='"')a=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")s=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ParseError("\\char` missing argument");s=e.text.charCodeAt(0)}else a=10;if(a){if(s=digitToNumber[e.text],s==null||s>=a)throw new ParseError("Invalid base-"+a+" digit "+e.text);for(var o;(o=digitToNumber[t.future().text])!=null&&o<a;)s*=a,s+=o,t.popToken()}return"\\@char{"+s+"}"});var newcommand=(t,e,a,s)=>{var o=t.consumeArg().tokens;if(o.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var l=o[0].text,u=t.isDefined(l);if(u&&!e)throw new ParseError("\\newcommand{"+l+"} attempting to redefine "+(l+"; use \\renewcommand"));if(!u&&!a)throw new ParseError("\\renewcommand{"+l+"} when command "+l+" does not yet exist; use \\newcommand");var c=0;if(o=t.consumeArg().tokens,o.length===1&&o[0].text==="["){for(var d="",m=t.expandNextToken();m.text!=="]"&&m.text!=="EOF";)d+=m.text,m=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+d);c=parseInt(d),o=t.consumeArg().tokens}return u&&s||t.macros.set(l,{tokens:o,numArgs:c}),""};defineMacro("\\newcommand",t=>newcommand(t,!1,!0,!1));defineMacro("\\renewcommand",t=>newcommand(t,!0,!1,!1));defineMacro("\\providecommand",t=>newcommand(t,!0,!0,!0));defineMacro("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(a=>a.text).join("")),""});defineMacro("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(a=>a.text).join("")),""});defineMacro("\\show",t=>{var e=t.popToken(),a=e.text;return console.log(e,t.macros.get(a),functions[a],symbols.math[a],symbols.text[a]),""});defineMacro("\\bgroup","{");defineMacro("\\egroup","}");defineMacro("~","\\nobreakspace");defineMacro("\\lq","`");defineMacro("\\rq","'");defineMacro("\\aa","\\r a");defineMacro("\\AA","\\r A");defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");defineMacro("","\\mathscr{B}");defineMacro("","\\mathscr{E}");defineMacro("","\\mathscr{F}");defineMacro("","\\mathscr{H}");defineMacro("","\\mathscr{I}");defineMacro("","\\mathscr{L}");defineMacro("","\\mathscr{M}");defineMacro("","\\mathscr{R}");defineMacro("","\\mathfrak{C}");defineMacro("","\\mathfrak{H}");defineMacro("","\\mathfrak{Z}");defineMacro("\\Bbbk","\\Bbb{k}");defineMacro("","\\cdotp");defineMacro("\\llap","\\mathllap{\\textrm{#1}}");defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}");defineMacro("\\clap","\\mathclap{\\textrm{#1}}");defineMacro("\\mathstrut","\\vphantom{(}");defineMacro("\\underbar","\\underline{\\text{#1}}");defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");defineMacro("\\ne","\\neq");defineMacro("","\\neq");defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");defineMacro("","\\notin");defineMacro("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");defineMacro("","\\perp");defineMacro("","\\mathclose{!\\mkern-0.8mu!}");defineMacro("","\\notni");defineMacro("","\\ulcorner");defineMacro("","\\urcorner");defineMacro("","\\llcorner");defineMacro("","\\lrcorner");defineMacro("","\\copyright");defineMacro("","\\textregistered");defineMacro("","\\textregistered");defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');defineMacro("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");defineMacro("","\\vdots");defineMacro("\\varGamma","\\mathit{\\Gamma}");defineMacro("\\varDelta","\\mathit{\\Delta}");defineMacro("\\varTheta","\\mathit{\\Theta}");defineMacro("\\varLambda","\\mathit{\\Lambda}");defineMacro("\\varXi","\\mathit{\\Xi}");defineMacro("\\varPi","\\mathit{\\Pi}");defineMacro("\\varSigma","\\mathit{\\Sigma}");defineMacro("\\varUpsilon","\\mathit{\\Upsilon}");defineMacro("\\varPhi","\\mathit{\\Phi}");defineMacro("\\varPsi","\\mathit{\\Psi}");defineMacro("\\varOmega","\\mathit{\\Omega}");defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}");defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}");defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;");defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");defineMacro("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");defineMacro("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(t){var e="\\dotso",a=t.expandAfterFuture().text;return a in dotsByToken?e=dotsByToken[a]:(a.slice(0,4)==="\\not"||a in symbols.math&&utils.contains(["bin","rel"],symbols.math[a].group))&&(e="\\dotsb"),e});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(t){var e=t.future().text;return e in spaceAfterDots?"\\ldots\\,":"\\ldots"});defineMacro("\\dotsc",function(t){var e=t.future().text;return e in spaceAfterDots&&e!==","?"\\ldots\\,":"\\ldots"});defineMacro("\\cdots",function(t){var e=t.future().text;return e in spaceAfterDots?"\\@cdots\\,":"\\@cdots"});defineMacro("\\dotsb","\\cdots");defineMacro("\\dotsm","\\cdots");defineMacro("\\dotsi","\\!\\cdots");defineMacro("\\dotsx","\\ldots\\,");defineMacro("\\DOTSI","\\relax");defineMacro("\\DOTSB","\\relax");defineMacro("\\DOTSX","\\relax");defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");defineMacro("\\,","\\tmspace+{3mu}{.1667em}");defineMacro("\\thinspace","\\,");defineMacro("\\>","\\mskip{4mu}");defineMacro("\\:","\\tmspace+{4mu}{.2222em}");defineMacro("\\medspace","\\:");defineMacro("\\;","\\tmspace+{5mu}{.2777em}");defineMacro("\\thickspace","\\;");defineMacro("\\!","\\tmspace-{3mu}{.1667em}");defineMacro("\\negthinspace","\\!");defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}");defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}");defineMacro("\\enspace","\\kern.5em ");defineMacro("\\enskip","\\hskip.5em\\relax");defineMacro("\\quad","\\hskip1em\\relax");defineMacro("\\qquad","\\hskip2em\\relax");defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren");defineMacro("\\tag@paren","\\tag@literal{({#1})}");defineMacro("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");defineMacro("\\newline","\\\\\\relax");defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace");defineMacro("\\@hspace","\\hskip #1\\relax");defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");defineMacro("\\ordinarycolon",":");defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');defineMacro("","\\dblcolon");defineMacro("","\\eqcolon");defineMacro("","\\coloneqq");defineMacro("","\\eqqcolon");defineMacro("","\\Coloneqq");defineMacro("\\ratio","\\vcentcolon");defineMacro("\\coloncolon","\\dblcolon");defineMacro("\\colonequals","\\coloneqq");defineMacro("\\coloncolonequals","\\Coloneqq");defineMacro("\\equalscolon","\\eqqcolon");defineMacro("\\equalscoloncolon","\\Eqqcolon");defineMacro("\\colonminus","\\coloneq");defineMacro("\\coloncolonminus","\\Coloneq");defineMacro("\\minuscolon","\\eqcolon");defineMacro("\\minuscoloncolon","\\Eqcolon");defineMacro("\\coloncolonapprox","\\Colonapprox");defineMacro("\\coloncolonsim","\\Colonsim");defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{}");defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{}");defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{}");defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{}");defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");defineMacro("\\imath","\\html@mathml{\\@imath}{}");defineMacro("\\jmath","\\html@mathml{\\@jmath}{}");defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");defineMacro("","\\llbracket");defineMacro("","\\rrbracket");defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");defineMacro("","\\lBrace");defineMacro("","\\rBrace");defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");defineMacro("","\\minuso");defineMacro("\\darr","\\downarrow");defineMacro("\\dArr","\\Downarrow");defineMacro("\\Darr","\\Downarrow");defineMacro("\\lang","\\langle");defineMacro("\\rang","\\rangle");defineMacro("\\uarr","\\uparrow");defineMacro("\\uArr","\\Uparrow");defineMacro("\\Uarr","\\Uparrow");defineMacro("\\N","\\mathbb{N}");defineMacro("\\R","\\mathbb{R}");defineMacro("\\Z","\\mathbb{Z}");defineMacro("\\alef","\\aleph");defineMacro("\\alefsym","\\aleph");defineMacro("\\Alpha","\\mathrm{A}");defineMacro("\\Beta","\\mathrm{B}");defineMacro("\\bull","\\bullet");defineMacro("\\Chi","\\mathrm{X}");defineMacro("\\clubs","\\clubsuit");defineMacro("\\cnums","\\mathbb{C}");defineMacro("\\Complex","\\mathbb{C}");defineMacro("\\Dagger","\\ddagger");defineMacro("\\diamonds","\\diamondsuit");defineMacro("\\empty","\\emptyset");defineMacro("\\Epsilon","\\mathrm{E}");defineMacro("\\Eta","\\mathrm{H}");defineMacro("\\exist","\\exists");defineMacro("\\harr","\\leftrightarrow");defineMacro("\\hArr","\\Leftrightarrow");defineMacro("\\Harr","\\Leftrightarrow");defineMacro("\\hearts","\\heartsuit");defineMacro("\\image","\\Im");defineMacro("\\infin","\\infty");defineMacro("\\Iota","\\mathrm{I}");defineMacro("\\isin","\\in");defineMacro("\\Kappa","\\mathrm{K}");defineMacro("\\larr","\\leftarrow");defineMacro("\\lArr","\\Leftarrow");defineMacro("\\Larr","\\Leftarrow");defineMacro("\\lrarr","\\leftrightarrow");defineMacro("\\lrArr","\\Leftrightarrow");defineMacro("\\Lrarr","\\Leftrightarrow");defineMacro("\\Mu","\\mathrm{M}");defineMacro("\\natnums","\\mathbb{N}");defineMacro("\\Nu","\\mathrm{N}");defineMacro("\\Omicron","\\mathrm{O}");defineMacro("\\plusmn","\\pm");defineMacro("\\rarr","\\rightarrow");defineMacro("\\rArr","\\Rightarrow");defineMacro("\\Rarr","\\Rightarrow");defineMacro("\\real","\\Re");defineMacro("\\reals","\\mathbb{R}");defineMacro("\\Reals","\\mathbb{R}");defineMacro("\\Rho","\\mathrm{P}");defineMacro("\\sdot","\\cdot");defineMacro("\\sect","\\S");defineMacro("\\spades","\\spadesuit");defineMacro("\\sub","\\subset");defineMacro("\\sube","\\subseteq");defineMacro("\\supe","\\supseteq");defineMacro("\\Tau","\\mathrm{T}");defineMacro("\\thetasym","\\vartheta");defineMacro("\\weierp","\\wp");defineMacro("\\Zeta","\\mathrm{Z}");defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");defineMacro("\\bra","\\mathinner{\\langle{#1}|}");defineMacro("\\ket","\\mathinner{|{#1}\\rangle}");defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}");defineMacro("\\Bra","\\left\\langle#1\\right|");defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=t=>e=>{var a=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.consumeArg().tokens,l=e.consumeArg().tokens,u=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=A=>P=>{t&&(P.macros.set("|",u),o.length&&P.macros.set("\\|",c));var W=A;if(!A&&o.length){var me=P.future();me.text==="|"&&(P.popToken(),W=!0)}return{tokens:W?o:s,numArgs:0}};e.macros.set("|",d(!1)),o.length&&e.macros.set("\\|",d(!0));var m=e.consumeArg().tokens,g=e.expandTokens([...l,...m,...a]);return e.macros.endGroup(),{tokens:g.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1));defineMacro("\\bra@set",braketHelper(!0));defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");defineMacro("\\angln","{\\angl n}");defineMacro("\\blue","\\textcolor{##6495ed}{#1}");defineMacro("\\orange","\\textcolor{##ffa500}{#1}");defineMacro("\\pink","\\textcolor{##ff00af}{#1}");defineMacro("\\red","\\textcolor{##df0030}{#1}");defineMacro("\\green","\\textcolor{##28ae7b}{#1}");defineMacro("\\gray","\\textcolor{gray}{#1}");defineMacro("\\purple","\\textcolor{##9d38bd}{#1}");defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}");defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}");defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}");defineMacro("\\blueD","\\textcolor{##11accd}{#1}");defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}");defineMacro("\\tealA","\\textcolor{##94fff5}{#1}");defineMacro("\\tealB","\\textcolor{##26edd5}{#1}");defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}");defineMacro("\\tealD","\\textcolor{##01a995}{#1}");defineMacro("\\tealE","\\textcolor{##208170}{#1}");defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}");defineMacro("\\greenB","\\textcolor{##8af281}{#1}");defineMacro("\\greenC","\\textcolor{##74cf70}{#1}");defineMacro("\\greenD","\\textcolor{##1fab54}{#1}");defineMacro("\\greenE","\\textcolor{##0d923f}{#1}");defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}");defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}");defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}");defineMacro("\\goldD","\\textcolor{##e07d10}{#1}");defineMacro("\\goldE","\\textcolor{##a75a05}{#1}");defineMacro("\\redA","\\textcolor{##fca9a9}{#1}");defineMacro("\\redB","\\textcolor{##ff8482}{#1}");defineMacro("\\redC","\\textcolor{##f9685d}{#1}");defineMacro("\\redD","\\textcolor{##e84d39}{#1}");defineMacro("\\redE","\\textcolor{##bc2612}{#1}");defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}");defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}");defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}");defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}");defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}");defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}");defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}");defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}");defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}");defineMacro("\\purpleE","\\textcolor{##543b78}{#1}");defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}");defineMacro("\\mintB","\\textcolor{##edf2df}{#1}");defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}");defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}");defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}");defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}");defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}");defineMacro("\\grayE","\\textcolor{##babec2}{#1}");defineMacro("\\grayF","\\textcolor{##888d93}{#1}");defineMacro("\\grayG","\\textcolor{##626569}{#1}");defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}");defineMacro("\\grayI","\\textcolor{##21242c}{#1}");defineMacro("\\kaBlue","\\textcolor{##314453}{#1}");defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");var implicitCommands={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class MacroExpander{constructor(e,a,s){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=a,this.expansionCount=0,this.feed(e),this.macros=new Namespace(macros,a.macros),this.mode=s,this.stack=[]}feed(e){this.lexer=new Lexer(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var a,s,o;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;a=this.popToken(),{tokens:o,end:s}=this.consumeArg(["]"])}else({tokens:o,start:a,end:s}=this.consumeArg());return this.pushToken(new Token("EOF",s.loc)),this.pushTokens(o),a.range(s,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var a=[],s=e&&e.length>0;s||this.consumeSpaces();var o=this.future(),l,u=0,c=0;do{if(l=this.popToken(),a.push(l),l.text==="{")++u;else if(l.text==="}"){if(--u,u===-1)throw new ParseError("Extra }",l)}else if(l.text==="EOF")throw new ParseError("Unexpected end of input in a macro argument, expected '"+(e&&s?e[c]:"}")+"'",l);if(e&&s)if((u===0||u===1&&e[c]==="{")&&l.text===e[c]){if(++c,c===e.length){a.splice(-c,c);break}}else c=0}while(u!==0||s);return o.text==="{"&&a[a.length-1].text==="}"&&(a.pop(),a.shift()),a.reverse(),{tokens:a,start:o,end:l}}consumeArgs(e,a){if(a){if(a.length!==e+1)throw new ParseError("The length of delimiters doesn't match the number of args!");for(var s=a[0],o=0;o<s.length;o++){var l=this.popToken();if(s[o]!==l.text)throw new ParseError("Use of the macro doesn't match its definition",l)}}for(var u=[],c=0;c<e;c++)u.push(this.consumeArg(a&&a[c+1]).tokens);return u}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ParseError("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var a=this.popToken(),s=a.text,o=a.noexpand?null:this._getExpansion(s);if(o==null||e&&o.unexpandable){if(e&&o==null&&s[0]==="\\"&&!this.isDefined(s))throw new ParseError("Undefined control sequence: "+s);return this.pushToken(a),!1}this.countExpansion(1);var l=o.tokens,u=this.consumeArgs(o.numArgs,o.delimiters);if(o.numArgs){l=l.slice();for(var c=l.length-1;c>=0;--c){var d=l[c];if(d.text==="#"){if(c===0)throw new ParseError("Incomplete placeholder at end of macro body",d);if(d=l[--c],d.text==="#")l.splice(c+1,1);else if(/^[1-9]$/.test(d.text))l.splice(c,2,...u[+d.text-1]);else throw new ParseError("Not a valid argument number",d)}}}return this.pushTokens(l),l.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Token(e)]):void 0}expandTokens(e){var a=[],s=this.stack.length;for(this.pushTokens(e);this.stack.length>s;)if(this.expandOnce(!0)===!1){var o=this.stack.pop();o.treatAsRelax&&(o.noexpand=!1,o.treatAsRelax=!1),a.push(o)}return this.countExpansion(a.length),a}expandMacroAsText(e){var a=this.expandMacro(e);return a&&a.map(s=>s.text).join("")}_getExpansion(e){var a=this.macros.get(e);if(a==null)return a;if(e.length===1){var s=this.lexer.catcodes[e];if(s!=null&&s!==13)return}var o=typeof a=="function"?a(this):a;if(typeof o=="string"){var l=0;if(o.indexOf("#")!==-1)for(var u=o.replace(/##/g,"");u.indexOf("#"+(l+1))!==-1;)++l;for(var c=new Lexer(o,this.settings),d=[],m=c.lex();m.text!=="EOF";)d.push(m),m=c.lex();d.reverse();var g={tokens:d,numArgs:l};return g}return o}isDefined(e){return this.macros.has(e)||functions.hasOwnProperty(e)||symbols.math.hasOwnProperty(e)||symbols.text.hasOwnProperty(e)||implicitCommands.hasOwnProperty(e)}isExpandable(e){var a=this.macros.get(e);return a!=null?typeof a=="string"||typeof a=="function"||!a.unexpandable:functions.hasOwnProperty(e)&&!functions[e].primitive}}var unicodeSubRegEx=/^[]/,uSubsAndSups=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),unicodeAccents={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},unicodeSymbols={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Parser{constructor(e,a){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new MacroExpander(e,a,this.mode),this.settings=a,this.leftrightDepth=0}expect(e,a){if(a===void 0&&(a=!0),this.fetch().text!==e)throw new ParseError("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());a&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var a=this.nextToken;this.consume(),this.gullet.pushToken(new Token("}")),this.gullet.pushTokens(e);var s=this.parseExpression(!1);return this.expect("}"),this.nextToken=a,s}parseExpression(e,a){for(var s=[];;){this.mode==="math"&&this.consumeSpaces();var o=this.fetch();if(Parser.endOfExpression.indexOf(o.text)!==-1||a&&o.text===a||e&&functions[o.text]&&functions[o.text].infix)break;var l=this.parseAtom(a);if(l){if(l.type==="internal")continue}else break;s.push(l)}return this.mode==="text"&&this.formLigatures(s),this.handleInfixNodes(s)}handleInfixNodes(e){for(var a=-1,s,o=0;o<e.length;o++)if(e[o].type==="infix"){if(a!==-1)throw new ParseError("only one infix operator per group",e[o].token);a=o,s=e[o].replaceWith}if(a!==-1&&s){var l,u,c=e.slice(0,a),d=e.slice(a+1);c.length===1&&c[0].type==="ordgroup"?l=c[0]:l={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?u=d[0]:u={type:"ordgroup",mode:this.mode,body:d};var m;return s==="\\\\abovefrac"?m=this.callFunction(s,[l,e[a],u],[]):m=this.callFunction(s,[l,u],[]),[m]}else return e}handleSupSubscript(e){var a=this.fetch(),s=a.text;this.consume(),this.consumeSpaces();var o;do{var l;o=this.parseGroup(e)}while(((l=o)==null?void 0:l.type)==="internal");if(!o)throw new ParseError("Expected group after '"+s+"'",a);return o}formatUnsupportedCmd(e){for(var a=[],s=0;s<e.length;s++)a.push({type:"textord",mode:"text",text:e[s]});var o={type:"text",mode:this.mode,body:a},l={type:"color",mode:this.mode,color:this.settings.errorColor,body:[o]};return l}parseAtom(e){var a=this.parseGroup("atom",e);if(a?.type==="internal"||this.mode==="text")return a;for(var s,o;;){this.consumeSpaces();var l=this.fetch();if(l.text==="\\limits"||l.text==="\\nolimits"){if(a&&a.type==="op"){var u=l.text==="\\limits";a.limits=u,a.alwaysHandleSupSub=!0}else if(a&&a.type==="operatorname")a.alwaysHandleSupSub&&(a.limits=l.text==="\\limits");else throw new ParseError("Limit controls must follow a math operator",l);this.consume()}else if(l.text==="^"){if(s)throw new ParseError("Double superscript",l);s=this.handleSupSubscript("superscript")}else if(l.text==="_"){if(o)throw new ParseError("Double subscript",l);o=this.handleSupSubscript("subscript")}else if(l.text==="'"){if(s)throw new ParseError("Double superscript",l);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),s={type:"ordgroup",mode:this.mode,body:d}}else if(uSubsAndSups[l.text]){var m=unicodeSubRegEx.test(l.text),g=[];for(g.push(new Token(uSubsAndSups[l.text])),this.consume();;){var A=this.fetch().text;if(!uSubsAndSups[A]||unicodeSubRegEx.test(A)!==m)break;g.unshift(new Token(uSubsAndSups[A])),this.consume()}var P=this.subparse(g);m?o={type:"ordgroup",mode:"math",body:P}:s={type:"ordgroup",mode:"math",body:P}}else break}return s||o?{type:"supsub",mode:this.mode,base:a,sup:s,sub:o}:a}parseFunction(e,a){var s=this.fetch(),o=s.text,l=functions[o];if(!l)return null;if(this.consume(),a&&a!=="atom"&&!l.allowedInArgument)throw new ParseError("Got function '"+o+"' with no arguments"+(a?" as "+a:""),s);if(this.mode==="text"&&!l.allowedInText)throw new ParseError("Can't use function '"+o+"' in text mode",s);if(this.mode==="math"&&l.allowedInMath===!1)throw new ParseError("Can't use function '"+o+"' in math mode",s);var{args:u,optArgs:c}=this.parseArguments(o,l);return this.callFunction(o,u,c,s,e)}callFunction(e,a,s,o,l){var u={funcName:e,parser:this,token:o,breakOnTokenText:l},c=functions[e];if(c&&c.handler)return c.handler(u,a,s);throw new ParseError("No function handler for "+e)}parseArguments(e,a){var s=a.numArgs+a.numOptionalArgs;if(s===0)return{args:[],optArgs:[]};for(var o=[],l=[],u=0;u<s;u++){var c=a.argTypes&&a.argTypes[u],d=u<a.numOptionalArgs;(a.primitive&&c==null||a.type==="sqrt"&&u===1&&l[0]==null)&&(c="primitive");var m=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)l.push(m);else if(m!=null)o.push(m);else throw new ParseError("Null argument, please report this as a bug")}return{args:o,optArgs:l}}parseGroupOfType(e,a,s){switch(a){case"color":return this.parseColorGroup(s);case"size":return this.parseSizeGroup(s);case"url":return this.parseUrlGroup(s);case"math":case"text":return this.parseArgumentGroup(s,a);case"hbox":{var o=this.parseArgumentGroup(s,"text");return o!=null?{type:"styling",mode:o.mode,body:[o],style:"text"}:null}case"raw":{var l=this.parseStringGroup("raw",s);return l!=null?{type:"raw",mode:"text",string:l.text}:null}case"primitive":{if(s)throw new ParseError("A primitive argument cannot be optional");var u=this.parseGroup(e);if(u==null)throw new ParseError("Expected group as "+e,this.fetch());return u}case"original":case null:case void 0:return this.parseArgumentGroup(s);default:throw new ParseError("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,a){var s=this.gullet.scanArgument(a);if(s==null)return null;for(var o="",l;(l=this.fetch()).text!=="EOF";)o+=l.text,this.consume();return this.consume(),s.text=o,s}parseRegexGroup(e,a){for(var s=this.fetch(),o=s,l="",u;(u=this.fetch()).text!=="EOF"&&e.test(l+u.text);)o=u,l+=o.text,this.consume();if(l==="")throw new ParseError("Invalid "+a+": '"+s.text+"'",s);return s.range(o,l)}parseColorGroup(e){var a=this.parseStringGroup("color",e);if(a==null)return null;var s=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(a.text);if(!s)throw new ParseError("Invalid color: '"+a.text+"'",a);var o=s[0];return/^[0-9a-f]{6}$/i.test(o)&&(o="#"+o),{type:"color-token",mode:this.mode,color:o}}parseSizeGroup(e){var a,s=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?a=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):a=this.parseStringGroup("size",e),!a)return null;!e&&a.text.length===0&&(a.text="0pt",s=!0);var o=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(a.text);if(!o)throw new ParseError("Invalid size: '"+a.text+"'",a);var l={number:+(o[1]+o[2]),unit:o[3]};if(!validUnit(l))throw new ParseError("Invalid unit: '"+l.unit+"'",a);return{type:"size",mode:this.mode,value:l,isBlank:s}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var a=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),a==null)return null;var s=a.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:s}}parseArgumentGroup(e,a){var s=this.gullet.scanArgument(e);if(s==null)return null;var o=this.mode;a&&this.switchMode(a),this.gullet.beginGroup();var l=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var u={type:"ordgroup",mode:this.mode,loc:s.loc,body:l};return a&&this.switchMode(o),u}parseGroup(e,a){var s=this.fetch(),o=s.text,l;if(o==="{"||o==="\\begingroup"){this.consume();var u=o==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,u),d=this.fetch();this.expect(u),this.gullet.endGroup(),l={type:"ordgroup",mode:this.mode,loc:SourceLocation.range(s,d),body:c,semisimple:o==="\\begingroup"||void 0}}else if(l=this.parseFunction(a,e)||this.parseSymbol(),l==null&&o[0]==="\\"&&!implicitCommands.hasOwnProperty(o)){if(this.settings.throwOnError)throw new ParseError("Undefined control sequence: "+o,s);l=this.formatUnsupportedCmd(o),this.consume()}return l}formLigatures(e){for(var a=e.length-1,s=0;s<a;++s){var o=e[s],l=o.text;l==="-"&&e[s+1].text==="-"&&(s+1<a&&e[s+2].text==="-"?(e.splice(s,3,{type:"textord",mode:"text",loc:SourceLocation.range(o,e[s+2]),text:"---"}),a-=2):(e.splice(s,2,{type:"textord",mode:"text",loc:SourceLocation.range(o,e[s+1]),text:"--"}),a-=1)),(l==="'"||l==="`")&&e[s+1].text===l&&(e.splice(s,2,{type:"textord",mode:"text",loc:SourceLocation.range(o,e[s+1]),text:l+l}),a-=1)}}parseSymbol(){var e=this.fetch(),a=e.text;if(/^\\verb[^a-zA-Z]/.test(a)){this.consume();var s=a.slice(5),o=s.charAt(0)==="*";if(o&&(s=s.slice(1)),s.length<2||s.charAt(0)!==s.slice(-1))throw new ParseError(`\\verb assertion failed --
                    please report what input caused this bug`);return s=s.slice(1,-1),{type:"verb",mode:"text",body:s,star:o}}unicodeSymbols.hasOwnProperty(a[0])&&!symbols[this.mode][a[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+a[0]+'" used in math mode',e),a=unicodeSymbols[a[0]]+a.slice(1));var l=combiningDiacriticalMarksEndRegex.exec(a);l&&(a=a.substring(0,l.index),a==="i"?a="":a==="j"&&(a=""));var u;if(symbols[this.mode][a]){this.settings.strict&&this.mode==="math"&&extraLatin.indexOf(a)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+a[0]+'" used in math mode',e);var c=symbols[this.mode][a].group,d=SourceLocation.range(e),m;if(ATOMS.hasOwnProperty(c)){var g=c;m={type:"atom",mode:this.mode,family:g,loc:d,text:a}}else m={type:c,mode:this.mode,loc:d,text:a};u=m}else if(a.charCodeAt(0)>=128)this.settings.strict&&(supportedCodepoint(a.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+a[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+a[0]+'"'+(" ("+a.charCodeAt(0)+")"),e)),u={type:"textord",mode:"text",loc:SourceLocation.range(e),text:a};else return null;if(this.consume(),l)for(var A=0;A<l[0].length;A++){var P=l[0][A];if(!unicodeAccents[P])throw new ParseError("Unknown accent ' "+P+"'",e);var W=unicodeAccents[P][this.mode]||unicodeAccents[P].text;if(!W)throw new ParseError("Accent "+P+" unsupported in "+this.mode+" mode",e);u={type:"accent",mode:this.mode,loc:SourceLocation.range(e),label:W,isStretchy:!1,isShifty:!0,base:u}}return u}}Parser.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var parseTree=function t(e,a){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var s=new Parser(e,a);delete s.gullet.macros.current["\\df@tag"];var o=s.parse();if(delete s.gullet.macros.current["\\current@color"],delete s.gullet.macros.current["\\color"],s.gullet.macros.get("\\df@tag")){if(!a.displayMode)throw new ParseError("\\tag works only in display equations");o=[{type:"tag",mode:"text",body:o,tag:s.subparse([new Token("\\df@tag")])}]}return o},render$1=function t(e,a,s){a.textContent="";var o=renderToDomTree(e,s).toNode();a.appendChild(o)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),render$1=function(){throw new ParseError("KaTeX doesn't work in quirks mode.")});var renderToString=function t(e,a){var s=renderToDomTree(e,a).toMarkup();return s},generateParseTree=function t(e,a){var s=new Settings$1(a);return parseTree(e,s)},renderError=function t(e,a,s){if(s.throwOnError||!(e instanceof ParseError))throw e;var o=buildCommon.makeSpan(["katex-error"],[new SymbolNode(a)]);return o.setAttribute("title",e.toString()),o.setAttribute("style","color:"+s.errorColor),o},renderToDomTree=function t(e,a){var s=new Settings$1(a);try{var o=parseTree(e,s);return buildTree(o,e,s)}catch(l){return renderError(l,e,s)}},renderToHTMLTree=function t(e,a){var s=new Settings$1(a);try{var o=parseTree(e,s);return buildHTMLTree(o,e,s)}catch(l){return renderError(l,e,s)}},version$1="0.16.22",__domTree={Span,Anchor,SymbolNode,SvgNode,PathNode,LineNode},katex={version:version$1,render:render$1,renderToString,ParseError,SETTINGS_SCHEMA,__parse:generateParseTree,__renderToDomTree:renderToDomTree,__renderToHTMLTree:renderToHTMLTree,__setFontMetrics:setFontMetrics,__defineSymbol:defineSymbol,__defineFunction:defineFunction,__defineMacro:defineMacro,__domTree};const ESCAPED_DOLLAR="__ESCAPED_DOLLAR__",ESCAPED_EURO="__ESCAPED_EURO__";function escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function tokenizeSingleDollar(t){typeof t!="string"&&(t=String(t??""));const e=t.replace(/\\\$/g,ESCAPED_DOLLAR).replace(/\\/g,ESCAPED_EURO),a=[],s=/\$([\s\S]+?)\$/g;let o=0,l;for(;(l=s.exec(e))!==null;)l.index>o&&a.push({type:"text",content:e.slice(o,l.index)}),a.push({type:"math",content:l[1]}),o=s.lastIndex;return o<e.length&&a.push({type:"text",content:e.slice(o)}),a.map(u=>({...u,content:u.content.replace(new RegExp(ESCAPED_DOLLAR,"g"),"$").replace(new RegExp(ESCAPED_EURO,"g"),"")}))}function RenderMath({text:t,className:e,katexOptions:a}){const s=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!s.current)return;const o={throwOnError:!1,displayMode:!1,...a},l=typeof t=="string"?t:String(t??""),c=tokenizeSingleDollar(l).map(d=>{if(d.type==="text")return escapeHtml(d.content).replace(/\n/g,'<br style="line-height:50px; margin:0; padding:0;" />').replace(/\\n/g,'<br style="line-height:50px; margin:0; padding:0;" />').replace(/\t/g,'<span style="display:inline-block; width:2em;"></span>').replace(/\\t/g,'<span style="display:inline-block; width:2em;"></span>');try{return katex.renderToString(d.content,o)}catch{return`<code class="katex-error">${escapeHtml(d.content)}</code>`}});s.current.innerHTML=c.join("")},[t,a]),jsxRuntimeExports.jsx("div",{ref:s,className:e})}var kh=Object.defineProperty,Sh=Object.defineProperties,Lh=Object.getOwnPropertyDescriptors,Oo=Object.getOwnPropertySymbols,Uc=Object.prototype.hasOwnProperty,jc=Object.prototype.propertyIsEnumerable,Wc=(t,e,a)=>e in t?kh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,p=(t,e)=>{for(var a in e||(e={}))Uc.call(e,a)&&Wc(t,a,e[a]);if(Oo)for(var a of Oo(e))jc.call(e,a)&&Wc(t,a,e[a]);return t},f=(t,e)=>Sh(t,Lh(e)),Ps=t=>typeof t=="symbol"?t:t+"",ki=(t,e)=>{var a={};for(var s in t)Uc.call(t,s)&&e.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&Oo)for(var s of Oo(t))e.indexOf(s)<0&&jc.call(t,s)&&(a[s]=t[s]);return a};function Y(t){return Array.isArray(t)}var Jc={en:{"keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.alphabetic":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.menu":"Menu","tooltip.undo":"Undo","menu.borders":"Borders","menu.insert matrix":"Insert Matrix","menu.array.add row above":"Add Row Before","menu.array.add row below":"Add Row After","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","menu.insert":"Insert","menu.insert.abs":"Absolute Value","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"n<sup>th</sup> Root","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarithm base a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Calculus","menu.insert.derivative":"Derivative","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"n<sup>th</sup> derivative","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Integral","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Sum","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Product","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Complex Numbers","menu.insert.modulus":"Modulus","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Real Part","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Imaginary Part","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Conjugate","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Blackboard","tooltip.bold":"Bold","tooltip.italic":"Italic","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligraphic","tooltip.typewriter":"Typewriter","tooltip.roman-upright":"Roman Upright","tooltip.row-by-col":"%@  %@","menu.font-style":"Font Style","menu.accent":"Accent","menu.decoration":"Decoration","menu.color":"Color","menu.background-color":"Background","menu.evaluate":"Evaluate","menu.simplify":"Simplify","menu.solve":"Solve","menu.solve-for":"Solve for %@","menu.cut":"Cut","menu.copy":"Copy","menu.copy-as-latex":"Copy as LaTeX","menu.copy-as-typst":"Copy as Typst","menu.copy-as-ascii-math":"Copy as ASCII Math","menu.copy-as-mathml":"Copy as MathML","menu.paste":"Paste","menu.select-all":"Select All","color.red":"Red","color.orange":"Orange","color.yellow":"Yellow","color.lime":"Lime","color.green":"Green","color.teal":"Teal","color.cyan":"Cyan","color.blue":"Blue","color.indigo":"Indigo","color.purple":"Purple","color.magenta":"Magenta","color.black":"Black","color.dark-grey":"Dark Grey","color.grey":"Grey","color.light-grey":"Light Grey","color.white":"White"},ar:{"keyboard.tooltip.symbols":"  ","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"  ","tooltip.copy to clipboard":"  ","tooltip.cut to clipboard":"  ","tooltip.paste from clipboard":"  ","tooltip.redo":"","tooltip.toggle virtual keyboard":"   ","tooltip.undo":"","menu.insert matrix":" ","menu.borders":" ","menu.array.add row above":"   ","menu.array.add row below":"  ","menu.array.add column after":"   ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":" ","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":"  LaTeX","menu.copy-as-ascii-math":"  ASCII Math","menu.copy-as-mathml":"  MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":" ","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},de:{"keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.alphabetic":"Rmische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einfgen","menu.borders":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzufgen nach","menu.array.add row below":"Zeile hinzufgen vor","menu.array.add column after":"Spalte hinzufgen nach","menu.array.add column before":"Spalte hinzufgen vor","menu.array.delete row":"Zeile lschen","menu.array.delete rows":"Ausgewhlte Zeilen lschen","menu.array.delete column":"Spalte lschen","menu.array.delete columns":"Ausgewhlte Spalten lschen","menu.mode":"Modus","menu.mode-math":"Mathematik","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tafel","tooltip.bold":"Fett","tooltip.italic":"Kursiv","tooltip.fraktur":"Fraktur","tooltip.script":"Skript","tooltip.caligraphic":"Kalligraphie","tooltip.typewriter":"Schreibmaschine","tooltip.roman-upright":"Rmisch aufrecht","tooltip.row-by-col":"%@  %@","menu.font-style":"Schriftstil","menu.accent":"Akzent","menu.decoration":"Dekoration","menu.color":"Farbe","menu.background-color":"Hintergrund","menu.evaluate":"Auswerten","menu.simplify":"Vereinfachen","menu.solve":"Lsen","menu.solve-for":"Lsen fr %@","menu.cut":"Ausschneiden","menu.copy":"Kopieren","menu.copy-as-latex":"Als LaTeX kopieren","menu.copy-as-ascii-math":"Als ASCII Math kopieren","menu.copy-as-mathml":"Als MathML kopieren","menu.paste":"Einfgen","menu.select-all":"Alles auswhlen","color.red":"Rot","color.orange":"Orange","color.yellow":"Gelb","color.lime":"Limette","color.green":"Grn","color.teal":"Blaugrn","color.cyan":"Cyan","color.blue":"Blau","color.indigo":"Indigo","color.purple":"Lila","color.magenta":"Magenta","color.black":"Schwarz","color.dark-grey":"Dunkelgrau","color.grey":"Grau","color.light-grey":"Hellgrau","color.white":"Wei"},el:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":"  ","tooltip.redo":"","tooltip.toggle virtual keyboard":"  ","tooltip.undo":"","menu.insert matrix":" ","menu.borders":" ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":" ","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":" ","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":"  LaTeX","menu.copy-as-ascii-math":"  ASCII Math","menu.copy-as-mathml":"  MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},es:{"keyboard.tooltip.symbols":"Smbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.numeric":"Numrico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"Aadir Matriz","menu.borders":"Delimitadores de Matriz","menu.array.add row above":"Aadir Lnea Antes","menu.array.add row below":"Aadir Lnea Despues","menu.array.add column after":"Aadir Columna Despues","menu.array.add column before":"Aadir Columna Antes","menu.array.delete row":"Borrar Lnea","menu.array.delete rows":"Borrar Lneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","menu.mode":"Modo","menu.mode-math":"Matemticas","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Pizarra","tooltip.bold":"Negrita","tooltip.italic":"Cursiva","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligrfico","tooltip.typewriter":"Mquina de escribir","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@  %@","menu.font-style":"Estilo de fuente","menu.accent":"Acento","menu.decoration":"Decoracin","menu.color":"Color","menu.background-color":"Fondo","menu.evaluate":"Evaluar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Cortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Pegar","menu.select-all":"Seleccionar todo","color.red":"Rojo","color.orange":"Naranja","color.yellow":"Amarillo","color.lime":"Lima","color.green":"Verde","color.teal":"Verde azulado","color.cyan":"Cian","color.blue":"Azul","color.indigo":"ndigo","color.purple":"Morado","color.magenta":"Magenta","color.black":"Negro","color.dark-grey":"Gris oscuro","color.grey":"Gris","color.light-grey":"Gris claro","color.white":"Blanco"},fr:{"keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.numeric":"Numrique","keyboard.tooltip.alphabetic":"Lettres romaines","tooltip.menu":"Menu","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"Rtablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Insrer une Matrice","menu.borders":"Bords","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Aprs","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Aprs","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes Slectiones","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes Slectiones","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tableau noir","tooltip.bold":"Gras","tooltip.italic":"Italique","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligraphique","tooltip.typewriter":"Machine  crire","tooltip.roman-upright":"Romain droit","tooltip.row-by-col":"%@  %@","menu.font-style":"Style de police","menu.accent":"Accent","menu.decoration":"Dcoration","menu.color":"Couleur","menu.background-color":"Arrire-plan","menu.evaluate":"valuer","menu.simplify":"Simplifier","menu.solve":"Rsoudre","menu.solve-for":"Rsoudre pour %@","menu.cut":"Couper","menu.copy":"Copier","menu.copy-as-latex":"Copier en LaTeX","menu.copy-as-ascii-math":"Copier en ASCII Math","menu.copy-as-mathml":"Copier en MathML","menu.paste":"Coller","menu.select-all":"Slectionner tout","color.red":"Rouge","color.orange":"Orange","color.yellow":"Jaune","color.lime":"Citron vert","color.green":"Vert","color.teal":"Turquoise","color.cyan":"Cyan","color.blue":"Bleu","color.indigo":"Indigo","color.purple":"Violet","color.magenta":"Magenta","color.black":"Noir","color.dark-grey":"Gris fonc","color.grey":"Gris","color.light-grey":"Gris clair","color.white":"Blanc"},he:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":" ","tooltip.redo":" ","tooltip.toggle virtual keyboard":"   ","tooltip.undo":"","menu.insert matrix":" ","menu.borders":" ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":" ","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":" ","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":" LaTeX","menu.copy-as-ascii-math":" ASCII Math","menu.copy-as-mathml":" MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":" ","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},it:{"keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere Greche","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.alphabetic":"Lettere Romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.cut to clipboard":"Taglia negli appunti","tooltip.paste from clipboard":"Incolla dagli appunti","tooltip.redo":"Ripeti","tooltip.toggle virtual keyboard":"Attiva/Disattiva Tastiera Virtuale","tooltip.menu":"Menu","tooltip.undo":"Annulla","menu.borders":"Bordi","menu.insert matrix":"Inserisci Matrice","menu.array.add row above":"Aggiungi Riga Prima","menu.array.add row below":"Aggiungi Riga Dopo","menu.array.add column after":"Aggiungi Colonna Dopo","menu.array.add column before":"Aggiungi Colonna Prima","menu.array.delete row":"Elimina Riga","menu.array.delete rows":"Elimina Righe Selezionate","menu.array.delete column":"Elimina Colonna","menu.array.delete columns":"Elimina Colonne Selezionate","menu.mode":"Modalit","menu.mode-math":"Matematica","menu.mode-text":"Testo","menu.mode-latex":"LaTeX","menu.insert":"Inserisci","menu.insert.abs":"Valore Assoluto","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Radice n-esima","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logaritmo in base a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Calcolo","menu.insert.derivative":"Derivata","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Derivata n-esima","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Integrale","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Somma","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Prodotto","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Numeri Complessi","menu.insert.modulus":"Modulo","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argomento","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Parte Reale","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Parte Immaginaria","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Coniugato","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Lavagna","tooltip.bold":"Grassetto","tooltip.italic":"Corsivo","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligrafico","tooltip.typewriter":"Macchina da Scrivere","tooltip.roman-upright":"Romano Dritto","tooltip.row-by-col":"%@  %@","menu.font-style":"Stile del Carattere","menu.accent":"Accento","menu.decoration":"Decorazione","menu.color":"Colore","menu.background-color":"Sfondo","menu.evaluate":"Valuta","menu.simplify":"Semplifica","menu.solve":"Risolvi","menu.solve-for":"Risolvi per %@","menu.cut":"Taglia","menu.copy":"Copia","menu.copy-as-latex":"Copia come LaTeX","menu.copy-as-ascii-math":"Copia come ASCII Math","menu.copy-as-mathml":"Copia come MathML","menu.paste":"Incolla","menu.select-all":"Seleziona Tutto","color.red":"Rosso","color.orange":"Arancione","color.yellow":"Giallo","color.lime":"Lime","color.green":"Verde","color.teal":"Verde Acqua","color.cyan":"Ciano","color.blue":"Blu","color.indigo":"Indaco","color.purple":"Viola","color.magenta":"Magenta","color.black":"Nero","color.dark-grey":"Grigio Scuro","color.grey":"Grigio","color.light-grey":"Grigio Chiaro","color.white":"Bianco"},ja:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":"","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"","tooltip.menu":"","tooltip.copy to clipboard":"","tooltip.redo":"","tooltip.toggle virtual keyboard":"","tooltip.undo":"","menu.insert matrix":"","menu.borders":"","menu.array.add row above":"","menu.array.add row below":"","menu.array.add column after":"","menu.array.add column before":"","menu.array.delete row":"","menu.array.delete rows":"","menu.array.delete column":"","menu.array.delete columns":"","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":"","tooltip.row-by-col":"%@  %@","menu.font-style":"","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"%@ ","menu.cut":"","menu.copy":"","menu.copy-as-latex":"LaTeX","menu.copy-as-ascii-math":"ASCII Math","menu.copy-as-mathml":"MathML","menu.paste":"","menu.select-all":"","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"","color.grey":"","color.light-grey":"","color.white":""},ko:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":"  ","tooltip.redo":" ","tooltip.toggle virtual keyboard":"  ","tooltip.undo":" ","menu.insert matrix":" ","menu.borders":"  ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"%@  ","menu.cut":"","menu.copy":"","menu.copy-as-latex":"LaTeX ","menu.copy-as-ascii-math":"ASCII Math ","menu.copy-as-mathml":"MathML ","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},pl:{"keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.alphabetic":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.cut to clipboard":"Wytnij ze Schowka","tooltip.paste from clipboard":"Wklej ze Schowka","tooltip.redo":"Przywr","tooltip.toggle virtual keyboard":"Przecz klawiatur wirtualn","tooltip.menu":"Menu","tooltip.undo":"Cofnij","menu.borders":"Ograniczniki macierzy","menu.insert matrix":"Wstaw macierz","menu.array.add row above":"Dodaj wiersz przed","menu.array.add row below":"Dodaj wiersz po","menu.array.add column after":"Dodaj kolumn po","menu.array.add column before":"Dodaj kolumn przed","menu.array.delete row":"Usu wiersz","menu.array.delete rows":"Usu wybrane wiersze","menu.array.delete column":"Usu kolumn","menu.array.delete columns":"Usu wybrane kolumny","menu.mode":"Tryb","menu.mode-math":"Formua","menu.mode-text":"Tekst","menu.mode-latex":"LaTeX","menu.insert":"Wstaw","menu.insert.abs":"Warto bezwzgldna","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Pierwiastek n-tego stopnia","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarytm o podstawie a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Rachunek rniczkowy i cakowy","menu.insert.derivative":"Pochodna","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Pochodna n-tego rzdu","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Caka","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Suma","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Iloczyn","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Liczby zespolone","menu.insert.modulus":"Modu","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Cz rzeczywista","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Cz urojona","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Sprzenie","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Tablica","tooltip.bold":"Pogrubienie","tooltip.italic":"Kursywa","tooltip.fraktur":"Fraktura","tooltip.script":"Skrypt","tooltip.caligraphic":"Kaligraficzny","tooltip.typewriter":"Maszynowy","tooltip.roman-upright":"Rzymski prosto","tooltip.row-by-col":"%@  %@","menu.font-style":"Styl czcionki","menu.accent":"Akcent","menu.decoration":"Dekoracja","menu.color":"Kolor","menu.background-color":"To","menu.evaluate":"Oblicz","menu.simplify":"Upro","menu.solve":"Rozwi","menu.solve-for":"Rozwi dla %@","menu.cut":"Wytnij","menu.copy":"Kopiuj","menu.copy-as-latex":"Kopiuj jako LaTeX","menu.copy-as-ascii-math":"Kopiuj jako ASCII Math","menu.copy-as-mathml":"Kopiuj jako MathML","menu.paste":"Wklej","menu.select-all":"Zaznacz wszystko","color.red":"Czerwony","color.orange":"Pomaraczowy","color.yellow":"ty","color.lime":"Limetkowy","color.green":"Zielony","color.teal":"Turkusowy","color.cyan":"Cyjan","color.blue":"Niebieski","color.indigo":"Indygo","color.purple":"Fioletowy","color.magenta":"Magenta","color.black":"Czarny","color.dark-grey":"Ciemnoszary","color.grey":"Szary","color.light-grey":"Jasnoszary","color.white":"Biay"},pt:{"keyboard.tooltip.symbols":"Smbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.numeric":"Numrico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar para rea de transferncia","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.borders":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","menu.mode":"Modo","menu.mode-math":"Frmula","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Quadro Negro","tooltip.bold":"Negrito","tooltip.italic":"Itlico","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligrfico","tooltip.typewriter":"Mquina de Escrever","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@  %@","menu.font-style":"Estilo da Fonte","menu.accent":"Acento","menu.decoration":"Decorao","menu.color":"Cor","menu.background-color":"Cor de Fundo","menu.evaluate":"Avaliar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Recortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Colar","menu.select-all":"Selecionar Tudo","color.red":"Vermelho","color.orange":"Laranja","color.yellow":"Amarelo","color.lime":"Verde Lima","color.green":"Verde","color.teal":"Verde-azulado","color.cyan":"Ciano","color.blue":"Azul","color.indigo":"ndigo","color.purple":"Roxo","color.magenta":"Magenta","color.black":"Preto","color.dark-grey":"Cinza Escuro","color.grey":"Cinza","color.light-grey":"Cinza Claro","color.white":"Branco"},uk:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":"   ","tooltip.cut to clipboard":"   ","tooltip.paste from clipboard":"   ","tooltip.redo":"","tooltip.toggle virtual keyboard":"  ","tooltip.menu":"","tooltip.undo":"","menu.borders":"","menu.insert matrix":" ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","menu.insert":"","menu.insert.abs":" ","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":" n- ","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"   a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"","menu.insert.derivative":"","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":" n- ","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":" ","menu.insert.modulus":"","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":" ","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":" ","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":" ","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":"  LaTeX","menu.copy-as-ascii-math":"  ASCII Math","menu.copy-as-mathml":"  MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"-","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"-","color.grey":"","color.light-grey":"-","color.white":""},"zh-cn":{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":"","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"","tooltip.copy to clipboard":"","tooltip.redo":"","tooltip.toggle virtual keyboard":"","tooltip.undo":"","menu.insert matrix":"","menu.borders":"","menu.array.add row above":"","menu.array.add row below":"","menu.array.add column after":"r","menu.array.add column before":"","menu.array.delete row":"","menu.array.delete rows":"","menu.array.delete column":"","menu.array.delete columns":"","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"Fraktur","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":"","tooltip.row-by-col":"%@  %@","menu.font-style":"","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":" %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":" LaTeX","menu.copy-as-ascii-math":" ASCII Math","menu.copy-as-mathml":" MathML","menu.paste":"","menu.select-all":"","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"","color.grey":"","color.light-grey":"","color.white":""},"zh-tw":{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":"","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"","tooltip.copy to clipboard":"","tooltip.redo":"","tooltip.toggle virtual keyboard":"","tooltip.undo":"","menu.insert matrix":"","menu.borders":"","menu.array.add row above":"","menu.array.add row below":"","menu.array.add column after":"","menu.array.add column before":"","menu.array.delete row":"","menu.array.delete rows":"","menu.array.delete column":"","menu.array.delete columns":"","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"Fraktur","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":"","tooltip.row-by-col":"%@  %@","menu.font-style":"","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":" %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":" LaTeX","menu.copy-as-ascii-math":" ASCII Math","menu.copy-as-mathml":" MathML","menu.paste":"","menu.select-all":"","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"","color.grey":"","color.light-grey":"","color.white":""}};function Me(){return"window"in globalThis&&"document"in globalThis}function Bo(){return"matchMedia"in window?window.matchMedia("(pointer: coarse)").matches:"ontouchstart"in window||navigator.maxTouchPoints>0}function Gc(){try{return window.self!==window.top}catch{return!0}}function Ro(){return typeof navigator.vibrate=="function"}function kt(){var t,e;if(!Me())return"other";let a=(e=(t=navigator.userAgentData)==null?void 0:t.platform)!=null?e:navigator.platform;return/^mac/i.test(a)?navigator.maxTouchPoints===5?"ios":"macos":/^win/i.test(a)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}function Xc(){if(!Me())return!0;if(/firefox/i.test(navigator.userAgent)){let t=navigator.userAgent.match(/firefox\/(\d+)/i);return t?parseInt(t[1])>=78:!1}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let t=navigator.userAgent.match(/edg\/(\d+)/i);return t?parseInt(t[1])>=79:!1}return!0}function zs(){return HTMLElement.prototype.hasOwnProperty("popover")}var N={strings:Jc,_locale:"",_dirty:!1,_subscribers:[],_numberFormatter:void 0,get locale(){return N._locale||(N._locale=Me()?navigator.language.slice(0,5):"en-US"),N._locale},set locale(t){N._locale=t,N._numberFormatter=void 0,N.dirty=!0},get numberFormatter(){if(!N._numberFormatter)try{N._numberFormatter=new Intl.NumberFormat(N.locale)}catch{try{N._numberFormatter=new Intl.NumberFormat(N.locale.slice(0,2))}catch{N._numberFormatter=new Intl.NumberFormat("en-US")}}return N._numberFormatter},merge(t,e){if(typeof t=="string"&&e)N.strings[t]=p(p({},N.strings[t]),e),N.dirty=!0;else for(let a of Object.keys(t))N.merge(a,t[a])},get dirty(){return N._dirty},set dirty(t){N._dirty||N._dirty===t||(N._dirty=!0,setTimeout(()=>{N._dirty=!1,this._subscribers.forEach(e=>e?.())},0))},subscribe(t){return N._subscribers.push(t),N._subscribers.length-1},unsubscribe(t){t<0||t>=N._subscribers.length||(N._subscribers[t]=void 0)},update(t){let e=t.querySelectorAll("[data-l10n-tooltip]");for(let a of e){let s=a.getAttribute("data-l10n-tooltip");if(s){let o=z(s);o&&a.setAttribute("data-tooltip",o)}}e=t.querySelectorAll("[data-l10n-arial-label]");for(let a of e){let s=a.getAttribute("data-l10n-arial-label");if(s){let o=z(s);o&&a.setAttribute("aria-label",o)}}}};function z(t,...e){if(t===void 0)return;let a="",s=N.locale;N.strings[s]&&(a=N.strings[s][t]);let o=s.slice(0,2);if(!a&&N.strings[o]&&(a=N.strings[o][t]),a||(a=N.strings.en[t]),!a)return;let l=/(%@|%([0-9]+)\$@)/g,u=l.exec(a),c=0;for(;u;){if(e[c++]){let d=u[2]?parseInt(u[2],10)-1:c-1,m=e[d];typeof m=="number"&&(m=N.numberFormatter.format(m)),a=a.replace(u[1],m)}u=l.exec(a)}return a=a.replace(/%%/g,"%"),a}var Ah={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},Ch={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},Ut={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",cyan:"#b8e5c9",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},jt={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",cyan:"#13a7ec",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},Zc={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},Eh={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function Hr(t){var e,a,s,o,l,u;let c=t.split("!"),d,m,g,A=255,P=255,W=255,me=-1,ve=c.length>0&&c[0].startsWith("-");ve&&(c[0]=c[0].slice(1));for(let He=0;He<c.length;He++){d=A,m=P,g=W;let De=(e=c[He].trim().match(/^([A-Za-z\d-]+)/))==null?void 0:e[1],Xe=De?.toLowerCase(),qe=De&&(u=(l=(o=(s=(a=jt[Xe])!=null?a:jt[Zc[De]])!=null?s:Ch[De])!=null?o:Eh[De])!=null?l:Ah[De])!=null?u:c[He].trim(),Rs=qe.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(Rs!=null&&Rs[1]&&Rs[2]&&Rs[3])A=Math.max(0,Math.min(255,Number.parseInt(Rs[1],16))),P=Math.max(0,Math.min(255,Number.parseInt(Rs[2],16))),W=Math.max(0,Math.min(255,Number.parseInt(Rs[3],16)));else if(Rs=qe.match(/^#([\da-f]{3})$/i),Rs!=null&&Rs[1]){let Vc=Number.parseInt(Rs[1][0],16),So=Number.parseInt(Rs[1][1],16),Do=Number.parseInt(Rs[1][2],16);A=Math.max(0,Math.min(255,Vc*16+Vc)),P=Math.max(0,Math.min(255,So*16+So)),W=Math.max(0,Math.min(255,Do*16+Do))}else if(Rs=qe.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),Rs!=null&&Rs[1]&&Rs[2]&&Rs[3])A=Math.max(0,Math.min(255,Number.parseInt(Rs[1]))),P=Math.max(0,Math.min(255,Number.parseInt(Rs[2]))),W=Math.max(0,Math.min(255,Number.parseInt(Rs[3])));else return;me>=0&&(A=(1-me)*A+me*d,P=(1-me)*P+me*m,W=(1-me)*W+me*g,me=-1),He+1<c.length&&(me=Math.max(0,Math.min(100,Number.parseInt(c[++He])))/100)}return me>=0&&(A=me*A+(1-me)*d,P=me*P+(1-me)*m,W=me*W+(1-me)*g),ve&&(A=255-A,P=255-P,W=255-W),"#"+("00"+Math.round(A).toString(16)).slice(-2)+("00"+Math.round(P).toString(16)).slice(-2)+("00"+Math.round(W).toString(16)).slice(-2)}function Si(t){var e,a;return t=t.trim(),(a=(e=Ut[t.toLowerCase()])!=null?e:Ut[Zc[t]])!=null?a:Hr(t)}function Th(t){if(!t||t[0]!=="#")return;t=t.slice(1);let e;return t.length<=4?(e={r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)},t.length===4&&(e.a=parseInt(t[3]+t[3],16)/255)):(e={r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)},t.length===8&&(e.a=parseInt(t[6]+t[7],16)/255)),e&&e.a===void 0&&(e.a=1),e}function Is(t,e,a){return a<0&&(a+=6),a>=6&&(a-=6),a<1?(e-t)*a+t:a<3?e:a<4?(e-t)*(4-a)+t:t}function Dh(t){let[e,a,s]=[t.h,t.s,t.l];e=(e+360)%360/60,s=Math.max(0,Math.min(s,1)),a=Math.max(0,Math.min(a,1));let o=s<=.5?s*(a+1):s+a-s*a,l=s*2-o;return{r:Math.round(255*Is(l,o,e+2)),g:Math.round(255*Is(l,o,e)),b:Math.round(255*Is(l,o,e-2))}}function Ns(t){return t<0?0:t>255?255:Math.round(t)}function Kh(t){let{r:e,g:a,b:s}=t,o=((1<<24)+(Ns(e)<<16)+(Ns(a)<<8)+Ns(s)).toString(16).slice(1);return o[0]===o[1]&&o[2]===o[3]&&o[4]===o[5]&&o[6]===o[7]&&(o=o[0]+o[2]+o[4]),"#"+o}function Oh(t){let{r:e,g:a,b:s}=t;e=e/255,a=a/255,s=s/255;let o=Math.min(e,a,s),l=Math.max(e,a,s),u=l-o,c,d;l===o?c=0:e===l?c=(a-s)/u:a===l?c=2+(s-e)/u:s===l&&(c=4+(e-a)/u),c=Math.min(c*60,360),c<0&&(c+=360);let m=(o+l)/2;return l===o?d=0:m<=.5?d=u/(l+o):d=u/(2-l-o),{h:c,s:d,l:m}}function Yc(t){let e=Th(t);if(!e)return t;let{h:a,s,l:o}=Oh(e);return s+=.1,o-=.1,Kh(Dh({h:a,s,l:o}))}var Fs={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10178:"\\perp",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},$s={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},Qc=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120822,len:10,offset:48,variant:"monospace"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"}];function Cn(t,e,a){if(!/[A-Za-z\d]/.test(t)||(a==="up"&&(a=void 0),!e&&!a))return;let s=t.codePointAt(0);if(s===void 0)return t;for(let o of Qc)if((!e||o.variant===e)&&(!a||o.style===a)&&s>=o.offset&&s<o.offset+o.len){let l=o.start+s-o.offset;return String.fromCodePoint($s[l]||l)}}function Bh(t){var e;if((t<119808||t>120831)&&(t<8448||t>8527))return{char:String.fromCodePoint(t)};for(let a in $s)if($s[a]===t){t=(e=a.codePointAt(0))!=null?e:0;break}for(let a of Qc)if(t>=a.start&&t<a.start+a.len)return{char:String.fromCodePoint(t-a.start+a.offset),variant:a.variant,style:a.style};return{char:String.fromCodePoint(t)}}function eu(t){var e;if("{}<>[]$&*#^_%:'".includes(t)||t.length>1)return;let a=(e=t.codePointAt(0))!=null?e:0,s=Fs[a];if(s)return s;let{char:o,variant:l,style:u}=Bh(a);if(!(!l&&!u)){switch(s=o,l){case"double-struck":s=`\\mathbb{${s}}`;break;case"fraktur":s=`\\mathfrak{${s}}`;break;case"script":s=`\\mathscr{${s}}`;break;case"sans-serif":s=`\\mathsf{${s}}`;break;case"monospace":s=`\\mathtt{${s}}`;break;case"calligraphic":s=`\\mathcal{${s}}`;break}switch(u){case"bold":s=`\\mathbf{${s}}`;break;case"italic":s=`\\mathit{${s}}`;break;case"bolditalic":s=`\\mathbfit{${s}}`;break}return s}}function C(t){return t?Array.isArray(t)?t:typeof t=="object"&&"group"in t?t.group:[]:[]}var En={},zo=p({},Fs),Ai={},qs={},Rh={darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",C:"\\mathbb{C}",H:"\\mathbb{H}",N:"\\mathbb{N}",Q:"\\mathbb{Q}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",doublecap:"\\Cap",doublecup:"\\Cup",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",hArr:"\\Leftrightarrow",harr:"\\leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",Larr:"\\Leftarrow",lArr:"\\Leftarrow",lrarr:"\\leftrightarrow",Lrarr:"\\Leftrightarrow",lrArr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",part:"\\partial",plusmn:"\\pm",rarr:"\\rightarrow",Rarr:"\\Rightarrow",rArr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",restriction:"\\upharpoonright",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",varcoppa:"\\coppa",weierp:"\\wp",Zeta:"\\mathrm{Z}"},Ph={varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1,captureSelection:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},zh={bra:{def:"\\mathinner{\\langle{#1}|}",args:1,captureSelection:!1},ket:{def:"\\mathinner{|{#1}\\rangle}",args:1,captureSelection:!1},braket:{def:"\\mathinner{\\langle{#1}\\rangle}",args:1,captureSelection:!1},set:{def:"\\mathinner{\\lbrace #1 \\rbrace}",args:1,captureSelection:!1},Bra:{def:"\\left\\langle #1\\right|",args:1,captureSelection:!1},Ket:{def:"\\left|#1\\right\\rangle",args:1,captureSelection:!1},Braket:{def:"\\left\\langle{#1}\\right\\rangle",args:1,captureSelection:!1},Set:{def:"\\left\\lbrace #1 \\right\\rbrace",args:1,captureSelection:!1}},Ih={strut:{primitive:!0,def:"\\phantom{\\rule[0.3\\baselineskip]{0}{0.7\\baselineskip}}",args:0,captureSelection:!0},iff:{primitive:!0,captureSelection:!0,def:"\\;\\Longleftrightarrow\\;"},nicefrac:"^{#1}\\!\\!/\\!_{#2}",phase:{def:"\\enclose{phasorangle}{#1}",args:1,captureSelection:!1},rd:"\\mathrm{d}",rD:"\\mathrm{D}",odif:"\\mathrm{d}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}",mathstrut:{def:"\\vphantom{(}",primitive:!0},angl:"\\enclose{actuarial}{#1}",angln:"\\enclose{actuarial}{n}",anglr:"\\enclose{actuarial}{r}",anglk:"\\enclose{actuarial}{k}",mathtools:{primitive:!0,package:{ordinarycolon:":",vcentcolon:"\\mathrel{\\mathop\\ordinarycolon}",dblcolon:'{\\mathop{\\char"2237}}',coloneqq:'{\\mathop{\\char"2254}}',Coloneqq:'{\\mathop{\\char"2A74}}',coloneq:'{\\mathop{\\char"2254}}',Coloneq:'{\\mathop{\\char"2A74}}',eqqcolon:'{\\mathop{\\char"2255}}',Eqqcolon:'{\\mathop{\\char"3D\\char"2237}}',eqcolon:'{\\mathop{\\char"2255}}',Eqcolon:'{\\mathop{\\char"3D\\char"2237}}',colonapprox:'{\\mathop{\\char"003A\\char"2248}}',Colonapprox:'{\\mathop{\\char"2237\\char"2248}}',colonsim:'{\\mathop{\\char"3A\\char"223C}}',Colonsim:'{\\mathop{\\char"2237\\char"223C}}',colondash:"\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",Colondash:"\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}"}},ratio:"\\vcentcolon",coloncolon:"\\dblcolon",colonequals:"\\coloneq",coloncolonequals:"\\Coloneq",equalscolon:"\\eqcolon",equalscoloncolon:"\\Eqcolon",colonminus:"\\colondash",coloncolonminus:"\\Colondash",minuscolon:"\\dashcolon",minuscoloncolon:"\\Dashcolon",coloncolonapprox:"\\Colonapprox",coloncolonsim:"\\Colonsim",simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",simcoloncolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcoloncolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",notni:"\\mathrel{\\char`}",limsup:"\\operatorname*{lim\\,sup}",liminf:"\\operatorname*{lim\\,inf}",injlim:"\\operatorname*{inj\\,lim}",projlim:"\\operatorname*{proj\\,lim}",varlimsup:"\\operatorname*{\\overline{lim}}",varliminf:"\\operatorname*{\\underline{lim}}",varinjlim:"\\operatorname*{\\underrightarrow{lim}}",varprojlim:"\\operatorname*{\\underleftarrow{lim}}",argmin:"\\operatorname*{arg\\,min}",argmax:"\\operatorname*{arg\\,max}",plim:"\\mathop{\\operatorname{plim}}\\limits",tripledash:{def:"\\vphantom{-}\\raise{4mu}{\\mkern1.5mu\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2mu}}",expand:!0},"braket.sty":{package:zh},"amsmath.sty":{package:Ph,primitive:!0},"texvc.sty":{package:Rh,primitive:!1}},Li={" ":32,"\\!":33,"\\#":35,"\\$":36,"\\%":37,"\\&":38,"\\_":95,"-":45,"\\textunderscore":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\textbraceleft":123,"\\textbraceright":125,"\\lbrace":123,"\\rbrace":125,"\\lbrack":91,"\\rbrack":93,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"":8211,"":8212,"":8216,"":8217,"":8220,"":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},iu=/[\w!@*()-=+{}\[\]\\';:?/.,~<>`|$%#&^" ]/,Io,Wr;Xc()?(Io=new RegExp("\\p{Letter}","u"),Wr=new RegExp("[0-9\\p{Letter}]","u")):(Io=/[a-zA-Z]/,Wr=/[\da-zA-Z]/);function Vs(t,e,a="mord",s){e!==void 0&&(En[t]={definitionType:"symbol",type:a,variant:s,codepoint:e},zo[e]||(zo[e]=t))}function ye(t,e,a){if(typeof t=="string"){for(let s=0;s<t.length;s++){let o=t.charAt(s);Vs(o,o.codePointAt(0))}return}for(let[s,o,l,u]of t)Vs(s,o,l??e,u??a)}function Hs(t,e){for(let a=t;a<=e;a++)Vs(String.fromCodePoint(a),a)}function nu(t){var e;return(e=qs[t])!=null?e:null}function ou(t,e){var a,s;if(e.length===0||e==="\\"||!e.startsWith("\\"))return[];let o=[];for(let u in Ai)u.startsWith(e)&&!Ai[u].infix&&o.push({match:u,frequency:(a=Ai[u].frequency)!=null?a:0});for(let u in En)u.startsWith(e)&&o.push({match:u,frequency:(s=En[u].frequency)!=null?s:0});let l=e.substring(1);for(let u of Object.keys(t.options.macros))u.startsWith(l)&&o.push({match:"\\"+u,frequency:0});return o.sort((u,c)=>{var d,m;return u.frequency===c.frequency?u.match.length===c.match.length?u.match<c.match?-1:1:u.match.length-c.match.length:((d=c.frequency)!=null?d:0)-((m=u.frequency)!=null?m:0)}),o.map(u=>u.match)}function tu(t){let e="auto",a=t.match(/:([^=]+)/);return a&&(e=a[1].trim()),e}function No(t){if(!t)return[];let e=[],a=t.split("]");if(a[0].startsWith("[")){e.push({isOptional:!0,type:tu(a[0].slice(1))});for(let s=1;s<=a.length;s++)e.push(...No(a[s]))}else if(a=t.split("}"),a[0].startsWith("{")){e.push({isOptional:!1,type:tu(a[0].slice(1))});for(let s=1;s<=a.length;s++)e.push(...No(a[s]))}return e}function Ws(t){if(!t)return"";let e="",a=!0;for(let s of t)typeof s.value=="string"?e+=s.value:a=!1;return a?e:""}function St(t,e,a){typeof t=="string"&&(t=[t]);let s={tabular:!0,rootOnly:!1,params:No(e),createAtom:a};for(let o of t)qs[o]=s}function $o(t,e,a){var s;typeof t=="string"&&(t=[t]);let o={tabular:(s=a?.tabular)!=null?s:!1,rootOnly:!0,params:[],createAtom:e};for(let l of t)qs[l]=o}function v(t,e,a){var s,o;a||(a={});let l={definitionType:"function",params:No(e),ifMode:a.ifMode,isFunction:(s=a.isFunction)!=null?s:!1,applyMode:a.applyMode,infix:(o=a.infix)!=null?o:!1,parse:a.parse,createAtom:a.createAtom,applyStyle:a.applyStyle,serialize:a.serialize,render:a.render};if(typeof t=="string")Ai["\\"+t]=l;else for(let u of t)Ai["\\"+u]=l}var Po;function Ei(t){return Po||(Po=Ci(Ih)),t?Ci(p(p({},Po),t)):Po}function ru(t,e){var a,s,o,l;if(typeof t=="string"){let u=0,c=t;return/(^|[^\\])#1/.test(c)&&(u=1),/(^|[^\\])#2/.test(c)&&(u=2),/(^|[^\\])#3/.test(c)&&(u=3),/(^|[^\\])#4/.test(c)&&(u=4),/(^|[^\\])#5/.test(c)&&(u=5),/(^|[^\\])#6/.test(c)&&(u=6),/(^|[^\\])#7/.test(c)&&(u=7),/(^|[^\\])#8/.test(c)&&(u=8),/(^|[^\\])#9/.test(c)&&(u=9),{expand:(a=e?.expand)!=null?a:!0,captureSelection:(s=e?.captureSelection)!=null?s:!0,args:u,def:c}}return p({expand:(o=e?.expand)!=null?o:!0,captureSelection:(l=e?.captureSelection)!=null?l:!0,args:0},t)}function Ci(t){if(!t)return{};let e={};for(let a of Object.keys(t)){let s=t[a];if(s==null)delete e[a];else if(typeof s=="object"&&"package"in s)for(let o of Object.keys(s.package))e[o]=ru(s.package[o],{expand:!s.primitive,captureSelection:s.captureSelection});else e[a]=ru(s)}return e}function se(t,e="math"){if(!t||t.length===0)return null;let a=null;if(t.startsWith("\\")){if(a=Ai[t],a)return!a.ifMode||a.ifMode===e?a:null;e==="math"?a=En[t]:Li[t]&&(a={definitionType:"symbol",type:"mord",codepoint:Li[t]})}else if(e==="math"){if(a=En[t],!a&&t.length===1){let s=Us("math",t.codePointAt(0));return s.startsWith("\\")?f(p({},se(s,"math")),{command:s}):null}}else Li[t]?a={definitionType:"symbol",type:"mord",codepoint:Li[t]}:e==="text"&&(a={definitionType:"symbol",type:"mord",codepoint:t.codePointAt(0)});return a??null}function Ti(t,e){if(!t.startsWith("\\"))return null;let a=t.slice(1);return e[a]}function Us(t,e){return e===void 0?"":t==="math"&&zo[e]?zo[e]:t==="text"&&Object.keys(Li).find(s=>Li[s]===e)||String.fromCodePoint(e)}var Ze=[0,.68889,0,0,.72222],Ur=[0,.68889,0,0,.66667],js=[0,.68889,0,0,.77778],Fo=[0,.68889,0,0,.61111],au=[.16667,.68889,0,0,.77778],Tn=[0,.68889,0,0,.55556],j=[0,0,0,0,.25],su=[0,.825,0,0,2.33334],lu=[0,.9,0,0,2.33334],Vo=[0,.68889,0,0,.54028],Js=[-.03598,.46402,0,0,.5],Ce=[-.13313,.36687,0,0,1],qo=[.01354,.52239,0,0,1],cu=[.01354,.52239,0,0,1.11111],uu=[0,.54986,0,0,1],Ho=[0,.69224,0,0,.5],Gs=[0,.43056,0,0,1],lr=[.08198,.58198,0,0,.77778],Wo=[.19444,.69224,0,0,.41667],Uo=[.1808,.675,0,0,1],du=[.19444,.69224,0,0,.83334],mu=[.13667,.63667,0,0,1],pu=[-.064,.437,0,0,1.334],cr=[.08167,.58167,0,0,.77778],Dn=[0,.69224,0,0,.72222],Xs=[0,.69224,0,0,.66667],jo=[-.13313,.36687,0,0,.77778],hu=[.06062,.54986,0,0,.77778],Jo=[0,.69224,0,0,.77778],Di=[.25583,.75583,0,0,.77778],Lt=[.25142,.75726,0,0,.77778],Ki=[.20576,.70576,0,0,.77778],at=[.30274,.79383,0,0,.77778],Kn=[.22958,.72958,0,0,.77778],fu=[.1808,.675,0,0,.77778],At=[.13667,.63667,0,0,.77778],Ie=[.13597,.63597,0,0,.77778],ur=[.03517,.54986,0,0,.77778],Oi=[0,.675,0,0,.77778],gu=[.19444,.69224,0,0,.61111],bu=[0,.54986,0,0,.76042],yu=[0,.54986,0,0,.66667],dr=[.0391,.5391,0,0,.77778],xu=[.03517,.54986,0,0,1.33334],vu=[.38569,.88569,0,0,.77778],Go=[.23222,.74111,0,0,.77778],_u=[.19444,.69224,0,0,.77778],Mu=[0,.37788,0,0,.5],Xo=[0,.54986,0,0,.72222],wu=[0,.69224,0,0,.83334],ku=[.11111,.69224,0,0,.66667],Bi=[.26167,.75726,0,0,.77778],Su=[.48256,.98256,0,0,.77778],Lu=[.28481,.79383,0,0,.77778],Au=[.08167,.58167,0,0,.22222],Cu=[.08167,.58167,0,0,.38889],Eu=[0,.43056,.04028,0,.66667],Tu=[.41951,.91951,0,0,.77778],Du=[.24982,.74947,0,0,.38865],Ku=[.08319,.58283,0,0,.75623],Ou=[0,.10803,0,0,.27764],Zs=[0,.47534,0,0,.50181],On=[.18906,.47534,0,0,.50181],Bu=[0,.69141,0,0,.50181],Ru=[.24982,.74947,0,0,.27764],Ys=[0,.69141,0,0,.21471],Zo=[.25,.75,0,0,.44722],Ye=[0,.64444,0,0,.575],Ri=[.08556,.58556,0,0,.89444],Yo=[0,.69444,0,0,.89444],Qo=[0,.68611,0,0,.9],Qs=[0,.68611,0,0,.86944],mr=[.25,.75,0,0,.575],ea=[.25,.75,0,0,.31944],jr=[0,.69444,0,0,.63889],Pi=[0,.69444,0,0,.31944],Pu=[0,.44444,0,0,.63889],zu=[0,.44444,0,0,.51111],pr=[0,.69444,0,0,.575],st=[.13333,.63333,0,0,.89444],Iu=[0,.44444,0,0,.31944],Nu=[0,.69444,0,0,.86944],$u=[0,.68611,0,0,.69166],ta=[0,.68611,0,0,.83055],el=[0,.68611,0,0,.89444],tl=[0,.69444,0,0,.60278],Fu=[.19444,.69444,0,0,.51111],Vu=[0,.69444,0,0,.83055],Ct=[-.10889,.39111,0,0,1.14999],qu=[.19444,.69444,0,0,.575],Bn=[.19444,.69444,0,0,1.14999],Hu=[.19444,.69444,0,0,.70277],Wu=[.05556,.75,0,0,.575],rl=[0,.68611,0,0,.95833],Uu=[.08556,.58556,0,0,.76666],il=[-.02639,.47361,0,0,.575],ju=[0,.44444,0,0,.89444],Jr=[0,.55556,0,0,.76666],Ju=[-.10889,.39111,0,0,.89444],nl=[.00222,.50222,0,0,.89444],hr=[.19667,.69667,0,0,.89444],Gu=[.08556,.58556,0,0,1.14999],ol=[0,.69444,0,0,.70277],ra=[-.02778,.47222,0,0,.575],ia=[.25,.75,0,0,.51111],Xu=[-.13889,.36111,0,0,1.14999],Zu=[.19444,.69444,0,0,1.02222],na=[.12963,.69444,0,0,.89444],Yu=[.19444,.69444,0,0,.44722],fr=[0,.64444,.13167,0,.59111],Qu=[.19444,.64444,.13167,0,.59111],al=[0,.68611,.17208,0,.8961],ed=[.19444,.44444,.105,0,.53222],td=[0,.44444,.085,0,.82666],rd=[0,.69444,.06709,0,.59111],oa=[0,.69444,.12945,0,.35555],id$2=[0,.69444,0,0,.94888],sl=[0,.69444,.11472,0,.59111],nd=[0,.68611,.10778,0,.88555],od=[0,.69444,.07939,0,.62055],aa=[0,.69444,.12417,0,.30667],gr=[0,.64444,.13556,0,.51111],ad=[.19444,.64444,.13556,0,.51111],sa=[0,.68333,.16389,0,.74333],sd=[.19444,.43056,.08847,0,.46],ld=[0,.43056,.07514,0,.71555],cd=[0,.69444,.06646,0,.51111],ud=[0,.69444,0,0,.83129],dd=[0,.69444,.1225,0,.51111],md=[0,.68333,.09403,0,.76666],pd=[0,.68333,.11111,0,.76666],hd=[0,.69444,.06961,0,.51444],Jt=[0,.69444,0,0,.27778],zi=[.25,.75,0,0,.38889],Qe=[0,.64444,0,0,.5],Gr=[0,.69444,0,0,.77778],Xr=[0,.68333,0,0,.75],Rn=[0,.68333,0,0,.77778],fd=[0,.68333,0,0,.68056],Pn=[0,.68333,0,0,.72222],Gt=[.25,.75,0,0,.5],la=[.25,.75,0,0,.27778],xe=[0,.69444,0,0,.5],Ii=[0,.69444,0,0,.55556],ll=[0,.43056,0,0,.44445],zn=[0,.43056,0,0,.5],gd=[.19444,.43056,0,0,.55556],bd=[0,.43056,0,0,.55556],et=[.08333,.58333,0,0,.77778],yd=[0,.43056,0,0,.27778],xd=[0,.66786,0,0,.27778],vd=[0,.69444,0,0,.75],_d=[0,.66786,0,0,.5],Md=[0,.68333,0,0,.625],cl=[.19444,.69444,0,0,.44445],In=[0,.69444,0,0,.72222],wd=[.19444,.69444,0,0,.5],Nn=[.19444,.69444,0,0,1],kd=[.011,.511,0,0,1.126],ul=[.19444,.69444,0,0,.61111],dl=[.05556,.75,0,0,.5],Sd=[0,.68333,0,0,.83334],Ld=[.0391,.5391,0,0,.66667],ml=[-.05555,.44445,0,0,.5],Ad=[0,.43056,0,0,.77778],Zr=[0,.55556,0,0,.66667],ca=[-.03625,.46375,0,0,.77778],Cd=[-.01688,.48312,0,0,.77778],Ed=[.0391,.5391,0,0,1],br=[0,.69444,0,0,.61111],ua=[-.03472,.46528,0,0,.5],da=[.25,.75,0,0,.44445],Td=[-.14236,.35764,0,0,1],ma=[.244,.744,0,0,.412],Dd=[.19444,.69444,0,0,.88889],pa=[.12963,.69444,0,0,.77778],Kd=[.19444,.69444,0,0,.38889],Od=[.011,.511,0,0,1.638],Bd=[.19444,.69444,0,0,0],ha=[0,.44444,0,0,.575],$n=[.19444,.44444,0,0,.575],Rd=[0,.68611,0,0,.75555],Pd=[0,.69444,0,0,.66759],zd=[0,.68611,0,0,.80555],Id=[0,.68611,.08229,0,.98229],Nd=[0,.68611,0,0,.76666],$d=[0,.44444,0,0,.58472],Fd=[.19444,.44444,0,0,.6118],Fn=[.19444,.43056,0,0,.5],Vd=[0,.68333,.02778,.08334,.76278],qd=[0,.68333,.08125,.05556,.83125],Hd=[0,.43056,0,.05556,.48472],Wd=[.19444,.43056,0,.08334,.51702],Ud=[.25,.75,0,0,.42778],ke=[0,.69444,0,0,.55],Xt=[0,.69444,0,0,.73334],yr=[0,.69444,0,0,.79445],jd=[0,.69444,0,0,.51945],pl=[0,.69444,0,0,.70278],Jd=[0,.69444,0,0,.76389],Gd=[.25,.75,0,0,.34306],hl=[0,.69444,0,0,.56111],Xd=[0,.69444,0,0,.25556],Zd=[.19444,.45833,0,0,.56111],Yd=[0,.45833,0,0,.56111],fa=[0,.69444,0,0,.30556],Qd=[0,.69444,0,0,.58056],e0=[0,.69444,0,0,.67223],fl=[0,.69444,0,0,.85556],gl=[0,.69444,0,0,.55834],Et=[0,.65556,.11156,0,.5],bl=[0,.69444,.08094,0,.70834],yl=[.17014,0,0,0,.44445],t0=[0,.69444,.0799,0,.5],r0=[0,.69444,0,0,.73752],i0=[0,.69444,.09205,0,.5],n0=[0,.69444,.09031,0,.77778],xl=[0,.69444,.07816,0,.27778],o0=[0,.69444,.00316,0,.5],a0=[.19444,.69444,0,0,.83334],s0=[.05556,.75,0,0,.83334],l0=[0,.75,0,0,.5],c0=[.125,.08333,0,0,.27778],u0=[0,.08333,0,0,.27778],Tt=[0,.65556,0,0,.5],vl=[0,.69444,0,0,.47222],Zt=[0,.69444,0,0,.66667],d0=[0,.69444,0,0,.59722],_l=[0,.69444,0,0,.54167],Ml=[0,.69444,0,0,.70834],m0=[.25,.75,0,0,.28889],wl=[0,.69444,0,0,.51667],p0=[0,.44444,0,0,.44445],h0=[.19444,.44444,0,0,.51667],f0=[0,.44444,0,0,.38333],g0=[0,.44444,0,0,.51667],b0=[0,.69444,0,0,.83334],y0=[.35001,.85,0,0,.45834],x0=[.35001,.85,0,0,.57778],v0=[.35001,.85,0,0,.41667],_0=[.35001,.85,0,0,.58334],ga=[0,.72222,0,0,.55556],M0=[1e-5,.6,0,0,.66667],w0=[1e-5,.6,0,0,.77778],k0=[.25001,.75,0,0,.94445],S0=[.306,.805,.19445,0,.47222],L0=[.30612,.805,.19445,0,.47222],Ni=[.25001,.75,0,0,.83334],$i=[.35001,.85,0,0,.47222],kl=[.25001,.75,0,0,1.11111],A0=[.65002,1.15,0,0,.59722],C0=[.65002,1.15,0,0,.81111],E0=[.65002,1.15,0,0,.47222],T0=[.65002,1.15,0,0,.66667],ba=[0,.75,0,0,1],D0=[.55001,1.05,0,0,1.27778],K0=[.862,1.36,.44445,0,.55556],O0=[.86225,1.36,.44445,0,.55556],Fi=[.55001,1.05,0,0,1.11111],ya=[.65002,1.15,0,0,.52778],B0=[.65002,1.15,0,0,.61111],Sl=[.55001,1.05,0,0,1.51112],R0=[.95003,1.45,0,0,.73611],P0=[.95003,1.45,0,0,1.04445],z0=[.95003,1.45,0,0,.52778],xa=[.95003,1.45,0,0,.75],va=[0,.75,0,0,1.44445],_a=[.95003,1.45,0,0,.58334],I0=[1.25003,1.75,0,0,.79167],N0=[1.25003,1.75,0,0,1.27778],$0=[1.25003,1.75,0,0,.58334],Ma=[1.25003,1.75,0,0,.80556],wa=[0,.825,0,0,1.8889],ka=[1.25003,1.75,0,0,.63889],Sa=[.64502,1.155,0,0,.875],F0=[1e-5,.6,0,0,.875],Ll=[-99e-5,.601,0,0,.66667],La=[.64502,1.155,0,0,.66667],V0=[1e-5,.9,0,0,.88889],q0=[.65002,1.15,0,0,.88889],H0=[.90001,0,0,0,.88889],W0=[-.00499,.605,0,0,1.05556],Aa=[0,.12,0,0,.45],T=[0,.61111,0,0,.525],lt=[.08333,.69444,0,0,.525],U0=[-.08056,.53055,0,0,.525],j0=[-.05556,.55556,0,0,.525],Ke=[0,.43056,0,0,.525],Vn=[.22222,.43056,0,0,.525],J0=[0,0,0,0,.525],G0={"AMS-Regular":{32:j,65:Ze,66:Ur,67:Ze,68:Ze,69:Ur,70:Fo,71:js,72:js,73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:js,76:Ur,77:[0,.68889,0,0,.94445],78:Ze,79:au,80:Fo,81:au,82:Ze,83:Tn,84:Ur,85:Ze,86:Ze,87:[0,.68889,0,0,1],88:Ze,89:Ze,90:Ur,107:Tn,160:j,165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:Tn,295:Vo,710:su,732:lu,770:su,771:lu,989:cr,1008:Eu,8245:[0,.54986,0,0,.275],8463:Vo,8487:Ze,8498:Tn,8502:Ur,8503:[0,.68889,0,0,.44445],8504:Ur,8513:[0,.68889,0,0,.63889],8592:Js,8594:Js,8602:Ce,8603:Ce,8606:qo,8608:qo,8610:cu,8611:cu,8619:uu,8620:uu,8621:[-.13313,.37788,0,0,1.38889],8622:Ce,8624:Ho,8625:Ho,8630:Gs,8631:Gs,8634:lr,8635:lr,8638:Wo,8639:Wo,8642:Wo,8643:Wo,8644:Uo,8646:Uo,8647:Uo,8648:du,8649:Uo,8650:du,8651:qo,8652:qo,8653:Ce,8654:Ce,8655:Ce,8666:mu,8667:mu,8669:[-.13313,.37788,0,0,1],8672:pu,8674:pu,8705:[0,.825,0,0,.5],8708:Tn,8709:cr,8717:[0,.43056,0,0,.42917],8722:Js,8724:[.08198,.69224,0,0,.77778],8726:cr,8733:Jo,8736:Dn,8737:Dn,8738:[.03517,.52239,0,0,.72222],8739:Au,8740:[.25142,.74111,0,0,.27778],8741:Cu,8742:[.25142,.74111,0,0,.5],8756:Xs,8757:Xs,8764:jo,8765:[-.13313,.37788,0,0,.77778],8769:jo,8770:ca,8774:at,8776:Cd,8778:cr,8782:hu,8783:hu,8785:lr,8786:lr,8787:lr,8790:Jo,8791:Kn,8796:[.08198,.91667,0,0,.77778],8806:Di,8807:Di,8808:Lt,8809:Lt,8812:[.25583,.75583,0,0,.5],8814:Ki,8815:Ki,8816:at,8817:at,8818:Kn,8819:Kn,8822:fu,8823:fu,8828:At,8829:At,8830:Kn,8831:Kn,8832:Ki,8833:Ki,8840:at,8841:at,8842:Ie,8843:Ie,8847:ur,8848:ur,8858:lr,8859:lr,8861:lr,8862:Oi,8863:Oi,8864:Oi,8865:Oi,8872:[0,.69224,0,0,.61111],8873:Dn,8874:[0,.69224,0,0,.88889],8876:Fo,8877:Fo,8878:Ze,8879:Ze,8882:ur,8883:ur,8884:At,8885:At,8888:[0,.54986,0,0,1.11111],8890:gd,8891:gu,8892:gu,8901:[0,.54986,0,0,.27778],8903:cr,8905:cr,8906:cr,8907:Jo,8908:Jo,8909:[-.03598,.46402,0,0,.77778],8910:bu,8911:bu,8912:ur,8913:ur,8914:yu,8915:yu,8916:Xs,8918:dr,8919:dr,8920:xu,8921:xu,8922:vu,8923:vu,8926:At,8927:At,8928:at,8929:at,8934:Go,8935:Go,8936:Go,8937:Go,8938:Ki,8939:Ki,8940:at,8941:at,8994:_u,8995:_u,9416:[.15559,.69224,0,0,.90222],9484:Ho,9488:Ho,9492:Mu,9496:Mu,9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:Oi,9633:Oi,9650:Xo,9651:Xo,9654:ur,9660:Xo,9661:Xo,9664:ur,9674:ku,9733:[.19444,.69224,0,0,.94445],10003:wu,10016:wu,10731:ku,10846:[.19444,.75583,0,0,.61111],10877:At,10878:At,10885:Di,10886:Di,10887:Ie,10888:Ie,10889:Bi,10890:Bi,10891:Su,10892:Su,10901:At,10902:At,10933:Lt,10934:Lt,10935:Bi,10936:Bi,10937:Bi,10938:Bi,10949:Di,10950:Di,10955:Lu,10956:Lu,57350:Au,57351:Cu,57352:cr,57353:Eu,57356:Lt,57357:Lt,57358:Tu,57359:at,57360:at,57361:Tu,57366:Lt,57367:Lt,57368:Lt,57369:Lt,57370:Ie,57371:Ie},"Caligraphic-Regular":{32:j,65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:j},"Fraktur-Regular":{32:j,33:[0,.69141,0,0,.29574],34:Ys,38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:Du,41:Du,42:[0,.62119,0,0,.27764],43:Ku,44:Ou,45:Ku,46:Ou,47:[.24982,.74947,0,0,.50181],48:Zs,49:Zs,50:Zs,51:On,52:On,53:On,54:Bu,55:On,56:Bu,57:On,58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:Ru,93:Ru,94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:j,8216:Ys,8217:Ys,58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:j,33:[0,.69444,0,0,.35],34:tl,35:[.19444,.69444,0,0,.95833],36:Wu,37:[.05556,.75,0,0,.95833],38:Yo,39:Pi,40:Zo,41:Zo,42:[0,.75,0,0,.575],43:st,44:[.19444,.15556,0,0,.31944],45:f0,46:[0,.15556,0,0,.31944],47:mr,48:Ye,49:Ye,50:Ye,51:Ye,52:Ye,53:Ye,54:Ye,55:Ye,56:Ye,57:Ye,58:Iu,59:[.19444,.44444,0,0,.31944],60:Ri,61:Ju,62:Ri,63:[0,.69444,0,0,.54305],64:Yo,65:Qs,66:[0,.68611,0,0,.81805],67:ta,68:[0,.68611,0,0,.88194],69:Rd,70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:Qo,73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:$u,77:[0,.68611,0,0,1.09166],78:Qo,79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:Qs,89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:ea,92:mr,93:ea,94:pr,95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:jr,99:zu,100:jr,101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:jr,105:Pi,106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:Pi,109:[0,.44444,0,0,.95833],110:Pu,111:ha,112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:Pu,118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:zu,123:mr,124:ea,125:mr,126:[.35,.34444,0,0,.575],160:j,163:[0,.69444,0,0,.86853],168:pr,172:[0,.44444,0,0,.76666],176:Nu,177:st,184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:st,216:[.04861,.73472,0,0,.89444],223:d0,230:[0,.44444,0,0,.83055],247:st,248:[.09722,.54167,0,0,.575],305:Iu,338:[0,.68611,0,0,1.16944],339:ju,567:[.19444,.44444,0,0,.35139],710:pr,711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:pr,715:pr,728:pr,729:Pi,730:Nu,732:pr,733:pr,915:$u,916:rl,920:el,923:zd,926:Nd,928:Qo,931:ta,933:el,934:ta,936:el,937:ta,8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:Pi,8217:Pi,8220:tl,8221:tl,8224:Fu,8225:Fu,8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:Pd,8465:Vu,8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:Vu,8501:ol,8592:Ct,8593:qu,8594:Ct,8595:qu,8596:Ct,8597:mr,8598:Bn,8599:Bn,8600:Bn,8601:Bn,8636:Ct,8637:Ct,8640:Ct,8641:Ct,8656:Ct,8657:Hu,8658:Ct,8659:Hu,8660:Ct,8661:[.25,.75,0,0,.70277],8704:jr,8706:[0,.69444,.06389,0,.62847],8707:jr,8709:Wu,8711:rl,8712:Uu,8715:Uu,8722:st,8723:st,8725:mr,8726:mr,8727:ra,8728:il,8729:il,8730:[.18,.82,0,0,.95833],8733:ju,8734:[0,.44444,0,0,1.14999],8736:Dn,8739:ea,8741:mr,8743:Jr,8744:Jr,8745:Jr,8746:Jr,8747:[.19444,.69444,.12778,0,.56875],8764:Ju,8768:[.19444,.69444,0,0,.31944],8771:nl,8776:[.02444,.52444,0,0,.89444],8781:nl,8801:nl,8804:hr,8805:hr,8810:Gu,8811:Gu,8826:Ri,8827:Ri,8834:Ri,8835:Ri,8838:hr,8839:hr,8846:Jr,8849:hr,8850:hr,8851:Jr,8852:Jr,8853:st,8854:st,8855:st,8856:st,8857:st,8866:ol,8867:ol,8868:Yo,8869:Yo,8900:il,8901:[-.02639,.47361,0,0,.31944],8902:ra,8968:ia,8969:ia,8970:ia,8971:ia,8994:Xu,8995:Xu,9651:Zu,9657:ra,9661:Zu,9667:ra,9711:Bn,9824:na,9825:na,9826:na,9827:na,9837:[0,.75,0,0,.44722],9838:Yu,9839:Yu,10216:Zo,10217:Zo,10815:Qo,10927:hr,10928:hr,57376:Bd},"Main-BoldItalic":{32:j,33:[0,.69444,.11417,0,.38611],34:od,35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:oa,40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:fr,49:fr,50:fr,51:fr,52:Qu,53:fr,54:fr,55:Qu,56:fr,57:fr,58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:sl,64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:al,73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:al,79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:rd,95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:ed,104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:ed,114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:j,168:[0,.69444,.11473,0,.59111],176:id$2,184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:td,248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:td,567:[.19444,.44444,.04611,0,.385],710:rd,711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:oa,730:id$2,732:sl,733:sl,915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:al,931:[0,.68611,.11431,0,.82666],933:nd,934:[0,.68611,.05632,0,.82666],936:nd,937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:oa,8217:oa,8220:[0,.69444,.16772,0,.62055],8221:od},"Main-Italic":{32:j,33:aa,34:hd,35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:aa,40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:gr,49:gr,50:gr,51:gr,52:ad,53:gr,54:gr,55:ad,56:gr,57:gr,58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:dd,64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:sa,73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:sa,79:md,80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:sa,86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:cd,95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:sd,104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:sd,114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:j,168:[0,.66786,.10474,0,.51111],176:ud,184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:ld,248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:ld,710:cd,711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:ud,732:[0,.66786,.11585,0,.51111],733:dd,915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:md,923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:sa,931:[0,.68333,.12028,0,.71555],933:pd,934:[0,.68333,.05986,0,.71555],936:pd,937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:aa,8217:aa,8220:[0,.69444,.1685,0,.51444],8221:hd,8463:Vo},"Main-Regular":{32:j,33:Jt,34:xe,35:a0,36:dl,37:s0,38:Gr,39:Jt,40:zi,41:zi,42:l0,43:et,44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:Gt,48:Qe,49:Qe,50:Qe,51:Qe,52:Qe,53:Qe,54:Qe,55:Qe,56:Qe,57:Qe,58:yd,59:[.19444,.43056,0,0,.27778],60:dr,61:jo,62:dr,63:vl,64:Gr,65:Xr,66:[0,.68333,0,0,.70834],67:Pn,68:[0,.68333,0,0,.76389],69:fd,70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:Xr,73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:Rn,76:Md,77:[0,.68333,0,0,.91667],78:Xr,79:Rn,80:fd,81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:Pn,85:Xr,86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:Xr,89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:la,92:Gt,93:la,94:xe,95:[.31,.12056,.02778,0,.5],97:zn,98:Ii,99:ll,100:Ii,101:ll,102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:Ii,105:xd,106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:Jt,109:[0,.43056,0,0,.83334],110:bd,111:zn,112:gd,113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:bd,118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:ll,123:Gt,124:la,125:Gt,126:[.35,.31786,0,0,.5],160:j,163:[0,.69444,0,0,.76909],167:cl,168:_d,172:[0,.43056,0,0,.66667],176:vd,177:et,182:ul,184:yl,198:[0,.68333,0,0,.90278],215:et,216:[.04861,.73194,0,0,.77778],223:xe,230:[0,.43056,0,0,.72222],247:et,248:[.09722,.52778,0,0,.5],305:yd,338:[0,.68333,0,0,1.01389],339:Ad,567:[.19444,.43056,0,0,.30556],710:xe,711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:xe,715:xe,728:xe,729:xd,730:vd,732:_d,733:xe,915:Md,916:Sd,920:Rn,923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:Xr,931:Pn,933:Rn,934:Pn,936:Rn,937:Pn,8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:Jt,8217:Jt,8220:xe,8221:xe,8224:cl,8225:cl,8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:Vo,8465:In,8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:In,8501:br,8592:Ce,8593:wd,8594:Ce,8595:wd,8596:Ce,8597:Gt,8598:Nn,8599:Nn,8600:Nn,8601:Nn,8614:[.011,.511,0,0,1],8617:kd,8618:kd,8636:Ce,8637:Ce,8640:Ce,8641:Ce,8652:[.011,.671,0,0,1],8656:Ce,8657:ul,8658:Ce,8659:ul,8660:Ce,8661:[.25,.75,0,0,.61111],8704:Ii,8706:[0,.69444,.05556,.08334,.5309],8707:Ii,8709:dl,8711:Sd,8712:Ld,8715:Ld,8722:et,8723:et,8725:Gt,8726:Gt,8727:ua,8728:ml,8729:ml,8730:[.2,.8,0,0,.83334],8733:Ad,8734:Gs,8736:Dn,8739:la,8741:Gt,8743:Zr,8744:Zr,8745:Zr,8746:Zr,8747:[.19444,.69444,.11111,0,.41667],8764:jo,8768:[.19444,.69444,0,0,.27778],8771:ca,8773:[-.022,.589,0,0,1],8776:Cd,8781:ca,8784:[-.133,.67,0,0,.778],8801:ca,8804:Ie,8805:Ie,8810:Ed,8811:Ed,8826:dr,8827:dr,8834:dr,8835:dr,8838:Ie,8839:Ie,8846:Zr,8849:Ie,8850:Ie,8851:Zr,8852:Zr,8853:et,8854:et,8855:et,8856:et,8857:et,8866:br,8867:br,8868:Gr,8869:Gr,8872:[.249,.75,0,0,.867],8900:ml,8901:[-.05555,.44445,0,0,.27778],8902:ua,8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:da,8969:da,8970:da,8971:da,8994:Td,8995:Td,9136:ma,9137:ma,9651:Dd,9657:ua,9661:Dd,9667:ua,9711:Nn,9824:pa,9825:pa,9826:pa,9827:pa,9837:[0,.75,0,0,.38889],9838:Kd,9839:Kd,10216:zi,10217:zi,10222:ma,10223:ma,10229:[.011,.511,0,0,1.609],10230:Od,10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:Od,10815:Xr,10927:Ie,10928:Ie,57376:Bd},"Math-BoldItalic":{32:j,48:ha,49:ha,50:ha,51:$n,52:$n,53:$n,54:Ye,55:$n,56:Ye,57:$n,65:Qs,66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:Id,73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:Rd,77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:Pd,105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:$d,112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:j,915:[0,.68611,.15972,0,.65694],916:rl,920:[0,.68611,.03194,0,.86722],923:zd,926:[0,.68611,.07458,0,.84125],928:Id,931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:Nd,936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:$d,960:[0,.44444,.03704,0,.68241],961:Fd,962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:Fd,1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:j,48:zn,49:zn,50:zn,51:Fn,52:Fn,53:Fn,54:Qe,55:Fn,56:Qe,57:Fn,65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:qd,73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:Vd,80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:Hd,112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:j,915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:Vd,923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:qd,931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:Hd,960:[0,.43056,.03588,0,.57003],961:Wd,962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:Wd,1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:j,33:[0,.69444,0,0,.36667],34:gl,35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:fa,40:Ud,41:Ud,42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:ke,49:ke,50:ke,51:ke,52:ke,53:ke,54:ke,55:ke,56:ke,57:ke,58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:jd,64:Xt,65:Xt,66:Xt,67:pl,68:yr,69:[0,.69444,0,0,.64167],70:br,71:Xt,72:yr,73:[0,.69444,0,0,.33056],74:jd,75:Jd,76:Qd,77:[0,.69444,0,0,.97778],78:yr,79:yr,80:pl,81:[.10556,.69444,0,0,.79445],82:pl,83:br,84:Xt,85:Jd,86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:Xt,89:[0,.69444,.0275,0,.73334],90:e0,91:Gd,93:Gd,94:ke,95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:hl,99:[0,.45833,0,0,.48889],100:hl,101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:hl,105:Xd,106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:Xd,109:[0,.45833,0,0,.86667],110:Yd,111:[0,.45833,0,0,.55],112:Zd,113:Zd,114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:Yd,118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:j,168:ke,176:Xt,180:ke,184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:ke,711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:ke,729:fa,730:Xt,732:ke,733:ke,915:Qd,916:[0,.69444,0,0,.91667],920:fl,923:e0,926:Xt,928:yr,931:yr,933:fl,934:yr,936:fl,937:yr,8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:fa,8217:fa,8220:gl,8221:gl},"SansSerif-Italic":{32:j,33:[0,.69444,.05733,0,.31945],34:o0,35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:xl,40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:c0,45:[0,.44444,.01946,0,.33333],46:u0,47:[.25,.75,.13164,0,.5],48:Et,49:Et,50:Et,51:Et,52:Et,53:Et,54:Et,55:Et,56:Et,57:Et,58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:Zt,66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:bl,73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:_l,77:[0,.69444,.08094,0,.875],78:bl,79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:t0,95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:j,168:[0,.67937,.06385,0,.5],176:r0,184:yl,305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:t0,711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:i0,715:xe,728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:r0,732:[0,.67659,.08826,0,.5],733:i0,915:[0,.69444,.13372,0,.54167],916:b0,920:[0,.69444,.07555,0,.77778],923:br,926:[0,.69444,.12816,0,.66667],928:bl,931:[0,.69444,.11983,0,.72222],933:n0,934:[0,.69444,.04603,0,.72222],936:n0,937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:xl,8217:xl,8220:[0,.69444,.14205,0,.5],8221:o0},"SansSerif-Regular":{32:j,33:[0,.69444,0,0,.31945],34:xe,35:a0,36:dl,37:s0,38:[0,.69444,0,0,.75834],39:Jt,40:zi,41:zi,42:l0,43:et,44:c0,45:[0,.44444,0,0,.33333],46:u0,47:Gt,48:Tt,49:Tt,50:Tt,51:Tt,52:Tt,53:Tt,54:Tt,55:Tt,56:Tt,57:Tt,58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:vl,64:Zt,65:Zt,66:Zt,67:jr,68:[0,.69444,0,0,.72223],69:d0,70:[0,.69444,0,0,.56945],71:Zt,72:Ml,73:Jt,74:vl,75:[0,.69444,0,0,.69445],76:_l,77:[0,.69444,0,0,.875],78:Ml,79:[0,.69444,0,0,.73611],80:jr,81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:Ii,84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:Zt,89:[0,.69444,.025,0,.66667],90:br,91:m0,93:m0,94:xe,95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:wl,99:p0,100:wl,101:p0,102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:wl,105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:g0,111:[0,.44444,0,0,.5],112:h0,113:h0,114:[0,.44444,.01389,0,.34167],115:f0,116:[0,.57143,0,0,.36111],117:g0,118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:j,168:[0,.67937,0,0,.5],176:Zt,184:yl,305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:xe,711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:xe,715:xe,728:xe,729:[0,.67937,0,0,.27778],730:Zt,732:[0,.67659,0,0,.5],733:xe,915:_l,916:b0,920:Gr,923:br,926:Zt,928:Ml,931:In,933:Gr,934:In,936:Gr,937:In,8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:Jt,8217:Jt,8220:xe,8221:xe},"Script-Regular":{32:j,65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:j},"Size1-Regular":{32:j,40:y0,41:y0,47:x0,91:v0,92:x0,93:v0,123:_0,125:_0,160:j,710:ga,732:ga,770:ga,771:ga,8214:[-99e-5,.601,0,0,.77778],8593:M0,8595:M0,8657:w0,8659:w0,8719:k0,8720:k0,8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:L0,8748:S0,8749:S0,8750:L0,8896:Ni,8897:Ni,8898:Ni,8899:Ni,8968:$i,8969:$i,8970:$i,8971:$i,9168:Ll,10216:$i,10217:$i,10752:kl,10753:kl,10754:kl,10756:Ni,10758:Ni},"Size2-Regular":{32:j,40:A0,41:A0,47:C0,91:E0,92:C0,93:E0,123:T0,125:T0,160:j,710:ba,732:ba,770:ba,771:ba,8719:D0,8720:D0,8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:O0,8748:K0,8749:K0,8750:O0,8896:Fi,8897:Fi,8898:Fi,8899:Fi,8968:ya,8969:ya,8970:ya,8971:ya,10216:B0,10217:B0,10752:Sl,10753:Sl,10754:Sl,10756:Fi,10758:Fi},"Size3-Regular":{32:j,40:R0,41:R0,47:P0,91:z0,92:P0,93:z0,123:xa,125:xa,160:j,710:va,732:va,770:va,771:va,8730:[.95003,1.45,0,0,1],8968:_a,8969:_a,8970:_a,8971:_a,10216:xa,10217:xa},"Size4-Regular":{32:j,40:I0,41:I0,47:N0,91:$0,92:N0,93:$0,123:Ma,125:Ma,160:j,710:wa,732:wa,770:wa,771:wa,8730:[1.25003,1.75,0,0,1],8968:ka,8969:ka,8970:ka,8971:ka,9115:Sa,9116:F0,9117:Sa,9118:Sa,9119:F0,9120:Sa,9121:La,9122:Ll,9123:La,9124:La,9125:Ll,9126:La,9127:V0,9128:q0,9129:H0,9130:[0,.3,0,0,.88889],9131:V0,9132:q0,9133:H0,9143:[.88502,.915,0,0,1.05556],10216:Ma,10217:Ma,57344:W0,57345:W0,57680:Aa,57681:Aa,57682:Aa,57683:Aa},"Typewriter-Regular":{32:J0,33:T,34:T,35:T,36:lt,37:lt,38:T,39:T,40:lt,41:lt,42:[0,.52083,0,0,.525],43:U0,44:[.13889,.125,0,0,.525],45:U0,46:[0,.125,0,0,.525],47:lt,48:T,49:T,50:T,51:T,52:T,53:T,54:T,55:T,56:T,57:T,58:Ke,59:[.13889,.43056,0,0,.525],60:j0,61:[-.19549,.41562,0,0,.525],62:j0,63:T,64:T,65:T,66:T,67:T,68:T,69:T,70:T,71:T,72:T,73:T,74:T,75:T,76:T,77:T,78:T,79:T,80:T,81:[.13889,.61111,0,0,.525],82:T,83:T,84:T,85:T,86:T,87:T,88:T,89:T,90:T,91:lt,92:lt,93:lt,94:T,95:[.09514,0,0,0,.525],96:T,97:Ke,98:T,99:Ke,100:T,101:Ke,102:T,103:Vn,104:T,105:T,106:[.22222,.61111,0,0,.525],107:T,108:T,109:Ke,110:Ke,111:Ke,112:Vn,113:Vn,114:Ke,115:Ke,116:[0,.55358,0,0,.525],117:Ke,118:Ke,119:Ke,120:Ke,121:Vn,122:Ke,123:lt,124:lt,125:lt,126:T,127:T,160:J0,176:T,184:[.19445,0,0,0,.525],305:Ke,567:Vn,711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:T,715:T,728:T,730:T,770:T,771:T,776:T,915:T,916:T,920:T,923:T,926:T,928:T,931:T,933:T,934:T,936:T,937:T,8216:T,8217:T,8242:T,9251:[.11111,.21944,0,0,.525]}},Nh=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,Dt=10,Oe=.25,Z0=1.2,tt=.431,Al={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[tt,tt,tt],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.5,.732,.925],num2:[.394,.384,.5],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[Oe,Oe,Oe],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},qn=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Vi=5,X0={"":" ","":" ",:"A",:"C",:"D",:"o",:"a",:"c",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function xr(t,e){t===void 0&&(t=77);let a=G0[e][t];if(a)return{defaultMetrics:!1,depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]};if(t===11034)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0,width:.8};let s=String.fromCodePoint(t);if(s in X0)t=X0[s].codePointAt(0);else if(Nh.test(s))return t=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0,width:1};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0,width:.8}}var Cl={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],longrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],longleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],longleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],longrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],longleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],longleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],longRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716],longLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},El={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},Y0={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:`m 529 160
  c -179 0 -524 -115 -524 -115
  c -5 -1 -9 -5 -9 -10
  c 0 -1 1 -2 1 -3
  l 4 -22
  c 1 -5 5 -9 11 -9
  h 2
  s 338 93 512 92
  c 174 0 513 -92 513 -92
  h 2
  c 5 0 9 4 11 9
  l 5 22
  c 1 6 -2 12 -8 13
  c 0 0 -342 115 -520 115
  z
  `,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,widetilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,widetilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,widetilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,widetilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`};function Q0(t){if(El[t]){let[m,g,A]=El[t],P=`<span class="ML__stretchy" style="height:${A}em"><svg width="100%" height="${A}em" viewBox="0 0 ${m} ${g}" preserveAspectRatio="none" ><path fill="currentcolor" d="${Y0[t]}"></path></svg></span>`;return`<span style="display:inline-block;height:${Math.floor(100*A/2)/100}em;min-width:0">${P}</span>`}let[e,a,s,o]=Cl[t],l,u,c=s/1e3;e.length===3?(l=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],u=["xMinYMin","xMidYMin","xMaxYMin"]):e.length===2?(l=["slice-1-of-2","slice-2-of-2"],u=["xMinYMin","xMaxYMin"]):(l=["slice-1-of-1"],u=[o]);let d=e.map((m,g)=>`<span class="${l[g]}" style=height:${c}em><svg width=400em height=${c}em viewBox="0 0 400000 ${s}" preserveAspectRatio="${u[g]} slice"><path fill="currentcolor" d="${Y0[m]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${c}em;min-width:${a}em;">${d}</span>`}function em(t){return Cl[t]?Cl[t][2]/1e3:El[t][2]}function $h(t){let e=[];for(let a=0;a<t.length;a++){let s=t.charCodeAt(a);if(s===13&&t.charCodeAt(a+1)===10&&(s=10,a++),(s===13||s===12)&&(s=10),s===0&&(s=65533),s>=55296&&s<=56319){let o=t.charCodeAt(a+1);if(o>=56320&&o<=57343){let l=s-55296,u=o-56320;s=2**16+l*2**10+u,a++}}e.push(s)}return e}var Ea=8205,Fh=[[Ea,1],[65038,2],[127995,5],[129456,4],[917536,96]],Ca,tm=[127462,127487];function rm(t){var e;if(Ca===void 0){Ca={};for(let a of Fh)for(let s=a[0];s<=a[0]+a[1]-1;s++)Ca[s]=!0}return(e=Ca[t])!=null?e:!1}function Vh(t){return t>=tm[0]&&t<=tm[1]}function Ta(t){if(/^[\u0020-\u00FF]*$/.test(t))return t;let e=[],a=$h(t),s=0;for(;s<a.length;){let o=a[s++],l=a[s];if(l===Ea){let u=s-1;for(s+=2;a[s]===Ea;)s+=2;e.push(String.fromCodePoint(...a.slice(u,s-u+1)))}else if(rm(l)){let u=s-1;for(;rm(a[s]);)s+=a[s]===Ea?2:1;e.push(String.fromCodePoint(...a.slice(u,2*s-u-1)))}else Vh(o)?(s+=1,e.push(String.fromCodePoint(...a.slice(s-2,2)))):e.push(String.fromCodePoint(o))}return e}var Tl=class{constructor(t){this.obeyspaces=!1,this.pos=0,this.s=Ta(t)}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(t){let e=typeof this.s=="string"?t.exec(this.s.slice(this.pos)):t.exec(this.s.slice(this.pos).join(""));return e!=null&&e[0]?(this.pos+=e[0].length,e[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let t=this.get();if(t==="\\"){if(!this.end()){let e=this.match(/^[a-zA-Z\*]+/);return e?this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/):e=this.get(),"\\"+e}}else{if(t==="{")return"<{>";if(t==="}")return"<}>";if(t==="^"){if(this.peek()==="^"){this.get();let e=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(e)return String.fromCodePoint(Number.parseInt(e.slice(e.lastIndexOf("^")+1),16))}return t}else if(t==="#"){if(!this.end()){let e=!1;if(/[\d?@]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){let a=this.s[this.pos+1];e=/[^\dA-Za-z]/.test(a)}return e?"#"+this.get():"#"}}else if(t==="$")return this.peek()==="$"?(this.get(),"<$$>"):"<$>"}return t}};function qh(t,e){var a,s,o,l;let u=[],c=t.next();if(c&&c!=="\\relax"){if(c==="\\noexpand")c=t.next(),c&&u.push(c);else if(c==="\\obeyspaces")t.obeyspaces=!0;else if(c==="\\bgroup")u.push("<{>");else if(c==="\\egroup")u.push("<}>");else if(c==="\\string"){if(c=t.next(),c)if(c.startsWith("\\"))for(let d of c)u.push(d==="\\"?"\\backslash":d);else c==="<{>"?u.push("\\{"):c==="<space>"?u.push("~"):c==="<}>"&&u.push("\\}")}else if(c==="\\csname"){for(;t.peek()==="<space>";)t.next();let d="",m=!1,g=[];do{if(g.length===0)if(/^#[\d?@]$/.test(t.peek())){let A=t.get().slice(1);g=qi((s=(a=e?.(A))!=null?a:e?.("?"))!=null?s:"\\placeholder{}",e),c=g[0]}else c=t.next(),g=c?[c]:[];m=g.length===0,!m&&c==="\\endcsname"&&(m=!0,g.shift()),m||(m=c==="<$>"||c==="<$$>"||c==="<{>"||c==="<}>"||typeof c=="string"&&c.length>1&&c.startsWith("\\")),m||(d+=g.shift())}while(!m);d&&u.push("\\"+d),u.push(...g)}else if(c!=="\\endcsname")if(c.length>1&&c.startsWith("#")){let d=c.slice(1);u.push(...qi((l=(o=e?.(d))!=null?o:e?.("?"))!=null?l:"\\placeholder{}",e))}else u.push(c)}return u}function qi(t,e=null){if(!t)return[];let a=[],s="";for(let u of t.toString().split(/\r?\n/)){s&&a.push(s),s=" ";let c=u.match(/((?:\\%)|[^%])*/);c!==null&&a.push(c[0])}let o=new Tl(a.join("")),l=[];do l.push(...qh(o,e));while(!o.end());return l}function R(t){let e="",a=[];for(let s of t)s&&(e&&/^[a-zA-Z\*]/.test(s)&&a.push(e),a.push(s),/^\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(s)&&a.push(" "),e=/\\[a-zA-Z]+\*?$/.test(s)?" ":"");return a.join("")}function q(t,...e){return t.startsWith("\\"),e.length===0?t:R([t,...e.map(a=>`{${a}}`)])}function vr(t){return R(t.map(e=>{var a;return(a={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])!=null?a:e}))}var Yr=class Py{constructor(e){Py._registry[e]=this}static createAtom(e,a,s){return Py._registry[e].createAtom(a,se(a,e),s)}static serialize(e,a){var s;if(!e||e.length===0)return"";if((s=a.skipStyles)!=null&&s){let o=[];for(let l of nm(e)){let u=Py._registry[l[0].mode];o.push(...u.serialize(l,a))}return R(o)}return R(Wh(e,a))}static getFont(e,a,s){return Py._registry[e].getFont(a,s)}};Yr._registry={};var ge=Yr;function nm(t){let e=[],a=[],s="NONE";for(let o of t)o.type!=="first"&&(o.mode!==s?(a.length>0&&e.push(a),a=[o],s=o.mode):a.push(o));return a.length>0&&e.push(a),e}function Da(t){if(!t||t.mode!=="math")return"";let{style:e}=t;return!e||!e.variantStyle?"":e.variantStyle==="bold"||e.variantStyle==="bolditalic"?"bold":""}function Ka(t){if(!t)return"";let{style:e}=t;if(!e)return"";let a=e.variant;return a===void 0?"normal":(!["calligraphic","fraktur","double-struck","script","monospace","sans-serif"].includes(a)&&e.variantStyle&&e.variantStyle!=="up"&&(a+="-"+e.variantStyle),a)}function ct(t,e){let a=[],s=[],o;for(let l of t){if(l.type==="first")continue;let u;e==="variant"?u=Ka(l):e==="bold"?u=Da(l):u=l.style[e],u===o?s.push(l):(s.length>0&&a.push(s),s=[l],o=u)}return s.length>0&&a.push(s),a}function im(t,e){var a;let{parent:s}=t[0],o=s?.style.color,l=[];for(let u of nm(t)){let c=e.defaultMode;for(let d of ct(u,"color")){let m=d[0].style,g=ge._registry[d[0].mode].serialize(d,f(p({},e),{defaultMode:c==="text"?"text":"math"}));!e.skipStyles&&m.color&&m.color!=="none"&&(!s||o!==m.color)?l.push(q("\\textcolor",(a=m.verbatimColor)!=null?a:m.color,R(g))):l.push(R(g))}}return l}function Hh(t,e){let{parent:a}=t[0],s=a?.style.backgroundColor;return ct(t,"backgroundColor").map(o=>{var l;if(o.length>0||o[0].type!=="box"){let u=o[0].style;if(u.backgroundColor&&u.backgroundColor!=="none"&&(!a||s!==u.backgroundColor))return q("\\colorbox",(l=u.verbatimBackgroundColor)!=null?l:u.backgroundColor,R(im(o,f(p({},e),{defaultMode:"text"}))))}return R(im(o,e))})}function Wh(t,e){if(t.length===0)return[];let{parent:a}=t[0],s=a?.style.fontSize,o=[];for(let l of ct(t,"fontSize")){let u=l[0].style.fontSize,c=Hh(l,e);c&&(u&&u!=="auto"&&(!a||s!==u)?o.push(["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][u],...c):o.push(...c))}return o}function Oa(t){return t?{mord:"ord",mbin:"bin",mop:"op",mrel:"rel",mopen:"open",mclose:"close",mpunct:"punct",minner:"inner",spacing:"ignore",latex:"latex",composition:"inner",error:"inner",placeholder:"ord",supsub:"ignore"}[t]:void 0}function Qr(t){if(t.length===0)return"ord";let e=Oa(t[0].type),a=Oa(t[t.length-1].type);return e&&e===a?e:"ord"}function Hn(t,e){if(typeof t=="string")return t;if(typeof t=="number"){let a=Math.ceil(100*t)/100;return a===0?"0":a.toString()+(e??"")}return""}var _=class Zx{constructor(e,a){var s,o,l,u,c;if(typeof e=="number"?this.value=String.fromCodePoint(e):typeof e=="string"?this.value=e:Y(e)?this.children=e.filter(m=>m!==null):e&&e instanceof Zx&&(this.children=[e]),this.children)for(let m of this.children)m.parent=this;this.type=(s=a?.type)!=null?s:"ignore",this.isSelected=a?.isSelected===!0,a!=null&&a.caret&&(this.caret=a.caret),this.classes=(o=a?.classes)!=null?o:"",this.isTight=(l=a?.isTight)!=null?l:!1,a!=null&&a.attributes&&(this.attributes=a.attributes);let d=a?.fontFamily;a!=null&&a.style&&this.value&&(d=(c=ge.getFont((u=a.mode)!=null?u:"math",this,f(p({variant:"normal"},a.style),{letterShapeStyle:a.letterShapeStyle})))!=null?c:void 0),d||(d="Main-Regular"),this._height=0,this._depth=0,this._width=0,this.hasExplicitWidth=!1,this.skew=0,this.italic=0,this.maxFontSize=0,this.scale=1,a?.maxFontSize!==void 0&&(this.maxFontSize=a.maxFontSize),Uh(this,d)}set atomID(e){e===void 0||e.length===0||(this.id=e)}selected(e){if(this.isSelected!==e&&(this.isSelected=e,this.children))for(let a of this.children)a.selected(e)}setStyle(e,a,s){if(a===void 0)return;let o=Hn(a,s);o.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[e]=o)}setTop(e){Number.isFinite(e)&&Math.abs(e)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=Hn(e,"em"),this.height-=e,this.depth+=e)}get left(){var e;return(e=this.cssProperties)!=null&&e["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=Hn(e,"em")))}set right(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=Hn(e,"em")))}set bottom(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-bottom"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-bottom"]=Hn(e,"em")))}get width(){return this._width*this.scale}set width(e){this._width=e,this.hasExplicitWidth=!0}set softWidth(e){}get height(){return this._height*this.scale}set height(e){this._height=e}get depth(){return this._depth*this.scale}set depth(e){this._depth=e}wrap(e){let a=e.parent;if(!a)return this;e.isPhantom&&this.setStyle("opacity",0);let s=e.color;s&&s!==a.color&&this.setStyle("color",s);let o=e.backgroundColor;this.isSelected&&(o=Yc(o)),o&&o!==a.backgroundColor&&(this.setStyle("background-color",o),this.setStyle("display","inline-block"));let l=e.scalingFactor;return this.scale=l,this.skew*=l,this.italic*=l,this}toMarkup(){var e,a,s,o;let l=(e=this.value)!=null?e:"";if(this.children)for(let W of this.children)l+=W.toMarkup();let u="";if(this.svgBody)u=Q0(this.svgBody);else if(this.svgOverlay){u='<span style="',u+="display: inline-block;",u+=`height:${Math.floor(100*(this.height+this.depth))/100}em;`,u+=`vertical-align:${Math.floor(100*this.depth)/100}em;`,u+='">',u+=l,u+="</span>",u+='<svg style="position:absolute;overflow:visible;',u+=`height:${Math.floor(100*(this.height+this.depth))/100}em;`;let W=(a=this.cssProperties)==null?void 0:a.padding;W?(u+=`top:${W};`,u+=`left:${W};`,u+=`width:calc(100% - 2 * ${W} );`):u+="top:0;left:0;width:100%;",u+="z-index:2;",u+='"',this.svgStyle&&(u+=this.svgStyle),u+=` viewBox="0 0 ${Math.floor(100*this.width)/100} ${Math.floor(100*(this.height+this.depth))/100}"`,u+=`>${this.svgOverlay}</svg>`}let c=[],d=this.classes.split(" ");d.push((s={latex:"ML__raw-latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])!=null?s:""),this.caret==="latex"&&d.push("ML__latex-caret"),this.isSelected&&d.push("ML__selected");let m=d.length===1?d[0]:d.filter((W,me,ve)=>W.length>0&&ve.indexOf(W)===me).join(" ");if(m.length>0&&c.push(`class=${Hi(`"${m}"`)}`),this.id&&c.push(` data-atom-id=${Hi(this.id)}`),this.cssId&&c.push(` id=${Hi(`"${this.cssId.replace(/ /g,"-")}"`)}`),this.attributes&&c.concat(Object.keys(this.attributes).map(W=>`${Dl(W)}=${Hi(this.attributes[W])}`)),this.htmlData){let W=this.htmlData.split(",");for(let me of W){let ve=me.match(/([^=]+)=(.+$)/);if(ve){let He=Dl(ve[1]);if(He)if(He==="href"){let De=new URL(ve[2]);if(De.protocol!=="http:"&&De.protocol!=="https:")throw new Error(`Invalid URL: ${ve[2]}`);c.push(`href="${ve[2].replace(/"/g,"&quot;")}"`)}else c.push(`data-${He}=${Hi(ve[2])}`)}else{let He=Dl(me);He&&c.push(`data-${He} `)}}}let g=(o=this.cssProperties)!=null?o:{};this.hasExplicitWidth&&g.width===void 0&&(g.width=`${Math.ceil(this._width*100)/100}em`);let A=Object.keys(g).map(W=>`${W}:${g[W]}`);if(this.scale!==void 0&&this.scale!==1&&(l.length>0||u.length>0)&&A.push(`font-size: ${Math.ceil(this.scale*1e4)/100}%`),this.htmlStyle)for(let W of this.htmlStyle.split(";")){let me=W.match(/([^:]+):(.+$)/);if(me){let ve=me[1].trim().replace(/ /g,"-");ve&&A.push(`${ve}:${me[2]}`)}}A.length>0&&c.push(`style=${Hi(A.join(";"))}`);let P="";return c.length>0||u.length>0?P=`<span ${c.join(" ")}>${l}${u}</span>`:P=l,this.caret==="text"?P+='<span class="ML__text-caret"></span>':this.caret==="math"&&(P+='<span class="ML__caret"></span>'),P}tryCoalesceWith(e){if(this.svgBody||!this.value||e.svgBody||!e.value)return!1;let a=this.children&&this.children.length>0,s=e.children&&e.children.length>0;if(a||s)return!1;if(e.cssProperties||this.cssProperties){for(let d of["border","border-left","border-right","border-right-width","left","margin","margin-left","margin-right","padding","position","width"])if(e.cssProperties&&d in e.cssProperties||this.cssProperties&&d in this.cssProperties)return!1}let o=this.cssProperties?Object.keys(this.cssProperties).length:0,l=e.cssProperties?Object.keys(e.cssProperties).length:0;if(o!==l)return!1;if(o>0){for(let d of Object.keys(this.cssProperties))if(this.cssProperties[d]!==e.cssProperties[d])return!1}let u=this.classes.trim().replace(/\s+/g," ").split(" "),c=e.classes.trim().replace(/\s+/g," ").split(" ");if(u.length!==c.length)return!1;u.sort(),c.sort();for(let[d,m]of u.entries())if(m==="ML__vertical-separator"||m!==c[d])return!1;return this.value+=e.value,this.height=Math.max(this.height,e.height),this.depth=Math.max(this.depth,e.depth),this._width=this._width+e._width,this.maxFontSize=Math.max(this.maxFontSize,e.maxFontSize),this.italic=e.italic,!0}};function Kl(t){if(!t||t.length===0)return[];t[0].children=Kl(t[0].children);let e=[t[0]];for(let a=1;a<t.length;a++)e[e.length-1].tryCoalesceWith(t[a])||(t[a].children=Kl(t[a].children),e.push(t[a]));return e}function _r(t){return t.children&&(t.children=Kl(t.children)),t}function Mr(t,e){if(!t)return new _(null,e);let a=new _(null,{classes:"ML__strut",type:"ignore"});a.setStyle("height",Math.max(0,t.height),"em");let s=[a];if(t.depth!==0){let o=new _(null,{classes:"ML__strut--bottom",type:"ignore"});o.setStyle("height",t.height+t.depth,"em"),o.setStyle("vertical-align",-t.depth,"em"),s.push(o)}return s.push(t),new _(s,f(p({},e),{type:"lift"}))}function Wi(t){let e=em(t)/2,a=new _(null,{maxFontSize:0});return a.height=e+.166,a.depth=e-.166,a.svgBody=t,a}function Uh(t,e){var a;if(t.type==="latex"){t.height=.9,t.depth=.2,t._width=1;return}if(t.value){t.height=-1/0,t.depth=-1/0,t._width=0,t.skew=-1/0,t.italic=-1/0;for(let s=0;s<t.value.length;s++){let o=xr(t.value.codePointAt(s),e);t.height=Math.max(t.height,o.height),t.depth=Math.max(t.depth,o.depth),t._width+=o.width,t.skew=o.skew,t.italic=o.italic}return}if(t.children&&t.children.length>0){let s=-1/0,o=-1/0,l=0;for(let u of t.children)u.height>s&&(s=u.height),u.depth>o&&(o=u.depth),l=Math.max(l,(a=u.maxFontSize)!=null?a:0);t.height=s,t.depth=o,t._width=t.children.reduce((u,c)=>u+c.width,0),t.maxFontSize=l}}function Dl(t){if(t=t.trim().replace(/ /g,"-"),t.length===0)throw new Error("Invalid empty attribute name");if(/[\x20\x09\x0a\x0c\x0d"'>/=\x00-\x1f]/.test(t))throw new Error(`Invalid attribute name "${t}"`);return t}function Hi(t){if(t=t.trim(),t.startsWith('"')&&t.endsWith('"')){if(/"/.test(t.slice(1,-1)))throw new Error(`Invalid attribute value: ${t}`);return t}if(t.startsWith("'")&&t.endsWith("'")){if(/'/.test(t.slice(1,-1)))throw new Error(`Invalid attribute value: ${t}`);return t}if(t.length===0)throw new Error("Invalid empty attribute value");return`"${t.replace(/"/g,"&quot;")}"`}function jh(t){if("individualShift"in t){let e=t.individualShift,a=e[0];if(a==null)return[null,0];let s=[a],o=-a.shift-a.box.depth,l=o;for(let u=1;u<e.length;u++){let c=e[u],d=-c.shift-l-c.box.depth,m=d-(a.box.height+a.box.depth);l=l+d,s.push(m),s.push(c),a=c}return[s,o]}if("top"in t){let e=t.top;for(let a of t.children)e-=typeof a=="number"?a:a.box.height+a.box.depth;return[t.children,e]}else{if("bottom"in t)return[t.children,-t.bottom];if("firstBaseline"in t){let e=t.firstBaseline[0];if(typeof e=="number")throw new Error("First child must be an element.");return[t.firstBaseline,-e.box.depth]}else if("shift"in t){let e=t.children[0];if(typeof e=="number")throw new Error("First child must be an element.");return[t.children,-e.box.depth-t.shift]}}return[null,0]}function Jh(t){var e;let[a,s]=jh(t);if(!a)return[[],0,0];let o=new _(null,{classes:"ML__pstrut"}),l=0;for(let me of a)if(typeof me!="number"){let ve=me.box;l=Math.max(l,ve.maxFontSize,ve.height)}l+=2,o.height=l,o.setStyle("height",l,"em");let u=[],c=s,d=s,m=s,g=0;for(let me of a){if(typeof me=="number")m+=me;else{let ve=me.box,He=(e=me.classes)!=null?e:[],De=new _([o,ve],{classes:He.join(" "),style:me.style});ve.setStyle("height",ve.height+ve.depth,"em"),ve.setStyle("display","inline-block"),De.setStyle("top",-l-m-ve.depth,"em"),me.marginLeft&&De.setStyle("margin-left",me.marginLeft,"em"),me.marginRight&&De.setStyle("margin-right",me.marginRight,"em"),u.push(De),m+=ve.height+ve.depth,g=Math.max(g,De.width)}c=Math.min(c,m),d=Math.max(d,m)}u.forEach(me=>{me.softWidth=g});let A=new _(u,{classes:"ML__vlist"});if(A.softWidth=g,A.height=d,A.setStyle("height",d,"em"),c>=0)return[[new _(A,{classes:"ML__vlist-r"})],d,-c];let P=new _(new _(null),{classes:"ML__vlist"});P.height=-c,P.setStyle("height",-c,"em");let W=new _(8203,{classes:"ML__vlist-s",maxFontSize:0});return W.softWidth=0,W.height=0,W.depth=0,[[new _([A,W],{classes:"ML__vlist-r"}),new _(P,{classes:"ML__vlist-r"})],d,-c]}var Q=class extends _{constructor(t,e){var a;let[s,o,l]=Jh(t);super(s.length===1?s[0]:s,{type:e?.type,classes:((a=e?.classes)!=null?a:"")+" ML__vlist-t"+(s.length===2?" ML__vlist-t2":"")}),this.height=o,this.depth=l,this.softWidth=s.reduce((u,c)=>Math.max(u,c.width),0)}};function om(t,e){var a,s,o,l,u;let c=t.metrics,d=new _(e.base),m=(a=e.baseShift)!=null?a:0,g=(s=e.slant)!=null?s:0,A=0,P=0;e.above&&(A=(o=e.aboveShift)!=null?o:Math.max(c.bigOpSpacing1,c.bigOpSpacing3-e.above.depth)),e.below&&(P=(l=e.belowShift)!=null?l:Math.max(c.bigOpSpacing2,c.bigOpSpacing4-e.below.height));let W=null;if(e.below&&e.above){let me=c.bigOpSpacing5+e.below.height+e.below.depth+P+d.depth+m;W=new Q({bottom:me,children:[c.bigOpSpacing5,{box:e.below,marginLeft:-g,classes:["ML__center"]},P,{box:d,classes:["ML__center"]},A,{box:e.above,marginLeft:g,classes:["ML__center"]},c.bigOpSpacing5]}).wrap(t)}else if(e.below&&!e.above)W=new Q({top:d.height-m,children:[c.bigOpSpacing5,{box:e.below,marginLeft:-g,classes:["ML__center"]},P,{box:d,classes:["ML__center"]}]}).wrap(t);else if(!e.below&&e.above){let me=d.depth+m;W=new Q({bottom:me,children:[{box:d,classes:["ML__center"]},A,{box:e.above,marginLeft:g,classes:["ML__center"]},c.bigOpSpacing5]}).wrap(t)}else{let me=d.depth+m;W=new Q({bottom:me,children:[{box:d},c.bigOpSpacing5]}).wrap(t)}return new _(W,{type:(u=e.type)!=null?u:"op"})}var Ba=7,Un=6,jn=5,wr=4,ei=3,Ne=2,kr=1,Se=0,Kt=class{constructor(t,e,a){this.id=t,this.sizeDelta=e,this.cramped=a;let s={"-4":2,"-3":1,0:0}[e];this.metrics=Object.keys(Al).reduce((o,l)=>f(p({},o),{[l]:Al[l][s]}),{})}getFontSize(t){return Math.max(1,t+this.sizeDelta)}get sup(){return ut[[Se,kr,Se,kr,Ne,ei,Ne,ei][this.id]]}get sub(){return ut[[Se,Se,Se,Se,Ne,Ne,Ne,Ne][this.id]]}get fracNum(){return ut[[Se,kr,Se,kr,Ne,ei,wr,jn][this.id]]}get fracDen(){return ut[[Se,Se,Se,Se,Ne,Ne,wr,wr][this.id]]}get cramp(){return ut[[Se,Se,Ne,Ne,wr,wr,Un,Un][this.id]]}get isTight(){return this.sizeDelta<0}},Wn={7:new Kt(Ba,0,!1),6:new Kt(Un,0,!0),5:new Kt(jn,0,!1),4:new Kt(wr,0,!0),3:new Kt(ei,-3,!1),2:new Kt(Ne,-3,!0),1:new Kt(kr,-4,!1),0:new Kt(Se,-4,!0)},ut=f(p({},Wn),{displaystyle:Wn[Ba],textstyle:Wn[jn],scriptstyle:Wn[ei],scriptscriptstyle:Wn[kr]});function Bl(t,e){var a;if(!t)return 0;let s={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:Dt,bp:803/800,dd:1238/1157,pc:12,in:72.27,mu:10/18}[(a=t.unit)!=null?a:"pt"];if(Number.isFinite(e)){let o=10**e;return Math.round(t.dimension/Dt*s*o)/o}return t.dimension*s}function Ra(t,e){if(t===null)return 0;let a=Bl(t)/Dt;if(Number.isFinite(e)){let s=10**e;return Math.round(a*s)/s}return a}function Ol(t){var e;return`${t.dimension}${(e=t.unit)!=null?e:"pt"}`}function Gh(t){let e=Ol(t.glue);return t.grow&&t.grow.dimension!==0&&(e+=` plus ${Ol(t.grow)}`),t.shrink&&t.shrink.dimension!==0&&(e+=` minus ${Ol(t.shrink)}`),e}function be(t){var e,a;if(t==null)return null;let s="";if("dimension"in t&&(s=`${t.dimension}${(e=t.unit)!=null?e:"pt"}`),"glue"in t&&(s=Gh(t)),"number"in t)if(!("base"in t)||t.base==="decimal")s=Number(t.number).toString();else if(t.base==="alpha")s=`\`${String.fromCodePoint(t.number)}`;else{let o=Math.round(t.number)>>>0;t.base==="hexadecimal"?(s=Number(o).toString(16).toUpperCase(),o<=255?s=s.padStart(2,"0"):o<=65535?s=s.padStart(4,"0"):o<=16777215?s=s.padStart(6,"0"):s=s.padStart(8,"0"),s=`"${s}`):t.base==="octal"&&(s=Number(o).toString(8),o<=63?s=s.padStart(2,"0"):o<=30583?s=s.padStart(4,"0"):s=s.padStart(8,"0"),s=`'${s}`)}return"register"in t&&("factor"in t&&(t.factor===-1?s="-":t.factor!==1&&(s=Number(t.factor).toString())),"global"in t&&t.global&&(s+="\\global"),s+=`\\${t.register}`),"string"in t&&(s=t.string),(a=t.relax)!=null&&a&&(s+="\\relax"),s}function dt(t,e){return t==null?null:"number"in t?f(p({},t),{number:t.number*e}):"register"in t?"factor"in t&&t.factor?f(p({},t),{factor:t.factor*e}):f(p({},t),{factor:e}):"dimension"in t?f(p({},t),{dimension:t.dimension*e}):"glue"in t?t.shrink&&t.grow?{glue:dt(t.glue,e),shrink:dt(t.shrink,e),grow:dt(t.grow,e)}:t.shrink?{glue:dt(t.glue,e),shrink:dt(t.shrink,e)}:t.grow?{glue:dt(t.glue,e),grow:dt(t.grow,e)}:{glue:dt(t.glue,e)}:null}var Xh={"p@":{dimension:1},"z@":{dimension:0},maxdimen:{dimension:16383.99999},hfuzz:{dimension:.1},vfuzz:{dimension:.1},overfullrule:{dimension:5},hsize:{dimension:6.5,unit:"in"},vsize:{dimension:8.9,unit:"in"},parindent:{dimension:20},maxdepth:{dimension:4},splitmaxdepth:{register:"maxdimen"},boxmaxdepth:{register:"maxdimen"},delimitershortfall:{dimension:5},nulldelimiterspace:{dimension:1.2,unit:"pt"},scriptspace:{dimension:.5},topskip:{dimension:10},splittopskip:{dimension:10},normalbaselineskip:{dimension:12},normallineskip:{dimension:1},normallineskiplimit:{dimension:0},jot:{dimension:3},doublerulesep:{dimension:2},arrayrulewidth:{dimension:.4},arraycolsep:{dimension:5},fboxsep:{dimension:3},fboxrule:{dimension:.4},"z@skip":{glue:{dimension:0},shrink:{dimension:0},grow:{dimension:0}},hideskip:{glue:{dimension:-1e3},grow:{dimension:1,unit:"fill"}},"@flushglue":{glue:{dimension:0},grow:{dimension:1,unit:"fill"}},parskip:{glue:{dimension:0},grow:{dimension:1}},abovedisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},abovedisplayshortskip:{glue:{dimension:0},grow:{dimension:3}},belowdisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},belowdisplayshortskip:{glue:{dimension:7},grow:{dimension:3},shrink:{dimension:4}},parfillskip:{glue:{dimension:0},grow:{dimension:1,unit:"fil"}},thinmuskip:{glue:{dimension:3,unit:"mu"}},medmuskip:{glue:{dimension:4,unit:"mu"},grow:{dimension:2,unit:"mu"},shrink:{dimension:4,unit:"mu"}},thickmuskip:{glue:{dimension:5,unit:"mu"},grow:{dimension:5,unit:"mu"}},smallskipamount:{glue:{dimension:3},grow:{dimension:1},shrink:{dimension:1}},medskipamount:{glue:{dimension:6},grow:{dimension:2},shrink:{dimension:3}},bigskipamount:{glue:{dimension:12},grow:{dimension:2},shrink:{dimension:4}},pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:1,month:new Date().getMonth()+1,day:new Date().getDate(),year:new Date().getFullYear()};function Pa(){return p({},Xh)}function Jn(){return{registers:Pa(),smartFence:!1,renderPlaceholder:void 0,placeholderSymbol:"",letterShapeStyle:N.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,colorMap:Hr,backgroundColorMap:Si,getMacro:t=>Ti(t,Ei())}}var O=class Jx{constructor(e,a){var s,o,l,u,c,d,m,g,A,P,W,me,ve,He,De;let Xe;e!=null&&e.parent?(this.parent=e.parent,Xe=e.parent,this.registers={}):(Xe=p(p({},Jn()),(s=e?.from)!=null?s:{}),this.registers=Xe.registers),Xe.atomIdsSettings&&(this.atomIdsSettings=p({},Xe.atomIdsSettings)),this.renderPlaceholder=Xe.renderPlaceholder,this.isPhantom=(u=(l=e?.isPhantom)!=null?l:(o=this.parent)==null?void 0:o.isPhantom)!=null?u:!1,this.letterShapeStyle=Xe.letterShapeStyle,this.minFontScale=Xe.minFontScale,this.maxMatrixCols=Xe.maxMatrixCols,a!=null&&a.color&&a.color!=="none"?this.color=a.color:this.color=(d=(c=this.parent)==null?void 0:c.color)!=null?d:"",a!=null&&a.backgroundColor&&a.backgroundColor!=="none"?this.backgroundColor=a.backgroundColor:this.backgroundColor=(g=(m=this.parent)==null?void 0:m.backgroundColor)!=null?g:"",a!=null&&a.fontSize&&a.fontSize!=="auto"&&a.fontSize!==((A=this.parent)==null?void 0:A.size)?this.size=a.fontSize:this.size=(W=(P=this.parent)==null?void 0:P.size)!=null?W:Vi;let qe=(ve=(me=this.parent)==null?void 0:me.mathstyle)!=null?ve:ut.displaystyle;if(typeof e?.mathstyle=="string"){if(Xe instanceof Jx)switch(e.mathstyle){case"cramp":qe=qe.cramp;break;case"superscript":qe=qe.sup;break;case"subscript":qe=qe.sub;break;case"numerator":qe=qe.fracNum;break;case"denominator":qe=qe.fracDen;break}switch(e.mathstyle){case"textstyle":qe=ut.textstyle;break;case"displaystyle":qe=ut.displaystyle;break;case"scriptstyle":qe=ut.scriptstyle;break;case"scriptscriptstyle":qe=ut.scriptscriptstyle;break}}this.mathstyle=qe,this.smartFence=Xe.smartFence,this.placeholderSymbol=Xe.placeholderSymbol,this.colorMap=(He=Xe.colorMap)!=null?He:Rs=>Rs,this.backgroundColorMap=(De=Xe.backgroundColorMap)!=null?De:Rs=>Rs,this.getMacro=Xe.getMacro,this.parent!==void 0||this.registers}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if(typeof this.atomIdsSettings.seed!="number")return`${Date.now().toString(36).slice(-2)}${Math.floor(Math.random()*1e5).toString(36)}`;let e=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,e}scale(e){return e*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return this.mathstyle.id===Ba||this.mathstyle.id===Un}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get metrics(){return this.mathstyle.metrics}get effectiveFontSize(){return Math.max(qn[Math.max(1,this.size+this.mathstyle.sizeDelta)],this.minFontScale)}getRegister(e){var a;if((a=this.registers)!=null&&a[e])return this.registers[e];if(this.parent)return this.parent.getRegister(e)}getRegisterAsNumber(e){let a=this.getRegister(e);if(typeof a=="number")return a;if(typeof a=="string")return Number(a)}getRegisterAsGlue(e){var a;if((a=this.registers)!=null&&a[e]){let s=this.registers[e];return typeof s=="object"&&"glue"in s?s:typeof s=="object"&&"dimension"in s?{glue:{dimension:s.dimension}}:typeof s=="number"?{glue:{dimension:s}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(e)}getRegisterAsEm(e,a){return Ra(this.getRegisterAsDimension(e),a)}getRegisterAsDimension(e){var a;if((a=this.registers)!=null&&a[e]){let s=this.registers[e];return typeof s=="object"&&"glue"in s?s.glue:typeof s=="object"&&"dimension"in s?s:typeof s=="number"?{dimension:s}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(e)}setRegister(e,a){if(a===void 0){delete this.registers[e];return}this.registers[e]=a}evaluate(e){if(!e||!("register"in e))return e;let a=this;if("global"in e&&e.global)for(;a.parent;)a=a.parent;let s=1;"factor"in e&&e.factor!==1&&e.factor!==void 0&&(s=e.factor);let o=a.getRegister(e.register);if(o===void 0)return;if(typeof o=="string")return{string:Number(o).toString()+o};if(typeof o=="number")return{number:s*o};let l=a.evaluate(o);if(l!==void 0)return"string"in l?{string:Number(o).toString()+l.string}:"number"in l?{number:s*l.number}:"dimension"in l?f(p({},l),{dimension:s*l.dimension}):"glue"in l?f(p({},l),{glue:f(p({},l.glue),{dimension:s*l.glue.dimension}),shrink:l.shrink?f(p({},l.shrink),{dimension:s*l.shrink.dimension}):void 0,grow:l.grow?f(p({},l.grow),{dimension:s*l.grow.dimension}):void 0}):e}toDimension(e){let a=this.evaluate(e);if(a===void 0)return null;if("dimension"in a)return a;if("glue"in a)return a.glue;if("number"in a)return{dimension:a.number};if("string"in a){let s=parseFloat(a.string),o=a.string.match(/(mm|cm|ex|px|em|bp|dd|pc|in|mu)$/);return o?{dimension:s,unit:o[0]}:{dimension:s}}return null}toEm(e,a){if(e===null)return 0;let s=this.toDimension(e);return s===null?0:Bl(s,a)/Dt}toNumber(e){if(e===null)return null;let a=this.evaluate(e);return a===void 0?null:"number"in a?a.number:"dimension"in a?a.dimension:"glue"in a?a.glue.dimension:"string"in a?Number(a.string):null}toColor(e){var a,s;if(e===null)return null;let o=this.evaluate(e);return o===void 0?null:"string"in o?(s=(a=this.colorMap)==null?void 0:a.call(this,o.string))!=null?s:o.string:null}toBackgroundColor(e){var a,s;if(e===null)return null;let o=this.evaluate(e);return o===void 0?null:"string"in o?(s=(a=this.backgroundColorMap)==null?void 0:a.call(this,o.string))!=null?s:o.string:null}},Lr=["body","above","below","superscript","subscript"];function Sr(t){return typeof t=="string"&&Lr.includes(t)}function We(t){return t!==void 0&&Array.isArray(t)&&t.length===2}var b=class S5{constructor(e){this.isRoot=!1;var a,s,o,l,u,c,d;this.type=e.type,typeof e.value=="string"&&(this.value=e.value),this.command=(s=(a=e.command)!=null?a:this.value)!=null?s:"",this.mode=(o=e.mode)!=null?o:"math",e.isFunction&&(this.isFunction=!0),(e.isRoot||this.type==="root")&&(this.isRoot=!0),e.limits&&(this.subsupPlacement=e.limits),this.style=p({},(l=e.style)!=null?l:{}),this.displayContainsHighlight=(u=e.displayContainsHighlight)!=null?u:!1,this.captureSelection=(c=e.captureSelection)!=null?c:!1,this.skipBoundary=(d=e.skipBoundary)!=null?d:!1,e.verbatimLatex!==void 0&&e.verbatimLatex!==null&&(this.verbatimLatex=e.verbatimLatex),e.args&&(this.args=e.args),e.body&&(this.body=e.body),this._changeCounter=0}static createBox(e,a,s){var o;if(!a)return null;let l=Zh(a),u=[];for(let d of l){let m=d[0].style,g=Yh(e,d,{style:{color:m.color,backgroundColor:m.backgroundColor,fontSize:m.fontSize}});g&&u.push(g)}if(u.length===0)return null;let c=((o=s?.classes)!=null?o:"").trim();return u.length===1&&!c&&!(s!=null&&s.type)?u[0].wrap(e):new _(u,{classes:c,type:s?.type}).wrap(e)}static serialize(e,a){return ge.serialize(e,a)}static commonAncestor(e,a){if(e===a||e.parent===a.parent)return e.parent;let s=new WeakSet,{parent:o}=e;for(;o;)s.add(o),o=o.parent;for(o=a.parent;o;){if(s.has(o))return o;o=o.parent}}static fromJson(e){return typeof e=="string"?new S5({type:"mord",value:e,mode:"math"}):new S5(e)}toJson(){if(this._json)return this._json;let e={};if(this.type&&(e.type=this.type),this.mode!=="math"&&(e.mode=this.mode),this.command&&this.command!==this.value&&(e.command=this.command),this.value!==void 0&&(e.value=this.value),this.style&&Object.keys(this.style).length>0&&(e.style=p({},this.style)),this.verbatimLatex!==void 0&&(e.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(e.explicitSubsupPlacement=!0),this.isFunction&&(e.isFunction=!0),this.displayContainsHighlight&&(e.displayContainsHighlight=!0),this.skipBoundary&&(e.skipBoundary=!0),this.captureSelection&&(e.captureSelection=!0),this.args&&(e.args=Qh(this.args)),this._branches)for(let a of Object.keys(this._branches))this._branches[a]&&(e[a]=this._branches[a].filter(s=>s.type!=="first").map(s=>s.toJson()));return e.type==="mord"&&Object.keys(e).length===2&&"value"in e?e.value:(this._json=e,e)}get changeCounter(){return this.parent?this.parent.changeCounter:this._changeCounter}set isDirty(e){e&&(this._json=void 0,this.parent||this._changeCounter++,"verbatimLatex"in this&&(this.verbatimLatex=void 0),this._children=void 0,this.parent&&(this.parent.isDirty=!0))}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let a=se(this.command,this.mode);return a!=null&&a.serialize?a.serialize(this,e):this.body&&this.command?R([q(this.command,this.bodyToLatex(e)),this.supsubToLatex(e)]):this.body?R([this.bodyToLatex(e),this.supsubToLatex(e)]):!this.value||this.value===""?"":this.command}bodyToLatex(e){var a;let s=(a=e.defaultMode)!=null?a:this.mode==="math"?"math":"text";return ge.serialize(this.body,f(p({},e),{defaultMode:s}))}aboveToLatex(e){return ge.serialize(this.above,e)}belowToLatex(e){return ge.serialize(this.below,e)}supsubToLatex(e){let a="";if(e=f(p({},e),{defaultMode:"math"}),this.branch("subscript")!==void 0){let s=ge.serialize(this.subscript,e);s.length===0?a+="_{}":s.length===1?/^[0-9]$/.test(s)?a+=`_${s}`:a+=`_{${s}}`:a+=`_{${s}}`}if(this.branch("superscript")!==void 0){let s=ge.serialize(this.superscript,e);s.length===0?a+="^{}":s.length===1?s===""?a+="^\\prime ":s===""?a+="^\\doubleprime ":/^[0-9]$/.test(s)?a+=`^${s}`:a+=`^{${s}}`:a+=`^{${s}}`}return a}get treeDepth(){let e=1,a=this.parent;for(;a;)a=a.parent,e+=1;return e}get inCaptureSelection(){let e=this;for(;e;){if(e.captureSelection)return!0;e=e.parent}return!1}get parentPrompt(){let e=this.parent;for(;e;){if(e.type==="prompt"&&!e.captureSelection)return e;e=e.parent}return null}branch(e){if(Sr(e)&&this._branches)return this._branches[e]}get branches(){if(!this._branches)return[];let e=[];for(let a of Lr)this._branches[a]&&e.push(a);return e}createBranch(e){return Sr(e),Sr(e)?(this._branches?this._branches[e]||(this._branches[e]=[this.makeFirstAtom(e)]):this._branches={[e]:[this.makeFirstAtom(e)]},this.isDirty=!0,this._branches[e]):[]}get row(){return We(this.parentBranch)?this.parentBranch[0]:-1}get col(){return We(this.parentBranch)?this.parentBranch[1]:-1}get body(){var e;return(e=this._branches)==null?void 0:e.body}set body(e){this.setChildren(e,"body")}get superscript(){var e;return(e=this._branches)==null?void 0:e.superscript}set superscript(e){this.setChildren(e,"superscript")}get subscript(){var e;return(e=this._branches)==null?void 0:e.subscript}set subscript(e){this.setChildren(e,"subscript")}get above(){var e;return(e=this._branches)==null?void 0:e.above}set above(e){this.setChildren(e,"above")}get below(){var e;return(e=this._branches)==null?void 0:e.below}set below(e){this.setChildren(e,"below")}applyStyle(e,a){this.isDirty=!0,a!=null&&a.unstyledOnly?(e.color&&!this.style.color&&(this.style.color=e.color),e.backgroundColor&&!this.style.backgroundColor&&(this.style.backgroundColor=e.backgroundColor),e.fontFamily&&!this.style.fontFamily&&(this.style.fontFamily=e.fontFamily),e.fontShape&&!this.style.fontShape&&(this.style.fontShape=e.fontShape),e.fontSeries&&!this.style.fontSeries&&(this.style.fontSeries=e.fontSeries),e.fontSize&&!this.style.fontSize&&(this.style.fontSize=e.fontSize),e.variant&&!this.style.variant&&(this.style.variant=e.variant),e.variantStyle&&!this.style.variantStyle&&(this.style.variantStyle=e.variantStyle)):this.style=p(p({},this.style),e),this.style.fontFamily==="none"&&delete this.style.fontFamily,this.style.fontShape==="auto"&&delete this.style.fontShape,this.style.fontSeries==="auto"&&delete this.style.fontSeries,this.style.color==="none"&&(delete this.style.color,delete this.style.verbatimColor),this.style.backgroundColor==="none"&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),this.style.fontSize==="auto"&&delete this.style.fontSize;for(let s of this.children)s.applyStyle(e,a)}getInitialBaseElement(){var e,a,s;return this.hasEmptyBranch("body")?this:((e=this.body)==null||e[0].type,(s=(a=this.body[1])==null?void 0:a.getInitialBaseElement())!=null?s:this)}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){return this.type==="leftright"||this.type==="genfrac"||this.type==="subsup"||this.type==="delim"||this.type==="array"||this.type==="surd"?!1:this.getFinalBaseElement().type==="mord"}hasEmptyBranch(e){let a=this.branch(e);return a?(a.length>0,a[0].type,a.length===1):!0}setChildren(e,a){var s;if(!e||(Sr(a),!Sr(a)))return;let o=((s=e[0])==null?void 0:s.type)==="first"?[...e]:[this.makeFirstAtom(a),...e];this._branches?this._branches[a]=o:this._branches={[a]:o};for(let l of e)l.parent=this,l.parentBranch=a;this.isDirty=!0}makeFirstAtom(e){let a=new S5({type:"first",mode:this.mode});return a.parent=this,a.parentBranch=e,a}addChild(e,a){e.type,this.createBranch(a).push(e),this.isDirty=!0,e.parent=this,e.parentBranch=a}addChildBefore(e,a){a.parentBranch;let s=this.createBranch(a.parentBranch);s.splice(s.indexOf(a),0,e),this.isDirty=!0,e.parent=this,e.parentBranch=a.parentBranch}addChildAfter(e,a){a.parentBranch;let s=this.createBranch(a.parentBranch);s.splice(s.indexOf(a)+1,0,e),this.isDirty=!0,e.parent=this,e.parentBranch=a.parentBranch}addChildren(e,a){let s=this.createBranch(a);for(let o of e)o.parent=this,o.parentBranch=a,s.push(o);this.isDirty=!0}addChildrenAfter(e,a){e.length===0||e[0].type,a.parentBranch;let s=this.createBranch(a.parentBranch);s.splice(s.indexOf(a)+1,0,...e),this.isDirty=!0;for(let o of e)o.parent=this,o.parentBranch=a.parentBranch;return e[e.length-1]}removeBranch(e){let a=this.branch(e);if(Sr(e)&&(this._branches[e]=void 0),!a)return[];for(let l of a)l.parent=void 0,l.parentBranch=void 0;a[0].type;let[s,...o]=a;return this.isDirty=!0,o}removeChild(e){if(e.parent,e.type==="first")return;let a=this.branch(e.parentBranch),s=a.indexOf(e);a.splice(s,1),this.isDirty=!0,e.parent=void 0,e.parentBranch=void 0}get siblings(){return this.parent?this.parent.branch(this.parentBranch):[]}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:e}=this;return e[e.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return this.siblings.length===1}get leftSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)-1]}get rightSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)+1]}get hasChildren(){return!!(this._branches&&this.children.length>0)}get firstChild(){return this.hasChildren,this.children[0]}get lastChild(){this.hasChildren;let{children:e}=this;return e[e.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let e=[];for(let a of Lr)if(this._branches[a])for(let s of this._branches[a])e.push(...s.children),e.push(s);return this._children=e,e}render(e){if(this.type==="first"&&!e.atomIdsSettings)return null;let a=se(this.command,this.mode);if(a!=null&&a.render)return a.render(this,e);let s=new O({parent:e},this.style),o=this.createBox(s,{classes:this.parent?"":"ML__base"});return o?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(o=this.attachSupsub(s,{base:o})),o.wrap(s)):null}attachSupsub(e,a){var s;let o=a.base,l=this.superscript,u=this.subscript;if(!l&&!u)return o;let c=null,d=null,m=(s=a.isCharacterBox)!=null?s:this.isCharacterBox(),g=0;if(l){let ve=new O({parent:e,mathstyle:"superscript"});c=S5.createBox(ve,l),m||(g=o.height-e.metrics.supDrop*ve.scalingFactor)}let A=0;if(u){let ve=new O({parent:e,mathstyle:"subscript"});d=S5.createBox(ve,u),m||(A=o.depth+e.metrics.subDrop*ve.scalingFactor)}let P;e.isDisplayStyle?P=e.metrics.sup1:e.isCramped?P=e.metrics.sup3:P=e.metrics.sup2;let W=.5/Dt/e.scalingFactor,me=null;if(d&&c){g=Math.max(g,P,c.depth+.25*e.metrics.xHeight),A=Math.max(A,e.metrics.sub2);let ve=e.metrics.defaultRuleThickness;if(g-c.depth-(d.height-A)<4*ve){A=4*ve-(g-c.depth)+d.height;let De=.8*e.metrics.xHeight-(g-c.depth);De>0&&(g+=De,A-=De)}let He=this.type==="extensible-symbol"&&o.italic?-o.italic:0;me=new Q({individualShift:[{box:d,shift:A,marginLeft:He},{box:c,shift:-g}]}).wrap(e)}else d&&!c?(A=Math.max(A,e.metrics.sub1,d.height-.8*tt),me=new Q({shift:A,children:[{box:d,marginRight:W,marginLeft:this.isCharacterBox()?-o.italic:0}]})):!d&&c&&(g=Math.max(g,P,c.depth+.25*tt),me=new Q({shift:-g,children:[{box:c,marginRight:W}]}));return new _([o,new _(me,{caret:this.caret,isSelected:this.isSelected,classes:"ML__msubsup"})],{type:a.type})}attachLimits(e,a){let s=this.superscript?S5.createBox(new O({parent:e,mathstyle:"superscript"},this.style),this.superscript):null,o=this.subscript?S5.createBox(new O({parent:e,mathstyle:"subscript"},this.style),this.subscript):null;return!s&&!o?a.base.wrap(e):om(e,f(p({},a),{above:s,below:o}))}bind(e,a){if(!a||e.isPhantom||this.value==="")return a;let s=this.parent;for(;s&&!s.captureSelection;)s=s.parent;return s!=null&&s.captureSelection||(this.id||(this.id=e.makeID()),a.atomID=this.id),a}createBox(e,a){var s,o,l,u;let c=(s=this.value)!=null?s:this.body,d=(o=a?.boxType)!=null?o:Oa(this.type),m=(l=a?.classes)!=null?l:"";this.mode==="text"&&(m+=" ML__text");let g=typeof c=="string"||c===void 0?new _(c??null,{type:d,isSelected:this.isSelected,mode:this.mode,maxFontSize:e.scalingFactor,style:f(p({variant:"normal"},this.style),{fontSize:Math.max(1,e.size+e.mathstyle.sizeDelta)}),letterShapeStyle:e.letterShapeStyle,classes:m}):(u=S5.createBox(e,c,{type:d,classes:m}))!=null?u:new _(null);return e.isTight&&(g.isTight=!0),(this.mode!=="math"||this.style.variant==="main")&&(g.italic=0),g.right=g.italic,this.bind(e,g),this.caret&&!this.superscript&&!this.subscript&&(g.caret=this.caret),g}isDigit(){var e;return this.type==="mord"&&this.value?/^[\d,\.]$/.test(this.value):this.type==="group"&&((e=this.body)==null?void 0:e.length)===2?this.body[0].type==="first"&&this.body[1].value===",":!1}asDigit(){var e;return this.type==="mord"&&this.value&&/^[\d,\.]$/.test(this.value)?this.value:this.type==="group"&&((e=this.body)==null?void 0:e.length)===2&&this.body[0].type==="first"&&this.body[1].value===","?".":""}};function Zh(t){let e,a=[],s=[];for(let o of t)if(o.type==="first"&&s.push(o),!e&&!o.style)s.push(o);else{let l=o.style;e&&l.color===e.color&&l.backgroundColor===e.backgroundColor&&l.fontSize===e.fontSize?s.push(o):(s.length>0&&a.push(s),s=[o],e=l)}return s.length>0&&a.push(s),a}function Yh(t,e,a){var s,o,l,u,c;if(!e||e.length===0)return null;let d=new O({parent:t},a.style),m=!((s=d.atomIdsSettings)!=null&&s.groupNumbers),g=[];if(e.length===1){let P=e[0],W=P.render(d);W&&(m&&P.isSelected&&W.selected(!0),g=[W])}else{let P="",W=!0;for(let me of e){(o=d.atomIdsSettings)!=null&&o.groupNumbers&&P&&(W&&me.isDigit()||!W&&Rl(me))&&(d.atomIdsSettings.overrideID=P);let ve=me.render(d);d.atomIdsSettings&&(d.atomIdsSettings.overrideID=void 0),ve&&((l=d.atomIdsSettings)!=null&&l.groupNumbers&&((me.isDigit()||Rl(me))&&(!P||W!==me.isDigit())&&(W=me.isDigit(),P=(u=me.id)!=null?u:""),P&&(!(me.isDigit()||Rl(me))||!me.hasEmptyBranch("superscript")||!me.hasEmptyBranch("subscript"))&&(P="")),m&&me.isSelected&&ve.selected(!0),g.push(ve))}}if(g.length===0)return null;let A=new _(g,f(p({isTight:d.isTight},a),{type:(c=a.type)!=null?c:"lift"}));return A.isSelected=g.every(P=>P.isSelected),A.wrap(d)}function Rl(t){return t.mode==="text"}function Qh(t){return t.map(e=>e===null?"<null>":Array.isArray(e)&&e[0]instanceof b?{atoms:e.map(a=>a.toJson())}:typeof e=="object"&&"group"in e?{group:e.group.map(a=>a.toJson())}:e)}var $e=class ew extends b{constructor(e,a,s){super({type:"text",command:e,mode:"text",displayContainsHighlight:!0}),this.value=a,this.verbatimLatex=a,this.applyStyle(s)}static fromJson(e){return new ew(e.command,e.value,e.style)}render(e){let a=this.createBox(e);return this.caret&&(a.caret=this.caret),a}_serialize(e){var a;return(a=this.verbatimLatex)!=null?a:Us("text",this.value.codePointAt(0))}};function am(t,e){if(t.direction===e.direction){let a=t.ranges.length;if(e.ranges.length===a){let s=0;for(;s<a&&ef(t.ranges[s],e.ranges[s])==="equal";)s++;return s===a?"equal":"different"}}return"different"}function ef(t,e){return t[0]===e[0]&&t[1]===e[1]?"equal":"different"}function le(t){let e=1/0,a=-1/0;for(let s of t.ranges)e=Math.min(e,s[0],s[1]),a=Math.max(a,s[0],s[1]);return[e,a]}function Ot(t){return typeof t=="number"&&!Number.isNaN(t)}function ti(t){return Array.isArray(t)&&t.length===2}function Ui(t){return t!=null&&typeof t=="object"&&"ranges"in t&&Array.isArray(t.ranges)}function sm(t,e){let a=t.at(e),s;if(a){s=a.mode;let o=a.parent;for(;!s&&o;)o&&(s=o.mode),o=o.parent}return s}function tf(t,e){if(!e)return"";if(typeof e=="string")return e;if(!t||e.after===void 0)return e.value;let a=!1,s=!1,o=!1,l=!1,u=!1,c=!1,d=!1,m=!1,g=!1,A=!1,P=!1,W=!1,me=!1,ve=!1,He=!1,De=t[0],Xe=0;for(;De!=null&&De.type&&/^(subsup|placeholder)$/.test(De.type);)Xe+=1,De=t[Xe];return a=!De||De.type==="first",De&&(ve=De.mode==="text",s=!ve&&De.type==="mord"&&Io.test(De.value),o=!ve&&De.type==="mord"&&/\d+$/.test(De.value),l=!ve&&De.isFunction,u=De.type==="genfrac",c=De.type==="surd",d=De.type==="mbin",m=De.type==="mrel",g=De.type==="mop"||De.type==="operator"||De.type==="extensible-symbol",A=De.type==="mpunct"||De.type==="minner",P=De.type==="array",W=De.type==="mopen",me=De.type==="mclose"||De.type==="leftright",He=De.type==="space"),e.after.includes("nothing")&&a||e.after.includes("letter")&&s||e.after.includes("digit")&&o||e.after.includes("function")&&l||e.after.includes("frac")&&u||e.after.includes("surd")&&c||e.after.includes("binop")&&d||e.after.includes("relop")&&m||e.after.includes("operator")&&g||e.after.includes("punct")&&A||e.after.includes("array")&&P||e.after.includes("openfence")&&W||e.after.includes("closefence")&&me||e.after.includes("text")&&ve||e.after.includes("space")&&He?e.value:""}function Gn(t,e,a){return a?tf(t,a[e]):""}var za={"&":"\\&","%":"\\%",$:"\\$","''":"^{\\doubleprime}","'''":"^{\\prime\\prime\\prime}","''''":"^{\\prime\\prime\\prime\\prime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","":"\\differentialD","":"\\differentialD",sin:"\\sin",cos:"\\cos",tan:"\\tan",arccos:"\\arccos",arcsin:"\\arcsin",arctan:"\\arctan",arctg:"\\operatorname{arctg}",arcsec:"\\operatorname{arcsec}",arccsc:"\\operatorname{arccsc}",arsinh:"\\operatorname{arsinh}",arccosh:"\\operatorname{arccosh}",arcosh:"\\operatorname{arcosh}",artanh:"\\operatorname{artanh}",arctanh:"\\operatorname{arctanh}",arcsech:"\\operatorname{arcsech}",arccsch:"\\operatorname{arccsch}",ch:"\\operatorname{ch}",cosec:"\\operatorname{cosec}",cosh:"\\cosh",cot:"\\cot",cotg:"\\operatorname{cotg}",coth:"\\coth",csc:"\\csc",ctg:"\\operatorname{ctg}",cth:"\\operatorname{cth}",sec:"\\sec",sech:"\\operatorname{sech}",sinh:"\\sinh",sh:"\\operatorname{sh}",tanh:"\\tanh",tg:"\\operatorname{tg}",th:"\\operatorname{th}",arg:"\\arg",lg:"\\lg",lb:"\\operatorname{lb}",log:"\\log_{#?}",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?\\to#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},sint:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\sin t"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\mathbb{Z}",QQ:"\\mathbb{Q}",RR:"\\mathbb{R}",CC:"\\mathbb{C}",xx:"\\times","+-":"\\pm","":"\\ne","!=":"\\ne","":"\\ge",">=":"\\ge","":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","":"\\approx","?=":"\\questeq","":"\\div","":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\bmod{#?}","(mod":"\\pmod{#?}",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\gcd",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},ft:{after:"nothing+digit+operator",value:"\\operatorname{ft}"},inch:{after:"nothing+digit+operator",value:"\\operatorname{inch}"},mi:{after:"nothing+digit+operator",value:"\\operatorname{mi}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","-->...":"\\longrightarrow\\cdots","->":"\\to","|->":"\\mapsto","-->":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\iff","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","*":"\\cdot","**":"\\star","***":"\\ast","//":"\\slash","\\\\":"\\backslash",setminus:"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div",divide:"\\div","@":"\\circ","^^":"\\wedge","^^^":"\\bigwedge",vv:"\\vee",vvv:"\\bigvee",nn:"\\cap",nnn:"\\bigcap",uu:"\\cup",uuu:"\\bigcup","-=":"\\equiv","~=":"\\cong",lt:"<","lt=":"\\leq",gt:">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq",prop:"\\propto",diamond:"\\diamond",square:"\\square",iff:"\\iff",sub:"\\subset",sup:"\\supset",sube:"\\subseteq",supe:"\\supseteq",uarr:"\\uparrow",darr:"\\downarrow",rarr:"\\rightarrow",rArr:"\\Rightarrow",larr:"\\leftarrow",lArr:"\\Leftarrow",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",aleph:"\\aleph",and:"\\land",or:"\\lor",not:"\\neg","_|_":"\\bot",TT:"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceil","~|":"\\rceil",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail",times:"\\times",of:"\\circ",infinity:"\\infty",defint:"\\int_{#?}^{#?}",approaches:"\\to",ceil:"\\left\\lceil#?\\right\\rceil",floor:"\\left\\lfloor#?\\right\\rfloor",union:"\\cup",asterisk:"\\ast",frac:"\\frac{#?}{#?}",cbrt:"\\sqrt[3]{#?}",nthroot:"\\sqrt[#?]{#?}"};function Yt(t,e){var a;let s=(a=e?.format)!=null?a:"auto";return s==="auto"&&([s,t]=rf(t)),s==="ascii-math"?(t=t.replace(/\u2061/gu,""),t=t.replace(/\u3016/gu,"{"),t=t.replace(/\u3017/gu,"}"),t=t.replace(/([^\\])sinx/g,"$1\\sin x"),t=t.replace(/([^\\])cosx/g,"$1\\cos x "),t=t.replace(/\u2013/g,"-"),["ascii-math",Fe(t,{inlineShortcuts:e?.inlineShortcuts})]):["latex",t]}function Fe(t,e){var a;if(t=t.trim(),!t)return"";let s=(a=e.inlineShortcuts)!=null?a:za;if(t.startsWith("^")||t.startsWith("_")){let{match:c,rest:d}=ri(t.slice(1),{inlineShortcuts:s,noWrap:!0});return`${t[0]}{${c}}${Fe(d,e)}`}let o=t.match(/^(sqrt|\u221A)(.*)/);if(o){let{match:c,rest:d}=ri(o[2],{inlineShortcuts:s,noWrap:!0});return`\\sqrt{${c??"\\placeholder{}"}}${Fe(d,e)}`}if(o=t.match(/^(\\cbrt|\u221B)(.*)/),o){let{match:c,rest:d}=ri(o[2],{inlineShortcuts:s,noWrap:!0});return`\\sqrt[3]{${c??"\\placeholder{}"}}${Fe(d,e)}`}if(o=t.match(/^abs(.*)/),o){let{match:c,rest:d}=ri(o[1],{inlineShortcuts:s,noWrap:!0});return`\\left|${c??"\\placeholder{}"}\\right|${Fe(d,e)}`}if(o=t.match(/^["](.*?)["](.*)/),o)return`\\text{${o[1]}}${Fe(o[2],e)}`;if(o=t.match(/^([^a-zA-Z0-9\(\{\[\_\^\\\s"]+)(.*)/),o)return`${cm(o[1],s)}${Fe(o[2],e)}`;if(/^([fgh])[^a-zA-Z]/.test(t)){let{rest:c,match:d}=ri(t.slice(1),{inlineShortcuts:s,noWrap:!0}),m="";return t[1]==="("?m=`${t[0]}\\left(${d}\\right)`:m=t[0]+d,m+Fe(c,e)}if(o=t.match(/^([a-zA-Z]+)(.*)/),o)return cm(o[1],s)+Fe(o[2],e);let{match:l,rest:u}=ri(t,{inlineShortcuts:s,noWrap:!0});if(l&&u[0]==="/"){let c=ri(u.slice(1),{inlineShortcuts:s,noWrap:!0});if(c.match)return`\\frac{${l}}{${c.match}}${Fe(c.rest,e)}`}else return t.startsWith("(")?"\\left("+l+"\\right)"+Fe(u,e):l+Fe(u,e);return o=t.match(/^(\s+)(.*)$/),o?" "+Fe(o[2],e):t}var lm={"[":"\\lbrack","]":"\\rbrack","{":"\\lbrace","}":"\\rbrace"};function ri(t,e){var a,s;let o="";t=t.trim();let l=t,u=t.charAt(0),c={"(":")","{":"}","[":"]"}[u];if(c){let d=1,m=1;for(;m<t.length&&d>0;)t[m]===u&&d++,t[m]===c&&d--,m++;if(d===0){let g=Fe(t.substring(1,m-1),e);e.noWrap&&u==="("?o=g:o=`\\left${(a=lm[u])!=null?a:u}${g}\\right${(s=lm[c])!=null?s:c}`,l=t.slice(Math.max(0,m))}else o=t.substring(1,m),l=""}else{let d=t.match(/^([a-zA-Z]+)/);if(d){let m=Gn(null,t,e.inlineShortcuts);if(m)return m=m.replace("_{#?}",""),m=m.replace("^{#?}",""),{match:m,rest:t.slice(m.length)}}if(d=t.match(/^([a-zA-Z])/),d)return{match:d[1],rest:t.slice(1)};if(d=t.match(/^(-)?\d+(\.\d*)?/),d)return{match:d[0],rest:t.slice(d[0].length)};/^\\(left|right)/.test(t)||(d=t.match(/^(\\[a-zA-Z]+)/),d&&(l=t.slice(d[1].length),o=d[1]))}return{match:o,rest:l}}function cm(t,e){let a=Gn(null,t,e);return a?(a=a.replace("_{#?}",""),a=a.replace("^{#?}",""),a+=" "):a=t,a}var Pl=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function Ia(t){let e=t.trim();for(let a of Pl)if(e.startsWith(a[0])&&e.endsWith(a[1]))return[!0,e.substring(a[0].length,e.length-a[1].length)];return[!1,t]}function rf(t){if(t=t.trim(),t.length<=1)return["latex",t];let e;return[e,t]=Ia(t),e?["latex",t]:t.startsWith("`")&&t.endsWith("`")?(t=t.substring(1,t.length-1),["ascii-math",t]):t.includes("\\")?["latex",t]:/\$.+\$/.test(t)?["latex",`\\text{${t}}`]:[void 0,t]}var nf="$$",of="$$",um=(t,e,a)=>(Pl.some(s=>e.startsWith(s[0])&&e.endsWith(s[1]))||(e=`${nf} ${e} ${of}`),e),ji=class P8{constructor(e){P8._modes[e]=this}static onPaste(e,a,s){var o;if(!a.contentEditable&&a.userSelect==="none")return a.model.announce("plonk"),!1;if(typeof s=="string"){let u=new DataTransfer;u.setData("text/plain",s),s=u}let l=new ClipboardEvent("paste",{clipboardData:s,cancelable:!0});return(o=a.host)!=null&&o.dispatchEvent(l)?P8._modes[e].onPaste(a,s):!1}static copyToClipboard(e,a){if(!e.contentEditable&&e.userSelect==="none"){e.model.announce("plonk");return}let s=e.model,o=s.selectionIsCollapsed?[0,s.lastOffset]:le(s.selection),l=s.getValue(o,a);navigator.clipboard.writeText(l).then(()=>{},()=>e.model.announce("plonk"))}static onCopy(e,a){var s;if(!a.clipboardData)return;if(!e.contentEditable&&e.userSelect==="none"){e.model.announce("plonk");return}let o=e.model,l=o.selectionIsCollapsed?[0,o.lastOffset]:le(o.selection),u=o.getAtoms(l);if(u.every(c=>c.mode==="text"||!c.mode))a.clipboardData.setData("text/plain",u.filter(c=>c instanceof $e).map(c=>c.value).join(""));else if(u.every(c=>c.mode==="latex"))a.clipboardData.setData("text/plain",o.getAtoms(l,{includeChildren:!0}).map(c=>{var d;return(d=c.value)!=null?d:""}).join(""));else{let c;u.length===1&&u[0].verbatimLatex!==void 0?c=u[0].verbatimLatex:c=o.getValue(l,"latex-expanded"),a.clipboardData.setData("application/x-latex",c);try{a.clipboardData.setData("text/plain",e.options.onExport(e,c,l))}catch{}if(u.length===1){let d=u[0];(d.type==="root"||d.type==="group")&&(u=d.body.filter(m=>m.type!=="first"))}try{a.clipboardData.setData("application/json+mathlive",JSON.stringify(u.map(d=>d.toJson())))}catch{}if((s=window[Symbol.for("io.cortexjs.compute-engine")])!=null&&s.ComputeEngine){let d=globalThis.MathfieldElement.computeEngine;if(d)try{let m=d.jsonSerializationOptions;d.jsonSerializationOptions={metadata:["latex"]};let g=d.parse(o.getValue(l,"latex-unstyled"));d.jsonSerializationOptions=m;let A=JSON.stringify(g.json);A&&a.clipboardData.setData("application/json",A)}catch{}}}a.preventDefault()}static insert(e,a,s={}){var o;let l=s.mode==="auto"?e.mode:(o=s.mode)!=null?o:e.mode;return P8._modes[l].insert(e,a,s)}onPaste(e,a){return!1}insert(e,a,s){return!1}};ji._modes={};var V=ji,dm=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",command:"moveToNextGroup"},{key:"shift+[Tab]",command:"moveToPreviousGroup"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:["complete","accept-all"]},{key:"[Enter]",ifMode:"latex",command:["complete","accept-all"]},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"cmd+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"ctrl+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"cmd+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"ctrl+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"cmd+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+shift+v",ifMode:"math",command:["insert","\\sqrt[#0]{#1}"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleContextMenu"},{key:"alt+shift+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"shift+alt+[KeyT]",ifMode:"math",command:["switchMode","text"]},{key:"shift+alt+[KeyT]",ifMode:"text",command:["switchMode","math"]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+shift+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"alt+[Tab]",ifMode:"math",command:"addColumnAfter"},{key:"shift+alt+[Tab]",ifMode:"math",command:"addColumnBefore"},{key:"alt+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Enter]",ifMode:"math",command:"addRowBefore"},{key:"alt+[Return]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Return]",ifMode:"math",command:"addRowBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]},{key:"[Backquote]",ifLayout:["windows.german","linux.german"],ifMode:"math",command:["insert","^"]},{key:"[IntlBackslash]",ifLayout:["apple.german"],ifMode:"math",command:["insert","^"]}],mm={"\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\infty":"alt+[Digit5]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function rt(t){var e;return((e=t.element)==null?void 0:e.mathfield)===t}function af(t){var e,a;return(a=(e=t.querySelector(".ML__caret"))!=null?e:t.querySelector(".ML__text-caret"))!=null?a:t.querySelector(".ML__latex-caret")}function Ji(t){let e=af(t);if(!e)return null;let a=e.getBoundingClientRect();return{x:a.right,y:a.bottom,height:a.height}}function sf(t){var e;if(!t.parent)return"root";let a=(e=t.parent.id)!=null?e:"";return a+=typeof t.parentBranch=="string"?"-"+t.parentBranch:`-${t.parentBranch[0]}/${t.parentBranch[0]}`,a}function zl(t,e,a){if(!e)return null;let s=t.field.getBoundingClientRect(),o=e.right-e.left,l=e.bottom-e.top,u=Math.ceil(e.left-s.left+t.field.scrollLeft*a),c=Math.ceil(e.top-s.top);return{left:u,right:u+o,top:c,bottom:c+l}}function pm(t){let e=t.getBoundingClientRect(),a=parseInt(getComputedStyle(t).marginRight),s={top:e.top-1,bottom:e.bottom,left:e.left,right:e.right-1+a};if(t.children.length===0||t.tagName.toUpperCase()==="SVG")return s;for(let o of t.children)if(o.nodeType===1&&"atomId"in o.dataset&&!o.classList.contains("ML__pstrut")){let l=pm(o);s.left=Math.min(s.left,l.left),s.right=Math.max(s.right,l.right),s.top=Math.min(s.top,l.top),s.bottom=Math.max(s.bottom,l.bottom)}return s}function Ar(t,e){var a,s;if(!e.id)return null;let o=(s=(a=t.atomBoundsCache)==null?void 0:a.get(e.id))!=null?s:null;if(o!==null)return o;let l=t.field.querySelector(`[data-atom-id="${e.id}"]`);return o=l?pm(l):null,t.atomBoundsCache&&(o?t.atomBoundsCache.set(e.id,o):t.atomBoundsCache.delete(e.id)),o??null}function hm(t,e){let[a,s]=e,o=null;for(let l=a;l<=s;l++){let u=Ar(t,t.model.at(l));u&&(o?(o.top=Math.min(o.top,u.top),o.bottom=Math.max(o.bottom,u.bottom),o.left=Math.min(o.left,u.left),o.right=Math.max(o.right,u.right)):o=u)}return o??{top:0,bottom:0,left:0,right:0}}function lf(t,e,a){let s=new Map,o=t.field,l=o.offsetWidth,u=Math.floor(o.getBoundingClientRect().width)/l;u=isNaN(u)?1:u;for(let c of t.model.getAtoms(e,{includeChildren:!0})){if(a!=null&&a.excludeAtomsWithBackground&&c.style.backgroundColor)continue;let d=zl(t,Ar(t,c),u);if(d){let m=sf(c);if(s.has(m)){let g=s.get(m);s.set(m,{left:Math.min(g.left,d.left),right:Math.max(g.right,d.right),top:Math.min(g.top,d.top),bottom:Math.max(g.bottom,d.bottom)})}else s.set(m,d)}}return[...s.values()]}function Na(t,e){return t.model.selection.ranges.reduce((a,s)=>a.concat(...lf(t,s,e)),[])}function Gi(t,e){return t==="*"||e==="none"?!0:e==="same-origin"?!window.origin||t===window.origin:typeof e=="function"?e(t):!1}function Il(t){let e=0,a=0,s=t.offsetWidth,o=t.offsetHeight;for(;t instanceof HTMLElement;)e+=t.offsetTop,a+=t.offsetLeft,t=t.offsetParent;return new DOMRect(a,e,s,o)}function $a(t,e){if(!t)return;let a=t.model.at(e);if(!a)return;let s={},o=Ar(t,a);o&&(s.bounds=new DOMRect(o.left,o.top,o.right-o.left,o.bottom-o.top)),s.depth=a.treeDepth-2,s.style=a.style;let l=a;for(;l;){if(l.command==="\\htmlData"&&l.args&&typeof l.args[0]=="string"){let u=l.args[0].split(",");for(let c of u){let d=c.match(/([^=]+)=(.+$)/);if(d){let m=d[1].trim().replace(/ /g,"-");m&&(s.data||(s.data={}),s.data[m]=d[2])}else{let m=c.trim().replace(/ /g,"-");m&&(s.data||(s.data={}),s.data[m]=void 0)}}}(l.command==="\\htmlId"||l.command==="\\cssId")&&!s.id&&l.args&&typeof l.args[0]=="string"&&(s.id=l.args[0]),l=l.parent}return(a.mode==="math"||a.mode==="text")&&(s.latex=b.serialize([a],{defaultMode:"math"})),s}function fm(t,e){let a=t.model.at(e);for(;a;){if(a.command==="\\href"){let s=a.args[0];if(typeof s=="string")return s}a=a.parent}return""}var gm=`@keyframes ML__caret-blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}
.ML__container {
  display: inline-flex;
  flex-flow: row;
  justify-content: space-between;
  align-items: flex-end;
  min-height: 39px;
  /* Need some room for the virtual keyboard toggle */
  width: 100%;
  padding: 4px;
  box-sizing: border-box;
  /* This attribute is necessary to work around a Firefox issue where 
  where clicking multiple times on the border leads to a focused mathfield that cannot be edited until focus is lost and regained (also fixes the multiple cursor issue on firefox that can occur with the same sequence of events).
  */
  pointer-events: auto;
  /* Prevent the browser from trying to interpret touch gestures in the field */
  /* "Disabling double-tap to zoom removes the need for browsers to
        delay the generation of click events when the user taps the screen." */
  touch-action: none;
  --_caret-color: var(--caret-color, hsl(var(--_hue), 40%, 49%));
  --_selection-color: var(--selection-color, #000);
  --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 70%, 85%));
  --_text-highlight-background-color: var(--highlight-text, hsla(var(--_hue), 40%, 50%, 0.1));
  --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 40%, 95%));
  --_smart-fence-color: var(--smart-fence-color, currentColor);
  --_smart-fence-opacity: var(--smart-fence-opacity, 0.5);
  --_contains-highlight-color: var(--contains-highlight-color, var(--_caret-color));
  --_latex-color: var(--latex-color, hsl(var(--_hue), 80%, 40%));
  --_correct-color: var(--correct-color, #10a000);
  --_incorrect-color: var(--incorrect-color, #a01b00);
  --_composition-background-color: var(--composition-background-color, #fff1c2);
  --_composition-text-color: var(--composition-text-color, black);
  --_composition-underline-color: var(--composition-underline-color, transparent);
  --_tooltip-border: var(--tooltip-border, 1px solid transparent);
  --_tooltip-border-radius: var(--tooltip-border-radius, 8px);
  --_tooltip-background-color: var(--tooltip-background-color, #616161);
  --_tooltip-color: var(--tooltip-color, #fff);
  --_tooltip-box-shadow: var(--tooltip-box-shadow, 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2));
}
@media (prefers-color-scheme: dark) {
  .ML__container {
    --_contains-highlight-color: var(--contains-highlight-color, hsl(var(--_hue), 85%, 75%));
    --_caret-color: var(--caret-color, hsl(var(--_hue), 65%, 55%));
    --_selection-color: var(--selection-color, #fff);
    --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 65%, 55%));
    --_text-highlight-background-color: var(--text-highlight-background-color, hsla(var(--_hue), 40%, 50%, 0.6));
    --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 5%, 34%));
    --_latex-color: var(--primary, hsl(var(--_hue), 40%, 50%));
    --_composition-background-color: #69571c;
    --_composition-text-color: white;
    --_placeholder-color: hsl(var(--_hue), 60%, 69%);
    --_smart-fence-color: var(--smart-fence-color, #fff);
    --_smart-fence-opacity: var(--smart-fence-opacity, 0.7);
  }
}
@media (forced-colors: active) {
  .ML__container {
    --_caret-color: white;
    --_selection-color: white;
    --_smart-fence-color: white;
    --_latex-color: white;
    --_correct-color: white;
    --_incorrect-color: white;
    --_composition-text-color: white;
  }
}
@media (hover: none) and (pointer: coarse) {
  :host(:not(:focus)) .ML__container {
    pointer-events: none;
  }
}
/* This is the actual field content (formula) */
.ML__content {
  display: flex;
  align-items: center;
  align-self: center;
  position: relative;
  overflow: hidden;
  padding: 2px 3px 2px 1px;
  width: 100%;
  /* Encourage the browser to use the GPU to render the field.
     Weirdly, this is required for prompts to be rendered correctly. 
   */
  isolation: isolate;
  text-shadow: var(--text-shadow);
}
.ML__content .ML__latex {
  text-shadow: var(--text-shadow);
}
.ML__content .ML__sqrt-line {
  box-shadow: var(--text-shadow);
}
.ML__content .ML__frac-line {
  box-shadow: var(--text-shadow);
}
.ML__virtual-keyboard-toggle,
.ML__menu-toggle {
  box-sizing: border-box;
  display: flex;
  align-self: center;
  align-items: center;
  flex-shrink: 0;
  flex-direction: column;
  justify-content: center;
  width: 34px;
  height: 34px;
  padding: 0;
  margin-right: 4px;
  cursor: pointer;
  /* Avoid some weird blinking with :hover */
  border-radius: 8px;
  border: 1px solid transparent;
  transition: background 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  color: hsl(var(--_hue), 40%, 50%);
  fill: currentColor;
  background: transparent;
}
.ML__virtual-keyboard-toggle:hover,
.ML__menu-toggle:hover {
  background: hsla(0, 0%, 70%, 0.3);
  color: #333;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle > span,
.ML__menu-toggle > span {
  display: flex;
  align-self: center;
  align-items: center;
}
@media (pointer: coarse) {
  .ML__virtual-keyboard-toggle,
  .ML__menu-toggle {
    min-width: 60px;
    min-height: 60px;
  }
}
/* The invisible element used to capture keyboard events. We're just trying
 really hard to make sure it doesn't show. */
.ML__keyboard-sink {
  display: inline-block;
  resize: none;
  outline: none;
  border: none;
  /* Need these for Microsoft Edge */
  position: fixed;
  clip: rect(0 0 0 0);
  /* Need this to prevent iOS Safari from auto-zooming */
  font-size: 1em;
  font-family: KaTeX_Main;
  line-height: 0.5;
  /* On Chromium, if this is 0, no keyboard events are received */
  /* Preferred over clip */
  clip-path: inset(50%);
}
[part='placeholder'] {
  color: var(--neutral-400);
}
.ML__composition {
  background: var(--_composition-background-color);
  color: var(--_composition-text-color);
  text-decoration: underline var(--_composition-underline-color);
}
.ML__caret {
  display: inline-block;
}
.ML__caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__text-caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__latex-caret::after {
  content: '';
  visibility: hidden;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_latex-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.019em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__focused .ML__latex-caret::after,
.ML__focused .ML__text-caret::after,
.ML__focused .ML__caret::after {
  visibility: visible;
}
.ML__focused .ML__text {
  background: var(--_text-highlight-background-color);
}
/* When using smartFence, the anticipated closing fence is displayed
with this style */
.ML__smart-fence__close {
  opacity: var(--_smart-fence-opacity);
  color: var(--_smart-fence-color);
}
.ML__focused .ML__selected,
.ML__focused .ML__selected .ML__contains-caret,
.ML__focused .ML__selected .ML__smart-fence__close,
.ML__focused .ML__selected .ML__placeholder {
  color: var(--_selection-color);
  opacity: 1;
}
.ML__selection {
  box-sizing: border-box;
  background: transparent;
}
:host(:focus) .ML__selection {
  background: var(--_selection-background-color) !important;
}
.ML__contains-caret.ML__close,
.ML__contains-caret.ML__open,
.ML__contains-caret > .ML__close,
.ML__contains-caret > .ML__open,
.ML__contains-caret .ML__sqrt-sign,
.ML__contains-caret .ML__sqrt-line {
  color: var(--_contains-highlight-color);
}
.ML__contains-highlight {
  box-sizing: border-box;
  background: transparent;
}
.ML__focused .ML__contains-highlight {
  background: var(--_contains-highlight-background-color);
}
.ML__raw-latex {
  font-family: 'Berkeley Mono', 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  font-weight: 400;
  font-size: 0.8em;
  letter-spacing: -0.05em;
  color: var(--_latex-color);
}
.ML__suggestion {
  color: var(--neutral-500);
}
.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle.is-pressed,
.ML__virtual-keyboard-toggle.is-active:hover,
.ML__virtual-keyboard-toggle.is-active {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
/* Add an attribute 'data-tooltip' to automatically show a
   tooltip over a element on hover.
*/
[data-tooltip] {
  position: relative;
}
[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  display: block;
  z-index: 2;
  pointer-events: none;
  right: auto;
  top: calc(-100% - 4px);
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  border-radius: 4px;
  background: #616161;
  color: #fff;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  text-align: center;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-style: normal;
  font-weight: 400;
  font-size: 13px;
  /* Phone */
  opacity: 0;
  transform: scale(0.5);
}
@media only screen and (max-width: 767px) {
  [data-tooltip]::after {
    padding: 8px 16px;
    font-size: 16px;
  }
}
menu [data-tooltip]::after {
  left: 100%;
  top: 0%;
}
menu .ML__base {
  cursor: default;
}
/** Don't display if we're tracking, i.e. have the pointer down */
.tracking [data-tooltip]:hover::after {
  /* Use visibility, not display. Display will remove the after from the DOM, and the override below will not work */
  visibility: hidden;
}
/** But do display if tracking and inside a menu */
.tracking menu li[data-tooltip]:hover::after,
[data-tooltip]:hover::after {
  visibility: visible;
  opacity: 1;
  transform: scale(1);
  transition-property: opacity, scale;
  transition-duration: 0.15s;
  transition-delay: 1s;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__prompt {
  border-radius: 2px;
}
.ML__editablePromptBox {
  outline: 1px solid #acacac;
  border-radius: 2px;
  z-index: -1;
}
.ML__focused .ML__focusedPromptBox {
  outline: highlight auto 1px;
}
.ML__lockedPromptBox {
  background-color: rgba(142, 142, 141, 0.4);
  z-index: -1;
}
.ML__correctPromptBox {
  outline: 1px solid var(--_correct-color);
  box-shadow: 0 0 5px var(--_correct-color);
}
.ML__incorrectPromptBox {
  outline: 1px solid var(--_incorrect-color);
  box-shadow: 0 0 5px var(--_incorrect-color);
}
.variant-submenu {
  display: flex;
  flex-direction: column;
  padding: 8px;
}
.variant-submenu [part='menu-item'].ML__xl {
  font-size: 2rem;
  text-align: center;
  margin: 0;
}
.ML__center-menu .label {
  text-align: center;
}
.insert-matrix-submenu {
  /* Grid doesn't work on Safari */
  --_menu-item-size: 25px;
  width: calc(5 * var(--_menu-item-size));
  display: flex;
  flex-wrap: wrap;
  padding: 8px;
  align-content: center;
  justify-content: center;
}
.insert-matrix-submenu [part='menu-item'] {
  width: var(--_menu-item-size);
  height: var(--_menu-item-size);
  font-size: 21px;
  border: none;
  border-radius: 0;
  line-height: 21px;
  text-align: center;
  padding: 0;
  margin: 0;
}
.border-submenu [part='menu-item'] {
  font-size: 2rem;
  line-height: 1.2;
  text-align: center;
}
.swatches-submenu {
  --_swatch-size: 2rem;
  --_columns: 4;
  display: flex;
  flex-flow: wrap;
  padding: 8px;
  max-width: calc(var(--_columns) * (var(--_swatch-size) + 18px) + 16px);
  box-sizing: border-box;
}
.menu-swatch {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: fit-content;
  height: fit-content;
  margin: 2px;
  padding: 0;
  background: var(--neutral-200);
}
.menu-swatch > .label {
  padding: 0;
  margin: 0;
  line-height: 0;
}
.menu-swatch > .label > span {
  display: inline-block;
  margin: 6px;
  min-width: var(--_swatch-size);
  min-height: var(--_swatch-size);
  border-radius: 50%;
}
.menu-swatch.active {
  background: var(--neutral-100);
  scale: 1.4;
}
.menu-swatch.active > .label > span {
  border-radius: 2px;
}
.menu-swatch .ui-checkmark,
.menu-swatch .ui-mixedmark {
  position: absolute;
  margin: 0;
  padding: 0;
  color: white;
}
.menu-swatch.dark-contrast .ui-checkmark,
.menu-swatch.dark-contrast .ui-mixedmark {
  color: #000;
}
.ML__insert-template {
  font-size: 1em;
}
.ML__insert-label {
  opacity: 0.5;
  margin-left: 2ex;
}
`,bm=`.ML__container {
  min-height: auto !important;
  --_hue: var(--hue, 212);
  --_placeholder-color: var(--placeholder-color, hsl(var(--_hue), 40%, 49%));
  --_placeholder-opacity: var(--placeholder-opacity, 0.4);
  --_text-font-family: var(--text-font-family, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif);
}
.ML__sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}
.ML__is-inline {
  display: inline-block;
}
.ML__base {
  visibility: inherit;
  display: inline-block;
  position: relative;
  cursor: text;
  padding: 0;
  margin: 0;
  box-sizing: content-box;
  border: 0;
  outline: 0;
  vertical-align: baseline;
  font-weight: inherit;
  font-family: inherit;
  font-style: inherit;
  text-decoration: none;
  width: min-content;
}
.ML__strut,
.ML__strut--bottom {
  display: inline-block;
  min-height: 0.5em;
}
.ML__small-delim {
  font-family: KaTeX_Main;
}
/* Text mode */
.ML__text {
  font-family: var(--_text-font-family);
  white-space: pre;
}
/* Use cmr for 'math upright' */
.ML__cmr {
  font-family: KaTeX_Main;
  font-style: normal;
}
.ML__mathit {
  font-family: KaTeX_Math;
  /* The KaTeX_Math font is italic by default, so the font-style below is only 
     useful when a fallback font is used
  */
  font-style: italic;
}
.ML__mathbf {
  font-family: KaTeX_Main;
  font-weight: bold;
}
/* Lowercase greek symbols should stick to math font when \\mathbf is applied 
   to match TeX idiosyncratic behavior */
.lcGreek.ML__mathbf {
  font-family: KaTeX_Math;
}
.ML__mathbfit {
  font-family: KaTeX_Math;
  font-weight: bold;
  font-style: italic;
}
.ML__ams {
  font-family: KaTeX_AMS;
}
/* Blackboard */
.ML__bb {
  font-family: KaTeX_AMS;
}
.ML__cal {
  font-family: KaTeX_Caligraphic;
}
.ML__frak {
  font-family: KaTeX_Fraktur;
}
.ML__tt {
  font-family: KaTeX_Typewriter;
}
.ML__script {
  font-family: KaTeX_Script;
}
.ML__sans {
  font-family: KaTeX_SansSerif;
}
.ML__series_ul {
  font-weight: 100;
}
.ML__series_el {
  font-weight: 100;
}
.ML__series_l {
  font-weight: 200;
}
.ML__series_sl {
  font-weight: 300;
}
.ML__series_sb {
  font-weight: 500;
}
.ML__bold {
  font-weight: 700;
}
.ML__series_eb {
  font-weight: 800;
}
.ML__series_ub {
  font-weight: 900;
}
.ML__series_uc {
  font-stretch: ultra-condensed;
}
.ML__series_ec {
  font-stretch: extra-condensed;
}
.ML__series_c {
  font-stretch: condensed;
}
.ML__series_sc {
  font-stretch: semi-condensed;
}
.ML__series_sx {
  font-stretch: semi-expanded;
}
.ML__series_x {
  font-stretch: expanded;
}
.ML__series_ex {
  font-stretch: extra-expanded;
}
.ML__series_ux {
  font-stretch: ultra-expanded;
}
.ML__it {
  font-style: italic;
}
.ML__shape_ol {
  -webkit-text-stroke: 1px black;
  text-stroke: 1px black;
  color: transparent;
}
.ML__shape_sc {
  font-variant: small-caps;
}
.ML__shape_sl {
  font-style: oblique;
}
/* First level emphasis */
.ML__emph {
  color: #bc2612;
}
/* Second level emphasis */
.ML__emph .ML__emph {
  color: #0c7f99;
}
.ML__highlight {
  color: #007cb2;
  background: #edd1b0;
}
.ML__center {
  text-align: center;
}
.ML__left {
  text-align: left;
}
.ML__right {
  text-align: right;
}
.ML__label_padding {
  padding: 0 0.5em;
}
.ML__frac-line {
  width: 100%;
  min-height: 1px;
}
.ML__frac-line:after {
  content: '';
  display: block;
  margin-top: max(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  /* There's a bug since Chrome 62 where 
      sub-pixel border lines don't draw at some zoom 
      levels (110%, 90%). 
      Setting the min-height used to work around it, but that workaround
      broke in Chrome 84 or so.
      Setting the background (and the min-height) seems to work for now.
      */
  background: currentColor;
  box-sizing: content-box;
  /* Vuetify sets the box-sizing to inherit 
            causes the fraction line to not draw at all sizes (see #26) */
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
  forced-color-adjust: preserve-parent-color;
}
@media (forced-colors: active) {
  .ML__frac-line {
    min-height: 0px;
  }
}
.ML__sqrt {
  display: inline-block;
}
.ML__sqrt-sign {
  display: inline-block;
  position: relative;
}
.ML__sqrt-line {
  display: inline-block;
  height: max(1px, 0.04em);
  width: 100%;
}
.ML__sqrt-line:before {
  content: '';
  display: block;
  margin-top: min(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  background: currentColor;
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
  forced-color-adjust: preserve-parent-color;
}
@media (forced-colors: active) {
  .ML__sqrt-line:after {
    background: white !important;
  }
}
.ML__sqrt-line:after {
  border-bottom-width: 1px;
  content: ' ';
  display: block;
  margin-top: -0.1em;
}
.ML__sqrt-index {
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}
.ML__delim-size1 {
  font-family: KaTeX_Size1;
}
.ML__delim-size2 {
  font-family: KaTeX_Size2;
}
.ML__delim-size3 {
  font-family: KaTeX_Size3;
}
.ML__delim-size4 {
  font-family: KaTeX_Size4;
}
.ML__delim-mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}
.ML__delim-mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}
.ML__accent-body {
  font-family: KaTeX_Main;
}
.ML__accent-combining-char {
  position: relative;
  left: 0.24em;
}
/** The markup for a LaTeX formula, either in an editable mathfield or 
    in a static display.
*/
.ML__latex {
  display: inline-block;
  direction: ltr;
  text-align: left;
  text-indent: 0;
  text-rendering: auto;
  font-family: inherit;
  font-style: normal;
  font-size-adjust: none;
  font-stretch: normal;
  font-variant-caps: normal;
  letter-spacing: normal;
  line-height: 1.2;
  word-wrap: normal;
  word-spacing: normal;
  white-space: nowrap;
  text-shadow: none;
  -webkit-user-select: none;
  user-select: none;
  width: min-content;
  forced-color-adjust: preserve-parent-color;
}
.ML__latex .style-wrap {
  position: relative;
}
.ML__latex .ML__mfrac {
  display: inline-block;
}
.ML__latex .ML__left-right {
  display: inline-block;
}
.ML__latex .ML__vlist-t {
  display: inline-table;
  table-layout: fixed;
  border-collapse: collapse;
}
.ML__latex .ML__vlist-r {
  display: table-row;
}
.ML__latex .ML__vlist {
  display: table-cell;
  vertical-align: bottom;
  position: relative;
}
.ML__latex .ML__vlist > span {
  display: block;
  height: 0;
  position: relative;
}
.ML__latex .ML__vlist > span > span {
  display: inline-block;
}
.ML__latex .ML__vlist > span > .ML__pstrut {
  overflow: hidden;
  width: 0;
}
.ML__latex .ML__vlist-t2 {
  margin-right: -2px;
}
.ML__latex .ML__vlist-s {
  display: table-cell;
  vertical-align: bottom;
  font-size: 1px;
  width: 2px;
  min-width: 2px;
}
.ML__latex .ML__msubsup {
  text-align: left;
}
.ML__latex .ML__negativethinspace {
  display: inline-block;
  margin-left: -0.16667em;
  height: 0.71em;
}
.ML__latex .ML__thinspace {
  display: inline-block;
  width: 0.16667em;
  height: 0.71em;
}
.ML__latex .ML__mediumspace {
  display: inline-block;
  width: 0.22222em;
  height: 0.71em;
}
.ML__latex .ML__thickspace {
  display: inline-block;
  width: 0.27778em;
  height: 0.71em;
}
.ML__latex .ML__enspace {
  display: inline-block;
  width: 0.5em;
  height: 0.71em;
}
.ML__latex .ML__quad {
  display: inline-block;
  width: 1em;
  height: 0.71em;
}
.ML__latex .ML__qquad {
  display: inline-block;
  width: 2em;
  height: 0.71em;
}
.ML__latex .ML__llap,
.ML__latex .ML__rlap {
  width: 0;
  position: relative;
  display: inline-block;
}
.ML__latex .ML__llap > .ML__inner,
.ML__latex .ML__rlap > .ML__inner {
  position: absolute;
}
.ML__latex .ML__llap > .ML__fix,
.ML__latex .ML__rlap > .ML__fix {
  display: inline-block;
}
.ML__latex .ML__llap > .ML__inner {
  right: 0;
}
.ML__latex .ML__rlap > .ML__inner {
  left: 0;
}
.ML__latex .ML__rule {
  display: inline-block;
  border: solid 0;
  position: relative;
  box-sizing: border-box;
}
.ML__latex .overline .overline-line,
.ML__latex .underline .underline-line {
  width: 100%;
}
.ML__latex .overline .overline-line:before,
.ML__latex .underline .underline-line:before {
  content: '';
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  display: block;
}
.ML__latex .overline .overline-line:after,
.ML__latex .underline .underline-line:after {
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  content: '';
  display: block;
  margin-top: -1px;
}
.ML__latex .ML__stretchy {
  display: block;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__latex .ML__stretchy:before,
.ML__latex .ML__stretchy:after {
  content: '';
}
.ML__latex .ML__stretchy svg {
  display: block;
  position: absolute;
  width: 100%;
  height: inherit;
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
}
.ML__latex .slice-1-of-2 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__latex .slice-2-of-2 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__latex .slice-1-of-3 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__latex .slice-2-of-3 {
  display: inline-flex;
  position: absolute;
  left: 25%;
  width: 50%;
  overflow: hidden;
}
.ML__latex .slice-3-of-3 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__latex .slice-1-of-1 {
  display: inline-flex;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__latex .ML__nulldelimiter {
  display: inline-block;
}
.ML__latex .ML__op-group {
  display: inline-block;
}
.ML__latex .ML__op-symbol {
  position: relative;
}
.ML__latex .ML__op-symbol.ML__small-op {
  font-family: KaTeX_Size1;
}
.ML__latex .ML__op-symbol.ML__large-op {
  font-family: KaTeX_Size2;
}
.ML__latex:has(.ML__center_environment),
.ML__latex:has(.ML__multiline_environment),
.ML__latex:has(.ML__align_environment),
.ML__latex:has(.ML__eqnarray_environment),
.ML__latex:has(.ML__gather_environment) {
  width: 100%;
}
.ML__latex .ML__multiline_environment {
  display: inline-flex;
  width: 100%;
}
.ML__latex .ML__center_environment {
  display: inline-flex;
  width: 100%;
  justify-content: center;
}
.ML__latex .ML__align_environment,
.ML__latex .ML__eqnarray_environment,
.ML__latex .ML__gather_environment {
  display: inline-block;
}
.ML__latex .ML__mtable .ML__vertical-separator {
  display: inline-block;
  min-width: 1px;
  box-sizing: border-box;
}
.ML__latex .ML__mtable .ML__arraycolsep {
  display: inline-block;
}
.ML__latex .ML__mtable .col-align-m > .ML__vlist-t {
  text-align: center;
}
.ML__latex .ML__mtable .col-align-c > .ML__vlist-t {
  text-align: center;
}
.ML__latex .ML__mtable .col-align-l > .ML__vlist-t {
  text-align: left;
}
.ML__latex .ML__mtable .col-align-r > .ML__vlist-t {
  text-align: right;
}
[data-href] {
  cursor: pointer;
}
.ML__error {
  display: inline-block;
  background-image: radial-gradient(ellipse at center, hsl(341, 100%, 40%), rgba(0, 0, 0, 0) 70%);
  background-color: hsla(341, 100%, 40%, 0.1);
  background-repeat: repeat-x;
  background-size: 3px 3px;
  padding-bottom: 3px;
  background-position: 0 100%;
}
.ML__error > .ML__error {
  background: transparent;
  padding: 0;
}
.ML__placeholder {
  color: var(--_placeholder-color);
  opacity: var(--_placeholder-opacity);
  padding-left: 0.4ex;
  padding-right: 0.4ex;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
}
.ML__notation {
  position: absolute;
  box-sizing: border-box;
  line-height: 0;
}
/* This class is used to implement the \`\\mathtip\` and \`\\texttip\` commands
   For UI elements, see \`[data-ML__tooltip]\`
*/
.ML__tooltip-container {
  position: relative;
  transform: scale(0);
}
.ML__tooltip-container .ML__tooltip-content {
  position: fixed;
  display: inline-table;
  visibility: hidden;
  z-index: 2;
  width: max-content;
  max-width: 400px;
  padding: 12px 12px;
  border: var(--tooltip-border);
  border-radius: var(--tooltip-border-radius);
  background: var(--tooltip-background-color);
  --_selection-color: var(--tooltip-color);
  color: var(--tooltip-color);
  box-shadow: var(--tooltip-box-shadow);
  opacity: 0;
  transition: opacity 0.15s cubic-bezier(0.4, 0, 1, 1);
}
.ML__tooltip-container .ML__tooltip-content .ML__text {
  white-space: normal;
}
.ML__tooltip-container .ML__tooltip-content .ML__base {
  display: contents;
}
.ML__tooltip-container:hover .ML__tooltip-content {
  visibility: visible;
  opacity: 1;
  font-size: 0.75em;
  transform: scale(1) translate(0, 3em);
}
`,ym=`#mathlive-environment-popover.is-visible {
  visibility: visible;
}
#mathlive-environment-popover {
  --_environment-panel-height: var(--environment-panel-height, 70px);
  --_accent-color: var(--accent-color, #aaa);
  --_background: var(--environment-panel-background, #fff);
  --_button-background: var(--environment-panel-button-background, white);
  --_button-background-hover: var(--environment-panel-button-background-hover, #f5f5f7);
  --_button-background-active: var(--environment-panel-button-background-active, #f5f5f7);
  --_button-text: var(--environment-panel-button-text, #e3e4e8);
  position: absolute;
  width: calc(var(--_environment-panel-height) * 2);
  height: var(--_environment-panel-height);
  border-radius: 4px;
  border: 1.5px solid var(--_accent-color);
  background-color: var(--_background);
  box-shadow: 0 0 30px 0 var(--environment-shadow, rgba(0, 0, 0, 0.4));
  pointer-events: all;
  visibility: hidden;
}
#mathlive-environment-popover .MLEP__array-buttons {
  height: calc(var(--_environment-panel-height) * 5/4);
  width: calc(var(--_environment-panel-height) * 5/4);
  margin-left: calc(0px - var(--_environment-panel-height) * 0.16);
  margin-top: calc(0px - var(--_environment-panel-height) * 0.19);
}
#mathlive-environment-popover .MLEP__array-buttons .font {
  fill: white;
}
#mathlive-environment-popover .MLEP__array-buttons circle {
  fill: #7f7f7f;
  transition: fill 300ms;
}
#mathlive-environment-popover .MLEP__array-buttons .MLEP__array-insert-background {
  fill-opacity: 1;
  fill: var(--_background);
  stroke: var(--_accent-color);
  stroke-width: 3px;
}
#mathlive-environment-popover .MLEP__array-buttons line {
  stroke: var(--_accent-color);
  stroke-opacity: 0;
  stroke-width: 40;
  pointer-events: none;
  transition: stroke-opacity 300ms;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover circle {
  fill: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover line {
  stroke-opacity: 1;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls {
  height: 100%;
  width: 50%;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options {
  width: var(--_environment-panel-height);
  height: var(--_environment-panel-height);
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  justify-content: space-around;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg {
  pointer-events: all;
  margin-top: 2px;
  width: calc(var(--_environment-panel-height) / 3 * 28 / 24);
  height: calc(var(--_environment-panel-height) / 3 - 2px);
  border-radius: calc(var(--_environment-panel-height) / 25);
  background-color: var(--_button-background);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg:hover {
  background-color: var(--_button-background-hover);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg line {
  stroke: var(--_button-text);
  stroke-width: 2;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg rect,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path {
  fill-opacity: 0;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active {
  pointer-events: none;
  background-color: var(--_button-background-active);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active line {
  stroke: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active circle {
  fill: var(--_accent-color);
}
`,xm=`/* The element that display info while in latex mode */
#mathlive-suggestion-popover {
  --_suggestion-zindex: var(--suggestion-zindex, 100);
  background-color: rgba(97, 97, 97);
  color: #fff;
  text-align: center;
  border-radius: 8px;
  position: fixed;
  z-index: var(--_suggestion-zindex);
  display: none;
  flex-direction: column;
  justify-content: center;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
}
#mathlive-suggestion-popover.top-tip::after {
  content: '';
  position: absolute;
  top: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-bottom: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.bottom-tip::after {
  content: '';
  position: absolute;
  bottom: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-top: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.is-animated {
  transition: all 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  animation: ML__fade-in cubic-bezier(0, 0, 0.2, 1) 0.15s;
}
#mathlive-suggestion-popover.is-visible {
  display: flex;
}
@keyframes ML__fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
/* The wrapper class for the entire content of the popover panel */
#mathlive-suggestion-popover ul {
  display: flex;
  flex-flow: column;
  list-style: none;
  margin: 0;
  padding: 0;
  align-items: flex-start;
  max-height: 400px;
  overflow-y: auto;
}
#mathlive-suggestion-popover li {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  margin: 8px;
  padding: 8px;
  width: calc(100% - 16px - 16px);
  column-gap: 1em;
  border-radius: 8px;
  cursor: pointer;
  /* Since the content can be clicked on, provide feedback on hover */
}
#mathlive-suggestion-popover li a {
  color: #5ea6fd;
  padding-top: 0.3em;
  margin-top: 0.4em;
  display: block;
}
#mathlive-suggestion-popover li a:hover {
  color: #5ea6fd;
  text-decoration: underline;
}
#mathlive-suggestion-popover li:hover,
#mathlive-suggestion-popover li.is-pressed,
#mathlive-suggestion-popover li.is-active {
  background: rgba(255, 255, 255, 0.1);
}
/* The command inside a popover (inside a #mathlive-suggestion-popover) */
.ML__popover__command {
  font-size: 1.6rem;
  font-family: KaTeX_Main;
}
.ML__popover__current {
  background: #5ea6fd;
  color: #fff;
}
.ML__popover__latex {
  font-family: 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  align-self: center;
}
/* The keyboard shortcuts for a symbol as displayed in the popover */
.ML__popover__keybinding {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 0.8em;
  opacity: 0.7;
}
/* Style for the character that joins the modifiers of a keyboard shortcut 
(usually a "+" sign)*/
.ML__shortcut-join {
  opacity: 0.5;
}
`,vm=`/* The element that displays the keys as the user type them */
#mathlive-keystroke-caption-panel {
  visibility: hidden;
  /*min-width: 160px;*/
  /*background-color: rgba(97, 97, 200, .95);*/
  background: var(--secondary, hsl(var(--_hue), 19%, 26%));
  border-color: var(--secondary-border, hsl(0, 0%, 91%));
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
  text-align: center;
  border-radius: 6px;
  padding: 16px;
  position: absolute;
  z-index: 1;
  display: flex;
  flex-direction: row-reverse;
  justify-content: center;
  --keystroke: white;
  --on-keystroke: #555;
  --keystroke-border: #f7f7f7;
}
@media (prefers-color-scheme: dark) {
  body:not([theme='light']) #mathlive-keystroke-caption-panel {
    --keystroke: hsl(var(--_hue), 50%, 30%);
    --on-keystroke: hsl(0, 0%, 98%);
    --keystroke-border: hsl(var(--_hue), 50%, 25%);
  }
}
body[theme='dark'] #mathlive-keystroke-caption-panel {
  --keystroke: hsl(var(--_hue), 50%, 30%);
  --on-keystroke: hsl(0, 0%, 98%);
  --keystroke-border: hsl(var(--_hue), 50%, 25%);
}
#mathlive-keystroke-caption-panel > span {
  min-width: 14px;
  /*height: 8px;*/
  margin: 0 8px 0 0;
  padding: 4px;
  background-color: var(--keystroke);
  color: var(--on-keystroke);
  fill: currentColor;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 1em;
  border-radius: 6px;
  border: 2px solid var(--keystroke-border);
  /*box-shadow: 0 7px 14px rgba(0,0,0,0.25), 0 5px 5px rgba(0,0,0,0.22);*/
}
`,_m=`.ML__keyboard {
  --_keyboard-height: 0;
  --_keyboard-zindex: var(--keyboard-zindex, 105);
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_padding-horizontal: var(--keyboard-padding-horizontal, 0px);
  --_padding-top: var(--keyboard-padding-top, 5px);
  --_padding-bottom: var(--keyboard-padding-bottom, 0px);
  --_row-padding-left: var(--keyboard-row-padding-left, 0px);
  --_row-padding-right: var(--keyboard-row-padding-right, 0px);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-text-active: var(--keyboard-toolbar-text-active, var(--_accent-color));
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_toolbar-font-size: var(--keyboard-toolbar-font-size, '135%');
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, #f0f0f0);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-primary-background: var(--keycap-primary-background, var(--_accent-color));
  --_keycap-primary-text: var(--keycap-primary-text, #ddd);
  --_keycap-primary-background-hover: var(--keycap-primary-background-hover, #0d80f2);
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_keycap-height: var(--keycap-height, 60px);
  /* Keycap width (incl. margin) */
  --_keycap-max-width: var(--keycap-max-width, 100px);
  --_keycap-gap: var(--keycap-gap, 8px);
  --_keycap-font-size: var(--keycap-font-size, clamp(16px, 4cqw, 24px));
  --_keycap-small-font-size: var(--keycap-small-font-size, calc(var(--keycap-font-size) * 0.8));
  --_keycap-extra-small-font-size: var(--keycap-extra-small-font-size, calc(var(--keycap-font-size) / 1.42));
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-text, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
  --_variant-keycap-length: var(--variant-keycap-length, 70px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 30px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 12px);
  --_keycap-shift-font-size: var(--keycap-shift-font-size, 16px);
  --_keycap-shift-color: var(--keycap-shift-color, var(--_accent-color));
  --_box-placeholder-color: var(--box-placeholder-color, var(--_accent-color));
  --_box-placeholder-pressed-color: var(--box-placeholder-pressed-color, var(--keycap-text-pressed));
  --_keycap-glyph-size: var(--keycap-glyph-size, 20px);
  --_keycap-glyph-size-lg: var(--keycap-glyph-size-lg, 24px);
  --_keycap-glyph-size-xl: var(--keycap-glyph-size-xl, 50px);
}
.is-math-mode .MLK__rows .if-text-mode,
.is-text-mode .MLK__rows .if-math-mode {
  display: none;
}
.if-can-undo,
.if-can-redo,
.if-can-copy,
.if-can-cut,
.if-can-paste {
  opacity: 0.4;
  pointer-events: none;
}
.can-undo .if-can-undo,
.can-redo .if-can-redo,
.can-copy .if-can-copy,
.can-cut .if-can-cut,
.can-paste .if-can-paste {
  opacity: 1;
  pointer-events: all;
}
body > .ML__keyboard {
  position: fixed;
  --_padding-bottom: calc(var(--keyboard-padding-bottom, 0px) + env(safe-area-inset-bottom, 0));
}
body > .ML__keyboard.is-visible > .MLK__backdrop {
  box-shadow: 0 -5px 6px rgba(0, 0, 0, 0.08);
  border-top: 1px solid var(--_border);
}
body > .ML__keyboard.backdrop-is-transparent.is-visible > .MLK__backdrop {
  box-shadow: none;
  border: none;
}
body > .ML__keyboard.is-visible.animate > .MLK__backdrop {
  transition: 0.28s cubic-bezier(0, 0, 0.2, 1);
  transition-property: transform, opacity;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__keyboard {
  position: relative;
  overflow: hidden;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  z-index: var(--_keyboard-zindex);
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  opacity: 1;
  transform: none;
  pointer-events: none;
}
.ML__keyboard :where(div) {
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  transform: none;
}
.MLK__backdrop {
  position: absolute;
  bottom: calc(-1 * var(--_keyboard-height));
  width: 100%;
  height: var(--_keyboard-height);
  box-sizing: border-box;
  padding-top: var(--_padding-top);
  padding-bottom: var(--_padding-bottom);
  padding-left: var(--_padding-horizontal);
  padding-right: var(--_padding-horizontal);
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0);
  background: var(--_background);
}
.backdrop-is-transparent .MLK__backdrop {
  background: transparent;
}
/* If a custom layout has a custom container/backdrop
  (backdrop-is-transparent), make sure to let pointer event go through. */
.backdrop-is-transparent .MLK__plate {
  background: transparent;
  pointer-events: none;
}
/* If a custom layout has a custom container/backdrop, make sure to 
   allow pointer events on it. */
.backdrop-is-transparent .MLK__layer > div > div {
  pointer-events: all;
}
.ML__keyboard.is-visible > .MLK__backdrop {
  transform: translate(0, calc(-1 * var(--_keyboard-height)));
  opacity: 1;
  visibility: visible;
}
.caps-lock-indicator {
  display: none;
  width: 8px;
  height: 8px;
  background: #0cbc0c;
  box-shadow: inset 0 0 4px 0 #13ca13, 0 0 4px 0 #a9ef48;
  border-radius: 8px;
  right: 8px;
  top: 8px;
  position: absolute;
}
.ML__keyboard.is-caps-lock .caps-lock-indicator {
  display: block;
}
.ML__keyboard.is-caps-lock .shift {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
}
.MLK__plate {
  position: absolute;
  top: var(--_padding-top);
  left: var(--_padding-horizontal);
  width: calc(100% - 2 * var(--_padding-horizontal));
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  container-type: inline-size;
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
  pointer-events: all;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 16px;
  /* Size of toolbar labels */
  font-weight: 400;
  text-shadow: none;
}
.ML__box-placeholder {
  color: var(--_box-placeholder-color);
}
.MLK__tex {
  font-family: KaTeX_Main, KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__tex-math {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
  font-style: italic;
}
.MLK__layer {
  display: none;
  outline: none;
}
.MLK__layer.is-visible {
  display: flex;
  flex-flow: column;
}
/* Keyboard layouts are made or rows of keys... */
.MLK__rows {
  --_keycap-width: var(--keycap-width, min(var(--_keycap-max-width), 10cqw));
  display: flex;
  flex-flow: column;
  align-items: center;
  border-collapse: separate;
  clear: both;
  border: 0;
  margin: 0;
  margin-bottom: var(--_keycap-gap);
  gap: var(--_keycap-gap);
  /* If the styling include, e.g., some shadows, they will be
  cut off by the overflow. In that case, set the padding to 
  compensate. */
  padding-left: var(--_row-padding-left);
  padding-right: var(--_row-padding-right);
  overflow: visible;
  touch-action: none;
}
.MLK__rows > .MLK__row {
  display: flex;
  flex-flow: row;
  justify-content: center;
  width: 100%;
  gap: var(--_keycap-gap);
  margin: 0;
  padding: 0;
  /* For the alignment of the text on some modifiers (e.g. shift) */
  /* Extra spacing between two adjacent keys */
}
.MLK__rows > .MLK__row .tex {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .tex-math {
  font-family: KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .big-op {
  font-size: calc(1.25 * var(--_keycap-font-size));
}
.MLK__rows > .MLK__row .small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__rows > .MLK__row .bottom {
  justify-content: flex-end;
}
.MLK__rows > .MLK__row .left {
  align-items: flex-start;
  padding-left: 12px;
}
.MLK__rows > .MLK__row .right {
  align-items: flex-end;
  padding-right: 12px;
}
.MLK__rows > .MLK__row .w0 {
  width: 0;
}
.MLK__rows > .MLK__row .w5 {
  width: calc(0.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w15 {
  width: calc(1.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w20 {
  width: calc(2 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w40 {
  width: calc(4 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w50 {
  width: calc(5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .MLK__keycap.w50 {
  font-size: 80%;
  padding-top: 10px;
  font-weight: 100;
}
.MLK__rows > .MLK__row .separator {
  background: transparent;
  border: none;
  pointer-events: none;
}
.MLK__rows > .MLK__row .horizontal-rule {
  height: 6px;
  margin-top: 3px;
  margin-bottom: 0;
  width: 100%;
  border-radius: 0;
  border-top: var(--_horizontal-rule);
}
.MLK__rows > .MLK__row .ghost {
  background: var(--_toolbar-background);
  border: none;
  color: var(--_toolbar-text);
}
.MLK__rows > .MLK__row .ghost:hover {
  background: var(--_toolbar-background-hover);
}
.MLK__rows > .MLK__row .bigfnbutton {
  font-size: var(--_keycap-extra-small-font-size);
}
.MLK__rows > .MLK__row .shift,
.MLK__rows > .MLK__row .action {
  color: var(--_keycap-secondary-text);
  background: var(--_keycap-secondary-background);
  border-color: var(--_keycap-secondary-border);
  border-bottom-color: var(--_keycap-secondary-border-bottom);
  line-height: 0.8;
  font-size: min(1rem, var(--_keycap-small-font-size));
  font-weight: 600;
  padding: 8px 12px 8px 12px;
}
.MLK__rows > .MLK__row .shift:hover,
.MLK__rows > .MLK__row .action:hover {
  background: var(--_keycap-secondary-background-hover);
}
.MLK__rows > .MLK__row .action.primary {
  background: var(--_keycap-primary-background);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .action.primary:hover {
  background: var(--_keycap-primary-background-hover);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .shift.selected,
.MLK__rows > .MLK__row .action.selected {
  color: var(--_toolbar-text-active);
}
.MLK__rows > .MLK__row .shift.selected.is-pressed,
.MLK__rows > .MLK__row .action.selected.is-pressed,
.MLK__rows > .MLK__row .shift.selected.is-active,
.MLK__rows > .MLK__row .action.selected.is-active {
  color: white;
}
.MLK__rows > .MLK__row .warning {
  background: #cd0030;
  color: white;
}
.MLK__rows > .MLK__row .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
/** A regular keycap
 * Use the :where() pseudo-class to give it a very low specifity, 
 * so that it can be overriden by custom style.
 */
:where(.MLK__rows > .MLK__row div) {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-evenly;
  width: calc(var(--_keycap-width) - var(--_keycap-gap));
  height: var(--_keycap-height);
  box-sizing: border-box;
  padding: 0;
  vertical-align: top;
  text-align: center;
  float: left;
  color: var(--_keycap-text);
  fill: currentColor;
  font-size: var(--_keycap-font-size);
  background: var(--_keycap-background);
  border: 1px solid var(--_keycap-border);
  border-bottom-color: var(--_keycap-border-bottom);
  border-radius: 6px;
  cursor: pointer;
  touch-action: none;
  /* Keys with a variants panel */
  position: relative;
  overflow: hidden;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
:where(.MLK__rows > .MLK__row div):hover {
  overflow: visible;
  background: var(--_keycap-background-hover);
  color: var(--_keycap-text-hover);
}
:where(.MLK__rows > .MLK__row div) .ML__latex {
  pointer-events: none;
  touch-action: none;
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph {
  margin: 8px 0;
  width: var(--_keycap-glyph-size);
  height: var(--_keycap-glyph-size);
  min-height: var(--_keycap-glyph-size);
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph-lg {
  margin: 8px 0;
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
:where(.MLK__rows > .MLK__row div).MLK__tex-math {
  font-size: 25px;
}
:where(.MLK__rows > .MLK__row div).is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  z-index: calc(var(--_keyboard-zindex) - 5);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active aside,
:where(.MLK__rows > .MLK__row div).action.is-active aside,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed aside,
:where(.MLK__rows > .MLK__row div).action.is-pressed aside {
  display: none;
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-pressed .MLK__shift {
  display: none;
}
:where(.MLK__rows > .MLK__row div).shift.is-pressed,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
}
:where(.MLK__rows > .MLK__row div).shift.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div) small {
  color: var(--_keycap-secondary-text);
}
:where(.MLK__rows > .MLK__row div) aside {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 10px;
  line-height: 10px;
  color: var(--_keycap-secondary-text);
}
/* Add an attribute 'data-tooltip' to display a tooltip on hover.
Note there are a different set of tooltip rules for the keyboard toggle
(it's in a different CSS tree) */
.ML__keyboard [data-tooltip] {
  position: relative;
}
.ML__keyboard [data-tooltip]::after {
  position: absolute;
  display: inline-table;
  content: attr(data-tooltip);
  top: inherit;
  bottom: 100%;
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  background: #616161;
  color: #fff;
  text-align: center;
  z-index: 2;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  border-radius: 2px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-weight: 400;
  font-size: 12px;
  transition: all 0.15s cubic-bezier(0.4, 0, 1, 1) 1s;
  opacity: 0;
  transform: scale(0.5);
}
.ML__keyboard [data-tooltip]:hover {
  position: relative;
}
.ML__keyboard [data-tooltip]:hover::after {
  opacity: 1;
  transform: scale(1);
}
.MLK__toolbar {
  align-self: center;
  display: flex;
  flex-flow: row;
  justify-content: space-between;
  width: 100%;
  max-width: 996px;
  min-height: 32px;
  /* Icons for undo/redo, etc. */
}
.MLK__toolbar svg {
  height: 20px;
  width: 20px;
}
.MLK__toolbar > .left {
  position: relative;
  display: flex;
  justify-content: flex-start;
  flex-flow: row;
}
.MLK__toolbar > .right {
  display: flex;
  justify-content: flex-end;
  flex-flow: row;
}
.MLK__toolbar > div > div {
  /* "button" in the toolbar */
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--_toolbar-text);
  fill: currentColor;
  background: var(--_toolbar-background);
  font-size: var(--_toolbar-font-size);
  padding: 4px 15px;
  cursor: pointer;
  width: max-content;
  min-width: 42px;
  min-height: 34px;
  border: none;
  padding-left: 10px;
  padding-right: 10px;
  padding-bottom: 8px;
  padding-top: 8px;
  margin-top: 0;
  margin-bottom: 4px;
  margin-left: 4px;
  margin-right: 4px;
  border-radius: 8px;
  box-shadow: none;
  border-bottom: 2px solid transparent;
}
.MLK__toolbar > div > div:not(.disabled):not(.selected):hover {
  background: var(--_toolbar-background-hover);
}
.MLK__toolbar > div > div.disabled svg,
.MLK__toolbar > div > div.disabled:hover svg,
.MLK__toolbar > div > div.disabled.is-pressed svg {
  color: var(--_toolbar-text);
  opacity: 0.2;
}
.MLK__toolbar > div > div:hover,
.MLK__toolbar > div > div:active,
.MLK__toolbar > div > div.is-pressed,
.MLK__toolbar > div > div.is-active {
  color: var(--_toolbar-text-active);
}
.MLK__toolbar > div > div.selected {
  color: var(--_toolbar-text-active);
  background: var(--_toolbar-background-selected);
  border-radius: 0;
  border-bottom-color: var(--_toolbar-text-active);
  padding-bottom: 4px;
  margin-bottom: 8px;
}
/* This is the element that displays variants on press+hold */
.MLK__variant-panel {
  visibility: hidden;
  position: fixed;
  display: flex;
  flex-flow: row wrap-reverse;
  justify-content: center;
  align-content: center;
  margin: 0;
  padding: 0;
  bottom: auto;
  top: 0;
  box-sizing: content-box;
  transform: none;
  z-index: calc(var(--_keyboard-zindex) + 1);
  touch-action: none;
  max-width: 350px;
  background: var(--_variant-panel-background);
  text-align: center;
  border-radius: 6px;
  padding: 6px;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
  transition: none;
}
.MLK__variant-panel.is-visible {
  visibility: visible;
}
.MLK__variant-panel.compact {
  --_variant-keycap-length: var(--variant-keycap-length, 50px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 10px);
}
.MLK__variant-panel .item {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: center;
  font-size: var(--_variant-keycap-font-size);
  height: var(--_variant-keycap-length);
  width: var(--_variant-keycap-length);
  margin: 0;
  box-sizing: border-box;
  border-radius: 5px;
  border: 1px solid transparent;
  background: transparent;
  pointer-events: all;
  cursor: pointer;
  color: var(--_variant-keycap-text);
  fill: currentColor;
}
@media (max-height: 412px) {
  .MLK__variant-panel .item {
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
.MLK__variant-panel .item .ML__latex {
  pointer-events: none;
}
.MLK__variant-panel .item:hover {
  color: var(--_keycap-text-hover);
}
.MLK__variant-panel .item.is-active {
  background: var(--_variant-keycap-background-active);
  color: var(--_variant-keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.is-pressed {
  background: var(--_variant-keycap-background-pressed);
  color: var(--_variant-keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__variant-panel .item.swatch-button {
  box-sizing: border-box;
  background: #fbfbfb;
}
.MLK__variant-panel .item.swatch-button > span {
  display: inline-block;
  margin: 6px;
  width: calc(100% - 12px);
  height: calc(100% - 12px);
  border-radius: 50%;
}
.MLK__variant-panel .item.swatch-button:hover {
  background: #f0f0f0;
}
.MLK__variant-panel .item.swatch-button:hover > span {
  border-radius: 2px;
}
.MLK__variant-panel .item.box > div,
.MLK__variant-panel .item.box > span {
  border: 1px dashed rgba(0, 0, 0, 0.24);
}
.MLK__variant-panel .item .warning {
  min-height: 60px;
  min-width: 60px;
  background: #cd0030;
  color: white;
  padding: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 5px;
}
.MLK__variant-panel .item .warning.is-pressed,
.MLK__variant-panel .item .warning.is-active {
  background: red;
}
.MLK__variant-panel .item .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-xl);
  height: var(--_keycap-glyph-size-xl);
}
.MLK__variant-panel .item aside {
  font-size: var(--_variant-keycap-aside-font-size);
  line-height: 12px;
  opacity: 0.78;
  padding-top: 2px;
  width: 100%;
  text-align: center;
  text-wrap: wrap;
}
.MLK__keycap {
  position: relative;
}
.MLK__shift {
  display: block;
  position: absolute;
  right: 4px;
  top: 4px;
  font-size: var(--_keycap-shift-font-size);
  color: var(--_keycap-shift-color);
}
.hide-shift .MLK__shift {
  display: none;
}
@media (max-width: 414px) {
  .MLK__variant-panel {
    max-width: 350px;
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
/* @xs breakpoint: iPhone 5 */
@container (max-width: 414px) {
  .MLK__rows {
    --_keycap-gap: max(var(--_keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--_keycap-height), 42px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width)), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    font-size: 100%;
    margin-left: 2px;
    margin-right: 2px;
  }
  .MLK__rows .shift,
  .MLK__rows .action {
    font-size: 65%;
  }
  .MLK__rows .warning svg.svg-glyph {
    width: 14px;
    height: 14px;
    min-height: 14px;
  }
}
@container (max-width: 744px) {
  .MLK__rows {
    --_keycap-gap: max(var(--keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--keycap-height, 52px), 52px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    padding-left: 0;
    padding-right: 0;
  }
  .MLK__tooltip::after {
    padding: 8px 16px;
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.fnbutton {
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.bigfnbutton {
    font-size: calc(var(--_keycap-extra-small-font-size) / 1.55);
  }
  .MLK__rows > .MLK__row > div.small {
    font-size: 13px;
  }
  .MLK__rows > .MLK__row > div > aside {
    display: none;
  }
  .MLK__shift {
    display: none;
  }
}
/* Medium breakpoint: larger phones */
@container (max-width: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@media (max-height: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@container (max-width: 1444px) {
  .MLK__rows .if-wide {
    display: none;
  }
}
@media (prefers-color-scheme: dark) {
  .ML__keyboard {
    --_accent-color: var(--keyboard-accent-color, #0b5c9c);
    --_background: var(--keyboard-background, #151515);
    --_border: var(--keyboard-border, transparent);
    --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
    --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
    --keyboard-toolbar-background-hover: #303030;
    --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
    --_keycap-background: var(--keycap-background, #1f2022);
    --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
    --_keycap-border: var(--_keycap-border, transparent);
    --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
    --_keycap-text: var(--keycap-text, #e3e4e8);
    --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
    --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
    --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
    --keycap-secondary-border: transparent;
    --keycap-secondary-border-bottom: transparent;
    --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
    --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
    --_variant-panel-background: var(--variant-panel-background, #303030);
    --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
  }
}
/* Same as the media query, but with a class */
[theme='dark'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0b5c9c);
  --_background: var(--keyboard-background, #151515);
  --_border: var(--keyboard-border, transparent);
  --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
  --keyboard-toolbar-background-hover: #303030;
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
  --_keycap-background: var(--keycap-background, #1f2022);
  --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
  --_keycap-border: var(--_keycap-border, transparent);
  --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
  --_keycap-text: var(--keycap-text, #e3e4e8);
  --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
  --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
  --keycap-secondary-border: transparent;
  --keycap-secondary-border-bottom: transparent;
  --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
  --_variant-panel-background: var(--variant-panel-background, #303030);
  --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
}
[theme='light'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, white);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--_keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--_keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-textvar, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
}
`,Mm=`:host {
  --primary-color: #5898ff;
  --primary-color-dimmed: #c0c0f0;
  --primary-color-dark: var(--blue-500);
  --primary-color-light: var(--blue-100);
  --primary-color-reverse: #ffffff;
  --secondary-color: #ff8a65;
  --secondary-color-dimmed: #f0d5c5;
  --secondary-color-dark: var(--orange-500);
  --secondary-color-light: var(--orange-100);
  --secondary-color-reverse: #ffffff;
  --link-color: #5898ff;
  --link-color-dimmed: #c5c5c5;
  --link-color-dark: #121212;
  --link-color-light: #e2e2e2;
  --link-color-reverse: #ffffff;
  --semantic-blue: var(--blue-700);
  --semantic-red: var(--red-400);
  --semantic-orange: var(--orange-400);
  --semantic-green: var(--green-700);
  --neutral-100: #f5f5f5;
  --neutral-200: #eeeeee;
  --neutral-300: #e0e0e0;
  --neutral-400: #bdbdbd;
  --neutral-500: #9e9e9e;
  --neutral-600: #757575;
  --neutral-700: #616161;
  --neutral-800: #424242;
  --neutral-900: #212121;
  --red-25: #fff8f7;
  --red-50: #fff1ef;
  --red-100: #ffeae6;
  --red-200: #ffcac1;
  --red-300: #ffa495;
  --red-400: #ff7865;
  --red-500: #f21c0d;
  --red-600: #e50018;
  --red-700: #d30024;
  --red-800: #bd002c;
  --red-900: #a1002f;
  --orange-25: #fffbf8;
  --orange-50: #fff7f1;
  --orange-100: #fff3ea;
  --orange-200: #ffe1c9;
  --orange-300: #ffcca2;
  --orange-400: #ffb677;
  --orange-500: #fe9310;
  --orange-600: #f58700;
  --orange-700: #ea7c00;
  --orange-800: #dc6d00;
  --orange-900: #ca5b00;
  --brown-25: #fff8ef;
  --brown-50: #fff1df;
  --brown-100: #ffe9ce;
  --brown-200: #ebcca6;
  --brown-300: #cdaf8a;
  --brown-400: #af936f;
  --brown-500: #856a47;
  --brown-600: #7f5e34;
  --brown-700: #78511f;
  --brown-800: #6e4200;
  --brown-900: #593200;
  --yellow-25: #fffdf9;
  --yellow-50: #fffcf2;
  --yellow-100: #fffaec;
  --yellow-200: #fff2ce;
  --yellow-300: #ffe8ab;
  --yellow-400: #ffdf85;
  --yellow-500: #ffcf33;
  --yellow-600: #f1c000;
  --yellow-700: #dfb200;
  --yellow-800: #c9a000;
  --yellow-900: #ad8a00;
  --lime-25: #f4ffee;
  --lime-50: #e9ffdd;
  --lime-100: #ddffca;
  --lime-200: #a8fb6f;
  --lime-300: #94e659;
  --lime-400: #80d142;
  --lime-500: #63b215;
  --lime-600: #45a000;
  --lime-700: #268e00;
  --lime-800: #007417;
  --lime-900: #005321;
  --green-25: #f5fff5;
  --green-50: #ebffea;
  --green-100: #e0ffdf;
  --green-200: #a7ffa7;
  --green-300: #5afa65;
  --green-400: #45e953;
  --green-500: #17cf36;
  --green-600: #00b944;
  --green-700: #00a34a;
  --green-800: #008749;
  --green-900: #00653e;
  --teal-25: #f3ffff;
  --teal-50: #e6fffe;
  --teal-100: #d9fffe;
  --teal-200: #8dfffe;
  --teal-300: #57f4f4;
  --teal-400: #43e5e5;
  --teal-500: #17cfcf;
  --teal-600: #00c2c0;
  --teal-700: #00b5b1;
  --teal-800: #00a49e;
  --teal-900: #009087;
  --cyan-25: #f7fcff;
  --cyan-50: #eff8ff;
  --cyan-100: #e7f5ff;
  --cyan-200: #c2e6ff;
  --cyan-300: #95d5ff;
  --cyan-400: #61c4ff;
  --cyan-500: #13a7ec;
  --cyan-600: #069eda;
  --cyan-700: #0095c9;
  --cyan-800: #0088b2;
  --cyan-900: #0a7897;
  --blue-25: #f7faff;
  --blue-50: #eef5ff;
  --blue-100: #e5f1ff;
  --blue-200: #bfdbff;
  --blue-300: #92c2ff;
  --blue-400: #63a8ff;
  --blue-500: #0d80f2;
  --blue-600: #0077db;
  --blue-700: #006dc4;
  --blue-800: #0060a7;
  --blue-900: #005086;
  --indigo-25: #f8f7ff;
  --indigo-50: #f1efff;
  --indigo-100: #eae7ff;
  --indigo-200: #ccc3ff;
  --indigo-300: #ac99ff;
  --indigo-400: #916aff;
  --indigo-500: #63c;
  --indigo-600: #5a21b2;
  --indigo-700: #4e0b99;
  --indigo-800: #3b0071;
  --indigo-900: #220040;
  --purple-25: #fbf7ff;
  --purple-50: #f8f0ff;
  --purple-100: #f4e8ff;
  --purple-200: #e4c4ff;
  --purple-300: #d49aff;
  --purple-400: #c36aff;
  --purple-500: #a219e6;
  --purple-600: #9000c4;
  --purple-700: #7c009f;
  --purple-800: #600073;
  --purple-900: #3d0043;
  --magenta-25: #fff8fb;
  --magenta-50: #fff2f6;
  --magenta-100: #ffebf2;
  --magenta-200: #ffcddf;
  --magenta-300: #ffa8cb;
  --magenta-400: #ff7fb7;
  --magenta-500: #eb4799;
  --magenta-600: #da3689;
  --magenta-700: #c82179;
  --magenta-800: #b00065;
  --magenta-900: #8a004c;
}
@media (prefers-color-scheme: dark) {
  :host {
    --semantic-blue: var(--blue-700);
    --semantic-red: var(--red-400);
    --semantic-orange: var(--orange-400);
    --semantic-green: var(--green-700);
    --semantic-bg-blue: var(--blue-25);
    --semantic-bg-red: var(--red-25);
    --semantic-bg-orange: var(--orange-25);
    --semantic-bg-green: var(--green-25);
    --neutral-100: #121212;
    --neutral-200: #424242;
    --neutral-300: #616161;
    --neutral-400: #757575;
    --neutral-500: #9e9e9e;
    --neutral-600: #bdbdbd;
    --neutral-700: #e0e0e0;
    --neutral-800: #eeeeee;
    --neutral-900: #f5f5f5;
  }
}
:host([theme='dark']) {
  --semantic-blue: var(--blue-700);
  --semantic-red: var(--red-400);
  --semantic-orange: var(--orange-400);
  --semantic-green: var(--green-700);
  --semantic-bg-blue: var(--blue-25);
  --semantic-bg-red: var(--red-25);
  --semantic-bg-orange: var(--orange-25);
  --semantic-bg-green: var(--green-25);
  --neutral-100: #121212;
  --neutral-200: #424242;
  --neutral-300: #616161;
  --neutral-400: #757575;
  --neutral-500: #9e9e9e;
  --neutral-600: #bdbdbd;
  --neutral-700: #e0e0e0;
  --neutral-800: #eeeeee;
  --neutral-900: #f5f5f5;
}
/* @media (prefers-color-scheme: dark) {
  :host {
      --label-color: #fff;
      --active-label-color: #000;
      --menu-bg: #525252;
      --active-bg: #5898ff;
      --active-bg-dimmed: #5c5c5c;
  }
} */
:host {
  --ui-font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  --ui-font-size: 14px;
  --ui-line-height: 1.5;
  --ui-letter-spacing: 0.007em;
  --mono-font-family: 'Berkeley Mono', 'JetBrains Mono', 'IBM Plex Mono', 'Source Code Pro', Menlo, Monaco, 'Courier New', monospace;
  --ui-layer-1: var(--neutral-100);
  --ui-layer-2: var(--neutral-200);
  --ui-layer-3: var(--neutral-300);
  --ui-layer-4: var(--neutral-400);
  --ui-layer-5: var(--neutral-500);
  --ui-layer-6: var(--neutral-600);
  --ui-border-color: var(--primary-color);
  --ui-border-radius: 4px;
  --ui-text: var(--neutral-900);
  --ui-text-secondary: var(--neutral-700);
  --ui-text-placeholder: var(--neutral-500);
  --ui-text-muted: var(--neutral-300);
  /** A field is a UI element in which a user can type data, for
  * example an input or textarea element.
  */
  --ui-field-bg: var(--neutral-100);
  --ui-field-bg-hover: var(--neutral-100);
  --ui-field-bg-disabled: var(--neutral-300);
  --ui-field-bg-invalid: var(--red-100);
  --ui-field-bg-focus: var(--neutral-100);
  --ui-field-border: 0.5px solid var(--border-color);
  --ui-field-border-hover: 0.5px solid var(--border-color);
  --ui-field-border-disabled: 0.5px solid var(--border-color);
  --ui-field-border-invalid: 0.5px solid var(--border-color);
  --ui-field-border-focus: 0.5px solid var(--border-color);
  --ui-menu-bg: var(--neutral-100);
  --ui-menu-text: var(--neutral-900);
  --ui-menu-bg-hover: var(--neutral-200);
  --ui-menu-text-hover: var(--neutral-900);
  /** The \`active\` state is used for the state of menu items
  * when they are selected.
  */
  --ui-menu-bg-active: var(--primary-color);
  --ui-menu-text-active: var(--primary-color-reverse);
  /** The \`active-muted\` set is used for the state of
  * submenus when they are open.
  */
  --ui-menu-bg-active-muted: var(--neutral-300);
  --ui-menu-text-active-muted: var(--neutral-900);
  /* --ui-menu-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.302),
0 2px 6px 2px rgba(60, 64, 67, 0.149); */
  --ui-menu-shadow: 0 0 2px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 0, 0, 0.2);
  --ui-menu-divider: 0.5px solid #c7c7c7;
  /* var(--neutral-300); */
  --ui-menu-z-index: 10000;
  --page-bg: var(--neutral-100);
  --content-bg: var(--neutral-200);
}
@media (prefers-color-scheme: dark) {
  :host {
    --ui-menu-bg: var(--neutral-200);
  }
}
:host([theme='dark']) {
  --ui-menu-bg: var(--neutral-200);
}
/* PingFang SC is a macOS font. Microsoft Yahei is a Windows font. 
  Noto  is a Linux/Android font.
*/
:lang(zh-cn),
:lang(zh-sg),
:lang(zh-my),
:lang(zh) {
  --ui-font-family: -apple-system, system-ui, 'PingFang SC', 'Hiragino Sans GB', 'Noto Sans CJK SC', 'Noto Sans SC', 'Noto Sans', 'Microsoft Yahei UI', 'Microsoft YaHei New', 'Microsoft Yahei', '', SimSun, '', STXihei, '', sans-serif;
}
:lang(zh-tw),
:lang(zh-hk),
:lang(zh-mo) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans', 'Microsoft JhengHei UI', 'Microsoft JhengHei', '', '', 'PMingLiU', '', 'MingLiU', sans-serif;
}
:lang(ja),
:lang(ja-jp),
:lang(ja-jp-mac) {
  --ui-font-family: -apple-system, system-ui, 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans CJK JP', 'Noto Sans JP', 'Noto Sans', '', '', YuGothic, 'Yu Gothic', '', Meiryo, ' ', 'MS PGothic', sans-serif;
}
:lang(ko),
:lang(ko-kr),
:lang(ko-kr-std) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Malgun Gothic', ' ', 'Apple SD Gothic Neo', ' SD  Neo', 'Apple SD  Neo', '', Dotum, sans-serif;
}
:lang(ko-kr-apple) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Apple SD Gothic Neo', ' SD  Neo', 'Apple SD  Neo', '', Dotum, sans-serif;
}
:lang(zh-cn),
:lang(zh-sg),
:lang(zh-my),
:lang(zh),
:lang(zh-tw),
:lang(zh-hk),
:lang(zh-mo),
:lang(ja),
:lang(ja-jp),
:lang(ja-jp-mac),
:lang(ko),
:lang(ko-kr),
:lang(ko-kr-std),
:lang(ko-kr-apple) {
  --ui-font-size: 1rem;
  --ui-line-height: 1.7;
  --ui-letter-spacing: 0;
}
:dir(rtl) {
  --ui-line-height: auto;
  --ui-letter-spacing: 0;
}
`,wm=`.ui-menu *,
.ui-menu ::before,
.ui-menu ::after {
  box-sizing: border-box;
}
.ui-menu {
  display: none;
  color-scheme: light dark;
  -webkit-user-select: none;
  /* Important: Safari iOS doesn't respect user-select */
  user-select: none;
  cursor: default;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: rgba(0 0 0 0);
  --active-label-color: #fff;
  /* ui-menu-text-active */
  --label-color: #121212;
  /* ui-menu-text */
  --menu-bg: #e2e2e2;
  /* ui-menu-background */
  --active-bg: #5898ff;
  /* ui-menu-background-active */
  --active-bg-dimmed: #c5c5c5;
  /* ui-menu-background-active-muted */
}
/** Use the :where pseudo selector to make the specificity of the
 * selector 0, so that it can be overridden by the user.
 */
:where(.ui-menu-container) {
  position: absolute;
  overflow: visible;
  width: auto;
  height: auto;
  z-index: 10000;
  border-radius: 8px;
  background: var(--ui-menu-bg);
  box-shadow: var(--ui-menu-shadow);
  list-style: none;
  padding: 6px 0 6px 0;
  margin: 0;
  user-select: none;
  cursor: default;
  color: var(--ui-menu-text);
  font-weight: normal;
  font-style: normal;
  text-shadow: none;
  text-transform: none;
  letter-spacing: 0;
  outline: none;
  opacity: 1;
  /* The [popover] elements have a 1px solid black border. Ugh. */
  border: none;
  width: fit-content;
  height: fit-content;
}
:where(.ui-menu-container > li) {
  display: flex;
  flex-flow: row;
  align-items: center;
  padding: 1px 7px 1px 7px;
  margin-top: 0;
  margin-left: 6px;
  margin-right: 6px;
  border-radius: 4px;
  white-space: nowrap;
  position: relative;
  outline: none;
  fill: currentColor;
  user-select: none;
  cursor: default;
  text-align: left;
  color: inherit;
  font-family: var(--ui-font-family);
  font-size: var(--ui-font-size);
  line-height: var(--ui-line-height);
  letter-spacing: var(--ui-letter-spacing);
}
:where(.ui-menu-container > li > .label) {
  display: flex;
  align-items: center;
  justify-content: space-between;
  appearance: none;
  background: none;
  outline: none;
  width: 100%;
  margin: 0;
  padding: 1px 2px 1px 1px;
  overflow: visible;
  border: 1px solid transparent;
  white-space: nowrap;
  text-align: start;
  align-content: center;
}
:where(.ui-menu-container > li:has(.heading)) {
  margin-top: 0.5em;
}
:where(.ui-menu-container > li > .label.heading) {
  font-weight: bold;
  opacity: 0.4;
}
:where(.ui-menu-container > li.indent > .label) {
  margin-inline-start: 12px;
}
:where(.ui-menu-container > li > .label.indent) {
  margin-inline-start: 12px;
}
:where(.ui-menu-container > li[role='divider']) {
  border-bottom: 1px solid var(--ui-menu-divider);
  border-radius: 0;
  padding: 0;
  margin-left: 15px;
  margin-right: 15px;
  padding-top: 5px;
  margin-bottom: 5px;
  width: calc(100% - 30px);
  /** 100% - (margin-left + margin-right) */
}
:where(.ui-menu-container > li[aria-disabled='true']) {
  opacity: 0.5;
}
:where(.ui-menu-container > li.active) {
  background: var(--ui-menu-bg-active);
  background: -apple-system-control-accent;
  color: var(--ui-menu-text-active);
}
:where(.ui-menu-container > li.active.is-submenu-open) {
  background: var(--ui-menu-bg-active-muted);
  color: inherit;
}
:where(.ui-menu-container > li[aria-haspopup='true'] > .label) {
  padding-inline-end: 0;
}
:where(.ui-menu-container > li[aria-haspopup='true'].active::after) {
  color: var(--ui-menu-text-active);
}
/** Keyboard shortcut */
:where(.ui-menu-container > li > kbd) {
  font-family: var(--ui-font-family);
  margin-inline-start: 12px;
  opacity: 0.4;
}
:where(.ui-menu-container > li.active > kbd) {
  opacity: 0.85;
}
.ui-trailing-chevron {
  display: flex;
  margin-inline-start: 24px;
  width: 10px;
  height: 10px;
  margin-bottom: 4px;
}
.ui-trailing-chevron:dir(rtl) {
  transform: scaleX(-1);
}
.ui-checkmark {
  display: flex;
  margin-inline-end: -11px;
  margin-inline-start: -4px;
  margin-top: 2px;
  width: 16px;
  height: 16px;
}
.ui-mixedmark {
  display: flex;
  margin-inline-end: -11px;
  margin-inline-start: -4px;
  margin-top: 2px;
  width: 16px;
  height: 16px;
}
`,Cr;function Er(t){let e="";switch(t){case"mathfield-element":e=`
    :host { display: inline-block; background-color: field; color: fieldtext; border-width: 1px; border-style: solid; border-color: #acacac; border-radius: 2px;}
    :host([hidden]) { display: none; }
    :host([disabled]), :host([disabled]:focus), :host([disabled]:focus-within) { outline: none; opacity:  .5; }
    :host(:focus), :host(:focus-within) {
      outline: Highlight auto 1px;    /* For Firefox */
      outline: -webkit-focus-ring-color auto 1px;
    }
    :host([readonly]:focus), :host([readonly]:focus-within),
    :host([read-only]:focus), :host([read-only]:focus-within) {
      outline: none;
    }`;break;case"core":e=bm;break;case"mathfield":e=gm;break;case"environment-popover":e=ym;break;case"suggestion-popover":e=xm;break;case"keystroke-caption":e=vm;break;case"virtual-keyboard":e=_m;break;case"ui":e=Mm;break;case"menu":e=wm;break}return e}function ii(t){return Cr||(Cr={}),Cr[t]||(Cr[t]=new CSSStyleSheet,Cr[t].replaceSync(Er(t))),Cr[t]}var Bt;function Ve(t){var e;try{if(!("adoptedStyleSheets"in document)){if(window.document.getElementById(`mathlive-style-${t}`))return;let a=window.document.createElement("style");a.id=`mathlive-style-${t}`,a.append(window.document.createTextNode(Er(t))),window.document.head.appendChild(a);return}if(Bt||(Bt={}),((e=Bt[t])!=null?e:0)!==0)Bt[t]+=1;else{let a=ii(t);document.adoptedStyleSheets=[...document.adoptedStyleSheets,a],Bt[t]=1}}catch(a){console.error("Error injecting stylesheet",t,a)}}function it(t){if("adoptedStyleSheets"in document&&Bt!=null&&Bt[t]&&(Bt[t]-=1,Bt[t]<=0)){let e=Cr[t];document.adoptedStyleSheets=document.adoptedStyleSheets.filter(a=>a!==e)}}var Tr=class tw extends b{constructor(e){var a;super(f(p({},e),{type:"accent",body:(a=e.body)!=null?a:void 0})),e.accentChar?this.accent=e.accentChar:this.svgAccent=e?.svgAccent,this.skipBoundary=!0,this.captureSelection=!0}static fromJson(e){return new tw(e)}toJson(){return f(p({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(e){var a;let s=new O({parent:e,mathstyle:"cramp"},this.style),o=(a=b.createBox(s,this.body))!=null?a:new _("",{style:this.style}),l=0;!this.hasEmptyBranch("body")&&this.body.length===2&&this.body[1].isCharacterBox()&&(l=o.skew);let u=Math.min(o.height,tt),c;if(this.svgAccent)c=Wi(this.svgAccent),u=s.metrics.bigOpSpacing1-u;else if(this.accent){let m=new _(this.accent,{fontFamily:"Main-Regular"});m.italic=0;let g=this.accent===8407||this.accent===8411||this.accent===8412?" ML__accent-combining-char":"";c=new _(m,{classes:"ML__accent-body"+g})}c=new Q({shift:0,children:[{box:new _(o)},-u,{box:c,marginLeft:o.left+2*l,classes:["ML__center"]}]});let d=new _(c,{type:"lift"});return this.caret&&(d.caret=this.caret),this.bind(s,d.wrap(s)),this.attachSupsub(s,{base:d})}},Xi={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},Zi=Object.fromEntries(Object.entries(Xi).map(([t,e])=>[e,t]));function Fa(t){var e;return(e={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"":8739,"":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[t])!=null?e:t.codePointAt(0)}function bf(t,e,a,s){var o;let l=new _(Fa(t),{fontFamily:"Main-Regular",isSelected:s.isSelected,classes:"ML__small-delim "+((o=s.classes)!=null?o:"")}).wrap(e);return a&&l.setTop((1-e.scalingFactor)*Oe),l}function km(t,e,a,s,o){var l,u;let c=new O({parent:s,mathstyle:"textstyle"},o?.style),d=new _(Fa(t),{fontFamily:`Size${e}-Regular`,isSelected:o.isSelected,classes:((l=o.classes)!=null?l:"")+` ML__delim-size${e}`,type:(u=o.type)!=null?u:"ignore"}).wrap(c);return a&&d.setTop((1-c.scalingFactor)*Oe),d}function Sm(t,e,a,s,o){var l;let u,c,d,m;u=d=m=Fa(t),c=null;let g="Size1-Regular";t==="\\vert"||t==="\\lvert"||t==="\\rvert"||t==="\\mvert"||t==="\\mid"?d=u=m=8739:t==="\\Vert"||t==="\\lVert"||t==="\\rVert"||t==="\\mVert"||t==="\\|"?d=u=m=8741:t==="\\uparrow"?d=m=9168:t==="\\Uparrow"?d=m=8214:t==="\\downarrow"?u=d=9168:t==="\\Downarrow"?u=d=8214:t==="\\updownarrow"?(u=8593,d=9168,m=8595):t==="\\Updownarrow"?(u=8657,d=8214,m=8659):t==="["||t==="\\lbrack"?(u=9121,d=9122,m=9123,g="Size4-Regular"):t==="]"||t==="\\rbrack"?(u=9124,d=9125,m=9126,g="Size4-Regular"):t==="\\lfloor"||t===""?(d=u=9122,m=9123,g="Size4-Regular"):t==="\\lceil"||t===""?(u=9121,d=m=9122,g="Size4-Regular"):t==="\\rfloor"||t===""?(d=u=9125,m=9126,g="Size4-Regular"):t==="\\rceil"||t===""?(u=9124,d=m=9125,g="Size4-Regular"):t==="("||t==="\\lparen"?(u=9115,d=9116,m=9117,g="Size4-Regular"):t===")"||t==="\\rparen"?(u=9118,d=9119,m=9120,g="Size4-Regular"):t==="\\{"||t==="\\lbrace"?(u=9127,c=9128,m=9129,d=9130,g="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(u=9131,c=9132,m=9133,d=9130,g="Size4-Regular"):t==="\\lgroup"||t===""?(u=9127,m=9129,d=9130,g="Size4-Regular"):t==="\\rgroup"||t===""?(u=9131,m=9133,d=9130,g="Size4-Regular"):t==="\\lmoustache"||t===""?(u=9127,m=9133,d=9130,g="Size4-Regular"):t==="\\rmoustache"||t===""?(u=9131,m=9129,d=9130,g="Size4-Regular"):t==="\\surd"?(u=57345,m=9143,d=57344,g="Size4-Regular"):t==="\\ulcorner"?(u=9484,d=m=32):t==="\\urcorner"?(u=9488,d=m=32):t==="\\llcorner"?(m=9492,d=u=32):t==="\\lrcorner"&&(u=9496,d=u=32);let A=xr(u,g),P=A.height+A.depth,W=xr(d,g),me=W.height+W.depth,ve=xr(m,g),He=ve.height+ve.depth,De=0,Xe=1;if(c!==null){let wt=xr(c,g);De=wt.height+wt.depth,Xe=2}let qe=P+He+De,Rs=Math.max(0,Math.ceil((e-qe)/(Xe*me))),Vc=qe+Rs*Xe*me,So=Oe;a&&(So=So*s.scalingFactor);let Do=Vc/2-So,eh=[];eh.push({box:new _(m,{fontFamily:g})}),eh.push(-.008);let Ko=new _(d,{fontFamily:g});if(c===null)for(let wt=0;wt<Rs;wt++)eh.push({box:Ko});else{for(let wt=0;wt<Rs;wt++)eh.push({box:Ko});eh.push(-.008),eh.push({box:new _(c,{fontFamily:g})}),eh.push(-.008);for(let wt=0;wt<Rs;wt++)eh.push({box:Ko})}eh.push(-.008),eh.push({box:new _(u,{fontFamily:g})});let Ge="";g==="Size1-Regular"?Ge=" delim-size1":g==="Size4-Regular"&&(Ge=" delim-size4");let An=new Q({bottom:Do,children:eh},{classes:Ge});return new _(An,f(p({},o??{}),{classes:((l=o?.classes)!=null?l:"")+" ML__delim-mult"}))}var Lm=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","","","",""]),yf=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","","","",""]),Am=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),xf=[0,1.2,1.8,2.4,3];function Cm(t,e,a,s){return t===void 0||t==="."?Qt(a,s.classes):(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),Lm.has(t)||Am.has(t)?km(t,e,!1,a,s):yf.has(t)?Sm(t,xf[e],!1,a,s):null)}var vf=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],_f=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],Mf=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function wf(t){return t.type==="small"?"Main-Regular":t.type==="large"?"Size"+t.size+"-Regular":(t.type,"Size4-Regular")}function kf(t,e,a,s){let o={"-4":0,"-3":1,0:2}[s.mathstyle.sizeDelta];for(let l=o;l<a.length&&a[l].type!=="stack";l++){let u=xr(t,wf(a[l]));if(u.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let c=u.height+u.depth;if(a[l].type==="small"&&(a[l].mathstyle==="scriptscriptstyle"?c*=Math.max(qn[Math.max(1,s.size-2)],s.minFontScale):a[l].mathstyle==="scriptstyle"&&(c*=Math.max(qn[Math.max(1,s.size-1)],s.minFontScale))),c>e)return a[l]}return a[a.length-1]}function Yi(t,e,a,s,o,l){if(!e||e.length===0||e===".")return Qt(o);e==="<"||e==="\\lt"?e="\\langle":(e===">"||e==="\\gt")&&(e="\\rangle");let u;Am.has(e)?u=vf:Lm.has(e)?u=Mf:u=_f;let c=kf(Fa(e),a,u,o),d=new O({parent:o,mathstyle:c.mathstyle},l?.style);return c.type==="small"?bf(e,d,s,f(p({},l),{type:t})):c.type==="large"?km(e,c.size,s,d,f(p({},l),{type:t})):(c.type,Sm(e,a,s,d,f(p({},l),{type:t})))}function ni(t,e,a,s,o,l){if(e===".")return Qt(o,l?.classes);let u=Oe*o.scalingFactor,c=901,d=5/Dt,m=Math.max(a-u,s+u),g=Math.max(m/500*c,2*m-d);return Yi(t,e,g,!0,o,l)}function Qt(t,e){let a=new _(null,{classes:" ML__nulldelimiter "+(e??""),type:"ignore"});return a.width=t.getRegisterAsEm("nulldelimiterspace"),a.wrap(new O({parent:t,mathstyle:"textstyle"}))}var Le=class rw extends b{constructor(e){var a;super({type:"placeholder",command:"\\placeholder",mode:(a=e?.mode)!=null?a:"math",style:e?.style}),this.captureSelection=!0}static fromJson(e){return new rw(e)}toJson(){return super.toJson()}render(e){let a;return this.value=e.placeholderSymbol,typeof e.renderPlaceholder=="function"?a=e.renderPlaceholder(e):a=this.createBox(e),this.caret&&(a.classes+=" ML__placeholder-selected"),a}_serialize(e){return e.skipPlaceholders?"":"\\placeholder{}"}},Em=["matrix","matrix*","pmatrix","pmatrix*","bmatrix","bmatrix*","Bmatrix","Bmatrix*","vmatrix","vmatrix*","Vmatrix","Vmatrix*"],Nl=["cases","dcases","rcases"],Tm=["align","align*","aligned","gather","gather*","gathered","split"],Sf=["array","subequations","eqnarray"];function Dm(t){return Tm.includes(t)||Nl.includes(t)||Nl.includes(t)||Em.includes(t)||Sf.includes(t)}function Va(t){return Em.includes(t)}function Km(t){return Nl.includes(t)}function Om(t){return Tm.includes(t)}function Lf(t,e,a){let s=0;for(let m of a.columns)"align"in m&&(s+=1);s=Math.max(s,a.minColumns);let o=0,l=[];for(let m of e){o=Math.max(o,Math.min(m.length,s));let g=0;for(;g<m.length;){let A=[],P=Math.min(m.length,g+s);for(;g<P;)A.push(Af(m[g],t.mode)),g+=1;if(A.length<a.minColumns)for(;A.length<a.minColumns;)A.push([new b({type:"first",mode:t.mode})]);l.push(A)}}!t.isMultiline&&l.length>0&&l[l.length-1].length===1&&Cf(l[l.length-1][0])&&l.pop();let u=[];for(let m of l){if(m.length!==o)for(let g=m.length;g<o;g++)t.isMultiline?m.push([new b({type:"first",mode:t.mode})]):m.push([new b({type:"first",mode:t.mode}),new Le]);u.push(m)}let c=0,d=0;for(let m of u){d=0;for(let g of m){for(let A of g)A.parent=t,A.parentBranch=[c,d];d+=1}c+=1}return t.isDirty=!0,u}function Af(t,e){return t.length===0?[new b({type:"first",mode:e})]:t[0].type!=="first"?[new b({type:"first",mode:e}),...t]:(t.slice(1).some(a=>a.type==="first"),t)}function Cf(t){return t.length===1&&t[0].type==="first"}var I=class iw extends b{get isMultiline(){let e=this.environmentName;return["lines","multline","multline*","align","split","gather","gathered"].includes(e)}constructor(e,a,s,o={}){var l,u,c,d;if(super({type:"array",isRoot:o.isRoot}),this.environmentName=e,o.columns)o.columns.length===0?this.colFormat=[{align:"l"}]:this.colFormat=[...o.columns];else if(o.minColumns){let m=[];for(let g=0;g<o.minColumns;g++)m.push({align:"l"});this.colFormat=m}else this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}];this.minColumns=(l=o.minColumns)!=null?l:1,this.minRows=(u=o.minRows)!=null?u:1,this.maxRows=(c=o.maxRows)!=null?c:1/0,this._rows=Lf(this,a,{columns:this.colFormat,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows}),this.rowGaps=s,o.arraycolsep!==void 0&&(this.arraycolsep=o.arraycolsep),this.colSeparationType=o.colSeparationType,o.arraystretch!==void 0&&(this.arraystretch=o.arraystretch),o.mathstyleName&&(this.mathstyleName=o.mathstyleName),o.leftDelim&&(this.leftDelim=o.leftDelim),o.rightDelim&&(this.rightDelim=o.rightDelim),this.classes=(d=o.classes)!=null?d:[]}static fromJson(e){return new iw(e.environmentName,e.array,e.rowGaps,e)}toJson(){let e=f(p({},super.toJson()),{environmentName:this.environmentName,array:this._rows.map(a=>a.map(s=>s.map(o=>o.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows});return this.arraystretch!==void 0&&(e.arraystretch=this.arraystretch),this.arraycolsep!==void 0&&(e.arraycolsep=this.arraycolsep),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.isRoot&&(e.isRoot=!0),e.minColumns=this.minColumns,e.minRows=this.minRows,e.maxRows=this.maxRows,this.mathstyleName&&(e.mathstyleName=this.mathstyleName),this.classes.length>0&&(e.classes=this.classes),e}branch(e){var a;if(We(e))return(a=this._rows[e[0]][e[1]])!=null?a:void 0}createBranch(e){var a;return We(e)?(this.isDirty=!0,(a=this.branch(e))!=null?a:[]):[]}get rowCount(){return this._rows.length}get colCount(){return this._rows[0].length}get maxColumns(){return this.colFormat.filter(e=>!!e.align).length}removeBranch(e){if(Sr(e))return super.removeBranch(e);let[a,...s]=this.branch(e);return a.type,this._rows[e[0]][e[1]]=void 0,s.forEach(o=>{o.parent=void 0,o.parentBranch=void 0}),this.isDirty=!0,s}get hasChildren(){return this.children.length>0}get children(){let e=[];for(let a of this._rows)for(let s of a)if(s)for(let o of s)e.push(...o.children),e.push(o);return[...e,...super.children]}render(e){var a,s,o,l,u,c;let d=new O({parent:e,mathstyle:this.mathstyleName},this.style),m=d.getRegisterAsEm("arrayrulewidth"),g=d.getRegisterAsEm("arraycolsep"),A=d.getRegisterAsEm("doublerulesep"),P=(s=(a=this.arraystretch)!=null?a:d.getRegisterAsNumber("arraystretch"))!=null?s:1,W=typeof this.arraycolsep=="number"?this.arraycolsep:g;this.colSeparationType==="small"&&(W=.2778*(new O({parent:e,mathstyle:"scriptstyle"}).scalingFactor/e.scalingFactor));let me=P*Z0,ve=.7*me,He=.3*me,De=0,Xe=[],qe=0,Rs=this._rows.length;for(let _h=0;_h<Rs;++_h){let qc=this._rows[_h];qe=Math.max(qe,qc.length);let Mh=new O({parent:d,mathstyle:this.mathstyleName},this.style),cf=ve/Mh.scalingFactor,mf=He/Mh.scalingFactor,a1={cells:[],height:0,depth:0,pos:0};for(let E1 of qc){let T1=(o=b.createBox(Mh,E1,{type:"ignore"}))!=null?o:new _(null,{type:"ignore"});mf=Math.max(mf,T1.depth),cf=Math.max(cf,T1.height),a1.cells.push(T1)}let s1=(l=Ra(this.rowGaps[_h]))!=null?l:0;s1>0&&(s1+=He,mf=Math.max(mf,s1),s1=0),_h<Rs-1&&!Va(this.environmentName)&&this.environmentName!=="cases"&&this.environmentName!=="array"&&(mf+=d.getRegisterAsEm("jot")),a1.height=cf,a1.depth=mf,De+=cf,a1.pos=De,De+=mf+s1,Xe.push(a1)}let Vc=De/2+Oe,So=[];for(let _h=0;_h<qe;_h++){let qc=[];for(let Mh of Xe){let cf=Mh.cells[_h];cf&&(cf.depth=Mh.depth,cf.height=Mh.height,qc.push({box:cf,shift:Mh.pos-Vc}))}qc.length>0&&So.push(new Q({individualShift:qc}))}let Do=[],eh=!1,Ko=!1,Ge=0,An=!this.leftDelim,{colFormat:wt}=this;for(let _h of wt){if("align"in _h&&Ge>=So.length)break;if("align"in _h)eh?Do.push(Ha(2*W)):(Ko||An)&&Do.push(Ha(W)),Do.push(new _(So[Ge],{classes:"col-align-"+_h.align})),Ge++,eh=!0,Ko=!1,An=!1;else if("gap"in _h){if(typeof _h.gap=="number")Do.push(Ha(_h.gap));else{let qc=Ef(e,Xe,Vc,_h.gap);qc&&Do.push(qc)}eh=!1,Ko=!1,An=!1}else if("separator"in _h){let qc=new _(null,{classes:"ML__vertical-separator"});qc.height=De,qc.setStyle("height",De,"em"),qc.setStyle("border-right",`${m}em ${_h.separator} currentColor`),qc.setStyle("vertical-align",-(De-Vc),"em");let Mh=0;Ko?Mh=A-m:eh&&(Mh=W-m),qc.left=Mh,Do.push(qc),eh=!1,Ko=!0,An=!1}}eh&&!this.rightDelim&&Do.push(Ha(W));let Bs=new _(Do,{classes:["ML__mtable",...this.classes].join(" ")});if((!this.leftDelim||this.leftDelim===".")&&(!this.rightDelim||this.rightDelim==="."))return this.caret&&(Bs.caret=this.caret),this.bind(e,Bs);let yh=Bs.height,df=Bs.depth,Fc=this.bind(e,new _([this.bind(e,ni("open",(u=this.leftDelim)!=null?u:".",yh,df,d,{isSelected:this.isSelected})),Bs,this.bind(e,ni("close",(c=this.rightDelim)!=null?c:".",yh,df,d,{isSelected:this.isSelected}))],{type:"ord"}));return Fc?(Fc.setStyle("display","inline-block"),this.caret&&(Fc.caret=this.caret),this.bind(e,this.attachSupsub(e,{base:Fc}))):null}_serialize(e){var a;let s=[];if(this.environmentName==="lines"?s.push("\\displaylines{"):s.push(`\\begin{${this.environmentName}}`),this.environmentName==="array"){if(s.push("{"),this.colFormat!==void 0)for(let o of this.colFormat)"align"in o&&typeof o.align=="string"?s.push(o.align):"separator"in o&&o.separator==="solid"?s.push("|"):"separator"in o&&o.separator==="dashed"&&s.push(":");s.push("}")}for(let o=0;o<this._rows.length;o++){for(let l=0;l<this._rows[o].length;l++)l>0&&s.push(" & "),s.push(b.serialize(this._rows[o][l],e));if(o<this._rows.length-1){let l=this.rowGaps[o];l!=null&&l.dimension?s.push(`\\\\[${l.dimension} ${(a=l.unit)!=null?a:"pt"}] `):s.push("\\\\ ")}}return this.environmentName==="lines"?s.push("}"):s.push(`\\end{${this.environmentName}}`),R(s)}forEachCell(e){for(let a=0;a<this.rowCount;a++)for(let s=0;s<this.colCount;s++)e(this._rows[a][s],a,s)}getCell(e,a){var s;return(s=this._rows[e])==null?void 0:s[a]}setCell(e,a,s){this.type==="array"&&Array.isArray(this._rows)&&this._rows[e][a];for(let l of this._rows[e][a])l.parent=void 0,l.parentBranch=void 0;let o=[new b({type:"first",mode:this.mode}),...s.filter(l=>l.type!=="first")];this._rows[e][a]=o,oi(this),this.isDirty=!0}addRowBefore(e){this.type==="array"&&Array.isArray(this._rows),this._rows.splice(e,0,new Array(this.colCount).fill(qa(this,!this.isMultiline))),oi(this),this.isDirty=!0}addRowAfter(e){this.type==="array"&&Array.isArray(this._rows),this._rows.splice(e+1,0,new Array(this.colCount).fill(qa(this,!this.isMultiline))),oi(this),this.isDirty=!0}removeRow(e){this.type==="array"&&Array.isArray(this._rows)&&this.rowCount>e;let a=this._rows.splice(e,1);for(let s of a)for(let o of s)if(o)for(let l of o)l.parent=void 0,l.parentBranch=void 0;oi(this),this.isDirty=!0}addColumnBefore(e){this.type==="array"&&Array.isArray(this._rows);for(let a of this._rows)a.splice(e,0,qa(this));oi(this),this.isDirty=!0}addColumnAfter(e){this.type==="array"&&Array.isArray(this._rows);for(let a of this._rows)a.splice(e+1,0,qa(this));oi(this),this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(e){this.type==="array"&&Array.isArray(this._rows)&&this.colCount>e;for(let a of this._rows){let s=a.splice(e,1);for(let o of s)if(o)for(let l of o)l.parent=void 0,l.parentBranch=void 0}oi(this),this.isDirty=!0}get cells(){let e=[];for(let a of this._rows)for(let s of a)s&&e.push(s.filter(o=>o.type!=="first"));return e}get rows(){return this._rows}};function qa(t,e=!1){let a=new b({type:"first",mode:t.mode});a.parent=t;let s=[a];if(e){let o=new Le;o.parent=t,s.push(o)}return s}function oi(t){for(let e=0;e<t.rowCount;e++)for(let a=0;a<t.colCount;a++){let s=t.getCell(e,a);if(s)for(let o of s)o&&(o.parent=t,o.parentBranch=[e,a])}}function Ha(t){let e=new _(null,{classes:"ML__arraycolsep"});return e.width=t,e}function Ef(t,e,a,s){if(!s)return null;let o=[];for(let l of e){let u=b.createBox(t,s,{type:"ignore"});u&&(u.depth=l.depth,u.height=l.height,o.push({box:u,shift:l.pos-a}))}return new Q({individualShift:o}).wrap(t)}var nt=class nw extends b{constructor(e){super({mode:e.mode,command:e.command,style:e.style,body:e.body,type:"box"}),this.framecolor=e.framecolor,this.backgroundcolor=e.backgroundcolor,this.padding=e.padding,this.offset=e.offset,this.border=e.border}static fromJson(e){return new nw(e)}toJson(){return f(p({},super.toJson()),{framecolor:this.framecolor,backgroundcolor:this.backgroundcolor,padding:this.padding,offset:this.offset,border:this.border})}render(e){var a,s,o,l;let u=b.createBox(e,this.body,{type:"lift"});if(!u)return null;let c=e.toEm((a=this.offset)!=null?a:{dimension:0});u.depth+=c,u.setStyle("display","inline-block"),u.setStyle("position","relative"),u.setStyle("height",Math.floor(100*u.height+u.depth)/100,"em"),u.setStyle("vertical-align",-Math.floor(100*u.height)/100,"em");let d=new O({parent:e},this.style),m=d.toEm((s=this.padding)!=null?s:{register:"fboxsep"}),g=new _(null,{classes:"ML__box"});g.height=u.height+m,g.depth=u.depth+m,g.setStyle("box-sizing","border-box"),g.setStyle("position","absolute"),g.setStyle("top",-m+.3,"em"),g.setStyle("left",0),g.setStyle("height",g.height+g.depth,"em"),g.setStyle("width","100%"),this.backgroundcolor&&g.setStyle("background-color",(o=d.toColor(this.backgroundcolor))!=null?o:"transparent"),this.framecolor&&g.setStyle("border",`${d.getRegisterAsEm("fboxrule",2)}em solid ${(l=d.toColor(this.framecolor))!=null?l:"black"}`),this.border&&g.setStyle("border",this.border);let A=new _([g,u],{type:"lift"});return A.setStyle("display","inline-block"),A.setStyle("position","relative"),A.setStyle("line-height",0),A.height=u.height+m+(c>0?c:0),A.depth=u.depth+m+(c<0?-c:0),A.setStyle("padding-left",m,"em"),A.setStyle("padding-right",m,"em"),A.setStyle("height",Math.floor(100*(u.height+u.depth+2*m+Math.abs(c)))/100,"em"),A.setStyle("margin-top",-m,"em"),A.setStyle("top",Math.floor(100*(u.depth-u.height+2*m-c))/100,"em"),A.setStyle("vertical-align",Math.floor(100*(u.depth+2*m))/100,"em"),this.caret&&(A.caret=this.caret),this.attachSupsub(e,{base:A})}_serialize(e){return e.skipStyles?R([this.bodyToLatex(e),this.supsubToLatex(e)]):super._serialize(e)}},Qi=class aw extends b{constructor(e,a){var s;super({type:"composition",mode:(s=a?.mode)!=null?s:"math",value:e})}static fromJson(e){return new aw(e.value,e)}toJson(){return super.toJson()}render(e){let a=new _(this.value,{classes:"ML__composition",type:"composition"});return this.bind(e,a),this.caret&&(a.caret=this.caret),a}_serialize(e){return""}},mt=class sw extends b{constructor(e){super({type:"error",value:e,command:e,mode:"math"}),this.verbatimLatex=e}static fromJson(e){return new sw(e.command)}toJson(){return super.toJson()}render(e){let a=this.createBox(e,{classes:"ML__error"});return this.caret&&(a.caret=this.caret),a}},en=class ow extends b{constructor(e,a){super({type:"group",mode:a}),this.body=e,this.boxType=e.length>1?"ord":"ignore",this.skipBoundary=!0,this.displayContainsHighlight=!1,e&&e.length===1&&e[0].command===","&&(this.captureSelection=!0)}static fromJson(e){return new ow(e.body,e.mode)}render(e){let a=b.createBox(e,this.body,{type:this.boxType});return a?(this.caret&&(a.caret=this.caret),this.bind(e,a)):null}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let a=se(this.command,this.mode);return a!=null&&a.serialize?a.serialize(this,e):`{${this.bodyToLatex(e)}}`}},G=class lw extends b{constructor(e,a,s){super({type:"leftright",style:s.style,displayContainsHighlight:!0}),this.variant=e,this.body=a,this.leftDelim=s.leftDelim,this.rightDelim=s.rightDelim}static fromJson(e){var a;return new lw((a=e.variant)!=null?a:"",e.body,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),e}_serialize(e){var a,s;let o=this.matchingRightDelim();return this.variant==="left...right"?R(["\\left",(a=this.leftDelim)!=null?a:".",this.bodyToLatex(e),"\\right",o]):this.variant==="mleft...mright"?R(["\\mleft",(s=this.leftDelim)!=null?s:".",this.bodyToLatex(e),"\\mright",o]):R([!this.leftDelim||this.leftDelim==="."?"":this.leftDelim,this.bodyToLatex(e),o])}matchingRightDelim(){var e,a;if(this.rightDelim&&this.rightDelim!=="?")return this.rightDelim;let s=(e=this.leftDelim)!=null?e:".";return(a=Xi[s])!=null?a:s}render(e){var a,s;let o=new O({parent:e},this.style);this.body;let l=new O({parent:e,mathstyle:"textstyle"},this.style),u=(a=b.createBox(o,this.body,{type:"inner"}))!=null?a:new _(null,{type:"inner"}),c=u.height/l.scalingFactor,d=u.depth/l.scalingFactor,m=[];if(this.leftDelim&&m.push(this.bind(l,ni("open",this.leftDelim,c,d,l,{isSelected:this.isSelected,classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),u&&(Bm(u.children,this,o,c,d),m.push(u)),this.rightDelim){let W=this.containsCaret?" ML__contains-caret":"",me=this.rightDelim;me==="?"&&(o.smartFence?(me=this.matchingRightDelim(),W+=" ML__smart-fence__close"):me="."),m.push(this.bind(l,ni("close",me,c,d,l,{isSelected:this.isSelected,classes:W+" ML__close",mode:this.mode,style:this.style})))}let g=this.variant==="mleft...mright",A=this.leftSibling;A&&(!g&&A.isFunction&&(g=!0),!g&&A.type==="subsup"&&(s=A.leftSibling)!=null&&s.isFunction&&(g=!0));let P=new _(m,{type:g?"close":"inner",classes:"ML__left-right"});return P.setStyle("margin-top",`${-u.depth}em`),P.setStyle("height",`${u.height+u.depth}em`),this.caret&&(P.caret=this.caret),this.bind(o,P.wrap(o))}};function Bm(t,e,a,s,o){if(t)for(let l=0;l<t.length;l++){let u=t[l];u.type==="middle"?(t[l]=e.bind(a,ni("inner",u.value,s,o,a,{isSelected:e.isSelected})),t[l].caret=u.caret,t[l].isSelected=u.isSelected,t[l].cssId=u.cssId,t[l].htmlData=u.htmlData,t[l].htmlStyle=u.htmlStyle,t[l].attributes=u.attributes,t[l].cssProperties=u.cssProperties):u.children&&Bm(u.children,e,a,s,o)}}var tn=class uw extends b{constructor(e,a){var s;super({type:"macro",command:e,style:a.style}),this.body=a.body,a.captureSelection===void 0?a.args?this.captureSelection=!1:this.captureSelection=!0:this.captureSelection=a.captureSelection,this.macroArgs=a.args,this.expand=(s=a.expand)!=null?s:!1}static fromJson(e){return new uw(e.command,e)}toJson(){let e=super.toJson();return this.expand&&(e.expand=!0),this.captureSelection!==void 0&&(e.captureSelection=this.captureSelection),this.macroArgs&&(e.args=this.macroArgs),e}_serialize(e){var a;return e.expandMacro&&this.expand?this.bodyToLatex(e):this.command+((a=this.macroArgs)!=null?a:"")}applyStyle(e,a){let s={};e.color&&(s.color=e.color),e.backgroundColor&&(s.backgroundColor=e.backgroundColor),super.applyStyle(s,a)}render(e){let a=b.createBox(e,this.body,{type:"lift"});return a?(this.caret&&(a.caret=this.caret),this.bind(e,a)):null}},Wa=class cw extends b{constructor(){super({type:"macro-argument"})}static fromJson(e){return new cw}toJson(){return super.toJson()}_serialize(e){return""}render(e){return null}},rn=class hw extends b{constructor(e,a,s=!1,o,l){var u;super({type:"prompt",mode:(u=l?.mode)!=null?u:"math",style:l?.style,command:"\\placeholder"}),this.body=o,this.correctness=a,this.placeholderId=e,this.locked=s,this.captureSelection=this.locked}static fromJson(e){return new hw(e.placeholderId,e.correctness,e.locked,e.body,e)}toJson(){let e=super.toJson();return this.placeholderId&&(e.placeholderId=this.placeholderId),this.body||delete e.body,this.body&&(e.body=this.body.filter(a=>a.type!=="first").map(a=>a.toJson())),this.correctness&&(e.correctness=this.correctness),e.locked=this.locked,e}render(e){let a=new O({parent:e}),s=a.getRegisterAsEm("fboxsep"),o=s,l=s,u=b.createBox(e,this.body);if(!u)return null;u.height||(u.height=a.metrics.xHeight),u.setStyle("vertical-align",-u.height,"em"),this.correctness==="correct"?u.setStyle("color","var(--correct-color, var(--ML__correct-color))"):this.correctness==="incorrect"&&u.setStyle("color","var(--incorrect-color, var(--ML__incorrect-color))");let c=new _(u,{type:"ord"});c.setStyle("display","inline-block"),c.setStyle("height",u.height+u.depth,"em"),c.setStyle("vertical-align",-l,"em");let d="ML__prompt ";this.locked?d+=" ML__lockedPromptBox ":d+=" ML__editablePromptBox ",this.correctness==="correct"?d+=" ML__correctPromptBox ":this.correctness==="incorrect"&&(d+=" ML__incorrectPromptBox "),this.containsCaret&&(d+=" ML__focusedPromptBox ");let m=new _(null,{classes:d,attributes:{part:"prompt"}});m.height=c.height+l,m.depth=c.depth+l,m.width=c.width+2*o,m.setStyle("position","absolute"),m.setStyle("height",`calc(${c.height+c.depth+2*l}em - 2px)`),o===0&&m.setStyle("width","100%"),o!==0&&(m.setStyle("width",`calc(100% + ${2*o}em)`),m.setStyle("top",s,"em"),m.setStyle("left",-o,"em")),(!this.body||this.body.length===1)&&(m.width=3*o,m.setStyle("width",`calc(100% + ${3*o}em)`),m.setStyle("left",-1.5*o,"em"));let g="";this.correctness==="incorrect"&&(g+='<line x1="3%"  y1="97%" x2="97%" y2="3%" stroke-width="0.5" stroke="var(--incorrect-color, var(--ML__incorrect-color))" stroke-linecap="round" />'),g&&(m.svgOverlay=g);let A=new _([m,c],{classes:"ML__prompt-atom"});return c.setStyle("line-height",1),A.setStyle("position","relative"),A.setStyle("display","inline-block"),A.setStyle("line-height",0),A.height=c.height+l+.2,A.depth=c.depth+l,A.left=o,A.right=o,A.setStyle("height",c.height+l,"em"),A.setStyle("top",c.depth-c.height,"em"),A.setStyle("vertical-align",c.depth+l,"em"),A.setStyle("margin-left",.5,"em"),A.setStyle("margin-right",.5,"em"),this.caret&&(A.caret=this.caret),this.bind(a,this.attachSupsub(e,{base:A}))}_serialize(e){var a;let s=(a=this.bodyToLatex(e))!=null?a:"";if(e.skipPlaceholders)return s;let o="\\placeholder";return this.placeholderId&&(o+=`[${this.placeholderId}]`),this.correctness==="correct"?o+="[correct]":this.correctness==="incorrect"&&(o+="[incorrect]"),this.locked&&(o+="[locked]"),q(o,s)}},er=class dw extends b{constructor(e){super({type:"subsup",style:e?.style}),this.subsupPlacement="auto"}get children(){if(!this._children){let e=[],a=this.branch("subscript");if(a)for(let o of a)e.push(...o.children),e.push(o);let s=this.branch("superscript");if(s)for(let o of s)e.push(...o.children),e.push(o);this._children=e}return this._children}static fromJson(e){let a=new dw(e);for(let s of Lr)e[s]&&a.setChildren(e[s],s);return a}render(e){var a;let s=new O({parent:e,isPhantom:!0}),o=this.leftSibling,l=(a=o.render(s))!=null?a:new _(null),u=new _(null);return u.height=l.height,u.depth=l.depth,this.attachSupsub(e,{base:u,isCharacterBox:o.isCharacterBox(),type:"ignore"})}_serialize(e){return this.supsubToLatex(e)}};function nn(t){return t?!/^(<$$>|<$>|<space>|<{>|<}>|#[0-9\?]|\\.+)$/.test(t):!1}var Ua=class{constructor(t,e,a){this.errors=[],this.index=0,this.endCount=0;var s,o,l,u;a!=null||(a={}),this.tokens=t,this.context=e instanceof O&&!(a!=null&&a.parseMode)&&!a.mathstyle?e:new O({from:e,mathstyle:a.mathstyle},a.style),this.args=(s=a.args)!=null?s:void 0,this.smartFence=this.context.smartFence,this.parsingContext={parent:void 0,mathlist:[],style:(o=a.style)!=null?o:{},parseMode:(l=a.parseMode)!=null?l:"math",mathstyle:(u=a.mathstyle)!=null?u:"displaystyle",tabular:!1}}beginContext(t){var e,a,s,o,l,u;if(t!=null&&t.root){this.parsingContext={parent:this.parsingContext.parent,mathlist:[],style:{},parseMode:(e=t?.mode)!=null?e:"math",mathstyle:(a=t?.mathstyle)!=null?a:"displaystyle",tabular:(s=t?.tabular)!=null?s:!1};return}let c=this.parsingContext,d={parent:c,mathlist:[],style:p({},c.style),parseMode:(o=t?.mode)!=null?o:c.parseMode,mathstyle:(l=t?.mathstyle)!=null?l:c.mathstyle,tabular:(u=t?.tabular)!=null?u:!1};this.parsingContext=d}endContext(){this.parsingContext=this.parsingContext.parent}onError(t){this.errors.push(p({before:vr(this.tokens.slice(this.index,this.index+10)),after:vr(this.tokens.slice(Math.max(0,this.index-10),this.index))},t))}get mathlist(){return this.parsingContext.mathlist}set mathlist(t){this.parsingContext.mathlist=t}get parseMode(){return this.parsingContext.parseMode}set parseMode(t){this.parsingContext.parseMode=t}get tabularMode(){return this.parsingContext.tabular}get style(){let t=this.parsingContext;for(;t;){if(t.style)return p({},t.style);t=t.parent}return{}}set style(t){this.parsingContext.style=t}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}next(){this.index+=1}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}expandUnicode(){if(!this.peek()||this.parseMode!=="math")return;let t=eu(this.peek());t&&this.tokens.splice(this.index,1,...qi(t))}match(t){return this.tokens[this.index]===t?(this.index++,!0):!1}lastSubsupAtom(){let t;return this.mathlist.length>0&&(t=this.mathlist[this.mathlist.length-1],t.type==="subsup"||t.subsupPlacement!==void 0)||(t=new er({style:this.style}),this.mathlist.push(t)),t}hasPattern(t){return t.test(this.tokens[this.index])}hasInfixCommand(){var t;let{index:e}=this;if(e<this.tokens.length&&this.tokens[e].startsWith("\\")){let a=se(this.tokens[e],this.parseMode);return!a||a.definitionType==="symbol"||a.ifMode&&!a.ifMode.includes(this.parseMode)?!1:(t=a.infix)!=null?t:!1}return!1}matchColumnSeparator(){return!this.tabularMode||this.peek()!=="&"?!1:(this.index++,!0)}matchRowSeparator(){if(!this.tabularMode)return!1;let t=this.peek();return t!=="\\\\"&&t!=="\\cr"&&t!=="\\tabularnewline"?!1:(this.index++,!0)}placeholder(){var t;let e=(t=this.args)==null?void 0:t.call(this,"?");return e?he(e,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new Le({mode:this.parseMode,style:this.style})]}skipWhitespace(){for(;this.match("<space>"););}skipUntilToken(t){let e=this.tokens[this.index];for(;e&&e!==t;)e=this.tokens[++this.index];e===t&&this.index++}skipFiller(){for(;this.match("\\relax")||this.match("<space>"););}matchKeyword(t){let e=this.index,a=this.end(),s="";for(;!a;){let l=this.get();nn(l)?(s+=l,a=this.end()||s.length>=t.length):a=!0}let o=t.toUpperCase()===s.toUpperCase();return o||(this.index=e),o}scanString(){let t="";for(;!this.end();){let e=this.peek();if(e==="]")return t;if(e==="<space>")t+=" ";else if(e.startsWith("\\"))this.onError({code:"unexpected-command-in-string"}),t+=e.substring(1);else if(nn(e))t+=e;else return t;this.next()}return t}scanBalancedString(){let t="",e=this.end(),a=1;for(;!e;){let s=this.get();s==="<space>"?t+=" ":s==="<{>"?(t+="{",a+=1):s==="<}>"?(a-=1,a>0?t+="}":this.index-=1):s==="<$>"?t+="$":s==="<$$>"?t+="$$":t+=s,e=a===0||this.end()}return t}scanLiteralGroup(){var t;if(!this.match("<{>"))return"";let e="",a=1;for(;a>0&&!this.end();){let s=this.get();s==="<}>"?(a-=1,a>0&&(e+="}")):s==="<{>"?(a+=1,e+="{"):(/\\[a-zA-Z]+$/.test(e)&&/^[a-zA-Z]/.test(s)&&(e+=" "),e+=(t={"<space>":" ","<$$>":"$$","<$>":"$"}[s])!=null?t:s)}return e}scanNumber(t=!0){var e,a;let s=!1,o=this.peek();for(;o==="<space>"||o==="+"||o==="-";)this.get(),o==="-"&&(s=!s),o=this.peek();t=!!t;let l=10,u=/\d/;if(this.match("'"))l=8,u=/[0-7]/,t=!0;else if(this.match('"'))l=16,u=/[\dA-F]/,t=!0;else if(this.match("x"))l=16,u=/[\dA-Fa-f]/,t=!0;else if(this.match("`"))return o=this.get(),o?o.length===2&&o.startsWith("\\")?{number:(s?-1:1)*((e=o.codePointAt(1))!=null?e:0),base:"alpha"}:{number:(s?-1:1)*((a=o.codePointAt(0))!=null?a:0),base:"alpha"}:null;let c="";for(;this.hasPattern(u);)c+=this.get();if(!t&&(this.match(".")||this.match(",")))for(c+=".";this.hasPattern(u);)c+=this.get();let d=t?Number.parseInt(c,l):Number.parseFloat(c);return Number.isNaN(d)?null:{number:s?-d:d,base:l===16?"hexadecimal":l===8?"octal":"decimal"}}scanRegister(){var t;let e=this.index,a=this.scanNumber(!1);if(this.skipWhitespace(),this.match("\\relax"))return a;let s=!1;if(a===null)for(;;){let l=this.peek();if(l==="-")s=!s;else if(l!=="+")break;this.next(),this.skipWhitespace()}if(this.match("\\global")){this.skipWhitespace();let l=this.get();return l.startsWith("\\")?a?{register:l,global:!0,factor:(s?-1:1)*a.number}:s?{register:l,global:!0,factor:-1}:{register:l,global:!0}:(this.index=e,null)}let o=this.get();return o!=null&&o.startsWith("\\")?(o=o.substring(1),this.context.registers[o]?!s||a!==null?{register:o,factor:(s?-1:1)*((t=a?.number)!=null?t:1)}:{register:o}:(this.index=e,null)):(this.index=e,null)}scanValue(){let t=this.scanRegister();if(t)return t;let e=this.index,a=this.scanGlueOrDimen();if(a&&("unit"in a||"glue"in a&&"unit"in a.glue))return a;this.index=e;let s=this.scanNumber();if(s)return s;if(this.end()||!nn(this.peek()))return null;let o=this.scanString();return o.length>0?{string:o}:null}scanDimen(){let t=this.scanNumber(!1);if(t===null)return null;let e=t.number;this.skipWhitespace(),this.matchKeyword("true"),this.skipWhitespace();let a;return this.matchKeyword("pt")?a="pt":this.matchKeyword("mm")?a="mm":this.matchKeyword("cm")?a="cm":this.matchKeyword("ex")?a="ex":this.matchKeyword("px")?a="px":this.matchKeyword("em")?a="em":this.matchKeyword("bp")?a="bp":this.matchKeyword("dd")?a="dd":this.matchKeyword("pc")?a="pc":this.matchKeyword("in")?a="in":this.matchKeyword("mu")&&(a="mu"),a?{dimension:e,unit:a}:{dimension:e}}scanGlueOrDimen(){let t=this.scanDimen();if(t===null)return null;if(this.skipWhitespace(),this.match("\\relax"))return t;let e={glue:t};if(this.matchKeyword("plus")){let a=this.scanDimen();if(a)e.grow=a;else return e}if(this.skipWhitespace(),this.match("\\relax"))return e;if(this.skipWhitespace(),this.matchKeyword("minus")){let a=this.scanDimen();if(a)e.shrink=a;else return e}return!e.grow&&!e.shrink?t:e}scanColspec(){this.skipWhitespace();let t=[];for(;!this.end()&&!(this.peek()==="<}>"||this.peek()==="]");){let e=this.get();e==="c"||e==="r"||e==="l"?t.push({align:e}):e==="|"?t.push({separator:"solid"}):e===":"?t.push({separator:"dashed"}):e==="@"&&(this.match("<{>")&&(this.beginContext({mode:"math"}),t.push({gap:this.scan(a=>a==="<}>")}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return t}scanModeSet(){let t;if(this.match("\\(")&&(t="textstyle"),!t&&this.match("\\[")&&(t="displaystyle"),!t)return null;this.beginContext({mode:"math",mathstyle:t});let e=this.scan(a=>a===(t==="displaystyle"?"\\]":"\\)"));return this.match(t==="displaystyle"?"\\]":"\\)")||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),e}scanModeShift(){let t="";if(this.match("<$>")&&(t="<$>"),!t&&this.match("<$$>")&&(t="<$$>"),!t)return null;this.beginContext({mode:"math",mathstyle:t==="<$>"?"textstyle":"displaystyle"});let e=this.scan(a=>a===t);return this.match(t)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),e}scanEnvironment(){if(!this.match("\\begin"))return null;let t=this.scanArgument("string");if(!t)return null;let e=nu(t);if(!e)return this.onError({code:"unknown-environment",arg:t}),null;let a=[];if(e.params)for(let c of e.params)if(c.isOptional)a.push(this.scanOptionalArgument(c.type));else{let d=this.scanArgument(c.type);d||this.onError({code:"missing-argument",arg:t}),a.push(d)}this.beginContext({tabular:e.tabular,root:e.rootOnly});let s=[],o=[],l=[],u=!1;do if(this.end()&&(this.onError({code:"unbalanced-environment",arg:t}),u=!0),!u&&this.match("\\end")&&(this.scanArgument("string")!==t&&this.onError({code:"unbalanced-environment",arg:t}),u=!0),!u)if(this.matchColumnSeparator())l.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){l.push(this.mathlist),this.mathlist=[];let c=null;this.skipWhitespace(),this.match("[")&&(c=this.scanDimen(),this.skipWhitespace(),this.match("]")),o.push(c??{dimension:0}),s.push(l),l=[]}else this.mathlist.push(...this.scan(c=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline"].includes(c)));while(!u);return l.push(this.mathlist),l.length>0&&s.push(l),this.endContext(),e.rootOnly&&(this.index=this.tokens.length),e.createAtom(t,s,o,a,this.context.maxMatrixCols)}scanExpression(){let t=this.mathlist;if(this.mathlist=[],this.parseExpression()){let e=this.mathlist;return this.mathlist=t,e}return this.mathlist=t,null}scan(t){this.beginContext(),t||(t=u=>u==="<}>");let e="",a=null,s=[],o=null;for(;!this.end()&&!t(this.peek());)this.hasInfixCommand()&&!e?(e=this.get(),a=se(e,"math"),a&&(s=this.scanArguments(a)[1]),o=this.mathlist,this.mathlist=[]):this.parseExpression();let l;return e?(s.unshift(this.mathlist),o&&s.unshift(o),l=[a.createAtom({command:e,args:s,style:this.style,mode:this.parseMode})]):l=this.mathlist,this.endContext(),l}scanGroup(){let t=this.index;if(!this.match("<{>"))return null;let e=this.scan(s=>s==="<}>");if(this.match("<}>")||this.onError({code:"unbalanced-braces"}),e.length===1&&e[0].type==="placeholder")return e[0];let a=new en(e,this.parseMode);return a.verbatimLatex=vr(this.tokens.slice(t,this.index)),a}scanSmartFence(){if(this.skipWhitespace(),!this.match("("))return null;this.beginContext();let t=1;for(;!this.end()&&t!==0;)this.match("(")&&(t+=1),this.match(")")&&(t-=1),t!==0&&this.parseExpression();let e=new G("",this.mathlist,{leftDelim:"(",rightDelim:t===0?")":"?"});return this.endContext(),e}scanDelim(){this.skipWhitespace();let t=this.peek();if(!t)return this.onError({code:"unexpected-end-of-string"}),null;if(!nn(t)&&!t.startsWith("\\"))return null;this.next();let e=se(t,"math");return e?e.definitionType==="function"&&e.ifMode&&!e.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:t}),null):e.definitionType==="symbol"&&(e.type==="mopen"||e.type==="mclose")||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(t)?t:(this.onError({code:"unexpected-delimiter",arg:t}),null):(this.onError({code:"unknown-command",arg:t}),null)}scanLeftRight(){var t;if(this.match("\\right"))return this.onError({code:"unbalanced-braces"}),new mt("\\right");if(this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),new mt("\\mright");let e="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;e="\\mright"}let a=this.scanDelim();if(!a)return this.onError({code:"unexpected-delimiter"}),new mt(e==="\\right"?"\\left":"\\mleft");for(this.beginContext();!this.end()&&!this.match(e);)this.parseExpression();let s=this.mathlist;this.endContext();let o=(t=this.scanDelim())!=null?t:".";return new G(e==="\\right"?"left...right":"mleft...mright",s,{leftDelim:a,rightDelim:o,style:this.style})}parseSupSub(){if(this.parseMode!=="math")return!1;let t=this.peek();if(t!=="^"&&t!=="_"&&t!=="'")return!1;let e=this.lastSubsupAtom();for(;t==="^"||t==="_"||t==="'";)this.match("'")?this.match("'")?e.addChild(new b({type:"mord",command:"\\doubleprime",mode:"math",value:""}),"superscript"):e.addChild(new b({type:"mord",command:"\\prime",mode:"math",value:""}),"superscript"):(this.match("^")||this.match("_"))&&e.addChildren(C(this.scanArgument("expression")),t==="_"?"subscript":"superscript"),t=this.peek();return!0}parseLimits(){if(this.parseMode!=="math")return!1;let t=this.match("\\limits"),e=!t&&this.match("\\nolimits"),a=!e&&!t&&this.match("\\displaylimits");if(!t&&!e&&!a)return!1;let s=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return s===null?!1:(s.explicitSubsupPlacement=!0,t&&(s.subsupPlacement="over-under"),e&&(s.subsupPlacement="adjacent"),a&&(s.subsupPlacement="auto"),!0)}scanArguments(t){if(!(t!=null&&t.params))return[void 0,[]];let e,a=[],s=t.infix?2:0;for(;s<t.params.length;){let o=t.params[s];o.type==="rest"?a.push(this.scan(l=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(l))):o.isOptional?a.push(this.scanOptionalArgument(o.type)):o.type.endsWith("*")?e=o.type.slice(0,-1):a.push(this.scanArgument(o.type)),s+=1}return[e,a]}scanSymbolOrLiteral(){let t=this.peek();if(!t)return null;this.next();let e;if(nn(t)){let a=ge.createAtom(this.parseMode,t,p({},this.style));return a?[a]:null}if(e=this.scanMacro(t),e)return[e];if(t.startsWith("\\")){let a=se(t,this.parseMode);if(!a)return this.onError({code:"unknown-command",arg:t}),[new mt(t)];if(a.definitionType==="symbol"){let s=p({},this.style);a.variant&&(s.variant=a.variant),e=new b({type:a.type,command:t,style:s,value:String.fromCodePoint(a.codepoint),mode:this.parseMode,verbatimLatex:t})}else{if(a.applyMode||a.applyStyle||a.infix)return this.onError({code:"invalid-command",arg:t}),[new mt(t)];a.createAtom&&(e=a.createAtom({command:t,args:[],style:this.style,mode:this.parseMode}))}}return e?[e]:null}scanArgument(t){var e;this.skipFiller();let a=this.parseMode;if(t==="auto"&&(t=a),!this.match("<{>")){if(t==="string")return this.scanString();if(t==="value")return this.scanValue();if(t==="delim")return(e=this.scanDelim())!=null?e:".";if(t==="expression")return this.scanExpression();if(t==="math"){t!==a&&this.beginContext({mode:"math"});let o=this.scanSymbolOrLiteral();return t!==a&&this.endContext(),o}if(t==="text"){t!==a&&this.beginContext({mode:"text"});let o=this.scanSymbolOrLiteral();return t!==a&&this.endContext(),o}return t==="balanced-string"?null:t==="rest"?this.scan(o=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(o)):null}if(t==="text"){this.beginContext({mode:"text"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let o=this.mathlist;return this.endContext(),{group:o}}if(t==="math"){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let o=this.mathlist;return this.endContext(),{group:o}}let s=null;if(t==="expression"){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let o=this.mathlist;return this.endContext(),{group:o}}return t==="string"?s=this.scanString():t==="balanced-string"?s=this.scanBalancedString():t==="colspec"?s=this.scanColspec():t==="value"&&(s=this.scanValue()),this.skipUntilToken("<}>"),s}scanOptionalArgument(t){if(t=t==="auto"?this.parseMode:t,this.skipFiller(),!this.match("["))return null;let e=null;for(;!this.end()&&!this.match("]");)if(t==="string")e=this.scanString();else if(t==="value")e=this.scanValue();else if(t==="colspec")e=this.scanColspec();else if(t==="bbox"){let a={},s=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let o of s){let l=o.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(l)a.padding={dimension:parseInt(l[1]),unit:l[2]};else{let u=o.match(/^\s*border\s*:\s*(.*)/);u?a.border=u[1]:a.backgroundcolor={string:o}}}e=a}else t==="math"&&(this.beginContext({mode:"math"}),e=this.mathlist.concat(this.scan(a=>a==="]")),this.endContext());return e}scanSymbolOrCommand(t){var e,a,s;if(t==="\\placeholder"){let c=this.scanOptionalArgument("string"),d=this.scanOptionalArgument("math"),m=b.serialize(d,{defaultMode:"math"}),g=[],A;!A&&m==="correct"?A="correct":!A&&m==="incorrect"?A="incorrect":m!==""&&(g=d);let P=this.scanOptionalArgument("string")==="locked",W=this.scanArgument("auto"),me;return W&&Array.isArray(W)&&W.length>0?me=W:W&&typeof W=="object"&&"group"in W?me=W.group:me=g,c?[new rn(c,A,P,me??g,{mode:this.parseMode,style:this.style})]:[new Le({mode:this.parseMode,style:this.style})]}if(t==="\\renewcommand"||t==="\\newcommand"||t==="\\providecommand"||t==="\\def"){let c=this.index,d=this.scanLiteralGroup()||this.next();if(!d)return null;if(this.context.registers[d.substring(1)]){let m=this.scanArgument("string");m!==null&&(this.context.registers[d.substring(1)]=m);let g=R([t,vr(this.tokens.slice(c,this.index))]);return[new b({type:"text",value:"",verbatimLatex:g})]}}let o=this.scanMacro(t);if(o)return[o];let l=se(t,this.parseMode);if(!l)return this.parseMode==="text"?(/[a-zA-Z]/.test((e=this.peek())!=null?e:"")&&(t+=" "),[...t].map(c=>new b({type:"text",value:c,mode:"text",style:this.style}))):(this.onError({code:"unknown-command",arg:t}),[new mt(t)]);let u=this.index;if(l.definitionType==="symbol"){let c=p({},this.style);l.variant&&(c.variant=l.variant),o=new b({type:l.type,command:t,style:c,value:String.fromCodePoint(l.codepoint),mode:this.parseMode})}else{if(l.ifMode&&!l.ifMode.includes(this.parseMode))return[];let c=this.parseMode;l.applyMode&&(this.parseMode=l.applyMode);let d,m=[];if(l.parse?m=l.parse(this):[d,m]=this.scanArguments(l),this.parseMode=c,l.applyMode&&!l.applyStyle&&!l.createAtom)return C(m[0]);if(l.infix)return this.onError({code:"too-many-infix-commands",arg:t}),null;if(typeof l.createAtom=="function")o=l.createAtom({command:t,args:m,style:this.style,mode:this.parseMode}),d&&(o.body=C(this.scanArgument(d)));else if(typeof l.applyStyle=="function"){let g=l.applyStyle(this.style,t,m,this.context),A=this.parseMode;if(l.applyMode&&(this.parseMode=l.applyMode),d){let P=this.style;this.style=g;let W=this.scanArgument(d);return this.style=P,this.parseMode=A,C(W)}this.style=g}else o=new b({type:"mord",command:(a=l.command)!=null?a:t,style:p({},this.style),value:t,mode:(s=l.applyMode)!=null?s:this.parseMode})}if(!o)return null;if(o instanceof b&&o.verbatimLatex===void 0&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(t)){let c=R([t,vr(this.tokens.slice(u,this.index))]);c&&(o.verbatimLatex=c)}if(o.verbatimLatex===null&&(o.verbatimLatex=void 0),o.isFunction&&this.smartFence){let c=this.scanSmartFence();if(c)return[o,c]}return[o]}scanSymbolCommandOrLiteral(){this.expandUnicode();let t=this.get();if(!t)return null;if(nn(t)){let e=ge.createAtom(this.parseMode,t,p({},this.style));if(!e)return null;if(e.isFunction&&this.smartFence){let a=this.scanSmartFence();if(a)return[e,a]}return[e]}return t.startsWith("\\")?this.scanSymbolOrCommand(t):t==="<space>"?this.parseMode==="text"?[new $e(" "," ",this.style)]:null:(t==="<}>"?this.onError({latex:"",code:"unbalanced-braces"}):this.onError({latex:"",code:"unexpected-token",arg:t}),null)}scanMacro(t){var e;let a=this.context.getMacro(t);if(!a)return null;let s=this.index,o=a.args,l={"?":(e=this.args)==null?void 0:e.call(this,"?")};for(let u=1;u<=o;u++){let c=this.scanLiteralGroup();if(!c){let d=this.index;this.scanExpression(),c=vr(this.tokens.slice(d,this.index))}l[u]=c}return new tn(t,{expand:a.expand,captureSelection:a.captureSelection,args:s===this.index?null:vr(this.tokens.slice(s,this.index)),style:this.parsingContext.style,body:he(a.def,{context:this.context,parseMode:this.parseMode,args:u=>l[u],mathstyle:this.parsingContext.mathstyle,style:this.parsingContext.style})})}parseExpression(){var t,e,a,s;let o=(s=(a=(e=(t=this.scanEnvironment())!=null?t:this.scanModeShift())!=null?e:this.scanModeSet())!=null?a:this.scanGroup())!=null?s:this.scanLeftRight();if(o===null){if(this.parseSupSub()||this.parseLimits())return!0;o=this.scanSymbolCommandOrLiteral()}return o?(Y(o)?this.mathlist.push(...o):this.mathlist.push(o),!0):!1}};function he(t,e){var a,s,o,l;let u=(a=e?.args)!=null?a:void 0,c=new Ua(qi(t,u),e?.context,{args:u,mathstyle:(s=e?.mathstyle)!=null?s:"displaystyle",parseMode:(o=e?.parseMode)!=null?o:"math",style:(l=e?.style)!=null?l:{}}),d=[];for(;!c.end();)d.push(...c.scan(()=>!1));return d}function ja(t,e){var a;let s=new Ua(qi(t,null),e?.context,{mathstyle:"displaystyle",parseMode:(a=e?.parseMode)!=null?a:"math"});for(;!s.end();)s.scan();return s.errors}var Xn=class fw extends b{constructor(e,a){super({type:"chem"},{command:e,mode:"math"});let s=ce.go(S.go(a,e==="\\pu"?"pu":"ce"),!1);this.body=he(s),this._verbatimLatex=e+"{"+a+"}",this.arg=a,this.captureSelection=!0}static fromJson(e){return new fw(e.command,e.arg)}set verbatimLatex(e){}get verbatimLatex(){return this._verbatimLatex}toJson(){return f(p({},super.toJson()),{arg:this.arg})}render(e){let a=b.createBox(e,this.body,{type:"inner"});return this.caret&&(a.caret=this.caret),this.bind(e,a)}_serialize(e){return this.verbatimLatex,this.verbatimLatex}};v(["ce","pu"],"{chemformula:balanced-string}",{createAtom:t=>{var e;return new Xn(t.command,(e=t.args[0])!=null?e:"")}});var S={go:function(t,e){if(!t)return[];e===void 0&&(e="ce");var a="0",s={};s.parenthesisLevel=0,t=t.replace(/\n/g," "),t=t.replace(/[\u2212\u2013\u2014\u2010]/g,"-"),t=t.replace(/[\u2026]/g,"...");for(var o,l=10,u=[];;){o!==t?(l=10,o=t):l--;var c=S.stateMachines[e],d=c.transitions[a]||c.transitions["*"];e:for(var m=0;m<d.length;m++){var g=S.patterns.match_(d[m].pattern,t);if(g){for(var A=d[m].task,P=0;P<A.action_.length;P++){var W;if(c.actions[A.action_[P].type_])W=c.actions[A.action_[P].type_](s,g.match_,A.action_[P].option);else if(S.actions[A.action_[P].type_])W=S.actions[A.action_[P].type_](s,g.match_,A.action_[P].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+A.action_[P].type_+")"];S.concatArray(u,W)}if(a=A.nextState||a,t.length>0){if(A.revisit||(t=g.remainder),!A.toContinue)break e}else return u}}if(l<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(t,e){if(e)if(Object.prototype.toString.call(e)==="[object Array]")for(var a=0;a<e.length;a++)t.push(e[a]);else t.push(e)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return e&&e[0]?{match_:e.slice(1),remainder:t.substr(e[0].length)}:null},"(-)(9)^(-9)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return e&&e[0]?{match_:e.slice(1),remainder:t.substr(e[0].length)}:null},"state of aggregation $":function(t){var e=S.patterns.findObserveGroups(t,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(e&&e.remainder.match(/^($|[\s,;\)\]\}])/))return e;var a=t.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return a?{match_:a[0],remainder:t.substr(a[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(t){return S.patterns.findObserveGroups(t,"^{","","","}")},"^($...$)":function(t){return S.patterns.findObserveGroups(t,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(t){return S.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(t){return S.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(t){return S.patterns.findObserveGroups(t,"_{","","","}")},"_($...$)":function(t){return S.patterns.findObserveGroups(t,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(t){return S.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(t){return S.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(t){return S.patterns.findObserveGroups(t,"","{","}","")},"{(...)}":function(t){return S.patterns.findObserveGroups(t,"{","","","}")},"$...$":function(t){return S.patterns.findObserveGroups(t,"","$","$","")},"${(...)}$":function(t){return S.patterns.findObserveGroups(t,"${","","","}$")},"$(...)$":function(t){return S.patterns.findObserveGroups(t,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(t){return S.patterns.findObserveGroups(t,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(t){return S.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(t){return S.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(t){return S.patterns.findObserveGroups(t,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(t){return S.patterns.findObserveGroups(t,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(t){return S.patterns.findObserveGroups(t,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(t){var e;if(e=t.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/),e)return{match_:e[0],remainder:t.substr(e[0].length)};var a=S.patterns.findObserveGroups(t,"","$","$","");return a&&(e=a.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/),e)?{match_:e[0],remainder:t.substr(e[0].length)}:null},amount2:function(t){return this.amount(t)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(t){if(t.match(/^\([a-z]+\)$/))return null;var e=t.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return e?{match_:e[0],remainder:t.substr(e[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(t,e,a,s,o,l,u,c,d,m){var g=function(De,Xe){if(typeof Xe=="string")return De.indexOf(Xe)!==0?null:Xe;var qe=De.match(Xe);return qe?qe[0]:null},A=function(De,Xe,qe){for(var Rs=0;Xe<De.length;){var Vc=De.charAt(Xe),So=g(De.substr(Xe),qe);if(So!==null&&Rs===0)return{endMatchBegin:Xe,endMatchEnd:Xe+So.length};if(Vc==="{")Rs++;else if(Vc==="}"){if(Rs===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];Rs--}Xe++}return null},P=g(t,e);if(P===null||(t=t.substr(P.length),P=g(t,a),P===null))return null;var W=A(t,P.length,s||o);if(W===null)return null;var me=t.substring(0,s?W.endMatchEnd:W.endMatchBegin);if(l||u){var ve=this.findObserveGroups(t.substr(W.endMatchEnd),l,u,c,d);if(ve===null)return null;var He=[me,ve.match_];return{match_:m?He.join(""):He,remainder:ve.remainder}}else return{match_:me,remainder:t.substr(W.endMatchEnd)}},match_:function(t,e){var a=S.patterns.patterns[t];if(a===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+t+")"];if(typeof a=="function")return S.patterns.patterns[t](e);var s=e.match(a);if(s){var o;return s[2]?o=[s[1],s[2]]:s[1]?o=s[1]:o=s[0],{match_:o,remainder:e.substr(s[0].length)}}return null}},actions:{"a=":function(t,e){t.a=(t.a||"")+e},"b=":function(t,e){t.b=(t.b||"")+e},"p=":function(t,e){t.p=(t.p||"")+e},"o=":function(t,e){t.o=(t.o||"")+e},"q=":function(t,e){t.q=(t.q||"")+e},"d=":function(t,e){t.d=(t.d||"")+e},"rm=":function(t,e){t.rm=(t.rm||"")+e},"text=":function(t,e){t.text_=(t.text_||"")+e},insert:function(t,e,a){return{type_:a}},"insert+p1":function(t,e,a){return{type_:a,p1:e}},"insert+p1+p2":function(t,e,a){return{type_:a,p1:e[0],p2:e[1]}},copy:function(t,e){return e},rm:function(t,e){return{type_:"rm",p1:e||""}},text:function(t,e){return S.go(e,"text")},"{text}":function(t,e){var a=["{"];return S.concatArray(a,S.go(e,"text")),a.push("}"),a},"tex-math":function(t,e){return S.go(e,"tex-math")},"tex-math tight":function(t,e){return S.go(e,"tex-math tight")},bond:function(t,e,a){return{type_:"bond",kind_:a||e}},"color0-output":function(t,e){return{type_:"color0",color:e[0]}},ce:function(t,e){return S.go(e)},"1/2":function(t,e){var a=[];e.match(/^[+\-]/)&&(a.push(e.substr(0,1)),e=e.substr(1));var s=e.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return s[1]=s[1].replace(/\$/g,""),a.push({type_:"frac",p1:s[1],p2:s[2]}),s[3]&&(s[3]=s[3].replace(/\$/g,""),a.push({type_:"tex-math",p1:s[3]})),a},"9,9":function(t,e){return S.go(e,"9,9")}},createTransitions:function(t){var e,a,s,o,l={};for(e in t)for(a in t[e])for(s=a.split("|"),t[e][a].stateArray=s,o=0;o<s.length;o++)l[s[o]]=[];for(e in t)for(a in t[e])for(s=t[e][a].stateArray||[],o=0;o<s.length;o++){var u=t[e][a];if(u.action_){u.action_=[].concat(u.action_);for(var c=0;c<u.action_.length;c++)typeof u.action_[c]=="string"&&(u.action_[c]={type_:u.action_[c]})}else u.action_=[];for(var d=e.split("|"),m=0;m<d.length;m++)if(s[o]==="*")for(var g in l)l[g].push({pattern:d[m],task:u});else l[s[o]].push({pattern:d[m],task:u})}return l},stateMachines:{}};S.stateMachines={ce:{transitions:S.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(t,e){var a;if((t.d||"").match(/^[0-9]+$/)){var s=t.d;t.d=void 0,a=this.output(t),t.b=s}else a=this.output(t);return S.actions["o="](t,e),a},"d= kv":function(t,e){t.d=e,t.dType="kv"},"charge or bond":function(t,e){if(t.beginsWithBond){var a=[];return S.concatArray(a,this.output(t)),S.concatArray(a,S.actions.bond(t,e,"-")),a}else t.d=e},"- after o/d":function(t,e,a){var s=S.patterns.match_("orbital",t.o||""),o=S.patterns.match_("one lowercase greek letter $",t.o||""),l=S.patterns.match_("one lowercase latin letter $",t.o||""),u=S.patterns.match_("$one lowercase latin letter$ $",t.o||""),c=e==="-"&&(s&&s.remainder===""||o||l||u);c&&!t.a&&!t.b&&!t.p&&!t.d&&!t.q&&!s&&l&&(t.o="$"+t.o+"$");var d=[];return c?(S.concatArray(d,this.output(t)),d.push({type_:"hyphen"})):(s=S.patterns.match_("digits",t.d||""),a&&s&&s.remainder===""?(S.concatArray(d,S.actions["d="](t,e)),S.concatArray(d,this.output(t))):(S.concatArray(d,this.output(t)),S.concatArray(d,S.actions.bond(t,e,"-")))),d},"a to o":function(t){t.o=t.a,t.a=void 0},"sb=true":function(t){t.sb=!0},"sb=false":function(t){t.sb=!1},"beginsWithBond=true":function(t){t.beginsWithBond=!0},"beginsWithBond=false":function(t){t.beginsWithBond=!1},"parenthesisLevel++":function(t){t.parenthesisLevel++},"parenthesisLevel--":function(t){t.parenthesisLevel--},"state of aggregation":function(t,e){return{type_:"state of aggregation",p1:S.go(e,"o")}},comma:function(t,e){var a=e.replace(/\s*$/,""),s=a!==e;return s&&t.parenthesisLevel===0?{type_:"comma enumeration L",p1:a}:{type_:"comma enumeration M",p1:a}},output:function(t,e,a){var s;if(!t.r)s=[],!t.a&&!t.b&&!t.p&&!t.o&&!t.q&&!t.d&&!a||(t.sb&&s.push({type_:"entitySkip"}),!t.o&&!t.q&&!t.d&&!t.b&&!t.p&&a!==2?(t.o=t.a,t.a=void 0):!t.o&&!t.q&&!t.d&&(t.b||t.p)?(t.o=t.a,t.d=t.b,t.q=t.p,t.a=t.b=t.p=void 0):t.o&&t.dType==="kv"&&S.patterns.match_("d-oxidation$",t.d||"")?t.dType="oxidation":t.o&&t.dType==="kv"&&!t.q&&(t.dType=void 0),s.push({type_:"chemfive",a:S.go(t.a,"a"),b:S.go(t.b,"bd"),p:S.go(t.p,"pq"),o:S.go(t.o,"o"),q:S.go(t.q,"pq"),d:S.go(t.d,t.dType==="oxidation"?"oxidation":"bd"),dType:t.dType}));else{var o;t.rdt==="M"?o=S.go(t.rd,"tex-math"):t.rdt==="T"?o=[{type_:"text",p1:t.rd||""}]:o=S.go(t.rd);var l;t.rqt==="M"?l=S.go(t.rq,"tex-math"):t.rqt==="T"?l=[{type_:"text",p1:t.rq||""}]:l=S.go(t.rq),s={type_:"arrow",r:t.r,rd:o,rq:l}}for(var u in t)u!=="parenthesisLevel"&&u!=="beginsWithBond"&&delete t[u];return s},"oxidation-output":function(t,e){var a=["{"];return S.concatArray(a,S.go(e,"oxidation")),a.push("}"),a},"frac-output":function(t,e){return{type_:"frac-ce",p1:S.go(e[0]),p2:S.go(e[1])}},"overset-output":function(t,e){return{type_:"overset",p1:S.go(e[0]),p2:S.go(e[1])}},"underset-output":function(t,e){return{type_:"underset",p1:S.go(e[0]),p2:S.go(e[1])}},"underbrace-output":function(t,e){return{type_:"underbrace",p1:S.go(e[0]),p2:S.go(e[1])}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:S.go(e[1])}},"r=":function(t,e){t.r=e},"rdt=":function(t,e){t.rdt=e},"rd=":function(t,e){t.rd=e},"rqt=":function(t,e){t.rqt=e},"rq=":function(t,e){t.rq=e},operator:function(t,e,a){return{type_:"operator",kind_:a||e}}}},a:{transitions:S.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:S.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(t){if(t.text_){var e={type_:"text",p1:t.text_};for(var a in t)delete t[a];return e}}}},pq:{transitions:S.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(t,e){return{type_:"state of aggregation subscript",p1:S.go(e,"o")}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:S.go(e[1],"pq")}}}},bd:{transitions:S.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(t,e){return{type_:"color",color1:e[0],color2:S.go(e[1],"bd")}}}},oxidation:{transitions:S.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(t,e){return{type_:"roman numeral",p1:e||""}}}},"tex-math":{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var a in t)delete t[a];return e}}}},"tex-math tight":{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(t,e){t.o=(t.o||"")+"{"+e+"}"},output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var a in t)delete t[a];return e}}}},"9,9":{transitions:S.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:S.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(t,e){var a=[];return e[0]==="+-"||e[0]==="+/-"?a.push("\\pm "):e[0]&&a.push(e[0]),e[1]&&(S.concatArray(a,S.go(e[1],"pu-9,9")),e[2]&&(e[2].match(/[,.]/)?S.concatArray(a,S.go(e[2],"pu-9,9")):a.push(e[2])),(e[3]||e[4])&&(e[3]==="e"||e[4]==="*"?a.push({type_:"cdot"}):a.push({type_:"times"}))),e[5]&&a.push("10^{"+e[5]+"}"),a},"number^":function(t,e){var a=[];return e[0]==="+-"||e[0]==="+/-"?a.push("\\pm "):e[0]&&a.push(e[0]),S.concatArray(a,S.go(e[1],"pu-9,9")),a.push("^{"+e[2]+"}"),a},operator:function(t,e,a){return{type_:"operator",kind_:a||e}},space:function(){return{type_:"pu-space-1"}},output:function(t){var e,a=S.patterns.match_("{(...)}",t.d||"");a&&a.remainder===""&&(t.d=a.match_);var s=S.patterns.match_("{(...)}",t.q||"");if(s&&s.remainder===""&&(t.q=s.match_),t.d&&(t.d=t.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.d=t.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),t.q){t.q=t.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.q=t.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var o={d:S.go(t.d,"pu"),q:S.go(t.q,"pu")};t.o==="//"?e={type_:"pu-frac",p1:o.d,p2:o.q}:(e=o.d,o.d.length>1||o.q.length>1?e.push({type_:" / "}):e.push({type_:"/"}),S.concatArray(e,o.q))}else e=S.go(t.d,"pu-2");for(var l in t)delete t[l];return e}}},"pu-2":{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(t,e){t.rm+="^{"+e+"}"},space:function(){return{type_:"pu-space-2"}},output:function(t){var e=[];if(t.rm){var a=S.patterns.match_("{(...)}",t.rm||"");a&&a.remainder===""?e=S.go(a.match_,"pu"):e={type_:"rm",p1:t.rm}}for(var s in t)delete t[s];return e}}},"pu-9,9":{transitions:S.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){var a=t.text_.length%3;a===0&&(a=3);for(var s=t.text_.length-3;s>0;s-=3)e.push(t.text_.substr(s,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(0,a)),e.reverse()}else e.push(t.text_);for(var o in t)delete t[o];return e},"output-o":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){for(var a=t.text_.length-3,s=0;s<a;s+=3)e.push(t.text_.substr(s,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(s))}else e.push(t.text_);for(var o in t)delete t[o];return e}}}};var ce={go:function(t,e){if(!t)return"";for(var a="",s=!1,o=0;o<t.length;o++){var l=t[o];typeof l=="string"?a+=l:(a+=ce._go2(l),l.type_==="1st-level escape"&&(s=!0))}return!e&&!s&&a&&(a="{"+a+"}"),a},_goInner:function(t){return t&&ce.go(t,!0)},_go2:function(t){var e;switch(t.type_){case"chemfive":e="";var a={a:ce._goInner(t.a),b:ce._goInner(t.b),p:ce._goInner(t.p),o:ce._goInner(t.o),q:ce._goInner(t.q),d:ce._goInner(t.d)};a.a&&(a.a.match(/^[+\-]/)&&(a.a="{"+a.a+"}"),e+=a.a+"\\,"),(a.b||a.p)&&(e+="{\\vphantom{X}}",e+="^{\\hphantom{"+(a.b||"")+"}}_{\\hphantom{"+(a.p||"")+"}}",e+="{\\vphantom{X}}",e+="^{\\smash[t]{\\vphantom{2}}\\llap{"+(a.b||"")+"}}",e+="_{\\vphantom{2}\\llap{\\smash[t]{"+(a.p||"")+"}}}"),a.o&&(a.o.match(/^[+\-]/)&&(a.o="{"+a.o+"}"),e+=a.o),t.dType==="kv"?((a.d||a.q)&&(e+="{\\vphantom{X}}"),a.d&&(e+="^{"+a.d+"}"),a.q&&(e+="_{\\smash[t]{"+a.q+"}}")):t.dType==="oxidation"?(a.d&&(e+="{\\vphantom{X}}",e+="^{"+a.d+"}"),a.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+a.q+"}}")):(a.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+a.q+"}}"),a.d&&(e+="{\\vphantom{X}}",e+="^{"+a.d+"}"));break;case"rm":e="\\mathrm{"+t.p1+"}";break;case"text":t.p1.match(/[\^_]/)?(t.p1=t.p1.replace(" ","~").replace("-","\\text{-}"),e="\\mathrm{"+t.p1+"}"):e="\\text{"+t.p1+"}";break;case"roman numeral":e="\\mathrm{"+t.p1+"}";break;case"state of aggregation":e="\\mskip2mu "+ce._goInner(t.p1);break;case"state of aggregation subscript":e="\\mskip1mu "+ce._goInner(t.p1);break;case"bond":if(e=ce._getBond(t.kind_),!e)throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+t.kind_+")"];break;case"frac":var s="\\frac{"+t.p1+"}{"+t.p2+"}";e="\\mathchoice{\\textstyle"+s+"}{"+s+"}{"+s+"}{"+s+"}";break;case"pu-frac":var o="\\frac{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";e="\\mathchoice{\\textstyle"+o+"}{"+o+"}{"+o+"}{"+o+"}";break;case"tex-math":e=t.p1+" ";break;case"frac-ce":e="\\frac{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";break;case"overset":e="\\overset{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";break;case"underset":e="\\underset{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";break;case"underbrace":e="\\underbrace{"+ce._goInner(t.p1)+"}_{"+ce._goInner(t.p2)+"}";break;case"color":e="{\\color{"+t.color1+"}{"+ce._goInner(t.color2)+"}}";break;case"color0":e="\\color{"+t.color+"}";break;case"arrow":var l={rd:ce._goInner(t.rd),rq:ce._goInner(t.rq)},u=ce._getArrow(t.r);l.rd||l.rq?t.r==="<=>"||t.r==="<=>>"||t.r==="<<=>"||t.r==="<-->"?(u="\\long"+u,l.rd&&(u="\\overset{"+l.rd+"}{"+u+"}"),l.rq&&(t.r==="<-->"?u="\\underset{\\lower2mu{"+l.rq+"}}{"+u+"}":u="\\underset{\\lower6mu{"+l.rq+"}}{"+u+"}"),u=" {}\\mathrel{"+u+"}{} "):(l.rq&&(u+="[{"+l.rq+"}]"),u+="{"+l.rd+"}",u=" {}\\mathrel{\\x"+u+"}{} "):u=" {}\\mathrel{\\long"+u+"}{} ",e=u;break;case"operator":e=ce._getOperator(t.kind_);break;case"1st-level escape":e=t.p1+" ";break;case"space":e=" ";break;case"entitySkip":e="~";break;case"pu-space-1":e="~";break;case"pu-space-2":e="\\mkern3mu ";break;case"1000 separator":e="\\mkern2mu ";break;case"commaDecimal":e="{,}";break;case"comma enumeration L":e="{"+t.p1+"}\\mkern6mu ";break;case"comma enumeration M":e="{"+t.p1+"}\\mkern3mu ";break;case"comma enumeration S":e="{"+t.p1+"}\\mkern1mu ";break;case"hyphen":e="\\text{-}";break;case"addition compound":e="\\,{\\cdot}\\,";break;case"electron dot":e="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":e="{\\times}";break;case"prime":e="\\prime ";break;case"cdot":e="\\cdot ";break;case"tight cdot":e="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":e="\\times ";break;case"circa":e="{\\sim}";break;case"^":e="uparrow";break;case"v":e="downarrow";break;case"ellipsis":e="\\ldots ";break;case"/":e="/";break;case" / ":e="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return e},_getArrow:function(t){switch(t){case"->":return"rightarrow";case"":return"rightarrow";case"":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"leftrightarrows";case"<=>":return"rightleftharpoons";case"":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(t){switch(t){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(t){switch(t){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},on=class pw extends b{constructor(e){super(f(p({},e),{type:"delim"})),this.value=e.delim,this.size=e.size}static fromJson(e){return new pw(e)}toJson(){return f(p({},super.toJson()),{delim:this.value,size:this.size})}render(e){return new _(this.value,{type:"middle"})}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let a=se(this.command,this.mode);return a!=null&&a.serialize?a.serialize(this,e):q(this.command,this.value)}},an=class mw extends b{constructor(e){super(f(p({},e),{type:"sizeddelim",value:e.delim})),this.delimType=e.delimType,this.size=e.size}static fromJson(e){return new mw(e)}toJson(){return f(p({},super.toJson()),{delim:this.value,size:this.size,delimType:this.delimType})}render(e){let a=Cm(this.value,this.size,e,{classes:{open:"ML__open",close:"ML__close"}[this.delimType],type:this.delimType,isSelected:this.isSelected});return a?(a=this.bind(e,a),this.caret&&(a.caret=this.caret),a):null}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let a=se(this.command,this.mode);return a!=null&&a.serialize?a.serialize(this,e):q(this.command,this.value)}},tr=class gw extends b{constructor(e,a,s,o){var l,u;super({type:"enclose",command:e,style:o.style}),this.body=a,this.backgroundcolor=o.backgroundcolor,s.updiagonalarrow&&(s.updiagonalstrike=!1),s.box&&(s.left=!1,s.right=!1,s.bottom=!1,s.top=!1),this.notation=s,this.shadow=(l=o.shadow)!=null?l:"none",this.strokeWidth=(u=o.strokeWidth)!=null?u:"0.06em",this.strokeWidth||(this.strokeWidth="0.06em"),this.strokeStyle=o.strokeStyle,this.svgStrokeStyle=o.svgStrokeStyle,this.strokeColor=o.strokeColor,this.borderStyle=o.borderStyle,this.padding=o.padding,this.captureSelection=!1}static fromJson(e){return new gw(e.command,e.body,e.notation,e)}toJson(){return f(p({},super.toJson()),{notation:this.notation,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}_serialize(e){var a;if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let s=se(this.command,this.mode);if(s!=null&&s.serialize)return s.serialize(this,e);let o=(a=this.command)!=null?a:"";if(this.command==="\\enclose"){o+="{"+Object.keys(this.notation).join(" ")+"}";let l="",u="";this.backgroundcolor&&this.backgroundcolor!=="transparent"&&(l+=u+'mathbackground="'+this.backgroundcolor+'"',u=","),this.shadow&&this.shadow!=="auto"&&(l+=u+'shadow="'+this.shadow+'"',u=","),this.strokeWidth||this.strokeStyle!=="solid"?(l+=u+this.borderStyle,u=","):this.strokeColor&&this.strokeColor!=="currentColor"&&(l+=u+'mathcolor="'+this.strokeColor+'"',u=","),l&&(o+=`[${l}]`)}return q(o,this.bodyToLatex(e))}render(e){let a=new O({parent:e},this.style),s=b.createBox(a,this.body);if(!s)return null;let o=Tf(this.borderStyle),l=a.toEm(!this.padding||this.padding==="auto"?{register:"fboxsep"}:{string:this.padding});s.setStyle("position","relative"),s.setStyle("display","inline-block"),s.setStyle("height",s.height+s.depth,"em"),s.setStyle("width",s.width,"em");let u=new _(null,{classes:"ML__notation"}),c=s.height+s.depth+2*l,d=s.width+2*l,m="";if(this.notation.horizontalstrike&&(m+=this.line(3,50,97,50)),this.notation.verticalstrike&&(m+=this.line(50,3,50,97)),this.notation.updiagonalstrike&&(m+=this.line(3,97,97,3)),this.notation.downdiagonalstrike&&(m+=this.line(3,3,97,97)),this.notation.updiagonalarrow){m+=this.line(l.toString(),(l+s.depth+s.height).toString(),(l+s.width).toString(),l.toString());let A=.03*Math.sqrt(d*d+c*c)*1,P=s.width*A,W=(s.depth+s.height)*A,me=l+s.width,ve=l;ve+W-.4*P<0&&(ve=.4*P-W),m+='<polygon points="',m+=`${me},${ve} ${me-P-.4*W},${ve+W-.4*P} `,m+=`${me-.7*P},${ve+.7*W} ${me-P+.4*W},${ve+W+.4*P} `,m+=`${me},${ve}`,m+=`" stroke='none' fill="${this.strokeColor}"`,m+="/>"}if(this.notation.phasorangle){let A=Rm(a),P=(s.height+s.depth+2*A+l).toString(),W=(s.height+s.depth)/2;m+=this.line(l.toString(),P,(l+W+s.width).toString(),P),m+=this.line(l.toString(),P,(l+W).toString(),(l-A).toString()),c+=A,s.left+=c/2-l}if(this.notation.longdiv){let A=Rm(a);c+=A,m+=this.line(l.toString(),l.toString(),(l+s.width).toString(),l.toString());let P=.3;s.left+=P+A,s.setTop(l+A),m+='<path d="',m+=`M ${l} ${l}  a${P} ${(s.depth+s.height+2*A)/2}, 0, 1, 1, 0 ${s.depth+s.height+2*A} "`,m+=` stroke-width="${Df(a)}" stroke="${this.strokeColor}" fill="none"`,m+="/>"}if(u.height=s.height+l,u.depth=s.depth+l,u.setStyle("box-sizing","border-box"),u.setStyle("left",`calc(-1 * ${o} - ${l}em)`),u.setStyle("height",`calc( ${s.height+s.depth+2*l}em + ${o})`),u.setStyle("top",`calc(-${l}em )`),u.setStyle("width",`calc(${s.width+2*l}em + ${o})`),this.backgroundcolor&&u.setStyle("background-color",this.backgroundcolor),this.notation.box&&u.setStyle("border","1px solid red"),this.notation.actuarial&&(u.setStyle("border-top",this.borderStyle),u.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(u.setStyle("border-bottom",this.borderStyle),u.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(u.setStyle("border-radius","8px"),u.setStyle("border",this.borderStyle)),this.notation.circle&&(u.setStyle("border-radius","50%"),u.setStyle("border",this.borderStyle)),this.notation.top&&u.setStyle("border-top",this.borderStyle),this.notation.left&&u.setStyle("border-left",this.borderStyle),this.notation.right&&u.setStyle("border-right",this.borderStyle),this.notation.bottom&&u.setStyle("border-bottom",this.borderStyle),m){let A="";this.shadow==="auto"&&(A+="filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)"),this.shadow!=="none"&&(A+=`filter: drop-shadow(${this.shadow})`),A+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,A+=' stroke-linecap="round"',this.svgStrokeStyle&&(A+=` stroke-dasharray="${this.svgStrokeStyle}"`),u.svgStyle=A,u.svgOverlay=m}let g=new _([u,s]);return g.setStyle("position","relative"),g.setStyle("height",`${Math.floor(100*(u.depth+u.height))/100}em`),g.setStyle("display","inline-block"),g.height=u.height,g.depth=u.depth,g.left=l,g.right=l,this.caret&&(g.caret=this.caret),g.wrap(a)}line(e,a,s,o){return`<line x1="${Ja(e)}"  y1="${Ja(a)}" x2="${Ja(s)}" y2="${Ja(o)}" vector-effect="non-scaling-stroke"></line>`}};function Ja(t){return typeof t=="number"?`${Math.floor(100*t)/100}%`:t}function Tf(t){if(!t)return"1px";let e=t.match(/([0-9][a-zA-Z\%]+)/);return e===null?"1px":e[1]}function Df(t){return(Math.floor(100*t.metrics.sqrtRuleThickness/t.scalingFactor)/100/10).toString()+"em"}function Rm(t){let e=t.isDisplayStyle?tt:t.metrics.defaultRuleThickness;return t.metrics.defaultRuleThickness+t.scalingFactor*e/4}var sn={fractionNavigationOrder:"numerator-denominator"},pt=class yw extends b{constructor(e,a,s){var o,l,u;super(f(p({},s),{type:"genfrac",displayContainsHighlight:!0})),this.above=e,this.below=a,this.hasBarLine=(o=s?.hasBarLine)!=null?o:!0,this.continuousFraction=(l=s?.continuousFraction)!=null?l:!1,this.align=(u=s?.align)!=null?u:"center",this.numerPrefix=s?.numerPrefix,this.denomPrefix=s?.denomPrefix,this.mathstyleName=s?.mathstyleName,this.leftDelim=s?.leftDelim,this.rightDelim=s?.rightDelim}static fromJson(e){return new yw(e.above,e.below,e)}toJson(){let e={};return this.continuousFraction&&(e.continuousFraction=!0),this.align!=="center"&&(e.align=this.align),this.numerPrefix&&(e.numerPrefix=this.numerPrefix),this.denomPrefix&&(e.denomPrefix=this.denomPrefix),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.hasBarLine||(e.hasBarLine=!1),this.mathstyleName&&(e.mathstyleName=this.mathstyleName),p(p({},super.toJson()),e)}get children(){if(this._children)return this._children;let e=[];if(sn.fractionNavigationOrder==="denominator-numerator"){for(let a of this.below)e.push(...a.children),e.push(a);for(let a of this.above)e.push(...a.children),e.push(a)}else{for(let a of this.above)e.push(...a.children),e.push(a);for(let a of this.below)e.push(...a.children),e.push(a)}return this._children=e,e}render(e){var a,s;let o=new O({parent:e,mathstyle:this.mathstyleName},this.style),l=o.metrics,u=new O({parent:o,mathstyle:this.continuousFraction?"":"numerator"},this.style),c=this.numerPrefix?new _([new _(this.numerPrefix),b.createBox(u,this.above)],{isTight:u.isTight,type:"ignore"}):(a=b.createBox(u,this.above,{type:"ignore"}))!=null?a:new _(null,{type:"ignore"}),d=new O({parent:o,mathstyle:this.continuousFraction?"":"denominator"},this.style),m=this.denomPrefix?new _([new _(this.denomPrefix),b.createBox(d,this.below,{type:"ignore"})]):(s=b.createBox(d,this.below,{type:"ignore"}))!=null?s:new _(null,{type:"ignore"}),g=this.hasBarLine?l.defaultRuleThickness:0,A,P=0,W;o.isDisplayStyle?(A=u.metrics.num1,P=g>0?3*g:7*g,W=d.metrics.denom1):(g>0?(A=u.metrics.num2,P=g):(A=u.metrics.num3,P=3*l.defaultRuleThickness),W=d.metrics.denom2);let me=[];this.isSelected&&me.push("ML__selected");let ve=c.depth,He=m.height,De;if(g<=0){let Do=A-ve-(He-W);Do<P&&(A+=(P-Do)/2,W+=(P-Do)/2),De=new Q({individualShift:[{box:c,shift:-A,classes:[...me,Ga(this.align)]},{box:m,shift:W,classes:[...me,Ga(this.align)]}]}).wrap(o)}else{let Do=new _(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});Do.softWidth=Math.max(c.width,m.width),Do.height=g/2,Do.depth=g/2;let eh=Oe+g/2;A<P+ve+eh&&(A=P+ve+eh);let Ko=Oe-g/2;W<P+He-Ko&&(W=P+He-Ko),De=new Q({individualShift:[{box:m,shift:W,classes:[...me,Ga(this.align)]},{box:Do,shift:-Ko,classes:me},{box:c,shift:-A,classes:[...me,Ga(this.align)]}]}).wrap(o)}let Xe=o.isDisplayStyle?l.delim1:l.delim2,qe=this.leftDelim?this.bind(e,Yi("open",this.leftDelim,Xe,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):Qt(o,"ML__open"),Rs=null;this.continuousFraction?Rs=new _(null,{type:"close"}):this.rightDelim?Rs=this.bind(e,Yi("close",this.rightDelim,Xe,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):Rs=Qt(o,"ML__close");let Vc=new _([qe,De,Rs],{isTight:o.isTight,type:"inner",classes:"ML__mfrac"}),So=this.bind(e,Vc);return this.caret&&(So.caret=this.caret),this.attachSupsub(e,{base:So})}};function Ga(t){var e;return(e={left:"ML__left",right:"ML__right",center:"ML__center"}[t])!=null?e:"ML__center"}var ue=class bw extends b{constructor(e,a){var s;super({type:"latex",value:e,mode:"latex"}),this.isSuggestion=(s=a?.isSuggestion)!=null?s:!1,this.isError=!1}static fromJson(e){let a=new bw(e.value);return e.isSuggestion&&(a.isSuggestion=!0),e.isError&&(a.isError=!0),a}toJson(){let e={};return this.isSuggestion&&(e.isSuggestion=!0),this.isError&&(e.isError=!0),p({type:"latex",value:this.value},e)}render(e){let a=new _(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return a?(this.caret&&(a.caret=this.caret),this.bind(e,a)):null}},Rt=class _w extends b{constructor(e=""){super({type:"latexgroup",mode:"latex"}),this.body=[...e].map(a=>new ue(a)),this.skipBoundary=!0}static fromJson(e){return new _w}toJson(){return super.toJson()}render(e){let a=b.createBox(e,this.body);return a?(this.caret&&(a.caret=this.caret),this.bind(e,a)):null}_serialize(e){var a,s;return(s=(a=this.body)==null?void 0:a.map(o=>o.value).join(""))!=null?s:""}},ai=class xw extends b{constructor(e,a){super(f(p({},a),{type:"extensible-symbol",isFunction:a?.isFunction})),this.value=e,this.variant=a?.variant,this.subsupPlacement=a?.limits}static fromJson(e){return new xw(e.symbol,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.value&&(e.symbol=this.value),e}render(e){var a;let s=e.isDisplayStyle&&this.value!=="\\smallint",o=new _(this.value,{fontFamily:s?"Size2-Regular":"Size1-Regular",classes:"ML__op-symbol "+(s?"ML__large-op":"ML__small-op"),type:"op",maxFontSize:e.scalingFactor,isSelected:this.isSelected});if(!o)return null;o.right=o.italic;let l=(o.height-o.depth)/2-Oe*e.scalingFactor,u=o.italic;o.setTop(l);let c=o;if(this.superscript||this.subscript){let d=(a=this.subsupPlacement)!=null?a:"auto";d==="auto"&&e.isDisplayStyle&&(d="over-under"),c=d==="over-under"?this.attachLimits(e,{base:o,baseShift:l,slant:u}):this.attachSupsub(e,{base:o})}return new _(this.bind(e,c),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(e)}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let a=se(this.command,this.mode);if(a!=null&&a.serialize)return a.serialize(this,e);let s=[];return s.push(this.command),this.explicitSubsupPlacement&&(this.subsupPlacement==="over-under"&&s.push("\\limits"),this.subsupPlacement==="adjacent"&&s.push("\\nolimits"),this.subsupPlacement==="auto"&&s.push("\\displaylimits")),s.push(this.supsubToLatex(e)),R(s)}},ht=class ww extends b{constructor(e){let a=e.body;super(f(p({},e),{type:"overlap",body:typeof a=="string"?[new b({value:a})]:a,style:e?.style})),this.skipBoundary=!0,this.align=e?.align,this.boxType=e?.boxType}static fromJson(e){return new ww(e)}toJson(){let e={};return this.align&&(e.align=this.align),this.boxType&&(e.boxType=this.boxType),p(p({},super.toJson()),e)}render(e){let a=b.createBox(e,this.body,{classes:"ML__inner"});return a?(this.caret&&(a.caret=this.caret),this.bind(e,new _([a,new _(null,{classes:"ML__fix"})],{classes:this.align==="right"?"ML__rlap":"ML__llap",type:this.boxType}))):null}},we=class Ew extends b{constructor(e){var a,s,o,l;super({type:"overunder",command:e.command,style:e.style,mode:e.mode,body:e.body,skipBoundary:(a=e.skipBoundary)!=null?a:!0}),this.subsupPlacement=e.supsubPlacement,this.svgAbove=e.svgAbove,this.svgBelow=e.svgBelow,this.svgBody=e.svgBody,this.above=e.above,this.below=e.below,this.boxType=(s=e.boxType)!=null?s:"ord",this.paddedBody=(o=e.paddedBody)!=null?o:!1,this.paddedLabels=(l=e.paddedLabels)!=null?l:!1}static fromJson(e){return new Ew(e)}toJson(){let e=super.toJson();return this.skipBoundary||(e.skipBoundary=!1),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.svgAbove&&(e.svgAbove=this.svgAbove),this.svgBelow&&(e.svgBelow=this.svgBelow),this.svgBody&&(e.svgBody=this.svgBody),this.boxType!=="ord"&&(e.boxType=this.boxType),this.paddedBody&&(e.paddedBody=!0),this.paddedLabels&&(e.paddedLabels=!0),e}render(e){let a=this.svgBody?Wi(this.svgBody):b.createBox(e,this.body,{type:"ignore"}),s=new O({parent:e,mathstyle:"scriptstyle"},this.style),o=null;this.svgAbove?o=Wi(this.svgAbove):this.above&&(o=b.createBox(s,this.above,{type:"ignore"}));let l=null;this.svgBelow?l=Wi(this.svgBelow):this.below&&(l=b.createBox(s,this.below,{type:"ignore"})),this.paddedBody&&(a=new _([Qt(e,"ML__open"),a,Qt(e,"ML__close")],{type:"ignore"}));let u=Kf(e,{base:a,above:o,below:l,type:this.boxType==="bin"||this.boxType==="rel"?this.boxType:"ord",paddedAboveBelow:this.paddedLabels});return u?(this.subsupPlacement==="over-under"?u=this.attachLimits(e,{base:u,type:u.type}):u=this.attachSupsub(e,{base:u}),this.caret&&(u.caret=this.caret),this.bind(e,u)):null}};function Kf(t,e){if(!e.base)return null;if(!e.above&&!e.below){let c=new _(e.base,{type:e.type});return c.setStyle("position","relative"),c}let a=0;e.above&&(a=t.metrics.bigOpSpacing5);let s=null,o=e.base,l=0,u=["ML__center"];if(e.paddedAboveBelow&&u.push("ML__label_padding"),e.below&&e.above){let c=t.metrics.bigOpSpacing5+e.below.height+e.below.depth+o.depth+l;s=new Q({bottom:c,children:[t.metrics.bigOpSpacing5,{box:e.below,classes:u},{box:o,classes:["ML__center"]},a,{box:e.above,classes:u},t.metrics.bigOpSpacing5]})}else e.below?s=new Q({top:o.height-l,children:[t.metrics.bigOpSpacing5,{box:e.below,classes:u},{box:o,classes:["ML__center"]}]}):e.above&&(s=new Q({bottom:o.depth+l,children:[{box:o,classes:["ML__center"]},a,{box:e.above,classes:u},t.metrics.bigOpSpacing5]}));return new _(s,{type:e.type})}var Pt=class Sw extends b{constructor(e){var a,s,o,l;super(f(p({},e),{type:"phantom"})),this.captureSelection=!0,this.isInvisible=(a=e.isInvisible)!=null?a:!1,this.smashDepth=(s=e.smashDepth)!=null?s:!1,this.smashHeight=(o=e.smashHeight)!=null?o:!1,this.smashWidth=(l=e.smashWidth)!=null?l:!1}static fromJson(e){return new Sw(e)}toJson(){let e={};return this.isInvisible&&(e.isInvisible=!0),this.smashDepth&&(e.smashDepth=!0),this.smashHeight&&(e.smashHeight=!0),this.smashWidth&&(e.smashWidth=!0),p(p({},super.toJson()),e)}render(e){let a=new O({parent:e,isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return this.isInvisible,b.createBox(a,this.body,{classes:"ML__inner"});let s=b.createBox(this.isInvisible?a:e,this.body);if(!s)return null;if(this.smashWidth){let o=new _(null,{classes:"ML__fix"});return new _([s,o],{classes:"ML__rlap"}).wrap(e)}if(!this.smashHeight&&!this.smashDepth)return s;if(this.smashHeight&&(s.height=0),this.smashDepth&&(s.depth=0),s.children)for(let o of s.children)this.smashHeight&&(o.height=0),this.smashDepth&&(o.depth=0);return new Q({firstBaseline:[{box:s}]},{type:s.type}).wrap(e)}},zt=class Aw extends b{constructor(e){var a;super(p({type:"spacing"},e)),this.width=e?.width,this._braced=(a=e?.braced)!=null?a:!1}static fromJson(e){return new Aw(e)}toJson(){let e=super.toJson();return this.width!==void 0&&(e.width=this.width),this._braced&&(e.braced=!0),e}render(e){var a;if(this.command==="space")return new _(this.mode==="math"?null:" ");let s;if(this.width!==void 0)s=new _(null,{classes:"ML__mspace"}),s.left=e.toEm(this.width);else{let o=(a={"\\qquad":"ML__qquad","\\quad":"ML__quad","\\enspace":"ML__enspace","\\;":"ML__thickspace","\\:":"ML__mediumspace","\\>":"ML__mediumspace","\\,":"ML__thinspace","\\!":"ML__negativethinspace"}[this.command])!=null?a:"ML__mediumspace";s=new _(null,{classes:o})}return s=this.bind(e,s),this.caret&&(s.caret=this.caret),s}_serialize(e){var a;if(!e.expandMacro&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let s=se(this.command,this.mode);if(s!=null&&s.serialize)return s.serialize(this,e);let o=(a=this.command)!=null?a:"";return this.width===void 0?o:this._braced&&!("register"in this.width)?`${o}{${be(this.width)}}`:`${o}${be(this.width)}`}},ln=class Tw extends b{constructor(e){var a;super(f(p({},e),{type:"surd",mode:(a=e.mode)!=null?a:"math",style:e.style,displayContainsHighlight:!0,body:e.body})),this.above=e.index}static fromJson(e){return new Tw(f(p({},e),{index:e.above}))}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let a=se(this.command,this.mode);if(a!=null&&a.serialize)return a.serialize(this,e);let s=this.command,o=this.bodyToLatex(e);return this.above&&!this.hasEmptyBranch("above")?q(`${s}[${this.aboveToLatex(e)}]`,o):/^[0-9]$/.test(o)?`${s}${o}`:q(s,o)}get children(){if(this._children)return this._children;let e=[];if(this.above)for(let a of this.above)e.push(...a.children),e.push(a);if(this.body)for(let a of this.body)e.push(...a.children),e.push(a);return this._children=e,e}render(e){var a;let s=new O({parent:e,mathstyle:"cramp"},this.style),o=(a=b.createBox(s,this.body,{type:"inner"}))!=null?a:new _(null),l=s.scalingFactor,u=s.metrics.defaultRuleThickness/l,c=e.isDisplayStyle?tt:u,d=new _(null,{classes:"ML__sqrt-line",style:this.style});d.height=u,d.softWidth=o.width;let m=l*(u+c/4),g=Math.max(l*2*c,o.height+o.depth)+m+u,A=new O({parent:e},this.style),P=this.bind(A,new _(Yi("inner","\\surd",g,!1,A,{isSelected:this.isSelected}),{isSelected:this.isSelected,classes:"ML__sqrt-sign",style:this.style}));if(!P)return null;let W=P.height+P.depth-u;W>o.height+o.depth+m&&(m=(m+W-(o.height+o.depth))/2),P.setTop(P.height-o.height-m);let me=this.bind(e,new Q({firstBaseline:[{box:new _(o)},m-2*u,{box:d},u]})),ve=b.createBox(new O({parent:e,mathstyle:"scriptscriptstyle"}),this.above,{type:"ignore"});if(!ve){let Xe=new _([P,me],{classes:this.containsCaret?"ML__contains-caret":"",type:"inner"});return Xe.setStyle("display","inline-block"),Xe.setStyle("height",Xe.height+Xe.depth,"em"),this.caret&&(Xe.caret=this.caret),this.bind(e,Xe)}let He=new Q({shift:-.6*(Math.max(P.height,me.height)-Math.max(P.depth,me.depth)),children:[{box:ve}]}),De=new _([new _(He,{classes:"ML__sqrt-index",type:"ignore"}),P,me],{type:"inner",classes:this.containsCaret?"ML__contains-caret":""});return De.height=P.height,De.depth=P.depth,this.caret&&(De.caret=this.caret),this.bind(e,De)}},$l=class extends _{constructor(t){super(null,{type:"skip"}),this._width=t}toMarkup(){return`<span style="display:inline-block;width:${Math.ceil(this.width*100)/100}em"></span>`}};function Zn(t,e){if(!t.parent)return;let a=t.parent.children,s=a.indexOf(t),o=s-1;for(;o>=0&&a[o].type==="ignore";)o-=1;if(o<0&&t.parent.parent&&t.parent.type==="lift"){Zn(t.parent,e);return}s>0&&a[s-1].type==="skip"?a[s-1].width+=e:a.splice(s,0,new $l(e))}var Of={ord:{op:3,bin:4,rel:5,inner:3},op:{ord:3,op:3,rel:5,inner:3},bin:{ord:4,op:4,open:4,inner:4},rel:{ord:5,op:5,open:5,inner:5},close:{op:3,bin:4,rel:5,inner:3},punct:{ord:3,op:3,rel:3,open:3,punct:3,inner:3},inner:{ord:3,op:3,bin:4,rel:5,open:3,punct:3,inner:3}},Bf={ord:{op:3},op:{ord:3,op:3},close:{op:3},inner:{op:3}};function Rf(t){Yn(t,(e,a)=>{a.type==="bin"&&(!e||/^(middle|bin|op|rel|open|punct)$/.test(e.type))&&(a.type="ord"),e?.type==="bin"&&/^(rel|close|punct)$/.test(a.type)&&(e.type="ord"),a.type!=="ignore"&&(e=a)})}function It(t,e){if(!t.children)return t;let a=t.children;Rf(a);let s=e.getRegisterAsEm("thinmuskip"),o=e.getRegisterAsEm("medmuskip"),l=e.getRegisterAsEm("thickmuskip");return Yn(a,(u,c)=>{var d,m,g;if(!u)return;let A=u.type,P=c.isTight?(d=Bf[A])!=null?d:null:(m=Of[A])!=null?m:null,W=(g=P?.[c.type])!=null?g:null;W===3&&Zn(c,s),W===4&&Zn(c,o),W===5&&Zn(c,l)}),t}function Yn(t,e,a=void 0){if(!t)return a;t=[...t];for(let s of t)s.type==="lift"?a=Yn(s.children,e,a):s.type==="ignore"?Yn(s.children,e):(e(a,s),Yn(s.children,e),a=s);return a}var si=class Cw extends b{constructor(e){super({type:"tooltip",command:e.command,mode:e.mode,style:e.style,body:e.body,displayContainsHighlight:!0}),this.tooltip=new b({type:"root",mode:e.content,body:e.tooltip,style:{}}),this.skipBoundary=!0,this.captureSelection=!1}static fromJson(e){return new Cw(f(p({},e),{tooltip:ft(e.tooltip)}))}toJson(){var e;let a=(e=this.tooltip.body)==null?void 0:e.filter(s=>s.type!=="first").map(s=>s.toJson());return f(p({},super.toJson()),{tooltip:a})}render(e){let a=b.createBox(new O,this.body);if(!a)return null;let s=new O({parent:e,mathstyle:"displaystyle"},{fontSize:Vi}),o=_r(It(new _(this.tooltip.render(s),{classes:"ML__tooltip-content"}),s)),l=new _([o,a],{classes:"ML__tooltip-container"});return this.caret&&(l.caret=this.caret),this.bind(e,l)}},gt=class Rw extends b{constructor(e,a){super(f(p({},a),{type:"operator",isFunction:a?.isFunction})),this.value=e,this.variant=a?.variant,this.variantStyle=a?.variantStyle,this.subsupPlacement=a?.limits}static fromJson(e){return new Rw(e.symbol,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.variantStyle&&(e.variantStyle=this.variantStyle),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.value&&(e.symbol=this.value),e}render(e){var a;let s=new _(this.value,{type:"op",mode:"math",maxFontSize:e.scalingFactor,style:{variant:this.variant,variantStyle:this.variantStyle},isSelected:this.isSelected,letterShapeStyle:e.letterShapeStyle}),o=s;if(this.superscript||this.subscript){let l=(a=this.subsupPlacement)!=null?a:"auto";o=l==="over-under"||l==="auto"&&e.isDisplayStyle?this.attachLimits(e,{base:s}):this.attachSupsub(e,{base:s})}return new _(this.bind(e,o),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(e)}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let a=se(this.command,this.mode);if(a!=null&&a.serialize)return a.serialize(this,e);let s=[this.command];return this.explicitSubsupPlacement&&(this.subsupPlacement==="over-under"&&s.push("\\limits"),this.subsupPlacement==="adjacent"&&s.push("\\nolimits"),this.subsupPlacement==="auto"&&s.push("\\displaylimits")),s.push(this.supsubToLatex(e)),R(s)}};function ft(t){if(Y(t))return t.map(s=>ft(s));if(typeof t=="string")return b.fromJson(t);t=p({},t);for(let s of Lr)t[s]&&(t[s]=ft(t[s]));t.args&&(t.args=Pf(t.args)),t.array&&(t.array=ft(t.array));let e=t.type,a;e==="accent"&&(a=Tr.fromJson(t)),e==="array"&&(a=I.fromJson(t)),e==="box"&&(a=nt.fromJson(t)),e==="chem"&&(a=Xn.fromJson(t)),e==="composition"&&(a=Qi.fromJson(t)),e==="delim"&&(a=on.fromJson(t)),e==="enclose"&&(a=tr.fromJson(t)),e==="error"&&(a=mt.fromJson(t)),e==="extensible-symbol"&&(a=ai.fromJson(t)),e==="genfrac"&&(a=pt.fromJson(t)),e==="group"&&(a=en.fromJson(t)),e==="latex"&&(a=ue.fromJson(t)),e==="latexgroup"&&(a=Rt.fromJson(t)),e==="leftright"&&(a=G.fromJson(t)),e==="macro"&&(a=tn.fromJson(t)),e==="macro-argument"&&(a=Wa.fromJson(t)),e==="operator"&&(a=gt.fromJson(t)),e==="overlap"&&(a=ht.fromJson(t)),e==="overunder"&&(a=we.fromJson(t)),e==="placeholder"&&(a=Le.fromJson(t)),e==="prompt"&&(a=rn.fromJson(t)),e==="phantom"&&(a=Pt.fromJson(t)),e==="sizeddelim"&&(a=an.fromJson(t)),e==="spacing"&&(a=zt.fromJson(t)),e==="subsup"&&(a=er.fromJson(t)),e==="surd"&&(a=ln.fromJson(t)),e==="text"&&(a=$e.fromJson(t)),e==="tooltip"&&(a=si.fromJson(t)),a||(a=b.fromJson(t));for(let s of Lr)t[s]&&a.setChildren(t[s],s);return t.verbatimLatex!==void 0&&(a.verbatimLatex=t.verbatimLatex),t.subsupPlacement&&(a.subsupPlacement=t.subsupPlacement),t.explicitSubsupPlacement&&(a.explicitSubsupPlacement=!0),t.isFunction&&(a.isFunction=!0),t.skipBoundary&&(a.skipBoundary=!0),t.captureSelection&&(a.captureSelection=!0),a}function Pf(t){if(t){if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e=>e==="<null>"?null:typeof e=="object"&&"group"in e?{group:e.group.map(a=>ft(a))}:typeof e=="object"&&"atoms"in e?e.atoms.map(a=>ft(a)):e)}}function Qn(t,e){!t||!e||(Y(t)?t.forEach(a=>Qn(a,e)):typeof t=="object"&&t.applyStyle(e,{unstyledOnly:!0}))}function eo(t,e,a,s){function o(u,c){for(let d of l)if(d.style[u]!==c)return!1;return!0}if(e=t.normalizeRange(e),e[0]===e[1])return!1;let l=t.getAtoms(e,{includeChildren:!0});s.operation==="toggle"&&(a.color&&o("color",a.color)&&(a.color="none",delete a.verbatimColor),a.backgroundColor&&o("backgroundColor",a.backgroundColor)&&(a.backgroundColor="none",delete a.verbatimBackgroundColor),a.fontFamily&&o("fontFamily",a.fontFamily)&&(a.fontFamily="none"),a.fontSeries&&o("fontSeries",a.fontSeries)&&(a.fontSeries="auto"),a.fontShape&&o("fontShape",a.fontShape)&&(a.fontShape="auto"),a.fontSize&&o("fontSize",a.fontSize)&&(a.fontSize=Vi),a.variant&&o("variant",a.variant)&&(a.variant="normal"),a.variantStyle&&o("variantStyle",a.variantStyle)&&(a.variantStyle=""));for(let u of l)u.applyStyle(a);return!0}function Pm(t){return{up:"italic",bold:"bolditalic",italic:"italic",bolditalic:"bolditalic","":"italic"}[t??""]}function to(t){return{up:"up",bold:"bold",italic:void 0,bolditalic:"bold","":void 0}[t??""]}var Fl={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams ML__bold"],"ams-italic":["AMS-Regular","ML__ams ML__it"],"ams-bolditalic":["AMS-Regular","ML__ams ML__bold ML__it"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans ML__it"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans ML__bold ML__it"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak ML__bold"],"fraktur-italic":["Fraktur-Regular","ML__frak ML__it"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak ML__bold ML__it"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb ML__bold"],"double-struck-italic":["AMS-Regular","ML__bb ML_italic"],"double-struck-bolditalic":["AMS-Regular","ML__bb ML_bolditalic"]},Za={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},zm=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,zf=/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/,If=[/^[a-z]$/,/^[A-Z]$/,zm,zf],Nf={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]},Vl=class extends ge{constructor(){super("math")}createAtom(t,e,a){var s,o,l,u,c,d;if(e===null)return new b({type:"mord",mode:"math",command:t,value:t,style:a});let m;try{m=(l=(o=globalThis.MathfieldElement)==null?void 0:o.isFunction((s=e.command)!=null?s:t))!=null?l:!1}catch{m=!1}if(e.definitionType==="symbol"){let A=new b({type:(u=e.type)!=null?u:"mord",mode:"math",command:(c=e.command)!=null?c:t,value:String.fromCodePoint(e.codepoint),isFunction:m,style:a});return t.startsWith("\\")&&(A.verbatimLatex=t),A}let g=new b({type:"mord",mode:"math",command:(d=e.command)!=null?d:t,value:t,isFunction:m,style:a});return t.startsWith("\\")&&(g.verbatimLatex=t),g}serialize(t,e){let a=$f(t,f(p({},e),{defaultMode:"math"}));return a.length===0||e.defaultMode!=="text"?a:["$ ",...a," $"]}getFont(t,e){var a,s;if(e.variant,e.fontFamily){let[m,g]=Fl[e.fontFamily];return g&&(t.classes+=" "+g),m}let{variant:o}=e,{variantStyle:l}=e;if(o==="normal"&&!l&&/[\u00A3\u0131\u0237]/.test(t.value)&&(o="main",l="italic"),o==="normal"&&!l&&t.value.length===1){let m=!1;If.forEach((g,A)=>{var P;g.test(t.value)&&Nf[(P=e.letterShapeStyle)!=null?P:"tex"][A]==="it"&&(m=!0)}),m&&(l=Pm(l))}l==="up"&&(l=void 0);let u=l?o+"-"+l:o,[c,d]=Fl[u];if(Za[o]&&!Za[o].test(t.value)){let m=Cn(t.value,o,l);return m||(m=(a=Cn(t.value,o))!=null?a:t.value,t.classes+=(s={bold:" ML__bold",italic:" ML__it","bold-italic":" ML__bold ML__it"}[l??""])!=null?s:""),t.value=m,null}return zm.test(t.value)&&(t.classes+=" lcGreek"),d&&(t.classes+=" "+d),c}};function $f(t,e){return ct(t,"bold").map(a=>{if(Da(a[0])!=="bold"||Da(a[0].parent)==="bold")return R(Xa(a,e));let s=R(a.map(o=>{var l;return(l=o.value)!=null?l:""}));return/^[a-zA-Z0-9]+$/.test(s)?q("\\mathbf",R(Xa(a,e))):q("\\bm",R(Xa(a,e)))})}function Xa(t,e){let{parent:a}=t[0],s=Ka(a);return ct(t,"variant").map(o=>{let l=Ka(o[0]),u="";l&&l!==s&&(u={calligraphic:"\\mathcal","calligraphic-uo":"\\mathcal",fraktur:"\\mathfrak","fraktur-uo":"\\mathfrak","double-struck":"\\mathbb","double-struck-uo":"\\mathbb",script:"\\mathscr","script-uo":"\\mathscr",monospace:"\\mathtt","monospace-uo":"\\mathtt","sans-serif":"\\mathsf","sans-serif-uo":"\\mathsf",normal:"","normal-up":"\\mathrm","normal-italic":"\\mathnormal","normal-bold":"","normal-bolditalic":"\\mathbfit",ams:"","ams-up":"\\mathrm","ams-italic":"\\mathit","ams-bold":"","ams-bolditalic":"\\mathbfit",main:"","main-up":"\\mathrm","main-italic":"\\mathit","main-bold":"","main-bolditalic":"\\mathbfit"}[l]);let c=R(o.map(d=>d._serialize(e)));return u?q(u,c):c})}new Vl;function Ff(t,e){return t.map(a=>a._serialize(e))}function Vf(t,e){return ct(t,"fontShape").map(a=>{let s=Ff(a,e),{fontShape:o}=a[0].style,l="";return o==="it"&&(l="\\textit"),o==="sl"&&(l="\\textsl"),o==="sc"&&(l="\\textsc"),o==="n"&&(l="\\textup"),!l&&o?`{${q("\\fontshape",o)}${R(s)}}`:l?q(l,R(s)):R(s)})}function qf(t,e){return ct(t,"fontSeries").map(a=>{let s=Vf(a,e),{fontSeries:o}=a[0].style,l="";return o==="b"&&(l="\\textbf"),o==="l"&&(l="\\textlf"),o==="m"&&(l="\\textmd"),o&&!l?`{${q("\\fontseries",o)}${R(s)}}`:l?q(l,R(s)):R(s)})}function Hf(t,e){return ct(t,"fontSize").map(a=>{var s,o;let l=qf(a,e),u=(o=["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][(s=a[0].style.fontSize)!=null?s:""])!=null?o:"";return u?`${u} ${R(l)}`:R(l)})}function Wf(t,e,a){return ct(t,"fontFamily").map(s=>{var o;a=a&&!s.every(d=>d.style.fontFamily||d.style.fontShape||d.style.fontSeries||d.style.fontSize);let l=Hf(s,e),{fontFamily:u}=s[0].style,c=(o={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[u??""])!=null?o:"";return c?`\\${c}{${R(l)}}`:u?`{\\fontfamily{${s[0].style.fontFamily}} ${R(l)}}`:a?`\\text{${R(l)}}`:R(l)})}var Im={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"},ql=class extends ge{constructor(){super("text")}createAtom(t,e,a){return e&&e.definitionType==="symbol"?new $e(t,String.fromCodePoint(e.codepoint),a??{}):null}serialize(t,e){return Wf(t,f(p({},e),{defaultMode:"text"}),e.defaultMode!=="text")}getFont(t,e){var a,s,o,l,u;let{fontFamily:c}=e;if(Im[c]?t.classes+=" "+Im[c]:c&&t.setStyle("font-family",c),e.fontShape&&(t.classes+=" ",t.classes+=(a={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[e.fontShape])!=null?a:""),e.fontSeries){let d=e.fontSeries.match(/(.?[lbm])?(.?[cx])?/);d&&(t.classes+=" ",t.classes+=(o={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[(s=d[1])!=null?s:""])!=null?o:"",t.classes+=" ",t.classes+=(u={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[(l=d[2])!=null?l:""])!=null?u:"")}return"Main-Regular"}};new ql;var Hl=class extends ge{constructor(){super("latex")}createAtom(t){return new ue(t)}serialize(t,e){return t.filter(a=>a instanceof ue&&!a.isSuggestion).map(a=>a.value)}getFont(){return null}};new Hl;var Nm={id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","",""],KeyB:["x","X","",""],KeyC:["j","J","",""],KeyD:["e","E","",""],KeyE:[".",">","",""],KeyF:["u","U","",""],KeyG:["i","I","",""],KeyH:["d","D","",""],KeyI:["c","C","",""],KeyJ:["h","H","",""],KeyK:["t","T","",""],KeyL:["n","N","",""],KeyM:["m","M","",""],KeyN:["b","B","",""],KeyO:["r","R","",""],KeyP:["l","L","",""],KeyQ:["'",'"',"",""],KeyR:["p","P","",""],KeyS:["o","O","",""],KeyT:["y","Y","",""],KeyU:["g","G","",""],KeyV:["k","K","",""],KeyW:[",","<","",""],KeyX:["q","Q","",""],KeyY:["f","F","",""],KeyZ:[";",":","",""],Digit1:["1","!","",""],Digit2:["2","@","",""],Digit3:["3","#","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","^","",""],Digit7:["7","&","",""],Digit8:["8","*","",""],Digit9:["9","(","",""],Digit0:["0",")","",""],Space:[" "," "," "," "],Minus:["[","{","",""],Equal:["]","}","",""],BracketLeft:["/","?","",""],BracketRight:["=","+","",""],Backslash:["\\","|","",""],Semicolon:["s","S","",""],Quote:["-","_","",""],Backquote:["`","~","`","`"],Comma:["w","W","",""],Period:["v","V","",""],Slash:["z","Z","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["","","",""],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}},Ya={id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","",""],Digit2:["2","@","",""],Digit3:["3","#","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","^","",""],Digit7:["7","&","",""],Digit8:["8","*","",""],Digit9:["9","(","",""],Digit0:["0",")","",""],Space:[" "," "," "," "],Minus:["-","_","",""],Equal:["=","+","",""],BracketLeft:["[","{","",""],BracketRight:["]","}","",""],Backslash:["\\","|","",""],Semicolon:[";",":","",""],Quote:["'",'"',"",""],Backquote:["`","","`","`"],Comma:[",","<","",""],Period:[".",">","",""],Slash:["/","?","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["","","",""],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}},Wl={id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","",""],Digit2:["2","@","",""],Digit3:["3","#","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","^","",""],Digit7:["7","&","",""],Digit8:["8","*","",""],Digit9:["9","(","",""],Digit0:["0",")","",""],Space:[" "," ","",""],Minus:["-","_","",""],Equal:["=","+","",""],BracketLeft:["[","{","",""],BracketRight:["]","}","",""],Backslash:["\\","|","",""],Semicolon:[";",":","",""],Quote:["'",'"',"",""],Backquote:["`","~","",""],Comma:[",","<","",""],Period:[".",">","",""],Slash:["/","?","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}},Ul={id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},$m={id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","","|"],KeyM:[",","?","",""],KeyN:["n","N","~",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","",""],Digit3:['"',"3","",""],Digit4:["'","4","",""],Digit5:["(","5","{","["],Digit6:["","6","",""],Digit7:["","7","",""],Digit8:["!","8","",""],Digit9:["","9","",""],Digit0:["","0","",""],Space:[" "," "," "," "],Minus:[")","","}","]"],Equal:["-","_","",""],BracketLeft:["^","","",""],BracketRight:["$","*","",""],Backslash:["`","","@","#"],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["<",">","",""],Comma:[";",".","",""],Period:[":","/","","\\"],Slash:["=","+","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","",""],NumpadEqual:["=","=","=","="]}},Fm={id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["","7","`",""],Digit8:["_","8","\\",""],Digit9:["","9","^",""],Digit0:["","0","@",""],Space:[" "," ","",""],Minus:[")","","]",""],Equal:["=","+","}",""],BracketLeft:["^","","",""],BracketRight:["$","","",""],Backslash:["*","","",""],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}},Vm={id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","","&"],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","n","N"],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","","<"],KeyX:["x","X","",">"],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{","$"],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["","7","`",""],Digit8:["_","8","\\",""],Digit9:["","9","^",""],Digit0:["","0","@",""],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:[")","","]",""],Equal:["=","+","}",""],BracketLeft:["","","",""],BracketRight:["$","","",""],Backslash:["*","","",""],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["","~","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","","",""],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""]}},qm={id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","@",""],KeyM:["m","M","",""],KeyN:["n","N","~",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"",""],Digit3:["3","","","#"],Digit4:["4","$","",""],Digit5:["5","%","[",""],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{",""],Digit9:["9",")","}",""],Digit0:["0","=","",""],Space:[" "," "," "," "],Minus:["","?","",""],Equal:["","`","'",""],BracketLeft:["","","",""],BracketRight:["+","*","",""],Backslash:["#","'","",""],Semicolon:["","","",""],Quote:["","","",""],Backquote:["<",">","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","","",""],NumpadEqual:["=","=","=","="]}},Hm={id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"",""],Digit3:["3","","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["","?","\\",""],Equal:["","`","",""],BracketLeft:["","","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["","","",""],Quote:["","","",""],Backquote:["^","","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}},Wm={id:"linux.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","","&"],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"",""],Digit3:["3","","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["","?","\\",""],Equal:["","","",""],BracketLeft:["","","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["","","",""],Quote:["","","",""],Backquote:["","","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],PrintScreen:["","","",""],PageUp:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",",","",","],IntlBackslash:["<",">","|",""],AltRight:["\r","\r","\r","\r"],MetaRight:[".",".",".","."]}},Um={id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C",""," "],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H",""," "],KeyI:["i","I"," "," "],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L"," ",""],KeyM:["m","M","",""],KeyN:["n","N"," ",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R",""," "],KeyS:["s","S",""," "],KeyT:["t","T","",""],KeyU:["u","U"," "," "],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y",""," "],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&",""," "],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," "," "," "],Minus:["'","?","",""],Equal:["","","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","~",""],Quote:["","","{",""],Backquote:["<",">","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["","","\\",""]}},jm={id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","~",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["","","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","",""],Quote:["","","{",""],Backquote:["","","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}},Jm={id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","","&"],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","n","N"],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",">"],KeyY:["y","Y","",""],KeyZ:["z","Z","","<"],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","~","$"],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["'","?","\\",""],Equal:["","","","~"],BracketLeft:["","","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","~",""],Quote:["","","{","{"],Backquote:["","","\\","\\"],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}};function jl(t){let e=t.split("+"),a={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:e.pop()};return e.includes("shift")&&(a.shift=!0),e.includes("alt")&&(a.alt=!0),e.includes("ctrl")&&(a.ctrl=!0),e.includes("cmd")&&(a.cmd=!0),e.includes("win")&&(a.win=!0),e.includes("meta")&&(a.meta=!0),a}function ci(t){let e="";return t.shift&&(e+="shift+"),t.alt&&(e+="alt+"),t.ctrl&&(e+="ctrl+"),t.cmd&&(e+="cmd+"),t.win&&(e+="win+"),t.meta&&(e+="meta+"),e+t.key}var Uf={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},ro=[];function Jl(){switch(kt()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function Ue(t){(!t.platform||t.platform===Jl())&&ro.push(t)}function Gm(t,e){var a;let s={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!t)return s;for(let[o,l]of Object.entries(e.mapping)){if(l[0]===t)return s.key=`[${o}]`,s;if(l[1]===t)return s.shift=!0,s.key=`[${o}]`,s;if(l[2]===t)return s.alt=!0,s.key=`[${o}]`,s;if(l[3]===t)return s.shift=!0,s.alt=!0,s.key=`[${o}]`,s}return s.key=(a=Uf[t])!=null?a:"",s}function Xm(t){if(t.code)return t;let e=Object.entries(Dr().mapping),a=!1,s=!1,o="";for(let l=0;l<4;l++){for(let[u,c]of e)if(c[l]===t.key){o=u,l===3?(a=!0,s=!0):l===2?a=!0:l===1&&(s=!0);break}if(o)break}return new KeyboardEvent(t.type,f(p({},t),{altKey:a,shiftKey:s,code:o}))}function Zm(t){var e,a;if(!t||t.key==="Unidentified"||t.key==="Dead")return;let s=t.shiftKey&&t.altKey?3:t.altKey?2:t.shiftKey?1:0;for(let o of ro)((e=o.mapping[t.code])==null?void 0:e[s])===t.key?o.score+=1:(a=o.mapping[t.code])!=null&&a[s]&&(o.score=0);ro.sort((o,l)=>l.score-o.score)}function Dr(){return ro[0]}function Qm(){switch(Jl()){case"apple":return Ya;case"windows":return Wl;case"linux":return Ul}return Ya}switch(Jl()){case"apple":Ue(Ya),Ue($m),Ue(Um),Ue(qm);break;case"windows":Ue(Wl),Ue(Fm),Ue(jm),Ue(Hm);break;case"linux":Ue(Ul),Ue(Vm),Ue(Jm),Ue(Wm);break}Ue(Nm);function cn(t){var e;let a=/macos|ios/.test(kt()),s=t.split("+"),o="";for(let l of s)o&&(o+=a?"":'<span class="ML__shortcut-join">+</span>'),l.startsWith("[Key")?o+=l.slice(4,5):l.startsWith("Key")?o+=l.slice(3,4):l.startsWith("[Digit")?o+=l.slice(6,7):l.startsWith("Digit")?o+=l.slice(5,6):o+=(e={cmd:"",meta:a?"":"Ctrl",shift:a?"":"Shift",alt:a?"":"Alt",ctrl:a?"":"Ctrl","\n":a?"":"Return","[return]":a?"":"Return","[enter]":a?"":"Enter","[tab]":a?"":"Tab","[escape]":"Esc","[backspace]":a?"":"Backspace","[delete]":a?"":"Del","[pageup]":a?"":"Page Up","[pagedown]":a?"":"Page Down","[home]":a?"":"Home","[end]":a?"":"End","[space]":"Space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"",up:"",right:"",down:"","[arrowleft]":"","[arrowup]":"","[arrowright]":"","[arrowdown]":""}[l.toLowerCase()])!=null?e:l.toUpperCase();return o}function un(t){if(t instanceof MouseEvent||t instanceof PointerEvent)return{x:t.clientX,y:t.clientY};if(typeof TouchEvent<"u"&&t instanceof TouchEvent){let e=[...t.touches].reduce((s,o)=>({x:s.x+o.clientX,y:s.y+o.clientY}),{x:0,y:0}),a=t.touches.length;return{x:e.x/a,y:e.y/a}}}function Nt(t){let e={alt:!1,control:!1,shift:!1,meta:!1};return(t instanceof MouseEvent||t instanceof PointerEvent||typeof TouchEvent<"u"&&t instanceof TouchEvent||t instanceof KeyboardEvent)&&(t.altKey&&(e.alt=!0),t.ctrlKey&&(e.control=!0),t.metaKey&&(e.meta=!0),t.shiftKey&&(e.shift=!0)),e}function ep(t,e){return!t&&e||t&&!e?!1:!t||!e?!0:t.alt===e.alt&&t.control===e.control&&t.shift===e.shift&&t.meta===e.meta}var jf=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function Kr(t){return t.ctrlKey||t.metaKey||["Dead","Process"].includes(t.key)?!1:t.code===""?!0:jf.has(t.code)}function ui(){var t;let e=document.activeElement;for(;(t=e?.shadowRoot)!=null&&t.activeElement;)e=e.shadowRoot.activeElement;return e}var Ae=class A5{static get scrim(){return A5._scrim||(A5._scrim=new A5),A5._scrim}static open(e){A5.scrim.open(e)}static close(){A5.scrim.close()}static get state(){return A5.scrim.state}static get element(){return A5.scrim.element}constructor(e){var a,s;this.lightDismiss=(a=e?.lightDismiss)!=null?a:!0,this.translucent=(s=e?.translucent)!=null?s:!1,this.state="closed"}get element(){if(this._element)return this._element;let e=document.createElement("div");return e.setAttribute("role","presentation"),e.style.position="fixed",e.style.contain="content",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.zIndex="var(--scrim-zindex, 10099)",e.style.outline="none",this.translucent?(e.style.background="rgba(255, 255, 255, .2)",e.style.backdropFilter="contrast(40%)"):e.style.background="transparent",this._element=e,e}open(e){var a;if(this.state!=="closed")return;this.state="opening",this.onDismiss=e?.onDismiss,this.savedActiveElement=ui();let{element:s}=this;((a=e?.root)!=null?a:document.body).appendChild(s),s.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let o=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let l=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${l+o}px`;let u=document.querySelector(".MLK__plate");if(u instanceof HTMLElement){this.savedMlkPaddingRight=u.style.paddingRight;let c=Number.parseFloat(getComputedStyle(u).paddingRight);u.style.paddingRight=`${c+o}px`}e!=null&&e.child&&s.append(e.child),this.state="open"}close(){var e,a,s,o,l;if(this.state!=="open"){this.element.parentElement;return}this.state="closing",typeof this.onDismiss=="function"&&this.onDismiss(),this.onDismiss=void 0;let{element:u}=this;u.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),u.remove(),document.body.style.overflow=(e=this.savedOverflow)!=null?e:"",document.body.style.marginRight=(a=this.savedMarginRight)!=null?a:"";let c=document.querySelector(".MLK__plate");c instanceof HTMLElement&&(c.style.paddingRight=(s=this.savedMlkPaddingRight)!=null?s:""),ui()!==this.savedActiveElement&&((l=(o=this.savedActiveElement)==null?void 0:o.focus)==null||l.call(o)),u.innerHTML="",this.state="closed"}handleEvent(e){this.lightDismiss&&(e.target===this._element&&e.type==="click"?(this.close(),e.preventDefault(),e.stopPropagation()):e.target===document&&(e.type==="touchmove"||e.type==="scroll")&&(this.close(),e.preventDefault(),e.stopPropagation()))}};function tp(t,e,a){let s=null,o=null,l=!1,u=!1,c=!1,d=new AbortController,m=d.signal;return t.addEventListener("keydown",g=>{if(l||g.key==="Process"||g.code==="CapsLock"||/(Control|Meta|Alt|Shift)(Left|Right)/.test(g.code)){s=null;return}s=g,o=null,a.onKeystroke(g)?t.textContent="":s=null},{capture:!0,signal:m}),t.addEventListener("keypress",g=>{l||(s&&o&&a.onKeystroke(s),o=g)},{capture:!0,signal:m}),t.addEventListener("compositionstart",g=>{t.textContent="",l=!0,a.onCompositionStart(g.data)},{capture:!0,signal:m}),t.addEventListener("compositionupdate",g=>{l&&a.onCompositionUpdate(g.data)},{capture:!0,signal:m}),t.addEventListener("compositionend",g=>{t.textContent="",l&&(l=!1,a.onCompositionEnd(g.data))},{capture:!0,signal:m}),t.addEventListener("beforeinput",g=>g.stopImmediatePropagation(),{signal:m}),t.addEventListener("input",g=>{var A;if(!l&&(t.textContent="",g.inputType!=="insertCompositionText")){if(g.inputType==="insertFromPaste"){g.preventDefault(),g.stopPropagation();return}a.onInput((A=g.data)!=null?A:""),g.preventDefault(),g.stopPropagation()}},{signal:m}),t.addEventListener("paste",g=>{t.focus({preventScroll:!0}),t.textContent="",a.onPaste(g)||g.preventDefault(),g.stopImmediatePropagation()},{signal:m}),t.addEventListener("cut",g=>a.onCut(g),{capture:!0,signal:m}),t.addEventListener("copy",g=>a.onCopy(g),{capture:!0,signal:m}),t.addEventListener("blur",g=>{var A,P;if(((P=(A=g.relatedTarget)==null?void 0:A._mathfield)==null?void 0:P.element)===e){t.focus({preventScroll:!0}),g.preventDefault(),g.stopPropagation();return}let W=!1,me=g.relatedTarget;for(;me;){if(me.classList.contains("ML__keyboard")){W=!0;break}me=me.parentElement}if(W){t.focus({preventScroll:!0}),g.preventDefault(),g.stopPropagation();return}let ve=Ae.state;if(ve==="open"||ve==="opening"){g.preventDefault(),g.stopPropagation();return}if(g.relatedTarget===g.target.getRootNode().host){g.preventDefault(),g.stopPropagation();return}c||u||(c=!0,s=null,o=null,a.onBlur(),c=!1)},{capture:!0,signal:m}),t.addEventListener("focus",g=>{c||u||(u=!0,a.onFocus(),u=!1)},{capture:!0,signal:m}),{dispose:()=>d.abort(),cancelComposition:()=>{l&&(typeof t.blur=="function"&&t.blur(),requestAnimationFrame(()=>t.focus({preventScroll:!0})))},blur:()=>{typeof t.blur=="function"&&(c=!0,t.blur(),c=!1)},focus:()=>{!u&&typeof t.focus=="function"&&(u=!0,t.focus({preventScroll:!0}),u=!1)},hasFocus:()=>ui()===t,setAriaLabel:g=>t.setAttribute("aria-label",g),setValue:g=>{var A;t.textContent!==g&&(t.textContent=g,t.style.left="-1000px",(A=window.getSelection())==null||A.selectAllChildren(t))},moveTo:(g,A)=>{t.style.top=`${A}px`,t.style.left=`${g}px`}}}function Or(t){var e;if(!t||!Kr(t))return"";let a;return t.key==="Unidentified"&&t.target&&(a=t.target.value),a=(e=a??t.key)!=null?e:t.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(a)&&(a=""),a}function Qa(t){t=Xm(t);let e=[];return t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),e.length===0?`[${t.code}]`:(e.push(`[${t.code}]`),e.join("+"))}function Jf(t){if(Me()){let e=kt(),a=t.startsWith("!"),s=t.endsWith(e);if(a&&!s||!a&&s)return!0}return t==="!other"?!1:t==="other"}function ip(t,e,a){if(t.length===0)return"";let s=ci(jl(Qa(a))),o=ci({key:a.key,shift:a.shiftKey,alt:a.altKey,ctrl:a.ctrlKey,meta:a.metaKey||a.ctrlKey&&/macos|ios/.test(kt()),cmd:!1,win:!1});for(let l=t.length-1;l>=0;l--)if((t[l].key===s||t[l].key===o)&&(!t[l].ifMode||t[l].ifMode===e))return t[l].command;return""}function rp(t){let e=t;return Y(e)&&(e=e.length>0?e[0]+"("+e.slice(1).join("")+")":""),e}function np(t,e){let a=[];if(typeof e=="string"){let l=mm[e];Y(l)?a=l.slice():l&&a.push(l)}let s=rp(e),o=new RegExp("^"+s.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let l of t)o.test(rp(l.command))&&a.push(l.key);return a.map(cn)}function Gf(t,e){if(t.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(t.ifPlatform))throw new Error(`Unexpected platform "${t.ifPlatform}" for keybinding ${t.key}`);if(t.ifLayout!==void 0&&(e.score===0||!t.ifLayout.includes(e.id)))return;let a=jl(t.key),s=t.ifPlatform;if(a.cmd){if(s&&s!=="macos"&&s!=="ios")throw new Error('Unexpected "cmd" modifier with platform "'+s+`"
"cmd" modifier can only be used with macOS or iOS platform.`);s||(s=kt()==="ios"?"ios":"macos"),a.win=!1,a.cmd=!1,a.meta=!0}if(a.win){if(s&&s!=="windows")throw new Error('Unexpected "win" modifier with platform "'+s+`"
"win" modifier can only be used with Windows platform.`);s="windows",a.win=!1,a.cmd=!1,a.meta=!0}if(s&&!Jf(s))return;if(/^\[.+\]$/.test(a.key))return f(p({},t),{key:ci(a)});let o=Gm(a.key,e);if(!o)return f(p({},t),{key:ci(a)});if(o.shift&&a.shift||o.alt&&a.alt)throw new Error(`The keybinding ${t.key} (${Gl(t.command)}) is conflicting with the key combination ${ci(o)} using the ${e.displayName} keyboard layout`);return o.shift=o.shift||a.shift,o.alt=o.alt||a.alt,o.meta=a.meta,o.ctrl=a.ctrl,f(p({},t),{key:ci(o)})}function Gl(t){if(Array.isArray(t)){let e=[...t];return e.shift()+"("+e.map(a=>typeof a=="string"?`"${a}"`:a.toString()).join(", ")+")"}return t}function op(t,e){let a=[],s=[];for(let o of t)try{let l=Gf(o,e);if(!l)continue;let u=s.find(c=>c.key===l.key&&c.ifMode===l.ifMode);if(u)throw new Error(`Ambiguous key binding ${o.key} (${Gl(o.command)}) matches ${u.key} (${Gl(u.command)}) with the ${e.displayName} keyboard layout`);s.push(l)}catch(l){l instanceof Error&&a.push(l.message)}return[s,a]}var Xl=class extends V{constructor(){super("latex")}createAtom(t){return new ue(t)}onPaste(t,e){if(!e)return!1;let a=typeof e=="string"?e:e.getData("application/x-latex")||e.getData("text/plain");return a&&t.model.contentWillChange({inputType:"insertFromPaste",data:a})?(t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,a)&&(t.startRecording(),t.snapshot("paste"),t.model.contentDidChange({inputType:"insertFromPaste"}),U(t)),t.startRecording(),!0):!1}insert(t,e,a){if(!t.contentWillChange({data:e,inputType:"insertText"}))return!1;a||(a={}),a.insertionMode||(a.insertionMode="replaceSelection"),a.selectionMode||(a.selectionMode="placeholder");let{silenceNotifications:s}=t;a.silenceNotifications&&(t.silenceNotifications=!0);let o=t.silenceNotifications;t.silenceNotifications=!0,a.insertionMode==="replaceSelection"&&!t.selectionIsCollapsed?t.deleteAtoms(le(t.selection)):a.insertionMode==="replaceAll"?(t.root.setChildren([],"body"),t.position=0):a.insertionMode==="insertBefore"?t.collapseSelection("backward"):a.insertionMode==="insertAfter"&&t.collapseSelection("forward");let l=[];for(let d of e)iu.test(d)&&l.push(new ue(d));let u=t.at(t.position);if(u instanceof Rt&&(u=u.lastChild),!(u.parent instanceof Rt)){let d=new Rt;u.parent.addChildAfter(d,u),u=d.firstChild}let c=u.parent.addChildrenAfter(l,u);return t.silenceNotifications=o,a.selectionMode==="before"||(a.selectionMode==="item"?t.setSelection(t.anchor,t.offsetOf(c)):c&&(t.position=t.offsetOf(c))),t.contentDidChange({data:e,inputType:"insertText"}),t.silenceNotifications=s,!0}};function io(t){return t.atoms.find(e=>e.type==="latexgroup")}function no(t){var e,a;let s=io(t);return(a=(e=s?.body)==null?void 0:e.filter(o=>o.type==="latex"))!=null?a:[]}function es(t,e){var a;let s=0,o=!1,l=Number.isFinite(e?.before)?(a=e?.before)!=null?a:0:t.lastOffset;for(;s<=l&&!o;){let d=t.at(s);o=d instanceof ue&&d.isSuggestion,o||s++}if(!o)return[void 0,void 0];let u=s,c=!1;for(;u<=l&&!c;){let d=t.at(u);c=!(d instanceof ue&&d.isSuggestion),c||u++}return[s-1,u-1]}new Xl;function Xf(t,e){t.flushInlineShortcutBuffer(),t.stopCoalescingUndo();let a=ts(t,e),{model:s}=t;return s.selectionIsCollapsed?(t.defaultStyle.fontSeries&&a.fontSeries===t.defaultStyle.fontSeries&&(a.fontSeries="auto"),a.fontShape&&a.fontShape===t.defaultStyle.fontShape&&(a.fontShape="auto"),a.color&&a.color===t.defaultStyle.color&&(a.color="none"),a.backgroundColor&&a.backgroundColor===t.defaultStyle.backgroundColor&&(a.backgroundColor="none"),a.fontSize&&a.fontSize===t.defaultStyle.fontSize&&(a.fontSize="auto"),t.defaultStyle=p(p({},t.defaultStyle),a)):t.model.deferNotifications({content:!0,type:"insertText"},()=>{s.selection.ranges.forEach(o=>eo(s,o,a,{operation:"toggle"})),t.snapshot("style-change")}),!0}pe({applyStyle:Xf},{target:"mathfield",canUndo:!0,changeContent:!0});function ts(t,e){var a,s,o,l,u,c,d,m,g,A;let P={};if(typeof e.color=="string"){let me=(s=t.colorMap((a=e.color)!=null?a:e.verbatimColor))!=null?s:"none";me!==e.color&&(P.verbatimColor=(o=e.verbatimColor)!=null?o:e.color),P.color=me}if(typeof e.backgroundColor=="string"){let me=(u=t.backgroundColorMap((l=e.backgroundColor)!=null?l:e.verbatimBackgroundColor))!=null?u:"none";me!==e.backgroundColor&&(P.verbatimBackgroundColor=(c=e.verbatimBackgroundColor)!=null?c:e.backgroundColor),P.backgroundColor=me}typeof e.fontFamily=="string"&&(P.fontFamily=e.fontFamily),typeof e.series=="string"&&(P.fontSeries=e.series),typeof e.fontSeries=="string"&&(P.fontSeries=e.fontSeries.toLowerCase()),P.fontSeries&&(P.fontSeries=(d={bold:"b",medium:"m",normal:"m"}[P.fontSeries])!=null?d:P.fontSeries),typeof e.shape=="string"&&(P.fontShape=e.shape),typeof e.fontShape=="string"&&(P.fontShape=e.fontShape.toLowerCase()),P.fontShape&&(P.fontShape=(m={italic:"it",up:"n",upright:"n",normal:"n"}[P.fontShape])!=null?m:P.fontShape),e.variant&&(P.variant=e.variant.toLowerCase()),e.variantStyle&&(P.variantStyle=e.variantStyle.toLowerCase());let W=(g=e.size)!=null?g:e.fontSize;return typeof W=="number"?P.fontSize=Math.max(1,Math.min(10,W)):typeof W=="string"&&(P.fontSize=(A={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[W.toLowerCase()])!=null?A:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[W]),P}function oo(t,e,a){var s,o;let l=t.model;if(l.mode==="latex")return{};let u=t.styleBias;if(u==="none")return t.defaultStyle;if(l.mode==="text")return(o=(s=l.at(u==="right"?a.after:a.before))==null?void 0:s.style)!=null?o:t.defaultStyle;if(l.mode==="math"){let c=l.at(u==="right"?a.after:a.before);return c?f(p({},c.style),{variant:"normal"}):t.defaultStyle}return{}}function rr(t){let e=t.options.onInsertStyle;if(e===null)return{};e===void 0&&(e=oo);let a=t.model,s=t.styleBias,o=a.at(a.position),l=ap(a,o,s),u=ap(a,o.rightSibling,s);return e(t,a.position,{before:l,after:u})}function ap(t,e,a){var s;return!e||e.type==="first"&&a!=="right"?-1:e.type!=="group"?t.offsetOf(e):!e.body||e.body.length<2?-1:((s=e.body)==null?void 0:s.length)===1||a!=="right"?t.offsetOf(e.body[0]):t.offsetOf(e.body[e.body.length-1])}function di(t){let e=no(t.model).filter(a=>a.isSuggestion);if(e.length!==0){t.model.position=t.model.offsetOf(e[0].leftSibling);for(let a of e)a.parent.removeChild(a)}}function Rr(t,e){var a;let{model:s}=t;di(t);for(let g of no(s))g.isError=!1;if(!s.selectionIsCollapsed||t.options.popoverPolicy==="off"){Br(t);return}let o=[],l=s.at(s.position);for(;l&&l instanceof ue&&/^[a-zA-Z\*]$/.test(l.value);)l=l.leftSibling;if(l&&l instanceof ue&&l.value==="\\")for(o.push(l),l=l.rightSibling;l&&l instanceof ue&&/^[a-zA-Z\*]$/.test(l.value);)o.push(l),l=l.rightSibling;let u=o.map(g=>g.value).join(""),c=ou(t,u);if(c.length===0){if(/^\\[a-zA-Z\*]+$/.test(u))for(let g of o)g.isError=!0;Br(t);return}let d=(a=e?.atIndex)!=null?a:0;t.suggestionIndex=d<0?c.length-1:d%c.length;let m=c[t.suggestionIndex];if(m!==u){let g=o[o.length-1];g.parent.addChildrenAfter([...m.slice(u.length-m.length)].map(A=>new ue(A,{isSuggestion:!0})),g),bt(t,{interactive:!0})}sp(t,c)}function Zl(t){let[e,a]=es(t,{before:t.position});if(e===void 0||a===void 0)return!1;let s=!1;return t.getAtoms([e,a]).forEach(o=>{o.isSuggestion&&(o.isSuggestion=!1,s=!0)}),s}function $t(t,e="accept",a){var s,o;Br(t);let l=io(t.model);if(!l)return!1;if(e==="accept-suggestion"||e==="accept-all"){let m=no(t.model).filter(g=>g.isSuggestion);if(m.length!==0){for(let g of m)g.isSuggestion=!1;t.model.position=t.model.offsetOf(m[m.length-1])}if(e==="accept-suggestion")return m.length!==0}let u=no(t.model).filter(m=>!m.isSuggestion).map(m=>m.value).join(""),c=l.leftSibling;if(l.parent.removeChild(l),t.model.position=t.model.offsetOf(c),t.switchMode((s=a?.mode)!=null?s:"math"),e==="reject")return!0;let d=p({},rr(t));return!/^[a-zA-Z0-9]$/.test(u)&&t.styleBias!=="none"&&(d.variant="normal",d.variantStyle=void 0),V.insert(t.model,u,{selectionMode:(o=a?.selectItem)!=null&&o?"item":"placeholder",format:"latex",mode:"math",style:d}),t.snapshot(),t.model.announce("replacement"),t.switchMode("math"),!0}function mi(t){var e;let a=document.getElementById(t);return a?a.dataset.refcount=Number(Number.parseInt((e=a.dataset.refcount)!=null?e:"0")+1).toString():(a=document.createElement("div"),a.setAttribute("aria-hidden","true"),a.dataset.refcount="1",a.id=t,document.body.append(a)),a}function Pr(t){var e;let a=document.getElementById(t);if(!a)return;let s=Number.parseInt((e=a.getAttribute("data-refcount"))!=null?e:"0");s<=1?a.remove():a.dataset.refcount=Number(s-1).toString()}function Zf(t,e){let a=new O({from:t.context}),s=new b({mode:"math",type:"root",body:he(e,{context:a})}),o=_r(It(new _(s.render(a),{classes:"ML__base"}),a));return Mr(o,{classes:"ML__latex"}).toMarkup()}function sp(t,e){var a;if(e.length===0){Br(t);return}let s="";for(let[l,u]of e.entries()){let c=u,d=Zf(t,u),m=np(t.keybindings,c).join("<br>");s+=`<li role="button" data-command="${c}" ${l===t.suggestionIndex?"class=ML__popover__current":""}><span class="ML__popover__latex">${c}</span><span class="ML__popover__command">${d}</span>`,m&&(s+=`<span class="ML__popover__keybinding">${m}</span>`),s+="</li>"}let o=Yf(t,`<ul>${s}</ul>`);Yl()&&((a=o.querySelector(".ML__popover__current"))==null||a.scrollIntoView({block:"nearest",inline:"nearest"})),setTimeout(()=>{var l;o&&!Yl()&&(o.classList.add("is-visible"),dn(t),(l=o.querySelector(".ML__popover__current"))==null||l.scrollIntoView({block:"nearest",inline:"nearest"}))},32)}function Yl(){let t=document.getElementById("mathlive-suggestion-popover");return t?t.classList.contains("is-visible"):!1}function dn(t,e){var a,s,o;if(!t.element||t.element.mathfield!==t||!Yl())return;if(((a=t.model.at(t.model.position))==null?void 0:a.type)!=="latex"){Br(t);return}if(e!=null&&e.deferred){setTimeout(()=>dn(t),32);return}let l=Ji(t.field);if(!l)return;let u=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=window.innerWidth-document.documentElement.clientWidth,m=window.innerHeight-document.documentElement.clientHeight,g=(o=(s=window.mathVirtualKeyboard)==null?void 0:s.boundingRect.height)!=null?o:0,A=document.getElementById("mathlive-suggestion-popover");l.x+A.offsetWidth/2>c-d?A.style.left=`${c-A.offsetWidth-d}px`:l.x-A.offsetWidth/2<0?A.style.left="0":A.style.left=`${l.x-A.offsetWidth/2}px`;let P=l.y-l.height;u-m-g-l.y<P?(A.classList.add("ML__popover--reverse-direction"),A.classList.remove("top-tip"),A.classList.add("bottom-tip"),A.style.top=`${l.y-l.height-A.offsetHeight-15}px`):(A.classList.remove("ML__popover--reverse-direction"),A.classList.add("top-tip"),A.classList.remove("bottom-tip"),A.style.top=`${l.y+15}px`)}function Br(t){t.suggestionIndex=0,document.getElementById("mathlive-suggestion-popover")&&Pr("mathlive-suggestion-popover")}function Yf(t,e){let a=document.getElementById("mathlive-suggestion-popover");return a?Pr("mathlive-suggestion-popover"):(Ve("suggestion-popover"),Ve("core")),a=mi("mathlive-suggestion-popover"),a.addEventListener("pointerdown",s=>s.preventDefault()),a.addEventListener("click",s=>{let o=s.target;for(;o&&!o.dataset.command;)o=o.parentElement;o&&($t(t,"reject"),V.insert(t.model,o.dataset.command,{selectionMode:"placeholder",format:"latex",mode:"math"}),t.dirty=!0,t.focus())}),a.innerHTML=globalThis.MathfieldElement.createHTML(e),a}function lp(){document.getElementById("mathlive-suggestion-popover")&&(Pr("mathlive-suggestion-popover"),it("suggestion-popover"),it("core"))}function Qf(){let t=String(new Error().stack).replace(/^Error.*\n/,"").split(`
`);if(t.length===0)return console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${new Error().stack}").`),"";let e=t[1],a=e.match(/http.*\.ts[\?:]/);return a&&(e=t[2]),a=e.match(/(https?:.*):[0-9]+:[0-9]+/),a||(a=e.match(/at (.*(\.ts))[\?:]/),a||(a=e.match(/at (.*(\.mjs|\.js))[\?:]/))),a?a[1]:(console.error(t),console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${e}").`),"")}var ir=null,cp,up,Ql=((up=(cp=globalThis?.document)==null?void 0:cp.currentScript)==null?void 0:up.src)||Qf();async function rs(t){if(/^(?:[a-z+]+:)?\/\//i.test(t)){try{return new URL(t).href}catch{}if(t.startsWith("//"))try{return new URL(`${window.location.protocol}${t}`).href}catch{}return t}if(ir===null)try{let e=await fetch(Ql,{method:"HEAD"});e.status===200&&(ir=e.url,ir=ir.replace(/\/\+esm$/,"/"),ir.includes("jsdelivr.net/")&&(ir+="/"))}catch{console.error(`Invalid URL "${t}" (relative to "${Ql}")`)}return new URL(t,ir??Ql).href}function eg(t,e,a={}){return new FontFace(t,`url(${e}.woff2) format('woff2')`,a)}var Be="not-loaded";async function dp(){return Be="not-loaded",pi()}async function pi(){var t;if(Be==="not-loaded"){if(Be="loading",(t=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))!=null?t:!1){Be="ready";return}if(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document){let e=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"],a=Array.from(document.fonts).map(l=>l.family);if(e.every(l=>a.includes(l))){Be="ready";return}if(!globalThis.MathfieldElement.fontsDirectory){Be="not-loaded";return}let s=await rs(globalThis.MathfieldElement.fontsDirectory);if(!s){document.body.classList.add("ML__fonts-did-not-load"),Be="error";return}s.endsWith("/")&&(s=s.slice(0,-1));let o=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular"],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(l=>eg(l[0].replace(/-[a-zA-Z]+$/,""),`${s}/${l[0]}`,l[1]));try{(await Promise.all(o.map(l=>{try{return l.load()}catch{}}))).forEach(l=>document.fonts.add(l)),Be="ready";return}catch(l){console.error(`MathLive 0.106.0: The math fonts could not be loaded from "${s}"`,{cause:l}),document.body.classList.add("ML__fonts-did-not-load")}Be="error"}}}function mp(t,e=0){let a=3735928559^e,s=1103547991^e;for(let o=0;o<t.length;o++){let l=t.charCodeAt(o);a=Math.imul(a^l,2654435761),s=Math.imul(s^l,1597334677)}return a=Math.imul(a^a>>>16,2246822507),a^=Math.imul(s^s>>>13,3266489909),s=Math.imul(s^s>>>16,2246822507),s^=Math.imul(a^a>>>13,3266489909),4294967296*(2097151&s)+(a>>>0)}function U(t,e){!t||t.dirty||!t.field||(t.resizeObserver.unobserve(t.field),t.dirty=!0,requestAnimationFrame(()=>{rt(t)&&t.dirty&&(t.atomBoundsCache=new Map,bt(t,e),t.atomBoundsCache=void 0,t.resizeObserver.observe(t.field),t.resizeObserverStarted=!0)}))}function tg(t,e){var a;e=e??{};let s=new O({from:f(p({},t.context),{atomIdsSettings:{seed:e.forHighlighting?mp(b.serialize([t.model.root],{expandMacro:!1,defaultMode:t.options.defaultMode})):"random",groupNumbers:(a=e.forHighlighting)!=null?a:!1},letterShapeStyle:t.options.letterShapeStyle}),mathstyle:t.options.defaultMode==="inline-math"?"textstyle":"displaystyle"}),o=t.model.root.render(s);return Mr(It(o,s),{classes:t.hasEditablePrompts?"ML__latex ML__prompting":"ML__latex",attributes:{translate:"no","aria-hidden":"true"}})}function ec(t,e){try{let{model:a}=t;a.root.caret=void 0,a.root.isSelected=!1,a.root.containsCaret=!0;for(let s of a.atoms)s.caret=void 0,s.isSelected=!1,s.containsCaret=!1;if(a.selectionIsCollapsed){let s=a.at(a.position);s.caret=t.model.mode;let o=s.parent;for(;o;)o.containsCaret=!0,o=o.parent}else{let s=a.getAtoms(a.selection,{includeChildren:!0});for(let o of s)o.isSelected=!0}return tg(t,e).toMarkup()}catch(a){return console.error(a),'<span class="ML__latex" translate="no" aria-hidden="true"></span>'}}function bt(t,e){if(!rt(t))return;e!=null||(e={});let a=t.element.querySelector("[part=virtual-keyboard-toggle]");a&&(a.style.display=t.hasEditableContent?"":"none");let s=t.field;if(!s)return;let o=t.isSelectionEditable&&t.hasFocus(),l=s.classList.contains("ML__focused");l&&!o?s.classList.remove("ML__focused"):!l&&o&&s.classList.add("ML__focused");let u=ec(t,e),c=t.element.querySelector("[part=menu-toggle]");if(c){let d=!1;(t.disabled||t.readOnly&&!t.hasEditableContent||t.userSelect==="none")&&(d=!0),!d&&s.offsetWidth<50&&(d=!0),c.style.display=d?"none":""}if(t.model.atoms.length<=1){let d=t.options.contentPlaceholder;d&&(u+=`<span part=placeholder class="ML__content-placeholder">${de(d)}</span>`)}s.innerHTML=globalThis.MathfieldElement.createHTML(u),ao(t,e.interactive),t.dirty=!1}function ao(t,e){let a=t.field;if(!a)return;for(let u of a.querySelectorAll(".ML__selection, .ML__contains-highlight"))u.remove();if(!(e!=null&&e)&&Be!=="error"&&Be!=="ready"){setTimeout(()=>{Be==="ready"?ao(t):setTimeout(()=>ao(t),128)},32);return}let s=t.model,o,l=()=>{if(o!==void 0)return o;let u=a.offsetWidth,c=a.getBoundingClientRect().width;return o=Math.floor(c)/u,isNaN(o)&&(o=1),o};if(s.selectionIsCollapsed){dn(t,{deferred:!0});let u=s.at(s.position);for(;u&&u.type!=="prompt"&&!(u.containsCaret&&u.displayContainsHighlight);)u=u.parent;if(u!=null&&u.containsCaret&&u.displayContainsHighlight){let c=l(),d=zl(t,Ar(t,u),c);if(d){d.left/=c,d.right/=c,d.top/=c,d.bottom/=c;let m=document.createElement("div");m.classList.add("ML__contains-highlight"),m.style.position="absolute",m.style.left=`${d.left+1}px`,m.style.top=`${Math.ceil(d.top)}px`,m.style.width=`${Math.ceil(d.right-d.left)}px`,m.style.height=`${Math.ceil(d.bottom-d.top)}px`,a.insertBefore(m,a.childNodes[0])}}return}for(let u of rg(Na(t,{excludeAtomsWithBackground:!0}))){let c=l();u.left/=c,u.right/=c,u.top/=c,u.bottom/=c;let d=document.createElement("div");d.classList.add("ML__selection"),d.style.position="absolute",d.style.left=`${u.left}px`,d.style.top=`${u.top}px`,d.style.width=`${Math.ceil(u.right-u.left)}px`,d.style.height=`${Math.ceil(u.bottom-u.top-1)}px`,a.insertBefore(d,a.childNodes[0])}}function rg(t){let e=[];for(let a of t){let s=!1;for(let o of e)if(a.left===o.left&&a.right===o.right&&a.top===o.top&&a.bottom===o.bottom){s=!0;break}s||e.push(a)}t=e,e=[];for(let a of t){let s=0;for(let o of t)if(a.left>=o.left&&a.right<=o.right&&a.top>=o.top&&a.bottom<=o.bottom&&(s+=1,s>1))break;s===1&&e.push(a)}return e}function tc(t){if(!t)return;let e=t.model,a=e.selection,s=b.serialize([e.root],{expandMacro:!1,defaultMode:t.options.defaultMode});V.insert(e,s,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",silenceNotifications:!0,mode:"math"});let o=e.silenceNotifications;e.silenceNotifications=!0,e.selection=a,e.silenceNotifications=o,U(t)}function rc(){for(let t of document.querySelectorAll(".ML__mathfield"))"_mathfield"in t&&tc(t._mathfield)}var ic=3,yt;function pe(t,e){e=p({target:"mathfield",canUndo:!1,audioFeedback:void 0,changeContent:!1,changeSelection:!1},e??{}),yt||(yt={});for(let a of Object.keys(t))yt[a],yt[a]=f(p({},e),{fn:t[a]})}function nc(t){let e;if(Array.isArray(t)){if(t[0]==="performWithFeedback")return nc(t[1]);e=t[0]}else e=t;return yt[e]}function nr(t){var e;return(e=nc(t))==null?void 0:e.target}function pp(t,e){var a,s;if(e=hi(e),!e)return!1;let o,l=[],u=!1,c=!1;Y(e)?(o=e[0],l=e.slice(1)):o=e;let d=yt[o],m=d?.target;if(m==="model"){if(!t.isSelectionEditable&&d!=null&&d.changeContent)return t.model.announce("plonk"),!1;/^(delete|add)/.test(o)&&(o!=="deleteBackward"&&t.flushInlineShortcutBuffer(),t.snapshot(o)),/^complete/.test(o)||di(t),yt[o].fn(t.model,...l),Rr(t),c=!0,u=!0}else if(m==="virtual-keyboard")c=(s=(a=window.mathVirtualKeyboard)==null?void 0:a.executeCommand(e))!=null?s:!1,u=!0;else if(yt[o]){if(!t.isSelectionEditable&&d!=null&&d.changeContent)return t.model.announce("plonk"),!1;/^(undo|redo)/.test(o)&&t.flushInlineShortcutBuffer(),c=yt[o].fn(t,...l),u=!0}else throw new Error(`Unknown command "${o}"`);return m!=="virtual-keyboard"&&(!t.model.selectionIsCollapsed||d!=null&&d.changeSelection&&o!=="deleteBackward")&&(t.flushInlineShortcutBuffer(),d!=null&&d.changeContent||t.stopCoalescingUndo(),t.defaultStyle={}),c&&U(t),u}function ig(t,e){var a;if(!t)return!1;t.focus(),mn.keypressVibration&&Ro()&&navigator.vibrate(ic);let s=nc(e);globalThis.MathfieldElement.playSound((a=s?.audioFeedback)!=null?a:"keypress");let o=t.executeCommand(e);return t.scrollIntoView(),o}pe({performWithFeedback:(t,e)=>ig(t,e)});function ng(t){return Rr(t,{atIndex:t.suggestionIndex+1}),!1}function og(t){return Rr(t,{atIndex:t.suggestionIndex-1}),!1}pe({complete:$t},{target:"mathfield",audioFeedback:"return",canUndo:!0,changeContent:!0,changeSelection:!0});pe({dispatchEvent:(t,e,a)=>{var s,o;return(o=(s=t.host)==null?void 0:s.dispatchEvent(new CustomEvent(e,{detail:a})))!=null?o:!1}},{target:"mathfield"});pe({nextSuggestion:ng,previousSuggestion:og},{target:"mathfield",audioFeedback:"keypress",changeSelection:!0});function hi(t){if(!t)return;if(Y(t)&&t.length>0){let a=t[0];return a=a.replace(/-\w/g,s=>s[1].toUpperCase()),a==="performWithFeedback"&&t.length===2?[a,hi(t[1])]:[a,...t.slice(1)]}if(typeof t!="string")return;let e=t.trim().match(/^([a-zA-Z0-9-]+)\((.*)\)$/);if(e){let a=e[1].replace(/-\w/g,o=>o[1].toUpperCase()),s=e[2].split(",").map(o=>o.trim());return[a,...s.map(o=>{if(/"[^"]*"/.test(o)||/'[^']*'/.test(o))return o.slice(1,-1);if(/^true$/.test(o))return!0;if(/^false$/.test(o))return!1;if(/^[-]?\d+$/.test(o))return parseInt(o,10);if(/^\{.*\}$/.test(o))try{return JSON.parse(o)}catch{return console.error("Invalid argument:",o),o}return hi(o)})]}return t.replace(/-\w/g,a=>a[1].toUpperCase())}var lo="mathlive#virtual-keyboard-message";function co(t){var e;return t.type!=="message"?!1:((e=t.data)==null?void 0:e.type)===lo}var so=class Mw{constructor(){this.targetOrigin=window.origin,this.originValidator="none",this._boundingRect=new DOMRect(0,0,0,0),this._isShifted=!1,window.addEventListener("message",this),this.sendMessage("proxy-created"),this.listeners={}}static get singleton(){return this._singleton||(this._singleton=new Mw),this._singleton}getKeycap(e){}setKeycap(e,a){this.sendMessage("update-setting",{setKeycap:{keycap:e,value:a}})}set alphabeticLayout(e){this.sendMessage("update-setting",{alphabeticLayout:e})}set layouts(e){this.sendMessage("update-setting",{layouts:e})}get normalizedLayouts(){return[]}set editToolbar(e){this.sendMessage("update-setting",{editToolbar:e})}set container(e){throw new Error("Container inside an iframe cannot be changed")}show(e){this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:!0},bubbles:!0,cancelable:!0,composed:!0}))&&(this.sendMessage("show",e),this.dispatchEvent(new Event("virtual-keyboard-toggle")))}hide(e){this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:!1},bubbles:!0,cancelable:!0,composed:!0}))&&(this.sendMessage("hide",e),this.dispatchEvent(new Event("virtual-keyboard-toggle")))}get isShifted(){return this._isShifted}get visible(){return this._boundingRect.height>0}set visible(e){e?this.show():this.hide()}get boundingRect(){return this._boundingRect}executeCommand(e){return this.sendMessage("execute-command",{command:e}),!0}updateToolbar(e){this.sendMessage("update-toolbar",e)}update(e){this.sendMessage("update-setting",e)}connect(){this.sendMessage("connect")}disconnect(){this.sendMessage("disconnect")}addEventListener(e,a,s){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(a)||this.listeners[e].add(a)}dispatchEvent(e){return!this.listeners[e.type]||this.listeners[e.type].size===0?!0:(this.listeners[e.type].forEach(a=>{typeof a=="function"?a(e):a?.handleEvent(e)}),!e.defaultPrevented)}removeEventListener(e,a,s){this.listeners[e]&&this.listeners[e].delete(a)}handleEvent(e){if(co(e)){if(!Gi(e.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${e.origin}) cannot be handled`,"SecurityError");this.handleMessage(e.data)}}handleMessage(e){let{action:a}=e;if(a==="execute-command"){let{command:s}=e;nr(s)==="virtual-keyboard"&&this.executeCommand(s);return}if(a==="synchronize-proxy"){this._boundingRect=e.boundingRect,this._isShifted=e.isShifted;return}if(a==="geometry-changed"){this._boundingRect=e.boundingRect,this.dispatchEvent(new Event("geometrychange"));return}}sendMessage(e,a={}){if(!window.top)throw new DOMException("A frame does not have access to the top window and cant communicate with the keyboard. Review virtualKeyboardTargetOrigin and originValidator on mathfields embedded in an iframe","SecurityError");window.top.postMessage(p({type:lo,action:e},a),this.targetOrigin)}},oc={numeric:{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",rows:[[{latex:"x",shift:"y",variants:["y","z","t","r","x^2","x^n","x^{#?}","x_n","x_i","x_{#?}",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"}]},{latex:"n",shift:"a",variants:["i","j","p","k","a","u"]},"[separator-5]","[7]","[8]","[9]","[/]","[separator-5]",{latex:"\\exponentialE",shift:"\\ln",variants:["\\exp","\\times 10^{#?}","\\ln","\\log_{10}","\\log","\\lg","\\operatorname{lb}"]},{latex:"\\imaginaryI",variants:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"]},{latex:"\\pi",shift:"\\sin",variants:["\\prod",{latex:"\\theta",aside:"theta"},{latex:"\\rho",aside:"rho"},{latex:"\\tau",aside:"tau"},"\\sin","\\cos","\\tan"]}],[{label:"<",latex:"<",class:"hide-shift",shift:{latex:"\\le",label:""}},{label:">",latex:">",class:"hide-shift",shift:{latex:"\\ge",label:""}},"[separator-5]","[4]","[5]","[6]","[*]","[separator-5]",{class:"hide-shift",latex:"#@^2}",shift:"#@^{\\prime}}"},{latex:"#@^{#0}}",class:"hide-shift",shift:"#@_{#?}"},{class:"hide-shift",latex:"\\sqrt{#0}",shift:{latex:"\\sqrt[#0]{#?}}"}}],["[(]","[)]","[separator-5]","[1]","[2]","[3]","[-]","[separator-5]",{latex:"\\int^{\\infty}_{0}\\!#?\\,\\mathrm{d}x",class:"small hide-shift",shift:"\\int",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{class:"hide-shift",latex:"\\forall",shift:"\\exists"},{label:"[backspace]",width:1}],[{label:"[shift]",width:2},"[separator-5]","[0]","[.]","[=]","[+]","[separator-5]","[left]","[right]",{label:"[action]",width:1}]]},greek:{label:"&alpha;&beta;&gamma;",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.greek",rows:[[{label:"<i>&#x03c6;</i>",class:"MLK__tex hide-shift",insert:"\\varphi",aside:"phi var.",shift:"\\Phi"},{label:"<i>&#x03c2;</i>",class:"MLK__tex hide-shift",insert:"\\varsigma",aside:"sigma var.",shift:"\\Sigma"},{label:"<i>&#x03f5;</i>",class:"MLK__tex hide-shift",insert:"\\epsilon",aside:"epsilon",shift:'\\char"0190'},{label:"<i>&rho;</i>",class:"MLK__tex hide-shift",insert:"\\rho",aside:"rho",shift:'\\char"3A1'},{label:"<i>&tau;</i>",class:"MLK__tex hide-shift",insert:"\\tau",aside:"tau",shift:'\\char"3A4'},{label:"<i>&upsilon;</i>",class:"MLK__tex hide-shift",insert:"\\upsilon",aside:"upsilon",shift:"\\Upsilon"},{label:"<i>&theta;</i>",class:"MLK__tex hide-shift",insert:"\\theta",aside:"theta",shift:"\\Theta"},{label:"<i>&iota;</i>",class:"MLK__tex hide-shift",insert:"\\iota",aside:"iota",shift:'\\char"399'},{label:"<i>&omicron;</i>",class:"MLK__tex hide-shift",insert:"\\omicron",aside:"omicron",shift:'\\char"39F'},{label:"<i>&pi;</i>",class:"MLK__tex hide-shift",insert:"\\pi",aside:"pi",shift:"\\Pi"}],["[separator-5]",{label:"<i>&alpha;</i>",class:"MLK__tex hide-shift",insert:"\\alpha",aside:"alpha",shift:'\\char"391'},{label:"<i>&sigma;</i>",class:"MLK__tex hide-shift",insert:"\\sigma",aside:"sigma",shift:"\\Sigma"},{label:"<i>&delta;</i>",class:"MLK__tex hide-shift",insert:"\\delta",aside:"delta",shift:"\\Delta"},{latex:"\\phi",class:"MLK__tex hide-shift",insert:"\\phi",aside:"phi",shift:"\\Phi"},{label:"<i>&gamma;</i>",class:"MLK__tex hide-shift",insert:"\\gamma",aside:"gamma",shift:"\\Gamma"},{label:"<i>&eta;</i>",class:"MLK__tex hide-shift",insert:"\\eta",aside:"eta",shift:'\\char"397'},{label:"<i>&xi;</i>",class:"MLK__tex hide-shift",insert:"\\xi",aside:"xi",shift:"\\Xi"},{label:"<i>&kappa;</i>",class:"MLK__tex hide-shift",insert:"\\kappa",aside:"kappa",shift:"\\Kappa"},{label:"<i>&lambda;</i>",class:"MLK__tex hide-shift",insert:"\\lambda",aside:"lambda",shift:"\\Lambda"},"[separator-5]"],["[shift]",{label:"<i>&zeta;</i>",class:"MLK__tex hide-shift",insert:"\\zeta",aside:"zeta",shift:'\\char"396'},{label:"<i>&chi;</i>",class:"MLK__tex hide-shift",insert:"\\chi",aside:"chi",shift:'\\char"3A7'},{label:"<i>&psi;</i>",class:"MLK__tex hide-shift",insert:"\\psi",aside:"psi",shift:"\\Psi"},{label:"<i>&omega;</i>",class:"MLK__tex hide-shift",insert:"\\omega",aside:"omega",shift:"\\Omega"},{label:"<i>&beta;</i>",class:"MLK__tex hide-shift",insert:"\\beta",aside:"beta",shift:'\\char"392'},{label:"<i>&nu;</i>",class:"MLK__tex hide-shift",insert:"\\nu",aside:"nu",shift:'\\char"39D'},{label:"<i>&mu;</i>",class:"MLK__tex hide-shift",insert:"\\mu",aside:"mu",shift:'\\char"39C'},"[backspace]"],["[separator]",{label:"<i>&#x03b5;</i>",class:"MLK__tex",insert:"\\varepsilon",aside:"epsilon var."},{label:"<i>&#x03d1;</i>",class:"MLK__tex",insert:"\\vartheta",aside:"theta var."},{label:"<i>&#x3f0;</i>",class:"MLK__tex",insert:"\\varkappa",aside:"kappa var."},{label:"<i>&#x03d6;</i>",class:"MLK__tex",insert:"\\varpi",aside:"pi var."},{label:"<i>&#x03f1;</i>",class:"MLK__tex",insert:"\\varrho",aside:"rho var."},"[left]","[right]","[action]"]]},symbols:{label:"&infin;",labelClass:"MLK__tex",tooltip:"keyboard.tooltip.symbols",rows:[[{latex:"\\sin",shift:"\\sin^{-1}",variants:[{class:"small",latex:"\\sinh"},{class:"small",latex:"\\sin^{-1}"},{class:"small",latex:"\\operatorname{arsinh}"}]},"\\ln",{latex:"\\mathrm{abs}",insert:"\\mathrm{abs}\\left(#0\\right)"},{latex:"\\rightarrow",shift:"\\Rightarrow",variants:[{latex:"\\implies",aside:"implies"},{latex:"\\to",aside:"to"},"\\dashv",{latex:"\\roundimplies",aside:"round implies"}]},{latex:"\\exists",variants:["\\nexists"],shift:"\\nexists"},{latex:"\\in",shift:"\\notin",variants:["\\notin","\\owns"]},"\\cup",{latex:"\\overrightarrow{#@}",shift:"\\overleftarrow{#@}",variants:["\\overleftarrow{#@}","\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"]},{class:"small hide-shift",latex:"\\lim_{#?}",shift:"\\lim_{x\\to\\infty}",variants:[{class:"small",latex:"\\liminf_{#?}"},{class:"small",latex:"\\limsup_{#?}"}]},"\\exponentialE"],[{latex:"\\cos",shift:"\\cos^{-1}",variants:[{class:"small",latex:"\\cosh"},{class:"small",latex:"\\cos^{-1}"},{class:"small",latex:"\\operatorname{arcosh}"}]},{latex:"\\log",shift:"\\log_{10}",variants:["\\log_{#0}","\\log_{10}"]},"\\left\\vert#0\\right\\vert",{latex:"\\larr",shift:"\\lArr",variants:[{latex:"\\impliedby",aside:"implied by"},{latex:"\\gets",aside:"gets"},"\\lArr","\\vdash",{latex:"\\models",aside:"models"}]},{latex:"\\forall",shift:"\\lnot",variants:[{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"}]},{latex:"\\ni",shift:"\\not\\owns"},"\\cap",{latex:"\\overline{#@}",shift:"\\underline{#@}",variants:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}","\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"]},{class:"hide-shift small",latex:"\\int",shift:"\\iint",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\intop","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"]},{latex:"\\pi",shift:"\\tau",variants:["\\tau"]}],[{latex:"\\tan",shift:"\\tan^{-1}",variants:[{class:"small",latex:"\\tanh"},{class:"small",latex:"\\tan^{-1}"},{class:"small",latex:"\\operatorname{artanh}"},{class:"small",latex:"\\arctan"},{class:"small",latex:"\\operatorname{arctg}"},{class:"small",latex:"\\operatorname{tg}"}]},{latex:"\\exp",insert:"\\exp\\left(#0\\right)",variants:["\\exponentialE^{#0}"]},"\\left\\Vert#0\\right\\Vert",{latex:"\\lrArr",shift:"\\leftrightarrow",variants:[{latex:"\\iff",aside:"if and only if"},"\\leftrightarrow","\\leftrightarrows","\\Leftrightarrow",{latex:"^\\biconditional",aside:"biconditional"}]},{latex:"\\vert",shift:"!"},{latex:"#@^{\\complement}",aside:"complement",variants:[{latex:"\\setminus",aside:"set minus"},{latex:"\\smallsetminus",aside:"small set minus"}]},{latex:"\\subset",shift:"\\subseteq",variants:["\\subset","\\subseteq","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsubseteq","\\supset","\\supseteq","\\supsetneq","\\supsetneqq","\\nsupset","\\nsupseteq"]},{latex:"#@^{\\prime}",shift:"#@^{\\doubleprime}",variants:["#@^{\\doubleprime}","#@\\degree"]},{latex:"\\mathrm{d}",shift:"\\partial",variants:["\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{latex:"\\infty",variants:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"]}],[{label:"[shift]",width:2},{class:"box",latex:",",shift:";",variants:[";","?"]},{class:"box",latex:"\\colon",shift:"\\Colon",variants:[{latex:"\\Colon",aside:"such that",class:"box"},{latex:":",aside:"ratio",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\therefore",aside:"therefore",class:"box"},{latex:"\\because",aside:"because",class:"box"}]},{class:"box",latex:"\\cdot",aside:"centered dot",shift:"\\ast",variants:["\\circ","\\bigcirc","\\bullet","\\odot","\\oslash","\\circledcirc","\\ast","\\star","\\times","\\doteq","\\doteqdot"]},"[separator]","[left]","[right]",{label:"[backspace]",width:1,class:"action hide-shift"},{label:"[action]",width:1}]]},compact:{label:"compact",rows:[["[+]","[-]","[*]","[/]","[=]","[.]","[(]","[)]","\\sqrt{#0}","#@^{#?}"],["[1]","[2]","[3]","[4]","[5]","[6]","[7]","[8]","[9]","[0]"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]},minimalist:{label:"minimalist",layers:[{style:`
          div.minimalist-backdrop {
            display: flex;
            justify-content: center;
          }          
          div.minimalist-container {
            --keycap-height: 40px;
            --keycap-max-width: 53px;
            --keycap-small-font-size: 12px;
            background: var(--keyboard-background);
            padding: 20px 20px 0px 20px;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            border: 1px solid var(--keyboard-border);
            box-shadow: 0 0 32px rgb(0 0 0 / 30%);
          }        
        `,backdrop:"minimalist-backdrop",container:"minimalist-container",rows:[["+","-","\\times",{latex:"\\frac{#@}{#0}",class:"small"},"=","[.]","(",")",{latex:"\\sqrt{#0}",class:"small"},{latex:"#@^{#?}",class:"small"}],["1","2","3","4","5","6","7","8","9","0"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]}]},"numeric-only":{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",id:"numeric-only",rows:[["7","8","9","[separator]",{label:"[backspace]",width:2}],["4","5","6","[separator]","[separator]","[separator]"],["1","2","3","[separator]","[separator]","[separator]"],["0",{label:"[.]",variants:[]},"-","[separator]","[left]","[right]"]]}},is={0:["\\varnothing","\\infty"],1:["\\frac{1}{#@}","#@^{-1}","\\times 10^{#?}","\\phi","\\imaginaryI"],2:["\\frac{1}{2}","#@^2","\\sqrt2","\\exponentialE"],3:["\\frac{1}{3}","#@^3","\\sqrt3","\\pi"],4:["\\frac{1}{4}","#@^4"],5:["\\frac{1}{5}","#@^5","\\sqrt5"],6:["\\frac{1}{6}","#@^6"],7:["\\frac{1}{7}","#@^7"],8:["\\frac{1}{8}","#@^8"],9:["\\frac{1}{9}","#@^9"],".":[".",",",";","\\colon"],",":["{,}",".",";","\\colon"],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"","","","","",""],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"","","","","",""],b:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"},""],d:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isnt"},"","","",""],E:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isnt"},"","","",""],g:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"},"","","",""],I:[{latex:"\\imaginaryI",aside:"imaginary i"},"","","",""],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"},""],o:["","","","","",""],O:["","","","","",""],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],u:["","","",""],U:["","","",""],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],y:["",""],Y:[""],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br> em"},{latex:'\\char"203A\\,\\char"2039',insert:"\\,",aside:"thin space<br> em"},{latex:'\\char"203A\\:\\char"2039',insert:"\\:",aside:"medium space<br> em"},{latex:'\\char"203A\\;\\char"2039',insert:"\\;",aside:"thick space<br> em"},{latex:'\\char"203A\\ \\char"2039',insert:"\\ ",aside:" em"},{latex:'\\char"203A\\enspace\\char"2039',insert:"\\enspace",aside:" em"},{latex:'\\char"203A\\quad\\char"2039',insert:"\\quad",aside:"1 em"},{latex:'\\char"203A\\qquad\\char"2039',insert:"\\qquad",aside:"2 em"}]},pn;function ns(t,e){var a,s,o,l,u;let c=Ee.singleton;if(!c)return;let d=fi(t),m="";if(window.mathVirtualKeyboard.isShifted){let De=(a=c.getKeycap(d?.id))==null?void 0:a.shift;typeof De=="object"&&"variants"in De&&(m=(s=De.variants)!=null?s:"")}else m=(l=(o=c.getKeycap(d?.id))==null?void 0:o.variants)!=null?l:"";if(typeof m=="string"&&!os(m)||Array.isArray(m)&&m.length===0){e?.();return}let g={},A="";for(let De of sg(m)){let Xe=uo(De),qe=Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);g[qe]=Xe;let[Rs,Vc]=hn(Xe);A+=`<div id=${qe} class="item ${Vc}">${Rs}</div>`}let P=document.createElement("div");P.setAttribute("aria-hidden","true"),P.className="MLK__variant-panel",P.style.height="auto";let W=Object.keys(g).length,me=5;W===1?me=1:W===2||W===4?me=2:W===3||W===5||W===6?me=3:W>=7&&W<14&&(me=4),P.style.width=`calc(var(--variant-keycap-length) * ${me} + 12px)`,P.innerHTML=mn.createHTML(A),Ae.open({root:(u=c?.container)==null?void 0:u.querySelector(".ML__keyboard"),child:P}),pn=new AbortController;let{signal:ve}=pn,He=t?.getBoundingClientRect();if(He){He.top-P.clientHeight<0&&(P.style.width="auto",W<=6?P.style.height="56px":W<=12?P.style.height="108px":W<=18?P.style.height="205px":P.classList.add("compact"));let De=Math.max(0,Math.min(window.innerWidth-P.offsetWidth,(He.left+He.right-P.offsetWidth)/2)),Xe=He.top-P.clientHeight+5;P.style.left=`${De}px`,P.style.top=`${Xe}px`,P.classList.add("is-visible"),requestAnimationFrame(()=>{var qe;P.addEventListener("pointerup",Rs=>{let Vc=fi(Rs.target);!(Vc!=null&&Vc.id)||!g[Vc.id]||(as(g[Vc.id]),zr(),e?.(),Rs.preventDefault())},{capture:!0,passive:!1,signal:ve}),P.addEventListener("pointerenter",Rs=>{let Vc=fi(Rs.target);!(Vc!=null&&Vc.id)||!g[Vc.id]||Vc.classList.add("is-active")},{capture:!0,signal:ve}),P.addEventListener("pointerleave",Rs=>{let Vc=fi(Rs.target);Rs.target&&"tagName"in Rs.target&&typeof Rs.target.tagName=="string"&&Rs.target.tagName.toUpperCase()==="ASIDE"||!(Vc!=null&&Vc.id)||!g[Vc.id]||Vc.classList.remove("is-active")},{capture:!0,signal:ve}),(qe=c.getKeycap(d?.id))!=null&&qe.stickyVariantPanel?window.addEventListener("pointerdown",Rs=>{if(!(Rs.target instanceof Node))return;let Vc=P.contains(Rs.target);Rs.target===P||Vc||(zr(),e?.())},{signal:ve}):(window.addEventListener("pointercancel",()=>{zr(),e?.()},{signal:ve}),window.addEventListener("pointerup",()=>{zr(),e?.()},{signal:ve}))})}}function zr(){pn?.abort(),pn=null,Ae.state==="open"&&Ae.close()}function ag(t){if(t==="foreground-color"){let e=[];for(let a of Object.keys(jt))e.push({class:"swatch-button",label:'<span style="border: 3px solid '+jt[a]+'"></span>',command:["applyStyle",{color:a}]});return e}if(t==="background-color"){let e=[];for(let a of Object.keys(Ut))e.push({class:"swatch-button",label:'<span style="background:'+Ut[a]+'"></span>',command:["applyStyle",{backgroundColor:a}]});return e}}function os(t){return is[t]!==void 0}function sg(t){var e;return typeof t!="string"?t:(is[t]||(is[t]=(e=ag(t))!=null?e:[]),is[t])}function lg(t){return typeof t=="string"?t:Object.entries(t).map(([e,a])=>`${e}:${a} !important`).join(";")}function cg(t){return Object.keys(t).map(e=>`${e} {${lg(t[e])}}`).join("")}function mo(t){if(!t)return"";let e=new O,a=new b({mode:"math",type:"root",body:he(t,{context:e,args:o=>o==="@"?"{\\class{ML__box-placeholder}{\\blacksquare}}":"\\placeholder{}"})}),s=_r(It(new _(a.render(e),{classes:"ML__base"}),e));return Mr(s,{classes:"ML__latex"}).toMarkup()}function po(t){if(Array.isArray(t))return t.map(a=>po(a)).flat();let e=typeof t=="string"?{markup:t}:t;return"rows"in e&&Array.isArray(e.rows)&&(e.rows=e.rows.map(a=>a.map(s=>uo(s)))),e.id!=null||(e.id="ML__layer_"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36)),[e]}function ug(){var t,e;let a=window.mathVirtualKeyboard.alphabeticLayout;if(a==="auto"){let u=Dr();u&&(a=u.virtualLayout),(!a||a==="auto")&&(a=(t={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[N.locale.slice(0,2)])!=null?t:"qwerty")}let s={qwerty:["qwertyuiop"," asdfghjkl ","^zxcvbnm~"],azerty:["azertyuiop","qsdfghjklm","^ wxcvbn ~"],qwertz:["qwertzuiop"," asdfghjkl ","^yxcvbnm~"],dvorak:["^  pyfgcrl ","aoeuidhtns","qjkxbmwvz~"],colemak:[" qwfpgjluy ","arstdhneio","^zxcvbkm~"]},o=(e=s[a])!=null?e:s.qwerty,l=a==="azerty"?[[{label:"1",variants:"1"},{label:"2",shift:{latex:""},variants:"2"},{label:"3",shift:{latex:""},variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{label:"(",latex:"("},variants:"5"},{label:"6",shift:{label:")",latex:")"},variants:"6"},{label:"7",shift:{latex:""},variants:"7"},{label:"8",shift:{latex:""},variants:"8"},{label:"9",shift:{latex:""},variants:"9"},{label:"0",shift:{latex:""},variants:"0"}]]:[[{label:"1",variants:"1"},{label:"2",variants:"2"},{label:"3",variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{latex:"\\frac{#@}{#?}"},variants:"5"},{label:"6",shift:{latex:"#@^#?"},variants:"6"},{label:"7",variants:"7"},{label:"8",shift:{latex:"\\times"},variants:"8"},{label:"9",shift:{label:"(",latex:"("},variants:"9"},{label:"0",shift:{label:")",latex:")"},variants:"0"}]];for(let u of o){let c=[];for(let d of u)/[a-z]/.test(d)?c.push({label:d,class:"hide-shift",shift:{label:d.toUpperCase(),variants:os(d.toUpperCase())?d.toUpperCase():void 0},variants:os(d)?d:void 0}):d==="~"?a!=="dvorak"?c.push("[backspace]"):c.push({label:"[backspace]",width:1}):d==="^"?c.push("[shift]"):d===" "&&c.push("[separator-5]");l.push(c)}return l.push(["[-]","[+]","[=]",{label:" ",width:1.5},{label:",",shift:";",variants:".",class:"hide-shift"},"[.]","[left]","[right]",{label:"[action]",width:1.5}]),{label:"abc",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.alphabetic",layers:po({rows:l})}}function ac(t){if(t==="alphabetic")return ug();if(typeof t=="string")return ac(oc[t]);let e;if("rows"in t&&Array.isArray(t.rows)){let o=t,{rows:l}=o,u=ki(o,["rows"]);e=f(p({},u),{layers:po({rows:t.rows})})}else if("markup"in t&&typeof t.markup=="string"){let o=t,{markup:l}=o,u=ki(o,["markup"]);e=f(p({},u),{layers:po(t.markup)})}else e=p({},t),"layers"in t?e.layers=po(t.layers):console.error('MathLive 0.106.0: provide either a "rows", "markup" or "layers" property');let a=!1,s=!1;for(let o of e.layers)if(o.rows)for(let l of o.rows.flat()){fn(l)&&(a=!0);let u=l.command;typeof u=="string"&&["undo","redo","cut","copy","paste"].includes(u)&&(s=!0)}return(!("displayShiftedKeycaps"in t)||t.displayShiftedKeycaps===void 0)&&(e.displayShiftedKeycaps=a),(!("displayEditToolbar"in t)||t.displayEditToolbar===void 0)&&(e.displayEditToolbar=!s),e}function dg(t,e){var a,s;let o='<div class="left">';if(t.normalizedLayouts.length>1)for(let[l,u]of t.normalizedLayouts.entries()){let c=u,d=[l===e?"selected":"layer-switch"];c.tooltip&&d.push("MLK__tooltip"),c.labelClass&&d.push(...c.labelClass.split(" ")),o+=`<div class="${d.join(" ")}"`,c.tooltip&&(o+=" data-tooltip='"+((a=z(c.tooltip))!=null?a:c.tooltip)+"' "),l!==e&&(o+=`data-layer="${c.layers[0].id}"`),o+=`>${(s=c.label)!=null?s:"untitled"}</div>`}return o+="</div>",o}function hp(t,e){let a="";if(t.editToolbar==="none")return"";let s=[];e.selectionIsCollapsed?s.push("undo","redo","pasteFromClipboard"):s.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let o={undo:`<div class='action ${e.canUndo===!1?"disabled":""}'
          data-command='"undo"'
          data-tooltip='${z("tooltip.undo")}'>
          <svg><use xlink:href='#svg-undo' /></svg>
      </div>`,redo:`<div class='action ${e.canRedo===!1?"disabled":""}'
          data-command='"redo"'
          data-tooltip='${z("tooltip.redo")}'>
          <svg><use xlink:href='#svg-redo' /></svg>
      </div>`,cutToClipboard:`
        <div class='action'
            data-command='"cutToClipboard"'
            data-tooltip='${z("tooltip.cut to clipboard")}'>
            <svg><use xlink:href='#svg-cut' /></svg>
        </div>
    `,copyToClipboard:`
        <div class='action'
            data-command='"copyToClipboard"'
            data-tooltip='${z("tooltip.copy to clipboard")}'>
            <svg><use xlink:href='#svg-copy' /></svg>
        </div>
    `,pasteFromClipboard:`
        <div class='action'
            data-command='"pasteFromClipboard"'
            data-tooltip='${z("tooltip.paste from clipboard")}'>
            <svg><use xlink:href='#svg-paste' /></svg>
        </div>
    `};return a+=s.map(l=>o[l]).join(""),a}function mg(t){for(let e of t)pg(e)}function pg(t){let e=Ee.singleton;if(!e)return;let a={};if(!t.id){if(t.hasAttribute("data-label")&&(a.label=t.dataset.label),t.hasAttribute("data-latex")&&(a.latex=t.dataset.latex),t.hasAttribute("data-key")&&(a.key=t.dataset.key),t.hasAttribute("data-insert")&&(a.insert=t.dataset.insert),t.hasAttribute("data-variants")&&(a.variants=t.dataset.variants),t.hasAttribute("data-aside")&&(a.aside=t.dataset.aside),t.className&&(a.class=t.className),!a.label&&!a.latex&&!a.key&&!a.insert&&(a.latex=t.innerText,a.label=t.innerHTML),t.hasAttribute("data-command"))try{a.command=JSON.parse(t.dataset.command)}catch{}t.id=e.registerKeycap(a)}if(!t.innerHTML){let[s,o]=hn(a);t.innerHTML=globalThis.MathfieldElement.createHTML(s)}}function hg(){Ve("virtual-keyboard"),Ve("core"),pi()}function fp(){it("core"),it("virtual-keyboard")}var fg=`<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

<symbol id="svg-delete-backward" viewBox="0 0 576 512">
  <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>
</symbol>

<symbol id="svg-shift" viewBox="0 0 384 512">
  <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>
</symbol>

<symbol id="svg-commit" viewBox="0 0 512 512">
  <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>
</symbol>


<symbol id="circle-plus" viewBox="0 0 512 512"><path d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344c0 13.3 10.7 24 24 24s24-10.7 24-24V280h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H280V168c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H168c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"/></symbol>

<symbol id="svg-command" viewBox="0 0 640 512">
  <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>
</symbol>

<symbol id="svg-undo" viewBox="0 0 512 512">
  <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>
</symbol>
<symbol id="svg-redo" viewBox="0 0 512 512">
  <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>
</symbol>
<symbol id="svg-arrow-left" viewBox="0 0 320 512">
  <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>
</symbol>
<symbol id="svg-arrow-right" viewBox="0 0 320 512">
  <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>
</symbol>
<symbol id="svg-tab" viewBox="0 0 448 512">
  <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>
</symbol>
<symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>
<symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>
<symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>
</symbol>
<symbol id="svg-angle-double-right" viewBox="0 0 512 512"><path d="M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/>
</symbol>
<symbol id="svg-angle-double-left" viewBox="0 0 512 512"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/>
</symbol>
<symbol id="svg-trash" viewBox="0 0 448 512">
  <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>
</symbol>
<symbol id="svg-keyboard-down" viewBox="0 0 576 512"><path d="M64 48c-8.8 0-16 7.2-16 16V240c0 8.8 7.2 16 16 16H512c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64zM0 64C0 28.7 28.7 0 64 0H512c35.3 0 64 28.7 64 64V240c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM159 359c9.4-9.4 24.6-9.4 33.9 0l95 95 95-95c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L305 505c-4.5 4.5-10.6 7-17 7s-12.5-2.5-17-7L159 393c-9.4-9.4-9.4-24.6 0-33.9zm1-167c0-8.8 7.2-16 16-16H400c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V192zM120 88h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H120c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H200c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H280c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H360c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H440c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16z"/></symbol>
</svg>`;function gp(t){t.resetKeycapRegistry(),hg();let e=document.createElement("div");e.className="ML__keyboard";let a=document.createElement("div");a.className="MLK__plate",a.innerHTML=globalThis.MathfieldElement.createHTML(fg+t.normalizedLayouts.map((u,c)=>gg(t,u,c)).join(""));let s=document.createElement("div");s.className="MLK__backdrop",s.appendChild(a),e.appendChild(s),e.addEventListener("pointerdown",yg,{passive:!1});let o=e.querySelectorAll(".ML__edit-toolbar");if(o)for(let u of o)u.addEventListener("click",c=>{var d,m;let g=c.target,A="";for(;g&&!A;)A=(d=g?.getAttribute("data-command"))!=null?d:"",g=(m=g?.parentElement)!=null?m:null;A&&t.executeCommand(JSON.parse(A))});mg(e.querySelectorAll(".MLK__keycap, .action, .fnbutton, .bigfnbutton"));let l=e.querySelectorAll(".MLK__layer");l.length>0;for(let u of l)u.addEventListener("pointerdown",c=>c.preventDefault());return t.currentLayer=t.latentLayer,e}function gg(t,e,a){var s;let o=[];if(!("layers"in e))return"";for(let l of e.layers)o.push(`<div tabindex="-1" class="MLK__layer" id="${l.id}">`),(t.normalizedLayouts.length>1||e.displayEditToolbar)&&(o.push("<div class='MLK__toolbar' role='toolbar'>"),o.push(dg(t,a)),((s=e.displayEditToolbar)==null||s)&&o.push('<div class="ML__edit-toolbar right"></div>'),o.push("</div>")),o.push(bg(t,l)),o.push("</div>");return o.join("")}function bg(t,e){if(typeof e=="string")return e;let a="";if(typeof e.style=="string"?a+=`<style>${e.style}</style>`:typeof e.style=="object"&&(a+=`<style>${cg(e.style)}</style>`),e.backdrop&&(a+=`<div class='${e.backdrop}'>`),e.container&&(a+=`<div class='${e.container}'>`),e.rows){a+="<div class=MLK__rows>";for(let s of e.rows){a+='<div dir="ltr" class=MLK__row>';for(let o of s)if(o){let l=t.registerKeycap(o),[u,c]=hn(o);/(^|\s)separator/.test(c)?a+=`<div class="${c}"`:a+=`<div tabindex="-1" id="${l}" class="${c}"`,o.tooltip&&(a+=` data-tooltip="${o.tooltip}"`),a+=`>${u}</div>`}a+="</div>"}a+="</div>"}else e.markup&&(a+=e.markup);return e.container&&(a+="</div>"),e.backdrop&&(a+="</div>"),a}function hn(t,e={shifted:!1}){var a,s,o,l,u,c,d;let m="",g=(a=t.class)!=null?a:"";if(e.shifted&&fn(t)&&(g+=" is-active"),e.shifted&&"shift"in t)typeof t.shift=="string"?m=mo(t.shift):typeof t.shift=="object"&&(m=t.shift.label?t.shift.label:(s=mo(t.shift.latex||t.shift.insert||"")||t.shift.key)!=null?s:""),typeof t.shift=="object"&&(g=(l=(o=t.shift.class)!=null?o:t.class)!=null?l:"");else{if(m=t.label?t.label:(u=mo(t.latex||t.insert||"")||t.key)!=null?u:"",t.shift){let A;typeof t.shift=="string"?A=mo(t.shift):t.shift.label?A=t.shift.label:A=(c=mo(t.shift.latex||t.shift.insert||"")||t.shift.key)!=null?c:"",m+=`<span class="MLK__shift">${A}</span>`}t.aside&&(m+=`<aside>${t.aside}</aside>`)}return t.layer&&!/layer-switch/.test(g)&&(g+=" layer-switch"),/(^|\s)(separator|action|shift|fnbutton|bigfnbutton)($|\s)/.test(g)||(g+=" MLK__keycap"),!/\bw[0-9]+\b/.test(g)&&t.width&&(g+=(d={0:" w0",.5:" w5",1.5:" w15",2:" w20",5:" w50"}[t.width])!=null?d:""),[m,g||"MLK__keycap"]}var Ft={"[left]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-left /></svg>",command:"performWithFeedback(moveToPreviousChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-left /></svg>",command:"performWithFeedback(extendSelectionBackward)"}},"[right]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-right /></svg>",command:"performWithFeedback(moveToNextChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-right /></svg>",command:"performWithFeedback(extendSelectionForward)"}},"[up]":{class:"action hide-shift",label:"",command:"performWithFeedback(moveUp)",shift:{label:"",command:"performWithFeedback(extendSelectionUpward)"}},"[down]":{class:"action hide-shift",label:"",command:"performWithFeedback(moveDown)",shift:{label:"",command:"performWithFeedback(extendSelectionDownward)"}},"[return]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[action]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{label:"<svg class=svg-glyph><use xlink:href=#circle-plus /></svg>",command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[hr]":{class:"separator horizontal-rule"},"[hide-keyboard]":{class:"action",command:["hideVirtualKeyboard"],width:1.5,label:"<svg class=svg-glyph-lg><use xlink:href=#svg-keyboard-down /></svg>"},"[.]":{variants:".",command:"performWithFeedback(insertDecimalSeparator)",shift:",",class:"big-op hide-shift",label:"."},"[,]":{variants:",",command:"performWithFeedback(insertDecimalSeparator)",shift:".",class:"big-op hide-shift",label:","},"[+]":{variants:[{latex:"\\sum_{#0}^{#0}",class:"small"},"\\oplus"],latex:"+",label:"+",class:"big-op hide-shift",shift:{latex:"\\sum",insert:"\\sum",class:"small"}},"[-]":{variants:["\\pm","\\ominus"],latex:"-",label:"&#x2212;",shift:"\\pm",class:"big-op hide-shift"},"[/]":{class:"big-op hide-shift",shift:{class:"",latex:"\\frac{1}{#@}"},variants:["/","\\div","\\%","\\oslash"],latex:"\\frac{#@}{#?}",label:"&divide;"},"[*]":{variants:[{latex:"\\prod_{#0}^{#0}",class:"small"},"\\otimes","\\cdot"],latex:"\\cdot",label:"&times;",shift:{latex:"\\times"},class:"big-op hide-shift"},"[=]":{variants:["\\neq","\\equiv","\\varpropto","\\thickapprox","\\lt","\\gt","\\le","\\ge"],latex:"=",label:"=",shift:{label:"",latex:"\\ne"},class:"big-op hide-shift"},"[backspace]":{class:"action bottom right hide-shift",width:1.5,command:"performWithFeedback(deleteBackward)",label:"<svg class=svg-glyph><use xlink:href=#svg-delete-backward /></svg>",shift:{class:"action warning",label:"<svg class=svg-glyph><use xlink:href=#svg-trash /></svg>",command:"deleteAll"}},"[undo]":{class:"ghost if-can-undo",command:"undo",label:"<svg class=svg-glyph><use xlink:href=#svg-undo /></svg>",tooltip:"tooltip.undo"},"[redo]":{class:"ghost  if-can-redo",command:"redo",label:"<svg class=svg-glyph><use xlink:href=#svg-redo /></svg>",tooltip:"tooltip.redo"},"[(]":{variants:[{latex:"\\lbrack",key:"["},"\\langle","\\lfloor","\\lceil",{latex:"\\lbrace",key:"{"}],key:"(",label:"(",shift:{label:"[",key:"["},class:"hide-shift"},"[)]":{variants:[{latex:"\\rbrack",key:"]"},"\\rangle","\\rfloor","\\rceil",{latex:"\\rbrace",key:"}"}],key:")",label:")",shift:{label:"]",latex:"\\rbrack"},class:"hide-shift"},"[0]":{variants:"0",latex:"0",label:"0",shift:"\\infty",class:"hide-shift"},"[1]":{variants:"1",latex:"1",label:"1",shift:"#@^{-1}",class:"hide-shift"},"[2]":{variants:"2",latex:"2",label:"2",shift:"#@^2",class:"hide-shift"},"[3]":{variants:"3",latex:"3",label:"3",shift:"#@^3",class:"hide-shift"},"[4]":{variants:"4",latex:"4",label:"4",shift:"#@^4",class:"hide-shift"},"[5]":{variants:"5",latex:"5",label:"5",shift:"#@^5",class:"hide-shift"},"[6]":{variants:"6",latex:"6",label:"6",shift:"#@^6",class:"hide-shift"},"[7]":{variants:"7",latex:"7",label:"7",shift:"#@^7",class:"hide-shift"},"[8]":{variants:"8",latex:"8",label:"8",shift:"#@^8",class:"hide-shift"},"[9]":{variants:"9",latex:"9",label:"9",shift:"#@^9",class:"hide-shift"},"[separator-5]":{class:"separator",width:.5},"[separator]":{class:"separator"},"[separator-10]":{class:"separator"},"[separator-15]":{class:"separator",width:1.5},"[separator-20]":{class:"separator",width:2},"[separator-50]":{class:"separator",width:5},"[shift]":{class:"shift bottom left",width:1.5,label:"<span class=caps-lock-indicator></span><svg class=svg-glyph><use xlink:href=#svg-shift /></svg>"},"[foreground-color]":{variants:"foreground-color",command:["applyStyle",{color:"red"}],label:"<span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'>"},"[background-color]":{variants:"background-color",command:["applyStyle",{backgroundColor:"yellow"}],label:"<span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span>"}};function uo(t){var e;if(typeof t=="string"){if(t==="[.]"&&globalThis.MathfieldElement.decimalSeparator===","&&(t="[,]"),!Ft[t])return{latex:t};t={label:t}}let a;return"label"in t&&t.label&&Ft[t.label]&&(a=f(p(p({},Ft[t.label]),t),{label:Ft[t.label].label})),"key"in t&&t.key&&Ft[t.key]&&(a=f(p(p({},Ft[t.key]),t),{key:Ft[t.key].key})),a?(a.command==="insertDecimalSeparator"&&(a.label=(e=globalThis.MathfieldElement.decimalSeparator)!=null?e:"."),(a.tooltip===void 0||a.tooltip===null||a.tooltip===!1)&&delete a.tooltip,(a.tooltip===void 0||a.tooltip===null||a.tooltip===!1)&&delete a.tooltip,(a.aside===void 0||a.aside===null||a.aside===!1)&&delete a.aside,(a.variants===void 0||a.variants===null||a.variants===!1)&&delete a.variants,(a.shift===void 0||a.shift===null||a.shift===!1)&&delete a.shift,a):t}var ho;function yg(t){var e;if(t.button!==0)return;let a=Ee.singleton;if(!a)return;let s=t.target;for(;s&&!s.getAttribute("data-layer");)s=s.parentElement;if(s){a.currentLayer=(e=s.getAttribute("data-layer"))!=null?e:"",t.preventDefault();return}let o=fi(t.target);if(!(o!=null&&o.id))return;let l=a.getKeycap(o.id);if(!l)return;t.type;let u=new AbortController,c=u.signal;o.classList.add("is-pressed"),o.addEventListener("pointerenter",ss(u),{capture:!0,signal:c}),o.addEventListener("pointerleave",ss(u),{capture:!0,signal:c}),o.addEventListener("pointercancel",ss(u),{signal:c}),o.addEventListener("pointerup",ss(u),{signal:c}),fn(l)&&(o.classList.add("is-active"),a.shiftPressCount++),l.variants&&(ho&&clearTimeout(ho),ho=setTimeout(()=>{o.classList.contains("is-pressed")&&(o.classList.remove("is-pressed"),o.classList.add("is-active"),t.target&&"releasePointerCapture"in t.target&&t.target.releasePointerCapture(t.pointerId),ns(o,()=>{u.abort(),o?.classList.remove("is-active")}))},l.stickyVariantPanel?0:300)),t.preventDefault()}function ss(t){return e=>{let a=fi(e.target);if(!(a!=null&&a.id))return;let s=Ee.singleton;if(!s)return;let o=s.getKeycap(a.id);if(o){if(e.type==="pointerenter"&&e.target===a&&e.isPrimary&&a.classList.add("is-pressed"),e.type==="pointercancel"){a.classList.remove("is-pressed"),fn(o)&&(s.shiftPressCount--,a.classList.toggle("is-active",s.isShifted)),t.abort();return}if(e.type==="pointerleave"&&e.target===a){a.classList.remove("is-pressed"),fn(o)&&(s.shiftPressCount--,a.classList.toggle("is-active",s.isShifted));return}if(e.type==="pointerup"){ho&&clearTimeout(ho),fn(o)?a.classList.toggle("is-active",s.isShifted):a.classList.contains("is-pressed")&&(a.classList.remove("is-pressed"),s.isShifted&&o.shift?typeof o.shift=="string"?s.executeCommand(["insert",o.shift,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]):as(o.shift):as(o),s.shiftPressCount===1&&!e.shiftKey&&(s.shiftPressCount=0)),t.abort(),e.preventDefault();return}}}}function as(t){var e;let a=t.command;!a&&t.insert&&(a=["insert",t.insert,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),!a&&t.key&&(a=["typedText",t.key,{focus:!0,feedback:!0,simulateKeystroke:!0}]),!a&&t.latex&&(a=["insert",t.latex,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),a||(a=["typedText",t.label,{focus:!0,feedback:!0,simulateKeystroke:!0}]),(e=Ee.singleton)==null||e.executeCommand(a)}function xg(t){if(t.nodeType!==1)return!1;let e=t.classList;return e.contains("MLK__keycap")||e.contains("shift")||e.contains("action")||e.contains("fnbutton")||e.contains("bigfnbutton")}function fi(t){if(!t)return;let e=t;for(;e&&!xg(e);)e=e.parentElement;return e??void 0}function fn(t){return!!t.class&&/(^|\s)shift($|\s)/.test(t.class)}var Ee=class kw{constructor(){this.originalContainerBottomPadding=null,this.keycapRegistry={},this._shiftPressCount=0;var e;this.targetOrigin=window.origin,this.originValidator="none",this._alphabeticLayout="auto",this._layouts=Object.freeze(["default"]),this._editToolbar="default",this._container=void 0,this._visible=!1,this._rebuilding=!1,this.observer=new ResizeObserver(a=>{this.adjustBoundingRect(),this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect})}),this.listeners={};try{(e=window.top)==null||e.addEventListener("message",this)}catch{window.addEventListener("message",this)}document.addEventListener("focusin",a=>{let s=a.target;s!=null&&s.isConnected&&setTimeout(()=>{let o=bp();o&&!o.readOnly&&o.mathVirtualKeyboardPolicy==="auto"&&Bo()&&this.show({animate:!0})},300)}),document.addEventListener("focusout",a=>{a.target instanceof xt&&a.target.mathVirtualKeyboardPolicy!=="manual"&&setTimeout(()=>{bp()||this.hide()},300)})}get currentLayer(){var e,a,s;return(s=(a=(e=this._element)==null?void 0:e.querySelector(".MLK__layer.is-visible"))==null?void 0:a.id)!=null?s:""}set currentLayer(e){var a;if(!this._element){this.latentLayer=e;return}let s=e?this._element.querySelector(`#${e}.MLK__layer`):null;s||(s=this._element.querySelector(".MLK__layer")),s&&((a=this._element.querySelector(".MLK__layer.is-visible"))==null||a.classList.remove("is-visible"),s.classList.add("is-visible")),this.render()}get shiftPressCount(){return this._shiftPressCount}set shiftPressCount(e){var a;this._shiftPressCount=e>2||e<0?0:e,(a=this._element)==null||a.classList.toggle("is-caps-lock",this.shiftPressCount===2),this.render()}get isShifted(){return this._shiftPressCount>0}resetKeycapRegistry(){this.keycapRegistry={}}registerKeycap(e){let a="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);return this.keycapRegistry[a]=e,a}setKeycap(e,a){Ft[e]=uo(a),this.rebuild()}getKeycap(e){var a;return e?(a=Ft[e])!=null?a:this.keycapRegistry[e]:void 0}getLayer(e){let a=this.normalizedLayouts;for(let s of a)for(let o of s.layers)if(o.id===e)return o}get alphabeticLayout(){return this._alphabeticLayout}set alphabeticLayout(e){this._alphabeticLayout=e,this._normalizedLayouts=void 0,this.rebuild()}get layouts(){return this._layouts}set layouts(e){this.updateNormalizedLayouts(e),this.rebuild()}updateNormalizedLayouts(e){let a=Array.isArray(e)?[...e]:[e],s=a.findIndex(o=>o==="default");s>=0&&a.splice(s,1,"numeric","symbols","alphabetic","greek"),this._layouts=Object.freeze(a),this._normalizedLayouts=a.map(o=>ac(o))}get normalizedLayouts(){return this._normalizedLayouts||this.updateNormalizedLayouts(this._layouts),this._normalizedLayouts}get editToolbar(){return this._editToolbar}set editToolbar(e){this._editToolbar=e,this.rebuild()}get container(){return this._container===void 0?window.document.body:this._container}set container(e){this._container=e,this.rebuild()}static get singleton(){if(this._singleton===void 0)try{this._singleton=new kw}catch{this._singleton=null}return this._singleton}get style(){return this._style}addEventListener(e,a,s){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(a)||this.listeners[e].add(a)}dispatchEvent(e){return!this.listeners[e.type]||this.listeners[e.type].size===0?!0:(this.listeners[e.type].forEach(a=>{typeof a=="function"?a(e):a?.handleEvent(e)}),!e.defaultPrevented)}removeEventListener(e,a,s){this.listeners[e]&&this.listeners[e].delete(a)}get element(){return this._element}set element(e){var a;this._element!==e&&((a=this._element)==null||a.remove(),this._element=e)}get visible(){return this._visible}set visible(e){e?this.show():this.hide()}get boundingRect(){var e;if(!this._visible)return new DOMRect;let a=(e=this._element)==null?void 0:e.getElementsByClassName("MLK__plate")[0];return a?a.getBoundingClientRect():new DOMRect}adjustBoundingRect(){if(!this._element)return;let e=this.boundingRect.height;if(this.container===document.body){this._element.style.setProperty("--_keyboard-height",`calc(${e}px + var(--_padding-top) + var(--_padding-bottom) + env(safe-area-inset-bottom, 0))`);let a=e-1;this.container.style.paddingBottom=this.originalContainerBottomPadding?`calc(${this.originalContainerBottomPadding} + ${a}px)`:`${a}px`}else this._element.style.setProperty("--_keyboard-height",`${e}px`)}rebuild(){if(this._rebuilding||!this._element)return;this._rebuilding=!0;let e=this.currentLayer;requestAnimationFrame(()=>{this._rebuilding=!1,this._element&&(this._element.remove(),this._element=void 0),this.visible&&(this.buildAndAttachElement(),this.currentLayer=e,this.render(),this.adjustBoundingRect(),this._element.classList.add("is-visible"))})}render(){var e;if(!this._element)return;let a=this.getLayer(this.currentLayer);this._element.classList.toggle("backdrop-is-transparent",!!(a&&(a.backdrop||a.container)));let s=this._element.querySelectorAll(".MLK__layer.is-visible .MLK__keycap, .MLK__layer.is-visible .action, .fnbutton, .MLK__layer.is-visible .bigfnbutton, .MLK__layer.is-visible .shift");if(!s)return;let o=this.isShifted;for(let l of s){let u=this.getKeycap(l.id);if(u){let[c,d]=hn(u,{shifted:o});l.innerHTML=globalThis.MathfieldElement.createHTML(c),l.className=d,o&&typeof u.shift=="object"&&(e=u.shift)!=null&&e.tooltip?l.dataset.tooltip=u.shift.tooltip:!o&&u.tooltip&&(l.dataset.tooltip=u.tooltip)}}}show(e){var a;if(this._visible)return;let s=this.container;if(s&&window.mathVirtualKeyboard&&this.stateWillChange(!0)){if(this._element||(this.buildAndAttachElement(),this.adjustBoundingRect()),!this._visible){let o=this._element.getElementsByClassName("MLK__plate")[0];if(o&&this.observer.observe(o),s===window.document.body){let l=s.style.paddingBottom;this.originalContainerBottomPadding=l;let u=o.offsetHeight-1;s.style.paddingBottom=l?`calc(${l} + ${u}px)`:`${u}px`}window.addEventListener("mouseup",this),window.addEventListener("blur",this),window.addEventListener("keydown",this,{capture:!0}),window.addEventListener("keyup",this,{capture:!0}),(a=this._element)==null||a.classList.toggle("is-caps-lock",this.shiftPressCount===2),this.currentLayer=this.latentLayer}this._visible=!0,e!=null&&e.animate?requestAnimationFrame(()=>{this._element&&(this._element.classList.add("animate"),this._element.addEventListener("transitionend",()=>{var o;return(o=this._element)==null?void 0:o.classList.remove("animate")},{once:!0}),this._element.classList.add("is-visible"),this.stateChanged())}):(this._element.classList.add("is-visible"),this.stateChanged())}}hide(e){var a;let s=this.container;if(s&&this._visible&&this.stateWillChange(!1)){if(this._visible=!1,this._element){this.latentLayer=this.currentLayer;let o=this._element.getElementsByClassName("MLK__plate")[0];o&&this.observer.unobserve(o),window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("keydown",this,{capture:!0}),window.removeEventListener("keyup",this,{capture:!0}),window.removeEventListener("contextmenu",this,{capture:!0}),zr(),fp(),(a=this._element)==null||a.remove(),this._element=void 0,this.originalContainerBottomPadding!==null&&(s.style.paddingBottom=this.originalContainerBottomPadding)}this.stateChanged()}}get height(){var e,a;return(a=(e=this.element)==null?void 0:e.offsetHeight)!=null?a:0}buildAndAttachElement(){var e;this.element,this.element=gp(this),window.addEventListener("contextmenu",this,{capture:!0}),this.element.addEventListener("contextmenu",a=>{a.shiftKey||((a.ctrlKey||a.button===2)&&ns(a.target),a.preventDefault(),a.stopPropagation())},{capture:!0}),(e=this.container)==null||e.appendChild(this.element)}handleEvent(e){if(co(e)){if(!Gi(e.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${e.origin}) cannot be handled`,"SecurityError");e.data.action==="disconnect"?this.connectedMathfieldWindow=void 0:e.data.action!=="update-setting"&&e.data.action!=="proxy-created"&&e.data.action!=="execute-command"&&(e.source,this.connectedMathfieldWindow=e.source),this.handleMessage(e.data,e.source)}if(this._element)switch(e.type){case"mouseup":case"blur":document.body.style.userSelect="",this.shiftPressCount=0;break;case"contextmenu":e.button!==2&&e.preventDefault();break;case"keydown":{e.key==="Shift"&&!e.repeat&&(this.shiftPressCount=1);break}case"keyup":{(e.key==="Shift"||!e.getModifierState("Shift")&&this.shiftPressCount!==2)&&(this.shiftPressCount=0);break}}}handleMessage(e,a){let{action:s}=e;if(s==="execute-command"){let{command:o}=e,l=nr(o);if(window.top!==void 0&&l!=="virtual-keyboard")return;this.executeCommand(o);return}if((s==="connect"||s==="show")&&this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},a),s!=="disconnect"&&window===window.top){if(s==="show"){typeof e.animate<"u"?this.show({animate:e.animate}):this.show();return}if(s==="hide"){typeof e.animate<"u"?this.hide({animate:e.animate}):this.hide();return}if(s==="update-setting"){if(e.alphabeticLayout&&(this.alphabeticLayout=e.alphabeticLayout),e.layouts&&(this.layouts=e.layouts),e.editToolbar&&(this.editToolbar=e.editToolbar),e.setKeycap){let{keycap:o,value:l}=e.setKeycap;this.setKeycap(o,l),this.render()}return}if(s==="proxy-created"){this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},a);return}}}sendMessage(e,a,s){if(a.command&&this.dispatchEvent(new CustomEvent("math-virtual-keyboard-command",{detail:a.command})),s||(s=this.connectedMathfieldWindow),this.targetOrigin===null||this.targetOrigin==="null"||s===window){window.dispatchEvent(new MessageEvent("message",{source:window,data:p({type:lo,action:e},a)}));return}if(s)s.postMessage(p({type:lo,action:e},a),{targetOrigin:this.targetOrigin});else if(e==="execute-command"&&Array.isArray(a.command)&&a.command[0]==="insert"){let o=a.command[1].split("");for(let l of o)this.dispatchEvent(new KeyboardEvent("keydown",{key:l,bubbles:!0})),this.dispatchEvent(new KeyboardEvent("keyup",{key:l,bubbles:!0}))}}stateWillChange(e){return this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:e},bubbles:!0,cancelable:!0,composed:!0}))}stateChanged(){this.dispatchEvent(new Event("virtual-keyboard-toggle")),this._visible||(this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect}))}focus(){this.sendMessage("focus",{})}blur(){this.sendMessage("blur",{})}updateToolbar(e){let a=this._element;if(!a)return;a.classList.toggle("is-math-mode",e.mode==="math"),a.classList.toggle("is-text-mode",e.mode==="text"),a.classList.toggle("can-undo",e.canUndo),a.classList.toggle("can-redo",e.canRedo),a.classList.toggle("can-copy",!e.selectionIsCollapsed),a.classList.toggle("can-copy",!e.selectionIsCollapsed),a.classList.toggle("can-paste",!0);let s=a.querySelectorAll(".ML__edit-toolbar");if(s)for(let o of s)o.innerHTML=hp(this,e)}update(e){this._style=e.style,this.updateToolbar(e)}connect(){this.connectedMathfieldWindow=window}disconnect(){this.connectedMathfieldWindow=void 0}executeCommand(e){if(e=hi(e),!e)return!1;let a,s=[],o=nr(e);return Y(e)?(a=e[0],a==="performWithFeedback"&&(o=nr(e.slice(1))),s=e.slice(1)):a=e,o==="virtual-keyboard"?yt[a].fn(void 0,...s):(this.sendMessage("execute-command",{command:e}),!1)}dispose(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("message",this)}};function bp(){let t=ui(),e=null;for(;t;){if("host"in t&&t.host instanceof xt){e=t.host;break}t=t.parentNode}return e}if(Me()&&!("mathVirtualKeyboard"in window))if(window===window.top){let t=Ee.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>t})}else Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>so.singleton,configurable:!0});function gn(t){let e={};for(let a of Object.keys(t))switch(a){case"scriptDepth":let s=t.scriptDepth;if(Y(s))e.scriptDepth=[s[0],s[1]];else if(typeof s=="number")e.scriptDepth=[s,s];else if(typeof s=="string"){let[l,u]=s.split(",").map(c=>parseInt(c.trim()));e.scriptDepth=[l,u]}else throw new TypeError("Unexpected value for scriptDepth");break;case"mathVirtualKeyboardPolicy":let o=t.mathVirtualKeyboardPolicy.toLowerCase();if(o==="sandboxed"){if(window!==window.top){let l=Ee.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>l})}o="manual"}e.mathVirtualKeyboardPolicy=o;break;case"letterShapeStyle":t.letterShapeStyle==="auto"?N.locale.startsWith("fr")?e.letterShapeStyle="french":e.letterShapeStyle="tex":e.letterShapeStyle=t.letterShapeStyle;break;case"defaultMode":["text","math","inline-math"].includes(t.defaultMode)?e.defaultMode=t.defaultMode:(console.error('MathLive 0.106.0:  valid values for defaultMode are "text", "math" or "inline-math"'),e.defaultMode="math");break;case"macros":e.macros=Ci(t.macros);break;default:Y(t[a])?e[a]=[...t[a]]:typeof t[a]=="object"&&!(t[a]instanceof Element)&&a!=="computeEngine"?e[a]=p({},t[a]):e[a]=t[a]}return e}function or(t,e){let a;typeof e=="string"?a=[e]:e===void 0?a=Object.keys(t):a=e;let s={};for(let o of a)t[o]===null?s[o]=null:Y(t[o])?s[o]=[...t[o]]:typeof t[o]=="object"&&!(t[o]instanceof Element)&&o!=="computeEngine"?s[o]=p({},t[o]):s[o]=t[o];return typeof e=="string"?s[e]:s}function bn(){return{readOnly:!1,defaultMode:"math",macros:{},registers:{},colorMap:Hr,backgroundColorMap:Si,letterShapeStyle:N.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,isImplicitFunction:t=>["\\sin","\\cos","\\tan","\\arcsin","\\arccos","\\arctan","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th","\\lg","\\lb","\\log","\\ln"].includes(t),mathModeSpace:"",placeholderSymbol:"",contentPlaceholder:"",popoverPolicy:"auto",environmentPopoverPolicy:"off",keybindings:dm,inlineShortcuts:za,inlineShortcutTimeout:0,mathVirtualKeyboardPolicy:"auto",virtualKeyboardTargetOrigin:window?.origin,originValidator:"none",onInsertStyle:oo,onInlineShortcut:()=>"",onScrollIntoView:null,onExport:um,value:""}}function sc(t){return t.defaultMode==="inline-math"?"math":t.defaultMode}function yp(t,e){let a=t.at(t.position);if(a.type==="composition")a.value=e;else{let{caret:s}=a;a.caret=void 0;let o=new Qi(e,{mode:a.mode});o.caret=s,a.parent.addChildAfter(o,a),t.position+=1}}function xp(t){let e=t.at(t.position);e.type==="composition"&&(e.parent.removeChild(e),t.position-=1)}$o(["math","displaymath"],Re);$o("center",Re);St(["multline","multline*"],"",Re);v("displaylines","",{parse:t=>{if(t.skipWhitespace(),!t.match("<{>"))return[];let e=[],a=[];t.mathlist.length>0&&e.push([t.mathlist]),t.beginContext({tabular:!0,root:!0});do{if(t.end()||t.match("<}>"))break;t.matchColumnSeparator()||t.matchRowSeparator()?(e.push([a]),a=[]):a.push(...t.scan(o=>["<}>","&","\\cr","\\\\","\\tabularnewline"].includes(o)))}while(!0);t.endContext(),e.push([a]);let s=t.scan();return s.length>0&&e.push([s]),e},createAtom:t=>new I("lines",t.args,[],{leftDelim:".",rightDelim:".",columns:[{align:"l"}],classes:["ML__multiline_environment"],isRoot:!0,minColumns:1,maxColumns:1,minRows:1})});St("split","",Re);St(["gather","gather*","gathered"],"",Re);St(["equation","equation*","subequations"],"",Re);$o(["align","align*","eqnarray"],Re,{tabular:!0});St(["aligned"],"",Re);St("array","{columns:colspec}",(t,e,a,s)=>new I(t,e,a,{columns:s[0],mathstyleName:"textstyle"}));St(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",Re);St(["smallmatrix","smallmatrix*"],"[columns:colspec]",Re);St(["cases","dcases","rcases"],"",Re);function Re(t,e=[[[]]],a=[],s=[],o){switch(t){case"math":return new I(t,e,a,{mathstyleName:"textstyle",isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"displaymath":return new I(t,e,a,{mathstyleName:"textstyle",isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"center":return new I(t,e,a,{columns:[{align:"c"}],classes:["ML__center_environment"],isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"multline":case"multline*":return new I(t,e,a,{columns:[{align:"m"}],leftDelim:".",rightDelim:".",isRoot:!0,minColumns:1,maxColumns:1,minRows:1});case"split":return new I(t,e,a,{columns:[{align:"r"},{align:"l"}],minColumns:2,minRows:1,isRoot:!1});case"gather":case"gather*":return new I(t,e,a,{columns:[{gap:.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1,isRoot:!0,classes:["ML__gather_environment"]});case"gathered":return new I(t,e,a,{columns:[{gap:.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1});case"equation":case"equation*":case"subequations":return new I(t,e,a,{columns:[{align:"c"}],isRoot:!0,minColumns:1,maxColumns:1,minRows:1});case"aligned":{let l=0;for(let d of e)l=Math.max(l,d.length);let u=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],c=2;for(;c<l;)u.push({gap:1},{align:"r"},{gap:.25},{align:"l"}),c+=2;return u.push({gap:0}),new I(t,e,a,{arraycolsep:0,columns:u,minColumns:2,minRows:1,isRoot:t!=="aligned"})}case"eqnarray":return new I(t,e,a,{arraycolsep:0,columns:[{gap:0},{align:"r"},{align:"c"},{align:"l"}],minColumns:3,maxColumns:3,minRows:1,isRoot:!0,classes:["ML__eqnarray_environment"]});case"align":case"align*":return new I(t,e,a,{arraycolsep:0,columns:[{gap:0},{align:"r"},{gap:.25},{align:"l"}],minColumns:2,maxColumns:2,minRows:1,isRoot:!0,classes:["ML__align_environment"]});case"pmatrix":case"pmatrix*":return new I(t,e,a,{mathstyleName:"textstyle",leftDelim:"(",rightDelim:")",columns:gi(s[0],o)});case"bmatrix":case"bmatrix*":return new I(t,e,a,{mathstyleName:"textstyle",leftDelim:"[",rightDelim:"]",columns:gi(s[0],o)});case"Bmatrix":case"Bmatrix*":return new I(t,e,a,{mathstyleName:"textstyle",leftDelim:"\\lbrace",rightDelim:"\\rbrace",columns:gi(s[0],o)});case"vmatrix":case"vmatrix*":return new I(t,e,a,{mathstyleName:"textstyle",leftDelim:"\\vert",rightDelim:"\\vert",columns:gi(s[0],o)});case"Vmatrix":case"Vmatrix*":return new I(t,e,a,{mathstyleName:"textstyle",leftDelim:"\\Vert",rightDelim:"\\Vert",columns:gi(s[0],o)});case"matrix":case"matrix*":return new I(t,e,a,{mathstyleName:"textstyle",leftDelim:".",rightDelim:".",columns:gi(s?.[0],o)});case"smallmatrix":case"smallmatrix*":return new I(t,e,a,{mathstyleName:"scriptstyle",columns:gi(s?.[0],o),colSeparationType:"small",arraystretch:.5});case"cases":case"dcases":return new I(t,e,a,{mathstyleName:t==="dcases"?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]});case"rcases":return new I(t,e,a,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]});case"lines":return new I(t,e,a,{leftDelim:".",rightDelim:".",columns:[{align:"l"}],isRoot:!0,minColumns:1,maxColumns:1,minRows:1})}return new I(t,e,a,{mathstyleName:"textstyle"})}function gi(t,e=10){return t??Array(e).fill({align:"c"})}function vg(t){let e=t.at(t.position);for(;e&&!We(e.parentBranch);)e=e.parent;return[e.firstSibling,e.lastSibling]}function _g(t,e){let a=t.at(t.position);for(;a&&!(a.parent instanceof I);)a=a.parent;if(a&&a.type==="array"&&a.environmentName,!a||!(a.parent instanceof I)){let s=t.at(t.position);if(a=s,!a.parent.parent){let o=t.extractAtoms([t.position,t.lastOffset]),l=t.extractAtoms([0,t.position]),u;return e.endsWith("column")?(l.length===0&&(l=cs()),o.length===0&&(o=cs()),u=Re("split",[[l,o]]),t.root=u,fo(u,0,0)?yn(t,u,0,0):fo(u,0,1)?yn(t,u,0,1):t.position=t.offsetOf(s)):(u=Re("lines",[[l],[o]]),t.root=u,yn(t,u,1,0)),[void 0,[0,0]]}if(a.parent instanceof G){let o=a.parent,l=t.extractAtoms([t.position,t.offsetOf(o.lastChild)]),u=t.extractAtoms([t.offsetOf(o.firstChild),t.position]);u.length===0&&(u=cs()),l.length===0&&(l=cs());let c="pmatrix",d=o.leftDelim,m=o.rightDelim;d==="("&&(m===")"||m==="?")?c="pmatrix":(d==="["||d==="\\lbrack")&&(m==="]"||m==="\\rbrack"||m==="?")?c="bmatrix":d==="\\vert"&&m==="\\vert"?c="vmatrix":d==="\\Vert"&&m==="\\Vert"?c="Vmatrix":(d==="{"||d==="\\lbrace")&&(m==="."||m==="?")&&(c="cases");let g=Re(c,e.endsWith("column")?[[u,l]]:[[u],[l]]);return o.parent.addChildBefore(g,o),o.parent.removeChild(o),fo(g,0,0)?yn(t,g,0,0):e.endsWith("column")?fo(g,0,1)?yn(t,g,0,1):t.position=t.offsetOf(a):fo(g,1,0)?yn(t,g,1,0):t.position=t.offsetOf(a),[void 0,[0,0]]}}return a&&a.parent instanceof I?[a.parent,a.parentBranch]:[void 0,[0,0]]}function fo(t,e,a){let s=t.getCell(e,a);return!s||s.length!==2?!1:s[1].type==="placeholder"}function Mg(t,e,a,s){let o=e.getCell(a,s);return o?[t.offsetOf(o[0]),t.offsetOf(o[o.length-1])]:-1}function yn(t,e,a,s){let o=Mg(t,e,a,s);typeof o!="number"&&t.setSelection(o)}function ls(t,e,a,s,o){let l=e.getCell(a,s);l&&t.setPositionHandlingPlaceholder(t.offsetOf(l[o==="start"?0:l.length-1]))}function go(t,e){let[a,[s,o]]=_g(t,e);if(a)switch(e){case"after row":a.addRowAfter(s),ls(t,a,s+1,0,"end");break;case"after column":if(a.maxColumns<=a.colCount){t.announce("plonk");return}a.addColumnAfter(o),ls(t,a,s,o+1,"end");break;case"before row":a.addRowBefore(s),ls(t,a,s,0,"start");break;case"before column":if(a.maxColumns<=a.colCount){t.announce("plonk");return}a.addColumnBefore(o),ls(t,a,s,o,"start");break}}function lc(t){var e;let a=t.at(t.position);if(!We(a.parentBranch)&&a.parent!==t.root&&t.root.type!=="root")return t.announce("plonk"),!1;if(!t.contentWillChange({inputType:"insertText"}))return!1;if((e=t.parentEnvironment)!=null&&e.isMultiline){t.selectionIsCollapsed||t.deleteAtoms(le(t.selection));let[s,o]=vg(t),l=t.extractAtoms([t.position,t.offsetOf(o)]),u=t.extractAtoms([t.offsetOf(s),t.position]),c=s.parent,[d,m]=s.parentBranch;return c.setCell(d,m,u),go(t,"after row"),c.setCell(d+1,m,l),t.position=t.offsetOf(c.getCell(d+1,m)[0]),t.contentDidChange({inputType:"insertText"}),!0}return go(t,"after row"),t.contentDidChange({inputType:"insertText"}),!0}function wg(t){return t.contentWillChange({inputType:"insertText"})?(go(t,"before row"),t.contentDidChange({inputType:"insertText"}),!0):!1}function cc(t){return t.contentWillChange({inputType:"insertText"})?(go(t,"after column"),t.contentDidChange({inputType:"insertText"}),!0):!1}function kg(t){return t.contentWillChange({inputType:"insertText"})?(go(t,"before column"),t.contentDidChange({inputType:"insertText"}),!0):!1}function uc(t,e){if(!t.contentWillChange({}))return!1;t.mathfield.snapshot();let a=".",s=".";switch(e){case"pmatrix":case"pmatrix*":a="(",s=")";break;case"bmatrix":case"bmatrix*":a="[",s="]";break;case"Bmatrix":case"Bmatrix*":a="\\lbrace",s="\\rbrace";break;case"vmatrix":case"vmatrix*":a="\\vert",s="\\vert";break;case"Vmatrix":case"Vmatrix*":a="\\Vert",s="\\Vert";break;case"matrix":case"matrix*":a=".",s=".";break;case"cases":case"dcases":a="\\lbrace";break;case"rcases":s="\\rbrace";break}let o=t.at(t.position),l=o.type==="array"?o:t.parentEnvironment;return l.environmentName=e,l.leftDelim=a,l.rightDelim=s,t.contentDidChange({}),!0}function vp(t,e){let a=t.at(t.position);for(;a&&!(Array.isArray(a.parentBranch)&&a.parent instanceof I);)a=a.parent;if(Array.isArray(a?.parentBranch)&&a?.parent instanceof I){let s=a.parent,o=a.parentBranch,l;switch(e){case"row":if(s.rowCount>1){s.removeRow(o[0]);let u=s.getCell(Math.max(0,o[0]-1),o[1]);l=t.offsetOf(u[u.length-1])}break;case"column":if(s.colCount>s.minColumns){s.removeColumn(o[1]);let u=s.getCell(o[0],Math.max(0,o[1]-1));l=t.offsetOf(u[u.length-1])}break}l!==void 0&&t.setPositionHandlingPlaceholder(l)}}function Sg(t){return t.contentWillChange({inputType:"deleteContent"})?(vp(t,"row"),t.contentDidChange({inputType:"deleteContent"}),!0):!1}function Lg(t){return t.contentWillChange({inputType:"deleteContent"})?(vp(t,"column"),t.contentDidChange({inputType:"deleteContent"}),!0):!1}pe({addRowAfter:lc,addColumnAfter:cc,addRowBefore:wg,addColumnBefore:kg,removeRow:Sg,removeColumn:Lg,setEnvironment:uc},{target:"model",canUndo:!0,changeContent:!0,changeSelection:!0});function cs(){return[new Le]}var ds=class Pw{constructor(e){this.recording=!1,this.model=e,this.reset()}reset(){this.stack=[],this.index=-1,this.lastOp=""}startRecording(){this.recording=!0}stopRecording(){this.recording=!1}canUndo(){return this.index-1>=0}canRedo(){return this.stack.length-1>this.index}stopCoalescing(e){e&&this.index>=0&&(this.stack[this.index].selection=e),this.lastOp=""}undo(){if(!this.canUndo())return!1;let e=this.stack[this.index-1];return this.index-=1,this.lastOp="",this.model.setState(e,{silenceNotifications:!1,type:"undo"}),!0}redo(){if(!this.canRedo())return!1;let e=this.stack[this.index+1];return this.index+=1,this.lastOp="",this.model.setState(e,{silenceNotifications:!1,type:"redo"}),!0}pop(){this.canUndo()&&(this.stack.splice(this.index,this.stack.length-this.index),this.index-=1)}snapshot(e){return this.recording?(e&&e===this.lastOp&&this.pop(),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index+=1,this.stack.length>Pw.maximumDepth&&(this.stack.shift(),this.index-=1),this.lastOp=e??"",!0):!1}};ds.maximumDepth=1e3;var us=ds;function hs(t,e,a){if(t.at(e).mode!=="text")return e;let s=a==="backward"?-1:1,o;if(Wr.test(t.at(e).value)){let l=e,u;do u=t.at(l).mode==="text"&&Wr.test(t.at(l).value),l+=s;while(t.at(l)&&u);o=t.at(l)?l-2*s:l-s}else if(/\s/.test(t.at(e).value)){let l=e;for(;t.at(l)&&t.at(l).mode==="text"&&/\s/.test(t.at(l).value);)l+=s;if(!t.at(l))o=l-s;else{let u=!0;do u=t.at(l).mode==="text"&&!/\s/.test(t.at(l).value),l+=s;while(t.at(l)&&u);o=t.at(l)?l-2*s:l-s}}else{let l=e;for(;t.at(l)&&t.at(l).mode==="text"&&!/\s/.test(t.at(l).value);)l+=s;o=t.at(l)?l:l-s;let u=!0;for(;t.at(l)&&u;)u=t.at(l).mode==="text"&&/\s/.test(t.at(l).value),u&&(o=l),l+=s;o=t.at(l)?l-2*s:l-s}return o-(s>0?0:1)}function Ir(t,e,a){var s,o,l,u,c,d,m;let g=t.position;(s=a?.extend)!=null&&s||t.collapseSelection(e);let A=t.at(t.position);if(e==="forward"&&(A.type==="subsup"?(A=A.rightSibling,A||(A=t.at(t.position+1))):A=t.at(t.position+1)),!A)return t.announce("plonk"),!1;let P=t.offsetOf(A);if(A instanceof $e)P=hs(t,P,e);else if(A instanceof ue)if(A.isSuggestion)for(;A&&A instanceof ue;)A.isSuggestion=!1,P=t.offsetOf(A),A=A.rightSibling;else if(e==="forward"){if(A=A.rightSibling,!A||!(A instanceof ue))return t.announce("plonk"),!1;for(;A&&A instanceof ue&&/[a-zA-Z\*]/.test(A.value);)P=t.offsetOf(A),A=A.rightSibling}else{if(A=A.leftSibling,!A||!(A instanceof ue))return t.announce("plonk"),!1;for(;A&&A instanceof ue&&/[a-zA-Z\*]/.test(A.value);)P=t.offsetOf(A),A=A.leftSibling}else if(e==="forward"&&A.type==="mopen"){let W=0;do A.type==="mopen"?W+=1:A.type==="mclose"&&(W-=1),A=A.rightSibling;while(!A.isLastSibling&&W!==0);P=t.offsetOf(A.leftSibling)}else if(e==="backward"&&A.type==="mclose"){let W=0;do A.type==="mopen"?W+=1:A.type==="mclose"&&(W-=1),A=A.leftSibling;while(!A.isFirstSibling&&W!==0);P=t.offsetOf(A)}else if(e==="backward")if(A.type==="first")for(;P>0&&A.type==="first";)P-=1,A=t.at(P);else{let W=A.type;A.type==="subsup"&&(P=t.offsetOf(t.at(P).leftSibling)),P-=1;let me=(o=t.at(P))==null?void 0:o.type;for(;P>=0&&me===W;)((l=t.at(P))==null?void 0:l.type)==="subsup"?P=t.offsetOf(t.at(P).leftSibling):P-=1,me=t.at(P).type}else{let{type:W}=A,me=(u=t.at(P))==null?void 0:u.type,{lastOffset:ve}=t;for(;P<=ve&&(me===W||me==="subsup");){for(;((c=t.at(P).rightSibling)==null?void 0:c.type)==="subsup";)P=t.offsetOf(t.at(P).rightSibling);P+=1,me=(d=t.at(P))==null?void 0:d.type}P-=1}if((m=a?.extend)!=null&&m){if(!t.setSelection(t.anchor,P))return t.announce("plonk"),!1}else{if(P===t.position)return t.announce("plonk"),!1;t.position=P}return t.announce("move",g),t.mathfield.stopCoalescingUndo(),!0}function ot(t,e,a){var s,o;if(a=a??{extend:!1},t.mathfield.styleBias=e==="backward"?"right":"left",e!=="forward"){let[c,d]=es(t);c!==void 0&&d!==void 0&&t.deleteAtoms([c,d])}if(e==="upward")return Cg(t,a);if(e==="downward")return Eg(t,a);if(a.extend){let c=ms(t,t.position,e);c<0&&(c=0),c>t.lastOffset&&(c=t.lastOffset);let d=t.setSelection(t.anchor,c);return t.mathfield.stopCoalescingUndo(),d}if(t.selectionIsPlaceholder){t.collapseSelection(e);let c=ot(t,e);return t.mathfield.stopCoalescingUndo(),c}let l=t.position,u=l;if(t.collapseSelection(e)?(l=t.position,_p(t,l)||(l=ms(t,l,e))):l=ms(t,l,e),l<0||l>t.lastOffset){let c=!0;return t.silenceNotifications||(c=(o=(s=t.mathfield.host)==null?void 0:s.dispatchEvent(new CustomEvent("move-out",{detail:{direction:e},cancelable:!0,bubbles:!0,composed:!0})))!=null?o:!0),c&&t.announce("plonk"),c}return t.setPositionHandlingPlaceholder(l),t.mathfield.stopCoalescingUndo(),t.announce("move",u),!0}function ms(t,e,a){return e=e+(a==="forward"?1:-1),e<0||e>t.lastOffset||_p(t,e)?e:ms(t,e,a)}function _p(t,e){var a;let s=t.at(e),o=s.parent;for(;o&&!o.inCaptureSelection;)o=o.parent;return!(o!=null&&o.inCaptureSelection||(a=s.parent)!=null&&a.skipBoundary&&(!s.isFirstSibling&&s.isLastSibling||s.type==="first")||t.mathfield.hasEditablePrompts&&!s.parentPrompt)}function Ag(t,e,a){let s=1/0,o=0;for(;o<e.length;o++){let l=e[o],u=t.getHTMLElement(l);if(!u)continue;let c=Il(u).right,d=Math.abs(a-c);if(d<=s)s=d;else break}return e[o-1]}function ps(t,e,a,s,o){let l=t.mathfield.hasEditablePrompts,u=l?a.filter(m=>m.type==="prompt"&&!m.captureSelection):a,c=Il(t.mathfield.getHTMLElement(e)).right,d=t.offsetOf(Ag(t.mathfield,u,c))-(l?1:0);if(s){let[m,g]=t.selection.ranges[0],A;d<(o==="up"?m:g)?A={ranges:[[d,g]],direction:"backward"}:A={ranges:[[m,d]],direction:"forward"},t.setSelection(A)}else t.setPositionHandlingPlaceholder(d);t.announce(`move ${o}`)}function Cg(t,e){var a,s;let o=(a=e?.extend)!=null?a:!1;o||t.collapseSelection("backward");let l=()=>{var d,m;let g=!0;return t.silenceNotifications||(g=(m=(d=t.mathfield.host)==null?void 0:d.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))!=null?m:!0),t.announce(g?"line":"plonk"),g},u=t.at(t.position),c=u;for(;c&&c.parentBranch!=="below"&&!(Array.isArray(c.parentBranch)&&c.parent instanceof I);)c=c.parent;if(Array.isArray(c?.parentBranch)&&c.parent instanceof I){let d=c.parent;if(c.parentBranch[0]<1)return l();let m=c.parentBranch[0]-1,g=d.getCell(m,c.parentBranch[1]);if(!g.some(A=>A.type==="prompt"&&!A.captureSelection)&&t.mathfield.hasEditablePrompts)return l();ps(t,u,g,o,"up")}else if(c){let d=(s=c.parent.branch("above"))!=null?s:c.parent.createBranch("above");if(!d.some(m=>m.type==="prompt"&&m.placeholderId)&&t.mathfield.hasEditablePrompts)return l();ps(t,u,d,o,"up")}else return l();return t.mathfield.stopCoalescingUndo(),!0}function Eg(t,e){var a,s;let o=(a=e?.extend)!=null?a:!1;o||t.collapseSelection("forward");let l=()=>{var d,m;let g=!0;return t.silenceNotifications||(g=(m=(d=t.mathfield.host)==null?void 0:d.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))!=null?m:!0),t.announce(g?"line":"plonk"),g},u=t.at(t.position),c=u;for(;c&&c.parentBranch!=="above"&&!(We(c.parentBranch)&&c.parent instanceof I);)c=c.parent;if(We(c?.parentBranch)&&c.parent instanceof I){let d=c.parent;if(c.parentBranch[0]+1>d.rows.length-1)return l();let m=c.parentBranch[0]+1,g=d.getCell(m,c.parentBranch[1]);if(!g.some(A=>A.type==="prompt"&&!A.captureSelection)&&t.mathfield.hasEditablePrompts)return l();ps(t,u,g,o,"down")}else if(c){let d=(s=c.parent.branch("below"))!=null?s:c.parent.createBranch("below");if(!d.some(m=>m.type==="prompt")&&t.mathfield.hasEditablePrompts)return l();ps(t,u,d,o,"down")}else return l();return!0}function mc(t){let e=t.position,a=t.at(e).parent;return a!=null&&a.parent?(t.position=t.offsetOf(a),t.mathfield.stopCoalescingUndo(),t.announce("move",e),!0):(t.announce("plonk"),!1)}function Tg(t){let e=0,a=t.at(t.position),s=!1;for(;a;)(!a.hasEmptyBranch("superscript")||!a.hasEmptyBranch("subscript"))&&(e+=1),a.hasEmptyBranch("superscript")?a.hasEmptyBranch("subscript")||(s=!1):s=!0,a=a.parent;return s?e:0}function Dg(t){let e=0,a=t.at(t.position),s=!1;for(;a;)(!a.hasEmptyBranch("superscript")||!a.hasEmptyBranch("subscript"))&&(e+=1),a.hasEmptyBranch("superscript")?a.hasEmptyBranch("subscript")||(s=!0):s=!1,a=a.parent;return s?e:0}function Mp(t){var e;if(t.collapseSelection(),Tg(t)>=t.mathfield.options.scriptDepth[1])return t.announce("plonk"),!1;let a=t.at(t.position);return a.subsupPlacement===void 0&&(((e=a.rightSibling)==null?void 0:e.type)!=="subsup"&&a.parent.addChildAfter(new er({style:a.style}),a),a=a.rightSibling),a.createBranch("superscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(a.superscript[0]))),!0}function wp(t){var e;if(t.collapseSelection(),Dg(t)>=t.mathfield.options.scriptDepth[0])return t.announce("plonk"),!1;let a=t.at(t.position);return a.subsupPlacement===void 0&&(((e=t.at(t.position+1))==null?void 0:e.type)!=="subsup"&&a.parent.addChildAfter(new er({style:t.at(t.position).style}),a),a=t.at(t.position+1)),a.createBranch("subscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(a.subscript[0]))),!0}function Kg(){function t(d){let m=[],g=[];return[...d.querySelectorAll(`input, select, textarea, a[href], button,
        [tabindex], audio[controls], video[controls],
        [contenteditable]:not([contenteditable="false"]), details>summary`)].filter(e).forEach((A,P)=>{let W=s(A);W===0?m.push(A):g.push({documentOrder:P,tabIndex:W,node:A})}),g.sort((A,P)=>A.tabIndex===P.tabIndex?A.documentOrder-P.documentOrder:A.tabIndex-P.tabIndex).map(A=>A.node).concat(m)}function e(d){return!(!a(d)||o(d)||s(d)<0)}function a(d){return!(d.disabled||d.type==="hidden"&&d.tagName.toUpperCase()==="INPUT"||c(d))}function s(d){var m;let g=Number.parseInt((m=d.getAttribute("tabindex"))!=null?m:"NaN",10);return Number.isNaN(g)?d.contentEditable==="true"||(d.nodeName==="AUDIO"||d.nodeName==="VIDEO")&&d.getAttribute("tabindex")===null?0:d.tabIndex:g}function o(d){return d.tagName.toUpperCase()==="INPUT"&&d.type==="radio"&&!u(d)}function l(d,m){for(let g of d)if(g.checked&&g.form===m)return g;return null}function u(d){var m;if(!d.name)return!0;let g=((m=d.form)!=null?m:d.ownerDocument).querySelectorAll('input[type="radio"][name="'+d.name+'"]'),A=l(g,d.form);return!A||A===d}function c(d){if(!Me()||d===document.activeElement||d.contains(document.activeElement))return!1;if(getComputedStyle(d).visibility==="hidden")return!0;let m=d.getBoundingClientRect();if(m.width===0||m.height===0)return!0;for(;d;){if(getComputedStyle(d).display==="none")return!0;d=d.parentElement}return!1}return Me()?t(document.body):[]}function Te(t,e,a="forward"){let s=t.position;if(Y(e)){let o=t.offsetOf(e[0]),l=t.offsetOf(e[e.length-1]);return a==="forward"?t.setSelection(o,l):t.setSelection(l,o),t.announce("move",s),t.mathfield.stopCoalescingUndo(),!0}return a==="forward"?Te(t,[e.leftSibling,e]):Te(t,[e,e.leftSibling])}function vt(t,e){let a=t.position;if(typeof e=="number"&&(e=t.at(e)),e.type==="prompt")t.setSelection(t.offsetOf(e.firstChild),t.offsetOf(e.lastChild));else{let s=t.offsetOf(e);e.type==="placeholder"?t.setSelection(s-1,s):t.position=s}return t.announce("move",a),t.mathfield.stopCoalescingUndo(),!0}function xn(t,e){var a,s;let o=e==="forward"?1:-1;t.at(t.anchor).type==="placeholder"&&ot(t,e);let l,u=t.at(t.anchor).parentPrompt;u?e==="forward"?l=t.offsetOf(u)+1:l=t.offsetOf(u.leftSibling):l=Math.max(t.position+o,0);let c=dc(t,l,e);if(!c||e==="forward"&&t.offsetOf(c)<l||e==="backward"&&t.offsetOf(c)>l){if(!((s=(a=t.mathfield.host)==null?void 0:a.dispatchEvent(new CustomEvent("move-out",{detail:{direction:e},cancelable:!0,bubbles:!0,composed:!0})))==null||s))return t.announce("plonk"),!1;let d=Kg();if(!document.activeElement||d.length<=1)return t.announce("plonk"),!1;let m=d.indexOf(document.activeElement)+o;return m<0&&(m=d.length-1),m>=d.length&&(m=0),d[m].focus(),t.mathfield.stopCoalescingUndo(),!0}return vt(t,c),!0}function dc(t,e=0,a="forward"){return t.findAtom(s=>s.type==="placeholder"||s.type==="prompt"||!t.mathfield.readOnly&&s.treeDepth>2&&s.isFirstSibling&&s.isLastSibling,e,a)}pe({moveToOpposite:t=>{let e={superscript:"subscript",subscript:"superscript",above:"below",below:"above"},a=t.at(t.position),{parent:s}=a;if(!s)return t.announce("plonk"),!1;let o=a.parentBranch,l;if(typeof o=="string"&&(l=e[o]),!l){let c=a.subsupPlacement?wp(t):Mp(t);return t.mathfield.stopCoalescingUndo(),c}s.branch(l)||s.createBranch(l);let u=t.setSelection(t.getBranchRange(t.offsetOf(s),l));return t.mathfield.stopCoalescingUndo(),u},moveBeforeParent:t=>{let{parent:e}=t.at(t.position);return e?(t.position=t.offsetOf(e),t.mathfield.stopCoalescingUndo(),!0):(t.announce("plonk"),!1)},moveAfterParent:t=>mc(t),moveToNextChar:t=>ot(t,"forward"),moveToPreviousChar:t=>ot(t,"backward"),moveUp:t=>ot(t,"upward"),moveDown:t=>ot(t,"downward"),moveToNextWord:t=>Ir(t,"forward"),moveToPreviousWord:t=>Ir(t,"backward"),moveToGroupStart:t=>{let e=t.offsetOf(t.at(t.position).firstSibling);return e===t.position?(t.announce("plonk"),!1):(t.position=e,t.mathfield.stopCoalescingUndo(),!0)},moveToGroupEnd:t=>{let e=t.offsetOf(t.at(t.position).lastSibling);return e===t.position?(t.announce("plonk"),!1):(t.position=e,t.mathfield.stopCoalescingUndo(),!0)},moveToNextGroup:t=>{var e,a,s,o;if(t.position===t.lastOffset&&t.anchor===t.lastOffset)return xn(t,"forward");let l=t.at(t.position);if(l.mode==="text"){if(t.selectionIsCollapsed){let A=l;for(;A&&A.mode==="text";)A=A.leftSibling;let P=l;for(;((e=P.rightSibling)==null?void 0:e.mode)==="text";)P=P.rightSibling;if(A&&P)return Te(t,[A,P])}if(l.rightSibling.mode==="text"){let A=l;for(;A&&A.mode==="text";)A=A.rightSibling;return A?(vt(t,(a=A.leftSibling)!=null?a:A),t.mathfield.switchMode("math"),!0):vt(t,t.lastOffset)}}let u=t.at(t.anchor).parentPrompt,c=u?t.offsetOf(u)+1:Math.max(t.position+1,0),d=dc(t,c,"forward");if(d&&t.offsetOf(d)<c)return xn(t,"forward");if(d)return vt(t,d);let m=kp(t,l,A=>A.type==="leftright"||A.type==="text","forward");if(m){if(m.mode==="text"){let A=m;for(;A&&A.mode==="text";)A=A.rightSibling;return Te(t,[(s=m.leftSibling)!=null?s:m,(o=A.leftSibling)!=null?o:A])}return Te(t,m)}let g=l.parent;if(g){if(g.type==="leftright"||g.type==="surd")return Te(t,g);if(l.parentBranch==="superscript"&&g.subscript)return Te(t,g.subscript);if(l.parentBranch==="above"&&g.below)return Te(t,g.below);if(l.parentBranch==="superscript"||l.parentBranch==="subscript")return vt(t,g);if(l.parentBranch==="above"||l.parentBranch==="below")return Te(t,g)}return vt(t,t.lastOffset)},moveToPreviousGroup:t=>{var e;if(t.position===0&&t.anchor===0)return xn(t,"backward");let a=t.at(t.position),s=a.mode;if(s==="text"){if(t.selectionIsCollapsed){let c=a;for(;c&&c.mode==="text";)c=c.leftSibling;let d=a;for(;((e=d.rightSibling)==null?void 0:e.mode)==="text";)d=d.rightSibling;if(c&&d)return Te(t,[c,d])}for(;a&&a.mode==="text";)a=a.leftSibling;return a?vt(t,a):vt(t,0)}let o=t.at(t.anchor).parentPrompt,l=o?t.offsetOf(o.leftSibling):Math.max(t.position-1,0),u=dc(t,l,"backward");if(u&&t.offsetOf(u)>l)return xn(t,"backward");if(u)return vt(t,u);if(s==="math"){let c=kp(t,a,m=>m.type==="leftright"||m.type==="text","backward");if(c){if(c.mode==="text"){let m=c;for(;m&&m.mode==="text";)m=m.leftSibling;return Te(t,[c,m])}return Te(t,c)}let d=a.parent;if(d){if(d.type==="leftright"||d.type==="surd")return Te(t,d);if(a.parentBranch==="subscript"&&d.superscript)return Te(t,d.superscript);if(a.parentBranch==="below"&&d.above)return Te(t,d.above);if(a.parentBranch==="superscript"||a.parentBranch==="subscript")return vt(t,d);if(a.parentBranch==="above"||a.parentBranch==="below")return Te(t,d)}return vt(t,0)}return!1},moveToMathfieldStart:t=>t.selectionIsCollapsed&&t.position===0?(t.announce("plonk"),!1):(t.position=0,t.mathfield.stopCoalescingUndo(),!0),moveToMathfieldEnd:t=>t.selectionIsCollapsed&&t.position===t.lastOffset?(t.announce("plonk"),!1):(t.position=t.lastOffset,t.mathfield.stopCoalescingUndo(),!0),moveToSuperscript:Mp,moveToSubscript:wp},{target:"model",changeSelection:!0});pe({moveToNextPlaceholder:t=>xn(t,"forward"),moveToPreviousPlaceholder:t=>xn(t,"backward")},{target:"model",changeSelection:!0,audioFeedback:"return"});function kp(t,e,a,s){if(s==="forward"){let l=e.rightSibling;for(;l&&!a(l);)l=l.rightSibling;return l}let o=e.leftSibling;for(;o&&!a(o);)o=o.leftSibling;return o}function fs(t,e,a){typeof e=="function"&&(a=e,e=1/0),e===void 0&&(e=1/0);let s=t.position,o=!1,l="";for(;!o;){let u=t.at(s);o=e===0||u===void 0||u.type==="first"||u.mode!=="math"||!(u.type&&/mord|mpunct|operator/.test(u.type)||u.type==="mop"&&/[a-zA-Z ]+/.test(u.value))||!u.hasEmptyBranch("superscript")||!u.hasEmptyBranch("subscript")||typeof a=="function"&&!a(u),o||(u.mode="text",u.command=u.value,u.verbatimLatex=void 0,l+=u.value),s-=1,e-=1}t.contentDidChange({data:l,inputType:"insertText"})}function bi(t,e,a){typeof e=="function"&&(a=e,e=1/0),e===void 0&&(e=1/0);let s=t.position,o=!1,l=[];for(;!o;){let u=t.at(s);o=e===0||!u||u.type==="first"||u.isFirstSibling||u.mode!=="text"||u.value===" "||typeof a=="function"&&!a(u),o||(l.push(b.serialize([u],{defaultMode:"math"})),u.mode="math"),s-=1,e-=1}gs(t),t.contentDidChange({data:R(l),inputType:"insertText"})}function gs(t){var e;let a=t.position-1;for(;a>=0&&((e=t.at(a))==null?void 0:e.mode)==="math";)a-=1;if(!(a<0)&&t.at(a).mode==="text"&&t.at(a).value===" "&&t.at(a-1).mode==="math"){t.at(a-1).parent.removeChild(t.at(a-1));let s=t.silenceNotifications;t.silenceNotifications=!0,t.position-=1,t.silenceNotifications=s,t.contentDidChange({inputType:"deleteContent"})}}function Og(t){let e="",a=t.position,s=!1;for(;!s;){let o=t.at(a);s=!(o&&(o.mode==="text"||o.mode==="math"&&o.type&&/mord|mpunct/.test(o.type))),s||(e=o.value+e),a-=1}return e}function Sp(t,e,a){let{model:s}=t;if(s.mode==="latex"||!s.at(s.position).isLastSibling||!a||!Kr(a))return!1;let o=Or(a);if(!s.selectionIsCollapsed)return!!(t.model.mode==="text"&&/[/_^]/.test(o));let l=Og(s)+o;if(t.model.mode==="text"){if(e==="Esc"||/[/\\]/.test(o))return!0;if(/[\^_]/.test(o))return/(^|\s)[a-zA-Z][^_]$/.test(l)&&bi(s,1),!0;let u={")":"(","}":"{","]":"["}[o],{parent:c}=s.at(s.position);if(u&&c instanceof G&&c.leftDelim===u)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(l))return!1;if(/[$]/u.test(o))return!0;if(/(^|[^a-zA-Z'])[a-zA-Z] $/.test(l))return bi(s,1),!1;if(/\D\.[^\d\s]$/.test(l)){bi(s,1);let d=s.at(s.position);return d.value="",d.style.variant="normal",d.command="\\cdot",d.verbatimLatex=void 0,s.contentDidChange({data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(l)||/\.\d$/.test(l)||/\([\d+\-.]$/.test(l))return bi(s,1),!0;if(/\([a-z][,;]$/.test(l))return bi(s,2),!0;if(/[\d+\-=><*|]$/.test(o))return gs(s),!0}else{if(e==="[Space]")return fs(s,void 0,u=>/[a-z][:,;.]$/.test(u.value)),!0;if(/[a-zA-Z]{3,}$/.test(l)&&!/(dxd|abc|xyz|uvw)$/.test(l))return fs(s,void 0,u=>/[a-zA-Z]/.test(u.value)),!0;if(/(^|\W)(if)$/i.test(l))return fs(s,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(l)&&!/()$/.test(l))return fs(s,void 0,u=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(u.value)),!0;if(o==="?"||o==="."&&!/[\d-+]\.$/.test(l))return!0}return!1}function Lp(t,e){if(!t.isSelectionEditable||!t.keystrokeCaptionVisible)return;let a=Cp(),s=t.element.getBoundingClientRect();a.style.left=`${s.left}px`,a.style.top=`${s.top-64}px`,a.innerHTML=globalThis.MathfieldElement.createHTML("<span>"+(cn(e)||e)+"</span>"+a.innerHTML),a.style.visibility="visible",setTimeout(()=>{a.childNodes.length>0&&a.childNodes[a.childNodes.length-1].remove(),a.childNodes.length===0&&(a.style.visibility="hidden")},3e3)}function Ap(t){if(t.keystrokeCaptionVisible=!t.keystrokeCaptionVisible,t.keystrokeCaptionVisible){let e=Cp();e.innerHTML=""}else{let e=mi("mathlive-keystroke-caption-panel");e.style.visibility="hidden"}return!1}function Cp(){return document.getElementById("mathlive-keystroke-caption-panel")||(Ve("keystroke-caption"),Ve("core"),mi("mathlive-keystroke-caption-panel"))}function Ep(){document.getElementById("mathlive-keystroke-caption-panel")&&(Pr("mathlive-keystroke-caption-panel"),it("core"),it("keystroke-caption"))}function fc(t,e){var a,s,o,l;let{model:u}=t,c=Qa(e);if(e.isTrusted){Zm(e);let ve=Dr();t.keyboardLayout!==ve.id&&(t.keyboardLayout=ve.id,t._keybindings=void 0)}if(clearTimeout(t.inlineShortcutBufferFlushTimer),t.inlineShortcutBufferFlushTimer=0,Lp(t,c),e.isTrusted&&e.defaultPrevented)return t.flushInlineShortcutBuffer(),!1;let d,m=0,g="",A=0,P=t.inlineShortcutBuffer;if(t.isSelectionEditable){if(u.mode==="math")if(c==="[Backspace]")t.undoManager.lastOp==="insert-shortcut"?g="undo":P.pop();else if(!Kr(e))t.flushInlineShortcutBuffer();else{let ve=Or(e),He=[...(s=(a=P[P.length-1])==null?void 0:a.keystrokes)!=null?s:[],ve];P.push({state:u.getState(),keystrokes:He,leftSiblings:Bg(t)}),m=0;let De="";for(;!d&&m<He.length;)A=P.length-(He.length-m),De=He.slice(m).join(""),d=Gn(P[A].leftSiblings,De,t.options.inlineShortcuts),!d&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(De)&&(d=t.options.onInlineShortcut(t,De)),m+=1;t.flushInlineShortcutBuffer({defer:!0})}t.options.smartMode&&(d?t.switchMode("math"):Sp(t,c,e)&&(t.switchMode({math:"text",text:"math"}[u.mode]),g=""))}if(!d){if(g||(g=ip(t.keybindings,u.mode,e)),!g&&(c==="[Enter]"||c==="[Return]")){let ve=!0;return u.contentWillChange({inputType:"insertLineBreak"})&&(t.host&&(ve=t.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),!ve&&e.preventDefault?(e.preventDefault(),e.stopPropagation()):((o=u.parentEnvironment)!=null&&o.isMultiline&&t.executeCommand("addRowAfter"),u.contentDidChange({inputType:"insertLineBreak"}))),ve}if((!g||c==="[Space]")&&u.mode==="math"){if(c==="[Space]"){if(t.styleBias="none",t.flushInlineShortcutBuffer(),t.options.mathModeSpace)return V.insert(u,t.options.mathModeSpace,{format:"latex",mode:"math"}),t.snapshot("insert-space"),g="",t.dirty=!0,t.scrollIntoView(),e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1;let ve=u.at(u.position+1),He=u.at(u.position-1);if(ve?.mode==="text"||He?.mode==="text")return V.insert(u," ",{mode:"text"}),t.snapshot("insert-space"),t.dirty=!0,t.scrollIntoView(),!1}(l=u.at(u.position))!=null&&l.isDigit()&&globalThis.MathfieldElement.decimalSeparator===","&&Or(e)===","&&(g="insertDecimalSeparator")}}if(!d&&!g){if(u.mathfield.smartFence){if(hc(u,Or(e),rr(t)))return t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}else{let{parent:ve}=u.at(u.position);if(ve instanceof G&&ve.rightDelim==="?"&&u.at(u.position).isLastSibling&&/^[)}\]|]$/.test(c))return t.snapshot(),ve.isDirty=!0,ve.rightDelim=c,u.position+=1,u.selectionDidChange(),u.contentDidChange({data:Or(e),inputType:"insertText"}),t.snapshot("insert-fence"),t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1;if(!u.selectionIsCollapsed){let He=Or(e);if(He==="("||He==="{"||He==="["){let De={"(":"(","{":"\\lbrace","[":"\\lbrack"}[He],Xe={"(":")","{":"\\rbrace","[":"\\rbrack"}[He],[qe,Rs]=le(u.selection);return t.snapshot(),u.position=Rs,V.insert(u,Xe,{format:"latex"}),u.position=qe,V.insert(u,De,{format:"latex"}),u.setSelection(qe+1,Rs+1),u.contentDidChange({data:He,inputType:"insertText"}),t.snapshot("insert-fence"),t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}}}return!0}let W=u.at(Math.max(u.position,u.anchor)),{parent:me}=W;if(g==="moveAfterParent"&&me?.type==="leftright"&&W.isLastSibling&&t.options.smartFence&&hc(u,".",t.defaultStyle)&&(g="",U(t)),t.keyboardDelegate.cancelComposition(),g)t.executeCommand(g);else if(d){let ve=rr(t);u.setState(P[A].state);let He=P[P.length-1].keystrokes;He=He.slice(m-1);for(let De of He)V.insert(u,De,{silenceNotifications:!0,style:ve});t.snapshot("insert-shortcut"),u.setState(P[A].state),u.deferNotifications({content:!0,selection:!0,data:d,type:"insertText"},()=>(V.insert(u,d,{format:"latex",style:ve}),gs(t.model),d.endsWith(" ")&&(t.switchMode("text"),V.insert(u," ",{style:ve,mode:"text"})),t.snapshot(),u.selectionIsCollapsed||t.flushInlineShortcutBuffer(),!0)),t.dirty=!0,u.announce("replacement")}return t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}function bo(t,e,a){let{model:s}=t;if(!t.isSelectionEditable){s.announce("plonk");return}a!=null||(a={}),a.focus&&t.focus(),a.feedback&&globalThis.MathfieldElement.playSound("keypress"),typeof a.mode=="string"&&(t.switchMode(a.mode),t.snapshot());let o=Ta(e),l=window.mathVirtualKeyboard;if(l!=null&&l.isShifted&&(o=typeof o=="string"?o.toUpperCase():o.map(u=>u.toUpperCase())),a.simulateKeystroke){let u=!0;for(let c of o)fc(t,new KeyboardEvent("keypress",{key:c}))&&(u=!1);if(u)return}if(s.mode==="latex")s.deferNotifications({content:!0,selection:!0,data:e,type:"insertText"},()=>{di(t);for(let u of o)V.insert(s,u,{insertionMode:"replaceSelection"});t.snapshot("insert-latex"),Rr(t)});else if(s.mode==="text"){let u=p(p({},Pg(s)),t.defaultStyle);for(let c of o)V.insert(s,c,{style:u,insertionMode:"replaceSelection"});t.snapshot("insert-text")}else if(s.mode==="math")for(let u of o)Rg(t,u);t.dirty=!0,t.scrollIntoView()}function Bg(t){let e=t.model,a=[],s=e.at(Math.min(e.position,e.anchor));for(;s.type!=="first";)a.push(s),s=s.leftSibling;return a}function Rg(t,e){let a=t.model,s={"^":"moveToSuperscript",_:"moveToSubscript"," ":t.options.mathModeSpace?["insert",t.options.mathModeSpace]:"moveAfterParent"}[e];if(s){t.executeCommand(s);return}let o=p({},rr(t));!/[a-zA-Z0-9]/.test(e)&&t.styleBias!=="none"&&(o.variant="normal",o.variantStyle=void 0);let l=a.at(a.position);if(/\d/.test(e)&&t.options.smartSuperscript&&l.parentBranch==="superscript"&&l.parent.type!=="mop"&&l.parent.type!=="operator"&&l.parent.type!=="extensible-symbol"&&l.hasNoSiblings){if(!V.insert(a,e,{style:o,insertionMode:"replaceSelection"})){t.undoManager.pop();return}t.snapshot("insert-mord"),mc(a);return}let u=e;u==="{"?u="\\lbrace":u==="}"?u="\\rbrace":u==="&"?u="\\&":u==="#"?u="\\#":u==="$"?u="\\$":u==="%"?u="\\%":u==="~"?u="\\~":u==="\\"&&(u="\\backslash"),V.insert(a,u,{style:o,insertionMode:"replaceSelection"})&&t.snapshot(`insert-${a.at(a.position).type}`)}function Pg(t){var e,a,s,o;if(t.selectionIsCollapsed)return(a=(e=t.at(t.position))==null?void 0:e.style)!=null?a:{};let l=le(t.selection)[0];return(o=(s=t.at(l+1))==null?void 0:s.style)!=null?o:{}}function hc(t,e,a){var s;if(!e||t.mode!=="math")return!1;let o=t.at(t.position),{parent:l}=o,u={"(":"(",")":")","{":"\\lbrace","}":"\\rbrace","[":"\\lbrack","]":"\\rbrack","|":"|"}[e];if(!u)return!1;let c=Zi[u],d=Xi[u];if(!t.selectionIsCollapsed){t.mathfield.snapshot();let[m,g]=le(t.selection),A=t.extractAtoms([m,g]),P=l.addChildrenAfter([new G("left...right",A,{leftDelim:u,rightDelim:d})],t.at(m));return t.setSelection(t.offsetOf(P.firstChild),t.offsetOf(P.lastChild)),t.mathfield.snapshot("insert-fence"),t.contentDidChange({data:u,inputType:"insertText"}),!0}if(u==="|"){let m=l instanceof G?l.leftDelim+l.rightDelim:"";if(m==="\\lbrace\\rbrace"||m==="\\{\\}"||m==="\\lbrace?")return t.mathfield.snapshot(),V.insert(t,"\\,\\middle\\vert\\,",{format:"latex",style:a}),t.mathfield.snapshot("insert-fence"),t.contentDidChange({data:u,inputType:"insertText"}),!0}if(d){if(l instanceof G&&l.firstChild===o&&(l.leftDelim==="?"||l.leftDelim==="."))return l.leftDelim=u,l.isDirty=!0,t.mathfield.snapshot(),t.contentDidChange({data:u,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;if(!(l instanceof G)){let P=o;for(;P&&!(P.type==="mclose"&&P.value===d);)P=P.rightSibling;if(P){t.mathfield.snapshot();let W=t.extractAtoms([t.offsetOf(o),t.offsetOf(P)]);return W.pop(),l.addChildrenAfter([new G("left...right",W,{leftDelim:u,rightDelim:d})],o),t.position=t.offsetOf(l.firstChild)+1,t.contentDidChange({data:u,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}}let m=t.offsetOf(o.lastSibling),g;for(g=t.position;g<=m;g++){let P=t.at(g);if(P instanceof G&&(P.leftDelim==="?"||P.leftDelim===".")&&Tp(u,P.rightDelim))break}let A=t.at(g);if(g<=m&&A instanceof G){A.leftDelim=u,t.mathfield.snapshot();let P=t.extractAtoms([t.position,g-1]);return P=P.filter(W=>W.type!=="first"),A.addChildren(P,A.parentBranch),t.position+=1,t.contentDidChange({data:u,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}if(l instanceof G&&(l.leftDelim==="?"||l.leftDelim===".")&&Tp(u,l.rightDelim)){l.isDirty=!0,l.leftDelim=u,t.mathfield.snapshot();let P=t.extractAtoms([t.offsetOf(o.firstSibling),t.position]);for(let W of P)l.parent.addChildBefore(W,l);return t.contentDidChange({data:u,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}if(!(l instanceof G&&l.leftDelim==="|")){if(u==="("){let P=t.position-1,W=!1;for(;P>=0;){let me=t.at(P);if(me.type==="first")break;if(me.type==="mord"&&me.value&&/^[\d]$/.test(me.value)){P-=1;continue}if(me.type==="group"&&((s=me.body)==null?void 0:s.length)===2&&me.body[0].type==="first"&&me.body[1].value===","){W=!0;break}if(me.type==="mord"&&(me.value===","||me.value===".")){W=!0;break}break}if(W)return!1}if(t.mathfield.snapshot(),V.insert(t,`\\left${u}\\right?`,{format:"latex",style:a}),o.lastSibling.type!=="first"){let P=t.offsetOf(o.lastSibling),W=t.extractAtoms([t.position,P]);t.at(t.position).body=W,t.position-=1}return t.mathfield.snapshot("insert-fence"),!0}}if(c){if(u===")"){let me=t.position-1,ve=!1;for(;me>=0;){let He=t.at(me);if(He.type==="first")break;if(He.type==="mord"&&He.value&&/^[\d]$/.test(He.value)){ve=!0,me-=1;continue}break}if(ve&&t.at(me).type==="mopen"&&t.at(me).value==="(")return!1}let m=o;for(;m;){if(m.type==="mopen"&&m.value===c){t.mathfield.snapshot();let me=m.leftSibling,ve=t.extractAtoms([t.offsetOf(m.leftSibling),t.offsetOf(o)]);[,...ve]=ve;let He=new G("left...right",ve,{leftDelim:c,rightDelim:u});return l.addChildrenAfter([He],me),t.position=t.offsetOf(He),t.contentDidChange({data:u,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}m=m.leftSibling}if(l instanceof G&&o.isLastSibling&&pc(l.leftDelim,u))return t.mathfield.snapshot(),l.isDirty=!0,l.rightDelim=u,t.position+=1,t.contentDidChange({data:u,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;let g=t.offsetOf(o.firstSibling),A;for(A=t.position;A>=g;A--){let me=t.at(A);if(me instanceof G&&(me.rightDelim==="?"||me.rightDelim===".")&&pc(me.leftDelim,u))break}let P=t.at(A);if(A>=g&&P instanceof G)return t.mathfield.snapshot(),P.rightDelim=u,P.addChildren(t.extractAtoms([A,t.position]),P.parentBranch),t.contentDidChange({data:u,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;if(l instanceof G&&(l.rightDelim==="?"||l.rightDelim===".")&&pc(l.leftDelim,u))return t.mathfield.snapshot(),l.isDirty=!0,l.rightDelim=u,l.parent.addChildren(t.extractAtoms([t.position,t.offsetOf(o.lastSibling)]),l.parentBranch),t.position=t.offsetOf(l),t.contentDidChange({data:u,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;let W=l.parent;return W instanceof G&&(W.rightDelim==="?"||W.rightDelim===".")&&t.at(t.position).isLastSibling?(t.position=t.offsetOf(W),hc(t,u,a)):!1}return!1}function pc(t,e){return t?["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(t)?[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(e):Xi[t]===e:!0}function Tp(t,e){return e?[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(e)?["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(t):Zi[e]===t:!0}pe({undo:t=>(t.undo(),!0),redo:t=>(t.redo(),!0),scrollIntoView:t=>(t.scrollIntoView(),!0),scrollToStart:t=>(t.field.scroll(0,0),!0),scrollToEnd:t=>{let e=t.field.getBoundingClientRect();return t.field.scroll(e.left-window.scrollX,0),!0},toggleKeystrokeCaption:Ap,toggleContextMenu:t=>{let e=t.toggleContextMenu();return e||t.model.announce("plonk"),e},plonk:t=>(t.model.announce("plonk"),!0),switchMode:(t,e,a,s)=>(t.switchMode(e,a,s),!0),insert:(t,e,a)=>t.insert(e,a),typedText:(t,e,a)=>(bo(t,e,a),!0),insertDecimalSeparator:t=>{let e=t.model;return e.mode==="math"&&globalThis.MathfieldElement.decimalSeparator===","&&e.at(Math.max(e.position,e.anchor)).isDigit()?(t.insert("{,}",{format:"latex"}),t.snapshot("insert-mord"),!0):(t.insert("."),!0)},commit:t=>{var e,a;let s=t.model;return s.contentWillChange({inputType:"insertLineBreak"})&&((e=t.host)==null||e.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),(a=s.parentEnvironment)!=null&&a.isMultiline&&t.executeCommand("addRowAfter"),s.contentDidChange({inputType:"insertLineBreak"})),!0},insertPrompt:(t,e,a)=>{let s=t.getPrompts(),o="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36),l=0;for(;s.includes(o)&&l<100;){if(l===99)return console.error("could not find a unique ID after 100 tries"),!1;o="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36),l++}return t.insert(`\\placeholder[${e??o}]{}`,a),!0}});pe({copyToClipboard:t=>(t.focus(),t.model.selectionIsCollapsed&&t.select(),"queryCommandSupported"in document&&document.queryCommandSupported("copy")&&document.execCommand("copy")||t.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1)},{target:"mathfield"});pe({cutToClipboard:t=>(t.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("cut")&&document.execCommand("cut")||t.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:t=>(t.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("paste")?(document.execCommand("paste"),!0):(navigator.clipboard.readText().then(e=>{e&&t.model.contentWillChange({inputType:"insertFromPaste",data:e})?(t.stopCoalescingUndo(),t.stopRecording(),t.insert(e,{mode:t.model.mode})&&(Rr(t),t.startRecording(),t.snapshot("paste"),t.model.contentDidChange({inputType:"insertFromPaste"}),U(t))):t.model.announce("plonk"),t.startRecording()}),!0))},{target:"mathfield",canUndo:!0,changeContent:!0,changeSelection:!0});function bs(t){let[e,a]=le(t.selection);if(e=Dp(t,e,"backward"),a=Dp(t,a,"forward"),e===a){let s=t.at(e);if(s.type==="leftright")return t.setSelection(t.offsetOf(s.firstChild)-1,a);if(s.type==="first"&&(s.parent.type==="leftright"||s.parent.type==="surd"))return t.setSelection(e-1,t.offsetOf(s.parent.lastChild)+1);t.setSelection(e-1,a)}else t.setSelection(e,a);return!0}function Dp(t,e,a){var s,o,l;let u=t.at(e);if(!u)return e;let c=a==="forward"?1:-1;if(u.mode==="text"){for(;u&&!(u.mode!=="text"||!Wr.test(u.value));)e+=c,u=t.at(e);return a==="backward"?e-1:e}if(u.mode==="latex"){if(/[a-zA-Z\*]/.test(u.value))if(a==="backward")for(;u&&u.mode==="latex"&&u.value!=="\\"&&/[a-zA-Z]/.test(u.value);)e+=c,u=t.at(e);else for(;u&&u.mode==="latex"&&/[a-zA-Z\*]/.test(u.value);)e+=c,u=t.at(e);else if(u.value==="{"){if(a==="forward"){for(;u&&u.mode==="latex"&&u.value!=="}";)e+=c,u=t.at(e);return e}return e-1}else if(u.value==="}"){if(a==="backward"){for(;u&&u.mode==="latex"&&u.value!=="{";)e+=c,u=t.at(e);return e-1}return e}return e-1}if(u.mode==="math"){if(u.isDigit()){for(;(s=t.at(e+c))!=null&&s.isDigit();)e+=c;return a==="backward"?e-1:e}if(u.style.variant||u.style.variantStyle){let d=(o=t.at(e))==null?void 0:o.style;for(;d&&d.variant===u.style.variant&&d.variantStyle===u.style.variantStyle;)d=(l=t.at(e+c))==null?void 0:l.style,e+=c;return a==="backward"?e-1:e}return e}return e}pe({selectGroup:t=>{let e=bs(t);return e||t.announce("plonk"),e},selectAll:t=>t.setSelection(0,t.lastOffset),extendSelectionForward:t=>ot(t,"forward",{extend:!0}),extendSelectionBackward:t=>ot(t,"backward",{extend:!0}),extendToNextWord:t=>Ir(t,"forward",{extend:!0}),extendToPreviousWord:t=>Ir(t,"backward",{extend:!0}),extendSelectionUpward:t=>ot(t,"upward",{extend:!0}),extendSelectionDownward:t=>ot(t,"downward",{extend:!0}),extendToNextBoundary:t=>Ir(t,"forward",{extend:!0}),extendToPreviousBoundary:t=>Ir(t,"backward",{extend:!0}),extendToGroupStart:t=>{let e=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).firstSibling));return e||t.announce("plonk"),e},extendToGroupEnd:t=>{let e=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).lastSibling));return e||t.announce("plonk"),e},extendToMathFieldStart:t=>{let e=t.setSelection(t.anchor,0);return e||t.announce("plonk"),e},extendToMathFieldEnd:t=>{let e=t.setSelection(t.anchor,t.lastOffset);return e||t.announce("plonk"),e}},{target:"model",changeSelection:!0});var yi=null,yo=0,xi=class K6{static start(e,a,s,o){var l;K6.element=e,(l=K6.controller)==null||l.abort(),K6.controller=new AbortController;let u={signal:K6.controller.signal};"PointerEvent"in window?(e.addEventListener("pointermove",s,u),e.addEventListener("pointerup",o,u),e.addEventListener("pointercancel",o,u),gc(a)&&(K6.pointerId=a.pointerId,e.setPointerCapture(a.pointerId))):(window.addEventListener("mousemove",s,u),window.addEventListener("blur",o,u),window.addEventListener("mouseup",o,u))}static stop(){var e;(e=K6.controller)==null||e.abort(),K6.controller=void 0,typeof K6.pointerId=="number"&&(K6.element.releasePointerCapture(K6.pointerId),K6.pointerId=void 0)}};function gc(t){return t!==null&&globalThis.PointerEvent!==void 0&&t instanceof PointerEvent}function yc(t,e){var a;if(e.buttons>1)return;t.atomBoundsCache=new Map;let s=t,o,l=!1,u=!1,c="none",d=!1,m=!1,g=e.clientX,A=e.clientY,P=Date.now(),W=s.field,me=setInterval(()=>{d?W.scroll({top:0,left:W.scrollLeft-16}):m&&W.scroll({top:0,left:W.scrollLeft+16})},32);function ve(){xi.stop(),l=!1,clearInterval(me),t.element.classList.remove("tracking"),e&&e.preventDefault()}function He(Xe){if(!s.hasFocus()){ve();return}let qe=Xe.clientX,Rs=Xe.clientY,Vc=gc(Xe)&&Xe.pointerType==="touch"?20:5;if(Date.now()<P+500&&Math.abs(g-qe)<Vc&&Math.abs(A-Rs)<Vc){Xe.preventDefault(),Xe.stopPropagation();return}let So=W.getBoundingClientRect();m=qe>So.right,d=qe<So.left;let Do=o;gc(Xe)&&(Xe.isPrimary||(Do=xo(s,Xe.clientX,Xe.clientY,{bias:0})));let eh=xo(s,qe,Rs,{bias:qe<=g?qe===g?0:-1:1});Do>=0&&eh>=0&&(s.model.extendSelectionTo(Do,eh),U(t)),u&&bs(s.model)}yi&&Math.abs(yi.x-g)<5&&Math.abs(yi.y-A)<5&&Date.now()<yi.time+500?(yo+=1,yi.time=P):(yi={x:g,y:A,time:P},yo=1);let De=W.getBoundingClientRect();if(g>=De.left&&g<=De.right&&A>=De.top&&A<=De.bottom){if(t.flushInlineShortcutBuffer(),o=xo(t,g,A,{bias:0}),o!==t.model.anchor&&(t.defaultStyle={},t.styleBias="left"),o>=0){if(t.element.classList.add("tracking"),e.shiftKey){let Xe=t.model.selectionIsCollapsed;t.model.extendSelectionTo(t.model.anchor,o),Zl(t.model)||Xe?c="all":c="selection"}else t.model.at(o).type==="placeholder"?(t.model.setSelection(o-1,o),c="selection"):((a=t.model.at(o).rightSibling)==null?void 0:a.type)==="placeholder"?(t.model.setSelection(o,o+1),c="selection"):(t.model.position=o,Zl(t.model)?c="all":c="selection");e.detail===3||yo>2?(ve(),(e.detail===3||yo===3)&&(t.model.selection={ranges:[[0,t.model.lastOffset]]},c="all")):l||(l=!0,xi.start(W,e,He,ve),(e.detail===2||yo===2)&&(u=!0,bs(t.model),c="all"))}t.hasFocus()||(c="none",t.focus({preventScroll:!0}))}else yi=null;t.stopCoalescingUndo(),c!=="none"&&(t.model.selectionIsCollapsed&&(c="all"),U(t)),e.preventDefault()}function zg(t,e,a){if(t>=a.left&&t<=a.right&&e>=a.top&&e<=a.bottom)return 0;let s=t-(a.left+a.right)/2,o=e-(a.top+a.bottom)/2;return s*s+o*o}function bc(t,e,a,s,o){if(!a.id)return[1/0,null];if(e.has(a.id))return e.get(a.id);let l=Ar(t,a);if(!l)return[1/0,null];let u=[1/0,null],c=t.model;if(a instanceof I)for(let d of a.rows)for(let m of d){let g=[c.offsetOf(m[0]),c.offsetOf(m[m.length-1])],A=hm(t,g);if(o>=A.top&&o<=A.bottom)for(let P of m){let W=bc(t,e,P,s,o);W[0]<=u[0]&&(u=W)}}else if(a.hasChildren&&!a.captureSelection&&s>=l.left&&s<=l.right){let d=a.children;for(let m of d){let g=bc(t,e,m,s,o);g[0]<=u[0]&&(u=g)}}return u[1]||(u=[zg(s,o,l),a]),e.set(a.id,u),u}function Ig(t,e,a){let[,s]=bc(t,new Map,t.model.root,e,a);return s}function xo(t,e,a,s){var o;let l=t.field.querySelector(".ML__latex").getBoundingClientRect();if(!l)return 0;if(e>l.right||a>l.bottom+8)return t.model.lastOffset;if(e<l.left||a<l.top-8)return 0;s=s??{},s.bias=(o=s.bias)!=null?o:0;let u=Ig(t,e,a),c=[],d=u;for(;d;)c.unshift(d),d=d.parent;for(let g of c)if(g.captureSelection){u=g;break}let m=t.model.offsetOf(u);if(m<0)return-1;if(u.leftSibling)if(s.bias===0&&u.type!=="placeholder"){let g=Ar(t,u);g&&e<(g.left+g.right)/2&&(m=t.model.offsetOf(u.leftSibling))}else s.bias<0&&(m=t.model.offsetOf(u.leftSibling));return m}var xc=class extends V{constructor(){super("math")}onPaste(t,e){if(!e||!t.model.contentWillChange({data:typeof e=="string"?e:null,dataTransfer:typeof e=="string"?null:e,inputType:"insertFromPaste"}))return!1;let a="",s="auto",o=typeof e!="string"?e.getData("application/json+mathlive"):"";if(o)try{let l=JSON.parse(o);if(l&&Array.isArray(l)){t.snapshot();let u=ft(l),{model:c}=t;c.selectionIsCollapsed||c.deleteAtoms(le(c.selection));let d=c.at(c.position);if(d.parent instanceof I){d.parentBranch;let m=[],g=[];u[0].type==="first"&&u.shift(),u[u.length-1].type==="first"&&u.pop();for(let me of u)me.type==="first"&&g.length>0?(m.push(g),g=[me]):g.push(me);g.length>0&&m.push(g);let A=Number(d.parentBranch[0]),P=Number(d.parentBranch[1]),W=d.parent.maxColumns;for(;d.parent.colCount-P<m.length&&d.parent.colCount<W;)d.parent.addColumn();d.parent.addChildrenAfter(m[0],d);for(let me=1;me<m.length;me++)P++,P>=W&&(P=0,d.parent.addRowAfter(A),A++),d.parent.setCell(A,P,m[me])}else d.parent.addChildrenAfter(u.filter(m=>m.type!=="first"),d);return c.position=c.offsetOf(u[u.length-1]),c.contentDidChange({inputType:"insertFromPaste"}),U(t),!0}}catch{}if(o=typeof e!="string"?e.getData("application/json"):"",o&&globalThis.MathfieldElement.computeEngine)try{let l=JSON.parse(o);if(typeof l=="object"&&"latex"in l&&l.latex&&(a=l.latex),!a){let u=globalThis.MathfieldElement.computeEngine.box(l);u&&!u.has("Error")&&(a=u.latex)}a||(s="latex")}catch{}if(!a&&typeof e!="string"&&(a=e.getData("application/x-latex"),a&&(s="latex")),a||(a=typeof e=="string"?e:e.getData("text/plain")),a){let l;return[l,a]=Ia(a),s==="auto"&&l&&(s="latex"),t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,a,{format:s})&&(t.startRecording(),t.snapshot("paste"),U(t)),t.startRecording(),!0}return!1}insert(t,e,a){var s,o;let l=typeof e=="string"?e:(o=(s=globalThis.MathfieldElement.computeEngine)==null?void 0:s.box(e).latex)!=null?o:"";if(!a.silenceNotifications&&!t.contentWillChange({data:l,inputType:"insertText"}))return!1;a.insertionMode||(a.insertionMode="replaceSelection"),a.selectionMode||(a.selectionMode="placeholder"),a.format||(a.format="auto");let{silenceNotifications:u}=t;a.silenceNotifications&&(t.silenceNotifications=!0);let c=t.silenceNotifications;t.silenceNotifications=!0;let d={"?":"\\placeholder{}","@":"\\placeholder{}"};d[0]=a.insertionMode==="replaceAll"?"":t.getValue(t.selection,"latex-unstyled"),a.insertionMode==="replaceSelection"?t.deleteAtoms(le(t.selection)):a.insertionMode==="replaceAll"?t.deleteAtoms():a.insertionMode==="insertBefore"?t.collapseSelection("backward"):a.insertionMode==="insertAfter"&&t.collapseSelection("forward"),!t.at(t.position).isLastSibling&&t.at(t.position+1).type==="placeholder"?t.deleteAtoms([t.position,t.position+1]):t.at(t.position).type==="placeholder"&&t.deleteAtoms([t.position-1,t.position]);let m=-1;d[0]?d["@"]=d[0]:typeof e=="string"&&/(^|[^\\])#@/.test(e)&&(m=Ng(t),m>=0&&(d["@"]=t.getValue(m,t.position,"latex"))),d[0]||(d[0]=d["?"]);let g=!1,A=He=>(g=!0,d[He]),[P,W]=Kp(t,e,A,a);if(!W)return!1;let me=W.length===1&&W[0].type==="genfrac";if(me&&m>=0&&typeof t.mathfield.options.isImplicitFunction=="function"&&t.mathfield.options.isImplicitFunction(t.at(t.position).command)?(d["@"]=d["?"],g=!1,[P,W]=Kp(t,e,A,a)):m>=0&&t.deleteAtoms([m,t.position]),W.length===1&&W[0].isRoot)t.root=W[0];else{let{parent:He}=t.at(t.position),De=He.hasEmptyBranch("body");if(me&&P!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&He instanceof G&&He.leftDelim==="("&&De){let qe=He.parent,Rs=He.parentBranch;qe.removeChild(He),qe.setChildren(W,Rs)}let Xe=t.at(t.position);Xe.parent.addChildrenAfter(W,Xe),P==="latex"&&typeof e=="string"&&He?.type==="root"&&De&&!g&&(He.verbatimLatex=e)}t.silenceNotifications=c;let ve=W[W.length-1];if(a.selectionMode==="placeholder"){let He=W.flatMap(De=>[De,...De.children]).find(De=>De.type==="placeholder");if(He){let De=t.offsetOf(He);t.setSelection(De-1,De),t.announce("move")}else if(ve){let De=ve.body,Xe=ve.hasEmptyBranch("body");De&&Xe?t.setSelection(t.offsetOf(De[0]),t.offsetOf(De[De.length-1])+1):t.position=t.offsetOf(ve)}}else a.selectionMode==="before"||(a.selectionMode==="after"?ve&&(t.position=t.offsetOf(ve)):a.selectionMode==="item"&&t.setSelection(t.anchor,t.offsetOf(ve)));return t.contentDidChange({data:l,inputType:"insertText"}),t.silenceNotifications=u,!0}};function Kp(t,e,a,s){var o;let l,u=[];if(typeof e!="string"||s.format==="math-json"){let c=globalThis.MathfieldElement.computeEngine;if(!c)return["math-json",[]];[l,e]=["latex",c.box(e).latex],u=he(e,{context:t.mathfield.context})}else typeof e=="string"&&s.format==="ascii-math"?([l,e]=Yt(e,{format:"ascii-math",inlineShortcuts:t.mathfield.options.inlineShortcuts}),u=he(e,{context:t.mathfield.context}),l!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&(u=u.map(c=>ys(c)))):(s.format==="auto"||(o=s.format)!=null&&o.startsWith("latex"))&&(s.format==="auto"&&([l,e]=Yt(e,{format:"auto",inlineShortcuts:t.mathfield.options.inlineShortcuts})),s.format==="latex"&&([,e]=Ia(e)),u=he(e,{context:t.mathfield.context,args:a}),s.format!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&(u=u.map(c=>ys(c))));return Qn(u,s.style),[l??"latex",u]}function ys(t){var e;if(t instanceof G&&t.leftDelim!=="("&&t.rightDelim===")"){let a=(e=t.body)==null?void 0:e.filter(s=>s.type!=="first");if(a?.length===1&&a[0].type==="genfrac")return a[0]}for(let a of t.branches)t.hasEmptyBranch(a)||t.setChildren(t.branch(a).map(s=>ys(s)),a);return t instanceof I&&t.forEachCell((a,s,o)=>{t.setCell(s,o,a.map(l=>ys(l)))}),t}function Ng(t){let e=t.at(t.position);if(e.mode==="text"){for(;!e.isFirstSibling&&e.mode==="text";)e=e.leftSibling;return t.offsetOf(e)}let a=e,s=!1;if(e.type==="mclose"){let o=Zi[e.value];for(;!e.isFirstSibling&&!(e.type==="mopen"&&e.value===o);)e=e.leftSibling;e.isFirstSibling||(e=e.leftSibling),s=!0}else e.type==="leftright"&&(e=e.leftSibling,s=!0);if(s)for(;!e.isFirstSibling&&(e.isFunction||Op(e));)e=e.leftSibling;else{let o=[];for(;!e.isFirstSibling&&(Op(e)||o.length>0);)e.type==="mclose"&&o.unshift(e.value),e.type==="mopen"&&o.length>0&&e.value===Zi[o[0]]&&o.shift(),e=e.leftSibling}return a===e?-1:t.offsetOf(e)}function Op(t){return t.isDigit()?!0:t.type&&/^(mord|surd|subsup|leftright|mop|mclose)$/.test(t.type)?t.type!=="extensible-symbol":!1}new xc;var vc=class extends V{constructor(){super("text")}onPaste(t,e){if(!e)return!1;let a=typeof e=="string"?e:e.getData("text/plain");return a&&t.model.contentWillChange({inputType:"insertFromPaste",data:a})?(t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,a)&&(t.model.contentDidChange({inputType:"insertFromPaste"}),t.startRecording(),t.snapshot("paste"),U(t)),t.startRecording(),!0):!1}insert(t,e,a={}){if(!t.contentWillChange({data:e,inputType:"insertText"}))return!1;a.insertionMode||(a.insertionMode="replaceSelection"),a.selectionMode||(a.selectionMode="placeholder"),a.format||(a.format="auto");let{silenceNotifications:s}=t;a.silenceNotifications&&(t.silenceNotifications=!0);let o=t.silenceNotifications;t.silenceNotifications=!0,a.insertionMode==="replaceSelection"&&!t.selectionIsCollapsed?t.deleteAtoms(le(t.selection)):a.insertionMode==="replaceAll"?(t.root.setChildren([],"body"),t.position=0):a.insertionMode==="insertBefore"?t.collapseSelection("backward"):a.insertionMode==="insertAfter"&&t.collapseSelection("forward");let l=$g(e,t.mathfield.context);if(Qn(l,a.style),!l)return!1;let u=t.at(t.position),c=u.parent.addChildrenAfter(l,u);return t.silenceNotifications=o,a.selectionMode==="before"||(a.selectionMode==="item"?t.setSelection(t.anchor,t.offsetOf(c)):c&&(t.position=t.offsetOf(c))),t.contentDidChange({data:e,inputType:"insertText"}),t.silenceNotifications=s,!0}};function $g(t,e){return t=t.replace(/\\/g,"\\textbackslash "),t=t.replace(/#/g,"\\#"),t=t.replace(/\$/g,"\\$"),t=t.replace(/%/g,"\\%"),t=t.replace(/&/g,"\\&"),t=t.replace(/_/g,"\\_"),t=t.replace(/{/g,"\\textbraceleft "),t=t.replace(/}/g,"\\textbraceright "),t=t.replace(/lbrace/g,"\\textbraceleft "),t=t.replace(/rbrace/g,"\\textbraceright "),t=t.replace(/\^/g,"\\textasciicircum "),t=t.replace(/~/g,"\\textasciitilde "),t=t.replace(//g,"\\textsterling "),he(t,{context:e,parseMode:"text"})}new vc;function Vt(t){return{value:t.model.getValue(),selectionIsCollapsed:t.model.selectionIsCollapsed,canUndo:t.canUndo(),canRedo:t.canRedo(),style:Fg(t.model),mode:t.model.mode}}function Fg(t){var e;if(t.selectionIsCollapsed)return(e=t.at(t.position))==null?void 0:e.style;let a=t.getAtoms(t.selection);if(a.length===0)return{};let s=p({},a[0].style);for(let o of a)for(let[l,u]of Object.entries(o.style))s[l]!==u&&delete s[l];return s}var ie=4,Pe=20,fe=2*(Pe+ie),xs=(t,e)=>`
  <line x1="${t+Pe}" y1="${e+Pe}" 
    x2="${t>e?t+Pe:7*Pe+10*ie}" 
    y2="${t<e?e+Pe:7*Pe+10*ie}"/>
  <svg id="plus" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.34-3.33,3.34h-6.67v6.66c0,1.84-1.49,3.34-3.33,3.34s-3.34-1.5-3.34-3.34v-6.66h-6.66c-1.84,0-3.34-1.5-3.34-3.34s1.5-3.33,3.34-3.33h6.66v-6.67c0-1.84,1.5-3.33,3.34-3.33s3.33,1.49,3.33,3.33v6.67h6.67c1.84,0,3.33,1.49,3.33,3.33Z"/>
  </svg>`,Bp=(t,e)=>`
  <line x1="${t+Pe}" y1="${e+Pe}" 
    x2="${t>e?t+Pe:7*Pe+10*ie}" 
    y2="${t<e?e+Pe:7*Pe+10*ie}"/>
  <svg id="minus" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.33-3.33,3.33H10c-1.84,0-3.34-1.49-3.34-3.33s1.5-3.34,3.34-3.34h20c1.84,0,3.33,1.5,3.33,3.34Z"/>
  </svg>`,vs=(t,e,a)=>`
  <svg id="arrow" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <g transform="rotate(${a})" transform-origin="20 20">
      <path class="font" d="m17.7,7.23h4.6c.52,0,.94.42.94.94v13.82c0,.52.42.94.94.94h3.39c.83,0,1.25,1.01.66,1.6l-7.56,7.56c-.37.37-.96.37-1.32,0l-7.56-7.56c-.59-.59-.17-1.6.66-1.6h3.39c.52,0,.94-.42.94-.94v-13.82c0-.52.42-.94.94-.94Z"/>
    </g>  
  </svg>`,Vg=`
<svg class="MLEP__array-buttons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
viewBox=
"-2 -2 ${8*Pe+10*ie+5} ${8*Pe+10*ie+5}">
  <rect 
      class="MLEP__array-insert-background rows"
      x="0" 
      y="${fe+ie}" 
      height="${3*fe}" 
      width="${fe}" 
      rx="${fe/2}"/>
      <rect 
      class="MLEP__array-insert-background columns"
      x="${fe+ie}" 
      y="0" 
      height="${fe}" 
      width="${3*fe}" 
      rx="${fe/2}"/>
  <g data-command='"moveDown"'>
  ${vs(2*(ie+fe),2*ie+3*fe,0)}
  </g>
  <g data-command='"moveUp"'>
  ${vs(2*(ie+fe),2*ie+fe,180)}
  </g>
  <g data-command='"moveToNextWord"'>
  ${vs(2*ie+3*fe,2*(ie+fe),-90)}
  </g>
  <g data-command='"moveToPreviousWord"'>
  ${vs(2*ie+fe,2*(ie+fe),90)}
  </g>
  <g>

  <g data-command='"addColumnBefore"'>
  ${xs(2*ie+fe,ie)}
  </g>
  <g data-command='"removeColumn"'>
  ${Bp(2*ie+2*fe,ie)}
  </g>
  <g data-command='"addColumnAfter"'>
  ${xs(2*ie+3*fe,ie)}
  </g>
  <g data-command='"addRowBefore"'>
  ${xs(ie,2*ie+fe)}
  </g>
  <g data-command='"removeRow"'>
  ${Bp(ie,2*ie+2*fe)}
  </g>
  <g data-command='"addRowAfter"'>
    ${xs(ie,2*ie+3*fe)}
  </g>
</svg>`,qg=t=>`
<svg id="matrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","matrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,Hg=t=>`
<svg id="pmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
data-command='["setEnvironment","pmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-3.96,4.6-3.96,11.4,0,16"/>
  <path class="cls-2" d="m22,4c3.96,4.6,3.96,11.4,0,16"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,Rp=t=>`
<svg id="Bmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","Bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <path class="cls-2" d="m22,4c1.1,0,2,.9,2,2v3c0,1.66.9,3,2,3-1.1,0-2,1.34-2,3v3c0,1.1-.9,2-2,2"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,Wg=t=>`
<svg id="bmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4h-3v16h3"/>
  <path class="cls-2" d="m22,4h3v16h-3"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,Ug=t=>`
<svg id="vmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="4" y1="4" x2="4" y2="20"/>
  <line class="cls-2" x1="24" y1="4" x2="24" y2="20"/>
</svg>`,jg=t=>`
<svg id="Vmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="-3.5 -3 35 30" 
  data-command='["setEnvironment","Vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="6" y1="4" x2="6" y2="20"/>
  <line class="cls-2" x1="22" y1="4" x2="22" y2="20"/>
  <line class="cls-2" x1="2" y1="4" x2="2" y2="20"/>
  <line class="cls-2" x1="26" y1="4" x2="26" y2="20"/>
</svg>`,Jg=t=>`
<svg id="cases" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","cases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m10,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <circle cx="13" cy="8" r="1"/>
  <circle cx="13" cy="16" r="1"/>
  <circle cx="21" cy="8" r="1"/>
  <circle cx="21" cy="16" r="1"/>
</svg>`,Gg=t=>`
<svg id="rcases" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","rcases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m18,20c1.1,0,2-.9,2-2v-3c0-1.66.9-3,2-3-1.1,0-2-1.34-2-3v-3c0-1.1-.9-2-2-2"/>
  <circle cx="15" cy="8" r="1"/>
  <circle cx="15" cy="16" r="1"/>
  <circle cx="7" cy="8" r="1"/>
  <circle cx="7" cy="16" r="1"/>
</svg>`,_c={matrix:qg,pmatrix:Hg,bmatrix:Wg,Bmatrix:Rp,vmatrix:Ug,Vmatrix:jg},Mc={cases:Jg,rcases:Gg,Bmatrix:Rp};function Xg(t){var e,a;let s=(e=t.model.parentEnvironment)==null?void 0:e.rows;if(!s)return;let o=0;s.forEach(W=>{(!o||W.length>o)&&(o=W.length)});let l=document.getElementById("mathlive-environment-popover");l||(l=mi("mathlive-environment-popover"),Ve("environment-popover"),Ve("core"),l.setAttribute("aria-hidden","true"));let u,c=l.querySelector(".MLEP__environment-controls");c?u=c:(u=document.createElement("div"),l.innerHTML="",l.appendChild(u)),u.className="MLEP__environment-controls",u.style.display="flex",u.style.width="100%",u.style.height="100%",u.style.boxSizing="border-box",u.innerHTML=Vg;let d=[],m="",g=t.model.parentEnvironment.environmentName;if(Va(g)){let W=Zg(g);m=_c[W]("active");let me=_c,{[W]:ve}=me,He=ki(me,[Ps(W)]);d=Object.values(He).map(De=>De("inactive"))}else if(Km(g)){let W=Yg(g);m=Mc[W]("active");let me=Mc,{[W]:ve}=me,He=ki(me,[Ps(W)]);d=Object.values(He).map(De=>De("inactive"))}else Om(g)&&(m=_c.matrix("active"),d=Object.values(Mc).map(W=>W("inactive")));let A=document.createElement("div");A.className="MLEP__environment-delimiter-controls",A.style.display="flex",A.style.flexDirection="column",A.innerHTML=`
  <div class='MLEP__array-delimiter-options'>
  ${m}
  ${d.join("")}
  </div>`,m&&u.appendChild(A),u.querySelectorAll("[data-command]").forEach(W=>{let me=W.dataset.command,ve=me;try{ve=JSON.parse(me)}catch{}W.addEventListener("mousedown",He=>He.preventDefault()),ve&&W.addEventListener("click",()=>t.executeCommand(ve))});let P=(a=t.field)==null?void 0:a.getBoundingClientRect();P&&(l.style.top=`${window.scrollY+(P.top-l.clientHeight-15)}px`,l.style.left=`${P.left+20}px`,l.classList.add("is-visible"))}function _s(){let t=document.getElementById("mathlive-environment-popover");t?.classList.remove("is-visible")}function Pp(){document.getElementById("mathlive-environment-popover")&&(Pr("mathlive-environment-popover"),it("environment-popover"),it("core"))}function vo(t){if(!t.hasFocus())return;let e=!1;if(t.model.mode==="math"){let a=t.model.parentEnvironment;if(a!=null&&a.rows&&Dm(a.environmentName)){let s=t.options.environmentPopoverPolicy;e=s==="auto"||s==="on"}}e?Xg(t):_s()}function Zg(t){return t.replace("*","")}function Yg(t){return t==="dcases"?"cases":t}function Ms(t){let e=getComputedStyle(t).direction;return e==="ltr"||e==="rtl"?e:"ltr"}function kc(t,e,a){return e==="left"||e==="leading"&&a==="ltr"||e==="trailing"&&a==="rtl"?t.left:t.right}function wc(t,e,a,s){return a==="middle"?t-e/2:a==="start"&&s==="rtl"||a==="end"&&s==="ltr"||a==="top"||a==="right"?Math.max(0,t-e):t}function Qg(t,e,a,s){return a==="middle"?t-e/2:a==="start"&&s==="ltr"||a==="end"&&s==="rtl"||a==="top"||a==="right"?t:t-e}function zp(t,e){var a,s,o;let l=(a=Ms(t))!=null?a:"ltr";t.style.position="fixed",t.style.left="",t.style.top="",t.style.right="",t.style.bottom="",t.style.height="",t.style.width="";let u=t.getBoundingClientRect(),c=Number.isFinite(e.maxHeight)?Math.min(e.maxHeight,window.innerHeight):window.innerHeight,d=Math.min(c,(s=e.height)!=null?s:u.height),m=wc(e.location.y,d,e.verticalPos,l);m+d>window.innerHeight-8&&(e.alternateLocation?(m=wc(e.alternateLocation.y,d,e.verticalPos,l),m+d>window.innerHeight-8&&(m=void 0)):m=void 0),Number.isFinite(m)||(m=Math.max(8,window.innerHeight-8-d),8+d>window.innerHeight-8&&(t.style.bottom="8px")),d=Math.min(m+d,window.innerHeight-8)-m;let g=Number.isFinite(e.maxWidth)?Math.min(e.maxWidth,window.innerWidth):window.innerWidth,A=Math.min(g,(o=e.width)!=null?o:u.width),P=wc(e.location.x,A,e.horizontalPos,l);P+A>window.innerWidth-8&&(e.alternateLocation?(P=Qg(e.alternateLocation.x,A,e.verticalPos,l),P+A>window.innerWidth-8&&(P=void 0)):P=void 0),Number.isFinite(P)||(P=Math.max(8,window.innerWidth-8-A),8+A>window.innerWidth-8&&(t.style.right="8px")),A=Math.min(P+A,window.innerWidth-8)-P,l==="rtl"?t.style.right=`${Math.ceil(window.innerWidth-P-A).toString()}px`:t.style.left=`${Math.ceil(P).toString()}px`,t.style.top=`${Math.ceil(m).toString()}px`,d!==u.height&&(t.style.height=`${Math.ceil(d).toString()}px`),A!==u.width&&(t.style.width=`${Math.ceil(A).toString()}px`)}function Ip(t,e){return Math.hypot(e.x-t.x,e.y-t.y)}function Nr(t){return"submenu"in t}function _t(t){return"type"in t&&t.type==="command"||"onMenuSelect"in t||"id"in t}function _o(t){return"type"in t&&t.type==="divider"}function ws(t){return"type"in t&&t.type==="heading"}var Np={};function ks(t){let e=Np[t];if(!e){let a;switch(t){case"checkmark":a=`<span aria-hidden="true" class="ui-checkmark"><svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"></path></svg>
      </span>`;break;case"trailing-chevron":a='<span aria-hidden="true" class="ui-trailing-chevron"><svg focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></span>';break;case"mixedmark":a='<span aria-hidden="true" class="ui-mixedmark"><svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256c0-13.3 10.7-24 24-24H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24z"/></svg></span>'}if(a){let s=document.createElement("template");s.innerHTML=a,Np[t]=s,e=s}}if(e){if("content"in e)return e.content.cloneNode(!0);let a=document.createElement("svg");return a.innerHTML=e.innerHTML,a}}var $p=80,vn=class{constructor(t,e){this._className="",this._element=null;var a;this.parentMenu=e,this._declaration=t,Object.freeze(this._declaration),Nr(t)?(this.type="submenu",this.submenu=new _n(t.submenu,{parentMenu:e,submenuClass:t.submenuClass,columnCount:t.columnCount})):this.type=(a=t.type)!=null?a:"command",this.hasCheck=_t(t)&&t.checked!==void 0}get rootMenu(){return this.parentMenu.rootMenu}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}dispose(){var t,e;(t=this._abortController)==null||t.abort(),this._abortController=void 0,(e=this._element)==null||e.remove(),this._element=null,this.submenu&&this.submenu.dispose(),this.submenu=void 0}get menuItem(){return this._declaration}get label(){var t;return(t=this._label)!=null?t:""}set label(t){t===void 0&&(t=""),t!==this._label&&(this._label=t,this.dirty=!0)}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.dirty=!0)}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this.element&&(t?this.element.removeAttribute("aria-disabled"):this.element.setAttribute("aria-disabled","true")),this.dirty=!0}get checked(){return this._checked}set checked(t){this._checked=t,this.dirty=!0}get tooltip(){return this._tooltip}set tooltip(t){t!==this._tooltip&&(this._tooltip=t,this.dirty=!0)}get ariaLabel(){return this._ariaLabel}set ariaLabel(t){t!==this._ariaLabel&&(this._ariaLabel=t,this.dirty=!0)}get active(){var t,e;return(e=(t=this.element)==null?void 0:t.classList.contains("active"))!=null?e:!1}set active(t){this.element&&this.element.classList.toggle("active",t)}updateState(t){var e,a,s;let o=this._declaration;if(_o(o)){this.enabled=!1,this.checked=!1;return}ws(o)&&(this.enabled=!1,this.checked=!1,this.visible=!0),_t(o)&&(this.checked=(e=vi(o.checked,t))!=null?e:!1),(_t(o)||Nr(o))&&(this.enabled=(a=vi(o.enabled,t))!=null?a:!0,this.visible=(s=vi(o.visible,t))!=null?s:!0,this.visible&&this.enabled&&this.submenu&&(this.submenu.updateState(t),this.submenu.visible||(this.visible=!1))),(_t(o)||ws(o)||Nr(o))&&(this.label=vi(o.label,t),this._className=vi(o.class,t),this.tooltip=vi(o.tooltip,t),this.ariaLabel=vi(o.ariaLabel,t)),this._element&&this.updateElement()}set dirty(t){t&&this.parentMenu&&(this.parentMenu.dirty=!0)}updateElement(){var t;if(!this.visible||!this.element)return;let e=this.element;e.textContent="",e.className="",e.className=(t=this._className)!=null?t:"",this.enabled?e.removeAttribute("aria-disabled"):e.setAttribute("aria-disabled","true"),this.checked===!0?(e.setAttribute("aria-checked","true"),e.append(ks("checkmark"))):this.checked==="mixed"?(e.setAttribute("aria-checked","mixed"),e.append(ks("mixedmark"))):e.removeAttribute("aria-checked"),this.ariaLabel&&e.setAttribute("aria-label",this.ariaLabel);let a=document.createElement("span");if(a.className=this.parentMenu.hasCheck?"label indent":"label",this.type==="heading"&&a.classList.add("heading"),a.innerHTML=this.label,e.append(a),this._tooltip&&e.setAttribute("data-tooltip",this._tooltip),_t(this._declaration)&&this._declaration.keyboardShortcut){let s=document.createElement("kbd");s.innerHTML=cn(this._declaration.keyboardShortcut),e.append(s)}this.type==="submenu"&&e.append(ks("trailing-chevron"))}get element(){if(this._element)return this._element;if(_o(this._declaration)){let a=document.createElement("li");return a.setAttribute("part","menu-divider"),a.setAttribute("role","divider"),this._element=a,a}let t=document.createElement("li");this._element=t,(_t(this._declaration)||ws(this._declaration)||Nr(this._declaration))&&t.setAttribute("part","menu-item"),t.setAttribute("tabindex","-1"),this.hasCheck?t.setAttribute("role","menuitemcheckbox"):t.setAttribute("role","menuitem"),this.type==="submenu"&&(t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-expanded","false"));let e=this.abortController.signal;return t.addEventListener("pointerenter",this,{signal:e}),t.addEventListener("pointerleave",this,{signal:e}),t.addEventListener("pointerup",this,{signal:e}),t.addEventListener("click",this,{signal:e}),this._element}dispatchSelect(){var t;if(!_t(this._declaration))return;let e=new CustomEvent("menu-select",{cancelable:!0,bubbles:!0,detail:{modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data}});this.parentMenu.dispatchEvent(e)&&typeof this._declaration.onMenuSelect=="function"&&this._declaration.onMenuSelect({target:(t=this.parentMenu.host)!=null?t:void 0,modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data})}handleEvent(t){var e;if(!(!this.visible||!this.enabled)){if(t.type==="click"){this.rootMenu.state==="modal"&&this.select(),t.stopPropagation(),t.preventDefault();return}if(t.type==="pointerenter"){let a=t;this.rootMenu.cancelDelayedOperation(),this.parentMenu.isSubmenuOpen&&(e=this.parentMenu.activeMenuItem)!=null&&e.movingTowardSubmenu(a)?this.rootMenu.scheduleOperation(()=>{this.parentMenu.activeMenuItem=this,this.openSubmenu()}):(this.parentMenu.activeMenuItem=this,this.openSubmenu({withDelay:!0}));return}if(t.type==="pointerleave"){this.rootMenu.activeSubmenu===this.parentMenu&&(this.parentMenu.activeMenuItem=null);return}if(t.type==="pointerup"){this.rootMenu.state!=="modal"&&this.select(),t.stopPropagation(),t.preventDefault();return}}}select(){if(this.rootMenu.cancelDelayedOperation(),this.type==="submenu"){this.openSubmenu();return}this.active=!1,setTimeout(()=>{this.active=!0,setTimeout(()=>{this.active=!1,this.rootMenu.hide(),this.dispatchSelect()},$p)},$p)}openSubmenu(t){var e;if(this.type!=="submenu"||!this.element)return;if((e=t?.withDelay)!=null&&e){this.rootMenu.scheduleOperation(()=>this.openSubmenu());return}let a=this.element.getBoundingClientRect(),s=Ms(this.element);this.submenu.show({container:this.rootMenu.element.parentNode,location:{x:kc(a,"trailing",s),y:a.top-4},alternateLocation:{x:kc(a,"leading",s),y:a.top-4}})}movingTowardSubmenu(t){if(!this.element||this.type!=="submenu")return!1;let e=this.rootMenu.lastMoveEvent;if(!e)return!1;let a=t.timeStamp-e.timeStamp;if(a>500)return!1;let s=t.clientX-e.clientX;if(eb(s,e.clientY-t.clientY,a)<=.2)return!1;let o="right";if(this.submenu.element){let l=this.submenu.element.getBoundingClientRect(),u=this.element.getBoundingClientRect();l.left<u.left+u.width/2&&(o="left")}return o==="right"?s>0:s<0}};function eb(t,e,a){return Math.hypot(t,e)/a}function vi(t,e){return t===void 0||typeof t!="function"?t:(e!=null||(e={alt:!1,control:!1,shift:!1,meta:!1}),t(e))}var _n=class Iy{constructor(e,a){this._element=null,this._activeMenuItem=null,this._dirty=!0;var s,o;this.parentMenu=(s=a?.parentMenu)!=null?s:null,this._submenuClass=a?.submenuClass,this.columnCount=(o=a?.columnCount)!=null?o:1,this.isSubmenuOpen=!1,this.menuItems=e}get children(){return Object.freeze([...this._menuItems])}set menuItems(e){let a=this.parentMenu;this.dispose(),this.parentMenu=a,e=[...e],this._menuItems=e.map(s=>s.onCreate?s.onCreate(s,this):new vn(s,this)),this.hasCheck=void 0,this.dirty=!0}dispose(){var e;this.hide(),this._element&&this._element.remove(),this._abortController&&this._abortController.abort(),(e=this._menuItems)==null||e.forEach(a=>a.dispose()),this._menuItems=[],this._activeMenuItem=null,this.parentMenu=null}handleEvent(e){if(e.type==="wheel"&&this._element){let a=e;this._element.scrollBy(0,a.deltaY),e.stopPropagation()}}dispatchEvent(e){return this.rootMenu.dispatchEvent(e)}get host(){return this.rootMenu.host}get rootMenu(){return this.parentMenu.rootMenu}updateState(e){var a,s,o;this._menuItems.forEach(m=>m.updateState(e));let l=this.hasCheck;this.hasCheck=this._menuItems.some(m=>m.visible&&m.hasCheck),this.hasCheck!==l&&this._menuItems.forEach(m=>m.updateState(e));let u,c=0;for(let m of this._menuItems)m.type==="heading"?(u&&c===0&&(u.visible=!1),u=m,c=0):m.type==="divider"&&u?(u.visible=c>0,u=void 0,c=0):u&&m.visible&&(c+=1);u&&(u.visible=c>0);let d=!0;for(let m of this._menuItems)m.type==="divider"?(m.visible=!d,d=!0):m.visible&&(d=!1);(a=this.activeMenuItem)!=null&&a.visible||(this.activeMenuItem=null),!((s=this.activeMenuItem)!=null&&s.enabled)&&((o=this.activeMenuItem)==null?void 0:o.type)==="submenu"&&this._activeMenuItem.submenu.hide(),this._dirty=!1}get enabled(){return this.updateIfDirty(),this._menuItems.some(e=>e.type!=="divider"&&e.visible&&e.enabled)}get visible(){return this.updateIfDirty(),this._menuItems.some(e=>e.type!=="divider"&&e.visible)}set dirty(e){this._dirty!==e&&e&&this.parentMenu&&(this._dirty=!0,this.parentMenu.dirty=!0)}updateIfDirty(){this._dirty&&this.updateState(this.rootMenu.modifiers)}updateElement(){var e;if(this._element){this._element.textContent="";for(let{element:a,visible:s}of this._menuItems)a&&s&&this._element.append(a);(e=this._element.querySelector("li:first-of-type"))==null||e.setAttribute("tabindex","0")}}get element(){if(this._element)return this._element;let e=document.createElement("menu");e.setAttribute("role","menu"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-orientation","vertical"),e.setAttribute("part","ui-menu-container"),this._submenuClass&&e.classList.add(this._submenuClass),e.classList.add("ui-menu-container"),this._abortController||(this._abortController=new AbortController);let a=this._abortController.signal;return e.addEventListener("focus",this,{signal:a}),e.addEventListener("wheel",this,{passive:!0,signal:a}),this._element=e,this.updateElement(),e}get activeMenuItem(){return this._activeMenuItem}set activeMenuItem(e){var a,s,o,l;if(this.rootMenu.cancelDelayedOperation(),e!==this._activeMenuItem){if(this.activeMenuItem){let u=this.activeMenuItem;u.active=!1,(a=u.submenu)==null||a.hide()}if(!((s=e?.visible)==null||s)){this._activeMenuItem=null;return}this._activeMenuItem=e,e&&(e.active=!0)}e?(o=e.element)==null||o.focus({preventScroll:!0}):(l=this._element)==null||l.focus({preventScroll:!0})}get firstMenuItem(){this.updateIfDirty();let e=0,a=!1,s=this._menuItems;for(;!a&&e<=s.length-1;){let o=s[e];a=o.type!=="divider"&&o.visible&&o.enabled,e+=1}return a?s[e-1]:null}get lastMenuItem(){this.updateIfDirty();let e=this._menuItems,a=e.length-1,s=!1;for(;!s&&a>=0;){let o=e[a];s=o.type!=="divider"&&o.visible&&o.enabled,a-=1}return s?e[a+1]:null}nextMenuItem(e){if(e===0)return this._activeMenuItem;if(!this._activeMenuItem)return e>0?this.firstMenuItem:this.lastMenuItem;if(!this.firstMenuItem||!this.lastMenuItem||!this._activeMenuItem)return null;this.updateIfDirty();let a=this._menuItems.indexOf(this.firstMenuItem),s=this._menuItems.indexOf(this.lastMenuItem),o=this._menuItems.indexOf(this._activeMenuItem),l=1;for(;o>=a&&o<=s;){o+=e>0?1:-1;let u=this._menuItems[o];if(!u)break;if(u.visible&&u.enabled){if(l===Math.abs(e))return this._menuItems[o];l+=1}}return e>0?this.lastMenuItem:this.firstMenuItem}getMenuItemColumn(e){this.updateIfDirty();let a=this._menuItems.filter(s=>s.visible&&s.enabled).indexOf(e);return a<0?-1:a%this.columnCount}static get collator(){return Iy._collator||(Iy._collator=new Intl.Collator(void 0,{usage:"search",sensitivity:"base"})),Iy._collator}findMenuItem(e){var a;this.updateIfDirty();let s=this._menuItems.filter(c=>c.type!=="divider"&&c.visible&&c.enabled);if(s.length===0)return null;let o=Math.max(...s.map(c=>c.label.length))-e.length;if(o<0)return null;let l=null,u=0;for(;u<o&&!l;)l=(a=s.find(c=>Iy.collator.compare(e,c.label.substring(u,e.length))===0))!=null?a:null,u++;return l}show(e){return!this.visible||!e.container?!1:(this.updateElement(),e.container.appendChild(this.element),zs()&&(this.element.popover="manual",this.element.showPopover()),e.location&&zp(this.element,{location:e.location,alternateLocation:e.alternateLocation,verticalPos:"bottom",horizontalPos:"start"}),Fp(),this.element.focus({preventScroll:!0}),Vp(),this.parentMenu&&(this.parentMenu.openSubmenu=this),!0)}hide(){var e,a,s,o,l,u;this.openSubmenu=null,this.activeMenuItem=null,this.parentMenu&&(this.parentMenu.openSubmenu=null),!(!((e=this._element)!=null&&e.isConnected)||!this._element.parentElement)&&(zs()&&(a=this._element)!=null&&a.popover&&this._element.hidePopover(),Fp(),(o=(s=this.parentMenu)==null?void 0:s.element)==null||o.focus(),(u=(l=this._element)==null?void 0:l.parentNode)==null||u.removeChild(this._element),Vp())}set openSubmenu(e){var a,s,o,l;let u=e!==null;((a=this.activeMenuItem)==null?void 0:a.type)==="submenu"&&((s=this.activeMenuItem.element)==null||s.setAttribute("aria-expanded",u.toString())),(l=(o=this.activeMenuItem)==null?void 0:o.element)==null||l.classList.toggle("is-submenu-open",u),this.isSubmenuOpen=u}};function Fp(){document.addEventListener("focusin",$r,!0),document.addEventListener("focusout",$r,!0),document.addEventListener("focus",$r,!0),document.addEventListener("blur",$r,!0)}function $r(t){t.stopImmediatePropagation(),t.preventDefault()}function Vp(){document.removeEventListener("focusin",$r,!0),document.removeEventListener("focusout",$r,!0),document.removeEventListener("focus",$r,!0),document.removeEventListener("blur",$r,!0)}var Ss=class Iw extends _n{constructor(e,a){var s;super(e),this.state="closed",this.typingBufferResetTimer=0,this.hysteresisTimer=0,this._updating=!1,this._host=(s=a?.host)!=null?s:null,this.isDynamic=e.some(qp),this._modifiers={shift:!1,control:!1,alt:!1,meta:!1},this.typingBuffer="",this.state="closed"}get modifiers(){return this._modifiers}set modifiers(e){ep(this._modifiers,e)||(this._modifiers=e,this.dirty=!0)}get activeSubmenu(){let e=this;for(;e.isSubmenuOpen;)e=e.activeMenuItem.submenu;return e}set dirty(e){this._updating||this._dirty!==e&&(this._dirty=!0,e&&setTimeout(()=>{this.updateState(this.modifiers),this.updateElement()}))}updateState(e){this._updating=!0,this.modifiers=e??this.modifiers,super.updateState(this.modifiers),this._updating=!1}handleKeyupEvent(e){this.isDynamic&&(this.modifiers=Nt(e)),e.stopImmediatePropagation()}handleKeydownEvent(e){var a,s,o;if(e.key==="Tab"||e.key==="Escape"){this.hide();return}this.isDynamic&&(this.modifiers=Nt(e));let l=!0,u=this.activeSubmenu,c=u.activeMenuItem;switch(e.key){case" ":case"Space":case"Return":case"Enter":c?.select(Nt(e));break;case"ArrowRight":if(c?.type==="submenu")c.select(Nt(e)),this.activeSubmenu.activeMenuItem=this.activeSubmenu.firstMenuItem;else if(!c)u.activeMenuItem=u.firstMenuItem;else{let d=(a=u.getMenuItemColumn(c))!=null?a:-1;if(d>=0&&d<((s=u.columnCount)!=null?s:1)-1){let m=u.nextMenuItem(1);m&&(u.activeMenuItem=m)}}break;case"ArrowLeft":if(u===this.rootMenu)c||(u.activeMenuItem=u.firstMenuItem);else if((c&&(o=u.getMenuItemColumn(c))!=null?o:-1)<=0||!c){u.hide();let d=u.parentMenu.activeMenuItem;if(d){let{element:m}=d;m?.focus(),m?.classList.remove("is-submenu-open")}}else{let d=u.nextMenuItem(-1);d&&(u.activeMenuItem=d)}break;case"ArrowDown":u.activeMenuItem=u.nextMenuItem(u.columnCount);break;case"ArrowUp":u.activeMenuItem=u.nextMenuItem(-u.columnCount);break;case"Home":case"PageUp":u.activeMenuItem=u.firstMenuItem;break;case"End":case"PageDown":u.activeMenuItem=u.lastMenuItem;break;case"Backspace":if(this.typingBuffer&&(this.typingBuffer=this.typingBuffer.slice(0,-1),this.typingBuffer)){clearTimeout(this.typingBufferResetTimer);let d=u.findMenuItem(this.typingBuffer);d&&(u.activeMenuItem=d),this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer=""},500)}break;default:if(Kr(e)){isFinite(this.typingBufferResetTimer)&&clearTimeout(this.typingBufferResetTimer),this.typingBuffer+=e.key;let d=u.findMenuItem(this.typingBuffer);d&&(u.activeMenuItem=d),this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer=""},500)}else l=!1}l&&(e.preventDefault(),e.stopPropagation())}handleEvent(e){if(e.type==="keydown")this.handleKeydownEvent(e);else if(e.type==="keyup")this.handleKeyupEvent(e);else if(e.type==="pointermove")this.lastMoveEvent=e;else if(e.type==="pointerup")Number.isFinite(this.rootMenu._openTimestamp)&&Date.now()-this.rootMenu._openTimestamp<120?this.state="modal":this.state==="modal"&&e.target===this.scrim&&this.hide();else if(e.type==="contextmenu"){e.preventDefault(),e.stopPropagation();return}super.handleEvent(e)}dispatchEvent(e){return this._host?this._host.dispatchEvent(e):!0}get host(){return this._host}get scrim(){return Ae.element}connectScrim(e){let a=this.scrim;a.addEventListener("pointerup",this,!0),a.addEventListener("contextmenu",this),a.addEventListener("keydown",this),a.addEventListener("keyup",this),a.addEventListener("pointermove",this),Ae.open({root:e,onDismiss:()=>this.hide()})}disconnectScrim(){let e=this.scrim;e.removeEventListener("pointerup",this,!0),e.removeEventListener("contextmenu",this),e.removeEventListener("keydown",this),e.removeEventListener("keyup",this),e.removeEventListener("pointermove",this),Ae.state==="open"&&Ae.scrim.close()}get rootMenu(){return this}show(e){return this._onDismiss=e?.onDismiss,e!=null&&e.modifiers&&(this.modifiers=e.modifiers),this.updateState(),this.connectScrim(e?.target),super.show(f(p({},e),{container:this.scrim}))?(this._openTimestamp=Date.now(),this.state="open",!0):(this.disconnectScrim(),!1)}hide(){this.cancelDelayedOperation(),this.state!==void 0&&(this.state!=="closed"&&(this.activeMenuItem=null,Ae.element.parentElement.focus(),super.hide(),this.state="closed",this.disconnectScrim()),this._onDismiss&&(this._onDismiss(),this._onDismiss=void 0))}scheduleOperation(e){this.cancelDelayedOperation();let a=Iw.SUBMENU_DELAY;if(a<=0){e();return}this.hysteresisTimer=setTimeout(()=>{this.hysteresisTimer=0,e()},a)}cancelDelayedOperation(){this.hysteresisTimer&&(clearTimeout(this.hysteresisTimer),this.hysteresisTimer=0)}};Ss.SUBMENU_DELAY=120;var Mo=Ss;function qp(t){return _o(t)?!1:typeof t.label=="function"||typeof t.ariaLabel=="function"||typeof t.tooltip=="function"||(_t(t)||Nr(t))&&(typeof t.enabled=="function"||typeof t.visible=="function")||_t(t)&&typeof t.checked=="function"?!0:Nr(t)?t.submenu.some(qp):!1}var Mn=class{};Mn.DELAY=300,Mn.MAX_DISTANCE=10;function Hp(t){return new Promise((e,a)=>{let s=un(t);s||e(!1);let o=s,l=setTimeout(()=>{u.abort(),e(Ip(o,s)<Mn.MAX_DISTANCE)},Mn.DELAY),u=new AbortController,c=u.signal;for(let d of["pointermove","pointerup","pointercancel"])window.addEventListener(d,m=>{if(m.type==="pointerup"||m.type==="pointercancel")clearTimeout(l),u.abort(),e(!1);else if(m.type==="pointermove"){let g=un(m);g&&(o=g)}},{passive:!0,signal:c})})}async function Sc(t,e,a){if(t.defaultPrevented)return!1;if(t.type==="contextmenu"){let s=t;if(a.show({target:e,location:un(s),modifiers:Nt(s)}))return t.preventDefault(),t.stopPropagation(),!0}if(t.type==="keydown"){let s=t;if(s.code==="ContextMenu"||s.code==="F10"&&s.shiftKey){let o=e?.getBoundingClientRect();if(Wp(e)&&o&&a.show({target:e,location:{x:Math.ceil(o.left+o.width/2),y:Math.ceil(o.top+o.height/2)},modifiers:Nt(s)}))return t.preventDefault(),t.stopPropagation(),!0}}if(t.type==="pointerdown"&&t.pointerType!=="mouse"&&t.button===0){let s=t.target;for(;s&&e!==s;)s=s.parentNode;if(!s||!a.visible)return!1;let o=un(t);if(await Hp(t))return a.state!=="closed"||!Wp(e)?!1:(a.show({target:e,location:o}),!0)}return!1}function Wp(t){return t.dispatchEvent(new Event("contextmenu",{cancelable:!0}))}var Up={acute:714,grave:715,dot:729,ddot:168,dddot:8411,ddddot:8412,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};v(Object.keys(Up),"{body:auto}",{createAtom:t=>new Tr(f(p({},t),{body:C(t.args[0]),accentChar:Up[t.command.slice(1)]}))});v(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:t=>{let e=Ws(C(t.args[0]));return new Tr(f(p({},t),{body:C(t.args[0]),svgAccent:t.command.slice(1)+(e.length>5?"4":["1","1","2","2","3","3"][e.length])}))}});v(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:t=>new Tr(f(p({},t),{body:C(t.args[0]),svgAccent:"overarc"}))});v(["underarc","underparen"],"{body:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),svgBelow:"underarc"}))});v("utilde","{body:auto}",{createAtom:t=>{let e=C(t.args[0]),a=Ws(e),s="widetilde"+(a.length>5?"4":["1","1","2","2","3","3"][a.length]);return new we(f(p({},t),{body:e,svgBelow:s,boxType:Qr(e)}))}});v("^","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t.args[0]])!=null?e:"^"}))}});v("`","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t.args[0]])!=null?e:"`"}))}});v("'","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t.args[0]])!=null?e:"'"}))}});v('"',"{:string}",{createAtom:t=>{var e,a;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(a={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t.args[0]])!=null?a:'"'+t.args[0]:'"'}))}});v(".","{:string}",{createAtom:t=>{var e,a;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(a={a:"",e:"",i:"i",o:"",u:"u",A:"",E:"",I:"",O:"",U:"U"}[t.args[0]])!=null?a:"."+t.args[0]:"."}))}});v("=","{:string}",{createAtom:t=>{var e,a;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(a={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t.args[0]])!=null?a:"="+t.args[0]:"="}))}});v("~","{:string}",{createAtom:t=>{var e;return new b(f(p({type:"mord"},t),{isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={n:"",N:"",a:"",o:"",A:"",O:""}[t.args[0]])!=null?e:""}))}});v("c","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={c:"",C:""}[t.args[0]])!=null?e:""}))}});v("enclose","{notation:string}[style:string]{body:auto}",{createAtom:t=>{var e,a;let s=t.args,o={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"none",svgStrokeStyle:void 0,borderStyle:void 0,style:(e=t.style)!=null?e:{}};if(s[1]){let u=s[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let c of u){let d=c.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(d)o.strokeWidth=d[1],o.strokeStyle=d[2],o.strokeColor=d[3];else{let m=c.match(/\s*([a-z]*)\s*=\s*"(.*)"/);m&&(m[1]==="mathbackground"?o.backgroundcolor=m[2]:m[1]==="mathcolor"?o.strokeColor=m[2]:m[1]==="padding"?o.padding=m[2]:m[1]==="shadow"&&(o.shadow=m[2]))}}o.strokeStyle==="dashed"?o.svgStrokeStyle="5,5":o.strokeStyle==="dotted"&&(o.svgStrokeStyle="1,5")}o.borderStyle=`${o.strokeWidth} ${o.strokeStyle} ${o.strokeColor}`;let l={};return((a=s[0])!=null?a:"").split(/[, ]/).filter(u=>u.length>0).forEach(u=>{l[u.toLowerCase()]=!0}),new tr(t.command,C(s[2]),l,o)}});v("cancel","{body:auto}",{createAtom:t=>{var e;return new tr(t.command,C(t.args[0]),{updiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});v("bcancel","{body:auto}",{createAtom:t=>{var e;return new tr(t.command,C(t.args[0]),{downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});v("xcancel","{body:auto}",{createAtom:t=>{var e;return new tr(t.command,C(t.args[0]),{updiagonalstrike:!0,downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});v(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:t=>{var e;return new we(f(p({},t),{body:C((e=t.args)==null?void 0:e[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgAbove:t.command.slice(1)}))}});v("overbrace","{:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgAbove:t.command.slice(1)}))});v(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgBelow:t.command.slice(1)}))});v(["underbrace"],"{:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgBelow:t.command.slice(1)}))});v(["xrightarrow","longrightarrow","xleftarrow","longleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","longleftrightarrow","xLeftrightarrow","xrightleftharpoons","longrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xleftrightarrows","longleftrightarrows","xRightleftharpoons","longRightleftharpoons","xLeftrightharpoons","longLeftrightharpoons"],"[:auto]{:auto}",{createAtom:t=>{var e,a,s,o,l;return new we(f(p({},t),{svgBody:t.command.slice(1),above:((a=C((e=t.args)==null?void 0:e[1]))==null?void 0:a.length)===0?void 0:C((s=t.args)==null?void 0:s[1]),below:(l=C((o=t.args)==null?void 0:o[0]))!=null?l:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"rel"}))},serialize:(t,e)=>t.command+(t.hasEmptyBranch("below")?"":`[${t.belowToLatex(e)}]`)+`{${t.aboveToLatex(e)}}${t.supsubToLatex(e)}`});v(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","deg","dim","exp","gcd","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,ifMode:"math",createAtom:t=>new gt(t.command.slice(1),f(p({},t),{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up"}))});v(["liminf","limsup"],"",{ifMode:"math",createAtom:t=>new gt({"\\liminf":"lim inf","\\limsup":"lim sup"}[t.command],f(p({},t),{limits:"over-under",variant:"main"}))});v(["lim","mod"],"",{ifMode:"math",createAtom:t=>new gt(t.command.slice(1),f(p({},t),{limits:"over-under",variant:"main"}))});v(["det","max","min"],"",{ifMode:"math",isFunction:!0,createAtom:t=>new gt(t.command.slice(1),f(p({},t),{limits:"over-under",isFunction:!0,variant:"main"}))});v("ang","{:math}",{ifMode:"math",createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>`\\ang{${t.bodyToLatex(e)}}`,render:(t,e)=>{let a=t.createBox(e),s=a.caret;a.caret=void 0;let o=new _("",{style:f(p({},t.style),{variant:"normal",variantStyle:"up"})});return new _([a,o],{type:"inner",isSelected:t.isSelected,caret:s})}});v("sqrt","[index:auto]{radicand:expression}",{ifMode:"math",createAtom:t=>new ln(f(p({},t),{body:C(t.args[1]),index:t.args[0]?C(t.args[0]):void 0}))});v(["frac","dfrac","tfrac","binom","dbinom","tbinom"],"{:expression}{:expression}",{ifMode:"math",createAtom:t=>{let e=p({},t),a=t.command,s=t.args;switch(a){case"\\dfrac":case"\\frac":case"\\tfrac":e.hasBarLine=!0;break;case"\\atopfrac":e.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":e.hasBarLine=!1,e.leftDelim="(",e.rightDelim=")";break;case"\\cfrac":e.hasBarLine=!0,e.continuousFraction=!0;break}switch(a){case"\\dfrac":case"\\dbinom":e.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":e.mathstyleName="textstyle";break}return new pt(s[0]?C(s[0]):[new Le],s[1]?C(s[1]):[new Le],e)},serialize:(t,e)=>{let a=t.aboveToLatex(e),s=t.belowToLatex(e);return/^[0-9]$/.test(a)&&/^[0-9]$/.test(s)?`${t.command}${a}${s}`:q(t.command,a,s)}});v(["cfrac"],"[:string]{:expression}{:expression}",{ifMode:"math",createAtom:t=>{let e=p({},t),a=t.args;return e.hasBarLine=!0,e.continuousFraction=!0,a[0]==="r"&&(e.align="right"),a[0]==="l"&&(e.align="left"),new pt(a[1]?C(a[1]):[new Le],a[2]?C(a[2]):[new Le],e)},serialize:(t,e)=>{let a=t.aboveToLatex(e),s=t.belowToLatex(e);return q(t.command,a,s)}});v(["brace","brack"],"",{infix:!0,createAtom:t=>new pt(C(t.args[0]),C(t.args[1]),f(p({},t),{hasBarLine:!1,leftDelim:t.command==="\\brace"?"\\lbrace":"\\lbrack",rightDelim:t.command==="\\brace"?"\\rbrace":"\\rbrack"})),serialize:(t,e)=>R([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});v(["over","atop","choose"],"",{infix:!0,createAtom:t=>{let e,a,s=t.args;return t.command==="\\choose"&&(e="(",a=")"),new pt(C(s[0]),C(s[1]),f(p({},t),{hasBarLine:t.command==="\\over",leftDelim:e,rightDelim:a}))},serialize:(t,e)=>R([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});v(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:t=>{var e,a;let s=t.args;return new pt(C(s[0]),C(s[1]),f(p({},t),{leftDelim:(e=s[2])!=null?e:".",rightDelim:(a=s[3])!=null?a:".",hasBarLine:!1}))},serialize:(t,e)=>`${t.aboveToLatex(e)} ${t.command}${t.leftDelim}${t.rightDelim}${t.belowToLatex(e)}`});v("pdiff","{numerator}{denominator}",{ifMode:"math",createAtom:t=>new pt(C(t.args[0]),C(t.args[1]),f(p({},t),{hasBarLine:!0,numerPrefix:"",denomPrefix:""})),serialize:(t,e)=>R([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});v(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{ifMode:"math",createAtom:t=>new ai({coprod:"",bigvee:"",bigwedge:"",biguplus:"",bigcap:"",bigcup:"",intop:"",prod:"",sum:"",bigotimes:"",bigoplus:"",bigodot:"",bigsqcup:"",smallint:""}[t.command.slice(1)],f(p({},t),{limits:"auto",variant:"main"}))});v("smallint","",{ifMode:"math",createAtom:t=>new gt("",f(p({},t),{limits:"adjacent",variant:"main"}))});var jp={int:"",iint:"",iiint:"",oint:"",oiint:"",oiiint:"",intclockwise:"",varointclockwise:"",ointctrclockwise:"",intctrclockwise:"",sqcup:"",sqcap:"",uplus:"",wr:"",amalg:"",Cap:"",Cup:"",doublecap:"",doublecup:""};v(Object.keys(jp),"",{ifMode:"math",createAtom:t=>{let e=t.command,a=jp[e.slice(1)];return new ai(a,f(p({},t),{limits:"adjacent",variant:{"":"ams","":"ams"}[a]}))}});v(["Re","Im"],"",{ifMode:"math",createAtom:t=>new gt({"\\Re":"","\\Im":""}[t.command],f(p({},t),{limits:"adjacent",isFunction:!0,variant:"fraktur"}))});v("middle","{:delim}",{ifMode:"math",createAtom:t=>{var e;return new on(f(p({},t),{delim:(e=t.args[0])!=null?e:"|",size:1}))}});v("the","{:value}",{createAtom:t=>new b(f(p({},t),{captureSelection:!0,verbatimLatex:null})),render:(t,e)=>{var a;let s=new O({parent:e},t.style),o="";t.isSelected&&(o+=" ML__selected");let l=s.evaluate(t.args[0]);return new _(((a=be(l))!=null?a:"").split("").map(u=>new _(u,{type:"ord",classes:o,mode:t.mode,isSelected:t.isSelected,style:p({variant:"main"},t.style)})),{type:"lift",style:t.style,caret:t.caret,isSelected:t.isSelected,classes:o}).wrap(s)},serialize:t=>{var e;return`\\the${(e=be(t.args[0]))!=null?e:"\\relax"}`}});v("mathtip","{:auto}{:math}",{createAtom:t=>new si(f(p({},t),{body:C(t.args[0]),tooltip:C(t.args[1]),content:"math"})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\mathtip{${t.bodyToLatex(e)}}{${b.serialize([t.tooltip],f(p({},e),{defaultMode:"math"}))}}`});v("texttip","{:auto}{:text}",{createAtom:t=>new si(f(p({},t),{body:C(t.args[0]),tooltip:C(t.args[1]),content:"text"})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\texttip{${t.bodyToLatex(e)}}{${b.serialize([t.tooltip],f(p({},e),{defaultMode:"text"}))}}`});v("error","{:math}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>`\\error{${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__error"})});v("ensuremath","{:math}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>`${t.command}{${t.bodyToLatex(f(p({},e),{defaultMode:"math"}))}}`});v("color","{:value}",{applyStyle:(t,e,a,s)=>{var o,l;return f(p({},t),{verbatimColor:(o=be(a[0]))!=null?o:void 0,color:s.toColor((l=a[0])!=null?l:{string:"red"})})}});v("textcolor","{:value}{content:auto*}",{applyStyle:(t,e,a,s)=>{var o,l;return f(p({},t),{verbatimColor:(o=be(a[0]))!=null?o:void 0,color:s.toColor((l=a[0])!=null?l:{string:"red"})})}});v("boxed","{content:math}",{createAtom:t=>new nt(f(p({},t),{body:C(t.args[0]),framecolor:{string:"black"}}))});v("colorbox","{:value}{:text*}",{applyStyle:(t,e,a,s)=>{var o,l;return f(p({},t),{verbatimBackgroundColor:(o=be(a[0]))!=null?o:void 0,backgroundColor:s.toBackgroundColor((l=a[0])!=null?l:{string:"yellow"})})}});v("fcolorbox","{frame-color:value}{background-color:value}{content:text}",{applyMode:"text",createAtom:t=>{var e,a;return new nt(f(p({},t),{body:C(t.args[2]),framecolor:(e=t.args[0])!=null?e:{string:"blue"},backgroundcolor:(a=t.args[1])!=null?a:{string:"yellow"}}))},serialize:(t,e)=>{var a,s;return e.skipStyles?t.bodyToLatex(f(p({},e),{defaultMode:"text"})):q(t.command,(a=be(t.framecolor))!=null?a:"",(s=be(t.backgroundcolor))!=null?s:"",t.bodyToLatex(f(p({},e),{defaultMode:"text"})))}});v("bbox","[:bbox]{body:auto}",{createAtom:t=>{var e;let a=t.args[0],s=C(t.args[1]);return a?new nt(f(p({},t),{body:s,padding:a.padding,border:a.border,backgroundcolor:(e=a.backgroundcolor)!=null?e:void 0})):new nt(f(p({},t),{body:s}))},serialize:(t,e)=>{var a,s;if(e.skipStyles)return t.bodyToLatex(e);let o=t.command;if(Number.isFinite(t.padding)||t.border!==void 0||t.backgroundcolor!==void 0){let l=[];t.padding&&l.push((a=be(t.padding))!=null?a:""),t.border&&l.push(`border: ${t.border}`),t.backgroundcolor&&l.push((s=be(t.backgroundcolor))!=null?s:""),o+=`[${l.join(",")}]`}return q(o,t.bodyToLatex(e))}});v(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),render:(t,e)=>{let a=new O({parent:e,mathstyle:t.command.slice(1)},t.style),s=b.createBox(a,t.body,{type:"lift"});return t.caret&&(s.caret=t.caret),t.bind(e,s)},serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`{${R([t.command,t.bodyToLatex(e)])}}`});v(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:(t,e)=>f(p({},t),{fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[e]})});v("fontseries","{:string}",{ifMode:"text",applyStyle:(t,e,a)=>{var s;return f(p({},t),{fontSeries:(s=a[0])!=null?s:"auto"})}});v("fontshape","{:string}",{ifMode:"text",applyStyle:(t,e,a)=>{var s;return f(p({},t),{fontShape:(s=a[0])!=null?s:"auto"})}});v("fontfamily","{:string}",{ifMode:"text",applyStyle:(t,e,a)=>{var s;return f(p({},t),{fontFamily:(s=a[0])!=null?s:"roman"})}});v("selectfont","",{ifMode:"text",applyStyle:t=>t});v("bf","{:rest*}",{applyStyle:t=>f(p({},t),{fontSeries:"b",fontShape:"n",fontFamily:"roman"})});v(["boldsymbol","bm","bold"],"{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variantStyle:"bold"})});v("bfseries","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"b"})});v("mdseries","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"m"})});v("upshape","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"n"})});v("slshape","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sl"})});v("scshape","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sc"})});v("textbf","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"b"})});v("textmd","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"m"})});v("textup","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"n"})});v("textnormal","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"n",fontSeries:"m"})});v("textsl","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sl"})});v("textit","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"it"})});v("textsc","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sc"})});v("textrm","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontFamily:"roman"})});v("textsf","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontFamily:"sans-serif"})});v("texttt","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontFamily:"monospace"})});v("mathbf","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"normal",variantStyle:"bold"})});v("mathit","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"main",variantStyle:"italic"})});v("mathnormal","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"normal",variantStyle:"italic"})});v("mathbfit","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"main",variantStyle:"bolditalic"})});v("mathrm","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"normal",variantStyle:"up"})});v("mathsf","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"sans-serif",variantStyle:"up"})});v("mathtt","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"monospace",variantStyle:"up"})});v("it","{:rest*}",{applyStyle:t=>f(p({},t),{fontSeries:"m",fontShape:"it",fontFamily:"roman",variantStyle:"italic"})});v("rmfamily","{:rest*}",{applyStyle:t=>f(p({},t),{fontFamily:"roman"})});v("sffamily","{:rest*}",{applyStyle:t=>f(p({},t),{fontFamily:"sans-serif"})});v("ttfamily","{:rest*}",{applyStyle:t=>f(p({},t),{fontFamily:"monospace"})});v(["Bbb","mathbb"],"{:math*}",{applyStyle:t=>f(p({},t),{variant:"double-struck",variantStyle:to(t.variantStyle)})});v(["frak","mathfrak"],"{:math*}",{applyStyle:t=>f(p({},t),{variant:"fraktur",variantStyle:to(t.variantStyle)})});v("mathcal","{:math*}",{applyStyle:t=>f(p({},t),{variant:"calligraphic",variantStyle:to(t.variantStyle)})});v("mathscr","{:math*}",{applyStyle:t=>f(p({},t),{variant:"script",variantStyle:to(t.variantStyle)})});v("mbox","{:text}",{ifMode:"math",createAtom:t=>new b(f(p({},t),{type:"mord",body:C(t.args[0]),mode:"math"})),serialize:(t,e)=>q("\\mbox",t.bodyToLatex(f(p({},e),{defaultMode:"text"})))});v("text","{:text}",{ifMode:"math",applyMode:"text"});v(["class","htmlClass"],"{name:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>!t.args[0]||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`,render:(t,e)=>{var a;return t.createBox(e,{classes:(a=t.args[0])!=null?a:""})}});v(["cssId","htmlId"],"{id:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>{var a;return!((a=t.args)!=null&&a[0])||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var a;let s=t.createBox(e);return s.cssId=(a=t.args[0])!=null?a:"",s}});v("htmlData","{data:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>{var a;return!((a=t.args)!=null&&a[0])||e.skipStyles?t.bodyToLatex(e):`\\htmlData{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var a;let s=t.createBox(e);return s.htmlData=(a=t.args[0])!=null?a:"",s}});v(["style","htmlStyle"],"{data:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>{var a;return!((a=t.args)!=null&&a[0])||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var a;let s=t.createBox(e);return s.htmlStyle=(a=t.args[0])!=null?a:"",s}});v("href","{url:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),render:(t,e)=>{var a;let s=t.createBox(e),o=(a=t.args[0])!=null?a:"";return o&&(s.htmlData=`href=${o}`),s}});v("em","{:rest}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`{\\em ${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__emph",boxType:"lift"})});v("emph","{:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\emph{${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__emph",boxType:"lift"})});var Jp={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};v(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:t=>{var e;return new an(f(p({},t),{delim:(e=t.args[0])!=null?e:".",size:Jp[t.command].size,delimType:Jp[t.command].mclass}))}});v(["hspace","hspace*"],"{width:value}",{createAtom:t=>{var e;return new zt(f(p({},t),{width:(e=t.args[0])!=null?e:{dimension:0}}))}});v(["mkern","kern","mskip","hskip","mspace"],"{width:value}",{createAtom:t=>{var e;return new zt(f(p({},t),{width:(e=t.args[0])!=null?e:{dimension:0}}))}});v("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:t=>new b(t),render:(t,e)=>{let a=0,s=e.mathstyle.id;(s===jn||s===wr)&&(a=1),(s===ei||s===Ne)&&(a=2),(s===kr||s===Se)&&(a=3);let o=C(t.args[a]);return b.createBox(e,o)},serialize:(t,e)=>`\\mathchoice{${b.serialize(t.args[0],e)}}{${b.serialize(t.args[1],e)}}{${b.serialize(t.args[2],e)}}{${b.serialize(t.args[3],e)}}`});v("mathop","{:auto}",{createAtom:t=>new b(f(p({},t),{type:"mop",body:C(t.args[0]),limits:"over-under",isFunction:!0,captureSelection:!0})),render:(t,e)=>{var a;let s=b.createBox(e,t.body);if(t.superscript||t.subscript){let o=(a=t.subsupPlacement)!=null?a:"auto";s=o==="over-under"||o==="auto"&&e.isDisplayStyle?t.attachLimits(e,{base:s}):t.attachSupsub(e,{base:s})}return t.caret&&(s.caret=t.caret),new _(t.bind(e,s),{type:"op",isSelected:t.isSelected,classes:"ML__op-group"})},serialize:(t,e)=>{let a=[q(t.command,t.bodyToLatex(e))];return t.explicitSubsupPlacement&&(t.subsupPlacement==="over-under"&&a.push("\\limits"),t.subsupPlacement==="adjacent"&&a.push("\\nolimits"),t.subsupPlacement==="auto"&&a.push("\\displaylimits")),a.push(t.supsubToLatex(e)),R(a)}});v(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:t=>new b(f(p({},t),{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[t.command],body:C(t.args[0])}))});v(["operatorname","operatorname*"],"{operator:math}",{createAtom:t=>{let e=C(t.args[0]).map(a=>{var s;return a.type!=="first"&&(a.type="mord",a.value=(s={"":"*","":"-"}[a.value])!=null?s:a.value,a.isFunction=!1,!a.style.variant&&!a.style.variantStyle&&(a.style.variant="main",a.style.variantStyle="up")),a});return new b(f(p({},t),{type:"mop",body:e,isFunction:!0,limits:t.command==="\\operatorname"?"adjacent":"over-under"}))},render:(t,e)=>{var a;let s=b.createBox(e,t.body);if(t.superscript||t.subscript){let o=(a=t.subsupPlacement)!=null?a:"auto";s=o==="over-under"||o==="auto"&&e.isDisplayStyle?t.attachLimits(e,{base:s}):t.attachSupsub(e,{base:s})}return t.caret&&(s.caret=t.caret),new _(t.bind(e,s),{type:"op",isSelected:t.isSelected,classes:"ML__op-group"})},serialize:(t,e)=>{let a=[q(t.command,t.bodyToLatex(e))];return t.explicitSubsupPlacement&&(t.subsupPlacement==="over-under"&&a.push("\\limits"),t.subsupPlacement==="adjacent"&&a.push("\\nolimits"),t.subsupPlacement==="auto"&&a.push("\\displaylimits")),a.push(t.supsubToLatex(e)),R(a)}});v(["char","unicode"],"{charcode:value}",{createAtom:t=>new b(f(p({},t),{type:t.mode==="text"?"text":"mord"})),serialize:t=>{var e;return`${t.command}${be((e=t.args[0])!=null?e:{number:10067,base:"hexadecimal"})}`},render:(t,e)=>{let a=e.evaluate(t.args[0]);return(!a||!("number"in a))&&(a={number:10067,base:"hexadecimal"}),t.value=String.fromCodePoint(a.number),t.createBox(e)}});v("rule","[raise:value]{width:value}{thickness:value}",{createAtom:t=>new b(t),render:(t,e)=>{var a,s,o;let l=new O({parent:e,mathstyle:"textstyle"},t.style),u=l.toEm((a=t.args[0])!=null?a:{dimension:0}),c=l.toEm((s=t.args[1])!=null?s:{dimension:10}),d=l.toEm((o=t.args[2])!=null?o:{dimension:10}),m=new _(null,{classes:"ML__rule",type:"ord"});return m.width=c,m.height=d+u,m.depth=-u,m.setStyle("border-right-width",c,"em"),m.setStyle("border-top-width",d,"em"),m.setStyle("border-color",t.style.color),m.setStyle("vertical-align",u,"em"),t.isSelected&&m.setStyle("opacity","50%"),t.bind(l,m),t.caret&&(m.caret=t.caret),m.wrap(e)},serialize:t=>`\\rule${t.args[0]?`[${be(t.args[0])}]`:""}{${be(t.args[1])}}{${be(t.args[2])}}`});v(["overline","underline"],"{:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),render:(t,e)=>{let a=t.command.substring(1),s=new O({parent:e,mathstyle:"cramp"},t.style),o=b.createBox(s,t.body);if(!o)return null;let l=s.metrics.defaultRuleThickness/s.scalingFactor,u=new _(null,{classes:a+"-line"});u.height=l,u.maxFontSize=l*1.125*s.scalingFactor;let c;return a==="overline"?c=new Q({shift:0,children:[{box:o},3*l,{box:u},l]}):c=new Q({top:o.height,children:[l,{box:u},3*l,{box:o}]}),t.caret&&(c.caret=t.caret),new _(c,{classes:a,type:"ignore"})}});v("overset","{:auto}{base:auto}",{createAtom:t=>{let e=C(t.args[1]);return new we(f(p({},t),{above:C(t.args[0]),body:e,skipBoundary:!1,boxType:Qr(e)}))},serialize:(t,e)=>q(t.command,t.aboveToLatex(e),t.bodyToLatex(e))});v("underset","{:auto}{base:auto}",{createAtom:t=>{let e=C(t.args[1]);return new we(f(p({},t),{below:C(t.args[0]),body:e,skipBoundary:!1,boxType:Qr(e)}))},serialize:(t,e)=>q(t.command,t.belowToLatex(e),t.bodyToLatex(e))});v("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:t=>{let e=C(t.args[2]);return new we(f(p({},t),{above:C(t.args[0]),below:C(t.args[1]),body:e,skipBoundary:!1,boxType:Qr(e)}))},serialize:(t,e)=>q(t.command,t.belowToLatex(e),t.bodyToLatex(e))});v(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[2]),above:C(t.args[1]),below:C(t.args[0]),skipBoundary:!1,boxType:t.command==="\\stackrel"?"rel":"bin"})),serialize:(t,e)=>q(t.command,t.aboveToLatex(e),t.bodyToLatex(e))});v("smash","[:string]{:auto}",{createAtom:t=>{var e,a,s,o;return new Pt(f(p({},t),{body:C(t.args[1]),smashHeight:(a=(e=t.args[0])==null?void 0:e.includes("t"))!=null?a:!0,smashDepth:(o=(s=t.args[0])==null?void 0:s.includes("b"))!=null?o:!0}))}});v("vphantom","{:auto}",{createAtom:t=>new Pt(f(p({},t),{body:C(t.args[0]),isInvisible:!0,smashWidth:!0}))});v("hphantom","{:auto}",{createAtom:t=>new Pt(f(p({},t),{body:C(t.args[0]),isInvisible:!0,smashHeight:!0,smashDepth:!0}))});v("phantom","{:auto}",{createAtom:t=>new Pt(f(p({},t),{body:C(t.args[0]),isInvisible:!0}))});v("mathstrut","",{createAtom:t=>new Pt(f(p({},t),{body:[new b({value:"("})],isInvisible:!0}))});v("not","{:math}",{createAtom:t=>{let e=C(t.args[0]);return e.length===0?new b(f(p({},t),{type:"mrel",value:""})):new b(f(p({},t),{body:[new ht(f(p({},t),{body:"",align:"right"})),...e],captureSelection:!0}))},serialize:(t,e)=>{let a=t.args[0],s=a&&typeof a=="object"&&"group"in a;return t.value!==""?s?`\\not{${b.serialize(a.group,e)}}`:`\\not${b.serialize(a,e)}`:s?"\\not{}":"\\not"},render:(t,e)=>{if(t.value)return t.createBox(e);let a=t.args[0]&&typeof t.args[0]=="object"&&"group"in t.args[0]?"ord":Qr(C(t.args[0])),s=b.createBox(e,t.body,{type:a});return t.caret&&(s.caret=t.caret),t.bind(e,s)}});v(["ne","neq"],"",{createAtom:t=>new b(f(p({},t),{type:"mrel",body:[new ht(f(p({},t),{body:"",align:"right",boxType:"rel"})),new b(f(p({},t),{value:"="}))],captureSelection:!0})),serialize:t=>t.command});v("rlap","{:auto}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"right"}))});v("llap","{:auto}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"left"}))});v("mathrlap","{:math}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"right"}))});v("mathllap","{:math}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"left"}))});v("raisebox","{:value}{:text}",{createAtom:t=>{var e;return new nt(f(p({},t),{body:C(t.args[1]),padding:{dimension:0},offset:(e=t.args[0])!=null?e:{dimension:0}}))},serialize:(t,e)=>{var a;return q("\\raisebox",(a=be(t.offset))!=null?a:"0pt",t.bodyToLatex(e))}});v("raise","{:value}{:auto}",{createAtom:t=>{var e;return new nt(f(p({},t),{body:C(t.args[1]),padding:{dimension:0},offset:(e=t.args[0])!=null?e:{dimension:0}}))},serialize:(t,e)=>{var a;return q("\\raise",(a=be(t.offset))!=null?a:"0pt",t.bodyToLatex(e))}});v("lower","{:value}{:auto}",{createAtom:t=>{var e;return new nt(f(p({},t),{body:C(t.args[1]),padding:{dimension:0},offset:(e=dt(t.args[0],-1))!=null?e:{dimension:0}}))},serialize:(t,e)=>{var a,s;return q("\\lower",(s=be(dt((a=t.offset)!=null?a:{dimension:0},-1)))!=null?s:"0pt",t.bodyToLatex(e))}});ye("0123456789/@.?!");Hs(65,90);Hs(97,122);ye([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]);ye([["\\#",35],["\\&",38],["\\parallelogram",9649],["\\spadesuit",9824],["\\heartsuit",9825],["\\diamondsuit",9826],["\\clubsuit",9827],["\\flat",9837],["\\natural",9838],["\\sharp",9839]]);ye([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\pounds",163],["\\euro",8364]]);ye([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel");ye([["\\mapsfrom",8612,"mrel"],["\\Mapsfrom",10502,"mrel"],["\\MapsTo",10503,"mrel"],["\\Yup",8516,"mord"],["\\lightning",8623,"mrel"],["\\leftarrowtriangle",8701,"mrel"],["\\rightarrowtriangle",8702,"mrel"],["\\leftrightarrowtriangle",8703,"mrel"],["\\boxdot",8865,"mbin"],["\\bigtriangleup",9651,"mbin"],["\\bigtriangledown",9661,"mbin"],["\\boxbar",9707,"mbin"],["\\Lbag",10181,"mopen"],["\\Rbag",10182,"mclose"],["\\llbracket",10214,"mopen"],["\\rrbracket",10215,"mclose"],["\\longmapsfrom",10235,"mrel"],["\\Longmapsfrom",10237,"mrel"],["\\Longmapsto",10238,"mrel"],["\\boxslash",10692,"mbin"],["\\boxbslash",10693,"mbin"],["\\boxast",10694,"mbin"],["\\boxcircle",10695,"mbin"],["\\boxbox",10696,"mbin"],["\\fatsemi",10783,"mop"],["\\leftslice",10918,"mrel"],["\\rightslice",10919,"mrel"],["\\interleave",10996,"mbin"],["\\biginterleave",11004,"mop"],["\\sslash",11005,"mbin"],["\\talloblong",11006,"mbin"]]);ye([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]);ye([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\twoheadrightarrowtail",10518],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nleftarrow",8602],["\\nrightarrow",8603],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\nvrightarrow",8696],["\\nvtwoheadrightarrow",10496],["\\nvrightarrowtail",10516],["\\nvtwoheadrightarrowtail",10519],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams");ye([["+",43],["-",8722],["",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin");ye([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams");ye([["\\surd",8730],["\\S",167],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\varkappa",1008,"mord","ams"],["\\coppa",985,"mord","ams"],["\\koppa",985,"mord","ams"],["\\Coppa",984,"mord","ams"],["\\Koppa",984,"mord","ams"],["\\sampi",993,"mord","ams"],["\\Sampi",992,"mord","ams"],["\\emptyset",8709]]);ye([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\coloneqq",8788],["\\colonequals",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",10178],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel");ye([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams");ye([["\\wp",8472],["\\aleph",8501]]);ye([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams");ye([["\\ ",160],["~",160]],"space");v(["!",",",":",";",">","enskip","enspace","quad","qquad"],"",{createAtom:t=>new zt(t)});v("space","",{createAtom:t=>new zt(t)});ye([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct");ye([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner");ye([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);var Gp="<mo>&#x2061;</mo>",As="<mo>&#8290;</mo>";function Ls(t){return t.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ee(t,e){return!t||!e.generateID?"":` extid="${t}"`}function tb(t,e,a){var s,o,l,u,c,d,m,g;let A=!1;e=e??t.atoms.length;let P="",W="",me=t.atoms[t.index],ve=(s=me.style)==null?void 0:s.variant,He=(o=me.style)==null?void 0:o.variantStyle,De="";if(me.value&&(ve||He)){let qe=(l=Cn(me.value,ve,He))!=null?l:me.value;if(qe!==me.value)return t.index+=1,P=`<mi${ee(me.id,a)}>${qe}</mi>`,qt(P,t,a)||(t.mathML+=P,t.lastType="mi"),!0;De=(u={upnormal:"normal",boldnormal:"bold",italicmain:"italic",bolditalicmain:"bold-italic","updouble-struck":"double-struck","double-struck":"double-struck",boldfraktur:"bold-fraktur",calligraphic:"script",upcalligraphic:"script",script:"script",boldscript:"bold-script",boldcalligraphic:"bold-script",fraktur:"fraktur","upsans-serif":"sans-serif","boldsans-serif":"bold-sans-serif","italicsans-serif":"sans-serif-italic","bolditalicsans-serif":"sans-serif-bold-italic",monospace:"monospace"}[(He??"")+(ve??"")])!=null?u:"",De&&(De=` mathvariant="${De}"`)}let Xe={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"","\\cdotp":"","\\ldots":"","\\cdots":"","\\ddots":"","\\vdots":"","\\ldotp":"."};if(me.command==="!")return t.index+=1,P="<mo>!</mo>",qt(P,t,a)||(t.mathML+=P,t.lastType="mo"),!0;if(Xe[me.command]){t.index+=1;let qe=`<mi${ee(me.id,a)}${De}>${Xe[me.command]}</mi>`;return(t.lastType==="mi"||t.lastType==="mn"||t.lastType==="mtext"||t.lastType==="fence")&&(qe=As+qe),qt(qe,t,a)||(t.mathML+=qe,t.lastType="mi"),!0}if(me.command==="\\operatorname")W=wn(me.body),t.index+=1;else if(ve||He)for(;t.index<e&&(me.type==="mord"||me.type==="macro")&&!me.isDigit()&&ve===((d=(c=me.style)==null?void 0:c.variant)!=null?d:"")&&He===((g=(m=me.style)==null?void 0:m.variantStyle)!=null?g:"");)W+=wn([me]),t.index+=1,me=t.atoms[t.index];else(me.type==="mord"||me.type==="macro")&&!me.isDigit()&&(W+=wn([me]),t.index+=1);if(W.length>0){A=!0,P=`<mi${De}>${W}</mi>`;let qe=t.lastType;P.endsWith(">f</mi>")||P.endsWith(">g</mi>")?(P+=Gp,t.lastType="applyfunction"):t.lastType=/^<mo>(.*)<\/mo>$/.test(P)?"mo":"mi",qt(P,t,a)||((qe==="mi"||qe==="mn"||qe==="mtext"||qe==="fence")&&(P=As+P),t.mathML+=P)}return A}function Xp(t){return t.index<t.atoms.length&&t.atoms[t.index].superscript&&t.atoms[t.index].type==="subsup"}function Zp(t){let e=-1,a=t.index,s=!1,o=!1;for(;a<t.atoms.length&&!s&&!o;){let l=t.atoms[a];s=!l.isDigit(),o=!s&&l.superscript!==void 0,a++}return o&&(e=a-1),e}function qt(t,e,a){var s;let o=e.atoms[e.index-1];if(!o)return!1;if(!o.superscript&&!o.subscript)if(((s=e.atoms[e.index])==null?void 0:s.type)==="subsup")o=e.atoms[e.index],e.index+=1;else return!1;let l=e.lastType;e.lastType="";let u=H(o.superscript,a);e.lastType="";let c=H(o.subscript,a);if(e.lastType=l,!u&&!c)return!1;let d="";return u&&c?d=`<msubsup>${t}${c}${u}</msubsup>`:u?d=`<msup>${t}${u}</msup>`:c&&(d=`<msub>${t}${c}</msub>`),e.mathML+=d,e.lastType="",!0}function rb(t,e,a){e=e??t.atoms.length;let s=t.index,o="",l=Zp(t);for(l>=0&&l<e&&(e=l);t.index<e&&t.atoms[t.index].mode==="text";)o+=t.atoms[t.index].value?t.atoms[t.index].value:" ",t.index+=1;return o.length>0?(o=`<mtext ${ee(t.atoms[s].id,a)}>${o}</mtext>`,l<0&&Xp(t)&&(l=t.index,t.index+=1),qt(o,t,a)||(t.mathML+=o,t.lastType="mtext"),!0):!1}function ib(t,e,a){e=e??t.atoms.length;let s=t.index,o="",l=Zp(t);for(l>=0&&l<e&&(e=l);t.index<e&&t.atoms[t.index].isDigit();)o+=t.atoms[t.index].asDigit(),t.index+=1;return o.length<=0?!1:(o="<mn"+ee(t.atoms[s].id,a)+">"+o+"</mn>",l<0&&Xp(t)&&(l=t.index,t.index+=1),qt(o,t,a)||(t.mathML+=o,t.lastType="mn"),!0)}function nb(t,e,a){let s=!1;e=e??t.atoms.length;let o="",l="";if(t.index<e&&t.atoms[t.index].type==="mopen"){let u=!1,c=0,d=t.index,m=-1,g=d+1;for(;g<e&&!u;)t.atoms[g].type==="mopen"?c+=1:t.atoms[g].type==="mclose"&&(c-=1),c===-1&&(u=!0,m=g),g+=1;u&&(o="<mrow>",o+=_i(t.atoms[d],a),o+=H(t.atoms,a,d+1,m),o+=_i(t.atoms[m],a),o+="</mrow>",t.index=m+1,(t.lastType==="mi"||t.lastType==="mn"||t.lastType==="mfrac"||t.lastType==="fence")&&(t.mathML+=As),qt(o,t,a)&&(s=!0,t.lastType="",o=""),l="fence")}return o.length>0&&(s=!0,t.mathML+=o,t.lastType=l),s}function ob(t,e,a){let s=!1;e=e??t.atoms.length;let o="",l="",u=t.atoms[t.index];if(!u)return!1;let c={"\\ne":"&ne;","\\neq":"&ne;","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"","\\mid":"","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lbrack":"[","\\rbrack":"]","\\lparen":"(","\\rparen":")","\\langle":"","\\rangle":"","\\lfloor":"","\\rfloor":"","\\lceil":"","\\rceil":""};if(c[u.command]){t.index+=1;let d=`<mo${ee(u.id,a)}>${c[u.command]}</mo>`;return qt(d,t,a)||(t.mathML+=d,t.lastType="mo"),!0}if(t.index<e&&(u.type==="mbin"||u.type==="mrel"))o+=Lc(t.atoms[t.index],a),t.index+=1,l="mo";else if(t.index<e&&(u.type==="mop"||u.type==="operator"||u.type==="extensible-symbol")){if(u.subsupPlacement==="over-under"&&(u.superscript||u.subscript)){let d=_i(u,a);return u.superscript&&u.subscript?(o+="<munderover>"+d,o+=H(u.subscript,a),o+=H(u.superscript,a),o+="</munderover>"):u.superscript?(o+="<mover>"+d,o+=H(u.superscript,a),o+="</mover>"):u.subscript&&(o+="<munder>"+d,o+=H(u.subscript,a),o+="</munder>"),t.mathML+=o,t.lastType="mo",t.index+=1,!0}{let d=t.atoms[t.index],m=d.value==="\\operatorname",g=m?'<mi class="MathML-Unit"'+ee(d.id,a)+">"+wn(d.value)+"</mi>":_i(d,a);o+=g,!m&&!/^<mo>(.*)<\/mo>$/.test(g)?(o+=Gp,l="applyfunction"):l=m?"mi":"mo"}(t.lastType==="mi"||t.lastType==="mn")&&!/^<mo>(.*)<\/mo>$/.test(o)&&(o=As+o),t.index+=1}return o.length>0&&(s=!0,qt(o,t,a)||(t.mathML+=o,t.lastType=l)),s}function H(t,e,a,s){e!=null||(e={});let o={atoms:[],index:a??0,mathML:"",lastType:""};if(typeof t=="number"||typeof t=="boolean")o.mathML=t.toString();else if(typeof t=="string")o.mathML=t;else if(t instanceof b)o.mathML=Lc(t,e);else if(Array.isArray(t)){o.atoms=t;let l=0;for(s=s||(t?t.length:0);o.index<s;)if(rb(o,s,e)||ib(o,s,e)||tb(o,s,e)||ob(o,s,e)||nb(o,s,e))l+=1;else if(o.index<s){let u=Lc(o.atoms[o.index],e);o.lastType==="mn"&&u.length>0&&o.atoms[o.index].type==="genfrac"&&(u="<mo>&#x2064;</mo>"+u),o.atoms[o.index].type==="genfrac"?o.lastType="mfrac":o.lastType="",o.index+=1,qt(u,o,e)?l+=1:u.length>0&&(o.mathML+=u,l+=1)}l>1&&(o.mathML="<mrow>"+o.mathML+"</mrow>")}return o.mathML}function _i(t,e){let a="",s=wn(t.value);return s&&(a="<mo"+ee(t.id,e)+">"+s+"</mo>"),a}function wn(t){if(!t)return"";if(typeof t=="string")return Ls(t);if(!Array.isArray(t)&&typeof t.body=="string")return Ls(t.body);let e="";for(let a of t)typeof a.value=="string"&&(e+=a.value);return Ls(e)}function Lc(t,e){var a,s,o,l,u,c,d,m,g,A,P,W,me,ve,He,De,Xe,qe,Rs,Vc,So,Do,eh;if(t.mode==="text")return`<mi${ee(t.id,e)}>${t.value}</mi>`;let Ko={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",longleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",longrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",longrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xleftrightarrows:"",xRightleftharpoons:"",longRightleftharpoons:"",xLeftrightharpoons:"",longLeftrightharpoons:""},Ge={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\>":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5},An="",wt="",Bs,yh,df,Fc,_h,qc,{command:Mh}=t;if(t.command==="\\error")return`<merror${ee(t.id,e)}>${H(t.body,e)}</merror>`;let cf={"\\vert":"|","\\Vert":"","\\mid":"","\\lbrack":"[","\\rbrack":"]","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"","\\rangle":"","\\lfloor":"","\\rfloor":"","\\lceil":"","\\rceil":""},mf={"\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};switch(t.type){case"first":break;case"group":case"root":An=H(t.body,e);break;case"array":let a1=t;if((a1.leftDelim&&a1.leftDelim!=="."||a1.rightDelim&&a1.rightDelim!==".")&&(An+="<mrow>",a1.leftDelim&&a1.leftDelim!=="."&&(An+=`<mo>${cf[a1.leftDelim]||a1.leftDelim}</mo>`)),An+="<mtable",a1.colFormat){for(An+=' columnalign="',df=0;df<a1.colFormat.length;df++){let b2=a1.colFormat[df];"align"in b2&&(An+={l:"left",c:"center",r:"right"}[b2.align]+" ")}An+='"'}for(An+=">",yh=0;yh<a1.rows.length;yh++){for(An+="<mtr>",Bs=0;Bs<a1.rows[yh].length;Bs++)An+="<mtd>"+H(a1.rows[yh][Bs],e)+"</mtd>";An+="</mtr>"}An+="</mtable>",(a1.leftDelim&&a1.leftDelim!=="."||a1.rightDelim&&a1.rightDelim!==".")&&(a1.rightDelim&&a1.rightDelim!=="."&&(An+=`'<mo>${cf[a1.rightDelim]||a1.rightDelim}</mo>`),An+="</mrow>");break;case"genfrac":let s1=t;(s1.leftDelim||s1.rightDelim)&&(An+="<mrow>"),s1.leftDelim&&s1.leftDelim!=="."&&(An+="<mo"+ee(t.id,e)+">"+(cf[s1.leftDelim]||s1.leftDelim)+"</mo>"),s1.hasBarLine?(An+="<mfrac>",An+=H(t.above,e)||"<mi>&nbsp;</mi>",An+=H(t.below,e)||"<mi>&nbsp;</mi>",An+="</mfrac>"):(An+="<mtable"+ee(t.id,e)+">",An+="<mtr>"+H(t.above,e)+"</mtr>",An+="<mtr>"+H(t.below,e)+"</mtr>",An+="</mtable>"),s1.rightDelim&&s1.rightDelim!=="."&&(An+="<mo"+ee(t.id,e)+">"+(cf[s1.rightDelim]||s1.rightDelim)+"</mo>"),(s1.leftDelim||s1.rightDelim)&&(An+="</mrow>");break;case"surd":t.hasEmptyBranch("above")?(An+="<msqrt"+ee(t.id,e)+">",An+=H(t.body,e),An+="</msqrt>"):(An+="<mroot"+ee(t.id,e)+">",An+=H(t.body,e),An+=H(t.above,e),An+="</mroot>");break;case"leftright":let E1=t,T1=E1.leftDelim;An="<mrow>",T1&&T1!=="."&&(An+=`<mo${ee(t.id,e)}>${(a=cf[T1])!=null?a:T1}</mo>`),t.body&&(An+=H(t.body,e));let z1=E1.matchingRightDelim();z1&&z1!=="."&&(An+=`<mo${ee(t.id,e)}>${(s=cf[z1])!=null?s:z1}</mo>`),An+="</mrow>";break;case"sizeddelim":case"delim":An+=`<mo${ee(t.id,e)}>${cf[t.value]||t.value}</mo>`;break;case"accent":let W1=t;An+='<mover accent="true"'+ee(t.id,e)+">",An+=H(t.body,e),An+="<mo>"+(mf[Mh]||W1.accent)+"</mo>",An+="</mover>";break;case"line":case"overlap":break;case"overunder":let m2=t;_h=t.above,Fc=t.below,(m2.svgAbove||_h)&&(m2.svgBelow||Fc)?qc=t.body:_h&&_h.length>0?(qc=t.body,(l=(o=t.body)==null?void 0:o[0])!=null&&l.below?(Fc=t.body[0].below,qc=t.body[0].body):((c=(u=t.body)==null?void 0:u[0])==null?void 0:c.type)==="first"&&(m=(d=t.body)==null?void 0:d[1])!=null&&m.below&&(Fc=t.body[1].below,qc=t.body[1].body)):Fc&&Fc.length>0&&(qc=t.body,(A=(g=t.body)==null?void 0:g[0])!=null&&A.above?(_h=t.body[0].above,qc=t.body[0].body):((W=(P=t.body)==null?void 0:P[0])==null?void 0:W.type)==="first"&&(ve=(me=t.body)==null?void 0:me[1])!=null&&ve.above&&(_h=t.body[1].above,qc=t.body[1].body)),(m2.svgAbove||_h)&&(m2.svgBelow||Fc)?(An+=`<munderover ${ee(t.id,e)}>`,An+=(He=Ko[m2.svgBody])!=null?He:H(qc,e),An+=(De=Ko[m2.svgBelow])!=null?De:H(Fc,e),An+=(Xe=Ko[m2.svgAbove])!=null?Xe:H(_h,e),An+="</munderover>"):m2.svgAbove||_h?(An+=`<mover ${ee(t.id,e)}>`+((qe=Ko[m2.svgBody])!=null?qe:H(qc,e)),An+=(Rs=Ko[m2.svgAbove])!=null?Rs:H(_h,e),An+="</mover>"):(m2.svgBelow||Fc)&&(An+=`<munder ${ee(t.id,e)}>`+((Vc=Ko[m2.svgBody])!=null?Vc:H(qc,e)),An+=(So=Ko[m2.svgBelow])!=null?So:H(Fc,e),An+="</munder>");break;case"placeholder":An+="?";break;case"mord":{if(An=typeof t.value=="string"?t.value:Mh,An.length>0&&An.startsWith("\\"))typeof t.value=="string"&&t.value.charCodeAt(0)>255?An="&#x"+("000000"+t.value.charCodeAt(0).toString(16)).slice(-4)+";":typeof t.value=="string"&&(An=t.value.charAt(0));else if(t.command==="\\char"){let _2=(Do=t.args)==null?void 0:Do[0];if(_2!==void 0&&"number"in _2){let q1=_2.number;typeof q1=="number"&&(An="&#x"+("000000"+q1.toString(16)).slice(-4)+";")}}else typeof t.value=="string"?An=t.value:(console.error("Did not expect this"),An="");let b2=/\d/.test(An)?"mn":"mi";An=`<${b2}${ee(t.id,e)}>${Ls(An)}</${b2}>`;break}case"mbin":case"mrel":case"minner":An=_i(t,e);break;case"mpunct":An='<mo separator="true"'+ee(t.id,e)+">"+Mh+"</mo>";break;case"mop":case"operator":case"extensible-symbol":t.value!==""&&(An="<mo"+ee(t.id,e)+">",An+=Mh==="\\operatorname"?t.body:Mh||t.body,An+="</mo>");break;case"box":let C2=t;An='<menclose notation="box"',C2.backgroundcolor&&(An+=' mathbackground="'+C2.backgroundcolor+'"'),An+=ee(t.id,e)+">"+H(t.body,e)+"</menclose>";break;case"spacing":An+='<mspace width="'+((eh=Ge[Mh])!=null?eh:0)+'em"/>';break;case"enclose":let A2=t;An='<menclose notation="';for(let b2 in A2.notation)Object.prototype.hasOwnProperty.call(A2.notation,b2)&&A2.notation[b2]&&(An+=wt+b2,wt=" ");An+=ee(t.id,e)+'">'+H(t.body,e)+"</menclose>";break;case"prompt":An='<menclose notation="roundexbox""">'+H(t.body,e)+"</menclose>";break;case"space":An+="&nbsp;";break;case"subsup":break;case"phantom":break;case"composition":break;case"rule":break;case"chem":break;case"mopen":An+=_i(t,e);break;case"mclose":An+=_i(t,e);break;case"macro":{let b2=t.command+wn(t.macroArgs);b2&&(An+=`<mo ${ee(t.id,e)}>${b2}</mo>`)}break;case"latexgroup":An+=H(t.body,e);break;case"latex":An+="<mtext"+ee(t.id,e)+">"+t.value+"</mtext>";break;case"tooltip":An+=H(t.body,e);break;case"text":An+=`<mtext ${ee(t.id,e)}x>${t.value}</mtext>`;break;default:if(t.command==="\\displaystyle")return`<mrow ${ee(t.id,e)} displaystyle="true">${H(t.body,e)}</mrow>`;if(t.command==="\\textstyle")return`<mrow ${ee(t.id,e)} displaystyle="false">${H(t.body,e)}</mrow>`;console.info("Unexpected element in conversion to MathML:",t)}return An}var kn={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"imaginary eye ","\\imaginaryJ":"imaginary jay ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\pm":"plus or minus","\\mp":"minus or plus","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","\\ne":"is not equal to ","\\neq":"is not equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","":"","":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},Ac={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function ab(t){let e="";return t.startsWith("\\")&&(e=" "+t.replace("\\","")+" "),e}function wo(t){let e=0;if(Y(t))for(let a of t)a.type!=="first"&&(e+=1);return e===1}function sb(t){if(Y(t)){for(let e of t)if(e.type!=="first"&&e.id)return e.id.toString()}return""}function Yp(t){let e="";if(Y(t))for(let a of t)a.type!=="first"&&typeof a.value=="string"&&(e+=a.value);return e}function lb(t){return t?t.map(e=>e.value).join(""):""}function Cs(t){if(t&&!t.some(e=>e.type!=="first"&&e.value===void 0))return t.map(e=>e.value).join("")}function Cc(t){return`<emphasis>${t}</emphasis>`}function cb(t,e){var a;let s="",o=!1,l=!1;for(let u=0;u<e.length;u++)e[u].type!=="first"&&(e[u].mode!=="text"&&(l=!1),u<e.length-2&&e[u].type==="mopen"&&e[u+2].type==="mclose"&&e[u+1].type==="mord"?(s+=" of ",s+=Cc($(t,e[u+1])),u+=2):e[u].mode==="text"?l?s+=(a=e[u].value)!=null?a:" ":(l=!0,s+=$("text",e[u])):e[u].isDigit()?o?s+=e[u].asDigit():(o=!0,s+=$(t,e[u])):(o=!1,s+=$(t,e[u])));return s}function $(t,e){var a,s,o,l,u,c,d,m;function g(De){return globalThis.MathfieldElement.textToSpeechMarkup?/[a-z]/.test(De)?` <say-as interpret-as="character">${De}</say-as>`:/[A-Z]/.test(De)?`capital <say-as interpret-as="character">${De.toLowerCase()}</say-as>`:De:/[a-z]/.test(De)?" '"+De.toUpperCase()+"'":/[A-Z]/.test(De)?" 'capital "+De.toUpperCase()+"'":De}if(!e)return"";if(Y(e))return cb(t,e);let A="";if(e.id&&t==="math"&&(A+='<mark name="'+e.id.toString()+'"/>'),e.mode==="text")return A+e.value;let P="",W="",me="",ve=!1,{command:He}=e;switch(He){case"\\vec":return"vector "+$(t,e.body);case"\\acute":return $(t,e.body)+" acute";case"\\grave":return $(t,e.body)+" grave";case"\\dot":return"dot over"+$(t,e.body);case"\\ddot":return"double dot over"+$(t,e.body);case"\\mathring":return"ring over"+$(t,e.body);case"\\tilde":case"\\widetilde":return"tilde over"+$(t,e.body);case"\\bar":return $(t,e.body)+" bar";case"\\breve":return $(t,e.body)+" breve";case"\\check":case"\\widecheck":return"check over "+$(t,e.body);case"\\hat":case"\\widehat":return"hat over"+$(t,e.body);case"\\overarc":case"\\overparen":case"\\wideparen":return"arc over "+$(t,e.body);case"\\underarc":case"\\underparen":return"arc under "+$(t,e.body);case"\\mathop":return(a=Cs(e.body))!=null?a:$(t,e.body);case"\\mathit":return(s=Cs(e.body))!=null?s:$(t,e.body);case"\\mathrm":return(o=Cs(e.body))!=null?o:$(t,e.body);case"\\mathbb":return"blackboard"+((l=Cs(e.body))!=null?l:$(t,e.body))}switch(e.type){case"prompt":let De=e.body.length>1?'start input . <break time="500ms"/> '+$(t,e.body)+'. <break time="500ms"/> end input':"blank";A+=' <break time="300ms"/> '+De+'. <break time="700ms"/>'+((u=e.correctness)!=null?u:"")+' . <break time="700ms"/> ';break;case"array":let Xe=e.rows,qe=e.environmentName;if(Object.keys(Ac).includes(qe)){A+=` begin ${Ac[qe]} `;for(let So=0;So<Xe.length;So++){So>0&&(A+=","),A+=` row ${So+1} `;for(let Do=0;Do<Xe[So].length;Do++)Do>0&&(A+=","),A+=` column ${Do+1}: `,A+=$("math",Xe[So][Do])}A+=` end ${Ac[qe]} `}break;case"group":He==="\\ne"?A+=" not equal ":(He==="\\not"&&(A+=" not "),A+=$("math",e.body));break;case"root":A+=$("math",e.body);break;case"genfrac":if(P=$("math",e.above),W=$("math",e.below),wo(e.above)&&wo(e.below)){let So={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[Yp(e.above)+"/"+Yp(e.below)];So?A=So:A+=P+" over "+W}else A+=' the fraction <break time="150ms"/>'+P+' over <break time="150ms"/>'+W+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(me=$("math",e.body),e.hasEmptyBranch("above"))A+=wo(e.body)?" the square root of "+me+" , ":' the square root of <break time="200ms"/>'+me+'. <break time="200ms"/> End square root';else{let So=$("math",e.above);So=So.trim();let Do=So.replace(/<mark([^/]*)\/>/g,"");Do==="3"?A+=' the cube root of <break time="200ms"/>'+me+'. <break time="200ms"/> End cube root':Do==="n"?A+=' the nth root of <break time="200ms"/>'+me+'. <break time="200ms"/> End root':A+=' the root with index: <break time="200ms"/>'+So+', of <break time="200ms"/>'+me+'. <break time="200ms"/> End root'}break;case"leftright":{let So=e;A+=(c=So.leftDelim?kn[So.leftDelim]:void 0)!=null?c:So.leftDelim,A+=$("math",e.body),A+=(d=So.rightDelim?kn[So.rightDelim]:void 0)!=null?d:So.rightDelim}break;case"rule":break;case"overunder":break;case"overlap":break;case"macro":let Rs=He.replace(/^\\/g,""),Vc=Ei()[Rs];Vc&&(Vc!=null&&Vc.expand?A+=$("math",e.body):A+=`${Rs} `);break;case"placeholder":A+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if(He==="\\mathbin"||He==="\\mathrel"||He==="\\mathopen"||He==="\\mathclose"||He==="\\mathpunct"||He==="\\mathord"||He==="\\mathinner"){A=$(t,e.body);break}let So=e.isDigit()?e.asDigit():e.value,Do=e.command;if((e.type==="delim"||e.type==="sizeddelim")&&(Do=e.value,So=Do),t==="text")A+=So;else{if(e.type==="mbin"&&(A+='<break time="150ms"/>'),So){let eh=kn[So]||(Do?kn[Do.trim()]:"");if(eh)A+=" "+eh;else{let Ko=Do?ab(Do.trim()):"";A+=Ko||g(So)}}else A+=$("math",e.body);e.type==="mbin"&&(A+='<break time="150ms"/>')}break}case"mop":case"operator":case"extensible-symbol":if(e.value!==""){let So=e.command;if(So==="\\sum")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let Do=$("math",e.superscript);Do=Do.trim();let eh=$("math",e.subscript);eh=eh.trim(),A+=' the summation from <break time="200ms"/>'+eh+'<break time="200ms"/> to  <break time="200ms"/>'+Do+'<break time="200ms"/> of <break time="150ms"/>',ve=!0}else if(e.hasEmptyBranch("subscript"))A+=" the summation of";else{let Do=$("math",e.subscript);Do=Do.trim(),A+=' the summation from <break time="200ms"/>'+Do+'<break time="200ms"/> of <break time="150ms"/>',ve=!0}else if(So==="\\prod")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let Do=$("math",e.superscript);Do=Do.trim();let eh=$("math",e.subscript);eh=eh.trim(),A+=' the product from <break time="200ms"/>'+eh+'<break time="200ms"/> to <break time="200ms"/>'+Do+'<break time="200ms"/> of <break time="150ms"/>',ve=!0}else if(e.hasEmptyBranch("subscript"))A+=" the product  of ";else{let Do=$("math",e.subscript);Do=Do.trim(),A+=' the product from <break time="200ms"/>'+Do+'<break time="200ms"/> of <break time="150ms"/>',ve=!0}else if(So==="\\int")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let Do=$("math",e.superscript);Do=Do.trim();let eh=$("math",e.subscript);eh=eh.trim(),A+=' the integral from <break time="200ms"/>'+Cc(eh)+'<break time="200ms"/> to <break time="200ms"/>'+Cc(Do)+' <break time="200ms"/> of ',ve=!0}else A+=' the integral of <break time="200ms"/> ';else if(So==="\\operatorname"||So==="\\operatorname*")A+=lb(e.body)+" ";else if(typeof e.value=="string"){let Do=(m=kn[e.value])!=null?m:e.command?kn[e.command]:void 0;A+=Do||" "+e.value}else e.command&&(e.command==="\\mathop"?A+=$("math",e.body):A+=e.command.startsWith("\\")?" "+e.command.slice(1):" "+e.command)}break;case"enclose":me=$("math",e.body),A+=" crossed out "+me+". End crossed out.";break}if(!ve&&!e.hasEmptyBranch("superscript")){let De=$(t,e.superscript);De=De.trim();let Xe=De.replace(/<[^>]*>/g,"");if(wo(e.superscript)){if(t==="math"){let qe=sb(e.superscript);qe&&(A+='<mark name="'+qe+'"/>')}Xe===""?A+=" prime ":Xe==="2"?A+=" squared ":Xe==="3"?A+=" cubed ":Number.isNaN(Number.parseInt(Xe))?A+=" to the "+De+"; ":A+=' to the <say-as interpret-as="ordinal">'+Xe+"</say-as> power; "}else Number.isNaN(Number.parseInt(Xe))?A+=" raised to the "+De+"; ":A+=' raised to the <say-as interpret-as="ordinal">'+Xe+"</say-as> power; "}if(!ve&&!e.hasEmptyBranch("subscript")){let De=$("math",e.subscript);De=De.trim(),A+=wo(e.subscript)?" sub "+De:" subscript "+De+". End subscript. "}return A}function Mt(t){var e,a;let s=globalThis.MathfieldElement;if(s.textToSpeechRules==="sre"&&("sre"in window||"SRE"in window)){let l=H(t);if(l){s.textToSpeechMarkup&&(s.textToSpeechRulesOptions=(e=s.textToSpeechRulesOptions)!=null?e:{},s.textToSpeechRulesOptions=f(p({},s.textToSpeechRulesOptions),{markup:s.textToSpeechMarkup}),s.textToSpeechRulesOptions.markup==="ssml"&&(s.textToSpeechRulesOptions=f(p({},s.textToSpeechRulesOptions),{markup:"ssml_step"})),s.textToSpeechRulesOptions=f(p({},s.textToSpeechRulesOptions),{rate:s.speechEngineRate}));let u=(a=window.SRE)!=null?a:globalThis.sre.System.getInstance();s.textToSpeechRulesOptions&&u.setupEngine(s.textToSpeechRulesOptions);let c="";try{c=u.toSpeech(l)}catch(d){console.error("MathLive 0.106.0: `SRE.toSpeech()` runtime error",d)}return c}return""}let o=$("math",t);if(s.textToSpeechMarkup==="ssml"){let l="";s.speechEngineRate&&(l='<prosody rate="'+s.speechEngineRate+'">'),o='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+l+"<p><s>"+o+"</s></p>"+(l?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else s.textToSpeechMarkup==="mac"&&kt()==="macos"?o=o.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):o=o.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return o}var Ht={"\\ne":"","\\neq":"","":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\>":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" ","\\infty":"oo","\\R":"RR","\\mathbb{R}":"RR","\\N":"NN","\\mathbb{N}":"NN","\\Z":"ZZ","\\mathbb{Z}":"ZZ","\\Q":"QQ","\\mathbb{Q}":"QQ","\\C":"CC","\\mathbb{C}":"CC","\\emptyset":"O/","\\varnothing":"O/","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega"},ko={"\\pm":"+-","\\colon":" : ","\\sum":" sum ","\\prod":" prod ","\\bigcap":" nnn ","\\bigcup":" uuu ","\\int":" int ","\\oint":" oint ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" AA ","\\exists":" EE ","\\in":" in ","\\notin":" !in ","\\mapsto":"|->","\\implies":"=>","\\iff":"<=>","\\cdot":" * ","\\ast":" ** ","\\star":" *** ","\\times":" * ","\\div":" -: ","\\ltimes":" |>< ","\\rtimes":" ><| ","\\bowtie":" |><| ","\\circ":"@"},Es={"\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrack":"[","\\rbrack":"]","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"};function ub(t){let e="";for(let a of t){let s=e[e.length-1];s!==void 0&&(/\d$/.test(s)&&/^\d/.test(a)||/[a-zA-Z]$/.test(s)&&/^[a-zA-Z]/.test(a))&&(e+=" "),e+=a}return e}function ne(t,e){var a,s,o,l,u,c,d,m,g,A,P,W,me,ve,He,De,Xe;if(!t)return"";if(Y(t)){if(t.length===0)return"";if(t[0].mode==="latex")return t.map(Ko=>ne(Ko)).join("");if(t[0].mode==="text"){let Ko=0,Ge="";for(;((a=t[Ko])==null?void 0:a.mode)==="text";)Ge+=t[Ko].body?ne(t[Ko].body,e):t[Ko].value,Ko++;return e!=null&&e.plain?Ge+ne(t.slice(Ko),e):`"${Ge}" ${ne(t.slice(Ko))}`}let Do=0,eh=[];for(;t[Do]&&t[Do].mode==="math";){let Ko="";for(;t[Do]&&t[Do].type==="mord"&&/\d/.test(t[Do].value);)Ko+=t[Do++].value;Ko?eh.push(Ko):eh.push(ne(t[Do++],e))}return eh.push(ne(t.slice(Do),e)),ub(eh)}if(t.mode==="text")return e!=null&&e.plain?t.value:`"${t.value}"`;let qe="",{command:Rs}=t,Vc;if(Rs==="\\placeholder")return`(${ne(t.body,e)})`;let So=b.serialize([t],{expandMacro:!1,defaultMode:"math"});switch(t.type){case"accent":let Do={"\\vec":"vec","\\dot":"dot","\\ddot":"ddot","\\bar":"bar","\\hat":"hat","\\acute":"acute;","\\grave":"grave","\\tilde":"tilde","\\breve":"breave","\\check":"check"}[Rs];qe=`${Do??""} ${ne(t.body,e)} `;break;case"first":return"";case"latexgroup":return t.body.map(Ko=>Ko.value).join("");case"group":case"root":qe=(s=Ht[Rs])!=null?s:ne(t.body,e);break;case"genfrac":{let Ko=t;(Ko.leftDelim||Ko.rightDelim)&&(qe=Ko.leftDelim==="."||!Ko.leftDelim?"{:":Ko.leftDelim),Ko.hasBarLine?(qe+="(",qe+=ne(Ko.above,e),qe+=")/(",qe+=ne(Ko.below,e),qe+=")"):(qe+="((",qe+=ne(Ko.above,e),qe+=") choose (",qe+=ne(Ko.below,e),qe+="))"),(Ko.leftDelim||Ko.rightDelim)&&(qe+=Ko.rightDelim==="."||!Ko.rightDelim?"{:":Ko.rightDelim)}break;case"surd":t.hasEmptyBranch("above")?qe+=`sqrt(${ne(t.body,e)})`:qe+=`root(${ne(t.above,e)})(${ne(t.body,e)})`;break;case"latex":qe=t.value;break;case"leftright":{let Ko=t,Ge=Ko.leftDelim;Ge&&Es[Ge]&&(Ge=Es[Ge]),qe+=Ge==="."||!Ge?"{:":Ge,qe+=ne(Ko.body,e);let An=Ko.matchingRightDelim();An&&Es[An]&&(An=Es[An]),qe+=An==="."||!An?":}":An}break;case"sizeddelim":case"delim":qe=t.value;break;case"overlap":break;case"overunder":break;case"mord":if(Ht[So])return Ht[So];qe=(u=(l=(o=Ht[Rs])!=null?o:Rs)!=null?l:Rs)!=null?u:typeof t.value=="string"?t.value:"",qe.startsWith("\\")&&(qe+=" "),Vc=Rs?Rs.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null,Vc?qe=String.fromCodePoint(Number.parseInt("0x"+Vc[1])):qe.length>0&&qe.startsWith("\\")&&(qe=typeof t.value=="string"?t.value.charAt(0):t.command),qe=db(qe,t.style);break;case"mbin":case"mrel":case"minner":qe=(m=(d=(c=Ht[So])!=null?c:Ht[Rs])!=null?d:ko[Rs])!=null?m:t.value;break;case"mopen":case"mclose":qe=t.value;break;case"mpunct":qe=(g=ko[Rs])!=null?g:Rs;break;case"mop":case"operator":case"extensible-symbol":t.value!==""&&(ko[Rs]?qe=ko[Rs]:qe=Rs==="\\operatorname"?ne(t.body,e):(A=t.value)!=null?A:Rs,qe+=" ");break;case"array":let eh=t.environmentName;if(t.isMultiline)qe=t.rows.map(Ko=>Ko.map(Ge=>ne(Ge,e)).join("")).join(`
`);else{let Ko=(P={bmatrix:["[","]"],"bmatrix*":["[","]"]}[eh])!=null?P:["(",")"],Ge=[],An=t.rows;for(let Bs of An){let yh=[];for(let df of Bs)yh.push(ne(df,e));Ge.push(Ko[0]+yh.join(",")+Ko[1])}let wt=(W={bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]}[eh])!=null?W:["(",")"];qe=wt[0]+Ge.join(",")+wt[1]}break;case"box":break;case"spacing":qe=(ve=(me=Ht[So])!=null?me:Ht[Rs])!=null?ve:" ";break;case"enclose":qe="("+ne(t.body,e)+")";break;case"space":qe=" ";break;case"subsup":qe="";break;case"macro":qe=(Xe=(De=(He=Ht[So])!=null?He:Ht[Rs])!=null?De:ko[Rs])!=null?Xe:ne(t.body,e);break}if(!t.hasEmptyBranch("subscript")){qe+="_";let Do=ne(t.subscript,e);qe+=Do.length!==1?`(${Do})`:Do}if(!t.hasEmptyBranch("superscript")){qe+="^";let Do=ne(t.superscript,e);qe+=Do.length!==1?`(${Do})`:Do}return qe}function db(t,e){if(!e)return t;let a=t;return e.variant==="double-struck"&&(a=`bbb "${a}"`),e.variant==="script"&&(a=`cc "${a}"`),e.variant==="fraktur"&&(a=`fr "${a}"`),e.variant==="sans-serif"&&(a=`sf "${a}"`),e.variant==="monospace"&&(a=`tt "${a}"`),e.variantStyle==="bold"&&(a=`bb "${a}"`),e.color?`color({${e.color}})(${a})`:a}function de(t,e){var a;let s=f(p({},Jn()),{renderPlaceholder:()=>new _(160,{maxFontSize:1})}),o=(a=void 0)!=null?a:"math",l="math",u="displaystyle";o==="inline-math"?u="textstyle":o==="math"?u="displaystyle":o==="text"&&(u="textstyle",l="text");let c=new O({from:s}),d=new b({type:"root",mode:l,body:he(t,{context:c,parseMode:l,mathstyle:u})}).render(c);return d?(_r(It(d,c)),Mr(d,{classes:"ML__latex"}).toMarkup()):""}function Lo(t){if(typeof t=="string"){let e=mb(t);if(!e)throw new Error(`Invalid color: ${t}`);return e}return"C"in t?hb(t):"a"in t?rh(t):t}function Mi(t){return t<0?0:t>255?255:Math.round(t)}function mb(t){if(!t||t[0]!=="#")return;t=t.slice(1);let e;return t.length<=4?(e={r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)},t.length===4&&(e.a=parseInt(t[3]+t[3],16)/255)):(e={r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)},t.length===8&&(e.a=parseInt(t[6]+t[7],16)/255)),e&&typeof e.a>"u"&&(e.a=1),e}function Kc(t){let[e,a,s]=[t.L,t.C,t.H],o=s*Math.PI/180,l={L:e,a:a*Math.cos(o),b:a*Math.sin(o)};return t.alpha!==void 0&&(l.alpha=t.alpha),l}function pb(t){let[e,a,s]=[t.L,t.a,t.b],o=Math.sqrt(a*a+s*s),l=Math.atan2(s,a)*180/Math.PI,u={L:e,C:o,H:l};return t.alpha!==void 0&&(u.alpha=t.alpha),u}function Ec(t){let[e,a,s]=[t.L,t.a,t.b],o=Math.pow(.9999999984505198*e+.39633779217376786*a+.2158037580607588*s,3),l=Math.pow(1.00000000888176*e-.10556134232365635*a-.0638541747717059*s,3),u=Math.pow(e*1.000000054672411-.0894841820949657*a-1.2914855378640917*s,3),c=4.076741661347994*o-3.307711590408193*l+.230969928729428*u,d=-1.2684380040921763*o+2.6097574006633715*l-.3413193963102197*u,m=-.004196086541837188*o-.7034186144594493*l+1.7076147009309444*u,g=A=>{let P=Math.abs(A);return P<=.0031308?A*12.92:(Math.sign(A)||1)*(1.055*Math.pow(P,1/2.4)-.055)};return[g(c),g(d),g(m)]}function Tc(t){let[e,a,s]=t;return e>=0&&e<=1&&a>=0&&a<=1&&s>=0&&s<=1}function Dc(t,e){let[a,s,o]=t;return a=Mi(a*255),s=Mi(s*255),o=Mi(o*255),e!==void 0?{r:a,g:s,b:o,alpha:e}:{r:a,g:s,b:o}}function rh(t){let[e,a,s]=Ec(t);if(Tc([e,a,s]))return Dc([e,a,s],t.alpha);let o=pb(t);if(o.C=0,[e,a,s]=Ec(Kc(o)),!Tc([e,a,s]))return Dc([e,a,s],t.alpha);let l=0,u=t.L,c=(l+u)/2;o.C=c;let d=.36/Math.pow(2,12);for(;u-l>d;)c=(l+u)/2,o.C=c,[e,a,s]=Ec(Kc(o)),Tc([e,a,s])?l=c:u=c;return Dc([e,a,s],t.alpha)}function hb(t){return rh(Kc(t))}function ih(t,e){let a=Lo(t),s=Lo(e),o=.56,l=.57,u=.62,c=.65,d=.022,m=1.414,g=.1,A=5e-4,P=1.14,W=.027,me=1.14,ve=.027;function He(Do){return Do>=d?Do:Do+(d-Do)**m}function De(Do){return(Do<0?-1:1)*Math.pow(Math.abs(Do),2.4)}let Xe=He(De(s.r/255)*.2126729+De(s.g/255)*.7151522+De(s.b/255)*.072175),qe=He(De(a.r/255)*.2126729+De(a.g/255)*.7151522+De(a.b/255)*.072175),Rs,Vc,So;return Math.abs(qe-Xe)<A?Vc=0:qe>Xe?(Rs=qe**o-Xe**l,Vc=Rs*P):(Rs=qe**c-Xe**u,Vc=Rs*me),Math.abs(Vc)<g?So=0:Vc>0?So=Vc-ve:So=Vc+W,So*100}function Oc(t,e,a){a!=null||(a="#fff"),e!=null||(e="#000");let s=ih(t,a),o=ih(t,e);return Math.abs(s)>Math.abs(o)?a:e}function nh(t){let e=Lo(t),a=((1<<24)+(Mi(e.r)<<16)+(Mi(e.g)<<8)+Mi(e.b)).toString(16).slice(1);return e.alpha!==void 0&&e.alpha<1&&(a+=("00"+Math.round(e.alpha*255).toString(16)).slice(-2)),a[0]===a[1]&&a[2]===a[3]&&a[4]===a[5]&&a[6]===a[7]&&(a=a[0]+a[2]+a[4]+(e.alpha!==void 0&&e.alpha<1?a[6]:"")),"#"+a}function te(t){let e=oh(t),a="";for(let s of e){if(typeof s.value!="string")return"";a+=s.value}return a}function oh(t){let e=t.model.selection.ranges;if(e.length!==1)return[];let a=t.model.getAtoms(e[0]);return a.length===1&&a[0].isRoot&&(a=a[0].children),a.filter(s=>s.type!=="first")}function fb(t,e){let a=oh(t);if(a.length!==1)return!1;let s=Za[e];return s?!!s.test(a[0].value):!1}function gb(t){return te(t).length>0}function bb(t){return[Rc(t,"double-struck","mathbb","tooltip.blackboard"),Rc(t,"fraktur","mathfrak","tooltip.fraktur"),Rc(t,"calligraphic","mathcal","tooltip.caligraphic"),Pc(t,"up","mathrm","tooltip.roman-upright"),Pc(t,"bold","bm","tooltip.bold"),Pc(t,"italic","mathit","tooltip.italic")]}function yb(t){return[{id:"accent-vec",class:"ML__center-menu",label:()=>de(`\\vec{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\vec{#@}",{selectionMode:"item"})},{id:"accent-overrightarrow",class:"ML__center-menu",label:()=>de(`\\overrightarrow{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overrightarrow{#@}",{selectionMode:"item"})},{id:"accent-overleftarrow",class:"ML__center-menu",label:()=>de(`\\overleftarrow{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overleftarrow{#@}",{selectionMode:"item"})},{id:"accent-dot",class:"ML__center-menu",label:()=>de(`\\dot{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\dot{#@}",{selectionMode:"item"})},{id:"accent-ddot",class:"ML__center-menu",label:()=>de(`\\ddot{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\ddot{#@}",{selectionMode:"item"})},{id:"accent-bar",class:"ML__center-menu",label:()=>de(`\\bar{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\bar{#@}",{selectionMode:"item"})},{id:"accent-overline",class:"ML__center-menu",label:()=>de(`\\overline{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overline{#@}",{selectionMode:"item"})},{id:"accent-overgroup",class:"ML__center-menu",label:()=>de(`\\overgroup{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overgroup{#@}",{selectionMode:"item"})},{id:"accent-overbrace",class:"ML__center-menu",label:()=>de(`\\overbrace{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overbrace{#@}",{selectionMode:"item"})},{id:"accent-underline",class:"ML__center-menu",label:()=>de(`\\underline{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\underline{#@}",{selectionMode:"item"})},{id:"accent-undergroup",class:"ML__center-menu",label:()=>de(`\\undergroup{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\undergroup{#@}",{selectionMode:"item"})},{id:"accent-underbrace",class:"ML__center-menu",label:()=>de(`\\underbrace{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\underbrace{#@}",{selectionMode:"item"})}]}function xb(t){return[{id:"decoration-boxed",label:()=>de(`\\boxed{${t.getValue(t.model.selection)}}}`),onMenuSelect:()=>t.insert("\\boxed{#@}",{selectionMode:"item"})},{id:"decoration-red-box",label:()=>de(`\\bbox[5px, border: 2px solid red]{${t.getValue(t.model.selection)}}`),onMenuSelect:()=>t.insert("\\bbox[5px, border: 2px solid red]{#@}",{selectionMode:"item"})},{id:"decoration-dashed-black-box",label:()=>de(`\\bbox[5px, border: 2px dashed black]{${t.getValue(t.model.selection)}}`),onMenuSelect:()=>t.insert("\\bbox[5px, border: 2px dashed black]{#@}",{selectionMode:"item"})}]}function vb(t){let e=[];for(let a of Object.keys(Ut))e.push({id:`background-color-${a}`,class:(nh(Oc(Ut[a]))==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${Ut[a]} "></span>`,ariaLabel:()=>{var s;return(s=z(a))!=null?s:a},checked:()=>{var s;return(s={some:"mixed",all:!0}[t.queryStyle({backgroundColor:a})])!=null?s:!1},onMenuSelect:()=>t.applyStyle({backgroundColor:a},{operation:"toggle"})});return e}function _b(t){let e=[];for(let a of Object.keys(jt))e.push({id:`color-${a}`,class:(Oc(jt[a])==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${jt[a]} "></span>`,ariaLabel:()=>{var s;return(s=z(a))!=null?s:a},checked:()=>{var s;return(s={some:"mixed",all:!0}[t.queryStyle({color:a})])!=null?s:!1},onMenuSelect:()=>t.applyStyle({color:a},{operation:"toggle"})});return e}var zc=class extends vn{constructor(t,e,a,s){super(t,e),this.row=a,this.col=s}set active(t){let e=this.parentMenu.children;if(t)for(let a of e)a.element.classList.toggle("active",a.row<=this.row&&a.col<=this.col);else for(let a of e)a.element.classList.remove("active")}};function Mb(t){let e=[];for(let a=1;a<=5;a++)for(let s=1;s<=5;s++)e.push({id:`insert-matrix-${a}x${s}`,onCreate:(o,l)=>new zc(o,l,a,s),label:"",tooltip:()=>z("tooltip.row-by-col",a,s),data:{row:a,col:s},onMenuSelect:()=>{t.insert(`\\begin{pmatrix}${Array(a).fill(Array(s).fill("#?").join(" & ")).join("\\\\")}\\end{pmatrix}`,{selectionMode:"item"})}});return e}function ah(t){return[{label:()=>z("menu.array.add row above"),id:"add-row-above",onMenuSelect:()=>t.executeCommand("addRowBefore"),keyboardShortcut:"shift+alt+[Return]",visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,a]=Fr(t),[s,o]=Sn(t);return e!==s}},{label:()=>z("menu.array.add row below"),id:"add-row-below",onMenuSelect:()=>t.executeCommand("addRowAfter"),keyboardShortcut:"alt+[Return]",visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,a]=Fr(t),[s,o]=Sn(t);return e!==s}},{label:()=>z("menu.array.add column before"),id:"add-column-before",onMenuSelect:()=>t.executeCommand("addColumnBefore"),visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,a]=Fr(t),[s,o]=Sn(t);return a!==o},keyboardShortcut:"shift+alt+[Tab]",enabled:()=>{let e=t.model.parentEnvironment;if(!e)return!1;let[a,s]=Bc(t);return a<e.maxColumns}},{label:()=>z("menu.array.add column after"),id:"add-column-after",onMenuSelect:()=>t.executeCommand("addColumnAfter"),keyboardShortcut:"alt+[Tab]",visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,a]=Fr(t),[s,o]=Sn(t);return a!==o}},{type:"divider"},{label:()=>z("menu.array.delete row"),id:"delete-row",onMenuSelect:()=>t.executeCommand("removeRow"),enabled:()=>{let[e,a]=Fr(t),[s,o]=Bc(t);return s>e},visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,a]=Fr(t),[s,o]=Sn(t);return e!==s}},{label:()=>z("menu.array.delete column"),id:"delete-column",onMenuSelect:()=>t.executeCommand("removeColumn"),enabled:()=>{let[e,a]=Fr(t),[s,o]=Bc(t);return o>a},visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,a]=Fr(t),[s,o]=Sn(t);return a!==o}},{type:"divider"},{label:()=>z("menu.borders"),visible:()=>(wb(t)||wi(t))&&t.isSelectionEditable,submenu:[{label:"  ",id:"environment-no-border",onMenuSelect:()=>Ao(t,"matrix")},{label:"()",id:"environment-parentheses",onMenuSelect:()=>Ao(t,"pmatrix")},{label:"[]",id:"environment-brackets",onMenuSelect:()=>Ao(t,"bmatrix")},{label:"||",id:"environment-bar",onMenuSelect:()=>Ao(t,"vmatrix")},{label:"{}",id:"environment-braces",onMenuSelect:()=>Ao(t,"Bmatrix")}],submenuClass:"border-submenu"},{type:"divider"},{label:()=>z("menu.insert matrix"),id:"insert-matrix",visible:()=>t.isSelectionEditable,submenu:Mb(t),submenuClass:"insert-matrix-submenu",columnCount:5},{type:"divider"},{label:()=>z("menu.insert"),id:"insert",submenu:Sb(t)},{type:"divider"},{label:()=>z("menu.mode"),id:"mode",visible:()=>t.isSelectionEditable&&t.model.selectionIsCollapsed,submenu:[{label:()=>z("menu.mode-math"),id:"mode-math",onMenuSelect:()=>{$t(t,"accept-all"),t.executeCommand(["switchMode","math"])},checked:()=>t.model.mode==="math"},{label:()=>z("menu.mode-text"),id:"mode-text",onMenuSelect:()=>{$t(t,"accept-all"),t.executeCommand(["switchMode","text"])},checked:()=>t.model.mode==="text"},{label:()=>z("menu.mode-latex"),id:"mode-latex",onMenuSelect:()=>t.executeCommand(["switchMode","latex"]),checked:()=>t.model.mode==="latex"}]},{type:"divider"},{label:()=>z("menu.font-style"),id:"variant",visible:()=>t.isSelectionEditable,submenu:bb(t),submenuClass:"variant-submenu"},{label:()=>z("menu.color"),id:"color",visible:()=>t.isSelectionEditable,submenu:_b(t),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>z("menu.background-color"),id:"background-color",visible:()=>t.isSelectionEditable,submenu:vb(t),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>z("menu.accent"),id:"accent",visible:()=>t.isSelectionEditable,submenu:yb(t),submenuClass:"variant-submenu"},{label:()=>z("menu.decoration"),id:"decoration",visible:()=>t.isSelectionEditable&&te(t).length>0,submenu:xb(t),submenuClass:"variant-submenu"},{type:"divider"},{label:()=>z("menu.evaluate"),id:"ce-evaluate",visible:()=>t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{let e=kb(t);if(!e){t.model.announce("plonk");return}t.model.selectionIsCollapsed?(t.model.position=t.model.lastOffset,t.insert(`=${e}`,{insertionMode:"insertAfter",selectionMode:"item"})):t.insert(e,{insertionMode:"replaceSelection",selectionMode:"item"})}},{label:()=>z("menu.simplify"),id:"ce-simplify",visible:()=>t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{var e,a;if(t.model.selectionIsCollapsed){let s=(e=t.expression)==null?void 0:e.simplify();if(t.model.position=t.model.lastOffset,!s){t.model.announce("plonk");return}t.insert(`=${s.latex}`,{insertionMode:"insertAfter",selectionMode:"item"})}else{let s=(a=globalThis.MathfieldElement.computeEngine)==null?void 0:a.parse(t.getValue(t.model.selection)).simplify();if(!s){t.model.announce("plonk");return}t.insert(s.latex,{insertionMode:"replaceSelection",selectionMode:"item"})}}},{label:()=>{var e;let a=globalThis.MathfieldElement.computeEngine;if(a===null)return"";let s=(e=t.expression)==null?void 0:e.unknowns[0];if(s){let o=a.box(s).latex;return z("menu.solve-for",de(o))}return z("menu.solve")},id:"ce-solve",visible:()=>{var e;return t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null&&((e=t.expression)==null?void 0:e.unknowns.length)===1&&t.expression.unknowns[0]!=="Nothing"},onMenuSelect:()=>{var e;let a=t.expression,s=a?.unknowns[0],o=(e=a.solve(s))==null?void 0:e.map(l=>{var u;return(u=l.simplify().latex)!=null?u:""});if(!o){t.model.announce("plonk");return}t.insert(`${s}=${o.length===1?o[0]:"\\left\\lbrace"+o?.join(", ")+"\\right\\rbrace"}`,{insertionMode:"replaceAll",selectionMode:"item"})}},{type:"divider"},{label:()=>z("menu.cut"),id:"cut",onMenuSelect:()=>t.executeCommand("cutToClipboard"),visible:()=>!t.options.readOnly&&t.isSelectionEditable,keyboardShortcut:"meta+X"},{label:()=>z("menu.copy"),id:"copy",submenu:[{label:()=>z("menu.copy-as-latex"),id:"copy-latex",onMenuSelect:()=>V.copyToClipboard(t,"latex"),keyboardShortcut:"meta+C"},{label:()=>z("menu.copy-as-typst"),id:"copy-latex",onMenuSelect:()=>V.copyToClipboard(t,"typst")},{label:()=>z("menu.copy-as-ascii-math"),id:"copy-ascii-math",onMenuSelect:()=>V.copyToClipboard(t,"ascii-math")},{label:()=>z("menu.copy-as-mathml"),id:"copy-math-ml",onMenuSelect:()=>V.copyToClipboard(t,"math-ml")}]},{label:()=>z("menu.paste"),id:"paste",onMenuSelect:()=>t.executeCommand("pasteFromClipboard"),visible:()=>t.hasEditableContent,keyboardShortcut:"meta+V"},{label:()=>z("menu.select-all"),id:"select-all",keyboardShortcut:"meta+A",onMenuSelect:()=>t.executeCommand("selectAll")}]}function wi(t){var e,a;let s=(a=(e=t.model.parentEnvironment)==null?void 0:e.environmentName)!=null?a:"";return["array","matrix","pmatrix","bmatrix","vmatrix","Bmatrix"].includes(s)}function wb(t){let e=t.model.at(t.model.position);if(e.type!=="array")return!1;let a=e.environmentName;return["matrix","pmatrix","bmatrix","vmatrix","Bmatrix"].includes(a)}function Bc(t){var e;let a=(e=t.model.parentEnvironment)==null?void 0:e.rows;return a?[a.length,a.reduce((s,o)=>Math.max(s,o.length),0)]:[0,0]}function Fr(t){let e=t.model.parentEnvironment;return e?[e.minRows,e.minColumns]:[0,0]}function Sn(t){let e=t.model.parentEnvironment;return e?[e.maxRows,e.maxColumns]:[0,0]}function Ao(t,e){di(t),t.flushInlineShortcutBuffer(),uc(t.model,e),U(t)}function kb(t){var e,a;let s;if(t.model.selectionIsCollapsed?s=(e=globalThis.MathfieldElement.computeEngine)==null?void 0:e.parse(t.getValue(),{canonical:!1}):s=(a=globalThis.MathfieldElement.computeEngine)==null?void 0:a.parse(t.getValue(t.model.selection),{canonical:!1}),!s)return"";let o=s.evaluate();return o.isSame(s)&&(o=s.N()),o.latex}function Rc(t,e,a,s){return{id:`variant-${e}`,label:()=>{var o;return te(t).length<12?de(`\\${a}{${te(t)}}`):(o=z(s))!=null?o:s},class:"ML__xl",tooltip:()=>{var o;return(o=z(s))!=null?o:s},visible:()=>fb(t,e),checked:()=>{var o;return(o={some:"mixed",all:!0}[t.queryStyle({variant:e})])!=null?o:!1},onMenuSelect:()=>t.applyStyle({variant:e},{operation:"toggle"})}}function Pc(t,e,a,s){return{id:`variant-style-${e}`,label:()=>{var o;let l=te(t);return l.length>0&&l.length<12?de(`\\${a}{${te(t)}}`):(o=z(s))!=null?o:s},class:()=>{let o=te(t);return o.length>0&&o.length<12?"ML__xl":""},tooltip:()=>{var o;return(o=z(s))!=null?o:s},visible:e==="bold"?!0:()=>gb(t),checked:()=>{var o;return(o={some:"mixed",all:!0}[t.queryStyle({variantStyle:e})])!=null?o:!1},onMenuSelect:()=>t.applyStyle({variantStyle:e},{operation:"toggle"})}}function Sb(t){return[{label:()=>je("abs"),id:"insert-abs",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("|#?|")},{label:()=>je("nth-root"),id:"insert-nth-root",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\sqrt[#?]{#?}")},{label:()=>je("log-base"),id:"insert-log-base",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\log_{#?}{#?}")},{type:"heading",label:()=>z("menu.insert.heading-calculus")},{label:()=>je("derivative"),id:"insert-derivative",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\dfrac{\\mathrm{d}}{\\mathrm{d}x}#?\\bigm|_{x=#?}")},{label:()=>je("nth-derivative"),id:"insert-nth-derivative",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\dfrac{\\mathrm{d}^#?}{\\mathrm{d}x^#?}#?\\bigm|_{x=#?}")},{label:()=>je("integral"),id:"insert-integral",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\int_#?^#?#?\\,\\mathrm{d}#?")},{label:()=>je("sum"),id:"insert-sum",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\sum_#?^#?#?")},{label:()=>je("product"),id:"insert-product",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\prod_#?^#?#?")},{type:"heading",label:()=>z("menu.insert.heading-complex-numbers")},{label:()=>je("modulus"),id:"insert-modulus",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\lvert#?\\rvert")},{label:()=>je("argument"),id:"insert-argument",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\arg(#?)")},{label:()=>je("real-part"),id:"insert-real-part",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\Re(#?)")},{label:()=>je("imaginary-part"),id:"insert-imaginary-part",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\Im(#?)")},{label:()=>je("conjugate"),id:"insert-conjugate",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\overline{#?}")}]}function je(t){return`<span class='ML__insert-template'> ${de(z(`menu.insert.${t}-template`))}</span><span class="ML__insert-label">${z(`menu.insert.${t}`)}</span>`}var ze={"\\ne":"!=","\\neq":"!=","":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon.alt","\\varepsilon":"epsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta.alt","\\vartheta":"theta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi.alt","\\varphi":"phi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" #h(-1em/6) ","\\,":" thin ","\\:":" med ","\\>":" med ","\\;":" thick ","\\enskip":"space.en","\\enspace":"space.en","\\qquad":"space.quad space.quad","\\quad":"space.quad","\\infty":"infinity","\\R":"RR","\\mathbb{R}":"RR","\\N":"NN","\\mathbb{N}":"NN","\\Z":"ZZ","\\mathbb{Z}":"ZZ","\\Q":"QQ","\\mathbb{Q}":"QQ","\\C":"CC","\\mathbb{C}":"CC","\\emptyset":"emptyset","\\varnothing":"nothing","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega","\\vert":" | ","\\Vert":" || ","\\mid":" divides ","\\lbrack":" bracket.l ","\\rbrack":" bracket.r ","\\lbrace":" brace.l ","\\rbrace":" brace.r ","\\lparen":" paren.l ","\\rparen":" paren.r ","\\langle":" angle.l ","\\rangle":" angle.r ","\\differentialD":" dif ","\\diamond":" diamond.stroked.small ","\\square":" square.stroked.small ","\\lceil":" ceil.l ","\\rceil":" ceil.r ","\\lfloor":" floor.l ","\\rfloor":" floor.r ","\\aleph":" aleph ","\\bet":" bet ","\\gimel":" gimel ","\\dalet":" dalet ","\\mod":" mod ","\\equiv":" equiv ","\\subset":" subset ","\\supset":" supset ","\\subseteq":" subset.eq ","\\supseteq":" supset.eq ","\\subsetneq":" subset.neq ","\\supsetneq":" supset.neq ","\\supsetneqq":" supset.neq ","\\nsubset":" subset.not ","\\nsupset":" supset.not ","\\nsubseteq":" subset.eq.not ","\\nsupseteq":" supset.eq.not ","\\approx":" approx ","\\uparrow":" arrow.t ","\\downarrow":" arrow.b ","\\rightarrow":" arrow.r ","\\leftarrow":" arrow.l ","\\longmapsto":" mapsto.long ","\\longmapsfrom":" arrow.l.bar.long ","/":"\\/","&":"&"},sh={"[":" bracket.l ","]":" bracket.r ","{":" brace.l ","}":" brace.r ","(":" paren.l ",")":" paren.r ","<":" angle.l ",">":" angle.r ",".":""},lh={" bracket.l ":"["," bracket.r ":"]"," brace.l ":"{"," brace.r ":"}"," paren.l ":"("," paren.r ":")"," angle.l ":" angle.l "," angle.r ":" angle.r "},Co={"\\pm":"plus.minus","\\colon":" : ","\\sum":" sum ","\\prod":" product ","\\bigcap":" inter.big ","\\bigcup":" union.big ","\\int":" integral ","\\iint":" integral.double ","\\iiint":" integral.triple ","\\intop":" integral ","\\oint":" integral.cont ","\\oiint":" integral.surf ","\\oiiint":" integral.vol ","\\setminus":" without ","\\vdots":" without ","\\ddots":" dots.down ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" forall ","\\exists":" exists ","\\in":" in ","\\notin":" in.not ","\\mapsto":"|->","\\implies":"==>","\\iff":"<==>","\\cdot":" dot.op ","\\ast":" * ","\\star":" star.op ","\\times":" times ","\\div":" div ","\\ltimes":" times.l ","\\rtimes":" times.r ","\\bowtie":"  ","\\circ":" circle.stroked.small "},Lb={underarc:"underparen",underparen:"underparen",underbrace:"underbrace",underline:"underline",overarc:"overparen",overparen:"overparen",overbrace:"overbrace",overline:"overline",cancel:"cancel",displaystyle:"display",textstyle:"inline"},Ab={longrightarrow:t=>`arrow.r.long^(${re(t.above)})`,longleftarrow:t=>`arrow.l.long^(${re(t.above)})`};function Cb(t){let e="";for(let a of t){let s=e[e.length-1];s!==void 0&&(/\d$/.test(s)&&/^\d/.test(a)||/[a-zA-Z]$/.test(s)&&/^[a-zA-Z]/.test(a))&&(e+=" "),e+=a}return e}function re(t){var e,a,s,o,l,u,c,d,m,g,A,P,W,me,ve,He,De,Xe,qe,Rs,Vc;if(!t)return"";if(Y(t)){if(t.length===0)return"";if(t[0].mode==="latex")return t.map(wt=>re(wt)).join("");if(t[0].mode==="text"){let wt=0,Bs="";for(;((e=t[wt])==null?void 0:e.mode)==="text";)Bs+=t[wt].body?re(t[wt].body):t[wt].value,wt++;return` "${Bs}" ${re(t.slice(wt))}`}let Ge=0,An=[];for(;t[Ge]&&t[Ge].mode==="math";){let wt="";for(;t[Ge]&&t[Ge].type==="mord"&&/\d/.test(t[Ge].value);)wt+=t[Ge++].value;wt?An.push(wt):An.push(re(t[Ge++]))}return An.push(re(t.slice(Ge))),Cb(An)}if(t.mode==="text")return`"${t.value}"`;let So="",{command:Do}=t,eh;if(Do==="\\placeholder")return`"${re(t.body)}"`;let Ko=b.serialize([t],{expandMacro:!0,defaultMode:"math"});switch(t.type){case"accent":let Ge={"\\vec":"arrow","\\dot":"dot","\\ddot":"dot.double","\\bar":"overline","\\hat":"hat","\\acute":"acute","\\grave":"grave","\\tilde":"tilde","\\breve":"breve","\\check":"caron"}[Do];So=`${Ge??""}(${re(t.body)}) `;break;case"first":return"";case"latexgroup":return t.body.map(wt=>wt.value).join("");case"group":case"root":So=(a=ze[Do])!=null?a:re(t.body);break;case"genfrac":{let wt=t;wt.hasBarLine?(So+="(",So+=re(wt.above),So+=")/(",So+=re(wt.below),So+=")"):So+=`binom(${re(wt.above)}, ${re(wt.below)})`}break;case"surd":t.hasEmptyBranch("above")?So+=`sqrt(${re(t.body)})`:So+=`root(${re(t.above)}, ${re(t.body)})`;break;case"latex":So=t.value;break;case"leftright":{let wt=t,Bs=wt.leftDelim;Bs&&ze[Bs]&&(Bs=ze[Bs]);let yh=wt.matchingRightDelim();yh&&ze[yh]&&(yh=ze[yh]),Bs&&(Bs=(s=sh[Bs])!=null?s:Bs),yh&&(yh=(o=sh[yh])!=null?o:yh),Bs&&yh?So=`lr(${(l=lh[Bs])!=null?l:Bs}${re(wt.body)}${(u=lh[yh])!=null?u:yh})`:So=`lr(${Bs}${re(wt.body)}${yh})`}break;case"sizeddelim":case"delim":So=t.value;break;case"overlap":break;case"mord":if(ze[Ko])return ze[Ko];So=(m=(d=(c=ze[Do])!=null?c:Do)!=null?d:Do)!=null?m:typeof t.value=="string"?t.value:"",So.startsWith("\\")&&(So+=" "),eh=Do?Do.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null,eh?So=String.fromCodePoint(Number.parseInt("0x"+eh[1])):So.length>0&&So.startsWith("\\")&&(So=typeof t.value=="string"?t.value.charAt(0):t.command),So=Eb(So,t.style),So=` ${So} `;break;case"mbin":case"mrel":case"minner":So=(P=(A=(g=ze[Ko])!=null?g:ze[Do])!=null?A:Co[Do])!=null?P:t.value;break;case"mopen":case"mclose":So=(W=ze[Ko])!=null?W:t.value;break;case"mpunct":So=(me=Co[Do])!=null?me:Do;break;case"mop":case"operator":case"extensible-symbol":t.value!==""&&(Co[Do]?So=Co[Do]:So=Do==="\\operatorname"?re(t.body):(ve=t.value)!=null?ve:Do,So+=" ");break;case"array":let An=t.environmentName;if(t.isMultiline)So=t.rows.map(wt=>wt.map(Bs=>re(Bs)).join("")).join(`
`);else{let wt=t.rows,Bs=wt.map(df=>df.map(re).join(", ")),yh={pmatrix:'"("',bmatrix:'"["',"bmatrix*":'"["',Bmatrix:'"{"',vmatrix:'"|"',matrix:"#none"}[An];yh?So=`mat(delim: ${yh}, ${Bs.join(" ; ")})`:An==="cases"||An==="rcases"?So=`cases(reverse: #${An==="rcases"}, ${Bs.join(", ")})`:An==="aligned"?So=wt.map(df=>df.map(re).join(" & ")).join(" \\ "):So=wt.map(df=>df.map(re).join("")).join("")}break;case"box":break;case"spacing":So=(De=(He=ze[Ko])!=null?He:ze[Do])!=null?De:" ";break;case"space":So=" ";break;case"subsup":So=(Xe=t.leftSibling)!=null&&Xe.value?"":'""';break;case"macro":So=(Vc=(Rs=(qe=ze[Ko])!=null?qe:ze[Do])!=null?Rs:Co[Do])!=null?Vc:re(t.body);break}if(!So){let Ge=Lb[t.command.slice(1)];Ge&&(So=`${Ge}(${re(t.body)})`)}if(!So){let Ge=Ab[t.command.slice(1)];Ge&&(So=Ge(t))}if(!t.hasEmptyBranch("subscript")){So+="_";let Ge=re(t.subscript);So+=Ge.length!==1?`(${Ge})`:Ge}if(!t.hasEmptyBranch("superscript")){So+="^";let Ge=re(t.superscript);So+=Ge.length!==1?`(${Ge})`:Ge}return So}function Eb(t,e){if(!e)return t;let a=t;return e.variant==="double-struck"&&(a=`bb(${a})`),e.variant==="script"&&(a=`cal(${a})`),e.variant==="fraktur"&&(a=`frak(${a})`),e.variant==="sans-serif"&&(a=`sans(${a})`),e.variant==="monospace"&&(a=`mono(${a})`),e.variantStyle==="bold"&&(a=`bold(${a})`),a}function Vr(t,e){return typeof t=="string"?t+Mt(e):Mt(t)}function Ic(t){var e;let a;if(t.parent.type==="prompt")t.parentBranch==="body"&&(a="prompt");else if(t.parentBranch==="body"){if(t.type==="first"&&(t.parent.type==="root"?a="mathfield":t.parent.type==="surd"?a="radicand":t.parent.type==="genfrac"?a="fraction":t.parent.type==="sizeddelim"&&(a="delimiter"),a))return a;t.type==="subsup"?t.superscript&&t.subscript?a="superscript and subscript":t.superscript?a="superscript":t.subscript&&(a="subscript"):t.type&&(a=(e={accent:"accented",array:"array",box:"box",chem:"chemical formula",delim:"delimiter",enclose:"cross out","extensible-symbol":"extensible symbol",error:"error",first:"first",genfrac:"fraction",group:"group",latex:"LaTeX",leftright:"delimiter",line:"line",subsup:"subscript-superscript",operator:"operator",overunder:"over-under",placeholder:"placeholder",rule:"rule",sizeddelim:"delimiter",space:"space",spacing:"spacing",surd:"square root",text:"text",prompt:"prompt",root:"math field",mop:"operator"}[t.type])!=null?e:"parent")}else if(t.parent.type==="genfrac"){if(t.parentBranch==="above")return"numerator";if(t.parentBranch==="below")return"denominator"}else t.parent.type==="surd"?t.parentBranch==="above"&&(a="index"):t.parentBranch==="superscript"?a="superscript":t.parentBranch==="subscript"&&(a="subscript");return a??"parent"}function ch(t,e,a,s){let o="";if(e==="plonk"){globalThis.MathfieldElement.playSound("plonk"),t.flushInlineShortcutBuffer();return}if(e==="delete")o=Vr("deleted: ",s);else if(e==="focus"||e.includes("move"))o=Tb(t.model,a),o+=Db(t.model);else if(e==="replacement")o=Vr(t.model.at(t.model.position));else if(e==="line"){let l=Vr(t.model.root);t.keyboardDelegate.setAriaLabel(l)}else o=s?Vr(e+" ",s):e;if(o){let l=t.ariaLiveText.textContent.includes("")?"  ":"  ";t.ariaLiveText.textContent=o+l}}function Tb(t,e){if(Number.isNaN(e))return"";let a=t.at(e);if(!a||a.treeDepth<=t.at(t.position).treeDepth)return"";let s="",o=a.parent,l=t.at(t.position).parent;for(;o!==t.root&&o!==l;)s+=`out of ${Ic(o)};`,o=o.parent;return s}function Db(t){if(!t.selectionIsCollapsed)return`selected: ${Vr(t.getAtoms(t.selection))}`;let e="",a=t.at(t.position);if(a.isFirstSibling&&(e=`start of ${Ic(a)}: `),a.isLastSibling){if(!a.isFirstSibling){if(!a.parent.parent)return`${Vr(a)}; end of mathfield`;e=`${Vr(a)}; end of ${Ic(a)}`}}else e+=Vr(a);return e}var Ts=class{constructor(t,e,a){this.mathfield=t,this.mode=e,this.silenceNotifications=!1,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.root=a}dispose(){this.mathfield=void 0}getState(){let t={ranges:[...this._selection.ranges]};return this.selection.direction&&this.selection.direction!=="none"&&(t.direction=this.selection.direction),{content:this.root.toJson(),selection:t,mode:this.mode}}setState(t,e){var a;let s=this.silenceNotifications;this.silenceNotifications=(a=e?.silenceNotifications)!=null?a:!0;let o={};if(e?.type==="undo"&&(o={inputType:"historyUndo"}),e?.type==="redo"&&(o={inputType:"historyRedo"}),this.contentWillChange(o)){let l=this.silenceNotifications;this.silenceNotifications=!0,this.mode=t.mode,this.root=ft(t.content),this.selection=t.selection,this.silenceNotifications=l,this.contentDidChange(o),this.selectionDidChange()}this.silenceNotifications=s}get atoms(){return this.root.children}get selection(){return this._selection}set selection(t){this.setSelection(t)}setSelection(t,e){return!this.mathfield.contentEditable&&this.mathfield.userSelect==="none"?!1:this.deferNotifications({selection:!0,content:!0},()=>{var a,s,o;let l=this.normalizeSelection(t,e);if(l===void 0)throw new TypeError("Invalid selection");if(l.ranges.length===1&&l.ranges[0][0]===l.ranges[0][1]){let g=l.ranges[0][0];if(!this.mathfield.dirty&&!((a=this.at(g))!=null&&a.parentPrompt)&&this.mathfield.hasEditablePrompts){if((s=this.at(g-1))!=null&&s.parentPrompt){this._anchor=this.normalizeOffset(g-1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor);return}if((o=this.at(g+1))!=null&&o.parentPrompt){this._anchor=this.normalizeOffset(g+1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor);return}this._anchor=0,this._position=0,this._selection={ranges:[[0,0]]};return}this._anchor=g,this._position=g,this._selection=l;return}let u=le(l);l.direction==="backward"?[this._position,this._anchor]=u:[this._anchor,this._position]=u;let c=this.at(u[0]+1),d=this.at(u[1]),m=b.commonAncestor(c,d);m?.type==="array"&&c.parent===m&&d.parent===m?this._selection={ranges:[u],direction:l.direction}:this._selection={ranges:[u],direction:l.direction},this._position>=0&&this._position<=this.lastOffset})}setPositionHandlingPlaceholder(t){var e;let a=this.at(t);a?.type==="placeholder"?this.setSelection(t-1,t):((e=a?.rightSibling)==null?void 0:e.type)==="placeholder"?this.setSelection(t,t+1):this.position=t,a instanceof ue&&a.isSuggestion&&(a.isSuggestion=!1),this.mathfield.stopCoalescingUndo()}get position(){return this._position}set position(t){this.setSelection(t,t)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return Math.abs(this._anchor-this._position)===1?this.at(Math.max(this._anchor,this._position)).type==="placeholder":!1}collapseSelection(t="forward"){return this._anchor===this._position?!1:(t==="backward"?this.position=Math.min(this._anchor,this._position):this.position=Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(t){return this.atoms[t]}offsetOf(t){return this.atoms.indexOf(t)}getSiblingsRange(t){let e=this.at(t),{parent:a}=e;if(!a)return[0,this.lastOffset];let s=e.parent.branch(e.parentBranch);return[this.offsetOf(s[0]),this.offsetOf(s[s.length-1])]}getBranchRange(t,e){let a=this.at(t).branch(e);return[this.offsetOf(a[0]),this.offsetOf(a[a.length-1])]}getCellRange(t){var e;this.getParentCell(t);let a=this.at(t);if(a){for(;a&&((e=a.parent)==null?void 0:e.type)!=="array";)a=a.parent;if(!(!(a!=null&&a.parent)||a.parent.type!=="array"))return[this.offsetOf(a.firstSibling),this.offsetOf(a.lastSibling)]}}getAtoms(t,e,a){let s=a??{};if(Ui(t)){if(s=e??{},t.ranges.length>1)return t.ranges.reduce((m,g)=>[...m,...this.getAtoms(g,s)],[]);t=t.ranges[0]}let o,l;if(Ot(t)){if(o=t,!Ot(e))return[];l=e}else[o,l]=t,s=e??{};if(!Number.isFinite(o))return[];s.includeChildren===void 0&&(s.includeChildren=!1),o<0&&(o=this.lastOffset-o+1),l<0&&(l=this.lastOffset+l+1);let u=Math.min(o,l)+1,c=Math.max(o,l);if(!s.includeChildren&&u===1&&c===this.lastOffset)return[this.root];let d=[];for(let m=u;m<=c;m++){let g=this.atoms[m];uh(this,g,u,c)&&d.push(g)}return s.includeChildren||(d=d.filter(m=>{let g=!1,{parent:A}=m;for(;A&&!g;)g=uh(this,A,u,c),A=A.parent;return!g})),d}findAtom(t,e=0,a="forward"){let s,o=this.lastOffset;if(a==="forward"){for(let l=e;l<=o;l++)if(s=this.atoms[l],t(s))return s;for(let l=0;l<e;l++)if(s=this.atoms[l],t(s))return s;return}for(let l=e;l>=0;l--)if(s=this.atoms[l],t(s))return s;for(let l=o;l>e;l--)if(s=this.atoms[l],t(s))return s}extractAtoms(t){var e;let a=this.getAtoms(t);a.length===1&&!a[0].parent&&a[0].isRoot&&(a[0]instanceof I?a=a[0].rows.flatMap(s=>s.flatMap(o=>o)):a=[...(e=a[0].body)!=null?e:a[0].children],a=a.filter(s=>s.type!=="first"));for(let s of a)s.parent.removeChild(s);return a}deleteAtoms(t){t!=null||(t=[0,-1]),this.extractAtoms(t),this.position=t[0]}atomToString(t,e){let a=e??"latex";if(a.startsWith("latex"))return b.serialize([t],{expandMacro:a==="latex-expanded",skipStyles:a==="latex-unstyled",skipPlaceholders:a==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode});if(a==="math-ml")return H(t);if(a==="spoken")return Mt(t);if(a==="spoken-text"){let s=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="";let o=Mt(t);return globalThis.MathfieldElement.textToSpeechMarkup=s,o}if(a==="spoken-ssml"||a==="spoken-ssml-with-highlighting"){let s=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="ssml";let o=Mt(t);return globalThis.MathfieldElement.textToSpeechMarkup=s,o}return a==="typst"?re(t):a==="plain-text"?ne(t,{plain:!0}):a==="ascii-math"?ne(t):(console.error(`MathLive 0.106.0: Unexpected format "${a}`),"")}getValue(t,e,a){if(t===void 0)return this.atomToString(this.root,"latex");if(typeof t=="string"&&t!=="math-json")return this.atomToString(this.root,t);let s,o;if(Ot(t)&&Ot(e)?(s=[this.normalizeRange([t,e])],o=a):ti(t)?(s=[this.normalizeRange(t)],o=e):Ui(t)?(s=t.ranges,o=e):(s=[this.normalizeRange([0,-1])],o=t),o!=null||(o="latex"),o==="math-json"){if(!globalThis.MathfieldElement.computeEngine)return window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`The CortexJS Compute Engine library is not available.
Load the library, for example with:
import "https://esm.run/@cortex-js/compute-engine"`),'["Error", "compute-engine-not-available"]';let l=this.getValue({ranges:s},"latex-unstyled");try{let u=globalThis.MathfieldElement.computeEngine.parse(l);return JSON.stringify(u.json)}catch(u){return JSON.stringify(["Error",`'${u.toString()}'`])}}if(o.startsWith("latex")){let l={expandMacro:o==="latex-expanded",skipStyles:o==="latex-unstyled",skipPlaceholders:o==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode};return R(s.map(u=>b.serialize(this.getAtoms(u),l)))}return s.map(l=>this.getAtoms(l).map(u=>this.atomToString(u,o)).join("")).join("")}extendSelectionTo(t,e){return!this.mathfield.contentEditable&&this.mathfield.userSelect==="none"?!1:this.deferNotifications({selection:!0},()=>{let a=this.normalizeRange([t,e]),[s,o]=a,{parent:l}=this.at(o);if(l&&(l.type==="genfrac"||l.type==="subsup"))for(;l!==this.root&&Nc(this,l,[s,o]);)o=this.offsetOf(l),l=l.parent;for(l=this.at(s).parent;l!==this.root&&Nc(this,l,[s,o]);)s=this.offsetOf(l.leftSibling),l=l.parent;if(l=this.at(o).parent,l?.type==="genfrac")for(;l!==this.root&&Nc(this,l,[s,o]);)o=this.offsetOf(l),l=l.parent;this._position=this.normalizeOffset(e),this._selection={ranges:[[s,o]],direction:"none"}})}announce(t,e,a=[]){var s,o;((o=(s=this.mathfield.host)==null?void 0:s.dispatchEvent(new CustomEvent("announce",{detail:{command:t,previousPosition:e,atoms:a},cancelable:!0,bubbles:!0,composed:!0})))==null||o)&&ch(this.mathfield,t,e,a)}deferNotifications(t,e){let a=this._selection,s=this._anchor,o=this._position,l=this.silenceNotifications;this.silenceNotifications=!0;let u=this.root.changeCounter;e(),this.silenceNotifications=l;let c=s!==this._anchor||o!==this._position||am(this._selection,a)==="different";t.selection&&c&&this.selectionDidChange();let d=this.root.changeCounter!==u;return t.content&&d&&this.contentDidChange({inputType:t.type}),d||c}normalizeOffset(t){return t>0?t=Math.min(t,this.lastOffset):t<0&&(t=this.lastOffset+t+1),t}normalizeRange(t){let[e,a]=t;return e=this.normalizeOffset(e),a=this.normalizeOffset(a),e<a?[e,a]:[a,e]}normalizeSelection(t,e){var a;let s;if(Ot(t)){let o=this.normalizeOffset(t);if(Ot(e)){let l=this.normalizeOffset(e);s=o<=l?{ranges:[[o,l]],direction:"none"}:{ranges:[[l,o]],direction:"backward"}}else s={ranges:[[o,o]],direction:"none"}}else if(ti(t)){let o=this.normalizeOffset(t[0]),l=this.normalizeOffset(t[1]);s=o<=l?{ranges:[[o,l]],direction:"none"}:{ranges:[[l,o]],direction:"backward"}}else Ui(t)&&(s={ranges:t.ranges.map(o=>this.normalizeRange(o)),direction:(a=t.direction)!=null?a:"none"});return s}get parentEnvironment(){let t=this.at(this.position).parent;if(t){for(;t.parent&&t.type!=="array";)t=t.parent;if(t.type==="array")return t}}get parentCell(){return this.getParentCell(this.position)}getParentCell(t){var e;let a=this.at(t);if(a){for(;a&&((e=a.parent)==null?void 0:e.type)!=="array";)a=a.parent;if(!(!(a!=null&&a.parent)||a.parent.type!=="array"))return a.parentBranch}}contentWillChange(t={}){if(this.silenceNotifications||!this.mathfield)return!0;let e=this.silenceNotifications;this.silenceNotifications=!0;let a=this.mathfield.onContentWillChange(t);return this.silenceNotifications=e,a}contentDidChange(t){if(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this.mathfield)),this.silenceNotifications||!this.mathfield||!this.mathfield.host)return;let e=this.silenceNotifications;this.silenceNotifications=!0,setTimeout(()=>{var a;!this.mathfield||!rt(this.mathfield)||!this.mathfield.host||this.mathfield.host.dispatchEvent(new InputEvent("input",f(p({},t),{data:t.data?t.data:(a=t.inputType)!=null?a:"",bubbles:!0,composed:!0})))},0),this.silenceNotifications=e}selectionDidChange(){if(!this.mathfield)return;let t=this.silenceNotifications;t||(this.silenceNotifications=!0,this.mathfield.onSelectionDidChange()),this.silenceNotifications=t}};function uh(t,e,a,s){let o=t.offsetOf(e);if(o<a||o>s)return!1;if(!e.hasChildren)return!0;let l=t.offsetOf(e.firstChild);if(l>=a&&l<=s){let u=t.offsetOf(e.lastChild);if(u>=a&&u<=s)return!0}return!1}function Nc(t,e,a){if(!(e!=null&&e.hasChildren))return!1;let[s,o]=a,l=t.offsetOf(e.firstChild),u=t.offsetOf(e.lastChild);return l>=s&&l<=o&&u>=l&&u<=o}function Eo(t,e,a,s){var o,l,u,c,d,m;let g=a.parent;if(We(s)&&a instanceof I&&a.isMultiline&&Kb(t,a,s[0],e))return!0;if(g&&a instanceof G){let A=!s&&e==="forward"||s==="body"&&e==="backward",P=A?t.offsetOf(a.firstChild):t.offsetOf(a.lastChild);return A?a.rightDelim!=="?"&&a.rightDelim!=="."?(a.leftDelim=".",a.isDirty=!0):(g.addChildrenAfter(a.removeBranch("body"),a),g.removeChild(a),P--):a.leftDelim!=="?"&&a.leftDelim!=="."?(a.rightDelim=".",a.isDirty=!0):(g.addChildrenAfter(a.removeBranch("body"),a),g.removeChild(a),P--),t.position=P,!0}if(g&&a.type==="surd"){if(e==="forward"&&!s||e==="backward"&&s==="body"){let A=a.leftSibling;a.hasChildren&&g.addChildrenAfter(a.removeBranch("body"),a),g.removeChild(a),t.position=t.offsetOf(A)}else e==="forward"&&s==="body"?t.position=t.offsetOf(a):!s&&e==="backward"?a.hasChildren?t.position=t.offsetOf(a.lastChild):(t.position=Math.max(0,t.offsetOf(a)-1),g.removeChild(a)):s==="above"&&(a.hasEmptyBranch("above")&&a.removeBranch("above"),e==="backward"?t.position=t.offsetOf(a.leftSibling):t.position=t.offsetOf(a.body[0]));return!0}if(g&&(a.type==="box"||a.type==="enclose")){let A=s&&e==="backward"||!s&&e==="forward"?a.leftSibling:a.lastChild;return g.addChildrenAfter(a.removeBranch("body"),a),g.removeChild(a),t.position=t.offsetOf(A),!0}if(a.type==="genfrac"||a.type==="overunder"){if(!s)return a.type==="overunder"&&a.hasEmptyBranch("body")||a.type==="genfrac"&&a.hasEmptyBranch("below")&&a.hasEmptyBranch("above")?!1:(t.position=t.offsetOf(e==="forward"?a.firstChild:a.lastChild),!0);let A=xt.fractionNavigationOrder==="numerator-denominator"?"above":"below",P=A==="above"?"below":"above";if(g&&(e==="forward"&&s===A||e==="backward"&&s===P)){let W=a.removeBranch(A),me=a.removeBranch(P);return g.addChildrenAfter([...W,...me],a),g.removeChild(a),t.position=t.offsetOf(W.length>0?W[W.length-1]:me[0]),!0}return e==="backward"?t.position=t.offsetOf(a.leftSibling):t.position=t.offsetOf(a),!0}if(a.type==="extensible-symbol"||a.type==="subsup"){if(!s&&e==="forward")return!1;if(!s){if(a.subscript||a.superscript){let A=e==="forward"?(u=(o=a.superscript)==null?void 0:o[0])!=null?u:(l=a.subscript)==null?void 0:l[0]:(m=(c=a.subscript)==null?void 0:c[0].lastSibling)!=null?m:(d=a.superscript)==null?void 0:d[0].lastSibling;return A&&(t.position=t.offsetOf(A)),!0}return!1}if(!a.hasChildren&&a.type==="subsup"){let A=e==="forward"?t.offsetOf(a):Math.max(0,t.offsetOf(a)-1);return a.parent.removeChild(a),t.position=A,!0}if(s==="superscript")if(e==="backward"){let A=t.offsetOf(a.firstChild)-1;t.position=A}else a.subscript?t.position=t.offsetOf(a.subscript[0]):t.position=t.offsetOf(a);else s==="subscript"&&(e==="backward"&&a.superscript?t.position=t.offsetOf(a.superscript[0].lastSibling):e==="backward"?t.position=t.offsetOf(a.firstChild)-1:t.position=t.offsetOf(a));if(s&&a.hasEmptyBranch(s)&&(a.removeBranch(s),a.type==="subsup"&&!a.subscript&&!a.superscript)){let A=e==="forward"?t.offsetOf(a):Math.max(0,t.offsetOf(a)-1);a.parent.removeChild(a),t.position=A}return!0}if(g?.type==="genfrac"&&!s&&a.type!=="first"){let A=t.offsetOf(a.leftSibling);return g.removeChild(a),g.hasEmptyBranch("above")&&g.hasEmptyBranch("below")?(A=t.offsetOf(g.leftSibling),g.parent.removeChild(g),t.announce("delete",void 0,[g]),t.position=A,!0):(t.announce("delete",void 0,[a]),t.position=A,!0)}if(e==="backward"&&(g?.command==="\\ln"||g?.command==="\\log")&&a.parentBranch!=="body"){let A=t.offsetOf(g.leftSibling);return g.parent.removeChild(g),t.announce("delete",void 0,[g]),t.position=A,!0}return!1}function dh(t){return!t.mathfield.isSelectionEditable||!t.contentWillChange({inputType:"deleteContentBackward"})?!1:t.selectionIsCollapsed?t.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let e=t.at(t.position);if(!(e&&Eo(t,"backward",e))){if(e!=null&&e.isFirstSibling){if(Eo(t,"backward",e.parent,e.parentBranch))return;e=null}if(!e){t.announce("plonk");return}t.position=t.offsetOf(e.leftSibling),e.parent.removeChild(e),t.announce("delete",void 0,[e])}}):Je(t,le(t.selection),"deleteContentBackward")}function mh(t){return!t.mathfield.isSelectionEditable||!t.contentWillChange({inputType:"deleteContentForward"})?!1:t.selectionIsCollapsed?t.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var e,a;let s=t.at(t.position).rightSibling;if(s&&Eo(t,"forward",s))return;if(s){if(t.at(t.position).isLastSibling&&Eo(t,"forward",s.parent,s.parentBranch))return}else{if(s=t.at(t.position),s.isLastSibling&&Eo(t,"forward",s.parent,s.parentBranch))return;s=void 0}if(t.position===t.lastOffset||!s){t.announce("plonk");return}s.parent.removeChild(s);let o=(e=t.at(t.position))==null?void 0:e.rightSibling;for(;o?.type==="subsup";)o.parent.removeChild(o),o=(a=t.at(t.position))==null?void 0:a.rightSibling;t.announce("delete",void 0,[s])}):Je(t,le(t.selection),"deleteContentForward")}function Je(t,e,a){let s=t.getAtoms(e);if(s.length>0&&s[0].parent){let o=s[0];for(;o&&!(o instanceof I);)o=o.parent;let l=s[s.length-1];for(;l&&!(l instanceof I);)l=l.parent;if(o&&o instanceof I){let g=o;if(g&&l===g&&g.isMultiline){let[A,P]=[Math.min(t.position,t.anchor),Math.max(t.position,t.anchor)],[W,me]=t.at(A).parentBranch,[ve,He]=t.at(P).parentBranch;if(ve-W+1>2){t.extractAtoms([A,P]);for(let Xe=W+1;Xe<ve;Xe++)g.removeRow(Xe);return t.position=A,!0}}}let u=s[0].parent.firstChild;u.type==="first"&&(u=u.rightSibling);let c=s[s.length-1].parent.lastChild,d=s[0];d.type==="first"&&(d=d.rightSibling);let m=s[s.length-1];if(d===u&&m===c){let g=s[0].parent;g.parent&&g.type!=="prompt"&&(e=[t.offsetOf(g.leftSibling),t.offsetOf(g)])}if(s.length===1&&s[0].type==="placeholder"&&s[0].parent.type==="genfrac"){let g=s[0].parent,A=s[0].parentBranch==="below"?"above":"below",P=t.offsetOf(g.leftSibling);return t.deferNotifications({content:!0,selection:!0,type:a},()=>{var W,me;let ve=g.removeBranch(A);if(ve.length===1&&ve[0].type==="placeholder")(me=g.parent)==null||me.removeChild(g),t.position=Math.max(0,P);else{let He=g.parent.addChildrenAfter(ve,g);(W=g.parent)==null||W.removeChild(g),t.position=t.offsetOf(He)}})}}return t.deferNotifications({content:!0,selection:!0,type:a},()=>t.deleteAtoms(e))}function Kb(t,e,a,s){if(!(e instanceof I)||!e.isMultiline||e.rows.length===1||e.rows[a].length>1)return!1;let o=e.getCell(a,0);if(e.removeRow(a),s==="backward"){let l=e.getCell(a-1,0);t.position=t.offsetOf(l[l.length-1]),e.setCell(a-1,0,[...l,...o])}else{let l=e.getCell(a,0);t.position=t.offsetOf(l[0]),e.setCell(a,0,[...o,...l])}return!0}pe({deleteAll:t=>t.contentWillChange({inputType:"deleteContent"})&&Je(t,[0,-1],"deleteContent"),deleteForward:t=>mh(t),deleteBackward:t=>dh(t),deleteNextWord:t=>t.contentWillChange({inputType:"deleteWordForward"})&&Je(t,[t.anchor,hs(t,t.position,"forward")],"deleteWordForward"),deletePreviousWord:t=>t.contentWillChange({inputType:"deleteWordBackward"})&&Je(t,[t.anchor,hs(t,t.position,"backward")],"deleteWordBackward"),deleteToGroupStart:t=>t.contentWillChange({inputType:"deleteSoftLineBackward"})&&Je(t,[t.anchor,t.offsetOf(t.at(t.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:t=>t.contentWillChange({inputType:"deleteSoftLineForward"})&&Je(t,[t.anchor,t.offsetOf(t.at(t.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:t=>t.contentWillChange({inputType:"deleteHardLineBackward"})&&Je(t,[t.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:t=>t.contentWillChange({inputType:"deleteHardLineForward"})&&Je(t,[t.anchor,-1],"deleteHardLineForward")},{target:"model",audioFeedback:"delete",canUndo:!0,changeContent:!0,changeSelection:!0});var Ob=`<svg xmlns="http://www.w3.org/2000/svg" style="width: 21px;"  viewBox="0 0 576 512" role="img" aria-label="${z("tooltip.toggle virtual keyboard")}"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg>`,Bb=`<svg xmlns="http://www.w3.org/2000/svg" style="height: 18px;" viewBox="0 0 448 512" role="img" aria-label="${z("tooltip.menu")}"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>`,Ds=class{constructor(t,e){this.focusBlurInProgress=!1,this.connectedToVirtualKeyboard=!1;var a,s,o;this.options=p(f(p({},bn()),{macros:Ei(),registers:Pa()}),gn(e)),this.eventController=new AbortController;let l=this.eventController.signal;e.eventSink&&(this.host=e.eventSink),this.element=t,t.mathfield=this,this.blurred=!0,this.keystrokeCaptionVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.defaultStyle={},this.styleBias="left",this.options.defaultMode==="inline-math"?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline"),this.dirty=!1;let u=(s=(a=e.value)!=null?a:this.element.textContent)!=null?s:"";u=u.trim();let c=sc(this.options),d=he(u,{context:this.context}),m;d.length===1&&d[0].isRoot?m=d[0]:m=new b({type:"root",mode:c,body:d}),this.model=new Ts(this,c,m),this.undoManager=new us(this.model);let g=[];if(g.push("<span contenteditable=true role=textbox aria-autocomplete=none aria-multiline=false part=keyboard-sink class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=0></span>"),g.push('<span part=container class=ML__container  style="visibility:hidden">'),g.push("<span part=content class=ML__content>"),g.push(ec(this)),g.push("</span>"),window.mathVirtualKeyboard&&(g.push(`<div part=virtual-keyboard-toggle class=ML__virtual-keyboard-toggle role=button ${this.hasEditableContent?"":'style="display:none;"'} data-l10n-tooltip="tooltip.toggle virtual keyboard">`),g.push(Ob),g.push("</div>")),g.push('<div part=menu-toggle class=ML__menu-toggle role=button data-l10n-tooltip="tooltip.menu">'),g.push(Bb),g.push("</div>"),g.push("</span>"),g.push("<span class=ML__sr-only>"),g.push("<span role=status aria-live=assertive aria-atomic=true></span>"),g.push("</span>"),this.element.innerHTML=globalThis.MathfieldElement.createHTML(g.join("")),!this.element.children){console.error("%cMathLive 0.106.0: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include `runtimeCompiler: true` in your Vue configuration. There may a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");return}this._l10Subscription=N.subscribe(()=>N.update(this.element)),N.update(this.element),this.field=this.element.querySelector("[part=content]"),this.field.addEventListener("click",P=>P.stopImmediatePropagation(),{capture:!1,signal:l}),this.field.addEventListener("wheel",this,{passive:!1,signal:l}),"PointerEvent"in window?this.field.addEventListener("pointerdown",this,{signal:l}):this.field.addEventListener("mousedown",this,{signal:l}),(o=this.element.querySelector("[part=virtual-keyboard-toggle]"))==null||o.addEventListener("click",()=>{window.mathVirtualKeyboard.visible?window.mathVirtualKeyboard.hide():(window.mathVirtualKeyboard.show({animate:!0}),window.mathVirtualKeyboard.update(Vt(this)))},{signal:l}),this.field.addEventListener("contextmenu",this,{signal:l});let A=this.element.querySelector("[part=menu-toggle]");A?.addEventListener("pointerdown",P=>{if(P.currentTarget!==A)return;let W=this.menu;if(W.state!=="closed")return;this.element.classList.add("tracking");let me=A.getBoundingClientRect();W.modifiers=Nt(P),W.show({target:A,location:{x:me.left,y:me.bottom},onDismiss:()=>this.element.classList.remove("tracking")}),P.preventDefault(),P.stopPropagation()},{signal:l}),(this.model.atoms.length<=1||this.disabled||this.readOnly&&!this.hasEditableContent||this.userSelect==="none")&&(A.style.display="none"),this.ariaLiveText=this.element.querySelector("[role=status]"),this.keyboardDelegate=tp(this.element.querySelector(".ML__keyboard-sink"),this.element,this),window.addEventListener("resize",this,{signal:l}),document.addEventListener("scroll",this,{signal:l}),this.resizeObserver=new ResizeObserver(P=>{if(this.resizeObserverStarted){this.resizeObserverStarted=!1;return}U(this)}),this.resizeObserverStarted=!0,this.resizeObserver.observe(this.field),window.mathVirtualKeyboard.addEventListener("virtual-keyboard-toggle",this,{signal:l}),Be!=="ready"&&document.fonts.ready.then(()=>ao(this)),t.querySelector("[part=container]").style.removeProperty("visibility"),this.undoManager.startRecording(),this.undoManager.snapshot("set-value"),U(this)}connectToVirtualKeyboard(){this.connectedToVirtualKeyboard||(this.connectedToVirtualKeyboard=!0,window.addEventListener("message",this,{signal:this.eventController.signal}),window.mathVirtualKeyboard.connect(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this)),vo(this))}disconnectFromVirtualKeyboard(){this.connectedToVirtualKeyboard&&(window.removeEventListener("message",this),window.mathVirtualKeyboard.disconnect(),this.connectedToVirtualKeyboard=!1,_s())}showMenu(t){var e,a;let s=(a=(e=t?.location)!=null?e:Ji(this.field))!=null?a:void 0,o=t?.modifiers,l=this.element.querySelector("[part=container]");return this._menu.show({target:l,location:s,modifiers:o})}get colorMap(){return t=>{var e,a,s;return(s=(a=(e=this.options).colorMap)==null?void 0:a.call(e,t))!=null?s:Hr(t)}}get backgroundColorMap(){return t=>{var e,a,s,o,l,u;return(u=(l=(a=(e=this.options).backgroundColorMap)==null?void 0:a.call(e,t))!=null?l:(o=(s=this.options).colorMap)==null?void 0:o.call(s,t))!=null?u:Si(t)}}get smartFence(){var t;return(t=this.options.smartFence)!=null?t:!1}get readOnly(){var t;return(t=this.options.readOnly)!=null?t:!1}get disabled(){var t,e;return(e=(t=this.host)==null?void 0:t.disabled)!=null?e:!1}get contentEditable(){return this.host?this.host.getAttribute("contenteditable")!=="false":!1}get userSelect(){if(!this.host)return"";let t=getComputedStyle(this.host);return t.getPropertyValue("user-select")||t.getPropertyValue("-webkit-user-select")}get hasEditableContent(){return this.disabled||!this.contentEditable?!1:!this.readOnly||this.hasEditablePrompts}get hasEditablePrompts(){return this.readOnly&&!this.disabled&&this.contentEditable&&this.model.findAtom(t=>t.type==="prompt"&&!t.locked)!==void 0}get isSelectionEditable(){if(this.disabled||!this.contentEditable)return!1;if(!this.readOnly)return!0;let t=this.model.at(this.model.anchor),e=this.model.at(this.model.position),a=b.commonAncestor(t,e);return!!(a?.type==="prompt"||a!=null&&a.parentPrompt)}get letterShapeStyle(){var t;return(t=this.options.letterShapeStyle)!=null?t:"tex"}get minFontScale(){return this.options.minFontScale}get maxMatrixCols(){return this.options.maxMatrixCols}queryStyle(t){let e=ts(this,t);"verbatimColor"in e&&delete e.verbatimColor,"verbatimBackgroundColor"in e&&delete e.verbatimBackgroundColor;let a=Object.keys(e).length;if(a===0)return"all";if(a>1){for(let d of Object.keys(e)){let m=this.queryStyle({[d]:e[d]});if(m==="none")return"none";if(m==="some")return"some"}return"all"}let s=Object.keys(e)[0],o=e[s];if(this.model.selectionIsCollapsed)return rr(this)[s]===o?"all":"none";let l=this.model.getAtoms(this.model.selection,{includeChildren:!0}),u=l.length;if(u===0)return"none";let c=0;for(let d of l){if(d.type==="first"){u-=1;continue}d.style[s]===o&&(c+=1)}return c===0?"none":c===u?"all":"some"}get keybindings(){var t,e;if(this._keybindings)return this._keybindings;let[a,s]=op(this.options.keybindings,(t=Dr())!=null?t:Qm());return((e=Dr())==null?void 0:e.score)>0&&(this._keybindings=a,s.length>0&&console.error("MathLive 0.106.0: Invalid keybindings for current keyboard layout",s)),a}get menu(){return this._menu!=null||(this._menu=new Mo(ah(this),{host:this.host})),this._menu}set menuItems(t){this._menu?this._menu.menuItems=t:this._menu=new Mo(t,{host:this.host})}setOptions(t){var e;this.options=p(p({},this.options),gn(t)),this._keybindings=void 0,this.options.defaultMode==="inline-math"?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline");let a=this.options.defaultMode;a==="inline-math"&&(a="math"),((e=this.model.root.firstChild)==null?void 0:e.mode)!==a&&(this.model.root.firstChild.mode=a),this.options.readOnly&&this.hasFocus()&&window.mathVirtualKeyboard.visible&&this.executeCommand("hideVirtualKeyboard");let s=b.serialize([this.model.root],{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in t||this.model.getValue()!==s)&&tc(this),("value"in t||"registers"in t||"colorMap"in t||"backgroundColorMap"in t||"letterShapeStyle"in t||"minFontScale"in t||"maxMatrixCols"in t||"readOnly"in t||"placeholderContent"in t||"placeholderSymbol"in t)&&U(this)}getOptions(t){return or(this.options,t)}getOption(t){return or(this.options,t)}async handleEvent(t){var e;if(rt(this)){if(co(t)){if(!Gi(t.origin,(e=this.options.originValidator)!=null?e:"none"))throw new DOMException(`Message from unknown origin (${t.origin}) cannot be handled`,"SecurityError");let{action:a}=t.data;if(a==="execute-command"){let s=hi(t.data.command);if(!s||nr(s)==="virtual-keyboard")return;this.executeCommand(s)}else a==="update-state"||(a==="focus"?this.focus({preventScroll:!0}):a==="blur"&&this.blur());return}switch(t.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":this.userSelect!=="none"&&yc(this,t);break;case"pointerdown":!t.defaultPrevented&&this.userSelect!=="none"&&(yc(this,t),t.shiftKey===!1&&await Sc(t,this.element.querySelector("[part=container]"),this.menu)&&xi.stop());break;case"contextmenu":this.userSelect!=="none"&&t.shiftKey===!1&&await Sc(t,this.element.querySelector("[part=container]"),this.menu)&&xi.stop();break;case"virtual-keyboard-toggle":this.hasFocus()&&vo(this),this.hasFocus()&&(this.keyboardDelegate.blur(),this.keyboardDelegate.focus());break;case"resize":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>rt(this)&&this.onGeometryChange());break;case"scroll":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>rt(this)&&this.onGeometryChange());break;case"wheel":this.onWheel(t);break;case"message":break;default:console.warn("Unexpected event type",t.type)}}}dispose(){if(!rt(this))return;N.unsubscribe(this._l10Subscription),this.keyboardDelegate.dispose(),this.keyboardDelegate=void 0,this.eventController.abort(),this.eventController=void 0,this.resizeObserver.disconnect(),window.mathVirtualKeyboard.removeEventListener("virtual-keyboard-toggle",this),this.disconnectFromVirtualKeyboard(),this.model.dispose();let t=this.element;delete t.mathfield,this.element=void 0,this.host=void 0,this.field=void 0,this.ariaLiveText=void 0,Ep(),lp(),Pp()}flushInlineShortcutBuffer(t){if(t!=null||(t={defer:!1}),!t.defer){this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=0;return}this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(t){return nr(t)==="virtual-keyboard"?(this.focus({preventScroll:!0}),window.mathVirtualKeyboard.executeCommand(t),requestAnimationFrame(()=>window.mathVirtualKeyboard.update(Vt(this))),!1):pp(this,t)}get errors(){return ja(this.model.getValue(),{context:this.context})}getValue(t,e,a){return this.model.getValue(t,e,a)}setValue(t,e){var a;e=e??{mode:"math"},e.insertionMode===void 0&&(e.insertionMode="replaceAll"),(e.format===void 0||e.format==="auto")&&(e.format="latex"),(e.mode===void 0||e.mode==="auto")&&(e.mode=(a=sm(this.model,this.model.position))!=null?a:"math");let s=this.undoManager.canUndo();V.insert(this.model,t,e)&&(U(this),s||this.undoManager.reset(),this.undoManager.snapshot("set-value"))}get expression(){let t=globalThis.MathfieldElement.computeEngine;return t?t.box(t.parse(this.model.getValue("latex-unstyled"))):(console.error("MathLive 0.106.0:  no compute engine available. Make sure the Compute Engine library is loaded."),null)}scrollIntoView(){var t;if(!this.element)return;if(this.host){if(this.options.onScrollIntoView)this.options.onScrollIntoView(this);else if(this.host.scrollIntoView({block:"nearest",inline:"nearest"}),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.container===window.document.body){let s=window.mathVirtualKeyboard.boundingRect,o=this.host.getBoundingClientRect();o.bottom>s.top&&((t=window.document.scrollingElement)==null||t.scrollBy(0,o.bottom-s.top+8))}}this.dirty&&bt(this,{interactive:!0});let e=this.field.getBoundingClientRect(),a=null;if(this.model.selectionIsCollapsed)a=Ji(this.field);else{let s=Na(this);if(s.length>0){let o=-1/0,l=-1/0;for(let u of s)u.right>o&&(o=u.right),u.top<l&&(l=u.top);a={x:o+e.left-this.field.scrollLeft,y:l+e.top-this.field.scrollTop,height:0}}}if(this.host&&a){let s=this.host.getBoundingClientRect(),o=a.y,l=this.host.scrollTop;o<s.top?l=o-s.top+this.host.scrollTop:o>s.bottom&&(l=o-s.bottom+this.host.scrollTop+a.height),this.host.scroll({top:l,left:0})}if(a){let s=a.x-window.scrollX,o=this.field.scrollLeft;s<e.left?o=s-e.left+this.field.scrollLeft-20:s>e.right&&(o=s-e.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:o})}}insert(t,e){if(typeof t!="string"||t.length===0&&(e?.insertionMode==="insertBefore"||e?.insertionMode==="insertAfter")||t.length===0&&this.model.selectionIsCollapsed)return!1;if(this.flushInlineShortcutBuffer(),e=e??{mode:"math"},e.focus&&this.focus(),e.feedback&&(globalThis.MathfieldElement.keypressVibration&&Ro()&&navigator.vibrate(ic),globalThis.MathfieldElement.playSound("keypress")),t==="\\\\")lc(this.model);else if(t==="&")cc(this.model);else if(this.model.selectionIsCollapsed){let a=p({},rr(this));!/^[a-zA-Z0-9]$/.test(t)&&this.styleBias!=="none"&&(a.variant="normal",a.variantStyle=void 0),V.insert(this.model,t,p({style:a},e))}else V.insert(this.model,t,e);return this.snapshot(`insert-${this.model.at(this.model.position).type}`),U(this),e.scrollIntoView&&this.scrollIntoView(),!0}switchMode(t,e="",a=""){if(this.model.mode===t||!this.hasEditableContent||!this.contentEditable||this.disabled)return;let{model:s}=this,o=s.mode;if(s.mode=t,this.host&&!this.host.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))){s.mode=o;return}s.mode=o,s.deferNotifications({content:!!a||!!e,selection:!0,type:"insertText"},()=>{let l=s.at(s.position),u=(g,A)=>{if(!g)return;let P=s.mode==="math"?he(Yt(g,{format:"ascii-math"})[1],{context:this.context}):[...g].map(W=>new $e(W,W,{}));if(A.select){let W=l.parent.addChildrenAfter(P,l);s.setSelection(s.offsetOf(P[0].leftSibling),s.offsetOf(W))}else s.position=s.offsetOf(l.parent.addChildrenAfter(P,l));m=!0},c=(g,A)=>{let P=new Rt(g);l.parent.addChildAfter(P,l),A.select?s.setSelection(s.offsetOf(P.firstChild),s.offsetOf(P.lastChild)):s.position=s.offsetOf(P.lastChild),m=!0},d=()=>{let g=t==="latex"?"latex":t==="math"?"plain-text":"ascii-math",A=le(s.selection),P=this.model.getValue(A,g),W=this.model.extractAtoms(A);return W.length===1&&W[0].type==="placeholder"&&(P=a),l=s.at(A[0]),P},m=!1;if(this.flushInlineShortcutBuffer(),this.stopCoalescingUndo(),$t(this,"accept"),s.selectionIsCollapsed)u(e,{select:!1}),s.mode=t,t==="latex"?c(a,{select:!1}):u(a,{select:!1});else{let g=d();s.mode=t,t==="latex"?c(g,{select:!0}):u(g,{select:!0})}return U(this),this.undoManager.snapshot(t==="latex"?"insert-latex":"insert"),m}),s.mode=t,window.mathVirtualKeyboard.update(Vt(this))}hasFocus(){return!this.blurred}focus(t){var e;this.focusBlurInProgress||(this.hasFocus()||(this.onFocus(),this.model.announce("line")),(e=t?.preventScroll)!=null&&e||this.scrollIntoView())}blur(){this.disconnectFromVirtualKeyboard(),this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]},this.focus()}applyStyle(t,e={}){var a;let s,o="set",l=!1;ti(e)?s=e:(e.operation==="toggle"&&(o="toggle"),s=e.range,l=(a=e.silenceNotifications)!=null?a:!1),s&&(s=this.model.normalizeRange(s)),s&&s[0]===s[1]&&(s=void 0);let u=ts(this,t);if(s===void 0&&this.model.selectionIsCollapsed){if(o==="set"){let d=p({},this.defaultStyle);"color"in u&&delete d.verbatimColor,"backgroundColor"in u&&delete d.verbatimBackgroundColor,this.defaultStyle=p(p({},d),u),this.styleBias="none";return}let c=p({},this.defaultStyle);for(let d of Object.keys(u))c[d]===u[d]?(d==="color"&&delete c.verbatimColor,d==="backgroundColor"&&delete c.verbatimBackgroundColor,delete c[d]):c[d]=u[d];this.defaultStyle=c,this.styleBias="none";return}this.model.deferNotifications({content:!l,type:"insertText"},()=>{if(s===void 0)for(let c of this.model.selection.ranges)eo(this.model,c,u,{operation:o});else eo(this.model,s,u,{operation:o})}),U(this)}toggleContextMenu(){var t;let e=this.menu;if(!e.visible)return!1;if(e.state==="open")return e.hide(),!0;let a=(t=$a(this,this.model.position))==null?void 0:t.bounds;if(!a)return!1;let s={x:a.right,y:a.bottom};return e.show({target:this.element.querySelector("[part=container]"),location:s,onDismiss:()=>{var o;return(o=this.element)==null?void 0:o.focus()}}),!0}getPrompt(t){return this.model.findAtom(a=>a.type==="prompt"&&a.placeholderId===t)}getPromptValue(t,e){let a=this.getPrompt(t);if(!a)return"";let s=this.model.offsetOf(a.firstChild),o=this.model.offsetOf(a.lastChild);return this.model.getValue(s,o,e)}getPrompts(t){return this.model.atoms.filter(e=>e.type!=="prompt"?!1:t?!(t.id&&e.placeholderId!==t.id||t.locked&&e.locked!==t.locked||t.correctness==="undefined"&&e.correctness||t.correctness&&e.correctness!==t.correctness):!0).map(e=>e.placeholderId)}setPromptValue(t,e,a){if(e!==void 0){let s=this.getPrompt(t);if(!s){console.error(`MathLive 0.106.0: unknown prompt ${t}`);return}let o=this.model.getBranchRange(this.model.offsetOf(s),"body");this.model.setSelection(o),this.insert(e,f(p({},a),{insertionMode:"replaceSelection"}))}a!=null&&a.silenceNotifications&&(this.valueOnFocus=this.getValue()),U(this)}setPromptState(t,e,a){let s=this.getPrompt(t);if(!s){console.error(`MathLive 0.106.0: unknown prompt ${t}`);return}e==="undefined"?s.correctness=void 0:typeof e=="string"&&(s.correctness=e),typeof a=="boolean"&&(s.locked=a,s.captureSelection=a),U(this)}getPromptState(t){let e=this.getPrompt(t);return e?[e.correctness,e.locked]:(console.error(`MathLive 0.106.0: unknown prompt ${t}`),[void 0,!0])}getPromptRange(t){let e=this.getPrompt(t);return e?this.model.getBranchRange(this.model.offsetOf(e),"body"):(console.error(`MathLive 0.106.0: unknown prompt ${t}`),[0,0])}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this))}snapshot(t){var e;this.undoManager.snapshot(t)&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this)),(e=this.host)==null||e.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}stopCoalescingUndo(){this.undoManager.stopCoalescing(this.model.selection)}stopRecording(){this.undoManager.stopRecording()}startRecording(){this.undoManager.startRecording()}undo(){var t;this.undoManager.undo()&&((t=this.host)==null||t.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var t;this.undoManager.redo()&&((t=this.host)==null||t.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"redo"}})))}resetUndo(){var t;(t=this.undoManager)==null||t.reset()}onSelectionDidChange(){var t,e;let a=this.model;if(this.keyboardDelegate.setValue(a.getValue(a.selection,"latex-expanded")),a.selectionIsCollapsed){let s=io(a),o=a.position,l=a.at(o),u=(t=l.mode)!=null?t:sc(this.options);if(s&&(o<a.offsetOf(s.firstChild)-1||o>a.offsetOf(s.lastChild)+1))$t(this,"accept",{mode:u}),a.position=a.offsetOf(l);else{let c=a.at(o+1);c?.type==="first"&&c.mode==="latex"?a.position=o+1:s&&c?.mode!=="latex"?a.position=o-1:this.switchMode(u)}}(e=this.host)==null||e.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0})),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this)),vo(this)}onContentWillChange(t){var e,a,s;return(s=(a=this.host)==null?void 0:a.dispatchEvent(new InputEvent("beforeinput",f(p({},t),{data:t.data?t.data:(e=t.inputType)!=null?e:"",cancelable:!0,bubbles:!0,composed:!0}))))!=null?s:!0}onFocus(){this.focusBlurInProgress||!this.blurred||(this.focusBlurInProgress=!0,this.blurred=!1,this.stopCoalescingUndo(),this.valueOnFocus=this.model.getValue(),this.hasEditablePrompts&&!this.model.at(this.model.anchor).parentPrompt&&this.executeCommand("moveToNextPlaceholder"),bt(this,{interactive:!0}),setTimeout(()=>{var t;if(!rt(this))return;let e=new AbortController,a=e.signal;for(let s of["focus","blur","focusin","focusout"])(t=this.host)==null||t.addEventListener(s,o=>{o.preventDefault(),o.stopPropagation()},{once:!0,capture:!0,signal:a});this.keyboardDelegate.blur(),this.keyboardDelegate.focus(),this.connectToVirtualKeyboard(),this.focusBlurInProgress=!1,e.abort()},60))}onBlur(){var t,e,a;if(!(this.focusBlurInProgress||this.blurred)&&(this.focusBlurInProgress=!0,this.stopCoalescingUndo(),this.blurred=!0,this.ariaLiveText.textContent="",Br(this),this.model.getValue()!==this.valueOnFocus&&((t=this.host)==null||t.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),this.disconnectFromVirtualKeyboard(),(e=this.host)==null||e.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),(a=this.host)==null||a.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0})),U(this),this.focusBlurInProgress=!1,_s(),mn.restoreFocusWhenDocumentFocused)){let s=new AbortController,o=s.signal;window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{rt(this)&&this.focus({preventScroll:!0})},{once:!0,signal:o})},{once:!0,signal:o}),document.addEventListener("focusin",()=>s.abort(),{once:!0}),document.addEventListener("click",()=>s.abort(),{once:!0})}}onInput(t){bo(this,t)}onKeystroke(t){return fc(this,t)}onCompositionStart(t){Je(this.model,le(this.model.selection),"insertText");let e=Ji(this.field);e&&requestAnimationFrame(()=>{bt(this),this.keyboardDelegate.moveTo(e.x,e.y-e.height)})}onCompositionUpdate(t){yp(this.model,t),U(this)}onCompositionEnd(t){xp(this.model),bo(this,t,{simulateKeystroke:!0})}onCut(t){if(!this.isSelectionEditable){this.model.announce("plonk");return}this.model.contentWillChange({inputType:"deleteByCut"})&&(this.stopCoalescingUndo(),t.clipboardData?V.onCopy(this,t):V.copyToClipboard(this,"latex"),Je(this.model,le(this.model.selection),"deleteByCut"),this.snapshot("cut"),U(this))}onCopy(t){t.clipboardData?V.onCopy(this,t):V.copyToClipboard(this,"latex")}onPaste(t){let e=this.isSelectionEditable;return e&&(e=V.onPaste(this.model.at(this.model.position).mode,this,t.clipboardData)),e||this.model.announce("plonk"),t.preventDefault(),t.stopPropagation(),e}onGeometryChange(){var t;(t=this._menu)==null||t.hide(),dn(this),vo(this)}onWheel(t){let e=5*t.deltaX;if(!Number.isFinite(e)||e===0)return;let a=this.field;e<0&&a.scrollLeft===0||e>0&&a.offsetWidth+a.scrollLeft>=a.scrollWidth||(a.scrollBy({top:0,left:e}),t.preventDefault(),t.stopPropagation())}getHTMLElement(t){let e=t;for(;!e.id&&e.hasChildren;)e=t.children[0];return this.field.querySelector(`[data-atom-id="${e.id}"]`)}get context(){var t,e;return{registers:(t=this.options.registers)!=null?t:{},smartFence:this.smartFence,letterShapeStyle:this.letterShapeStyle,minFontScale:this.minFontScale,maxMatrixCols:this.maxMatrixCols,placeholderSymbol:(e=this.options.placeholderSymbol)!=null?e:"",colorMap:a=>this.colorMap(a),backgroundColorMap:a=>this.backgroundColorMap(a),getMacro:a=>Ti(a,this.options.macros),atomIdsSettings:{seed:"random",groupNumbers:!1}}}};pe({speak:(t,e,a)=>Rb(t,e,a)},{target:"mathfield"});function Rb(t,e,a){var s;a=a??{withHighlighting:!1};let{model:o}=t;function l(g){let A=null;switch(g){case"all":A=o.root;break;case"selection":A=o.getAtoms(o.selection);break;case"left":{A=o.getAtoms(o.offsetOf(o.at(o.position).leftSibling),o.position);break}case"right":{A=o.getAtoms(o.position,o.offsetOf(o.at(o.position).rightSibling));break}case"group":A=o.getAtoms(o.getSiblingsRange(o.position));break;case"parent":{let{parent:P}=o.at(o.position);P!=null&&P.parent?A=P:A=o.root;break}default:A=o.root}return A}function u(g){let A="";switch(g){case"all":console.error("Internal failure: speak all failed");break;case"selection":A="no selection";break;case"left":A="at start";break;case"right":A="at end";break;case"group":console.error("Internal failure: speak group failed");break;case"parent":A="no parent";break;default:console.error('unknown speak_ param value: "'+g+'"');break}return A}let c=globalThis.MathfieldElement,d=l(e);if(d===null)return(s=c.speakHook)==null||s.call(c,u(e)),!1;(a.withHighlighting||c.speechEngine==="amazon")&&(c.textToSpeechMarkup=globalThis.sre&&c.textToSpeechRules==="sre"?"ssml_step":"ssml");let m=Mt(d);return Me()&&a.withHighlighting?(Wt().readAloudMathfield=t,bt(t,{forHighlighting:!0}),c.readAloudHook&&c.readAloudHook(t.field,m)):c.speakHook&&c.speakHook(m),!1}function ph(t){var e,a;if(!Me())return;let s=globalThis.MathfieldElement;if(!s.speechEngine||s.speechEngine==="local"){let o=new SpeechSynthesisUtterance(t);globalThis.speechSynthesis.speak(o)}else if(s.speechEngine==="amazon")if(!("AWS"in window))console.error("MathLive 0.106.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");else{let o=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),l={OutputFormat:"mp3",VoiceId:(e=s.speechEngineVoice)!=null?e:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes((a=s.speechEngineVoice)!=null?a:"Joanna")?"neural":"standard",Text:t,TextType:"ssml"};o.synthesizeSpeech(l,(u,c)=>{if(u)console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech()\` error: ${u}`);else if(c!=null&&c.AudioStream){let d=new Uint8Array(c.AudioStream),m=new Blob([d.buffer],{type:"audio/mpeg"}),g=URL.createObjectURL(m);new Audio(g).play().catch(A=>console.error(A))}})}else s.speechEngine==="google"&&console.error("MathLive 0.106.0: The Google speech engine is not supported yet. Please come again.")}function hh(t){if(t&&(t.classList.remove("ML__highlight"),t.children))for(let e of t.children)hh(e)}function $c(t,e){var a;t&&(!e||((a=t.dataset)==null?void 0:a.atomId)===e?(t.classList.add("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(s=>{s instanceof HTMLElement&&$c(s)})):(t.classList.remove("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(s=>{s instanceof HTMLElement&&$c(s,e)})))}function fh(t,e){var a;if(!Me())return;if(globalThis.MathfieldElement.speechEngine!=="amazon"){console.error("MathLive 0.106.0: Use Amazon TTS Engine for synchronized highlighting"),typeof globalThis.MathfieldElement.speakHook=="function"&&globalThis.MathfieldElement.speakHook(e);return}if(!globalThis.AWS){console.error("MathLive 0.106.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");return}let s=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),o={OutputFormat:"json",VoiceId:(a=globalThis.MathfieldElement.speechEngineVoice)!=null?a:"Joanna",Engine:"standard",Text:e,TextType:"ssml",SpeechMarkTypes:["ssml"]};Wt().readAloudElement=t,s.synthesizeSpeech(o,(l,u)=>{if(l){console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech()\` error: ${l}`);return}if(!(u!=null&&u.AudioStream))return;let c=new TextDecoder("utf-8").decode(new Uint8Array(u.AudioStream));Wt().readAloudMarks=c.split(`
`).map(d=>d?JSON.parse(d):{}),Wt().readAloudTokens=[];for(let d of Wt().readAloudMarks)d.value&&Wt().readAloudTokens.push(d.value);Wt().readAloudCurrentMark="",o.OutputFormat="mp3",o.SpeechMarkTypes=[],s.synthesizeSpeech(o,(d,m)=>{if(d){console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech("${e}") error:${d}`);return}if(!(m!=null&&m.AudioStream))return;let g=new Uint8Array(m.AudioStream),A=new Blob([g.buffer],{type:"audio/mpeg"}),P=URL.createObjectURL(A),W=Wt();W.readAloudAudio?W.readAloudAudio.pause():(W.readAloudAudio=new Audio,W.readAloudAudio.addEventListener("ended",()=>{let me=W.readAloudMathfield;W.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),me?(bt(me),W.readAloudElement=null,W.readAloudMathfield=null,W.readAloudTokens=[],W.readAloudMarks=[],W.readAloudCurrentMark=""):hh(W.readAloudElement)}),W.readAloudAudio.addEventListener("timeupdate",()=>{let me="",ve=W.readAloudAudio.currentTime*1e3+100;for(let He of W.readAloudMarks)He.time<ve&&(me=He.value);W.readAloudCurrentMark!==me&&(W.readAloudCurrentToken=me,me&&me===W.readAloudFinalToken?W.readAloudAudio.pause():(W.readAloudCurrentMark=me,$c(W.readAloudElement,W.readAloudCurrentMark)))})),W.readAloudAudio.src=P,W.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),W.readAloudAudio.play()})})}Me()||console.error('MathLive 0.106.0: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var X=new WeakMap,Pb=.5,qr={letterShapeStyle:"mf.letterShapeStyle = ...",horizontalSpacingScale:'Removed. Use `"thinmuskip"`, `"medmuskip"`, and `"thickmuskip"` registers ',macros:"mf.macros = ...",registers:"mf.registers = ...",backgroundColorMap:"mf.backgroundColorMap = ...",colorMap:"mf.colorMap = ...",enablePopover:"mf.popoverPolicy = ...",mathModeSpace:"mf.mathModeSpace = ...",placeholderSymbol:"mf.placeholderSymbol = ...",readOnly:"mf.readOnly = ...",removeExtraneousParentheses:"mf.removeExtraneousParentheses = ...",scriptDepth:"mf.scriptDepth = ...",smartFence:"mf.smartFence = ...",smartMode:"mf.smartMode = ...",smartSuperscript:"mf.smartSuperscript = ...",inlineShortcutTimeout:"mf.inlineShortcutTimeout = ...",inlineShortcuts:"mf.inlineShortcuts = ...",keybindings:"mf.keybindings = ...",virtualKeyboardMode:"mf.mathVirtualKeyboardPolicy = ...",customVirtualKeyboardLayers:"mathVirtualKeyboard.layers = ...",customVirtualKeyboards:"mathVirtualKeyboard.layouts = ...",keypressSound:"mathVirtualKeyboard.keypressSound = ...",keypressVibration:"mathVirtualKeyboard.keypressVibration = ...",plonkSound:"mathVirtualKeyboard.plonkSound = ...",virtualKeyboardContainer:"mathVirtualKeyboard.container = ...",virtualKeyboardLayout:"mathVirtualKeyboard.alphabeticLayout = ...",virtualKeyboardTheme:"No longer supported",virtualKeyboardToggleGlyph:"No longer supported",virtualKeyboardToolbar:"mathVirtualKeyboard.editToolbar = ...",virtualKeyboards:"Use `mathVirtualKeyboard.layouts`",speechEngine:"`MathfieldElement.speechEngine`",speechEngineRate:"`MathfieldElement.speechEngineRate`",speechEngineVoice:"`MathfieldElement.speechEngineVoice`",textToSpeechMarkup:"`MathfieldElement.textToSpeechMarkup`",textToSpeechRules:"`MathfieldElement.textToSpeechRules`",textToSpeechRulesOptions:"`MathfieldElement.textToSpeechRulesOptions`",readAloudHook:"`MathfieldElement.readAloudHook`",speakHook:"`MathfieldElement.speakHook`",computeEngine:"`MathfieldElement.computeEngine`",fontsDirectory:"`MathfieldElement.fontsDirectory`",soundsDirectory:"`MathfieldElement.soundsDirectory`",createHTML:"`MathfieldElement.createHTML`",onExport:"`mf.onExport`",onInlineShortcut:"`mf.onInlineShortcut`",onScrollIntoView:"`mf.onScrollIntoView`",locale:"MathfieldElement.locale = ...",strings:"MathfieldElement.strings = ...",decimalSeparator:"MathfieldElement.decimalSeparator = ...",fractionNavigationOrder:"MathfieldElement.fractionNavigationOrder = ..."},oe=class Q5 extends HTMLElement{constructor(e){if(super(),this._observer=null,e){let a=[];for(let s of Object.keys(e))if(qr[s])if(qr[s].startsWith("mf."))if(qr[s].startsWith(`mf.${s}`))a.push(`Option \`${s}\` cannot be used as a constructor option. Use ${qr[s]}`);else{let o=qr[s].match(/([a-zA-Z]+) =/);a.push(`Option \`${s}\` has been renamed \`${o[1]}\``)}else a.push(`Option \`${s}\` cannot be used as a constructor option. Use ${qr[s]}`);if(a.length>0){console.group("%cMathLive 0.106.0: %cInvalid Options","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn("Some of the options passed to `new MathfieldElement(...)` are invalid. \n          See mathfield/changelog/ for details.");for(let s of a)console.warn(s);console.groupEnd()}}if(Ln()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open",delegatesFocus:!0}),this.shadowRoot&&"adoptedStyleSheets"in this.shadowRoot){this.shadowRoot.adoptedStyleSheets=[ii("core"),ii("mathfield"),ii("mathfield-element"),ii("ui"),ii("menu")],this.shadowRoot.appendChild(document.createElement("span"));let a=document.createElement("slot");a.style.display="none",this.shadowRoot.appendChild(a)}else this.shadowRoot.innerHTML="<style>"+Er("core")+Er("mathfield")+Er("mathfield-element")+Er("ui")+Er("menu")+'</style><span></span><slot style="display:none"></slot>';e&&this._setOptions(e)}static get formAssociated(){return Ln()}static get optionsAttributes(){return{"default-mode":"string","letter-shape-style":"string","min-font-scale":"number","max-matrix-cols":"number","popover-policy":"string","math-mode-space":"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","inline-shortcut-timeout":"string","script-depth":"string",placeholder:"string","virtual-keyboard-target-origin":"string","math-virtual-keyboard-policy":"string"}}static get observedAttributes(){return[...Object.keys(this.optionsAttributes),"contenteditable","disabled","readonly","read-only"]}static get fontsDirectory(){return this._fontsDirectory}static set fontsDirectory(e){e!==this._fontsDirectory&&(this._fontsDirectory=e,dp())}get fontsDirectory(){throw new Error("Use MathfieldElement.fontsDirectory instead")}set fontsDirectory(e){throw new Error("Use MathfieldElement.fontsDirectory instead")}static get soundsDirectory(){return this._soundsDirectory}static set soundsDirectory(e){this._soundsDirectory=e,this.audioBuffers={}}get soundsDirectory(){throw new Error("Use MathfieldElement.soundsDirectory instead")}set soundsDirectory(e){throw new Error("Use MathfieldElement.soundsDirectory instead")}static get keypressSound(){return this._keypressSound}static set keypressSound(e){var a,s,o;this.audioBuffers={},e===null?this._keypressSound={spacebar:null,return:null,delete:null,default:null}:typeof e=="string"?this._keypressSound={spacebar:e,return:e,delete:e,default:e}:typeof e=="object"&&"default"in e&&(this._keypressSound={spacebar:(a=e.spacebar)!=null?a:e.default,return:(s=e.return)!=null?s:e.default,delete:(o=e.delete)!=null?o:e.default,default:e.default})}static get plonkSound(){return this._plonkSound}static set plonkSound(e){this.audioBuffers={},this._plonkSound=e}static get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}static get speechEngine(){return this._speechEngine}static set speechEngine(e){this._speechEngine=e}static get speechEngineRate(){return this._speechEngineRate}static set speechEngineRate(e){this._speechEngineRate=e}static get speechEngineVoice(){return this._speechEngineVoice}static set speechEngineVoice(e){this._speechEngineVoice=e}static get textToSpeechMarkup(){return this._textToSpeechMarkup}static set textToSpeechMarkup(e){this._textToSpeechMarkup=e}static get textToSpeechRules(){return this._textToSpeechRules}static set textToSpeechRules(e){this._textToSpeechRules=e}static get textToSpeechRulesOptions(){return this._textToSpeechRulesOptions}static set textToSpeechRulesOptions(e){this._textToSpeechRulesOptions=e}static get locale(){return N.locale}static set locale(e){e==="auto"&&(e=navigator.language.slice(0,5)),N.locale=e}get locale(){throw new Error("Use MathfieldElement.locale instead")}set locale(e){throw new Error("Use MathfieldElement.locale instead")}static get strings(){return N.strings}static set strings(e){N.merge(e)}get strings(){throw new Error("Use MathfieldElement.strings instead")}set strings(e){throw new Error("Use MathfieldElement.strings instead")}static get decimalSeparator(){return this._decimalSeparator}static set decimalSeparator(e){this._decimalSeparator=e,this._computeEngine&&(this._computeEngine.decimalSeparator=this.decimalSeparator===","?"{,}":".")}get decimalSeparator(){throw new Error("Use MathfieldElement.decimalSeparator instead")}set decimalSeparator(e){throw new Error("Use MathfieldElement.decimalSeparator instead")}static get fractionNavigationOrder(){return sn.fractionNavigationOrder}static set fractionNavigationOrder(e){if(e!=="numerator-denominator"&&e!=="denominator-numerator")throw new Error("Invalid value");sn.fractionNavigationOrder!==e&&(sn.fractionNavigationOrder=e,rc())}static get computeEngine(){var e,a;if(this._computeEngine===void 0){let s=(e=window[Symbol.for("io.cortexjs.compute-engine")])==null?void 0:e.ComputeEngine;if(!s)return null;this._computeEngine=new s,this._computeEngine&&this.decimalSeparator===","&&(this._computeEngine.decimalSeparator="{,}")}return(a=this._computeEngine)!=null?a:null}static set computeEngine(e){this._computeEngine=e}get computeEngine(){throw new Error("Use MathfieldElement.computeEngine instead")}set computeEngine(e){throw new Error("Use MathfieldElement.computeEngine instead")}static get isFunction(){return typeof this._isFunction!="function"?()=>!1:this._isFunction}static set isFunction(e){this._isFunction=e,rc()}static async loadSound(e){delete this.audioBuffers[e];let a="";switch(e){case"keypress":a=this._keypressSound.default;break;case"return":a=this._keypressSound.return;break;case"spacebar":a=this._keypressSound.spacebar;break;case"delete":a=this._keypressSound.delete;break;case"plonk":a=this.plonkSound;break}if(typeof a!="string")return;a=a.trim();let s=this.soundsDirectory;if(!(s==null||s==="null"||a==="none"||a==="null"))try{let o=await(await fetch(await rs(`${s}/${a}`))).arrayBuffer(),l=await this.audioContext.decodeAudioData(o);this.audioBuffers[e]=l}catch{}}static async playSound(e){if((this.audioContext.state==="suspended"||this.audioContext.state==="interrupted")&&await this.audioContext.resume(),this.audioBuffers[e]||await this.loadSound(e),!this.audioBuffers[e])return;let a=this.audioContext.createBufferSource();a.buffer=this.audioBuffers[e];let s=this.audioContext.createGain();s.gain.value=Pb,a.connect(s).connect(this.audioContext.destination),a.start()}showMenu(e){var a,s;return(s=(a=this._mathfield)==null?void 0:a.showMenu(e))!=null?s:!1}get mathVirtualKeyboard(){throw new Error("The `mathVirtualKeyboard` property is not available on the MathfieldElement. Use `window.mathVirtualKeyboard` instead.")}onPointerDown(){window.addEventListener("pointerup",e=>{let a=this._mathfield;if(a&&e.target===this&&!a.disabled){this.dispatchEvent(new MouseEvent("click",{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,movementX:e.movementX,movementY:e.movementY,relatedTarget:e.relatedTarget,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey}));let s=this.getOffsetFromPoint(e.clientX,e.clientY);s>=0&&Q5.openUrl(fm(a,s)),e.pointerType==="touch"&&this.selectionIsCollapsed&&(this.position=s)}},{once:!0})}getPromptValue(e,a){var s,o;return(o=(s=this._mathfield)==null?void 0:s.getPromptValue(e,a))!=null?o:""}setPromptValue(e,a,s){var o;(o=this._mathfield)==null||o.setPromptValue(e,a,s)}getPromptRange(e){var a,s;return(s=(a=this._mathfield)==null?void 0:a.getPromptRange(e))!=null?s:null}getPrompts(e){var a,s;return(s=(a=this._mathfield)==null?void 0:a.getPrompts(e))!=null?s:[]}get form(){var e;return(e=this._internals)==null?void 0:e.form}get name(){var e;return(e=this.getAttribute("name"))!=null?e:""}get type(){return this.localName}get mode(){var e,a;return(a=(e=this._mathfield)==null?void 0:e.model.mode)!=null?a:this.defaultMode==="text"?"text":"math"}set mode(e){var a;(a=this._mathfield)==null||a.switchMode(e)}get expression(){if(this._mathfield)return window[Symbol.for("io.cortexjs.compute-engine")]?this._mathfield.expression:(console.error(`MathLive 0.106.0: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://esm.run/@cortex-js/compute-engine"`),null)}set expression(e){var a,s;if(!this._mathfield)return;let o=(s=(a=Q5.computeEngine)==null?void 0:a.box(e).latex)!=null?s:null;o!==null&&this._mathfield.setValue(o),window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`MathLive 0.106.0: The Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://esm.run/@cortex-js/compute-engine"`)}get errors(){var e,a;return(a=(e=this._mathfield)==null?void 0:e.errors)!=null?a:[]}_getOptions(e){return this._mathfield?or(this._mathfield.options,e):X.has(this)?p({},or(p(p({},bn()),gn(X.get(this).options)),e)):null}getOptions(e){return console.warn("%cMathLive 0.106.0: %cDeprecated Usage%c\n      `mf.getOptions()` is deprecated. Read the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._mathfield?or(this._mathfield.options,e):X.has(this)?or(p(p({},bn()),gn(X.get(this).options)),e):null}reflectAttributes(){let e=bn(),a=this._getOptions();Object.keys(Q5.optionsAttributes).forEach(s=>{let o=ar(s);Q5.optionsAttributes[s]==="on/off"?e[o]!==a[o]?this.setAttribute(s,a[o]?"on":"off"):this.removeAttribute(s):e[o]!==a[o]&&(Q5.optionsAttributes[s]==="boolean"?a[o]?this.setAttribute(s,""):this.removeAttribute(s):(typeof a[o]=="string"||typeof a[o]=="number")&&this.setAttribute(s,a[o].toString()))})}getOption(e){return console.warn("%cMathLive 0.106.0: %cDeprecated Usage%c\n      `mf.getOption()` is deprecated. Read the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._getOptions([e])[e]}_getOption(e){return this._getOptions([e])[e]}_setOptions(e){if(this._mathfield)this._mathfield.setOptions(e);else if(X.has(this)){let a=p(p({},X.get(this).options),e);X.set(this,f(p({},X.get(this)),{selection:{ranges:a.readOnly?[[0,0]]:[[0,-1]]},options:a}))}else X.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:e,menuItems:void 0});this.reflectAttributes()}setOptions(e){console.group("%cMathLive 0.106.0: %cDeprecated Usage","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn(" `mf.setOptions()` is deprecated. Set the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.");for(let a of Object.keys(e))qr[a]&&console.warn(`\`mf.setOptions({${a}:...})\` -> ${qr[a]}`);console.groupEnd(),this._setOptions(e)}executeCommand(...e){var a,s;let o;if(e.length===1?o=e[0]:o=[e[0],...e.slice(1)],o)return(s=(a=this._mathfield)==null?void 0:a.executeCommand(o))!=null?s:!1;throw new Error("Invalid selector")}getValue(e,a,s){var o,l;if(this._mathfield)return this._mathfield.model.getValue(e,a,s);if(X.has(this)){let u,c,d;if(Ui(e)?([u,c]=e.ranges[0],d=a):ti(e)?([u,c]=e,d=a):Ot(e)&&Ot(a)?(u=e,c=a,d=s):(u=0,c=-1,d=e),(d===void 0||d==="latex")&&u===0&&c===-1)return(l=(o=X.get(this).value)!=null?o:this.textContent)!=null?l:""}return""}setValue(e,a){if(this._mathfield&&e!==void 0){if(this._mathfield.model.getValue()===e)return;a!=null||(a={silenceNotifications:!0,mode:"math"}),this._mathfield.setValue(e,a);return}if(X.has(this)){let o=X.get(this).options;X.set(this,{value:e,selection:{ranges:[[-1,-1]],direction:"forward"},options:o,menuItems:void 0});return}let s=Ks(this);X.set(this,{value:e,selection:{ranges:[[-1,-1]],direction:"forward"},options:s,menuItems:void 0})}hasFocus(){var e,a;return(a=(e=this._mathfield)==null?void 0:e.hasFocus())!=null?a:!1}focus(){var e;(e=this._mathfield)==null||e.focus()}blur(){var e;(e=this._mathfield)==null||e.blur()}select(){var e;(e=this._mathfield)==null||e.select()}insert(e,a){var s,o;return(o=(s=this._mathfield)==null?void 0:s.insert(e,a))!=null?o:!1}applyStyle(e,a){var s;return(s=this._mathfield)==null?void 0:s.applyStyle(e,a)}queryStyle(e){var a,s;return(s=(a=this._mathfield)==null?void 0:a.queryStyle(e))!=null?s:"none"}getOffsetFromPoint(e,a,s){return this._mathfield?xo(this._mathfield,e,a,s):-1}getElementInfo(e){return $a(this._mathfield,e)}resetUndo(){var e;(e=this._mathfield)==null||e.resetUndo()}canUndo(){return this._mathfield?this._mathfield.canUndo():!1}canRedo(){return this._mathfield?this._mathfield.canRedo():!1}handleEvent(e){var a,s,o,l,u,c,d;if(Ae.state!=="closed"||((s=(a=this._mathfield)==null?void 0:a.menu)==null?void 0:s.state)!=="closed")return;if(e.type==="pointerdown"){this.onPointerDown();let g=(o=this._mathfield)==null?void 0:o.keyboardDelegate;g?.blur(),g?.focus()}if(e.type==="focus"&&((l=this._mathfield)==null||l.focus()),e.type!=="blur")return;let m=Bo();m&&(u=window?.mathVirtualKeyboard)!=null&&u.visible||((c=Ae.scrim)==null?void 0:c.state)!=="closed"||m&&Gc()||(d=this._mathfield)==null||d.blur()}connectedCallback(){var e,a,s,o;let l=this.shadowRoot,u=l.host,c=window.getComputedStyle(this).userSelect!=="none";if(c)u.addEventListener("pointerdown",this,!0);else{let g=l.querySelector("span");g.style.pointerEvents="none"}u.addEventListener("focus",this,!0),u.addEventListener("blur",this,!0),this._observer=new MutationObserver(()=>{var g;this.value=(g=this.textContent)!=null?g:""}),this._observer.observe(this,{childList:!0,characterData:!0,subtree:!0}),Ln()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),c&&!this.hasAttribute("contenteditable")&&this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let d=l.querySelector("slot:not([name])");if(d)try{this._style=d.assignedElements().filter(g=>g.tagName.toLowerCase()==="style").map(g=>g.textContent).join("")}catch(g){console.error(g)}if(this._style){let g=document.createElement("style");g.textContent=this._style,l.appendChild(g)}let m="";if(this.hasAttribute("value")?m=this.getAttribute("value"):m=(e=d?.assignedNodes().map(g=>g.nodeType===3?g.textContent:"").join("").trim())!=null?e:"",this._mathfield=new Ds(l.querySelector(":host > span"),f(p({},(s=(a=X.get(this))==null?void 0:a.options)!=null?s:Ks(this)),{eventSink:this,value:m})),!X.has(this)){this.upgradeProperty("disabled"),this.upgradeProperty("readonly");for(let g of Object.keys(Q5.optionsAttributes))this.upgradeProperty(ar(g))}if(!((o=this._mathfield)!=null&&o.model)){this._mathfield=null;return}if(X.has(this)){let g=this._mathfield,A=X.get(this),P=A.menuItems;g.model.deferNotifications({content:!1,selection:!1},()=>{let W=A.value;W!==void 0&&g.setValue(W),g.model.selection=A.selection,X.delete(this)}),P&&(this.menuItems=P)}window.queueMicrotask(()=>{this.isConnected&&this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))}),pi()}disconnectedCallback(){var e,a,s;if(this.shadowRoot.host.removeEventListener("pointerdown",this,!0),!this._mathfield)return;(e=this._observer)==null||e.disconnect(),this._observer=null,window.queueMicrotask(()=>this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})));let o=or(this._mathfield.options,Object.keys(Q5.optionsAttributes).map(l=>ar(l)));X.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,menuItems:(s=(a=this._mathfield.menu)==null?void 0:a.menuItems)!=null?s:void 0,options:o}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(e){if(this.hasOwnProperty(e)){let a=this[e];delete this[e],(e==="readonly"||e==="read-only")&&(e="readOnly"),this[e]=a}}attributeChangedCallback(e,a,s){if(a===s)return;let o=s!==null;switch(e){case"contenteditable":U(this._mathfield);break;case"placeholder":s===!1&&(s=""),this.placeholder=s;break;case"disabled":this.disabled=o;break;case"read-only":case"readonly":this.readOnly=o;break}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(e){let a=!!e;a?(this.setAttribute("readonly",""),Ln()?this._internals.ariaReadOnly="true":this.setAttribute("aria-readonly","true"),this.setAttribute("aria-readonly","true")):(Ln()?this._internals.ariaReadOnly="false":this.removeAttribute("aria-readonly"),this.removeAttribute("readonly"),this.removeAttribute("read-only")),this._setOptions({readOnly:a})}get disabled(){return this.hasAttribute("disabled")}set disabled(e){var a;let s=!!e;s?this.setAttribute("disabled",""):this.removeAttribute("disabled"),Ln()?this._internals.ariaDisabled=s?"true":"false":this.setAttribute("aria-disabled",s?"true":"false"),s&&(a=this._mathfield)!=null&&a.hasFocus&&window.mathVirtualKeyboard.visible&&this._mathfield.executeCommand("hideVirtualKeyboard")}get value(){return this.getValue()}set value(e){this.setValue(e)}get defaultMode(){return this._getOption("defaultMode")}set defaultMode(e){this._setOptions({defaultMode:e})}get macros(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("macros")}set macros(e){this._setOptions({macros:e})}get registers(){if(!this._mathfield)throw new Error("Mathfield not mounted");let e=this;return new Proxy({},{get:(a,s)=>{if(typeof s=="string")return e._getOption("registers")[s]},set(a,s,o){return typeof s!="string"?!1:(e._setOptions({registers:f(p({},e._getOption("registers")),{[s]:o})}),!0)},ownKeys:()=>Reflect.ownKeys(e._getOption("registers")),getOwnPropertyDescriptor:(a,s)=>{let o=e._getOption("registers")[s];if(o!==void 0)return{configurable:!0,enumerable:!0,value:o,writable:!0}}})}set registers(e){this._setOptions({registers:e})}get colorMap(){return this._getOption("colorMap")}set colorMap(e){this._setOptions({colorMap:e})}get backgroundColorMap(){return this._getOption("backgroundColorMap")}set backgroundColorMap(e){this._setOptions({backgroundColorMap:e})}get letterShapeStyle(){return this._getOption("letterShapeStyle")}set letterShapeStyle(e){this._setOptions({letterShapeStyle:e})}get minFontScale(){return this._getOption("minFontScale")}set minFontScale(e){this._setOptions({minFontScale:e})}get maxMatrixCols(){return this._getOption("maxMatrixCols")}set maxMatrixCols(e){this._setOptions({maxMatrixCols:e})}get smartMode(){return this._getOption("smartMode")}set smartMode(e){this._setOptions({smartMode:e})}get smartFence(){return this._getOption("smartFence")}set smartFence(e){this._setOptions({smartFence:e})}get smartSuperscript(){return this._getOption("smartSuperscript")}set smartSuperscript(e){this._setOptions({smartSuperscript:e})}get scriptDepth(){return this._getOption("scriptDepth")}set scriptDepth(e){this._setOptions({scriptDepth:e})}get removeExtraneousParentheses(){return this._getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(e){this._setOptions({removeExtraneousParentheses:e})}get mathModeSpace(){return this._getOption("mathModeSpace")}set mathModeSpace(e){this._setOptions({mathModeSpace:e})}get placeholderSymbol(){return this._getOption("placeholderSymbol")}set placeholderSymbol(e){this._setOptions({placeholderSymbol:e})}get placeholder(){var e;return(e=this.getAttribute("placeholder"))!=null?e:""}set placeholder(e){var a;typeof e=="string"&&((a=this._mathfield)==null||a.setOptions({contentPlaceholder:e}))}get popoverPolicy(){return this._getOption("popoverPolicy")}set popoverPolicy(e){this._setOptions({popoverPolicy:e})}get environmentPopoverPolicy(){return this._getOption("environmentPopoverPolicy")}set environmentPopoverPolicy(e){this._setOptions({environmentPopoverPolicy:e})}get menuItems(){var e;if(!this._mathfield)throw new Error("Mathfield not mounted");return(e=this._mathfield.menu._menuItems.map(a=>a.menuItem))!=null?e:[]}set menuItems(e){var a;if(!this._mathfield)throw new Error("Mathfield not mounted");if(this._mathfield){let s=(a=this._mathfield.element)==null?void 0:a.querySelector("[part=menu-toggle]");s&&(s.style.display=e.length===0?"none":""),this._mathfield.menu.menuItems=e}}get mathVirtualKeyboardPolicy(){return this._getOption("mathVirtualKeyboardPolicy")}set mathVirtualKeyboardPolicy(e){this._setOptions({mathVirtualKeyboardPolicy:e})}get inlineShortcuts(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("inlineShortcuts")}set inlineShortcuts(e){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({inlineShortcuts:e})}get inlineShortcutTimeout(){return this._getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(e){this._setOptions({inlineShortcutTimeout:e})}get keybindings(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("keybindings")}set keybindings(e){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({keybindings:e})}get onInsertStyle(){let e=this._getOption("onInsertStyle");return e===void 0?oo:e}set onInsertStyle(e){this._setOptions({onInsertStyle:e})}get onInlineShortcut(){return this._getOption("onInlineShortcut")}set onInlineShortcut(e){this._setOptions({onInlineShortcut:e})}get onScrollIntoView(){return this._getOption("onScrollIntoView")}set onScrollIntoView(e){this._setOptions({onScrollIntoView:e})}get onExport(){return this._getOption("onExport")}set onExport(e){this._setOptions({onExport:e})}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOptions({readOnly:e})}get isSelectionEditable(){var e,a;return(a=(e=this._mathfield)==null?void 0:e.isSelectionEditable)!=null?a:!1}setPromptState(e,a,s){var o;(o=this._mathfield)==null||o.setPromptState(e,a,s)}getPromptState(e){var a,s;return(s=(a=this._mathfield)==null?void 0:a.getPromptState(e))!=null?s:[void 0,!0]}get virtualKeyboardTargetOrigin(){return this._getOption("virtualKeyboardTargetOrigin")}set virtualKeyboardTargetOrigin(e){this._setOptions({virtualKeyboardTargetOrigin:e})}get selection(){return this._mathfield?this._mathfield.model.selection:X.has(this)?X.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(e){if(typeof e=="number"&&(e={ranges:[[e,e]]}),this._mathfield){this._mathfield.model.selection=e,U(this._mathfield);return}if(X.has(this)){X.set(this,f(p({},X.get(this)),{selection:e}));return}X.set(this,{value:void 0,selection:e,options:Ks(this),menuItems:void 0})}get selectionIsCollapsed(){let e=this.selection;return e.ranges.length===1&&e.ranges[0][0]===e.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:X.has(this)?X.get(this).selection.ranges[0][0]:0}set position(e){if(this._mathfield&&(this._mathfield.model.position=e,U(this._mathfield)),X.has(this)){X.set(this,f(p({},X.get(this)),{selection:{ranges:[[e,e]]}}));return}X.set(this,{value:void 0,selection:{ranges:[[e,e]]},options:Ks(this),menuItems:void 0})}get lastOffset(){var e,a;return(a=(e=this._mathfield)==null?void 0:e.model.lastOffset)!=null?a:-1}};oe.version="0.106.0",oe.openUrl=t=>{if(!t)return;let e=new URL(t);if(!["http:","https:","file:"].includes(e.protocol.toLowerCase())){oe.playSound("plonk");return}window.open(e,"_blank")},oe._fontsDirectory="./fonts/",oe._soundsDirectory="./sounds",oe.keypressVibration=!0,oe._keypressSound={spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"},oe._plonkSound="plonk.wav",oe.audioBuffers={},oe.createHTML=t=>t,oe._speechEngineRate="100%",oe._speechEngineVoice="Joanna",oe._textToSpeechMarkup="",oe._textToSpeechRules="mathlive",oe._textToSpeechRulesOptions={},oe.speakHook=ph,oe.readAloudHook=fh,oe.restoreFocusWhenDocumentFocused=!0,oe._decimalSeparator=".",oe._isFunction=t=>{var e,a;let s=globalThis.MathfieldElement.computeEngine;return(a=(e=s?.parse(t).domain)==null?void 0:e.isFunction)!=null?a:!1};var xt=oe;function ar(t){return t.replace(/[^a-zA-Z\d]+(.)/g,(e,a)=>a.toUpperCase())}function Ks(t){let e={readOnly:!1},a=xt.optionsAttributes;return Object.keys(a).forEach(s=>{var o;if(t.hasAttribute(s)){let l=t.getAttribute(s);s==="placeholder"?e.contentPlaceholder=l??"":a[s]==="boolean"?e[ar(s)]=!0:a[s]==="on/off"?(l=(o=l?.toLowerCase())!=null?o:"",l==="on"||l==="true"?e[ar(s)]=!0:l==="off"||l==="false"?e[ar(s)]=!1:e[ar(s)]=void 0):a[s]==="number"?e[ar(s)]=Number.parseFloat(l??"0"):e[ar(s)]=l}}),e}function Ln(){return!(!("ElementInternals"in window)||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var mn=xt,gh,bh,xh;if(Me()&&!((gh=window.customElements)!=null&&gh.get("math-field"))){window[bh=Symbol.for("io.cortexjs.mathlive")]!=null||(window[bh]={});let t=window[Symbol.for("io.cortexjs.mathlive")];t.version="0.106.0",globalThis.MathfieldElement=xt,(xh=window.customElements)==null||xh.define("math-field",xt)}function Vb(t,e){let a=Ee.singleton;return a?(a.show(),zr(),a.currentLayer=e,a.render(),a.focus(),!0):!1}function qb(){let t=window.mathVirtualKeyboard;return t.visible?t.hide({animate:!0}):t.show({animate:!0}),!1}pe({switchKeyboardLayer:Vb,toggleVirtualKeyboard:qb,hideVirtualKeyboard:()=>(window.mathVirtualKeyboard.hide({animate:!0}),!1),showVirtualKeyboard:()=>(window.mathVirtualKeyboard.show({animate:!0}),!1)},{target:"virtual-keyboard"});function Wt(){var t;return globalThis[t=Symbol.for("io.cortexjs.mathlive")]!=null||(globalThis[t]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}function MathInput(t){const e=reactExports.useRef(null);reactExports.useEffect(()=>{if(!e.current)return;const c=e.current;c.autocomplete="off",c.menuItems=[],c.suggestions="none",c.inlineShortcuts={pi:"\\pi",sqrt:"\\sqrt{#?}",frac:"\\frac{#?}{#?}","/":"\\frac{#@}{#?}",sin:"\\sin({#?})",cos:"\\cos({#?})",tan:"\\tan({#?})",ln:"\\ln({#?})"},c.keybindings=[{key:"[Backspace]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"shift+[Backspace]",command:"deleteForward"},{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"}],c.removeExtraneousParentheses=!1;const d=m=>{m.key==="Enter"&&(m.preventDefault(),m.stopPropagation(),t.onEnter?.())};return c.addEventListener("keydown",d),()=>c.removeEventListener("keydown",d)},[t]);const a=c=>{const m=c.target.value,g=window.MathfieldElement?.computeEngine;if(g){const P=g.parse(m,{canonical:!1}).toLatex({fractionStyle:()=>"quotient"});t.setInputs(W=>{const me=[...W];return me[t.index]=P,me})}else t.setInputs(A=>{const P=[...A];return P[t.index]=m,P})},o=(c=>Array.isArray(c)?c:c?[c]:[])(t.prefix),l=o[0],u=o[1];return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(RenderMath,{text:l?`$${l}$`:"",className:"txt text-lg"})}),jsxRuntimeExports.jsx("math-field",{ref:e,"default-mode":"inline-math",onInput:a,className:`txtbox outline-none bg-none color-txt-main inline-block \r
            focus:border-3 color-shadow-accent w-50 mx-2\r
            h-auto overflow-scroll`,style:{background:"none",outline:"none",fontSize:24}}),u?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(RenderMath,{text:`$${u}$`,className:"txt text-lg"})}):null]})})}const QReplyCard=({userImage:t,username:e,time:a,content:s,replyCount:o=0,onPressReply:l,onPressReplies:u,imageURL:c})=>{const[d,m]=reactExports.useState(null);reactExports.useEffect(()=>{m(c??null)},[c]);const g=a?.toDate?.()?.toLocaleTimeString?.([],{hour:"2-digit",minute:"2-digit"})??(a instanceof Date?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Just now");return jsxRuntimeExports.jsxs("div",{className:"reply-container",children:[jsxRuntimeExports.jsxs("div",{className:"header-wrapper",children:[t?jsxRuntimeExports.jsx("img",{src:t,alt:e||"user",className:"header-img"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full mr-3"}),jsxRuntimeExports.jsxs("div",{className:"header-text-wrapper",children:[jsxRuntimeExports.jsx("span",{className:"header-username",children:e}),jsxRuntimeExports.jsx("span",{className:"header-time",children:g})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-l-2 color-shadow px-3 ml-3.5",children:[d&&jsxRuntimeExports.jsx("img",{src:d,alt:"Post",className:"content-img"}),jsxRuntimeExports.jsx("p",{className:"content-text",children:s}),(l||o>0&&u)&&jsxRuntimeExports.jsxs("div",{className:"footer-wrapper",children:[l&&jsxRuntimeExports.jsx("button",{type:"button",onClick:l,className:"footer-txt hover:underline",children:"Reply"}),o>0&&u&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:u,className:"footer-txt font-semibold hover:underline",children:[o," ",o===1?"reply":"replies"]})]})]})]})},ReplyThread=({reply:t,questionId:e,onReply:a})=>{const[s,o]=reactExports.useState([]),[l,u]=reactExports.useState(!1);return reactExports.useEffect(()=>{(async()=>{const d=query(collection(db$1,"certchamps-questions",e,"replies",t.id,"replies"),orderBy("timestamp","asc")),m=onSnapshot(d,async g=>{const A=await Promise.all(g.docs.map(async P=>{const W=P.data(),me=W.userId,ve=query(collection(db$1,"user-data"),where("uid","==",me)),He=await getDocs(ve);let De="Unknown",Xe=null;if(!He.empty){const qe=He.docs[0].data();De=qe.username;try{const Rs=getStorage(),Vc=ref(Rs,qe.picture);Xe=await getDownloadURL(Vc)}catch(Rs){console.warn("Image error:",Rs)}}return{id:P.id,content:W.content,timestamp:W.timestamp,username:De,userImage:Xe,replyingTo:W.replyingTo,replyingToUser:W.replyingToUser}}));o(A)});return()=>m()})()},[t.id,e]),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx(QReplyCard,{content:t.content,userImage:t.userImage,username:t.username,time:t.timestamp,replyCount:s.length,onPressReply:()=>a(t.id,t.username),onPressReplies:s.length>0?()=>u(!l):void 0}),l&&s.length>0&&jsxRuntimeExports.jsx("div",{className:"ml-3.5 pl-4 border-l-2 color-shadow pt-2",children:s.map(c=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(QReplyCard,{content:c.content,userImage:c.userImage,username:c.username,time:c.timestamp,replyCount:0,onPressReply:void 0,onPressReplies:void 0})},c.id))})]})},QThread=t=>{const{user:e}=reactExports.useContext(UserContext),[a,s]=reactExports.useState(""),[o,l]=reactExports.useState(null),[u,c]=reactExports.useState([]);reactExports.useEffect(()=>{const W=async()=>{const me=query(collection(db$1,"certchamps-questions",t.questionId,"replies"),orderBy("timestamp","desc")),ve=onSnapshot(me,async He=>{const De=await Promise.all(He.docs.map(async Xe=>{const qe=Xe.data(),Rs=Xe.id,Vc=qe.userId,So=query(collection(db$1,"user-data"),where("uid","==",Vc)),Do=await getDocs(So);let eh="Unknown",Ko=null;if(!Do.empty){const An=Do.docs[0].data();eh=An.username;try{const wt=getStorage(),Bs=ref(wt,An.picture);Ko=await getDownloadURL(Bs)}catch(wt){console.warn("Image error:",wt)}}let Ge=0;try{Ge=(await getDocs(collection(db$1,"posts",Rs,"replies"))).size}catch{}return{id:Xe.id,content:qe.content,timestamp:qe.timestamp,username:eh,userImage:Ko,replyCount:Ge}}));c(De)});return()=>ve()};t.questionId&&W()},[t.questionId]);const d=async()=>{const W=`q${t.part+1}`,me=doc(db$1,"certchamps-questions",t.questionId,"content",W),ve=await getDoc(me);if(!ve.exists())return"";const He=ve.data().image;return He?await getDownloadURL(ref(getStorage(),He)):""},m=async()=>{if(a.trim())try{const W=await d();if(o&&o.type==="reply")await addDoc(collection(db$1,"certchamps-questions",t.questionId,"replies",o.id,"replies"),{userId:e.uid,content:a.trim(),timestamp:serverTimestamp(),replyingTo:o.id,replyingToUser:o.username});else{const me=await addDoc(collection(db$1,"certchamps-questions",t.questionId,"replies"),{userId:e.uid,content:a.trim(),timestamp:serverTimestamp()});await addDoc(collection(db$1,"posts"),{userId:e.uid,content:a.trim(),timestamp:serverTimestamp(),imageUrl:W,likes:0,isFlashcard:!0,flashcardId:t.questionId,replyId:me.id})}s(""),l(null)}catch(W){console.error("Error sending message: ",W)}},g=(W,me)=>{l({id:W,username:me,type:"reply"})},A=()=>{l(null),s("")},P=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),m())};return jsxRuntimeExports.jsxs("div",{className:"h-full min-h-0 flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"mx-auto max-w-3xl w-full  px-3 pt-2 flex-1 overflow-auto",children:u.map(W=>jsxRuntimeExports.jsx(ReplyThread,{reply:W,questionId:t.questionId,onReply:g},W.id))}),jsxRuntimeExports.jsxs("div",{className:"composer-container flex-none p-3",children:[o&&jsxRuntimeExports.jsxs("div",{className:"composer-replyTo-wrapper flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"composer-replyTo-username text-sm text-muted",children:["Replying to ",jsxRuntimeExports.jsxs("span",{className:"txt-bold",children:["@",o.username]})]}),jsxRuntimeExports.jsx("button",{onClick:A,className:"composer-replyTo-cancel text-sm",type:"button",children:"Cancel"})]}),jsxRuntimeExports.jsx("textarea",{value:a,onChange:W=>s(W.target.value),onKeyDown:P,placeholder:"Say something exquisite...",rows:3,className:"composer-text-box w-full p-2 rounded border-none h-11"}),jsxRuntimeExports.jsxs("div",{className:"composer-footer-wrapper flex items-center justify-between mt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:A,className:"composer-clear text-sm px-3 py-1",children:"Clear"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:m,disabled:!a.trim(),className:"composer-post text-sm px-3 py-1 bg-accent text-white rounded disabled:opacity-50 font-bold color-txt-accent",children:"Send"})]})]})]})},useDeckHandler=()=>{const{user:t,setUser:e}=reactExports.useContext(UserContext);return{createDeck:async(m,g,A,P)=>{try{const W=await addDoc(collection(db$1,"user-data",t.uid,"decks"),{name:m,description:g,questions:A,timestamp:Timestamp.now(),questionsCompleted:[],color:P,timeElapsed:0});e(me=>({...me,decks:[...me.decks||[],{name:m,description:g,questions:A,timestamp:Timestamp.now(),questionsCompleted:[],color:P,id:W.id,timeElapsed:0}]}))}catch(W){console.log(W)}},deleteDeck:async m=>{try{await deleteDoc(doc(db$1,"user-data",t.uid,"decks",m)),e(g=>({...g,decks:g.decks.filter(A=>A.id!=m)}))}catch(g){console.log(g)}},addQuestiontoDeck:(m,g)=>{try{updateDoc(doc(db$1,"user-data",t.uid,"decks",g),{questions:arrayUnion(...m)}),e(A=>({...A,decks:A.decks.map(P=>P.id==g?{...P,questions:[...P.questions||[],...m]}:P)}))}catch(A){console.log(A)}},shareDeck:async(m,g,A)=>{try{const P=(await getDoc(doc(db$1,"user-data",m.uid))).ref;updateDoc(P,{notifications:arrayUnion({type:"deck-share",from:t.uid,timestamp:Timestamp.now(),deckID:g})}),A(W=>W.map(me=>me.uid===m.uid?{...me,sent:!0}:me))}catch(P){console.log(P)}},addtoDecks:async(m,g,A)=>{try{const P=await addDoc(collection(db$1,"user-data",t.uid,"decks"),{name:m,description:g,questions:A,timestamp:Timestamp.now(),questionsCompleted:[],color:"#FFFFFF",timeElapsed:0});e(W=>({...W,decks:[...W.decks||[],{name:m,description:g,questions:A,timestamp:Timestamp.now(),questionsCompleted:[],color:"#FFFFFF",id:P.id,timeElapsed:0}]}))}catch(P){console.log(P)}},saveProgress:async(m,g,A)=>{try{const W=[{...t.decks.find(me=>me.id==g),questionsCompleted:m,timeElapsed:A},...t.decks.filter(me=>me.id!=g)];console.log(W),e(me=>({...me,decks:W})),updateDoc(doc(db$1,"user-data",t.uid,"decks",g),{questionsCompleted:m,timeElapsed:A})}catch(P){console.error("Failed to save progress:",P)}},getDeckbyID:async(m,g)=>{try{return(await getDoc(doc(db$1,"user-data",g,"decks",m))).data()}catch(A){return console.log(A),null}}}};var lib={},flattenNames={},_freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var t=typeof commonjsGlobal$2=="object"&&commonjsGlobal$2&&commonjsGlobal$2.Object===Object&&commonjsGlobal$2;return _freeGlobal=t,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var t=require_freeGlobal(),e=typeof self=="object"&&self&&self.Object===Object&&self,a=t||e||Function("return this")();return _root=a,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var t=require_root(),e=t.Symbol;return _Symbol=e,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var t=require_Symbol(),e=Object.prototype,a=e.hasOwnProperty,s=e.toString,o=t?t.toStringTag:void 0;function l(u){var c=a.call(u,o),d=u[o];try{u[o]=void 0;var m=!0}catch{}var g=s.call(u);return m&&(c?u[o]=d:delete u[o]),g}return _getRawTag=l,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var t=Object.prototype,e=t.toString;function a(s){return e.call(s)}return _objectToString=a,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var t=require_Symbol(),e=require_getRawTag(),a=require_objectToString(),s="[object Null]",o="[object Undefined]",l=t?t.toStringTag:void 0;function u(c){return c==null?c===void 0?o:s:l&&l in Object(c)?e(c):a(c)}return _baseGetTag=u,_baseGetTag}var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var t=Array.isArray;return isArray_1=t,isArray_1}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function t(e){return e!=null&&typeof e=="object"}return isObjectLike_1=t,isObjectLike_1}var isString_1,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var t=require_baseGetTag(),e=requireIsArray(),a=requireIsObjectLike(),s="[object String]";function o(l){return typeof l=="string"||!e(l)&&a(l)&&t(l)==s}return isString_1=o,isString_1}var _createBaseFor,hasRequired_createBaseFor;function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;hasRequired_createBaseFor=1;function t(e){return function(a,s,o){for(var l=-1,u=Object(a),c=o(a),d=c.length;d--;){var m=c[e?d:++l];if(s(u[m],m,u)===!1)break}return a}}return _createBaseFor=t,_createBaseFor}var _baseFor,hasRequired_baseFor;function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var t=require_createBaseFor(),e=t();return _baseFor=e,_baseFor}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function t(e,a){for(var s=-1,o=Array(e);++s<e;)o[s]=a(s);return o}return _baseTimes=t,_baseTimes}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var t=require_baseGetTag(),e=requireIsObjectLike(),a="[object Arguments]";function s(o){return e(o)&&t(o)==a}return _baseIsArguments=s,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var t=require_baseIsArguments(),e=requireIsObjectLike(),a=Object.prototype,s=a.hasOwnProperty,o=a.propertyIsEnumerable,l=t(function(){return arguments}())?t:function(u){return e(u)&&s.call(u,"callee")&&!o.call(u,"callee")};return isArguments_1=l,isArguments_1}var isBuffer$1={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function t(){return!1}return stubFalse_1=t,stubFalse_1}isBuffer$1.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,function(t,e){var a=require_root(),s=requireStubFalse(),o=e&&!e.nodeType&&e,l=o&&!0&&t&&!t.nodeType&&t,u=l&&l.exports===o,c=u?a.Buffer:void 0,d=c?c.isBuffer:void 0,m=d||s;t.exports=m}(isBuffer$1,isBuffer$1.exports)),isBuffer$1.exports}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function a(s,o){var l=typeof s;return o=o??t,!!o&&(l=="number"||l!="symbol"&&e.test(s))&&s>-1&&s%1==0&&s<o}return _isIndex=a,_isIndex}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var t=9007199254740991;function e(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=t}return isLength_1=e,isLength_1}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var t=require_baseGetTag(),e=requireIsLength(),a=requireIsObjectLike(),s="[object Arguments]",o="[object Array]",l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Function]",m="[object Map]",g="[object Number]",A="[object Object]",P="[object RegExp]",W="[object Set]",me="[object String]",ve="[object WeakMap]",He="[object ArrayBuffer]",De="[object DataView]",Xe="[object Float32Array]",qe="[object Float64Array]",Rs="[object Int8Array]",Vc="[object Int16Array]",So="[object Int32Array]",Do="[object Uint8Array]",eh="[object Uint8ClampedArray]",Ko="[object Uint16Array]",Ge="[object Uint32Array]",An={};An[Xe]=An[qe]=An[Rs]=An[Vc]=An[So]=An[Do]=An[eh]=An[Ko]=An[Ge]=!0,An[s]=An[o]=An[He]=An[l]=An[De]=An[u]=An[c]=An[d]=An[m]=An[g]=An[A]=An[P]=An[W]=An[me]=An[ve]=!1;function wt(Bs){return a(Bs)&&e(Bs.length)&&!!An[t(Bs)]}return _baseIsTypedArray=wt,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function t(e){return function(a){return e(a)}}return _baseUnary=t,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,function(t,e){var a=require_freeGlobal(),s=e&&!e.nodeType&&e,o=s&&!0&&t&&!t.nodeType&&t,l=o&&o.exports===s,u=l&&a.process,c=function(){try{var d=o&&o.require&&o.require("util").types;return d||u&&u.binding&&u.binding("util")}catch{}}();t.exports=c}(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var t=require_baseIsTypedArray(),e=require_baseUnary(),a=require_nodeUtil(),s=a&&a.isTypedArray,o=s?e(s):t;return isTypedArray_1=o,isTypedArray_1}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var t=require_baseTimes(),e=requireIsArguments(),a=requireIsArray(),s=requireIsBuffer(),o=require_isIndex(),l=requireIsTypedArray(),u=Object.prototype,c=u.hasOwnProperty;function d(m,g){var A=a(m),P=!A&&e(m),W=!A&&!P&&s(m),me=!A&&!P&&!W&&l(m),ve=A||P||W||me,He=ve?t(m.length,String):[],De=He.length;for(var Xe in m)(g||c.call(m,Xe))&&!(ve&&(Xe=="length"||W&&(Xe=="offset"||Xe=="parent")||me&&(Xe=="buffer"||Xe=="byteLength"||Xe=="byteOffset")||o(Xe,De)))&&He.push(Xe);return He}return _arrayLikeKeys=d,_arrayLikeKeys}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var t=Object.prototype;function e(a){var s=a&&a.constructor,o=typeof s=="function"&&s.prototype||t;return a===o}return _isPrototype=e,_isPrototype}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function t(e,a){return function(s){return e(a(s))}}return _overArg=t,_overArg}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var t=require_overArg(),e=t(Object.keys,Object);return _nativeKeys=e,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var t=require_isPrototype(),e=require_nativeKeys(),a=Object.prototype,s=a.hasOwnProperty;function o(l){if(!t(l))return e(l);var u=[];for(var c in Object(l))s.call(l,c)&&c!="constructor"&&u.push(c);return u}return _baseKeys=o,_baseKeys}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function t(e){var a=typeof e;return e!=null&&(a=="object"||a=="function")}return isObject_1=t,isObject_1}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var t=require_baseGetTag(),e=requireIsObject(),a="[object AsyncFunction]",s="[object Function]",o="[object GeneratorFunction]",l="[object Proxy]";function u(c){if(!e(c))return!1;var d=t(c);return d==s||d==o||d==a||d==l}return isFunction_1=u,isFunction_1}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var t=requireIsFunction(),e=requireIsLength();function a(s){return s!=null&&e(s.length)&&!t(s)}return isArrayLike_1=a,isArrayLike_1}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var t=require_arrayLikeKeys(),e=require_baseKeys(),a=requireIsArrayLike();function s(o){return a(o)?t(o):e(o)}return keys_1=s,keys_1}var _baseForOwn,hasRequired_baseForOwn;function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var t=require_baseFor(),e=requireKeys();function a(s,o){return s&&t(s,o,e)}return _baseForOwn=a,_baseForOwn}var identity_1,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity_1;hasRequiredIdentity=1;function t(e){return e}return identity_1=t,identity_1}var _castFunction,hasRequired_castFunction;function require_castFunction(){if(hasRequired_castFunction)return _castFunction;hasRequired_castFunction=1;var t=requireIdentity();function e(a){return typeof a=="function"?a:t}return _castFunction=e,_castFunction}var forOwn_1,hasRequiredForOwn;function requireForOwn(){if(hasRequiredForOwn)return forOwn_1;hasRequiredForOwn=1;var t=require_baseForOwn(),e=require_castFunction();function a(s,o){return s&&t(s,e(o))}return forOwn_1=a,forOwn_1}var _getPrototype,hasRequired_getPrototype;function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var t=require_overArg(),e=t(Object.getPrototypeOf,Object);return _getPrototype=e,_getPrototype}var isPlainObject_1,hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject_1;hasRequiredIsPlainObject=1;var t=require_baseGetTag(),e=require_getPrototype(),a=requireIsObjectLike(),s="[object Object]",o=Function.prototype,l=Object.prototype,u=o.toString,c=l.hasOwnProperty,d=u.call(Object);function m(g){if(!a(g)||t(g)!=s)return!1;var A=e(g);if(A===null)return!0;var P=c.call(A,"constructor")&&A.constructor;return typeof P=="function"&&P instanceof P&&u.call(P)==d}return isPlainObject_1=m,isPlainObject_1}var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function t(e,a){for(var s=-1,o=e==null?0:e.length,l=Array(o);++s<o;)l[s]=a(e[s],s,e);return l}return _arrayMap=t,_arrayMap}var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function t(){this.__data__=[],this.size=0}return _listCacheClear=t,_listCacheClear}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function t(e,a){return e===a||e!==e&&a!==a}return eq_1=t,eq_1}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var t=requireEq();function e(a,s){for(var o=a.length;o--;)if(t(a[o][0],s))return o;return-1}return _assocIndexOf=e,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var t=require_assocIndexOf(),e=Array.prototype,a=e.splice;function s(o){var l=this.__data__,u=t(l,o);if(u<0)return!1;var c=l.length-1;return u==c?l.pop():a.call(l,u,1),--this.size,!0}return _listCacheDelete=s,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var t=require_assocIndexOf();function e(a){var s=this.__data__,o=t(s,a);return o<0?void 0:s[o][1]}return _listCacheGet=e,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var t=require_assocIndexOf();function e(a){return t(this.__data__,a)>-1}return _listCacheHas=e,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var t=require_assocIndexOf();function e(a,s){var o=this.__data__,l=t(o,a);return l<0?(++this.size,o.push([a,s])):o[l][1]=s,this}return _listCacheSet=e,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var t=require_listCacheClear(),e=require_listCacheDelete(),a=require_listCacheGet(),s=require_listCacheHas(),o=require_listCacheSet();function l(u){var c=-1,d=u==null?0:u.length;for(this.clear();++c<d;){var m=u[c];this.set(m[0],m[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,_ListCache=l,_ListCache}var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var t=require_ListCache();function e(){this.__data__=new t,this.size=0}return _stackClear=e,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function t(e){var a=this.__data__,s=a.delete(e);return this.size=a.size,s}return _stackDelete=t,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function t(e){return this.__data__.get(e)}return _stackGet=t,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function t(e){return this.__data__.has(e)}return _stackHas=t,_stackHas}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var t=require_root(),e=t["__core-js_shared__"];return _coreJsData=e,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var t=require_coreJsData(),e=function(){var s=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function a(s){return!!e&&e in s}return _isMasked=a,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var t=Function.prototype,e=t.toString;function a(s){if(s!=null){try{return e.call(s)}catch{}try{return s+""}catch{}}return""}return _toSource=a,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var t=requireIsFunction(),e=require_isMasked(),a=requireIsObject(),s=require_toSource(),o=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,d=u.toString,m=c.hasOwnProperty,g=RegExp("^"+d.call(m).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function A(P){if(!a(P)||e(P))return!1;var W=t(P)?g:l;return W.test(s(P))}return _baseIsNative=A,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function t(e,a){return e?.[a]}return _getValue=t,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var t=require_baseIsNative(),e=require_getValue();function a(s,o){var l=e(s,o);return t(l)?l:void 0}return _getNative=a,_getNative}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var t=require_getNative(),e=require_root(),a=t(e,"Map");return _Map=a,_Map}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var t=require_getNative(),e=t(Object,"create");return _nativeCreate=e,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var t=require_nativeCreate();function e(){this.__data__=t?t(null):{},this.size=0}return _hashClear=e,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function t(e){var a=this.has(e)&&delete this.__data__[e];return this.size-=a?1:0,a}return _hashDelete=t,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var t=require_nativeCreate(),e="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;function o(l){var u=this.__data__;if(t){var c=u[l];return c===e?void 0:c}return s.call(u,l)?u[l]:void 0}return _hashGet=o,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var t=require_nativeCreate(),e=Object.prototype,a=e.hasOwnProperty;function s(o){var l=this.__data__;return t?l[o]!==void 0:a.call(l,o)}return _hashHas=s,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var t=require_nativeCreate(),e="__lodash_hash_undefined__";function a(s,o){var l=this.__data__;return this.size+=this.has(s)?0:1,l[s]=t&&o===void 0?e:o,this}return _hashSet=a,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var t=require_hashClear(),e=require_hashDelete(),a=require_hashGet(),s=require_hashHas(),o=require_hashSet();function l(u){var c=-1,d=u==null?0:u.length;for(this.clear();++c<d;){var m=u[c];this.set(m[0],m[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,_Hash=l,_Hash}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var t=require_Hash(),e=require_ListCache(),a=require_Map();function s(){this.size=0,this.__data__={hash:new t,map:new(a||e),string:new t}}return _mapCacheClear=s,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function t(e){var a=typeof e;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?e!=="__proto__":e===null}return _isKeyable=t,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var t=require_isKeyable();function e(a,s){var o=a.__data__;return t(s)?o[typeof s=="string"?"string":"hash"]:o.map}return _getMapData=e,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var t=require_getMapData();function e(a){var s=t(this,a).delete(a);return this.size-=s?1:0,s}return _mapCacheDelete=e,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var t=require_getMapData();function e(a){return t(this,a).get(a)}return _mapCacheGet=e,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var t=require_getMapData();function e(a){return t(this,a).has(a)}return _mapCacheHas=e,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var t=require_getMapData();function e(a,s){var o=t(this,a),l=o.size;return o.set(a,s),this.size+=o.size==l?0:1,this}return _mapCacheSet=e,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var t=require_mapCacheClear(),e=require_mapCacheDelete(),a=require_mapCacheGet(),s=require_mapCacheHas(),o=require_mapCacheSet();function l(u){var c=-1,d=u==null?0:u.length;for(this.clear();++c<d;){var m=u[c];this.set(m[0],m[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,_MapCache=l,_MapCache}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var t=require_ListCache(),e=require_Map(),a=require_MapCache(),s=200;function o(l,u){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<s-1)return d.push([l,u]),this.size=++c.size,this;c=this.__data__=new a(d)}return c.set(l,u),this.size=c.size,this}return _stackSet=o,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var t=require_ListCache(),e=require_stackClear(),a=require_stackDelete(),s=require_stackGet(),o=require_stackHas(),l=require_stackSet();function u(c){var d=this.__data__=new t(c);this.size=d.size}return u.prototype.clear=e,u.prototype.delete=a,u.prototype.get=s,u.prototype.has=o,u.prototype.set=l,_Stack=u,_Stack}var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var t="__lodash_hash_undefined__";function e(a){return this.__data__.set(a,t),this}return _setCacheAdd=e,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function t(e){return this.__data__.has(e)}return _setCacheHas=t,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var t=require_MapCache(),e=require_setCacheAdd(),a=require_setCacheHas();function s(o){var l=-1,u=o==null?0:o.length;for(this.__data__=new t;++l<u;)this.add(o[l])}return s.prototype.add=s.prototype.push=e,s.prototype.has=a,_SetCache=s,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function t(e,a){for(var s=-1,o=e==null?0:e.length;++s<o;)if(a(e[s],s,e))return!0;return!1}return _arraySome=t,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function t(e,a){return e.has(a)}return _cacheHas=t,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var t=require_SetCache(),e=require_arraySome(),a=require_cacheHas(),s=1,o=2;function l(u,c,d,m,g,A){var P=d&s,W=u.length,me=c.length;if(W!=me&&!(P&&me>W))return!1;var ve=A.get(u),He=A.get(c);if(ve&&He)return ve==c&&He==u;var De=-1,Xe=!0,qe=d&o?new t:void 0;for(A.set(u,c),A.set(c,u);++De<W;){var Rs=u[De],Vc=c[De];if(m)var So=P?m(Vc,Rs,De,c,u,A):m(Rs,Vc,De,u,c,A);if(So!==void 0){if(So)continue;Xe=!1;break}if(qe){if(!e(c,function(Do,eh){if(!a(qe,eh)&&(Rs===Do||g(Rs,Do,d,m,A)))return qe.push(eh)})){Xe=!1;break}}else if(!(Rs===Vc||g(Rs,Vc,d,m,A))){Xe=!1;break}}return A.delete(u),A.delete(c),Xe}return _equalArrays=l,_equalArrays}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var t=require_root(),e=t.Uint8Array;return _Uint8Array=e,_Uint8Array}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function t(e){var a=-1,s=Array(e.size);return e.forEach(function(o,l){s[++a]=[l,o]}),s}return _mapToArray=t,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function t(e){var a=-1,s=Array(e.size);return e.forEach(function(o){s[++a]=o}),s}return _setToArray=t,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var t=require_Symbol(),e=require_Uint8Array(),a=requireEq(),s=require_equalArrays(),o=require_mapToArray(),l=require_setToArray(),u=1,c=2,d="[object Boolean]",m="[object Date]",g="[object Error]",A="[object Map]",P="[object Number]",W="[object RegExp]",me="[object Set]",ve="[object String]",He="[object Symbol]",De="[object ArrayBuffer]",Xe="[object DataView]",qe=t?t.prototype:void 0,Rs=qe?qe.valueOf:void 0;function Vc(So,Do,eh,Ko,Ge,An,wt){switch(eh){case Xe:if(So.byteLength!=Do.byteLength||So.byteOffset!=Do.byteOffset)return!1;So=So.buffer,Do=Do.buffer;case De:return!(So.byteLength!=Do.byteLength||!An(new e(So),new e(Do)));case d:case m:case P:return a(+So,+Do);case g:return So.name==Do.name&&So.message==Do.message;case W:case ve:return So==Do+"";case A:var Bs=o;case me:var yh=Ko&u;if(Bs||(Bs=l),So.size!=Do.size&&!yh)return!1;var df=wt.get(So);if(df)return df==Do;Ko|=c,wt.set(So,Do);var Fc=s(Bs(So),Bs(Do),Ko,Ge,An,wt);return wt.delete(So),Fc;case He:if(Rs)return Rs.call(So)==Rs.call(Do)}return!1}return _equalByTag=Vc,_equalByTag}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function t(e,a){for(var s=-1,o=a.length,l=e.length;++s<o;)e[l+s]=a[s];return e}return _arrayPush=t,_arrayPush}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var t=require_arrayPush(),e=requireIsArray();function a(s,o,l){var u=o(s);return e(s)?u:t(u,l(s))}return _baseGetAllKeys=a,_baseGetAllKeys}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function t(e,a){for(var s=-1,o=e==null?0:e.length,l=0,u=[];++s<o;){var c=e[s];a(c,s,e)&&(u[l++]=c)}return u}return _arrayFilter=t,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function t(){return[]}return stubArray_1=t,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var t=require_arrayFilter(),e=requireStubArray(),a=Object.prototype,s=a.propertyIsEnumerable,o=Object.getOwnPropertySymbols,l=o?function(u){return u==null?[]:(u=Object(u),t(o(u),function(c){return s.call(u,c)}))}:e;return _getSymbols=l,_getSymbols}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var t=require_baseGetAllKeys(),e=require_getSymbols(),a=requireKeys();function s(o){return t(o,a,e)}return _getAllKeys=s,_getAllKeys}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var t=require_getAllKeys(),e=1,a=Object.prototype,s=a.hasOwnProperty;function o(l,u,c,d,m,g){var A=c&e,P=t(l),W=P.length,me=t(u),ve=me.length;if(W!=ve&&!A)return!1;for(var He=W;He--;){var De=P[He];if(!(A?De in u:s.call(u,De)))return!1}var Xe=g.get(l),qe=g.get(u);if(Xe&&qe)return Xe==u&&qe==l;var Rs=!0;g.set(l,u),g.set(u,l);for(var Vc=A;++He<W;){De=P[He];var So=l[De],Do=u[De];if(d)var eh=A?d(Do,So,De,u,l,g):d(So,Do,De,l,u,g);if(!(eh===void 0?So===Do||m(So,Do,c,d,g):eh)){Rs=!1;break}Vc||(Vc=De=="constructor")}if(Rs&&!Vc){var Ko=l.constructor,Ge=u.constructor;Ko!=Ge&&"constructor"in l&&"constructor"in u&&!(typeof Ko=="function"&&Ko instanceof Ko&&typeof Ge=="function"&&Ge instanceof Ge)&&(Rs=!1)}return g.delete(l),g.delete(u),Rs}return _equalObjects=o,_equalObjects}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var t=require_getNative(),e=require_root(),a=t(e,"DataView");return _DataView=a,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var t=require_getNative(),e=require_root(),a=t(e,"Promise");return _Promise=a,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var t=require_getNative(),e=require_root(),a=t(e,"Set");return _Set=a,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var t=require_getNative(),e=require_root(),a=t(e,"WeakMap");return _WeakMap=a,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var t=require_DataView(),e=require_Map(),a=require_Promise(),s=require_Set(),o=require_WeakMap(),l=require_baseGetTag(),u=require_toSource(),c="[object Map]",d="[object Object]",m="[object Promise]",g="[object Set]",A="[object WeakMap]",P="[object DataView]",W=u(t),me=u(e),ve=u(a),He=u(s),De=u(o),Xe=l;return(t&&Xe(new t(new ArrayBuffer(1)))!=P||e&&Xe(new e)!=c||a&&Xe(a.resolve())!=m||s&&Xe(new s)!=g||o&&Xe(new o)!=A)&&(Xe=function(qe){var Rs=l(qe),Vc=Rs==d?qe.constructor:void 0,So=Vc?u(Vc):"";if(So)switch(So){case W:return P;case me:return c;case ve:return m;case He:return g;case De:return A}return Rs}),_getTag=Xe,_getTag}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var t=require_Stack(),e=require_equalArrays(),a=require_equalByTag(),s=require_equalObjects(),o=require_getTag(),l=requireIsArray(),u=requireIsBuffer(),c=requireIsTypedArray(),d=1,m="[object Arguments]",g="[object Array]",A="[object Object]",P=Object.prototype,W=P.hasOwnProperty;function me(ve,He,De,Xe,qe,Rs){var Vc=l(ve),So=l(He),Do=Vc?g:o(ve),eh=So?g:o(He);Do=Do==m?A:Do,eh=eh==m?A:eh;var Ko=Do==A,Ge=eh==A,An=Do==eh;if(An&&u(ve)){if(!u(He))return!1;Vc=!0,Ko=!1}if(An&&!Ko)return Rs||(Rs=new t),Vc||c(ve)?e(ve,He,De,Xe,qe,Rs):a(ve,He,Do,De,Xe,qe,Rs);if(!(De&d)){var wt=Ko&&W.call(ve,"__wrapped__"),Bs=Ge&&W.call(He,"__wrapped__");if(wt||Bs){var yh=wt?ve.value():ve,df=Bs?He.value():He;return Rs||(Rs=new t),qe(yh,df,De,Xe,Rs)}}return An?(Rs||(Rs=new t),s(ve,He,De,Xe,qe,Rs)):!1}return _baseIsEqualDeep=me,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var t=require_baseIsEqualDeep(),e=requireIsObjectLike();function a(s,o,l,u,c){return s===o?!0:s==null||o==null||!e(s)&&!e(o)?s!==s&&o!==o:t(s,o,l,u,a,c)}return _baseIsEqual=a,_baseIsEqual}var _baseIsMatch,hasRequired_baseIsMatch;function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var t=require_Stack(),e=require_baseIsEqual(),a=1,s=2;function o(l,u,c,d){var m=c.length,g=m,A=!d;if(l==null)return!g;for(l=Object(l);m--;){var P=c[m];if(A&&P[2]?P[1]!==l[P[0]]:!(P[0]in l))return!1}for(;++m<g;){P=c[m];var W=P[0],me=l[W],ve=P[1];if(A&&P[2]){if(me===void 0&&!(W in l))return!1}else{var He=new t;if(d)var De=d(me,ve,W,l,u,He);if(!(De===void 0?e(ve,me,a|s,d,He):De))return!1}}return!0}return _baseIsMatch=o,_baseIsMatch}var _isStrictComparable,hasRequired_isStrictComparable;function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var t=requireIsObject();function e(a){return a===a&&!t(a)}return _isStrictComparable=e,_isStrictComparable}var _getMatchData,hasRequired_getMatchData;function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var t=require_isStrictComparable(),e=requireKeys();function a(s){for(var o=e(s),l=o.length;l--;){var u=o[l],c=s[u];o[l]=[u,c,t(c)]}return o}return _getMatchData=a,_getMatchData}var _matchesStrictComparable,hasRequired_matchesStrictComparable;function require_matchesStrictComparable(){if(hasRequired_matchesStrictComparable)return _matchesStrictComparable;hasRequired_matchesStrictComparable=1;function t(e,a){return function(s){return s==null?!1:s[e]===a&&(a!==void 0||e in Object(s))}}return _matchesStrictComparable=t,_matchesStrictComparable}var _baseMatches,hasRequired_baseMatches;function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var t=require_baseIsMatch(),e=require_getMatchData(),a=require_matchesStrictComparable();function s(o){var l=e(o);return l.length==1&&l[0][2]?a(l[0][0],l[0][1]):function(u){return u===o||t(u,o,l)}}return _baseMatches=s,_baseMatches}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var t=require_baseGetTag(),e=requireIsObjectLike(),a="[object Symbol]";function s(o){return typeof o=="symbol"||e(o)&&t(o)==a}return isSymbol_1=s,isSymbol_1}var _isKey,hasRequired_isKey;function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var t=requireIsArray(),e=requireIsSymbol(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function o(l,u){if(t(l))return!1;var c=typeof l;return c=="number"||c=="symbol"||c=="boolean"||l==null||e(l)?!0:s.test(l)||!a.test(l)||u!=null&&l in Object(u)}return _isKey=o,_isKey}var memoize_1,hasRequiredMemoize;function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var t=require_MapCache(),e="Expected a function";function a(s,o){if(typeof s!="function"||o!=null&&typeof o!="function")throw new TypeError(e);var l=function(){var u=arguments,c=o?o.apply(this,u):u[0],d=l.cache;if(d.has(c))return d.get(c);var m=s.apply(this,u);return l.cache=d.set(c,m)||d,m};return l.cache=new(a.Cache||t),l}return a.Cache=t,memoize_1=a,memoize_1}var _memoizeCapped,hasRequired_memoizeCapped;function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var t=requireMemoize(),e=500;function a(s){var o=t(s,function(u){return l.size===e&&l.clear(),u}),l=o.cache;return o}return _memoizeCapped=a,_memoizeCapped}var _stringToPath,hasRequired_stringToPath;function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var t=require_memoizeCapped(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=t(function(o){var l=[];return o.charCodeAt(0)===46&&l.push(""),o.replace(e,function(u,c,d,m){l.push(d?m.replace(a,"$1"):c||u)}),l});return _stringToPath=s,_stringToPath}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var t=require_Symbol(),e=require_arrayMap(),a=requireIsArray(),s=requireIsSymbol(),o=t?t.prototype:void 0,l=o?o.toString:void 0;function u(c){if(typeof c=="string")return c;if(a(c))return e(c,u)+"";if(s(c))return l?l.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return _baseToString=u,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var t=require_baseToString();function e(a){return a==null?"":t(a)}return toString_1=e,toString_1}var _castPath,hasRequired_castPath;function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var t=requireIsArray(),e=require_isKey(),a=require_stringToPath(),s=requireToString();function o(l,u){return t(l)?l:e(l,u)?[l]:a(s(l))}return _castPath=o,_castPath}var _toKey,hasRequired_toKey;function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var t=requireIsSymbol();function e(a){if(typeof a=="string"||t(a))return a;var s=a+"";return s=="0"&&1/a==-1/0?"-0":s}return _toKey=e,_toKey}var _baseGet,hasRequired_baseGet;function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var t=require_castPath(),e=require_toKey();function a(s,o){o=t(o,s);for(var l=0,u=o.length;s!=null&&l<u;)s=s[e(o[l++])];return l&&l==u?s:void 0}return _baseGet=a,_baseGet}var get_1,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get_1;hasRequiredGet=1;var t=require_baseGet();function e(a,s,o){var l=a==null?void 0:t(a,s);return l===void 0?o:l}return get_1=e,get_1}var _baseHasIn,hasRequired_baseHasIn;function require_baseHasIn(){if(hasRequired_baseHasIn)return _baseHasIn;hasRequired_baseHasIn=1;function t(e,a){return e!=null&&a in Object(e)}return _baseHasIn=t,_baseHasIn}var _hasPath,hasRequired_hasPath;function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var t=require_castPath(),e=requireIsArguments(),a=requireIsArray(),s=require_isIndex(),o=requireIsLength(),l=require_toKey();function u(c,d,m){d=t(d,c);for(var g=-1,A=d.length,P=!1;++g<A;){var W=l(d[g]);if(!(P=c!=null&&m(c,W)))break;c=c[W]}return P||++g!=A?P:(A=c==null?0:c.length,!!A&&o(A)&&s(W,A)&&(a(c)||e(c)))}return _hasPath=u,_hasPath}var hasIn_1,hasRequiredHasIn;function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var t=require_baseHasIn(),e=require_hasPath();function a(s,o){return s!=null&&e(s,o,t)}return hasIn_1=a,hasIn_1}var _baseMatchesProperty,hasRequired_baseMatchesProperty;function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var t=require_baseIsEqual(),e=requireGet(),a=requireHasIn(),s=require_isKey(),o=require_isStrictComparable(),l=require_matchesStrictComparable(),u=require_toKey(),c=1,d=2;function m(g,A){return s(g)&&o(A)?l(u(g),A):function(P){var W=e(P,g);return W===void 0&&W===A?a(P,g):t(A,W,c|d)}}return _baseMatchesProperty=m,_baseMatchesProperty}var _baseProperty,hasRequired_baseProperty;function require_baseProperty(){if(hasRequired_baseProperty)return _baseProperty;hasRequired_baseProperty=1;function t(e){return function(a){return a?.[e]}}return _baseProperty=t,_baseProperty}var _basePropertyDeep,hasRequired_basePropertyDeep;function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var t=require_baseGet();function e(a){return function(s){return t(s,a)}}return _basePropertyDeep=e,_basePropertyDeep}var property_1,hasRequiredProperty;function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var t=require_baseProperty(),e=require_basePropertyDeep(),a=require_isKey(),s=require_toKey();function o(l){return a(l)?t(s(l)):e(l)}return property_1=o,property_1}var _baseIteratee,hasRequired_baseIteratee;function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var t=require_baseMatches(),e=require_baseMatchesProperty(),a=requireIdentity(),s=requireIsArray(),o=requireProperty();function l(u){return typeof u=="function"?u:u==null?a:typeof u=="object"?s(u)?e(u[0],u[1]):t(u):o(u)}return _baseIteratee=l,_baseIteratee}var _createBaseEach,hasRequired_createBaseEach;function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var t=requireIsArrayLike();function e(a,s){return function(o,l){if(o==null)return o;if(!t(o))return a(o,l);for(var u=o.length,c=s?u:-1,d=Object(o);(s?c--:++c<u)&&l(d[c],c,d)!==!1;);return o}}return _createBaseEach=e,_createBaseEach}var _baseEach,hasRequired_baseEach;function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var t=require_baseForOwn(),e=require_createBaseEach(),a=e(t);return _baseEach=a,_baseEach}var _baseMap,hasRequired_baseMap;function require_baseMap(){if(hasRequired_baseMap)return _baseMap;hasRequired_baseMap=1;var t=require_baseEach(),e=requireIsArrayLike();function a(s,o){var l=-1,u=e(s)?Array(s.length):[];return t(s,function(c,d,m){u[++l]=o(c,d,m)}),u}return _baseMap=a,_baseMap}var map_1,hasRequiredMap;function requireMap(){if(hasRequiredMap)return map_1;hasRequiredMap=1;var t=require_arrayMap(),e=require_baseIteratee(),a=require_baseMap(),s=requireIsArray();function o(l,u){var c=s(l)?t:a;return c(l,e(u,3))}return map_1=o,map_1}var hasRequiredFlattenNames;function requireFlattenNames(){if(hasRequiredFlattenNames)return flattenNames;hasRequiredFlattenNames=1,Object.defineProperty(flattenNames,"__esModule",{value:!0}),flattenNames.flattenNames=void 0;var t=requireIsString(),e=d(t),a=requireForOwn(),s=d(a),o=requireIsPlainObject(),l=d(o),u=requireMap(),c=d(u);function d(g){return g&&g.__esModule?g:{default:g}}var m=flattenNames.flattenNames=function g(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=[];return(0,c.default)(A,function(W){Array.isArray(W)?g(W).map(function(me){return P.push(me)}):(0,l.default)(W)?(0,s.default)(W,function(me,ve){me===!0&&P.push(ve),P.push(ve+"-"+me)}):(0,e.default)(W)&&P.push(W)}),P};return flattenNames.default=m,flattenNames}var mergeClasses={},_arrayEach,hasRequired_arrayEach;function require_arrayEach(){if(hasRequired_arrayEach)return _arrayEach;hasRequired_arrayEach=1;function t(e,a){for(var s=-1,o=e==null?0:e.length;++s<o&&a(e[s],s,e)!==!1;);return e}return _arrayEach=t,_arrayEach}var _defineProperty$1,hasRequired_defineProperty;function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty$1;hasRequired_defineProperty=1;var t=require_getNative(),e=function(){try{var a=t(Object,"defineProperty");return a({},"",{}),a}catch{}}();return _defineProperty$1=e,_defineProperty$1}var _baseAssignValue,hasRequired_baseAssignValue;function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var t=require_defineProperty();function e(a,s,o){s=="__proto__"&&t?t(a,s,{configurable:!0,enumerable:!0,value:o,writable:!0}):a[s]=o}return _baseAssignValue=e,_baseAssignValue}var _assignValue,hasRequired_assignValue;function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var t=require_baseAssignValue(),e=requireEq(),a=Object.prototype,s=a.hasOwnProperty;function o(l,u,c){var d=l[u];(!(s.call(l,u)&&e(d,c))||c===void 0&&!(u in l))&&t(l,u,c)}return _assignValue=o,_assignValue}var _copyObject,hasRequired_copyObject;function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var t=require_assignValue(),e=require_baseAssignValue();function a(s,o,l,u){var c=!l;l||(l={});for(var d=-1,m=o.length;++d<m;){var g=o[d],A=u?u(l[g],s[g],g,l,s):void 0;A===void 0&&(A=s[g]),c?e(l,g,A):t(l,g,A)}return l}return _copyObject=a,_copyObject}var _baseAssign,hasRequired_baseAssign;function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var t=require_copyObject(),e=requireKeys();function a(s,o){return s&&t(o,e(o),s)}return _baseAssign=a,_baseAssign}var _nativeKeysIn,hasRequired_nativeKeysIn;function require_nativeKeysIn(){if(hasRequired_nativeKeysIn)return _nativeKeysIn;hasRequired_nativeKeysIn=1;function t(e){var a=[];if(e!=null)for(var s in Object(e))a.push(s);return a}return _nativeKeysIn=t,_nativeKeysIn}var _baseKeysIn,hasRequired_baseKeysIn;function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var t=requireIsObject(),e=require_isPrototype(),a=require_nativeKeysIn(),s=Object.prototype,o=s.hasOwnProperty;function l(u){if(!t(u))return a(u);var c=e(u),d=[];for(var m in u)m=="constructor"&&(c||!o.call(u,m))||d.push(m);return d}return _baseKeysIn=l,_baseKeysIn}var keysIn_1,hasRequiredKeysIn;function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var t=require_arrayLikeKeys(),e=require_baseKeysIn(),a=requireIsArrayLike();function s(o){return a(o)?t(o,!0):e(o)}return keysIn_1=s,keysIn_1}var _baseAssignIn,hasRequired_baseAssignIn;function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var t=require_copyObject(),e=requireKeysIn();function a(s,o){return s&&t(o,e(o),s)}return _baseAssignIn=a,_baseAssignIn}var _cloneBuffer={exports:{}};_cloneBuffer.exports;var hasRequired_cloneBuffer;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,function(t,e){var a=require_root(),s=e&&!e.nodeType&&e,o=s&&!0&&t&&!t.nodeType&&t,l=o&&o.exports===s,u=l?a.Buffer:void 0,c=u?u.allocUnsafe:void 0;function d(m,g){if(g)return m.slice();var A=m.length,P=c?c(A):new m.constructor(A);return m.copy(P),P}t.exports=d}(_cloneBuffer,_cloneBuffer.exports)),_cloneBuffer.exports}var _copyArray,hasRequired_copyArray;function require_copyArray(){if(hasRequired_copyArray)return _copyArray;hasRequired_copyArray=1;function t(e,a){var s=-1,o=e.length;for(a||(a=Array(o));++s<o;)a[s]=e[s];return a}return _copyArray=t,_copyArray}var _copySymbols,hasRequired_copySymbols;function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var t=require_copyObject(),e=require_getSymbols();function a(s,o){return t(s,e(s),o)}return _copySymbols=a,_copySymbols}var _getSymbolsIn,hasRequired_getSymbolsIn;function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var t=require_arrayPush(),e=require_getPrototype(),a=require_getSymbols(),s=requireStubArray(),o=Object.getOwnPropertySymbols,l=o?function(u){for(var c=[];u;)t(c,a(u)),u=e(u);return c}:s;return _getSymbolsIn=l,_getSymbolsIn}var _copySymbolsIn,hasRequired_copySymbolsIn;function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var t=require_copyObject(),e=require_getSymbolsIn();function a(s,o){return t(s,e(s),o)}return _copySymbolsIn=a,_copySymbolsIn}var _getAllKeysIn,hasRequired_getAllKeysIn;function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var t=require_baseGetAllKeys(),e=require_getSymbolsIn(),a=requireKeysIn();function s(o){return t(o,a,e)}return _getAllKeysIn=s,_getAllKeysIn}var _initCloneArray,hasRequired_initCloneArray;function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var t=Object.prototype,e=t.hasOwnProperty;function a(s){var o=s.length,l=new s.constructor(o);return o&&typeof s[0]=="string"&&e.call(s,"index")&&(l.index=s.index,l.input=s.input),l}return _initCloneArray=a,_initCloneArray}var _cloneArrayBuffer,hasRequired_cloneArrayBuffer;function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var t=require_Uint8Array();function e(a){var s=new a.constructor(a.byteLength);return new t(s).set(new t(a)),s}return _cloneArrayBuffer=e,_cloneArrayBuffer}var _cloneDataView,hasRequired_cloneDataView;function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var t=require_cloneArrayBuffer();function e(a,s){var o=s?t(a.buffer):a.buffer;return new a.constructor(o,a.byteOffset,a.byteLength)}return _cloneDataView=e,_cloneDataView}var _cloneRegExp,hasRequired_cloneRegExp;function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var t=/\w*$/;function e(a){var s=new a.constructor(a.source,t.exec(a));return s.lastIndex=a.lastIndex,s}return _cloneRegExp=e,_cloneRegExp}var _cloneSymbol,hasRequired_cloneSymbol;function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var t=require_Symbol(),e=t?t.prototype:void 0,a=e?e.valueOf:void 0;function s(o){return a?Object(a.call(o)):{}}return _cloneSymbol=s,_cloneSymbol}var _cloneTypedArray,hasRequired_cloneTypedArray;function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var t=require_cloneArrayBuffer();function e(a,s){var o=s?t(a.buffer):a.buffer;return new a.constructor(o,a.byteOffset,a.length)}return _cloneTypedArray=e,_cloneTypedArray}var _initCloneByTag,hasRequired_initCloneByTag;function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var t=require_cloneArrayBuffer(),e=require_cloneDataView(),a=require_cloneRegExp(),s=require_cloneSymbol(),o=require_cloneTypedArray(),l="[object Boolean]",u="[object Date]",c="[object Map]",d="[object Number]",m="[object RegExp]",g="[object Set]",A="[object String]",P="[object Symbol]",W="[object ArrayBuffer]",me="[object DataView]",ve="[object Float32Array]",He="[object Float64Array]",De="[object Int8Array]",Xe="[object Int16Array]",qe="[object Int32Array]",Rs="[object Uint8Array]",Vc="[object Uint8ClampedArray]",So="[object Uint16Array]",Do="[object Uint32Array]";function eh(Ko,Ge,An){var wt=Ko.constructor;switch(Ge){case W:return t(Ko);case l:case u:return new wt(+Ko);case me:return e(Ko,An);case ve:case He:case De:case Xe:case qe:case Rs:case Vc:case So:case Do:return o(Ko,An);case c:return new wt;case d:case A:return new wt(Ko);case m:return a(Ko);case g:return new wt;case P:return s(Ko)}}return _initCloneByTag=eh,_initCloneByTag}var _baseCreate,hasRequired_baseCreate;function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var t=requireIsObject(),e=Object.create,a=function(){function s(){}return function(o){if(!t(o))return{};if(e)return e(o);s.prototype=o;var l=new s;return s.prototype=void 0,l}}();return _baseCreate=a,_baseCreate}var _initCloneObject,hasRequired_initCloneObject;function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var t=require_baseCreate(),e=require_getPrototype(),a=require_isPrototype();function s(o){return typeof o.constructor=="function"&&!a(o)?t(e(o)):{}}return _initCloneObject=s,_initCloneObject}var _baseIsMap,hasRequired_baseIsMap;function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var t=require_getTag(),e=requireIsObjectLike(),a="[object Map]";function s(o){return e(o)&&t(o)==a}return _baseIsMap=s,_baseIsMap}var isMap_1,hasRequiredIsMap;function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var t=require_baseIsMap(),e=require_baseUnary(),a=require_nodeUtil(),s=a&&a.isMap,o=s?e(s):t;return isMap_1=o,isMap_1}var _baseIsSet,hasRequired_baseIsSet;function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var t=require_getTag(),e=requireIsObjectLike(),a="[object Set]";function s(o){return e(o)&&t(o)==a}return _baseIsSet=s,_baseIsSet}var isSet_1,hasRequiredIsSet;function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var t=require_baseIsSet(),e=require_baseUnary(),a=require_nodeUtil(),s=a&&a.isSet,o=s?e(s):t;return isSet_1=o,isSet_1}var _baseClone,hasRequired_baseClone;function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var t=require_Stack(),e=require_arrayEach(),a=require_assignValue(),s=require_baseAssign(),o=require_baseAssignIn(),l=require_cloneBuffer(),u=require_copyArray(),c=require_copySymbols(),d=require_copySymbolsIn(),m=require_getAllKeys(),g=require_getAllKeysIn(),A=require_getTag(),P=require_initCloneArray(),W=require_initCloneByTag(),me=require_initCloneObject(),ve=requireIsArray(),He=requireIsBuffer(),De=requireIsMap(),Xe=requireIsObject(),qe=requireIsSet(),Rs=requireKeys(),Vc=requireKeysIn(),So=1,Do=2,eh=4,Ko="[object Arguments]",Ge="[object Array]",An="[object Boolean]",wt="[object Date]",Bs="[object Error]",yh="[object Function]",df="[object GeneratorFunction]",Fc="[object Map]",_h="[object Number]",qc="[object Object]",Mh="[object RegExp]",cf="[object Set]",mf="[object String]",a1="[object Symbol]",s1="[object WeakMap]",E1="[object ArrayBuffer]",T1="[object DataView]",z1="[object Float32Array]",W1="[object Float64Array]",m2="[object Int8Array]",C2="[object Int16Array]",A2="[object Int32Array]",b2="[object Uint8Array]",_2="[object Uint8ClampedArray]",q1="[object Uint16Array]",U1="[object Uint32Array]",M2={};M2[Ko]=M2[Ge]=M2[E1]=M2[T1]=M2[An]=M2[wt]=M2[z1]=M2[W1]=M2[m2]=M2[C2]=M2[A2]=M2[Fc]=M2[_h]=M2[qc]=M2[Mh]=M2[cf]=M2[mf]=M2[a1]=M2[b2]=M2[_2]=M2[q1]=M2[U1]=!0,M2[Bs]=M2[yh]=M2[s1]=!1;function x2(p1,S1,D1,_1,B1,c2){var H1,x1=S1&So,pf=S1&Do,o1=S1&eh;if(D1&&(H1=B1?D1(p1,_1,B1,c2):D1(p1)),H1!==void 0)return H1;if(!Xe(p1))return p1;var e1=ve(p1);if(e1){if(H1=P(p1),!x1)return u(p1,H1)}else{var w1=A(p1),C1=w1==yh||w1==df;if(He(p1))return l(p1,x1);if(w1==qc||w1==Ko||C1&&!B1){if(H1=pf||C1?{}:me(p1),!x1)return pf?d(p1,o(H1,p1)):c(p1,s(H1,p1))}else{if(!M2[w1])return B1?p1:{};H1=W(p1,w1,x1)}}c2||(c2=new t);var F1=c2.get(p1);if(F1)return F1;c2.set(p1,H1),qe(p1)?p1.forEach(function(X1){H1.add(x2(X1,S1,D1,X1,p1,c2))}):De(p1)&&p1.forEach(function(X1,i2){H1.set(i2,x2(X1,S1,D1,i2,p1,c2))});var N1=o1?pf?g:m:pf?Vc:Rs,v1=e1?void 0:N1(p1);return e(v1||p1,function(X1,i2){v1&&(i2=X1,X1=p1[i2]),a(H1,i2,x2(X1,S1,D1,i2,p1,c2))}),H1}return _baseClone=x2,_baseClone}var cloneDeep_1,hasRequiredCloneDeep;function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var t=require_baseClone(),e=1,a=4;function s(o){return t(o,e|a)}return cloneDeep_1=s,cloneDeep_1}var hasRequiredMergeClasses;function requireMergeClasses(){if(hasRequiredMergeClasses)return mergeClasses;hasRequiredMergeClasses=1,Object.defineProperty(mergeClasses,"__esModule",{value:!0}),mergeClasses.mergeClasses=void 0;var t=requireForOwn(),e=l(t),a=requireCloneDeep(),s=l(a),o=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(c[g]=m[g])}return c};function l(c){return c&&c.__esModule?c:{default:c}}var u=mergeClasses.mergeClasses=function(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],g=d.default&&(0,s.default)(d.default)||{};return m.map(function(A){var P=d[A];return P&&(0,e.default)(P,function(W,me){g[me]||(g[me]={}),g[me]=o({},g[me],P[me])}),A}),g};return mergeClasses.default=u,mergeClasses}var autoprefix={},hasRequiredAutoprefix;function requireAutoprefix(){if(hasRequiredAutoprefix)return autoprefix;hasRequiredAutoprefix=1,Object.defineProperty(autoprefix,"__esModule",{value:!0}),autoprefix.autoprefix=void 0;var t=requireForOwn(),e=s(t),a=Object.assign||function(u){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(u[m]=d[m])}return u};function s(u){return u&&u.__esModule?u:{default:u}}var o={borderRadius:function(c){return{msBorderRadius:c,MozBorderRadius:c,OBorderRadius:c,WebkitBorderRadius:c,borderRadius:c}},boxShadow:function(c){return{msBoxShadow:c,MozBoxShadow:c,OBoxShadow:c,WebkitBoxShadow:c,boxShadow:c}},userSelect:function(c){return{WebkitTouchCallout:c,KhtmlUserSelect:c,MozUserSelect:c,msUserSelect:c,WebkitUserSelect:c,userSelect:c}},flex:function(c){return{WebkitBoxFlex:c,MozBoxFlex:c,WebkitFlex:c,msFlex:c,flex:c}},flexBasis:function(c){return{WebkitFlexBasis:c,flexBasis:c}},justifyContent:function(c){return{WebkitJustifyContent:c,justifyContent:c}},transition:function(c){return{msTransition:c,MozTransition:c,OTransition:c,WebkitTransition:c,transition:c}},transform:function(c){return{msTransform:c,MozTransform:c,OTransform:c,WebkitTransform:c,transform:c}},absolute:function(c){var d=c&&c.split(" ");return{position:"absolute",top:d&&d[0],right:d&&d[1],bottom:d&&d[2],left:d&&d[3]}},extend:function(c,d){var m=d[c];return m||{extend:c}}},l=autoprefix.autoprefix=function(c){var d={};return(0,e.default)(c,function(m,g){var A={};(0,e.default)(m,function(P,W){var me=o[W];me?A=a({},A,me(P)):A[W]=P}),d[g]=A}),d};return autoprefix.default=l,autoprefix}var hover$1={},hasRequiredHover;function requireHover(){if(hasRequiredHover)return hover$1;hasRequiredHover=1,Object.defineProperty(hover$1,"__esModule",{value:!0}),hover$1.hover=void 0;var t=Object.assign||function(d){for(var m=1;m<arguments.length;m++){var g=arguments[m];for(var A in g)Object.prototype.hasOwnProperty.call(g,A)&&(d[A]=g[A])}return d},e=requireReact(),a=s(e);function s(d){return d&&d.__esModule?d:{default:d}}function o(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}function l(d,m){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:d}function u(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(d,m):d.__proto__=m)}var c=hover$1.hover=function(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(A){u(P,A);function P(){var W,me,ve,He;o(this,P);for(var De=arguments.length,Xe=Array(De),qe=0;qe<De;qe++)Xe[qe]=arguments[qe];return He=(me=(ve=l(this,(W=P.__proto__||Object.getPrototypeOf(P)).call.apply(W,[this].concat(Xe))),ve),ve.state={hover:!1},ve.handleMouseOver=function(){return ve.setState({hover:!0})},ve.handleMouseOut=function(){return ve.setState({hover:!1})},ve.render=function(){return a.default.createElement(g,{onMouseOver:ve.handleMouseOver,onMouseOut:ve.handleMouseOut},a.default.createElement(m,t({},ve.props,ve.state)))},me),l(ve,He)}return P}(a.default.Component)};return hover$1.default=c,hover$1}var active={},hasRequiredActive;function requireActive(){if(hasRequiredActive)return active;hasRequiredActive=1,Object.defineProperty(active,"__esModule",{value:!0}),active.active=void 0;var t=Object.assign||function(d){for(var m=1;m<arguments.length;m++){var g=arguments[m];for(var A in g)Object.prototype.hasOwnProperty.call(g,A)&&(d[A]=g[A])}return d},e=requireReact(),a=s(e);function s(d){return d&&d.__esModule?d:{default:d}}function o(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}function l(d,m){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:d}function u(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(d,m):d.__proto__=m)}var c=active.active=function(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(A){u(P,A);function P(){var W,me,ve,He;o(this,P);for(var De=arguments.length,Xe=Array(De),qe=0;qe<De;qe++)Xe[qe]=arguments[qe];return He=(me=(ve=l(this,(W=P.__proto__||Object.getPrototypeOf(P)).call.apply(W,[this].concat(Xe))),ve),ve.state={active:!1},ve.handleMouseDown=function(){return ve.setState({active:!0})},ve.handleMouseUp=function(){return ve.setState({active:!1})},ve.render=function(){return a.default.createElement(g,{onMouseDown:ve.handleMouseDown,onMouseUp:ve.handleMouseUp},a.default.createElement(m,t({},ve.props,ve.state)))},me),l(ve,He)}return P}(a.default.Component)};return active.default=c,active}var loop={},hasRequiredLoop;function requireLoop(){if(hasRequiredLoop)return loop;hasRequiredLoop=1,Object.defineProperty(loop,"__esModule",{value:!0});var t=function(a,s){var o={},l=function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;o[c]=d};return a===0&&l("first-child"),a===s-1&&l("last-child"),(a===0||a%2===0)&&l("even"),Math.abs(a%2)===1&&l("odd"),l("nth-child",a),o};return loop.default=t,loop}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ReactCSS=lib.loop=lib.handleActive=lib.handleHover=lib.hover=void 0;var t=requireFlattenNames(),e=P(t),a=requireMergeClasses(),s=P(a),o=requireAutoprefix(),l=P(o),u=requireHover(),c=P(u),d=requireActive(),m=P(d),g=requireLoop(),A=P(g);function P(me){return me&&me.__esModule?me:{default:me}}lib.hover=c.default,lib.handleHover=c.default,lib.handleActive=m.default,lib.loop=A.default;var W=lib.ReactCSS=function(ve){for(var He=arguments.length,De=Array(He>1?He-1:0),Xe=1;Xe<He;Xe++)De[Xe-1]=arguments[Xe];var qe=(0,e.default)(De),Rs=(0,s.default)(ve,qe);return(0,l.default)(Rs)};return lib.default=W,lib}var libExports=requireLib();const reactCSS=getDefaultExportFromCjs(libExports);var calculateChange$2=function t(e,a,s,o,l){var u=l.clientWidth,c=l.clientHeight,d=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,m=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,g=d-(l.getBoundingClientRect().left+window.pageXOffset),A=m-(l.getBoundingClientRect().top+window.pageYOffset);if(s==="vertical"){var P=void 0;if(A<0?P=0:A>c?P=1:P=Math.round(A*100/c)/100,a.a!==P)return{h:a.h,s:a.s,l:a.l,a:P,source:"rgb"}}else{var W=void 0;if(g<0?W=0:g>u?W=1:W=Math.round(g*100/u)/100,o!==W)return{h:a.h,s:a.s,l:a.l,a:W,source:"rgb"}}return null},checkboardCache={},render=function t(e,a,s,o){if(typeof document>"u"&&!o)return null;var l=o?new o:document.createElement("canvas");l.width=s*2,l.height=s*2;var u=l.getContext("2d");return u?(u.fillStyle=e,u.fillRect(0,0,l.width,l.height),u.fillStyle=a,u.fillRect(0,0,s,s),u.translate(s,s),u.fillRect(0,0,s,s),l.toDataURL()):null},get$2=function t(e,a,s,o){var l=e+"-"+a+"-"+s+(o?"-server":"");if(checkboardCache[l])return checkboardCache[l];var u=render(e,a,s,o);return checkboardCache[l]=u,u},_extends$8=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Checkboard=function t(e){var a=e.white,s=e.grey,o=e.size,l=e.renderers,u=e.borderRadius,c=e.boxShadow,d=e.children,m=reactCSS({default:{grid:{borderRadius:u,boxShadow:c,absolute:"0px 0px 0px 0px",background:"url("+get$2(a,s,o,l.canvas)+") center left"}}});return reactExports.isValidElement(d)?React.cloneElement(d,_extends$8({},d.props,{style:_extends$8({},d.props.style,m.grid)})):React.createElement("div",{style:m.grid})};Checkboard.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var _extends$7=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},_createClass$7=function(){function t(e,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}();function _classCallCheck$7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Alpha=function(t){_inherits$7(e,t);function e(){var a,s,o,l;_classCallCheck$7(this,e);for(var u=arguments.length,c=Array(u),d=0;d<u;d++)c[d]=arguments[d];return l=(s=(o=_possibleConstructorReturn$7(this,(a=e.__proto__||Object.getPrototypeOf(e)).call.apply(a,[this].concat(c))),o),o.handleChange=function(m){var g=calculateChange$2(m,o.props.hsl,o.props.direction,o.props.a,o.container);g&&typeof o.props.onChange=="function"&&o.props.onChange(g,m)},o.handleMouseDown=function(m){o.handleChange(m),window.addEventListener("mousemove",o.handleChange),window.addEventListener("mouseup",o.handleMouseUp)},o.handleMouseUp=function(){o.unbindEventListeners()},o.unbindEventListeners=function(){window.removeEventListener("mousemove",o.handleChange),window.removeEventListener("mouseup",o.handleMouseUp)},s),_possibleConstructorReturn$7(o,l)}return _createClass$7(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var s=this,o=this.props.rgb,l=reactCSS({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+o.r+","+o.g+","+o.b+`, 0) 0%,
           rgba(`+o.r+","+o.g+","+o.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:o.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+o.r+","+o.g+","+o.b+`, 0) 0%,
           rgba(`+o.r+","+o.g+","+o.b+", 1) 100%)"},pointer:{left:0,top:o.a*100+"%"}},overwrite:_extends$7({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return React.createElement("div",{style:l.alpha},React.createElement("div",{style:l.checkboard},React.createElement(Checkboard,{renderers:this.props.renderers})),React.createElement("div",{style:l.gradient}),React.createElement("div",{style:l.container,ref:function(c){return s.container=c},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},React.createElement("div",{style:l.pointer},this.props.pointer?React.createElement(this.props.pointer,this.props):React.createElement("div",{style:l.slider}))))}}]),e}(reactExports.PureComponent||reactExports.Component),_createClass$6=function(){function t(e,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}();function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _classCallCheck$6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$6(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var DEFAULT_ARROW_OFFSET=1,UP_KEY_CODE=38,DOWN_KEY_CODE=40,VALID_KEY_CODES=[UP_KEY_CODE,DOWN_KEY_CODE],isValidKeyCode=function t(e){return VALID_KEY_CODES.indexOf(e)>-1},getNumberValue=function t(e){return Number(String(e).replace(/%/g,""))},idCounter=1,EditableInput=function(t){_inherits$6(e,t);function e(a){_classCallCheck$6(this,e);var s=_possibleConstructorReturn$6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.handleBlur=function(){s.state.blurValue&&s.setState({value:s.state.blurValue,blurValue:null})},s.handleChange=function(o){s.setUpdatedValue(o.target.value,o)},s.handleKeyDown=function(o){var l=getNumberValue(o.target.value);if(!isNaN(l)&&isValidKeyCode(o.keyCode)){var u=s.getArrowOffset(),c=o.keyCode===UP_KEY_CODE?l+u:l-u;s.setUpdatedValue(c,o)}},s.handleDrag=function(o){if(s.props.dragLabel){var l=Math.round(s.props.value+o.movementX);l>=0&&l<=s.props.dragMax&&s.props.onChange&&s.props.onChange(s.getValueObjectWithLabel(l),o)}},s.handleMouseDown=function(o){s.props.dragLabel&&(o.preventDefault(),s.handleDrag(o),window.addEventListener("mousemove",s.handleDrag),window.addEventListener("mouseup",s.handleMouseUp))},s.handleMouseUp=function(){s.unbindEventListeners()},s.unbindEventListeners=function(){window.removeEventListener("mousemove",s.handleDrag),window.removeEventListener("mouseup",s.handleMouseUp)},s.state={value:String(a.value).toUpperCase(),blurValue:String(a.value).toUpperCase()},s.inputId="rc-editable-input-"+idCounter++,s}return _createClass$6(e,[{key:"componentDidUpdate",value:function(s,o){this.props.value!==this.state.value&&(s.value!==this.props.value||o.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(s){return _defineProperty({},this.props.label,s)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||DEFAULT_ARROW_OFFSET}},{key:"setUpdatedValue",value:function(s,o){var l=this.props.label?this.getValueObjectWithLabel(s):s;this.props.onChange&&this.props.onChange(l,o),this.setState({value:s})}},{key:"render",value:function(){var s=this,o=reactCSS({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return React.createElement("div",{style:o.wrap},React.createElement("input",{id:this.inputId,style:o.input,ref:function(u){return s.input=u},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?React.createElement("label",{htmlFor:this.inputId,style:o.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(reactExports.PureComponent||reactExports.Component),calculateChange$1=function t(e,a,s,o){var l=o.clientWidth,u=o.clientHeight,c=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,d=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,m=c-(o.getBoundingClientRect().left+window.pageXOffset),g=d-(o.getBoundingClientRect().top+window.pageYOffset);if(a==="vertical"){var A=void 0;if(g<0)A=359;else if(g>u)A=0;else{var P=-(g*100/u)+100;A=360*P/100}if(s.h!==A)return{h:A,s:s.s,l:s.l,a:s.a,source:"hsl"}}else{var W=void 0;if(m<0)W=0;else if(m>l)W=359;else{var me=m*100/l;W=360*me/100}if(s.h!==W)return{h:W,s:s.s,l:s.l,a:s.a,source:"hsl"}}return null},_createClass$5=function(){function t(e,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}();function _classCallCheck$5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$5(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Hue=function(t){_inherits$5(e,t);function e(){var a,s,o,l;_classCallCheck$5(this,e);for(var u=arguments.length,c=Array(u),d=0;d<u;d++)c[d]=arguments[d];return l=(s=(o=_possibleConstructorReturn$5(this,(a=e.__proto__||Object.getPrototypeOf(e)).call.apply(a,[this].concat(c))),o),o.handleChange=function(m){var g=calculateChange$1(m,o.props.direction,o.props.hsl,o.container);g&&typeof o.props.onChange=="function"&&o.props.onChange(g,m)},o.handleMouseDown=function(m){o.handleChange(m),window.addEventListener("mousemove",o.handleChange),window.addEventListener("mouseup",o.handleMouseUp)},o.handleMouseUp=function(){o.unbindEventListeners()},s),_possibleConstructorReturn$5(o,l)}return _createClass$5(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var s=this,o=this.props.direction,l=o===void 0?"horizontal":o,u=reactCSS({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:l==="vertical"});return React.createElement("div",{style:u.hue},React.createElement("div",{className:"hue-"+l,style:u.container,ref:function(d){return s.container=d},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},React.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),React.createElement("div",{style:u.pointer},this.props.pointer?React.createElement(this.props.pointer,this.props):React.createElement("div",{style:u.slider}))))}}]),e}(reactExports.PureComponent||reactExports.Component),propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=t,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var t=requireReactPropTypesSecret();function e(){}function a(){}return a.resetWarningCache=e,factoryWithThrowingShims=function(){function s(u,c,d,m,g,A){if(A!==t){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}s.isRequired=s;function o(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:a,resetWarningCache:e};return l.PropTypes=l,l},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports);function listCacheClear(){this.__data__=[],this.size=0}function eq(t,e){return t===e||t!==t&&e!==e}function assocIndexOf(t,e){for(var a=t.length;a--;)if(eq(t[a][0],e))return a;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var e=this.__data__,a=assocIndexOf(e,t);if(a<0)return!1;var s=e.length-1;return a==s?e.pop():splice.call(e,a,1),--this.size,!0}function listCacheGet(t){var e=this.__data__,a=assocIndexOf(e,t);return a<0?void 0:e[a][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,e){var a=this.__data__,s=assocIndexOf(a,t);return s<0?(++this.size,a.push([t,e])):a[s][1]=e,this}function ListCache(t){var e=-1,a=t==null?0:t.length;for(this.clear();++e<a;){var s=t[e];this.set(s[0],s[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(t){var e=this.__data__,a=e.delete(t);return this.size=e.size,a}function stackGet(t){return this.__data__.get(t)}function stackHas(t){return this.__data__.has(t)}var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$e=Object.prototype,hasOwnProperty$b=objectProto$e.hasOwnProperty,nativeObjectToString$1=objectProto$e.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(t){var e=hasOwnProperty$b.call(t,symToStringTag$1),a=t[symToStringTag$1];try{t[symToStringTag$1]=void 0;var s=!0}catch{}var o=nativeObjectToString$1.call(t);return s&&(e?t[symToStringTag$1]=a:delete t[symToStringTag$1]),o}var objectProto$d=Object.prototype,nativeObjectToString=objectProto$d.toString;function objectToString(t){return nativeObjectToString.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(t){return t==null?t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString(t)}function isObject$2(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(t){if(!isObject$2(t))return!1;var e=baseGetTag(t);return e==funcTag$1||e==genTag||e==asyncTag||e==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(t){if(t!=null){try{return funcToString$2.call(t)}catch{}try{return t+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$c=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$a=objectProto$c.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$a).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){if(!isObject$2(t)||isMasked(t))return!1;var e=isFunction(t)?reIsNative:reIsHostCtor;return e.test(toSource(t))}function getValue(t,e){return t?.[e]}function getNative(t,e){var a=getValue(t,e);return baseIsNative(a)?a:void 0}var Map$1=getNative(root,"Map"),nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function hashGet(t){var e=this.__data__;if(nativeCreate){var a=e[t];return a===HASH_UNDEFINED$2?void 0:a}return hasOwnProperty$9.call(e,t)?e[t]:void 0}var objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function hashHas(t){var e=this.__data__;return nativeCreate?e[t]!==void 0:hasOwnProperty$8.call(e,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,e){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=nativeCreate&&e===void 0?HASH_UNDEFINED$1:e,this}function Hash(t){var e=-1,a=t==null?0:t.length;for(this.clear();++e<a;){var s=t[e];this.set(s[0],s[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function getMapData(t,e){var a=t.__data__;return isKeyable(e)?a[typeof e=="string"?"string":"hash"]:a.map}function mapCacheDelete(t){var e=getMapData(this,t).delete(t);return this.size-=e?1:0,e}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,e){var a=getMapData(this,t),s=a.size;return a.set(t,e),this.size+=a.size==s?0:1,this}function MapCache(t){var e=-1,a=t==null?0:t.length;for(this.clear();++e<a;){var s=t[e];this.set(s[0],s[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;function stackSet(t,e){var a=this.__data__;if(a instanceof ListCache){var s=a.__data__;if(!Map$1||s.length<LARGE_ARRAY_SIZE-1)return s.push([t,e]),this.size=++a.size,this;a=this.__data__=new MapCache(s)}return a.set(t,e),this.size=a.size,this}function Stack(t){var e=this.__data__=new ListCache(t);this.size=e.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch{}}();function baseAssignValue(t,e,a){e=="__proto__"&&defineProperty?defineProperty(t,e,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[e]=a}function assignMergeValue(t,e,a){(a!==void 0&&!eq(t[e],a)||a===void 0&&!(e in t))&&baseAssignValue(t,e,a)}function createBaseFor(t){return function(e,a,s){for(var o=-1,l=Object(e),u=s(e),c=u.length;c--;){var d=u[++o];if(a(l[d],d,l)===!1)break}return e}}var baseFor=createBaseFor(),freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root.Buffer:void 0;Buffer$2&&Buffer$2.allocUnsafe;function cloneBuffer(t,e){return t.slice()}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(t){var e=new t.constructor(t.byteLength);return new Uint8Array$1(e).set(new Uint8Array$1(t)),e}function cloneTypedArray(t,e){var a=cloneArrayBuffer(t.buffer);return new t.constructor(a,t.byteOffset,t.length)}function copyArray(t,e){var a=-1,s=t.length;for(e||(e=Array(s));++a<s;)e[a]=t[a];return e}var objectCreate=Object.create,baseCreate=function(){function t(){}return function(e){if(!isObject$2(e))return{};if(objectCreate)return objectCreate(e);t.prototype=e;var a=new t;return t.prototype=void 0,a}}();function overArg(t,e){return function(a){return t(e(a))}}var getPrototype=overArg(Object.getPrototypeOf,Object),objectProto$9=Object.prototype;function isPrototype(t){var e=t&&t.constructor,a=typeof e=="function"&&e.prototype||objectProto$9;return t===a}function initCloneObject(t){return typeof t.constructor=="function"&&!isPrototype(t)?baseCreate(getPrototype(t)):{}}function isObjectLike$1(t){return t!=null&&typeof t=="object"}var argsTag$2="[object Arguments]";function baseIsArguments(t){return isObjectLike$1(t)&&baseGetTag(t)==argsTag$2}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty,propertyIsEnumerable$1=objectProto$8.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike$1(t)&&hasOwnProperty$7.call(t,"callee")&&!propertyIsEnumerable$1.call(t,"callee")},isArray$1=Array.isArray,MAX_SAFE_INTEGER$1=9007199254740991;function isLength(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MAX_SAFE_INTEGER$1}function isArrayLike(t){return t!=null&&isLength(t.length)&&!isFunction(t)}function isArrayLikeObject(t){return isObjectLike$1(t)&&isArrayLike(t)}function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer$1=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$7=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$6=objectProto$7.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(t){if(!isObjectLike$1(t)||baseGetTag(t)!=objectTag$3)return!1;var e=getPrototype(t);if(e===null)return!0;var a=hasOwnProperty$6.call(e,"constructor")&&e.constructor;return typeof a=="function"&&a instanceof a&&funcToString.call(a)==objectCtorString}var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(t){return isObjectLike$1(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(t){return function(e){return t(e)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var t=freeModule&&freeModule.require&&freeModule.require("util").types;return t||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function safeGet(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function assignValue(t,e,a){var s=t[e];(!(hasOwnProperty$5.call(t,e)&&eq(s,a))||a===void 0&&!(e in t))&&baseAssignValue(t,e,a)}function copyObject(t,e,a,s){var o=!a;a||(a={});for(var l=-1,u=e.length;++l<u;){var c=e[l],d=void 0;d===void 0&&(d=t[c]),o?baseAssignValue(a,c,d):assignValue(a,c,d)}return a}function baseTimes(t,e){for(var a=-1,s=Array(t);++a<t;)s[a]=e(a);return s}var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,e){var a=typeof t;return e=e??MAX_SAFE_INTEGER,!!e&&(a=="number"||a!="symbol"&&reIsUint.test(t))&&t>-1&&t%1==0&&t<e}var objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function arrayLikeKeys(t,e){var a=isArray$1(t),s=!a&&isArguments(t),o=!a&&!s&&isBuffer(t),l=!a&&!s&&!o&&isTypedArray(t),u=a||s||o||l,c=u?baseTimes(t.length,String):[],d=c.length;for(var m in t)(e||hasOwnProperty$4.call(t,m))&&!(u&&(m=="length"||o&&(m=="offset"||m=="parent")||l&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||isIndex(m,d)))&&c.push(m);return c}function nativeKeysIn(t){var e=[];if(t!=null)for(var a in Object(t))e.push(a);return e}var objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function baseKeysIn(t){if(!isObject$2(t))return nativeKeysIn(t);var e=isPrototype(t),a=[];for(var s in t)s=="constructor"&&(e||!hasOwnProperty$3.call(t,s))||a.push(s);return a}function keysIn(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}function toPlainObject(t){return copyObject(t,keysIn(t))}function baseMergeDeep(t,e,a,s,o,l,u){var c=safeGet(t,a),d=safeGet(e,a),m=u.get(d);if(m){assignMergeValue(t,a,m);return}var g=l?l(c,d,a+"",t,e,u):void 0,A=g===void 0;if(A){var P=isArray$1(d),W=!P&&isBuffer(d),me=!P&&!W&&isTypedArray(d);g=d,P||W||me?isArray$1(c)?g=c:isArrayLikeObject(c)?g=copyArray(c):W?(A=!1,g=cloneBuffer(d)):me?(A=!1,g=cloneTypedArray(d)):g=[]:isPlainObject(d)||isArguments(d)?(g=c,isArguments(c)?g=toPlainObject(c):(!isObject$2(c)||isFunction(c))&&(g=initCloneObject(d))):A=!1}A&&(u.set(d,g),o(g,d,s,l,u),u.delete(d)),assignMergeValue(t,a,g)}function baseMerge(t,e,a,s,o){t!==e&&baseFor(e,function(l,u){if(o||(o=new Stack),isObject$2(l))baseMergeDeep(t,e,u,a,baseMerge,s,o);else{var c=s?s(safeGet(t,u),l,u+"",t,e,o):void 0;c===void 0&&(c=l),assignMergeValue(t,u,c)}},keysIn)}function identity(t){return t}function apply(t,e,a){switch(a.length){case 0:return t.call(e);case 1:return t.call(e,a[0]);case 2:return t.call(e,a[0],a[1]);case 3:return t.call(e,a[0],a[1],a[2])}return t.apply(e,a)}var nativeMax$1=Math.max;function overRest(t,e,a){return e=nativeMax$1(e===void 0?t.length-1:e,0),function(){for(var s=arguments,o=-1,l=nativeMax$1(s.length-e,0),u=Array(l);++o<l;)u[o]=s[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=s[o];return c[e]=a(u),apply(t,this,c)}}function constant(t){return function(){return t}}var baseSetToString=defineProperty?function(t,e){return defineProperty(t,"toString",{configurable:!0,enumerable:!1,value:constant(e),writable:!0})}:identity,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(t){var e=0,a=0;return function(){var s=nativeNow(),o=HOT_SPAN-(s-a);if(a=s,o>0){if(++e>=HOT_COUNT)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var setToString=shortOut(baseSetToString);function baseRest(t,e){return setToString(overRest(t,e,identity),t+"")}function isIterateeCall(t,e,a){if(!isObject$2(a))return!1;var s=typeof e;return(s=="number"?isArrayLike(a)&&isIndex(e,a.length):s=="string"&&e in a)?eq(a[e],t):!1}function createAssigner(t){return baseRest(function(e,a){var s=-1,o=a.length,l=o>1?a[o-1]:void 0,u=o>2?a[2]:void 0;for(l=t.length>3&&typeof l=="function"?(o--,l):void 0,u&&isIterateeCall(a[0],a[1],u)&&(l=o<3?void 0:l,o=1),e=Object(e);++s<o;){var c=a[s];c&&t(e,c,s,l)}return e})}var merge=createAssigner(function(t,e,a){baseMerge(t,e,a)}),Raised=function t(e){var a=e.zDepth,s=e.radius,o=e.background,l=e.children,u=e.styles,c=u===void 0?{}:u,d=reactCSS(merge({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+a+"px "+a*4+"px rgba(0,0,0,.24)",borderRadius:s,background:o}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},c),{"zDepth-1":a===1});return React.createElement("div",{style:d.wrap},React.createElement("div",{style:d.bg}),React.createElement("div",{style:d.content},l))};Raised.propTypes={background:PropTypes.string,zDepth:PropTypes.oneOf([0,1,2,3,4,5]),radius:PropTypes.number,styles:PropTypes.object};Raised.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var now$1=function(){return root.Date.now()},reWhitespace=/\s/;function trimmedEndIndex(t){for(var e=t.length;e--&&reWhitespace.test(t.charAt(e)););return e}var reTrimStart=/^\s+/;function baseTrim(t){return t&&t.slice(0,trimmedEndIndex(t)+1).replace(reTrimStart,"")}var symbolTag$1="[object Symbol]";function isSymbol(t){return typeof t=="symbol"||isObjectLike$1(t)&&baseGetTag(t)==symbolTag$1}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if(typeof t=="number")return t;if(isSymbol(t))return NAN;if(isObject$2(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=isObject$2(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=baseTrim(t);var a=reIsBinary.test(t);return a||reIsOctal.test(t)?freeParseInt(t.slice(2),a?2:8):reIsBadHex.test(t)?NAN:+t}var FUNC_ERROR_TEXT$2="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(t,e,a){var s,o,l,u,c,d,m=0,g=!1,A=!1,P=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT$2);e=toNumber(e)||0,isObject$2(a)&&(g=!!a.leading,A="maxWait"in a,l=A?nativeMax(toNumber(a.maxWait)||0,e):l,P="trailing"in a?!!a.trailing:P);function W(So){var Do=s,eh=o;return s=o=void 0,m=So,u=t.apply(eh,Do),u}function me(So){return m=So,c=setTimeout(De,e),g?W(So):u}function ve(So){var Do=So-d,eh=So-m,Ko=e-Do;return A?nativeMin(Ko,l-eh):Ko}function He(So){var Do=So-d,eh=So-m;return d===void 0||Do>=e||Do<0||A&&eh>=l}function De(){var So=now$1();if(He(So))return Xe(So);c=setTimeout(De,ve(So))}function Xe(So){return c=void 0,P&&s?W(So):(s=o=void 0,u)}function qe(){c!==void 0&&clearTimeout(c),m=0,s=d=o=c=void 0}function Rs(){return c===void 0?u:Xe(now$1())}function Vc(){var So=now$1(),Do=He(So);if(s=arguments,o=this,d=So,Do){if(c===void 0)return me(d);if(A)return clearTimeout(c),c=setTimeout(De,e),W(d)}return c===void 0&&(c=setTimeout(De,e)),u}return Vc.cancel=qe,Vc.flush=Rs,Vc}var FUNC_ERROR_TEXT$1="Expected a function";function throttle(t,e,a){var s=!0,o=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT$1);return isObject$2(a)&&(s="leading"in a?!!a.leading:s,o="trailing"in a?!!a.trailing:o),debounce(t,e,{leading:s,maxWait:e,trailing:o})}var calculateChange=function t(e,a,s){var o=s.getBoundingClientRect(),l=o.width,u=o.height,c=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,d=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,m=c-(s.getBoundingClientRect().left+window.pageXOffset),g=d-(s.getBoundingClientRect().top+window.pageYOffset);m<0?m=0:m>l&&(m=l),g<0?g=0:g>u&&(g=u);var A=m/l,P=1-g/u;return{h:a.h,s:A,v:P,a:a.a,source:"hsv"}},_createClass$4=function(){function t(e,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}();function _classCallCheck$4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$4(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Saturation=function(t){_inherits$4(e,t);function e(a){_classCallCheck$4(this,e);var s=_possibleConstructorReturn$4(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a));return s.handleChange=function(o){typeof s.props.onChange=="function"&&s.throttle(s.props.onChange,calculateChange(o,s.props.hsl,s.container),o)},s.handleMouseDown=function(o){s.handleChange(o);var l=s.getContainerRenderWindow();l.addEventListener("mousemove",s.handleChange),l.addEventListener("mouseup",s.handleMouseUp)},s.handleMouseUp=function(){s.unbindEventListeners()},s.throttle=throttle(function(o,l,u){o(l,u)},50),s}return _createClass$4(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var s=this.container,o=window;!o.document.contains(s)&&o.parent!==o;)o=o.parent;return o}},{key:"unbindEventListeners",value:function(){var s=this.getContainerRenderWindow();s.removeEventListener("mousemove",this.handleChange),s.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var s=this,o=this.props.style||{},l=o.color,u=o.white,c=o.black,d=o.pointer,m=o.circle,g=reactCSS({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:l,white:u,black:c,pointer:d,circle:m}},{custom:!!this.props.style});return React.createElement("div",{style:g.color,ref:function(P){return s.container=P},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},React.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),React.createElement("div",{style:g.white,className:"saturation-white"},React.createElement("div",{style:g.black,className:"saturation-black"}),React.createElement("div",{style:g.pointer},this.props.pointer?React.createElement(this.props.pointer,this.props):React.createElement("div",{style:g.circle}))))}}]),e}(reactExports.PureComponent||reactExports.Component);function arrayEach(t,e){for(var a=-1,s=t==null?0:t.length;++a<s&&e(t[a],a,t)!==!1;);return t}var nativeKeys=overArg(Object.keys,Object),objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys(t);var e=[];for(var a in Object(t))hasOwnProperty$2.call(t,a)&&a!="constructor"&&e.push(a);return e}function keys(t){return isArrayLike(t)?arrayLikeKeys(t):baseKeys(t)}function baseForOwn(t,e){return t&&baseFor(t,e,keys)}function createBaseEach(t,e){return function(a,s){if(a==null)return a;if(!isArrayLike(a))return t(a,s);for(var o=a.length,l=-1,u=Object(a);++l<o&&s(u[l],l,u)!==!1;);return a}}var baseEach=createBaseEach(baseForOwn);function castFunction(t){return typeof t=="function"?t:identity}function forEach(t,e){var a=isArray$1(t)?arrayEach:baseEach;return a(t,castFunction(e))}function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}var trimLeft=/^\s+/,trimRight=/\s+$/;function tinycolor(t,e){if(t=t||"",e=e||{},t instanceof tinycolor)return t;if(!(this instanceof tinycolor))return new tinycolor(t,e);var a=inputToRGB(t);this._originalInput=t,this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||a.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=a.ok}tinycolor.prototype={isDark:function t(){return this.getBrightness()<128},isLight:function t(){return!this.isDark()},isValid:function t(){return this._ok},getOriginalInput:function t(){return this._originalInput},getFormat:function t(){return this._format},getAlpha:function t(){return this._a},getBrightness:function t(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function t(){var e=this.toRgb(),a,s,o,l,u,c;return a=e.r/255,s=e.g/255,o=e.b/255,a<=.03928?l=a/12.92:l=Math.pow((a+.055)/1.055,2.4),s<=.03928?u=s/12.92:u=Math.pow((s+.055)/1.055,2.4),o<=.03928?c=o/12.92:c=Math.pow((o+.055)/1.055,2.4),.2126*l+.7152*u+.0722*c},setAlpha:function t(e){return this._a=boundAlpha(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function t(){var e=rgbToHsv(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function t(){var e=rgbToHsv(this._r,this._g,this._b),a=Math.round(e.h*360),s=Math.round(e.s*100),o=Math.round(e.v*100);return this._a==1?"hsv("+a+", "+s+"%, "+o+"%)":"hsva("+a+", "+s+"%, "+o+"%, "+this._roundA+")"},toHsl:function t(){var e=rgbToHsl(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function t(){var e=rgbToHsl(this._r,this._g,this._b),a=Math.round(e.h*360),s=Math.round(e.s*100),o=Math.round(e.l*100);return this._a==1?"hsl("+a+", "+s+"%, "+o+"%)":"hsla("+a+", "+s+"%, "+o+"%, "+this._roundA+")"},toHex:function t(e){return rgbToHex(this._r,this._g,this._b,e)},toHexString:function t(e){return"#"+this.toHex(e)},toHex8:function t(e){return rgbaToHex(this._r,this._g,this._b,this._a,e)},toHex8String:function t(e){return"#"+this.toHex8(e)},toRgb:function t(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function t(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function t(){return{r:Math.round(bound01(this._r,255)*100)+"%",g:Math.round(bound01(this._g,255)*100)+"%",b:Math.round(bound01(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function t(){return this._a==1?"rgb("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%)":"rgba("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%, "+this._roundA+")"},toName:function t(){return this._a===0?"transparent":this._a<1?!1:hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1},toFilter:function t(e){var a="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),s=a,o=this._gradientType?"GradientType = 1, ":"";if(e){var l=tinycolor(e);s="#"+rgbaToArgbHex(l._r,l._g,l._b,l._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+a+",endColorstr="+s+")"},toString:function t(e){var a=!!e;e=e||this._format;var s=!1,o=this._a<1&&this._a>=0,l=!a&&o&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return l?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(s=this.toRgbString()),e==="prgb"&&(s=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(s=this.toHexString()),e==="hex3"&&(s=this.toHexString(!0)),e==="hex4"&&(s=this.toHex8String(!0)),e==="hex8"&&(s=this.toHex8String()),e==="name"&&(s=this.toName()),e==="hsl"&&(s=this.toHslString()),e==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},clone:function t(){return tinycolor(this.toString())},_applyModification:function t(e,a){var s=e.apply(null,[this].concat([].slice.call(a)));return this._r=s._r,this._g=s._g,this._b=s._b,this.setAlpha(s._a),this},lighten:function t(){return this._applyModification(_lighten,arguments)},brighten:function t(){return this._applyModification(_brighten,arguments)},darken:function t(){return this._applyModification(_darken,arguments)},desaturate:function t(){return this._applyModification(_desaturate,arguments)},saturate:function t(){return this._applyModification(_saturate,arguments)},greyscale:function t(){return this._applyModification(_greyscale,arguments)},spin:function t(){return this._applyModification(_spin,arguments)},_applyCombination:function t(e,a){return e.apply(null,[this].concat([].slice.call(a)))},analogous:function t(){return this._applyCombination(_analogous,arguments)},complement:function t(){return this._applyCombination(_complement,arguments)},monochromatic:function t(){return this._applyCombination(_monochromatic,arguments)},splitcomplement:function t(){return this._applyCombination(_splitcomplement,arguments)},triad:function t(){return this._applyCombination(polyad,[3])},tetrad:function t(){return this._applyCombination(polyad,[4])}};tinycolor.fromRatio=function(t,e){if(_typeof(t)=="object"){var a={};for(var s in t)t.hasOwnProperty(s)&&(s==="a"?a[s]=t[s]:a[s]=convertToPercentage(t[s]));t=a}return tinycolor(t,e)};function inputToRGB(t){var e={r:0,g:0,b:0},a=1,s=null,o=null,l=null,u=!1,c=!1;return typeof t=="string"&&(t=stringInputToObject(t)),_typeof(t)=="object"&&(isValidCSSUnit(t.r)&&isValidCSSUnit(t.g)&&isValidCSSUnit(t.b)?(e=rgbToRgb(t.r,t.g,t.b),u=!0,c=String(t.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.v)?(s=convertToPercentage(t.s),o=convertToPercentage(t.v),e=hsvToRgb(t.h,s,o),u=!0,c="hsv"):isValidCSSUnit(t.h)&&isValidCSSUnit(t.s)&&isValidCSSUnit(t.l)&&(s=convertToPercentage(t.s),l=convertToPercentage(t.l),e=hslToRgb(t.h,s,l),u=!0,c="hsl"),t.hasOwnProperty("a")&&(a=t.a)),a=boundAlpha(a),{ok:u,format:t.format||c,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a}}function rgbToRgb(t,e,a){return{r:bound01(t,255)*255,g:bound01(e,255)*255,b:bound01(a,255)*255}}function rgbToHsl(t,e,a){t=bound01(t,255),e=bound01(e,255),a=bound01(a,255);var s=Math.max(t,e,a),o=Math.min(t,e,a),l,u,c=(s+o)/2;if(s==o)l=u=0;else{var d=s-o;switch(u=c>.5?d/(2-s-o):d/(s+o),s){case t:l=(e-a)/d+(e<a?6:0);break;case e:l=(a-t)/d+2;break;case a:l=(t-e)/d+4;break}l/=6}return{h:l,s:u,l:c}}function hslToRgb(t,e,a){var s,o,l;t=bound01(t,360),e=bound01(e,100),a=bound01(a,100);function u(m,g,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?m+(g-m)*6*A:A<1/2?g:A<2/3?m+(g-m)*(2/3-A)*6:m}if(e===0)s=o=l=a;else{var c=a<.5?a*(1+e):a+e-a*e,d=2*a-c;s=u(d,c,t+1/3),o=u(d,c,t),l=u(d,c,t-1/3)}return{r:s*255,g:o*255,b:l*255}}function rgbToHsv(t,e,a){t=bound01(t,255),e=bound01(e,255),a=bound01(a,255);var s=Math.max(t,e,a),o=Math.min(t,e,a),l,u,c=s,d=s-o;if(u=s===0?0:d/s,s==o)l=0;else{switch(s){case t:l=(e-a)/d+(e<a?6:0);break;case e:l=(a-t)/d+2;break;case a:l=(t-e)/d+4;break}l/=6}return{h:l,s:u,v:c}}function hsvToRgb(t,e,a){t=bound01(t,360)*6,e=bound01(e,100),a=bound01(a,100);var s=Math.floor(t),o=t-s,l=a*(1-e),u=a*(1-o*e),c=a*(1-(1-o)*e),d=s%6,m=[a,u,l,l,c,a][d],g=[c,a,a,u,l,l][d],A=[l,l,c,a,a,u][d];return{r:m*255,g:g*255,b:A*255}}function rgbToHex(t,e,a,s){var o=[pad2(Math.round(t).toString(16)),pad2(Math.round(e).toString(16)),pad2(Math.round(a).toString(16))];return s&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function rgbaToHex(t,e,a,s,o){var l=[pad2(Math.round(t).toString(16)),pad2(Math.round(e).toString(16)),pad2(Math.round(a).toString(16)),pad2(convertDecimalToHex(s))];return o&&l[0].charAt(0)==l[0].charAt(1)&&l[1].charAt(0)==l[1].charAt(1)&&l[2].charAt(0)==l[2].charAt(1)&&l[3].charAt(0)==l[3].charAt(1)?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0)+l[3].charAt(0):l.join("")}function rgbaToArgbHex(t,e,a,s){var o=[pad2(convertDecimalToHex(s)),pad2(Math.round(t).toString(16)),pad2(Math.round(e).toString(16)),pad2(Math.round(a).toString(16))];return o.join("")}tinycolor.equals=function(t,e){return!t||!e?!1:tinycolor(t).toRgbString()==tinycolor(e).toRgbString()};tinycolor.random=function(){return tinycolor.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function _desaturate(t,e){e=e===0?0:e||10;var a=tinycolor(t).toHsl();return a.s-=e/100,a.s=clamp01(a.s),tinycolor(a)}function _saturate(t,e){e=e===0?0:e||10;var a=tinycolor(t).toHsl();return a.s+=e/100,a.s=clamp01(a.s),tinycolor(a)}function _greyscale(t){return tinycolor(t).desaturate(100)}function _lighten(t,e){e=e===0?0:e||10;var a=tinycolor(t).toHsl();return a.l+=e/100,a.l=clamp01(a.l),tinycolor(a)}function _brighten(t,e){e=e===0?0:e||10;var a=tinycolor(t).toRgb();return a.r=Math.max(0,Math.min(255,a.r-Math.round(255*-(e/100)))),a.g=Math.max(0,Math.min(255,a.g-Math.round(255*-(e/100)))),a.b=Math.max(0,Math.min(255,a.b-Math.round(255*-(e/100)))),tinycolor(a)}function _darken(t,e){e=e===0?0:e||10;var a=tinycolor(t).toHsl();return a.l-=e/100,a.l=clamp01(a.l),tinycolor(a)}function _spin(t,e){var a=tinycolor(t).toHsl(),s=(a.h+e)%360;return a.h=s<0?360+s:s,tinycolor(a)}function _complement(t){var e=tinycolor(t).toHsl();return e.h=(e.h+180)%360,tinycolor(e)}function polyad(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var a=tinycolor(t).toHsl(),s=[tinycolor(t)],o=360/e,l=1;l<e;l++)s.push(tinycolor({h:(a.h+l*o)%360,s:a.s,l:a.l}));return s}function _splitcomplement(t){var e=tinycolor(t).toHsl(),a=e.h;return[tinycolor(t),tinycolor({h:(a+72)%360,s:e.s,l:e.l}),tinycolor({h:(a+216)%360,s:e.s,l:e.l})]}function _analogous(t,e,a){e=e||6,a=a||30;var s=tinycolor(t).toHsl(),o=360/a,l=[tinycolor(t)];for(s.h=(s.h-(o*e>>1)+720)%360;--e;)s.h=(s.h+o)%360,l.push(tinycolor(s));return l}function _monochromatic(t,e){e=e||6;for(var a=tinycolor(t).toHsv(),s=a.h,o=a.s,l=a.v,u=[],c=1/e;e--;)u.push(tinycolor({h:s,s:o,v:l})),l=(l+c)%1;return u}tinycolor.mix=function(t,e,a){a=a===0?0:a||50;var s=tinycolor(t).toRgb(),o=tinycolor(e).toRgb(),l=a/100,u={r:(o.r-s.r)*l+s.r,g:(o.g-s.g)*l+s.g,b:(o.b-s.b)*l+s.b,a:(o.a-s.a)*l+s.a};return tinycolor(u)};tinycolor.readability=function(t,e){var a=tinycolor(t),s=tinycolor(e);return(Math.max(a.getLuminance(),s.getLuminance())+.05)/(Math.min(a.getLuminance(),s.getLuminance())+.05)};tinycolor.isReadable=function(t,e,a){var s=tinycolor.readability(t,e),o,l;switch(l=!1,o=validateWCAG2Parms(a),o.level+o.size){case"AAsmall":case"AAAlarge":l=s>=4.5;break;case"AAlarge":l=s>=3;break;case"AAAsmall":l=s>=7;break}return l};tinycolor.mostReadable=function(t,e,a){var s=null,o=0,l,u,c,d;a=a||{},u=a.includeFallbackColors,c=a.level,d=a.size;for(var m=0;m<e.length;m++)l=tinycolor.readability(t,e[m]),l>o&&(o=l,s=tinycolor(e[m]));return tinycolor.isReadable(t,s,{level:c,size:d})||!u?s:(a.includeFallbackColors=!1,tinycolor.mostReadable(t,["#fff","#000"],a))};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names);function flip(t){var e={};for(var a in t)t.hasOwnProperty(a)&&(e[t[a]]=a);return e}function boundAlpha(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function bound01(t,e){isOnePointZero(t)&&(t="100%");var a=isPercentage(t);return t=Math.min(e,Math.max(0,parseFloat(t))),a&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function clamp01(t){return Math.min(1,Math.max(0,t))}function parseIntFromHex(t){return parseInt(t,16)}function isOnePointZero(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function isPercentage(t){return typeof t=="string"&&t.indexOf("%")!=-1}function pad2(t){return t.length==1?"0"+t:""+t}function convertToPercentage(t){return t<=1&&(t=t*100+"%"),t}function convertDecimalToHex(t){return Math.round(parseFloat(t)*255).toString(16)}function convertHexToDecimal(t){return parseIntFromHex(t)/255}var matchers=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",a="(?:"+e+")|(?:"+t+")",s="[\\s|\\(]+("+a+")[,|\\s]+("+a+")[,|\\s]+("+a+")\\s*\\)?",o="[\\s|\\(]+("+a+")[,|\\s]+("+a+")[,|\\s]+("+a+")[,|\\s]+("+a+")\\s*\\)?";return{CSS_UNIT:new RegExp(a),rgb:new RegExp("rgb"+s),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+s),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+s),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function isValidCSSUnit(t){return!!matchers.CSS_UNIT.exec(t)}function stringInputToObject(t){t=t.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var e=!1;if(names[t])t=names[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var a;return(a=matchers.rgb.exec(t))?{r:a[1],g:a[2],b:a[3]}:(a=matchers.rgba.exec(t))?{r:a[1],g:a[2],b:a[3],a:a[4]}:(a=matchers.hsl.exec(t))?{h:a[1],s:a[2],l:a[3]}:(a=matchers.hsla.exec(t))?{h:a[1],s:a[2],l:a[3],a:a[4]}:(a=matchers.hsv.exec(t))?{h:a[1],s:a[2],v:a[3]}:(a=matchers.hsva.exec(t))?{h:a[1],s:a[2],v:a[3],a:a[4]}:(a=matchers.hex8.exec(t))?{r:parseIntFromHex(a[1]),g:parseIntFromHex(a[2]),b:parseIntFromHex(a[3]),a:convertHexToDecimal(a[4]),format:e?"name":"hex8"}:(a=matchers.hex6.exec(t))?{r:parseIntFromHex(a[1]),g:parseIntFromHex(a[2]),b:parseIntFromHex(a[3]),format:e?"name":"hex"}:(a=matchers.hex4.exec(t))?{r:parseIntFromHex(a[1]+""+a[1]),g:parseIntFromHex(a[2]+""+a[2]),b:parseIntFromHex(a[3]+""+a[3]),a:convertHexToDecimal(a[4]+""+a[4]),format:e?"name":"hex8"}:(a=matchers.hex3.exec(t))?{r:parseIntFromHex(a[1]+""+a[1]),g:parseIntFromHex(a[2]+""+a[2]),b:parseIntFromHex(a[3]+""+a[3]),format:e?"name":"hex"}:!1}function validateWCAG2Parms(t){var e,a;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),a=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),a!=="small"&&a!=="large"&&(a="small"),{level:e,size:a}}var simpleCheckForValidColor=function t(e){var a=["r","g","b","a","h","s","l","v"],s=0,o=0;return forEach(a,function(l){if(e[l]&&(s+=1,isNaN(e[l])||(o+=1),l==="s"||l==="l")){var u=/^\d+%$/;u.test(e[l])&&(o+=1)}}),s===o?e:!1},toState=function t(e,a){var s=e.hex?tinycolor(e.hex):tinycolor(e),o=s.toHsl(),l=s.toHsv(),u=s.toRgb(),c=s.toHex();o.s===0&&(o.h=a||0,l.h=a||0);var d=c==="000000"&&u.a===0;return{hsl:o,hex:d?"transparent":"#"+c,rgb:u,hsv:l,oldHue:e.h||a||o.h,source:e.source}},isValidHex=function t(e){if(e==="transparent")return!0;var a=String(e).charAt(0)==="#"?1:0;return e.length!==4+a&&e.length<7+a&&tinycolor(e).isValid()},getContrastingColor=function t(e){if(!e)return"#fff";var a=toState(e);if(a.hex==="transparent")return"rgba(0,0,0,0.4)";var s=(a.rgb.r*299+a.rgb.g*587+a.rgb.b*114)/1e3;return s>=128?"#000":"#fff"},isvalidColorString=function t(e,a){var s=e.replace("","");return tinycolor(a+" ("+s+")")._ok},_extends$6=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},_createClass$3=function(){function t(e,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}();function _classCallCheck$3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$3(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ColorWrap=function t(e){var a=function(s){_inherits$3(o,s);function o(l){_classCallCheck$3(this,o);var u=_possibleConstructorReturn$3(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return u.handleChange=function(c,d){var m=simpleCheckForValidColor(c);if(m){var g=toState(c,c.h||u.state.oldHue);u.setState(g),u.props.onChangeComplete&&u.debounce(u.props.onChangeComplete,g,d),u.props.onChange&&u.props.onChange(g,d)}},u.handleSwatchHover=function(c,d){var m=simpleCheckForValidColor(c);if(m){var g=toState(c,c.h||u.state.oldHue);u.props.onSwatchHover&&u.props.onSwatchHover(g,d)}},u.state=_extends$6({},toState(l.color,0)),u.debounce=debounce(function(c,d,m){c(d,m)},100),u}return _createClass$3(o,[{key:"render",value:function(){var u={};return this.props.onSwatchHover&&(u.onSwatchHover=this.handleSwatchHover),React.createElement(e,_extends$6({},this.props,this.state,{onChange:this.handleChange},u))}}],[{key:"getDerivedStateFromProps",value:function(u,c){return _extends$6({},toState(u.color,c.oldHue))}}]),o}(reactExports.PureComponent||reactExports.Component);return a.propTypes=_extends$6({},e.propTypes),a.defaultProps=_extends$6({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),a},_extends$5=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},_createClass$2=function(){function t(e,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}();function _classCallCheck$2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$2(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var handleFocus=function t(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(s){_inherits$2(o,s);function o(){var l,u,c,d;_classCallCheck$2(this,o);for(var m=arguments.length,g=Array(m),A=0;A<m;A++)g[A]=arguments[A];return d=(u=(c=_possibleConstructorReturn$2(this,(l=o.__proto__||Object.getPrototypeOf(o)).call.apply(l,[this].concat(g))),c),c.state={focus:!1},c.handleFocus=function(){return c.setState({focus:!0})},c.handleBlur=function(){return c.setState({focus:!1})},u),_possibleConstructorReturn$2(c,d)}return _createClass$2(o,[{key:"render",value:function(){return React.createElement(a,{onFocus:this.handleFocus,onBlur:this.handleBlur},React.createElement(e,_extends$5({},this.props,this.state)))}}]),o}(React.Component)},_extends$4=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},ENTER=13,Swatch=function t(e){var a=e.color,s=e.style,o=e.onClick,l=o===void 0?function(){}:o,u=e.onHover,c=e.title,d=c===void 0?a:c,m=e.children,g=e.focus,A=e.focusStyle,P=A===void 0?{}:A,W=a==="transparent",me=reactCSS({default:{swatch:_extends$4({background:a,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},s,g?P:{})}}),ve=function(Rs){return l(a,Rs)},He=function(Rs){return Rs.keyCode===ENTER&&l(a,Rs)},De=function(Rs){return u(a,Rs)},Xe={};return u&&(Xe.onMouseOver=De),React.createElement("div",_extends$4({style:me.swatch,onClick:ve,title:d,tabIndex:0,onKeyDown:He},Xe),m,W&&React.createElement(Checkboard,{borderRadius:me.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Swatch$1=handleFocus(Swatch);var AlphaPointer=function t(e){var a=e.direction,s=reactCSS({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:a==="vertical"});return React.createElement("div",{style:s.picker})},_extends$3=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},AlphaPicker=function t(e){var a=e.rgb,s=e.hsl,o=e.width,l=e.height,u=e.onChange,c=e.direction,d=e.style,m=e.renderers,g=e.pointer,A=e.className,P=A===void 0?"":A,W=reactCSS({default:{picker:{position:"relative",width:o,height:l},alpha:{radius:"2px",style:d}}});return React.createElement("div",{style:W.picker,className:"alpha-picker "+P},React.createElement(Alpha,_extends$3({},W.alpha,{rgb:a,hsl:s,pointer:g,renderers:m,onChange:u,direction:c})))};AlphaPicker.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:AlphaPointer};ColorWrap(AlphaPicker);function arrayMap(t,e){for(var a=-1,s=t==null?0:t.length,o=Array(s);++a<s;)o[a]=e(t[a],a,t);return o}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(t){return this.__data__.set(t,HASH_UNDEFINED),this}function setCacheHas(t){return this.__data__.has(t)}function SetCache(t){var e=-1,a=t==null?0:t.length;for(this.__data__=new MapCache;++e<a;)this.add(t[e])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(t,e){for(var a=-1,s=t==null?0:t.length;++a<s;)if(e(t[a],a,t))return!0;return!1}function cacheHas(t,e){return t.has(e)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(t,e,a,s,o,l){var u=a&COMPARE_PARTIAL_FLAG$5,c=t.length,d=e.length;if(c!=d&&!(u&&d>c))return!1;var m=l.get(t),g=l.get(e);if(m&&g)return m==e&&g==t;var A=-1,P=!0,W=a&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(l.set(t,e),l.set(e,t);++A<c;){var me=t[A],ve=e[A];if(s)var He=u?s(ve,me,A,e,t,l):s(me,ve,A,t,e,l);if(He!==void 0){if(He)continue;P=!1;break}if(W){if(!arraySome(e,function(De,Xe){if(!cacheHas(W,Xe)&&(me===De||o(me,De,a,s,l)))return W.push(Xe)})){P=!1;break}}else if(!(me===ve||o(me,ve,a,s,l))){P=!1;break}}return l.delete(t),l.delete(e),P}function mapToArray(t){var e=-1,a=Array(t.size);return t.forEach(function(s,o){a[++e]=[o,s]}),a}function setToArray(t){var e=-1,a=Array(t.size);return t.forEach(function(s){a[++e]=s}),a}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function equalByTag(t,e,a,s,o,l,u){switch(a){case dataViewTag$1:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case arrayBufferTag:return!(t.byteLength!=e.byteLength||!l(new Uint8Array$1(t),new Uint8Array$1(e)));case boolTag:case dateTag:case numberTag:return eq(+t,+e);case errorTag:return t.name==e.name&&t.message==e.message;case regexpTag:case stringTag:return t==e+"";case mapTag$1:var c=mapToArray;case setTag$1:var d=s&COMPARE_PARTIAL_FLAG$4;if(c||(c=setToArray),t.size!=e.size&&!d)return!1;var m=u.get(t);if(m)return m==e;s|=COMPARE_UNORDERED_FLAG$2,u.set(t,e);var g=equalArrays(c(t),c(e),s,o,l,u);return u.delete(t),g;case symbolTag:if(symbolValueOf)return symbolValueOf.call(t)==symbolValueOf.call(e)}return!1}function arrayPush(t,e){for(var a=-1,s=e.length,o=t.length;++a<s;)t[o+a]=e[a];return t}function baseGetAllKeys(t,e,a){var s=e(t);return isArray$1(t)?s:arrayPush(s,a(t))}function arrayFilter(t,e){for(var a=-1,s=t==null?0:t.length,o=0,l=[];++a<s;){var u=t[a];e(u,a,t)&&(l[o++]=u)}return l}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(t){return t==null?[]:(t=Object(t),arrayFilter(nativeGetSymbols(t),function(e){return propertyIsEnumerable.call(t,e)}))}:stubArray;function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols)}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(t,e,a,s,o,l){var u=a&COMPARE_PARTIAL_FLAG$3,c=getAllKeys(t),d=c.length,m=getAllKeys(e),g=m.length;if(d!=g&&!u)return!1;for(var A=d;A--;){var P=c[A];if(!(u?P in e:hasOwnProperty$1.call(e,P)))return!1}var W=l.get(t),me=l.get(e);if(W&&me)return W==e&&me==t;var ve=!0;l.set(t,e),l.set(e,t);for(var He=u;++A<d;){P=c[A];var De=t[P],Xe=e[P];if(s)var qe=u?s(Xe,De,P,e,t,l):s(De,Xe,P,t,e,l);if(!(qe===void 0?De===Xe||o(De,Xe,a,s,l):qe)){ve=!1;break}He||(He=P=="constructor")}if(ve&&!He){var Rs=t.constructor,Vc=e.constructor;Rs!=Vc&&"constructor"in t&&"constructor"in e&&!(typeof Rs=="function"&&Rs instanceof Rs&&typeof Vc=="function"&&Vc instanceof Vc)&&(ve=!1)}return l.delete(t),l.delete(e),ve}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),WeakMap$1=getNative(root,"WeakMap"),mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$1&&getTag$1(new Set$1)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(t){var e=baseGetTag(t),a=e==objectTag$1?t.constructor:void 0,s=a?toSource(a):"";if(s)switch(s){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return e});var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(t,e,a,s,o,l){var u=isArray$1(t),c=isArray$1(e),d=u?arrayTag:getTag$1(t),m=c?arrayTag:getTag$1(e);d=d==argsTag?objectTag:d,m=m==argsTag?objectTag:m;var g=d==objectTag,A=m==objectTag,P=d==m;if(P&&isBuffer(t)){if(!isBuffer(e))return!1;u=!0,g=!1}if(P&&!g)return l||(l=new Stack),u||isTypedArray(t)?equalArrays(t,e,a,s,o,l):equalByTag(t,e,d,a,s,o,l);if(!(a&COMPARE_PARTIAL_FLAG$2)){var W=g&&hasOwnProperty.call(t,"__wrapped__"),me=A&&hasOwnProperty.call(e,"__wrapped__");if(W||me){var ve=W?t.value():t,He=me?e.value():e;return l||(l=new Stack),o(ve,He,a,s,l)}}return P?(l||(l=new Stack),equalObjects(t,e,a,s,o,l)):!1}function baseIsEqual(t,e,a,s,o){return t===e?!0:t==null||e==null||!isObjectLike$1(t)&&!isObjectLike$1(e)?t!==t&&e!==e:baseIsEqualDeep(t,e,a,s,baseIsEqual,o)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(t,e,a,s){var o=a.length,l=o;if(t==null)return!l;for(t=Object(t);o--;){var u=a[o];if(u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<l;){u=a[o];var c=u[0],d=t[c],m=u[1];if(u[2]){if(d===void 0&&!(c in t))return!1}else{var g=new Stack,A;if(!(A===void 0?baseIsEqual(m,d,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,s,g):A))return!1}}return!0}function isStrictComparable(t){return t===t&&!isObject$2(t)}function getMatchData(t){for(var e=keys(t),a=e.length;a--;){var s=e[a],o=t[s];e[a]=[s,o,isStrictComparable(o)]}return e}function matchesStrictComparable(t,e){return function(a){return a==null?!1:a[t]===e&&(e!==void 0||t in Object(a))}}function baseMatches(t){var e=getMatchData(t);return e.length==1&&e[0][2]?matchesStrictComparable(e[0][0],e[0][1]):function(a){return a===t||baseIsMatch(a,t,e)}}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(t,e){if(isArray$1(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||isSymbol(t)?!0:reIsPlainProp.test(t)||!reIsDeepProp.test(t)||e!=null&&t in Object(e)}var FUNC_ERROR_TEXT="Expected a function";function memoize(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);var a=function(){var s=arguments,o=e?e.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=t.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(memoize.Cache||MapCache),a}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var e=memoize(t,function(s){return a.size===MAX_MEMOIZE_SIZE&&a.clear(),s}),a=e.cache;return e}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(rePropName,function(a,s,o,l){e.push(o?l.replace(reEscapeChar,"$1"):s||a)}),e}),symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString$1(t){if(typeof t=="string")return t;if(isArray$1(t))return arrayMap(t,baseToString$1)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function toString$1(t){return t==null?"":baseToString$1(t)}function castPath(t,e){return isArray$1(t)?t:isKey(t,e)?[t]:stringToPath(toString$1(t))}function toKey(t){if(typeof t=="string"||isSymbol(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function baseGet(t,e){e=castPath(e,t);for(var a=0,s=e.length;t!=null&&a<s;)t=t[toKey(e[a++])];return a&&a==s?t:void 0}function get$1(t,e,a){var s=t==null?void 0:baseGet(t,e);return s===void 0?a:s}function baseHasIn(t,e){return t!=null&&e in Object(t)}function hasPath(t,e,a){e=castPath(e,t);for(var s=-1,o=e.length,l=!1;++s<o;){var u=toKey(e[s]);if(!(l=t!=null&&a(t,u)))break;t=t[u]}return l||++s!=o?l:(o=t==null?0:t.length,!!o&&isLength(o)&&isIndex(u,o)&&(isArray$1(t)||isArguments(t)))}function hasIn(t,e){return t!=null&&hasPath(t,e,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(t,e){return isKey(t)&&isStrictComparable(e)?matchesStrictComparable(toKey(t),e):function(a){var s=get$1(a,t);return s===void 0&&s===e?hasIn(a,t):baseIsEqual(e,s,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(t){return function(e){return e?.[t]}}function basePropertyDeep(t){return function(e){return baseGet(e,t)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return typeof t=="function"?t:t==null?identity:typeof t=="object"?isArray$1(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}function baseMap(t,e){var a=-1,s=isArrayLike(t)?Array(t.length):[];return baseEach(t,function(o,l,u){s[++a]=e(o,l,u)}),s}function map(t,e){var a=isArray$1(t)?arrayMap:baseMap;return a(t,baseIteratee(e))}var BlockSwatches=function t(e){var a=e.colors,s=e.onClick,o=e.onSwatchHover,l=reactCSS({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return React.createElement("div",{style:l.swatches},map(a,function(u){return React.createElement(Swatch$1,{key:u,color:u,style:l.swatch,onClick:s,onHover:o,focusStyle:{boxShadow:"0 0 4px "+u}})}),React.createElement("div",{style:l.clear}))},Block=function t(e){var a=e.onChange,s=e.onSwatchHover,o=e.hex,l=e.colors,u=e.width,c=e.triangle,d=e.styles,m=d===void 0?{}:d,g=e.className,A=g===void 0?"":g,P=o==="transparent",W=function(He,De){isValidHex(He)&&a({hex:He,source:"hex"},De)},me=reactCSS(merge({default:{card:{width:u,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:o,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:getContrastingColor(o),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+o+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},m),{"hide-triangle":c==="hide"});return React.createElement("div",{style:me.card,className:"block-picker "+A},React.createElement("div",{style:me.triangle}),React.createElement("div",{style:me.head},P&&React.createElement(Checkboard,{borderRadius:"6px 6px 0 0"}),React.createElement("div",{style:me.label},o)),React.createElement("div",{style:me.body},React.createElement(BlockSwatches,{colors:l,onClick:W,onSwatchHover:s}),React.createElement(EditableInput,{style:{input:me.input},value:o,onChange:W})))};Block.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),colors:PropTypes.arrayOf(PropTypes.string),triangle:PropTypes.oneOf(["top","hide"]),styles:PropTypes.object};Block.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};ColorWrap(Block);var red={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},pink={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},purple={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},deepPurple={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},indigo={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},blue={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},lightBlue={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},cyan={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},teal={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},green={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},lightGreen={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},lime={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},yellow={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},amber={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},orange={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},deepOrange={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},brown={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},blueGrey={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},CircleSwatch=function t(e){var a=e.color,s=e.onClick,o=e.onSwatchHover,l=e.hover,u=e.active,c=e.circleSize,d=e.circleSpacing,m=reactCSS({default:{swatch:{width:c,height:c,marginRight:d,marginBottom:d,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(c/2+1)+"px "+a,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+a}}},{hover:l,active:u});return React.createElement("div",{style:m.swatch},React.createElement(Swatch$1,{style:m.Swatch,color:a,onClick:s,onHover:o,focusStyle:{boxShadow:m.Swatch.boxShadow+", 0 0 5px "+a}}))};CircleSwatch.defaultProps={circleSize:28,circleSpacing:14};const CircleSwatch$1=libExports.handleHover(CircleSwatch);var Circle=function t(e){var a=e.width,s=e.onChange,o=e.onSwatchHover,l=e.colors,u=e.hex,c=e.circleSize,d=e.styles,m=d===void 0?{}:d,g=e.circleSpacing,A=e.className,P=A===void 0?"":A,W=reactCSS(merge({default:{card:{width:a,display:"flex",flexWrap:"wrap",marginRight:-g,marginBottom:-g}}},m)),me=function(He,De){return s({hex:He,source:"hex"},De)};return React.createElement("div",{style:W.card,className:"circle-picker "+P},map(l,function(ve){return React.createElement(CircleSwatch$1,{key:ve,color:ve,onClick:me,onSwatchHover:o,active:u===ve.toLowerCase(),circleSize:c,circleSpacing:g})}))};Circle.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),circleSize:PropTypes.number,circleSpacing:PropTypes.number,styles:PropTypes.object};Circle.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[red[500],pink[500],purple[500],deepPurple[500],indigo[500],blue[500],lightBlue[500],cyan[500],teal[500],green[500],lightGreen[500],lime[500],yellow[500],amber[500],orange[500],deepOrange[500],brown[500],blueGrey[500]],styles:{}};const CirclePicker=ColorWrap(Circle);function isUndefined(t){return t===void 0}var UnfoldMoreHorizontalIcon$1={},hasRequiredUnfoldMoreHorizontalIcon;function requireUnfoldMoreHorizontalIcon(){if(hasRequiredUnfoldMoreHorizontalIcon)return UnfoldMoreHorizontalIcon$1;hasRequiredUnfoldMoreHorizontalIcon=1,Object.defineProperty(UnfoldMoreHorizontalIcon$1,"__esModule",{value:!0});var t=Object.assign||function(u){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(u[m]=d[m])}return u},e=requireReact(),a=s(e);function s(u){return u&&u.__esModule?u:{default:u}}function o(u,c){var d={};for(var m in u)c.indexOf(m)>=0||Object.prototype.hasOwnProperty.call(u,m)&&(d[m]=u[m]);return d}var l=24;return UnfoldMoreHorizontalIcon$1.default=function(u){var c=u.fill,d=c===void 0?"currentColor":c,m=u.width,g=m===void 0?l:m,A=u.height,P=A===void 0?l:A,W=u.style,me=W===void 0?{}:W,ve=o(u,["fill","width","height","style"]);return a.default.createElement("svg",t({viewBox:"0 0 "+l+" "+l,style:t({fill:d,width:g,height:P},me)},ve),a.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},UnfoldMoreHorizontalIcon$1}var UnfoldMoreHorizontalIconExports=requireUnfoldMoreHorizontalIcon();const UnfoldMoreHorizontalIcon=getDefaultExportFromCjs(UnfoldMoreHorizontalIconExports);var _createClass$1=function(){function t(e,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}();function _classCallCheck$1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$1(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits$1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ChromeFields=function(t){_inherits$1(e,t);function e(a){_classCallCheck$1(this,e);var s=_possibleConstructorReturn$1(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.toggleViews=function(){s.state.view==="hex"?s.setState({view:"rgb"}):s.state.view==="rgb"?s.setState({view:"hsl"}):s.state.view==="hsl"&&(s.props.hsl.a===1?s.setState({view:"hex"}):s.setState({view:"rgb"}))},s.handleChange=function(o,l){o.hex?isValidHex(o.hex)&&s.props.onChange({hex:o.hex,source:"hex"},l):o.r||o.g||o.b?s.props.onChange({r:o.r||s.props.rgb.r,g:o.g||s.props.rgb.g,b:o.b||s.props.rgb.b,source:"rgb"},l):o.a?(o.a<0?o.a=0:o.a>1&&(o.a=1),s.props.onChange({h:s.props.hsl.h,s:s.props.hsl.s,l:s.props.hsl.l,a:Math.round(o.a*100)/100,source:"rgb"},l)):(o.h||o.s||o.l)&&(typeof o.s=="string"&&o.s.includes("%")&&(o.s=o.s.replace("%","")),typeof o.l=="string"&&o.l.includes("%")&&(o.l=o.l.replace("%","")),o.s==1?o.s=.01:o.l==1&&(o.l=.01),s.props.onChange({h:o.h||s.props.hsl.h,s:Number(isUndefined(o.s)?s.props.hsl.s:o.s),l:Number(isUndefined(o.l)?s.props.hsl.l:o.l),source:"hsl"},l))},s.showHighlight=function(o){o.currentTarget.style.background="#eee"},s.hideHighlight=function(o){o.currentTarget.style.background="transparent"},a.hsl.a!==1&&a.view==="hex"?s.state={view:"rgb"}:s.state={view:a.view},s}return _createClass$1(e,[{key:"render",value:function(){var s=this,o=reactCSS({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),l=void 0;return this.state.view==="hex"?l=React.createElement("div",{style:o.fields,className:"flexbox-fix"},React.createElement("div",{style:o.field},React.createElement(EditableInput,{style:{input:o.input,label:o.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?l=React.createElement("div",{style:o.fields,className:"flexbox-fix"},React.createElement("div",{style:o.field},React.createElement(EditableInput,{style:{input:o.input,label:o.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),React.createElement("div",{style:o.field},React.createElement(EditableInput,{style:{input:o.input,label:o.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),React.createElement("div",{style:o.field},React.createElement(EditableInput,{style:{input:o.input,label:o.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),React.createElement("div",{style:o.alpha},React.createElement(EditableInput,{style:{input:o.input,label:o.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(l=React.createElement("div",{style:o.fields,className:"flexbox-fix"},React.createElement("div",{style:o.field},React.createElement(EditableInput,{style:{input:o.input,label:o.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),React.createElement("div",{style:o.field},React.createElement(EditableInput,{style:{input:o.input,label:o.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),React.createElement("div",{style:o.field},React.createElement(EditableInput,{style:{input:o.input,label:o.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),React.createElement("div",{style:o.alpha},React.createElement(EditableInput,{style:{input:o.input,label:o.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),React.createElement("div",{style:o.wrap,className:"flexbox-fix"},l,React.createElement("div",{style:o.toggle},React.createElement("div",{style:o.icon,onClick:this.toggleViews,ref:function(c){return s.icon=c}},React.createElement(UnfoldMoreHorizontalIcon,{style:o.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(s,o){return s.hsl.a!==1&&o.view==="hex"?{view:"rgb"}:null}}]),e}(React.Component);ChromeFields.defaultProps={view:"hex"};var ChromePointer=function t(){var e=reactCSS({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return React.createElement("div",{style:e.picker})},ChromePointerCircle=function t(){var e=reactCSS({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return React.createElement("div",{style:e.picker})},Chrome=function t(e){var a=e.width,s=e.onChange,o=e.disableAlpha,l=e.rgb,u=e.hsl,c=e.hsv,d=e.hex,m=e.renderers,g=e.styles,A=g===void 0?{}:g,P=e.className,W=P===void 0?"":P,me=e.defaultView,ve=reactCSS(merge({default:{picker:{width:a,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+l.r+", "+l.g+", "+l.b+", "+l.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},A),{disableAlpha:o});return React.createElement("div",{style:ve.picker,className:"chrome-picker "+W},React.createElement("div",{style:ve.saturation},React.createElement(Saturation,{style:ve.Saturation,hsl:u,hsv:c,pointer:ChromePointerCircle,onChange:s})),React.createElement("div",{style:ve.body},React.createElement("div",{style:ve.controls,className:"flexbox-fix"},React.createElement("div",{style:ve.color},React.createElement("div",{style:ve.swatch},React.createElement("div",{style:ve.active}),React.createElement(Checkboard,{renderers:m}))),React.createElement("div",{style:ve.toggles},React.createElement("div",{style:ve.hue},React.createElement(Hue,{style:ve.Hue,hsl:u,pointer:ChromePointer,onChange:s})),React.createElement("div",{style:ve.alpha},React.createElement(Alpha,{style:ve.Alpha,rgb:l,hsl:u,pointer:ChromePointer,renderers:m,onChange:s})))),React.createElement(ChromeFields,{rgb:l,hsl:u,hex:d,view:me,onChange:s,disableAlpha:o})))};Chrome.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),disableAlpha:PropTypes.bool,styles:PropTypes.object,defaultView:PropTypes.oneOf(["hex","rgb","hsl"])};Chrome.defaultProps={width:225,disableAlpha:!1,styles:{}};ColorWrap(Chrome);var CompactColor=function t(e){var a=e.color,s=e.onClick,o=s===void 0?function(){}:s,l=e.onSwatchHover,u=e.active,c=reactCSS({default:{color:{background:a,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:getContrastingColor(a),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:u,"color-#FFFFFF":a==="#FFFFFF",transparent:a==="transparent"});return React.createElement(Swatch$1,{style:c.color,color:a,onClick:o,onHover:l,focusStyle:{boxShadow:"0 0 4px "+a}},React.createElement("div",{style:c.dot}))},CompactFields=function t(e){var a=e.hex,s=e.rgb,o=e.onChange,l=reactCSS({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:a},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),u=function(d,m){d.r||d.g||d.b?o({r:d.r||s.r,g:d.g||s.g,b:d.b||s.b,source:"rgb"},m):o({hex:d.hex,source:"hex"},m)};return React.createElement("div",{style:l.fields,className:"flexbox-fix"},React.createElement("div",{style:l.active}),React.createElement(EditableInput,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:a,onChange:u}),React.createElement(EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:s.r,onChange:u}),React.createElement(EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:s.g,onChange:u}),React.createElement(EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:s.b,onChange:u}))},Compact=function t(e){var a=e.onChange,s=e.onSwatchHover,o=e.colors,l=e.hex,u=e.rgb,c=e.styles,d=c===void 0?{}:c,m=e.className,g=m===void 0?"":m,A=reactCSS(merge({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},d)),P=function(me,ve){me.hex?isValidHex(me.hex)&&a({hex:me.hex,source:"hex"},ve):a(me,ve)};return React.createElement(Raised,{style:A.Compact,styles:d},React.createElement("div",{style:A.compact,className:"compact-picker "+g},React.createElement("div",null,map(o,function(W){return React.createElement(CompactColor,{key:W,color:W,active:W.toLowerCase()===l,onClick:P,onSwatchHover:s})}),React.createElement("div",{style:A.clear})),React.createElement(CompactFields,{hex:l,rgb:u,onChange:P})))};Compact.propTypes={colors:PropTypes.arrayOf(PropTypes.string),styles:PropTypes.object};Compact.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};ColorWrap(Compact);var GithubSwatch=function t(e){var a=e.hover,s=e.color,o=e.onClick,l=e.onSwatchHover,u={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},c=reactCSS({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:u}},{hover:a});return React.createElement("div",{style:c.swatch},React.createElement(Swatch$1,{color:s,onClick:o,onHover:l,focusStyle:u}))};const GithubSwatch$1=libExports.handleHover(GithubSwatch);var Github=function t(e){var a=e.width,s=e.colors,o=e.onChange,l=e.onSwatchHover,u=e.triangle,c=e.styles,d=c===void 0?{}:c,m=e.className,g=m===void 0?"":m,A=reactCSS(merge({default:{card:{width:a,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},d),{"hide-triangle":u==="hide","top-left-triangle":u==="top-left","top-right-triangle":u==="top-right","bottom-left-triangle":u==="bottom-left","bottom-right-triangle":u==="bottom-right"}),P=function(me,ve){return o({hex:me,source:"hex"},ve)};return React.createElement("div",{style:A.card,className:"github-picker "+g},React.createElement("div",{style:A.triangleShadow}),React.createElement("div",{style:A.triangle}),map(s,function(W){return React.createElement(GithubSwatch$1,{color:W,key:W,onClick:P,onSwatchHover:l})}))};Github.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),colors:PropTypes.arrayOf(PropTypes.string),triangle:PropTypes.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:PropTypes.object};Github.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};ColorWrap(Github);var SliderPointer$1=function t(e){var a=e.direction,s=reactCSS({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:a==="vertical"});return React.createElement("div",{style:s.picker})},_extends$2=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},HuePicker=function t(e){var a=e.width,s=e.height,o=e.onChange,l=e.hsl,u=e.direction,c=e.pointer,d=e.styles,m=d===void 0?{}:d,g=e.className,A=g===void 0?"":g,P=reactCSS(merge({default:{picker:{position:"relative",width:a,height:s},hue:{radius:"2px"}}},m)),W=function(ve){return o({a:1,h:ve.h,l:.5,s:1})};return React.createElement("div",{style:P.picker,className:"hue-picker "+A},React.createElement(Hue,_extends$2({},P.hue,{hsl:l,pointer:c,onChange:W,direction:u})))};HuePicker.propTypes={styles:PropTypes.object};HuePicker.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:SliderPointer$1,styles:{}};ColorWrap(HuePicker);var Material=function t(e){var a=e.onChange,s=e.hex,o=e.rgb,l=e.styles,u=l===void 0?{}:l,c=e.className,d=c===void 0?"":c,m=reactCSS(merge({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+s,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},u)),g=function(P,W){P.hex?isValidHex(P.hex)&&a({hex:P.hex,source:"hex"},W):(P.r||P.g||P.b)&&a({r:P.r||o.r,g:P.g||o.g,b:P.b||o.b,source:"rgb"},W)};return React.createElement(Raised,{styles:u},React.createElement("div",{style:m.material,className:"material-picker "+d},React.createElement(EditableInput,{style:{wrap:m.HEXwrap,input:m.HEXinput,label:m.HEXlabel},label:"hex",value:s,onChange:g}),React.createElement("div",{style:m.split,className:"flexbox-fix"},React.createElement("div",{style:m.third},React.createElement(EditableInput,{style:{wrap:m.RGBwrap,input:m.RGBinput,label:m.RGBlabel},label:"r",value:o.r,onChange:g})),React.createElement("div",{style:m.third},React.createElement(EditableInput,{style:{wrap:m.RGBwrap,input:m.RGBinput,label:m.RGBlabel},label:"g",value:o.g,onChange:g})),React.createElement("div",{style:m.third},React.createElement(EditableInput,{style:{wrap:m.RGBwrap,input:m.RGBinput,label:m.RGBlabel},label:"b",value:o.b,onChange:g})))))};ColorWrap(Material);var PhotoshopPicker=function t(e){var a=e.onChange,s=e.rgb,o=e.hsv,l=e.hex,u=reactCSS({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),c=function(m,g){m["#"]?isValidHex(m["#"])&&a({hex:m["#"],source:"hex"},g):m.r||m.g||m.b?a({r:m.r||s.r,g:m.g||s.g,b:m.b||s.b,source:"rgb"},g):(m.h||m.s||m.v)&&a({h:m.h||o.h,s:m.s||o.s,v:m.v||o.v,source:"hsv"},g)};return React.createElement("div",{style:u.fields},React.createElement(EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"h",value:Math.round(o.h),onChange:c}),React.createElement(EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"s",value:Math.round(o.s*100),onChange:c}),React.createElement(EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"v",value:Math.round(o.v*100),onChange:c}),React.createElement("div",{style:u.divider}),React.createElement(EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:s.r,onChange:c}),React.createElement(EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:s.g,onChange:c}),React.createElement(EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:s.b,onChange:c}),React.createElement("div",{style:u.divider}),React.createElement(EditableInput,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"#",value:l.replace("#",""),onChange:c}),React.createElement("div",{style:u.fieldSymbols},React.createElement("div",{style:u.symbol},""),React.createElement("div",{style:u.symbol},"%"),React.createElement("div",{style:u.symbol},"%")))},PhotoshopPointerCircle$1=function t(e){var a=e.hsl,s=reactCSS({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":a.l>.5});return React.createElement("div",{style:s.picker})},PhotoshopPointerCircle=function t(){var e=reactCSS({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return React.createElement("div",{style:e.pointer},React.createElement("div",{style:e.left},React.createElement("div",{style:e.leftInside})),React.createElement("div",{style:e.right},React.createElement("div",{style:e.rightInside})))},PhotoshopButton=function t(e){var a=e.onClick,s=e.label,o=e.children,l=e.active,u=reactCSS({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:l});return React.createElement("div",{style:u.button,onClick:a},s||o)},PhotoshopPreviews=function t(e){var a=e.rgb,s=e.currentColor,o=reactCSS({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+a.r+","+a.g+", "+a.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:s,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return React.createElement("div",null,React.createElement("div",{style:o.label},"new"),React.createElement("div",{style:o.swatches},React.createElement("div",{style:o.new}),React.createElement("div",{style:o.current})),React.createElement("div",{style:o.label},"current"))},_createClass=function(){function t(e,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _inherits(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Photoshop=function(t){_inherits(e,t);function e(a){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.state={currentColor:a.hex},s}return _createClass(e,[{key:"render",value:function(){var s=this.props,o=s.styles,l=o===void 0?{}:o,u=s.className,c=u===void 0?"":u,d=reactCSS(merge({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},l));return React.createElement("div",{style:d.picker,className:"photoshop-picker "+c},React.createElement("div",{style:d.head},this.props.header),React.createElement("div",{style:d.body,className:"flexbox-fix"},React.createElement("div",{style:d.saturation},React.createElement(Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:PhotoshopPointerCircle$1,onChange:this.props.onChange})),React.createElement("div",{style:d.hue},React.createElement(Hue,{direction:"vertical",hsl:this.props.hsl,pointer:PhotoshopPointerCircle,onChange:this.props.onChange})),React.createElement("div",{style:d.controls},React.createElement("div",{style:d.top,className:"flexbox-fix"},React.createElement("div",{style:d.previews},React.createElement(PhotoshopPreviews,{rgb:this.props.rgb,currentColor:this.state.currentColor})),React.createElement("div",{style:d.actions},React.createElement(PhotoshopButton,{label:"OK",onClick:this.props.onAccept,active:!0}),React.createElement(PhotoshopButton,{label:"Cancel",onClick:this.props.onCancel}),React.createElement(PhotoshopPicker,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(React.Component);Photoshop.propTypes={header:PropTypes.string,styles:PropTypes.object};Photoshop.defaultProps={header:"Color Picker",styles:{}};ColorWrap(Photoshop);var SketchFields=function t(e){var a=e.onChange,s=e.rgb,o=e.hsl,l=e.hex,u=e.disableAlpha,c=reactCSS({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:u}),d=function(g,A){g.hex?isValidHex(g.hex)&&a({hex:g.hex,source:"hex"},A):g.r||g.g||g.b?a({r:g.r||s.r,g:g.g||s.g,b:g.b||s.b,a:s.a,source:"rgb"},A):g.a&&(g.a<0?g.a=0:g.a>100&&(g.a=100),g.a/=100,a({h:o.h,s:o.s,l:o.l,a:g.a,source:"rgb"},A))};return React.createElement("div",{style:c.fields,className:"flexbox-fix"},React.createElement("div",{style:c.double},React.createElement(EditableInput,{style:{input:c.input,label:c.label},label:"hex",value:l.replace("#",""),onChange:d})),React.createElement("div",{style:c.single},React.createElement(EditableInput,{style:{input:c.input,label:c.label},label:"r",value:s.r,onChange:d,dragLabel:"true",dragMax:"255"})),React.createElement("div",{style:c.single},React.createElement(EditableInput,{style:{input:c.input,label:c.label},label:"g",value:s.g,onChange:d,dragLabel:"true",dragMax:"255"})),React.createElement("div",{style:c.single},React.createElement(EditableInput,{style:{input:c.input,label:c.label},label:"b",value:s.b,onChange:d,dragLabel:"true",dragMax:"255"})),React.createElement("div",{style:c.alpha},React.createElement(EditableInput,{style:{input:c.input,label:c.label},label:"a",value:Math.round(s.a*100),onChange:d,dragLabel:"true",dragMax:"100"})))},_extends$1=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},SketchPresetColors=function t(e){var a=e.colors,s=e.onClick,o=s===void 0?function(){}:s,l=e.onSwatchHover,u=reactCSS({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!a||!a.length}),c=function(m,g){o({hex:m,source:"hex"},g)};return React.createElement("div",{style:u.colors,className:"flexbox-fix"},a.map(function(d){var m=typeof d=="string"?{color:d}:d,g=""+m.color+(m.title||"");return React.createElement("div",{key:g,style:u.swatchWrap},React.createElement(Swatch$1,_extends$1({},m,{style:u.swatch,onClick:c,onHover:l,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+m.color}})))}))};SketchPresetColors.propTypes={colors:PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string,PropTypes.shape({color:PropTypes.string,title:PropTypes.string})])).isRequired};var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Sketch=function t(e){var a=e.width,s=e.rgb,o=e.hex,l=e.hsv,u=e.hsl,c=e.onChange,d=e.onSwatchHover,m=e.disableAlpha,g=e.presetColors,A=e.renderers,P=e.styles,W=P===void 0?{}:P,me=e.className,ve=me===void 0?"":me,He=reactCSS(merge({default:_extends({picker:{width:a,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+s.r+","+s.g+","+s.b+","+s.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},W),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},W),{disableAlpha:m});return React.createElement("div",{style:He.picker,className:"sketch-picker "+ve},React.createElement("div",{style:He.saturation},React.createElement(Saturation,{style:He.Saturation,hsl:u,hsv:l,onChange:c})),React.createElement("div",{style:He.controls,className:"flexbox-fix"},React.createElement("div",{style:He.sliders},React.createElement("div",{style:He.hue},React.createElement(Hue,{style:He.Hue,hsl:u,onChange:c})),React.createElement("div",{style:He.alpha},React.createElement(Alpha,{style:He.Alpha,rgb:s,hsl:u,renderers:A,onChange:c}))),React.createElement("div",{style:He.color},React.createElement(Checkboard,null),React.createElement("div",{style:He.activeColor}))),React.createElement(SketchFields,{rgb:s,hsl:u,hex:o,onChange:c,disableAlpha:m}),React.createElement(SketchPresetColors,{colors:g,onClick:c,onSwatchHover:d}))};Sketch.propTypes={disableAlpha:PropTypes.bool,width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),styles:PropTypes.object};Sketch.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};ColorWrap(Sketch);var SliderSwatch=function t(e){var a=e.hsl,s=e.offset,o=e.onClick,l=o===void 0?function(){}:o,u=e.active,c=e.first,d=e.last,m=reactCSS({default:{swatch:{height:"12px",background:"hsl("+a.h+", 50%, "+s*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:u,first:c,last:d}),g=function(P){return l({h:a.h,s:.5,l:s,source:"hsl"},P)};return React.createElement("div",{style:m.swatch,onClick:g})},SliderSwatches=function t(e){var a=e.onClick,s=e.hsl,o=reactCSS({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),l=.1;return React.createElement("div",{style:o.swatches},React.createElement("div",{style:o.swatch},React.createElement(SliderSwatch,{hsl:s,offset:".80",active:Math.abs(s.l-.8)<l&&Math.abs(s.s-.5)<l,onClick:a,first:!0})),React.createElement("div",{style:o.swatch},React.createElement(SliderSwatch,{hsl:s,offset:".65",active:Math.abs(s.l-.65)<l&&Math.abs(s.s-.5)<l,onClick:a})),React.createElement("div",{style:o.swatch},React.createElement(SliderSwatch,{hsl:s,offset:".50",active:Math.abs(s.l-.5)<l&&Math.abs(s.s-.5)<l,onClick:a})),React.createElement("div",{style:o.swatch},React.createElement(SliderSwatch,{hsl:s,offset:".35",active:Math.abs(s.l-.35)<l&&Math.abs(s.s-.5)<l,onClick:a})),React.createElement("div",{style:o.swatch},React.createElement(SliderSwatch,{hsl:s,offset:".20",active:Math.abs(s.l-.2)<l&&Math.abs(s.s-.5)<l,onClick:a,last:!0})),React.createElement("div",{style:o.clear}))},SliderPointer=function t(){var e=reactCSS({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return React.createElement("div",{style:e.picker})},Slider=function t(e){var a=e.hsl,s=e.onChange,o=e.pointer,l=e.styles,u=l===void 0?{}:l,c=e.className,d=c===void 0?"":c,m=reactCSS(merge({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},u));return React.createElement("div",{style:m.wrap||{},className:"slider-picker "+d},React.createElement("div",{style:m.hue},React.createElement(Hue,{style:m.Hue,hsl:a,pointer:o,onChange:s})),React.createElement("div",{style:m.swatches},React.createElement(SliderSwatches,{hsl:a,onClick:s})))};Slider.propTypes={styles:PropTypes.object};Slider.defaultProps={pointer:SliderPointer,styles:{}};ColorWrap(Slider);var CheckIcon$1={},hasRequiredCheckIcon;function requireCheckIcon(){if(hasRequiredCheckIcon)return CheckIcon$1;hasRequiredCheckIcon=1,Object.defineProperty(CheckIcon$1,"__esModule",{value:!0});var t=Object.assign||function(u){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(u[m]=d[m])}return u},e=requireReact(),a=s(e);function s(u){return u&&u.__esModule?u:{default:u}}function o(u,c){var d={};for(var m in u)c.indexOf(m)>=0||Object.prototype.hasOwnProperty.call(u,m)&&(d[m]=u[m]);return d}var l=24;return CheckIcon$1.default=function(u){var c=u.fill,d=c===void 0?"currentColor":c,m=u.width,g=m===void 0?l:m,A=u.height,P=A===void 0?l:A,W=u.style,me=W===void 0?{}:W,ve=o(u,["fill","width","height","style"]);return a.default.createElement("svg",t({viewBox:"0 0 "+l+" "+l,style:t({fill:d,width:g,height:P},me)},ve),a.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},CheckIcon$1}var CheckIconExports=requireCheckIcon();const CheckIcon=getDefaultExportFromCjs(CheckIconExports);var SwatchesColor=function t(e){var a=e.color,s=e.onClick,o=s===void 0?function(){}:s,l=e.onSwatchHover,u=e.first,c=e.last,d=e.active,m=reactCSS({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:a,marginBottom:"1px"},check:{color:getContrastingColor(a),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:u,last:c,active:d,"color-#FFFFFF":a==="#FFFFFF",transparent:a==="transparent"});return React.createElement(Swatch$1,{color:a,style:m.color,onClick:o,onHover:l,focusStyle:{boxShadow:"0 0 4px "+a}},React.createElement("div",{style:m.check},React.createElement(CheckIcon,null)))},SwatchesGroup=function t(e){var a=e.onClick,s=e.onSwatchHover,o=e.group,l=e.active,u=reactCSS({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return React.createElement("div",{style:u.group},map(o,function(c,d){return React.createElement(SwatchesColor,{key:c,color:c,active:c.toLowerCase()===l,first:d===0,last:d===o.length-1,onClick:a,onSwatchHover:s})}))},Swatches=function t(e){var a=e.width,s=e.height,o=e.onChange,l=e.onSwatchHover,u=e.colors,c=e.hex,d=e.styles,m=d===void 0?{}:d,g=e.className,A=g===void 0?"":g,P=reactCSS(merge({default:{picker:{width:a,height:s},overflow:{height:s,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},m)),W=function(ve,He){return o({hex:ve,source:"hex"},He)};return React.createElement("div",{style:P.picker,className:"swatches-picker "+A},React.createElement(Raised,null,React.createElement("div",{style:P.overflow},React.createElement("div",{style:P.body},map(u,function(me){return React.createElement(SwatchesGroup,{key:me.toString(),group:me,active:c,onClick:W,onSwatchHover:l})}),React.createElement("div",{style:P.clear})))))};Swatches.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),height:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),colors:PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)),styles:PropTypes.object};Swatches.defaultProps={width:320,height:240,colors:[[red[900],red[700],red[500],red[300],red[100]],[pink[900],pink[700],pink[500],pink[300],pink[100]],[purple[900],purple[700],purple[500],purple[300],purple[100]],[deepPurple[900],deepPurple[700],deepPurple[500],deepPurple[300],deepPurple[100]],[indigo[900],indigo[700],indigo[500],indigo[300],indigo[100]],[blue[900],blue[700],blue[500],blue[300],blue[100]],[lightBlue[900],lightBlue[700],lightBlue[500],lightBlue[300],lightBlue[100]],[cyan[900],cyan[700],cyan[500],cyan[300],cyan[100]],[teal[900],teal[700],teal[500],teal[300],teal[100]],["#194D33",green[700],green[500],green[300],green[100]],[lightGreen[900],lightGreen[700],lightGreen[500],lightGreen[300],lightGreen[100]],[lime[900],lime[700],lime[500],lime[300],lime[100]],[yellow[900],yellow[700],yellow[500],yellow[300],yellow[100]],[amber[900],amber[700],amber[500],amber[300],amber[100]],[orange[900],orange[700],orange[500],orange[300],orange[100]],[deepOrange[900],deepOrange[700],deepOrange[500],deepOrange[300],deepOrange[100]],[brown[900],brown[700],brown[500],brown[300],brown[100]],[blueGrey[900],blueGrey[700],blueGrey[500],blueGrey[300],blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};ColorWrap(Swatches);var Twitter=function t(e){var a=e.onChange,s=e.onSwatchHover,o=e.hex,l=e.colors,u=e.width,c=e.triangle,d=e.styles,m=d===void 0?{}:d,g=e.className,A=g===void 0?"":g,P=reactCSS(merge({default:{card:{width:u,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},m),{"hide-triangle":c==="hide","top-left-triangle":c==="top-left","top-right-triangle":c==="top-right"}),W=function(ve,He){isValidHex(ve)&&a({hex:ve,source:"hex"},He)};return React.createElement("div",{style:P.card,className:"twitter-picker "+A},React.createElement("div",{style:P.triangleShadow}),React.createElement("div",{style:P.triangle}),React.createElement("div",{style:P.body},map(l,function(me,ve){return React.createElement(Swatch$1,{key:ve,color:me,hex:me,style:P.swatch,onClick:W,onHover:s,focusStyle:{boxShadow:"0 0 4px "+me}})}),React.createElement("div",{style:P.hash},"#"),React.createElement(EditableInput,{label:null,style:{input:P.input},value:o.replace("#",""),onChange:W}),React.createElement("div",{style:P.clear})))};Twitter.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),triangle:PropTypes.oneOf(["hide","top-left","top-right"]),colors:PropTypes.arrayOf(PropTypes.string),styles:PropTypes.object};Twitter.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};ColorWrap(Twitter);var GooglePointerCircle=function t(e){var a=reactCSS({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return React.createElement("div",{style:a.picker})};GooglePointerCircle.propTypes={hsl:PropTypes.shape({h:PropTypes.number,s:PropTypes.number,l:PropTypes.number,a:PropTypes.number})};GooglePointerCircle.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var GooglePointer=function t(e){var a=reactCSS({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return React.createElement("div",{style:a.picker})};GooglePointer.propTypes={hsl:PropTypes.shape({h:PropTypes.number,s:PropTypes.number,l:PropTypes.number,a:PropTypes.number})};GooglePointer.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var GoogleFields=function t(e){var a=e.onChange,s=e.rgb,o=e.hsl,l=e.hex,u=e.hsv,c=function(W,me){if(W.hex)isValidHex(W.hex)&&a({hex:W.hex,source:"hex"},me);else if(W.rgb){var ve=W.rgb.split(",");isvalidColorString(W.rgb,"rgb")&&a({r:ve[0],g:ve[1],b:ve[2],a:1,source:"rgb"},me)}else if(W.hsv){var He=W.hsv.split(",");isvalidColorString(W.hsv,"hsv")&&(He[2]=He[2].replace("%",""),He[1]=He[1].replace("%",""),He[0]=He[0].replace("",""),He[1]==1?He[1]=.01:He[2]==1&&(He[2]=.01),a({h:Number(He[0]),s:Number(He[1]),v:Number(He[2]),source:"hsv"},me))}else if(W.hsl){var De=W.hsl.split(",");isvalidColorString(W.hsl,"hsl")&&(De[2]=De[2].replace("%",""),De[1]=De[1].replace("%",""),De[0]=De[0].replace("",""),A[1]==1?A[1]=.01:A[2]==1&&(A[2]=.01),a({h:Number(De[0]),s:Number(De[1]),v:Number(De[2]),source:"hsl"},me))}},d=reactCSS({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),m=s.r+", "+s.g+", "+s.b,g=Math.round(o.h)+", "+Math.round(o.s*100)+"%, "+Math.round(o.l*100)+"%",A=Math.round(u.h)+", "+Math.round(u.s*100)+"%, "+Math.round(u.v*100)+"%";return React.createElement("div",{style:d.wrap,className:"flexbox-fix"},React.createElement("div",{style:d.fields},React.createElement("div",{style:d.double},React.createElement(EditableInput,{style:{input:d.input,label:d.label},label:"hex",value:l,onChange:c})),React.createElement("div",{style:d.column},React.createElement("div",{style:d.single},React.createElement(EditableInput,{style:{input:d.input2,label:d.label2},label:"rgb",value:m,onChange:c})),React.createElement("div",{style:d.single},React.createElement(EditableInput,{style:{input:d.input2,label:d.label2},label:"hsv",value:A,onChange:c})),React.createElement("div",{style:d.single},React.createElement(EditableInput,{style:{input:d.input2,label:d.label2},label:"hsl",value:g,onChange:c})))))},Google=function t(e){var a=e.width,s=e.onChange,o=e.rgb,l=e.hsl,u=e.hsv,c=e.hex,d=e.header,m=e.styles,g=m===void 0?{}:m,A=e.className,P=A===void 0?"":A,W=reactCSS(merge({default:{picker:{width:a,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+o.r+", "+o.g+", "+o.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},g));return React.createElement("div",{style:W.picker,className:"google-picker "+P},React.createElement("div",{style:W.head},d),React.createElement("div",{style:W.swatch}),React.createElement("div",{style:W.saturation},React.createElement(Saturation,{hsl:l,hsv:u,pointer:GooglePointerCircle,onChange:s})),React.createElement("div",{style:W.body},React.createElement("div",{style:W.controls,className:"flexbox-fix"},React.createElement("div",{style:W.hue},React.createElement(Hue,{style:W.Hue,hsl:l,radius:"4px",pointer:GooglePointer,onChange:s}))),React.createElement(GoogleFields,{rgb:o,hsl:l,hex:c,hsv:u,onChange:s})))};Google.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),styles:PropTypes.object,header:PropTypes.string};Google.defaultProps={width:652,styles:{},header:"Color picker"};ColorWrap(Google);function ViewDecks(t){const[e,a]=reactExports.useState("decks"),[s,o]=reactExports.useState(""),[l,u]=reactExports.useState(""),[c,d]=reactExports.useState(""),{user:m}=reactExports.useContext(UserContext),g=useNavigate(),{createDeck:A,addQuestiontoDeck:P}=useDeckHandler();return jsxRuntimeExports.jsx("div",{className:"h-container items-start w-full overflow-y-scroll px-4",children:e==="decks"?jsxRuntimeExports.jsxs("div",{className:"w-full",children:[m.decks?.map(W=>jsxRuntimeExports.jsxs("div",{className:"deck",onClick:()=>{g(`/decks/${m.uid}/${W.id}`)},children:[jsxRuntimeExports.jsx("div",{className:"color-strip",style:{backgroundColor:W.color}}),jsxRuntimeExports.jsxs("div",{className:"deck-txt",children:[jsxRuntimeExports.jsx("span",{className:"txt-heading-colour",children:W.name}),jsxRuntimeExports.jsx("span",{className:"txt-sub",children:W.timestamp?new Date(W.timestamp.seconds*1e3).toLocaleDateString():""})]}),jsxRuntimeExports.jsxs("div",{className:"deck-txt",children:[jsxRuntimeExports.jsx("span",{className:"txt-sub",children:W.description}),jsxRuntimeExports.jsxs("span",{className:"txt-sub",children:[W?.questions?.length," question",W?.questions?.length!==1?"s":""]})]}),jsxRuntimeExports.jsx("span",{className:"cursor-target blue-btn cursor-pointer my-2",onClick:me=>{P([t?.question],W.id),me.stopPropagation()},children:"Add to deck"})]},W.id)),jsxRuntimeExports.jsx("div",{className:"new-deck my-3",onClick:()=>a("create"),children:jsxRuntimeExports.jsx("p",{className:"color-txt-main text-center",children:"New Deck"})})]}):e==="create"?jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("p",{onClick:()=>a("decks"),children:"Back"}),jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox m-4",placeholder:"Name",onChange:W=>{o(W.target.value)}}),jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox m-4",placeholder:"Description",onChange:W=>{u(W.target.value)}}),jsxRuntimeExports.jsx(CirclePicker,{color:c,onChangeComplete:W=>{d(W.hex)}}),jsxRuntimeExports.jsx("span",{className:"create-deck",onClick:()=>{A(s,l,[t?.question??null],c),a("decks")},children:"Create Deck"})]}):null})}function SharePanel(){const{id:t}=useParams(),{fetchFriends:e}=useFetch(),{shareDeck:a}=useDeckHandler(),[s,o]=reactExports.useState(),{user:l}=reactExports.useContext(UserContext);return reactExports.useEffect(()=>{(async()=>{o([]);const c=await e(l.uid);o(c)})()},[]),jsxRuntimeExports.jsx("div",{className:"w-h-container justify-start items-start flex-col overflow-y-scroll p-4",children:s?s?.map(u=>jsxRuntimeExports.jsxs("div",{className:"m-4",children:[jsxRuntimeExports.jsx("img",{src:u.picture,alt:u.picture,className:"w-10 h-10 rounded-full object-cover inline"}),jsxRuntimeExports.jsx("span",{className:"txt-bold mx-4 inline",children:u.username}),u.sent?jsxRuntimeExports.jsx("span",{className:"blue-btn opacity-70 cursor-default inline",children:"Sent!"}):jsxRuntimeExports.jsx("span",{className:"blue-btn cursor-pointer inline",onClick:()=>{a(u,t,o)},children:"Share"})]})):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnim,loop:!0,autoplay:!0,className:"h-40 w-40"})})})}const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(t){Number.isInteger(t)&&(verbosity=t)}function getVerbosityLevel(){return verbosity}function info(t){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${t}`)}function warn(t){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${t}`)}function unreachable(t){throw new Error(t)}function assert(t,e){t||unreachable(e)}function _isValidProtocol(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(t,e=null,a=null){if(!t)return null;if(a&&typeof t=="string"&&(a.addDefaultProtocol&&t.startsWith("www.")&&t.match(/\./g)?.length>=2&&(t=`http://${t}`),a.tryConvertEncoding))try{t=stringToUTF8String(t)}catch{}const s=e?URL.parse(t,e):URL.parse(t);return _isValidProtocol(s)?s:null}function updateUrlHash(t,e,a=!1){const s=URL.parse(t);return s?(s.hash=e,s.href):a&&createValidAbsoluteUrl(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function shadow(t,e,a,s=!1){return Object.defineProperty(t,e,{value:a,enumerable:!s,configurable:!0,writable:!1}),a}const BaseException=function t(){function e(a,s){this.message=a,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class PasswordException extends BaseException{constructor(e,a){super(e,"PasswordException"),this.code=a}}class UnknownErrorException extends BaseException{constructor(e,a){super(e,"UnknownErrorException"),this.details=a}}class InvalidPDFException extends BaseException{constructor(e){super(e,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(e,a,s){super(e,"ResponseException"),this.status=a,this.missing=s}}class FormatError extends BaseException{constructor(e){super(e,"FormatError")}}class AbortException extends BaseException{constructor(e){super(e,"AbortException")}}function bytesToString(t){(typeof t!="object"||t?.length===void 0)&&unreachable("Invalid argument for bytesToString");const e=t.length,a=8192;if(e<a)return String.fromCharCode.apply(null,t);const s=[];for(let o=0;o<e;o+=a){const l=Math.min(o+a,e),u=t.subarray(o,l);s.push(String.fromCharCode.apply(null,u))}return s.join("")}function stringToBytes(t){typeof t!="string"&&unreachable("Invalid argument for stringToBytes");const e=t.length,a=new Uint8Array(e);for(let s=0;s<e;++s)a[s]=t.charCodeAt(s)&255;return a}function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function isLittleEndian(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:a}=navigator;return shadow(this,"platform",{isAndroid:a.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:a.includes("Firefox")})}static get isCSSRoundSupported(){return shadow(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));class Util{static makeHexColor(e,a,s){return`#${hexNumbers[e]}${hexNumbers[a]}${hexNumbers[s]}`}static scaleMinMax(e,a){let s;e[0]?(e[0]<0&&(s=a[0],a[0]=a[2],a[2]=s),a[0]*=e[0],a[2]*=e[0],e[3]<0&&(s=a[1],a[1]=a[3],a[3]=s),a[1]*=e[3],a[3]*=e[3]):(s=a[0],a[0]=a[1],a[1]=s,s=a[2],a[2]=a[3],a[3]=s,e[1]<0&&(s=a[1],a[1]=a[3],a[3]=s),a[1]*=e[1],a[3]*=e[1],e[2]<0&&(s=a[0],a[0]=a[2],a[2]=s),a[0]*=e[2],a[2]*=e[2]),a[0]+=e[4],a[1]+=e[5],a[2]+=e[4],a[3]+=e[5]}static transform(e,a){return[e[0]*a[0]+e[2]*a[1],e[1]*a[0]+e[3]*a[1],e[0]*a[2]+e[2]*a[3],e[1]*a[2]+e[3]*a[3],e[0]*a[4]+e[2]*a[5]+e[4],e[1]*a[4]+e[3]*a[5]+e[5]]}static applyTransform(e,a,s=0){const o=e[s],l=e[s+1];e[s]=o*a[0]+l*a[2]+a[4],e[s+1]=o*a[1]+l*a[3]+a[5]}static applyTransformToBezier(e,a,s=0){const o=a[0],l=a[1],u=a[2],c=a[3],d=a[4],m=a[5];for(let g=0;g<6;g+=2){const A=e[s+g],P=e[s+g+1];e[s+g]=A*o+P*u+d,e[s+g+1]=A*l+P*c+m}}static applyInverseTransform(e,a){const s=e[0],o=e[1],l=a[0]*a[3]-a[1]*a[2];e[0]=(s*a[3]-o*a[2]+a[2]*a[5]-a[4]*a[3])/l,e[1]=(-s*a[1]+o*a[0]+a[4]*a[1]-a[5]*a[0])/l}static axialAlignedBoundingBox(e,a,s){const o=a[0],l=a[1],u=a[2],c=a[3],d=a[4],m=a[5],g=e[0],A=e[1],P=e[2],W=e[3];let me=o*g+d,ve=me,He=o*P+d,De=He,Xe=c*A+m,qe=Xe,Rs=c*W+m,Vc=Rs;if(l!==0||u!==0){const So=l*g,Do=l*P,eh=u*A,Ko=u*W;me+=eh,De+=eh,He+=Ko,ve+=Ko,Xe+=So,Vc+=So,Rs+=Do,qe+=Do}s[0]=Math.min(s[0],me,He,ve,De),s[1]=Math.min(s[1],Xe,Rs,qe,Vc),s[2]=Math.max(s[2],me,He,ve,De),s[3]=Math.max(s[3],Xe,Rs,qe,Vc)}static inverseTransform(e){const a=e[0]*e[3]-e[1]*e[2];return[e[3]/a,-e[1]/a,-e[2]/a,e[0]/a,(e[2]*e[5]-e[4]*e[3])/a,(e[4]*e[1]-e[5]*e[0])/a]}static singularValueDecompose2dScale(e,a){const s=e[0],o=e[1],l=e[2],u=e[3],c=s**2+o**2,d=s*l+o*u,m=l**2+u**2,g=(c+m)/2,A=Math.sqrt(g**2-(c*m-d**2));a[0]=Math.sqrt(g+A||1),a[1]=Math.sqrt(g-A||1)}static normalizeRect(e){const a=e.slice(0);return e[0]>e[2]&&(a[0]=e[2],a[2]=e[0]),e[1]>e[3]&&(a[1]=e[3],a[3]=e[1]),a}static intersect(e,a){const s=Math.max(Math.min(e[0],e[2]),Math.min(a[0],a[2])),o=Math.min(Math.max(e[0],e[2]),Math.max(a[0],a[2]));if(s>o)return null;const l=Math.max(Math.min(e[1],e[3]),Math.min(a[1],a[3])),u=Math.min(Math.max(e[1],e[3]),Math.max(a[1],a[3]));return l>u?null:[s,l,o,u]}static pointBoundingBox(e,a,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],a),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],a)}static rectBoundingBox(e,a,s,o,l){l[0]=Math.min(l[0],e,s),l[1]=Math.min(l[1],a,o),l[2]=Math.max(l[2],e,s),l[3]=Math.max(l[3],a,o)}static#e(e,a,s,o,l,u,c,d,m,g){if(m<=0||m>=1)return;const A=1-m,P=m*m,W=P*m,me=A*(A*(A*e+3*m*a)+3*P*s)+W*o,ve=A*(A*(A*l+3*m*u)+3*P*c)+W*d;g[0]=Math.min(g[0],me),g[1]=Math.min(g[1],ve),g[2]=Math.max(g[2],me),g[3]=Math.max(g[3],ve)}static#t(e,a,s,o,l,u,c,d,m,g,A,P){if(Math.abs(m)<1e-12){Math.abs(g)>=1e-12&&this.#e(e,a,s,o,l,u,c,d,-A/g,P);return}const W=g**2-4*A*m;if(W<0)return;const me=Math.sqrt(W),ve=2*m;this.#e(e,a,s,o,l,u,c,d,(-g+me)/ve,P),this.#e(e,a,s,o,l,u,c,d,(-g-me)/ve,P)}static bezierBoundingBox(e,a,s,o,l,u,c,d,m){m[0]=Math.min(m[0],e,c),m[1]=Math.min(m[1],a,d),m[2]=Math.max(m[2],e,c),m[3]=Math.max(m[3],a,d),this.#t(e,s,l,c,a,o,u,d,3*(-e+3*(s-l)+c),6*(e-2*s+l),3*(s-e),m),this.#t(e,s,l,c,a,o,u,d,3*(-a+3*(o-u)+d),6*(a-2*o+u),3*(o-a),m)}}function stringToUTF8String(t){return decodeURIComponent(escape(t))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(t){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),t.replaceAll(NormalizeRegex,(e,a,s)=>a?a.normalize("NFKC"):NormalizationMap.get(s))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),bytesToString(t)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(t,e,a){if(!Array.isArray(a)||a.length<2)return!1;const[s,o,...l]=a;if(!t(s)&&!Number.isInteger(s)||!e(o))return!1;const u=l.length;let c=!0;switch(o.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;c=!1;break;default:return!1}for(const d of l)if(!(typeof d=="number"||c&&d===null))return!1;return!0}function MathClamp(t,e,a){return Math.min(Math.max(t,e),a)}function toBase64Util(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(bytesToString(t))}function fromBase64Util(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):stringToBytes(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(a=>{a(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,a)=>e+a,0)});const SVG_NS="http://www.w3.org/2000/svg";class PixelsPerInch{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function fetchData(t,e="text"){if(isValidFetchUrl(t,document.baseURI)){const a=await fetch(t);if(!a.ok)throw new Error(a.statusText);switch(e){case"arraybuffer":return a.arrayBuffer();case"blob":return a.blob();case"json":return a.json()}return a.text()}return new Promise((a,s)=>{const o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType=e,o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(o.status===200||o.status===0){switch(e){case"arraybuffer":case"blob":case"json":a(o.response);return}a(o.responseText);return}s(new Error(o.statusText))}},o.send(null)})}class PageViewport{constructor({viewBox:e,userUnit:a,scale:s,rotation:o,offsetX:l=0,offsetY:u=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=a,this.scale=s,this.rotation=o,this.offsetX=l,this.offsetY=u,s*=a;const d=(e[2]+e[0])/2,m=(e[3]+e[1])/2;let g,A,P,W;switch(o%=360,o<0&&(o+=360),o){case 180:g=-1,A=0,P=0,W=1;break;case 90:g=0,A=1,P=1,W=0;break;case 270:g=0,A=-1,P=-1,W=0;break;case 0:g=1,A=0,P=0,W=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(P=-P,W=-W);let me,ve,He,De;g===0?(me=Math.abs(m-e[1])*s+l,ve=Math.abs(d-e[0])*s+u,He=(e[3]-e[1])*s,De=(e[2]-e[0])*s):(me=Math.abs(d-e[0])*s+l,ve=Math.abs(m-e[1])*s+u,He=(e[2]-e[0])*s,De=(e[3]-e[1])*s),this.transform=[g*s,A*s,P*s,W*s,me-g*s*d-P*s*m,ve-A*s*d-W*s*m],this.width=He,this.height=De}get rawDims(){const e=this.viewBox;return shadow(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:a=this.rotation,offsetX:s=this.offsetX,offsetY:o=this.offsetY,dontFlip:l=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:a,offsetX:s,offsetY:o,dontFlip:l})}convertToViewportPoint(e,a){const s=[e,a];return Util.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const a=[e[0],e[1]];Util.applyTransform(a,this.transform);const s=[e[2],e[3]];return Util.applyTransform(s,this.transform),[a[0],a[1],s[0],s[1]]}convertToPdfPoint(e,a){const s=[e,a];return Util.applyInverseTransform(s,this.transform),s}}class RenderingCancelledException extends BaseException{constructor(e,a=0){super(e,"RenderingCancelledException"),this.extraDelay=a}}function isDataScheme(t){const e=t.length;let a=0;for(;a<e&&t[a].trim()==="";)a++;return t.substring(a,a+5).toLowerCase()==="data:"}function isPdfFile(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function getFilenameFromUrl(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(t,e="document.pdf"){if(typeof t!="string")return e;if(isDataScheme(t))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(t);if(!s)return e;const o=c=>{try{let d=decodeURIComponent(c);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:c):d}catch{return c}},l=/\.pdf$/i,u=s.pathname.split("/").at(-1);if(l.test(u))return o(u);if(s.searchParams.size>0){const c=Array.from(s.searchParams.values()).reverse();for(const m of c)if(l.test(m))return o(m);const d=Array.from(s.searchParams.keys()).reverse();for(const m of d)if(l.test(m))return o(m)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return o(d[0])}return e}class StatTimer{started=Object.create(null);times=[];time(e){e in this.started&&warn(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||warn(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let a=0;for(const{name:s}of this.times)a=Math.max(s.length,a);for(const{name:s,start:o,end:l}of this.times)e.push(`${s.padEnd(a)} ${l-o}ms
`);return e.join("")}}function isValidFetchUrl(t,e){const a=e?URL.parse(t,e):URL.parse(t);return a?.protocol==="http:"||a?.protocol==="https:"}function noContextMenu(t){t.preventDefault()}function stopEvent(t){t.preventDefault(),t.stopPropagation()}function deprecated(t){console.log("Deprecated API usage: "+t)}class PDFDateString{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const a=this.#e.exec(e);if(!a)return null;const s=parseInt(a[1],10);let o=parseInt(a[2],10);o=o>=1&&o<=12?o-1:0;let l=parseInt(a[3],10);l=l>=1&&l<=31?l:1;let u=parseInt(a[4],10);u=u>=0&&u<=23?u:0;let c=parseInt(a[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(a[6],10);d=d>=0&&d<=59?d:0;const m=a[7]||"Z";let g=parseInt(a[8],10);g=g>=0&&g<=23?g:0;let A=parseInt(a[9],10)||0;return A=A>=0&&A<=59?A:0,m==="-"?(u+=g,c+=A):m==="+"&&(u-=g,c-=A),new Date(Date.UTC(s,o,l,u,c,d))}}function getXfaPageViewport(t,{scale:e=1,rotation:a=0}){const{width:s,height:o}=t.attributes.style,l=[0,0,parseInt(s),parseInt(o)];return new PageViewport({viewBox:l,userUnit:1,scale:e,rotation:a})}function getRGB(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(warn(`Not a valid color format: "${t}"`),[0,0,0])}function getColorValues(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const a of t.keys()){e.style.color=a;const s=window.getComputedStyle(e).color;t.set(a,getRGB(s))}e.remove()}function getCurrentTransform(t){const{a:e,b:a,c:s,d:o,e:l,f:u}=t.getTransform();return[e,a,s,o,l,u]}function getCurrentTransformInverse(t){const{a:e,b:a,c:s,d:o,e:l,f:u}=t.getTransform().invertSelf();return[e,a,s,o,l,u]}function setLayerDimensions(t,e,a=!1,s=!0){if(e instanceof PageViewport){const{pageWidth:o,pageHeight:l}=e.rawDims,{style:u}=t,c=util_FeatureTest.isCSSRoundSupported,d=`var(--total-scale-factor) * ${o}px`,m=`var(--total-scale-factor) * ${l}px`,g=c?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,A=c?`round(down, ${m}, var(--scale-round-y))`:`calc(${m})`;!a||e.rotation%180===0?(u.width=g,u.height=A):(u.width=A,u.height=g)}s&&t.setAttribute("data-main-rotation",e.rotation)}class OutputScale{constructor(){const{pixelRatio:e}=OutputScale;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,a,s,o,l=-1){let u=1/0,c=1/0,d=1/0;s=OutputScale.capPixels(s,l),s>0&&(u=Math.sqrt(s/(e*a))),o!==-1&&(c=o/e,d=o/a);const m=Math.min(u,c,d);return this.sx>m||this.sy>m?(this.sx=m,this.sy=m,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,a){if(a>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+a/100));return e>0?Math.min(e,s):s}return e}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class EditorToolbar{#e=null;#t=null;#r;#i=null;#a=null;#n=null;static#o=null;constructor(e){this.#r=e,EditorToolbar.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const a=this.#r._uiManager._signal;e.addEventListener("contextmenu",noContextMenu,{signal:a}),e.addEventListener("pointerdown",EditorToolbar.#s,{signal:a});const s=this.#i=document.createElement("div");s.className="buttons",e.append(s);const o=this.#r.toolbarPosition;if(o){const{style:l}=e,u=this.#r._uiManager.direction==="ltr"?1-o[0]:o[0];l.insetInlineEnd=`${100*u}%`,l.top=`calc(${100*o[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#s(e){e.stopPropagation()}#h(e){this.#r._focusEventsAllowed=!1,stopEvent(e)}#l(e){this.#r._focusEventsAllowed=!0,stopEvent(e)}#d(e){const a=this.#r._uiManager._signal;e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:a}),e.addEventListener("focusout",this.#l.bind(this),{capture:!0,signal:a}),e.addEventListener("contextmenu",noContextMenu,{signal:a})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown()}addDeleteButton(){const{editorType:e,_uiManager:a}=this.#r,s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",EditorToolbar.#o[e]),this.#d(s),s.addEventListener("click",o=>{a.delete()},{signal:a._signal}),this.#i.append(s)}get#c(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const a=await e.render();this.#d(a),this.#i.append(a,this.#c),this.#a=e}addColorPicker(e){this.#t=e;const a=e.renderButton();this.#d(a),this.#i.append(a,this.#c)}async addEditSignatureButton(e){const a=this.#n=await e.renderEditButton(this.#r);this.#d(a),this.#i.append(a,this.#c)}async addButton(e,a){switch(e){case"colorPicker":this.addColorPicker(a);break;case"altText":await this.addAltText(a);break;case"editSignature":await this.addEditSignatureButton(a);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){this.#n&&(this.#n.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class HighlightToolbar{#e=null;#t=null;#r;constructor(e){this.#r=e}#i(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",noContextMenu,{signal:this.#r._signal});const a=this.#e=document.createElement("div");return a.className="buttons",e.append(a),this.#n(),e}#a(e,a){let s=0,o=0;for(const l of e){const u=l.y+l.height;if(u<s)continue;const c=l.x+(a?l.width:0);if(u>s){o=c,s=u;continue}a?c>o&&(o=c):c<o&&(o=c)}return[a?1-o:o,s]}show(e,a,s){const[o,l]=this.#a(a,s),{style:u}=this.#t||=this.#i();e.append(this.#t),u.insetInlineEnd=`${100*o}%`,u.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#n(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const a=document.createElement("span");e.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=this.#r._signal;e.addEventListener("contextmenu",noContextMenu,{signal:s}),e.addEventListener("click",()=>{this.#r.highlightSelection("floating_button")},{signal:s}),this.#e.append(e)}}function bindEvents(t,e,a){for(const s of a)e.addEventListener(s,t[s].bind(t))}class IdManager{#e=0;get id(){return`${AnnotationEditorPrefix}${this.#e++}`}}class ImageManager{#e=getUuid();#t=0;#r=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),o=new Image;o.src=e;const l=o.decode().then(()=>(s.drawImage(o,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",l)}async#i(e,a){this.#r||=new Map;let s=this.#r.get(e);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let o;if(typeof a=="string"?(s.url=a,o=await fetchData(a,"blob")):a instanceof File?o=s.file=a:a instanceof Blob&&(o=a),o.type==="image/svg+xml"){const l=ImageManager._isSVGFittingCanvas,u=new FileReader,c=new Image,d=new Promise((m,g)=>{c.onload=()=>{s.bitmap=c,s.isSvg=!0,m()},u.onload=async()=>{const A=s.svgUrl=u.result;c.src=await l?`${A}#svgView(preserveAspectRatio(none))`:A},c.onerror=u.onerror=g});u.readAsDataURL(o),await d}else s.bitmap=await createImageBitmap(o);s.refCounter=1}catch(o){warn(o),s=null}return this.#r.set(e,s),s&&this.#r.set(s.id,s),s}async getFromFile(e){const{lastModified:a,name:s,size:o,type:l}=e;return this.#i(`${a}_${s}_${o}_${l}`,e)}async getFromUrl(e){return this.#i(e,e)}async getFromBlob(e,a){const s=await a;return this.#i(e,s)}async getFromId(e){this.#r||=new Map;const a=this.#r.get(e);if(!a)return null;if(a.bitmap)return a.refCounter+=1,a;if(a.file)return this.getFromFile(a.file);if(a.blobPromise){const{blobPromise:s}=a;return delete a.blobPromise,this.getFromBlob(a.id,s)}return this.getFromUrl(a.url)}getFromCanvas(e,a){this.#r||=new Map;let s=this.#r.get(e);if(s?.bitmap)return s.refCounter+=1,s;const o=new OffscreenCanvas(a.width,a.height);return o.getContext("2d").drawImage(a,0,0),s={bitmap:o.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#r.set(e,s),this.#r.set(s.id,s),s}getSvgUrl(e){const a=this.#r.get(e);return a?.isSvg?a.svgUrl:null}deleteId(e){this.#r||=new Map;const a=this.#r.get(e);if(!a||(a.refCounter-=1,a.refCounter!==0))return;const{bitmap:s}=a;if(!a.url&&!a.file){const o=new OffscreenCanvas(s.width,s.height);o.getContext("bitmaprenderer").transferFromImageBitmap(s),a.blobPromise=o.convertToBlob()}s.close?.(),a.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class CommandManager{#e=[];#t=!1;#r;#i=-1;constructor(e=128){this.#r=e}add({cmd:e,undo:a,post:s,mustExec:o,type:l=NaN,overwriteIfSameType:u=!1,keepUndo:c=!1}){if(o&&e(),this.#t)return;const d={cmd:e,undo:a,post:s,type:l};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(d);return}if(u&&this.#e[this.#i].type===l){c&&(d.undo=this.#e[this.#i].undo),this.#e[this.#i]=d;return}const m=this.#i+1;m===this.#r?this.#e.splice(0,1):(this.#i=m,m<this.#e.length&&this.#e.splice(m)),this.#e.push(d)}undo(){if(this.#i===-1)return;this.#t=!0;const{undo:e,post:a}=this.#e[this.#i];e(),a?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;const{cmd:e,post:a}=this.#e[this.#i];e(),a?.(),this.#t=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}cleanType(e){if(this.#i!==-1){for(let a=this.#i;a>=0;a--)if(this.#e[a].type!==e){this.#e.splice(a+1,this.#i-a),this.#i=a;return}this.#e.length=0,this.#i=-1}}destroy(){this.#e=null}}class KeyboardManager{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:a}=util_FeatureTest.platform;for(const[s,o,l={}]of e)for(const u of s){const c=u.startsWith("mac+");a&&c?(this.callbacks.set(u.slice(4),{callback:o,options:l}),this.allKeys.add(u.split("+").at(-1))):!a&&!c&&(this.callbacks.set(u,{callback:o,options:l}),this.allKeys.add(u.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const a=this.buffer.join("+");return this.buffer.length=0,a}exec(e,a){if(!this.allKeys.has(a.key))return;const s=this.callbacks.get(this.#e(a));if(!s)return;const{callback:o,options:{bubbles:l=!1,args:u=[],checker:c=null}}=s;c&&!c(e,a)||(o.bind(e,...u,a)(),l||stopEvent(a))}}class ColorManager{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(e),shadow(this,"_colors",e)}convert(e){const a=getRGB(e);if(!window.matchMedia("(forced-colors: active)").matches)return a;for(const[s,o]of this._colors)if(o.every((l,u)=>l===a[u]))return ColorManager._colorsMapping.get(s);return a}getHexCode(e){const a=this._colors.get(e);return a?Util.makeHexColor(...a):e}}class AnnotationEditorUIManager{#e=new AbortController;#t=null;#r=new Map;#i=new Map;#a=null;#n=null;#o=null;#s=new CommandManager;#h=null;#l=null;#d=0;#c=new Set;#f=null;#p=null;#m=new Set;_editorUndoBar=null;#u=!1;#g=!1;#v=!1;#y=null;#_=null;#x=null;#w=null;#A=!1;#C=null;#M=new IdManager;#E=!1;#R=!1;#T=null;#P=null;#I=null;#D=null;#q=null;#S=AnnotationEditorType.NONE;#b=new Set;#O=null;#B=null;#$=null;#U=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#L=null;#N=null;#j=null;#X=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=AnnotationEditorUIManager.prototype,a=u=>u.#N.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),s=(u,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},o=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&u.#N.contains(c)&&!u.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&u.#N.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:a}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-l,0],checker:a}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:a}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[l,0],checker:a}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:a}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-l],checker:a}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:a}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,l],checker:a}]]))}constructor(e,a,s,o,l,u,c,d,m,g,A,P,W,me,ve){const He=this._signal=this.#e.signal;this.#N=e,this.#j=a,this.#X=s,this.#a=o,this.#B=l,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:He}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:He}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:He}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:He}),u._on("setpreference",this.onSetPreference.bind(this),{signal:He}),u._on("switchannotationeditorparams",De=>this.updateParams(De.type,De.value),{signal:He}),this.#ne(),this.#le(),this.#Q(),this.#n=c.annotationStorage,this.#y=c.filterFactory,this.#$=d,this.#w=m||null,this.#u=g,this.#g=A,this.#v=P,this.#q=W||null,this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=me||null,this._supportsPinchToZoom=ve!==!1}destroy(){this.#F?.resolve(),this.#F=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#i.values())e.destroy();this.#i.clear(),this.#r.clear(),this.#m.clear(),this.#D?.clear(),this.#t=null,this.#b.clear(),this.#s.destroy(),this.#a?.destroy(),this.#B?.destroy(),this.#C?.hide(),this.#C=null,this.#I?.destroy(),this.#I=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return shadow(this,"hcmFilter",this.#$?this.#y.addHCMFilter(this.#$.foreground,this.#$.background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(this.#N).direction)}get highlightColors(){return shadow(this,"highlightColors",this.#w?new Map(this.#w.split(",").map(e=>(e=e.split("=").map(a=>a.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#l=e}setMainHighlightColorPicker(e){this.#I=e}editAltText(e,a=!1){this.#a?.editAltText(this,e,a)}getSignature(e){this.#B?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#B}switchToMode(e,a){this._eventBus.on("annotationeditormodechanged",a,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,a){this._eventBus.dispatch("setpreference",{source:this,name:e,value:a})}onSetPreference({name:e,value:a}){switch(e){case"enableNewAltTextWhenAddingImage":this.#v=a;break}}onPageChanging({pageNumber:e}){this.#d=e-1}focusMainContainer(){this.#N.focus()}findParent(e,a){for(const s of this.#i.values()){const{x:o,y:l,width:u,height:c}=s.div.getBoundingClientRect();if(e>=o&&e<=o+u&&a>=l&&a<=l+c)return s}return null}disableUserSelect(e=!1){this.#j.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#m.add(e)}removeShouldRescale(e){this.#m.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*PixelsPerInch.PDF_TO_CSS_UNITS;for(const a of this.#m)a.onScaleChanging();this.#l?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#K({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#Y(e){const{currentLayer:a}=this;if(a.hasTextLayer(e))return a;for(const s of this.#i.values())if(s.hasTextLayer(e))return s;return null}highlightSelection(e=""){const a=document.getSelection();if(!a||a.isCollapsed)return;const{anchorNode:s,anchorOffset:o,focusNode:l,focusOffset:u}=a,c=a.toString(),m=this.#K(a).closest(".textLayer"),g=this.getSelectionBoxes(m);if(!g)return;a.empty();const A=this.#Y(m),P=this.#S===AnnotationEditorType.NONE,W=()=>{A?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:s,anchorOffset:o,focusNode:l,focusOffset:u,text:c}),P&&this.showAllEditors("highlight",!0,!0)};if(P){this.switchToMode(AnnotationEditorType.HIGHLIGHT,W);return}W()}#re(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=this.#K(e).closest(".textLayer"),o=this.getSelectionBoxes(s);o&&(this.#C||=new HighlightToolbar(this),this.#C.show(s,o,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#n&&!this.#n.has(e.id)&&this.#n.setValue(e.id,e)}a11yAlert(e,a=null){const s=this.#X;s&&(s.setAttribute("data-l10n-id",e),a?s.setAttribute("data-l10n-args",JSON.stringify(a)):s.removeAttribute("data-l10n-args"))}#ie(){const e=document.getSelection();if(!e||e.isCollapsed){this.#O&&(this.#C?.hide(),this.#O=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:a}=e;if(a===this.#O)return;const o=this.#K(e).closest(".textLayer");if(!o){this.#O&&(this.#C?.hide(),this.#O=null,this.#k({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#O=a,this.#k({hasSelectedText:!0}),!(this.#S!==AnnotationEditorType.HIGHLIGHT&&this.#S!==AnnotationEditorType.NONE)&&(this.#S===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#S===AnnotationEditorType.HIGHLIGHT?this.#Y(o):null;l?.toggleDrawing();const u=new AbortController,c=this.combinedSignal(u),d=m=>{m.type==="pointerup"&&m.button!==0||(u.abort(),l?.toggleDrawing(!0),m.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}}#W(e=""){this.#S===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(e):this.#u&&this.#re()}#ne(){document.addEventListener("selectionchange",this.#ie.bind(this),{signal:this._signal})}#ae(){if(this.#x)return;this.#x=new AbortController;const e=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#se(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const a of this.#b)if(a.div.contains(e)){this.#P=[a,e],a._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[e,a]=this.#P;this.#P=null,a.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),a.focus()}#Q(){if(this.#T)return;this.#T=new AbortController;const e=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#oe(){this.#T?.abort(),this.#T=null}#Z(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#J(){this.#h?.abort(),this.#h=null}#le(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#Q(),this.#Z()}removeEditListeners(){this.#oe(),this.#J()}dragOver(e){for(const{type:a}of e.dataTransfer.items)for(const s of this.#p)if(s.isHandlingMimeForPasting(a)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const a of e.dataTransfer.items)for(const s of this.#p)if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const a=[];for(const s of this.#b){const o=s.serialize(!0);o&&a.push(o)}a.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(a))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:a}=e;for(const l of a.items)for(const u of this.#p)if(u.isHandlingMimeForPasting(l.type)){u.paste(l,this.currentLayer);return}let s=a.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(l){warn(`paste: "${l.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const o=this.currentLayer;try{const l=[];for(const d of s){const m=await o.deserialize(d);if(!m)return;l.push(m)}const u=()=>{for(const d of l)this.#ee(d);this.#te(l)},c=()=>{for(const d of l)d.remove()};this.addCommands({cmd:u,undo:c,mustExec:!0})}catch(l){warn(`paste: "${l.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#S!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&AnnotationEditorUIManager._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#k(e){Object.entries(e).some(([s,o])=>this.#H[s]!==o)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,e)}),this.#S===AnnotationEditorType.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#V([[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))}#V(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ae(),this.#Z(),this.#k({isEditing:this.#S!==AnnotationEditorType.NONE,isEmpty:this.#G(),hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:this.#s.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#se(),this.#J(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#p){this.#p=e;for(const a of this.#p)this.#V(a.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#i.get(this.#d)}getLayer(e){return this.#i.get(e)}get currentPageIndex(){return this.#d}addLayer(e){this.#i.set(e.pageIndex,e),this.#E?e.enable():e.disable()}removeLayer(e){this.#i.delete(e.pageIndex)}async updateMode(e,a=null,s=!1,o=!1){if(this.#S!==e&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#l?.commitOrRemove(),this.#S=e,e===AnnotationEditorType.NONE){this.setEditingState(!1),this.#ce(),this._editorUndoBar?.hide(),this.#F.resolve();return}e===AnnotationEditorType.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#ue(),this.unselectAll();for(const l of this.#i.values())l.updateMode(e);if(!a){s&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const l of this.#r.values())l.annotationElementId===a||l.id===a?(this.setSelected(l),o&&l.enterInEditMode()):l.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#S&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,a){if(this.#p){switch(e){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(a);return;case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:this.#I?.updateColor(a);break;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#U||=new Map).set(e,a),this.showAllEditors("highlight",a);break}for(const s of this.#b)s.updateParams(e,a);for(const s of this.#p)s.updateDefaultParams(e,a)}}showAllEditors(e,a,s=!1){for(const l of this.#r.values())l.editorType===e&&l.show(a);(this.#U?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL)??!0)!==a&&this.#V([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,a]])}enableWaiting(e=!1){if(this.#R!==e){this.#R=e;for(const a of this.#i.values())e?a.disableClick():a.enableClick(),a.div.classList.toggle("waiting",e)}}async#ue(){if(!this.#E){this.#E=!0;const e=[];for(const a of this.#i.values())e.push(a.enable());await Promise.all(e);for(const a of this.#r.values())a.enable()}}#ce(){if(this.unselectAll(),this.#E){this.#E=!1;for(const e of this.#i.values())e.disable();for(const e of this.#r.values())e.disable()}}getEditors(e){const a=[];for(const s of this.#r.values())s.pageIndex===e&&a.push(s);return a}getEditor(e){return this.#r.get(e)}addEditor(e){this.#r.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#r.delete(e.id),e.annotationElementId&&this.#D?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#c.has(e.annotationElementId))&&this.#n?.remove(e.id)}addDeletedAnnotationElement(e){this.#c.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#c.has(e)}removeDeletedAnnotationElement(e){this.#c.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ee(e){const a=this.#i.get(e.pageIndex);a?a.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#V(e.propertiesToUpdate))}get#he(){let e=null;for(e of this.#b);return e}updateUI(e){this.#he===e&&this.#V(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#V(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#b.has(e)){this.#b.delete(e),e.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#b.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#l?.commitOrRemove();for(const a of this.#b)a!==e&&a.unselect();this.#b.clear(),this.#b.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(e){return this.#b.has(e)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(e){e.unselect(),this.#b.delete(e),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#s.undo(),this.#k({hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#G()}),this._editorUndoBar?.hide()}redo(){this.#s.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#s.hasSomethingToRedo(),isEmpty:this.#G()})}addCommands(e){this.#s.add(e),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#G()})}cleanUndoStack(e){this.#s.cleanType(e)}#G(){if(this.#r.size===0)return!0;if(this.#r.size===1)for(const e of this.#r.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const a=e?[e]:[...this.#b],s=()=>{this._editorUndoBar?.show(o,a.length===1?a[0].editorType:a.length);for(const l of a)l.remove()},o=()=>{for(const l of a)this.#ee(l)};this.addCommands({cmd:s,undo:o,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#te(e){for(const a of this.#b)a.unselect();this.#b.clear();for(const a of e)a.isEmpty()||(this.#b.add(a),a.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#b)e.commit();this.#te(this.#r.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#S!==AnnotationEditorType.NONE))&&!this.#l?.commitOrRemove()&&this.hasSelection){for(const e of this.#b)e.unselect();this.#b.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(e,a,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=e,this.#z[1]+=a;const[o,l]=this.#z,u=[...this.#b],c=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const d of u)this.#r.has(d.id)&&(d.translateInPage(o,l),d.translationDone())},undo:()=>{for(const d of u)this.#r.has(d.id)&&(d.translateInPage(-o,-l),d.translationDone())},mustExec:!1})},c);for(const d of u)d.translateInPage(e,a),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const e of this.#b)this.#f.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const e=this.#f;this.#f=null;let a=!1;for(const[{x:o,y:l,pageIndex:u},c]of e)c.newX=o,c.newY=l,c.newPageIndex=u,a||=o!==c.savedX||l!==c.savedY||u!==c.savedPageIndex;if(!a)return!1;const s=(o,l,u,c)=>{if(this.#r.has(o.id)){const d=this.#i.get(c);d?o._setParentAndPosition(d,l,u):(o.pageIndex=c,o.x=l,o.y=u)}};return this.addCommands({cmd:()=>{for(const[o,{newX:l,newY:u,newPageIndex:c}]of e)s(o,l,u,c)},undo:()=>{for(const[o,{savedX:l,savedY:u,savedPageIndex:c}]of e)s(o,l,u,c)},mustExec:!0}),!0}dragSelectedEditors(e,a){if(this.#f)for(const s of this.#f.keys())s.drag(e,a)}rebuild(e){if(e.parent===null){const a=this.getLayer(e.pageIndex);a?(a.changeParent(e),a.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#S}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(e){if(!e)return null;const a=document.getSelection();for(let m=0,g=a.rangeCount;m<g;m++)if(!e.contains(a.getRangeAt(m).commonAncestorContainer))return null;const{x:s,y:o,width:l,height:u}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(m,g,A,P)=>({x:(g-o)/u,y:1-(m+A-s)/l,width:P/u,height:A/l});break;case"180":c=(m,g,A,P)=>({x:1-(m+A-s)/l,y:1-(g+P-o)/u,width:A/l,height:P/u});break;case"270":c=(m,g,A,P)=>({x:1-(g+P-o)/u,y:(m-s)/l,width:P/u,height:A/l});break;default:c=(m,g,A,P)=>({x:(m-s)/l,y:(g-o)/u,width:A/l,height:P/u});break}const d=[];for(let m=0,g=a.rangeCount;m<g;m++){const A=a.getRangeAt(m);if(!A.collapsed)for(const{x:P,y:W,width:me,height:ve}of A.getClientRects())me===0||ve===0||d.push(c(P,W,me,ve))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:a}){(this.#o||=new Map).set(e,a)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const a=this.#o?.get(e.data.id);if(!a)return;const s=this.#n.getRawValue(a);s&&(this.#S===AnnotationEditorType.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,a,s){const o=this.#D?.get(e);o&&(o.setCanvas(a,s),this.#D.delete(e))}addMissingCanvas(e,a){(this.#D||=new Map).set(e,a)}}class AltText{#e=null;#t=!1;#r=null;#i=null;#a=null;#n=null;#o=!1;#s=null;#h=null;#l=null;#d=null;#c=!1;static#f=null;static _l10n=null;constructor(e){this.#h=e,this.#c=e._uiManager.useNewAltTextFlow,AltText.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){AltText._l10n??=e}async render(){const e=this.#r=document.createElement("button");e.className="altText",e.tabIndex="0";const a=this.#i=document.createElement("span");e.append(a),this.#c?(e.classList.add("new"),e.setAttribute("data-l10n-id",AltText.#f.missing),a.setAttribute("data-l10n-id",AltText.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),a.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#h._uiManager._signal;e.addEventListener("contextmenu",noContextMenu,{signal:s}),e.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const o=l=>{l.preventDefault(),this.#h._uiManager.editAltText(this.#h),this.#c&&this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",o,{capture:!0,signal:s}),e.addEventListener("keydown",l=>{l.target===e&&l.key==="Enter"&&(this.#o=!0,o(l))},{signal:s}),await this.#m(),e}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#c?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#c?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#d=await AltText._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#c||this.#e){this.#s?.remove(),this.#s=null;return}if(!this.#s){const a=this.#s=document.createElement("div");a.className="noAltTextBadge",this.#h.div.append(a)}this.#s.classList.toggle("hidden",!e)}serialize(e){let a=this.#e;return!e&&this.#l===a&&(a=this.#d),{altText:a,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:a,guessedText:s,textWithDisclaimer:o,cancel:l=!1}){s&&(this.#l=s,this.#d=o),!(this.#e===e&&this.#t===a)&&(l||(this.#e=e,this.#t=a),this.#m())}toggle(e=!1){this.#r&&(!e&&this.#n&&(clearTimeout(this.#n),this.#n=null),this.#r.disabled=!e)}shown(){this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#r?.remove(),this.#r=null,this.#i=null,this.#a=null,this.#s?.remove(),this.#s=null}async#m(){const e=this.#r;if(!e)return;if(this.#c){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",AltText.#f[this.#p]),this.#i?.setAttribute("data-l10n-id",AltText.#f[`${this.#p}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let a=this.#a;if(!a){this.#a=a=document.createElement("span"),a.className="tooltip",a.setAttribute("role","tooltip"),a.id=`alt-text-tooltip-${this.#h.id}`;const o=100,l=this.#h._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#n),this.#n=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#n=setTimeout(()=>{this.#n=null,this.#a.classList.add("show"),this.#h._reportTelemetry({action:"alt_text_tooltip"})},o)},{signal:l}),e.addEventListener("mouseleave",()=>{this.#n&&(clearTimeout(this.#n),this.#n=null),this.#a?.classList.remove("show")},{signal:l})}this.#t?a.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(a.removeAttribute("data-l10n-id"),a.textContent=this.#e),a.parentNode||e.append(a),this.#h.getElementForAltText()?.setAttribute("aria-describedby",a.id)}}class TouchManager{#e;#t=!1;#r=null;#i;#a;#n;#o;#s=null;#h;#l=null;#d;#c=null;constructor({container:e,isPinchingDisabled:a=null,isPinchingStopped:s=null,onPinchStart:o=null,onPinching:l=null,onPinchEnd:u=null,signal:c}){this.#e=e,this.#r=s,this.#i=a,this.#a=o,this.#n=l,this.#o=u,this.#d=new AbortController,this.#h=AbortSignal.any([c,this.#d.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#h})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}#f(e){if(this.#i?.())return;if(e.touches.length===1){if(this.#s)return;const o=this.#s=new AbortController,l=AbortSignal.any([this.#h,o.signal]),u=this.#e,c={capture:!0,signal:l,passive:!1},d=m=>{m.pointerType==="touch"&&(this.#s?.abort(),this.#s=null)};u.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(stopEvent(m),d(m))},c),u.addEventListener("pointerup",d,c),u.addEventListener("pointercancel",d,c);return}if(!this.#c){this.#c=new AbortController;const o=AbortSignal.any([this.#h,this.#c.signal]),l=this.#e,u={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",this.#p.bind(this),u);const c=this.#m.bind(this);l.addEventListener("touchend",c,u),l.addEventListener("touchcancel",c,u),u.capture=!0,l.addEventListener("pointerdown",stopEvent,u),l.addEventListener("pointermove",stopEvent,u),l.addEventListener("pointercancel",stopEvent,u),l.addEventListener("pointerup",stopEvent,u),this.#a?.()}if(stopEvent(e),e.touches.length!==2||this.#r?.()){this.#l=null;return}let[a,s]=e.touches;a.identifier>s.identifier&&([a,s]=[s,a]),this.#l={touch0X:a.screenX,touch0Y:a.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#p(e){if(!this.#l||e.touches.length!==2)return;stopEvent(e);let[a,s]=e.touches;a.identifier>s.identifier&&([a,s]=[s,a]);const{screenX:o,screenY:l}=a,{screenX:u,screenY:c}=s,d=this.#l,{touch0X:m,touch0Y:g,touch1X:A,touch1Y:P}=d,W=A-m,me=P-g,ve=u-o,He=c-l,De=Math.hypot(ve,He)||1,Xe=Math.hypot(W,me)||1;if(!this.#t&&Math.abs(Xe-De)<=TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=o,d.touch0Y=l,d.touch1X=u,d.touch1Y=c,!this.#t){this.#t=!0;return}const qe=[(o+u)/2,(l+c)/2];this.#n?.(qe,Xe,De)}#m(e){e.touches.length>=2||(this.#c&&(this.#c.abort(),this.#c=null,this.#o?.()),this.#l&&(stopEvent(e),this.#l=null,this.#t=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#s?.abort(),this.#s=null}}class AnnotationEditor{#e=null;#t=null;#r=null;#i=!1;#a=null;#n="";#o=!1;#s=null;#h=null;#l=null;#d=null;#c="";#f=!1;#p=null;#m=!1;#u=!1;#g=!1;#v=null;#y=0;#_=0;#x=null;#w=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#C=AnnotationEditor._zIndex++;static _borderLineWidth=-1;static _colorManager=new ColorManager;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=AnnotationEditor.prototype._resizeWithKeyboard,a=AnnotationEditorUIManager.TRANSLATE_SMALL,s=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-a,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[a,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-a]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,a]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],AnnotationEditor.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:a,rawDims:{pageWidth:s,pageHeight:o,pageX:l,pageY:u}}=this.parent.viewport;this.rotation=a,this.pageRotation=(360+a-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,o],this.pageTranslation=[l,u];const[c,d]=this.parentDimensions;this.x=e.x/c,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const a=new FakeEditor({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});a.annotationElementId=e.annotationElementId,a.deleted=!0,a._uiManager.addToAnnotationStorage(a)}static initialize(e,a){if(AnnotationEditor._l10n??=e,AnnotationEditor._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),AnnotationEditor._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);AnnotationEditor._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,a){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,a){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(e){this.#A=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,a]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*a/(e*2),this.y+=this.width*e/(a*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*a/(e*2),this.y-=this.width*e/(a*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#j(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,a,s,o){const[l,u]=this.parentDimensions;[s,o]=this.screenToPageTranslation(s,o),this.x=(e+s)/l,this.y=(a+o)/u,this.fixAndSetPosition()}_moveAfterPaste(e,a){const[s,o]=this.parentDimensions;this.setAt(e*s,a*o,this.width*s,this.height*o),this._onTranslated()}#M([e,a],s,o){[s,o]=this.screenToPageTranslation(s,o),this.x+=s/e,this.y+=o/a,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,a){this.#M(this.parentDimensions,e,a)}translateInPage(e,a){this.#p||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,e,a),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,a){this.#p||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[o,l]}=this;if(this.x+=e/o,this.y+=a/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:A,y:P}=this.div.getBoundingClientRect();this.parent.findNewParent(this,A,P)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:c}=this;const[d,m]=this.getBaseTranslation();u+=d,c+=m;const{style:g}=s;g.left=`${(100*u).toFixed(2)}%`,g.top=`${(100*c).toFixed(2)}%`,this._onTranslating(u,c),s.scrollIntoView({block:"nearest"})}_onTranslating(e,a){}_onTranslated(e,a){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){const[e,a]=this.parentDimensions,{_borderLineWidth:s}=AnnotationEditor,o=s/e,l=s/a;switch(this.rotation){case 90:return[-o,l];case 180:return[o,l];case 270:return[o,-l];default:return[-o,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:a},pageDimensions:[s,o]}=this;let{x:l,y:u,width:c,height:d}=this;if(c*=s,d*=o,l*=s,u*=o,this._mustFixPosition)switch(e){case 0:l=MathClamp(l,0,s-c),u=MathClamp(u,0,o-d);break;case 90:l=MathClamp(l,0,s-d),u=MathClamp(u,c,o);break;case 180:l=MathClamp(l,c,s),u=MathClamp(u,d,o);break;case 270:l=MathClamp(l,d,s),u=MathClamp(u,0,o-c);break}this.x=l/=s,this.y=u/=o;const[m,g]=this.getBaseTranslation();l+=m,u+=g,a.left=`${(100*l).toFixed(2)}%`,a.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}static#E(e,a,s){switch(s){case 90:return[a,-e];case 180:return[-e,-a];case 270:return[-a,e];default:return[e,a]}}screenToPageTranslation(e,a){return AnnotationEditor.#E(e,a,this.parentRotation)}pageTranslationToScreen(e,a){return AnnotationEditor.#E(e,a,360-this.parentRotation)}#R(e){switch(e){case 90:{const[a,s]=this.pageDimensions;return[0,-a/s,s/a,0]}case 180:return[-1,0,0,-1];case 270:{const[a,s]=this.pageDimensions;return[0,a/s,-s/a,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[a,s]}=this;return[a*e,s*e]}setDims(e,a){const[s,o]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*e/s).toFixed(2)}%`,this.#o||(l.height=`${(100*a/o).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:a,width:s}=e,o=s.endsWith("%"),l=!this.#o&&a.endsWith("%");if(o&&l)return;const[u,c]=this.parentDimensions;o||(e.width=`${(100*parseFloat(s)/u).toFixed(2)}%`),!this.#o&&!l&&(e.height=`${(100*parseFloat(a)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#T(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],a=this._uiManager._signal;for(const s of e){const o=document.createElement("div");this.#s.append(o),o.classList.add("resizer",s),o.setAttribute("data-resizer-name",s),o.addEventListener("pointerdown",this.#P.bind(this,s),{signal:a}),o.addEventListener("contextmenu",noContextMenu,{signal:a}),o.tabIndex=-1}this.div.prepend(this.#s)}#P(e,a){a.preventDefault();const{isMac:s}=util_FeatureTest.platform;if(a.button!==0||a.ctrlKey&&s)return;this.#r?.toggle(!1);const o=this._isDraggable;this._isDraggable=!1,this.#h=[a.screenX,a.screenY];const l=new AbortController,u=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#q.bind(this,e),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:u}),window.addEventListener("contextmenu",noContextMenu,{signal:u}),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(a.target).cursor;const m=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=o,this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#D()};window.addEventListener("pointerup",m,{signal:u}),window.addEventListener("blur",m,{signal:u})}#I(e,a,s,o){this.width=s,this.height=o,this.x=e,this.y=a;const[l,u]=this.parentDimensions;this.setDims(l*s,u*o),this.fixAndSetPosition(),this._onResized()}_onResized(){}#D(){if(!this.#l)return;const{savedX:e,savedY:a,savedWidth:s,savedHeight:o}=this.#l;this.#l=null;const l=this.x,u=this.y,c=this.width,d=this.height;l===e&&u===a&&c===s&&d===o||this.addCommands({cmd:this.#I.bind(this,l,u,c,d),undo:this.#I.bind(this,e,a,s,o),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#q(e,a){const[s,o]=this.parentDimensions,l=this.x,u=this.y,c=this.width,d=this.height,m=AnnotationEditor.MIN_SIZE/s,g=AnnotationEditor.MIN_SIZE/o,A=this.#R(this.rotation),P=(Fc,_h)=>[A[0]*Fc+A[2]*_h,A[1]*Fc+A[3]*_h],W=this.#R(360-this.rotation),me=(Fc,_h)=>[W[0]*Fc+W[2]*_h,W[1]*Fc+W[3]*_h];let ve,He,De=!1,Xe=!1;switch(e){case"topLeft":De=!0,ve=(Fc,_h)=>[0,0],He=(Fc,_h)=>[Fc,_h];break;case"topMiddle":ve=(Fc,_h)=>[Fc/2,0],He=(Fc,_h)=>[Fc/2,_h];break;case"topRight":De=!0,ve=(Fc,_h)=>[Fc,0],He=(Fc,_h)=>[0,_h];break;case"middleRight":Xe=!0,ve=(Fc,_h)=>[Fc,_h/2],He=(Fc,_h)=>[0,_h/2];break;case"bottomRight":De=!0,ve=(Fc,_h)=>[Fc,_h],He=(Fc,_h)=>[0,0];break;case"bottomMiddle":ve=(Fc,_h)=>[Fc/2,_h],He=(Fc,_h)=>[Fc/2,0];break;case"bottomLeft":De=!0,ve=(Fc,_h)=>[0,_h],He=(Fc,_h)=>[Fc,0];break;case"middleLeft":Xe=!0,ve=(Fc,_h)=>[0,_h/2],He=(Fc,_h)=>[Fc,_h/2];break}const qe=ve(c,d),Rs=He(c,d);let Vc=P(...Rs);const So=AnnotationEditor._round(l+Vc[0]),Do=AnnotationEditor._round(u+Vc[1]);let eh=1,Ko=1,Ge,An;if(a.fromKeyboard)({deltaX:Ge,deltaY:An}=a);else{const{screenX:Fc,screenY:_h}=a,[qc,Mh]=this.#h;[Ge,An]=this.screenToPageTranslation(Fc-qc,_h-Mh),this.#h[0]=Fc,this.#h[1]=_h}if([Ge,An]=me(Ge/s,An/o),De){const Fc=Math.hypot(c,d);eh=Ko=Math.max(Math.min(Math.hypot(Rs[0]-qe[0]-Ge,Rs[1]-qe[1]-An)/Fc,1/c,1/d),m/c,g/d)}else Xe?eh=MathClamp(Math.abs(Rs[0]-qe[0]-Ge),m,1)/c:Ko=MathClamp(Math.abs(Rs[1]-qe[1]-An),g,1)/d;const wt=AnnotationEditor._round(c*eh),Bs=AnnotationEditor._round(d*Ko);Vc=P(...He(wt,Bs));const yh=So-Vc[0],df=Do-Vc[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=wt,this.height=Bs,this.x=yh,this.y=df,this.setDims(s*wt,o*Bs),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#u)return this._editToolbar;this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[a,s]of e)await this._editToolbar.addButton(a,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#r?.destroy())}addContainer(e){const a=this._editToolbar?.div;a?a.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(AltText.initialize(AnnotationEditor._l10n),this.#r=new AltText(this),this.#e&&(this.#r.data=this.#e,this.#e=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(e){this.#r&&(this.#r.data=e)}get guessedAltText(){return this.#r?.guessedText}async setGuessedAltText(e){await this.#r?.setGuessedText(e)}serializeAltText(e){return this.#r?.serialize(e)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#U();const[a,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/a).toFixed(2)}%`,e.style.maxHeight=`${(100*a/s).toFixed(2)}%`);const[o,l]=this.getInitialTranslation();return this.translate(o,l),bindEvents(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#w||=new TouchManager({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#S.bind(this),onPinching:this.#b.bind(this),onPinchEnd:this.#O.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),e}#S(){this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#b(e,a,s){let l=.7*(s/a)+1-.7;if(l===1)return;const u=this.#R(this.rotation),c=(So,Do)=>[u[0]*So+u[2]*Do,u[1]*So+u[3]*Do],[d,m]=this.parentDimensions,g=this.x,A=this.y,P=this.width,W=this.height,me=AnnotationEditor.MIN_SIZE/d,ve=AnnotationEditor.MIN_SIZE/m;l=Math.max(Math.min(l,1/P,1/W),me/P,ve/W);const He=AnnotationEditor._round(P*l),De=AnnotationEditor._round(W*l);if(He===P&&De===W)return;this.#p||=[g,A,P,W];const Xe=c(P/2,W/2),qe=AnnotationEditor._round(g+Xe[0]),Rs=AnnotationEditor._round(A+Xe[1]),Vc=c(He/2,De/2);this.x=qe-Vc[0],this.y=Rs-Vc[1],this.width=He,this.height=De,this.setDims(d*He,m*De),this.fixAndSetPosition(),this._onResizing()}#O(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#D()}pointerdown(e){const{isMac:a}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&a){e.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#$(e);return}this.#B(e)}#B(e){const{isMac:a}=util_FeatureTest.platform;e.ctrlKey&&!a||e.shiftKey||e.metaKey&&a?this.parent.toggleSelected(this):this.parent.setSelected(this)}#$(e){const{isSelected:a}=this;this._uiManager.setUpDragSession();let s=!1;const o=new AbortController,l=this._uiManager.combinedSignal(o),u={capture:!0,passive:!1,signal:l},c=m=>{o.abort(),this.#a=null,this.#f=!1,this._uiManager.endDragSession()||this.#B(m),s&&this._onStopDragging()};a&&(this.#y=e.clientX,this.#_=e.clientY,this.#a=e.pointerId,this.#n=e.pointerType,window.addEventListener("pointermove",m=>{s||(s=!0,this._onStartDragging());const{clientX:g,clientY:A,pointerId:P}=m;if(P!==this.#a){stopEvent(m);return}const[W,me]=this.screenToPageTranslation(g-this.#y,A-this.#_);this.#y=g,this.#_=A,this._uiManager.dragSelectedEditors(W,me)},u),window.addEventListener("touchmove",stopEvent,u),window.addEventListener("pointerdown",m=>{m.pointerType===this.#n&&(this.#w||m.isPrimary)&&c(m),stopEvent(m)},u));const d=m=>{if(!this.#a||this.#a===m.pointerId){c(m);return}stopEvent(m)};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,a,s){e.changeParent(this),this.x=a,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,a,s=this.rotation){const o=this.parentScale,[l,u]=this.pageDimensions,[c,d]=this.pageTranslation,m=e/o,g=a/o,A=this.x*l,P=this.y*u,W=this.width*l,me=this.height*u;switch(s){case 0:return[A+m+c,u-P-g-me+d,A+m+W+c,u-P-g+d];case 90:return[A+g+c,u-P+m+d,A+g+me+c,u-P+m+W+d];case 180:return[A-m-W+c,u-P+g+d,A-m+c,u-P+g+me+d];case 270:return[A-g-me+c,u-P-m-W+d,A-g+c,u-P-m+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,a){const[s,o,l,u]=e,c=l-s,d=u-o;switch(this.rotation){case 0:return[s,a-u,c,d];case 90:return[s,a-o,d,c];case 180:return[l,a-o,c,d];case 270:return[l,a-u,d,c];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#u=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#u=!1,!0):!1}isInEditMode(){return this.#u}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:a,bottom:s,right:o}=this.getClientDimensions(),{innerHeight:l,innerWidth:u}=window;return a<u&&o>0&&e<l&&s>0}#U(){if(this.#d||!this.div)return;this.#d=new AbortController;const e=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#U()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,a=null){unreachable("An editor must be serializable")}static async deserialize(e,a,s){const o=new this.prototype.constructor({parent:a,id:a.getNextId(),uiManager:s,annotationElementId:e.annotationElementId});o.rotation=e.rotation,o.#e=e.accessibilityData,o._isCopy=e.isCopy||!1;const[l,u]=o.pageDimensions,[c,d,m,g]=o.getRectInCurrentCoords(e.rect,u);return o.x=c/l,o.y=d/u,o.width=m/l,o.height=g/u,o}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#j(),this.removeEditToolbar(),this.#x){for(const e of this.#x.values())clearTimeout(e);this.#x=null}this.parent=null,this.#w?.destroy(),this.#w=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#T(),this.#s.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const a=this.#s.children;if(!this.#t){this.#t=Array.from(a);const u=this.#H.bind(this),c=this.#z.bind(this),d=this._uiManager._signal;for(const m of this.#t){const g=m.getAttribute("data-resizer-name");m.setAttribute("role","spinbutton"),m.addEventListener("keydown",u,{signal:d}),m.addEventListener("blur",c,{signal:d}),m.addEventListener("focus",this.#L.bind(this,g),{signal:d}),m.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[g])}}const s=this.#t[0];let o=0;for(const u of a){if(u===s)break;o++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(l!==o){if(l<o)for(let c=0;c<o-l;c++)this.#s.append(this.#s.firstChild);else if(l>o)for(let c=0;c<l-o;c++)this.#s.firstChild.before(this.#s.lastChild);let u=0;for(const c of a){const m=this.#t[u++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[m])}}this.#N(0),this.#g=!0,this.#s.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#H(e){AnnotationEditor._resizerKeyboardManager.exec(this,e)}#z(e){this.#g&&e.relatedTarget?.parentNode!==this.#s&&this.#j()}#L(e){this.#c=this.#g?e:""}#N(e){if(this.#t)for(const a of this.#t)a.tabIndex=e}_resizeWithKeyboard(e,a){this.#g&&this.#q(this.#c,{deltaX:e,deltaY:a,fromKeyboard:!0})}#j(){this.#g=!1,this.#N(-1),this.#D()}_stopResizingWithKeyboard(){this.#j(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0))}updateParams(e,a){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(e){this.#m=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,a){this.#o=!0;const s=e/a,{style:o}=this.div;o.aspectRatio=s,o.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,a=!1){if(a){this.#x||=new Map;const{action:s}=e;let o=this.#x.get(s);o&&clearTimeout(o),o=setTimeout(()=>{this._reportTelemetry(e),this.#x.delete(s),this.#x.size===0&&(this.#x=null)},AnnotationEditor._telemetryTimeout),this.#x.set(s,o);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let a=e.container.querySelector(".annotationContent");if(!a)a=document.createElement("div"),a.classList.add("annotationContent",this.editorType),e.container.prepend(a);else if(a.nodeName==="CANVAS"){const s=a;a=document.createElement("div"),a.classList.add("annotationContent",this.editorType),s.before(a)}return a}resetAnnotationElement(e){const{firstChild:a}=e.container;a?.nodeName==="DIV"&&a.classList.contains("annotationContent")&&a.remove()}}class FakeEditor extends AnnotationEditor{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(e){this.h1=e?e&4294967295:SEED,this.h2=e?e&4294967295:SEED}update(e){let a,s;if(typeof e=="string"){a=new Uint8Array(e.length*2),s=0;for(let ve=0,He=e.length;ve<He;ve++){const De=e.charCodeAt(ve);De<=255?a[s++]=De:(a[s++]=De>>>8,a[s++]=De&255)}}else if(ArrayBuffer.isView(e))a=e.slice(),s=a.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const o=s>>2,l=s-o*4,u=new Uint32Array(a.buffer,0,o);let c=0,d=0,m=this.h1,g=this.h2;const A=3432918353,P=461845907,W=A&MASK_LOW,me=P&MASK_LOW;for(let ve=0;ve<o;ve++)ve&1?(c=u[ve],c=c*A&MASK_HIGH|c*W&MASK_LOW,c=c<<15|c>>>17,c=c*P&MASK_HIGH|c*me&MASK_LOW,m^=c,m=m<<13|m>>>19,m=m*5+3864292196):(d=u[ve],d=d*A&MASK_HIGH|d*W&MASK_LOW,d=d<<15|d>>>17,d=d*P&MASK_HIGH|d*me&MASK_LOW,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(c=0,l){case 3:c^=a[o*4+2]<<16;case 2:c^=a[o*4+1]<<8;case 1:c^=a[o*4],c=c*A&MASK_HIGH|c*W&MASK_LOW,c=c<<15|c>>>17,c=c*P&MASK_HIGH|c*me&MASK_LOW,o&1?m^=c:g^=c}this.h1=m,this.h2=g}hexdigest(){let e=this.h1,a=this.h2;return e^=a>>>1,e=e*3981806797&MASK_HIGH|e*36045&MASK_LOW,a=a*4283543511&MASK_HIGH|((a<<16|e>>>16)*2950163797&MASK_HIGH)>>>16,e^=a>>>1,e=e*444984403&MASK_HIGH|e*60499&MASK_LOW,a=a*3301882366&MASK_HIGH|((a<<16|e>>>16)*3120437893&MASK_HIGH)>>>16,e^=a>>>1,(e>>>0).toString(16).padStart(8,"0")+(a>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});class AnnotationStorage{#e=!1;#t=null;#r=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,a){const s=this.#r.get(e);return s===void 0?a:Object.assign(a,s)}getRawValue(e){return this.#r.get(e)}remove(e){if(this.#r.delete(e),this.#r.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const a of this.#r.values())if(a instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,a){const s=this.#r.get(e);let o=!1;if(s!==void 0)for(const[l,u]of Object.entries(a))s[l]!==u&&(o=!0,s[l]=u);else o=!0,this.#r.set(e,a);o&&this.#i(),a instanceof AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(a.constructor._type)}has(e){return this.#r.has(e)}get size(){return this.#r.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(this.#r.size===0)return SerializableEmpty;const e=new Map,a=new MurmurHash3_64,s=[],o=Object.create(null);let l=!1;for(const[u,c]of this.#r){const d=c instanceof AnnotationEditor?c.serialize(!1,o):c;d&&(e.set(u,d),a.update(`${u}:${JSON.stringify(d)}`),l||=!!d.bitmap)}if(l)for(const u of e.values())u.bitmap&&s.push(u.bitmap);return e.size>0?{map:e,hash:a.hexdigest(),transfer:s}:SerializableEmpty}get editorStats(){let e=null;const a=new Map;for(const s of this.#r.values()){if(!(s instanceof AnnotationEditor))continue;const o=s.telemetryFinalData;if(!o)continue;const{type:l}=o;a.has(l)||a.set(l,Object.getPrototypeOf(s).constructor),e||=Object.create(null);const u=e[l]||=new Map;for(const[c,d]of Object.entries(o)){if(c==="type")continue;let m=u.get(c);m||(m=new Map,u.set(c,m));const g=m.get(d)??0;m.set(d,g+1)}}for(const[s,o]of a)e[s]=o.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const a of this.#r.values())!(a instanceof AnnotationEditor)||!a.annotationElementId||!a.serialize()||e.push(a.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#r.entries()}}class PrintAnnotationStorage extends AnnotationStorage{#e;constructor(e){super();const{map:a,hash:s,transfer:o}=e.serializable,l=structuredClone(a,o?{transfer:o}:null);this.#e={map:l,hash:s,transfer:o}}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}class FontLoader{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:a=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const a=this.styleElement.sheet;a.insertRule(e,a.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:a,_inspectFont:s}){if(!(!e||this.#e.has(e.loadedName))){if(assert(!a,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:o,src:l,style:u}=e,c=new FontFace(o,l,u);this.addNativeFontFace(c);try{await c.load(),this.#e.add(o),s?.(e)}catch{warn(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(o){throw warn(`Failed to load font '${s.family}': '${o}'.`),e.disableFontFace=!0,o}}return}const a=e.createFontFaceRule();if(a){if(this.insertRule(a),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const o=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,o)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return shadow(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(e){function a(){for(assert(!o.done,"completeRequest() cannot be called twice."),o.done=!0;s.length>0&&s[0].done;){const l=s.shift();setTimeout(l.callback,0)}}const{loadingRequests:s}=this,o={done:!1,complete:a,callback:e};return s.push(o),o}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,a){function s(Rs,Vc){return Rs.charCodeAt(Vc)<<24|Rs.charCodeAt(Vc+1)<<16|Rs.charCodeAt(Vc+2)<<8|Rs.charCodeAt(Vc+3)&255}function o(Rs,Vc,So,Do){const eh=Rs.substring(0,Vc),Ko=Rs.substring(Vc+So);return eh+Do+Ko}let l,u;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let m=0;function g(Rs,Vc){if(++m>30){warn("Load test font never loaded."),Vc();return}if(d.font="30px "+Rs,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){Vc();return}setTimeout(g.bind(null,Rs,Vc))}const A=`lt${Date.now()}${this.loadTestFontId++}`;let P=this._loadTestFont;P=o(P,976,A.length,A);const me=16,ve=1482184792;let He=s(P,me);for(l=0,u=A.length-3;l<u;l+=4)He=He-ve+s(A,l)|0;l<A.length&&(He=He-ve+s(A+"XXX",l)|0),P=o(P,me,4,string32(He));const De=`url(data:font/opentype;base64,${btoa(P)});`,Xe=`@font-face {font-family:"${A}";src:${De}}`;this.insertRule(Xe);const qe=this._document.createElement("div");qe.style.visibility="hidden",qe.style.width=qe.style.height="10px",qe.style.position="absolute",qe.style.top=qe.style.left="0px";for(const Rs of[e.loadedName,A]){const Vc=this._document.createElement("span");Vc.textContent="Hi",Vc.style.fontFamily=Rs,qe.append(Vc)}this._document.body.append(qe),g(A,()=>{qe.remove(),a.complete()})}}class FontFaceObject{constructor(e,a=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=a}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const a={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(a.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,a)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let a;if(!this.cssFontInfo)a=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return this._inspectFont?.(this,e),a}getPathGenerator(e,a){if(this.compiledGlyphs[a]!==void 0)return this.compiledGlyphs[a];const s=this.loadedName+"_path_"+a;let o;try{o=e.get(s)}catch(u){warn(`getPathGenerator - ignoring character: "${u}".`)}const l=new Path2D(o||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[a]=l}}function getUrlProp(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(isNodeJS)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(t){if(isNodeJS&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return stringToBytes(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const isRefProxy=t=>typeof t=="object"&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0,isNameProxy=t=>typeof t=="object"&&typeof t?.name=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);class LoopbackPort{#e=new Map;#t=Promise.resolve();postMessage(e,a){const s={data:structuredClone(e,a?{transfer:a}:null)};this.#t.then(()=>{for(const[o]of this.#e)o.call(this,s)})}addEventListener(e,a,s=null){let o=null;if(s?.signal instanceof AbortSignal){const{signal:l}=s;if(l.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(e,a);o=()=>l.removeEventListener("abort",u),l.addEventListener("abort",u)}this.#e.set(a,o)}removeEventListener(e,a){this.#e.get(a)?.(),this.#e.delete(a)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(t){if(t instanceof AbortException||t instanceof InvalidPDFException||t instanceof PasswordException||t instanceof ResponseException||t instanceof UnknownErrorException)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new AbortException(t.message);case"InvalidPDFException":return new InvalidPDFException(t.message);case"PasswordException":return new PasswordException(t.message,t.code);case"ResponseException":return new ResponseException(t.message,t.status,t.missing);case"UnknownErrorException":return new UnknownErrorException(t.message,t.details)}return new UnknownErrorException(t.message,t.toString())}class MessageHandler{#e=new AbortController;constructor(e,a,s){this.sourceName=e,this.targetName=a,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#i(e);return}if(e.callback){const s=e.callbackId,o=this.callbackCapabilities[s];if(!o)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===CallbackKind.DATA)o.resolve(e.data);else if(e.callback===CallbackKind.ERROR)o.reject(wrapReason(e.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[e.action];if(!a)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,o=e.sourceName,l=this.comObj;Promise.try(a,e.data).then(function(u){l.postMessage({sourceName:s,targetName:o,callback:CallbackKind.DATA,callbackId:e.callbackId,data:u})},function(u){l.postMessage({sourceName:s,targetName:o,callback:CallbackKind.ERROR,callbackId:e.callbackId,reason:wrapReason(u)})});return}if(e.streamId){this.#r(e);return}a(e.data)}on(e,a){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=a}send(e,a,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:a},s)}sendWithPromise(e,a,s){const o=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[o]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:o,data:a},s)}catch(u){l.reject(u)}return l.promise}sendWithStream(e,a,s,o){const l=this.streamId++,u=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:m=>{const g=Promise.withResolvers();return this.streamControllers[l]={controller:m,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:u,targetName:c,action:e,streamId:l,data:a,desiredSize:m.desiredSize},o),g.promise},pull:m=>{const g=Promise.withResolvers();return this.streamControllers[l].pullCall=g,d.postMessage({sourceName:u,targetName:c,stream:StreamKind.PULL,streamId:l,desiredSize:m.desiredSize}),g.promise},cancel:m=>{assert(m instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[l].cancelCall=g,this.streamControllers[l].isClosed=!0,d.postMessage({sourceName:u,targetName:c,stream:StreamKind.CANCEL,streamId:l,reason:wrapReason(m)}),g.promise}},s)}#r(e){const a=e.streamId,s=this.sourceName,o=e.sourceName,l=this.comObj,u=this,c=this.actionHandler[e.action],d={enqueue(m,g=1,A){if(this.isCancelled)return;const P=this.desiredSize;this.desiredSize-=g,P>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:s,targetName:o,stream:StreamKind.ENQUEUE,streamId:a,chunk:m},A)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:o,stream:StreamKind.CLOSE,streamId:a}),delete u.streamSinks[a])},error(m){assert(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:o,stream:StreamKind.ERROR,streamId:a,reason:wrapReason(m)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[a]=d,Promise.try(c,e.data,d).then(function(){l.postMessage({sourceName:s,targetName:o,stream:StreamKind.START_COMPLETE,streamId:a,success:!0})},function(m){l.postMessage({sourceName:s,targetName:o,stream:StreamKind.START_COMPLETE,streamId:a,reason:wrapReason(m)})})}#i(e){const a=e.streamId,s=this.sourceName,o=e.sourceName,l=this.comObj,u=this.streamControllers[a],c=this.streamSinks[a];switch(e.stream){case StreamKind.START_COMPLETE:e.success?u.startCall.resolve():u.startCall.reject(wrapReason(e.reason));break;case StreamKind.PULL_COMPLETE:e.success?u.pullCall.resolve():u.pullCall.reject(wrapReason(e.reason));break;case StreamKind.PULL:if(!c){l.postMessage({sourceName:s,targetName:o,stream:StreamKind.PULL_COMPLETE,streamId:a,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||onFn).then(function(){l.postMessage({sourceName:s,targetName:o,stream:StreamKind.PULL_COMPLETE,streamId:a,success:!0})},function(m){l.postMessage({sourceName:s,targetName:o,stream:StreamKind.PULL_COMPLETE,streamId:a,reason:wrapReason(m)})});break;case StreamKind.ENQUEUE:if(assert(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(e.chunk);break;case StreamKind.CLOSE:if(assert(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),this.#a(u,a);break;case StreamKind.ERROR:assert(u,"error should have stream controller"),u.controller.error(wrapReason(e.reason)),this.#a(u,a);break;case StreamKind.CANCEL_COMPLETE:e.success?u.cancelCall.resolve():u.cancelCall.reject(wrapReason(e.reason)),this.#a(u,a);break;case StreamKind.CANCEL:if(!c)break;const d=wrapReason(e.reason);Promise.try(c.onCancel||onFn,d).then(function(){l.postMessage({sourceName:s,targetName:o,stream:StreamKind.CANCEL_COMPLETE,streamId:a,success:!0})},function(m){l.postMessage({sourceName:s,targetName:o,stream:StreamKind.CANCEL_COMPLETE,streamId:a,reason:wrapReason(m)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[a];break;default:throw new Error("Unexpected stream case")}}async#a(e,a){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[a]}destroy(){this.#e?.abort(),this.#e=null}}class BaseCanvasFactory{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,a){if(e<=0||a<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,a);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,a,s){if(!e.canvas)throw new Error("Canvas is not specified");if(a<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=a,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,a){unreachable("Abstract method `_createCanvas` called.")}}class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:e=globalThis.document,enableHWA:a=!1}){super({enableHWA:a}),this._document=e}_createCanvas(e,a){const s=this._document.createElement("canvas");return s.width=e,s.height=a,s}}class BaseCMapReaderFactory{constructor({baseUrl:e=null,isCompressed:a=!0}){this.baseUrl=e,this.isCompressed=a}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const a=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(a).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${a}`)})}async _fetch(e){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(e){const a=await fetchData(e,this.isCompressed?"arraybuffer":"text");return a instanceof ArrayBuffer?new Uint8Array(a):stringToBytes(a)}}class BaseFilterFactory{addFilter(e){return"none"}addHCMFilter(e,a){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,a,s,o,l){return"none"}destroy(e=!1){}}class DOMFilterFactory extends BaseFilterFactory{#e;#t;#r;#i;#a;#n;#o=0;constructor({docId:e,ownerDocument:a=globalThis.document}){super(),this.#i=e,this.#a=a}get#s(){return this.#t||=new Map}get#h(){return this.#n||=new Map}get#l(){if(!this.#r){const e=this.#a.createElement("div"),{style:a}=e;a.visibility="hidden",a.contain="strict",a.width=a.height=0,a.position="absolute",a.top=a.left=0,a.zIndex=-1;const s=this.#a.createElementNS(SVG_NS,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#r=this.#a.createElementNS(SVG_NS,"defs"),e.append(s),s.append(this.#r),this.#a.body.append(e)}return this.#r}#d(e){if(e.length===1){const d=e[0],m=new Array(256);for(let A=0;A<256;A++)m[A]=d[A]/255;const g=m.join(",");return[g,g,g]}const[a,s,o]=e,l=new Array(256),u=new Array(256),c=new Array(256);for(let d=0;d<256;d++)l[d]=a[d]/255,u[d]=s[d]/255,c[d]=o[d]/255;return[l.join(","),u.join(","),c.join(",")]}#c(e){if(this.#e===void 0){this.#e="";const a=this.#a.URL;a!==this.#a.baseURI&&(isDataScheme(a)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=updateUrlHash(a,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let a=this.#s.get(e);if(a)return a;const[s,o,l]=this.#d(e),u=e.length===1?s:`${s}${o}${l}`;if(a=this.#s.get(u),a)return this.#s.set(e,a),a;const c=`g_${this.#i}_transfer_map_${this.#o++}`,d=this.#c(c);this.#s.set(e,d),this.#s.set(u,d);const m=this.#m(c);return this.#g(s,o,l,m),d}addHCMFilter(e,a){const s=`${e}-${a}`,o="base";let l=this.#h.get(o);if(l?.key===s||(l?(l.filter?.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},this.#h.set(o,l)),!e||!a))return l.url;const u=this.#y(e);e=Util.makeHexColor(...u);const c=this.#y(a);if(a=Util.makeHexColor(...c),this.#l.style.color="",e==="#000000"&&a==="#ffffff"||e===a)return l.url;const d=new Array(256);for(let W=0;W<=255;W++){const me=W/255;d[W]=me<=.03928?me/12.92:((me+.055)/1.055)**2.4}const m=d.join(","),g=`g_${this.#i}_hcm_filter`,A=l.filter=this.#m(g);this.#g(m,m,m,A),this.#p(A);const P=(W,me)=>{const ve=u[W]/255,He=c[W]/255,De=new Array(me+1);for(let Xe=0;Xe<=me;Xe++)De[Xe]=ve+Xe/me*(He-ve);return De.join(",")};return this.#g(P(0,5),P(1,5),P(2,5),A),l.url=this.#c(g),l.url}addAlphaFilter(e){let a=this.#s.get(e);if(a)return a;const[s]=this.#d([e]),o=`alpha_${s}`;if(a=this.#s.get(o),a)return this.#s.set(e,a),a;const l=`g_${this.#i}_alpha_map_${this.#o++}`,u=this.#c(l);this.#s.set(e,u),this.#s.set(o,u);const c=this.#m(l);return this.#v(s,c),u}addLuminosityFilter(e){let a=this.#s.get(e||"luminosity");if(a)return a;let s,o;if(e?([s]=this.#d([e]),o=`luminosity_${s}`):o="luminosity",a=this.#s.get(o),a)return this.#s.set(e,a),a;const l=`g_${this.#i}_luminosity_map_${this.#o++}`,u=this.#c(l);this.#s.set(e,u),this.#s.set(o,u);const c=this.#m(l);return this.#f(c),e&&this.#v(s,c),u}addHighlightHCMFilter(e,a,s,o,l){const u=`${a}-${s}-${o}-${l}`;let c=this.#h.get(e);if(c?.key===u||(c?(c.filter?.remove(),c.key=u,c.url="none",c.filter=null):(c={key:u,url:"none",filter:null},this.#h.set(e,c)),!a||!s))return c.url;const[d,m]=[a,s].map(this.#y.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),A=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[P,W]=[o,l].map(this.#y.bind(this));A<g&&([g,A,P,W]=[A,g,W,P]),this.#l.style.color="";const me=(De,Xe,qe)=>{const Rs=new Array(256),Vc=(A-g)/qe,So=De/255,Do=(Xe-De)/(255*qe);let eh=0;for(let Ko=0;Ko<=qe;Ko++){const Ge=Math.round(g+Ko*Vc),An=So+Ko*Do;for(let wt=eh;wt<=Ge;wt++)Rs[wt]=An;eh=Ge+1}for(let Ko=eh;Ko<256;Ko++)Rs[Ko]=Rs[eh-1];return Rs.join(",")},ve=`g_${this.#i}_hcm_${e}_filter`,He=c.filter=this.#m(ve);return this.#p(He),this.#g(me(P[0],W[0],5),me(P[1],W[1],5),me(P[2],W[2],5),He),c.url=this.#c(ve),c.url}destroy(e=!1){e&&this.#n?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#t?.clear(),this.#t=null,this.#n?.clear(),this.#n=null,this.#o=0)}#f(e){const a=this.#a.createElementNS(SVG_NS,"feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(a)}#p(e){const a=this.#a.createElementNS(SVG_NS,"feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(a)}#m(e){const a=this.#a.createElementNS(SVG_NS,"filter");return a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("id",e),this.#l.append(a),a}#u(e,a,s){const o=this.#a.createElementNS(SVG_NS,a);o.setAttribute("type","discrete"),o.setAttribute("tableValues",s),e.append(o)}#g(e,a,s,o){const l=this.#a.createElementNS(SVG_NS,"feComponentTransfer");o.append(l),this.#u(l,"feFuncR",e),this.#u(l,"feFuncG",a),this.#u(l,"feFuncB",s)}#v(e,a){const s=this.#a.createElementNS(SVG_NS,"feComponentTransfer");a.append(s),this.#u(s,"feFuncA",e)}#y(e){return this.#l.style.color=e,getRGB(getComputedStyle(this.#l).getPropertyValue("color"))}}class BaseStandardFontDataFactory{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const a=`${this.baseUrl}${e}`;return this._fetch(a).catch(s=>{throw new Error(`Unable to load font data at: ${a}`)})}async _fetch(e){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(e){const a=await fetchData(e,"arraybuffer");return new Uint8Array(a)}}class BaseWasmFactory{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const a=`${this.baseUrl}${e}`;return this._fetch(a).catch(s=>{throw new Error(`Unable to load wasm data at: ${a}`)})}async _fetch(e){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(e){const a=await fetchData(e,"arraybuffer");return new Uint8Array(a)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(t){const a=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(a)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(e,a){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,a)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(e){return node_utils_fetchData(e)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(e){return node_utils_fetchData(e)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(e){return node_utils_fetchData(e)}}const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(t,e){if(!e)return;const a=e[2]-e[0],s=e[3]-e[1],o=new Path2D;o.rect(e[0],e[1],a,s),t.clip(o)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let a;this._type==="axial"?a=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(a=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)a.addColorStop(s[0],s[1]);return a}getPattern(e,a,s,o){let l;if(o===PathType.STROKE||o===PathType.FILL){const u=a.current.getClippedPathBoundingBox(o,getCurrentTransform(e))||[0,0,0,0],c=Math.ceil(u[2]-u[0])||1,d=Math.ceil(u[3]-u[1])||1,m=a.cachedCanvases.getCanvas("pattern",c,d),g=m.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-u[0],-u[1]),s=Util.transform(s,[1,0,0,1,u[0],u[1]]),g.transform(...a.baseTransform),this.matrix&&g.transform(...this.matrix),applyBoundingBox(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),l=e.createPattern(m.canvas,"no-repeat");const A=new DOMMatrix(s);l.setTransform(A)}else applyBoundingBox(e,this._bbox),l=this._createGradient(e);return l}}function drawTriangle(t,e,a,s,o,l,u,c){const d=e.coords,m=e.colors,g=t.data,A=t.width*4;let P;d[a+1]>d[s+1]&&(P=a,a=s,s=P,P=l,l=u,u=P),d[s+1]>d[o+1]&&(P=s,s=o,o=P,P=u,u=c,c=P),d[a+1]>d[s+1]&&(P=a,a=s,s=P,P=l,l=u,u=P);const W=(d[a]+e.offsetX)*e.scaleX,me=(d[a+1]+e.offsetY)*e.scaleY,ve=(d[s]+e.offsetX)*e.scaleX,He=(d[s+1]+e.offsetY)*e.scaleY,De=(d[o]+e.offsetX)*e.scaleX,Xe=(d[o+1]+e.offsetY)*e.scaleY;if(me>=Xe)return;const qe=m[l],Rs=m[l+1],Vc=m[l+2],So=m[u],Do=m[u+1],eh=m[u+2],Ko=m[c],Ge=m[c+1],An=m[c+2],wt=Math.round(me),Bs=Math.round(Xe);let yh,df,Fc,_h,qc,Mh,cf,mf;for(let a1=wt;a1<=Bs;a1++){if(a1<He){const W1=a1<me?0:(me-a1)/(me-He);yh=W-(W-ve)*W1,df=qe-(qe-So)*W1,Fc=Rs-(Rs-Do)*W1,_h=Vc-(Vc-eh)*W1}else{let W1;a1>Xe?W1=1:He===Xe?W1=0:W1=(He-a1)/(He-Xe),yh=ve-(ve-De)*W1,df=So-(So-Ko)*W1,Fc=Do-(Do-Ge)*W1,_h=eh-(eh-An)*W1}let s1;a1<me?s1=0:a1>Xe?s1=1:s1=(me-a1)/(me-Xe),qc=W-(W-De)*s1,Mh=qe-(qe-Ko)*s1,cf=Rs-(Rs-Ge)*s1,mf=Vc-(Vc-An)*s1;const E1=Math.round(Math.min(yh,qc)),T1=Math.round(Math.max(yh,qc));let z1=A*a1+E1*4;for(let W1=E1;W1<=T1;W1++)s1=(yh-W1)/(yh-qc),s1<0?s1=0:s1>1&&(s1=1),g[z1++]=df-(df-Mh)*s1|0,g[z1++]=Fc-(Fc-cf)*s1|0,g[z1++]=_h-(_h-mf)*s1|0,g[z1++]=255}}function drawFigure(t,e,a){const s=e.coords,o=e.colors;let l,u;switch(e.type){case"lattice":const c=e.verticesPerRow,d=Math.floor(s.length/c)-1,m=c-1;for(l=0;l<d;l++){let g=l*c;for(let A=0;A<m;A++,g++)drawTriangle(t,a,s[g],s[g+1],s[g+c],o[g],o[g+1],o[g+c]),drawTriangle(t,a,s[g+c+1],s[g+1],s[g+c],o[g+c+1],o[g+1],o[g+c])}break;case"triangles":for(l=0,u=s.length;l<u;l+=3)drawTriangle(t,a,s[l],s[l+1],s[l+2],o[l],o[l+1],o[l+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,a,s){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-c,g=Math.ceil(this._bounds[3])-d,A=Math.min(Math.ceil(Math.abs(m*e[0]*1.1)),3e3),P=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),W=m/A,me=g/P,ve={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/W,scaleY:1/me},He=A+4,De=P+4,Xe=s.getCanvas("mesh",He,De),qe=Xe.context,Rs=qe.createImageData(A,P);if(a){const So=Rs.data;for(let Do=0,eh=So.length;Do<eh;Do+=4)So[Do]=a[0],So[Do+1]=a[1],So[Do+2]=a[2],So[Do+3]=255}for(const So of this._figures)drawFigure(Rs,So,ve);return qe.putImageData(Rs,2,2),{canvas:Xe.canvas,offsetX:c-2*W,offsetY:d-2*me,scaleX:W,scaleY:me}}isModifyingCurrentTransform(){return!0}getPattern(e,a,s,o){applyBoundingBox(e,this._bbox);const l=new Float32Array(2);if(o===PathType.SHADING)Util.singularValueDecompose2dScale(getCurrentTransform(e),l);else if(this.matrix){Util.singularValueDecompose2dScale(this.matrix,l);const[c,d]=l;Util.singularValueDecompose2dScale(a.baseTransform,l),l[0]*=c,l[1]*=d}else Util.singularValueDecompose2dScale(a.baseTransform,l);const u=this._createMeshCanvas(l,o===PathType.SHADING?null:this._background,a.cachedCanvases);return o!==PathType.SHADING&&(e.setTransform(...a.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(u.offsetX,u.offsetY),e.scale(u.scaleX,u.scaleY),e.createPattern(u.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(t){switch(t[0]){case"RadialAxial":return new RadialAxialShadingPattern(t);case"Mesh":return new MeshShadingPattern(t);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${t[0]}`)}const PaintType={COLORED:1,UNCOLORED:2};class TilingPattern{static MAX_PATTERN_SIZE=3e3;constructor(e,a,s,o){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=a,this.canvasGraphicsFactory=s,this.baseTransform=o}createPatternCanvas(e){const{bbox:a,operatorList:s,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:m}=this;d=Math.abs(d),m=Math.abs(m),info("TilingType: "+l);const g=a[0],A=a[1],P=a[2],W=a[3],me=P-g,ve=W-A,He=new Float32Array(2);Util.singularValueDecompose2dScale(this.matrix,He);const[De,Xe]=He;Util.singularValueDecompose2dScale(this.baseTransform,He);const qe=De*He[0],Rs=Xe*He[1];let Vc=me,So=ve,Do=!1,eh=!1;const Ko=Math.ceil(d*qe),Ge=Math.ceil(m*Rs),An=Math.ceil(me*qe),wt=Math.ceil(ve*Rs);Ko>=An?Vc=d:Do=!0,Ge>=wt?So=m:eh=!0;const Bs=this.getSizeAndScale(Vc,this.ctx.canvas.width,qe),yh=this.getSizeAndScale(So,this.ctx.canvas.height,Rs),df=e.cachedCanvases.getCanvas("pattern",Bs.size,yh.size),Fc=df.context,_h=c.createCanvasGraphics(Fc);if(_h.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(_h,o,u),Fc.translate(-Bs.scale*g,-yh.scale*A),_h.transform(Bs.scale,0,0,yh.scale,0,0),Fc.save(),this.clipBbox(_h,g,A,P,W),_h.baseTransform=getCurrentTransform(_h.ctx),_h.executeOperatorList(s),_h.endDrawing(),Fc.restore(),Do||eh){const qc=df.canvas;Do&&(Vc=d),eh&&(So=m);const Mh=this.getSizeAndScale(Vc,this.ctx.canvas.width,qe),cf=this.getSizeAndScale(So,this.ctx.canvas.height,Rs),mf=Mh.size,a1=cf.size,s1=e.cachedCanvases.getCanvas("pattern-workaround",mf,a1),E1=s1.context,T1=Do?Math.floor(me/d):0,z1=eh?Math.floor(ve/m):0;for(let W1=0;W1<=T1;W1++)for(let m2=0;m2<=z1;m2++)E1.drawImage(qc,mf*W1,a1*m2,mf,a1,0,0,mf,a1);return{canvas:s1.canvas,scaleX:Mh.scale,scaleY:cf.scale,offsetX:g,offsetY:A}}return{canvas:df.canvas,scaleX:Bs.scale,scaleY:yh.scale,offsetX:g,offsetY:A}}getSizeAndScale(e,a,s){const o=Math.max(TilingPattern.MAX_PATTERN_SIZE,a);let l=Math.ceil(e*s);return l>=o?l=o:s=l/e,{scale:s,size:l}}clipBbox(e,a,s,o,l){const u=o-a,c=l-s;e.ctx.rect(a,s,u,c),Util.axialAlignedBoundingBox([a,s,o,l],getCurrentTransform(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,a,s){const o=e.ctx,l=e.current;switch(a){case PaintType.COLORED:const{fillStyle:u,strokeStyle:c}=this.ctx;o.fillStyle=l.fillColor=u,o.strokeStyle=l.strokeColor=c;break;case PaintType.UNCOLORED:o.fillStyle=o.strokeStyle=s,l.fillColor=l.strokeColor=s;break;default:throw new FormatError(`Unsupported paint type: ${a}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,a,s,o){let l=s;o!==PathType.SHADING&&(l=Util.transform(l,a.baseTransform),this.matrix&&(l=Util.transform(l,this.matrix)));const u=this.createPatternCanvas(a);let c=new DOMMatrix(l);c=c.translate(u.offsetX,u.offsetY),c=c.scale(1/u.scaleX,1/u.scaleY);const d=e.createPattern(u.canvas,"repeat");return d.setTransform(c),d}}function convertBlackAndWhiteToRGBA({src:t,srcPos:e=0,dest:a,width:s,height:o,nonBlackColor:l=4294967295,inverseDecode:u=!1}){const c=util_FeatureTest.isLittleEndian?4278190080:255,[d,m]=u?[l,c]:[c,l],g=s>>3,A=s&7,P=t.length;a=new Uint32Array(a.buffer);let W=0;for(let me=0;me<o;me++){for(const He=e+g;e<He;e++){const De=e<P?t[e]:255;a[W++]=De&128?m:d,a[W++]=De&64?m:d,a[W++]=De&32?m:d,a[W++]=De&16?m:d,a[W++]=De&8?m:d,a[W++]=De&4?m:d,a[W++]=De&2?m:d,a[W++]=De&1?m:d}if(A===0)continue;const ve=e<P?t[e++]:255;for(let He=0;He<A;He++)a[W++]=ve&1<<7-He?m:d}return{srcPos:e,destPos:W}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(a,s){e.translate(a,s),this.__originalTranslate(a,s)},t.scale=function(a,s){e.scale(a,s),this.__originalScale(a,s)},t.transform=function(a,s,o,l,u,c){e.transform(a,s,o,l,u,c),this.__originalTransform(a,s,o,l,u,c)},t.setTransform=function(a,s,o,l,u,c){e.setTransform(a,s,o,l,u,c),this.__originalSetTransform(a,s,o,l,u,c)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(a){e.rotate(a),this.__originalRotate(a)},t.clip=function(a){e.clip(a),this.__originalClip(a)},t.moveTo=function(a,s){e.moveTo(a,s),this.__originalMoveTo(a,s)},t.lineTo=function(a,s){e.lineTo(a,s),this.__originalLineTo(a,s)},t.bezierCurveTo=function(a,s,o,l,u,c){e.bezierCurveTo(a,s,o,l,u,c),this.__originalBezierCurveTo(a,s,o,l,u,c)},t.rect=function(a,s,o,l){e.rect(a,s,o,l),this.__originalRect(a,s,o,l)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,a,s){let o;return this.cache[e]!==void 0?(o=this.cache[e],this.canvasFactory.reset(o,a,s)):(o=this.canvasFactory.create(a,s),this.cache[e]=o),o}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const a=this.cache[e];this.canvasFactory.destroy(a),delete this.cache[e]}}}function drawImageAtIntegerCoords(t,e,a,s,o,l,u,c,d,m){const[g,A,P,W,me,ve]=getCurrentTransform(t);if(A===0&&P===0){const Xe=u*g+me,qe=Math.round(Xe),Rs=c*W+ve,Vc=Math.round(Rs),So=(u+d)*g+me,Do=Math.abs(Math.round(So)-qe)||1,eh=(c+m)*W+ve,Ko=Math.abs(Math.round(eh)-Vc)||1;return t.setTransform(Math.sign(g),0,0,Math.sign(W),qe,Vc),t.drawImage(e,a,s,o,l,0,0,Do,Ko),t.setTransform(g,A,P,W,me,ve),[Do,Ko]}if(g===0&&W===0){const Xe=c*P+me,qe=Math.round(Xe),Rs=u*A+ve,Vc=Math.round(Rs),So=(c+m)*P+me,Do=Math.abs(Math.round(So)-qe)||1,eh=(u+d)*A+ve,Ko=Math.abs(Math.round(eh)-Vc)||1;return t.setTransform(0,Math.sign(A),Math.sign(P),0,qe,Vc),t.drawImage(e,a,s,o,l,0,0,Ko,Do),t.setTransform(g,A,P,W,me,ve),[Ko,Do]}t.drawImage(e,a,s,o,l,u,c,d,m);const He=Math.hypot(g,A),De=Math.hypot(P,W);return[He*d,De*m]}class CanvasExtraState{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=FONT_IDENTITY_MATRIX;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=TextRenderingMode.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,a){this.clipBox=new Float32Array([0,0,e,a]),this.minMax=MIN_MAX_INIT.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=PathType.FILL,a=null){const s=this.minMax.slice();if(e===PathType.STROKE){a||unreachable("Stroke bounding box must include transform."),Util.singularValueDecompose2dScale(a,XY);const o=XY[0]*this.lineWidth/2,l=XY[1]*this.lineWidth/2;s[0]-=o,s[1]-=l,s[2]+=o,s[3]+=l}return s}updateClipFromPath(){const e=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(e=PathType.FILL,a=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(e,a))}}function putBinaryImageData(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const a=e.height,s=e.width,o=a%FULL_CHUNK_HEIGHT,l=(a-o)/FULL_CHUNK_HEIGHT,u=o===0?l:l+1,c=t.createImageData(s,FULL_CHUNK_HEIGHT);let d=0,m;const g=e.data,A=c.data;let P,W,me,ve;if(e.kind===util_ImageKind.GRAYSCALE_1BPP){const He=g.byteLength,De=new Uint32Array(A.buffer,0,A.byteLength>>2),Xe=De.length,qe=s+7>>3,Rs=4294967295,Vc=util_FeatureTest.isLittleEndian?4278190080:255;for(P=0;P<u;P++){for(me=P<l?FULL_CHUNK_HEIGHT:o,m=0,W=0;W<me;W++){const So=He-d;let Do=0;const eh=So>qe?s:So*8-7,Ko=eh&-8;let Ge=0,An=0;for(;Do<Ko;Do+=8)An=g[d++],De[m++]=An&128?Rs:Vc,De[m++]=An&64?Rs:Vc,De[m++]=An&32?Rs:Vc,De[m++]=An&16?Rs:Vc,De[m++]=An&8?Rs:Vc,De[m++]=An&4?Rs:Vc,De[m++]=An&2?Rs:Vc,De[m++]=An&1?Rs:Vc;for(;Do<eh;Do++)Ge===0&&(An=g[d++],Ge=128),De[m++]=An&Ge?Rs:Vc,Ge>>=1}for(;m<Xe;)De[m++]=0;t.putImageData(c,0,P*FULL_CHUNK_HEIGHT)}}else if(e.kind===util_ImageKind.RGBA_32BPP){for(W=0,ve=s*FULL_CHUNK_HEIGHT*4,P=0;P<l;P++)A.set(g.subarray(d,d+ve)),d+=ve,t.putImageData(c,0,W),W+=FULL_CHUNK_HEIGHT;P<u&&(ve=s*o*4,A.set(g.subarray(d,d+ve)),t.putImageData(c,0,W))}else if(e.kind===util_ImageKind.RGB_24BPP)for(me=FULL_CHUNK_HEIGHT,ve=s*me,P=0;P<u;P++){for(P>=l&&(me=o,ve=s*me),m=0,W=ve;W--;)A[m++]=g[d++],A[m++]=g[d++],A[m++]=g[d++],A[m++]=255;t.putImageData(c,0,P*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${e.kind}`)}function putBinaryImageMask(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const a=e.height,s=e.width,o=a%FULL_CHUNK_HEIGHT,l=(a-o)/FULL_CHUNK_HEIGHT,u=o===0?l:l+1,c=t.createImageData(s,FULL_CHUNK_HEIGHT);let d=0;const m=e.data,g=c.data;for(let A=0;A<u;A++){const P=A<l?FULL_CHUNK_HEIGHT:o;({srcPos:d}=convertBlackAndWhiteToRGBA({src:m,srcPos:d,dest:g,width:s,height:P,nonBlackColor:0})),t.putImageData(c,0,A*FULL_CHUNK_HEIGHT)}}function copyCtxState(t,e){const a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of a)t[s]!==void 0&&(e[s]=t[s]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function resetCtxToDefault(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function getImageSmoothingEnabled(t,e){if(e)return!0;Util.singularValueDecompose2dScale(t,XY);const a=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=a&&XY[1]<=a}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};class CanvasGraphics{constructor(e,a,s,o,l,{optionalContentConfig:u,markedContentStack:c=null},d,m){this.ctx=e,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=s,this.canvasFactory=o,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=u,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=m,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,a=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):a}beginDrawing({transform:e,viewport:a,transparency:s=!1,background:o=null}){const l=this.ctx.canvas.width,u=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=o||"#ffffff",this.ctx.fillRect(0,0,l,u),this.ctx.fillStyle=c,s){const d=this.cachedCanvases.getCanvas("transparent",l,u);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...a.transform),this.viewportScale=a.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(e,a,s,o){const l=e.argsArray,u=e.fnArray;let c=a||0;const d=l.length;if(d===c)return c;const m=d-c>EXECUTION_STEPS&&typeof s=="function",g=m?Date.now()+EXECUTION_TIME:0;let A=0;const P=this.commonObjs,W=this.objs;let me;for(;;){if(o!==void 0&&c===o.nextBreakPoint)return o.breakIt(c,s),c;if(me=u[c],me!==OPS.dependency)this[me].apply(this,l[c]);else for(const ve of l[c]){const He=ve.startsWith("g_")?P:W;if(!He.has(ve))return He.get(ve,s),c}if(c++,c===d)return c;if(m&&++A>EXECUTION_STEPS){if(Date.now()>g)return s(),c;A=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const a of e.values())typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&(a.width=a.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const a=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=a}}}_scaleImage(e,a){const s=e.width??e.displayWidth,o=e.height??e.displayHeight;let l=Math.max(Math.hypot(a[0],a[1]),1),u=Math.max(Math.hypot(a[2],a[3]),1),c=s,d=o,m="prescale1",g,A;for(;l>2&&c>1||u>2&&d>1;){let P=c,W=d;l>2&&c>1&&(P=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),l/=c/P),u>2&&d>1&&(W=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,u/=d/W),g=this.cachedCanvases.getCanvas(m,P,W),A=g.context,A.clearRect(0,0,P,W),A.drawImage(e,0,0,c,d,0,0,P,W),e=g.canvas,c=P,d=W,m=m==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e){const a=this.ctx,{width:s,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,c=getCurrentTransform(a);let d,m,g,A;if((e.bitmap||e.data)&&e.count>1){const Ko=e.bitmap||e.data.buffer;m=JSON.stringify(u?c:[c.slice(0,4),l]),d=this._cachedBitmapsMap.get(Ko),d||(d=new Map,this._cachedBitmapsMap.set(Ko,d));const Ge=d.get(m);if(Ge&&!u){const An=Math.round(Math.min(c[0],c[2])+c[4]),wt=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:Ge,offsetX:An,offsetY:wt}}g=Ge}g||(A=this.cachedCanvases.getCanvas("maskCanvas",s,o),putBinaryImageMask(A.context,e));let P=Util.transform(c,[1/s,0,0,-1/o,0,0]);P=Util.transform(P,[1,0,0,1,0,-o]);const W=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,s,o],P,W);const[me,ve,He,De]=W,Xe=Math.round(He-me)||1,qe=Math.round(De-ve)||1,Rs=this.cachedCanvases.getCanvas("fillCanvas",Xe,qe),Vc=Rs.context,So=me,Do=ve;Vc.translate(-So,-Do),Vc.transform(...P),g||(g=this._scaleImage(A.canvas,getCurrentTransformInverse(Vc)),g=g.img,d&&u&&d.set(m,g)),Vc.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(Vc),e.interpolate),drawImageAtIntegerCoords(Vc,g,0,0,g.width,g.height,0,0,s,o),Vc.globalCompositeOperation="source-in";const eh=Util.transform(getCurrentTransformInverse(Vc),[1,0,0,1,-So,-Do]);return Vc.fillStyle=u?l.getPattern(a,this,eh,PathType.FILL):l,Vc.fillRect(0,0,s,o),d&&!u&&(this.cachedCanvases.delete("fillCanvas"),d.set(m,Rs.canvas)),{canvas:Rs.canvas,offsetX:Math.round(So),offsetY:Math.round(Do)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=LINE_CAP_STYLES[e]}setLineJoin(e){this.ctx.lineJoin=LINE_JOIN_STYLES[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,a){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=a)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[a,s]of e)switch(a){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,a=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(s,e,a);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,l),mirrorContextOperations(l,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const a=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,a,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,a,s,o){const l=o[0],u=o[1],c=o[2]-l,d=o[3]-u;c===0||d===0||(this.genericComposeSMask(a.context,s,c,d,a.subtype,a.backdrop,a.transferMap,l,u,a.offsetX,a.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,a,s,o,l,u,c,d,m,g,A){let P=e.canvas,W=d-g,me=m-A;if(u)if(W<0||me<0||W+s>P.width||me+o>P.height){const He=this.cachedCanvases.getCanvas("maskExtension",s,o),De=He.context;De.drawImage(P,-W,-me),De.globalCompositeOperation="destination-atop",De.fillStyle=u,De.fillRect(0,0,s,o),De.globalCompositeOperation="source-over",P=He.canvas,W=me=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const He=new Path2D;He.rect(W,me,s,o),e.clip(He),e.globalCompositeOperation="destination-atop",e.fillStyle=u,e.fillRect(W,me,s,o),e.restore()}a.save(),a.globalAlpha=1,a.setTransform(1,0,0,1,0,0),l==="Alpha"&&c?a.filter=this.filterFactory.addAlphaFilter(c):l==="Luminosity"&&(a.filter=this.filterFactory.addLuminosityFilter(c));const ve=new Path2D;ve.rect(d,m,s,o),a.clip(ve),a.globalCompositeOperation="destination-in",a.drawImage(P,W,me,s,o,d,m,s,o),a.restore()}save(){this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,a,s,o,l,u){this.ctx.transform(e,a,s,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,a,s){let[o]=a;if(!s){o||=a[0]=new Path2D,this[e](o);return}if(!(o instanceof Path2D)){const l=a[0]=new Path2D;for(let u=0,c=o.length;u<c;)switch(o[u++]){case DrawOPS.moveTo:l.moveTo(o[u++],o[u++]);break;case DrawOPS.lineTo:l.lineTo(o[u++],o[u++]);break;case DrawOPS.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case DrawOPS.closePath:l.closePath();break;default:warn(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}Util.axialAlignedBoundingBox(s,getCurrentTransform(this.ctx),this.current.minMax),this[e](o)}closePath(){this.ctx.closePath()}stroke(e,a=!0){const s=this.ctx,o=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=o.getPattern(s,this,getCurrentTransformInverse(s),PathType.STROKE),l){const u=new Path2D;u.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=u}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);a&&this.consumePath(e,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,a=!0){const s=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const d=o.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=o.getPattern(s,this,getCurrentTransformInverse(s),PathType.FILL),d){const m=new Path2D;m.addPath(e,s.getTransform().invertSelf().multiplySelf(d)),e=m}u=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),u&&s.restore(),a&&this.consumePath(e,c)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,a=this.ctx;if(e===void 0)return;const s=new Path2D,o=a.getTransform().invertSelf();for(const{transform:l,x:u,y:c,fontSize:d,path:m}of e)s.addPath(m,new DOMMatrix(l).preMultiplySelf(o).translate(u,c).scale(d,-d));a.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,a){const s=this.commonObjs.get(e),o=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=s.fontMatrix||FONT_IDENTITY_MATRIX,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+e),a<0?(a=-a,o.fontDirection=-1):o.fontDirection=1,this.current.font=s,this.current.fontSize=a,s.isType3Font)return;const l=s.loadedName||"sans-serif",u=s.systemFontInfo?.css||`"${l}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const d=s.italic?"italic":"normal";let m=a;a<MIN_FONT_SIZE?m=MIN_FONT_SIZE:a>MAX_FONT_SIZE&&(m=MAX_FONT_SIZE),this.current.fontSizeScale=a/m,this.ctx.font=`${d} ${c} ${m}px ${u}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,a){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=a}setLeadingMoveText(e,a){this.setLeading(-a),this.moveText(e,a)}setTextMatrix(e){const{current:a}=this;a.textMatrix=e,a.textMatrixScale=Math.hypot(e[0],e[1]),a.x=a.lineX=0,a.y=a.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#r(e,a,s){const o=new Path2D;return o.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(a)),o}paintChar(e,a,s,o,l){const u=this.ctx,c=this.current,d=c.font,m=c.textRenderingMode,g=c.fontSize/c.fontSizeScale,A=m&TextRenderingMode.FILL_STROKE_MASK,P=!!(m&TextRenderingMode.ADD_TO_PATH_FLAG),W=c.patternFill&&!d.missingFile,me=c.patternStroke&&!d.missingFile;let ve;if((d.disableFontFace||P||W||me)&&(ve=d.getPathGenerator(this.commonObjs,e)),d.disableFontFace||W||me){u.save(),u.translate(a,s),u.scale(g,-g);let He;if((A===TextRenderingMode.FILL||A===TextRenderingMode.FILL_STROKE)&&(o?(He=u.getTransform(),u.setTransform(...o),u.fill(this.#r(ve,He,o))):u.fill(ve)),A===TextRenderingMode.STROKE||A===TextRenderingMode.FILL_STROKE)if(l){He||=u.getTransform(),u.setTransform(...l);const{a:De,b:Xe,c:qe,d:Rs}=He,Vc=Util.inverseTransform(l),So=Util.transform([De,Xe,qe,Rs,0,0],Vc);Util.singularValueDecompose2dScale(So,XY),u.lineWidth*=Math.max(XY[0],XY[1])/g,u.stroke(this.#r(ve,He,l))}else u.lineWidth/=g,u.stroke(ve);u.restore()}else(A===TextRenderingMode.FILL||A===TextRenderingMode.FILL_STROKE)&&u.fillText(e,a,s),(A===TextRenderingMode.STROKE||A===TextRenderingMode.FILL_STROKE)&&u.strokeText(e,a,s);P&&(this.pendingTextPaths||=[]).push({transform:getCurrentTransform(u),x:a,y:s,fontSize:g,path:ve})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const a=e.getImageData(0,0,10,10).data;let s=!1;for(let o=3;o<a.length;o+=4)if(a[o]>0&&a[o]<255){s=!0;break}return shadow(this,"isFontSubpixelAAEnabled",s)}showText(e){const a=this.current,s=a.font;if(s.isType3Font)return this.showType3Text(e);const o=a.fontSize;if(o===0)return;const l=this.ctx,u=a.fontSizeScale,c=a.charSpacing,d=a.wordSpacing,m=a.fontDirection,g=a.textHScale*m,A=e.length,P=s.vertical,W=P?1:-1,me=s.defaultVMetrics,ve=o*a.fontMatrix[0],He=a.textRenderingMode===TextRenderingMode.FILL&&!s.disableFontFace&&!a.patternFill;l.save(),a.textMatrix&&l.transform(...a.textMatrix),l.translate(a.x,a.y+a.textRise),m>0?l.scale(g,-1):l.scale(g,1);let De,Xe;if(a.patternFill){l.save();const Do=a.fillColor.getPattern(l,this,getCurrentTransformInverse(l),PathType.FILL);De=getCurrentTransform(l),l.restore(),l.fillStyle=Do}if(a.patternStroke){l.save();const Do=a.strokeColor.getPattern(l,this,getCurrentTransformInverse(l),PathType.STROKE);Xe=getCurrentTransform(l),l.restore(),l.strokeStyle=Do}let qe=a.lineWidth;const Rs=a.textMatrixScale;if(Rs===0||qe===0){const Do=a.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(Do===TextRenderingMode.STROKE||Do===TextRenderingMode.FILL_STROKE)&&(qe=this.getSinglePixelWidth())}else qe/=Rs;if(u!==1&&(l.scale(u,u),qe/=u),l.lineWidth=qe,s.isInvalidPDFjsFont){const Do=[];let eh=0;for(const Ko of e)Do.push(Ko.unicode),eh+=Ko.width;l.fillText(Do.join(""),0,0),a.x+=eh*ve*g,l.restore(),this.compose();return}let Vc=0,So;for(So=0;So<A;++So){const Do=e[So];if(typeof Do=="number"){Vc+=W*Do*o/1e3;continue}let eh=!1;const Ko=(Do.isSpace?d:0)+c,Ge=Do.fontChar,An=Do.accent;let wt,Bs,yh=Do.width;if(P){const Fc=Do.vmetric||me,_h=-(Do.vmetric?Fc[1]:yh*.5)*ve,qc=Fc[2]*ve;yh=Fc?-Fc[0]:yh,wt=_h/u,Bs=(Vc+qc)/u}else wt=Vc/u,Bs=0;if(s.remeasure&&yh>0){const Fc=l.measureText(Ge).width*1e3/o*u;if(yh<Fc&&this.isFontSubpixelAAEnabled){const _h=yh/Fc;eh=!0,l.save(),l.scale(_h,1),wt/=_h}else yh!==Fc&&(wt+=(yh-Fc)/2e3*o/u)}if(this.contentVisible&&(Do.isInFont||s.missingFile)){if(He&&!An)l.fillText(Ge,wt,Bs);else if(this.paintChar(Ge,wt,Bs,De,Xe),An){const Fc=wt+o*An.offset.x/u,_h=Bs-o*An.offset.y/u;this.paintChar(An.fontChar,Fc,_h,De,Xe)}}const df=P?yh*ve-Ko*m:yh*ve+Ko*m;Vc+=df,eh&&l.restore()}P?a.y-=Vc:a.x+=Vc*g,l.restore(),this.compose()}showType3Text(e){const a=this.ctx,s=this.current,o=s.font,l=s.fontSize,u=s.fontDirection,c=o.vertical?1:-1,d=s.charSpacing,m=s.wordSpacing,g=s.textHScale*u,A=s.fontMatrix||FONT_IDENTITY_MATRIX,P=e.length,W=s.textRenderingMode===TextRenderingMode.INVISIBLE;let me,ve,He,De;if(!(W||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),s.textMatrix&&a.transform(...s.textMatrix),a.translate(s.x,s.y+s.textRise),a.scale(g,u),me=0;me<P;++me){if(ve=e[me],typeof ve=="number"){De=c*ve*l/1e3,this.ctx.translate(De,0),s.x+=De*g;continue}const Xe=(ve.isSpace?m:0)+d,qe=o.charProcOperatorList[ve.operatorListId];qe?this.contentVisible&&(this.save(),a.scale(l,l),a.transform(...A),this.executeOperatorList(qe),this.restore()):warn(`Type3 character "${ve.operatorListId}" is not available.`);const Rs=[ve.width,0];Util.applyTransform(Rs,A),He=Rs[0]*l+Xe,a.translate(He,0),s.x+=He*g}a.restore()}}setCharWidth(e,a){}setCharWidthAndBounds(e,a,s,o,l,u){const c=new Path2D;c.rect(s,o,l-s,u-o),this.ctx.clip(c),this.endPath()}getColorN_Pattern(e){let a;if(e[0]==="TilingPattern"){const s=this.baseTransform||getCurrentTransform(this.ctx),o={createCanvasGraphics:l=>new CanvasGraphics(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};a=new TilingPattern(e,this.ctx,o,s)}else a=this._getPattern(e[1],e[2]);return a}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,a=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=getShadingPattern(this.getObject(e)),this.cachedPatterns.set(e,s)),a&&(s.matrix=a),s}shadingFill(e){if(!this.contentVisible)return;const a=this.ctx;this.save();const s=this._getPattern(e);a.fillStyle=s.getPattern(a,this,getCurrentTransformInverse(a),PathType.SHADING);const o=getCurrentTransformInverse(a);if(o){const{width:l,height:u}=a.canvas,c=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,l,u],o,c);const[d,m,g,A]=c;this.ctx.fillRect(d,m,g-d,A-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(e,a){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=getCurrentTransform(this.ctx),a)){Util.axialAlignedBoundingBox(a,this.baseTransform,this.current.minMax);const[s,o,l,u]=a,c=new Path2D;c.rect(s,o,l-s,u-o),this.ctx.clip(c),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;e.isolated||info("TODO: Support non-isolated groups."),e.knockout&&warn("Knockout groups not supported.");const s=getCurrentTransform(a);if(e.matrix&&a.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox(e.bbox,getCurrentTransform(a),o);const l=[0,0,a.canvas.width,a.canvas.height];o=Util.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),c=Math.floor(o[1]),d=Math.max(Math.ceil(o[2])-u,1),m=Math.max(Math.ceil(o[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,m]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const A=this.cachedCanvases.getCanvas(g,d,m),P=A.context;P.translate(-u,-c),P.transform(...s);let W=new Path2D;const[me,ve,He,De]=e.bbox;if(W.rect(me,ve,He-me,De-ve),e.matrix){const Xe=new Path2D;Xe.addPath(W,new DOMMatrix(e.matrix)),W=Xe}P.clip(W),e.smask?this.smaskStack.push({canvas:A.canvas,context:P,offsetX:u,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(a.setTransform(1,0,0,1,0,0),a.translate(u,c),a.save()),copyCtxState(a,P),this.ctx=P,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const o=getCurrentTransform(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...o);const l=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],o,l),this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,a,s,o,l){if(this.#e(),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),a){const u=a[2]-a[0],c=a[3]-a[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=a[0],s[5]-=a[1],a=a.slice(),a[0]=a[1]=0,a[2]=u,a[3]=c,Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:d}=this,m=Math.ceil(u*this.outputScaleX*d),g=Math.ceil(c*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(m,g);const{canvas:A,context:P}=this.annotationCanvas;this.annotationCanvasMap.set(e,A),this.annotationCanvas.savedCtx=this.ctx,this.ctx=P,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,c*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath();const d=new Path2D;d.rect(a[0],a[1],u,c),this.ctx.clip(d)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...o)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const a=e.count;e=this.getObject(e.data,e),e.count=a;const s=this.ctx,o=this._createMaskCanvas(e),l=o.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(l,o.offsetX,o.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,a,s=0,o=0,l,u){if(!this.contentVisible)return;e=this.getObject(e.data,e);const c=this.ctx;c.save();const d=getCurrentTransform(c);c.transform(a,s,o,l,0,0);const m=this._createMaskCanvas(e);c.setTransform(1,0,0,1,m.offsetX-d[4],m.offsetY-d[5]);for(let g=0,A=u.length;g<A;g+=2){const P=Util.transform(d,[a,s,o,l,u[g],u[g+1]]);c.drawImage(m.canvas,P[4],P[5])}c.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const a=this.ctx,s=this.current.fillColor,o=this.current.patternFill;for(const l of e){const{data:u,width:c,height:d,transform:m}=l,g=this.cachedCanvases.getCanvas("maskCanvas",c,d),A=g.context;A.save();const P=this.getObject(u,l);putBinaryImageMask(A,P),A.globalCompositeOperation="source-in",A.fillStyle=o?s.getPattern(A,this,getCurrentTransformInverse(a),PathType.FILL):s,A.fillRect(0,0,c,d),A.restore(),a.save(),a.transform(...m),a.scale(1,-1),drawImageAtIntegerCoords(a,g.canvas,0,0,c,d,0,-1,1,1),a.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(a)}paintImageXObjectRepeat(e,a,s,o){if(!this.contentVisible)return;const l=this.getObject(e);if(!l){warn("Dependent image isn't ready yet");return}const u=l.width,c=l.height,d=[];for(let m=0,g=o.length;m<g;m+=2)d.push({transform:[a,0,0,s,o[m],o[m+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(l,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:a,width:s,height:o}=e,l=this.cachedCanvases.getCanvas("inlineImage",s,o),u=l.context;return u.filter=this.current.transferMaps,u.drawImage(a,0,0),u.filter="none",l.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const a=e.width,s=e.height,o=this.ctx;this.save();const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/a,-1/s);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const m=this.cachedCanvases.getCanvas("inlineImage",a,s).context;putBinaryImageData(m,e),u=this.applyTransferMapsToCanvas(m)}const c=this._scaleImage(u,getCurrentTransformInverse(o));o.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(o),e.interpolate),drawImageAtIntegerCoords(o,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,a,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,a){if(!this.contentVisible)return;const s=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,u=e.height,d=this.cachedCanvases.getCanvas("inlineImage",l,u).context;putBinaryImageData(d,e),o=this.applyTransferMapsToCanvas(d)}for(const l of a)s.save(),s.transform(...l.transform),s.scale(1,-1),drawImageAtIntegerCoords(s,o,l.x,l.y,l.w,l.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,a){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,a){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(a)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,a){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const o=this.ctx;this.pendingClip&&(s||(this.pendingClip===EO_CLIP?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=getCurrentTransform(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const a=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),o=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,o)/a}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a,b:s,c:o,d:l}=this.ctx.getTransform();let u,c;if(s===0&&o===0){const d=Math.abs(a),m=Math.abs(l);if(d===m)if(e===0)u=c=1/d;else{const g=d*e;u=c=g<1?1/g:1}else if(e===0)u=1/d,c=1/m;else{const g=d*e,A=m*e;u=g<1?1/g:1,c=A<1?1/A:1}}else{const d=Math.abs(a*l-s*o),m=Math.hypot(a,s),g=Math.hypot(o,l);if(e===0)u=g/d,c=m/d;else{const A=e*d;u=g>A?g/A:1,c=m>A?m/A:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,a){const{ctx:s,current:{lineWidth:o}}=this,[l,u]=this.getScaleForStroking();if(l===u){s.lineWidth=(o||1)*l,s.stroke(e);return}const c=s.getLineDash();a&&s.save(),s.scale(l,u),SCALE_MATRIX.a=1/l,SCALE_MATRIX.d=1/u;const d=new Path2D;if(d.addPath(e,SCALE_MATRIX),c.length>0){const m=Math.max(l,u);s.setLineDash(c.map(g=>g/m)),s.lineDashOffset/=m}s.lineWidth=o||1,s.stroke(d),a&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const t in OPS)CanvasGraphics.prototype[t]!==void 0&&(CanvasGraphics.prototype[OPS[t]]=CanvasGraphics.prototype[t]);class GlobalWorkerOptions{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class Metadata{#e;#t;constructor({parsedData:e,rawData:a}){this.#e=e,this.#t=a}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const INTERNAL=Symbol("INTERNAL");class OptionalContentGroup{#e=!1;#t=!1;#r=!1;#i=!0;constructor(e,{name:a,intent:s,usage:o,rbGroups:l}){this.#e=!!(e&RenderingIntentFlag.DISPLAY),this.#t=!!(e&RenderingIntentFlag.PRINT),this.name=a,this.intent=s,this.usage=o,this.rbGroups=l}get visible(){if(this.#r)return this.#i;if(!this.#i)return!1;const{print:e,view:a}=this.usage;return this.#e?a?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,a,s=!1){e!==INTERNAL&&unreachable("Internal method `_setVisible` called."),this.#r=s,this.#i=a}}class OptionalContentConfig{#e=null;#t=new Map;#r=null;#i=null;constructor(e,a=RenderingIntentFlag.DISPLAY){if(this.renderingIntent=a,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(const s of e.groups)this.#t.set(s.id,new OptionalContentGroup(a,s));if(e.baseState==="OFF")for(const s of this.#t.values())s._setVisible(INTERNAL,!1);for(const s of e.on)this.#t.get(s)._setVisible(INTERNAL,!0);for(const s of e.off)this.#t.get(s)._setVisible(INTERNAL,!1);this.#r=this.getHash()}}#a(e){const a=e.length;if(a<2)return!0;const s=e[0];for(let o=1;o<a;o++){const l=e[o];let u;if(Array.isArray(l))u=this.#a(l);else if(this.#t.has(l))u=this.#t.get(l).visible;else return warn(`Optional content group not found: ${l}`),!0;switch(s){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return s==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return info("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(warn(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const a of e.ids){if(!this.#t.has(a))return warn(`Optional content group not found: ${a}`),!0;if(this.#t.get(a).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const a of e.ids){if(!this.#t.has(a))return warn(`Optional content group not found: ${a}`),!0;if(!this.#t.get(a).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const a of e.ids){if(!this.#t.has(a))return warn(`Optional content group not found: ${a}`),!0;if(!this.#t.get(a).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const a of e.ids){if(!this.#t.has(a))return warn(`Optional content group not found: ${a}`),!0;if(this.#t.get(a).visible)return!1}return!0}return warn(`Unknown optional content policy ${e.policy}.`),!0}return warn(`Unknown group type ${e.type}.`),!0}setVisibility(e,a=!0,s=!0){const o=this.#t.get(e);if(!o){warn(`Optional content group not found: ${e}`);return}if(s&&a&&o.rbGroups.length)for(const l of o.rbGroups)for(const u of l)u!==e&&this.#t.get(u)?._setVisible(INTERNAL,!1,!0);o._setVisible(INTERNAL,!!a,!0),this.#e=null}setOCGState({state:e,preserveRB:a}){let s;for(const o of e){switch(o){case"ON":case"OFF":case"Toggle":s=o;continue}const l=this.#t.get(o);if(l)switch(s){case"ON":this.setVisibility(o,!0,a);break;case"OFF":this.setVisibility(o,!1,a);break;case"Toggle":this.setVisibility(o,!l.visible,a);break}}this.#e=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new MurmurHash3_64;for(const[a,s]of this.#t)e.update(`${a}:${s.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class PDFDataTransportStream{constructor(e,{disableRange:a=!1,disableStream:s=!1}){assert(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:o,initialData:l,progressiveDone:u,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=c,l?.length>0){const d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!a,this._contentLength=o,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,m)=>{this._onReceiveData({begin:d,chunk:m})}),e.addProgressListener((d,m)=>{this._onProgress({loaded:d,total:m})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:a}){const s=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const o=this._rangeReaders.some(function(l){return l._begin!==e?!1:(l._enqueue(s),!0)});assert(o,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const a=this._rangeReaders.indexOf(e);a>=0&&this._rangeReaders.splice(a,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,a){if(a<=this._progressiveDataLength)return null;const s=new PDFDataTransportStreamRangeReader(this,e,a);return this._pdfDataRangeTransport.requestDataRange(e,a),this._rangeReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const a of this._rangeReaders.slice(0))a.cancel(e);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(e,a,s=!1,o=null){this._stream=e,this._done=s||!1,this._filename=isPdfFile(o)?o:null,this._queuedChunks=a||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(e,a,s){this._stream=e,this._begin=a,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(t){let e=!0,a=s("filename\\*","i").exec(t);if(a){a=a[1];let g=c(a);return g=unescape(g),g=d(g),g=m(g),l(g)}if(a=u(t),a){const g=m(a);return l(g)}if(a=s("filename","i").exec(t),a){a=a[1];let g=c(a);return g=m(g),l(g)}function s(g,A){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',A)}function o(g,A){if(g){if(!/^[\x00-\xFF]+$/.test(A))return A;try{const P=new TextDecoder(g,{fatal:!0}),W=stringToBytes(A);A=P.decode(W),e=!1}catch{}}return A}function l(g){return e&&/[\x80-\xff]/.test(g)&&(g=o("utf-8",g),e&&(g=o("iso-8859-1",g))),g}function u(g){const A=[];let P;const W=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(P=W.exec(g))!==null;){let[,ve,He,De]=P;if(ve=parseInt(ve,10),ve in A){if(ve===0)break;continue}A[ve]=[He,De]}const me=[];for(let ve=0;ve<A.length&&ve in A;++ve){let[He,De]=A[ve];De=c(De),He&&(De=unescape(De),ve===0&&(De=d(De))),me.push(De)}return me.join("")}function c(g){if(g.startsWith('"')){const A=g.slice(1).split('\\"');for(let P=0;P<A.length;++P){const W=A[P].indexOf('"');W!==-1&&(A[P]=A[P].slice(0,W),A.length=P+1),A[P]=A[P].replaceAll(/\\(.)/g,"$1")}g=A.join('"')}return g}function d(g){const A=g.indexOf("'");if(A===-1)return g;const P=g.slice(0,A),me=g.slice(A+1).replace(/^[^']*'/,"");return o(P,me)}function m(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(A,P,W,me){if(W==="q"||W==="Q")return me=me.replaceAll("_"," "),me=me.replaceAll(/=([0-9a-fA-F]{2})/g,function(ve,He){return String.fromCharCode(parseInt(He,16))}),o(P,me);try{me=atob(me)}catch{}return o(P,me)})}return""}function createHeaders(t,e){const a=new Headers;if(!t||!e||typeof e!="object")return a;for(const s in e){const o=e[s];o!==void 0&&a.append(s,o)}return a}function getResponseOrigin(t){return URL.parse(t)?.origin??null}function validateRangeRequestCapabilities({responseHeaders:t,isHttp:e,rangeChunkSize:a,disableRange:s}){const o={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(t.get("Content-Length"),10);return!Number.isInteger(l)||(o.suggestedLength=l,l<=2*a)||s||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(o.allowRangeRequests=!0),o}function extractFilenameFromHeader(t){const e=t.get("Content-Disposition");if(e){let a=getFilenameFromContentDispositionHeader(e);if(a.includes("%"))try{a=decodeURIComponent(a)}catch{}if(isPdfFile(a))return a}return null}function createResponseError(t,e){return new ResponseException(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function validateResponseStatus(t){return t===200||t===206}function createFetchOptions(t,e,a){return{method:"GET",headers:t,signal:a.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(warn(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class PDFFetchStream{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=createHeaders(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(e,a){if(a<=this._progressiveDataLength)return null;const s=new PDFFetchStreamRangeReader(this,e,a);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const a of this._rangeRequestReaders.slice(0))a.cancel(e)}}class PDFFetchStreamReader{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const a=e.source;this._withCredentials=a.withCredentials||!1,this._contentLength=a.length,this._headersCapability=Promise.withResolvers(),this._disableRange=a.disableRange||!1,this._rangeChunkSize=a.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!a.disableStream,this._isRangeSupported=!a.disableRange;const s=new Headers(e.headers),o=a.url;fetch(o,createFetchOptions(s,this._withCredentials,this._abortController)).then(l=>{if(e._responseOrigin=getResponseOrigin(l.url),!validateResponseStatus(l.status))throw createResponseError(l.status,o);this._reader=l.body.getReader(),this._headersCapability.resolve();const u=l.headers,{allowRangeRequests:c,suggestedLength:d}=validateRangeRequestCapabilities({responseHeaders:u,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=extractFilenameFromHeader(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:a}=await this._reader.read();return a?{value:e,done:a}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(e,a,s){this._stream=e,this._reader=null,this._loaded=0;const o=e.source;this._withCredentials=o.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!o.disableStream,this._abortController=new AbortController;const l=new Headers(e.headers);l.append("Range",`bytes=${a}-${s-1}`);const u=o.url;fetch(u,createFetchOptions(l,this._withCredentials,this._abortController)).then(c=>{const d=getResponseOrigin(c.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!validateResponseStatus(c.status))throw createResponseError(c.status,u);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:a}=await this._reader.read();return a?{value:e,done:a}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:getArrayBuffer(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(t){const e=t.response;return typeof e!="string"?e:stringToBytes(e).buffer}class NetworkManager{_responseOrigin=null;constructor({url:e,httpHeaders:a,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=createHeaders(this.isHttp,a),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const a=new XMLHttpRequest,s=this.currXhrId++,o=this.pendingRequests[s]={xhr:a};a.open("GET",this.url),a.withCredentials=this.withCredentials;for(const[l,u]of this.headers)a.setRequestHeader(l,u);return this.isHttp&&"begin"in e&&"end"in e?(a.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),o.expectedStatus=PARTIAL_CONTENT_RESPONSE):o.expectedStatus=OK_RESPONSE,a.responseType="arraybuffer",assert(e.onError,"Expected `onError` callback to be provided."),a.onerror=()=>{e.onError(a.status)},a.onreadystatechange=this.onStateChange.bind(this,s),a.onprogress=this.onProgress.bind(this,s),o.onHeadersReceived=e.onHeadersReceived,o.onDone=e.onDone,o.onError=e.onError,o.onProgress=e.onProgress,a.send(null),s}onProgress(e,a){const s=this.pendingRequests[e];s&&s.onProgress?.(a)}onStateChange(e,a){const s=this.pendingRequests[e];if(!s)return;const o=s.xhr;if(o.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),o.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],o.status===0&&this.isHttp){s.onError(o.status);return}const l=o.status||OK_RESPONSE;if(!(l===OK_RESPONSE&&s.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&l!==s.expectedStatus){s.onError(o.status);return}const c=network_getArrayBuffer(o);if(l===PARTIAL_CONTENT_RESPONSE){const d=o.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);m?s.onDone({begin:parseInt(m[1],10),chunk:c}):(warn('Missing or invalid "Content-Range" header.'),s.onError(0))}else c?s.onDone({begin:0,chunk:c}):s.onError(o.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const a=this.pendingRequests[e].xhr;delete this.pendingRequests[e],a.abort()}}class PDFNetworkStream{constructor(e){this._source=e,this._manager=new NetworkManager(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const a=this._rangeRequestReaders.indexOf(e);a>=0&&this._rangeRequestReaders.splice(a,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(e,a){const s=new PDFNetworkStreamRangeRequestReader(this._manager,e,a);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const a of this._rangeRequestReaders.slice(0))a.cancel(e)}}class PDFNetworkStreamFullRequestReader{constructor(e,a){this._manager=e,this._url=a.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=a.disableRange||!1,this._contentLength=a.length,this._rangeChunkSize=a.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,a=this._manager.getRequestXhr(e);this._manager._responseOrigin=getResponseOrigin(a.responseURL);const s=a.getAllResponseHeaders(),o=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...m]=c.split(": ");return[d,m.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:u}=validateRangeRequestCapabilities({responseHeaders:o,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=extractFilenameFromHeader(o),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=createResponseError(e,this._url),this._headersCapability.reject(this._storedError);for(const a of this._requests)a.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(e,a,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:a,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const a=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunk=a,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=createResponseError(e,this._url);for(const a of this._requests)a.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(t){if(urlRegex.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class PDFNodeStream{constructor(e){this.source=e,this.url=parseUrlOrPath(e.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(e,a){if(a<=this._progressiveDataLength)return null;const s=new PDFNodeStreamFsRangeReader(this,e,a);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const a of this._rangeRequestReaders.slice(0))a.cancel(e)}}class PDFNodeStreamFsFullReader{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const a=e.source;this._contentLength=a.length,this._loaded=0,this._filename=null,this._disableRange=a.disableRange||!1,this._rangeChunkSize=a.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!a.disableStream,this._isRangeSupported=!a.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(o=>{this._contentLength=o.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},o=>{o.code==="ENOENT"&&(o=createResponseError(0,this._url.href)),this._storedError=o,this._headersCapability.reject(o)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",a=>{this._error(a)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(e,a,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const o=e.source;this._isStreamingSupported=!o.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:a,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",a=>{this._error(a)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");class PDFObjects{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:INITIAL_DATA}}get(e,a=null){if(a){const o=this.#t(e);return o.promise.then(()=>a(o.data)),null}const s=this.#e[e];if(!s||s.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const a=this.#e[e];return!!a&&a.data!==INITIAL_DATA}delete(e){const a=this.#e[e];return!a||a.data===INITIAL_DATA?!1:(delete this.#e[e],!0)}resolve(e,a=null){const s=this.#t(e);s.data=a,s.resolve()}clear(){for(const e in this.#e){const{data:a}=this.#e[e];a?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:a}=this.#e[e];a!==INITIAL_DATA&&(yield[e,a])}}}const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;let TextLayer$1=class W6{#e=Promise.withResolvers();#t=null;#r=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#n=null;#o=0;#s=0;#h=null;#l=null;#d=0;#c=0;#f=Object.create(null);#p=[];#m=null;#u=[];#g=new WeakMap;#v=null;static#y=new Map;static#_=new Map;static#x=new WeakMap;static#w=null;static#A=new Set;constructor({textContentSource:e,container:a,viewport:s}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(d){d.enqueue(e),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=a,this.#c=s.scale*OutputScale.pixelRatio,this.#d=s.rotation,this.#n={div:null,properties:null,ctx:null};const{pageWidth:o,pageHeight:l,pageX:u,pageY:c}=s.rawDims;this.#v=[1,0,0,-1,-u,c+l],this.#s=o,this.#o=l,W6.#P(),setLayerDimensions(a,s),this.#e.promise.finally(()=>{W6.#A.delete(this),this.#n=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:a}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${e&&a?"Calibri, ":""}sans-serif`],["monospace",`${e&&a?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#h.read().then(({value:a,done:s})=>{if(s){this.#e.resolve();return}this.#a??=a.lang,Object.assign(this.#f,a.styles),this.#C(a.items),e()},this.#e.reject)};return this.#h=this.#m.getReader(),W6.#A.add(this),e(),this.#e.promise}update({viewport:e,onBefore:a=null}){const s=e.scale*OutputScale.pixelRatio,o=e.rotation;if(o!==this.#d&&(a?.(),this.#d=o,setLayerDimensions(this.#l,{rotation:o})),s!==this.#c){a?.(),this.#c=s;const l={div:null,properties:null,ctx:W6.#R(this.#a)};for(const u of this.#u)l.properties=this.#g.get(u),l.div=u,this.#E(l)}}cancel(){const e=new AbortException("TextLayer task cancelled.");this.#h?.cancel(e).catch(()=>{}),this.#h=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#p}#C(e){if(this.#r)return;this.#n.ctx??=W6.#R(this.#a);const a=this.#u,s=this.#p;for(const o of e){if(a.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),this.#r=!0;return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),o.id!==null&&this.#t.setAttribute("id",`${o.id}`),l.append(this.#t)}else o.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}s.push(o.str),this.#M(o)}}#M(e){const a=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(a);const o=Util.transform(this.#v,e.transform);let l=Math.atan2(o[1],o[0]);const u=this.#f[e.fontName];u.vertical&&(l+=Math.PI/2);let c=this.#i&&u.fontSubstitution||u.fontFamily;c=W6.fontFamilyMap.get(c)||c;const d=Math.hypot(o[2],o[3]),m=d*W6.#I(c,u,this.#a);let g,A;l===0?(g=o[4],A=o[5]-m):(g=o[4]+m*Math.sin(l),A=o[5]-m*Math.cos(l));const P="calc(var(--total-scale-factor) *",W=a.style;this.#t===this.#l?(W.left=`${(100*g/this.#s).toFixed(2)}%`,W.top=`${(100*A/this.#o).toFixed(2)}%`):(W.left=`${P}${g.toFixed(2)}px)`,W.top=`${P}${A.toFixed(2)}px)`),W.fontSize=`${P}${(W6.#w*d).toFixed(2)}px)`,W.fontFamily=c,s.fontSize=d,a.setAttribute("role","presentation"),a.textContent=e.str,a.dir=e.dir,this.#i&&(a.dataset.fontName=u.fontSubstitutionLoadedName||e.fontName),l!==0&&(s.angle=l*(180/Math.PI));let me=!1;if(e.str.length>1)me=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const ve=Math.abs(e.transform[0]),He=Math.abs(e.transform[3]);ve!==He&&Math.max(ve,He)/Math.min(ve,He)>1.5&&(me=!0)}if(me&&(s.canvasWidth=u.vertical?e.height:e.width),this.#g.set(a,s),this.#n.div=a,this.#n.properties=s,this.#E(this.#n),s.hasText&&this.#t.append(a),s.hasEOL){const ve=document.createElement("br");ve.setAttribute("role","presentation"),this.#t.append(ve)}}#E(e){const{div:a,properties:s,ctx:o}=e,{style:l}=a;let u="";if(W6.#w>1&&(u=`scale(${1/W6.#w})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=l,{canvasWidth:d,fontSize:m}=s;W6.#T(o,m*this.#c,c);const{width:g}=o.measureText(a.textContent);g>0&&(u=`scaleX(${d*this.#c/g}) ${u}`)}s.angle!==0&&(u=`rotate(${s.angle}deg) ${u}`),u.length>0&&(l.transform=u)}static cleanup(){if(!(this.#A.size>0)){this.#y.clear();for(const{canvas:e}of this.#_.values())e.remove();this.#_.clear()}}static#R(e=null){let a=this.#_.get(e||="");if(!a){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),a=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#_.set(e,a),this.#x.set(a,{size:0,family:""})}return a}static#T(e,a,s){const o=this.#x.get(e);a===o.size&&s===o.family||(e.font=`${a}px ${s}`,o.size=a,o.family=s)}static#P(){if(this.#w!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#w=e.getBoundingClientRect().height,e.remove()}static#I(e,a,s){const o=this.#y.get(e);if(o)return o;const l=this.#R(s);l.canvas.width=l.canvas.height=DEFAULT_FONT_SIZE,this.#T(l,DEFAULT_FONT_SIZE,e);const u=l.measureText(""),c=u.fontBoundingBoxAscent,d=Math.abs(u.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let m=.8;return c?m=c/(c+d):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),a.ascent?m=a.ascent:a.descent&&(m=1+a.descent)),this.#y.set(e,m),m}};class XfaText{static textContent(e){const a=[],s={items:a,styles:Object.create(null)};function o(l){if(!l)return;let u=null;const c=l.name;if(c==="#text")u=l.value;else if(XfaText.shouldBuildText(c))l?.attributes?.textContent?u=l.attributes.textContent:l.value&&(u=l.value);else return;if(u!==null&&a.push({str:u}),!!l.children)for(const d of l.children)o(d)}return o(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new PDFDocumentLoadingTask,{docId:a}=e,s=t.url?getUrlProp(t.url):null,o=t.data?getDataProp(t.data):null,l=t.httpHeaders||null,u=t.withCredentials===!0,c=t.password??null,d=t.range instanceof PDFDataRangeTransport$1?t.range:null,m=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let g=t.worker instanceof PDFWorker?t.worker:null;const A=t.verbosity,P=typeof t.docBaseUrl=="string"&&!isDataScheme(t.docBaseUrl)?t.docBaseUrl:null,W=getFactoryUrlProp(t.cMapUrl),me=t.cMapPacked!==!1,ve=t.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),He=getFactoryUrlProp(t.iccUrl),De=getFactoryUrlProp(t.standardFontDataUrl),Xe=t.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),qe=getFactoryUrlProp(t.wasmUrl),Rs=t.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),Vc=t.stopAtErrors!==!0,So=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,Do=t.isEvalSupported!==!1,eh=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!isNodeJS,Ko=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),Ge=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,An=typeof t.disableFontFace=="boolean"?t.disableFontFace:isNodeJS,wt=t.fontExtraProperties===!0,Bs=t.enableXfa===!0,yh=t.ownerDocument||globalThis.document,df=t.disableRange===!0,Fc=t.disableStream===!0,_h=t.disableAutoFetch===!0,qc=t.pdfBug===!0,Mh=t.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),cf=t.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),mf=t.enableHWA===!0,a1=t.useWasm!==!1,s1=d?d.length:t.length??NaN,E1=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!isNodeJS&&!An,T1=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(ve===DOMCMapReaderFactory&&Xe===DOMStandardFontDataFactory&&Rs===DOMWasmFactory&&W&&De&&qe&&isValidFetchUrl(W,document.baseURI)&&isValidFetchUrl(De,document.baseURI)&&isValidFetchUrl(qe,document.baseURI)),z1=null;setVerbosityLevel(A);const W1={canvasFactory:new Mh({ownerDocument:yh,enableHWA:mf}),filterFactory:new cf({docId:a,ownerDocument:yh}),cMapReaderFactory:T1?null:new ve({baseUrl:W,isCompressed:me}),standardFontDataFactory:T1?null:new Xe({baseUrl:De}),wasmFactory:T1?null:new Rs({baseUrl:qe})};g||(g=PDFWorker.create({verbosity:A,port:GlobalWorkerOptions.workerPort}),e._worker=g);const m2={docId:a,apiVersion:"5.3.93",data:o,password:c,disableAutoFetch:_h,rangeChunkSize:m,length:s1,docBaseUrl:P,enableXfa:Bs,evaluatorOptions:{maxImageSize:So,disableFontFace:An,ignoreErrors:Vc,isEvalSupported:Do,isOffscreenCanvasSupported:eh,isImageDecoderSupported:Ko,canvasMaxAreaInBytes:Ge,fontExtraProperties:wt,useSystemFonts:E1,useWasm:a1,useWorkerFetch:T1,cMapUrl:W,iccUrl:He,standardFontDataUrl:De,wasmUrl:qe}},C2={ownerDocument:yh,pdfBug:qc,styleElement:z1,loadingParams:{disableAutoFetch:_h,enableXfa:Bs}};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const A2=g.messageHandler.sendWithPromise("GetDocRequest",m2,o?[o.buffer]:null);let b2;if(d)b2=new PDFDataTransportStream(d,{disableRange:df,disableStream:Fc});else if(!o){if(!s)throw new Error("getDocument - no `url` parameter provided.");const _2=isValidFetchUrl(s)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;b2=new _2({url:s,length:s1,httpHeaders:l,withCredentials:u,rangeChunkSize:m,disableRange:df,disableStream:Fc})}return A2.then(_2=>{if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const q1=new MessageHandler(a,_2,g.port),U1=new WorkerTransport(q1,e,b2,C2,W1);e._transport=U1,q1.send("Ready",null)})}).catch(e._capability.reject),e}class PDFDocumentLoadingTask{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${PDFDocumentLoadingTask.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let PDFDataRangeTransport$1=class{#e=Promise.withResolvers();#t=[];#r=[];#i=[];#a=[];constructor(e,a,s=!1,o=null){this.length=e,this.initialData=a,this.progressiveDone=s,this.contentDispositionFilename=o}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#i.push(e)}addProgressiveReadListener(e){this.#r.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,a){for(const s of this.#a)s(e,a)}onDataProgress(e,a){this.#e.promise.then(()=>{for(const s of this.#i)s(e,a)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const a of this.#r)a(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,a){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class PDFDocumentProxy{constructor(e,a){this._pdfInfo=e,this._transport=a}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:a}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(a)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class PDFPageProxy{#e=!1;constructor(e,a,s,o=!1){this._pageIndex=e,this._pageInfo=a,this._transport=s,this._stats=o?new StatTimer:null,this._pdfBug=o,this.commonObjs=s.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:a=this.rotate,offsetX:s=0,offsetY:o=0,dontFlip:l=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:a,offsetX:s,offsetY:o,dontFlip:l})}getAnnotations({intent:e="display"}={}){const{renderingIntent:a}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,a)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:a,intent:s="display",annotationMode:o=AnnotationMode.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:m=null,printAnnotationStorage:g=null,isEditing:A=!1}){this._stats?.time("Overall");const P=this._transport.getRenderingIntent(s,o,g,A),{renderingIntent:W,cacheKey:me}=P;this.#e=!1,c||=this._transport.getOptionalContentConfig(W);let ve=this._intentStates.get(me);ve||(ve=Object.create(null),this._intentStates.set(me,ve)),ve.streamReaderCancelTimeout&&(clearTimeout(ve.streamReaderCancelTimeout),ve.streamReaderCancelTimeout=null);const He=!!(W&RenderingIntentFlag.PRINT);ve.displayReadyCapability||(ve.displayReadyCapability=Promise.withResolvers(),ve.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(P));const De=Rs=>{ve.renderTasks.delete(Xe),He&&(this.#e=!0),this.#t(),Rs?(Xe.capability.reject(Rs),this._abortOperatorList({intentState:ve,reason:Rs instanceof Error?Rs:new Error(Rs)})):Xe.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},Xe=new InternalRenderTask({callback:De,params:{canvasContext:e,viewport:a,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:ve.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!He,pdfBug:this._pdfBug,pageColors:m});(ve.renderTasks||=new Set).add(Xe);const qe=Xe.task;return Promise.all([ve.displayReadyCapability.promise,c]).then(([Rs,Vc])=>{if(this.destroyed){De();return}if(this._stats?.time("Rendering"),!(Vc.renderingIntent&W))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");Xe.initializeGraphics({transparency:Rs,optionalContentConfig:Vc}),Xe.operatorListChanged()}).catch(De),qe}getOperatorList({intent:e="display",annotationMode:a=AnnotationMode.ENABLE,printAnnotationStorage:s=null,isEditing:o=!1}={}){function l(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const u=this._transport.getRenderingIntent(e,a,s,o,!0);let c=this._intentStates.get(u.cacheKey);c||(c=Object.create(null),this._intentStates.set(u.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=l,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:a=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:a===!0},{highWaterMark:100,size(o){return o.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>XfaText.textContent(s));const a=this.streamTextContent(e);return new Promise(function(s,o){function l(){u.read().then(function({value:d,done:m}){if(m){s(c);return}c.lang??=d.lang,Object.assign(c.styles,d.styles),c.items.push(...d.items),l()},o)}const u=a.getReader(),c={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const a of this._intentStates.values())if(this._abortOperatorList({intentState:a,reason:new Error("Page was destroyed."),force:!0}),!a.opListReadCapability)for(const s of a.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const a=this.#t();return e&&a&&(this._stats&&=new StatTimer),a}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:a}of this._intentStates.values())if(e.size>0||!a.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,a){const s=this._intentStates.get(a);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(e))}_renderPageChunk(e,a){for(let s=0,o=e.length;s<o;s++)a.operatorList.fnArray.push(e.fnArray[s]),a.operatorList.argsArray.push(e.argsArray[s]);a.operatorList.lastChunk=e.lastChunk,a.operatorList.separateAnnots=e.separateAnnots;for(const s of a.renderTasks)s.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:a,annotationStorageSerializable:s,modifiedIds:o}){const{map:l,transfer:u}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:a,annotationStorage:l,modifiedIds:o},u).getReader(),m=this._intentStates.get(a);m.streamReader=d;const g=()=>{d.read().then(({value:A,done:P})=>{if(P){m.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(A,m),g())},A=>{if(m.streamReader=null,!this._transport.destroyed){if(m.operatorList){m.operatorList.lastChunk=!0;for(const P of m.renderTasks)P.operatorListChanged();this.#t()}if(m.displayReadyCapability)m.displayReadyCapability.reject(A);else if(m.opListReadCapability)m.opListReadCapability.reject(A);else throw A}})};g()}_abortOperatorList({intentState:e,reason:a,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(a instanceof RenderingCancelledException){let o=RENDERING_CANCELLED_TIMEOUT;a.extraDelay>0&&a.extraDelay<1e3&&(o+=a.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:a,force:!0})},o);return}}if(e.streamReader.cancel(new AbortException(a.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[o,l]of this._intentStates)if(l===e){this._intentStates.delete(o);break}this.cleanup()}}}get stats(){return this._stats}}var Z5,J6,T5,pv,L8,mv,gv,y6,I8,Dw,Lw,Dy,Kv,D8;const M3=class M3{constructor({name:e=null,port:a=null,verbosity:s=getVerbosityLevel()}={}){l5(this,y6);l5(this,Z5,Promise.withResolvers());l5(this,J6,null);l5(this,T5,null);l5(this,pv,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,a){if(R3(M3,gv).has(a))throw new Error("Cannot use more than one PDFWorker per port.");R3(M3,gv).set(a,this),u5(this,y6,Dw).call(this,a)}else u5(this,y6,Lw).call(this)}get promise(){return R3(this,Z5).promise}get port(){return R3(this,T5)}get messageHandler(){return R3(this,J6)}destroy(){this.destroyed=!0,R3(this,pv)?.terminate(),R6(this,pv,null),R3(M3,gv).delete(R3(this,T5)),R6(this,T5,null),R3(this,J6)?.destroy(),R6(this,J6,null)}static create(e){const a=R3(this,gv).get(e?.port);if(a){if(a._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return a}return new M3(e)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>R3(this,Kv,D8)?R3(this,Kv,D8):(await import(this.workerSrc)).WorkerMessageHandler)())}};Z5=new WeakMap,J6=new WeakMap,T5=new WeakMap,pv=new WeakMap,L8=new WeakMap,mv=new WeakMap,gv=new WeakMap,y6=new WeakSet,I8=function(){R3(this,Z5).resolve(),R3(this,J6).send("configure",{verbosity:this.verbosity})},Dw=function(e){R6(this,T5,e),R6(this,J6,new MessageHandler("main","worker",e)),R3(this,J6).on("ready",()=>{}),u5(this,y6,I8).call(this)},Lw=function(){if(R3(M3,mv)||R3(M3,Kv,D8)){u5(this,y6,Dy).call(this);return}let{workerSrc:e}=M3;try{M3._isSameOrigin(window.location,e)||(e=M3._createCDNWrapper(new URL(e,window.location).href));const a=new Worker(e,{type:"module"}),s=new MessageHandler("main","worker",a),o=()=>{l.abort(),s.destroy(),a.terminate(),this.destroyed?R3(this,Z5).reject(new Error("Worker was destroyed")):u5(this,y6,Dy).call(this)},l=new AbortController;a.addEventListener("error",()=>{R3(this,pv)||o()},{signal:l.signal}),s.on("test",c=>{if(l.abort(),this.destroyed||!c){o();return}R6(this,J6,s),R6(this,T5,a),R6(this,pv,a),u5(this,y6,I8).call(this)}),s.on("ready",c=>{if(l.abort(),this.destroyed){o();return}try{u()}catch{u5(this,y6,Dy).call(this)}});const u=()=>{const c=new Uint8Array;s.send("test",c,[c.buffer])};u();return}catch{info("The worker has been disabled.")}u5(this,y6,Dy).call(this)},Dy=function(){R3(M3,mv)||(warn("Setting up fake worker."),R6(M3,mv,!0)),M3._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){R3(this,Z5).reject(new Error("Worker was destroyed"));return}const a=new LoopbackPort;R6(this,T5,a);const s=`fake${Qx(M3,L8)._++}`,o=new MessageHandler(s+"_worker",s,a);e.setup(o,a),R6(this,J6,new MessageHandler(s,s+"_worker",a)),u5(this,y6,I8).call(this)}).catch(e=>{R3(this,Z5).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Kv=new WeakSet,D8=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},l5(M3,Kv),l5(M3,L8,0),l5(M3,mv,!1),l5(M3,gv,new WeakMap),isNodeJS&&(R6(M3,mv,!0),GlobalWorkerOptions.workerSrc||="./pdf.worker.mjs"),M3._isSameOrigin=(e,a)=>{const s=URL.parse(e);if(!s?.origin||s.origin==="null")return!1;const o=new URL(a,s);return s.origin===o.origin},M3._createCDNWrapper=e=>{const a=`await import("${e}");`;return URL.createObjectURL(new Blob([a],{type:"text/javascript"}))},M3.fromPort=e=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return M3.create(e)};let PDFWorker=M3;class WorkerTransport{#e=new Map;#t=new Map;#r=new Map;#i=new Map;#a=null;constructor(e,a,s,o,l){this.messageHandler=e,this.loadingTask=a,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this.loadingParams=o.loadingParams,this._params=o,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#n(e,a=null){const s=this.#e.get(e);if(s)return s;const o=this.messageHandler.sendWithPromise(e,a);return this.#e.set(e,o),o}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(e,a=AnnotationMode.ENABLE,s=null,o=!1,l=!1){let u=RenderingIntentFlag.DISPLAY,c=SerializableEmpty;switch(e){case"any":u=RenderingIntentFlag.ANY;break;case"display":break;case"print":u=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${e}`)}const d=u&RenderingIntentFlag.PRINT&&s instanceof PrintAnnotationStorage?s:this.annotationStorage;switch(a){case AnnotationMode.DISABLE:u+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:u+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:u+=RenderingIntentFlag.ANNOTATIONS_STORAGE,c=d.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${a}`)}o&&(u+=RenderingIntentFlag.IS_EDITING),l&&(u+=RenderingIntentFlag.OPLIST);const{ids:m,hash:g}=d.modifiedIds,A=[u,c.hash,g];return{renderingIntent:u,cacheKey:A.join("_"),annotationStorageSerializable:c,modifiedIds:m}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#t.values())e.push(s._destroy());this.#t.clear(),this.#r.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const a=this.messageHandler.sendWithPromise("Terminate",null);return e.push(a),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),this._networkStream?.cancelAllRequests(new AbortException("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:a}=this;e.on("GetReader",(s,o)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},o.onPull=()=>{this._fullReader.read().then(function({value:l,done:u}){if(u){o.close();return}assert(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{o.error(l)})},o.onCancel=l=>{this._fullReader.cancel(l),o.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:o,isRangeSupported:l,contentLength:u}=this._fullReader;return(!o||!l)&&(this._lastProgress&&a.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{a.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:o,isRangeSupported:l,contentLength:u}}),e.on("GetRangeReader",(s,o)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(s.begin,s.end);if(!l){o.close();return}o.onPull=()=>{l.read().then(function({value:u,done:c}){if(c){o.close();return}assert(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{o.error(u)})},o.onCancel=u=>{l.cancel(u),o.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,a._capability.resolve(new PDFDocumentProxy(s,this))}),e.on("DocException",s=>{a._capability.reject(wrapReason(s))}),e.on("PasswordRequest",s=>{this.#a=Promise.withResolvers();try{if(!a.onPassword)throw wrapReason(s);const o=l=>{l instanceof Error?this.#a.reject(l):this.#a.resolve({password:l})};a.onPassword(o,s.code)}catch(o){this.#a.reject(o)}return this.#a.promise}),e.on("DataLoaded",s=>{a.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;this.#t.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,o,l])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(o){case"Font":if("error"in l){const m=l.error;warn(`Error during font loading: ${m}`),this.commonObjs.resolve(s,m);break}const u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,g)=>globalThis.FontInspector.fontAdded(m,g):null,c=new FontFaceObject(l,u);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(s,c)});break;case"CopyLocalImage":const{imageRef:d}=l;assert(d,"The imageRef must be defined.");for(const m of this.#t.values())for(const[,g]of m.objs)if(g?.ref===d)return g.dataLen?(this.commonObjs.resolve(s,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,l);break;default:throw new Error(`Got unknown common object type ${o}`)}return null}),e.on("obj",([s,o,l,u])=>{if(this.destroyed)return;const c=this.#t.get(o);if(!c.objs.has(s)){if(c._intentStates.size===0){u?.bitmap?.close();return}switch(l){case"Image":case"Pattern":c.objs.resolve(s,u);break;default:throw new Error(`Got unknown object type ${l}`)}}}),e.on("DocProgress",s=>{this.destroyed||a.onProgress?.({loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const o=this[s.type];if(!o)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return o.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:a}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},a).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const a=e-1,s=this.#r.get(a);if(s)return s;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:a}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#i.set(l.refStr,e);const u=new PDFPageProxy(a,l,this,this._params.pdfBug);return this.#t.set(a,u),u});return this.#r.set(a,o),o}getPageIndex(e){return isRefProxy(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,a){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:a})}getFieldObjects(){return this.#n("GetFieldObjects")}hasJSActions(){return this.#n("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#n("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#n("GetOptionalContentConfig").then(a=>new OptionalContentConfig(a,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",a=this.#e.get(e);if(a)return a;const s=this.messageHandler.sendWithPromise(e,null).then(o=>({info:o[0],metadata:o[1]?new Metadata(o[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const a of this.#t.values())if(!a.cleanup())throw new Error(`startCleanup: Page ${a.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(e){if(!isRefProxy(e))return null;const a=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#i.get(a)??null}}class RenderTask{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:a}=this.#e;return e.form||e.canvas&&a?.size>0}}class InternalRenderTask{#e=null;static#t=new WeakSet;constructor({callback:e,params:a,objs:s,commonObjs:o,annotationCanvasMap:l,operatorList:u,pageIndex:c,canvasFactory:d,filterFactory:m,useRequestAnimationFrame:g=!1,pdfBug:A=!1,pageColors:P=null}){this.callback=e,this.params=a,this.objs=s,this.commonObjs=o,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=m,this._pdfBug=A,this.pageColors=P,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=a.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:a}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:o,transform:l,background:u}=this.params;this.gfx=new CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:a},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:o,transparency:e,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,a=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),InternalRenderTask.#t.delete(this._canvas),e||=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,a),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="5.3.93",build="cbeef3233";function makeColorComp(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function scaleAndClamp(t){return Math.max(0,Math.min(255,255*t))}class ColorConverters{static CMYK_G([e,a,s,o]){return["G",1-Math.min(1,.3*e+.59*s+.11*a+o)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=scaleAndClamp(e),[e,e,e]}static G_HTML([e]){const a=makeColorComp(e);return`#${a}${a}${a}`}static RGB_G([e,a,s]){return["G",.3*e+.59*a+.11*s]}static RGB_rgb(e){return e.map(scaleAndClamp)}static RGB_HTML(e){return`#${e.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,a,s,o]){return["RGB",1-Math.min(1,e+o),1-Math.min(1,s+o),1-Math.min(1,a+o)]}static CMYK_rgb([e,a,s,o]){return[scaleAndClamp(1-Math.min(1,e+o)),scaleAndClamp(1-Math.min(1,s+o)),scaleAndClamp(1-Math.min(1,a+o))]}static CMYK_HTML(e){const a=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(a)}static RGB_CMYK([e,a,s]){const o=1-e,l=1-a,u=1-s,c=Math.min(o,l,u);return["CMYK",o,l,u,c]}}class BaseSVGFactory{create(e,a,s=!1){if(e<=0||a<=0)throw new Error("Invalid SVG dimensions");const o=this._createSVG("svg:svg");return o.setAttribute("version","1.1"),s||(o.setAttribute("width",`${e}px`),o.setAttribute("height",`${a}px`)),o.setAttribute("preserveAspectRatio","none"),o.setAttribute("viewBox",`0 0 ${e} ${a}`),o}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(e){return document.createElementNS(SVG_NS,e)}}class XfaLayer{static setupStorage(e,a,s,o,l){const u=o.getValue(a,{value:null});switch(s.name){case"textarea":if(u.value!==null&&(e.textContent=u.value),l==="print")break;e.addEventListener("input",c=>{o.setValue(a,{value:c.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(u.value===s.attributes.xfaOn?e.setAttribute("checked",!0):u.value===s.attributes.xfaOff&&e.removeAttribute("checked"),l==="print")break;e.addEventListener("change",c=>{o.setValue(a,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&e.setAttribute("value",u.value),l==="print")break;e.addEventListener("input",c=>{o.setValue(a,{value:c.target.value})})}break;case"select":if(u.value!==null){e.setAttribute("value",u.value);for(const c of s.children)c.attributes.value===u.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const d=c.target.options,m=d.selectedIndex===-1?"":d[d.selectedIndex].value;o.setValue(a,{value:m})});break}}static setAttributes({html:e,element:a,storage:s=null,intent:o,linkService:l}){const{attributes:u}=a,c=e instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${o}`);for(const[d,m]of Object.entries(u))if(m!=null)switch(d){case"class":m.length&&e.setAttribute(d,m.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",m);break;case"style":Object.assign(e.style,m);break;case"textContent":e.textContent=m;break;default:(!c||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,m)}c&&l.addLinkAttributes(e,u.href,u.newWindow),s&&u.dataId&&this.setupStorage(e,u.dataId,a,s)}static render(e){const a=e.annotationStorage,s=e.linkService,o=e.xfaHtml,l=e.intent||"display",u=document.createElement(o.name);o.attributes&&this.setAttributes({html:u,element:o,intent:l,linkService:s});const c=l!=="richText",d=e.div;if(d.append(u),e.viewport){const A=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=A}c&&d.setAttribute("class","xfaLayer xfaFont");const m=[];if(o.children.length===0){if(o.value){const A=document.createTextNode(o.value);u.append(A),c&&XfaText.shouldBuildText(o.name)&&m.push(A)}return{textDivs:m}}const g=[[o,-1,u]];for(;g.length>0;){const[A,P,W]=g.at(-1);if(P+1===A.children.length){g.pop();continue}const me=A.children[++g.at(-1)[1]];if(me===null)continue;const{name:ve}=me;if(ve==="#text"){const De=document.createTextNode(me.value);m.push(De),W.append(De);continue}const He=me?.attributes?.xmlns?document.createElementNS(me.attributes.xmlns,ve):document.createElement(ve);if(W.append(He),me.attributes&&this.setAttributes({html:He,element:me,storage:a,intent:l,linkService:s}),me.children?.length>0)g.push([me,-1,He]);else if(me.value){const De=document.createTextNode(me.value);c&&XfaText.shouldBuildText(ve)&&m.push(De),He.append(De)}}for(const A of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:m}}static update(e){const a=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=a,e.div.hidden=!1}}const annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;class AnnotationElementFactory{static create(e){switch(e.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(e);case AnnotationType.TEXT:return new TextAnnotationElement(e);case AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(e);case"Btn":return e.data.radioButton?new RadioButtonWidgetAnnotationElement(e):e.data.checkBox?new CheckboxWidgetAnnotationElement(e):new PushButtonWidgetAnnotationElement(e);case"Ch":return new ChoiceWidgetAnnotationElement(e);case"Sig":return new SignatureWidgetAnnotationElement(e)}return new WidgetAnnotationElement(e);case AnnotationType.POPUP:return new PopupAnnotationElement(e);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(e);case AnnotationType.LINE:return new LineAnnotationElement(e);case AnnotationType.SQUARE:return new SquareAnnotationElement(e);case AnnotationType.CIRCLE:return new CircleAnnotationElement(e);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(e);case AnnotationType.CARET:return new CaretAnnotationElement(e);case AnnotationType.INK:return new InkAnnotationElement(e);case AnnotationType.POLYGON:return new PolygonAnnotationElement(e);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(e);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(e);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(e);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(e);case AnnotationType.STAMP:return new StampAnnotationElement(e);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(e);default:return new AnnotationElement(e)}}}class AnnotationElement{#e=null;#t=!1;#r=null;constructor(e,{isRenderable:a=!1,ignoreBorder:s=!1,createQuadrilaterals:o=!1}={}){this.isRenderable=a,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,a&&(this.container=this._createContainer(s)),o&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:a}){return!!(e?.str||a?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return AnnotationElement._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:a}=e;a&&this.#i(a),this.#r?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#r?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:a},data:{rect:s,rotation:o},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:u,pageX:c,pageY:d}}}}=this;s?.splice(0,4,...e),a.left=`${100*(e[0]-c)/l}%`,a.top=`${100*(u-e[3]+d)/u}%`,o===0?(a.width=`${100*(e[2]-e[0])/l}%`,a.height=`${100*(e[3]-e[1])/u}%`):this.setRotation(o)}_createContainer(e){const{data:a,parent:{page:s,viewport:o}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",a.id),this instanceof WidgetAnnotationElement||(l.tabIndex=0);const{style:u}=l;if(u.zIndex=this.parent.zIndex++,a.alternativeText&&(l.title=a.alternativeText),a.noRotate&&l.classList.add("norotate"),!a.rect||this instanceof PopupAnnotationElement){const{rotation:ve}=a;return!a.hasOwnCanvas&&ve!==0&&this.setRotation(ve,l),l}const{width:c,height:d}=this;if(!e&&a.borderStyle.width>0){u.borderWidth=`${a.borderStyle.width}px`;const ve=a.borderStyle.horizontalCornerRadius,He=a.borderStyle.verticalCornerRadius;if(ve>0||He>0){const Xe=`calc(${ve}px * var(--total-scale-factor)) / calc(${He}px * var(--total-scale-factor))`;u.borderRadius=Xe}else if(this instanceof RadioButtonWidgetAnnotationElement){const Xe=`calc(${c}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;u.borderRadius=Xe}switch(a.borderStyle.style){case AnnotationBorderStyleType.SOLID:u.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:u.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:u.borderBottomStyle="solid";break}const De=a.borderColor||null;De?(this.#t=!0,u.borderColor=Util.makeHexColor(De[0]|0,De[1]|0,De[2]|0)):u.borderWidth=0}const m=Util.normalizeRect([a.rect[0],s.view[3]-a.rect[1]+s.view[1],a.rect[2],s.view[3]-a.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:A,pageX:P,pageY:W}=o.rawDims;u.left=`${100*(m[0]-P)/g}%`,u.top=`${100*(m[1]-W)/A}%`;const{rotation:me}=a;return a.hasOwnCanvas||me===0?(u.width=`${100*c/g}%`,u.height=`${100*d/A}%`):this.setRotation(me,l),l}setRotation(e,a=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:o}=this.parent.viewport.rawDims;let{width:l,height:u}=this;e%180!==0&&([l,u]=[u,l]),a.style.width=`${100*l/s}%`,a.style.height=`${100*u/o}%`,a.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(a,s,o)=>{const l=o.detail[a],u=l[0],c=l.slice(1);o.target.style[s]=ColorConverters[`${u}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[s]:ColorConverters[`${u}_rgb`](c)})};return shadow(this,"_commonActions",{display:a=>{const{display:s}=a.detail,o=s%2===1;this.container.style.visibility=o?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:o,noPrint:s===1||s===2})},print:a=>{this.annotationStorage.setValue(this.data.id,{noPrint:!a.detail.print})},hidden:a=>{const{hidden:s}=a.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:a=>{setTimeout(()=>a.target.focus({preventScroll:!1}),0)},userName:a=>{a.target.title=a.detail.userName},readonly:a=>{a.target.disabled=a.detail.readonly},required:a=>{this._setRequired(a.target,a.detail.required)},bgColor:a=>{e("bgColor","backgroundColor",a)},fillColor:a=>{e("fillColor","backgroundColor",a)},fgColor:a=>{e("fgColor","color",a)},textColor:a=>{e("textColor","color",a)},borderColor:a=>{e("borderColor","borderColor",a)},strokeColor:a=>{e("strokeColor","borderColor",a)},rotation:a=>{const s=a.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,a){const s=this._commonActions;for(const o of Object.keys(a.detail))(e[o]||s[o])?.(a)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const a=this.annotationStorage.getRawValue(this.data.id);if(!a)return;const s=this._commonActions;for(const[o,l]of Object.entries(a)){const u=s[o];if(u){const c={detail:{[o]:l},target:e};u(c),delete a[o]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[a,s,o,l]=this.data.rect.map(ve=>Math.fround(ve));if(e.length===8){const[ve,He,De,Xe]=e.subarray(2,6);if(o===ve&&l===He&&a===De&&s===Xe)return}const{style:u}=this.container;let c;if(this.#t){const{borderColor:ve,borderWidth:He}=u;u.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${ve}" stroke-width="${He}">`],this.container.classList.add("hasBorder")}const d=o-a,m=l-s,{svgFactory:g}=this,A=g.createElement("svg");A.classList.add("quadrilateralsContainer"),A.setAttribute("width",0),A.setAttribute("height",0),A.role="none";const P=g.createElement("defs");A.append(P);const W=g.createElement("clipPath"),me=`clippath_${this.data.id}`;W.setAttribute("id",me),W.setAttribute("clipPathUnits","objectBoundingBox"),P.append(W);for(let ve=2,He=e.length;ve<He;ve+=8){const De=e[ve],Xe=e[ve+1],qe=e[ve+2],Rs=e[ve+3],Vc=g.createElement("rect"),So=(qe-a)/d,Do=(l-Xe)/m,eh=(De-qe)/d,Ko=(Xe-Rs)/m;Vc.setAttribute("x",So),Vc.setAttribute("y",Do),Vc.setAttribute("width",eh),Vc.setAttribute("height",Ko),W.append(Vc),c?.push(`<rect vector-effect="non-scaling-stroke" x="${So}" y="${Do}" width="${eh}" height="${Ko}"/>`)}this.#t&&(c.push("</g></svg>')"),u.backgroundImage=c.join("")),this.container.append(A),this.container.style.clipPath=`url(#${me})`}_createPopup(){const{data:e}=this,a=this.#r=new PopupAnnotationElement({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]});this.parent.div.append(a.render())}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,a=null){const s=[];if(this._fieldObjects){const o=this._fieldObjects[e];if(o)for(const{page:l,id:u,exportValues:c}of o){if(l===-1||u===a)continue;const d=typeof c=="string"?c:null,m=document.querySelector(`[data-element-id="${u}"]`);if(m&&!GetElementsByNameSet.has(m)){warn(`_getElementsByName - element not allowed: ${u}`);continue}s.push({id:u,exportValue:d,domElement:m})}return s}for(const o of document.getElementsByName(e)){const{exportValue:l}=o,u=o.getAttribute("data-element-id");u!==a&&GetElementsByNameSet.has(o)&&s.push({id:u,exportValue:l,domElement:o})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const a of e)a.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:a}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:a,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class LinkAnnotationElement extends AnnotationElement{constructor(e,a=null){super(e,{isRenderable:!0,ignoreBorder:!!a?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:a}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let o=!1;return e.url?(a.addLinkAttributes(s,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(s,e.action),o=!0):e.attachment?(this.#t(s,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(this.#r(s,e.setOCGState),o=!0):e.dest?(this._bindLink(s,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),o=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(s,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(s),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,a){e.href=this.linkService.getDestinationHash(a),e.onclick=()=>(a&&this.linkService.goToDestination(a),!1),(a||a==="")&&this.#e()}_bindNamedAction(e,a){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(a),!1),this.#e()}#t(e,a,s=null){e.href=this.linkService.getAnchorUrl(""),a.description&&(e.title=a.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(a.content,a.filename,s),!1),this.#e()}#r(e,a){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(a),!1),this.#e()}_bindJSAction(e,a){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(a.actions)){const l=s.get(o);l&&(e[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a.id,name:o}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,a){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{s?.();const{fields:o,refs:l,include:u}=a,c=[];if(o.length!==0||l.length!==0){const g=new Set(l);for(const A of o){const P=this._fieldObjects[A]||[];for(const{id:W}of P)g.add(W)}for(const A of Object.values(this._fieldObjects))for(const P of A)g.has(P.id)===u&&c.push(P)}else for(const g of Object.values(this._fieldObjects))c.push(...g);const d=this.annotationStorage,m=[];for(const g of c){const{id:A}=g;switch(m.push(A),g.type){case"text":{const W=g.defaultValue||"";d.setValue(A,{value:W});break}case"checkbox":case"radiobutton":{const W=g.defaultValue===g.exportValues;d.setValue(A,{value:W});break}case"combobox":case"listbox":{const W=g.defaultValue||"";d.setValue(A,{value:W});break}default:continue}const P=document.querySelector(`[data-element-id="${A}"]`);if(P){if(!GetElementsByNameSet.has(P)){warn(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;P.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}}),!1}}}class TextAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return util_FeatureTest.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,a,s,o,l){s.includes("mouse")?e.addEventListener(s,u=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:l(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):e.addEventListener(s,u=>{if(s==="blur"){if(!a.focused||!u.relatedTarget)return;a.focused=!1}else if(s==="focus"){if(a.focused)return;a.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:l(u)}})})}_setEventListeners(e,a,s,o){for(const[l,u]of s)(u==="Action"||this.data.actions?.[u])&&((u==="Focus"||u==="Blur")&&(a||={focused:!1}),this._setEventListener(e,a,l,u,o),u==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,a,"blur","Blur",null):u==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,a,"focus","Focus",null))}_setBackgroundColor(e){const a=this.data.backgroundColor||null;e.style.backgroundColor=a===null?"transparent":Util.makeHexColor(a[0],a[1],a[2])}_setTextStyle(e){const a=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,o=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,l=e.style;let u;const c=2,d=m=>Math.round(10*m)/10;if(this.data.multiLine){const m=Math.abs(this.data.rect[3]-this.data.rect[1]-c),g=Math.round(m/(LINE_FACTOR*o))||1,A=m/g;u=Math.min(o,d(A/LINE_FACTOR))}else{const m=Math.abs(this.data.rect[3]-this.data.rect[1]-c);u=Math.min(o,d(m/LINE_FACTOR))}l.fontSize=`calc(${u}px * var(--total-scale-factor))`,l.color=Util.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(l.textAlign=a[this.data.textAlignment])}_setRequired(e,a){a?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",a)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){const a=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:a})}setPropertyOnSiblings(e,a,s,o){const l=this.annotationStorage;for(const u of this._getElementsByName(e.name,e.id))u.domElement&&(u.domElement[a]=s),l.setValue(u.id,{[o]:s})}render(){const e=this.annotationStorage,a=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(a,{value:this.data.fieldValue});let l=o.value||"";const u=e.getValue(a,{charLimit:this.data.maxLen}).charLimit;u&&l.length>u&&(l=l.slice(0,u));let c=o.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",c??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),GetElementsByNameSet.add(s),s.setAttribute("data-element-id",a),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const m=this.data.dateFormat||this.data.timeFormat;m&&(s.title=m),this._setRequired(s,this.data.required),u&&(s.maxLength=u),s.addEventListener("input",A=>{e.setValue(a,{value:A.target.value}),this.setPropertyOnSiblings(s,"value",A.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",A=>{const P=this.data.defaultFieldValue??"";s.value=d.userValue=P,d.formattedValue=null});let g=A=>{const{formattedValue:P}=d;P!=null&&(A.target.value=P),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",P=>{if(d.focused)return;const{target:W}=P;d.userValue&&(W.value=d.userValue),d.lastCommittedValue=W.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",P=>{this.showElementAndHideCanvas(P.target);const W={value(me){d.userValue=me.detail.value??"",e.setValue(a,{value:d.userValue.toString()}),me.target.value=d.userValue},formattedValue(me){const{formattedValue:ve}=me.detail;d.formattedValue=ve,ve!=null&&me.target!==document.activeElement&&(me.target.value=ve),e.setValue(a,{formattedValue:ve})},selRange(me){me.target.setSelectionRange(...me.detail.selRange)},charLimit:me=>{const{charLimit:ve}=me.detail,{target:He}=me;if(ve===0){He.removeAttribute("maxLength");return}He.setAttribute("maxLength",ve);let De=d.userValue;!De||De.length<=ve||(De=De.slice(0,ve),He.value=d.userValue=De,e.setValue(a,{value:De}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:De,willCommit:!0,commitKey:1,selStart:He.selectionStart,selEnd:He.selectionEnd}}))}};this._dispatchEventFromSandbox(W,P)}),s.addEventListener("keydown",P=>{d.commitKey=1;let W=-1;if(P.key==="Escape"?W=0:P.key==="Enter"&&!this.data.multiLine?W=2:P.key==="Tab"&&(d.commitKey=3),W===-1)return;const{value:me}=P.target;d.lastCommittedValue!==me&&(d.lastCommittedValue=me,d.userValue=me,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:me,willCommit:!0,commitKey:W,selStart:P.target.selectionStart,selEnd:P.target.selectionEnd}}))});const A=g;g=null,s.addEventListener("blur",P=>{if(!d.focused||!P.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:W}=P.target;d.userValue=W,d.lastCommittedValue!==W&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:W,willCommit:!0,commitKey:d.commitKey,selStart:P.target.selectionStart,selEnd:P.target.selectionEnd}}),A(P)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",P=>{d.lastCommittedValue=null;const{data:W,target:me}=P,{value:ve,selectionStart:He,selectionEnd:De}=me;let Xe=He,qe=De;switch(P.inputType){case"deleteWordBackward":{const Rs=ve.substring(0,He).match(/\w*[^\w]*$/);Rs&&(Xe-=Rs[0].length);break}case"deleteWordForward":{const Rs=ve.substring(He).match(/^[^\w]*\w*/);Rs&&(qe+=Rs[0].length);break}case"deleteContentBackward":He===De&&(Xe-=1);break;case"deleteContentForward":He===De&&(qe+=1);break}P.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:ve,change:W||"",willCommit:!1,selStart:Xe,selEnd:qe}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],P=>P.target.value)}if(g&&s.addEventListener("blur",g),this.data.comb){const P=(this.data.rect[2]-this.data.rect[0])/u;s.classList.add("comb"),s.style.letterSpacing=`calc(${P}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,a=this.data,s=a.id;let o=e.getValue(s,{value:a.exportValue===a.fieldValue}).value;typeof o=="string"&&(o=o!=="Off",e.setValue(s,{value:o})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return GetElementsByNameSet.add(l),l.setAttribute("data-element-id",s),l.disabled=a.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=a.fieldName,o&&l.setAttribute("checked",!0),l.setAttribute("exportValue",a.exportValue),l.tabIndex=0,l.addEventListener("change",u=>{const{name:c,checked:d}=u.target;for(const m of this._getElementsByName(c,s)){const g=d&&m.exportValue===a.exportValue;m.domElement&&(m.domElement.checked=g),e.setValue(m.id,{value:g})}e.setValue(s,{value:d})}),l.addEventListener("resetform",u=>{const c=a.defaultFieldValue||"Off";u.target.checked=c===a.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",u=>{const c={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,a=this.data,s=a.id;let o=e.getValue(s,{value:a.fieldValue===a.buttonValue}).value;if(typeof o=="string"&&(o=o!==a.buttonValue,e.setValue(s,{value:o})),o)for(const u of this._getElementsByName(a.fieldName,s))e.setValue(u.id,{value:!1});const l=document.createElement("input");if(GetElementsByNameSet.add(l),l.setAttribute("data-element-id",s),l.disabled=a.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=a.fieldName,o&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",u=>{const{name:c,checked:d}=u.target;for(const m of this._getElementsByName(c,s))e.setValue(m.id,{value:!1});e.setValue(s,{value:d})}),l.addEventListener("resetform",u=>{const c=a.defaultFieldValue;u.target.checked=c!=null&&c===a.buttonValue}),this.enableScripting&&this.hasJSActions){const u=a.buttonValue;l.addEventListener("updatefromsandbox",c=>{const d={value:m=>{const g=u===m.detail.value;for(const A of this._getElementsByName(m.target.name)){const P=g&&A.id===s;A.domElement&&(A.domElement.checked=P),e.setValue(A.id,{value:P})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const a=e.lastChild;return this.enableScripting&&this.hasJSActions&&a&&(this._setDefaultPropertiesFromJS(a),a.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,a=this.data.id,s=e.getValue(a,{value:this.data.fieldValue}),o=document.createElement("select");GetElementsByNameSet.add(o),o.setAttribute("data-element-id",a),o.disabled=this.data.readOnly,this._setRequired(o,this.data.required),o.name=this.data.fieldName,o.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(o.size=this.data.options.length,this.data.multiSelect&&(o.multiple=!0)),o.addEventListener("resetform",g=>{const A=this.data.defaultFieldValue;for(const P of o.options)P.selected=P.value===A});for(const g of this.data.options){const A=document.createElement("option");A.textContent=g.displayValue,A.value=g.exportValue,s.value.includes(g.exportValue)&&(A.setAttribute("selected",!0),l=!1),o.append(A)}let u=null;if(l){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),o.prepend(g),u=()=>{g.remove(),o.removeEventListener("input",u),u=null},o.addEventListener("input",u)}const c=g=>{const A=g?"value":"textContent",{options:P,multiple:W}=o;return W?Array.prototype.filter.call(P,me=>me.selected).map(me=>me[A]):P.selectedIndex===-1?null:P[P.selectedIndex][A]};let d=c(!1);const m=g=>{const A=g.target.options;return Array.prototype.map.call(A,P=>({displayValue:P.textContent,exportValue:P.value}))};return this.enableScripting&&this.hasJSActions?(o.addEventListener("updatefromsandbox",g=>{const A={value(P){u?.();const W=P.detail.value,me=new Set(Array.isArray(W)?W:[W]);for(const ve of o.options)ve.selected=me.has(ve.value);e.setValue(a,{value:c(!0)}),d=c(!1)},multipleSelection(P){o.multiple=!0},remove(P){const W=o.options,me=P.detail.remove;W[me].selected=!1,o.remove(me),W.length>0&&Array.prototype.findIndex.call(W,He=>He.selected)===-1&&(W[0].selected=!0),e.setValue(a,{value:c(!0),items:m(P)}),d=c(!1)},clear(P){for(;o.length!==0;)o.remove(0);e.setValue(a,{value:null,items:[]}),d=c(!1)},insert(P){const{index:W,displayValue:me,exportValue:ve}=P.detail.insert,He=o.children[W],De=document.createElement("option");De.textContent=me,De.value=ve,He?He.before(De):o.append(De),e.setValue(a,{value:c(!0),items:m(P)}),d=c(!1)},items(P){const{items:W}=P.detail;for(;o.length!==0;)o.remove(0);for(const me of W){const{displayValue:ve,exportValue:He}=me,De=document.createElement("option");De.textContent=ve,De.value=He,o.append(De)}o.options.length>0&&(o.options[0].selected=!0),e.setValue(a,{value:c(!0),items:m(P)}),d=c(!1)},indices(P){const W=new Set(P.detail.indices);for(const me of P.target.options)me.selected=W.has(me.index);e.setValue(a,{value:c(!0)}),d=c(!1)},editable(P){P.target.disabled=!P.detail.editable}};this._dispatchEventFromSandbox(A,g)}),o.addEventListener("input",g=>{const A=c(!0),P=c(!1);e.setValue(a,{value:A}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:d,change:P,changeEx:A,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(o,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):o.addEventListener("input",function(g){e.setValue(a,{value:c(!0)})}),this.data.combo&&this._setTextStyle(o),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(e){const{data:a,elements:s}=e;super(e,{isRenderable:AnnotationElement._hasPopupData(a)}),this.elements=s,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const a=this.popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const o of this.elements)o.popup=a,o.container.ariaHasPopup="dialog",s.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(o=>`${AnnotationPrefix}${o}`).join(",")),this.container}}class PopupElement{#e=this.#C.bind(this);#t=this.#T.bind(this);#r=this.#R.bind(this);#i=this.#E.bind(this);#a=null;#n=null;#o=null;#s=null;#h=null;#l=null;#d=null;#c=!1;#f=null;#p=null;#m=null;#u=null;#g=null;#v=null;#y=!1;constructor({container:e,color:a,elements:s,titleObj:o,modificationDate:l,contentsObj:u,richText:c,parent:d,rect:m,parentRect:g,open:A}){this.#n=e,this.#g=o,this.#o=u,this.#u=c,this.#l=d,this.#a=a,this.#m=m,this.#d=g,this.#h=s,this.#s=PDFDateString.toDateObject(l),this.trigger=s.flatMap(P=>P.getElementsToTriggerPopup());for(const P of this.trigger)P.addEventListener("click",this.#i),P.addEventListener("mouseenter",this.#r),P.addEventListener("mouseleave",this.#t),P.classList.add("popupTriggerArea");for(const P of s)P.container?.addEventListener("keydown",this.#e);this.#n.hidden=!0,A&&this.#E()}render(){if(this.#f)return;const e=this.#f=document.createElement("div");if(e.className="popup",this.#a){const l=e.style.outlineColor=Util.makeHexColor(...this.#a);e.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const a=document.createElement("span");a.className="header";const s=document.createElement("h1");if(a.append(s),{dir:s.dir,str:s.textContent}=this.#g,e.append(a),this.#s){const l=document.createElement("time");l.classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#s.valueOf()})),l.dateTime=this.#s.toISOString(),a.append(l)}const o=this.#_;if(o)XfaLayer.render({xfaHtml:o,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const l=this._formatContents(this.#o);e.append(l)}this.#n.append(e)}get#_(){const e=this.#u,a=this.#o;return e?.str&&(!a?.str||a.str===e.str)&&this.#u.html||null}get#x(){return this.#_?.attributes?.style?.fontSize||0}get#w(){return this.#_?.attributes?.style?.color||null}#A(e){const a=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:a}]}},o={style:{color:this.#w,fontSize:this.#x?`calc(${this.#x}px * var(--total-scale-factor))`:""}};for(const l of e.split(`
`))a.push({name:"span",value:l,attributes:o});return s}_formatContents({str:e,dir:a}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=a;const o=e.split(/(?:\r\n?|\n)/);for(let l=0,u=o.length;l<u;++l){const c=o[l];s.append(document.createTextNode(c)),l<u-1&&s.append(document.createElement("br"))}return s}#C(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#c)&&this.#E()}updateEdited({rect:e,popupContent:a}){this.#v||={contentsObj:this.#o,richText:this.#u},e&&(this.#p=null),a&&(this.#u=this.#A(a),this.#o=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#v&&({contentsObj:this.#o,richText:this.#u}=this.#v,this.#v=null,this.#f?.remove(),this.#f=null,this.#p=null)}#M(){if(this.#p!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:l}}}=this.#l;let u=!!this.#d,c=u?this.#d:this.#m;for(const me of this.#h)if(!c||Util.intersect(me.data.rect,c)!==null){c=me.data.rect,u=!0;break}const d=Util.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),g=u?c[2]-c[0]+5:0,A=d[0]+g,P=d[1];this.#p=[100*(A-o)/a,100*(P-l)/s];const{style:W}=this.#n;W.left=`${this.#p[0]}%`,W.top=`${this.#p[1]}%`}#E(){this.#c=!this.#c,this.#c?(this.#R(),this.#n.addEventListener("click",this.#i),this.#n.addEventListener("keydown",this.#e)):(this.#T(),this.#n.removeEventListener("click",this.#i),this.#n.removeEventListener("keydown",this.#e))}#R(){this.#f||this.render(),this.isVisible?this.#c&&this.#n.classList.add("focused"):(this.#M(),this.#n.hidden=!1,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)+1e3)}#T(){this.#n.classList.remove("focused"),!(this.#c||!this.isVisible)&&(this.#n.hidden=!0,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#n.hidden=!0)}maybeShow(){this.#y&&(this.#f||this.#R(),this.#y=!1,this.#n.hidden=!1)}get isVisible(){return this.#n.hidden===!1}}class FreeTextAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const a of this.textContent){const s=document.createElement("span");s.textContent=a,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class LineAnnotationElement extends AnnotationElement{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:a,height:s}=this,o=this.svgFactory.create(a,s,!0),l=this.#e=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class SquareAnnotationElement extends AnnotationElement{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:a,height:s}=this,o=this.svgFactory.create(a,s,!0),l=e.borderStyle.width,u=this.#e=this.svgFactory.createElement("svg:rect");return u.setAttribute("x",l/2),u.setAttribute("y",l/2),u.setAttribute("width",a-l),u.setAttribute("height",s-l),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class CircleAnnotationElement extends AnnotationElement{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:a,height:s}=this,o=this.svgFactory.create(a,s,!0),l=e.borderStyle.width,u=this.#e=this.svgFactory.createElement("svg:ellipse");return u.setAttribute("cx",a/2),u.setAttribute("cy",s/2),u.setAttribute("rx",a/2-l/2),u.setAttribute("ry",s/2-l/2),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class PolylineAnnotationElement extends AnnotationElement{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:a,borderStyle:s,popupRef:o},width:l,height:u}=this;if(!a)return this.container;const c=this.svgFactory.create(l,u,!0);let d=[];for(let g=0,A=a.length;g<A;g+=2){const P=a[g]-e[0],W=e[3]-a[g+1];d.push(`${P},${W}`)}d=d.join(" ");const m=this.#e=this.svgFactory.createElement(this.svgElementName);return m.setAttribute("points",d),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),c.append(m),this.container.append(c),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class InkAnnotationElement extends AnnotationElement{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}#r(e,a){switch(e){case 90:return{transform:`rotate(90) translate(${-a[0]},${a[1]}) scale(1,-1)`,width:a[3]-a[1],height:a[2]-a[0]};case 180:return{transform:`rotate(180) translate(${-a[2]},${a[1]}) scale(1,-1)`,width:a[2]-a[0],height:a[3]-a[1]};case 270:return{transform:`rotate(270) translate(${-a[2]},${a[3]}) scale(1,-1)`,width:a[3]-a[1],height:a[2]-a[0]};default:return{transform:`translate(${-a[0]},${a[3]}) scale(1,-1)`,width:a[2]-a[0],height:a[3]-a[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:a,inkLists:s,borderStyle:o,popupRef:l}}=this,{transform:u,width:c,height:d}=this.#r(a,e),m=this.svgFactory.create(c,d,!0),g=this.#e=this.svgFactory.createElement("svg:g");m.append(g),g.setAttribute("stroke-width",o.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",u);for(let A=0,P=s.length;A<P;A++){const W=this.svgFactory.createElement(this.svgElementName);this.#t.push(W),W.setAttribute("points",s[A].join(",")),g.append(W)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:a,points:s,rect:o}=e,l=this.#e;if(a>=0&&l.setAttribute("stroke-width",a||1),s)for(let u=0,c=this.#t.length;u<c;u++)this.#t[u].setAttribute("points",s[u].join(","));if(o){const{transform:u,width:c,height:d}=this.#r(this.data.rotation,o);l.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),l.setAttribute("transform",u)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class HighlightAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:a}}=this;if(!a&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:a}}=this;if(!a&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:a}}=this;if(!a&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:a}}=this;if(!a&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class FileAttachmentAnnotationElement extends AnnotationElement{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:a}=this.data;this.filename=a.filename,this.content=a.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...a})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:a}=this;let s;a.hasAppearance||a.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(a.name)?"paperclip":"pushpin"}.svg`,a.fillAlpha&&a.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(a.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#t.bind(this)),this.#e=s;const{isMac:o}=util_FeatureTest.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(o?l.metaKey:l.ctrlKey)&&this.#t()}),!a.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let AnnotationLayer$1=class Nw{#e=null;#t=null;#r=new Map;#i=null;constructor({div:e,accessibilityManager:a,annotationCanvasMap:s,annotationEditorUIManager:o,page:l,viewport:u,structTreeLayer:c}){this.div=e,this.#e=a,this.#t=s,this.#i=c||null,this.page=l,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=o}hasEditableAnnotations(){return this.#r.size>0}async#a(e,a,s){const o=e.firstChild||e,l=o.id=`${AnnotationPrefix}${a}`,u=await this.#i?.getAriaAttributes(l);if(u)for(const[c,d]of u)o.setAttribute(c,d);s?s.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,o,!1))}async render(e){const{annotations:a}=e,s=this.div;setLayerDimensions(s,this.viewport);const o=new Map,l={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:e.annotationStorage||new AnnotationStorage,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of a){if(u.noHTML)continue;const c=u.annotationType===AnnotationType.POPUP;if(c){const g=o.get(u.id);if(!g)continue;l.elements=g}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;l.data=u;const d=AnnotationElementFactory.create(l);if(!d.isRenderable)continue;if(!c&&u.popupRef){const g=o.get(u.popupRef);g?g.push(d):o.set(u.popupRef,[d])}const m=d.render();u.hidden&&(m.style.visibility="hidden"),await this.#a(m,u.id,l.elements),d._isEditable&&(this.#r.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#n()}async addLinkAnnotations(e,a){const s={data:null,layer:this.div,linkService:a,svgFactory:new DOMSVGFactory,parent:this};for(const o of e){o.borderStyle||=Nw._defaultBorderStyle,s.data=o;const l=AnnotationElementFactory.create(s);if(!l.isRenderable)continue;const u=l.render();await this.#a(u,o.id,null)}}update({viewport:e}){const a=this.div;this.viewport=e,setLayerDimensions(a,{rotation:e.rotation}),this.#n(),a.hidden=!1}#n(){if(!this.#t)return;const e=this.div;for(const[a,s]of this.#t){const o=e.querySelector(`[data-annotation-id="${a}"]`);if(!o)continue;s.className="annotationContent";const{firstChild:l}=o;l?l.nodeName==="CANVAS"?l.replaceWith(s):l.classList.contains("annotationContent")?l.after(s):l.before(s):o.append(s);const u=this.#r.get(a);u&&(u._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(a,o.id,s),u._hasNoCanvas=!1):u.canvas=s)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#r.values())}getEditableAnnotation(e){return this.#r.get(e)}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const EOL_PATTERN=/\r\n?|\n/g;class FreeTextEditor extends AnnotationEditor{#e;#t="";#r=`${this.id}-editor`;#i=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=FreeTextEditor.prototype,a=l=>l.isEmpty(),s=AnnotationEditorUIManager.TRANSLATE_SMALL,o=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:a}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:a}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:a}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:a}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:a}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:a}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:a}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:a}]]))}static _type="freetext";static _editorType=AnnotationEditorType.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor,this.#a=e.fontSize||FreeTextEditor._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,a){AnnotationEditor.initialize(e,a);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,a){switch(e){case AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=a;break;case AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=a;break}}updateParams(e,a){switch(e){case AnnotationEditorParamsType.FREETEXT_SIZE:this.#n(a);break;case AnnotationEditorParamsType.FREETEXT_COLOR:this.#o(a);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,this.#a],[AnnotationEditorParamsType.FREETEXT_COLOR,this.#e]]}#n(e){const a=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-this.#a)*this.parentScale),this.#a=o,this.#h()},s=this.#a;this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(e){const a=o=>{this.#e=this.editorDiv.style.color=o},s=this.#e;this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,a){this._uiManager.translateSelectedEditors(e,a,!0)}getInitialTranslation(){const e=this.parentScale;return[-FreeTextEditor._internalPadding*e,-(FreeTextEditor._internalPadding+this.#a)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#r),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const e=[];this.editorDiv.normalize();let a=null;for(const s of this.editorDiv.childNodes)a?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(FreeTextEditor.#l(s)),a=s);return e.join(`
`)}#h(){const[e,a]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:o,div:l}=this,u=l.style.display,c=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",o.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=u,l.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/a):(this.width=s.height/e,this.height=s.width/a),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,a=this.#t=this.#s().trimEnd();if(e===a)return;const s=o=>{if(this.#t=o,!o){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{s(a)},undo:()=>{s(e)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){FreeTextEditor._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,a;(this._isCopy||this.annotationElementId)&&(e=this.x,a=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#r),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,s.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[o,l]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[m,g]=this.pageDimensions,[A,P]=this.pageTranslation;let W,me;switch(this.rotation){case 0:W=e+(u[0]-A)/m,me=a+this.height-(u[1]-P)/g;break;case 90:W=e+(u[0]-A)/m,me=a-(u[1]-P)/g,[c,d]=[d,-c];break;case 180:W=e-this.width+(u[0]-A)/m,me=a-(u[1]-P)/g,[c,d]=[-c,-d];break;case 270:W=e+(u[0]-A-this.height*g)/m,me=a+(u[1]-P-this.width*m)/g,[c,d]=[-d,c];break}this.setAt(W*o,me*l,c,d)}else this._moveAfterPaste(e,a);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(EOL_PATTERN,"")}editorDivPaste(e){const a=e.clipboardData||window.clipboardData,{types:s}=a;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const o=FreeTextEditor.#f(a.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const u=l.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:c,startOffset:d}=u,m=[],g=[];if(c.nodeType===Node.TEXT_NODE){const W=c.parentElement;if(g.push(c.nodeValue.slice(d).replaceAll(EOL_PATTERN,"")),W!==this.editorDiv){let me=m;for(const ve of this.editorDiv.childNodes){if(ve===W){me=g;continue}me.push(FreeTextEditor.#l(ve))}}m.push(c.nodeValue.slice(0,d).replaceAll(EOL_PATTERN,""))}else if(c===this.editorDiv){let W=m,me=0;for(const ve of this.editorDiv.childNodes)me++===d&&(W=g),W.push(FreeTextEditor.#l(ve))}this.#t=`${m.join(`
`)}${o}${g.join(`
`)}`,this.#d();const A=new Range;let P=Math.sumPrecise(m.map(W=>W.length));for(const{firstChild:W}of this.editorDiv.childNodes)if(W.nodeType===Node.TEXT_NODE){const me=W.nodeValue.length;if(P<=me){A.setStart(W,P),A.setEnd(W,P);break}P-=me}l.removeAllRanges(),l.addRange(A)}#d(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const a=document.createElement("div");a.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(a)}}#c(){return this.#t.replaceAll(""," ")}static#f(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(e,a,s){let o=null;if(e instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:u,fontColor:c},rect:d,rotation:m,id:g,popupRef:A},textContent:P,textPosition:W,parent:{page:{pageNumber:me}}}=e;if(!P||P.length===0)return null;o=e={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(c),fontSize:u,value:P.join(`
`),position:W,pageIndex:me-1,rect:d.slice(0),rotation:m,annotationElementId:g,id:g,deleted:!1,popupRef:A}}const l=await super.deserialize(e,a,s);return l.#a=e.fontSize,l.#e=Util.makeHexColor(...e.color),l.#t=FreeTextEditor.#f(e.value),l._initialData=o,l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a=FreeTextEditor._internalPadding*this.parentScale,s=this.getRect(a,a),o=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),l={annotationType:AnnotationEditorType.FREETEXT,color:o,fontSize:this.#a,value:this.#c(),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(l.isCopy=!0,l):this.annotationElementId&&!this.#p(l)?null:(l.id=this.annotationElementId,l)}#p(e){const{value:a,fontSize:s,color:o,pageIndex:l}=this._initialData;return this._hasBeenMoved||e.value!==a||e.fontSize!==s||e.color.some((u,c)=>u!==o[c])||e.pageIndex!==l}renderAnnotationElement(e){const a=super.renderAnnotationElement(e);if(this.deleted)return a;const{style:s}=a;s.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,s.color=this.#e,a.replaceChildren();for(const l of this.#t.split(`
`)){const u=document.createElement("div");u.append(l?document.createTextNode(l):document.createElement("br")),a.append(u)}const o=FreeTextEditor._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:this.#t}),a}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Outline{static PRECISION=1e-4;toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(e,a){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(e,a,s,o,l,u){u||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)u[c]=a+e[c]*o,u[c+1]=s+e[c+1]*l;return u}static _rescaleAndSwap(e,a,s,o,l,u){u||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)u[c]=a+e[c+1]*o,u[c+1]=s+e[c]*l;return u}static _translate(e,a,s,o){o||=new Float32Array(e.length);for(let l=0,u=e.length;l<u;l+=2)o[l]=a+e[l],o[l+1]=s+e[l+1];return o}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,a,s,o,l){switch(l){case 90:return[1-a/s,e/o];case 180:return[1-e/s,1-a/o];case 270:return[a/s,1-e/o];default:return[e/s,a/o]}}static _normalizePagePoint(e,a,s){switch(s){case 90:return[1-a,e];case 180:return[1-e,1-a];case 270:return[a,1-e];default:return[e,a]}}static createBezierPoints(e,a,s,o,l,u){return[(e+5*s)/6,(a+5*o)/6,(5*s+l)/6,(5*o+u)/6,(s+l)/2,(o+u)/2]}}class FreeDrawOutliner{#e;#t=[];#r;#i;#a=[];#n=new Float32Array(18);#o;#s;#h;#l;#d;#c;#f=[];static#p=8;static#m=2;static#u=FreeDrawOutliner.#p+FreeDrawOutliner.#m;constructor({x:e,y:a},s,o,l,u,c=0){this.#e=s,this.#c=l*o,this.#i=u,this.#n.set([NaN,NaN,NaN,NaN,e,a],6),this.#r=c,this.#l=FreeDrawOutliner.#p*o,this.#h=FreeDrawOutliner.#u*o,this.#d=o,this.#f.push(e,a)}isEmpty(){return isNaN(this.#n[8])}#g(){const e=this.#n.subarray(4,6),a=this.#n.subarray(16,18),[s,o,l,u]=this.#e;return[(this.#o+(e[0]-a[0])/2-s)/l,(this.#s+(e[1]-a[1])/2-o)/u,(this.#o+(a[0]-e[0])/2-s)/l,(this.#s+(a[1]-e[1])/2-o)/u]}add({x:e,y:a}){this.#o=e,this.#s=a;const[s,o,l,u]=this.#e;let[c,d,m,g]=this.#n.subarray(8,12);const A=e-m,P=a-g,W=Math.hypot(A,P);if(W<this.#h)return!1;const me=W-this.#l,ve=me/W,He=ve*A,De=ve*P;let Xe=c,qe=d;c=m,d=g,m+=He,g+=De,this.#f?.push(e,a);const Rs=-De/me,Vc=He/me,So=Rs*this.#c,Do=Vc*this.#c;return this.#n.set(this.#n.subarray(2,8),0),this.#n.set([m+So,g+Do],4),this.#n.set(this.#n.subarray(14,18),12),this.#n.set([m-So,g-Do],16),isNaN(this.#n[6])?(this.#a.length===0&&(this.#n.set([c+So,d+Do],2),this.#a.push(NaN,NaN,NaN,NaN,(c+So-s)/l,(d+Do-o)/u),this.#n.set([c-So,d-Do],14),this.#t.push(NaN,NaN,NaN,NaN,(c-So-s)/l,(d-Do-o)/u)),this.#n.set([Xe,qe,c,d,m,g],6),!this.isEmpty()):(this.#n.set([Xe,qe,c,d,m,g],6),Math.abs(Math.atan2(qe-d,Xe-c)-Math.atan2(De,He))<Math.PI/2?([c,d,m,g]=this.#n.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((c+m)/2-s)/l,((d+g)/2-o)/u),[c,d,Xe,qe]=this.#n.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((Xe+c)/2-s)/l,((qe+d)/2-o)/u),!0):([Xe,qe,c,d,m,g]=this.#n.subarray(0,6),this.#a.push(((Xe+5*c)/6-s)/l,((qe+5*d)/6-o)/u,((5*c+m)/6-s)/l,((5*d+g)/6-o)/u,((c+m)/2-s)/l,((d+g)/2-o)/u),[m,g,c,d,Xe,qe]=this.#n.subarray(12,18),this.#t.push(((Xe+5*c)/6-s)/l,((qe+5*d)/6-o)/u,((5*c+m)/6-s)/l,((5*d+g)/6-o)/u,((c+m)/2-s)/l,((d+g)/2-o)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,a=this.#t;if(isNaN(this.#n[6])&&!this.isEmpty())return this.#v();const s=[];s.push(`M${e[4]} ${e[5]}`);for(let o=6;o<e.length;o+=6)isNaN(e[o])?s.push(`L${e[o+4]} ${e[o+5]}`):s.push(`C${e[o]} ${e[o+1]} ${e[o+2]} ${e[o+3]} ${e[o+4]} ${e[o+5]}`);this.#_(s);for(let o=a.length-6;o>=6;o-=6)isNaN(a[o])?s.push(`L${a[o+4]} ${a[o+5]}`):s.push(`C${a[o]} ${a[o+1]} ${a[o+2]} ${a[o+3]} ${a[o+4]} ${a[o+5]}`);return this.#y(s),s.join(" ")}#v(){const[e,a,s,o]=this.#e,[l,u,c,d]=this.#g();return`M${(this.#n[2]-e)/s} ${(this.#n[3]-a)/o} L${(this.#n[4]-e)/s} ${(this.#n[5]-a)/o} L${l} ${u} L${c} ${d} L${(this.#n[16]-e)/s} ${(this.#n[17]-a)/o} L${(this.#n[14]-e)/s} ${(this.#n[15]-a)/o} Z`}#y(e){const a=this.#t;e.push(`L${a[4]} ${a[5]} Z`)}#_(e){const[a,s,o,l]=this.#e,u=this.#n.subarray(4,6),c=this.#n.subarray(16,18),[d,m,g,A]=this.#g();e.push(`L${(u[0]-a)/o} ${(u[1]-s)/l} L${d} ${m} L${g} ${A} L${(c[0]-a)/o} ${(c[1]-s)/l}`)}newFreeDrawOutline(e,a,s,o,l,u){return new FreeDrawOutline(e,a,s,o,l,u)}getOutlines(){const e=this.#a,a=this.#t,s=this.#n,[o,l,u,c]=this.#e,d=new Float32Array((this.#f?.length??0)+2);for(let A=0,P=d.length-2;A<P;A+=2)d[A]=(this.#f[A]-o)/u,d[A+1]=(this.#f[A+1]-l)/c;if(d[d.length-2]=(this.#o-o)/u,d[d.length-1]=(this.#s-l)/c,isNaN(s[6])&&!this.isEmpty())return this.#x(d);const m=new Float32Array(this.#a.length+24+this.#t.length);let g=e.length;for(let A=0;A<g;A+=2){if(isNaN(e[A])){m[A]=m[A+1]=NaN;continue}m[A]=e[A],m[A+1]=e[A+1]}g=this.#A(m,g);for(let A=a.length-6;A>=6;A-=6)for(let P=0;P<6;P+=2){if(isNaN(a[A+P])){m[g]=m[g+1]=NaN,g+=2;continue}m[g]=a[A+P],m[g+1]=a[A+P+1],g+=2}return this.#w(m,g),this.newFreeDrawOutline(m,d,this.#e,this.#d,this.#r,this.#i)}#x(e){const a=this.#n,[s,o,l,u]=this.#e,[c,d,m,g]=this.#g(),A=new Float32Array(36);return A.set([NaN,NaN,NaN,NaN,(a[2]-s)/l,(a[3]-o)/u,NaN,NaN,NaN,NaN,(a[4]-s)/l,(a[5]-o)/u,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(a[16]-s)/l,(a[17]-o)/u,NaN,NaN,NaN,NaN,(a[14]-s)/l,(a[15]-o)/u],0),this.newFreeDrawOutline(A,e,this.#e,this.#d,this.#r,this.#i)}#w(e,a){const s=this.#t;return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],a),a+=6}#A(e,a){const s=this.#n.subarray(4,6),o=this.#n.subarray(16,18),[l,u,c,d]=this.#e,[m,g,A,P]=this.#g();return e.set([NaN,NaN,NaN,NaN,(s[0]-l)/c,(s[1]-u)/d,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,A,P,NaN,NaN,NaN,NaN,(o[0]-l)/c,(o[1]-u)/d],a),a+=24}}class FreeDrawOutline extends Outline{#e;#t=new Float32Array(4);#r;#i;#a;#n;#o;constructor(e,a,s,o,l,u){super(),this.#o=e,this.#a=a,this.#e=s,this.#n=o,this.#r=l,this.#i=u,this.lastPoint=[NaN,NaN],this.#s(u);const[c,d,m,g]=this.#t;for(let A=0,P=e.length;A<P;A+=2)e[A]=(e[A]-c)/m,e[A+1]=(e[A+1]-d)/g;for(let A=0,P=a.length;A<P;A+=2)a[A]=(a[A]-c)/m,a[A+1]=(a[A+1]-d)/g}toSVGPath(){const e=[`M${this.#o[4]} ${this.#o[5]}`];for(let a=6,s=this.#o.length;a<s;a+=6){if(isNaN(this.#o[a])){e.push(`L${this.#o[a+4]} ${this.#o[a+5]}`);continue}e.push(`C${this.#o[a]} ${this.#o[a+1]} ${this.#o[a+2]} ${this.#o[a+3]} ${this.#o[a+4]} ${this.#o[a+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,a,s,o],l){const u=s-e,c=o-a;let d,m;switch(l){case 0:d=Outline._rescale(this.#o,e,o,u,-c),m=Outline._rescale(this.#a,e,o,u,-c);break;case 90:d=Outline._rescaleAndSwap(this.#o,e,a,u,c),m=Outline._rescaleAndSwap(this.#a,e,a,u,c);break;case 180:d=Outline._rescale(this.#o,s,a,-u,c),m=Outline._rescale(this.#a,s,a,-u,c);break;case 270:d=Outline._rescaleAndSwap(this.#o,s,o,-u,-c),m=Outline._rescaleAndSwap(this.#a,s,o,-u,-c);break}return{outline:Array.from(d),points:[Array.from(m)]}}#s(e){const a=this.#o;let s=a[4],o=a[5];const l=[s,o,s,o];let u=s,c=o;const d=e?Math.max:Math.min;for(let g=6,A=a.length;g<A;g+=6){const P=a[g+4],W=a[g+5];if(isNaN(a[g]))Util.pointBoundingBox(P,W,l),c<W?(u=P,c=W):c===W&&(u=d(u,P));else{const me=[1/0,1/0,-1/0,-1/0];Util.bezierBoundingBox(s,o,...a.slice(g,g+6),me),Util.rectBoundingBox(...me,l),c<me[3]?(u=me[2],c=me[3]):c===me[3]&&(u=d(u,me[2]))}s=P,o=W}const m=this.#t;m[0]=l[0]-this.#r,m[1]=l[1]-this.#r,m[2]=l[2]-l[0]+2*this.#r,m[3]=l[3]-l[1]+2*this.#r,this.lastPoint=[u,c]}get box(){return this.#t}newOutliner(e,a,s,o,l,u=0){return new FreeDrawOutliner(e,a,s,o,l,u)}getNewOutline(e,a){const[s,o,l,u]=this.#t,[c,d,m,g]=this.#e,A=l*m,P=u*g,W=s*m+c,me=o*g+d,ve=this.newOutliner({x:this.#a[0]*A+W,y:this.#a[1]*P+me},this.#e,this.#n,e,this.#i,a??this.#r);for(let He=2;He<this.#a.length;He+=2)ve.add({x:this.#a[He]*A+W,y:this.#a[He+1]*P+me});return ve.getOutlines()}}class HighlightOutliner{#e;#t;#r=[];#i=[];constructor(e,a=0,s=0,o=!0){const l=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x:W,y:me,width:ve,height:He}of e){const De=Math.floor((W-a)/u)*u,Xe=Math.ceil((W+ve+a)/u)*u,qe=Math.floor((me-a)/u)*u,Rs=Math.ceil((me+He+a)/u)*u,Vc=[De,qe,Rs,!0],So=[Xe,qe,Rs,!1];this.#r.push(Vc,So),Util.rectBoundingBox(De,qe,Xe,Rs,l)}const c=l[2]-l[0]+2*s,d=l[3]-l[1]+2*s,m=l[0]-s,g=l[1]-s,A=this.#r.at(o?-1:-2),P=[A[0],A[2]];for(const W of this.#r){const[me,ve,He]=W;W[0]=(me-m)/c,W[1]=(ve-g)/d,W[2]=(He-g)/d}this.#e=new Float32Array([m,g,c,d]),this.#t=P}getOutlines(){this.#r.sort((a,s)=>a[0]-s[0]||a[1]-s[1]||a[2]-s[2]);const e=[];for(const a of this.#r)a[3]?(e.push(...this.#h(a)),this.#o(a)):(this.#s(a),e.push(...this.#h(a)));return this.#a(e)}#a(e){const a=[],s=new Set;for(const u of e){const[c,d,m]=u;a.push([c,d,u],[c,m,u])}a.sort((u,c)=>u[1]-c[1]||u[0]-c[0]);for(let u=0,c=a.length;u<c;u+=2){const d=a[u][2],m=a[u+1][2];d.push(m),m.push(d),s.add(d),s.add(m)}const o=[];let l;for(;s.size>0;){const u=s.values().next().value;let[c,d,m,g,A]=u;s.delete(u);let P=c,W=d;for(l=[c,m],o.push(l);;){let me;if(s.has(g))me=g;else if(s.has(A))me=A;else break;s.delete(me),[c,d,m,g,A]=me,P!==c&&(l.push(P,W,c,W===d?d:m),P=c),W=W===d?m:d}l.push(P,W)}return new HighlightOutline(o,this.#e,this.#t)}#n(e){const a=this.#i;let s=0,o=a.length-1;for(;s<=o;){const l=s+o>>1,u=a[l][0];if(u===e)return l;u<e?s=l+1:o=l-1}return o+1}#o([,e,a]){const s=this.#n(e);this.#i.splice(s,0,[e,a])}#s([,e,a]){const s=this.#n(e);for(let o=s;o<this.#i.length;o++){const[l,u]=this.#i[o];if(l!==e)break;if(l===e&&u===a){this.#i.splice(o,1);return}}for(let o=s-1;o>=0;o--){const[l,u]=this.#i[o];if(l!==e)break;if(l===e&&u===a){this.#i.splice(o,1);return}}}#h(e){const[a,s,o]=e,l=[[a,s,o]],u=this.#n(o);for(let c=0;c<u;c++){const[d,m]=this.#i[c];for(let g=0,A=l.length;g<A;g++){const[,P,W]=l[g];if(!(m<=P||W<=d)){if(P>=d){if(W>m)l[g][1]=m;else{if(A===1)return[];l.splice(g,1),g--,A--}continue}l[g][2]=d,W>m&&l.push([a,m,W])}}}return l}}class HighlightOutline extends Outline{#e;#t;constructor(e,a,s){super(),this.#t=e,this.#e=a,this.lastPoint=s}toSVGPath(){const e=[];for(const a of this.#t){let[s,o]=a;e.push(`M${s} ${o}`);for(let l=2;l<a.length;l+=2){const u=a[l],c=a[l+1];u===s?(e.push(`V${c}`),o=c):c===o&&(e.push(`H${u}`),s=u)}e.push("Z")}return e.join(" ")}serialize([e,a,s,o],l){const u=[],c=s-e,d=o-a;for(const m of this.#t){const g=new Array(m.length);for(let A=0;A<m.length;A+=2)g[A]=e+m[A]*c,g[A+1]=o-m[A+1]*d;u.push(g)}return u}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(e,a,s,o,l,u){return new FreeHighlightOutline(e,a,s,o,l,u)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(e,a,s,o,l,u=0){return new FreeHighlightOutliner(e,a,s,o,l,u)}}class ColorPicker{#e=null;#t=null;#r;#i=null;#a=!1;#n=!1;#o=null;#s;#h=null;#l=null;#d;static#c=null;static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],ColorPicker.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ColorPicker.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ColorPicker.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ColorPicker.prototype._moveToPrevious],[["Home","mac+Home"],ColorPicker.prototype._moveToBeginning],[["End","mac+End"],ColorPicker.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:a=null}){e?(this.#n=!1,this.#d=AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.#o=e):(this.#n=!0,this.#d=AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR),this.#l=e?._uiManager||a,this.#s=this.#l._eventBus,this.#r=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",ColorPicker.#c||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#o&&(e.ariaControls=`${this.#o.id}_colorpicker_dropdown`);const a=this.#l._signal;e.addEventListener("click",this.#u.bind(this),{signal:a}),e.addEventListener("keydown",this.#m.bind(this),{signal:a});const s=this.#t=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#r,e.append(s),e}renderMainDropdown(){const e=this.#i=this.#f();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#f(){const e=document.createElement("div"),a=this.#l._signal;e.addEventListener("contextmenu",noContextMenu,{signal:a}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#o&&(e.id=`${this.#o.id}_colorpicker_dropdown`);for(const[s,o]of this.#l.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",o),l.title=s,l.setAttribute("data-l10n-id",ColorPicker.#c[s]);const u=document.createElement("span");l.append(u),u.className="swatch",u.style.backgroundColor=o,l.ariaSelected=o===this.#r,l.addEventListener("click",this.#p.bind(this,o),{signal:a}),e.append(l)}return e.addEventListener("keydown",this.#m.bind(this),{signal:a}),e}#p(e,a){a.stopPropagation(),this.#s.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#u(e);return}const a=e.target.getAttribute("data-color");a&&this.#p(a,e)}_moveToNext(e){if(!this.#v){this.#u(e);return}if(e.target===this.#e){this.#i.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#i?.firstChild||e.target===this.#e){this.#v&&this._hideDropdownFromKeyboard();return}this.#v||this.#u(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#v){this.#u(e);return}this.#i.firstChild?.focus()}_moveToEnd(e){if(!this.#v){this.#u(e);return}this.#i.lastChild?.focus()}#m(e){ColorPicker._keyboardManager.exec(this,e)}#u(e){if(this.#v){this.hideDropdown();return}if(this.#a=e.detail===0,this.#h||(this.#h=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#l.combinedSignal(this.#h)})),this.#e.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const a=this.#i=this.#f();this.#e.append(a)}#g(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#h?.abort(),this.#h=null}get#v(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#n){if(!this.#v){this.#o?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#i)return;const a=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=a.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}}class HighlightEditor extends AnnotationEditor{#e=null;#t=0;#r;#i=null;#a=null;#n=null;#o=null;#s=0;#h=null;#l=null;#d=null;#c=!1;#f=null;#p;#m=null;#u="";#g;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=AnnotationEditorType.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=HighlightEditor.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||HighlightEditor._defaultColor,this.#g=e.thickness||HighlightEditor._defaultThickness,this.#p=e.opacity||HighlightEditor._defaultOpacity,this.#r=e.boxes||null,this.#v=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#c=!0,this.#_(e),this.#M()):this.#r&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#o=e.focusNode,this.#s=e.focusOffset,this.#y(),this.#M(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#c?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new HighlightOutliner(this.#r,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const a=new HighlightOutliner(this.#r,.0025,.001,this._uiManager.direction==="ltr");this.#n=a.getOutlines();const{lastPoint:s}=this.#n;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#_({highlightOutlines:e,highlightId:a,clipPathId:s}){this.#l=e;const o=1.5;if(this.#n=e.getNewOutline(this.#g/2+o,.0025),a>=0)this.#d=a,this.#i=s,this.parent.drawLayer.finalizeDraw(a,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:HighlightEditor.#E(this.#l.box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:HighlightEditor.#E(this.#n.box,g),path:{d:this.#n.toSVGPath()}})}const[l,u,c,d]=e.box;switch(this.rotation){case 0:this.x=l,this.y=u,this.width=c,this.height=d;break;case 90:{const[g,A]=this.parentDimensions;this.x=u,this.y=1-l,this.width=c*A/g,this.height=d*g/A;break}case 180:this.x=1-l,this.y=1-u,this.width=c,this.height=d;break;case 270:{const[g,A]=this.parentDimensions;this.x=1-u,this.y=l,this.width=c*A/g,this.height=d*g/A;break}}const{lastPoint:m}=this.#n;this.#f=[(m[0]-l)/c,(m[1]-u)/d]}static initialize(e,a){AnnotationEditor.initialize(e,a),HighlightEditor._defaultColor||=a.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,a){switch(e){case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:HighlightEditor._defaultColor=a;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:HighlightEditor._defaultThickness=a;break}}translateInPage(e,a){}get toolbarPosition(){return this.#f}updateParams(e,a){switch(e){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:this.#x(a);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:this.#w(a);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,HighlightEditor._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,HighlightEditor._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||HighlightEditor._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,this.#g||HighlightEditor._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,this.#c]]}#x(e){const a=(l,u)=>{this.color=l,this.#p=u,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:l,"fill-opacity":u}}),this.#a?.updateColor(l)},s=this.color,o=this.#p;this.addCommands({cmd:a.bind(this,e,HighlightEditor._defaultOpacity),undo:a.bind(this,s,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#w(e){const a=this.#g,s=o=>{this.#g=o,this.#A(o)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new ColorPicker({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,a){return super.getRect(e,a,this.#P())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let a=!1;this.parent&&!e?this.#C():e&&(this.#M(e),a=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),a&&this.select()}#A(e){if(!this.#c)return;this.#_({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition();const[a,s]=this.parentDimensions;this.setDims(this.width*a,this.height*s)}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#M(e=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#c},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#c},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},this.#c),this.#h&&(this.#h.style.clipPath=this.#i))}static#E([e,a,s,o],l){switch(l){case 90:return[1-a-o,e,o,s];case 180:return[1-e-s,1-a-o,s,o];case 270:return[a,1-e-s,o,s]}return[e,a,s,o]}rotate(e){const{drawLayer:a}=this.parent;let s;this.#c?(e=(e-this.rotation+360)%360,s=HighlightEditor.#E(this.#l.box,e)):s=HighlightEditor.#E([this.x,this.y,this.width,this.height],e),a.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":e}}),a.updateProperties(this.#m,{bbox:HighlightEditor.#E(this.#n.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#c?e.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const a=this.#h=document.createElement("div");e.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",a.style.clipPath=this.#i;const[s,o]=this.parentDimensions;return this.setDims(this.width*s,this.height*o),bindEvents(this,this.#h,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#R(e){HighlightEditor._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(e){if(!this.#e)return;const a=window.getSelection();e?a.setPosition(this.#e,this.#t):a.setPosition(this.#o,this.#s)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#c||this.#T(!1))}get _mustFixPosition(){return!this.#c}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#P(){return this.#c?this.rotation:0}#I(){if(this.#c)return null;const[e,a]=this.pageDimensions,[s,o]=this.pageTranslation,l=this.#r,u=new Float32Array(l.length*8);let c=0;for(const{x:d,y:m,width:g,height:A}of l){const P=d*e+s,W=(1-m)*a+o;u[c]=u[c+4]=P,u[c+1]=u[c+3]=W,u[c+2]=u[c+6]=P+g*e,u[c+5]=u[c+7]=W-A*a,c+=8}return u}#D(e){return this.#l.serialize(e,this.#P())}static startHighlighting(e,a,{target:s,x:o,y:l}){const{x:u,y:c,width:d,height:m}=s.getBoundingClientRect(),g=new AbortController,A=e.combinedSignal(g),P=W=>{g.abort(),this.#S(e,W)};window.addEventListener("blur",P,{signal:A}),window.addEventListener("pointerup",P,{signal:A}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",noContextMenu,{signal:A}),s.addEventListener("pointermove",this.#q.bind(this,e),{signal:A}),this._freeHighlight=new FreeHighlightOutliner({x:o,y:l},[u,c,d,m],e.scale,this._defaultThickness/2,a,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#q(e,a){this._freeHighlight.add(a)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#S(e,a){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(a,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,a,s){let o=null;if(e instanceof HighlightAnnotationElement){const{data:{quadPoints:me,rect:ve,rotation:He,id:De,color:Xe,opacity:qe,popupRef:Rs},parent:{page:{pageNumber:Vc}}}=e;o=e={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(Xe),opacity:qe,quadPoints:me,boxes:null,pageIndex:Vc-1,rect:ve.slice(0),rotation:He,annotationElementId:De,id:De,deleted:!1,popupRef:Rs}}else if(e instanceof InkAnnotationElement){const{data:{inkLists:me,rect:ve,rotation:He,id:De,color:Xe,borderStyle:{rawWidth:qe},popupRef:Rs},parent:{page:{pageNumber:Vc}}}=e;o=e={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(Xe),thickness:qe,inkLists:me,boxes:null,pageIndex:Vc-1,rect:ve.slice(0),rotation:He,annotationElementId:De,id:De,deleted:!1,popupRef:Rs}}const{color:l,quadPoints:u,inkLists:c,opacity:d}=e,m=await super.deserialize(e,a,s);m.color=Util.makeHexColor(...l),m.#p=d||1,c&&(m.#g=e.thickness),m._initialData=o;const[g,A]=m.pageDimensions,[P,W]=m.pageTranslation;if(u){const me=m.#r=[];for(let ve=0;ve<u.length;ve+=8)me.push({x:(u[ve]-P)/g,y:1-(u[ve+1]-W)/A,width:(u[ve+2]-u[ve])/g,height:(u[ve+1]-u[ve+5])/A});m.#y(),m.#M(),m.rotate(m.rotation)}else if(c){m.#c=!0;const me=c[0],ve={x:me[0]-P,y:A-(me[1]-W)},He=new FreeHighlightOutliner(ve,[0,0,g,A],1,m.#g/2,!0,.001);for(let qe=0,Rs=me.length;qe<Rs;qe+=2)ve.x=me[qe]-P,ve.y=A-(me[qe+1]-W),He.add(ve);const{id:De,clipPathId:Xe}=a.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:He.toSVGPath()}},!0,!0);m.#_({highlightOutlines:He.getOutlines(),highlightId:De,clipPathId:Xe}),m.#M(),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const a=this.getRect(0,0),s=AnnotationEditor._colorManager.convert(this.color),o={annotationType:AnnotationEditorType.HIGHLIGHT,color:s,opacity:this.#p,thickness:this.#g,quadPoints:this.#I(),outlines:this.#D(a),pageIndex:this.pageIndex,rect:a,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#b(o)?null:(o.id=this.annotationElementId,o)}#b(e){const{color:a}=this._initialData;return e.color.some((s,o)=>s!==a[o])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class DrawingOptions{#e=Object.create(null);updateProperty(e,a){this[e]=a,this.updateSVGProperty(e,a)}updateProperties(e){if(e)for(const[a,s]of Object.entries(e))a.startsWith("_")||this.updateProperty(a,s)}updateSVGProperty(e,a){this.#e[e]=a}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){unreachable("Not implemented")}}class DrawingEditor extends AnnotationEditor{#e=null;#t;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#i=null;static#a=null;static#n=NaN;static#o=null;static#s=null;static#h=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:a,drawingOptions:s}){this.#e=e,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),a>=0?(this._drawId=a,this.parent.drawLayer.finalizeDraw(a,e.defaultProperties)):this._drawId=this.#d(e,this.parent),this.#u(e.box)}#d(e,a){const{id:s}=a.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(e,a){const s=new Set(Object.keys(e));for(const[o,l]of Object.entries(a))s.has(o)?Object.assign(e[o],l):e[o]=l;return e}static getDefaultDrawingOptions(e){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,a){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,a),this._currentParent&&(DrawingEditor.#r.updateProperty(s,a),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,a){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,a)}static get defaultPropertiesToUpdate(){const e=[],a=this._defaultDrawingOptions;for(const[s,o]of this.typesMap)e.push([s,a[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:a}=this;for(const[s,o]of this.constructor.typesMap)e.push([s,a[o]]);return e}_updateProperty(e,a,s){const o=this._drawingOptions,l=o[a],u=c=>{o.updateProperty(a,c);const d=this.#e.updateProperty(a,c);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:u.bind(this,s),undo:u.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#m()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#m()),{bbox:this.#g()}))}_onTranslating(e,a){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#c(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let a=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#c()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),a=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),a&&this.select()}#c(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#e,e)}}#p([e,a,s,o]){const{parentDimensions:[l,u],rotation:c}=this;switch(c){case 90:return[a,1-e,s*(u/l),o*(l/u)];case 180:return[1-e,1-a,s,o];case 270:return[1-a,e,s*(u/l),o*(l/u)];default:return[e,a,s,o]}}#m(){const{x:e,y:a,width:s,height:o,parentDimensions:[l,u],rotation:c}=this;switch(c){case 90:return[1-a,e,s*(l/u),o*(u/l)];case 180:return[1-e,1-a,s,o];case 270:return[a,1-e,s*(l/u),o*(u/l)];default:return[e,a,s,o]}}#u(e){if([this.x,this.y,this.width,this.height]=this.#p(e),this.div){this.fixAndSetPosition();const[a,s]=this.parentDimensions;this.setDims(this.width*a,this.height*s)}this._onResized()}#g(){const{x:e,y:a,width:s,height:o,rotation:l,parentRotation:u,parentDimensions:[c,d]}=this;switch((l*4+u)/90){case 1:return[1-a-o,e,o,s];case 2:return[1-e-s,1-a-o,s,o];case 3:return[a,1-e-s,o,s];case 4:return[e,a-s*(c/d),o*(d/c),s*(c/d)];case 5:return[1-a,e,s*(c/d),o*(d/c)];case 6:return[1-e-o*(d/c),1-a,o*(d/c),s*(c/d)];case 7:return[a-s*(c/d),1-e-o*(d/c),s*(c/d),o*(d/c)];case 8:return[e-s,a-o,s,o];case 9:return[1-a,e-s,o,s];case 10:return[1-e,1-a,s,o];case 11:return[a-o,1-e,o,s];case 12:return[e-o*(d/c),a,o*(d/c),s*(c/d)];case 13:return[1-a-s*(c/d),e-o*(d/c),s*(c/d),o*(d/c)];case 14:return[1-e,1-a-s*(c/d),o*(d/c),s*(c/d)];case 15:return[a,1-e,s*(c/d),o*(d/c)];default:return[e,a,s,o]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,a;this._isCopy&&(e=this.x,a=this.y);const s=super.render();s.classList.add("draw");const o=document.createElement("div");s.append(o),o.setAttribute("aria-hidden","true"),o.className="internal";const[l,u]=this.parentDimensions;return this.setDims(this.width*l,this.height*u),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,a),s}static createDrawerInstance(e,a,s,o,l){unreachable("Not implemented")}static startDrawing(e,a,s,o){const{target:l,offsetX:u,offsetY:c,pointerId:d,pointerType:m}=o;if(DrawingEditor.#o&&DrawingEditor.#o!==m)return;const{viewport:{rotation:g}}=e,{width:A,height:P}=l.getBoundingClientRect(),W=DrawingEditor.#i=new AbortController,me=e.combinedSignal(W);if(DrawingEditor.#n||=d,DrawingEditor.#o??=m,window.addEventListener("pointerup",ve=>{DrawingEditor.#n===ve.pointerId?this._endDraw(ve):DrawingEditor.#s?.delete(ve.pointerId)},{signal:me}),window.addEventListener("pointercancel",ve=>{DrawingEditor.#n===ve.pointerId?this._currentParent.endDrawingSession():DrawingEditor.#s?.delete(ve.pointerId)},{signal:me}),window.addEventListener("pointerdown",ve=>{DrawingEditor.#o===ve.pointerType&&((DrawingEditor.#s||=new Set).add(ve.pointerId),DrawingEditor.#r.isCancellable()&&(DrawingEditor.#r.removeLastElement(),DrawingEditor.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:me}),window.addEventListener("contextmenu",noContextMenu,{signal:me}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:me}),l.addEventListener("touchmove",ve=>{ve.timeStamp===DrawingEditor.#h&&stopEvent(ve)},{signal:me}),e.toggleDrawing(),a._editorUndoBar?.hide(),DrawingEditor.#r){e.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#r.startNew(u,c,A,P,g));return}a.updateUIForDefaultProperties(this),DrawingEditor.#r=this.createDrawerInstance(u,c,A,P,g),DrawingEditor.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#a.toSVGProperties(),DrawingEditor.#r.defaultSVGProperties),!0,!1)}static _drawMove(e){if(DrawingEditor.#h=-1,!DrawingEditor.#r)return;const{offsetX:a,offsetY:s,pointerId:o}=e;if(DrawingEditor.#n===o){if(DrawingEditor.#s?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#r.add(a,s)),DrawingEditor.#h=e.timeStamp,stopEvent(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,DrawingEditor.#r=null,DrawingEditor.#a=null,DrawingEditor.#o=null,DrawingEditor.#h=NaN),DrawingEditor.#i&&(DrawingEditor.#i.abort(),DrawingEditor.#i=null,DrawingEditor.#n=NaN,DrawingEditor.#s=null)}static _endDraw(e){const a=this._currentParent;if(a){if(a.toggleDrawing(!0),this._cleanup(!1),e?.target===a.div&&a.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#r.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=DrawingEditor.#r,o=this._currentDrawId,l=s.getLastElement();a.addCommands({cmd:()=>{a.drawLayer.updateProperties(o,s.setLastElement(l))},undo:()=>{a.drawLayer.updateProperties(o,s.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const a=this._currentParent;if(!a)return null;if(a.toggleDrawing(!0),a.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!DrawingEditor.#r.isEmpty()){const{pageDimensions:[s,o],scale:l}=a,u=a.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:DrawingEditor.#r.getOutlines(s*l,o*l,l,this._INNER_MARGIN),drawingOptions:DrawingEditor.#a,mustBeCommitted:!e});return this._cleanup(!0),u}return a.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,a,s,o,l,u){unreachable("Not implemented")}static async deserialize(e,a,s){const{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:c}}=a.viewport,d=this.deserializeDraw(u,c,o,l,this._INNER_MARGIN,e),m=await super.deserialize(e,a,s);return m.createDrawingOptions(e),m.#l({drawOutlines:d}),m.#f(),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[a,s]=this.pageTranslation,[o,l]=this.pageDimensions;return this.#e.serialize([a,s,o,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class InkDrawOutliner{#e=new Float64Array(6);#t;#r;#i;#a;#n;#o="";#s=0;#h=new InkDrawOutline;#l;#d;constructor(e,a,s,o,l,u){this.#l=s,this.#d=o,this.#i=l,this.#a=u,[e,a]=this.#c(e,a);const c=this.#t=[NaN,NaN,NaN,NaN,e,a];this.#n=[e,a],this.#r=[{line:c,points:this.#n}],this.#e.set(c,0)}updateProperty(e,a){e==="stroke-width"&&(this.#a=a)}#c(e,a){return Outline._normalizePoint(e,a,this.#l,this.#d,this.#i)}isEmpty(){return!this.#r||this.#r.length===0}isCancellable(){return this.#n.length<=10}add(e,a){[e,a]=this.#c(e,a);const[s,o,l,u]=this.#e.subarray(2,6),c=e-l,d=a-u;return Math.hypot(this.#l*c,this.#d*d)<=2?null:(this.#n.push(e,a),isNaN(s)?(this.#e.set([l,u,e,a],2),this.#t.push(NaN,NaN,NaN,NaN,e,a),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([s,o,l,u,e,a],0),this.#t.push(...Outline.createBezierPoints(s,o,l,u,e,a)),{path:{d:this.toSVGPath()}}))}end(e,a){const s=this.add(e,a);return s||(this.#n.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,a,s,o,l){this.#l=s,this.#d=o,this.#i=l,[e,a]=this.#c(e,a);const u=this.#t=[NaN,NaN,NaN,NaN,e,a];this.#n=[e,a];const c=this.#r.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#r.push({line:u,points:this.#n}),this.#e.set(u,0),this.#s=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(e){return this.#r?(this.#r.push(e),this.#t=e.line,this.#n=e.points,this.#s=0,{path:{d:this.toSVGPath()}}):this.#h.setLastElement(e)}removeLastElement(){if(!this.#r)return this.#h.removeLastElement();this.#r.pop(),this.#o="";for(let e=0,a=this.#r.length;e<a;e++){const{line:s,points:o}=this.#r[e];this.#t=s,this.#n=o,this.#s=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){const e=Outline.svgRound(this.#t[4]),a=Outline.svgRound(this.#t[5]);if(this.#n.length===2)return this.#o=`${this.#o} M ${e} ${a} Z`,this.#o;if(this.#n.length<=6){const o=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,o)} M ${e} ${a}`,this.#s=6}if(this.#n.length===4){const o=Outline.svgRound(this.#t[10]),l=Outline.svgRound(this.#t[11]);return this.#o=`${this.#o} L ${o} ${l}`,this.#s=12,this.#o}const s=[];this.#s===0&&(s.push(`M ${e} ${a}`),this.#s=6);for(let o=this.#s,l=this.#t.length;o<l;o+=6){const[u,c,d,m,g,A]=this.#t.slice(o,o+6).map(Outline.svgRound);s.push(`C${u} ${c} ${d} ${m} ${g} ${A}`)}return this.#o+=s.join(" "),this.#s=this.#t.length,this.#o}getOutlines(e,a,s,o){const l=this.#r.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#h.build(this.#r,e,a,s,this.#i,this.#a,o),this.#e=null,this.#t=null,this.#r=null,this.#o=null,this.#h}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class InkDrawOutline extends Outline{#e;#t=0;#r;#i;#a;#n;#o;#s;#h;build(e,a,s,o,l,u,c){this.#a=a,this.#n=s,this.#o=o,this.#s=l,this.#h=u,this.#r=c??0,this.#i=e,this.#c()}get thickness(){return this.#h}setLastElement(e){return this.#i.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:a}of this.#i){if(e.push(`M${Outline.svgRound(a[4])} ${Outline.svgRound(a[5])}`),a.length===6){e.push("Z");continue}if(a.length===12&&isNaN(a[6])){e.push(`L${Outline.svgRound(a[10])} ${Outline.svgRound(a[11])}`);continue}for(let s=6,o=a.length;s<o;s+=6){const[l,u,c,d,m,g]=a.subarray(s,s+6).map(Outline.svgRound);e.push(`C${l} ${u} ${c} ${d} ${m} ${g}`)}}return e.join("")}serialize([e,a,s,o],l){const u=[],c=[],[d,m,g,A]=this.#d();let P,W,me,ve,He,De,Xe,qe,Rs;switch(this.#s){case 0:Rs=Outline._rescale,P=e,W=a+o,me=s,ve=-o,He=e+d*s,De=a+(1-m-A)*o,Xe=e+(d+g)*s,qe=a+(1-m)*o;break;case 90:Rs=Outline._rescaleAndSwap,P=e,W=a,me=s,ve=o,He=e+m*s,De=a+d*o,Xe=e+(m+A)*s,qe=a+(d+g)*o;break;case 180:Rs=Outline._rescale,P=e+s,W=a,me=-s,ve=o,He=e+(1-d-g)*s,De=a+m*o,Xe=e+(1-d)*s,qe=a+(m+A)*o;break;case 270:Rs=Outline._rescaleAndSwap,P=e+s,W=a+o,me=-s,ve=-o,He=e+(1-m-A)*s,De=a+(1-d-g)*o,Xe=e+(1-m)*s,qe=a+(1-d)*o;break}for(const{line:Vc,points:So}of this.#i)u.push(Rs(Vc,P,W,me,ve,l?new Array(Vc.length):null)),c.push(Rs(So,P,W,me,ve,l?new Array(So.length):null));return{lines:u,points:c,rect:[He,De,Xe,qe]}}static deserialize(e,a,s,o,l,{paths:{lines:u,points:c},rotation:d,thickness:m}){const g=[];let A,P,W,me,ve;switch(d){case 0:ve=Outline._rescale,A=-e/s,P=a/o+1,W=1/s,me=-1/o;break;case 90:ve=Outline._rescaleAndSwap,A=-a/o,P=-e/s,W=1/o,me=1/s;break;case 180:ve=Outline._rescale,A=e/s+1,P=-a/o,W=-1/s,me=1/o;break;case 270:ve=Outline._rescaleAndSwap,A=a/o+1,P=e/s+1,W=-1/o,me=-1/s;break}if(!u){u=[];for(const De of c){const Xe=De.length;if(Xe===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,De[0],De[1]]));continue}if(Xe===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,De[0],De[1],NaN,NaN,NaN,NaN,De[2],De[3]]));continue}const qe=new Float32Array(3*(Xe-2));u.push(qe);let[Rs,Vc,So,Do]=De.subarray(0,4);qe.set([NaN,NaN,NaN,NaN,Rs,Vc],0);for(let eh=4;eh<Xe;eh+=2){const Ko=De[eh],Ge=De[eh+1];qe.set(Outline.createBezierPoints(Rs,Vc,So,Do,Ko,Ge),(eh-2)*3),[Rs,Vc,So,Do]=[So,Do,Ko,Ge]}}}for(let De=0,Xe=u.length;De<Xe;De++)g.push({line:ve(u[De].map(qe=>qe??NaN),A,P,W,me),points:ve(c[De].map(qe=>qe??NaN),A,P,W,me)});const He=new this.prototype.constructor;return He.build(g,s,o,1,d,m,l),He}#l(e=this.#h){const a=this.#r+e/2*this.#o;return this.#s%180===0?[a/this.#a,a/this.#n]:[a/this.#n,a/this.#a]}#d(){const[e,a,s,o]=this.#e,[l,u]=this.#l(0);return[e+l,a+u,s-2*l,o-2*u]}#c(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:o}of this.#i){if(o.length<=12){for(let c=4,d=o.length;c<d;c+=6)Util.pointBoundingBox(o[c],o[c+1],e);continue}let l=o[4],u=o[5];for(let c=6,d=o.length;c<d;c+=6){const[m,g,A,P,W,me]=o.subarray(c,c+6);Util.bezierBoundingBox(l,u,m,g,A,P,W,me,e),l=W,u=me}}const[a,s]=this.#l();e[0]=MathClamp(e[0]-a,0,1),e[1]=MathClamp(e[1]-s,0,1),e[2]=MathClamp(e[2]+a,0,1),e[3]=MathClamp(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,a){return e==="stroke-width"?this.#f(a):null}#f(e){const[a,s]=this.#l();this.#h=e;const[o,l]=this.#l(),[u,c]=[o-a,l-s],d=this.#e;return d[0]-=u,d[1]-=c,d[2]+=2*u,d[3]+=2*c,d}updateParentDimensions([e,a],s){const[o,l]=this.#l();this.#a=e,this.#n=a,this.#o=s;const[u,c]=this.#l(),d=u-o,m=c-l,g=this.#e;return g[0]-=d,g[1]-=m,g[2]+=2*d,g[3]+=2*m,g}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Outline.svgRound).join(" ")}get defaultProperties(){const[e,a]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(e)} ${Outline.svgRound(a)}`}}}get rotationTransform(){const[,,e,a]=this.#e;let s=0,o=0,l=0,u=0,c=0,d=0;switch(this.#t){case 90:o=a/e,l=-e/a,c=e;break;case 180:s=-1,u=-1,c=e,d=a;break;case 270:o=-a/e,l=e/a,d=a;break;default:return""}return`matrix(${s} ${o} ${l} ${u} ${Outline.svgRound(c)} ${Outline.svgRound(d)})`}getPathResizingSVGProperties([e,a,s,o]){const[l,u]=this.#l(),[c,d,m,g]=this.#e;if(Math.abs(m-l)<=Outline.PRECISION||Math.abs(g-u)<=Outline.PRECISION){const ve=e+s/2-(c+m/2),He=a+o/2-(d+g/2);return{path:{"transform-origin":`${Outline.svgRound(e)} ${Outline.svgRound(a)}`,transform:`${this.rotationTransform} translate(${ve} ${He})`}}}const A=(s-2*l)/(m-2*l),P=(o-2*u)/(g-2*u),W=m/s,me=g/o;return{path:{"transform-origin":`${Outline.svgRound(c)} ${Outline.svgRound(d)}`,transform:`${this.rotationTransform} scale(${W} ${me}) translate(${Outline.svgRound(l)} ${Outline.svgRound(u)}) scale(${A} ${P}) translate(${Outline.svgRound(-l)} ${Outline.svgRound(-u)})`}}}getPathResizedSVGProperties([e,a,s,o]){const[l,u]=this.#l(),c=this.#e,[d,m,g,A]=c;if(c[0]=e,c[1]=a,c[2]=s,c[3]=o,Math.abs(g-l)<=Outline.PRECISION||Math.abs(A-u)<=Outline.PRECISION){const He=e+s/2-(d+g/2),De=a+o/2-(m+A/2);for(const{line:Xe,points:qe}of this.#i)Outline._translate(Xe,He,De,Xe),Outline._translate(qe,He,De,qe);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(e)} ${Outline.svgRound(a)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const P=(s-2*l)/(g-2*l),W=(o-2*u)/(A-2*u),me=-P*(d+l)+e+l,ve=-W*(m+u)+a+u;if(P!==1||W!==1||me!==0||ve!==0)for(const{line:He,points:De}of this.#i)Outline._rescale(He,me,ve,P,W,He),Outline._rescale(De,me,ve,P,W,De);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(e)} ${Outline.svgRound(a)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,a],s){const[o,l]=s,u=this.#e,c=e-u[0],d=a-u[1];if(this.#a===o&&this.#n===l)for(const{line:m,points:g}of this.#i)Outline._translate(m,c,d,m),Outline._translate(g,c,d,g);else{const m=this.#a/o,g=this.#n/l;this.#a=o,this.#n=l;for(const{line:A,points:P}of this.#i)Outline._rescale(A,c,d,m,g,A),Outline._rescale(P,c,d,m,g,P);u[2]*=m,u[3]*=g}return u[0]=e,u[1]=a,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(e)} ${Outline.svgRound(a)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(e[0])} ${Outline.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class InkDrawingOptions extends DrawingOptions{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,a){e==="stroke-width"&&(a??=this["stroke-width"],a*=this._viewParameters.realScale),super.updateSVGProperty(e,a)}clone(){const e=new InkDrawingOptions(this._viewParameters);return e.updateAll(this),e}}class InkEditor extends DrawingEditor{static _type="ink";static _editorType=AnnotationEditorType.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,a){AnnotationEditor.initialize(e,a),this._defaultDrawingOptions=new InkDrawingOptions(a.viewParameters)}static getDefaultDrawingOptions(e){const a=this._defaultDrawingOptions.clone();return a.updateProperties(e),a}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,a,s,o,l){return new InkDrawOutliner(e,a,s,o,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,a,s,o,l,u){return InkDrawOutline.deserialize(e,a,s,o,l,u)}static async deserialize(e,a,s){let o=null;if(e instanceof InkAnnotationElement){const{data:{inkLists:u,rect:c,rotation:d,id:m,color:g,opacity:A,borderStyle:{rawWidth:P},popupRef:W},parent:{page:{pageNumber:me}}}=e;o=e={annotationType:AnnotationEditorType.INK,color:Array.from(g),thickness:P,opacity:A,paths:{points:u},boxes:null,pageIndex:me-1,rect:c.slice(0),rotation:d,annotationElementId:m,id:m,deleted:!1,popupRef:W}}const l=await super.deserialize(e,a,s);return l._initialData=o,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:a,parent:s}=this;a.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,a.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:a,opacity:s}){this._drawingOptions=InkEditor.getDefaultDrawingOptions({stroke:Util.makeHexColor(...e),"stroke-width":a,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:a,points:s,rect:o}=this.serializeDraw(e),{_drawingOptions:{stroke:l,"stroke-opacity":u,"stroke-width":c}}=this,d={annotationType:AnnotationEditorType.INK,color:AnnotationEditor._colorManager.convert(l),opacity:u,thickness:c,paths:{lines:a,points:s},pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(d.isCopy=!0,d):this.annotationElementId&&!this.#e(d)?null:(d.id=this.annotationElementId,d)}#e(e){const{color:a,thickness:s,opacity:o,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((u,c)=>u!==a[c])||e.thickness!==s||e.opacity!==o||e.pageIndex!==l}renderAnnotationElement(e){const{points:a,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:a}),null}}class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;class SignatureExtractor{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,a,s,o){return s-=e,o-=a,s===0?o>0?0:4:s===1?o+6:2-o}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(e,a,s,o,l,u,c){const d=this.#t(s,o,l,u);for(let m=0;m<8;m++){const g=(-m+d-c+16)%8,A=this.#r[2*g],P=this.#r[2*g+1];if(e[(s+A)*a+(o+P)]!==0)return g}return-1}static#a(e,a,s,o,l,u,c){const d=this.#t(s,o,l,u);for(let m=0;m<8;m++){const g=(m+d+c+16)%8,A=this.#r[2*g],P=this.#r[2*g+1];if(e[(s+A)*a+(o+P)]!==0)return g}return-1}static#n(e,a,s,o){const l=e.length,u=new Int32Array(l);for(let g=0;g<l;g++)u[g]=e[g]<=o?1:0;for(let g=1;g<s-1;g++)u[g*a]=u[g*a+a-1]=0;for(let g=0;g<a;g++)u[g]=u[a*s-1-g]=0;let c=1,d;const m=[];for(let g=1;g<s-1;g++){d=1;for(let A=1;A<a-1;A++){const P=g*a+A,W=u[P];if(W===0)continue;let me=g,ve=A;if(W===1&&u[P-1]===0)c+=1,ve-=1;else if(W>=1&&u[P+1]===0)c+=1,ve+=1,W>1&&(d=W);else{W!==1&&(d=Math.abs(W));continue}const He=[A,g],De=ve===A+1,Xe={isHole:De,points:He,id:c,parent:0};m.push(Xe);let qe;for(const An of m)if(An.id===d){qe=An;break}qe?qe.isHole?Xe.parent=De?qe.parent:d:Xe.parent=De?d:qe.parent:Xe.parent=De?d:0;const Rs=this.#i(u,a,g,A,me,ve,0);if(Rs===-1){u[P]=-c,u[P]!==1&&(d=Math.abs(u[P]));continue}let Vc=this.#r[2*Rs],So=this.#r[2*Rs+1];const Do=g+Vc,eh=A+So;me=Do,ve=eh;let Ko=g,Ge=A;for(;;){const An=this.#a(u,a,Ko,Ge,me,ve,1);Vc=this.#r[2*An],So=this.#r[2*An+1];const wt=Ko+Vc,Bs=Ge+So;He.push(Bs,wt);const yh=Ko*a+Ge;if(u[yh+1]===0?u[yh]=-c:u[yh]===1&&(u[yh]=c),wt===g&&Bs===A&&Ko===Do&&Ge===eh){u[P]!==1&&(d=Math.abs(u[P]));break}else me=Ko,ve=Ge,Ko=wt,Ge=Bs}}}return m}static#o(e,a,s,o){if(s-a<=4){for(let Do=a;Do<s-2;Do+=2)o.push(e[Do],e[Do+1]);return}const l=e[a],u=e[a+1],c=e[s-4]-l,d=e[s-3]-u,m=Math.hypot(c,d),g=c/m,A=d/m,P=g*u-A*l,W=d/c,me=1/m,ve=Math.atan(W),He=Math.cos(ve),De=Math.sin(ve),Xe=me*(Math.abs(He)+Math.abs(De)),qe=me*(1-Xe+Xe**2),Rs=Math.max(Math.atan(Math.abs(De+He)*qe),Math.atan(Math.abs(De-He)*qe));let Vc=0,So=a;for(let Do=a+2;Do<s-2;Do+=2){const eh=Math.abs(P-g*e[Do+1]+A*e[Do]);eh>Vc&&(So=Do,Vc=eh)}Vc>(m*Rs)**2?(this.#o(e,a,So+2,o),this.#o(e,So,s,o)):o.push(l,u)}static#s(e){const a=[],s=e.length;return this.#o(e,0,s,a),a.push(e[s-2],e[s-1]),a.length<=4?null:a}static#h(e,a,s,o,l,u){const c=new Float32Array(u**2),d=-2*o**2,m=u>>1;for(let ve=0;ve<u;ve++){const He=(ve-m)**2;for(let De=0;De<u;De++)c[ve*u+De]=Math.exp((He+(De-m)**2)/d)}const g=new Float32Array(256),A=-2*l**2;for(let ve=0;ve<256;ve++)g[ve]=Math.exp(ve**2/A);const P=e.length,W=new Uint8Array(P),me=new Uint32Array(256);for(let ve=0;ve<s;ve++)for(let He=0;He<a;He++){const De=ve*a+He,Xe=e[De];let qe=0,Rs=0;for(let So=0;So<u;So++){const Do=ve+So-m;if(!(Do<0||Do>=s))for(let eh=0;eh<u;eh++){const Ko=He+eh-m;if(Ko<0||Ko>=a)continue;const Ge=e[Do*a+Ko],An=c[So*u+eh]*g[Math.abs(Ge-Xe)];qe+=Ge*An,Rs+=An}}const Vc=W[De]=Math.round(qe/Rs);me[Vc]++}return[W,me]}static#l(e){const a=new Uint32Array(256);for(const s of e)a[s]++;return a}static#d(e){const a=e.length,s=new Uint8ClampedArray(a>>2);let o=-1/0,l=1/0;for(let c=0,d=s.length;c<d;c++){if(e[(c<<2)+3]===0){o=s[c]=255;continue}const g=s[c]=e[c<<2];g>o&&(o=g),g<l&&(l=g)}const u=255/(o-l);for(let c=0;c<a;c++)s[c]=(s[c]-l)*u;return s}static#c(e){let a,s=-1/0,o=-1/0;const l=e.findIndex(d=>d!==0);let u=l,c=l;for(a=l;a<256;a++){const d=e[a];d>s&&(a-u>o&&(o=a-u,c=a-1),s=d,u=a)}for(a=c-1;a>=0&&!(e[a]>e[a+1]);a--);return a}static#f(e){const a=e,{width:s,height:o}=e,{maxDim:l}=this.#e;let u=s,c=o;if(s>l||o>l){let P=s,W=o,me=Math.log2(Math.max(s,o)/l);const ve=Math.floor(me);me=me===ve?ve-1:ve;for(let De=0;De<me;De++){u=Math.ceil(P/2),c=Math.ceil(W/2);const Xe=new OffscreenCanvas(u,c);Xe.getContext("2d").drawImage(e,0,0,P,W,0,0,u,c),P=u,W=c,e!==a&&e.close(),e=Xe.transferToImageBitmap()}const He=Math.min(l/u,l/c);u=Math.round(u*He),c=Math.round(c*He)}const m=new OffscreenCanvas(u,c).getContext("2d",{willReadFrequently:!0});m.filter="grayscale(1)",m.drawImage(e,0,0,e.width,e.height,0,0,u,c);const g=m.getImageData(0,0,u,c).data;return[this.#d(g),u,c]}static extractContoursFromText(e,{fontFamily:a,fontStyle:s,fontWeight:o},l,u,c,d){let m=new OffscreenCanvas(1,1),g=m.getContext("2d",{alpha:!1});const A=200,P=g.font=`${s} ${o} ${A}px ${a}`,{actualBoundingBoxLeft:W,actualBoundingBoxRight:me,actualBoundingBoxAscent:ve,actualBoundingBoxDescent:He,fontBoundingBoxAscent:De,fontBoundingBoxDescent:Xe,width:qe}=g.measureText(e),Rs=1.5,Vc=Math.ceil(Math.max(Math.abs(W)+Math.abs(me)||0,qe)*Rs),So=Math.ceil(Math.max(Math.abs(ve)+Math.abs(He)||A,Math.abs(De)+Math.abs(Xe)||A)*Rs);m=new OffscreenCanvas(Vc,So),g=m.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=P,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,Vc,So),g.fillStyle="black",g.fillText(e,Vc*(Rs-1)/2,So*(3-Rs)/2);const Do=this.#d(g.getImageData(0,0,Vc,So).data),eh=this.#l(Do),Ko=this.#c(eh),Ge=this.#n(Do,Vc,So,Ko);return this.processDrawnLines({lines:{curves:Ge,width:Vc,height:So},pageWidth:l,pageHeight:u,rotation:c,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,a,s,o,l){const[u,c,d]=this.#f(e),[m,g]=this.#h(u,c,d,Math.hypot(c,d)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),A=this.#c(g),P=this.#n(m,c,d,A);return this.processDrawnLines({lines:{curves:P,width:c,height:d},pageWidth:a,pageHeight:s,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:a,pageHeight:s,rotation:o,innerMargin:l,mustSmooth:u,areContours:c}){o%180!==0&&([a,s]=[s,a]);const{curves:d,width:m,height:g}=e,A=e.thickness??0,P=[],W=Math.min(a/m,s/g),me=W/a,ve=W/s,He=[];for(const{points:Xe}of d){const qe=u?this.#s(Xe):Xe;if(!qe)continue;He.push(qe);const Rs=qe.length,Vc=new Float32Array(Rs),So=new Float32Array(3*(Rs===2?2:Rs-2));if(P.push({line:So,points:Vc}),Rs===2){Vc[0]=qe[0]*me,Vc[1]=qe[1]*ve,So.set([NaN,NaN,NaN,NaN,Vc[0],Vc[1]],0);continue}let[Do,eh,Ko,Ge]=qe;Do*=me,eh*=ve,Ko*=me,Ge*=ve,Vc.set([Do,eh,Ko,Ge],0),So.set([NaN,NaN,NaN,NaN,Do,eh],0);for(let An=4;An<Rs;An+=2){const wt=Vc[An]=qe[An]*me,Bs=Vc[An+1]=qe[An+1]*ve;So.set(Outline.createBezierPoints(Do,eh,Ko,Ge,wt,Bs),(An-2)*3),[Do,eh,Ko,Ge]=[Ko,Ge,wt,Bs]}}if(P.length===0)return null;const De=c?new ContourDrawOutline:new InkDrawOutline;return De.build(P,a,s,1,o,c?0:A,l),{outline:De,newCurves:He,areContours:c,thickness:A,width:m,height:g}}static async compressSignature({outlines:e,areContours:a,thickness:s,width:o,height:l}){let u=1/0,c=-1/0,d=0;for(const qe of e){d+=qe.length;for(let Rs=2,Vc=qe.length;Rs<Vc;Rs++){const So=qe[Rs]-qe[Rs-2];u=Math.min(u,So),c=Math.max(c,So)}}let m;u>=-128&&c<=127?m=Int8Array:u>=-32768&&c<=32767?m=Int16Array:m=Int32Array;const g=e.length,A=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*g,P=new Uint32Array(A);let W=0;P[W++]=A*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*m.BYTES_PER_ELEMENT,P[W++]=0,P[W++]=o,P[W++]=l,P[W++]=a?0:1,P[W++]=Math.max(0,Math.floor(s??0)),P[W++]=g,P[W++]=m.BYTES_PER_ELEMENT;for(const qe of e)P[W++]=qe.length-2,P[W++]=qe[0],P[W++]=qe[1];const me=new CompressionStream("deflate-raw"),ve=me.writable.getWriter();await ve.ready,ve.write(P);const He=m.prototype.constructor;for(const qe of e){const Rs=new He(qe.length-2);for(let Vc=2,So=qe.length;Vc<So;Vc++)Rs[Vc-2]=qe[Vc]-qe[Vc-2];ve.write(Rs)}ve.close();const De=await new Response(me.readable).arrayBuffer(),Xe=new Uint8Array(De);return toBase64Util(Xe)}static async decompressSignature(e){try{const a=fromBase64Util(e),{readable:s,writable:o}=new DecompressionStream("deflate-raw"),l=o.getWriter();await l.ready,l.write(a).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let u=null,c=0;for await(const qe of s)u||=new Uint8Array(new Uint32Array(qe.buffer,0,4)[0]),u.set(qe,c),c+=qe.length;const d=new Uint32Array(u.buffer,0,u.length>>2),m=d[1];if(m!==0)throw new Error(`Invalid version: ${m}`);const g=d[2],A=d[3],P=d[4]===0,W=d[5],me=d[6],ve=d[7],He=[],De=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*me)*Uint32Array.BYTES_PER_ELEMENT;let Xe;switch(ve){case Int8Array.BYTES_PER_ELEMENT:Xe=new Int8Array(u.buffer,De);break;case Int16Array.BYTES_PER_ELEMENT:Xe=new Int16Array(u.buffer,De);break;case Int32Array.BYTES_PER_ELEMENT:Xe=new Int32Array(u.buffer,De);break}c=0;for(let qe=0;qe<me;qe++){const Rs=d[POINTS_PROPERTIES_NUMBER*qe+BASE_HEADER_LENGTH],Vc=new Float32Array(Rs+2);He.push(Vc);for(let So=0;So<POINTS_PROPERTIES_NUMBER-1;So++)Vc[So]=d[POINTS_PROPERTIES_NUMBER*qe+BASE_HEADER_LENGTH+So+1];for(let So=0;So<Rs;So++)Vc[So+2]=Vc[So]+Xe[c++]}return{areContours:P,thickness:W,outlines:He,width:g,height:A}}catch(a){return warn(`decompressSignature: ${a}`),null}}}class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const e=new SignatureOptions;return e.updateAll(this),e}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(e){super(e),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const e=new DrawnSignatureOptions(this._viewParameters);return e.updateAll(this),e}}class SignatureEditor extends DrawingEditor{#e=!1;#t=null;#r=null;#i=null;static _type="signature";static _editorType=AnnotationEditorType.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,a){AnnotationEditor.initialize(e,a),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(a.viewParameters)}static getDefaultDrawingOptions(e){const a=this._defaultDrawingOptions.clone();return a.updateProperties(e),a}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const a=e.get("hasDescription");return{hasAltText:a.get(!0)??0,hasNoAltText:a.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,a;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,a=this.y),super.render(),this._drawId===null)if(this.#r){const{lines:o,mustSmooth:l,areContours:u,description:c,uuid:d,heightInPage:m}=this.#r,{rawDims:{pageWidth:g,pageHeight:A},rotation:P}=this.parent.viewport,W=SignatureExtractor.processDrawnLines({lines:o,pageWidth:g,pageHeight:A,rotation:P,innerMargin:SignatureEditor._INNER_MARGIN,mustSmooth:l,areContours:u});this.addSignature(W,m,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(e,a)),this.div}setUuid(e){this.#i=e,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#t}set description(e){this.#t=e,super.addEditToolbar().then(a=>{a?.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:a,thickness:s,width:o,height:l}=this.#r,u=Math.max(o,l),c=SignatureExtractor.processDrawnLines({lines:{curves:e.map(d=>({points:d})),thickness:s,width:o,height:l},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:a});return{areContours:a,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,a,s,o){const{x:l,y:u}=this,{outline:c}=this.#r=e;this.#e=c instanceof ContourDrawOutline,this.description=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let d;this.#e?d=SignatureEditor.getDefaultDrawingOptions():(d=SignatureEditor._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[m,g]=this.parentDimensions,[,A]=this.pageDimensions;let P=a/A;P=P>=1?.5:P,this.width*=P/this.height,this.width>=1&&(P*=.9/this.width,this.width=.9),this.height=P,this.setDims(m*this.width,g*this.height),this.x=l,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:a,pageHeight:s},rotation:o}=this.parent.viewport;return SignatureExtractor.process(e,a,s,o,SignatureEditor._INNER_MARGIN)}getFromText(e,a){const{rawDims:{pageWidth:s,pageHeight:o},rotation:l}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(e,a,s,o,l,SignatureEditor._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:a,pageHeight:s},rotation:o}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:e,pageWidth:a,pageHeight:s,rotation:o,innerMargin:SignatureEditor._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:a}){e?this._drawingOptions=SignatureEditor.getDefaultDrawingOptions():(this._drawingOptions=SignatureEditor._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":a}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:a,points:s,rect:o}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":l}}=this,u={annotationType:AnnotationEditorType.SIGNATURE,isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:l,pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(u.paths={lines:a,points:s},u.uuid=this.#i,u.isCopy=!0):u.lines=a,this.#t&&(u.accessibilityData={type:"Figure",alt:this.#t}),u}static deserializeDraw(e,a,s,o,l,u){return u.areContours?ContourDrawOutline.deserialize(e,a,s,o,l,u):InkDrawOutline.deserialize(e,a,s,o,l,u)}static async deserialize(e,a,s){const o=await super.deserialize(e,a,s);return o.#e=e.areContours,o.#t=e.accessibilityData?.alt||"",o.#i=e.uuid,o}}class StampEditor extends AnnotationEditor{#e=null;#t=null;#r=null;#i=null;#a=null;#n="";#o=null;#s=!1;#h=null;#l=!1;#d=!1;static _type="stamp";static _editorType=AnnotationEditorType.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,a){AnnotationEditor.initialize(e,a)}static isHandlingMimeForPasting(e){return SupportedImageMimeTypes.includes(e)}static paste(e,a){a.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const a=e.get("hasAltText");return{hasAltText:a.get(!0)??0,hasNoAltText:a.get(!1)??0}}#c(e,a=!1){if(!e){this.remove();return}this.#e=e.bitmap,a||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#n=e.file.name),this.#m()}#f(){if(this.#r=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,a=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:l,height:u}=e||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:o,width:l,height:u,channels:o.length/(l*u)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),a&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(s=>this.#c(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(s).then(o=>this.#c(o)).finally(()=>this.#f());return}if(this.#a){const s=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(s).then(o=>this.#c(o)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=SupportedImageMimeTypes.join(",");const a=this._uiManager._signal;this.#r=new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#c(o)}s()},{signal:a}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:a})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#h&&(clearTimeout(this.#h),this.#h=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#o===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#i||this.#a||this.#t||this.#s)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,a;return this._isCopy&&(e=this.x,a=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#s||(this.#e?this.#m():this.#p()),this._isCopy&&this._moveAfterPaste(e,a),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,a){const{id:s,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,a);a.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#t=s,o&&(this.#e=o),this.#s=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#h!==null&&clearTimeout(this.#h);const e=200;this.#h=setTimeout(()=>{this.#h=null,this.#g()},e)}#m(){const{div:e}=this;let{width:a,height:s}=this.#e;const[o,l]=this.pageDimensions,u=.75;if(this.width)a=this.width*o,s=this.height*l;else if(a>u*o||s>u*l){const g=Math.min(u*o/a,u*l/s);a*=g,s*=g}const[c,d]=this.parentDimensions;this.setDims(a*c/o,s*d/l),this._uiManager.enableWaiting(!1);const m=this.#o=document.createElement("canvas");m.setAttribute("role","img"),this.addContainer(m),this.width=a/o,this.height=s/l,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#n&&this.div.setAttribute("aria-description",this.#n),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,a,s=!1){e||(e=224);const{width:o,height:l}=this.#e,u=new OutputScale;let c=this.#e,d=o,m=l,g=null;if(a){if(o>a||l>a){const So=Math.min(a/o,a/l);d=Math.floor(o*So),m=Math.floor(l*So)}g=document.createElement("canvas");const P=g.width=Math.ceil(d*u.sx),W=g.height=Math.ceil(m*u.sy);this.#l||(c=this.#u(P,W));const me=g.getContext("2d");me.filter=this._uiManager.hcmFilter;let ve="white",He="#cfcfd8";this._uiManager.hcmFilter!=="none"?He="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(ve="#8f8f9d",He="#42414d");const De=15,Xe=De*u.sx,qe=De*u.sy,Rs=new OffscreenCanvas(Xe*2,qe*2),Vc=Rs.getContext("2d");Vc.fillStyle=ve,Vc.fillRect(0,0,Xe*2,qe*2),Vc.fillStyle=He,Vc.fillRect(0,0,Xe,qe),Vc.fillRect(Xe,qe,Xe,qe),me.fillStyle=me.createPattern(Rs,"repeat"),me.fillRect(0,0,P,W),me.drawImage(c,0,0,c.width,c.height,0,0,P,W)}let A=null;if(s){let P,W;if(u.symmetric&&c.width<e&&c.height<e)P=c.width,W=c.height;else if(c=this.#e,o>e||l>e){const He=Math.min(e/o,e/l);P=Math.floor(o*He),W=Math.floor(l*He),this.#l||(c=this.#u(P,W))}const ve=new OffscreenCanvas(P,W).getContext("2d",{willReadFrequently:!0});ve.drawImage(c,0,0,c.width,c.height,0,0,P,W),A={width:P,height:W,data:ve.getImageData(0,0,P,W).data}}return{canvas:g,width:d,height:m,imageData:A}}#u(e,a){const{width:s,height:o}=this.#e;let l=s,u=o,c=this.#e;for(;l>2*e||u>2*a;){const d=l,m=u;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),u>2*a&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const g=new OffscreenCanvas(l,u);g.getContext("2d").drawImage(c,0,0,d,m,0,0,l,u),c=g.transferToImageBitmap()}return c}#g(){const[e,a]=this.parentDimensions,{width:s,height:o}=this,l=new OutputScale,u=Math.ceil(s*e*l.sx),c=Math.ceil(o*a*l.sy),d=this.#o;if(!d||d.width===u&&d.height===c)return;d.width=u,d.height=c;const m=this.#l?this.#e:this.#u(u,c),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(m,0,0,m.width,m.height,0,0,u,c)}#v(e){if(e){if(this.#l){const o=this._uiManager.imageManager.getSvgUrl(this.#t);if(o)return o}const a=document.createElement("canvas");return{width:a.width,height:a.height}=this.#e,a.getContext("2d").drawImage(this.#e,0,0),a.toDataURL()}if(this.#l){const[a,s]=this.pageDimensions,o=Math.round(this.width*a*PixelsPerInch.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*PixelsPerInch.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,l);return u.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,o,l),u.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,a,s){let o=null,l=!1;if(e instanceof StampAnnotationElement){const{data:{rect:ve,rotation:He,id:De,structParent:Xe,popupRef:qe},container:Rs,parent:{page:{pageNumber:Vc}},canvas:So}=e;let Do,eh;So?(delete e.canvas,{id:Do,bitmap:eh}=s.imageManager.getFromCanvas(Rs.id,So),So.remove()):(l=!0,e._hasNoCanvas=!0);const Ko=(await a._structTree.getAriaAttributes(`${AnnotationPrefix}${De}`))?.get("aria-label")||"";o=e={annotationType:AnnotationEditorType.STAMP,bitmapId:Do,bitmap:eh,pageIndex:Vc-1,rect:ve.slice(0),rotation:He,annotationElementId:De,id:De,deleted:!1,accessibilityData:{decorative:!1,altText:Ko},isSvg:!1,structParent:Xe,popupRef:qe}}const u=await super.deserialize(e,a,s),{rect:c,bitmap:d,bitmapUrl:m,bitmapId:g,isSvg:A,accessibilityData:P}=e;l?(s.addMissingCanvas(e.id,u),u.#s=!0):g&&s.imageManager.isValidId(g)?(u.#t=g,d&&(u.#e=d)):u.#i=m,u.#l=A;const[W,me]=u.pageDimensions;return u.width=(c[2]-c[0])/W,u.height=(c[3]-c[1])/me,P&&(u.altTextData=P),u._initialData=o,u.#d=!!o,u}serialize(e=!1,a=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=this.#v(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:o,altText:l}=this.serializeAltText(!1);if(!o&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const c=this.#y(s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,a===null)return s;a.stamps||=new Map;const u=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!a.stamps.has(this.#t))a.stamps.set(this.#t,{area:u,serialized:s}),s.bitmap=this.#v(!1);else if(this.#l){const c=a.stamps.get(this.#t);u>c.area&&(c.area=u,c.serialized.bitmap.close(),c.serialized.bitmap=this.#v(!1))}return s}#y(e){const{pageIndex:a,accessibilityData:{altText:s}}=this._initialData,o=e.pageIndex===a,l=(e.accessibilityData?.alt||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&o&&l,isSameAltText:l}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class AnnotationEditorLayer{#e;#t=!1;#r=null;#i=null;#a=null;#n=new Map;#o=!1;#s=!1;#h=!1;#l=null;#d=null;#c=null;#f=null;#p=null;#m=-1;#u;static _initialized=!1;static#g=new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:a,div:s,structTreeLayer:o,accessibilityManager:l,annotationLayer:u,drawLayer:c,textLayer:d,viewport:m,l10n:g}){const A=[...AnnotationEditorLayer.#g.values()];if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=!0;for(const P of A)P.initialize(g,e)}e.registerEditorTypes(A),this.#u=e,this.pageIndex=a,this.div=s,this.#e=l,this.#r=u,this.viewport=m,this.#c=d,this.drawLayer=c,this._structTree=o,this.#u.addLayer(this)}get isEmpty(){return this.#n.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===AnnotationEditorType.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#w(),e){case AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:a}=this.div;for(const s of AnnotationEditorLayer.#g.values())a.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#c?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#r?.div.classList.toggle("disabled",!e)}async enable(){this.#h=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#p?.abort(),this.#p=null;const e=new Set;for(const s of this.#n.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!this.#r){this.#h=!1;return}const a=this.#r.getEditableAnnotations();for(const s of a){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const o=await this.deserialize(s);o&&(this.addOrRebuild(o),o.enableEditing())}this.#h=!1}disable(){if(this.#s=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#c&&!this.#p){this.#p=new AbortController;const o=this.#u.combinedSignal(this.#p);this.#c.div.addEventListener("pointerdown",l=>{const{clientX:c,clientY:d,timeStamp:m}=l,g=this.#m;if(m-g>500){this.#m=m;return}this.#m=-1;const{classList:A}=this.div;A.toggle("getElements",!0);const P=document.elementsFromPoint(c,d);if(A.toggle("getElements",!1),!this.div.contains(P[0]))return;let W;const me=new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);for(const He of P)if(me.test(He.id)){W=He.id;break}if(!W)return;const ve=this.#n.get(W);ve?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),ve.dblclick())},{signal:o,capture:!0})}const e=new Map,a=new Map;for(const o of this.#n.values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else a.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}if(this.#r){const o=this.#r.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(this.#u.isDeletedAnnotationElement(u))continue;let c=a.get(u);if(c){c.resetAnnotationElement(l),c.show(!1),l.show();continue}c=e.get(u),c&&(this.#u.addChangedExistingAnnotation(c),c.renderAnnotationElement(l)&&c.show(!1)),l.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const o of AnnotationEditorLayer.#g.values())s.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#s=!1}getEditableAnnotation(e){return this.#r?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#c?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#c.div.addEventListener("pointerdown",this.#v.bind(this),{signal:e}),this.#c.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#c?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#c.div.classList.remove("highlighting"))}#v(e){this.#u.unselectAll();const{target:a}=e;if(a===this.#c.div||(a.getAttribute("role")==="img"||a.classList.contains("endOfContent"))&&this.#c.div.contains(a)){const{isMac:s}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#c.div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,this.#u.direction==="ltr",{target:this.#c.div,x:e.x,y:e.y}),this.#c.div.addEventListener("pointerup",()=>{this.#c.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const e=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const a=this.pointerup.bind(this);this.div.addEventListener("pointerup",a,{signal:e}),this.div.addEventListener("pointercancel",a,{signal:e})}disableClick(){this.#i?.abort(),this.#i=null}attach(e){this.#n.set(e.id,e);const{annotationElementId:a}=e;a&&this.#u.isDeletedAnnotationElement(a)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#n.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#s&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),AnnotationEditor.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const a=e.render();this.div.append(a),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#h),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:a}=document;e.div.contains(a)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),a.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const a=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:a,undo:s,mustExec:!1})}getNextId(){return this.#u.getId()}get#y(){return AnnotationEditorLayer.#g.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#_(e){const a=this.#y;return a?new a.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,a){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:s,offsetY:o}=this.#x(),l=this.getNextId(),u=this.#_({parent:this,id:l,x:s,y:o,uiManager:this.#u,isCentered:!0,...a});u&&this.add(u)}async deserialize(e){return await AnnotationEditorLayer.#g.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,a,s={}){const o=this.getNextId(),l=this.#_({parent:this,id:o,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:a,...s});return l&&this.add(l),l}#x(){const{x:e,y:a,width:s,height:o}=this.div.getBoundingClientRect(),l=Math.max(0,e),u=Math.max(0,a),c=Math.min(window.innerWidth,e+s),d=Math.min(window.innerHeight,a+o),m=(l+c)/2-e,g=(u+d)/2-a,[A,P]=this.viewport.rotation%180===0?[m,g]:[g,m];return{offsetX:A,offsetY:P}}addNewEditor(e={}){this.createAndAddNewEditor(this.#x(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:a}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&a||e.target!==this.div||!this.#o||(this.#o=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const s=this.#u.getMode();if(s===AnnotationEditorType.STAMP||s===AnnotationEditorType.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:a}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&a||e.target!==this.div)return;if(this.#o=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const s=this.#u.getActive();this.#t=!s||s.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const a=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:a}),this.#y.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:a}=document;this.div.contains(a)&&(this.#d=a);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#y.endDrawing(e)):null}findNewParent(e,a,s){const o=this.#u.findParent(a,s);return o===null||o===this?!1:(o.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#n.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#n.clear(),this.#u.removeLayer(this)}#w(){for(const e of this.#n.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,setLayerDimensions(this.div,e);for(const a of this.#u.getEditors(this.pageIndex))this.add(a),a.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#w();const a=this.viewport.rotation,s=e.rotation;if(this.viewport=e,setLayerDimensions(this.div,{rotation:s}),a!==s)for(const o of this.#n.values())o.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:a}=this.viewport.rawDims;return[e,a]}get scale(){return this.#u.viewParameters.realScale}}class DrawLayer{#e=null;#t=new Map;#r=new Map;static#i=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const a of this.#t.values())a.remove(),e.append(a);this.#e=e}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}static#a(e,[a,s,o,l]){const{style:u}=e;u.top=`${100*s}%`,u.left=`${100*a}%`,u.width=`${100*o}%`,u.height=`${100*l}%`}#n(){const e=DrawLayer._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#o(e,a){const s=DrawLayer._svgFactory.createElement("clipPath");e.append(s);const o=`clip_${a}`;s.setAttribute("id",o),s.setAttribute("clipPathUnits","objectBoundingBox");const l=DrawLayer._svgFactory.createElement("use");return s.append(l),l.setAttribute("href",`#${a}`),l.classList.add("clip"),o}#s(e,a){for(const[s,o]of Object.entries(a))o===null?e.removeAttribute(s):e.setAttribute(s,o)}draw(e,a=!1,s=!1){const o=DrawLayer.#i++,l=this.#n(),u=DrawLayer._svgFactory.createElement("defs");l.append(u);const c=DrawLayer._svgFactory.createElement("path");u.append(c);const d=`path_p${this.pageIndex}_${o}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),a&&this.#r.set(o,c);const m=s?this.#o(u,d):null,g=DrawLayer._svgFactory.createElement("use");return l.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(l,e),this.#t.set(o,l),{id:o,clipPathId:`url(#${m})`}}drawOutline(e,a){const s=DrawLayer.#i++,o=this.#n(),l=DrawLayer._svgFactory.createElement("defs");o.append(l);const u=DrawLayer._svgFactory.createElement("path");l.append(u);const c=`path_p${this.pageIndex}_${s}`;u.setAttribute("id",c),u.setAttribute("vector-effect","non-scaling-stroke");let d;if(a){const A=DrawLayer._svgFactory.createElement("mask");l.append(A),d=`mask_p${this.pageIndex}_${s}`,A.setAttribute("id",d),A.setAttribute("maskUnits","objectBoundingBox");const P=DrawLayer._svgFactory.createElement("rect");A.append(P),P.setAttribute("width","1"),P.setAttribute("height","1"),P.setAttribute("fill","white");const W=DrawLayer._svgFactory.createElement("use");A.append(W),W.setAttribute("href",`#${c}`),W.setAttribute("stroke","none"),W.setAttribute("fill","black"),W.setAttribute("fill-rule","nonzero"),W.classList.add("mask")}const m=DrawLayer._svgFactory.createElement("use");o.append(m),m.setAttribute("href",`#${c}`),d&&m.setAttribute("mask",`url(#${d})`);const g=m.cloneNode();return o.append(g),m.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(o,e),this.#t.set(s,o),s}finalizeDraw(e,a){this.#r.delete(e),this.updateProperties(e,a)}updateProperties(e,a){if(!a)return;const{root:s,bbox:o,rootClass:l,path:u}=a,c=typeof e=="number"?this.#t.get(e):e;if(c){if(s&&this.#s(c,s),o&&DrawLayer.#a(c,o),l){const{classList:d}=c;for(const[m,g]of Object.entries(l))d.toggle(m,g)}if(u){const m=c.firstChild.firstChild;this.#s(m,u)}}}updateParent(e,a){if(a===this)return;const s=this.#t.get(e);s&&(a.#e.append(s),this.#t.delete(e),a.#t.set(e,s))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,build,ColorPicker,createValidAbsoluteUrl,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$1,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util,VerbosityLevel,version,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,ColorPicker,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$1,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util,VerbosityLevel,XfaLayer,build,createValidAbsoluteUrl,fetchData,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,setLayerDimensions,shadow,stopEvent,updateUrlHash,version},Symbol.toStringTag,{value:"Module"}));function r(t){var e,a,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=r(t[e]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}function clsx(){for(var t,e,a=0,s="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=r(t))&&(s&&(s+=" "),s+=e);return s}var has=Object.prototype.hasOwnProperty;function find(t,e,a){for(a of t.keys())if(dequal(a,e))return a}function dequal(t,e){var a,s,o;if(t===e)return!0;if(t&&e&&(a=t.constructor)===e.constructor){if(a===Date)return t.getTime()===e.getTime();if(a===RegExp)return t.toString()===e.toString();if(a===Array){if((s=t.length)===e.length)for(;s--&&dequal(t[s],e[s]););return s===-1}if(a===Set){if(t.size!==e.size)return!1;for(s of t)if(o=s,o&&typeof o=="object"&&(o=find(e,o),!o)||!e.has(o))return!1;return!0}if(a===Map){if(t.size!==e.size)return!1;for(s of t)if(o=s[0],o&&typeof o=="object"&&(o=find(e,o),!o)||!dequal(s[1],e.get(o)))return!1;return!0}if(a===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(a===DataView){if((s=t.byteLength)===e.byteLength)for(;s--&&t.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(t)){if((s=t.byteLength)===e.byteLength)for(;s--&&t[s]===e[s];);return s===-1}if(!a||typeof t=="object"){s=0;for(a in t)if(has.call(t,a)&&++s&&!has.call(e,a)||!(a in e)||!dequal(t[a],e[a]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}function makeCancellablePromise(t){let e=!1;return{promise:new Promise((s,o)=>{t.then(l=>!e&&s(l)).catch(l=>!e&&o(l))}),cancel(){e=!0}}}const clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(t,e){const a={};for(const s of allEvents){const o=t[s];o&&(e?a[s]=l=>o(l,e(s)):a[s]=o)}return a}var prefix="Invariant failed";function invariant$1(t,e){if(!t)throw new Error(prefix)}var warning_1,hasRequiredWarning;function requireWarning(){if(hasRequiredWarning)return warning_1;hasRequiredWarning=1;var t=function(){};return warning_1=t,warning_1}var warningExports=requireWarning();const warning=getDefaultExportFromCjs(warningExports),documentContext=reactExports.createContext(null),DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant$1(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){invariant$1(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(a=>{invariant$1(this.pdfDocument),invariant$1(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(a):Array.isArray(e)?a(e):e.then(a)}).then(a=>{invariant$1(Array.isArray(a));const s=a[0];new Promise(o=>{invariant$1(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(l=>{o(l)}).catch(()=>{invariant$1(!1)}):typeof s=="number"?o(s):invariant$1(!1)}).then(o=>{const l=o+1;invariant$1(this.pdfViewer),invariant$1(l>=1&&l<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:a,pageIndex:o,pageNumber:l})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const a=e-1;invariant$1(this.pdfViewer),invariant$1(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:a,pageNumber:e})}addLinkAttributes(e,a,s){e.href=a,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function Message({children:t,type:e}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:t})}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function reducer(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const isBrowser$1=typeof window<"u",isLocalFileSystem=isBrowser$1&&window.location.protocol==="file:";function isDefined$1(t){return typeof t<"u"}function isProvided(t){return isDefined$1(t)&&t!==null}function isString$1(t){return typeof t=="string"}function isArrayBuffer(t){return t instanceof ArrayBuffer}function isBlob(t){return invariant$1(isBrowser$1),t instanceof Blob}function isDataURI(t){return isString$1(t)&&/^data:/.test(t)}function dataURItoByteString(t){invariant$1(isDataURI(t));const[e="",a=""]=t.split(",");return e.split(";").indexOf("base64")!==-1?atob(a):unescape(a)}function getDevicePixelRatio(){return isBrowser$1&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(t){t?.cancel&&t.cancel()}function makePageCallback(t,e){return Object.defineProperty(t,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}function isCancelException(t){return t.name==="RenderingCancelledException"}function loadFromFile(t){return new Promise((e,a)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return a(new Error("Error while reading a file."));e(s.result)},s.onerror=o=>{if(!o.target)return a(new Error("Error while reading a file."));const{error:l}=o.target;if(!l)return a(new Error("Error while reading a file."));switch(l.code){case l.NOT_FOUND_ERR:return a(new Error("Error while reading a file: File not found."));case l.SECURITY_ERR:return a(new Error("Error while reading a file: Security error."));case l.ABORT_ERR:return a(new Error("Error while reading a file: Aborted."));default:return a(new Error("Error while reading a file."))}},s.readAsArrayBuffer(t)})}const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(t,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const a=prompt("Enter the password to open this PDF file.");t(a);break}case PasswordResponses.INCORRECT_PASSWORD:{const a=prompt("Invalid password. Please try again.");t(a);break}}};function isParameterObject(t){return typeof t=="object"&&t!==null&&("data"in t||"range"in t||"url"in t)}const Document=reactExports.forwardRef(function t({children:e,className:a,error:s="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:l,file:u,inputRef:c,imageResourcesPath:d,loading:m="Loading PDF",noData:g="No PDF file specified.",onItemClick:A,onLoadError:P,onLoadProgress:W,onLoadSuccess:me,onPassword:ve=defaultOnPassword,onSourceError:He,onSourceSuccess:De,options:Xe,renderMode:qe,rotate:Rs,scale:Vc,...So},Do){const[eh,Ko]=useResolver(),{value:Ge,error:An}=eh,[wt,Bs]=useResolver(),{value:yh,error:df}=wt,Fc=reactExports.useRef(new LinkService),_h=reactExports.useRef([]),qc=reactExports.useRef(void 0),Mh=reactExports.useRef(void 0);u&&u!==qc.current&&isParameterObject(u)&&(warning(!dequal(u,qc.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),qc.current=u),Xe&&Xe!==Mh.current&&(warning(!dequal(Xe,Mh.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Mh.current=Xe);const cf=reactExports.useRef({scrollPageIntoView:q1=>{const{dest:U1,pageNumber:M2,pageIndex:x2=M2-1}=q1;if(A){A({dest:U1,pageIndex:x2,pageNumber:M2});return}const p1=_h.current[x2];if(p1){p1.scrollIntoView();return}warning(!1,`An internal link leading to page ${M2} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(Do,()=>({linkService:Fc,pages:_h,viewer:cf}),[]);function mf(){De&&De()}function a1(){An&&(warning(!1,An.toString()),He&&He(An))}function s1(){Ko({type:"RESET"})}reactExports.useEffect(s1,[u,Ko]);const E1=reactExports.useCallback(async()=>{if(!u)return null;if(typeof u=="string")return isDataURI(u)?{data:dataURItoByteString(u)}:(displayCORSWarning(),{url:u});if(u instanceof PDFDataRangeTransport)return{range:u};if(isArrayBuffer(u))return{data:u};if(isBrowser$1&&isBlob(u))return{data:await loadFromFile(u)};if(invariant$1(typeof u=="object"),invariant$1(isParameterObject(u)),"url"in u&&typeof u.url=="string"){if(isDataURI(u.url)){const{url:q1,...U1}=u;return{data:dataURItoByteString(q1),...U1}}displayCORSWarning()}return u},[u]);reactExports.useEffect(()=>{const q1=makeCancellablePromise(E1());return q1.promise.then(U1=>{Ko({type:"RESOLVE",value:U1})}).catch(U1=>{Ko({type:"REJECT",error:U1})}),()=>{cancelRunningTask(q1)}},[E1,Ko]),reactExports.useEffect(()=>{if(!(typeof Ge>"u")){if(Ge===!1){a1();return}mf()}},[Ge]);function T1(){yh&&(me&&me(yh),_h.current=new Array(yh.numPages),Fc.current.setDocument(yh))}function z1(){df&&(warning(!1,df.toString()),P&&P(df))}reactExports.useEffect(function(){Bs({type:"RESET"})},[Bs,Ge]),reactExports.useEffect(function(){if(!Ge)return;const U1=Xe?{...Ge,...Xe}:Ge,M2=getDocument(U1);W&&(M2.onProgress=W),ve&&(M2.onPassword=ve);const x2=M2,p1=x2.promise.then(S1=>{Bs({type:"RESOLVE",value:S1})}).catch(S1=>{x2.destroyed||Bs({type:"REJECT",error:S1})});return()=>{p1.finally(()=>x2.destroy())}},[Xe,Bs,Ge]),reactExports.useEffect(()=>{if(!(typeof yh>"u")){if(yh===!1){z1();return}T1()}},[yh]),reactExports.useEffect(function(){Fc.current.setViewer(cf.current),Fc.current.setExternalLinkRel(o),Fc.current.setExternalLinkTarget(l)},[o,l]);const W1=reactExports.useCallback((q1,U1)=>{_h.current[q1]=U1},[]),m2=reactExports.useCallback(q1=>{delete _h.current[q1]},[]),C2=reactExports.useMemo(()=>({imageResourcesPath:d,linkService:Fc.current,onItemClick:A,pdf:yh,registerPage:W1,renderMode:qe,rotate:Rs,scale:Vc,unregisterPage:m2}),[d,A,yh,W1,qe,Rs,Vc,m2]),A2=reactExports.useMemo(()=>makeEventProps(So,()=>yh),[So,yh]);function b2(){function q1(M2){return!!M2?.pdf}if(!q1(C2))throw new Error("pdf is undefined");const U1=typeof e=="function"?e(C2):e;return jsxRuntimeExports.jsx(documentContext.Provider,{value:C2,children:U1})}function _2(){return u?yh==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof m=="function"?m():m}):yh===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof s=="function"?s():s}):b2():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof g=="function"?g():g})}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Document",a),ref:c,...A2,children:_2()})});function useDocumentContext(){return reactExports.useContext(documentContext)}function mergeRefs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var a=t.filter(Boolean);if(a.length<=1){var s=a[0];return s||null}return function(l){for(var u=0,c=a;u<c.length;u++){var d=c[u];typeof d=="function"?d(l):d&&(d.current=l)}}}const pageContext=reactExports.createContext(null);function usePageContext(){return reactExports.useContext(pageContext)}function AnnotationLayer(){const t=useDocumentContext(),e=usePageContext();invariant$1(e);const a={...t,...e},{imageResourcesPath:s,linkService:o,onGetAnnotationsError:l,onGetAnnotationsSuccess:u,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:d,page:m,pdf:g,renderForms:A,rotate:P,scale:W=1}=a;invariant$1(g),invariant$1(m),invariant$1(o);const[me,ve]=useResolver(),{value:He,error:De}=me,Xe=reactExports.useRef(null);warning(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function qe(){He&&u&&u(He)}function Rs(){De&&(warning(!1,De.toString()),l&&l(De))}reactExports.useEffect(function(){ve({type:"RESET"})},[ve,m]),reactExports.useEffect(function(){if(!m)return;const Ko=makeCancellablePromise(m.getAnnotations()),Ge=Ko;return Ko.promise.then(An=>{ve({type:"RESOLVE",value:An})}).catch(An=>{ve({type:"REJECT",error:An})}),()=>{cancelRunningTask(Ge)}},[ve,m]),reactExports.useEffect(()=>{if(He!==void 0){if(He===!1){Rs();return}qe()}},[He]);function Vc(){d&&d()}function So(eh){warning(!1,`${eh}`),c&&c(eh)}const Do=reactExports.useMemo(()=>m.getViewport({scale:W,rotation:P}),[m,P,W]);return reactExports.useEffect(function(){if(!g||!m||!o||!He)return;const{current:Ko}=Xe;if(!Ko)return;const Ge=Do.clone({dontFlip:!0}),An={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:Ko,l10n:null,page:m,structTreeLayer:null,viewport:Ge},wt={annotations:He,annotationStorage:g.annotationStorage,div:Ko,imageResourcesPath:s,linkService:o,page:m,renderForms:A,viewport:Ge};Ko.innerHTML="";try{new AnnotationLayer$1(An).render(wt),Vc()}catch(Bs){So(Bs)}return()=>{}},[He,s,o,m,g,A,Do]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:Xe})}const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(t){return t in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(t){return"children"in t}function isStructTreeNodeWithOnlyContentChild(t){return isStructTreeNode(t)?t.children.length===1&&0 in t.children&&"id"in t.children[0]:!1}function getRoleAttributes(t){const e={};if(isStructTreeNode(t)){const{role:a}=t,s=a.match(HEADING_PATTERN);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(isPdfRole(a)){const o=PDF_ROLE_TO_HTML_ROLE[a];o&&(e.role=o)}}return e}function getBaseAttributes(t){const e={};if(isStructTreeNode(t)){if(t.alt!==void 0&&(e["aria-label"]=t.alt),t.lang!==void 0&&(e.lang=t.lang),isStructTreeNodeWithOnlyContentChild(t)){const[a]=t.children;if(a){const s=getBaseAttributes(a);return{...e,...s}}}}else"id"in t&&(e["aria-owns"]=t.id);return e}function getAttributes(t){return t?{...getRoleAttributes(t),...getBaseAttributes(t)}:null}function StructTreeItem({className:t,node:e}){const a=reactExports.useMemo(()=>getAttributes(e),[e]),s=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((o,l)=>jsxRuntimeExports.jsx(StructTreeItem,{node:o},l)),[e]);return jsxRuntimeExports.jsx("span",{className:t,...a,children:s})}function StructTree(){const t=usePageContext();invariant$1(t);const{onGetStructTreeError:e,onGetStructTreeSuccess:a}=t,[s,o]=useResolver(),{value:l,error:u}=s,{customTextRenderer:c,page:d}=t;function m(){l&&a&&a(l)}function g(){u&&(warning(!1,u.toString()),e&&e(u))}return reactExports.useEffect(function(){o({type:"RESET"})},[o,d]),reactExports.useEffect(function(){if(c||!d)return;const P=makeCancellablePromise(d.getStructTree()),W=P;return P.promise.then(me=>{o({type:"RESOLVE",value:me})}).catch(me=>{o({type:"REJECT",error:me})}),()=>cancelRunningTask(W)},[c,d,o]),reactExports.useEffect(()=>{if(l!==void 0){if(l===!1){g();return}m()}},[l]),l?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:l}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas(t){const e=usePageContext();invariant$1(e);const a={...e,...t},{_className:s,canvasBackground:o,devicePixelRatio:l=getDevicePixelRatio(),onRenderError:u,onRenderSuccess:c,page:d,renderForms:m,renderTextLayer:g,rotate:A,scale:P}=a,{canvasRef:W}=t;invariant$1(d);const me=reactExports.useRef(null);function ve(){d&&c&&c(makePageCallback(d,P))}function He(Rs){isCancelException(Rs)||(warning(!1,Rs.toString()),u&&u(Rs))}const De=reactExports.useMemo(()=>d.getViewport({scale:P*l,rotation:A}),[l,d,A,P]),Xe=reactExports.useMemo(()=>d.getViewport({scale:P,rotation:A}),[d,A,P]);reactExports.useEffect(function(){if(!d)return;d.cleanup();const{current:Vc}=me;if(!Vc)return;Vc.width=De.width,Vc.height=De.height,Vc.style.width=`${Math.floor(Xe.width)}px`,Vc.style.height=`${Math.floor(Xe.height)}px`,Vc.style.visibility="hidden";const So={annotationMode:m?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:Vc.getContext("2d",{alpha:!1}),viewport:De};o&&(So.background=o);const Do=d.render(So),eh=Do;return Do.promise.then(()=>{Vc.style.visibility="",ve()}).catch(He),()=>cancelRunningTask(eh)},[o,d,m,De,Xe]);const qe=reactExports.useCallback(()=>{const{current:Rs}=me;Rs&&(Rs.width=0,Rs.height=0)},[]);return reactExports.useEffect(()=>qe,[qe]),jsxRuntimeExports.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:mergeRefs(W,me),style:{display:"block",userSelect:"none"},children:g?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(t){return"str"in t}function TextLayer(){const t=usePageContext();invariant$1(t);const{customTextRenderer:e,onGetTextError:a,onGetTextSuccess:s,onRenderTextLayerError:o,onRenderTextLayerSuccess:l,page:u,pageIndex:c,pageNumber:d,rotate:m,scale:g}=t;invariant$1(u);const[A,P]=useResolver(),{value:W,error:me}=A,ve=reactExports.useRef(null);warning(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function He(){W&&s&&s(W)}function De(){me&&(warning(!1,me.toString()),a&&a(me))}reactExports.useEffect(function(){P({type:"RESET"})},[u,P]),reactExports.useEffect(function(){if(!u)return;const eh=makeCancellablePromise(u.getTextContent()),Ko=eh;return eh.promise.then(Ge=>{P({type:"RESOLVE",value:Ge})}).catch(Ge=>{P({type:"REJECT",error:Ge})}),()=>cancelRunningTask(Ko)},[u,P]),reactExports.useEffect(()=>{if(W!==void 0){if(W===!1){De();return}He()}},[W]);const Xe=reactExports.useCallback(()=>{l&&l()},[l]),qe=reactExports.useCallback(Do=>{warning(!1,Do.toString()),o&&o(Do)},[o]);function Rs(){const Do=ve.current;Do&&Do.classList.add("selecting")}function Vc(){const Do=ve.current;Do&&Do.classList.remove("selecting")}const So=reactExports.useMemo(()=>u.getViewport({scale:g,rotation:m}),[u,m,g]);return reactExports.useLayoutEffect(function(){if(!u||!W)return;const{current:eh}=ve;if(!eh)return;eh.innerHTML="";const Ko=u.streamTextContent({includeMarkedContent:!0}),Ge={container:eh,textContentSource:Ko,viewport:So},An=new TextLayer$1(Ge),wt=An;return An.render().then(()=>{const Bs=document.createElement("div");Bs.className="endOfContent",eh.append(Bs);const yh=eh.querySelectorAll('[role="presentation"]');if(e){let df=0;W.items.forEach((Fc,_h)=>{if(!isTextItem(Fc))return;const qc=yh[df];if(!qc)return;const Mh=e({pageIndex:c,pageNumber:d,itemIndex:_h,...Fc});qc.innerHTML=Mh,df+=Fc.str&&Fc.hasEOL?2:1})}Xe()}).catch(qe),()=>cancelRunningTask(wt)},[e,qe,Xe,u,c,d,W,So]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:Vc,onMouseDown:Rs,ref:ve})}const defaultScale=1;function Page(t){const a={...useDocumentContext(),...t},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:o=!0,canvasBackground:l,canvasRef:u,children:c,className:d,customRenderer:m,customTextRenderer:g,devicePixelRatio:A,error:P="Failed to load the page.",height:W,inputRef:me,loading:ve="Loading page",noData:He="No page specified.",onGetAnnotationsError:De,onGetAnnotationsSuccess:Xe,onGetStructTreeError:qe,onGetStructTreeSuccess:Rs,onGetTextError:Vc,onGetTextSuccess:So,onLoadError:Do,onLoadSuccess:eh,onRenderAnnotationLayerError:Ko,onRenderAnnotationLayerSuccess:Ge,onRenderError:An,onRenderSuccess:wt,onRenderTextLayerError:Bs,onRenderTextLayerSuccess:yh,pageIndex:df,pageNumber:Fc,pdf:_h,registerPage:qc,renderAnnotationLayer:Mh=!0,renderForms:cf=!1,renderMode:mf="canvas",renderTextLayer:a1=!0,rotate:s1,scale:E1=defaultScale,unregisterPage:T1,width:z1,...W1}=a,[m2,C2]=useResolver(),{value:A2,error:b2}=m2,_2=reactExports.useRef(null);invariant$1(_h);const q1=isProvided(Fc)?Fc-1:df??null,U1=Fc??(isProvided(df)?df+1:null),M2=s1??(A2?A2.rotate:null),x2=reactExports.useMemo(()=>{if(!A2)return null;let e1=1;const w1=E1??defaultScale;if(z1||W){const C1=A2.getViewport({scale:1,rotation:M2});z1?e1=z1/C1.width:W&&(e1=W/C1.height)}return w1*e1},[W,A2,M2,E1,z1]);reactExports.useEffect(function(){return()=>{isProvided(q1)&&o&&T1&&T1(q1)}},[o,_h,q1,T1]);function p1(){if(eh){if(!A2||!x2)return;eh(makePageCallback(A2,x2))}if(o&&qc){if(!isProvided(q1)||!_2.current)return;qc(q1,_2.current)}}function S1(){b2&&(warning(!1,b2.toString()),Do&&Do(b2))}reactExports.useEffect(function(){C2({type:"RESET"})},[C2,_h,q1]),reactExports.useEffect(function(){if(!_h||!U1)return;const w1=makeCancellablePromise(_h.getPage(U1)),C1=w1;return w1.promise.then(F1=>{C2({type:"RESOLVE",value:F1})}).catch(F1=>{C2({type:"REJECT",error:F1})}),()=>cancelRunningTask(C1)},[C2,_h,U1]),reactExports.useEffect(()=>{if(A2!==void 0){if(A2===!1){S1();return}p1()}},[A2,x2]);const D1=reactExports.useMemo(()=>isProvided(q1)&&U1&&isProvided(M2)&&isProvided(x2)?{_className:s,canvasBackground:l,customTextRenderer:g,devicePixelRatio:A,onGetAnnotationsError:De,onGetAnnotationsSuccess:Xe,onGetStructTreeError:qe,onGetStructTreeSuccess:Rs,onGetTextError:Vc,onGetTextSuccess:So,onRenderAnnotationLayerError:Ko,onRenderAnnotationLayerSuccess:Ge,onRenderError:An,onRenderSuccess:wt,onRenderTextLayerError:Bs,onRenderTextLayerSuccess:yh,page:A2,pageIndex:q1,pageNumber:U1,renderForms:cf,renderTextLayer:a1,rotate:M2,scale:x2}:null,[s,l,g,A,De,Xe,qe,Rs,Vc,So,Ko,Ge,An,wt,Bs,yh,A2,q1,U1,cf,a1,M2,x2]),_1=reactExports.useMemo(()=>makeEventProps(W1,()=>A2&&(x2?makePageCallback(A2,x2):void 0)),[W1,A2,x2]),B1=`${q1}@${x2}/${M2}`;function c2(){switch(mf){case"custom":return invariant$1(m),jsxRuntimeExports.jsx(m,{},`${B1}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas,{canvasRef:u},`${B1}_canvas`)}}function H1(){return a1?jsxRuntimeExports.jsx(TextLayer,{},`${B1}_text`):null}function x1(){return Mh?jsxRuntimeExports.jsx(AnnotationLayer,{},`${B1}_annotations`):null}function pf(){function e1(C1){return!!C1?.page}if(!e1(D1))throw new Error("page is undefined");const w1=typeof c=="function"?c(D1):c;return jsxRuntimeExports.jsxs(pageContext.Provider,{value:D1,children:[c2(),H1(),x1(),w1]})}function o1(){return U1?_h===null||A2===void 0||A2===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof ve=="function"?ve():ve}):_h===!1||A2===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof P=="function"?P():P}):pf():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof He=="function"?He():He})}return jsxRuntimeExports.jsx("div",{className:clsx(s,d),"data-page-number":U1,ref:mergeRefs(me,_2),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${x2}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:l||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},..._1,children:o1()})}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";const pdfWorker="/assets/pdf.worker-B8q3_SH5.mjs";GlobalWorkerOptions.workerSrc=pdfWorker;const LogTables=({pgNumber:t})=>{const[e,a]=reactExports.useState(0),[s,o]=reactExports.useState(0),l=reactExports.useRef([]);return reactExports.useEffect(()=>{l.current=Array(e).fill(null).map((u,c)=>l.current[c]||reactExports.createRef())},[e]),reactExports.useEffect(()=>{if(s<e)return;const u=parseInt(t,10)-1;u>=0&&l.current[u]?.current&&l.current[u].current.scrollIntoView({behavior:"auto",block:"start"})},[t,e,s]),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-start overflow-y-auto border-2 color-shadow",style:{height:"80vh",width:"650px"},children:jsxRuntimeExports.jsx(Document,{file:"/assets/log_tables.pdf",onLoadSuccess:({numPages:u})=>{a(u),o(0)},onLoadError:u=>console.error("PDF load error:",u),children:Array.from({length:e},(u,c)=>jsxRuntimeExports.jsx("div",{ref:l.current[c],className:"flex justify-center my-2",children:jsxRuntimeExports.jsx(Page,{pageNumber:c+1,width:600,renderTextLayer:!1,renderAnnotationLayer:!1,onRenderSuccess:()=>o(d=>d+1)})},`page_${c+1}`))})})};GlobalWorkerOptions.workerSrc=pdfWorker;const MarkingScheme=({year:t,pgNumber:e})=>{const[a,s]=reactExports.useState(0),[o,l]=reactExports.useState(0),u=reactExports.useRef([]);return reactExports.useEffect(()=>{u.current=Array(a).fill(null).map((c,d)=>u.current[d]||reactExports.createRef())},[a]),reactExports.useEffect(()=>{if(o<a)return;const c=parseInt(e,10)-1;c>=0&&u.current[c]?.current&&u.current[c].current.scrollIntoView({behavior:"auto",block:"start"})},[e,a,o]),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-start overflow-y-auto color-shadow",style:{height:"80vh",width:"650px"},children:jsxRuntimeExports.jsx(Document,{file:`/assets/marking_schemes/${t}.pdf`,onLoadSuccess:({numPages:c})=>{s(c),l(0)},onLoadError:c=>console.error("PDF load error:",c),children:Array.from({length:a},(c,d)=>jsxRuntimeExports.jsx("div",{ref:u.current[d],className:"flex justify-center my-2",children:jsxRuntimeExports.jsx(Page,{pageNumber:d+1,width:600,renderTextLayer:!1,renderAnnotationLayer:!1,onRenderSuccess:()=>l(m=>m+1)})},`page_${d+1}`))})})},MarkingScheme$1=React.memo(MarkingScheme),Timer=()=>{const[t,e]=reactExports.useState(0),[a,s]=reactExports.useState(!1);return reactExports.useEffect(()=>{let o;return a?o=setInterval(()=>{e(l=>l+10)},10):a||clearInterval(o),()=>clearInterval(o)},[a]),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen pb-40",children:[jsxRuntimeExports.jsxs("div",{className:"color-txt-main fontsize-xl font-bold mb-4 text-8xl",children:[jsxRuntimeExports.jsxs("span",{children:[Math.floor(t/6e4%60)>9?Math.floor(t/6e4%60):"0"+Math.floor(t/6e4%60),":"]}),jsxRuntimeExports.jsx("span",{children:Math.floor(t/1e3%60)>9?Math.floor(t/1e3%60):"0"+Math.floor(t/1e3%60)})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row gap-2",children:[jsxRuntimeExports.jsx("button",{className:`px-12 py-2 rounded-out font-bold \r
                                color-bg-accent color-txt-accent \r
                                cursor-pointer hover:scale-95 duration-200`,onClick:()=>s(!0),children:"Start"}),jsxRuntimeExports.jsx("button",{className:`px-12 py-2 rounded-out font-bold \r
                                color-bg-accent color-txt-accent \r
                                cursor-pointer hover:scale-95 duration-200`,onClick:()=>s(!1),children:"Stop"}),jsxRuntimeExports.jsx("button",{className:`px-12 py-2 rounded-out font-bold \r
                                color-bg-accent color-txt-accent \r
                                cursor-pointer hover:scale-95 duration-200`,onClick:()=>e(0),children:"Reset"})]})]})};function isArray(t){return Array.isArray?Array.isArray(t):getTag(t)==="[object Array]"}function baseToString(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function toString(t){return t==null?"":baseToString(t)}function isString(t){return typeof t=="string"}function isNumber(t){return typeof t=="number"}function isBoolean(t){return t===!0||t===!1||isObjectLike(t)&&getTag(t)=="[object Boolean]"}function isObject$1(t){return typeof t=="object"}function isObjectLike(t){return isObject$1(t)&&t!==null}function isDefined(t){return t!=null}function isBlank(t){return!t.trim().length}function getTag(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const INCORRECT_INDEX_TYPE="Incorrect 'index' type",LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY=t=>`Invalid value for key ${t}`,PATTERN_LENGTH_TOO_LARGE=t=>`Pattern length exceeds max of ${t}.`,MISSING_KEY_PROPERTY=t=>`Missing ${t} property in key`,INVALID_KEY_WEIGHT_VALUE=t=>`Property 'weight' in key '${t}' must be a positive integer`,hasOwn=Object.prototype.hasOwnProperty;class KeyStore{constructor(e){this._keys=[],this._keyMap={};let a=0;e.forEach(s=>{let o=createKey(s);this._keys.push(o),this._keyMap[o.id]=o,a+=o.weight}),this._keys.forEach(s=>{s.weight/=a})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function createKey(t){let e=null,a=null,s=null,o=1,l=null;if(isString(t)||isArray(t))s=t,e=createKeyPath(t),a=createKeyId(t);else{if(!hasOwn.call(t,"name"))throw new Error(MISSING_KEY_PROPERTY("name"));const u=t.name;if(s=u,hasOwn.call(t,"weight")&&(o=t.weight,o<=0))throw new Error(INVALID_KEY_WEIGHT_VALUE(u));e=createKeyPath(u),a=createKeyId(u),l=t.getFn}return{path:e,id:a,weight:o,src:s,getFn:l}}function createKeyPath(t){return isArray(t)?t:t.split(".")}function createKeyId(t){return isArray(t)?t.join("."):t}function get(t,e){let a=[],s=!1;const o=(l,u,c)=>{if(isDefined(l))if(!u[c])a.push(l);else{let d=u[c];const m=l[d];if(!isDefined(m))return;if(c===u.length-1&&(isString(m)||isNumber(m)||isBoolean(m)))a.push(toString(m));else if(isArray(m)){s=!0;for(let g=0,A=m.length;g<A;g+=1)o(m[g],u,c+1)}else u.length&&o(m,u,c+1)}};return o(t,isString(e)?e.split("."):e,0),s?a:a[0]}const MatchOptions={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},BasicOptions={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},FuzzyOptions={location:0,threshold:.6,distance:100},AdvancedOptions={useExtendedSearch:!1,getFn:get,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Config={...BasicOptions,...MatchOptions,...FuzzyOptions,...AdvancedOptions};const SPACE=/[^ ]+/g;function norm(t=1,e=3){const a=new Map,s=Math.pow(10,e);return{get(o){const l=o.match(SPACE).length;if(a.has(l))return a.get(l);const u=1/Math.pow(l,.5*t),c=parseFloat(Math.round(u*s)/s);return a.set(l,c),c},clear(){a.clear()}}}class FuseIndex{constructor({getFn:e=Config.getFn,fieldNormWeight:a=Config.fieldNormWeight}={}){this.norm=norm(a,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((a,s)=>{this._keysMap[a.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,isString(this.docs[0])?this.docs.forEach((e,a)=>{this._addString(e,a)}):this.docs.forEach((e,a)=>{this._addObject(e,a)}),this.norm.clear())}add(e){const a=this.size();isString(e)?this._addString(e,a):this._addObject(e,a)}removeAt(e){this.records.splice(e,1);for(let a=e,s=this.size();a<s;a+=1)this.records[a].i-=1}getValueForItemAtKeyId(e,a){return e[this._keysMap[a]]}size(){return this.records.length}_addString(e,a){if(!isDefined(e)||isBlank(e))return;let s={v:e,i:a,n:this.norm.get(e)};this.records.push(s)}_addObject(e,a){let s={i:a,$:{}};this.keys.forEach((o,l)=>{let u=o.getFn?o.getFn(e):this.getFn(e,o.path);if(isDefined(u)){if(isArray(u)){let c=[];const d=[{nestedArrIndex:-1,value:u}];for(;d.length;){const{nestedArrIndex:m,value:g}=d.pop();if(isDefined(g))if(isString(g)&&!isBlank(g)){let A={v:g,i:m,n:this.norm.get(g)};c.push(A)}else isArray(g)&&g.forEach((A,P)=>{d.push({nestedArrIndex:P,value:A})})}s.$[l]=c}else if(isString(u)&&!isBlank(u)){let c={v:u,n:this.norm.get(u)};s.$[l]=c}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function createIndex(t,e,{getFn:a=Config.getFn,fieldNormWeight:s=Config.fieldNormWeight}={}){const o=new FuseIndex({getFn:a,fieldNormWeight:s});return o.setKeys(t.map(createKey)),o.setSources(e),o.create(),o}function parseIndex(t,{getFn:e=Config.getFn,fieldNormWeight:a=Config.fieldNormWeight}={}){const{keys:s,records:o}=t,l=new FuseIndex({getFn:e,fieldNormWeight:a});return l.setKeys(s),l.setIndexRecords(o),l}function computeScore$1(t,{errors:e=0,currentLocation:a=0,expectedLocation:s=0,distance:o=Config.distance,ignoreLocation:l=Config.ignoreLocation}={}){const u=e/t.length;if(l)return u;const c=Math.abs(s-a);return o?u+c/o:c?1:u}function convertMaskToIndices(t=[],e=Config.minMatchCharLength){let a=[],s=-1,o=-1,l=0;for(let u=t.length;l<u;l+=1){let c=t[l];c&&s===-1?s=l:!c&&s!==-1&&(o=l-1,o-s+1>=e&&a.push([s,o]),s=-1)}return t[l-1]&&l-s>=e&&a.push([s,l-1]),a}const MAX_BITS=32;function search(t,e,a,{location:s=Config.location,distance:o=Config.distance,threshold:l=Config.threshold,findAllMatches:u=Config.findAllMatches,minMatchCharLength:c=Config.minMatchCharLength,includeMatches:d=Config.includeMatches,ignoreLocation:m=Config.ignoreLocation}={}){if(e.length>MAX_BITS)throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS));const g=e.length,A=t.length,P=Math.max(0,Math.min(s,A));let W=l,me=P;const ve=c>1||d,He=ve?Array(A):[];let De;for(;(De=t.indexOf(e,me))>-1;){let Do=computeScore$1(e,{currentLocation:De,expectedLocation:P,distance:o,ignoreLocation:m});if(W=Math.min(Do,W),me=De+g,ve){let eh=0;for(;eh<g;)He[De+eh]=1,eh+=1}}me=-1;let Xe=[],qe=1,Rs=g+A;const Vc=1<<g-1;for(let Do=0;Do<g;Do+=1){let eh=0,Ko=Rs;for(;eh<Ko;)computeScore$1(e,{errors:Do,currentLocation:P+Ko,expectedLocation:P,distance:o,ignoreLocation:m})<=W?eh=Ko:Rs=Ko,Ko=Math.floor((Rs-eh)/2+eh);Rs=Ko;let Ge=Math.max(1,P-Ko+1),An=u?A:Math.min(P+Ko,A)+g,wt=Array(An+2);wt[An+1]=(1<<Do)-1;for(let yh=An;yh>=Ge;yh-=1){let df=yh-1,Fc=a[t.charAt(df)];if(ve&&(He[df]=+!!Fc),wt[yh]=(wt[yh+1]<<1|1)&Fc,Do&&(wt[yh]|=(Xe[yh+1]|Xe[yh])<<1|1|Xe[yh+1]),wt[yh]&Vc&&(qe=computeScore$1(e,{errors:Do,currentLocation:df,expectedLocation:P,distance:o,ignoreLocation:m}),qe<=W)){if(W=qe,me=df,me<=P)break;Ge=Math.max(1,2*P-me)}}if(computeScore$1(e,{errors:Do+1,currentLocation:P,expectedLocation:P,distance:o,ignoreLocation:m})>W)break;Xe=wt}const So={isMatch:me>=0,score:Math.max(.001,qe)};if(ve){const Do=convertMaskToIndices(He,c);Do.length?d&&(So.indices=Do):So.isMatch=!1}return So}function createPatternAlphabet(t){let e={};for(let a=0,s=t.length;a<s;a+=1){const o=t.charAt(a);e[o]=(e[o]||0)|1<<s-a-1}return e}const stripDiacritics=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class BitapSearch{constructor(e,{location:a=Config.location,threshold:s=Config.threshold,distance:o=Config.distance,includeMatches:l=Config.includeMatches,findAllMatches:u=Config.findAllMatches,minMatchCharLength:c=Config.minMatchCharLength,isCaseSensitive:d=Config.isCaseSensitive,ignoreDiacritics:m=Config.ignoreDiacritics,ignoreLocation:g=Config.ignoreLocation}={}){if(this.options={location:a,threshold:s,distance:o,includeMatches:l,findAllMatches:u,minMatchCharLength:c,isCaseSensitive:d,ignoreDiacritics:m,ignoreLocation:g},e=d?e:e.toLowerCase(),e=m?stripDiacritics(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const A=(W,me)=>{this.chunks.push({pattern:W,alphabet:createPatternAlphabet(W),startIndex:me})},P=this.pattern.length;if(P>MAX_BITS){let W=0;const me=P%MAX_BITS,ve=P-me;for(;W<ve;)A(this.pattern.substr(W,MAX_BITS),W),W+=MAX_BITS;if(me){const He=P-MAX_BITS;A(this.pattern.substr(He),He)}}else A(this.pattern,0)}searchIn(e){const{isCaseSensitive:a,ignoreDiacritics:s,includeMatches:o}=this.options;if(e=a?e:e.toLowerCase(),e=s?stripDiacritics(e):e,this.pattern===e){let ve={isMatch:!0,score:0};return o&&(ve.indices=[[0,e.length-1]]),ve}const{location:l,distance:u,threshold:c,findAllMatches:d,minMatchCharLength:m,ignoreLocation:g}=this.options;let A=[],P=0,W=!1;this.chunks.forEach(({pattern:ve,alphabet:He,startIndex:De})=>{const{isMatch:Xe,score:qe,indices:Rs}=search(e,ve,He,{location:l+De,distance:u,threshold:c,findAllMatches:d,minMatchCharLength:m,includeMatches:o,ignoreLocation:g});Xe&&(W=!0),P+=qe,Xe&&Rs&&(A=[...A,...Rs])});let me={isMatch:W,score:W?P/this.chunks.length:1};return W&&o&&(me.indices=A),me}}class BaseMatch{constructor(e){this.pattern=e}static isMultiMatch(e){return getMatch(e,this.multiRegex)}static isSingleMatch(e){return getMatch(e,this.singleRegex)}search(){}}function getMatch(t,e){const a=t.match(e);return a?a[1]:null}class ExactMatch extends BaseMatch{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const a=e===this.pattern;return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class InverseExactMatch extends BaseMatch{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class PrefixExactMatch extends BaseMatch{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const a=e.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class InversePrefixExactMatch extends BaseMatch{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const a=!e.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class SuffixExactMatch extends BaseMatch{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const a=e.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class InverseSuffixExactMatch extends BaseMatch{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const a=!e.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class FuzzyMatch extends BaseMatch{constructor(e,{location:a=Config.location,threshold:s=Config.threshold,distance:o=Config.distance,includeMatches:l=Config.includeMatches,findAllMatches:u=Config.findAllMatches,minMatchCharLength:c=Config.minMatchCharLength,isCaseSensitive:d=Config.isCaseSensitive,ignoreDiacritics:m=Config.ignoreDiacritics,ignoreLocation:g=Config.ignoreLocation}={}){super(e),this._bitapSearch=new BitapSearch(e,{location:a,threshold:s,distance:o,includeMatches:l,findAllMatches:u,minMatchCharLength:c,isCaseSensitive:d,ignoreDiacritics:m,ignoreLocation:g})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class IncludeMatch extends BaseMatch{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let a=0,s;const o=[],l=this.pattern.length;for(;(s=e.indexOf(this.pattern,a))>-1;)a=s+l,o.push([s,a-1]);const u=!!o.length;return{isMatch:u,score:u?0:1,indices:o}}}const searchers=[ExactMatch,IncludeMatch,PrefixExactMatch,InversePrefixExactMatch,InverseSuffixExactMatch,SuffixExactMatch,InverseExactMatch,FuzzyMatch],searchersLen=searchers.length,SPACE_RE=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,OR_TOKEN="|";function parseQuery(t,e={}){return t.split(OR_TOKEN).map(a=>{let s=a.trim().split(SPACE_RE).filter(l=>l&&!!l.trim()),o=[];for(let l=0,u=s.length;l<u;l+=1){const c=s[l];let d=!1,m=-1;for(;!d&&++m<searchersLen;){const g=searchers[m];let A=g.isMultiMatch(c);A&&(o.push(new g(A,e)),d=!0)}if(!d)for(m=-1;++m<searchersLen;){const g=searchers[m];let A=g.isSingleMatch(c);if(A){o.push(new g(A,e));break}}}return o})}const MultiMatchSet=new Set([FuzzyMatch.type,IncludeMatch.type]);class ExtendedSearch{constructor(e,{isCaseSensitive:a=Config.isCaseSensitive,ignoreDiacritics:s=Config.ignoreDiacritics,includeMatches:o=Config.includeMatches,minMatchCharLength:l=Config.minMatchCharLength,ignoreLocation:u=Config.ignoreLocation,findAllMatches:c=Config.findAllMatches,location:d=Config.location,threshold:m=Config.threshold,distance:g=Config.distance}={}){this.query=null,this.options={isCaseSensitive:a,ignoreDiacritics:s,includeMatches:o,minMatchCharLength:l,findAllMatches:c,ignoreLocation:u,location:d,threshold:m,distance:g},e=a?e:e.toLowerCase(),e=s?stripDiacritics(e):e,this.pattern=e,this.query=parseQuery(this.pattern,this.options)}static condition(e,a){return a.useExtendedSearch}searchIn(e){const a=this.query;if(!a)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:o,ignoreDiacritics:l}=this.options;e=o?e:e.toLowerCase(),e=l?stripDiacritics(e):e;let u=0,c=[],d=0;for(let m=0,g=a.length;m<g;m+=1){const A=a[m];c.length=0,u=0;for(let P=0,W=A.length;P<W;P+=1){const me=A[P],{isMatch:ve,indices:He,score:De}=me.search(e);if(ve){if(u+=1,d+=De,s){const Xe=me.constructor.type;MultiMatchSet.has(Xe)?c=[...c,...He]:c.push(He)}}else{d=0,u=0,c.length=0;break}}if(u){let P={isMatch:!0,score:d/u};return s&&(P.indices=c),P}}return{isMatch:!1,score:1}}}const registeredSearchers=[];function register(...t){registeredSearchers.push(...t)}function createSearcher(t,e){for(let a=0,s=registeredSearchers.length;a<s;a+=1){let o=registeredSearchers[a];if(o.condition(t,e))return new o(t,e)}return new BitapSearch(t,e)}const LogicalOperator={AND:"$and",OR:"$or"},KeyType={PATH:"$path",PATTERN:"$val"},isExpression=t=>!!(t[LogicalOperator.AND]||t[LogicalOperator.OR]),isPath=t=>!!t[KeyType.PATH],isLeaf=t=>!isArray(t)&&isObject$1(t)&&!isExpression(t),convertToExplicit=t=>({[LogicalOperator.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function parse(t,e,{auto:a=!0}={}){const s=o=>{let l=Object.keys(o);const u=isPath(o);if(!u&&l.length>1&&!isExpression(o))return s(convertToExplicit(o));if(isLeaf(o)){const d=u?o[KeyType.PATH]:l[0],m=u?o[KeyType.PATTERN]:o[d];if(!isString(m))throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(d));const g={keyId:createKeyId(d),pattern:m};return a&&(g.searcher=createSearcher(m,e)),g}let c={children:[],operator:l[0]};return l.forEach(d=>{const m=o[d];isArray(m)&&m.forEach(g=>{c.children.push(s(g))})}),c};return isExpression(t)||(t=convertToExplicit(t)),s(t)}function computeScore(t,{ignoreFieldNorm:e=Config.ignoreFieldNorm}){t.forEach(a=>{let s=1;a.matches.forEach(({key:o,norm:l,score:u})=>{const c=o?o.weight:null;s*=Math.pow(u===0&&c?Number.EPSILON:u,(c||1)*(e?1:l))}),a.score=s})}function transformMatches(t,e){const a=t.matches;e.matches=[],isDefined(a)&&a.forEach(s=>{if(!isDefined(s.indices)||!s.indices.length)return;const{indices:o,value:l}=s;let u={indices:o,value:l};s.key&&(u.key=s.key.src),s.idx>-1&&(u.refIndex=s.idx),e.matches.push(u)})}function transformScore(t,e){e.score=t.score}function format(t,e,{includeMatches:a=Config.includeMatches,includeScore:s=Config.includeScore}={}){const o=[];return a&&o.push(transformMatches),s&&o.push(transformScore),t.map(l=>{const{idx:u}=l,c={item:e[u],refIndex:u};return o.length&&o.forEach(d=>{d(l,c)}),c})}class Fuse{constructor(e,a={},s){this.options={...Config,...a},this.options.useExtendedSearch,this._keyStore=new KeyStore(this.options.keys),this.setCollection(e,s)}setCollection(e,a){if(this._docs=e,a&&!(a instanceof FuseIndex))throw new Error(INCORRECT_INDEX_TYPE);this._myIndex=a||createIndex(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){isDefined(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const a=[];for(let s=0,o=this._docs.length;s<o;s+=1){const l=this._docs[s];e(l,s)&&(this.removeAt(s),s-=1,o-=1,a.push(l))}return a}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:a=-1}={}){const{includeMatches:s,includeScore:o,shouldSort:l,sortFn:u,ignoreFieldNorm:c}=this.options;let d=isString(e)?isString(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return computeScore(d,{ignoreFieldNorm:c}),l&&d.sort(u),isNumber(a)&&a>-1&&(d=d.slice(0,a)),format(d,this._docs,{includeMatches:s,includeScore:o})}_searchStringList(e){const a=createSearcher(e,this.options),{records:s}=this._myIndex,o=[];return s.forEach(({v:l,i:u,n:c})=>{if(!isDefined(l))return;const{isMatch:d,score:m,indices:g}=a.searchIn(l);d&&o.push({item:l,idx:u,matches:[{score:m,value:l,norm:c,indices:g}]})}),o}_searchLogical(e){const a=parse(e,this.options),s=(c,d,m)=>{if(!c.children){const{keyId:A,searcher:P}=c,W=this._findMatches({key:this._keyStore.get(A),value:this._myIndex.getValueForItemAtKeyId(d,A),searcher:P});return W&&W.length?[{idx:m,item:d,matches:W}]:[]}const g=[];for(let A=0,P=c.children.length;A<P;A+=1){const W=c.children[A],me=s(W,d,m);if(me.length)g.push(...me);else if(c.operator===LogicalOperator.AND)return[]}return g},o=this._myIndex.records,l={},u=[];return o.forEach(({$:c,i:d})=>{if(isDefined(c)){let m=s(a,c,d);m.length&&(l[d]||(l[d]={idx:d,item:c,matches:[]},u.push(l[d])),m.forEach(({matches:g})=>{l[d].matches.push(...g)}))}}),u}_searchObjectList(e){const a=createSearcher(e,this.options),{keys:s,records:o}=this._myIndex,l=[];return o.forEach(({$:u,i:c})=>{if(!isDefined(u))return;let d=[];s.forEach((m,g)=>{d.push(...this._findMatches({key:m,value:u[g],searcher:a}))}),d.length&&l.push({idx:c,item:u,matches:d})}),l}_findMatches({key:e,value:a,searcher:s}){if(!isDefined(a))return[];let o=[];if(isArray(a))a.forEach(({v:l,i:u,n:c})=>{if(!isDefined(l))return;const{isMatch:d,score:m,indices:g}=s.searchIn(l);d&&o.push({score:m,key:e,value:l,idx:u,norm:c,indices:g})});else{const{v:l,n:u}=a,{isMatch:c,score:d,indices:m}=s.searchIn(l);c&&o.push({score:d,key:e,value:l,norm:u,indices:m})}return o}}Fuse.version="7.1.0";Fuse.createIndex=createIndex;Fuse.parseIndex=parseIndex;Fuse.config=Config;Fuse.parseQuery=parse;register(ExtendedSearch);function QSearch(t){const{fetchAllQuestions:e}=useQuestions(),[a,s]=reactExports.useState([]),[o,l]=reactExports.useState(""),[u,c]=reactExports.useState(!1),d=reactExports.useRef(null),m=reactExports.useRef(null),g={keys:["properties.name"],isCaseSensitive:!1};reactExports.useEffect(()=>{c(!0),(async()=>{const me=await e();m.current=new Fuse(me,g)})()},[]),reactExports.useEffect(()=>{function W(me){d.current&&!d.current.contains(me.target)&&A()}return document.addEventListener("mousedown",W),()=>{document.removeEventListener("mousedown",W)}},[t]),reactExports.useEffect(()=>{m.current&&s(m.current.search(o))},[o]);const A=()=>{c(!1),setTimeout(()=>{t.setShowSearch(!1),l("")},300)},P=W=>{t.questions[t.position+1]=W,t.setPosition(me=>me+1),A()};return jsxRuntimeExports.jsx("div",{className:`absolute left-0 top-0 w-[100vw] h-[100vh] color-bg-grey-10 z-50
                flex items-center justify-center transition-opacity duration-300
                ${u?"opacity-100":"opacity-0"}`,children:jsxRuntimeExports.jsxs("div",{ref:d,className:`w-[50%] h-[60%] color-bg border-2 color-shadow rounded-out p-4
                    transition-transform duration-300
                    ${u?"scale-100":"scale-95"}`,children:[jsxRuntimeExports.jsxs("div",{className:`outline-none w-full color-bg-grey-5 font-bold placeholder:color-txt-sub\r
                    color-txt-main rounded-out flex items-center p-1`,children:[jsxRuntimeExports.jsx(LuSearch,{className:"color-txt-sub ml-2",strokeWidth:2,size:20}),jsxRuntimeExports.jsx("input",{type:"text",className:`outline-none w-full p-2 font-bold placeholder:color-txt-sub\r
                    color-txt-main rounded-out`,placeholder:"Search Questions...",value:o,onChange:W=>{l(W.target.value)}}),jsxRuntimeExports.jsx(LuX,{className:"color-txt-sub mr-2 justify-self-end",strokeWidth:2,size:24,onClick:A})]}),jsxRuntimeExports.jsx("div",{className:"h-[85%] overflow-auto mt-2",children:a.map(W=>jsxRuntimeExports.jsxs("div",{className:"p-3 border-b-2 color-shadow hover:color-bg-grey-5",onClick:()=>{P(W.item)},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"txt-bold color-txt-accent",children:W.item.properties.name}),jsxRuntimeExports.jsx("span",{className:"txt-sub mx-2",children:W.item.properties.tags.join(", ")})]}),jsxRuntimeExports.jsxs("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap max-w-[80%]",children:[jsxRuntimeExports.jsx(RenderMath,{className:"color-txt-sub italic m-1 inline",text:W.item.content[0].question}),jsxRuntimeExports.jsx("span",{className:"color-txt-sub italic m-1",children:"..."})]})]}))})]})})}const Rank1="/assets/Rank1-Bcywuq91.png",Rank2="/assets/Rank2-CCOkr3g2.png",Rank3="/assets/Rank3-BDc3e0jP.png",Rank4="/assets/Rank4-CB3BLUCa.png",Rank5="/assets/Rank5-7WXb3Hjh.png",Rank6="/assets/Rank6-Cr9dJ75F.png",RankBar=({rank:t,progress:e=0})=>{const a=[Rank1,Rank2,Rank3,Rank4,Rank5,Rank6];return jsxRuntimeExports.jsx("div",{className:"w-full flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex w-full items-center px-0",children:[jsxRuntimeExports.jsx("img",{src:a[t]||a[5],alt:`Rank ${t}`,className:"w-12 mr-2 object-contain"}),jsxRuntimeExports.jsx("div",{className:"progress-bar",children:jsxRuntimeExports.jsx("div",{className:"progress-fill duration-[1500ms] ",style:{width:`${e}%`}})})]})})};function AnswerNoti({visible:t,onNext:e}){return t?jsxRuntimeExports.jsxs("div",{className:`w-70 h-20 color-bg color-shadow border-2 rounded-out\r
          absolute right-10 bottom-3  p-4 flex items-center justify-between`,children:[jsxRuntimeExports.jsx("p",{children:"You are correct"}),jsxRuntimeExports.jsx("button",{className:"blue-btn",onClick:e,children:"Next Question"})]}):null}const StreakDisplay=({streak:t})=>{const e=reactExports.useMemo(()=>{if(t<=0)return 0;const a=3-Math.min(t/10,2.5);return Math.max(a,.5)},[t]);return jsxRuntimeExports.jsxs("div",{className:`flex flex-col items-center gap-0.5 px-5 py-1 rounded-full \r
                 font-semibold ml-2 color-bg-grey-5 select-none`,children:[jsxRuntimeExports.jsx("div",{className:"relative flex items-center justify-center",style:{animation:t>0?`wiggle ${e}s ease-in-out infinite`:"none"},children:jsxRuntimeExports.jsx(LuFlame,{className:"color-txt-main transition-transform duration-200",size:28})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row gap-1",children:[jsxRuntimeExports.jsx("span",{className:"color-txt-accent txt-bold",children:"Streak:"}),jsxRuntimeExports.jsx("span",{className:"color-txt-accent txt-bold",children:t})]})]})},LayoutGroupContext=reactExports.createContext({});function useConstant(t){const e=reactExports.useRef(null);return e.current===null&&(e.current=t()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(t,e){t.indexOf(e)===-1&&t.push(e)}function removeItem(t,e){const a=t.indexOf(e);a>-1&&t.splice(a,1)}const clamp$1=(t,e,a)=>a>e?e:a<t?t:a;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function isObject(t){return typeof t=="object"&&t!==null}const isZeroValueString=t=>/^0[^.\s]+$/u.test(t);function memo(t){let e;return()=>(e===void 0&&(e=t()),e)}const noop=t=>t,combineFunctions=(t,e)=>a=>e(t(a)),pipe=(...t)=>t.reduce(combineFunctions),progress=(t,e,a)=>{const s=e-t;return s===0?1:(a-t)/s};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,a,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,a,s);else for(let l=0;l<o;l++){const u=this.subscriptions[l];u&&u(e,a,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=t=>t*1e3,millisecondsToSeconds=t=>t/1e3;function velocityPerSecond(t,e){return e?t*(1e3/e):0}const calcBezier=(t,e,a)=>(((1-3*a+3*e)*t+(3*a-6*e))*t+3*e)*t,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(t,e,a,s,o){let l,u,c=0;do u=e+(a-e)/2,l=calcBezier(u,s,o)-t,l>0?a=u:e=u;while(Math.abs(l)>subdivisionPrecision&&++c<subdivisionMaxIterations);return u}function cubicBezier(t,e,a,s){if(t===e&&a===s)return noop;const o=l=>binarySubdivide(l,0,1,t,a);return l=>l===0||l===1?l:calcBezier(o(l),e,s)}const mirrorEasing=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,reverseEasing=t=>e=>1-t(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=t=>(t*=2)<1?.5*backIn(t):.5*(2-Math.pow(2,-10*(t-1))),circIn=t=>1-Math.sin(Math.acos(t)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=t=>Array.isArray(t)&&typeof t[0]!="number",isBezierDefinition=t=>Array.isArray(t)&&typeof t[0]=="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=t=>typeof t=="string",easingDefinitionToFunction=t=>{if(isBezierDefinition(t)){invariant(t.length===4);const[e,a,s,o]=t;return cubicBezier(e,a,s,o)}else if(isValidEasing(t))return easingLookup[t];return t},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(t,e){let a=new Set,s=new Set,o=!1,l=!1;const u=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(g){u.has(g)&&(m.schedule(g),t()),g(c)}const m={schedule:(g,A=!1,P=!1)=>{const me=P&&o?a:s;return A&&u.add(g),me.has(g)||me.add(g),g},cancel:g=>{s.delete(g),u.delete(g)},process:g=>{if(c=g,o){l=!0;return}o=!0,[a,s]=[s,a],a.forEach(d),a.clear(),o=!1,l&&(l=!1,m.process(g))}};return m}const maxElapsed=40;function createRenderBatcher(t,e){let a=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>a=!0,u=stepsOrder.reduce((qe,Rs)=>(qe[Rs]=createRenderStep(l),qe),{}),{setup:c,read:d,resolveKeyframes:m,preUpdate:g,update:A,preRender:P,render:W,postRender:me}=u,ve=()=>{const qe=MotionGlobalConfig.useManualTiming?o.timestamp:performance.now();a=!1,MotionGlobalConfig.useManualTiming||(o.delta=s?1e3/60:Math.max(Math.min(qe-o.timestamp,maxElapsed),1)),o.timestamp=qe,o.isProcessing=!0,c.process(o),d.process(o),m.process(o),g.process(o),A.process(o),P.process(o),W.process(o),me.process(o),o.isProcessing=!1,a&&e&&(s=!1,t(ve))},He=()=>{a=!0,s=!0,o.isProcessing||t(ve)};return{schedule:stepsOrder.reduce((qe,Rs)=>{const Vc=u[Rs];return qe[Rs]=(So,Do=!1,eh=!1)=>(a||He(),Vc.schedule(So,Do,eh)),qe},{}),cancel:qe=>{for(let Rs=0;Rs<stepsOrder.length;Rs++)u[stepsOrder[Rs]].cancel(qe)},state:o,steps:u}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:t=>{now=t,queueMicrotask(clearTime)}},checkStringStartsWith=t=>e=>typeof e=="string"&&e.startsWith(t),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=t=>startsAsVariableToken(t)?singleCssVariableRegex.test(t.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},alpha={...number,transform:t=>clamp$1(0,1,t)},scale={...number,default:1},sanitize=t=>Math.round(t*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(t){return t==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(t,e)=>a=>!!(typeof a=="string"&&singleColorRegex.test(a)&&a.startsWith(t)||e&&!isNullish(a)&&Object.prototype.hasOwnProperty.call(a,e)),splitColor=(t,e,a)=>s=>{if(typeof s!="string")return s;const[o,l,u,c]=s.match(floatRegex);return{[t]:parseFloat(o),[e]:parseFloat(l),[a]:parseFloat(u),alpha:c!==void 0?parseFloat(c):1}},clampRgbUnit=t=>clamp$1(0,255,t),rgbUnit={...number,transform:t=>Math.round(clampRgbUnit(t))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:t,green:e,blue:a,alpha:s=1})=>"rgba("+rgbUnit.transform(t)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(a)+", "+sanitize(alpha.transform(s))+")"};function parseHex(t){let e="",a="",s="",o="";return t.length>5?(e=t.substring(1,3),a=t.substring(3,5),s=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),a=t.substring(2,3),s=t.substring(3,4),o=t.substring(4,5),e+=e,a+=a,s+=s,o+=o),{red:parseInt(e,16),green:parseInt(a,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:t=>percent.parse(t)/100,transform:t=>percent.transform(t*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:a,alpha:s=1})=>"hsla("+Math.round(t)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(a))+", "+sanitize(alpha.transform(s))+")"},color={test:t=>rgba.test(t)||hex.test(t)||hsla.test(t),parse:t=>rgba.test(t)?rgba.parse(t):hsla.test(t)?hsla.parse(t):hex.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rgba.transform(t):hsla.transform(t),getAnimatableNone:t=>{const e=color.parse(t);return e.alpha=0,color.transform(e)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(t){return isNaN(t)&&typeof t=="string"&&(t.match(floatRegex)?.length||0)+(t.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(t){const e=t.toString(),a=[],s={color:[],number:[],var:[]},o=[];let l=0;const c=e.replace(complexRegex,d=>(color.test(d)?(s.color.push(l),o.push(COLOR_TOKEN),a.push(color.parse(d))):d.startsWith(VAR_FUNCTION_TOKEN)?(s.var.push(l),o.push(VAR_TOKEN),a.push(d)):(s.number.push(l),o.push(NUMBER_TOKEN),a.push(parseFloat(d))),++l,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:a,split:c,indexes:s,types:o}}function parseComplexValue(t){return analyseComplexValue(t).values}function createTransformer(t){const{split:e,types:a}=analyseComplexValue(t),s=e.length;return o=>{let l="";for(let u=0;u<s;u++)if(l+=e[u],o[u]!==void 0){const c=a[u];c===NUMBER_TOKEN?l+=sanitize(o[u]):c===COLOR_TOKEN?l+=color.transform(o[u]):l+=o[u]}return l}}const convertNumbersToZero=t=>typeof t=="number"?0:color.test(t)?color.getAnimatableNone(t):t;function getAnimatableNone$1(t){const e=parseComplexValue(t);return createTransformer(t)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(t,e,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(e-t)*6*a:a<1/2?e:a<2/3?t+(e-t)*(2/3-a)*6:t}function hslaToRgba({hue:t,saturation:e,lightness:a,alpha:s}){t/=360,e/=100,a/=100;let o=0,l=0,u=0;if(!e)o=l=u=a;else{const c=a<.5?a*(1+e):a+e-a*e,d=2*a-c;o=hueToRgb(d,c,t+1/3),l=hueToRgb(d,c,t),u=hueToRgb(d,c,t-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:s}}function mixImmediate(t,e){return a=>a>0?e:t}const mixNumber$1=(t,e,a)=>t+(e-t)*a,mixLinearColor=(t,e,a)=>{const s=t*t,o=a*(e*e-s)+s;return o<0?0:Math.sqrt(o)},colorTypes=[hex,rgba,hsla],getColorType=t=>colorTypes.find(e=>e.test(t));function asRGBA(t){const e=getColorType(t);if(!e)return!1;let a=e.parse(t);return e===hsla&&(a=hslaToRgba(a)),a}const mixColor=(t,e)=>{const a=asRGBA(t),s=asRGBA(e);if(!a||!s)return mixImmediate(t,e);const o={...a};return l=>(o.red=mixLinearColor(a.red,s.red,l),o.green=mixLinearColor(a.green,s.green,l),o.blue=mixLinearColor(a.blue,s.blue,l),o.alpha=mixNumber$1(a.alpha,s.alpha,l),rgba.transform(o))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(t,e){return invisibleValues.has(t)?a=>a<=0?t:e:a=>a>=1?e:t}function mixNumber(t,e){return a=>mixNumber$1(t,e,a)}function getMixer(t){return typeof t=="number"?mixNumber:typeof t=="string"?isCSSVariableToken(t)?mixImmediate:color.test(t)?mixColor:mixComplex:Array.isArray(t)?mixArray:typeof t=="object"?color.test(t)?mixColor:mixObject:mixImmediate}function mixArray(t,e){const a=[...t],s=a.length,o=t.map((l,u)=>getMixer(l)(l,e[u]));return l=>{for(let u=0;u<s;u++)a[u]=o[u](l);return a}}function mixObject(t,e){const a={...t,...e},s={};for(const o in a)t[o]!==void 0&&e[o]!==void 0&&(s[o]=getMixer(t[o])(t[o],e[o]));return o=>{for(const l in s)a[l]=s[l](o);return a}}function matchOrder(t,e){const a=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],u=t.indexes[l][s[l]],c=t.values[u]??0;a[o]=c,s[l]++}return a}const mixComplex=(t,e)=>{const a=complex.createTransformer(e),s=analyseComplexValue(t),o=analyseComplexValue(e);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?invisibleValues.has(t)&&!o.values.length||invisibleValues.has(e)&&!s.values.length?mixVisibility(t,e):pipe(mixArray(matchOrder(s,o),o.values),a):mixImmediate(t,e)};function mix(t,e,a){return typeof t=="number"&&typeof e=="number"&&typeof a=="number"?mixNumber$1(t,e,a):getMixer(t)(t,e)}const frameloopDriver=t=>{const e=({timestamp:a})=>t(a);return{start:(a=!0)=>frame.update(e,a),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(t,e,a=10)=>{let s="";const o=Math.max(Math.round(e/a),2);for(let l=0;l<o;l++)s+=Math.round(t(l/(o-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(t){let e=0;const a=50;let s=t.next(e);for(;!s.done&&e<maxGeneratorDuration;)e+=a,s=t.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(t,e=100,a){const s=a({...t,keyframes:[0,e]}),o=Math.min(calcGeneratorDuration(s),maxGeneratorDuration);return{type:"keyframes",ease:l=>s.next(o*l).value/e,duration:millisecondsToSeconds(o)}}const velocitySampleDuration=5;function calcGeneratorVelocity(t,e,a){const s=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(a-t(s),e-s)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:t=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:a=springDefaults.velocity,mass:s=springDefaults.mass}){let o,l,u=1-e;u=clamp$1(springDefaults.minDamping,springDefaults.maxDamping,u),t=clamp$1(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(t)),u<1?(o=m=>{const g=m*u,A=g*t,P=g-a,W=calcAngularFreq(m,u),me=Math.exp(-A);return safeMin-P/W*me},l=m=>{const A=m*u*t,P=A*a+a,W=Math.pow(u,2)*Math.pow(m,2)*t,me=Math.exp(-A),ve=calcAngularFreq(Math.pow(m,2),u);return(-o(m)+safeMin>0?-1:1)*((P-W)*me)/ve}):(o=m=>{const g=Math.exp(-m*t),A=(m-a)*t+1;return-safeMin+g*A},l=m=>{const g=Math.exp(-m*t),A=(a-m)*(t*t);return g*A});const c=5/t,d=approximateRoot(o,l,c);if(t=secondsToMilliseconds(t),isNaN(d))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:t};{const m=Math.pow(d,2)*s;return{stiffness:m,damping:u*2*Math.sqrt(s*m),duration:t}}}const rootIterations=12;function approximateRoot(t,e,a){let s=a;for(let o=1;o<rootIterations;o++)s=s-t(s)/e(s);return s}function calcAngularFreq(t,e){return t*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(t,e){return e.some(a=>t[a]!==void 0)}function getSpringOptions(t){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...t};if(!isSpringType(t,physicsKeys)&&isSpringType(t,durationKeys))if(t.visualDuration){const a=t.visualDuration,s=2*Math.PI/(a*1.2),o=s*s,l=2*clamp$1(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:springDefaults.mass,stiffness:o,damping:l}}else{const a=findSpring(t);e={...e,...a,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(t=springDefaults.visualDuration,e=springDefaults.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:o}=a;const l=a.keyframes[0],u=a.keyframes[a.keyframes.length-1],c={done:!1,value:l},{stiffness:d,damping:m,mass:g,duration:A,velocity:P,isResolvedFromDuration:W}=getSpringOptions({...a,velocity:-millisecondsToSeconds(a.velocity||0)}),me=P||0,ve=m/(2*Math.sqrt(d*g)),He=u-l,De=millisecondsToSeconds(Math.sqrt(d/g)),Xe=Math.abs(He)<5;s||(s=Xe?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),o||(o=Xe?springDefaults.restDelta.granular:springDefaults.restDelta.default);let qe;if(ve<1){const Vc=calcAngularFreq(De,ve);qe=So=>{const Do=Math.exp(-ve*De*So);return u-Do*((me+ve*De*He)/Vc*Math.sin(Vc*So)+He*Math.cos(Vc*So))}}else if(ve===1)qe=Vc=>u-Math.exp(-De*Vc)*(He+(me+De*He)*Vc);else{const Vc=De*Math.sqrt(ve*ve-1);qe=So=>{const Do=Math.exp(-ve*De*So),eh=Math.min(Vc*So,300);return u-Do*((me+ve*De*He)*Math.sinh(eh)+Vc*He*Math.cosh(eh))/Vc}}const Rs={calculatedDuration:W&&A||null,next:Vc=>{const So=qe(Vc);if(W)c.done=Vc>=A;else{let Do=Vc===0?me:0;ve<1&&(Do=Vc===0?secondsToMilliseconds(me):calcGeneratorVelocity(qe,Vc,So));const eh=Math.abs(Do)<=s,Ko=Math.abs(u-So)<=o;c.done=eh&&Ko}return c.value=c.done?u:So,c},toString:()=>{const Vc=Math.min(calcGeneratorDuration(Rs),maxGeneratorDuration),So=generateLinearEasing(Do=>Rs.next(Vc*Do).value,Vc,30);return Vc+"ms "+So},toTransition:()=>{}};return Rs}spring.applyToOptions=t=>{const e=createGeneratorEasing(t,100,spring);return t.ease=e.ease,t.duration=secondsToMilliseconds(e.duration),t.type="keyframes",t};function inertia({keyframes:t,velocity:e=0,power:a=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:u,min:c,max:d,restDelta:m=.5,restSpeed:g}){const A=t[0],P={done:!1,value:A},W=eh=>c!==void 0&&eh<c||d!==void 0&&eh>d,me=eh=>c===void 0?d:d===void 0||Math.abs(c-eh)<Math.abs(d-eh)?c:d;let ve=a*e;const He=A+ve,De=u===void 0?He:u(He);De!==He&&(ve=De-A);const Xe=eh=>-ve*Math.exp(-eh/s),qe=eh=>De+Xe(eh),Rs=eh=>{const Ko=Xe(eh),Ge=qe(eh);P.done=Math.abs(Ko)<=m,P.value=P.done?De:Ge};let Vc,So;const Do=eh=>{W(P.value)&&(Vc=eh,So=spring({keyframes:[P.value,me(P.value)],velocity:calcGeneratorVelocity(qe,eh,P.value),damping:o,stiffness:l,restDelta:m,restSpeed:g}))};return Do(0),{calculatedDuration:null,next:eh=>{let Ko=!1;return!So&&Vc===void 0&&(Ko=!0,Rs(eh),Do(eh)),Vc!==void 0&&eh>=Vc?So.next(eh-Vc):(!Ko&&Rs(eh),P)}}}function createMixers(t,e,a){const s=[],o=a||MotionGlobalConfig.mix||mix,l=t.length-1;for(let u=0;u<l;u++){let c=o(t[u],t[u+1]);if(e){const d=Array.isArray(e)?e[u]||noop:e;c=pipe(d,c)}s.push(c)}return s}function interpolate(t,e,{clamp:a=!0,ease:s,mixer:o}={}){const l=t.length;if(invariant(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=createMixers(e,s,o),d=c.length,m=g=>{if(u&&g<t[0])return e[0];let A=0;if(d>1)for(;A<t.length-2&&!(g<t[A+1]);A++);const P=progress(t[A],t[A+1],g);return c[A](P)};return a?g=>m(clamp$1(t[0],t[l-1],g)):m}function fillOffset(t,e){const a=t[t.length-1];for(let s=1;s<=e;s++){const o=progress(0,e,s);t.push(mixNumber$1(a,1,o))}}function defaultOffset(t){const e=[0];return fillOffset(e,t.length-1),e}function convertOffsetToTimes(t,e){return t.map(a=>a*e)}function defaultEasing(t,e){return t.map(()=>e||easeInOut).splice(0,t.length-1)}function keyframes({duration:t=300,keyframes:e,times:a,ease:s="easeInOut"}){const o=isEasingArray(s)?s.map(easingDefinitionToFunction):easingDefinitionToFunction(s),l={done:!1,value:e[0]},u=convertOffsetToTimes(a&&a.length===e.length?a:defaultOffset(e),t),c=interpolate(u,e,{ease:Array.isArray(o)?o:defaultEasing(e,o)});return{calculatedDuration:t,next:d=>(l.value=c(d),l.done=d>=t,l)}}const isNotNull$1=t=>t!==null;function getFinalKeyframe$1(t,{repeat:e,repeatType:a="loop"},s,o=1){const l=t.filter(isNotNull$1),c=o<0||e&&a!=="loop"&&e%2===1?0:l.length-1;return!c||s===void 0?l[c]:s}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(t){typeof t.type=="string"&&(t.type=transitionTypeMap[t.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,a){return this.finished.then(e,a)}}const percentToProgress=t=>t/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:a}=this.options;a&&a.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:a=keyframes,repeat:s=0,repeatDelay:o=0,repeatType:l,velocity:u=0}=e;let{keyframes:c}=e;const d=a||keyframes;d!==keyframes&&typeof c[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(c[0],c[1])),c=[0,100]);const m=d({...e,keyframes:c});l==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-u})),m.calculatedDuration===null&&(m.calculatedDuration=calcGeneratorDuration(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+o,this.totalDuration=this.resolvedDuration*(s+1)-o,this.generator=m}updateTime(e){const a=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(e,a=!1){const{generator:s,totalDuration:o,mixKeyframes:l,mirroredGenerator:u,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return s.next(0);const{delay:m=0,keyframes:g,repeat:A,repeatType:P,repeatDelay:W,type:me,onUpdate:ve,finalKeyframe:He}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),a?this.currentTime=e:this.updateTime(e);const De=this.currentTime-m*(this.playbackSpeed>=0?1:-1),Xe=this.playbackSpeed>=0?De<0:De>o;this.currentTime=Math.max(De,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let qe=this.currentTime,Rs=s;if(A){const eh=Math.min(this.currentTime,o)/c;let Ko=Math.floor(eh),Ge=eh%1;!Ge&&eh>=1&&(Ge=1),Ge===1&&Ko--,Ko=Math.min(Ko,A+1),!!(Ko%2)&&(P==="reverse"?(Ge=1-Ge,W&&(Ge-=W/c)):P==="mirror"&&(Rs=u)),qe=clamp$1(0,1,Ge)*c}const Vc=Xe?{done:!1,value:g[0]}:Rs.next(qe);l&&(Vc.value=l(Vc.value));let{done:So}=Vc;!Xe&&d!==null&&(So=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const Do=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&So);return Do&&me!==inertia&&(Vc.value=getFinalKeyframe$1(g,this.options,He,this.speed)),ve&&ve(Vc.value),Do&&this.finish(),Vc}then(e,a){return this.finished.then(e,a)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const a=this.playbackSpeed!==e;this.playbackSpeed=e,a&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:a}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=a??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fillWildcards(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const radToDeg=t=>t*180/Math.PI,rotate=t=>{const e=radToDeg(Math.atan2(t[1],t[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate,rotateZ:rotate,skewX:t=>radToDeg(Math.atan(t[1])),skewY:t=>radToDeg(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rebaseAngle=t=>(t=t%360,t<0&&(t+=360),t),rotateZ=rotate,scaleX=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),scaleY=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:t=>(scaleX(t)+scaleY(t))/2,rotateX:t=>rebaseAngle(radToDeg(Math.atan2(t[6],t[5]))),rotateY:t=>rebaseAngle(radToDeg(Math.atan2(-t[2],t[0]))),rotateZ,rotate:rotateZ,skewX:t=>radToDeg(Math.atan(t[4])),skewY:t=>radToDeg(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function defaultTransformValue(t){return t.includes("scale")?1:0}function parseValueFromTransform(t,e){if(!t||t==="none")return defaultTransformValue(e);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,o;if(a)s=matrix3dParsers,o=a;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=matrix2dParsers,o=c}if(!o)return defaultTransformValue(e);const l=s[e],u=o[1].split(",").map(convertTransformToNumber);return typeof l=="function"?l(u):u[l]}const readTransformValue=(t,e)=>{const{transform:a="none"}=getComputedStyle(t);return parseValueFromTransform(a,e)};function convertTransformToNumber(t){return parseFloat(t.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=t=>t===number||t===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(t=>!transformKeys.has(t));function removeNonTranslationalTransform(t){const e=[];return nonTranslationalTransformKeys.forEach(a=>{const s=t.getValue(a);s!==void 0&&(e.push([a,s.get()]),s.set(a.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:t},{paddingLeft:e="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(e)-parseFloat(a),height:({y:t},{paddingTop:e="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(e)-parseFloat(a),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>parseValueFromTransform(e,"x"),y:(t,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const t=Array.from(toResolve).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),a=new Map;e.forEach(s=>{const o=removeNonTranslationalTransform(s);o.length&&(a.set(s,o),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const o=a.get(s);o&&o.forEach(([l,u])=>{s.getValue(l)?.set(u)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(t=>t.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,a,s,o,l,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=a,this.name=s,this.motionValue=o,this.element=l,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:a,element:s,motionValue:o}=this;if(e[0]===null){const l=o?.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&a){const c=s.readValue(a,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),o&&l===void 0&&o.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=t=>t.startsWith("--");function setStyle(t,e,a){isCSSVar(e)?t.style.setProperty(e,a):t.style[e]=a}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(t,e){const a=memo(t);return()=>supportsFlags[e]??a()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([t,e,a,s])=>`cubic-bezier(${t}, ${e}, ${a}, ${s})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(t,e){if(t)return typeof t=="function"?supportsLinearEasing()?generateLinearEasing(t,e):"ease-out":isBezierDefinition(t)?cubicBezierAsString(t):Array.isArray(t)?t.map(a=>mapEasingToNativeEasing(a,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[t]}function startWaapiAnimation(t,e,a,{delay:s=0,duration:o=300,repeat:l=0,repeatType:u="loop",ease:c="easeOut",times:d}={},m=void 0){const g={[e]:a};d&&(g.offset=d);const A=mapEasingToNativeEasing(c,o);Array.isArray(A)&&(g.easing=A);const P={delay:s,duration:o,easing:Array.isArray(A)?"linear":A,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"};return m&&(P.pseudoElement=m),t.animate(g,P)}function isGenerator(t){return typeof t=="function"&&"applyToOptions"in t}function applyGeneratorOptions({type:t,...e}){return isGenerator(t)&&supportsLinearEasing()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:a,name:s,keyframes:o,pseudoElement:l,allowFlatten:u=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!l,this.allowFlatten=u,this.options=e,invariant(typeof e.type!="string");const m=applyGeneratorOptions(e);this.animation=startWaapiAnimation(a,s,o,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=getFinalKeyframe$1(o,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):setStyle(a,s,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:a}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop):a(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(t){return t in unsupportedEasingFunctions}function replaceStringEasing(t){typeof t.ease=="string"&&isUnsupportedEase(t.ease)&&(t.ease=unsupportedEasingFunctions[t.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:a,onUpdate:s,onComplete:o,element:l,...u}=this.options;if(!a)return;if(e!==void 0){a.set(e);return}const c=new JSAnimation({...u,autoplay:!1}),d=secondsToMilliseconds(this.finishedTime??this.time);a.setWithVelocity(c.sample(d-sampleDelta).value,c.sample(d).value,sampleDelta),c.stop()}}const isAnimatable=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(complex.test(t)||t==="0")&&!t.startsWith("url("));function hasKeyframesChanged(t){const e=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==e)return!0}function canAnimate(t,e,a,s){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],u=isAnimatable(o,e),c=isAnimatable(l,e);return!u||!c?!1:hasKeyframesChanged(t)||(a==="spring"||isGenerator(a))&&s}function makeAnimationInstant(t){t.duration=0,t.type}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(t){const{motionValue:e,name:a,repeatDelay:s,repeatType:o,damping:l,type:u}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return supportsWaapi()&&a&&acceleratedValues.has(a)&&(a!=="transform"||!m)&&!d&&!s&&o!=="mirror"&&l!==0&&u!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:a=0,type:s="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:u="loop",keyframes:c,name:d,motionValue:m,element:g,...A}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const P={autoplay:e,delay:a,type:s,repeat:o,repeatDelay:l,repeatType:u,name:d,motionValue:m,element:g,...A},W=g?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new W(c,(me,ve,He)=>this.onKeyframesResolved(me,ve,P,!He),d,m,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,a,s,o){this.keyframeResolver=void 0;const{name:l,type:u,velocity:c,delay:d,isHandoff:m,onUpdate:g}=s;this.resolvedAt=time.now(),canAnimate(e,l,u,c)||((MotionGlobalConfig.instantAnimations||!d)&&g?.(getFinalKeyframe$1(e,s,a)),e[0]=e[e.length-1],makeAnimationInstant(s),s.repeat=0);const P={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...s,keyframes:e},W=!m&&supportsBrowserAnimation(P)?new NativeAnimationExtended({...P,element:P.motionValue.owner.current}):new JSAnimation(P);W.finished.then(()=>this.notifyFinished()).catch(noop),this.pendingTimeline&&(this.stopTimeline=W.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=W}get finished(){return this._animation?this.animation.finished:this._finished}then(e,a){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(t){const e=splitCSSVariableRegex.exec(t);if(!e)return[,];const[,a,s,o]=e;return[`--${a??s}`,o]}function getVariableValue(t,e,a=1){const[s,o]=parseCSSVariable(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const u=l.trim();return isNumericalString(u)?parseFloat(u):u}return isCSSVariableToken(o)?getVariableValue(o,e,a+1):o}function getValueTransition(t,e){return t?.[e]??t?.default??t}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:t=>t==="auto",parse:t=>t},testValueType=t=>e=>e.test(t),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=t=>dimensionValueTypes.find(testValueType(t));function isNone(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||isZeroValueString(t):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(t){const[e,a]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=a.match(floatRegex)||[];if(!s)return t;const o=a.replace(s,"");let l=maxDefaults.has(e)?1:0;return s!==a&&(l*=100),e+"("+l+o+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:t=>{const e=t.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):t}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=t=>defaultValueTypes[t];function getAnimatableNone(t,e){let a=getDefaultValueType(t);return a!==filter&&(a=complex),a.getAnimatableNone?a.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(t,e,a){let s=0,o;for(;s<t.length&&!o;){const l=t[s];typeof l=="string"&&!invalidTemplates.has(l)&&analyseComplexValue(l).values.length&&(o=t[s]),s++}if(o&&a)for(const l of e)t[l]=getAnimatableNone(a,o)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,a,s,o,l){super(e,a,s,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:a,name:s}=this;if(!a||!a.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let m=e[d];if(typeof m=="string"&&(m=m.trim(),isCSSVariableToken(m))){const g=getVariableValue(m,a.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(s)||e.length!==2)return;const[o,l]=e,u=findDimensionValueType(o),c=findDimensionValueType(l);if(u!==c)if(isNumOrPxType(u)&&isNumOrPxType(c))for(let d=0;d<e.length;d++){const m=e[d];typeof m=="string"&&(e[d]=parseFloat(m))}else positionalValues[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:a}=this,s=[];for(let o=0;o<e.length;o++)(e[o]===null||isNone(e[o]))&&s.push(o);s.length&&makeNoneKeyframesAnimatable(e,s,a)}measureInitialState(){const{element:e,unresolvedKeyframes:a,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[s](e.measureViewportBox(),window.getComputedStyle(e.current)),a[0]=this.measuredOrigin;const o=a[a.length-1];o!==void 0&&e.getValue(s,o).jump(o,!1)}measureEndState(){const{element:e,name:a,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const o=e.getValue(a);o&&o.jump(this.measuredOrigin,!1);const l=s.length-1,u=s[l];s[l]=positionalValues[a](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function resolveElements(t,e,a){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const o=a?.[t]??s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const getValueAsType=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function isHTMLElement(t){return isObject(t)&&"offsetHeight"in t}const MAX_VELOCITY_DELTA=30,isFloat=t=>!isNaN(parseFloat(t));class MotionValue{constructor(e,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const o=time.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=a.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,a){this.events[e]||(this.events[e]=new SubscriptionManager);const s=this.events[e].add(a);return e==="change"?()=>{s(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,a){this.passiveEffect=e,this.stopPassiveEffect=a}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,a,s){this.set(a),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,a=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(e){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=e(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(t,e){return new MotionValue(t,e)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(t){return t==="x"||t==="y"?isDragging[t]?null:(isDragging[t]=!0,()=>{isDragging[t]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(t,e){const a=resolveElements(t),s=new AbortController,o={passive:!0,...e,signal:s.signal};return[a,o,()=>s.abort()]}function isValidHover(t){return!(t.pointerType==="touch"||isDragActive())}function hover(t,e,a={}){const[s,o,l]=setupGesture(t,a),u=c=>{if(!isValidHover(c))return;const{target:d}=c,m=e(d,c);if(typeof m!="function"||!d)return;const g=A=>{isValidHover(A)&&(m(A),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,o)};return s.forEach(c=>{c.addEventListener("pointerenter",u,o)}),l}const isNodeOrChild=(t,e)=>e?t===e?!0:isNodeOrChild(t,e.parentElement):!1,isPrimaryPointer=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(t){return focusableElements.has(t.tagName)||t.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(t){return e=>{e.key==="Enter"&&t(e)}}function firePointerEvent(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(t,e)=>{const a=t.currentTarget;if(!a)return;const s=filterEvents(()=>{if(isPressing.has(a))return;firePointerEvent(a,"down");const o=filterEvents(()=>{firePointerEvent(a,"up")}),l=()=>firePointerEvent(a,"cancel");a.addEventListener("keyup",o,e),a.addEventListener("blur",l,e)});a.addEventListener("keydown",s,e),a.addEventListener("blur",()=>a.removeEventListener("keydown",s),e)};function isValidPressEvent(t){return isPrimaryPointer(t)&&!isDragActive()}function press(t,e,a={}){const[s,o,l]=setupGesture(t,a),u=c=>{const d=c.currentTarget;if(!isValidPressEvent(c))return;isPressing.add(d);const m=e(d,c),g=(W,me)=>{window.removeEventListener("pointerup",A),window.removeEventListener("pointercancel",P),isPressing.has(d)&&isPressing.delete(d),isValidPressEvent(W)&&typeof m=="function"&&m(W,{success:me})},A=W=>{g(W,d===window||d===document||a.useGlobalTarget||isNodeOrChild(d,W.target))},P=W=>{g(W,!1)};window.addEventListener("pointerup",A,o),window.addEventListener("pointercancel",P,o)};return s.forEach(c=>{(a.useGlobalTarget?window:c).addEventListener("pointerdown",u,o),isHTMLElement(c)&&(c.addEventListener("focus",m=>enableKeyboardPress(m,o)),!isElementKeyboardAccessible(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),l}function isSVGElement(t){return isObject(t)&&"ownerSVGElement"in t}function isSVGSVGElement(t){return isSVGElement(t)&&t.tagName==="svg"}const isMotionValue=t=>!!(t&&t.getVelocity),valueTypes=[...dimensionValueTypes,color,complex],findValueType=t=>valueTypes.find(testValueType(t)),MotionConfigContext=reactExports.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function usePresence(t=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:a,onExitComplete:s,register:o}=e,l=reactExports.useId();reactExports.useEffect(()=>{if(t)return o(l)},[t]);const u=reactExports.useCallback(()=>t&&s&&s(l),[l,s,t]);return!a&&s?[!1,u]:[!0]}const LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const t in featureProps)featureDefinitions[t]={isEnabled:e=>featureProps[t].some(a=>!!e[a])};function loadFeatures(t){for(const e in t)featureDefinitions[e]={...featureDefinitions[e],...t[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||validMotionProps.has(t)}let shouldForward=t=>!isValidMotionProp(t);function loadExternalIsValidProp(t){typeof t=="function"&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):t(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(t,e,a){const s={};for(const o in t)o==="values"&&typeof t.values=="object"||(shouldForward(o)||a===!0&&isValidMotionProp(o)||!e&&!isValidMotionProp(o)||t.draggable&&o.startsWith("onDrag"))&&(s[o]=t[o]);return s}const MotionContext=reactExports.createContext({});function isAnimationControls(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function isVariantLabel(t){return typeof t=="string"||Array.isArray(t)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(t){return isAnimationControls(t.animate)||variantProps.some(e=>isVariantLabel(t[e]))}function isVariantNode(t){return!!(isControllingVariants(t)||t.variants)}function getCurrentTreeVariants(t,e){if(isControllingVariants(t)){const{initial:a,animate:s}=t;return{initial:a===!1||isVariantLabel(a)?a:void 0,animate:isVariantLabel(s)?s:void 0}}return t.inherit!==!1?e:{}}function useCreateMotionContext(t){const{initial:e,animate:a}=getCurrentTreeVariants(t,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:a}),[variantLabelsAsDependency(e),variantLabelsAsDependency(a)])}function variantLabelsAsDependency(t){return Array.isArray(t)?t.join(" "):t}const scaleCorrectors={};function addScaleCorrector(t){for(const e in t)scaleCorrectors[e]=t[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(t,{layout:e,layoutId:a}){return transformProps.has(t)||t.startsWith("origin")||(e||a!==void 0)&&(!!scaleCorrectors[t]||t==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(t,e,a){let s="",o=!0;for(let l=0;l<numTransforms;l++){const u=transformPropOrder[l],c=t[u];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(u.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||a){const m=getValueAsType(c,numberValueTypes[u]);if(!d){o=!1;const g=translateAlias[u]||u;s+=`${g}(${m}) `}a&&(e[u]=m)}}return s=s.trim(),a?s=a(e,o?"":s):o&&(s="none"),s}function buildHTMLStyles(t,e,a){const{style:s,vars:o,transformOrigin:l}=t;let u=!1,c=!1;for(const d in e){const m=e[d];if(transformProps.has(d)){u=!0;continue}else if(isCSSVariableName(d)){o[d]=m;continue}else{const g=getValueAsType(m,numberValueTypes[d]);d.startsWith("origin")?(c=!0,l[d]=g):s[d]=g}}if(e.transform||(u||a?s.transform=buildTransform(e,t.transform,a):s.transform&&(s.transform="none")),c){const{originX:d="50%",originY:m="50%",originZ:g=0}=l;s.transformOrigin=`${d} ${m} ${g}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(t,e,a){for(const s in e)!isMotionValue(e[s])&&!isForcedMotionValue(s,a)&&(t[s]=e[s])}function useInitialMotionValues({transformTemplate:t},e){return reactExports.useMemo(()=>{const a=createHtmlRenderState();return buildHTMLStyles(a,e,t),Object.assign({},a.vars,a.style)},[e])}function useStyle(t,e){const a=t.style||{},s={};return copyRawValuesOnly(s,a,t),Object.assign(s,useInitialMotionValues(t,e)),s}function useHTMLProps(t,e){const a={},s=useStyle(t,e);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=s,a}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(t,e,a=1,s=0,o=!0){t.pathLength=1;const l=o?dashKeys:camelKeys;t[l.offset]=px.transform(-s);const u=px.transform(e),c=px.transform(a);t[l.array]=`${u} ${c}`}function buildSVGAttrs(t,{attrX:e,attrY:a,attrScale:s,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...c},d,m,g){if(buildHTMLStyles(t,c,m),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:A,style:P}=t;A.transform&&(P.transform=A.transform,delete A.transform),(P.transform||A.transformOrigin)&&(P.transformOrigin=A.transformOrigin??"50% 50%",delete A.transformOrigin),P.transform&&(P.transformBox=g?.transformBox??"fill-box",delete A.transformBox),e!==void 0&&(A.x=e),a!==void 0&&(A.y=a),s!==void 0&&(A.scale=s),o!==void 0&&buildSVGPath(A,o,l,u,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=t=>typeof t=="string"&&t.toLowerCase()==="svg";function useSVGProps(t,e,a,s){const o=reactExports.useMemo(()=>{const l=createSvgRenderState();return buildSVGAttrs(l,e,isSVGTag(s),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};copyRawValuesOnly(l,t.style,t),o.style={...l,...o.style}}return o}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(t){return typeof t!="string"||t.includes("-")?!1:!!(lowercaseSVGElements.indexOf(t)>-1||/[A-Z]/u.test(t))}function useRender(t,e,a,{latestValues:s},o,l=!1){const c=(isSVGComponent(t)?useSVGProps:useHTMLProps)(e,s,o,t),d=filterProps(e,typeof t=="string",l),m=t!==reactExports.Fragment?{...d,...c,ref:a}:{},{children:g}=e,A=reactExports.useMemo(()=>isMotionValue(g)?g.get():g,[g]);return reactExports.createElement(t,{...m,children:A})}function getValueState(t){const e=[{},{}];return t?.values.forEach((a,s)=>{e[0][s]=a.get(),e[1][s]=a.getVelocity()}),e}function resolveVariantFromProps(t,e,a,s){if(typeof e=="function"){const[o,l]=getValueState(s);e=e(a!==void 0?a:t.custom,o,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,l]=getValueState(s);e=e(a!==void 0?a:t.custom,o,l)}return e}function resolveMotionValue(t){return isMotionValue(t)?t.get():t}function makeState({scrapeMotionValuesFromProps:t,createRenderState:e},a,s,o){return{latestValues:makeLatestValues(a,s,o,t),renderState:e()}}function makeLatestValues(t,e,a,s){const o={},l=s(t,{});for(const P in l)o[P]=resolveMotionValue(l[P]);let{initial:u,animate:c}=t;const d=isControllingVariants(t),m=isVariantNode(t);e&&m&&!d&&t.inherit!==!1&&(u===void 0&&(u=e.initial),c===void 0&&(c=e.animate));let g=a?a.initial===!1:!1;g=g||u===!1;const A=g?c:u;if(A&&typeof A!="boolean"&&!isAnimationControls(A)){const P=Array.isArray(A)?A:[A];for(let W=0;W<P.length;W++){const me=resolveVariantFromProps(t,P[W]);if(me){const{transitionEnd:ve,transition:He,...De}=me;for(const Xe in De){let qe=De[Xe];if(Array.isArray(qe)){const Rs=g?qe.length-1:0;qe=qe[Rs]}qe!==null&&(o[Xe]=qe)}for(const Xe in ve)o[Xe]=ve[Xe]}}}return o}const makeUseVisualState=t=>(e,a)=>{const s=reactExports.useContext(MotionContext),o=reactExports.useContext(PresenceContext),l=()=>makeState(t,e,s,o);return a?l():useConstant(l)};function scrapeMotionValuesFromProps$1(t,e,a){const{style:s}=t,o={};for(const l in s)(isMotionValue(s[l])||e.style&&isMotionValue(e.style[l])||isForcedMotionValue(l,t)||a?.getValue(l)?.liveStyle!==void 0)&&(o[l]=s[l]);return o}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(t,e,a){const s=scrapeMotionValuesFromProps$1(t,e,a);for(const o in t)if(isMotionValue(t[o])||isMotionValue(e[o])){const l=transformPropOrder.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[l]=t[o]}return s}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function useMotionRef(t,e,a){return reactExports.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),a&&(typeof a=="function"?a(s):isRefObject(a)&&(a.current=s))},[e])}const camelToDash=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(t,e,a,s,o){const{visualElement:l}=reactExports.useContext(MotionContext),u=reactExports.useContext(LazyContext),c=reactExports.useContext(PresenceContext),d=reactExports.useContext(MotionConfigContext).reducedMotion,m=reactExports.useRef(null);s=s||u.renderer,!m.current&&s&&(m.current=s(t,{visualState:e,parent:l,props:a,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const g=m.current,A=reactExports.useContext(SwitchLayoutGroupContext);g&&!g.projection&&o&&(g.type==="html"||g.type==="svg")&&createProjectionNode$1(m.current,a,o,A);const P=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{g&&P.current&&g.update(a,c)});const W=a[optimizedAppearDataAttribute],me=reactExports.useRef(!!W&&!window.MotionHandoffIsComplete?.(W)&&window.MotionHasOptimisedAnimation?.(W));return useIsomorphicLayoutEffect(()=>{g&&(P.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),me.current&&g.animationState&&g.animationState.animateChanges())}),reactExports.useEffect(()=>{g&&(!me.current&&g.animationState&&g.animationState.animateChanges(),me.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(W)}),me.current=!1),g.enteringChildren=void 0)}),g}function createProjectionNode$1(t,e,a,s){const{layoutId:o,layout:l,drag:u,dragConstraints:c,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;t.projection=new a(t.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(t.parent)),t.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!u||c&&isRefObject(c),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:g,layoutScroll:d,layoutRoot:m})}function getClosestProjectingNode(t){if(t)return t.options.allowProjection!==!1?t.projection:getClosestProjectingNode(t.parent)}function createMotionComponent(t,{forwardMotionProps:e=!1}={},a,s){a&&loadFeatures(a);const o=isSVGComponent(t)?useSVGVisualState:useHTMLVisualState;function l(c,d){let m;const g={...reactExports.useContext(MotionConfigContext),...c,layoutId:useLayoutId(c)},{isStatic:A}=g,P=useCreateMotionContext(c),W=o(c,A);if(!A&&isBrowser){useStrictMode();const me=getProjectionFunctionality(g);m=me.MeasureLayout,P.visualElement=useVisualElement(t,W,g,s,me.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:P,children:[m&&P.visualElement?jsxRuntimeExports.jsx(m,{visualElement:P.visualElement,...g}):null,useRender(t,c,useMotionRef(W,P.visualElement,d),W,A,e)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=reactExports.forwardRef(l);return u[motionComponentSymbol]=t,u}function useLayoutId({layoutId:t}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&t!==void 0?e+"-"+t:t}function useStrictMode(t,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(t){const{drag:e,layout:a}=featureDefinitions;if(!e&&!a)return{};const s={...e,...a};return{MeasureLayout:e?.isEnabled(t)||a?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function createMotionProxy(t,e){if(typeof Proxy>"u")return createMotionComponent;const a=new Map,s=(l,u)=>createMotionComponent(l,u,t,e),o=(l,u)=>s(l,u);return new Proxy(o,{get:(l,u)=>u==="create"?s:(a.has(u)||a.set(u,createMotionComponent(u,void 0,t,e)),a.get(u))})}function convertBoundingBoxToBox({top:t,left:e,right:a,bottom:s}){return{x:{min:e,max:a},y:{min:t,max:s}}}function convertBoxToBoundingBox({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function transformBoxPoints(t,e){if(!e)return t;const a=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:s.y,right:s.x}}function isIdentityScale(t){return t===void 0||t===1}function hasScale({scale:t,scaleX:e,scaleY:a}){return!isIdentityScale(t)||!isIdentityScale(e)||!isIdentityScale(a)}function hasTransform(t){return hasScale(t)||has2DTranslate(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function has2DTranslate(t){return is2DTranslate(t.x)||is2DTranslate(t.y)}function is2DTranslate(t){return t&&t!=="0%"}function scalePoint(t,e,a){const s=t-a,o=e*s;return a+o}function applyPointDelta(t,e,a,s,o){return o!==void 0&&(t=scalePoint(t,o,s)),scalePoint(t,a,s)+e}function applyAxisDelta(t,e=0,a=1,s,o){t.min=applyPointDelta(t.min,e,a,s,o),t.max=applyPointDelta(t.max,e,a,s,o)}function applyBoxDelta(t,{x:e,y:a}){applyAxisDelta(t.x,e.translate,e.scale,e.originPoint),applyAxisDelta(t.y,a.translate,a.scale,a.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(t,e,a,s=!1){const o=a.length;if(!o)return;e.x=e.y=1;let l,u;for(let c=0;c<o;c++){l=a[c],u=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&transformBox(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,applyBoxDelta(t,u)),s&&hasTransform(l.latestValues)&&transformBox(t,l.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(t,e){t.min=t.min+e,t.max=t.max+e}function transformAxis(t,e,a,s,o=.5){const l=mixNumber$1(t.min,t.max,o);applyAxisDelta(t,e,a,l,s)}function transformBox(t,e){transformAxis(t.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(t.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(t,e){return convertBoundingBoxToBox(transformBoxPoints(t.getBoundingClientRect(),e))}function measurePageBox(t,e,a){const s=measureViewportBox(t,a),{scroll:o}=e;return o&&(translateAxis(s.x,o.offset.x),translateAxis(s.y,o.offset.y)),s}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=t.matches;t.addEventListener("change",e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(t,e,a){for(const s in e){const o=e[s],l=a[s];if(isMotionValue(o))t.addValue(s,o);else if(isMotionValue(l))t.addValue(s,motionValue(o,{owner:t}));else if(l!==o)if(t.hasValue(s)){const u=t.getValue(s);u.liveStyle===!0?u.jump(o):u.hasAnimated||u.set(o)}else{const u=t.getStaticValue(s);t.addValue(s,motionValue(u!==void 0?u:o,{owner:t}))}}for(const s in a)e[s]===void 0&&t.removeValue(s);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,a,s){return{}}constructor({parent:e,props:a,presenceContext:s,reducedMotionConfig:o,blockInitialAnimation:l,visualState:u},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const P=time.now();this.renderScheduledAt<P&&(this.renderScheduledAt=P,frame.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=u;this.latestValues=d,this.baseTarget={...d},this.initialValues=a.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=a,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=c,this.blockInitialAnimation=!!l,this.isControllingVariants=isControllingVariants(a),this.isVariantNode=isVariantNode(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...A}=this.scrapeMotionValuesFromProps(a,{},this);for(const P in A){const W=A[P];d[P]!==void 0&&isMotionValue(W)&&W.set(d[P])}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,s)=>this.bindToMotionValue(s,a)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const a=this.features[e];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,a){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=transformProps.has(e);s&&this.onBindTransform&&this.onBindTransform();const o=a.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&frame.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,a)),this.valueSubscriptions.set(e,()=>{o(),l&&l(),a.owner&&a.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const a=featureDefinitions[e];if(!a)continue;const{isEnabled:s,Feature:o}=a;if(!this.features[e]&&o&&s(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,a){this.latestValues[e]=a}update(e,a){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let s=0;s<propEventHandlers.length;s++){const o=propEventHandlers[s];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,u=e[l];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(e),()=>a.variantChildren.delete(e)}addValue(e,a){const s=this.values.get(e);a!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,a),this.values.set(e,a),this.latestValues[e]=a.get())}removeValue(e){this.values.delete(e);const a=this.valueSubscriptions.get(e);a&&(a(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,a){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&a!==void 0&&(s=motionValue(a===null?void 0:a,{owner:this}),this.addValue(e,s)),s}readValue(e,a){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(isNumericalString(s)||isZeroValueString(s))?s=parseFloat(s):!findValueType(s)&&complex.test(a)&&(s=getAnimatableNone(e,a)),this.setBaseTarget(e,isMotionValue(s)?s.get():s)),isMotionValue(s)?s.get():s}setBaseTarget(e,a){this.baseTarget[e]=a}getBaseTarget(e){const{initial:a}=this.props;let s;if(typeof a=="string"||typeof a=="object"){const l=resolveVariantFromProps(this.props,a,this.presenceContext?.custom);l&&(s=l[e])}if(a&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!isMotionValue(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,a){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(a)}notify(e,...a){this.events[e]&&this.events[e].notify(...a)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,a){return e.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(e,a){return e.style?e.style[a]:void 0}removeValueFromRenderState(e,{vars:a,style:s}){delete a[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function renderHTML(t,{style:e,vars:a},s,o){const l=t.style;let u;for(u in e)l[u]=e[u];o?.applyProjectionStyles(l,s);for(u in a)l.setProperty(u,a[u])}function getComputedStyle$1(t){return window.getComputedStyle(t)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,a){if(transformProps.has(a))return this.projection?.isProjecting?defaultTransformValue(a):readTransformValue(e,a);{const s=getComputedStyle$1(e),o=(isCSSVariableName(a)?s.getPropertyValue(a):s[a])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:a}){return measureViewportBox(e,a)}build(e,a,s){buildHTMLStyles(e,a,s.transformTemplate)}scrapeMotionValuesFromProps(e,a,s){return scrapeMotionValuesFromProps$1(e,a,s)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(t,e,a,s){renderHTML(t,e,void 0,s);for(const o in e.attrs)t.setAttribute(camelCaseAttributes.has(o)?o:camelToDash(o),e.attrs[o])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,a){return e[a]}readValueFromInstance(e,a){if(transformProps.has(a)){const s=getDefaultValueType(a);return s&&s.default||0}return a=camelCaseAttributes.has(a)?a:camelToDash(a),e.getAttribute(a)}scrapeMotionValuesFromProps(e,a,s){return scrapeMotionValuesFromProps(e,a,s)}build(e,a,s){buildSVGAttrs(e,a,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,a,s,o){renderSVG(e,a,s,o)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(t,e)=>isSVGComponent(t)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:t!==reactExports.Fragment});function resolveVariant(t,e,a){const s=t.getProps();return resolveVariantFromProps(s,e,a!==void 0?a:s.custom,t)}const isKeyframesTarget=t=>Array.isArray(t);function setMotionValue(t,e,a){t.hasValue(e)?t.getValue(e).set(a):t.addValue(e,motionValue(a))}function resolveFinalValueInKeyframes(t){return isKeyframesTarget(t)?t[t.length-1]||0:t}function setTarget(t,e){const a=resolveVariant(t,e);let{transitionEnd:s={},transition:o={},...l}=a||{};l={...l,...s};for(const u in l){const c=resolveFinalValueInKeyframes(l[u]);setMotionValue(t,u,c)}}function isWillChangeMotionValue(t){return!!(isMotionValue(t)&&t.add)}function addValueToWillChange(t,e){const a=t.getValue("willChange");if(isWillChangeMotionValue(a))return a.add(e);if(!a&&MotionGlobalConfig.WillChange){const s=new MotionGlobalConfig.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function getOptimisedAppearId(t){return t.props[optimizedAppearDataAttribute]}const isNotNull=t=>t!==null;function getFinalKeyframe(t,{repeat:e,repeatType:a="loop"},s){const o=t.filter(isNotNull),l=e&&a!=="loop"&&e%2===1?0:o.length-1;return o[l]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(t,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(t)?t.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:t,delay:e,delayChildren:a,staggerChildren:s,staggerDirection:o,repeat:l,repeatType:u,repeatDelay:c,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const animateMotionValue=(t,e,a,s={},o,l)=>u=>{const c=getValueTransition(s,t)||{},d=c.delay||s.delay||0;let{elapsed:m=0}=s;m=m-secondsToMilliseconds(d);const g={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-m,onUpdate:P=>{e.set(P),c.onUpdate&&c.onUpdate(P)},onComplete:()=>{u(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:l?void 0:o};isTransitionDefined(c)||Object.assign(g,getDefaultTransition(t,g)),g.duration&&(g.duration=secondsToMilliseconds(g.duration)),g.repeatDelay&&(g.repeatDelay=secondsToMilliseconds(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let A=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(makeAnimationInstant(g),g.delay===0&&(A=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(A=!0,makeAnimationInstant(g),g.delay=0),g.allowFlatten=!c.type&&!c.ease,A&&!l&&e.get()!==void 0){const P=getFinalKeyframe(g.keyframes,c);if(P!==void 0){frame.update(()=>{g.onUpdate(P),g.onComplete()});return}}return c.isSync?new JSAnimation(g):new AsyncMotionValueAnimation(g)};function shouldBlockAnimation({protectedKeys:t,needsAnimating:e},a){const s=t.hasOwnProperty(a)&&e[a]!==!0;return e[a]=!1,s}function animateTarget(t,e,{delay:a=0,transitionOverride:s,type:o}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:u,...c}=e;s&&(l=s);const d=[],m=o&&t.animationState&&t.animationState.getState()[o];for(const g in c){const A=t.getValue(g,t.latestValues[g]??null),P=c[g];if(P===void 0||m&&shouldBlockAnimation(m,g))continue;const W={delay:a,...getValueTransition(l||{},g)},me=A.get();if(me!==void 0&&!A.isAnimating&&!Array.isArray(P)&&P===me&&!W.velocity)continue;let ve=!1;if(window.MotionHandoffAnimation){const De=getOptimisedAppearId(t);if(De){const Xe=window.MotionHandoffAnimation(De,g,frame);Xe!==null&&(W.startTime=Xe,ve=!0)}}addValueToWillChange(t,g),A.start(animateMotionValue(g,A,P,t.shouldReduceMotion&&positionalKeys.has(g)?{type:!1}:W,t,ve));const He=A.animation;He&&d.push(He)}return u&&Promise.all(d).then(()=>{frame.update(()=>{u&&setTarget(t,u)})}),d}function calcChildStagger(t,e,a,s=0,o=1){const l=Array.from(t).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),u=t.size,c=(u-1)*s;return typeof a=="function"?a(l,u):o===1?l*s:c-l*s}function animateVariant(t,e,a={}){const s=resolveVariant(t,e,a.type==="exit"?t.presenceContext?.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};a.transitionOverride&&(o=a.transitionOverride);const l=s?()=>Promise.all(animateTarget(t,s,a)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:A}=o;return animateChildren(t,e,d,m,g,A,a)}:()=>Promise.resolve(),{when:c}=o;if(c){const[d,m]=c==="beforeChildren"?[l,u]:[u,l];return d().then(()=>m())}else return Promise.all([l(),u(a.delay)])}function animateChildren(t,e,a=0,s=0,o=0,l=1,u){const c=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),c.push(animateVariant(d,e,{...u,delay:a+(typeof s=="function"?0:s)+calcChildStagger(t.variantChildren,d,s,o,l)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(c)}function animateVisualElement(t,e,a={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const o=e.map(l=>animateVariant(t,l,a));s=Promise.all(o)}else if(typeof e=="string")s=animateVariant(t,e,a);else{const o=typeof e=="function"?resolveVariant(t,e,a.custom):e;s=Promise.all(animateTarget(t,o,a))}return s.then(()=>{t.notify("AnimationComplete",e)})}function shallowCompare(t,e){if(!Array.isArray(e))return!1;const a=e.length;if(a!==t.length)return!1;for(let s=0;s<a;s++)if(e[s]!==t[s])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?getVariantContext(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const e={};for(let a=0;a<numVariantProps;a++){const s=variantProps[a],o=t.props[s];(isVariantLabel(o)||o===!1)&&(e[s]=o)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(t){return e=>Promise.all(e.map(({animation:a,options:s})=>animateVisualElement(t,a,s)))}function createAnimationState(t){let e=animateList(t),a=createState(),s=!0;const o=d=>(m,g)=>{const A=resolveVariant(t,g,d==="exit"?t.presenceContext?.custom:void 0);if(A){const{transition:P,transitionEnd:W,...me}=A;m={...m,...me,...W}}return m};function l(d){e=d(t)}function u(d){const{props:m}=t,g=getVariantContext(t.parent)||{},A=[],P=new Set;let W={},me=1/0;for(let He=0;He<numAnimationTypes;He++){const De=reversePriorityOrder[He],Xe=a[De],qe=m[De]!==void 0?m[De]:g[De],Rs=isVariantLabel(qe),Vc=De===d?Xe.isActive:null;Vc===!1&&(me=He);let So=qe===g[De]&&qe!==m[De]&&Rs;if(So&&s&&t.manuallyAnimateOnMount&&(So=!1),Xe.protectedKeys={...W},!Xe.isActive&&Vc===null||!qe&&!Xe.prevProp||isAnimationControls(qe)||typeof qe=="boolean")continue;const Do=checkVariantsDidChange(Xe.prevProp,qe);let eh=Do||De===d&&Xe.isActive&&!So&&Rs||He>me&&Rs,Ko=!1;const Ge=Array.isArray(qe)?qe:[qe];let An=Ge.reduce(o(De),{});Vc===!1&&(An={});const{prevResolvedValues:wt={}}=Xe,Bs={...wt,...An},yh=_h=>{eh=!0,P.has(_h)&&(Ko=!0,P.delete(_h)),Xe.needsAnimating[_h]=!0;const qc=t.getValue(_h);qc&&(qc.liveStyle=!1)};for(const _h in Bs){const qc=An[_h],Mh=wt[_h];if(W.hasOwnProperty(_h))continue;let cf=!1;isKeyframesTarget(qc)&&isKeyframesTarget(Mh)?cf=!shallowCompare(qc,Mh):cf=qc!==Mh,cf?qc!=null?yh(_h):P.add(_h):qc!==void 0&&P.has(_h)?yh(_h):Xe.protectedKeys[_h]=!0}Xe.prevProp=qe,Xe.prevResolvedValues=An,Xe.isActive&&(W={...W,...An}),s&&t.blockInitialAnimation&&(eh=!1);const df=So&&Do;eh&&(!df||Ko)&&A.push(...Ge.map(_h=>{const qc={type:De};if(typeof _h=="string"&&s&&!df&&t.manuallyAnimateOnMount&&t.parent){const{parent:Mh}=t,cf=resolveVariant(Mh,_h);if(Mh.enteringChildren&&cf){const{delayChildren:mf}=cf.transition||{};qc.delay=calcChildStagger(Mh.enteringChildren,t,mf)}}return{animation:_h,options:qc}}))}if(P.size){const He={};if(typeof m.initial!="boolean"){const De=resolveVariant(t,Array.isArray(m.initial)?m.initial[0]:m.initial);De&&De.transition&&(He.transition=De.transition)}P.forEach(De=>{const Xe=t.getBaseTarget(De),qe=t.getValue(De);qe&&(qe.liveStyle=!0),He[De]=Xe??null}),A.push({animation:He})}let ve=!!A.length;return s&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(ve=!1),s=!1,ve?e(A):Promise.resolve()}function c(d,m){if(a[d].isActive===m)return Promise.resolve();t.variantChildren?.forEach(A=>A.animationState?.setActive(d,m)),a[d].isActive=m;const g=u(d);for(const A in a)a[A].protectedKeys={};return g}return{animateChanges:u,setActive:c,setAnimateFunction:l,getState:()=>a,reset:()=>{a=createState(),s=!0}}}function checkVariantsDidChange(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!shallowCompare(e,t):!1}function createTypeState(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:a}=this.node.prevProps||{};e!==a&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:a}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const o=this.node.animationState.setActive("exit",!e);a&&!e&&o.then(()=>{a(this.id)})}mount(){const{register:e,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(t,e,a,s={passive:!0}){return t.addEventListener(e,a,s),()=>t.removeEventListener(e,a)}function extractEventInfo(t){return{point:{x:t.pageX,y:t.pageY}}}const addPointerInfo=t=>e=>isPrimaryPointer(e)&&t(e,extractEventInfo(e));function addPointerEvent(t,e,a,s){return addDomEvent(t,e,addPointerInfo(a),s)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(t){return t.max-t.min}function isNear(t,e,a){return Math.abs(t-e)<=a}function calcAxisDelta(t,e,a,s=.5){t.origin=s,t.originPoint=mixNumber$1(e.min,e.max,t.origin),t.scale=calcLength(a)/calcLength(e),t.translate=mixNumber$1(a.min,a.max,t.origin)-t.originPoint,(t.scale>=SCALE_MIN&&t.scale<=SCALE_MAX||isNaN(t.scale))&&(t.scale=1),(t.translate>=TRANSLATE_MIN&&t.translate<=TRANSLATE_MAX||isNaN(t.translate))&&(t.translate=0)}function calcBoxDelta(t,e,a,s){calcAxisDelta(t.x,e.x,a.x,s?s.originX:void 0),calcAxisDelta(t.y,e.y,a.y,s?s.originY:void 0)}function calcRelativeAxis(t,e,a){t.min=a.min+e.min,t.max=t.min+calcLength(e)}function calcRelativeBox(t,e,a){calcRelativeAxis(t.x,e.x,a.x),calcRelativeAxis(t.y,e.y,a.y)}function calcRelativeAxisPosition(t,e,a){t.min=e.min-a.min,t.max=t.min+calcLength(e)}function calcRelativePosition(t,e,a){calcRelativeAxisPosition(t.x,e.x,a.x),calcRelativeAxisPosition(t.y,e.y,a.y)}function eachAxis(t){return[t("x"),t("y")]}const getContextWindow=({current:t})=>t?t.ownerDocument.defaultView:null,distance=(t,e)=>Math.abs(t-e);function distance2D(t,e){const a=distance(t.x,e.x),s=distance(t.y,e.y);return Math.sqrt(a**2+s**2)}class PanSession{constructor(e,a,{transformPagePoint:s,contextWindow:o=window,dragSnapToOrigin:l=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=getPanInfo(this.lastMoveEventInfo,this.history),W=this.startEvent!==null,me=distance2D(P.offset,{x:0,y:0})>=this.distanceThreshold;if(!W&&!me)return;const{point:ve}=P,{timestamp:He}=frameData;this.history.push({...ve,timestamp:He});const{onStart:De,onMove:Xe}=this.handlers;W||(De&&De(this.lastMoveEvent,P),this.startEvent=this.lastMoveEvent),Xe&&Xe(this.lastMoveEvent,P)},this.handlePointerMove=(P,W)=>{this.lastMoveEvent=P,this.lastMoveEventInfo=transformPoint(W,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(P,W)=>{this.end();const{onEnd:me,onSessionEnd:ve,resumeAnimation:He}=this.handlers;if(this.dragSnapToOrigin&&He&&He(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const De=getPanInfo(P.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(W,this.transformPagePoint),this.history);this.startEvent&&me&&me(P,De),ve&&ve(P,De)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=l,this.handlers=a,this.transformPagePoint=s,this.distanceThreshold=u,this.contextWindow=o||window;const c=extractEventInfo(e),d=transformPoint(c,this.transformPagePoint),{point:m}=d,{timestamp:g}=frameData;this.history=[{...m,timestamp:g}];const{onSessionStart:A}=a;A&&A(e,getPanInfo(d,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(t,e){return e?{point:e(t.point)}:t}function subtractPoint(t,e){return{x:t.x-e.x,y:t.y-e.y}}function getPanInfo({point:t},e){return{point:t,delta:subtractPoint(t,lastDevicePoint(e)),offset:subtractPoint(t,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(t){return t[0]}function lastDevicePoint(t){return t[t.length-1]}function getVelocity(t,e){if(t.length<2)return{x:0,y:0};let a=t.length-1,s=null;const o=lastDevicePoint(t);for(;a>=0&&(s=t[a],!(o.timestamp-s.timestamp>secondsToMilliseconds(e)));)a--;if(!s)return{x:0,y:0};const l=millisecondsToSeconds(o.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const u={x:(o.x-s.x)/l,y:(o.y-s.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function applyConstraints(t,{min:e,max:a},s){return e!==void 0&&t<e?t=s?mixNumber$1(e,t,s.min):Math.max(t,e):a!==void 0&&t>a&&(t=s?mixNumber$1(a,t,s.max):Math.min(t,a)),t}function calcRelativeAxisConstraints(t,e,a){return{min:e!==void 0?t.min+e:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function calcRelativeConstraints(t,{top:e,left:a,bottom:s,right:o}){return{x:calcRelativeAxisConstraints(t.x,a,o),y:calcRelativeAxisConstraints(t.y,e,s)}}function calcViewportAxisConstraints(t,e){let a=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([a,s]=[s,a]),{min:a,max:s}}function calcViewportConstraints(t,e){return{x:calcViewportAxisConstraints(t.x,e.x),y:calcViewportAxisConstraints(t.y,e.y)}}function calcOrigin(t,e){let a=.5;const s=calcLength(t),o=calcLength(e);return o>s?a=progress(e.min,e.max-s,t.min):s>o&&(a=progress(t.min,t.max-o,e.min)),clamp$1(0,1,a)}function rebaseAxisConstraints(t,e){const a={};return e.min!==void 0&&(a.min=e.min-t.min),e.max!==void 0&&(a.max=e.max-t.min),a}const defaultElastic=.35;function resolveDragElastic(t=defaultElastic){return t===!1?t=0:t===!0&&(t=defaultElastic),{x:resolveAxisElastic(t,"left","right"),y:resolveAxisElastic(t,"top","bottom")}}function resolveAxisElastic(t,e,a){return{min:resolvePointElastic(t,e),max:resolvePointElastic(t,a)}}function resolvePointElastic(t,e){return typeof t=="number"?t:t[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:a=!1,distanceThreshold:s}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const l=A=>{const{dragSnapToOrigin:P}=this.getProps();P?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(extractEventInfo(A).point)},u=(A,P)=>{const{drag:W,dragPropagation:me,onDragStart:ve}=this.getProps();if(W&&!me&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(W),!this.openDragLock))return;this.latestPointerEvent=A,this.latestPanInfo=P,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(De=>{let Xe=this.getAxisMotionValue(De).get()||0;if(percent.test(Xe)){const{projection:qe}=this.visualElement;if(qe&&qe.layout){const Rs=qe.layout.layoutBox[De];Rs&&(Xe=calcLength(Rs)*(parseFloat(Xe)/100))}}this.originPoint[De]=Xe}),ve&&frame.postRender(()=>ve(A,P)),addValueToWillChange(this.visualElement,"transform");const{animationState:He}=this.visualElement;He&&He.setActive("whileDrag",!0)},c=(A,P)=>{this.latestPointerEvent=A,this.latestPanInfo=P;const{dragPropagation:W,dragDirectionLock:me,onDirectionLock:ve,onDrag:He}=this.getProps();if(!W&&!this.openDragLock)return;const{offset:De}=P;if(me&&this.currentDirection===null){this.currentDirection=getCurrentDirection(De),this.currentDirection!==null&&ve&&ve(this.currentDirection);return}this.updateAxis("x",P.point,De),this.updateAxis("y",P.point,De),this.visualElement.render(),He&&He(A,P)},d=(A,P)=>{this.latestPointerEvent=A,this.latestPanInfo=P,this.stop(A,P),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>eachAxis(A=>this.getAnimationState(A)==="paused"&&this.getAxisMotionValue(A).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:l,onStart:u,onMove:c,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:s,contextWindow:getContextWindow(this.visualElement)})}stop(e,a){const s=e||this.latestPointerEvent,o=a||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!o||!s)return;const{velocity:u}=o;this.startAnimation(u);const{onDragEnd:c}=this.getProps();c&&frame.postRender(()=>c(s,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:a}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(e,a,s){const{drag:o}=this.getProps();if(!s||!shouldDrag(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let u=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(u=applyConstraints(u,this.constraints[e],this.elastic[e])),l.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:a}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=calcRelativeConstraints(s.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(a),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=rebaseAxisConstraints(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:a}=this.getProps();if(!e||!isRefObject(e))return!1;const s=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=measurePageBox(s,o.root,this.visualElement.getTransformPagePoint());let u=calcViewportConstraints(o.layout.layoutBox,l);if(a){const c=a(convertBoxToBoundingBox(u));this.hasMutatedConstraints=!!c,c&&(u=convertBoundingBoxToBox(c))}return u}startAnimation(e){const{drag:a,dragMomentum:s,dragElastic:o,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},m=eachAxis(g=>{if(!shouldDrag(g,a,this.currentDirection))return;let A=d&&d[g]||{};u&&(A={min:0,max:0});const P=o?200:1e6,W=o?40:1e7,me={type:"inertia",velocity:s?e[g]:0,bounceStiffness:P,bounceDamping:W,timeConstant:750,restDelta:1,restSpeed:10,...l,...A};return this.startAxisValueAnimation(g,me)});return Promise.all(m).then(c)}startAxisValueAnimation(e,a){const s=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),s.start(animateMotionValue(e,s,0,a,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const a=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),o=s[a];return o||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(a=>{const{drag:s}=this.getProps();if(!shouldDrag(a,s,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(a);if(o&&o.layout){const{min:u,max:c}=o.layout.layoutBox[a];l.set(e[a]-mixNumber$1(u,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:a}=this.getProps(),{projection:s}=this.visualElement;if(!isRefObject(a)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};eachAxis(u=>{const c=this.getAxisMotionValue(u);if(c&&this.constraints!==!1){const d=c.get();o[u]=calcOrigin({min:d,max:d},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),eachAxis(u=>{if(!shouldDrag(u,e,null))return;const c=this.getAxisMotionValue(u),{min:d,max:m}=this.constraints[u];c.set(mixNumber$1(d,m,o[u]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,a=addPointerEvent(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();isRefObject(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),frame.read(s);const u=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),c=o.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(eachAxis(g=>{const A=this.getAxisMotionValue(g);A&&(this.originPoint[g]+=d[g].translate,A.set(A.get()+d[g].translate))}),this.visualElement.render())});return()=>{u(),a(),l(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:u=defaultElastic,dragMomentum:c=!0}=e;return{...e,drag:a,dragDirectionLock:s,dragPropagation:o,dragConstraints:l,dragElastic:u,dragMomentum:c}}}function shouldDrag(t,e,a){return(e===!0||e===t)&&(a===null||a===t)}function getCurrentDirection(t,e=10){let a=null;return Math.abs(t.y)>e?a="y":Math.abs(t.x)>e&&(a="x"),a}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=t=>(e,a)=>{t&&frame.postRender(()=>t(e,a))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:a,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(a),onMove:s,onEnd:(l,u)=>{delete this.session,o&&frame.postRender(()=>o(l,u))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const correctBorderRadius={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(px.test(t))t=parseFloat(t);else return t;const a=pixelsToPercent(t,e.target.x),s=pixelsToPercent(t,e.target.y);return`${a}% ${s}%`}},correctBoxShadow={correct:(t,{treeScale:e,projectionDelta:a})=>{const s=t,o=complex.parse(t);if(o.length>5)return s;const l=complex.createTransformer(t),u=typeof o[0]!="number"?1:0,c=a.x.scale*e.x,d=a.y.scale*e.y;o[0+u]/=c,o[1+u]/=d;const m=mixNumber$1(c,d,.5);return typeof o[2+u]=="number"&&(o[2+u]/=m),typeof o[3+u]=="number"&&(o[3+u]/=m),l(o)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:a,switchLayoutGroup:s,layoutId:o}=this.props,{projection:l}=e;addScaleCorrector(defaultScaleCorrectors),l&&(a.group&&a.group.add(l),s&&s.register&&o&&s.register(l),hasTakenAnySnapshot&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:a,visualElement:s,drag:o,isPresent:l}=this.props,{projection:u}=s;return u&&(u.isPresent=l,hasTakenAnySnapshot=!0,o||e.layoutDependency!==a||a===void 0||e.isPresent!==l?u.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?u.promote():u.relegate()||frame.postRender(()=>{const c=u.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:a,switchLayoutGroup:s}=this.props,{projection:o}=e;hasTakenAnySnapshot=!0,o&&(o.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(t){const[e,a]=usePresence(),s=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...t,layoutGroup:s,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:a})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(t,e,a){const s=isMotionValue(t)?t:motionValue(t);return s.start(animateMotionValue("",s,e,a)),s.animation}const compareByDepth=(t,e)=>t.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(t,e){const a=time.now(),s=({timestamp:o})=>{const l=o-a;l>=e&&(cancelFrame(s),t(l-e))};return frame.setup(s,!0),()=>cancelFrame(s)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=t=>typeof t=="string"?parseFloat(t):t,isPx=t=>typeof t=="number"||px.test(t);function mixValues(t,e,a,s,o,l){o?(t.opacity=mixNumber$1(0,a.opacity??1,easeCrossfadeIn(s)),t.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(s))):l&&(t.opacity=mixNumber$1(e.opacity??1,a.opacity??1,s));for(let u=0;u<numBorders;u++){const c=`border${borders[u]}Radius`;let d=getRadius(e,c),m=getRadius(a,c);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||isPx(d)===isPx(m)?(t[c]=Math.max(mixNumber$1(asNumber(d),asNumber(m),s),0),(percent.test(m)||percent.test(d))&&(t[c]+="%")):t[c]=m}(e.rotate||a.rotate)&&(t.rotate=mixNumber$1(e.rotate||0,a.rotate||0,s))}function getRadius(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(t,e,a){return s=>s<t?0:s>e?1:a(progress(t,e,s))}function copyAxisInto(t,e){t.min=e.min,t.max=e.max}function copyBoxInto(t,e){copyAxisInto(t.x,e.x),copyAxisInto(t.y,e.y)}function copyAxisDeltaInto(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function removePointDelta(t,e,a,s,o){return t-=e,t=scalePoint(t,1/a,s),o!==void 0&&(t=scalePoint(t,1/o,s)),t}function removeAxisDelta(t,e=0,a=1,s=.5,o,l=t,u=t){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(u.min,u.max,e/100)-u.min),typeof e!="number")return;let c=mixNumber$1(l.min,l.max,s);t===l&&(c-=e),t.min=removePointDelta(t.min,e,a,c,o),t.max=removePointDelta(t.max,e,a,c,o)}function removeAxisTransforms(t,e,[a,s,o],l,u){removeAxisDelta(t,e[a],e[s],e[o],e.scale,l,u)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(t,e,a,s){removeAxisTransforms(t.x,e,xKeys,a?a.x:void 0,s?s.x:void 0),removeAxisTransforms(t.y,e,yKeys,a?a.y:void 0,s?s.y:void 0)}function isAxisDeltaZero(t){return t.translate===0&&t.scale===1}function isDeltaZero(t){return isAxisDeltaZero(t.x)&&isAxisDeltaZero(t.y)}function axisEquals(t,e){return t.min===e.min&&t.max===e.max}function boxEquals(t,e){return axisEquals(t.x,e.x)&&axisEquals(t.y,e.y)}function axisEqualsRounded(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function boxEqualsRounded(t,e){return axisEqualsRounded(t.x,e.x)&&axisEqualsRounded(t.y,e.y)}function aspectRatio(t){return calcLength(t.x)/calcLength(t.y)}function axisDeltaEquals(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(e){const a=this.members.findIndex(o=>e===o);if(a===0)return!1;let s;for(let o=a;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,a){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,a&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:a,resumingFrom:s}=e;a.onExitComplete&&a.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(t,e,a){let s="";const o=t.x.translate/e.x,l=t.y.translate/e.y,u=a?.z||0;if((o||l||u)&&(s=`translate3d(${o}px, ${l}px, ${u}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),a){const{transformPerspective:m,rotate:g,rotateX:A,rotateY:P,skewX:W,skewY:me}=a;m&&(s=`perspective(${m}px) ${s}`),g&&(s+=`rotate(${g}deg) `),A&&(s+=`rotateX(${A}deg) `),P&&(s+=`rotateY(${P}deg) `),W&&(s+=`skewX(${W}deg) `),me&&(s+=`skewY(${me}deg) `)}const c=t.x.scale*e.x,d=t.y.scale*e.y;return(c!==1||d!==1)&&(s+=`scale(${c}, ${d})`),s||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(t,e,a,s){const{latestValues:o}=e;o[t]&&(a[t]=o[t],e.setStaticValue(t,0),s&&(s[t]=0))}function cancelTreeOptimisedTransformAnimations(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const a=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:o,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",frame,!(o||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(s)}function createProjectionNode({attachResizeListener:t,defaultParent:e,measureScroll:a,checkIsScrollRoot:s,resetTransform:o}){return class{constructor(u={},c=e?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(u,c){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new SubscriptionManager),this.eventHandlers.get(u).add(c)}notifyListeners(u,...c){const d=this.eventHandlers.get(u);d&&d.notify(...c)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=isSVGElement(u)&&!isSVGSVGElement(u),this.instance=u;const{layoutId:c,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),t){let g,A=0;const P=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{A=window.innerWidth}),t(u,()=>{const W=window.innerWidth;W!==A&&(A=W,this.root.updateBlockedByResize=!0,g&&g(),g=delay(P,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:A,hasRelativeLayoutChanged:P,layout:W})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const me=this.options.transition||m.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:ve,onLayoutAnimationComplete:He}=m.getProps(),De=!this.targetLayout||!boxEqualsRounded(this.targetLayout,W),Xe=!A&&P;if(this.options.layoutRoot||this.resumeFrom||Xe||A&&(De||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const qe={...getValueTransition(me,"layout"),onPlay:ve,onComplete:He};(m.shouldReduceMotion||this.options.layoutRoot)&&(qe.delay=0,qe.type=!1),this.startAnimation(qe),this.setAnimationOrigin(g,Xe)}else A||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=W})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const A=this.path[g];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const c=time.now();frameData.delta=clamp$1(0,1e3/60,c-frameData.timestamp),frameData.timestamp=c,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(c=!1),c&&this.instance){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!isDeltaZero(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;u&&this.instance&&(c||hasTransform(this.latestValues)||g)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return u&&(d=this.removeTransform(d)),roundBox(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return createBox();const c=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:m}=this.root;m&&(translateAxis(c.x,m.offset.x),translateAxis(c.y,m.offset.y))}return c}removeElementScroll(u){const c=createBox();if(copyBoxInto(c,u),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const m=this.path[d],{scroll:g,options:A}=m;m!==this.root&&g&&A.layoutScroll&&(g.wasRoot&&copyBoxInto(c,u),translateAxis(c.x,g.offset.x),translateAxis(c.y,g.offset.y))}return c}applyTransform(u,c=!1){const d=createBox();copyBoxInto(d,u);for(let m=0;m<this.path.length;m++){const g=this.path[m];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&transformBox(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),hasTransform(g.latestValues)&&transformBox(d,g.latestValues)}return hasTransform(this.latestValues)&&transformBox(d,this.latestValues),d}removeTransform(u){const c=createBox();copyBoxInto(c,u);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!hasTransform(m.latestValues))continue;hasScale(m.latestValues)&&m.updateSnapshot();const g=createBox(),A=m.measurePageBox();copyBoxInto(g,A),removeBoxTransforms(c,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return hasTransform(this.latestValues)&&removeBoxTransforms(c,this.latestValues),c}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(u||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:A}=this.options;if(!(!this.layout||!(g||A))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const P=this.getClosestProjectingParent();P&&P.layout&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,P.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const P=this.getClosestProjectingParent();P&&!!P.resumingFrom==!!this.resumingFrom&&!P.options.layoutScroll&&P.target&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,P.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),c=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const A=this.treeScale.x,P=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=createBox());const{target:W}=u;if(!W){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,W,this.latestValues),(this.treeScale.x!==A||this.treeScale.y!==P||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",W))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(u,c=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},A=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const P=createBox(),W=d?d.source:void 0,me=this.layout?this.layout.source:void 0,ve=W!==me,He=this.getStack(),De=!He||He.members.length<=1,Xe=!!(ve&&!De&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let qe;this.mixTargetDelta=Rs=>{const Vc=Rs/1e3;mixAxisDelta(A.x,u.x,Vc),mixAxisDelta(A.y,u.y,Vc),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(P,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,P,Vc),qe&&boxEquals(this.relativeTarget,qe)&&(this.isProjectionDirty=!1),qe||(qe=createBox()),copyBoxInto(qe,this.relativeTarget)),ve&&(this.animationValues=g,mixValues(g,m,this.latestValues,Vc,Xe,De)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Vc},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),u.onUpdate&&u.onUpdate(c)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:c,target:d,layout:m,latestValues:g}=u;if(!(!c||!d||!m)){if(this!==u&&this.layout&&m&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||createBox();const A=calcLength(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+A;const P=calcLength(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+P}copyBoxInto(c,d),transformBox(c,g),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(u,c){this.sharedNodes.has(u)||this.sharedNodes.set(u,new NodeStack),this.sharedNodes.get(u).add(c);const m=c.options.initialPromotionConfig;c.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(c):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:c,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let c=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const m={};d.z&&resetDistortingTransform("z",u,m,this.animationValues);for(let g=0;g<transformAxes.length;g++)resetDistortingTransform(`rotate${transformAxes[g]}`,u,m,this.animationValues),resetDistortingTransform(`skew${transformAxes[g]}`,u,m,this.animationValues);u.render();for(const g in m)u.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);u.scheduleRender()}applyProjectionStyles(u,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=resolveMotionValue(c?.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=resolveMotionValue(c?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(u.transform=d?d({},""):"none",this.hasProjected=!1);return}u.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let A=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,g);d&&(A=d(g,A)),u.transform=A;const{x:P,y:W}=this.projectionDelta;u.transformOrigin=`${P.origin*100}% ${W.origin*100}% 0`,m.animationValues?u.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const me in scaleCorrectors){if(g[me]===void 0)continue;const{correct:ve,applyTo:He,isCSSVariable:De}=scaleCorrectors[me],Xe=A==="none"?g[me]:ve(g[me],m);if(He){const qe=He.length;for(let Rs=0;Rs<qe;Rs++)u[He[Rs]]=Xe}else De?this.options.visualElement.renderState.vars[me]=Xe:u[me]=Xe}this.options.layoutId&&(u.pointerEvents=m===this?resolveMotionValue(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(t){t.updateLayout()}function notifyLayoutUpdate(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:s}=t.layout,{animationType:o}=t.options,l=e.source!==t.layout.source;o==="size"?eachAxis(g=>{const A=l?e.measuredBox[g]:e.layoutBox[g],P=calcLength(A);A.min=a[g].min,A.max=A.min+P}):shouldAnimatePositionOnly(o,e.layoutBox,a)&&eachAxis(g=>{const A=l?e.measuredBox[g]:e.layoutBox[g],P=calcLength(a[g]);A.max=A.min+P,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+P)});const u=createDelta();calcBoxDelta(u,a,e.layoutBox);const c=createDelta();l?calcBoxDelta(c,t.applyTransform(s,!0),e.measuredBox):calcBoxDelta(c,a,e.layoutBox);const d=!isDeltaZero(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:A,layout:P}=g;if(A&&P){const W=createBox();calcRelativePosition(W,e.layoutBox,A.layoutBox);const me=createBox();calcRelativePosition(me,a,P.layoutBox),boxEqualsRounded(W,me)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=me,t.relativeTargetOrigin=W,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:e,delta:c,layoutDelta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function propagateDirtyNodes(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cleanDirtyNodes(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function clearSnapshot(t){t.clearSnapshot()}function clearMeasurements(t){t.clearMeasurements()}function clearIsLayoutDirty(t){t.isLayoutDirty=!1}function resetTransformStyle(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function finishAnimation(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function resolveTargetDelta(t){t.resolveTargetDelta()}function calcProjection(t){t.calcProjection()}function resetSkewAndRotation(t){t.resetSkewAndRotation()}function removeLeadSnapshots(t){t.removeLeadSnapshot()}function mixAxisDelta(t,e,a){t.translate=mixNumber$1(e.translate,0,a),t.scale=mixNumber$1(e.scale,1,a),t.origin=e.origin,t.originPoint=e.originPoint}function mixAxis(t,e,a,s){t.min=mixNumber$1(e.min,a.min,s),t.max=mixNumber$1(e.max,a.max,s)}function mixBox(t,e,a,s){mixAxis(t.x,e.x,a.x,s),mixAxis(t.y,e.y,a.y,s)}function hasOpacityCrossfade(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(t){t.min=roundPoint(t.min),t.max=roundPoint(t.max)}function roundBox(t){roundAxis(t.x),roundAxis(t.y)}function shouldAnimatePositionOnly(t,e,a){return t==="position"||t==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(a),.2)}function checkNodeWasScrollRoot(t){return t!==t.root&&t.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(t,e)=>addDomEvent(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const t=new DocumentProjectionNode({});t.mount(window),t.setOptions({layoutScroll:!0}),rootProjectionNode.current=t}return rootProjectionNode.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(t,e,a){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",a==="Start");const o="onHover"+a,l=s[o];l&&frame.postRender(()=>l(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(a,s)=>(handleHoverEvent(this.node,s,"Start"),o=>handleHoverEvent(this.node,o,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(t,e,a){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",a==="Start");const o="onTap"+(a==="End"?"":a),l=s[o];l&&frame.postRender(()=>l(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(a,s)=>(handlePressEvent(this.node,s,"Start"),(o,{success:l})=>handlePressEvent(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=t=>{const e=observerCallbacks.get(t.target);e&&e(t)},fireAllObserverCallbacks=t=>{t.forEach(fireObserverCallback)};function initIntersectionObserver({root:t,...e}){const a=t||document;observers.has(a)||observers.set(a,{});const s=observers.get(a),o=JSON.stringify(e);return s[o]||(s[o]=new IntersectionObserver(fireAllObserverCallbacks,{root:t,...e})),s[o]}function observeIntersection(t,e,a){const s=initIntersectionObserver(e);return observerCallbacks.set(t,a),s.observe(t),()=>{observerCallbacks.delete(t),s.unobserve(t)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:a,margin:s,amount:o="some",once:l}=e,u={root:a?a.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:thresholdNames[o]},c=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:A}=this.node.getProps(),P=m?g:A;P&&P(d)};return observeIntersection(this.node.current,u,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:a}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,a))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:t={}},{viewport:e={}}={}){return a=>t[a]!==e[a]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement),landSound="/assets/ding-CB-8xrf1.mp3";let audioCtx=null,soundBuffer=null;function XPFly({amount:t,to:e,delay:a=0,pitchIndex:s=0,onDone:o}){async function l(){if(soundBuffer)return soundBuffer;audioCtx??=new(window.AudioContext||window.webkitAudioContext);const d=await(await fetch(landSound)).arrayBuffer();return soundBuffer=await audioCtx.decodeAudioData(d),soundBuffer}async function u(c){try{audioCtx??=new(window.AudioContext||window.webkitAudioContext);const d=audioCtx,m=await l(),g=d.createBufferSource();g.buffer=m;const A=5,P=2400;g.detune.value=Math.min(c*A,P);const W=d.createGain();W.gain.value=.35,g.connect(W),W.connect(d.destination),g.start(),g.stop(d.currentTime+.18)}catch{}}return jsxRuntimeExports.jsxs(motion.div,{className:"absolute color-txt-accent left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none text-xl font-bold text-accent w-50 h-50 flex justify-center items-center",initial:{x:0,y:0,opacity:1,scale:0},animate:{x:e.x,y:e.y,opacity:[1,1,1,1,1,1],scale:[0,1]},transition:{duration:1,ease:"easeIn",delay:a},onAnimationComplete:()=>{u(s),o?.(t)},children:["+",t," XP"]})}function useFilters(){const[t,e]=reactExports.useState([{key:1,topic:"Algebra",subTopics:["Cubics","Expressions & Factorising","Indices & Logs","Inequalities","Quadratics","Simultaneous Equations","Solving Equations"]},{key:2,topic:"Area & Volume",subTopics:[]},{key:3,topic:"Calculus",subTopics:["Differentiation","Applications of Differentiation","Functions","Integration"]},{key:4,topic:"Complex Numbers",subTopics:[]},{key:5,topic:"Financial Maths",subTopics:[]},{key:6,topic:"Coordinate Geometry",subTopics:["Line","Circle"]},{key:7,topic:"Probability",subTopics:[]},{key:8,topic:"Sequences & Series",subTopics:[]},{key:9,topic:"Statistics",subTopics:["Descriptive","Inferential","ZScores"]},{key:10,topic:"Trigonometry",subTopics:["Functions & Identities","Triangles"]},{key:11,topic:"Geometry",subTopics:[]}]),[a,s]=reactExports.useState([]),[o,l]=reactExports.useState([]),[u,c]=reactExports.useState([]),[d,m]=reactExports.useState([]);return{selectTopic:me=>{s(ve=>[...ve,me]),e(ve=>ve.filter(He=>He!==me)),me.subTopics.forEach(ve=>{l(He=>[...He,{parent:me.topic,key:Math.floor(Math.random()*500),topic:ve}])}),m(ve=>[...ve,me.topic])},unselectTopic:me=>{e(ve=>[...ve,me]),s(ve=>ve.filter(He=>He!==me)),me.subTopics.forEach(ve=>{l(He=>He.filter(De=>De.topic!==ve)),c(He=>He.filter(De=>De.topic!==ve)),m(He=>He.filter(De=>De!==ve))}),m(ve=>ve.filter(He=>He!==me.topic))},selectSubTopic:me=>{c(ve=>[...ve,me]),l(ve=>ve.filter(He=>He!==me)),m(ve=>[...ve,me.topic]),m(ve=>ve.filter(He=>He!==me.parent))},unselectSubTopic:me=>{l(He=>[...He,me]),c(He=>He.filter(De=>De!==me)),m(He=>He.filter(De=>De!==me.topic));let ve=!0;o.forEach(He=>{He.parent===me.parent&&(ve=!1)}),ve&&m(He=>[...He,me.parent])},selectedTopics:a,unselectedTopics:t,selectedSubTopics:u,unselectedSubTopics:o,localFilters:d}}function HiOutlineX(t){return GenIcon({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"},child:[]}]})(t)}function Filter(t){const{selectTopic:e,unselectTopic:a,selectSubTopic:s,unselectSubTopic:o,selectedTopics:l,unselectedTopics:u,selectedSubTopics:c,unselectedSubTopics:d,localFilters:m}=useFilters(),g=reactExports.useRef(null);reactExports.useEffect(()=>{function P(W){const me=W.target;g.current&&!g.current.contains(me)&&t.setViewFilter(!1)}return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[t.setViewFilter]);const A=()=>{t.setFilters(m),t.setViewFilter(!1)};return jsxRuntimeExports.jsx("div",{ref:g,children:jsxRuntimeExports.jsxs("div",{className:t.viewFilter?"filter-container-shown":"filter-container-hidden",children:[jsxRuntimeExports.jsx("p",{className:"filter-header",children:"topic"}),jsxRuntimeExports.jsxs("div",{className:"selection-container",children:[l.map(P=>jsxRuntimeExports.jsxs("div",{onClick:()=>a(P),className:"selected",children:[jsxRuntimeExports.jsx("span",{children:P.topic}),jsxRuntimeExports.jsx(HiOutlineX,{size:12,strokeWidth:3,className:"mx-0.5"})]},P.topic)),u.map(P=>jsxRuntimeExports.jsx("div",{onClick:()=>e(P),className:"unselected",children:jsxRuntimeExports.jsx("span",{children:P.topic})},P.topic))]}),jsxRuntimeExports.jsx("p",{className:"filter-header",children:"subtopic"}),c.length>0||d.length>0?jsxRuntimeExports.jsxs("div",{className:"selection-container",children:[c.map(P=>jsxRuntimeExports.jsxs("div",{onClick:()=>o(P),className:"selected",children:[jsxRuntimeExports.jsx("span",{children:P.topic}),jsxRuntimeExports.jsx(HiOutlineX,{size:12,strokeWidth:3,className:"mx-0.5"})]},P.topic)),d.map(P=>jsxRuntimeExports.jsx("div",{onClick:()=>s(P),className:"unselected",children:jsxRuntimeExports.jsx("span",{children:P.topic})},P.topic))]}):jsxRuntimeExports.jsxs("p",{className:"filler",children:["select a topic to see subtopics ",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("p",{className:"apply",onClick:()=>{A()},children:"Apply"})]})})}function Question(t){const[e,a]=reactExports.useState(),[s,o]=reactExports.useState(),[l,u]=reactExports.useState(0),[c,d]=reactExports.useState([]);reactExports.useEffect(()=>{},[c]);const[m,g]=reactExports.useState(""),[A,P]=reactExports.useState(!1),{toRoman:W}=useQuestions(),{isCorrect:me}=useMaths(),[ve,He]=reactExports.useState(!1),[De,Xe]=reactExports.useState(!1),[qe,Rs]=reactExports.useState(!1),[Vc,So]=reactExports.useState([]),Do=reactExports.useRef(null),{rank:eh,progress:Ko,streak:Ge,onCheck:An}=useRank({rankRef:Do,setIsRight:Xe,setShowNoti:Rs,xpFlyers:Vc,setXpFlyers:So}),{user:wt}=reactExports.useContext(UserContext),[Bs,yh]=reactExports.useState(0),[df,Fc]=reactExports.useState(!1),[_h,qc]=reactExports.useState(!1),[Mh,cf]=reactExports.useState(!1);reactExports.useEffect(()=>{},[wt?.xp]);const mf=40+Bs-Bs,a1=1.75;function s1(){if(Mh)return;const q1=e?.[l]?.answer??[],U1=me(c,q1);if(An(c,q1),U1){yh(0),Fc(!0),cf(!0),Xe(!0),Rs(!0);return}yh(M2=>{const x2=M2+1;return x2>=3&&Fc(!0),x2})}function E1(){qc(!0),cf(!0)}function T1(){qc(!1)}function z1(){qc(!1),cf(!1),yh(0),Fc(!1),d([]),t.nextQuestion?t.nextQuestion():t.setPosition&&t.setPosition(q1=>Math.min(q1+1,(t.questions?.length??1)-1))}reactExports.useEffect(()=>{u(0);const U1=(Array.isArray(t.questions)?t.questions:[])[t.position]??{},M2=(U1.content??[]).map(x2=>({question:x2?.question??"",answer:Array.isArray(x2?.answer)?x2.answer:[],prefix:Array.isArray(x2?.prefix)?x2.prefix:[],orderMatters:x2?.ordermatters,image:x2?.image??"",logtables:x2?.logTables?x2.logTables:1}));a(M2),o(U1.properties??{})},[t.position,t.questions]),reactExports.useEffect(()=>{d([]),Xe(!1),Rs(!1),yh(0),Fc(!1),qc(!1),cf(!1)},[l]),reactExports.useEffect(()=>{u(0),d([]),Xe(!1),Rs(!1),yh(0),Fc(!1),qc(!1),cf(!1)},[t.position,t.questions]);const W1=["Yeh I mean... decent attempt I guess","Ah yes, the famous *close enough* theorem.","I think Pythagoras just rolled in his grave","You can't just invent new math...","I mean the spirit was definitely there!...","Just off the phone to Newton, he has no idea either","I mean, I'm sure some other question had that answer","Legend says the examiner is still trynna understand you","bro... what?","Atleast you didn't answer with 67","Get it right next time or we'll start charging for CertChamps","dy/dx = 0 or something idek bro","I think you're cooked bro...","Man lock in bro","I won't tell your teacher if you don't...","INSERT INSULT HERE","Back to reels, is it?","I spent all this time making this stupid app just for you to do that...","Dude...","Uhm.............................","Hey, nice guy here, sorry about the other guys insults... better luck next time! <3",""],[m2,C2]=reactExports.useState("");reactExports.useEffect(()=>{const q1=Math.floor(Math.random()*W1.length);C2(W1[q1])},[]);const A2=["Alright... now that was awesome","Hey... not bad for a rookie","Polynomial? More like polyperfect.","The limit of your brilliance as n  .","You just differentiated yourself from the rest.","Even imaginary numbers think youre real.","HELL YEH BRO THAT WAS SICK!!!","Would Euler shed a tear? Probably one of joy.","Thats not PEMDAS  thats PERFECT.","Pretty sigma ngl","It's giving academic","This ur math era?","Thank GOD the answer wasn't 67","Bro's out here carrying the whole squad","Pretty snazzy ngl","I'm not paid enough for these placeholders man","Oh get over yourself...","Schrdinger? I hardly know her","Oh hey... that was pretty neat... wanna be the sin to my cosine?","SOMEONE is LOCKED in. WOW","I showed this to ChatGPT and it filed a restraining order.","Knock knock. Who's there? Perf. Perf who? Perfection<3","That was pretty lit bro","Would Einstein REALLY have done better?"],[b2,_2]=reactExports.useState("");return reactExports.useEffect(()=>{const q1=Math.floor(Math.random()*A2.length);_2(A2[q1])},[]),jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full w-full items-end justify-end p-4",children:[A?jsxRuntimeExports.jsx(QSearch,{setShowSearch:P,questions:t.questions,position:t.position,setPosition:t.setPosition??null}):null,qe&&De?jsxRuntimeExports.jsx(AnswerNoti,{visible:!0,onNext:()=>{Rs(!1),Xe(!1)}}):null,_h?jsxRuntimeExports.jsx("div",{className:`fixed inset-0 z-[500] color-bg-grey-5 backdrop-blur-sm\r
                     flex items-center justify-center p-4`,onClick:T1,children:jsxRuntimeExports.jsxs("div",{className:`color-bg rounded-2xl shadow-xl w-full max-w-4xl\r
                       max-h-[85vh] overflow-hidden flex flex-col`,onClick:q1=>q1.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"color-txt-main txt-bold",children:"Marking Scheme"}),jsxRuntimeExports.jsx("p",{className:"color-txt-accent",children:De?b2:m2})]}),jsxRuntimeExports.jsx("button",{className:"color-txt-sub hover:opacity-80",onClick:T1,title:"Close",children:""})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto p-3 flex items-center justify-center",children:jsxRuntimeExports.jsx(MarkingScheme$1,{year:"25",pgNumber:"1"})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 p-3",children:[jsxRuntimeExports.jsx("button",{className:"px-4 py-2 rounded-full color-bg-grey-5 hover:opacity-90",onClick:T1,children:"Close"}),jsxRuntimeExports.jsx("button",{className:`px-4 py-2 rounded-full color-bg-accent color-txt-accent txt-bold\r
                           hover:opacity-90`,onClick:z1,children:"Next question"})]})]})}):null,jsxRuntimeExports.jsxs("div",{className:"flex justify-start items-end w-full h-[90%]",children:[t.questions[t.position]?jsxRuntimeExports.jsxs("div",{className:`card-container h-full items-end justify-start ${m==""||m=="filters"?"w-full":"w-7/12"}  
        transition-all duration-250 shrink-0 self-start justify-self-start origin-left relative`,children:[jsxRuntimeExports.jsx("div",{className:"pointer-events-none h-full w-full absolute flex justify-center items-center z-[300]",children:Vc.map(q1=>jsxRuntimeExports.jsx(XPFly,{amount:q1.amount,to:q1.to,delay:q1.delay,pitchIndex:q1.pitchIndex,onDone:()=>{So(U1=>U1.filter(M2=>M2.id!==q1.id))}},q1.id))}),jsxRuntimeExports.jsxs("div",{className:"p-8 flex flex-1 flex-col justify-between h-full",children:[jsxRuntimeExports.jsxs("div",{className:"h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex",ref:Do,children:[jsxRuntimeExports.jsx(RankBar,{rank:eh,progress:Ko}),jsxRuntimeExports.jsx(StreakDisplay,{streak:Ge})]}),jsxRuntimeExports.jsxs("p",{className:"txt-bold color-txt-accent",children:[s?.name,jsxRuntimeExports.jsx("span",{className:"txt-sub mx-2",children:s?.tags?.join?.(", ")}),e?.[l]?.answer?.length?e?.[l].answer.map(q1=>jsxRuntimeExports.jsx("span",{className:"txt-sub",children:`ANS: ${q1}`},q1)):null]}),jsxRuntimeExports.jsx("div",{className:"flex",children:Array.isArray(e)&&e?.length>1&&e?.map((q1,U1)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center h-10",onClick:()=>{u(U1),d([])},children:[jsxRuntimeExports.jsx("p",{className:`part-number ${l===U1?"bg-white/5":"hover:bg-white/10"}`,children:W(U1+1)}),jsxRuntimeExports.jsx(LuChevronRight,{className:`${U1+1===e?.length?"invisible":"visible"} color-txt-sub`})]},U1))}),jsxRuntimeExports.jsxs("div",{className:"w-full h-3/4 overflow-y-auto px-2 py-2",children:[jsxRuntimeExports.jsx(RenderMath,{text:e?.[l]?.question??"",className:"txt text-xl"}),e?.[l]?.image&&jsxRuntimeExports.jsx("div",{className:"w-100 h-auto relative",children:jsxRuntimeExports.jsx("img",{src:e?.[l].image,className:"max-h-30 image-invert  brightness-0"})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex",children:[!t.preview&&(()=>{const q1=e?.[l]?.answer;if(!Array.isArray(q1)||q1.length===0||q1[0]==null)return null;const U1=Array.isArray(e?.[l]?.prefix)?e?.[l]?.prefix:[];if(q1.length===1){const M2=U1.length>=2?[String(U1[0]??""),String(U1[1]??"")]:Array.isArray(U1[0])?U1[0]:U1[0]??"";return jsxRuntimeExports.jsx("div",{className:Mh?"pointer-events-none opacity-50":"",children:jsxRuntimeExports.jsx(MathInput,{index:0,prefix:M2,setInputs:d,onEnter:s1})},0)}return q1.map((M2,x2)=>M2!=null&&M2!=="null"?jsxRuntimeExports.jsx("div",{className:Mh?"pointer-events-none opacity-50":"",children:jsxRuntimeExports.jsx(MathInput,{index:x2,prefix:Array.isArray(U1[x2])?U1[x2]:U1[x2]??"",setInputs:d,onEnter:s1})},x2):null)})(),Array.isArray(e?.[l]?.answer)&&e[l].answer.length>0&&e[l].answer[0]!=null&&jsxRuntimeExports.jsx("div",{id:"check-btn",className:`h-10 w-10 rounded-full color-bg-accent flex items-center
                justify-center ml-2 hover:opacity-90 ${Mh?"opacity-50 pointer-events-none":"cursor-pointer"}`,onClick:s1,title:"Check",children:jsxRuntimeExports.jsx(LuCheck,{strokeWidth:3,size:30,className:"color-txt-accent"})})]}),df&&!_h?jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsx("button",{className:`px-4 py-2 rounded-full border-2 border-r-4 border-b-4 color-shadow\r
                             hover:opacity-90`,onClick:E1,children:"Show Marking Scheme"})}):null]})]})]}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnim,loop:!0,autoplay:!0,className:"h-40 w-40"})}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),m==="thread"?jsxRuntimeExports.jsx("div",{className:"h-full w-5/12",children:jsxRuntimeExports.jsx(QThread,{questionId:s?.id??t.questions[t.position]?.id,part:l})}):null,m==="logtables"?jsxRuntimeExports.jsx("div",{className:"h-full w-5/12",children:jsxRuntimeExports.jsx(LogTables,{pgNumber:(parseInt(e?.[l].logtables)+0).toString()})}):null,m==="timer"?jsxRuntimeExports.jsx("div",{className:"h-full w-5/12",children:jsxRuntimeExports.jsx(Timer,{})}):null,"`",m==="marking_scheme"?jsxRuntimeExports.jsx("div",{className:"h-full w-5/12",children:jsxRuntimeExports.jsx(MarkingScheme$1,{year:"25",pgNumber:"1"})}):null,m==="decks"?jsxRuntimeExports.jsx("div",{className:"h-full w-5/12",children:jsxRuntimeExports.jsx(ViewDecks,{question:s?.id})}):null,m==="share"?jsxRuntimeExports.jsx("div",{className:"h-full w-5/12",children:jsxRuntimeExports.jsx(SharePanel,{})}):null]}),t.preview?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsxs("div",{className:"flex w-full justify-center items-center rounded-r-out h-auto z",children:[jsxRuntimeExports.jsxs("div",{className:`color-bg-grey-5 mx-4 w-10 h-10 flex items-center group relative \r
                justify-center rounded-full hover:scale-95 duration-250 transition-all`,children:[jsxRuntimeExports.jsx(LuArrowLeft,{strokeWidth:a1,size:32,className:"color-txt-sub"}),jsxRuntimeExports.jsx("span",{className:"tooltip",children:"previous"})]}),jsxRuntimeExports.jsxs("div",{className:"border-2 color-shadow color-bg-grey-5 flex my-2 px-3 rounded-full",children:[jsxRuntimeExports.jsxs("div",{className:m=="thread"?"sidebar-selected group":"sidebar group",onClick:()=>{g(q1=>q1!="thread"?"thread":"")},children:[jsxRuntimeExports.jsx(LuMessageSquareText,{strokeWidth:a1,size:mf,className:m=="thread"?"nav-icon-selected icon-anim":"nav-icon icon-anim",fill:m=="thread"?"currentColor":"none"}),jsxRuntimeExports.jsx("span",{className:"tooltip",children:"threads"})]}),jsxRuntimeExports.jsxs("div",{className:m=="logtables"?"sidebar-selected group":"sidebar group",onClick:()=>{g(q1=>q1!="logtables"?"logtables":"")},children:[jsxRuntimeExports.jsx(LuBookMarked,{strokeWidth:a1,size:mf,className:m=="logtables"?"nav-icon-selected  icon-anim":"nav-icon icon-anim",fill:m=="logtables"?"currentColor":"none"}),jsxRuntimeExports.jsx("span",{className:"tooltip",children:"logbook"})]}),t.deckmode?jsxRuntimeExports.jsxs("div",{className:m=="share"?"sidebar-selected  group":"sidebar group",onClick:()=>{g(q1=>q1!="share"?"share":"")},children:[jsxRuntimeExports.jsx(LuShare2,{strokeWidth:a1,size:mf,className:m=="share"?"nav-icon-selected  icon-anim":"nav-icon icon-anim",fill:m=="share"?"currentColor":"none"}),jsxRuntimeExports.jsx("span",{className:"tooltip",children:"share"})]}):jsxRuntimeExports.jsxs("div",{className:m=="decks"?"sidebar-selected  group":"sidebar  group",onClick:()=>{g(q1=>q1!="decks"?"decks":"")},children:[jsxRuntimeExports.jsx(TbCards,{strokeWidth:a1,size:mf,className:m=="decks"?"nav-icon-selected  icon-anim":"nav-icon icon-anim",fill:m=="decks"?"currentColor":"none"}),jsxRuntimeExports.jsx("span",{className:"tooltip",children:"decks"})]}),jsxRuntimeExports.jsxs("div",{className:m=="timer"?"sidebar-selected group":"sidebar group",onClick:()=>{g(q1=>q1!="timer"?"timer":"")},children:[jsxRuntimeExports.jsx(LuTimer,{strokeWidth:a1,size:mf,className:m=="timer"?"nav-icon-selected  icon-anim":"nav-icon icon-anim",fill:m=="timer"?"currentColor":"none"}),jsxRuntimeExports.jsx("span",{className:"tooltip",children:"Timer"})]}),jsxRuntimeExports.jsxs("div",{className:ve?"sidebar-selected group":"sidebar group",onClick:()=>{ve||He(!0)},children:[jsxRuntimeExports.jsx(LuFilter,{strokeWidth:a1,size:mf,className:ve?"nav-icon-selected  icon-anim":"nav-icon icon-anim",fill:ve?"currentColor":"none"}),jsxRuntimeExports.jsx("span",{className:"tooltip",children:"filter"}),jsxRuntimeExports.jsx(Filter,{viewFilter:ve,setViewFilter:He,setFilters:t.setFilters})]}),jsxRuntimeExports.jsxs("div",{className:A?"sidebar-selected group":"sidebar group",onClick:()=>{P(q1=>!q1)},children:[jsxRuntimeExports.jsx(LuSearch,{strokeWidth:a1,size:mf,className:A?"nav-icon-selected  icon-anim":"nav-icon icon-anim",fill:A?"currentColor":"none"}),jsxRuntimeExports.jsx("span",{className:"tooltip",children:"search"})]})]}),jsxRuntimeExports.jsxs("div",{className:`color-bg-grey-5 mx-4 w-10 h-10 flex items-center group relative \r
                justify-center rounded-full hover:scale-95 duration-250 transition-all`,onClick:()=>{if(d([]),(e?.length??0)>l+1){u(q1=>q1+1);return}t.nextQuestion()},children:[jsxRuntimeExports.jsx(LuArrowRight,{strokeWidth:a1,size:32,className:"color-txt-sub"}),jsxRuntimeExports.jsx("span",{className:"tooltip",children:"next"})]})]})]})}function Questions(){const[t,e]=reactExports.useState([]),[a,s]=reactExports.useState([]),[o,l]=reactExports.useState(0),{loadQuestions:u}=useQuestions({setQuestions:e,filters:a}),{id:c}=useParams();reactExports.useEffect(()=>{e([]),u()},[a]),reactExports.useEffect(()=>{c?u(c):u()},[]);const d=async()=>{o+1>=t.length&&await u(),l(m=>m+1)};return jsxRuntimeExports.jsxs("div",{className:"w-h-container flex-col justify-end items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex items-end justify-end"}),jsxRuntimeExports.jsx(Question,{questions:t,position:o,setPosition:l,nextQuestion:d,setFilters:s})]})}const FriendsList=()=>{const[t,e]=reactExports.useState([]),{user:a}=reactExports.useContext(UserContext),s=useNavigate();return reactExports.useEffect(()=>{(async()=>{if(e([]),!a.friends)return;const l=a.friends.map(async c=>{try{const m=(await getDoc(doc(db$1,"user-data",c))).data();if(!m)return null;const g=getStorage(),A=ref(g,m.picture),P=await getDownloadURL(A);return{uid:m.uid,username:m.username,picture:P}}catch(d){return console.log(d),null}}),u=(await Promise.all(l)).filter(c=>c!==null);e(u)})()},[a.friends]),jsxRuntimeExports.jsxs("div",{className:"friends-list",children:[jsxRuntimeExports.jsx("span",{className:"friends-text",children:"Friends"}),t.map(o=>jsxRuntimeExports.jsx(FriendsBarIcon,{icon:jsxRuntimeExports.jsx("img",{src:o.picture,alt:o.username,className:"friend-image"}),tooltip:o.username,username:o.username,onClick:()=>{s(`/viewProfile/${o.uid}`)}},o.uid))]})},FriendsBarIcon=({username:t,icon:e,onClick:a})=>jsxRuntimeExports.jsxs("div",{className:"friend-container",onClick:a,children:[e,jsxRuntimeExports.jsx("div",{className:"friend-username",children:t})]});function useNotifications(){const{user:t,setUser:e}=reactExports.useContext(UserContext),{fetchUser:a}=useFetch(),[s,o]=reactExports.useState();reactExports.useEffect(()=>{(async()=>{if(t.notifications){const m=t.notifications.map(async A=>{if(A.type=="friend-request"){const{username:P,picture:W}=await a(A.from),me=l(A.timestamp);return{...A,username:P,picture:W,timeago:me}}else if(A.type=="deck-share"){const{username:P,picture:W}=await a(A.from),me=l(A.timestamp);return{...A,username:P,picture:W,timeago:me,deckID:A.deckID}}return A}),g=await Promise.all(m);o(g)}else o([])})()},[t]);function l(d){if(!d||!(d instanceof Timestamp))return"just now";const m=new Date,g=d.toDate(),A=Math.floor((m.getTime()-g.getTime())/1e3);if(A<5)return"just now";if(A<60)return`${A}s`;const P=Math.floor(A/60);if(P<60)return`${P}m`;const W=Math.floor(P/60);return W<24?`${W}h`:`${Math.floor(W/24)}d`}const u=async d=>{try{const m=t.notifications.filter(g=>g.timestamp?.seconds!==d.timestamp?.seconds||g.timestamp?.nanoseconds!==d.timestamp?.nanoseconds);e(g=>({...g,notifications:m})),await updateDoc(doc(db$1,"user-data",t.uid),{notifications:m}),d.type=="friend-request"&&(e(g=>({...g,pendingFriends:g.pendingFriends?.filter(A=>A!==d.from)})),await updateDoc(doc(db$1,"user-data",t.uid),{pendingFriends:arrayRemove(d.from)}),await updateDoc(doc(db$1,"user-data",d.from),{pendingFriends:arrayRemove(t.uid)}))}catch(m){console.log(m)}};return{removeNotification:u,addFriend:async d=>{try{u(d),updateDoc(doc(db$1,"user-data",t.uid),{friends:arrayUnion(d.from)}),updateDoc(doc(db$1,"user-data",d.from),{friends:arrayUnion(t.uid)}),e(m=>({...m,friends:[...m.friends,d.from]}))}catch(m){console.log(m)}},notis:s,timeAgoFormatter:l}}const PostCard=({userImage:t,username:e,rank:a,time:s,content:o,replyCount:l,imageURL:u,onPressReplies:c})=>{const[d,m]=reactExports.useState(null),{timeAgoFormatter:g}=useNotifications(),A=g(s);return reactExports.useEffect(()=>{(async()=>{if(u)try{const W=ref(storage,u),me=await getDownloadURL(W);m(me)}catch(W){console.error("Error fetching image:",W),m(null)}else m(null)})()},[u]),jsxRuntimeExports.jsxs("div",{className:"post-card-main",children:[jsxRuntimeExports.jsxs("div",{className:"post-card-user",children:[jsxRuntimeExports.jsx("img",{src:t,alt:e,className:"post-card-user-img"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"post-card-user-name",children:e}),jsxRuntimeExports.jsxs("p",{className:"post-card-user-rank",children:["Level: ",a]})]}),jsxRuntimeExports.jsx("span",{className:"post-card-date",children:A})]}),jsxRuntimeExports.jsxs("div",{className:"post-card-content",children:[jsxRuntimeExports.jsx("p",{className:"post-card-content-txt",children:o}),d&&jsxRuntimeExports.jsx("img",{src:d,alt:"Post content",className:"post-card-content-img"})]}),jsxRuntimeExports.jsxs("div",{className:"post-card-footer",onClick:c,children:[jsxRuntimeExports.jsx(LuMessageCircleMore,{size:24,strokeWidth:1}),jsxRuntimeExports.jsx("span",{className:"post-card-footer-replies mx-0.5",children:l})]})]})};function useFriends(){const{user:t,setUser:e}=reactExports.useContext(UserContext),{fetchImage:a}=useFetch();return{getSearch:async l=>{try{const c=[t.uid,...t.friends.map(W=>W.uid),...t.pendingFriends].filter(Boolean).slice(0,10),d=query(collection(db$1,"user-data"),where("username",">=",l),where("username","<=",l+""),where("uid","not-in",c.length?c:[""]),limit(20),orderBy("rank","desc")),g=(await getDocs(d)).docs.map(async W=>{const me=W.data(),ve=await a(me.picture);return{...me,picture:ve,uid:W.id,sent:!1}});return(await Promise.all(g)).filter(W=>W!==null)}catch(u){console.log(u)}},sendFriendRequest:async l=>{try{const u=query(collection(db$1,"user-data"),where("username","==",l)),c=(await getDocs(u)).docs[0],d=c.ref;e(m=>({...m,pendingFriends:[...m.pendingFriends,c.data().uid]})),updateDoc(d,{notifications:arrayUnion({type:"friend-request",from:t.uid,timestamp:Timestamp.now()}),pendingFriends:arrayUnion(t.uid)}),updateDoc(doc(db$1,"user-data",t.uid),{pendingFriends:arrayUnion(c.data().uid)})}catch(u){console.log(u)}}}}function Notifications(){const{notis:t=[],addFriend:e,removeNotification:a}=useNotifications(),s=useNavigate();return!t||t.length===0?jsxRuntimeExports.jsxs("div",{className:"",children:[jsxRuntimeExports.jsx("p",{className:"txt-heading-colour m-4",children:"Your Notifications"}),jsxRuntimeExports.jsx("div",{className:"my-3 mx-4 px-4 pb-3 ",children:jsxRuntimeExports.jsx("p",{className:"color-txt-main",children:"All clear! No notifications"})})]}):jsxRuntimeExports.jsxs("div",{className:"",children:[jsxRuntimeExports.jsx("p",{className:"txt-heading-colour m-4",children:"Your Notifications"}),t.map(o=>{const l=o.id??o.from??Math.random().toString(36).slice(2);return o.type==="friend-request"?jsxRuntimeExports.jsxs("div",{className:"my-3 mx-4 px-4 pb-3 flex border-b-2 color-shadow",children:[jsxRuntimeExports.jsx("img",{src:o.picture,className:"w-8 h-8 rounded-full object-cover inline mx-2"}),jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"color-txt-main inline flex-1",children:`${o.username} sent you a friend request`}),jsxRuntimeExports.jsx("div",{className:"my-1",children:jsxRuntimeExports.jsx("p",{className:"blue-btn inline",onClick:()=>e(o),children:"Add Friend"})})]}),jsxRuntimeExports.jsxs("div",{className:"mx-2",children:[jsxRuntimeExports.jsx(LuX,{className:"inline hover:opacity-50 duration-200 transition-all m-1 color-txt-sub",onClick:()=>a(o)}),jsxRuntimeExports.jsx("p",{className:"txt-sub inline m-0.5",children:o.timeago})]})]})]},l):o.type==="deck-share"?jsxRuntimeExports.jsxs("div",{className:"my-3 mx-4 px-4 pb-3 flex border-b-2 color-shadow",children:[jsxRuntimeExports.jsx("img",{src:o.picture,className:"w-8 h-8 rounded-full object-cover inline mx-2"}),jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"color-txt-main inline flex-1",children:`${o.username} sent you a deck`}),jsxRuntimeExports.jsx("div",{className:"my-1",children:jsxRuntimeExports.jsx("p",{className:"blue-btn inline",onClick:()=>s(`/decks/${o.from}/${o.deckID}/preview`),children:"View Deck"})})]}),jsxRuntimeExports.jsxs("div",{className:"mx-2",children:[jsxRuntimeExports.jsx(LuX,{className:"inline hover:opacity-50 duration-200 transition-all m-1 color-txt-sub",onClick:()=>a(o)}),jsxRuntimeExports.jsx("p",{className:"txt-sub inline m-0.5",children:o.timeago})]})]})]},l):jsxRuntimeExports.jsxs("div",{className:"my-3 mx-4 px-4 pb-3 flex border-b-2 color-shadow",children:[jsxRuntimeExports.jsx("p",{className:"color-txt-main",children:"You have a new notification"}),jsxRuntimeExports.jsxs("div",{className:"mx-2",children:[jsxRuntimeExports.jsx(LuX,{className:"inline hover:opacity-50 duration-200 transition-all m-1 color-txt-sub",onClick:()=>a(o)}),jsxRuntimeExports.jsx("p",{className:"txt-sub inline m-0.5",children:o.timeago})]})]},l)})]})}function FriendsSearch(){const{getSearch:t,sendFriendRequest:e}=useFriends(),{user:a}=reactExports.useContext(UserContext),[s,o]=reactExports.useState(""),[l,u]=reactExports.useState([]),[c,d]=reactExports.useState(!1),[m,g]=reactExports.useState(!1),[A,P]=reactExports.useState(!1),W=reactExports.useRef(null);reactExports.useEffect(()=>{(async()=>{if(s.length>0){d(!0);const He=await t(s);u(He??[]),d(!1)}else u([])})()},[s]),reactExports.useEffect(()=>{function ve(He){const De=He.target;W.current&&!W.current.contains(De)&&(g(!1),P(!1))}return document.addEventListener("mousedown",ve),document.addEventListener("focusin",ve),()=>{document.removeEventListener("mousedown",ve),document.removeEventListener("focusin",ve)}},[]);const me=()=>{P(ve=>!ve),g(!1)};return jsxRuntimeExports.jsxs("div",{ref:W,className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center w-full color-bg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center txtbox w-full color-bg",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Add friends +",className:"w-full p-1 outline-none border-none",onChange:ve=>{o(ve.target.value)},onFocus:()=>{g(!0),P(!1)},value:s,"aria-label":"Search friends","aria-controls":"friends-search-dropdown","aria-expanded":m}),jsxRuntimeExports.jsx(LuSearch,{className:"color-txt-sub",size:24})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:me,"aria-label":"Notifications","aria-expanded":A,"aria-controls":"notifications-dropdown",className:"focus:outline-none relative",children:[a.notifications.length>0?jsxRuntimeExports.jsx("div",{className:"bg-red w-2 h-2 rounded-full absolute top-0 right-4"}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx(LuBell,{className:"color-txt-sub mx-4",strokeWidth:3,size:24})]})]}),jsxRuntimeExports.jsx("div",{id:"friends-search-dropdown",className:m?"search-box-shown":"search-box-hidden",children:s.length<=0?jsxRuntimeExports.jsxs("div",{className:"flex-col w-h-container",children:[jsxRuntimeExports.jsx(LuSearch,{size:64,strokeWidth:1,className:"color-txt-sub"}),jsxRuntimeExports.jsx("span",{className:"txt-heading color-txt-sub",children:"Search Friends"})]}):c?jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnim,loop:!0,autoplay:!0,className:"h-40 w-40"})}):jsxRuntimeExports.jsx("div",{children:l?.length>0?l.map(ve=>jsxRuntimeExports.jsxs("div",{className:"m-4 flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:ve.picture,alt:ve.username||"user",className:"w-10 h-10 rounded-full object-cover"}),jsxRuntimeExports.jsx("span",{className:"txt-bold",children:ve.username}),jsxRuntimeExports.jsx("button",{type:"button",className:"ml-auto blue-btn cursor-pointer",onClick:()=>{e(ve.username),o(""),g(!1)},children:"Send Request"})]},ve.uid??ve.username)):jsxRuntimeExports.jsx("div",{className:"w-h-container p-4",children:jsxRuntimeExports.jsx("p",{className:"txt-heading color-txt-sub",children:"No Results"})})})}),jsxRuntimeExports.jsx("div",{id:"notifications-dropdown",className:A?"search-box-shown":"search-box-hidden",children:jsxRuntimeExports.jsx(Notifications,{})})]})}function Social$1(){const{user:t,setUser:e}=reactExports.useContext(UserContext),[a,s]=reactExports.useState([]),[o,l]=reactExports.useState(""),[u,c]=reactExports.useState([]),[d,m]=reactExports.useState(null),[g,A]=reactExports.useState(null),[P,W]=reactExports.useState("practice");console.log(u,P);const me=useNavigate(),ve=(Vc,So)=>{W(Vc),me(`/${Vc}`,So)},He=async()=>{if(!(!o.trim()&&!d))try{let Vc=null;if(d){const So=getStorage(),Do=`user-uploads/${t.uid}/${Date.now()}-${d.name}`,eh=ref(So,Do);await uploadBytes(eh,d),Vc=await getDownloadURL(eh)}await addDoc(collection(db$1,"posts"),{userId:t.uid,content:o.trim(),timestamp:serverTimestamp(),imageUrl:Vc,likes:0,isFlashcard:!1}),l(""),m(null),A(null),console.log("Post added!")}catch(Vc){console.error("Error sending post:",Vc)}};reactExports.useEffect(()=>{(async()=>{const So=query(collection(db$1,"posts"),orderBy("timestamp","desc")),Do=onSnapshot(So,async eh=>{const Ko=await Promise.all(eh.docs.map(async Ge=>{const An=Ge.data(),wt=An.userId,Bs=Ge.id,yh=query(collection(db$1,"user-data"),where("uid","==",wt)),df=await getDocs(yh);let Fc="Unknown",_h=null,qc=0;if(!df.empty){const mf=df.docs[0].data();Fc=mf.username,qc=mf.rank;try{const a1=getStorage(),s1=ref(a1,mf.picture);_h=await getDownloadURL(s1)}catch(a1){console.warn("Image error:",a1)}}let Mh=await getDocs(collection(db$1,"posts",Bs,"replies")),cf=Mh.size;return An.flashcardId&&(Mh=await getDocs(collection(db$1,"certchamps-questions",An.flashcardId,"replies",An.replyId,"replies")),cf=Mh.size),{id:Ge.id,content:An.content,timestamp:An.timestamp,username:Fc,rank:qc,userImage:_h,imageURL:An.imageUrl,replyCount:cf,isFlashcard:An.isFlashcard,flashcardId:An.flashcardId,replyId:An.replyId}}));s(Ko)});return()=>Do()})()},[]),reactExports.useEffect(()=>{(async()=>{c([]),console.log("debug"),t.friends.forEach(async So=>{try{const Do=(await getDoc(doc(db$1,"user-data",So))).data(),eh=getStorage(),Ko=ref(eh,Do?.picture),Ge=await getDownloadURL(Ko);c(An=>[...An,{username:Do?.username,picture:Ge,uid:Do?.uid}])}catch(Do){console.log(Do)}})})()},[]),reactExports.useEffect(()=>{const Vc=onSnapshot(doc(db$1,"user-data",t.uid),So=>{const Do=So.data();Do&&e(eh=>({...eh,friends:Do.friends??[],notifications:Do.notifications??[]}))},So=>{console.error("Firestore listener error:",So)});return()=>Vc()},[]);const De=["Confess your math sins.","Type like no ones judging.","Unleash your inner genius!!!","Got wisdom? Spill it.","Your keyboard misses you.","Type away, genius!","Your thoughts matter here.","Share your brilliance.","Type it out, lets see!","Got a thought? Type it!","Your keyboard is waiting.","Type like you mean it!","Let your thoughts flow.","Type it, were listening.","Your keyboard is your canvas.","Type your way to greatness.","Tell them how you love maths..."],[Xe,qe]=reactExports.useState("");reactExports.useEffect(()=>{const Vc=Math.floor(Math.random()*De.length);qe(De[Vc]);const So=onSnapshot(doc(db$1,"user-data",t.uid),Do=>{const eh=Do.data({serverTimestamps:"estimate"});eh&&e(Ko=>({...Ko,friends:eh.friends??[],notifications:eh.notifications??[]}))},Do=>{console.error("Firestore listener error:",Do)});return()=>So()},[]);const Rs=()=>{l("")};return jsxRuntimeExports.jsxs("div",{className:"flex w-full h-full",children:[jsxRuntimeExports.jsx("div",{className:"w-2/3 h-full overflow-y-scroll",children:jsxRuntimeExports.jsxs("div",{className:"compose-post-container",children:[jsxRuntimeExports.jsxs("div",{className:"compose-post-text-wrapper",children:[jsxRuntimeExports.jsx("img",{src:t.picture,className:"compose-post-img"}),jsxRuntimeExports.jsx("textarea",{value:o,onChange:Vc=>l(Vc.target.value),placeholder:Xe,className:"compose-post-text-box"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center gap-2 mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("label",{className:"color-txt-sub mx-2 hover:opacity-80 cursor-pointer",children:[jsxRuntimeExports.jsx(LuImage,{size:32,strokeWidth:1.5}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Vc=>{const So=Vc.target.files?.[0];So&&(m(So),A(URL.createObjectURL(So)))}})]}),g&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("img",{src:g,alt:"preview",className:"w-16 h-16 rounded object-cover border"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{m(null),A(null)},className:"px-2 py-1 rounded bg-red-500 text-white",children:"Remove"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Rs,className:"compose-post-clear-button",children:"Clear"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:He,disabled:!o.trim(),className:"cursor-target compose-post-send-button",children:"Post"})]})]}),jsxRuntimeExports.jsx("div",{className:"my-4",children:jsxRuntimeExports.jsx("div",{className:"mx-auto w-full space-y-4",children:a.map(Vc=>jsxRuntimeExports.jsx(PostCard,{rank:Vc.rank,content:Vc.content,userImage:Vc.userImage,username:Vc.username,time:Vc.timestamp,replyCount:Vc.replyCount,imageURL:Vc.imageURL,onPressReplies:()=>{Vc.isFlashcard?ve(`post/${Vc.id}`):ve(`post/${Vc.id}`)}},Vc.id))})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 h-full flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"p-3",children:jsxRuntimeExports.jsx(FriendsSearch,{})}),jsxRuntimeExports.jsx(FriendsList,{})]}),jsxRuntimeExports.jsxs("div",{className:"h-16 w-full p-4 shrink-0 flex items-center hover:opacity-90",children:[jsxRuntimeExports.jsxs("a",{href:"https://discord.gg/E6N8ZTugUp",target:"_blank",className:`inline-flex items-center justify-center\r
                                    px-4 py-2 rounded-lg cursor-pointer\r
                                    text-white font-medium\r
                                    hover:opacity-90 active:opacity-80\r
                                    transition-opacity`,style:{backgroundColor:"#5865F2"},children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),"Join Discord"]}),jsxRuntimeExports.jsx("p",{className:"txt mx-2",children:"Join our discord to report bugs or suggest features!"})]})]})]})}function Social(){const[t,e]=reactExports.useState(""),a=reactExports.useRef(null);reactExports.useEffect(()=>{a.current&&(a.current.value=t)},[t]);const[s,o]=reactExports.useState(0),[l,u]=reactExports.useState(""),c=["In $\\triangle PQR$, $P(0, 0)$, $Q(8, 0)$, and $R(4, h)$. If the orthocentre is at $(4, 2)$, find $h$.","A point $P(x,y)$ moves such that its distance to line $3x - 4y + 1 = 0$ is twice its distance to line $6x - 8y - 3 = 0$. Show that $P$ lies on one of two lines and find their equations.","In a right triangle, the lengths of the legs are $a$ and $b$. If the area is $A$, find the relationship between $A$, $a$, and $b$.","Line $l: kx - 3y + 4 = 0$ makes angle $\\theta$ with $3x - y + 2 = 0$ where $\\tan\\theta = \\frac{1}{2}$. Find $k$."];return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Social"}),jsxRuntimeExports.jsx("p",{className:"txt-sub italic",children:"#Tags for the questions"}),jsxRuntimeExports.jsx("p",{className:"txt",children:"Wow so much space I actually dont know what to do with myself here"}),jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox w-full max-w-xs",placeholder:"Answer"}),jsxRuntimeExports.jsx("math-field",{ref:a,onInput:d=>e(d.target.value),style:{display:"block",minHeight:"60px",padding:"8px",backgroundColor:"#f0f0f0",border:"2px solid #888",borderRadius:"8px",fontSize:"18px",color:"black"},children:t}),jsxRuntimeExports.jsxs("p",{children:["Value: ",t]}),jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox w-full max-w-xs",placeholder:"Answer",onChange:d=>u(d.target.value)}),jsxRuntimeExports.jsx(RenderMath,{text:l,className:"txt"}),jsxRuntimeExports.jsx(RenderMath,{text:c[s],className:"txt"}),jsxRuntimeExports.jsx("p",{className:"plain-btn m-4 cursor-pointer",onClick:()=>o((s+1)%c.length),children:"Next Questions"})]})}function Navbar(){const{user:a}=reactExports.useContext(UserContext),[s,o]=reactExports.useState("practice"),l=useNavigate(),u=c=>{o(c),l(`/${c}`)};return jsxRuntimeExports.jsxs("div",{className:"container group",children:[jsxRuntimeExports.jsxs("div",{className:"user-container",children:[jsxRuntimeExports.jsx("img",{src:a.picture,className:"user-img",onClick:()=>{l(`/viewProfile/${a.uid}`)}}),jsxRuntimeExports.jsxs("div",{className:"user-info ",children:[jsxRuntimeExports.jsx("p",{className:"nav-txt !txt-heading-colour !color-txt-accent",children:a.username}),jsxRuntimeExports.jsxs("p",{className:"nav-txt !txt-sub !color-txt-sub text-nowrap",children:["Rank: ",a.rank]})]}),jsxRuntimeExports.jsx(LuSettings,{className:"nav-txt",id:"settings",size:24,onClick:()=>{u("user/settings")}})]}),jsxRuntimeExports.jsxs("div",{className:s=="practice"?"nav-item-selected":"nav-item",onClick:()=>{u("practice")},children:[jsxRuntimeExports.jsx(LuPencil,{strokeWidth:2,size:32,className:s=="practice"?"nav-icon-selected":"nav-icon",fill:s=="practice"?"currentColor":"none"}),jsxRuntimeExports.jsx("p",{className:s=="practice"?"nav-txt-selected":"nav-txt",children:"Practice"})]}),jsxRuntimeExports.jsxs("div",{className:s=="social/social"?"nav-item-selected":"nav-item",onClick:()=>{u("social/social")},children:[jsxRuntimeExports.jsx(LuUsers,{strokeWidth:2,size:32,className:s=="social/social"?"nav-icon-selected":"nav-icon",fill:s=="social/social"?"currentColor":"none"}),jsxRuntimeExports.jsx("p",{className:s=="social/social"?"nav-txt-selected":"nav-txt",children:"Social"})]})]})}function useReplies(t){const{user:e}=reactExports.useContext(UserContext),[a,s]=reactExports.useState(null),[o,l]=reactExports.useState([]),[u,c]=reactExports.useState(""),[d,m]=reactExports.useState(null),[g,A]=reactExports.useState(null),[P,W]=reactExports.useState(null),[me,ve]=reactExports.useState(null),He=["Confess your math sins.","Type like no ones judging.","Unleash your inner genius!!!","Got wisdom? Spill it.","Your keyboard misses you.","Type away, genius!","Your thoughts matter here.","Share your brilliance.","Type it out, lets see!","Got a thought? Type it!","Your keyboard is waiting.","Type like you mean it!","Let your thoughts flow.","Type it, were listening.","Your keyboard is your canvas.","Type your way to greatness.","Tell them how you love maths..."],[De,Xe]=reactExports.useState("");reactExports.useEffect(()=>{const Ko=Math.floor(Math.random()*He.length);Xe(He[Ko])},[]);const qe=async Ko=>{const Ge=query(collection(db$1,"user-data"),where("uid","==",Ko)),An=await getDocs(Ge);if(An.empty)return{username:"Unknown",userImage:null};const wt=An.docs[0].data();let Bs=null;try{wt.picture&&(Bs=await getDownloadURL(ref(storage,wt.picture)))}catch{Bs=null}return{username:wt.username??"Unknown",userImage:Bs}},Rs=async Ko=>{if(!Ko)return null;if(Ko.startsWith("http"))return Ko;try{return await getDownloadURL(ref(storage,Ko))}catch{return null}};reactExports.useEffect(()=>{(async()=>{if(!t)return;const Ge=doc(db$1,"posts",t),An=await getDoc(Ge);if(!An.exists())return;const wt=An.data(),Bs=await qe(wt.userId),yh=await Rs(wt.imageUrl);s({id:An.id,userId:wt.userId,content:wt.content??"",timestamp:wt.timestamp,username:Bs.username,userImage:Bs.userImage,imageUrl:yh,isFlashcard:!!wt.isFlashcard,flashcardId:wt.flashcardId,replyId:wt.replyId})})()},[t]),reactExports.useEffect(()=>{(async()=>{if(!a?.isFlashcard||!a.flashcardId||!a.replyId){W(null),ve(null);return}try{const An=doc(db$1,"certchamps-questions",a.flashcardId,"replies",a.replyId),wt=await getDoc(An);if(wt.exists()){const Bs=wt.data(),yh=await qe(Bs.userId);W(yh)}}catch{W(null)}const Ge=await Do(a.flashcardId);ve(Ge)})()},[a?.isFlashcard,a?.flashcardId,a?.replyId]),reactExports.useEffect(()=>{if(!t||a===null)return;let Ko=()=>{};return(async()=>{if(a?.isFlashcard&&a.flashcardId&&a.replyId){const An=query(collection(db$1,"certchamps-questions",a.flashcardId,"replies",a.replyId,"replies"),orderBy("timestamp","asc"));Ko=onSnapshot(An,async wt=>{const Bs=await Promise.all(wt.docs.map(async yh=>{const df=yh.data(),Fc=await qe(df.userId),_h=await Rs(df.imageUrl);return{id:yh.id,content:df.content??"",timestamp:df.timestamp,username:Fc.username,userImage:Fc.userImage,imageUrl:_h}}));l(Bs)})}else{const An=query(collection(db$1,"posts",t,"replies"),orderBy("timestamp","desc"));Ko=onSnapshot(An,async wt=>{const Bs=await Promise.all(wt.docs.map(async yh=>{const df=yh.data(),Fc=await qe(df.userId),_h=await Rs(df.imageUrl);return{id:yh.id,content:df.content??"",timestamp:df.timestamp,username:Fc.username,userImage:Fc.userImage,imageUrl:_h}}));l(Bs)})}})(),()=>Ko()},[t,a]);const Vc=async Ko=>{const Ge=`user-uploads/${e.uid}/${Date.now()}-${Ko.name}`,An=ref(storage,Ge);return await uploadBytes(An,Ko),await getDownloadURL(An)},So=async()=>{const Ko=u.trim();if(!Ko&&!d)return;let Ge=null;d&&(Ge=await Vc(d));const An={content:Ko,timestamp:serverTimestamp(),userId:e.uid};Ge&&(An.imageUrl=Ge),a?.isFlashcard&&a.flashcardId&&a.replyId?await addDoc(collection(db$1,"certchamps-questions",a.flashcardId,"replies",a.replyId,"replies"),An):t&&await addDoc(collection(db$1,"posts",t,"replies"),An),c(""),m(null),A(null)},Do=async Ko=>{const Ge=collection(db$1,"certchamps-questions",Ko,"content"),wt=(await getDocs(Ge)).docs.map(yh=>({id:yh.id,question:yh.data().question??"",image:yh.data().image??"",rendered:yh.data().rendered??"",answer:Array.isArray(yh.data().answer)?yh.data().answer:[]})).sort((yh,df)=>yh.id.localeCompare(df.id));return await Promise.all(wt.map(async yh=>({...yh,image:await Rs(yh.image)??"",rendered:await Rs(yh.rendered)??""})))};return{post:a,replies:o,newReply:u,setNewReply:c,attachPreview:g,setAttach:m,setAttachPreview:A,onPickFile:Ko=>{const Ge=Ko.target.files?.[0];Ge&&(m(Ge),A(URL.createObjectURL(Ge)))},handleSendReply:So,fcAuthor:P,question:me,randomPlaceholder:De}}function Replies(){const{id:t}=useParams(),{timeAgoFormatter:e}=useNotifications(),{toRoman:a}=useQuestions(),s=useNavigate(),{post:o,replies:l,newReply:u,setNewReply:c,attachPreview:d,setAttach:m,setAttachPreview:g,onPickFile:A,handleSendReply:P,fcAuthor:W,randomPlaceholder:me,question:ve}=useReplies(t??""),He=["Is no one locked in?...","It's quiet here...","Maybe go make some friends lol...","Is everyone AFK?...","Maybe replying was the friends we made along the way...","Chat is this thread on airplane mode?...","Damn CertChamps needs more users...","Does this thread need a passcode to reply or something?...","Is this thread my dating life?...","Even my calculator gets more use than this thread...","Maybe just ask your teacher...","Remember when people used to talk?...","CONGRATULATIONS you found the deadest thread on the platform!!!..."],[De,Xe]=reactExports.useState("");return console.log(W),reactExports.useEffect(()=>{const qe=Math.floor(Math.random()*He.length);Xe(He[qe])},[]),jsxRuntimeExports.jsxs("div",{className:"w-h-container p-4 pb-0 items-start",children:[jsxRuntimeExports.jsxs("div",{className:"w-full h-full overflow-y-scroll",children:[o&&jsxRuntimeExports.jsxs("div",{className:"post-card-main ",children:[jsxRuntimeExports.jsxs("div",{className:"post-card-user",children:[o.userImage&&jsxRuntimeExports.jsx("img",{src:o.userImage,alt:o.username,className:"post-card-user-img"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{className:"post-card-user-name",children:o.username})}),jsxRuntimeExports.jsx("span",{className:"post-card-date",children:e(o.timestamp)})]}),jsxRuntimeExports.jsxs("div",{className:"post-card-content",children:[jsxRuntimeExports.jsx("p",{className:"post-card-content-txt",children:o.content}),!o.isFlashcard&&o.imageUrl&&jsxRuntimeExports.jsx("img",{src:o.imageUrl,alt:"Post content",className:"w-full max-w-lg rounded-lg object-cover mt-2"})]})]}),jsxRuntimeExports.jsxs("div",{className:"compose-post-container py-4! px-0!  z-10",children:[jsxRuntimeExports.jsx("div",{className:"compose-post-text-wrapper min-h-15! h-16!",children:jsxRuntimeExports.jsx("textarea",{value:u,onChange:qe=>c(qe.target.value),placeholder:me,className:"compose-post-text-box"})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center gap-2 mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("label",{className:"color-txt-sub mx-2 hover:opacity-80 cursor-pointer",children:[jsxRuntimeExports.jsx(LuImage,{size:32,strokeWidth:1.5}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:A})]}),d&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("img",{src:d,alt:"preview",className:"w-16 h-16 rounded object-cover border"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{m(null),g(null)},className:"px-2 py-1 rounded bg-red-500 text-white",children:"Remove"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{c(""),m(null),g(null)},className:"compose-post-clear-button",children:"Clear"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:P,disabled:!u.trim()&&!d,className:"cursor-target compose-post-send-button",children:"Reply"})]})]})]}),jsxRuntimeExports.jsx("h2",{className:"txt-heading color-txt-sub mb-2",children:"Replies"}),l.length>0?l.map(qe=>jsxRuntimeExports.jsxs("div",{className:"reply-card-main py-1! ",children:[jsxRuntimeExports.jsxs("div",{className:"post-card-user",children:[qe.userImage&&jsxRuntimeExports.jsx("img",{src:qe.userImage,alt:qe.username,className:"post-card-user-img"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{className:"post-card-user-name",children:qe.username})}),jsxRuntimeExports.jsx("span",{className:"post-card-date",children:e(qe.timestamp)})]}),jsxRuntimeExports.jsxs("div",{className:"reply-card-content",children:[jsxRuntimeExports.jsx("p",{className:"post-card-content-txt",children:qe.content}),qe.imageUrl&&jsxRuntimeExports.jsx("img",{src:qe.imageUrl,alt:"Reply attachment",className:"w-full max-w-md rounded-lg object-cover mt-2"})]})]},qe.id)):jsxRuntimeExports.jsx("p",{className:"ml-2 txt-sub",children:De})]}),o?.isFlashcard&&jsxRuntimeExports.jsxs("div",{className:"mx-4",children:[jsxRuntimeExports.jsx("div",{className:`mx-auto w-[90%] color-bg-accent txt-heading-colour text-center py-1.5 rounded-out mb-6\r
                hover:scale-95 duration-200 cursor-pointer`,onClick:()=>{s(`/practice/${o.flashcardId}`)},children:jsxRuntimeExports.jsx("p",{children:"Go To Question"})}),Array.isArray(ve)&&ve.length>0&&ve.map((qe,Rs)=>jsxRuntimeExports.jsxs("div",{className:"mb-2 mx-4",children:[ve.length>1?jsxRuntimeExports.jsxs("p",{className:"font-semibold txt inline",children:[a(Rs+1),")  "]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx(RenderMath,{text:qe.question,className:"txt inline"}),qe.image&&jsxRuntimeExports.jsx("img",{src:qe.image,alt:`Question part ${Rs+1}`,className:"w-full max-w-lg rounded-lg object-cover"}),jsxRuntimeExports.jsx("div",{className:" h-0 border-1 color-shadow my-6"})]},qe.id))]})]})}var extendStatics=function(t,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])},extendStatics(t,e)};function __extends(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics(t,e);function a(){this.constructor=t}t.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}var __assign=function(){return __assign=Object.assign||function(e){for(var a,s=1,o=arguments.length;s<o;s++){a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},__assign.apply(this,arguments)};typeof SuppressedError=="function"&&SuppressedError;var UserAgent_DEPRECATED_1,hasRequiredUserAgent_DEPRECATED;function requireUserAgent_DEPRECATED(){if(hasRequiredUserAgent_DEPRECATED)return UserAgent_DEPRECATED_1;hasRequiredUserAgent_DEPRECATED=1;var t=!1,e,a,s,o,l,u,c,d,m,g,A,P,W,me,ve;function He(){if(!t){t=!0;var Xe=navigator.userAgent,qe=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(Xe),Rs=/(Mac OS X)|(Windows)|(Linux)/.exec(Xe);if(P=/\b(iPhone|iP[ao]d)/.exec(Xe),W=/\b(iP[ao]d)/.exec(Xe),g=/Android/i.exec(Xe),me=/FBAN\/\w+;/i.exec(Xe),ve=/Mobile/i.exec(Xe),A=!!/Win64/.exec(Xe),qe){e=qe[1]?parseFloat(qe[1]):qe[5]?parseFloat(qe[5]):NaN,e&&document&&document.documentMode&&(e=document.documentMode);var Vc=/(?:Trident\/(\d+.\d+))/.exec(Xe);u=Vc?parseFloat(Vc[1])+4:e,a=qe[2]?parseFloat(qe[2]):NaN,s=qe[3]?parseFloat(qe[3]):NaN,o=qe[4]?parseFloat(qe[4]):NaN,o?(qe=/(?:Chrome\/(\d+\.\d+))/.exec(Xe),l=qe&&qe[1]?parseFloat(qe[1]):NaN):l=NaN}else e=a=s=l=o=NaN;if(Rs){if(Rs[1]){var So=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(Xe);c=So?parseFloat(So[1].replace("_",".")):!0}else c=!1;d=!!Rs[2],m=!!Rs[3]}else c=d=m=!1}}var De={ie:function(){return He()||e},ieCompatibilityMode:function(){return He()||u>e},ie64:function(){return De.ie()&&A},firefox:function(){return He()||a},opera:function(){return He()||s},webkit:function(){return He()||o},safari:function(){return De.webkit()},chrome:function(){return He()||l},windows:function(){return He()||d},osx:function(){return He()||c},linux:function(){return He()||m},iphone:function(){return He()||P},mobile:function(){return He()||P||W||g||ve},nativeApp:function(){return He()||me},android:function(){return He()||g},ipad:function(){return He()||W}};return UserAgent_DEPRECATED_1=De,UserAgent_DEPRECATED_1}var ExecutionEnvironment_1,hasRequiredExecutionEnvironment;function requireExecutionEnvironment(){if(hasRequiredExecutionEnvironment)return ExecutionEnvironment_1;hasRequiredExecutionEnvironment=1;var t=!!(typeof window<"u"&&window.document&&window.document.createElement),e={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};return ExecutionEnvironment_1=e,ExecutionEnvironment_1}var isEventSupported_1,hasRequiredIsEventSupported;function requireIsEventSupported(){if(hasRequiredIsEventSupported)return isEventSupported_1;hasRequiredIsEventSupported=1;var t=requireExecutionEnvironment(),e;t.canUseDOM&&(e=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(s,o){if(!t.canUseDOM||o&&!("addEventListener"in document))return!1;var l="on"+s,u=l in document;if(!u){var c=document.createElement("div");c.setAttribute(l,"return;"),u=typeof c[l]=="function"}return!u&&e&&s==="wheel"&&(u=document.implementation.hasFeature("Events.wheel","3.0")),u}return isEventSupported_1=a,isEventSupported_1}var normalizeWheel_1,hasRequiredNormalizeWheel$1;function requireNormalizeWheel$1(){if(hasRequiredNormalizeWheel$1)return normalizeWheel_1;hasRequiredNormalizeWheel$1=1;var t=requireUserAgent_DEPRECATED(),e=requireIsEventSupported(),a=10,s=40,o=800;function l(u){var c=0,d=0,m=0,g=0;return"detail"in u&&(d=u.detail),"wheelDelta"in u&&(d=-u.wheelDelta/120),"wheelDeltaY"in u&&(d=-u.wheelDeltaY/120),"wheelDeltaX"in u&&(c=-u.wheelDeltaX/120),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(c=d,d=0),m=c*a,g=d*a,"deltaY"in u&&(g=u.deltaY),"deltaX"in u&&(m=u.deltaX),(m||g)&&u.deltaMode&&(u.deltaMode==1?(m*=s,g*=s):(m*=o,g*=o)),m&&!c&&(c=m<1?-1:1),g&&!d&&(d=g<1?-1:1),{spinX:c,spinY:d,pixelX:m,pixelY:g}}return l.getEventType=function(){return t.firefox()?"DOMMouseScroll":e("wheel")?"wheel":"mousewheel"},normalizeWheel_1=l,normalizeWheel_1}var normalizeWheel$1,hasRequiredNormalizeWheel;function requireNormalizeWheel(){return hasRequiredNormalizeWheel||(hasRequiredNormalizeWheel=1,normalizeWheel$1=requireNormalizeWheel$1()),normalizeWheel$1}var normalizeWheelExports=requireNormalizeWheel();const normalizeWheel=getDefaultExportFromCjs(normalizeWheelExports);function getCropSize(t,e,a,s,o,l){l===void 0&&(l=0);var u=rotateSize(t,e,l),c=u.width,d=u.height,m=Math.min(c,a),g=Math.min(d,s);return m>g*o?{width:g*o,height:g}:{width:m,height:m/o}}function getMediaZoom(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function restrictPosition(t,e,a,s,o){o===void 0&&(o=0);var l=rotateSize(e.width,e.height,o),u=l.width,c=l.height;return{x:restrictPositionCoord(t.x,u,a.width,s),y:restrictPositionCoord(t.y,c,a.height,s)}}function restrictPositionCoord(t,e,a,s){var o=e*s/2-a/2;return clamp(t,-o,o)}function getDistanceBetweenPoints(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function getRotationBetweenPoints(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function computeCroppedArea(t,e,a,s,o,l,u){l===void 0&&(l=0),u===void 0&&(u=!0);var c=u?limitArea:noOp,d=rotateSize(e.width,e.height,l),m=rotateSize(e.naturalWidth,e.naturalHeight,l),g={x:c(100,((d.width-a.width/o)/2-t.x/o)/d.width*100),y:c(100,((d.height-a.height/o)/2-t.y/o)/d.height*100),width:c(100,a.width/d.width*100/o),height:c(100,a.height/d.height*100/o)},A=Math.round(c(m.width,g.width*m.width/100)),P=Math.round(c(m.height,g.height*m.height/100)),W=m.width>=m.height*s,me=W?{width:Math.round(P*s),height:P}:{width:A,height:Math.round(A/s)},ve=__assign(__assign({},me),{x:Math.round(c(m.width-me.width,g.x*m.width/100)),y:Math.round(c(m.height-me.height,g.y*m.height/100))});return{croppedAreaPercentages:g,croppedAreaPixels:ve}}function limitArea(t,e){return Math.min(t,Math.max(0,e))}function noOp(t,e){return e}function getInitialCropFromCroppedAreaPercentages(t,e,a,s,o,l){var u=rotateSize(e.width,e.height,a),c=clamp(s.width/u.width*(100/t.width),o,l),d={x:c*u.width/2-s.width/2-u.width*c*(t.x/100),y:c*u.height/2-s.height/2-u.height*c*(t.y/100)};return{crop:d,zoom:c}}function getZoomFromCroppedAreaPixels(t,e,a){var s=getMediaZoom(e);return a.height>a.width?a.height/(t.height*s):a.width/(t.width*s)}function getInitialCropFromCroppedAreaPixels(t,e,a,s,o,l){a===void 0&&(a=0);var u=rotateSize(e.naturalWidth,e.naturalHeight,a),c=clamp(getZoomFromCroppedAreaPixels(t,e,s),o,l),d=s.height>s.width?s.height/t.height:s.width/t.width,m={x:((u.width-t.width)/2-t.x)*d,y:((u.height-t.height)/2-t.y)*d};return{crop:m,zoom:c}}function getCenter(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function getRadianAngle(t){return t*Math.PI/180}function rotateSize(t,e,a){var s=getRadianAngle(a);return{width:Math.abs(Math.cos(s)*t)+Math.abs(Math.sin(s)*e),height:Math.abs(Math.sin(s)*t)+Math.abs(Math.cos(s)*e)}}function clamp(t,e,a){return Math.min(Math.max(t,e),a)}function classNames(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var css_248z=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,MIN_ZOOM=1,MAX_ZOOM=3,KEYBOARD_STEP=1,Cropper=function(t){__extends(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.cropperRef=reactExports.createRef(),a.imageRef=reactExports.createRef(),a.videoRef=reactExports.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var s=!0;a.resizeObserver=new window.ResizeObserver(function(o){if(s){s=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(s){return s.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturechange",a.onGestureChange),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var s=a.computeSizes();s&&(a.emitCropData(),a.setInitialCrop(s)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(s){if(a.props.initialCroppedAreaPercentages){var o=getInitialCropFromCroppedAreaPercentages(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,s,a.props.minZoom,a.props.maxZoom),l=o.crop,u=o.zoom;a.props.onCropChange(l),a.props.onZoomChange&&a.props.onZoomChange(u)}else if(a.props.initialCroppedAreaPixels){var c=getInitialCropFromCroppedAreaPixels(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,s,a.props.minZoom,a.props.maxZoom),l=c.crop,u=c.zoom;a.props.onCropChange(l),a.props.onZoomChange&&a.props.onZoomChange(u)}},a.computeSizes=function(){var s,o,l,u,c,d,m=a.imageRef.current||a.videoRef.current;if(m&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var g=a.containerRect.width/a.containerRect.height,A=((s=a.imageRef.current)===null||s===void 0?void 0:s.naturalWidth)||((o=a.videoRef.current)===null||o===void 0?void 0:o.videoWidth)||0,P=((l=a.imageRef.current)===null||l===void 0?void 0:l.naturalHeight)||((u=a.videoRef.current)===null||u===void 0?void 0:u.videoHeight)||0,W=m.offsetWidth<A||m.offsetHeight<P,me=A/P,ve=void 0;if(W)switch(a.state.mediaObjectFit){default:case"contain":ve=g>me?{width:a.containerRect.height*me,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/me};break;case"horizontal-cover":ve={width:a.containerRect.width,height:a.containerRect.width/me};break;case"vertical-cover":ve={width:a.containerRect.height*me,height:a.containerRect.height};break}else ve={width:m.offsetWidth,height:m.offsetHeight};a.mediaSize=__assign(__assign({},ve),{naturalWidth:A,naturalHeight:P}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var He=a.props.cropSize?a.props.cropSize:getCropSize(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((c=a.state.cropSize)===null||c===void 0?void 0:c.height)!==He.height||((d=a.state.cropSize)===null||d===void 0?void 0:d.width)!==He.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(He),a.setState({cropSize:He},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(He),He}},a.saveContainerPosition=function(){if(a.containerRef){var s=a.containerRef.getBoundingClientRect();a.containerPosition={x:s.left,y:s.top}}},a.onMouseDown=function(s){a.currentDoc&&(s.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(e.getMousePoint(s)))},a.onMouseMove=function(s){return a.onDrag(e.getMousePoint(s))},a.onScroll=function(s){a.currentDoc&&(s.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(s){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(s))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),s.touches.length===2?a.onPinchStart(s):s.touches.length===1&&a.onDragStart(e.getTouchPoint(s.touches[0]))))},a.onTouchMove=function(s){s.preventDefault(),s.touches.length===2?a.onPinchMove(s):s.touches.length===1&&a.onDrag(e.getTouchPoint(s.touches[0]))},a.onGestureStart=function(s){a.currentDoc&&(s.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureChange),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureChange=function(s){if(s.preventDefault(),!a.isTouching){var o=e.getMousePoint(s),l=a.gestureZoomStart-1+s.scale;if(a.setNewZoom(l,o,{shouldUpdatePosition:!0}),a.props.onRotationChange){var u=a.gestureRotationStart+s.rotation;a.props.onRotationChange(u)}}},a.onGestureEnd=function(s){a.cleanEvents()},a.onDragStart=function(s){var o,l,u=s.x,c=s.y;a.dragStartPosition={x:u,y:c},a.dragStartCrop=__assign({},a.props.crop),(l=(o=a.props).onInteractionStart)===null||l===void 0||l.call(o)},a.onDrag=function(s){var o=s.x,l=s.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(o===void 0||l===void 0)){var u=o-a.dragStartPosition.x,c=l-a.dragStartPosition.y,d={x:a.dragStartCrop.x+u,y:a.dragStartCrop.y+c},m=a.props.restrictPosition?restrictPosition(d,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):d;a.props.onCropChange(m)}}))},a.onDragStopped=function(){var s,o;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(o=(s=a.props).onInteractionEnd)===null||o===void 0||o.call(s)},a.onWheel=function(s){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(s))){s.preventDefault();var o=e.getMousePoint(s),l=normalizeWheel(s).pixelY,u=a.props.zoom-l*a.props.zoomSpeed/200;a.setNewZoom(u,o,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var c,d;return(d=(c=a.props).onInteractionStart)===null||d===void 0?void 0:d.call(c)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var c,d;return(d=(c=a.props).onInteractionEnd)===null||d===void 0?void 0:d.call(c)})},250)}},a.getPointOnContainer=function(s,o){var l=s.x,u=s.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(l-o.x),y:a.containerRect.height/2-(u-o.y)}},a.getPointOnMedia=function(s){var o=s.x,l=s.y,u=a.props,c=u.crop,d=u.zoom;return{x:(o+c.x)/d,y:(l+c.y)/d}},a.setNewZoom=function(s,o,l){var u=l===void 0?{}:l,c=u.shouldUpdatePosition,d=c===void 0?!0:c;if(!(!a.state.cropSize||!a.props.onZoomChange)){var m=clamp(s,a.props.minZoom,a.props.maxZoom);if(d){var g=a.getPointOnContainer(o,a.containerPosition),A=a.getPointOnMedia(g),P={x:A.x*m-g.x,y:A.y*m-g.y},W=a.props.restrictPosition?restrictPosition(P,a.mediaSize,a.state.cropSize,m,a.props.rotation):P;a.props.onCropChange(W)}a.props.onZoomChange(m)}},a.getCropData=function(){if(!a.state.cropSize)return null;var s=a.props.restrictPosition?restrictPosition(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return computeCroppedArea(s,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var s=a.getCropData();if(s){var o=s.croppedAreaPercentages,l=s.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(o,l),a.props.onCropAreaChange&&a.props.onCropAreaChange(o,l)}},a.emitCropAreaChange=function(){var s=a.getCropData();if(s){var o=s.croppedAreaPercentages,l=s.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(o,l)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var s=a.props.restrictPosition?restrictPosition(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(s),a.emitCropData()}},a.onKeyDown=function(s){var o,l,u=a.props,c=u.crop,d=u.onCropChange,m=u.keyboardStep,g=u.zoom,A=u.rotation,P=m;if(a.state.cropSize){s.shiftKey&&(P*=.2);var W=__assign({},c);switch(s.key){case"ArrowUp":W.y-=P,s.preventDefault();break;case"ArrowDown":W.y+=P,s.preventDefault();break;case"ArrowLeft":W.x-=P,s.preventDefault();break;case"ArrowRight":W.x+=P,s.preventDefault();break;default:return}a.props.restrictPosition&&(W=restrictPosition(W,a.mediaSize,a.state.cropSize,g,A)),s.repeat||(l=(o=a.props).onInteractionStart)===null||l===void 0||l.call(o),d(W)}},a.onKeyUp=function(s){var o,l;switch(s.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":s.preventDefault();break;default:return}a.emitCropData(),(l=(o=a.props).onInteractionEnd)===null||l===void 0||l.call(o)},a}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=css_248z,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var a,s;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((s=this.styleRef.parentNode)===null||s===void 0||s.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(a){var s,o,l,u,c,d,m,g,A;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((s=a.cropSize)===null||s===void 0?void 0:s.height)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.height)||((l=a.cropSize)===null||l===void 0?void 0:l.width)!==((u=this.props.cropSize)===null||u===void 0?void 0:u.width)?this.computeSizes():(((c=a.crop)===null||c===void 0?void 0:c.x)!==((d=this.props.crop)===null||d===void 0?void 0:d.x)||((m=a.crop)===null||m===void 0?void 0:m.y)!==((g=this.props.crop)===null||g===void 0?void 0:g.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((A=this.videoRef.current)===null||A===void 0||A.load());var P=this.getObjectFit();P!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:P},this.computeSizes)},e.prototype.getAspect=function(){var a=this.props,s=a.cropSize,o=a.aspect;return s?s.width/s.height:o},e.prototype.getObjectFit=function(){var a,s,o,l;if(this.props.objectFit==="cover"){var u=this.imageRef.current||this.videoRef.current;if(u&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var c=this.containerRect.width/this.containerRect.height,d=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((s=this.videoRef.current)===null||s===void 0?void 0:s.videoWidth)||0,m=((o=this.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((l=this.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,g=d/m;return g<c?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(a){var s=e.getTouchPoint(a.touches[0]),o=e.getTouchPoint(a.touches[1]);this.lastPinchDistance=getDistanceBetweenPoints(s,o),this.lastPinchRotation=getRotationBetweenPoints(s,o),this.onDragStart(getCenter(s,o))},e.prototype.onPinchMove=function(a){var s=this;if(!(!this.currentDoc||!this.currentWindow)){var o=e.getTouchPoint(a.touches[0]),l=e.getTouchPoint(a.touches[1]),u=getCenter(o,l);this.onDrag(u),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var c=getDistanceBetweenPoints(o,l),d=s.props.zoom*(c/s.lastPinchDistance);s.setNewZoom(d,u,{shouldUpdatePosition:!1}),s.lastPinchDistance=c;var m=getRotationBetweenPoints(o,l),g=s.props.rotation+(m-s.lastPinchRotation);s.props.onRotationChange&&s.props.onRotationChange(g),s.lastPinchRotation=m})}},e.prototype.render=function(){var a=this,s,o=this.props,l=o.image,u=o.video,c=o.mediaProps,d=o.cropperProps,m=o.transform,g=o.crop,A=g.x,P=g.y,W=o.rotation,me=o.zoom,ve=o.cropShape,He=o.showGrid,De=o.roundCropAreaPixels,Xe=o.style,qe=Xe.containerStyle,Rs=Xe.cropAreaStyle,Vc=Xe.mediaStyle,So=o.classes,Do=So.containerClassName,eh=So.cropAreaClassName,Ko=So.mediaClassName,Ge=(s=this.state.mediaObjectFit)!==null&&s!==void 0?s:this.getObjectFit();return reactExports.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(wt){return a.containerRef=wt},"data-testid":"container",style:qe,className:classNames("reactEasyCrop_Container",Do)},l?reactExports.createElement("img",__assign({alt:"",className:classNames("reactEasyCrop_Image",Ge==="contain"&&"reactEasyCrop_Contain",Ge==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Ge==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Ko)},c,{src:l,ref:this.imageRef,style:__assign(__assign({},Vc),{transform:m||"translate(".concat(A,"px, ").concat(P,"px) rotate(").concat(W,"deg) scale(").concat(me,")")}),onLoad:this.onMediaLoad})):u&&reactExports.createElement("video",__assign({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:classNames("reactEasyCrop_Video",Ge==="contain"&&"reactEasyCrop_Contain",Ge==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Ge==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Ko)},c,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:__assign(__assign({},Vc),{transform:m||"translate(".concat(A,"px, ").concat(P,"px) rotate(").concat(W,"deg) scale(").concat(me,")")}),controls:!1}),(Array.isArray(u)?u:[{src:u}]).map(function(An){return reactExports.createElement("source",__assign({key:An.src},An))})),this.state.cropSize&&reactExports.createElement("div",__assign({ref:this.cropperRef,style:__assign(__assign({},Rs),{width:De?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:De?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:classNames("reactEasyCrop_CropArea",ve==="round"&&"reactEasyCrop_CropAreaRound",He&&"reactEasyCrop_CropAreaGrid",eh)},d)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:MAX_ZOOM,minZoom:MIN_ZOOM,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:KEYBOARD_STEP},e.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},e.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},e}(reactExports.Component);function Settings(){const{setOptions:t}=reactExports.useContext(OptionsContext),{user:e,setUser:a}=reactExports.useContext(UserContext),s=useNavigate(),[o,l]=reactExports.useState(null);console.log(o);const[u,c]=reactExports.useState(null),[d,m]=reactExports.useState({x:0,y:0}),[g,A]=reactExports.useState(1),[P,W]=reactExports.useState(null),[me,ve]=reactExports.useState(!1),[He,De]=reactExports.useState(""),Xe=eh=>{t(Ko=>({...Ko,theme:eh}))},qe=async()=>{await auth.signOut(),localStorage.setItem("USER",""),a(null),s("/")},Rs=eh=>{const Ko=eh.target.files?.[0];Ko&&(l(Ko),c(URL.createObjectURL(Ko)),ve(!0))},Vc=async(eh,Ko)=>{const Ge=new Image;Ge.src=eh,await new Promise(Bs=>Ge.onload=Bs);const An=document.createElement("canvas"),wt=An.getContext("2d");return wt?(An.width=Ko.width,An.height=Ko.height,wt.drawImage(Ge,Ko.x,Ko.y,Ko.width,Ko.height,0,0,Ko.width,Ko.height),new Promise(Bs=>{An.toBlob(yh=>{Bs(yh)},"image/jpeg")})):null},So=async()=>{if(!u||!P)return;const eh=await Vc(u,P);if(!eh)return;const Ko=getStorage(),Ge=`profile-photos/${e.uid}.jpg`,An=ref(Ko,Ge);await uploadBytes(An,eh);const wt=await getDownloadURL(An),Bs=doc(db$1,"user-data",e.uid);await updateDoc(Bs,{picture:Ge}),e.picture=wt,ve(!1),c(null)},Do=async eh=>{const Ko=eh.trim();a({...e,username:Ko}),await setDoc(doc(db$1,"user-data",e.uid),{username:Ko},{merge:!0}),De("")};return jsxRuntimeExports.jsxs("div",{className:"p-4 w-full h-full overflow-y-scroll",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("h1",{className:"heading-text",children:"Settings"})}),jsxRuntimeExports.jsxs("div",{className:"flex w-full items-center ",children:[jsxRuntimeExports.jsx("h1",{className:"profile-heading",children:"Profile"}),jsxRuntimeExports.jsx("div",{className:"line-break"})]}),jsxRuntimeExports.jsxs("div",{className:"user-info-container",children:[jsxRuntimeExports.jsxs("div",{className:"avatar",children:[jsxRuntimeExports.jsx("img",{src:e?.picture,alt:"User Avatar",className:"avatar-img"}),jsxRuntimeExports.jsx("h1",{className:"avatar-edit",onClick:()=>document.getElementById("fileInput")?.click(),children:"Edit Avatar"}),jsxRuntimeExports.jsx("input",{id:"fileInput",type:"file",accept:"image/*",className:"hidden",onChange:Rs})]}),me&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"relative w-[300px] h-[300px]",children:jsxRuntimeExports.jsx(Cropper,{image:u,crop:d,zoom:g,aspect:1,onCropChange:m,onZoomChange:A,onCropComplete:(eh,Ko)=>W(Ko)})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>ve(!1),children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:So,children:"Save"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"input-header",children:"Username"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-4",children:[jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox max-w-md",value:He,onChange:eh=>{De(eh.target.value)}}),jsxRuntimeExports.jsx("span",{className:"update-btn",onClick:()=>Do(He),children:"Update"})]}),jsxRuntimeExports.jsx("p",{className:"input-header",children:"School"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox max-w-md "}),jsxRuntimeExports.jsx("span",{className:"update-btn",onMouseDown:eh=>eh.currentTarget.classList.add("translate-x-20"),onMouseUp:eh=>eh.currentTarget.classList.remove("translate-x-20"),onMouseLeave:eh=>eh.currentTarget.classList.remove("translate-x-0"),children:"Update"})]})]})]}),jsxRuntimeExports.jsxs("span",{className:`cursor-target color-bg-accent txt-heading-colour px-4 py-2 rounded-out mb-2 hover:scale-95 duration-200\r
            mx-6 cursor-pointer transition-all`,onClick:()=>{qe()},children:[jsxRuntimeExports.jsx("span",{className:"",children:"Log Out"}),jsxRuntimeExports.jsx(LuLogOut,{className:"txt-heading-colour inline mx-1",strokeWidth:3})]}),jsxRuntimeExports.jsxs("div",{className:"flex w-full items-center mt-4",children:[jsxRuntimeExports.jsx("h1",{className:"profile-heading",children:"Themes"}),jsxRuntimeExports.jsx("div",{className:"line-break"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap max-w-full",children:[jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("light"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Light"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-white",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-blue",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-black",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-grey",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("dark"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Dark"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-black",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-blue-light",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-white",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-light-grey",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("markoblank"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Markoblank"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-markoteal",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-markored ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-markobrown ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-markogrey ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("discord"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Discord"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-discordblack ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-discordblue ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-discordwhite ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-discordgrey ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("ishtar"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Ishtar"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-ishtarblack ",children:["    ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-ishtarred ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-ishtargrey ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-ishtarbeige ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("tangerine"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Tangerine"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-tangerineBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-tangerinePrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-tangerineSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-tangerineAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("icebergLight"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Iceberg Light"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-icebergLightBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-icebergLightPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-icebergLightSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-icebergLightAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("icebergDark"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Iceberg Dark"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-icebergDarkBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-icebergDarkPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-icebergDarkSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-icebergDarkAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("husqy"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Husqy"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-husqyBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-husqyPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-husqySub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-husqyAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("shadow"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Shadow"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-shadowBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-shadowPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-shadowSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-shadowAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("matchaMoccha"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Matcha Moccha"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-matchaMocchaBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-matchaMocchaPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-matchaMocchaSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-matchaMocchaAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("redDragon"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Red Dragon"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-redDragonBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-redDragonPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-redDragonSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-redDragonAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("modernInk"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Modern Ink"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-modernInkBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-modernInkPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-modernInkSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-modernInkAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("gruvbox"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Gruvbox"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-gruvboxBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-gruvboxPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-gruvboxSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-gruvboxAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("magicGirl"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Magic Girl"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-magicGirlBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-magicGirlPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-magicGirlSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-magicGirlAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("tronOrange"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Tron Orange"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-tronOrangeBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-tronOrangePrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-tronOrangeSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-tronOrangeAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("menthol"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Menthol"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-mentholBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-mentholPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-mentholSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-mentholAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("lavendar"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Lavendar"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-lavendarBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-lavendarPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-lavendarSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-lavendarAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("diner"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Diner"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-dinerBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-dinerPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-dinerSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-dinerAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("airplane"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Airplane"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-airplaneBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-airplanePrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-airplaneSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-airplaneAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("nordLight"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Nord Light"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-nordLightBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-nordLightPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-nordLightSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-nordLightAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("sewingTinLight"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Sewing Tin Light"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-sewingTinLightBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-sewingTinLightPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-sewingTinLightSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-sewingTinLightAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("camping"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Camping"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-campingBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-campingPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-campingSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-campingAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("paper"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Paper"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-paperBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-paperPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-paperSub ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-paperAccent ",children:" "})," "]})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-target theme-container",onClick:()=>Xe("aurora"),children:[jsxRuntimeExports.jsx("p",{className:"theme-text",children:"Aurora"}),jsxRuntimeExports.jsxs("div",{className:"color-strip-container bg-auroraBG ",children:[jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-auroraPrimary ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-gradient-to-r from-auroraSub1 to-auroraSub2 ",children:" "})," ",jsxRuntimeExports.jsx("div",{className:"color-strip-item bg-gradient-to-r from-auroraAccent1 to-auroraAccent2 ",children:" "})," "]})]})]})]})}const formatTime=t=>{const e=Math.floor(t/3600),a=Math.floor(t%3600/60),s=t%60,o=l=>String(l).padStart(2,"0");return`${o(e)}:${o(a)}:${o(s)}`},useStopwatch=()=>{const[t,e]=reactExports.useState(0),[a,s]=reactExports.useState(!1),o=reactExports.useRef(null),l=()=>{o.current||(o.current=setInterval(()=>{e(d=>d+1)},1e3),s(!0))},u=()=>{o.current&&(clearInterval(o.current),o.current=null,s(!1))},c=()=>{u(),e(0)};return reactExports.useEffect(()=>()=>{o.current&&clearInterval(o.current)},[]),{timeFormatted:formatTime(t),secondsElapsed:t,setSecondsElapsed:e,isRunning:a,start:l,stop:u,reset:c}};function DeckViewer(){const{userID:t,id:e,"*":a}=useParams(),{getDeckbyID:s,deleteDeck:o,saveProgress:l,addtoDecks:u}=useDeckHandler(),{fetchQuestion:c}=useQuestions(),d=useNavigate(),{user:m}=reactExports.useContext(UserContext),[g,A]=reactExports.useState(),[P,W]=reactExports.useState([]),[me,ve]=reactExports.useState(0),{timeFormatted:He,start:De,stop:Xe,secondsElapsed:qe,setSecondsElapsed:Rs}=useStopwatch();return reactExports.useEffect(()=>{!a&&!m?.decks?.some(So=>So.id===e)&&d(`/decks/${t}/${e}/preview`),(async()=>{try{const So=await s(e,t);A(So),Rs(So?.timeElapsed),De();const Do=So?.questions.map(async Ge=>await c(Ge)),Ko=(await Promise.all(Do)).filter(Ge=>Ge!==null);W(Ko)}catch(So){console.error("Error loading questions:",So)}})()},[]),reactExports.useEffect(()=>{const Vc=So=>{So.which===13&&ve(Do=>Do<P.length-1?Do+1:0)};return window.addEventListener("keydown",Vc),()=>window.removeEventListener("keydown",Vc)},[P,me]),jsxRuntimeExports.jsxs("div",{className:"w-h-container flex-col",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(LuArrowLeft,{className:"hover:scale-110 duration-200 transition-all color-txt-main inline",onClick:()=>{a==="preview"&&l([],e,qe),d("/practice"),Xe()}}),a!=="preview"?jsxRuntimeExports.jsx("span",{className:"txt-heading-colour mx-8",children:He}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx("span",{className:"txt-heading-colour mx-8",children:g?.name}),a!=="preview"?jsxRuntimeExports.jsx(LuTrash,{className:"hover:scale-110 duration-200 transition-all color-txt-main inline",onClick:()=>{o(e),d("/practice"),Xe()}}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]}),jsxRuntimeExports.jsx(Question,{questions:P,position:me,setPosition:ve,nextQuestion:()=>ve(Vc=>Vc<P.length-1?Vc+1:0),setFilters:()=>{},deckmode:!0,preview:a==="preview"}),a==="preview"?jsxRuntimeExports.jsx("span",{className:"blue-btn w-1/2 m-auto",onClick:()=>{u(g.name,g.description,g.questions),d("/practice")},children:"Add to Decks"}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]})}function ProfileViewer(){const{userID:t}=useParams(),e=useNavigate(),[a,s]=reactExports.useState(),[o,l]=reactExports.useState(),[u,c]=reactExports.useState(),{fetchFriends:d,fetchUser:m,fetchDecks:g}=useFetch();return reactExports.useEffect(()=>{(async()=>{const P=await m(t),W=await d(t),me=await g(t);console.log(P),s(P),l(W),c(me)})()},[]),jsxRuntimeExports.jsx("div",{className:"w-h-container justify-start items-start p-8",children:a?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:a.picture,className:"w-10 h-10 rounded-full inline object-cover border-2 border-light-grey dark:border-grey"}),jsxRuntimeExports.jsx("span",{className:"txt-heading-colour mx-4",children:a.username}),jsxRuntimeExports.jsx("span",{className:"txt-sub mx-4 inline",children:a.email})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"txt-heading",children:"User Friends"}),o?.map(A=>jsxRuntimeExports.jsxs("div",{className:"m-2",children:[jsxRuntimeExports.jsx("img",{src:A.picture,alt:A.picture,className:"w-10 h-10 rounded-full object-cover inline"}),jsxRuntimeExports.jsx("span",{className:"txt-bold mx-4 inline",children:A.username})]})),jsxRuntimeExports.jsx("p",{className:"txt-heading",children:"User Decks"}),u?.map(A=>jsxRuntimeExports.jsxs("div",{className:"deck",onClick:()=>{e(`/decks/${a.uid}/${A.id}`)},children:[jsxRuntimeExports.jsx("div",{className:"color-strip",style:{backgroundColor:A.color}}),jsxRuntimeExports.jsxs("div",{className:"deck-txt",children:[jsxRuntimeExports.jsx("span",{className:"txt-heading-colour",children:A.name}),jsxRuntimeExports.jsx("span",{className:"txt-sub",children:A.timestamp?new Date(A.timestamp.seconds*1e3).toLocaleDateString():""})]}),jsxRuntimeExports.jsxs("div",{className:"deck-txt",children:[jsxRuntimeExports.jsx("span",{className:"txt-sub",children:A.description}),jsxRuntimeExports.jsxs("span",{className:"txt-sub",children:[A.questions.length," question",A.questions.length!==1?"s":""]})]})]},A.id))]})]}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnim,loop:!0,autoplay:!0,className:"h-40 w-40"})})})}const ProtectedRoute=({children:t})=>{const{user:e}=reactExports.useContext(UserContext),a=useLocation();return e?t:jsxRuntimeExports.jsx(Navigate,{to:"/",state:{prevRoute:a.pathname},replace:!0})},router=createHashRouter([{path:"/",element:jsxRuntimeExports.jsx(SignUp,{})},{path:"/login",element:jsxRuntimeExports.jsx(Login,{})},{path:"/practice",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Questions,{})]})})},{path:"/practice/:id",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Questions,{})]})})},{path:"/social/social",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Social$1,{})]})})},{path:"/social/replies",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Replies,{})]})})},{path:"/games",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Social,{})]})})},{path:"/user/settings",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Settings,{})]})})},{path:"/decks/:userID/:id/*",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(DeckViewer,{})})},{path:"/viewProfile/:userID",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(ProfileViewer,{})})},{path:"/post/:id",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Replies,{})]})})}]);function AppRouter(){return jsxRuntimeExports.jsx(RouterProvider2,{router})}function App(){const[t,e]=reactExports.useState(()=>{const o=localStorage.getItem("USER");return o?JSON.parse(o):{}}),[a,s]=reactExports.useState(()=>{const o=localStorage.getItem("OPTIONS");return o?JSON.parse(o):{theme:"light"}});return reactExports.useEffect(()=>{localStorage.setItem("USER",JSON.stringify(t))},[t]),reactExports.useEffect(()=>{localStorage.setItem("OPTIONS",JSON.stringify(a))},[a]),jsxRuntimeExports.jsx(OptionsContext.Provider,{value:{options:a,setOptions:s},children:jsxRuntimeExports.jsx(UserContext.Provider,{value:{user:t,setUser:e},children:jsxRuntimeExports.jsx("div",{id:"themed-root","data-theme":a.theme,children:jsxRuntimeExports.jsx("div",{className:"color-bg h-screen w-screen flex flex-row",children:jsxRuntimeExports.jsx(AppRouter,{})})})})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
