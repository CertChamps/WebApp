(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var c in a)c!=="key"&&(s[c]=a[c])}else s=a;return a=s.ref,{$$typeof:t,type:n,key:o,ref:a!==void 0?a:null,props:s}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=r,reactJsxRuntime_production.jsxs=r,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),A=Symbol.iterator;function P(Vc){return Vc===null||typeof Vc!="object"?null:(Vc=A&&Vc[A]||Vc["@@iterator"],typeof Vc=="function"?Vc:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},me=Object.assign,_e={};function Ge(Vc,yh,wh){this.props=Vc,this.context=yh,this.refs=_e,this.updater=wh||Z}Ge.prototype.isReactComponent={},Ge.prototype.setState=function(Vc,yh){if(typeof Vc!="object"&&typeof Vc!="function"&&Vc!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Vc,yh,"setState")},Ge.prototype.forceUpdate=function(Vc){this.updater.enqueueForceUpdate(this,Vc,"forceUpdate")};function ve(){}ve.prototype=Ge.prototype;function He(Vc,yh,wh){this.props=Vc,this.context=yh,this.refs=_e,this.updater=wh||Z}var De=He.prototype=new ve;De.constructor=He,me(De,Ge.prototype),De.isPureReactComponent=!0;var Xe=Array.isArray,Bs={H:null,A:null,T:null,S:null,V:null},wt=Object.prototype.hasOwnProperty;function li(Vc,yh,wh,uf,i1,u1){return wh=u1.ref,{$$typeof:t,type:Vc,key:yh,ref:wh!==void 0?wh:null,props:u1}}function An(Vc,yh){return li(Vc.type,yh,void 0,void 0,void 0,Vc.props)}function Os(Vc){return typeof Vc=="object"&&Vc!==null&&Vc.$$typeof===t}function vh(Vc){var yh={"=":"=0",":":"=2"};return"$"+Vc.replace(/[=:]/g,function(wh){return yh[wh]})}var Fc=/\/+/g;function Hc(Vc,yh){return typeof Vc=="object"&&Vc!==null&&Vc.key!=null?vh(""+Vc.key):yh.toString(36)}function qc(){}function e1(Vc){switch(Vc.status){case"fulfilled":return Vc.value;case"rejected":throw Vc.reason;default:switch(typeof Vc.status=="string"?Vc.then(qc,qc):(Vc.status="pending",Vc.then(function(yh){Vc.status==="pending"&&(Vc.status="fulfilled",Vc.value=yh)},function(yh){Vc.status==="pending"&&(Vc.status="rejected",Vc.reason=yh)})),Vc.status){case"fulfilled":return Vc.value;case"rejected":throw Vc.reason}}throw Vc}function df(Vc,yh,wh,uf,i1){var u1=typeof Vc;(u1==="undefined"||u1==="boolean")&&(Vc=null);var h1=!1;if(Vc===null)h1=!0;else switch(u1){case"bigint":case"string":case"number":h1=!0;break;case"object":switch(Vc.$$typeof){case t:case e:h1=!0;break;case y:return h1=Vc._init,df(h1(Vc._payload),yh,wh,uf,i1)}}if(h1)return i1=i1(Vc),h1=uf===""?"."+Hc(Vc,0):uf,Xe(i1)?(wh="",h1!=null&&(wh=h1.replace(Fc,"$&/")+"/"),df(i1,yh,wh,"",function(j1){return j1})):i1!=null&&(Os(i1)&&(i1=An(i1,wh+(i1.key==null||Vc&&Vc.key===i1.key?"":(""+i1.key).replace(Fc,"$&/")+"/")+h1)),yh.push(i1)),1;h1=0;var T1=uf===""?".":uf+":";if(Xe(Vc))for(var p1=0;p1<Vc.length;p1++)uf=Vc[p1],u1=T1+Hc(uf,p1),h1+=df(uf,yh,wh,u1,i1);else if(p1=P(Vc),typeof p1=="function")for(Vc=p1.call(Vc),p1=0;!(uf=Vc.next()).done;)uf=uf.value,u1=T1+Hc(uf,p1++),h1+=df(uf,yh,wh,u1,i1);else if(u1==="object"){if(typeof Vc.then=="function")return df(e1(Vc),yh,wh,uf,i1);throw yh=String(Vc),Error("Objects are not valid as a React child (found: "+(yh==="[object Object]"?"object with keys {"+Object.keys(Vc).join(", ")+"}":yh)+"). If you meant to render a collection of children, use an array instead.")}return h1}function So(Vc,yh,wh){if(Vc==null)return Vc;var uf=[],i1=0;return df(Vc,uf,"","",function(u1){return yh.call(wh,u1,i1++)}),uf}function th(Vc){if(Vc._status===-1){var yh=Vc._result;yh=yh(),yh.then(function(wh){(Vc._status===0||Vc._status===-1)&&(Vc._status=1,Vc._result=wh)},function(wh){(Vc._status===0||Vc._status===-1)&&(Vc._status=2,Vc._result=wh)}),Vc._status===-1&&(Vc._status=0,Vc._result=yh)}if(Vc._status===1)return Vc._result.default;throw Vc._result}var Rs=typeof reportError=="function"?reportError:function(Vc){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var yh=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Vc=="object"&&Vc!==null&&typeof Vc.message=="string"?String(Vc.message):String(Vc),error:Vc});if(!window.dispatchEvent(yh))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Vc);return}console.error(Vc)};function Ko(){}return react_production.Children={map:So,forEach:function(Vc,yh,wh){So(Vc,function(){yh.apply(this,arguments)},wh)},count:function(Vc){var yh=0;return So(Vc,function(){yh++}),yh},toArray:function(Vc){return So(Vc,function(yh){return yh})||[]},only:function(Vc){if(!Os(Vc))throw Error("React.Children.only expected to receive a single React element child.");return Vc}},react_production.Component=Ge,react_production.Fragment=r,react_production.Profiler=a,react_production.PureComponent=He,react_production.StrictMode=n,react_production.Suspense=d,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Bs,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Vc){return Bs.H.useMemoCache(Vc)}},react_production.cache=function(Vc){return function(){return Vc.apply(null,arguments)}},react_production.cloneElement=function(Vc,yh,wh){if(Vc==null)throw Error("The argument must be a React element, but you passed "+Vc+".");var uf=me({},Vc.props),i1=Vc.key,u1=void 0;if(yh!=null)for(h1 in yh.ref!==void 0&&(u1=void 0),yh.key!==void 0&&(i1=""+yh.key),yh)!wt.call(yh,h1)||h1==="key"||h1==="__self"||h1==="__source"||h1==="ref"&&yh.ref===void 0||(uf[h1]=yh[h1]);var h1=arguments.length-2;if(h1===1)uf.children=wh;else if(1<h1){for(var T1=Array(h1),p1=0;p1<h1;p1++)T1[p1]=arguments[p1+2];uf.children=T1}return li(Vc.type,i1,void 0,void 0,u1,uf)},react_production.createContext=function(Vc){return Vc={$$typeof:o,_currentValue:Vc,_currentValue2:Vc,_threadCount:0,Provider:null,Consumer:null},Vc.Provider=Vc,Vc.Consumer={$$typeof:s,_context:Vc},Vc},react_production.createElement=function(Vc,yh,wh){var uf,i1={},u1=null;if(yh!=null)for(uf in yh.key!==void 0&&(u1=""+yh.key),yh)wt.call(yh,uf)&&uf!=="key"&&uf!=="__self"&&uf!=="__source"&&(i1[uf]=yh[uf]);var h1=arguments.length-2;if(h1===1)i1.children=wh;else if(1<h1){for(var T1=Array(h1),p1=0;p1<h1;p1++)T1[p1]=arguments[p1+2];i1.children=T1}if(Vc&&Vc.defaultProps)for(uf in h1=Vc.defaultProps,h1)i1[uf]===void 0&&(i1[uf]=h1[uf]);return li(Vc,u1,void 0,void 0,null,i1)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Vc){return{$$typeof:c,render:Vc}},react_production.isValidElement=Os,react_production.lazy=function(Vc){return{$$typeof:y,_payload:{_status:-1,_result:Vc},_init:th}},react_production.memo=function(Vc,yh){return{$$typeof:m,type:Vc,compare:yh===void 0?null:yh}},react_production.startTransition=function(Vc){var yh=Bs.T,wh={};Bs.T=wh;try{var uf=Vc(),i1=Bs.S;i1!==null&&i1(wh,uf),typeof uf=="object"&&uf!==null&&typeof uf.then=="function"&&uf.then(Ko,Rs)}catch(u1){Rs(u1)}finally{Bs.T=yh}},react_production.unstable_useCacheRefresh=function(){return Bs.H.useCacheRefresh()},react_production.use=function(Vc){return Bs.H.use(Vc)},react_production.useActionState=function(Vc,yh,wh){return Bs.H.useActionState(Vc,yh,wh)},react_production.useCallback=function(Vc,yh){return Bs.H.useCallback(Vc,yh)},react_production.useContext=function(Vc){return Bs.H.useContext(Vc)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Vc,yh){return Bs.H.useDeferredValue(Vc,yh)},react_production.useEffect=function(Vc,yh,wh){var uf=Bs.H;if(typeof wh=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return uf.useEffect(Vc,yh)},react_production.useId=function(){return Bs.H.useId()},react_production.useImperativeHandle=function(Vc,yh,wh){return Bs.H.useImperativeHandle(Vc,yh,wh)},react_production.useInsertionEffect=function(Vc,yh){return Bs.H.useInsertionEffect(Vc,yh)},react_production.useLayoutEffect=function(Vc,yh){return Bs.H.useLayoutEffect(Vc,yh)},react_production.useMemo=function(Vc,yh){return Bs.H.useMemo(Vc,yh)},react_production.useOptimistic=function(Vc,yh){return Bs.H.useOptimistic(Vc,yh)},react_production.useReducer=function(Vc,yh,wh){return Bs.H.useReducer(Vc,yh,wh)},react_production.useRef=function(Vc){return Bs.H.useRef(Vc)},react_production.useState=function(Vc){return Bs.H.useState(Vc)},react_production.useSyncExternalStore=function(Vc,yh,wh){return Bs.H.useSyncExternalStore(Vc,yh,wh)},react_production.useTransition=function(){return Bs.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(t){function e(So,th){var Rs=So.length;So.push(th);e:for(;0<Rs;){var Ko=Rs-1>>>1,Vc=So[Ko];if(0<a(Vc,th))So[Ko]=th,So[Rs]=Vc,Rs=Ko;else break e}}function r(So){return So.length===0?null:So[0]}function n(So){if(So.length===0)return null;var th=So[0],Rs=So.pop();if(Rs!==th){So[0]=Rs;e:for(var Ko=0,Vc=So.length,yh=Vc>>>1;Ko<yh;){var wh=2*(Ko+1)-1,uf=So[wh],i1=wh+1,u1=So[i1];if(0>a(uf,Rs))i1<Vc&&0>a(u1,uf)?(So[Ko]=u1,So[i1]=Rs,Ko=i1):(So[Ko]=uf,So[wh]=Rs,Ko=wh);else if(i1<Vc&&0>a(u1,Rs))So[Ko]=u1,So[i1]=Rs,Ko=i1;else break e}}return th}function a(So,th){var Rs=So.sortIndex-th.sortIndex;return Rs!==0?Rs:So.id-th.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],m=[],y=1,A=null,P=3,Z=!1,me=!1,_e=!1,Ge=!1,ve=typeof setTimeout=="function"?setTimeout:null,He=typeof clearTimeout=="function"?clearTimeout:null,De=typeof setImmediate<"u"?setImmediate:null;function Xe(So){for(var th=r(m);th!==null;){if(th.callback===null)n(m);else if(th.startTime<=So)n(m),th.sortIndex=th.expirationTime,e(d,th);else break;th=r(m)}}function Bs(So){if(_e=!1,Xe(So),!me)if(r(d)!==null)me=!0,wt||(wt=!0,Hc());else{var th=r(m);th!==null&&df(Bs,th.startTime-So)}}var wt=!1,li=-1,An=5,Os=-1;function vh(){return Ge?!0:!(t.unstable_now()-Os<An)}function Fc(){if(Ge=!1,wt){var So=t.unstable_now();Os=So;var th=!0;try{e:{me=!1,_e&&(_e=!1,He(li),li=-1),Z=!0;var Rs=P;try{t:{for(Xe(So),A=r(d);A!==null&&!(A.expirationTime>So&&vh());){var Ko=A.callback;if(typeof Ko=="function"){A.callback=null,P=A.priorityLevel;var Vc=Ko(A.expirationTime<=So);if(So=t.unstable_now(),typeof Vc=="function"){A.callback=Vc,Xe(So),th=!0;break t}A===r(d)&&n(d),Xe(So)}else n(d);A=r(d)}if(A!==null)th=!0;else{var yh=r(m);yh!==null&&df(Bs,yh.startTime-So),th=!1}}break e}finally{A=null,P=Rs,Z=!1}th=void 0}}finally{th?Hc():wt=!1}}}var Hc;if(typeof De=="function")Hc=function(){De(Fc)};else if(typeof MessageChannel<"u"){var qc=new MessageChannel,e1=qc.port2;qc.port1.onmessage=Fc,Hc=function(){e1.postMessage(null)}}else Hc=function(){ve(Fc,0)};function df(So,th){li=ve(function(){So(t.unstable_now())},th)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(So){So.callback=null},t.unstable_forceFrameRate=function(So){0>So||125<So?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):An=0<So?Math.floor(1e3/So):5},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_next=function(So){switch(P){case 1:case 2:case 3:var th=3;break;default:th=P}var Rs=P;P=th;try{return So()}finally{P=Rs}},t.unstable_requestPaint=function(){Ge=!0},t.unstable_runWithPriority=function(So,th){switch(So){case 1:case 2:case 3:case 4:case 5:break;default:So=3}var Rs=P;P=So;try{return th()}finally{P=Rs}},t.unstable_scheduleCallback=function(So,th,Rs){var Ko=t.unstable_now();switch(typeof Rs=="object"&&Rs!==null?(Rs=Rs.delay,Rs=typeof Rs=="number"&&0<Rs?Ko+Rs:Ko):Rs=Ko,So){case 1:var Vc=-1;break;case 2:Vc=250;break;case 5:Vc=1073741823;break;case 4:Vc=1e4;break;default:Vc=5e3}return Vc=Rs+Vc,So={id:y++,callback:th,priorityLevel:So,startTime:Rs,expirationTime:Vc,sortIndex:-1},Rs>Ko?(So.sortIndex=Rs,e(m,So),r(d)===null&&So===r(m)&&(_e?(He(li),li=-1):_e=!0,df(Bs,Rs-Ko))):(So.sortIndex=Vc,e(d,So),me||Z||(me=!0,wt||(wt=!0,Hc()))),So},t.unstable_shouldYield=vh,t.unstable_wrapCallback=function(So){var th=P;return function(){var Rs=P;P=th;try{return So.apply(this,arguments)}finally{P=Rs}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(d,m,y){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:A==null?null:""+A,children:d,containerInfo:m,implementation:y}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,reactDom_production.createPortal=function(d,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return s(d,m,null,y)},reactDom_production.flushSync=function(d){var m=o.T,y=n.p;try{if(o.T=null,n.p=2,d)return d()}finally{o.T=m,n.p=y,n.d.f()}},reactDom_production.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(d,m))},reactDom_production.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},reactDom_production.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var y=m.as,A=c(y,m.crossOrigin),P=typeof m.integrity=="string"?m.integrity:void 0,Z=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?n.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:A,integrity:P,fetchPriority:Z}):y==="script"&&n.d.X(d,{crossOrigin:A,integrity:P,fetchPriority:Z,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},reactDom_production.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=c(m.as,m.crossOrigin);n.d.M(d,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(d)},reactDom_production.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,A=c(y,m.crossOrigin);n.d.L(d,y,{crossOrigin:A,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},reactDom_production.preloadModule=function(d,m){if(typeof d=="string")if(m){var y=c(m.as,m.crossOrigin);n.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(d)},reactDom_production.requestFormReset=function(d){n.d.r(d)},reactDom_production.unstable_batchedUpdates=function(d,m){return d(m)},reactDom_production.useFormState=function(d,m,y){return o.H.useFormState(d,m,y)},reactDom_production.useFormStatus=function(){return o.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),r=requireReactDom();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(s(l)!==l)throw Error(n(188))}function d(l){var u=l.alternate;if(!u){if(u=s(l),u===null)throw Error(n(188));return u!==l?null:l}for(var g=l,E=u;;){var ae=g.return;if(ae===null)break;var qe=ae.alternate;if(qe===null){if(E=ae.return,E!==null){g=E;continue}break}if(ae.child===qe.child){for(qe=ae.child;qe;){if(qe===g)return c(ae),l;if(qe===E)return c(ae),u;qe=qe.sibling}throw Error(n(188))}if(g.return!==E.return)g=ae,E=qe;else{for(var Do=!1,eh=ae.child;eh;){if(eh===g){Do=!0,g=ae,E=qe;break}if(eh===E){Do=!0,E=ae,g=qe;break}eh=eh.sibling}if(!Do){for(eh=qe.child;eh;){if(eh===g){Do=!0,g=qe,E=ae;break}if(eh===E){Do=!0,E=qe,g=ae;break}eh=eh.sibling}if(!Do)throw Error(n(189))}}if(g.alternate!==E)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?l:u}function m(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=m(l),u!==null)return u;l=l.sibling}return null}var y=Object.assign,A=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),me=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),Ge=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),He=Symbol.for("react.consumer"),De=Symbol.for("react.context"),Xe=Symbol.for("react.forward_ref"),Bs=Symbol.for("react.suspense"),wt=Symbol.for("react.suspense_list"),li=Symbol.for("react.memo"),An=Symbol.for("react.lazy"),Os=Symbol.for("react.activity"),vh=Symbol.for("react.memo_cache_sentinel"),Fc=Symbol.iterator;function Hc(l){return l===null||typeof l!="object"?null:(l=Fc&&l[Fc]||l["@@iterator"],typeof l=="function"?l:null)}var qc=Symbol.for("react.client.reference");function e1(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===qc?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case me:return"Fragment";case Ge:return"Profiler";case _e:return"StrictMode";case Bs:return"Suspense";case wt:return"SuspenseList";case Os:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case Z:return"Portal";case De:return(l.displayName||"Context")+".Provider";case He:return(l._context.displayName||"Context")+".Consumer";case Xe:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case li:return u=l.displayName||null,u!==null?u:e1(l.type)||"Memo";case An:u=l._payload,l=l._init;try{return e1(l(u))}catch{}}return null}var df=Array.isArray,So=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,th=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rs={pending:!1,data:null,method:null,action:null},Ko=[],Vc=-1;function yh(l){return{current:l}}function wh(l){0>Vc||(l.current=Ko[Vc],Ko[Vc]=null,Vc--)}function uf(l,u){Vc++,Ko[Vc]=l.current,l.current=u}var i1=yh(null),u1=yh(null),h1=yh(null),T1=yh(null);function p1(l,u){switch(uf(h1,u),uf(u1,l),uf(i1,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?Hx(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=Hx(u),l=Gx(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}wh(i1),uf(i1,l)}function j1(){wh(i1),wh(u1),wh(h1)}function C1(l){l.memoizedState!==null&&uf(T1,l);var u=i1.current,g=Gx(u,l.type);u!==g&&(uf(u1,l),uf(i1,g))}function k1(l){u1.current===l&&(wh(i1),wh(u1)),T1.current===l&&(wh(T1),U3._currentValue=Rs)}var X1=Object.prototype.hasOwnProperty,D1=t.unstable_scheduleCallback,m1=t.unstable_cancelCallback,xy=t.unstable_shouldYield,Py=t.unstable_requestPaint,Q1=t.unstable_now,gy=t.unstable_getCurrentPriorityLevel,my=t.unstable_ImmediatePriority,Iy=t.unstable_UserBlockingPriority,uy=t.unstable_NormalPriority,Sy=t.unstable_LowPriority,yy=t.unstable_IdlePriority,Ey=t.log,Oy=t.unstable_setDisableYieldValue,L1=null,R1=null;function vy(l){if(typeof Ey=="function"&&Oy(l),R1&&typeof R1.setStrictMode=="function")try{R1.setStrictMode(L1,l)}catch{}}var ly=Math.clz32?Math.clz32:Fv,Rv=Math.log,fv=Math.LN2;function Fv(l){return l>>>=0,l===0?32:31-(Rv(l)/fv|0)|0}var Nv=256,Ov=4194304;function iv(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function e4(l,u,g){var E=l.pendingLanes;if(E===0)return 0;var ae=0,qe=l.suspendedLanes,Do=l.pingedLanes;l=l.warmLanes;var eh=E&134217727;return eh!==0?(E=eh&~qe,E!==0?ae=iv(E):(Do&=eh,Do!==0?ae=iv(Do):g||(g=eh&~l,g!==0&&(ae=iv(g))))):(eh=E&~qe,eh!==0?ae=iv(eh):Do!==0?ae=iv(Do):g||(g=E&~l,g!==0&&(ae=iv(g)))),ae===0?0:u!==0&&u!==ae&&(u&qe)===0&&(qe=ae&-ae,g=u&-u,qe>=g||qe===32&&(g&4194048)!==0)?u:ae}function pv(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function A4(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t4(){var l=Nv;return Nv<<=1,(Nv&4194048)===0&&(Nv=256),l}function t2(){var l=Ov;return Ov<<=1,(Ov&62914560)===0&&(Ov=4194304),l}function gv(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function Pv(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function T4(l,u,g,E,ae,qe){var Do=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var eh=l.entanglements,Mh=l.expirationTimes,gf=l.hiddenUpdates;for(g=Do&~g;0<g;){var a1=31-ly(g),o1=1<<a1;eh[a1]=0,Mh[a1]=-1;var t1=gf[a1];if(t1!==null)for(gf[a1]=null,a1=0;a1<t1.length;a1++){var r1=t1[a1];r1!==null&&(r1.lane&=-536870913)}g&=~o1}E!==0&&Hy(l,E,0),qe!==0&&ae===0&&l.tag!==0&&(l.suspendedLanes|=qe&~(Do&~u))}function Hy(l,u,g){l.pendingLanes|=u,l.suspendedLanes&=~u;var E=31-ly(u);l.entangledLanes|=u,l.entanglements[E]=l.entanglements[E]|1073741824|g&4194090}function zv(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var E=31-ly(g),ae=1<<E;ae&u|l[E]&u&&(l[E]|=u),g&=~ae}}function $v(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function C4(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Ym(){var l=th.p;return l!==0?l:(l=window.event,l===void 0?32:d9(l.type))}function mf(l,u){var g=th.p;try{return th.p=l,u()}finally{th.p=g}}var Qp=Math.random().toString(36).slice(2),l1="__reactFiber$"+Qp,c1="__reactProps$"+Qp,f1="__reactContainer$"+Qp,x1="__reactEvents$"+Qp,y1="__reactListeners$"+Qp,v1="__reactHandles$"+Qp,E1="__reactResources$"+Qp,b1="__reactMarker$"+Qp;function _1(l){delete l[l1],delete l[c1],delete l[x1],delete l[y1],delete l[v1]}function V1(l){var u=l[l1];if(u)return u;for(var g=l.parentNode;g;){if(u=g[f1]||g[l1]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(l=Qx(l);l!==null;){if(g=l[l1])return g;l=Qx(l)}return u}l=g,g=l.parentNode}return null}function U1(l){if(l=l[l1]||l[f1]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function ny(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function H1(l){var u=l[E1];return u||(u=l[E1]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function I1(l){l[b1]=!0}var G1=new Set,Zy={};function zy(l,u){Dy(l,u),Dy(l+"Capture",u)}function Dy(l,u){for(Zy[l]=u,l=0;l<u.length;l++)G1.add(u[l])}var Gy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),k4={},nv={};function yv(l){return X1.call(nv,l)?!0:X1.call(k4,l)?!1:Gy.test(l)?nv[l]=!0:(k4[l]=!0,!1)}function av(l,u,g){if(yv(u))if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var E=u.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+g)}}function Wy(l,u,g){if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+g)}}function P1(l,u,g,E){if(E===null)l.removeAttribute(g);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(u,g,""+E)}}var cy,r4;function Xy(l){if(cy===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);cy=u&&u[1]||"",r4=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cy+l+r4}var sy=!1;function Iv(l,u){if(!l||sy)return"";sy=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(u){var o1=function(){throw Error()};if(Object.defineProperty(o1.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o1,[])}catch(r1){var t1=r1}Reflect.construct(l,[],o1)}else{try{o1.call()}catch(r1){t1=r1}l.call(o1.prototype)}}else{try{throw Error()}catch(r1){t1=r1}(o1=l())&&typeof o1.catch=="function"&&o1.catch(function(){})}}catch(r1){if(r1&&t1&&typeof r1.stack=="string")return[r1.stack,t1.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var ae=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");ae&&ae.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var qe=E.DetermineComponentFrameRoot(),Do=qe[0],eh=qe[1];if(Do&&eh){var Mh=Do.split(`
`),gf=eh.split(`
`);for(ae=E=0;E<Mh.length&&!Mh[E].includes("DetermineComponentFrameRoot");)E++;for(;ae<gf.length&&!gf[ae].includes("DetermineComponentFrameRoot");)ae++;if(E===Mh.length||ae===gf.length)for(E=Mh.length-1,ae=gf.length-1;1<=E&&0<=ae&&Mh[E]!==gf[ae];)ae--;for(;1<=E&&0<=ae;E--,ae--)if(Mh[E]!==gf[ae]){if(E!==1||ae!==1)do if(E--,ae--,0>ae||Mh[E]!==gf[ae]){var a1=`
`+Mh[E].replace(" at new "," at ");return l.displayName&&a1.includes("<anonymous>")&&(a1=a1.replace("<anonymous>",l.displayName)),a1}while(1<=E&&0<=ae);break}}}finally{sy=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?Xy(g):""}function M4(l){switch(l.tag){case 26:case 27:case 5:return Xy(l.type);case 16:return Xy("Lazy");case 13:return Xy("Suspense");case 19:return Xy("SuspenseList");case 0:case 15:return Iv(l.type,!1);case 11:return Iv(l.type.render,!1);case 1:return Iv(l.type,!0);case 31:return Xy("Activity");default:return""}}function R4(l){try{var u="";do u+=M4(l),l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function Yy(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Qb(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function d6(l){var u=Qb(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),E=""+l[u];if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var ae=g.get,qe=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return ae.call(this)},set:function(Do){E=""+Do,qe.call(this,Do)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return E},setValue:function(Do){E=""+Do},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function k2(l){l._valueTracker||(l._valueTracker=d6(l))}function Jb(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var g=u.getValue(),E="";return l&&(E=Qb(l)?l.checked?"true":"false":l.value),l=E,l!==g?(u.setValue(l),!0):!1}function r2(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var m6=/[\n"\\]/g;function wy(l){return l.replace(m6,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function sv(l,u,g,E,ae,qe,Do,eh){l.name="",Do!=null&&typeof Do!="function"&&typeof Do!="symbol"&&typeof Do!="boolean"?l.type=Do:l.removeAttribute("type"),u!=null?Do==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Yy(u)):l.value!==""+Yy(u)&&(l.value=""+Yy(u)):Do!=="submit"&&Do!=="reset"||l.removeAttribute("value"),u!=null?P4(l,Do,Yy(u)):g!=null?P4(l,Do,Yy(g)):E!=null&&l.removeAttribute("value"),ae==null&&qe!=null&&(l.defaultChecked=!!qe),ae!=null&&(l.checked=ae&&typeof ae!="function"&&typeof ae!="symbol"),eh!=null&&typeof eh!="function"&&typeof eh!="symbol"&&typeof eh!="boolean"?l.name=""+Yy(eh):l.removeAttribute("name")}function i2(l,u,g,E,ae,qe,Do,eh){if(qe!=null&&typeof qe!="function"&&typeof qe!="symbol"&&typeof qe!="boolean"&&(l.type=qe),u!=null||g!=null){if(!(qe!=="submit"&&qe!=="reset"||u!=null))return;g=g!=null?""+Yy(g):"",u=u!=null?""+Yy(u):g,eh||u===l.value||(l.value=u),l.defaultValue=u}E=E??ae,E=typeof E!="function"&&typeof E!="symbol"&&!!E,l.checked=eh?l.checked:!!E,l.defaultChecked=!!E,Do!=null&&typeof Do!="function"&&typeof Do!="symbol"&&typeof Do!="boolean"&&(l.name=Do)}function P4(l,u,g){u==="number"&&r2(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function i4(l,u,g,E){if(l=l.options,u){u={};for(var ae=0;ae<g.length;ae++)u["$"+g[ae]]=!0;for(g=0;g<l.length;g++)ae=u.hasOwnProperty("$"+l[g].value),l[g].selected!==ae&&(l[g].selected=ae),ae&&E&&(l[g].defaultSelected=!0)}else{for(g=""+Yy(g),u=null,ae=0;ae<l.length;ae++){if(l[ae].value===g){l[ae].selected=!0,E&&(l[ae].defaultSelected=!0);return}u!==null||l[ae].disabled||(u=l[ae])}u!==null&&(u.selected=!0)}}function ey(l,u,g){if(u!=null&&(u=""+Yy(u),u!==l.value&&(l.value=u),g==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=g!=null?""+Yy(g):""}function n2(l,u,g,E){if(u==null){if(E!=null){if(g!=null)throw Error(n(92));if(df(E)){if(1<E.length)throw Error(n(93));E=E[0]}g=E}g==null&&(g=""),u=g}g=Yy(u),l.defaultValue=g,E=l.textContent,E===g&&E!==""&&E!==null&&(l.value=E)}function vv(l,u){if(u){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=u;return}}l.textContent=u}var a2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Y3(l,u,g){var E=u.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?E?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":E?l.setProperty(u,g):typeof g!="number"||g===0||a2.has(u)?u==="float"?l.cssFloat=g:l[u]=(""+g).trim():l[u]=g+"px"}function Zb(l,u,g){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,g!=null){for(var E in g)!g.hasOwnProperty(E)||u!=null&&u.hasOwnProperty(E)||(E.indexOf("--")===0?l.setProperty(E,""):E==="float"?l.cssFloat="":l[E]="");for(var ae in u)E=u[ae],u.hasOwnProperty(ae)&&g[ae]!==E&&Y3(l,ae,E)}else for(var qe in u)u.hasOwnProperty(qe)&&Y3(l,qe,u[qe])}function e3(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var f6=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),p6=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function M2(l){return p6.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var n4=null;function bv(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var a4=null,s4=null;function t3(l){var u=U1(l);if(u&&(l=u.stateNode)){var g=l[c1]||null;e:switch(l=u.stateNode,u.type){case"input":if(sv(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),u=g.name,g.type==="radio"&&u!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+wy(""+u)+'"][type="radio"]'),u=0;u<g.length;u++){var E=g[u];if(E!==l&&E.form===l.form){var ae=E[c1]||null;if(!ae)throw Error(n(90));sv(E,ae.value,ae.defaultValue,ae.defaultValue,ae.checked,ae.defaultChecked,ae.type,ae.name)}}for(u=0;u<g.length;u++)E=g[u],E.form===l.form&&Jb(E)}break e;case"textarea":ey(l,g.value,g.defaultValue);break e;case"select":u=g.value,u!=null&&i4(l,!!g.multiple,u,!1)}}}var qv=!1;function Q3(l,u,g){if(qv)return l(u,g);qv=!0;try{var E=l(u);return E}finally{if(qv=!1,(a4!==null||s4!==null)&&(K_(),a4&&(u=a4,l=s4,s4=a4=null,t3(u),l)))for(u=0;u<l.length;u++)t3(l[u])}}function s2(l,u){var g=l.stateNode;if(g===null)return null;var E=g[c1]||null;if(E===null)return null;g=E[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(l=l.type,E=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!E;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(n(231,u,typeof g));return g}var Dv=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_v=!1;if(Dv)try{var o2={};Object.defineProperty(o2,"passive",{get:function(){_v=!0}}),window.addEventListener("test",o2,o2),window.removeEventListener("test",o2,o2)}catch{_v=!1}var Uv=null,I4=null,o4=null;function r3(){if(o4)return o4;var l,u=I4,g=u.length,E,ae="value"in Uv?Uv.value:Uv.textContent,qe=ae.length;for(l=0;l<g&&u[l]===ae[l];l++);var Do=g-l;for(E=1;E<=Do&&u[g-E]===ae[qe-E];E++);return o4=ae.slice(l,1<E?1-E:void 0)}function Kv(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function jv(){return!0}function i3(){return!1}function Ly(l){function u(g,E,ae,qe,Do){this._reactName=g,this._targetInst=ae,this.type=E,this.nativeEvent=qe,this.target=Do,this.currentTarget=null;for(var eh in l)l.hasOwnProperty(eh)&&(g=l[eh],this[eh]=g?g(qe):qe[eh]);return this.isDefaultPrevented=(qe.defaultPrevented!=null?qe.defaultPrevented:qe.returnValue===!1)?jv:i3,this.isPropagationStopped=i3,this}return y(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=jv)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=jv)},persist:function(){},isPersistent:jv}),u}var Y1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},R2=Ly(Y1),l2=y({},Y1,{view:0,detail:0}),J3=Ly(l2),P2,I2,Hv,u2=y({},l2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d2,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Hv&&(Hv&&l.type==="mousemove"?(P2=l.screenX-Hv.screenX,I2=l.screenY-Hv.screenY):I2=P2=0,Hv=l),P2)},movementY:function(l){return"movementY"in l?l.movementY:I2}}),xv=Ly(u2),Z3=y({},u2,{dataTransfer:0}),g6=Ly(Z3),c2=y({},l2,{relatedTarget:0}),D2=Ly(c2),n3=y({},Y1,{animationName:0,elapsedTime:0,pseudoElement:0}),L2=Ly(n3),e_=y({},Y1,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),V2=Ly(e_),y6=y({},Y1,{data:0}),a3=Ly(y6),h2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s3(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=r_[l])?!!u[l]:!1}function d2(){return s3}var i_=y({},l2,{key:function(l){if(l.key){var u=h2[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Kv(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?t_[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d2,charCode:function(l){return l.type==="keypress"?Kv(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Kv(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),B2=Ly(i_),n_=y({},u2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o3=Ly(n_),l4=y({},l2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d2}),a_=Ly(l4),s_=y({},Y1,{propertyName:0,elapsedTime:0,pseudoElement:0}),o_=Ly(s_),l_=y({},u2,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),F2=Ly(l_),Qy=y({},Y1,{newState:0,oldState:0}),u_=Ly(Qy),c_=[9,13,27,32],Gv=Dv&&"CompositionEvent"in window,W=null;Dv&&"documentMode"in document&&(W=document.documentMode);var sr=Dv&&"TextEvent"in window&&!W,To=Dv&&(!Gv||W&&8<W&&11>=W),_h=" ",ff=!1;function n1(l,u){switch(l){case"keyup":return c_.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d1(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var z1=!1;function Cy(l,u){switch(l){case"compositionend":return d1(u);case"keypress":return u.which!==32?null:(ff=!0,_h);case"textInput":return l=u.data,l===_h&&ff?null:l;default:return null}}function $1(l,u){if(z1)return l==="compositionend"||!Gv&&n1(l,u)?(l=r3(),o4=I4=Uv=null,z1=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return To&&u.locale!=="ko"?null:u.data;default:return null}}var Vy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ky(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Vy[l.type]:u==="textarea"}function u4(l,u,g,E){a4?s4?s4.push(E):s4=[E]:a4=E,u=Y_(u,"onChange"),0<u.length&&(g=new R2("onChange","change",null,g,E),l.push({event:g,listeners:u}))}var $y=null,Wv=null;function l3(l){$x(l,0)}function h_(l){var u=ny(l);if(Jb(u))return l}function l7(l,u){if(l==="change")return u}var u7=!1;if(Dv){var v6;if(Dv){var b6="oninput"in document;if(!b6){var c7=document.createElement("div");c7.setAttribute("oninput","return;"),b6=typeof c7.oninput=="function"}v6=b6}else v6=!1;u7=v6&&(!document.documentMode||9<document.documentMode)}function h7(){$y&&($y.detachEvent("onpropertychange",d7),Wv=$y=null)}function d7(l){if(l.propertyName==="value"&&h_(Wv)){var u=[];u4(u,Wv,l,bv(l)),Q3(l3,u)}}function J9(l,u,g){l==="focusin"?(h7(),$y=u,Wv=g,$y.attachEvent("onpropertychange",d7)):l==="focusout"&&h7()}function Z9(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return h_(Wv)}function eS(l,u){if(l==="click")return h_(u)}function tS(l,u){if(l==="input"||l==="change")return h_(u)}function rS(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var ov=typeof Object.is=="function"?Object.is:rS;function u3(l,u){if(ov(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),E=Object.keys(u);if(g.length!==E.length)return!1;for(E=0;E<g.length;E++){var ae=g[E];if(!X1.call(u,ae)||!ov(l[ae],u[ae]))return!1}return!0}function m7(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function f7(l,u){var g=m7(l);l=0;for(var E;g;){if(g.nodeType===3){if(E=l+g.textContent.length,l<=u&&E>=u)return{node:g,offset:u-l};l=E}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=m7(g)}}function p7(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?p7(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function g7(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=r2(l.document);u instanceof l.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)l=u.contentWindow;else break;u=r2(l.document)}return u}function _6(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var iS=Dv&&"documentMode"in document&&11>=document.documentMode,N2=null,x6=null,c3=null,S6=!1;function y7(l,u,g){var E=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;S6||N2==null||N2!==r2(E)||(E=N2,"selectionStart"in E&&_6(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),c3&&u3(c3,E)||(c3=E,E=Y_(x6,"onSelect"),0<E.length&&(u=new R2("onSelect","select",null,u,g),l.push({event:u,listeners:E}),u.target=N2)))}function m2(l,u){var g={};return g[l.toLowerCase()]=u.toLowerCase(),g["Webkit"+l]="webkit"+u,g["Moz"+l]="moz"+u,g}var O2={animationend:m2("Animation","AnimationEnd"),animationiteration:m2("Animation","AnimationIteration"),animationstart:m2("Animation","AnimationStart"),transitionrun:m2("Transition","TransitionRun"),transitionstart:m2("Transition","TransitionStart"),transitioncancel:m2("Transition","TransitionCancel"),transitionend:m2("Transition","TransitionEnd")},E6={},v7={};Dv&&(v7=document.createElement("div").style,"AnimationEvent"in window||(delete O2.animationend.animation,delete O2.animationiteration.animation,delete O2.animationstart.animation),"TransitionEvent"in window||delete O2.transitionend.transition);function f2(l){if(E6[l])return E6[l];if(!O2[l])return l;var u=O2[l],g;for(g in u)if(u.hasOwnProperty(g)&&g in v7)return E6[l]=u[g];return l}var b7=f2("animationend"),_7=f2("animationiteration"),x7=f2("animationstart"),nS=f2("transitionrun"),aS=f2("transitionstart"),sS=f2("transitioncancel"),S7=f2("transitionend"),E7=new Map,w6="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");w6.push("scrollEnd");function Lv(l,u){E7.set(l,u),zy(u,[l])}var w7=new WeakMap;function Sv(l,u){if(typeof l=="object"&&l!==null){var g=w7.get(l);return g!==void 0?g:(u={value:l,source:u,stack:R4(u)},w7.set(l,u),u)}return{value:l,source:u,stack:R4(u)}}var Ev=[],z2=0,A6=0;function d_(){for(var l=z2,u=A6=z2=0;u<l;){var g=Ev[u];Ev[u++]=null;var E=Ev[u];Ev[u++]=null;var ae=Ev[u];Ev[u++]=null;var qe=Ev[u];if(Ev[u++]=null,E!==null&&ae!==null){var Do=E.pending;Do===null?ae.next=ae:(ae.next=Do.next,Do.next=ae),E.pending=ae}qe!==0&&A7(g,ae,qe)}}function m_(l,u,g,E){Ev[z2++]=l,Ev[z2++]=u,Ev[z2++]=g,Ev[z2++]=E,A6|=E,l.lanes|=E,l=l.alternate,l!==null&&(l.lanes|=E)}function T6(l,u,g,E){return m_(l,u,g,E),f_(l)}function $2(l,u){return m_(l,null,null,u),f_(l)}function A7(l,u,g){l.lanes|=g;var E=l.alternate;E!==null&&(E.lanes|=g);for(var ae=!1,qe=l.return;qe!==null;)qe.childLanes|=g,E=qe.alternate,E!==null&&(E.childLanes|=g),qe.tag===22&&(l=qe.stateNode,l===null||l._visibility&1||(ae=!0)),l=qe,qe=qe.return;return l.tag===3?(qe=l.stateNode,ae&&u!==null&&(ae=31-ly(g),l=qe.hiddenUpdates,E=l[ae],E===null?l[ae]=[u]:E.push(u),u.lane=g|536870912),qe):null}function f_(l){if(50<V3)throw V3=0,I5=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var q2={};function oS(l,u,g,E){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lv(l,u,g,E){return new oS(l,u,g,E)}function C6(l){return l=l.prototype,!(!l||!l.isReactComponent)}function c4(l,u){var g=l.alternate;return g===null?(g=lv(l.tag,u,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function T7(l,u){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,u=g.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function p_(l,u,g,E,ae,qe){var Do=0;if(E=l,typeof l=="function")C6(l)&&(Do=1);else if(typeof l=="string")Do=cE(l,g,i1.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case Os:return l=lv(31,g,u,ae),l.elementType=Os,l.lanes=qe,l;case me:return p2(g.children,ae,qe,u);case _e:Do=8,ae|=24;break;case Ge:return l=lv(12,g,u,ae|2),l.elementType=Ge,l.lanes=qe,l;case Bs:return l=lv(13,g,u,ae),l.elementType=Bs,l.lanes=qe,l;case wt:return l=lv(19,g,u,ae),l.elementType=wt,l.lanes=qe,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case ve:case De:Do=10;break e;case He:Do=9;break e;case Xe:Do=11;break e;case li:Do=14;break e;case An:Do=16,E=null;break e}Do=29,g=Error(n(130,l===null?"null":typeof l,"")),E=null}return u=lv(Do,g,u,ae),u.elementType=l,u.type=E,u.lanes=qe,u}function p2(l,u,g,E){return l=lv(7,l,E,u),l.lanes=g,l}function k6(l,u,g){return l=lv(6,l,null,u),l.lanes=g,l}function M6(l,u,g){return u=lv(4,l.children!==null?l.children:[],l.key,u),u.lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var U2=[],K2=0,g_=null,y_=0,wv=[],Av=0,g2=null,h4=1,d4="";function y2(l,u){U2[K2++]=y_,U2[K2++]=g_,g_=l,y_=u}function C7(l,u,g){wv[Av++]=h4,wv[Av++]=d4,wv[Av++]=g2,g2=l;var E=h4;l=d4;var ae=32-ly(E)-1;E&=~(1<<ae),g+=1;var qe=32-ly(u)+ae;if(30<qe){var Do=ae-ae%5;qe=(E&(1<<Do)-1).toString(32),E>>=Do,ae-=Do,h4=1<<32-ly(u)+ae|g<<ae|E,d4=qe+l}else h4=1<<qe|g<<ae|E,d4=l}function R6(l){l.return!==null&&(y2(l,1),C7(l,1,0))}function P6(l){for(;l===g_;)g_=U2[--K2],U2[K2]=null,y_=U2[--K2],U2[K2]=null;for(;l===g2;)g2=wv[--Av],wv[Av]=null,d4=wv[--Av],wv[Av]=null,h4=wv[--Av],wv[Av]=null}var Jy=null,fy=null,W1=!1,v2=null,Xv=!1,I6=Error(n(519));function b2(l){var u=Error(n(418,""));throw m3(Sv(u,l)),I6}function k7(l){var u=l.stateNode,g=l.type,E=l.memoizedProps;switch(u[l1]=l,u[c1]=E,g){case"dialog":O1("cancel",u),O1("close",u);break;case"iframe":case"object":case"embed":O1("load",u);break;case"video":case"audio":for(g=0;g<F3.length;g++)O1(F3[g],u);break;case"source":O1("error",u);break;case"img":case"image":case"link":O1("error",u),O1("load",u);break;case"details":O1("toggle",u);break;case"input":O1("invalid",u),i2(u,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),k2(u);break;case"select":O1("invalid",u);break;case"textarea":O1("invalid",u),n2(u,E.value,E.defaultValue,E.children),k2(u)}g=E.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||u.textContent===""+g||E.suppressHydrationWarning===!0||jx(u.textContent,g)?(E.popover!=null&&(O1("beforetoggle",u),O1("toggle",u)),E.onScroll!=null&&O1("scroll",u),E.onScrollEnd!=null&&O1("scrollend",u),E.onClick!=null&&(u.onclick=Q_),u=!0):u=!1,u||b2(l)}function M7(l){for(Jy=l.return;Jy;)switch(Jy.tag){case 5:case 13:Xv=!1;return;case 27:case 3:Xv=!0;return;default:Jy=Jy.return}}function h3(l){if(l!==Jy)return!1;if(!W1)return M7(l),W1=!0,!1;var u=l.tag,g;if((g=u!==3&&u!==27)&&((g=u===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||W5(l.type,l.memoizedProps)),g=!g),g&&fy&&b2(l),M7(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(g=l.data,g==="/$"){if(u===0){fy=Bv(l.nextSibling);break e}u--}else g!=="$"&&g!=="$!"&&g!=="$?"||u++;l=l.nextSibling}fy=null}}else u===27?(u=fy,W4(l.type)?(l=J5,J5=null,fy=l):fy=u):fy=Jy?Bv(l.stateNode.nextSibling):null;return!0}function d3(){fy=Jy=null,W1=!1}function R7(){var l=v2;return l!==null&&(rv===null?rv=l:rv.push.apply(rv,l),v2=null),l}function m3(l){v2===null?v2=[l]:v2.push(l)}var D6=yh(null),_2=null,m4=null;function D4(l,u,g){uf(D6,u._currentValue),u._currentValue=g}function f4(l){l._currentValue=D6.current,wh(D6)}function L6(l,u,g){for(;l!==null;){var E=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,E!==null&&(E.childLanes|=u)):E!==null&&(E.childLanes&u)!==u&&(E.childLanes|=u),l===g)break;l=l.return}}function V6(l,u,g,E){var ae=l.child;for(ae!==null&&(ae.return=l);ae!==null;){var qe=ae.dependencies;if(qe!==null){var Do=ae.child;qe=qe.firstContext;e:for(;qe!==null;){var eh=qe;qe=ae;for(var Mh=0;Mh<u.length;Mh++)if(eh.context===u[Mh]){qe.lanes|=g,eh=qe.alternate,eh!==null&&(eh.lanes|=g),L6(qe.return,g,l),E||(Do=null);break e}qe=eh.next}}else if(ae.tag===18){if(Do=ae.return,Do===null)throw Error(n(341));Do.lanes|=g,qe=Do.alternate,qe!==null&&(qe.lanes|=g),L6(Do,g,l),Do=null}else Do=ae.child;if(Do!==null)Do.return=ae;else for(Do=ae;Do!==null;){if(Do===l){Do=null;break}if(ae=Do.sibling,ae!==null){ae.return=Do.return,Do=ae;break}Do=Do.return}ae=Do}}function f3(l,u,g,E){l=null;for(var ae=u,qe=!1;ae!==null;){if(!qe){if((ae.flags&524288)!==0)qe=!0;else if((ae.flags&262144)!==0)break}if(ae.tag===10){var Do=ae.alternate;if(Do===null)throw Error(n(387));if(Do=Do.memoizedProps,Do!==null){var eh=ae.type;ov(ae.pendingProps.value,Do.value)||(l!==null?l.push(eh):l=[eh])}}else if(ae===T1.current){if(Do=ae.alternate,Do===null)throw Error(n(387));Do.memoizedState.memoizedState!==ae.memoizedState.memoizedState&&(l!==null?l.push(U3):l=[U3])}ae=ae.return}l!==null&&V6(u,l,g,E),u.flags|=262144}function v_(l){for(l=l.firstContext;l!==null;){if(!ov(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function x2(l){_2=l,m4=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function jy(l){return P7(_2,l)}function b_(l,u){return _2===null&&x2(l),P7(l,u)}function P7(l,u){var g=u._currentValue;if(u={context:u,memoizedValue:g,next:null},m4===null){if(l===null)throw Error(n(308));m4=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else m4=m4.next=u;return g}var lS=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(g,E){l.push(E)}};this.abort=function(){u.aborted=!0,l.forEach(function(g){return g()})}},uS=t.unstable_scheduleCallback,cS=t.unstable_NormalPriority,My={$$typeof:De,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function B6(){return{controller:new lS,data:new Map,refCount:0}}function p3(l){l.refCount--,l.refCount===0&&uS(cS,function(){l.controller.abort()})}var g3=null,F6=0,j2=0,H2=null;function hS(l,u){if(g3===null){var g=g3=[];F6=0,j2=O5(),H2={status:"pending",value:void 0,then:function(E){g.push(E)}}}return F6++,u.then(I7,I7),u}function I7(){if(--F6===0&&g3!==null){H2!==null&&(H2.status="fulfilled");var l=g3;g3=null,j2=0,H2=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function dS(l,u){var g=[],E={status:"pending",value:null,reason:null,then:function(ae){g.push(ae)}};return l.then(function(){E.status="fulfilled",E.value=u;for(var ae=0;ae<g.length;ae++)(0,g[ae])(u)},function(ae){for(E.status="rejected",E.reason=ae,ae=0;ae<g.length;ae++)(0,g[ae])(void 0)}),E}var D7=So.S;So.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&hS(l,u),D7!==null&&D7(l,u)};var S2=yh(null);function N6(){var l=S2.current;return l!==null?l:oy.pooledCache}function __(l,u){u===null?uf(S2,S2.current):uf(S2,u.pool)}function L7(){var l=N6();return l===null?null:{parent:My._currentValue,pool:l}}var y3=Error(n(460)),V7=Error(n(474)),x_=Error(n(542)),O6={then:function(){}};function B7(l){return l=l.status,l==="fulfilled"||l==="rejected"}function S_(){}function F7(l,u,g){switch(g=l[g],g===void 0?l.push(u):g!==u&&(u.then(S_,S_),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,O7(l),l;default:if(typeof u.status=="string")u.then(S_,S_);else{if(l=oy,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(E){if(u.status==="pending"){var ae=u;ae.status="fulfilled",ae.value=E}},function(E){if(u.status==="pending"){var ae=u;ae.status="rejected",ae.reason=E}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,O7(l),l}throw v3=u,y3}}var v3=null;function N7(){if(v3===null)throw Error(n(459));var l=v3;return v3=null,l}function O7(l){if(l===y3||l===x_)throw Error(n(483))}var L4=!1;function z6(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $6(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function V4(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function B4(l,u,g){var E=l.updateQueue;if(E===null)return null;if(E=E.shared,(J1&2)!==0){var ae=E.pending;return ae===null?u.next=u:(u.next=ae.next,ae.next=u),E.pending=u,u=f_(l),A7(l,null,g),u}return m_(l,E,u,g),f_(l)}function b3(l,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194048)!==0)){var E=u.lanes;E&=l.pendingLanes,g|=E,u.lanes=g,zv(l,g)}}function q6(l,u){var g=l.updateQueue,E=l.alternate;if(E!==null&&(E=E.updateQueue,g===E)){var ae=null,qe=null;if(g=g.firstBaseUpdate,g!==null){do{var Do={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};qe===null?ae=qe=Do:qe=qe.next=Do,g=g.next}while(g!==null);qe===null?ae=qe=u:qe=qe.next=u}else ae=qe=u;g={baseState:E.baseState,firstBaseUpdate:ae,lastBaseUpdate:qe,shared:E.shared,callbacks:E.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}var U6=!1;function _3(){if(U6){var l=H2;if(l!==null)throw l}}function x3(l,u,g,E){U6=!1;var ae=l.updateQueue;L4=!1;var qe=ae.firstBaseUpdate,Do=ae.lastBaseUpdate,eh=ae.shared.pending;if(eh!==null){ae.shared.pending=null;var Mh=eh,gf=Mh.next;Mh.next=null,Do===null?qe=gf:Do.next=gf,Do=Mh;var a1=l.alternate;a1!==null&&(a1=a1.updateQueue,eh=a1.lastBaseUpdate,eh!==Do&&(eh===null?a1.firstBaseUpdate=gf:eh.next=gf,a1.lastBaseUpdate=Mh))}if(qe!==null){var o1=ae.baseState;Do=0,a1=gf=Mh=null,eh=qe;do{var t1=eh.lane&-536870913,r1=t1!==eh.lane;if(r1?(q1&t1)===t1:(E&t1)===t1){t1!==0&&t1===j2&&(U6=!0),a1!==null&&(a1=a1.next={lane:0,tag:eh.tag,payload:eh.payload,callback:null,next:null});e:{var M1=l,w1=eh;t1=u;var iy=g;switch(w1.tag){case 1:if(M1=w1.payload,typeof M1=="function"){o1=M1.call(iy,o1,t1);break e}o1=M1;break e;case 3:M1.flags=M1.flags&-65537|128;case 0:if(M1=w1.payload,t1=typeof M1=="function"?M1.call(iy,o1,t1):M1,t1==null)break e;o1=y({},o1,t1);break e;case 2:L4=!0}}t1=eh.callback,t1!==null&&(l.flags|=64,r1&&(l.flags|=8192),r1=ae.callbacks,r1===null?ae.callbacks=[t1]:r1.push(t1))}else r1={lane:t1,tag:eh.tag,payload:eh.payload,callback:eh.callback,next:null},a1===null?(gf=a1=r1,Mh=o1):a1=a1.next=r1,Do|=t1;if(eh=eh.next,eh===null){if(eh=ae.shared.pending,eh===null)break;r1=eh,eh=r1.next,r1.next=null,ae.lastBaseUpdate=r1,ae.shared.pending=null}}while(!0);a1===null&&(Mh=o1),ae.baseState=Mh,ae.firstBaseUpdate=gf,ae.lastBaseUpdate=a1,qe===null&&(ae.shared.lanes=0),K4|=Do,l.lanes=Do,l.memoizedState=o1}}function z7(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function $7(l,u){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)z7(g[l],u)}var G2=yh(null),E_=yh(0);function q7(l,u){l=x4,uf(E_,l),uf(G2,u),x4=l|u.baseLanes}function K6(){uf(E_,x4),uf(G2,G2.current)}function j6(){x4=E_.current,wh(G2),wh(E_)}var F4=0,B1=null,ty=null,Ay=null,w_=!1,W2=!1,E2=!1,A_=0,S3=0,X2=null,mS=0;function by(){throw Error(n(321))}function H6(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!ov(l[g],u[g]))return!1;return!0}function G6(l,u,g,E,ae,qe){return F4=qe,B1=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,So.H=l===null||l.memoizedState===null?A8:T8,E2=!1,qe=g(E,ae),E2=!1,W2&&(qe=K7(u,g,E,ae)),U7(l),qe}function U7(l){So.H=P_;var u=ty!==null&&ty.next!==null;if(F4=0,Ay=ty=B1=null,w_=!1,S3=0,X2=null,u)throw Error(n(300));l===null||By||(l=l.dependencies,l!==null&&v_(l)&&(By=!0))}function K7(l,u,g,E){B1=l;var ae=0;do{if(W2&&(X2=null),S3=0,W2=!1,25<=ae)throw Error(n(301));if(ae+=1,Ay=ty=null,l.updateQueue!=null){var qe=l.updateQueue;qe.lastEffect=null,qe.events=null,qe.stores=null,qe.memoCache!=null&&(qe.memoCache.index=0)}So.H=_S,qe=u(g,E)}while(W2);return qe}function fS(){var l=So.H,u=l.useState()[0];return u=typeof u.then=="function"?E3(u):u,l=l.useState()[0],(ty!==null?ty.memoizedState:null)!==l&&(B1.flags|=1024),u}function W6(){var l=A_!==0;return A_=0,l}function X6(l,u,g){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~g}function Y6(l){if(w_){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}w_=!1}F4=0,Ay=ty=B1=null,W2=!1,S3=A_=0,X2=null}function ev(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ay===null?B1.memoizedState=Ay=l:Ay=Ay.next=l,Ay}function Ty(){if(ty===null){var l=B1.alternate;l=l!==null?l.memoizedState:null}else l=ty.next;var u=Ay===null?B1.memoizedState:Ay.next;if(u!==null)Ay=u,ty=l;else{if(l===null)throw B1.alternate===null?Error(n(467)):Error(n(310));ty=l,l={memoizedState:ty.memoizedState,baseState:ty.baseState,baseQueue:ty.baseQueue,queue:ty.queue,next:null},Ay===null?B1.memoizedState=Ay=l:Ay=Ay.next=l}return Ay}function Q6(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function E3(l){var u=S3;return S3+=1,X2===null&&(X2=[]),l=F7(X2,l,u),u=B1,(Ay===null?u.memoizedState:Ay.next)===null&&(u=u.alternate,So.H=u===null||u.memoizedState===null?A8:T8),l}function T_(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return E3(l);if(l.$$typeof===De)return jy(l)}throw Error(n(438,String(l)))}function J6(l){var u=null,g=B1.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var E=B1.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(u={data:E.data.map(function(ae){return ae.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=Q6(),B1.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(l),E=0;E<l;E++)g[E]=vh;return u.index++,g}function p4(l,u){return typeof u=="function"?u(l):u}function C_(l){var u=Ty();return Z6(u,ty,l)}function Z6(l,u,g){var E=l.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=g;var ae=l.baseQueue,qe=E.pending;if(qe!==null){if(ae!==null){var Do=ae.next;ae.next=qe.next,qe.next=Do}u.baseQueue=ae=qe,E.pending=null}if(qe=l.baseState,ae===null)l.memoizedState=qe;else{u=ae.next;var eh=Do=null,Mh=null,gf=u,a1=!1;do{var o1=gf.lane&-536870913;if(o1!==gf.lane?(q1&o1)===o1:(F4&o1)===o1){var t1=gf.revertLane;if(t1===0)Mh!==null&&(Mh=Mh.next={lane:0,revertLane:0,action:gf.action,hasEagerState:gf.hasEagerState,eagerState:gf.eagerState,next:null}),o1===j2&&(a1=!0);else if((F4&t1)===t1){gf=gf.next,t1===j2&&(a1=!0);continue}else o1={lane:0,revertLane:gf.revertLane,action:gf.action,hasEagerState:gf.hasEagerState,eagerState:gf.eagerState,next:null},Mh===null?(eh=Mh=o1,Do=qe):Mh=Mh.next=o1,B1.lanes|=t1,K4|=t1;o1=gf.action,E2&&g(qe,o1),qe=gf.hasEagerState?gf.eagerState:g(qe,o1)}else t1={lane:o1,revertLane:gf.revertLane,action:gf.action,hasEagerState:gf.hasEagerState,eagerState:gf.eagerState,next:null},Mh===null?(eh=Mh=t1,Do=qe):Mh=Mh.next=t1,B1.lanes|=o1,K4|=o1;gf=gf.next}while(gf!==null&&gf!==u);if(Mh===null?Do=qe:Mh.next=eh,!ov(qe,l.memoizedState)&&(By=!0,a1&&(g=H2,g!==null)))throw g;l.memoizedState=qe,l.baseState=Do,l.baseQueue=Mh,E.lastRenderedState=qe}return ae===null&&(E.lanes=0),[l.memoizedState,E.dispatch]}function e5(l){var u=Ty(),g=u.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=l;var E=g.dispatch,ae=g.pending,qe=u.memoizedState;if(ae!==null){g.pending=null;var Do=ae=ae.next;do qe=l(qe,Do.action),Do=Do.next;while(Do!==ae);ov(qe,u.memoizedState)||(By=!0),u.memoizedState=qe,u.baseQueue===null&&(u.baseState=qe),g.lastRenderedState=qe}return[qe,E]}function j7(l,u,g){var E=B1,ae=Ty(),qe=W1;if(qe){if(g===void 0)throw Error(n(407));g=g()}else g=u();var Do=!ov((ty||ae).memoizedState,g);Do&&(ae.memoizedState=g,By=!0),ae=ae.queue;var eh=W7.bind(null,E,ae,l);if(w3(2048,8,eh,[l]),ae.getSnapshot!==u||Do||Ay!==null&&Ay.memoizedState.tag&1){if(E.flags|=2048,Y2(9,k_(),G7.bind(null,E,ae,g,u),null),oy===null)throw Error(n(349));qe||(F4&124)!==0||H7(E,u,g)}return g}function H7(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},u=B1.updateQueue,u===null?(u=Q6(),B1.updateQueue=u,u.stores=[l]):(g=u.stores,g===null?u.stores=[l]:g.push(l))}function G7(l,u,g,E){u.value=g,u.getSnapshot=E,X7(u)&&Y7(l)}function W7(l,u,g){return g(function(){X7(u)&&Y7(l)})}function X7(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!ov(l,g)}catch{return!0}}function Y7(l){var u=$2(l,2);u!==null&&mv(u,l,2)}function t5(l){var u=ev();if(typeof l=="function"){var g=l;if(l=g(),E2){vy(!0);try{g()}finally{vy(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p4,lastRenderedState:l},u}function Q7(l,u,g,E){return l.baseState=g,Z6(l,ty,typeof E=="function"?E:p4)}function pS(l,u,g,E,ae){if(R_(l))throw Error(n(485));if(l=u.action,l!==null){var qe={payload:ae,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Do){qe.listeners.push(Do)}};So.T!==null?g(!0):qe.isTransition=!1,E(qe),g=u.pending,g===null?(qe.next=u.pending=qe,J7(u,qe)):(qe.next=g.next,u.pending=g.next=qe)}}function J7(l,u){var g=u.action,E=u.payload,ae=l.state;if(u.isTransition){var qe=So.T,Do={};So.T=Do;try{var eh=g(ae,E),Mh=So.S;Mh!==null&&Mh(Do,eh),Z7(l,u,eh)}catch(gf){r5(l,u,gf)}finally{So.T=qe}}else try{qe=g(ae,E),Z7(l,u,qe)}catch(gf){r5(l,u,gf)}}function Z7(l,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(E){e8(l,u,E)},function(E){return r5(l,u,E)}):e8(l,u,g)}function e8(l,u,g){u.status="fulfilled",u.value=g,t8(u),l.state=g,u=l.pending,u!==null&&(g=u.next,g===u?l.pending=null:(g=g.next,u.next=g,J7(l,g)))}function r5(l,u,g){var E=l.pending;if(l.pending=null,E!==null){E=E.next;do u.status="rejected",u.reason=g,t8(u),u=u.next;while(u!==E)}l.action=null}function t8(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function r8(l,u){return u}function i8(l,u){if(W1){var g=oy.formState;if(g!==null){e:{var E=B1;if(W1){if(fy){t:{for(var ae=fy,qe=Xv;ae.nodeType!==8;){if(!qe){ae=null;break t}if(ae=Bv(ae.nextSibling),ae===null){ae=null;break t}}qe=ae.data,ae=qe==="F!"||qe==="F"?ae:null}if(ae){fy=Bv(ae.nextSibling),E=ae.data==="F!";break e}}b2(E)}E=!1}E&&(u=g[0])}}return g=ev(),g.memoizedState=g.baseState=u,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r8,lastRenderedState:u},g.queue=E,g=S8.bind(null,B1,E),E.dispatch=g,E=t5(!1),qe=o5.bind(null,B1,!1,E.queue),E=ev(),ae={state:u,dispatch:null,action:l,pending:null},E.queue=ae,g=pS.bind(null,B1,ae,qe,g),ae.dispatch=g,E.memoizedState=l,[u,g,!1]}function n8(l){var u=Ty();return a8(u,ty,l)}function a8(l,u,g){if(u=Z6(l,u,r8)[0],l=C_(p4)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var E=E3(u)}catch(Do){throw Do===y3?x_:Do}else E=u;u=Ty();var ae=u.queue,qe=ae.dispatch;return g!==u.memoizedState&&(B1.flags|=2048,Y2(9,k_(),gS.bind(null,ae,g),null)),[E,qe,l]}function gS(l,u){l.action=u}function s8(l){var u=Ty(),g=ty;if(g!==null)return a8(u,g,l);Ty(),u=u.memoizedState,g=Ty();var E=g.queue.dispatch;return g.memoizedState=l,[u,E,!1]}function Y2(l,u,g,E){return l={tag:l,create:g,deps:E,inst:u,next:null},u=B1.updateQueue,u===null&&(u=Q6(),B1.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=l.next=l:(E=g.next,g.next=l,l.next=E,u.lastEffect=l),l}function k_(){return{destroy:void 0,resource:void 0}}function o8(){return Ty().memoizedState}function M_(l,u,g,E){var ae=ev();E=E===void 0?null:E,B1.flags|=l,ae.memoizedState=Y2(1|u,k_(),g,E)}function w3(l,u,g,E){var ae=Ty();E=E===void 0?null:E;var qe=ae.memoizedState.inst;ty!==null&&E!==null&&H6(E,ty.memoizedState.deps)?ae.memoizedState=Y2(u,qe,g,E):(B1.flags|=l,ae.memoizedState=Y2(1|u,qe,g,E))}function l8(l,u){M_(8390656,8,l,u)}function u8(l,u){w3(2048,8,l,u)}function c8(l,u){return w3(4,2,l,u)}function h8(l,u){return w3(4,4,l,u)}function d8(l,u){if(typeof u=="function"){l=l();var g=u(l);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function m8(l,u,g){g=g!=null?g.concat([l]):null,w3(4,4,d8.bind(null,u,l),g)}function i5(){}function f8(l,u){var g=Ty();u=u===void 0?null:u;var E=g.memoizedState;return u!==null&&H6(u,E[1])?E[0]:(g.memoizedState=[l,u],l)}function p8(l,u){var g=Ty();u=u===void 0?null:u;var E=g.memoizedState;if(u!==null&&H6(u,E[1]))return E[0];if(E=l(),E2){vy(!0);try{l()}finally{vy(!1)}}return g.memoizedState=[E,u],E}function n5(l,u,g){return g===void 0||(F4&1073741824)!==0?l.memoizedState=u:(l.memoizedState=g,l=vx(),B1.lanes|=l,K4|=l,g)}function g8(l,u,g,E){return ov(g,u)?g:G2.current!==null?(l=n5(l,g,E),ov(l,u)||(By=!0),l):(F4&42)===0?(By=!0,l.memoizedState=g):(l=vx(),B1.lanes|=l,K4|=l,u)}function y8(l,u,g,E,ae){var qe=th.p;th.p=qe!==0&&8>qe?qe:8;var Do=So.T,eh={};So.T=eh,o5(l,!1,u,g);try{var Mh=ae(),gf=So.S;if(gf!==null&&gf(eh,Mh),Mh!==null&&typeof Mh=="object"&&typeof Mh.then=="function"){var a1=dS(Mh,E);A3(l,u,a1,dv(l))}else A3(l,u,E,dv(l))}catch(o1){A3(l,u,{then:function(){},status:"rejected",reason:o1},dv())}finally{th.p=qe,So.T=Do}}function yS(){}function a5(l,u,g,E){if(l.tag!==5)throw Error(n(476));var ae=v8(l).queue;y8(l,ae,u,Rs,g===null?yS:function(){return b8(l),g(E)})}function v8(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Rs,baseState:Rs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:p4,lastRenderedState:Rs},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:p4,lastRenderedState:g},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function b8(l){var u=v8(l).next.queue;A3(l,u,{},dv())}function s5(){return jy(U3)}function _8(){return Ty().memoizedState}function x8(){return Ty().memoizedState}function vS(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var g=dv();l=V4(g);var E=B4(u,l,g);E!==null&&(mv(E,u,g),b3(E,u,g)),u={cache:B6()},l.payload=u;return}u=u.return}}function bS(l,u,g){var E=dv();g={lane:E,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},R_(l)?E8(u,g):(g=T6(l,u,g,E),g!==null&&(mv(g,l,E),w8(g,u,E)))}function S8(l,u,g){var E=dv();A3(l,u,g,E)}function A3(l,u,g,E){var ae={lane:E,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(R_(l))E8(u,ae);else{var qe=l.alternate;if(l.lanes===0&&(qe===null||qe.lanes===0)&&(qe=u.lastRenderedReducer,qe!==null))try{var Do=u.lastRenderedState,eh=qe(Do,g);if(ae.hasEagerState=!0,ae.eagerState=eh,ov(eh,Do))return m_(l,u,ae,0),oy===null&&d_(),!1}catch{}finally{}if(g=T6(l,u,ae,E),g!==null)return mv(g,l,E),w8(g,u,E),!0}return!1}function o5(l,u,g,E){if(E={lane:2,revertLane:O5(),action:E,hasEagerState:!1,eagerState:null,next:null},R_(l)){if(u)throw Error(n(479))}else u=T6(l,g,E,2),u!==null&&mv(u,l,2)}function R_(l){var u=l.alternate;return l===B1||u!==null&&u===B1}function E8(l,u){W2=w_=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function w8(l,u,g){if((g&4194048)!==0){var E=u.lanes;E&=l.pendingLanes,g|=E,u.lanes=g,zv(l,g)}}var P_={readContext:jy,use:T_,useCallback:by,useContext:by,useEffect:by,useImperativeHandle:by,useLayoutEffect:by,useInsertionEffect:by,useMemo:by,useReducer:by,useRef:by,useState:by,useDebugValue:by,useDeferredValue:by,useTransition:by,useSyncExternalStore:by,useId:by,useHostTransitionStatus:by,useFormState:by,useActionState:by,useOptimistic:by,useMemoCache:by,useCacheRefresh:by},A8={readContext:jy,use:T_,useCallback:function(l,u){return ev().memoizedState=[l,u===void 0?null:u],l},useContext:jy,useEffect:l8,useImperativeHandle:function(l,u,g){g=g!=null?g.concat([l]):null,M_(4194308,4,d8.bind(null,u,l),g)},useLayoutEffect:function(l,u){return M_(4194308,4,l,u)},useInsertionEffect:function(l,u){M_(4,2,l,u)},useMemo:function(l,u){var g=ev();u=u===void 0?null:u;var E=l();if(E2){vy(!0);try{l()}finally{vy(!1)}}return g.memoizedState=[E,u],E},useReducer:function(l,u,g){var E=ev();if(g!==void 0){var ae=g(u);if(E2){vy(!0);try{g(u)}finally{vy(!1)}}}else ae=u;return E.memoizedState=E.baseState=ae,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:ae},E.queue=l,l=l.dispatch=bS.bind(null,B1,l),[E.memoizedState,l]},useRef:function(l){var u=ev();return l={current:l},u.memoizedState=l},useState:function(l){l=t5(l);var u=l.queue,g=S8.bind(null,B1,u);return u.dispatch=g,[l.memoizedState,g]},useDebugValue:i5,useDeferredValue:function(l,u){var g=ev();return n5(g,l,u)},useTransition:function(){var l=t5(!1);return l=y8.bind(null,B1,l.queue,!0,!1),ev().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,g){var E=B1,ae=ev();if(W1){if(g===void 0)throw Error(n(407));g=g()}else{if(g=u(),oy===null)throw Error(n(349));(q1&124)!==0||H7(E,u,g)}ae.memoizedState=g;var qe={value:g,getSnapshot:u};return ae.queue=qe,l8(W7.bind(null,E,qe,l),[l]),E.flags|=2048,Y2(9,k_(),G7.bind(null,E,qe,g,u),null),g},useId:function(){var l=ev(),u=oy.identifierPrefix;if(W1){var g=d4,E=h4;g=(E&~(1<<32-ly(E)-1)).toString(32)+g,u="«"+u+"R"+g,g=A_++,0<g&&(u+="H"+g.toString(32)),u+="»"}else g=mS++,u="«"+u+"r"+g.toString(32)+"»";return l.memoizedState=u},useHostTransitionStatus:s5,useFormState:i8,useActionState:i8,useOptimistic:function(l){var u=ev();u.memoizedState=u.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=o5.bind(null,B1,!0,g),g.dispatch=u,[l,u]},useMemoCache:J6,useCacheRefresh:function(){return ev().memoizedState=vS.bind(null,B1)}},T8={readContext:jy,use:T_,useCallback:f8,useContext:jy,useEffect:u8,useImperativeHandle:m8,useInsertionEffect:c8,useLayoutEffect:h8,useMemo:p8,useReducer:C_,useRef:o8,useState:function(){return C_(p4)},useDebugValue:i5,useDeferredValue:function(l,u){var g=Ty();return g8(g,ty.memoizedState,l,u)},useTransition:function(){var l=C_(p4)[0],u=Ty().memoizedState;return[typeof l=="boolean"?l:E3(l),u]},useSyncExternalStore:j7,useId:_8,useHostTransitionStatus:s5,useFormState:n8,useActionState:n8,useOptimistic:function(l,u){var g=Ty();return Q7(g,ty,l,u)},useMemoCache:J6,useCacheRefresh:x8},_S={readContext:jy,use:T_,useCallback:f8,useContext:jy,useEffect:u8,useImperativeHandle:m8,useInsertionEffect:c8,useLayoutEffect:h8,useMemo:p8,useReducer:e5,useRef:o8,useState:function(){return e5(p4)},useDebugValue:i5,useDeferredValue:function(l,u){var g=Ty();return ty===null?n5(g,l,u):g8(g,ty.memoizedState,l,u)},useTransition:function(){var l=e5(p4)[0],u=Ty().memoizedState;return[typeof l=="boolean"?l:E3(l),u]},useSyncExternalStore:j7,useId:_8,useHostTransitionStatus:s5,useFormState:s8,useActionState:s8,useOptimistic:function(l,u){var g=Ty();return ty!==null?Q7(g,ty,l,u):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:J6,useCacheRefresh:x8},Q2=null,T3=0;function I_(l){var u=T3;return T3+=1,Q2===null&&(Q2=[]),F7(Q2,l,u)}function C3(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function D_(l,u){throw u.$$typeof===A?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function C8(l){var u=l._init;return u(l._payload)}function k8(l){function u(hf,cf){if(l){var pf=hf.deletions;pf===null?(hf.deletions=[cf],hf.flags|=16):pf.push(cf)}}function g(hf,cf){if(!l)return null;for(;cf!==null;)u(hf,cf),cf=cf.sibling;return null}function E(hf){for(var cf=new Map;hf!==null;)hf.key!==null?cf.set(hf.key,hf):cf.set(hf.index,hf),hf=hf.sibling;return cf}function ae(hf,cf){return hf=c4(hf,cf),hf.index=0,hf.sibling=null,hf}function qe(hf,cf,pf){return hf.index=pf,l?(pf=hf.alternate,pf!==null?(pf=pf.index,pf<cf?(hf.flags|=67108866,cf):pf):(hf.flags|=67108866,cf)):(hf.flags|=1048576,cf)}function Do(hf){return l&&hf.alternate===null&&(hf.flags|=67108866),hf}function eh(hf,cf,pf,s1){return cf===null||cf.tag!==6?(cf=k6(pf,hf.mode,s1),cf.return=hf,cf):(cf=ae(cf,pf),cf.return=hf,cf)}function Mh(hf,cf,pf,s1){var g1=pf.type;return g1===me?a1(hf,cf,pf.props.children,s1,pf.key):cf!==null&&(cf.elementType===g1||typeof g1=="object"&&g1!==null&&g1.$$typeof===An&&C8(g1)===cf.type)?(cf=ae(cf,pf.props),C3(cf,pf),cf.return=hf,cf):(cf=p_(pf.type,pf.key,pf.props,null,hf.mode,s1),C3(cf,pf),cf.return=hf,cf)}function gf(hf,cf,pf,s1){return cf===null||cf.tag!==4||cf.stateNode.containerInfo!==pf.containerInfo||cf.stateNode.implementation!==pf.implementation?(cf=M6(pf,hf.mode,s1),cf.return=hf,cf):(cf=ae(cf,pf.children||[]),cf.return=hf,cf)}function a1(hf,cf,pf,s1,g1){return cf===null||cf.tag!==7?(cf=p2(pf,hf.mode,s1,g1),cf.return=hf,cf):(cf=ae(cf,pf),cf.return=hf,cf)}function o1(hf,cf,pf){if(typeof cf=="string"&&cf!==""||typeof cf=="number"||typeof cf=="bigint")return cf=k6(""+cf,hf.mode,pf),cf.return=hf,cf;if(typeof cf=="object"&&cf!==null){switch(cf.$$typeof){case P:return pf=p_(cf.type,cf.key,cf.props,null,hf.mode,pf),C3(pf,cf),pf.return=hf,pf;case Z:return cf=M6(cf,hf.mode,pf),cf.return=hf,cf;case An:var s1=cf._init;return cf=s1(cf._payload),o1(hf,cf,pf)}if(df(cf)||Hc(cf))return cf=p2(cf,hf.mode,pf,null),cf.return=hf,cf;if(typeof cf.then=="function")return o1(hf,I_(cf),pf);if(cf.$$typeof===De)return o1(hf,b_(hf,cf),pf);D_(hf,cf)}return null}function t1(hf,cf,pf,s1){var g1=cf!==null?cf.key:null;if(typeof pf=="string"&&pf!==""||typeof pf=="number"||typeof pf=="bigint")return g1!==null?null:eh(hf,cf,""+pf,s1);if(typeof pf=="object"&&pf!==null){switch(pf.$$typeof){case P:return pf.key===g1?Mh(hf,cf,pf,s1):null;case Z:return pf.key===g1?gf(hf,cf,pf,s1):null;case An:return g1=pf._init,pf=g1(pf._payload),t1(hf,cf,pf,s1)}if(df(pf)||Hc(pf))return g1!==null?null:a1(hf,cf,pf,s1,null);if(typeof pf.then=="function")return t1(hf,cf,I_(pf),s1);if(pf.$$typeof===De)return t1(hf,cf,b_(hf,pf),s1);D_(hf,pf)}return null}function r1(hf,cf,pf,s1,g1){if(typeof s1=="string"&&s1!==""||typeof s1=="number"||typeof s1=="bigint")return hf=hf.get(pf)||null,eh(cf,hf,""+s1,g1);if(typeof s1=="object"&&s1!==null){switch(s1.$$typeof){case P:return hf=hf.get(s1.key===null?pf:s1.key)||null,Mh(cf,hf,s1,g1);case Z:return hf=hf.get(s1.key===null?pf:s1.key)||null,gf(cf,hf,s1,g1);case An:var F1=s1._init;return s1=F1(s1._payload),r1(hf,cf,pf,s1,g1)}if(df(s1)||Hc(s1))return hf=hf.get(pf)||null,a1(cf,hf,s1,g1,null);if(typeof s1.then=="function")return r1(hf,cf,pf,I_(s1),g1);if(s1.$$typeof===De)return r1(hf,cf,pf,b_(cf,s1),g1);D_(cf,s1)}return null}function M1(hf,cf,pf,s1){for(var g1=null,F1=null,S1=cf,A1=cf=0,Ny=null;S1!==null&&A1<pf.length;A1++){S1.index>A1?(Ny=S1,S1=null):Ny=S1.sibling;var K1=t1(hf,S1,pf[A1],s1);if(K1===null){S1===null&&(S1=Ny);break}l&&S1&&K1.alternate===null&&u(hf,S1),cf=qe(K1,cf,A1),F1===null?g1=K1:F1.sibling=K1,F1=K1,S1=Ny}if(A1===pf.length)return g(hf,S1),W1&&y2(hf,A1),g1;if(S1===null){for(;A1<pf.length;A1++)S1=o1(hf,pf[A1],s1),S1!==null&&(cf=qe(S1,cf,A1),F1===null?g1=S1:F1.sibling=S1,F1=S1);return W1&&y2(hf,A1),g1}for(S1=E(S1);A1<pf.length;A1++)Ny=r1(S1,hf,A1,pf[A1],s1),Ny!==null&&(l&&Ny.alternate!==null&&S1.delete(Ny.key===null?A1:Ny.key),cf=qe(Ny,cf,A1),F1===null?g1=Ny:F1.sibling=Ny,F1=Ny);return l&&S1.forEach(function(Z4){return u(hf,Z4)}),W1&&y2(hf,A1),g1}function w1(hf,cf,pf,s1){if(pf==null)throw Error(n(151));for(var g1=null,F1=null,S1=cf,A1=cf=0,Ny=null,K1=pf.next();S1!==null&&!K1.done;A1++,K1=pf.next()){S1.index>A1?(Ny=S1,S1=null):Ny=S1.sibling;var Z4=t1(hf,S1,K1.value,s1);if(Z4===null){S1===null&&(S1=Ny);break}l&&S1&&Z4.alternate===null&&u(hf,S1),cf=qe(Z4,cf,A1),F1===null?g1=Z4:F1.sibling=Z4,F1=Z4,S1=Ny}if(K1.done)return g(hf,S1),W1&&y2(hf,A1),g1;if(S1===null){for(;!K1.done;A1++,K1=pf.next())K1=o1(hf,K1.value,s1),K1!==null&&(cf=qe(K1,cf,A1),F1===null?g1=K1:F1.sibling=K1,F1=K1);return W1&&y2(hf,A1),g1}for(S1=E(S1);!K1.done;A1++,K1=pf.next())K1=r1(S1,hf,A1,K1.value,s1),K1!==null&&(l&&K1.alternate!==null&&S1.delete(K1.key===null?A1:K1.key),cf=qe(K1,cf,A1),F1===null?g1=K1:F1.sibling=K1,F1=K1);return l&&S1.forEach(function(SE){return u(hf,SE)}),W1&&y2(hf,A1),g1}function iy(hf,cf,pf,s1){if(typeof pf=="object"&&pf!==null&&pf.type===me&&pf.key===null&&(pf=pf.props.children),typeof pf=="object"&&pf!==null){switch(pf.$$typeof){case P:e:{for(var g1=pf.key;cf!==null;){if(cf.key===g1){if(g1=pf.type,g1===me){if(cf.tag===7){g(hf,cf.sibling),s1=ae(cf,pf.props.children),s1.return=hf,hf=s1;break e}}else if(cf.elementType===g1||typeof g1=="object"&&g1!==null&&g1.$$typeof===An&&C8(g1)===cf.type){g(hf,cf.sibling),s1=ae(cf,pf.props),C3(s1,pf),s1.return=hf,hf=s1;break e}g(hf,cf);break}else u(hf,cf);cf=cf.sibling}pf.type===me?(s1=p2(pf.props.children,hf.mode,s1,pf.key),s1.return=hf,hf=s1):(s1=p_(pf.type,pf.key,pf.props,null,hf.mode,s1),C3(s1,pf),s1.return=hf,hf=s1)}return Do(hf);case Z:e:{for(g1=pf.key;cf!==null;){if(cf.key===g1)if(cf.tag===4&&cf.stateNode.containerInfo===pf.containerInfo&&cf.stateNode.implementation===pf.implementation){g(hf,cf.sibling),s1=ae(cf,pf.children||[]),s1.return=hf,hf=s1;break e}else{g(hf,cf);break}else u(hf,cf);cf=cf.sibling}s1=M6(pf,hf.mode,s1),s1.return=hf,hf=s1}return Do(hf);case An:return g1=pf._init,pf=g1(pf._payload),iy(hf,cf,pf,s1)}if(df(pf))return M1(hf,cf,pf,s1);if(Hc(pf)){if(g1=Hc(pf),typeof g1!="function")throw Error(n(150));return pf=g1.call(pf),w1(hf,cf,pf,s1)}if(typeof pf.then=="function")return iy(hf,cf,I_(pf),s1);if(pf.$$typeof===De)return iy(hf,cf,b_(hf,pf),s1);D_(hf,pf)}return typeof pf=="string"&&pf!==""||typeof pf=="number"||typeof pf=="bigint"?(pf=""+pf,cf!==null&&cf.tag===6?(g(hf,cf.sibling),s1=ae(cf,pf),s1.return=hf,hf=s1):(g(hf,cf),s1=k6(pf,hf.mode,s1),s1.return=hf,hf=s1),Do(hf)):g(hf,cf)}return function(hf,cf,pf,s1){try{T3=0;var g1=iy(hf,cf,pf,s1);return Q2=null,g1}catch(S1){if(S1===y3||S1===x_)throw S1;var F1=lv(29,S1,null,hf.mode);return F1.lanes=s1,F1.return=hf,F1}finally{}}}var J2=k8(!0),M8=k8(!1),Tv=yh(null),Yv=null;function N4(l){var u=l.alternate;uf(Ry,Ry.current&1),uf(Tv,l),Yv===null&&(u===null||G2.current!==null||u.memoizedState!==null)&&(Yv=l)}function R8(l){if(l.tag===22){if(uf(Ry,Ry.current),uf(Tv,l),Yv===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(Yv=l)}}else O4()}function O4(){uf(Ry,Ry.current),uf(Tv,Tv.current)}function g4(l){wh(Tv),Yv===l&&(Yv=null),wh(Ry)}var Ry=yh(0);function L_(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||Q5(g)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function l5(l,u,g,E){u=l.memoizedState,g=g(E,u),g=g==null?u:y({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var u5={enqueueSetState:function(l,u,g){l=l._reactInternals;var E=dv(),ae=V4(E);ae.payload=u,g!=null&&(ae.callback=g),u=B4(l,ae,E),u!==null&&(mv(u,l,E),b3(u,l,E))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var E=dv(),ae=V4(E);ae.tag=1,ae.payload=u,g!=null&&(ae.callback=g),u=B4(l,ae,E),u!==null&&(mv(u,l,E),b3(u,l,E))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=dv(),E=V4(g);E.tag=2,u!=null&&(E.callback=u),u=B4(l,E,g),u!==null&&(mv(u,l,g),b3(u,l,g))}};function P8(l,u,g,E,ae,qe,Do){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(E,qe,Do):u.prototype&&u.prototype.isPureReactComponent?!u3(g,E)||!u3(ae,qe):!0}function I8(l,u,g,E){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,E),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,E),u.state!==l&&u5.enqueueReplaceState(u,u.state,null)}function w2(l,u){var g=u;if("ref"in u){g={};for(var E in u)E!=="ref"&&(g[E]=u[E])}if(l=l.defaultProps){g===u&&(g=y({},g));for(var ae in l)g[ae]===void 0&&(g[ae]=l[ae])}return g}var V_=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function D8(l){V_(l)}function L8(l){console.error(l)}function V8(l){V_(l)}function B_(l,u){try{var g=l.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(E){setTimeout(function(){throw E})}}function B8(l,u,g){try{var E=l.onCaughtError;E(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(ae){setTimeout(function(){throw ae})}}function c5(l,u,g){return g=V4(g),g.tag=3,g.payload={element:null},g.callback=function(){B_(l,u)},g}function F8(l){return l=V4(l),l.tag=3,l}function N8(l,u,g,E){var ae=g.type.getDerivedStateFromError;if(typeof ae=="function"){var qe=E.value;l.payload=function(){return ae(qe)},l.callback=function(){B8(u,g,E)}}var Do=g.stateNode;Do!==null&&typeof Do.componentDidCatch=="function"&&(l.callback=function(){B8(u,g,E),typeof ae!="function"&&(j4===null?j4=new Set([this]):j4.add(this));var eh=E.stack;this.componentDidCatch(E.value,{componentStack:eh!==null?eh:""})})}function xS(l,u,g,E,ae){if(g.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(u=g.alternate,u!==null&&f3(u,g,ae,!0),g=Tv.current,g!==null){switch(g.tag){case 13:return Yv===null?L5():g.alternate===null&&py===0&&(py=3),g.flags&=-257,g.flags|=65536,g.lanes=ae,E===O6?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([E]):u.add(E),B5(l,E,ae)),!1;case 22:return g.flags|=65536,E===O6?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([E])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([E]):g.add(E)),B5(l,E,ae)),!1}throw Error(n(435,g.tag))}return B5(l,E,ae),L5(),!1}if(W1)return u=Tv.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=ae,E!==I6&&(l=Error(n(422),{cause:E}),m3(Sv(l,g)))):(E!==I6&&(u=Error(n(423),{cause:E}),m3(Sv(u,g))),l=l.current.alternate,l.flags|=65536,ae&=-ae,l.lanes|=ae,E=Sv(E,g),ae=c5(l.stateNode,E,ae),q6(l,ae),py!==4&&(py=2)),!1;var qe=Error(n(520),{cause:E});if(qe=Sv(qe,g),L3===null?L3=[qe]:L3.push(qe),py!==4&&(py=2),u===null)return!0;E=Sv(E,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,l=ae&-ae,g.lanes|=l,l=c5(g.stateNode,E,l),q6(g,l),!1;case 1:if(u=g.type,qe=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||qe!==null&&typeof qe.componentDidCatch=="function"&&(j4===null||!j4.has(qe))))return g.flags|=65536,ae&=-ae,g.lanes|=ae,ae=F8(ae),N8(ae,l,g,E),q6(g,ae),!1}g=g.return}while(g!==null);return!1}var O8=Error(n(461)),By=!1;function qy(l,u,g,E){u.child=l===null?M8(u,null,g,E):J2(u,l.child,g,E)}function z8(l,u,g,E,ae){g=g.render;var qe=u.ref;if("ref"in E){var Do={};for(var eh in E)eh!=="ref"&&(Do[eh]=E[eh])}else Do=E;return x2(u),E=G6(l,u,g,Do,qe,ae),eh=W6(),l!==null&&!By?(X6(l,u,ae),y4(l,u,ae)):(W1&&eh&&R6(u),u.flags|=1,qy(l,u,E,ae),u.child)}function $8(l,u,g,E,ae){if(l===null){var qe=g.type;return typeof qe=="function"&&!C6(qe)&&qe.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=qe,q8(l,u,qe,E,ae)):(l=p_(g.type,null,E,u,u.mode,ae),l.ref=u.ref,l.return=u,u.child=l)}if(qe=l.child,!v5(l,ae)){var Do=qe.memoizedProps;if(g=g.compare,g=g!==null?g:u3,g(Do,E)&&l.ref===u.ref)return y4(l,u,ae)}return u.flags|=1,l=c4(qe,E),l.ref=u.ref,l.return=u,u.child=l}function q8(l,u,g,E,ae){if(l!==null){var qe=l.memoizedProps;if(u3(qe,E)&&l.ref===u.ref)if(By=!1,u.pendingProps=E=qe,v5(l,ae))(l.flags&131072)!==0&&(By=!0);else return u.lanes=l.lanes,y4(l,u,ae)}return h5(l,u,g,E,ae)}function U8(l,u,g){var E=u.pendingProps,ae=E.children,qe=l!==null?l.memoizedState:null;if(E.mode==="hidden"){if((u.flags&128)!==0){if(E=qe!==null?qe.baseLanes|g:g,l!==null){for(ae=u.child=l.child,qe=0;ae!==null;)qe=qe|ae.lanes|ae.childLanes,ae=ae.sibling;u.childLanes=qe&~E}else u.childLanes=0,u.child=null;return K8(l,u,E,g)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&__(u,qe!==null?qe.cachePool:null),qe!==null?q7(u,qe):K6(),R8(u);else return u.lanes=u.childLanes=536870912,K8(l,u,qe!==null?qe.baseLanes|g:g,g)}else qe!==null?(__(u,qe.cachePool),q7(u,qe),O4(),u.memoizedState=null):(l!==null&&__(u,null),K6(),O4());return qy(l,u,ae,g),u.child}function K8(l,u,g,E){var ae=N6();return ae=ae===null?null:{parent:My._currentValue,pool:ae},u.memoizedState={baseLanes:g,cachePool:ae},l!==null&&__(u,null),K6(),R8(u),l!==null&&f3(l,u,E,!0),null}function F_(l,u){var g=u.ref;if(g===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(n(284));(l===null||l.ref!==g)&&(u.flags|=4194816)}}function h5(l,u,g,E,ae){return x2(u),g=G6(l,u,g,E,void 0,ae),E=W6(),l!==null&&!By?(X6(l,u,ae),y4(l,u,ae)):(W1&&E&&R6(u),u.flags|=1,qy(l,u,g,ae),u.child)}function j8(l,u,g,E,ae,qe){return x2(u),u.updateQueue=null,g=K7(u,E,g,ae),U7(l),E=W6(),l!==null&&!By?(X6(l,u,qe),y4(l,u,qe)):(W1&&E&&R6(u),u.flags|=1,qy(l,u,g,qe),u.child)}function H8(l,u,g,E,ae){if(x2(u),u.stateNode===null){var qe=q2,Do=g.contextType;typeof Do=="object"&&Do!==null&&(qe=jy(Do)),qe=new g(E,qe),u.memoizedState=qe.state!==null&&qe.state!==void 0?qe.state:null,qe.updater=u5,u.stateNode=qe,qe._reactInternals=u,qe=u.stateNode,qe.props=E,qe.state=u.memoizedState,qe.refs={},z6(u),Do=g.contextType,qe.context=typeof Do=="object"&&Do!==null?jy(Do):q2,qe.state=u.memoizedState,Do=g.getDerivedStateFromProps,typeof Do=="function"&&(l5(u,g,Do,E),qe.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof qe.getSnapshotBeforeUpdate=="function"||typeof qe.UNSAFE_componentWillMount!="function"&&typeof qe.componentWillMount!="function"||(Do=qe.state,typeof qe.componentWillMount=="function"&&qe.componentWillMount(),typeof qe.UNSAFE_componentWillMount=="function"&&qe.UNSAFE_componentWillMount(),Do!==qe.state&&u5.enqueueReplaceState(qe,qe.state,null),x3(u,E,qe,ae),_3(),qe.state=u.memoizedState),typeof qe.componentDidMount=="function"&&(u.flags|=4194308),E=!0}else if(l===null){qe=u.stateNode;var eh=u.memoizedProps,Mh=w2(g,eh);qe.props=Mh;var gf=qe.context,a1=g.contextType;Do=q2,typeof a1=="object"&&a1!==null&&(Do=jy(a1));var o1=g.getDerivedStateFromProps;a1=typeof o1=="function"||typeof qe.getSnapshotBeforeUpdate=="function",eh=u.pendingProps!==eh,a1||typeof qe.UNSAFE_componentWillReceiveProps!="function"&&typeof qe.componentWillReceiveProps!="function"||(eh||gf!==Do)&&I8(u,qe,E,Do),L4=!1;var t1=u.memoizedState;qe.state=t1,x3(u,E,qe,ae),_3(),gf=u.memoizedState,eh||t1!==gf||L4?(typeof o1=="function"&&(l5(u,g,o1,E),gf=u.memoizedState),(Mh=L4||P8(u,g,Mh,E,t1,gf,Do))?(a1||typeof qe.UNSAFE_componentWillMount!="function"&&typeof qe.componentWillMount!="function"||(typeof qe.componentWillMount=="function"&&qe.componentWillMount(),typeof qe.UNSAFE_componentWillMount=="function"&&qe.UNSAFE_componentWillMount()),typeof qe.componentDidMount=="function"&&(u.flags|=4194308)):(typeof qe.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=E,u.memoizedState=gf),qe.props=E,qe.state=gf,qe.context=Do,E=Mh):(typeof qe.componentDidMount=="function"&&(u.flags|=4194308),E=!1)}else{qe=u.stateNode,$6(l,u),Do=u.memoizedProps,a1=w2(g,Do),qe.props=a1,o1=u.pendingProps,t1=qe.context,gf=g.contextType,Mh=q2,typeof gf=="object"&&gf!==null&&(Mh=jy(gf)),eh=g.getDerivedStateFromProps,(gf=typeof eh=="function"||typeof qe.getSnapshotBeforeUpdate=="function")||typeof qe.UNSAFE_componentWillReceiveProps!="function"&&typeof qe.componentWillReceiveProps!="function"||(Do!==o1||t1!==Mh)&&I8(u,qe,E,Mh),L4=!1,t1=u.memoizedState,qe.state=t1,x3(u,E,qe,ae),_3();var r1=u.memoizedState;Do!==o1||t1!==r1||L4||l!==null&&l.dependencies!==null&&v_(l.dependencies)?(typeof eh=="function"&&(l5(u,g,eh,E),r1=u.memoizedState),(a1=L4||P8(u,g,a1,E,t1,r1,Mh)||l!==null&&l.dependencies!==null&&v_(l.dependencies))?(gf||typeof qe.UNSAFE_componentWillUpdate!="function"&&typeof qe.componentWillUpdate!="function"||(typeof qe.componentWillUpdate=="function"&&qe.componentWillUpdate(E,r1,Mh),typeof qe.UNSAFE_componentWillUpdate=="function"&&qe.UNSAFE_componentWillUpdate(E,r1,Mh)),typeof qe.componentDidUpdate=="function"&&(u.flags|=4),typeof qe.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof qe.componentDidUpdate!="function"||Do===l.memoizedProps&&t1===l.memoizedState||(u.flags|=4),typeof qe.getSnapshotBeforeUpdate!="function"||Do===l.memoizedProps&&t1===l.memoizedState||(u.flags|=1024),u.memoizedProps=E,u.memoizedState=r1),qe.props=E,qe.state=r1,qe.context=Mh,E=a1):(typeof qe.componentDidUpdate!="function"||Do===l.memoizedProps&&t1===l.memoizedState||(u.flags|=4),typeof qe.getSnapshotBeforeUpdate!="function"||Do===l.memoizedProps&&t1===l.memoizedState||(u.flags|=1024),E=!1)}return qe=E,F_(l,u),E=(u.flags&128)!==0,qe||E?(qe=u.stateNode,g=E&&typeof g.getDerivedStateFromError!="function"?null:qe.render(),u.flags|=1,l!==null&&E?(u.child=J2(u,l.child,null,ae),u.child=J2(u,null,g,ae)):qy(l,u,g,ae),u.memoizedState=qe.state,l=u.child):l=y4(l,u,ae),l}function G8(l,u,g,E){return d3(),u.flags|=256,qy(l,u,g,E),u.child}var d5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function m5(l){return{baseLanes:l,cachePool:L7()}}function f5(l,u,g){return l=l!==null?l.childLanes&~g:0,u&&(l|=Cv),l}function W8(l,u,g){var E=u.pendingProps,ae=!1,qe=(u.flags&128)!==0,Do;if((Do=qe)||(Do=l!==null&&l.memoizedState===null?!1:(Ry.current&2)!==0),Do&&(ae=!0,u.flags&=-129),Do=(u.flags&32)!==0,u.flags&=-33,l===null){if(W1){if(ae?N4(u):O4(),W1){var eh=fy,Mh;if(Mh=eh){e:{for(Mh=eh,eh=Xv;Mh.nodeType!==8;){if(!eh){eh=null;break e}if(Mh=Bv(Mh.nextSibling),Mh===null){eh=null;break e}}eh=Mh}eh!==null?(u.memoizedState={dehydrated:eh,treeContext:g2!==null?{id:h4,overflow:d4}:null,retryLane:536870912,hydrationErrors:null},Mh=lv(18,null,null,0),Mh.stateNode=eh,Mh.return=u,u.child=Mh,Jy=u,fy=null,Mh=!0):Mh=!1}Mh||b2(u)}if(eh=u.memoizedState,eh!==null&&(eh=eh.dehydrated,eh!==null))return Q5(eh)?u.lanes=32:u.lanes=536870912,null;g4(u)}return eh=E.children,E=E.fallback,ae?(O4(),ae=u.mode,eh=N_({mode:"hidden",children:eh},ae),E=p2(E,ae,g,null),eh.return=u,E.return=u,eh.sibling=E,u.child=eh,ae=u.child,ae.memoizedState=m5(g),ae.childLanes=f5(l,Do,g),u.memoizedState=d5,E):(N4(u),p5(u,eh))}if(Mh=l.memoizedState,Mh!==null&&(eh=Mh.dehydrated,eh!==null)){if(qe)u.flags&256?(N4(u),u.flags&=-257,u=g5(l,u,g)):u.memoizedState!==null?(O4(),u.child=l.child,u.flags|=128,u=null):(O4(),ae=E.fallback,eh=u.mode,E=N_({mode:"visible",children:E.children},eh),ae=p2(ae,eh,g,null),ae.flags|=2,E.return=u,ae.return=u,E.sibling=ae,u.child=E,J2(u,l.child,null,g),E=u.child,E.memoizedState=m5(g),E.childLanes=f5(l,Do,g),u.memoizedState=d5,u=ae);else if(N4(u),Q5(eh)){if(Do=eh.nextSibling&&eh.nextSibling.dataset,Do)var gf=Do.dgst;Do=gf,E=Error(n(419)),E.stack="",E.digest=Do,m3({value:E,source:null,stack:null}),u=g5(l,u,g)}else if(By||f3(l,u,g,!1),Do=(g&l.childLanes)!==0,By||Do){if(Do=oy,Do!==null&&(E=g&-g,E=(E&42)!==0?1:$v(E),E=(E&(Do.suspendedLanes|g))!==0?0:E,E!==0&&E!==Mh.retryLane))throw Mh.retryLane=E,$2(l,E),mv(Do,l,E),O8;eh.data==="$?"||L5(),u=g5(l,u,g)}else eh.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=Mh.treeContext,fy=Bv(eh.nextSibling),Jy=u,W1=!0,v2=null,Xv=!1,l!==null&&(wv[Av++]=h4,wv[Av++]=d4,wv[Av++]=g2,h4=l.id,d4=l.overflow,g2=u),u=p5(u,E.children),u.flags|=4096);return u}return ae?(O4(),ae=E.fallback,eh=u.mode,Mh=l.child,gf=Mh.sibling,E=c4(Mh,{mode:"hidden",children:E.children}),E.subtreeFlags=Mh.subtreeFlags&65011712,gf!==null?ae=c4(gf,ae):(ae=p2(ae,eh,g,null),ae.flags|=2),ae.return=u,E.return=u,E.sibling=ae,u.child=E,E=ae,ae=u.child,eh=l.child.memoizedState,eh===null?eh=m5(g):(Mh=eh.cachePool,Mh!==null?(gf=My._currentValue,Mh=Mh.parent!==gf?{parent:gf,pool:gf}:Mh):Mh=L7(),eh={baseLanes:eh.baseLanes|g,cachePool:Mh}),ae.memoizedState=eh,ae.childLanes=f5(l,Do,g),u.memoizedState=d5,E):(N4(u),g=l.child,l=g.sibling,g=c4(g,{mode:"visible",children:E.children}),g.return=u,g.sibling=null,l!==null&&(Do=u.deletions,Do===null?(u.deletions=[l],u.flags|=16):Do.push(l)),u.child=g,u.memoizedState=null,g)}function p5(l,u){return u=N_({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function N_(l,u){return l=lv(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function g5(l,u,g){return J2(u,l.child,null,g),l=p5(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function X8(l,u,g){l.lanes|=u;var E=l.alternate;E!==null&&(E.lanes|=u),L6(l.return,u,g)}function y5(l,u,g,E,ae){var qe=l.memoizedState;qe===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:E,tail:g,tailMode:ae}:(qe.isBackwards=u,qe.rendering=null,qe.renderingStartTime=0,qe.last=E,qe.tail=g,qe.tailMode=ae)}function Y8(l,u,g){var E=u.pendingProps,ae=E.revealOrder,qe=E.tail;if(qy(l,u,E.children,g),E=Ry.current,(E&2)!==0)E=E&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&X8(l,g,u);else if(l.tag===19)X8(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}E&=1}switch(uf(Ry,E),ae){case"forwards":for(g=u.child,ae=null;g!==null;)l=g.alternate,l!==null&&L_(l)===null&&(ae=g),g=g.sibling;g=ae,g===null?(ae=u.child,u.child=null):(ae=g.sibling,g.sibling=null),y5(u,!1,ae,g,qe);break;case"backwards":for(g=null,ae=u.child,u.child=null;ae!==null;){if(l=ae.alternate,l!==null&&L_(l)===null){u.child=ae;break}l=ae.sibling,ae.sibling=g,g=ae,ae=l}y5(u,!0,g,null,qe);break;case"together":y5(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function y4(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),K4|=u.lanes,(g&u.childLanes)===0)if(l!==null){if(f3(l,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,g=c4(l,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,g=g.sibling=c4(l,l.pendingProps),g.return=u;g.sibling=null}return u.child}function v5(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&v_(l)))}function ES(l,u,g){switch(u.tag){case 3:p1(u,u.stateNode.containerInfo),D4(u,My,l.memoizedState.cache),d3();break;case 27:case 5:C1(u);break;case 4:p1(u,u.stateNode.containerInfo);break;case 10:D4(u,u.type,u.memoizedProps.value);break;case 13:var E=u.memoizedState;if(E!==null)return E.dehydrated!==null?(N4(u),u.flags|=128,null):(g&u.child.childLanes)!==0?W8(l,u,g):(N4(u),l=y4(l,u,g),l!==null?l.sibling:null);N4(u);break;case 19:var ae=(l.flags&128)!==0;if(E=(g&u.childLanes)!==0,E||(f3(l,u,g,!1),E=(g&u.childLanes)!==0),ae){if(E)return Y8(l,u,g);u.flags|=128}if(ae=u.memoizedState,ae!==null&&(ae.rendering=null,ae.tail=null,ae.lastEffect=null),uf(Ry,Ry.current),E)break;return null;case 22:case 23:return u.lanes=0,U8(l,u,g);case 24:D4(u,My,l.memoizedState.cache)}return y4(l,u,g)}function Q8(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps)By=!0;else{if(!v5(l,g)&&(u.flags&128)===0)return By=!1,ES(l,u,g);By=(l.flags&131072)!==0}else By=!1,W1&&(u.flags&1048576)!==0&&C7(u,y_,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var E=u.elementType,ae=E._init;if(E=ae(E._payload),u.type=E,typeof E=="function")C6(E)?(l=w2(E,l),u.tag=1,u=H8(null,u,E,l,g)):(u.tag=0,u=h5(null,u,E,l,g));else{if(E!=null){if(ae=E.$$typeof,ae===Xe){u.tag=11,u=z8(null,u,E,l,g);break e}else if(ae===li){u.tag=14,u=$8(null,u,E,l,g);break e}}throw u=e1(E)||E,Error(n(306,u,""))}}return u;case 0:return h5(l,u,u.type,u.pendingProps,g);case 1:return E=u.type,ae=w2(E,u.pendingProps),H8(l,u,E,ae,g);case 3:e:{if(p1(u,u.stateNode.containerInfo),l===null)throw Error(n(387));E=u.pendingProps;var qe=u.memoizedState;ae=qe.element,$6(l,u),x3(u,E,null,g);var Do=u.memoizedState;if(E=Do.cache,D4(u,My,E),E!==qe.cache&&V6(u,[My],g,!0),_3(),E=Do.element,qe.isDehydrated)if(qe={element:E,isDehydrated:!1,cache:Do.cache},u.updateQueue.baseState=qe,u.memoizedState=qe,u.flags&256){u=G8(l,u,E,g);break e}else if(E!==ae){ae=Sv(Error(n(424)),u),m3(ae),u=G8(l,u,E,g);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(fy=Bv(l.firstChild),Jy=u,W1=!0,v2=null,Xv=!0,g=M8(u,null,E,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(d3(),E===ae){u=y4(l,u,g);break e}qy(l,u,E,g)}u=u.child}return u;case 26:return F_(l,u),l===null?(g=t9(u.type,null,u.pendingProps,null))?u.memoizedState=g:W1||(g=u.type,l=u.pendingProps,E=J_(h1.current).createElement(g),E[l1]=u,E[c1]=l,Ky(E,g,l),I1(E),u.stateNode=E):u.memoizedState=t9(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return C1(u),l===null&&W1&&(E=u.stateNode=Jx(u.type,u.pendingProps,h1.current),Jy=u,Xv=!0,ae=fy,W4(u.type)?(J5=ae,fy=Bv(E.firstChild)):fy=ae),qy(l,u,u.pendingProps.children,g),F_(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&W1&&((ae=E=fy)&&(E=QS(E,u.type,u.pendingProps,Xv),E!==null?(u.stateNode=E,Jy=u,fy=Bv(E.firstChild),Xv=!1,ae=!0):ae=!1),ae||b2(u)),C1(u),ae=u.type,qe=u.pendingProps,Do=l!==null?l.memoizedProps:null,E=qe.children,W5(ae,qe)?E=null:Do!==null&&W5(ae,Do)&&(u.flags|=32),u.memoizedState!==null&&(ae=G6(l,u,fS,null,null,g),U3._currentValue=ae),F_(l,u),qy(l,u,E,g),u.child;case 6:return l===null&&W1&&((l=g=fy)&&(g=JS(g,u.pendingProps,Xv),g!==null?(u.stateNode=g,Jy=u,fy=null,l=!0):l=!1),l||b2(u)),null;case 13:return W8(l,u,g);case 4:return p1(u,u.stateNode.containerInfo),E=u.pendingProps,l===null?u.child=J2(u,null,E,g):qy(l,u,E,g),u.child;case 11:return z8(l,u,u.type,u.pendingProps,g);case 7:return qy(l,u,u.pendingProps,g),u.child;case 8:return qy(l,u,u.pendingProps.children,g),u.child;case 12:return qy(l,u,u.pendingProps.children,g),u.child;case 10:return E=u.pendingProps,D4(u,u.type,E.value),qy(l,u,E.children,g),u.child;case 9:return ae=u.type._context,E=u.pendingProps.children,x2(u),ae=jy(ae),E=E(ae),u.flags|=1,qy(l,u,E,g),u.child;case 14:return $8(l,u,u.type,u.pendingProps,g);case 15:return q8(l,u,u.type,u.pendingProps,g);case 19:return Y8(l,u,g);case 31:return E=u.pendingProps,g=u.mode,E={mode:E.mode,children:E.children},l===null?(g=N_(E,g),g.ref=u.ref,u.child=g,g.return=u,u=g):(g=c4(l.child,E),g.ref=u.ref,u.child=g,g.return=u,u=g),u;case 22:return U8(l,u,g);case 24:return x2(u),E=jy(My),l===null?(ae=N6(),ae===null&&(ae=oy,qe=B6(),ae.pooledCache=qe,qe.refCount++,qe!==null&&(ae.pooledCacheLanes|=g),ae=qe),u.memoizedState={parent:E,cache:ae},z6(u),D4(u,My,ae)):((l.lanes&g)!==0&&($6(l,u),x3(u,null,null,g),_3()),ae=l.memoizedState,qe=u.memoizedState,ae.parent!==E?(ae={parent:E,cache:E},u.memoizedState=ae,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=ae),D4(u,My,E)):(E=qe.cache,D4(u,My,E),E!==ae.cache&&V6(u,[My],g,!0))),qy(l,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function v4(l){l.flags|=4}function J8(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!s9(u)){if(u=Tv.current,u!==null&&((q1&4194048)===q1?Yv!==null:(q1&62914560)!==q1&&(q1&536870912)===0||u!==Yv))throw v3=O6,V7;l.flags|=8192}}function O_(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?t2():536870912,l.lanes|=u,Nb|=u)}function k3(l,u){if(!W1)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var E=null;g!==null;)g.alternate!==null&&(E=g),g=g.sibling;E===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:E.sibling=null}}function dy(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,E=0;if(u)for(var ae=l.child;ae!==null;)g|=ae.lanes|ae.childLanes,E|=ae.subtreeFlags&65011712,E|=ae.flags&65011712,ae.return=l,ae=ae.sibling;else for(ae=l.child;ae!==null;)g|=ae.lanes|ae.childLanes,E|=ae.subtreeFlags,E|=ae.flags,ae.return=l,ae=ae.sibling;return l.subtreeFlags|=E,l.childLanes=g,u}function wS(l,u,g){var E=u.pendingProps;switch(P6(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dy(u),null;case 1:return dy(u),null;case 3:return g=u.stateNode,E=null,l!==null&&(E=l.memoizedState.cache),u.memoizedState.cache!==E&&(u.flags|=2048),f4(My),j1(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(h3(u)?v4(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,R7())),dy(u),null;case 26:return g=u.memoizedState,l===null?(v4(u),g!==null?(dy(u),J8(u,g)):(dy(u),u.flags&=-16777217)):g?g!==l.memoizedState?(v4(u),dy(u),J8(u,g)):(dy(u),u.flags&=-16777217):(l.memoizedProps!==E&&v4(u),dy(u),u.flags&=-16777217),null;case 27:k1(u),g=h1.current;var ae=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==E&&v4(u);else{if(!E){if(u.stateNode===null)throw Error(n(166));return dy(u),null}l=i1.current,h3(u)?k7(u):(l=Jx(ae,E,g),u.stateNode=l,v4(u))}return dy(u),null;case 5:if(k1(u),g=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==E&&v4(u);else{if(!E){if(u.stateNode===null)throw Error(n(166));return dy(u),null}if(l=i1.current,h3(u))k7(u);else{switch(ae=J_(h1.current),l){case 1:l=ae.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:l=ae.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":l=ae.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":l=ae.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":l=ae.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof E.is=="string"?ae.createElement("select",{is:E.is}):ae.createElement("select"),E.multiple?l.multiple=!0:E.size&&(l.size=E.size);break;default:l=typeof E.is=="string"?ae.createElement(g,{is:E.is}):ae.createElement(g)}}l[l1]=u,l[c1]=E;e:for(ae=u.child;ae!==null;){if(ae.tag===5||ae.tag===6)l.appendChild(ae.stateNode);else if(ae.tag!==4&&ae.tag!==27&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===u)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===u)break e;ae=ae.return}ae.sibling.return=ae.return,ae=ae.sibling}u.stateNode=l;e:switch(Ky(l,g,E),g){case"button":case"input":case"select":case"textarea":l=!!E.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&v4(u)}}return dy(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==E&&v4(u);else{if(typeof E!="string"&&u.stateNode===null)throw Error(n(166));if(l=h1.current,h3(u)){if(l=u.stateNode,g=u.memoizedProps,E=null,ae=Jy,ae!==null)switch(ae.tag){case 27:case 5:E=ae.memoizedProps}l[l1]=u,l=!!(l.nodeValue===g||E!==null&&E.suppressHydrationWarning===!0||jx(l.nodeValue,g)),l||b2(u)}else l=J_(l).createTextNode(E),l[l1]=u,u.stateNode=l}return dy(u),null;case 13:if(E=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(ae=h3(u),E!==null&&E.dehydrated!==null){if(l===null){if(!ae)throw Error(n(318));if(ae=u.memoizedState,ae=ae!==null?ae.dehydrated:null,!ae)throw Error(n(317));ae[l1]=u}else d3(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;dy(u),ae=!1}else ae=R7(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=ae),ae=!0;if(!ae)return u.flags&256?(g4(u),u):(g4(u),null)}if(g4(u),(u.flags&128)!==0)return u.lanes=g,u;if(g=E!==null,l=l!==null&&l.memoizedState!==null,g){E=u.child,ae=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(ae=E.alternate.memoizedState.cachePool.pool);var qe=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(qe=E.memoizedState.cachePool.pool),qe!==ae&&(E.flags|=2048)}return g!==l&&g&&(u.child.flags|=8192),O_(u,u.updateQueue),dy(u),null;case 4:return j1(),l===null&&U5(u.stateNode.containerInfo),dy(u),null;case 10:return f4(u.type),dy(u),null;case 19:if(wh(Ry),ae=u.memoizedState,ae===null)return dy(u),null;if(E=(u.flags&128)!==0,qe=ae.rendering,qe===null)if(E)k3(ae,!1);else{if(py!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(qe=L_(l),qe!==null){for(u.flags|=128,k3(ae,!1),l=qe.updateQueue,u.updateQueue=l,O_(u,l),u.subtreeFlags=0,l=g,g=u.child;g!==null;)T7(g,l),g=g.sibling;return uf(Ry,Ry.current&1|2),u.child}l=l.sibling}ae.tail!==null&&Q1()>q_&&(u.flags|=128,E=!0,k3(ae,!1),u.lanes=4194304)}else{if(!E)if(l=L_(qe),l!==null){if(u.flags|=128,E=!0,l=l.updateQueue,u.updateQueue=l,O_(u,l),k3(ae,!0),ae.tail===null&&ae.tailMode==="hidden"&&!qe.alternate&&!W1)return dy(u),null}else 2*Q1()-ae.renderingStartTime>q_&&g!==536870912&&(u.flags|=128,E=!0,k3(ae,!1),u.lanes=4194304);ae.isBackwards?(qe.sibling=u.child,u.child=qe):(l=ae.last,l!==null?l.sibling=qe:u.child=qe,ae.last=qe)}return ae.tail!==null?(u=ae.tail,ae.rendering=u,ae.tail=u.sibling,ae.renderingStartTime=Q1(),u.sibling=null,l=Ry.current,uf(Ry,E?l&1|2:l&1),u):(dy(u),null);case 22:case 23:return g4(u),j6(),E=u.memoizedState!==null,l!==null?l.memoizedState!==null!==E&&(u.flags|=8192):E&&(u.flags|=8192),E?(g&536870912)!==0&&(u.flags&128)===0&&(dy(u),u.subtreeFlags&6&&(u.flags|=8192)):dy(u),g=u.updateQueue,g!==null&&O_(u,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),E=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(E=u.memoizedState.cachePool.pool),E!==g&&(u.flags|=2048),l!==null&&wh(S2),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),f4(My),dy(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function AS(l,u){switch(P6(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return f4(My),j1(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return k1(u),null;case 13:if(g4(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));d3()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return wh(Ry),null;case 4:return j1(),null;case 10:return f4(u.type),null;case 22:case 23:return g4(u),j6(),l!==null&&wh(S2),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return f4(My),null;case 25:return null;default:return null}}function Z8(l,u){switch(P6(u),u.tag){case 3:f4(My),j1();break;case 26:case 27:case 5:k1(u);break;case 4:j1();break;case 13:g4(u);break;case 19:wh(Ry);break;case 10:f4(u.type);break;case 22:case 23:g4(u),j6(),l!==null&&wh(S2);break;case 24:f4(My)}}function M3(l,u){try{var g=u.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var ae=E.next;g=ae;do{if((g.tag&l)===l){E=void 0;var qe=g.create,Do=g.inst;E=qe(),Do.destroy=E}g=g.next}while(g!==ae)}}catch(eh){ay(u,u.return,eh)}}function z4(l,u,g){try{var E=u.updateQueue,ae=E!==null?E.lastEffect:null;if(ae!==null){var qe=ae.next;E=qe;do{if((E.tag&l)===l){var Do=E.inst,eh=Do.destroy;if(eh!==void 0){Do.destroy=void 0,ae=u;var Mh=g,gf=eh;try{gf()}catch(a1){ay(ae,Mh,a1)}}}E=E.next}while(E!==qe)}}catch(a1){ay(u,u.return,a1)}}function ex(l){var u=l.updateQueue;if(u!==null){var g=l.stateNode;try{$7(u,g)}catch(E){ay(l,l.return,E)}}}function tx(l,u,g){g.props=w2(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(E){ay(l,u,E)}}function R3(l,u){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var E=l.stateNode;break;case 30:E=l.stateNode;break;default:E=l.stateNode}typeof g=="function"?l.refCleanup=g(E):g.current=E}}catch(ae){ay(l,u,ae)}}function Qv(l,u){var g=l.ref,E=l.refCleanup;if(g!==null)if(typeof E=="function")try{E()}catch(ae){ay(l,u,ae)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(ae){ay(l,u,ae)}else g.current=null}function rx(l){var u=l.type,g=l.memoizedProps,E=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":g.autoFocus&&E.focus();break e;case"img":g.src?E.src=g.src:g.srcSet&&(E.srcset=g.srcSet)}}catch(ae){ay(l,l.return,ae)}}function b5(l,u,g){try{var E=l.stateNode;HS(E,l.type,g,u),E[c1]=u}catch(ae){ay(l,l.return,ae)}}function ix(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&W4(l.type)||l.tag===4}function _5(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||ix(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&W4(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function x5(l,u,g){var E=l.tag;if(E===5||E===6)l=l.stateNode,u?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,u):(u=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,u.appendChild(l),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=Q_));else if(E!==4&&(E===27&&W4(l.type)&&(g=l.stateNode,u=null),l=l.child,l!==null))for(x5(l,u,g),l=l.sibling;l!==null;)x5(l,u,g),l=l.sibling}function z_(l,u,g){var E=l.tag;if(E===5||E===6)l=l.stateNode,u?g.insertBefore(l,u):g.appendChild(l);else if(E!==4&&(E===27&&W4(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(z_(l,u,g),l=l.sibling;l!==null;)z_(l,u,g),l=l.sibling}function nx(l){var u=l.stateNode,g=l.memoizedProps;try{for(var E=l.type,ae=u.attributes;ae.length;)u.removeAttributeNode(ae[0]);Ky(u,E,g),u[l1]=l,u[c1]=g}catch(qe){ay(l,l.return,qe)}}var b4=!1,_y=!1,S5=!1,ax=typeof WeakSet=="function"?WeakSet:Set,Fy=null;function TS(l,u){if(l=l.containerInfo,H5=n6,l=g7(l),_6(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var E=g.getSelection&&g.getSelection();if(E&&E.rangeCount!==0){g=E.anchorNode;var ae=E.anchorOffset,qe=E.focusNode;E=E.focusOffset;try{g.nodeType,qe.nodeType}catch{g=null;break e}var Do=0,eh=-1,Mh=-1,gf=0,a1=0,o1=l,t1=null;t:for(;;){for(var r1;o1!==g||ae!==0&&o1.nodeType!==3||(eh=Do+ae),o1!==qe||E!==0&&o1.nodeType!==3||(Mh=Do+E),o1.nodeType===3&&(Do+=o1.nodeValue.length),(r1=o1.firstChild)!==null;)t1=o1,o1=r1;for(;;){if(o1===l)break t;if(t1===g&&++gf===ae&&(eh=Do),t1===qe&&++a1===E&&(Mh=Do),(r1=o1.nextSibling)!==null)break;o1=t1,t1=o1.parentNode}o1=r1}g=eh===-1||Mh===-1?null:{start:eh,end:Mh}}else g=null}g=g||{start:0,end:0}}else g=null;for(G5={focusedElem:l,selectionRange:g},n6=!1,Fy=u;Fy!==null;)if(u=Fy,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Fy=l;else for(;Fy!==null;){switch(u=Fy,qe=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&qe!==null){l=void 0,g=u,ae=qe.memoizedProps,qe=qe.memoizedState,E=g.stateNode;try{var M1=w2(g.type,ae,g.elementType===g.type);l=E.getSnapshotBeforeUpdate(M1,qe),E.__reactInternalSnapshotBeforeUpdate=l}catch(w1){ay(g,g.return,w1)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,g=l.nodeType,g===9)Y5(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Y5(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Fy=l;break}Fy=u.return}}function sx(l,u,g){var E=g.flags;switch(g.tag){case 0:case 11:case 15:$4(l,g),E&4&&M3(5,g);break;case 1:if($4(l,g),E&4)if(l=g.stateNode,u===null)try{l.componentDidMount()}catch(Do){ay(g,g.return,Do)}else{var ae=w2(g.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(ae,u,l.__reactInternalSnapshotBeforeUpdate)}catch(Do){ay(g,g.return,Do)}}E&64&&ex(g),E&512&&R3(g,g.return);break;case 3:if($4(l,g),E&64&&(l=g.updateQueue,l!==null)){if(u=null,g.child!==null)switch(g.child.tag){case 27:case 5:u=g.child.stateNode;break;case 1:u=g.child.stateNode}try{$7(l,u)}catch(Do){ay(g,g.return,Do)}}break;case 27:u===null&&E&4&&nx(g);case 26:case 5:$4(l,g),u===null&&E&4&&rx(g),E&512&&R3(g,g.return);break;case 12:$4(l,g);break;case 13:$4(l,g),E&4&&ux(l,g),E&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=VS.bind(null,g),ZS(l,g))));break;case 22:if(E=g.memoizedState!==null||b4,!E){u=u!==null&&u.memoizedState!==null||_y,ae=b4;var qe=_y;b4=E,(_y=u)&&!qe?q4(l,g,(g.subtreeFlags&8772)!==0):$4(l,g),b4=ae,_y=qe}break;case 30:break;default:$4(l,g)}}function ox(l){var u=l.alternate;u!==null&&(l.alternate=null,ox(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&_1(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var hy=null,tv=!1;function _4(l,u,g){for(g=g.child;g!==null;)lx(l,u,g),g=g.sibling}function lx(l,u,g){if(R1&&typeof R1.onCommitFiberUnmount=="function")try{R1.onCommitFiberUnmount(L1,g)}catch{}switch(g.tag){case 26:_y||Qv(g,u),_4(l,u,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:_y||Qv(g,u);var E=hy,ae=tv;W4(g.type)&&(hy=g.stateNode,tv=!1),_4(l,u,g),O3(g.stateNode),hy=E,tv=ae;break;case 5:_y||Qv(g,u);case 6:if(E=hy,ae=tv,hy=null,_4(l,u,g),hy=E,tv=ae,hy!==null)if(tv)try{(hy.nodeType===9?hy.body:hy.nodeName==="HTML"?hy.ownerDocument.body:hy).removeChild(g.stateNode)}catch(qe){ay(g,u,qe)}else try{hy.removeChild(g.stateNode)}catch(qe){ay(g,u,qe)}break;case 18:hy!==null&&(tv?(l=hy,Yx(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),G3(l)):Yx(hy,g.stateNode));break;case 4:E=hy,ae=tv,hy=g.stateNode.containerInfo,tv=!0,_4(l,u,g),hy=E,tv=ae;break;case 0:case 11:case 14:case 15:_y||z4(2,g,u),_y||z4(4,g,u),_4(l,u,g);break;case 1:_y||(Qv(g,u),E=g.stateNode,typeof E.componentWillUnmount=="function"&&tx(g,u,E)),_4(l,u,g);break;case 21:_4(l,u,g);break;case 22:_y=(E=_y)||g.memoizedState!==null,_4(l,u,g),_y=E;break;default:_4(l,u,g)}}function ux(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{G3(l)}catch(g){ay(u,u.return,g)}}function CS(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new ax),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new ax),u;default:throw Error(n(435,l.tag))}}function E5(l,u){var g=CS(l);u.forEach(function(E){var ae=BS.bind(null,l,E);g.has(E)||(g.add(E),E.then(ae,ae))})}function uv(l,u){var g=u.deletions;if(g!==null)for(var E=0;E<g.length;E++){var ae=g[E],qe=l,Do=u,eh=Do;e:for(;eh!==null;){switch(eh.tag){case 27:if(W4(eh.type)){hy=eh.stateNode,tv=!1;break e}break;case 5:hy=eh.stateNode,tv=!1;break e;case 3:case 4:hy=eh.stateNode.containerInfo,tv=!0;break e}eh=eh.return}if(hy===null)throw Error(n(160));lx(qe,Do,ae),hy=null,tv=!1,qe=ae.alternate,qe!==null&&(qe.return=null),ae.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)cx(u,l),u=u.sibling}var Vv=null;function cx(l,u){var g=l.alternate,E=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:uv(u,l),cv(l),E&4&&(z4(3,l,l.return),M3(3,l),z4(5,l,l.return));break;case 1:uv(u,l),cv(l),E&512&&(_y||g===null||Qv(g,g.return)),E&64&&b4&&(l=l.updateQueue,l!==null&&(E=l.callbacks,E!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?E:g.concat(E))));break;case 26:var ae=Vv;if(uv(u,l),cv(l),E&512&&(_y||g===null||Qv(g,g.return)),E&4){var qe=g!==null?g.memoizedState:null;if(E=l.memoizedState,g===null)if(E===null)if(l.stateNode===null){e:{E=l.type,g=l.memoizedProps,ae=ae.ownerDocument||ae;t:switch(E){case"title":qe=ae.getElementsByTagName("title")[0],(!qe||qe[b1]||qe[l1]||qe.namespaceURI==="http://www.w3.org/2000/svg"||qe.hasAttribute("itemprop"))&&(qe=ae.createElement(E),ae.head.insertBefore(qe,ae.querySelector("head > title"))),Ky(qe,E,g),qe[l1]=l,I1(qe),E=qe;break e;case"link":var Do=n9("link","href",ae).get(E+(g.href||""));if(Do){for(var eh=0;eh<Do.length;eh++)if(qe=Do[eh],qe.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&qe.getAttribute("rel")===(g.rel==null?null:g.rel)&&qe.getAttribute("title")===(g.title==null?null:g.title)&&qe.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){Do.splice(eh,1);break t}}qe=ae.createElement(E),Ky(qe,E,g),ae.head.appendChild(qe);break;case"meta":if(Do=n9("meta","content",ae).get(E+(g.content||""))){for(eh=0;eh<Do.length;eh++)if(qe=Do[eh],qe.getAttribute("content")===(g.content==null?null:""+g.content)&&qe.getAttribute("name")===(g.name==null?null:g.name)&&qe.getAttribute("property")===(g.property==null?null:g.property)&&qe.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&qe.getAttribute("charset")===(g.charSet==null?null:g.charSet)){Do.splice(eh,1);break t}}qe=ae.createElement(E),Ky(qe,E,g),ae.head.appendChild(qe);break;default:throw Error(n(468,E))}qe[l1]=l,I1(qe),E=qe}l.stateNode=E}else a9(ae,l.type,l.stateNode);else l.stateNode=i9(ae,E,l.memoizedProps);else qe!==E?(qe===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):qe.count--,E===null?a9(ae,l.type,l.stateNode):i9(ae,E,l.memoizedProps)):E===null&&l.stateNode!==null&&b5(l,l.memoizedProps,g.memoizedProps)}break;case 27:uv(u,l),cv(l),E&512&&(_y||g===null||Qv(g,g.return)),g!==null&&E&4&&b5(l,l.memoizedProps,g.memoizedProps);break;case 5:if(uv(u,l),cv(l),E&512&&(_y||g===null||Qv(g,g.return)),l.flags&32){ae=l.stateNode;try{vv(ae,"")}catch(r1){ay(l,l.return,r1)}}E&4&&l.stateNode!=null&&(ae=l.memoizedProps,b5(l,ae,g!==null?g.memoizedProps:ae)),E&1024&&(S5=!0);break;case 6:if(uv(u,l),cv(l),E&4){if(l.stateNode===null)throw Error(n(162));E=l.memoizedProps,g=l.stateNode;try{g.nodeValue=E}catch(r1){ay(l,l.return,r1)}}break;case 3:if(t6=null,ae=Vv,Vv=Z_(u.containerInfo),uv(u,l),Vv=ae,cv(l),E&4&&g!==null&&g.memoizedState.isDehydrated)try{G3(u.containerInfo)}catch(r1){ay(l,l.return,r1)}S5&&(S5=!1,hx(l));break;case 4:E=Vv,Vv=Z_(l.stateNode.containerInfo),uv(u,l),cv(l),Vv=E;break;case 12:uv(u,l),cv(l);break;case 13:uv(u,l),cv(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(M5=Q1()),E&4&&(E=l.updateQueue,E!==null&&(l.updateQueue=null,E5(l,E)));break;case 22:ae=l.memoizedState!==null;var Mh=g!==null&&g.memoizedState!==null,gf=b4,a1=_y;if(b4=gf||ae,_y=a1||Mh,uv(u,l),_y=a1,b4=gf,cv(l),E&8192)e:for(u=l.stateNode,u._visibility=ae?u._visibility&-2:u._visibility|1,ae&&(g===null||Mh||b4||_y||A2(l)),g=null,u=l;;){if(u.tag===5||u.tag===26){if(g===null){Mh=g=u;try{if(qe=Mh.stateNode,ae)Do=qe.style,typeof Do.setProperty=="function"?Do.setProperty("display","none","important"):Do.display="none";else{eh=Mh.stateNode;var o1=Mh.memoizedProps.style,t1=o1!=null&&o1.hasOwnProperty("display")?o1.display:null;eh.style.display=t1==null||typeof t1=="boolean"?"":(""+t1).trim()}}catch(r1){ay(Mh,Mh.return,r1)}}}else if(u.tag===6){if(g===null){Mh=u;try{Mh.stateNode.nodeValue=ae?"":Mh.memoizedProps}catch(r1){ay(Mh,Mh.return,r1)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}E&4&&(E=l.updateQueue,E!==null&&(g=E.retryQueue,g!==null&&(E.retryQueue=null,E5(l,g))));break;case 19:uv(u,l),cv(l),E&4&&(E=l.updateQueue,E!==null&&(l.updateQueue=null,E5(l,E)));break;case 30:break;case 21:break;default:uv(u,l),cv(l)}}function cv(l){var u=l.flags;if(u&2){try{for(var g,E=l.return;E!==null;){if(ix(E)){g=E;break}E=E.return}if(g==null)throw Error(n(160));switch(g.tag){case 27:var ae=g.stateNode,qe=_5(l);z_(l,qe,ae);break;case 5:var Do=g.stateNode;g.flags&32&&(vv(Do,""),g.flags&=-33);var eh=_5(l);z_(l,eh,Do);break;case 3:case 4:var Mh=g.stateNode.containerInfo,gf=_5(l);x5(l,gf,Mh);break;default:throw Error(n(161))}}catch(a1){ay(l,l.return,a1)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function hx(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;hx(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function $4(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)sx(l,u.alternate,u),u=u.sibling}function A2(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:z4(4,u,u.return),A2(u);break;case 1:Qv(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&tx(u,u.return,g),A2(u);break;case 27:O3(u.stateNode);case 26:case 5:Qv(u,u.return),A2(u);break;case 22:u.memoizedState===null&&A2(u);break;case 30:A2(u);break;default:A2(u)}l=l.sibling}}function q4(l,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var E=u.alternate,ae=l,qe=u,Do=qe.flags;switch(qe.tag){case 0:case 11:case 15:q4(ae,qe,g),M3(4,qe);break;case 1:if(q4(ae,qe,g),E=qe,ae=E.stateNode,typeof ae.componentDidMount=="function")try{ae.componentDidMount()}catch(gf){ay(E,E.return,gf)}if(E=qe,ae=E.updateQueue,ae!==null){var eh=E.stateNode;try{var Mh=ae.shared.hiddenCallbacks;if(Mh!==null)for(ae.shared.hiddenCallbacks=null,ae=0;ae<Mh.length;ae++)z7(Mh[ae],eh)}catch(gf){ay(E,E.return,gf)}}g&&Do&64&&ex(qe),R3(qe,qe.return);break;case 27:nx(qe);case 26:case 5:q4(ae,qe,g),g&&E===null&&Do&4&&rx(qe),R3(qe,qe.return);break;case 12:q4(ae,qe,g);break;case 13:q4(ae,qe,g),g&&Do&4&&ux(ae,qe);break;case 22:qe.memoizedState===null&&q4(ae,qe,g),R3(qe,qe.return);break;case 30:break;default:q4(ae,qe,g)}u=u.sibling}}function w5(l,u){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&p3(g))}function A5(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&p3(l))}function Jv(l,u,g,E){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)dx(l,u,g,E),u=u.sibling}function dx(l,u,g,E){var ae=u.flags;switch(u.tag){case 0:case 11:case 15:Jv(l,u,g,E),ae&2048&&M3(9,u);break;case 1:Jv(l,u,g,E);break;case 3:Jv(l,u,g,E),ae&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&p3(l)));break;case 12:if(ae&2048){Jv(l,u,g,E),l=u.stateNode;try{var qe=u.memoizedProps,Do=qe.id,eh=qe.onPostCommit;typeof eh=="function"&&eh(Do,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Mh){ay(u,u.return,Mh)}}else Jv(l,u,g,E);break;case 13:Jv(l,u,g,E);break;case 23:break;case 22:qe=u.stateNode,Do=u.alternate,u.memoizedState!==null?qe._visibility&2?Jv(l,u,g,E):P3(l,u):qe._visibility&2?Jv(l,u,g,E):(qe._visibility|=2,Z2(l,u,g,E,(u.subtreeFlags&10256)!==0)),ae&2048&&w5(Do,u);break;case 24:Jv(l,u,g,E),ae&2048&&A5(u.alternate,u);break;default:Jv(l,u,g,E)}}function Z2(l,u,g,E,ae){for(ae=ae&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var qe=l,Do=u,eh=g,Mh=E,gf=Do.flags;switch(Do.tag){case 0:case 11:case 15:Z2(qe,Do,eh,Mh,ae),M3(8,Do);break;case 23:break;case 22:var a1=Do.stateNode;Do.memoizedState!==null?a1._visibility&2?Z2(qe,Do,eh,Mh,ae):P3(qe,Do):(a1._visibility|=2,Z2(qe,Do,eh,Mh,ae)),ae&&gf&2048&&w5(Do.alternate,Do);break;case 24:Z2(qe,Do,eh,Mh,ae),ae&&gf&2048&&A5(Do.alternate,Do);break;default:Z2(qe,Do,eh,Mh,ae)}u=u.sibling}}function P3(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=l,E=u,ae=E.flags;switch(E.tag){case 22:P3(g,E),ae&2048&&w5(E.alternate,E);break;case 24:P3(g,E),ae&2048&&A5(E.alternate,E);break;default:P3(g,E)}u=u.sibling}}var I3=8192;function Ib(l){if(l.subtreeFlags&I3)for(l=l.child;l!==null;)mx(l),l=l.sibling}function mx(l){switch(l.tag){case 26:Ib(l),l.flags&I3&&l.memoizedState!==null&&dE(Vv,l.memoizedState,l.memoizedProps);break;case 5:Ib(l);break;case 3:case 4:var u=Vv;Vv=Z_(l.stateNode.containerInfo),Ib(l),Vv=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=I3,I3=16777216,Ib(l),I3=u):Ib(l));break;default:Ib(l)}}function fx(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function D3(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var E=u[g];Fy=E,gx(E,l)}fx(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)px(l),l=l.sibling}function px(l){switch(l.tag){case 0:case 11:case 15:D3(l),l.flags&2048&&z4(9,l,l.return);break;case 3:D3(l);break;case 12:D3(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,$_(l)):D3(l);break;default:D3(l)}}function $_(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var E=u[g];Fy=E,gx(E,l)}fx(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:z4(8,u,u.return),$_(u);break;case 22:g=u.stateNode,g._visibility&2&&(g._visibility&=-3,$_(u));break;default:$_(u)}l=l.sibling}}function gx(l,u){for(;Fy!==null;){var g=Fy;switch(g.tag){case 0:case 11:case 15:z4(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var E=g.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:p3(g.memoizedState.cache)}if(E=g.child,E!==null)E.return=g,Fy=E;else e:for(g=l;Fy!==null;){E=Fy;var ae=E.sibling,qe=E.return;if(ox(E),E===g){Fy=null;break e}if(ae!==null){ae.return=qe,Fy=ae;break e}Fy=qe}}}var kS={getCacheForType:function(l){var u=jy(My),g=u.data.get(l);return g===void 0&&(g=l(),u.data.set(l,g)),g}},MS=typeof WeakMap=="function"?WeakMap:Map,J1=0,oy=null,N1=null,q1=0,Z1=0,hv=null,U4=!1,Fb=!1,T5=!1,x4=0,py=0,K4=0,T2=0,C5=0,Cv=0,Nb=0,L3=null,rv=null,k5=!1,M5=0,q_=1/0,U_=null,j4=null,Uy=0,H4=null,zb=null,$b=0,R5=0,P5=null,yx=null,V3=0,I5=null;function dv(){if((J1&2)!==0&&q1!==0)return q1&-q1;if(So.T!==null){var l=j2;return l!==0?l:O5()}return Ym()}function vx(){Cv===0&&(Cv=(q1&536870912)===0||W1?t4():536870912);var l=Tv.current;return l!==null&&(l.flags|=32),Cv}function mv(l,u,g){(l===oy&&(Z1===2||Z1===9)||l.cancelPendingCommit!==null)&&(Ub(l,0),G4(l,q1,Cv,!1)),Pv(l,g),((J1&2)===0||l!==oy)&&(l===oy&&((J1&2)===0&&(T2|=g),py===4&&G4(l,q1,Cv,!1)),Zv(l))}function bx(l,u,g){if((J1&6)!==0)throw Error(n(327));var E=!g&&(u&124)===0&&(u&l.expiredLanes)===0||pv(l,u),ae=E?IS(l,u):V5(l,u,!0),qe=E;do{if(ae===0){Fb&&!E&&G4(l,u,0,!1);break}else{if(g=l.current.alternate,qe&&!RS(g)){ae=V5(l,u,!1),qe=!1;continue}if(ae===2){if(qe=u,l.errorRecoveryDisabledLanes&qe)var Do=0;else Do=l.pendingLanes&-536870913,Do=Do!==0?Do:Do&536870912?536870912:0;if(Do!==0){u=Do;e:{var eh=l;ae=L3;var Mh=eh.current.memoizedState.isDehydrated;if(Mh&&(Ub(eh,Do).flags|=256),Do=V5(eh,Do,!1),Do!==2){if(T5&&!Mh){eh.errorRecoveryDisabledLanes|=qe,T2|=qe,ae=4;break e}qe=rv,rv=ae,qe!==null&&(rv===null?rv=qe:rv.push.apply(rv,qe))}ae=Do}if(qe=!1,ae!==2)continue}}if(ae===1){Ub(l,0),G4(l,u,0,!0);break}e:{switch(E=l,qe=ae,qe){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:G4(E,u,Cv,!U4);break e;case 2:rv=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(ae=M5+300-Q1(),10<ae)){if(G4(E,u,Cv,!U4),e4(E,0,!0)!==0)break e;E.timeoutHandle=Wx(_x.bind(null,E,g,rv,U_,k5,u,Cv,T2,Nb,U4,qe,2,-0,0),ae);break e}_x(E,g,rv,U_,k5,u,Cv,T2,Nb,U4,qe,0,-0,0)}}break}while(!0);Zv(l)}function _x(l,u,g,E,ae,qe,Do,eh,Mh,gf,a1,o1,t1,r1){if(l.timeoutHandle=-1,o1=u.subtreeFlags,(o1&8192||(o1&16785408)===16785408)&&(q3={stylesheets:null,count:0,unsuspend:hE},mx(u),o1=mE(),o1!==null)){l.cancelPendingCommit=o1(Cx.bind(null,l,u,qe,g,E,ae,Do,eh,Mh,a1,1,t1,r1)),G4(l,qe,Do,!gf);return}Cx(l,u,qe,g,E,ae,Do,eh,Mh)}function RS(l){for(var u=l;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var E=0;E<g.length;E++){var ae=g[E],qe=ae.getSnapshot;ae=ae.value;try{if(!ov(qe(),ae))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function G4(l,u,g,E){u&=~C5,u&=~T2,l.suspendedLanes|=u,l.pingedLanes&=~u,E&&(l.warmLanes|=u),E=l.expirationTimes;for(var ae=u;0<ae;){var qe=31-ly(ae),Do=1<<qe;E[qe]=-1,ae&=~Do}g!==0&&Hy(l,g,u)}function K_(){return(J1&6)===0?(B3(0),!1):!0}function D5(){if(N1!==null){if(Z1===0)var l=N1.return;else l=N1,m4=_2=null,Y6(l),Q2=null,T3=0,l=N1;for(;l!==null;)Z8(l.alternate,l),l=l.return;N1=null}}function Ub(l,u){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,WS(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),D5(),oy=l,N1=g=c4(l.current,null),q1=u,Z1=0,hv=null,U4=!1,Fb=pv(l,u),T5=!1,Nb=Cv=C5=T2=K4=py=0,rv=L3=null,k5=!1,(u&8)!==0&&(u|=u&32);var E=l.entangledLanes;if(E!==0)for(l=l.entanglements,E&=u;0<E;){var ae=31-ly(E),qe=1<<ae;u|=l[ae],E&=~qe}return x4=u,d_(),g}function xx(l,u){B1=null,So.H=P_,u===y3||u===x_?(u=N7(),Z1=3):u===V7?(u=N7(),Z1=4):Z1=u===O8?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,hv=u,N1===null&&(py=1,B_(l,Sv(u,l.current)))}function Sx(){var l=So.H;return So.H=P_,l===null?P_:l}function Ex(){var l=So.A;return So.A=kS,l}function L5(){py=4,U4||(q1&4194048)!==q1&&Tv.current!==null||(Fb=!0),(K4&134217727)===0&&(T2&134217727)===0||oy===null||G4(oy,q1,Cv,!1)}function V5(l,u,g){var E=J1;J1|=2;var ae=Sx(),qe=Ex();(oy!==l||q1!==u)&&(U_=null,Ub(l,u)),u=!1;var Do=py;e:do try{if(Z1!==0&&N1!==null){var eh=N1,Mh=hv;switch(Z1){case 8:D5(),Do=6;break e;case 3:case 2:case 9:case 6:Tv.current===null&&(u=!0);var gf=Z1;if(Z1=0,hv=null,jb(l,eh,Mh,gf),g&&Fb){Do=0;break e}break;default:gf=Z1,Z1=0,hv=null,jb(l,eh,Mh,gf)}}PS(),Do=py;break}catch(a1){xx(l,a1)}while(!0);return u&&l.shellSuspendCounter++,m4=_2=null,J1=E,So.H=ae,So.A=qe,N1===null&&(oy=null,q1=0,d_()),Do}function PS(){for(;N1!==null;)wx(N1)}function IS(l,u){var g=J1;J1|=2;var E=Sx(),ae=Ex();oy!==l||q1!==u?(U_=null,q_=Q1()+500,Ub(l,u)):Fb=pv(l,u);e:do try{if(Z1!==0&&N1!==null){u=N1;var qe=hv;t:switch(Z1){case 1:Z1=0,hv=null,jb(l,u,qe,1);break;case 2:case 9:if(B7(qe)){Z1=0,hv=null,Ax(u);break}u=function(){Z1!==2&&Z1!==9||oy!==l||(Z1=7),Zv(l)},qe.then(u,u);break e;case 3:Z1=7;break e;case 4:Z1=5;break e;case 7:B7(qe)?(Z1=0,hv=null,Ax(u)):(Z1=0,hv=null,jb(l,u,qe,7));break;case 5:var Do=null;switch(N1.tag){case 26:Do=N1.memoizedState;case 5:case 27:var eh=N1;if(!Do||s9(Do)){Z1=0,hv=null;var Mh=eh.sibling;if(Mh!==null)N1=Mh;else{var gf=eh.return;gf!==null?(N1=gf,j_(gf)):N1=null}break t}}Z1=0,hv=null,jb(l,u,qe,5);break;case 6:Z1=0,hv=null,jb(l,u,qe,6);break;case 8:D5(),py=6;break e;default:throw Error(n(462))}}DS();break}catch(a1){xx(l,a1)}while(!0);return m4=_2=null,So.H=E,So.A=ae,J1=g,N1!==null?0:(oy=null,q1=0,d_(),py)}function DS(){for(;N1!==null&&!xy();)wx(N1)}function wx(l){var u=Q8(l.alternate,l,x4);l.memoizedProps=l.pendingProps,u===null?j_(l):N1=u}function Ax(l){var u=l,g=u.alternate;switch(u.tag){case 15:case 0:u=j8(g,u,u.pendingProps,u.type,void 0,q1);break;case 11:u=j8(g,u,u.pendingProps,u.type.render,u.ref,q1);break;case 5:Y6(u);default:Z8(g,u),u=N1=T7(u,x4),u=Q8(g,u,x4)}l.memoizedProps=l.pendingProps,u===null?j_(l):N1=u}function jb(l,u,g,E){m4=_2=null,Y6(u),Q2=null,T3=0;var ae=u.return;try{if(xS(l,ae,u,g,q1)){py=1,B_(l,Sv(g,l.current)),N1=null;return}}catch(qe){if(ae!==null)throw N1=ae,qe;py=1,B_(l,Sv(g,l.current)),N1=null;return}u.flags&32768?(W1||E===1?l=!0:Fb||(q1&536870912)!==0?l=!1:(U4=l=!0,(E===2||E===9||E===3||E===6)&&(E=Tv.current,E!==null&&E.tag===13&&(E.flags|=16384))),Tx(u,l)):j_(u)}function j_(l){var u=l;do{if((u.flags&32768)!==0){Tx(u,U4);return}l=u.return;var g=wS(u.alternate,u,x4);if(g!==null){N1=g;return}if(u=u.sibling,u!==null){N1=u;return}N1=u=l}while(u!==null);py===0&&(py=5)}function Tx(l,u){do{var g=AS(l.alternate,l);if(g!==null){g.flags&=32767,N1=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(l=l.sibling,l!==null)){N1=l;return}N1=l=g}while(l!==null);py=6,N1=null}function Cx(l,u,g,E,ae,qe,Do,eh,Mh){l.cancelPendingCommit=null;do H_();while(Uy!==0);if((J1&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(qe=u.lanes|u.childLanes,qe|=A6,T4(l,g,qe,Do,eh,Mh),l===oy&&(N1=oy=null,q1=0),zb=u,H4=l,$b=g,R5=qe,P5=ae,yx=E,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,FS(uy,function(){return Ix(),null})):(l.callbackNode=null,l.callbackPriority=0),E=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||E){E=So.T,So.T=null,ae=th.p,th.p=2,Do=J1,J1|=4;try{TS(l,u,g)}finally{J1=Do,th.p=ae,So.T=E}}Uy=1,kx(),Mx(),Rx()}}function kx(){if(Uy===1){Uy=0;var l=H4,u=zb,g=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||g){g=So.T,So.T=null;var E=th.p;th.p=2;var ae=J1;J1|=4;try{cx(u,l);var qe=G5,Do=g7(l.containerInfo),eh=qe.focusedElem,Mh=qe.selectionRange;if(Do!==eh&&eh&&eh.ownerDocument&&p7(eh.ownerDocument.documentElement,eh)){if(Mh!==null&&_6(eh)){var gf=Mh.start,a1=Mh.end;if(a1===void 0&&(a1=gf),"selectionStart"in eh)eh.selectionStart=gf,eh.selectionEnd=Math.min(a1,eh.value.length);else{var o1=eh.ownerDocument||document,t1=o1&&o1.defaultView||window;if(t1.getSelection){var r1=t1.getSelection(),M1=eh.textContent.length,w1=Math.min(Mh.start,M1),iy=Mh.end===void 0?w1:Math.min(Mh.end,M1);!r1.extend&&w1>iy&&(Do=iy,iy=w1,w1=Do);var hf=f7(eh,w1),cf=f7(eh,iy);if(hf&&cf&&(r1.rangeCount!==1||r1.anchorNode!==hf.node||r1.anchorOffset!==hf.offset||r1.focusNode!==cf.node||r1.focusOffset!==cf.offset)){var pf=o1.createRange();pf.setStart(hf.node,hf.offset),r1.removeAllRanges(),w1>iy?(r1.addRange(pf),r1.extend(cf.node,cf.offset)):(pf.setEnd(cf.node,cf.offset),r1.addRange(pf))}}}}for(o1=[],r1=eh;r1=r1.parentNode;)r1.nodeType===1&&o1.push({element:r1,left:r1.scrollLeft,top:r1.scrollTop});for(typeof eh.focus=="function"&&eh.focus(),eh=0;eh<o1.length;eh++){var s1=o1[eh];s1.element.scrollLeft=s1.left,s1.element.scrollTop=s1.top}}n6=!!H5,G5=H5=null}finally{J1=ae,th.p=E,So.T=g}}l.current=u,Uy=2}}function Mx(){if(Uy===2){Uy=0;var l=H4,u=zb,g=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||g){g=So.T,So.T=null;var E=th.p;th.p=2;var ae=J1;J1|=4;try{sx(l,u.alternate,u)}finally{J1=ae,th.p=E,So.T=g}}Uy=3}}function Rx(){if(Uy===4||Uy===3){Uy=0,Py();var l=H4,u=zb,g=$b,E=yx;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Uy=5:(Uy=0,zb=H4=null,Px(l,l.pendingLanes));var ae=l.pendingLanes;if(ae===0&&(j4=null),C4(g),u=u.stateNode,R1&&typeof R1.onCommitFiberRoot=="function")try{R1.onCommitFiberRoot(L1,u,void 0,(u.current.flags&128)===128)}catch{}if(E!==null){u=So.T,ae=th.p,th.p=2,So.T=null;try{for(var qe=l.onRecoverableError,Do=0;Do<E.length;Do++){var eh=E[Do];qe(eh.value,{componentStack:eh.stack})}}finally{So.T=u,th.p=ae}}($b&3)!==0&&H_(),Zv(l),ae=l.pendingLanes,(g&4194090)!==0&&(ae&42)!==0?l===I5?V3++:(V3=0,I5=l):V3=0,B3(0)}}function Px(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,p3(u)))}function H_(l){return kx(),Mx(),Rx(),Ix()}function Ix(){if(Uy!==5)return!1;var l=H4,u=R5;R5=0;var g=C4($b),E=So.T,ae=th.p;try{th.p=32>g?32:g,So.T=null,g=P5,P5=null;var qe=H4,Do=$b;if(Uy=0,zb=H4=null,$b=0,(J1&6)!==0)throw Error(n(331));var eh=J1;if(J1|=4,px(qe.current),dx(qe,qe.current,Do,g),J1=eh,B3(0,!1),R1&&typeof R1.onPostCommitFiberRoot=="function")try{R1.onPostCommitFiberRoot(L1,qe)}catch{}return!0}finally{th.p=ae,So.T=E,Px(l,u)}}function Dx(l,u,g){u=Sv(g,u),u=c5(l.stateNode,u,2),l=B4(l,u,2),l!==null&&(Pv(l,2),Zv(l))}function ay(l,u,g){if(l.tag===3)Dx(l,l,g);else for(;u!==null;){if(u.tag===3){Dx(u,l,g);break}else if(u.tag===1){var E=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(j4===null||!j4.has(E))){l=Sv(g,l),g=F8(2),E=B4(u,g,2),E!==null&&(N8(g,E,u,l),Pv(E,2),Zv(E));break}}u=u.return}}function B5(l,u,g){var E=l.pingCache;if(E===null){E=l.pingCache=new MS;var ae=new Set;E.set(u,ae)}else ae=E.get(u),ae===void 0&&(ae=new Set,E.set(u,ae));ae.has(g)||(T5=!0,ae.add(g),l=LS.bind(null,l,u,g),u.then(l,l))}function LS(l,u,g){var E=l.pingCache;E!==null&&E.delete(u),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,oy===l&&(q1&g)===g&&(py===4||py===3&&(q1&62914560)===q1&&300>Q1()-M5?(J1&2)===0&&Ub(l,0):C5|=g,Nb===q1&&(Nb=0)),Zv(l)}function Lx(l,u){u===0&&(u=t2()),l=$2(l,u),l!==null&&(Pv(l,u),Zv(l))}function VS(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),Lx(l,g)}function BS(l,u){var g=0;switch(l.tag){case 13:var E=l.stateNode,ae=l.memoizedState;ae!==null&&(g=ae.retryLane);break;case 19:E=l.stateNode;break;case 22:E=l.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(u),Lx(l,g)}function FS(l,u){return D1(l,u)}var G_=null,Hb=null,F5=!1,W_=!1,N5=!1,C2=0;function Zv(l){l!==Hb&&l.next===null&&(Hb===null?G_=Hb=l:Hb=Hb.next=l),W_=!0,F5||(F5=!0,OS())}function B3(l,u){if(!N5&&W_){N5=!0;do for(var g=!1,E=G_;E!==null;){if(l!==0){var ae=E.pendingLanes;if(ae===0)var qe=0;else{var Do=E.suspendedLanes,eh=E.pingedLanes;qe=(1<<31-ly(42|l)+1)-1,qe&=ae&~(Do&~eh),qe=qe&201326741?qe&201326741|1:qe?qe|2:0}qe!==0&&(g=!0,Nx(E,qe))}else qe=q1,qe=e4(E,E===oy?qe:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(qe&3)===0||pv(E,qe)||(g=!0,Nx(E,qe));E=E.next}while(g);N5=!1}}function NS(){Vx()}function Vx(){W_=F5=!1;var l=0;C2!==0&&(GS()&&(l=C2),C2=0);for(var u=Q1(),g=null,E=G_;E!==null;){var ae=E.next,qe=Bx(E,u);qe===0?(E.next=null,g===null?G_=ae:g.next=ae,ae===null&&(Hb=g)):(g=E,(l!==0||(qe&3)!==0)&&(W_=!0)),E=ae}B3(l)}function Bx(l,u){for(var g=l.suspendedLanes,E=l.pingedLanes,ae=l.expirationTimes,qe=l.pendingLanes&-62914561;0<qe;){var Do=31-ly(qe),eh=1<<Do,Mh=ae[Do];Mh===-1?((eh&g)===0||(eh&E)!==0)&&(ae[Do]=A4(eh,u)):Mh<=u&&(l.expiredLanes|=eh),qe&=~eh}if(u=oy,g=q1,g=e4(l,l===u?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),E=l.callbackNode,g===0||l===u&&(Z1===2||Z1===9)||l.cancelPendingCommit!==null)return E!==null&&E!==null&&m1(E),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||pv(l,g)){if(u=g&-g,u===l.callbackPriority)return u;switch(E!==null&&m1(E),C4(g)){case 2:case 8:g=Iy;break;case 32:g=uy;break;case 268435456:g=yy;break;default:g=uy}return E=Fx.bind(null,l),g=D1(g,E),l.callbackPriority=u,l.callbackNode=g,u}return E!==null&&E!==null&&m1(E),l.callbackPriority=2,l.callbackNode=null,2}function Fx(l,u){if(Uy!==0&&Uy!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(H_()&&l.callbackNode!==g)return null;var E=q1;return E=e4(l,l===oy?E:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),E===0?null:(bx(l,E,u),Bx(l,Q1()),l.callbackNode!=null&&l.callbackNode===g?Fx.bind(null,l):null)}function Nx(l,u){if(H_())return null;bx(l,u,!0)}function OS(){XS(function(){(J1&6)!==0?D1(my,NS):Vx()})}function O5(){return C2===0&&(C2=t4()),C2}function Ox(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:M2(""+l)}function zx(l,u){var g=u.ownerDocument.createElement("input");return g.name=u.name,g.value=u.value,l.id&&g.setAttribute("form",l.id),u.parentNode.insertBefore(g,u),l=new FormData(l),g.parentNode.removeChild(g),l}function zS(l,u,g,E,ae){if(u==="submit"&&g&&g.stateNode===ae){var qe=Ox((ae[c1]||null).action),Do=E.submitter;Do&&(u=(u=Do[c1]||null)?Ox(u.formAction):Do.getAttribute("formAction"),u!==null&&(qe=u,Do=null));var eh=new R2("action","action",null,E,ae);l.push({event:eh,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(C2!==0){var Mh=Do?zx(ae,Do):new FormData(ae);a5(g,{pending:!0,data:Mh,method:ae.method,action:qe},null,Mh)}}else typeof qe=="function"&&(eh.preventDefault(),Mh=Do?zx(ae,Do):new FormData(ae),a5(g,{pending:!0,data:Mh,method:ae.method,action:qe},qe,Mh))},currentTarget:ae}]})}}for(var z5=0;z5<w6.length;z5++){var $5=w6[z5],$S=$5.toLowerCase(),qS=$5[0].toUpperCase()+$5.slice(1);Lv($S,"on"+qS)}Lv(b7,"onAnimationEnd"),Lv(_7,"onAnimationIteration"),Lv(x7,"onAnimationStart"),Lv("dblclick","onDoubleClick"),Lv("focusin","onFocus"),Lv("focusout","onBlur"),Lv(nS,"onTransitionRun"),Lv(aS,"onTransitionStart"),Lv(sS,"onTransitionCancel"),Lv(S7,"onTransitionEnd"),Dy("onMouseEnter",["mouseout","mouseover"]),Dy("onMouseLeave",["mouseout","mouseover"]),Dy("onPointerEnter",["pointerout","pointerover"]),Dy("onPointerLeave",["pointerout","pointerover"]),zy("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zy("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zy("onBeforeInput",["compositionend","keypress","textInput","paste"]),zy("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zy("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zy("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var F3="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),US=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(F3));function $x(l,u){u=(u&4)!==0;for(var g=0;g<l.length;g++){var E=l[g],ae=E.event;E=E.listeners;e:{var qe=void 0;if(u)for(var Do=E.length-1;0<=Do;Do--){var eh=E[Do],Mh=eh.instance,gf=eh.currentTarget;if(eh=eh.listener,Mh!==qe&&ae.isPropagationStopped())break e;qe=eh,ae.currentTarget=gf;try{qe(ae)}catch(a1){V_(a1)}ae.currentTarget=null,qe=Mh}else for(Do=0;Do<E.length;Do++){if(eh=E[Do],Mh=eh.instance,gf=eh.currentTarget,eh=eh.listener,Mh!==qe&&ae.isPropagationStopped())break e;qe=eh,ae.currentTarget=gf;try{qe(ae)}catch(a1){V_(a1)}ae.currentTarget=null,qe=Mh}}}}function O1(l,u){var g=u[x1];g===void 0&&(g=u[x1]=new Set);var E=l+"__bubble";g.has(E)||(qx(u,l,2,!1),g.add(E))}function q5(l,u,g){var E=0;u&&(E|=4),qx(g,l,E,u)}var X_="_reactListening"+Math.random().toString(36).slice(2);function U5(l){if(!l[X_]){l[X_]=!0,G1.forEach(function(g){g!=="selectionchange"&&(US.has(g)||q5(g,!1,l),q5(g,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[X_]||(u[X_]=!0,q5("selectionchange",!1,u))}}function qx(l,u,g,E){switch(d9(u)){case 2:var ae=gE;break;case 8:ae=yE;break;default:ae=i7}g=ae.bind(null,u,g,l),ae=void 0,!_v||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(ae=!0),E?ae!==void 0?l.addEventListener(u,g,{capture:!0,passive:ae}):l.addEventListener(u,g,!0):ae!==void 0?l.addEventListener(u,g,{passive:ae}):l.addEventListener(u,g,!1)}function K5(l,u,g,E,ae){var qe=E;if((u&1)===0&&(u&2)===0&&E!==null)e:for(;;){if(E===null)return;var Do=E.tag;if(Do===3||Do===4){var eh=E.stateNode.containerInfo;if(eh===ae)break;if(Do===4)for(Do=E.return;Do!==null;){var Mh=Do.tag;if((Mh===3||Mh===4)&&Do.stateNode.containerInfo===ae)return;Do=Do.return}for(;eh!==null;){if(Do=V1(eh),Do===null)return;if(Mh=Do.tag,Mh===5||Mh===6||Mh===26||Mh===27){E=qe=Do;continue e}eh=eh.parentNode}}E=E.return}Q3(function(){var gf=qe,a1=bv(g),o1=[];e:{var t1=E7.get(l);if(t1!==void 0){var r1=R2,M1=l;switch(l){case"keypress":if(Kv(g)===0)break e;case"keydown":case"keyup":r1=B2;break;case"focusin":M1="focus",r1=D2;break;case"focusout":M1="blur",r1=D2;break;case"beforeblur":case"afterblur":r1=D2;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":r1=xv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":r1=g6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":r1=a_;break;case b7:case _7:case x7:r1=L2;break;case S7:r1=o_;break;case"scroll":case"scrollend":r1=J3;break;case"wheel":r1=F2;break;case"copy":case"cut":case"paste":r1=V2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":r1=o3;break;case"toggle":case"beforetoggle":r1=u_}var w1=(u&4)!==0,iy=!w1&&(l==="scroll"||l==="scrollend"),hf=w1?t1!==null?t1+"Capture":null:t1;w1=[];for(var cf=gf,pf;cf!==null;){var s1=cf;if(pf=s1.stateNode,s1=s1.tag,s1!==5&&s1!==26&&s1!==27||pf===null||hf===null||(s1=s2(cf,hf),s1!=null&&w1.push(N3(cf,s1,pf))),iy)break;cf=cf.return}0<w1.length&&(t1=new r1(t1,M1,null,g,a1),o1.push({event:t1,listeners:w1}))}}if((u&7)===0){e:{if(t1=l==="mouseover"||l==="pointerover",r1=l==="mouseout"||l==="pointerout",t1&&g!==n4&&(M1=g.relatedTarget||g.fromElement)&&(V1(M1)||M1[f1]))break e;if((r1||t1)&&(t1=a1.window===a1?a1:(t1=a1.ownerDocument)?t1.defaultView||t1.parentWindow:window,r1?(M1=g.relatedTarget||g.toElement,r1=gf,M1=M1?V1(M1):null,M1!==null&&(iy=s(M1),w1=M1.tag,M1!==iy||w1!==5&&w1!==27&&w1!==6)&&(M1=null)):(r1=null,M1=gf),r1!==M1)){if(w1=xv,s1="onMouseLeave",hf="onMouseEnter",cf="mouse",(l==="pointerout"||l==="pointerover")&&(w1=o3,s1="onPointerLeave",hf="onPointerEnter",cf="pointer"),iy=r1==null?t1:ny(r1),pf=M1==null?t1:ny(M1),t1=new w1(s1,cf+"leave",r1,g,a1),t1.target=iy,t1.relatedTarget=pf,s1=null,V1(a1)===gf&&(w1=new w1(hf,cf+"enter",M1,g,a1),w1.target=pf,w1.relatedTarget=iy,s1=w1),iy=s1,r1&&M1)t:{for(w1=r1,hf=M1,cf=0,pf=w1;pf;pf=Gb(pf))cf++;for(pf=0,s1=hf;s1;s1=Gb(s1))pf++;for(;0<cf-pf;)w1=Gb(w1),cf--;for(;0<pf-cf;)hf=Gb(hf),pf--;for(;cf--;){if(w1===hf||hf!==null&&w1===hf.alternate)break t;w1=Gb(w1),hf=Gb(hf)}w1=null}else w1=null;r1!==null&&Ux(o1,t1,r1,w1,!1),M1!==null&&iy!==null&&Ux(o1,iy,M1,w1,!0)}}e:{if(t1=gf?ny(gf):window,r1=t1.nodeName&&t1.nodeName.toLowerCase(),r1==="select"||r1==="input"&&t1.type==="file")var g1=l7;else if(ky(t1))if(u7)g1=tS;else{g1=Z9;var F1=J9}else r1=t1.nodeName,!r1||r1.toLowerCase()!=="input"||t1.type!=="checkbox"&&t1.type!=="radio"?gf&&e3(gf.elementType)&&(g1=l7):g1=eS;if(g1&&(g1=g1(l,gf))){u4(o1,g1,g,a1);break e}F1&&F1(l,t1,gf),l==="focusout"&&gf&&t1.type==="number"&&gf.memoizedProps.value!=null&&P4(t1,"number",t1.value)}switch(F1=gf?ny(gf):window,l){case"focusin":(ky(F1)||F1.contentEditable==="true")&&(N2=F1,x6=gf,c3=null);break;case"focusout":c3=x6=N2=null;break;case"mousedown":S6=!0;break;case"contextmenu":case"mouseup":case"dragend":S6=!1,y7(o1,g,a1);break;case"selectionchange":if(iS)break;case"keydown":case"keyup":y7(o1,g,a1)}var S1;if(Gv)e:{switch(l){case"compositionstart":var A1="onCompositionStart";break e;case"compositionend":A1="onCompositionEnd";break e;case"compositionupdate":A1="onCompositionUpdate";break e}A1=void 0}else z1?n1(l,g)&&(A1="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(A1="onCompositionStart");A1&&(To&&g.locale!=="ko"&&(z1||A1!=="onCompositionStart"?A1==="onCompositionEnd"&&z1&&(S1=r3()):(Uv=a1,I4="value"in Uv?Uv.value:Uv.textContent,z1=!0)),F1=Y_(gf,A1),0<F1.length&&(A1=new a3(A1,l,null,g,a1),o1.push({event:A1,listeners:F1}),S1?A1.data=S1:(S1=d1(g),S1!==null&&(A1.data=S1)))),(S1=sr?Cy(l,g):$1(l,g))&&(A1=Y_(gf,"onBeforeInput"),0<A1.length&&(F1=new a3("onBeforeInput","beforeinput",null,g,a1),o1.push({event:F1,listeners:A1}),F1.data=S1)),zS(o1,l,gf,g,a1)}$x(o1,u)})}function N3(l,u,g){return{instance:l,listener:u,currentTarget:g}}function Y_(l,u){for(var g=u+"Capture",E=[];l!==null;){var ae=l,qe=ae.stateNode;if(ae=ae.tag,ae!==5&&ae!==26&&ae!==27||qe===null||(ae=s2(l,g),ae!=null&&E.unshift(N3(l,ae,qe)),ae=s2(l,u),ae!=null&&E.push(N3(l,ae,qe))),l.tag===3)return E;l=l.return}return[]}function Gb(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Ux(l,u,g,E,ae){for(var qe=u._reactName,Do=[];g!==null&&g!==E;){var eh=g,Mh=eh.alternate,gf=eh.stateNode;if(eh=eh.tag,Mh!==null&&Mh===E)break;eh!==5&&eh!==26&&eh!==27||gf===null||(Mh=gf,ae?(gf=s2(g,qe),gf!=null&&Do.unshift(N3(g,gf,Mh))):ae||(gf=s2(g,qe),gf!=null&&Do.push(N3(g,gf,Mh)))),g=g.return}Do.length!==0&&l.push({event:u,listeners:Do})}var KS=/\r\n?/g,jS=/\u0000|\uFFFD/g;function Kx(l){return(typeof l=="string"?l:""+l).replace(KS,`
`).replace(jS,"")}function jx(l,u){return u=Kx(u),Kx(l)===u}function Q_(){}function ry(l,u,g,E,ae,qe){switch(g){case"children":typeof E=="string"?u==="body"||u==="textarea"&&E===""||vv(l,E):(typeof E=="number"||typeof E=="bigint")&&u!=="body"&&vv(l,""+E);break;case"className":Wy(l,"class",E);break;case"tabIndex":Wy(l,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Wy(l,g,E);break;case"style":Zb(l,E,qe);break;case"data":if(u!=="object"){Wy(l,"data",E);break}case"src":case"href":if(E===""&&(u!=="a"||g!=="href")){l.removeAttribute(g);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){l.removeAttribute(g);break}E=M2(""+E),l.setAttribute(g,E);break;case"action":case"formAction":if(typeof E=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof qe=="function"&&(g==="formAction"?(u!=="input"&&ry(l,u,"name",ae.name,ae,null),ry(l,u,"formEncType",ae.formEncType,ae,null),ry(l,u,"formMethod",ae.formMethod,ae,null),ry(l,u,"formTarget",ae.formTarget,ae,null)):(ry(l,u,"encType",ae.encType,ae,null),ry(l,u,"method",ae.method,ae,null),ry(l,u,"target",ae.target,ae,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){l.removeAttribute(g);break}E=M2(""+E),l.setAttribute(g,E);break;case"onClick":E!=null&&(l.onclick=Q_);break;case"onScroll":E!=null&&O1("scroll",l);break;case"onScrollEnd":E!=null&&O1("scrollend",l);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(g=E.__html,g!=null){if(ae.children!=null)throw Error(n(60));l.innerHTML=g}}break;case"multiple":l.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":l.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){l.removeAttribute("xlink:href");break}g=M2(""+E),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?l.setAttribute(g,""+E):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":E===!0?l.setAttribute(g,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?l.setAttribute(g,E):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?l.setAttribute(g,E):l.removeAttribute(g);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?l.removeAttribute(g):l.setAttribute(g,E);break;case"popover":O1("beforetoggle",l),O1("toggle",l),av(l,"popover",E);break;case"xlinkActuate":P1(l,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":P1(l,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":P1(l,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":P1(l,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":P1(l,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":P1(l,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":P1(l,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":P1(l,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":P1(l,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":av(l,"is",E);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=f6.get(g)||g,av(l,g,E))}}function j5(l,u,g,E,ae,qe){switch(g){case"style":Zb(l,E,qe);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(g=E.__html,g!=null){if(ae.children!=null)throw Error(n(60));l.innerHTML=g}}break;case"children":typeof E=="string"?vv(l,E):(typeof E=="number"||typeof E=="bigint")&&vv(l,""+E);break;case"onScroll":E!=null&&O1("scroll",l);break;case"onScrollEnd":E!=null&&O1("scrollend",l);break;case"onClick":E!=null&&(l.onclick=Q_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zy.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(ae=g.endsWith("Capture"),u=g.slice(2,ae?g.length-7:void 0),qe=l[c1]||null,qe=qe!=null?qe[g]:null,typeof qe=="function"&&l.removeEventListener(u,qe,ae),typeof E=="function")){typeof qe!="function"&&qe!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(u,E,ae);break e}g in l?l[g]=E:E===!0?l.setAttribute(g,""):av(l,g,E)}}}function Ky(l,u,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":O1("error",l),O1("load",l);var E=!1,ae=!1,qe;for(qe in g)if(g.hasOwnProperty(qe)){var Do=g[qe];if(Do!=null)switch(qe){case"src":E=!0;break;case"srcSet":ae=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:ry(l,u,qe,Do,g,null)}}ae&&ry(l,u,"srcSet",g.srcSet,g,null),E&&ry(l,u,"src",g.src,g,null);return;case"input":O1("invalid",l);var eh=qe=Do=ae=null,Mh=null,gf=null;for(E in g)if(g.hasOwnProperty(E)){var a1=g[E];if(a1!=null)switch(E){case"name":ae=a1;break;case"type":Do=a1;break;case"checked":Mh=a1;break;case"defaultChecked":gf=a1;break;case"value":qe=a1;break;case"defaultValue":eh=a1;break;case"children":case"dangerouslySetInnerHTML":if(a1!=null)throw Error(n(137,u));break;default:ry(l,u,E,a1,g,null)}}i2(l,qe,eh,Mh,gf,Do,ae,!1),k2(l);return;case"select":O1("invalid",l),E=Do=qe=null;for(ae in g)if(g.hasOwnProperty(ae)&&(eh=g[ae],eh!=null))switch(ae){case"value":qe=eh;break;case"defaultValue":Do=eh;break;case"multiple":E=eh;default:ry(l,u,ae,eh,g,null)}u=qe,g=Do,l.multiple=!!E,u!=null?i4(l,!!E,u,!1):g!=null&&i4(l,!!E,g,!0);return;case"textarea":O1("invalid",l),qe=ae=E=null;for(Do in g)if(g.hasOwnProperty(Do)&&(eh=g[Do],eh!=null))switch(Do){case"value":E=eh;break;case"defaultValue":ae=eh;break;case"children":qe=eh;break;case"dangerouslySetInnerHTML":if(eh!=null)throw Error(n(91));break;default:ry(l,u,Do,eh,g,null)}n2(l,E,ae,qe),k2(l);return;case"option":for(Mh in g)if(g.hasOwnProperty(Mh)&&(E=g[Mh],E!=null))switch(Mh){case"selected":l.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:ry(l,u,Mh,E,g,null)}return;case"dialog":O1("beforetoggle",l),O1("toggle",l),O1("cancel",l),O1("close",l);break;case"iframe":case"object":O1("load",l);break;case"video":case"audio":for(E=0;E<F3.length;E++)O1(F3[E],l);break;case"image":O1("error",l),O1("load",l);break;case"details":O1("toggle",l);break;case"embed":case"source":case"link":O1("error",l),O1("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(gf in g)if(g.hasOwnProperty(gf)&&(E=g[gf],E!=null))switch(gf){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:ry(l,u,gf,E,g,null)}return;default:if(e3(u)){for(a1 in g)g.hasOwnProperty(a1)&&(E=g[a1],E!==void 0&&j5(l,u,a1,E,g,void 0));return}}for(eh in g)g.hasOwnProperty(eh)&&(E=g[eh],E!=null&&ry(l,u,eh,E,g,null))}function HS(l,u,g,E){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var ae=null,qe=null,Do=null,eh=null,Mh=null,gf=null,a1=null;for(r1 in g){var o1=g[r1];if(g.hasOwnProperty(r1)&&o1!=null)switch(r1){case"checked":break;case"value":break;case"defaultValue":Mh=o1;default:E.hasOwnProperty(r1)||ry(l,u,r1,null,E,o1)}}for(var t1 in E){var r1=E[t1];if(o1=g[t1],E.hasOwnProperty(t1)&&(r1!=null||o1!=null))switch(t1){case"type":qe=r1;break;case"name":ae=r1;break;case"checked":gf=r1;break;case"defaultChecked":a1=r1;break;case"value":Do=r1;break;case"defaultValue":eh=r1;break;case"children":case"dangerouslySetInnerHTML":if(r1!=null)throw Error(n(137,u));break;default:r1!==o1&&ry(l,u,t1,r1,E,o1)}}sv(l,Do,eh,Mh,gf,a1,qe,ae);return;case"select":r1=Do=eh=t1=null;for(qe in g)if(Mh=g[qe],g.hasOwnProperty(qe)&&Mh!=null)switch(qe){case"value":break;case"multiple":r1=Mh;default:E.hasOwnProperty(qe)||ry(l,u,qe,null,E,Mh)}for(ae in E)if(qe=E[ae],Mh=g[ae],E.hasOwnProperty(ae)&&(qe!=null||Mh!=null))switch(ae){case"value":t1=qe;break;case"defaultValue":eh=qe;break;case"multiple":Do=qe;default:qe!==Mh&&ry(l,u,ae,qe,E,Mh)}u=eh,g=Do,E=r1,t1!=null?i4(l,!!g,t1,!1):!!E!=!!g&&(u!=null?i4(l,!!g,u,!0):i4(l,!!g,g?[]:"",!1));return;case"textarea":r1=t1=null;for(eh in g)if(ae=g[eh],g.hasOwnProperty(eh)&&ae!=null&&!E.hasOwnProperty(eh))switch(eh){case"value":break;case"children":break;default:ry(l,u,eh,null,E,ae)}for(Do in E)if(ae=E[Do],qe=g[Do],E.hasOwnProperty(Do)&&(ae!=null||qe!=null))switch(Do){case"value":t1=ae;break;case"defaultValue":r1=ae;break;case"children":break;case"dangerouslySetInnerHTML":if(ae!=null)throw Error(n(91));break;default:ae!==qe&&ry(l,u,Do,ae,E,qe)}ey(l,t1,r1);return;case"option":for(var M1 in g)if(t1=g[M1],g.hasOwnProperty(M1)&&t1!=null&&!E.hasOwnProperty(M1))switch(M1){case"selected":l.selected=!1;break;default:ry(l,u,M1,null,E,t1)}for(Mh in E)if(t1=E[Mh],r1=g[Mh],E.hasOwnProperty(Mh)&&t1!==r1&&(t1!=null||r1!=null))switch(Mh){case"selected":l.selected=t1&&typeof t1!="function"&&typeof t1!="symbol";break;default:ry(l,u,Mh,t1,E,r1)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var w1 in g)t1=g[w1],g.hasOwnProperty(w1)&&t1!=null&&!E.hasOwnProperty(w1)&&ry(l,u,w1,null,E,t1);for(gf in E)if(t1=E[gf],r1=g[gf],E.hasOwnProperty(gf)&&t1!==r1&&(t1!=null||r1!=null))switch(gf){case"children":case"dangerouslySetInnerHTML":if(t1!=null)throw Error(n(137,u));break;default:ry(l,u,gf,t1,E,r1)}return;default:if(e3(u)){for(var iy in g)t1=g[iy],g.hasOwnProperty(iy)&&t1!==void 0&&!E.hasOwnProperty(iy)&&j5(l,u,iy,void 0,E,t1);for(a1 in E)t1=E[a1],r1=g[a1],!E.hasOwnProperty(a1)||t1===r1||t1===void 0&&r1===void 0||j5(l,u,a1,t1,E,r1);return}}for(var hf in g)t1=g[hf],g.hasOwnProperty(hf)&&t1!=null&&!E.hasOwnProperty(hf)&&ry(l,u,hf,null,E,t1);for(o1 in E)t1=E[o1],r1=g[o1],!E.hasOwnProperty(o1)||t1===r1||t1==null&&r1==null||ry(l,u,o1,t1,E,r1)}var H5=null,G5=null;function J_(l){return l.nodeType===9?l:l.ownerDocument}function Hx(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gx(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function W5(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var X5=null;function GS(){var l=window.event;return l&&l.type==="popstate"?l===X5?!1:(X5=l,!0):(X5=null,!1)}var Wx=typeof setTimeout=="function"?setTimeout:void 0,WS=typeof clearTimeout=="function"?clearTimeout:void 0,Xx=typeof Promise=="function"?Promise:void 0,XS=typeof queueMicrotask=="function"?queueMicrotask:typeof Xx<"u"?function(l){return Xx.resolve(null).then(l).catch(YS)}:Wx;function YS(l){setTimeout(function(){throw l})}function W4(l){return l==="head"}function Yx(l,u){var g=u,E=0,ae=0;do{var qe=g.nextSibling;if(l.removeChild(g),qe&&qe.nodeType===8)if(g=qe.data,g==="/$"){if(0<E&&8>E){g=E;var Do=l.ownerDocument;if(g&1&&O3(Do.documentElement),g&2&&O3(Do.body),g&4)for(g=Do.head,O3(g),Do=g.firstChild;Do;){var eh=Do.nextSibling,Mh=Do.nodeName;Do[b1]||Mh==="SCRIPT"||Mh==="STYLE"||Mh==="LINK"&&Do.rel.toLowerCase()==="stylesheet"||g.removeChild(Do),Do=eh}}if(ae===0){l.removeChild(qe),G3(u);return}ae--}else g==="$"||g==="$?"||g==="$!"?ae++:E=g.charCodeAt(0)-48;else E=0;g=qe}while(g);G3(u)}function Y5(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var g=u;switch(u=u.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":Y5(g),_1(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function QS(l,u,g,E){for(;l.nodeType===1;){var ae=g;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!E&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(E){if(!l[b1])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(qe=l.getAttribute("rel"),qe==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(qe!==ae.rel||l.getAttribute("href")!==(ae.href==null||ae.href===""?null:ae.href)||l.getAttribute("crossorigin")!==(ae.crossOrigin==null?null:ae.crossOrigin)||l.getAttribute("title")!==(ae.title==null?null:ae.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(qe=l.getAttribute("src"),(qe!==(ae.src==null?null:ae.src)||l.getAttribute("type")!==(ae.type==null?null:ae.type)||l.getAttribute("crossorigin")!==(ae.crossOrigin==null?null:ae.crossOrigin))&&qe&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var qe=ae.name==null?null:""+ae.name;if(ae.type==="hidden"&&l.getAttribute("name")===qe)return l}else return l;if(l=Bv(l.nextSibling),l===null)break}return null}function JS(l,u,g){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=Bv(l.nextSibling),l===null))return null;return l}function Q5(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function ZS(l,u){var g=l.ownerDocument;if(l.data!=="$?"||g.readyState==="complete")u();else{var E=function(){u(),g.removeEventListener("DOMContentLoaded",E)};g.addEventListener("DOMContentLoaded",E),l._reactRetry=E}}function Bv(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var J5=null;function Qx(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(u===0)return l;u--}else g==="/$"&&u++}l=l.previousSibling}return null}function Jx(l,u,g){switch(u=J_(g),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function O3(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);_1(l)}var kv=new Map,Zx=new Set;function Z_(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var S4=th.d;th.d={f:eE,r:tE,D:rE,C:iE,L:nE,m:aE,X:oE,S:sE,M:lE};function eE(){var l=S4.f(),u=K_();return l||u}function tE(l){var u=U1(l);u!==null&&u.tag===5&&u.type==="form"?b8(u):S4.r(l)}var Wb=typeof document>"u"?null:document;function e9(l,u,g){var E=Wb;if(E&&typeof u=="string"&&u){var ae=wy(u);ae='link[rel="'+l+'"][href="'+ae+'"]',typeof g=="string"&&(ae+='[crossorigin="'+g+'"]'),Zx.has(ae)||(Zx.add(ae),l={rel:l,crossOrigin:g,href:u},E.querySelector(ae)===null&&(u=E.createElement("link"),Ky(u,"link",l),I1(u),E.head.appendChild(u)))}}function rE(l){S4.D(l),e9("dns-prefetch",l,null)}function iE(l,u){S4.C(l,u),e9("preconnect",l,u)}function nE(l,u,g){S4.L(l,u,g);var E=Wb;if(E&&l&&u){var ae='link[rel="preload"][as="'+wy(u)+'"]';u==="image"&&g&&g.imageSrcSet?(ae+='[imagesrcset="'+wy(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(ae+='[imagesizes="'+wy(g.imageSizes)+'"]')):ae+='[href="'+wy(l)+'"]';var qe=ae;switch(u){case"style":qe=Xb(l);break;case"script":qe=Yb(l)}kv.has(qe)||(l=y({rel:"preload",href:u==="image"&&g&&g.imageSrcSet?void 0:l,as:u},g),kv.set(qe,l),E.querySelector(ae)!==null||u==="style"&&E.querySelector(z3(qe))||u==="script"&&E.querySelector($3(qe))||(u=E.createElement("link"),Ky(u,"link",l),I1(u),E.head.appendChild(u)))}}function aE(l,u){S4.m(l,u);var g=Wb;if(g&&l){var E=u&&typeof u.as=="string"?u.as:"script",ae='link[rel="modulepreload"][as="'+wy(E)+'"][href="'+wy(l)+'"]',qe=ae;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":qe=Yb(l)}if(!kv.has(qe)&&(l=y({rel:"modulepreload",href:l},u),kv.set(qe,l),g.querySelector(ae)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector($3(qe)))return}E=g.createElement("link"),Ky(E,"link",l),I1(E),g.head.appendChild(E)}}}function sE(l,u,g){S4.S(l,u,g);var E=Wb;if(E&&l){var ae=H1(E).hoistableStyles,qe=Xb(l);u=u||"default";var Do=ae.get(qe);if(!Do){var eh={loading:0,preload:null};if(Do=E.querySelector(z3(qe)))eh.loading=5;else{l=y({rel:"stylesheet",href:l,"data-precedence":u},g),(g=kv.get(qe))&&Z5(l,g);var Mh=Do=E.createElement("link");I1(Mh),Ky(Mh,"link",l),Mh._p=new Promise(function(gf,a1){Mh.onload=gf,Mh.onerror=a1}),Mh.addEventListener("load",function(){eh.loading|=1}),Mh.addEventListener("error",function(){eh.loading|=2}),eh.loading|=4,e6(Do,u,E)}Do={type:"stylesheet",instance:Do,count:1,state:eh},ae.set(qe,Do)}}}function oE(l,u){S4.X(l,u);var g=Wb;if(g&&l){var E=H1(g).hoistableScripts,ae=Yb(l),qe=E.get(ae);qe||(qe=g.querySelector($3(ae)),qe||(l=y({src:l,async:!0},u),(u=kv.get(ae))&&e7(l,u),qe=g.createElement("script"),I1(qe),Ky(qe,"link",l),g.head.appendChild(qe)),qe={type:"script",instance:qe,count:1,state:null},E.set(ae,qe))}}function lE(l,u){S4.M(l,u);var g=Wb;if(g&&l){var E=H1(g).hoistableScripts,ae=Yb(l),qe=E.get(ae);qe||(qe=g.querySelector($3(ae)),qe||(l=y({src:l,async:!0,type:"module"},u),(u=kv.get(ae))&&e7(l,u),qe=g.createElement("script"),I1(qe),Ky(qe,"link",l),g.head.appendChild(qe)),qe={type:"script",instance:qe,count:1,state:null},E.set(ae,qe))}}function t9(l,u,g,E){var ae=(ae=h1.current)?Z_(ae):null;if(!ae)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(u=Xb(g.href),g=H1(ae).hoistableStyles,E=g.get(u),E||(E={type:"style",instance:null,count:0,state:null},g.set(u,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=Xb(g.href);var qe=H1(ae).hoistableStyles,Do=qe.get(l);if(Do||(ae=ae.ownerDocument||ae,Do={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},qe.set(l,Do),(qe=ae.querySelector(z3(l)))&&!qe._p&&(Do.instance=qe,Do.state.loading=5),kv.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},kv.set(l,g),qe||uE(ae,l,g,Do.state))),u&&E===null)throw Error(n(528,""));return Do}if(u&&E!==null)throw Error(n(529,""));return null;case"script":return u=g.async,g=g.src,typeof g=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Yb(g),g=H1(ae).hoistableScripts,E=g.get(u),E||(E={type:"script",instance:null,count:0,state:null},g.set(u,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function Xb(l){return'href="'+wy(l)+'"'}function z3(l){return'link[rel="stylesheet"]['+l+"]"}function r9(l){return y({},l,{"data-precedence":l.precedence,precedence:null})}function uE(l,u,g,E){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?E.loading=1:(u=l.createElement("link"),E.preload=u,u.addEventListener("load",function(){return E.loading|=1}),u.addEventListener("error",function(){return E.loading|=2}),Ky(u,"link",g),I1(u),l.head.appendChild(u))}function Yb(l){return'[src="'+wy(l)+'"]'}function $3(l){return"script[async]"+l}function i9(l,u,g){if(u.count++,u.instance===null)switch(u.type){case"style":var E=l.querySelector('style[data-href~="'+wy(g.href)+'"]');if(E)return u.instance=E,I1(E),E;var ae=y({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return E=(l.ownerDocument||l).createElement("style"),I1(E),Ky(E,"style",ae),e6(E,g.precedence,l),u.instance=E;case"stylesheet":ae=Xb(g.href);var qe=l.querySelector(z3(ae));if(qe)return u.state.loading|=4,u.instance=qe,I1(qe),qe;E=r9(g),(ae=kv.get(ae))&&Z5(E,ae),qe=(l.ownerDocument||l).createElement("link"),I1(qe);var Do=qe;return Do._p=new Promise(function(eh,Mh){Do.onload=eh,Do.onerror=Mh}),Ky(qe,"link",E),u.state.loading|=4,e6(qe,g.precedence,l),u.instance=qe;case"script":return qe=Yb(g.src),(ae=l.querySelector($3(qe)))?(u.instance=ae,I1(ae),ae):(E=g,(ae=kv.get(qe))&&(E=y({},g),e7(E,ae)),l=l.ownerDocument||l,ae=l.createElement("script"),I1(ae),Ky(ae,"link",E),l.head.appendChild(ae),u.instance=ae);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(E=u.instance,u.state.loading|=4,e6(E,g.precedence,l));return u.instance}function e6(l,u,g){for(var E=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),ae=E.length?E[E.length-1]:null,qe=ae,Do=0;Do<E.length;Do++){var eh=E[Do];if(eh.dataset.precedence===u)qe=eh;else if(qe!==ae)break}qe?qe.parentNode.insertBefore(l,qe.nextSibling):(u=g.nodeType===9?g.head:g,u.insertBefore(l,u.firstChild))}function Z5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function e7(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var t6=null;function n9(l,u,g){if(t6===null){var E=new Map,ae=t6=new Map;ae.set(g,E)}else ae=t6,E=ae.get(g),E||(E=new Map,ae.set(g,E));if(E.has(l))return E;for(E.set(l,null),g=g.getElementsByTagName(l),ae=0;ae<g.length;ae++){var qe=g[ae];if(!(qe[b1]||qe[l1]||l==="link"&&qe.getAttribute("rel")==="stylesheet")&&qe.namespaceURI!=="http://www.w3.org/2000/svg"){var Do=qe.getAttribute(u)||"";Do=l+Do;var eh=E.get(Do);eh?eh.push(qe):E.set(Do,[qe])}}return E}function a9(l,u,g){l=l.ownerDocument||l,l.head.insertBefore(g,u==="title"?l.querySelector("head > title"):null)}function cE(l,u,g){if(g===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function s9(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var q3=null;function hE(){}function dE(l,u,g){if(q3===null)throw Error(n(475));var E=q3;if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var ae=Xb(g.href),qe=l.querySelector(z3(ae));if(qe){l=qe._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(E.count++,E=r6.bind(E),l.then(E,E)),u.state.loading|=4,u.instance=qe,I1(qe);return}qe=l.ownerDocument||l,g=r9(g),(ae=kv.get(ae))&&Z5(g,ae),qe=qe.createElement("link"),I1(qe);var Do=qe;Do._p=new Promise(function(eh,Mh){Do.onload=eh,Do.onerror=Mh}),Ky(qe,"link",g),u.instance=qe}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(E.count++,u=r6.bind(E),l.addEventListener("load",u),l.addEventListener("error",u))}}function mE(){if(q3===null)throw Error(n(475));var l=q3;return l.stylesheets&&l.count===0&&t7(l,l.stylesheets),0<l.count?function(u){var g=setTimeout(function(){if(l.stylesheets&&t7(l,l.stylesheets),l.unsuspend){var E=l.unsuspend;l.unsuspend=null,E()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(g)}}:null}function r6(){if(this.count--,this.count===0){if(this.stylesheets)t7(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var i6=null;function t7(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,i6=new Map,u.forEach(fE,l),i6=null,r6.call(l))}function fE(l,u){if(!(u.state.loading&4)){var g=i6.get(l);if(g)var E=g.get(null);else{g=new Map,i6.set(l,g);for(var ae=l.querySelectorAll("link[data-precedence],style[data-precedence]"),qe=0;qe<ae.length;qe++){var Do=ae[qe];(Do.nodeName==="LINK"||Do.getAttribute("media")!=="not all")&&(g.set(Do.dataset.precedence,Do),E=Do)}E&&g.set(null,E)}ae=u.instance,Do=ae.getAttribute("data-precedence"),qe=g.get(Do)||E,qe===E&&g.set(null,ae),g.set(Do,ae),this.count++,E=r6.bind(this),ae.addEventListener("load",E),ae.addEventListener("error",E),qe?qe.parentNode.insertBefore(ae,qe.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(ae,l.firstChild)),u.state.loading|=4}}var U3={$$typeof:De,Provider:null,Consumer:null,_currentValue:Rs,_currentValue2:Rs,_threadCount:0};function pE(l,u,g,E,ae,qe,Do,eh){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gv(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gv(0),this.hiddenUpdates=gv(null),this.identifierPrefix=E,this.onUncaughtError=ae,this.onCaughtError=qe,this.onRecoverableError=Do,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=eh,this.incompleteTransitions=new Map}function o9(l,u,g,E,ae,qe,Do,eh,Mh,gf,a1,o1){return l=new pE(l,u,g,Do,eh,Mh,gf,o1),u=1,qe===!0&&(u|=24),qe=lv(3,null,null,u),l.current=qe,qe.stateNode=l,u=B6(),u.refCount++,l.pooledCache=u,u.refCount++,qe.memoizedState={element:E,isDehydrated:g,cache:u},z6(qe),l}function l9(l){return l?(l=q2,l):q2}function u9(l,u,g,E,ae,qe){ae=l9(ae),E.context===null?E.context=ae:E.pendingContext=ae,E=V4(u),E.payload={element:g},qe=qe===void 0?null:qe,qe!==null&&(E.callback=qe),g=B4(l,E,u),g!==null&&(mv(g,l,u),b3(g,l,u))}function c9(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function r7(l,u){c9(l,u),(l=l.alternate)&&c9(l,u)}function h9(l){if(l.tag===13){var u=$2(l,67108864);u!==null&&mv(u,l,67108864),r7(l,67108864)}}var n6=!0;function gE(l,u,g,E){var ae=So.T;So.T=null;var qe=th.p;try{th.p=2,i7(l,u,g,E)}finally{th.p=qe,So.T=ae}}function yE(l,u,g,E){var ae=So.T;So.T=null;var qe=th.p;try{th.p=8,i7(l,u,g,E)}finally{th.p=qe,So.T=ae}}function i7(l,u,g,E){if(n6){var ae=n7(E);if(ae===null)K5(l,u,E,a6,g),m9(l,E);else if(bE(ae,l,u,g,E))E.stopPropagation();else if(m9(l,E),u&4&&-1<vE.indexOf(l)){for(;ae!==null;){var qe=U1(ae);if(qe!==null)switch(qe.tag){case 3:if(qe=qe.stateNode,qe.current.memoizedState.isDehydrated){var Do=iv(qe.pendingLanes);if(Do!==0){var eh=qe;for(eh.pendingLanes|=2,eh.entangledLanes|=2;Do;){var Mh=1<<31-ly(Do);eh.entanglements[1]|=Mh,Do&=~Mh}Zv(qe),(J1&6)===0&&(q_=Q1()+500,B3(0))}}break;case 13:eh=$2(qe,2),eh!==null&&mv(eh,qe,2),K_(),r7(qe,2)}if(qe=n7(E),qe===null&&K5(l,u,E,a6,g),qe===ae)break;ae=qe}ae!==null&&E.stopPropagation()}else K5(l,u,E,null,g)}}function n7(l){return l=bv(l),a7(l)}var a6=null;function a7(l){if(a6=null,l=V1(l),l!==null){var u=s(l);if(u===null)l=null;else{var g=u.tag;if(g===13){if(l=o(u),l!==null)return l;l=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return a6=l,null}function d9(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gy()){case my:return 2;case Iy:return 8;case uy:case Sy:return 32;case yy:return 268435456;default:return 32}default:return 32}}var s7=!1,X4=null,Y4=null,Q4=null,K3=new Map,j3=new Map,J4=[],vE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m9(l,u){switch(l){case"focusin":case"focusout":X4=null;break;case"dragenter":case"dragleave":Y4=null;break;case"mouseover":case"mouseout":Q4=null;break;case"pointerover":case"pointerout":K3.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":j3.delete(u.pointerId)}}function H3(l,u,g,E,ae,qe){return l===null||l.nativeEvent!==qe?(l={blockedOn:u,domEventName:g,eventSystemFlags:E,nativeEvent:qe,targetContainers:[ae]},u!==null&&(u=U1(u),u!==null&&h9(u)),l):(l.eventSystemFlags|=E,u=l.targetContainers,ae!==null&&u.indexOf(ae)===-1&&u.push(ae),l)}function bE(l,u,g,E,ae){switch(u){case"focusin":return X4=H3(X4,l,u,g,E,ae),!0;case"dragenter":return Y4=H3(Y4,l,u,g,E,ae),!0;case"mouseover":return Q4=H3(Q4,l,u,g,E,ae),!0;case"pointerover":var qe=ae.pointerId;return K3.set(qe,H3(K3.get(qe)||null,l,u,g,E,ae)),!0;case"gotpointercapture":return qe=ae.pointerId,j3.set(qe,H3(j3.get(qe)||null,l,u,g,E,ae)),!0}return!1}function f9(l){var u=V1(l.target);if(u!==null){var g=s(u);if(g!==null){if(u=g.tag,u===13){if(u=o(g),u!==null){l.blockedOn=u,mf(l.priority,function(){if(g.tag===13){var E=dv();E=$v(E);var ae=$2(g,E);ae!==null&&mv(ae,g,E),r7(g,E)}});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function s6(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var g=n7(l.nativeEvent);if(g===null){g=l.nativeEvent;var E=new g.constructor(g.type,g);n4=E,g.target.dispatchEvent(E),n4=null}else return u=U1(g),u!==null&&h9(u),l.blockedOn=g,!1;u.shift()}return!0}function p9(l,u,g){s6(l)&&g.delete(u)}function _E(){s7=!1,X4!==null&&s6(X4)&&(X4=null),Y4!==null&&s6(Y4)&&(Y4=null),Q4!==null&&s6(Q4)&&(Q4=null),K3.forEach(p9),j3.forEach(p9)}function o6(l,u){l.blockedOn===u&&(l.blockedOn=null,s7||(s7=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,_E)))}var l6=null;function g9(l){l6!==l&&(l6=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){l6===l&&(l6=null);for(var u=0;u<l.length;u+=3){var g=l[u],E=l[u+1],ae=l[u+2];if(typeof E!="function"){if(a7(E||g)===null)continue;break}var qe=U1(g);qe!==null&&(l.splice(u,3),u-=3,a5(qe,{pending:!0,data:ae,method:g.method,action:E},E,ae))}}))}function G3(l){function u(Mh){return o6(Mh,l)}X4!==null&&o6(X4,l),Y4!==null&&o6(Y4,l),Q4!==null&&o6(Q4,l),K3.forEach(u),j3.forEach(u);for(var g=0;g<J4.length;g++){var E=J4[g];E.blockedOn===l&&(E.blockedOn=null)}for(;0<J4.length&&(g=J4[0],g.blockedOn===null);)f9(g),g.blockedOn===null&&J4.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(E=0;E<g.length;E+=3){var ae=g[E],qe=g[E+1],Do=ae[c1]||null;if(typeof qe=="function")Do||g9(g);else if(Do){var eh=null;if(qe&&qe.hasAttribute("formAction")){if(ae=qe,Do=qe[c1]||null)eh=Do.formAction;else if(a7(ae)!==null)continue}else eh=Do.action;typeof eh=="function"?g[E+1]=eh:(g.splice(E,3),E-=3),g9(g)}}}function o7(l){this._internalRoot=l}u6.prototype.render=o7.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var g=u.current,E=dv();u9(g,E,l,u,null,null)},u6.prototype.unmount=o7.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;u9(l.current,2,null,l,null,null),K_(),u[f1]=null}};function u6(l){this._internalRoot=l}u6.prototype.unstable_scheduleHydration=function(l){if(l){var u=Ym();l={blockedOn:null,target:l,priority:u};for(var g=0;g<J4.length&&u!==0&&u<J4[g].priority;g++);J4.splice(g,0,l),g===0&&f9(l)}};var y9=e.version;if(y9!=="19.1.1")throw Error(n(527,y9,"19.1.1"));th.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=d(u),l=l!==null?m(l):null,l=l===null?null:l.stateNode,l};var xE={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:So,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var c6=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!c6.isDisabled&&c6.supportsFiber)try{L1=c6.inject(xE),R1=c6}catch{}}return reactDomClient_production.createRoot=function(l,u){if(!a(l))throw Error(n(299));var g=!1,E="",ae=D8,qe=L8,Do=V8,eh=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(E=u.identifierPrefix),u.onUncaughtError!==void 0&&(ae=u.onUncaughtError),u.onCaughtError!==void 0&&(qe=u.onCaughtError),u.onRecoverableError!==void 0&&(Do=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(eh=u.unstable_transitionCallbacks)),u=o9(l,1,!1,null,null,g,E,ae,qe,Do,eh,null),l[f1]=u.current,U5(l),new o7(u)},reactDomClient_production.hydrateRoot=function(l,u,g){if(!a(l))throw Error(n(299));var E=!1,ae="",qe=D8,Do=L8,eh=V8,Mh=null,gf=null;return g!=null&&(g.unstable_strictMode===!0&&(E=!0),g.identifierPrefix!==void 0&&(ae=g.identifierPrefix),g.onUncaughtError!==void 0&&(qe=g.onUncaughtError),g.onCaughtError!==void 0&&(Do=g.onCaughtError),g.onRecoverableError!==void 0&&(eh=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Mh=g.unstable_transitionCallbacks),g.formState!==void 0&&(gf=g.formState)),u=o9(l,1,!0,u,g??null,E,ae,qe,Do,eh,Mh,gf),u.context=l9(null),g=u.current,E=dv(),E=$v(E),ae=V4(E),ae.callback=null,B4(g,ae,E),g=E,u.current.lanes=g,Pv(u,g),Zv(u),l[f1]=u.current,U5(l),new u6(u)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const UserContext=reactExports.createContext({user:{uid:"",username:"",email:"",picture:"",friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,questionStreak:0,savedQuestions:[],decks:[]},setUser:()=>{}}),OptionsContext=reactExports.createContext({options:{theme:"light"},setOptions:()=>{}});/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var __typeError=t=>{throw TypeError(t)},__accessCheck=(t,e,r)=>e.has(t)||__typeError("Cannot "+r),__privateGet=(t,e,r)=>(__accessCheck(t,e,"read from private field"),r?r.call(t):e.get(t)),__privateAdd=(t,e,r)=>e.has(t)?__typeError("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),PopStateEventType="popstate";function createBrowserHistory(t={}){function e(n,a){let{pathname:s,search:o,hash:c}=n.location;return createLocation("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:createPath(a)}return getUrlBasedHistory(e,r,null,t)}function invariant(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:r,key:e&&e.key||n||createKey()}}function createPath({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function parsePath(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,o=a.history,c="POP",d=null,m=y();m==null&&(m=0,o.replaceState({...o.state,idx:m},""));function y(){return(o.state||{idx:null}).idx}function A(){c="POP";let Ge=y(),ve=Ge==null?null:Ge-m;m=Ge,d&&d({action:c,location:_e.location,delta:ve})}function P(Ge,ve){c="PUSH";let He=createLocation(_e.location,Ge,ve);m=y()+1;let De=getHistoryState(He,m),Xe=_e.createHref(He);try{o.pushState(De,"",Xe)}catch(Bs){if(Bs instanceof DOMException&&Bs.name==="DataCloneError")throw Bs;a.location.assign(Xe)}s&&d&&d({action:c,location:_e.location,delta:1})}function Z(Ge,ve){c="REPLACE";let He=createLocation(_e.location,Ge,ve);m=y();let De=getHistoryState(He,m),Xe=_e.createHref(He);o.replaceState(De,"",Xe),s&&d&&d({action:c,location:_e.location,delta:0})}function me(Ge){return createBrowserURLImpl(Ge)}let _e={get action(){return c},get location(){return t(a,o)},listen(Ge){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,A),d=Ge,()=>{a.removeEventListener(PopStateEventType,A),d=null}},createHref(Ge){return e(a,Ge)},createURL:me,encodeLocation(Ge){let ve=me(Ge);return{pathname:ve.pathname,search:ve.search,hash:ve.hash}},push:P,replace:Z,go(Ge){return o.go(Ge)}};return _e}function createBrowserURLImpl(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:createPath(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}var _map,unstable_RouterContextProvider=class{constructor(t){if(__privateAdd(this,_map,new Map),t)for(let[e,r]of t)this.set(e,r)}get(t){if(__privateGet(this,_map).has(t))return __privateGet(this,_map).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){__privateGet(this,_map).set(t,e)}};_map=new WeakMap;var unsupportedLazyRouteObjectKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isUnsupportedLazyRouteObjectKey(t){return unsupportedLazyRouteObjectKeys.has(t)}var unsupportedLazyRouteFunctionKeys=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function isUnsupportedLazyRouteFunctionKey(t){return unsupportedLazyRouteFunctionKeys.has(t)}function isIndexRoute(t){return t.index===!0}function convertRoutesToDataRoutes(t,e,r=[],n={},a=!1){return t.map((s,o)=>{let c=[...r,String(o)],d=typeof s.id=="string"?s.id:c.join("-");if(invariant(s.index!==!0||!s.children,"Cannot specify children on an index route"),invariant(a||!n[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),isIndexRoute(s)){let m={...s,...e(s),id:d};return n[d]=m,m}else{let m={...s,...e(s),id:d,children:void 0};return n[d]=m,s.children&&(m.children=convertRoutesToDataRoutes(s.children,e,c,n,a)),m}})}function matchRoutes(t,e,r="/"){return matchRoutesImpl(t,e,r,!1)}function matchRoutesImpl(t,e,r,n){let a=typeof e=="string"?parsePath(e):e,s=stripBasename(a.pathname||"/",r);if(s==null)return null;let o=flattenRoutes(t);rankRouteBranches(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let m=decodePath(s);c=matchRouteBranch(o[d],m,n)}return c}function convertRouteMatchToUiMatch(t,e){let{route:r,pathname:n,params:a}=t;return{id:r.id,pathname:n,params:a,data:e[r.id],handle:r.handle}}function flattenRoutes(t,e=[],r=[],n=""){let a=(s,o,c)=>{let d={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};d.relativePath.startsWith("/")&&(invariant(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length));let m=joinPaths([n,d.relativePath]),y=r.concat(d);s.children&&s.children.length>0&&(invariant(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),flattenRoutes(s.children,e,y,m)),!(s.path==null&&!s.index)&&e.push({path:m,score:computeScore(m,s.index),routesMeta:y})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of explodeOptionalSegments(s.path))a(s,o,c)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let o=explodeOptionalSegments(n.join("/")),c=[];return c.push(...o.map(d=>d===""?s:[s,d].join("/"))),a&&c.push(...o),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function rankRouteBranches(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:compareIndexes(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let r=t.split("/"),n=r.length;return r.some(isSplat)&&(n+=splatPenalty),e&&(n+=indexRouteValue),r.filter(a=>!isSplat(a)).reduce((a,s)=>a+(paramRe.test(s)?dynamicSegmentValue:s===""?emptySegmentValue:staticSegmentValue),n)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",o=[];for(let c=0;c<n.length;++c){let d=n[c],m=c===n.length-1,y=s==="/"?e:e.slice(s.length)||"/",A=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},y),P=d.route;if(!A&&m&&r&&!n[n.length-1].route.index&&(A=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!A)return null;Object.assign(a,A.params),o.push({params:a,pathname:joinPaths([s,A.pathname]),pathnameBase:normalizePathname(joinPaths([s,A.pathnameBase])),route:P}),A.pathnameBase!=="/"&&(s=joinPaths([s,A.pathnameBase]))}return o}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=compilePath(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((m,{paramName:y,isOptional:A},P)=>{if(y==="*"){let me=c[P]||"";o=s.slice(0,s.length-me.length).replace(/(.)\/+$/,"$1")}const Z=c[P];return A&&!Z?m[y]=void 0:m[y]=(Z||"").replace(/%2F/g,"/"),m},{}),pathname:s,pathnameBase:o,pattern:t}}function compilePath(t,e=!1,r=!0){warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function prependBasename({basename:t,pathname:e}){return e==="/"?t:joinPaths([t,e])}function resolvePath(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?parsePath(t):t;return{pathname:r?r.startsWith("/")?r:resolvePathname(r,e):e,search:normalizeSearch(n),hash:normalizeHash(a)}}function resolvePathname(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function getInvalidPathError(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t){let e=getPathContributingMatches(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function resolveTo(t,e,r,n=!1){let a;typeof t=="string"?a=parsePath(t):(a={...t},invariant(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,c;if(o==null)c=r;else{let A=e.length-1;if(!n&&o.startsWith("..")){let P=o.split("/");for(;P[0]==="..";)P.shift(),A-=1;a.pathname=P.join("/")}c=A>=0?e[A]:"/"}let d=resolvePath(a,c),m=o&&o!=="/"&&o.endsWith("/"),y=(s||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||y)&&(d.pathname+="/"),d}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,ErrorResponseImpl=class{constructor(t,e,r,n=!1){this.status=t,this.statusText=e||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["GET",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=t=>ABSOLUTE_URL_REGEX.test(t),defaultMapRouteProperties=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions",ResetLoaderDataSymbol=Symbol("ResetLoaderData");function createRouter(t){const e=t.window?t.window:typeof window<"u"?window:void 0,r=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";invariant(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=t.hydrationRouteProperties||[],a=t.mapRouteProperties||defaultMapRouteProperties,s={},o=convertRoutesToDataRoutes(t.routes,a,void 0,s),c,d=t.basename||"/",m=t.dataStrategy||defaultDataStrategyWithMiddleware,y={unstable_middleware:!1,...t.future},A=null,P=new Set,Z=null,me=null,_e=null,Ge=t.hydrationData!=null,ve=matchRoutes(o,t.history.location,d),He=!1,De=null,Xe;if(ve==null&&!t.patchRoutesOnNavigation){let Ym=getInternalRouterError(404,{pathname:t.history.location.pathname}),{matches:mf,route:Qp}=getShortCircuitMatches(o);Xe=!0,ve=mf,De={[Qp.id]:Ym}}else if(ve&&!t.hydrationData&&Hy(ve,o,t.history.location.pathname).active&&(ve=null),ve)if(ve.some(Ym=>Ym.route.lazy))Xe=!1;else if(!ve.some(Ym=>Ym.route.loader))Xe=!0;else{let Ym=t.hydrationData?t.hydrationData.loaderData:null,mf=t.hydrationData?t.hydrationData.errors:null;if(mf){let Qp=ve.findIndex(l1=>mf[l1.route.id]!==void 0);Xe=ve.slice(0,Qp+1).every(l1=>!shouldLoadRouteOnHydration(l1.route,Ym,mf))}else Xe=ve.every(Qp=>!shouldLoadRouteOnHydration(Qp.route,Ym,mf))}else{Xe=!1,ve=[];let Ym=Hy(null,o,t.history.location.pathname);Ym.active&&Ym.matches&&(He=!0,ve=Ym.matches)}let Bs,wt={historyAction:t.history.action,location:t.history.location,matches:ve,initialized:Xe,navigation:IDLE_NAVIGATION,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||De,fetchers:new Map,blockers:new Map},li="POP",An=!1,Os,vh=!1,Fc=new Map,Hc=null,qc=!1,e1=!1,df=new Set,So=new Map,th=0,Rs=-1,Ko=new Map,Vc=new Set,yh=new Map,wh=new Map,uf=new Set,i1=new Map,u1,h1=null;function T1(){if(A=t.history.listen(({action:Ym,location:mf,delta:Qp})=>{if(u1){u1(),u1=void 0;return}warning(i1.size===0||Qp!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let l1=A4({currentLocation:wt.location,nextLocation:mf,historyAction:Ym});if(l1&&Qp!=null){let c1=new Promise(f1=>{u1=f1});t.history.go(Qp*-1),pv(l1,{state:"blocked",location:mf,proceed(){pv(l1,{state:"proceeding",proceed:void 0,reset:void 0,location:mf}),c1.then(()=>t.history.go(Qp))},reset(){let f1=new Map(wt.blockers);f1.set(l1,IDLE_BLOCKER),C1({blockers:f1})}});return}return m1(Ym,mf)}),r){restoreAppliedTransitions(e,Fc);let Ym=()=>persistAppliedTransitions(e,Fc);e.addEventListener("pagehide",Ym),Hc=()=>e.removeEventListener("pagehide",Ym)}return wt.initialized||m1("POP",wt.location,{initialHydration:!0}),Bs}function p1(){A&&A(),Hc&&Hc(),P.clear(),Os&&Os.abort(),wt.fetchers.forEach((Ym,mf)=>ly(mf)),wt.blockers.forEach((Ym,mf)=>e4(mf))}function j1(Ym){return P.add(Ym),()=>P.delete(Ym)}function C1(Ym,mf={}){Ym.matches&&(Ym.matches=Ym.matches.map(c1=>{let f1=s[c1.route.id],x1=c1.route;return x1.element!==f1.element||x1.errorElement!==f1.errorElement||x1.hydrateFallbackElement!==f1.hydrateFallbackElement?{...c1,route:f1}:c1})),wt={...wt,...Ym};let Qp=[],l1=[];wt.fetchers.forEach((c1,f1)=>{c1.state==="idle"&&(uf.has(f1)?Qp.push(f1):l1.push(f1))}),uf.forEach(c1=>{!wt.fetchers.has(c1)&&!So.has(c1)&&Qp.push(c1)}),[...P].forEach(c1=>c1(wt,{deletedFetchers:Qp,viewTransitionOpts:mf.viewTransitionOpts,flushSync:mf.flushSync===!0})),Qp.forEach(c1=>ly(c1)),l1.forEach(c1=>wt.fetchers.delete(c1))}function k1(Ym,mf,{flushSync:Qp}={}){let l1=wt.actionData!=null&&wt.navigation.formMethod!=null&&isMutationMethod(wt.navigation.formMethod)&&wt.navigation.state==="loading"&&Ym.state?._isRedirect!==!0,c1;mf.actionData?Object.keys(mf.actionData).length>0?c1=mf.actionData:c1=null:l1?c1=wt.actionData:c1=null;let f1=mf.loaderData?mergeLoaderData(wt.loaderData,mf.loaderData,mf.matches||[],mf.errors):wt.loaderData,x1=wt.blockers;x1.size>0&&(x1=new Map(x1),x1.forEach((b1,_1)=>x1.set(_1,IDLE_BLOCKER)));let y1=qc?!1:T4(Ym,mf.matches||wt.matches),v1=An===!0||wt.navigation.formMethod!=null&&isMutationMethod(wt.navigation.formMethod)&&Ym.state?._isRedirect!==!0;c&&(o=c,c=void 0),qc||li==="POP"||(li==="PUSH"?t.history.push(Ym,Ym.state):li==="REPLACE"&&t.history.replace(Ym,Ym.state));let E1;if(li==="POP"){let b1=Fc.get(wt.location.pathname);b1&&b1.has(Ym.pathname)?E1={currentLocation:wt.location,nextLocation:Ym}:Fc.has(Ym.pathname)&&(E1={currentLocation:Ym,nextLocation:wt.location})}else if(vh){let b1=Fc.get(wt.location.pathname);b1?b1.add(Ym.pathname):(b1=new Set([Ym.pathname]),Fc.set(wt.location.pathname,b1)),E1={currentLocation:wt.location,nextLocation:Ym}}C1({...mf,actionData:c1,loaderData:f1,historyAction:li,location:Ym,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:y1,preventScrollReset:v1,blockers:x1},{viewTransitionOpts:E1,flushSync:Qp===!0}),li="POP",An=!1,vh=!1,qc=!1,e1=!1,h1?.resolve(),h1=null}async function X1(Ym,mf){if(typeof Ym=="number"){t.history.go(Ym);return}let Qp=normalizeTo(wt.location,wt.matches,d,Ym,mf?.fromRouteId,mf?.relative),{path:l1,submission:c1,error:f1}=normalizeNavigateOptions(!1,Qp,mf),x1=wt.location,y1=createLocation(wt.location,l1,mf&&mf.state);y1={...y1,...t.history.encodeLocation(y1)};let v1=mf&&mf.replace!=null?mf.replace:void 0,E1="PUSH";v1===!0?E1="REPLACE":v1===!1||c1!=null&&isMutationMethod(c1.formMethod)&&c1.formAction===wt.location.pathname+wt.location.search&&(E1="REPLACE");let b1=mf&&"preventScrollReset"in mf?mf.preventScrollReset===!0:void 0,_1=(mf&&mf.flushSync)===!0,V1=A4({currentLocation:x1,nextLocation:y1,historyAction:E1});if(V1){pv(V1,{state:"blocked",location:y1,proceed(){pv(V1,{state:"proceeding",proceed:void 0,reset:void 0,location:y1}),X1(Ym,mf)},reset(){let U1=new Map(wt.blockers);U1.set(V1,IDLE_BLOCKER),C1({blockers:U1})}});return}await m1(E1,y1,{submission:c1,pendingError:f1,preventScrollReset:b1,replace:mf&&mf.replace,enableViewTransition:mf&&mf.viewTransition,flushSync:_1})}function D1(){h1||(h1=createDeferred()),Oy(),C1({revalidation:"loading"});let Ym=h1.promise;return wt.navigation.state==="submitting"?Ym:wt.navigation.state==="idle"?(m1(wt.historyAction,wt.location,{startUninterruptedRevalidation:!0}),Ym):(m1(li||wt.historyAction,wt.navigation.location,{overrideNavigation:wt.navigation,enableViewTransition:vh===!0}),Ym)}async function m1(Ym,mf,Qp){Os&&Os.abort(),Os=null,li=Ym,qc=(Qp&&Qp.startUninterruptedRevalidation)===!0,Pv(wt.location,wt.matches),An=(Qp&&Qp.preventScrollReset)===!0,vh=(Qp&&Qp.enableViewTransition)===!0;let l1=c||o,c1=Qp&&Qp.overrideNavigation,f1=Qp?.initialHydration&&wt.matches&&wt.matches.length>0&&!He?wt.matches:matchRoutes(l1,mf,d),x1=(Qp&&Qp.flushSync)===!0;if(f1&&wt.initialized&&!e1&&isHashChangeOnly(wt.location,mf)&&!(Qp&&Qp.submission&&isMutationMethod(Qp.submission.formMethod))){k1(mf,{matches:f1},{flushSync:x1});return}let y1=Hy(f1,l1,mf.pathname);if(y1.active&&y1.matches&&(f1=y1.matches),!f1){let{error:H1,notFoundMatches:I1,route:G1}=t4(mf.pathname);k1(mf,{matches:I1,loaderData:{},errors:{[G1.id]:H1}},{flushSync:x1});return}Os=new AbortController;let v1=createClientSideRequest(t.history,mf,Os.signal,Qp&&Qp.submission),E1=new unstable_RouterContextProvider(t.unstable_getContext?await t.unstable_getContext():void 0),b1;if(Qp&&Qp.pendingError)b1=[findNearestBoundary(f1).route.id,{type:"error",error:Qp.pendingError}];else if(Qp&&Qp.submission&&isMutationMethod(Qp.submission.formMethod)){let H1=await xy(v1,mf,Qp.submission,f1,E1,y1.active,Qp&&Qp.initialHydration===!0,{replace:Qp.replace,flushSync:x1});if(H1.shortCircuited)return;if(H1.pendingActionResult){let[I1,G1]=H1.pendingActionResult;if(isErrorResult(G1)&&isRouteErrorResponse(G1.error)&&G1.error.status===404){Os=null,k1(mf,{matches:H1.matches,loaderData:{},errors:{[I1]:G1.error}});return}}f1=H1.matches||f1,b1=H1.pendingActionResult,c1=getLoadingNavigation(mf,Qp.submission),x1=!1,y1.active=!1,v1=createClientSideRequest(t.history,v1.url,v1.signal)}let{shortCircuited:_1,matches:V1,loaderData:U1,errors:ny}=await Py(v1,mf,f1,E1,y1.active,c1,Qp&&Qp.submission,Qp&&Qp.fetcherSubmission,Qp&&Qp.replace,Qp&&Qp.initialHydration===!0,x1,b1);_1||(Os=null,k1(mf,{matches:V1||f1,...getActionDataForCommit(b1),loaderData:U1,errors:ny}))}async function xy(Ym,mf,Qp,l1,c1,f1,x1,y1={}){Oy();let v1=getSubmittingNavigation(mf,Qp);if(C1({navigation:v1},{flushSync:y1.flushSync===!0}),f1){let _1=await zv(l1,mf.pathname,Ym.signal);if(_1.type==="aborted")return{shortCircuited:!0};if(_1.type==="error"){let V1=findNearestBoundary(_1.partialMatches).route.id;return{matches:_1.partialMatches,pendingActionResult:[V1,{type:"error",error:_1.error}]}}else if(_1.matches)l1=_1.matches;else{let{notFoundMatches:V1,error:U1,route:ny}=t4(mf.pathname);return{matches:V1,pendingActionResult:[ny.id,{type:"error",error:U1}]}}}let E1,b1=getTargetMatch(l1,mf);if(!b1.route.action&&!b1.route.lazy)E1={type:"error",error:getInternalRouterError(405,{method:Ym.method,pathname:mf.pathname,routeId:b1.route.id})};else{let _1=getTargetedDataStrategyMatches(a,s,Ym,l1,b1,x1?[]:n,c1),V1=await yy(Ym,_1,c1,null);if(E1=V1[b1.route.id],!E1){for(let U1 of l1)if(V1[U1.route.id]){E1=V1[U1.route.id];break}}if(Ym.signal.aborted)return{shortCircuited:!0}}if(isRedirectResult(E1)){let _1;return y1&&y1.replace!=null?_1=y1.replace:_1=normalizeRedirectLocation(E1.response.headers.get("Location"),new URL(Ym.url),d)===wt.location.pathname+wt.location.search,await Sy(Ym,E1,!0,{submission:Qp,replace:_1}),{shortCircuited:!0}}if(isErrorResult(E1)){let _1=findNearestBoundary(l1,b1.route.id);return(y1&&y1.replace)!==!0&&(li="PUSH"),{matches:l1,pendingActionResult:[_1.route.id,E1,b1.route.id]}}return{matches:l1,pendingActionResult:[b1.route.id,E1]}}async function Py(Ym,mf,Qp,l1,c1,f1,x1,y1,v1,E1,b1,_1){let V1=f1||getLoadingNavigation(mf,x1),U1=x1||y1||getSubmissionFromNavigation(V1),ny=!qc&&!E1;if(c1){if(ny){let cy=Q1(_1);C1({navigation:V1,...cy!==void 0?{actionData:cy}:{}},{flushSync:b1})}let P1=await zv(Qp,mf.pathname,Ym.signal);if(P1.type==="aborted")return{shortCircuited:!0};if(P1.type==="error"){let cy=findNearestBoundary(P1.partialMatches).route.id;return{matches:P1.partialMatches,loaderData:{},errors:{[cy]:P1.error}}}else if(P1.matches)Qp=P1.matches;else{let{error:cy,notFoundMatches:r4,route:Xy}=t4(mf.pathname);return{matches:r4,loaderData:{},errors:{[Xy.id]:cy}}}}let H1=c||o,{dsMatches:I1,revalidatingFetchers:G1}=getMatchesToLoad(Ym,l1,a,s,t.history,wt,Qp,U1,mf,E1?[]:n,E1===!0,e1,df,uf,yh,Vc,H1,d,t.patchRoutesOnNavigation!=null,_1);if(Rs=++th,!t.dataStrategy&&!I1.some(P1=>P1.shouldLoad)&&G1.length===0){let P1=Nv();return k1(mf,{matches:Qp,loaderData:{},errors:_1&&isErrorResult(_1[1])?{[_1[0]]:_1[1].error}:null,...getActionDataForCommit(_1),...P1?{fetchers:new Map(wt.fetchers)}:{}},{flushSync:b1}),{shortCircuited:!0}}if(ny){let P1={};if(!c1){P1.navigation=V1;let cy=Q1(_1);cy!==void 0&&(P1.actionData=cy)}G1.length>0&&(P1.fetchers=gy(G1)),C1(P1,{flushSync:b1})}G1.forEach(P1=>{fv(P1.key),P1.controller&&So.set(P1.key,P1.controller)});let Zy=()=>G1.forEach(P1=>fv(P1.key));Os&&Os.signal.addEventListener("abort",Zy);let{loaderResults:zy,fetcherResults:Dy}=await Ey(I1,G1,Ym,l1);if(Ym.signal.aborted)return{shortCircuited:!0};Os&&Os.signal.removeEventListener("abort",Zy),G1.forEach(P1=>So.delete(P1.key));let Gy=findRedirect(zy);if(Gy)return await Sy(Ym,Gy.result,!0,{replace:v1}),{shortCircuited:!0};if(Gy=findRedirect(Dy),Gy)return Vc.add(Gy.key),await Sy(Ym,Gy.result,!0,{replace:v1}),{shortCircuited:!0};let{loaderData:k4,errors:nv}=processLoaderData(wt,Qp,zy,_1,G1,Dy);E1&&wt.errors&&(nv={...wt.errors,...nv});let yv=Nv(),av=Ov(Rs),Wy=yv||av||G1.length>0;return{matches:Qp,loaderData:k4,errors:nv,...Wy?{fetchers:new Map(wt.fetchers)}:{}}}function Q1(Ym){if(Ym&&!isErrorResult(Ym[1]))return{[Ym[0]]:Ym[1].data};if(wt.actionData)return Object.keys(wt.actionData).length===0?null:wt.actionData}function gy(Ym){return Ym.forEach(mf=>{let Qp=wt.fetchers.get(mf.key),l1=getLoadingFetcher(void 0,Qp?Qp.data:void 0);wt.fetchers.set(mf.key,l1)}),new Map(wt.fetchers)}async function my(Ym,mf,Qp,l1){fv(Ym);let c1=(l1&&l1.flushSync)===!0,f1=c||o,x1=normalizeTo(wt.location,wt.matches,d,Qp,mf,l1?.relative),y1=matchRoutes(f1,x1,d),v1=Hy(y1,f1,x1);if(v1.active&&v1.matches&&(y1=v1.matches),!y1){R1(Ym,mf,getInternalRouterError(404,{pathname:x1}),{flushSync:c1});return}let{path:E1,submission:b1,error:_1}=normalizeNavigateOptions(!0,x1,l1);if(_1){R1(Ym,mf,_1,{flushSync:c1});return}let V1=new unstable_RouterContextProvider(t.unstable_getContext?await t.unstable_getContext():void 0),U1=(l1&&l1.preventScrollReset)===!0;if(b1&&isMutationMethod(b1.formMethod)){await Iy(Ym,mf,E1,y1,V1,v1.active,c1,U1,b1);return}yh.set(Ym,{routeId:mf,path:E1}),await uy(Ym,mf,E1,y1,V1,v1.active,c1,U1,b1)}async function Iy(Ym,mf,Qp,l1,c1,f1,x1,y1,v1){Oy(),yh.delete(Ym);let E1=wt.fetchers.get(Ym);L1(Ym,getSubmittingFetcher(v1,E1),{flushSync:x1});let b1=new AbortController,_1=createClientSideRequest(t.history,Qp,b1.signal,v1);if(f1){let sy=await zv(l1,new URL(_1.url).pathname,_1.signal,Ym);if(sy.type==="aborted")return;if(sy.type==="error"){R1(Ym,mf,sy.error,{flushSync:x1});return}else if(sy.matches)l1=sy.matches;else{R1(Ym,mf,getInternalRouterError(404,{pathname:Qp}),{flushSync:x1});return}}let V1=getTargetMatch(l1,Qp);if(!V1.route.action&&!V1.route.lazy){let sy=getInternalRouterError(405,{method:v1.formMethod,pathname:Qp,routeId:mf});R1(Ym,mf,sy,{flushSync:x1});return}So.set(Ym,b1);let U1=th,ny=getTargetedDataStrategyMatches(a,s,_1,l1,V1,n,c1),I1=(await yy(_1,ny,c1,Ym))[V1.route.id];if(_1.signal.aborted){So.get(Ym)===b1&&So.delete(Ym);return}if(uf.has(Ym)){if(isRedirectResult(I1)||isErrorResult(I1)){L1(Ym,getDoneFetcher(void 0));return}}else{if(isRedirectResult(I1))if(So.delete(Ym),Rs>U1){L1(Ym,getDoneFetcher(void 0));return}else return Vc.add(Ym),L1(Ym,getLoadingFetcher(v1)),Sy(_1,I1,!1,{fetcherSubmission:v1,preventScrollReset:y1});if(isErrorResult(I1)){R1(Ym,mf,I1.error);return}}let G1=wt.navigation.location||wt.location,Zy=createClientSideRequest(t.history,G1,b1.signal),zy=c||o,Dy=wt.navigation.state!=="idle"?matchRoutes(zy,wt.navigation.location,d):wt.matches;invariant(Dy,"Didn't find any matches after fetcher action");let Gy=++th;Ko.set(Ym,Gy);let k4=getLoadingFetcher(v1,I1.data);wt.fetchers.set(Ym,k4);let{dsMatches:nv,revalidatingFetchers:yv}=getMatchesToLoad(Zy,c1,a,s,t.history,wt,Dy,v1,G1,n,!1,e1,df,uf,yh,Vc,zy,d,t.patchRoutesOnNavigation!=null,[V1.route.id,I1]);yv.filter(sy=>sy.key!==Ym).forEach(sy=>{let Iv=sy.key,M4=wt.fetchers.get(Iv),R4=getLoadingFetcher(void 0,M4?M4.data:void 0);wt.fetchers.set(Iv,R4),fv(Iv),sy.controller&&So.set(Iv,sy.controller)}),C1({fetchers:new Map(wt.fetchers)});let av=()=>yv.forEach(sy=>fv(sy.key));b1.signal.addEventListener("abort",av);let{loaderResults:Wy,fetcherResults:P1}=await Ey(nv,yv,Zy,c1);if(b1.signal.aborted)return;if(b1.signal.removeEventListener("abort",av),Ko.delete(Ym),So.delete(Ym),yv.forEach(sy=>So.delete(sy.key)),wt.fetchers.has(Ym)){let sy=getDoneFetcher(I1.data);wt.fetchers.set(Ym,sy)}let cy=findRedirect(Wy);if(cy)return Sy(Zy,cy.result,!1,{preventScrollReset:y1});if(cy=findRedirect(P1),cy)return Vc.add(cy.key),Sy(Zy,cy.result,!1,{preventScrollReset:y1});let{loaderData:r4,errors:Xy}=processLoaderData(wt,Dy,Wy,void 0,yv,P1);Ov(Gy),wt.navigation.state==="loading"&&Gy>Rs?(invariant(li,"Expected pending action"),Os&&Os.abort(),k1(wt.navigation.location,{matches:Dy,loaderData:r4,errors:Xy,fetchers:new Map(wt.fetchers)})):(C1({errors:Xy,loaderData:mergeLoaderData(wt.loaderData,r4,Dy,Xy),fetchers:new Map(wt.fetchers)}),e1=!1)}async function uy(Ym,mf,Qp,l1,c1,f1,x1,y1,v1){let E1=wt.fetchers.get(Ym);L1(Ym,getLoadingFetcher(v1,E1?E1.data:void 0),{flushSync:x1});let b1=new AbortController,_1=createClientSideRequest(t.history,Qp,b1.signal);if(f1){let G1=await zv(l1,new URL(_1.url).pathname,_1.signal,Ym);if(G1.type==="aborted")return;if(G1.type==="error"){R1(Ym,mf,G1.error,{flushSync:x1});return}else if(G1.matches)l1=G1.matches;else{R1(Ym,mf,getInternalRouterError(404,{pathname:Qp}),{flushSync:x1});return}}let V1=getTargetMatch(l1,Qp);So.set(Ym,b1);let U1=th,ny=getTargetedDataStrategyMatches(a,s,_1,l1,V1,n,c1),I1=(await yy(_1,ny,c1,Ym))[V1.route.id];if(So.get(Ym)===b1&&So.delete(Ym),!_1.signal.aborted){if(uf.has(Ym)){L1(Ym,getDoneFetcher(void 0));return}if(isRedirectResult(I1))if(Rs>U1){L1(Ym,getDoneFetcher(void 0));return}else{Vc.add(Ym),await Sy(_1,I1,!1,{preventScrollReset:y1});return}if(isErrorResult(I1)){R1(Ym,mf,I1.error);return}L1(Ym,getDoneFetcher(I1.data))}}async function Sy(Ym,mf,Qp,{submission:l1,fetcherSubmission:c1,preventScrollReset:f1,replace:x1}={}){mf.response.headers.has("X-Remix-Revalidate")&&(e1=!0);let y1=mf.response.headers.get("Location");invariant(y1,"Expected a Location header on the redirect Response"),y1=normalizeRedirectLocation(y1,new URL(Ym.url),d);let v1=createLocation(wt.location,y1,{_isRedirect:!0});if(r){let ny=!1;if(mf.response.headers.has("X-Remix-Reload-Document"))ny=!0;else if(isAbsoluteUrl(y1)){const H1=createBrowserURLImpl(y1,!0);ny=H1.origin!==e.location.origin||stripBasename(H1.pathname,d)==null}if(ny){x1?e.location.replace(y1):e.location.assign(y1);return}}Os=null;let E1=x1===!0||mf.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:b1,formAction:_1,formEncType:V1}=wt.navigation;!l1&&!c1&&b1&&_1&&V1&&(l1=getSubmissionFromNavigation(wt.navigation));let U1=l1||c1;if(redirectPreserveMethodStatusCodes.has(mf.response.status)&&U1&&isMutationMethod(U1.formMethod))await m1(E1,v1,{submission:{...U1,formAction:y1},preventScrollReset:f1||An,enableViewTransition:Qp?vh:void 0});else{let ny=getLoadingNavigation(v1,l1);await m1(E1,v1,{overrideNavigation:ny,fetcherSubmission:c1,preventScrollReset:f1||An,enableViewTransition:Qp?vh:void 0})}}async function yy(Ym,mf,Qp,l1){let c1,f1={};try{c1=await callDataStrategyImpl(m,Ym,mf,l1,Qp,!1)}catch(x1){return mf.filter(y1=>y1.shouldLoad).forEach(y1=>{f1[y1.route.id]={type:"error",error:x1}}),f1}if(Ym.signal.aborted)return f1;for(let[x1,y1]of Object.entries(c1))if(isRedirectDataStrategyResult(y1)){let v1=y1.result;f1[x1]={type:"redirect",response:normalizeRelativeRoutingRedirectResponse(v1,Ym,x1,mf,d)}}else f1[x1]=await convertDataStrategyResultToDataResult(y1);return f1}async function Ey(Ym,mf,Qp,l1){let c1=yy(Qp,Ym,l1,null),f1=Promise.all(mf.map(async v1=>{if(v1.matches&&v1.match&&v1.request&&v1.controller){let b1=(await yy(v1.request,v1.matches,l1,v1.key))[v1.match.route.id];return{[v1.key]:b1}}else return Promise.resolve({[v1.key]:{type:"error",error:getInternalRouterError(404,{pathname:v1.path})}})})),x1=await c1,y1=(await f1).reduce((v1,E1)=>Object.assign(v1,E1),{});return{loaderResults:x1,fetcherResults:y1}}function Oy(){e1=!0,yh.forEach((Ym,mf)=>{So.has(mf)&&df.add(mf),fv(mf)})}function L1(Ym,mf,Qp={}){wt.fetchers.set(Ym,mf),C1({fetchers:new Map(wt.fetchers)},{flushSync:(Qp&&Qp.flushSync)===!0})}function R1(Ym,mf,Qp,l1={}){let c1=findNearestBoundary(wt.matches,mf);ly(Ym),C1({errors:{[c1.route.id]:Qp},fetchers:new Map(wt.fetchers)},{flushSync:(l1&&l1.flushSync)===!0})}function vy(Ym){return wh.set(Ym,(wh.get(Ym)||0)+1),uf.has(Ym)&&uf.delete(Ym),wt.fetchers.get(Ym)||IDLE_FETCHER}function ly(Ym){let mf=wt.fetchers.get(Ym);So.has(Ym)&&!(mf&&mf.state==="loading"&&Ko.has(Ym))&&fv(Ym),yh.delete(Ym),Ko.delete(Ym),Vc.delete(Ym),uf.delete(Ym),df.delete(Ym),wt.fetchers.delete(Ym)}function Rv(Ym){let mf=(wh.get(Ym)||0)-1;mf<=0?(wh.delete(Ym),uf.add(Ym)):wh.set(Ym,mf),C1({fetchers:new Map(wt.fetchers)})}function fv(Ym){let mf=So.get(Ym);mf&&(mf.abort(),So.delete(Ym))}function Fv(Ym){for(let mf of Ym){let Qp=vy(mf),l1=getDoneFetcher(Qp.data);wt.fetchers.set(mf,l1)}}function Nv(){let Ym=[],mf=!1;for(let Qp of Vc){let l1=wt.fetchers.get(Qp);invariant(l1,`Expected fetcher: ${Qp}`),l1.state==="loading"&&(Vc.delete(Qp),Ym.push(Qp),mf=!0)}return Fv(Ym),mf}function Ov(Ym){let mf=[];for(let[Qp,l1]of Ko)if(l1<Ym){let c1=wt.fetchers.get(Qp);invariant(c1,`Expected fetcher: ${Qp}`),c1.state==="loading"&&(fv(Qp),Ko.delete(Qp),mf.push(Qp))}return Fv(mf),mf.length>0}function iv(Ym,mf){let Qp=wt.blockers.get(Ym)||IDLE_BLOCKER;return i1.get(Ym)!==mf&&i1.set(Ym,mf),Qp}function e4(Ym){wt.blockers.delete(Ym),i1.delete(Ym)}function pv(Ym,mf){let Qp=wt.blockers.get(Ym)||IDLE_BLOCKER;invariant(Qp.state==="unblocked"&&mf.state==="blocked"||Qp.state==="blocked"&&mf.state==="blocked"||Qp.state==="blocked"&&mf.state==="proceeding"||Qp.state==="blocked"&&mf.state==="unblocked"||Qp.state==="proceeding"&&mf.state==="unblocked",`Invalid blocker state transition: ${Qp.state} -> ${mf.state}`);let l1=new Map(wt.blockers);l1.set(Ym,mf),C1({blockers:l1})}function A4({currentLocation:Ym,nextLocation:mf,historyAction:Qp}){if(i1.size===0)return;i1.size>1&&warning(!1,"A router only supports one blocker at a time");let l1=Array.from(i1.entries()),[c1,f1]=l1[l1.length-1],x1=wt.blockers.get(c1);if(!(x1&&x1.state==="proceeding")&&f1({currentLocation:Ym,nextLocation:mf,historyAction:Qp}))return c1}function t4(Ym){let mf=getInternalRouterError(404,{pathname:Ym}),Qp=c||o,{matches:l1,route:c1}=getShortCircuitMatches(Qp);return{notFoundMatches:l1,route:c1,error:mf}}function t2(Ym,mf,Qp){if(Z=Ym,_e=mf,me=Qp||null,!Ge&&wt.navigation===IDLE_NAVIGATION){Ge=!0;let l1=T4(wt.location,wt.matches);l1!=null&&C1({restoreScrollPosition:l1})}return()=>{Z=null,_e=null,me=null}}function gv(Ym,mf){return me&&me(Ym,mf.map(l1=>convertRouteMatchToUiMatch(l1,wt.loaderData)))||Ym.key}function Pv(Ym,mf){if(Z&&_e){let Qp=gv(Ym,mf);Z[Qp]=_e()}}function T4(Ym,mf){if(Z){let Qp=gv(Ym,mf),l1=Z[Qp];if(typeof l1=="number")return l1}return null}function Hy(Ym,mf,Qp){if(t.patchRoutesOnNavigation)if(Ym){if(Object.keys(Ym[0].params).length>0)return{active:!0,matches:matchRoutesImpl(mf,Qp,d,!0)}}else return{active:!0,matches:matchRoutesImpl(mf,Qp,d,!0)||[]};return{active:!1,matches:null}}async function zv(Ym,mf,Qp,l1){if(!t.patchRoutesOnNavigation)return{type:"success",matches:Ym};let c1=Ym;for(;;){let f1=c==null,x1=c||o,y1=s;try{await t.patchRoutesOnNavigation({signal:Qp,path:mf,matches:c1,fetcherKey:l1,patch:(b1,_1)=>{Qp.aborted||patchRoutesImpl(b1,_1,x1,y1,a,!1)}})}catch(b1){return{type:"error",error:b1,partialMatches:c1}}finally{f1&&!Qp.aborted&&(o=[...o])}if(Qp.aborted)return{type:"aborted"};let v1=matchRoutes(x1,mf,d);if(v1)return{type:"success",matches:v1};let E1=matchRoutesImpl(x1,mf,d,!0);if(!E1||c1.length===E1.length&&c1.every((b1,_1)=>b1.route.id===E1[_1].route.id))return{type:"success",matches:null};c1=E1}}function $v(Ym){s={},c=convertRoutesToDataRoutes(Ym,a,void 0,s)}function C4(Ym,mf,Qp=!1){let l1=c==null;patchRoutesImpl(Ym,mf,c||o,s,a,Qp),l1&&(o=[...o],C1({}))}return Bs={get basename(){return d},get future(){return y},get state(){return wt},get routes(){return o},get window(){return e},initialize:T1,subscribe:j1,enableScrollRestoration:t2,navigate:X1,fetch:my,revalidate:D1,createHref:Ym=>t.history.createHref(Ym),encodeLocation:Ym=>t.history.encodeLocation(Ym),getFetcher:vy,deleteFetcher:Rv,dispose:p1,getBlocker:iv,deleteBlocker:e4,patchRoutes:C4,_internalFetchControllers:So,_internalSetRoutes:$v,_internalSetStateDoNotUseOrYouWillBreakYourApp(Ym){C1(Ym)}},Bs}function isSubmissionNavigation(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function normalizeTo(t,e,r,n,a,s){let o,c;if(a){o=[];for(let m of e)if(o.push(m),m.route.id===a){c=m;break}}else o=e,c=e[e.length-1];let d=resolveTo(n||".",getResolveToMatches(o),stripBasename(t.pathname,r)||t.pathname,s==="path");if(n==null&&(d.search=t.search,d.hash=t.hash),(n==null||n===""||n===".")&&c){let m=hasNakedIndexQuery(d.search);if(c.route.index&&!m)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&m){let y=new URLSearchParams(d.search),A=y.getAll("index");y.delete("index"),A.filter(Z=>Z).forEach(Z=>y.append("index",Z));let P=y.toString();d.search=P?`?${P}`:""}}return r!=="/"&&(d.pathname=prependBasename({basename:r,pathname:d.pathname})),createPath(d)}function normalizeNavigateOptions(t,e,r){if(!r||!isSubmissionNavigation(r))return{path:e};if(r.formMethod&&!isValidMethod(r.formMethod))return{path:e,error:getInternalRouterError(405,{method:r.formMethod})};let n=()=>({path:e,error:getInternalRouterError(400,{type:"invalid-body"})}),s=(r.formMethod||"get").toUpperCase(),o=stripHashFromPath(e);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!isMutationMethod(s))return n();let A=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((P,[Z,me])=>`${P}${Z}=${me}
`,""):String(r.body);return{path:e,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:void 0,text:A}}}else if(r.formEncType==="application/json"){if(!isMutationMethod(s))return n();try{let A=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:e,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:A,text:void 0}}}catch{return n()}}}invariant(typeof FormData=="function","FormData is not available in this environment");let c,d;if(r.formData)c=convertFormDataToSearchParams(r.formData),d=r.formData;else if(r.body instanceof FormData)c=convertFormDataToSearchParams(r.body),d=r.body;else if(r.body instanceof URLSearchParams)c=r.body,d=convertSearchParamsToFormData(c);else if(r.body==null)c=new URLSearchParams,d=new FormData;else try{c=new URLSearchParams(r.body),d=convertSearchParamsToFormData(c)}catch{return n()}let m={formMethod:s,formAction:o,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(isMutationMethod(m.formMethod))return{path:e,submission:m};let y=parsePath(e);return t&&y.search&&hasNakedIndexQuery(y.search)&&c.append("index",""),y.search=`?${c}`,{path:createPath(y),submission:m}}function getMatchesToLoad(t,e,r,n,a,s,o,c,d,m,y,A,P,Z,me,_e,Ge,ve,He,De){let Xe=De?isErrorResult(De[1])?De[1].error:De[1].data:void 0,Bs=a.createURL(s.location),wt=a.createURL(d),li;if(y&&s.errors){let qc=Object.keys(s.errors)[0];li=o.findIndex(e1=>e1.route.id===qc)}else if(De&&isErrorResult(De[1])){let qc=De[0];li=o.findIndex(e1=>e1.route.id===qc)-1}let An=De?De[1].statusCode:void 0,Os=An&&An>=400,vh={currentUrl:Bs,currentParams:s.matches[0]?.params||{},nextUrl:wt,nextParams:o[0].params,...c,actionResult:Xe,actionStatus:An},Fc=o.map((qc,e1)=>{let{route:df}=qc,So=null;if(li!=null&&e1>li?So=!1:df.lazy?So=!0:df.loader==null?So=!1:y?So=shouldLoadRouteOnHydration(df,s.loaderData,s.errors):isNewLoader(s.loaderData,s.matches[e1],qc)&&(So=!0),So!==null)return getDataStrategyMatch(r,n,t,qc,m,e,So);let th=Os?!1:A||Bs.pathname+Bs.search===wt.pathname+wt.search||Bs.search!==wt.search||isNewRouteInstance(s.matches[e1],qc),Rs={...vh,defaultShouldRevalidate:th},Ko=shouldRevalidateLoader(qc,Rs);return getDataStrategyMatch(r,n,t,qc,m,e,Ko,Rs)}),Hc=[];return me.forEach((qc,e1)=>{if(y||!o.some(wh=>wh.route.id===qc.routeId)||Z.has(e1))return;let df=s.fetchers.get(e1),So=df&&df.state!=="idle"&&df.data===void 0,th=matchRoutes(Ge,qc.path,ve);if(!th){if(He&&So)return;Hc.push({key:e1,routeId:qc.routeId,path:qc.path,matches:null,match:null,request:null,controller:null});return}if(_e.has(e1))return;let Rs=getTargetMatch(th,qc.path),Ko=new AbortController,Vc=createClientSideRequest(a,qc.path,Ko.signal),yh=null;if(P.has(e1))P.delete(e1),yh=getTargetedDataStrategyMatches(r,n,Vc,th,Rs,m,e);else if(So)A&&(yh=getTargetedDataStrategyMatches(r,n,Vc,th,Rs,m,e));else{let wh={...vh,defaultShouldRevalidate:Os?!1:A};shouldRevalidateLoader(Rs,wh)&&(yh=getTargetedDataStrategyMatches(r,n,Vc,th,Rs,m,e,wh))}yh&&Hc.push({key:e1,routeId:qc.routeId,path:qc.path,matches:yh,match:Rs,request:Vc,controller:Ko})}),{dsMatches:Fc,revalidatingFetchers:Hc}}function shouldLoadRouteOnHydration(t,e,r){if(t.lazy)return!0;if(!t.loader)return!1;let n=e!=null&&t.id in e,a=r!=null&&r[t.id]!==void 0;return!n&&a?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!n&&!a}function isNewLoader(t,e,r){let n=!e||r.route.id!==e.route.id,a=!t.hasOwnProperty(r.route.id);return n||a}function isNewRouteInstance(t,e){let r=t.route.path;return t.pathname!==e.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==e.params["*"]}function shouldRevalidateLoader(t,e){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(e);if(typeof r=="boolean")return r}return e.defaultShouldRevalidate}function patchRoutesImpl(t,e,r,n,a,s){let o;if(t){let m=n[t];invariant(m,`No route found to patch children into: routeId = ${t}`),m.children||(m.children=[]),o=m.children}else o=r;let c=[],d=[];if(e.forEach(m=>{let y=o.find(A=>isSameRoute(m,A));y?d.push({existingRoute:y,newRoute:m}):c.push(m)}),c.length>0){let m=convertRoutesToDataRoutes(c,a,[t||"_","patch",String(o?.length||"0")],n);o.push(...m)}if(s&&d.length>0)for(let m=0;m<d.length;m++){let{existingRoute:y,newRoute:A}=d[m],P=y,[Z]=convertRoutesToDataRoutes([A],a,[],{},!0);Object.assign(P,{element:Z.element?Z.element:P.element,errorElement:Z.errorElement?Z.errorElement:P.errorElement,hydrateFallbackElement:Z.hydrateFallbackElement?Z.hydrateFallbackElement:P.hydrateFallbackElement})}}function isSameRoute(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((r,n)=>e.children?.some(a=>isSameRoute(r,a))):!1}var lazyRoutePropertyCache=new WeakMap,loadLazyRouteProperty=({key:t,route:e,manifest:r,mapRouteProperties:n})=>{let a=r[e.id];if(invariant(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let s=a.lazy[t];if(!s)return;let o=lazyRoutePropertyCache.get(a);o||(o={},lazyRoutePropertyCache.set(a,o));let c=o[t];if(c)return c;let d=(async()=>{let m=isUnsupportedLazyRouteObjectKey(t),A=a[t]!==void 0&&t!=="hasErrorBoundary";if(m)warning(!m,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),o[t]=Promise.resolve();else if(A)warning(!1,`Route "${a.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let P=await s();P!=null&&(Object.assign(a,{[t]:P}),Object.assign(a,n(a)))}typeof a.lazy=="object"&&(a.lazy[t]=void 0,Object.values(a.lazy).every(P=>P===void 0)&&(a.lazy=void 0))})();return o[t]=d,d},lazyRouteFunctionCache=new WeakMap;function loadLazyRoute(t,e,r,n,a){let s=r[t.id];if(invariant(s,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let y=lazyRouteFunctionCache.get(s);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let A=(async()=>{invariant(typeof t.lazy=="function","No lazy route function found");let P=await t.lazy(),Z={};for(let me in P){let _e=P[me];if(_e===void 0)continue;let Ge=isUnsupportedLazyRouteFunctionKey(me),He=s[me]!==void 0&&me!=="hasErrorBoundary";Ge?warning(!Ge,"Route property "+me+" is not a supported property to be returned from a lazy route function. This property will be ignored."):He?warning(!He,`Route "${s.id}" has a static property "${me}" defined but its lazy function is also returning a value for this property. The lazy route property "${me}" will be ignored.`):Z[me]=_e}Object.assign(s,Z),Object.assign(s,{...n(s),lazy:void 0})})();return lazyRouteFunctionCache.set(s,A),A.catch(()=>{}),{lazyRoutePromise:A,lazyHandlerPromise:A}}let o=Object.keys(t.lazy),c=[],d;for(let y of o){if(a&&a.includes(y))continue;let A=loadLazyRouteProperty({key:y,route:t,manifest:r,mapRouteProperties:n});A&&(c.push(A),y===e&&(d=A))}let m=c.length>0?Promise.all(c).then(()=>{}):void 0;return m?.catch(()=>{}),d?.catch(()=>{}),{lazyRoutePromise:m,lazyHandlerPromise:d}}async function defaultDataStrategy(t){let e=t.matches.filter(a=>a.shouldLoad),r={};return(await Promise.all(e.map(a=>a.resolve()))).forEach((a,s)=>{r[e[s].route.id]=a}),r}async function defaultDataStrategyWithMiddleware(t){return t.matches.some(e=>e.route.unstable_middleware)?runMiddlewarePipeline(t,!1,()=>defaultDataStrategy(t),(e,r)=>({[r]:{type:"error",result:e}})):defaultDataStrategy(t)}async function runMiddlewarePipeline(t,e,r,n){let{matches:a,request:s,params:o,context:c}=t,d={handlerResult:void 0};try{let m=a.flatMap(A=>A.route.unstable_middleware?A.route.unstable_middleware.map(P=>[A.route.id,P]):[]),y=await callRouteMiddleware({request:s,params:o,context:c},m,e,d,r);return e?y:d.handlerResult}catch(m){if(!d.middlewareError)throw m;let y=await n(d.middlewareError.error,d.middlewareError.routeId);return d.handlerResult?Object.assign(d.handlerResult,y):y}}async function callRouteMiddleware(t,e,r,n,a,s=0){let{request:o}=t;if(o.signal.aborted)throw o.signal.reason?o.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${o.method} ${o.url}`);let c=e[s];if(!c)return n.handlerResult=await a(),n.handlerResult;let[d,m]=c,y=!1,A,P=async()=>{if(y)throw new Error("You may only call `next()` once per middleware");y=!0,await callRouteMiddleware(t,e,r,n,a,s+1)};try{let Z=await m({request:t.request,params:t.params,context:t.context},P);return y?Z===void 0?A:Z:P()}catch(Z){throw n.middlewareError?n.middlewareError.error!==Z&&(n.middlewareError={routeId:d,error:Z}):n.middlewareError={routeId:d,error:Z},Z}}function getDataStrategyMatchLazyPromises(t,e,r,n,a){let s=loadLazyRouteProperty({key:"unstable_middleware",route:n.route,manifest:e,mapRouteProperties:t}),o=loadLazyRoute(n.route,isMutationMethod(r.method)?"action":"loader",e,t,a);return{middleware:s,route:o.lazyRoutePromise,handler:o.lazyHandlerPromise}}function getDataStrategyMatch(t,e,r,n,a,s,o,c=null){let d=!1,m=getDataStrategyMatchLazyPromises(t,e,r,n,a);return{...n,_lazyPromises:m,shouldLoad:o,unstable_shouldRevalidateArgs:c,unstable_shouldCallHandler(y){return d=!0,c?typeof y=="boolean"?shouldRevalidateLoader(n,{...c,defaultShouldRevalidate:y}):shouldRevalidateLoader(n,c):o},resolve(y){return d||o||y&&!isMutationMethod(r.method)&&(n.route.lazy||n.route.loader)?callLoaderOrAction({request:r,match:n,lazyHandlerPromise:m?.handler,lazyRoutePromise:m?.route,handlerOverride:y,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function getTargetedDataStrategyMatches(t,e,r,n,a,s,o,c=null){return n.map(d=>d.route.id!==a.route.id?{...d,shouldLoad:!1,unstable_shouldRevalidateArgs:c,unstable_shouldCallHandler:()=>!1,_lazyPromises:getDataStrategyMatchLazyPromises(t,e,r,d,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:getDataStrategyMatch(t,e,r,d,s,o,!0,c))}async function callDataStrategyImpl(t,e,r,n,a,s){r.some(m=>m._lazyPromises?.middleware)&&await Promise.all(r.map(m=>m._lazyPromises?.middleware));let o={request:e,params:r[0].params,context:a,matches:r},d=await t({...o,fetcherKey:n,unstable_runClientMiddleware:m=>{let y=o;return runMiddlewarePipeline(y,!1,()=>m({...y,fetcherKey:n,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(A,P)=>({[P]:{type:"error",result:A}}))}});try{await Promise.all(r.flatMap(m=>[m._lazyPromises?.handler,m._lazyPromises?.route]))}catch{}return d}async function callLoaderOrAction({request:t,match:e,lazyHandlerPromise:r,lazyRoutePromise:n,handlerOverride:a,scopedContext:s}){let o,c,d=isMutationMethod(t.method),m=d?"action":"loader",y=A=>{let P,Z=new Promise((Ge,ve)=>P=ve);c=()=>P(),t.signal.addEventListener("abort",c);let me=Ge=>typeof A!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${m}" [routeId: ${e.route.id}]`)):A({request:t,params:e.params,context:s},...Ge!==void 0?[Ge]:[]),_e=(async()=>{try{return{type:"data",result:await(a?a(ve=>me(ve)):me())}}catch(Ge){return{type:"error",result:Ge}}})();return Promise.race([_e,Z])};try{let A=d?e.route.action:e.route.loader;if(r||n)if(A){let P,[Z]=await Promise.all([y(A).catch(me=>{P=me}),r,n]);if(P!==void 0)throw P;o=Z}else{await r;let P=d?e.route.action:e.route.loader;if(P)[o]=await Promise.all([y(P),n]);else if(m==="action"){let Z=new URL(t.url),me=Z.pathname+Z.search;throw getInternalRouterError(405,{method:t.method,pathname:me,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(A)o=await y(A);else{let P=new URL(t.url),Z=P.pathname+P.search;throw getInternalRouterError(404,{pathname:Z})}}catch(A){return{type:"error",result:A}}finally{c&&t.signal.removeEventListener("abort",c)}return o}async function convertDataStrategyResultToDataResult(t){let{result:e,type:r}=t;if(isResponse(e)){let n;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?n=null:n=await e.json():n=await e.text()}catch(a){return{type:"error",error:a}}return r==="error"?{type:"error",error:new ErrorResponseImpl(e.status,e.statusText,n),statusCode:e.status,headers:e.headers}:{type:"data",data:n,statusCode:e.status,headers:e.headers}}return r==="error"?isDataWithResponseInit(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new ErrorResponseImpl(e.init?.status||500,void 0,e.data),statusCode:isRouteErrorResponse(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:isRouteErrorResponse(e)?e.status:void 0}:isDataWithResponseInit(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function normalizeRelativeRoutingRedirectResponse(t,e,r,n,a){let s=t.headers.get("Location");if(invariant(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!isAbsoluteUrl(s)){let o=n.slice(0,n.findIndex(c=>c.route.id===r)+1);s=normalizeTo(new URL(e.url),o,a,s),t.headers.set("Location",s)}return t}function normalizeRedirectLocation(t,e,r){if(isAbsoluteUrl(t)){let n=t,a=n.startsWith("//")?new URL(e.protocol+n):new URL(n),s=stripBasename(a.pathname,r)!=null;if(a.origin===e.origin&&s)return a.pathname+a.search+a.hash}return t}function createClientSideRequest(t,e,r,n){let a=t.createURL(stripHashFromPath(e)).toString(),s={signal:r};if(n&&isMutationMethod(n.formMethod)){let{formMethod:o,formEncType:c}=n;s.method=o.toUpperCase(),c==="application/json"?(s.headers=new Headers({"Content-Type":c}),s.body=JSON.stringify(n.json)):c==="text/plain"?s.body=n.text:c==="application/x-www-form-urlencoded"&&n.formData?s.body=convertFormDataToSearchParams(n.formData):s.body=n.formData}return new Request(a,s)}function convertFormDataToSearchParams(t){let e=new URLSearchParams;for(let[r,n]of t.entries())e.append(r,typeof n=="string"?n:n.name);return e}function convertSearchParamsToFormData(t){let e=new FormData;for(let[r,n]of t.entries())e.append(r,n);return e}function processRouteLoaderData(t,e,r,n=!1,a=!1){let s={},o=null,c,d=!1,m={},y=r&&isErrorResult(r[1])?r[1].error:void 0;return t.forEach(A=>{if(!(A.route.id in e))return;let P=A.route.id,Z=e[P];if(invariant(!isRedirectResult(Z),"Cannot handle redirect results in processLoaderData"),isErrorResult(Z)){let me=Z.error;if(y!==void 0&&(me=y,y=void 0),o=o||{},a)o[P]=me;else{let _e=findNearestBoundary(t,P);o[_e.route.id]==null&&(o[_e.route.id]=me)}n||(s[P]=ResetLoaderDataSymbol),d||(d=!0,c=isRouteErrorResponse(Z.error)?Z.error.status:500),Z.headers&&(m[P]=Z.headers)}else s[P]=Z.data,Z.statusCode&&Z.statusCode!==200&&!d&&(c=Z.statusCode),Z.headers&&(m[P]=Z.headers)}),y!==void 0&&r&&(o={[r[0]]:y},r[2]&&(s[r[2]]=void 0)),{loaderData:s,errors:o,statusCode:c||200,loaderHeaders:m}}function processLoaderData(t,e,r,n,a,s){let{loaderData:o,errors:c}=processRouteLoaderData(e,r,n);return a.filter(d=>!d.matches||d.matches.some(m=>m.shouldLoad)).forEach(d=>{let{key:m,match:y,controller:A}=d,P=s[m];if(invariant(P,"Did not find corresponding fetcher result"),!(A&&A.signal.aborted))if(isErrorResult(P)){let Z=findNearestBoundary(t.matches,y?.route.id);c&&c[Z.route.id]||(c={...c,[Z.route.id]:P.error}),t.fetchers.delete(m)}else if(isRedirectResult(P))invariant(!1,"Unhandled fetcher revalidation redirect");else{let Z=getDoneFetcher(P.data);t.fetchers.set(m,Z)}}),{loaderData:o,errors:c}}function mergeLoaderData(t,e,r,n){let a=Object.entries(e).filter(([,s])=>s!==ResetLoaderDataSymbol).reduce((s,[o,c])=>(s[o]=c,s),{});for(let s of r){let o=s.route.id;if(!e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&s.route.loader&&(a[o]=t[o]),n&&n.hasOwnProperty(o))break}return a}function getActionDataForCommit(t){return t?isErrorResult(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function findNearestBoundary(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function getShortCircuitMatches(t){let e=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function getInternalRouterError(t,{pathname:e,routeId:r,method:n,type:a,message:s}={}){let o="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(o="Bad Request",n&&e&&r?c=`You made a ${n} request to "${e}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:a==="invalid-body"&&(c="Unable to encode submission body")):t===403?(o="Forbidden",c=`Route "${r}" does not match URL "${e}"`):t===404?(o="Not Found",c=`No route matches URL "${e}"`):t===405&&(o="Method Not Allowed",n&&e&&r?c=`You made a ${n.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(c=`Invalid request method "${n.toUpperCase()}"`)),new ErrorResponseImpl(t||500,o,new Error(c),!0)}function findRedirect(t){let e=Object.entries(t);for(let r=e.length-1;r>=0;r--){let[n,a]=e[r];if(isRedirectResult(a))return{key:n,result:a}}}function stripHashFromPath(t){let e=typeof t=="string"?parsePath(t):t;return createPath({...e,hash:""})}function isHashChangeOnly(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function isRedirectDataStrategyResult(t){return isResponse(t.result)&&redirectStatusCodes.has(t.result.status)}function isErrorResult(t){return t.type==="error"}function isRedirectResult(t){return(t&&t.type)==="redirect"}function isDataWithResponseInit(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function isResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function isValidMethod(t){return validRequestMethods.has(t.toUpperCase())}function isMutationMethod(t){return validMutationMethods.has(t.toUpperCase())}function hasNakedIndexQuery(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function getTargetMatch(t,e){let r=typeof e=="string"?parsePath(e).search:e.search;if(t[t.length-1].route.index&&hasNakedIndexQuery(r||""))return t[t.length-1];let n=getPathContributingMatches(t);return n[n.length-1]}function getSubmissionFromNavigation(t){let{formMethod:e,formAction:r,formEncType:n,text:a,formData:s,json:o}=t;if(!(!e||!r||!n)){if(a!=null)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:void 0,text:a};if(s!=null)return{formMethod:e,formAction:r,formEncType:n,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:o,text:void 0}}}function getLoadingNavigation(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function getLoadingFetcher(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function getSubmittingFetcher(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function getDoneFetcher(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function restoreAppliedTransitions(t,e){try{let r=t.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(r){let n=JSON.parse(r);for(let[a,s]of Object.entries(n||{}))s&&Array.isArray(s)&&e.set(a,new Set(s||[]))}}catch{}}function persistAppliedTransitions(t,e){if(e.size>0){let r={};for(let[n,a]of e)r[n]=[...a];try{t.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(r))}catch(n){warning(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function createDeferred(){let t,e,r=new Promise((n,a)=>{t=async s=>{n(s);try{await r}catch{}},e=async s=>{a(s);try{await r}catch{}}});return{promise:r,resolve:t,reject:e}}var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(t,{relative:e}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=reactExports.useContext(NavigationContext),{hash:a,pathname:s,search:o}=useResolvedPath(t,{relative:e}),c=s;return r!=="/"&&(c=s==="/"?r:joinPaths([r,s])),n.createHref({pathname:c,search:o,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:r}=reactExports.useContext(NavigationContext),{matches:n}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),s=JSON.stringify(getResolveToMatches(n)),o=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{o.current=!0}),reactExports.useCallback((d,m={})=>{if(warning(o.current,navigateEffectWarning),!o.current)return;if(typeof d=="number"){r.go(d);return}let y=resolveTo(d,JSON.parse(s),a,m.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:joinPaths([e,y.pathname])),(m.replace?r.replace:r.push)(y,m.state,m)},[e,r,s,a,t])}reactExports.createContext(null);function useResolvedPath(t,{relative:e}={}){let{matches:r}=reactExports.useContext(RouteContext),{pathname:n}=useLocation(),a=JSON.stringify(getResolveToMatches(r));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function useRoutesImpl(t,e,r,n){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=reactExports.useContext(NavigationContext),{matches:s}=reactExports.useContext(RouteContext),o=s[s.length-1],c=o?o.params:{},d=o?o.pathname:"/",m=o?o.pathnameBase:"/",y=o&&o.route;{let ve=y&&y.path||"";warningOnce(d,!y||ve.endsWith("*")||ve.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${ve}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ve}"> to <Route path="${ve==="/"?"*":`${ve}/*`}">.`)}let A=useLocation(),P;P=A;let Z=P.pathname||"/",me=Z;if(m!=="/"){let ve=m.replace(/^\//,"").split("/");me="/"+Z.replace(/^\//,"").split("/").slice(ve.length).join("/")}let _e=matchRoutes(t,{pathname:me});return warning(y||_e!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),warning(_e==null||_e[_e.length-1].route.element!==void 0||_e[_e.length-1].route.Component!==void 0||_e[_e.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(_e&&_e.map(ve=>Object.assign({},ve,{params:Object.assign({},c,ve.params),pathname:joinPaths([m,a.encodeLocation?a.encodeLocation(ve.pathname).pathname:ve.pathname]),pathnameBase:ve.pathnameBase==="/"?m:joinPaths([m,a.encodeLocation?a.encodeLocation(ve.pathnameBase).pathname:ve.pathnameBase])})),s,r,n)}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"💿 Hey developer 👋"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:s},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:s},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),r?reactExports.createElement("pre",{style:a},r):null,o)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:t,match:e,children:r}){let n=reactExports.useContext(DataRouterContext);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:t},r)}function _renderMatches(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r?.errors;if(s!=null){let d=a.findIndex(m=>m.route.id&&s?.[m.route.id]!==void 0);invariant(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let o=!1,c=-1;if(r)for(let d=0;d<a.length;d++){let m=a[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=d),m.route.id){let{loaderData:y,errors:A}=r,P=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!A||A[m.route.id]===void 0);if(m.route.lazy||P){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,m,y)=>{let A,P=!1,Z=null,me=null;r&&(A=s&&m.route.id?s[m.route.id]:void 0,Z=m.route.errorElement||defaultErrorElement,o&&(c<0&&y===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,me=null):c===y&&(P=!0,me=m.route.hydrateFallbackElement||null)));let _e=e.concat(a.slice(0,y+1)),Ge=()=>{let ve;return A?ve=Z:P?ve=me:m.route.Component?ve=reactExports.createElement(m.route.Component,null):m.route.element?ve=m.route.element:ve=d,reactExports.createElement(RenderedRoute,{match:m,routeContext:{outlet:d,matches:_e,isDataRoute:r!=null},children:ve})};return r&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?reactExports.createElement(RenderErrorBoundary,{location:r.location,revalidation:r.revalidation,component:Z,error:A,children:Ge(),routeContext:{outlet:null,matches:_e,isDataRoute:!0}}):Ge()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError(t)),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return invariant(e,getDataRouterConsoleError(t)),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return invariant(e,getDataRouterConsoleError(t)),e}function useCurrentRouteId(t){let e=useRouteContext(t),r=e.matches[e.matches.length-1];return invariant(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let t=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),r=useCurrentRouteId("useRouteError");return t!==void 0?t:e.errors?.[r]}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),r=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{r.current=!0}),reactExports.useCallback(async(a,s={})=>{warning(r.current,navigateEffectWarning),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var alreadyWarned={};function warningOnce(t,e,r){!e&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning(!1,r))}var alreadyWarned2={};function warnOnce(t,e){!t&&!alreadyWarned2[e]&&(alreadyWarned2[e]=!0,console.warn(e))}function mapRouteProperties(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&warning(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:reactExports.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&warning(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:reactExports.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&warning(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:reactExports.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var hydrationRouteProperties=["HydrateFallback","hydrateFallbackElement"],Deferred$1=class{constructor(){this.status="pending",this.promise=new Promise((e,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}};function RouterProvider({router:t,flushSync:e}){let[r,n]=reactExports.useState(t.state),[a,s]=reactExports.useState(),[o,c]=reactExports.useState({isTransitioning:!1}),[d,m]=reactExports.useState(),[y,A]=reactExports.useState(),[P,Z]=reactExports.useState(),me=reactExports.useRef(new Map),_e=reactExports.useCallback((De,{deletedFetchers:Xe,flushSync:Bs,viewTransitionOpts:wt})=>{De.fetchers.forEach((An,Os)=>{An.data!==void 0&&me.current.set(Os,An.data)}),Xe.forEach(An=>me.current.delete(An)),warnOnce(Bs===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let li=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(warnOnce(wt==null||li,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!wt||!li){e&&Bs?e(()=>n(De)):reactExports.startTransition(()=>n(De));return}if(e&&Bs){e(()=>{y&&(d&&d.resolve(),y.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:wt.currentLocation,nextLocation:wt.nextLocation})});let An=t.window.document.startViewTransition(()=>{e(()=>n(De))});An.finished.finally(()=>{e(()=>{m(void 0),A(void 0),s(void 0),c({isTransitioning:!1})})}),e(()=>A(An));return}y?(d&&d.resolve(),y.skipTransition(),Z({state:De,currentLocation:wt.currentLocation,nextLocation:wt.nextLocation})):(s(De),c({isTransitioning:!0,flushSync:!1,currentLocation:wt.currentLocation,nextLocation:wt.nextLocation}))},[t.window,e,y,d]);reactExports.useLayoutEffect(()=>t.subscribe(_e),[t,_e]),reactExports.useEffect(()=>{o.isTransitioning&&!o.flushSync&&m(new Deferred$1)},[o]),reactExports.useEffect(()=>{if(d&&a&&t.window){let De=a,Xe=d.promise,Bs=t.window.document.startViewTransition(async()=>{reactExports.startTransition(()=>n(De)),await Xe});Bs.finished.finally(()=>{m(void 0),A(void 0),s(void 0),c({isTransitioning:!1})}),A(Bs)}},[a,d,t.window]),reactExports.useEffect(()=>{d&&a&&r.location.key===a.location.key&&d.resolve()},[d,y,r.location,a]),reactExports.useEffect(()=>{!o.isTransitioning&&P&&(s(P.state),c({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}),Z(void 0))},[o.isTransitioning,P]);let Ge=reactExports.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:De=>t.navigate(De),push:(De,Xe,Bs)=>t.navigate(De,{state:Xe,preventScrollReset:Bs?.preventScrollReset}),replace:(De,Xe,Bs)=>t.navigate(De,{replace:!0,state:Xe,preventScrollReset:Bs?.preventScrollReset})}),[t]),ve=t.basename||"/",He=reactExports.useMemo(()=>({router:t,navigator:Ge,static:!1,basename:ve}),[t,Ge,ve]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:He},reactExports.createElement(DataRouterStateContext.Provider,{value:r},reactExports.createElement(FetchersContext.Provider,{value:me.current},reactExports.createElement(ViewTransitionContext.Provider,{value:o},reactExports.createElement(Router,{basename:ve,location:r.location,navigationType:r.historyAction,navigator:Ge},reactExports.createElement(MemoizedDataRoutes,{routes:t.routes,future:t.future,state:r})))))),null)}var MemoizedDataRoutes=reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:e,state:r}){return useRoutesImpl(t,void 0,r,e)}function Router({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=reactExports.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof r=="string"&&(r=parsePath(r));let{pathname:d="/",search:m="",hash:y="",state:A=null,key:P="default"}=r,Z=reactExports.useMemo(()=>{let me=stripBasename(d,o);return me==null?null:{location:{pathname:me,search:m,hash:y,state:A,key:P},navigationType:n}},[o,d,m,y,A,P,n]);return warning(Z!=null,`<Router basename="${o}"> is not able to match the URL "${d}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),Z==null?null:reactExports.createElement(NavigationContext.Provider,{value:c},reactExports.createElement(LocationContext.Provider,{children:e,value:Z}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return t!=null&&typeof t.tagName=="string"}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,e){let r,n,a,s,o;if(isFormElement(t)){let c=t.getAttribute("action");n=c?stripBasename(c,e):null,r=t.getAttribute("method")||defaultMethod,a=getFormEncType(t.getAttribute("enctype"))||defaultEncType,s=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||c.getAttribute("action");if(n=d?stripBasename(d,e):null,r=t.getAttribute("formmethod")||c.getAttribute("method")||defaultMethod,a=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(c.getAttribute("enctype"))||defaultEncType,s=new FormData(c,t),!isFormDataSubmitterSupported()){let{name:m,type:y,value:A}=t;if(y==="image"){let P=m?`${m}.`:"";s.append(`${P}x`,"0"),s.append(`${P}y`,"0")}else m&&s.append(m,A)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=defaultMethod,n=null,a=defaultEncType,o=t}return s&&a==="text/plain"&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function singleFetchUrl(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&stripBasename(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function loadRouteModule(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let o=await loadRouteModule(s,r);return o.links?o.links():[]}return[]}));return dedupeLinkDescriptors(n.flat(1).filter(isHtmlLinkDescriptor).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function getNewMatchesForLinks(t,e,r,n,a,s){let o=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,c=(d,m)=>r[m].pathname!==d.pathname||r[m].route.path?.endsWith("*")&&r[m].params["*"]!==d.params["*"];return s==="assets"?e.filter((d,m)=>o(d,m)||c(d,m)):s==="data"?e.filter((d,m)=>{let y=n.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(o(d,m)||c(d,m))return!0;if(d.route.shouldRevalidate){let A=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function getModuleLinkHrefs(t,e,{includeHydrateFallback:r}={}){return dedupeHrefs(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function dedupeLinkDescriptors(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(sortKeys(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,e){let r=reactExports.useContext(FrameworkContext),[n,a]=reactExports.useState(!1),[s,o]=reactExports.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:m,onMouseLeave:y,onTouchStart:A}=e,P=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let _e=ve=>{ve.forEach(He=>{o(He.isIntersecting)})},Ge=new IntersectionObserver(_e,{threshold:.5});return P.current&&Ge.observe(P.current),()=>{Ge.disconnect()}}},[t]),reactExports.useEffect(()=>{if(n){let _e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_e)}}},[n]);let Z=()=>{a(!0)},me=()=>{a(!1),o(!1)};return r?t!=="intent"?[s,P,{}]:[s,P,{onFocus:composeEventHandlers(c,Z),onBlur:composeEventHandlers(d,me),onMouseEnter:composeEventHandlers(m,Z),onMouseLeave:composeEventHandlers(y,me),onTouchStart:composeEventHandlers(A,Z)}]:[!1,P,{}]}function composeEventHandlers(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function PrefetchPageLinks({page:t,...e}){let{router:r}=useDataRouterContext2(),n=reactExports.useMemo(()=>matchRoutes(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:n,...e}):null}function useKeyedPrefetchLinks(t){let{manifest:e,routeModules:r}=useFrameworkContext(),[n,a]=reactExports.useState([]);return reactExports.useEffect(()=>{let s=!1;return getKeyedPrefetchLinks(t,e,r).then(o=>{s||a(o)}),()=>{s=!0}},[t,e,r]),n}function PrefetchPageLinksImpl({page:t,matches:e,...r}){let n=useLocation(),{manifest:a,routeModules:s}=useFrameworkContext(),{basename:o}=useDataRouterContext2(),{loaderData:c,matches:d}=useDataRouterStateContext(),m=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,d,a,n,"data"),[t,e,d,a,n]),y=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,d,a,n,"assets"),[t,e,d,a,n]),A=reactExports.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let me=new Set,_e=!1;if(e.forEach(ve=>{let He=a.routes[ve.route.id];!He||!He.hasLoader||(!m.some(De=>De.route.id===ve.route.id)&&ve.route.id in c&&s[ve.route.id]?.shouldRevalidate||He.hasClientLoader?_e=!0:me.add(ve.route.id))}),me.size===0)return[];let Ge=singleFetchUrl(t,o,"data");return _e&&me.size>0&&Ge.searchParams.set("_routes",e.filter(ve=>me.has(ve.route.id)).map(ve=>ve.route.id).join(",")),[Ge.pathname+Ge.search]},[o,c,n,a,m,e,t,s]),P=reactExports.useMemo(()=>getModuleLinkHrefs(y,a),[y,a]),Z=useKeyedPrefetchLinks(y);return reactExports.createElement(reactExports.Fragment,null,A.map(me=>reactExports.createElement("link",{key:me,rel:"prefetch",as:"fetch",href:me,...r})),P.map(me=>reactExports.createElement("link",{key:me,rel:"modulepreload",href:me,...r})),Z.map(({key:me,link:_e})=>reactExports.createElement("link",{key:me,..._e})))}function mergeRefs(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.7.1")}catch{}function createBrowserRouter(t,e){return createRouter({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:createBrowserHistory({window:e?.window}),hydrationData:parseHydrationData(),routes:t,mapRouteProperties,hydrationRouteProperties,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function parseHydrationData(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:deserializeErrors(t.errors)}),t}function deserializeErrors(t){if(!t)return null;let e=Object.entries(t),r={};for(let[n,a]of e)if(a&&a.__type==="RouteErrorResponse")r[n]=new ErrorResponseImpl(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let s=window[a.__subType];if(typeof s=="function")try{let o=new s(a.message);o.stack="",r[n]=o}catch{}}if(r[n]==null){let s=new Error(a.message);s.stack="",r[n]=s}}else r[n]=a;return r}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:o,state:c,target:d,to:m,preventScrollReset:y,viewTransition:A,...P},Z){let{basename:me}=reactExports.useContext(NavigationContext),_e=typeof m=="string"&&ABSOLUTE_URL_REGEX2.test(m),Ge,ve=!1;if(typeof m=="string"&&_e&&(Ge=m,isBrowser))try{let Os=new URL(window.location.href),vh=m.startsWith("//")?new URL(Os.protocol+m):new URL(m),Fc=stripBasename(vh.pathname,me);vh.origin===Os.origin&&Fc!=null?m=Fc+vh.search+vh.hash:ve=!0}catch{warning(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let He=useHref(m,{relative:a}),[De,Xe,Bs]=usePrefetchBehavior(n,P),wt=useLinkClickHandler(m,{replace:o,state:c,target:d,preventScrollReset:y,relative:a,viewTransition:A});function li(Os){e&&e(Os),Os.defaultPrevented||wt(Os)}let An=reactExports.createElement("a",{...P,...Bs,href:Ge||He,onClick:ve||s?e:li,ref:mergeRefs(Z,Xe),target:d,"data-discover":!_e&&r==="render"?"true":void 0});return De&&!_e?reactExports.createElement(reactExports.Fragment,null,An,reactExports.createElement(PrefetchPageLinks,{page:He})):An});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:o,viewTransition:c,children:d,...m},y){let A=useResolvedPath(o,{relative:m.relative}),P=useLocation(),Z=reactExports.useContext(DataRouterStateContext),{navigator:me,basename:_e}=reactExports.useContext(NavigationContext),Ge=Z!=null&&useViewTransitionState(A)&&c===!0,ve=me.encodeLocation?me.encodeLocation(A).pathname:A.pathname,He=P.pathname,De=Z&&Z.navigation&&Z.navigation.location?Z.navigation.location.pathname:null;r||(He=He.toLowerCase(),De=De?De.toLowerCase():null,ve=ve.toLowerCase()),De&&_e&&(De=stripBasename(De,_e)||De);const Xe=ve!=="/"&&ve.endsWith("/")?ve.length-1:ve.length;let Bs=He===ve||!a&&He.startsWith(ve)&&He.charAt(Xe)==="/",wt=De!=null&&(De===ve||!a&&De.startsWith(ve)&&De.charAt(ve.length)==="/"),li={isActive:Bs,isPending:wt,isTransitioning:Ge},An=Bs?e:void 0,Os;typeof n=="function"?Os=n(li):Os=[n,Bs?"active":null,wt?"pending":null,Ge?"transitioning":null].filter(Boolean).join(" ");let vh=typeof s=="function"?s(li):s;return reactExports.createElement(Link,{...m,"aria-current":An,className:Os,ref:y,style:vh,to:o,viewTransition:c},typeof d=="function"?d(li):d)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:o=defaultMethod,action:c,onSubmit:d,relative:m,preventScrollReset:y,viewTransition:A,...P},Z)=>{let me=useSubmit(),_e=useFormAction(c,{relative:m}),Ge=o.toLowerCase()==="get"?"get":"post",ve=typeof c=="string"&&ABSOLUTE_URL_REGEX2.test(c),He=De=>{if(d&&d(De),De.defaultPrevented)return;De.preventDefault();let Xe=De.nativeEvent.submitter,Bs=Xe?.getAttribute("formmethod")||o;me(Xe||De.currentTarget,{fetcherKey:e,method:Bs,navigate:r,replace:a,state:s,relative:m,preventScrollReset:y,viewTransition:A})};return reactExports.createElement("form",{ref:Z,method:Ge,action:_e,onSubmit:n?d:He,...P,"data-discover":!ve&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError2(t)),e}function useLinkClickHandler(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:o}={}){let c=useNavigate(),d=useLocation(),m=useResolvedPath(t,{relative:s});return reactExports.useCallback(y=>{if(shouldProcessLinkClick(y,e)){y.preventDefault();let A=r!==void 0?r:createPath(d)===createPath(m);c(t,{replace:A,state:n,preventScrollReset:a,relative:s,viewTransition:o})}},[d,c,m,r,n,e,t,a,s,o])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),r=useRouteId();return reactExports.useCallback(async(n,a={})=>{let{action:s,method:o,encType:c,formData:d,body:m}=getFormSubmissionInfo(n,e);if(a.navigate===!1){let y=a.fetcherKey||getUniqueFetcherId();await t.fetch(y,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:d,body:m,formMethod:a.method||o,formEncType:a.encType||c,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:d,body:m,formMethod:a.method||o,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function useFormAction(t,{relative:e}={}){let{basename:r}=reactExports.useContext(NavigationContext),n=reactExports.useContext(RouteContext);invariant(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...useResolvedPath(t||".",{relative:e})},o=useLocation();if(t==null){s.search=o.search;let c=new URLSearchParams(s.search),d=c.getAll("index");if(d.some(y=>y==="")){c.delete("index"),d.filter(A=>A).forEach(A=>c.append("index",A));let y=c.toString();s.search=y?`?${y}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:joinPaths([r,s.pathname])),createPath(s)}function useViewTransitionState(t,{relative:e}={}){let r=reactExports.useContext(ViewTransitionContext);invariant(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=useDataRouterContext3("useViewTransitionState"),a=useResolvedPath(t,{relative:e});if(!r.isTransitioning)return!1;let s=stripBasename(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=stripBasename(r.nextLocation.pathname,n)||r.nextLocation.pathname;return matchPath(a.pathname,o)!=null||matchPath(a.pathname,s)!=null}var reactDomExports=requireReactDom();function RouterProvider2(t){return reactExports.createElement(RouterProvider,{flushSync:reactDomExports.flushSync,...t})}const crown="/assets/crown-Cr9dJ75F.png",getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},byteArrayToString=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],o=t[r++],c=t[r++],d=((a&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],o=a+1<t.length,c=o?t[a+1]:0,d=a+2<t.length,m=d?t[a+2]:0,y=s>>2,A=(s&3)<<4|c>>4;let P=(c&15)<<2|m>>6,Z=m&63;d||(Z=64,o||(P=64)),n.push(r[y],r[A],r[P],r[Z])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(stringToByteArray$1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):byteArrayToString(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const m=a<t.length?r[t.charAt(a)]:64;++a;const A=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||c==null||m==null||A==null)throw new DecodeBase64StringError;const P=s<<2|c>>4;if(n.push(P),m!==64){const Z=c<<4&240|m>>2;if(n.push(Z),A!==64){const me=m<<6&192|A;n.push(me)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(t){const e=stringToByteArray$1(t);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(t){return base64Encode(t).replace(/\./g,"")},base64Decode=function(t){try{return base64.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const t=define_process_env_default.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&base64Decode(t[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},getDefaultEmulatorHost=t=>getDefaults()?.emulatorHosts?.[t],getDefaultEmulatorHostnameAndPort=t=>{const e=getDefaultEmulatorHost(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},getDefaultAppConfig=()=>getDefaults()?.config,getExperimentalSetting=t=>getDefaults()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[base64urlEncodeWithoutPadding(JSON.stringify(r)),base64urlEncodeWithoutPadding(JSON.stringify(o)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const t={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?t.emulator.push(e):t.prod.push(e);return t}function getOrCreateEl(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(t,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[t]===e||emulatorStatus[t]||previouslyDismissed)return;emulatorStatus[t]=e;function r(P){return`__firebase__banner__${P}`}const n="__firebase__banner",s=getEmulatorSummary().prod.length>0;function o(){const P=document.getElementById(n);P&&P.remove()}function c(P){P.style.display="flex",P.style.background="#7faaf0",P.style.position="fixed",P.style.bottom="5px",P.style.left="5px",P.style.padding=".5em",P.style.borderRadius="5px",P.style.alignItems="center"}function d(P,Z){P.setAttribute("width","24"),P.setAttribute("id",Z),P.setAttribute("height","24"),P.setAttribute("viewBox","0 0 24 24"),P.setAttribute("fill","none"),P.style.marginLeft="-6px"}function m(){const P=document.createElement("span");return P.style.cursor="pointer",P.style.marginLeft="16px",P.style.fontSize="24px",P.innerHTML=" &times;",P.onclick=()=>{previouslyDismissed=!0,o()},P}function y(P,Z){P.setAttribute("id",Z),P.innerText="Learn more",P.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",P.setAttribute("target","__blank"),P.style.paddingLeft="5px",P.style.textDecoration="underline"}function A(){const P=getOrCreateEl(n),Z=r("text"),me=document.getElementById(Z)||document.createElement("span"),_e=r("learnmore"),Ge=document.getElementById(_e)||document.createElement("a"),ve=r("preprendIcon"),He=document.getElementById(ve)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(P.created){const De=P.element;c(De),y(Ge,_e);const Xe=m();d(He,ve),De.append(He,me,Ge,Xe),document.body.appendChild(De)}s?(me.innerText="Preview backend disconnected.",He.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(He.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,me.innerText="Preview backend running in this workspace."),me.setAttribute("id",Z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){const t=getDefaults()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const t=getUA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],o=s?replaceTemplate(s,n):"Error",c=`${this.serviceName}: ${o} (${a}).`;return new FirebaseError(a,c,n)}}function replaceTemplate(t,e){return t.replace(PATTERN,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function deepEqual(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],o=e[a];if(isObject(s)&&isObject(o)){if(!deepEqual(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function isObject(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function querystringDecode(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function extractQuerystring(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function createSubscribe(t,e){const r=new ObserverProxy(t,e);return r.subscribe.bind(r)}class ObserverProxy{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=noop),a.error===void 0&&(a.error=noop),a.complete===void 0&&(a.complete=noop);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function noop(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(t){return t&&t._delegate?t._delegate:t}class Component{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Deferred;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);n===c&&o.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&e(s,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(t){return t===DEFAULT_ENTRY_NAME$1?void 0:t}function isComponentEager(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Provider(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=ConsoleMethod[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(t,e)=>e.some(r=>t instanceof r);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(wrap(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&cursorRequestMap.set(r,t)}).catch(()=>{}),reverseTransformCache.set(e,t),e}function cacheDonePromiseForTransaction(t){if(transactionDoneMap.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});transactionDoneMap.set(t,e)}let idbProxyTraps={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||transactionStoreNamesMap.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wrap(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps(t){idbProxyTraps=t(idbProxyTraps)}function wrapFunction(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(unwrap(this),e,...r);return transactionStoreNamesMap.set(n,e.sort?e.sort():[e]),wrap(n)}:getCursorAdvanceMethods().includes(t)?function(...e){return t.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(t.apply(unwrap(this),e))}}function transformCachableValue(t){return typeof t=="function"?wrapFunction(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction(t),instanceOfAny(t,getIdbProxyableTypes())?new Proxy(t,idbProxyTraps):t)}function wrap(t){if(t instanceof IDBRequest)return promisifyRequest(t);if(transformCache.has(t))return transformCache.get(t);const e=transformCachableValue(t);return e!==t&&(transformCache.set(t,e),reverseTransformCache.set(e,t)),e}const unwrap=t=>reverseTransformCache.get(t);function openDB(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(t,e),c=wrap(o);return n&&o.addEventListener("upgradeneeded",d=>{n(wrap(o.result),d.oldVersion,d.newVersion,wrap(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{s&&d.addEventListener("close",()=>s()),a&&d.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),c}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=writeMethods.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||readMethods.includes(r)))return;const s=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let m=d.store;return n&&(m=m.index(c.shift())),(await Promise.all([m[r](...c),a&&d.done]))[0]};return cachedMethods.set(e,s),s}replaceTraps(t=>({...t,get:(e,r,n)=>getMethod(e,r)||t.get(e,r,n),has:(e,r)=>!!getMethod(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(isVersionServiceProvider(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function isVersionServiceProvider(t){return t.getComponent()?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$4="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(t,e){try{t.container.addComponent(e)}catch(r){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function _registerComponent(t){const e=t.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,t);for(const r of _apps.values())_addComponent(r,t);for(const r of _serverApps.values())_addComponent(r,t);return!0}function _getProvider(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function _isFirebaseServerApp(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$4;function initializeApp(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw ERROR_FACTORY.create("bad-app-name",{appName:String(a)});if(r||(r=getDefaultAppConfig()),!r)throw ERROR_FACTORY.create("no-options");const s=_apps.get(a);if(s){if(deepEqual(r,s.options)&&deepEqual(n,s.config))return s;throw ERROR_FACTORY.create("duplicate-app",{appName:a})}const o=new ComponentContainer(a);for(const d of _components.values())o.addComponent(d);const c=new FirebaseAppImpl(r,n,o);return _apps.set(a,c),c}function getApp(t=DEFAULT_ENTRY_NAME){const e=_apps.get(t);if(!e&&t===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:t});return e}function registerVersion(t,e,r){let n=PLATFORM_LOG_STRING[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${n}" with version "${e}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(o.join(" "));return}_registerComponent(new Component(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(STORE_NAME)}catch(r){console.warn(r)}}}}).catch(t=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:t.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(t){try{const r=(await getDbPromise()).transaction(STORE_NAME),n=await r.objectStore(STORE_NAME).get(computeKey(t));return await r.done,n}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const r=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e?.message});logger.warn(r.message)}}}async function writeHeartbeatsToIndexedDB(t,e){try{const n=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await n.objectStore(STORE_NAME).put(e,computeKey(t)),await n.done}catch(r){if(r instanceof FirebaseError)logger.warn(r.message);else{const n=ERROR_FACTORY.create("idb-set",{originalErrorMessage:r?.message});logger.warn(n.message)}}}function computeKey(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=getUTCDateString();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(a=>a.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const a=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){logger.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=getUTCDateString(),{heartbeatsToSend:r,unsentEntries:n}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),a=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return logger.warn(e),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(t,e=MAX_HEADER_BYTES){const r=[];let n=t.slice();for(const a of t){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),countBytes(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),countBytes(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await readHeartbeatsFromIndexedDB(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function countBytes(t){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}function getEarliestHeartbeatIdx(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(t){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,t),registerVersion(name$q,version$1$1,"esm2020"),registerVersion("fire-js","")}registerCoreComponents("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=120*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StorageError extends FirebaseError{constructor(e,r,n=0){super(prependCode(e),`Firebase Storage: ${r} (${prependCode(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return prependCode(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(t){return"storage/"+t}function unknown(){const t="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,t)}function objectNotFound(t){return new StorageError(StorageErrorCode.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function quotaExceeded(t){return new StorageError(StorageErrorCode.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function unauthenticated(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new StorageError(StorageErrorCode.UNAUTHENTICATED,t)}function unauthorizedApp(){return new StorageError(StorageErrorCode.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function unauthorized(t){return new StorageError(StorageErrorCode.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(t){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+t+"'.")}function invalidDefaultBucket(t){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function noDefaultBucket(){return new StorageError(StorageErrorCode.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CONFIG_STORAGE_BUCKET_KEY+"' property when initializing the app?")}function noDownloadURL(){return new StorageError(StorageErrorCode.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function invalidArgument(t){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,t)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(t){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function internalError(t){throw new StorageError(StorageErrorCode.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Location{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Location.makeFromUrl(e,r)}catch{return new Location(e,"")}if(n.path==="")return n;throw invalidDefaultBucket(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(Xe){Xe.path.charAt(Xe.path.length-1)==="/"&&(Xe.path_=Xe.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+a+o,"i"),d={bucket:1,path:3};function m(Xe){Xe.path_=decodeURIComponent(Xe.path)}const y="v[A-Za-z0-9_]+",A=r.replace(/[.]/g,"\\."),P="(/([^?#]*).*)?$",Z=new RegExp(`^https?://${A}/${y}/b/${a}/o${P}`,"i"),me={bucket:1,path:3},_e=r===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":r,Ge="([^?#]*)",ve=new RegExp(`^https?://${_e}/${a}/${Ge}`,"i"),De=[{regex:c,indices:d,postModify:s},{regex:Z,indices:me,postModify:m},{regex:ve,indices:{bucket:1,path:2},postModify:m}];for(let Xe=0;Xe<De.length;Xe++){const Bs=De[Xe],wt=Bs.regex.exec(e);if(wt){const li=wt[Bs.indices.bucket];let An=wt[Bs.indices.path];An||(An=""),n=new Location(li,An),Bs.postModify(n);break}}if(n==null)throw invalidUrl(e);return n}}class FailRequest{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start(t,e,r){let n=1,a=null,s=null,o=!1,c=0;function d(){return c===2}let m=!1;function y(...Ge){m||(m=!0,e.apply(null,Ge))}function A(Ge){a=setTimeout(()=>{a=null,t(Z,d())},Ge)}function P(){s&&clearTimeout(s)}function Z(Ge,...ve){if(m){P();return}if(Ge){P(),y.call(null,Ge,...ve);return}if(d()||o){P(),y.call(null,Ge,...ve);return}n<64&&(n*=2);let De;c===1?(c=2,De=0):De=(n+Math.random())*1e3,A(De)}let me=!1;function _e(Ge){me||(me=!0,P(),!m&&(a!==null?(Ge||(c=2),clearTimeout(a),A(0)):Ge||(c=1)))}return A(0),s=setTimeout(()=>{o=!0,_e(!0)},r),_e}function stop(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(t){return t!==void 0}function isNonArrayObject(t){return typeof t=="object"&&!Array.isArray(t)}function isString(t){return typeof t=="string"||t instanceof String}function validateNumber(t,e,r,n){if(n<e)throw invalidArgument(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw invalidArgument(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function makeUrl(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function makeQueryString(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var ErrorCode$1;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ErrorCode$1||(ErrorCode$1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isRetryStatusCode(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NetworkRequest{constructor(e,r,n,a,s,o,c,d,m,y,A,P=!0,Z=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=A,this.retry=P,this.isUsingEmulator=Z,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((me,_e)=>{this.resolve_=me,this.reject_=_e,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new RequestEndStatus(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{const d=c.loaded,m=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,m)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===ErrorCode$1.NO_ERROR,d=s.getStatus();if(!c||isRetryStatusCode(d,this.additionalRetryCodes_)&&this.retry){const y=s.getErrorCode()===ErrorCode$1.ABORT;n(!1,new RequestEndStatus(!1,null,y));return}const m=this.successCodes_.indexOf(d)!==-1;n(!0,new RequestEndStatus(m,s))})},r=(n,a)=>{const s=this.resolve_,o=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());isJustDef(d)?s(d):s()}catch(d){o(d)}else if(c!==null){const d=unknown();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(a.canceled){const d=this.appDelete_?appDeleted():canceled();o(d)}else{const d=retryLimitExceeded();o(d)}};this.canceled_?r(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function addAuthHeader_(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function addVersionHeader_(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function addGmpidHeader_(t,e){e&&(t["X-Firebase-GMPID"]=e)}function addAppCheckHeader_(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function makeRequest(t,e,r,n,a,s,o=!0,c=!1){const d=makeQueryString(t.urlParams),m=t.url+d,y=Object.assign({},t.headers);return addGmpidHeader_(y,e),addAuthHeader_(y,r),addVersionHeader_(y,s),addAppCheckHeader_(y,n),new NetworkRequest(m,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonObjectOrNull(t){let e;try{e=JSON.parse(t)}catch{return null}return isNonArrayObject(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function child(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function lastComponent(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noXform_(t,e){return e}class Mapping{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||noXform_}}let mappings_=null;function xformPath(t){return!isString(t)||t.length<2?t:lastComponent(t)}function getMappings(){if(mappings_)return mappings_;const t=[];t.push(new Mapping("bucket")),t.push(new Mapping("generation")),t.push(new Mapping("metageneration")),t.push(new Mapping("name","fullPath",!0));function e(s,o){return xformPath(o)}const r=new Mapping("name");r.xform=e,t.push(r);function n(s,o){return o!==void 0?Number(o):o}const a=new Mapping("size");return a.xform=n,t.push(a),t.push(new Mapping("timeCreated")),t.push(new Mapping("updated")),t.push(new Mapping("md5Hash",null,!0)),t.push(new Mapping("cacheControl",null,!0)),t.push(new Mapping("contentDisposition",null,!0)),t.push(new Mapping("contentEncoding",null,!0)),t.push(new Mapping("contentLanguage",null,!0)),t.push(new Mapping("contentType",null,!0)),t.push(new Mapping("metadata","customMetadata",!0)),mappings_=t,mappings_}function addRef(t,e){function r(){const n=t.bucket,a=t.fullPath,s=new Location(n,a);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:r})}function fromResource(t,e,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const o=r[s];n[o.local]=o.xform(n,e[o.server])}return addRef(n,t),n}function fromResourceString(t,e,r){const n=jsonObjectOrNull(e);return n===null?null:fromResource(t,n,r)}function downloadUrlFromResourceString(t,e,r,n){const a=jsonObjectOrNull(e);if(a===null||!isString(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(m=>{const y=t.bucket,A=t.fullPath,P="/b/"+o(y)+"/o/"+o(A),Z=makeUrl(P,r,n),me=makeQueryString({alt:"media",token:m});return Z+me})[0]}class RequestInfo{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function handlerCheck(t){if(!t)throw unknown()}function downloadUrlHandler(t,e){function r(n,a){const s=fromResourceString(t,a,e);return handlerCheck(s!==null),downloadUrlFromResourceString(s,a,t.host,t._protocol)}return r}function sharedErrorHandler(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=unauthorizedApp():a=unauthenticated():r.getStatus()===402?a=quotaExceeded(t.bucket):r.getStatus()===403?a=unauthorized(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function objectErrorHandler(t){const e=sharedErrorHandler(t);function r(n,a){let s=e(n,a);return n.getStatus()===404&&(s=objectNotFound(t.path)),s.serverResponse=a.serverResponse,s}return r}function getDownloadUrl(t,e,r){const n=e.fullServerUrl(),a=makeUrl(n,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new RequestInfo(a,s,downloadUrlHandler(t,r),o);return c.errorHandler=objectErrorHandler(e),c}class XhrConnection{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ErrorCode$1.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ErrorCode$1.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ErrorCode$1.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a,s){if(this.sent_)throw internalError("cannot .send() more than once");if(isCloudWorkstation(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw internalError("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw internalError("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XhrTextConnection extends XhrConnection{initXhr(){this.xhr_.responseType="text"}}function newTextConnection(){return new XhrTextConnection}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(e,r){this._service=e,r instanceof Location?this._location=r:this._location=Location.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Reference(e,r)}get root(){const e=new Location(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const e=parent(this._location.path);if(e===null)return null;const r=new Location(this._location.bucket,e);return new Reference(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw invalidRootOperation(e)}}function getDownloadURL$1(t){t._throwIfRoot("getDownloadURL");const e=getDownloadUrl(t.storage,t._location,getMappings());return t.storage.makeRequestWithTokens(e,newTextConnection).then(r=>{if(r===null)throw noDownloadURL();return r})}function _getChild$1(t,e){const r=child(t._location.path,e),n=new Location(t._location.bucket,r);return new Reference(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isUrl(t){return/^[A-Za-z]+:\/\//.test(t)}function refFromURL(t,e){return new Reference(t,e)}function refFromPath(t,e){if(t instanceof FirebaseStorageImpl){const r=t;if(r._bucket==null)throw noDefaultBucket();const n=new Reference(r,r._bucket);return e!=null?refFromPath(n,e):n}else return e!==void 0?_getChild$1(t,e):t}function ref$1(t,e){if(e&&isUrl(e)){if(t instanceof FirebaseStorageImpl)return refFromURL(t,e);throw invalidArgument("To use ref(service, url), the first argument must be a Storage instance.")}else return refFromPath(t,e)}function extractBucket(t,e){const r=e?.[CONFIG_STORAGE_BUCKET_KEY];return r==null?null:Location.makeFromBucketSpec(r,t)}function connectStorageEmulator$1(t,e,r,n={}){t.host=`${e}:${r}`;const a=isCloudWorkstation(e);a&&(pingServer(`https://${t.host}/b`),updateEmulatorBanner("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:createMockUserToken(s,t.app.options.projectId))}class FirebaseStorageImpl{constructor(e,r,n,a,s,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,a!=null?this._bucket=Location.makeFromBucketSpec(a,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,e):this._bucket=extractBucket(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Reference(this,e)}_makeRequest(e,r,n,a,s=!0){if(this._deleted)return new FailRequest(appDeleted());{const o=makeRequest(e,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const name$2="@firebase/storage",version$3="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STORAGE_TYPE="storage";function getDownloadURL(t){return t=getModularInstance(t),getDownloadURL$1(t)}function ref(t,e){return t=getModularInstance(t),ref$1(t,e)}function getStorage(t=getApp(),e){t=getModularInstance(t);const n=_getProvider(t,STORAGE_TYPE).getImmediate({identifier:e}),a=getDefaultEmulatorHostnameAndPort("storage");return a&&connectStorageEmulator(n,...a),n}function connectStorageEmulator(t,e,r,n={}){connectStorageEmulator$1(t,e,r,n)}function factory(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new FirebaseStorageImpl(r,n,a,e,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),registerVersion(name$2,version$3,""),registerVersion(name$2,version$3,"esm2020")}registerStorage();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(li,An){function Os(){}Os.prototype=An.prototype,li.D=An.prototype,li.prototype=new Os,li.prototype.constructor=li,li.C=function(vh,Fc,Hc){for(var qc=Array(arguments.length-2),e1=2;e1<arguments.length;e1++)qc[e1-2]=arguments[e1];return An.prototype[Fc].apply(vh,qc)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(li,An,Os){Os||(Os=0);var vh=Array(16);if(typeof An=="string")for(var Fc=0;16>Fc;++Fc)vh[Fc]=An.charCodeAt(Os++)|An.charCodeAt(Os++)<<8|An.charCodeAt(Os++)<<16|An.charCodeAt(Os++)<<24;else for(Fc=0;16>Fc;++Fc)vh[Fc]=An[Os++]|An[Os++]<<8|An[Os++]<<16|An[Os++]<<24;An=li.g[0],Os=li.g[1],Fc=li.g[2];var Hc=li.g[3],qc=An+(Hc^Os&(Fc^Hc))+vh[0]+3614090360&4294967295;An=Os+(qc<<7&4294967295|qc>>>25),qc=Hc+(Fc^An&(Os^Fc))+vh[1]+3905402710&4294967295,Hc=An+(qc<<12&4294967295|qc>>>20),qc=Fc+(Os^Hc&(An^Os))+vh[2]+606105819&4294967295,Fc=Hc+(qc<<17&4294967295|qc>>>15),qc=Os+(An^Fc&(Hc^An))+vh[3]+3250441966&4294967295,Os=Fc+(qc<<22&4294967295|qc>>>10),qc=An+(Hc^Os&(Fc^Hc))+vh[4]+4118548399&4294967295,An=Os+(qc<<7&4294967295|qc>>>25),qc=Hc+(Fc^An&(Os^Fc))+vh[5]+1200080426&4294967295,Hc=An+(qc<<12&4294967295|qc>>>20),qc=Fc+(Os^Hc&(An^Os))+vh[6]+2821735955&4294967295,Fc=Hc+(qc<<17&4294967295|qc>>>15),qc=Os+(An^Fc&(Hc^An))+vh[7]+4249261313&4294967295,Os=Fc+(qc<<22&4294967295|qc>>>10),qc=An+(Hc^Os&(Fc^Hc))+vh[8]+1770035416&4294967295,An=Os+(qc<<7&4294967295|qc>>>25),qc=Hc+(Fc^An&(Os^Fc))+vh[9]+2336552879&4294967295,Hc=An+(qc<<12&4294967295|qc>>>20),qc=Fc+(Os^Hc&(An^Os))+vh[10]+4294925233&4294967295,Fc=Hc+(qc<<17&4294967295|qc>>>15),qc=Os+(An^Fc&(Hc^An))+vh[11]+2304563134&4294967295,Os=Fc+(qc<<22&4294967295|qc>>>10),qc=An+(Hc^Os&(Fc^Hc))+vh[12]+1804603682&4294967295,An=Os+(qc<<7&4294967295|qc>>>25),qc=Hc+(Fc^An&(Os^Fc))+vh[13]+4254626195&4294967295,Hc=An+(qc<<12&4294967295|qc>>>20),qc=Fc+(Os^Hc&(An^Os))+vh[14]+2792965006&4294967295,Fc=Hc+(qc<<17&4294967295|qc>>>15),qc=Os+(An^Fc&(Hc^An))+vh[15]+1236535329&4294967295,Os=Fc+(qc<<22&4294967295|qc>>>10),qc=An+(Fc^Hc&(Os^Fc))+vh[1]+4129170786&4294967295,An=Os+(qc<<5&4294967295|qc>>>27),qc=Hc+(Os^Fc&(An^Os))+vh[6]+3225465664&4294967295,Hc=An+(qc<<9&4294967295|qc>>>23),qc=Fc+(An^Os&(Hc^An))+vh[11]+643717713&4294967295,Fc=Hc+(qc<<14&4294967295|qc>>>18),qc=Os+(Hc^An&(Fc^Hc))+vh[0]+3921069994&4294967295,Os=Fc+(qc<<20&4294967295|qc>>>12),qc=An+(Fc^Hc&(Os^Fc))+vh[5]+3593408605&4294967295,An=Os+(qc<<5&4294967295|qc>>>27),qc=Hc+(Os^Fc&(An^Os))+vh[10]+38016083&4294967295,Hc=An+(qc<<9&4294967295|qc>>>23),qc=Fc+(An^Os&(Hc^An))+vh[15]+3634488961&4294967295,Fc=Hc+(qc<<14&4294967295|qc>>>18),qc=Os+(Hc^An&(Fc^Hc))+vh[4]+3889429448&4294967295,Os=Fc+(qc<<20&4294967295|qc>>>12),qc=An+(Fc^Hc&(Os^Fc))+vh[9]+568446438&4294967295,An=Os+(qc<<5&4294967295|qc>>>27),qc=Hc+(Os^Fc&(An^Os))+vh[14]+3275163606&4294967295,Hc=An+(qc<<9&4294967295|qc>>>23),qc=Fc+(An^Os&(Hc^An))+vh[3]+4107603335&4294967295,Fc=Hc+(qc<<14&4294967295|qc>>>18),qc=Os+(Hc^An&(Fc^Hc))+vh[8]+1163531501&4294967295,Os=Fc+(qc<<20&4294967295|qc>>>12),qc=An+(Fc^Hc&(Os^Fc))+vh[13]+2850285829&4294967295,An=Os+(qc<<5&4294967295|qc>>>27),qc=Hc+(Os^Fc&(An^Os))+vh[2]+4243563512&4294967295,Hc=An+(qc<<9&4294967295|qc>>>23),qc=Fc+(An^Os&(Hc^An))+vh[7]+1735328473&4294967295,Fc=Hc+(qc<<14&4294967295|qc>>>18),qc=Os+(Hc^An&(Fc^Hc))+vh[12]+2368359562&4294967295,Os=Fc+(qc<<20&4294967295|qc>>>12),qc=An+(Os^Fc^Hc)+vh[5]+4294588738&4294967295,An=Os+(qc<<4&4294967295|qc>>>28),qc=Hc+(An^Os^Fc)+vh[8]+2272392833&4294967295,Hc=An+(qc<<11&4294967295|qc>>>21),qc=Fc+(Hc^An^Os)+vh[11]+1839030562&4294967295,Fc=Hc+(qc<<16&4294967295|qc>>>16),qc=Os+(Fc^Hc^An)+vh[14]+4259657740&4294967295,Os=Fc+(qc<<23&4294967295|qc>>>9),qc=An+(Os^Fc^Hc)+vh[1]+2763975236&4294967295,An=Os+(qc<<4&4294967295|qc>>>28),qc=Hc+(An^Os^Fc)+vh[4]+1272893353&4294967295,Hc=An+(qc<<11&4294967295|qc>>>21),qc=Fc+(Hc^An^Os)+vh[7]+4139469664&4294967295,Fc=Hc+(qc<<16&4294967295|qc>>>16),qc=Os+(Fc^Hc^An)+vh[10]+3200236656&4294967295,Os=Fc+(qc<<23&4294967295|qc>>>9),qc=An+(Os^Fc^Hc)+vh[13]+681279174&4294967295,An=Os+(qc<<4&4294967295|qc>>>28),qc=Hc+(An^Os^Fc)+vh[0]+3936430074&4294967295,Hc=An+(qc<<11&4294967295|qc>>>21),qc=Fc+(Hc^An^Os)+vh[3]+3572445317&4294967295,Fc=Hc+(qc<<16&4294967295|qc>>>16),qc=Os+(Fc^Hc^An)+vh[6]+76029189&4294967295,Os=Fc+(qc<<23&4294967295|qc>>>9),qc=An+(Os^Fc^Hc)+vh[9]+3654602809&4294967295,An=Os+(qc<<4&4294967295|qc>>>28),qc=Hc+(An^Os^Fc)+vh[12]+3873151461&4294967295,Hc=An+(qc<<11&4294967295|qc>>>21),qc=Fc+(Hc^An^Os)+vh[15]+530742520&4294967295,Fc=Hc+(qc<<16&4294967295|qc>>>16),qc=Os+(Fc^Hc^An)+vh[2]+3299628645&4294967295,Os=Fc+(qc<<23&4294967295|qc>>>9),qc=An+(Fc^(Os|~Hc))+vh[0]+4096336452&4294967295,An=Os+(qc<<6&4294967295|qc>>>26),qc=Hc+(Os^(An|~Fc))+vh[7]+1126891415&4294967295,Hc=An+(qc<<10&4294967295|qc>>>22),qc=Fc+(An^(Hc|~Os))+vh[14]+2878612391&4294967295,Fc=Hc+(qc<<15&4294967295|qc>>>17),qc=Os+(Hc^(Fc|~An))+vh[5]+4237533241&4294967295,Os=Fc+(qc<<21&4294967295|qc>>>11),qc=An+(Fc^(Os|~Hc))+vh[12]+1700485571&4294967295,An=Os+(qc<<6&4294967295|qc>>>26),qc=Hc+(Os^(An|~Fc))+vh[3]+2399980690&4294967295,Hc=An+(qc<<10&4294967295|qc>>>22),qc=Fc+(An^(Hc|~Os))+vh[10]+4293915773&4294967295,Fc=Hc+(qc<<15&4294967295|qc>>>17),qc=Os+(Hc^(Fc|~An))+vh[1]+2240044497&4294967295,Os=Fc+(qc<<21&4294967295|qc>>>11),qc=An+(Fc^(Os|~Hc))+vh[8]+1873313359&4294967295,An=Os+(qc<<6&4294967295|qc>>>26),qc=Hc+(Os^(An|~Fc))+vh[15]+4264355552&4294967295,Hc=An+(qc<<10&4294967295|qc>>>22),qc=Fc+(An^(Hc|~Os))+vh[6]+2734768916&4294967295,Fc=Hc+(qc<<15&4294967295|qc>>>17),qc=Os+(Hc^(Fc|~An))+vh[13]+1309151649&4294967295,Os=Fc+(qc<<21&4294967295|qc>>>11),qc=An+(Fc^(Os|~Hc))+vh[4]+4149444226&4294967295,An=Os+(qc<<6&4294967295|qc>>>26),qc=Hc+(Os^(An|~Fc))+vh[11]+3174756917&4294967295,Hc=An+(qc<<10&4294967295|qc>>>22),qc=Fc+(An^(Hc|~Os))+vh[2]+718787259&4294967295,Fc=Hc+(qc<<15&4294967295|qc>>>17),qc=Os+(Hc^(Fc|~An))+vh[9]+3951481745&4294967295,li.g[0]=li.g[0]+An&4294967295,li.g[1]=li.g[1]+(Fc+(qc<<21&4294967295|qc>>>11))&4294967295,li.g[2]=li.g[2]+Fc&4294967295,li.g[3]=li.g[3]+Hc&4294967295}n.prototype.u=function(li,An){An===void 0&&(An=li.length);for(var Os=An-this.blockSize,vh=this.B,Fc=this.h,Hc=0;Hc<An;){if(Fc==0)for(;Hc<=Os;)a(this,li,Hc),Hc+=this.blockSize;if(typeof li=="string"){for(;Hc<An;)if(vh[Fc++]=li.charCodeAt(Hc++),Fc==this.blockSize){a(this,vh),Fc=0;break}}else for(;Hc<An;)if(vh[Fc++]=li[Hc++],Fc==this.blockSize){a(this,vh),Fc=0;break}}this.h=Fc,this.o+=An},n.prototype.v=function(){var li=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);li[0]=128;for(var An=1;An<li.length-8;++An)li[An]=0;var Os=8*this.o;for(An=li.length-8;An<li.length;++An)li[An]=Os&255,Os/=256;for(this.u(li),li=Array(16),An=Os=0;4>An;++An)for(var vh=0;32>vh;vh+=8)li[Os++]=this.g[An]>>>vh&255;return li};function s(li,An){var Os=c;return Object.prototype.hasOwnProperty.call(Os,li)?Os[li]:Os[li]=An(li)}function o(li,An){this.h=An;for(var Os=[],vh=!0,Fc=li.length-1;0<=Fc;Fc--){var Hc=li[Fc]|0;vh&&Hc==An||(Os[Fc]=Hc,vh=!1)}this.g=Os}var c={};function d(li){return-128<=li&&128>li?s(li,function(An){return new o([An|0],0>An?-1:0)}):new o([li|0],0>li?-1:0)}function m(li){if(isNaN(li)||!isFinite(li))return A;if(0>li)return Ge(m(-li));for(var An=[],Os=1,vh=0;li>=Os;vh++)An[vh]=li/Os|0,Os*=4294967296;return new o(An,0)}function y(li,An){if(li.length==0)throw Error("number format error: empty string");if(An=An||10,2>An||36<An)throw Error("radix out of range: "+An);if(li.charAt(0)=="-")return Ge(y(li.substring(1),An));if(0<=li.indexOf("-"))throw Error('number format error: interior "-" character');for(var Os=m(Math.pow(An,8)),vh=A,Fc=0;Fc<li.length;Fc+=8){var Hc=Math.min(8,li.length-Fc),qc=parseInt(li.substring(Fc,Fc+Hc),An);8>Hc?(Hc=m(Math.pow(An,Hc)),vh=vh.j(Hc).add(m(qc))):(vh=vh.j(Os),vh=vh.add(m(qc)))}return vh}var A=d(0),P=d(1),Z=d(16777216);t=o.prototype,t.m=function(){if(_e(this))return-Ge(this).m();for(var li=0,An=1,Os=0;Os<this.g.length;Os++){var vh=this.i(Os);li+=(0<=vh?vh:4294967296+vh)*An,An*=4294967296}return li},t.toString=function(li){if(li=li||10,2>li||36<li)throw Error("radix out of range: "+li);if(me(this))return"0";if(_e(this))return"-"+Ge(this).toString(li);for(var An=m(Math.pow(li,6)),Os=this,vh="";;){var Fc=Xe(Os,An).g;Os=ve(Os,Fc.j(An));var Hc=((0<Os.g.length?Os.g[0]:Os.h)>>>0).toString(li);if(Os=Fc,me(Os))return Hc+vh;for(;6>Hc.length;)Hc="0"+Hc;vh=Hc+vh}},t.i=function(li){return 0>li?0:li<this.g.length?this.g[li]:this.h};function me(li){if(li.h!=0)return!1;for(var An=0;An<li.g.length;An++)if(li.g[An]!=0)return!1;return!0}function _e(li){return li.h==-1}t.l=function(li){return li=ve(this,li),_e(li)?-1:me(li)?0:1};function Ge(li){for(var An=li.g.length,Os=[],vh=0;vh<An;vh++)Os[vh]=~li.g[vh];return new o(Os,~li.h).add(P)}t.abs=function(){return _e(this)?Ge(this):this},t.add=function(li){for(var An=Math.max(this.g.length,li.g.length),Os=[],vh=0,Fc=0;Fc<=An;Fc++){var Hc=vh+(this.i(Fc)&65535)+(li.i(Fc)&65535),qc=(Hc>>>16)+(this.i(Fc)>>>16)+(li.i(Fc)>>>16);vh=qc>>>16,Hc&=65535,qc&=65535,Os[Fc]=qc<<16|Hc}return new o(Os,Os[Os.length-1]&-2147483648?-1:0)};function ve(li,An){return li.add(Ge(An))}t.j=function(li){if(me(this)||me(li))return A;if(_e(this))return _e(li)?Ge(this).j(Ge(li)):Ge(Ge(this).j(li));if(_e(li))return Ge(this.j(Ge(li)));if(0>this.l(Z)&&0>li.l(Z))return m(this.m()*li.m());for(var An=this.g.length+li.g.length,Os=[],vh=0;vh<2*An;vh++)Os[vh]=0;for(vh=0;vh<this.g.length;vh++)for(var Fc=0;Fc<li.g.length;Fc++){var Hc=this.i(vh)>>>16,qc=this.i(vh)&65535,e1=li.i(Fc)>>>16,df=li.i(Fc)&65535;Os[2*vh+2*Fc]+=qc*df,He(Os,2*vh+2*Fc),Os[2*vh+2*Fc+1]+=Hc*df,He(Os,2*vh+2*Fc+1),Os[2*vh+2*Fc+1]+=qc*e1,He(Os,2*vh+2*Fc+1),Os[2*vh+2*Fc+2]+=Hc*e1,He(Os,2*vh+2*Fc+2)}for(vh=0;vh<An;vh++)Os[vh]=Os[2*vh+1]<<16|Os[2*vh];for(vh=An;vh<2*An;vh++)Os[vh]=0;return new o(Os,0)};function He(li,An){for(;(li[An]&65535)!=li[An];)li[An+1]+=li[An]>>>16,li[An]&=65535,An++}function De(li,An){this.g=li,this.h=An}function Xe(li,An){if(me(An))throw Error("division by zero");if(me(li))return new De(A,A);if(_e(li))return An=Xe(Ge(li),An),new De(Ge(An.g),Ge(An.h));if(_e(An))return An=Xe(li,Ge(An)),new De(Ge(An.g),An.h);if(30<li.g.length){if(_e(li)||_e(An))throw Error("slowDivide_ only works with positive integers.");for(var Os=P,vh=An;0>=vh.l(li);)Os=Bs(Os),vh=Bs(vh);var Fc=wt(Os,1),Hc=wt(vh,1);for(vh=wt(vh,2),Os=wt(Os,2);!me(vh);){var qc=Hc.add(vh);0>=qc.l(li)&&(Fc=Fc.add(Os),Hc=qc),vh=wt(vh,1),Os=wt(Os,1)}return An=ve(li,Fc.j(An)),new De(Fc,An)}for(Fc=A;0<=li.l(An);){for(Os=Math.max(1,Math.floor(li.m()/An.m())),vh=Math.ceil(Math.log(Os)/Math.LN2),vh=48>=vh?1:Math.pow(2,vh-48),Hc=m(Os),qc=Hc.j(An);_e(qc)||0<qc.l(li);)Os-=vh,Hc=m(Os),qc=Hc.j(An);me(Hc)&&(Hc=P),Fc=Fc.add(Hc),li=ve(li,qc)}return new De(Fc,li)}t.A=function(li){return Xe(this,li).h},t.and=function(li){for(var An=Math.max(this.g.length,li.g.length),Os=[],vh=0;vh<An;vh++)Os[vh]=this.i(vh)&li.i(vh);return new o(Os,this.h&li.h)},t.or=function(li){for(var An=Math.max(this.g.length,li.g.length),Os=[],vh=0;vh<An;vh++)Os[vh]=this.i(vh)|li.i(vh);return new o(Os,this.h|li.h)},t.xor=function(li){for(var An=Math.max(this.g.length,li.g.length),Os=[],vh=0;vh<An;vh++)Os[vh]=this.i(vh)^li.i(vh);return new o(Os,this.h^li.h)};function Bs(li){for(var An=li.g.length+1,Os=[],vh=0;vh<An;vh++)Os[vh]=li.i(vh)<<1|li.i(vh-1)>>>31;return new o(Os,li.h)}function wt(li,An){var Os=An>>5;An%=32;for(var vh=li.g.length-Os,Fc=[],Hc=0;Hc<vh;Hc++)Fc[Hc]=0<An?li.i(Hc+Os)>>>An|li.i(Hc+Os+1)<<32-An:li.i(Hc+Os);return new o(Fc,li.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Md5=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=m,o.fromString=y,Integer=o}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(W,sr,To){return W==Array.prototype||W==Object.prototype||(W[sr]=To.value),W};function r(W){W=[typeof globalThis=="object"&&globalThis,W,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var sr=0;sr<W.length;++sr){var To=W[sr];if(To&&To.Math==Math)return To}throw Error("Cannot find global object")}var n=r(this);function a(W,sr){if(sr)e:{var To=n;W=W.split(".");for(var _h=0;_h<W.length-1;_h++){var ff=W[_h];if(!(ff in To))break e;To=To[ff]}W=W[W.length-1],_h=To[W],sr=sr(_h),sr!=_h&&sr!=null&&e(To,W,{configurable:!0,writable:!0,value:sr})}}function s(W,sr){W instanceof String&&(W+="");var To=0,_h=!1,ff={next:function(){if(!_h&&To<W.length){var n1=To++;return{value:sr(n1,W[n1]),done:!1}}return _h=!0,{done:!0,value:void 0}}};return ff[Symbol.iterator]=function(){return ff},ff}a("Array.prototype.values",function(W){return W||function(){return s(this,function(sr,To){return To})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(W){var sr=typeof W;return sr=sr!="object"?sr:W?Array.isArray(W)?"array":sr:"null",sr=="array"||sr=="object"&&typeof W.length=="number"}function m(W){var sr=typeof W;return sr=="object"&&W!=null||sr=="function"}function y(W,sr,To){return W.call.apply(W.bind,arguments)}function A(W,sr,To){if(!W)throw Error();if(2<arguments.length){var _h=Array.prototype.slice.call(arguments,2);return function(){var ff=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ff,_h),W.apply(sr,ff)}}return function(){return W.apply(sr,arguments)}}function P(W,sr,To){return P=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:A,P.apply(null,arguments)}function Z(W,sr){var To=Array.prototype.slice.call(arguments,1);return function(){var _h=To.slice();return _h.push.apply(_h,arguments),W.apply(this,_h)}}function me(W,sr){function To(){}To.prototype=sr.prototype,W.aa=sr.prototype,W.prototype=new To,W.prototype.constructor=W,W.Qb=function(_h,ff,n1){for(var d1=Array(arguments.length-2),z1=2;z1<arguments.length;z1++)d1[z1-2]=arguments[z1];return sr.prototype[ff].apply(_h,d1)}}function _e(W){const sr=W.length;if(0<sr){const To=Array(sr);for(let _h=0;_h<sr;_h++)To[_h]=W[_h];return To}return[]}function Ge(W,sr){for(let To=1;To<arguments.length;To++){const _h=arguments[To];if(d(_h)){const ff=W.length||0,n1=_h.length||0;W.length=ff+n1;for(let d1=0;d1<n1;d1++)W[ff+d1]=_h[d1]}else W.push(_h)}}class ve{constructor(sr,To){this.i=sr,this.j=To,this.h=0,this.g=null}get(){let sr;return 0<this.h?(this.h--,sr=this.g,this.g=sr.next,sr.next=null):sr=this.i(),sr}}function He(W){return/^[\s\xa0]*$/.test(W)}function De(){var W=c.navigator;return W&&(W=W.userAgent)?W:""}function Xe(W){return Xe[" "](W),W}Xe[" "]=function(){};var Bs=De().indexOf("Gecko")!=-1&&!(De().toLowerCase().indexOf("webkit")!=-1&&De().indexOf("Edge")==-1)&&!(De().indexOf("Trident")!=-1||De().indexOf("MSIE")!=-1)&&De().indexOf("Edge")==-1;function wt(W,sr,To){for(const _h in W)sr.call(To,W[_h],_h,W)}function li(W,sr){for(const To in W)sr.call(void 0,W[To],To,W)}function An(W){const sr={};for(const To in W)sr[To]=W[To];return sr}const Os="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vh(W,sr){let To,_h;for(let ff=1;ff<arguments.length;ff++){_h=arguments[ff];for(To in _h)W[To]=_h[To];for(let n1=0;n1<Os.length;n1++)To=Os[n1],Object.prototype.hasOwnProperty.call(_h,To)&&(W[To]=_h[To])}}function Fc(W){var sr=1;W=W.split(":");const To=[];for(;0<sr&&W.length;)To.push(W.shift()),sr--;return W.length&&To.push(W.join(":")),To}function Hc(W){c.setTimeout(()=>{throw W},0)}function qc(){var W=Ko;let sr=null;return W.g&&(sr=W.g,W.g=W.g.next,W.g||(W.h=null),sr.next=null),sr}class e1{constructor(){this.h=this.g=null}add(sr,To){const _h=df.get();_h.set(sr,To),this.h?this.h.next=_h:this.g=_h,this.h=_h}}var df=new ve(()=>new So,W=>W.reset());class So{constructor(){this.next=this.g=this.h=null}set(sr,To){this.h=sr,this.g=To,this.next=null}reset(){this.next=this.g=this.h=null}}let th,Rs=!1,Ko=new e1,Vc=()=>{const W=c.Promise.resolve(void 0);th=()=>{W.then(yh)}};var yh=()=>{for(var W;W=qc();){try{W.h.call(W.g)}catch(To){Hc(To)}var sr=df;sr.j(W),100>sr.h&&(sr.h++,W.next=sr.g,sr.g=W)}Rs=!1};function wh(){this.s=this.s,this.C=this.C}wh.prototype.s=!1,wh.prototype.ma=function(){this.s||(this.s=!0,this.N())},wh.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function uf(W,sr){this.type=W,this.g=this.target=sr,this.defaultPrevented=!1}uf.prototype.h=function(){this.defaultPrevented=!0};var i1=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var W=!1,sr=Object.defineProperty({},"passive",{get:function(){W=!0}});try{const To=()=>{};c.addEventListener("test",To,sr),c.removeEventListener("test",To,sr)}catch{}return W}();function u1(W,sr){if(uf.call(this,W?W.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,W){var To=this.type=W.type,_h=W.changedTouches&&W.changedTouches.length?W.changedTouches[0]:null;if(this.target=W.target||W.srcElement,this.g=sr,sr=W.relatedTarget){if(Bs){e:{try{Xe(sr.nodeName);var ff=!0;break e}catch{}ff=!1}ff||(sr=null)}}else To=="mouseover"?sr=W.fromElement:To=="mouseout"&&(sr=W.toElement);this.relatedTarget=sr,_h?(this.clientX=_h.clientX!==void 0?_h.clientX:_h.pageX,this.clientY=_h.clientY!==void 0?_h.clientY:_h.pageY,this.screenX=_h.screenX||0,this.screenY=_h.screenY||0):(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0),this.button=W.button,this.key=W.key||"",this.ctrlKey=W.ctrlKey,this.altKey=W.altKey,this.shiftKey=W.shiftKey,this.metaKey=W.metaKey,this.pointerId=W.pointerId||0,this.pointerType=typeof W.pointerType=="string"?W.pointerType:h1[W.pointerType]||"",this.state=W.state,this.i=W,W.defaultPrevented&&u1.aa.h.call(this)}}me(u1,uf);var h1={2:"touch",3:"pen",4:"mouse"};u1.prototype.h=function(){u1.aa.h.call(this);var W=this.i;W.preventDefault?W.preventDefault():W.returnValue=!1};var T1="closure_listenable_"+(1e6*Math.random()|0),p1=0;function j1(W,sr,To,_h,ff){this.listener=W,this.proxy=null,this.src=sr,this.type=To,this.capture=!!_h,this.ha=ff,this.key=++p1,this.da=this.fa=!1}function C1(W){W.da=!0,W.listener=null,W.proxy=null,W.src=null,W.ha=null}function k1(W){this.src=W,this.g={},this.h=0}k1.prototype.add=function(W,sr,To,_h,ff){var n1=W.toString();W=this.g[n1],W||(W=this.g[n1]=[],this.h++);var d1=D1(W,sr,_h,ff);return-1<d1?(sr=W[d1],To||(sr.fa=!1)):(sr=new j1(sr,this.src,n1,!!_h,ff),sr.fa=To,W.push(sr)),sr};function X1(W,sr){var To=sr.type;if(To in W.g){var _h=W.g[To],ff=Array.prototype.indexOf.call(_h,sr,void 0),n1;(n1=0<=ff)&&Array.prototype.splice.call(_h,ff,1),n1&&(C1(sr),W.g[To].length==0&&(delete W.g[To],W.h--))}}function D1(W,sr,To,_h){for(var ff=0;ff<W.length;++ff){var n1=W[ff];if(!n1.da&&n1.listener==sr&&n1.capture==!!To&&n1.ha==_h)return ff}return-1}var m1="closure_lm_"+(1e6*Math.random()|0),xy={};function Py(W,sr,To,_h,ff){if(Array.isArray(sr)){for(var n1=0;n1<sr.length;n1++)Py(W,sr[n1],To,_h,ff);return null}return To=Oy(To),W&&W[T1]?W.K(sr,To,m(_h)?!!_h.capture:!1,ff):Q1(W,sr,To,!1,_h,ff)}function Q1(W,sr,To,_h,ff,n1){if(!sr)throw Error("Invalid event type");var d1=m(ff)?!!ff.capture:!!ff,z1=yy(W);if(z1||(W[m1]=z1=new k1(W)),To=z1.add(sr,To,_h,d1,n1),To.proxy)return To;if(_h=gy(),To.proxy=_h,_h.src=W,_h.listener=To,W.addEventListener)i1||(ff=d1),ff===void 0&&(ff=!1),W.addEventListener(sr.toString(),_h,ff);else if(W.attachEvent)W.attachEvent(uy(sr.toString()),_h);else if(W.addListener&&W.removeListener)W.addListener(_h);else throw Error("addEventListener and attachEvent are unavailable.");return To}function gy(){function W(To){return sr.call(W.src,W.listener,To)}const sr=Sy;return W}function my(W,sr,To,_h,ff){if(Array.isArray(sr))for(var n1=0;n1<sr.length;n1++)my(W,sr[n1],To,_h,ff);else _h=m(_h)?!!_h.capture:!!_h,To=Oy(To),W&&W[T1]?(W=W.i,sr=String(sr).toString(),sr in W.g&&(n1=W.g[sr],To=D1(n1,To,_h,ff),-1<To&&(C1(n1[To]),Array.prototype.splice.call(n1,To,1),n1.length==0&&(delete W.g[sr],W.h--)))):W&&(W=yy(W))&&(sr=W.g[sr.toString()],W=-1,sr&&(W=D1(sr,To,_h,ff)),(To=-1<W?sr[W]:null)&&Iy(To))}function Iy(W){if(typeof W!="number"&&W&&!W.da){var sr=W.src;if(sr&&sr[T1])X1(sr.i,W);else{var To=W.type,_h=W.proxy;sr.removeEventListener?sr.removeEventListener(To,_h,W.capture):sr.detachEvent?sr.detachEvent(uy(To),_h):sr.addListener&&sr.removeListener&&sr.removeListener(_h),(To=yy(sr))?(X1(To,W),To.h==0&&(To.src=null,sr[m1]=null)):C1(W)}}}function uy(W){return W in xy?xy[W]:xy[W]="on"+W}function Sy(W,sr){if(W.da)W=!0;else{sr=new u1(sr,this);var To=W.listener,_h=W.ha||W.src;W.fa&&Iy(W),W=To.call(_h,sr)}return W}function yy(W){return W=W[m1],W instanceof k1?W:null}var Ey="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oy(W){return typeof W=="function"?W:(W[Ey]||(W[Ey]=function(sr){return W.handleEvent(sr)}),W[Ey])}function L1(){wh.call(this),this.i=new k1(this),this.M=this,this.F=null}me(L1,wh),L1.prototype[T1]=!0,L1.prototype.removeEventListener=function(W,sr,To,_h){my(this,W,sr,To,_h)};function R1(W,sr){var To,_h=W.F;if(_h)for(To=[];_h;_h=_h.F)To.push(_h);if(W=W.M,_h=sr.type||sr,typeof sr=="string")sr=new uf(sr,W);else if(sr instanceof uf)sr.target=sr.target||W;else{var ff=sr;sr=new uf(_h,W),vh(sr,ff)}if(ff=!0,To)for(var n1=To.length-1;0<=n1;n1--){var d1=sr.g=To[n1];ff=vy(d1,_h,!0,sr)&&ff}if(d1=sr.g=W,ff=vy(d1,_h,!0,sr)&&ff,ff=vy(d1,_h,!1,sr)&&ff,To)for(n1=0;n1<To.length;n1++)d1=sr.g=To[n1],ff=vy(d1,_h,!1,sr)&&ff}L1.prototype.N=function(){if(L1.aa.N.call(this),this.i){var W=this.i,sr;for(sr in W.g){for(var To=W.g[sr],_h=0;_h<To.length;_h++)C1(To[_h]);delete W.g[sr],W.h--}}this.F=null},L1.prototype.K=function(W,sr,To,_h){return this.i.add(String(W),sr,!1,To,_h)},L1.prototype.L=function(W,sr,To,_h){return this.i.add(String(W),sr,!0,To,_h)};function vy(W,sr,To,_h){if(sr=W.i.g[String(sr)],!sr)return!0;sr=sr.concat();for(var ff=!0,n1=0;n1<sr.length;++n1){var d1=sr[n1];if(d1&&!d1.da&&d1.capture==To){var z1=d1.listener,Cy=d1.ha||d1.src;d1.fa&&X1(W.i,d1),ff=z1.call(Cy,_h)!==!1&&ff}}return ff&&!_h.defaultPrevented}function ly(W,sr,To){if(typeof W=="function")To&&(W=P(W,To));else if(W&&typeof W.handleEvent=="function")W=P(W.handleEvent,W);else throw Error("Invalid listener argument");return 2147483647<Number(sr)?-1:c.setTimeout(W,sr||0)}function Rv(W){W.g=ly(()=>{W.g=null,W.i&&(W.i=!1,Rv(W))},W.l);const sr=W.h;W.h=null,W.m.apply(null,sr)}class fv extends wh{constructor(sr,To){super(),this.m=sr,this.l=To,this.h=null,this.i=!1,this.g=null}j(sr){this.h=arguments,this.g?this.i=!0:Rv(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fv(W){wh.call(this),this.h=W,this.g={}}me(Fv,wh);var Nv=[];function Ov(W){wt(W.g,function(sr,To){this.g.hasOwnProperty(To)&&Iy(sr)},W),W.g={}}Fv.prototype.N=function(){Fv.aa.N.call(this),Ov(this)},Fv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var iv=c.JSON.stringify,e4=c.JSON.parse,pv=class{stringify(W){return c.JSON.stringify(W,void 0)}parse(W){return c.JSON.parse(W,void 0)}};function A4(){}A4.prototype.h=null;function t4(W){return W.h||(W.h=W.i())}function t2(){}var gv={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pv(){uf.call(this,"d")}me(Pv,uf);function T4(){uf.call(this,"c")}me(T4,uf);var Hy={},zv=null;function $v(){return zv=zv||new L1}Hy.La="serverreachability";function C4(W){uf.call(this,Hy.La,W)}me(C4,uf);function Ym(W){const sr=$v();R1(sr,new C4(sr))}Hy.STAT_EVENT="statevent";function mf(W,sr){uf.call(this,Hy.STAT_EVENT,W),this.stat=sr}me(mf,uf);function Qp(W){const sr=$v();R1(sr,new mf(sr,W))}Hy.Ma="timingevent";function l1(W,sr){uf.call(this,Hy.Ma,W),this.size=sr}me(l1,uf);function c1(W,sr){if(typeof W!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){W()},sr)}function f1(){this.g=!0}f1.prototype.xa=function(){this.g=!1};function x1(W,sr,To,_h,ff,n1){W.info(function(){if(W.g)if(n1)for(var d1="",z1=n1.split("&"),Cy=0;Cy<z1.length;Cy++){var $1=z1[Cy].split("=");if(1<$1.length){var Vy=$1[0];$1=$1[1];var ky=Vy.split("_");d1=2<=ky.length&&ky[1]=="type"?d1+(Vy+"="+$1+"&"):d1+(Vy+"=redacted&")}}else d1=null;else d1=n1;return"XMLHTTP REQ ("+_h+") [attempt "+ff+"]: "+sr+`
`+To+`
`+d1})}function y1(W,sr,To,_h,ff,n1,d1){W.info(function(){return"XMLHTTP RESP ("+_h+") [ attempt "+ff+"]: "+sr+`
`+To+`
`+n1+" "+d1})}function v1(W,sr,To,_h){W.info(function(){return"XMLHTTP TEXT ("+sr+"): "+b1(W,To)+(_h?" "+_h:"")})}function E1(W,sr){W.info(function(){return"TIMEOUT: "+sr})}f1.prototype.info=function(){};function b1(W,sr){if(!W.g)return sr;if(!sr)return null;try{var To=JSON.parse(sr);if(To){for(W=0;W<To.length;W++)if(Array.isArray(To[W])){var _h=To[W];if(!(2>_h.length)){var ff=_h[1];if(Array.isArray(ff)&&!(1>ff.length)){var n1=ff[0];if(n1!="noop"&&n1!="stop"&&n1!="close")for(var d1=1;d1<ff.length;d1++)ff[d1]=""}}}}return iv(To)}catch{return sr}}var _1={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},V1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},U1;function ny(){}me(ny,A4),ny.prototype.g=function(){return new XMLHttpRequest},ny.prototype.i=function(){return{}},U1=new ny;function H1(W,sr,To,_h){this.j=W,this.i=sr,this.l=To,this.R=_h||1,this.U=new Fv(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new I1}function I1(){this.i=null,this.g="",this.h=!1}var G1={},Zy={};function zy(W,sr,To){W.L=1,W.v=n2(sv(sr)),W.m=To,W.P=!0,Dy(W,null)}function Dy(W,sr){W.F=Date.now(),nv(W),W.A=sv(W.v);var To=W.A,_h=W.R;Array.isArray(_h)||(_h=[String(_h)]),t3(To.i,"t",_h),W.C=0,To=W.j.J,W.h=new I1,W.g=o_(W.j,To?sr:null,!W.m),0<W.O&&(W.M=new fv(P(W.Y,W,W.g),W.O)),sr=W.U,To=W.g,_h=W.ca;var ff="readystatechange";Array.isArray(ff)||(ff&&(Nv[0]=ff.toString()),ff=Nv);for(var n1=0;n1<ff.length;n1++){var d1=Py(To,ff[n1],_h||sr.handleEvent,!1,sr.h||sr);if(!d1)break;sr.g[d1.key]=d1}sr=W.H?An(W.H):{},W.m?(W.u||(W.u="POST"),sr["Content-Type"]="application/x-www-form-urlencoded",W.g.ea(W.A,W.u,W.m,sr)):(W.u="GET",W.g.ea(W.A,W.u,null,sr)),Ym(),x1(W.i,W.u,W.A,W.l,W.R,W.m)}H1.prototype.ca=function(W){W=W.target;const sr=this.M;sr&&xv(W)==3?sr.j():this.Y(W)},H1.prototype.Y=function(W){try{if(W==this.g)e:{const ky=xv(this.g);var sr=this.g.Ba();const u4=this.g.Z();if(!(3>ky)&&(ky!=3||this.g&&(this.h.h||this.g.oa()||Z3(this.g)))){this.J||ky!=4||sr==7||(sr==8||0>=u4?Ym(3):Ym(2)),av(this);var To=this.g.Z();this.X=To;t:if(Gy(this)){var _h=Z3(this.g);W="";var ff=_h.length,n1=xv(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){P1(this),Wy(this);var d1="";break t}this.h.i=new c.TextDecoder}for(sr=0;sr<ff;sr++)this.h.h=!0,W+=this.h.i.decode(_h[sr],{stream:!(n1&&sr==ff-1)});_h.length=0,this.h.g+=W,this.C=0,d1=this.h.g}else d1=this.g.oa();if(this.o=To==200,y1(this.i,this.u,this.A,this.l,this.R,ky,To),this.o){if(this.T&&!this.K){t:{if(this.g){var z1,Cy=this.g;if((z1=Cy.g?Cy.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!He(z1)){var $1=z1;break t}}$1=null}if(To=$1)v1(this.i,this.l,To,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cy(this,To);else{this.o=!1,this.s=3,Qp(12),P1(this),Wy(this);break e}}if(this.P){To=!0;let $y;for(;!this.J&&this.C<d1.length;)if($y=k4(this,d1),$y==Zy){ky==4&&(this.s=4,Qp(14),To=!1),v1(this.i,this.l,null,"[Incomplete Response]");break}else if($y==G1){this.s=4,Qp(15),v1(this.i,this.l,d1,"[Invalid Chunk]"),To=!1;break}else v1(this.i,this.l,$y,null),cy(this,$y);if(Gy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ky!=4||d1.length!=0||this.h.h||(this.s=1,Qp(16),To=!1),this.o=this.o&&To,!To)v1(this.i,this.l,d1,"[Invalid Chunked Response]"),P1(this),Wy(this);else if(0<d1.length&&!this.W){this.W=!0;var Vy=this.j;Vy.g==this&&Vy.ba&&!Vy.M&&(Vy.j.info("Great, no buffering proxy detected. Bytes received: "+d1.length),d2(Vy),Vy.M=!0,Qp(11))}}else v1(this.i,this.l,d1,null),cy(this,d1);ky==4&&P1(this),this.o&&!this.J&&(ky==4?n_(this.j,this):(this.o=!1,nv(this)))}else g6(this.g),To==400&&0<d1.indexOf("Unknown SID")?(this.s=3,Qp(12)):(this.s=0,Qp(13)),P1(this),Wy(this)}}}catch{}finally{}};function Gy(W){return W.g?W.u=="GET"&&W.L!=2&&W.j.Ca:!1}function k4(W,sr){var To=W.C,_h=sr.indexOf(`
`,To);return _h==-1?Zy:(To=Number(sr.substring(To,_h)),isNaN(To)?G1:(_h+=1,_h+To>sr.length?Zy:(sr=sr.slice(_h,_h+To),W.C=_h+To,sr)))}H1.prototype.cancel=function(){this.J=!0,P1(this)};function nv(W){W.S=Date.now()+W.I,yv(W,W.I)}function yv(W,sr){if(W.B!=null)throw Error("WatchDog timer not null");W.B=c1(P(W.ba,W),sr)}function av(W){W.B&&(c.clearTimeout(W.B),W.B=null)}H1.prototype.ba=function(){this.B=null;const W=Date.now();0<=W-this.S?(E1(this.i,this.A),this.L!=2&&(Ym(),Qp(17)),P1(this),this.s=2,Wy(this)):yv(this,this.S-W)};function Wy(W){W.j.G==0||W.J||n_(W.j,W)}function P1(W){av(W);var sr=W.M;sr&&typeof sr.ma=="function"&&sr.ma(),W.M=null,Ov(W.U),W.g&&(sr=W.g,W.g=null,sr.abort(),sr.ma())}function cy(W,sr){try{var To=W.j;if(To.G!=0&&(To.g==W||M4(To.h,W))){if(!W.K&&M4(To.h,W)&&To.G==3){try{var _h=To.Da.g.parse(sr)}catch{_h=null}if(Array.isArray(_h)&&_h.length==3){var ff=_h;if(ff[0]==0){e:if(!To.u){if(To.g)if(To.g.F+3e3<W.F)B2(To),L2(To);else break e;s3(To),Qp(18)}}else To.za=ff[1],0<To.za-To.T&&37500>ff[2]&&To.F&&To.v==0&&!To.C&&(To.C=c1(P(To.Za,To),6e3));if(1>=Iv(To.h)&&To.ca){try{To.ca()}catch{}To.ca=void 0}}else l4(To,11)}else if((W.K||To.g==W)&&B2(To),!He(sr))for(ff=To.Da.g.parse(sr),sr=0;sr<ff.length;sr++){let $1=ff[sr];if(To.T=$1[0],$1=$1[1],To.G==2)if($1[0]=="c"){To.K=$1[1],To.ia=$1[2];const Vy=$1[3];Vy!=null&&(To.la=Vy,To.j.info("VER="+To.la));const ky=$1[4];ky!=null&&(To.Aa=ky,To.j.info("SVER="+To.Aa));const u4=$1[5];u4!=null&&typeof u4=="number"&&0<u4&&(_h=1.5*u4,To.L=_h,To.j.info("backChannelRequestTimeoutMs_="+_h)),_h=To;const $y=W.g;if($y){const Wv=$y.g?$y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wv){var n1=_h.h;n1.g||Wv.indexOf("spdy")==-1&&Wv.indexOf("quic")==-1&&Wv.indexOf("h2")==-1||(n1.j=n1.l,n1.g=new Set,n1.h&&(R4(n1,n1.h),n1.h=null))}if(_h.D){const l3=$y.g?$y.g.getResponseHeader("X-HTTP-Session-Id"):null;l3&&(_h.ya=l3,ey(_h.I,_h.D,l3))}}To.G=3,To.l&&To.l.ua(),To.ba&&(To.R=Date.now()-W.F,To.j.info("Handshake RTT: "+To.R+"ms")),_h=To;var d1=W;if(_h.qa=s_(_h,_h.J?_h.ia:null,_h.W),d1.K){Yy(_h.h,d1);var z1=d1,Cy=_h.L;Cy&&(z1.I=Cy),z1.B&&(av(z1),nv(z1)),_h.g=d1}else r_(_h);0<To.i.length&&V2(To)}else $1[0]!="stop"&&$1[0]!="close"||l4(To,7);else To.G==3&&($1[0]=="stop"||$1[0]=="close"?$1[0]=="stop"?l4(To,7):n3(To):$1[0]!="noop"&&To.l&&To.l.ta($1),To.v=0)}}Ym(4)}catch{}}var r4=class{constructor(W,sr){this.g=W,this.map=sr}};function Xy(W){this.l=W||10,c.PerformanceNavigationTiming?(W=c.performance.getEntriesByType("navigation"),W=0<W.length&&(W[0].nextHopProtocol=="hq"||W[0].nextHopProtocol=="h2")):W=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=W?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sy(W){return W.h?!0:W.g?W.g.size>=W.j:!1}function Iv(W){return W.h?1:W.g?W.g.size:0}function M4(W,sr){return W.h?W.h==sr:W.g?W.g.has(sr):!1}function R4(W,sr){W.g?W.g.add(sr):W.h=sr}function Yy(W,sr){W.h&&W.h==sr?W.h=null:W.g&&W.g.has(sr)&&W.g.delete(sr)}Xy.prototype.cancel=function(){if(this.i=Qb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const W of this.g.values())W.cancel();this.g.clear()}};function Qb(W){if(W.h!=null)return W.i.concat(W.h.D);if(W.g!=null&&W.g.size!==0){let sr=W.i;for(const To of W.g.values())sr=sr.concat(To.D);return sr}return _e(W.i)}function d6(W){if(W.V&&typeof W.V=="function")return W.V();if(typeof Map<"u"&&W instanceof Map||typeof Set<"u"&&W instanceof Set)return Array.from(W.values());if(typeof W=="string")return W.split("");if(d(W)){for(var sr=[],To=W.length,_h=0;_h<To;_h++)sr.push(W[_h]);return sr}sr=[],To=0;for(_h in W)sr[To++]=W[_h];return sr}function k2(W){if(W.na&&typeof W.na=="function")return W.na();if(!W.V||typeof W.V!="function"){if(typeof Map<"u"&&W instanceof Map)return Array.from(W.keys());if(!(typeof Set<"u"&&W instanceof Set)){if(d(W)||typeof W=="string"){var sr=[];W=W.length;for(var To=0;To<W;To++)sr.push(To);return sr}sr=[],To=0;for(const _h in W)sr[To++]=_h;return sr}}}function Jb(W,sr){if(W.forEach&&typeof W.forEach=="function")W.forEach(sr,void 0);else if(d(W)||typeof W=="string")Array.prototype.forEach.call(W,sr,void 0);else for(var To=k2(W),_h=d6(W),ff=_h.length,n1=0;n1<ff;n1++)sr.call(void 0,_h[n1],To&&To[n1],W)}var r2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function m6(W,sr){if(W){W=W.split("&");for(var To=0;To<W.length;To++){var _h=W[To].indexOf("="),ff=null;if(0<=_h){var n1=W[To].substring(0,_h);ff=W[To].substring(_h+1)}else n1=W[To];sr(n1,ff?decodeURIComponent(ff.replace(/\+/g," ")):"")}}}function wy(W){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,W instanceof wy){this.h=W.h,i2(this,W.j),this.o=W.o,this.g=W.g,P4(this,W.s),this.l=W.l;var sr=W.i,To=new n4;To.i=sr.i,sr.g&&(To.g=new Map(sr.g),To.h=sr.h),i4(this,To),this.m=W.m}else W&&(sr=String(W).match(r2))?(this.h=!1,i2(this,sr[1]||"",!0),this.o=vv(sr[2]||""),this.g=vv(sr[3]||"",!0),P4(this,sr[4]),this.l=vv(sr[5]||"",!0),i4(this,sr[6]||"",!0),this.m=vv(sr[7]||"")):(this.h=!1,this.i=new n4(null,this.h))}wy.prototype.toString=function(){var W=[],sr=this.j;sr&&W.push(a2(sr,Zb,!0),":");var To=this.g;return(To||sr=="file")&&(W.push("//"),(sr=this.o)&&W.push(a2(sr,Zb,!0),"@"),W.push(encodeURIComponent(String(To)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),To=this.s,To!=null&&W.push(":",String(To))),(To=this.l)&&(this.g&&To.charAt(0)!="/"&&W.push("/"),W.push(a2(To,To.charAt(0)=="/"?f6:e3,!0))),(To=this.i.toString())&&W.push("?",To),(To=this.m)&&W.push("#",a2(To,M2)),W.join("")};function sv(W){return new wy(W)}function i2(W,sr,To){W.j=To?vv(sr,!0):sr,W.j&&(W.j=W.j.replace(/:$/,""))}function P4(W,sr){if(sr){if(sr=Number(sr),isNaN(sr)||0>sr)throw Error("Bad port number "+sr);W.s=sr}else W.s=null}function i4(W,sr,To){sr instanceof n4?(W.i=sr,Q3(W.i,W.h)):(To||(sr=a2(sr,p6)),W.i=new n4(sr,W.h))}function ey(W,sr,To){W.i.set(sr,To)}function n2(W){return ey(W,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),W}function vv(W,sr){return W?sr?decodeURI(W.replace(/%25/g,"%2525")):decodeURIComponent(W):""}function a2(W,sr,To){return typeof W=="string"?(W=encodeURI(W).replace(sr,Y3),To&&(W=W.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),W):null}function Y3(W){return W=W.charCodeAt(0),"%"+(W>>4&15).toString(16)+(W&15).toString(16)}var Zb=/[#\/\?@]/g,e3=/[#\?:]/g,f6=/[#\?]/g,p6=/[#\?@]/g,M2=/#/g;function n4(W,sr){this.h=this.g=null,this.i=W||null,this.j=!!sr}function bv(W){W.g||(W.g=new Map,W.h=0,W.i&&m6(W.i,function(sr,To){W.add(decodeURIComponent(sr.replace(/\+/g," ")),To)}))}t=n4.prototype,t.add=function(W,sr){bv(this),this.i=null,W=qv(this,W);var To=this.g.get(W);return To||this.g.set(W,To=[]),To.push(sr),this.h+=1,this};function a4(W,sr){bv(W),sr=qv(W,sr),W.g.has(sr)&&(W.i=null,W.h-=W.g.get(sr).length,W.g.delete(sr))}function s4(W,sr){return bv(W),sr=qv(W,sr),W.g.has(sr)}t.forEach=function(W,sr){bv(this),this.g.forEach(function(To,_h){To.forEach(function(ff){W.call(sr,ff,_h,this)},this)},this)},t.na=function(){bv(this);const W=Array.from(this.g.values()),sr=Array.from(this.g.keys()),To=[];for(let _h=0;_h<sr.length;_h++){const ff=W[_h];for(let n1=0;n1<ff.length;n1++)To.push(sr[_h])}return To},t.V=function(W){bv(this);let sr=[];if(typeof W=="string")s4(this,W)&&(sr=sr.concat(this.g.get(qv(this,W))));else{W=Array.from(this.g.values());for(let To=0;To<W.length;To++)sr=sr.concat(W[To])}return sr},t.set=function(W,sr){return bv(this),this.i=null,W=qv(this,W),s4(this,W)&&(this.h-=this.g.get(W).length),this.g.set(W,[sr]),this.h+=1,this},t.get=function(W,sr){return W?(W=this.V(W),0<W.length?String(W[0]):sr):sr};function t3(W,sr,To){a4(W,sr),0<To.length&&(W.i=null,W.g.set(qv(W,sr),_e(To)),W.h+=To.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const W=[],sr=Array.from(this.g.keys());for(var To=0;To<sr.length;To++){var _h=sr[To];const n1=encodeURIComponent(String(_h)),d1=this.V(_h);for(_h=0;_h<d1.length;_h++){var ff=n1;d1[_h]!==""&&(ff+="="+encodeURIComponent(String(d1[_h]))),W.push(ff)}}return this.i=W.join("&")};function qv(W,sr){return sr=String(sr),W.j&&(sr=sr.toLowerCase()),sr}function Q3(W,sr){sr&&!W.j&&(bv(W),W.i=null,W.g.forEach(function(To,_h){var ff=_h.toLowerCase();_h!=ff&&(a4(this,_h),t3(this,ff,To))},W)),W.j=sr}function s2(W,sr){const To=new f1;if(c.Image){const _h=new Image;_h.onload=Z(_v,To,"TestLoadImage: loaded",!0,sr,_h),_h.onerror=Z(_v,To,"TestLoadImage: error",!1,sr,_h),_h.onabort=Z(_v,To,"TestLoadImage: abort",!1,sr,_h),_h.ontimeout=Z(_v,To,"TestLoadImage: timeout",!1,sr,_h),c.setTimeout(function(){_h.ontimeout&&_h.ontimeout()},1e4),_h.src=W}else sr(!1)}function Dv(W,sr){const To=new f1,_h=new AbortController,ff=setTimeout(()=>{_h.abort(),_v(To,"TestPingServer: timeout",!1,sr)},1e4);fetch(W,{signal:_h.signal}).then(n1=>{clearTimeout(ff),n1.ok?_v(To,"TestPingServer: ok",!0,sr):_v(To,"TestPingServer: server error",!1,sr)}).catch(()=>{clearTimeout(ff),_v(To,"TestPingServer: error",!1,sr)})}function _v(W,sr,To,_h,ff){try{ff&&(ff.onload=null,ff.onerror=null,ff.onabort=null,ff.ontimeout=null),_h(To)}catch{}}function o2(){this.g=new pv}function Uv(W,sr,To){const _h=To||"";try{Jb(W,function(ff,n1){let d1=ff;m(ff)&&(d1=iv(ff)),sr.push(_h+n1+"="+encodeURIComponent(d1))})}catch(ff){throw sr.push(_h+"type="+encodeURIComponent("_badmap")),ff}}function I4(W){this.l=W.Ub||null,this.j=W.eb||!1}me(I4,A4),I4.prototype.g=function(){return new o4(this.l,this.j)},I4.prototype.i=function(W){return function(){return W}}({});function o4(W,sr){L1.call(this),this.D=W,this.o=sr,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}me(o4,L1),t=o4.prototype,t.open=function(W,sr){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=W,this.A=sr,this.readyState=1,jv(this)},t.send=function(W){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const sr={headers:this.u,method:this.B,credentials:this.m,cache:void 0};W&&(sr.body=W),(this.D||c).fetch(new Request(this.A,sr)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kv(this)),this.readyState=0},t.Sa=function(W){if(this.g&&(this.l=W,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=W.headers,this.readyState=2,jv(this)),this.g&&(this.readyState=3,jv(this),this.g)))if(this.responseType==="arraybuffer")W.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in W){if(this.j=W.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;r3(this)}else W.text().then(this.Ra.bind(this),this.ga.bind(this))};function r3(W){W.j.read().then(W.Pa.bind(W)).catch(W.ga.bind(W))}t.Pa=function(W){if(this.g){if(this.o&&W.value)this.response.push(W.value);else if(!this.o){var sr=W.value?W.value:new Uint8Array(0);(sr=this.v.decode(sr,{stream:!W.done}))&&(this.response=this.responseText+=sr)}W.done?Kv(this):jv(this),this.readyState==3&&r3(this)}},t.Ra=function(W){this.g&&(this.response=this.responseText=W,Kv(this))},t.Qa=function(W){this.g&&(this.response=W,Kv(this))},t.ga=function(){this.g&&Kv(this)};function Kv(W){W.readyState=4,W.l=null,W.j=null,W.v=null,jv(W)}t.setRequestHeader=function(W,sr){this.u.append(W,sr)},t.getResponseHeader=function(W){return this.h&&this.h.get(W.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const W=[],sr=this.h.entries();for(var To=sr.next();!To.done;)To=To.value,W.push(To[0]+": "+To[1]),To=sr.next();return W.join(`\r
`)};function jv(W){W.onreadystatechange&&W.onreadystatechange.call(W)}Object.defineProperty(o4.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(W){this.m=W?"include":"same-origin"}});function i3(W){let sr="";return wt(W,function(To,_h){sr+=_h,sr+=":",sr+=To,sr+=`\r
`}),sr}function Ly(W,sr,To){e:{for(_h in To){var _h=!1;break e}_h=!0}_h||(To=i3(To),typeof W=="string"?To!=null&&encodeURIComponent(String(To)):ey(W,sr,To))}function Y1(W){L1.call(this),this.headers=new Map,this.o=W||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}me(Y1,L1);var R2=/^https?$/i,l2=["POST","PUT"];t=Y1.prototype,t.Ha=function(W){this.J=W},t.ea=function(W,sr,To,_h){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+W);sr=sr?sr.toUpperCase():"GET",this.D=W,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():U1.g(),this.v=this.o?t4(this.o):t4(U1),this.g.onreadystatechange=P(this.Ea,this);try{this.B=!0,this.g.open(sr,String(W),!0),this.B=!1}catch(n1){J3(this,n1);return}if(W=To||"",To=new Map(this.headers),_h)if(Object.getPrototypeOf(_h)===Object.prototype)for(var ff in _h)To.set(ff,_h[ff]);else if(typeof _h.keys=="function"&&typeof _h.get=="function")for(const n1 of _h.keys())To.set(n1,_h.get(n1));else throw Error("Unknown input type for opt_headers: "+String(_h));_h=Array.from(To.keys()).find(n1=>n1.toLowerCase()=="content-type"),ff=c.FormData&&W instanceof c.FormData,!(0<=Array.prototype.indexOf.call(l2,sr,void 0))||_h||ff||To.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[n1,d1]of To)this.g.setRequestHeader(n1,d1);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{u2(this),this.u=!0,this.g.send(W),this.u=!1}catch(n1){J3(this,n1)}};function J3(W,sr){W.h=!1,W.g&&(W.j=!0,W.g.abort(),W.j=!1),W.l=sr,W.m=5,P2(W),Hv(W)}function P2(W){W.A||(W.A=!0,R1(W,"complete"),R1(W,"error"))}t.abort=function(W){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=W||7,R1(this,"complete"),R1(this,"abort"),Hv(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hv(this,!0)),Y1.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?I2(this):this.bb())},t.bb=function(){I2(this)};function I2(W){if(W.h&&typeof o<"u"&&(!W.v[1]||xv(W)!=4||W.Z()!=2)){if(W.u&&xv(W)==4)ly(W.Ea,0,W);else if(R1(W,"readystatechange"),xv(W)==4){W.h=!1;try{const d1=W.Z();e:switch(d1){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var sr=!0;break e;default:sr=!1}var To;if(!(To=sr)){var _h;if(_h=d1===0){var ff=String(W.D).match(r2)[1]||null;!ff&&c.self&&c.self.location&&(ff=c.self.location.protocol.slice(0,-1)),_h=!R2.test(ff?ff.toLowerCase():"")}To=_h}if(To)R1(W,"complete"),R1(W,"success");else{W.m=6;try{var n1=2<xv(W)?W.g.statusText:""}catch{n1=""}W.l=n1+" ["+W.Z()+"]",P2(W)}}finally{Hv(W)}}}}function Hv(W,sr){if(W.g){u2(W);const To=W.g,_h=W.v[0]?()=>{}:null;W.g=null,W.v=null,sr||R1(W,"ready");try{To.onreadystatechange=_h}catch{}}}function u2(W){W.I&&(c.clearTimeout(W.I),W.I=null)}t.isActive=function(){return!!this.g};function xv(W){return W.g?W.g.readyState:0}t.Z=function(){try{return 2<xv(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(W){if(this.g){var sr=this.g.responseText;return W&&sr.indexOf(W)==0&&(sr=sr.substring(W.length)),e4(sr)}};function Z3(W){try{if(!W.g)return null;if("response"in W.g)return W.g.response;switch(W.H){case"":case"text":return W.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in W.g)return W.g.mozResponseArrayBuffer}return null}catch{return null}}function g6(W){const sr={};W=(W.g&&2<=xv(W)&&W.g.getAllResponseHeaders()||"").split(`\r
`);for(let _h=0;_h<W.length;_h++){if(He(W[_h]))continue;var To=Fc(W[_h]);const ff=To[0];if(To=To[1],typeof To!="string")continue;To=To.trim();const n1=sr[ff]||[];sr[ff]=n1,n1.push(To)}li(sr,function(_h){return _h.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function c2(W,sr,To){return To&&To.internalChannelParams&&To.internalChannelParams[W]||sr}function D2(W){this.Aa=0,this.i=[],this.j=new f1,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=c2("failFast",!1,W),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=c2("baseRetryDelayMs",5e3,W),this.cb=c2("retryDelaySeedMs",1e4,W),this.Wa=c2("forwardChannelMaxRetries",2,W),this.wa=c2("forwardChannelRequestTimeoutMs",2e4,W),this.pa=W&&W.xmlHttpFactory||void 0,this.Xa=W&&W.Tb||void 0,this.Ca=W&&W.useFetchStreams||!1,this.L=void 0,this.J=W&&W.supportsCrossDomainXhr||!1,this.K="",this.h=new Xy(W&&W.concurrentRequestLimit),this.Da=new o2,this.P=W&&W.fastHandshake||!1,this.O=W&&W.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=W&&W.Rb||!1,W&&W.xa&&this.j.xa(),W&&W.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&W&&W.detectBufferingProxy||!1,this.ja=void 0,W&&W.longPollingTimeout&&0<W.longPollingTimeout&&(this.ja=W.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=D2.prototype,t.la=8,t.G=1,t.connect=function(W,sr,To,_h){Qp(0),this.W=W,this.H=sr||{},To&&_h!==void 0&&(this.H.OSID=To,this.H.OAID=_h),this.F=this.X,this.I=s_(this,null,this.W),V2(this)};function n3(W){if(e_(W),W.G==3){var sr=W.U++,To=sv(W.I);if(ey(To,"SID",W.K),ey(To,"RID",sr),ey(To,"TYPE","terminate"),h2(W,To),sr=new H1(W,W.j,sr),sr.L=2,sr.v=n2(sv(To)),To=!1,c.navigator&&c.navigator.sendBeacon)try{To=c.navigator.sendBeacon(sr.v.toString(),"")}catch{}!To&&c.Image&&(new Image().src=sr.v,To=!0),To||(sr.g=o_(sr.j,null),sr.g.ea(sr.v)),sr.F=Date.now(),nv(sr)}a_(W)}function L2(W){W.g&&(d2(W),W.g.cancel(),W.g=null)}function e_(W){L2(W),W.u&&(c.clearTimeout(W.u),W.u=null),B2(W),W.h.cancel(),W.s&&(typeof W.s=="number"&&c.clearTimeout(W.s),W.s=null)}function V2(W){if(!sy(W.h)&&!W.s){W.s=!0;var sr=W.Ga;th||Vc(),Rs||(th(),Rs=!0),Ko.add(sr,W),W.B=0}}function y6(W,sr){return Iv(W.h)>=W.h.j-(W.s?1:0)?!1:W.s?(W.i=sr.D.concat(W.i),!0):W.G==1||W.G==2||W.B>=(W.Va?0:W.Wa)?!1:(W.s=c1(P(W.Ga,W,sr),o3(W,W.B)),W.B++,!0)}t.Ga=function(W){if(this.s)if(this.s=null,this.G==1){if(!W){this.U=Math.floor(1e5*Math.random()),W=this.U++;const ff=new H1(this,this.j,W);let n1=this.o;if(this.S&&(n1?(n1=An(n1),vh(n1,this.S)):n1=this.S),this.m!==null||this.O||(ff.H=n1,n1=null),this.P)e:{for(var sr=0,To=0;To<this.i.length;To++){t:{var _h=this.i[To];if("__data__"in _h.map&&(_h=_h.map.__data__,typeof _h=="string")){_h=_h.length;break t}_h=void 0}if(_h===void 0)break;if(sr+=_h,4096<sr){sr=To;break e}if(sr===4096||To===this.i.length-1){sr=To+1;break e}}sr=1e3}else sr=1e3;sr=t_(this,ff,sr),To=sv(this.I),ey(To,"RID",W),ey(To,"CVER",22),this.D&&ey(To,"X-HTTP-Session-Id",this.D),h2(this,To),n1&&(this.O?sr="headers="+encodeURIComponent(String(i3(n1)))+"&"+sr:this.m&&Ly(To,this.m,n1)),R4(this.h,ff),this.Ua&&ey(To,"TYPE","init"),this.P?(ey(To,"$req",sr),ey(To,"SID","null"),ff.T=!0,zy(ff,To,null)):zy(ff,To,sr),this.G=2}}else this.G==3&&(W?a3(this,W):this.i.length==0||sy(this.h)||a3(this))};function a3(W,sr){var To;sr?To=sr.l:To=W.U++;const _h=sv(W.I);ey(_h,"SID",W.K),ey(_h,"RID",To),ey(_h,"AID",W.T),h2(W,_h),W.m&&W.o&&Ly(_h,W.m,W.o),To=new H1(W,W.j,To,W.B+1),W.m===null&&(To.H=W.o),sr&&(W.i=sr.D.concat(W.i)),sr=t_(W,To,1e3),To.I=Math.round(.5*W.wa)+Math.round(.5*W.wa*Math.random()),R4(W.h,To),zy(To,_h,sr)}function h2(W,sr){W.H&&wt(W.H,function(To,_h){ey(sr,_h,To)}),W.l&&Jb({},function(To,_h){ey(sr,_h,To)})}function t_(W,sr,To){To=Math.min(W.i.length,To);var _h=W.l?P(W.l.Na,W.l,W):null;e:{var ff=W.i;let n1=-1;for(;;){const d1=["count="+To];n1==-1?0<To?(n1=ff[0].g,d1.push("ofs="+n1)):n1=0:d1.push("ofs="+n1);let z1=!0;for(let Cy=0;Cy<To;Cy++){let $1=ff[Cy].g;const Vy=ff[Cy].map;if($1-=n1,0>$1)n1=Math.max(0,ff[Cy].g-100),z1=!1;else try{Uv(Vy,d1,"req"+$1+"_")}catch{_h&&_h(Vy)}}if(z1){_h=d1.join("&");break e}}}return W=W.i.splice(0,To),sr.D=W,_h}function r_(W){if(!W.g&&!W.u){W.Y=1;var sr=W.Fa;th||Vc(),Rs||(th(),Rs=!0),Ko.add(sr,W),W.v=0}}function s3(W){return W.g||W.u||3<=W.v?!1:(W.Y++,W.u=c1(P(W.Fa,W),o3(W,W.v)),W.v++,!0)}t.Fa=function(){if(this.u=null,i_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var W=2*this.R;this.j.info("BP detection timer enabled: "+W),this.A=c1(P(this.ab,this),W)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qp(10),L2(this),i_(this))};function d2(W){W.A!=null&&(c.clearTimeout(W.A),W.A=null)}function i_(W){W.g=new H1(W,W.j,"rpc",W.Y),W.m===null&&(W.g.H=W.o),W.g.O=0;var sr=sv(W.qa);ey(sr,"RID","rpc"),ey(sr,"SID",W.K),ey(sr,"AID",W.T),ey(sr,"CI",W.F?"0":"1"),!W.F&&W.ja&&ey(sr,"TO",W.ja),ey(sr,"TYPE","xmlhttp"),h2(W,sr),W.m&&W.o&&Ly(sr,W.m,W.o),W.L&&(W.g.I=W.L);var To=W.g;W=W.ia,To.L=1,To.v=n2(sv(sr)),To.m=null,To.P=!0,Dy(To,W)}t.Za=function(){this.C!=null&&(this.C=null,L2(this),s3(this),Qp(19))};function B2(W){W.C!=null&&(c.clearTimeout(W.C),W.C=null)}function n_(W,sr){var To=null;if(W.g==sr){B2(W),d2(W),W.g=null;var _h=2}else if(M4(W.h,sr))To=sr.D,Yy(W.h,sr),_h=1;else return;if(W.G!=0){if(sr.o)if(_h==1){To=sr.m?sr.m.length:0,sr=Date.now()-sr.F;var ff=W.B;_h=$v(),R1(_h,new l1(_h,To)),V2(W)}else r_(W);else if(ff=sr.s,ff==3||ff==0&&0<sr.X||!(_h==1&&y6(W,sr)||_h==2&&s3(W)))switch(To&&0<To.length&&(sr=W.h,sr.i=sr.i.concat(To)),ff){case 1:l4(W,5);break;case 4:l4(W,10);break;case 3:l4(W,6);break;default:l4(W,2)}}}function o3(W,sr){let To=W.Ta+Math.floor(Math.random()*W.cb);return W.isActive()||(To*=2),To*sr}function l4(W,sr){if(W.j.info("Error code "+sr),sr==2){var To=P(W.fb,W),_h=W.Xa;const ff=!_h;_h=new wy(_h||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||i2(_h,"https"),n2(_h),ff?s2(_h.toString(),To):Dv(_h.toString(),To)}else Qp(2);W.G=0,W.l&&W.l.sa(sr),a_(W),e_(W)}t.fb=function(W){W?(this.j.info("Successfully pinged google.com"),Qp(2)):(this.j.info("Failed to ping google.com"),Qp(1))};function a_(W){if(W.G=0,W.ka=[],W.l){const sr=Qb(W.h);(sr.length!=0||W.i.length!=0)&&(Ge(W.ka,sr),Ge(W.ka,W.i),W.h.i.length=0,_e(W.i),W.i.length=0),W.l.ra()}}function s_(W,sr,To){var _h=To instanceof wy?sv(To):new wy(To);if(_h.g!="")sr&&(_h.g=sr+"."+_h.g),P4(_h,_h.s);else{var ff=c.location;_h=ff.protocol,sr=sr?sr+"."+ff.hostname:ff.hostname,ff=+ff.port;var n1=new wy(null);_h&&i2(n1,_h),sr&&(n1.g=sr),ff&&P4(n1,ff),To&&(n1.l=To),_h=n1}return To=W.D,sr=W.ya,To&&sr&&ey(_h,To,sr),ey(_h,"VER",W.la),h2(W,_h),_h}function o_(W,sr,To){if(sr&&!W.J)throw Error("Can't create secondary domain capable XhrIo object.");return sr=W.Ca&&!W.pa?new Y1(new I4({eb:To})):new Y1(W.pa),sr.Ha(W.J),sr}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function l_(){}t=l_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function F2(){}F2.prototype.g=function(W,sr){return new Qy(W,sr)};function Qy(W,sr){L1.call(this),this.g=new D2(sr),this.l=W,this.h=sr&&sr.messageUrlParams||null,W=sr&&sr.messageHeaders||null,sr&&sr.clientProtocolHeaderRequired&&(W?W["X-Client-Protocol"]="webchannel":W={"X-Client-Protocol":"webchannel"}),this.g.o=W,W=sr&&sr.initMessageHeaders||null,sr&&sr.messageContentType&&(W?W["X-WebChannel-Content-Type"]=sr.messageContentType:W={"X-WebChannel-Content-Type":sr.messageContentType}),sr&&sr.va&&(W?W["X-WebChannel-Client-Profile"]=sr.va:W={"X-WebChannel-Client-Profile":sr.va}),this.g.S=W,(W=sr&&sr.Sb)&&!He(W)&&(this.g.m=W),this.v=sr&&sr.supportsCrossDomainXhr||!1,this.u=sr&&sr.sendRawJson||!1,(sr=sr&&sr.httpSessionIdParam)&&!He(sr)&&(this.g.D=sr,W=this.h,W!==null&&sr in W&&(W=this.h,sr in W&&delete W[sr])),this.j=new Gv(this)}me(Qy,L1),Qy.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qy.prototype.close=function(){n3(this.g)},Qy.prototype.o=function(W){var sr=this.g;if(typeof W=="string"){var To={};To.__data__=W,W=To}else this.u&&(To={},To.__data__=iv(W),W=To);sr.i.push(new r4(sr.Ya++,W)),sr.G==3&&V2(sr)},Qy.prototype.N=function(){this.g.l=null,delete this.j,n3(this.g),delete this.g,Qy.aa.N.call(this)};function u_(W){Pv.call(this),W.__headers__&&(this.headers=W.__headers__,this.statusCode=W.__status__,delete W.__headers__,delete W.__status__);var sr=W.__sm__;if(sr){e:{for(const To in sr){W=To;break e}W=void 0}(this.i=W)&&(W=this.i,sr=sr!==null&&W in sr?sr[W]:void 0),this.data=sr}else this.data=W}me(u_,Pv);function c_(){T4.call(this),this.status=1}me(c_,T4);function Gv(W){this.g=W}me(Gv,l_),Gv.prototype.ua=function(){R1(this.g,"a")},Gv.prototype.ta=function(W){R1(this.g,new u_(W))},Gv.prototype.sa=function(W){R1(this.g,new c_)},Gv.prototype.ra=function(){R1(this.g,"b")},F2.prototype.createWebChannel=F2.prototype.g,Qy.prototype.send=Qy.prototype.o,Qy.prototype.open=Qy.prototype.m,Qy.prototype.close=Qy.prototype.close,createWebChannelTransport=function(){return new F2},getStatEventTarget=function(){return $v()},Event$1=Hy,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_1.NO_ERROR=0,_1.TIMEOUT=8,_1.HTTP_ERROR=6,ErrorCode=_1,V1.COMPLETE="complete",EventType=V1,t2.EventType=gv,gv.OPEN="a",gv.CLOSE="b",gv.ERROR="c",gv.MESSAGE="d",L1.prototype.listen=L1.prototype.K,WebChannel=t2,Y1.prototype.listenOnce=Y1.prototype.L,Y1.prototype.getLastError=Y1.prototype.Ka,Y1.prototype.getLastErrorCode=Y1.prototype.Ba,Y1.prototype.getStatus=Y1.prototype.Z,Y1.prototype.getResponseJson=Y1.prototype.Oa,Y1.prototype.getResponseText=Y1.prototype.oa,Y1.prototype.send=Y1.prototype.ea,Y1.prototype.setWithCredentials=Y1.prototype.Ha,XhrIo=Y1}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F="@firebase/firestore",M="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$1=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O$1.logLevel}function __PRIVATE_logDebug(t,...e){if(O$1.logLevel<=LogLevel.DEBUG){const r=e.map(__PRIVATE_argToString);O$1.debug(`Firestore (${x}): ${t}`,...r)}}function __PRIVATE_logError(t,...e){if(O$1.logLevel<=LogLevel.ERROR){const r=e.map(__PRIVATE_argToString);O$1.error(`Firestore (${x}): ${t}`,...r)}}function __PRIVATE_logWarn(t,...e){if(O$1.logLevel<=LogLevel.WARN){const r=e.map(__PRIVATE_argToString);O$1.warn(`Firestore (${x}): ${t}`,...r)}}function __PRIVATE_argToString(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,__PRIVATE__fail(t,n,r)}function __PRIVATE__fail(t,e,r){let n=`FIRESTORE (${x}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw __PRIVATE_logError(n),new Error(n)}function __PRIVATE_hardAssert(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||__PRIVATE__fail(e,a,n)}function __PRIVATE_debugCast(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){__PRIVATE_hardAssert(this.o===void 0,42304);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let s=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new __PRIVATE_Deferred,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const d=s;e.enqueueRetryable(async()=>{await d.promise,await a(this.currentUser)})},c=d=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new __PRIVATE_Deferred)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(__PRIVATE_hardAssert(typeof n.accessToken=="string",31837,{l:n}),new __PRIVATE_OAuthToken(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){__PRIVATE_hardAssert(this.o===void 0,3512);const n=s=>{s.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(__PRIVATE_hardAssert(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new AppCheckToken(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=__PRIVATE_randomBytes(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%62))}return n}}function __PRIVATE_primitiveComparator(t,e){return t<e?-1:t>e?1:0}function __PRIVATE_compareUtf8Strings(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),s=e.charAt(n);if(a!==s)return __PRIVATE_isSurrogate(a)===__PRIVATE_isSurrogate(s)?__PRIVATE_primitiveComparator(a,s):__PRIVATE_isSurrogate(a)?1:-1}return __PRIVATE_primitiveComparator(t.length,e.length)}const B=55296,L=57343;function __PRIVATE_isSurrogate(t){const e=t.charCodeAt(0);return e>=B&&e<=L}function __PRIVATE_arrayEquals(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k="__name__";class BasePath{constructor(e,r,n){r===void 0?r=0:r>e.length&&fail(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&fail(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=BasePath.compareSegments(e.get(a),r.get(a));if(s!==0)return s}return __PRIVATE_primitiveComparator(e.length,r.length)}static compareSegments(e,r){const n=BasePath.isNumericId(e),a=BasePath.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(r)):__PRIVATE_compareUtf8Strings(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,r,n){return new ResourcePath(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new ResourcePath(r)}static emptyPath(){return new ResourcePath([])}}const q$1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,r,n){return new FieldPath$1(e,r,n)}static isValidIdentifier(e){return q$1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k}static keyField(){return new FieldPath$1([k])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(o=!o,a++):c!=="."||o?(n+=c,a++):(s(),a++)}if(s(),o)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(r)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ResourcePath.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(t,e,r){if(!r)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(t,e,r,n){if(e===!0&&n===!0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function __PRIVATE_validateDocumentPath(t){if(!DocumentKey.isDocumentKey(t))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_validateCollectionPath(t){if(DocumentKey.isDocumentKey(t))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_isPlainObject(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function __PRIVATE_valueDescription(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fail(12329,{type:typeof t})}function __PRIVATE_cast(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=__PRIVATE_valueDescription(t);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property(t,e){const r={typeString:t};return e&&(r.value=e),r}function __PRIVATE_validateJSON(t,e){if(!__PRIVATE_isPlainObject(t))throw new FirestoreError(N$1.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(a&&typeof o!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&o!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new FirestoreError(N$1.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$1=-62135596800,$$1=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*$$1);return new Timestamp(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Q$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$$1}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q$1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$1=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=SnapshotVersion.fromTimestamp(n===1e9?new Timestamp(r+1,0):new Timestamp(r,n));return new IndexOffset(a,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(t){return new IndexOffset(t.readTime,t.key,U$1)}class IndexOffset{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),U$1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),U$1)}}function __PRIVATE_indexOffsetComparator(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=DocumentKey.comparator(t.documentKey,e.documentKey),r!==0?r:__PRIVATE_primitiveComparator(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(t){if(t.code!==N$1.FAILED_PRECONDITION||t.message!==K)throw t;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof PersistencePromise?r:PersistencePromise.resolve(r)}catch(r){return PersistencePromise.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):PersistencePromise.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):PersistencePromise.reject(r)}static resolve(e){return new PersistencePromise((r,n)=>{r(e)})}static reject(e){return new PersistencePromise((r,n)=>{n(e)})}static waitFor(e){return new PersistencePromise((r,n)=>{let a=0,s=0,o=!1;e.forEach(c=>{++a,c.next(()=>{++s,o&&s===a&&r()},d=>n(d))}),o=!0,s===a&&r()})}static or(e){let r=PersistencePromise.resolve(!1);for(const n of e)r=r.next(a=>a?PersistencePromise.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new PersistencePromise((n,a)=>{const s=e.length,o=new Array(s);let c=0;for(let d=0;d<s;d++){const m=d;r(e[m]).next(y=>{o[m]=y,++c,c===s&&n(o)},y=>a(y))}})}static doWhile(e,r){return new PersistencePromise((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}function __PRIVATE_getAndroidVersion(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function __PRIVATE_isIndexedDbTransactionError(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}__PRIVATE_ListenSequence.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$1=-1;function __PRIVATE_isNullOrUndefined(t){return t==null}function __PRIVATE_isNegativeZero(t){return t===0&&1/t==-1/0}function isSafeInteger(t){return typeof t=="number"&&Number.isInteger(t)&&!__PRIVATE_isNegativeZero(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J="";function __PRIVATE_encodeResourcePath(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(t.get(r),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case J:r+="";break;default:r+=s}}return r}function __PRIVATE_encodeSeparator(t){return t+J+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function forEach(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function __PRIVATE_mapToArray(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function isEmpty(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,r){this.comparator=e,this.root=r||LLRBNode.EMPTY}insert(e,r){return new SortedMap(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??LLRBNode.RED,this.left=a??LLRBNode.EMPTY,this.right=s??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new LLRBNode(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return LLRBNode.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,r,n,a,s){return this}insert(e,r,n){return new LLRBNode(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new SortedSet(this.comparator);return r.data=e,r}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let r=new SortedSet(FieldPath$1.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new FieldMask(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+s):s}}(e);return new ByteString(r)}static fromUint8Array(e){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(e);return new ByteString(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ot$1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(t){if(__PRIVATE_hardAssert(!!t,39018),typeof t=="string"){let e=0;const r=ot$1.exec(t);if(__PRIVATE_hardAssert(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(t.seconds),nanos:__PRIVATE_normalizeNumber(t.nanos)}}function __PRIVATE_normalizeNumber(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function __PRIVATE_normalizeByteString(t){return typeof t=="string"?ByteString.fromBase64String(t):ByteString.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t$1="server_timestamp",at$1="__type__",ut$1="__previous_value__",ct$1="__local_write_time__";function __PRIVATE_isServerTimestamp(t){return(t?.mapValue?.fields||{})[at$1]?.stringValue===_t$1}function __PRIVATE_getPreviousValue(t){const e=t.mapValue.fields[ut$1];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(t){const e=__PRIVATE_normalizeTimestamp(t.mapValue.fields[ct$1].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,r,n,a,s,o,c,d,m,y){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=y}}const lt$1="(default)";class DatabaseId{constructor(e,r){this.projectId=e,this.database=r||lt$1}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===lt$1}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht$1="__type__",Pt$1="__max__",Tt$1={mapValue:{}},It$1="__vector__",Et$1="value";function __PRIVATE_typeOrder(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?__PRIVATE_isServerTimestamp(t)?4:__PRIVATE_isMaxValue(t)?9007199254740991:__PRIVATE_isVectorValue(t)?10:11:fail(28295,{value:t})}function __PRIVATE_valueEquals(t,e){if(t===e)return!0;const r=__PRIVATE_typeOrder(t);if(r!==__PRIVATE_typeOrder(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(t).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=__PRIVATE_normalizeTimestamp(a.timestampValue),c=__PRIVATE_normalizeTimestamp(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return __PRIVATE_normalizeByteString(a.bytesValue).isEqual(__PRIVATE_normalizeByteString(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return __PRIVATE_normalizeNumber(a.geoPointValue.latitude)===__PRIVATE_normalizeNumber(s.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(a.geoPointValue.longitude)===__PRIVATE_normalizeNumber(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return __PRIVATE_normalizeNumber(a.integerValue)===__PRIVATE_normalizeNumber(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=__PRIVATE_normalizeNumber(a.doubleValue),c=__PRIVATE_normalizeNumber(s.doubleValue);return o===c?__PRIVATE_isNegativeZero(o)===__PRIVATE_isNegativeZero(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return __PRIVATE_arrayEquals(t.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},c=s.mapValue.fields||{};if(__PRIVATE_objectSize(o)!==__PRIVATE_objectSize(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!__PRIVATE_valueEquals(o[d],c[d])))return!1;return!0}(t,e);default:return fail(52216,{left:t})}}function __PRIVATE_arrayValueContains(t,e){return(t.values||[]).find(r=>__PRIVATE_valueEquals(r,e))!==void 0}function __PRIVATE_valueCompare(t,e){if(t===e)return 0;const r=__PRIVATE_typeOrder(t),n=__PRIVATE_typeOrder(e);if(r!==n)return __PRIVATE_primitiveComparator(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=__PRIVATE_normalizeNumber(s.integerValue||s.doubleValue),d=__PRIVATE_normalizeNumber(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return __PRIVATE_compareTimestamps(t.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(t),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(t.stringValue,e.stringValue);case 6:return function(s,o){const c=__PRIVATE_normalizeByteString(s),d=__PRIVATE_normalizeByteString(o);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),d=o.split("/");for(let m=0;m<c.length&&m<d.length;m++){const y=__PRIVATE_primitiveComparator(c[m],d[m]);if(y!==0)return y}return __PRIVATE_primitiveComparator(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(s.latitude),__PRIVATE_normalizeNumber(o.latitude));return c!==0?c:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(s.longitude),__PRIVATE_normalizeNumber(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(t.arrayValue,e.arrayValue);case 10:return function(s,o){const c=s.fields||{},d=o.fields||{},m=c[Et$1]?.arrayValue,y=d[Et$1]?.arrayValue,A=__PRIVATE_primitiveComparator(m?.values?.length||0,y?.values?.length||0);return A!==0?A:__PRIVATE_compareArrays(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Tt$1.mapValue&&o===Tt$1.mapValue)return 0;if(s===Tt$1.mapValue)return 1;if(o===Tt$1.mapValue)return-1;const c=s.fields||{},d=Object.keys(c),m=o.fields||{},y=Object.keys(m);d.sort(),y.sort();for(let A=0;A<d.length&&A<y.length;++A){const P=__PRIVATE_compareUtf8Strings(d[A],y[A]);if(P!==0)return P;const Z=__PRIVATE_valueCompare(c[d[A]],m[y[A]]);if(Z!==0)return Z}return __PRIVATE_primitiveComparator(d.length,y.length)}(t.mapValue,e.mapValue);default:throw fail(23264,{he:r})}}function __PRIVATE_compareTimestamps(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return __PRIVATE_primitiveComparator(t,e);const r=__PRIVATE_normalizeTimestamp(t),n=__PRIVATE_normalizeTimestamp(e),a=__PRIVATE_primitiveComparator(r.seconds,n.seconds);return a!==0?a:__PRIVATE_primitiveComparator(r.nanos,n.nanos)}function __PRIVATE_compareArrays(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=__PRIVATE_valueCompare(r[a],n[a]);if(s)return s}return __PRIVATE_primitiveComparator(r.length,n.length)}function canonicalId(t){return __PRIVATE_canonifyValue(t)}function __PRIVATE_canonifyValue(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=__PRIVATE_normalizeTimestamp(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return __PRIVATE_normalizeByteString(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return DocumentKey.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=__PRIVATE_canonifyValue(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${__PRIVATE_canonifyValue(r.fields[o])}`;return a+"}"}(t.mapValue):fail(61005,{value:t})}function __PRIVATE_estimateByteSize(t){switch(__PRIVATE_typeOrder(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(t);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*t.stringValue.length;case 6:return __PRIVATE_normalizeByteString(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+__PRIVATE_estimateByteSize(s),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return forEach(n.fields,(s,o)=>{a+=s.length+__PRIVATE_estimateByteSize(o)}),a}(t.mapValue);default:throw fail(13486,{value:t})}}function __PRIVATE_refValue(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function isInteger(t){return!!t&&"integerValue"in t}function isArray(t){return!!t&&"arrayValue"in t}function __PRIVATE_isNullValue(t){return!!t&&"nullValue"in t}function __PRIVATE_isNanValue(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function __PRIVATE_isMapValue(t){return!!t&&"mapValue"in t}function __PRIVATE_isVectorValue(t){return(t?.mapValue?.fields||{})[ht$1]?.stringValue===It$1}function __PRIVATE_deepClone(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return forEach(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=__PRIVATE_deepClone(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=__PRIVATE_deepClone(t.arrayValue.values[r]);return e}return{...t}}function __PRIVATE_isMaxValue(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Pt$1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!__PRIVATE_isMapValue(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(r)}setAll(e){let r=FieldPath$1.emptyPath(),n={},a=[];e.forEach((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}o?n[c.lastSegment()]=__PRIVATE_deepClone(o):a.push(c.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());__PRIVATE_isMapValue(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];__PRIVATE_isMapValue(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){forEach(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(t){const e=[];return forEach(t.fields,(r,n)=>{const a=new FieldPath$1([r]);if(__PRIVATE_isMapValue(n)){const s=__PRIVATE_extractFieldMask(n.mapValue).fields;if(s.length===0)e.push(a);else for(const o of s)e.push(a.child(o))}else e.push(a)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,r,n,a,s,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,r,n,a){return new MutableDocument(e,1,r,SnapshotVersion.min(),n,a,0)}static newNoDocument(e,r){return new MutableDocument(e,2,r,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,r){return new MutableDocument(e,3,r,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,r){this.position=e,this.inclusive=r}}function __PRIVATE_boundCompareToDocument(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],o=t.position[a];if(s.field.isKeyField()?n=DocumentKey.comparator(DocumentKey.fromName(o.referenceValue),r.key):n=__PRIVATE_valueCompare(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function __PRIVATE_boundEquals(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!__PRIVATE_valueEquals(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,r="asc"){this.field=e,this.dir=r}}function __PRIVATE_orderByEquals(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new __PRIVATE_KeyFieldFilter(e,r,n):r==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,n):r==="in"?new __PRIVATE_InFilter(e,n):r==="not-in"?new __PRIVATE_NotInFilter(e,n):r==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,n):new FieldFilter(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new __PRIVATE_KeyFieldInFilter(e,n):new __PRIVATE_KeyFieldNotInFilter(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(r,this.value)):r!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(r)&&this.matchesComparison(__PRIVATE_valueCompare(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new CompositeFilter(e,r)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(t){return t.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(t){return __PRIVATE_compositeFilterIsFlat(t)&&__PRIVATE_compositeFilterIsConjunction(t)}function __PRIVATE_compositeFilterIsFlat(t){for(const e of t.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(t){if(t instanceof FieldFilter)return t.field.canonicalString()+t.op.toString()+canonicalId(t.value);if(__PRIVATE_compositeFilterIsFlatConjunction(t))return t.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=t.filters.map(r=>__PRIVATE_canonifyFilter(r)).join(",");return`${t.op}(${e})`}}function __PRIVATE_filterEquals(t,e){return t instanceof FieldFilter?function(n,a){return a instanceof FieldFilter&&n.op===a.op&&n.field.isEqual(a.field)&&__PRIVATE_valueEquals(n.value,a.value)}(t,e):t instanceof CompositeFilter?function(n,a){return a instanceof CompositeFilter&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,c)=>s&&__PRIVATE_filterEquals(o,a.filters[c]),!0):!1}(t,e):void fail(19439)}function __PRIVATE_stringifyFilter(t){return t instanceof FieldFilter?function(r){return`${r.field.canonicalString()} ${r.op} ${canonicalId(r.value)}`}(t):t instanceof CompositeFilter?function(r){return r.op.toString()+" {"+r.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(t):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,r,n){super(e,r,n),this.key=DocumentKey.fromName(n.referenceValue)}matches(e){const r=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(r)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,r){super(e,"in",r),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,r){super(e,"not-in",r),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(t,e){return(e.arrayValue?.values||[]).map(r=>DocumentKey.fromName(r.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return isArray(r)&&__PRIVATE_arrayValueContains(r.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,r)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,r){super(e,"not-in",r)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,r)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!isArray(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>__PRIVATE_arrayValueContains(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,r=null,n=[],a=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=c,this.Te=null}}function __PRIVATE_newTarget(t,e=null,r=[],n=[],a=null,s=null,o=null){return new __PRIVATE_TargetImpl(t,e,r,n,a,s,o)}function __PRIVATE_canonifyTarget(t){const e=__PRIVATE_debugCast(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>__PRIVATE_canonifyFilter(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>canonicalId(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>canonicalId(n)).join(",")),e.Te=r}return e.Te}function __PRIVATE_targetEquals(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!__PRIVATE_orderByEquals(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!__PRIVATE_filterEquals(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(t.startAt,e.startAt)&&__PRIVATE_boundEquals(t.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(t){return DocumentKey.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,r=null,n=[],a=[],s=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(t,e,r,n,a,s,o,c){return new __PRIVATE_QueryImpl(t,e,r,n,a,s,o,c)}function __PRIVATE_newQueryForPath(t){return new __PRIVATE_QueryImpl(t)}function __PRIVATE_queryMatchesAllDocuments(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(t){return t.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(t){const e=__PRIVATE_debugCast(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new SortedSet(FieldPath$1.comparator);return o.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(c=c.add(m.field))})}),c})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new OrderBy(s,n))}),r.has(FieldPath$1.keyField().canonicalString())||e.Ie.push(new OrderBy(FieldPath$1.keyField(),n))}return e.Ie}function __PRIVATE_queryToTarget(t){const e=__PRIVATE_debugCast(t);return e.Ee||(e.Ee=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(t))),e.Ee}function __PRIVATE_queryToAggregateTarget(t){const e=__PRIVATE_debugCast(t);return e.de||(e.de=__PRIVATE__queryToTarget(e,t.explicitOrderBy)),e.de}function __PRIVATE__queryToTarget(t,e){if(t.limitType==="F")return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new OrderBy(a.field,s)});const r=t.endAt?new Bound(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Bound(t.startAt.position,t.startAt.inclusive):null;return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function __PRIVATE_queryWithAddedFilter(t,e){const r=t.filters.concat([e]);return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function __PRIVATE_queryWithLimit(t,e,r){return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function __PRIVATE_queryEquals(t,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(t),__PRIVATE_queryToTarget(e))&&t.limitType===e.limitType}function __PRIVATE_canonifyQuery(t){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(t))}|lt:${t.limitType}`}function __PRIVATE_stringifyQuery(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>__PRIVATE_stringifyFilter(a)).join(", ")}]`),__PRIVATE_isNullOrUndefined(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>canonicalId(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>canonicalId(a)).join(",")),`Target(${n})`}(__PRIVATE_queryToTarget(t))}; limitType=${t.limitType})`}function __PRIVATE_queryMatches(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):DocumentKey.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of __PRIVATE_queryNormalizedOrderBy(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(o,c,d){const m=__PRIVATE_boundCompareToDocument(o,c,d);return o.inclusive?m<=0:m<0}(n.startAt,__PRIVATE_queryNormalizedOrderBy(n),a)||n.endAt&&!function(o,c,d){const m=__PRIVATE_boundCompareToDocument(o,c,d);return o.inclusive?m>=0:m>0}(n.endAt,__PRIVATE_queryNormalizedOrderBy(n),a))}(t,e)}function __PRIVATE_queryCollectionGroup(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function __PRIVATE_newQueryComparator(t){return(e,r)=>{let n=!1;for(const a of __PRIVATE_queryNormalizedOrderBy(t)){const s=__PRIVATE_compareDocs(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(t,e,r){const n=t.field.isKeyField()?DocumentKey.comparator(e.key,r.key):function(s,o,c){const d=o.data.field(s),m=c.data.field(s);return d!==null&&m!==null?__PRIVATE_valueCompare(d,m):fail(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return fail(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt$1=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Rt$1}const Vt$1=new SortedMap(DocumentKey.comparator);function documentMap(...t){let e=Vt$1;for(const r of t)e=e.insert(r.key,r);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(t){let e=Vt$1;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(t=>t.toString(),(t,e)=>t.isEqual(e))}const mt$1=new SortedMap(DocumentKey.comparator),ft$1=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...t){let e=ft$1;for(const r of t)e=e.add(r);return e}const gt$1=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return gt$1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(t){return{integerValue:""+t}}function toNumber(t,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(t,e,r){return t instanceof __PRIVATE_ServerTimestampTransform?function(a,s){const o={fields:{[at$1]:{stringValue:_t$1},[ct$1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&__PRIVATE_isServerTimestamp(s)&&(s=__PRIVATE_getPreviousValue(s)),s&&(o.fields[ut$1]=s),{mapValue:o}}(r,e):t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):function(a,s){const o=__PRIVATE_computeTransformOperationBaseValue(a,s),c=asNumber(o)+asNumber(a.Ae);return isInteger(o)&&isInteger(a.Ae)?__PRIVATE_toInteger(c):__PRIVATE_toDouble(a.serializer,c)}(t,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(t,e,r){return t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):r}function __PRIVATE_computeTransformOperationBaseValue(t,e){return t instanceof __PRIVATE_NumericIncrementTransformOperation?function(n){return isInteger(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(t,e){const r=__PRIVATE_coercedFieldValuesArray(e);for(const n of t.elements)r.some(a=>__PRIVATE_valueEquals(a,n))||r.push(n);return{arrayValue:{values:r}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(t,e){let r=__PRIVATE_coercedFieldValuesArray(e);for(const n of t.elements)r=r.filter(a=>!__PRIVATE_valueEquals(a,n));return{arrayValue:{values:r}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function asNumber(t){return __PRIVATE_normalizeNumber(t.integerValue||t.doubleValue)}function __PRIVATE_coercedFieldValuesArray(t){return isArray(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof __PRIVATE_ArrayUnionTransformOperation&&a instanceof __PRIVATE_ArrayUnionTransformOperation||n instanceof __PRIVATE_ArrayRemoveTransformOperation&&a instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(n.elements,a.elements,__PRIVATE_valueEquals):n instanceof __PRIVATE_NumericIncrementTransformOperation&&a instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(n.Ae,a.Ae):n instanceof __PRIVATE_ServerTimestampTransform&&a instanceof __PRIVATE_ServerTimestampTransform}(t.transform,e.transform)}class MutationResult{constructor(e,r){this.version=e,this.transformResults=r}}class Precondition{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new __PRIVATE_DeleteMutation(t.key,Precondition.none()):new __PRIVATE_SetMutation(t.key,t.data,Precondition.none());{const r=t.data,n=ObjectValue.empty();let a=new SortedSet(FieldPath$1.comparator);for(let s of e.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new __PRIVATE_PatchMutation(t.key,n,new FieldMask(a.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(t,e,r){t instanceof __PRIVATE_SetMutation?function(a,s,o){const c=a.value.clone(),d=__PRIVATE_serverTransformResults(a.fieldTransforms,s,o.transformResults);c.setAll(d),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):t instanceof __PRIVATE_PatchMutation?function(a,s,o){if(!__PRIVATE_preconditionIsValidForDocument(a.precondition,s))return void s.convertToUnknownDocument(o.version);const c=__PRIVATE_serverTransformResults(a.fieldTransforms,s,o.transformResults),d=s.data;d.setAll(__PRIVATE_getPatch(a)),d.setAll(c),s.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(t,e,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function __PRIVATE_mutationApplyToLocalView(t,e,r,n){return t instanceof __PRIVATE_SetMutation?function(s,o,c,d){if(!__PRIVATE_preconditionIsValidForDocument(s.precondition,o))return c;const m=s.value.clone(),y=__PRIVATE_localTransformResults(s.fieldTransforms,d,o);return m.setAll(y),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),null}(t,e,r,n):t instanceof __PRIVATE_PatchMutation?function(s,o,c,d){if(!__PRIVATE_preconditionIsValidForDocument(s.precondition,o))return c;const m=__PRIVATE_localTransformResults(s.fieldTransforms,d,o),y=o.data;return y.setAll(__PRIVATE_getPatch(s)),y.setAll(m),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(t,e,r,n):function(s,o,c){return __PRIVATE_preconditionIsValidForDocument(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,r)}function __PRIVATE_mutationExtractBaseValue(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=__PRIVATE_computeTransformOperationBaseValue(n.transform,a||null);s!=null&&(r===null&&(r=ObjectValue.empty()),r.set(n.field,s))}return r||null}function __PRIVATE_mutationEquals(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&__PRIVATE_arrayEquals(n,a,(s,o)=>__PRIVATE_fieldTransformEquals(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function __PRIVATE_serverTransformResults(t,e,r){const n=new Map;__PRIVATE_hardAssert(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const s=t[a],o=s.transform,c=e.data.field(s.field);n.set(s.field,__PRIVATE_applyTransformOperationToRemoteDocument(o,c,r[a]))}return n}function __PRIVATE_localTransformResults(t,e,r){const n=new Map;for(const a of t){const s=a.transform,o=r.data.field(a.field);n.set(a.field,__PRIVATE_applyTransformOperationToLocalView(s,o,e))}return n}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=__PRIVATE_mutationApplyToLocalView(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=__PRIVATE_mutationApplyToLocalView(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=__PRIVATE_newMutationMap();return this.mutations.forEach(a=>{const s=e.get(a.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=r.has(a.key)?null:c;const d=__PRIVATE_calculateOverlayMutation(o,c);d!==null&&n.set(a.key,d),o.isValidDocument()||o.convertToNoDocument(SnapshotVersion.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(r,n)=>__PRIVATE_mutationEquals(r,n))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(r,n)=>__PRIVATE_mutationEquals(r,n))}}class MutationBatchResult{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){__PRIVATE_hardAssert(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return mt$1}();const s=e.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new MutationBatchResult(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AggregateImpl{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt$1,yt$1;function __PRIVATE_isPermanentError(t){switch(t){case N$1.OK:return fail(64938);case N$1.CANCELLED:case N$1.UNKNOWN:case N$1.DEADLINE_EXCEEDED:case N$1.RESOURCE_EXHAUSTED:case N$1.INTERNAL:case N$1.UNAVAILABLE:case N$1.UNAUTHENTICATED:return!1;case N$1.INVALID_ARGUMENT:case N$1.NOT_FOUND:case N$1.ALREADY_EXISTS:case N$1.PERMISSION_DENIED:case N$1.FAILED_PRECONDITION:case N$1.ABORTED:case N$1.OUT_OF_RANGE:case N$1.UNIMPLEMENTED:case N$1.DATA_LOSS:return!0;default:return fail(15467,{code:t})}}function __PRIVATE_mapCodeFromRpcCode(t){if(t===void 0)return __PRIVATE_logError("GRPC error has no .code"),N$1.UNKNOWN;switch(t){case pt$1.OK:return N$1.OK;case pt$1.CANCELLED:return N$1.CANCELLED;case pt$1.UNKNOWN:return N$1.UNKNOWN;case pt$1.DEADLINE_EXCEEDED:return N$1.DEADLINE_EXCEEDED;case pt$1.RESOURCE_EXHAUSTED:return N$1.RESOURCE_EXHAUSTED;case pt$1.INTERNAL:return N$1.INTERNAL;case pt$1.UNAVAILABLE:return N$1.UNAVAILABLE;case pt$1.UNAUTHENTICATED:return N$1.UNAUTHENTICATED;case pt$1.INVALID_ARGUMENT:return N$1.INVALID_ARGUMENT;case pt$1.NOT_FOUND:return N$1.NOT_FOUND;case pt$1.ALREADY_EXISTS:return N$1.ALREADY_EXISTS;case pt$1.PERMISSION_DENIED:return N$1.PERMISSION_DENIED;case pt$1.FAILED_PRECONDITION:return N$1.FAILED_PRECONDITION;case pt$1.ABORTED:return N$1.ABORTED;case pt$1.OUT_OF_RANGE:return N$1.OUT_OF_RANGE;case pt$1.UNIMPLEMENTED:return N$1.UNIMPLEMENTED;case pt$1.DATA_LOSS:return N$1.DATA_LOSS;default:return fail(39323,{code:t})}}(yt$1=pt$1||(pt$1={}))[yt$1.OK=0]="OK",yt$1[yt$1.CANCELLED=1]="CANCELLED",yt$1[yt$1.UNKNOWN=2]="UNKNOWN",yt$1[yt$1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt$1[yt$1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt$1[yt$1.NOT_FOUND=5]="NOT_FOUND",yt$1[yt$1.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt$1[yt$1.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt$1[yt$1.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt$1[yt$1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt$1[yt$1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt$1[yt$1.ABORTED=10]="ABORTED",yt$1[yt$1.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt$1[yt$1.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt$1[yt$1.INTERNAL=13]="INTERNAL",yt$1[yt$1.UNAVAILABLE=14]="UNAVAILABLE",yt$1[yt$1.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St$1=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(t){const e=__PRIVATE_newTextEncoder().encode(t),r=new Md5;return r.update(e),new Uint8Array(r.digest())}function __PRIVATE_get64BitUints(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Integer([r,n],0),new Integer([a,s],0)]}class BloomFilter{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${r}`);if(n<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Integer.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(Integer.fromNumber(n)));return a.compare(St$1)===1&&(a=new Integer([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=__PRIVATE_getMd5HashValue(e),[n,a]=__PRIVATE_get64BitUints(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);if(!this.we(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new BloomFilter(s,a,r);return n.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const r=__PRIVATE_getMd5HashValue(e),[n,a]=__PRIVATE_get64BitUints(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new RemoteEvent(SnapshotVersion.min(),a,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new TargetChange(n,r,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class __PRIVATE_ExistenceFilterChange{constructor(e,r){this.targetId=e,this.Ce=r}}class __PRIVATE_WatchTargetChange{constructor(e,r,n=ByteString.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Fe=__PRIVATE_snapshotChangesMap(),this.Me=ByteString.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=__PRIVATE_documentKeySet(),r=__PRIVATE_documentKeySet(),n=__PRIVATE_documentKeySet();return this.Fe.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:fail(38017,{changeType:s})}}),new TargetChange(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=__PRIVATE_snapshotChangesMap()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.Ge=e,this.ze=new Map,this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:fail(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const s=a.target;if(__PRIVATE_targetIsDocumentTarget(s))if(n===0){const o=new DocumentKey(s.path);this.et(r,o,MutableDocument.newNoDocument(o,SnapshotVersion.min()))}else __PRIVATE_hardAssert(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const c=this.ut(e),d=c?this.ct(c,e,o):1;if(d!==0){this.it(r);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,m)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,c;try{o=__PRIVATE_normalizeByteString(n).toUint8Array()}catch(d){if(d instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new BloomFilter(o,a,s)}catch(d){return __PRIVATE_logWarn(d instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.ge===0?null:c}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.et(r,s,null),a++)}),a}Tt(e){const r=new Map;this.ze.forEach((s,o)=>{const c=this.ot(o);if(c){if(s.current&&__PRIVATE_targetIsDocumentTarget(c.target)){const d=new DocumentKey(c.target.path);this.It(d).has(o)||this.Et(o,d)||this.et(o,d,MutableDocument.newNoDocument(d,e))}s.Be&&(r.set(o,s.ke()),s.qe())}});let n=__PRIVATE_documentKeySet();this.He.forEach((s,o)=>{let c=!0;o.forEachWhile(d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const a=new RemoteEvent(e,r,this.Ye,this.je,n);return this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new __PRIVATE_TargetState,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new SortedSet(__PRIVATE_primitiveComparator),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new __PRIVATE_TargetState),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const bt$1={asc:"ASCENDING",desc:"DESCENDING"},Dt$1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ct$1={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function __PRIVATE_toInt32Proto(t,e){return t.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(t,e){return toTimestamp(t,e.toTimestamp())}function __PRIVATE_fromVersion(t){return __PRIVATE_hardAssert(!!t,49232),SnapshotVersion.fromTimestamp(function(r){const n=__PRIVATE_normalizeTimestamp(r);return new Timestamp(n.seconds,n.nanos)}(t))}function __PRIVATE_toResourceName(t,e){return __PRIVATE_toResourcePath(t,e).canonicalString()}function __PRIVATE_toResourcePath(t,e){const r=function(a){return new ResourcePath(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function __PRIVATE_fromResourceName(t){const e=ResourcePath.fromString(t);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(t,e){return __PRIVATE_toResourceName(t.databaseId,e.path)}function fromName(t,e){const r=__PRIVATE_fromResourceName(e);if(r.get(1)!==t.databaseId.projectId)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(r))}function __PRIVATE_toQueryPath(t,e){return __PRIVATE_toResourceName(t.databaseId,e)}function __PRIVATE_fromQueryPath(t){const e=__PRIVATE_fromResourceName(t);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(t){return new ResourcePath(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(t){return __PRIVATE_hardAssert(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function __PRIVATE_toMutationDocument(t,e,r){return{name:__PRIVATE_toName(t,e),fields:r.value.mapValue.fields}}function __PRIVATE_fromWatchChange(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:fail(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(m,y){return m.useProto3Json?(__PRIVATE_hardAssert(y===void 0||typeof y=="string",58123),ByteString.fromBase64String(y||"")):(__PRIVATE_hardAssert(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),ByteString.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(m){const y=m.code===void 0?N$1.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(m.code);return new FirestoreError(y,m.message||"")}(o);r=new __PRIVATE_WatchTargetChange(n,a,s,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=fromName(t,n.document.name),s=__PRIVATE_fromVersion(n.document.updateTime),o=n.document.createTime?__PRIVATE_fromVersion(n.document.createTime):SnapshotVersion.min(),c=new ObjectValue({mapValue:{fields:n.document.fields}}),d=MutableDocument.newFoundDocument(a,s,o,c),m=n.targetIds||[],y=n.removedTargetIds||[];r=new __PRIVATE_DocumentWatchChange(m,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=fromName(t,n.document),s=n.readTime?__PRIVATE_fromVersion(n.readTime):SnapshotVersion.min(),o=MutableDocument.newNoDocument(a,s),c=n.removedTargetIds||[];r=new __PRIVATE_DocumentWatchChange([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=fromName(t,n.document),s=n.removedTargetIds||[];r=new __PRIVATE_DocumentWatchChange([],s,a,null)}else{if(!("filter"in e))return fail(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new ExistenceFilter(a,s),c=n.targetId;r=new __PRIVATE_ExistenceFilterChange(c,o)}}return r}function toMutation(t,e){let r;if(e instanceof __PRIVATE_SetMutation)r={update:__PRIVATE_toMutationDocument(t,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)r={delete:__PRIVATE_toName(t,e.key)};else if(e instanceof __PRIVATE_PatchMutation)r={update:__PRIVATE_toMutationDocument(t,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{Vt:e.type});r={verify:__PRIVATE_toName(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const c=o.transform;if(c instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw fail(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fail(27497)}(t,e.precondition)),r}function __PRIVATE_fromWriteResults(t,e){return t&&t.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),t.map(r=>function(a,s){let o=a.updateTime?__PRIVATE_fromVersion(a.updateTime):__PRIVATE_fromVersion(s);return o.isEqual(SnapshotVersion.min())&&(o=__PRIVATE_fromVersion(s)),new MutationResult(o,a.transformResults||[])}(r,e))):[]}function __PRIVATE_toDocumentsTarget(t,e){return{documents:[__PRIVATE_toQueryPath(t,e.path)]}}function __PRIVATE_toQueryTarget(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=__PRIVATE_toQueryPath(t,a);const s=function(m){if(m.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(m,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const o=function(m){if(m.length!==0)return m.map(y=>function(P){return{field:__PRIVATE_toFieldPathReference(P.field),direction:__PRIVATE_toDirection(P.dir)}}(y))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=__PRIVATE_toInt32Proto(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ft:r,parent:a}}function __PRIVATE_toRunAggregationQueryRequest(t,e,r,n){const{ft:a,parent:s}=__PRIVATE_toQueryTarget(t,e),o={},c=[];let d=0;return r.forEach(m=>{const y="aggregate_"+d++;o[y]=m.alias,m.aggregateType==="count"?c.push({alias:y,count:{}}):m.aggregateType==="avg"?c.push({alias:y,avg:{field:__PRIVATE_toFieldPathReference(m.fieldPath)}}):m.aggregateType==="sum"&&c.push({alias:y,sum:{field:__PRIVATE_toFieldPathReference(m.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:c,structuredQuery:a.structuredQuery},parent:a.parent},gt:o,parent:s}}function __PRIVATE_convertQueryTargetToQuery(t){let e=__PRIVATE_fromQueryPath(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){__PRIVATE_hardAssert(n===1,65062);const y=r.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let s=[];r.where&&(s=function(A){const P=__PRIVATE_fromFilter(A);return P instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(P)?P.getFilters():[P]}(r.where));let o=[];r.orderBy&&(o=function(A){return A.map(P=>function(me){return new OrderBy(__PRIVATE_fromFieldPathReference(me.field),function(Ge){switch(Ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(me.direction))}(P))}(r.orderBy));let c=null;r.limit&&(c=function(A){let P;return P=typeof A=="object"?A.value:A,__PRIVATE_isNullOrUndefined(P)?null:P}(r.limit));let d=null;r.startAt&&(d=function(A){const P=!!A.before,Z=A.values||[];return new Bound(Z,P)}(r.startAt));let m=null;return r.endAt&&(m=function(A){const P=!A.before,Z=A.values||[];return new Bound(Z,P)}(r.endAt)),__PRIVATE_newQuery(e,a,o,s,c,"F",d,m)}function __PRIVATE_toListenRequestLabels(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:a})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function __PRIVATE_fromFilter(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(t):t.fieldFilter!==void 0?function(r){return FieldFilter.create(__PRIVATE_fromFieldPathReference(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return CompositeFilter.create(r.compositeFilter.filters.map(n=>__PRIVATE_fromFilter(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(r.compositeFilter.op))}(t):fail(30097,{filter:t})}function __PRIVATE_toDirection(t){return bt$1[t]}function __PRIVATE_toOperatorName(t){return Dt$1[t]}function __PRIVATE_toCompositeOperatorName(t){return Ct$1[t]}function __PRIVATE_toFieldPathReference(t){return{fieldPath:t.canonicalString()}}function __PRIVATE_fromFieldPathReference(t){return FieldPath$1.fromServerFormat(t.fieldPath)}function __PRIVATE_toFilter(t){return t instanceof FieldFilter?function(r){if(r.op==="=="){if(__PRIVATE_isNanValue(r.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(r.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(r.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(__PRIVATE_isNanValue(r.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(r.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(r.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(r.field),op:__PRIVATE_toOperatorName(r.op),value:r.value}}}(t):t instanceof CompositeFilter?function(r){const n=r.getFilters().map(a=>__PRIVATE_toFilter(a));return n.length===1?n[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(r.op),filters:n}}}(t):fail(54877,{filter:t})}function __PRIVATE_toDocumentMask(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,r,n,a,s=SnapshotVersion.min(),o=SnapshotVersion.min(),c=ByteString.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.yt=e}}function __PRIVATE_fromBundledQuery(t){const e=__PRIVATE_convertQueryTargetToQuery({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,r){return this.Cn.add(r),PersistencePromise.resolve()}getCollectionParents(e,r){return PersistencePromise.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return PersistencePromise.resolve()}deleteFieldIndex(e,r){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,r){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,r){return PersistencePromise.resolve(null)}getIndexType(e,r){return PersistencePromise.resolve(0)}getFieldIndexes(e,r){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,r){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,r){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,r,n){return PersistencePromise.resolve()}updateIndexEntries(e,r){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new SortedSet(ResourcePath.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt$1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ot$1=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Ot$1,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new __PRIVATE_TargetIdGenerator(0)}static cr(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt$1="LruGarbageCollector",Bt$1=1048576;function __PRIVATE_bufferEntryComparator([t,e],[r,n]){const a=__PRIVATE_primitiveComparator(t,r);return a===0?__PRIVATE_primitiveComparator(e,n):a}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Ir=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();__PRIVATE_bufferEntryComparator(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){__PRIVATE_logDebug(Nt$1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){__PRIVATE_isIndexedDbTransactionError(r)?__PRIVATE_logDebug(Nt$1,"Ignoring IndexedDB error during garbage collection: ",r):await __PRIVATE_ignoreIfPrimaryLeaseLoss(r)}await this.Vr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ce);const n=new __PRIVATE_RollingSequenceNumberBuffer(r);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(xt$1)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xt$1):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,s,o,c,d,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),a=this.params.maximumSequenceNumbersToCollect):a=A,o=Date.now(),this.nthSequenceNumber(e,a))).next(A=>(n=A,c=Date.now(),this.removeTargets(e,n,r))).next(A=>(s=A,d=Date.now(),this.removeOrphanedDocuments(e,n))).next(A=>(m=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-y}ms
	Determined least recently used ${a} in `+(c-o)+`ms
	Removed ${s} targets in `+(d-c)+`ms
	Removed ${A} documents in `+(m-d)+`ms
Total Duration: ${m-y}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:A})))}}function __PRIVATE_newLruGarbageCollector(t,e){return new __PRIVATE_LruGarbageCollectorImpl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?PersistencePromise.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&__PRIVATE_mutationApplyToLocalView(n.mutation,a,FieldMask.empty(),Timestamp.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,__PRIVATE_documentKeySet()).next(()=>n))}getLocalViewOfDocuments(e,r,n=__PRIVATE_documentKeySet()){const a=__PRIVATE_newOverlayMap();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let o=documentMap();return s.forEach((c,d)=>{o=o.insert(c,d.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=__PRIVATE_newOverlayMap();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,__PRIVATE_documentKeySet()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((o,c)=>{r.set(o,c)})})}computeViews(e,r,n,a){let s=__PRIVATE_mutableDocumentMap();const o=__PRIVATE_newDocumentKeyMap(),c=function(){return __PRIVATE_newDocumentKeyMap()}();return r.forEach((d,m)=>{const y=n.get(m.key);a.has(m.key)&&(y===void 0||y.mutation instanceof __PRIVATE_PatchMutation)?s=s.insert(m.key,m):y!==void 0?(o.set(m.key,y.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(y.mutation,m,y.mutation.getFieldMask(),Timestamp.now())):o.set(m.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,s).next(d=>(d.forEach((m,y)=>o.set(m,y)),r.forEach((m,y)=>c.set(m,new OverlayedDocument(y,o.get(m)??null))),c))}recalculateAndSaveOverlays(e,r){const n=__PRIVATE_newDocumentKeyMap();let a=new SortedMap((o,c)=>o-c),s=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const c of o)c.keys().forEach(d=>{const m=r.get(d);if(m===null)return;let y=n.get(d)||FieldMask.empty();y=c.applyToLocalView(m,y),n.set(d,y);const A=(a.get(c.batchId)||__PRIVATE_documentKeySet()).add(d);a=a.insert(c.batchId,A)})}).next(()=>{const o=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),m=d.key,y=d.value,A=__PRIVATE_newMutationMap();y.forEach(P=>{if(!s.has(P)){const Z=__PRIVATE_calculateOverlayMutation(r.get(P),n.get(P));Z!==null&&A.set(P,Z),s=s.add(P)}}),o.push(this.documentOverlayCache.saveOverlays(e,m,A))}return PersistencePromise.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(o){return DocumentKey.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):__PRIVATE_isCollectionGroupQuery(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let c=U$1,d=s;return o.next(m=>PersistencePromise.forEach(m,(y,A)=>(c<A.largestBatchId&&(c=A.largestBatchId),s.get(y)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,y).next(P=>{d=d.insert(y,P)}))).next(()=>this.populateOverlays(e,m,s)).next(()=>this.computeViews(e,d,m,__PRIVATE_documentKeySet())).next(y=>({batchId:c,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(y)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new DocumentKey(r)).next(n=>{let a=documentMap();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let o=documentMap();return this.indexManager.getCollectionParents(e,s).next(c=>PersistencePromise.forEach(c,d=>{const m=function(A,P){return new __PRIVATE_QueryImpl(P,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(r,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,m,n,a).next(y=>{y.forEach((A,P)=>{o=o.insert(A,P)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(o=>{s.forEach((d,m)=>{const y=m.getKey();o.get(y)===null&&(o=o.insert(y,MutableDocument.newInvalidDocument(y)))});let c=documentMap();return o.forEach((d,m)=>{const y=s.get(d);y!==void 0&&__PRIVATE_mutationApplyToLocalView(y.mutation,m,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(r,m)&&(c=c.insert(d,m))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return PersistencePromise.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:__PRIVATE_fromVersion(a.createTime)}}(r)),PersistencePromise.resolve()}getNamedQuery(e,r){return PersistencePromise.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(a){return{name:a.name,query:__PRIVATE_fromBundledQuery(a.bundledQuery),readTime:__PRIVATE_fromVersion(a.readTime)}}(r)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.qr=new Map}getOverlay(e,r){return PersistencePromise.resolve(this.overlays.get(r))}getOverlays(e,r){const n=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.St(e,r,s)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),PersistencePromise.resolve()}getOverlaysForCollection(e,r,n){const a=__PRIVATE_newOverlayMap(),s=r.length+1,o=new DocumentKey(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,m=d.getKey();if(!r.isPrefixOf(m.path))break;m.path.length===s&&d.largestBatchId>n&&a.set(d.getKey(),d)}return PersistencePromise.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new SortedMap((m,y)=>m-y);const o=this.overlays.getIterator();for(;o.hasNext();){const m=o.getNext().value;if(m.getKey().getCollectionGroup()===r&&m.largestBatchId>n){let y=s.get(m.largestBatchId);y===null&&(y=__PRIVATE_newOverlayMap(),s=s.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const c=__PRIVATE_newOverlayMap(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,y)=>c.set(m,y)),!(c.size()>=a)););return PersistencePromise.resolve(c)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new Overlay(r,n));let s=this.qr.get(r);s===void 0&&(s=__PRIVATE_documentKeySet(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Qr=new SortedSet(__PRIVATE_DocReference.$r),this.Ur=new SortedSet(__PRIVATE_DocReference.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new __PRIVATE_DocReference(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new __PRIVATE_DocReference(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new DocumentKey(new ResourcePath([])),n=new __PRIVATE_DocReference(r,e),a=new __PRIVATE_DocReference(r,e+1),s=[];return this.Ur.forEachInRange([n,a],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new DocumentKey(new ResourcePath([])),n=new __PRIVATE_DocReference(r,e),a=new __PRIVATE_DocReference(r,e+1);let s=__PRIVATE_documentKeySet();return this.Ur.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(e){const r=new __PRIVATE_DocReference(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class __PRIVATE_DocReference{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return DocumentKey.comparator(e.key,r.key)||__PRIVATE_primitiveComparator(e.Yr,r.Yr)}static Kr(e,r){return __PRIVATE_primitiveComparator(e.Yr,r.Yr)||DocumentKey.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new SortedSet(__PRIVATE_DocReference.$r)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MutationBatch(s,r,n,a);this.mutationQueue.push(o);for(const c of a)this.Zr=this.Zr.add(new __PRIVATE_DocReference(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return PersistencePromise.resolve(o)}lookupMutationBatch(e,r){return PersistencePromise.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return PersistencePromise.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?j$1:this.tr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new __PRIVATE_DocReference(r,0),a=new __PRIVATE_DocReference(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],o=>{const c=this.Xr(o.Yr);s.push(c)}),PersistencePromise.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new SortedSet(__PRIVATE_primitiveComparator);return r.forEach(a=>{const s=new __PRIVATE_DocReference(a,0),o=new __PRIVATE_DocReference(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],c=>{n=n.add(c.Yr)})}),PersistencePromise.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;DocumentKey.isDocumentKey(s)||(s=s.child(""));const o=new __PRIVATE_DocReference(new DocumentKey(s),0);let c=new SortedSet(__PRIVATE_primitiveComparator);return this.Zr.forEachWhile(d=>{const m=d.key.path;return!!n.isPrefixOf(m)&&(m.length===a&&(c=c.add(d.Yr)),!0)},o),PersistencePromise.resolve(this.ti(c))}ti(e){const r=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){__PRIVATE_hardAssert(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return PersistencePromise.forEach(r.mutations,a=>{const s=new __PRIVATE_DocReference(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new __PRIVATE_DocReference(r,0),a=this.Zr.firstAfterOrEqual(n);return PersistencePromise.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ri=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return PersistencePromise.resolve(n?n.document.mutableCopy():MutableDocument.newInvalidDocument(r))}getEntries(e,r){let n=__PRIVATE_mutableDocumentMap();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():MutableDocument.newInvalidDocument(a))}),PersistencePromise.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=__PRIVATE_mutableDocumentMap();const o=r.path,c=new DocumentKey(o.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:m,value:{document:y}}=d.getNext();if(!o.isPrefixOf(m.path))break;m.path.length>o.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(y),n)<=0||(a.has(y.key)||__PRIVATE_queryMatches(r,y))&&(s=s.insert(y.key,y.mutableCopy()))}return PersistencePromise.resolve(s)}getAllFromCollectionGroup(e,r,n,a){fail(9500)}ii(e,r){return PersistencePromise.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),PersistencePromise.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.si=new ObjectMap(r=>__PRIVATE_canonifyTarget(r),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.oi=0,this._i=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ai=__PRIVATE_TargetIdGenerator.ur()}forEachTarget(e,r){return this.si.forEach((n,a)=>r(a)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),PersistencePromise.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new __PRIVATE_TargetIdGenerator(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,r){return this.Pr(r),PersistencePromise.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)}),PersistencePromise.waitFor(s).next(()=>a)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return PersistencePromise.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),PersistencePromise.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(e,o))}),PersistencePromise.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return PersistencePromise.resolve(n)}containsKey(e,r){return PersistencePromise.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,r){this.ui={},this.overlays={},this.ci=new __PRIVATE_ListenSequence(0),this.li=!1,this.li=!0,this.hi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Pi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(a){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new __PRIVATE_LocalSerializer(r),this.Ii=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new __PRIVATE_MemoryMutationQueue(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const a=new __PRIVATE_MemoryTransaction(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(e,r){return PersistencePromise.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ri=new __PRIVATE_ReferenceSet,this.Vi=null}static mi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get fi(){if(this.Vi)return this.Vi;throw fail(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),PersistencePromise.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),PersistencePromise.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.fi,n=>{const a=DocumentKey.fromPath(n);return this.gi(e,a).next(s=>{s||r.removeEntry(a,SnapshotVersion.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,r){this.persistence=e,this.pi=new ObjectMap(n=>__PRIVATE_encodeResourcePath(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,r)}static mi(e,r){return new __PRIVATE_MemoryLruDelegate(e,r)}Ei(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return PersistencePromise.forEach(this.pi,(n,a)=>this.br(e,n,a).next(s=>s?PersistencePromise.resolve():r(a)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(e,o=>this.br(e,o,r).next(c=>{c||(n++,s.removeEntry(o,SnapshotVersion.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),PersistencePromise.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=__PRIVATE_estimateByteSize(e.data.value)),r}br(e,r,n){return PersistencePromise.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return PersistencePromise.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new __PRIVATE_LocalViewChanges(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.ys(e,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new QueryContext;return this.Ss(e,r,o).next(c=>{if(s.result=c,this.Vs)return this.bs(e,r,o,c.size)})}).next(()=>s.result)}bs(e,r,n,a){return n.documentReadCount<this.fs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(r))):PersistencePromise.resolve())}ys(e,r){if(__PRIVATE_queryMatchesAllDocuments(r))return PersistencePromise.resolve(null);let n=__PRIVATE_queryToTarget(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=__PRIVATE_queryWithLimit(r,null,"F"),n=__PRIVATE_queryToTarget(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=__PRIVATE_documentKeySet(...s);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,n).next(d=>{const m=this.Ds(r,c);return this.Cs(r,m,o,d.readTime)?this.ys(e,__PRIVATE_queryWithLimit(r,null,"F")):this.vs(e,m,r,d)}))})))}ws(e,r,n,a){return __PRIVATE_queryMatchesAllDocuments(r)||a.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ps.getDocuments(e,n).next(s=>{const o=this.Ds(r,s);return this.Cs(r,o,n,a)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),__PRIVATE_stringifyQuery(r)),this.vs(e,o,r,__PRIVATE_newIndexOffsetSuccessorFromReadTime(a,U$1)).next(c=>c))})}Ds(e,r){let n=new SortedSet(__PRIVATE_newQueryComparator(e));return r.forEach((a,s)=>{__PRIVATE_queryMatches(e,s)&&(n=n.add(s))}),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(e,r,n){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(r)),this.ps.getDocumentsMatchingQuery(e,r,IndexOffset.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut$1="LocalStore",Kt$1=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new SortedMap(__PRIVATE_primitiveComparator),this.xs=new ObjectMap(s=>__PRIVATE_canonifyTarget(s),__PRIVATE_targetEquals),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function __PRIVATE_newLocalStore(t,e,r,n){return new __PRIVATE_LocalStoreImpl(t,e,r,n)}async function __PRIVATE_localStoreHandleUserChange(t,e){const r=__PRIVATE_debugCast(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],c=[];let d=__PRIVATE_documentKeySet();for(const m of a){o.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}for(const m of s){c.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}return r.localDocuments.getDocuments(n,d).next(m=>({Ls:m,removedBatchIds:o,addedBatchIds:c}))})})}function __PRIVATE_localStoreAcknowledgeBatch(t,e){const r=__PRIVATE_debugCast(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(c,d,m,y){const A=m.batch,P=A.keys();let Z=PersistencePromise.resolve();return P.forEach(me=>{Z=Z.next(()=>y.getEntry(d,me)).next(_e=>{const Ge=m.docVersions.get(me);__PRIVATE_hardAssert(Ge!==null,48541),_e.version.compareTo(Ge)<0&&(A.applyToRemoteDocument(_e,m),_e.isValidDocument()&&(_e.setReadTime(m.commitVersion),y.addEntry(_e)))})}),Z.next(()=>c.mutationQueue.removeMutationBatch(d,A))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let d=__PRIVATE_documentKeySet();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(d=d.add(c.batch.mutations[m].key));return d}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t){const e=__PRIVATE_debugCast(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(t,e){const r=__PRIVATE_debugCast(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const c=[];e.targetChanges.forEach((y,A)=>{const P=a.get(A);if(!P)return;c.push(r.Pi.removeMatchingKeys(s,y.removedDocuments,A).next(()=>r.Pi.addMatchingKeys(s,y.addedDocuments,A)));let Z=P.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(A)!==null?Z=Z.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):y.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(y.resumeToken,n)),a=a.insert(A,Z),function(_e,Ge,ve){return _e.resumeToken.approximateByteSize()===0||Ge.snapshotVersion.toMicroseconds()-_e.snapshotVersion.toMicroseconds()>=Kt$1?!0:ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0}(P,Z,y)&&c.push(r.Pi.updateTargetData(s,Z))});let d=__PRIVATE_mutableDocumentMap(),m=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(s,y))}),c.push(__PRIVATE_populateDocumentChangeBuffer(s,o,e.documentUpdates).next(y=>{d=y.ks,m=y.qs})),!n.isEqual(SnapshotVersion.min())){const y=r.Pi.getLastRemoteSnapshotVersion(s).next(A=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));c.push(y)}return PersistencePromise.waitFor(c).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,d,m)).next(()=>d)}).then(s=>(r.Ms=a,s))}function __PRIVATE_populateDocumentChangeBuffer(t,e,r){let n=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let o=__PRIVATE_mutableDocumentMap();return r.forEach((c,d)=>{const m=s.get(c);d.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(SnapshotVersion.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):__PRIVATE_logDebug(Ut$1,"Ignoring outdated watch update for ",c,". Current version:",m.version," Watch version:",d.version)}),{ks:o,qs:a}})}function __PRIVATE_localStoreGetNextMutationBatch(t,e){const r=__PRIVATE_debugCast(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=j$1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function __PRIVATE_localStoreAllocateTarget(t,e){const r=__PRIVATE_debugCast(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,e).next(s=>s?(a=s,PersistencePromise.resolve(a)):r.Pi.allocateTargetId(n).next(o=>(a=new TargetData(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function __PRIVATE_localStoreReleaseTarget(t,e,r){const n=__PRIVATE_debugCast(t),a=n.Ms.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!__PRIVATE_isIndexedDbTransactionError(o))throw o;__PRIVATE_logDebug(Ut$1,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function __PRIVATE_localStoreExecuteQuery(t,e,r){const n=__PRIVATE_debugCast(t);let a=SnapshotVersion.min(),s=__PRIVATE_documentKeySet();return n.persistence.runTransaction("Execute query","readwrite",o=>function(d,m,y){const A=__PRIVATE_debugCast(d),P=A.xs.get(y);return P!==void 0?PersistencePromise.resolve(A.Ms.get(P)):A.Pi.getTargetData(m,y)}(n,o,__PRIVATE_queryToTarget(e)).next(c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,c.targetId).next(d=>{s=d})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,e,r?a:SnapshotVersion.min(),r?s:__PRIVATE_documentKeySet())).next(c=>(__PRIVATE_setMaxReadTime(n,__PRIVATE_queryCollectionGroup(e),c),{documents:c,Qs:s})))}function __PRIVATE_setMaxReadTime(t,e,r){let n=t.Os.get(e)||SnapshotVersion.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Os.set(e,n)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Mo=new __PRIVATE_LocalClientState,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt$1="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){__PRIVATE_logDebug(Jt$1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){__PRIVATE_logDebug(Jt$1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht$1=null;function __PRIVATE_generateUniqueDebugId(){return Ht$1===null?Ht$1=function(){return 268435456+Math.round(2147483648*Math.random())}():Ht$1++,"0x"+Ht$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt$1="RestConnection",Zt$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===lt$1?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,s){const o=__PRIVATE_generateUniqueDebugId(),c=this.zo(e,r.toUriEncodedString());__PRIVATE_logDebug(Yt$1,`Sending RPC '${e}' ${o}:`,c,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,a,s);const{host:m}=new URL(c),y=isCloudWorkstation(m);return this.Jo(e,c,d,n,y).then(A=>(__PRIVATE_logDebug(Yt$1,`Received RPC '${e}' ${o}: `,A),A),A=>{throw __PRIVATE_logWarn(Yt$1,`RPC '${e}' ${o} failed with error: `,A,"url: ",c,"request:",n),A})}Ho(e,r,n,a,s,o){return this.Go(e,r,n,a,s)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>e[s]=a),n&&n.headers.forEach((a,s)=>e[s]=a)}zo(e,r){const n=Zt$1[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt$1="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,s){const o=__PRIVATE_generateUniqueDebugId();return new Promise((c,d)=>{const m=new XhrIo;m.setWithCredentials(!0),m.listenOnce(EventType.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case ErrorCode.NO_ERROR:const A=m.getResponseJson();__PRIVATE_logDebug(Xt$1,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(A)),c(A);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${o} timed out`),d(new FirestoreError(N$1.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const P=m.getStatus();if(__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${o} failed with status:`,P,"response text:",m.getResponseText()),P>0){let Z=m.getResponseJson();Array.isArray(Z)&&(Z=Z[0]);const me=Z?.error;if(me&&me.status&&me.message){const _e=function(ve){const He=ve.toLowerCase().replace(/_/g,"-");return Object.values(N$1).indexOf(He)>=0?He:N$1.UNKNOWN}(me.status);d(new FirestoreError(_e,me.message))}else d(new FirestoreError(N$1.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new FirestoreError(N$1.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{l_:e,streamId:o,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${o} completed.`)}});const y=JSON.stringify(a);__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${o} sending request:`,a),m.send(r,"POST",y,n,15)})}T_(e,r,n){const a=__PRIVATE_generateUniqueDebugId(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=createWebChannelTransport(),c=getStatEventTarget(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const y=s.join("");__PRIVATE_logDebug(Xt$1,`Creating RPC '${e}' stream ${a}: ${y}`,d);const A=o.createWebChannel(y,d);this.I_(A);let P=!1,Z=!1;const me=new __PRIVATE_StreamBridge({Yo:Ge=>{Z?__PRIVATE_logDebug(Xt$1,`Not sending because RPC '${e}' stream ${a} is closed:`,Ge):(P||(__PRIVATE_logDebug(Xt$1,`Opening RPC '${e}' stream ${a} transport.`),A.open(),P=!0),__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} sending:`,Ge),A.send(Ge))},Zo:()=>A.close()}),_e=(Ge,ve,He)=>{Ge.listen(ve,De=>{try{He(De)}catch(Xe){setTimeout(()=>{throw Xe},0)}})};return _e(A,WebChannel.EventType.OPEN,()=>{Z||(__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} transport opened.`),me.o_())}),_e(A,WebChannel.EventType.CLOSE,()=>{Z||(Z=!0,__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} transport closed`),me.a_(),this.E_(A))}),_e(A,WebChannel.EventType.ERROR,Ge=>{Z||(Z=!0,__PRIVATE_logWarn(Xt$1,`RPC '${e}' stream ${a} transport errored. Name:`,Ge.name,"Message:",Ge.message),me.a_(new FirestoreError(N$1.UNAVAILABLE,"The operation could not be completed")))}),_e(A,WebChannel.EventType.MESSAGE,Ge=>{if(!Z){const ve=Ge.data[0];__PRIVATE_hardAssert(!!ve,16349);const He=ve,De=He?.error||He[0]?.error;if(De){__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} received error:`,De);const Xe=De.status;let Bs=function(An){const Os=pt$1[An];if(Os!==void 0)return __PRIVATE_mapCodeFromRpcCode(Os)}(Xe),wt=De.message;Bs===void 0&&(Bs=N$1.INTERNAL,wt="Unknown error status: "+Xe+" with message "+De.message),Z=!0,me.a_(new FirestoreError(Bs,wt)),A.close()}else __PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} received:`,ve),me.u_(ve)}}),_e(c,Event$1.STAT_EVENT,Ge=>{Ge.stat===Stat.PROXY?__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} detected buffering proxy`):Ge.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{me.__()},0),me}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(t){return new JsonProtoSerializer(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,r,n=1e3,a=1.5,s=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en$1="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,r,n,a,s,o,c,d){this.Mi=e,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new __PRIVATE_ExponentialBackoff(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===N$1.RESOURCE_EXHAUSTED?(__PRIVATE_logError(r.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===N$1.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{e(()=>{const a=new FirestoreError(N$1.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return __PRIVATE_logDebug(en$1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(__PRIVATE_logDebug(en$1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,r,n,a,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=__PRIVATE_fromWatchChange(this.serializer,e),n=function(s){if(!("targetChange"in s))return SnapshotVersion.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?SnapshotVersion.min():o.readTime?__PRIVATE_fromVersion(o.readTime):SnapshotVersion.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=__PRIVATE_getEncodedDatabaseId(this.serializer),r.addTarget=function(s,o){let c;const d=o.target;if(c=__PRIVATE_targetIsDocumentTarget(d)?{documents:__PRIVATE_toDocumentsTarget(s,d)}:{query:__PRIVATE_toQueryTarget(s,d).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=__PRIVATE_toBytes(s,o.resumeToken);const m=__PRIVATE_toInt32Proto(s,o.expectedCount);m!==null&&(c.expectedCount=m)}else if(o.snapshotVersion.compareTo(SnapshotVersion.min())>0){c.readTime=toTimestamp(s,o.snapshotVersion.toTimestamp());const m=__PRIVATE_toInt32Proto(s,o.expectedCount);m!==null&&(c.expectedCount=m)}return c}(this.serializer,e);const n=__PRIVATE_toListenRequestLabels(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=__PRIVATE_getEncodedDatabaseId(this.serializer),r.removeTarget=e,this.q_(r)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,r,n,a,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),n=__PRIVATE_fromVersion(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>toMutation(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,__PRIVATE_toResourcePath(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new FirestoreError(N$1.UNKNOWN,s.toString())})}Ho(e,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,__PRIVATE_toResourcePath(r,n),a,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new FirestoreError(N$1.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(__PRIVATE_logError(r),this.aa=!1):__PRIVATE_logDebug("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn$1="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(tn$1,"Restarting streams for network reachability change."),await async function(d){const m=__PRIVATE_debugCast(d);m.Ea.add(4),await __PRIVATE_disableNetworkInternal(m),m.Ra.set("Unknown"),m.Ea.delete(4),await __PRIVATE_enableNetworkInternal(m)}(this))})}),this.Ra=new __PRIVATE_OnlineStateTracker(n,a)}}async function __PRIVATE_enableNetworkInternal(t){if(__PRIVATE_canUseNetwork(t))for(const e of t.da)await e(!0)}async function __PRIVATE_disableNetworkInternal(t){for(const e of t.da)await e(!1)}function __PRIVATE_remoteStoreListen(t,e){const r=__PRIVATE_debugCast(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(r)?__PRIVATE_startWatchStream(r):__PRIVATE_ensureWatchStream(r).O_()&&__PRIVATE_sendWatchRequest(r,e))}function __PRIVATE_remoteStoreUnlisten(t,e){const r=__PRIVATE_debugCast(t),n=__PRIVATE_ensureWatchStream(r);r.Ia.delete(e),n.O_()&&__PRIVATE_sendUnwatchRequest(r,e),r.Ia.size===0&&(n.O_()?n.L_():__PRIVATE_canUseNetwork(r)&&r.Ra.set("Unknown"))}function __PRIVATE_sendWatchRequest(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}__PRIVATE_ensureWatchStream(t).Y_(e)}function __PRIVATE_sendUnwatchRequest(t,e){t.Va.Ue(e),__PRIVATE_ensureWatchStream(t).Z_(e)}function __PRIVATE_startWatchStream(t){t.Va=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(t).start(),t.Ra.ua()}function __PRIVATE_shouldStartWatchStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWatchStream(t).x_()&&t.Ia.size>0}function __PRIVATE_canUseNetwork(t){return __PRIVATE_debugCast(t).Ea.size===0}function __PRIVATE_cleanUpWatchStreamState(t){t.Va=void 0}async function __PRIVATE_onWatchStreamConnected(t){t.Ra.set("Online")}async function __PRIVATE_onWatchStreamOpen(t){t.Ia.forEach((e,r)=>{__PRIVATE_sendWatchRequest(t,e)})}async function __PRIVATE_onWatchStreamClose(t,e){__PRIVATE_cleanUpWatchStreamState(t),__PRIVATE_shouldStartWatchStream(t)?(t.Ra.ha(e),__PRIVATE_startWatchStream(t)):t.Ra.set("Unknown")}async function __PRIVATE_onWatchStreamChange(t,e,r){if(t.Ra.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(a,s){const o=s.cause;for(const c of s.targetIds)a.Ia.has(c)&&(await a.remoteSyncer.rejectListen(c,o),a.Ia.delete(c),a.Va.removeTarget(c))}(t,e)}catch(n){__PRIVATE_logDebug(tn$1,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await __PRIVATE_disableNetworkUntilRecovery(t,n)}else if(e instanceof __PRIVATE_DocumentWatchChange?t.Va.Ze(e):e instanceof __PRIVATE_ExistenceFilterChange?t.Va.st(e):t.Va.tt(e),!r.isEqual(SnapshotVersion.min()))try{const n=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore);r.compareTo(n)>=0&&await function(s,o){const c=s.Va.Tt(o);return c.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const y=s.Ia.get(m);y&&s.Ia.set(m,y.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach((d,m)=>{const y=s.Ia.get(d);if(!y)return;s.Ia.set(d,y.withResumeToken(ByteString.EMPTY_BYTE_STRING,y.snapshotVersion)),__PRIVATE_sendUnwatchRequest(s,d);const A=new TargetData(y.target,d,m,y.sequenceNumber);__PRIVATE_sendWatchRequest(s,A)}),s.remoteSyncer.applyRemoteEvent(c)}(t,r)}catch(n){__PRIVATE_logDebug(tn$1,"Failed to raise snapshot:",n),await __PRIVATE_disableNetworkUntilRecovery(t,n)}}async function __PRIVATE_disableNetworkUntilRecovery(t,e,r){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;t.Ea.add(1),await __PRIVATE_disableNetworkInternal(t),t.Ra.set("Offline"),r||(r=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(tn$1,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await __PRIVATE_enableNetworkInternal(t)})}function __PRIVATE_executeWithRecovery(t,e){return e().catch(r=>__PRIVATE_disableNetworkUntilRecovery(t,r,e))}async function __PRIVATE_fillWritePipeline(t){const e=__PRIVATE_debugCast(t),r=__PRIVATE_ensureWriteStream(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j$1;for(;__PRIVATE_canAddToWritePipeline(e);)try{const a=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,__PRIVATE_addToWritePipeline(e,a)}catch(a){await __PRIVATE_disableNetworkUntilRecovery(e,a)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(t){return __PRIVATE_canUseNetwork(t)&&t.Ta.length<10}function __PRIVATE_addToWritePipeline(t,e){t.Ta.push(e);const r=__PRIVATE_ensureWriteStream(t);r.O_()&&r.X_&&r.ea(e.mutations)}function __PRIVATE_shouldStartWriteStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWriteStream(t).x_()&&t.Ta.length>0}function __PRIVATE_startWriteStream(t){__PRIVATE_ensureWriteStream(t).start()}async function __PRIVATE_onWriteStreamOpen(t){__PRIVATE_ensureWriteStream(t).ra()}async function __PRIVATE_onWriteHandshakeComplete(t){const e=__PRIVATE_ensureWriteStream(t);for(const r of t.Ta)e.ea(r.mutations)}async function __PRIVATE_onMutationResult(t,e,r){const n=t.Ta.shift(),a=MutationBatchResult.from(n,e,r);await __PRIVATE_executeWithRecovery(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await __PRIVATE_fillWritePipeline(t)}async function __PRIVATE_onWriteStreamClose(t,e){e&&__PRIVATE_ensureWriteStream(t).X_&&await async function(n,a){if(function(o){return __PRIVATE_isPermanentError(o)&&o!==N$1.ABORTED}(a.code)){const s=n.Ta.shift();__PRIVATE_ensureWriteStream(n).B_(),await __PRIVATE_executeWithRecovery(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await __PRIVATE_fillWritePipeline(n)}}(t,e),__PRIVATE_shouldStartWriteStream(t)&&__PRIVATE_startWriteStream(t)}async function __PRIVATE_remoteStoreHandleCredentialChange(t,e){const r=__PRIVATE_debugCast(t);r.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(tn$1,"RemoteStore received new credentials");const n=__PRIVATE_canUseNetwork(r);r.Ea.add(3),await __PRIVATE_disableNetworkInternal(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await __PRIVATE_enableNetworkInternal(r)}async function __PRIVATE_remoteStoreApplyPrimaryState(t,e){const r=__PRIVATE_debugCast(t);e?(r.Ea.delete(2),await __PRIVATE_enableNetworkInternal(r)):e||(r.Ea.add(2),await __PRIVATE_disableNetworkInternal(r),r.Ra.set("Unknown"))}function __PRIVATE_ensureWatchStream(t){return t.ma||(t.ma=function(r,n,a){const s=__PRIVATE_debugCast(r);return s.sa(),new __PRIVATE_PersistentListenStream(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:__PRIVATE_onWatchStreamConnected.bind(null,t),t_:__PRIVATE_onWatchStreamOpen.bind(null,t),r_:__PRIVATE_onWatchStreamClose.bind(null,t),H_:__PRIVATE_onWatchStreamChange.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),__PRIVATE_shouldStartWatchStream(t)?__PRIVATE_startWatchStream(t):t.Ra.set("Unknown")):(await t.ma.stop(),__PRIVATE_cleanUpWatchStreamState(t))})),t.ma}function __PRIVATE_ensureWriteStream(t){return t.fa||(t.fa=function(r,n,a){const s=__PRIVATE_debugCast(r);return s.sa(),new __PRIVATE_PersistentWriteStream(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:__PRIVATE_onWriteStreamOpen.bind(null,t),r_:__PRIVATE_onWriteStreamClose.bind(null,t),ta:__PRIVATE_onWriteHandshakeComplete.bind(null,t),na:__PRIVATE_onMutationResult.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await __PRIVATE_fillWritePipeline(t)):(await t.fa.stop(),t.Ta.length>0&&(__PRIVATE_logDebug(tn$1,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const o=Date.now()+n,c=new DelayedOperation(e,r,o,a,s);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N$1.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(t,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${t}`),__PRIVATE_isIndexedDbTransactionError(t))return new FirestoreError(N$1.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||DocumentKey.comparator(r.key,n.key):(r,n)=>DocumentKey.comparator(r.key,n.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new DocumentSet;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.ga=new SortedMap(DocumentKey.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):fail(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class ViewSnapshot{constructor(e,r,n,a,s,o,c,d,m){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,r,n,a,s){const o=[];return r.forEach(c=>{o.push({type:0,doc:c})}),new ViewSnapshot(e,r,DocumentSet.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=__PRIVATE_debugCast(r),s=a.queries;a.queries=__PRIVATE_newQueriesObjectMap(),s.forEach((o,c)=>{for(const d of c.Sa)d.onError(n)})})(this,new FirestoreError(N$1.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(t=>__PRIVATE_canonifyQuery(t),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(t,e){const r=__PRIVATE_debugCast(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.ba()&&e.Da()&&(n=2):(s=new __PRIVATE_QueryListenersInfo,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const c=__PRIVATE_wrapInUserErrorIfRecoverable(o,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,s),s.Sa.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&__PRIVATE_raiseSnapshotsInSyncEvent(r)}async function __PRIVATE_eventManagerUnlisten(t,e){const r=__PRIVATE_debugCast(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?a=e.Da()?0:1:!s.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function __PRIVATE_eventManagerOnWatchChange(t,e){const r=__PRIVATE_debugCast(t);let n=!1;for(const a of e){const s=a.query,o=r.queries.get(s);if(o){for(const c of o.Sa)c.Fa(a)&&(n=!0);o.wa=a}}n&&__PRIVATE_raiseSnapshotsInSyncEvent(r)}function __PRIVATE_eventManagerOnWatchError(t,e,r){const n=__PRIVATE_debugCast(t),a=n.queries.get(e);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(t){t.Ca.forEach(e=>{e.next()})}var nn$1,rn$1;(rn$1=nn$1||(nn$1={})).Ma="default",rn$1.Cache="cache";class __PRIVATE_QueryListener{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nn$1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.eu=__PRIVATE_newQueryComparator(e),this.tu=new DocumentSet(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new __PRIVATE_DocumentChangeSet,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,A)=>{const P=a.get(y),Z=__PRIVATE_queryMatches(this.query,A)?A:null,me=!!P&&this.mutatedKeys.has(P.key),_e=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Ge=!1;P&&Z?P.data.isEqual(Z.data)?me!==_e&&(n.track({type:3,doc:Z}),Ge=!0):this.su(P,Z)||(n.track({type:2,doc:Z}),Ge=!0,(d&&this.eu(Z,d)>0||m&&this.eu(Z,m)<0)&&(c=!0)):!P&&Z?(n.track({type:0,doc:Z}),Ge=!0):P&&!Z&&(n.track({type:1,doc:P}),Ge=!0,(d||m)&&(c=!0)),Ge&&(Z?(o=o.add(Z),s=_e?s.add(y):s.delete(y)):(o=o.delete(y),s=s.delete(y)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const y=this.query.limitType==="F"?o.last():o.first();o=o.delete(y.key),s=s.delete(y.key),n.track({type:1,doc:y})}return{tu:o,iu:n,Cs:c,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((y,A)=>function(Z,me){const _e=Ge=>{switch(Ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Rt:Ge})}};return _e(Z)-_e(me)}(y.type,A.type)||this.eu(y.doc,A.doc)),this.ou(n),a=a??!1;const c=r&&!a?this._u():[],d=this.Xa.size===0&&this.current&&!a?1:0,m=d!==this.Za;return this.Za=d,o.length!==0||m?{snapshot:new ViewSnapshot(this.query,e.tu,s,o,e.mutatedKeys,d===0,m,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=__PRIVATE_documentKeySet(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new __PRIVATE_RemovedLimboDocument(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new __PRIVATE_AddedLimboDocument(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=__PRIVATE_documentKeySet();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return ViewSnapshot.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sn$1="SyncEngine";class __PRIVATE_QueryView{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class LimboResolution{constructor(e){this.key=e,this.hu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,r,n,a,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ObjectMap(c=>__PRIVATE_canonifyQuery(c),__PRIVATE_queryEquals),this.Iu=new Map,this.Eu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Au=new Map,this.Ru=new __PRIVATE_ReferenceSet,this.Vu={},this.mu=new Map,this.fu=__PRIVATE_TargetIdGenerator.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function __PRIVATE_syncEngineListen(t,e,r=!0){const n=__PRIVATE_ensureWatchCallbacks(t);let a;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await __PRIVATE_allocateTargetAndMaybeListen(n,e,r,!0),a}async function __PRIVATE_triggerRemoteStoreListen(t,e){const r=__PRIVATE_ensureWatchCallbacks(t);await __PRIVATE_allocateTargetAndMaybeListen(r,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(t,e,r,n){const a=await __PRIVATE_localStoreAllocateTarget(t.localStore,__PRIVATE_queryToTarget(e)),s=a.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let c;return n&&(c=await __PRIVATE_initializeViewAndComputeSnapshot(t,e,s,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&__PRIVATE_remoteStoreListen(t.remoteStore,a),c}async function __PRIVATE_initializeViewAndComputeSnapshot(t,e,r,n,a){t.pu=(A,P,Z)=>async function(_e,Ge,ve,He){let De=Ge.view.ru(ve);De.Cs&&(De=await __PRIVATE_localStoreExecuteQuery(_e.localStore,Ge.query,!1).then(({documents:li})=>Ge.view.ru(li,De)));const Xe=He&&He.targetChanges.get(Ge.targetId),Bs=He&&He.targetMismatches.get(Ge.targetId)!=null,wt=Ge.view.applyChanges(De,_e.isPrimaryClient,Xe,Bs);return __PRIVATE_updateTrackedLimbos(_e,Ge.targetId,wt.au),wt.snapshot}(t,A,P,Z);const s=await __PRIVATE_localStoreExecuteQuery(t.localStore,e,!0),o=new __PRIVATE_View(e,s.Qs),c=o.ru(s.documents),d=TargetChange.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),m=o.applyChanges(c,t.isPrimaryClient,d);__PRIVATE_updateTrackedLimbos(t,r,m.au);const y=new __PRIVATE_QueryView(e,r,o);return t.Tu.set(e,y),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),m.snapshot}async function __PRIVATE_syncEngineUnlisten(t,e,r){const n=__PRIVATE_debugCast(t),a=n.Tu.get(e),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(o=>!__PRIVATE_queryEquals(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await __PRIVATE_localStoreReleaseTarget(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&__PRIVATE_remoteStoreUnlisten(n.remoteStore,a.targetId),__PRIVATE_removeAndCleanupTarget(n,a.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(n,a.targetId),await __PRIVATE_localStoreReleaseTarget(n.localStore,a.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(t,e){const r=__PRIVATE_debugCast(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),__PRIVATE_remoteStoreUnlisten(r.remoteStore,n.targetId))}async function __PRIVATE_syncEngineWrite(t,e,r){const n=__PRIVATE_syncEngineEnsureWriteCallbacks(t);try{const a=await function(o,c){const d=__PRIVATE_debugCast(o),m=Timestamp.now(),y=c.reduce((Z,me)=>Z.add(me.key),__PRIVATE_documentKeySet());let A,P;return d.persistence.runTransaction("Locally write mutations","readwrite",Z=>{let me=__PRIVATE_mutableDocumentMap(),_e=__PRIVATE_documentKeySet();return d.Ns.getEntries(Z,y).next(Ge=>{me=Ge,me.forEach((ve,He)=>{He.isValidDocument()||(_e=_e.add(ve))})}).next(()=>d.localDocuments.getOverlayedDocuments(Z,me)).next(Ge=>{A=Ge;const ve=[];for(const He of c){const De=__PRIVATE_mutationExtractBaseValue(He,A.get(He.key).overlayedDocument);De!=null&&ve.push(new __PRIVATE_PatchMutation(He.key,De,__PRIVATE_extractFieldMask(De.value.mapValue),Precondition.exists(!0)))}return d.mutationQueue.addMutationBatch(Z,m,ve,c)}).next(Ge=>{P=Ge;const ve=Ge.applyToLocalDocumentSet(A,_e);return d.documentOverlayCache.saveOverlays(Z,Ge.batchId,ve)})}).then(()=>({batchId:P.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(A)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(o,c,d){let m=o.Vu[o.currentUser.toKey()];m||(m=new SortedMap(__PRIVATE_primitiveComparator)),m=m.insert(c,d),o.Vu[o.currentUser.toKey()]=m}(n,a.batchId,r),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,a.changes),await __PRIVATE_fillWritePipeline(n.remoteStore)}catch(a){const s=__PRIVATE_wrapInUserErrorIfRecoverable(a,"Failed to persist write");r.reject(s)}}async function __PRIVATE_syncEngineApplyRemoteEvent(t,e){const r=__PRIVATE_debugCast(t);try{const n=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(r.localStore,e);e.targetChanges.forEach((a,s)=>{const o=r.Au.get(s);o&&(__PRIVATE_hardAssert(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?__PRIVATE_hardAssert(o.hu,14607):a.removedDocuments.size>0&&(__PRIVATE_hardAssert(o.hu,42227),o.hu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,n,e)}catch(n){await __PRIVATE_ignoreIfPrimaryLeaseLoss(n)}}function __PRIVATE_syncEngineApplyOnlineStateChange(t,e,r){const n=__PRIVATE_debugCast(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,o)=>{const c=o.view.va(e);c.snapshot&&a.push(c.snapshot)}),function(o,c){const d=__PRIVATE_debugCast(o);d.onlineState=c;let m=!1;d.queries.forEach((y,A)=>{for(const P of A.Sa)P.va(c)&&(m=!0)}),m&&__PRIVATE_raiseSnapshotsInSyncEvent(d)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(t,e,r){const n=__PRIVATE_debugCast(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),s=a&&a.key;if(s){let o=new SortedMap(DocumentKey.comparator);o=o.insert(s,MutableDocument.newNoDocument(s,SnapshotVersion.min()));const c=__PRIVATE_documentKeySet().add(s),d=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),o,c);await __PRIVATE_syncEngineApplyRemoteEvent(n,d),n.du=n.du.remove(s),n.Au.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(n)}else await __PRIVATE_localStoreReleaseTarget(n.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(n,e,r)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(t,e){const r=__PRIVATE_debugCast(t),n=e.batch.batchId;try{const a=await __PRIVATE_localStoreAcknowledgeBatch(r.localStore,e);__PRIVATE_processUserCallback(r,n,null),__PRIVATE_triggerPendingWritesCallbacks(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}async function __PRIVATE_syncEngineRejectFailedWrite(t,e,r){const n=__PRIVATE_debugCast(t);try{const a=await function(o,c){const d=__PRIVATE_debugCast(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return d.mutationQueue.lookupMutationBatch(m,c).next(A=>(__PRIVATE_hardAssert(A!==null,37113),y=A.keys(),d.mutationQueue.removeMutationBatch(m,A))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,y,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>d.localDocuments.getDocuments(m,y))})}(n.localStore,e);__PRIVATE_processUserCallback(n,e,r),__PRIVATE_triggerPendingWritesCallbacks(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}function __PRIVATE_triggerPendingWritesCallbacks(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function __PRIVATE_processUserCallback(t,e,r){const n=__PRIVATE_debugCast(t);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function __PRIVATE_removeAndCleanupTarget(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||__PRIVATE_removeLimboTarget(t,n)})}function __PRIVATE_removeLimboTarget(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(__PRIVATE_remoteStoreUnlisten(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_updateTrackedLimbos(t,e,r){for(const n of r)n instanceof __PRIVATE_AddedLimboDocument?(t.Ru.addReference(n.key,e),__PRIVATE_trackLimboChange(t,n)):n instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(sn$1,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||__PRIVATE_removeLimboTarget(t,n.key)):fail(19791,{wu:n})}function __PRIVATE_trackLimboChange(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(__PRIVATE_logDebug(sn$1,"New document in limbo: "+r),t.Eu.add(n),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_pumpEnqueuedLimboResolutions(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new DocumentKey(ResourcePath.fromString(e)),n=t.fu.next();t.Au.set(n,new LimboResolution(r)),t.du=t.du.insert(r,n),__PRIVATE_remoteStoreListen(t.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(r.path)),n,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ce))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,e,r){const n=__PRIVATE_debugCast(t),a=[],s=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((c,d)=>{o.push(n.pu(d,e,r).then(m=>{if((m||r)&&n.isPrimaryClient){const y=m?!m.fromCache:r?.targetChanges.get(d.targetId)?.current;n.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(m){a.push(m);const y=__PRIVATE_LocalViewChanges.As(d.targetId,m);s.push(y)}}))}),await Promise.all(o),n.Pu.H_(a),await async function(d,m){const y=__PRIVATE_debugCast(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>PersistencePromise.forEach(m,P=>PersistencePromise.forEach(P.Es,Z=>y.persistence.referenceDelegate.addReference(A,P.targetId,Z)).next(()=>PersistencePromise.forEach(P.ds,Z=>y.persistence.referenceDelegate.removeReference(A,P.targetId,Z)))))}catch(A){if(!__PRIVATE_isIndexedDbTransactionError(A))throw A;__PRIVATE_logDebug(Ut$1,"Failed to update sequence numbers: "+A)}for(const A of m){const P=A.targetId;if(!A.fromCache){const Z=y.Ms.get(P),me=Z.snapshotVersion,_e=Z.withLastLimboFreeSnapshotVersion(me);y.Ms=y.Ms.insert(P,_e)}}}(n.localStore,s))}async function __PRIVATE_syncEngineHandleCredentialChange(t,e){const r=__PRIVATE_debugCast(t);if(!r.currentUser.isEqual(e)){__PRIVATE_logDebug(sn$1,"User change. New user:",e.toKey());const n=await __PRIVATE_localStoreHandleUserChange(r.localStore,e);r.currentUser=e,function(s,o){s.mu.forEach(c=>{c.forEach(d=>{d.reject(new FirestoreError(N$1.CANCELLED,o))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,n.Ls)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(t,e){const r=__PRIVATE_debugCast(t),n=r.Au.get(e);if(n&&n.hu)return __PRIVATE_documentKeySet().add(n.key);{let a=__PRIVATE_documentKeySet();const s=r.Iu.get(e);if(!s)return a;for(const o of s){const c=r.Tu.get(o);a=a.unionWith(c.view.nu)}return a}}function __PRIVATE_ensureWatchCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.Pu.H_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.Pu.yu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Cu(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.mi,this.serializer)}Du(e){return new __PRIVATE_MemorySharedClientState}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(n=>__PRIVATE_MemoryLruDelegate.mi(n,r),this.serializer)}}class OnlineComponentProvider{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const r=__PRIVATE_newSerializer(e.databaseInfo.databaseId),n=function(s){return new __PRIVATE_WebChannelConnection(s)}(e.databaseInfo);return function(s,o,c,d){return new __PRIVATE_DatastoreImpl(s,o,c,d)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,o,c){return new __PRIVATE_RemoteStoreImpl(n,a,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,r=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,r,0),function(){return __PRIVATE_BrowserConnectivityMonitor.v()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,r){return function(a,s,o,c,d,m,y){const A=new __PRIVATE_SyncEngineImpl(a,s,o,c,d,m);return y&&(A.gu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){await async function(r){const n=__PRIVATE_debugCast(r);__PRIVATE_logDebug(tn$1,"RemoteStore shutting down."),n.Ea.add(5),await __PRIVATE_disableNetworkInternal(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on$1="FirestoreClient";class FirestoreClient{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{__PRIVATE_logDebug(on$1,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(__PRIVATE_logDebug(on$1,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=__PRIVATE_wrapInUserErrorIfRecoverable(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(on$1,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress();const r=await __PRIVATE_ensureOfflineComponents(t);__PRIVATE_logDebug(on$1,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,a)),t._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){__PRIVATE_logDebug(on$1,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===N$1.FAILED_PRECONDITION||a.code===N$1.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+r),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(on$1,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return t._offlineComponents}async function __PRIVATE_ensureOnlineComponents(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(__PRIVATE_logDebug(on$1,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,t._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(on$1,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,new OnlineComponentProvider))),t._onlineComponents}function __PRIVATE_getSyncEngine(t){return __PRIVATE_ensureOnlineComponents(t).then(e=>e.syncEngine)}function __PRIVATE_getDatastore(t){return __PRIVATE_ensureOnlineComponents(t).then(e=>e.datastore)}async function __PRIVATE_getEventManager(t){const e=await __PRIVATE_ensureOnlineComponents(t),r=e.eventManager;return r.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),r.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),r}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(t,e,r={}){const n=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,d,m){const y=new __PRIVATE_AsyncObserver({next:P=>{y.Nu(),o.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(s,A));const Z=P.docs.has(c);!Z&&P.fromCache?m.reject(new FirestoreError(N$1.UNAVAILABLE,"Failed to get document because the client is offline.")):Z&&P.fromCache&&d&&d.source==="server"?m.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(P)},error:P=>m.reject(P)}),A=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(c.path),y,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(s,A)}(await __PRIVATE_getEventManager(t),t.asyncQueue,e,r,n)),n.promise}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(t,e,r={}){const n=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,d,m){const y=new __PRIVATE_AsyncObserver({next:P=>{y.Nu(),o.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(s,A)),P.fromCache&&d.source==="server"?m.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(P)},error:P=>m.reject(P)}),A=new __PRIVATE_QueryListener(c,y,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(s,A)}(await __PRIVATE_getEventManager(t),t.asyncQueue,e,r,n)),n.promise}function __PRIVATE_firestoreClientRunAggregateQuery(t,e,r){const n=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>{try{const a=await __PRIVATE_getDatastore(t);n.resolve(async function(o,c,d){const m=__PRIVATE_debugCast(o),{request:y,gt:A,parent:P}=__PRIVATE_toRunAggregationQueryRequest(m.serializer,__PRIVATE_queryToAggregateTarget(c),d);m.connection.$o||delete y.parent;const Z=(await m.Ho("RunAggregationQuery",m.serializer.databaseId,P,y,1)).filter(_e=>!!_e.result);__PRIVATE_hardAssert(Z.length===1,64727);const me=Z[0].result?.aggregateFields;return Object.keys(me).reduce((_e,Ge)=>(_e[A[Ge]]=me[Ge],_e),{})}(a,e,r))}catch(a){n.reject(a)}}),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n$1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an$1="firestore.googleapis.com",un$1=!0;class FirestoreSettingsImpl{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=an$1,this.ssl=un$1}else this.host=e.host,this.ssl=e.ssl??un$1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ot$1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bt$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(n.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new FirestoreError(N$1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=_n$1.get(r);n&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),_n$1.delete(r),n.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(t,e,r,n={}){t=__PRIVATE_cast(t,Firestore$1);const a=isCloudWorkstation(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${r}`;a&&(pingServer(`https://${c}`),updateEmulatorBanner("Firestore",!0)),s.host!==an$1&&s.host!==c&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...s,host:c,ssl:a,emulatorOptions:n};if(!deepEqual(d,o)&&(t._setSettings(d),n.mockUserToken)){let m,y;if(typeof n.mockUserToken=="string")m=n.mockUserToken,y=User.MOCK_USER;else{m=createMockUserToken(n.mockUserToken,t._app?.options.projectId);const A=n.mockUserToken.sub||n.mockUserToken.user_id;if(!A)throw new FirestoreError(N$1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new User(A)}t._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(__PRIVATE_validateJSON(r,DocumentReference._jsonSchema))return new DocumentReference(e,n||null,new DocumentKey(ResourcePath.fromString(r.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(e,r,n){super(e,r,__PRIVATE_newQueryForPath(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(t,e,...r){if(t=getModularInstance(t),__PRIVATE_validateNonEmptyArgument("collection","path",e),t instanceof Firestore$1){const n=ResourcePath.fromString(e,...r);return __PRIVATE_validateCollectionPath(n),new CollectionReference(t,null,n)}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ResourcePath.fromString(e,...r));return __PRIVATE_validateCollectionPath(n),new CollectionReference(t.firestore,null,n)}}function doc(t,e,...r){if(t=getModularInstance(t),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),t instanceof Firestore$1){const n=ResourcePath.fromString(e,...r);return __PRIVATE_validateDocumentPath(n),new DocumentReference(t,null,new DocumentKey(n))}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ResourcePath.fromString(e,...r));return __PRIVATE_validateDocumentPath(n),new DocumentReference(t.firestore,t instanceof CollectionReference?t.converter:null,new DocumentKey(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn$1="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._c=()=>{const n=getDocument();n&&__PRIVATE_logDebug(cn$1,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=getDocument();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=getDocument();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new __PRIVATE_Deferred;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(cn$1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=DelayedOperation.createAndSchedule(this,e,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&fail(47125,{Pc:__PRIVATE_getMessageOrStack(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function __PRIVATE_getMessageOrStack(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Firestore extends Firestore$1{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(t,e){const r=typeof t=="object"?t:getApp(),n=typeof t=="string"?t:lt$1,a=_getProvider(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=getDefaultEmulatorHostnameAndPort("firestore");s&&connectFirestoreEmulator(a,...s)}return a}function ensureFirestoreConfigured(t){if(t._terminated)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||__PRIVATE_configureFirestore(t),t._firestoreClient}function __PRIVATE_configureFirestore(t){const e=t._freezeSettings(),r=function(a,s,o,c){return new DatabaseInfo(a,s,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new FirestoreClient(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(a){const s=a?._online.build();return{_offline:a?._offline.build(s),_online:s}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AggregateField{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class AggregateQuerySnapshot{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(r){throw new FirestoreError(N$1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new VectorValue(e.vectorValues);throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn$1=/^__.*__$/;class ParsedSetData{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,r,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,r,this.fieldTransforms)}}function __PRIVATE_isWrite(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ac:t})}}class __PRIVATE_ParseContextImpl{constructor(e,r,n,a,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new __PRIVATE_ParseContextImpl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ac)&&hn$1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||__PRIVATE_newSerializer(e)}Cc(e,r,n,a=!1){return new __PRIVATE_ParseContextImpl({Ac:e,methodName:r,Dc:n,path:FieldPath$1.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(t){const e=t._freezeSettings(),r=__PRIVATE_newSerializer(t._databaseId);return new __PRIVATE_UserDataReader(t._databaseId,!!e.ignoreUndefinedProperties,r)}function __PRIVATE_parseSetData(t,e,r,n,a,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,r,a);__PRIVATE_validatePlainObject("Data must be an object, but it was:",o,n);const c=__PRIVATE_parseObject(n,o);let d,m;if(s.merge)d=new FieldMask(o.fieldMask),m=o.fieldTransforms;else if(s.mergeFields){const y=[];for(const A of s.mergeFields){const P=__PRIVATE_fieldPathFromArgument$1(e,A,r);if(!o.contains(P))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(y,P)||y.push(P)}d=new FieldMask(y),m=o.fieldTransforms.filter(A=>d.covers(A.field))}else d=null,m=o.fieldTransforms;return new ParsedSetData(new ObjectValue(c),d,m)}function __PRIVATE_parseQueryValue(t,e,r,n=!1){return __PRIVATE_parseData(r,t.Cc(n?4:3,e))}function __PRIVATE_parseData(t,e){if(__PRIVATE_looksLikeJsonObject(t=getModularInstance(t)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,t),__PRIVATE_parseObject(t,e);if(t instanceof FieldValue)return function(n,a){if(!__PRIVATE_isWrite(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const c of n){let d=__PRIVATE_parseData(c,a.wc(o));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=getModularInstance(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return toNumber(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Timestamp.fromDate(n);return{timestampValue:toTimestamp(a.serializer,s)}}if(n instanceof Timestamp){const s=new Timestamp(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:toTimestamp(a.serializer,s)}}if(n instanceof GeoPoint)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(a.serializer,n._byteString)};if(n instanceof DocumentReference){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:__PRIVATE_toResourceName(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof VectorValue)return function(o,c){return{mapValue:{fields:{[ht$1]:{stringValue:It$1},[Et$1]:{arrayValue:{values:o.toArray().map(m=>{if(typeof m!="number")throw c.Sc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(c.serializer,m)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${__PRIVATE_valueDescription(n)}`)}(t,e)}function __PRIVATE_parseObject(t,e){const r={};return isEmpty(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(t,(n,a)=>{const s=__PRIVATE_parseData(a,e.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function __PRIVATE_looksLikeJsonObject(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Timestamp||t instanceof GeoPoint||t instanceof Bytes||t instanceof DocumentReference||t instanceof FieldValue||t instanceof VectorValue)}function __PRIVATE_validatePlainObject(t,e,r){if(!__PRIVATE_looksLikeJsonObject(r)||!__PRIVATE_isPlainObject(r)){const n=__PRIVATE_valueDescription(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function __PRIVATE_fieldPathFromArgument$1(t,e,r){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(t,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",t,!1,void 0,r)}const Pn$1=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(t,e,r){if(e.search(Pn$1)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function __PRIVATE_createError(t,e,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(s||o)&&(d+=" (found",s&&(d+=` in field ${n}`),o&&(d+=` in document ${a}`),d+=")"),new FirestoreError(N$1.INVALID_ARGUMENT,c+t+d)}function __PRIVATE_fieldMaskContains(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(t,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(t,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new FirestoreError(N$1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(t,e,...r){let n=[];e instanceof AppliableConstraint&&n.push(e),n=n.concat(r),function(s){const o=s.filter(d=>d instanceof QueryCompositeFilterConstraint).length,c=s.filter(d=>d instanceof QueryFieldFilterConstraint).length;if(o>1||o>0&&c>0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new QueryFieldFilterConstraint(e,r,n)}_apply(e){const r=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,r),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,r))}_parse(e){const r=__PRIVATE_newUserDataReader(e.firestore);return function(s,o,c,d,m,y,A){let P;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(A,y);const me=[];for(const _e of A)me.push(__PRIVATE_parseDocumentIdValue(d,s,_e));P={arrayValue:{values:me}}}else P=__PRIVATE_parseDocumentIdValue(d,s,A)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(A,y),P=__PRIVATE_parseQueryValue(c,o,A,y==="in"||y==="not-in");return FieldFilter.create(m,y,P)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function where(t,e,r){const n=e,a=__PRIVATE_fieldPathFromArgument("where",t);return QueryFieldFilterConstraint._create(a,n,r)}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new QueryCompositeFilterConstraint(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:CompositeFilter.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let o=a;const c=s.getFlattenedFilters();for(const d of c)__PRIVATE_validateNewFieldFilter(o,d),o=__PRIVATE_queryWithAddedFilter(o,d)}(e._query,r),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new QueryOrderByConstraint(e,r)}_apply(e){const r=function(a,s,o){if(a.startAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(s,o)}(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new __PRIVATE_QueryImpl(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function orderBy(t,e="asc"){const r=e,n=__PRIVATE_fieldPathFromArgument("orderBy",t);return QueryOrderByConstraint._create(n,r)}class QueryLimitConstraint extends QueryConstraint{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new QueryLimitConstraint(e,r,n)}_apply(e){return new Query(e.firestore,e.converter,__PRIVATE_queryWithLimit(e._query,this._limit,this._limitType))}}function limit(t){return QueryLimitConstraint._create("limit",t,"F")}function __PRIVATE_parseDocumentIdValue(t,e,r){if(typeof(r=getModularInstance(r))=="string"){if(r==="")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&r.indexOf("/")!==-1)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ResourcePath.fromString(r));if(!DocumentKey.isDocumentKey(n))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return __PRIVATE_refValue(t,new DocumentKey(n))}if(r instanceof DocumentReference)return __PRIVATE_refValue(t,r._key);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(r)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(t,e){if(!Array.isArray(t)||t.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(t,e){const r=function(a,s){for(const o of a)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,r="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return forEach(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){const r=e.fields?.[Et$1].arrayValue?.values?.map(n=>__PRIVATE_normalizeNumber(n.doubleValue));return new VectorValue(r)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=__PRIVATE_getPreviousValue(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const r=__PRIVATE_normalizeTimestamp(e);return new Timestamp(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(n),9688,{name:e});const a=new DatabaseId(n.get(1),n.get(3)),s=new DocumentKey(n.popFirst(5));return a.isEqual(r)||__PRIVATE_logError(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(t,e,r){let n;return n=t?t.toFirestore(e):e,n}function count(){return new AggregateField("count")}class SnapshotMetadata{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,r,n,a,s,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=DocumentSnapshot._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new SnapshotMetadata(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,n.key,n,new SnapshotMetadata(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N$1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(c=>{const d=new QueryDocumentSnapshot(a._firestore,a._userDataWriter,c.doc.key,c.doc,new SnapshotMetadata(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const d=new QueryDocumentSnapshot(a._firestore,a._userDataWriter,c.doc.key,c.doc,new SnapshotMetadata(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,y=-1;return c.type!==0&&(m=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),y=o.indexOf(c.doc.key)),{type:__PRIVATE_resultChangeType(c.type),doc:d,oldIndex:m,newIndex:y}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(t){t=__PRIVATE_cast(t,DocumentReference);const e=__PRIVATE_cast(t.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),t._key).then(r=>__PRIVATE_convertToDocSnapshot(e,t,r))}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,r)}}function getDocs(t){t=__PRIVATE_cast(t,Query);const e=__PRIVATE_cast(t.firestore,Firestore),r=ensureFirestoreConfigured(e),n=new __PRIVATE_ExpUserDataWriter(e);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(t._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(r,t._query).then(a=>new QuerySnapshot(e,n,t,a))}function setDoc(t,e,r){t=__PRIVATE_cast(t,DocumentReference);const n=__PRIVATE_cast(t.firestore,Firestore),a=__PRIVATE_applyFirestoreDataConverter(t.converter,e);return executeWrite(n,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,Precondition.none())])}function executeWrite(t,e){return function(n,a){const s=new __PRIVATE_Deferred;return n.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(n),a,s)),s.promise}(ensureFirestoreConfigured(t),e)}function __PRIVATE_convertToDocSnapshot(t,e,r){const n=r.docs.get(e._key),a=new __PRIVATE_ExpUserDataWriter(t);return new DocumentSnapshot(t,a,e._key,n,new SnapshotMetadata(r.hasPendingWrites,r.fromCache),e.converter)}function getCountFromServer(t){return getAggregateFromServer(t,{count:count()})}function getAggregateFromServer(t,e){const r=__PRIVATE_cast(t.firestore,Firestore),n=ensureFirestoreConfigured(r),a=__PRIVATE_mapToArray(e,(s,o)=>new __PRIVATE_AggregateImpl(o,s.aggregateType,s._internalFieldPath));return __PRIVATE_firestoreClientRunAggregateQuery(n,t._query,a).then(s=>function(c,d,m){const y=new __PRIVATE_ExpUserDataWriter(c);return new AggregateQuerySnapshot(d,y,m)}(r,t,s))}(function(e,r=!0){(function(a){x=a})(SDK_VERSION),_registerComponent(new Component("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),c=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(n.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(o,n.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new FirestoreError(N$1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(m.options.projectId,y)}(o,a),o);return s={useFetchStreams:r,...s},c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),registerVersion(F,M,e),registerVersion(F,M,"esm2020")})();var name$1="firebase",version$2="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$1,version$2,"app");function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(t,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${t}`,...e)}function _logError(t,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(t,...e){throw createErrorInternal(t,...e)}function _createError(t,...e){return createErrorInternal(t,...e)}function _errorWithCustomMessage(t,e,r){const n={...prodErrorMap(),[e]:r};return new ErrorFactory("auth","Firebase",n).create(e,{appName:t.name})}function _serverAppCurrentUserOperationNotSupportedError(t){return _errorWithCustomMessage(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&_fail(t,"argument-error"),_errorWithCustomMessage(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return _DEFAULT_AUTH_ERROR_FACTORY.create(t,...e)}function _assert(t,e,...r){if(!t)throw createErrorInternal(e,...r)}function debugFail(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _logError(e),new Error(e)}function debugAssert(t,e){t||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){return typeof self<"u"&&self.location?.href||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,r){this.shortDelay=e,this.longDelay=r,debugAssert(r>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(t,e){debugAssert(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function _performApiRequest(t,e,r,n,a={}){return _performFetchWithErrorHandling(t,a,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const c=querystring({key:t.config.apiKey,...o}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m={method:e,headers:d,...s};return isCloudflareWorker()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(m.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(t,t.config.apiHost,r,c),m)})}async function _performFetchWithErrorHandling(t,e,r){t._canInitEmulator=!1;const n={...SERVER_ERROR_MAP,...e};try{const a=new NetworkTimeout(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw _makeTaggedError(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[d,m]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw _makeTaggedError(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw _makeTaggedError(t,"user-disabled",o);const y=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw _errorWithCustomMessage(t,y,m);_fail(t,y)}}catch(a){if(a instanceof FirebaseError)throw a;_fail(t,"network-request-failed",{message:String(a)})}}async function _performSignInRequest(t,e,r,n,a={}){const s=await _performApiRequest(t,e,r,n,a);return"mfaPendingCredential"in s&&_fail(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function _getFinalTarget(t,e,r,n){const a=`${e}${r}?${n}`,s=t,o=s.config.emulator?_emulatorUrl(t.config,a):`${t.config.apiScheme}://${a}`;return CookieAuthProxiedEndpoints.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function _parseEnforcementState(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=_createError(t,e,n);return a.customData._tokenResponse=r,a}function isEnterprise(t){return t!==void 0&&t.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return _parseEnforcementState(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(t,e){return _performApiRequest(t,"GET","/v2/recaptchaConfig",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(t,e){return _performApiRequest(t,"POST","/v1/accounts:delete",e)}async function getAccountInfo(t,e){return _performApiRequest(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(t,e=!1){const r=getModularInstance(t),n=await r.getIdToken(e),a=_parseToken(n);_assert(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s?.sign_in_provider;return{claims:a,token:n,authTime:utcTimestampToDateString(secondsStringToMilliseconds(a.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(a.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(a.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function secondsStringToMilliseconds(t){return Number(t)*1e3}function _parseToken(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const a=base64Decode(r);return a?JSON.parse(a):(_logError("Failed to decode base64 JWT payload"),null)}catch(a){return _logError("Caught error parsing JWT payload as JSON",a?.toString()),null}}function _tokenExpiresIn(t){const e=_parseToken(t);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof FirebaseError&&isUserInvalidated(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function isUserInvalidated({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(t){const e=t.auth,r=await t.getIdToken(),n=await _logoutIfInvalidated(t,getAccountInfo(e,{idToken:r}));_assert(n?.users.length,e,"internal-error");const a=n.users[0];t._notifyReloadListener(a);const s=a.providerUserInfo?.length?extractProviderData(a.providerUserInfo):[],o=mergeProviderData(t.providerData,s),c=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!o?.length,m=c?d:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new UserMetadata(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(t,y)}async function reload(t){const e=getModularInstance(t);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function extractProviderData(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(t,e){const r=await _performFetchWithErrorHandling(t,{},async()=>{const n=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,o=await _getFinalTarget(t,a,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:n};return t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(d.credentials="include"),FetchProvider.fetch()(o,d)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function revokeToken(t,e){return _performApiRequest(t,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const r=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await requestStsToken(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new StsTokenManager;return n&&(_assert(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(_assert(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),s&&(_assert(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(t,e){_assert(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class UserImpl{constructor({uid:e,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new UserMetadata(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new UserImpl({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,o=r.photoURL??void 0,c=r.tenantId??void 0,d=r._redirectEventId??void 0,m=r.createdAt??void 0,y=r.lastLoginAt??void 0,{uid:A,emailVerified:P,isAnonymous:Z,providerData:me,stsTokenManager:_e}=r;_assert(A&&_e,e,"internal-error");const Ge=StsTokenManager.fromJSON(this.name,_e);_assert(typeof A=="string",e,"internal-error"),assertStringOrUndefined(n,e.name),assertStringOrUndefined(a,e.name),_assert(typeof P=="boolean",e,"internal-error"),_assert(typeof Z=="boolean",e,"internal-error"),assertStringOrUndefined(s,e.name),assertStringOrUndefined(o,e.name),assertStringOrUndefined(c,e.name),assertStringOrUndefined(d,e.name),assertStringOrUndefined(m,e.name),assertStringOrUndefined(y,e.name);const ve=new UserImpl({uid:A,auth:e,email:a,emailVerified:P,displayName:n,isAnonymous:Z,photoURL:o,phoneNumber:s,tenantId:c,stsTokenManager:Ge,createdAt:m,lastLoginAt:y});return me&&Array.isArray(me)&&(ve.providerData=me.map(He=>({...He}))),d&&(ve._redirectEventId=d),ve}static async _fromIdTokenResponse(e,r,n=!1){const a=new StsTokenManager;a.updateFromServerResponse(r);const s=new UserImpl({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await _reloadWithoutSaving(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];_assert(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?extractProviderData(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!s?.length,c=new StsTokenManager;c.updateFromIdToken(n);const d=new UserImpl({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:o}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new UserMetadata(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!s?.length};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(t){debugAssert(t instanceof Function,"Expected a class definition");let e=instanceCache.get(t);return e?(debugAssert(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,instanceCache.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(t,e,r){return`firebase:${t}:${e}:${r}`}class PersistenceUserManager{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,a.apiKey,s),this.fullPersistenceKey=_persistenceKeyName("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return r?UserImpl._fromGetAccountInfoResponse(this.auth,r,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,n);const a=(await Promise.all(r.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let s=a[0]||_getInstance(inMemoryPersistence);const o=_persistenceKeyName(n,e.config.apiKey,e.name);let c=null;for(const m of r)try{const y=await m._get(o);if(y){let A;if(typeof y=="string"){const P=await getAccountInfo(e,{idToken:y}).catch(()=>{});if(!P)break;A=await UserImpl._fromGetAccountInfoResponse(e,P,y)}else A=UserImpl._fromJSON(e,y);m!==s&&(c=A),s=m;break}}catch{}const d=a.filter(m=>m._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new PersistenceUserManager(s,e,n):(s=d[0],c&&await s._set(o,c.toJSON()),await Promise.all(r.map(async m=>{if(m!==s)try{await m._remove(o)}catch{}})),new PersistenceUserManager(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function _isFirefox(t=getUA()){return/firefox\//i.test(t)}function _isSafari(t=getUA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(t=getUA()){return/crios\//i.test(t)}function _isIEMobile(t=getUA()){return/iemobile/i.test(t)}function _isAndroid(t=getUA()){return/android/i.test(t)}function _isBlackBerry(t=getUA()){return/blackberry/i.test(t)}function _isWebOS(t=getUA()){return/webos/i.test(t)}function _isIOS(t=getUA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _isIOSStandalone(t=getUA()){return _isIOS(t)&&!!window.navigator?.standalone}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(t=getUA()){return _isIOS(t)||_isAndroid(t)||_isWebOS(t)||_isBlackBerry(t)||/windows phone/i.test(t)||_isIEMobile(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(t,e=[]){let r;switch(t){case"Browser":r=_getBrowserName(getUA());break;case"Worker":r=`${_getBrowserName(getUA())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${SDK_VERSION}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,c)=>{try{const d=e(s);o(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(t,e={}){return _performApiRequest(t,"GET","/v2/passwordPolicy",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??MINIMUM_MIN_PASSWORD_LENGTH,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=_getInstance(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await getAccountInfo(this,{idToken:e}),n=await UserImpl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_isFirebaseServerApp(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,o=n?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&c?.user&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const r=e?getModularInstance(e):null;return r&&_assert(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),r=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await revokeToken(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&_getInstance(e)||this._popupRedirectResolver;_assert(r,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_logWarn(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _castAuth(t){return getModularInstance(t)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(r=>this.observer=r)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(t){externalJSProvider=t}function _loadJS(t){return externalJSProvider.loadJS(t)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class MockGreCAPTCHA{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,c)=>{getRecaptchaConfig(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const m=new RecaptchaConfig(d);return s.tenantId==null?s._agentRecaptchaConfig=m:s._tenantRecaptchaConfigs[s.tenantId]=m,o(m.siteKey)}}).catch(d=>{c(d)})})}function a(s,o,c){const d=window.grecaptcha;isEnterprise(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(m=>{o(m)}).catch(()=>{o(FAKE_TOKEN)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{n(this.auth).then(c=>{if(!r&&isEnterprise(window.grecaptcha))a(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=_recaptchaEnterpriseScriptUrl();d.length!==0&&(d+=c),_loadJS(d).then(()=>{a(c,s,o)}).catch(m=>{o(m)})}}).catch(c=>{o(c)})})}}async function injectRecaptchaFields(t,e,r,n=!1,a=!1){const s=new RecaptchaEnterpriseVerifier(t);let o;if(a)o=FAKE_TOKEN;else try{o=await s.verify(r)}catch{o=await s.verify(r,!0)}const c={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,m=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function handleRecaptchaFlow(t,e,r,n,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await injectRecaptchaFields(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await injectRecaptchaFields(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(t,e){const r=_getProvider(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(deepEqual(s,e??{}))return a;_fail(a,"already-initialized")}return r.initialize({options:e})}function _initializeAuthInstance(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(_getInstance);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function connectAuthEmulator(t,e,r){const n=_castAuth(t);_assert(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=extractProtocol(e),{host:o,port:c}=extractHostAndPort(e),d=c===null?"":`:${c}`,m={url:`${s}//${o}${d}/`},y=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){_assert(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),_assert(deepEqual(m,n.config.emulator)&&deepEqual(y,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=m,n.emulatorConfig=y,n.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(o)?(pingServer(`${s}//${o}${d}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function extractHostAndPort(t){const e=extractProtocol(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:parsePort(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:parsePort(o)}}}function parsePort(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function emitEmulatorWarning(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,r){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function linkEmailPassword(t,e){return _performApiRequest(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}async function signInWithEmailLinkForLinking(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new EmailAuthCredential(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new EmailAuthCredential(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,r,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,n,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:r,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):_fail("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const o=new OAuthCredential(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return signInWithIdp(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,signInWithIdp(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,signInWithIdp(e,r)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=querystring(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(t){const e=querystringDecode(extractQuerystring(t)).link,r=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,n=querystringDecode(extractQuerystring(t)).deep_link_id;return(n?querystringDecode(extractQuerystring(n)).link:null)||n||r||e||t}class ActionCodeURL{constructor(e){const r=querystringDecode(extractQuerystring(e)),n=r.apiKey??null,a=r.oobCode??null,s=parseMode(r.mode??null);_assert(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=parseDeepLink(e);try{return new ActionCodeURL(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,r){return EmailAuthCredential._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=ActionCodeURL.parseLink(r);return _assert(n,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,n.code,n.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return GoogleAuthProvider.credential(r,n)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,r){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return TwitterAuthProvider.credential(r,n)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signUp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await UserImpl._fromIdTokenResponse(e,n,a),o=providerIdForResponse(n);return new UserCredentialImpl({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=providerIdForResponse(n);return new UserCredentialImpl({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function providerIdForResponse(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new MultiFactorError(e,r,n,a)}}function _processCredentialSavingMfaContextIfNecessary(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(t,s,e,n):s})}async function _link$1(t,e,r=!1){const n=await _logoutIfInvalidated(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return UserCredentialImpl._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(t,e,r=!1){const{auth:n}=t;if(_isFirebaseServerApp(n.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(n));const a="reauthenticate";try{const s=await _logoutIfInvalidated(t,_processCredentialSavingMfaContextIfNecessary(n,a,e,t),r);_assert(s.idToken,n,"internal-error");const o=_parseToken(s.idToken);_assert(o,n,"internal-error");const{sub:c}=o;return _assert(t.uid===c,n,"user-mismatch"),UserCredentialImpl._forOperation(t,a,s)}catch(s){throw s?.code==="auth/user-not-found"&&_fail(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(t,e,r=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const n="signIn",a=await _processCredentialSavingMfaContextIfNecessary(t,n,e),s=await UserCredentialImpl._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function signInWithCredential(t,e){return _signInWithCredential(_castAuth(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(t){const e=_castAuth(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function createUserWithEmailAndPassword(t,e,r){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const n=_castAuth(t),o=await handleRecaptchaFlow(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),d}),c=await UserCredentialImpl._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(c.user),c}function signInWithEmailAndPassword(t,e,r){return _isFirebaseServerApp(t.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t)):signInWithCredential(getModularInstance(t),EmailAuthProvider.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),n})}function onIdTokenChanged(t,e,r,n){return getModularInstance(t).onIdTokenChanged(e,r,n)}function beforeAuthStateChanged(t,e,r){return getModularInstance(t).beforeAuthStateChanged(e,r)}function onAuthStateChanged(t,e,r,n){return getModularInstance(t).onAuthStateChanged(e,r,n)}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);_isIE10()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,IE10_LOCAL_STORAGE_SYNC_DELAY):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new Receiver(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!o?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(o).map(async m=>m(r.origin,s)),d=await _allSettled(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((c,d)=>{const m=_generateEventId("",20);a.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(A){const P=A;if(P.data.eventId===m)switch(P.data.status){case"ack":clearTimeout(y),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(P.data.response);break;default:clearTimeout(y),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:m,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(t){_window().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){return navigator?.serviceWorker?.controller||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function getObjectStore(t,e){return t.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const t=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(t).toPromise()}function _openDatabase(){const t=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(n):(n.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(t,e,r){const n=getObjectStore(t,!0).put({[DB_DATA_KEYPATH]:e,value:r});return new DBPromise(n).toPromise()}async function getObject(t,e){const r=getObjectStore(t,!1).get(e),n=await new DBPromise(r).toPromise();return n===void 0?null:n.value}function _deleteObject(t,e){const r=getObjectStore(t,!0).delete(e);return new DBPromise(r).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>_TRANSACTION_RETRY_COUNT)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>_putObject(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>getObject(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>_deleteObject(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=getObjectStore(a,!1).getAll();return new DBPromise(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(t,e){return e?_getInstance(e):(_assert(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,r){return signInWithIdp(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function _signIn(t){return _signInWithCredential(t.auth,new IdpCredential(t),t.bypassAuthState)}function _reauth(t){const{auth:e,user:r}=t;return _assert(r,e,"internal-error"),_reauthenticate(r,new IdpCredential(t),t.bypassAuthState)}async function _link(t){const{auth:e,user:r}=t;return _assert(r,e,"internal-error"),_link$1(r,new IdpCredential(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(t,e,r){if(_isFirebaseServerApp(t.app))return Promise.reject(_createError(t,"operation-not-supported-in-this-environment"));const n=_castAuth(t);_assertInstanceOf(t,e,FederatedAuthProvider);const a=_withDefaultResolver(n,r);return new PopupOperation(n,"signInViaPopup",e,a).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const n=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(t,e){const r=pendingRedirectKey(e),n=resolverPersistence(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function _overrideRedirectResult(t,e){redirectOutcomeMap.set(t._key(),e)}function resolverPersistence(t){return _getInstance(t._redirectPersistence)}function pendingRedirectKey(t){return _persistenceKeyName(PENDING_REDIRECT_KEY,t.config.apiKey,t.name)}async function _getRedirectResult(t,e,r=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const n=_castAuth(t),a=_withDefaultResolver(n,e),o=await new RedirectAction(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=600*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!isNullRedirectEvent(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";r.onError(_createError(this.auth,n))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function isRedirectEvent(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(t,e={}){return _performApiRequest(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(t);for(const r of e)try{if(matchDomain(r))return}catch{}_fail(t,"unauthorized-domain")}function matchDomain(t){const e=_getCurrentUrl(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!HTTP_REGEX.test(r))return!1;if(IP_ADDRESS_REGEX.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const t=_window().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function loadGapi(t){return new Promise((e,r)=>{function n(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),r(_createError(t,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(_window().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_window().gapi?.load)n();else{const a=_generateCallbackName("iframefcb");return _window()[a]=()=>{gapi.load?n():r(_createError(t,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${a}`).catch(s=>r(s))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(t){return cachedGApiLoader=cachedGApiLoader||loadGapi(t),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(t){const e=t.config;_assert(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${t.config.authDomain}/${IFRAME_PATH}`,n={apiKey:e.apiKey,appName:t.name,v:SDK_VERSION},a=EID_FROM_APIHOST.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${querystring(n).slice(1)}`}async function _openIframe(t){const e=await _loadGapi(t),r=_window().gapi;return _assert(r,t,"internal-error"),e.open({where:document.body,url:getIframeUrl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=_createError(t,"network-request-failed"),c=_window().setTimeout(()=>{s(o)},PING_TIMEOUT.get());function d(){_window().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(t,e,r,n=DEFAULT_WIDTH,a=DEFAULT_HEIGHT){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d={...BASE_POPUP_OPTIONS,width:n.toString(),height:a.toString(),top:s,left:o},m=getUA().toLowerCase();r&&(c=_isChromeIOS(m)?TARGET_BLANK:r),_isFirefox(m)&&(e=e||FIREFOX_EMPTY_URL,d.scrollbars="yes");const y=Object.entries(d).reduce((P,[Z,me])=>`${P}${Z}=${me},`,"");if(_isIOSStandalone(m)&&c!=="_self")return openAsNewWindowIOS(e||"",c),new AuthPopup(null);const A=window.open(e||"",c,y);_assert(A,t,"popup-blocked");try{A.focus()}catch{}return new AuthPopup(A)}function openAsNewWindowIOS(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(t,e,r,n,a,s){_assert(t.config.authDomain,t,"auth-domain-config-required"),_assert(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:SDK_VERSION,eventId:a};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",isEmpty$1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,A]of Object.entries({}))o[y]=A}if(e instanceof BaseOAuthProvider){const y=e.getScopes().filter(A=>A!=="");y.length>0&&(o.scopes=y.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const d=await t._getAppCheckToken(),m=d?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(d)}`:"";return`${getHandlerBase(t)}?${querystring(c).slice(1)}${m}`}function getHandlerBase({config:t}){return t.emulator?_emulatorUrl(t,EMULATOR_WIDGET_PATH):`https://${t.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,r,n,a){debugAssert(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await _getRedirectUrl(e,r,n,_getCurrentUrl(),a);return _open(e,s,_generateEventId())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await _getRedirectUrl(e,r,n,_getCurrentUrl(),a);return _setWindowLocation(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(debugAssert(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await _openIframe(e),n=new AuthEventManager(e);return r.register("authEvent",a=>(_assert(a?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},a=>{const s=a?.[0]?.[WEB_STORAGE_SUPPORT_KEY];s!==void 0&&r(!!s),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=_validateOrigin(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name="@firebase/auth",version$1="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(t){_registerComponent(new Component("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;_assert(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(t)},m=new AuthImpl(n,a,s,d);return _initializeAuthInstance(m,r),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const r=_castAuth(e.getProvider("auth").getImmediate());return(n=>new AuthInterop(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name,version$1,getVersionForPlatform(t)),registerVersion(name,version$1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=300,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>authIdTokenMaxAge)return;const a=r?.token;lastPostedIdToken!==a&&(lastPostedIdToken=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function getAuth(t=getApp()){const e=_getProvider(t,"auth");if(e.isInitialized())return e.getImmediate();const r=initializeAuth(t,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),n=getExperimentalSetting("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=mintCookieFactory(s.toString());beforeAuthStateChanged(r,o,()=>o(r.currentUser)),onIdTokenChanged(r,c=>o(c))}}const a=getDefaultEmulatorHost("auth");return a&&connectAuthEmulator(r,`http://${a}`),r}function getScriptParentElement(){return document.getElementsByTagName("head")?.[0]??document}_setExternalJSProvider({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=_createError("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",getScriptParentElement().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");const firebaseConfig={apiKey:"AIzaSyBuJhHXA4rtD1w3cHXtvOPgnDhcWsRfrtU",authDomain:"certchamps-a7527.firebaseapp.com",databaseURL:"https://certchamps-a7527-default-rtdb.firebaseio.com",projectId:"certchamps-a7527",storageBucket:"certchamps-a7527.firebasestorage.app",messagingSenderId:"433584407503",appId:"1:433584407503:web:dabeb6a07906ae0d6ac8ba",measurementId:"G-7SKFDGYV8J"},app=initializeApp(firebaseConfig),auth=getAuth(app),db$1=getFirestore(app);getStorage(app);function useAuthentication(){const{setUser:t}=reactExports.useContext(UserContext),e=getStorage(),r=useNavigate(),n=async(m,y,A)=>{const P=await getDownloadURL(ref(e,"crown.png"));t({uid:m,username:y,email:A,picture:P,friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,questionStreak:0,savedQuestions:[],decks:[]}),await setDoc(doc(db$1,"user-data",m),{uid:m,username:y,email:A,picture:"crown.png",friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,questionStreak:0,savedQuestions:[]}),r("/questions")},a=async(m,y,A)=>{try{const P=await getDoc(doc(db$1,"user-data",m)),Z=collection(db$1,"user-data",m,"decks"),_e=(await getDocs(Z)).docs.map(Ge=>({id:Ge.id,...Ge.data()}));if(P.exists()){const Ge=await getDownloadURL(ref(e,P.data().picture));t({uid:P.id,username:P.data().username,email:P.data().email,picture:Ge,friends:P.data().friends,pendingFriends:P.data().pendingFriends,notifications:P.data().notifications,rank:P.data().rank,xp:P.data().xp,questionStreak:P.data().questionStreak,savedQuestions:P.data().savedQuestions,decks:_e})}else n(m,y,A)}catch(P){console.log(P)}r("/practice")},s=async()=>{const m=new GoogleAuthProvider;try{const A=(await signInWithPopup(auth,m)).user;A&&A.email&&a(A.uid,A.displayName??"newUser",A.email)}catch(y){console.log(y)}},o=async(m,y,A)=>{try{const Z=(await createUserWithEmailAndPassword(auth,y,A)).user;Z&&n(Z.uid,m,y)}catch(P){console.log(P)}},c=async(m,y)=>{try{const P=(await signInWithEmailAndPassword(auth,m,y)).user;P&&a(P.uid,"",m)}catch(A){console.log(A)}};reactExports.useEffect(()=>{const m=onAuthStateChanged(auth,y=>{d(y)});return()=>m()},[]);const d=async m=>{m&&m.email&&m.uid&&(await a(m.uid,"",m.email),r("/practice"),console.log(`User Exists ✅: ${m.uid}`))};return{loginWithGoogle:s,signUpWithEmail:o,signInWithEmail:c,userSetup:a}}function Login(){const{signInWithEmail:t,signUpWithEmail:e,loginWithGoogle:r}=useAuthentication(),[n,a]=reactExports.useState(),[s,o]=reactExports.useState(),[c,d]=reactExports.useState();return jsxRuntimeExports.jsx("div",{className:" h-full flex justify-center items-center ",children:jsxRuntimeExports.jsxs("div",{className:" h-11/12 w-72 shadow-xl rounded-out border-light-grey border",children:[jsxRuntimeExports.jsx("img",{src:crown,className:"w-34 m-auto"}),jsxRuntimeExports.jsx("h1",{className:"txt-heading-colour text-center",children:"Log In"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"email",className:"txtbox mx-auto my-2 w-9/12",onChange:m=>{a(m.target.value),console.log(m.target.value)}}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"password",className:"txtbox mx-auto my-2 w-9/12",onChange:m=>{o(m.target.value)}}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"username",className:"txtbox mx-auto my-2 w-9/12",onChange:m=>{d(m.target.value)}}),jsxRuntimeExports.jsx("p",{className:"blue-btn mx-auto my-2 w-9/12 text-center",onClick:()=>{t(n??"",s??"")},children:"Login"}),jsxRuntimeExports.jsx("p",{className:"blue-btn mx-auto my-2 w-9/12 text-center",onClick:()=>{e(c??"",n??"",s??"")},children:"Sign Up"}),jsxRuntimeExports.jsx("p",{className:"red-btn mx-auto my-2 w-9/12 text-center",onClick:()=>{r()},children:"Google"})]})})}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded$2=["attr","size","title"];function _objectWithoutProperties$1(t,e){if(t==null)return{};var r=_objectWithoutPropertiesLoose$1(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _objectWithoutPropertiesLoose$1(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_extends.apply(this,arguments)}function ownKeys$1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(r),!0).forEach(function(n){_defineProperty$1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _defineProperty$1(t,e,r){return e=_toPropertyKey$1(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toPropertyKey$1(t){var e=_toPrimitive$1(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$1(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tree2Element(t){return t&&t.map((e,r)=>React.createElement(e.tag,_objectSpread({key:r},e.attr),Tree2Element(e.child)))}function GenIcon(t){return e=>React.createElement(IconBase,_extends({attr:_objectSpread({},t.attr)},e),Tree2Element(t.child))}function IconBase(t){var e=r=>{var{attr:n,size:a,title:s}=t,o=_objectWithoutProperties$1(t,_excluded$2),c=a||r.size||"1em",d;return r.className&&(d=r.className),t.className&&(d=(d?d+" ":"")+t.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:d,style:_objectSpread(_objectSpread({color:t.color||r.color},r.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&React.createElement("title",null,s),t.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,r=>e(r)):e(DefaultContext)}function LuBook(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"},child:[]}]})(t)}function LuChevronRight(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m9 18 6-6-6-6"},child:[]}]})(t)}function LuFilter(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function LuGamepad2(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"6",x2:"10",y1:"11",y2:"11"},child:[]},{tag:"line",attr:{x1:"8",x2:"8",y1:"9",y2:"13"},child:[]},{tag:"line",attr:{x1:"15",x2:"15.01",y1:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",x2:"18.01",y1:"10",y2:"10"},child:[]},{tag:"path",attr:{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"},child:[]}]})(t)}function LuMessageSquareText(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]},{tag:"path",attr:{d:"M13 8H7"},child:[]},{tag:"path",attr:{d:"M17 12H7"},child:[]}]})(t)}function LuPencil(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"},child:[]},{tag:"path",attr:{d:"m15 5 4 4"},child:[]}]})(t)}function LuSearch(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"path",attr:{d:"m21 21-4.3-4.3"},child:[]}]})(t)}function LuSettings(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function LuUsers(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function TbCards(t){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3.604 7.197l7.138 -3.109a.96 .96 0 0 1 1.27 .527l4.924 11.902a1 1 0 0 1 -.514 1.304l-7.137 3.109a.96 .96 0 0 1 -1.271 -.527l-4.924 -11.903a1 1 0 0 1 .514 -1.304z"},child:[]},{tag:"path",attr:{d:"M15 4h1a1 1 0 0 1 1 1v3.5"},child:[]},{tag:"path",attr:{d:"M20 6c.264 .112 .52 .217 .768 .315a1 1 0 0 1 .53 1.311l-2.298 5.374"},child:[]}]})(t)}function useFetch(){const t=getStorage();return{fetchImage:async r=>await getDownloadURL(ref(t,r))}}function useQuestions(t){const{fetchImage:e}=useFetch(),r=c=>Math.floor(Math.random()*c)+1,n=c=>`CCQ${r(c).toString().padStart(8,"0")}`,a=async c=>{const d=query(collection(db$1,"certchamps-questions")),m=await getCountFromServer(d),y=n(m.data().count);let A=query(collection(db$1,"certchamps-questions"),where("id","<=",y),where("id","!=",c),orderBy("id","desc"),limit(1));return(await getDocs(A)).empty&&(A=query(collection(db$1,"certchamps-questions"),where("id",">=",y),where("id","!=",c),orderBy("id","asc"),limit(1))),(await getDocs(A)).docs[0].id},s=async c=>{const d=(await getDoc(doc(db$1,"certchamps-questions",c))).data(),y=(await getDocs(collection(db$1,"certchamps-questions",c,"content"))).docs.map(async P=>{const Z=P.data();if(Z.image){const me=await e(Z.image);Z.image=me}return console.log(Z),Z}),A=await Promise.all(y);return{properties:d,content:A}};return{getRandomQuestion:a,fetchQuestion:s,loadQuestions:async()=>{const c=await s(await a(""));t.setQuestions(d=>[...d,c])}}}var lottie$2={exports:{}},lottie$1=lottie$2.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,function(module,exports){typeof document<"u"&&typeof navigator<"u"&&function(t,e){module.exports=e()}(lottie$1,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(t){return document.createElement(t)}function extendPrototype(t,e){var r,n=t.length,a;for(r=0;r<n;r+=1){a=t[r].prototype;for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e.prototype[s]=a[s])}}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}var audioControllerFactory=function(){function t(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(r){this.audios.push(r)},pause:function(){var r,n=this.audios.length;for(r=0;r<n;r+=1)this.audios[r].pause()},resume:function(){var r,n=this.audios.length;for(r=0;r<n;r+=1)this.audios[r].resume()},setRate:function(r){var n,a=this.audios.length;for(n=0;n<a;n+=1)this.audios[n].setRate(r)},createAudio:function(r){return this.audioFactory?this.audioFactory(r):window.Howl?new window.Howl({src:[r]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(r){this.audioFactory=r},setVolume:function(r){this._volume=r,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var r,n=this.audios.length;for(r=0;r<n;r+=1)this.audios[r].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),createTypedArray=function(){function t(r,n){var a=0,s=[],o;switch(r){case"int16":case"uint8c":o=1;break;default:o=1.1;break}for(a=0;a<n;a+=1)s.push(o);return s}function e(r,n){return r==="float32"?new Float32Array(n):r==="int16"?new Int16Array(n):r==="uint8c"?new Uint8ClampedArray(n):t(r,n)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?e:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function _typeof$6(t){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(t)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e,r=t.length;for(e=0;e<r;e+=1)BMMath[t[e]]=Math[t[e]]})(),BMMath.random=Math.random,BMMath.abs=function(t){var e=_typeof$6(t);if(e==="object"&&t.length){var r=createSizedArray(t.length),n,a=t.length;for(n=0;n<a;n+=1)r[n]=Math.abs(t[n]);return r}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,r,n){this.type=t,this.currentTime=e,this.totalTime=r,this.direction=n<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,r,n){this.type=t,this.currentLoop=r,this.totalLoops=e,this.direction=n<0?-1:1}function BMSegmentStartEvent(t,e,r){this.type=t,this.firstFrame=e,this.totalFrames=r}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}var createElementID=function(){var t=0;return function(){return t+=1,idPrefix$1+"__lottie_element_"+t}}();function HSVtoRGB(t,e,r){var n,a,s,o,c,d,m,y;switch(o=Math.floor(t*6),c=t*6-o,d=r*(1-e),m=r*(1-c*e),y=r*(1-(1-c)*e),o%6){case 0:n=r,a=y,s=d;break;case 1:n=m,a=r,s=d;break;case 2:n=d,a=r,s=y;break;case 3:n=d,a=m,s=r;break;case 4:n=y,a=d,s=r;break;case 5:n=r,a=d,s=m;break}return[n,a,s]}function RGBtoHSV(t,e,r){var n=Math.max(t,e,r),a=Math.min(t,e,r),s=n-a,o,c=n===0?0:s/n,d=n/255;switch(n){case a:o=0;break;case t:o=e-r+s*(e<r?6:0),o/=6*s;break;case e:o=r-t+s*2,o/=6*s;break;case r:o=t-e+s*4,o/=6*s;break}return[o,c,d]}function addSaturationToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[1]+=e,r[1]>1?r[1]=1:r[1]<=0&&(r[1]=0),HSVtoRGB(r[0],r[1],r[2])}function addBrightnessToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[2]+=e,r[2]>1?r[2]=1:r[2]<0&&(r[2]=0),HSVtoRGB(r[0],r[1],r[2])}function addHueToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[0]+=e/360,r[0]>1?r[0]-=1:r[0]<0&&(r[0]+=1),HSVtoRGB(r[0],r[1],r[2])}var rgbToHex=function(){var t=[],e,r;for(e=0;e<256;e+=1)r=e.toString(16),t[e]=r.length===1?"0"+r:r;return function(n,a,s){return n<0&&(n=0),a<0&&(a=0),s<0&&(s=0),"#"+t[n]+t[a]+t[s]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e};function createNS(t){return document.createElementNS(svgNS,t)}function _typeof$5(t){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(t)}var dataManager=function(){var t=1,e=[],r,n,a={onmessage:function(){},postMessage:function(Z){r({data:Z})}},s={postMessage:function(Z){a.onmessage({data:Z})}};function o(P){if(window.Worker&&window.Blob&&getWebWorker()){var Z=new Blob(["var _workerSelf = self; self.onmessage = ",P.toString()],{type:"text/javascript"}),me=URL.createObjectURL(Z);return new Worker(me)}return r=P,a}function c(){n||(n=o(function(Z){function me(){function Ge(df,So){var th,Rs,Ko=df.length,Vc,yh,wh,uf;for(Rs=0;Rs<Ko;Rs+=1)if(th=df[Rs],"ks"in th&&!th.completed){if(th.completed=!0,th.hasMask){var i1=th.masksProperties;for(yh=i1.length,Vc=0;Vc<yh;Vc+=1)if(i1[Vc].pt.k.i)Bs(i1[Vc].pt.k);else for(uf=i1[Vc].pt.k.length,wh=0;wh<uf;wh+=1)i1[Vc].pt.k[wh].s&&Bs(i1[Vc].pt.k[wh].s[0]),i1[Vc].pt.k[wh].e&&Bs(i1[Vc].pt.k[wh].e[0])}th.ty===0?(th.layers=De(th.refId,So),Ge(th.layers,So)):th.ty===4?Xe(th.shapes):th.ty===5&&qc(th)}}function ve(df,So){if(df){var th=0,Rs=df.length;for(th=0;th<Rs;th+=1)df[th].t===1&&(df[th].data.layers=De(df[th].data.refId,So),Ge(df[th].data.layers,So))}}function He(df,So){for(var th=0,Rs=So.length;th<Rs;){if(So[th].id===df)return So[th];th+=1}return null}function De(df,So){var th=He(df,So);return th?th.layers.__used?JSON.parse(JSON.stringify(th.layers)):(th.layers.__used=!0,th.layers):null}function Xe(df){var So,th=df.length,Rs,Ko;for(So=th-1;So>=0;So-=1)if(df[So].ty==="sh")if(df[So].ks.k.i)Bs(df[So].ks.k);else for(Ko=df[So].ks.k.length,Rs=0;Rs<Ko;Rs+=1)df[So].ks.k[Rs].s&&Bs(df[So].ks.k[Rs].s[0]),df[So].ks.k[Rs].e&&Bs(df[So].ks.k[Rs].e[0]);else df[So].ty==="gr"&&Xe(df[So].it)}function Bs(df){var So,th=df.i.length;for(So=0;So<th;So+=1)df.i[So][0]+=df.v[So][0],df.i[So][1]+=df.v[So][1],df.o[So][0]+=df.v[So][0],df.o[So][1]+=df.v[So][1]}function wt(df,So){var th=So?So.split("."):[100,100,100];return df[0]>th[0]?!0:th[0]>df[0]?!1:df[1]>th[1]?!0:th[1]>df[1]?!1:df[2]>th[2]?!0:th[2]>df[2]?!1:null}var li=function(){var df=[4,4,14];function So(Rs){var Ko=Rs.t.d;Rs.t.d={k:[{s:Ko,t:0}]}}function th(Rs){var Ko,Vc=Rs.length;for(Ko=0;Ko<Vc;Ko+=1)Rs[Ko].ty===5&&So(Rs[Ko])}return function(Rs){if(wt(df,Rs.v)&&(th(Rs.layers),Rs.assets)){var Ko,Vc=Rs.assets.length;for(Ko=0;Ko<Vc;Ko+=1)Rs.assets[Ko].layers&&th(Rs.assets[Ko].layers)}}}(),An=function(){var df=[4,7,99];return function(So){if(So.chars&&!wt(df,So.v)){var th,Rs=So.chars.length;for(th=0;th<Rs;th+=1){var Ko=So.chars[th];Ko.data&&Ko.data.shapes&&(Xe(Ko.data.shapes),Ko.data.ip=0,Ko.data.op=99999,Ko.data.st=0,Ko.data.sr=1,Ko.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},So.chars[th].t||(Ko.data.shapes.push({ty:"no"}),Ko.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Os=function(){var df=[5,7,15];function So(Rs){var Ko=Rs.t.p;typeof Ko.a=="number"&&(Ko.a={a:0,k:Ko.a}),typeof Ko.p=="number"&&(Ko.p={a:0,k:Ko.p}),typeof Ko.r=="number"&&(Ko.r={a:0,k:Ko.r})}function th(Rs){var Ko,Vc=Rs.length;for(Ko=0;Ko<Vc;Ko+=1)Rs[Ko].ty===5&&So(Rs[Ko])}return function(Rs){if(wt(df,Rs.v)&&(th(Rs.layers),Rs.assets)){var Ko,Vc=Rs.assets.length;for(Ko=0;Ko<Vc;Ko+=1)Rs.assets[Ko].layers&&th(Rs.assets[Ko].layers)}}}(),vh=function(){var df=[4,1,9];function So(Rs){var Ko,Vc=Rs.length,yh,wh;for(Ko=0;Ko<Vc;Ko+=1)if(Rs[Ko].ty==="gr")So(Rs[Ko].it);else if(Rs[Ko].ty==="fl"||Rs[Ko].ty==="st")if(Rs[Ko].c.k&&Rs[Ko].c.k[0].i)for(wh=Rs[Ko].c.k.length,yh=0;yh<wh;yh+=1)Rs[Ko].c.k[yh].s&&(Rs[Ko].c.k[yh].s[0]/=255,Rs[Ko].c.k[yh].s[1]/=255,Rs[Ko].c.k[yh].s[2]/=255,Rs[Ko].c.k[yh].s[3]/=255),Rs[Ko].c.k[yh].e&&(Rs[Ko].c.k[yh].e[0]/=255,Rs[Ko].c.k[yh].e[1]/=255,Rs[Ko].c.k[yh].e[2]/=255,Rs[Ko].c.k[yh].e[3]/=255);else Rs[Ko].c.k[0]/=255,Rs[Ko].c.k[1]/=255,Rs[Ko].c.k[2]/=255,Rs[Ko].c.k[3]/=255}function th(Rs){var Ko,Vc=Rs.length;for(Ko=0;Ko<Vc;Ko+=1)Rs[Ko].ty===4&&So(Rs[Ko].shapes)}return function(Rs){if(wt(df,Rs.v)&&(th(Rs.layers),Rs.assets)){var Ko,Vc=Rs.assets.length;for(Ko=0;Ko<Vc;Ko+=1)Rs.assets[Ko].layers&&th(Rs.assets[Ko].layers)}}}(),Fc=function(){var df=[4,4,18];function So(Rs){var Ko,Vc=Rs.length,yh,wh;for(Ko=Vc-1;Ko>=0;Ko-=1)if(Rs[Ko].ty==="sh")if(Rs[Ko].ks.k.i)Rs[Ko].ks.k.c=Rs[Ko].closed;else for(wh=Rs[Ko].ks.k.length,yh=0;yh<wh;yh+=1)Rs[Ko].ks.k[yh].s&&(Rs[Ko].ks.k[yh].s[0].c=Rs[Ko].closed),Rs[Ko].ks.k[yh].e&&(Rs[Ko].ks.k[yh].e[0].c=Rs[Ko].closed);else Rs[Ko].ty==="gr"&&So(Rs[Ko].it)}function th(Rs){var Ko,Vc,yh=Rs.length,wh,uf,i1,u1;for(Vc=0;Vc<yh;Vc+=1){if(Ko=Rs[Vc],Ko.hasMask){var h1=Ko.masksProperties;for(uf=h1.length,wh=0;wh<uf;wh+=1)if(h1[wh].pt.k.i)h1[wh].pt.k.c=h1[wh].cl;else for(u1=h1[wh].pt.k.length,i1=0;i1<u1;i1+=1)h1[wh].pt.k[i1].s&&(h1[wh].pt.k[i1].s[0].c=h1[wh].cl),h1[wh].pt.k[i1].e&&(h1[wh].pt.k[i1].e[0].c=h1[wh].cl)}Ko.ty===4&&So(Ko.shapes)}}return function(Rs){if(wt(df,Rs.v)&&(th(Rs.layers),Rs.assets)){var Ko,Vc=Rs.assets.length;for(Ko=0;Ko<Vc;Ko+=1)Rs.assets[Ko].layers&&th(Rs.assets[Ko].layers)}}}();function Hc(df){df.__complete||(vh(df),li(df),An(df),Os(df),Fc(df),Ge(df.layers,df.assets),ve(df.chars,df.assets),df.__complete=!0)}function qc(df){df.t.a.length===0&&"m"in df.t.p}var e1={};return e1.completeData=Hc,e1.checkColors=vh,e1.checkChars=An,e1.checkPathProperties=Os,e1.checkShapes=Fc,e1.completeLayers=Ge,e1}if(s.dataManager||(s.dataManager=me()),s.assetLoader||(s.assetLoader=function(){function Ge(He){var De=He.getResponseHeader("content-type");return De&&He.responseType==="json"&&De.indexOf("json")!==-1||He.response&&_typeof$5(He.response)==="object"?He.response:He.response&&typeof He.response=="string"?JSON.parse(He.response):He.responseText?JSON.parse(He.responseText):null}function ve(He,De,Xe,Bs){var wt,li=new XMLHttpRequest;try{li.responseType="json"}catch{}li.onreadystatechange=function(){if(li.readyState===4)if(li.status===200)wt=Ge(li),Xe(wt);else try{wt=Ge(li),Xe(wt)}catch(An){Bs&&Bs(An)}};try{li.open(["G","E","T"].join(""),He,!0)}catch{li.open(["G","E","T"].join(""),De+"/"+He,!0)}li.send()}return{load:ve}}()),Z.data.type==="loadAnimation")s.assetLoader.load(Z.data.path,Z.data.fullPath,function(Ge){s.dataManager.completeData(Ge),s.postMessage({id:Z.data.id,payload:Ge,status:"success"})},function(){s.postMessage({id:Z.data.id,status:"error"})});else if(Z.data.type==="complete"){var _e=Z.data.animation;s.dataManager.completeData(_e),s.postMessage({id:Z.data.id,payload:_e,status:"success"})}else Z.data.type==="loadData"&&s.assetLoader.load(Z.data.path,Z.data.fullPath,function(Ge){s.postMessage({id:Z.data.id,payload:Ge,status:"success"})},function(){s.postMessage({id:Z.data.id,status:"error"})})}),n.onmessage=function(P){var Z=P.data,me=Z.id,_e=e[me];e[me]=null,Z.status==="success"?_e.onComplete(Z.payload):_e.onError&&_e.onError()})}function d(P,Z){t+=1;var me="processId_"+t;return e[me]={onComplete:P,onError:Z},me}function m(P,Z,me){c();var _e=d(Z,me);n.postMessage({type:"loadAnimation",path:P,fullPath:window.location.origin+window.location.pathname,id:_e})}function y(P,Z,me){c();var _e=d(Z,me);n.postMessage({type:"loadData",path:P,fullPath:window.location.origin+window.location.pathname,id:_e})}function A(P,Z,me){c();var _e=d(Z,me);n.postMessage({type:"complete",animation:P,id:_e})}return{loadAnimation:m,loadData:y,completeAnimation:A}}(),ImagePreloader=function(){var t=function(){var ve=createTag("canvas");ve.width=1,ve.height=1;var He=ve.getContext("2d");return He.fillStyle="rgba(0,0,0,0)",He.fillRect(0,0,1,1),ve}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(ve,He,De){var Xe="";if(ve.e)Xe=ve.p;else if(He){var Bs=ve.p;Bs.indexOf("images/")!==-1&&(Bs=Bs.split("/")[1]),Xe=He+Bs}else Xe=De,Xe+=ve.u?ve.u:"",Xe+=ve.p;return Xe}function a(ve){var He=0,De=setInterval((function(){var Xe=ve.getBBox();(Xe.width||He>500)&&(this._imageLoaded(),clearInterval(De)),He+=1}).bind(this),50)}function s(ve){var He=n(ve,this.assetsPath,this.path),De=createNS("image");isSafari?this.testImageLoaded(De):De.addEventListener("load",this._imageLoaded,!1),De.addEventListener("error",(function(){Xe.img=t,this._imageLoaded()}).bind(this),!1),De.setAttributeNS("http://www.w3.org/1999/xlink","href",He),this._elementHelper.append?this._elementHelper.append(De):this._elementHelper.appendChild(De);var Xe={img:De,assetData:ve};return Xe}function o(ve){var He=n(ve,this.assetsPath,this.path),De=createTag("img");De.crossOrigin="anonymous",De.addEventListener("load",this._imageLoaded,!1),De.addEventListener("error",(function(){Xe.img=t,this._imageLoaded()}).bind(this),!1),De.src=He;var Xe={img:De,assetData:ve};return Xe}function c(ve){var He={assetData:ve},De=n(ve,this.assetsPath,this.path);return dataManager.loadData(De,(function(Xe){He.img=Xe,this._footageLoaded()}).bind(this),(function(){He.img={},this._footageLoaded()}).bind(this)),He}function d(ve,He){this.imagesLoadedCb=He;var De,Xe=ve.length;for(De=0;De<Xe;De+=1)ve[De].layers||(!ve[De].t||ve[De].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(ve[De]))):ve[De].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(ve[De]))))}function m(ve){this.path=ve||""}function y(ve){this.assetsPath=ve||""}function A(ve){for(var He=0,De=this.images.length;He<De;){if(this.images[He].assetData===ve)return this.images[He].img;He+=1}return null}function P(){this.imagesLoadedCb=null,this.images.length=0}function Z(){return this.totalImages===this.loadedAssets}function me(){return this.totalFootages===this.loadedFootagesCount}function _e(ve,He){ve==="svg"?(this._elementHelper=He,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Ge(){this._imageLoaded=e.bind(this),this._footageLoaded=r.bind(this),this.testImageLoaded=a.bind(this),this.createFootageData=c.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Ge.prototype={loadAssets:d,setAssetsPath:y,setPath:m,loadedImages:Z,loadedFootages:me,destroy:P,getAsset:A,createImgData:o,createImageData:s,imageLoaded:e,footageLoaded:r,setCacheType:_e},Ge}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,r){if(this._cbs[e])for(var n=this._cbs[e],a=0;a<n.length;a+=1)n[a](r)},addEventListener:function(e,r){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(r),(function(){this.removeEventListener(e,r)}).bind(this)},removeEventListener:function(e,r){if(!r)this._cbs[e]=null;else if(this._cbs[e]){for(var n=0,a=this._cbs[e].length;n<a;)this._cbs[e][n]===r&&(this._cbs[e].splice(n,1),n-=1,a-=1),n+=1;this._cbs[e].length||(this._cbs[e]=null)}}};var markerParser=function(){function t(e){for(var r=e.split(`\r
`),n={},a,s=0,o=0;o<r.length;o+=1)a=r[o].split(":"),a.length===2&&(n[a[0]]=a[1].trim(),s+=1);if(s===0)throw new Error;return n}return function(e){for(var r=[],n=0;n<e.length;n+=1){var a=e[n],s={time:a.tm,duration:a.dr};try{s.payload=JSON.parse(e[n].cm)}catch{try{s.payload=t(e[n].cm)}catch{s.payload={name:e[n].cm}}}r.push(s)}return r}}(),ProjectInterface=function(){function t(e){this.compositions.push(e)}return function(){function e(r){for(var n=0,a=this.compositions.length;n<a;){if(this.compositions[n].data&&this.compositions[n].data.nm===r)return this.compositions[n].prepareFrame&&this.compositions[n].data.xt&&this.compositions[n].prepareFrame(this.currentFrame),this.compositions[n].compInterface;n+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),renderers={},registerRenderer=function(e,r){renderers[e]=r};function getRenderer(t){return renderers[t]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var t in renderers)if(renderers[t])return t;return""}function _typeof$4(t){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(t)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";t.animType?e=t.animType:t.renderer&&(e=t.renderer);var r=getRenderer(e);this.renderer=new r(this,t.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,t.loop===""||t.loop===null||t.loop===void 0||t.loop===!0?this.loop=!0:t.loop===!1?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay="autoplay"in t?t.autoplay:!0,this.name=t.name?t.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(t,"autoloadSegments")?t.autoloadSegments:!0,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(t.path.lastIndexOf("\\")!==-1?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(t){dataManager.completeAnimation(t,this.configAnimation)},AnimationItem.prototype.setData=function(t,e){e&&_typeof$4(e)!=="object"&&(e=JSON.parse(e));var r={wrapper:t,animationData:e},n=t.attributes;r.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",r.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var a=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";a==="false"?r.loop=!1:a==="true"?r.loop=!0:a!==""&&(r.loop=parseInt(a,10));var s=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:n.getNamedItem("bm-autoplay")?n.getNamedItem("bm-autoplay").value:!0;r.autoplay=s!=="false",r.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"";var o=n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"";o==="false"&&(r.prerender=!1),r.path?this.setParams(r):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e=this.animationData.layers,r,n=e.length,a=t.layers,s,o=a.length;for(s=0;s<o;s+=1)for(r=0;r<n;){if(e[r].id===a[s].id){e[r]=a[s];break}r+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(n=t.assets.length,r=0;r<n;r+=1)this.animationData.assets.push(t.assets[r]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(t){this.animationData=t;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||t.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var e=t.shift();this.timeCompleted=e.time*this.frameRate;var r=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(r,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var t=this.animationData.segments;t||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(t,e){var r=typeof t=="number"?t:void 0,n=typeof e=="number"?e:void 0;this.renderer.updateContainerSize(r,n)},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,r=0;r<this.markers.length;r+=1)if(e=this.markers[r],e.payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,r){if(!(r&&this.name!==r)){var n=Number(t);if(isNaN(n)){var a=this.getMarkerData(t);a&&this.goToAndStop(a.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,r){if(!(r&&this.name!==r)){var n=Number(t);if(isNaN(n)){var a=this.getMarkerData(t);a&&(a.duration?this.playSegments([a.time,a.time+a.duration],!0):this.goToAndStop(a.time,!0))}else this.goToAndStop(n,e,r);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!(this.isPaused===!0||this.isLoaded===!1)){var e=this.currentRawFrame+t*this.frameModifier,r=!1;e>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(r=!0,e=this.totalFrames-1):e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):e<0?this.checkSegments(e%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(r=!0,e=0)):this.setCurrentRawFrameValue(e),r&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var r=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?r=t:this.currentRawFrame+this.firstFrame>e&&(r=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,r!==-1&&this.goToAndStop(r,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),_typeof$4(t[0])==="object"){var r,n=t.length;for(r=0;r<n;r+=1)this.segments.push(t[r])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return this.segments.length?(this.adjustSegment(this.segments.shift(),t),!0):!1},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(t){this.loop=t},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var r=t.p;r.indexOf("images/")!==-1&&(r=r.split("/")[1]),e=this.assetsPath+r}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,r=this.assets.length;e<r;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(t,e,r){try{var n=this.renderer.getElementByPath(t);n.updateDocumentData(e,r)}catch{}},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(t,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}t==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),t==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),t==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),t==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),t==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var t={},e=[],r=0,n=0,a=0,s=!0,o=!1;function c(So){for(var th=0,Rs=So.target;th<n;)e[th].animation===Rs&&(e.splice(th,1),th-=1,n-=1,Rs.isPaused||A()),th+=1}function d(So,th){if(!So)return null;for(var Rs=0;Rs<n;){if(e[Rs].elem===So&&e[Rs].elem!==null)return e[Rs].animation;Rs+=1}var Ko=new AnimationItem;return P(Ko,So),Ko.setData(So,th),Ko}function m(){var So,th=e.length,Rs=[];for(So=0;So<th;So+=1)Rs.push(e[So].animation);return Rs}function y(){a+=1,vh()}function A(){a-=1}function P(So,th){So.addEventListener("destroy",c),So.addEventListener("_active",y),So.addEventListener("_idle",A),e.push({elem:th,animation:So}),n+=1}function Z(So){var th=new AnimationItem;return P(th,null),th.setParams(So),th}function me(So,th){var Rs;for(Rs=0;Rs<n;Rs+=1)e[Rs].animation.setSpeed(So,th)}function _e(So,th){var Rs;for(Rs=0;Rs<n;Rs+=1)e[Rs].animation.setDirection(So,th)}function Ge(So){var th;for(th=0;th<n;th+=1)e[th].animation.play(So)}function ve(So){var th=So-r,Rs;for(Rs=0;Rs<n;Rs+=1)e[Rs].animation.advanceTime(th);r=So,a&&!o?window.requestAnimationFrame(ve):s=!0}function He(So){r=So,window.requestAnimationFrame(ve)}function De(So){var th;for(th=0;th<n;th+=1)e[th].animation.pause(So)}function Xe(So,th,Rs){var Ko;for(Ko=0;Ko<n;Ko+=1)e[Ko].animation.goToAndStop(So,th,Rs)}function Bs(So){var th;for(th=0;th<n;th+=1)e[th].animation.stop(So)}function wt(So){var th;for(th=0;th<n;th+=1)e[th].animation.togglePause(So)}function li(So){var th;for(th=n-1;th>=0;th-=1)e[th].animation.destroy(So)}function An(So,th,Rs){var Ko=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Vc,yh=Ko.length;for(Vc=0;Vc<yh;Vc+=1)Rs&&Ko[Vc].setAttribute("data-bm-type",Rs),d(Ko[Vc],So);if(th&&yh===0){Rs||(Rs="svg");var wh=document.getElementsByTagName("body")[0];wh.innerText="";var uf=createTag("div");uf.style.width="100%",uf.style.height="100%",uf.setAttribute("data-bm-type",Rs),wh.appendChild(uf),d(uf,So)}}function Os(){var So;for(So=0;So<n;So+=1)e[So].animation.resize()}function vh(){!o&&a&&s&&(window.requestAnimationFrame(He),s=!1)}function Fc(){o=!0}function Hc(){o=!1,vh()}function qc(So,th){var Rs;for(Rs=0;Rs<n;Rs+=1)e[Rs].animation.setVolume(So,th)}function e1(So){var th;for(th=0;th<n;th+=1)e[th].animation.mute(So)}function df(So){var th;for(th=0;th<n;th+=1)e[th].animation.unmute(So)}return t.registerAnimation=d,t.loadAnimation=Z,t.setSpeed=me,t.setDirection=_e,t.play=Ge,t.pause=De,t.stop=Bs,t.togglePause=wt,t.searchAnimations=An,t.resize=Os,t.goToAndStop=Xe,t.destroy=li,t.freeze=Fc,t.unfreeze=Hc,t.setVolume=qc,t.mute=e1,t.unmute=df,t.getRegisteredAnimations=m,t}(),BezierFactory=function(){var t={};t.getBezierEasing=r;var e={};function r(He,De,Xe,Bs,wt){var li=wt||("bez_"+He+"_"+De+"_"+Xe+"_"+Bs).replace(/\./g,"p");if(e[li])return e[li];var An=new ve([He,De,Xe,Bs]);return e[li]=An,An}var n=4,a=.001,s=1e-7,o=10,c=11,d=1/(c-1),m=typeof Float32Array=="function";function y(He,De){return 1-3*De+3*He}function A(He,De){return 3*De-6*He}function P(He){return 3*He}function Z(He,De,Xe){return((y(De,Xe)*He+A(De,Xe))*He+P(De))*He}function me(He,De,Xe){return 3*y(De,Xe)*He*He+2*A(De,Xe)*He+P(De)}function _e(He,De,Xe,Bs,wt){var li,An,Os=0;do An=De+(Xe-De)/2,li=Z(An,Bs,wt)-He,li>0?Xe=An:De=An;while(Math.abs(li)>s&&++Os<o);return An}function Ge(He,De,Xe,Bs){for(var wt=0;wt<n;++wt){var li=me(De,Xe,Bs);if(li===0)return De;var An=Z(De,Xe,Bs)-He;De-=An/li}return De}function ve(He){this._p=He,this._mSampleValues=m?new Float32Array(c):new Array(c),this._precomputed=!1,this.get=this.get.bind(this)}return ve.prototype={get:function(De){var Xe=this._p[0],Bs=this._p[1],wt=this._p[2],li=this._p[3];return this._precomputed||this._precompute(),Xe===Bs&&wt===li?De:De===0?0:De===1?1:Z(this._getTForX(De),Bs,li)},_precompute:function(){var De=this._p[0],Xe=this._p[1],Bs=this._p[2],wt=this._p[3];this._precomputed=!0,(De!==Xe||Bs!==wt)&&this._calcSampleValues()},_calcSampleValues:function(){for(var De=this._p[0],Xe=this._p[2],Bs=0;Bs<c;++Bs)this._mSampleValues[Bs]=Z(Bs*d,De,Xe)},_getTForX:function(De){for(var Xe=this._p[0],Bs=this._p[2],wt=this._mSampleValues,li=0,An=1,Os=c-1;An!==Os&&wt[An]<=De;++An)li+=d;--An;var vh=(De-wt[An])/(wt[An+1]-wt[An]),Fc=li+vh*d,Hc=me(Fc,Xe,Bs);return Hc>=a?Ge(De,Fc,Xe,Bs):Hc===0?Fc:_e(De,li,li+d,Xe,Bs)}},t}(),pooling=function(){function t(e){return e.concat(createSizedArray(e.length))}return{double:t}}(),poolFactory=function(){return function(t,e,r){var n=0,a=t,s=createSizedArray(a),o={newElement:c,release:d};function c(){var m;return n?(n-=1,m=s[n]):m=e(),m}function d(m){n===a&&(s=pooling.double(s),a*=2),r&&r(m),s[n]=m,n+=1}return o}}(),bezierLengthPool=function(){function t(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,t)}(),segmentsLengthPool=function(){function t(){return{lengths:[],totalLength:0}}function e(r){var n,a=r.lengths.length;for(n=0;n<a;n+=1)bezierLengthPool.release(r.lengths[n]);r.lengths.length=0}return poolFactory(8,t,e)}();function bezFunction(){var t=Math;function e(P,Z,me,_e,Ge,ve){var He=P*_e+Z*Ge+me*ve-Ge*_e-ve*P-me*Z;return He>-.001&&He<.001}function r(P,Z,me,_e,Ge,ve,He,De,Xe){if(me===0&&ve===0&&Xe===0)return e(P,Z,_e,Ge,He,De);var Bs=t.sqrt(t.pow(_e-P,2)+t.pow(Ge-Z,2)+t.pow(ve-me,2)),wt=t.sqrt(t.pow(He-P,2)+t.pow(De-Z,2)+t.pow(Xe-me,2)),li=t.sqrt(t.pow(He-_e,2)+t.pow(De-Ge,2)+t.pow(Xe-ve,2)),An;return Bs>wt?Bs>li?An=Bs-wt-li:An=li-wt-Bs:li>wt?An=li-wt-Bs:An=wt-Bs-li,An>-1e-4&&An<1e-4}var n=function(){return function(P,Z,me,_e){var Ge=getDefaultCurveSegments(),ve,He,De,Xe,Bs,wt=0,li,An=[],Os=[],vh=bezierLengthPool.newElement();for(De=me.length,ve=0;ve<Ge;ve+=1){for(Bs=ve/(Ge-1),li=0,He=0;He<De;He+=1)Xe=bmPow(1-Bs,3)*P[He]+3*bmPow(1-Bs,2)*Bs*me[He]+3*(1-Bs)*bmPow(Bs,2)*_e[He]+bmPow(Bs,3)*Z[He],An[He]=Xe,Os[He]!==null&&(li+=bmPow(An[He]-Os[He],2)),Os[He]=An[He];li&&(li=bmSqrt(li),wt+=li),vh.percents[ve]=Bs,vh.lengths[ve]=wt}return vh.addedLength=wt,vh}}();function a(P){var Z=segmentsLengthPool.newElement(),me=P.c,_e=P.v,Ge=P.o,ve=P.i,He,De=P._length,Xe=Z.lengths,Bs=0;for(He=0;He<De-1;He+=1)Xe[He]=n(_e[He],_e[He+1],Ge[He],ve[He+1]),Bs+=Xe[He].addedLength;return me&&De&&(Xe[He]=n(_e[He],_e[0],Ge[He],ve[0]),Bs+=Xe[He].addedLength),Z.totalLength=Bs,Z}function s(P){this.segmentLength=0,this.points=new Array(P)}function o(P,Z){this.partialLength=P,this.point=Z}var c=function(){var P={};return function(Z,me,_e,Ge){var ve=(Z[0]+"_"+Z[1]+"_"+me[0]+"_"+me[1]+"_"+_e[0]+"_"+_e[1]+"_"+Ge[0]+"_"+Ge[1]).replace(/\./g,"p");if(!P[ve]){var He=getDefaultCurveSegments(),De,Xe,Bs,wt,li,An=0,Os,vh,Fc=null;Z.length===2&&(Z[0]!==me[0]||Z[1]!==me[1])&&e(Z[0],Z[1],me[0],me[1],Z[0]+_e[0],Z[1]+_e[1])&&e(Z[0],Z[1],me[0],me[1],me[0]+Ge[0],me[1]+Ge[1])&&(He=2);var Hc=new s(He);for(Bs=_e.length,De=0;De<He;De+=1){for(vh=createSizedArray(Bs),li=De/(He-1),Os=0,Xe=0;Xe<Bs;Xe+=1)wt=bmPow(1-li,3)*Z[Xe]+3*bmPow(1-li,2)*li*(Z[Xe]+_e[Xe])+3*(1-li)*bmPow(li,2)*(me[Xe]+Ge[Xe])+bmPow(li,3)*me[Xe],vh[Xe]=wt,Fc!==null&&(Os+=bmPow(vh[Xe]-Fc[Xe],2));Os=bmSqrt(Os),An+=Os,Hc.points[De]=new o(Os,vh),Fc=vh}Hc.segmentLength=An,P[ve]=Hc}return P[ve]}}();function d(P,Z){var me=Z.percents,_e=Z.lengths,Ge=me.length,ve=bmFloor((Ge-1)*P),He=P*Z.addedLength,De=0;if(ve===Ge-1||ve===0||He===_e[ve])return me[ve];for(var Xe=_e[ve]>He?-1:1,Bs=!0;Bs;)if(_e[ve]<=He&&_e[ve+1]>He?(De=(He-_e[ve])/(_e[ve+1]-_e[ve]),Bs=!1):ve+=Xe,ve<0||ve>=Ge-1){if(ve===Ge-1)return me[ve];Bs=!1}return me[ve]+(me[ve+1]-me[ve])*De}function m(P,Z,me,_e,Ge,ve){var He=d(Ge,ve),De=1-He,Xe=t.round((De*De*De*P[0]+(He*De*De+De*He*De+De*De*He)*me[0]+(He*He*De+De*He*He+He*De*He)*_e[0]+He*He*He*Z[0])*1e3)/1e3,Bs=t.round((De*De*De*P[1]+(He*De*De+De*He*De+De*De*He)*me[1]+(He*He*De+De*He*He+He*De*He)*_e[1]+He*He*He*Z[1])*1e3)/1e3;return[Xe,Bs]}var y=createTypedArray("float32",8);function A(P,Z,me,_e,Ge,ve,He){Ge<0?Ge=0:Ge>1&&(Ge=1);var De=d(Ge,He);ve=ve>1?1:ve;var Xe=d(ve,He),Bs,wt=P.length,li=1-De,An=1-Xe,Os=li*li*li,vh=De*li*li*3,Fc=De*De*li*3,Hc=De*De*De,qc=li*li*An,e1=De*li*An+li*De*An+li*li*Xe,df=De*De*An+li*De*Xe+De*li*Xe,So=De*De*Xe,th=li*An*An,Rs=De*An*An+li*Xe*An+li*An*Xe,Ko=De*Xe*An+li*Xe*Xe+De*An*Xe,Vc=De*Xe*Xe,yh=An*An*An,wh=Xe*An*An+An*Xe*An+An*An*Xe,uf=Xe*Xe*An+An*Xe*Xe+Xe*An*Xe,i1=Xe*Xe*Xe;for(Bs=0;Bs<wt;Bs+=1)y[Bs*4]=t.round((Os*P[Bs]+vh*me[Bs]+Fc*_e[Bs]+Hc*Z[Bs])*1e3)/1e3,y[Bs*4+1]=t.round((qc*P[Bs]+e1*me[Bs]+df*_e[Bs]+So*Z[Bs])*1e3)/1e3,y[Bs*4+2]=t.round((th*P[Bs]+Rs*me[Bs]+Ko*_e[Bs]+Vc*Z[Bs])*1e3)/1e3,y[Bs*4+3]=t.round((yh*P[Bs]+wh*me[Bs]+uf*_e[Bs]+i1*Z[Bs])*1e3)/1e3;return y}return{getSegmentsLength:a,getNewSegment:A,getPointInSegment:m,buildBezierData:c,pointOnLine2D:e,pointOnLine3D:r}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(t,e){var r=this.offsetTime,n;this.propType==="multidimensional"&&(n=createTypedArray("float32",this.pv.length));for(var a=e.lastIndex,s=a,o=this.keyframes.length-1,c=!0,d,m,y;c;){if(d=this.keyframes[s],m=this.keyframes[s+1],s===o-1&&t>=m.t-r){d.h&&(d=m),a=0;break}if(m.t-r>t){a=s;break}s<o-1?s+=1:(a=0,c=!1)}y=this.keyframesMetadata[s]||{};var A,P,Z,me,_e,Ge,ve=m.t-r,He=d.t-r,De;if(d.to){y.bezierData||(y.bezierData=bez.buildBezierData(d.s,m.s||d.e,d.to,d.ti));var Xe=y.bezierData;if(t>=ve||t<He){var Bs=t>=ve?Xe.points.length-1:0;for(P=Xe.points[Bs].point.length,A=0;A<P;A+=1)n[A]=Xe.points[Bs].point[A]}else{y.__fnct?Ge=y.__fnct:(Ge=BezierFactory.getBezierEasing(d.o.x,d.o.y,d.i.x,d.i.y,d.n).get,y.__fnct=Ge),Z=Ge((t-He)/(ve-He));var wt=Xe.segmentLength*Z,li,An=e.lastFrame<t&&e._lastKeyframeIndex===s?e._lastAddedLength:0;for(_e=e.lastFrame<t&&e._lastKeyframeIndex===s?e._lastPoint:0,c=!0,me=Xe.points.length;c;){if(An+=Xe.points[_e].partialLength,wt===0||Z===0||_e===Xe.points.length-1){for(P=Xe.points[_e].point.length,A=0;A<P;A+=1)n[A]=Xe.points[_e].point[A];break}else if(wt>=An&&wt<An+Xe.points[_e+1].partialLength){for(li=(wt-An)/Xe.points[_e+1].partialLength,P=Xe.points[_e].point.length,A=0;A<P;A+=1)n[A]=Xe.points[_e].point[A]+(Xe.points[_e+1].point[A]-Xe.points[_e].point[A])*li;break}_e<me-1?_e+=1:c=!1}e._lastPoint=_e,e._lastAddedLength=An-Xe.points[_e].partialLength,e._lastKeyframeIndex=s}}else{var Os,vh,Fc,Hc,qc;if(o=d.s.length,De=m.s||d.e,this.sh&&d.h!==1)if(t>=ve)n[0]=De[0],n[1]=De[1],n[2]=De[2];else if(t<=He)n[0]=d.s[0],n[1]=d.s[1],n[2]=d.s[2];else{var e1=createQuaternion(d.s),df=createQuaternion(De),So=(t-He)/(ve-He);quaternionToEuler(n,slerp(e1,df,So))}else for(s=0;s<o;s+=1)d.h!==1&&(t>=ve?Z=1:t<He?Z=0:(d.o.x.constructor===Array?(y.__fnct||(y.__fnct=[]),y.__fnct[s]?Ge=y.__fnct[s]:(Os=d.o.x[s]===void 0?d.o.x[0]:d.o.x[s],vh=d.o.y[s]===void 0?d.o.y[0]:d.o.y[s],Fc=d.i.x[s]===void 0?d.i.x[0]:d.i.x[s],Hc=d.i.y[s]===void 0?d.i.y[0]:d.i.y[s],Ge=BezierFactory.getBezierEasing(Os,vh,Fc,Hc).get,y.__fnct[s]=Ge)):y.__fnct?Ge=y.__fnct:(Os=d.o.x,vh=d.o.y,Fc=d.i.x,Hc=d.i.y,Ge=BezierFactory.getBezierEasing(Os,vh,Fc,Hc).get,d.keyframeMetadata=Ge),Z=Ge((t-He)/(ve-He)))),De=m.s||d.e,qc=d.h===1?d.s[s]:d.s[s]+(De[s]-d.s[s])*Z,this.propType==="multidimensional"?n[s]=qc:n=qc}return e.lastIndex=a,n}function slerp(t,e,r){var n=[],a=t[0],s=t[1],o=t[2],c=t[3],d=e[0],m=e[1],y=e[2],A=e[3],P,Z,me,_e,Ge;return Z=a*d+s*m+o*y+c*A,Z<0&&(Z=-Z,d=-d,m=-m,y=-y,A=-A),1-Z>1e-6?(P=Math.acos(Z),me=Math.sin(P),_e=Math.sin((1-r)*P)/me,Ge=Math.sin(r*P)/me):(_e=1-r,Ge=r),n[0]=_e*a+Ge*d,n[1]=_e*s+Ge*m,n[2]=_e*o+Ge*y,n[3]=_e*c+Ge*A,n}function quaternionToEuler(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],o=Math.atan2(2*n*s-2*r*a,1-2*n*n-2*a*a),c=Math.asin(2*r*n+2*a*s),d=Math.atan2(2*r*s-2*n*a,1-2*r*r-2*a*a);t[0]=o/degToRads,t[1]=c/degToRads,t[2]=d/degToRads}function createQuaternion(t){var e=t[0]*degToRads,r=t[1]*degToRads,n=t[2]*degToRads,a=Math.cos(e/2),s=Math.cos(r/2),o=Math.cos(n/2),c=Math.sin(e/2),d=Math.sin(r/2),m=Math.sin(n/2),y=a*s*o-c*d*m,A=c*d*o+a*s*m,P=c*s*o+a*d*m,Z=a*d*o-c*s*m;return[A,P,Z,y]}function getValueAtCurrentTime(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=r&&t>=r||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var n=this.interpolateValue(t,this._caching);this.pv=n}return this._caching.lastFrame=t,this.pv}function setVValue(t){var e;if(this.propType==="unidimensional")e=t*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var r=0,n=this.v.length;r<n;)e=t[r]*this.mult,mathAbs(this.v[r]-e)>1e-5&&(this.v[r]=e,this._mdf=!0),r+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var t,e=this.effectsSequence.length,r=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)r=this.effectsSequence[t](r);this.setVValue(r),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function ValueProperty(t,e,r,n){this.propType="unidimensional",this.mult=r||1,this.data=e,this.v=r?e.k*r:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=n,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(t,e,r,n){this.propType="multidimensional",this.mult=r||1,this.data=e,this._mdf=!1,this.elem=t,this.container=n,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var a,s=e.k.length;for(this.v=createTypedArray("float32",s),this.pv=createTypedArray("float32",s),this.vel=createTypedArray("float32",s),a=0;a<s;a+=1)this.v[a]=e.k[a]*this.mult,this.pv[a]=e.k[a];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(t,e,r,n){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=r||1,this.elem=t,this.container=n,this.comp=t.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(t,e,r,n){this.propType="multidimensional";var a,s=e.k.length,o,c,d,m;for(a=0;a<s-1;a+=1)e.k[a].to&&e.k[a].s&&e.k[a+1]&&e.k[a+1].s&&(o=e.k[a].s,c=e.k[a+1].s,d=e.k[a].to,m=e.k[a].ti,(o.length===2&&!(o[0]===c[0]&&o[1]===c[1])&&bez.pointOnLine2D(o[0],o[1],c[0],c[1],o[0]+d[0],o[1]+d[1])&&bez.pointOnLine2D(o[0],o[1],c[0],c[1],c[0]+m[0],c[1]+m[1])||o.length===3&&!(o[0]===c[0]&&o[1]===c[1]&&o[2]===c[2])&&bez.pointOnLine3D(o[0],o[1],o[2],c[0],c[1],c[2],o[0]+d[0],o[1]+d[1],o[2]+d[2])&&bez.pointOnLine3D(o[0],o[1],o[2],c[0],c[1],c[2],c[0]+m[0],c[1]+m[1],c[2]+m[2]))&&(e.k[a].to=null,e.k[a].ti=null),o[0]===c[0]&&o[1]===c[1]&&d[0]===0&&d[1]===0&&m[0]===0&&m[1]===0&&(o.length===2||o[2]===c[2]&&d[2]===0&&m[2]===0)&&(e.k[a].to=null,e.k[a].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=r||1,this.elem=t,this.container=n,this.comp=t.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var y=e.k[0].s.length;for(this.v=createTypedArray("float32",y),this.pv=createTypedArray("float32",y),a=0;a<y;a+=1)this.v[a]=initFrame,this.pv[a]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",y)},this.addEffect=addEffect}var PropertyFactory=function(){function t(r,n,a,s,o){n.sid&&(n=r.globalData.slotManager.getProp(n));var c;if(!n.k.length)c=new ValueProperty(r,n,s,o);else if(typeof n.k[0]=="number")c=new MultiDimensionalProperty(r,n,s,o);else switch(a){case 0:c=new KeyframedValueProperty(r,n,s,o);break;case 1:c=new KeyframedMultidimensionalProperty(r,n,s,o);break}return c.effectsSequence.length&&o.addDynamicProperty(c),c}var e={getProp:t};return e}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var e,r=this.dynamicProperties.length;for(e=0;e<r;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function t(){return createTypedArray("float32",2)}return poolFactory(8,t)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var r=0;r<e;)this.v[r]=pointPool.newElement(),this.o[r]=pointPool.newElement(),this.i[r]=pointPool.newElement(),r+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,r,n,a){var s;switch(this._length=Math.max(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),r){case"v":s=this.v;break;case"i":s=this.i;break;case"o":s=this.o;break;default:s=[];break}(!s[n]||s[n]&&!a)&&(s[n]=pointPool.newElement()),s[n][0]=t,s[n][1]=e},ShapePath.prototype.setTripleAt=function(t,e,r,n,a,s,o,c){this.setXYAt(t,e,"v",o,c),this.setXYAt(r,n,"o",o,c),this.setXYAt(a,s,"i",o,c)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,r=this.o,n=this.i,a=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],n[0][0],n[0][1],r[0][0],r[0][1],0,!1),a=1);var s=this._length-1,o=this._length,c;for(c=a;c<o;c+=1)t.setTripleAt(e[s][0],e[s][1],n[s][0],n[s][1],r[s][0],r[s][1],c,!1),s-=1;return t},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function t(){return new ShapePath}function e(a){var s=a._length,o;for(o=0;o<s;o+=1)pointPool.release(a.v[o]),pointPool.release(a.i[o]),pointPool.release(a.o[o]),a.v[o]=null,a.i[o]=null,a.o[o]=null;a._length=0,a.c=!1}function r(a){var s=n.newElement(),o,c=a._length===void 0?a.v.length:a._length;for(s.setLength(c),s.c=a.c,o=0;o<c;o+=1)s.setTripleAt(a.v[o][0],a.v[o][1],a.o[o][0],a.o[o][1],a.i[o][0],a.i[o][1],o);return s}var n=poolFactory(4,t,e);return n.clone=r,n}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0};var shapeCollectionPool=function(){var t={newShapeCollection:a,release:s},e=0,r=4,n=createSizedArray(r);function a(){var o;return e?(e-=1,o=n[e]):o=new ShapeCollection,o}function s(o){var c,d=o._length;for(c=0;c<d;c+=1)shapePool.release(o.shapes[c]);o._length=0,e===r&&(n=pooling.double(n),r*=2),n[e]=o,e+=1}return t}(),ShapePropertyFactory=function(){var t=-999999;function e(ve,He,De){var Xe=De.lastIndex,Bs,wt,li,An,Os,vh,Fc,Hc,qc,e1=this.keyframes;if(ve<e1[0].t-this.offsetTime)Bs=e1[0].s[0],li=!0,Xe=0;else if(ve>=e1[e1.length-1].t-this.offsetTime)Bs=e1[e1.length-1].s?e1[e1.length-1].s[0]:e1[e1.length-2].e[0],li=!0;else{for(var df=Xe,So=e1.length-1,th=!0,Rs,Ko,Vc;th&&(Rs=e1[df],Ko=e1[df+1],!(Ko.t-this.offsetTime>ve));)df<So-1?df+=1:th=!1;if(Vc=this.keyframesMetadata[df]||{},li=Rs.h===1,Xe=df,!li){if(ve>=Ko.t-this.offsetTime)Hc=1;else if(ve<Rs.t-this.offsetTime)Hc=0;else{var yh;Vc.__fnct?yh=Vc.__fnct:(yh=BezierFactory.getBezierEasing(Rs.o.x,Rs.o.y,Rs.i.x,Rs.i.y).get,Vc.__fnct=yh),Hc=yh((ve-(Rs.t-this.offsetTime))/(Ko.t-this.offsetTime-(Rs.t-this.offsetTime)))}wt=Ko.s?Ko.s[0]:Rs.e[0]}Bs=Rs.s[0]}for(vh=He._length,Fc=Bs.i[0].length,De.lastIndex=Xe,An=0;An<vh;An+=1)for(Os=0;Os<Fc;Os+=1)qc=li?Bs.i[An][Os]:Bs.i[An][Os]+(wt.i[An][Os]-Bs.i[An][Os])*Hc,He.i[An][Os]=qc,qc=li?Bs.o[An][Os]:Bs.o[An][Os]+(wt.o[An][Os]-Bs.o[An][Os])*Hc,He.o[An][Os]=qc,qc=li?Bs.v[An][Os]:Bs.v[An][Os]+(wt.v[An][Os]-Bs.v[An][Os])*Hc,He.v[An][Os]=qc}function r(){var ve=this.comp.renderedFrame-this.offsetTime,He=this.keyframes[0].t-this.offsetTime,De=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Xe=this._caching.lastFrame;return Xe!==t&&(Xe<He&&ve<He||Xe>De&&ve>De)||(this._caching.lastIndex=Xe<ve?this._caching.lastIndex:0,this.interpolateShape(ve,this.pv,this._caching)),this._caching.lastFrame=ve,this.pv}function n(){this.paths=this.localShapeCollection}function a(ve,He){if(ve._length!==He._length||ve.c!==He.c)return!1;var De,Xe=ve._length;for(De=0;De<Xe;De+=1)if(ve.v[De][0]!==He.v[De][0]||ve.v[De][1]!==He.v[De][1]||ve.o[De][0]!==He.o[De][0]||ve.o[De][1]!==He.o[De][1]||ve.i[De][0]!==He.i[De][0]||ve.i[De][1]!==He.i[De][1])return!1;return!0}function s(ve){a(this.v,ve)||(this.v=shapePool.clone(ve),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function o(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var ve;this.kf?ve=this.pv:this.data.ks?ve=this.data.ks.k:ve=this.data.pt.k;var He,De=this.effectsSequence.length;for(He=0;He<De;He+=1)ve=this.effectsSequence[He](ve);this.setVValue(ve),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function c(ve,He,De){this.propType="shape",this.comp=ve.comp,this.container=ve,this.elem=ve,this.data=He,this.k=!1,this.kf=!1,this._mdf=!1;var Xe=De===3?He.pt.k:He.ks.k;this.v=shapePool.clone(Xe),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=n,this.effectsSequence=[]}function d(ve){this.effectsSequence.push(ve),this.container.addDynamicProperty(this)}c.prototype.interpolateShape=e,c.prototype.getValue=o,c.prototype.setVValue=s,c.prototype.addEffect=d;function m(ve,He,De){this.propType="shape",this.comp=ve.comp,this.elem=ve,this.container=ve,this.offsetTime=ve.data.st,this.keyframes=De===3?He.pt.k:He.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Xe=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Xe),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=n,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[r.bind(this)]}m.prototype.getValue=o,m.prototype.interpolateShape=e,m.prototype.setVValue=s,m.prototype.addEffect=d;var y=function(){var ve=roundCorner;function He(De,Xe){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Xe.d,this.elem=De,this.comp=De.comp,this.frameId=-1,this.initDynamicPropertyContainer(De),this.p=PropertyFactory.getProp(De,Xe.p,1,0,this),this.s=PropertyFactory.getProp(De,Xe.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return He.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Xe=this.p.v[0],Bs=this.p.v[1],wt=this.s.v[0]/2,li=this.s.v[1]/2,An=this.d!==3,Os=this.v;Os.v[0][0]=Xe,Os.v[0][1]=Bs-li,Os.v[1][0]=An?Xe+wt:Xe-wt,Os.v[1][1]=Bs,Os.v[2][0]=Xe,Os.v[2][1]=Bs+li,Os.v[3][0]=An?Xe-wt:Xe+wt,Os.v[3][1]=Bs,Os.i[0][0]=An?Xe-wt*ve:Xe+wt*ve,Os.i[0][1]=Bs-li,Os.i[1][0]=An?Xe+wt:Xe-wt,Os.i[1][1]=Bs-li*ve,Os.i[2][0]=An?Xe+wt*ve:Xe-wt*ve,Os.i[2][1]=Bs+li,Os.i[3][0]=An?Xe-wt:Xe+wt,Os.i[3][1]=Bs+li*ve,Os.o[0][0]=An?Xe+wt*ve:Xe-wt*ve,Os.o[0][1]=Bs-li,Os.o[1][0]=An?Xe+wt:Xe-wt,Os.o[1][1]=Bs+li*ve,Os.o[2][0]=An?Xe-wt*ve:Xe+wt*ve,Os.o[2][1]=Bs+li,Os.o[3][0]=An?Xe-wt:Xe+wt,Os.o[3][1]=Bs-li*ve}},extendPrototype([DynamicPropertyContainer],He),He}(),A=function(){function ve(He,De){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=He,this.comp=He.comp,this.data=De,this.frameId=-1,this.d=De.d,this.initDynamicPropertyContainer(He),De.sy===1?(this.ir=PropertyFactory.getProp(He,De.ir,0,0,this),this.is=PropertyFactory.getProp(He,De.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(He,De.pt,0,0,this),this.p=PropertyFactory.getProp(He,De.p,1,0,this),this.r=PropertyFactory.getProp(He,De.r,0,degToRads,this),this.or=PropertyFactory.getProp(He,De.or,0,0,this),this.os=PropertyFactory.getProp(He,De.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return ve.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var De=Math.floor(this.pt.v)*2,Xe=Math.PI*2/De,Bs=!0,wt=this.or.v,li=this.ir.v,An=this.os.v,Os=this.is.v,vh=2*Math.PI*wt/(De*2),Fc=2*Math.PI*li/(De*2),Hc,qc,e1,df,So=-Math.PI/2;So+=this.r.v;var th=this.data.d===3?-1:1;for(this.v._length=0,Hc=0;Hc<De;Hc+=1){qc=Bs?wt:li,e1=Bs?An:Os,df=Bs?vh:Fc;var Rs=qc*Math.cos(So),Ko=qc*Math.sin(So),Vc=Rs===0&&Ko===0?0:Ko/Math.sqrt(Rs*Rs+Ko*Ko),yh=Rs===0&&Ko===0?0:-Rs/Math.sqrt(Rs*Rs+Ko*Ko);Rs+=+this.p.v[0],Ko+=+this.p.v[1],this.v.setTripleAt(Rs,Ko,Rs-Vc*df*e1*th,Ko-yh*df*e1*th,Rs+Vc*df*e1*th,Ko+yh*df*e1*th,Hc,!0),Bs=!Bs,So+=Xe*th}},convertPolygonToPath:function(){var De=Math.floor(this.pt.v),Xe=Math.PI*2/De,Bs=this.or.v,wt=this.os.v,li=2*Math.PI*Bs/(De*4),An,Os=-Math.PI*.5,vh=this.data.d===3?-1:1;for(Os+=this.r.v,this.v._length=0,An=0;An<De;An+=1){var Fc=Bs*Math.cos(Os),Hc=Bs*Math.sin(Os),qc=Fc===0&&Hc===0?0:Hc/Math.sqrt(Fc*Fc+Hc*Hc),e1=Fc===0&&Hc===0?0:-Fc/Math.sqrt(Fc*Fc+Hc*Hc);Fc+=+this.p.v[0],Hc+=+this.p.v[1],this.v.setTripleAt(Fc,Hc,Fc-qc*li*wt*vh,Hc-e1*li*wt*vh,Fc+qc*li*wt*vh,Hc+e1*li*wt*vh,An,!0),Os+=Xe*vh}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],ve),ve}(),P=function(){function ve(He,De){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=He,this.comp=He.comp,this.frameId=-1,this.d=De.d,this.initDynamicPropertyContainer(He),this.p=PropertyFactory.getProp(He,De.p,1,0,this),this.s=PropertyFactory.getProp(He,De.s,1,0,this),this.r=PropertyFactory.getProp(He,De.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return ve.prototype={convertRectToPath:function(){var De=this.p.v[0],Xe=this.p.v[1],Bs=this.s.v[0]/2,wt=this.s.v[1]/2,li=bmMin(Bs,wt,this.r.v),An=li*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(De+Bs,Xe-wt+li,De+Bs,Xe-wt+li,De+Bs,Xe-wt+An,0,!0),this.v.setTripleAt(De+Bs,Xe+wt-li,De+Bs,Xe+wt-An,De+Bs,Xe+wt-li,1,!0),li!==0?(this.v.setTripleAt(De+Bs-li,Xe+wt,De+Bs-li,Xe+wt,De+Bs-An,Xe+wt,2,!0),this.v.setTripleAt(De-Bs+li,Xe+wt,De-Bs+An,Xe+wt,De-Bs+li,Xe+wt,3,!0),this.v.setTripleAt(De-Bs,Xe+wt-li,De-Bs,Xe+wt-li,De-Bs,Xe+wt-An,4,!0),this.v.setTripleAt(De-Bs,Xe-wt+li,De-Bs,Xe-wt+An,De-Bs,Xe-wt+li,5,!0),this.v.setTripleAt(De-Bs+li,Xe-wt,De-Bs+li,Xe-wt,De-Bs+An,Xe-wt,6,!0),this.v.setTripleAt(De+Bs-li,Xe-wt,De+Bs-An,Xe-wt,De+Bs-li,Xe-wt,7,!0)):(this.v.setTripleAt(De-Bs,Xe+wt,De-Bs+An,Xe+wt,De-Bs,Xe+wt,2),this.v.setTripleAt(De-Bs,Xe-wt,De-Bs,Xe-wt+An,De-Bs,Xe-wt,3))):(this.v.setTripleAt(De+Bs,Xe-wt+li,De+Bs,Xe-wt+An,De+Bs,Xe-wt+li,0,!0),li!==0?(this.v.setTripleAt(De+Bs-li,Xe-wt,De+Bs-li,Xe-wt,De+Bs-An,Xe-wt,1,!0),this.v.setTripleAt(De-Bs+li,Xe-wt,De-Bs+An,Xe-wt,De-Bs+li,Xe-wt,2,!0),this.v.setTripleAt(De-Bs,Xe-wt+li,De-Bs,Xe-wt+li,De-Bs,Xe-wt+An,3,!0),this.v.setTripleAt(De-Bs,Xe+wt-li,De-Bs,Xe+wt-An,De-Bs,Xe+wt-li,4,!0),this.v.setTripleAt(De-Bs+li,Xe+wt,De-Bs+li,Xe+wt,De-Bs+An,Xe+wt,5,!0),this.v.setTripleAt(De+Bs-li,Xe+wt,De+Bs-An,Xe+wt,De+Bs-li,Xe+wt,6,!0),this.v.setTripleAt(De+Bs,Xe+wt-li,De+Bs,Xe+wt-li,De+Bs,Xe+wt-An,7,!0)):(this.v.setTripleAt(De-Bs,Xe-wt,De-Bs+An,Xe-wt,De-Bs,Xe-wt,1,!0),this.v.setTripleAt(De-Bs,Xe+wt,De-Bs,Xe+wt-An,De-Bs,Xe+wt,2,!0),this.v.setTripleAt(De+Bs,Xe+wt,De+Bs-An,Xe+wt,De+Bs,Xe+wt,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:n},extendPrototype([DynamicPropertyContainer],ve),ve}();function Z(ve,He,De){var Xe;if(De===3||De===4){var Bs=De===3?He.pt:He.ks,wt=Bs.k;wt.length?Xe=new m(ve,He,De):Xe=new c(ve,He,De)}else De===5?Xe=new P(ve,He):De===6?Xe=new y(ve,He):De===7&&(Xe=new A(ve,He));return Xe.k&&ve.addDynamicProperty(Xe),Xe}function me(){return c}function _e(){return m}var Ge={};return Ge.getShapeProp=Z,Ge.getConstructorFunction=me,Ge.getKeyframedConstructorFunction=_e,Ge}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var t=Math.cos,e=Math.sin,r=Math.tan,n=Math.round;function a(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function s(Rs){if(Rs===0)return this;var Ko=t(Rs),Vc=e(Rs);return this._t(Ko,-Vc,0,0,Vc,Ko,0,0,0,0,1,0,0,0,0,1)}function o(Rs){if(Rs===0)return this;var Ko=t(Rs),Vc=e(Rs);return this._t(1,0,0,0,0,Ko,-Vc,0,0,Vc,Ko,0,0,0,0,1)}function c(Rs){if(Rs===0)return this;var Ko=t(Rs),Vc=e(Rs);return this._t(Ko,0,Vc,0,0,1,0,0,-Vc,0,Ko,0,0,0,0,1)}function d(Rs){if(Rs===0)return this;var Ko=t(Rs),Vc=e(Rs);return this._t(Ko,-Vc,0,0,Vc,Ko,0,0,0,0,1,0,0,0,0,1)}function m(Rs,Ko){return this._t(1,Ko,Rs,1,0,0)}function y(Rs,Ko){return this.shear(r(Rs),r(Ko))}function A(Rs,Ko){var Vc=t(Ko),yh=e(Ko);return this._t(Vc,yh,0,0,-yh,Vc,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,r(Rs),1,0,0,0,0,1,0,0,0,0,1)._t(Vc,-yh,0,0,yh,Vc,0,0,0,0,1,0,0,0,0,1)}function P(Rs,Ko,Vc){return!Vc&&Vc!==0&&(Vc=1),Rs===1&&Ko===1&&Vc===1?this:this._t(Rs,0,0,0,0,Ko,0,0,0,0,Vc,0,0,0,0,1)}function Z(Rs,Ko,Vc,yh,wh,uf,i1,u1,h1,T1,p1,j1,C1,k1,X1,D1){return this.props[0]=Rs,this.props[1]=Ko,this.props[2]=Vc,this.props[3]=yh,this.props[4]=wh,this.props[5]=uf,this.props[6]=i1,this.props[7]=u1,this.props[8]=h1,this.props[9]=T1,this.props[10]=p1,this.props[11]=j1,this.props[12]=C1,this.props[13]=k1,this.props[14]=X1,this.props[15]=D1,this}function me(Rs,Ko,Vc){return Vc=Vc||0,Rs!==0||Ko!==0||Vc!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Rs,Ko,Vc,1):this}function _e(Rs,Ko,Vc,yh,wh,uf,i1,u1,h1,T1,p1,j1,C1,k1,X1,D1){var m1=this.props;if(Rs===1&&Ko===0&&Vc===0&&yh===0&&wh===0&&uf===1&&i1===0&&u1===0&&h1===0&&T1===0&&p1===1&&j1===0)return m1[12]=m1[12]*Rs+m1[15]*C1,m1[13]=m1[13]*uf+m1[15]*k1,m1[14]=m1[14]*p1+m1[15]*X1,m1[15]*=D1,this._identityCalculated=!1,this;var xy=m1[0],Py=m1[1],Q1=m1[2],gy=m1[3],my=m1[4],Iy=m1[5],uy=m1[6],Sy=m1[7],yy=m1[8],Ey=m1[9],Oy=m1[10],L1=m1[11],R1=m1[12],vy=m1[13],ly=m1[14],Rv=m1[15];return m1[0]=xy*Rs+Py*wh+Q1*h1+gy*C1,m1[1]=xy*Ko+Py*uf+Q1*T1+gy*k1,m1[2]=xy*Vc+Py*i1+Q1*p1+gy*X1,m1[3]=xy*yh+Py*u1+Q1*j1+gy*D1,m1[4]=my*Rs+Iy*wh+uy*h1+Sy*C1,m1[5]=my*Ko+Iy*uf+uy*T1+Sy*k1,m1[6]=my*Vc+Iy*i1+uy*p1+Sy*X1,m1[7]=my*yh+Iy*u1+uy*j1+Sy*D1,m1[8]=yy*Rs+Ey*wh+Oy*h1+L1*C1,m1[9]=yy*Ko+Ey*uf+Oy*T1+L1*k1,m1[10]=yy*Vc+Ey*i1+Oy*p1+L1*X1,m1[11]=yy*yh+Ey*u1+Oy*j1+L1*D1,m1[12]=R1*Rs+vy*wh+ly*h1+Rv*C1,m1[13]=R1*Ko+vy*uf+ly*T1+Rv*k1,m1[14]=R1*Vc+vy*i1+ly*p1+Rv*X1,m1[15]=R1*yh+vy*u1+ly*j1+Rv*D1,this._identityCalculated=!1,this}function Ge(Rs){var Ko=Rs.props;return this.transform(Ko[0],Ko[1],Ko[2],Ko[3],Ko[4],Ko[5],Ko[6],Ko[7],Ko[8],Ko[9],Ko[10],Ko[11],Ko[12],Ko[13],Ko[14],Ko[15])}function ve(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function He(Rs){for(var Ko=0;Ko<16;){if(Rs.props[Ko]!==this.props[Ko])return!1;Ko+=1}return!0}function De(Rs){var Ko;for(Ko=0;Ko<16;Ko+=1)Rs.props[Ko]=this.props[Ko];return Rs}function Xe(Rs){var Ko;for(Ko=0;Ko<16;Ko+=1)this.props[Ko]=Rs[Ko]}function Bs(Rs,Ko,Vc){return{x:Rs*this.props[0]+Ko*this.props[4]+Vc*this.props[8]+this.props[12],y:Rs*this.props[1]+Ko*this.props[5]+Vc*this.props[9]+this.props[13],z:Rs*this.props[2]+Ko*this.props[6]+Vc*this.props[10]+this.props[14]}}function wt(Rs,Ko,Vc){return Rs*this.props[0]+Ko*this.props[4]+Vc*this.props[8]+this.props[12]}function li(Rs,Ko,Vc){return Rs*this.props[1]+Ko*this.props[5]+Vc*this.props[9]+this.props[13]}function An(Rs,Ko,Vc){return Rs*this.props[2]+Ko*this.props[6]+Vc*this.props[10]+this.props[14]}function Os(){var Rs=this.props[0]*this.props[5]-this.props[1]*this.props[4],Ko=this.props[5]/Rs,Vc=-this.props[1]/Rs,yh=-this.props[4]/Rs,wh=this.props[0]/Rs,uf=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Rs,i1=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Rs,u1=new Matrix;return u1.props[0]=Ko,u1.props[1]=Vc,u1.props[4]=yh,u1.props[5]=wh,u1.props[12]=uf,u1.props[13]=i1,u1}function vh(Rs){var Ko=this.getInverseMatrix();return Ko.applyToPointArray(Rs[0],Rs[1],Rs[2]||0)}function Fc(Rs){var Ko,Vc=Rs.length,yh=[];for(Ko=0;Ko<Vc;Ko+=1)yh[Ko]=vh(Rs[Ko]);return yh}function Hc(Rs,Ko,Vc){var yh=createTypedArray("float32",6);if(this.isIdentity())yh[0]=Rs[0],yh[1]=Rs[1],yh[2]=Ko[0],yh[3]=Ko[1],yh[4]=Vc[0],yh[5]=Vc[1];else{var wh=this.props[0],uf=this.props[1],i1=this.props[4],u1=this.props[5],h1=this.props[12],T1=this.props[13];yh[0]=Rs[0]*wh+Rs[1]*i1+h1,yh[1]=Rs[0]*uf+Rs[1]*u1+T1,yh[2]=Ko[0]*wh+Ko[1]*i1+h1,yh[3]=Ko[0]*uf+Ko[1]*u1+T1,yh[4]=Vc[0]*wh+Vc[1]*i1+h1,yh[5]=Vc[0]*uf+Vc[1]*u1+T1}return yh}function qc(Rs,Ko,Vc){var yh;return this.isIdentity()?yh=[Rs,Ko,Vc]:yh=[Rs*this.props[0]+Ko*this.props[4]+Vc*this.props[8]+this.props[12],Rs*this.props[1]+Ko*this.props[5]+Vc*this.props[9]+this.props[13],Rs*this.props[2]+Ko*this.props[6]+Vc*this.props[10]+this.props[14]],yh}function e1(Rs,Ko){if(this.isIdentity())return Rs+","+Ko;var Vc=this.props;return Math.round((Rs*Vc[0]+Ko*Vc[4]+Vc[12])*100)/100+","+Math.round((Rs*Vc[1]+Ko*Vc[5]+Vc[13])*100)/100}function df(){for(var Rs=0,Ko=this.props,Vc="matrix3d(",yh=1e4;Rs<16;)Vc+=n(Ko[Rs]*yh)/yh,Vc+=Rs===15?")":",",Rs+=1;return Vc}function So(Rs){var Ko=1e4;return Rs<1e-6&&Rs>0||Rs>-1e-6&&Rs<0?n(Rs*Ko)/Ko:Rs}function th(){var Rs=this.props,Ko=So(Rs[0]),Vc=So(Rs[1]),yh=So(Rs[4]),wh=So(Rs[5]),uf=So(Rs[12]),i1=So(Rs[13]);return"matrix("+Ko+","+Vc+","+yh+","+wh+","+uf+","+i1+")"}return function(){this.reset=a,this.rotate=s,this.rotateX=o,this.rotateY=c,this.rotateZ=d,this.skew=y,this.skewFromAxis=A,this.shear=m,this.scale=P,this.setTransform=Z,this.translate=me,this.transform=_e,this.multiply=Ge,this.applyToPoint=Bs,this.applyToX=wt,this.applyToY=li,this.applyToZ=An,this.applyToPointArray=qc,this.applyToTriplePoints=Hc,this.applyToPointStringified=e1,this.toCSS=df,this.to2dCSS=th,this.clone=De,this.cloneFromProps=Xe,this.equals=He,this.inversePoints=Fc,this.inversePoint=vh,this.getInverseMatrix=Os,this._t=this.transform,this.isIdentity=ve,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(t){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(t)}var lottie={};function setLocation(t){setLocationHref(t)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(t){setSubframeEnabled(t)}function setPrefix(t){setIdPrefix(t)}function loadAnimation(t){return animationManager.loadAnimation(t)}function setQuality(t){if(typeof t=="string")switch(t){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(t)&&t>1&&setDefaultCurveSegments(t)}function inBrowser(){return typeof navigator<"u"}function installPlugin(t,e){t==="expressions"&&setExpressionsPlugin(e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),r=0;r<e.length;r+=1){var n=e[r].split("=");if(decodeURIComponent(n[0])==t)return decodeURIComponent(n[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(t){}var ShapeModifiers=function(){var t={},e={};t.registerModifier=r,t.getModifier=n;function r(a,s){e[a]||(e[a]=s)}function n(a,s,o){return new e[a](s,o)}return t}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,r,n,a){var s=[];e<=1?s.push({s:t,e}):t>=1?s.push({s:t-1,e:e-1}):(s.push({s:t,e:1}),s.push({s:0,e:e-1}));var o=[],c,d=s.length,m;for(c=0;c<d;c+=1)if(m=s[c],!(m.e*a<n||m.s*a>n+r)){var y,A;m.s*a<=n?y=0:y=(m.s*a-n)/r,m.e*a>=n+r?A=1:A=(m.e*a-n)/r,o.push([y,A])}return o.length||o.push([0,0]),o},TrimModifier.prototype.releasePathsData=function(t){var e,r=t.length;for(e=0;e<r;e+=1)segmentsLengthPool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,r;if(this._mdf||t){var n=this.o.v%360/360;if(n<0&&(n+=1),this.s.v>1?e=1+n:this.s.v<0?e=0+n:e=this.s.v+n,this.e.v>1?r=1+n:this.e.v<0?r=0+n:r=this.e.v+n,e>r){var a=e;e=r,r=a}e=Math.round(e*1e4)*1e-4,r=Math.round(r*1e4)*1e-4,this.sValue=e,this.eValue=r}else e=this.sValue,r=this.eValue;var s,o,c=this.shapes.length,d,m,y,A,P,Z=0;if(r===e)for(o=0;o<c;o+=1)this.shapes[o].localShapeCollection.releaseShapes(),this.shapes[o].shape._mdf=!0,this.shapes[o].shape.paths=this.shapes[o].localShapeCollection,this._mdf&&(this.shapes[o].pathsData.length=0);else if(r===1&&e===0||r===0&&e===1){if(this._mdf)for(o=0;o<c;o+=1)this.shapes[o].pathsData.length=0,this.shapes[o].shape._mdf=!0}else{var me=[],_e,Ge;for(o=0;o<c;o+=1)if(_e=this.shapes[o],!_e.shape._mdf&&!this._mdf&&!t&&this.m!==2)_e.shape.paths=_e.localShapeCollection;else{if(s=_e.shape.paths,m=s._length,P=0,!_e.shape._mdf&&_e.pathsData.length)P=_e.totalShapeLength;else{for(y=this.releasePathsData(_e.pathsData),d=0;d<m;d+=1)A=bez.getSegmentsLength(s.shapes[d]),y.push(A),P+=A.totalLength;_e.totalShapeLength=P,_e.pathsData=y}Z+=P,_e.shape._mdf=!0}var ve=e,He=r,De=0,Xe;for(o=c-1;o>=0;o-=1)if(_e=this.shapes[o],_e.shape._mdf){for(Ge=_e.localShapeCollection,Ge.releaseShapes(),this.m===2&&c>1?(Xe=this.calculateShapeEdges(e,r,_e.totalShapeLength,De,Z),De+=_e.totalShapeLength):Xe=[[ve,He]],m=Xe.length,d=0;d<m;d+=1){ve=Xe[d][0],He=Xe[d][1],me.length=0,He<=1?me.push({s:_e.totalShapeLength*ve,e:_e.totalShapeLength*He}):ve>=1?me.push({s:_e.totalShapeLength*(ve-1),e:_e.totalShapeLength*(He-1)}):(me.push({s:_e.totalShapeLength*ve,e:_e.totalShapeLength}),me.push({s:0,e:_e.totalShapeLength*(He-1)}));var Bs=this.addShapes(_e,me[0]);if(me[0].s!==me[0].e){if(me.length>1){var wt=_e.shape.paths.shapes[_e.shape.paths._length-1];if(wt.c){var li=Bs.pop();this.addPaths(Bs,Ge),Bs=this.addShapes(_e,me[1],li)}else this.addPaths(Bs,Ge),Bs=this.addShapes(_e,me[1])}this.addPaths(Bs,Ge)}}_e.shape.paths=Ge}}},TrimModifier.prototype.addPaths=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)e.addShape(t[r])},TrimModifier.prototype.addSegment=function(t,e,r,n,a,s,o){a.setXYAt(e[0],e[1],"o",s),a.setXYAt(r[0],r[1],"i",s+1),o&&a.setXYAt(t[0],t[1],"v",s),a.setXYAt(n[0],n[1],"v",s+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,r,n){e.setXYAt(t[1],t[5],"o",r),e.setXYAt(t[2],t[6],"i",r+1),n&&e.setXYAt(t[0],t[4],"v",r),e.setXYAt(t[3],t[7],"v",r+1)},TrimModifier.prototype.addShapes=function(t,e,r){var n=t.pathsData,a=t.shape.paths.shapes,s,o=t.shape.paths._length,c,d,m=0,y,A,P,Z,me=[],_e,Ge=!0;for(r?(A=r._length,_e=r._length):(r=shapePool.newElement(),A=0,_e=0),me.push(r),s=0;s<o;s+=1){for(P=n[s].lengths,r.c=a[s].c,d=a[s].c?P.length:P.length+1,c=1;c<d;c+=1)if(y=P[c-1],m+y.addedLength<e.s)m+=y.addedLength,r.c=!1;else if(m>e.e){r.c=!1;break}else e.s<=m&&e.e>=m+y.addedLength?(this.addSegment(a[s].v[c-1],a[s].o[c-1],a[s].i[c],a[s].v[c],r,A,Ge),Ge=!1):(Z=bez.getNewSegment(a[s].v[c-1],a[s].v[c],a[s].o[c-1],a[s].i[c],(e.s-m)/y.addedLength,(e.e-m)/y.addedLength,P[c-1]),this.addSegmentFromArray(Z,r,A,Ge),Ge=!1,r.c=!1),m+=y.addedLength,A+=1;if(a[s].c&&P.length){if(y=P[c-1],m<=e.e){var ve=P[c-1].addedLength;e.s<=m&&e.e>=m+ve?(this.addSegment(a[s].v[c-1],a[s].o[c-1],a[s].i[0],a[s].v[0],r,A,Ge),Ge=!1):(Z=bez.getNewSegment(a[s].v[c-1],a[s].v[0],a[s].o[c-1],a[s].i[0],(e.s-m)/ve,(e.e-m)/ve,P[c-1]),this.addSegmentFromArray(Z,r,A,Ge),Ge=!1,r.c=!1)}else r.c=!1;m+=y.addedLength,A+=1}if(r._length&&(r.setXYAt(r.v[_e][0],r.v[_e][1],"i",_e),r.setXYAt(r.v[r._length-1][0],r.v[r._length-1][1],"o",r._length-1)),m>e.e)break;s<o-1&&(r=shapePool.newElement(),Ge=!0,me.push(r),A=0)}return me};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var r=e/100,n=[0,0],a=t._length,s=0;for(s=0;s<a;s+=1)n[0]+=t.v[s][0],n[1]+=t.v[s][1];n[0]/=a,n[1]/=a;var o=shapePool.newElement();o.c=t.c;var c,d,m,y,A,P;for(s=0;s<a;s+=1)c=t.v[s][0]+(n[0]-t.v[s][0])*r,d=t.v[s][1]+(n[1]-t.v[s][1])*r,m=t.o[s][0]+(n[0]-t.o[s][0])*-r,y=t.o[s][1]+(n[1]-t.o[s][1])*-r,A=t.i[s][0]+(n[0]-t.i[s][0])*-r,P=t.i[s][1]+(n[1]-t.i[s][1])*-r,o.setTripleAt(c,d,m,y,A,P,s);return o},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,r,n=this.shapes.length,a,s,o=this.amount.v;if(o!==0){var c,d;for(r=0;r<n;r+=1){if(c=this.shapes[r],d=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!t))for(d.releaseShapes(),c.shape._mdf=!0,e=c.shape.paths.shapes,s=c.shape.paths._length,a=0;a<s;a+=1)d.addShape(this.processPath(e[a],o));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var t=[0,0];function e(d){var m=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||m,this.a&&d.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&d.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&d.skewFromAxis(-this.sk.v,this.sa.v),this.r?d.rotate(-this.r.v):d.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?d.translate(this.px.v,this.py.v,-this.pz.v):d.translate(this.px.v,this.py.v,0):d.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function r(d){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||d){var m;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var y,A;if(m=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(y=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/m,0),A=this.p.getValueAtTime(this.p.keyframes[0].t/m,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(y=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/m,0),A=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/m,0)):(y=this.p.pv,A=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/m,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){y=[],A=[];var P=this.px,Z=this.py;P._caching.lastFrame+P.offsetTime<=P.keyframes[0].t?(y[0]=P.getValueAtTime((P.keyframes[0].t+.01)/m,0),y[1]=Z.getValueAtTime((Z.keyframes[0].t+.01)/m,0),A[0]=P.getValueAtTime(P.keyframes[0].t/m,0),A[1]=Z.getValueAtTime(Z.keyframes[0].t/m,0)):P._caching.lastFrame+P.offsetTime>=P.keyframes[P.keyframes.length-1].t?(y[0]=P.getValueAtTime(P.keyframes[P.keyframes.length-1].t/m,0),y[1]=Z.getValueAtTime(Z.keyframes[Z.keyframes.length-1].t/m,0),A[0]=P.getValueAtTime((P.keyframes[P.keyframes.length-1].t-.01)/m,0),A[1]=Z.getValueAtTime((Z.keyframes[Z.keyframes.length-1].t-.01)/m,0)):(y=[P.pv,Z.pv],A[0]=P.getValueAtTime((P._caching.lastFrame+P.offsetTime-.01)/m,P.offsetTime),A[1]=Z.getValueAtTime((Z._caching.lastFrame+Z.offsetTime-.01)/m,Z.offsetTime))}else A=t,y=A;this.v.rotate(-Math.atan2(y[1]-A[1],y[0]-A[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function n(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function a(){}function s(d){this._addDynamicProperty(d),this.elem.addDynamicProperty(d),this._isDirty=!0}function o(d,m,y){if(this.elem=d,this.frameId=-1,this.propType="transform",this.data=m,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(y||d),m.p&&m.p.s?(this.px=PropertyFactory.getProp(d,m.p.x,0,0,this),this.py=PropertyFactory.getProp(d,m.p.y,0,0,this),m.p.z&&(this.pz=PropertyFactory.getProp(d,m.p.z,0,0,this))):this.p=PropertyFactory.getProp(d,m.p||{k:[0,0,0]},1,0,this),m.rx){if(this.rx=PropertyFactory.getProp(d,m.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(d,m.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(d,m.rz,0,degToRads,this),m.or.k[0].ti){var A,P=m.or.k.length;for(A=0;A<P;A+=1)m.or.k[A].to=null,m.or.k[A].ti=null}this.or=PropertyFactory.getProp(d,m.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(d,m.r||{k:0},0,degToRads,this);m.sk&&(this.sk=PropertyFactory.getProp(d,m.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(d,m.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(d,m.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(d,m.s||{k:[100,100,100]},1,.01,this),m.o?this.o=PropertyFactory.getProp(d,m.o,0,.01,d):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}o.prototype={applyToMatrix:e,getValue:r,precalculateMatrix:n,autoOrient:a},extendPrototype([DynamicPropertyContainer],o),o.prototype.addDynamicProperty=s,o.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function c(d,m,y){return new o(d,m,y)}return{getTransformProperty:c}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,r,n,a,s){var o=s?-1:1,c=n.s.v[0]+(1-n.s.v[0])*(1-a),d=n.s.v[1]+(1-n.s.v[1])*(1-a);t.translate(n.p.v[0]*o*a,n.p.v[1]*o*a,n.p.v[2]),e.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),e.rotate(-n.r.v*o*a),e.translate(n.a.v[0],n.a.v[1],n.a.v[2]),r.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),r.scale(s?1/c:c,s?1/d:d),r.translate(n.a.v[0],n.a.v[1],n.a.v[2])},RepeaterModifier.prototype.init=function(t,e,r,n){for(this.elem=t,this.arr=e,this.pos=r,this.elemsData=n,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[r]);r>0;)r-=1,this._elements.unshift(e[r]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e]._processed=!1,t[e].ty==="gr"&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)t[r]._render=e,t[r].ty==="gr"&&this.changeGroupRender(t[r].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,r,n,a,s,o=!1;if(this._mdf||t){var c=Math.ceil(this.c.v);if(this._groups.length<c){for(;this._groups.length<c;){var d={it:this.cloneElements(this._elements),ty:"gr"};d.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,d),this._groups.splice(0,0,d),this._currentCopies+=1}this.elem.reloadShapes(),o=!0}s=0;var m;for(n=0;n<=this._groups.length-1;n+=1){if(m=s<c,this._groups[n]._render=m,this.changeGroupRender(this._groups[n].it,m),!m){var y=this.elemsData[n].it,A=y[y.length-1];A.transform.op.v!==0?(A.transform.op._mdf=!0,A.transform.op.v=0):A.transform.op._mdf=!1}s+=1}this._currentCopies=c;var P=this.o.v,Z=P%1,me=P>0?Math.floor(P):Math.ceil(P),_e=this.pMatrix.props,Ge=this.rMatrix.props,ve=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var He=0;if(P>0){for(;He<me;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),He+=1;Z&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,Z,!1),He+=Z)}else if(P<0){for(;He>me;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),He-=1;Z&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-Z,!0),He-=Z)}n=this.data.m===1?0:this._currentCopies-1,a=this.data.m===1?1:-1,s=this._currentCopies;for(var De,Xe;s;){if(e=this.elemsData[n].it,r=e[e.length-1].transform.mProps.v.props,Xe=r.length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(n/(this._currentCopies-1)),He!==0){for((n!==0&&a===1||n!==this._currentCopies-1&&a===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Ge[0],Ge[1],Ge[2],Ge[3],Ge[4],Ge[5],Ge[6],Ge[7],Ge[8],Ge[9],Ge[10],Ge[11],Ge[12],Ge[13],Ge[14],Ge[15]),this.matrix.transform(ve[0],ve[1],ve[2],ve[3],ve[4],ve[5],ve[6],ve[7],ve[8],ve[9],ve[10],ve[11],ve[12],ve[13],ve[14],ve[15]),this.matrix.transform(_e[0],_e[1],_e[2],_e[3],_e[4],_e[5],_e[6],_e[7],_e[8],_e[9],_e[10],_e[11],_e[12],_e[13],_e[14],_e[15]),De=0;De<Xe;De+=1)r[De]=this.matrix.props[De];this.matrix.reset()}else for(this.matrix.reset(),De=0;De<Xe;De+=1)r[De]=this.matrix.props[De];He+=1,s-=1,n+=a}}else for(s=this._currentCopies,n=0,a=1;s;)e=this.elemsData[n].it,r=e[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,s-=1,n+=a;return o},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var r=shapePool.newElement();r.c=t.c;var n,a=t._length,s,o,c,d,m,y,A=0,P,Z,me,_e,Ge,ve;for(n=0;n<a;n+=1)s=t.v[n],c=t.o[n],o=t.i[n],s[0]===c[0]&&s[1]===c[1]&&s[0]===o[0]&&s[1]===o[1]?(n===0||n===a-1)&&!t.c?(r.setTripleAt(s[0],s[1],c[0],c[1],o[0],o[1],A),A+=1):(n===0?d=t.v[a-1]:d=t.v[n-1],m=Math.sqrt(Math.pow(s[0]-d[0],2)+Math.pow(s[1]-d[1],2)),y=m?Math.min(m/2,e)/m:0,Ge=s[0]+(d[0]-s[0])*y,P=Ge,ve=s[1]-(s[1]-d[1])*y,Z=ve,me=P-(P-s[0])*roundCorner,_e=Z-(Z-s[1])*roundCorner,r.setTripleAt(P,Z,me,_e,Ge,ve,A),A+=1,n===a-1?d=t.v[0]:d=t.v[n+1],m=Math.sqrt(Math.pow(s[0]-d[0],2)+Math.pow(s[1]-d[1],2)),y=m?Math.min(m/2,e)/m:0,me=s[0]+(d[0]-s[0])*y,P=me,_e=s[1]+(d[1]-s[1])*y,Z=_e,Ge=P-(P-s[0])*roundCorner,ve=Z-(Z-s[1])*roundCorner,r.setTripleAt(P,Z,me,_e,Ge,ve,A),A+=1):(r.setTripleAt(t.v[n][0],t.v[n][1],t.o[n][0],t.o[n][1],t.i[n][0],t.i[n][1],A),A+=1);return r},RoundCornersModifier.prototype.processShapes=function(t){var e,r,n=this.shapes.length,a,s,o=this.rd.v;if(o!==0){var c,d;for(r=0;r<n;r+=1){if(c=this.shapes[r],d=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!t))for(d.releaseShapes(),c.shape._mdf=!0,e=c.shape.paths.shapes,s=c.shape.paths._length,a=0;a<s;a+=1)d.addShape(this.processPath(e[a],o));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(t,e){return Math.abs(t-e)*1e5<=Math.min(Math.abs(t),Math.abs(e))}function floatZero(t){return Math.abs(t)<=1e-5}function lerp(t,e,r){return t*(1-r)+e*r}function lerpPoint(t,e,r){return[lerp(t[0],e[0],r),lerp(t[1],e[1],r)]}function quadRoots(t,e,r){if(t===0)return[];var n=e*e-4*t*r;if(n<0)return[];var a=-e/(2*t);if(n===0)return[a];var s=Math.sqrt(n)/(2*t);return[a-s,a+s]}function polynomialCoefficients(t,e,r,n){return[-t+3*e-3*r+n,3*t-6*e+3*r,-3*t+3*e,t]}function singlePoint(t){return new PolynomialBezier(t,t,t,t,!1)}function PolynomialBezier(t,e,r,n,a){a&&pointEqual(t,e)&&(e=lerpPoint(t,n,1/3)),a&&pointEqual(r,n)&&(r=lerpPoint(t,n,2/3));var s=polynomialCoefficients(t[0],e[0],r[0],n[0]),o=polynomialCoefficients(t[1],e[1],r[1],n[1]);this.a=[s[0],o[0]],this.b=[s[1],o[1]],this.c=[s[2],o[2]],this.d=[s[3],o[3]],this.points=[t,e,r,n]}PolynomialBezier.prototype.point=function(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]},PolynomialBezier.prototype.derivative=function(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(t){var e=this.derivative(t);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(t){var e=this.derivative(t);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(t))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,r=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(r<0)return[];var n=Math.sqrt(r);return floatZero(n)?n>0&&n<1?[e]:[]:[e-n,e+n].filter(function(a){return a>0&&a<1})},PolynomialBezier.prototype.split=function(t){if(t<=0)return[singlePoint(this.points[0]),this];if(t>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],t),r=lerpPoint(this.points[1],this.points[2],t),n=lerpPoint(this.points[2],this.points[3],t),a=lerpPoint(e,r,t),s=lerpPoint(r,n,t),o=lerpPoint(a,s,t);return[new PolynomialBezier(this.points[0],e,a,o,!0),new PolynomialBezier(o,s,n,this.points[3],!0)]};function extrema(t,e){var r=t.points[0][e],n=t.points[t.points.length-1][e];if(r>n){var a=n;n=r,r=a}for(var s=quadRoots(3*t.a[e],2*t.b[e],t.c[e]),o=0;o<s.length;o+=1)if(s[o]>0&&s[o]<1){var c=t.point(s[o])[e];c<r?r=c:c>n&&(n=c)}return{min:r,max:n}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var t=this.bounds();return{left:t.x.min,right:t.x.max,top:t.y.min,bottom:t.y.max,width:t.x.max-t.x.min,height:t.y.max-t.y.min,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2}};function intersectData(t,e,r){var n=t.boundingBox();return{cx:n.cx,cy:n.cy,width:n.width,height:n.height,bez:t,t:(e+r)/2,t1:e,t2:r}}function splitData(t){var e=t.bez.split(.5);return[intersectData(e[0],t.t1,t.t),intersectData(e[1],t.t,t.t2)]}function boxIntersect(t,e){return Math.abs(t.cx-e.cx)*2<t.width+e.width&&Math.abs(t.cy-e.cy)*2<t.height+e.height}function intersectsImpl(t,e,r,n,a,s){if(boxIntersect(t,e)){if(r>=s||t.width<=n&&t.height<=n&&e.width<=n&&e.height<=n){a.push([t.t,e.t]);return}var o=splitData(t),c=splitData(e);intersectsImpl(o[0],c[0],r+1,n,a,s),intersectsImpl(o[0],c[1],r+1,n,a,s),intersectsImpl(o[1],c[0],r+1,n,a,s),intersectsImpl(o[1],c[1],r+1,n,a,s)}}PolynomialBezier.prototype.intersections=function(t,e,r){e===void 0&&(e=2),r===void 0&&(r=7);var n=[];return intersectsImpl(intersectData(this,0,1),intersectData(t,0,1),0,e,n,r),n},PolynomialBezier.shapeSegment=function(t,e){var r=(e+1)%t.length();return new PolynomialBezier(t.v[e],t.o[e],t.i[r],t.v[r],!0)},PolynomialBezier.shapeSegmentInverted=function(t,e){var r=(e+1)%t.length();return new PolynomialBezier(t.v[r],t.i[r],t.o[e],t.v[e],!0)};function crossProduct(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function lineIntersection(t,e,r,n){var a=[t[0],t[1],1],s=[e[0],e[1],1],o=[r[0],r[1],1],c=[n[0],n[1],1],d=crossProduct(crossProduct(a,s),crossProduct(o,c));return floatZero(d[2])?null:[d[0]/d[2],d[1]/d[2]]}function polarOffset(t,e,r){return[t[0]+Math.cos(e)*r,t[1]-Math.sin(e)*r]}function pointDistance(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1])}function pointEqual(t,e){return floatEqual(t[0],e[0])&&floatEqual(t[1],e[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(t,e.s,0,null,this),this.frequency=PropertyFactory.getProp(t,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(t,e.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(t,e,r,n,a,s,o){var c=r-Math.PI/2,d=r+Math.PI/2,m=e[0]+Math.cos(r)*n*a,y=e[1]-Math.sin(r)*n*a;t.setTripleAt(m,y,m+Math.cos(c)*s,y-Math.sin(c)*s,m+Math.cos(d)*o,y-Math.sin(d)*o,t.length())}function getPerpendicularVector(t,e){var r=[e[0]-t[0],e[1]-t[1]],n=-Math.PI*.5,a=[Math.cos(n)*r[0]-Math.sin(n)*r[1],Math.sin(n)*r[0]+Math.cos(n)*r[1]];return a}function getProjectingAngle(t,e){var r=e===0?t.length()-1:e-1,n=(e+1)%t.length(),a=t.v[r],s=t.v[n],o=getPerpendicularVector(a,s);return Math.atan2(0,1)-Math.atan2(o[1],o[0])}function zigZagCorner(t,e,r,n,a,s,o){var c=getProjectingAngle(e,r),d=e.v[r%e._length],m=e.v[r===0?e._length-1:r-1],y=e.v[(r+1)%e._length],A=s===2?Math.sqrt(Math.pow(d[0]-m[0],2)+Math.pow(d[1]-m[1],2)):0,P=s===2?Math.sqrt(Math.pow(d[0]-y[0],2)+Math.pow(d[1]-y[1],2)):0;setPoint(t,e.v[r%e._length],c,o,n,P/((a+1)*2),A/((a+1)*2))}function zigZagSegment(t,e,r,n,a,s){for(var o=0;o<n;o+=1){var c=(o+1)/(n+1),d=a===2?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,m=e.normalAngle(c),y=e.point(c);setPoint(t,y,m,s,r,d/((n+1)*2),d/((n+1)*2)),s=-s}return s}ZigZagModifier.prototype.processPath=function(t,e,r,n){var a=t._length,s=shapePool.newElement();if(s.c=t.c,t.c||(a-=1),a===0)return s;var o=-1,c=PolynomialBezier.shapeSegment(t,0);zigZagCorner(s,t,0,e,r,n,o);for(var d=0;d<a;d+=1)o=zigZagSegment(s,c,e,r,n,-o),d===a-1&&!t.c?c=null:c=PolynomialBezier.shapeSegment(t,(d+1)%a),zigZagCorner(s,t,d+1,e,r,n,o);return s},ZigZagModifier.prototype.processShapes=function(t){var e,r,n=this.shapes.length,a,s,o=this.amplitude.v,c=Math.max(0,Math.round(this.frequency.v)),d=this.pointsType.v;if(o!==0){var m,y;for(r=0;r<n;r+=1){if(m=this.shapes[r],y=m.localShapeCollection,!(!m.shape._mdf&&!this._mdf&&!t))for(y.releaseShapes(),m.shape._mdf=!0,e=m.shape.paths.shapes,s=m.shape.paths._length,a=0;a<s;a+=1)y.addShape(this.processPath(e[a],o,c,d));m.shape.paths=m.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(t,e,r){var n=Math.atan2(e[0]-t[0],e[1]-t[1]);return[polarOffset(t,n,r),polarOffset(e,n,r)]}function offsetSegment(t,e){var r,n,a,s,o,c,d;d=linearOffset(t.points[0],t.points[1],e),r=d[0],n=d[1],d=linearOffset(t.points[1],t.points[2],e),a=d[0],s=d[1],d=linearOffset(t.points[2],t.points[3],e),o=d[0],c=d[1];var m=lineIntersection(r,n,a,s);m===null&&(m=n);var y=lineIntersection(o,c,a,s);return y===null&&(y=o),new PolynomialBezier(r,m,y,c)}function joinLines(t,e,r,n,a){var s=e.points[3],o=r.points[0];if(n===3||pointEqual(s,o))return s;if(n===2){var c=-e.tangentAngle(1),d=-r.tangentAngle(0)+Math.PI,m=lineIntersection(s,polarOffset(s,c+Math.PI/2,100),o,polarOffset(o,c+Math.PI/2,100)),y=m?pointDistance(m,s):pointDistance(s,o)/2,A=polarOffset(s,c,2*y*roundCorner);return t.setXYAt(A[0],A[1],"o",t.length()-1),A=polarOffset(o,d,2*y*roundCorner),t.setTripleAt(o[0],o[1],o[0],o[1],A[0],A[1],t.length()),o}var P=pointEqual(s,e.points[2])?e.points[0]:e.points[2],Z=pointEqual(o,r.points[1])?r.points[3]:r.points[1],me=lineIntersection(P,s,o,Z);return me&&pointDistance(me,s)<a?(t.setTripleAt(me[0],me[1],me[0],me[1],me[0],me[1],t.length()),me):s}function getIntersection(t,e){var r=t.intersections(e);return r.length&&floatEqual(r[0][0],1)&&r.shift(),r.length?r[0]:null}function pruneSegmentIntersection(t,e){var r=t.slice(),n=e.slice(),a=getIntersection(t[t.length-1],e[0]);return a&&(r[t.length-1]=t[t.length-1].split(a[0])[0],n[0]=e[0].split(a[1])[1]),t.length>1&&e.length>1&&(a=getIntersection(t[0],e[e.length-1]),a)?[[t[0].split(a[0])[0]],[e[e.length-1].split(a[1])[1]]]:[r,n]}function pruneIntersections(t){for(var e,r=1;r<t.length;r+=1)e=pruneSegmentIntersection(t[r-1],t[r]),t[r-1]=e[0],t[r]=e[1];return t.length>1&&(e=pruneSegmentIntersection(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t}function offsetSegmentSplit(t,e){var r=t.inflectionPoints(),n,a,s,o;if(r.length===0)return[offsetSegment(t,e)];if(r.length===1||floatEqual(r[1],1))return s=t.split(r[0]),n=s[0],a=s[1],[offsetSegment(n,e),offsetSegment(a,e)];s=t.split(r[0]),n=s[0];var c=(r[1]-r[0])/(1-r[0]);return s=s[1].split(c),o=s[0],a=s[1],[offsetSegment(n,e),offsetSegment(o,e),offsetSegment(a,e)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(t,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(t,e,r,n){var a=shapePool.newElement();a.c=t.c;var s=t.length();t.c||(s-=1);var o,c,d,m=[];for(o=0;o<s;o+=1)d=PolynomialBezier.shapeSegment(t,o),m.push(offsetSegmentSplit(d,e));if(!t.c)for(o=s-1;o>=0;o-=1)d=PolynomialBezier.shapeSegmentInverted(t,o),m.push(offsetSegmentSplit(d,e));m=pruneIntersections(m);var y=null,A=null;for(o=0;o<m.length;o+=1){var P=m[o];for(A&&(y=joinLines(a,A,P[0],r,n)),A=P[P.length-1],c=0;c<P.length;c+=1)d=P[c],y&&pointEqual(d.points[0],y)?a.setXYAt(d.points[1][0],d.points[1][1],"o",a.length()-1):a.setTripleAt(d.points[0][0],d.points[0][1],d.points[1][0],d.points[1][1],d.points[0][0],d.points[0][1],a.length()),a.setTripleAt(d.points[3][0],d.points[3][1],d.points[3][0],d.points[3][1],d.points[2][0],d.points[2][1],a.length()),y=d.points[3]}return m.length&&joinLines(a,A,m[0][0],r,n),a},OffsetPathModifier.prototype.processShapes=function(t){var e,r,n=this.shapes.length,a,s,o=this.amount.v,c=this.miterLimit.v,d=this.lineJoin;if(o!==0){var m,y;for(r=0;r<n;r+=1){if(m=this.shapes[r],y=m.localShapeCollection,!(!m.shape._mdf&&!this._mdf&&!t))for(y.releaseShapes(),m.shape._mdf=!0,e=m.shape.paths.shapes,s=m.shape.paths._length,a=0;a<s;a+=1)y.addShape(this.processPath(e[a],o,d,c));m.shape.paths=m.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],r="normal",n="normal",a=e.length,s,o=0;o<a;o+=1)switch(s=e[o].toLowerCase(),s){case"italic":n="italic";break;case"bold":r="700";break;case"black":r="900";break;case"medium":r="500";break;case"regular":case"normal":r="400";break;case"light":case"thin":r="200";break}return{style:n,weight:t.fWeight||r}}var FontManager=function(){var t=5e3,e={w:0,size:0,shapes:[],data:{shapes:[]}},r=[];r=r.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var n=127988,a=917631,s=917601,o=917626,c=65039,d=8205,m=127462,y=127487,A=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function P(So){var th=So.split(","),Rs,Ko=th.length,Vc=[];for(Rs=0;Rs<Ko;Rs+=1)th[Rs]!=="sans-serif"&&th[Rs]!=="monospace"&&Vc.push(th[Rs]);return Vc.join(",")}function Z(So,th){var Rs=createTag("span");Rs.setAttribute("aria-hidden",!0),Rs.style.fontFamily=th;var Ko=createTag("span");Ko.innerText="giItT1WQy@!-/#",Rs.style.position="absolute",Rs.style.left="-10000px",Rs.style.top="-10000px",Rs.style.fontSize="300px",Rs.style.fontVariant="normal",Rs.style.fontStyle="normal",Rs.style.fontWeight="normal",Rs.style.letterSpacing="0",Rs.appendChild(Ko),document.body.appendChild(Rs);var Vc=Ko.offsetWidth;return Ko.style.fontFamily=P(So)+", "+th,{node:Ko,w:Vc,parent:Rs}}function me(){var So,th=this.fonts.length,Rs,Ko,Vc=th;for(So=0;So<th;So+=1)this.fonts[So].loaded?Vc-=1:this.fonts[So].fOrigin==="n"||this.fonts[So].origin===0?this.fonts[So].loaded=!0:(Rs=this.fonts[So].monoCase.node,Ko=this.fonts[So].monoCase.w,Rs.offsetWidth!==Ko?(Vc-=1,this.fonts[So].loaded=!0):(Rs=this.fonts[So].sansCase.node,Ko=this.fonts[So].sansCase.w,Rs.offsetWidth!==Ko&&(Vc-=1,this.fonts[So].loaded=!0)),this.fonts[So].loaded&&(this.fonts[So].sansCase.parent.parentNode.removeChild(this.fonts[So].sansCase.parent),this.fonts[So].monoCase.parent.parentNode.removeChild(this.fonts[So].monoCase.parent)));Vc!==0&&Date.now()-this.initTime<t?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function _e(So,th){var Rs=document.body&&th?"svg":"canvas",Ko,Vc=getFontProperties(So);if(Rs==="svg"){var yh=createNS("text");yh.style.fontSize="100px",yh.setAttribute("font-family",So.fFamily),yh.setAttribute("font-style",Vc.style),yh.setAttribute("font-weight",Vc.weight),yh.textContent="1",So.fClass?(yh.style.fontFamily="inherit",yh.setAttribute("class",So.fClass)):yh.style.fontFamily=So.fFamily,th.appendChild(yh),Ko=yh}else{var wh=new OffscreenCanvas(500,500).getContext("2d");wh.font=Vc.style+" "+Vc.weight+" 100px "+So.fFamily,Ko=wh}function uf(i1){return Rs==="svg"?(Ko.textContent=i1,Ko.getComputedTextLength()):Ko.measureText(i1).width}return{measureText:uf}}function Ge(So,th){if(!So){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=So.list;return}if(!document.body){this.isLoaded=!0,So.list.forEach(function(p1){p1.helper=_e(p1),p1.cache={}}),this.fonts=So.list;return}var Rs=So.list,Ko,Vc=Rs.length,yh=Vc;for(Ko=0;Ko<Vc;Ko+=1){var wh=!0,uf,i1;if(Rs[Ko].loaded=!1,Rs[Ko].monoCase=Z(Rs[Ko].fFamily,"monospace"),Rs[Ko].sansCase=Z(Rs[Ko].fFamily,"sans-serif"),!Rs[Ko].fPath)Rs[Ko].loaded=!0,yh-=1;else if(Rs[Ko].fOrigin==="p"||Rs[Ko].origin===3){if(uf=document.querySelectorAll('style[f-forigin="p"][f-family="'+Rs[Ko].fFamily+'"], style[f-origin="3"][f-family="'+Rs[Ko].fFamily+'"]'),uf.length>0&&(wh=!1),wh){var u1=createTag("style");u1.setAttribute("f-forigin",Rs[Ko].fOrigin),u1.setAttribute("f-origin",Rs[Ko].origin),u1.setAttribute("f-family",Rs[Ko].fFamily),u1.type="text/css",u1.innerText="@font-face {font-family: "+Rs[Ko].fFamily+"; font-style: normal; src: url('"+Rs[Ko].fPath+"');}",th.appendChild(u1)}}else if(Rs[Ko].fOrigin==="g"||Rs[Ko].origin===1){for(uf=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),i1=0;i1<uf.length;i1+=1)uf[i1].href.indexOf(Rs[Ko].fPath)!==-1&&(wh=!1);if(wh){var h1=createTag("link");h1.setAttribute("f-forigin",Rs[Ko].fOrigin),h1.setAttribute("f-origin",Rs[Ko].origin),h1.type="text/css",h1.rel="stylesheet",h1.href=Rs[Ko].fPath,document.body.appendChild(h1)}}else if(Rs[Ko].fOrigin==="t"||Rs[Ko].origin===2){for(uf=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),i1=0;i1<uf.length;i1+=1)Rs[Ko].fPath===uf[i1].src&&(wh=!1);if(wh){var T1=createTag("link");T1.setAttribute("f-forigin",Rs[Ko].fOrigin),T1.setAttribute("f-origin",Rs[Ko].origin),T1.setAttribute("rel","stylesheet"),T1.setAttribute("href",Rs[Ko].fPath),th.appendChild(T1)}}Rs[Ko].helper=_e(Rs[Ko],th),Rs[Ko].cache={},this.fonts.push(Rs[Ko])}yh===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function ve(So){if(So){this.chars||(this.chars=[]);var th,Rs=So.length,Ko,Vc=this.chars.length,yh;for(th=0;th<Rs;th+=1){for(Ko=0,yh=!1;Ko<Vc;)this.chars[Ko].style===So[th].style&&this.chars[Ko].fFamily===So[th].fFamily&&this.chars[Ko].ch===So[th].ch&&(yh=!0),Ko+=1;yh||(this.chars.push(So[th]),Vc+=1)}}}function He(So,th,Rs){for(var Ko=0,Vc=this.chars.length;Ko<Vc;){if(this.chars[Ko].ch===So&&this.chars[Ko].style===th&&this.chars[Ko].fFamily===Rs)return this.chars[Ko];Ko+=1}return(typeof So=="string"&&So.charCodeAt(0)!==13||!So)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",So,th,Rs)),e}function De(So,th,Rs){var Ko=this.getFontByName(th),Vc=So;if(!Ko.cache[Vc]){var yh=Ko.helper;if(So===" "){var wh=yh.measureText("|"+So+"|"),uf=yh.measureText("||");Ko.cache[Vc]=(wh-uf)/100}else Ko.cache[Vc]=yh.measureText(So)/100}return Ko.cache[Vc]*Rs}function Xe(So){for(var th=0,Rs=this.fonts.length;th<Rs;){if(this.fonts[th].fName===So)return this.fonts[th];th+=1}return this.fonts[0]}function Bs(So){var th=0,Rs=So.charCodeAt(0);if(Rs>=55296&&Rs<=56319){var Ko=So.charCodeAt(1);Ko>=56320&&Ko<=57343&&(th=(Rs-55296)*1024+Ko-56320+65536)}return th}function wt(So,th){var Rs=So.toString(16)+th.toString(16);return A.indexOf(Rs)!==-1}function li(So){return So===d}function An(So){return So===c}function Os(So){var th=Bs(So);return th>=m&&th<=y}function vh(So){return Os(So.substr(0,2))&&Os(So.substr(2,2))}function Fc(So){return r.indexOf(So)!==-1}function Hc(So,th){var Rs=Bs(So.substr(th,2));if(Rs!==n)return!1;var Ko=0;for(th+=2;Ko<5;){if(Rs=Bs(So.substr(th,2)),Rs<s||Rs>o)return!1;Ko+=1,th+=2}return Bs(So.substr(th,2))===a}function qc(){this.isLoaded=!0}var e1=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};e1.isModifier=wt,e1.isZeroWidthJoiner=li,e1.isFlagEmoji=vh,e1.isRegionalCode=Os,e1.isCombinedCharacter=Fc,e1.isRegionalFlag=Hc,e1.isVariationSelector=An,e1.BLACK_FLAG_CODE_POINT=n;var df={addChars:ve,addFonts:Ge,getCharData:He,getFontByName:Xe,measureText:De,checkLoadedFonts:me,setIsLoaded:qc};return e1.prototype=df,e1}();function SlotManager(t){this.animationData=t}SlotManager.prototype.getProp=function(t){return this.animationData.slots&&this.animationData.slots[t.sid]?Object.assign(t,this.animationData.slots[t.sid].p):t};function slotFactory(t){return new SlotManager(t)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){this.renderableComponents.indexOf(e)===-1&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){this.renderableComponents.indexOf(e)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,r=this.renderableComponents.length;for(e=0;e<r;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var t={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(e){return t[e]||""}}();function SliderEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function AngleEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function ColorEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function PointEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function LayerIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function MaskIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function CheckboxEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var r=t.ef||[];this.effectElements=[];var n,a=r.length,s;for(n=0;n<a;n+=1)s=new GroupEffect(r[n],e),this.effectElements.push(s)}function GroupEffect(t,e){this.init(t,e)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var r,n=this.data.ef.length,a,s=this.data.ef;for(r=0;r<n;r+=1){switch(a=null,s[r].ty){case 0:a=new SliderEffect(s[r],e,this);break;case 1:a=new AngleEffect(s[r],e,this);break;case 2:a=new ColorEffect(s[r],e,this);break;case 3:a=new PointEffect(s[r],e,this);break;case 4:case 7:a=new CheckboxEffect(s[r],e,this);break;case 10:a=new LayerIndexEffect(s[r],e,this);break;case 11:a=new MaskIndexEffect(s[r],e,this);break;case 5:a=new EffectsManager(s[r],e);break;default:a=new NoValueEffect(s[r]);break}a&&this.effectElements.push(a)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,r=this.data.masksProperties.length;e<r;){if(this.data.masksProperties[e].mode!=="n"&&this.data.masksProperties[e].cl!==!1)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var r=e("layer"),n=e("effects"),a=e("shape"),s=e("text"),o=e("comp");this.layerInterface=r(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var c=n.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(c),this.data.ty===0||this.data.xt?this.compInterface=o(this):this.data.ty===4?(this.layerInterface.shapeInterface=a(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=s(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm),r=this.baseElement||this.layerElement;r.style["mix-blend-mode"]=e},initBaseData:function(e,r,n){this.globalData=r,this.comp=n,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,r){var n,a=this.dynamicProperties.length;for(n=0;n<a;n+=1)(r||this._isParent&&this.dynamicProperties[n].propType==="transform")&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&this.dynamicProperties.push(e)}};function FootageElement(t,e,r){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,r)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var t=getExpressionInterfaces();if(t){var e=t("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(t,e,r){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,r),this._isPlaying=!1,this._canPlay=!1;var n=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(n),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,t.au&&t.au.lv?t.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var r=this._volume*this._volumeMultiplier;this._previousVolume!==r&&(this._previousVolume=r,this.audio.volume(r))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(t){var e,r=this.layers.length,n;for(this.completeLayers=!0,e=r-1;e>=0;e-=1)this.elements[e]||(n=this.layers[e],n.ip-n.st<=t-this.layers[e].st&&n.op-n.st>t-this.layers[e].st&&this.buildItem(e)),this.completeLayers=this.elements[e]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t);default:return this.createNull(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;var e,r=t.length,n,a=this.layers.length;for(e=0;e<r;e+=1)for(n=0;n<a;){if(this.layers[n].id===t[e].id){this.layers[n]=t[e];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,r){for(var n=this.elements,a=this.layers,s=0,o=a.length;s<o;)a[s].ind==e&&(!n[s]||n[s]===!0?(this.buildItem(s),this.addPendingElement(t)):(r.push(n[s]),n[s].setAsParent(),a[s].parent!==void 0?this.buildElementParenting(t,a[s].parent,r):t.setHierarchy(r))),s+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,r=t.length;for(e=0;e<r;e+=1)if(t[e].xt){var n=this.createComp(t[e]);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},BaseRenderer.prototype.getElementById=function(t){var e,r=this.elements.length;for(e=0;e<r;e+=1)if(this.elements[e].data.ind===t)return this.elements[e];return null},BaseRenderer.prototype.getElementByPath=function(t){var e=t.shift(),r;if(typeof e=="number")r=this.elements[e];else{var n,a=this.elements.length;for(n=0;n<a;n+=1)if(this.elements[n].data.nm===e){r=this.elements[n];break}}return t.length===0?r:r.getElementByPath(t)},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(t),this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,r=this.finalTransform.mat,n=0,a=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<a;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,r.cloneFromProps(e),n=0;n<a;n+=1)r.multiply(this.hierarchy[n].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,r=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<r;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var n=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(n),e=1;e<r;e+=1){var a=this.localTransforms[e].matrix;n.multiply(a)}n.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var s=this.finalTransform.localOpacity;for(e=0;e<r;e+=1)s*=this.localTransforms[e].opacity*.01;this.finalTransform.localOpacity=s}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var r=0,n=e.length;for(r=0;r<n;r+=1)this.localTransforms.push(e[r])}}},globalToLocal:function(e){var r=[];r.push(this.finalTransform);for(var n=!0,a=this.comp;n;)a.finalTransform?(a.data.hasMask&&r.splice(0,0,a.finalTransform),a=a.comp):n=!1;var s,o=r.length,c;for(s=0;s<o;s+=1)c=r[s].mat.applyToPointArray(0,0,0),e=[e[0]-c[0],e[1]-c[1],0];return e},mHelper:new Matrix};function MaskElement(t,e,r){this.data=t,this.element=e,this.globalData=r,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var n=this.globalData.defs,a,s=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(s),this.solidPath="";var o,c=this.masksProperties,d=0,m=[],y,A,P=createElementID(),Z,me,_e,Ge,ve="clipPath",He="clip-path";for(a=0;a<s;a+=1)if((c[a].mode!=="a"&&c[a].mode!=="n"||c[a].inv||c[a].o.k!==100||c[a].o.x)&&(ve="mask",He="mask"),(c[a].mode==="s"||c[a].mode==="i")&&d===0?(Z=createNS("rect"),Z.setAttribute("fill","#ffffff"),Z.setAttribute("width",this.element.comp.data.w||0),Z.setAttribute("height",this.element.comp.data.h||0),m.push(Z)):Z=null,o=createNS("path"),c[a].mode==="n")this.viewData[a]={op:PropertyFactory.getProp(this.element,c[a].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[a],3),elem:o,lastPath:""},n.appendChild(o);else{d+=1,o.setAttribute("fill",c[a].mode==="s"?"#000000":"#ffffff"),o.setAttribute("clip-rule","nonzero");var De;if(c[a].x.k!==0?(ve="mask",He="mask",Ge=PropertyFactory.getProp(this.element,c[a].x,0,null,this.element),De=createElementID(),me=createNS("filter"),me.setAttribute("id",De),_e=createNS("feMorphology"),_e.setAttribute("operator","erode"),_e.setAttribute("in","SourceGraphic"),_e.setAttribute("radius","0"),me.appendChild(_e),n.appendChild(me),o.setAttribute("stroke",c[a].mode==="s"?"#000000":"#ffffff")):(_e=null,Ge=null),this.storedData[a]={elem:o,x:Ge,expan:_e,lastPath:"",lastOperator:"",filterId:De,lastRadius:0},c[a].mode==="i"){A=m.length;var Xe=createNS("g");for(y=0;y<A;y+=1)Xe.appendChild(m[y]);var Bs=createNS("mask");Bs.setAttribute("mask-type","alpha"),Bs.setAttribute("id",P+"_"+d),Bs.appendChild(o),n.appendChild(Bs),Xe.setAttribute("mask","url("+getLocationHref()+"#"+P+"_"+d+")"),m.length=0,m.push(Xe)}else m.push(o);c[a].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[a]={elem:o,lastPath:"",op:PropertyFactory.getProp(this.element,c[a].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[a],3),invRect:Z},this.viewData[a].prop.k||this.drawPath(c[a],this.viewData[a].prop.v,this.viewData[a])}for(this.maskElement=createNS(ve),s=m.length,a=0;a<s;a+=1)this.maskElement.appendChild(m[a]);d>0&&(this.maskElement.setAttribute("id",P),this.element.maskedElement.setAttribute(He,"url("+getLocationHref()+"#"+P+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e=this.element.finalTransform.mat,r,n=this.masksProperties.length;for(r=0;r<n;r+=1)if((this.viewData[r].prop._mdf||t)&&this.drawPath(this.masksProperties[r],this.viewData[r].prop.v,this.viewData[r]),(this.viewData[r].op._mdf||t)&&this.viewData[r].elem.setAttribute("fill-opacity",this.viewData[r].op.v),this.masksProperties[r].mode!=="n"&&(this.viewData[r].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[r].invRect.setAttribute("transform",e.getInverseMatrix().to2dCSS()),this.storedData[r].x&&(this.storedData[r].x._mdf||t))){var a=this.storedData[r].expan;this.storedData[r].x.v<0?(this.storedData[r].lastOperator!=="erode"&&(this.storedData[r].lastOperator="erode",this.storedData[r].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[r].filterId+")")),a.setAttribute("radius",-this.storedData[r].x.v)):(this.storedData[r].lastOperator!=="dilate"&&(this.storedData[r].lastOperator="dilate",this.storedData[r].elem.setAttribute("filter",null)),this.storedData[r].elem.setAttribute("stroke-width",this.storedData[r].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" ",t},MaskElement.prototype.drawPath=function(t,e,r){var n=" M"+e.v[0][0]+","+e.v[0][1],a,s;for(s=e._length,a=1;a<s;a+=1)n+=" C"+e.o[a-1][0]+","+e.o[a-1][1]+" "+e.i[a][0]+","+e.i[a][1]+" "+e.v[a][0]+","+e.v[a][1];if(e.c&&s>1&&(n+=" C"+e.o[a-1][0]+","+e.o[a-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),r.lastPath!==n){var o="";r.elem&&(e.c&&(o=t.inv?this.solidPath+n:n),r.elem.setAttribute("d",o)),r.lastPath=n}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var t={};t.createFilter=e,t.createAlphaToLuminanceFilter=r;function e(n,a){var s=createNS("filter");return s.setAttribute("id",n),a!==!0&&(s.setAttribute("filterUnits","objectBoundingBox"),s.setAttribute("x","0%"),s.setAttribute("y","0%"),s.setAttribute("width","100%"),s.setAttribute("height","100%")),s}function r(){var n=createNS("feColorMatrix");return n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),n}return t}(),featureSupport=function(){var t={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),/firefox/i.test(navigator.userAgent)&&(t.svgLumaHidden=!1),t}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(t){var e,r="SourceGraphic",n=t.data.ef?t.data.ef.length:0,a=createElementID(),s=filtersFactory.createFilter(a,!0),o=0;this.filters=[];var c;for(e=0;e<n;e+=1){c=null;var d=t.data.ef[e].ty;if(registeredEffects$1[d]){var m=registeredEffects$1[d].effect;c=new m(s,t.effectsManager.effectElements[e],t,idPrefix+o,r),r=idPrefix+o,registeredEffects$1[d].countsAsEffect&&(o+=1)}c&&this.filters.push(c)}o&&(t.globalData.defs.appendChild(s),t.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+a+")")),this.filters.length&&t.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(t){var e,r=this.filters.length;for(e=0;e<r;e+=1)this.filters[e].renderFrame(t)},SVGEffects.prototype.getEffects=function(t){var e,r=this.filters.length,n=[];for(e=0;e<r;e+=1)this.filters[e].type===t&&n.push(this.filters[e]);return n};function registerEffect$1(t,e,r){registeredEffects$1[t]={effect:e,countsAsEffect:r}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var r=createNS("g");r.setAttribute("id",this.layerId),r.appendChild(this.layerElement),e=r,this.globalData.defs.appendChild(r)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var n=createNS("clipPath"),a=createNS("path");a.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var s=createElementID();if(n.setAttribute("id",s),n.appendChild(a),this.globalData.defs.appendChild(n),this.checkMasks()){var o=createNS("g");o.setAttribute("clip-path","url("+getLocationHref()+"#"+s+")"),o.appendChild(this.layerElement),this.transformedElement=o,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+s+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var r=this.layerId+"_"+e,n,a,s,o;if(e===1||e===3){var c=createNS("mask");c.setAttribute("id",r),c.setAttribute("mask-type",e===3?"luminance":"alpha"),s=createNS("use"),s.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),c.appendChild(s),this.globalData.defs.appendChild(c),!featureSupport.maskType&&e===1&&(c.setAttribute("mask-type","luminance"),n=createElementID(),a=filtersFactory.createFilter(n),this.globalData.defs.appendChild(a),a.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),o.appendChild(s),c.appendChild(o),o.setAttribute("filter","url("+getLocationHref()+"#"+n+")"))}else if(e===2){var d=createNS("mask");d.setAttribute("id",r),d.setAttribute("mask-type","alpha");var m=createNS("g");d.appendChild(m),n=createElementID(),a=filtersFactory.createFilter(n);var y=createNS("feComponentTransfer");y.setAttribute("in","SourceGraphic"),a.appendChild(y);var A=createNS("feFuncA");A.setAttribute("type","table"),A.setAttribute("tableValues","1.0 0.0"),y.appendChild(A),this.globalData.defs.appendChild(a);var P=createNS("rect");P.setAttribute("width",this.comp.data.w),P.setAttribute("height",this.comp.data.h),P.setAttribute("x","0"),P.setAttribute("y","0"),P.setAttribute("fill","#ffffff"),P.setAttribute("opacity","0"),m.setAttribute("filter","url("+getLocationHref()+"#"+n+")"),m.appendChild(P),s=createNS("use"),s.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),m.appendChild(s),featureSupport.maskType||(d.setAttribute("mask-type","luminance"),a.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),m.appendChild(P),o.appendChild(this.layerElement),m.appendChild(o)),this.globalData.defs.appendChild(d)}this.matteMasks[e]=r}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var t={initElement:function(r,n,a){this.initFrame(),this.initBaseData(r,n,a),this.initTransform(r,n,a),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var r=this.baseElement||this.layerElement;r.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var r=this.baseElement||this.layerElement;r.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(r){this._mdf=!1,this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(t)],RenderableDOMElement)})();function IImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(t,e,r),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(t,e){this.elem=t,this.pos=e}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(e){var r,n=this.shapeModifiers.length;for(r=0;r<n;r+=1)this.shapeModifiers[r].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var r=0,n=this.shapeModifiers.length;r<n;)if(this.shapeModifiers[r].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,r=this.shapes.length;for(e=0;e<r;e+=1)this.shapes[e].sh.reset();r=this.shapeModifiers.length;var n;for(e=r-1;e>=0&&(n=this.shapeModifiers[e].processShapes(this._isFirstFrame),!n);e-=1);}},searchProcessedElement:function(e){for(var r=this.processedElements,n=0,a=r.length;n<a;){if(r[n].elem===e)return r[n].pos;n+=1}return 0},addProcessedElement:function(e,r){for(var n=this.processedElements,a=n.length;a;)if(a-=1,n[a].elem===e){n[a].pos=r;return}n.push(new ProcessedElement(e,r))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(t,e,r){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=r,this.lvl=e,this._isAnimated=!!r.k;for(var n=0,a=t.length;n<a;){if(t[n].mProps.dynamicProperties.length){this._isAnimated=!0;break}n+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=t.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(t,e,r,n){this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=r,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(n);var a,s=e.length||0,o;for(a=0;a<s;a+=1)o=PropertyFactory.getProp(t,e[a].v,0,0,this),this.k=o.k||this.k,this.dataProps[a]={n:e[a].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(t){if(!(this.elem.globalData.frameId===this.frameId&&!t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,r=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),e=0;e<r;e+=1)this.dataProps[e].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=r}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(t,e,r){this.data=e,this.c=createTypedArray("uint8c",e.p*4);var n=e.k.k[0].s?e.k.k[0].s.length-e.p*4:e.k.k.length-e.p*4;this.o=createTypedArray("float32",n),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=n,this.initDynamicPropertyContainer(r),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(t,e){for(var r=0,n=this.o.length/2,a;r<n;){if(a=Math.abs(t[r*4]-t[e*4+r*2]),a>.01)return!1;r+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,r=this.data.p*4,n,a;for(e=0;e<r;e+=1)n=e%4===0?100:255,a=Math.round(this.prop.v[e]*n),this.c[e]!==a&&(this.c[e]=a,this._cmdf=!t);if(this.o.length)for(r=this.prop.v.length,e=this.data.p*4;e<r;e+=1)n=e%2===0?100:1,a=e%2===0?Math.round(this.prop.v[e]*100):this.prop.v[e],this.o[e-this.data.p*4]!==a&&(this.o[e-this.data.p*4]=a,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,r)}SVGGradientFillStyleData.prototype.initGradientData=function(t,e,r){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=r,this.stops=[],this.setGradientData(r.pElem,e),this.setGradientOpacity(e,r),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var r=createElementID(),n=createNS(e.t===1?"linearGradient":"radialGradient");n.setAttribute("id",r),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var a=[],s,o,c;for(c=e.g.p*4,o=0;o<c;o+=4)s=createNS("stop"),n.appendChild(s),a.push(s);t.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+r+")"),this.gf=n,this.cst=a},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var r,n,a,s=createNS("mask"),o=createNS("path");s.appendChild(o);var c=createElementID(),d=createElementID();s.setAttribute("id",d);var m=createNS(t.t===1?"linearGradient":"radialGradient");m.setAttribute("id",c),m.setAttribute("spreadMethod","pad"),m.setAttribute("gradientUnits","userSpaceOnUse"),a=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var y=this.stops;for(n=t.g.p*4;n<a;n+=2)r=createNS("stop"),r.setAttribute("stop-color","rgb(255,255,255)"),m.appendChild(r),y.push(r);o.setAttribute(t.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+c+")"),t.ty==="gs"&&(o.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),t.lj===1&&o.setAttribute("stroke-miterlimit",t.ml)),this.of=m,this.ms=s,this.ost=y,this.maskId=d,e.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,r),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(t,e,r){this.transform={mProps:t,op:e,container:r},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(e,r,n,a){if(r===0)return"";var s=e.o,o=e.i,c=e.v,d,m=" M"+a.applyToPointStringified(c[0][0],c[0][1]);for(d=1;d<r;d+=1)m+=" C"+a.applyToPointStringified(s[d-1][0],s[d-1][1])+" "+a.applyToPointStringified(o[d][0],o[d][1])+" "+a.applyToPointStringified(c[d][0],c[d][1]);return n&&r&&(m+=" C"+a.applyToPointStringified(s[d-1][0],s[d-1][1])+" "+a.applyToPointStringified(o[0][0],o[0][1])+" "+a.applyToPointStringified(c[0][0],c[0][1]),m+="z"),m},SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix,r={createRenderFunction:n};function n(A){switch(A.ty){case"fl":return c;case"gf":return m;case"gs":return d;case"st":return y;case"sh":case"el":case"rc":case"sr":return o;case"tr":return a;case"no":return s;default:return null}}function a(A,P,Z){(Z||P.transform.op._mdf)&&P.transform.container.setAttribute("opacity",P.transform.op.v),(Z||P.transform.mProps._mdf)&&P.transform.container.setAttribute("transform",P.transform.mProps.v.to2dCSS())}function s(){}function o(A,P,Z){var me,_e,Ge,ve,He,De,Xe=P.styles.length,Bs=P.lvl,wt,li,An,Os;for(De=0;De<Xe;De+=1){if(ve=P.sh._mdf||Z,P.styles[De].lvl<Bs){for(li=e.reset(),An=Bs-P.styles[De].lvl,Os=P.transformers.length-1;!ve&&An>0;)ve=P.transformers[Os].mProps._mdf||ve,An-=1,Os-=1;if(ve)for(An=Bs-P.styles[De].lvl,Os=P.transformers.length-1;An>0;)li.multiply(P.transformers[Os].mProps.v),An-=1,Os-=1}else li=t;if(wt=P.sh.paths,_e=wt._length,ve){for(Ge="",me=0;me<_e;me+=1)He=wt.shapes[me],He&&He._length&&(Ge+=buildShapeString(He,He._length,He.c,li));P.caches[De]=Ge}else Ge=P.caches[De];P.styles[De].d+=A.hd===!0?"":Ge,P.styles[De]._mdf=ve||P.styles[De]._mdf}}function c(A,P,Z){var me=P.style;(P.c._mdf||Z)&&me.pElem.setAttribute("fill","rgb("+bmFloor(P.c.v[0])+","+bmFloor(P.c.v[1])+","+bmFloor(P.c.v[2])+")"),(P.o._mdf||Z)&&me.pElem.setAttribute("fill-opacity",P.o.v)}function d(A,P,Z){m(A,P,Z),y(A,P,Z)}function m(A,P,Z){var me=P.gf,_e=P.g._hasOpacity,Ge=P.s.v,ve=P.e.v;if(P.o._mdf||Z){var He=A.ty==="gf"?"fill-opacity":"stroke-opacity";P.style.pElem.setAttribute(He,P.o.v)}if(P.s._mdf||Z){var De=A.t===1?"x1":"cx",Xe=De==="x1"?"y1":"cy";me.setAttribute(De,Ge[0]),me.setAttribute(Xe,Ge[1]),_e&&!P.g._collapsable&&(P.of.setAttribute(De,Ge[0]),P.of.setAttribute(Xe,Ge[1]))}var Bs,wt,li,An;if(P.g._cmdf||Z){Bs=P.cst;var Os=P.g.c;for(li=Bs.length,wt=0;wt<li;wt+=1)An=Bs[wt],An.setAttribute("offset",Os[wt*4]+"%"),An.setAttribute("stop-color","rgb("+Os[wt*4+1]+","+Os[wt*4+2]+","+Os[wt*4+3]+")")}if(_e&&(P.g._omdf||Z)){var vh=P.g.o;for(P.g._collapsable?Bs=P.cst:Bs=P.ost,li=Bs.length,wt=0;wt<li;wt+=1)An=Bs[wt],P.g._collapsable||An.setAttribute("offset",vh[wt*2]+"%"),An.setAttribute("stop-opacity",vh[wt*2+1])}if(A.t===1)(P.e._mdf||Z)&&(me.setAttribute("x2",ve[0]),me.setAttribute("y2",ve[1]),_e&&!P.g._collapsable&&(P.of.setAttribute("x2",ve[0]),P.of.setAttribute("y2",ve[1])));else{var Fc;if((P.s._mdf||P.e._mdf||Z)&&(Fc=Math.sqrt(Math.pow(Ge[0]-ve[0],2)+Math.pow(Ge[1]-ve[1],2)),me.setAttribute("r",Fc),_e&&!P.g._collapsable&&P.of.setAttribute("r",Fc)),P.s._mdf||P.e._mdf||P.h._mdf||P.a._mdf||Z){Fc||(Fc=Math.sqrt(Math.pow(Ge[0]-ve[0],2)+Math.pow(Ge[1]-ve[1],2)));var Hc=Math.atan2(ve[1]-Ge[1],ve[0]-Ge[0]),qc=P.h.v;qc>=1?qc=.99:qc<=-1&&(qc=-.99);var e1=Fc*qc,df=Math.cos(Hc+P.a.v)*e1+Ge[0],So=Math.sin(Hc+P.a.v)*e1+Ge[1];me.setAttribute("fx",df),me.setAttribute("fy",So),_e&&!P.g._collapsable&&(P.of.setAttribute("fx",df),P.of.setAttribute("fy",So))}}}function y(A,P,Z){var me=P.style,_e=P.d;_e&&(_e._mdf||Z)&&_e.dashStr&&(me.pElem.setAttribute("stroke-dasharray",_e.dashStr),me.pElem.setAttribute("stroke-dashoffset",_e.dashoffset[0])),P.c&&(P.c._mdf||Z)&&me.pElem.setAttribute("stroke","rgb("+bmFloor(P.c.v[0])+","+bmFloor(P.c.v[1])+","+bmFloor(P.c.v[2])+")"),(P.o._mdf||Z)&&me.pElem.setAttribute("stroke-opacity",P.o.v),(P.w._mdf||Z)&&(me.pElem.setAttribute("stroke-width",P.w.v),me.msElem&&me.msElem.setAttribute("stroke-width",P.w.v))}return r}();function SVGShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,r),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e=this.shapes.length,r,n,a=this.stylesList.length,s,o=[],c=!1;for(n=0;n<a;n+=1){for(s=this.stylesList[n],c=!1,o.length=0,t=0;t<e;t+=1)r=this.shapes[t],r.styles.indexOf(s)!==-1&&(o.push(r),c=r._isAnimated||c);o.length>1&&c&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var r,n=new SVGStyleData(t,e),a=n.pElem;if(t.ty==="st")r=new SVGStrokeStyleData(this,t,n);else if(t.ty==="fl")r=new SVGFillStyleData(this,t,n);else if(t.ty==="gf"||t.ty==="gs"){var s=t.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;r=new s(this,t,n),this.globalData.defs.appendChild(r.gf),r.maskId&&(this.globalData.defs.appendChild(r.ms),this.globalData.defs.appendChild(r.of),a.setAttribute("mask","url("+getLocationHref()+"#"+r.maskId+")"))}else t.ty==="no"&&(r=new SVGNoStyleData(this,t,n));return(t.ty==="st"||t.ty==="gs")&&(a.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),a.setAttribute("fill-opacity","0"),t.lj===1&&a.setAttribute("stroke-miterlimit",t.ml)),t.r===2&&a.setAttribute("fill-rule","evenodd"),t.ln&&a.setAttribute("id",t.ln),t.cl&&a.setAttribute("class",t.cl),t.bm&&(a.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(n),this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var r=TransformPropertyFactory.getTransformProperty(this,t,this),n=new SVGTransformData(r,r.o,e);return this.addToAnimatedContents(t,n),n},SVGShapeElement.prototype.createShapeElement=function(t,e,r){var n=4;t.ty==="rc"?n=5:t.ty==="el"?n=6:t.ty==="sr"&&(n=7);var a=ShapePropertyFactory.getShapeProp(this,t,n,this),s=new SVGShapeData(e,r,a);return this.shapes.push(s),this.addShapeToModifiers(s),this.addToAnimatedContents(t,s),s},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var r=0,n=this.animatedContents.length;r<n;){if(this.animatedContents[r].element===e)return;r+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e=t.styles,r,n=this.stylesList.length;for(r=0;r<n;r+=1)e.indexOf(this.stylesList[r])===-1&&!this.stylesList[r].closed&&e.push(this.stylesList[r])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,r,n,a,s,o){var c=[].concat(s),d,m=t.length-1,y,A,P=[],Z=[],me,_e,Ge;for(d=m;d>=0;d-=1){if(Ge=this.searchProcessedElement(t[d]),Ge?e[d]=r[Ge-1]:t[d]._render=o,t[d].ty==="fl"||t[d].ty==="st"||t[d].ty==="gf"||t[d].ty==="gs"||t[d].ty==="no")Ge?e[d].style.closed=t[d].hd:e[d]=this.createStyleElement(t[d],a),t[d]._render&&e[d].style.pElem.parentNode!==n&&n.appendChild(e[d].style.pElem),P.push(e[d].style);else if(t[d].ty==="gr"){if(!Ge)e[d]=this.createGroupElement(t[d]);else for(A=e[d].it.length,y=0;y<A;y+=1)e[d].prevViewData[y]=e[d].it[y];this.searchShapes(t[d].it,e[d].it,e[d].prevViewData,e[d].gr,a+1,c,o),t[d]._render&&e[d].gr.parentNode!==n&&n.appendChild(e[d].gr)}else t[d].ty==="tr"?(Ge||(e[d]=this.createTransformElement(t[d],n)),me=e[d].transform,c.push(me)):t[d].ty==="sh"||t[d].ty==="rc"||t[d].ty==="el"||t[d].ty==="sr"?(Ge||(e[d]=this.createShapeElement(t[d],c,a)),this.setElementStyles(e[d])):t[d].ty==="tm"||t[d].ty==="rd"||t[d].ty==="ms"||t[d].ty==="pb"||t[d].ty==="zz"||t[d].ty==="op"?(Ge?(_e=e[d],_e.closed=!1):(_e=ShapeModifiers.getModifier(t[d].ty),_e.init(this,t[d]),e[d]=_e,this.shapeModifiers.push(_e)),Z.push(_e)):t[d].ty==="rp"&&(Ge?(_e=e[d],_e.closed=!0):(_e=ShapeModifiers.getModifier(t[d].ty),e[d]=_e,_e.init(this,t,d,e),this.shapeModifiers.push(_e),o=!1),Z.push(_e));this.addProcessedElement(t[d],d+1)}for(m=P.length,d=0;d<m;d+=1)P[d].closed=!0;for(m=Z.length,d=0;d<m;d+=1)Z[d].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e=this.animatedContents.length,r;for(t=0;t<e;t+=1)r=this.animatedContents[t],(this._isFirstFrame||r.element._isAnimated)&&r.data!==!0&&r.fn(r.data,r.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(t,e,r,n,a,s){this.o=t,this.sw=e,this.sc=r,this.fc=n,this.m=a,this.p=s,this._mdf={o:!0,sw:!!e,sc:!!r,fc:!!n,m:!0,p:!0}}LetterProps.prototype.update=function(t,e,r,n,a,s){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var o=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,o=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,o=!0),this.sc!==r&&(this.sc=r,this._mdf.sc=!0,o=!0),this.fc!==n&&(this.fc=n,this._mdf.fc=!0,o=!0),this.m!==a&&(this.m=a,this._mdf.m=!0,o=!0),s.length&&(this.p[0]!==s[0]||this.p[1]!==s[1]||this.p[4]!==s[4]||this.p[5]!==s[5]||this.p[12]!==s[12]||this.p[13]!==s[13])&&(this.p=s,this._mdf.p=!0,o=!0),o};function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=t.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!t)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,r=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var n,a=this.effectsSequence.length,s=t||this.data.d.k[this.keysIndex].s;for(n=0;n<a;n+=1)r!==this.keysIndex?s=this.effectsSequence[n](s,s.t):s=this.effectsSequence[n](this.currentData,s.t);e!==s&&this.setCurrentData(s),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,r=0,n=t.length;r<=n-1&&!(r===n-1||t[r+1].t>e);)r+=1;return this.keysIndex!==r&&(this.keysIndex=r),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e=[],r=0,n=t.length,a,s,o=!1,c=!1,d="";r<n;)o=c,c=!1,a=t.charCodeAt(r),d=t.charAt(r),FontManager.isCombinedCharacter(a)?o=!0:a>=55296&&a<=56319?FontManager.isRegionalFlag(t,r)?d=t.substr(r,14):(s=t.charCodeAt(r+1),s>=56320&&s<=57343&&(FontManager.isModifier(a,s)?(d=t.substr(r,2),o=!0):FontManager.isFlagEmoji(t.substr(r,4))?d=t.substr(r,4):d=t.substr(r,2))):a>56319?(s=t.charCodeAt(r+1),FontManager.isVariationSelector(a)&&(o=!0)):FontManager.isZeroWidthJoiner(a)&&(o=!0,c=!0),o?(e[e.length-1]+=d,o=!1):e.push(d),r+=d.length;return e},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e=this.elem.globalData.fontManager,r=this.data,n=[],a,s,o,c=0,d,m=r.m.g,y=0,A=0,P=0,Z=[],me=0,_e=0,Ge,ve,He=e.getFontByName(t.f),De,Xe=0,Bs=getFontProperties(He);t.fWeight=Bs.weight,t.fStyle=Bs.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),s=t.finalText.length,t.finalLineHeight=t.lh;var wt=t.tr/1e3*t.finalSize,li;if(t.sz)for(var An=!0,Os=t.sz[0],vh=t.sz[1],Fc,Hc;An;){Hc=this.buildFinalText(t.t),Fc=0,me=0,s=Hc.length,wt=t.tr/1e3*t.finalSize;var qc=-1;for(a=0;a<s;a+=1)li=Hc[a].charCodeAt(0),o=!1,Hc[a]===" "?qc=a:(li===13||li===3)&&(me=0,o=!0,Fc+=t.finalLineHeight||t.finalSize*1.2),e.chars?(De=e.getCharData(Hc[a],He.fStyle,He.fFamily),Xe=o?0:De.w*t.finalSize/100):Xe=e.measureText(Hc[a],t.f,t.finalSize),me+Xe>Os&&Hc[a]!==" "?(qc===-1?s+=1:a=qc,Fc+=t.finalLineHeight||t.finalSize*1.2,Hc.splice(a,qc===a?1:0,"\r"),qc=-1,me=0):(me+=Xe,me+=wt);Fc+=He.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&vh<Fc?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=Hc,s=t.finalText.length,An=!1)}me=-wt,Xe=0;var e1=0,df;for(a=0;a<s;a+=1)if(o=!1,df=t.finalText[a],li=df.charCodeAt(0),li===13||li===3?(e1=0,Z.push(me),_e=me>_e?me:_e,me=-2*wt,d="",o=!0,P+=1):d=df,e.chars?(De=e.getCharData(df,He.fStyle,e.getFontByName(t.f).fFamily),Xe=o?0:De.w*t.finalSize/100):Xe=e.measureText(d,t.f,t.finalSize),df===" "?e1+=Xe+wt:(me+=Xe+wt+e1,e1=0),n.push({l:Xe,an:Xe,add:y,n:o,anIndexes:[],val:d,line:P,animatorJustifyOffset:0}),m==2){if(y+=Xe,d===""||d===" "||a===s-1){for((d===""||d===" ")&&(y-=Xe);A<=a;)n[A].an=y,n[A].ind=c,n[A].extra=Xe,A+=1;c+=1,y=0}}else if(m==3){if(y+=Xe,d===""||a===s-1){for(d===""&&(y-=Xe);A<=a;)n[A].an=y,n[A].ind=c,n[A].extra=Xe,A+=1;y=0,c+=1}}else n[c].ind=c,n[c].extra=0,c+=1;if(t.l=n,_e=me>_e?me:_e,Z.push(me),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=_e,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=Z;var So=r.a,th,Rs;ve=So.length;var Ko,Vc,yh=[];for(Ge=0;Ge<ve;Ge+=1){for(th=So[Ge],th.a.sc&&(t.strokeColorAnim=!0),th.a.sw&&(t.strokeWidthAnim=!0),(th.a.fc||th.a.fh||th.a.fs||th.a.fb)&&(t.fillColorAnim=!0),Vc=0,Ko=th.s.b,a=0;a<s;a+=1)Rs=n[a],Rs.anIndexes[Ge]=Vc,(Ko==1&&Rs.val!==""||Ko==2&&Rs.val!==""&&Rs.val!==" "||Ko==3&&(Rs.n||Rs.val==" "||a==s-1)||Ko==4&&(Rs.n||a==s-1))&&(th.s.rn===1&&yh.push(Vc),Vc+=1);r.a[Ge].s.totalChars=Vc;var wh=-1,uf;if(th.s.rn===1)for(a=0;a<s;a+=1)Rs=n[a],wh!=Rs.anIndexes[Ge]&&(wh=Rs.anIndexes[Ge],uf=yh.splice(Math.floor(Math.random()*yh.length),1)[0]),Rs.anIndexes[Ge]=uf}t.yOffset=t.finalLineHeight||t.finalSize*1.2,t.ls=t.ls||0,t.ascent=He.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=e===void 0?this.keysIndex:e;var r=this.copyData({},this.data.d.k[e].s);r=this.copyData(r,t),this.data.d.k[e].s=r,this.recalculate(e),this.setCurrentData(r),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,r=Math.floor;function n(s,o){this._currentTextLength=-1,this.k=!1,this.data=o,this.elem=s,this.comp=s.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(s),this.s=PropertyFactory.getProp(s,o.s||{k:0},0,0,this),"e"in o?this.e=PropertyFactory.getProp(s,o.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(s,o.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(s,o.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(s,o.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(s,o.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(s,o.a,0,.01,this),this.dynamicProperties.length||this.getValue()}n.prototype={getMult:function(o){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var c=0,d=0,m=1,y=1;this.ne.v>0?c=this.ne.v/100:d=-this.ne.v/100,this.xe.v>0?m=1-this.xe.v/100:y=1+this.xe.v/100;var A=BezierFactory.getBezierEasing(c,d,m,y).get,P=0,Z=this.finalS,me=this.finalE,_e=this.data.sh;if(_e===2)me===Z?P=o>=me?1:0:P=t(0,e(.5/(me-Z)+(o-Z)/(me-Z),1)),P=A(P);else if(_e===3)me===Z?P=o>=me?0:1:P=1-t(0,e(.5/(me-Z)+(o-Z)/(me-Z),1)),P=A(P);else if(_e===4)me===Z?P=0:(P=t(0,e(.5/(me-Z)+(o-Z)/(me-Z),1)),P<.5?P*=2:P=1-2*(P-.5)),P=A(P);else if(_e===5){if(me===Z)P=0;else{var Ge=me-Z;o=e(t(0,o+.5-Z),me-Z);var ve=-Ge/2+o,He=Ge/2;P=Math.sqrt(1-ve*ve/(He*He))}P=A(P)}else _e===6?(me===Z?P=0:(o=e(t(0,o+.5-Z),me-Z),P=(1+Math.cos(Math.PI+Math.PI*2*o/(me-Z)))/2),P=A(P)):(o>=r(Z)&&(o-Z<0?P=t(0,e(e(me,1)-(Z-o),1)):P=t(0,e(me-o,1))),P=A(P));if(this.sm.v!==100){var De=this.sm.v*.01;De===0&&(De=1e-8);var Xe=.5-De*.5;P<Xe?P=0:(P=(P-Xe)/De,P>1&&(P=1))}return P*this.a.v},getValue:function(o){this.iterateDynamicProperties(),this._mdf=o||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,o&&this.data.r===2&&(this.e.v=this._currentTextLength);var c=this.data.r===2?1:100/this.data.totalChars,d=this.o.v/c,m=this.s.v/c+d,y=this.e.v/c+d;if(m>y){var A=m;m=y,y=A}this.finalS=m,this.finalE=y}},extendPrototype([DynamicPropertyContainer],n);function a(s,o,c){return new n(s,o)}return{getTextSelectorProp:a}}();function TextAnimatorDataProperty(t,e,r){var n={propType:!1},a=PropertyFactory.getProp,s=e.a;this.a={r:s.r?a(t,s.r,0,degToRads,r):n,rx:s.rx?a(t,s.rx,0,degToRads,r):n,ry:s.ry?a(t,s.ry,0,degToRads,r):n,sk:s.sk?a(t,s.sk,0,degToRads,r):n,sa:s.sa?a(t,s.sa,0,degToRads,r):n,s:s.s?a(t,s.s,1,.01,r):n,a:s.a?a(t,s.a,1,0,r):n,o:s.o?a(t,s.o,0,.01,r):n,p:s.p?a(t,s.p,1,0,r):n,sw:s.sw?a(t,s.sw,0,0,r):n,sc:s.sc?a(t,s.sc,1,0,r):n,fc:s.fc?a(t,s.fc,1,0,r):n,fh:s.fh?a(t,s.fh,0,0,r):n,fs:s.fs?a(t,s.fs,0,.01,r):n,fb:s.fb?a(t,s.fb,0,.01,r):n,t:s.t?a(t,s.t,0,0,r):n},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,r),this.s.t=e.s.t}function TextAnimatorProperty(t,e,r){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=r,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(r)}TextAnimatorProperty.prototype.searchProperties=function(){var t,e=this._textData.a.length,r,n=PropertyFactory.getProp;for(t=0;t<e;t+=1)r=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,r,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:n(this._elem,this._textData.p.a,0,0,this),f:n(this._elem,this._textData.p.f,0,0,this),l:n(this._elem,this._textData.p.l,0,0,this),r:n(this._elem,this._textData.p.r,0,0,this),p:n(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=n(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,!(!this._mdf&&!this._isFirstFrame&&!e&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var r=this._moreOptions.alignment.v,n=this._animatorsData,a=this._textData,s=this.mHelper,o=this._renderType,c=this.renderedLetters.length,d,m,y,A,P=t.l,Z,me,_e,Ge,ve,He,De,Xe,Bs,wt,li,An,Os,vh,Fc;if(this._hasMaskedPath){if(Fc=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Hc=Fc.v;this._pathData.r.v&&(Hc=Hc.reverse()),Z={tLength:0,segments:[]},A=Hc._length-1;var qc;for(An=0,y=0;y<A;y+=1)qc=bez.buildBezierData(Hc.v[y],Hc.v[y+1],[Hc.o[y][0]-Hc.v[y][0],Hc.o[y][1]-Hc.v[y][1]],[Hc.i[y+1][0]-Hc.v[y+1][0],Hc.i[y+1][1]-Hc.v[y+1][1]]),Z.tLength+=qc.segmentLength,Z.segments.push(qc),An+=qc.segmentLength;y=A,Fc.v.c&&(qc=bez.buildBezierData(Hc.v[y],Hc.v[0],[Hc.o[y][0]-Hc.v[y][0],Hc.o[y][1]-Hc.v[y][1]],[Hc.i[0][0]-Hc.v[0][0],Hc.i[0][1]-Hc.v[0][1]]),Z.tLength+=qc.segmentLength,Z.segments.push(qc),An+=qc.segmentLength),this._pathData.pi=Z}if(Z=this._pathData.pi,me=this._pathData.f.v,De=0,He=1,Ge=0,ve=!0,wt=Z.segments,me<0&&Fc.v.c)for(Z.tLength<Math.abs(me)&&(me=-Math.abs(me)%Z.tLength),De=wt.length-1,Bs=wt[De].points,He=Bs.length-1;me<0;)me+=Bs[He].partialLength,He-=1,He<0&&(De-=1,Bs=wt[De].points,He=Bs.length-1);Bs=wt[De].points,Xe=Bs[He-1],_e=Bs[He],li=_e.partialLength}A=P.length,d=0,m=0;var e1=t.finalSize*1.2*.714,df=!0,So,th,Rs,Ko,Vc;Ko=n.length;var yh,wh=-1,uf,i1,u1,h1=me,T1=De,p1=He,j1=-1,C1,k1,X1,D1,m1,xy,Py,Q1,gy="",my=this.defaultPropsArray,Iy;if(t.j===2||t.j===1){var uy=0,Sy=0,yy=t.j===2?-.5:-1,Ey=0,Oy=!0;for(y=0;y<A;y+=1)if(P[y].n){for(uy&&(uy+=Sy);Ey<y;)P[Ey].animatorJustifyOffset=uy,Ey+=1;uy=0,Oy=!0}else{for(Rs=0;Rs<Ko;Rs+=1)So=n[Rs].a,So.t.propType&&(Oy&&t.j===2&&(Sy+=So.t.v*yy),th=n[Rs].s,yh=th.getMult(P[y].anIndexes[Rs],a.a[Rs].s.totalChars),yh.length?uy+=So.t.v*yh[0]*yy:uy+=So.t.v*yh*yy);Oy=!1}for(uy&&(uy+=Sy);Ey<y;)P[Ey].animatorJustifyOffset=uy,Ey+=1}for(y=0;y<A;y+=1){if(s.reset(),C1=1,P[y].n)d=0,m+=t.yOffset,m+=df?1:0,me=h1,df=!1,this._hasMaskedPath&&(De=T1,He=p1,Bs=wt[De].points,Xe=Bs[He-1],_e=Bs[He],li=_e.partialLength,Ge=0),gy="",Q1="",xy="",Iy="",my=this.defaultPropsArray;else{if(this._hasMaskedPath){if(j1!==P[y].line){switch(t.j){case 1:me+=An-t.lineWidths[P[y].line];break;case 2:me+=(An-t.lineWidths[P[y].line])/2;break}j1=P[y].line}wh!==P[y].ind&&(P[wh]&&(me+=P[wh].extra),me+=P[y].an/2,wh=P[y].ind),me+=r[0]*P[y].an*.005;var L1=0;for(Rs=0;Rs<Ko;Rs+=1)So=n[Rs].a,So.p.propType&&(th=n[Rs].s,yh=th.getMult(P[y].anIndexes[Rs],a.a[Rs].s.totalChars),yh.length?L1+=So.p.v[0]*yh[0]:L1+=So.p.v[0]*yh),So.a.propType&&(th=n[Rs].s,yh=th.getMult(P[y].anIndexes[Rs],a.a[Rs].s.totalChars),yh.length?L1+=So.a.v[0]*yh[0]:L1+=So.a.v[0]*yh);for(ve=!0,this._pathData.a.v&&(me=P[0].an*.5+(An-this._pathData.f.v-P[0].an*.5-P[P.length-1].an*.5)*wh/(A-1),me+=this._pathData.f.v);ve;)Ge+li>=me+L1||!Bs?(Os=(me+L1-Ge)/_e.partialLength,i1=Xe.point[0]+(_e.point[0]-Xe.point[0])*Os,u1=Xe.point[1]+(_e.point[1]-Xe.point[1])*Os,s.translate(-r[0]*P[y].an*.005,-(r[1]*e1)*.01),ve=!1):Bs&&(Ge+=_e.partialLength,He+=1,He>=Bs.length&&(He=0,De+=1,wt[De]?Bs=wt[De].points:Fc.v.c?(He=0,De=0,Bs=wt[De].points):(Ge-=_e.partialLength,Bs=null)),Bs&&(Xe=_e,_e=Bs[He],li=_e.partialLength));uf=P[y].an/2-P[y].add,s.translate(-uf,0,0)}else uf=P[y].an/2-P[y].add,s.translate(-uf,0,0),s.translate(-r[0]*P[y].an*.005,-r[1]*e1*.01,0);for(Rs=0;Rs<Ko;Rs+=1)So=n[Rs].a,So.t.propType&&(th=n[Rs].s,yh=th.getMult(P[y].anIndexes[Rs],a.a[Rs].s.totalChars),(d!==0||t.j!==0)&&(this._hasMaskedPath?yh.length?me+=So.t.v*yh[0]:me+=So.t.v*yh:yh.length?d+=So.t.v*yh[0]:d+=So.t.v*yh));for(t.strokeWidthAnim&&(X1=t.sw||0),t.strokeColorAnim&&(t.sc?k1=[t.sc[0],t.sc[1],t.sc[2]]:k1=[0,0,0]),t.fillColorAnim&&t.fc&&(D1=[t.fc[0],t.fc[1],t.fc[2]]),Rs=0;Rs<Ko;Rs+=1)So=n[Rs].a,So.a.propType&&(th=n[Rs].s,yh=th.getMult(P[y].anIndexes[Rs],a.a[Rs].s.totalChars),yh.length?s.translate(-So.a.v[0]*yh[0],-So.a.v[1]*yh[1],So.a.v[2]*yh[2]):s.translate(-So.a.v[0]*yh,-So.a.v[1]*yh,So.a.v[2]*yh));for(Rs=0;Rs<Ko;Rs+=1)So=n[Rs].a,So.s.propType&&(th=n[Rs].s,yh=th.getMult(P[y].anIndexes[Rs],a.a[Rs].s.totalChars),yh.length?s.scale(1+(So.s.v[0]-1)*yh[0],1+(So.s.v[1]-1)*yh[1],1):s.scale(1+(So.s.v[0]-1)*yh,1+(So.s.v[1]-1)*yh,1));for(Rs=0;Rs<Ko;Rs+=1){if(So=n[Rs].a,th=n[Rs].s,yh=th.getMult(P[y].anIndexes[Rs],a.a[Rs].s.totalChars),So.sk.propType&&(yh.length?s.skewFromAxis(-So.sk.v*yh[0],So.sa.v*yh[1]):s.skewFromAxis(-So.sk.v*yh,So.sa.v*yh)),So.r.propType&&(yh.length?s.rotateZ(-So.r.v*yh[2]):s.rotateZ(-So.r.v*yh)),So.ry.propType&&(yh.length?s.rotateY(So.ry.v*yh[1]):s.rotateY(So.ry.v*yh)),So.rx.propType&&(yh.length?s.rotateX(So.rx.v*yh[0]):s.rotateX(So.rx.v*yh)),So.o.propType&&(yh.length?C1+=(So.o.v*yh[0]-C1)*yh[0]:C1+=(So.o.v*yh-C1)*yh),t.strokeWidthAnim&&So.sw.propType&&(yh.length?X1+=So.sw.v*yh[0]:X1+=So.sw.v*yh),t.strokeColorAnim&&So.sc.propType)for(m1=0;m1<3;m1+=1)yh.length?k1[m1]+=(So.sc.v[m1]-k1[m1])*yh[0]:k1[m1]+=(So.sc.v[m1]-k1[m1])*yh;if(t.fillColorAnim&&t.fc){if(So.fc.propType)for(m1=0;m1<3;m1+=1)yh.length?D1[m1]+=(So.fc.v[m1]-D1[m1])*yh[0]:D1[m1]+=(So.fc.v[m1]-D1[m1])*yh;So.fh.propType&&(yh.length?D1=addHueToRGB(D1,So.fh.v*yh[0]):D1=addHueToRGB(D1,So.fh.v*yh)),So.fs.propType&&(yh.length?D1=addSaturationToRGB(D1,So.fs.v*yh[0]):D1=addSaturationToRGB(D1,So.fs.v*yh)),So.fb.propType&&(yh.length?D1=addBrightnessToRGB(D1,So.fb.v*yh[0]):D1=addBrightnessToRGB(D1,So.fb.v*yh))}}for(Rs=0;Rs<Ko;Rs+=1)So=n[Rs].a,So.p.propType&&(th=n[Rs].s,yh=th.getMult(P[y].anIndexes[Rs],a.a[Rs].s.totalChars),this._hasMaskedPath?yh.length?s.translate(0,So.p.v[1]*yh[0],-So.p.v[2]*yh[1]):s.translate(0,So.p.v[1]*yh,-So.p.v[2]*yh):yh.length?s.translate(So.p.v[0]*yh[0],So.p.v[1]*yh[1],-So.p.v[2]*yh[2]):s.translate(So.p.v[0]*yh,So.p.v[1]*yh,-So.p.v[2]*yh));if(t.strokeWidthAnim&&(xy=X1<0?0:X1),t.strokeColorAnim&&(Py="rgb("+Math.round(k1[0]*255)+","+Math.round(k1[1]*255)+","+Math.round(k1[2]*255)+")"),t.fillColorAnim&&t.fc&&(Q1="rgb("+Math.round(D1[0]*255)+","+Math.round(D1[1]*255)+","+Math.round(D1[2]*255)+")"),this._hasMaskedPath){if(s.translate(0,-t.ls),s.translate(0,r[1]*e1*.01+m,0),this._pathData.p.v){vh=(_e.point[1]-Xe.point[1])/(_e.point[0]-Xe.point[0]);var R1=Math.atan(vh)*180/Math.PI;_e.point[0]<Xe.point[0]&&(R1+=180),s.rotate(-R1*Math.PI/180)}s.translate(i1,u1,0),me-=r[0]*P[y].an*.005,P[y+1]&&wh!==P[y+1].ind&&(me+=P[y].an/2,me+=t.tr*.001*t.finalSize)}else{switch(s.translate(d,m,0),t.ps&&s.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:s.translate(P[y].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[P[y].line]),0,0);break;case 2:s.translate(P[y].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[P[y].line])/2,0,0);break}s.translate(0,-t.ls),s.translate(uf,0,0),s.translate(r[0]*P[y].an*.005,r[1]*e1*.01,0),d+=P[y].l+t.tr*.001*t.finalSize}o==="html"?gy=s.toCSS():o==="svg"?gy=s.to2dCSS():my=[s.props[0],s.props[1],s.props[2],s.props[3],s.props[4],s.props[5],s.props[6],s.props[7],s.props[8],s.props[9],s.props[10],s.props[11],s.props[12],s.props[13],s.props[14],s.props[15]],Iy=C1}c<=y?(Vc=new LetterProps(Iy,xy,Py,Q1,gy,my),this.renderedLetters.push(Vc),c+=1,this.lettersChangedFlag=!0):(Vc=this.renderedLetters[y],this.lettersChangedFlag=Vc.update(Iy,xy,Py,Q1,gy,my)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(t,e,r){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,r),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)},ITextElement.prototype.createPathShape=function(t,e){var r,n=e.length,a,s="";for(r=0;r<n;r+=1)e[r].ty==="sh"&&(a=e[r].ks.k,s+=buildShapeString(a,a.i.length,!0,t));return s},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,r,n,a){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r])/2,0,0);break}e.translate(n,a,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(t[0]*255)+","+Math.round(t[1]*255)+","+Math.round(t[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(t,e,r){this.textSpans=[],this.renderType="svg",this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,r=t.length,n=[],a="";e<r;)t[e]==="\r"||t[e]===""?(n.push(a),a=""):a+=t[e],e+=1;return n.push(a),n},SVGTextLottieElement.prototype.buildShapeData=function(t,e){if(t.shapes&&t.shapes.length){var r=t.shapes[0];if(r.it){var n=r.it[r.it.length-1];n.s&&(n.s.k[0]=e,n.s.k[1]=e)}}return t},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var t,e,r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r?r.l.length:0),r.fc?this.layerElement.setAttribute("fill",this.buildColor(r.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),r.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(r.sc)),this.layerElement.setAttribute("stroke-width",r.sw)),this.layerElement.setAttribute("font-size",r.finalSize);var n=this.globalData.fontManager.getFontByName(r.f);if(n.fClass)this.layerElement.setAttribute("class",n.fClass);else{this.layerElement.setAttribute("font-family",n.fFamily);var a=r.fWeight,s=r.fStyle;this.layerElement.setAttribute("font-style",s),this.layerElement.setAttribute("font-weight",a)}this.layerElement.setAttribute("aria-label",r.t);var o=r.l||[],c=!!this.globalData.fontManager.chars;e=o.length;var d,m=this.mHelper,y="",A=this.data.singleShape,P=0,Z=0,me=!0,_e=r.tr*.001*r.finalSize;if(A&&!c&&!r.sz){var Ge=this.textContainer,ve="start";switch(r.j){case 1:ve="end";break;case 2:ve="middle";break;default:ve="start";break}Ge.setAttribute("text-anchor",ve),Ge.setAttribute("letter-spacing",_e);var He=this.buildTextContents(r.finalText);for(e=He.length,Z=r.ps?r.ps[1]+r.ascent:0,t=0;t<e;t+=1)d=this.textSpans[t].span||createNS("tspan"),d.textContent=He[t],d.setAttribute("x",0),d.setAttribute("y",Z),d.style.display="inherit",Ge.appendChild(d),this.textSpans[t]||(this.textSpans[t]={span:null,glyph:null}),this.textSpans[t].span=d,Z+=r.finalLineHeight;this.layerElement.appendChild(Ge)}else{var De=this.textSpans.length,Xe;for(t=0;t<e;t+=1){if(this.textSpans[t]||(this.textSpans[t]={span:null,childSpan:null,glyph:null}),!c||!A||t===0){if(d=De>t?this.textSpans[t].span:createNS(c?"g":"text"),De<=t){if(d.setAttribute("stroke-linecap","butt"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit","4"),this.textSpans[t].span=d,c){var Bs=createNS("g");d.appendChild(Bs),this.textSpans[t].childSpan=Bs}this.textSpans[t].span=d,this.layerElement.appendChild(d)}d.style.display="inherit"}if(m.reset(),A&&(o[t].n&&(P=-_e,Z+=r.yOffset,Z+=me?1:0,me=!1),this.applyTextPropertiesToMatrix(r,m,o[t].line,P,Z),P+=o[t].l||0,P+=_e),c){Xe=this.globalData.fontManager.getCharData(r.finalText[t],n.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily);var wt;if(Xe.t===1)wt=new SVGCompElement(Xe.data,this.globalData,this);else{var li=emptyShapeData;Xe.data&&Xe.data.shapes&&(li=this.buildShapeData(Xe.data,r.finalSize)),wt=new SVGShapeElement(li,this.globalData,this)}if(this.textSpans[t].glyph){var An=this.textSpans[t].glyph;this.textSpans[t].childSpan.removeChild(An.layerElement),An.destroy()}this.textSpans[t].glyph=wt,wt._debug=!0,wt.prepareFrame(0),wt.renderFrame(),this.textSpans[t].childSpan.appendChild(wt.layerElement),Xe.t===1&&this.textSpans[t].childSpan.setAttribute("transform","scale("+r.finalSize/100+","+r.finalSize/100+")")}else A&&d.setAttribute("transform","translate("+m.props[12]+","+m.props[13]+")"),d.textContent=o[t].val,d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}A&&d&&d.setAttribute("d",y)}for(;t<this.textSpans.length;)this.textSpans[t].span.style.display="none",t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var t,e=this.textSpans.length,r;for(this.renderedFrame=this.comp.renderedFrame,t=0;t<e;t+=1)r=this.textSpans[t].glyph,r&&(r.prepareFrame(this.comp.renderedFrame-this.data.st),r._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var t,e,r=this.textAnimator.renderedLetters,n=this.textProperty.currentData.l;e=n.length;var a,s,o;for(t=0;t<e;t+=1)n[t].n||(a=r[t],s=this.textSpans[t].span,o=this.textSpans[t].glyph,o&&o.renderFrame(),a._mdf.m&&s.setAttribute("transform",a.m),a._mdf.o&&s.setAttribute("opacity",a.o),a._mdf.sw&&s.setAttribute("stroke-width",a.sw),a._mdf.sc&&s.setAttribute("stroke",a.sc),a._mdf.fc&&s.setAttribute("fill",a.fc))}};function ISolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)};function NullElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initFrame(),this.initTransform(t,e,r),this.initHierarchy()}NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRendererBase.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRendererBase.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRendererBase.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var r=createNS("clipPath"),n=createNS("rect");n.setAttribute("width",t.w),n.setAttribute("height",t.h),n.setAttribute("x",0),n.setAttribute("y",0);var a=createElementID();r.setAttribute("id",a),r.appendChild(n),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),e.appendChild(r),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(t){var e=0,r=this.layers.length;for(e=0;e<r;e+=1)if(this.layers[e].ind===t)return e;return-1},SVGRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty===99)){e[t]=!0;var r=this.createItem(this.layers[t]);if(e[t]=r,getExpressionsPlugin()&&(this.layers[t].ty===0&&this.globalData.projectInterface.registerComposition(r),r.initExpressions()),this.appendElementInPos(r,t),this.layers[t].tt){var n="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(n===-1)return;if(!this.elements[n]||this.elements[n]===!0)this.buildItem(n),this.addPendingElement(r);else{var a=e[n],s=a.getMatte(this.layers[t].tt);r.setMatte(s)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,r=this.elements.length;e<r;){if(this.elements[e]===t){var n="tp"in t.data?this.findIndexByInd(t.data.tp):e-1,a=this.elements[n],s=a.getMatte(this.layers[e].tt);t.setMatte(s);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(t){if(!(this.renderedFrame===t||this.destroyed)){t===null?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var e,r=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=r-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<r;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(r){for(var n=0,a;n<e;)this.elements[n]&&this.elements[n]!==!0&&this.elements[n].getBaseElement()&&(a=this.elements[n].getBaseElement()),n+=1;a?this.layerElement.insertBefore(r,a):this.layerElement.appendChild(r)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initTransform(t,e,r),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!e.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var r,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&(this.elements[r].prepareFrame(this.renderedFrame-this.layers[r].st),this.elements[r]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(t,e,r){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)};function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var r="";if(e&&e.title){var n=createNS("title"),a=createElementID();n.setAttribute("id",a),n.textContent=e.title,this.svgElement.appendChild(n),r+=a}if(e&&e.description){var s=createNS("desc"),o=createElementID();s.setAttribute("id",o),s.textContent=e.description,this.svgElement.appendChild(s),r+=" "+o}r&&this.svgElement.setAttribute("aria-labelledby",r);var c=createNS("defs");this.svgElement.appendChild(c);var d=createNS("g");this.svgElement.appendChild(d),this.layerElement=d,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&e.hideOnTransparent===!1),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:c,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(e){var r,n=e.length,a="_";for(r=0;r<n;r+=1)a+=e[r].transform.key+"_";var s=this.sequences[a];return s||(s={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[a]=s,this.sequenceList.push(s)),s},processSequence:function(e,r){for(var n=0,a=e.transforms.length,s=r;n<a&&!r;){if(e.transforms[n].transform.mProps._mdf){s=!0;break}n+=1}if(s)for(e.finalTransform.reset(),n=a-1;n>=0;n-=1)e.finalTransform.multiply(e.transforms[n].transform.mProps.v);e._mdf=s},processSequences:function(e){var r,n=this.sequenceList.length;for(r=0;r<n;r+=1)this.processSequence(this.sequenceList[r],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",r=null,n=null,a=null;function s(){var d=createNS("svg"),m=createNS("filter"),y=createNS("feColorMatrix");return m.setAttribute("id",e),y.setAttribute("type","matrix"),y.setAttribute("color-interpolation-filters","sRGB"),y.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),m.appendChild(y),d.appendChild(m),d.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(d.style.display="none"),d}function o(){r||(a=s(),document.body.appendChild(a),r=createTag("canvas"),n=r.getContext("2d"),n.filter="url(#"+e+")",n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1))}function c(d){return r||o(),r.width=d.width,r.height=d.height,n.filter="url(#"+e+")",r}return{load:o,get:c}};function createCanvas(t,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(t,e);var r=createTag("canvas");return r.width=t,r.height=e,r}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(t){var e,r=t.data.ef?t.data.ef.length:0;this.filters=[];var n;for(e=0;e<r;e+=1){n=null;var a=t.data.ef[e].ty;if(registeredEffects[a]){var s=registeredEffects[a].effect;n=new s(t.effectsManager.effectElements[e],t)}n&&this.filters.push(n)}this.filters.length&&t.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(t){var e,r=this.filters.length;for(e=0;e<r;e+=1)this.filters[e].renderFrame(t)},CVEffects.prototype.getEffects=function(t){var e,r=this.filters.length,n=[];for(e=0;e<r;e+=1)this.filters[e].type===t&&n.push(this.filters[e]);return n};function registerEffect(t,e){registeredEffects[t]={effect:e}}function CVMaskElement(t,e){this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r,n=this.masksProperties.length,a=!1;for(r=0;r<n;r+=1)this.masksProperties[r].mode!=="n"&&(a=!0),this.viewData[r]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[r],3);this.hasMasks=a,a&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t=this.element.finalTransform.mat,e=this.element.canvasContext,r,n=this.masksProperties.length,a,s,o;for(e.beginPath(),r=0;r<n;r+=1)if(this.masksProperties[r].mode!=="n"){this.masksProperties[r].inv&&(e.moveTo(0,0),e.lineTo(this.element.globalData.compSize.w,0),e.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),e.lineTo(0,this.element.globalData.compSize.h),e.lineTo(0,0)),o=this.viewData[r].v,a=t.applyToPointArray(o.v[0][0],o.v[0][1],0),e.moveTo(a[0],a[1]);var c,d=o._length;for(c=1;c<d;c+=1)s=t.applyToTriplePoints(o.o[c-1],o.i[c],o.v[c]),e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);s=t.applyToTriplePoints(o.o[c-1],o.i[0],o.v[0]),e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}this.element.globalData.renderer.save(!0),e.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,r=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(r);var n=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(n),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var r=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=r}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0],r=e.getContext("2d");this.clearCanvas(r),r.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],r=e.getContext("2d");this.clearCanvas(r),r.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var n=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(n.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var a=assetLoader.getLumaCanvas(this.canvasContext.canvas),s=a.getContext("2d");s.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(a,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var r=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(r),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(r),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(t,e,r,n){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var a=4;e.ty==="rc"?a=5:e.ty==="el"?a=6:e.ty==="sr"&&(a=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,a,t);var s,o=r.length,c;for(s=0;s<o;s+=1)r[s].closed||(c={transforms:n.addTransformSequence(r[s].transforms),trNodes:[]},this.styledShapes.push(c),r[s].elements.push(c))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var r={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:t.hd===!0},n={};if(t.ty==="fl"||t.ty==="st"?(n.c=PropertyFactory.getProp(this,t.c,1,255,this),n.c.k||(r.co="rgb("+bmFloor(n.c.v[0])+","+bmFloor(n.c.v[1])+","+bmFloor(n.c.v[2])+")")):(t.ty==="gf"||t.ty==="gs")&&(n.s=PropertyFactory.getProp(this,t.s,1,null,this),n.e=PropertyFactory.getProp(this,t.e,1,null,this),n.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),n.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),n.g=new GradientProperty(this,t.g,this)),n.o=PropertyFactory.getProp(this,t.o,0,.01,this),t.ty==="st"||t.ty==="gs"){if(r.lc=lineCapEnum[t.lc||2],r.lj=lineJoinEnum[t.lj||2],t.lj==1&&(r.ml=t.ml),n.w=PropertyFactory.getProp(this,t.w,0,null,this),n.w.k||(r.wi=n.w.v),t.d){var a=new DashProperty(this,t.d,"canvas",this);n.d=a,n.d.k||(r.da=n.d.dashArray,r.do=n.d.dashoffset[0])}}else r.r=t.r===2?"evenodd":"nonzero";return this.stylesList.push(r),n.style=r,n},CVShapeElement.prototype.createGroupElement=function(){var t={it:[],prevViewData:[]};return t},CVShapeElement.prototype.createTransformElement=function(t){var e={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}};return e},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,r=this.stylesList.length;for(e=0;e<r;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,r,n,a){var s,o=t.length-1,c,d,m=[],y=[],A,P,Z,me=[].concat(a);for(s=o;s>=0;s-=1){if(A=this.searchProcessedElement(t[s]),A?e[s]=r[A-1]:t[s]._shouldRender=n,t[s].ty==="fl"||t[s].ty==="st"||t[s].ty==="gf"||t[s].ty==="gs")A?e[s].style.closed=!1:e[s]=this.createStyleElement(t[s],me),m.push(e[s].style);else if(t[s].ty==="gr"){if(!A)e[s]=this.createGroupElement(t[s]);else for(d=e[s].it.length,c=0;c<d;c+=1)e[s].prevViewData[c]=e[s].it[c];this.searchShapes(t[s].it,e[s].it,e[s].prevViewData,n,me)}else t[s].ty==="tr"?(A||(Z=this.createTransformElement(t[s]),e[s]=Z),me.push(e[s]),this.addTransformToStyleList(e[s])):t[s].ty==="sh"||t[s].ty==="rc"||t[s].ty==="el"||t[s].ty==="sr"?A||(e[s]=this.createShapeElement(t[s])):t[s].ty==="tm"||t[s].ty==="rd"||t[s].ty==="pb"||t[s].ty==="zz"||t[s].ty==="op"?(A?(P=e[s],P.closed=!1):(P=ShapeModifiers.getModifier(t[s].ty),P.init(this,t[s]),e[s]=P,this.shapeModifiers.push(P)),y.push(P)):t[s].ty==="rp"&&(A?(P=e[s],P.closed=!0):(P=ShapeModifiers.getModifier(t[s].ty),e[s]=P,P.init(this,t,s,e),this.shapeModifiers.push(P),n=!1),y.push(P));this.addProcessedElement(t[s],s+1)}for(this.removeTransformFromStyleList(),this.closeStyles(m),o=y.length,s=0;s<o;s+=1)y[s].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e=this.stylesList.length,r,n,a,s,o,c,d=this.globalData.renderer,m=this.globalData.canvasContext,y,A;for(t=0;t<e;t+=1)if(A=this.stylesList[t],y=A.type,!((y==="st"||y==="gs")&&A.wi===0||!A.data._shouldRender||A.coOp===0||this.globalData.currentGlobalAlpha===0)){for(d.save(),o=A.elements,y==="st"||y==="gs"?(d.ctxStrokeStyle(y==="st"?A.co:A.grd),d.ctxLineWidth(A.wi),d.ctxLineCap(A.lc),d.ctxLineJoin(A.lj),d.ctxMiterLimit(A.ml||0)):d.ctxFillStyle(y==="fl"?A.co:A.grd),d.ctxOpacity(A.coOp),y!=="st"&&y!=="gs"&&m.beginPath(),d.ctxTransform(A.preTransforms.finalTransform.props),n=o.length,r=0;r<n;r+=1){for((y==="st"||y==="gs")&&(m.beginPath(),A.da&&(m.setLineDash(A.da),m.lineDashOffset=A.do)),c=o[r].trNodes,s=c.length,a=0;a<s;a+=1)c[a].t==="m"?m.moveTo(c[a].p[0],c[a].p[1]):c[a].t==="c"?m.bezierCurveTo(c[a].pts[0],c[a].pts[1],c[a].pts[2],c[a].pts[3],c[a].pts[4],c[a].pts[5]):m.closePath();(y==="st"||y==="gs")&&(d.ctxStroke(),A.da&&m.setLineDash(this.dashResetter))}y!=="st"&&y!=="gs"&&this.globalData.renderer.ctxFill(A.r),d.restore()}},CVShapeElement.prototype.renderShape=function(t,e,r,n){var a,s=e.length-1,o;for(o=t,a=s;a>=0;a-=1)e[a].ty==="tr"?(o=r[a].transform,this.renderShapeTransform(t,o)):e[a].ty==="sh"||e[a].ty==="el"||e[a].ty==="rc"||e[a].ty==="sr"?this.renderPath(e[a],r[a]):e[a].ty==="fl"?this.renderFill(e[a],r[a],o):e[a].ty==="st"?this.renderStroke(e[a],r[a],o):e[a].ty==="gf"||e[a].ty==="gs"?this.renderGradientFill(e[a],r[a],o):e[a].ty==="gr"?this.renderShape(o,e[a].it,r[a].it):e[a].ty;n&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var r=t.trNodes,n=e.paths,a,s,o,c=n._length;r.length=0;var d=t.transforms.finalTransform;for(o=0;o<c;o+=1){var m=n.shapes[o];if(m&&m.v){for(s=m._length,a=1;a<s;a+=1)a===1&&r.push({t:"m",p:d.applyToPointArray(m.v[0][0],m.v[0][1],0)}),r.push({t:"c",pts:d.applyToTriplePoints(m.o[a-1],m.i[a],m.v[a])});s===1&&r.push({t:"m",p:d.applyToPointArray(m.v[0][0],m.v[0][1],0)}),m.c&&s&&(r.push({t:"c",pts:d.applyToTriplePoints(m.o[a-1],m.i[0],m.v[0])}),r.push({t:"z"}))}}t.trNodes=r}},CVShapeElement.prototype.renderPath=function(t,e){if(t.hd!==!0&&t._shouldRender){var r,n=e.styledShapes.length;for(r=0;r<n;r+=1)this.renderStyledShape(e.styledShapes[r],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,r){var n=e.style;(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*r.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,r){var n=e.style,a;if(!n.grd||e.g._mdf||e.s._mdf||e.e._mdf||t.t!==1&&(e.h._mdf||e.a._mdf)){var s=this.globalData.canvasContext,o=e.s.v,c=e.e.v;if(t.t===1)a=s.createLinearGradient(o[0],o[1],c[0],c[1]);else{var d=Math.sqrt(Math.pow(o[0]-c[0],2)+Math.pow(o[1]-c[1],2)),m=Math.atan2(c[1]-o[1],c[0]-o[0]),y=e.h.v;y>=1?y=.99:y<=-1&&(y=-.99);var A=d*y,P=Math.cos(m+e.a.v)*A+o[0],Z=Math.sin(m+e.a.v)*A+o[1];a=s.createRadialGradient(P,Z,0,o[0],o[1],d)}var me,_e=t.g.p,Ge=e.g.c,ve=1;for(me=0;me<_e;me+=1)e.g._hasOpacity&&e.g._collapsable&&(ve=e.g.o[me*2+1]),a.addColorStop(Ge[me*4]/100,"rgba("+Ge[me*4+1]+","+Ge[me*4+2]+","+Ge[me*4+3]+","+ve+")");n.grd=a}n.coOp=e.o.v*r.opacity},CVShapeElement.prototype.renderStroke=function(t,e,r){var n=e.style,a=e.d;a&&(a._mdf||this._isFirstFrame)&&(n.da=a.dashArray,n.do=a.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*r.opacity),(e.w._mdf||this._isFirstFrame)&&(n.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(t,e,r){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var r=!1;t.sc&&(r=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var n=this.globalData.fontManager.getFontByName(t.f),a,s,o=t.l,c=this.mHelper;this.stroke=r,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,s=t.finalText.length;var d,m,y,A,P,Z,me,_e,Ge,ve,He=this.data.singleShape,De=t.tr*.001*t.finalSize,Xe=0,Bs=0,wt=!0,li=0;for(a=0;a<s;a+=1){d=this.globalData.fontManager.getCharData(t.finalText[a],n.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),m=d&&d.data||{},c.reset(),He&&o[a].n&&(Xe=-De,Bs+=t.yOffset,Bs+=wt?1:0,wt=!1),P=m.shapes?m.shapes[0].it:[],me=P.length,c.scale(t.finalSize/100,t.finalSize/100),He&&this.applyTextPropertiesToMatrix(t,c,o[a].line,Xe,Bs),Ge=createSizedArray(me-1);var An=0;for(Z=0;Z<me;Z+=1)if(P[Z].ty==="sh"){for(A=P[Z].ks.k.i.length,_e=P[Z].ks.k,ve=[],y=1;y<A;y+=1)y===1&&ve.push(c.applyToX(_e.v[0][0],_e.v[0][1],0),c.applyToY(_e.v[0][0],_e.v[0][1],0)),ve.push(c.applyToX(_e.o[y-1][0],_e.o[y-1][1],0),c.applyToY(_e.o[y-1][0],_e.o[y-1][1],0),c.applyToX(_e.i[y][0],_e.i[y][1],0),c.applyToY(_e.i[y][0],_e.i[y][1],0),c.applyToX(_e.v[y][0],_e.v[y][1],0),c.applyToY(_e.v[y][0],_e.v[y][1],0));ve.push(c.applyToX(_e.o[y-1][0],_e.o[y-1][1],0),c.applyToY(_e.o[y-1][0],_e.o[y-1][1],0),c.applyToX(_e.i[0][0],_e.i[0][1],0),c.applyToY(_e.i[0][0],_e.i[0][1],0),c.applyToX(_e.v[0][0],_e.v[0][1],0),c.applyToY(_e.v[0][0],_e.v[0][1],0)),Ge[An]=ve,An+=1}He&&(Xe+=o[a].l,Xe+=De),this.textSpans[li]?this.textSpans[li].elem=Ge:this.textSpans[li]={elem:Ge},li+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var t=this.canvasContext;t.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var e,r,n,a,s,o,c=this.textAnimator.renderedLetters,d=this.textProperty.currentData.l;r=d.length;var m,y=null,A=null,P=null,Z,me,_e=this.globalData.renderer;for(e=0;e<r;e+=1)if(!d[e].n){if(m=c[e],m&&(_e.save(),_e.ctxTransform(m.p),_e.ctxOpacity(m.o)),this.fill){for(m&&m.fc?y!==m.fc&&(_e.ctxFillStyle(m.fc),y=m.fc):y!==this.values.fill&&(y=this.values.fill,_e.ctxFillStyle(this.values.fill)),Z=this.textSpans[e].elem,a=Z.length,this.globalData.canvasContext.beginPath(),n=0;n<a;n+=1)for(me=Z[n],o=me.length,this.globalData.canvasContext.moveTo(me[0],me[1]),s=2;s<o;s+=6)this.globalData.canvasContext.bezierCurveTo(me[s],me[s+1],me[s+2],me[s+3],me[s+4],me[s+5]);this.globalData.canvasContext.closePath(),_e.ctxFill()}if(this.stroke){for(m&&m.sw?P!==m.sw&&(P=m.sw,_e.ctxLineWidth(m.sw)):P!==this.values.sWidth&&(P=this.values.sWidth,_e.ctxLineWidth(this.values.sWidth)),m&&m.sc?A!==m.sc&&(A=m.sc,_e.ctxStrokeStyle(m.sc)):A!==this.values.stroke&&(A=this.values.stroke,_e.ctxStrokeStyle(this.values.stroke)),Z=this.textSpans[e].elem,a=Z.length,this.globalData.canvasContext.beginPath(),n=0;n<a;n+=1)for(me=Z[n],o=me.length,this.globalData.canvasContext.moveTo(me[0],me[1]),s=2;s<o;s+=6)this.globalData.canvasContext.bezierCurveTo(me[s],me[s+1],me[s+2],me[s+3],me[s+4],me[s+5]);this.globalData.canvasContext.closePath(),_e.ctxStroke()}m&&this.globalData.renderer.restore()}};function CVImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e=t.getContext("2d"),r=this.img.width,n=this.img.height,a=r/n,s=this.assetData.w/this.assetData.h,o,c,d=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;a>s&&d==="xMidYMid slice"||a<s&&d!=="xMidYMid slice"?(c=n,o=c*s):(o=r,c=o/s),e.drawImage(this.img,(r-o)/2,(n-c)/2,o,c,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRendererBase.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(t){t[0]===1&&t[1]===0&&t[4]===0&&t[5]===1&&t[12]===0&&t[13]===0||this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRendererBase.prototype.ctxOpacity=function(t){this.canvasContext.globalAlpha*=t<0?0:t},CanvasRendererBase.prototype.ctxFillStyle=function(t){this.canvasContext.fillStyle=t},CanvasRendererBase.prototype.ctxStrokeStyle=function(t){this.canvasContext.strokeStyle=t},CanvasRendererBase.prototype.ctxLineWidth=function(t){this.canvasContext.lineWidth=t},CanvasRendererBase.prototype.ctxLineCap=function(t){this.canvasContext.lineCap=t},CanvasRendererBase.prototype.ctxLineJoin=function(t){this.canvasContext.lineJoin=t},CanvasRendererBase.prototype.ctxMiterLimit=function(t){this.canvasContext.miterLimit=t},CanvasRendererBase.prototype.ctxFill=function(t){this.canvasContext.fill(t)},CanvasRendererBase.prototype.ctxFillRect=function(t,e,r,n){this.canvasContext.fillRect(t,e,r,n)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(t){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}t&&(this.globalData.blendMode="source-over"),this.contextData.restore(t)},CanvasRendererBase.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var r="0px 0px 0px";e.transformOrigin=r,e.mozTransformOrigin=r,e.webkitTransformOrigin=r,e["-webkit-transform"]=r,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(t,e){this.reset();var r,n;t?(r=t,n=e,this.canvasContext.canvas.width=r,this.canvasContext.canvas.height=n):(this.animationItem.wrapper&&this.animationItem.container?(r=this.animationItem.wrapper.offsetWidth,n=this.animationItem.wrapper.offsetHeight):(r=this.canvasContext.canvas.width,n=this.canvasContext.canvas.height),this.canvasContext.canvas.width=r*this.renderConfig.dpr,this.canvasContext.canvas.height=n*this.renderConfig.dpr);var a,s;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var o=this.renderConfig.preserveAspectRatio.split(" "),c=o[1]||"meet",d=o[0]||"xMidYMid",m=d.substr(0,4),y=d.substr(4);a=r/n,s=this.transformCanvas.w/this.transformCanvas.h,s>a&&c==="meet"||s<a&&c==="slice"?(this.transformCanvas.sx=r/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=n/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.h/this.renderConfig.dpr)),m==="xMid"&&(s<a&&c==="meet"||s>a&&c==="slice")?this.transformCanvas.tx=(r-this.transformCanvas.w*(n/this.transformCanvas.h))/2*this.renderConfig.dpr:m==="xMax"&&(s<a&&c==="meet"||s>a&&c==="slice")?this.transformCanvas.tx=(r-this.transformCanvas.w*(n/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,y==="YMid"&&(s>a&&c==="meet"||s<a&&c==="slice")?this.transformCanvas.ty=(n-this.transformCanvas.h*(r/this.transformCanvas.w))/2*this.renderConfig.dpr:y==="YMax"&&(s>a&&c==="meet"||s<a&&c==="slice")?this.transformCanvas.ty=(n-this.transformCanvas.h*(r/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=r/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var t,e=this.layers?this.layers.length:0;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(t,e){if(!(this.renderedFrame===t&&this.renderConfig.clearCanvas===!0&&!e||this.destroyed||t===-1)){this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var r,n=this.layers.length;for(this.completeLayers||this.checkLayers(t),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(t-this.layers[r].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty===99)){var r=this.createItem(this.layers[t],this,this.globalData);e[t]=r,r.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var t,e=15;for(t=0;t<e;t+=1){var r=new CanvasContext;this.stack[t]=r}this._length=e,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var t=this._length*2,e=0;for(e=this._length;e<t;e+=1)this.stack[e]=new CanvasContext;this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(t){this.cArrPos-=1;var e=this.stack[this.cArrPos],r=e.transform,n,a=this.cTr.props;for(n=0;n<16;n+=1)a[n]=r[n];if(t){this.nativeContext.restore();var s=this.stack[this.cArrPos+1];this.appliedFillStyle=s.fillStyle,this.appliedStrokeStyle=s.strokeStyle,this.appliedLineWidth=s.lineWidth,this.appliedLineCap=s.lineCap,this.appliedLineJoin=s.lineJoin,this.appliedMiterLimit=s.miterLimit}this.nativeContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),(t||e.opacity!==-1&&this.currentOpacity!==e.opacity)&&(this.nativeContext.globalAlpha=e.opacity,this.currentOpacity=e.opacity),this.currentFillStyle=e.fillStyle,this.currentStrokeStyle=e.strokeStyle,this.currentLineWidth=e.lineWidth,this.currentLineCap=e.lineCap,this.currentLineJoin=e.lineJoin,this.currentMiterLimit=e.miterLimit},CVContextData.prototype.save=function(t){t&&this.nativeContext.save();var e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var r=this.stack[this.cArrPos],n;for(n=0;n<16;n+=1)r.transform[n]=e[n];this.cArrPos+=1;var a=this.stack[this.cArrPos];a.opacity=r.opacity,a.fillStyle=r.fillStyle,a.strokeStyle=r.strokeStyle,a.lineWidth=r.lineWidth,a.lineCap=r.lineCap,a.lineJoin=r.lineJoin,a.miterLimit=r.miterLimit},CVContextData.prototype.setOpacity=function(t){this.stack[this.cArrPos].opacity=t},CVContextData.prototype.setContext=function(t){this.nativeContext=t},CVContextData.prototype.fillStyle=function(t){this.stack[this.cArrPos].fillStyle!==t&&(this.currentFillStyle=t,this.stack[this.cArrPos].fillStyle=t)},CVContextData.prototype.strokeStyle=function(t){this.stack[this.cArrPos].strokeStyle!==t&&(this.currentStrokeStyle=t,this.stack[this.cArrPos].strokeStyle=t)},CVContextData.prototype.lineWidth=function(t){this.stack[this.cArrPos].lineWidth!==t&&(this.currentLineWidth=t,this.stack[this.cArrPos].lineWidth=t)},CVContextData.prototype.lineCap=function(t){this.stack[this.cArrPos].lineCap!==t&&(this.currentLineCap=t,this.stack[this.cArrPos].lineCap=t)},CVContextData.prototype.lineJoin=function(t){this.stack[this.cArrPos].lineJoin!==t&&(this.currentLineJoin=t,this.stack[this.cArrPos].lineJoin=t)},CVContextData.prototype.miterLimit=function(t){this.stack[this.cArrPos].miterLimit!==t&&(this.currentMiterLimit=t,this.stack[this.cArrPos].miterLimit=t)},CVContextData.prototype.transform=function(t){this.transformMat.cloneFromProps(t);var e=this.cTr;this.transformMat.multiply(e),e.cloneFromProps(this.transformMat.props);var r=e.props;this.nativeContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13])},CVContextData.prototype.opacity=function(t){var e=this.stack[this.cArrPos].opacity;e*=t<0?0:t,this.stack[this.cArrPos].opacity!==e&&(this.currentOpacity!==t&&(this.nativeContext.globalAlpha=t,this.currentOpacity=t),this.stack[this.cArrPos].opacity=e)},CVContextData.prototype.fill=function(t){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(t)},CVContextData.prototype.fillRect=function(t,e,r,n){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(t,e,r,n)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(t,e,r){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip();var e,r=this.layers.length;for(e=r-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var t,e=this.layers.length;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)};function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:e&&e.clearCanvas!==void 0?e.clearCanvas:!0,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var r=this.finalTransform.mat.toCSS();e.transform=r,e.webkitTransform=r}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?(t=createNS("rect"),t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(t=createTag("div"),t.style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)};function HShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,r),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)e=t[r].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var r=t.sh.v,n=t.transformers,a,s=r._length,o,c,d,m;if(!(s<=1)){for(a=0;a<s-1;a+=1)o=this.getTransformedPoint(n,r.v[a]),c=this.getTransformedPoint(n,r.o[a]),d=this.getTransformedPoint(n,r.i[a+1]),m=this.getTransformedPoint(n,r.v[a+1]),this.checkBounds(o,c,d,m,e);r.c&&(o=this.getTransformedPoint(n,r.v[a]),c=this.getTransformedPoint(n,r.o[a]),d=this.getTransformedPoint(n,r.i[0]),m=this.getTransformedPoint(n,r.v[0]),this.checkBounds(o,c,d,m,e))}},HShapeElement.prototype.checkBounds=function(t,e,r,n,a){this.getBoundsOfCurve(t,e,r,n);var s=this.shapeBoundingBox;a.x=bmMin(s.left,a.x),a.xMax=bmMax(s.right,a.xMax),a.y=bmMin(s.top,a.y),a.yMax=bmMax(s.bottom,a.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,r,n){for(var a=[[t[0],n[0]],[t[1],n[1]]],s,o,c,d,m,y,A,P=0;P<2;++P)o=6*t[P]-12*e[P]+6*r[P],s=-3*t[P]+9*e[P]-9*r[P]+3*n[P],c=3*e[P]-3*t[P],o|=0,s|=0,c|=0,s===0&&o===0||(s===0?(d=-c/o,d>0&&d<1&&a[P].push(this.calculateF(d,t,e,r,n,P))):(m=o*o-4*c*s,m>=0&&(y=(-o+bmSqrt(m))/(2*s),y>0&&y<1&&a[P].push(this.calculateF(y,t,e,r,n,P)),A=(-o-bmSqrt(m))/(2*s),A>0&&A<1&&a[P].push(this.calculateF(A,t,e,r,n,P)))));this.shapeBoundingBox.left=bmMin.apply(null,a[0]),this.shapeBoundingBox.top=bmMin.apply(null,a[1]),this.shapeBoundingBox.right=bmMax.apply(null,a[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,a[1])},HShapeElement.prototype.calculateF=function(t,e,r,n,a,s){return bmPow(1-t,3)*e[s]+3*bmPow(1-t,2)*t*r[s]+3*(1-t)*bmPow(t,2)*n[s]+bmPow(t,3)*a[s]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)t[r]&&t[r].sh?this.calculateShapeBoundingBox(t[r],e):t[r]&&t[r].it?this.calculateBoundingBox(t[r].it,e):t[r]&&t[r].style&&t[r].w&&this.expandStrokeBoundingBox(t[r].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(t,e){var r=0;if(t.keyframes){for(var n=0;n<t.keyframes.length;n+=1){var a=t.keyframes[n].s;a>r&&(r=a)}r*=t.mult}else r=t.v*t.mult;e.x-=r,e.xMax+=r,e.y-=r,e.yMax+=r},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var r=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),r=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),r=!0),r||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var n=this.shapeCont.style,a="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";n.transform=a,n.webkitTransform=a}}};function HTextElement(t,e,r){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,r=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=r,e.color=r,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var n=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",n.fClass)this.innerElem.className=n.fClass;else{e.fontFamily=n.fFamily;var a=t.fWeight,s=t.fStyle;e.fontStyle=s,e.fontWeight=a}var o,c,d=t.l;c=d.length;var m,y,A,P=this.mHelper,Z,me="",_e=0;for(o=0;o<c;o+=1){if(this.globalData.fontManager.chars?(this.textPaths[_e]?m=this.textPaths[_e]:(m=createNS("path"),m.setAttribute("stroke-linecap",lineCapEnum[1]),m.setAttribute("stroke-linejoin",lineJoinEnum[2]),m.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[_e]?(y=this.textSpans[_e],A=y.children[0]):(y=createTag("div"),y.style.lineHeight=0,A=createNS("svg"),A.appendChild(m),styleDiv(y)))):this.isMasked?m=this.textPaths[_e]?this.textPaths[_e]:createNS("text"):this.textSpans[_e]?(y=this.textSpans[_e],m=this.textPaths[_e]):(y=createTag("span"),styleDiv(y),m=createTag("span"),styleDiv(m),y.appendChild(m)),this.globalData.fontManager.chars){var Ge=this.globalData.fontManager.getCharData(t.finalText[o],n.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),ve;if(Ge?ve=Ge.data:ve=null,P.reset(),ve&&ve.shapes&&ve.shapes.length&&(Z=ve.shapes[0].it,P.scale(t.finalSize/100,t.finalSize/100),me=this.createPathShape(P,Z),m.setAttribute("d",me)),this.isMasked)this.innerElem.appendChild(m);else{if(this.innerElem.appendChild(y),ve&&ve.shapes){document.body.appendChild(A);var He=A.getBBox();A.setAttribute("width",He.width+2),A.setAttribute("height",He.height+2),A.setAttribute("viewBox",He.x-1+" "+(He.y-1)+" "+(He.width+2)+" "+(He.height+2));var De=A.style,Xe="translate("+(He.x-1)+"px,"+(He.y-1)+"px)";De.transform=Xe,De.webkitTransform=Xe,d[o].yOffset=He.y-1}else A.setAttribute("width",1),A.setAttribute("height",1);y.appendChild(A)}}else if(m.textContent=d[o].val,m.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(m);else{this.innerElem.appendChild(y);var Bs=m.style,wt="translate3d(0,"+-t.finalSize/1.2+"px,0)";Bs.transform=wt,Bs.webkitTransform=wt}this.isMasked?this.textSpans[_e]=m:this.textSpans[_e]=y,this.textSpans[_e].style.display="block",this.textPaths[_e]=m,_e+=1}for(;_e<this.textSpans.length;)this.textSpans[_e].style.display="none",_e+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var t;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";t.transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var r,n,a=0,s=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;n=o.length;var c,d,m;for(r=0;r<n;r+=1)o[r].n?a+=1:(d=this.textSpans[r],m=this.textPaths[r],c=s[a],a+=1,c._mdf.m&&(this.isMasked?d.setAttribute("transform",c.m):(d.style.webkitTransform=c.m,d.style.transform=c.m)),d.style.opacity=c.o,c.sw&&c._mdf.sw&&m.setAttribute("stroke-width",c.sw),c.sc&&c._mdf.sc&&m.setAttribute("stroke",c.sc),c.fc&&c._mdf.fc&&(m.setAttribute("fill",c.fc),m.style.color=c.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var y=this.innerElem.getBBox();this.currentBBox.w!==y.width&&(this.currentBBox.w=y.width,this.svgElement.setAttribute("width",y.width)),this.currentBBox.h!==y.height&&(this.currentBBox.h=y.height,this.svgElement.setAttribute("height",y.height));var A=1;if(this.currentBBox.w!==y.width+A*2||this.currentBBox.h!==y.height+A*2||this.currentBBox.x!==y.x-A||this.currentBBox.y!==y.y-A){this.currentBBox.w=y.width+A*2,this.currentBBox.h=y.height+A*2,this.currentBBox.x=y.x-A,this.currentBBox.y=y.y-A,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style;var P="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=P,t.webkitTransform=P}}}};function HCameraElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initHierarchy();var n=PropertyFactory.getProp;if(this.pe=n(this,t.pe,0,0,this),t.ks.p.s?(this.px=n(this,t.ks.p.x,1,0,this),this.py=n(this,t.ks.p.y,1,0,this),this.pz=n(this,t.ks.p.z,1,0,this)):this.p=n(this,t.ks.p,1,0,this),t.ks.a&&(this.a=n(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var a,s=t.ks.or.k.length;for(a=0;a<s;a+=1)t.ks.or.k[a].to=null,t.ks.or.k[a].ti=null}this.or=n(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=n(this,t.ks.rx,0,degToRads,this),this.ry=n(this,t.ks.ry,0,degToRads,this),this.rz=n(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e=this.comp.threeDElements.length,r,n,a;for(t=0;t<e;t+=1)if(r=this.comp.threeDElements[t],r.type==="3d"){n=r.perspectiveElem.style,a=r.container.style;var s=this.pe.v+"px",o="0px 0px 0px",c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";n.perspective=s,n.webkitPerspective=s,a.transformOrigin=o,a.mozTransformOrigin=o,a.webkitTransformOrigin=o,n.transform=c,n.webkitTransform=c}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t=this._isFirstFrame,e,r;if(this.hierarchy)for(r=this.hierarchy.length,e=0;e<r;e+=1)t=this.hierarchy[e].finalTransform.mProp._mdf||t;if(t||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(r=this.hierarchy.length-1,e=r;e>=0;e-=1){var n=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-n.p.v[0],-n.p.v[1],n.p.v[2]),this.mat.rotateX(-n.or.v[0]).rotateY(-n.or.v[1]).rotateZ(n.or.v[2]),this.mat.rotateX(-n.rx.v).rotateY(-n.ry.v).rotateZ(n.rz.v),this.mat.scale(1/n.s.v[0],1/n.s.v[1],1/n.s.v[2]),this.mat.translate(n.a.v[0],n.a.v[1],n.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var a;this.p?a=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:a=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var s=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)),o=[a[0]/s,a[1]/s,a[2]/s],c=Math.sqrt(o[2]*o[2]+o[0]*o[0]),d=Math.atan2(o[1],c),m=Math.atan2(o[0],-o[2]);this.mat.rotateY(m).rotateX(-d)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var y=!this._prevMat.equals(this.mat);if((y||this.pe._mdf)&&this.comp.threeDElements){r=this.comp.threeDElements.length;var A,P,Z;for(e=0;e<r;e+=1)if(A=this.comp.threeDElements[e],A.type==="3d"){if(y){var me=this.mat.toCSS();Z=A.container.style,Z.transform=me,Z.webkitTransform=me}this.pe._mdf&&(P=A.perspectiveElem.style,P.perspective=this.pe.v+"px",P.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(r){var n=this.layers[e];if(!n.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(r,e);else{for(var a=0,s,o,c;a<e;)this.elements[a]&&this.elements[a]!==!0&&this.elements[a].getBaseElement&&(o=this.elements[a],c=this.layers[a].ddd?this.getThreeDContainerByPos(a):o.getBaseElement(),s=c||s),a+=1;s?(!n.ddd||!this.supports3d)&&this.layerElement.insertBefore(r,s):(!n.ddd||!this.supports3d)&&this.layerElement.appendChild(r)}else this.addTo3dContainer(r,e)}},HybridRendererBase.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRendererBase.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(t){for(var e=0,r=this.threeDElements.length;e<r;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(t,e){var r=createTag("div"),n,a;styleDiv(r);var s=createTag("div");if(styleDiv(s),e==="3d"){n=r.style,n.width=this.globalData.compSize.w+"px",n.height=this.globalData.compSize.h+"px";var o="50% 50%";n.webkitTransformOrigin=o,n.mozTransformOrigin=o,n.transformOrigin=o,a=s.style;var c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";a.transform=c,a.webkitTransform=c}r.appendChild(s);var d={container:s,perspectiveElem:r,startPos:t,endPos:t,type:e};return this.threeDElements.push(d),d},HybridRendererBase.prototype.build3dContainers=function(){var t,e=this.layers.length,r,n="";for(t=0;t<e;t+=1)this.layers[t].ddd&&this.layers[t].ty!==3?(n!=="3d"&&(n="3d",r=this.createThreeDContainer(t,"3d")),r.endPos=Math.max(r.endPos,t)):(n!=="2d"&&(n="2d",r=this.createThreeDContainer(t,"2d")),r.endPos=Math.max(r.endPos,t));for(e=this.threeDElements.length,t=e-1;t>=0;t-=1)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(t,e){for(var r=0,n=this.threeDElements.length;r<n;){if(e<=this.threeDElements[r].endPos){for(var a=this.threeDElements[r].startPos,s;a<e;)this.elements[a]&&this.elements[a].getBaseElement&&(s=this.elements[a].getBaseElement()),a+=1;s?this.threeDElements[r].container.insertBefore(t,s):this.threeDElements[r].container.appendChild(t);break}r+=1}},HybridRendererBase.prototype.configAnimation=function(t){var e=createTag("div"),r=this.animationItem.wrapper,n=e.style;n.width=t.w+"px",n.height=t.h+"px",this.resizerElem=e,styleDiv(e),n.transformStyle="flat",n.mozTransformStyle="flat",n.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),r.appendChild(e),n.overflow="hidden";var a=createNS("svg");a.setAttribute("width","1"),a.setAttribute("height","1"),styleDiv(a),this.resizerElem.appendChild(a);var s=createNS("defs");a.appendChild(s),this.data=t,this.setupGlobalData(t,a),this.globalData.defs=s,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,r=t/e,n=this.globalData.compSize.w/this.globalData.compSize.h,a,s,o,c;n>r?(a=t/this.globalData.compSize.w,s=t/this.globalData.compSize.w,o=0,c=(e-this.globalData.compSize.h*(t/this.globalData.compSize.w))/2):(a=e/this.globalData.compSize.h,s=e/this.globalData.compSize.h,o=(t-this.globalData.compSize.w*(e/this.globalData.compSize.h))/2,c=0);var d=this.resizerElem.style;d.webkitTransform="matrix3d("+a+",0,0,0,0,"+s+",0,0,0,0,1,0,"+o+","+c+",0,1)",d.transform=d.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t=this.globalData.compSize.w,e=this.globalData.compSize.h,r,n=this.threeDElements.length;for(r=0;r<n;r+=1){var a=this.threeDElements[r].perspectiveElem.style;a.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))+"px",a.perspective=a.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(t){var e,r=t.length,n=createTag("div");for(e=0;e<r;e+=1)if(t[e].xt){var a=this.createComp(t[e],n,this.globalData.comp,null);a.initExpressions(),this.globalData.projectInterface.registerComposition(a)}};function HCompElement(t,e,r){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var r=0,n;r<e;)this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(t,n):this.layerElement.appendChild(t)},HCompElement.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};var CompExpressionInterface=function(){return function(t){function e(r){for(var n=0,a=t.layers.length;n<a;){if(t.layers[n].nm===r||t.layers[n].ind===r)return t.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e}}();function _typeof$2(t){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(t)}function seedRandom(t,e){var r=this,n=256,a=6,s=52,o="random",c=e.pow(n,a),d=e.pow(2,s),m=d*2,y=n-1,A;function P(De,Xe,Bs){var wt=[];Xe=Xe===!0?{entropy:!0}:Xe||{};var li=Ge(_e(Xe.entropy?[De,He(t)]:De===null?ve():De,3),wt),An=new Z(wt),Os=function(){for(var Fc=An.g(a),Hc=c,qc=0;Fc<d;)Fc=(Fc+qc)*n,Hc*=n,qc=An.g(1);for(;Fc>=m;)Fc/=2,Hc/=2,qc>>>=1;return(Fc+qc)/Hc};return Os.int32=function(){return An.g(4)|0},Os.quick=function(){return An.g(4)/4294967296},Os.double=Os,Ge(He(An.S),t),(Xe.pass||Bs||function(vh,Fc,Hc,qc){return qc&&(qc.S&&me(qc,An),vh.state=function(){return me(An,{})}),Hc?(e[o]=vh,Fc):vh})(Os,li,"global"in Xe?Xe.global:this==e,Xe.state)}e["seed"+o]=P;function Z(De){var Xe,Bs=De.length,wt=this,li=0,An=wt.i=wt.j=0,Os=wt.S=[];for(Bs||(De=[Bs++]);li<n;)Os[li]=li++;for(li=0;li<n;li++)Os[li]=Os[An=y&An+De[li%Bs]+(Xe=Os[li])],Os[An]=Xe;wt.g=function(vh){for(var Fc,Hc=0,qc=wt.i,e1=wt.j,df=wt.S;vh--;)Fc=df[qc=y&qc+1],Hc=Hc*n+df[y&(df[qc]=df[e1=y&e1+Fc])+(df[e1]=Fc)];return wt.i=qc,wt.j=e1,Hc}}function me(De,Xe){return Xe.i=De.i,Xe.j=De.j,Xe.S=De.S.slice(),Xe}function _e(De,Xe){var Bs=[],wt=_typeof$2(De),li;if(Xe&&wt=="object")for(li in De)try{Bs.push(_e(De[li],Xe-1))}catch{}return Bs.length?Bs:wt=="string"?De:De+"\0"}function Ge(De,Xe){for(var Bs=De+"",wt,li=0;li<Bs.length;)Xe[y&li]=y&(wt^=Xe[y&li]*19)+Bs.charCodeAt(li++);return He(Xe)}function ve(){try{var De=new Uint8Array(n);return(r.crypto||r.msCrypto).getRandomValues(De),He(De)}catch{var Xe=r.navigator,Bs=Xe&&Xe.plugins;return[+new Date,r,Bs,r.screen,He(t)]}}function He(De){return String.fromCharCode.apply(0,De)}Ge(e.random(),t)}function initialize$2(t){seedRandom([],t)}var propTypes={SHAPE:"shape"};function _typeof$1(t){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(t)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return t==="number"||e instanceof Number||t==="boolean"||t==="string"}function $bm_neg(t){var e=_typeof$1(t);if(e==="number"||t instanceof Number||e==="boolean")return-t;if($bm_isInstanceOfArray(t)){var r,n=t.length,a=[];for(r=0;r<n;r+=1)a[r]=-t[r];return a}return t.propType?t.v:-t}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var r=_typeof$1(t),n=_typeof$1(e);if(isNumerable(r,t)&&isNumerable(n,e)||r==="string"||n==="string")return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(n,e))return t=t.slice(0),t[0]+=e,t;if(isNumerable(r,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var a=0,s=t.length,o=e.length,c=[];a<s||a<o;)(typeof t[a]=="number"||t[a]instanceof Number)&&(typeof e[a]=="number"||e[a]instanceof Number)?c[a]=t[a]+e[a]:c[a]=e[a]===void 0?t[a]:t[a]||e[a],a+=1;return c}return 0}var add=sum;function sub(t,e){var r=_typeof$1(t),n=_typeof$1(e);if(isNumerable(r,t)&&isNumerable(n,e))return r==="string"&&(t=parseInt(t,10)),n==="string"&&(e=parseInt(e,10)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(n,e))return t=t.slice(0),t[0]-=e,t;if(isNumerable(r,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var a=0,s=t.length,o=e.length,c=[];a<s||a<o;)(typeof t[a]=="number"||t[a]instanceof Number)&&(typeof e[a]=="number"||e[a]instanceof Number)?c[a]=t[a]-e[a]:c[a]=e[a]===void 0?t[a]:t[a]||e[a],a+=1;return c}return 0}function mul(t,e){var r=_typeof$1(t),n=_typeof$1(e),a;if(isNumerable(r,t)&&isNumerable(n,e))return t*e;var s,o;if($bm_isInstanceOfArray(t)&&isNumerable(n,e)){for(o=t.length,a=createTypedArray("float32",o),s=0;s<o;s+=1)a[s]=t[s]*e;return a}if(isNumerable(r,t)&&$bm_isInstanceOfArray(e)){for(o=e.length,a=createTypedArray("float32",o),s=0;s<o;s+=1)a[s]=t*e[s];return a}return 0}function div(t,e){var r=_typeof$1(t),n=_typeof$1(e),a;if(isNumerable(r,t)&&isNumerable(n,e))return t/e;var s,o;if($bm_isInstanceOfArray(t)&&isNumerable(n,e)){for(o=t.length,a=createTypedArray("float32",o),s=0;s<o;s+=1)a[s]=t[s]/e;return a}if(isNumerable(r,t)&&$bm_isInstanceOfArray(e)){for(o=e.length,a=createTypedArray("float32",o),s=0;s<o;s+=1)a[s]=t/e[s];return a}return 0}function mod(t,e){return typeof t=="string"&&(t=parseInt(t,10)),typeof e=="string"&&(e=parseInt(e,10)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,r){if(e>r){var n=r;r=e,e=n}return Math.min(Math.max(t,e),r)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if(typeof t=="number"||t instanceof Number)return e=e||0,Math.abs(t-e);e||(e=helperLengthArray);var r,n=Math.min(t.length,e.length),a=0;for(r=0;r<n;r+=1)a+=Math.pow(e[r]-t[r],2);return Math.sqrt(a)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e=t[0],r=t[1],n=t[2],a=Math.max(e,r,n),s=Math.min(e,r,n),o,c,d=(a+s)/2;if(a===s)o=0,c=0;else{var m=a-s;switch(c=d>.5?m/(2-a-s):m/(a+s),a){case e:o=(r-n)/m+(r<n?6:0);break;case r:o=(n-e)/m+2;break;case n:o=(e-r)/m+4;break}o/=6}return[o,c,d,t[3]]}function hue2rgb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function hslToRgb(t){var e=t[0],r=t[1],n=t[2],a,s,o;if(r===0)a=n,o=n,s=n;else{var c=n<.5?n*(1+r):n+r-n*r,d=2*n-c;a=hue2rgb(d,c,e+1/3),s=hue2rgb(d,c,e),o=hue2rgb(d,c,e-1/3)}return[a,s,o,t[3]]}function linear(t,e,r,n,a){if((n===void 0||a===void 0)&&(n=e,a=r,e=0,r=1),r<e){var s=r;r=e,e=s}if(t<=e)return n;if(t>=r)return a;var o=r===e?0:(t-e)/(r-e);if(!n.length)return n+(a-n)*o;var c,d=n.length,m=createTypedArray("float32",d);for(c=0;c<d;c+=1)m[c]=n[c]+(a[c]-n[c])*o;return m}function random(t,e){if(e===void 0&&(t===void 0?(t=0,e=1):(e=t,t=void 0)),e.length){var r,n=e.length;t||(t=createTypedArray("float32",n));var a=createTypedArray("float32",n),s=BMMath.random();for(r=0;r<n;r+=1)a[r]=t[r]+s*(e[r]-t[r]);return a}t===void 0&&(t=0);var o=BMMath.random();return t+o*(e-t)}function createPath(t,e,r,n){var a,s=t.length,o=shapePool.newElement();o.setPathData(!!n,s);var c=[0,0],d,m;for(a=0;a<s;a+=1)d=e&&e[a]?e[a]:c,m=r&&r[a]?r[a]:c,o.setTripleAt(t[a][0],t[a][1],m[0]+t[a][0],m[1]+t[a][1],d[0]+t[a][0],d[1]+t[a][1],a,!0);return o}function initiateExpression(elem,data,property){function noOp(t){return t}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function t(e,r){var n,a,s=this.pv.length?this.pv.length:1,o=createTypedArray("float32",s);e=5;var c=Math.floor(time*e);for(n=0,a=0;n<c;){for(a=0;a<s;a+=1)o[a]+=-r+r*2*BMMath.random();n+=1}var d=time*e,m=d-Math.floor(d),y=createTypedArray("float32",s);if(s>1){for(a=0;a<s;a+=1)y[a]=this.pv[a]+o[a]+(-r+r*2*BMMath.random())*m;return y}return this.pv+o[0]+(-r+r*2*BMMath.random())*m}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(t,e){var r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],n=Math.atan2(r[0],Math.sqrt(r[1]*r[1]+r[2]*r[2]))/degToRads,a=-Math.atan2(r[1],r[2])/degToRads;return[a,n,0]}function easeOut(t,e,r,n,a){return applyEase(easeOutBez,t,e,r,n,a)}function easeIn(t,e,r,n,a){return applyEase(easeInBez,t,e,r,n,a)}function ease(t,e,r,n,a){return applyEase(easeInOutBez,t,e,r,n,a)}function applyEase(t,e,r,n,a,s){a===void 0?(a=r,s=n):e=(e-r)/(n-r),e>1?e=1:e<0&&(e=0);var o=t(e);if($bm_isInstanceOfArray(a)){var c,d=a.length,m=createTypedArray("float32",d);for(c=0;c<d;c+=1)m[c]=(s[c]-a[c])*o+a[c];return m}return(s-a)*o+a}function nearestKey(t){var e,r=data.k.length,n,a;if(!data.k.length||typeof data.k[0]=="number")n=0,a=0;else if(n=-1,t*=elem.comp.globalData.frameRate,t<data.k[0].t)n=1,a=data.k[0].t;else{for(e=0;e<r-1;e+=1)if(t===data.k[e].t){n=e+1,a=data.k[e].t;break}else if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(n=e+2,a=data.k[e+1].t):(n=e+1,a=data.k[e].t);break}n===-1&&(n=e+1,a=data.k[e].t)}var s={};return s.index=n,s.time=a/elem.comp.globalData.frameRate,s}function key(t){var e,r,n;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var a=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(n=a.length,r=0;r<n;r+=1)e[r]=a[r],e.value[r]=a[r];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return!t&&t!==0&&(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return typeof value=="string"?e===void 0?value.substring(t):value.substring(t,e):""}function substr(t,e){return typeof value=="string"?e===void 0?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=t===0?0:Math.floor(time*t)/t,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(t){return value=t,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var t={};t.initExpressions=e,t.resetFrame=ExpressionManager.resetFrame;function e(r){var n=0,a=[];function s(){n+=1}function o(){n-=1,n===0&&d()}function c(m){a.indexOf(m)===-1&&a.push(m)}function d(){var m,y=a.length;for(m=0;m<y;m+=1)a[m].release();a.length=0}r.renderer.compInterface=CompExpressionInterface(r.renderer),r.renderer.globalData.projectInterface.registerComposition(r.renderer),r.renderer.globalData.pushExpression=s,r.renderer.globalData.popExpression=o,r.renderer.globalData.registerExpressionProperty=c}return t}(),MaskManagerInterface=function(){function t(r,n){this._mask=r,this._data=n}Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var e=function(n){var a=createSizedArray(n.viewData.length),s,o=n.viewData.length;for(s=0;s<o;s+=1)a[s]=new t(n.viewData[s],n.masksProperties[s]);var c=function(m){for(s=0;s<o;){if(n.masksProperties[s].nm===m)return a[s];s+=1}return null};return c};return e}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function r(o,c,d){Object.defineProperty(o,"velocity",{get:function(){return c.getVelocityAtTime(c.comp.currentFrame)}}),o.numKeys=c.keyframes?c.keyframes.length:0,o.key=function(m){if(!o.numKeys)return 0;var y="";"s"in c.keyframes[m-1]?y=c.keyframes[m-1].s:"e"in c.keyframes[m-2]?y=c.keyframes[m-2].e:y=c.keyframes[m-2].s;var A=d==="unidimensional"?new Number(y):Object.assign({},y);return A.time=c.keyframes[m-1].t/c.elem.comp.globalData.frameRate,A.value=d==="unidimensional"?y[0]:y,A},o.valueAtTime=c.getValueAtTime,o.speedAtTime=c.getSpeedAtTime,o.velocityAtTime=c.getVelocityAtTime,o.propertyGroup=c.propertyGroup}function n(o){(!o||!("pv"in o))&&(o=t);var c=1/o.mult,d=o.pv*c,m=new Number(d);return m.value=d,r(m,o,"unidimensional"),function(){return o.k&&o.getValue(),d=o.v*c,m.value!==d&&(m=new Number(d),m.value=d,m[0]=d,r(m,o,"unidimensional")),m}}function a(o){(!o||!("pv"in o))&&(o=e);var c=1/o.mult,d=o.data&&o.data.l||o.pv.length,m=createTypedArray("float32",d),y=createTypedArray("float32",d);return m.value=y,r(m,o,"multidimensional"),function(){o.k&&o.getValue();for(var A=0;A<d;A+=1)y[A]=o.v[A]*c,m[A]=y[A];return m}}function s(){return t}return function(o){return o?o.propType==="unidimensional"?n(o):a(o):s}}(),TransformExpressionInterface=function(){return function(t){function e(o){switch(o){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)});var r,n,a,s;return t.p?s=ExpressionPropertyInterface(t.p):(r=ExpressionPropertyInterface(t.px),n=ExpressionPropertyInterface(t.py),t.pz&&(a=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?s():[r(),n(),a?a():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e}}(),LayerExpressionInterface=function(){function t(m){var y=new Matrix;if(m!==void 0){var A=this._elem.finalTransform.mProp.getValueAtTime(m);A.clone(y)}else{var P=this._elem.finalTransform.mProp;P.applyToMatrix(y)}return y}function e(m,y){var A=this.getMatrix(y);return A.props[12]=0,A.props[13]=0,A.props[14]=0,this.applyPoint(A,m)}function r(m,y){var A=this.getMatrix(y);return this.applyPoint(A,m)}function n(m,y){var A=this.getMatrix(y);return A.props[12]=0,A.props[13]=0,A.props[14]=0,this.invertPoint(A,m)}function a(m,y){var A=this.getMatrix(y);return this.invertPoint(A,m)}function s(m,y){if(this._elem.hierarchy&&this._elem.hierarchy.length){var A,P=this._elem.hierarchy.length;for(A=0;A<P;A+=1)this._elem.hierarchy[A].finalTransform.mProp.applyToMatrix(m)}return m.applyToPointArray(y[0],y[1],y[2]||0)}function o(m,y){if(this._elem.hierarchy&&this._elem.hierarchy.length){var A,P=this._elem.hierarchy.length;for(A=0;A<P;A+=1)this._elem.hierarchy[A].finalTransform.mProp.applyToMatrix(m)}return m.inversePoint(y)}function c(m){var y=new Matrix;if(y.reset(),this._elem.finalTransform.mProp.applyToMatrix(y),this._elem.hierarchy&&this._elem.hierarchy.length){var A,P=this._elem.hierarchy.length;for(A=0;A<P;A+=1)this._elem.hierarchy[A].finalTransform.mProp.applyToMatrix(y);return y.inversePoint(m)}return y.inversePoint(m)}function d(){return[1,1,1,1]}return function(m){var y;function A(_e){Z.mask=new MaskManagerInterface(_e,m)}function P(_e){Z.effect=_e}function Z(_e){switch(_e){case"ADBE Root Vectors Group":case"Contents":case 2:return Z.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return y;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return Z.effect;case"ADBE Text Properties":return Z.textInterface;default:return null}}Z.getMatrix=t,Z.invertPoint=o,Z.applyPoint=s,Z.toWorld=r,Z.toWorldVec=e,Z.fromWorld=a,Z.fromWorldVec=n,Z.toComp=r,Z.fromComp=c,Z.sampleImage=d,Z.sourceRectAtTime=m.sourceRectAtTime.bind(m),Z._elem=m,y=TransformExpressionInterface(m.finalTransform.mProp);var me=getDescriptor(y,"anchorPoint");return Object.defineProperties(Z,{hasParent:{get:function(){return m.hierarchy.length}},parent:{get:function(){return m.hierarchy[0].layerInterface}},rotation:getDescriptor(y,"rotation"),scale:getDescriptor(y,"scale"),position:getDescriptor(y,"position"),opacity:getDescriptor(y,"opacity"),anchorPoint:me,anchor_point:me,transform:{get:function(){return y}},active:{get:function(){return m.isInRange}}}),Z.startTime=m.data.st,Z.index=m.data.ind,Z.source=m.data.refId,Z.height=m.data.ty===0?m.data.h:100,Z.width=m.data.ty===0?m.data.w:100,Z.inPoint=m.data.ip/m.comp.globalData.frameRate,Z.outPoint=m.data.op/m.comp.globalData.frameRate,Z._name=m.data.nm,Z.registerMaskInterface=A,Z.registerEffectsInterface=P,Z}}(),propertyGroupFactory=function(){return function(t,e){return function(r){return r=r===void 0?1:r,r<=0?t:e(r-1)}}}(),PropertyInterface=function(){return function(t,e){var r={_name:t};function n(a){return a=a===void 0?1:a,a<=0?r:e(a-1)}return n}}(),EffectsExpressionInterface=function(){var t={createEffectsInterface:e};function e(a,s){if(a.effectsManager){var o=[],c=a.data.ef,d,m=a.effectsManager.effectElements.length;for(d=0;d<m;d+=1)o.push(r(c[d],a.effectsManager.effectElements[d],s,a));var y=a.data.ef||[],A=function(Z){for(d=0,m=y.length;d<m;){if(Z===y[d].nm||Z===y[d].mn||Z===y[d].ix)return o[d];d+=1}return null};return Object.defineProperty(A,"numProperties",{get:function(){return y.length}}),A}return null}function r(a,s,o,c){function d(Z){for(var me=a.ef,_e=0,Ge=me.length;_e<Ge;){if(Z===me[_e].nm||Z===me[_e].mn||Z===me[_e].ix)return me[_e].ty===5?y[_e]:y[_e]();_e+=1}throw new Error}var m=propertyGroupFactory(d,o),y=[],A,P=a.ef.length;for(A=0;A<P;A+=1)a.ef[A].ty===5?y.push(r(a.ef[A],s.effectElements[A],s.effectElements[A].propertyGroup,c)):y.push(n(s.effectElements[A],a.ef[A].ty,c,m));return a.mn==="ADBE Color Control"&&Object.defineProperty(d,"color",{get:function(){return y[0]()}}),Object.defineProperties(d,{numProperties:{get:function(){return a.np}},_name:{value:a.nm},propertyGroup:{value:m}}),d.enabled=a.en!==0,d.active=d.enabled,d}function n(a,s,o,c){var d=ExpressionPropertyInterface(a.p);function m(){return s===10?o.comp.compInterface(a.p.v):d()}return a.p.setGroupProperty&&a.p.setGroupProperty(PropertyInterface("",c)),m}return t}(),ShapePathInterface=function(){return function(e,r,n){var a=r.sh;function s(c){return c==="Shape"||c==="shape"||c==="Path"||c==="path"||c==="ADBE Vector Shape"||c===2?s.path:null}var o=propertyGroupFactory(s,n);return a.setGroupProperty(PropertyInterface("Path",o)),Object.defineProperties(s,{path:{get:function(){return a.k&&a.getValue(),a}},shape:{get:function(){return a.k&&a.getValue(),a}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:n}}),s}}(),ShapeExpressionInterface=function(){function t(me,_e,Ge){var ve=[],He,De=me?me.length:0;for(He=0;He<De;He+=1)me[He].ty==="gr"?ve.push(r(me[He],_e[He],Ge)):me[He].ty==="fl"?ve.push(n(me[He],_e[He],Ge)):me[He].ty==="st"?ve.push(o(me[He],_e[He],Ge)):me[He].ty==="tm"?ve.push(c(me[He],_e[He],Ge)):me[He].ty==="tr"||(me[He].ty==="el"?ve.push(m(me[He],_e[He],Ge)):me[He].ty==="sr"?ve.push(y(me[He],_e[He],Ge)):me[He].ty==="sh"?ve.push(ShapePathInterface(me[He],_e[He],Ge)):me[He].ty==="rc"?ve.push(A(me[He],_e[He],Ge)):me[He].ty==="rd"?ve.push(P(me[He],_e[He],Ge)):me[He].ty==="rp"?ve.push(Z(me[He],_e[He],Ge)):me[He].ty==="gf"?ve.push(a(me[He],_e[He],Ge)):ve.push(s(me[He],_e[He])));return ve}function e(me,_e,Ge){var ve,He=function(Bs){for(var wt=0,li=ve.length;wt<li;){if(ve[wt]._name===Bs||ve[wt].mn===Bs||ve[wt].propertyIndex===Bs||ve[wt].ix===Bs||ve[wt].ind===Bs)return ve[wt];wt+=1}return typeof Bs=="number"?ve[Bs-1]:null};He.propertyGroup=propertyGroupFactory(He,Ge),ve=t(me.it,_e.it,He.propertyGroup),He.numProperties=ve.length;var De=d(me.it[me.it.length-1],_e.it[_e.it.length-1],He.propertyGroup);return He.transform=De,He.propertyIndex=me.cix,He._name=me.nm,He}function r(me,_e,Ge){var ve=function(Bs){switch(Bs){case"ADBE Vectors Group":case"Contents":case 2:return ve.content;default:return ve.transform}};ve.propertyGroup=propertyGroupFactory(ve,Ge);var He=e(me,_e,ve.propertyGroup),De=d(me.it[me.it.length-1],_e.it[_e.it.length-1],ve.propertyGroup);return ve.content=He,ve.transform=De,Object.defineProperty(ve,"_name",{get:function(){return me.nm}}),ve.numProperties=me.np,ve.propertyIndex=me.ix,ve.nm=me.nm,ve.mn=me.mn,ve}function n(me,_e,Ge){function ve(He){return He==="Color"||He==="color"?ve.color:He==="Opacity"||He==="opacity"?ve.opacity:null}return Object.defineProperties(ve,{color:{get:ExpressionPropertyInterface(_e.c)},opacity:{get:ExpressionPropertyInterface(_e.o)},_name:{value:me.nm},mn:{value:me.mn}}),_e.c.setGroupProperty(PropertyInterface("Color",Ge)),_e.o.setGroupProperty(PropertyInterface("Opacity",Ge)),ve}function a(me,_e,Ge){function ve(He){return He==="Start Point"||He==="start point"?ve.startPoint:He==="End Point"||He==="end point"?ve.endPoint:He==="Opacity"||He==="opacity"?ve.opacity:null}return Object.defineProperties(ve,{startPoint:{get:ExpressionPropertyInterface(_e.s)},endPoint:{get:ExpressionPropertyInterface(_e.e)},opacity:{get:ExpressionPropertyInterface(_e.o)},type:{get:function(){return"a"}},_name:{value:me.nm},mn:{value:me.mn}}),_e.s.setGroupProperty(PropertyInterface("Start Point",Ge)),_e.e.setGroupProperty(PropertyInterface("End Point",Ge)),_e.o.setGroupProperty(PropertyInterface("Opacity",Ge)),ve}function s(){function me(){return null}return me}function o(me,_e,Ge){var ve=propertyGroupFactory(li,Ge),He=propertyGroupFactory(wt,ve);function De(An){Object.defineProperty(wt,me.d[An].nm,{get:ExpressionPropertyInterface(_e.d.dataProps[An].p)})}var Xe,Bs=me.d?me.d.length:0,wt={};for(Xe=0;Xe<Bs;Xe+=1)De(Xe),_e.d.dataProps[Xe].p.setGroupProperty(He);function li(An){return An==="Color"||An==="color"?li.color:An==="Opacity"||An==="opacity"?li.opacity:An==="Stroke Width"||An==="stroke width"?li.strokeWidth:null}return Object.defineProperties(li,{color:{get:ExpressionPropertyInterface(_e.c)},opacity:{get:ExpressionPropertyInterface(_e.o)},strokeWidth:{get:ExpressionPropertyInterface(_e.w)},dash:{get:function(){return wt}},_name:{value:me.nm},mn:{value:me.mn}}),_e.c.setGroupProperty(PropertyInterface("Color",ve)),_e.o.setGroupProperty(PropertyInterface("Opacity",ve)),_e.w.setGroupProperty(PropertyInterface("Stroke Width",ve)),li}function c(me,_e,Ge){function ve(De){return De===me.e.ix||De==="End"||De==="end"?ve.end:De===me.s.ix?ve.start:De===me.o.ix?ve.offset:null}var He=propertyGroupFactory(ve,Ge);return ve.propertyIndex=me.ix,_e.s.setGroupProperty(PropertyInterface("Start",He)),_e.e.setGroupProperty(PropertyInterface("End",He)),_e.o.setGroupProperty(PropertyInterface("Offset",He)),ve.propertyIndex=me.ix,ve.propertyGroup=Ge,Object.defineProperties(ve,{start:{get:ExpressionPropertyInterface(_e.s)},end:{get:ExpressionPropertyInterface(_e.e)},offset:{get:ExpressionPropertyInterface(_e.o)},_name:{value:me.nm}}),ve.mn=me.mn,ve}function d(me,_e,Ge){function ve(De){return me.a.ix===De||De==="Anchor Point"?ve.anchorPoint:me.o.ix===De||De==="Opacity"?ve.opacity:me.p.ix===De||De==="Position"?ve.position:me.r.ix===De||De==="Rotation"||De==="ADBE Vector Rotation"?ve.rotation:me.s.ix===De||De==="Scale"?ve.scale:me.sk&&me.sk.ix===De||De==="Skew"?ve.skew:me.sa&&me.sa.ix===De||De==="Skew Axis"?ve.skewAxis:null}var He=propertyGroupFactory(ve,Ge);return _e.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",He)),_e.transform.mProps.p.setGroupProperty(PropertyInterface("Position",He)),_e.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",He)),_e.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",He)),_e.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",He)),_e.transform.mProps.sk&&(_e.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",He)),_e.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",He))),_e.transform.op.setGroupProperty(PropertyInterface("Opacity",He)),Object.defineProperties(ve,{opacity:{get:ExpressionPropertyInterface(_e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(_e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(_e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(_e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(_e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(_e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(_e.transform.mProps.sa)},_name:{value:me.nm}}),ve.ty="tr",ve.mn=me.mn,ve.propertyGroup=Ge,ve}function m(me,_e,Ge){function ve(Xe){return me.p.ix===Xe?ve.position:me.s.ix===Xe?ve.size:null}var He=propertyGroupFactory(ve,Ge);ve.propertyIndex=me.ix;var De=_e.sh.ty==="tm"?_e.sh.prop:_e.sh;return De.s.setGroupProperty(PropertyInterface("Size",He)),De.p.setGroupProperty(PropertyInterface("Position",He)),Object.defineProperties(ve,{size:{get:ExpressionPropertyInterface(De.s)},position:{get:ExpressionPropertyInterface(De.p)},_name:{value:me.nm}}),ve.mn=me.mn,ve}function y(me,_e,Ge){function ve(Xe){return me.p.ix===Xe?ve.position:me.r.ix===Xe?ve.rotation:me.pt.ix===Xe?ve.points:me.or.ix===Xe||Xe==="ADBE Vector Star Outer Radius"?ve.outerRadius:me.os.ix===Xe?ve.outerRoundness:me.ir&&(me.ir.ix===Xe||Xe==="ADBE Vector Star Inner Radius")?ve.innerRadius:me.is&&me.is.ix===Xe?ve.innerRoundness:null}var He=propertyGroupFactory(ve,Ge),De=_e.sh.ty==="tm"?_e.sh.prop:_e.sh;return ve.propertyIndex=me.ix,De.or.setGroupProperty(PropertyInterface("Outer Radius",He)),De.os.setGroupProperty(PropertyInterface("Outer Roundness",He)),De.pt.setGroupProperty(PropertyInterface("Points",He)),De.p.setGroupProperty(PropertyInterface("Position",He)),De.r.setGroupProperty(PropertyInterface("Rotation",He)),me.ir&&(De.ir.setGroupProperty(PropertyInterface("Inner Radius",He)),De.is.setGroupProperty(PropertyInterface("Inner Roundness",He))),Object.defineProperties(ve,{position:{get:ExpressionPropertyInterface(De.p)},rotation:{get:ExpressionPropertyInterface(De.r)},points:{get:ExpressionPropertyInterface(De.pt)},outerRadius:{get:ExpressionPropertyInterface(De.or)},outerRoundness:{get:ExpressionPropertyInterface(De.os)},innerRadius:{get:ExpressionPropertyInterface(De.ir)},innerRoundness:{get:ExpressionPropertyInterface(De.is)},_name:{value:me.nm}}),ve.mn=me.mn,ve}function A(me,_e,Ge){function ve(Xe){return me.p.ix===Xe?ve.position:me.r.ix===Xe?ve.roundness:me.s.ix===Xe||Xe==="Size"||Xe==="ADBE Vector Rect Size"?ve.size:null}var He=propertyGroupFactory(ve,Ge),De=_e.sh.ty==="tm"?_e.sh.prop:_e.sh;return ve.propertyIndex=me.ix,De.p.setGroupProperty(PropertyInterface("Position",He)),De.s.setGroupProperty(PropertyInterface("Size",He)),De.r.setGroupProperty(PropertyInterface("Rotation",He)),Object.defineProperties(ve,{position:{get:ExpressionPropertyInterface(De.p)},roundness:{get:ExpressionPropertyInterface(De.r)},size:{get:ExpressionPropertyInterface(De.s)},_name:{value:me.nm}}),ve.mn=me.mn,ve}function P(me,_e,Ge){function ve(Xe){return me.r.ix===Xe||Xe==="Round Corners 1"?ve.radius:null}var He=propertyGroupFactory(ve,Ge),De=_e;return ve.propertyIndex=me.ix,De.rd.setGroupProperty(PropertyInterface("Radius",He)),Object.defineProperties(ve,{radius:{get:ExpressionPropertyInterface(De.rd)},_name:{value:me.nm}}),ve.mn=me.mn,ve}function Z(me,_e,Ge){function ve(Xe){return me.c.ix===Xe||Xe==="Copies"?ve.copies:me.o.ix===Xe||Xe==="Offset"?ve.offset:null}var He=propertyGroupFactory(ve,Ge),De=_e;return ve.propertyIndex=me.ix,De.c.setGroupProperty(PropertyInterface("Copies",He)),De.o.setGroupProperty(PropertyInterface("Offset",He)),Object.defineProperties(ve,{copies:{get:ExpressionPropertyInterface(De.c)},offset:{get:ExpressionPropertyInterface(De.o)},_name:{value:me.nm}}),ve.mn=me.mn,ve}return function(me,_e,Ge){var ve;function He(Xe){if(typeof Xe=="number")return Xe=Xe===void 0?1:Xe,Xe===0?Ge:ve[Xe-1];for(var Bs=0,wt=ve.length;Bs<wt;){if(ve[Bs]._name===Xe)return ve[Bs];Bs+=1}return null}function De(){return Ge}return He.propertyGroup=propertyGroupFactory(He,De),ve=t(me,_e,He.propertyGroup),He.numProperties=ve.length,He._name="Contents",He}}(),TextExpressionInterface=function(){return function(t){var e;function r(n){switch(n){case"ADBE Text Document":return r.sourceText;default:return null}}return Object.defineProperty(r,"sourceText",{get:function(){t.textProperty.getValue();var a=t.textProperty.currentData.t;return(!e||a!==e.value)&&(e=new String(a),e.value=a||new String(a),Object.defineProperty(e,"style",{get:function(){return{fillColor:t.textProperty.currentData.fc}}})),e}}),r}}();function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}var FootageInterface=function(){var t=function(n){var a="",s=n.getFootageData();function o(){return a="",s=n.getFootageData(),c}function c(d){if(s[d])return a=d,s=s[d],_typeof(s)==="object"?c:s;var m=d.indexOf(a);if(m!==-1){var y=parseInt(d.substr(m+a.length),10);return s=s[y],_typeof(s)==="object"?c:s}return""}return o},e=function(n){function a(s){return s==="Outline"?a.outlineInterface():null}return a._name="Outline",a.outlineInterface=t(n),a};return function(r){function n(a){return a==="Data"?n.dataInterface:null}return n._name="Data",n.dataInterface=e(r),n}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(t){return interfaces[t]||null}var expressionHelpers=function(){function t(o,c,d){c.x&&(d.k=!0,d.x=!0,d.initiateExpression=ExpressionManager.initiateExpression,d.effectsSequence.push(d.initiateExpression(o,c,d).bind(d)))}function e(o){return o*=this.elem.globalData.frameRate,o-=this.offsetTime,o!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<o?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(o,this._cachingAtTime),this._cachingAtTime.lastFrame=o),this._cachingAtTime.value}function r(o){var c=-.01,d=this.getValueAtTime(o),m=this.getValueAtTime(o+c),y=0;if(d.length){var A;for(A=0;A<d.length;A+=1)y+=Math.pow(m[A]-d[A],2);y=Math.sqrt(y)*100}else y=0;return y}function n(o){if(this.vel!==void 0)return this.vel;var c=-.001,d=this.getValueAtTime(o),m=this.getValueAtTime(o+c),y;if(d.length){y=createTypedArray("float32",d.length);var A;for(A=0;A<d.length;A+=1)y[A]=(m[A]-d[A])/c}else y=(m-d)/c;return y}function a(){return this.pv}function s(o){this.propertyGroup=o}return{searchExpressions:t,getSpeedAtTime:r,getVelocityAtTime:n,getValueAtTime:e,getStaticValueAtTime:a,setGroupProperty:s}}();function addPropertyDecorator(){function t(P,Z,me){if(!this.k||!this.keyframes)return this.pv;P=P?P.toLowerCase():"";var _e=this.comp.renderedFrame,Ge=this.keyframes,ve=Ge[Ge.length-1].t;if(_e<=ve)return this.pv;var He,De;me?(Z?He=Math.abs(ve-this.elem.comp.globalData.frameRate*Z):He=Math.max(0,ve-this.elem.data.ip),De=ve-He):((!Z||Z>Ge.length-1)&&(Z=Ge.length-1),De=Ge[Ge.length-1-Z].t,He=ve-De);var Xe,Bs,wt;if(P==="pingpong"){var li=Math.floor((_e-De)/He);if(li%2!==0)return this.getValueAtTime((He-(_e-De)%He+De)/this.comp.globalData.frameRate,0)}else if(P==="offset"){var An=this.getValueAtTime(De/this.comp.globalData.frameRate,0),Os=this.getValueAtTime(ve/this.comp.globalData.frameRate,0),vh=this.getValueAtTime(((_e-De)%He+De)/this.comp.globalData.frameRate,0),Fc=Math.floor((_e-De)/He);if(this.pv.length){for(wt=new Array(An.length),Bs=wt.length,Xe=0;Xe<Bs;Xe+=1)wt[Xe]=(Os[Xe]-An[Xe])*Fc+vh[Xe];return wt}return(Os-An)*Fc+vh}else if(P==="continue"){var Hc=this.getValueAtTime(ve/this.comp.globalData.frameRate,0),qc=this.getValueAtTime((ve-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(wt=new Array(Hc.length),Bs=wt.length,Xe=0;Xe<Bs;Xe+=1)wt[Xe]=Hc[Xe]+(Hc[Xe]-qc[Xe])*((_e-ve)/this.comp.globalData.frameRate)/5e-4;return wt}return Hc+(Hc-qc)*((_e-ve)/.001)}return this.getValueAtTime(((_e-De)%He+De)/this.comp.globalData.frameRate,0)}function e(P,Z,me){if(!this.k)return this.pv;P=P?P.toLowerCase():"";var _e=this.comp.renderedFrame,Ge=this.keyframes,ve=Ge[0].t;if(_e>=ve)return this.pv;var He,De;me?(Z?He=Math.abs(this.elem.comp.globalData.frameRate*Z):He=Math.max(0,this.elem.data.op-ve),De=ve+He):((!Z||Z>Ge.length-1)&&(Z=Ge.length-1),De=Ge[Z].t,He=De-ve);var Xe,Bs,wt;if(P==="pingpong"){var li=Math.floor((ve-_e)/He);if(li%2===0)return this.getValueAtTime(((ve-_e)%He+ve)/this.comp.globalData.frameRate,0)}else if(P==="offset"){var An=this.getValueAtTime(ve/this.comp.globalData.frameRate,0),Os=this.getValueAtTime(De/this.comp.globalData.frameRate,0),vh=this.getValueAtTime((He-(ve-_e)%He+ve)/this.comp.globalData.frameRate,0),Fc=Math.floor((ve-_e)/He)+1;if(this.pv.length){for(wt=new Array(An.length),Bs=wt.length,Xe=0;Xe<Bs;Xe+=1)wt[Xe]=vh[Xe]-(Os[Xe]-An[Xe])*Fc;return wt}return vh-(Os-An)*Fc}else if(P==="continue"){var Hc=this.getValueAtTime(ve/this.comp.globalData.frameRate,0),qc=this.getValueAtTime((ve+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(wt=new Array(Hc.length),Bs=wt.length,Xe=0;Xe<Bs;Xe+=1)wt[Xe]=Hc[Xe]+(Hc[Xe]-qc[Xe])*(ve-_e)/.001;return wt}return Hc+(Hc-qc)*(ve-_e)/.001}return this.getValueAtTime((He-((ve-_e)%He+ve))/this.comp.globalData.frameRate,0)}function r(P,Z){if(!this.k)return this.pv;if(P=(P||.4)*.5,Z=Math.floor(Z||5),Z<=1)return this.pv;var me=this.comp.renderedFrame/this.comp.globalData.frameRate,_e=me-P,Ge=me+P,ve=Z>1?(Ge-_e)/(Z-1):1,He=0,De=0,Xe;this.pv.length?Xe=createTypedArray("float32",this.pv.length):Xe=0;for(var Bs;He<Z;){if(Bs=this.getValueAtTime(_e+He*ve),this.pv.length)for(De=0;De<this.pv.length;De+=1)Xe[De]+=Bs[De];else Xe+=Bs;He+=1}if(this.pv.length)for(De=0;De<this.pv.length;De+=1)Xe[De]/=Z;else Xe/=Z;return Xe}function n(P){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var Z=this._transformCachingAtTime.v;if(Z.cloneFromProps(this.pre.props),this.appliedTransformations<1){var me=this.a.getValueAtTime(P);Z.translate(-me[0]*this.a.mult,-me[1]*this.a.mult,me[2]*this.a.mult)}if(this.appliedTransformations<2){var _e=this.s.getValueAtTime(P);Z.scale(_e[0]*this.s.mult,_e[1]*this.s.mult,_e[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Ge=this.sk.getValueAtTime(P),ve=this.sa.getValueAtTime(P);Z.skewFromAxis(-Ge*this.sk.mult,ve*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var He=this.r.getValueAtTime(P);Z.rotate(-He*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var De=this.rz.getValueAtTime(P),Xe=this.ry.getValueAtTime(P),Bs=this.rx.getValueAtTime(P),wt=this.or.getValueAtTime(P);Z.rotateZ(-De*this.rz.mult).rotateY(Xe*this.ry.mult).rotateX(Bs*this.rx.mult).rotateZ(-wt[2]*this.or.mult).rotateY(wt[1]*this.or.mult).rotateX(wt[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var li=this.px.getValueAtTime(P),An=this.py.getValueAtTime(P);if(this.data.p.z){var Os=this.pz.getValueAtTime(P);Z.translate(li*this.px.mult,An*this.py.mult,-Os*this.pz.mult)}else Z.translate(li*this.px.mult,An*this.py.mult,0)}else{var vh=this.p.getValueAtTime(P);Z.translate(vh[0]*this.p.mult,vh[1]*this.p.mult,-vh[2]*this.p.mult)}return Z}function a(){return this.v.clone(new Matrix)}var s=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(P,Z,me){var _e=s(P,Z,me);return _e.dynamicProperties.length?_e.getValueAtTime=n.bind(_e):_e.getValueAtTime=a.bind(_e),_e.setGroupProperty=expressionHelpers.setGroupProperty,_e};var o=PropertyFactory.getProp;PropertyFactory.getProp=function(P,Z,me,_e,Ge){var ve=o(P,Z,me,_e,Ge);ve.kf?ve.getValueAtTime=expressionHelpers.getValueAtTime.bind(ve):ve.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(ve),ve.setGroupProperty=expressionHelpers.setGroupProperty,ve.loopOut=t,ve.loopIn=e,ve.smooth=r,ve.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(ve),ve.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(ve),ve.numKeys=Z.a===1?Z.k.length:0,ve.propertyIndex=Z.ix;var He=0;return me!==0&&(He=createTypedArray("float32",Z.a===1?Z.k[0].s.length:Z.k.length)),ve._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:He},expressionHelpers.searchExpressions(P,Z,ve),ve.k&&Ge.addDynamicProperty(ve),ve};function c(P){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),P*=this.elem.globalData.frameRate,P-=this.offsetTime,P!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<P?this._caching.lastIndex:0,this._cachingAtTime.lastTime=P,this.interpolateShape(P,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var d=ShapePropertyFactory.getConstructorFunction(),m=ShapePropertyFactory.getKeyframedConstructorFunction();function y(){}y.prototype={vertices:function(Z,me){this.k&&this.getValue();var _e=this.v;me!==void 0&&(_e=this.getValueAtTime(me,0));var Ge,ve=_e._length,He=_e[Z],De=_e.v,Xe=createSizedArray(ve);for(Ge=0;Ge<ve;Ge+=1)Z==="i"||Z==="o"?Xe[Ge]=[He[Ge][0]-De[Ge][0],He[Ge][1]-De[Ge][1]]:Xe[Ge]=[He[Ge][0],He[Ge][1]];return Xe},points:function(Z){return this.vertices("v",Z)},inTangents:function(Z){return this.vertices("i",Z)},outTangents:function(Z){return this.vertices("o",Z)},isClosed:function(){return this.v.c},pointOnPath:function(Z,me){var _e=this.v;me!==void 0&&(_e=this.getValueAtTime(me,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(_e));for(var Ge=this._segmentsLength,ve=Ge.lengths,He=Ge.totalLength*Z,De=0,Xe=ve.length,Bs=0,wt;De<Xe;){if(Bs+ve[De].addedLength>He){var li=De,An=_e.c&&De===Xe-1?0:De+1,Os=(He-Bs)/ve[De].addedLength;wt=bez.getPointInSegment(_e.v[li],_e.v[An],_e.o[li],_e.i[An],Os,ve[De]);break}else Bs+=ve[De].addedLength;De+=1}return wt||(wt=_e.c?[_e.v[0][0],_e.v[0][1]]:[_e.v[_e._length-1][0],_e.v[_e._length-1][1]]),wt},vectorOnPath:function(Z,me,_e){Z==1?Z=this.v.c:Z==0&&(Z=.999);var Ge=this.pointOnPath(Z,me),ve=this.pointOnPath(Z+.001,me),He=ve[0]-Ge[0],De=ve[1]-Ge[1],Xe=Math.sqrt(Math.pow(He,2)+Math.pow(De,2));if(Xe===0)return[0,0];var Bs=_e==="tangent"?[He/Xe,De/Xe]:[-De/Xe,He/Xe];return Bs},tangentOnPath:function(Z,me){return this.vectorOnPath(Z,me,"tangent")},normalOnPath:function(Z,me){return this.vectorOnPath(Z,me,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([y],d),extendPrototype([y],m),m.prototype.getValueAtTime=c,m.prototype.initiateExpression=ExpressionManager.initiateExpression;var A=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(P,Z,me,_e,Ge){var ve=A(P,Z,me,_e,Ge);return ve.propertyIndex=Z.ix,ve.lock=!1,me===3?expressionHelpers.searchExpressions(P,Z.pt,ve):me===4&&expressionHelpers.searchExpressions(P,Z.ks,ve),ve.k&&P.addDynamicProperty(ve),ve}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function t(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(e,r){var n=this.calculateExpression(r);if(e.t!==n){var a={};return this.copyData(a,e),a.t=n.toString(),a.__complete=!1,a}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),r=this.searchExpressions();return this.kf=e||r,this.kf},TextProperty.prototype.searchExpressions=t}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function t(e,r){var n=createNS("feMerge");n.setAttribute("result",e);var a,s;for(s=0;s<r.length;s+=1)a=createNS("feMergeNode"),a.setAttribute("in",r[s]),n.appendChild(a),n.appendChild(a);return n}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(t,e,r,n,a){this.filterManager=e;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","linearRGB"),s.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=s,s.setAttribute("result",n+"_tint_1"),t.appendChild(s),s=createNS("feColorMatrix"),s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),s.setAttribute("result",n+"_tint_2"),t.appendChild(s),this.matrixFilter=s;var o=this.createMergeNode(n,[a,n+"_tint_1",n+"_tint_2"]);t.appendChild(o)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+n+" 0"),this.matrixFilter.setAttribute("values",r[0]-e[0]+" 0 0 0 "+e[0]+" "+(r[1]-e[1])+" 0 0 0 "+e[1]+" "+(r[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}};function SVGFillFilter(t,e,r,n){this.filterManager=e;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.setAttribute("result",n),t.appendChild(a),this.matrixFilter=a}SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,r=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+r+" 0")}};function SVGStrokeEffect(t,e,r){this.initialized=!1,this.filterManager=e,this.elem=r,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var t=this.elem.layerElement.children||this.elem.layerElement.childNodes,e,r,n,a;for(this.filterManager.effectElements[1].p.v===1?(a=this.elem.maskManager.masksProperties.length,n=0):(n=this.filterManager.effectElements[0].p.v-1,a=n+1),r=createNS("g"),r.setAttribute("fill","none"),r.setAttribute("stroke-linecap","round"),r.setAttribute("stroke-dashoffset",1),n;n<a;n+=1)e=createNS("path"),r.appendChild(e),this.paths.push({p:e,m:n});if(this.filterManager.effectElements[10].p.v===3){var s=createNS("mask"),o=createElementID();s.setAttribute("id",o),s.setAttribute("mask-type","alpha"),s.appendChild(r),this.elem.globalData.defs.appendChild(s);var c=createNS("g");for(c.setAttribute("mask","url("+getLocationHref()+"#"+o+")");t[0];)c.appendChild(t[0]);this.elem.layerElement.appendChild(c),this.masker=s,r.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(t=this.elem.layerElement.children||this.elem.layerElement.childNodes;t.length;)this.elem.layerElement.removeChild(t[0]);this.elem.layerElement.appendChild(r),this.elem.layerElement.removeAttribute("mask"),r.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=r},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,r=this.paths.length,n,a;for(e=0;e<r;e+=1)if(this.paths[e].m!==-1&&(n=this.elem.maskManager.viewData[this.paths[e].m],a=this.paths[e].p,(t||this.filterManager._mdf||n.prop._mdf)&&a.setAttribute("d",n.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var s;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var o=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,c=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,d=a.getTotalLength();s="0 0 0 "+d*o+" ";var m=d*(c-o),y=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,A=Math.floor(m/y),P;for(P=0;P<A;P+=1)s+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";s+="0 "+d*10+" 0 0"}else s="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;a.setAttribute("stroke-dasharray",s)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(t||this.filterManager.effectElements[3].p._mdf)){var Z=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(Z[0]*255)+","+bmFloor(Z[1]*255)+","+bmFloor(Z[2]*255)+")")}};function SVGTritoneFilter(t,e,r,n){this.filterManager=e;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","linearRGB"),a.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),t.appendChild(a);var s=createNS("feComponentTransfer");s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",n),this.matrixFilter=s;var o=createNS("feFuncR");o.setAttribute("type","table"),s.appendChild(o),this.feFuncR=o;var c=createNS("feFuncG");c.setAttribute("type","table"),s.appendChild(c),this.feFuncG=c;var d=createNS("feFuncB");d.setAttribute("type","table"),s.appendChild(d),this.feFuncB=d,t.appendChild(s)}SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v,a=n[0]+" "+r[0]+" "+e[0],s=n[1]+" "+r[1]+" "+e[1],o=n[2]+" "+r[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",a),this.feFuncG.setAttribute("tableValues",s),this.feFuncB.setAttribute("tableValues",o)}};function SVGProLevelsFilter(t,e,r,n){this.filterManager=e;var a=this.filterManager.effectElements,s=createNS("feComponentTransfer");(a[10].p.k||a[10].p.v!==0||a[11].p.k||a[11].p.v!==1||a[12].p.k||a[12].p.v!==1||a[13].p.k||a[13].p.v!==0||a[14].p.k||a[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",s)),(a[17].p.k||a[17].p.v!==0||a[18].p.k||a[18].p.v!==1||a[19].p.k||a[19].p.v!==1||a[20].p.k||a[20].p.v!==0||a[21].p.k||a[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",s)),(a[24].p.k||a[24].p.v!==0||a[25].p.k||a[25].p.v!==1||a[26].p.k||a[26].p.v!==1||a[27].p.k||a[27].p.v!==0||a[28].p.k||a[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",s)),(a[31].p.k||a[31].p.v!==0||a[32].p.k||a[32].p.v!==1||a[33].p.k||a[33].p.v!==1||a[34].p.k||a[34].p.v!==0||a[35].p.k||a[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",s)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(s.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(s)),(a[3].p.k||a[3].p.v!==0||a[4].p.k||a[4].p.v!==1||a[5].p.k||a[5].p.v!==1||a[6].p.k||a[6].p.v!==0||a[7].p.k||a[7].p.v!==1)&&(s=createNS("feComponentTransfer"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",n),t.appendChild(s),this.feFuncRComposed=this.createFeFunc("feFuncR",s),this.feFuncGComposed=this.createFeFunc("feFuncG",s),this.feFuncBComposed=this.createFeFunc("feFuncB",s))}SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var r=createNS(t);return r.setAttribute("type","table"),e.appendChild(r),r},SVGProLevelsFilter.prototype.getTableValue=function(t,e,r,n,a){for(var s=0,o=256,c,d=Math.min(t,e),m=Math.max(t,e),y=Array.call(null,{length:o}),A,P=0,Z=a-n,me=e-t;s<=256;)c=s/256,c<=d?A=me<0?a:n:c>=m?A=me<0?n:a:A=n+Z*Math.pow((c-t)/me,1/r),y[P]=A,P+=1,s+=256/(o-1);return y.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,r=this.filterManager.effectElements;this.feFuncRComposed&&(t||r[3].p._mdf||r[4].p._mdf||r[5].p._mdf||r[6].p._mdf||r[7].p._mdf)&&(e=this.getTableValue(r[3].p.v,r[4].p.v,r[5].p.v,r[6].p.v,r[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||r[10].p._mdf||r[11].p._mdf||r[12].p._mdf||r[13].p._mdf||r[14].p._mdf)&&(e=this.getTableValue(r[10].p.v,r[11].p.v,r[12].p.v,r[13].p.v,r[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||r[17].p._mdf||r[18].p._mdf||r[19].p._mdf||r[20].p._mdf||r[21].p._mdf)&&(e=this.getTableValue(r[17].p.v,r[18].p.v,r[19].p.v,r[20].p.v,r[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||r[24].p._mdf||r[25].p._mdf||r[26].p._mdf||r[27].p._mdf||r[28].p._mdf)&&(e=this.getTableValue(r[24].p.v,r[25].p.v,r[26].p.v,r[27].p.v,r[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||r[31].p._mdf||r[32].p._mdf||r[33].p._mdf||r[34].p._mdf||r[35].p._mdf)&&(e=this.getTableValue(r[31].p.v,r[32].p.v,r[33].p.v,r[34].p.v,r[35].p.v),this.feFuncA.setAttribute("tableValues",e))}};function SVGDropShadowEffect(t,e,r,n,a){var s=e.container.globalData.renderConfig.filterSize,o=e.data.fs||s;t.setAttribute("x",o.x||s.x),t.setAttribute("y",o.y||s.y),t.setAttribute("width",o.width||s.width),t.setAttribute("height",o.height||s.height),this.filterManager=e;var c=createNS("feGaussianBlur");c.setAttribute("in","SourceAlpha"),c.setAttribute("result",n+"_drop_shadow_1"),c.setAttribute("stdDeviation","0"),this.feGaussianBlur=c,t.appendChild(c);var d=createNS("feOffset");d.setAttribute("dx","25"),d.setAttribute("dy","0"),d.setAttribute("in",n+"_drop_shadow_1"),d.setAttribute("result",n+"_drop_shadow_2"),this.feOffset=d,t.appendChild(d);var m=createNS("feFlood");m.setAttribute("flood-color","#00ff00"),m.setAttribute("flood-opacity","1"),m.setAttribute("result",n+"_drop_shadow_3"),this.feFlood=m,t.appendChild(m);var y=createNS("feComposite");y.setAttribute("in",n+"_drop_shadow_3"),y.setAttribute("in2",n+"_drop_shadow_2"),y.setAttribute("operator","in"),y.setAttribute("result",n+"_drop_shadow_4"),t.appendChild(y);var A=this.createMergeNode(n,[n+"_drop_shadow_4",a]);t.appendChild(A)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(e[0]*255),Math.round(e[1]*255),Math.round(e[2]*255)))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var r=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*degToRads,a=r*Math.cos(n),s=r*Math.sin(n);this.feOffset.setAttribute("dx",a),this.feOffset.setAttribute("dy",s)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,r){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=r,r.matteElement=createNS("g"),r.matteElement.appendChild(r.layerElement),r.matteElement.appendChild(r.transformedElement),r.baseElement=r.matteElement}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,r=_svgMatteSymbols.length;e<r;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var r=t.layerElement.parentNode;if(r){for(var n=r.children,a=0,s=n.length;a<s&&n[a]!==t.layerElement;)a+=1;var o;a<=s-2&&(o=n[a+1]);var c=createNS("use");c.setAttribute("href","#"+e),o?r.insertBefore(c,o):r.appendChild(c)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var r=createElementID(),n=createNS("mask");n.setAttribute("id",e.layerId),n.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var a=t.globalData.defs;a.appendChild(n);var s=createNS("symbol");s.setAttribute("id",r),this.replaceInParent(e,r),s.appendChild(e.layerElement),a.appendChild(s);var o=createNS("use");o.setAttribute("href","#"+r),n.appendChild(o),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,r=0,n=e.length;r<n;)e[r]&&e[r].data.ind===t&&this.setElementAsMask(this.elem,e[r]),r+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(t,e,r,n){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var a=createNS("feGaussianBlur");a.setAttribute("result",n),t.appendChild(a),this.feGaussianBlur=a}SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3,r=this.filterManager.effectElements[0].p.v*e,n=this.filterManager.effectElements[1].p.v,a=n==3?0:r,s=n==2?0:r;this.feGaussianBlur.setAttribute("stdDeviation",a+" "+s);var o=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",o)}};function TransformEffect(){}TransformEffect.prototype.init=function(t){this.effectsManager=t,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(t){if(this._opMdf=!1,this._mdf=!1,t||this.effectsManager._mdf){var e=this.effectsManager.effectElements,r=e[0].p.v,n=e[1].p.v,a=e[2].p.v===1,s=e[3].p.v,o=a?s:e[4].p.v,c=e[5].p.v,d=e[6].p.v,m=e[7].p.v;this.matrix.reset(),this.matrix.translate(-r[0],-r[1],r[2]),this.matrix.scale(o*.01,s*.01,1),this.matrix.rotate(-m*degToRads),this.matrix.skewFromAxis(-c*degToRads,(d+90)*degToRads),this.matrix.translate(n[0],n[1],0),this._mdf=!0,this.opacity!==e[8].p.v&&(this.opacity=e[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(t,e){this.init(e)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(t){this.init(t)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})}(lottie$2,lottie$2.exports)),lottie$2.exports}var lottieExports=requireLottie();const lottie=getDefaultExportFromCjs(lottieExports);function _arrayLikeToArray(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _defineProperty(t,e,r){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _iterableToArrayLimit(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,m=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(y){m=!0,a=y}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(m)throw a}}return c}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(n){_defineProperty(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _objectWithoutProperties(t,e){if(t==null)return{};var r,n,a=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _toPrimitive(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return typeof e=="symbol"?e:e+""}function _unsupportedIterableToArray(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function t(e,r){var n=e.animationData,a=e.loop,s=e.autoplay,o=e.initialSegment,c=e.onComplete,d=e.onLoopComplete,m=e.onEnterFrame,y=e.onSegmentStart,A=e.onConfigReady,P=e.onDataReady,Z=e.onDataFailed,me=e.onLoadedImages,_e=e.onDOMLoaded,Ge=e.onDestroy;e.lottieRef,e.renderer,e.name,e.assetsPath,e.rendererSettings;var ve=_objectWithoutProperties(e,_excluded$1),He=reactExports.useState(!1),De=_slicedToArray(He,2),Xe=De[0],Bs=De[1],wt=reactExports.useRef(),li=reactExports.useRef(null),An=function(){var wh;(wh=wt.current)===null||wh===void 0||wh.play()},Os=function(){var wh;(wh=wt.current)===null||wh===void 0||wh.stop()},vh=function(){var wh;(wh=wt.current)===null||wh===void 0||wh.pause()},Fc=function(wh){var uf;(uf=wt.current)===null||uf===void 0||uf.setSpeed(wh)},Hc=function(wh,uf){var i1;(i1=wt.current)===null||i1===void 0||i1.goToAndPlay(wh,uf)},qc=function(wh,uf){var i1;(i1=wt.current)===null||i1===void 0||i1.goToAndStop(wh,uf)},e1=function(wh){var uf;(uf=wt.current)===null||uf===void 0||uf.setDirection(wh)},df=function(wh,uf){var i1;(i1=wt.current)===null||i1===void 0||i1.playSegments(wh,uf)},So=function(wh){var uf;(uf=wt.current)===null||uf===void 0||uf.setSubframe(wh)},th=function(wh){var uf;return(uf=wt.current)===null||uf===void 0?void 0:uf.getDuration(wh)},Rs=function(){var wh;(wh=wt.current)===null||wh===void 0||wh.destroy(),wt.current=void 0},Ko=function(){var wh=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},uf;if(li.current){(uf=wt.current)===null||uf===void 0||uf.destroy();var i1=_objectSpread2(_objectSpread2(_objectSpread2({},e),wh),{},{container:li.current});return wt.current=lottie.loadAnimation(i1),Bs(!!wt.current),function(){var u1;(u1=wt.current)===null||u1===void 0||u1.destroy(),wt.current=void 0}}};reactExports.useEffect(function(){var yh=Ko();return function(){return yh?.()}},[n,a]),reactExports.useEffect(function(){wt.current&&(wt.current.autoplay=!!s)},[s]),reactExports.useEffect(function(){if(wt.current){if(!o){wt.current.resetSegments(!0);return}!Array.isArray(o)||!o.length||((wt.current.currentRawFrame<o[0]||wt.current.currentRawFrame>o[1])&&(wt.current.currentRawFrame=o[0]),wt.current.setSegment(o[0],o[1]))}},[o]),reactExports.useEffect(function(){var yh=[{name:"complete",handler:c},{name:"loopComplete",handler:d},{name:"enterFrame",handler:m},{name:"segmentStart",handler:y},{name:"config_ready",handler:A},{name:"data_ready",handler:P},{name:"data_failed",handler:Z},{name:"loaded_images",handler:me},{name:"DOMLoaded",handler:_e},{name:"destroy",handler:Ge}],wh=yh.filter(function(i1){return i1.handler!=null});if(wh.length){var uf=wh.map(function(i1){var u1;return(u1=wt.current)===null||u1===void 0||u1.addEventListener(i1.name,i1.handler),function(){var h1;(h1=wt.current)===null||h1===void 0||h1.removeEventListener(i1.name,i1.handler)}});return function(){uf.forEach(function(i1){return i1()})}}},[c,d,m,y,A,P,Z,me,_e,Ge]);var Vc=React.createElement("div",_objectSpread2({style:r,ref:li},ve));return{View:Vc,play:An,stop:Os,pause:vh,setSpeed:Fc,goToAndStop:qc,goToAndPlay:Hc,setDirection:e1,playSegments:df,setSubframe:So,getDuration:th,destroy:Rs,animationContainerRef:li,animationLoaded:Xe,animationItem:wt.current}};function getContainerVisibility(t){var e=t.getBoundingClientRect(),r=e.top,n=e.height,a=window.innerHeight-r,s=window.innerHeight+n;return a/s}function getContainerCursorPosition(t,e,r){var n=t.getBoundingClientRect(),a=n.top,s=n.left,o=n.width,c=n.height,d=(e-s)/o,m=(r-a)/c;return{x:d,y:m}}var useInitInteractivity=function t(e){var r=e.wrapperRef,n=e.animationItem,a=e.mode,s=e.actions;reactExports.useEffect(function(){var o=r.current;if(!(!o||!n||!s.length)){n.stop();var c=function(){var y=null,A=function(){var Z=getContainerVisibility(o),me=s.find(function(Ge){var ve=Ge.visibility;return ve&&Z>=ve[0]&&Z<=ve[1]});if(me){if(me.type==="seek"&&me.visibility&&me.frames.length===2){var _e=me.frames[0]+Math.ceil((Z-me.visibility[0])/(me.visibility[1]-me.visibility[0])*me.frames[1]);//! goToAndStop must be relative to the start of the current segment
n.goToAndStop(_e-n.firstFrame-1,!0)}me.type==="loop"&&(y===null||y!==me.frames||n.isPaused)&&(n.playSegments(me.frames,!0),y=me.frames),me.type==="play"&&n.isPaused&&(n.resetSegments(!0),n.play()),me.type==="stop"&&n.goToAndStop(me.frames[0]-n.firstFrame-1,!0)}};return document.addEventListener("scroll",A),function(){document.removeEventListener("scroll",A)}},d=function(){var y=function(me,_e){var Ge=me,ve=_e;if(Ge!==-1&&ve!==-1){var He=getContainerCursorPosition(o,Ge,ve);Ge=He.x,ve=He.y}var De=s.find(function(wt){var li=wt.position;return li&&Array.isArray(li.x)&&Array.isArray(li.y)?Ge>=li.x[0]&&Ge<=li.x[1]&&ve>=li.y[0]&&ve<=li.y[1]:li&&!Number.isNaN(li.x)&&!Number.isNaN(li.y)?Ge===li.x&&ve===li.y:!1});if(De){if(De.type==="seek"&&De.position&&Array.isArray(De.position.x)&&Array.isArray(De.position.y)&&De.frames.length===2){var Xe=(Ge-De.position.x[0])/(De.position.x[1]-De.position.x[0]),Bs=(ve-De.position.y[0])/(De.position.y[1]-De.position.y[0]);n.playSegments(De.frames,!0),n.goToAndStop(Math.ceil((Xe+Bs)/2*(De.frames[1]-De.frames[0])),!0)}De.type==="loop"&&n.playSegments(De.frames,!0),De.type==="play"&&(n.isPaused&&n.resetSegments(!1),n.playSegments(De.frames)),De.type==="stop"&&n.goToAndStop(De.frames[0],!0)}},A=function(me){y(me.clientX,me.clientY)},P=function(){y(-1,-1)};return o.addEventListener("mousemove",A),o.addEventListener("mouseout",P),function(){o.removeEventListener("mousemove",A),o.removeEventListener("mouseout",P)}};switch(a){case"scroll":return c();case"cursor":return d()}}},[a,n])},useLottieInteractivity=function t(e){var r=e.actions,n=e.mode,a=e.lottieObj,s=a.animationItem,o=a.View,c=a.animationContainerRef;return useInitInteractivity({actions:r,animationItem:s,mode:n,wrapperRef:c}),o},_excluded=["style","interactivity"],Lottie=function t(e){var r,n,a,s=e.style,o=e.interactivity,c=_objectWithoutProperties(e,_excluded),d=useLottie(c,s),m=d.View,y=d.play,A=d.stop,P=d.pause,Z=d.setSpeed,me=d.goToAndStop,_e=d.goToAndPlay,Ge=d.setDirection,ve=d.playSegments,He=d.setSubframe,De=d.getDuration,Xe=d.destroy,Bs=d.animationContainerRef,wt=d.animationLoaded,li=d.animationItem;return reactExports.useEffect(function(){e.lottieRef&&(e.lottieRef.current={play:y,stop:A,pause:P,setSpeed:Z,goToAndPlay:_e,goToAndStop:me,setDirection:Ge,playSegments:ve,setSubframe:He,getDuration:De,destroy:Xe,animationContainerRef:Bs,animationLoaded:wt,animationItem:li})},[(r=e.lottieRef)===null||r===void 0?void 0:r.current]),useLottieInteractivity({lottieObj:{View:m,play:y,stop:A,pause:P,setSpeed:Z,goToAndStop:me,goToAndPlay:_e,setDirection:Ge,playSegments:ve,setSubframe:He,getDuration:De,destroy:Xe,animationContainerRef:Bs,animationLoaded:wt,animationItem:li},actions:(n=o?.actions)!==null&&n!==void 0?n:[],mode:(a=o?.mode)!==null&&a!==void 0?a:"scroll"})};const v$1="5.5.5",fr$1=25,ip$1=0,op$2=79,w=300,h=150,nm$1="Loading-2",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"icon 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:39,s:[-90]},{t:79,s:[270]}],ix:10},p:{a:0,k:[150,75,0],ix:2},a:{a:0,k:[53,53,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[28,-15.464],[15.464,28],[-28,15.464],[-15.464,-28]],o:[[28,15.464],[-15.464,28],[-28,-15.464],[15.464,-28]],v:[[28,0],[0,28],[-28,0],[0,-28]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1,_render:!0},{ty:"st",c:{a:0,k:[.349,.3529,.3647,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:10,ix:5},lc:2,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1,_render:!0},{ty:"tr",p:{a:0,k:[53,53],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform",_render:!0}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1,_render:!0},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:51,s:[0]},{t:79,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:39,s:[0]},{t:64,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1,_render:!0}],ip:39,op:79,st:39,bm:0,completed:!0},{ddd:0,ind:2,ty:4,nm:"icon",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[-90]},{t:40,s:[270]}],ix:10},p:{a:0,k:[150,75,0],ix:2},a:{a:0,k:[53,53,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[28,-15.464],[15.464,28],[-28,15.464],[-15.464,-28]],o:[[28,15.464],[-15.464,28],[-28,-15.464],[15.464,-28]],v:[[28,0],[0,28],[-28,0],[0,-28]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1,_render:!0},{ty:"st",c:{a:0,k:[.349,.3529,.3647,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:10,ix:5},lc:2,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1,_render:!0},{ty:"tr",p:{a:0,k:[53,53],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform",_render:!0}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1,_render:!0},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:12,s:[0]},{t:40,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:25,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1,_render:!0}],ip:0,op:40,st:0,bm:0,completed:!0}],markers=[],__complete=!0,loadingAnim={v:v$1,fr:fr$1,ip:ip$1,op:op$2,w,h,nm:nm$1,ddd,assets,layers,markers,__complete};class SourceLocation{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new SourceLocation(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Token{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new Token(r,SourceLocation.range(this,e))}}class ParseError{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,s,o=r&&r.loc;if(o&&o.start<=o.end){var c=o.lexer.input;a=o.start,s=o.end,a===c.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=c.slice(a,s).replace(/[^]/g,"$&̲"),m;a>15?m="…"+c.slice(a-15,a):m=c.slice(0,a);var y;s+15<c.length?y=c.slice(s,s+15)+"…":y=c.slice(s),n+=m+d+y}var A=new Error(n);return A.name="ParseError",A.__proto__=ParseError.prototype,A.position=a,a!=null&&s!=null&&(A.length=s-a),A.rawMessage=e,A}}ParseError.prototype.__proto__=Error.prototype;var contains=function t(e,r){return e.indexOf(r)!==-1},deflt=function t(e,r){return e===void 0?r:e},uppercase=/([A-Z])/g,hyphenate=function t(e){return e.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape(t){return String(t).replace(ESCAPE_REGEX,e=>ESCAPE_LOOKUP[e])}var getBaseElem=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},isCharacterBox=function t(e){var r=getBaseElem(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},assert=function t(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},protocolFromUrl=function t(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},utils={contains,deflt,escape,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl},SETTINGS_SCHEMA={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function getDefaultValue(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class Settings{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in SETTINGS_SCHEMA)if(SETTINGS_SCHEMA.hasOwnProperty(r)){var n=SETTINGS_SCHEMA[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:getDefaultValue(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=utils.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Style{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D=0,Dc$1=1,T$1=2,Tc$1=3,S$1=4,Sc$1=5,SS=6,SSc=7,styles=[new Style(D,0,!1),new Style(Dc$1,0,!0),new Style(T$1,1,!1),new Style(Tc$1,1,!0),new Style(S$1,2,!1),new Style(Sc$1,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S$1,Sc$1,S$1,Sc$1,SS,SSc,SS,SSc],sub=[Sc$1,Sc$1,Sc$1,Sc$1,SSc,SSc,SSc,SSc],fracNum=[T$1,Tc$1,S$1,Sc$1,SS,SSc,SS,SSc],fracDen=[Tc$1,Tc$1,Sc$1,Sc$1,SSc,SSc,SSc,SSc],cramp=[Dc$1,Dc$1,Tc$1,Tc$1,Sc$1,Sc$1,SSc,SSc],text$1=[D,Dc$1,T$1,Tc$1,T$1,Tc$1,T$1,Tc$1],Style$1={DISPLAY:styles[D],TEXT:styles[T$1],SCRIPT:styles[S$1],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(t){for(var e=0;e<scriptData.length;e++)for(var r=scriptData[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var allBlocks=[];scriptData.forEach(t=>t.blocks.forEach(e=>allBlocks.push(...e)));function supportedCodepoint(t){for(var e=0;e<allBlocks.length;e+=2)if(t>=allBlocks[e]&&t<=allBlocks[e+1])return!0;return!1}var hLinePad=80,sqrtMain=function t(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},sqrtSize1=function t(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},sqrtSize2=function t(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},sqrtSize3=function t(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},sqrtSize4=function t(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},phasePath=function t(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},sqrtTall=function t(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},sqrtPath=function t(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=sqrtMain(r,hLinePad);break;case"sqrtSize1":a=sqrtSize1(r,hLinePad);break;case"sqrtSize2":a=sqrtSize2(r,hLinePad);break;case"sqrtSize3":a=sqrtSize3(r,hLinePad);break;case"sqrtSize4":a=sqrtSize4(r,hLinePad);break;case"sqrtTall":a=sqrtTall(r,hLinePad,n)}return a},innerPath=function t(e,r){switch(e){case"⎜":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"∣":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"∥":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"⎟":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"⎢":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"⎥":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"⎪":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"⏐":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"‖":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},path={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function t(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class DocumentFragment{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return utils.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sigmasAndXis={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},extraCharacterMap={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function setFontMetrics(t,e){fontMetricsData[t]=e}function getCharacterMetrics(t,e,r){if(!fontMetricsData[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=fontMetricsData[e][n];if(!a&&t[0]in extraCharacterMap&&(n=extraCharacterMap[t[0]].charCodeAt(0),a=fontMetricsData[e][n]),!a&&r==="text"&&supportedCodepoint(n)&&(a=fontMetricsData[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var fontMetricsBySizeIndex={};function getGlobalMetrics(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!fontMetricsBySizeIndex[e]){var r=fontMetricsBySizeIndex[e]={cssEmPerMu:sigmasAndXis.quad[e]/18};for(var n in sigmasAndXis)sigmasAndXis.hasOwnProperty(n)&&(r[n]=sigmasAndXis[n][e])}return fontMetricsBySizeIndex[e]}var sizeStyleMap=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],sizeMultipliers=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],sizeAtStyle=function t(e,r){return r.size<2?e:sizeStyleMap[e-1][r.size-1]};class Options{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Options.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=sizeMultipliers[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Options(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:sizeAtStyle(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:sizeMultipliers[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=sizeAtStyle(Options.BASESIZE,e);return this.size===r&&this.textSize===Options.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Options.BASESIZE?["sizing","reset-size"+this.size,"size"+Options.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=getGlobalMetrics(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Options.BASESIZE=6;var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function t(e){return typeof e!="string"&&(e=e.unit),e in ptPerUnit||e in relativeUnit||e==="ex"},calculateSize=function t(e,r){var n;if(e.unit in ptPerUnit)n=ptPerUnit[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},makeEm=function t(e){return+e.toFixed(4)+"em"},createClass=function t(e){return e.filter(r=>r).join(" ")},initNode=function t(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},toNode=function t(e){var r=document.createElement(e);r.className=createClass(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r},invalidAttributeNameRegex=/[\s"'>/=\x00-\x1f]/,toMarkup=function t(e){var r="<"+e;this.classes.length&&(r+=' class="'+utils.escape(createClass(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=utils.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+utils.escape(n)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(invalidAttributeNameRegex.test(s))throw new ParseError("Invalid attribute name '"+s+"'");r+=" "+s+'="'+utils.escape(this.attributes[s])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+e+">",r};class Span{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+utils.escape(this.src)+'"'+(' alt="'+utils.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=utils.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+utils.escape(r)+'"'),e+="'/>",e}}var iCombinations={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class SymbolNode{constructor(e,r,n,a,s,o,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=s||0,this.width=o||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var m=scriptFromCodepoint(this.text.charCodeAt(0));m&&this.classes.push(m+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=createClass(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=utils.escape(createClass(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=utils.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+utils.escape(n)+'"');var s=utils.escape(this.text);return e?(r+=">",r+=s,r+="</span>",r):s}}class SvgNode{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+utils.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class PathNode{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",path[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path[this.pathName])+'"/>'}}class LineNode{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+utils.escape(this.attributes[r])+'"');return e+="/>",e}}function assertSymbolDomNode(t){if(t instanceof SymbolNode)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function assertSpan(t){if(t instanceof Span)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var ATOMS={bin:1,close:1,inner:1,open:1,punct:1,rel:1},NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(t,e,r,n,a,s){symbols[t][a]={font:e,group:r,replace:n},s&&n&&(symbols[t][n]=symbols[t][a])}var math="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op$1="op-token",open="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math,main,rel,"≡","\\equiv",!0);defineSymbol(math,main,rel,"≺","\\prec",!0);defineSymbol(math,main,rel,"≻","\\succ",!0);defineSymbol(math,main,rel,"∼","\\sim",!0);defineSymbol(math,main,rel,"⊥","\\perp");defineSymbol(math,main,rel,"⪯","\\preceq",!0);defineSymbol(math,main,rel,"⪰","\\succeq",!0);defineSymbol(math,main,rel,"≃","\\simeq",!0);defineSymbol(math,main,rel,"∣","\\mid",!0);defineSymbol(math,main,rel,"≪","\\ll",!0);defineSymbol(math,main,rel,"≫","\\gg",!0);defineSymbol(math,main,rel,"≍","\\asymp",!0);defineSymbol(math,main,rel,"∥","\\parallel");defineSymbol(math,main,rel,"⋈","\\bowtie",!0);defineSymbol(math,main,rel,"⌣","\\smile",!0);defineSymbol(math,main,rel,"⊑","\\sqsubseteq",!0);defineSymbol(math,main,rel,"⊒","\\sqsupseteq",!0);defineSymbol(math,main,rel,"≐","\\doteq",!0);defineSymbol(math,main,rel,"⌢","\\frown",!0);defineSymbol(math,main,rel,"∋","\\ni",!0);defineSymbol(math,main,rel,"∝","\\propto",!0);defineSymbol(math,main,rel,"⊢","\\vdash",!0);defineSymbol(math,main,rel,"⊣","\\dashv",!0);defineSymbol(math,main,rel,"∋","\\owns");defineSymbol(math,main,punct,".","\\ldotp");defineSymbol(math,main,punct,"⋅","\\cdotp");defineSymbol(math,main,textord,"#","\\#");defineSymbol(text,main,textord,"#","\\#");defineSymbol(math,main,textord,"&","\\&");defineSymbol(text,main,textord,"&","\\&");defineSymbol(math,main,textord,"ℵ","\\aleph",!0);defineSymbol(math,main,textord,"∀","\\forall",!0);defineSymbol(math,main,textord,"ℏ","\\hbar",!0);defineSymbol(math,main,textord,"∃","\\exists",!0);defineSymbol(math,main,textord,"∇","\\nabla",!0);defineSymbol(math,main,textord,"♭","\\flat",!0);defineSymbol(math,main,textord,"ℓ","\\ell",!0);defineSymbol(math,main,textord,"♮","\\natural",!0);defineSymbol(math,main,textord,"♣","\\clubsuit",!0);defineSymbol(math,main,textord,"℘","\\wp",!0);defineSymbol(math,main,textord,"♯","\\sharp",!0);defineSymbol(math,main,textord,"♢","\\diamondsuit",!0);defineSymbol(math,main,textord,"ℜ","\\Re",!0);defineSymbol(math,main,textord,"♡","\\heartsuit",!0);defineSymbol(math,main,textord,"ℑ","\\Im",!0);defineSymbol(math,main,textord,"♠","\\spadesuit",!0);defineSymbol(math,main,textord,"§","\\S",!0);defineSymbol(text,main,textord,"§","\\S");defineSymbol(math,main,textord,"¶","\\P",!0);defineSymbol(text,main,textord,"¶","\\P");defineSymbol(math,main,textord,"†","\\dag");defineSymbol(text,main,textord,"†","\\dag");defineSymbol(text,main,textord,"†","\\textdagger");defineSymbol(math,main,textord,"‡","\\ddag");defineSymbol(text,main,textord,"‡","\\ddag");defineSymbol(text,main,textord,"‡","\\textdaggerdbl");defineSymbol(math,main,close,"⎱","\\rmoustache",!0);defineSymbol(math,main,open,"⎰","\\lmoustache",!0);defineSymbol(math,main,close,"⟯","\\rgroup",!0);defineSymbol(math,main,open,"⟮","\\lgroup",!0);defineSymbol(math,main,bin,"∓","\\mp",!0);defineSymbol(math,main,bin,"⊖","\\ominus",!0);defineSymbol(math,main,bin,"⊎","\\uplus",!0);defineSymbol(math,main,bin,"⊓","\\sqcap",!0);defineSymbol(math,main,bin,"∗","\\ast");defineSymbol(math,main,bin,"⊔","\\sqcup",!0);defineSymbol(math,main,bin,"◯","\\bigcirc",!0);defineSymbol(math,main,bin,"∙","\\bullet",!0);defineSymbol(math,main,bin,"‡","\\ddagger");defineSymbol(math,main,bin,"≀","\\wr",!0);defineSymbol(math,main,bin,"⨿","\\amalg");defineSymbol(math,main,bin,"&","\\And");defineSymbol(math,main,rel,"⟵","\\longleftarrow",!0);defineSymbol(math,main,rel,"⇐","\\Leftarrow",!0);defineSymbol(math,main,rel,"⟸","\\Longleftarrow",!0);defineSymbol(math,main,rel,"⟶","\\longrightarrow",!0);defineSymbol(math,main,rel,"⇒","\\Rightarrow",!0);defineSymbol(math,main,rel,"⟹","\\Longrightarrow",!0);defineSymbol(math,main,rel,"↔","\\leftrightarrow",!0);defineSymbol(math,main,rel,"⟷","\\longleftrightarrow",!0);defineSymbol(math,main,rel,"⇔","\\Leftrightarrow",!0);defineSymbol(math,main,rel,"⟺","\\Longleftrightarrow",!0);defineSymbol(math,main,rel,"↦","\\mapsto",!0);defineSymbol(math,main,rel,"⟼","\\longmapsto",!0);defineSymbol(math,main,rel,"↗","\\nearrow",!0);defineSymbol(math,main,rel,"↩","\\hookleftarrow",!0);defineSymbol(math,main,rel,"↪","\\hookrightarrow",!0);defineSymbol(math,main,rel,"↘","\\searrow",!0);defineSymbol(math,main,rel,"↼","\\leftharpoonup",!0);defineSymbol(math,main,rel,"⇀","\\rightharpoonup",!0);defineSymbol(math,main,rel,"↙","\\swarrow",!0);defineSymbol(math,main,rel,"↽","\\leftharpoondown",!0);defineSymbol(math,main,rel,"⇁","\\rightharpoondown",!0);defineSymbol(math,main,rel,"↖","\\nwarrow",!0);defineSymbol(math,main,rel,"⇌","\\rightleftharpoons",!0);defineSymbol(math,ams,rel,"≮","\\nless",!0);defineSymbol(math,ams,rel,"","\\@nleqslant");defineSymbol(math,ams,rel,"","\\@nleqq");defineSymbol(math,ams,rel,"⪇","\\lneq",!0);defineSymbol(math,ams,rel,"≨","\\lneqq",!0);defineSymbol(math,ams,rel,"","\\@lvertneqq");defineSymbol(math,ams,rel,"⋦","\\lnsim",!0);defineSymbol(math,ams,rel,"⪉","\\lnapprox",!0);defineSymbol(math,ams,rel,"⊀","\\nprec",!0);defineSymbol(math,ams,rel,"⋠","\\npreceq",!0);defineSymbol(math,ams,rel,"⋨","\\precnsim",!0);defineSymbol(math,ams,rel,"⪹","\\precnapprox",!0);defineSymbol(math,ams,rel,"≁","\\nsim",!0);defineSymbol(math,ams,rel,"","\\@nshortmid");defineSymbol(math,ams,rel,"∤","\\nmid",!0);defineSymbol(math,ams,rel,"⊬","\\nvdash",!0);defineSymbol(math,ams,rel,"⊭","\\nvDash",!0);defineSymbol(math,ams,rel,"⋪","\\ntriangleleft");defineSymbol(math,ams,rel,"⋬","\\ntrianglelefteq",!0);defineSymbol(math,ams,rel,"⊊","\\subsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneq");defineSymbol(math,ams,rel,"⫋","\\subsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneqq");defineSymbol(math,ams,rel,"≯","\\ngtr",!0);defineSymbol(math,ams,rel,"","\\@ngeqslant");defineSymbol(math,ams,rel,"","\\@ngeqq");defineSymbol(math,ams,rel,"⪈","\\gneq",!0);defineSymbol(math,ams,rel,"≩","\\gneqq",!0);defineSymbol(math,ams,rel,"","\\@gvertneqq");defineSymbol(math,ams,rel,"⋧","\\gnsim",!0);defineSymbol(math,ams,rel,"⪊","\\gnapprox",!0);defineSymbol(math,ams,rel,"⊁","\\nsucc",!0);defineSymbol(math,ams,rel,"⋡","\\nsucceq",!0);defineSymbol(math,ams,rel,"⋩","\\succnsim",!0);defineSymbol(math,ams,rel,"⪺","\\succnapprox",!0);defineSymbol(math,ams,rel,"≆","\\ncong",!0);defineSymbol(math,ams,rel,"","\\@nshortparallel");defineSymbol(math,ams,rel,"∦","\\nparallel",!0);defineSymbol(math,ams,rel,"⊯","\\nVDash",!0);defineSymbol(math,ams,rel,"⋫","\\ntriangleright");defineSymbol(math,ams,rel,"⋭","\\ntrianglerighteq",!0);defineSymbol(math,ams,rel,"","\\@nsupseteqq");defineSymbol(math,ams,rel,"⊋","\\supsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneq");defineSymbol(math,ams,rel,"⫌","\\supsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneqq");defineSymbol(math,ams,rel,"⊮","\\nVdash",!0);defineSymbol(math,ams,rel,"⪵","\\precneqq",!0);defineSymbol(math,ams,rel,"⪶","\\succneqq",!0);defineSymbol(math,ams,rel,"","\\@nsubseteqq");defineSymbol(math,ams,bin,"⊴","\\unlhd");defineSymbol(math,ams,bin,"⊵","\\unrhd");defineSymbol(math,ams,rel,"↚","\\nleftarrow",!0);defineSymbol(math,ams,rel,"↛","\\nrightarrow",!0);defineSymbol(math,ams,rel,"⇍","\\nLeftarrow",!0);defineSymbol(math,ams,rel,"⇏","\\nRightarrow",!0);defineSymbol(math,ams,rel,"↮","\\nleftrightarrow",!0);defineSymbol(math,ams,rel,"⇎","\\nLeftrightarrow",!0);defineSymbol(math,ams,rel,"△","\\vartriangle");defineSymbol(math,ams,textord,"ℏ","\\hslash");defineSymbol(math,ams,textord,"▽","\\triangledown");defineSymbol(math,ams,textord,"◊","\\lozenge");defineSymbol(math,ams,textord,"Ⓢ","\\circledS");defineSymbol(math,ams,textord,"®","\\circledR");defineSymbol(text,ams,textord,"®","\\circledR");defineSymbol(math,ams,textord,"∡","\\measuredangle",!0);defineSymbol(math,ams,textord,"∄","\\nexists");defineSymbol(math,ams,textord,"℧","\\mho");defineSymbol(math,ams,textord,"Ⅎ","\\Finv",!0);defineSymbol(math,ams,textord,"⅁","\\Game",!0);defineSymbol(math,ams,textord,"‵","\\backprime");defineSymbol(math,ams,textord,"▲","\\blacktriangle");defineSymbol(math,ams,textord,"▼","\\blacktriangledown");defineSymbol(math,ams,textord,"■","\\blacksquare");defineSymbol(math,ams,textord,"⧫","\\blacklozenge");defineSymbol(math,ams,textord,"★","\\bigstar");defineSymbol(math,ams,textord,"∢","\\sphericalangle",!0);defineSymbol(math,ams,textord,"∁","\\complement",!0);defineSymbol(math,ams,textord,"ð","\\eth",!0);defineSymbol(text,main,textord,"ð","ð");defineSymbol(math,ams,textord,"╱","\\diagup");defineSymbol(math,ams,textord,"╲","\\diagdown");defineSymbol(math,ams,textord,"□","\\square");defineSymbol(math,ams,textord,"□","\\Box");defineSymbol(math,ams,textord,"◊","\\Diamond");defineSymbol(math,ams,textord,"¥","\\yen",!0);defineSymbol(text,ams,textord,"¥","\\yen",!0);defineSymbol(math,ams,textord,"✓","\\checkmark",!0);defineSymbol(text,ams,textord,"✓","\\checkmark");defineSymbol(math,ams,textord,"ℶ","\\beth",!0);defineSymbol(math,ams,textord,"ℸ","\\daleth",!0);defineSymbol(math,ams,textord,"ℷ","\\gimel",!0);defineSymbol(math,ams,textord,"ϝ","\\digamma",!0);defineSymbol(math,ams,textord,"ϰ","\\varkappa");defineSymbol(math,ams,open,"┌","\\@ulcorner",!0);defineSymbol(math,ams,close,"┐","\\@urcorner",!0);defineSymbol(math,ams,open,"└","\\@llcorner",!0);defineSymbol(math,ams,close,"┘","\\@lrcorner",!0);defineSymbol(math,ams,rel,"≦","\\leqq",!0);defineSymbol(math,ams,rel,"⩽","\\leqslant",!0);defineSymbol(math,ams,rel,"⪕","\\eqslantless",!0);defineSymbol(math,ams,rel,"≲","\\lesssim",!0);defineSymbol(math,ams,rel,"⪅","\\lessapprox",!0);defineSymbol(math,ams,rel,"≊","\\approxeq",!0);defineSymbol(math,ams,bin,"⋖","\\lessdot");defineSymbol(math,ams,rel,"⋘","\\lll",!0);defineSymbol(math,ams,rel,"≶","\\lessgtr",!0);defineSymbol(math,ams,rel,"⋚","\\lesseqgtr",!0);defineSymbol(math,ams,rel,"⪋","\\lesseqqgtr",!0);defineSymbol(math,ams,rel,"≑","\\doteqdot");defineSymbol(math,ams,rel,"≓","\\risingdotseq",!0);defineSymbol(math,ams,rel,"≒","\\fallingdotseq",!0);defineSymbol(math,ams,rel,"∽","\\backsim",!0);defineSymbol(math,ams,rel,"⋍","\\backsimeq",!0);defineSymbol(math,ams,rel,"⫅","\\subseteqq",!0);defineSymbol(math,ams,rel,"⋐","\\Subset",!0);defineSymbol(math,ams,rel,"⊏","\\sqsubset",!0);defineSymbol(math,ams,rel,"≼","\\preccurlyeq",!0);defineSymbol(math,ams,rel,"⋞","\\curlyeqprec",!0);defineSymbol(math,ams,rel,"≾","\\precsim",!0);defineSymbol(math,ams,rel,"⪷","\\precapprox",!0);defineSymbol(math,ams,rel,"⊲","\\vartriangleleft");defineSymbol(math,ams,rel,"⊴","\\trianglelefteq");defineSymbol(math,ams,rel,"⊨","\\vDash",!0);defineSymbol(math,ams,rel,"⊪","\\Vvdash",!0);defineSymbol(math,ams,rel,"⌣","\\smallsmile");defineSymbol(math,ams,rel,"⌢","\\smallfrown");defineSymbol(math,ams,rel,"≏","\\bumpeq",!0);defineSymbol(math,ams,rel,"≎","\\Bumpeq",!0);defineSymbol(math,ams,rel,"≧","\\geqq",!0);defineSymbol(math,ams,rel,"⩾","\\geqslant",!0);defineSymbol(math,ams,rel,"⪖","\\eqslantgtr",!0);defineSymbol(math,ams,rel,"≳","\\gtrsim",!0);defineSymbol(math,ams,rel,"⪆","\\gtrapprox",!0);defineSymbol(math,ams,bin,"⋗","\\gtrdot");defineSymbol(math,ams,rel,"⋙","\\ggg",!0);defineSymbol(math,ams,rel,"≷","\\gtrless",!0);defineSymbol(math,ams,rel,"⋛","\\gtreqless",!0);defineSymbol(math,ams,rel,"⪌","\\gtreqqless",!0);defineSymbol(math,ams,rel,"≖","\\eqcirc",!0);defineSymbol(math,ams,rel,"≗","\\circeq",!0);defineSymbol(math,ams,rel,"≜","\\triangleq",!0);defineSymbol(math,ams,rel,"∼","\\thicksim");defineSymbol(math,ams,rel,"≈","\\thickapprox");defineSymbol(math,ams,rel,"⫆","\\supseteqq",!0);defineSymbol(math,ams,rel,"⋑","\\Supset",!0);defineSymbol(math,ams,rel,"⊐","\\sqsupset",!0);defineSymbol(math,ams,rel,"≽","\\succcurlyeq",!0);defineSymbol(math,ams,rel,"⋟","\\curlyeqsucc",!0);defineSymbol(math,ams,rel,"≿","\\succsim",!0);defineSymbol(math,ams,rel,"⪸","\\succapprox",!0);defineSymbol(math,ams,rel,"⊳","\\vartriangleright");defineSymbol(math,ams,rel,"⊵","\\trianglerighteq");defineSymbol(math,ams,rel,"⊩","\\Vdash",!0);defineSymbol(math,ams,rel,"∣","\\shortmid");defineSymbol(math,ams,rel,"∥","\\shortparallel");defineSymbol(math,ams,rel,"≬","\\between",!0);defineSymbol(math,ams,rel,"⋔","\\pitchfork",!0);defineSymbol(math,ams,rel,"∝","\\varpropto");defineSymbol(math,ams,rel,"◀","\\blacktriangleleft");defineSymbol(math,ams,rel,"∴","\\therefore",!0);defineSymbol(math,ams,rel,"∍","\\backepsilon");defineSymbol(math,ams,rel,"▶","\\blacktriangleright");defineSymbol(math,ams,rel,"∵","\\because",!0);defineSymbol(math,ams,rel,"⋘","\\llless");defineSymbol(math,ams,rel,"⋙","\\gggtr");defineSymbol(math,ams,bin,"⊲","\\lhd");defineSymbol(math,ams,bin,"⊳","\\rhd");defineSymbol(math,ams,rel,"≂","\\eqsim",!0);defineSymbol(math,main,rel,"⋈","\\Join");defineSymbol(math,ams,rel,"≑","\\Doteq",!0);defineSymbol(math,ams,bin,"∔","\\dotplus",!0);defineSymbol(math,ams,bin,"∖","\\smallsetminus");defineSymbol(math,ams,bin,"⋒","\\Cap",!0);defineSymbol(math,ams,bin,"⋓","\\Cup",!0);defineSymbol(math,ams,bin,"⩞","\\doublebarwedge",!0);defineSymbol(math,ams,bin,"⊟","\\boxminus",!0);defineSymbol(math,ams,bin,"⊞","\\boxplus",!0);defineSymbol(math,ams,bin,"⋇","\\divideontimes",!0);defineSymbol(math,ams,bin,"⋉","\\ltimes",!0);defineSymbol(math,ams,bin,"⋊","\\rtimes",!0);defineSymbol(math,ams,bin,"⋋","\\leftthreetimes",!0);defineSymbol(math,ams,bin,"⋌","\\rightthreetimes",!0);defineSymbol(math,ams,bin,"⋏","\\curlywedge",!0);defineSymbol(math,ams,bin,"⋎","\\curlyvee",!0);defineSymbol(math,ams,bin,"⊝","\\circleddash",!0);defineSymbol(math,ams,bin,"⊛","\\circledast",!0);defineSymbol(math,ams,bin,"⋅","\\centerdot");defineSymbol(math,ams,bin,"⊺","\\intercal",!0);defineSymbol(math,ams,bin,"⋒","\\doublecap");defineSymbol(math,ams,bin,"⋓","\\doublecup");defineSymbol(math,ams,bin,"⊠","\\boxtimes",!0);defineSymbol(math,ams,rel,"⇢","\\dashrightarrow",!0);defineSymbol(math,ams,rel,"⇠","\\dashleftarrow",!0);defineSymbol(math,ams,rel,"⇇","\\leftleftarrows",!0);defineSymbol(math,ams,rel,"⇆","\\leftrightarrows",!0);defineSymbol(math,ams,rel,"⇚","\\Lleftarrow",!0);defineSymbol(math,ams,rel,"↞","\\twoheadleftarrow",!0);defineSymbol(math,ams,rel,"↢","\\leftarrowtail",!0);defineSymbol(math,ams,rel,"↫","\\looparrowleft",!0);defineSymbol(math,ams,rel,"⇋","\\leftrightharpoons",!0);defineSymbol(math,ams,rel,"↶","\\curvearrowleft",!0);defineSymbol(math,ams,rel,"↺","\\circlearrowleft",!0);defineSymbol(math,ams,rel,"↰","\\Lsh",!0);defineSymbol(math,ams,rel,"⇈","\\upuparrows",!0);defineSymbol(math,ams,rel,"↿","\\upharpoonleft",!0);defineSymbol(math,ams,rel,"⇃","\\downharpoonleft",!0);defineSymbol(math,main,rel,"⊶","\\origof",!0);defineSymbol(math,main,rel,"⊷","\\imageof",!0);defineSymbol(math,ams,rel,"⊸","\\multimap",!0);defineSymbol(math,ams,rel,"↭","\\leftrightsquigarrow",!0);defineSymbol(math,ams,rel,"⇉","\\rightrightarrows",!0);defineSymbol(math,ams,rel,"⇄","\\rightleftarrows",!0);defineSymbol(math,ams,rel,"↠","\\twoheadrightarrow",!0);defineSymbol(math,ams,rel,"↣","\\rightarrowtail",!0);defineSymbol(math,ams,rel,"↬","\\looparrowright",!0);defineSymbol(math,ams,rel,"↷","\\curvearrowright",!0);defineSymbol(math,ams,rel,"↻","\\circlearrowright",!0);defineSymbol(math,ams,rel,"↱","\\Rsh",!0);defineSymbol(math,ams,rel,"⇊","\\downdownarrows",!0);defineSymbol(math,ams,rel,"↾","\\upharpoonright",!0);defineSymbol(math,ams,rel,"⇂","\\downharpoonright",!0);defineSymbol(math,ams,rel,"⇝","\\rightsquigarrow",!0);defineSymbol(math,ams,rel,"⇝","\\leadsto");defineSymbol(math,ams,rel,"⇛","\\Rrightarrow",!0);defineSymbol(math,ams,rel,"↾","\\restriction");defineSymbol(math,main,textord,"‘","`");defineSymbol(math,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\textdollar");defineSymbol(math,main,textord,"%","\\%");defineSymbol(text,main,textord,"%","\\%");defineSymbol(math,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\textunderscore");defineSymbol(math,main,textord,"∠","\\angle",!0);defineSymbol(math,main,textord,"∞","\\infty",!0);defineSymbol(math,main,textord,"′","\\prime");defineSymbol(math,main,textord,"△","\\triangle");defineSymbol(math,main,textord,"Γ","\\Gamma",!0);defineSymbol(math,main,textord,"Δ","\\Delta",!0);defineSymbol(math,main,textord,"Θ","\\Theta",!0);defineSymbol(math,main,textord,"Λ","\\Lambda",!0);defineSymbol(math,main,textord,"Ξ","\\Xi",!0);defineSymbol(math,main,textord,"Π","\\Pi",!0);defineSymbol(math,main,textord,"Σ","\\Sigma",!0);defineSymbol(math,main,textord,"Υ","\\Upsilon",!0);defineSymbol(math,main,textord,"Φ","\\Phi",!0);defineSymbol(math,main,textord,"Ψ","\\Psi",!0);defineSymbol(math,main,textord,"Ω","\\Omega",!0);defineSymbol(math,main,textord,"A","Α");defineSymbol(math,main,textord,"B","Β");defineSymbol(math,main,textord,"E","Ε");defineSymbol(math,main,textord,"Z","Ζ");defineSymbol(math,main,textord,"H","Η");defineSymbol(math,main,textord,"I","Ι");defineSymbol(math,main,textord,"K","Κ");defineSymbol(math,main,textord,"M","Μ");defineSymbol(math,main,textord,"N","Ν");defineSymbol(math,main,textord,"O","Ο");defineSymbol(math,main,textord,"P","Ρ");defineSymbol(math,main,textord,"T","Τ");defineSymbol(math,main,textord,"X","Χ");defineSymbol(math,main,textord,"¬","\\neg",!0);defineSymbol(math,main,textord,"¬","\\lnot");defineSymbol(math,main,textord,"⊤","\\top");defineSymbol(math,main,textord,"⊥","\\bot");defineSymbol(math,main,textord,"∅","\\emptyset");defineSymbol(math,ams,textord,"∅","\\varnothing");defineSymbol(math,main,mathord,"α","\\alpha",!0);defineSymbol(math,main,mathord,"β","\\beta",!0);defineSymbol(math,main,mathord,"γ","\\gamma",!0);defineSymbol(math,main,mathord,"δ","\\delta",!0);defineSymbol(math,main,mathord,"ϵ","\\epsilon",!0);defineSymbol(math,main,mathord,"ζ","\\zeta",!0);defineSymbol(math,main,mathord,"η","\\eta",!0);defineSymbol(math,main,mathord,"θ","\\theta",!0);defineSymbol(math,main,mathord,"ι","\\iota",!0);defineSymbol(math,main,mathord,"κ","\\kappa",!0);defineSymbol(math,main,mathord,"λ","\\lambda",!0);defineSymbol(math,main,mathord,"μ","\\mu",!0);defineSymbol(math,main,mathord,"ν","\\nu",!0);defineSymbol(math,main,mathord,"ξ","\\xi",!0);defineSymbol(math,main,mathord,"ο","\\omicron",!0);defineSymbol(math,main,mathord,"π","\\pi",!0);defineSymbol(math,main,mathord,"ρ","\\rho",!0);defineSymbol(math,main,mathord,"σ","\\sigma",!0);defineSymbol(math,main,mathord,"τ","\\tau",!0);defineSymbol(math,main,mathord,"υ","\\upsilon",!0);defineSymbol(math,main,mathord,"ϕ","\\phi",!0);defineSymbol(math,main,mathord,"χ","\\chi",!0);defineSymbol(math,main,mathord,"ψ","\\psi",!0);defineSymbol(math,main,mathord,"ω","\\omega",!0);defineSymbol(math,main,mathord,"ε","\\varepsilon",!0);defineSymbol(math,main,mathord,"ϑ","\\vartheta",!0);defineSymbol(math,main,mathord,"ϖ","\\varpi",!0);defineSymbol(math,main,mathord,"ϱ","\\varrho",!0);defineSymbol(math,main,mathord,"ς","\\varsigma",!0);defineSymbol(math,main,mathord,"φ","\\varphi",!0);defineSymbol(math,main,bin,"∗","*",!0);defineSymbol(math,main,bin,"+","+");defineSymbol(math,main,bin,"−","-",!0);defineSymbol(math,main,bin,"⋅","\\cdot",!0);defineSymbol(math,main,bin,"∘","\\circ",!0);defineSymbol(math,main,bin,"÷","\\div",!0);defineSymbol(math,main,bin,"±","\\pm",!0);defineSymbol(math,main,bin,"×","\\times",!0);defineSymbol(math,main,bin,"∩","\\cap",!0);defineSymbol(math,main,bin,"∪","\\cup",!0);defineSymbol(math,main,bin,"∖","\\setminus",!0);defineSymbol(math,main,bin,"∧","\\land");defineSymbol(math,main,bin,"∨","\\lor");defineSymbol(math,main,bin,"∧","\\wedge",!0);defineSymbol(math,main,bin,"∨","\\vee",!0);defineSymbol(math,main,textord,"√","\\surd");defineSymbol(math,main,open,"⟨","\\langle",!0);defineSymbol(math,main,open,"∣","\\lvert");defineSymbol(math,main,open,"∥","\\lVert");defineSymbol(math,main,close,"?","?");defineSymbol(math,main,close,"!","!");defineSymbol(math,main,close,"⟩","\\rangle",!0);defineSymbol(math,main,close,"∣","\\rvert");defineSymbol(math,main,close,"∥","\\rVert");defineSymbol(math,main,rel,"=","=");defineSymbol(math,main,rel,":",":");defineSymbol(math,main,rel,"≈","\\approx",!0);defineSymbol(math,main,rel,"≅","\\cong",!0);defineSymbol(math,main,rel,"≥","\\ge");defineSymbol(math,main,rel,"≥","\\geq",!0);defineSymbol(math,main,rel,"←","\\gets");defineSymbol(math,main,rel,">","\\gt",!0);defineSymbol(math,main,rel,"∈","\\in",!0);defineSymbol(math,main,rel,"","\\@not");defineSymbol(math,main,rel,"⊂","\\subset",!0);defineSymbol(math,main,rel,"⊃","\\supset",!0);defineSymbol(math,main,rel,"⊆","\\subseteq",!0);defineSymbol(math,main,rel,"⊇","\\supseteq",!0);defineSymbol(math,ams,rel,"⊈","\\nsubseteq",!0);defineSymbol(math,ams,rel,"⊉","\\nsupseteq",!0);defineSymbol(math,main,rel,"⊨","\\models");defineSymbol(math,main,rel,"←","\\leftarrow",!0);defineSymbol(math,main,rel,"≤","\\le");defineSymbol(math,main,rel,"≤","\\leq",!0);defineSymbol(math,main,rel,"<","\\lt",!0);defineSymbol(math,main,rel,"→","\\rightarrow",!0);defineSymbol(math,main,rel,"→","\\to");defineSymbol(math,ams,rel,"≱","\\ngeq",!0);defineSymbol(math,ams,rel,"≰","\\nleq",!0);defineSymbol(math,main,spacing," ","\\ ");defineSymbol(math,main,spacing," ","\\space");defineSymbol(math,main,spacing," ","\\nobreakspace");defineSymbol(text,main,spacing," ","\\ ");defineSymbol(text,main,spacing," "," ");defineSymbol(text,main,spacing," ","\\space");defineSymbol(text,main,spacing," ","\\nobreakspace");defineSymbol(math,main,spacing,null,"\\nobreak");defineSymbol(math,main,spacing,null,"\\allowbreak");defineSymbol(math,main,punct,",",",");defineSymbol(math,main,punct,";",";");defineSymbol(math,ams,bin,"⊼","\\barwedge",!0);defineSymbol(math,ams,bin,"⊻","\\veebar",!0);defineSymbol(math,main,bin,"⊙","\\odot",!0);defineSymbol(math,main,bin,"⊕","\\oplus",!0);defineSymbol(math,main,bin,"⊗","\\otimes",!0);defineSymbol(math,main,textord,"∂","\\partial",!0);defineSymbol(math,main,bin,"⊘","\\oslash",!0);defineSymbol(math,ams,bin,"⊚","\\circledcirc",!0);defineSymbol(math,ams,bin,"⊡","\\boxdot",!0);defineSymbol(math,main,bin,"△","\\bigtriangleup");defineSymbol(math,main,bin,"▽","\\bigtriangledown");defineSymbol(math,main,bin,"†","\\dagger");defineSymbol(math,main,bin,"⋄","\\diamond");defineSymbol(math,main,bin,"⋆","\\star");defineSymbol(math,main,bin,"◃","\\triangleleft");defineSymbol(math,main,bin,"▹","\\triangleright");defineSymbol(math,main,open,"{","\\{");defineSymbol(text,main,textord,"{","\\{");defineSymbol(text,main,textord,"{","\\textbraceleft");defineSymbol(math,main,close,"}","\\}");defineSymbol(text,main,textord,"}","\\}");defineSymbol(text,main,textord,"}","\\textbraceright");defineSymbol(math,main,open,"{","\\lbrace");defineSymbol(math,main,close,"}","\\rbrace");defineSymbol(math,main,open,"[","\\lbrack",!0);defineSymbol(text,main,textord,"[","\\lbrack",!0);defineSymbol(math,main,close,"]","\\rbrack",!0);defineSymbol(text,main,textord,"]","\\rbrack",!0);defineSymbol(math,main,open,"(","\\lparen",!0);defineSymbol(math,main,close,")","\\rparen",!0);defineSymbol(text,main,textord,"<","\\textless",!0);defineSymbol(text,main,textord,">","\\textgreater",!0);defineSymbol(math,main,open,"⌊","\\lfloor",!0);defineSymbol(math,main,close,"⌋","\\rfloor",!0);defineSymbol(math,main,open,"⌈","\\lceil",!0);defineSymbol(math,main,close,"⌉","\\rceil",!0);defineSymbol(math,main,textord,"\\","\\backslash");defineSymbol(math,main,textord,"∣","|");defineSymbol(math,main,textord,"∣","\\vert");defineSymbol(text,main,textord,"|","\\textbar",!0);defineSymbol(math,main,textord,"∥","\\|");defineSymbol(math,main,textord,"∥","\\Vert");defineSymbol(text,main,textord,"∥","\\textbardbl");defineSymbol(text,main,textord,"~","\\textasciitilde");defineSymbol(text,main,textord,"\\","\\textbackslash");defineSymbol(text,main,textord,"^","\\textasciicircum");defineSymbol(math,main,rel,"↑","\\uparrow",!0);defineSymbol(math,main,rel,"⇑","\\Uparrow",!0);defineSymbol(math,main,rel,"↓","\\downarrow",!0);defineSymbol(math,main,rel,"⇓","\\Downarrow",!0);defineSymbol(math,main,rel,"↕","\\updownarrow",!0);defineSymbol(math,main,rel,"⇕","\\Updownarrow",!0);defineSymbol(math,main,op$1,"∐","\\coprod");defineSymbol(math,main,op$1,"⋁","\\bigvee");defineSymbol(math,main,op$1,"⋀","\\bigwedge");defineSymbol(math,main,op$1,"⨄","\\biguplus");defineSymbol(math,main,op$1,"⋂","\\bigcap");defineSymbol(math,main,op$1,"⋃","\\bigcup");defineSymbol(math,main,op$1,"∫","\\int");defineSymbol(math,main,op$1,"∫","\\intop");defineSymbol(math,main,op$1,"∬","\\iint");defineSymbol(math,main,op$1,"∭","\\iiint");defineSymbol(math,main,op$1,"∏","\\prod");defineSymbol(math,main,op$1,"∑","\\sum");defineSymbol(math,main,op$1,"⨂","\\bigotimes");defineSymbol(math,main,op$1,"⨁","\\bigoplus");defineSymbol(math,main,op$1,"⨀","\\bigodot");defineSymbol(math,main,op$1,"∮","\\oint");defineSymbol(math,main,op$1,"∯","\\oiint");defineSymbol(math,main,op$1,"∰","\\oiiint");defineSymbol(math,main,op$1,"⨆","\\bigsqcup");defineSymbol(math,main,op$1,"∫","\\smallint");defineSymbol(text,main,inner,"…","\\textellipsis");defineSymbol(math,main,inner,"…","\\mathellipsis");defineSymbol(text,main,inner,"…","\\ldots",!0);defineSymbol(math,main,inner,"…","\\ldots",!0);defineSymbol(math,main,inner,"⋯","\\@cdots",!0);defineSymbol(math,main,inner,"⋱","\\ddots",!0);defineSymbol(math,main,textord,"⋮","\\varvdots");defineSymbol(text,main,textord,"⋮","\\varvdots");defineSymbol(math,main,accent,"ˊ","\\acute");defineSymbol(math,main,accent,"ˋ","\\grave");defineSymbol(math,main,accent,"¨","\\ddot");defineSymbol(math,main,accent,"~","\\tilde");defineSymbol(math,main,accent,"ˉ","\\bar");defineSymbol(math,main,accent,"˘","\\breve");defineSymbol(math,main,accent,"ˇ","\\check");defineSymbol(math,main,accent,"^","\\hat");defineSymbol(math,main,accent,"⃗","\\vec");defineSymbol(math,main,accent,"˙","\\dot");defineSymbol(math,main,accent,"˚","\\mathring");defineSymbol(math,main,mathord,"","\\@imath");defineSymbol(math,main,mathord,"","\\@jmath");defineSymbol(math,main,textord,"ı","ı");defineSymbol(math,main,textord,"ȷ","ȷ");defineSymbol(text,main,textord,"ı","\\i",!0);defineSymbol(text,main,textord,"ȷ","\\j",!0);defineSymbol(text,main,textord,"ß","\\ss",!0);defineSymbol(text,main,textord,"æ","\\ae",!0);defineSymbol(text,main,textord,"œ","\\oe",!0);defineSymbol(text,main,textord,"ø","\\o",!0);defineSymbol(text,main,textord,"Æ","\\AE",!0);defineSymbol(text,main,textord,"Œ","\\OE",!0);defineSymbol(text,main,textord,"Ø","\\O",!0);defineSymbol(text,main,accent,"ˊ","\\'");defineSymbol(text,main,accent,"ˋ","\\`");defineSymbol(text,main,accent,"ˆ","\\^");defineSymbol(text,main,accent,"˜","\\~");defineSymbol(text,main,accent,"ˉ","\\=");defineSymbol(text,main,accent,"˘","\\u");defineSymbol(text,main,accent,"˙","\\.");defineSymbol(text,main,accent,"¸","\\c");defineSymbol(text,main,accent,"˚","\\r");defineSymbol(text,main,accent,"ˇ","\\v");defineSymbol(text,main,accent,"¨",'\\"');defineSymbol(text,main,accent,"˝","\\H");defineSymbol(text,main,accent,"◯","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"–","--",!0);defineSymbol(text,main,textord,"–","\\textendash");defineSymbol(text,main,textord,"—","---",!0);defineSymbol(text,main,textord,"—","\\textemdash");defineSymbol(text,main,textord,"‘","`",!0);defineSymbol(text,main,textord,"‘","\\textquoteleft");defineSymbol(text,main,textord,"’","'",!0);defineSymbol(text,main,textord,"’","\\textquoteright");defineSymbol(text,main,textord,"“","``",!0);defineSymbol(text,main,textord,"“","\\textquotedblleft");defineSymbol(text,main,textord,"”","''",!0);defineSymbol(text,main,textord,"”","\\textquotedblright");defineSymbol(math,main,textord,"°","\\degree",!0);defineSymbol(text,main,textord,"°","\\degree");defineSymbol(text,main,textord,"°","\\textdegree",!0);defineSymbol(math,main,textord,"£","\\pounds");defineSymbol(math,main,textord,"£","\\mathsterling",!0);defineSymbol(text,main,textord,"£","\\pounds");defineSymbol(text,main,textord,"£","\\textsterling",!0);defineSymbol(math,ams,textord,"✠","\\maltese");defineSymbol(text,ams,textord,"✠","\\maltese");var mathTextSymbols='0123456789/@."';for(var i=0;i<mathTextSymbols.length;i++){var ch$1=mathTextSymbols.charAt(i);defineSymbol(math,main,textord,ch$1,ch$1)}var textSymbols='0123456789!@*()-=+";:?/.,';for(var _i$1=0;_i$1<textSymbols.length;_i$1++){var _ch=textSymbols.charAt(_i$1);defineSymbol(text,main,textord,_ch,_ch)}var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math,ams,textord,"C","ℂ");defineSymbol(text,ams,textord,"C","ℂ");defineSymbol(math,ams,textord,"H","ℍ");defineSymbol(text,ams,textord,"H","ℍ");defineSymbol(math,ams,textord,"N","ℕ");defineSymbol(text,ams,textord,"N","ℕ");defineSymbol(math,ams,textord,"P","ℙ");defineSymbol(text,ams,textord,"P","ℙ");defineSymbol(math,ams,textord,"Q","ℚ");defineSymbol(text,ams,textord,"Q","ℚ");defineSymbol(math,ams,textord,"R","ℝ");defineSymbol(text,ams,textord,"R","ℝ");defineSymbol(math,ams,textord,"Z","ℤ");defineSymbol(text,ams,textord,"Z","ℤ");defineSymbol(math,main,mathord,"h","ℎ");defineSymbol(text,main,mathord,"h","ℎ");var wideChar="";for(var _i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="𝕜";defineSymbol(math,main,mathord,"k",wideChar);defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}var extraLatin="ÐÞþ";for(var _i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function t(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),s=(n-55296)*1024+(a-56320)+65536,o=r==="math"?0:1;if(119808<=s&&s<120484){var c=Math.floor((s-119808)/26);return[wideLatinLetterData[c][2],wideLatinLetterData[c][o]]}else if(120782<=s&&s<=120831){var d=Math.floor((s-120782)/10);return[wideNumeralData[d][2],wideNumeralData[d][o]]}else{if(s===120485||s===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][o]];if(120486<s&&s<120782)return["",""];throw new ParseError("Unsupported character: "+e)}},lookupSymbol=function t(e,r,n){return symbols[n][e]&&symbols[n][e].replace&&(e=symbols[n][e].replace),{value:e,metrics:getCharacterMetrics(e,r,n)}},makeSymbol=function t(e,r,n,a,s){var o=lookupSymbol(e,r,n),c=o.metrics;e=o.value;var d;if(c){var m=c.italic;(n==="text"||a&&a.font==="mathit")&&(m=0),d=new SymbolNode(e,c.height,c.depth,m,c.skew,c.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new SymbolNode(e,0,0,0,0,0,s);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var y=a.getColor();y&&(d.style.color=y)}return d},mathsym=function t(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&lookupSymbol(e,"Main-Bold",r).metrics?makeSymbol(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||symbols[r][e].font==="main"?makeSymbol(e,"Main-Regular",r,n,a):makeSymbol(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},boldsymbol=function t(e,r,n,a,s){return s!=="textord"&&lookupSymbol(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function t(e,r,n){var a=e.mode,s=e.text,o=["mord"],c=a==="math"||a==="text"&&r.font,d=c?r.font:r.fontFamily,m="",y="";if(s.charCodeAt(0)===55349&&([m,y]=wideCharacterFont(s,a)),m.length>0)return makeSymbol(s,m,a,r,o.concat(y));if(d){var A,P;if(d==="boldsymbol"){var Z=boldsymbol(s,a,r,o,n);A=Z.fontName,P=[Z.fontClass]}else c?(A=fontMap[d].fontName,P=[d]):(A=retrieveTextFontName(d,r.fontWeight,r.fontShape),P=[d,r.fontWeight,r.fontShape]);if(lookupSymbol(s,A,a).metrics)return makeSymbol(s,A,a,r,o.concat(P));if(ligatures.hasOwnProperty(s)&&A.slice(0,10)==="Typewriter"){for(var me=[],_e=0;_e<s.length;_e++)me.push(makeSymbol(s[_e],A,a,r,o.concat(P)));return makeFragment(me)}}if(n==="mathord")return makeSymbol(s,"Math-Italic",a,r,o.concat(["mathnormal"]));if(n==="textord"){var Ge=symbols[a][s]&&symbols[a][s].font;if(Ge==="ams"){var ve=retrieveTextFontName("amsrm",r.fontWeight,r.fontShape);return makeSymbol(s,ve,a,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(Ge==="main"||!Ge){var He=retrieveTextFontName("textrm",r.fontWeight,r.fontShape);return makeSymbol(s,He,a,r,o.concat(r.fontWeight,r.fontShape))}else{var De=retrieveTextFontName(Ge,r.fontWeight,r.fontShape);return makeSymbol(s,De,a,r,o.concat(De,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},canCombine=(t,e)=>{if(createClass(t.classes)!==createClass(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},tryCombineChars=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof SymbolNode&&n instanceof SymbolNode&&canCombine(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},sizeElementFromChildren=function t(e){for(var r=0,n=0,a=0,s=0;s<e.children.length;s++){var o=e.children[s];o.height>r&&(r=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>a&&(a=o.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},makeSpan$2=function t(e,r,n,a){var s=new Span(e,r,n,a);return sizeElementFromChildren(s),s},makeSvgSpan=(t,e,r,n)=>new Span(t,e,r,n),makeLineSpan=function t(e,r,n){var a=makeSpan$2([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=makeEm(a.height),a.maxFontSize=1,a},makeAnchor=function t(e,r,n,a){var s=new Anchor(e,r,n,a);return sizeElementFromChildren(s),s},makeFragment=function t(e){var r=new DocumentFragment(e);return sizeElementFromChildren(r),r},wrapFragment=function t(e,r){return e instanceof DocumentFragment?makeSpan$2([],[e],r):e},getVListChildrenAndDepth=function t(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,s=a,o=1;o<r.length;o++){var c=-r[o].shift-s-r[o].elem.depth,d=c-(r[o-1].elem.height+r[o-1].elem.depth);s=s+c,n.push({type:"kern",size:d}),n.push(r[o])}return{children:n,depth:a}}var m;if(e.positionType==="top"){for(var y=e.positionData,A=0;A<e.children.length;A++){var P=e.children[A];y-=P.type==="kern"?P.size:P.elem.height+P.elem.depth}m=y}else if(e.positionType==="bottom")m=-e.positionData;else{var Z=e.children[0];if(Z.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")m=-Z.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")m=-Z.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:m}},makeVList=function t(e,r){for(var{children:n,depth:a}=getVListChildrenAndDepth(e),s=0,o=0;o<n.length;o++){var c=n[o];if(c.type==="elem"){var d=c.elem;s=Math.max(s,d.maxFontSize,d.height)}}s+=2;var m=makeSpan$2(["pstrut"],[]);m.style.height=makeEm(s);for(var y=[],A=a,P=a,Z=a,me=0;me<n.length;me++){var _e=n[me];if(_e.type==="kern")Z+=_e.size;else{var Ge=_e.elem,ve=_e.wrapperClasses||[],He=_e.wrapperStyle||{},De=makeSpan$2(ve,[m,Ge],void 0,He);De.style.top=makeEm(-s-Z-Ge.depth),_e.marginLeft&&(De.style.marginLeft=_e.marginLeft),_e.marginRight&&(De.style.marginRight=_e.marginRight),y.push(De),Z+=Ge.height+Ge.depth}A=Math.min(A,Z),P=Math.max(P,Z)}var Xe=makeSpan$2(["vlist"],y);Xe.style.height=makeEm(P);var Bs;if(A<0){var wt=makeSpan$2([],[]),li=makeSpan$2(["vlist"],[wt]);li.style.height=makeEm(-A);var An=makeSpan$2(["vlist-s"],[new SymbolNode("​")]);Bs=[makeSpan$2(["vlist-r"],[Xe,An]),makeSpan$2(["vlist-r"],[li])]}else Bs=[makeSpan$2(["vlist-r"],[Xe])];var Os=makeSpan$2(["vlist-t"],Bs);return Bs.length===2&&Os.classes.push("vlist-t2"),Os.height=P,Os.depth=-A,Os},makeGlue=(t,e)=>{var r=makeSpan$2(["mspace"],[],e),n=calculateSize(t,e);return r.style.marginRight=makeEm(n),r},retrieveTextFontName=function t(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var s;return r==="textbf"&&n==="textit"?s="BoldItalic":r==="textbf"?s="Bold":r==="textit"?s="Italic":s="Regular",a+"-"+s},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function t(e,r){var[n,a,s]=svgData[e],o=new PathNode(n),c=new SvgNode([o],{width:makeEm(a),height:makeEm(s),style:"width:"+makeEm(a),viewBox:"0 0 "+1e3*a+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),d=makeSvgSpan(["overlay"],[c],r);return d.height=s,d.style.height=makeEm(s),d.style.width=makeEm(a),d},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:s,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)_functions[r[d]]=c;e&&(s&&(_htmlGroupBuilders[e]=s),o&&(_mathmlGroupBuilders[e]=o))}function defineFunctionBuilders(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;defineFunction({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var normalizeArgument=function t(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ordargument=function t(e){return e.type==="ordgroup"?e.body:[e]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function t(e,r,n,a){a===void 0&&(a=[null,null]);for(var s=[],o=0;o<e.length;o++){var c=buildGroup$1(e[o],r);if(c instanceof DocumentFragment){var d=c.children;s.push(...d)}else s.push(c)}if(buildCommon.tryCombineChars(s),!n)return s;var m=r;if(e.length===1){var y=e[0];y.type==="sizing"?m=r.havingSize(y.size):y.type==="styling"&&(m=r.havingStyle(styleMap$1[y.style]))}var A=makeSpan$1([a[0]||"leftmost"],[],r),P=makeSpan$1([a[1]||"rightmost"],[],r),Z=n==="root";return traverseNonSpaceNodes(s,(me,_e)=>{var Ge=_e.classes[0],ve=me.classes[0];Ge==="mbin"&&utils.contains(binRightCanceller,ve)?_e.classes[0]="mord":ve==="mbin"&&utils.contains(binLeftCanceller,Ge)&&(me.classes[0]="mord")},{node:A},P,Z),traverseNonSpaceNodes(s,(me,_e)=>{var Ge=getTypeOfDomTree(_e),ve=getTypeOfDomTree(me),He=Ge&&ve?me.hasClass("mtight")?tightSpacings[Ge][ve]:spacings[Ge][ve]:null;if(He)return buildCommon.makeGlue(He,m)},{node:A},P,Z),s},traverseNonSpaceNodes=function t(e,r,n,a,s){a&&e.push(a);for(var o=0;o<e.length;o++){var c=e[o],d=checkPartialGroup(c);if(d){t(d.children,r,n,null,s);continue}var m=!c.hasClass("mspace");if(m){var y=r(c,n.node);y&&(n.insertAfter?n.insertAfter(y):(e.unshift(y),o++))}m?n.node=c:s&&c.hasClass("newline")&&(n.node=makeSpan$1(["leftmost"])),n.insertAfter=(A=>P=>{e.splice(A+1,0,P),o++})(o)}a&&e.pop()},checkPartialGroup=function t(e){return e instanceof DocumentFragment||e instanceof Anchor||e instanceof Span&&e.hasClass("enclosing")?e:null},getOutermostNode=function t(e,r){var n=checkPartialGroup(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},getTypeOfDomTree=function t(e,r){return e?(r&&(e=getOutermostNode(e,r)),DomEnum[e.classes[0]]||null):null},makeNullDelimiter=function t(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return makeSpan$1(r.concat(n))},buildGroup$1=function t(e,r,n){if(!e)return makeSpan$1();if(_htmlGroupBuilders[e.type]){var a=_htmlGroupBuilders[e.type](e,r);if(n&&r.size!==n.size){a=makeSpan$1(r.sizingClasses(n),[a],r);var s=r.sizeMultiplier/n.sizeMultiplier;a.height*=s,a.depth*=s}return a}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildHTMLUnbreakable(t,e){var r=makeSpan$1(["base"],t,e),n=makeSpan$1(["strut"]);return n.style.height=makeEm(r.height+r.depth),r.depth&&(n.style.verticalAlign=makeEm(-r.depth)),r.children.unshift(n),r}function buildHTML(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=buildExpression$1(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var s=[],o=[],c=0;c<n.length;c++)if(o.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,o.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(s.push(buildHTMLUnbreakable(o,e)),o=[])}else n[c].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(buildHTMLUnbreakable(o,e)),o=[]),s.push(n[c]));o.length>0&&s.push(buildHTMLUnbreakable(o,e));var m;r?(m=buildHTMLUnbreakable(buildExpression$1(r,e,!0)),m.classes=["tag"],s.push(m)):a&&s.push(a);var y=makeSpan$1(["katex-html"],s);if(y.setAttribute("aria-hidden","true"),m){var A=m.children[0];A.style.height=makeEm(y.height+y.depth),y.depth&&(A.style.verticalAlign=makeEm(-y.depth))}return y}function newDocumentFragment(t){return new DocumentFragment(t)}class MathNode{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=createClass(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof TextNode&&this.children[n+1]instanceof TextNode){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof TextNode;)a+=this.children[++n].toText();e.appendChild(new TextNode(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=utils.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+utils.escape(createClass(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class TextNode{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character=" ":e>=.1666&&e<=.1667?this.character=" ":e>=.2222&&e<=.2223?this.character=" ":e>=.2777&&e<=.2778?this.character="  ":e>=-.05556&&e<=-.05555?this.character=" ⁣":e>=-.1667&&e<=-.1666?this.character=" ⁣":e>=-.2223&&e<=-.2222?this.character=" ⁣":e>=-.2778&&e<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",makeEm(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function t(e,r,n){return symbols[r][e]&&symbols[r][e].replace&&e.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=symbols[r][e].replace),new mathMLTree.TextNode(e)},makeRow=function t(e){return e.length===1?e[0]:new mathMLTree.MathNode("mrow",e)},getVariant=function t(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var s=e.text;if(utils.contains(["\\imath","\\jmath"],s))return null;symbols[a][s]&&symbols[a][s].replace&&(s=symbols[a][s].replace);var o=buildCommon.fontMap[n].fontName;return getCharacterMetrics(s,o,a)?buildCommon.fontMap[n].variant:null};function isNumberPunctuation(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof TextNode&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof TextNode&&r.text===","}else return!1}var buildExpression=function t(e,r,n){if(e.length===1){var a=buildGroup(e[0],r);return n&&a instanceof MathNode&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var s=[],o,c=0;c<e.length;c++){var d=buildGroup(e[c],r);if(d instanceof MathNode&&o instanceof MathNode){if(d.type==="mtext"&&o.type==="mtext"&&d.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...d.children);continue}else if(d.type==="mn"&&o.type==="mn"){o.children.push(...d.children);continue}else if(isNumberPunctuation(d)&&o.type==="mn"){o.children.push(...d.children);continue}else if(d.type==="mn"&&isNumberPunctuation(o))d.children=[...o.children,...d.children],s.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(o.type==="mn"||isNumberPunctuation(o))){var m=d.children[0];m instanceof MathNode&&m.type==="mn"&&(m.children=[...o.children,...m.children],s.pop())}else if(o.type==="mi"&&o.children.length===1){var y=o.children[0];if(y instanceof TextNode&&y.text==="̸"&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var A=d.children[0];A instanceof TextNode&&A.text.length>0&&(A.text=A.text.slice(0,1)+"̸"+A.text.slice(1),s.pop())}}}s.push(d),o=d}return s},buildExpressionRow=function t(e,r,n){return makeRow(buildExpression(e,r,n))},buildGroup=function t(e,r){if(!e)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[e.type]){var n=_mathmlGroupBuilders[e.type](e,r);return n}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildMathML(t,e,r,n,a){var s=buildExpression(t,r),o;s.length===1&&s[0]instanceof MathNode&&utils.contains(["mrow","mtable"],s[0].type)?o=s[0]:o=new mathMLTree.MathNode("mrow",s);var c=new mathMLTree.MathNode("annotation",[new mathMLTree.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new mathMLTree.MathNode("semantics",[o,c]),m=new mathMLTree.MathNode("math",[d]);m.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&m.setAttribute("display","block");var y=a?"katex":"katex-mathml";return buildCommon.makeSpan([y],[m])}var optionsFromSettings=function t(e){return new Options({style:e.displayMode?Style$1.DISPLAY:Style$1.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},displayWrap=function t(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=buildCommon.makeSpan(n,[e])}return e},buildTree=function t(e,r,n){var a=optionsFromSettings(n),s;if(n.output==="mathml")return buildMathML(e,r,a,n.displayMode,!0);if(n.output==="html"){var o=buildHTML(e,a);s=buildCommon.makeSpan(["katex"],[o])}else{var c=buildMathML(e,r,a,n.displayMode,!1),d=buildHTML(e,a);s=buildCommon.makeSpan(["katex"],[c,d])}return displayWrap(s,n)},buildHTMLTree=function t(e,r,n){var a=optionsFromSettings(n),s=buildHTML(e,a),o=buildCommon.makeSpan(["katex"],[s]);return displayWrap(o,n)},stretchyCodePoint={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},mathMLnode=function t(e){var r=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function t(e){return e.type==="ordgroup"?e.body.length:1},svgSpan=function t(e,r){function n(){var c=4e5,d=e.label.slice(1);if(utils.contains(["widehat","widecheck","widetilde","utilde"],d)){var m=e,y=groupLength(m.base),A,P,Z;if(y>5)d==="widehat"||d==="widecheck"?(A=420,c=2364,Z=.42,P=d+"4"):(A=312,c=2340,Z=.34,P="tilde4");else{var me=[1,1,2,2,3,3][y];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][me],A=[0,239,300,360,420][me],Z=[0,.24,.3,.3,.36,.42][me],P=d+me):(c=[0,600,1033,2339,2340][me],A=[0,260,286,306,312][me],Z=[0,.26,.286,.3,.306,.34][me],P="tilde"+me)}var _e=new PathNode(P),Ge=new SvgNode([_e],{width:"100%",height:makeEm(Z),viewBox:"0 0 "+c+" "+A,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[Ge],r),minWidth:0,height:Z}}else{var ve=[],He=katexImagesData[d],[De,Xe,Bs]=He,wt=Bs/1e3,li=De.length,An,Os;if(li===1){var vh=He[3];An=["hide-tail"],Os=[vh]}else if(li===2)An=["halfarrow-left","halfarrow-right"],Os=["xMinYMin","xMaxYMin"];else if(li===3)An=["brace-left","brace-center","brace-right"],Os=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+li+" children.");for(var Fc=0;Fc<li;Fc++){var Hc=new PathNode(De[Fc]),qc=new SvgNode([Hc],{width:"400em",height:makeEm(wt),viewBox:"0 0 "+c+" "+Bs,preserveAspectRatio:Os[Fc]+" slice"}),e1=buildCommon.makeSvgSpan([An[Fc]],[qc],r);if(li===1)return{span:e1,minWidth:Xe,height:wt};e1.style.height=makeEm(wt),ve.push(e1)}return{span:buildCommon.makeSpan(["stretchy"],ve,r),minWidth:Xe,height:wt}}}var{span:a,minWidth:s,height:o}=n();return a.height=o,a.style.height=makeEm(o),s>0&&(a.style.minWidth=makeEm(s)),a},encloseSpan=function t(e,r,n,a,s){var o,c=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(o=buildCommon.makeSpan(["stretchy",r],[],s),r==="fbox"){var d=s.color&&s.getColor();d&&(o.style.borderColor=d)}}else{var m=[];/^[bx]cancel$/.test(r)&&m.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&m.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var y=new SvgNode(m,{width:"100%",height:makeEm(c)});o=buildCommon.makeSvgSpan([],[y],s)}return o.height=c,o.style.height=makeEm(c),o},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function assertSymbolNodeType(t){var e=checkSymbolNodeType(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function checkSymbolNodeType(t){return t&&(t.type==="atom"||NON_ATOMS.hasOwnProperty(t.type))?t:null}var htmlBuilder$a=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=assertNodeType(t.base,"accent"),r=n.base,t.base=r,a=assertSpan(buildGroup$1(t,e)),t.base=n):(n=assertNodeType(t,"accent"),r=n.base);var s=buildGroup$1(r,e.havingCrampedStyle()),o=n.isShifty&&utils.isCharacterBox(r),c=0;if(o){var d=utils.getBaseElem(r),m=buildGroup$1(d,e.havingCrampedStyle());c=assertSymbolDomNode(m).skew}var y=n.label==="\\c",A=y?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),P;if(n.isStretchy)P=stretchy.svgSpan(n,e),P=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:P,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+makeEm(2*c)+")",marginLeft:makeEm(2*c)}:void 0}]},e);else{var Z,me;n.label==="\\vec"?(Z=buildCommon.staticSvg("vec",e),me=buildCommon.svgData.vec[1]):(Z=buildCommon.makeOrd({mode:n.mode,text:n.label},e,"textord"),Z=assertSymbolDomNode(Z),Z.italic=0,me=Z.width,y&&(A+=Z.depth)),P=buildCommon.makeSpan(["accent-body"],[Z]);var _e=n.label==="\\textcircled";_e&&(P.classes.push("accent-full"),A=s.height);var Ge=c;_e||(Ge-=me/2),P.style.left=makeEm(Ge),n.label==="\\textcircled"&&(P.style.top=".2em"),P=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-A},{type:"elem",elem:P}]},e)}var ve=buildCommon.makeSpan(["mord","accent"],[P],e);return a?(a.children[0]=ve,a.height=Math.max(ve.height,a.height),a.classes[0]="mord",a):ve},mathmlBuilder$9=(t,e)=>{var r=t.isStretchy?stretchy.mathMLnode(t.label):new mathMLTree.MathNode("mo",[makeText(t.label,t.mode)]),n=new mathMLTree.MathNode("mover",[buildGroup(t.base,e),r]);return n.setAttribute("accent","true"),n},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=normalizeArgument(e[0]),n=!NON_STRETCHY_ACCENT_REGEX.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=buildGroup$1(t.base,e),n=stretchy.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,s=buildCommon.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return buildCommon.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(t,e)=>{var r=stretchy.mathMLnode(t.label),n=new mathMLTree.MathNode("munder",[buildGroup(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var paddedNode=t=>{var e=new mathMLTree.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=buildCommon.wrapFragment(buildGroup$1(t.body,n,e),e),s=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(s+"-arrow-pad");var o;t.below&&(n=e.havingStyle(r.sub()),o=buildCommon.wrapFragment(buildGroup$1(t.below,n,e),e),o.classes.push(s+"-arrow-pad"));var c=stretchy.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,m=-e.fontMetrics().axisHeight-.5*c.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(m-=a.depth);var y;if(o){var A=-e.fontMetrics().axisHeight+o.height+.5*c.height+.111;y=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:m},{type:"elem",elem:c,shift:d},{type:"elem",elem:o,shift:A}]},e)}else y=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:m},{type:"elem",elem:c,shift:d}]},e);return y.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[y],e)},mathmlBuilder(t,e){var r=stretchy.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=paddedNode(buildGroup(t.body,e));if(t.below){var s=paddedNode(buildGroup(t.below,e));n=new mathMLTree.MathNode("munderover",[r,s,a])}else n=new mathMLTree.MathNode("mover",[r,a])}else if(t.below){var o=paddedNode(buildGroup(t.below,e));n=new mathMLTree.MathNode("munder",[r,o])}else n=paddedNode(),n=new mathMLTree.MathNode("mover",[r,n]);return n}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(t,e){var r=buildExpression$1(t.body,e,!0);return makeSpan([t.mclass],r,e)}function mathmlBuilder$8(t,e){var r,n=buildExpression(t.body,e);return t.mclass==="minner"?r=new mathMLTree.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new mathMLTree.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new mathMLTree.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:ordargument(a),isCharacterBox:utils.isCharacterBox(a)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:binrelClass(e[0]),body:ordargument(e[1]),isCharacterBox:utils.isCharacterBox(e[1])}}});defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],s=e[0],o;n!=="\\stackrel"?o=binrelClass(a):o="mrel";var c={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:ordargument(a)},d={type:"supsub",mode:s.mode,base:c,sup:n==="\\underset"?null:s,sub:n==="\\underset"?s:null};return{type:"mclass",mode:r.mode,mclass:o,body:[d],isCharacterBox:utils.isCharacterBox(d)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:binrelClass(e[0]),body:ordargument(e[0])}},htmlBuilder(t,e){var r=buildExpression$1(t.body,e,!0),n=buildCommon.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=buildExpression(t.body,e),n=new mathMLTree.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=t=>t.type==="textord"&&t.text==="@",isLabelEnd=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function cdArrow(t,e,r){var n=cdArrowFunctionName[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:n,mode:"math",family:"rel"},o=r.callFunction("\\Big",[s],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,o,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var m={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[m],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],s=0;s<e.length;s++){for(var o=e[s],c=newCell(),d=0;d<o.length;d++)if(!isStartOfArrow(o[d]))c.body.push(o[d]);else{n.push(c),d+=1;var m=assertSymbolNodeType(o[d]).text,y=new Array(2);if(y[0]={type:"ordgroup",mode:"math",body:[]},y[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(m)>-1))if("<>AV".indexOf(m)>-1)for(var A=0;A<2;A++){for(var P=!0,Z=d+1;Z<o.length;Z++){if(isLabelEnd(o[Z],m)){P=!1,d=Z;break}if(isStartOfArrow(o[Z]))throw new ParseError("Missing a "+m+" character to complete a CD arrow.",o[Z]);y[A].body.push(o[Z])}if(P)throw new ParseError("Missing a "+m+" character to complete a CD arrow.",o[d])}else throw new ParseError('Expected one of "<>AV=|." after @',o[d]);var me=cdArrow(m,y,t),_e={type:"styling",body:[me],mode:"math",style:"display"};n.push(_e),c=newCell()}s%2===0?n.push(c):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var Ge=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:Ge,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=buildCommon.wrapFragment(buildGroup$1(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=makeEm(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mrow",[buildGroup(t.label,e)]);return r=new mathMLTree.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new mathMLTree.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=buildCommon.wrapFragment(buildGroup$1(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new mathMLTree.MathNode("mrow",[buildGroup(t.fragment,e)])}});defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=assertNodeType(e[0],"ordgroup"),a=n.body,s="",o=0;o<a.length;o++){var c=assertNodeType(a[o],"textord");s+=c.text}var d=parseInt(s),m;if(isNaN(d))throw new ParseError("\\@char has non-numeric argument "+s);if(d<0||d>=1114111)throw new ParseError("\\@char with invalid code point "+s);return d<=65535?m=String.fromCharCode(d):(d-=65536,m=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:m}}});var htmlBuilder$8=(t,e)=>{var r=buildExpression$1(t.body,e.withColor(t.color),!1);return buildCommon.makeFragment(r)},mathmlBuilder$7=(t,e)=>{var r=buildExpression(t.body,e.withColor(t.color)),n=new mathMLTree.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=assertNodeType(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:ordargument(a)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=assertNodeType(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var s=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:s}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:s,size:a&&assertNodeType(a,"size").value}},htmlBuilder(t,e){var r=buildCommon.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=makeEm(calculateSize(t.size,e)))),r},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",makeEm(calculateSize(t.size,e)))),r}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ParseError("Expected a control sequence",t);return e},getRHS=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},letCommand=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(globalMap[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=globalMap[n.text]),assertNodeType(e.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",n)}});defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new ParseError("Expected a control sequence",n);for(var s=0,o,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),c[s].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ParseError('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==s+1)throw new ParseError('Argument number "'+n.text+'" out of order');s++,c.push([])}else{if(n.text==="EOF")throw new ParseError("Expected a macro definition");c[s].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return o&&d.unshift(o),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:s,delimiters:c},r===globalMap[r]),{type:"internal",mode:e.mode}}});defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=checkControlSequence(e.gullet.popToken());e.gullet.consumeSpaces();var a=getRHS(e);return letCommand(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=checkControlSequence(e.gullet.popToken()),a=e.gullet.popToken(),s=e.gullet.popToken();return letCommand(e,n,s,r==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var getMetrics=function t(e,r,n){var a=symbols.math[e]&&symbols.math[e].replace,s=getCharacterMetrics(a||e,r,n);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return s},styleWrap=function t(e,r,n,a){var s=n.havingBaseStyle(r),o=buildCommon.makeSpan(a.concat(s.sizingClasses(n)),[e],n),c=s.sizeMultiplier/n.sizeMultiplier;return o.height*=c,o.depth*=c,o.maxFontSize=s.sizeMultiplier,o},centerSpan=function t(e,r,n){var a=r.havingBaseStyle(n),s=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=makeEm(s),e.height-=s,e.depth+=s},makeSmallDelim=function t(e,r,n,a,s,o){var c=buildCommon.makeSymbol(e,"Main-Regular",s,a),d=styleWrap(c,r,a,o);return n&&centerSpan(d,a,r),d},mathrmSize=function t(e,r,n,a){return buildCommon.makeSymbol(e,"Size"+r+"-Regular",n,a)},makeLargeDelim=function t(e,r,n,a,s,o){var c=mathrmSize(e,r,s,a),d=styleWrap(buildCommon.makeSpan(["delimsizing","size"+r],[c],a),Style$1.TEXT,a,o);return n&&centerSpan(d,a,Style$1.TEXT),d},makeGlyphSpan=function t(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var s=buildCommon.makeSpan(["delimsizinginner",a],[buildCommon.makeSpan([],[buildCommon.makeSymbol(e,r,n)])]);return{type:"elem",elem:s}},makeInner=function t(e,r,n){var a=fontMetricsData["Size4-Regular"][e.charCodeAt(0)]?fontMetricsData["Size4-Regular"][e.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][e.charCodeAt(0)][4],s=new PathNode("inner",innerPath(e,Math.round(1e3*r))),o=new SvgNode([s],{width:makeEm(a),height:makeEm(r),style:"width:"+makeEm(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=buildCommon.makeSvgSpan([],[o],n);return c.height=r,c.style.height=makeEm(r),c.style.width=makeEm(a),{type:"elem",elem:c}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function t(e,r,n,a,s,o){var c,d,m,y,A="",P=0;c=m=y=e,d=null;var Z="Size1-Regular";e==="\\uparrow"?m=y="⏐":e==="\\Uparrow"?m=y="‖":e==="\\downarrow"?c=m="⏐":e==="\\Downarrow"?c=m="‖":e==="\\updownarrow"?(c="\\uparrow",m="⏐",y="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",m="‖",y="\\Downarrow"):utils.contains(verts,e)?(m="∣",A="vert",P=333):utils.contains(doubleVerts,e)?(m="∥",A="doublevert",P=556):e==="["||e==="\\lbrack"?(c="⎡",m="⎢",y="⎣",Z="Size4-Regular",A="lbrack",P=667):e==="]"||e==="\\rbrack"?(c="⎤",m="⎥",y="⎦",Z="Size4-Regular",A="rbrack",P=667):e==="\\lfloor"||e==="⌊"?(m=c="⎢",y="⎣",Z="Size4-Regular",A="lfloor",P=667):e==="\\lceil"||e==="⌈"?(c="⎡",m=y="⎢",Z="Size4-Regular",A="lceil",P=667):e==="\\rfloor"||e==="⌋"?(m=c="⎥",y="⎦",Z="Size4-Regular",A="rfloor",P=667):e==="\\rceil"||e==="⌉"?(c="⎤",m=y="⎥",Z="Size4-Regular",A="rceil",P=667):e==="("||e==="\\lparen"?(c="⎛",m="⎜",y="⎝",Z="Size4-Regular",A="lparen",P=875):e===")"||e==="\\rparen"?(c="⎞",m="⎟",y="⎠",Z="Size4-Regular",A="rparen",P=875):e==="\\{"||e==="\\lbrace"?(c="⎧",d="⎨",y="⎩",m="⎪",Z="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="⎫",d="⎬",y="⎭",m="⎪",Z="Size4-Regular"):e==="\\lgroup"||e==="⟮"?(c="⎧",y="⎩",m="⎪",Z="Size4-Regular"):e==="\\rgroup"||e==="⟯"?(c="⎫",y="⎭",m="⎪",Z="Size4-Regular"):e==="\\lmoustache"||e==="⎰"?(c="⎧",y="⎭",m="⎪",Z="Size4-Regular"):(e==="\\rmoustache"||e==="⎱")&&(c="⎫",y="⎩",m="⎪",Z="Size4-Regular");var me=getMetrics(c,Z,s),_e=me.height+me.depth,Ge=getMetrics(m,Z,s),ve=Ge.height+Ge.depth,He=getMetrics(y,Z,s),De=He.height+He.depth,Xe=0,Bs=1;if(d!==null){var wt=getMetrics(d,Z,s);Xe=wt.height+wt.depth,Bs=2}var li=_e+De+Xe,An=Math.max(0,Math.ceil((r-li)/(Bs*ve))),Os=li+An*Bs*ve,vh=a.fontMetrics().axisHeight;n&&(vh*=a.sizeMultiplier);var Fc=Os/2-vh,Hc=[];if(A.length>0){var qc=Os-_e-De,e1=Math.round(Os*1e3),df=tallDelim(A,Math.round(qc*1e3)),So=new PathNode(A,df),th=(P/1e3).toFixed(3)+"em",Rs=(e1/1e3).toFixed(3)+"em",Ko=new SvgNode([So],{width:th,height:Rs,viewBox:"0 0 "+P+" "+e1}),Vc=buildCommon.makeSvgSpan([],[Ko],a);Vc.height=e1/1e3,Vc.style.width=th,Vc.style.height=Rs,Hc.push({type:"elem",elem:Vc})}else{if(Hc.push(makeGlyphSpan(y,Z,s)),Hc.push(lap),d===null){var yh=Os-_e-De+2*lapInEms;Hc.push(makeInner(m,yh,a))}else{var wh=(Os-_e-De-Xe)/2+2*lapInEms;Hc.push(makeInner(m,wh,a)),Hc.push(lap),Hc.push(makeGlyphSpan(d,Z,s)),Hc.push(lap),Hc.push(makeInner(m,wh,a))}Hc.push(lap),Hc.push(makeGlyphSpan(c,Z,s))}var uf=a.havingBaseStyle(Style$1.TEXT),i1=buildCommon.makeVList({positionType:"bottom",positionData:Fc,children:Hc},uf);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[i1],uf),Style$1.TEXT,a,o)},vbPad=80,emPad=.08,sqrtSvg=function t(e,r,n,a,s){var o=sqrtPath(e,a,n),c=new PathNode(e,o),d=new SvgNode([c],{width:"400em",height:makeEm(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[d],s)},makeSqrtImage=function t(e,r){var n=r.havingBaseSizing(),a=traverseSequence("\\surd",e*n.sizeMultiplier,stackLargeDelimiterSequence,n),s=n.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,m=0,y=0,A;return a.type==="small"?(y=1e3+1e3*o+vbPad,e<1?s=1:e<1.4&&(s=.7),d=(1+o+emPad)/s,m=(1+o)/s,c=sqrtSvg("sqrtMain",d,y,o,r),c.style.minWidth="0.853em",A=.833/s):a.type==="large"?(y=(1e3+vbPad)*sizeToMaxHeight[a.size],m=(sizeToMaxHeight[a.size]+o)/s,d=(sizeToMaxHeight[a.size]+o+emPad)/s,c=sqrtSvg("sqrtSize"+a.size,d,y,o,r),c.style.minWidth="1.02em",A=1/s):(d=e+o+emPad,m=e+o,y=Math.floor(1e3*e+o)+vbPad,c=sqrtSvg("sqrtTall",d,y,o,r),c.style.minWidth="0.742em",A=1.056),c.height=m,c.style.height=makeEm(d),{span:c,advanceWidth:A,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*s}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function t(e,r,n,a,s){if(e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle"),utils.contains(stackLargeDelimiters,e)||utils.contains(stackNeverDelimiters,e))return makeLargeDelim(e,r,!1,n,a,s);if(utils.contains(stackAlwaysDelimiters,e))return makeStackedDelim(e,sizeToMaxHeight[r],!1,n,a,s);throw new ParseError("Illegal delimiter: '"+e+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function t(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},traverseSequence=function t(e,r,n,a){for(var s=Math.min(2,3-a.style.size),o=s;o<n.length&&n[o].type!=="stack";o++){var c=getMetrics(e,delimTypeToFont(n[o]),"math"),d=c.height+c.depth;if(n[o].type==="small"){var m=a.havingBaseStyle(n[o].style);d*=m.sizeMultiplier}if(d>r)return n[o]}return n[n.length-1]},makeCustomSizedDelim=function t(e,r,n,a,s,o){e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle");var c;utils.contains(stackNeverDelimiters,e)?c=stackNeverDelimiterSequence:utils.contains(stackLargeDelimiters,e)?c=stackLargeDelimiterSequence:c=stackAlwaysDelimiterSequence;var d=traverseSequence(e,r,c,a);return d.type==="small"?makeSmallDelim(e,d.style,n,a,s,o):d.type==="large"?makeLargeDelim(e,d.size,n,a,s,o):makeStackedDelim(e,r,n,a,s,o)},makeLeftRightDelim=function t(e,r,n,a,s,o){var c=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,m=5/a.fontMetrics().ptPerEm,y=Math.max(r-c,n+c),A=Math.max(y/500*d,2*y-m);return makeCustomSizedDelim(e,A,!0,a,s,o)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(t,e){var r=checkSymbolNodeType(t);if(r&&utils.contains(delimiters,r.text))return r;throw r?new ParseError("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new ParseError("Invalid delimiter type '"+t.type+"'",t)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=checkDelimiter(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:delimiterSizes[t.funcName].size,mclass:delimiterSizes[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?buildCommon.makeSpan([t.mclass]):delimiter.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(makeText(t.delim,t.mode));var r=new mathMLTree.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=makeEm(delimiter.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function assertParsed(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:checkDelimiter(e[0],t).text,color:r}}});defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=checkDelimiter(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var s=assertNodeType(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:s.delim,rightColor:s.color}},htmlBuilder:(t,e)=>{assertParsed(t);for(var r=buildExpression$1(t.body,e,!0,["mopen","mclose"]),n=0,a=0,s=!1,o=0;o<r.length;o++)r[o].isMiddle?s=!0:(n=Math.max(r[o].height,n),a=Math.max(r[o].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var c;if(t.left==="."?c=makeNullDelimiter(e,["mopen"]):c=delimiter.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(c),s)for(var d=1;d<r.length;d++){var m=r[d],y=m.isMiddle;y&&(r[d]=delimiter.leftRightDelim(y.delim,n,a,y.options,t.mode,[]))}var A;if(t.right===".")A=makeNullDelimiter(e,["mclose"]);else{var P=t.rightColor?e.withColor(t.rightColor):e;A=delimiter.leftRightDelim(t.right,n,a,P,t.mode,["mclose"])}return r.push(A),buildCommon.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{assertParsed(t);var r=buildExpression(t.body,e);if(t.left!=="."){var n=new mathMLTree.MathNode("mo",[makeText(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new mathMLTree.MathNode("mo",[makeText(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return makeRow(r)}});defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=checkDelimiter(e[0],t);if(!t.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=makeNullDelimiter(e,[]);else{r=delimiter.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?makeText("|","text"):makeText(t.delim,t.mode),n=new mathMLTree.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var htmlBuilder$7=(t,e)=>{var r=buildCommon.wrapFragment(buildGroup$1(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,s,o=0,c=utils.isCharacterBox(t.body);if(n==="sout")s=buildCommon.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/a,o=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=calculateSize({number:.6,unit:"pt"},e),m=calculateSize({number:.35,unit:"ex"},e),y=e.havingBaseSizing();a=a/y.sizeMultiplier;var A=r.height+r.depth+d+m;r.style.paddingLeft=makeEm(A/2+d);var P=Math.floor(1e3*A*a),Z=phasePath(P),me=new SvgNode([new PathNode("phase",Z)],{width:"400em",height:makeEm(P/1e3),viewBox:"0 0 400000 "+P,preserveAspectRatio:"xMinYMin slice"});s=buildCommon.makeSvgSpan(["hide-tail"],[me],e),s.style.height=makeEm(A),o=r.depth+d+m}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var _e=0,Ge=0,ve=0;/box/.test(n)?(ve=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),_e=e.fontMetrics().fboxsep+(n==="colorbox"?0:ve),Ge=_e):n==="angl"?(ve=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),_e=4*ve,Ge=Math.max(0,.25-r.depth)):(_e=c?.2:0,Ge=_e),s=stretchy.encloseSpan(r,n,_e,Ge,e),/fbox|boxed|fcolorbox/.test(n)?(s.style.borderStyle="solid",s.style.borderWidth=makeEm(ve)):n==="angl"&&ve!==.049&&(s.style.borderTopWidth=makeEm(ve),s.style.borderRightWidth=makeEm(ve)),o=r.depth+Ge,t.backgroundColor&&(s.style.backgroundColor=t.backgroundColor,t.borderColor&&(s.style.borderColor=t.borderColor))}var He;if(t.backgroundColor)He=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:r,shift:0}]},e);else{var De=/cancel|phase/.test(n)?["svg-align"]:[];He=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:De}]},e)}return/cancel/.test(n)&&(He.height=r.height,He.depth=r.depth),/cancel/.test(n)&&!c?buildCommon.makeSpan(["mord","cancel-lap"],[He],e):buildCommon.makeSpan(["mord"],[He],e)},mathmlBuilder$6=(t,e)=>{var r=0,n=new mathMLTree.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,s=assertNodeType(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:s,body:o}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,s=assertNodeType(e[0],"color-token").color,o=assertNodeType(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:o,borderColor:s,body:c}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var _environments={};function defineEnvironment(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:s,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)_environments[r[d]]=c;s&&(_htmlGroupBuilders[e]=s),o&&(_mathmlGroupBuilders[e]=o)}var _macros={};function defineMacro(t,e){_macros[t]=e}function getHLines(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var validateAmsEnvironmentContext=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ParseError("{"+t.envName+"} can be used only in display mode.")};function getAutoTag(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function parseArray(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:s,arraystretch:o,colSeparationType:c,autoTag:d,singleRow:m,emptySingleRow:y,maxNumCols:A,leqno:P}=e;if(t.gullet.beginGroup(),m||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var Z=t.gullet.expandMacroAsText("\\arraystretch");if(Z==null)o=1;else if(o=parseFloat(Z),!o||o<0)throw new ParseError("Invalid \\arraystretch: "+Z)}t.gullet.beginGroup();var me=[],_e=[me],Ge=[],ve=[],He=d!=null?[]:void 0;function De(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function Xe(){He&&(t.gullet.macros.get("\\df@tag")?(He.push(t.subparse([new Token("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):He.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(De(),ve.push(getHLines(t));;){var Bs=t.parseExpression(!1,m?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),Bs={type:"ordgroup",mode:t.mode,body:Bs},r&&(Bs={type:"styling",mode:t.mode,style:r,body:[Bs]}),me.push(Bs);var wt=t.fetch().text;if(wt==="&"){if(A&&me.length===A){if(m||c)throw new ParseError("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(wt==="\\end"){Xe(),me.length===1&&Bs.type==="styling"&&Bs.body[0].body.length===0&&(_e.length>1||!y)&&_e.pop(),ve.length<_e.length+1&&ve.push([]);break}else if(wt==="\\\\"){t.consume();var li=void 0;t.gullet.future().text!==" "&&(li=t.parseSizeGroup(!0)),Ge.push(li?li.value:null),Xe(),ve.push(getHLines(t)),me=[],_e.push(me),De()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:o,body:_e,cols:s,rowGaps:Ge,hskipBeforeAndAfter:n,hLinesBeforeRow:ve,colSeparationType:c,tags:He,leqno:P}}function dCellStyle(t){return t.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function t(e,r){var n,a,s=e.body.length,o=e.hLinesBeforeRow,c=0,d=new Array(s),m=[],y=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),A=1/r.fontMetrics().ptPerEm,P=5*A;if(e.colSeparationType&&e.colSeparationType==="small"){var Z=r.havingStyle(Style$1.SCRIPT).sizeMultiplier;P=.2778*(Z/r.sizeMultiplier)}var me=e.colSeparationType==="CD"?calculateSize({number:3,unit:"ex"},r):12*A,_e=3*A,Ge=e.arraystretch*me,ve=.7*Ge,He=.3*Ge,De=0;function Xe(gy){for(var my=0;my<gy.length;++my)my>0&&(De+=.25),m.push({pos:De,isDashed:gy[my]})}for(Xe(o[0]),n=0;n<e.body.length;++n){var Bs=e.body[n],wt=ve,li=He;c<Bs.length&&(c=Bs.length);var An=new Array(Bs.length);for(a=0;a<Bs.length;++a){var Os=buildGroup$1(Bs[a],r);li<Os.depth&&(li=Os.depth),wt<Os.height&&(wt=Os.height),An[a]=Os}var vh=e.rowGaps[n],Fc=0;vh&&(Fc=calculateSize(vh,r),Fc>0&&(Fc+=He,li<Fc&&(li=Fc),Fc=0)),e.addJot&&(li+=_e),An.height=wt,An.depth=li,De+=wt,An.pos=De,De+=li+Fc,d[n]=An,Xe(o[n+1])}var Hc=De/2+r.fontMetrics().axisHeight,qc=e.cols||[],e1=[],df,So,th=[];if(e.tags&&e.tags.some(gy=>gy))for(n=0;n<s;++n){var Rs=d[n],Ko=Rs.pos-Hc,Vc=e.tags[n],yh=void 0;Vc===!0?yh=buildCommon.makeSpan(["eqn-num"],[],r):Vc===!1?yh=buildCommon.makeSpan([],[],r):yh=buildCommon.makeSpan([],buildExpression$1(Vc,r,!0),r),yh.depth=Rs.depth,yh.height=Rs.height,th.push({type:"elem",elem:yh,shift:Ko})}for(a=0,So=0;a<c||So<qc.length;++a,++So){for(var wh=qc[So]||{},uf=!0;wh.type==="separator";){if(uf||(df=buildCommon.makeSpan(["arraycolsep"],[]),df.style.width=makeEm(r.fontMetrics().doubleRuleSep),e1.push(df)),wh.separator==="|"||wh.separator===":"){var i1=wh.separator==="|"?"solid":"dashed",u1=buildCommon.makeSpan(["vertical-separator"],[],r);u1.style.height=makeEm(De),u1.style.borderRightWidth=makeEm(y),u1.style.borderRightStyle=i1,u1.style.margin="0 "+makeEm(-y/2);var h1=De-Hc;h1&&(u1.style.verticalAlign=makeEm(-h1)),e1.push(u1)}else throw new ParseError("Invalid separator type: "+wh.separator);So++,wh=qc[So]||{},uf=!1}if(!(a>=c)){var T1=void 0;(a>0||e.hskipBeforeAndAfter)&&(T1=utils.deflt(wh.pregap,P),T1!==0&&(df=buildCommon.makeSpan(["arraycolsep"],[]),df.style.width=makeEm(T1),e1.push(df)));var p1=[];for(n=0;n<s;++n){var j1=d[n],C1=j1[a];if(C1){var k1=j1.pos-Hc;C1.depth=j1.depth,C1.height=j1.height,p1.push({type:"elem",elem:C1,shift:k1})}}p1=buildCommon.makeVList({positionType:"individualShift",children:p1},r),p1=buildCommon.makeSpan(["col-align-"+(wh.align||"c")],[p1]),e1.push(p1),(a<c-1||e.hskipBeforeAndAfter)&&(T1=utils.deflt(wh.postgap,P),T1!==0&&(df=buildCommon.makeSpan(["arraycolsep"],[]),df.style.width=makeEm(T1),e1.push(df)))}}if(d=buildCommon.makeSpan(["mtable"],e1),m.length>0){for(var X1=buildCommon.makeLineSpan("hline",r,y),D1=buildCommon.makeLineSpan("hdashline",r,y),m1=[{type:"elem",elem:d,shift:0}];m.length>0;){var xy=m.pop(),Py=xy.pos-Hc;xy.isDashed?m1.push({type:"elem",elem:D1,shift:Py}):m1.push({type:"elem",elem:X1,shift:Py})}d=buildCommon.makeVList({positionType:"individualShift",children:m1},r)}if(th.length===0)return buildCommon.makeSpan(["mord"],[d],r);var Q1=buildCommon.makeVList({positionType:"individualShift",children:th},r);return Q1=buildCommon.makeSpan(["tag"],[Q1],r),buildCommon.makeFragment([d,Q1])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function t(e,r){for(var n=[],a=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),s=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var c=e.body[o],d=[],m=0;m<c.length;m++)d.push(new mathMLTree.MathNode("mtd",[buildGroup(c[m],r)]));e.tags&&e.tags[o]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(s):d.push(s)),n.push(new mathMLTree.MathNode("mtr",d))}var y=new mathMLTree.MathNode("mtable",n),A=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);y.setAttribute("rowspacing",makeEm(A));var P="",Z="";if(e.cols&&e.cols.length>0){var me=e.cols,_e="",Ge=!1,ve=0,He=me.length;me[0].type==="separator"&&(P+="top ",ve=1),me[me.length-1].type==="separator"&&(P+="bottom ",He-=1);for(var De=ve;De<He;De++)me[De].type==="align"?(Z+=alignMap[me[De].align],Ge&&(_e+="none "),Ge=!0):me[De].type==="separator"&&Ge&&(_e+=me[De].separator==="|"?"solid ":"dashed ",Ge=!1);y.setAttribute("columnalign",Z.trim()),/[sd]/.test(_e)&&y.setAttribute("columnlines",_e.trim())}if(e.colSeparationType==="align"){for(var Xe=e.cols||[],Bs="",wt=1;wt<Xe.length;wt++)Bs+=wt%2?"0em ":"1em ";y.setAttribute("columnspacing",Bs.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?y.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?y.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?y.setAttribute("columnspacing","0.5em"):y.setAttribute("columnspacing","1em");var li="",An=e.hLinesBeforeRow;P+=An[0].length>0?"left ":"",P+=An[An.length-1].length>0?"right ":"";for(var Os=1;Os<An.length-1;Os++)li+=An[Os].length===0?"none ":An[Os][0]?"dashed ":"solid ";return/[sd]/.test(li)&&y.setAttribute("rowlines",li.trim()),P!==""&&(y=new mathMLTree.MathNode("menclose",[y]),y.setAttribute("notation",P.trim())),e.arraystretch&&e.arraystretch<1&&(y=new mathMLTree.MathNode("mstyle",[y]),y.setAttribute("scriptlevel","1")),y},alignedHandler=function t(e,r){e.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",o=parseArray(e.parser,{cols:n,addJot:!0,autoTag:s?void 0:getAutoTag(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,m={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var y="",A=0;A<r[0].body.length;A++){var P=assertNodeType(r[0].body[A],"textord");y+=P.text}c=Number(y),d=c*2}var Z=!d;o.body.forEach(function(ve){for(var He=1;He<ve.length;He+=2){var De=assertNodeType(ve[He],"styling"),Xe=assertNodeType(De.body[0],"ordgroup");Xe.body.unshift(m)}if(Z)d<ve.length&&(d=ve.length);else{var Bs=ve.length/2;if(c<Bs)throw new ParseError("Too many math in a row: "+("expected "+c+", but got "+Bs),ve[0])}});for(var me=0;me<d;++me){var _e="r",Ge=0;me%2===1?_e="l":me>0&&Z&&(Ge=1),n[me]={type:"align",align:_e,pregap:Ge,postgap:0}}return o.colSeparationType=Z?"align":"alignat",o};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=checkSymbolNodeType(e[0]),n=r?[e[0]]:assertNodeType(e[0],"ordgroup").body,a=n.map(function(o){var c=assertSymbolNodeType(o),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+d,o)}),s={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return parseArray(t.parser,s,dCellStyle(t.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new ParseError("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var s=parseArray(t.parser,n,dCellStyle(t.envName)),o=Math.max(0,...s.body.map(c=>c.length));return s.cols=new Array(o).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=parseArray(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=checkSymbolNodeType(e[0]),n=r?[e[0]]:assertNodeType(e[0],"ordgroup").body,a=n.map(function(o){var c=assertSymbolNodeType(o),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new ParseError("Unknown column alignment: "+d,o)});if(a.length>1)throw new ParseError("{subarray} can contain only one column");var s={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=parseArray(t.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return s},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=parseArray(t.parser,e,dCellStyle(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){utils.contains(["gather","gather*"],t.envName)&&validateAmsEnvironmentContext(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return parseArray(t.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){validateAmsEnvironmentContext(t);var e={autoTag:getAutoTag(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return parseArray(t.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(t){return validateAmsEnvironmentContext(t),parseCD(t.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineMacro("\\nonumber","\\gdef\\@eqnsw{0}");defineMacro("\\notag","\\nonumber");defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ParseError(t.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new ParseError("Invalid environment name",a);for(var s="",o=0;o<a.body.length;++o)s+=assertNodeType(a.body[o],"textord").text;if(n==="\\begin"){if(!environments.hasOwnProperty(s))throw new ParseError("No such environment: "+s,a);var c=environments[s],{args:d,optArgs:m}=r.parseArguments("\\begin{"+s+"}",c),y={mode:r.mode,envName:s,parser:r},A=c.handler(y,d,m);r.expect("\\end",!1);var P=r.nextToken,Z=assertNodeType(r.parseFunction(),"environment");if(Z.name!==s)throw new ParseError("Mismatch: \\begin{"+s+"} matched by \\end{"+Z.name+"}",P);return A}return{type:"environment",mode:r.mode,name:s,nameGroup:a}}});var htmlBuilder$5=(t,e)=>{var r=t.font,n=e.withFont(r);return buildGroup$1(t.body,n)},mathmlBuilder$4=(t,e)=>{var r=t.font,n=e.withFont(r);return buildGroup(t.body,n)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=normalizeArgument(e[0]),s=n;return s in fontAliases&&(s=fontAliases[s]),{type:"font",mode:r.mode,font:s.slice(1),body:a}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=utils.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:binrelClass(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:s}=r,o=r.parseExpression(!0,a),c="math"+n.slice(1);return{type:"font",mode:s,font:c,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(t,e)=>{var r=e;return t==="display"?r=r.id>=Style$1.SCRIPT.id?r.text():Style$1.DISPLAY:t==="text"&&r.size===Style$1.DISPLAY.size?r=Style$1.TEXT:t==="script"?r=Style$1.SCRIPT:t==="scriptscript"&&(r=Style$1.SCRIPTSCRIPT),r},htmlBuilder$4=(t,e)=>{var r=adjustStyle(t.size,e.style),n=r.fracNum(),a=r.fracDen(),s;s=e.havingStyle(n);var o=buildGroup$1(t.numer,s,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;o.height=o.height<c?c:o.height,o.depth=o.depth<d?d:o.depth}s=e.havingStyle(a);var m=buildGroup$1(t.denom,s,e),y,A,P;t.hasBarLine?(t.barSize?(A=calculateSize(t.barSize,e),y=buildCommon.makeLineSpan("frac-line",e,A)):y=buildCommon.makeLineSpan("frac-line",e),A=y.height,P=y.height):(y=null,A=0,P=e.fontMetrics().defaultRuleThickness);var Z,me,_e;r.size===Style$1.DISPLAY.size||t.size==="display"?(Z=e.fontMetrics().num1,A>0?me=3*P:me=7*P,_e=e.fontMetrics().denom1):(A>0?(Z=e.fontMetrics().num2,me=P):(Z=e.fontMetrics().num3,me=3*P),_e=e.fontMetrics().denom2);var Ge;if(y){var He=e.fontMetrics().axisHeight;Z-o.depth-(He+.5*A)<me&&(Z+=me-(Z-o.depth-(He+.5*A))),He-.5*A-(m.height-_e)<me&&(_e+=me-(He-.5*A-(m.height-_e)));var De=-(He-.5*A);Ge=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:m,shift:_e},{type:"elem",elem:y,shift:De},{type:"elem",elem:o,shift:-Z}]},e)}else{var ve=Z-o.depth-(m.height-_e);ve<me&&(Z+=.5*(me-ve),_e+=.5*(me-ve)),Ge=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:m,shift:_e},{type:"elem",elem:o,shift:-Z}]},e)}s=e.havingStyle(r),Ge.height*=s.sizeMultiplier/e.sizeMultiplier,Ge.depth*=s.sizeMultiplier/e.sizeMultiplier;var Xe;r.size===Style$1.DISPLAY.size?Xe=e.fontMetrics().delim1:r.size===Style$1.SCRIPTSCRIPT.size?Xe=e.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:Xe=e.fontMetrics().delim2;var Bs,wt;return t.leftDelim==null?Bs=makeNullDelimiter(e,["mopen"]):Bs=delimiter.customSizedDelim(t.leftDelim,Xe,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?wt=buildCommon.makeSpan([]):t.rightDelim==null?wt=makeNullDelimiter(e,["mclose"]):wt=delimiter.customSizedDelim(t.rightDelim,Xe,!0,e.havingStyle(r),t.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(s.sizingClasses(e)),[Bs,buildCommon.makeSpan(["mfrac"],[Ge]),wt],e)},mathmlBuilder$3=(t,e)=>{var r=new mathMLTree.MathNode("mfrac",[buildGroup(t.numer,e),buildGroup(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=calculateSize(t.barSize,e);r.setAttribute("linethickness",makeEm(n))}var a=adjustStyle(t.size,e.style);if(a.size!==e.style.size){r=new mathMLTree.MathNode("mstyle",[r]);var s=a.size===Style$1.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",s),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var c=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),o.push(c)}if(o.push(r),t.rightDelim!=null){var d=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),o.push(d)}return makeRow(o)}return r};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],s=e[1],o,c=null,d=null,m="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,c="(",d=")";break;case"\\\\bracefrac":o=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":o=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":m="display";break;case"\\tfrac":case"\\tbinom":m="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:s,hasBarLine:o,leftDelim:c,rightDelim:d,size:m,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],s=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function t(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],s=normalizeArgument(e[0]),o=s.type==="atom"&&s.family==="open"?delimFromValue(s.text):null,c=normalizeArgument(e[1]),d=c.type==="atom"&&c.family==="close"?delimFromValue(c.text):null,m=assertNodeType(e[2],"size"),y,A=null;m.isBlank?y=!0:(A=m.value,y=A.number>0);var P="auto",Z=e[3];if(Z.type==="ordgroup"){if(Z.body.length>0){var me=assertNodeType(Z.body[0],"textord");P=stylArray[Number(me.text)]}}else Z=assertNodeType(Z,"textord"),P=stylArray[Number(Z.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:y,barSize:A,leftDelim:o,rightDelim:d,size:P}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(e[0],"size").value,token:a}}});defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],s=assert(assertNodeType(e[1],"infix").size),o=e[2],c=s.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:o,continued:!1,hasBarLine:c,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?buildGroup$1(t.sup,e.havingStyle(r.sup()),e):buildGroup$1(t.sub,e.havingStyle(r.sub()),e),a=assertNodeType(t.base,"horizBrace")):a=assertNodeType(t,"horizBrace");var s=buildGroup$1(a.base,e.havingBaseStyle(Style$1.DISPLAY)),o=stretchy.svgSpan(a,e),c;if(a.isOver?(c=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=buildCommon.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=buildCommon.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e);a.isOver?c=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=buildCommon.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return buildCommon.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e)},mathmlBuilder$2=(t,e)=>{var r=stretchy.mathMLnode(t.label);return new mathMLTree.MathNode(t.isOver?"mover":"munder",[buildGroup(t.base,e),r])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2});defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=assertNodeType(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:ordargument(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=buildExpression$1(t.body,e,!1);return buildCommon.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=buildExpressionRow(t.body,e);return r instanceof MathNode||(r=new MathNode("mrow",[r])),r.setAttribute("href",t.href),r}});defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=assertNodeType(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],s=0;s<n.length;s++){var o=n[s];o==="~"&&(o="\\textasciitilde"),a.push({type:"textord",mode:"text",text:o})}var c={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:ordargument(c)}}});defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:ordargument(e[0])}},htmlBuilder(t,e){var r=buildExpression$1(t.body,e,!1);return buildCommon.makeFragment(r)},mathmlBuilder(t,e){return new mathMLTree.MathNode("mrow",buildExpression(t.body,e))}});defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,s=assertNodeType(e[0],"raw").string,o=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=s,c={command:"\\htmlClass",class:s};break;case"\\htmlId":d.id=s,c={command:"\\htmlId",id:s};break;case"\\htmlStyle":d.style=s,c={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var m=s.split(","),y=0;y<m.length;y++){var A=m[y].split("=");if(A.length!==2)throw new ParseError("Error parsing key-value for \\htmlData");d["data-"+A[0].trim()]=A[1].trim()}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:ordargument(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=buildExpression$1(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=buildCommon.makeSpan(n,r,e);for(var s in t.attributes)s!=="class"&&t.attributes.hasOwnProperty(s)&&a.setAttribute(s,t.attributes[s]);return a},mathmlBuilder:(t,e)=>buildExpressionRow(t.body,e)});defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:ordargument(e[0]),mathml:ordargument(e[1])}},htmlBuilder:(t,e)=>{var r=buildExpression$1(t.html,e,!1);return buildCommon.makeFragment(r)},mathmlBuilder:(t,e)=>buildExpressionRow(t.mathml,e)});var sizeData=function t(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new ParseError("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!validUnit(n))throw new ParseError("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},c="";if(r[0])for(var d=assertNodeType(r[0],"raw").string,m=d.split(","),y=0;y<m.length;y++){var A=m[y].split("=");if(A.length===2){var P=A[1].trim();switch(A[0].trim()){case"alt":c=P;break;case"width":a=sizeData(P);break;case"height":s=sizeData(P);break;case"totalheight":o=sizeData(P);break;default:throw new ParseError("Invalid key: '"+A[0]+"' in \\includegraphics.")}}}var Z=assertNodeType(e[0],"url").url;return c===""&&(c=Z,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:Z})?{type:"includegraphics",mode:n.mode,alt:c,width:a,height:s,totalheight:o,src:Z}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=calculateSize(t.height,e),n=0;t.totalheight.number>0&&(n=calculateSize(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=calculateSize(t.width,e));var s={height:makeEm(r+n)};a>0&&(s.width=makeEm(a)),n>0&&(s.verticalAlign=makeEm(-n));var o=new Img(t.src,t.alt,s);return o.height=r,o.depth=n,o},mathmlBuilder:(t,e)=>{var r=new mathMLTree.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=calculateSize(t.height,e),a=0;if(t.totalheight.number>0&&(a=calculateSize(t.totalheight,e)-n,r.setAttribute("valign",makeEm(-a))),r.setAttribute("height",makeEm(n+a)),t.width.number>0){var s=calculateSize(t.width,e);r.setAttribute("width",makeEm(s))}return r.setAttribute("src",t.src),r}});defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=assertNodeType(e[0],"size");if(r.settings.strict){var s=n[1]==="m",o=a.value.unit==="mu";s?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return buildCommon.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=calculateSize(t.dimension,e);return new mathMLTree.SpaceNode(r)}});defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=buildCommon.makeSpan([],[buildGroup$1(t.body,e)]),r=buildCommon.makeSpan(["inner"],[r],e)):r=buildCommon.makeSpan(["inner"],[buildGroup$1(t.body,e)]);var n=buildCommon.makeSpan(["fix"],[]),a=buildCommon.makeSpan([t.alignment],[r,n],e),s=buildCommon.makeSpan(["strut"]);return s.style.height=makeEm(a.height+a.depth),a.depth&&(s.style.verticalAlign=makeEm(-a.depth)),a.children.unshift(s),a=buildCommon.makeSpan(["thinbox"],[a],e),buildCommon.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var s=r==="\\("?"\\)":"$",o=n.parseExpression(!1,s);return n.expect(s),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:o}}});defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ParseError("Mismatched "+t.funcName)}});var chooseMathStyle=(t,e)=>{switch(e.style.size){case Style$1.DISPLAY.size:return t.display;case Style$1.TEXT.size:return t.text;case Style$1.SCRIPT.size:return t.script;case Style$1.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:ordargument(e[0]),text:ordargument(e[1]),script:ordargument(e[2]),scriptscript:ordargument(e[3])}},htmlBuilder:(t,e)=>{var r=chooseMathStyle(t,e),n=buildExpression$1(r,e,!1);return buildCommon.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=chooseMathStyle(t,e);return buildExpressionRow(r,e)}});var assembleSupSub=(t,e,r,n,a,s,o)=>{t=buildCommon.makeSpan([],[t]);var c=r&&utils.isCharacterBox(r),d,m;if(e){var y=buildGroup$1(e,n.havingStyle(a.sup()),n);m={elem:y,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-y.depth)}}if(r){var A=buildGroup$1(r,n.havingStyle(a.sub()),n);d={elem:A,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-A.height)}}var P;if(m&&d){var Z=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+o;P=buildCommon.makeVList({positionType:"bottom",positionData:Z,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:makeEm(-s)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:m.kern},{type:"elem",elem:m.elem,marginLeft:makeEm(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var me=t.height-o;P=buildCommon.makeVList({positionType:"top",positionData:me,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:makeEm(-s)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(m){var _e=t.depth+o;P=buildCommon.makeVList({positionType:"bottom",positionData:_e,children:[{type:"elem",elem:t},{type:"kern",size:m.kern},{type:"elem",elem:m.elem,marginLeft:makeEm(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var Ge=[P];if(d&&s!==0&&!c){var ve=buildCommon.makeSpan(["mspace"],[],n);ve.style.marginRight=makeEm(s),Ge.unshift(ve)}return buildCommon.makeSpan(["mop","op-limits"],Ge,n)},noSuccessor=["\\smallint"],htmlBuilder$2=(t,e)=>{var r,n,a=!1,s;t.type==="supsub"?(r=t.sup,n=t.sub,s=assertNodeType(t.base,"op"),a=!0):s=assertNodeType(t,"op");var o=e.style,c=!1;o.size===Style$1.DISPLAY.size&&s.symbol&&!utils.contains(noSuccessor,s.name)&&(c=!0);var d;if(s.symbol){var m=c?"Size2-Regular":"Size1-Regular",y="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(y=s.name.slice(1),s.name=y==="oiint"?"\\iint":"\\iiint"),d=buildCommon.makeSymbol(s.name,m,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),y.length>0){var A=d.italic,P=buildCommon.staticSvg(y+"Size"+(c?"2":"1"),e);d=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:P,shift:c?.08:0}]},e),s.name="\\"+y,d.classes.unshift("mop"),d.italic=A}}else if(s.body){var Z=buildExpression$1(s.body,e,!0);Z.length===1&&Z[0]instanceof SymbolNode?(d=Z[0],d.classes[0]="mop"):d=buildCommon.makeSpan(["mop"],Z,e)}else{for(var me=[],_e=1;_e<s.name.length;_e++)me.push(buildCommon.mathsym(s.name[_e],s.mode,e));d=buildCommon.makeSpan(["mop"],me,e)}var Ge=0,ve=0;return(d instanceof SymbolNode||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(Ge=(d.height-d.depth)/2-e.fontMetrics().axisHeight,ve=d.italic),a?assembleSupSub(d,r,n,e,o,ve,Ge):(Ge&&(d.style.position="relative",d.style.top=makeEm(Ge)),d)},mathmlBuilder$1=(t,e)=>{var r;if(t.symbol)r=new MathNode("mo",[makeText(t.name,t.mode)]),utils.contains(noSuccessor,t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new MathNode("mo",buildExpression(t.body,e));else{r=new MathNode("mi",[new TextNode(t.name.slice(1))]);var n=new MathNode("mo",[makeText("⁡","text")]);t.parentIsSupSub?r=new MathNode("mrow",[r,n]):r=newDocumentFragment([r,n])}return r},singleCharBigOps={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=singleCharBigOps[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(n)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=singleCharIntegrals[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(t,e)=>{var r,n,a=!1,s;t.type==="supsub"?(r=t.sup,n=t.sub,s=assertNodeType(t.base,"operatorname"),a=!0):s=assertNodeType(t,"operatorname");var o;if(s.body.length>0){for(var c=s.body.map(A=>{var P=A.text;return typeof P=="string"?{type:"textord",mode:A.mode,text:P}:A}),d=buildExpression$1(c,e.withFont("mathrm"),!0),m=0;m<d.length;m++){var y=d[m];y instanceof SymbolNode&&(y.text=y.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=buildCommon.makeSpan(["mop"],d,e)}else o=buildCommon.makeSpan(["mop"],[],e);return a?assembleSupSub(o,r,n,e,e.style,0,0):o},mathmlBuilder=(t,e)=>{for(var r=buildExpression(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var s=r[a];if(!(s instanceof mathMLTree.SpaceNode))if(s instanceof mathMLTree.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof mathMLTree.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(y=>y.toText()).join("");r=[new mathMLTree.TextNode(c)]}var d=new mathMLTree.MathNode("mi",r);d.setAttribute("mathvariant","normal");var m=new mathMLTree.MathNode("mo",[makeText("⁡","text")]);return t.parentIsSupSub?new mathMLTree.MathNode("mrow",[d,m]):mathMLTree.newDocumentFragment([d,m])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:ordargument(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder});defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");defineFunctionBuilders({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?buildCommon.makeFragment(buildExpression$1(t.body,e,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(t.body,e,!0),e)},mathmlBuilder(t,e){return buildExpressionRow(t.body,e,!0)}});defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=buildGroup$1(t.body,e.havingCrampedStyle()),n=buildCommon.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,s=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return buildCommon.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("‾")]);r.setAttribute("stretchy","true");var n=new mathMLTree.MathNode("mover",[buildGroup(t.body,e),r]);return n.setAttribute("accent","true"),n}});defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:ordargument(n)}},htmlBuilder:(t,e)=>{var r=buildExpression$1(t.body,e.withPhantom(),!1);return buildCommon.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=buildExpression(t.body,e);return new mathMLTree.MathNode("mphantom",r)}});defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=buildCommon.makeSpan([],[buildGroup$1(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),buildCommon.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=buildExpression(ordargument(t.body),e),n=new mathMLTree.MathNode("mphantom",r),a=new mathMLTree.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=buildCommon.makeSpan(["inner"],[buildGroup$1(t.body,e.withPhantom())]),n=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=buildExpression(ordargument(t.body),e),n=new mathMLTree.MathNode("mphantom",r),a=new mathMLTree.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=assertNodeType(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=buildGroup$1(t.body,e),n=calculateSize(t.dy,e);return buildCommon.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],s=assertNodeType(e[0],"size"),o=assertNodeType(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&assertNodeType(a,"size").value,width:s.value,height:o.value}},htmlBuilder(t,e){var r=buildCommon.makeSpan(["mord","rule"],[],e),n=calculateSize(t.width,e),a=calculateSize(t.height,e),s=t.shift?calculateSize(t.shift,e):0;return r.style.borderRightWidth=makeEm(n),r.style.borderTopWidth=makeEm(a),r.style.bottom=makeEm(s),r.width=n,r.height=a+s,r.depth=-s,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=calculateSize(t.width,e),n=calculateSize(t.height,e),a=t.shift?calculateSize(t.shift,e):0,s=e.color&&e.getColor()||"black",o=new mathMLTree.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",makeEm(r)),o.setAttribute("height",makeEm(n));var c=new mathMLTree.MathNode("mpadded",[o]);return a>=0?c.setAttribute("height",makeEm(a)):(c.setAttribute("height",makeEm(a)),c.setAttribute("depth",makeEm(-a))),c.setAttribute("voffset",makeEm(a)),c}});function sizingGroup(t,e,r){for(var n=buildExpression$1(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,s=0;s<n.length;s++){var o=n[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[s].classes,e.sizingClasses(r)):n[s].classes[o+1]==="reset-size"+e.size&&(n[s].classes[o+1]="reset-size"+r.size),n[s].height*=a,n[s].depth*=a}return buildCommon.makeFragment(n)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(t,e)=>{var r=e.havingSize(t.size);return sizingGroup(t.body,r,e)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,s=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:sizeFuncs.indexOf(n)+1,body:s}},htmlBuilder,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=buildExpression(t.body,r),a=new mathMLTree.MathNode("mstyle",n);return a.setAttribute("mathsize",makeEm(r.sizeMultiplier)),a}});defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,s=!1,o=r[0]&&assertNodeType(r[0],"ordgroup");if(o)for(var c="",d=0;d<o.body.length;++d){var m=o.body[d];if(c=m.text,c==="t")a=!0;else if(c==="b")s=!0;else{a=!1,s=!1;break}}else a=!0,s=!0;var y=e[0];return{type:"smash",mode:n.mode,body:y,smashHeight:a,smashDepth:s}},htmlBuilder:(t,e)=>{var r=buildCommon.makeSpan([],[buildGroup$1(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var s=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return buildCommon.makeSpan(["mord"],[s],e)},mathmlBuilder:(t,e)=>{var r=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],s=e[0];return{type:"sqrt",mode:n.mode,body:s,index:a}},htmlBuilder(t,e){var r=buildGroup$1(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=buildCommon.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,s=a;e.style.id<Style$1.TEXT.id&&(s=e.fontMetrics().xHeight);var o=a+s/4,c=r.height+r.depth+o+a,{span:d,ruleWidth:m,advanceWidth:y}=delimiter.sqrtImage(c,e),A=d.height-m;A>r.height+r.depth+o&&(o=(o+A-r.height-r.depth)/2);var P=d.height-r.height-o-m;r.style.paddingLeft=makeEm(y);var Z=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+P)},{type:"elem",elem:d},{type:"kern",size:m}]},e);if(t.index){var me=e.havingStyle(Style$1.SCRIPTSCRIPT),_e=buildGroup$1(t.index,me,e),Ge=.6*(Z.height-Z.depth),ve=buildCommon.makeVList({positionType:"shift",positionData:-Ge,children:[{type:"elem",elem:_e}]},e),He=buildCommon.makeSpan(["root"],[ve]);return buildCommon.makeSpan(["mord","sqrt"],[He,Z],e)}else return buildCommon.makeSpan(["mord","sqrt"],[Z],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new mathMLTree.MathNode("mroot",[buildGroup(r,e),buildGroup(n,e)]):new mathMLTree.MathNode("msqrt",[buildGroup(r,e)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,s=a.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:o,body:s}},htmlBuilder(t,e){var r=styleMap[t.style],n=e.havingStyle(r).withFont("");return sizingGroup(t.body,n,e)},mathmlBuilder(t,e){var r=styleMap[t.style],n=e.havingStyle(r),a=buildExpression(t.body,n),s=new mathMLTree.MathNode("mstyle",a),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=o[t.style];return s.setAttribute("scriptlevel",c[0]),s.setAttribute("displaystyle",c[1]),s}});var htmlBuilderDelegate=function t(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===Style$1.DISPLAY.size||n.alwaysHandleSupSub);return a?htmlBuilder$2:null}else if(n.type==="operatorname"){var s=n.alwaysHandleSupSub&&(r.style.size===Style$1.DISPLAY.size||n.limits);return s?htmlBuilder$1:null}else{if(n.type==="accent")return utils.isCharacterBox(n.base)?htmlBuilder$a:null;if(n.type==="horizBrace"){var o=!e.sub;return o===n.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(t,e){var r=htmlBuilderDelegate(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:s}=t,o=buildGroup$1(n,e),c,d,m=e.fontMetrics(),y=0,A=0,P=n&&utils.isCharacterBox(n);if(a){var Z=e.havingStyle(e.style.sup());c=buildGroup$1(a,Z,e),P||(y=o.height-Z.fontMetrics().supDrop*Z.sizeMultiplier/e.sizeMultiplier)}if(s){var me=e.havingStyle(e.style.sub());d=buildGroup$1(s,me,e),P||(A=o.depth+me.fontMetrics().subDrop*me.sizeMultiplier/e.sizeMultiplier)}var _e;e.style===Style$1.DISPLAY?_e=m.sup1:e.style.cramped?_e=m.sup3:_e=m.sup2;var Ge=e.sizeMultiplier,ve=makeEm(.5/m.ptPerEm/Ge),He=null;if(d){var De=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof SymbolNode||De)&&(He=makeEm(-o.italic))}var Xe;if(c&&d){y=Math.max(y,_e,c.depth+.25*m.xHeight),A=Math.max(A,m.sub2);var Bs=m.defaultRuleThickness,wt=4*Bs;if(y-c.depth-(d.height-A)<wt){A=wt-(y-c.depth)+d.height;var li=.8*m.xHeight-(y-c.depth);li>0&&(y+=li,A-=li)}var An=[{type:"elem",elem:d,shift:A,marginRight:ve,marginLeft:He},{type:"elem",elem:c,shift:-y,marginRight:ve}];Xe=buildCommon.makeVList({positionType:"individualShift",children:An},e)}else if(d){A=Math.max(A,m.sub1,d.height-.8*m.xHeight);var Os=[{type:"elem",elem:d,marginLeft:He,marginRight:ve}];Xe=buildCommon.makeVList({positionType:"shift",positionData:A,children:Os},e)}else if(c)y=Math.max(y,_e,c.depth+.25*m.xHeight),Xe=buildCommon.makeVList({positionType:"shift",positionData:-y,children:[{type:"elem",elem:c,marginRight:ve}]},e);else throw new Error("supsub must have either sup or sub.");var vh=getTypeOfDomTree(o,"right")||"mord";return buildCommon.makeSpan([vh],[o,buildCommon.makeSpan(["msupsub"],[Xe])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var s=[buildGroup(t.base,e)];t.sub&&s.push(buildGroup(t.sub,e)),t.sup&&s.push(buildGroup(t.sup,e));var o;if(r)o=n?"mover":"munder";else if(t.sub)if(t.sup){var m=t.base;m&&m.type==="op"&&m.limits&&e.style===Style$1.DISPLAY||m&&m.type==="operatorname"&&m.alwaysHandleSupSub&&(e.style===Style$1.DISPLAY||m.limits)?o="munderover":o="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Style$1.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Style$1.DISPLAY)?o="munder":o="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Style$1.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Style$1.DISPLAY)?o="mover":o="msup"}return new mathMLTree.MathNode(o,s)}});defineFunctionBuilders({type:"atom",htmlBuilder(t,e){return buildCommon.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mo",[makeText(t.text,t.mode)]);if(t.family==="bin"){var n=getVariant(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(t,e){return buildCommon.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mi",[makeText(t.text,t.mode,e)]),n=getVariant(t,e)||"italic";return n!==defaultVariant[r.type]&&r.setAttribute("mathvariant",n),r}});defineFunctionBuilders({type:"textord",htmlBuilder(t,e){return buildCommon.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=makeText(t.text,t.mode,e),n=getVariant(t,e)||"normal",a;return t.mode==="text"?a=new mathMLTree.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new mathMLTree.MathNode("mn",[r]):t.text==="\\prime"?a=new mathMLTree.MathNode("mo",[r]):a=new mathMLTree.MathNode("mi",[r]),n!==defaultVariant[a.type]&&a.setAttribute("mathvariant",n),a}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(t,e){if(regularSpace.hasOwnProperty(t.text)){var r=regularSpace[t.text].className||"";if(t.mode==="text"){var n=buildCommon.makeOrd(t,e,"textord");return n.classes.push(r),n}else return buildCommon.makeSpan(["mspace",r],[buildCommon.mathsym(t.text,t.mode,e)],e)}else{if(cssSpace.hasOwnProperty(t.text))return buildCommon.makeSpan(["mspace",cssSpace[t.text]],[],e);throw new ParseError('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(regularSpace.hasOwnProperty(t.text))r=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode(" ")]);else{if(cssSpace.hasOwnProperty(t.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+t.text+'"')}return r}});var pad=()=>{var t=new mathMLTree.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};defineFunctionBuilders({type:"tag",mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(t.body,e)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(t,e)=>{var r=t.font;if(r){if(textFontFamilies[r])return e.withTextFontFamily(textFontFamilies[r]);if(textFontWeights[r])return e.withTextFontWeight(textFontWeights[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(textFontShapes[r])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:ordargument(a),font:n}},htmlBuilder(t,e){var r=optionsWithFont(t,e),n=buildExpression$1(t.body,r,!0);return buildCommon.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=optionsWithFont(t,e);return buildExpressionRow(t.body,r)}});defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=buildGroup$1(t.body,e),n=buildCommon.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,s=buildCommon.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return buildCommon.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(t,e){var r=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("‾")]);r.setAttribute("stretchy","true");var n=new mathMLTree.MathNode("munder",[buildGroup(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=buildGroup$1(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return buildCommon.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new mathMLTree.MathNode("mpadded",[buildGroup(t.body,e)],["vcenter"])}});defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=makeVerb(t),n=[],a=e.havingStyle(e.style.text()),s=0;s<r.length;s++){var o=r[s];o==="~"&&(o="\\textasciitilde"),n.push(buildCommon.makeSymbol(o,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(a.sizingClasses(e)),buildCommon.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new mathMLTree.TextNode(makeVerb(t)),n=new mathMLTree.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var makeVerb=t=>t.body.replace(/ /g,t.star?"␣":" "),functions=_functions,spaceRegexString=`[ \r
	]`,controlWordRegexString="\\\\[a-zA-Z@]+",controlSymbolRegexString="\\\\[^\uD800-\uDFFF]",controlWordWhitespaceRegexString="("+controlWordRegexString+")"+spaceRegexString+"*",controlSpaceRegexString=`\\\\(
|[ \r	]+
?)[ \r	]*`,combiningDiacriticalMarkString="[̀-ͯ]",combiningDiacriticalMarksEndRegex=new RegExp(combiningDiacriticalMarkString+"+$"),tokenRegexString="("+spaceRegexString+"+)|"+(controlSpaceRegexString+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(combiningDiacriticalMarkString+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(combiningDiacriticalMarkString+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+controlWordWhitespaceRegexString)+("|"+controlSymbolRegexString+")");class Lexer{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(tokenRegexString,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Token("EOF",new SourceLocation(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new ParseError("Unexpected character: '"+e[r]+"'",new Token(e[r],new SourceLocation(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new Token(a,new SourceLocation(this,r,this.tokenRegex.lastIndex))}}class Namespace{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ParseError("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var macros=_macros;defineMacro("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});defineMacro("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});defineMacro("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});defineMacro("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});defineMacro("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");defineMacro("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ParseError("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=digitToNumber[e.text],n==null||n>=r)throw new ParseError("Invalid base-"+r+" digit "+e.text);for(var a;(a=digitToNumber[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var newcommand=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var s=a[0].text,o=t.isDefined(s);if(o&&!e)throw new ParseError("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!o&&!r)throw new ParseError("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var c=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",m=t.expandNextToken();m.text!=="]"&&m.text!=="EOF";)d+=m.text,m=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+d);c=parseInt(d),a=t.consumeArg().tokens}return o&&n||t.macros.set(s,{tokens:a,numArgs:c}),""};defineMacro("\\newcommand",t=>newcommand(t,!1,!0,!1));defineMacro("\\renewcommand",t=>newcommand(t,!0,!1,!1));defineMacro("\\providecommand",t=>newcommand(t,!0,!0,!0));defineMacro("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});defineMacro("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});defineMacro("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),functions[r],symbols.math[r],symbols.text[r]),""});defineMacro("\\bgroup","{");defineMacro("\\egroup","}");defineMacro("~","\\nobreakspace");defineMacro("\\lq","`");defineMacro("\\rq","'");defineMacro("\\aa","\\r a");defineMacro("\\AA","\\r A");defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}");defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");defineMacro("ℬ","\\mathscr{B}");defineMacro("ℰ","\\mathscr{E}");defineMacro("ℱ","\\mathscr{F}");defineMacro("ℋ","\\mathscr{H}");defineMacro("ℐ","\\mathscr{I}");defineMacro("ℒ","\\mathscr{L}");defineMacro("ℳ","\\mathscr{M}");defineMacro("ℛ","\\mathscr{R}");defineMacro("ℭ","\\mathfrak{C}");defineMacro("ℌ","\\mathfrak{H}");defineMacro("ℨ","\\mathfrak{Z}");defineMacro("\\Bbbk","\\Bbb{k}");defineMacro("·","\\cdotp");defineMacro("\\llap","\\mathllap{\\textrm{#1}}");defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}");defineMacro("\\clap","\\mathclap{\\textrm{#1}}");defineMacro("\\mathstrut","\\vphantom{(}");defineMacro("\\underbar","\\underline{\\text{#1}}");defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");defineMacro("\\ne","\\neq");defineMacro("≠","\\neq");defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");defineMacro("∉","\\notin");defineMacro("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");defineMacro("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");defineMacro("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");defineMacro("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");defineMacro("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");defineMacro("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");defineMacro("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");defineMacro("⟂","\\perp");defineMacro("‼","\\mathclose{!\\mkern-0.8mu!}");defineMacro("∌","\\notni");defineMacro("⌜","\\ulcorner");defineMacro("⌝","\\urcorner");defineMacro("⌞","\\llcorner");defineMacro("⌟","\\lrcorner");defineMacro("©","\\copyright");defineMacro("®","\\textregistered");defineMacro("️","\\textregistered");defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');defineMacro("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");defineMacro("⋮","\\vdots");defineMacro("\\varGamma","\\mathit{\\Gamma}");defineMacro("\\varDelta","\\mathit{\\Delta}");defineMacro("\\varTheta","\\mathit{\\Theta}");defineMacro("\\varLambda","\\mathit{\\Lambda}");defineMacro("\\varXi","\\mathit{\\Xi}");defineMacro("\\varPi","\\mathit{\\Pi}");defineMacro("\\varSigma","\\mathit{\\Sigma}");defineMacro("\\varUpsilon","\\mathit{\\Upsilon}");defineMacro("\\varPhi","\\mathit{\\Phi}");defineMacro("\\varPsi","\\mathit{\\Psi}");defineMacro("\\varOmega","\\mathit{\\Omega}");defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}");defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}");defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;");defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");defineMacro("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");defineMacro("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in dotsByToken?e=dotsByToken[r]:(r.slice(0,4)==="\\not"||r in symbols.math&&utils.contains(["bin","rel"],symbols.math[r].group))&&(e="\\dotsb"),e});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(t){var e=t.future().text;return e in spaceAfterDots?"\\ldots\\,":"\\ldots"});defineMacro("\\dotsc",function(t){var e=t.future().text;return e in spaceAfterDots&&e!==","?"\\ldots\\,":"\\ldots"});defineMacro("\\cdots",function(t){var e=t.future().text;return e in spaceAfterDots?"\\@cdots\\,":"\\@cdots"});defineMacro("\\dotsb","\\cdots");defineMacro("\\dotsm","\\cdots");defineMacro("\\dotsi","\\!\\cdots");defineMacro("\\dotsx","\\ldots\\,");defineMacro("\\DOTSI","\\relax");defineMacro("\\DOTSB","\\relax");defineMacro("\\DOTSX","\\relax");defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");defineMacro("\\,","\\tmspace+{3mu}{.1667em}");defineMacro("\\thinspace","\\,");defineMacro("\\>","\\mskip{4mu}");defineMacro("\\:","\\tmspace+{4mu}{.2222em}");defineMacro("\\medspace","\\:");defineMacro("\\;","\\tmspace+{5mu}{.2777em}");defineMacro("\\thickspace","\\;");defineMacro("\\!","\\tmspace-{3mu}{.1667em}");defineMacro("\\negthinspace","\\!");defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}");defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}");defineMacro("\\enspace","\\kern.5em ");defineMacro("\\enskip","\\hskip.5em\\relax");defineMacro("\\quad","\\hskip1em\\relax");defineMacro("\\qquad","\\hskip2em\\relax");defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren");defineMacro("\\tag@paren","\\tag@literal{({#1})}");defineMacro("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");defineMacro("\\newline","\\\\\\relax");defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace");defineMacro("\\@hspace","\\hskip #1\\relax");defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");defineMacro("\\ordinarycolon",":");defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');defineMacro("∷","\\dblcolon");defineMacro("∹","\\eqcolon");defineMacro("≔","\\coloneqq");defineMacro("≕","\\eqqcolon");defineMacro("⩴","\\Coloneqq");defineMacro("\\ratio","\\vcentcolon");defineMacro("\\coloncolon","\\dblcolon");defineMacro("\\colonequals","\\coloneqq");defineMacro("\\coloncolonequals","\\Coloneqq");defineMacro("\\equalscolon","\\eqqcolon");defineMacro("\\equalscoloncolon","\\Eqqcolon");defineMacro("\\colonminus","\\coloneq");defineMacro("\\coloncolonminus","\\Coloneq");defineMacro("\\minuscolon","\\eqcolon");defineMacro("\\minuscoloncolon","\\Eqcolon");defineMacro("\\coloncolonapprox","\\Colonapprox");defineMacro("\\coloncolonsim","\\Colonsim");defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{≰}");defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");defineMacro("\\imath","\\html@mathml{\\@imath}{ı}");defineMacro("\\jmath","\\html@mathml{\\@jmath}{ȷ}");defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");defineMacro("⟦","\\llbracket");defineMacro("⟧","\\rrbracket");defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");defineMacro("⦃","\\lBrace");defineMacro("⦄","\\rBrace");defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");defineMacro("⦵","\\minuso");defineMacro("\\darr","\\downarrow");defineMacro("\\dArr","\\Downarrow");defineMacro("\\Darr","\\Downarrow");defineMacro("\\lang","\\langle");defineMacro("\\rang","\\rangle");defineMacro("\\uarr","\\uparrow");defineMacro("\\uArr","\\Uparrow");defineMacro("\\Uarr","\\Uparrow");defineMacro("\\N","\\mathbb{N}");defineMacro("\\R","\\mathbb{R}");defineMacro("\\Z","\\mathbb{Z}");defineMacro("\\alef","\\aleph");defineMacro("\\alefsym","\\aleph");defineMacro("\\Alpha","\\mathrm{A}");defineMacro("\\Beta","\\mathrm{B}");defineMacro("\\bull","\\bullet");defineMacro("\\Chi","\\mathrm{X}");defineMacro("\\clubs","\\clubsuit");defineMacro("\\cnums","\\mathbb{C}");defineMacro("\\Complex","\\mathbb{C}");defineMacro("\\Dagger","\\ddagger");defineMacro("\\diamonds","\\diamondsuit");defineMacro("\\empty","\\emptyset");defineMacro("\\Epsilon","\\mathrm{E}");defineMacro("\\Eta","\\mathrm{H}");defineMacro("\\exist","\\exists");defineMacro("\\harr","\\leftrightarrow");defineMacro("\\hArr","\\Leftrightarrow");defineMacro("\\Harr","\\Leftrightarrow");defineMacro("\\hearts","\\heartsuit");defineMacro("\\image","\\Im");defineMacro("\\infin","\\infty");defineMacro("\\Iota","\\mathrm{I}");defineMacro("\\isin","\\in");defineMacro("\\Kappa","\\mathrm{K}");defineMacro("\\larr","\\leftarrow");defineMacro("\\lArr","\\Leftarrow");defineMacro("\\Larr","\\Leftarrow");defineMacro("\\lrarr","\\leftrightarrow");defineMacro("\\lrArr","\\Leftrightarrow");defineMacro("\\Lrarr","\\Leftrightarrow");defineMacro("\\Mu","\\mathrm{M}");defineMacro("\\natnums","\\mathbb{N}");defineMacro("\\Nu","\\mathrm{N}");defineMacro("\\Omicron","\\mathrm{O}");defineMacro("\\plusmn","\\pm");defineMacro("\\rarr","\\rightarrow");defineMacro("\\rArr","\\Rightarrow");defineMacro("\\Rarr","\\Rightarrow");defineMacro("\\real","\\Re");defineMacro("\\reals","\\mathbb{R}");defineMacro("\\Reals","\\mathbb{R}");defineMacro("\\Rho","\\mathrm{P}");defineMacro("\\sdot","\\cdot");defineMacro("\\sect","\\S");defineMacro("\\spades","\\spadesuit");defineMacro("\\sub","\\subset");defineMacro("\\sube","\\subseteq");defineMacro("\\supe","\\supseteq");defineMacro("\\Tau","\\mathrm{T}");defineMacro("\\thetasym","\\vartheta");defineMacro("\\weierp","\\wp");defineMacro("\\Zeta","\\mathrm{Z}");defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");defineMacro("\\bra","\\mathinner{\\langle{#1}|}");defineMacro("\\ket","\\mathinner{|{#1}\\rangle}");defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}");defineMacro("\\Bra","\\left\\langle#1\\right|");defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=A=>P=>{t&&(P.macros.set("|",o),a.length&&P.macros.set("\\|",c));var Z=A;if(!A&&a.length){var me=P.future();me.text==="|"&&(P.popToken(),Z=!0)}return{tokens:Z?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var m=e.consumeArg().tokens,y=e.expandTokens([...s,...m,...r]);return e.macros.endGroup(),{tokens:y.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1));defineMacro("\\bra@set",braketHelper(!0));defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");defineMacro("\\angln","{\\angl n}");defineMacro("\\blue","\\textcolor{##6495ed}{#1}");defineMacro("\\orange","\\textcolor{##ffa500}{#1}");defineMacro("\\pink","\\textcolor{##ff00af}{#1}");defineMacro("\\red","\\textcolor{##df0030}{#1}");defineMacro("\\green","\\textcolor{##28ae7b}{#1}");defineMacro("\\gray","\\textcolor{gray}{#1}");defineMacro("\\purple","\\textcolor{##9d38bd}{#1}");defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}");defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}");defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}");defineMacro("\\blueD","\\textcolor{##11accd}{#1}");defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}");defineMacro("\\tealA","\\textcolor{##94fff5}{#1}");defineMacro("\\tealB","\\textcolor{##26edd5}{#1}");defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}");defineMacro("\\tealD","\\textcolor{##01a995}{#1}");defineMacro("\\tealE","\\textcolor{##208170}{#1}");defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}");defineMacro("\\greenB","\\textcolor{##8af281}{#1}");defineMacro("\\greenC","\\textcolor{##74cf70}{#1}");defineMacro("\\greenD","\\textcolor{##1fab54}{#1}");defineMacro("\\greenE","\\textcolor{##0d923f}{#1}");defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}");defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}");defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}");defineMacro("\\goldD","\\textcolor{##e07d10}{#1}");defineMacro("\\goldE","\\textcolor{##a75a05}{#1}");defineMacro("\\redA","\\textcolor{##fca9a9}{#1}");defineMacro("\\redB","\\textcolor{##ff8482}{#1}");defineMacro("\\redC","\\textcolor{##f9685d}{#1}");defineMacro("\\redD","\\textcolor{##e84d39}{#1}");defineMacro("\\redE","\\textcolor{##bc2612}{#1}");defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}");defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}");defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}");defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}");defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}");defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}");defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}");defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}");defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}");defineMacro("\\purpleE","\\textcolor{##543b78}{#1}");defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}");defineMacro("\\mintB","\\textcolor{##edf2df}{#1}");defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}");defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}");defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}");defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}");defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}");defineMacro("\\grayE","\\textcolor{##babec2}{#1}");defineMacro("\\grayF","\\textcolor{##888d93}{#1}");defineMacro("\\grayG","\\textcolor{##626569}{#1}");defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}");defineMacro("\\grayI","\\textcolor{##21242c}{#1}");defineMacro("\\kaBlue","\\textcolor{##314453}{#1}");defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");var implicitCommands={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class MacroExpander{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Namespace(macros,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new Lexer(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new Token("EOF",n.loc)),this.pushTokens(a),r.range(n,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),s,o=0,c=0;do{if(s=this.popToken(),r.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new ParseError("Extra }",s)}else if(s.text==="EOF")throw new ParseError("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",s);if(e&&n)if((o===0||o===1&&e[c]==="{")&&s.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(o!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:s}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new ParseError("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var s=this.popToken();if(n[a]!==s.text)throw new ParseError("Use of the macro doesn't match its definition",s)}}for(var o=[],c=0;c<e;c++)o.push(this.consumeArg(r&&r[c+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ParseError("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new ParseError("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var s=a.tokens,o=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){s=s.slice();for(var c=s.length-1;c>=0;--c){var d=s[c];if(d.text==="#"){if(c===0)throw new ParseError("Incomplete placeholder at end of macro body",d);if(d=s[--c],d.text==="#")s.splice(c+1,1);else if(/^[1-9]$/.test(d.text))s.splice(c,2,...o[+d.text-1]);else throw new ParseError("Not a valid argument number",d)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Token(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var s=0;if(a.indexOf("#")!==-1)for(var o=a.replace(/##/g,"");o.indexOf("#"+(s+1))!==-1;)++s;for(var c=new Lexer(a,this.settings),d=[],m=c.lex();m.text!=="EOF";)d.push(m),m=c.lex();d.reverse();var y={tokens:d,numArgs:s};return y}return a}isDefined(e){return this.macros.has(e)||functions.hasOwnProperty(e)||symbols.math.hasOwnProperty(e)||symbols.text.hasOwnProperty(e)||implicitCommands.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:functions.hasOwnProperty(e)&&!functions[e].primitive}}var unicodeSubRegEx=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,uSubsAndSups=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),unicodeAccents={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},unicodeSymbols={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class Parser{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new MacroExpander(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new ParseError("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Token("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(Parser.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&functions[a.text]&&functions[a.text].infix)break;var s=this.parseAtom(r);if(s){if(s.type==="internal")continue}else break;n.push(s)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new ParseError("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var s,o,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?s=c[0]:s={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?o=d[0]:o={type:"ordgroup",mode:this.mode,body:d};var m;return n==="\\\\abovefrac"?m=this.callFunction(n,[s,e[r],o],[]):m=this.callFunction(n,[s,o],[]),[m]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var s;a=this.parseGroup(e)}while(((s=a)==null?void 0:s.type)==="internal");if(!a)throw new ParseError("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return s}parseAtom(e){var r=this.parseGroup("atom",e);if(r?.type==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(r&&r.type==="op"){var o=s.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=s.text==="\\limits");else throw new ParseError("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(n)throw new ParseError("Double superscript",s);n=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(a)throw new ParseError("Double subscript",s);a=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(n)throw new ParseError("Double superscript",s);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(uSubsAndSups[s.text]){var m=unicodeSubRegEx.test(s.text),y=[];for(y.push(new Token(uSubsAndSups[s.text])),this.consume();;){var A=this.fetch().text;if(!uSubsAndSups[A]||unicodeSubRegEx.test(A)!==m)break;y.unshift(new Token(uSubsAndSups[A])),this.consume()}var P=this.subparse(y);m?a={type:"ordgroup",mode:"math",body:P}:n={type:"ordgroup",mode:"math",body:P}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,s=functions[a];if(!s)return null;if(this.consume(),r&&r!=="atom"&&!s.allowedInArgument)throw new ParseError("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!s.allowedInText)throw new ParseError("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&s.allowedInMath===!1)throw new ParseError("Can't use function '"+a+"' in math mode",n);var{args:o,optArgs:c}=this.parseArguments(a,s);return this.callFunction(a,o,c,n,e)}callFunction(e,r,n,a,s){var o={funcName:e,parser:this,token:a,breakOnTokenText:s},c=functions[e];if(c&&c.handler)return c.handler(o,r,n);throw new ParseError("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],s=[],o=0;o<n;o++){var c=r.argTypes&&r.argTypes[o],d=o<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&o===1&&s[0]==null)&&(c="primitive");var m=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)s.push(m);else if(m!=null)a.push(m);else throw new ParseError("Null argument, please report this as a bug")}return{args:a,optArgs:s}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",n);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(n)throw new ParseError("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new ParseError("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new ParseError("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",s;(s=this.fetch()).text!=="EOF";)a+=s.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,s="",o;(o=this.fetch()).text!=="EOF"&&e.test(s+o.text);)a=o,s+=a.text,this.consume();if(s==="")throw new ParseError("Invalid "+r+": '"+n.text+"'",n);return n.range(a,s)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new ParseError("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new ParseError("Invalid size: '"+r.text+"'",r);var s={number:+(a[1]+a[2]),unit:a[3]};if(!validUnit(s))throw new ParseError("Invalid unit: '"+s.unit+"'",r);return{type:"size",mode:this.mode,value:s,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:s};return r&&this.switchMode(a),o}parseGroup(e,r){var n=this.fetch(),a=n.text,s;if(a==="{"||a==="\\begingroup"){this.consume();var o=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,o),d=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:SourceLocation.range(n,d),body:c,semisimple:a==="\\begingroup"||void 0}}else if(s=this.parseFunction(r,e)||this.parseSymbol(),s==null&&a[0]==="\\"&&!implicitCommands.hasOwnProperty(a)){if(this.settings.throwOnError)throw new ParseError("Undefined control sequence: "+a,n);s=this.formatUnsupportedCmd(a),this.consume()}return s}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],s=a.text;s==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:SourceLocation.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:SourceLocation.range(a,e[n+1]),text:"--"}),r-=1)),(s==="'"||s==="`")&&e[n+1].text===s&&(e.splice(n,2,{type:"textord",mode:"text",loc:SourceLocation.range(a,e[n+1]),text:s+s}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new ParseError(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}unicodeSymbols.hasOwnProperty(r[0])&&!symbols[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=unicodeSymbols[r[0]]+r.slice(1));var s=combiningDiacriticalMarksEndRegex.exec(r);s&&(r=r.substring(0,s.index),r==="i"?r="ı":r==="j"&&(r="ȷ"));var o;if(symbols[this.mode][r]){this.settings.strict&&this.mode==="math"&&extraLatin.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=symbols[this.mode][r].group,d=SourceLocation.range(e),m;if(ATOMS.hasOwnProperty(c)){var y=c;m={type:"atom",mode:this.mode,family:y,loc:d,text:r}}else m={type:c,mode:this.mode,loc:d,text:r};o=m}else if(r.charCodeAt(0)>=128)this.settings.strict&&(supportedCodepoint(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:SourceLocation.range(e),text:r};else return null;if(this.consume(),s)for(var A=0;A<s[0].length;A++){var P=s[0][A];if(!unicodeAccents[P])throw new ParseError("Unknown accent ' "+P+"'",e);var Z=unicodeAccents[P][this.mode]||unicodeAccents[P].text;if(!Z)throw new ParseError("Accent "+P+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:SourceLocation.range(e),label:Z,isStretchy:!1,isShifty:!0,base:o}}return o}}Parser.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var parseTree=function t(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new Parser(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new ParseError("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new Token("\\df@tag")])}]}return a},render=function t(e,r,n){r.textContent="";var a=renderToDomTree(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),render=function(){throw new ParseError("KaTeX doesn't work in quirks mode.")});var renderToString=function t(e,r){var n=renderToDomTree(e,r).toMarkup();return n},generateParseTree=function t(e,r){var n=new Settings(r);return parseTree(e,n)},renderError=function t(e,r,n){if(n.throwOnError||!(e instanceof ParseError))throw e;var a=buildCommon.makeSpan(["katex-error"],[new SymbolNode(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},renderToDomTree=function t(e,r){var n=new Settings(r);try{var a=parseTree(e,n);return buildTree(a,e,n)}catch(s){return renderError(s,e,n)}},renderToHTMLTree=function t(e,r){var n=new Settings(r);try{var a=parseTree(e,n);return buildHTMLTree(a,e,n)}catch(s){return renderError(s,e,n)}},version="0.16.22",__domTree={Span,Anchor,SymbolNode,SvgNode,PathNode,LineNode},katex={version,render,renderToString,ParseError,SETTINGS_SCHEMA,__parse:generateParseTree,__renderToDomTree:renderToDomTree,__renderToHTMLTree:renderToHTMLTree,__setFontMetrics:setFontMetrics,__defineSymbol:defineSymbol,__defineFunction:defineFunction,__defineMacro:defineMacro,__domTree};const ESCAPED_DOLLAR="__ESCAPED_DOLLAR__";function escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function tokenizeSingleDollar(t){const e=t.replace(/\\\$/g,ESCAPED_DOLLAR),r=[],n=/\$([\s\S]+?)\$/g;let a=0,s;for(;(s=n.exec(e))!==null;)s.index>a&&r.push({type:"text",content:e.slice(a,s.index)}),r.push({type:"math",content:s[1]}),a=n.lastIndex;return a<e.length&&r.push({type:"text",content:e.slice(a)}),r.map(o=>({...o,content:o.content.replace(new RegExp(ESCAPED_DOLLAR,"g"),"$")}))}function RenderMath({text:t,className:e,katexOptions:r}){const n=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!n.current)return;const a={throwOnError:!1,displayMode:!1,...r},o=tokenizeSingleDollar(t).map(c=>{if(c.type==="text")return escapeHtml(c.content);try{return katex.renderToString(c.content,a)}catch{return`<code class="katex-error">${escapeHtml(c.content)}</code>`}});n.current.innerHTML=o.join("")},[t,r]),jsxRuntimeExports.jsx("div",{ref:n,className:e})}var kh=Object.defineProperty,Sh=Object.defineProperties,Lh=Object.getOwnPropertyDescriptors,Oo=Object.getOwnPropertySymbols,Uc=Object.prototype.hasOwnProperty,jc=Object.prototype.propertyIsEnumerable,Wc=(t,e,r)=>e in t?kh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p=(t,e)=>{for(var r in e||(e={}))Uc.call(e,r)&&Wc(t,r,e[r]);if(Oo)for(var r of Oo(e))jc.call(e,r)&&Wc(t,r,e[r]);return t},f=(t,e)=>Sh(t,Lh(e)),Ps=t=>typeof t=="symbol"?t:t+"",ki=(t,e)=>{var r={};for(var n in t)Uc.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Oo)for(var n of Oo(t))e.indexOf(n)<0&&jc.call(t,n)&&(r[n]=t[n]);return r};function Y(t){return Array.isArray(t)}var Jc={en:{"keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.alphabetic":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.menu":"Menu","tooltip.undo":"Undo","menu.borders":"Borders","menu.insert matrix":"Insert Matrix","menu.array.add row above":"Add Row Before","menu.array.add row below":"Add Row After","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","menu.insert":"Insert","menu.insert.abs":"Absolute Value","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"n<sup>th</sup> Root","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarithm base a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Calculus","menu.insert.derivative":"Derivative","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"n<sup>th</sup> derivative","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Integral","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Sum","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Product","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Complex Numbers","menu.insert.modulus":"Modulus","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Real Part","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Imaginary Part","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Conjugate","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Blackboard","tooltip.bold":"Bold","tooltip.italic":"Italic","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligraphic","tooltip.typewriter":"Typewriter","tooltip.roman-upright":"Roman Upright","tooltip.row-by-col":"%@ × %@","menu.font-style":"Font Style","menu.accent":"Accent","menu.decoration":"Decoration","menu.color":"Color","menu.background-color":"Background","menu.evaluate":"Evaluate","menu.simplify":"Simplify","menu.solve":"Solve","menu.solve-for":"Solve for %@","menu.cut":"Cut","menu.copy":"Copy","menu.copy-as-latex":"Copy as LaTeX","menu.copy-as-typst":"Copy as Typst","menu.copy-as-ascii-math":"Copy as ASCII Math","menu.copy-as-mathml":"Copy as MathML","menu.paste":"Paste","menu.select-all":"Select All","color.red":"Red","color.orange":"Orange","color.yellow":"Yellow","color.lime":"Lime","color.green":"Green","color.teal":"Teal","color.cyan":"Cyan","color.blue":"Blue","color.indigo":"Indigo","color.purple":"Purple","color.magenta":"Magenta","color.black":"Black","color.dark-grey":"Dark Grey","color.grey":"Grey","color.light-grey":"Light Grey","color.white":"White"},ar:{"keyboard.tooltip.symbols":"حرف او رمز","keyboard.tooltip.greek":"حروف يونانية","keyboard.tooltip.numeric":"الرقمية","keyboard.tooltip.alphabetic":"رموز الاحرف الرومانية","tooltip.copy to clipboard":"نسخ إلى الحافظة","tooltip.cut to clipboard":"قص إلى الحافظة","tooltip.paste from clipboard":"لصق من الحافظة","tooltip.redo":"الإعادة","tooltip.toggle virtual keyboard":"تبديل لوحة المفاتيح الإفتراضية","tooltip.undo":"إلغاء","menu.insert matrix":"أدخل المصفوفة","menu.borders":"محددات المصفوفة","menu.array.add row above":"أضف صفًا بعد ذلك","menu.array.add row below":"أضف الصف قبل","menu.array.add column after":"أضف العمود بعد ذلك","menu.array.add column before":"أضف العمود قبل","menu.array.delete row":"احذف صف","menu.array.delete rows":"حذف الصفوف المحددة","menu.array.delete column":"حذف العمود","menu.array.delete columns":"حذف الأعمدة المحددة","menu.mode":"وضع","menu.mode-math":"رياضيات","menu.mode-text":"نص","menu.mode-latex":"لاتكس","tooltip.blackboard":"سبورة","tooltip.bold":"عريض","tooltip.italic":"مائل","tooltip.fraktur":"فراكتور","tooltip.script":"سكريبت","tooltip.caligraphic":"كاليجرافيك","tooltip.typewriter":"آلة كاتبة","tooltip.roman-upright":"روماني مستقيم","tooltip.row-by-col":"%@ × %@","menu.font-style":"نمط الخط","menu.accent":"تشكيل","menu.decoration":"زخرفة","menu.color":"لون","menu.background-color":"الخلفية","menu.evaluate":"تقييم","menu.simplify":"تبسيط","menu.solve":"حل","menu.solve-for":"حل لـ %@","menu.cut":"قص","menu.copy":"نسخ","menu.copy-as-latex":"نسخ كـ LaTeX","menu.copy-as-ascii-math":"نسخ كـ ASCII Math","menu.copy-as-mathml":"نسخ كـ MathML","menu.paste":"لصق","menu.select-all":"تحديد الكل","color.red":"أحمر","color.orange":"برتقالي","color.yellow":"أصفر","color.lime":"ليموني","color.green":"أخضر","color.teal":"سماوي","color.cyan":"سماوي فاتح","color.blue":"أزرق","color.indigo":"نيلي","color.purple":"بنفسجي","color.magenta":"أرجواني","color.black":"أسود","color.dark-grey":"رمادي غامق","color.grey":"رمادي","color.light-grey":"رمادي فاتح","color.white":"أبيض"},de:{"keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.alphabetic":"Römische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einfügen","menu.borders":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzufügen nach","menu.array.add row below":"Zeile hinzufügen vor","menu.array.add column after":"Spalte hinzufügen nach","menu.array.add column before":"Spalte hinzufügen vor","menu.array.delete row":"Zeile löschen","menu.array.delete rows":"Ausgewählte Zeilen löschen","menu.array.delete column":"Spalte löschen","menu.array.delete columns":"Ausgewählte Spalten löschen","menu.mode":"Modus","menu.mode-math":"Mathematik","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tafel","tooltip.bold":"Fett","tooltip.italic":"Kursiv","tooltip.fraktur":"Fraktur","tooltip.script":"Skript","tooltip.caligraphic":"Kalligraphie","tooltip.typewriter":"Schreibmaschine","tooltip.roman-upright":"Römisch aufrecht","tooltip.row-by-col":"%@ × %@","menu.font-style":"Schriftstil","menu.accent":"Akzent","menu.decoration":"Dekoration","menu.color":"Farbe","menu.background-color":"Hintergrund","menu.evaluate":"Auswerten","menu.simplify":"Vereinfachen","menu.solve":"Lösen","menu.solve-for":"Lösen für %@","menu.cut":"Ausschneiden","menu.copy":"Kopieren","menu.copy-as-latex":"Als LaTeX kopieren","menu.copy-as-ascii-math":"Als ASCII Math kopieren","menu.copy-as-mathml":"Als MathML kopieren","menu.paste":"Einfügen","menu.select-all":"Alles auswählen","color.red":"Rot","color.orange":"Orange","color.yellow":"Gelb","color.lime":"Limette","color.green":"Grün","color.teal":"Blaugrün","color.cyan":"Cyan","color.blue":"Blau","color.indigo":"Indigo","color.purple":"Lila","color.magenta":"Magenta","color.black":"Schwarz","color.dark-grey":"Dunkelgrau","color.grey":"Grau","color.light-grey":"Hellgrau","color.white":"Weiß"},el:{"keyboard.tooltip.symbols":"σύμβολα","keyboard.tooltip.greek":"ελληνικά γράμματα","keyboard.tooltip.numeric":"Αριθμητικός","keyboard.tooltip.alphabetic":"Ρωμαϊκά γράμματα","tooltip.copy to clipboard":"Αντιγραφή στο πρόχειρο","tooltip.redo":"Ξανακάνω","tooltip.toggle virtual keyboard":"Εναλλαγή εικονικού πληκτρολογίου","tooltip.undo":"Ξεκάνω","menu.insert matrix":"Εισαγωγή μήτρα","menu.borders":"Οριοθέτες μήτρα","menu.array.add row above":"Προσθήκη σειράς μετά","menu.array.add row below":"Προσθήκη σειράς πριν","menu.array.add column after":"Προσθήκη στήλης μετά","menu.array.add column before":"Προσθήκη στήλης πριν","menu.array.delete row":"Διαγραφή σειράς","menu.array.delete rows":"Διαγραφή επιλεγμένων σειρών","menu.array.delete column":"Διαγραφή στήλης","menu.array.delete columns":"Διαγραφή επιλεγμένων στηλών","menu.mode":"Λειτουργία","menu.mode-math":"Μαθηματικά","menu.mode-text":"Κείμενο","menu.mode-latex":"LaTeX","tooltip.blackboard":"Πίνακας","tooltip.bold":"Έντονη","tooltip.italic":"Πλάγια","tooltip.fraktur":"Φράκτουρ","tooltip.script":"Σενάριο","tooltip.caligraphic":"Καλλιγραφική","tooltip.typewriter":"Μηχανή γραφής","tooltip.roman-upright":"Ρωμαϊκό Κατακόρυφο","tooltip.row-by-col":"%@ × %@","menu.font-style":"Στυλ γραμματοσειράς","menu.accent":"Τόνος","menu.decoration":"Διακόσμηση","menu.color":"Χρώμα","menu.background-color":"Χρώμα φόντου","menu.evaluate":"Αξιολόγηση","menu.simplify":"Απλοποίηση","menu.solve":"Λύση","menu.solve-for":"Λύση για %@","menu.cut":"Αποκοπή","menu.copy":"Αντιγραφή","menu.copy-as-latex":"Αντιγραφή ως LaTeX","menu.copy-as-ascii-math":"Αντιγραφή ως ASCII Math","menu.copy-as-mathml":"Αντιγραφή ως MathML","menu.paste":"Επικόλληση","menu.select-all":"Επιλογή όλων","color.red":"Κόκκινο","color.orange":"Πορτοκαλί","color.yellow":"Κίτρινο","color.lime":"Λαχανί","color.green":"Πράσινο","color.teal":"Κυανό","color.cyan":"Γαλάζιο","color.blue":"Μπλε","color.indigo":"Ινδικό","color.purple":"Μωβ","color.magenta":"Ματζέντα","color.black":"Μαύρο","color.dark-grey":"Σκούρο Γκρι","color.grey":"Γκρι","color.light-grey":"Ανοιχτό Γκρι","color.white":"Λευκό"},es:{"keyboard.tooltip.symbols":"Símbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.numeric":"Numérico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"Añadir Matriz","menu.borders":"Delimitadores de Matriz","menu.array.add row above":"Añadir Línea Antes","menu.array.add row below":"Añadir Línea Despues","menu.array.add column after":"Añadir Columna Despues","menu.array.add column before":"Añadir Columna Antes","menu.array.delete row":"Borrar Línea","menu.array.delete rows":"Borrar Líneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","menu.mode":"Modo","menu.mode-math":"Matemáticas","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Pizarra","tooltip.bold":"Negrita","tooltip.italic":"Cursiva","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligráfico","tooltip.typewriter":"Máquina de escribir","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@ × %@","menu.font-style":"Estilo de fuente","menu.accent":"Acento","menu.decoration":"Decoración","menu.color":"Color","menu.background-color":"Fondo","menu.evaluate":"Evaluar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Cortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Pegar","menu.select-all":"Seleccionar todo","color.red":"Rojo","color.orange":"Naranja","color.yellow":"Amarillo","color.lime":"Lima","color.green":"Verde","color.teal":"Verde azulado","color.cyan":"Cian","color.blue":"Azul","color.indigo":"Índigo","color.purple":"Morado","color.magenta":"Magenta","color.black":"Negro","color.dark-grey":"Gris oscuro","color.grey":"Gris","color.light-grey":"Gris claro","color.white":"Blanco"},fr:{"keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.numeric":"Numérique","keyboard.tooltip.alphabetic":"Lettres romaines","tooltip.menu":"Menu","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"Rétablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Insérer une Matrice","menu.borders":"Bords","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Après","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Après","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes Sélectionées","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes Sélectionées","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tableau noir","tooltip.bold":"Gras","tooltip.italic":"Italique","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligraphique","tooltip.typewriter":"Machine à écrire","tooltip.roman-upright":"Romain droit","tooltip.row-by-col":"%@ × %@","menu.font-style":"Style de police","menu.accent":"Accent","menu.decoration":"Décoration","menu.color":"Couleur","menu.background-color":"Arrière-plan","menu.evaluate":"Évaluer","menu.simplify":"Simplifier","menu.solve":"Résoudre","menu.solve-for":"Résoudre pour %@","menu.cut":"Couper","menu.copy":"Copier","menu.copy-as-latex":"Copier en LaTeX","menu.copy-as-ascii-math":"Copier en ASCII Math","menu.copy-as-mathml":"Copier en MathML","menu.paste":"Coller","menu.select-all":"Sélectionner tout","color.red":"Rouge","color.orange":"Orange","color.yellow":"Jaune","color.lime":"Citron vert","color.green":"Vert","color.teal":"Turquoise","color.cyan":"Cyan","color.blue":"Bleu","color.indigo":"Indigo","color.purple":"Violet","color.magenta":"Magenta","color.black":"Noir","color.dark-grey":"Gris foncé","color.grey":"Gris","color.light-grey":"Gris clair","color.white":"Blanc"},he:{"keyboard.tooltip.symbols":"סמלים","keyboard.tooltip.greek":"אותיות יווניות","keyboard.tooltip.numeric":"מספרי","keyboard.tooltip.alphabetic":"מכתבים רומיים","tooltip.copy to clipboard":"העתק ללוח","tooltip.redo":"לַעֲשׂוֹת שׁוּב","tooltip.toggle virtual keyboard":"החלף את המקלדת הווירטואלית","tooltip.undo":"לבטל","menu.insert matrix":"הכנס מטריקס","menu.borders":"מפרידי מטריקס","menu.array.add row above":"הוסף שורה אחרי","menu.array.add row below":"הוסף שורה לפני","menu.array.add column after":"הוסף עמודה אחרי","menu.array.add column before":"הוסף עמודה לפני","menu.array.delete row":"מחק שורה","menu.array.delete rows":"מחק שורות שנבחרו","menu.array.delete column":"מחק עמודה","menu.array.delete columns":"מחק עמודות שנבחרו","menu.mode":"מצב","menu.mode-math":"מתמטיקה","menu.mode-text":"טקסט","menu.mode-latex":"LaTeX","tooltip.blackboard":"לוח שחור","tooltip.bold":"מודגש","tooltip.italic":"נטוי","tooltip.fraktur":"פרקטור","tooltip.script":"כתב","tooltip.caligraphic":"קליגרפי","tooltip.typewriter":"מכונת כתיבה","tooltip.roman-upright":"רומי ישר","tooltip.row-by-col":"%@ × %@","menu.font-style":"סגנון גופן","menu.accent":"צליל","menu.decoration":"קישוט","menu.color":"צבע","menu.background-color":"רקע","menu.evaluate":"חשב","menu.simplify":"פשט","menu.solve":"פתור","menu.solve-for":"פתור עבור %@","menu.cut":"גזור","menu.copy":"העתק","menu.copy-as-latex":"העתק כ־LaTeX","menu.copy-as-ascii-math":"העתק כ־ASCII Math","menu.copy-as-mathml":"העתק כ־MathML","menu.paste":"הדבק","menu.select-all":"בחר הכל","color.red":"אדום","color.orange":"כתום","color.yellow":"צהוב","color.lime":"ירוק ליים","color.green":"ירוק","color.teal":"טיל","color.cyan":"ציאן","color.blue":"כחול","color.indigo":"אינדיגו","color.purple":"סגול","color.magenta":"מגנטה","color.black":"שחור","color.dark-grey":"אפור כהה","color.grey":"אפור","color.light-grey":"אפור בהיר","color.white":"לבן"},it:{"keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere Greche","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.alphabetic":"Lettere Romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.cut to clipboard":"Taglia negli appunti","tooltip.paste from clipboard":"Incolla dagli appunti","tooltip.redo":"Ripeti","tooltip.toggle virtual keyboard":"Attiva/Disattiva Tastiera Virtuale","tooltip.menu":"Menu","tooltip.undo":"Annulla","menu.borders":"Bordi","menu.insert matrix":"Inserisci Matrice","menu.array.add row above":"Aggiungi Riga Prima","menu.array.add row below":"Aggiungi Riga Dopo","menu.array.add column after":"Aggiungi Colonna Dopo","menu.array.add column before":"Aggiungi Colonna Prima","menu.array.delete row":"Elimina Riga","menu.array.delete rows":"Elimina Righe Selezionate","menu.array.delete column":"Elimina Colonna","menu.array.delete columns":"Elimina Colonne Selezionate","menu.mode":"Modalità","menu.mode-math":"Matematica","menu.mode-text":"Testo","menu.mode-latex":"LaTeX","menu.insert":"Inserisci","menu.insert.abs":"Valore Assoluto","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Radice n-esima","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logaritmo in base a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Calcolo","menu.insert.derivative":"Derivata","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Derivata n-esima","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Integrale","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Somma","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Prodotto","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Numeri Complessi","menu.insert.modulus":"Modulo","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argomento","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Parte Reale","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Parte Immaginaria","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Coniugato","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Lavagna","tooltip.bold":"Grassetto","tooltip.italic":"Corsivo","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligrafico","tooltip.typewriter":"Macchina da Scrivere","tooltip.roman-upright":"Romano Dritto","tooltip.row-by-col":"%@ × %@","menu.font-style":"Stile del Carattere","menu.accent":"Accento","menu.decoration":"Decorazione","menu.color":"Colore","menu.background-color":"Sfondo","menu.evaluate":"Valuta","menu.simplify":"Semplifica","menu.solve":"Risolvi","menu.solve-for":"Risolvi per %@","menu.cut":"Taglia","menu.copy":"Copia","menu.copy-as-latex":"Copia come LaTeX","menu.copy-as-ascii-math":"Copia come ASCII Math","menu.copy-as-mathml":"Copia come MathML","menu.paste":"Incolla","menu.select-all":"Seleziona Tutto","color.red":"Rosso","color.orange":"Arancione","color.yellow":"Giallo","color.lime":"Lime","color.green":"Verde","color.teal":"Verde Acqua","color.cyan":"Ciano","color.blue":"Blu","color.indigo":"Indaco","color.purple":"Viola","color.magenta":"Magenta","color.black":"Nero","color.dark-grey":"Grigio Scuro","color.grey":"Grigio","color.light-grey":"Grigio Chiaro","color.white":"Bianco"},ja:{"keyboard.tooltip.symbols":"シンボル","keyboard.tooltip.greek":"ギリシャ文字","keyboard.tooltip.numeric":"数値","keyboard.tooltip.alphabetic":"ローマ字","tooltip.menu":"メニュー","tooltip.copy to clipboard":"クリップボードにコピー","tooltip.redo":"やり直し","tooltip.toggle virtual keyboard":"仮想キーボードの切り替え","tooltip.undo":"元に戻す","menu.insert matrix":"マトリックスを挿入","menu.borders":"行列区切り文字","menu.array.add row above":"後に行を追加","menu.array.add row below":"前に行を追加","menu.array.add column after":"後に列を追加","menu.array.add column before":"前に列を追加","menu.array.delete row":"行を削除","menu.array.delete rows":"選択した行を削除する","menu.array.delete column":"列を削除","menu.array.delete columns":"選択した列を削除する","menu.mode":"モード","menu.mode-math":"数式","menu.mode-text":"テキスト","menu.mode-latex":"LaTeX","tooltip.blackboard":"黒板","tooltip.bold":"太字","tooltip.italic":"イタリック","tooltip.fraktur":"フラクトゥール","tooltip.script":"スクリプト","tooltip.caligraphic":"カリグラフィック","tooltip.typewriter":"タイプライター","tooltip.roman-upright":"ローマ直立","tooltip.row-by-col":"%@ × %@","menu.font-style":"フォントスタイル","menu.accent":"アクセント","menu.decoration":"装飾","menu.color":"色","menu.background-color":"背景","menu.evaluate":"評価","menu.simplify":"簡略化","menu.solve":"解く","menu.solve-for":"%@ を解く","menu.cut":"切り取り","menu.copy":"コピー","menu.copy-as-latex":"LaTeXとしてコピー","menu.copy-as-ascii-math":"ASCII Mathとしてコピー","menu.copy-as-mathml":"MathMLとしてコピー","menu.paste":"貼り付け","menu.select-all":"すべて選択","color.red":"赤","color.orange":"オレンジ","color.yellow":"黄色","color.lime":"ライム","color.green":"緑","color.teal":"ティール","color.cyan":"シアン","color.blue":"青","color.indigo":"インディゴ","color.purple":"紫","color.magenta":"マゼンタ","color.black":"黒","color.dark-grey":"濃いグレー","color.grey":"グレー","color.light-grey":"薄いグレー","color.white":"白"},ko:{"keyboard.tooltip.symbols":"기호","keyboard.tooltip.greek":"그리스 문자","keyboard.tooltip.numeric":"숫자","keyboard.tooltip.alphabetic":"로마 문자","tooltip.copy to clipboard":"클립 보드에 복사","tooltip.redo":"다시 하다","tooltip.toggle virtual keyboard":"가상 키보드 전환","tooltip.undo":"실행 취소","menu.insert matrix":"매트릭스 삽입","menu.borders":"행렬 구분 기호","menu.array.add row above":"뒤에 행 추가","menu.array.add row below":"앞에 행 추가","menu.array.add column after":"뒤에 열 추가","menu.array.add column before":"앞에 열 추가","menu.array.delete row":"행 삭제","menu.array.delete rows":"선택한 행 삭제","menu.array.delete column":"열 삭제","menu.array.delete columns":"선택한 열 삭제","menu.mode":"モード","menu.mode-math":"数式","menu.mode-text":"テキスト","menu.mode-latex":"LaTeX","tooltip.blackboard":"칠판","tooltip.bold":"굵게","tooltip.italic":"이탤릭","tooltip.fraktur":"프랙투어","tooltip.script":"스크립트","tooltip.caligraphic":"캘리그래픽","tooltip.typewriter":"타자기","tooltip.roman-upright":"로마 직립","tooltip.row-by-col":"%@ × %@","menu.font-style":"글꼴 스타일","menu.accent":"악센트","menu.decoration":"장식","menu.color":"색상","menu.background-color":"배경","menu.evaluate":"평가","menu.simplify":"간소화","menu.solve":"해결","menu.solve-for":"%@에 대해 해결","menu.cut":"잘라내기","menu.copy":"복사","menu.copy-as-latex":"LaTeX로 복사","menu.copy-as-ascii-math":"ASCII Math로 복사","menu.copy-as-mathml":"MathML로 복사","menu.paste":"붙여넣기","menu.select-all":"모두 선택","color.red":"빨강","color.orange":"주황","color.yellow":"노랑","color.lime":"라임","color.green":"초록","color.teal":"청록","color.cyan":"청색","color.blue":"파랑","color.indigo":"남색","color.purple":"보라","color.magenta":"자홍","color.black":"검정","color.dark-grey":"진한 회색","color.grey":"회색","color.light-grey":"연한 회색","color.white":"흰색"},pl:{"keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.alphabetic":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.cut to clipboard":"Wytnij ze Schowka","tooltip.paste from clipboard":"Wklej ze Schowka","tooltip.redo":"Przywróć","tooltip.toggle virtual keyboard":"Przełącz klawiaturę wirtualną","tooltip.menu":"Menu","tooltip.undo":"Cofnij","menu.borders":"Ograniczniki macierzy","menu.insert matrix":"Wstaw macierz","menu.array.add row above":"Dodaj wiersz przed","menu.array.add row below":"Dodaj wiersz po","menu.array.add column after":"Dodaj kolumnę po","menu.array.add column before":"Dodaj kolumnę przed","menu.array.delete row":"Usuń wiersz","menu.array.delete rows":"Usuń wybrane wiersze","menu.array.delete column":"Usuń kolumnę","menu.array.delete columns":"Usuń wybrane kolumny","menu.mode":"Tryb","menu.mode-math":"Formuła","menu.mode-text":"Tekst","menu.mode-latex":"LaTeX","menu.insert":"Wstaw","menu.insert.abs":"Wartość bezwzględna","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Pierwiastek n-tego stopnia","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarytm o podstawie a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Rachunek różniczkowy i całkowy","menu.insert.derivative":"Pochodna","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Pochodna n-tego rzędu","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Całka","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Suma","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Iloczyn","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Liczby zespolone","menu.insert.modulus":"Moduł","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Część rzeczywista","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Część urojona","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Sprzężenie","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Tablica","tooltip.bold":"Pogrubienie","tooltip.italic":"Kursywa","tooltip.fraktur":"Fraktura","tooltip.script":"Skrypt","tooltip.caligraphic":"Kaligraficzny","tooltip.typewriter":"Maszynowy","tooltip.roman-upright":"Rzymski prosto","tooltip.row-by-col":"%@ × %@","menu.font-style":"Styl czcionki","menu.accent":"Akcent","menu.decoration":"Dekoracja","menu.color":"Kolor","menu.background-color":"Tło","menu.evaluate":"Oblicz","menu.simplify":"Uprość","menu.solve":"Rozwiąż","menu.solve-for":"Rozwiąż dla %@","menu.cut":"Wytnij","menu.copy":"Kopiuj","menu.copy-as-latex":"Kopiuj jako LaTeX","menu.copy-as-ascii-math":"Kopiuj jako ASCII Math","menu.copy-as-mathml":"Kopiuj jako MathML","menu.paste":"Wklej","menu.select-all":"Zaznacz wszystko","color.red":"Czerwony","color.orange":"Pomarańczowy","color.yellow":"Żółty","color.lime":"Limetkowy","color.green":"Zielony","color.teal":"Turkusowy","color.cyan":"Cyjan","color.blue":"Niebieski","color.indigo":"Indygo","color.purple":"Fioletowy","color.magenta":"Magenta","color.black":"Czarny","color.dark-grey":"Ciemnoszary","color.grey":"Szary","color.light-grey":"Jasnoszary","color.white":"Biały"},pt:{"keyboard.tooltip.symbols":"Símbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.numeric":"Numérico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar para área de transferência","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.borders":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","menu.mode":"Modo","menu.mode-math":"Fórmula","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Quadro Negro","tooltip.bold":"Negrito","tooltip.italic":"Itálico","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligráfico","tooltip.typewriter":"Máquina de Escrever","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@ × %@","menu.font-style":"Estilo da Fonte","menu.accent":"Acento","menu.decoration":"Decoração","menu.color":"Cor","menu.background-color":"Cor de Fundo","menu.evaluate":"Avaliar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Recortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Colar","menu.select-all":"Selecionar Tudo","color.red":"Vermelho","color.orange":"Laranja","color.yellow":"Amarelo","color.lime":"Verde Lima","color.green":"Verde","color.teal":"Verde-azulado","color.cyan":"Ciano","color.blue":"Azul","color.indigo":"Índigo","color.purple":"Roxo","color.magenta":"Magenta","color.black":"Preto","color.dark-grey":"Cinza Escuro","color.grey":"Cinza","color.light-grey":"Cinza Claro","color.white":"Branco"},uk:{"keyboard.tooltip.symbols":"Символи","keyboard.tooltip.greek":"Грецькі літери","keyboard.tooltip.numeric":"Числовий","keyboard.tooltip.alphabetic":"Римські літери","tooltip.copy to clipboard":"Копіювати в буфер обміну","tooltip.cut to clipboard":"Вирізати в буфер обміну","tooltip.paste from clipboard":"Вставити з буфера обміну","tooltip.redo":"Повторити","tooltip.toggle virtual keyboard":"Переключити віртуальну клавіатуру","tooltip.menu":"Меню","tooltip.undo":"Скасувати","menu.borders":"Межі","menu.insert matrix":"Вставити матрицю","menu.array.add row above":"Додати рядок перед","menu.array.add row below":"Додати рядок після","menu.array.add column after":"Додати стовпець після","menu.array.add column before":"Додати стовпець перед","menu.array.delete row":"Видалити рядок","menu.array.delete rows":"Видалити вибрані рядки","menu.array.delete column":"Видалити стовпець","menu.array.delete columns":"Видалити вибрані стовпці","menu.mode":"Режим","menu.mode-math":"Математика","menu.mode-text":"Текст","menu.mode-latex":"LaTeX","menu.insert":"Вставити","menu.insert.abs":"Абсолютне значення","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Корінь n-го степеня","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Логарифм за основою a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Обчислення","menu.insert.derivative":"Похідна","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Похідна n-го порядку","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Інтеграл","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Сума","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Добуток","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Комплексні числа","menu.insert.modulus":"Модуль","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Аргумент","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Дійсна частина","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Уявна частина","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Спряжене число","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Дошка","tooltip.bold":"Жирний","tooltip.italic":"Курсив","tooltip.fraktur":"Фрактурний","tooltip.script":"Рукописний","tooltip.caligraphic":"Каліграфічний","tooltip.typewriter":"Друкарський","tooltip.roman-upright":"Прямий римський","tooltip.row-by-col":"%@ × %@","menu.font-style":"Стиль шрифту","menu.accent":"Акцент","menu.decoration":"Оформлення","menu.color":"Колір","menu.background-color":"Фон","menu.evaluate":"Обчислити","menu.simplify":"Спростити","menu.solve":"Розв’язати","menu.solve-for":"Розв’язати для %@","menu.cut":"Вирізати","menu.copy":"Копіювати","menu.copy-as-latex":"Копіювати як LaTeX","menu.copy-as-ascii-math":"Копіювати як ASCII Math","menu.copy-as-mathml":"Копіювати як MathML","menu.paste":"Вставити","menu.select-all":"Вибрати все","color.red":"Червоний","color.orange":"Помаранчевий","color.yellow":"Жовтий","color.lime":"Лаймовий","color.green":"Зелений","color.teal":"Бірюзовий","color.cyan":"Синьо-зелений","color.blue":"Синій","color.indigo":"Індиго","color.purple":"Фіолетовий","color.magenta":"Пурпурний","color.black":"Чорний","color.dark-grey":"Темно-сірий","color.grey":"Сірий","color.light-grey":"Світло-сірий","color.white":"Білий"},"zh-cn":{"keyboard.tooltip.symbols":"符号","keyboard.tooltip.greek":"希腊字母","keyboard.tooltip.numeric":"数字","keyboard.tooltip.alphabetic":"罗马字母","tooltip.copy to clipboard":"复制到剪贴板","tooltip.redo":"重做","tooltip.toggle virtual keyboard":"切换虚拟键盘","tooltip.undo":"撤消","menu.insert matrix":"插入矩阵","menu.borders":"矩阵分隔符","menu.array.add row above":"在后面添加行","menu.array.add row below":"在前面添加行","menu.array.add column after":"在后面添加列r","menu.array.add column before":"在前面添加列","menu.array.delete row":"删除行","menu.array.delete rows":"删除选定行","menu.array.delete column":"删除列","menu.array.delete columns":"删除选定的列","menu.mode":"模式","menu.mode-math":"数学","menu.mode-text":"文本","menu.mode-latex":"LaTeX","tooltip.blackboard":"黑板","tooltip.bold":"粗体","tooltip.italic":"斜体","tooltip.fraktur":"Fraktur","tooltip.script":"脚本","tooltip.caligraphic":"草书","tooltip.typewriter":"打字机","tooltip.roman-upright":"罗马直立","tooltip.row-by-col":"%@ × %@","menu.font-style":"字体样式","menu.accent":"重音","menu.decoration":"装饰","menu.color":"颜色","menu.background-color":"背景","menu.evaluate":"计算","menu.simplify":"简化","menu.solve":"求解","menu.solve-for":"求解 %@","menu.cut":"剪切","menu.copy":"复制","menu.copy-as-latex":"复制为 LaTeX","menu.copy-as-ascii-math":"复制为 ASCII Math","menu.copy-as-mathml":"复制为 MathML","menu.paste":"粘贴","menu.select-all":"全选","color.red":"红色","color.orange":"橙色","color.yellow":"黄色","color.lime":"绿黄色","color.green":"绿色","color.teal":"青色","color.cyan":"蓝绿色","color.blue":"蓝色","color.indigo":"靛蓝色","color.purple":"紫色","color.magenta":"洋红色","color.black":"黑色","color.dark-grey":"深灰色","color.grey":"灰色","color.light-grey":"浅灰色","color.white":"白色"},"zh-tw":{"keyboard.tooltip.symbols":"符號","keyboard.tooltip.greek":"希臘字母","keyboard.tooltip.numeric":"數字","keyboard.tooltip.alphabetic":"羅馬字母","tooltip.copy to clipboard":"複製到剪貼板","tooltip.redo":"重做","tooltip.toggle virtual keyboard":"切換虛擬鍵盤","tooltip.undo":"撤消","menu.insert matrix":"插入矩陣","menu.borders":"矩陣分隔符","menu.array.add row above":"在後面添加行","menu.array.add row below":"在前面添加行","menu.array.add column after":"在後面添加列","menu.array.add column before":"在前面添加列","menu.array.delete row":"刪除行","menu.array.delete rows":"刪除選定行","menu.array.delete column":"刪除列","menu.array.delete columns":"刪除選定的列","menu.mode":"模式","menu.mode-math":"數學","menu.mode-text":"文本","menu.mode-latex":"LaTeX","tooltip.blackboard":"黑板","tooltip.bold":"粗體","tooltip.italic":"斜體","tooltip.fraktur":"Fraktur","tooltip.script":"腳本","tooltip.caligraphic":"草書","tooltip.typewriter":"打字機","tooltip.roman-upright":"羅馬直立","tooltip.row-by-col":"%@ × %@","menu.font-style":"字體樣式","menu.accent":"重音","menu.decoration":"裝飾","menu.color":"顏色","menu.background-color":"背景","menu.evaluate":"計算","menu.simplify":"簡化","menu.solve":"求解","menu.solve-for":"求解 %@","menu.cut":"剪下","menu.copy":"複製","menu.copy-as-latex":"複製為 LaTeX","menu.copy-as-ascii-math":"複製為 ASCII Math","menu.copy-as-mathml":"複製為 MathML","menu.paste":"貼上","menu.select-all":"全選","color.red":"紅色","color.orange":"橙色","color.yellow":"黃色","color.lime":"綠黃色","color.green":"綠色","color.teal":"青色","color.cyan":"藍綠色","color.blue":"藍色","color.indigo":"靛藍色","color.purple":"紫色","color.magenta":"洋紅色","color.black":"黑色","color.dark-grey":"深灰色","color.grey":"灰色","color.light-grey":"淺灰色","color.white":"白色"}};function Me(){return"window"in globalThis&&"document"in globalThis}function Bo(){return"matchMedia"in window?window.matchMedia("(pointer: coarse)").matches:"ontouchstart"in window||navigator.maxTouchPoints>0}function Gc(){try{return window.self!==window.top}catch{return!0}}function Ro(){return typeof navigator.vibrate=="function"}function kt(){var t,e;if(!Me())return"other";let r=(e=(t=navigator.userAgentData)==null?void 0:t.platform)!=null?e:navigator.platform;return/^mac/i.test(r)?navigator.maxTouchPoints===5?"ios":"macos":/^win/i.test(r)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}function Xc(){if(!Me())return!0;if(/firefox/i.test(navigator.userAgent)){let t=navigator.userAgent.match(/firefox\/(\d+)/i);return t?parseInt(t[1])>=78:!1}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let t=navigator.userAgent.match(/edg\/(\d+)/i);return t?parseInt(t[1])>=79:!1}return!0}function zs(){return HTMLElement.prototype.hasOwnProperty("popover")}var N={strings:Jc,_locale:"",_dirty:!1,_subscribers:[],_numberFormatter:void 0,get locale(){return N._locale||(N._locale=Me()?navigator.language.slice(0,5):"en-US"),N._locale},set locale(t){N._locale=t,N._numberFormatter=void 0,N.dirty=!0},get numberFormatter(){if(!N._numberFormatter)try{N._numberFormatter=new Intl.NumberFormat(N.locale)}catch{try{N._numberFormatter=new Intl.NumberFormat(N.locale.slice(0,2))}catch{N._numberFormatter=new Intl.NumberFormat("en-US")}}return N._numberFormatter},merge(t,e){if(typeof t=="string"&&e)N.strings[t]=p(p({},N.strings[t]),e),N.dirty=!0;else for(let r of Object.keys(t))N.merge(r,t[r])},get dirty(){return N._dirty},set dirty(t){N._dirty||N._dirty===t||(N._dirty=!0,setTimeout(()=>{N._dirty=!1,this._subscribers.forEach(e=>e?.())},0))},subscribe(t){return N._subscribers.push(t),N._subscribers.length-1},unsubscribe(t){t<0||t>=N._subscribers.length||(N._subscribers[t]=void 0)},update(t){let e=t.querySelectorAll("[data-l10n-tooltip]");for(let r of e){let n=r.getAttribute("data-l10n-tooltip");if(n){let a=z(n);a&&r.setAttribute("data-tooltip",a)}}e=t.querySelectorAll("[data-l10n-arial-label]");for(let r of e){let n=r.getAttribute("data-l10n-arial-label");if(n){let a=z(n);a&&r.setAttribute("aria-label",a)}}}};function z(t,...e){if(t===void 0)return;let r="",n=N.locale;N.strings[n]&&(r=N.strings[n][t]);let a=n.slice(0,2);if(!r&&N.strings[a]&&(r=N.strings[a][t]),r||(r=N.strings.en[t]),!r)return;let s=/(%@|%([0-9]+)\$@)/g,o=s.exec(r),c=0;for(;o;){if(e[c++]){let d=o[2]?parseInt(o[2],10)-1:c-1,m=e[d];typeof m=="number"&&(m=N.numberFormatter.format(m)),r=r.replace(o[1],m)}o=s.exec(r)}return r=r.replace(/%%/g,"%"),r}var Ah={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},Ch={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},Ut={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",cyan:"#b8e5c9",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},jt={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",cyan:"#13a7ec",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},Zc={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},Eh={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function Hr(t){var e,r,n,a,s,o;let c=t.split("!"),d,m,y,A=255,P=255,Z=255,me=-1,_e=c.length>0&&c[0].startsWith("-");_e&&(c[0]=c[0].slice(1));for(let Ge=0;Ge<c.length;Ge++){d=A,m=P,y=Z;let ve=(e=c[Ge].trim().match(/^([A-Za-z\d-]+)/))==null?void 0:e[1],He=ve?.toLowerCase(),De=ve&&(o=(s=(a=(n=(r=jt[He])!=null?r:jt[Zc[ve]])!=null?n:Ch[ve])!=null?a:Eh[ve])!=null?s:Ah[ve])!=null?o:c[Ge].trim(),Xe=De.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(Xe!=null&&Xe[1]&&Xe[2]&&Xe[3])A=Math.max(0,Math.min(255,Number.parseInt(Xe[1],16))),P=Math.max(0,Math.min(255,Number.parseInt(Xe[2],16))),Z=Math.max(0,Math.min(255,Number.parseInt(Xe[3],16)));else if(Xe=De.match(/^#([\da-f]{3})$/i),Xe!=null&&Xe[1]){let Bs=Number.parseInt(Xe[1][0],16),wt=Number.parseInt(Xe[1][1],16),li=Number.parseInt(Xe[1][2],16);A=Math.max(0,Math.min(255,Bs*16+Bs)),P=Math.max(0,Math.min(255,wt*16+wt)),Z=Math.max(0,Math.min(255,li*16+li))}else if(Xe=De.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),Xe!=null&&Xe[1]&&Xe[2]&&Xe[3])A=Math.max(0,Math.min(255,Number.parseInt(Xe[1]))),P=Math.max(0,Math.min(255,Number.parseInt(Xe[2]))),Z=Math.max(0,Math.min(255,Number.parseInt(Xe[3])));else return;me>=0&&(A=(1-me)*A+me*d,P=(1-me)*P+me*m,Z=(1-me)*Z+me*y,me=-1),Ge+1<c.length&&(me=Math.max(0,Math.min(100,Number.parseInt(c[++Ge])))/100)}return me>=0&&(A=me*A+(1-me)*d,P=me*P+(1-me)*m,Z=me*Z+(1-me)*y),_e&&(A=255-A,P=255-P,Z=255-Z),"#"+("00"+Math.round(A).toString(16)).slice(-2)+("00"+Math.round(P).toString(16)).slice(-2)+("00"+Math.round(Z).toString(16)).slice(-2)}function Si(t){var e,r;return t=t.trim(),(r=(e=Ut[t.toLowerCase()])!=null?e:Ut[Zc[t]])!=null?r:Hr(t)}function Th(t){if(!t||t[0]!=="#")return;t=t.slice(1);let e;return t.length<=4?(e={r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)},t.length===4&&(e.a=parseInt(t[3]+t[3],16)/255)):(e={r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)},t.length===8&&(e.a=parseInt(t[6]+t[7],16)/255)),e&&e.a===void 0&&(e.a=1),e}function Is(t,e,r){return r<0&&(r+=6),r>=6&&(r-=6),r<1?(e-t)*r+t:r<3?e:r<4?(e-t)*(4-r)+t:t}function Dh(t){let[e,r,n]=[t.h,t.s,t.l];e=(e+360)%360/60,n=Math.max(0,Math.min(n,1)),r=Math.max(0,Math.min(r,1));let a=n<=.5?n*(r+1):n+r-n*r,s=n*2-a;return{r:Math.round(255*Is(s,a,e+2)),g:Math.round(255*Is(s,a,e)),b:Math.round(255*Is(s,a,e-2))}}function Ns(t){return t<0?0:t>255?255:Math.round(t)}function Kh(t){let{r:e,g:r,b:n}=t,a=((1<<24)+(Ns(e)<<16)+(Ns(r)<<8)+Ns(n)).toString(16).slice(1);return a[0]===a[1]&&a[2]===a[3]&&a[4]===a[5]&&a[6]===a[7]&&(a=a[0]+a[2]+a[4]),"#"+a}function Oh(t){let{r:e,g:r,b:n}=t;e=e/255,r=r/255,n=n/255;let a=Math.min(e,r,n),s=Math.max(e,r,n),o=s-a,c,d;s===a?c=0:e===s?c=(r-n)/o:r===s?c=2+(n-e)/o:n===s&&(c=4+(e-r)/o),c=Math.min(c*60,360),c<0&&(c+=360);let m=(a+s)/2;return s===a?d=0:m<=.5?d=o/(s+a):d=o/(2-s-a),{h:c,s:d,l:m}}function Yc(t){let e=Th(t);if(!e)return t;let{h:r,s:n,l:a}=Oh(e);return n+=.1,a-=.1,Kh(Dh({h:r,s:n,l:a}))}var Fs={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10178:"\\perp",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},$s={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},Qc=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120822,len:10,offset:48,variant:"monospace"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"}];function Cn(t,e,r){if(!/[A-Za-z\d]/.test(t)||(r==="up"&&(r=void 0),!e&&!r))return;let n=t.codePointAt(0);if(n===void 0)return t;for(let a of Qc)if((!e||a.variant===e)&&(!r||a.style===r)&&n>=a.offset&&n<a.offset+a.len){let s=a.start+n-a.offset;return String.fromCodePoint($s[s]||s)}}function Bh(t){var e;if((t<119808||t>120831)&&(t<8448||t>8527))return{char:String.fromCodePoint(t)};for(let r in $s)if($s[r]===t){t=(e=r.codePointAt(0))!=null?e:0;break}for(let r of Qc)if(t>=r.start&&t<r.start+r.len)return{char:String.fromCodePoint(t-r.start+r.offset),variant:r.variant,style:r.style};return{char:String.fromCodePoint(t)}}function eu(t){var e;if("{}<>[]$&*#^_%:'˜".includes(t)||t.length>1)return;let r=(e=t.codePointAt(0))!=null?e:0,n=Fs[r];if(n)return n;let{char:a,variant:s,style:o}=Bh(r);if(!(!s&&!o)){switch(n=a,s){case"double-struck":n=`\\mathbb{${n}}`;break;case"fraktur":n=`\\mathfrak{${n}}`;break;case"script":n=`\\mathscr{${n}}`;break;case"sans-serif":n=`\\mathsf{${n}}`;break;case"monospace":n=`\\mathtt{${n}}`;break;case"calligraphic":n=`\\mathcal{${n}}`;break}switch(o){case"bold":n=`\\mathbf{${n}}`;break;case"italic":n=`\\mathit{${n}}`;break;case"bolditalic":n=`\\mathbfit{${n}}`;break}return n}}function C(t){return t?Array.isArray(t)?t:typeof t=="object"&&"group"in t?t.group:[]:[]}var En={},zo=p({},Fs),Ai={},qs={},Rh={darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",C:"\\mathbb{C}",H:"\\mathbb{H}",N:"\\mathbb{N}",Q:"\\mathbb{Q}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",doublecap:"\\Cap",doublecup:"\\Cup",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",hArr:"\\Leftrightarrow",harr:"\\leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",Larr:"\\Leftarrow",lArr:"\\Leftarrow",lrarr:"\\leftrightarrow",Lrarr:"\\Leftrightarrow",lrArr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",part:"\\partial",plusmn:"\\pm",rarr:"\\rightarrow",Rarr:"\\Rightarrow",rArr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",restriction:"\\upharpoonright",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",varcoppa:"\\coppa",weierp:"\\wp",Zeta:"\\mathrm{Z}"},Ph={varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1,captureSelection:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},zh={bra:{def:"\\mathinner{\\langle{#1}|}",args:1,captureSelection:!1},ket:{def:"\\mathinner{|{#1}\\rangle}",args:1,captureSelection:!1},braket:{def:"\\mathinner{\\langle{#1}\\rangle}",args:1,captureSelection:!1},set:{def:"\\mathinner{\\lbrace #1 \\rbrace}",args:1,captureSelection:!1},Bra:{def:"\\left\\langle #1\\right|",args:1,captureSelection:!1},Ket:{def:"\\left|#1\\right\\rangle",args:1,captureSelection:!1},Braket:{def:"\\left\\langle{#1}\\right\\rangle",args:1,captureSelection:!1},Set:{def:"\\left\\lbrace #1 \\right\\rbrace",args:1,captureSelection:!1}},Ih={strut:{primitive:!0,def:"\\phantom{\\rule[0.3\\baselineskip]{0}{0.7\\baselineskip}}",args:0,captureSelection:!0},iff:{primitive:!0,captureSelection:!0,def:"\\;\\Longleftrightarrow\\;"},nicefrac:"^{#1}\\!\\!/\\!_{#2}",phase:{def:"\\enclose{phasorangle}{#1}",args:1,captureSelection:!1},rd:"\\mathrm{d}",rD:"\\mathrm{D}",odif:"\\mathrm{d}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}",mathstrut:{def:"\\vphantom{(}",primitive:!0},angl:"\\enclose{actuarial}{#1}",angln:"\\enclose{actuarial}{n}",anglr:"\\enclose{actuarial}{r}",anglk:"\\enclose{actuarial}{k}",mathtools:{primitive:!0,package:{ordinarycolon:":",vcentcolon:"\\mathrel{\\mathop\\ordinarycolon}",dblcolon:'{\\mathop{\\char"2237}}',coloneqq:'{\\mathop{\\char"2254}}',Coloneqq:'{\\mathop{\\char"2A74}}',coloneq:'{\\mathop{\\char"2254}}',Coloneq:'{\\mathop{\\char"2A74}}',eqqcolon:'{\\mathop{\\char"2255}}',Eqqcolon:'{\\mathop{\\char"3D\\char"2237}}',eqcolon:'{\\mathop{\\char"2255}}',Eqcolon:'{\\mathop{\\char"3D\\char"2237}}',colonapprox:'{\\mathop{\\char"003A\\char"2248}}',Colonapprox:'{\\mathop{\\char"2237\\char"2248}}',colonsim:'{\\mathop{\\char"3A\\char"223C}}',Colonsim:'{\\mathop{\\char"2237\\char"223C}}',colondash:"\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",Colondash:"\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}"}},ratio:"\\vcentcolon",coloncolon:"\\dblcolon",colonequals:"\\coloneq",coloncolonequals:"\\Coloneq",equalscolon:"\\eqcolon",equalscoloncolon:"\\Eqcolon",colonminus:"\\colondash",coloncolonminus:"\\Colondash",minuscolon:"\\dashcolon",minuscoloncolon:"\\Dashcolon",coloncolonapprox:"\\Colonapprox",coloncolonsim:"\\Colonsim",simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",simcoloncolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcoloncolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",notni:"\\mathrel{\\char`∌}",limsup:"\\operatorname*{lim\\,sup}",liminf:"\\operatorname*{lim\\,inf}",injlim:"\\operatorname*{inj\\,lim}",projlim:"\\operatorname*{proj\\,lim}",varlimsup:"\\operatorname*{\\overline{lim}}",varliminf:"\\operatorname*{\\underline{lim}}",varinjlim:"\\operatorname*{\\underrightarrow{lim}}",varprojlim:"\\operatorname*{\\underleftarrow{lim}}",argmin:"\\operatorname*{arg\\,min}",argmax:"\\operatorname*{arg\\,max}",plim:"\\mathop{\\operatorname{plim}}\\limits",tripledash:{def:"\\vphantom{-}\\raise{4mu}{\\mkern1.5mu\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2mu}}",expand:!0},"braket.sty":{package:zh},"amsmath.sty":{package:Ph,primitive:!0},"texvc.sty":{package:Rh,primitive:!1}},Li={" ":32,"\\!":33,"\\#":35,"\\$":36,"\\%":37,"\\&":38,"\\_":95,"-":45,"\\textunderscore":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\textbraceleft":123,"\\textbraceright":125,"\\lbrace":123,"\\rbrace":125,"\\lbrack":91,"\\rbrack":93,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"–":8211,"—":8212,"‘":8216,"’":8217,"“":8220,"”":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},iu=/[\w!@*()-=+{}\[\]\\';:?/.,~<>`|$%#&^" ]/,Io,Wr;Xc()?(Io=new RegExp("\\p{Letter}","u"),Wr=new RegExp("[0-9\\p{Letter}]","u")):(Io=/[a-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒößÖẞìíòúÌÍÒÚáñÁÑ]/,Wr=/[\da-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒößÖẞìíòúÌÍÒÚáñÁÑ]/);function Vs(t,e,r="mord",n){e!==void 0&&(En[t]={definitionType:"symbol",type:r,variant:n,codepoint:e},zo[e]||(zo[e]=t))}function ye(t,e,r){if(typeof t=="string"){for(let n=0;n<t.length;n++){let a=t.charAt(n);Vs(a,a.codePointAt(0))}return}for(let[n,a,s,o]of t)Vs(n,a,s??e,o??r)}function Hs(t,e){for(let r=t;r<=e;r++)Vs(String.fromCodePoint(r),r)}function nu(t){var e;return(e=qs[t])!=null?e:null}function ou(t,e){var r,n;if(e.length===0||e==="\\"||!e.startsWith("\\"))return[];let a=[];for(let o in Ai)o.startsWith(e)&&!Ai[o].infix&&a.push({match:o,frequency:(r=Ai[o].frequency)!=null?r:0});for(let o in En)o.startsWith(e)&&a.push({match:o,frequency:(n=En[o].frequency)!=null?n:0});let s=e.substring(1);for(let o of Object.keys(t.options.macros))o.startsWith(s)&&a.push({match:"\\"+o,frequency:0});return a.sort((o,c)=>{var d,m;return o.frequency===c.frequency?o.match.length===c.match.length?o.match<c.match?-1:1:o.match.length-c.match.length:((d=c.frequency)!=null?d:0)-((m=o.frequency)!=null?m:0)}),a.map(o=>o.match)}function tu(t){let e="auto",r=t.match(/:([^=]+)/);return r&&(e=r[1].trim()),e}function No(t){if(!t)return[];let e=[],r=t.split("]");if(r[0].startsWith("[")){e.push({isOptional:!0,type:tu(r[0].slice(1))});for(let n=1;n<=r.length;n++)e.push(...No(r[n]))}else if(r=t.split("}"),r[0].startsWith("{")){e.push({isOptional:!1,type:tu(r[0].slice(1))});for(let n=1;n<=r.length;n++)e.push(...No(r[n]))}return e}function Ws(t){if(!t)return"";let e="",r=!0;for(let n of t)typeof n.value=="string"?e+=n.value:r=!1;return r?e:""}function St(t,e,r){typeof t=="string"&&(t=[t]);let n={tabular:!0,rootOnly:!1,params:No(e),createAtom:r};for(let a of t)qs[a]=n}function $o(t,e,r){var n;typeof t=="string"&&(t=[t]);let a={tabular:(n=r?.tabular)!=null?n:!1,rootOnly:!0,params:[],createAtom:e};for(let s of t)qs[s]=a}function v(t,e,r){var n,a;r||(r={});let s={definitionType:"function",params:No(e),ifMode:r.ifMode,isFunction:(n=r.isFunction)!=null?n:!1,applyMode:r.applyMode,infix:(a=r.infix)!=null?a:!1,parse:r.parse,createAtom:r.createAtom,applyStyle:r.applyStyle,serialize:r.serialize,render:r.render};if(typeof t=="string")Ai["\\"+t]=s;else for(let o of t)Ai["\\"+o]=s}var Po;function Ei(t){return Po||(Po=Ci(Ih)),t?Ci(p(p({},Po),t)):Po}function ru(t,e){var r,n,a,s;if(typeof t=="string"){let o=0,c=t;return/(^|[^\\])#1/.test(c)&&(o=1),/(^|[^\\])#2/.test(c)&&(o=2),/(^|[^\\])#3/.test(c)&&(o=3),/(^|[^\\])#4/.test(c)&&(o=4),/(^|[^\\])#5/.test(c)&&(o=5),/(^|[^\\])#6/.test(c)&&(o=6),/(^|[^\\])#7/.test(c)&&(o=7),/(^|[^\\])#8/.test(c)&&(o=8),/(^|[^\\])#9/.test(c)&&(o=9),{expand:(r=e?.expand)!=null?r:!0,captureSelection:(n=e?.captureSelection)!=null?n:!0,args:o,def:c}}return p({expand:(a=e?.expand)!=null?a:!0,captureSelection:(s=e?.captureSelection)!=null?s:!0,args:0},t)}function Ci(t){if(!t)return{};let e={};for(let r of Object.keys(t)){let n=t[r];if(n==null)delete e[r];else if(typeof n=="object"&&"package"in n)for(let a of Object.keys(n.package))e[a]=ru(n.package[a],{expand:!n.primitive,captureSelection:n.captureSelection});else e[r]=ru(n)}return e}function se(t,e="math"){if(!t||t.length===0)return null;let r=null;if(t.startsWith("\\")){if(r=Ai[t],r)return!r.ifMode||r.ifMode===e?r:null;e==="math"?r=En[t]:Li[t]&&(r={definitionType:"symbol",type:"mord",codepoint:Li[t]})}else if(e==="math"){if(r=En[t],!r&&t.length===1){let n=Us("math",t.codePointAt(0));return n.startsWith("\\")?f(p({},se(n,"math")),{command:n}):null}}else Li[t]?r={definitionType:"symbol",type:"mord",codepoint:Li[t]}:e==="text"&&(r={definitionType:"symbol",type:"mord",codepoint:t.codePointAt(0)});return r??null}function Ti(t,e){if(!t.startsWith("\\"))return null;let r=t.slice(1);return e[r]}function Us(t,e){return e===void 0?"":t==="math"&&zo[e]?zo[e]:t==="text"&&Object.keys(Li).find(n=>Li[n]===e)||String.fromCodePoint(e)}var Ze=[0,.68889,0,0,.72222],Ur=[0,.68889,0,0,.66667],js=[0,.68889,0,0,.77778],Fo=[0,.68889,0,0,.61111],au=[.16667,.68889,0,0,.77778],Tn=[0,.68889,0,0,.55556],j=[0,0,0,0,.25],su=[0,.825,0,0,2.33334],lu=[0,.9,0,0,2.33334],Vo=[0,.68889,0,0,.54028],Js=[-.03598,.46402,0,0,.5],Ce=[-.13313,.36687,0,0,1],qo=[.01354,.52239,0,0,1],cu=[.01354,.52239,0,0,1.11111],uu=[0,.54986,0,0,1],Ho=[0,.69224,0,0,.5],Gs=[0,.43056,0,0,1],lr=[.08198,.58198,0,0,.77778],Wo=[.19444,.69224,0,0,.41667],Uo=[.1808,.675,0,0,1],du=[.19444,.69224,0,0,.83334],mu=[.13667,.63667,0,0,1],pu=[-.064,.437,0,0,1.334],cr=[.08167,.58167,0,0,.77778],Dn=[0,.69224,0,0,.72222],Xs=[0,.69224,0,0,.66667],jo=[-.13313,.36687,0,0,.77778],hu=[.06062,.54986,0,0,.77778],Jo=[0,.69224,0,0,.77778],Di=[.25583,.75583,0,0,.77778],Lt=[.25142,.75726,0,0,.77778],Ki=[.20576,.70576,0,0,.77778],at=[.30274,.79383,0,0,.77778],Kn=[.22958,.72958,0,0,.77778],fu=[.1808,.675,0,0,.77778],At=[.13667,.63667,0,0,.77778],Ie=[.13597,.63597,0,0,.77778],ur=[.03517,.54986,0,0,.77778],Oi=[0,.675,0,0,.77778],gu=[.19444,.69224,0,0,.61111],bu=[0,.54986,0,0,.76042],yu=[0,.54986,0,0,.66667],dr=[.0391,.5391,0,0,.77778],xu=[.03517,.54986,0,0,1.33334],vu=[.38569,.88569,0,0,.77778],Go=[.23222,.74111,0,0,.77778],_u=[.19444,.69224,0,0,.77778],Mu=[0,.37788,0,0,.5],Xo=[0,.54986,0,0,.72222],wu=[0,.69224,0,0,.83334],ku=[.11111,.69224,0,0,.66667],Bi=[.26167,.75726,0,0,.77778],Su=[.48256,.98256,0,0,.77778],Lu=[.28481,.79383,0,0,.77778],Au=[.08167,.58167,0,0,.22222],Cu=[.08167,.58167,0,0,.38889],Eu=[0,.43056,.04028,0,.66667],Tu=[.41951,.91951,0,0,.77778],Du=[.24982,.74947,0,0,.38865],Ku=[.08319,.58283,0,0,.75623],Ou=[0,.10803,0,0,.27764],Zs=[0,.47534,0,0,.50181],On=[.18906,.47534,0,0,.50181],Bu=[0,.69141,0,0,.50181],Ru=[.24982,.74947,0,0,.27764],Ys=[0,.69141,0,0,.21471],Zo=[.25,.75,0,0,.44722],Ye=[0,.64444,0,0,.575],Ri=[.08556,.58556,0,0,.89444],Yo=[0,.69444,0,0,.89444],Qo=[0,.68611,0,0,.9],Qs=[0,.68611,0,0,.86944],mr=[.25,.75,0,0,.575],ea=[.25,.75,0,0,.31944],jr=[0,.69444,0,0,.63889],Pi=[0,.69444,0,0,.31944],Pu=[0,.44444,0,0,.63889],zu=[0,.44444,0,0,.51111],pr=[0,.69444,0,0,.575],st=[.13333,.63333,0,0,.89444],Iu=[0,.44444,0,0,.31944],Nu=[0,.69444,0,0,.86944],$u=[0,.68611,0,0,.69166],ta=[0,.68611,0,0,.83055],el=[0,.68611,0,0,.89444],tl=[0,.69444,0,0,.60278],Fu=[.19444,.69444,0,0,.51111],Vu=[0,.69444,0,0,.83055],Ct=[-.10889,.39111,0,0,1.14999],qu=[.19444,.69444,0,0,.575],Bn=[.19444,.69444,0,0,1.14999],Hu=[.19444,.69444,0,0,.70277],Wu=[.05556,.75,0,0,.575],rl=[0,.68611,0,0,.95833],Uu=[.08556,.58556,0,0,.76666],il=[-.02639,.47361,0,0,.575],ju=[0,.44444,0,0,.89444],Jr=[0,.55556,0,0,.76666],Ju=[-.10889,.39111,0,0,.89444],nl=[.00222,.50222,0,0,.89444],hr=[.19667,.69667,0,0,.89444],Gu=[.08556,.58556,0,0,1.14999],ol=[0,.69444,0,0,.70277],ra=[-.02778,.47222,0,0,.575],ia=[.25,.75,0,0,.51111],Xu=[-.13889,.36111,0,0,1.14999],Zu=[.19444,.69444,0,0,1.02222],na=[.12963,.69444,0,0,.89444],Yu=[.19444,.69444,0,0,.44722],fr=[0,.64444,.13167,0,.59111],Qu=[.19444,.64444,.13167,0,.59111],al=[0,.68611,.17208,0,.8961],ed=[.19444,.44444,.105,0,.53222],td=[0,.44444,.085,0,.82666],rd=[0,.69444,.06709,0,.59111],oa=[0,.69444,.12945,0,.35555],id=[0,.69444,0,0,.94888],sl=[0,.69444,.11472,0,.59111],nd=[0,.68611,.10778,0,.88555],od=[0,.69444,.07939,0,.62055],aa=[0,.69444,.12417,0,.30667],gr=[0,.64444,.13556,0,.51111],ad=[.19444,.64444,.13556,0,.51111],sa=[0,.68333,.16389,0,.74333],sd=[.19444,.43056,.08847,0,.46],ld=[0,.43056,.07514,0,.71555],cd=[0,.69444,.06646,0,.51111],ud=[0,.69444,0,0,.83129],dd=[0,.69444,.1225,0,.51111],md=[0,.68333,.09403,0,.76666],pd=[0,.68333,.11111,0,.76666],hd=[0,.69444,.06961,0,.51444],Jt=[0,.69444,0,0,.27778],zi=[.25,.75,0,0,.38889],Qe=[0,.64444,0,0,.5],Gr=[0,.69444,0,0,.77778],Xr=[0,.68333,0,0,.75],Rn=[0,.68333,0,0,.77778],fd=[0,.68333,0,0,.68056],Pn=[0,.68333,0,0,.72222],Gt=[.25,.75,0,0,.5],la=[.25,.75,0,0,.27778],xe=[0,.69444,0,0,.5],Ii=[0,.69444,0,0,.55556],ll=[0,.43056,0,0,.44445],zn=[0,.43056,0,0,.5],gd=[.19444,.43056,0,0,.55556],bd=[0,.43056,0,0,.55556],et=[.08333,.58333,0,0,.77778],yd=[0,.43056,0,0,.27778],xd=[0,.66786,0,0,.27778],vd=[0,.69444,0,0,.75],_d=[0,.66786,0,0,.5],Md=[0,.68333,0,0,.625],cl=[.19444,.69444,0,0,.44445],In=[0,.69444,0,0,.72222],wd=[.19444,.69444,0,0,.5],Nn=[.19444,.69444,0,0,1],kd=[.011,.511,0,0,1.126],ul=[.19444,.69444,0,0,.61111],dl=[.05556,.75,0,0,.5],Sd=[0,.68333,0,0,.83334],Ld=[.0391,.5391,0,0,.66667],ml=[-.05555,.44445,0,0,.5],Ad=[0,.43056,0,0,.77778],Zr=[0,.55556,0,0,.66667],ca=[-.03625,.46375,0,0,.77778],Cd=[-.01688,.48312,0,0,.77778],Ed=[.0391,.5391,0,0,1],br=[0,.69444,0,0,.61111],ua=[-.03472,.46528,0,0,.5],da=[.25,.75,0,0,.44445],Td=[-.14236,.35764,0,0,1],ma=[.244,.744,0,0,.412],Dd=[.19444,.69444,0,0,.88889],pa=[.12963,.69444,0,0,.77778],Kd=[.19444,.69444,0,0,.38889],Od=[.011,.511,0,0,1.638],Bd=[.19444,.69444,0,0,0],ha=[0,.44444,0,0,.575],$n=[.19444,.44444,0,0,.575],Rd=[0,.68611,0,0,.75555],Pd=[0,.69444,0,0,.66759],zd=[0,.68611,0,0,.80555],Id=[0,.68611,.08229,0,.98229],Nd=[0,.68611,0,0,.76666],$d=[0,.44444,0,0,.58472],Fd=[.19444,.44444,0,0,.6118],Fn=[.19444,.43056,0,0,.5],Vd=[0,.68333,.02778,.08334,.76278],qd=[0,.68333,.08125,.05556,.83125],Hd=[0,.43056,0,.05556,.48472],Wd=[.19444,.43056,0,.08334,.51702],Ud=[.25,.75,0,0,.42778],ke=[0,.69444,0,0,.55],Xt=[0,.69444,0,0,.73334],yr=[0,.69444,0,0,.79445],jd=[0,.69444,0,0,.51945],pl=[0,.69444,0,0,.70278],Jd=[0,.69444,0,0,.76389],Gd=[.25,.75,0,0,.34306],hl=[0,.69444,0,0,.56111],Xd=[0,.69444,0,0,.25556],Zd=[.19444,.45833,0,0,.56111],Yd=[0,.45833,0,0,.56111],fa=[0,.69444,0,0,.30556],Qd=[0,.69444,0,0,.58056],e0=[0,.69444,0,0,.67223],fl=[0,.69444,0,0,.85556],gl=[0,.69444,0,0,.55834],Et=[0,.65556,.11156,0,.5],bl=[0,.69444,.08094,0,.70834],yl=[.17014,0,0,0,.44445],t0=[0,.69444,.0799,0,.5],r0=[0,.69444,0,0,.73752],i0=[0,.69444,.09205,0,.5],n0=[0,.69444,.09031,0,.77778],xl=[0,.69444,.07816,0,.27778],o0=[0,.69444,.00316,0,.5],a0=[.19444,.69444,0,0,.83334],s0=[.05556,.75,0,0,.83334],l0=[0,.75,0,0,.5],c0=[.125,.08333,0,0,.27778],u0=[0,.08333,0,0,.27778],Tt=[0,.65556,0,0,.5],vl=[0,.69444,0,0,.47222],Zt=[0,.69444,0,0,.66667],d0=[0,.69444,0,0,.59722],_l=[0,.69444,0,0,.54167],Ml=[0,.69444,0,0,.70834],m0=[.25,.75,0,0,.28889],wl=[0,.69444,0,0,.51667],p0=[0,.44444,0,0,.44445],h0=[.19444,.44444,0,0,.51667],f0=[0,.44444,0,0,.38333],g0=[0,.44444,0,0,.51667],b0=[0,.69444,0,0,.83334],y0=[.35001,.85,0,0,.45834],x0=[.35001,.85,0,0,.57778],v0=[.35001,.85,0,0,.41667],_0=[.35001,.85,0,0,.58334],ga=[0,.72222,0,0,.55556],M0=[1e-5,.6,0,0,.66667],w0=[1e-5,.6,0,0,.77778],k0=[.25001,.75,0,0,.94445],S0=[.306,.805,.19445,0,.47222],L0=[.30612,.805,.19445,0,.47222],Ni=[.25001,.75,0,0,.83334],$i=[.35001,.85,0,0,.47222],kl=[.25001,.75,0,0,1.11111],A0=[.65002,1.15,0,0,.59722],C0=[.65002,1.15,0,0,.81111],E0=[.65002,1.15,0,0,.47222],T0=[.65002,1.15,0,0,.66667],ba=[0,.75,0,0,1],D0=[.55001,1.05,0,0,1.27778],K0=[.862,1.36,.44445,0,.55556],O0=[.86225,1.36,.44445,0,.55556],Fi=[.55001,1.05,0,0,1.11111],ya=[.65002,1.15,0,0,.52778],B0=[.65002,1.15,0,0,.61111],Sl=[.55001,1.05,0,0,1.51112],R0=[.95003,1.45,0,0,.73611],P0=[.95003,1.45,0,0,1.04445],z0=[.95003,1.45,0,0,.52778],xa=[.95003,1.45,0,0,.75],va=[0,.75,0,0,1.44445],_a=[.95003,1.45,0,0,.58334],I0=[1.25003,1.75,0,0,.79167],N0=[1.25003,1.75,0,0,1.27778],$0=[1.25003,1.75,0,0,.58334],Ma=[1.25003,1.75,0,0,.80556],wa=[0,.825,0,0,1.8889],ka=[1.25003,1.75,0,0,.63889],Sa=[.64502,1.155,0,0,.875],F0=[1e-5,.6,0,0,.875],Ll=[-99e-5,.601,0,0,.66667],La=[.64502,1.155,0,0,.66667],V0=[1e-5,.9,0,0,.88889],q0=[.65002,1.15,0,0,.88889],H0=[.90001,0,0,0,.88889],W0=[-.00499,.605,0,0,1.05556],Aa=[0,.12,0,0,.45],T=[0,.61111,0,0,.525],lt=[.08333,.69444,0,0,.525],U0=[-.08056,.53055,0,0,.525],j0=[-.05556,.55556,0,0,.525],Ke=[0,.43056,0,0,.525],Vn=[.22222,.43056,0,0,.525],J0=[0,0,0,0,.525],G0={"AMS-Regular":{32:j,65:Ze,66:Ur,67:Ze,68:Ze,69:Ur,70:Fo,71:js,72:js,73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:js,76:Ur,77:[0,.68889,0,0,.94445],78:Ze,79:au,80:Fo,81:au,82:Ze,83:Tn,84:Ur,85:Ze,86:Ze,87:[0,.68889,0,0,1],88:Ze,89:Ze,90:Ur,107:Tn,160:j,165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:Tn,295:Vo,710:su,732:lu,770:su,771:lu,989:cr,1008:Eu,8245:[0,.54986,0,0,.275],8463:Vo,8487:Ze,8498:Tn,8502:Ur,8503:[0,.68889,0,0,.44445],8504:Ur,8513:[0,.68889,0,0,.63889],8592:Js,8594:Js,8602:Ce,8603:Ce,8606:qo,8608:qo,8610:cu,8611:cu,8619:uu,8620:uu,8621:[-.13313,.37788,0,0,1.38889],8622:Ce,8624:Ho,8625:Ho,8630:Gs,8631:Gs,8634:lr,8635:lr,8638:Wo,8639:Wo,8642:Wo,8643:Wo,8644:Uo,8646:Uo,8647:Uo,8648:du,8649:Uo,8650:du,8651:qo,8652:qo,8653:Ce,8654:Ce,8655:Ce,8666:mu,8667:mu,8669:[-.13313,.37788,0,0,1],8672:pu,8674:pu,8705:[0,.825,0,0,.5],8708:Tn,8709:cr,8717:[0,.43056,0,0,.42917],8722:Js,8724:[.08198,.69224,0,0,.77778],8726:cr,8733:Jo,8736:Dn,8737:Dn,8738:[.03517,.52239,0,0,.72222],8739:Au,8740:[.25142,.74111,0,0,.27778],8741:Cu,8742:[.25142,.74111,0,0,.5],8756:Xs,8757:Xs,8764:jo,8765:[-.13313,.37788,0,0,.77778],8769:jo,8770:ca,8774:at,8776:Cd,8778:cr,8782:hu,8783:hu,8785:lr,8786:lr,8787:lr,8790:Jo,8791:Kn,8796:[.08198,.91667,0,0,.77778],8806:Di,8807:Di,8808:Lt,8809:Lt,8812:[.25583,.75583,0,0,.5],8814:Ki,8815:Ki,8816:at,8817:at,8818:Kn,8819:Kn,8822:fu,8823:fu,8828:At,8829:At,8830:Kn,8831:Kn,8832:Ki,8833:Ki,8840:at,8841:at,8842:Ie,8843:Ie,8847:ur,8848:ur,8858:lr,8859:lr,8861:lr,8862:Oi,8863:Oi,8864:Oi,8865:Oi,8872:[0,.69224,0,0,.61111],8873:Dn,8874:[0,.69224,0,0,.88889],8876:Fo,8877:Fo,8878:Ze,8879:Ze,8882:ur,8883:ur,8884:At,8885:At,8888:[0,.54986,0,0,1.11111],8890:gd,8891:gu,8892:gu,8901:[0,.54986,0,0,.27778],8903:cr,8905:cr,8906:cr,8907:Jo,8908:Jo,8909:[-.03598,.46402,0,0,.77778],8910:bu,8911:bu,8912:ur,8913:ur,8914:yu,8915:yu,8916:Xs,8918:dr,8919:dr,8920:xu,8921:xu,8922:vu,8923:vu,8926:At,8927:At,8928:at,8929:at,8934:Go,8935:Go,8936:Go,8937:Go,8938:Ki,8939:Ki,8940:at,8941:at,8994:_u,8995:_u,9416:[.15559,.69224,0,0,.90222],9484:Ho,9488:Ho,9492:Mu,9496:Mu,9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:Oi,9633:Oi,9650:Xo,9651:Xo,9654:ur,9660:Xo,9661:Xo,9664:ur,9674:ku,9733:[.19444,.69224,0,0,.94445],10003:wu,10016:wu,10731:ku,10846:[.19444,.75583,0,0,.61111],10877:At,10878:At,10885:Di,10886:Di,10887:Ie,10888:Ie,10889:Bi,10890:Bi,10891:Su,10892:Su,10901:At,10902:At,10933:Lt,10934:Lt,10935:Bi,10936:Bi,10937:Bi,10938:Bi,10949:Di,10950:Di,10955:Lu,10956:Lu,57350:Au,57351:Cu,57352:cr,57353:Eu,57356:Lt,57357:Lt,57358:Tu,57359:at,57360:at,57361:Tu,57366:Lt,57367:Lt,57368:Lt,57369:Lt,57370:Ie,57371:Ie},"Caligraphic-Regular":{32:j,65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:j},"Fraktur-Regular":{32:j,33:[0,.69141,0,0,.29574],34:Ys,38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:Du,41:Du,42:[0,.62119,0,0,.27764],43:Ku,44:Ou,45:Ku,46:Ou,47:[.24982,.74947,0,0,.50181],48:Zs,49:Zs,50:Zs,51:On,52:On,53:On,54:Bu,55:On,56:Bu,57:On,58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:Ru,93:Ru,94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:j,8216:Ys,8217:Ys,58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:j,33:[0,.69444,0,0,.35],34:tl,35:[.19444,.69444,0,0,.95833],36:Wu,37:[.05556,.75,0,0,.95833],38:Yo,39:Pi,40:Zo,41:Zo,42:[0,.75,0,0,.575],43:st,44:[.19444,.15556,0,0,.31944],45:f0,46:[0,.15556,0,0,.31944],47:mr,48:Ye,49:Ye,50:Ye,51:Ye,52:Ye,53:Ye,54:Ye,55:Ye,56:Ye,57:Ye,58:Iu,59:[.19444,.44444,0,0,.31944],60:Ri,61:Ju,62:Ri,63:[0,.69444,0,0,.54305],64:Yo,65:Qs,66:[0,.68611,0,0,.81805],67:ta,68:[0,.68611,0,0,.88194],69:Rd,70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:Qo,73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:$u,77:[0,.68611,0,0,1.09166],78:Qo,79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:Qs,89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:ea,92:mr,93:ea,94:pr,95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:jr,99:zu,100:jr,101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:jr,105:Pi,106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:Pi,109:[0,.44444,0,0,.95833],110:Pu,111:ha,112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:Pu,118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:zu,123:mr,124:ea,125:mr,126:[.35,.34444,0,0,.575],160:j,163:[0,.69444,0,0,.86853],168:pr,172:[0,.44444,0,0,.76666],176:Nu,177:st,184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:st,216:[.04861,.73472,0,0,.89444],223:d0,230:[0,.44444,0,0,.83055],247:st,248:[.09722,.54167,0,0,.575],305:Iu,338:[0,.68611,0,0,1.16944],339:ju,567:[.19444,.44444,0,0,.35139],710:pr,711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:pr,715:pr,728:pr,729:Pi,730:Nu,732:pr,733:pr,915:$u,916:rl,920:el,923:zd,926:Nd,928:Qo,931:ta,933:el,934:ta,936:el,937:ta,8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:Pi,8217:Pi,8220:tl,8221:tl,8224:Fu,8225:Fu,8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:Pd,8465:Vu,8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:Vu,8501:ol,8592:Ct,8593:qu,8594:Ct,8595:qu,8596:Ct,8597:mr,8598:Bn,8599:Bn,8600:Bn,8601:Bn,8636:Ct,8637:Ct,8640:Ct,8641:Ct,8656:Ct,8657:Hu,8658:Ct,8659:Hu,8660:Ct,8661:[.25,.75,0,0,.70277],8704:jr,8706:[0,.69444,.06389,0,.62847],8707:jr,8709:Wu,8711:rl,8712:Uu,8715:Uu,8722:st,8723:st,8725:mr,8726:mr,8727:ra,8728:il,8729:il,8730:[.18,.82,0,0,.95833],8733:ju,8734:[0,.44444,0,0,1.14999],8736:Dn,8739:ea,8741:mr,8743:Jr,8744:Jr,8745:Jr,8746:Jr,8747:[.19444,.69444,.12778,0,.56875],8764:Ju,8768:[.19444,.69444,0,0,.31944],8771:nl,8776:[.02444,.52444,0,0,.89444],8781:nl,8801:nl,8804:hr,8805:hr,8810:Gu,8811:Gu,8826:Ri,8827:Ri,8834:Ri,8835:Ri,8838:hr,8839:hr,8846:Jr,8849:hr,8850:hr,8851:Jr,8852:Jr,8853:st,8854:st,8855:st,8856:st,8857:st,8866:ol,8867:ol,8868:Yo,8869:Yo,8900:il,8901:[-.02639,.47361,0,0,.31944],8902:ra,8968:ia,8969:ia,8970:ia,8971:ia,8994:Xu,8995:Xu,9651:Zu,9657:ra,9661:Zu,9667:ra,9711:Bn,9824:na,9825:na,9826:na,9827:na,9837:[0,.75,0,0,.44722],9838:Yu,9839:Yu,10216:Zo,10217:Zo,10815:Qo,10927:hr,10928:hr,57376:Bd},"Main-BoldItalic":{32:j,33:[0,.69444,.11417,0,.38611],34:od,35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:oa,40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:fr,49:fr,50:fr,51:fr,52:Qu,53:fr,54:fr,55:Qu,56:fr,57:fr,58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:sl,64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:al,73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:al,79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:rd,95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:ed,104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:ed,114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:j,168:[0,.69444,.11473,0,.59111],176:id,184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:td,248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:td,567:[.19444,.44444,.04611,0,.385],710:rd,711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:oa,730:id,732:sl,733:sl,915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:al,931:[0,.68611,.11431,0,.82666],933:nd,934:[0,.68611,.05632,0,.82666],936:nd,937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:oa,8217:oa,8220:[0,.69444,.16772,0,.62055],8221:od},"Main-Italic":{32:j,33:aa,34:hd,35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:aa,40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:gr,49:gr,50:gr,51:gr,52:ad,53:gr,54:gr,55:ad,56:gr,57:gr,58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:dd,64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:sa,73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:sa,79:md,80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:sa,86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:cd,95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:sd,104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:sd,114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:j,168:[0,.66786,.10474,0,.51111],176:ud,184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:ld,248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:ld,710:cd,711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:ud,732:[0,.66786,.11585,0,.51111],733:dd,915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:md,923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:sa,931:[0,.68333,.12028,0,.71555],933:pd,934:[0,.68333,.05986,0,.71555],936:pd,937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:aa,8217:aa,8220:[0,.69444,.1685,0,.51444],8221:hd,8463:Vo},"Main-Regular":{32:j,33:Jt,34:xe,35:a0,36:dl,37:s0,38:Gr,39:Jt,40:zi,41:zi,42:l0,43:et,44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:Gt,48:Qe,49:Qe,50:Qe,51:Qe,52:Qe,53:Qe,54:Qe,55:Qe,56:Qe,57:Qe,58:yd,59:[.19444,.43056,0,0,.27778],60:dr,61:jo,62:dr,63:vl,64:Gr,65:Xr,66:[0,.68333,0,0,.70834],67:Pn,68:[0,.68333,0,0,.76389],69:fd,70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:Xr,73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:Rn,76:Md,77:[0,.68333,0,0,.91667],78:Xr,79:Rn,80:fd,81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:Pn,85:Xr,86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:Xr,89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:la,92:Gt,93:la,94:xe,95:[.31,.12056,.02778,0,.5],97:zn,98:Ii,99:ll,100:Ii,101:ll,102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:Ii,105:xd,106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:Jt,109:[0,.43056,0,0,.83334],110:bd,111:zn,112:gd,113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:bd,118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:ll,123:Gt,124:la,125:Gt,126:[.35,.31786,0,0,.5],160:j,163:[0,.69444,0,0,.76909],167:cl,168:_d,172:[0,.43056,0,0,.66667],176:vd,177:et,182:ul,184:yl,198:[0,.68333,0,0,.90278],215:et,216:[.04861,.73194,0,0,.77778],223:xe,230:[0,.43056,0,0,.72222],247:et,248:[.09722,.52778,0,0,.5],305:yd,338:[0,.68333,0,0,1.01389],339:Ad,567:[.19444,.43056,0,0,.30556],710:xe,711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:xe,715:xe,728:xe,729:xd,730:vd,732:_d,733:xe,915:Md,916:Sd,920:Rn,923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:Xr,931:Pn,933:Rn,934:Pn,936:Rn,937:Pn,8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:Jt,8217:Jt,8220:xe,8221:xe,8224:cl,8225:cl,8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:Vo,8465:In,8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:In,8501:br,8592:Ce,8593:wd,8594:Ce,8595:wd,8596:Ce,8597:Gt,8598:Nn,8599:Nn,8600:Nn,8601:Nn,8614:[.011,.511,0,0,1],8617:kd,8618:kd,8636:Ce,8637:Ce,8640:Ce,8641:Ce,8652:[.011,.671,0,0,1],8656:Ce,8657:ul,8658:Ce,8659:ul,8660:Ce,8661:[.25,.75,0,0,.61111],8704:Ii,8706:[0,.69444,.05556,.08334,.5309],8707:Ii,8709:dl,8711:Sd,8712:Ld,8715:Ld,8722:et,8723:et,8725:Gt,8726:Gt,8727:ua,8728:ml,8729:ml,8730:[.2,.8,0,0,.83334],8733:Ad,8734:Gs,8736:Dn,8739:la,8741:Gt,8743:Zr,8744:Zr,8745:Zr,8746:Zr,8747:[.19444,.69444,.11111,0,.41667],8764:jo,8768:[.19444,.69444,0,0,.27778],8771:ca,8773:[-.022,.589,0,0,1],8776:Cd,8781:ca,8784:[-.133,.67,0,0,.778],8801:ca,8804:Ie,8805:Ie,8810:Ed,8811:Ed,8826:dr,8827:dr,8834:dr,8835:dr,8838:Ie,8839:Ie,8846:Zr,8849:Ie,8850:Ie,8851:Zr,8852:Zr,8853:et,8854:et,8855:et,8856:et,8857:et,8866:br,8867:br,8868:Gr,8869:Gr,8872:[.249,.75,0,0,.867],8900:ml,8901:[-.05555,.44445,0,0,.27778],8902:ua,8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:da,8969:da,8970:da,8971:da,8994:Td,8995:Td,9136:ma,9137:ma,9651:Dd,9657:ua,9661:Dd,9667:ua,9711:Nn,9824:pa,9825:pa,9826:pa,9827:pa,9837:[0,.75,0,0,.38889],9838:Kd,9839:Kd,10216:zi,10217:zi,10222:ma,10223:ma,10229:[.011,.511,0,0,1.609],10230:Od,10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:Od,10815:Xr,10927:Ie,10928:Ie,57376:Bd},"Math-BoldItalic":{32:j,48:ha,49:ha,50:ha,51:$n,52:$n,53:$n,54:Ye,55:$n,56:Ye,57:$n,65:Qs,66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:Id,73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:Rd,77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:Pd,105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:$d,112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:j,915:[0,.68611,.15972,0,.65694],916:rl,920:[0,.68611,.03194,0,.86722],923:zd,926:[0,.68611,.07458,0,.84125],928:Id,931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:Nd,936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:$d,960:[0,.44444,.03704,0,.68241],961:Fd,962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:Fd,1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:j,48:zn,49:zn,50:zn,51:Fn,52:Fn,53:Fn,54:Qe,55:Fn,56:Qe,57:Fn,65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:qd,73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:Vd,80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:Hd,112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:j,915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:Vd,923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:qd,931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:Hd,960:[0,.43056,.03588,0,.57003],961:Wd,962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:Wd,1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:j,33:[0,.69444,0,0,.36667],34:gl,35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:fa,40:Ud,41:Ud,42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:ke,49:ke,50:ke,51:ke,52:ke,53:ke,54:ke,55:ke,56:ke,57:ke,58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:jd,64:Xt,65:Xt,66:Xt,67:pl,68:yr,69:[0,.69444,0,0,.64167],70:br,71:Xt,72:yr,73:[0,.69444,0,0,.33056],74:jd,75:Jd,76:Qd,77:[0,.69444,0,0,.97778],78:yr,79:yr,80:pl,81:[.10556,.69444,0,0,.79445],82:pl,83:br,84:Xt,85:Jd,86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:Xt,89:[0,.69444,.0275,0,.73334],90:e0,91:Gd,93:Gd,94:ke,95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:hl,99:[0,.45833,0,0,.48889],100:hl,101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:hl,105:Xd,106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:Xd,109:[0,.45833,0,0,.86667],110:Yd,111:[0,.45833,0,0,.55],112:Zd,113:Zd,114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:Yd,118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:j,168:ke,176:Xt,180:ke,184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:ke,711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:ke,729:fa,730:Xt,732:ke,733:ke,915:Qd,916:[0,.69444,0,0,.91667],920:fl,923:e0,926:Xt,928:yr,931:yr,933:fl,934:yr,936:fl,937:yr,8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:fa,8217:fa,8220:gl,8221:gl},"SansSerif-Italic":{32:j,33:[0,.69444,.05733,0,.31945],34:o0,35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:xl,40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:c0,45:[0,.44444,.01946,0,.33333],46:u0,47:[.25,.75,.13164,0,.5],48:Et,49:Et,50:Et,51:Et,52:Et,53:Et,54:Et,55:Et,56:Et,57:Et,58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:Zt,66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:bl,73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:_l,77:[0,.69444,.08094,0,.875],78:bl,79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:t0,95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:j,168:[0,.67937,.06385,0,.5],176:r0,184:yl,305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:t0,711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:i0,715:xe,728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:r0,732:[0,.67659,.08826,0,.5],733:i0,915:[0,.69444,.13372,0,.54167],916:b0,920:[0,.69444,.07555,0,.77778],923:br,926:[0,.69444,.12816,0,.66667],928:bl,931:[0,.69444,.11983,0,.72222],933:n0,934:[0,.69444,.04603,0,.72222],936:n0,937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:xl,8217:xl,8220:[0,.69444,.14205,0,.5],8221:o0},"SansSerif-Regular":{32:j,33:[0,.69444,0,0,.31945],34:xe,35:a0,36:dl,37:s0,38:[0,.69444,0,0,.75834],39:Jt,40:zi,41:zi,42:l0,43:et,44:c0,45:[0,.44444,0,0,.33333],46:u0,47:Gt,48:Tt,49:Tt,50:Tt,51:Tt,52:Tt,53:Tt,54:Tt,55:Tt,56:Tt,57:Tt,58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:vl,64:Zt,65:Zt,66:Zt,67:jr,68:[0,.69444,0,0,.72223],69:d0,70:[0,.69444,0,0,.56945],71:Zt,72:Ml,73:Jt,74:vl,75:[0,.69444,0,0,.69445],76:_l,77:[0,.69444,0,0,.875],78:Ml,79:[0,.69444,0,0,.73611],80:jr,81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:Ii,84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:Zt,89:[0,.69444,.025,0,.66667],90:br,91:m0,93:m0,94:xe,95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:wl,99:p0,100:wl,101:p0,102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:wl,105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:g0,111:[0,.44444,0,0,.5],112:h0,113:h0,114:[0,.44444,.01389,0,.34167],115:f0,116:[0,.57143,0,0,.36111],117:g0,118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:j,168:[0,.67937,0,0,.5],176:Zt,184:yl,305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:xe,711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:xe,715:xe,728:xe,729:[0,.67937,0,0,.27778],730:Zt,732:[0,.67659,0,0,.5],733:xe,915:_l,916:b0,920:Gr,923:br,926:Zt,928:Ml,931:In,933:Gr,934:In,936:Gr,937:In,8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:Jt,8217:Jt,8220:xe,8221:xe},"Script-Regular":{32:j,65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:j},"Size1-Regular":{32:j,40:y0,41:y0,47:x0,91:v0,92:x0,93:v0,123:_0,125:_0,160:j,710:ga,732:ga,770:ga,771:ga,8214:[-99e-5,.601,0,0,.77778],8593:M0,8595:M0,8657:w0,8659:w0,8719:k0,8720:k0,8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:L0,8748:S0,8749:S0,8750:L0,8896:Ni,8897:Ni,8898:Ni,8899:Ni,8968:$i,8969:$i,8970:$i,8971:$i,9168:Ll,10216:$i,10217:$i,10752:kl,10753:kl,10754:kl,10756:Ni,10758:Ni},"Size2-Regular":{32:j,40:A0,41:A0,47:C0,91:E0,92:C0,93:E0,123:T0,125:T0,160:j,710:ba,732:ba,770:ba,771:ba,8719:D0,8720:D0,8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:O0,8748:K0,8749:K0,8750:O0,8896:Fi,8897:Fi,8898:Fi,8899:Fi,8968:ya,8969:ya,8970:ya,8971:ya,10216:B0,10217:B0,10752:Sl,10753:Sl,10754:Sl,10756:Fi,10758:Fi},"Size3-Regular":{32:j,40:R0,41:R0,47:P0,91:z0,92:P0,93:z0,123:xa,125:xa,160:j,710:va,732:va,770:va,771:va,8730:[.95003,1.45,0,0,1],8968:_a,8969:_a,8970:_a,8971:_a,10216:xa,10217:xa},"Size4-Regular":{32:j,40:I0,41:I0,47:N0,91:$0,92:N0,93:$0,123:Ma,125:Ma,160:j,710:wa,732:wa,770:wa,771:wa,8730:[1.25003,1.75,0,0,1],8968:ka,8969:ka,8970:ka,8971:ka,9115:Sa,9116:F0,9117:Sa,9118:Sa,9119:F0,9120:Sa,9121:La,9122:Ll,9123:La,9124:La,9125:Ll,9126:La,9127:V0,9128:q0,9129:H0,9130:[0,.3,0,0,.88889],9131:V0,9132:q0,9133:H0,9143:[.88502,.915,0,0,1.05556],10216:Ma,10217:Ma,57344:W0,57345:W0,57680:Aa,57681:Aa,57682:Aa,57683:Aa},"Typewriter-Regular":{32:J0,33:T,34:T,35:T,36:lt,37:lt,38:T,39:T,40:lt,41:lt,42:[0,.52083,0,0,.525],43:U0,44:[.13889,.125,0,0,.525],45:U0,46:[0,.125,0,0,.525],47:lt,48:T,49:T,50:T,51:T,52:T,53:T,54:T,55:T,56:T,57:T,58:Ke,59:[.13889,.43056,0,0,.525],60:j0,61:[-.19549,.41562,0,0,.525],62:j0,63:T,64:T,65:T,66:T,67:T,68:T,69:T,70:T,71:T,72:T,73:T,74:T,75:T,76:T,77:T,78:T,79:T,80:T,81:[.13889,.61111,0,0,.525],82:T,83:T,84:T,85:T,86:T,87:T,88:T,89:T,90:T,91:lt,92:lt,93:lt,94:T,95:[.09514,0,0,0,.525],96:T,97:Ke,98:T,99:Ke,100:T,101:Ke,102:T,103:Vn,104:T,105:T,106:[.22222,.61111,0,0,.525],107:T,108:T,109:Ke,110:Ke,111:Ke,112:Vn,113:Vn,114:Ke,115:Ke,116:[0,.55358,0,0,.525],117:Ke,118:Ke,119:Ke,120:Ke,121:Vn,122:Ke,123:lt,124:lt,125:lt,126:T,127:T,160:J0,176:T,184:[.19445,0,0,0,.525],305:Ke,567:Vn,711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:T,715:T,728:T,730:T,770:T,771:T,776:T,915:T,916:T,920:T,923:T,926:T,928:T,931:T,933:T,934:T,936:T,937:T,8216:T,8217:T,8242:T,9251:[.11111,.21944,0,0,.525]}},Nh=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,Dt=10,Oe=.25,Z0=1.2,tt=.431,Al={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[tt,tt,tt],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.5,.732,.925],num2:[.394,.384,.5],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[Oe,Oe,Oe],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},qn=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Vi=5,X0={" ":" ","​":" ",Å:"A",Ç:"C",Ð:"D",Þ:"o",å:"a",ç:"c",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function xr(t,e){t===void 0&&(t=77);let r=G0[e][t];if(r)return{defaultMetrics:!1,depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]};if(t===11034)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0,width:.8};let n=String.fromCodePoint(t);if(n in X0)t=X0[n].codePointAt(0);else if(Nh.test(n))return t=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0,width:1};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0,width:.8}}var Cl={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],longrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],longleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],longleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],longrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],longleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],longleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],longRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716],longLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},El={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},Y0={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:`m 529 160
  c -179 0 -524 -115 -524 -115
  c -5 -1 -9 -5 -9 -10
  c 0 -1 1 -2 1 -3
  l 4 -22
  c 1 -5 5 -9 11 -9
  h 2
  s 338 93 512 92
  c 174 0 513 -92 513 -92
  h 2
  c 5 0 9 4 11 9
  l 5 22
  c 1 6 -2 12 -8 13
  c 0 0 -342 115 -520 115
  z
  `,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,widetilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,widetilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,widetilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,widetilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`};function Q0(t){if(El[t]){let[m,y,A]=El[t],P=`<span class="ML__stretchy" style="height:${A}em"><svg width="100%" height="${A}em" viewBox="0 0 ${m} ${y}" preserveAspectRatio="none" ><path fill="currentcolor" d="${Y0[t]}"></path></svg></span>`;return`<span style="display:inline-block;height:${Math.floor(100*A/2)/100}em;min-width:0">${P}</span>`}let[e,r,n,a]=Cl[t],s,o,c=n/1e3;e.length===3?(s=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],o=["xMinYMin","xMidYMin","xMaxYMin"]):e.length===2?(s=["slice-1-of-2","slice-2-of-2"],o=["xMinYMin","xMaxYMin"]):(s=["slice-1-of-1"],o=[a]);let d=e.map((m,y)=>`<span class="${s[y]}" style=height:${c}em><svg width=400em height=${c}em viewBox="0 0 400000 ${n}" preserveAspectRatio="${o[y]} slice"><path fill="currentcolor" d="${Y0[m]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${c}em;min-width:${r}em;">${d}</span>`}function em(t){return Cl[t]?Cl[t][2]/1e3:El[t][2]}function $h(t){let e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n===13&&t.charCodeAt(r+1)===10&&(n=10,r++),(n===13||n===12)&&(n=10),n===0&&(n=65533),n>=55296&&n<=56319){let a=t.charCodeAt(r+1);if(a>=56320&&a<=57343){let s=n-55296,o=a-56320;n=2**16+s*2**10+o,r++}}e.push(n)}return e}var Ea=8205,Fh=[[Ea,1],[65038,2],[127995,5],[129456,4],[917536,96]],Ca,tm=[127462,127487];function rm(t){var e;if(Ca===void 0){Ca={};for(let r of Fh)for(let n=r[0];n<=r[0]+r[1]-1;n++)Ca[n]=!0}return(e=Ca[t])!=null?e:!1}function Vh(t){return t>=tm[0]&&t<=tm[1]}function Ta(t){if(/^[\u0020-\u00FF]*$/.test(t))return t;let e=[],r=$h(t),n=0;for(;n<r.length;){let a=r[n++],s=r[n];if(s===Ea){let o=n-1;for(n+=2;r[n]===Ea;)n+=2;e.push(String.fromCodePoint(...r.slice(o,n-o+1)))}else if(rm(s)){let o=n-1;for(;rm(r[n]);)n+=r[n]===Ea?2:1;e.push(String.fromCodePoint(...r.slice(o,2*n-o-1)))}else Vh(a)?(n+=1,e.push(String.fromCodePoint(...r.slice(n-2,2)))):e.push(String.fromCodePoint(a))}return e}var Tl=class{constructor(t){this.obeyspaces=!1,this.pos=0,this.s=Ta(t)}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(t){let e=typeof this.s=="string"?t.exec(this.s.slice(this.pos)):t.exec(this.s.slice(this.pos).join(""));return e!=null&&e[0]?(this.pos+=e[0].length,e[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let t=this.get();if(t==="\\"){if(!this.end()){let e=this.match(/^[a-zA-Z\*]+/);return e?this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/):e=this.get(),"\\"+e}}else{if(t==="{")return"<{>";if(t==="}")return"<}>";if(t==="^"){if(this.peek()==="^"){this.get();let e=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(e)return String.fromCodePoint(Number.parseInt(e.slice(e.lastIndexOf("^")+1),16))}return t}else if(t==="#"){if(!this.end()){let e=!1;if(/[\d?@]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){let r=this.s[this.pos+1];e=/[^\dA-Za-z]/.test(r)}return e?"#"+this.get():"#"}}else if(t==="$")return this.peek()==="$"?(this.get(),"<$$>"):"<$>"}return t}};function qh(t,e){var r,n,a,s;let o=[],c=t.next();if(c&&c!=="\\relax"){if(c==="\\noexpand")c=t.next(),c&&o.push(c);else if(c==="\\obeyspaces")t.obeyspaces=!0;else if(c==="\\bgroup")o.push("<{>");else if(c==="\\egroup")o.push("<}>");else if(c==="\\string"){if(c=t.next(),c)if(c.startsWith("\\"))for(let d of c)o.push(d==="\\"?"\\backslash":d);else c==="<{>"?o.push("\\{"):c==="<space>"?o.push("~"):c==="<}>"&&o.push("\\}")}else if(c==="\\csname"){for(;t.peek()==="<space>";)t.next();let d="",m=!1,y=[];do{if(y.length===0)if(/^#[\d?@]$/.test(t.peek())){let A=t.get().slice(1);y=qi((n=(r=e?.(A))!=null?r:e?.("?"))!=null?n:"\\placeholder{}",e),c=y[0]}else c=t.next(),y=c?[c]:[];m=y.length===0,!m&&c==="\\endcsname"&&(m=!0,y.shift()),m||(m=c==="<$>"||c==="<$$>"||c==="<{>"||c==="<}>"||typeof c=="string"&&c.length>1&&c.startsWith("\\")),m||(d+=y.shift())}while(!m);d&&o.push("\\"+d),o.push(...y)}else if(c!=="\\endcsname")if(c.length>1&&c.startsWith("#")){let d=c.slice(1);o.push(...qi((s=(a=e?.(d))!=null?a:e?.("?"))!=null?s:"\\placeholder{}",e))}else o.push(c)}return o}function qi(t,e=null){if(!t)return[];let r=[],n="";for(let o of t.toString().split(/\r?\n/)){n&&r.push(n),n=" ";let c=o.match(/((?:\\%)|[^%])*/);c!==null&&r.push(c[0])}let a=new Tl(r.join("")),s=[];do s.push(...qh(a,e));while(!a.end());return s}function R(t){let e="",r=[];for(let n of t)n&&(e&&/^[a-zA-Z\*]/.test(n)&&r.push(e),r.push(n),/^\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(n)&&r.push(" "),e=/\\[a-zA-Z]+\*?$/.test(n)?" ":"");return r.join("")}function q(t,...e){return t.startsWith("\\"),e.length===0?t:R([t,...e.map(r=>`{${r}}`)])}function vr(t){return R(t.map(e=>{var r;return(r={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])!=null?r:e}))}var Yr=class W3{constructor(e){W3._registry[e]=this}static createAtom(e,r,n){return W3._registry[e].createAtom(r,se(r,e),n)}static serialize(e,r){var n;if(!e||e.length===0)return"";if((n=r.skipStyles)!=null&&n){let a=[];for(let s of nm(e)){let o=W3._registry[s[0].mode];a.push(...o.serialize(s,r))}return R(a)}return R(Wh(e,r))}static getFont(e,r,n){return W3._registry[e].getFont(r,n)}};Yr._registry={};var ge=Yr;function nm(t){let e=[],r=[],n="NONE";for(let a of t)a.type!=="first"&&(a.mode!==n?(r.length>0&&e.push(r),r=[a],n=a.mode):r.push(a));return r.length>0&&e.push(r),e}function Da(t){if(!t||t.mode!=="math")return"";let{style:e}=t;return!e||!e.variantStyle?"":e.variantStyle==="bold"||e.variantStyle==="bolditalic"?"bold":""}function Ka(t){if(!t)return"";let{style:e}=t;if(!e)return"";let r=e.variant;return r===void 0?"normal":(!["calligraphic","fraktur","double-struck","script","monospace","sans-serif"].includes(r)&&e.variantStyle&&e.variantStyle!=="up"&&(r+="-"+e.variantStyle),r)}function ct(t,e){let r=[],n=[],a;for(let s of t){if(s.type==="first")continue;let o;e==="variant"?o=Ka(s):e==="bold"?o=Da(s):o=s.style[e],o===a?n.push(s):(n.length>0&&r.push(n),n=[s],a=o)}return n.length>0&&r.push(n),r}function im(t,e){var r;let{parent:n}=t[0],a=n?.style.color,s=[];for(let o of nm(t)){let c=e.defaultMode;for(let d of ct(o,"color")){let m=d[0].style,y=ge._registry[d[0].mode].serialize(d,f(p({},e),{defaultMode:c==="text"?"text":"math"}));!e.skipStyles&&m.color&&m.color!=="none"&&(!n||a!==m.color)?s.push(q("\\textcolor",(r=m.verbatimColor)!=null?r:m.color,R(y))):s.push(R(y))}}return s}function Hh(t,e){let{parent:r}=t[0],n=r?.style.backgroundColor;return ct(t,"backgroundColor").map(a=>{var s;if(a.length>0||a[0].type!=="box"){let o=a[0].style;if(o.backgroundColor&&o.backgroundColor!=="none"&&(!r||n!==o.backgroundColor))return q("\\colorbox",(s=o.verbatimBackgroundColor)!=null?s:o.backgroundColor,R(im(a,f(p({},e),{defaultMode:"text"}))))}return R(im(a,e))})}function Wh(t,e){if(t.length===0)return[];let{parent:r}=t[0],n=r?.style.fontSize,a=[];for(let s of ct(t,"fontSize")){let o=s[0].style.fontSize,c=Hh(s,e);c&&(o&&o!=="auto"&&(!r||n!==o)?a.push(["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][o],...c):a.push(...c))}return a}function Oa(t){return t?{mord:"ord",mbin:"bin",mop:"op",mrel:"rel",mopen:"open",mclose:"close",mpunct:"punct",minner:"inner",spacing:"ignore",latex:"latex",composition:"inner",error:"inner",placeholder:"ord",supsub:"ignore"}[t]:void 0}function Qr(t){if(t.length===0)return"ord";let e=Oa(t[0].type),r=Oa(t[t.length-1].type);return e&&e===r?e:"ord"}function Hn(t,e){if(typeof t=="string")return t;if(typeof t=="number"){let r=Math.ceil(100*t)/100;return r===0?"0":r.toString()+(e??"")}return""}var _=class v9{constructor(e,r){var n,a,s,o,c;if(typeof e=="number"?this.value=String.fromCodePoint(e):typeof e=="string"?this.value=e:Y(e)?this.children=e.filter(m=>m!==null):e&&e instanceof v9&&(this.children=[e]),this.children)for(let m of this.children)m.parent=this;this.type=(n=r?.type)!=null?n:"ignore",this.isSelected=r?.isSelected===!0,r!=null&&r.caret&&(this.caret=r.caret),this.classes=(a=r?.classes)!=null?a:"",this.isTight=(s=r?.isTight)!=null?s:!1,r!=null&&r.attributes&&(this.attributes=r.attributes);let d=r?.fontFamily;r!=null&&r.style&&this.value&&(d=(c=ge.getFont((o=r.mode)!=null?o:"math",this,f(p({variant:"normal"},r.style),{letterShapeStyle:r.letterShapeStyle})))!=null?c:void 0),d||(d="Main-Regular"),this._height=0,this._depth=0,this._width=0,this.hasExplicitWidth=!1,this.skew=0,this.italic=0,this.maxFontSize=0,this.scale=1,r?.maxFontSize!==void 0&&(this.maxFontSize=r.maxFontSize),Uh(this,d)}set atomID(e){e===void 0||e.length===0||(this.id=e)}selected(e){if(this.isSelected!==e&&(this.isSelected=e,this.children))for(let r of this.children)r.selected(e)}setStyle(e,r,n){if(r===void 0)return;let a=Hn(r,n);a.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[e]=a)}setTop(e){Number.isFinite(e)&&Math.abs(e)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=Hn(e,"em"),this.height-=e,this.depth+=e)}get left(){var e;return(e=this.cssProperties)!=null&&e["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=Hn(e,"em")))}set right(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=Hn(e,"em")))}set bottom(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-bottom"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-bottom"]=Hn(e,"em")))}get width(){return this._width*this.scale}set width(e){this._width=e,this.hasExplicitWidth=!0}set softWidth(e){}get height(){return this._height*this.scale}set height(e){this._height=e}get depth(){return this._depth*this.scale}set depth(e){this._depth=e}wrap(e){let r=e.parent;if(!r)return this;e.isPhantom&&this.setStyle("opacity",0);let n=e.color;n&&n!==r.color&&this.setStyle("color",n);let a=e.backgroundColor;this.isSelected&&(a=Yc(a)),a&&a!==r.backgroundColor&&(this.setStyle("background-color",a),this.setStyle("display","inline-block"));let s=e.scalingFactor;return this.scale=s,this.skew*=s,this.italic*=s,this}toMarkup(){var e,r,n,a;let s=(e=this.value)!=null?e:"";if(this.children)for(let Z of this.children)s+=Z.toMarkup();let o="";if(this.svgBody)o=Q0(this.svgBody);else if(this.svgOverlay){o='<span style="',o+="display: inline-block;",o+=`height:${Math.floor(100*(this.height+this.depth))/100}em;`,o+=`vertical-align:${Math.floor(100*this.depth)/100}em;`,o+='">',o+=s,o+="</span>",o+='<svg style="position:absolute;overflow:visible;',o+=`height:${Math.floor(100*(this.height+this.depth))/100}em;`;let Z=(r=this.cssProperties)==null?void 0:r.padding;Z?(o+=`top:${Z};`,o+=`left:${Z};`,o+=`width:calc(100% - 2 * ${Z} );`):o+="top:0;left:0;width:100%;",o+="z-index:2;",o+='"',this.svgStyle&&(o+=this.svgStyle),o+=` viewBox="0 0 ${Math.floor(100*this.width)/100} ${Math.floor(100*(this.height+this.depth))/100}"`,o+=`>${this.svgOverlay}</svg>`}let c=[],d=this.classes.split(" ");d.push((n={latex:"ML__raw-latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])!=null?n:""),this.caret==="latex"&&d.push("ML__latex-caret"),this.isSelected&&d.push("ML__selected");let m=d.length===1?d[0]:d.filter((Z,me,_e)=>Z.length>0&&_e.indexOf(Z)===me).join(" ");if(m.length>0&&c.push(`class=${Hi(`"${m}"`)}`),this.id&&c.push(` data-atom-id=${Hi(this.id)}`),this.cssId&&c.push(` id=${Hi(`"${this.cssId.replace(/ /g,"-")}"`)}`),this.attributes&&c.concat(Object.keys(this.attributes).map(Z=>`${Dl(Z)}=${Hi(this.attributes[Z])}`)),this.htmlData){let Z=this.htmlData.split(",");for(let me of Z){let _e=me.match(/([^=]+)=(.+$)/);if(_e){let Ge=Dl(_e[1]);if(Ge)if(Ge==="href"){let ve=new URL(_e[2]);if(ve.protocol!=="http:"&&ve.protocol!=="https:")throw new Error(`Invalid URL: ${_e[2]}`);c.push(`href="${_e[2].replace(/"/g,"&quot;")}"`)}else c.push(`data-${Ge}=${Hi(_e[2])}`)}else{let Ge=Dl(me);Ge&&c.push(`data-${Ge} `)}}}let y=(a=this.cssProperties)!=null?a:{};this.hasExplicitWidth&&y.width===void 0&&(y.width=`${Math.ceil(this._width*100)/100}em`);let A=Object.keys(y).map(Z=>`${Z}:${y[Z]}`);if(this.scale!==void 0&&this.scale!==1&&(s.length>0||o.length>0)&&A.push(`font-size: ${Math.ceil(this.scale*1e4)/100}%`),this.htmlStyle)for(let Z of this.htmlStyle.split(";")){let me=Z.match(/([^:]+):(.+$)/);if(me){let _e=me[1].trim().replace(/ /g,"-");_e&&A.push(`${_e}:${me[2]}`)}}A.length>0&&c.push(`style=${Hi(A.join(";"))}`);let P="";return c.length>0||o.length>0?P=`<span ${c.join(" ")}>${s}${o}</span>`:P=s,this.caret==="text"?P+='<span class="ML__text-caret"></span>':this.caret==="math"&&(P+='<span class="ML__caret"></span>'),P}tryCoalesceWith(e){if(this.svgBody||!this.value||e.svgBody||!e.value)return!1;let r=this.children&&this.children.length>0,n=e.children&&e.children.length>0;if(r||n)return!1;if(e.cssProperties||this.cssProperties){for(let d of["border","border-left","border-right","border-right-width","left","margin","margin-left","margin-right","padding","position","width"])if(e.cssProperties&&d in e.cssProperties||this.cssProperties&&d in this.cssProperties)return!1}let a=this.cssProperties?Object.keys(this.cssProperties).length:0,s=e.cssProperties?Object.keys(e.cssProperties).length:0;if(a!==s)return!1;if(a>0){for(let d of Object.keys(this.cssProperties))if(this.cssProperties[d]!==e.cssProperties[d])return!1}let o=this.classes.trim().replace(/\s+/g," ").split(" "),c=e.classes.trim().replace(/\s+/g," ").split(" ");if(o.length!==c.length)return!1;o.sort(),c.sort();for(let[d,m]of o.entries())if(m==="ML__vertical-separator"||m!==c[d])return!1;return this.value+=e.value,this.height=Math.max(this.height,e.height),this.depth=Math.max(this.depth,e.depth),this._width=this._width+e._width,this.maxFontSize=Math.max(this.maxFontSize,e.maxFontSize),this.italic=e.italic,!0}};function Kl(t){if(!t||t.length===0)return[];t[0].children=Kl(t[0].children);let e=[t[0]];for(let r=1;r<t.length;r++)e[e.length-1].tryCoalesceWith(t[r])||(t[r].children=Kl(t[r].children),e.push(t[r]));return e}function _r(t){return t.children&&(t.children=Kl(t.children)),t}function Mr(t,e){if(!t)return new _(null,e);let r=new _(null,{classes:"ML__strut",type:"ignore"});r.setStyle("height",Math.max(0,t.height),"em");let n=[r];if(t.depth!==0){let a=new _(null,{classes:"ML__strut--bottom",type:"ignore"});a.setStyle("height",t.height+t.depth,"em"),a.setStyle("vertical-align",-t.depth,"em"),n.push(a)}return n.push(t),new _(n,f(p({},e),{type:"lift"}))}function Wi(t){let e=em(t)/2,r=new _(null,{maxFontSize:0});return r.height=e+.166,r.depth=e-.166,r.svgBody=t,r}function Uh(t,e){var r;if(t.type==="latex"){t.height=.9,t.depth=.2,t._width=1;return}if(t.value){t.height=-1/0,t.depth=-1/0,t._width=0,t.skew=-1/0,t.italic=-1/0;for(let n=0;n<t.value.length;n++){let a=xr(t.value.codePointAt(n),e);t.height=Math.max(t.height,a.height),t.depth=Math.max(t.depth,a.depth),t._width+=a.width,t.skew=a.skew,t.italic=a.italic}return}if(t.children&&t.children.length>0){let n=-1/0,a=-1/0,s=0;for(let o of t.children)o.height>n&&(n=o.height),o.depth>a&&(a=o.depth),s=Math.max(s,(r=o.maxFontSize)!=null?r:0);t.height=n,t.depth=a,t._width=t.children.reduce((o,c)=>o+c.width,0),t.maxFontSize=s}}function Dl(t){if(t=t.trim().replace(/ /g,"-"),t.length===0)throw new Error("Invalid empty attribute name");if(/[\x20\x09\x0a\x0c\x0d"'>/=\x00-\x1f]/.test(t))throw new Error(`Invalid attribute name "${t}"`);return t}function Hi(t){if(t=t.trim(),t.startsWith('"')&&t.endsWith('"')){if(/"/.test(t.slice(1,-1)))throw new Error(`Invalid attribute value: ${t}`);return t}if(t.startsWith("'")&&t.endsWith("'")){if(/'/.test(t.slice(1,-1)))throw new Error(`Invalid attribute value: ${t}`);return t}if(t.length===0)throw new Error("Invalid empty attribute value");return`"${t.replace(/"/g,"&quot;")}"`}function jh(t){if("individualShift"in t){let e=t.individualShift,r=e[0];if(r==null)return[null,0];let n=[r],a=-r.shift-r.box.depth,s=a;for(let o=1;o<e.length;o++){let c=e[o],d=-c.shift-s-c.box.depth,m=d-(r.box.height+r.box.depth);s=s+d,n.push(m),n.push(c),r=c}return[n,a]}if("top"in t){let e=t.top;for(let r of t.children)e-=typeof r=="number"?r:r.box.height+r.box.depth;return[t.children,e]}else{if("bottom"in t)return[t.children,-t.bottom];if("firstBaseline"in t){let e=t.firstBaseline[0];if(typeof e=="number")throw new Error("First child must be an element.");return[t.firstBaseline,-e.box.depth]}else if("shift"in t){let e=t.children[0];if(typeof e=="number")throw new Error("First child must be an element.");return[t.children,-e.box.depth-t.shift]}}return[null,0]}function Jh(t){var e;let[r,n]=jh(t);if(!r)return[[],0,0];let a=new _(null,{classes:"ML__pstrut"}),s=0;for(let me of r)if(typeof me!="number"){let _e=me.box;s=Math.max(s,_e.maxFontSize,_e.height)}s+=2,a.height=s,a.setStyle("height",s,"em");let o=[],c=n,d=n,m=n,y=0;for(let me of r){if(typeof me=="number")m+=me;else{let _e=me.box,Ge=(e=me.classes)!=null?e:[],ve=new _([a,_e],{classes:Ge.join(" "),style:me.style});_e.setStyle("height",_e.height+_e.depth,"em"),_e.setStyle("display","inline-block"),ve.setStyle("top",-s-m-_e.depth,"em"),me.marginLeft&&ve.setStyle("margin-left",me.marginLeft,"em"),me.marginRight&&ve.setStyle("margin-right",me.marginRight,"em"),o.push(ve),m+=_e.height+_e.depth,y=Math.max(y,ve.width)}c=Math.min(c,m),d=Math.max(d,m)}o.forEach(me=>{me.softWidth=y});let A=new _(o,{classes:"ML__vlist"});if(A.softWidth=y,A.height=d,A.setStyle("height",d,"em"),c>=0)return[[new _(A,{classes:"ML__vlist-r"})],d,-c];let P=new _(new _(null),{classes:"ML__vlist"});P.height=-c,P.setStyle("height",-c,"em");let Z=new _(8203,{classes:"ML__vlist-s",maxFontSize:0});return Z.softWidth=0,Z.height=0,Z.depth=0,[[new _([A,Z],{classes:"ML__vlist-r"}),new _(P,{classes:"ML__vlist-r"})],d,-c]}var Q=class extends _{constructor(t,e){var r;let[n,a,s]=Jh(t);super(n.length===1?n[0]:n,{type:e?.type,classes:((r=e?.classes)!=null?r:"")+" ML__vlist-t"+(n.length===2?" ML__vlist-t2":"")}),this.height=a,this.depth=s,this.softWidth=n.reduce((o,c)=>Math.max(o,c.width),0)}};function om(t,e){var r,n,a,s,o;let c=t.metrics,d=new _(e.base),m=(r=e.baseShift)!=null?r:0,y=(n=e.slant)!=null?n:0,A=0,P=0;e.above&&(A=(a=e.aboveShift)!=null?a:Math.max(c.bigOpSpacing1,c.bigOpSpacing3-e.above.depth)),e.below&&(P=(s=e.belowShift)!=null?s:Math.max(c.bigOpSpacing2,c.bigOpSpacing4-e.below.height));let Z=null;if(e.below&&e.above){let me=c.bigOpSpacing5+e.below.height+e.below.depth+P+d.depth+m;Z=new Q({bottom:me,children:[c.bigOpSpacing5,{box:e.below,marginLeft:-y,classes:["ML__center"]},P,{box:d,classes:["ML__center"]},A,{box:e.above,marginLeft:y,classes:["ML__center"]},c.bigOpSpacing5]}).wrap(t)}else if(e.below&&!e.above)Z=new Q({top:d.height-m,children:[c.bigOpSpacing5,{box:e.below,marginLeft:-y,classes:["ML__center"]},P,{box:d,classes:["ML__center"]}]}).wrap(t);else if(!e.below&&e.above){let me=d.depth+m;Z=new Q({bottom:me,children:[{box:d,classes:["ML__center"]},A,{box:e.above,marginLeft:y,classes:["ML__center"]},c.bigOpSpacing5]}).wrap(t)}else{let me=d.depth+m;Z=new Q({bottom:me,children:[{box:d},c.bigOpSpacing5]}).wrap(t)}return new _(Z,{type:(o=e.type)!=null?o:"op"})}var Ba=7,Un=6,jn=5,wr=4,ei=3,Ne=2,kr=1,Se=0,Kt=class{constructor(t,e,r){this.id=t,this.sizeDelta=e,this.cramped=r;let n={"-4":2,"-3":1,0:0}[e];this.metrics=Object.keys(Al).reduce((a,s)=>f(p({},a),{[s]:Al[s][n]}),{})}getFontSize(t){return Math.max(1,t+this.sizeDelta)}get sup(){return ut[[Se,kr,Se,kr,Ne,ei,Ne,ei][this.id]]}get sub(){return ut[[Se,Se,Se,Se,Ne,Ne,Ne,Ne][this.id]]}get fracNum(){return ut[[Se,kr,Se,kr,Ne,ei,wr,jn][this.id]]}get fracDen(){return ut[[Se,Se,Se,Se,Ne,Ne,wr,wr][this.id]]}get cramp(){return ut[[Se,Se,Ne,Ne,wr,wr,Un,Un][this.id]]}get isTight(){return this.sizeDelta<0}},Wn={7:new Kt(Ba,0,!1),6:new Kt(Un,0,!0),5:new Kt(jn,0,!1),4:new Kt(wr,0,!0),3:new Kt(ei,-3,!1),2:new Kt(Ne,-3,!0),1:new Kt(kr,-4,!1),0:new Kt(Se,-4,!0)},ut=f(p({},Wn),{displaystyle:Wn[Ba],textstyle:Wn[jn],scriptstyle:Wn[ei],scriptscriptstyle:Wn[kr]});function Bl(t,e){var r;if(!t)return 0;let n={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:Dt,bp:803/800,dd:1238/1157,pc:12,in:72.27,mu:10/18}[(r=t.unit)!=null?r:"pt"];if(Number.isFinite(e)){let a=10**e;return Math.round(t.dimension/Dt*n*a)/a}return t.dimension*n}function Ra(t,e){if(t===null)return 0;let r=Bl(t)/Dt;if(Number.isFinite(e)){let n=10**e;return Math.round(r*n)/n}return r}function Ol(t){var e;return`${t.dimension}${(e=t.unit)!=null?e:"pt"}`}function Gh(t){let e=Ol(t.glue);return t.grow&&t.grow.dimension!==0&&(e+=` plus ${Ol(t.grow)}`),t.shrink&&t.shrink.dimension!==0&&(e+=` minus ${Ol(t.shrink)}`),e}function be(t){var e,r;if(t==null)return null;let n="";if("dimension"in t&&(n=`${t.dimension}${(e=t.unit)!=null?e:"pt"}`),"glue"in t&&(n=Gh(t)),"number"in t)if(!("base"in t)||t.base==="decimal")n=Number(t.number).toString();else if(t.base==="alpha")n=`\`${String.fromCodePoint(t.number)}`;else{let a=Math.round(t.number)>>>0;t.base==="hexadecimal"?(n=Number(a).toString(16).toUpperCase(),a<=255?n=n.padStart(2,"0"):a<=65535?n=n.padStart(4,"0"):a<=16777215?n=n.padStart(6,"0"):n=n.padStart(8,"0"),n=`"${n}`):t.base==="octal"&&(n=Number(a).toString(8),a<=63?n=n.padStart(2,"0"):a<=30583?n=n.padStart(4,"0"):n=n.padStart(8,"0"),n=`'${n}`)}return"register"in t&&("factor"in t&&(t.factor===-1?n="-":t.factor!==1&&(n=Number(t.factor).toString())),"global"in t&&t.global&&(n+="\\global"),n+=`\\${t.register}`),"string"in t&&(n=t.string),(r=t.relax)!=null&&r&&(n+="\\relax"),n}function dt(t,e){return t==null?null:"number"in t?f(p({},t),{number:t.number*e}):"register"in t?"factor"in t&&t.factor?f(p({},t),{factor:t.factor*e}):f(p({},t),{factor:e}):"dimension"in t?f(p({},t),{dimension:t.dimension*e}):"glue"in t?t.shrink&&t.grow?{glue:dt(t.glue,e),shrink:dt(t.shrink,e),grow:dt(t.grow,e)}:t.shrink?{glue:dt(t.glue,e),shrink:dt(t.shrink,e)}:t.grow?{glue:dt(t.glue,e),grow:dt(t.grow,e)}:{glue:dt(t.glue,e)}:null}var Xh={"p@":{dimension:1},"z@":{dimension:0},maxdimen:{dimension:16383.99999},hfuzz:{dimension:.1},vfuzz:{dimension:.1},overfullrule:{dimension:5},hsize:{dimension:6.5,unit:"in"},vsize:{dimension:8.9,unit:"in"},parindent:{dimension:20},maxdepth:{dimension:4},splitmaxdepth:{register:"maxdimen"},boxmaxdepth:{register:"maxdimen"},delimitershortfall:{dimension:5},nulldelimiterspace:{dimension:1.2,unit:"pt"},scriptspace:{dimension:.5},topskip:{dimension:10},splittopskip:{dimension:10},normalbaselineskip:{dimension:12},normallineskip:{dimension:1},normallineskiplimit:{dimension:0},jot:{dimension:3},doublerulesep:{dimension:2},arrayrulewidth:{dimension:.4},arraycolsep:{dimension:5},fboxsep:{dimension:3},fboxrule:{dimension:.4},"z@skip":{glue:{dimension:0},shrink:{dimension:0},grow:{dimension:0}},hideskip:{glue:{dimension:-1e3},grow:{dimension:1,unit:"fill"}},"@flushglue":{glue:{dimension:0},grow:{dimension:1,unit:"fill"}},parskip:{glue:{dimension:0},grow:{dimension:1}},abovedisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},abovedisplayshortskip:{glue:{dimension:0},grow:{dimension:3}},belowdisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},belowdisplayshortskip:{glue:{dimension:7},grow:{dimension:3},shrink:{dimension:4}},parfillskip:{glue:{dimension:0},grow:{dimension:1,unit:"fil"}},thinmuskip:{glue:{dimension:3,unit:"mu"}},medmuskip:{glue:{dimension:4,unit:"mu"},grow:{dimension:2,unit:"mu"},shrink:{dimension:4,unit:"mu"}},thickmuskip:{glue:{dimension:5,unit:"mu"},grow:{dimension:5,unit:"mu"}},smallskipamount:{glue:{dimension:3},grow:{dimension:1},shrink:{dimension:1}},medskipamount:{glue:{dimension:6},grow:{dimension:2},shrink:{dimension:3}},bigskipamount:{glue:{dimension:12},grow:{dimension:2},shrink:{dimension:4}},pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:1,month:new Date().getMonth()+1,day:new Date().getDate(),year:new Date().getFullYear()};function Pa(){return p({},Xh)}function Jn(){return{registers:Pa(),smartFence:!1,renderPlaceholder:void 0,placeholderSymbol:"▢",letterShapeStyle:N.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,colorMap:Hr,backgroundColorMap:Si,getMacro:t=>Ti(t,Ei())}}var O=class b9{constructor(e,r){var n,a,s,o,c,d,m,y,A,P,Z,me,_e,Ge,ve;let He;e!=null&&e.parent?(this.parent=e.parent,He=e.parent,this.registers={}):(He=p(p({},Jn()),(n=e?.from)!=null?n:{}),this.registers=He.registers),He.atomIdsSettings&&(this.atomIdsSettings=p({},He.atomIdsSettings)),this.renderPlaceholder=He.renderPlaceholder,this.isPhantom=(o=(s=e?.isPhantom)!=null?s:(a=this.parent)==null?void 0:a.isPhantom)!=null?o:!1,this.letterShapeStyle=He.letterShapeStyle,this.minFontScale=He.minFontScale,this.maxMatrixCols=He.maxMatrixCols,r!=null&&r.color&&r.color!=="none"?this.color=r.color:this.color=(d=(c=this.parent)==null?void 0:c.color)!=null?d:"",r!=null&&r.backgroundColor&&r.backgroundColor!=="none"?this.backgroundColor=r.backgroundColor:this.backgroundColor=(y=(m=this.parent)==null?void 0:m.backgroundColor)!=null?y:"",r!=null&&r.fontSize&&r.fontSize!=="auto"&&r.fontSize!==((A=this.parent)==null?void 0:A.size)?this.size=r.fontSize:this.size=(Z=(P=this.parent)==null?void 0:P.size)!=null?Z:Vi;let De=(_e=(me=this.parent)==null?void 0:me.mathstyle)!=null?_e:ut.displaystyle;if(typeof e?.mathstyle=="string"){if(He instanceof b9)switch(e.mathstyle){case"cramp":De=De.cramp;break;case"superscript":De=De.sup;break;case"subscript":De=De.sub;break;case"numerator":De=De.fracNum;break;case"denominator":De=De.fracDen;break}switch(e.mathstyle){case"textstyle":De=ut.textstyle;break;case"displaystyle":De=ut.displaystyle;break;case"scriptstyle":De=ut.scriptstyle;break;case"scriptscriptstyle":De=ut.scriptscriptstyle;break}}this.mathstyle=De,this.smartFence=He.smartFence,this.placeholderSymbol=He.placeholderSymbol,this.colorMap=(Ge=He.colorMap)!=null?Ge:Xe=>Xe,this.backgroundColorMap=(ve=He.backgroundColorMap)!=null?ve:Xe=>Xe,this.getMacro=He.getMacro,this.parent!==void 0||this.registers}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if(typeof this.atomIdsSettings.seed!="number")return`${Date.now().toString(36).slice(-2)}${Math.floor(Math.random()*1e5).toString(36)}`;let e=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,e}scale(e){return e*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return this.mathstyle.id===Ba||this.mathstyle.id===Un}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get metrics(){return this.mathstyle.metrics}get effectiveFontSize(){return Math.max(qn[Math.max(1,this.size+this.mathstyle.sizeDelta)],this.minFontScale)}getRegister(e){var r;if((r=this.registers)!=null&&r[e])return this.registers[e];if(this.parent)return this.parent.getRegister(e)}getRegisterAsNumber(e){let r=this.getRegister(e);if(typeof r=="number")return r;if(typeof r=="string")return Number(r)}getRegisterAsGlue(e){var r;if((r=this.registers)!=null&&r[e]){let n=this.registers[e];return typeof n=="object"&&"glue"in n?n:typeof n=="object"&&"dimension"in n?{glue:{dimension:n.dimension}}:typeof n=="number"?{glue:{dimension:n}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(e)}getRegisterAsEm(e,r){return Ra(this.getRegisterAsDimension(e),r)}getRegisterAsDimension(e){var r;if((r=this.registers)!=null&&r[e]){let n=this.registers[e];return typeof n=="object"&&"glue"in n?n.glue:typeof n=="object"&&"dimension"in n?n:typeof n=="number"?{dimension:n}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(e)}setRegister(e,r){if(r===void 0){delete this.registers[e];return}this.registers[e]=r}evaluate(e){if(!e||!("register"in e))return e;let r=this;if("global"in e&&e.global)for(;r.parent;)r=r.parent;let n=1;"factor"in e&&e.factor!==1&&e.factor!==void 0&&(n=e.factor);let a=r.getRegister(e.register);if(a===void 0)return;if(typeof a=="string")return{string:Number(a).toString()+a};if(typeof a=="number")return{number:n*a};let s=r.evaluate(a);if(s!==void 0)return"string"in s?{string:Number(a).toString()+s.string}:"number"in s?{number:n*s.number}:"dimension"in s?f(p({},s),{dimension:n*s.dimension}):"glue"in s?f(p({},s),{glue:f(p({},s.glue),{dimension:n*s.glue.dimension}),shrink:s.shrink?f(p({},s.shrink),{dimension:n*s.shrink.dimension}):void 0,grow:s.grow?f(p({},s.grow),{dimension:n*s.grow.dimension}):void 0}):e}toDimension(e){let r=this.evaluate(e);if(r===void 0)return null;if("dimension"in r)return r;if("glue"in r)return r.glue;if("number"in r)return{dimension:r.number};if("string"in r){let n=parseFloat(r.string),a=r.string.match(/(mm|cm|ex|px|em|bp|dd|pc|in|mu)$/);return a?{dimension:n,unit:a[0]}:{dimension:n}}return null}toEm(e,r){if(e===null)return 0;let n=this.toDimension(e);return n===null?0:Bl(n,r)/Dt}toNumber(e){if(e===null)return null;let r=this.evaluate(e);return r===void 0?null:"number"in r?r.number:"dimension"in r?r.dimension:"glue"in r?r.glue.dimension:"string"in r?Number(r.string):null}toColor(e){var r,n;if(e===null)return null;let a=this.evaluate(e);return a===void 0?null:"string"in a?(n=(r=this.colorMap)==null?void 0:r.call(this,a.string))!=null?n:a.string:null}toBackgroundColor(e){var r,n;if(e===null)return null;let a=this.evaluate(e);return a===void 0?null:"string"in a?(n=(r=this.backgroundColorMap)==null?void 0:r.call(this,a.string))!=null?n:a.string:null}},Lr=["body","above","below","superscript","subscript"];function Sr(t){return typeof t=="string"&&Lr.includes(t)}function We(t){return t!==void 0&&Array.isArray(t)&&t.length===2}var b=class E4{constructor(e){this.isRoot=!1;var r,n,a,s,o,c,d;this.type=e.type,typeof e.value=="string"&&(this.value=e.value),this.command=(n=(r=e.command)!=null?r:this.value)!=null?n:"",this.mode=(a=e.mode)!=null?a:"math",e.isFunction&&(this.isFunction=!0),(e.isRoot||this.type==="root")&&(this.isRoot=!0),e.limits&&(this.subsupPlacement=e.limits),this.style=p({},(s=e.style)!=null?s:{}),this.displayContainsHighlight=(o=e.displayContainsHighlight)!=null?o:!1,this.captureSelection=(c=e.captureSelection)!=null?c:!1,this.skipBoundary=(d=e.skipBoundary)!=null?d:!1,e.verbatimLatex!==void 0&&e.verbatimLatex!==null&&(this.verbatimLatex=e.verbatimLatex),e.args&&(this.args=e.args),e.body&&(this.body=e.body),this._changeCounter=0}static createBox(e,r,n){var a;if(!r)return null;let s=Zh(r),o=[];for(let d of s){let m=d[0].style,y=Yh(e,d,{style:{color:m.color,backgroundColor:m.backgroundColor,fontSize:m.fontSize}});y&&o.push(y)}if(o.length===0)return null;let c=((a=n?.classes)!=null?a:"").trim();return o.length===1&&!c&&!(n!=null&&n.type)?o[0].wrap(e):new _(o,{classes:c,type:n?.type}).wrap(e)}static serialize(e,r){return ge.serialize(e,r)}static commonAncestor(e,r){if(e===r||e.parent===r.parent)return e.parent;let n=new WeakSet,{parent:a}=e;for(;a;)n.add(a),a=a.parent;for(a=r.parent;a;){if(n.has(a))return a;a=a.parent}}static fromJson(e){return typeof e=="string"?new E4({type:"mord",value:e,mode:"math"}):new E4(e)}toJson(){if(this._json)return this._json;let e={};if(this.type&&(e.type=this.type),this.mode!=="math"&&(e.mode=this.mode),this.command&&this.command!==this.value&&(e.command=this.command),this.value!==void 0&&(e.value=this.value),this.style&&Object.keys(this.style).length>0&&(e.style=p({},this.style)),this.verbatimLatex!==void 0&&(e.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(e.explicitSubsupPlacement=!0),this.isFunction&&(e.isFunction=!0),this.displayContainsHighlight&&(e.displayContainsHighlight=!0),this.skipBoundary&&(e.skipBoundary=!0),this.captureSelection&&(e.captureSelection=!0),this.args&&(e.args=Qh(this.args)),this._branches)for(let r of Object.keys(this._branches))this._branches[r]&&(e[r]=this._branches[r].filter(n=>n.type!=="first").map(n=>n.toJson()));return e.type==="mord"&&Object.keys(e).length===2&&"value"in e?e.value:(this._json=e,e)}get changeCounter(){return this.parent?this.parent.changeCounter:this._changeCounter}set isDirty(e){e&&(this._json=void 0,this.parent||this._changeCounter++,"verbatimLatex"in this&&(this.verbatimLatex=void 0),this._children=void 0,this.parent&&(this.parent.isDirty=!0))}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);return r!=null&&r.serialize?r.serialize(this,e):this.body&&this.command?R([q(this.command,this.bodyToLatex(e)),this.supsubToLatex(e)]):this.body?R([this.bodyToLatex(e),this.supsubToLatex(e)]):!this.value||this.value==="​"?"":this.command}bodyToLatex(e){var r;let n=(r=e.defaultMode)!=null?r:this.mode==="math"?"math":"text";return ge.serialize(this.body,f(p({},e),{defaultMode:n}))}aboveToLatex(e){return ge.serialize(this.above,e)}belowToLatex(e){return ge.serialize(this.below,e)}supsubToLatex(e){let r="";if(e=f(p({},e),{defaultMode:"math"}),this.branch("subscript")!==void 0){let n=ge.serialize(this.subscript,e);n.length===0?r+="_{}":n.length===1?/^[0-9]$/.test(n)?r+=`_${n}`:r+=`_{${n}}`:r+=`_{${n}}`}if(this.branch("superscript")!==void 0){let n=ge.serialize(this.superscript,e);n.length===0?r+="^{}":n.length===1?n==="′"?r+="^\\prime ":n==="″"?r+="^\\doubleprime ":/^[0-9]$/.test(n)?r+=`^${n}`:r+=`^{${n}}`:r+=`^{${n}}`}return r}get treeDepth(){let e=1,r=this.parent;for(;r;)r=r.parent,e+=1;return e}get inCaptureSelection(){let e=this;for(;e;){if(e.captureSelection)return!0;e=e.parent}return!1}get parentPrompt(){let e=this.parent;for(;e;){if(e.type==="prompt"&&!e.captureSelection)return e;e=e.parent}return null}branch(e){if(Sr(e)&&this._branches)return this._branches[e]}get branches(){if(!this._branches)return[];let e=[];for(let r of Lr)this._branches[r]&&e.push(r);return e}createBranch(e){return Sr(e),Sr(e)?(this._branches?this._branches[e]||(this._branches[e]=[this.makeFirstAtom(e)]):this._branches={[e]:[this.makeFirstAtom(e)]},this.isDirty=!0,this._branches[e]):[]}get row(){return We(this.parentBranch)?this.parentBranch[0]:-1}get col(){return We(this.parentBranch)?this.parentBranch[1]:-1}get body(){var e;return(e=this._branches)==null?void 0:e.body}set body(e){this.setChildren(e,"body")}get superscript(){var e;return(e=this._branches)==null?void 0:e.superscript}set superscript(e){this.setChildren(e,"superscript")}get subscript(){var e;return(e=this._branches)==null?void 0:e.subscript}set subscript(e){this.setChildren(e,"subscript")}get above(){var e;return(e=this._branches)==null?void 0:e.above}set above(e){this.setChildren(e,"above")}get below(){var e;return(e=this._branches)==null?void 0:e.below}set below(e){this.setChildren(e,"below")}applyStyle(e,r){this.isDirty=!0,r!=null&&r.unstyledOnly?(e.color&&!this.style.color&&(this.style.color=e.color),e.backgroundColor&&!this.style.backgroundColor&&(this.style.backgroundColor=e.backgroundColor),e.fontFamily&&!this.style.fontFamily&&(this.style.fontFamily=e.fontFamily),e.fontShape&&!this.style.fontShape&&(this.style.fontShape=e.fontShape),e.fontSeries&&!this.style.fontSeries&&(this.style.fontSeries=e.fontSeries),e.fontSize&&!this.style.fontSize&&(this.style.fontSize=e.fontSize),e.variant&&!this.style.variant&&(this.style.variant=e.variant),e.variantStyle&&!this.style.variantStyle&&(this.style.variantStyle=e.variantStyle)):this.style=p(p({},this.style),e),this.style.fontFamily==="none"&&delete this.style.fontFamily,this.style.fontShape==="auto"&&delete this.style.fontShape,this.style.fontSeries==="auto"&&delete this.style.fontSeries,this.style.color==="none"&&(delete this.style.color,delete this.style.verbatimColor),this.style.backgroundColor==="none"&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),this.style.fontSize==="auto"&&delete this.style.fontSize;for(let n of this.children)n.applyStyle(e,r)}getInitialBaseElement(){var e,r,n;return this.hasEmptyBranch("body")?this:((e=this.body)==null||e[0].type,(n=(r=this.body[1])==null?void 0:r.getInitialBaseElement())!=null?n:this)}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){return this.type==="leftright"||this.type==="genfrac"||this.type==="subsup"||this.type==="delim"||this.type==="array"||this.type==="surd"?!1:this.getFinalBaseElement().type==="mord"}hasEmptyBranch(e){let r=this.branch(e);return r?(r.length>0,r[0].type,r.length===1):!0}setChildren(e,r){var n;if(!e||(Sr(r),!Sr(r)))return;let a=((n=e[0])==null?void 0:n.type)==="first"?[...e]:[this.makeFirstAtom(r),...e];this._branches?this._branches[r]=a:this._branches={[r]:a};for(let s of e)s.parent=this,s.parentBranch=r;this.isDirty=!0}makeFirstAtom(e){let r=new E4({type:"first",mode:this.mode});return r.parent=this,r.parentBranch=e,r}addChild(e,r){e.type,this.createBranch(r).push(e),this.isDirty=!0,e.parent=this,e.parentBranch=r}addChildBefore(e,r){r.parentBranch;let n=this.createBranch(r.parentBranch);n.splice(n.indexOf(r),0,e),this.isDirty=!0,e.parent=this,e.parentBranch=r.parentBranch}addChildAfter(e,r){r.parentBranch;let n=this.createBranch(r.parentBranch);n.splice(n.indexOf(r)+1,0,e),this.isDirty=!0,e.parent=this,e.parentBranch=r.parentBranch}addChildren(e,r){let n=this.createBranch(r);for(let a of e)a.parent=this,a.parentBranch=r,n.push(a);this.isDirty=!0}addChildrenAfter(e,r){e.length===0||e[0].type,r.parentBranch;let n=this.createBranch(r.parentBranch);n.splice(n.indexOf(r)+1,0,...e),this.isDirty=!0;for(let a of e)a.parent=this,a.parentBranch=r.parentBranch;return e[e.length-1]}removeBranch(e){let r=this.branch(e);if(Sr(e)&&(this._branches[e]=void 0),!r)return[];for(let s of r)s.parent=void 0,s.parentBranch=void 0;r[0].type;let[n,...a]=r;return this.isDirty=!0,a}removeChild(e){if(e.parent,e.type==="first")return;let r=this.branch(e.parentBranch),n=r.indexOf(e);r.splice(n,1),this.isDirty=!0,e.parent=void 0,e.parentBranch=void 0}get siblings(){return this.parent?this.parent.branch(this.parentBranch):[]}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:e}=this;return e[e.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return this.siblings.length===1}get leftSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)-1]}get rightSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)+1]}get hasChildren(){return!!(this._branches&&this.children.length>0)}get firstChild(){return this.hasChildren,this.children[0]}get lastChild(){this.hasChildren;let{children:e}=this;return e[e.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let e=[];for(let r of Lr)if(this._branches[r])for(let n of this._branches[r])e.push(...n.children),e.push(n);return this._children=e,e}render(e){if(this.type==="first"&&!e.atomIdsSettings)return null;let r=se(this.command,this.mode);if(r!=null&&r.render)return r.render(this,e);let n=new O({parent:e},this.style),a=this.createBox(n,{classes:this.parent?"":"ML__base"});return a?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(a=this.attachSupsub(n,{base:a})),a.wrap(n)):null}attachSupsub(e,r){var n;let a=r.base,s=this.superscript,o=this.subscript;if(!s&&!o)return a;let c=null,d=null,m=(n=r.isCharacterBox)!=null?n:this.isCharacterBox(),y=0;if(s){let _e=new O({parent:e,mathstyle:"superscript"});c=E4.createBox(_e,s),m||(y=a.height-e.metrics.supDrop*_e.scalingFactor)}let A=0;if(o){let _e=new O({parent:e,mathstyle:"subscript"});d=E4.createBox(_e,o),m||(A=a.depth+e.metrics.subDrop*_e.scalingFactor)}let P;e.isDisplayStyle?P=e.metrics.sup1:e.isCramped?P=e.metrics.sup3:P=e.metrics.sup2;let Z=.5/Dt/e.scalingFactor,me=null;if(d&&c){y=Math.max(y,P,c.depth+.25*e.metrics.xHeight),A=Math.max(A,e.metrics.sub2);let _e=e.metrics.defaultRuleThickness;if(y-c.depth-(d.height-A)<4*_e){A=4*_e-(y-c.depth)+d.height;let ve=.8*e.metrics.xHeight-(y-c.depth);ve>0&&(y+=ve,A-=ve)}let Ge=this.type==="extensible-symbol"&&a.italic?-a.italic:0;me=new Q({individualShift:[{box:d,shift:A,marginLeft:Ge},{box:c,shift:-y}]}).wrap(e)}else d&&!c?(A=Math.max(A,e.metrics.sub1,d.height-.8*tt),me=new Q({shift:A,children:[{box:d,marginRight:Z,marginLeft:this.isCharacterBox()?-a.italic:0}]})):!d&&c&&(y=Math.max(y,P,c.depth+.25*tt),me=new Q({shift:-y,children:[{box:c,marginRight:Z}]}));return new _([a,new _(me,{caret:this.caret,isSelected:this.isSelected,classes:"ML__msubsup"})],{type:r.type})}attachLimits(e,r){let n=this.superscript?E4.createBox(new O({parent:e,mathstyle:"superscript"},this.style),this.superscript):null,a=this.subscript?E4.createBox(new O({parent:e,mathstyle:"subscript"},this.style),this.subscript):null;return!n&&!a?r.base.wrap(e):om(e,f(p({},r),{above:n,below:a}))}bind(e,r){if(!r||e.isPhantom||this.value==="​")return r;let n=this.parent;for(;n&&!n.captureSelection;)n=n.parent;return n!=null&&n.captureSelection||(this.id||(this.id=e.makeID()),r.atomID=this.id),r}createBox(e,r){var n,a,s,o;let c=(n=this.value)!=null?n:this.body,d=(a=r?.boxType)!=null?a:Oa(this.type),m=(s=r?.classes)!=null?s:"";this.mode==="text"&&(m+=" ML__text");let y=typeof c=="string"||c===void 0?new _(c??null,{type:d,isSelected:this.isSelected,mode:this.mode,maxFontSize:e.scalingFactor,style:f(p({variant:"normal"},this.style),{fontSize:Math.max(1,e.size+e.mathstyle.sizeDelta)}),letterShapeStyle:e.letterShapeStyle,classes:m}):(o=E4.createBox(e,c,{type:d,classes:m}))!=null?o:new _(null);return e.isTight&&(y.isTight=!0),(this.mode!=="math"||this.style.variant==="main")&&(y.italic=0),y.right=y.italic,this.bind(e,y),this.caret&&!this.superscript&&!this.subscript&&(y.caret=this.caret),y}isDigit(){var e;return this.type==="mord"&&this.value?/^[\d,\.]$/.test(this.value):this.type==="group"&&((e=this.body)==null?void 0:e.length)===2?this.body[0].type==="first"&&this.body[1].value===",":!1}asDigit(){var e;return this.type==="mord"&&this.value&&/^[\d,\.]$/.test(this.value)?this.value:this.type==="group"&&((e=this.body)==null?void 0:e.length)===2&&this.body[0].type==="first"&&this.body[1].value===","?".":""}};function Zh(t){let e,r=[],n=[];for(let a of t)if(a.type==="first"&&n.push(a),!e&&!a.style)n.push(a);else{let s=a.style;e&&s.color===e.color&&s.backgroundColor===e.backgroundColor&&s.fontSize===e.fontSize?n.push(a):(n.length>0&&r.push(n),n=[a],e=s)}return n.length>0&&r.push(n),r}function Yh(t,e,r){var n,a,s,o,c;if(!e||e.length===0)return null;let d=new O({parent:t},r.style),m=!((n=d.atomIdsSettings)!=null&&n.groupNumbers),y=[];if(e.length===1){let P=e[0],Z=P.render(d);Z&&(m&&P.isSelected&&Z.selected(!0),y=[Z])}else{let P="",Z=!0;for(let me of e){(a=d.atomIdsSettings)!=null&&a.groupNumbers&&P&&(Z&&me.isDigit()||!Z&&Rl(me))&&(d.atomIdsSettings.overrideID=P);let _e=me.render(d);d.atomIdsSettings&&(d.atomIdsSettings.overrideID=void 0),_e&&((s=d.atomIdsSettings)!=null&&s.groupNumbers&&((me.isDigit()||Rl(me))&&(!P||Z!==me.isDigit())&&(Z=me.isDigit(),P=(o=me.id)!=null?o:""),P&&(!(me.isDigit()||Rl(me))||!me.hasEmptyBranch("superscript")||!me.hasEmptyBranch("subscript"))&&(P="")),m&&me.isSelected&&_e.selected(!0),y.push(_e))}}if(y.length===0)return null;let A=new _(y,f(p({isTight:d.isTight},r),{type:(c=r.type)!=null?c:"lift"}));return A.isSelected=y.every(P=>P.isSelected),A.wrap(d)}function Rl(t){return t.mode==="text"}function Qh(t){return t.map(e=>e===null?"<null>":Array.isArray(e)&&e[0]instanceof b?{atoms:e.map(r=>r.toJson())}:typeof e=="object"&&"group"in e?{group:e.group.map(r=>r.toJson())}:e)}var $e=class _9 extends b{constructor(e,r,n){super({type:"text",command:e,mode:"text",displayContainsHighlight:!0}),this.value=r,this.verbatimLatex=r,this.applyStyle(n)}static fromJson(e){return new _9(e.command,e.value,e.style)}render(e){let r=this.createBox(e);return this.caret&&(r.caret=this.caret),r}_serialize(e){var r;return(r=this.verbatimLatex)!=null?r:Us("text",this.value.codePointAt(0))}};function am(t,e){if(t.direction===e.direction){let r=t.ranges.length;if(e.ranges.length===r){let n=0;for(;n<r&&ef(t.ranges[n],e.ranges[n])==="equal";)n++;return n===r?"equal":"different"}}return"different"}function ef(t,e){return t[0]===e[0]&&t[1]===e[1]?"equal":"different"}function le(t){let e=1/0,r=-1/0;for(let n of t.ranges)e=Math.min(e,n[0],n[1]),r=Math.max(r,n[0],n[1]);return[e,r]}function Ot(t){return typeof t=="number"&&!Number.isNaN(t)}function ti(t){return Array.isArray(t)&&t.length===2}function Ui(t){return t!=null&&typeof t=="object"&&"ranges"in t&&Array.isArray(t.ranges)}function sm(t,e){let r=t.at(e),n;if(r){n=r.mode;let a=r.parent;for(;!n&&a;)a&&(n=a.mode),a=a.parent}return n}function tf(t,e){if(!e)return"";if(typeof e=="string")return e;if(!t||e.after===void 0)return e.value;let r=!1,n=!1,a=!1,s=!1,o=!1,c=!1,d=!1,m=!1,y=!1,A=!1,P=!1,Z=!1,me=!1,_e=!1,Ge=!1,ve=t[0],He=0;for(;ve!=null&&ve.type&&/^(subsup|placeholder)$/.test(ve.type);)He+=1,ve=t[He];return r=!ve||ve.type==="first",ve&&(_e=ve.mode==="text",n=!_e&&ve.type==="mord"&&Io.test(ve.value),a=!_e&&ve.type==="mord"&&/\d+$/.test(ve.value),s=!_e&&ve.isFunction,o=ve.type==="genfrac",c=ve.type==="surd",d=ve.type==="mbin",m=ve.type==="mrel",y=ve.type==="mop"||ve.type==="operator"||ve.type==="extensible-symbol",A=ve.type==="mpunct"||ve.type==="minner",P=ve.type==="array",Z=ve.type==="mopen",me=ve.type==="mclose"||ve.type==="leftright",Ge=ve.type==="space"),e.after.includes("nothing")&&r||e.after.includes("letter")&&n||e.after.includes("digit")&&a||e.after.includes("function")&&s||e.after.includes("frac")&&o||e.after.includes("surd")&&c||e.after.includes("binop")&&d||e.after.includes("relop")&&m||e.after.includes("operator")&&y||e.after.includes("punct")&&A||e.after.includes("array")&&P||e.after.includes("openfence")&&Z||e.after.includes("closefence")&&me||e.after.includes("text")&&_e||e.after.includes("space")&&Ge?e.value:""}function Gn(t,e,r){return r?tf(t,r[e]):""}var za={"&":"\\&","%":"\\%",$:"\\$","''":"^{\\doubleprime}","'''":"^{\\prime\\prime\\prime}","''''":"^{\\prime\\prime\\prime\\prime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","∞":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"∑":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","∆":"\\differentialD","∂":"\\differentialD",sin:"\\sin",cos:"\\cos",tan:"\\tan",arccos:"\\arccos",arcsin:"\\arcsin",arctan:"\\arctan",arctg:"\\operatorname{arctg}",arcsec:"\\operatorname{arcsec}",arccsc:"\\operatorname{arccsc}",arsinh:"\\operatorname{arsinh}",arccosh:"\\operatorname{arccosh}",arcosh:"\\operatorname{arcosh}",artanh:"\\operatorname{artanh}",arctanh:"\\operatorname{arctanh}",arcsech:"\\operatorname{arcsech}",arccsch:"\\operatorname{arccsch}",ch:"\\operatorname{ch}",cosec:"\\operatorname{cosec}",cosh:"\\cosh",cot:"\\cot",cotg:"\\operatorname{cotg}",coth:"\\coth",csc:"\\csc",ctg:"\\operatorname{ctg}",cth:"\\operatorname{cth}",sec:"\\sec",sech:"\\operatorname{sech}",sinh:"\\sinh",sh:"\\operatorname{sh}",tanh:"\\tanh",tg:"\\operatorname{tg}",th:"\\operatorname{th}",arg:"\\arg",lg:"\\lg",lb:"\\operatorname{lb}",log:"\\log_{#?}",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?\\to#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},sint:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\sin t"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\mathbb{Z}",QQ:"\\mathbb{Q}",RR:"\\mathbb{R}",CC:"\\mathbb{C}",xx:"\\times","+-":"\\pm","≠":"\\ne","!=":"\\ne","≥":"\\ge",">=":"\\ge","≤":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","≈":"\\approx","?=":"\\questeq","÷":"\\div","¬":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},µ:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",Ω:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\bmod{#?}","(mod":"\\pmod{#?}",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\gcd",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},ft:{after:"nothing+digit+operator",value:"\\operatorname{ft}"},inch:{after:"nothing+digit+operator",value:"\\operatorname{inch}"},mi:{after:"nothing+digit+operator",value:"\\operatorname{mi}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","-->...":"\\longrightarrow\\cdots","->":"\\to","|->":"\\mapsto","-->":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\iff","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","*":"\\cdot","**":"\\star","***":"\\ast","//":"\\slash","\\\\":"\\backslash",setminus:"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div",divide:"\\div","@":"\\circ","^^":"\\wedge","^^^":"\\bigwedge",vv:"\\vee",vvv:"\\bigvee",nn:"\\cap",nnn:"\\bigcap",uu:"\\cup",uuu:"\\bigcup","-=":"\\equiv","~=":"\\cong",lt:"<","lt=":"\\leq",gt:">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq",prop:"\\propto",diamond:"\\diamond",square:"\\square",iff:"\\iff",sub:"\\subset",sup:"\\supset",sube:"\\subseteq",supe:"\\supseteq",uarr:"\\uparrow",darr:"\\downarrow",rarr:"\\rightarrow",rArr:"\\Rightarrow",larr:"\\leftarrow",lArr:"\\Leftarrow",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",aleph:"\\aleph",and:"\\land",or:"\\lor",not:"\\neg","_|_":"\\bot",TT:"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceil","~|":"\\rceil",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail",times:"\\times",of:"\\circ",infinity:"\\infty",defint:"\\int_{#?}^{#?}",approaches:"\\to",ceil:"\\left\\lceil#?\\right\\rceil",floor:"\\left\\lfloor#?\\right\\rfloor",union:"\\cup",asterisk:"\\ast",frac:"\\frac{#?}{#?}",cbrt:"\\sqrt[3]{#?}",nthroot:"\\sqrt[#?]{#?}"};function Yt(t,e){var r;let n=(r=e?.format)!=null?r:"auto";return n==="auto"&&([n,t]=rf(t)),n==="ascii-math"?(t=t.replace(/\u2061/gu,""),t=t.replace(/\u3016/gu,"{"),t=t.replace(/\u3017/gu,"}"),t=t.replace(/([^\\])sinx/g,"$1\\sin x"),t=t.replace(/([^\\])cosx/g,"$1\\cos x "),t=t.replace(/\u2013/g,"-"),["ascii-math",Fe(t,{inlineShortcuts:e?.inlineShortcuts})]):["latex",t]}function Fe(t,e){var r;if(t=t.trim(),!t)return"";let n=(r=e.inlineShortcuts)!=null?r:za;if(t.startsWith("^")||t.startsWith("_")){let{match:c,rest:d}=ri(t.slice(1),{inlineShortcuts:n,noWrap:!0});return`${t[0]}{${c}}${Fe(d,e)}`}let a=t.match(/^(sqrt|\u221A)(.*)/);if(a){let{match:c,rest:d}=ri(a[2],{inlineShortcuts:n,noWrap:!0});return`\\sqrt{${c??"\\placeholder{}"}}${Fe(d,e)}`}if(a=t.match(/^(\\cbrt|\u221B)(.*)/),a){let{match:c,rest:d}=ri(a[2],{inlineShortcuts:n,noWrap:!0});return`\\sqrt[3]{${c??"\\placeholder{}"}}${Fe(d,e)}`}if(a=t.match(/^abs(.*)/),a){let{match:c,rest:d}=ri(a[1],{inlineShortcuts:n,noWrap:!0});return`\\left|${c??"\\placeholder{}"}\\right|${Fe(d,e)}`}if(a=t.match(/^["”“](.*?)["”“](.*)/),a)return`\\text{${a[1]}}${Fe(a[2],e)}`;if(a=t.match(/^([^a-zA-Z0-9\(\{\[\_\^\\\s"]+)(.*)/),a)return`${cm(a[1],n)}${Fe(a[2],e)}`;if(/^([fgh])[^a-zA-Z]/.test(t)){let{rest:c,match:d}=ri(t.slice(1),{inlineShortcuts:n,noWrap:!0}),m="";return t[1]==="("?m=`${t[0]}\\left(${d}\\right)`:m=t[0]+d,m+Fe(c,e)}if(a=t.match(/^([a-zA-Z]+)(.*)/),a)return cm(a[1],n)+Fe(a[2],e);let{match:s,rest:o}=ri(t,{inlineShortcuts:n,noWrap:!0});if(s&&o[0]==="/"){let c=ri(o.slice(1),{inlineShortcuts:n,noWrap:!0});if(c.match)return`\\frac{${s}}{${c.match}}${Fe(c.rest,e)}`}else return t.startsWith("(")?"\\left("+s+"\\right)"+Fe(o,e):s+Fe(o,e);return a=t.match(/^(\s+)(.*)$/),a?" "+Fe(a[2],e):t}var lm={"[":"\\lbrack","]":"\\rbrack","{":"\\lbrace","}":"\\rbrace"};function ri(t,e){var r,n;let a="";t=t.trim();let s=t,o=t.charAt(0),c={"(":")","{":"}","[":"]"}[o];if(c){let d=1,m=1;for(;m<t.length&&d>0;)t[m]===o&&d++,t[m]===c&&d--,m++;if(d===0){let y=Fe(t.substring(1,m-1),e);e.noWrap&&o==="("?a=y:a=`\\left${(r=lm[o])!=null?r:o}${y}\\right${(n=lm[c])!=null?n:c}`,s=t.slice(Math.max(0,m))}else a=t.substring(1,m),s=""}else{let d=t.match(/^([a-zA-Z]+)/);if(d){let m=Gn(null,t,e.inlineShortcuts);if(m)return m=m.replace("_{#?}",""),m=m.replace("^{#?}",""),{match:m,rest:t.slice(m.length)}}if(d=t.match(/^([a-zA-Z])/),d)return{match:d[1],rest:t.slice(1)};if(d=t.match(/^(-)?\d+(\.\d*)?/),d)return{match:d[0],rest:t.slice(d[0].length)};/^\\(left|right)/.test(t)||(d=t.match(/^(\\[a-zA-Z]+)/),d&&(s=t.slice(d[1].length),a=d[1]))}return{match:a,rest:s}}function cm(t,e){let r=Gn(null,t,e);return r?(r=r.replace("_{#?}",""),r=r.replace("^{#?}",""),r+=" "):r=t,r}var Pl=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function Ia(t){let e=t.trim();for(let r of Pl)if(e.startsWith(r[0])&&e.endsWith(r[1]))return[!0,e.substring(r[0].length,e.length-r[1].length)];return[!1,t]}function rf(t){if(t=t.trim(),t.length<=1)return["latex",t];let e;return[e,t]=Ia(t),e?["latex",t]:t.startsWith("`")&&t.endsWith("`")?(t=t.substring(1,t.length-1),["ascii-math",t]):t.includes("\\")?["latex",t]:/\$.+\$/.test(t)?["latex",`\\text{${t}}`]:[void 0,t]}var nf="$$",of="$$",um=(t,e,r)=>(Pl.some(n=>e.startsWith(n[0])&&e.endsWith(n[1]))||(e=`${nf} ${e} ${of}`),e),ji=class h6{constructor(e){h6._modes[e]=this}static onPaste(e,r,n){var a;if(!r.contentEditable&&r.userSelect==="none")return r.model.announce("plonk"),!1;if(typeof n=="string"){let o=new DataTransfer;o.setData("text/plain",n),n=o}let s=new ClipboardEvent("paste",{clipboardData:n,cancelable:!0});return(a=r.host)!=null&&a.dispatchEvent(s)?h6._modes[e].onPaste(r,n):!1}static copyToClipboard(e,r){if(!e.contentEditable&&e.userSelect==="none"){e.model.announce("plonk");return}let n=e.model,a=n.selectionIsCollapsed?[0,n.lastOffset]:le(n.selection),s=n.getValue(a,r);navigator.clipboard.writeText(s).then(()=>{},()=>e.model.announce("plonk"))}static onCopy(e,r){var n;if(!r.clipboardData)return;if(!e.contentEditable&&e.userSelect==="none"){e.model.announce("plonk");return}let a=e.model,s=a.selectionIsCollapsed?[0,a.lastOffset]:le(a.selection),o=a.getAtoms(s);if(o.every(c=>c.mode==="text"||!c.mode))r.clipboardData.setData("text/plain",o.filter(c=>c instanceof $e).map(c=>c.value).join(""));else if(o.every(c=>c.mode==="latex"))r.clipboardData.setData("text/plain",a.getAtoms(s,{includeChildren:!0}).map(c=>{var d;return(d=c.value)!=null?d:""}).join(""));else{let c;o.length===1&&o[0].verbatimLatex!==void 0?c=o[0].verbatimLatex:c=a.getValue(s,"latex-expanded"),r.clipboardData.setData("application/x-latex",c);try{r.clipboardData.setData("text/plain",e.options.onExport(e,c,s))}catch{}if(o.length===1){let d=o[0];(d.type==="root"||d.type==="group")&&(o=d.body.filter(m=>m.type!=="first"))}try{r.clipboardData.setData("application/json+mathlive",JSON.stringify(o.map(d=>d.toJson())))}catch{}if((n=window[Symbol.for("io.cortexjs.compute-engine")])!=null&&n.ComputeEngine){let d=globalThis.MathfieldElement.computeEngine;if(d)try{let m=d.jsonSerializationOptions;d.jsonSerializationOptions={metadata:["latex"]};let y=d.parse(a.getValue(s,"latex-unstyled"));d.jsonSerializationOptions=m;let A=JSON.stringify(y.json);A&&r.clipboardData.setData("application/json",A)}catch{}}}r.preventDefault()}static insert(e,r,n={}){var a;let s=n.mode==="auto"?e.mode:(a=n.mode)!=null?a:e.mode;return h6._modes[s].insert(e,r,n)}onPaste(e,r){return!1}insert(e,r,n){return!1}};ji._modes={};var V=ji,dm=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",command:"moveToNextGroup"},{key:"shift+[Tab]",command:"moveToPreviousGroup"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:["complete","accept-all"]},{key:"[Enter]",ifMode:"latex",command:["complete","accept-all"]},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"cmd+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"ctrl+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"cmd+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"ctrl+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"cmd+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+shift+v",ifMode:"math",command:["insert","\\sqrt[#0]{#1}"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleContextMenu"},{key:"alt+shift+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"shift+alt+[KeyT]",ifMode:"math",command:["switchMode","text"]},{key:"shift+alt+[KeyT]",ifMode:"text",command:["switchMode","math"]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+shift+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"alt+[Tab]",ifMode:"math",command:"addColumnAfter"},{key:"shift+alt+[Tab]",ifMode:"math",command:"addColumnBefore"},{key:"alt+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Enter]",ifMode:"math",command:"addRowBefore"},{key:"alt+[Return]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Return]",ifMode:"math",command:"addRowBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]},{key:"[Backquote]",ifLayout:["windows.german","linux.german"],ifMode:"math",command:["insert","^"]},{key:"[IntlBackslash]",ifLayout:["apple.german"],ifMode:"math",command:["insert","^"]}],mm={"\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\infty":"alt+[Digit5]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function rt(t){var e;return((e=t.element)==null?void 0:e.mathfield)===t}function af(t){var e,r;return(r=(e=t.querySelector(".ML__caret"))!=null?e:t.querySelector(".ML__text-caret"))!=null?r:t.querySelector(".ML__latex-caret")}function Ji(t){let e=af(t);if(!e)return null;let r=e.getBoundingClientRect();return{x:r.right,y:r.bottom,height:r.height}}function sf(t){var e;if(!t.parent)return"root";let r=(e=t.parent.id)!=null?e:"";return r+=typeof t.parentBranch=="string"?"-"+t.parentBranch:`-${t.parentBranch[0]}/${t.parentBranch[0]}`,r}function zl(t,e,r){if(!e)return null;let n=t.field.getBoundingClientRect(),a=e.right-e.left,s=e.bottom-e.top,o=Math.ceil(e.left-n.left+t.field.scrollLeft*r),c=Math.ceil(e.top-n.top);return{left:o,right:o+a,top:c,bottom:c+s}}function pm(t){let e=t.getBoundingClientRect(),r=parseInt(getComputedStyle(t).marginRight),n={top:e.top-1,bottom:e.bottom,left:e.left,right:e.right-1+r};if(t.children.length===0||t.tagName.toUpperCase()==="SVG")return n;for(let a of t.children)if(a.nodeType===1&&"atomId"in a.dataset&&!a.classList.contains("ML__pstrut")){let s=pm(a);n.left=Math.min(n.left,s.left),n.right=Math.max(n.right,s.right),n.top=Math.min(n.top,s.top),n.bottom=Math.max(n.bottom,s.bottom)}return n}function Ar(t,e){var r,n;if(!e.id)return null;let a=(n=(r=t.atomBoundsCache)==null?void 0:r.get(e.id))!=null?n:null;if(a!==null)return a;let s=t.field.querySelector(`[data-atom-id="${e.id}"]`);return a=s?pm(s):null,t.atomBoundsCache&&(a?t.atomBoundsCache.set(e.id,a):t.atomBoundsCache.delete(e.id)),a??null}function hm(t,e){let[r,n]=e,a=null;for(let s=r;s<=n;s++){let o=Ar(t,t.model.at(s));o&&(a?(a.top=Math.min(a.top,o.top),a.bottom=Math.max(a.bottom,o.bottom),a.left=Math.min(a.left,o.left),a.right=Math.max(a.right,o.right)):a=o)}return a??{top:0,bottom:0,left:0,right:0}}function lf(t,e,r){let n=new Map,a=t.field,s=a.offsetWidth,o=Math.floor(a.getBoundingClientRect().width)/s;o=isNaN(o)?1:o;for(let c of t.model.getAtoms(e,{includeChildren:!0})){if(r!=null&&r.excludeAtomsWithBackground&&c.style.backgroundColor)continue;let d=zl(t,Ar(t,c),o);if(d){let m=sf(c);if(n.has(m)){let y=n.get(m);n.set(m,{left:Math.min(y.left,d.left),right:Math.max(y.right,d.right),top:Math.min(y.top,d.top),bottom:Math.max(y.bottom,d.bottom)})}else n.set(m,d)}}return[...n.values()]}function Na(t,e){return t.model.selection.ranges.reduce((r,n)=>r.concat(...lf(t,n,e)),[])}function Gi(t,e){return t==="*"||e==="none"?!0:e==="same-origin"?!window.origin||t===window.origin:typeof e=="function"?e(t):!1}function Il(t){let e=0,r=0,n=t.offsetWidth,a=t.offsetHeight;for(;t instanceof HTMLElement;)e+=t.offsetTop,r+=t.offsetLeft,t=t.offsetParent;return new DOMRect(r,e,n,a)}function $a(t,e){if(!t)return;let r=t.model.at(e);if(!r)return;let n={},a=Ar(t,r);a&&(n.bounds=new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)),n.depth=r.treeDepth-2,n.style=r.style;let s=r;for(;s;){if(s.command==="\\htmlData"&&s.args&&typeof s.args[0]=="string"){let o=s.args[0].split(",");for(let c of o){let d=c.match(/([^=]+)=(.+$)/);if(d){let m=d[1].trim().replace(/ /g,"-");m&&(n.data||(n.data={}),n.data[m]=d[2])}else{let m=c.trim().replace(/ /g,"-");m&&(n.data||(n.data={}),n.data[m]=void 0)}}}(s.command==="\\htmlId"||s.command==="\\cssId")&&!n.id&&s.args&&typeof s.args[0]=="string"&&(n.id=s.args[0]),s=s.parent}return(r.mode==="math"||r.mode==="text")&&(n.latex=b.serialize([r],{defaultMode:"math"})),n}function fm(t,e){let r=t.model.at(e);for(;r;){if(r.command==="\\href"){let n=r.args[0];if(typeof n=="string")return n}r=r.parent}return""}var gm=`@keyframes ML__caret-blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}
.ML__container {
  display: inline-flex;
  flex-flow: row;
  justify-content: space-between;
  align-items: flex-end;
  min-height: 39px;
  /* Need some room for the virtual keyboard toggle */
  width: 100%;
  padding: 4px;
  box-sizing: border-box;
  /* This attribute is necessary to work around a Firefox issue where 
  where clicking multiple times on the border leads to a focused mathfield that cannot be edited until focus is lost and regained (also fixes the multiple cursor issue on firefox that can occur with the same sequence of events).
  */
  pointer-events: auto;
  /* Prevent the browser from trying to interpret touch gestures in the field */
  /* "Disabling double-tap to zoom removes the need for browsers to
        delay the generation of click events when the user taps the screen." */
  touch-action: none;
  --_caret-color: var(--caret-color, hsl(var(--_hue), 40%, 49%));
  --_selection-color: var(--selection-color, #000);
  --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 70%, 85%));
  --_text-highlight-background-color: var(--highlight-text, hsla(var(--_hue), 40%, 50%, 0.1));
  --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 40%, 95%));
  --_smart-fence-color: var(--smart-fence-color, currentColor);
  --_smart-fence-opacity: var(--smart-fence-opacity, 0.5);
  --_contains-highlight-color: var(--contains-highlight-color, var(--_caret-color));
  --_latex-color: var(--latex-color, hsl(var(--_hue), 80%, 40%));
  --_correct-color: var(--correct-color, #10a000);
  --_incorrect-color: var(--incorrect-color, #a01b00);
  --_composition-background-color: var(--composition-background-color, #fff1c2);
  --_composition-text-color: var(--composition-text-color, black);
  --_composition-underline-color: var(--composition-underline-color, transparent);
  --_tooltip-border: var(--tooltip-border, 1px solid transparent);
  --_tooltip-border-radius: var(--tooltip-border-radius, 8px);
  --_tooltip-background-color: var(--tooltip-background-color, #616161);
  --_tooltip-color: var(--tooltip-color, #fff);
  --_tooltip-box-shadow: var(--tooltip-box-shadow, 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2));
}
@media (prefers-color-scheme: dark) {
  .ML__container {
    --_contains-highlight-color: var(--contains-highlight-color, hsl(var(--_hue), 85%, 75%));
    --_caret-color: var(--caret-color, hsl(var(--_hue), 65%, 55%));
    --_selection-color: var(--selection-color, #fff);
    --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 65%, 55%));
    --_text-highlight-background-color: var(--text-highlight-background-color, hsla(var(--_hue), 40%, 50%, 0.6));
    --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 5%, 34%));
    --_latex-color: var(--primary, hsl(var(--_hue), 40%, 50%));
    --_composition-background-color: #69571c;
    --_composition-text-color: white;
    --_placeholder-color: hsl(var(--_hue), 60%, 69%);
    --_smart-fence-color: var(--smart-fence-color, #fff);
    --_smart-fence-opacity: var(--smart-fence-opacity, 0.7);
  }
}
@media (forced-colors: active) {
  .ML__container {
    --_caret-color: white;
    --_selection-color: white;
    --_smart-fence-color: white;
    --_latex-color: white;
    --_correct-color: white;
    --_incorrect-color: white;
    --_composition-text-color: white;
  }
}
@media (hover: none) and (pointer: coarse) {
  :host(:not(:focus)) .ML__container {
    pointer-events: none;
  }
}
/* This is the actual field content (formula) */
.ML__content {
  display: flex;
  align-items: center;
  align-self: center;
  position: relative;
  overflow: hidden;
  padding: 2px 3px 2px 1px;
  width: 100%;
  /* Encourage the browser to use the GPU to render the field.
     Weirdly, this is required for prompts to be rendered correctly. 
   */
  isolation: isolate;
  text-shadow: var(--text-shadow);
}
.ML__content .ML__latex {
  text-shadow: var(--text-shadow);
}
.ML__content .ML__sqrt-line {
  box-shadow: var(--text-shadow);
}
.ML__content .ML__frac-line {
  box-shadow: var(--text-shadow);
}
.ML__virtual-keyboard-toggle,
.ML__menu-toggle {
  box-sizing: border-box;
  display: flex;
  align-self: center;
  align-items: center;
  flex-shrink: 0;
  flex-direction: column;
  justify-content: center;
  width: 34px;
  height: 34px;
  padding: 0;
  margin-right: 4px;
  cursor: pointer;
  /* Avoid some weird blinking with :hover */
  border-radius: 8px;
  border: 1px solid transparent;
  transition: background 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  color: hsl(var(--_hue), 40%, 50%);
  fill: currentColor;
  background: transparent;
}
.ML__virtual-keyboard-toggle:hover,
.ML__menu-toggle:hover {
  background: hsla(0, 0%, 70%, 0.3);
  color: #333;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle > span,
.ML__menu-toggle > span {
  display: flex;
  align-self: center;
  align-items: center;
}
@media (pointer: coarse) {
  .ML__virtual-keyboard-toggle,
  .ML__menu-toggle {
    min-width: 60px;
    min-height: 60px;
  }
}
/* The invisible element used to capture keyboard events. We're just trying
 really hard to make sure it doesn't show. */
.ML__keyboard-sink {
  display: inline-block;
  resize: none;
  outline: none;
  border: none;
  /* Need these for Microsoft Edge */
  position: fixed;
  clip: rect(0 0 0 0);
  /* Need this to prevent iOS Safari from auto-zooming */
  font-size: 1em;
  font-family: KaTeX_Main;
  line-height: 0.5;
  /* On Chromium, if this is 0, no keyboard events are received */
  /* Preferred over clip */
  clip-path: inset(50%);
}
[part='placeholder'] {
  color: var(--neutral-400);
}
.ML__composition {
  background: var(--_composition-background-color);
  color: var(--_composition-text-color);
  text-decoration: underline var(--_composition-underline-color);
}
.ML__caret {
  display: inline-block;
}
.ML__caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__text-caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__latex-caret::after {
  content: '';
  visibility: hidden;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_latex-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.019em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__focused .ML__latex-caret::after,
.ML__focused .ML__text-caret::after,
.ML__focused .ML__caret::after {
  visibility: visible;
}
.ML__focused .ML__text {
  background: var(--_text-highlight-background-color);
}
/* When using smartFence, the anticipated closing fence is displayed
with this style */
.ML__smart-fence__close {
  opacity: var(--_smart-fence-opacity);
  color: var(--_smart-fence-color);
}
.ML__focused .ML__selected,
.ML__focused .ML__selected .ML__contains-caret,
.ML__focused .ML__selected .ML__smart-fence__close,
.ML__focused .ML__selected .ML__placeholder {
  color: var(--_selection-color);
  opacity: 1;
}
.ML__selection {
  box-sizing: border-box;
  background: transparent;
}
:host(:focus) .ML__selection {
  background: var(--_selection-background-color) !important;
}
.ML__contains-caret.ML__close,
.ML__contains-caret.ML__open,
.ML__contains-caret > .ML__close,
.ML__contains-caret > .ML__open,
.ML__contains-caret .ML__sqrt-sign,
.ML__contains-caret .ML__sqrt-line {
  color: var(--_contains-highlight-color);
}
.ML__contains-highlight {
  box-sizing: border-box;
  background: transparent;
}
.ML__focused .ML__contains-highlight {
  background: var(--_contains-highlight-background-color);
}
.ML__raw-latex {
  font-family: 'Berkeley Mono', 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  font-weight: 400;
  font-size: 0.8em;
  letter-spacing: -0.05em;
  color: var(--_latex-color);
}
.ML__suggestion {
  color: var(--neutral-500);
}
.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle.is-pressed,
.ML__virtual-keyboard-toggle.is-active:hover,
.ML__virtual-keyboard-toggle.is-active {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
/* Add an attribute 'data-tooltip' to automatically show a
   tooltip over a element on hover.
*/
[data-tooltip] {
  position: relative;
}
[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  display: block;
  z-index: 2;
  pointer-events: none;
  right: auto;
  top: calc(-100% - 4px);
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  border-radius: 4px;
  background: #616161;
  color: #fff;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  text-align: center;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-style: normal;
  font-weight: 400;
  font-size: 13px;
  /* Phone */
  opacity: 0;
  transform: scale(0.5);
}
@media only screen and (max-width: 767px) {
  [data-tooltip]::after {
    padding: 8px 16px;
    font-size: 16px;
  }
}
menu [data-tooltip]::after {
  left: 100%;
  top: 0%;
}
menu .ML__base {
  cursor: default;
}
/** Don't display if we're tracking, i.e. have the pointer down */
.tracking [data-tooltip]:hover::after {
  /* Use visibility, not display. Display will remove the after from the DOM, and the override below will not work */
  visibility: hidden;
}
/** But do display if tracking and inside a menu */
.tracking menu li[data-tooltip]:hover::after,
[data-tooltip]:hover::after {
  visibility: visible;
  opacity: 1;
  transform: scale(1);
  transition-property: opacity, scale;
  transition-duration: 0.15s;
  transition-delay: 1s;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__prompt {
  border-radius: 2px;
}
.ML__editablePromptBox {
  outline: 1px solid #acacac;
  border-radius: 2px;
  z-index: -1;
}
.ML__focused .ML__focusedPromptBox {
  outline: highlight auto 1px;
}
.ML__lockedPromptBox {
  background-color: rgba(142, 142, 141, 0.4);
  z-index: -1;
}
.ML__correctPromptBox {
  outline: 1px solid var(--_correct-color);
  box-shadow: 0 0 5px var(--_correct-color);
}
.ML__incorrectPromptBox {
  outline: 1px solid var(--_incorrect-color);
  box-shadow: 0 0 5px var(--_incorrect-color);
}
.variant-submenu {
  display: flex;
  flex-direction: column;
  padding: 8px;
}
.variant-submenu [part='menu-item'].ML__xl {
  font-size: 2rem;
  text-align: center;
  margin: 0;
}
.ML__center-menu .label {
  text-align: center;
}
.insert-matrix-submenu {
  /* Grid doesn't work on Safari */
  --_menu-item-size: 25px;
  width: calc(5 * var(--_menu-item-size));
  display: flex;
  flex-wrap: wrap;
  padding: 8px;
  align-content: center;
  justify-content: center;
}
.insert-matrix-submenu [part='menu-item'] {
  width: var(--_menu-item-size);
  height: var(--_menu-item-size);
  font-size: 21px;
  border: none;
  border-radius: 0;
  line-height: 21px;
  text-align: center;
  padding: 0;
  margin: 0;
}
.border-submenu [part='menu-item'] {
  font-size: 2rem;
  line-height: 1.2;
  text-align: center;
}
.swatches-submenu {
  --_swatch-size: 2rem;
  --_columns: 4;
  display: flex;
  flex-flow: wrap;
  padding: 8px;
  max-width: calc(var(--_columns) * (var(--_swatch-size) + 18px) + 16px);
  box-sizing: border-box;
}
.menu-swatch {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: fit-content;
  height: fit-content;
  margin: 2px;
  padding: 0;
  background: var(--neutral-200);
}
.menu-swatch > .label {
  padding: 0;
  margin: 0;
  line-height: 0;
}
.menu-swatch > .label > span {
  display: inline-block;
  margin: 6px;
  min-width: var(--_swatch-size);
  min-height: var(--_swatch-size);
  border-radius: 50%;
}
.menu-swatch.active {
  background: var(--neutral-100);
  scale: 1.4;
}
.menu-swatch.active > .label > span {
  border-radius: 2px;
}
.menu-swatch .ui-checkmark,
.menu-swatch .ui-mixedmark {
  position: absolute;
  margin: 0;
  padding: 0;
  color: white;
}
.menu-swatch.dark-contrast .ui-checkmark,
.menu-swatch.dark-contrast .ui-mixedmark {
  color: #000;
}
.ML__insert-template {
  font-size: 1em;
}
.ML__insert-label {
  opacity: 0.5;
  margin-left: 2ex;
}
`,bm=`.ML__container {
  min-height: auto !important;
  --_hue: var(--hue, 212);
  --_placeholder-color: var(--placeholder-color, hsl(var(--_hue), 40%, 49%));
  --_placeholder-opacity: var(--placeholder-opacity, 0.4);
  --_text-font-family: var(--text-font-family, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif);
}
.ML__sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}
.ML__is-inline {
  display: inline-block;
}
.ML__base {
  visibility: inherit;
  display: inline-block;
  position: relative;
  cursor: text;
  padding: 0;
  margin: 0;
  box-sizing: content-box;
  border: 0;
  outline: 0;
  vertical-align: baseline;
  font-weight: inherit;
  font-family: inherit;
  font-style: inherit;
  text-decoration: none;
  width: min-content;
}
.ML__strut,
.ML__strut--bottom {
  display: inline-block;
  min-height: 0.5em;
}
.ML__small-delim {
  font-family: KaTeX_Main;
}
/* Text mode */
.ML__text {
  font-family: var(--_text-font-family);
  white-space: pre;
}
/* Use cmr for 'math upright' */
.ML__cmr {
  font-family: KaTeX_Main;
  font-style: normal;
}
.ML__mathit {
  font-family: KaTeX_Math;
  /* The KaTeX_Math font is italic by default, so the font-style below is only 
     useful when a fallback font is used
  */
  font-style: italic;
}
.ML__mathbf {
  font-family: KaTeX_Main;
  font-weight: bold;
}
/* Lowercase greek symbols should stick to math font when \\mathbf is applied 
   to match TeX idiosyncratic behavior */
.lcGreek.ML__mathbf {
  font-family: KaTeX_Math;
}
.ML__mathbfit {
  font-family: KaTeX_Math;
  font-weight: bold;
  font-style: italic;
}
.ML__ams {
  font-family: KaTeX_AMS;
}
/* Blackboard */
.ML__bb {
  font-family: KaTeX_AMS;
}
.ML__cal {
  font-family: KaTeX_Caligraphic;
}
.ML__frak {
  font-family: KaTeX_Fraktur;
}
.ML__tt {
  font-family: KaTeX_Typewriter;
}
.ML__script {
  font-family: KaTeX_Script;
}
.ML__sans {
  font-family: KaTeX_SansSerif;
}
.ML__series_ul {
  font-weight: 100;
}
.ML__series_el {
  font-weight: 100;
}
.ML__series_l {
  font-weight: 200;
}
.ML__series_sl {
  font-weight: 300;
}
.ML__series_sb {
  font-weight: 500;
}
.ML__bold {
  font-weight: 700;
}
.ML__series_eb {
  font-weight: 800;
}
.ML__series_ub {
  font-weight: 900;
}
.ML__series_uc {
  font-stretch: ultra-condensed;
}
.ML__series_ec {
  font-stretch: extra-condensed;
}
.ML__series_c {
  font-stretch: condensed;
}
.ML__series_sc {
  font-stretch: semi-condensed;
}
.ML__series_sx {
  font-stretch: semi-expanded;
}
.ML__series_x {
  font-stretch: expanded;
}
.ML__series_ex {
  font-stretch: extra-expanded;
}
.ML__series_ux {
  font-stretch: ultra-expanded;
}
.ML__it {
  font-style: italic;
}
.ML__shape_ol {
  -webkit-text-stroke: 1px black;
  text-stroke: 1px black;
  color: transparent;
}
.ML__shape_sc {
  font-variant: small-caps;
}
.ML__shape_sl {
  font-style: oblique;
}
/* First level emphasis */
.ML__emph {
  color: #bc2612;
}
/* Second level emphasis */
.ML__emph .ML__emph {
  color: #0c7f99;
}
.ML__highlight {
  color: #007cb2;
  background: #edd1b0;
}
.ML__center {
  text-align: center;
}
.ML__left {
  text-align: left;
}
.ML__right {
  text-align: right;
}
.ML__label_padding {
  padding: 0 0.5em;
}
.ML__frac-line {
  width: 100%;
  min-height: 1px;
}
.ML__frac-line:after {
  content: '';
  display: block;
  margin-top: max(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  /* There's a bug since Chrome 62 where 
      sub-pixel border lines don't draw at some zoom 
      levels (110%, 90%). 
      Setting the min-height used to work around it, but that workaround
      broke in Chrome 84 or so.
      Setting the background (and the min-height) seems to work for now.
      */
  background: currentColor;
  box-sizing: content-box;
  /* Vuetify sets the box-sizing to inherit 
            causes the fraction line to not draw at all sizes (see #26) */
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
  forced-color-adjust: preserve-parent-color;
}
@media (forced-colors: active) {
  .ML__frac-line {
    min-height: 0px;
  }
}
.ML__sqrt {
  display: inline-block;
}
.ML__sqrt-sign {
  display: inline-block;
  position: relative;
}
.ML__sqrt-line {
  display: inline-block;
  height: max(1px, 0.04em);
  width: 100%;
}
.ML__sqrt-line:before {
  content: '';
  display: block;
  margin-top: min(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  background: currentColor;
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
  forced-color-adjust: preserve-parent-color;
}
@media (forced-colors: active) {
  .ML__sqrt-line:after {
    background: white !important;
  }
}
.ML__sqrt-line:after {
  border-bottom-width: 1px;
  content: ' ';
  display: block;
  margin-top: -0.1em;
}
.ML__sqrt-index {
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}
.ML__delim-size1 {
  font-family: KaTeX_Size1;
}
.ML__delim-size2 {
  font-family: KaTeX_Size2;
}
.ML__delim-size3 {
  font-family: KaTeX_Size3;
}
.ML__delim-size4 {
  font-family: KaTeX_Size4;
}
.ML__delim-mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}
.ML__delim-mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}
.ML__accent-body {
  font-family: KaTeX_Main;
}
.ML__accent-combining-char {
  position: relative;
  left: 0.24em;
}
/** The markup for a LaTeX formula, either in an editable mathfield or 
    in a static display.
*/
.ML__latex {
  display: inline-block;
  direction: ltr;
  text-align: left;
  text-indent: 0;
  text-rendering: auto;
  font-family: inherit;
  font-style: normal;
  font-size-adjust: none;
  font-stretch: normal;
  font-variant-caps: normal;
  letter-spacing: normal;
  line-height: 1.2;
  word-wrap: normal;
  word-spacing: normal;
  white-space: nowrap;
  text-shadow: none;
  -webkit-user-select: none;
  user-select: none;
  width: min-content;
  forced-color-adjust: preserve-parent-color;
}
.ML__latex .style-wrap {
  position: relative;
}
.ML__latex .ML__mfrac {
  display: inline-block;
}
.ML__latex .ML__left-right {
  display: inline-block;
}
.ML__latex .ML__vlist-t {
  display: inline-table;
  table-layout: fixed;
  border-collapse: collapse;
}
.ML__latex .ML__vlist-r {
  display: table-row;
}
.ML__latex .ML__vlist {
  display: table-cell;
  vertical-align: bottom;
  position: relative;
}
.ML__latex .ML__vlist > span {
  display: block;
  height: 0;
  position: relative;
}
.ML__latex .ML__vlist > span > span {
  display: inline-block;
}
.ML__latex .ML__vlist > span > .ML__pstrut {
  overflow: hidden;
  width: 0;
}
.ML__latex .ML__vlist-t2 {
  margin-right: -2px;
}
.ML__latex .ML__vlist-s {
  display: table-cell;
  vertical-align: bottom;
  font-size: 1px;
  width: 2px;
  min-width: 2px;
}
.ML__latex .ML__msubsup {
  text-align: left;
}
.ML__latex .ML__negativethinspace {
  display: inline-block;
  margin-left: -0.16667em;
  height: 0.71em;
}
.ML__latex .ML__thinspace {
  display: inline-block;
  width: 0.16667em;
  height: 0.71em;
}
.ML__latex .ML__mediumspace {
  display: inline-block;
  width: 0.22222em;
  height: 0.71em;
}
.ML__latex .ML__thickspace {
  display: inline-block;
  width: 0.27778em;
  height: 0.71em;
}
.ML__latex .ML__enspace {
  display: inline-block;
  width: 0.5em;
  height: 0.71em;
}
.ML__latex .ML__quad {
  display: inline-block;
  width: 1em;
  height: 0.71em;
}
.ML__latex .ML__qquad {
  display: inline-block;
  width: 2em;
  height: 0.71em;
}
.ML__latex .ML__llap,
.ML__latex .ML__rlap {
  width: 0;
  position: relative;
  display: inline-block;
}
.ML__latex .ML__llap > .ML__inner,
.ML__latex .ML__rlap > .ML__inner {
  position: absolute;
}
.ML__latex .ML__llap > .ML__fix,
.ML__latex .ML__rlap > .ML__fix {
  display: inline-block;
}
.ML__latex .ML__llap > .ML__inner {
  right: 0;
}
.ML__latex .ML__rlap > .ML__inner {
  left: 0;
}
.ML__latex .ML__rule {
  display: inline-block;
  border: solid 0;
  position: relative;
  box-sizing: border-box;
}
.ML__latex .overline .overline-line,
.ML__latex .underline .underline-line {
  width: 100%;
}
.ML__latex .overline .overline-line:before,
.ML__latex .underline .underline-line:before {
  content: '';
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  display: block;
}
.ML__latex .overline .overline-line:after,
.ML__latex .underline .underline-line:after {
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  content: '';
  display: block;
  margin-top: -1px;
}
.ML__latex .ML__stretchy {
  display: block;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__latex .ML__stretchy:before,
.ML__latex .ML__stretchy:after {
  content: '';
}
.ML__latex .ML__stretchy svg {
  display: block;
  position: absolute;
  width: 100%;
  height: inherit;
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
}
.ML__latex .slice-1-of-2 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__latex .slice-2-of-2 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__latex .slice-1-of-3 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__latex .slice-2-of-3 {
  display: inline-flex;
  position: absolute;
  left: 25%;
  width: 50%;
  overflow: hidden;
}
.ML__latex .slice-3-of-3 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__latex .slice-1-of-1 {
  display: inline-flex;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__latex .ML__nulldelimiter {
  display: inline-block;
}
.ML__latex .ML__op-group {
  display: inline-block;
}
.ML__latex .ML__op-symbol {
  position: relative;
}
.ML__latex .ML__op-symbol.ML__small-op {
  font-family: KaTeX_Size1;
}
.ML__latex .ML__op-symbol.ML__large-op {
  font-family: KaTeX_Size2;
}
.ML__latex:has(.ML__center_environment),
.ML__latex:has(.ML__multiline_environment),
.ML__latex:has(.ML__align_environment),
.ML__latex:has(.ML__eqnarray_environment),
.ML__latex:has(.ML__gather_environment) {
  width: 100%;
}
.ML__latex .ML__multiline_environment {
  display: inline-flex;
  width: 100%;
}
.ML__latex .ML__center_environment {
  display: inline-flex;
  width: 100%;
  justify-content: center;
}
.ML__latex .ML__align_environment,
.ML__latex .ML__eqnarray_environment,
.ML__latex .ML__gather_environment {
  display: inline-block;
}
.ML__latex .ML__mtable .ML__vertical-separator {
  display: inline-block;
  min-width: 1px;
  box-sizing: border-box;
}
.ML__latex .ML__mtable .ML__arraycolsep {
  display: inline-block;
}
.ML__latex .ML__mtable .col-align-m > .ML__vlist-t {
  text-align: center;
}
.ML__latex .ML__mtable .col-align-c > .ML__vlist-t {
  text-align: center;
}
.ML__latex .ML__mtable .col-align-l > .ML__vlist-t {
  text-align: left;
}
.ML__latex .ML__mtable .col-align-r > .ML__vlist-t {
  text-align: right;
}
[data-href] {
  cursor: pointer;
}
.ML__error {
  display: inline-block;
  background-image: radial-gradient(ellipse at center, hsl(341, 100%, 40%), rgba(0, 0, 0, 0) 70%);
  background-color: hsla(341, 100%, 40%, 0.1);
  background-repeat: repeat-x;
  background-size: 3px 3px;
  padding-bottom: 3px;
  background-position: 0 100%;
}
.ML__error > .ML__error {
  background: transparent;
  padding: 0;
}
.ML__placeholder {
  color: var(--_placeholder-color);
  opacity: var(--_placeholder-opacity);
  padding-left: 0.4ex;
  padding-right: 0.4ex;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
}
.ML__notation {
  position: absolute;
  box-sizing: border-box;
  line-height: 0;
}
/* This class is used to implement the \`\\mathtip\` and \`\\texttip\` commands
   For UI elements, see \`[data-ML__tooltip]\`
*/
.ML__tooltip-container {
  position: relative;
  transform: scale(0);
}
.ML__tooltip-container .ML__tooltip-content {
  position: fixed;
  display: inline-table;
  visibility: hidden;
  z-index: 2;
  width: max-content;
  max-width: 400px;
  padding: 12px 12px;
  border: var(--tooltip-border);
  border-radius: var(--tooltip-border-radius);
  background: var(--tooltip-background-color);
  --_selection-color: var(--tooltip-color);
  color: var(--tooltip-color);
  box-shadow: var(--tooltip-box-shadow);
  opacity: 0;
  transition: opacity 0.15s cubic-bezier(0.4, 0, 1, 1);
}
.ML__tooltip-container .ML__tooltip-content .ML__text {
  white-space: normal;
}
.ML__tooltip-container .ML__tooltip-content .ML__base {
  display: contents;
}
.ML__tooltip-container:hover .ML__tooltip-content {
  visibility: visible;
  opacity: 1;
  font-size: 0.75em;
  transform: scale(1) translate(0, 3em);
}
`,ym=`#mathlive-environment-popover.is-visible {
  visibility: visible;
}
#mathlive-environment-popover {
  --_environment-panel-height: var(--environment-panel-height, 70px);
  --_accent-color: var(--accent-color, #aaa);
  --_background: var(--environment-panel-background, #fff);
  --_button-background: var(--environment-panel-button-background, white);
  --_button-background-hover: var(--environment-panel-button-background-hover, #f5f5f7);
  --_button-background-active: var(--environment-panel-button-background-active, #f5f5f7);
  --_button-text: var(--environment-panel-button-text, #e3e4e8);
  position: absolute;
  width: calc(var(--_environment-panel-height) * 2);
  height: var(--_environment-panel-height);
  border-radius: 4px;
  border: 1.5px solid var(--_accent-color);
  background-color: var(--_background);
  box-shadow: 0 0 30px 0 var(--environment-shadow, rgba(0, 0, 0, 0.4));
  pointer-events: all;
  visibility: hidden;
}
#mathlive-environment-popover .MLEP__array-buttons {
  height: calc(var(--_environment-panel-height) * 5/4);
  width: calc(var(--_environment-panel-height) * 5/4);
  margin-left: calc(0px - var(--_environment-panel-height) * 0.16);
  margin-top: calc(0px - var(--_environment-panel-height) * 0.19);
}
#mathlive-environment-popover .MLEP__array-buttons .font {
  fill: white;
}
#mathlive-environment-popover .MLEP__array-buttons circle {
  fill: #7f7f7f;
  transition: fill 300ms;
}
#mathlive-environment-popover .MLEP__array-buttons .MLEP__array-insert-background {
  fill-opacity: 1;
  fill: var(--_background);
  stroke: var(--_accent-color);
  stroke-width: 3px;
}
#mathlive-environment-popover .MLEP__array-buttons line {
  stroke: var(--_accent-color);
  stroke-opacity: 0;
  stroke-width: 40;
  pointer-events: none;
  transition: stroke-opacity 300ms;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover circle {
  fill: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover line {
  stroke-opacity: 1;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls {
  height: 100%;
  width: 50%;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options {
  width: var(--_environment-panel-height);
  height: var(--_environment-panel-height);
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  justify-content: space-around;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg {
  pointer-events: all;
  margin-top: 2px;
  width: calc(var(--_environment-panel-height) / 3 * 28 / 24);
  height: calc(var(--_environment-panel-height) / 3 - 2px);
  border-radius: calc(var(--_environment-panel-height) / 25);
  background-color: var(--_button-background);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg:hover {
  background-color: var(--_button-background-hover);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg line {
  stroke: var(--_button-text);
  stroke-width: 2;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg rect,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path {
  fill-opacity: 0;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active {
  pointer-events: none;
  background-color: var(--_button-background-active);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active line {
  stroke: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active circle {
  fill: var(--_accent-color);
}
`,xm=`/* The element that display info while in latex mode */
#mathlive-suggestion-popover {
  --_suggestion-zindex: var(--suggestion-zindex, 100);
  background-color: rgba(97, 97, 97);
  color: #fff;
  text-align: center;
  border-radius: 8px;
  position: fixed;
  z-index: var(--_suggestion-zindex);
  display: none;
  flex-direction: column;
  justify-content: center;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
}
#mathlive-suggestion-popover.top-tip::after {
  content: '';
  position: absolute;
  top: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-bottom: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.bottom-tip::after {
  content: '';
  position: absolute;
  bottom: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-top: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.is-animated {
  transition: all 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  animation: ML__fade-in cubic-bezier(0, 0, 0.2, 1) 0.15s;
}
#mathlive-suggestion-popover.is-visible {
  display: flex;
}
@keyframes ML__fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
/* The wrapper class for the entire content of the popover panel */
#mathlive-suggestion-popover ul {
  display: flex;
  flex-flow: column;
  list-style: none;
  margin: 0;
  padding: 0;
  align-items: flex-start;
  max-height: 400px;
  overflow-y: auto;
}
#mathlive-suggestion-popover li {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  margin: 8px;
  padding: 8px;
  width: calc(100% - 16px - 16px);
  column-gap: 1em;
  border-radius: 8px;
  cursor: pointer;
  /* Since the content can be clicked on, provide feedback on hover */
}
#mathlive-suggestion-popover li a {
  color: #5ea6fd;
  padding-top: 0.3em;
  margin-top: 0.4em;
  display: block;
}
#mathlive-suggestion-popover li a:hover {
  color: #5ea6fd;
  text-decoration: underline;
}
#mathlive-suggestion-popover li:hover,
#mathlive-suggestion-popover li.is-pressed,
#mathlive-suggestion-popover li.is-active {
  background: rgba(255, 255, 255, 0.1);
}
/* The command inside a popover (inside a #mathlive-suggestion-popover) */
.ML__popover__command {
  font-size: 1.6rem;
  font-family: KaTeX_Main;
}
.ML__popover__current {
  background: #5ea6fd;
  color: #fff;
}
.ML__popover__latex {
  font-family: 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  align-self: center;
}
/* The keyboard shortcuts for a symbol as displayed in the popover */
.ML__popover__keybinding {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 0.8em;
  opacity: 0.7;
}
/* Style for the character that joins the modifiers of a keyboard shortcut 
(usually a "+" sign)*/
.ML__shortcut-join {
  opacity: 0.5;
}
`,vm=`/* The element that displays the keys as the user type them */
#mathlive-keystroke-caption-panel {
  visibility: hidden;
  /*min-width: 160px;*/
  /*background-color: rgba(97, 97, 200, .95);*/
  background: var(--secondary, hsl(var(--_hue), 19%, 26%));
  border-color: var(--secondary-border, hsl(0, 0%, 91%));
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
  text-align: center;
  border-radius: 6px;
  padding: 16px;
  position: absolute;
  z-index: 1;
  display: flex;
  flex-direction: row-reverse;
  justify-content: center;
  --keystroke: white;
  --on-keystroke: #555;
  --keystroke-border: #f7f7f7;
}
@media (prefers-color-scheme: dark) {
  body:not([theme='light']) #mathlive-keystroke-caption-panel {
    --keystroke: hsl(var(--_hue), 50%, 30%);
    --on-keystroke: hsl(0, 0%, 98%);
    --keystroke-border: hsl(var(--_hue), 50%, 25%);
  }
}
body[theme='dark'] #mathlive-keystroke-caption-panel {
  --keystroke: hsl(var(--_hue), 50%, 30%);
  --on-keystroke: hsl(0, 0%, 98%);
  --keystroke-border: hsl(var(--_hue), 50%, 25%);
}
#mathlive-keystroke-caption-panel > span {
  min-width: 14px;
  /*height: 8px;*/
  margin: 0 8px 0 0;
  padding: 4px;
  background-color: var(--keystroke);
  color: var(--on-keystroke);
  fill: currentColor;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 1em;
  border-radius: 6px;
  border: 2px solid var(--keystroke-border);
  /*box-shadow: 0 7px 14px rgba(0,0,0,0.25), 0 5px 5px rgba(0,0,0,0.22);*/
}
`,_m=`.ML__keyboard {
  --_keyboard-height: 0;
  --_keyboard-zindex: var(--keyboard-zindex, 105);
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_padding-horizontal: var(--keyboard-padding-horizontal, 0px);
  --_padding-top: var(--keyboard-padding-top, 5px);
  --_padding-bottom: var(--keyboard-padding-bottom, 0px);
  --_row-padding-left: var(--keyboard-row-padding-left, 0px);
  --_row-padding-right: var(--keyboard-row-padding-right, 0px);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-text-active: var(--keyboard-toolbar-text-active, var(--_accent-color));
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_toolbar-font-size: var(--keyboard-toolbar-font-size, '135%');
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, #f0f0f0);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-primary-background: var(--keycap-primary-background, var(--_accent-color));
  --_keycap-primary-text: var(--keycap-primary-text, #ddd);
  --_keycap-primary-background-hover: var(--keycap-primary-background-hover, #0d80f2);
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_keycap-height: var(--keycap-height, 60px);
  /* Keycap width (incl. margin) */
  --_keycap-max-width: var(--keycap-max-width, 100px);
  --_keycap-gap: var(--keycap-gap, 8px);
  --_keycap-font-size: var(--keycap-font-size, clamp(16px, 4cqw, 24px));
  --_keycap-small-font-size: var(--keycap-small-font-size, calc(var(--keycap-font-size) * 0.8));
  --_keycap-extra-small-font-size: var(--keycap-extra-small-font-size, calc(var(--keycap-font-size) / 1.42));
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-text, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
  --_variant-keycap-length: var(--variant-keycap-length, 70px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 30px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 12px);
  --_keycap-shift-font-size: var(--keycap-shift-font-size, 16px);
  --_keycap-shift-color: var(--keycap-shift-color, var(--_accent-color));
  --_box-placeholder-color: var(--box-placeholder-color, var(--_accent-color));
  --_box-placeholder-pressed-color: var(--box-placeholder-pressed-color, var(--keycap-text-pressed));
  --_keycap-glyph-size: var(--keycap-glyph-size, 20px);
  --_keycap-glyph-size-lg: var(--keycap-glyph-size-lg, 24px);
  --_keycap-glyph-size-xl: var(--keycap-glyph-size-xl, 50px);
}
.is-math-mode .MLK__rows .if-text-mode,
.is-text-mode .MLK__rows .if-math-mode {
  display: none;
}
.if-can-undo,
.if-can-redo,
.if-can-copy,
.if-can-cut,
.if-can-paste {
  opacity: 0.4;
  pointer-events: none;
}
.can-undo .if-can-undo,
.can-redo .if-can-redo,
.can-copy .if-can-copy,
.can-cut .if-can-cut,
.can-paste .if-can-paste {
  opacity: 1;
  pointer-events: all;
}
body > .ML__keyboard {
  position: fixed;
  --_padding-bottom: calc(var(--keyboard-padding-bottom, 0px) + env(safe-area-inset-bottom, 0));
}
body > .ML__keyboard.is-visible > .MLK__backdrop {
  box-shadow: 0 -5px 6px rgba(0, 0, 0, 0.08);
  border-top: 1px solid var(--_border);
}
body > .ML__keyboard.backdrop-is-transparent.is-visible > .MLK__backdrop {
  box-shadow: none;
  border: none;
}
body > .ML__keyboard.is-visible.animate > .MLK__backdrop {
  transition: 0.28s cubic-bezier(0, 0, 0.2, 1);
  transition-property: transform, opacity;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__keyboard {
  position: relative;
  overflow: hidden;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  z-index: var(--_keyboard-zindex);
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  opacity: 1;
  transform: none;
  pointer-events: none;
}
.ML__keyboard :where(div) {
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  transform: none;
}
.MLK__backdrop {
  position: absolute;
  bottom: calc(-1 * var(--_keyboard-height));
  width: 100%;
  height: var(--_keyboard-height);
  box-sizing: border-box;
  padding-top: var(--_padding-top);
  padding-bottom: var(--_padding-bottom);
  padding-left: var(--_padding-horizontal);
  padding-right: var(--_padding-horizontal);
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0);
  background: var(--_background);
}
.backdrop-is-transparent .MLK__backdrop {
  background: transparent;
}
/* If a custom layout has a custom container/backdrop
  (backdrop-is-transparent), make sure to let pointer event go through. */
.backdrop-is-transparent .MLK__plate {
  background: transparent;
  pointer-events: none;
}
/* If a custom layout has a custom container/backdrop, make sure to 
   allow pointer events on it. */
.backdrop-is-transparent .MLK__layer > div > div {
  pointer-events: all;
}
.ML__keyboard.is-visible > .MLK__backdrop {
  transform: translate(0, calc(-1 * var(--_keyboard-height)));
  opacity: 1;
  visibility: visible;
}
.caps-lock-indicator {
  display: none;
  width: 8px;
  height: 8px;
  background: #0cbc0c;
  box-shadow: inset 0 0 4px 0 #13ca13, 0 0 4px 0 #a9ef48;
  border-radius: 8px;
  right: 8px;
  top: 8px;
  position: absolute;
}
.ML__keyboard.is-caps-lock .caps-lock-indicator {
  display: block;
}
.ML__keyboard.is-caps-lock .shift {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
}
.MLK__plate {
  position: absolute;
  top: var(--_padding-top);
  left: var(--_padding-horizontal);
  width: calc(100% - 2 * var(--_padding-horizontal));
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  container-type: inline-size;
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
  pointer-events: all;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 16px;
  /* Size of toolbar labels */
  font-weight: 400;
  text-shadow: none;
}
.ML__box-placeholder {
  color: var(--_box-placeholder-color);
}
.MLK__tex {
  font-family: KaTeX_Main, KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__tex-math {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
  font-style: italic;
}
.MLK__layer {
  display: none;
  outline: none;
}
.MLK__layer.is-visible {
  display: flex;
  flex-flow: column;
}
/* Keyboard layouts are made or rows of keys... */
.MLK__rows {
  --_keycap-width: var(--keycap-width, min(var(--_keycap-max-width), 10cqw));
  display: flex;
  flex-flow: column;
  align-items: center;
  border-collapse: separate;
  clear: both;
  border: 0;
  margin: 0;
  margin-bottom: var(--_keycap-gap);
  gap: var(--_keycap-gap);
  /* If the styling include, e.g., some shadows, they will be
  cut off by the overflow. In that case, set the padding to 
  compensate. */
  padding-left: var(--_row-padding-left);
  padding-right: var(--_row-padding-right);
  overflow: visible;
  touch-action: none;
}
.MLK__rows > .MLK__row {
  display: flex;
  flex-flow: row;
  justify-content: center;
  width: 100%;
  gap: var(--_keycap-gap);
  margin: 0;
  padding: 0;
  /* For the alignment of the text on some modifiers (e.g. shift) */
  /* Extra spacing between two adjacent keys */
}
.MLK__rows > .MLK__row .tex {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .tex-math {
  font-family: KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .big-op {
  font-size: calc(1.25 * var(--_keycap-font-size));
}
.MLK__rows > .MLK__row .small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__rows > .MLK__row .bottom {
  justify-content: flex-end;
}
.MLK__rows > .MLK__row .left {
  align-items: flex-start;
  padding-left: 12px;
}
.MLK__rows > .MLK__row .right {
  align-items: flex-end;
  padding-right: 12px;
}
.MLK__rows > .MLK__row .w0 {
  width: 0;
}
.MLK__rows > .MLK__row .w5 {
  width: calc(0.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w15 {
  width: calc(1.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w20 {
  width: calc(2 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w40 {
  width: calc(4 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w50 {
  width: calc(5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .MLK__keycap.w50 {
  font-size: 80%;
  padding-top: 10px;
  font-weight: 100;
}
.MLK__rows > .MLK__row .separator {
  background: transparent;
  border: none;
  pointer-events: none;
}
.MLK__rows > .MLK__row .horizontal-rule {
  height: 6px;
  margin-top: 3px;
  margin-bottom: 0;
  width: 100%;
  border-radius: 0;
  border-top: var(--_horizontal-rule);
}
.MLK__rows > .MLK__row .ghost {
  background: var(--_toolbar-background);
  border: none;
  color: var(--_toolbar-text);
}
.MLK__rows > .MLK__row .ghost:hover {
  background: var(--_toolbar-background-hover);
}
.MLK__rows > .MLK__row .bigfnbutton {
  font-size: var(--_keycap-extra-small-font-size);
}
.MLK__rows > .MLK__row .shift,
.MLK__rows > .MLK__row .action {
  color: var(--_keycap-secondary-text);
  background: var(--_keycap-secondary-background);
  border-color: var(--_keycap-secondary-border);
  border-bottom-color: var(--_keycap-secondary-border-bottom);
  line-height: 0.8;
  font-size: min(1rem, var(--_keycap-small-font-size));
  font-weight: 600;
  padding: 8px 12px 8px 12px;
}
.MLK__rows > .MLK__row .shift:hover,
.MLK__rows > .MLK__row .action:hover {
  background: var(--_keycap-secondary-background-hover);
}
.MLK__rows > .MLK__row .action.primary {
  background: var(--_keycap-primary-background);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .action.primary:hover {
  background: var(--_keycap-primary-background-hover);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .shift.selected,
.MLK__rows > .MLK__row .action.selected {
  color: var(--_toolbar-text-active);
}
.MLK__rows > .MLK__row .shift.selected.is-pressed,
.MLK__rows > .MLK__row .action.selected.is-pressed,
.MLK__rows > .MLK__row .shift.selected.is-active,
.MLK__rows > .MLK__row .action.selected.is-active {
  color: white;
}
.MLK__rows > .MLK__row .warning {
  background: #cd0030;
  color: white;
}
.MLK__rows > .MLK__row .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
/** A regular keycap
 * Use the :where() pseudo-class to give it a very low specifity, 
 * so that it can be overriden by custom style.
 */
:where(.MLK__rows > .MLK__row div) {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-evenly;
  width: calc(var(--_keycap-width) - var(--_keycap-gap));
  height: var(--_keycap-height);
  box-sizing: border-box;
  padding: 0;
  vertical-align: top;
  text-align: center;
  float: left;
  color: var(--_keycap-text);
  fill: currentColor;
  font-size: var(--_keycap-font-size);
  background: var(--_keycap-background);
  border: 1px solid var(--_keycap-border);
  border-bottom-color: var(--_keycap-border-bottom);
  border-radius: 6px;
  cursor: pointer;
  touch-action: none;
  /* Keys with a variants panel */
  position: relative;
  overflow: hidden;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
:where(.MLK__rows > .MLK__row div):hover {
  overflow: visible;
  background: var(--_keycap-background-hover);
  color: var(--_keycap-text-hover);
}
:where(.MLK__rows > .MLK__row div) .ML__latex {
  pointer-events: none;
  touch-action: none;
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph {
  margin: 8px 0;
  width: var(--_keycap-glyph-size);
  height: var(--_keycap-glyph-size);
  min-height: var(--_keycap-glyph-size);
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph-lg {
  margin: 8px 0;
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
:where(.MLK__rows > .MLK__row div).MLK__tex-math {
  font-size: 25px;
}
:where(.MLK__rows > .MLK__row div).is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  z-index: calc(var(--_keyboard-zindex) - 5);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active aside,
:where(.MLK__rows > .MLK__row div).action.is-active aside,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed aside,
:where(.MLK__rows > .MLK__row div).action.is-pressed aside {
  display: none;
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-pressed .MLK__shift {
  display: none;
}
:where(.MLK__rows > .MLK__row div).shift.is-pressed,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
}
:where(.MLK__rows > .MLK__row div).shift.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div) small {
  color: var(--_keycap-secondary-text);
}
:where(.MLK__rows > .MLK__row div) aside {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 10px;
  line-height: 10px;
  color: var(--_keycap-secondary-text);
}
/* Add an attribute 'data-tooltip' to display a tooltip on hover.
Note there are a different set of tooltip rules for the keyboard toggle
(it's in a different CSS tree) */
.ML__keyboard [data-tooltip] {
  position: relative;
}
.ML__keyboard [data-tooltip]::after {
  position: absolute;
  display: inline-table;
  content: attr(data-tooltip);
  top: inherit;
  bottom: 100%;
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  background: #616161;
  color: #fff;
  text-align: center;
  z-index: 2;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  border-radius: 2px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-weight: 400;
  font-size: 12px;
  transition: all 0.15s cubic-bezier(0.4, 0, 1, 1) 1s;
  opacity: 0;
  transform: scale(0.5);
}
.ML__keyboard [data-tooltip]:hover {
  position: relative;
}
.ML__keyboard [data-tooltip]:hover::after {
  opacity: 1;
  transform: scale(1);
}
.MLK__toolbar {
  align-self: center;
  display: flex;
  flex-flow: row;
  justify-content: space-between;
  width: 100%;
  max-width: 996px;
  min-height: 32px;
  /* Icons for undo/redo, etc. */
}
.MLK__toolbar svg {
  height: 20px;
  width: 20px;
}
.MLK__toolbar > .left {
  position: relative;
  display: flex;
  justify-content: flex-start;
  flex-flow: row;
}
.MLK__toolbar > .right {
  display: flex;
  justify-content: flex-end;
  flex-flow: row;
}
.MLK__toolbar > div > div {
  /* "button" in the toolbar */
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--_toolbar-text);
  fill: currentColor;
  background: var(--_toolbar-background);
  font-size: var(--_toolbar-font-size);
  padding: 4px 15px;
  cursor: pointer;
  width: max-content;
  min-width: 42px;
  min-height: 34px;
  border: none;
  padding-left: 10px;
  padding-right: 10px;
  padding-bottom: 8px;
  padding-top: 8px;
  margin-top: 0;
  margin-bottom: 4px;
  margin-left: 4px;
  margin-right: 4px;
  border-radius: 8px;
  box-shadow: none;
  border-bottom: 2px solid transparent;
}
.MLK__toolbar > div > div:not(.disabled):not(.selected):hover {
  background: var(--_toolbar-background-hover);
}
.MLK__toolbar > div > div.disabled svg,
.MLK__toolbar > div > div.disabled:hover svg,
.MLK__toolbar > div > div.disabled.is-pressed svg {
  color: var(--_toolbar-text);
  opacity: 0.2;
}
.MLK__toolbar > div > div:hover,
.MLK__toolbar > div > div:active,
.MLK__toolbar > div > div.is-pressed,
.MLK__toolbar > div > div.is-active {
  color: var(--_toolbar-text-active);
}
.MLK__toolbar > div > div.selected {
  color: var(--_toolbar-text-active);
  background: var(--_toolbar-background-selected);
  border-radius: 0;
  border-bottom-color: var(--_toolbar-text-active);
  padding-bottom: 4px;
  margin-bottom: 8px;
}
/* This is the element that displays variants on press+hold */
.MLK__variant-panel {
  visibility: hidden;
  position: fixed;
  display: flex;
  flex-flow: row wrap-reverse;
  justify-content: center;
  align-content: center;
  margin: 0;
  padding: 0;
  bottom: auto;
  top: 0;
  box-sizing: content-box;
  transform: none;
  z-index: calc(var(--_keyboard-zindex) + 1);
  touch-action: none;
  max-width: 350px;
  background: var(--_variant-panel-background);
  text-align: center;
  border-radius: 6px;
  padding: 6px;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
  transition: none;
}
.MLK__variant-panel.is-visible {
  visibility: visible;
}
.MLK__variant-panel.compact {
  --_variant-keycap-length: var(--variant-keycap-length, 50px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 10px);
}
.MLK__variant-panel .item {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: center;
  font-size: var(--_variant-keycap-font-size);
  height: var(--_variant-keycap-length);
  width: var(--_variant-keycap-length);
  margin: 0;
  box-sizing: border-box;
  border-radius: 5px;
  border: 1px solid transparent;
  background: transparent;
  pointer-events: all;
  cursor: pointer;
  color: var(--_variant-keycap-text);
  fill: currentColor;
}
@media (max-height: 412px) {
  .MLK__variant-panel .item {
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
.MLK__variant-panel .item .ML__latex {
  pointer-events: none;
}
.MLK__variant-panel .item:hover {
  color: var(--_keycap-text-hover);
}
.MLK__variant-panel .item.is-active {
  background: var(--_variant-keycap-background-active);
  color: var(--_variant-keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.is-pressed {
  background: var(--_variant-keycap-background-pressed);
  color: var(--_variant-keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__variant-panel .item.swatch-button {
  box-sizing: border-box;
  background: #fbfbfb;
}
.MLK__variant-panel .item.swatch-button > span {
  display: inline-block;
  margin: 6px;
  width: calc(100% - 12px);
  height: calc(100% - 12px);
  border-radius: 50%;
}
.MLK__variant-panel .item.swatch-button:hover {
  background: #f0f0f0;
}
.MLK__variant-panel .item.swatch-button:hover > span {
  border-radius: 2px;
}
.MLK__variant-panel .item.box > div,
.MLK__variant-panel .item.box > span {
  border: 1px dashed rgba(0, 0, 0, 0.24);
}
.MLK__variant-panel .item .warning {
  min-height: 60px;
  min-width: 60px;
  background: #cd0030;
  color: white;
  padding: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 5px;
}
.MLK__variant-panel .item .warning.is-pressed,
.MLK__variant-panel .item .warning.is-active {
  background: red;
}
.MLK__variant-panel .item .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-xl);
  height: var(--_keycap-glyph-size-xl);
}
.MLK__variant-panel .item aside {
  font-size: var(--_variant-keycap-aside-font-size);
  line-height: 12px;
  opacity: 0.78;
  padding-top: 2px;
  width: 100%;
  text-align: center;
  text-wrap: wrap;
}
.MLK__keycap {
  position: relative;
}
.MLK__shift {
  display: block;
  position: absolute;
  right: 4px;
  top: 4px;
  font-size: var(--_keycap-shift-font-size);
  color: var(--_keycap-shift-color);
}
.hide-shift .MLK__shift {
  display: none;
}
@media (max-width: 414px) {
  .MLK__variant-panel {
    max-width: 350px;
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
/* @xs breakpoint: iPhone 5 */
@container (max-width: 414px) {
  .MLK__rows {
    --_keycap-gap: max(var(--_keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--_keycap-height), 42px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width)), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    font-size: 100%;
    margin-left: 2px;
    margin-right: 2px;
  }
  .MLK__rows .shift,
  .MLK__rows .action {
    font-size: 65%;
  }
  .MLK__rows .warning svg.svg-glyph {
    width: 14px;
    height: 14px;
    min-height: 14px;
  }
}
@container (max-width: 744px) {
  .MLK__rows {
    --_keycap-gap: max(var(--keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--keycap-height, 52px), 52px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    padding-left: 0;
    padding-right: 0;
  }
  .MLK__tooltip::after {
    padding: 8px 16px;
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.fnbutton {
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.bigfnbutton {
    font-size: calc(var(--_keycap-extra-small-font-size) / 1.55);
  }
  .MLK__rows > .MLK__row > div.small {
    font-size: 13px;
  }
  .MLK__rows > .MLK__row > div > aside {
    display: none;
  }
  .MLK__shift {
    display: none;
  }
}
/* Medium breakpoint: larger phones */
@container (max-width: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@media (max-height: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@container (max-width: 1444px) {
  .MLK__rows .if-wide {
    display: none;
  }
}
@media (prefers-color-scheme: dark) {
  .ML__keyboard {
    --_accent-color: var(--keyboard-accent-color, #0b5c9c);
    --_background: var(--keyboard-background, #151515);
    --_border: var(--keyboard-border, transparent);
    --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
    --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
    --keyboard-toolbar-background-hover: #303030;
    --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
    --_keycap-background: var(--keycap-background, #1f2022);
    --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
    --_keycap-border: var(--_keycap-border, transparent);
    --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
    --_keycap-text: var(--keycap-text, #e3e4e8);
    --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
    --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
    --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
    --keycap-secondary-border: transparent;
    --keycap-secondary-border-bottom: transparent;
    --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
    --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
    --_variant-panel-background: var(--variant-panel-background, #303030);
    --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
  }
}
/* Same as the media query, but with a class */
[theme='dark'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0b5c9c);
  --_background: var(--keyboard-background, #151515);
  --_border: var(--keyboard-border, transparent);
  --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
  --keyboard-toolbar-background-hover: #303030;
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
  --_keycap-background: var(--keycap-background, #1f2022);
  --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
  --_keycap-border: var(--_keycap-border, transparent);
  --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
  --_keycap-text: var(--keycap-text, #e3e4e8);
  --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
  --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
  --keycap-secondary-border: transparent;
  --keycap-secondary-border-bottom: transparent;
  --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
  --_variant-panel-background: var(--variant-panel-background, #303030);
  --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
}
[theme='light'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, white);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--_keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--_keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-textvar, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
}
`,Mm=`:host {
  --primary-color: #5898ff;
  --primary-color-dimmed: #c0c0f0;
  --primary-color-dark: var(--blue-500);
  --primary-color-light: var(--blue-100);
  --primary-color-reverse: #ffffff;
  --secondary-color: #ff8a65;
  --secondary-color-dimmed: #f0d5c5;
  --secondary-color-dark: var(--orange-500);
  --secondary-color-light: var(--orange-100);
  --secondary-color-reverse: #ffffff;
  --link-color: #5898ff;
  --link-color-dimmed: #c5c5c5;
  --link-color-dark: #121212;
  --link-color-light: #e2e2e2;
  --link-color-reverse: #ffffff;
  --semantic-blue: var(--blue-700);
  --semantic-red: var(--red-400);
  --semantic-orange: var(--orange-400);
  --semantic-green: var(--green-700);
  --neutral-100: #f5f5f5;
  --neutral-200: #eeeeee;
  --neutral-300: #e0e0e0;
  --neutral-400: #bdbdbd;
  --neutral-500: #9e9e9e;
  --neutral-600: #757575;
  --neutral-700: #616161;
  --neutral-800: #424242;
  --neutral-900: #212121;
  --red-25: #fff8f7;
  --red-50: #fff1ef;
  --red-100: #ffeae6;
  --red-200: #ffcac1;
  --red-300: #ffa495;
  --red-400: #ff7865;
  --red-500: #f21c0d;
  --red-600: #e50018;
  --red-700: #d30024;
  --red-800: #bd002c;
  --red-900: #a1002f;
  --orange-25: #fffbf8;
  --orange-50: #fff7f1;
  --orange-100: #fff3ea;
  --orange-200: #ffe1c9;
  --orange-300: #ffcca2;
  --orange-400: #ffb677;
  --orange-500: #fe9310;
  --orange-600: #f58700;
  --orange-700: #ea7c00;
  --orange-800: #dc6d00;
  --orange-900: #ca5b00;
  --brown-25: #fff8ef;
  --brown-50: #fff1df;
  --brown-100: #ffe9ce;
  --brown-200: #ebcca6;
  --brown-300: #cdaf8a;
  --brown-400: #af936f;
  --brown-500: #856a47;
  --brown-600: #7f5e34;
  --brown-700: #78511f;
  --brown-800: #6e4200;
  --brown-900: #593200;
  --yellow-25: #fffdf9;
  --yellow-50: #fffcf2;
  --yellow-100: #fffaec;
  --yellow-200: #fff2ce;
  --yellow-300: #ffe8ab;
  --yellow-400: #ffdf85;
  --yellow-500: #ffcf33;
  --yellow-600: #f1c000;
  --yellow-700: #dfb200;
  --yellow-800: #c9a000;
  --yellow-900: #ad8a00;
  --lime-25: #f4ffee;
  --lime-50: #e9ffdd;
  --lime-100: #ddffca;
  --lime-200: #a8fb6f;
  --lime-300: #94e659;
  --lime-400: #80d142;
  --lime-500: #63b215;
  --lime-600: #45a000;
  --lime-700: #268e00;
  --lime-800: #007417;
  --lime-900: #005321;
  --green-25: #f5fff5;
  --green-50: #ebffea;
  --green-100: #e0ffdf;
  --green-200: #a7ffa7;
  --green-300: #5afa65;
  --green-400: #45e953;
  --green-500: #17cf36;
  --green-600: #00b944;
  --green-700: #00a34a;
  --green-800: #008749;
  --green-900: #00653e;
  --teal-25: #f3ffff;
  --teal-50: #e6fffe;
  --teal-100: #d9fffe;
  --teal-200: #8dfffe;
  --teal-300: #57f4f4;
  --teal-400: #43e5e5;
  --teal-500: #17cfcf;
  --teal-600: #00c2c0;
  --teal-700: #00b5b1;
  --teal-800: #00a49e;
  --teal-900: #009087;
  --cyan-25: #f7fcff;
  --cyan-50: #eff8ff;
  --cyan-100: #e7f5ff;
  --cyan-200: #c2e6ff;
  --cyan-300: #95d5ff;
  --cyan-400: #61c4ff;
  --cyan-500: #13a7ec;
  --cyan-600: #069eda;
  --cyan-700: #0095c9;
  --cyan-800: #0088b2;
  --cyan-900: #0a7897;
  --blue-25: #f7faff;
  --blue-50: #eef5ff;
  --blue-100: #e5f1ff;
  --blue-200: #bfdbff;
  --blue-300: #92c2ff;
  --blue-400: #63a8ff;
  --blue-500: #0d80f2;
  --blue-600: #0077db;
  --blue-700: #006dc4;
  --blue-800: #0060a7;
  --blue-900: #005086;
  --indigo-25: #f8f7ff;
  --indigo-50: #f1efff;
  --indigo-100: #eae7ff;
  --indigo-200: #ccc3ff;
  --indigo-300: #ac99ff;
  --indigo-400: #916aff;
  --indigo-500: #63c;
  --indigo-600: #5a21b2;
  --indigo-700: #4e0b99;
  --indigo-800: #3b0071;
  --indigo-900: #220040;
  --purple-25: #fbf7ff;
  --purple-50: #f8f0ff;
  --purple-100: #f4e8ff;
  --purple-200: #e4c4ff;
  --purple-300: #d49aff;
  --purple-400: #c36aff;
  --purple-500: #a219e6;
  --purple-600: #9000c4;
  --purple-700: #7c009f;
  --purple-800: #600073;
  --purple-900: #3d0043;
  --magenta-25: #fff8fb;
  --magenta-50: #fff2f6;
  --magenta-100: #ffebf2;
  --magenta-200: #ffcddf;
  --magenta-300: #ffa8cb;
  --magenta-400: #ff7fb7;
  --magenta-500: #eb4799;
  --magenta-600: #da3689;
  --magenta-700: #c82179;
  --magenta-800: #b00065;
  --magenta-900: #8a004c;
}
@media (prefers-color-scheme: dark) {
  :host {
    --semantic-blue: var(--blue-700);
    --semantic-red: var(--red-400);
    --semantic-orange: var(--orange-400);
    --semantic-green: var(--green-700);
    --semantic-bg-blue: var(--blue-25);
    --semantic-bg-red: var(--red-25);
    --semantic-bg-orange: var(--orange-25);
    --semantic-bg-green: var(--green-25);
    --neutral-100: #121212;
    --neutral-200: #424242;
    --neutral-300: #616161;
    --neutral-400: #757575;
    --neutral-500: #9e9e9e;
    --neutral-600: #bdbdbd;
    --neutral-700: #e0e0e0;
    --neutral-800: #eeeeee;
    --neutral-900: #f5f5f5;
  }
}
:host([theme='dark']) {
  --semantic-blue: var(--blue-700);
  --semantic-red: var(--red-400);
  --semantic-orange: var(--orange-400);
  --semantic-green: var(--green-700);
  --semantic-bg-blue: var(--blue-25);
  --semantic-bg-red: var(--red-25);
  --semantic-bg-orange: var(--orange-25);
  --semantic-bg-green: var(--green-25);
  --neutral-100: #121212;
  --neutral-200: #424242;
  --neutral-300: #616161;
  --neutral-400: #757575;
  --neutral-500: #9e9e9e;
  --neutral-600: #bdbdbd;
  --neutral-700: #e0e0e0;
  --neutral-800: #eeeeee;
  --neutral-900: #f5f5f5;
}
/* @media (prefers-color-scheme: dark) {
  :host {
      --label-color: #fff;
      --active-label-color: #000;
      --menu-bg: #525252;
      --active-bg: #5898ff;
      --active-bg-dimmed: #5c5c5c;
  }
} */
:host {
  --ui-font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  --ui-font-size: 14px;
  --ui-line-height: 1.5;
  --ui-letter-spacing: 0.007em;
  --mono-font-family: 'Berkeley Mono', 'JetBrains Mono', 'IBM Plex Mono', 'Source Code Pro', Menlo, Monaco, 'Courier New', monospace;
  --ui-layer-1: var(--neutral-100);
  --ui-layer-2: var(--neutral-200);
  --ui-layer-3: var(--neutral-300);
  --ui-layer-4: var(--neutral-400);
  --ui-layer-5: var(--neutral-500);
  --ui-layer-6: var(--neutral-600);
  --ui-border-color: var(--primary-color);
  --ui-border-radius: 4px;
  --ui-text: var(--neutral-900);
  --ui-text-secondary: var(--neutral-700);
  --ui-text-placeholder: var(--neutral-500);
  --ui-text-muted: var(--neutral-300);
  /** A field is a UI element in which a user can type data, for
  * example an input or textarea element.
  */
  --ui-field-bg: var(--neutral-100);
  --ui-field-bg-hover: var(--neutral-100);
  --ui-field-bg-disabled: var(--neutral-300);
  --ui-field-bg-invalid: var(--red-100);
  --ui-field-bg-focus: var(--neutral-100);
  --ui-field-border: 0.5px solid var(--border-color);
  --ui-field-border-hover: 0.5px solid var(--border-color);
  --ui-field-border-disabled: 0.5px solid var(--border-color);
  --ui-field-border-invalid: 0.5px solid var(--border-color);
  --ui-field-border-focus: 0.5px solid var(--border-color);
  --ui-menu-bg: var(--neutral-100);
  --ui-menu-text: var(--neutral-900);
  --ui-menu-bg-hover: var(--neutral-200);
  --ui-menu-text-hover: var(--neutral-900);
  /** The \`active\` state is used for the state of menu items
  * when they are selected.
  */
  --ui-menu-bg-active: var(--primary-color);
  --ui-menu-text-active: var(--primary-color-reverse);
  /** The \`active-muted\` set is used for the state of
  * submenus when they are open.
  */
  --ui-menu-bg-active-muted: var(--neutral-300);
  --ui-menu-text-active-muted: var(--neutral-900);
  /* --ui-menu-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.302),
0 2px 6px 2px rgba(60, 64, 67, 0.149); */
  --ui-menu-shadow: 0 0 2px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 0, 0, 0.2);
  --ui-menu-divider: 0.5px solid #c7c7c7;
  /* var(--neutral-300); */
  --ui-menu-z-index: 10000;
  --page-bg: var(--neutral-100);
  --content-bg: var(--neutral-200);
}
@media (prefers-color-scheme: dark) {
  :host {
    --ui-menu-bg: var(--neutral-200);
  }
}
:host([theme='dark']) {
  --ui-menu-bg: var(--neutral-200);
}
/* PingFang SC is a macOS font. Microsoft Yahei is a Windows font. 
  Noto  is a Linux/Android font.
*/
:lang(zh-cn),
:lang(zh-sg),
:lang(zh-my),
:lang(zh) {
  --ui-font-family: -apple-system, system-ui, 'PingFang SC', 'Hiragino Sans GB', 'Noto Sans CJK SC', 'Noto Sans SC', 'Noto Sans', 'Microsoft Yahei UI', 'Microsoft YaHei New', 'Microsoft Yahei', '微软雅黑', SimSun, '宋体', STXihei, '华文细黑', sans-serif;
}
:lang(zh-tw),
:lang(zh-hk),
:lang(zh-mo) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans', 'Microsoft JhengHei UI', 'Microsoft JhengHei', '微軟正黑體', '新細明體', 'PMingLiU', '細明體', 'MingLiU', sans-serif;
}
:lang(ja),
:lang(ja-jp),
:lang(ja-jp-mac) {
  --ui-font-family: -apple-system, system-ui, 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans CJK JP', 'Noto Sans JP', 'Noto Sans', '游ゴシック', '游ゴシック体', YuGothic, 'Yu Gothic', 'メイリオ', Meiryo, 'ＭＳ Ｐゴシック', 'MS PGothic', sans-serif;
}
:lang(ko),
:lang(ko-kr),
:lang(ko-kr-std) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Malgun Gothic', '맑은 고딕', 'Apple SD Gothic Neo', '애플 SD 산돌고딕 Neo', 'Apple SD 산돌고딕 Neo', '돋움', Dotum, sans-serif;
}
:lang(ko-kr-apple) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Apple SD Gothic Neo', '애플 SD 산돌고딕 Neo', 'Apple SD 산돌고딕 Neo', '돋움', Dotum, sans-serif;
}
:lang(zh-cn),
:lang(zh-sg),
:lang(zh-my),
:lang(zh),
:lang(zh-tw),
:lang(zh-hk),
:lang(zh-mo),
:lang(ja),
:lang(ja-jp),
:lang(ja-jp-mac),
:lang(ko),
:lang(ko-kr),
:lang(ko-kr-std),
:lang(ko-kr-apple) {
  --ui-font-size: 1rem;
  --ui-line-height: 1.7;
  --ui-letter-spacing: 0;
}
:dir(rtl) {
  --ui-line-height: auto;
  --ui-letter-spacing: 0;
}
`,wm=`.ui-menu *,
.ui-menu ::before,
.ui-menu ::after {
  box-sizing: border-box;
}
.ui-menu {
  display: none;
  color-scheme: light dark;
  -webkit-user-select: none;
  /* Important: Safari iOS doesn't respect user-select */
  user-select: none;
  cursor: default;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: rgba(0 0 0 0);
  --active-label-color: #fff;
  /* ui-menu-text-active */
  --label-color: #121212;
  /* ui-menu-text */
  --menu-bg: #e2e2e2;
  /* ui-menu-background */
  --active-bg: #5898ff;
  /* ui-menu-background-active */
  --active-bg-dimmed: #c5c5c5;
  /* ui-menu-background-active-muted */
}
/** Use the :where pseudo selector to make the specificity of the
 * selector 0, so that it can be overridden by the user.
 */
:where(.ui-menu-container) {
  position: absolute;
  overflow: visible;
  width: auto;
  height: auto;
  z-index: 10000;
  border-radius: 8px;
  background: var(--ui-menu-bg);
  box-shadow: var(--ui-menu-shadow);
  list-style: none;
  padding: 6px 0 6px 0;
  margin: 0;
  user-select: none;
  cursor: default;
  color: var(--ui-menu-text);
  font-weight: normal;
  font-style: normal;
  text-shadow: none;
  text-transform: none;
  letter-spacing: 0;
  outline: none;
  opacity: 1;
  /* The [popover] elements have a 1px solid black border. Ugh. */
  border: none;
  width: fit-content;
  height: fit-content;
}
:where(.ui-menu-container > li) {
  display: flex;
  flex-flow: row;
  align-items: center;
  padding: 1px 7px 1px 7px;
  margin-top: 0;
  margin-left: 6px;
  margin-right: 6px;
  border-radius: 4px;
  white-space: nowrap;
  position: relative;
  outline: none;
  fill: currentColor;
  user-select: none;
  cursor: default;
  text-align: left;
  color: inherit;
  font-family: var(--ui-font-family);
  font-size: var(--ui-font-size);
  line-height: var(--ui-line-height);
  letter-spacing: var(--ui-letter-spacing);
}
:where(.ui-menu-container > li > .label) {
  display: flex;
  align-items: center;
  justify-content: space-between;
  appearance: none;
  background: none;
  outline: none;
  width: 100%;
  margin: 0;
  padding: 1px 2px 1px 1px;
  overflow: visible;
  border: 1px solid transparent;
  white-space: nowrap;
  text-align: start;
  align-content: center;
}
:where(.ui-menu-container > li:has(.heading)) {
  margin-top: 0.5em;
}
:where(.ui-menu-container > li > .label.heading) {
  font-weight: bold;
  opacity: 0.4;
}
:where(.ui-menu-container > li.indent > .label) {
  margin-inline-start: 12px;
}
:where(.ui-menu-container > li > .label.indent) {
  margin-inline-start: 12px;
}
:where(.ui-menu-container > li[role='divider']) {
  border-bottom: 1px solid var(--ui-menu-divider);
  border-radius: 0;
  padding: 0;
  margin-left: 15px;
  margin-right: 15px;
  padding-top: 5px;
  margin-bottom: 5px;
  width: calc(100% - 30px);
  /** 100% - (margin-left + margin-right) */
}
:where(.ui-menu-container > li[aria-disabled='true']) {
  opacity: 0.5;
}
:where(.ui-menu-container > li.active) {
  background: var(--ui-menu-bg-active);
  background: -apple-system-control-accent;
  color: var(--ui-menu-text-active);
}
:where(.ui-menu-container > li.active.is-submenu-open) {
  background: var(--ui-menu-bg-active-muted);
  color: inherit;
}
:where(.ui-menu-container > li[aria-haspopup='true'] > .label) {
  padding-inline-end: 0;
}
:where(.ui-menu-container > li[aria-haspopup='true'].active::after) {
  color: var(--ui-menu-text-active);
}
/** Keyboard shortcut */
:where(.ui-menu-container > li > kbd) {
  font-family: var(--ui-font-family);
  margin-inline-start: 12px;
  opacity: 0.4;
}
:where(.ui-menu-container > li.active > kbd) {
  opacity: 0.85;
}
.ui-trailing-chevron {
  display: flex;
  margin-inline-start: 24px;
  width: 10px;
  height: 10px;
  margin-bottom: 4px;
}
.ui-trailing-chevron:dir(rtl) {
  transform: scaleX(-1);
}
.ui-checkmark {
  display: flex;
  margin-inline-end: -11px;
  margin-inline-start: -4px;
  margin-top: 2px;
  width: 16px;
  height: 16px;
}
.ui-mixedmark {
  display: flex;
  margin-inline-end: -11px;
  margin-inline-start: -4px;
  margin-top: 2px;
  width: 16px;
  height: 16px;
}
`,Cr;function Er(t){let e="";switch(t){case"mathfield-element":e=`
    :host { display: inline-block; background-color: field; color: fieldtext; border-width: 1px; border-style: solid; border-color: #acacac; border-radius: 2px;}
    :host([hidden]) { display: none; }
    :host([disabled]), :host([disabled]:focus), :host([disabled]:focus-within) { outline: none; opacity:  .5; }
    :host(:focus), :host(:focus-within) {
      outline: Highlight auto 1px;    /* For Firefox */
      outline: -webkit-focus-ring-color auto 1px;
    }
    :host([readonly]:focus), :host([readonly]:focus-within),
    :host([read-only]:focus), :host([read-only]:focus-within) {
      outline: none;
    }`;break;case"core":e=bm;break;case"mathfield":e=gm;break;case"environment-popover":e=ym;break;case"suggestion-popover":e=xm;break;case"keystroke-caption":e=vm;break;case"virtual-keyboard":e=_m;break;case"ui":e=Mm;break;case"menu":e=wm;break}return e}function ii(t){return Cr||(Cr={}),Cr[t]||(Cr[t]=new CSSStyleSheet,Cr[t].replaceSync(Er(t))),Cr[t]}var Bt;function Ve(t){var e;try{if(!("adoptedStyleSheets"in document)){if(window.document.getElementById(`mathlive-style-${t}`))return;let r=window.document.createElement("style");r.id=`mathlive-style-${t}`,r.append(window.document.createTextNode(Er(t))),window.document.head.appendChild(r);return}if(Bt||(Bt={}),((e=Bt[t])!=null?e:0)!==0)Bt[t]+=1;else{let r=ii(t);document.adoptedStyleSheets=[...document.adoptedStyleSheets,r],Bt[t]=1}}catch(r){console.error("Error injecting stylesheet",t,r)}}function it(t){if("adoptedStyleSheets"in document&&Bt!=null&&Bt[t]&&(Bt[t]-=1,Bt[t]<=0)){let e=Cr[t];document.adoptedStyleSheets=document.adoptedStyleSheets.filter(r=>r!==e)}}var Tr=class x9 extends b{constructor(e){var r;super(f(p({},e),{type:"accent",body:(r=e.body)!=null?r:void 0})),e.accentChar?this.accent=e.accentChar:this.svgAccent=e?.svgAccent,this.skipBoundary=!0,this.captureSelection=!0}static fromJson(e){return new x9(e)}toJson(){return f(p({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(e){var r;let n=new O({parent:e,mathstyle:"cramp"},this.style),a=(r=b.createBox(n,this.body))!=null?r:new _("▢",{style:this.style}),s=0;!this.hasEmptyBranch("body")&&this.body.length===2&&this.body[1].isCharacterBox()&&(s=a.skew);let o=Math.min(a.height,tt),c;if(this.svgAccent)c=Wi(this.svgAccent),o=n.metrics.bigOpSpacing1-o;else if(this.accent){let m=new _(this.accent,{fontFamily:"Main-Regular"});m.italic=0;let y=this.accent===8407||this.accent===8411||this.accent===8412?" ML__accent-combining-char":"";c=new _(m,{classes:"ML__accent-body"+y})}c=new Q({shift:0,children:[{box:new _(a)},-o,{box:c,marginLeft:a.left+2*s,classes:["ML__center"]}]});let d=new _(c,{type:"lift"});return this.caret&&(d.caret=this.caret),this.bind(n,d.wrap(n)),this.attachSupsub(n,{base:d})}},Xi={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},Zi=Object.fromEntries(Object.entries(Xi).map(([t,e])=>[e,t]));function Fa(t){var e;return(e={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"∣":8739,"∥":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[t])!=null?e:t.codePointAt(0)}function bf(t,e,r,n){var a;let s=new _(Fa(t),{fontFamily:"Main-Regular",isSelected:n.isSelected,classes:"ML__small-delim "+((a=n.classes)!=null?a:"")}).wrap(e);return r&&s.setTop((1-e.scalingFactor)*Oe),s}function km(t,e,r,n,a){var s,o;let c=new O({parent:n,mathstyle:"textstyle"},a?.style),d=new _(Fa(t),{fontFamily:`Size${e}-Regular`,isSelected:a.isSelected,classes:((s=a.classes)!=null?s:"")+` ML__delim-size${e}`,type:(o=a.type)!=null?o:"ignore"}).wrap(c);return r&&d.setTop((1-c.scalingFactor)*Oe),d}function Sm(t,e,r,n,a){var s;let o,c,d,m;o=d=m=Fa(t),c=null;let y="Size1-Regular";t==="\\vert"||t==="\\lvert"||t==="\\rvert"||t==="\\mvert"||t==="\\mid"?d=o=m=8739:t==="\\Vert"||t==="\\lVert"||t==="\\rVert"||t==="\\mVert"||t==="\\|"?d=o=m=8741:t==="\\uparrow"?d=m=9168:t==="\\Uparrow"?d=m=8214:t==="\\downarrow"?o=d=9168:t==="\\Downarrow"?o=d=8214:t==="\\updownarrow"?(o=8593,d=9168,m=8595):t==="\\Updownarrow"?(o=8657,d=8214,m=8659):t==="["||t==="\\lbrack"?(o=9121,d=9122,m=9123,y="Size4-Regular"):t==="]"||t==="\\rbrack"?(o=9124,d=9125,m=9126,y="Size4-Regular"):t==="\\lfloor"||t==="⌊"?(d=o=9122,m=9123,y="Size4-Regular"):t==="\\lceil"||t==="⌈"?(o=9121,d=m=9122,y="Size4-Regular"):t==="\\rfloor"||t==="⌋"?(d=o=9125,m=9126,y="Size4-Regular"):t==="\\rceil"||t==="⌉"?(o=9124,d=m=9125,y="Size4-Regular"):t==="("||t==="\\lparen"?(o=9115,d=9116,m=9117,y="Size4-Regular"):t===")"||t==="\\rparen"?(o=9118,d=9119,m=9120,y="Size4-Regular"):t==="\\{"||t==="\\lbrace"?(o=9127,c=9128,m=9129,d=9130,y="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(o=9131,c=9132,m=9133,d=9130,y="Size4-Regular"):t==="\\lgroup"||t==="⟮"?(o=9127,m=9129,d=9130,y="Size4-Regular"):t==="\\rgroup"||t==="⟯"?(o=9131,m=9133,d=9130,y="Size4-Regular"):t==="\\lmoustache"||t==="⎰"?(o=9127,m=9133,d=9130,y="Size4-Regular"):t==="\\rmoustache"||t==="⎱"?(o=9131,m=9129,d=9130,y="Size4-Regular"):t==="\\surd"?(o=57345,m=9143,d=57344,y="Size4-Regular"):t==="\\ulcorner"?(o=9484,d=m=32):t==="\\urcorner"?(o=9488,d=m=32):t==="\\llcorner"?(m=9492,d=o=32):t==="\\lrcorner"&&(o=9496,d=o=32);let A=xr(o,y),P=A.height+A.depth,Z=xr(d,y),me=Z.height+Z.depth,_e=xr(m,y),Ge=_e.height+_e.depth,ve=0,He=1;if(c!==null){let Hc=xr(c,y);ve=Hc.height+Hc.depth,He=2}let De=P+Ge+ve,Xe=Math.max(0,Math.ceil((e-De)/(He*me))),Bs=De+Xe*He*me,wt=Oe;r&&(wt=wt*n.scalingFactor);let li=Bs/2-wt,An=[];An.push({box:new _(m,{fontFamily:y})}),An.push(-.008);let Os=new _(d,{fontFamily:y});if(c===null)for(let Hc=0;Hc<Xe;Hc++)An.push({box:Os});else{for(let Hc=0;Hc<Xe;Hc++)An.push({box:Os});An.push(-.008),An.push({box:new _(c,{fontFamily:y})}),An.push(-.008);for(let Hc=0;Hc<Xe;Hc++)An.push({box:Os})}An.push(-.008),An.push({box:new _(o,{fontFamily:y})});let vh="";y==="Size1-Regular"?vh=" delim-size1":y==="Size4-Regular"&&(vh=" delim-size4");let Fc=new Q({bottom:li,children:An},{classes:vh});return new _(Fc,f(p({},a??{}),{classes:((s=a?.classes)!=null?s:"")+" ML__delim-mult"}))}var Lm=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","⌊","⌋","⌈","⌉"]),yf=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","⟮","⟯","⎰","⎱"]),Am=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),xf=[0,1.2,1.8,2.4,3];function Cm(t,e,r,n){return t===void 0||t==="."?Qt(r,n.classes):(t==="<"||t==="\\lt"||t==="⟨"?t="\\langle":(t===">"||t==="\\gt"||t==="⟩")&&(t="\\rangle"),Lm.has(t)||Am.has(t)?km(t,e,!1,r,n):yf.has(t)?Sm(t,xf[e],!1,r,n):null)}var vf=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],_f=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],Mf=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function wf(t){return t.type==="small"?"Main-Regular":t.type==="large"?"Size"+t.size+"-Regular":(t.type,"Size4-Regular")}function kf(t,e,r,n){let a={"-4":0,"-3":1,0:2}[n.mathstyle.sizeDelta];for(let s=a;s<r.length&&r[s].type!=="stack";s++){let o=xr(t,wf(r[s]));if(o.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let c=o.height+o.depth;if(r[s].type==="small"&&(r[s].mathstyle==="scriptscriptstyle"?c*=Math.max(qn[Math.max(1,n.size-2)],n.minFontScale):r[s].mathstyle==="scriptstyle"&&(c*=Math.max(qn[Math.max(1,n.size-1)],n.minFontScale))),c>e)return r[s]}return r[r.length-1]}function Yi(t,e,r,n,a,s){if(!e||e.length===0||e===".")return Qt(a);e==="<"||e==="\\lt"?e="\\langle":(e===">"||e==="\\gt")&&(e="\\rangle");let o;Am.has(e)?o=vf:Lm.has(e)?o=Mf:o=_f;let c=kf(Fa(e),r,o,a),d=new O({parent:a,mathstyle:c.mathstyle},s?.style);return c.type==="small"?bf(e,d,n,f(p({},s),{type:t})):c.type==="large"?km(e,c.size,n,d,f(p({},s),{type:t})):(c.type,Sm(e,r,n,d,f(p({},s),{type:t})))}function ni(t,e,r,n,a,s){if(e===".")return Qt(a,s?.classes);let o=Oe*a.scalingFactor,c=901,d=5/Dt,m=Math.max(r-o,n+o),y=Math.max(m/500*c,2*m-d);return Yi(t,e,y,!0,a,s)}function Qt(t,e){let r=new _(null,{classes:" ML__nulldelimiter "+(e??""),type:"ignore"});return r.width=t.getRegisterAsEm("nulldelimiterspace"),r.wrap(new O({parent:t,mathstyle:"textstyle"}))}var Le=class S9 extends b{constructor(e){var r;super({type:"placeholder",command:"\\placeholder",mode:(r=e?.mode)!=null?r:"math",style:e?.style}),this.captureSelection=!0}static fromJson(e){return new S9(e)}toJson(){return super.toJson()}render(e){let r;return this.value=e.placeholderSymbol,typeof e.renderPlaceholder=="function"?r=e.renderPlaceholder(e):r=this.createBox(e),this.caret&&(r.classes+=" ML__placeholder-selected"),r}_serialize(e){return e.skipPlaceholders?"":"\\placeholder{}"}},Em=["matrix","matrix*","pmatrix","pmatrix*","bmatrix","bmatrix*","Bmatrix","Bmatrix*","vmatrix","vmatrix*","Vmatrix","Vmatrix*"],Nl=["cases","dcases","rcases"],Tm=["align","align*","aligned","gather","gather*","gathered","split"],Sf=["array","subequations","eqnarray"];function Dm(t){return Tm.includes(t)||Nl.includes(t)||Nl.includes(t)||Em.includes(t)||Sf.includes(t)}function Va(t){return Em.includes(t)}function Km(t){return Nl.includes(t)}function Om(t){return Tm.includes(t)}function Lf(t,e,r){let n=0;for(let m of r.columns)"align"in m&&(n+=1);n=Math.max(n,r.minColumns);let a=0,s=[];for(let m of e){a=Math.max(a,Math.min(m.length,n));let y=0;for(;y<m.length;){let A=[],P=Math.min(m.length,y+n);for(;y<P;)A.push(Af(m[y],t.mode)),y+=1;if(A.length<r.minColumns)for(;A.length<r.minColumns;)A.push([new b({type:"first",mode:t.mode})]);s.push(A)}}!t.isMultiline&&s.length>0&&s[s.length-1].length===1&&Cf(s[s.length-1][0])&&s.pop();let o=[];for(let m of s){if(m.length!==a)for(let y=m.length;y<a;y++)t.isMultiline?m.push([new b({type:"first",mode:t.mode})]):m.push([new b({type:"first",mode:t.mode}),new Le]);o.push(m)}let c=0,d=0;for(let m of o){d=0;for(let y of m){for(let A of y)A.parent=t,A.parentBranch=[c,d];d+=1}c+=1}return t.isDirty=!0,o}function Af(t,e){return t.length===0?[new b({type:"first",mode:e})]:t[0].type!=="first"?[new b({type:"first",mode:e}),...t]:(t.slice(1).some(r=>r.type==="first"),t)}function Cf(t){return t.length===1&&t[0].type==="first"}var I=class E9 extends b{get isMultiline(){let e=this.environmentName;return["lines","multline","multline*","align","split","gather","gathered"].includes(e)}constructor(e,r,n,a={}){var s,o,c,d;if(super({type:"array",isRoot:a.isRoot}),this.environmentName=e,a.columns)a.columns.length===0?this.colFormat=[{align:"l"}]:this.colFormat=[...a.columns];else if(a.minColumns){let m=[];for(let y=0;y<a.minColumns;y++)m.push({align:"l"});this.colFormat=m}else this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}];this.minColumns=(s=a.minColumns)!=null?s:1,this.minRows=(o=a.minRows)!=null?o:1,this.maxRows=(c=a.maxRows)!=null?c:1/0,this._rows=Lf(this,r,{columns:this.colFormat,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows}),this.rowGaps=n,a.arraycolsep!==void 0&&(this.arraycolsep=a.arraycolsep),this.colSeparationType=a.colSeparationType,a.arraystretch!==void 0&&(this.arraystretch=a.arraystretch),a.mathstyleName&&(this.mathstyleName=a.mathstyleName),a.leftDelim&&(this.leftDelim=a.leftDelim),a.rightDelim&&(this.rightDelim=a.rightDelim),this.classes=(d=a.classes)!=null?d:[]}static fromJson(e){return new E9(e.environmentName,e.array,e.rowGaps,e)}toJson(){let e=f(p({},super.toJson()),{environmentName:this.environmentName,array:this._rows.map(r=>r.map(n=>n.map(a=>a.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows});return this.arraystretch!==void 0&&(e.arraystretch=this.arraystretch),this.arraycolsep!==void 0&&(e.arraycolsep=this.arraycolsep),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.isRoot&&(e.isRoot=!0),e.minColumns=this.minColumns,e.minRows=this.minRows,e.maxRows=this.maxRows,this.mathstyleName&&(e.mathstyleName=this.mathstyleName),this.classes.length>0&&(e.classes=this.classes),e}branch(e){var r;if(We(e))return(r=this._rows[e[0]][e[1]])!=null?r:void 0}createBranch(e){var r;return We(e)?(this.isDirty=!0,(r=this.branch(e))!=null?r:[]):[]}get rowCount(){return this._rows.length}get colCount(){return this._rows[0].length}get maxColumns(){return this.colFormat.filter(e=>!!e.align).length}removeBranch(e){if(Sr(e))return super.removeBranch(e);let[r,...n]=this.branch(e);return r.type,this._rows[e[0]][e[1]]=void 0,n.forEach(a=>{a.parent=void 0,a.parentBranch=void 0}),this.isDirty=!0,n}get hasChildren(){return this.children.length>0}get children(){let e=[];for(let r of this._rows)for(let n of r)if(n)for(let a of n)e.push(...a.children),e.push(a);return[...e,...super.children]}render(e){var r,n,a,s,o,c;let d=new O({parent:e,mathstyle:this.mathstyleName},this.style),m=d.getRegisterAsEm("arrayrulewidth"),y=d.getRegisterAsEm("arraycolsep"),A=d.getRegisterAsEm("doublerulesep"),P=(n=(r=this.arraystretch)!=null?r:d.getRegisterAsNumber("arraystretch"))!=null?n:1,Z=typeof this.arraycolsep=="number"?this.arraycolsep:y;this.colSeparationType==="small"&&(Z=.2778*(new O({parent:e,mathstyle:"scriptstyle"}).scalingFactor/e.scalingFactor));let me=P*Z0,_e=.7*me,Ge=.3*me,ve=0,He=[],De=0,Xe=this._rows.length;for(let th=0;th<Xe;++th){let Rs=this._rows[th];De=Math.max(De,Rs.length);let Ko=new O({parent:d,mathstyle:this.mathstyleName},this.style),Vc=_e/Ko.scalingFactor,yh=Ge/Ko.scalingFactor,wh={cells:[],height:0,depth:0,pos:0};for(let i1 of Rs){let u1=(a=b.createBox(Ko,i1,{type:"ignore"}))!=null?a:new _(null,{type:"ignore"});yh=Math.max(yh,u1.depth),Vc=Math.max(Vc,u1.height),wh.cells.push(u1)}let uf=(s=Ra(this.rowGaps[th]))!=null?s:0;uf>0&&(uf+=Ge,yh=Math.max(yh,uf),uf=0),th<Xe-1&&!Va(this.environmentName)&&this.environmentName!=="cases"&&this.environmentName!=="array"&&(yh+=d.getRegisterAsEm("jot")),wh.height=Vc,wh.depth=yh,ve+=Vc,wh.pos=ve,ve+=yh+uf,He.push(wh)}let Bs=ve/2+Oe,wt=[];for(let th=0;th<De;th++){let Rs=[];for(let Ko of He){let Vc=Ko.cells[th];Vc&&(Vc.depth=Ko.depth,Vc.height=Ko.height,Rs.push({box:Vc,shift:Ko.pos-Bs}))}Rs.length>0&&wt.push(new Q({individualShift:Rs}))}let li=[],An=!1,Os=!1,vh=0,Fc=!this.leftDelim,{colFormat:Hc}=this;for(let th of Hc){if("align"in th&&vh>=wt.length)break;if("align"in th)An?li.push(Ha(2*Z)):(Os||Fc)&&li.push(Ha(Z)),li.push(new _(wt[vh],{classes:"col-align-"+th.align})),vh++,An=!0,Os=!1,Fc=!1;else if("gap"in th){if(typeof th.gap=="number")li.push(Ha(th.gap));else{let Rs=Ef(e,He,Bs,th.gap);Rs&&li.push(Rs)}An=!1,Os=!1,Fc=!1}else if("separator"in th){let Rs=new _(null,{classes:"ML__vertical-separator"});Rs.height=ve,Rs.setStyle("height",ve,"em"),Rs.setStyle("border-right",`${m}em ${th.separator} currentColor`),Rs.setStyle("vertical-align",-(ve-Bs),"em");let Ko=0;Os?Ko=A-m:An&&(Ko=Z-m),Rs.left=Ko,li.push(Rs),An=!1,Os=!0,Fc=!1}}An&&!this.rightDelim&&li.push(Ha(Z));let qc=new _(li,{classes:["ML__mtable",...this.classes].join(" ")});if((!this.leftDelim||this.leftDelim===".")&&(!this.rightDelim||this.rightDelim==="."))return this.caret&&(qc.caret=this.caret),this.bind(e,qc);let e1=qc.height,df=qc.depth,So=this.bind(e,new _([this.bind(e,ni("open",(o=this.leftDelim)!=null?o:".",e1,df,d,{isSelected:this.isSelected})),qc,this.bind(e,ni("close",(c=this.rightDelim)!=null?c:".",e1,df,d,{isSelected:this.isSelected}))],{type:"ord"}));return So?(So.setStyle("display","inline-block"),this.caret&&(So.caret=this.caret),this.bind(e,this.attachSupsub(e,{base:So}))):null}_serialize(e){var r;let n=[];if(this.environmentName==="lines"?n.push("\\displaylines{"):n.push(`\\begin{${this.environmentName}}`),this.environmentName==="array"){if(n.push("{"),this.colFormat!==void 0)for(let a of this.colFormat)"align"in a&&typeof a.align=="string"?n.push(a.align):"separator"in a&&a.separator==="solid"?n.push("|"):"separator"in a&&a.separator==="dashed"&&n.push(":");n.push("}")}for(let a=0;a<this._rows.length;a++){for(let s=0;s<this._rows[a].length;s++)s>0&&n.push(" & "),n.push(b.serialize(this._rows[a][s],e));if(a<this._rows.length-1){let s=this.rowGaps[a];s!=null&&s.dimension?n.push(`\\\\[${s.dimension} ${(r=s.unit)!=null?r:"pt"}] `):n.push("\\\\ ")}}return this.environmentName==="lines"?n.push("}"):n.push(`\\end{${this.environmentName}}`),R(n)}forEachCell(e){for(let r=0;r<this.rowCount;r++)for(let n=0;n<this.colCount;n++)e(this._rows[r][n],r,n)}getCell(e,r){var n;return(n=this._rows[e])==null?void 0:n[r]}setCell(e,r,n){this.type==="array"&&Array.isArray(this._rows)&&this._rows[e][r];for(let s of this._rows[e][r])s.parent=void 0,s.parentBranch=void 0;let a=[new b({type:"first",mode:this.mode}),...n.filter(s=>s.type!=="first")];this._rows[e][r]=a,oi(this),this.isDirty=!0}addRowBefore(e){this.type==="array"&&Array.isArray(this._rows),this._rows.splice(e,0,new Array(this.colCount).fill(qa(this,!this.isMultiline))),oi(this),this.isDirty=!0}addRowAfter(e){this.type==="array"&&Array.isArray(this._rows),this._rows.splice(e+1,0,new Array(this.colCount).fill(qa(this,!this.isMultiline))),oi(this),this.isDirty=!0}removeRow(e){this.type==="array"&&Array.isArray(this._rows)&&this.rowCount>e;let r=this._rows.splice(e,1);for(let n of r)for(let a of n)if(a)for(let s of a)s.parent=void 0,s.parentBranch=void 0;oi(this),this.isDirty=!0}addColumnBefore(e){this.type==="array"&&Array.isArray(this._rows);for(let r of this._rows)r.splice(e,0,qa(this));oi(this),this.isDirty=!0}addColumnAfter(e){this.type==="array"&&Array.isArray(this._rows);for(let r of this._rows)r.splice(e+1,0,qa(this));oi(this),this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(e){this.type==="array"&&Array.isArray(this._rows)&&this.colCount>e;for(let r of this._rows){let n=r.splice(e,1);for(let a of n)if(a)for(let s of a)s.parent=void 0,s.parentBranch=void 0}oi(this),this.isDirty=!0}get cells(){let e=[];for(let r of this._rows)for(let n of r)n&&e.push(n.filter(a=>a.type!=="first"));return e}get rows(){return this._rows}};function qa(t,e=!1){let r=new b({type:"first",mode:t.mode});r.parent=t;let n=[r];if(e){let a=new Le;a.parent=t,n.push(a)}return n}function oi(t){for(let e=0;e<t.rowCount;e++)for(let r=0;r<t.colCount;r++){let n=t.getCell(e,r);if(n)for(let a of n)a&&(a.parent=t,a.parentBranch=[e,r])}}function Ha(t){let e=new _(null,{classes:"ML__arraycolsep"});return e.width=t,e}function Ef(t,e,r,n){if(!n)return null;let a=[];for(let s of e){let o=b.createBox(t,n,{type:"ignore"});o&&(o.depth=s.depth,o.height=s.height,a.push({box:o,shift:s.pos-r}))}return new Q({individualShift:a}).wrap(t)}var nt=class w9 extends b{constructor(e){super({mode:e.mode,command:e.command,style:e.style,body:e.body,type:"box"}),this.framecolor=e.framecolor,this.backgroundcolor=e.backgroundcolor,this.padding=e.padding,this.offset=e.offset,this.border=e.border}static fromJson(e){return new w9(e)}toJson(){return f(p({},super.toJson()),{framecolor:this.framecolor,backgroundcolor:this.backgroundcolor,padding:this.padding,offset:this.offset,border:this.border})}render(e){var r,n,a,s;let o=b.createBox(e,this.body,{type:"lift"});if(!o)return null;let c=e.toEm((r=this.offset)!=null?r:{dimension:0});o.depth+=c,o.setStyle("display","inline-block"),o.setStyle("position","relative"),o.setStyle("height",Math.floor(100*o.height+o.depth)/100,"em"),o.setStyle("vertical-align",-Math.floor(100*o.height)/100,"em");let d=new O({parent:e},this.style),m=d.toEm((n=this.padding)!=null?n:{register:"fboxsep"}),y=new _(null,{classes:"ML__box"});y.height=o.height+m,y.depth=o.depth+m,y.setStyle("box-sizing","border-box"),y.setStyle("position","absolute"),y.setStyle("top",-m+.3,"em"),y.setStyle("left",0),y.setStyle("height",y.height+y.depth,"em"),y.setStyle("width","100%"),this.backgroundcolor&&y.setStyle("background-color",(a=d.toColor(this.backgroundcolor))!=null?a:"transparent"),this.framecolor&&y.setStyle("border",`${d.getRegisterAsEm("fboxrule",2)}em solid ${(s=d.toColor(this.framecolor))!=null?s:"black"}`),this.border&&y.setStyle("border",this.border);let A=new _([y,o],{type:"lift"});return A.setStyle("display","inline-block"),A.setStyle("position","relative"),A.setStyle("line-height",0),A.height=o.height+m+(c>0?c:0),A.depth=o.depth+m+(c<0?-c:0),A.setStyle("padding-left",m,"em"),A.setStyle("padding-right",m,"em"),A.setStyle("height",Math.floor(100*(o.height+o.depth+2*m+Math.abs(c)))/100,"em"),A.setStyle("margin-top",-m,"em"),A.setStyle("top",Math.floor(100*(o.depth-o.height+2*m-c))/100,"em"),A.setStyle("vertical-align",Math.floor(100*(o.depth+2*m))/100,"em"),this.caret&&(A.caret=this.caret),this.attachSupsub(e,{base:A})}_serialize(e){return e.skipStyles?R([this.bodyToLatex(e),this.supsubToLatex(e)]):super._serialize(e)}},Qi=class A9 extends b{constructor(e,r){var n;super({type:"composition",mode:(n=r?.mode)!=null?n:"math",value:e})}static fromJson(e){return new A9(e.value,e)}toJson(){return super.toJson()}render(e){let r=new _(this.value,{classes:"ML__composition",type:"composition"});return this.bind(e,r),this.caret&&(r.caret=this.caret),r}_serialize(e){return""}},mt=class T9 extends b{constructor(e){super({type:"error",value:e,command:e,mode:"math"}),this.verbatimLatex=e}static fromJson(e){return new T9(e.command)}toJson(){return super.toJson()}render(e){let r=this.createBox(e,{classes:"ML__error"});return this.caret&&(r.caret=this.caret),r}},en=class C9 extends b{constructor(e,r){super({type:"group",mode:r}),this.body=e,this.boxType=e.length>1?"ord":"ignore",this.skipBoundary=!0,this.displayContainsHighlight=!1,e&&e.length===1&&e[0].command===","&&(this.captureSelection=!0)}static fromJson(e){return new C9(e.body,e.mode)}render(e){let r=b.createBox(e,this.body,{type:this.boxType});return r?(this.caret&&(r.caret=this.caret),this.bind(e,r)):null}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);return r!=null&&r.serialize?r.serialize(this,e):`{${this.bodyToLatex(e)}}`}},G=class k9 extends b{constructor(e,r,n){super({type:"leftright",style:n.style,displayContainsHighlight:!0}),this.variant=e,this.body=r,this.leftDelim=n.leftDelim,this.rightDelim=n.rightDelim}static fromJson(e){var r;return new k9((r=e.variant)!=null?r:"",e.body,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),e}_serialize(e){var r,n;let a=this.matchingRightDelim();return this.variant==="left...right"?R(["\\left",(r=this.leftDelim)!=null?r:".",this.bodyToLatex(e),"\\right",a]):this.variant==="mleft...mright"?R(["\\mleft",(n=this.leftDelim)!=null?n:".",this.bodyToLatex(e),"\\mright",a]):R([!this.leftDelim||this.leftDelim==="."?"":this.leftDelim,this.bodyToLatex(e),a])}matchingRightDelim(){var e,r;if(this.rightDelim&&this.rightDelim!=="?")return this.rightDelim;let n=(e=this.leftDelim)!=null?e:".";return(r=Xi[n])!=null?r:n}render(e){var r,n;let a=new O({parent:e},this.style);this.body;let s=new O({parent:e,mathstyle:"textstyle"},this.style),o=(r=b.createBox(a,this.body,{type:"inner"}))!=null?r:new _(null,{type:"inner"}),c=o.height/s.scalingFactor,d=o.depth/s.scalingFactor,m=[];if(this.leftDelim&&m.push(this.bind(s,ni("open",this.leftDelim,c,d,s,{isSelected:this.isSelected,classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),o&&(Bm(o.children,this,a,c,d),m.push(o)),this.rightDelim){let Z=this.containsCaret?" ML__contains-caret":"",me=this.rightDelim;me==="?"&&(a.smartFence?(me=this.matchingRightDelim(),Z+=" ML__smart-fence__close"):me="."),m.push(this.bind(s,ni("close",me,c,d,s,{isSelected:this.isSelected,classes:Z+" ML__close",mode:this.mode,style:this.style})))}let y=this.variant==="mleft...mright",A=this.leftSibling;A&&(!y&&A.isFunction&&(y=!0),!y&&A.type==="subsup"&&(n=A.leftSibling)!=null&&n.isFunction&&(y=!0));let P=new _(m,{type:y?"close":"inner",classes:"ML__left-right"});return P.setStyle("margin-top",`${-o.depth}em`),P.setStyle("height",`${o.height+o.depth}em`),this.caret&&(P.caret=this.caret),this.bind(a,P.wrap(a))}};function Bm(t,e,r,n,a){if(t)for(let s=0;s<t.length;s++){let o=t[s];o.type==="middle"?(t[s]=e.bind(r,ni("inner",o.value,n,a,r,{isSelected:e.isSelected})),t[s].caret=o.caret,t[s].isSelected=o.isSelected,t[s].cssId=o.cssId,t[s].htmlData=o.htmlData,t[s].htmlStyle=o.htmlStyle,t[s].attributes=o.attributes,t[s].cssProperties=o.cssProperties):o.children&&Bm(o.children,e,r,n,a)}}var tn=class M9 extends b{constructor(e,r){var n;super({type:"macro",command:e,style:r.style}),this.body=r.body,r.captureSelection===void 0?r.args?this.captureSelection=!1:this.captureSelection=!0:this.captureSelection=r.captureSelection,this.macroArgs=r.args,this.expand=(n=r.expand)!=null?n:!1}static fromJson(e){return new M9(e.command,e)}toJson(){let e=super.toJson();return this.expand&&(e.expand=!0),this.captureSelection!==void 0&&(e.captureSelection=this.captureSelection),this.macroArgs&&(e.args=this.macroArgs),e}_serialize(e){var r;return e.expandMacro&&this.expand?this.bodyToLatex(e):this.command+((r=this.macroArgs)!=null?r:"")}applyStyle(e,r){let n={};e.color&&(n.color=e.color),e.backgroundColor&&(n.backgroundColor=e.backgroundColor),super.applyStyle(n,r)}render(e){let r=b.createBox(e,this.body,{type:"lift"});return r?(this.caret&&(r.caret=this.caret),this.bind(e,r)):null}},Wa=class R9 extends b{constructor(){super({type:"macro-argument"})}static fromJson(e){return new R9}toJson(){return super.toJson()}_serialize(e){return""}render(e){return null}},rn=class P9 extends b{constructor(e,r,n=!1,a,s){var o;super({type:"prompt",mode:(o=s?.mode)!=null?o:"math",style:s?.style,command:"\\placeholder"}),this.body=a,this.correctness=r,this.placeholderId=e,this.locked=n,this.captureSelection=this.locked}static fromJson(e){return new P9(e.placeholderId,e.correctness,e.locked,e.body,e)}toJson(){let e=super.toJson();return this.placeholderId&&(e.placeholderId=this.placeholderId),this.body||delete e.body,this.body&&(e.body=this.body.filter(r=>r.type!=="first").map(r=>r.toJson())),this.correctness&&(e.correctness=this.correctness),e.locked=this.locked,e}render(e){let r=new O({parent:e}),n=r.getRegisterAsEm("fboxsep"),a=n,s=n,o=b.createBox(e,this.body);if(!o)return null;o.height||(o.height=r.metrics.xHeight),o.setStyle("vertical-align",-o.height,"em"),this.correctness==="correct"?o.setStyle("color","var(--correct-color, var(--ML__correct-color))"):this.correctness==="incorrect"&&o.setStyle("color","var(--incorrect-color, var(--ML__incorrect-color))");let c=new _(o,{type:"ord"});c.setStyle("display","inline-block"),c.setStyle("height",o.height+o.depth,"em"),c.setStyle("vertical-align",-s,"em");let d="ML__prompt ";this.locked?d+=" ML__lockedPromptBox ":d+=" ML__editablePromptBox ",this.correctness==="correct"?d+=" ML__correctPromptBox ":this.correctness==="incorrect"&&(d+=" ML__incorrectPromptBox "),this.containsCaret&&(d+=" ML__focusedPromptBox ");let m=new _(null,{classes:d,attributes:{part:"prompt"}});m.height=c.height+s,m.depth=c.depth+s,m.width=c.width+2*a,m.setStyle("position","absolute"),m.setStyle("height",`calc(${c.height+c.depth+2*s}em - 2px)`),a===0&&m.setStyle("width","100%"),a!==0&&(m.setStyle("width",`calc(100% + ${2*a}em)`),m.setStyle("top",n,"em"),m.setStyle("left",-a,"em")),(!this.body||this.body.length===1)&&(m.width=3*a,m.setStyle("width",`calc(100% + ${3*a}em)`),m.setStyle("left",-1.5*a,"em"));let y="";this.correctness==="incorrect"&&(y+='<line x1="3%"  y1="97%" x2="97%" y2="3%" stroke-width="0.5" stroke="var(--incorrect-color, var(--ML__incorrect-color))" stroke-linecap="round" />'),y&&(m.svgOverlay=y);let A=new _([m,c],{classes:"ML__prompt-atom"});return c.setStyle("line-height",1),A.setStyle("position","relative"),A.setStyle("display","inline-block"),A.setStyle("line-height",0),A.height=c.height+s+.2,A.depth=c.depth+s,A.left=a,A.right=a,A.setStyle("height",c.height+s,"em"),A.setStyle("top",c.depth-c.height,"em"),A.setStyle("vertical-align",c.depth+s,"em"),A.setStyle("margin-left",.5,"em"),A.setStyle("margin-right",.5,"em"),this.caret&&(A.caret=this.caret),this.bind(r,this.attachSupsub(e,{base:A}))}_serialize(e){var r;let n=(r=this.bodyToLatex(e))!=null?r:"";if(e.skipPlaceholders)return n;let a="\\placeholder";return this.placeholderId&&(a+=`[${this.placeholderId}]`),this.correctness==="correct"?a+="[correct]":this.correctness==="incorrect"&&(a+="[incorrect]"),this.locked&&(a+="[locked]"),q(a,n)}},er=class I9 extends b{constructor(e){super({type:"subsup",style:e?.style}),this.subsupPlacement="auto"}get children(){if(!this._children){let e=[],r=this.branch("subscript");if(r)for(let a of r)e.push(...a.children),e.push(a);let n=this.branch("superscript");if(n)for(let a of n)e.push(...a.children),e.push(a);this._children=e}return this._children}static fromJson(e){let r=new I9(e);for(let n of Lr)e[n]&&r.setChildren(e[n],n);return r}render(e){var r;let n=new O({parent:e,isPhantom:!0}),a=this.leftSibling,s=(r=a.render(n))!=null?r:new _(null),o=new _(null);return o.height=s.height,o.depth=s.depth,this.attachSupsub(e,{base:o,isCharacterBox:a.isCharacterBox(),type:"ignore"})}_serialize(e){return this.supsubToLatex(e)}};function nn(t){return t?!/^(<$$>|<$>|<space>|<{>|<}>|#[0-9\?]|\\.+)$/.test(t):!1}var Ua=class{constructor(t,e,r){this.errors=[],this.index=0,this.endCount=0;var n,a,s,o;r!=null||(r={}),this.tokens=t,this.context=e instanceof O&&!(r!=null&&r.parseMode)&&!r.mathstyle?e:new O({from:e,mathstyle:r.mathstyle},r.style),this.args=(n=r.args)!=null?n:void 0,this.smartFence=this.context.smartFence,this.parsingContext={parent:void 0,mathlist:[],style:(a=r.style)!=null?a:{},parseMode:(s=r.parseMode)!=null?s:"math",mathstyle:(o=r.mathstyle)!=null?o:"displaystyle",tabular:!1}}beginContext(t){var e,r,n,a,s,o;if(t!=null&&t.root){this.parsingContext={parent:this.parsingContext.parent,mathlist:[],style:{},parseMode:(e=t?.mode)!=null?e:"math",mathstyle:(r=t?.mathstyle)!=null?r:"displaystyle",tabular:(n=t?.tabular)!=null?n:!1};return}let c=this.parsingContext,d={parent:c,mathlist:[],style:p({},c.style),parseMode:(a=t?.mode)!=null?a:c.parseMode,mathstyle:(s=t?.mathstyle)!=null?s:c.mathstyle,tabular:(o=t?.tabular)!=null?o:!1};this.parsingContext=d}endContext(){this.parsingContext=this.parsingContext.parent}onError(t){this.errors.push(p({before:vr(this.tokens.slice(this.index,this.index+10)),after:vr(this.tokens.slice(Math.max(0,this.index-10),this.index))},t))}get mathlist(){return this.parsingContext.mathlist}set mathlist(t){this.parsingContext.mathlist=t}get parseMode(){return this.parsingContext.parseMode}set parseMode(t){this.parsingContext.parseMode=t}get tabularMode(){return this.parsingContext.tabular}get style(){let t=this.parsingContext;for(;t;){if(t.style)return p({},t.style);t=t.parent}return{}}set style(t){this.parsingContext.style=t}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}next(){this.index+=1}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}expandUnicode(){if(!this.peek()||this.parseMode!=="math")return;let t=eu(this.peek());t&&this.tokens.splice(this.index,1,...qi(t))}match(t){return this.tokens[this.index]===t?(this.index++,!0):!1}lastSubsupAtom(){let t;return this.mathlist.length>0&&(t=this.mathlist[this.mathlist.length-1],t.type==="subsup"||t.subsupPlacement!==void 0)||(t=new er({style:this.style}),this.mathlist.push(t)),t}hasPattern(t){return t.test(this.tokens[this.index])}hasInfixCommand(){var t;let{index:e}=this;if(e<this.tokens.length&&this.tokens[e].startsWith("\\")){let r=se(this.tokens[e],this.parseMode);return!r||r.definitionType==="symbol"||r.ifMode&&!r.ifMode.includes(this.parseMode)?!1:(t=r.infix)!=null?t:!1}return!1}matchColumnSeparator(){return!this.tabularMode||this.peek()!=="&"?!1:(this.index++,!0)}matchRowSeparator(){if(!this.tabularMode)return!1;let t=this.peek();return t!=="\\\\"&&t!=="\\cr"&&t!=="\\tabularnewline"?!1:(this.index++,!0)}placeholder(){var t;let e=(t=this.args)==null?void 0:t.call(this,"?");return e?he(e,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new Le({mode:this.parseMode,style:this.style})]}skipWhitespace(){for(;this.match("<space>"););}skipUntilToken(t){let e=this.tokens[this.index];for(;e&&e!==t;)e=this.tokens[++this.index];e===t&&this.index++}skipFiller(){for(;this.match("\\relax")||this.match("<space>"););}matchKeyword(t){let e=this.index,r=this.end(),n="";for(;!r;){let s=this.get();nn(s)?(n+=s,r=this.end()||n.length>=t.length):r=!0}let a=t.toUpperCase()===n.toUpperCase();return a||(this.index=e),a}scanString(){let t="";for(;!this.end();){let e=this.peek();if(e==="]")return t;if(e==="<space>")t+=" ";else if(e.startsWith("\\"))this.onError({code:"unexpected-command-in-string"}),t+=e.substring(1);else if(nn(e))t+=e;else return t;this.next()}return t}scanBalancedString(){let t="",e=this.end(),r=1;for(;!e;){let n=this.get();n==="<space>"?t+=" ":n==="<{>"?(t+="{",r+=1):n==="<}>"?(r-=1,r>0?t+="}":this.index-=1):n==="<$>"?t+="$":n==="<$$>"?t+="$$":t+=n,e=r===0||this.end()}return t}scanLiteralGroup(){var t;if(!this.match("<{>"))return"";let e="",r=1;for(;r>0&&!this.end();){let n=this.get();n==="<}>"?(r-=1,r>0&&(e+="}")):n==="<{>"?(r+=1,e+="{"):(/\\[a-zA-Z]+$/.test(e)&&/^[a-zA-Z]/.test(n)&&(e+=" "),e+=(t={"<space>":" ","<$$>":"$$","<$>":"$"}[n])!=null?t:n)}return e}scanNumber(t=!0){var e,r;let n=!1,a=this.peek();for(;a==="<space>"||a==="+"||a==="-";)this.get(),a==="-"&&(n=!n),a=this.peek();t=!!t;let s=10,o=/\d/;if(this.match("'"))s=8,o=/[0-7]/,t=!0;else if(this.match('"'))s=16,o=/[\dA-F]/,t=!0;else if(this.match("x"))s=16,o=/[\dA-Fa-f]/,t=!0;else if(this.match("`"))return a=this.get(),a?a.length===2&&a.startsWith("\\")?{number:(n?-1:1)*((e=a.codePointAt(1))!=null?e:0),base:"alpha"}:{number:(n?-1:1)*((r=a.codePointAt(0))!=null?r:0),base:"alpha"}:null;let c="";for(;this.hasPattern(o);)c+=this.get();if(!t&&(this.match(".")||this.match(",")))for(c+=".";this.hasPattern(o);)c+=this.get();let d=t?Number.parseInt(c,s):Number.parseFloat(c);return Number.isNaN(d)?null:{number:n?-d:d,base:s===16?"hexadecimal":s===8?"octal":"decimal"}}scanRegister(){var t;let e=this.index,r=this.scanNumber(!1);if(this.skipWhitespace(),this.match("\\relax"))return r;let n=!1;if(r===null)for(;;){let s=this.peek();if(s==="-")n=!n;else if(s!=="+")break;this.next(),this.skipWhitespace()}if(this.match("\\global")){this.skipWhitespace();let s=this.get();return s.startsWith("\\")?r?{register:s,global:!0,factor:(n?-1:1)*r.number}:n?{register:s,global:!0,factor:-1}:{register:s,global:!0}:(this.index=e,null)}let a=this.get();return a!=null&&a.startsWith("\\")?(a=a.substring(1),this.context.registers[a]?!n||r!==null?{register:a,factor:(n?-1:1)*((t=r?.number)!=null?t:1)}:{register:a}:(this.index=e,null)):(this.index=e,null)}scanValue(){let t=this.scanRegister();if(t)return t;let e=this.index,r=this.scanGlueOrDimen();if(r&&("unit"in r||"glue"in r&&"unit"in r.glue))return r;this.index=e;let n=this.scanNumber();if(n)return n;if(this.end()||!nn(this.peek()))return null;let a=this.scanString();return a.length>0?{string:a}:null}scanDimen(){let t=this.scanNumber(!1);if(t===null)return null;let e=t.number;this.skipWhitespace(),this.matchKeyword("true"),this.skipWhitespace();let r;return this.matchKeyword("pt")?r="pt":this.matchKeyword("mm")?r="mm":this.matchKeyword("cm")?r="cm":this.matchKeyword("ex")?r="ex":this.matchKeyword("px")?r="px":this.matchKeyword("em")?r="em":this.matchKeyword("bp")?r="bp":this.matchKeyword("dd")?r="dd":this.matchKeyword("pc")?r="pc":this.matchKeyword("in")?r="in":this.matchKeyword("mu")&&(r="mu"),r?{dimension:e,unit:r}:{dimension:e}}scanGlueOrDimen(){let t=this.scanDimen();if(t===null)return null;if(this.skipWhitespace(),this.match("\\relax"))return t;let e={glue:t};if(this.matchKeyword("plus")){let r=this.scanDimen();if(r)e.grow=r;else return e}if(this.skipWhitespace(),this.match("\\relax"))return e;if(this.skipWhitespace(),this.matchKeyword("minus")){let r=this.scanDimen();if(r)e.shrink=r;else return e}return!e.grow&&!e.shrink?t:e}scanColspec(){this.skipWhitespace();let t=[];for(;!this.end()&&!(this.peek()==="<}>"||this.peek()==="]");){let e=this.get();e==="c"||e==="r"||e==="l"?t.push({align:e}):e==="|"?t.push({separator:"solid"}):e===":"?t.push({separator:"dashed"}):e==="@"&&(this.match("<{>")&&(this.beginContext({mode:"math"}),t.push({gap:this.scan(r=>r==="<}>")}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return t}scanModeSet(){let t;if(this.match("\\(")&&(t="textstyle"),!t&&this.match("\\[")&&(t="displaystyle"),!t)return null;this.beginContext({mode:"math",mathstyle:t});let e=this.scan(r=>r===(t==="displaystyle"?"\\]":"\\)"));return this.match(t==="displaystyle"?"\\]":"\\)")||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),e}scanModeShift(){let t="";if(this.match("<$>")&&(t="<$>"),!t&&this.match("<$$>")&&(t="<$$>"),!t)return null;this.beginContext({mode:"math",mathstyle:t==="<$>"?"textstyle":"displaystyle"});let e=this.scan(r=>r===t);return this.match(t)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),e}scanEnvironment(){if(!this.match("\\begin"))return null;let t=this.scanArgument("string");if(!t)return null;let e=nu(t);if(!e)return this.onError({code:"unknown-environment",arg:t}),null;let r=[];if(e.params)for(let c of e.params)if(c.isOptional)r.push(this.scanOptionalArgument(c.type));else{let d=this.scanArgument(c.type);d||this.onError({code:"missing-argument",arg:t}),r.push(d)}this.beginContext({tabular:e.tabular,root:e.rootOnly});let n=[],a=[],s=[],o=!1;do if(this.end()&&(this.onError({code:"unbalanced-environment",arg:t}),o=!0),!o&&this.match("\\end")&&(this.scanArgument("string")!==t&&this.onError({code:"unbalanced-environment",arg:t}),o=!0),!o)if(this.matchColumnSeparator())s.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){s.push(this.mathlist),this.mathlist=[];let c=null;this.skipWhitespace(),this.match("[")&&(c=this.scanDimen(),this.skipWhitespace(),this.match("]")),a.push(c??{dimension:0}),n.push(s),s=[]}else this.mathlist.push(...this.scan(c=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline"].includes(c)));while(!o);return s.push(this.mathlist),s.length>0&&n.push(s),this.endContext(),e.rootOnly&&(this.index=this.tokens.length),e.createAtom(t,n,a,r,this.context.maxMatrixCols)}scanExpression(){let t=this.mathlist;if(this.mathlist=[],this.parseExpression()){let e=this.mathlist;return this.mathlist=t,e}return this.mathlist=t,null}scan(t){this.beginContext(),t||(t=o=>o==="<}>");let e="",r=null,n=[],a=null;for(;!this.end()&&!t(this.peek());)this.hasInfixCommand()&&!e?(e=this.get(),r=se(e,"math"),r&&(n=this.scanArguments(r)[1]),a=this.mathlist,this.mathlist=[]):this.parseExpression();let s;return e?(n.unshift(this.mathlist),a&&n.unshift(a),s=[r.createAtom({command:e,args:n,style:this.style,mode:this.parseMode})]):s=this.mathlist,this.endContext(),s}scanGroup(){let t=this.index;if(!this.match("<{>"))return null;let e=this.scan(n=>n==="<}>");if(this.match("<}>")||this.onError({code:"unbalanced-braces"}),e.length===1&&e[0].type==="placeholder")return e[0];let r=new en(e,this.parseMode);return r.verbatimLatex=vr(this.tokens.slice(t,this.index)),r}scanSmartFence(){if(this.skipWhitespace(),!this.match("("))return null;this.beginContext();let t=1;for(;!this.end()&&t!==0;)this.match("(")&&(t+=1),this.match(")")&&(t-=1),t!==0&&this.parseExpression();let e=new G("",this.mathlist,{leftDelim:"(",rightDelim:t===0?")":"?"});return this.endContext(),e}scanDelim(){this.skipWhitespace();let t=this.peek();if(!t)return this.onError({code:"unexpected-end-of-string"}),null;if(!nn(t)&&!t.startsWith("\\"))return null;this.next();let e=se(t,"math");return e?e.definitionType==="function"&&e.ifMode&&!e.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:t}),null):e.definitionType==="symbol"&&(e.type==="mopen"||e.type==="mclose")||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(t)?t:(this.onError({code:"unexpected-delimiter",arg:t}),null):(this.onError({code:"unknown-command",arg:t}),null)}scanLeftRight(){var t;if(this.match("\\right"))return this.onError({code:"unbalanced-braces"}),new mt("\\right");if(this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),new mt("\\mright");let e="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;e="\\mright"}let r=this.scanDelim();if(!r)return this.onError({code:"unexpected-delimiter"}),new mt(e==="\\right"?"\\left":"\\mleft");for(this.beginContext();!this.end()&&!this.match(e);)this.parseExpression();let n=this.mathlist;this.endContext();let a=(t=this.scanDelim())!=null?t:".";return new G(e==="\\right"?"left...right":"mleft...mright",n,{leftDelim:r,rightDelim:a,style:this.style})}parseSupSub(){if(this.parseMode!=="math")return!1;let t=this.peek();if(t!=="^"&&t!=="_"&&t!=="'")return!1;let e=this.lastSubsupAtom();for(;t==="^"||t==="_"||t==="'";)this.match("'")?this.match("'")?e.addChild(new b({type:"mord",command:"\\doubleprime",mode:"math",value:"′′"}),"superscript"):e.addChild(new b({type:"mord",command:"\\prime",mode:"math",value:"′"}),"superscript"):(this.match("^")||this.match("_"))&&e.addChildren(C(this.scanArgument("expression")),t==="_"?"subscript":"superscript"),t=this.peek();return!0}parseLimits(){if(this.parseMode!=="math")return!1;let t=this.match("\\limits"),e=!t&&this.match("\\nolimits"),r=!e&&!t&&this.match("\\displaylimits");if(!t&&!e&&!r)return!1;let n=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return n===null?!1:(n.explicitSubsupPlacement=!0,t&&(n.subsupPlacement="over-under"),e&&(n.subsupPlacement="adjacent"),r&&(n.subsupPlacement="auto"),!0)}scanArguments(t){if(!(t!=null&&t.params))return[void 0,[]];let e,r=[],n=t.infix?2:0;for(;n<t.params.length;){let a=t.params[n];a.type==="rest"?r.push(this.scan(s=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(s))):a.isOptional?r.push(this.scanOptionalArgument(a.type)):a.type.endsWith("*")?e=a.type.slice(0,-1):r.push(this.scanArgument(a.type)),n+=1}return[e,r]}scanSymbolOrLiteral(){let t=this.peek();if(!t)return null;this.next();let e;if(nn(t)){let r=ge.createAtom(this.parseMode,t,p({},this.style));return r?[r]:null}if(e=this.scanMacro(t),e)return[e];if(t.startsWith("\\")){let r=se(t,this.parseMode);if(!r)return this.onError({code:"unknown-command",arg:t}),[new mt(t)];if(r.definitionType==="symbol"){let n=p({},this.style);r.variant&&(n.variant=r.variant),e=new b({type:r.type,command:t,style:n,value:String.fromCodePoint(r.codepoint),mode:this.parseMode,verbatimLatex:t})}else{if(r.applyMode||r.applyStyle||r.infix)return this.onError({code:"invalid-command",arg:t}),[new mt(t)];r.createAtom&&(e=r.createAtom({command:t,args:[],style:this.style,mode:this.parseMode}))}}return e?[e]:null}scanArgument(t){var e;this.skipFiller();let r=this.parseMode;if(t==="auto"&&(t=r),!this.match("<{>")){if(t==="string")return this.scanString();if(t==="value")return this.scanValue();if(t==="delim")return(e=this.scanDelim())!=null?e:".";if(t==="expression")return this.scanExpression();if(t==="math"){t!==r&&this.beginContext({mode:"math"});let a=this.scanSymbolOrLiteral();return t!==r&&this.endContext(),a}if(t==="text"){t!==r&&this.beginContext({mode:"text"});let a=this.scanSymbolOrLiteral();return t!==r&&this.endContext(),a}return t==="balanced-string"?null:t==="rest"?this.scan(a=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(a)):null}if(t==="text"){this.beginContext({mode:"text"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let a=this.mathlist;return this.endContext(),{group:a}}if(t==="math"){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let a=this.mathlist;return this.endContext(),{group:a}}let n=null;if(t==="expression"){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let a=this.mathlist;return this.endContext(),{group:a}}return t==="string"?n=this.scanString():t==="balanced-string"?n=this.scanBalancedString():t==="colspec"?n=this.scanColspec():t==="value"&&(n=this.scanValue()),this.skipUntilToken("<}>"),n}scanOptionalArgument(t){if(t=t==="auto"?this.parseMode:t,this.skipFiller(),!this.match("["))return null;let e=null;for(;!this.end()&&!this.match("]");)if(t==="string")e=this.scanString();else if(t==="value")e=this.scanValue();else if(t==="colspec")e=this.scanColspec();else if(t==="bbox"){let r={},n=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let a of n){let s=a.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(s)r.padding={dimension:parseInt(s[1]),unit:s[2]};else{let o=a.match(/^\s*border\s*:\s*(.*)/);o?r.border=o[1]:r.backgroundcolor={string:a}}}e=r}else t==="math"&&(this.beginContext({mode:"math"}),e=this.mathlist.concat(this.scan(r=>r==="]")),this.endContext());return e}scanSymbolOrCommand(t){var e,r,n;if(t==="\\placeholder"){let c=this.scanOptionalArgument("string"),d=this.scanOptionalArgument("math"),m=b.serialize(d,{defaultMode:"math"}),y=[],A;!A&&m==="correct"?A="correct":!A&&m==="incorrect"?A="incorrect":m!==""&&(y=d);let P=this.scanOptionalArgument("string")==="locked",Z=this.scanArgument("auto"),me;return Z&&Array.isArray(Z)&&Z.length>0?me=Z:Z&&typeof Z=="object"&&"group"in Z?me=Z.group:me=y,c?[new rn(c,A,P,me??y,{mode:this.parseMode,style:this.style})]:[new Le({mode:this.parseMode,style:this.style})]}if(t==="\\renewcommand"||t==="\\newcommand"||t==="\\providecommand"||t==="\\def"){let c=this.index,d=this.scanLiteralGroup()||this.next();if(!d)return null;if(this.context.registers[d.substring(1)]){let m=this.scanArgument("string");m!==null&&(this.context.registers[d.substring(1)]=m);let y=R([t,vr(this.tokens.slice(c,this.index))]);return[new b({type:"text",value:"",verbatimLatex:y})]}}let a=this.scanMacro(t);if(a)return[a];let s=se(t,this.parseMode);if(!s)return this.parseMode==="text"?(/[a-zA-Z]/.test((e=this.peek())!=null?e:"")&&(t+=" "),[...t].map(c=>new b({type:"text",value:c,mode:"text",style:this.style}))):(this.onError({code:"unknown-command",arg:t}),[new mt(t)]);let o=this.index;if(s.definitionType==="symbol"){let c=p({},this.style);s.variant&&(c.variant=s.variant),a=new b({type:s.type,command:t,style:c,value:String.fromCodePoint(s.codepoint),mode:this.parseMode})}else{if(s.ifMode&&!s.ifMode.includes(this.parseMode))return[];let c=this.parseMode;s.applyMode&&(this.parseMode=s.applyMode);let d,m=[];if(s.parse?m=s.parse(this):[d,m]=this.scanArguments(s),this.parseMode=c,s.applyMode&&!s.applyStyle&&!s.createAtom)return C(m[0]);if(s.infix)return this.onError({code:"too-many-infix-commands",arg:t}),null;if(typeof s.createAtom=="function")a=s.createAtom({command:t,args:m,style:this.style,mode:this.parseMode}),d&&(a.body=C(this.scanArgument(d)));else if(typeof s.applyStyle=="function"){let y=s.applyStyle(this.style,t,m,this.context),A=this.parseMode;if(s.applyMode&&(this.parseMode=s.applyMode),d){let P=this.style;this.style=y;let Z=this.scanArgument(d);return this.style=P,this.parseMode=A,C(Z)}this.style=y}else a=new b({type:"mord",command:(r=s.command)!=null?r:t,style:p({},this.style),value:t,mode:(n=s.applyMode)!=null?n:this.parseMode})}if(!a)return null;if(a instanceof b&&a.verbatimLatex===void 0&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(t)){let c=R([t,vr(this.tokens.slice(o,this.index))]);c&&(a.verbatimLatex=c)}if(a.verbatimLatex===null&&(a.verbatimLatex=void 0),a.isFunction&&this.smartFence){let c=this.scanSmartFence();if(c)return[a,c]}return[a]}scanSymbolCommandOrLiteral(){this.expandUnicode();let t=this.get();if(!t)return null;if(nn(t)){let e=ge.createAtom(this.parseMode,t,p({},this.style));if(!e)return null;if(e.isFunction&&this.smartFence){let r=this.scanSmartFence();if(r)return[e,r]}return[e]}return t.startsWith("\\")?this.scanSymbolOrCommand(t):t==="<space>"?this.parseMode==="text"?[new $e(" "," ",this.style)]:null:(t==="<}>"?this.onError({latex:"",code:"unbalanced-braces"}):this.onError({latex:"",code:"unexpected-token",arg:t}),null)}scanMacro(t){var e;let r=this.context.getMacro(t);if(!r)return null;let n=this.index,a=r.args,s={"?":(e=this.args)==null?void 0:e.call(this,"?")};for(let o=1;o<=a;o++){let c=this.scanLiteralGroup();if(!c){let d=this.index;this.scanExpression(),c=vr(this.tokens.slice(d,this.index))}s[o]=c}return new tn(t,{expand:r.expand,captureSelection:r.captureSelection,args:n===this.index?null:vr(this.tokens.slice(n,this.index)),style:this.parsingContext.style,body:he(r.def,{context:this.context,parseMode:this.parseMode,args:o=>s[o],mathstyle:this.parsingContext.mathstyle,style:this.parsingContext.style})})}parseExpression(){var t,e,r,n;let a=(n=(r=(e=(t=this.scanEnvironment())!=null?t:this.scanModeShift())!=null?e:this.scanModeSet())!=null?r:this.scanGroup())!=null?n:this.scanLeftRight();if(a===null){if(this.parseSupSub()||this.parseLimits())return!0;a=this.scanSymbolCommandOrLiteral()}return a?(Y(a)?this.mathlist.push(...a):this.mathlist.push(a),!0):!1}};function he(t,e){var r,n,a,s;let o=(r=e?.args)!=null?r:void 0,c=new Ua(qi(t,o),e?.context,{args:o,mathstyle:(n=e?.mathstyle)!=null?n:"displaystyle",parseMode:(a=e?.parseMode)!=null?a:"math",style:(s=e?.style)!=null?s:{}}),d=[];for(;!c.end();)d.push(...c.scan(()=>!1));return d}function ja(t,e){var r;let n=new Ua(qi(t,null),e?.context,{mathstyle:"displaystyle",parseMode:(r=e?.parseMode)!=null?r:"math"});for(;!n.end();)n.scan();return n.errors}var Xn=class D9 extends b{constructor(e,r){super({type:"chem"},{command:e,mode:"math"});let n=ce.go(S.go(r,e==="\\pu"?"pu":"ce"),!1);this.body=he(n),this._verbatimLatex=e+"{"+r+"}",this.arg=r,this.captureSelection=!0}static fromJson(e){return new D9(e.command,e.arg)}set verbatimLatex(e){}get verbatimLatex(){return this._verbatimLatex}toJson(){return f(p({},super.toJson()),{arg:this.arg})}render(e){let r=b.createBox(e,this.body,{type:"inner"});return this.caret&&(r.caret=this.caret),this.bind(e,r)}_serialize(e){return this.verbatimLatex,this.verbatimLatex}};v(["ce","pu"],"{chemformula:balanced-string}",{createAtom:t=>{var e;return new Xn(t.command,(e=t.args[0])!=null?e:"")}});var S={go:function(t,e){if(!t)return[];e===void 0&&(e="ce");var r="0",n={};n.parenthesisLevel=0,t=t.replace(/\n/g," "),t=t.replace(/[\u2212\u2013\u2014\u2010]/g,"-"),t=t.replace(/[\u2026]/g,"...");for(var a,s=10,o=[];;){a!==t?(s=10,a=t):s--;var c=S.stateMachines[e],d=c.transitions[r]||c.transitions["*"];e:for(var m=0;m<d.length;m++){var y=S.patterns.match_(d[m].pattern,t);if(y){for(var A=d[m].task,P=0;P<A.action_.length;P++){var Z;if(c.actions[A.action_[P].type_])Z=c.actions[A.action_[P].type_](n,y.match_,A.action_[P].option);else if(S.actions[A.action_[P].type_])Z=S.actions[A.action_[P].type_](n,y.match_,A.action_[P].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+A.action_[P].type_+")"];S.concatArray(o,Z)}if(r=A.nextState||r,t.length>0){if(A.revisit||(t=y.remainder),!A.toContinue)break e}else return o}}if(s<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(t,e){if(e)if(Object.prototype.toString.call(e)==="[object Array]")for(var r=0;r<e.length;r++)t.push(e[r]);else t.push(e)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return e&&e[0]?{match_:e.slice(1),remainder:t.substr(e[0].length)}:null},"(-)(9)^(-9)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return e&&e[0]?{match_:e.slice(1),remainder:t.substr(e[0].length)}:null},"state of aggregation $":function(t){var e=S.patterns.findObserveGroups(t,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(e&&e.remainder.match(/^($|[\s,;\)\]\}])/))return e;var r=t.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return r?{match_:r[0],remainder:t.substr(r[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(t){return S.patterns.findObserveGroups(t,"^{","","","}")},"^($...$)":function(t){return S.patterns.findObserveGroups(t,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(t){return S.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(t){return S.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(t){return S.patterns.findObserveGroups(t,"_{","","","}")},"_($...$)":function(t){return S.patterns.findObserveGroups(t,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(t){return S.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(t){return S.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(t){return S.patterns.findObserveGroups(t,"","{","}","")},"{(...)}":function(t){return S.patterns.findObserveGroups(t,"{","","","}")},"$...$":function(t){return S.patterns.findObserveGroups(t,"","$","$","")},"${(...)}$":function(t){return S.patterns.findObserveGroups(t,"${","","","}$")},"$(...)$":function(t){return S.patterns.findObserveGroups(t,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(t){return S.patterns.findObserveGroups(t,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(t){return S.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(t){return S.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(t){return S.patterns.findObserveGroups(t,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(t){return S.patterns.findObserveGroups(t,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(t){return S.patterns.findObserveGroups(t,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(t){return S.patterns.findObserveGroups(t,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(t){var e;if(e=t.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/),e)return{match_:e[0],remainder:t.substr(e[0].length)};var r=S.patterns.findObserveGroups(t,"","$","$","");return r&&(e=r.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/),e)?{match_:e[0],remainder:t.substr(e[0].length)}:null},amount2:function(t){return this.amount(t)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(t){if(t.match(/^\([a-z]+\)$/))return null;var e=t.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return e?{match_:e[0],remainder:t.substr(e[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(t,e,r,n,a,s,o,c,d,m){var y=function(ve,He){if(typeof He=="string")return ve.indexOf(He)!==0?null:He;var De=ve.match(He);return De?De[0]:null},A=function(ve,He,De){for(var Xe=0;He<ve.length;){var Bs=ve.charAt(He),wt=y(ve.substr(He),De);if(wt!==null&&Xe===0)return{endMatchBegin:He,endMatchEnd:He+wt.length};if(Bs==="{")Xe++;else if(Bs==="}"){if(Xe===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];Xe--}He++}return null},P=y(t,e);if(P===null||(t=t.substr(P.length),P=y(t,r),P===null))return null;var Z=A(t,P.length,n||a);if(Z===null)return null;var me=t.substring(0,n?Z.endMatchEnd:Z.endMatchBegin);if(s||o){var _e=this.findObserveGroups(t.substr(Z.endMatchEnd),s,o,c,d);if(_e===null)return null;var Ge=[me,_e.match_];return{match_:m?Ge.join(""):Ge,remainder:_e.remainder}}else return{match_:me,remainder:t.substr(Z.endMatchEnd)}},match_:function(t,e){var r=S.patterns.patterns[t];if(r===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+t+")"];if(typeof r=="function")return S.patterns.patterns[t](e);var n=e.match(r);if(n){var a;return n[2]?a=[n[1],n[2]]:n[1]?a=n[1]:a=n[0],{match_:a,remainder:e.substr(n[0].length)}}return null}},actions:{"a=":function(t,e){t.a=(t.a||"")+e},"b=":function(t,e){t.b=(t.b||"")+e},"p=":function(t,e){t.p=(t.p||"")+e},"o=":function(t,e){t.o=(t.o||"")+e},"q=":function(t,e){t.q=(t.q||"")+e},"d=":function(t,e){t.d=(t.d||"")+e},"rm=":function(t,e){t.rm=(t.rm||"")+e},"text=":function(t,e){t.text_=(t.text_||"")+e},insert:function(t,e,r){return{type_:r}},"insert+p1":function(t,e,r){return{type_:r,p1:e}},"insert+p1+p2":function(t,e,r){return{type_:r,p1:e[0],p2:e[1]}},copy:function(t,e){return e},rm:function(t,e){return{type_:"rm",p1:e||""}},text:function(t,e){return S.go(e,"text")},"{text}":function(t,e){var r=["{"];return S.concatArray(r,S.go(e,"text")),r.push("}"),r},"tex-math":function(t,e){return S.go(e,"tex-math")},"tex-math tight":function(t,e){return S.go(e,"tex-math tight")},bond:function(t,e,r){return{type_:"bond",kind_:r||e}},"color0-output":function(t,e){return{type_:"color0",color:e[0]}},ce:function(t,e){return S.go(e)},"1/2":function(t,e){var r=[];e.match(/^[+\-]/)&&(r.push(e.substr(0,1)),e=e.substr(1));var n=e.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return n[1]=n[1].replace(/\$/g,""),r.push({type_:"frac",p1:n[1],p2:n[2]}),n[3]&&(n[3]=n[3].replace(/\$/g,""),r.push({type_:"tex-math",p1:n[3]})),r},"9,9":function(t,e){return S.go(e,"9,9")}},createTransitions:function(t){var e,r,n,a,s={};for(e in t)for(r in t[e])for(n=r.split("|"),t[e][r].stateArray=n,a=0;a<n.length;a++)s[n[a]]=[];for(e in t)for(r in t[e])for(n=t[e][r].stateArray||[],a=0;a<n.length;a++){var o=t[e][r];if(o.action_){o.action_=[].concat(o.action_);for(var c=0;c<o.action_.length;c++)typeof o.action_[c]=="string"&&(o.action_[c]={type_:o.action_[c]})}else o.action_=[];for(var d=e.split("|"),m=0;m<d.length;m++)if(n[a]==="*")for(var y in s)s[y].push({pattern:d[m],task:o});else s[n[a]].push({pattern:d[m],task:o})}return s},stateMachines:{}};S.stateMachines={ce:{transitions:S.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(t,e){var r;if((t.d||"").match(/^[0-9]+$/)){var n=t.d;t.d=void 0,r=this.output(t),t.b=n}else r=this.output(t);return S.actions["o="](t,e),r},"d= kv":function(t,e){t.d=e,t.dType="kv"},"charge or bond":function(t,e){if(t.beginsWithBond){var r=[];return S.concatArray(r,this.output(t)),S.concatArray(r,S.actions.bond(t,e,"-")),r}else t.d=e},"- after o/d":function(t,e,r){var n=S.patterns.match_("orbital",t.o||""),a=S.patterns.match_("one lowercase greek letter $",t.o||""),s=S.patterns.match_("one lowercase latin letter $",t.o||""),o=S.patterns.match_("$one lowercase latin letter$ $",t.o||""),c=e==="-"&&(n&&n.remainder===""||a||s||o);c&&!t.a&&!t.b&&!t.p&&!t.d&&!t.q&&!n&&s&&(t.o="$"+t.o+"$");var d=[];return c?(S.concatArray(d,this.output(t)),d.push({type_:"hyphen"})):(n=S.patterns.match_("digits",t.d||""),r&&n&&n.remainder===""?(S.concatArray(d,S.actions["d="](t,e)),S.concatArray(d,this.output(t))):(S.concatArray(d,this.output(t)),S.concatArray(d,S.actions.bond(t,e,"-")))),d},"a to o":function(t){t.o=t.a,t.a=void 0},"sb=true":function(t){t.sb=!0},"sb=false":function(t){t.sb=!1},"beginsWithBond=true":function(t){t.beginsWithBond=!0},"beginsWithBond=false":function(t){t.beginsWithBond=!1},"parenthesisLevel++":function(t){t.parenthesisLevel++},"parenthesisLevel--":function(t){t.parenthesisLevel--},"state of aggregation":function(t,e){return{type_:"state of aggregation",p1:S.go(e,"o")}},comma:function(t,e){var r=e.replace(/\s*$/,""),n=r!==e;return n&&t.parenthesisLevel===0?{type_:"comma enumeration L",p1:r}:{type_:"comma enumeration M",p1:r}},output:function(t,e,r){var n;if(!t.r)n=[],!t.a&&!t.b&&!t.p&&!t.o&&!t.q&&!t.d&&!r||(t.sb&&n.push({type_:"entitySkip"}),!t.o&&!t.q&&!t.d&&!t.b&&!t.p&&r!==2?(t.o=t.a,t.a=void 0):!t.o&&!t.q&&!t.d&&(t.b||t.p)?(t.o=t.a,t.d=t.b,t.q=t.p,t.a=t.b=t.p=void 0):t.o&&t.dType==="kv"&&S.patterns.match_("d-oxidation$",t.d||"")?t.dType="oxidation":t.o&&t.dType==="kv"&&!t.q&&(t.dType=void 0),n.push({type_:"chemfive",a:S.go(t.a,"a"),b:S.go(t.b,"bd"),p:S.go(t.p,"pq"),o:S.go(t.o,"o"),q:S.go(t.q,"pq"),d:S.go(t.d,t.dType==="oxidation"?"oxidation":"bd"),dType:t.dType}));else{var a;t.rdt==="M"?a=S.go(t.rd,"tex-math"):t.rdt==="T"?a=[{type_:"text",p1:t.rd||""}]:a=S.go(t.rd);var s;t.rqt==="M"?s=S.go(t.rq,"tex-math"):t.rqt==="T"?s=[{type_:"text",p1:t.rq||""}]:s=S.go(t.rq),n={type_:"arrow",r:t.r,rd:a,rq:s}}for(var o in t)o!=="parenthesisLevel"&&o!=="beginsWithBond"&&delete t[o];return n},"oxidation-output":function(t,e){var r=["{"];return S.concatArray(r,S.go(e,"oxidation")),r.push("}"),r},"frac-output":function(t,e){return{type_:"frac-ce",p1:S.go(e[0]),p2:S.go(e[1])}},"overset-output":function(t,e){return{type_:"overset",p1:S.go(e[0]),p2:S.go(e[1])}},"underset-output":function(t,e){return{type_:"underset",p1:S.go(e[0]),p2:S.go(e[1])}},"underbrace-output":function(t,e){return{type_:"underbrace",p1:S.go(e[0]),p2:S.go(e[1])}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:S.go(e[1])}},"r=":function(t,e){t.r=e},"rdt=":function(t,e){t.rdt=e},"rd=":function(t,e){t.rd=e},"rqt=":function(t,e){t.rqt=e},"rq=":function(t,e){t.rq=e},operator:function(t,e,r){return{type_:"operator",kind_:r||e}}}},a:{transitions:S.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:S.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(t){if(t.text_){var e={type_:"text",p1:t.text_};for(var r in t)delete t[r];return e}}}},pq:{transitions:S.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(t,e){return{type_:"state of aggregation subscript",p1:S.go(e,"o")}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:S.go(e[1],"pq")}}}},bd:{transitions:S.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(t,e){return{type_:"color",color1:e[0],color2:S.go(e[1],"bd")}}}},oxidation:{transitions:S.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(t,e){return{type_:"roman numeral",p1:e||""}}}},"tex-math":{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var r in t)delete t[r];return e}}}},"tex-math tight":{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(t,e){t.o=(t.o||"")+"{"+e+"}"},output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var r in t)delete t[r];return e}}}},"9,9":{transitions:S.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:S.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(t,e){var r=[];return e[0]==="+-"||e[0]==="+/-"?r.push("\\pm "):e[0]&&r.push(e[0]),e[1]&&(S.concatArray(r,S.go(e[1],"pu-9,9")),e[2]&&(e[2].match(/[,.]/)?S.concatArray(r,S.go(e[2],"pu-9,9")):r.push(e[2])),(e[3]||e[4])&&(e[3]==="e"||e[4]==="*"?r.push({type_:"cdot"}):r.push({type_:"times"}))),e[5]&&r.push("10^{"+e[5]+"}"),r},"number^":function(t,e){var r=[];return e[0]==="+-"||e[0]==="+/-"?r.push("\\pm "):e[0]&&r.push(e[0]),S.concatArray(r,S.go(e[1],"pu-9,9")),r.push("^{"+e[2]+"}"),r},operator:function(t,e,r){return{type_:"operator",kind_:r||e}},space:function(){return{type_:"pu-space-1"}},output:function(t){var e,r=S.patterns.match_("{(...)}",t.d||"");r&&r.remainder===""&&(t.d=r.match_);var n=S.patterns.match_("{(...)}",t.q||"");if(n&&n.remainder===""&&(t.q=n.match_),t.d&&(t.d=t.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.d=t.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),t.q){t.q=t.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.q=t.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var a={d:S.go(t.d,"pu"),q:S.go(t.q,"pu")};t.o==="//"?e={type_:"pu-frac",p1:a.d,p2:a.q}:(e=a.d,a.d.length>1||a.q.length>1?e.push({type_:" / "}):e.push({type_:"/"}),S.concatArray(e,a.q))}else e=S.go(t.d,"pu-2");for(var s in t)delete t[s];return e}}},"pu-2":{transitions:S.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(t,e){t.rm+="^{"+e+"}"},space:function(){return{type_:"pu-space-2"}},output:function(t){var e=[];if(t.rm){var r=S.patterns.match_("{(...)}",t.rm||"");r&&r.remainder===""?e=S.go(r.match_,"pu"):e={type_:"rm",p1:t.rm}}for(var n in t)delete t[n];return e}}},"pu-9,9":{transitions:S.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){var r=t.text_.length%3;r===0&&(r=3);for(var n=t.text_.length-3;n>0;n-=3)e.push(t.text_.substr(n,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(0,r)),e.reverse()}else e.push(t.text_);for(var a in t)delete t[a];return e},"output-o":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){for(var r=t.text_.length-3,n=0;n<r;n+=3)e.push(t.text_.substr(n,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(n))}else e.push(t.text_);for(var a in t)delete t[a];return e}}}};var ce={go:function(t,e){if(!t)return"";for(var r="",n=!1,a=0;a<t.length;a++){var s=t[a];typeof s=="string"?r+=s:(r+=ce._go2(s),s.type_==="1st-level escape"&&(n=!0))}return!e&&!n&&r&&(r="{"+r+"}"),r},_goInner:function(t){return t&&ce.go(t,!0)},_go2:function(t){var e;switch(t.type_){case"chemfive":e="";var r={a:ce._goInner(t.a),b:ce._goInner(t.b),p:ce._goInner(t.p),o:ce._goInner(t.o),q:ce._goInner(t.q),d:ce._goInner(t.d)};r.a&&(r.a.match(/^[+\-]/)&&(r.a="{"+r.a+"}"),e+=r.a+"\\,"),(r.b||r.p)&&(e+="{\\vphantom{X}}",e+="^{\\hphantom{"+(r.b||"")+"}}_{\\hphantom{"+(r.p||"")+"}}",e+="{\\vphantom{X}}",e+="^{\\smash[t]{\\vphantom{2}}\\llap{"+(r.b||"")+"}}",e+="_{\\vphantom{2}\\llap{\\smash[t]{"+(r.p||"")+"}}}"),r.o&&(r.o.match(/^[+\-]/)&&(r.o="{"+r.o+"}"),e+=r.o),t.dType==="kv"?((r.d||r.q)&&(e+="{\\vphantom{X}}"),r.d&&(e+="^{"+r.d+"}"),r.q&&(e+="_{\\smash[t]{"+r.q+"}}")):t.dType==="oxidation"?(r.d&&(e+="{\\vphantom{X}}",e+="^{"+r.d+"}"),r.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+r.q+"}}")):(r.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+r.q+"}}"),r.d&&(e+="{\\vphantom{X}}",e+="^{"+r.d+"}"));break;case"rm":e="\\mathrm{"+t.p1+"}";break;case"text":t.p1.match(/[\^_]/)?(t.p1=t.p1.replace(" ","~").replace("-","\\text{-}"),e="\\mathrm{"+t.p1+"}"):e="\\text{"+t.p1+"}";break;case"roman numeral":e="\\mathrm{"+t.p1+"}";break;case"state of aggregation":e="\\mskip2mu "+ce._goInner(t.p1);break;case"state of aggregation subscript":e="\\mskip1mu "+ce._goInner(t.p1);break;case"bond":if(e=ce._getBond(t.kind_),!e)throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+t.kind_+")"];break;case"frac":var n="\\frac{"+t.p1+"}{"+t.p2+"}";e="\\mathchoice{\\textstyle"+n+"}{"+n+"}{"+n+"}{"+n+"}";break;case"pu-frac":var a="\\frac{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";e="\\mathchoice{\\textstyle"+a+"}{"+a+"}{"+a+"}{"+a+"}";break;case"tex-math":e=t.p1+" ";break;case"frac-ce":e="\\frac{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";break;case"overset":e="\\overset{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";break;case"underset":e="\\underset{"+ce._goInner(t.p1)+"}{"+ce._goInner(t.p2)+"}";break;case"underbrace":e="\\underbrace{"+ce._goInner(t.p1)+"}_{"+ce._goInner(t.p2)+"}";break;case"color":e="{\\color{"+t.color1+"}{"+ce._goInner(t.color2)+"}}";break;case"color0":e="\\color{"+t.color+"}";break;case"arrow":var s={rd:ce._goInner(t.rd),rq:ce._goInner(t.rq)},o=ce._getArrow(t.r);s.rd||s.rq?t.r==="<=>"||t.r==="<=>>"||t.r==="<<=>"||t.r==="<-->"?(o="\\long"+o,s.rd&&(o="\\overset{"+s.rd+"}{"+o+"}"),s.rq&&(t.r==="<-->"?o="\\underset{\\lower2mu{"+s.rq+"}}{"+o+"}":o="\\underset{\\lower6mu{"+s.rq+"}}{"+o+"}"),o=" {}\\mathrel{"+o+"}{} "):(s.rq&&(o+="[{"+s.rq+"}]"),o+="{"+s.rd+"}",o=" {}\\mathrel{\\x"+o+"}{} "):o=" {}\\mathrel{\\long"+o+"}{} ",e=o;break;case"operator":e=ce._getOperator(t.kind_);break;case"1st-level escape":e=t.p1+" ";break;case"space":e=" ";break;case"entitySkip":e="~";break;case"pu-space-1":e="~";break;case"pu-space-2":e="\\mkern3mu ";break;case"1000 separator":e="\\mkern2mu ";break;case"commaDecimal":e="{,}";break;case"comma enumeration L":e="{"+t.p1+"}\\mkern6mu ";break;case"comma enumeration M":e="{"+t.p1+"}\\mkern3mu ";break;case"comma enumeration S":e="{"+t.p1+"}\\mkern1mu ";break;case"hyphen":e="\\text{-}";break;case"addition compound":e="\\,{\\cdot}\\,";break;case"electron dot":e="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":e="{\\times}";break;case"prime":e="\\prime ";break;case"cdot":e="\\cdot ";break;case"tight cdot":e="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":e="\\times ";break;case"circa":e="{\\sim}";break;case"^":e="uparrow";break;case"v":e="downarrow";break;case"ellipsis":e="\\ldots ";break;case"/":e="/";break;case" / ":e="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return e},_getArrow:function(t){switch(t){case"->":return"rightarrow";case"→":return"rightarrow";case"⟶":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"leftrightarrows";case"<=>":return"rightleftharpoons";case"⇌":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(t){switch(t){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(t){switch(t){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},on=class L9 extends b{constructor(e){super(f(p({},e),{type:"delim"})),this.value=e.delim,this.size=e.size}static fromJson(e){return new L9(e)}toJson(){return f(p({},super.toJson()),{delim:this.value,size:this.size})}render(e){return new _(this.value,{type:"middle"})}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);return r!=null&&r.serialize?r.serialize(this,e):q(this.command,this.value)}},an=class V9 extends b{constructor(e){super(f(p({},e),{type:"sizeddelim",value:e.delim})),this.delimType=e.delimType,this.size=e.size}static fromJson(e){return new V9(e)}toJson(){return f(p({},super.toJson()),{delim:this.value,size:this.size,delimType:this.delimType})}render(e){let r=Cm(this.value,this.size,e,{classes:{open:"ML__open",close:"ML__close"}[this.delimType],type:this.delimType,isSelected:this.isSelected});return r?(r=this.bind(e,r),this.caret&&(r.caret=this.caret),r):null}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);return r!=null&&r.serialize?r.serialize(this,e):q(this.command,this.value)}},tr=class B9 extends b{constructor(e,r,n,a){var s,o;super({type:"enclose",command:e,style:a.style}),this.body=r,this.backgroundcolor=a.backgroundcolor,n.updiagonalarrow&&(n.updiagonalstrike=!1),n.box&&(n.left=!1,n.right=!1,n.bottom=!1,n.top=!1),this.notation=n,this.shadow=(s=a.shadow)!=null?s:"none",this.strokeWidth=(o=a.strokeWidth)!=null?o:"0.06em",this.strokeWidth||(this.strokeWidth="0.06em"),this.strokeStyle=a.strokeStyle,this.svgStrokeStyle=a.svgStrokeStyle,this.strokeColor=a.strokeColor,this.borderStyle=a.borderStyle,this.padding=a.padding,this.captureSelection=!1}static fromJson(e){return new B9(e.command,e.body,e.notation,e)}toJson(){return f(p({},super.toJson()),{notation:this.notation,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}_serialize(e){var r;if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let n=se(this.command,this.mode);if(n!=null&&n.serialize)return n.serialize(this,e);let a=(r=this.command)!=null?r:"";if(this.command==="\\enclose"){a+="{"+Object.keys(this.notation).join(" ")+"}";let s="",o="";this.backgroundcolor&&this.backgroundcolor!=="transparent"&&(s+=o+'mathbackground="'+this.backgroundcolor+'"',o=","),this.shadow&&this.shadow!=="auto"&&(s+=o+'shadow="'+this.shadow+'"',o=","),this.strokeWidth||this.strokeStyle!=="solid"?(s+=o+this.borderStyle,o=","):this.strokeColor&&this.strokeColor!=="currentColor"&&(s+=o+'mathcolor="'+this.strokeColor+'"',o=","),s&&(a+=`[${s}]`)}return q(a,this.bodyToLatex(e))}render(e){let r=new O({parent:e},this.style),n=b.createBox(r,this.body);if(!n)return null;let a=Tf(this.borderStyle),s=r.toEm(!this.padding||this.padding==="auto"?{register:"fboxsep"}:{string:this.padding});n.setStyle("position","relative"),n.setStyle("display","inline-block"),n.setStyle("height",n.height+n.depth,"em"),n.setStyle("width",n.width,"em");let o=new _(null,{classes:"ML__notation"}),c=n.height+n.depth+2*s,d=n.width+2*s,m="";if(this.notation.horizontalstrike&&(m+=this.line(3,50,97,50)),this.notation.verticalstrike&&(m+=this.line(50,3,50,97)),this.notation.updiagonalstrike&&(m+=this.line(3,97,97,3)),this.notation.downdiagonalstrike&&(m+=this.line(3,3,97,97)),this.notation.updiagonalarrow){m+=this.line(s.toString(),(s+n.depth+n.height).toString(),(s+n.width).toString(),s.toString());let A=.03*Math.sqrt(d*d+c*c)*1,P=n.width*A,Z=(n.depth+n.height)*A,me=s+n.width,_e=s;_e+Z-.4*P<0&&(_e=.4*P-Z),m+='<polygon points="',m+=`${me},${_e} ${me-P-.4*Z},${_e+Z-.4*P} `,m+=`${me-.7*P},${_e+.7*Z} ${me-P+.4*Z},${_e+Z+.4*P} `,m+=`${me},${_e}`,m+=`" stroke='none' fill="${this.strokeColor}"`,m+="/>"}if(this.notation.phasorangle){let A=Rm(r),P=(n.height+n.depth+2*A+s).toString(),Z=(n.height+n.depth)/2;m+=this.line(s.toString(),P,(s+Z+n.width).toString(),P),m+=this.line(s.toString(),P,(s+Z).toString(),(s-A).toString()),c+=A,n.left+=c/2-s}if(this.notation.longdiv){let A=Rm(r);c+=A,m+=this.line(s.toString(),s.toString(),(s+n.width).toString(),s.toString());let P=.3;n.left+=P+A,n.setTop(s+A),m+='<path d="',m+=`M ${s} ${s}  a${P} ${(n.depth+n.height+2*A)/2}, 0, 1, 1, 0 ${n.depth+n.height+2*A} "`,m+=` stroke-width="${Df(r)}" stroke="${this.strokeColor}" fill="none"`,m+="/>"}if(o.height=n.height+s,o.depth=n.depth+s,o.setStyle("box-sizing","border-box"),o.setStyle("left",`calc(-1 * ${a} - ${s}em)`),o.setStyle("height",`calc( ${n.height+n.depth+2*s}em + ${a})`),o.setStyle("top",`calc(-${s}em )`),o.setStyle("width",`calc(${n.width+2*s}em + ${a})`),this.backgroundcolor&&o.setStyle("background-color",this.backgroundcolor),this.notation.box&&o.setStyle("border","1px solid red"),this.notation.actuarial&&(o.setStyle("border-top",this.borderStyle),o.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(o.setStyle("border-bottom",this.borderStyle),o.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(o.setStyle("border-radius","8px"),o.setStyle("border",this.borderStyle)),this.notation.circle&&(o.setStyle("border-radius","50%"),o.setStyle("border",this.borderStyle)),this.notation.top&&o.setStyle("border-top",this.borderStyle),this.notation.left&&o.setStyle("border-left",this.borderStyle),this.notation.right&&o.setStyle("border-right",this.borderStyle),this.notation.bottom&&o.setStyle("border-bottom",this.borderStyle),m){let A="";this.shadow==="auto"&&(A+="filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)"),this.shadow!=="none"&&(A+=`filter: drop-shadow(${this.shadow})`),A+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,A+=' stroke-linecap="round"',this.svgStrokeStyle&&(A+=` stroke-dasharray="${this.svgStrokeStyle}"`),o.svgStyle=A,o.svgOverlay=m}let y=new _([o,n]);return y.setStyle("position","relative"),y.setStyle("height",`${Math.floor(100*(o.depth+o.height))/100}em`),y.setStyle("display","inline-block"),y.height=o.height,y.depth=o.depth,y.left=s,y.right=s,this.caret&&(y.caret=this.caret),y.wrap(r)}line(e,r,n,a){return`<line x1="${Ja(e)}"  y1="${Ja(r)}" x2="${Ja(n)}" y2="${Ja(a)}" vector-effect="non-scaling-stroke"></line>`}};function Ja(t){return typeof t=="number"?`${Math.floor(100*t)/100}%`:t}function Tf(t){if(!t)return"1px";let e=t.match(/([0-9][a-zA-Z\%]+)/);return e===null?"1px":e[1]}function Df(t){return(Math.floor(100*t.metrics.sqrtRuleThickness/t.scalingFactor)/100/10).toString()+"em"}function Rm(t){let e=t.isDisplayStyle?tt:t.metrics.defaultRuleThickness;return t.metrics.defaultRuleThickness+t.scalingFactor*e/4}var sn={fractionNavigationOrder:"numerator-denominator"},pt=class F9 extends b{constructor(e,r,n){var a,s,o;super(f(p({},n),{type:"genfrac",displayContainsHighlight:!0})),this.above=e,this.below=r,this.hasBarLine=(a=n?.hasBarLine)!=null?a:!0,this.continuousFraction=(s=n?.continuousFraction)!=null?s:!1,this.align=(o=n?.align)!=null?o:"center",this.numerPrefix=n?.numerPrefix,this.denomPrefix=n?.denomPrefix,this.mathstyleName=n?.mathstyleName,this.leftDelim=n?.leftDelim,this.rightDelim=n?.rightDelim}static fromJson(e){return new F9(e.above,e.below,e)}toJson(){let e={};return this.continuousFraction&&(e.continuousFraction=!0),this.align!=="center"&&(e.align=this.align),this.numerPrefix&&(e.numerPrefix=this.numerPrefix),this.denomPrefix&&(e.denomPrefix=this.denomPrefix),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.hasBarLine||(e.hasBarLine=!1),this.mathstyleName&&(e.mathstyleName=this.mathstyleName),p(p({},super.toJson()),e)}get children(){if(this._children)return this._children;let e=[];if(sn.fractionNavigationOrder==="denominator-numerator"){for(let r of this.below)e.push(...r.children),e.push(r);for(let r of this.above)e.push(...r.children),e.push(r)}else{for(let r of this.above)e.push(...r.children),e.push(r);for(let r of this.below)e.push(...r.children),e.push(r)}return this._children=e,e}render(e){var r,n;let a=new O({parent:e,mathstyle:this.mathstyleName},this.style),s=a.metrics,o=new O({parent:a,mathstyle:this.continuousFraction?"":"numerator"},this.style),c=this.numerPrefix?new _([new _(this.numerPrefix),b.createBox(o,this.above)],{isTight:o.isTight,type:"ignore"}):(r=b.createBox(o,this.above,{type:"ignore"}))!=null?r:new _(null,{type:"ignore"}),d=new O({parent:a,mathstyle:this.continuousFraction?"":"denominator"},this.style),m=this.denomPrefix?new _([new _(this.denomPrefix),b.createBox(d,this.below,{type:"ignore"})]):(n=b.createBox(d,this.below,{type:"ignore"}))!=null?n:new _(null,{type:"ignore"}),y=this.hasBarLine?s.defaultRuleThickness:0,A,P=0,Z;a.isDisplayStyle?(A=o.metrics.num1,P=y>0?3*y:7*y,Z=d.metrics.denom1):(y>0?(A=o.metrics.num2,P=y):(A=o.metrics.num3,P=3*s.defaultRuleThickness),Z=d.metrics.denom2);let me=[];this.isSelected&&me.push("ML__selected");let _e=c.depth,Ge=m.height,ve;if(y<=0){let li=A-_e-(Ge-Z);li<P&&(A+=(P-li)/2,Z+=(P-li)/2),ve=new Q({individualShift:[{box:c,shift:-A,classes:[...me,Ga(this.align)]},{box:m,shift:Z,classes:[...me,Ga(this.align)]}]}).wrap(a)}else{let li=new _(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});li.softWidth=Math.max(c.width,m.width),li.height=y/2,li.depth=y/2;let An=Oe+y/2;A<P+_e+An&&(A=P+_e+An);let Os=Oe-y/2;Z<P+Ge-Os&&(Z=P+Ge-Os),ve=new Q({individualShift:[{box:m,shift:Z,classes:[...me,Ga(this.align)]},{box:li,shift:-Os,classes:me},{box:c,shift:-A,classes:[...me,Ga(this.align)]}]}).wrap(a)}let He=a.isDisplayStyle?s.delim1:s.delim2,De=this.leftDelim?this.bind(e,Yi("open",this.leftDelim,He,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):Qt(a,"ML__open"),Xe=null;this.continuousFraction?Xe=new _(null,{type:"close"}):this.rightDelim?Xe=this.bind(e,Yi("close",this.rightDelim,He,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):Xe=Qt(a,"ML__close");let Bs=new _([De,ve,Xe],{isTight:a.isTight,type:"inner",classes:"ML__mfrac"}),wt=this.bind(e,Bs);return this.caret&&(wt.caret=this.caret),this.attachSupsub(e,{base:wt})}};function Ga(t){var e;return(e={left:"ML__left",right:"ML__right",center:"ML__center"}[t])!=null?e:"ML__center"}var ue=class N9 extends b{constructor(e,r){var n;super({type:"latex",value:e,mode:"latex"}),this.isSuggestion=(n=r?.isSuggestion)!=null?n:!1,this.isError=!1}static fromJson(e){let r=new N9(e.value);return e.isSuggestion&&(r.isSuggestion=!0),e.isError&&(r.isError=!0),r}toJson(){let e={};return this.isSuggestion&&(e.isSuggestion=!0),this.isError&&(e.isError=!0),p({type:"latex",value:this.value},e)}render(e){let r=new _(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return r?(this.caret&&(r.caret=this.caret),this.bind(e,r)):null}},Rt=class O9 extends b{constructor(e=""){super({type:"latexgroup",mode:"latex"}),this.body=[...e].map(r=>new ue(r)),this.skipBoundary=!0}static fromJson(e){return new O9}toJson(){return super.toJson()}render(e){let r=b.createBox(e,this.body);return r?(this.caret&&(r.caret=this.caret),this.bind(e,r)):null}_serialize(e){var r,n;return(n=(r=this.body)==null?void 0:r.map(a=>a.value).join(""))!=null?n:""}},ai=class z9 extends b{constructor(e,r){super(f(p({},r),{type:"extensible-symbol",isFunction:r?.isFunction})),this.value=e,this.variant=r?.variant,this.subsupPlacement=r?.limits}static fromJson(e){return new z9(e.symbol,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.value&&(e.symbol=this.value),e}render(e){var r;let n=e.isDisplayStyle&&this.value!=="\\smallint",a=new _(this.value,{fontFamily:n?"Size2-Regular":"Size1-Regular",classes:"ML__op-symbol "+(n?"ML__large-op":"ML__small-op"),type:"op",maxFontSize:e.scalingFactor,isSelected:this.isSelected});if(!a)return null;a.right=a.italic;let s=(a.height-a.depth)/2-Oe*e.scalingFactor,o=a.italic;a.setTop(s);let c=a;if(this.superscript||this.subscript){let d=(r=this.subsupPlacement)!=null?r:"auto";d==="auto"&&e.isDisplayStyle&&(d="over-under"),c=d==="over-under"?this.attachLimits(e,{base:a,baseShift:s,slant:o}):this.attachSupsub(e,{base:a})}return new _(this.bind(e,c),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(e)}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);if(r!=null&&r.serialize)return r.serialize(this,e);let n=[];return n.push(this.command),this.explicitSubsupPlacement&&(this.subsupPlacement==="over-under"&&n.push("\\limits"),this.subsupPlacement==="adjacent"&&n.push("\\nolimits"),this.subsupPlacement==="auto"&&n.push("\\displaylimits")),n.push(this.supsubToLatex(e)),R(n)}},ht=class $9 extends b{constructor(e){let r=e.body;super(f(p({},e),{type:"overlap",body:typeof r=="string"?[new b({value:r})]:r,style:e?.style})),this.skipBoundary=!0,this.align=e?.align,this.boxType=e?.boxType}static fromJson(e){return new $9(e)}toJson(){let e={};return this.align&&(e.align=this.align),this.boxType&&(e.boxType=this.boxType),p(p({},super.toJson()),e)}render(e){let r=b.createBox(e,this.body,{classes:"ML__inner"});return r?(this.caret&&(r.caret=this.caret),this.bind(e,new _([r,new _(null,{classes:"ML__fix"})],{classes:this.align==="right"?"ML__rlap":"ML__llap",type:this.boxType}))):null}},we=class q9 extends b{constructor(e){var r,n,a,s;super({type:"overunder",command:e.command,style:e.style,mode:e.mode,body:e.body,skipBoundary:(r=e.skipBoundary)!=null?r:!0}),this.subsupPlacement=e.supsubPlacement,this.svgAbove=e.svgAbove,this.svgBelow=e.svgBelow,this.svgBody=e.svgBody,this.above=e.above,this.below=e.below,this.boxType=(n=e.boxType)!=null?n:"ord",this.paddedBody=(a=e.paddedBody)!=null?a:!1,this.paddedLabels=(s=e.paddedLabels)!=null?s:!1}static fromJson(e){return new q9(e)}toJson(){let e=super.toJson();return this.skipBoundary||(e.skipBoundary=!1),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.svgAbove&&(e.svgAbove=this.svgAbove),this.svgBelow&&(e.svgBelow=this.svgBelow),this.svgBody&&(e.svgBody=this.svgBody),this.boxType!=="ord"&&(e.boxType=this.boxType),this.paddedBody&&(e.paddedBody=!0),this.paddedLabels&&(e.paddedLabels=!0),e}render(e){let r=this.svgBody?Wi(this.svgBody):b.createBox(e,this.body,{type:"ignore"}),n=new O({parent:e,mathstyle:"scriptstyle"},this.style),a=null;this.svgAbove?a=Wi(this.svgAbove):this.above&&(a=b.createBox(n,this.above,{type:"ignore"}));let s=null;this.svgBelow?s=Wi(this.svgBelow):this.below&&(s=b.createBox(n,this.below,{type:"ignore"})),this.paddedBody&&(r=new _([Qt(e,"ML__open"),r,Qt(e,"ML__close")],{type:"ignore"}));let o=Kf(e,{base:r,above:a,below:s,type:this.boxType==="bin"||this.boxType==="rel"?this.boxType:"ord",paddedAboveBelow:this.paddedLabels});return o?(this.subsupPlacement==="over-under"?o=this.attachLimits(e,{base:o,type:o.type}):o=this.attachSupsub(e,{base:o}),this.caret&&(o.caret=this.caret),this.bind(e,o)):null}};function Kf(t,e){if(!e.base)return null;if(!e.above&&!e.below){let c=new _(e.base,{type:e.type});return c.setStyle("position","relative"),c}let r=0;e.above&&(r=t.metrics.bigOpSpacing5);let n=null,a=e.base,s=0,o=["ML__center"];if(e.paddedAboveBelow&&o.push("ML__label_padding"),e.below&&e.above){let c=t.metrics.bigOpSpacing5+e.below.height+e.below.depth+a.depth+s;n=new Q({bottom:c,children:[t.metrics.bigOpSpacing5,{box:e.below,classes:o},{box:a,classes:["ML__center"]},r,{box:e.above,classes:o},t.metrics.bigOpSpacing5]})}else e.below?n=new Q({top:a.height-s,children:[t.metrics.bigOpSpacing5,{box:e.below,classes:o},{box:a,classes:["ML__center"]}]}):e.above&&(n=new Q({bottom:a.depth+s,children:[{box:a,classes:["ML__center"]},r,{box:e.above,classes:o},t.metrics.bigOpSpacing5]}));return new _(n,{type:e.type})}var Pt=class U9 extends b{constructor(e){var r,n,a,s;super(f(p({},e),{type:"phantom"})),this.captureSelection=!0,this.isInvisible=(r=e.isInvisible)!=null?r:!1,this.smashDepth=(n=e.smashDepth)!=null?n:!1,this.smashHeight=(a=e.smashHeight)!=null?a:!1,this.smashWidth=(s=e.smashWidth)!=null?s:!1}static fromJson(e){return new U9(e)}toJson(){let e={};return this.isInvisible&&(e.isInvisible=!0),this.smashDepth&&(e.smashDepth=!0),this.smashHeight&&(e.smashHeight=!0),this.smashWidth&&(e.smashWidth=!0),p(p({},super.toJson()),e)}render(e){let r=new O({parent:e,isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return this.isInvisible,b.createBox(r,this.body,{classes:"ML__inner"});let n=b.createBox(this.isInvisible?r:e,this.body);if(!n)return null;if(this.smashWidth){let a=new _(null,{classes:"ML__fix"});return new _([n,a],{classes:"ML__rlap"}).wrap(e)}if(!this.smashHeight&&!this.smashDepth)return n;if(this.smashHeight&&(n.height=0),this.smashDepth&&(n.depth=0),n.children)for(let a of n.children)this.smashHeight&&(a.height=0),this.smashDepth&&(a.depth=0);return new Q({firstBaseline:[{box:n}]},{type:n.type}).wrap(e)}},zt=class K9 extends b{constructor(e){var r;super(p({type:"spacing"},e)),this.width=e?.width,this._braced=(r=e?.braced)!=null?r:!1}static fromJson(e){return new K9(e)}toJson(){let e=super.toJson();return this.width!==void 0&&(e.width=this.width),this._braced&&(e.braced=!0),e}render(e){var r;if(this.command==="space")return new _(this.mode==="math"?null:" ");let n;if(this.width!==void 0)n=new _(null,{classes:"ML__mspace"}),n.left=e.toEm(this.width);else{let a=(r={"\\qquad":"ML__qquad","\\quad":"ML__quad","\\enspace":"ML__enspace","\\;":"ML__thickspace","\\:":"ML__mediumspace","\\>":"ML__mediumspace","\\,":"ML__thinspace","\\!":"ML__negativethinspace"}[this.command])!=null?r:"ML__mediumspace";n=new _(null,{classes:a})}return n=this.bind(e,n),this.caret&&(n.caret=this.caret),n}_serialize(e){var r;if(!e.expandMacro&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let n=se(this.command,this.mode);if(n!=null&&n.serialize)return n.serialize(this,e);let a=(r=this.command)!=null?r:"";return this.width===void 0?a:this._braced&&!("register"in this.width)?`${a}{${be(this.width)}}`:`${a}${be(this.width)}`}},ln=class j9 extends b{constructor(e){var r;super(f(p({},e),{type:"surd",mode:(r=e.mode)!=null?r:"math",style:e.style,displayContainsHighlight:!0,body:e.body})),this.above=e.index}static fromJson(e){return new j9(f(p({},e),{index:e.above}))}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);if(r!=null&&r.serialize)return r.serialize(this,e);let n=this.command,a=this.bodyToLatex(e);return this.above&&!this.hasEmptyBranch("above")?q(`${n}[${this.aboveToLatex(e)}]`,a):/^[0-9]$/.test(a)?`${n}${a}`:q(n,a)}get children(){if(this._children)return this._children;let e=[];if(this.above)for(let r of this.above)e.push(...r.children),e.push(r);if(this.body)for(let r of this.body)e.push(...r.children),e.push(r);return this._children=e,e}render(e){var r;let n=new O({parent:e,mathstyle:"cramp"},this.style),a=(r=b.createBox(n,this.body,{type:"inner"}))!=null?r:new _(null),s=n.scalingFactor,o=n.metrics.defaultRuleThickness/s,c=e.isDisplayStyle?tt:o,d=new _(null,{classes:"ML__sqrt-line",style:this.style});d.height=o,d.softWidth=a.width;let m=s*(o+c/4),y=Math.max(s*2*c,a.height+a.depth)+m+o,A=new O({parent:e},this.style),P=this.bind(A,new _(Yi("inner","\\surd",y,!1,A,{isSelected:this.isSelected}),{isSelected:this.isSelected,classes:"ML__sqrt-sign",style:this.style}));if(!P)return null;let Z=P.height+P.depth-o;Z>a.height+a.depth+m&&(m=(m+Z-(a.height+a.depth))/2),P.setTop(P.height-a.height-m);let me=this.bind(e,new Q({firstBaseline:[{box:new _(a)},m-2*o,{box:d},o]})),_e=b.createBox(new O({parent:e,mathstyle:"scriptscriptstyle"}),this.above,{type:"ignore"});if(!_e){let He=new _([P,me],{classes:this.containsCaret?"ML__contains-caret":"",type:"inner"});return He.setStyle("display","inline-block"),He.setStyle("height",He.height+He.depth,"em"),this.caret&&(He.caret=this.caret),this.bind(e,He)}let Ge=new Q({shift:-.6*(Math.max(P.height,me.height)-Math.max(P.depth,me.depth)),children:[{box:_e}]}),ve=new _([new _(Ge,{classes:"ML__sqrt-index",type:"ignore"}),P,me],{type:"inner",classes:this.containsCaret?"ML__contains-caret":""});return ve.height=P.height,ve.depth=P.depth,this.caret&&(ve.caret=this.caret),this.bind(e,ve)}},$l=class extends _{constructor(t){super(null,{type:"skip"}),this._width=t}toMarkup(){return`<span style="display:inline-block;width:${Math.ceil(this.width*100)/100}em"></span>`}};function Zn(t,e){if(!t.parent)return;let r=t.parent.children,n=r.indexOf(t),a=n-1;for(;a>=0&&r[a].type==="ignore";)a-=1;if(a<0&&t.parent.parent&&t.parent.type==="lift"){Zn(t.parent,e);return}n>0&&r[n-1].type==="skip"?r[n-1].width+=e:r.splice(n,0,new $l(e))}var Of={ord:{op:3,bin:4,rel:5,inner:3},op:{ord:3,op:3,rel:5,inner:3},bin:{ord:4,op:4,open:4,inner:4},rel:{ord:5,op:5,open:5,inner:5},close:{op:3,bin:4,rel:5,inner:3},punct:{ord:3,op:3,rel:3,open:3,punct:3,inner:3},inner:{ord:3,op:3,bin:4,rel:5,open:3,punct:3,inner:3}},Bf={ord:{op:3},op:{ord:3,op:3},close:{op:3},inner:{op:3}};function Rf(t){Yn(t,(e,r)=>{r.type==="bin"&&(!e||/^(middle|bin|op|rel|open|punct)$/.test(e.type))&&(r.type="ord"),e?.type==="bin"&&/^(rel|close|punct)$/.test(r.type)&&(e.type="ord"),r.type!=="ignore"&&(e=r)})}function It(t,e){if(!t.children)return t;let r=t.children;Rf(r);let n=e.getRegisterAsEm("thinmuskip"),a=e.getRegisterAsEm("medmuskip"),s=e.getRegisterAsEm("thickmuskip");return Yn(r,(o,c)=>{var d,m,y;if(!o)return;let A=o.type,P=c.isTight?(d=Bf[A])!=null?d:null:(m=Of[A])!=null?m:null,Z=(y=P?.[c.type])!=null?y:null;Z===3&&Zn(c,n),Z===4&&Zn(c,a),Z===5&&Zn(c,s)}),t}function Yn(t,e,r=void 0){if(!t)return r;t=[...t];for(let n of t)n.type==="lift"?r=Yn(n.children,e,r):n.type==="ignore"?Yn(n.children,e):(e(r,n),Yn(n.children,e),r=n);return r}var si=class H9 extends b{constructor(e){super({type:"tooltip",command:e.command,mode:e.mode,style:e.style,body:e.body,displayContainsHighlight:!0}),this.tooltip=new b({type:"root",mode:e.content,body:e.tooltip,style:{}}),this.skipBoundary=!0,this.captureSelection=!1}static fromJson(e){return new H9(f(p({},e),{tooltip:ft(e.tooltip)}))}toJson(){var e;let r=(e=this.tooltip.body)==null?void 0:e.filter(n=>n.type!=="first").map(n=>n.toJson());return f(p({},super.toJson()),{tooltip:r})}render(e){let r=b.createBox(new O,this.body);if(!r)return null;let n=new O({parent:e,mathstyle:"displaystyle"},{fontSize:Vi}),a=_r(It(new _(this.tooltip.render(n),{classes:"ML__tooltip-content"}),n)),s=new _([a,r],{classes:"ML__tooltip-container"});return this.caret&&(s.caret=this.caret),this.bind(e,s)}},gt=class G9 extends b{constructor(e,r){super(f(p({},r),{type:"operator",isFunction:r?.isFunction})),this.value=e,this.variant=r?.variant,this.variantStyle=r?.variantStyle,this.subsupPlacement=r?.limits}static fromJson(e){return new G9(e.symbol,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.variantStyle&&(e.variantStyle=this.variantStyle),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.value&&(e.symbol=this.value),e}render(e){var r;let n=new _(this.value,{type:"op",mode:"math",maxFontSize:e.scalingFactor,style:{variant:this.variant,variantStyle:this.variantStyle},isSelected:this.isSelected,letterShapeStyle:e.letterShapeStyle}),a=n;if(this.superscript||this.subscript){let s=(r=this.subsupPlacement)!=null?r:"auto";a=s==="over-under"||s==="auto"&&e.isDisplayStyle?this.attachLimits(e,{base:n}):this.attachSupsub(e,{base:n})}return new _(this.bind(e,a),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(e)}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=se(this.command,this.mode);if(r!=null&&r.serialize)return r.serialize(this,e);let n=[this.command];return this.explicitSubsupPlacement&&(this.subsupPlacement==="over-under"&&n.push("\\limits"),this.subsupPlacement==="adjacent"&&n.push("\\nolimits"),this.subsupPlacement==="auto"&&n.push("\\displaylimits")),n.push(this.supsubToLatex(e)),R(n)}};function ft(t){if(Y(t))return t.map(n=>ft(n));if(typeof t=="string")return b.fromJson(t);t=p({},t);for(let n of Lr)t[n]&&(t[n]=ft(t[n]));t.args&&(t.args=Pf(t.args)),t.array&&(t.array=ft(t.array));let e=t.type,r;e==="accent"&&(r=Tr.fromJson(t)),e==="array"&&(r=I.fromJson(t)),e==="box"&&(r=nt.fromJson(t)),e==="chem"&&(r=Xn.fromJson(t)),e==="composition"&&(r=Qi.fromJson(t)),e==="delim"&&(r=on.fromJson(t)),e==="enclose"&&(r=tr.fromJson(t)),e==="error"&&(r=mt.fromJson(t)),e==="extensible-symbol"&&(r=ai.fromJson(t)),e==="genfrac"&&(r=pt.fromJson(t)),e==="group"&&(r=en.fromJson(t)),e==="latex"&&(r=ue.fromJson(t)),e==="latexgroup"&&(r=Rt.fromJson(t)),e==="leftright"&&(r=G.fromJson(t)),e==="macro"&&(r=tn.fromJson(t)),e==="macro-argument"&&(r=Wa.fromJson(t)),e==="operator"&&(r=gt.fromJson(t)),e==="overlap"&&(r=ht.fromJson(t)),e==="overunder"&&(r=we.fromJson(t)),e==="placeholder"&&(r=Le.fromJson(t)),e==="prompt"&&(r=rn.fromJson(t)),e==="phantom"&&(r=Pt.fromJson(t)),e==="sizeddelim"&&(r=an.fromJson(t)),e==="spacing"&&(r=zt.fromJson(t)),e==="subsup"&&(r=er.fromJson(t)),e==="surd"&&(r=ln.fromJson(t)),e==="text"&&(r=$e.fromJson(t)),e==="tooltip"&&(r=si.fromJson(t)),r||(r=b.fromJson(t));for(let n of Lr)t[n]&&r.setChildren(t[n],n);return t.verbatimLatex!==void 0&&(r.verbatimLatex=t.verbatimLatex),t.subsupPlacement&&(r.subsupPlacement=t.subsupPlacement),t.explicitSubsupPlacement&&(r.explicitSubsupPlacement=!0),t.isFunction&&(r.isFunction=!0),t.skipBoundary&&(r.skipBoundary=!0),t.captureSelection&&(r.captureSelection=!0),r}function Pf(t){if(t){if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e=>e==="<null>"?null:typeof e=="object"&&"group"in e?{group:e.group.map(r=>ft(r))}:typeof e=="object"&&"atoms"in e?e.atoms.map(r=>ft(r)):e)}}function Qn(t,e){!t||!e||(Y(t)?t.forEach(r=>Qn(r,e)):typeof t=="object"&&t.applyStyle(e,{unstyledOnly:!0}))}function eo(t,e,r,n){function a(o,c){for(let d of s)if(d.style[o]!==c)return!1;return!0}if(e=t.normalizeRange(e),e[0]===e[1])return!1;let s=t.getAtoms(e,{includeChildren:!0});n.operation==="toggle"&&(r.color&&a("color",r.color)&&(r.color="none",delete r.verbatimColor),r.backgroundColor&&a("backgroundColor",r.backgroundColor)&&(r.backgroundColor="none",delete r.verbatimBackgroundColor),r.fontFamily&&a("fontFamily",r.fontFamily)&&(r.fontFamily="none"),r.fontSeries&&a("fontSeries",r.fontSeries)&&(r.fontSeries="auto"),r.fontShape&&a("fontShape",r.fontShape)&&(r.fontShape="auto"),r.fontSize&&a("fontSize",r.fontSize)&&(r.fontSize=Vi),r.variant&&a("variant",r.variant)&&(r.variant="normal"),r.variantStyle&&a("variantStyle",r.variantStyle)&&(r.variantStyle=""));for(let o of s)o.applyStyle(r);return!0}function Pm(t){return{up:"italic",bold:"bolditalic",italic:"italic",bolditalic:"bolditalic","":"italic"}[t??""]}function to(t){return{up:"up",bold:"bold",italic:void 0,bolditalic:"bold","":void 0}[t??""]}var Fl={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams ML__bold"],"ams-italic":["AMS-Regular","ML__ams ML__it"],"ams-bolditalic":["AMS-Regular","ML__ams ML__bold ML__it"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans ML__it"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans ML__bold ML__it"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak ML__bold"],"fraktur-italic":["Fraktur-Regular","ML__frak ML__it"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak ML__bold ML__it"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb ML__bold"],"double-struck-italic":["AMS-Regular","ML__bb ML_italic"],"double-struck-bolditalic":["AMS-Regular","ML__bb ML_bolditalic"]},Za={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^’‘]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},zm=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,zf=/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/,If=[/^[a-z]$/,/^[A-Z]$/,zm,zf],Nf={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]},Vl=class extends ge{constructor(){super("math")}createAtom(t,e,r){var n,a,s,o,c,d;if(e===null)return new b({type:"mord",mode:"math",command:t,value:t,style:r});let m;try{m=(s=(a=globalThis.MathfieldElement)==null?void 0:a.isFunction((n=e.command)!=null?n:t))!=null?s:!1}catch{m=!1}if(e.definitionType==="symbol"){let A=new b({type:(o=e.type)!=null?o:"mord",mode:"math",command:(c=e.command)!=null?c:t,value:String.fromCodePoint(e.codepoint),isFunction:m,style:r});return t.startsWith("\\")&&(A.verbatimLatex=t),A}let y=new b({type:"mord",mode:"math",command:(d=e.command)!=null?d:t,value:t,isFunction:m,style:r});return t.startsWith("\\")&&(y.verbatimLatex=t),y}serialize(t,e){let r=$f(t,f(p({},e),{defaultMode:"math"}));return r.length===0||e.defaultMode!=="text"?r:["$ ",...r," $"]}getFont(t,e){var r,n;if(e.variant,e.fontFamily){let[m,y]=Fl[e.fontFamily];return y&&(t.classes+=" "+y),m}let{variant:a}=e,{variantStyle:s}=e;if(a==="normal"&&!s&&/[\u00A3\u0131\u0237]/.test(t.value)&&(a="main",s="italic"),a==="normal"&&!s&&t.value.length===1){let m=!1;If.forEach((y,A)=>{var P;y.test(t.value)&&Nf[(P=e.letterShapeStyle)!=null?P:"tex"][A]==="it"&&(m=!0)}),m&&(s=Pm(s))}s==="up"&&(s=void 0);let o=s?a+"-"+s:a,[c,d]=Fl[o];if(Za[a]&&!Za[a].test(t.value)){let m=Cn(t.value,a,s);return m||(m=(r=Cn(t.value,a))!=null?r:t.value,t.classes+=(n={bold:" ML__bold",italic:" ML__it","bold-italic":" ML__bold ML__it"}[s??""])!=null?n:""),t.value=m,null}return zm.test(t.value)&&(t.classes+=" lcGreek"),d&&(t.classes+=" "+d),c}};function $f(t,e){return ct(t,"bold").map(r=>{if(Da(r[0])!=="bold"||Da(r[0].parent)==="bold")return R(Xa(r,e));let n=R(r.map(a=>{var s;return(s=a.value)!=null?s:""}));return/^[a-zA-Z0-9]+$/.test(n)?q("\\mathbf",R(Xa(r,e))):q("\\bm",R(Xa(r,e)))})}function Xa(t,e){let{parent:r}=t[0],n=Ka(r);return ct(t,"variant").map(a=>{let s=Ka(a[0]),o="";s&&s!==n&&(o={calligraphic:"\\mathcal","calligraphic-uo":"\\mathcal",fraktur:"\\mathfrak","fraktur-uo":"\\mathfrak","double-struck":"\\mathbb","double-struck-uo":"\\mathbb",script:"\\mathscr","script-uo":"\\mathscr",monospace:"\\mathtt","monospace-uo":"\\mathtt","sans-serif":"\\mathsf","sans-serif-uo":"\\mathsf",normal:"","normal-up":"\\mathrm","normal-italic":"\\mathnormal","normal-bold":"","normal-bolditalic":"\\mathbfit",ams:"","ams-up":"\\mathrm","ams-italic":"\\mathit","ams-bold":"","ams-bolditalic":"\\mathbfit",main:"","main-up":"\\mathrm","main-italic":"\\mathit","main-bold":"","main-bolditalic":"\\mathbfit"}[s]);let c=R(a.map(d=>d._serialize(e)));return o?q(o,c):c})}new Vl;function Ff(t,e){return t.map(r=>r._serialize(e))}function Vf(t,e){return ct(t,"fontShape").map(r=>{let n=Ff(r,e),{fontShape:a}=r[0].style,s="";return a==="it"&&(s="\\textit"),a==="sl"&&(s="\\textsl"),a==="sc"&&(s="\\textsc"),a==="n"&&(s="\\textup"),!s&&a?`{${q("\\fontshape",a)}${R(n)}}`:s?q(s,R(n)):R(n)})}function qf(t,e){return ct(t,"fontSeries").map(r=>{let n=Vf(r,e),{fontSeries:a}=r[0].style,s="";return a==="b"&&(s="\\textbf"),a==="l"&&(s="\\textlf"),a==="m"&&(s="\\textmd"),a&&!s?`{${q("\\fontseries",a)}${R(n)}}`:s?q(s,R(n)):R(n)})}function Hf(t,e){return ct(t,"fontSize").map(r=>{var n,a;let s=qf(r,e),o=(a=["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][(n=r[0].style.fontSize)!=null?n:""])!=null?a:"";return o?`${o} ${R(s)}`:R(s)})}function Wf(t,e,r){return ct(t,"fontFamily").map(n=>{var a;r=r&&!n.every(d=>d.style.fontFamily||d.style.fontShape||d.style.fontSeries||d.style.fontSize);let s=Hf(n,e),{fontFamily:o}=n[0].style,c=(a={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[o??""])!=null?a:"";return c?`\\${c}{${R(s)}}`:o?`{\\fontfamily{${n[0].style.fontFamily}} ${R(s)}}`:r?`\\text{${R(s)}}`:R(s)})}var Im={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"},ql=class extends ge{constructor(){super("text")}createAtom(t,e,r){return e&&e.definitionType==="symbol"?new $e(t,String.fromCodePoint(e.codepoint),r??{}):null}serialize(t,e){return Wf(t,f(p({},e),{defaultMode:"text"}),e.defaultMode!=="text")}getFont(t,e){var r,n,a,s,o;let{fontFamily:c}=e;if(Im[c]?t.classes+=" "+Im[c]:c&&t.setStyle("font-family",c),e.fontShape&&(t.classes+=" ",t.classes+=(r={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[e.fontShape])!=null?r:""),e.fontSeries){let d=e.fontSeries.match(/(.?[lbm])?(.?[cx])?/);d&&(t.classes+=" ",t.classes+=(a={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[(n=d[1])!=null?n:""])!=null?a:"",t.classes+=" ",t.classes+=(o={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[(s=d[2])!=null?s:""])!=null?o:"")}return"Main-Regular"}};new ql;var Hl=class extends ge{constructor(){super("latex")}createAtom(t){return new ue(t)}serialize(t,e){return t.filter(r=>r instanceof ue&&!r.isSuggestion).map(r=>r.value)}getFont(){return null}};new Hl;var Nm={id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["x","X","≈","˛"],KeyC:["j","J","∆","Ô"],KeyD:["e","E","´","´"],KeyE:[".",">","≥","˘"],KeyF:["u","U","¨","¨"],KeyG:["i","I","ˆ","ˆ"],KeyH:["d","D","∂","Î"],KeyI:["c","C","ç","Ç"],KeyJ:["h","H","˙","Ó"],KeyK:["t","T","†","ˇ"],KeyL:["n","N","˜","˜"],KeyM:["m","M","µ","Â"],KeyN:["b","B","∫","ı"],KeyO:["r","R","®","‰"],KeyP:["l","L","¬","Ò"],KeyQ:["'",'"',"æ","Æ"],KeyR:["p","P","π","∏"],KeyS:["o","O","ø","Ø"],KeyT:["y","Y","¥","Á"],KeyU:["g","G","©","˝"],KeyV:["k","K","˚",""],KeyW:[",","<","≤","¯"],KeyX:["q","Q","œ","Œ"],KeyY:["f","F","ƒ","Ï"],KeyZ:[";",":","…","Ú"],Digit1:["1","!","¡","⁄"],Digit2:["2","@","™","€"],Digit3:["3","#","£","‹"],Digit4:["4","$","¢","›"],Digit5:["5","%","∞","ﬁ"],Digit6:["6","^","§","ﬂ"],Digit7:["7","&","¶","‡"],Digit8:["8","*","•","°"],Digit9:["9","(","ª","·"],Digit0:["0",")","º","‚"],Space:[" "," "," "," "],Minus:["[","{","“","”"],Equal:["]","}","‘","’"],BracketLeft:["/","?","÷","¿"],BracketRight:["=","+","≠","±"],Backslash:["\\","|","«","»"],Semicolon:["s","S","ß","Í"],Quote:["-","_","–","—"],Backquote:["`","~","`","`"],Comma:["w","W","∑","„"],Period:["v","V","√","◊"],Slash:["z","Z","Ω","¸"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["§","±","§","±"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}},Ya={id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["b","B","∫","ı"],KeyC:["c","C","ç","Ç"],KeyD:["d","D","∂","Î"],KeyE:["e","E","´","´"],KeyF:["f","F","ƒ","Ï"],KeyG:["g","G","©","˝"],KeyH:["h","H","˙","Ó"],KeyI:["i","I","ˆ","ˆ"],KeyJ:["j","J","∆","Ô"],KeyK:["k","K","˚",""],KeyL:["l","L","¬","Ò"],KeyM:["m","M","µ","Â"],KeyN:["n","N","˜","˜"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","œ","Œ"],KeyR:["r","R","®","‰"],KeyS:["s","S","ß","Í"],KeyT:["t","T","†","ˇ"],KeyU:["u","U","¨","¨"],KeyV:["v","V","√","◊"],KeyW:["w","W","∑","„"],KeyX:["x","X","≈","˛"],KeyY:["y","Y","¥","Á"],KeyZ:["z","Z","Ω","¸"],Digit1:["1","!","¡","⁄"],Digit2:["2","@","™","€"],Digit3:["3","#","£","‹"],Digit4:["4","$","¢","›"],Digit5:["5","%","∞","ﬁ"],Digit6:["6","^","§","ﬂ"],Digit7:["7","&","¶","‡"],Digit8:["8","*","•","°"],Digit9:["9","(","ª","·"],Digit0:["0",")","º","‚"],Space:[" "," "," "," "],Minus:["-","_","–","—"],Equal:["=","+","≠","±"],BracketLeft:["[","{","“","”"],BracketRight:["]","}","‘","’"],Backslash:["\\","|","«","»"],Semicolon:[";",":","…","Ú"],Quote:["'",'"',"æ","Æ"],Backquote:["`","˜","`","`"],Comma:[",","<","≤","¯"],Period:[".",">","≥","˘"],Slash:["/","?","÷","¿"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["§","±","§","±"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}},Wl={id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","á","Á"],KeyB:["b","B","",""],KeyC:["c","C","©","¢"],KeyD:["d","D","ð","Ð"],KeyE:["e","E","é","É"],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","í","Í"],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","ø","Ø"],KeyM:["m","M","µ",""],KeyN:["n","N","ñ","Ñ"],KeyO:["o","O","ó","Ó"],KeyP:["p","P","ö","Ö"],KeyQ:["q","Q","ä","Ä"],KeyR:["r","R","®",""],KeyS:["s","S","ß","§"],KeyT:["t","T","þ","Þ"],KeyU:["u","U","ú","Ú"],KeyV:["v","V","",""],KeyW:["w","W","å","Å"],KeyX:["x","X","",""],KeyY:["y","Y","ü","Ü"],KeyZ:["z","Z","æ","Æ"],Digit1:["1","!","¡","¹"],Digit2:["2","@","²",""],Digit3:["3","#","³",""],Digit4:["4","$","¤","£"],Digit5:["5","%","€",""],Digit6:["6","^","¼",""],Digit7:["7","&","½",""],Digit8:["8","*","¾",""],Digit9:["9","(","‘",""],Digit0:["0",")","’",""],Space:[" "," ","",""],Minus:["-","_","¥",""],Equal:["=","+","×","÷"],BracketLeft:["[","{","«",""],BracketRight:["]","}","»",""],Backslash:["\\","|","¬","¦"],Semicolon:[";",":","¶","°"],Quote:["'",'"',"´","¨"],Backquote:["`","~","",""],Comma:[",","<","ç","Ç"],Period:[".",">","",""],Slash:["/","?","¿",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}},Ul={id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","¦"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},$m={id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","‡","Ω"],KeyB:["b","B","ß","∫"],KeyC:["c","C","©","¢"],KeyD:["d","D","∂","∆"],KeyE:["e","E","ê","Ê"],KeyF:["f","F","ƒ","·"],KeyG:["g","G","ﬁ","ﬂ"],KeyH:["h","H","Ì","Î"],KeyI:["i","I","î","ï"],KeyJ:["j","J","Ï","Í"],KeyK:["k","K","È","Ë"],KeyL:["l","L","¬","|"],KeyM:[",","?","∞","¿"],KeyN:["n","N","~","ı"],KeyO:["o","O","œ","Œ"],KeyP:["p","P","π","∏"],KeyQ:["a","A","æ","Æ"],KeyR:["r","R","®","‚"],KeyS:["s","S","Ò","∑"],KeyT:["t","T","†","™"],KeyU:["u","U","º","ª"],KeyV:["v","V","◊","√"],KeyW:["z","Z","Â","Å"],KeyX:["x","X","≈","⁄"],KeyY:["y","Y","Ú","Ÿ"],KeyZ:["w","W","‹","›"],Digit1:["&","1","","´"],Digit2:["é","2","ë","„"],Digit3:['"',"3","“","”"],Digit4:["'","4","‘","’"],Digit5:["(","5","{","["],Digit6:["§","6","¶","å"],Digit7:["è","7","«","»"],Digit8:["!","8","¡","Û"],Digit9:["ç","9","Ç","Á"],Digit0:["à","0","ø","Ø"],Space:[" "," "," "," "],Minus:[")","°","}","]"],Equal:["-","_","—","–"],BracketLeft:["^","¨","ô","Ô"],BracketRight:["$","*","€","¥"],Backslash:["`","£","@","#"],Semicolon:["m","M","µ","Ó"],Quote:["ù","%","Ù","‰"],Backquote:["<",">","≤","≥"],Comma:[";",".","…","•"],Period:[":","/","÷","\\"],Slash:["=","+","≠","±"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","•","Ÿ"],NumpadEqual:["=","=","=","="]}},Fm={id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["é","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["è","7","`",""],Digit8:["_","8","\\",""],Digit9:["ç","9","^",""],Digit0:["à","0","@",""],Space:[" "," ","",""],Minus:[")","°","]",""],Equal:["=","+","}",""],BracketLeft:["^","¨","",""],BracketRight:["$","£","¤",""],Backslash:["*","µ","",""],Semicolon:["m","M","",""],Quote:["ù","%","",""],Backquote:["²","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","§","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}},Vm={id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@","Ω"],KeyB:["b","B","”","’"],KeyC:["c","C","¢","©"],KeyD:["d","D","ð","Ð"],KeyE:["e","E","€","¢"],KeyF:["f","F","đ","ª"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̉","̛"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:[",","?","́","̋"],KeyN:["n","N","n","N"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","þ","Þ"],KeyQ:["a","A","æ","Æ"],KeyR:["r","R","¶","®"],KeyS:["s","S","ß","§"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","“","‘"],KeyW:["z","Z","«","<"],KeyX:["x","X","»",">"],KeyY:["y","Y","←","¥"],KeyZ:["w","W","ł","Ł"],Digit1:["&","1","¹","¡"],Digit2:["é","2","~","⅛"],Digit3:['"',"3","#","£"],Digit4:["'","4","{","$"],Digit5:["(","5","[","⅜"],Digit6:["-","6","|","⅝"],Digit7:["è","7","`","⅞"],Digit8:["_","8","\\","™"],Digit9:["ç","9","^","±"],Digit0:["à","0","@","°"],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:[")","°","]","¿"],Equal:["=","+","}","̨"],BracketLeft:["̂","̈","̈","̊"],BracketRight:["$","£","¤","̄"],Backslash:["*","µ","̀","̆"],Semicolon:["m","M","µ","º"],Quote:["ù","%","̂","̌"],Backquote:["²","~","¬","¬"],Comma:[";",".","─","×"],Period:[":","/","·","÷"],Slash:["!","§","̣","̇"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","¦"]}},qm={id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["b","B","∫","‹"],KeyC:["c","C","ç","Ç"],KeyD:["d","D","∂","™"],KeyE:["e","E","€","‰"],KeyF:["f","F","ƒ","Ï"],KeyG:["g","G","©","Ì"],KeyH:["h","H","ª","Ó"],KeyI:["i","I","⁄","Û"],KeyJ:["j","J","º","ı"],KeyK:["k","K","∆","ˆ"],KeyL:["l","L","@","ﬂ"],KeyM:["m","M","µ","˘"],KeyN:["n","N","~","›"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","«","»"],KeyR:["r","R","®","¸"],KeyS:["s","S","‚","Í"],KeyT:["t","T","†","˝"],KeyU:["u","U","¨","Á"],KeyV:["v","V","√","◊"],KeyW:["w","W","∑","„"],KeyX:["x","X","≈","Ù"],KeyY:["z","Z","Ω","ˇ"],KeyZ:["y","Y","¥","‡"],Digit1:["1","!","¡","¬"],Digit2:["2",'"',"“","”"],Digit3:["3","§","¶","#"],Digit4:["4","$","¢","£"],Digit5:["5","%","[","ﬁ"],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{","˜"],Digit9:["9",")","}","·"],Digit0:["0","=","≠","¯"],Space:[" "," "," "," "],Minus:["ß","?","¿","˙"],Equal:["´","`","'","˚"],BracketLeft:["ü","Ü","•","°"],BracketRight:["+","*","±",""],Backslash:["#","'","‘","’"],Semicolon:["ö","Ö","œ","Œ"],Quote:["ä","Ä","æ","Æ"],Backquote:["<",">","≤","≥"],Comma:[",",";","∞","˛"],Period:[".",":","…","÷"],Slash:["-","_","–","—"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","°","„","“"],NumpadEqual:["=","=","=","="]}},Hm={id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","µ",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"²",""],Digit3:["3","§","³",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["ß","?","\\","ẞ"],Equal:["´","`","",""],BracketLeft:["ü","Ü","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["ö","Ö","",""],Quote:["ä","Ä","",""],Backquote:["^","°","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}},Wm={id:"linux.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","æ","Æ"],KeyB:["b","B","“","‘"],KeyC:["c","C","¢","©"],KeyD:["d","D","ð","Ð"],KeyE:["e","E","€","€"],KeyF:["f","F","đ","ª"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̣","̇"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:["m","M","µ","º"],KeyN:["n","N","”","’"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","þ","Þ"],KeyQ:["q","Q","@","Ω"],KeyR:["r","R","¶","®"],KeyS:["s","S","ſ","ẞ"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","„","‚"],KeyW:["w","W","ł","Ł"],KeyX:["x","X","«","‹"],KeyY:["z","Z","←","¥"],KeyZ:["y","Y","»","›"],Digit1:["1","!","¹","¡"],Digit2:["2",'"',"²","⅛"],Digit3:["3","§","³","£"],Digit4:["4","$","¼","¤"],Digit5:["5","%","½","⅜"],Digit6:["6","&","¬","⅝"],Digit7:["7","/","{","⅞"],Digit8:["8","(","[","™"],Digit9:["9",")","]","±"],Digit0:["0","=","}","°"],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["ß","?","\\","¿"],Equal:["́","̀","̧","̨"],BracketLeft:["ü","Ü","̈","̊"],BracketRight:["+","*","~","¯"],Backslash:["#","'","’","̆"],Semicolon:["ö","Ö","̋","̣"],Quote:["ä","Ä","̂","̌"],Backquote:["̂","°","′","″"],Comma:[",",";","·","×"],Period:[".",":","…","÷"],Slash:["-","_","–","—"],PrintScreen:["","","",""],PageUp:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",",","",","],IntlBackslash:["<",">","|","̱"],AltRight:["\r","\r","\r","\r"],MetaRight:[".",".",".","."]}},Um={id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["b","B","ß",""],KeyC:["c","C","©"," "],KeyD:["d","D","∂","∆"],KeyE:["e","E","€","€"],KeyF:["f","F","ƒ","ﬁ"],KeyG:["g","G","","ﬂ"],KeyH:["h","H","™"," "],KeyI:["i","I"," "," "],KeyJ:["j","J","¶","¯"],KeyK:["k","K","§","ˇ"],KeyL:["l","L"," ","˘"],KeyM:["m","M","µ","˚"],KeyN:["n","N"," ","˙"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","œ","Œ"],KeyR:["r","R","®"," "],KeyS:["s","S","∫"," "],KeyT:["t","T","†","‡"],KeyU:["u","U"," "," "],KeyV:["v","V","√","◊"],KeyW:["w","W","æ","Æ"],KeyX:["x","X","∑","›"],KeyY:["y","Y","¥"," "],KeyZ:["z","Z","Ω","‹"],Digit1:["1","!","|","ı"],Digit2:["2",'"',"@","˝"],Digit3:["3","·","#","•"],Digit4:["4","$","¢","£"],Digit5:["5","%","∞","‰"],Digit6:["6","&","¬"," "],Digit7:["7","/","÷","⁄"],Digit8:["8","(","“","‘"],Digit9:["9",")","”","’"],Digit0:["0","=","≠","≈"],Space:[" "," "," "," "],Minus:["'","?","´","¸"],Equal:["¡","¿","‚","˛"],BracketLeft:["`","^","[","ˆ"],BracketRight:["+","*","]","±"],Backslash:["ç","Ç","}","»"],Semicolon:["ñ","Ñ","~","˜"],Quote:["´","¨","{","«"],Backquote:["<",">","≤","≥"],Comma:[",",";","„",""],Period:[".",":","…","…"],Slash:["-","_","–","—"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["º","ª","\\","°"]}},jm={id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","·","#",""],Digit4:["4","$","~",""],Digit5:["5","%","€",""],Digit6:["6","&","¬",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["¡","¿","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["ç","Ç","}",""],Semicolon:["ñ","Ñ","",""],Quote:["´","¨","{",""],Backquote:["º","ª","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}},Jm={id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","æ","Æ"],KeyB:["b","B","”","’"],KeyC:["c","C","¢","©"],KeyD:["d","D","ð","Ð"],KeyE:["e","E","€","¢"],KeyF:["f","F","đ","ª"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̉","̛"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:["m","M","µ","º"],KeyN:["n","N","n","N"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","þ","Þ"],KeyQ:["q","Q","@","Ω"],KeyR:["r","R","¶","®"],KeyS:["s","S","ß","§"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","“","‘"],KeyW:["w","W","ł","Ł"],KeyX:["x","X","»",">"],KeyY:["y","Y","←","¥"],KeyZ:["z","Z","«","<"],Digit1:["1","!","|","¡"],Digit2:["2",'"',"@","⅛"],Digit3:["3","·","#","£"],Digit4:["4","$","~","$"],Digit5:["5","%","½","⅜"],Digit6:["6","&","¬","⅝"],Digit7:["7","/","{","⅞"],Digit8:["8","(","[","™"],Digit9:["9",")","]","±"],Digit0:["0","=","}","°"],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["'","?","\\","¿"],Equal:["¡","¿","̃","~"],BracketLeft:["̀","̂","[","̊"],BracketRight:["+","*","]","̄"],Backslash:["ç","Ç","}","̆"],Semicolon:["ñ","Ñ","~","̋"],Quote:["́","̈","{","{"],Backquote:["º","ª","\\","\\"],Comma:[",",";","─","×"],Period:[".",":","·","÷"],Slash:["-","_","̣","̇"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","¦"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}};function jl(t){let e=t.split("+"),r={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:e.pop()};return e.includes("shift")&&(r.shift=!0),e.includes("alt")&&(r.alt=!0),e.includes("ctrl")&&(r.ctrl=!0),e.includes("cmd")&&(r.cmd=!0),e.includes("win")&&(r.win=!0),e.includes("meta")&&(r.meta=!0),r}function ci(t){let e="";return t.shift&&(e+="shift+"),t.alt&&(e+="alt+"),t.ctrl&&(e+="ctrl+"),t.cmd&&(e+="cmd+"),t.win&&(e+="win+"),t.meta&&(e+="meta+"),e+t.key}var Uf={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},ro=[];function Jl(){switch(kt()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function Ue(t){(!t.platform||t.platform===Jl())&&ro.push(t)}function Gm(t,e){var r;let n={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!t)return n;for(let[a,s]of Object.entries(e.mapping)){if(s[0]===t)return n.key=`[${a}]`,n;if(s[1]===t)return n.shift=!0,n.key=`[${a}]`,n;if(s[2]===t)return n.alt=!0,n.key=`[${a}]`,n;if(s[3]===t)return n.shift=!0,n.alt=!0,n.key=`[${a}]`,n}return n.key=(r=Uf[t])!=null?r:"",n}function Xm(t){if(t.code)return t;let e=Object.entries(Dr().mapping),r=!1,n=!1,a="";for(let s=0;s<4;s++){for(let[o,c]of e)if(c[s]===t.key){a=o,s===3?(r=!0,n=!0):s===2?r=!0:s===1&&(n=!0);break}if(a)break}return new KeyboardEvent(t.type,f(p({},t),{altKey:r,shiftKey:n,code:a}))}function Zm(t){var e,r;if(!t||t.key==="Unidentified"||t.key==="Dead")return;let n=t.shiftKey&&t.altKey?3:t.altKey?2:t.shiftKey?1:0;for(let a of ro)((e=a.mapping[t.code])==null?void 0:e[n])===t.key?a.score+=1:(r=a.mapping[t.code])!=null&&r[n]&&(a.score=0);ro.sort((a,s)=>s.score-a.score)}function Dr(){return ro[0]}function Qm(){switch(Jl()){case"apple":return Ya;case"windows":return Wl;case"linux":return Ul}return Ya}switch(Jl()){case"apple":Ue(Ya),Ue($m),Ue(Um),Ue(qm);break;case"windows":Ue(Wl),Ue(Fm),Ue(jm),Ue(Hm);break;case"linux":Ue(Ul),Ue(Vm),Ue(Jm),Ue(Wm);break}Ue(Nm);function cn(t){var e;let r=/macos|ios/.test(kt()),n=t.split("+"),a="";for(let s of n)a&&(a+=r?" ":'<span class="ML__shortcut-join">+</span>'),s.startsWith("[Key")?a+=s.slice(4,5):s.startsWith("Key")?a+=s.slice(3,4):s.startsWith("[Digit")?a+=s.slice(6,7):s.startsWith("Digit")?a+=s.slice(5,6):a+=(e={cmd:"⌘",meta:r?"⌘":"Ctrl",shift:r?"⇧":"Shift",alt:r?"⌥":"Alt",ctrl:r?"⌃":"Ctrl","\n":r?"⏎":"Return","[return]":r?"⏎":"Return","[enter]":r?"⌤":"Enter","[tab]":r?"⇥":"Tab","[escape]":"Esc","[backspace]":r?"⌫":"Backspace","[delete]":r?"⌦":"Del","[pageup]":r?"⇞":"Page Up","[pagedown]":r?"⇟":"Page Down","[home]":r?"⤒":"Home","[end]":r?"⤓":"End","[space]":"Space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"⇠",up:"⇡",right:"⇢",down:"⇣","[arrowleft]":"⇠","[arrowup]":"⇡","[arrowright]":"⇢","[arrowdown]":"⇣"}[s.toLowerCase()])!=null?e:s.toUpperCase();return a}function un(t){if(t instanceof MouseEvent||t instanceof PointerEvent)return{x:t.clientX,y:t.clientY};if(typeof TouchEvent<"u"&&t instanceof TouchEvent){let e=[...t.touches].reduce((n,a)=>({x:n.x+a.clientX,y:n.y+a.clientY}),{x:0,y:0}),r=t.touches.length;return{x:e.x/r,y:e.y/r}}}function Nt(t){let e={alt:!1,control:!1,shift:!1,meta:!1};return(t instanceof MouseEvent||t instanceof PointerEvent||typeof TouchEvent<"u"&&t instanceof TouchEvent||t instanceof KeyboardEvent)&&(t.altKey&&(e.alt=!0),t.ctrlKey&&(e.control=!0),t.metaKey&&(e.meta=!0),t.shiftKey&&(e.shift=!0)),e}function ep(t,e){return!t&&e||t&&!e?!1:!t||!e?!0:t.alt===e.alt&&t.control===e.control&&t.shift===e.shift&&t.meta===e.meta}var jf=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function Kr(t){return t.ctrlKey||t.metaKey||["Dead","Process"].includes(t.key)?!1:t.code===""?!0:jf.has(t.code)}function ui(){var t;let e=document.activeElement;for(;(t=e?.shadowRoot)!=null&&t.activeElement;)e=e.shadowRoot.activeElement;return e}var Ae=class w4{static get scrim(){return w4._scrim||(w4._scrim=new w4),w4._scrim}static open(e){w4.scrim.open(e)}static close(){w4.scrim.close()}static get state(){return w4.scrim.state}static get element(){return w4.scrim.element}constructor(e){var r,n;this.lightDismiss=(r=e?.lightDismiss)!=null?r:!0,this.translucent=(n=e?.translucent)!=null?n:!1,this.state="closed"}get element(){if(this._element)return this._element;let e=document.createElement("div");return e.setAttribute("role","presentation"),e.style.position="fixed",e.style.contain="content",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.zIndex="var(--scrim-zindex, 10099)",e.style.outline="none",this.translucent?(e.style.background="rgba(255, 255, 255, .2)",e.style.backdropFilter="contrast(40%)"):e.style.background="transparent",this._element=e,e}open(e){var r;if(this.state!=="closed")return;this.state="opening",this.onDismiss=e?.onDismiss,this.savedActiveElement=ui();let{element:n}=this;((r=e?.root)!=null?r:document.body).appendChild(n),n.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let a=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let s=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${s+a}px`;let o=document.querySelector(".MLK__plate");if(o instanceof HTMLElement){this.savedMlkPaddingRight=o.style.paddingRight;let c=Number.parseFloat(getComputedStyle(o).paddingRight);o.style.paddingRight=`${c+a}px`}e!=null&&e.child&&n.append(e.child),this.state="open"}close(){var e,r,n,a,s;if(this.state!=="open"){this.element.parentElement;return}this.state="closing",typeof this.onDismiss=="function"&&this.onDismiss(),this.onDismiss=void 0;let{element:o}=this;o.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),o.remove(),document.body.style.overflow=(e=this.savedOverflow)!=null?e:"",document.body.style.marginRight=(r=this.savedMarginRight)!=null?r:"";let c=document.querySelector(".MLK__plate");c instanceof HTMLElement&&(c.style.paddingRight=(n=this.savedMlkPaddingRight)!=null?n:""),ui()!==this.savedActiveElement&&((s=(a=this.savedActiveElement)==null?void 0:a.focus)==null||s.call(a)),o.innerHTML="",this.state="closed"}handleEvent(e){this.lightDismiss&&(e.target===this._element&&e.type==="click"?(this.close(),e.preventDefault(),e.stopPropagation()):e.target===document&&(e.type==="touchmove"||e.type==="scroll")&&(this.close(),e.preventDefault(),e.stopPropagation()))}};function tp(t,e,r){let n=null,a=null,s=!1,o=!1,c=!1,d=new AbortController,m=d.signal;return t.addEventListener("keydown",y=>{if(s||y.key==="Process"||y.code==="CapsLock"||/(Control|Meta|Alt|Shift)(Left|Right)/.test(y.code)){n=null;return}n=y,a=null,r.onKeystroke(y)?t.textContent="":n=null},{capture:!0,signal:m}),t.addEventListener("keypress",y=>{s||(n&&a&&r.onKeystroke(n),a=y)},{capture:!0,signal:m}),t.addEventListener("compositionstart",y=>{t.textContent="",s=!0,r.onCompositionStart(y.data)},{capture:!0,signal:m}),t.addEventListener("compositionupdate",y=>{s&&r.onCompositionUpdate(y.data)},{capture:!0,signal:m}),t.addEventListener("compositionend",y=>{t.textContent="",s&&(s=!1,r.onCompositionEnd(y.data))},{capture:!0,signal:m}),t.addEventListener("beforeinput",y=>y.stopImmediatePropagation(),{signal:m}),t.addEventListener("input",y=>{var A;if(!s&&(t.textContent="",y.inputType!=="insertCompositionText")){if(y.inputType==="insertFromPaste"){y.preventDefault(),y.stopPropagation();return}r.onInput((A=y.data)!=null?A:""),y.preventDefault(),y.stopPropagation()}},{signal:m}),t.addEventListener("paste",y=>{t.focus({preventScroll:!0}),t.textContent="",r.onPaste(y)||y.preventDefault(),y.stopImmediatePropagation()},{signal:m}),t.addEventListener("cut",y=>r.onCut(y),{capture:!0,signal:m}),t.addEventListener("copy",y=>r.onCopy(y),{capture:!0,signal:m}),t.addEventListener("blur",y=>{var A,P;if(((P=(A=y.relatedTarget)==null?void 0:A._mathfield)==null?void 0:P.element)===e){t.focus({preventScroll:!0}),y.preventDefault(),y.stopPropagation();return}let Z=!1,me=y.relatedTarget;for(;me;){if(me.classList.contains("ML__keyboard")){Z=!0;break}me=me.parentElement}if(Z){t.focus({preventScroll:!0}),y.preventDefault(),y.stopPropagation();return}let _e=Ae.state;if(_e==="open"||_e==="opening"){y.preventDefault(),y.stopPropagation();return}if(y.relatedTarget===y.target.getRootNode().host){y.preventDefault(),y.stopPropagation();return}c||o||(c=!0,n=null,a=null,r.onBlur(),c=!1)},{capture:!0,signal:m}),t.addEventListener("focus",y=>{c||o||(o=!0,r.onFocus(),o=!1)},{capture:!0,signal:m}),{dispose:()=>d.abort(),cancelComposition:()=>{s&&(typeof t.blur=="function"&&t.blur(),requestAnimationFrame(()=>t.focus({preventScroll:!0})))},blur:()=>{typeof t.blur=="function"&&(c=!0,t.blur(),c=!1)},focus:()=>{!o&&typeof t.focus=="function"&&(o=!0,t.focus({preventScroll:!0}),o=!1)},hasFocus:()=>ui()===t,setAriaLabel:y=>t.setAttribute("aria-label",y),setValue:y=>{var A;t.textContent!==y&&(t.textContent=y,t.style.left="-1000px",(A=window.getSelection())==null||A.selectAllChildren(t))},moveTo:(y,A)=>{t.style.top=`${A}px`,t.style.left=`${y}px`}}}function Or(t){var e;if(!t||!Kr(t))return"";let r;return t.key==="Unidentified"&&t.target&&(r=t.target.value),r=(e=r??t.key)!=null?e:t.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(r)&&(r=""),r}function Qa(t){t=Xm(t);let e=[];return t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),e.length===0?`[${t.code}]`:(e.push(`[${t.code}]`),e.join("+"))}function Jf(t){if(Me()){let e=kt(),r=t.startsWith("!"),n=t.endsWith(e);if(r&&!n||!r&&n)return!0}return t==="!other"?!1:t==="other"}function ip(t,e,r){if(t.length===0)return"";let n=ci(jl(Qa(r))),a=ci({key:r.key,shift:r.shiftKey,alt:r.altKey,ctrl:r.ctrlKey,meta:r.metaKey||r.ctrlKey&&/macos|ios/.test(kt()),cmd:!1,win:!1});for(let s=t.length-1;s>=0;s--)if((t[s].key===n||t[s].key===a)&&(!t[s].ifMode||t[s].ifMode===e))return t[s].command;return""}function rp(t){let e=t;return Y(e)&&(e=e.length>0?e[0]+"("+e.slice(1).join("")+")":""),e}function np(t,e){let r=[];if(typeof e=="string"){let s=mm[e];Y(s)?r=s.slice():s&&r.push(s)}let n=rp(e),a=new RegExp("^"+n.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let s of t)a.test(rp(s.command))&&r.push(s.key);return r.map(cn)}function Gf(t,e){if(t.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(t.ifPlatform))throw new Error(`Unexpected platform "${t.ifPlatform}" for keybinding ${t.key}`);if(t.ifLayout!==void 0&&(e.score===0||!t.ifLayout.includes(e.id)))return;let r=jl(t.key),n=t.ifPlatform;if(r.cmd){if(n&&n!=="macos"&&n!=="ios")throw new Error('Unexpected "cmd" modifier with platform "'+n+`"
"cmd" modifier can only be used with macOS or iOS platform.`);n||(n=kt()==="ios"?"ios":"macos"),r.win=!1,r.cmd=!1,r.meta=!0}if(r.win){if(n&&n!=="windows")throw new Error('Unexpected "win" modifier with platform "'+n+`"
"win" modifier can only be used with Windows platform.`);n="windows",r.win=!1,r.cmd=!1,r.meta=!0}if(n&&!Jf(n))return;if(/^\[.+\]$/.test(r.key))return f(p({},t),{key:ci(r)});let a=Gm(r.key,e);if(!a)return f(p({},t),{key:ci(r)});if(a.shift&&r.shift||a.alt&&r.alt)throw new Error(`The keybinding ${t.key} (${Gl(t.command)}) is conflicting with the key combination ${ci(a)} using the ${e.displayName} keyboard layout`);return a.shift=a.shift||r.shift,a.alt=a.alt||r.alt,a.meta=r.meta,a.ctrl=r.ctrl,f(p({},t),{key:ci(a)})}function Gl(t){if(Array.isArray(t)){let e=[...t];return e.shift()+"("+e.map(r=>typeof r=="string"?`"${r}"`:r.toString()).join(", ")+")"}return t}function op(t,e){let r=[],n=[];for(let a of t)try{let s=Gf(a,e);if(!s)continue;let o=n.find(c=>c.key===s.key&&c.ifMode===s.ifMode);if(o)throw new Error(`Ambiguous key binding ${a.key} (${Gl(a.command)}) matches ${o.key} (${Gl(o.command)}) with the ${e.displayName} keyboard layout`);n.push(s)}catch(s){s instanceof Error&&r.push(s.message)}return[n,r]}var Xl=class extends V{constructor(){super("latex")}createAtom(t){return new ue(t)}onPaste(t,e){if(!e)return!1;let r=typeof e=="string"?e:e.getData("application/x-latex")||e.getData("text/plain");return r&&t.model.contentWillChange({inputType:"insertFromPaste",data:r})?(t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,r)&&(t.startRecording(),t.snapshot("paste"),t.model.contentDidChange({inputType:"insertFromPaste"}),U(t)),t.startRecording(),!0):!1}insert(t,e,r){if(!t.contentWillChange({data:e,inputType:"insertText"}))return!1;r||(r={}),r.insertionMode||(r.insertionMode="replaceSelection"),r.selectionMode||(r.selectionMode="placeholder");let{silenceNotifications:n}=t;r.silenceNotifications&&(t.silenceNotifications=!0);let a=t.silenceNotifications;t.silenceNotifications=!0,r.insertionMode==="replaceSelection"&&!t.selectionIsCollapsed?t.deleteAtoms(le(t.selection)):r.insertionMode==="replaceAll"?(t.root.setChildren([],"body"),t.position=0):r.insertionMode==="insertBefore"?t.collapseSelection("backward"):r.insertionMode==="insertAfter"&&t.collapseSelection("forward");let s=[];for(let d of e)iu.test(d)&&s.push(new ue(d));let o=t.at(t.position);if(o instanceof Rt&&(o=o.lastChild),!(o.parent instanceof Rt)){let d=new Rt;o.parent.addChildAfter(d,o),o=d.firstChild}let c=o.parent.addChildrenAfter(s,o);return t.silenceNotifications=a,r.selectionMode==="before"||(r.selectionMode==="item"?t.setSelection(t.anchor,t.offsetOf(c)):c&&(t.position=t.offsetOf(c))),t.contentDidChange({data:e,inputType:"insertText"}),t.silenceNotifications=n,!0}};function io(t){return t.atoms.find(e=>e.type==="latexgroup")}function no(t){var e,r;let n=io(t);return(r=(e=n?.body)==null?void 0:e.filter(a=>a.type==="latex"))!=null?r:[]}function es(t,e){var r;let n=0,a=!1,s=Number.isFinite(e?.before)?(r=e?.before)!=null?r:0:t.lastOffset;for(;n<=s&&!a;){let d=t.at(n);a=d instanceof ue&&d.isSuggestion,a||n++}if(!a)return[void 0,void 0];let o=n,c=!1;for(;o<=s&&!c;){let d=t.at(o);c=!(d instanceof ue&&d.isSuggestion),c||o++}return[n-1,o-1]}new Xl;function Xf(t,e){t.flushInlineShortcutBuffer(),t.stopCoalescingUndo();let r=ts(t,e),{model:n}=t;return n.selectionIsCollapsed?(t.defaultStyle.fontSeries&&r.fontSeries===t.defaultStyle.fontSeries&&(r.fontSeries="auto"),r.fontShape&&r.fontShape===t.defaultStyle.fontShape&&(r.fontShape="auto"),r.color&&r.color===t.defaultStyle.color&&(r.color="none"),r.backgroundColor&&r.backgroundColor===t.defaultStyle.backgroundColor&&(r.backgroundColor="none"),r.fontSize&&r.fontSize===t.defaultStyle.fontSize&&(r.fontSize="auto"),t.defaultStyle=p(p({},t.defaultStyle),r)):t.model.deferNotifications({content:!0,type:"insertText"},()=>{n.selection.ranges.forEach(a=>eo(n,a,r,{operation:"toggle"})),t.snapshot("style-change")}),!0}pe({applyStyle:Xf},{target:"mathfield",canUndo:!0,changeContent:!0});function ts(t,e){var r,n,a,s,o,c,d,m,y,A;let P={};if(typeof e.color=="string"){let me=(n=t.colorMap((r=e.color)!=null?r:e.verbatimColor))!=null?n:"none";me!==e.color&&(P.verbatimColor=(a=e.verbatimColor)!=null?a:e.color),P.color=me}if(typeof e.backgroundColor=="string"){let me=(o=t.backgroundColorMap((s=e.backgroundColor)!=null?s:e.verbatimBackgroundColor))!=null?o:"none";me!==e.backgroundColor&&(P.verbatimBackgroundColor=(c=e.verbatimBackgroundColor)!=null?c:e.backgroundColor),P.backgroundColor=me}typeof e.fontFamily=="string"&&(P.fontFamily=e.fontFamily),typeof e.series=="string"&&(P.fontSeries=e.series),typeof e.fontSeries=="string"&&(P.fontSeries=e.fontSeries.toLowerCase()),P.fontSeries&&(P.fontSeries=(d={bold:"b",medium:"m",normal:"m"}[P.fontSeries])!=null?d:P.fontSeries),typeof e.shape=="string"&&(P.fontShape=e.shape),typeof e.fontShape=="string"&&(P.fontShape=e.fontShape.toLowerCase()),P.fontShape&&(P.fontShape=(m={italic:"it",up:"n",upright:"n",normal:"n"}[P.fontShape])!=null?m:P.fontShape),e.variant&&(P.variant=e.variant.toLowerCase()),e.variantStyle&&(P.variantStyle=e.variantStyle.toLowerCase());let Z=(y=e.size)!=null?y:e.fontSize;return typeof Z=="number"?P.fontSize=Math.max(1,Math.min(10,Z)):typeof Z=="string"&&(P.fontSize=(A={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[Z.toLowerCase()])!=null?A:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[Z]),P}function oo(t,e,r){var n,a;let s=t.model;if(s.mode==="latex")return{};let o=t.styleBias;if(o==="none")return t.defaultStyle;if(s.mode==="text")return(a=(n=s.at(o==="right"?r.after:r.before))==null?void 0:n.style)!=null?a:t.defaultStyle;if(s.mode==="math"){let c=s.at(o==="right"?r.after:r.before);return c?f(p({},c.style),{variant:"normal"}):t.defaultStyle}return{}}function rr(t){let e=t.options.onInsertStyle;if(e===null)return{};e===void 0&&(e=oo);let r=t.model,n=t.styleBias,a=r.at(r.position),s=ap(r,a,n),o=ap(r,a.rightSibling,n);return e(t,r.position,{before:s,after:o})}function ap(t,e,r){var n;return!e||e.type==="first"&&r!=="right"?-1:e.type!=="group"?t.offsetOf(e):!e.body||e.body.length<2?-1:((n=e.body)==null?void 0:n.length)===1||r!=="right"?t.offsetOf(e.body[0]):t.offsetOf(e.body[e.body.length-1])}function di(t){let e=no(t.model).filter(r=>r.isSuggestion);if(e.length!==0){t.model.position=t.model.offsetOf(e[0].leftSibling);for(let r of e)r.parent.removeChild(r)}}function Rr(t,e){var r;let{model:n}=t;di(t);for(let y of no(n))y.isError=!1;if(!n.selectionIsCollapsed||t.options.popoverPolicy==="off"){Br(t);return}let a=[],s=n.at(n.position);for(;s&&s instanceof ue&&/^[a-zA-Z\*]$/.test(s.value);)s=s.leftSibling;if(s&&s instanceof ue&&s.value==="\\")for(a.push(s),s=s.rightSibling;s&&s instanceof ue&&/^[a-zA-Z\*]$/.test(s.value);)a.push(s),s=s.rightSibling;let o=a.map(y=>y.value).join(""),c=ou(t,o);if(c.length===0){if(/^\\[a-zA-Z\*]+$/.test(o))for(let y of a)y.isError=!0;Br(t);return}let d=(r=e?.atIndex)!=null?r:0;t.suggestionIndex=d<0?c.length-1:d%c.length;let m=c[t.suggestionIndex];if(m!==o){let y=a[a.length-1];y.parent.addChildrenAfter([...m.slice(o.length-m.length)].map(A=>new ue(A,{isSuggestion:!0})),y),bt(t,{interactive:!0})}sp(t,c)}function Zl(t){let[e,r]=es(t,{before:t.position});if(e===void 0||r===void 0)return!1;let n=!1;return t.getAtoms([e,r]).forEach(a=>{a.isSuggestion&&(a.isSuggestion=!1,n=!0)}),n}function $t(t,e="accept",r){var n,a;Br(t);let s=io(t.model);if(!s)return!1;if(e==="accept-suggestion"||e==="accept-all"){let m=no(t.model).filter(y=>y.isSuggestion);if(m.length!==0){for(let y of m)y.isSuggestion=!1;t.model.position=t.model.offsetOf(m[m.length-1])}if(e==="accept-suggestion")return m.length!==0}let o=no(t.model).filter(m=>!m.isSuggestion).map(m=>m.value).join(""),c=s.leftSibling;if(s.parent.removeChild(s),t.model.position=t.model.offsetOf(c),t.switchMode((n=r?.mode)!=null?n:"math"),e==="reject")return!0;let d=p({},rr(t));return!/^[a-zA-Z0-9]$/.test(o)&&t.styleBias!=="none"&&(d.variant="normal",d.variantStyle=void 0),V.insert(t.model,o,{selectionMode:(a=r?.selectItem)!=null&&a?"item":"placeholder",format:"latex",mode:"math",style:d}),t.snapshot(),t.model.announce("replacement"),t.switchMode("math"),!0}function mi(t){var e;let r=document.getElementById(t);return r?r.dataset.refcount=Number(Number.parseInt((e=r.dataset.refcount)!=null?e:"0")+1).toString():(r=document.createElement("div"),r.setAttribute("aria-hidden","true"),r.dataset.refcount="1",r.id=t,document.body.append(r)),r}function Pr(t){var e;let r=document.getElementById(t);if(!r)return;let n=Number.parseInt((e=r.getAttribute("data-refcount"))!=null?e:"0");n<=1?r.remove():r.dataset.refcount=Number(n-1).toString()}function Zf(t,e){let r=new O({from:t.context}),n=new b({mode:"math",type:"root",body:he(e,{context:r})}),a=_r(It(new _(n.render(r),{classes:"ML__base"}),r));return Mr(a,{classes:"ML__latex"}).toMarkup()}function sp(t,e){var r;if(e.length===0){Br(t);return}let n="";for(let[s,o]of e.entries()){let c=o,d=Zf(t,o),m=np(t.keybindings,c).join("<br>");n+=`<li role="button" data-command="${c}" ${s===t.suggestionIndex?"class=ML__popover__current":""}><span class="ML__popover__latex">${c}</span><span class="ML__popover__command">${d}</span>`,m&&(n+=`<span class="ML__popover__keybinding">${m}</span>`),n+="</li>"}let a=Yf(t,`<ul>${n}</ul>`);Yl()&&((r=a.querySelector(".ML__popover__current"))==null||r.scrollIntoView({block:"nearest",inline:"nearest"})),setTimeout(()=>{var s;a&&!Yl()&&(a.classList.add("is-visible"),dn(t),(s=a.querySelector(".ML__popover__current"))==null||s.scrollIntoView({block:"nearest",inline:"nearest"}))},32)}function Yl(){let t=document.getElementById("mathlive-suggestion-popover");return t?t.classList.contains("is-visible"):!1}function dn(t,e){var r,n,a;if(!t.element||t.element.mathfield!==t||!Yl())return;if(((r=t.model.at(t.model.position))==null?void 0:r.type)!=="latex"){Br(t);return}if(e!=null&&e.deferred){setTimeout(()=>dn(t),32);return}let s=Ji(t.field);if(!s)return;let o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=window.innerWidth-document.documentElement.clientWidth,m=window.innerHeight-document.documentElement.clientHeight,y=(a=(n=window.mathVirtualKeyboard)==null?void 0:n.boundingRect.height)!=null?a:0,A=document.getElementById("mathlive-suggestion-popover");s.x+A.offsetWidth/2>c-d?A.style.left=`${c-A.offsetWidth-d}px`:s.x-A.offsetWidth/2<0?A.style.left="0":A.style.left=`${s.x-A.offsetWidth/2}px`;let P=s.y-s.height;o-m-y-s.y<P?(A.classList.add("ML__popover--reverse-direction"),A.classList.remove("top-tip"),A.classList.add("bottom-tip"),A.style.top=`${s.y-s.height-A.offsetHeight-15}px`):(A.classList.remove("ML__popover--reverse-direction"),A.classList.add("top-tip"),A.classList.remove("bottom-tip"),A.style.top=`${s.y+15}px`)}function Br(t){t.suggestionIndex=0,document.getElementById("mathlive-suggestion-popover")&&Pr("mathlive-suggestion-popover")}function Yf(t,e){let r=document.getElementById("mathlive-suggestion-popover");return r?Pr("mathlive-suggestion-popover"):(Ve("suggestion-popover"),Ve("core")),r=mi("mathlive-suggestion-popover"),r.addEventListener("pointerdown",n=>n.preventDefault()),r.addEventListener("click",n=>{let a=n.target;for(;a&&!a.dataset.command;)a=a.parentElement;a&&($t(t,"reject"),V.insert(t.model,a.dataset.command,{selectionMode:"placeholder",format:"latex",mode:"math"}),t.dirty=!0,t.focus())}),r.innerHTML=globalThis.MathfieldElement.createHTML(e),r}function lp(){document.getElementById("mathlive-suggestion-popover")&&(Pr("mathlive-suggestion-popover"),it("suggestion-popover"),it("core"))}function Qf(){let t=String(new Error().stack).replace(/^Error.*\n/,"").split(`
`);if(t.length===0)return console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${new Error().stack}").`),"";let e=t[1],r=e.match(/http.*\.ts[\?:]/);return r&&(e=t[2]),r=e.match(/(https?:.*):[0-9]+:[0-9]+/),r||(r=e.match(/at (.*(\.ts))[\?:]/),r||(r=e.match(/at (.*(\.mjs|\.js))[\?:]/))),r?r[1]:(console.error(t),console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${e}").`),"")}var ir=null,cp,up,Ql=((up=(cp=globalThis?.document)==null?void 0:cp.currentScript)==null?void 0:up.src)||Qf();async function rs(t){if(/^(?:[a-z+]+:)?\/\//i.test(t)){try{return new URL(t).href}catch{}if(t.startsWith("//"))try{return new URL(`${window.location.protocol}${t}`).href}catch{}return t}if(ir===null)try{let e=await fetch(Ql,{method:"HEAD"});e.status===200&&(ir=e.url,ir=ir.replace(/\/\+esm$/,"/"),ir.includes("jsdelivr.net/")&&(ir+="/"))}catch{console.error(`Invalid URL "${t}" (relative to "${Ql}")`)}return new URL(t,ir??Ql).href}function eg(t,e,r={}){return new FontFace(t,`url(${e}.woff2) format('woff2')`,r)}var Be="not-loaded";async function dp(){return Be="not-loaded",pi()}async function pi(){var t;if(Be==="not-loaded"){if(Be="loading",(t=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))!=null?t:!1){Be="ready";return}if(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document){let e=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"],r=Array.from(document.fonts).map(s=>s.family);if(e.every(s=>r.includes(s))){Be="ready";return}if(!globalThis.MathfieldElement.fontsDirectory){Be="not-loaded";return}let n=await rs(globalThis.MathfieldElement.fontsDirectory);if(!n){document.body.classList.add("ML__fonts-did-not-load"),Be="error";return}n.endsWith("/")&&(n=n.slice(0,-1));let a=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular"],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(s=>eg(s[0].replace(/-[a-zA-Z]+$/,""),`${n}/${s[0]}`,s[1]));try{(await Promise.all(a.map(s=>{try{return s.load()}catch{}}))).forEach(s=>document.fonts.add(s)),Be="ready";return}catch(s){console.error(`MathLive 0.106.0: The math fonts could not be loaded from "${n}"`,{cause:s}),document.body.classList.add("ML__fonts-did-not-load")}Be="error"}}}function mp(t,e=0){let r=3735928559^e,n=1103547991^e;for(let a=0;a<t.length;a++){let s=t.charCodeAt(a);r=Math.imul(r^s,2654435761),n=Math.imul(n^s,1597334677)}return r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),4294967296*(2097151&n)+(r>>>0)}function U(t,e){!t||t.dirty||!t.field||(t.resizeObserver.unobserve(t.field),t.dirty=!0,requestAnimationFrame(()=>{rt(t)&&t.dirty&&(t.atomBoundsCache=new Map,bt(t,e),t.atomBoundsCache=void 0,t.resizeObserver.observe(t.field),t.resizeObserverStarted=!0)}))}function tg(t,e){var r;e=e??{};let n=new O({from:f(p({},t.context),{atomIdsSettings:{seed:e.forHighlighting?mp(b.serialize([t.model.root],{expandMacro:!1,defaultMode:t.options.defaultMode})):"random",groupNumbers:(r=e.forHighlighting)!=null?r:!1},letterShapeStyle:t.options.letterShapeStyle}),mathstyle:t.options.defaultMode==="inline-math"?"textstyle":"displaystyle"}),a=t.model.root.render(n);return Mr(It(a,n),{classes:t.hasEditablePrompts?"ML__latex ML__prompting":"ML__latex",attributes:{translate:"no","aria-hidden":"true"}})}function ec(t,e){try{let{model:r}=t;r.root.caret=void 0,r.root.isSelected=!1,r.root.containsCaret=!0;for(let n of r.atoms)n.caret=void 0,n.isSelected=!1,n.containsCaret=!1;if(r.selectionIsCollapsed){let n=r.at(r.position);n.caret=t.model.mode;let a=n.parent;for(;a;)a.containsCaret=!0,a=a.parent}else{let n=r.getAtoms(r.selection,{includeChildren:!0});for(let a of n)a.isSelected=!0}return tg(t,e).toMarkup()}catch(r){return console.error(r),'<span class="ML__latex" translate="no" aria-hidden="true">🚫</span>'}}function bt(t,e){if(!rt(t))return;e!=null||(e={});let r=t.element.querySelector("[part=virtual-keyboard-toggle]");r&&(r.style.display=t.hasEditableContent?"":"none");let n=t.field;if(!n)return;let a=t.isSelectionEditable&&t.hasFocus(),s=n.classList.contains("ML__focused");s&&!a?n.classList.remove("ML__focused"):!s&&a&&n.classList.add("ML__focused");let o=ec(t,e),c=t.element.querySelector("[part=menu-toggle]");if(c){let d=!1;(t.disabled||t.readOnly&&!t.hasEditableContent||t.userSelect==="none")&&(d=!0),!d&&n.offsetWidth<50&&(d=!0),c.style.display=d?"none":""}if(t.model.atoms.length<=1){let d=t.options.contentPlaceholder;d&&(o+=`<span part=placeholder class="ML__content-placeholder">${de(d)}</span>`)}n.innerHTML=globalThis.MathfieldElement.createHTML(o),ao(t,e.interactive),t.dirty=!1}function ao(t,e){let r=t.field;if(!r)return;for(let o of r.querySelectorAll(".ML__selection, .ML__contains-highlight"))o.remove();if(!(e!=null&&e)&&Be!=="error"&&Be!=="ready"){setTimeout(()=>{Be==="ready"?ao(t):setTimeout(()=>ao(t),128)},32);return}let n=t.model,a,s=()=>{if(a!==void 0)return a;let o=r.offsetWidth,c=r.getBoundingClientRect().width;return a=Math.floor(c)/o,isNaN(a)&&(a=1),a};if(n.selectionIsCollapsed){dn(t,{deferred:!0});let o=n.at(n.position);for(;o&&o.type!=="prompt"&&!(o.containsCaret&&o.displayContainsHighlight);)o=o.parent;if(o!=null&&o.containsCaret&&o.displayContainsHighlight){let c=s(),d=zl(t,Ar(t,o),c);if(d){d.left/=c,d.right/=c,d.top/=c,d.bottom/=c;let m=document.createElement("div");m.classList.add("ML__contains-highlight"),m.style.position="absolute",m.style.left=`${d.left+1}px`,m.style.top=`${Math.ceil(d.top)}px`,m.style.width=`${Math.ceil(d.right-d.left)}px`,m.style.height=`${Math.ceil(d.bottom-d.top)}px`,r.insertBefore(m,r.childNodes[0])}}return}for(let o of rg(Na(t,{excludeAtomsWithBackground:!0}))){let c=s();o.left/=c,o.right/=c,o.top/=c,o.bottom/=c;let d=document.createElement("div");d.classList.add("ML__selection"),d.style.position="absolute",d.style.left=`${o.left}px`,d.style.top=`${o.top}px`,d.style.width=`${Math.ceil(o.right-o.left)}px`,d.style.height=`${Math.ceil(o.bottom-o.top-1)}px`,r.insertBefore(d,r.childNodes[0])}}function rg(t){let e=[];for(let r of t){let n=!1;for(let a of e)if(r.left===a.left&&r.right===a.right&&r.top===a.top&&r.bottom===a.bottom){n=!0;break}n||e.push(r)}t=e,e=[];for(let r of t){let n=0;for(let a of t)if(r.left>=a.left&&r.right<=a.right&&r.top>=a.top&&r.bottom<=a.bottom&&(n+=1,n>1))break;n===1&&e.push(r)}return e}function tc(t){if(!t)return;let e=t.model,r=e.selection,n=b.serialize([e.root],{expandMacro:!1,defaultMode:t.options.defaultMode});V.insert(e,n,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",silenceNotifications:!0,mode:"math"});let a=e.silenceNotifications;e.silenceNotifications=!0,e.selection=r,e.silenceNotifications=a,U(t)}function rc(){for(let t of document.querySelectorAll(".ML__mathfield"))"_mathfield"in t&&tc(t._mathfield)}var ic=3,yt;function pe(t,e){e=p({target:"mathfield",canUndo:!1,audioFeedback:void 0,changeContent:!1,changeSelection:!1},e??{}),yt||(yt={});for(let r of Object.keys(t))yt[r],yt[r]=f(p({},e),{fn:t[r]})}function nc(t){let e;if(Array.isArray(t)){if(t[0]==="performWithFeedback")return nc(t[1]);e=t[0]}else e=t;return yt[e]}function nr(t){var e;return(e=nc(t))==null?void 0:e.target}function pp(t,e){var r,n;if(e=hi(e),!e)return!1;let a,s=[],o=!1,c=!1;Y(e)?(a=e[0],s=e.slice(1)):a=e;let d=yt[a],m=d?.target;if(m==="model"){if(!t.isSelectionEditable&&d!=null&&d.changeContent)return t.model.announce("plonk"),!1;/^(delete|add)/.test(a)&&(a!=="deleteBackward"&&t.flushInlineShortcutBuffer(),t.snapshot(a)),/^complete/.test(a)||di(t),yt[a].fn(t.model,...s),Rr(t),c=!0,o=!0}else if(m==="virtual-keyboard")c=(n=(r=window.mathVirtualKeyboard)==null?void 0:r.executeCommand(e))!=null?n:!1,o=!0;else if(yt[a]){if(!t.isSelectionEditable&&d!=null&&d.changeContent)return t.model.announce("plonk"),!1;/^(undo|redo)/.test(a)&&t.flushInlineShortcutBuffer(),c=yt[a].fn(t,...s),o=!0}else throw new Error(`Unknown command "${a}"`);return m!=="virtual-keyboard"&&(!t.model.selectionIsCollapsed||d!=null&&d.changeSelection&&a!=="deleteBackward")&&(t.flushInlineShortcutBuffer(),d!=null&&d.changeContent||t.stopCoalescingUndo(),t.defaultStyle={}),c&&U(t),o}function ig(t,e){var r;if(!t)return!1;t.focus(),mn.keypressVibration&&Ro()&&navigator.vibrate(ic);let n=nc(e);globalThis.MathfieldElement.playSound((r=n?.audioFeedback)!=null?r:"keypress");let a=t.executeCommand(e);return t.scrollIntoView(),a}pe({performWithFeedback:(t,e)=>ig(t,e)});function ng(t){return Rr(t,{atIndex:t.suggestionIndex+1}),!1}function og(t){return Rr(t,{atIndex:t.suggestionIndex-1}),!1}pe({complete:$t},{target:"mathfield",audioFeedback:"return",canUndo:!0,changeContent:!0,changeSelection:!0});pe({dispatchEvent:(t,e,r)=>{var n,a;return(a=(n=t.host)==null?void 0:n.dispatchEvent(new CustomEvent(e,{detail:r})))!=null?a:!1}},{target:"mathfield"});pe({nextSuggestion:ng,previousSuggestion:og},{target:"mathfield",audioFeedback:"keypress",changeSelection:!0});function hi(t){if(!t)return;if(Y(t)&&t.length>0){let r=t[0];return r=r.replace(/-\w/g,n=>n[1].toUpperCase()),r==="performWithFeedback"&&t.length===2?[r,hi(t[1])]:[r,...t.slice(1)]}if(typeof t!="string")return;let e=t.trim().match(/^([a-zA-Z0-9-]+)\((.*)\)$/);if(e){let r=e[1].replace(/-\w/g,a=>a[1].toUpperCase()),n=e[2].split(",").map(a=>a.trim());return[r,...n.map(a=>{if(/"[^"]*"/.test(a)||/'[^']*'/.test(a))return a.slice(1,-1);if(/^true$/.test(a))return!0;if(/^false$/.test(a))return!1;if(/^[-]?\d+$/.test(a))return parseInt(a,10);if(/^\{.*\}$/.test(a))try{return JSON.parse(a)}catch{return console.error("Invalid argument:",a),a}return hi(a)})]}return t.replace(/-\w/g,r=>r[1].toUpperCase())}var lo="mathlive#virtual-keyboard-message";function co(t){var e;return t.type!=="message"?!1:((e=t.data)==null?void 0:e.type)===lo}var so=class W9{constructor(){this.targetOrigin=window.origin,this.originValidator="none",this._boundingRect=new DOMRect(0,0,0,0),this._isShifted=!1,window.addEventListener("message",this),this.sendMessage("proxy-created"),this.listeners={}}static get singleton(){return this._singleton||(this._singleton=new W9),this._singleton}getKeycap(e){}setKeycap(e,r){this.sendMessage("update-setting",{setKeycap:{keycap:e,value:r}})}set alphabeticLayout(e){this.sendMessage("update-setting",{alphabeticLayout:e})}set layouts(e){this.sendMessage("update-setting",{layouts:e})}get normalizedLayouts(){return[]}set editToolbar(e){this.sendMessage("update-setting",{editToolbar:e})}set container(e){throw new Error("Container inside an iframe cannot be changed")}show(e){this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:!0},bubbles:!0,cancelable:!0,composed:!0}))&&(this.sendMessage("show",e),this.dispatchEvent(new Event("virtual-keyboard-toggle")))}hide(e){this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:!1},bubbles:!0,cancelable:!0,composed:!0}))&&(this.sendMessage("hide",e),this.dispatchEvent(new Event("virtual-keyboard-toggle")))}get isShifted(){return this._isShifted}get visible(){return this._boundingRect.height>0}set visible(e){e?this.show():this.hide()}get boundingRect(){return this._boundingRect}executeCommand(e){return this.sendMessage("execute-command",{command:e}),!0}updateToolbar(e){this.sendMessage("update-toolbar",e)}update(e){this.sendMessage("update-setting",e)}connect(){this.sendMessage("connect")}disconnect(){this.sendMessage("disconnect")}addEventListener(e,r,n){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(r)||this.listeners[e].add(r)}dispatchEvent(e){return!this.listeners[e.type]||this.listeners[e.type].size===0?!0:(this.listeners[e.type].forEach(r=>{typeof r=="function"?r(e):r?.handleEvent(e)}),!e.defaultPrevented)}removeEventListener(e,r,n){this.listeners[e]&&this.listeners[e].delete(r)}handleEvent(e){if(co(e)){if(!Gi(e.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${e.origin}) cannot be handled`,"SecurityError");this.handleMessage(e.data)}}handleMessage(e){let{action:r}=e;if(r==="execute-command"){let{command:n}=e;nr(n)==="virtual-keyboard"&&this.executeCommand(n);return}if(r==="synchronize-proxy"){this._boundingRect=e.boundingRect,this._isShifted=e.isShifted;return}if(r==="geometry-changed"){this._boundingRect=e.boundingRect,this.dispatchEvent(new Event("geometrychange"));return}}sendMessage(e,r={}){if(!window.top)throw new DOMException("A frame does not have access to the top window and can‘t communicate with the keyboard. Review virtualKeyboardTargetOrigin and originValidator on mathfields embedded in an iframe","SecurityError");window.top.postMessage(p({type:lo,action:e},r),this.targetOrigin)}},oc={numeric:{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",rows:[[{latex:"x",shift:"y",variants:["y","z","t","r","x^2","x^n","x^{#?}","x_n","x_i","x_{#?}",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"}]},{latex:"n",shift:"a",variants:["i","j","p","k","a","u"]},"[separator-5]","[7]","[8]","[9]","[/]","[separator-5]",{latex:"\\exponentialE",shift:"\\ln",variants:["\\exp","\\times 10^{#?}","\\ln","\\log_{10}","\\log","\\lg","\\operatorname{lb}"]},{latex:"\\imaginaryI",variants:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"]},{latex:"\\pi",shift:"\\sin",variants:["\\prod",{latex:"\\theta",aside:"theta"},{latex:"\\rho",aside:"rho"},{latex:"\\tau",aside:"tau"},"\\sin","\\cos","\\tan"]}],[{label:"<",latex:"<",class:"hide-shift",shift:{latex:"\\le",label:"≤"}},{label:">",latex:">",class:"hide-shift",shift:{latex:"\\ge",label:"≥"}},"[separator-5]","[4]","[5]","[6]","[*]","[separator-5]",{class:"hide-shift",latex:"#@^2}",shift:"#@^{\\prime}}"},{latex:"#@^{#0}}",class:"hide-shift",shift:"#@_{#?}"},{class:"hide-shift",latex:"\\sqrt{#0}",shift:{latex:"\\sqrt[#0]{#?}}"}}],["[(]","[)]","[separator-5]","[1]","[2]","[3]","[-]","[separator-5]",{latex:"\\int^{\\infty}_{0}\\!#?\\,\\mathrm{d}x",class:"small hide-shift",shift:"\\int",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{class:"hide-shift",latex:"\\forall",shift:"\\exists"},{label:"[backspace]",width:1}],[{label:"[shift]",width:2},"[separator-5]","[0]","[.]","[=]","[+]","[separator-5]","[left]","[right]",{label:"[action]",width:1}]]},greek:{label:"&alpha;&beta;&gamma;",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.greek",rows:[[{label:"<i>&#x03c6;</i>",class:"MLK__tex hide-shift",insert:"\\varphi",aside:"phi var.",shift:"\\Phi"},{label:"<i>&#x03c2;</i>",class:"MLK__tex hide-shift",insert:"\\varsigma",aside:"sigma var.",shift:"\\Sigma"},{label:"<i>&#x03f5;</i>",class:"MLK__tex hide-shift",insert:"\\epsilon",aside:"epsilon",shift:'\\char"0190'},{label:"<i>&rho;</i>",class:"MLK__tex hide-shift",insert:"\\rho",aside:"rho",shift:'\\char"3A1'},{label:"<i>&tau;</i>",class:"MLK__tex hide-shift",insert:"\\tau",aside:"tau",shift:'\\char"3A4'},{label:"<i>&upsilon;</i>",class:"MLK__tex hide-shift",insert:"\\upsilon",aside:"upsilon",shift:"\\Upsilon"},{label:"<i>&theta;</i>",class:"MLK__tex hide-shift",insert:"\\theta",aside:"theta",shift:"\\Theta"},{label:"<i>&iota;</i>",class:"MLK__tex hide-shift",insert:"\\iota",aside:"iota",shift:'\\char"399'},{label:"<i>&omicron;</i>",class:"MLK__tex hide-shift",insert:"\\omicron",aside:"omicron",shift:'\\char"39F'},{label:"<i>&pi;</i>",class:"MLK__tex hide-shift",insert:"\\pi",aside:"pi",shift:"\\Pi"}],["[separator-5]",{label:"<i>&alpha;</i>",class:"MLK__tex hide-shift",insert:"\\alpha",aside:"alpha",shift:'\\char"391'},{label:"<i>&sigma;</i>",class:"MLK__tex hide-shift",insert:"\\sigma",aside:"sigma",shift:"\\Sigma"},{label:"<i>&delta;</i>",class:"MLK__tex hide-shift",insert:"\\delta",aside:"delta",shift:"\\Delta"},{latex:"\\phi",class:"MLK__tex hide-shift",insert:"\\phi",aside:"phi",shift:"\\Phi"},{label:"<i>&gamma;</i>",class:"MLK__tex hide-shift",insert:"\\gamma",aside:"gamma",shift:"\\Gamma"},{label:"<i>&eta;</i>",class:"MLK__tex hide-shift",insert:"\\eta",aside:"eta",shift:'\\char"397'},{label:"<i>&xi;</i>",class:"MLK__tex hide-shift",insert:"\\xi",aside:"xi",shift:"\\Xi"},{label:"<i>&kappa;</i>",class:"MLK__tex hide-shift",insert:"\\kappa",aside:"kappa",shift:"\\Kappa"},{label:"<i>&lambda;</i>",class:"MLK__tex hide-shift",insert:"\\lambda",aside:"lambda",shift:"\\Lambda"},"[separator-5]"],["[shift]",{label:"<i>&zeta;</i>",class:"MLK__tex hide-shift",insert:"\\zeta",aside:"zeta",shift:'\\char"396'},{label:"<i>&chi;</i>",class:"MLK__tex hide-shift",insert:"\\chi",aside:"chi",shift:'\\char"3A7'},{label:"<i>&psi;</i>",class:"MLK__tex hide-shift",insert:"\\psi",aside:"psi",shift:"\\Psi"},{label:"<i>&omega;</i>",class:"MLK__tex hide-shift",insert:"\\omega",aside:"omega",shift:"\\Omega"},{label:"<i>&beta;</i>",class:"MLK__tex hide-shift",insert:"\\beta",aside:"beta",shift:'\\char"392'},{label:"<i>&nu;</i>",class:"MLK__tex hide-shift",insert:"\\nu",aside:"nu",shift:'\\char"39D'},{label:"<i>&mu;</i>",class:"MLK__tex hide-shift",insert:"\\mu",aside:"mu",shift:'\\char"39C'},"[backspace]"],["[separator]",{label:"<i>&#x03b5;</i>",class:"MLK__tex",insert:"\\varepsilon",aside:"epsilon var."},{label:"<i>&#x03d1;</i>",class:"MLK__tex",insert:"\\vartheta",aside:"theta var."},{label:"<i>&#x3f0;</i>",class:"MLK__tex",insert:"\\varkappa",aside:"kappa var."},{label:"<i>&#x03d6;</i>",class:"MLK__tex",insert:"\\varpi",aside:"pi var."},{label:"<i>&#x03f1;</i>",class:"MLK__tex",insert:"\\varrho",aside:"rho var."},"[left]","[right]","[action]"]]},symbols:{label:"&infin;≠∈",labelClass:"MLK__tex",tooltip:"keyboard.tooltip.symbols",rows:[[{latex:"\\sin",shift:"\\sin^{-1}",variants:[{class:"small",latex:"\\sinh"},{class:"small",latex:"\\sin^{-1}"},{class:"small",latex:"\\operatorname{arsinh}"}]},"\\ln",{latex:"\\mathrm{abs}",insert:"\\mathrm{abs}\\left(#0\\right)"},{latex:"\\rightarrow",shift:"\\Rightarrow",variants:[{latex:"\\implies",aside:"implies"},{latex:"\\to",aside:"to"},"\\dashv",{latex:"\\roundimplies",aside:"round implies"}]},{latex:"\\exists",variants:["\\nexists"],shift:"\\nexists"},{latex:"\\in",shift:"\\notin",variants:["\\notin","\\owns"]},"\\cup",{latex:"\\overrightarrow{#@}",shift:"\\overleftarrow{#@}",variants:["\\overleftarrow{#@}","\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"]},{class:"small hide-shift",latex:"\\lim_{#?}",shift:"\\lim_{x\\to\\infty}",variants:[{class:"small",latex:"\\liminf_{#?}"},{class:"small",latex:"\\limsup_{#?}"}]},"\\exponentialE"],[{latex:"\\cos",shift:"\\cos^{-1}",variants:[{class:"small",latex:"\\cosh"},{class:"small",latex:"\\cos^{-1}"},{class:"small",latex:"\\operatorname{arcosh}"}]},{latex:"\\log",shift:"\\log_{10}",variants:["\\log_{#0}","\\log_{10}"]},"\\left\\vert#0\\right\\vert",{latex:"\\larr",shift:"\\lArr",variants:[{latex:"\\impliedby",aside:"implied by"},{latex:"\\gets",aside:"gets"},"\\lArr","\\vdash",{latex:"\\models",aside:"models"}]},{latex:"\\forall",shift:"\\lnot",variants:[{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"}]},{latex:"\\ni",shift:"\\not\\owns"},"\\cap",{latex:"\\overline{#@}",shift:"\\underline{#@}",variants:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}","\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"]},{class:"hide-shift small",latex:"\\int",shift:"\\iint",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\intop","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"]},{latex:"\\pi",shift:"\\tau",variants:["\\tau"]}],[{latex:"\\tan",shift:"\\tan^{-1}",variants:[{class:"small",latex:"\\tanh"},{class:"small",latex:"\\tan^{-1}"},{class:"small",latex:"\\operatorname{artanh}"},{class:"small",latex:"\\arctan"},{class:"small",latex:"\\operatorname{arctg}"},{class:"small",latex:"\\operatorname{tg}"}]},{latex:"\\exp",insert:"\\exp\\left(#0\\right)",variants:["\\exponentialE^{#0}"]},"\\left\\Vert#0\\right\\Vert",{latex:"\\lrArr",shift:"\\leftrightarrow",variants:[{latex:"\\iff",aside:"if and only if"},"\\leftrightarrow","\\leftrightarrows","\\Leftrightarrow",{latex:"^\\biconditional",aside:"biconditional"}]},{latex:"\\vert",shift:"!"},{latex:"#@^{\\complement}",aside:"complement",variants:[{latex:"\\setminus",aside:"set minus"},{latex:"\\smallsetminus",aside:"small set minus"}]},{latex:"\\subset",shift:"\\subseteq",variants:["\\subset","\\subseteq","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsubseteq","\\supset","\\supseteq","\\supsetneq","\\supsetneqq","\\nsupset","\\nsupseteq"]},{latex:"#@^{\\prime}",shift:"#@^{\\doubleprime}",variants:["#@^{\\doubleprime}","#@\\degree"]},{latex:"\\mathrm{d}",shift:"\\partial",variants:["\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{latex:"\\infty",variants:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"]}],[{label:"[shift]",width:2},{class:"box",latex:",",shift:";",variants:[";","?"]},{class:"box",latex:"\\colon",shift:"\\Colon",variants:[{latex:"\\Colon",aside:"such that",class:"box"},{latex:":",aside:"ratio",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\therefore",aside:"therefore",class:"box"},{latex:"\\because",aside:"because",class:"box"}]},{class:"box",latex:"\\cdot",aside:"centered dot",shift:"\\ast",variants:["\\circ","\\bigcirc","\\bullet","\\odot","\\oslash","\\circledcirc","\\ast","\\star","\\times","\\doteq","\\doteqdot"]},"[separator]","[left]","[right]",{label:"[backspace]",width:1,class:"action hide-shift"},{label:"[action]",width:1}]]},compact:{label:"compact",rows:[["[+]","[-]","[*]","[/]","[=]","[.]","[(]","[)]","\\sqrt{#0}","#@^{#?}"],["[1]","[2]","[3]","[4]","[5]","[6]","[7]","[8]","[9]","[0]"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]},minimalist:{label:"minimalist",layers:[{style:`
          div.minimalist-backdrop {
            display: flex;
            justify-content: center;
          }          
          div.minimalist-container {
            --keycap-height: 40px;
            --keycap-max-width: 53px;
            --keycap-small-font-size: 12px;
            background: var(--keyboard-background);
            padding: 20px 20px 0px 20px;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            border: 1px solid var(--keyboard-border);
            box-shadow: 0 0 32px rgb(0 0 0 / 30%);
          }        
        `,backdrop:"minimalist-backdrop",container:"minimalist-container",rows:[["+","-","\\times",{latex:"\\frac{#@}{#0}",class:"small"},"=","[.]","(",")",{latex:"\\sqrt{#0}",class:"small"},{latex:"#@^{#?}",class:"small"}],["1","2","3","4","5","6","7","8","9","0"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]}]},"numeric-only":{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",id:"numeric-only",rows:[["7","8","9","[separator]",{label:"[backspace]",width:2}],["4","5","6","[separator]","[separator]","[separator]"],["1","2","3","[separator]","[separator]","[separator]"],["0",{label:"[.]",variants:[]},"-","[separator]","[left]","[right]"]]}},is={0:["\\varnothing","\\infty"],1:["\\frac{1}{#@}","#@^{-1}","\\times 10^{#?}","\\phi","\\imaginaryI"],2:["\\frac{1}{2}","#@^2","\\sqrt2","\\exponentialE"],3:["\\frac{1}{3}","#@^3","\\sqrt3","\\pi"],4:["\\frac{1}{4}","#@^4"],5:["\\frac{1}{5}","#@^5","\\sqrt5"],6:["\\frac{1}{6}","#@^6"],7:["\\frac{1}{7}","#@^7"],8:["\\frac{1}{8}","#@^8"],9:["\\frac{1}{9}","#@^9"],".":[".",",",";","\\colon"],",":["{,}",".",";","\\colon"],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"å","à","á","â","ä","æ"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"Å","À","Á","Â","Ä","Æ"],b:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"},"ç"],d:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"},"è","é","ê","ë"],E:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"},"È","É","Ê","Ë"],g:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"},"ì","í","î","ï"],I:[{latex:"\\imaginaryI",aside:"imaginary i"},"Ì","Í","Î","Ï"],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"},"ñ"],o:["ø","œ","ò","ó","ô","ö"],O:["ø","Œ","Ò","Ó","Ô","Ö"],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],u:["ù","ú","û","ü"],U:["Ù","Ú","Û","Ü"],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],y:["ý","ÿ"],Y:["Ÿ"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>⁻³⧸₁₈ em"},{latex:'\\char"203A\\,\\char"2039',insert:"\\,",aside:"thin space<br>³⧸₁₈ em"},{latex:'\\char"203A\\:\\char"2039',insert:"\\:",aside:"medium space<br>⁴⧸₁₈ em"},{latex:'\\char"203A\\;\\char"2039',insert:"\\;",aside:"thick space<br>⁵⧸₁₈ em"},{latex:'\\char"203A\\ \\char"2039',insert:"\\ ",aside:"⅓ em"},{latex:'\\char"203A\\enspace\\char"2039',insert:"\\enspace",aside:"½ em"},{latex:'\\char"203A\\quad\\char"2039',insert:"\\quad",aside:"1 em"},{latex:'\\char"203A\\qquad\\char"2039',insert:"\\qquad",aside:"2 em"}]},pn;function ns(t,e){var r,n,a,s,o;let c=Ee.singleton;if(!c)return;let d=fi(t),m="";if(window.mathVirtualKeyboard.isShifted){let ve=(r=c.getKeycap(d?.id))==null?void 0:r.shift;typeof ve=="object"&&"variants"in ve&&(m=(n=ve.variants)!=null?n:"")}else m=(s=(a=c.getKeycap(d?.id))==null?void 0:a.variants)!=null?s:"";if(typeof m=="string"&&!os(m)||Array.isArray(m)&&m.length===0){e?.();return}let y={},A="";for(let ve of sg(m)){let He=uo(ve),De=Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);y[De]=He;let[Xe,Bs]=hn(He);A+=`<div id=${De} class="item ${Bs}">${Xe}</div>`}let P=document.createElement("div");P.setAttribute("aria-hidden","true"),P.className="MLK__variant-panel",P.style.height="auto";let Z=Object.keys(y).length,me=5;Z===1?me=1:Z===2||Z===4?me=2:Z===3||Z===5||Z===6?me=3:Z>=7&&Z<14&&(me=4),P.style.width=`calc(var(--variant-keycap-length) * ${me} + 12px)`,P.innerHTML=mn.createHTML(A),Ae.open({root:(o=c?.container)==null?void 0:o.querySelector(".ML__keyboard"),child:P}),pn=new AbortController;let{signal:_e}=pn,Ge=t?.getBoundingClientRect();if(Ge){Ge.top-P.clientHeight<0&&(P.style.width="auto",Z<=6?P.style.height="56px":Z<=12?P.style.height="108px":Z<=18?P.style.height="205px":P.classList.add("compact"));let ve=Math.max(0,Math.min(window.innerWidth-P.offsetWidth,(Ge.left+Ge.right-P.offsetWidth)/2)),He=Ge.top-P.clientHeight+5;P.style.left=`${ve}px`,P.style.top=`${He}px`,P.classList.add("is-visible"),requestAnimationFrame(()=>{var De;P.addEventListener("pointerup",Xe=>{let Bs=fi(Xe.target);!(Bs!=null&&Bs.id)||!y[Bs.id]||(as(y[Bs.id]),zr(),e?.(),Xe.preventDefault())},{capture:!0,passive:!1,signal:_e}),P.addEventListener("pointerenter",Xe=>{let Bs=fi(Xe.target);!(Bs!=null&&Bs.id)||!y[Bs.id]||Bs.classList.add("is-active")},{capture:!0,signal:_e}),P.addEventListener("pointerleave",Xe=>{let Bs=fi(Xe.target);Xe.target&&"tagName"in Xe.target&&typeof Xe.target.tagName=="string"&&Xe.target.tagName.toUpperCase()==="ASIDE"||!(Bs!=null&&Bs.id)||!y[Bs.id]||Bs.classList.remove("is-active")},{capture:!0,signal:_e}),(De=c.getKeycap(d?.id))!=null&&De.stickyVariantPanel?window.addEventListener("pointerdown",Xe=>{if(!(Xe.target instanceof Node))return;let Bs=P.contains(Xe.target);Xe.target===P||Bs||(zr(),e?.())},{signal:_e}):(window.addEventListener("pointercancel",()=>{zr(),e?.()},{signal:_e}),window.addEventListener("pointerup",()=>{zr(),e?.()},{signal:_e}))})}}function zr(){pn?.abort(),pn=null,Ae.state==="open"&&Ae.close()}function ag(t){if(t==="foreground-color"){let e=[];for(let r of Object.keys(jt))e.push({class:"swatch-button",label:'<span style="border: 3px solid '+jt[r]+'"></span>',command:["applyStyle",{color:r}]});return e}if(t==="background-color"){let e=[];for(let r of Object.keys(Ut))e.push({class:"swatch-button",label:'<span style="background:'+Ut[r]+'"></span>',command:["applyStyle",{backgroundColor:r}]});return e}}function os(t){return is[t]!==void 0}function sg(t){var e;return typeof t!="string"?t:(is[t]||(is[t]=(e=ag(t))!=null?e:[]),is[t])}function lg(t){return typeof t=="string"?t:Object.entries(t).map(([e,r])=>`${e}:${r} !important`).join(";")}function cg(t){return Object.keys(t).map(e=>`${e} {${lg(t[e])}}`).join("")}function mo(t){if(!t)return"";let e=new O,r=new b({mode:"math",type:"root",body:he(t,{context:e,args:a=>a==="@"?"{\\class{ML__box-placeholder}{\\blacksquare}}":"\\placeholder{}"})}),n=_r(It(new _(r.render(e),{classes:"ML__base"}),e));return Mr(n,{classes:"ML__latex"}).toMarkup()}function po(t){if(Array.isArray(t))return t.map(r=>po(r)).flat();let e=typeof t=="string"?{markup:t}:t;return"rows"in e&&Array.isArray(e.rows)&&(e.rows=e.rows.map(r=>r.map(n=>uo(n)))),e.id!=null||(e.id="ML__layer_"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36)),[e]}function ug(){var t,e;let r=window.mathVirtualKeyboard.alphabeticLayout;if(r==="auto"){let o=Dr();o&&(r=o.virtualLayout),(!r||r==="auto")&&(r=(t={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[N.locale.slice(0,2)])!=null?t:"qwerty")}let n={qwerty:["qwertyuiop"," asdfghjkl ","^zxcvbnm~"],azerty:["azertyuiop","qsdfghjklm","^ wxcvbn ~"],qwertz:["qwertzuiop"," asdfghjkl ","^yxcvbnm~"],dvorak:["^  pyfgcrl ","aoeuidhtns","qjkxbmwvz~"],colemak:[" qwfpgjluy ","arstdhneio","^zxcvbkm~"]},a=(e=n[r])!=null?e:n.qwerty,s=r==="azerty"?[[{label:"1",variants:"1"},{label:"2",shift:{latex:"é"},variants:"2"},{label:"3",shift:{latex:"ù"},variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{label:"(",latex:"("},variants:"5"},{label:"6",shift:{label:")",latex:")"},variants:"6"},{label:"7",shift:{latex:"è"},variants:"7"},{label:"8",shift:{latex:"ê"},variants:"8"},{label:"9",shift:{latex:"ç"},variants:"9"},{label:"0",shift:{latex:"à"},variants:"0"}]]:[[{label:"1",variants:"1"},{label:"2",variants:"2"},{label:"3",variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{latex:"\\frac{#@}{#?}"},variants:"5"},{label:"6",shift:{latex:"#@^#?"},variants:"6"},{label:"7",variants:"7"},{label:"8",shift:{latex:"\\times"},variants:"8"},{label:"9",shift:{label:"(",latex:"("},variants:"9"},{label:"0",shift:{label:")",latex:")"},variants:"0"}]];for(let o of a){let c=[];for(let d of o)/[a-z]/.test(d)?c.push({label:d,class:"hide-shift",shift:{label:d.toUpperCase(),variants:os(d.toUpperCase())?d.toUpperCase():void 0},variants:os(d)?d:void 0}):d==="~"?r!=="dvorak"?c.push("[backspace]"):c.push({label:"[backspace]",width:1}):d==="^"?c.push("[shift]"):d===" "&&c.push("[separator-5]");s.push(c)}return s.push(["[-]","[+]","[=]",{label:" ",width:1.5},{label:",",shift:";",variants:".",class:"hide-shift"},"[.]","[left]","[right]",{label:"[action]",width:1.5}]),{label:"abc",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.alphabetic",layers:po({rows:s})}}function ac(t){if(t==="alphabetic")return ug();if(typeof t=="string")return ac(oc[t]);let e;if("rows"in t&&Array.isArray(t.rows)){let a=t,{rows:s}=a,o=ki(a,["rows"]);e=f(p({},o),{layers:po({rows:t.rows})})}else if("markup"in t&&typeof t.markup=="string"){let a=t,{markup:s}=a,o=ki(a,["markup"]);e=f(p({},o),{layers:po(t.markup)})}else e=p({},t),"layers"in t?e.layers=po(t.layers):console.error('MathLive 0.106.0: provide either a "rows", "markup" or "layers" property');let r=!1,n=!1;for(let a of e.layers)if(a.rows)for(let s of a.rows.flat()){fn(s)&&(r=!0);let o=s.command;typeof o=="string"&&["undo","redo","cut","copy","paste"].includes(o)&&(n=!0)}return(!("displayShiftedKeycaps"in t)||t.displayShiftedKeycaps===void 0)&&(e.displayShiftedKeycaps=r),(!("displayEditToolbar"in t)||t.displayEditToolbar===void 0)&&(e.displayEditToolbar=!n),e}function dg(t,e){var r,n;let a='<div class="left">';if(t.normalizedLayouts.length>1)for(let[s,o]of t.normalizedLayouts.entries()){let c=o,d=[s===e?"selected":"layer-switch"];c.tooltip&&d.push("MLK__tooltip"),c.labelClass&&d.push(...c.labelClass.split(" ")),a+=`<div class="${d.join(" ")}"`,c.tooltip&&(a+=" data-tooltip='"+((r=z(c.tooltip))!=null?r:c.tooltip)+"' "),s!==e&&(a+=`data-layer="${c.layers[0].id}"`),a+=`>${(n=c.label)!=null?n:"untitled"}</div>`}return a+="</div>",a}function hp(t,e){let r="";if(t.editToolbar==="none")return"";let n=[];e.selectionIsCollapsed?n.push("undo","redo","pasteFromClipboard"):n.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let a={undo:`<div class='action ${e.canUndo===!1?"disabled":""}'
          data-command='"undo"'
          data-tooltip='${z("tooltip.undo")}'>
          <svg><use xlink:href='#svg-undo' /></svg>
      </div>`,redo:`<div class='action ${e.canRedo===!1?"disabled":""}'
          data-command='"redo"'
          data-tooltip='${z("tooltip.redo")}'>
          <svg><use xlink:href='#svg-redo' /></svg>
      </div>`,cutToClipboard:`
        <div class='action'
            data-command='"cutToClipboard"'
            data-tooltip='${z("tooltip.cut to clipboard")}'>
            <svg><use xlink:href='#svg-cut' /></svg>
        </div>
    `,copyToClipboard:`
        <div class='action'
            data-command='"copyToClipboard"'
            data-tooltip='${z("tooltip.copy to clipboard")}'>
            <svg><use xlink:href='#svg-copy' /></svg>
        </div>
    `,pasteFromClipboard:`
        <div class='action'
            data-command='"pasteFromClipboard"'
            data-tooltip='${z("tooltip.paste from clipboard")}'>
            <svg><use xlink:href='#svg-paste' /></svg>
        </div>
    `};return r+=n.map(s=>a[s]).join(""),r}function mg(t){for(let e of t)pg(e)}function pg(t){let e=Ee.singleton;if(!e)return;let r={};if(!t.id){if(t.hasAttribute("data-label")&&(r.label=t.dataset.label),t.hasAttribute("data-latex")&&(r.latex=t.dataset.latex),t.hasAttribute("data-key")&&(r.key=t.dataset.key),t.hasAttribute("data-insert")&&(r.insert=t.dataset.insert),t.hasAttribute("data-variants")&&(r.variants=t.dataset.variants),t.hasAttribute("data-aside")&&(r.aside=t.dataset.aside),t.className&&(r.class=t.className),!r.label&&!r.latex&&!r.key&&!r.insert&&(r.latex=t.innerText,r.label=t.innerHTML),t.hasAttribute("data-command"))try{r.command=JSON.parse(t.dataset.command)}catch{}t.id=e.registerKeycap(r)}if(!t.innerHTML){let[n,a]=hn(r);t.innerHTML=globalThis.MathfieldElement.createHTML(n)}}function hg(){Ve("virtual-keyboard"),Ve("core"),pi()}function fp(){it("core"),it("virtual-keyboard")}var fg=`<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

<symbol id="svg-delete-backward" viewBox="0 0 576 512">
  <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>
</symbol>

<symbol id="svg-shift" viewBox="0 0 384 512">
  <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>
</symbol>

<symbol id="svg-commit" viewBox="0 0 512 512">
  <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>
</symbol>


<symbol id="circle-plus" viewBox="0 0 512 512"><path d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344c0 13.3 10.7 24 24 24s24-10.7 24-24V280h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H280V168c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H168c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"/></symbol>

<symbol id="svg-command" viewBox="0 0 640 512">
  <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>
</symbol>

<symbol id="svg-undo" viewBox="0 0 512 512">
  <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>
</symbol>
<symbol id="svg-redo" viewBox="0 0 512 512">
  <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>
</symbol>
<symbol id="svg-arrow-left" viewBox="0 0 320 512">
  <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>
</symbol>
<symbol id="svg-arrow-right" viewBox="0 0 320 512">
  <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>
</symbol>
<symbol id="svg-tab" viewBox="0 0 448 512">
  <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>
</symbol>
<symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>
<symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>
<symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>
</symbol>
<symbol id="svg-angle-double-right" viewBox="0 0 512 512"><path d="M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/>
</symbol>
<symbol id="svg-angle-double-left" viewBox="0 0 512 512"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/>
</symbol>
<symbol id="svg-trash" viewBox="0 0 448 512">
  <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>
</symbol>
<symbol id="svg-keyboard-down" viewBox="0 0 576 512"><path d="M64 48c-8.8 0-16 7.2-16 16V240c0 8.8 7.2 16 16 16H512c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64zM0 64C0 28.7 28.7 0 64 0H512c35.3 0 64 28.7 64 64V240c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM159 359c9.4-9.4 24.6-9.4 33.9 0l95 95 95-95c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L305 505c-4.5 4.5-10.6 7-17 7s-12.5-2.5-17-7L159 393c-9.4-9.4-9.4-24.6 0-33.9zm1-167c0-8.8 7.2-16 16-16H400c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V192zM120 88h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H120c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H200c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H280c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H360c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H440c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16z"/></symbol>
</svg>`;function gp(t){t.resetKeycapRegistry(),hg();let e=document.createElement("div");e.className="ML__keyboard";let r=document.createElement("div");r.className="MLK__plate",r.innerHTML=globalThis.MathfieldElement.createHTML(fg+t.normalizedLayouts.map((o,c)=>gg(t,o,c)).join(""));let n=document.createElement("div");n.className="MLK__backdrop",n.appendChild(r),e.appendChild(n),e.addEventListener("pointerdown",yg,{passive:!1});let a=e.querySelectorAll(".ML__edit-toolbar");if(a)for(let o of a)o.addEventListener("click",c=>{var d,m;let y=c.target,A="";for(;y&&!A;)A=(d=y?.getAttribute("data-command"))!=null?d:"",y=(m=y?.parentElement)!=null?m:null;A&&t.executeCommand(JSON.parse(A))});mg(e.querySelectorAll(".MLK__keycap, .action, .fnbutton, .bigfnbutton"));let s=e.querySelectorAll(".MLK__layer");s.length>0;for(let o of s)o.addEventListener("pointerdown",c=>c.preventDefault());return t.currentLayer=t.latentLayer,e}function gg(t,e,r){var n;let a=[];if(!("layers"in e))return"";for(let s of e.layers)a.push(`<div tabindex="-1" class="MLK__layer" id="${s.id}">`),(t.normalizedLayouts.length>1||e.displayEditToolbar)&&(a.push("<div class='MLK__toolbar' role='toolbar'>"),a.push(dg(t,r)),((n=e.displayEditToolbar)==null||n)&&a.push('<div class="ML__edit-toolbar right"></div>'),a.push("</div>")),a.push(bg(t,s)),a.push("</div>");return a.join("")}function bg(t,e){if(typeof e=="string")return e;let r="";if(typeof e.style=="string"?r+=`<style>${e.style}</style>`:typeof e.style=="object"&&(r+=`<style>${cg(e.style)}</style>`),e.backdrop&&(r+=`<div class='${e.backdrop}'>`),e.container&&(r+=`<div class='${e.container}'>`),e.rows){r+="<div class=MLK__rows>";for(let n of e.rows){r+='<div dir="ltr" class=MLK__row>';for(let a of n)if(a){let s=t.registerKeycap(a),[o,c]=hn(a);/(^|\s)separator/.test(c)?r+=`<div class="${c}"`:r+=`<div tabindex="-1" id="${s}" class="${c}"`,a.tooltip&&(r+=` data-tooltip="${a.tooltip}"`),r+=`>${o}</div>`}r+="</div>"}r+="</div>"}else e.markup&&(r+=e.markup);return e.container&&(r+="</div>"),e.backdrop&&(r+="</div>"),r}function hn(t,e={shifted:!1}){var r,n,a,s,o,c,d;let m="",y=(r=t.class)!=null?r:"";if(e.shifted&&fn(t)&&(y+=" is-active"),e.shifted&&"shift"in t)typeof t.shift=="string"?m=mo(t.shift):typeof t.shift=="object"&&(m=t.shift.label?t.shift.label:(n=mo(t.shift.latex||t.shift.insert||"")||t.shift.key)!=null?n:""),typeof t.shift=="object"&&(y=(s=(a=t.shift.class)!=null?a:t.class)!=null?s:"");else{if(m=t.label?t.label:(o=mo(t.latex||t.insert||"")||t.key)!=null?o:"",t.shift){let A;typeof t.shift=="string"?A=mo(t.shift):t.shift.label?A=t.shift.label:A=(c=mo(t.shift.latex||t.shift.insert||"")||t.shift.key)!=null?c:"",m+=`<span class="MLK__shift">${A}</span>`}t.aside&&(m+=`<aside>${t.aside}</aside>`)}return t.layer&&!/layer-switch/.test(y)&&(y+=" layer-switch"),/(^|\s)(separator|action|shift|fnbutton|bigfnbutton)($|\s)/.test(y)||(y+=" MLK__keycap"),!/\bw[0-9]+\b/.test(y)&&t.width&&(y+=(d={0:" w0",.5:" w5",1.5:" w15",2:" w20",5:" w50"}[t.width])!=null?d:""),[m,y||"MLK__keycap"]}var Ft={"[left]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-left /></svg>",command:"performWithFeedback(moveToPreviousChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-left /></svg>",command:"performWithFeedback(extendSelectionBackward)"}},"[right]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-right /></svg>",command:"performWithFeedback(moveToNextChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-right /></svg>",command:"performWithFeedback(extendSelectionForward)"}},"[up]":{class:"action hide-shift",label:"↑",command:"performWithFeedback(moveUp)",shift:{label:"↟",command:"performWithFeedback(extendSelectionUpward)"}},"[down]":{class:"action hide-shift",label:"↓",command:"performWithFeedback(moveDown)",shift:{label:"↡",command:"performWithFeedback(extendSelectionDownward)"}},"[return]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[action]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{label:"<svg class=svg-glyph><use xlink:href=#circle-plus /></svg>",command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[hr]":{class:"separator horizontal-rule"},"[hide-keyboard]":{class:"action",command:["hideVirtualKeyboard"],width:1.5,label:"<svg class=svg-glyph-lg><use xlink:href=#svg-keyboard-down /></svg>"},"[.]":{variants:".",command:"performWithFeedback(insertDecimalSeparator)",shift:",",class:"big-op hide-shift",label:"."},"[,]":{variants:",",command:"performWithFeedback(insertDecimalSeparator)",shift:".",class:"big-op hide-shift",label:","},"[+]":{variants:[{latex:"\\sum_{#0}^{#0}",class:"small"},"\\oplus"],latex:"+",label:"+",class:"big-op hide-shift",shift:{latex:"\\sum",insert:"\\sum",class:"small"}},"[-]":{variants:["\\pm","\\ominus"],latex:"-",label:"&#x2212;",shift:"\\pm",class:"big-op hide-shift"},"[/]":{class:"big-op hide-shift",shift:{class:"",latex:"\\frac{1}{#@}"},variants:["/","\\div","\\%","\\oslash"],latex:"\\frac{#@}{#?}",label:"&divide;"},"[*]":{variants:[{latex:"\\prod_{#0}^{#0}",class:"small"},"\\otimes","\\cdot"],latex:"\\cdot",label:"&times;",shift:{latex:"\\times"},class:"big-op hide-shift"},"[=]":{variants:["\\neq","\\equiv","\\varpropto","\\thickapprox","\\lt","\\gt","\\le","\\ge"],latex:"=",label:"=",shift:{label:"≠",latex:"\\ne"},class:"big-op hide-shift"},"[backspace]":{class:"action bottom right hide-shift",width:1.5,command:"performWithFeedback(deleteBackward)",label:"<svg class=svg-glyph><use xlink:href=#svg-delete-backward /></svg>",shift:{class:"action warning",label:"<svg class=svg-glyph><use xlink:href=#svg-trash /></svg>",command:"deleteAll"}},"[undo]":{class:"ghost if-can-undo",command:"undo",label:"<svg class=svg-glyph><use xlink:href=#svg-undo /></svg>",tooltip:"tooltip.undo"},"[redo]":{class:"ghost  if-can-redo",command:"redo",label:"<svg class=svg-glyph><use xlink:href=#svg-redo /></svg>",tooltip:"tooltip.redo"},"[(]":{variants:[{latex:"\\lbrack",key:"["},"\\langle","\\lfloor","\\lceil",{latex:"\\lbrace",key:"{"}],key:"(",label:"(",shift:{label:"[",key:"["},class:"hide-shift"},"[)]":{variants:[{latex:"\\rbrack",key:"]"},"\\rangle","\\rfloor","\\rceil",{latex:"\\rbrace",key:"}"}],key:")",label:")",shift:{label:"]",latex:"\\rbrack"},class:"hide-shift"},"[0]":{variants:"0",latex:"0",label:"0",shift:"\\infty",class:"hide-shift"},"[1]":{variants:"1",latex:"1",label:"1",shift:"#@^{-1}",class:"hide-shift"},"[2]":{variants:"2",latex:"2",label:"2",shift:"#@^2",class:"hide-shift"},"[3]":{variants:"3",latex:"3",label:"3",shift:"#@^3",class:"hide-shift"},"[4]":{variants:"4",latex:"4",label:"4",shift:"#@^4",class:"hide-shift"},"[5]":{variants:"5",latex:"5",label:"5",shift:"#@^5",class:"hide-shift"},"[6]":{variants:"6",latex:"6",label:"6",shift:"#@^6",class:"hide-shift"},"[7]":{variants:"7",latex:"7",label:"7",shift:"#@^7",class:"hide-shift"},"[8]":{variants:"8",latex:"8",label:"8",shift:"#@^8",class:"hide-shift"},"[9]":{variants:"9",latex:"9",label:"9",shift:"#@^9",class:"hide-shift"},"[separator-5]":{class:"separator",width:.5},"[separator]":{class:"separator"},"[separator-10]":{class:"separator"},"[separator-15]":{class:"separator",width:1.5},"[separator-20]":{class:"separator",width:2},"[separator-50]":{class:"separator",width:5},"[shift]":{class:"shift bottom left",width:1.5,label:"<span class=caps-lock-indicator></span><svg class=svg-glyph><use xlink:href=#svg-shift /></svg>"},"[foreground-color]":{variants:"foreground-color",command:["applyStyle",{color:"red"}],label:"<span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'>"},"[background-color]":{variants:"background-color",command:["applyStyle",{backgroundColor:"yellow"}],label:"<span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span>"}};function uo(t){var e;if(typeof t=="string"){if(t==="[.]"&&globalThis.MathfieldElement.decimalSeparator===","&&(t="[,]"),!Ft[t])return{latex:t};t={label:t}}let r;return"label"in t&&t.label&&Ft[t.label]&&(r=f(p(p({},Ft[t.label]),t),{label:Ft[t.label].label})),"key"in t&&t.key&&Ft[t.key]&&(r=f(p(p({},Ft[t.key]),t),{key:Ft[t.key].key})),r?(r.command==="insertDecimalSeparator"&&(r.label=(e=globalThis.MathfieldElement.decimalSeparator)!=null?e:"."),(r.tooltip===void 0||r.tooltip===null||r.tooltip===!1)&&delete r.tooltip,(r.tooltip===void 0||r.tooltip===null||r.tooltip===!1)&&delete r.tooltip,(r.aside===void 0||r.aside===null||r.aside===!1)&&delete r.aside,(r.variants===void 0||r.variants===null||r.variants===!1)&&delete r.variants,(r.shift===void 0||r.shift===null||r.shift===!1)&&delete r.shift,r):t}var ho;function yg(t){var e;if(t.button!==0)return;let r=Ee.singleton;if(!r)return;let n=t.target;for(;n&&!n.getAttribute("data-layer");)n=n.parentElement;if(n){r.currentLayer=(e=n.getAttribute("data-layer"))!=null?e:"",t.preventDefault();return}let a=fi(t.target);if(!(a!=null&&a.id))return;let s=r.getKeycap(a.id);if(!s)return;t.type;let o=new AbortController,c=o.signal;a.classList.add("is-pressed"),a.addEventListener("pointerenter",ss(o),{capture:!0,signal:c}),a.addEventListener("pointerleave",ss(o),{capture:!0,signal:c}),a.addEventListener("pointercancel",ss(o),{signal:c}),a.addEventListener("pointerup",ss(o),{signal:c}),fn(s)&&(a.classList.add("is-active"),r.shiftPressCount++),s.variants&&(ho&&clearTimeout(ho),ho=setTimeout(()=>{a.classList.contains("is-pressed")&&(a.classList.remove("is-pressed"),a.classList.add("is-active"),t.target&&"releasePointerCapture"in t.target&&t.target.releasePointerCapture(t.pointerId),ns(a,()=>{o.abort(),a?.classList.remove("is-active")}))},s.stickyVariantPanel?0:300)),t.preventDefault()}function ss(t){return e=>{let r=fi(e.target);if(!(r!=null&&r.id))return;let n=Ee.singleton;if(!n)return;let a=n.getKeycap(r.id);if(a){if(e.type==="pointerenter"&&e.target===r&&e.isPrimary&&r.classList.add("is-pressed"),e.type==="pointercancel"){r.classList.remove("is-pressed"),fn(a)&&(n.shiftPressCount--,r.classList.toggle("is-active",n.isShifted)),t.abort();return}if(e.type==="pointerleave"&&e.target===r){r.classList.remove("is-pressed"),fn(a)&&(n.shiftPressCount--,r.classList.toggle("is-active",n.isShifted));return}if(e.type==="pointerup"){ho&&clearTimeout(ho),fn(a)?r.classList.toggle("is-active",n.isShifted):r.classList.contains("is-pressed")&&(r.classList.remove("is-pressed"),n.isShifted&&a.shift?typeof a.shift=="string"?n.executeCommand(["insert",a.shift,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]):as(a.shift):as(a),n.shiftPressCount===1&&!e.shiftKey&&(n.shiftPressCount=0)),t.abort(),e.preventDefault();return}}}}function as(t){var e;let r=t.command;!r&&t.insert&&(r=["insert",t.insert,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),!r&&t.key&&(r=["typedText",t.key,{focus:!0,feedback:!0,simulateKeystroke:!0}]),!r&&t.latex&&(r=["insert",t.latex,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),r||(r=["typedText",t.label,{focus:!0,feedback:!0,simulateKeystroke:!0}]),(e=Ee.singleton)==null||e.executeCommand(r)}function xg(t){if(t.nodeType!==1)return!1;let e=t.classList;return e.contains("MLK__keycap")||e.contains("shift")||e.contains("action")||e.contains("fnbutton")||e.contains("bigfnbutton")}function fi(t){if(!t)return;let e=t;for(;e&&!xg(e);)e=e.parentElement;return e??void 0}function fn(t){return!!t.class&&/(^|\s)shift($|\s)/.test(t.class)}var Ee=class X9{constructor(){this.originalContainerBottomPadding=null,this.keycapRegistry={},this._shiftPressCount=0;var e;this.targetOrigin=window.origin,this.originValidator="none",this._alphabeticLayout="auto",this._layouts=Object.freeze(["default"]),this._editToolbar="default",this._container=void 0,this._visible=!1,this._rebuilding=!1,this.observer=new ResizeObserver(r=>{this.adjustBoundingRect(),this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect})}),this.listeners={};try{(e=window.top)==null||e.addEventListener("message",this)}catch{window.addEventListener("message",this)}document.addEventListener("focusin",r=>{let n=r.target;n!=null&&n.isConnected&&setTimeout(()=>{let a=bp();a&&!a.readOnly&&a.mathVirtualKeyboardPolicy==="auto"&&Bo()&&this.show({animate:!0})},300)}),document.addEventListener("focusout",r=>{r.target instanceof xt&&r.target.mathVirtualKeyboardPolicy!=="manual"&&setTimeout(()=>{bp()||this.hide()},300)})}get currentLayer(){var e,r,n;return(n=(r=(e=this._element)==null?void 0:e.querySelector(".MLK__layer.is-visible"))==null?void 0:r.id)!=null?n:""}set currentLayer(e){var r;if(!this._element){this.latentLayer=e;return}let n=e?this._element.querySelector(`#${e}.MLK__layer`):null;n||(n=this._element.querySelector(".MLK__layer")),n&&((r=this._element.querySelector(".MLK__layer.is-visible"))==null||r.classList.remove("is-visible"),n.classList.add("is-visible")),this.render()}get shiftPressCount(){return this._shiftPressCount}set shiftPressCount(e){var r;this._shiftPressCount=e>2||e<0?0:e,(r=this._element)==null||r.classList.toggle("is-caps-lock",this.shiftPressCount===2),this.render()}get isShifted(){return this._shiftPressCount>0}resetKeycapRegistry(){this.keycapRegistry={}}registerKeycap(e){let r="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);return this.keycapRegistry[r]=e,r}setKeycap(e,r){Ft[e]=uo(r),this.rebuild()}getKeycap(e){var r;return e?(r=Ft[e])!=null?r:this.keycapRegistry[e]:void 0}getLayer(e){let r=this.normalizedLayouts;for(let n of r)for(let a of n.layers)if(a.id===e)return a}get alphabeticLayout(){return this._alphabeticLayout}set alphabeticLayout(e){this._alphabeticLayout=e,this._normalizedLayouts=void 0,this.rebuild()}get layouts(){return this._layouts}set layouts(e){this.updateNormalizedLayouts(e),this.rebuild()}updateNormalizedLayouts(e){let r=Array.isArray(e)?[...e]:[e],n=r.findIndex(a=>a==="default");n>=0&&r.splice(n,1,"numeric","symbols","alphabetic","greek"),this._layouts=Object.freeze(r),this._normalizedLayouts=r.map(a=>ac(a))}get normalizedLayouts(){return this._normalizedLayouts||this.updateNormalizedLayouts(this._layouts),this._normalizedLayouts}get editToolbar(){return this._editToolbar}set editToolbar(e){this._editToolbar=e,this.rebuild()}get container(){return this._container===void 0?window.document.body:this._container}set container(e){this._container=e,this.rebuild()}static get singleton(){if(this._singleton===void 0)try{this._singleton=new X9}catch{this._singleton=null}return this._singleton}get style(){return this._style}addEventListener(e,r,n){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(r)||this.listeners[e].add(r)}dispatchEvent(e){return!this.listeners[e.type]||this.listeners[e.type].size===0?!0:(this.listeners[e.type].forEach(r=>{typeof r=="function"?r(e):r?.handleEvent(e)}),!e.defaultPrevented)}removeEventListener(e,r,n){this.listeners[e]&&this.listeners[e].delete(r)}get element(){return this._element}set element(e){var r;this._element!==e&&((r=this._element)==null||r.remove(),this._element=e)}get visible(){return this._visible}set visible(e){e?this.show():this.hide()}get boundingRect(){var e;if(!this._visible)return new DOMRect;let r=(e=this._element)==null?void 0:e.getElementsByClassName("MLK__plate")[0];return r?r.getBoundingClientRect():new DOMRect}adjustBoundingRect(){if(!this._element)return;let e=this.boundingRect.height;if(this.container===document.body){this._element.style.setProperty("--_keyboard-height",`calc(${e}px + var(--_padding-top) + var(--_padding-bottom) + env(safe-area-inset-bottom, 0))`);let r=e-1;this.container.style.paddingBottom=this.originalContainerBottomPadding?`calc(${this.originalContainerBottomPadding} + ${r}px)`:`${r}px`}else this._element.style.setProperty("--_keyboard-height",`${e}px`)}rebuild(){if(this._rebuilding||!this._element)return;this._rebuilding=!0;let e=this.currentLayer;requestAnimationFrame(()=>{this._rebuilding=!1,this._element&&(this._element.remove(),this._element=void 0),this.visible&&(this.buildAndAttachElement(),this.currentLayer=e,this.render(),this.adjustBoundingRect(),this._element.classList.add("is-visible"))})}render(){var e;if(!this._element)return;let r=this.getLayer(this.currentLayer);this._element.classList.toggle("backdrop-is-transparent",!!(r&&(r.backdrop||r.container)));let n=this._element.querySelectorAll(".MLK__layer.is-visible .MLK__keycap, .MLK__layer.is-visible .action, .fnbutton, .MLK__layer.is-visible .bigfnbutton, .MLK__layer.is-visible .shift");if(!n)return;let a=this.isShifted;for(let s of n){let o=this.getKeycap(s.id);if(o){let[c,d]=hn(o,{shifted:a});s.innerHTML=globalThis.MathfieldElement.createHTML(c),s.className=d,a&&typeof o.shift=="object"&&(e=o.shift)!=null&&e.tooltip?s.dataset.tooltip=o.shift.tooltip:!a&&o.tooltip&&(s.dataset.tooltip=o.tooltip)}}}show(e){var r;if(this._visible)return;let n=this.container;if(n&&window.mathVirtualKeyboard&&this.stateWillChange(!0)){if(this._element||(this.buildAndAttachElement(),this.adjustBoundingRect()),!this._visible){let a=this._element.getElementsByClassName("MLK__plate")[0];if(a&&this.observer.observe(a),n===window.document.body){let s=n.style.paddingBottom;this.originalContainerBottomPadding=s;let o=a.offsetHeight-1;n.style.paddingBottom=s?`calc(${s} + ${o}px)`:`${o}px`}window.addEventListener("mouseup",this),window.addEventListener("blur",this),window.addEventListener("keydown",this,{capture:!0}),window.addEventListener("keyup",this,{capture:!0}),(r=this._element)==null||r.classList.toggle("is-caps-lock",this.shiftPressCount===2),this.currentLayer=this.latentLayer}this._visible=!0,e!=null&&e.animate?requestAnimationFrame(()=>{this._element&&(this._element.classList.add("animate"),this._element.addEventListener("transitionend",()=>{var a;return(a=this._element)==null?void 0:a.classList.remove("animate")},{once:!0}),this._element.classList.add("is-visible"),this.stateChanged())}):(this._element.classList.add("is-visible"),this.stateChanged())}}hide(e){var r;let n=this.container;if(n&&this._visible&&this.stateWillChange(!1)){if(this._visible=!1,this._element){this.latentLayer=this.currentLayer;let a=this._element.getElementsByClassName("MLK__plate")[0];a&&this.observer.unobserve(a),window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("keydown",this,{capture:!0}),window.removeEventListener("keyup",this,{capture:!0}),window.removeEventListener("contextmenu",this,{capture:!0}),zr(),fp(),(r=this._element)==null||r.remove(),this._element=void 0,this.originalContainerBottomPadding!==null&&(n.style.paddingBottom=this.originalContainerBottomPadding)}this.stateChanged()}}get height(){var e,r;return(r=(e=this.element)==null?void 0:e.offsetHeight)!=null?r:0}buildAndAttachElement(){var e;this.element,this.element=gp(this),window.addEventListener("contextmenu",this,{capture:!0}),this.element.addEventListener("contextmenu",r=>{r.shiftKey||((r.ctrlKey||r.button===2)&&ns(r.target),r.preventDefault(),r.stopPropagation())},{capture:!0}),(e=this.container)==null||e.appendChild(this.element)}handleEvent(e){if(co(e)){if(!Gi(e.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${e.origin}) cannot be handled`,"SecurityError");e.data.action==="disconnect"?this.connectedMathfieldWindow=void 0:e.data.action!=="update-setting"&&e.data.action!=="proxy-created"&&e.data.action!=="execute-command"&&(e.source,this.connectedMathfieldWindow=e.source),this.handleMessage(e.data,e.source)}if(this._element)switch(e.type){case"mouseup":case"blur":document.body.style.userSelect="",this.shiftPressCount=0;break;case"contextmenu":e.button!==2&&e.preventDefault();break;case"keydown":{e.key==="Shift"&&!e.repeat&&(this.shiftPressCount=1);break}case"keyup":{(e.key==="Shift"||!e.getModifierState("Shift")&&this.shiftPressCount!==2)&&(this.shiftPressCount=0);break}}}handleMessage(e,r){let{action:n}=e;if(n==="execute-command"){let{command:a}=e,s=nr(a);if(window.top!==void 0&&s!=="virtual-keyboard")return;this.executeCommand(a);return}if((n==="connect"||n==="show")&&this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},r),n!=="disconnect"&&window===window.top){if(n==="show"){typeof e.animate<"u"?this.show({animate:e.animate}):this.show();return}if(n==="hide"){typeof e.animate<"u"?this.hide({animate:e.animate}):this.hide();return}if(n==="update-setting"){if(e.alphabeticLayout&&(this.alphabeticLayout=e.alphabeticLayout),e.layouts&&(this.layouts=e.layouts),e.editToolbar&&(this.editToolbar=e.editToolbar),e.setKeycap){let{keycap:a,value:s}=e.setKeycap;this.setKeycap(a,s),this.render()}return}if(n==="proxy-created"){this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},r);return}}}sendMessage(e,r,n){if(r.command&&this.dispatchEvent(new CustomEvent("math-virtual-keyboard-command",{detail:r.command})),n||(n=this.connectedMathfieldWindow),this.targetOrigin===null||this.targetOrigin==="null"||n===window){window.dispatchEvent(new MessageEvent("message",{source:window,data:p({type:lo,action:e},r)}));return}if(n)n.postMessage(p({type:lo,action:e},r),{targetOrigin:this.targetOrigin});else if(e==="execute-command"&&Array.isArray(r.command)&&r.command[0]==="insert"){let a=r.command[1].split("");for(let s of a)this.dispatchEvent(new KeyboardEvent("keydown",{key:s,bubbles:!0})),this.dispatchEvent(new KeyboardEvent("keyup",{key:s,bubbles:!0}))}}stateWillChange(e){return this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:e},bubbles:!0,cancelable:!0,composed:!0}))}stateChanged(){this.dispatchEvent(new Event("virtual-keyboard-toggle")),this._visible||(this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect}))}focus(){this.sendMessage("focus",{})}blur(){this.sendMessage("blur",{})}updateToolbar(e){let r=this._element;if(!r)return;r.classList.toggle("is-math-mode",e.mode==="math"),r.classList.toggle("is-text-mode",e.mode==="text"),r.classList.toggle("can-undo",e.canUndo),r.classList.toggle("can-redo",e.canRedo),r.classList.toggle("can-copy",!e.selectionIsCollapsed),r.classList.toggle("can-copy",!e.selectionIsCollapsed),r.classList.toggle("can-paste",!0);let n=r.querySelectorAll(".ML__edit-toolbar");if(n)for(let a of n)a.innerHTML=hp(this,e)}update(e){this._style=e.style,this.updateToolbar(e)}connect(){this.connectedMathfieldWindow=window}disconnect(){this.connectedMathfieldWindow=void 0}executeCommand(e){if(e=hi(e),!e)return!1;let r,n=[],a=nr(e);return Y(e)?(r=e[0],r==="performWithFeedback"&&(a=nr(e.slice(1))),n=e.slice(1)):r=e,a==="virtual-keyboard"?yt[r].fn(void 0,...n):(this.sendMessage("execute-command",{command:e}),!1)}dispose(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("message",this)}};function bp(){let t=ui(),e=null;for(;t;){if("host"in t&&t.host instanceof xt){e=t.host;break}t=t.parentNode}return e}if(Me()&&!("mathVirtualKeyboard"in window))if(window===window.top){let t=Ee.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>t})}else Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>so.singleton,configurable:!0});function gn(t){let e={};for(let r of Object.keys(t))switch(r){case"scriptDepth":let n=t.scriptDepth;if(Y(n))e.scriptDepth=[n[0],n[1]];else if(typeof n=="number")e.scriptDepth=[n,n];else if(typeof n=="string"){let[s,o]=n.split(",").map(c=>parseInt(c.trim()));e.scriptDepth=[s,o]}else throw new TypeError("Unexpected value for scriptDepth");break;case"mathVirtualKeyboardPolicy":let a=t.mathVirtualKeyboardPolicy.toLowerCase();if(a==="sandboxed"){if(window!==window.top){let s=Ee.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>s})}a="manual"}e.mathVirtualKeyboardPolicy=a;break;case"letterShapeStyle":t.letterShapeStyle==="auto"?N.locale.startsWith("fr")?e.letterShapeStyle="french":e.letterShapeStyle="tex":e.letterShapeStyle=t.letterShapeStyle;break;case"defaultMode":["text","math","inline-math"].includes(t.defaultMode)?e.defaultMode=t.defaultMode:(console.error('MathLive 0.106.0:  valid values for defaultMode are "text", "math" or "inline-math"'),e.defaultMode="math");break;case"macros":e.macros=Ci(t.macros);break;default:Y(t[r])?e[r]=[...t[r]]:typeof t[r]=="object"&&!(t[r]instanceof Element)&&r!=="computeEngine"?e[r]=p({},t[r]):e[r]=t[r]}return e}function or(t,e){let r;typeof e=="string"?r=[e]:e===void 0?r=Object.keys(t):r=e;let n={};for(let a of r)t[a]===null?n[a]=null:Y(t[a])?n[a]=[...t[a]]:typeof t[a]=="object"&&!(t[a]instanceof Element)&&a!=="computeEngine"?n[a]=p({},t[a]):n[a]=t[a];return typeof e=="string"?n[e]:n}function bn(){return{readOnly:!1,defaultMode:"math",macros:{},registers:{},colorMap:Hr,backgroundColorMap:Si,letterShapeStyle:N.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,isImplicitFunction:t=>["\\sin","\\cos","\\tan","\\arcsin","\\arccos","\\arctan","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th","\\lg","\\lb","\\log","\\ln"].includes(t),mathModeSpace:"",placeholderSymbol:"▢",contentPlaceholder:"",popoverPolicy:"auto",environmentPopoverPolicy:"off",keybindings:dm,inlineShortcuts:za,inlineShortcutTimeout:0,mathVirtualKeyboardPolicy:"auto",virtualKeyboardTargetOrigin:window?.origin,originValidator:"none",onInsertStyle:oo,onInlineShortcut:()=>"",onScrollIntoView:null,onExport:um,value:""}}function sc(t){return t.defaultMode==="inline-math"?"math":t.defaultMode}function yp(t,e){let r=t.at(t.position);if(r.type==="composition")r.value=e;else{let{caret:n}=r;r.caret=void 0;let a=new Qi(e,{mode:r.mode});a.caret=n,r.parent.addChildAfter(a,r),t.position+=1}}function xp(t){let e=t.at(t.position);e.type==="composition"&&(e.parent.removeChild(e),t.position-=1)}$o(["math","displaymath"],Re);$o("center",Re);St(["multline","multline*"],"",Re);v("displaylines","",{parse:t=>{if(t.skipWhitespace(),!t.match("<{>"))return[];let e=[],r=[];t.mathlist.length>0&&e.push([t.mathlist]),t.beginContext({tabular:!0,root:!0});do{if(t.end()||t.match("<}>"))break;t.matchColumnSeparator()||t.matchRowSeparator()?(e.push([r]),r=[]):r.push(...t.scan(a=>["<}>","&","\\cr","\\\\","\\tabularnewline"].includes(a)))}while(!0);t.endContext(),e.push([r]);let n=t.scan();return n.length>0&&e.push([n]),e},createAtom:t=>new I("lines",t.args,[],{leftDelim:".",rightDelim:".",columns:[{align:"l"}],classes:["ML__multiline_environment"],isRoot:!0,minColumns:1,maxColumns:1,minRows:1})});St("split","",Re);St(["gather","gather*","gathered"],"",Re);St(["equation","equation*","subequations"],"",Re);$o(["align","align*","eqnarray"],Re,{tabular:!0});St(["aligned"],"",Re);St("array","{columns:colspec}",(t,e,r,n)=>new I(t,e,r,{columns:n[0],mathstyleName:"textstyle"}));St(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",Re);St(["smallmatrix","smallmatrix*"],"[columns:colspec]",Re);St(["cases","dcases","rcases"],"",Re);function Re(t,e=[[[]]],r=[],n=[],a){switch(t){case"math":return new I(t,e,r,{mathstyleName:"textstyle",isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"displaymath":return new I(t,e,r,{mathstyleName:"textstyle",isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"center":return new I(t,e,r,{columns:[{align:"c"}],classes:["ML__center_environment"],isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"multline":case"multline*":return new I(t,e,r,{columns:[{align:"m"}],leftDelim:".",rightDelim:".",isRoot:!0,minColumns:1,maxColumns:1,minRows:1});case"split":return new I(t,e,r,{columns:[{align:"r"},{align:"l"}],minColumns:2,minRows:1,isRoot:!1});case"gather":case"gather*":return new I(t,e,r,{columns:[{gap:.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1,isRoot:!0,classes:["ML__gather_environment"]});case"gathered":return new I(t,e,r,{columns:[{gap:.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1});case"equation":case"equation*":case"subequations":return new I(t,e,r,{columns:[{align:"c"}],isRoot:!0,minColumns:1,maxColumns:1,minRows:1});case"aligned":{let s=0;for(let d of e)s=Math.max(s,d.length);let o=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],c=2;for(;c<s;)o.push({gap:1},{align:"r"},{gap:.25},{align:"l"}),c+=2;return o.push({gap:0}),new I(t,e,r,{arraycolsep:0,columns:o,minColumns:2,minRows:1,isRoot:t!=="aligned"})}case"eqnarray":return new I(t,e,r,{arraycolsep:0,columns:[{gap:0},{align:"r"},{align:"c"},{align:"l"}],minColumns:3,maxColumns:3,minRows:1,isRoot:!0,classes:["ML__eqnarray_environment"]});case"align":case"align*":return new I(t,e,r,{arraycolsep:0,columns:[{gap:0},{align:"r"},{gap:.25},{align:"l"}],minColumns:2,maxColumns:2,minRows:1,isRoot:!0,classes:["ML__align_environment"]});case"pmatrix":case"pmatrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:"(",rightDelim:")",columns:gi(n[0],a)});case"bmatrix":case"bmatrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:"[",rightDelim:"]",columns:gi(n[0],a)});case"Bmatrix":case"Bmatrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:"\\lbrace",rightDelim:"\\rbrace",columns:gi(n[0],a)});case"vmatrix":case"vmatrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:"\\vert",rightDelim:"\\vert",columns:gi(n[0],a)});case"Vmatrix":case"Vmatrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:"\\Vert",rightDelim:"\\Vert",columns:gi(n[0],a)});case"matrix":case"matrix*":return new I(t,e,r,{mathstyleName:"textstyle",leftDelim:".",rightDelim:".",columns:gi(n?.[0],a)});case"smallmatrix":case"smallmatrix*":return new I(t,e,r,{mathstyleName:"scriptstyle",columns:gi(n?.[0],a),colSeparationType:"small",arraystretch:.5});case"cases":case"dcases":return new I(t,e,r,{mathstyleName:t==="dcases"?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]});case"rcases":return new I(t,e,r,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]});case"lines":return new I(t,e,r,{leftDelim:".",rightDelim:".",columns:[{align:"l"}],isRoot:!0,minColumns:1,maxColumns:1,minRows:1})}return new I(t,e,r,{mathstyleName:"textstyle"})}function gi(t,e=10){return t??Array(e).fill({align:"c"})}function vg(t){let e=t.at(t.position);for(;e&&!We(e.parentBranch);)e=e.parent;return[e.firstSibling,e.lastSibling]}function _g(t,e){let r=t.at(t.position);for(;r&&!(r.parent instanceof I);)r=r.parent;if(r&&r.type==="array"&&r.environmentName,!r||!(r.parent instanceof I)){let n=t.at(t.position);if(r=n,!r.parent.parent){let a=t.extractAtoms([t.position,t.lastOffset]),s=t.extractAtoms([0,t.position]),o;return e.endsWith("column")?(s.length===0&&(s=cs()),a.length===0&&(a=cs()),o=Re("split",[[s,a]]),t.root=o,fo(o,0,0)?yn(t,o,0,0):fo(o,0,1)?yn(t,o,0,1):t.position=t.offsetOf(n)):(o=Re("lines",[[s],[a]]),t.root=o,yn(t,o,1,0)),[void 0,[0,0]]}if(r.parent instanceof G){let a=r.parent,s=t.extractAtoms([t.position,t.offsetOf(a.lastChild)]),o=t.extractAtoms([t.offsetOf(a.firstChild),t.position]);o.length===0&&(o=cs()),s.length===0&&(s=cs());let c="pmatrix",d=a.leftDelim,m=a.rightDelim;d==="("&&(m===")"||m==="?")?c="pmatrix":(d==="["||d==="\\lbrack")&&(m==="]"||m==="\\rbrack"||m==="?")?c="bmatrix":d==="\\vert"&&m==="\\vert"?c="vmatrix":d==="\\Vert"&&m==="\\Vert"?c="Vmatrix":(d==="{"||d==="\\lbrace")&&(m==="."||m==="?")&&(c="cases");let y=Re(c,e.endsWith("column")?[[o,s]]:[[o],[s]]);return a.parent.addChildBefore(y,a),a.parent.removeChild(a),fo(y,0,0)?yn(t,y,0,0):e.endsWith("column")?fo(y,0,1)?yn(t,y,0,1):t.position=t.offsetOf(r):fo(y,1,0)?yn(t,y,1,0):t.position=t.offsetOf(r),[void 0,[0,0]]}}return r&&r.parent instanceof I?[r.parent,r.parentBranch]:[void 0,[0,0]]}function fo(t,e,r){let n=t.getCell(e,r);return!n||n.length!==2?!1:n[1].type==="placeholder"}function Mg(t,e,r,n){let a=e.getCell(r,n);return a?[t.offsetOf(a[0]),t.offsetOf(a[a.length-1])]:-1}function yn(t,e,r,n){let a=Mg(t,e,r,n);typeof a!="number"&&t.setSelection(a)}function ls(t,e,r,n,a){let s=e.getCell(r,n);s&&t.setPositionHandlingPlaceholder(t.offsetOf(s[a==="start"?0:s.length-1]))}function go(t,e){let[r,[n,a]]=_g(t,e);if(r)switch(e){case"after row":r.addRowAfter(n),ls(t,r,n+1,0,"end");break;case"after column":if(r.maxColumns<=r.colCount){t.announce("plonk");return}r.addColumnAfter(a),ls(t,r,n,a+1,"end");break;case"before row":r.addRowBefore(n),ls(t,r,n,0,"start");break;case"before column":if(r.maxColumns<=r.colCount){t.announce("plonk");return}r.addColumnBefore(a),ls(t,r,n,a,"start");break}}function lc(t){var e;let r=t.at(t.position);if(!We(r.parentBranch)&&r.parent!==t.root&&t.root.type!=="root")return t.announce("plonk"),!1;if(!t.contentWillChange({inputType:"insertText"}))return!1;if((e=t.parentEnvironment)!=null&&e.isMultiline){t.selectionIsCollapsed||t.deleteAtoms(le(t.selection));let[n,a]=vg(t),s=t.extractAtoms([t.position,t.offsetOf(a)]),o=t.extractAtoms([t.offsetOf(n),t.position]),c=n.parent,[d,m]=n.parentBranch;return c.setCell(d,m,o),go(t,"after row"),c.setCell(d+1,m,s),t.position=t.offsetOf(c.getCell(d+1,m)[0]),t.contentDidChange({inputType:"insertText"}),!0}return go(t,"after row"),t.contentDidChange({inputType:"insertText"}),!0}function wg(t){return t.contentWillChange({inputType:"insertText"})?(go(t,"before row"),t.contentDidChange({inputType:"insertText"}),!0):!1}function cc(t){return t.contentWillChange({inputType:"insertText"})?(go(t,"after column"),t.contentDidChange({inputType:"insertText"}),!0):!1}function kg(t){return t.contentWillChange({inputType:"insertText"})?(go(t,"before column"),t.contentDidChange({inputType:"insertText"}),!0):!1}function uc(t,e){if(!t.contentWillChange({}))return!1;t.mathfield.snapshot();let r=".",n=".";switch(e){case"pmatrix":case"pmatrix*":r="(",n=")";break;case"bmatrix":case"bmatrix*":r="[",n="]";break;case"Bmatrix":case"Bmatrix*":r="\\lbrace",n="\\rbrace";break;case"vmatrix":case"vmatrix*":r="\\vert",n="\\vert";break;case"Vmatrix":case"Vmatrix*":r="\\Vert",n="\\Vert";break;case"matrix":case"matrix*":r=".",n=".";break;case"cases":case"dcases":r="\\lbrace";break;case"rcases":n="\\rbrace";break}let a=t.at(t.position),s=a.type==="array"?a:t.parentEnvironment;return s.environmentName=e,s.leftDelim=r,s.rightDelim=n,t.contentDidChange({}),!0}function vp(t,e){let r=t.at(t.position);for(;r&&!(Array.isArray(r.parentBranch)&&r.parent instanceof I);)r=r.parent;if(Array.isArray(r?.parentBranch)&&r?.parent instanceof I){let n=r.parent,a=r.parentBranch,s;switch(e){case"row":if(n.rowCount>1){n.removeRow(a[0]);let o=n.getCell(Math.max(0,a[0]-1),a[1]);s=t.offsetOf(o[o.length-1])}break;case"column":if(n.colCount>n.minColumns){n.removeColumn(a[1]);let o=n.getCell(a[0],Math.max(0,a[1]-1));s=t.offsetOf(o[o.length-1])}break}s!==void 0&&t.setPositionHandlingPlaceholder(s)}}function Sg(t){return t.contentWillChange({inputType:"deleteContent"})?(vp(t,"row"),t.contentDidChange({inputType:"deleteContent"}),!0):!1}function Lg(t){return t.contentWillChange({inputType:"deleteContent"})?(vp(t,"column"),t.contentDidChange({inputType:"deleteContent"}),!0):!1}pe({addRowAfter:lc,addColumnAfter:cc,addRowBefore:wg,addColumnBefore:kg,removeRow:Sg,removeColumn:Lg,setEnvironment:uc},{target:"model",canUndo:!0,changeContent:!0,changeSelection:!0});function cs(){return[new Le]}var ds=class Y9{constructor(e){this.recording=!1,this.model=e,this.reset()}reset(){this.stack=[],this.index=-1,this.lastOp=""}startRecording(){this.recording=!0}stopRecording(){this.recording=!1}canUndo(){return this.index-1>=0}canRedo(){return this.stack.length-1>this.index}stopCoalescing(e){e&&this.index>=0&&(this.stack[this.index].selection=e),this.lastOp=""}undo(){if(!this.canUndo())return!1;let e=this.stack[this.index-1];return this.index-=1,this.lastOp="",this.model.setState(e,{silenceNotifications:!1,type:"undo"}),!0}redo(){if(!this.canRedo())return!1;let e=this.stack[this.index+1];return this.index+=1,this.lastOp="",this.model.setState(e,{silenceNotifications:!1,type:"redo"}),!0}pop(){this.canUndo()&&(this.stack.splice(this.index,this.stack.length-this.index),this.index-=1)}snapshot(e){return this.recording?(e&&e===this.lastOp&&this.pop(),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index+=1,this.stack.length>Y9.maximumDepth&&(this.stack.shift(),this.index-=1),this.lastOp=e??"",!0):!1}};ds.maximumDepth=1e3;var us=ds;function hs(t,e,r){if(t.at(e).mode!=="text")return e;let n=r==="backward"?-1:1,a;if(Wr.test(t.at(e).value)){let s=e,o;do o=t.at(s).mode==="text"&&Wr.test(t.at(s).value),s+=n;while(t.at(s)&&o);a=t.at(s)?s-2*n:s-n}else if(/\s/.test(t.at(e).value)){let s=e;for(;t.at(s)&&t.at(s).mode==="text"&&/\s/.test(t.at(s).value);)s+=n;if(!t.at(s))a=s-n;else{let o=!0;do o=t.at(s).mode==="text"&&!/\s/.test(t.at(s).value),s+=n;while(t.at(s)&&o);a=t.at(s)?s-2*n:s-n}}else{let s=e;for(;t.at(s)&&t.at(s).mode==="text"&&!/\s/.test(t.at(s).value);)s+=n;a=t.at(s)?s:s-n;let o=!0;for(;t.at(s)&&o;)o=t.at(s).mode==="text"&&/\s/.test(t.at(s).value),o&&(a=s),s+=n;a=t.at(s)?s-2*n:s-n}return a-(n>0?0:1)}function Ir(t,e,r){var n,a,s,o,c,d,m;let y=t.position;(n=r?.extend)!=null&&n||t.collapseSelection(e);let A=t.at(t.position);if(e==="forward"&&(A.type==="subsup"?(A=A.rightSibling,A||(A=t.at(t.position+1))):A=t.at(t.position+1)),!A)return t.announce("plonk"),!1;let P=t.offsetOf(A);if(A instanceof $e)P=hs(t,P,e);else if(A instanceof ue)if(A.isSuggestion)for(;A&&A instanceof ue;)A.isSuggestion=!1,P=t.offsetOf(A),A=A.rightSibling;else if(e==="forward"){if(A=A.rightSibling,!A||!(A instanceof ue))return t.announce("plonk"),!1;for(;A&&A instanceof ue&&/[a-zA-Z\*]/.test(A.value);)P=t.offsetOf(A),A=A.rightSibling}else{if(A=A.leftSibling,!A||!(A instanceof ue))return t.announce("plonk"),!1;for(;A&&A instanceof ue&&/[a-zA-Z\*]/.test(A.value);)P=t.offsetOf(A),A=A.leftSibling}else if(e==="forward"&&A.type==="mopen"){let Z=0;do A.type==="mopen"?Z+=1:A.type==="mclose"&&(Z-=1),A=A.rightSibling;while(!A.isLastSibling&&Z!==0);P=t.offsetOf(A.leftSibling)}else if(e==="backward"&&A.type==="mclose"){let Z=0;do A.type==="mopen"?Z+=1:A.type==="mclose"&&(Z-=1),A=A.leftSibling;while(!A.isFirstSibling&&Z!==0);P=t.offsetOf(A)}else if(e==="backward")if(A.type==="first")for(;P>0&&A.type==="first";)P-=1,A=t.at(P);else{let Z=A.type;A.type==="subsup"&&(P=t.offsetOf(t.at(P).leftSibling)),P-=1;let me=(a=t.at(P))==null?void 0:a.type;for(;P>=0&&me===Z;)((s=t.at(P))==null?void 0:s.type)==="subsup"?P=t.offsetOf(t.at(P).leftSibling):P-=1,me=t.at(P).type}else{let{type:Z}=A,me=(o=t.at(P))==null?void 0:o.type,{lastOffset:_e}=t;for(;P<=_e&&(me===Z||me==="subsup");){for(;((c=t.at(P).rightSibling)==null?void 0:c.type)==="subsup";)P=t.offsetOf(t.at(P).rightSibling);P+=1,me=(d=t.at(P))==null?void 0:d.type}P-=1}if((m=r?.extend)!=null&&m){if(!t.setSelection(t.anchor,P))return t.announce("plonk"),!1}else{if(P===t.position)return t.announce("plonk"),!1;t.position=P}return t.announce("move",y),t.mathfield.stopCoalescingUndo(),!0}function ot(t,e,r){var n,a;if(r=r??{extend:!1},t.mathfield.styleBias=e==="backward"?"right":"left",e!=="forward"){let[c,d]=es(t);c!==void 0&&d!==void 0&&t.deleteAtoms([c,d])}if(e==="upward")return Cg(t,r);if(e==="downward")return Eg(t,r);if(r.extend){let c=ms(t,t.position,e);c<0&&(c=0),c>t.lastOffset&&(c=t.lastOffset);let d=t.setSelection(t.anchor,c);return t.mathfield.stopCoalescingUndo(),d}if(t.selectionIsPlaceholder){t.collapseSelection(e);let c=ot(t,e);return t.mathfield.stopCoalescingUndo(),c}let s=t.position,o=s;if(t.collapseSelection(e)?(s=t.position,_p(t,s)||(s=ms(t,s,e))):s=ms(t,s,e),s<0||s>t.lastOffset){let c=!0;return t.silenceNotifications||(c=(a=(n=t.mathfield.host)==null?void 0:n.dispatchEvent(new CustomEvent("move-out",{detail:{direction:e},cancelable:!0,bubbles:!0,composed:!0})))!=null?a:!0),c&&t.announce("plonk"),c}return t.setPositionHandlingPlaceholder(s),t.mathfield.stopCoalescingUndo(),t.announce("move",o),!0}function ms(t,e,r){return e=e+(r==="forward"?1:-1),e<0||e>t.lastOffset||_p(t,e)?e:ms(t,e,r)}function _p(t,e){var r;let n=t.at(e),a=n.parent;for(;a&&!a.inCaptureSelection;)a=a.parent;return!(a!=null&&a.inCaptureSelection||(r=n.parent)!=null&&r.skipBoundary&&(!n.isFirstSibling&&n.isLastSibling||n.type==="first")||t.mathfield.hasEditablePrompts&&!n.parentPrompt)}function Ag(t,e,r){let n=1/0,a=0;for(;a<e.length;a++){let s=e[a],o=t.getHTMLElement(s);if(!o)continue;let c=Il(o).right,d=Math.abs(r-c);if(d<=n)n=d;else break}return e[a-1]}function ps(t,e,r,n,a){let s=t.mathfield.hasEditablePrompts,o=s?r.filter(m=>m.type==="prompt"&&!m.captureSelection):r,c=Il(t.mathfield.getHTMLElement(e)).right,d=t.offsetOf(Ag(t.mathfield,o,c))-(s?1:0);if(n){let[m,y]=t.selection.ranges[0],A;d<(a==="up"?m:y)?A={ranges:[[d,y]],direction:"backward"}:A={ranges:[[m,d]],direction:"forward"},t.setSelection(A)}else t.setPositionHandlingPlaceholder(d);t.announce(`move ${a}`)}function Cg(t,e){var r,n;let a=(r=e?.extend)!=null?r:!1;a||t.collapseSelection("backward");let s=()=>{var d,m;let y=!0;return t.silenceNotifications||(y=(m=(d=t.mathfield.host)==null?void 0:d.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))!=null?m:!0),t.announce(y?"line":"plonk"),y},o=t.at(t.position),c=o;for(;c&&c.parentBranch!=="below"&&!(Array.isArray(c.parentBranch)&&c.parent instanceof I);)c=c.parent;if(Array.isArray(c?.parentBranch)&&c.parent instanceof I){let d=c.parent;if(c.parentBranch[0]<1)return s();let m=c.parentBranch[0]-1,y=d.getCell(m,c.parentBranch[1]);if(!y.some(A=>A.type==="prompt"&&!A.captureSelection)&&t.mathfield.hasEditablePrompts)return s();ps(t,o,y,a,"up")}else if(c){let d=(n=c.parent.branch("above"))!=null?n:c.parent.createBranch("above");if(!d.some(m=>m.type==="prompt"&&m.placeholderId)&&t.mathfield.hasEditablePrompts)return s();ps(t,o,d,a,"up")}else return s();return t.mathfield.stopCoalescingUndo(),!0}function Eg(t,e){var r,n;let a=(r=e?.extend)!=null?r:!1;a||t.collapseSelection("forward");let s=()=>{var d,m;let y=!0;return t.silenceNotifications||(y=(m=(d=t.mathfield.host)==null?void 0:d.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))!=null?m:!0),t.announce(y?"line":"plonk"),y},o=t.at(t.position),c=o;for(;c&&c.parentBranch!=="above"&&!(We(c.parentBranch)&&c.parent instanceof I);)c=c.parent;if(We(c?.parentBranch)&&c.parent instanceof I){let d=c.parent;if(c.parentBranch[0]+1>d.rows.length-1)return s();let m=c.parentBranch[0]+1,y=d.getCell(m,c.parentBranch[1]);if(!y.some(A=>A.type==="prompt"&&!A.captureSelection)&&t.mathfield.hasEditablePrompts)return s();ps(t,o,y,a,"down")}else if(c){let d=(n=c.parent.branch("below"))!=null?n:c.parent.createBranch("below");if(!d.some(m=>m.type==="prompt")&&t.mathfield.hasEditablePrompts)return s();ps(t,o,d,a,"down")}else return s();return!0}function mc(t){let e=t.position,r=t.at(e).parent;return r!=null&&r.parent?(t.position=t.offsetOf(r),t.mathfield.stopCoalescingUndo(),t.announce("move",e),!0):(t.announce("plonk"),!1)}function Tg(t){let e=0,r=t.at(t.position),n=!1;for(;r;)(!r.hasEmptyBranch("superscript")||!r.hasEmptyBranch("subscript"))&&(e+=1),r.hasEmptyBranch("superscript")?r.hasEmptyBranch("subscript")||(n=!1):n=!0,r=r.parent;return n?e:0}function Dg(t){let e=0,r=t.at(t.position),n=!1;for(;r;)(!r.hasEmptyBranch("superscript")||!r.hasEmptyBranch("subscript"))&&(e+=1),r.hasEmptyBranch("superscript")?r.hasEmptyBranch("subscript")||(n=!0):n=!1,r=r.parent;return n?e:0}function Mp(t){var e;if(t.collapseSelection(),Tg(t)>=t.mathfield.options.scriptDepth[1])return t.announce("plonk"),!1;let r=t.at(t.position);return r.subsupPlacement===void 0&&(((e=r.rightSibling)==null?void 0:e.type)!=="subsup"&&r.parent.addChildAfter(new er({style:r.style}),r),r=r.rightSibling),r.createBranch("superscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(r.superscript[0]))),!0}function wp(t){var e;if(t.collapseSelection(),Dg(t)>=t.mathfield.options.scriptDepth[0])return t.announce("plonk"),!1;let r=t.at(t.position);return r.subsupPlacement===void 0&&(((e=t.at(t.position+1))==null?void 0:e.type)!=="subsup"&&r.parent.addChildAfter(new er({style:t.at(t.position).style}),r),r=t.at(t.position+1)),r.createBranch("subscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(r.subscript[0]))),!0}function Kg(){function t(d){let m=[],y=[];return[...d.querySelectorAll(`input, select, textarea, a[href], button,
        [tabindex], audio[controls], video[controls],
        [contenteditable]:not([contenteditable="false"]), details>summary`)].filter(e).forEach((A,P)=>{let Z=n(A);Z===0?m.push(A):y.push({documentOrder:P,tabIndex:Z,node:A})}),y.sort((A,P)=>A.tabIndex===P.tabIndex?A.documentOrder-P.documentOrder:A.tabIndex-P.tabIndex).map(A=>A.node).concat(m)}function e(d){return!(!r(d)||a(d)||n(d)<0)}function r(d){return!(d.disabled||d.type==="hidden"&&d.tagName.toUpperCase()==="INPUT"||c(d))}function n(d){var m;let y=Number.parseInt((m=d.getAttribute("tabindex"))!=null?m:"NaN",10);return Number.isNaN(y)?d.contentEditable==="true"||(d.nodeName==="AUDIO"||d.nodeName==="VIDEO")&&d.getAttribute("tabindex")===null?0:d.tabIndex:y}function a(d){return d.tagName.toUpperCase()==="INPUT"&&d.type==="radio"&&!o(d)}function s(d,m){for(let y of d)if(y.checked&&y.form===m)return y;return null}function o(d){var m;if(!d.name)return!0;let y=((m=d.form)!=null?m:d.ownerDocument).querySelectorAll('input[type="radio"][name="'+d.name+'"]'),A=s(y,d.form);return!A||A===d}function c(d){if(!Me()||d===document.activeElement||d.contains(document.activeElement))return!1;if(getComputedStyle(d).visibility==="hidden")return!0;let m=d.getBoundingClientRect();if(m.width===0||m.height===0)return!0;for(;d;){if(getComputedStyle(d).display==="none")return!0;d=d.parentElement}return!1}return Me()?t(document.body):[]}function Te(t,e,r="forward"){let n=t.position;if(Y(e)){let a=t.offsetOf(e[0]),s=t.offsetOf(e[e.length-1]);return r==="forward"?t.setSelection(a,s):t.setSelection(s,a),t.announce("move",n),t.mathfield.stopCoalescingUndo(),!0}return r==="forward"?Te(t,[e.leftSibling,e]):Te(t,[e,e.leftSibling])}function vt(t,e){let r=t.position;if(typeof e=="number"&&(e=t.at(e)),e.type==="prompt")t.setSelection(t.offsetOf(e.firstChild),t.offsetOf(e.lastChild));else{let n=t.offsetOf(e);e.type==="placeholder"?t.setSelection(n-1,n):t.position=n}return t.announce("move",r),t.mathfield.stopCoalescingUndo(),!0}function xn(t,e){var r,n;let a=e==="forward"?1:-1;t.at(t.anchor).type==="placeholder"&&ot(t,e);let s,o=t.at(t.anchor).parentPrompt;o?e==="forward"?s=t.offsetOf(o)+1:s=t.offsetOf(o.leftSibling):s=Math.max(t.position+a,0);let c=dc(t,s,e);if(!c||e==="forward"&&t.offsetOf(c)<s||e==="backward"&&t.offsetOf(c)>s){if(!((n=(r=t.mathfield.host)==null?void 0:r.dispatchEvent(new CustomEvent("move-out",{detail:{direction:e},cancelable:!0,bubbles:!0,composed:!0})))==null||n))return t.announce("plonk"),!1;let d=Kg();if(!document.activeElement||d.length<=1)return t.announce("plonk"),!1;let m=d.indexOf(document.activeElement)+a;return m<0&&(m=d.length-1),m>=d.length&&(m=0),d[m].focus(),t.mathfield.stopCoalescingUndo(),!0}return vt(t,c),!0}function dc(t,e=0,r="forward"){return t.findAtom(n=>n.type==="placeholder"||n.type==="prompt"||!t.mathfield.readOnly&&n.treeDepth>2&&n.isFirstSibling&&n.isLastSibling,e,r)}pe({moveToOpposite:t=>{let e={superscript:"subscript",subscript:"superscript",above:"below",below:"above"},r=t.at(t.position),{parent:n}=r;if(!n)return t.announce("plonk"),!1;let a=r.parentBranch,s;if(typeof a=="string"&&(s=e[a]),!s){let c=r.subsupPlacement?wp(t):Mp(t);return t.mathfield.stopCoalescingUndo(),c}n.branch(s)||n.createBranch(s);let o=t.setSelection(t.getBranchRange(t.offsetOf(n),s));return t.mathfield.stopCoalescingUndo(),o},moveBeforeParent:t=>{let{parent:e}=t.at(t.position);return e?(t.position=t.offsetOf(e),t.mathfield.stopCoalescingUndo(),!0):(t.announce("plonk"),!1)},moveAfterParent:t=>mc(t),moveToNextChar:t=>ot(t,"forward"),moveToPreviousChar:t=>ot(t,"backward"),moveUp:t=>ot(t,"upward"),moveDown:t=>ot(t,"downward"),moveToNextWord:t=>Ir(t,"forward"),moveToPreviousWord:t=>Ir(t,"backward"),moveToGroupStart:t=>{let e=t.offsetOf(t.at(t.position).firstSibling);return e===t.position?(t.announce("plonk"),!1):(t.position=e,t.mathfield.stopCoalescingUndo(),!0)},moveToGroupEnd:t=>{let e=t.offsetOf(t.at(t.position).lastSibling);return e===t.position?(t.announce("plonk"),!1):(t.position=e,t.mathfield.stopCoalescingUndo(),!0)},moveToNextGroup:t=>{var e,r,n,a;if(t.position===t.lastOffset&&t.anchor===t.lastOffset)return xn(t,"forward");let s=t.at(t.position);if(s.mode==="text"){if(t.selectionIsCollapsed){let A=s;for(;A&&A.mode==="text";)A=A.leftSibling;let P=s;for(;((e=P.rightSibling)==null?void 0:e.mode)==="text";)P=P.rightSibling;if(A&&P)return Te(t,[A,P])}if(s.rightSibling.mode==="text"){let A=s;for(;A&&A.mode==="text";)A=A.rightSibling;return A?(vt(t,(r=A.leftSibling)!=null?r:A),t.mathfield.switchMode("math"),!0):vt(t,t.lastOffset)}}let o=t.at(t.anchor).parentPrompt,c=o?t.offsetOf(o)+1:Math.max(t.position+1,0),d=dc(t,c,"forward");if(d&&t.offsetOf(d)<c)return xn(t,"forward");if(d)return vt(t,d);let m=kp(t,s,A=>A.type==="leftright"||A.type==="text","forward");if(m){if(m.mode==="text"){let A=m;for(;A&&A.mode==="text";)A=A.rightSibling;return Te(t,[(n=m.leftSibling)!=null?n:m,(a=A.leftSibling)!=null?a:A])}return Te(t,m)}let y=s.parent;if(y){if(y.type==="leftright"||y.type==="surd")return Te(t,y);if(s.parentBranch==="superscript"&&y.subscript)return Te(t,y.subscript);if(s.parentBranch==="above"&&y.below)return Te(t,y.below);if(s.parentBranch==="superscript"||s.parentBranch==="subscript")return vt(t,y);if(s.parentBranch==="above"||s.parentBranch==="below")return Te(t,y)}return vt(t,t.lastOffset)},moveToPreviousGroup:t=>{var e;if(t.position===0&&t.anchor===0)return xn(t,"backward");let r=t.at(t.position),n=r.mode;if(n==="text"){if(t.selectionIsCollapsed){let c=r;for(;c&&c.mode==="text";)c=c.leftSibling;let d=r;for(;((e=d.rightSibling)==null?void 0:e.mode)==="text";)d=d.rightSibling;if(c&&d)return Te(t,[c,d])}for(;r&&r.mode==="text";)r=r.leftSibling;return r?vt(t,r):vt(t,0)}let a=t.at(t.anchor).parentPrompt,s=a?t.offsetOf(a.leftSibling):Math.max(t.position-1,0),o=dc(t,s,"backward");if(o&&t.offsetOf(o)>s)return xn(t,"backward");if(o)return vt(t,o);if(n==="math"){let c=kp(t,r,m=>m.type==="leftright"||m.type==="text","backward");if(c){if(c.mode==="text"){let m=c;for(;m&&m.mode==="text";)m=m.leftSibling;return Te(t,[c,m])}return Te(t,c)}let d=r.parent;if(d){if(d.type==="leftright"||d.type==="surd")return Te(t,d);if(r.parentBranch==="subscript"&&d.superscript)return Te(t,d.superscript);if(r.parentBranch==="below"&&d.above)return Te(t,d.above);if(r.parentBranch==="superscript"||r.parentBranch==="subscript")return vt(t,d);if(r.parentBranch==="above"||r.parentBranch==="below")return Te(t,d)}return vt(t,0)}return!1},moveToMathfieldStart:t=>t.selectionIsCollapsed&&t.position===0?(t.announce("plonk"),!1):(t.position=0,t.mathfield.stopCoalescingUndo(),!0),moveToMathfieldEnd:t=>t.selectionIsCollapsed&&t.position===t.lastOffset?(t.announce("plonk"),!1):(t.position=t.lastOffset,t.mathfield.stopCoalescingUndo(),!0),moveToSuperscript:Mp,moveToSubscript:wp},{target:"model",changeSelection:!0});pe({moveToNextPlaceholder:t=>xn(t,"forward"),moveToPreviousPlaceholder:t=>xn(t,"backward")},{target:"model",changeSelection:!0,audioFeedback:"return"});function kp(t,e,r,n){if(n==="forward"){let s=e.rightSibling;for(;s&&!r(s);)s=s.rightSibling;return s}let a=e.leftSibling;for(;a&&!r(a);)a=a.leftSibling;return a}function fs(t,e,r){typeof e=="function"&&(r=e,e=1/0),e===void 0&&(e=1/0);let n=t.position,a=!1,s="";for(;!a;){let o=t.at(n);a=e===0||o===void 0||o.type==="first"||o.mode!=="math"||!(o.type&&/mord|mpunct|operator/.test(o.type)||o.type==="mop"&&/[a-zA-Z ]+/.test(o.value))||!o.hasEmptyBranch("superscript")||!o.hasEmptyBranch("subscript")||typeof r=="function"&&!r(o),a||(o.mode="text",o.command=o.value,o.verbatimLatex=void 0,s+=o.value),n-=1,e-=1}t.contentDidChange({data:s,inputType:"insertText"})}function bi(t,e,r){typeof e=="function"&&(r=e,e=1/0),e===void 0&&(e=1/0);let n=t.position,a=!1,s=[];for(;!a;){let o=t.at(n);a=e===0||!o||o.type==="first"||o.isFirstSibling||o.mode!=="text"||o.value===" "||typeof r=="function"&&!r(o),a||(s.push(b.serialize([o],{defaultMode:"math"})),o.mode="math"),n-=1,e-=1}gs(t),t.contentDidChange({data:R(s),inputType:"insertText"})}function gs(t){var e;let r=t.position-1;for(;r>=0&&((e=t.at(r))==null?void 0:e.mode)==="math";)r-=1;if(!(r<0)&&t.at(r).mode==="text"&&t.at(r).value===" "&&t.at(r-1).mode==="math"){t.at(r-1).parent.removeChild(t.at(r-1));let n=t.silenceNotifications;t.silenceNotifications=!0,t.position-=1,t.silenceNotifications=n,t.contentDidChange({inputType:"deleteContent"})}}function Og(t){let e="",r=t.position,n=!1;for(;!n;){let a=t.at(r);n=!(a&&(a.mode==="text"||a.mode==="math"&&a.type&&/mord|mpunct/.test(a.type))),n||(e=a.value+e),r-=1}return e}function Sp(t,e,r){let{model:n}=t;if(n.mode==="latex"||!n.at(n.position).isLastSibling||!r||!Kr(r))return!1;let a=Or(r);if(!n.selectionIsCollapsed)return!!(t.model.mode==="text"&&/[/_^]/.test(a));let s=Og(n)+a;if(t.model.mode==="text"){if(e==="Esc"||/[/\\]/.test(a))return!0;if(/[\^_]/.test(a))return/(^|\s)[a-zA-Z][^_]$/.test(s)&&bi(n,1),!0;let o={")":"(","}":"{","]":"["}[a],{parent:c}=n.at(n.position);if(o&&c instanceof G&&c.leftDelim===o)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(s))return!1;if(/[$€£₤₺¥¤฿¢₡₧₨₹₩₱]/u.test(a))return!0;if(/(^|[^a-zA-Z'’])[a-zA-Z] $/.test(s))return bi(n,1),!1;if(/\D\.[^\d\s]$/.test(s)){bi(n,1);let d=n.at(n.position);return d.value="⋅",d.style.variant="normal",d.command="\\cdot",d.verbatimLatex=void 0,n.contentDidChange({data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(s)||/\.\d$/.test(s)||/\([\d+\-.]$/.test(s))return bi(n,1),!0;if(/\([a-z][,;]$/.test(s))return bi(n,2),!0;if(/[\d+\-=><*|]$/.test(a))return gs(n),!0}else{if(e==="[Space]")return fs(n,void 0,o=>/[a-z][:,;.]$/.test(o.value)),!0;if(/[a-zA-Z]{3,}$/.test(s)&&!/(dxd|abc|xyz|uvw)$/.test(s))return fs(n,void 0,o=>/[a-zA-Z]/.test(o.value)),!0;if(/(^|\W)(if)$/i.test(s))return fs(n,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(s)&&!/(αβγ)$/.test(s))return fs(n,void 0,o=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(o.value)),!0;if(a==="?"||a==="."&&!/[\d-+]\.$/.test(s))return!0}return!1}function Lp(t,e){if(!t.isSelectionEditable||!t.keystrokeCaptionVisible)return;let r=Cp(),n=t.element.getBoundingClientRect();r.style.left=`${n.left}px`,r.style.top=`${n.top-64}px`,r.innerHTML=globalThis.MathfieldElement.createHTML("<span>"+(cn(e)||e)+"</span>"+r.innerHTML),r.style.visibility="visible",setTimeout(()=>{r.childNodes.length>0&&r.childNodes[r.childNodes.length-1].remove(),r.childNodes.length===0&&(r.style.visibility="hidden")},3e3)}function Ap(t){if(t.keystrokeCaptionVisible=!t.keystrokeCaptionVisible,t.keystrokeCaptionVisible){let e=Cp();e.innerHTML=""}else{let e=mi("mathlive-keystroke-caption-panel");e.style.visibility="hidden"}return!1}function Cp(){return document.getElementById("mathlive-keystroke-caption-panel")||(Ve("keystroke-caption"),Ve("core"),mi("mathlive-keystroke-caption-panel"))}function Ep(){document.getElementById("mathlive-keystroke-caption-panel")&&(Pr("mathlive-keystroke-caption-panel"),it("core"),it("keystroke-caption"))}function fc(t,e){var r,n,a,s;let{model:o}=t,c=Qa(e);if(e.isTrusted){Zm(e);let _e=Dr();t.keyboardLayout!==_e.id&&(t.keyboardLayout=_e.id,t._keybindings=void 0)}if(clearTimeout(t.inlineShortcutBufferFlushTimer),t.inlineShortcutBufferFlushTimer=0,Lp(t,c),e.isTrusted&&e.defaultPrevented)return t.flushInlineShortcutBuffer(),!1;let d,m=0,y="",A=0,P=t.inlineShortcutBuffer;if(t.isSelectionEditable){if(o.mode==="math")if(c==="[Backspace]")t.undoManager.lastOp==="insert-shortcut"?y="undo":P.pop();else if(!Kr(e))t.flushInlineShortcutBuffer();else{let _e=Or(e),Ge=[...(n=(r=P[P.length-1])==null?void 0:r.keystrokes)!=null?n:[],_e];P.push({state:o.getState(),keystrokes:Ge,leftSiblings:Bg(t)}),m=0;let ve="";for(;!d&&m<Ge.length;)A=P.length-(Ge.length-m),ve=Ge.slice(m).join(""),d=Gn(P[A].leftSiblings,ve,t.options.inlineShortcuts),!d&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(ve)&&(d=t.options.onInlineShortcut(t,ve)),m+=1;t.flushInlineShortcutBuffer({defer:!0})}t.options.smartMode&&(d?t.switchMode("math"):Sp(t,c,e)&&(t.switchMode({math:"text",text:"math"}[o.mode]),y=""))}if(!d){if(y||(y=ip(t.keybindings,o.mode,e)),!y&&(c==="[Enter]"||c==="[Return]")){let _e=!0;return o.contentWillChange({inputType:"insertLineBreak"})&&(t.host&&(_e=t.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),!_e&&e.preventDefault?(e.preventDefault(),e.stopPropagation()):((a=o.parentEnvironment)!=null&&a.isMultiline&&t.executeCommand("addRowAfter"),o.contentDidChange({inputType:"insertLineBreak"}))),_e}if((!y||c==="[Space]")&&o.mode==="math"){if(c==="[Space]"){if(t.styleBias="none",t.flushInlineShortcutBuffer(),t.options.mathModeSpace)return V.insert(o,t.options.mathModeSpace,{format:"latex",mode:"math"}),t.snapshot("insert-space"),y="",t.dirty=!0,t.scrollIntoView(),e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1;let _e=o.at(o.position+1),Ge=o.at(o.position-1);if(_e?.mode==="text"||Ge?.mode==="text")return V.insert(o," ",{mode:"text"}),t.snapshot("insert-space"),t.dirty=!0,t.scrollIntoView(),!1}(s=o.at(o.position))!=null&&s.isDigit()&&globalThis.MathfieldElement.decimalSeparator===","&&Or(e)===","&&(y="insertDecimalSeparator")}}if(!d&&!y){if(o.mathfield.smartFence){if(hc(o,Or(e),rr(t)))return t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}else{let{parent:_e}=o.at(o.position);if(_e instanceof G&&_e.rightDelim==="?"&&o.at(o.position).isLastSibling&&/^[)}\]|]$/.test(c))return t.snapshot(),_e.isDirty=!0,_e.rightDelim=c,o.position+=1,o.selectionDidChange(),o.contentDidChange({data:Or(e),inputType:"insertText"}),t.snapshot("insert-fence"),t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1;if(!o.selectionIsCollapsed){let Ge=Or(e);if(Ge==="("||Ge==="{"||Ge==="["){let ve={"(":"(","{":"\\lbrace","[":"\\lbrack"}[Ge],He={"(":")","{":"\\rbrace","[":"\\rbrack"}[Ge],[De,Xe]=le(o.selection);return t.snapshot(),o.position=Xe,V.insert(o,He,{format:"latex"}),o.position=De,V.insert(o,ve,{format:"latex"}),o.setSelection(De+1,Xe+1),o.contentDidChange({data:Ge,inputType:"insertText"}),t.snapshot("insert-fence"),t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}}}return!0}let Z=o.at(Math.max(o.position,o.anchor)),{parent:me}=Z;if(y==="moveAfterParent"&&me?.type==="leftright"&&Z.isLastSibling&&t.options.smartFence&&hc(o,".",t.defaultStyle)&&(y="",U(t)),t.keyboardDelegate.cancelComposition(),y)t.executeCommand(y);else if(d){let _e=rr(t);o.setState(P[A].state);let Ge=P[P.length-1].keystrokes;Ge=Ge.slice(m-1);for(let ve of Ge)V.insert(o,ve,{silenceNotifications:!0,style:_e});t.snapshot("insert-shortcut"),o.setState(P[A].state),o.deferNotifications({content:!0,selection:!0,data:d,type:"insertText"},()=>(V.insert(o,d,{format:"latex",style:_e}),gs(t.model),d.endsWith(" ")&&(t.switchMode("text"),V.insert(o," ",{style:_e,mode:"text"})),t.snapshot(),o.selectionIsCollapsed||t.flushInlineShortcutBuffer(),!0)),t.dirty=!0,o.announce("replacement")}return t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}function bo(t,e,r){let{model:n}=t;if(!t.isSelectionEditable){n.announce("plonk");return}r!=null||(r={}),r.focus&&t.focus(),r.feedback&&globalThis.MathfieldElement.playSound("keypress"),typeof r.mode=="string"&&(t.switchMode(r.mode),t.snapshot());let a=Ta(e),s=window.mathVirtualKeyboard;if(s!=null&&s.isShifted&&(a=typeof a=="string"?a.toUpperCase():a.map(o=>o.toUpperCase())),r.simulateKeystroke){let o=!0;for(let c of a)fc(t,new KeyboardEvent("keypress",{key:c}))&&(o=!1);if(o)return}if(n.mode==="latex")n.deferNotifications({content:!0,selection:!0,data:e,type:"insertText"},()=>{di(t);for(let o of a)V.insert(n,o,{insertionMode:"replaceSelection"});t.snapshot("insert-latex"),Rr(t)});else if(n.mode==="text"){let o=p(p({},Pg(n)),t.defaultStyle);for(let c of a)V.insert(n,c,{style:o,insertionMode:"replaceSelection"});t.snapshot("insert-text")}else if(n.mode==="math")for(let o of a)Rg(t,o);t.dirty=!0,t.scrollIntoView()}function Bg(t){let e=t.model,r=[],n=e.at(Math.min(e.position,e.anchor));for(;n.type!=="first";)r.push(n),n=n.leftSibling;return r}function Rg(t,e){let r=t.model,n={"^":"moveToSuperscript",_:"moveToSubscript"," ":t.options.mathModeSpace?["insert",t.options.mathModeSpace]:"moveAfterParent"}[e];if(n){t.executeCommand(n);return}let a=p({},rr(t));!/[a-zA-Z0-9]/.test(e)&&t.styleBias!=="none"&&(a.variant="normal",a.variantStyle=void 0);let s=r.at(r.position);if(/\d/.test(e)&&t.options.smartSuperscript&&s.parentBranch==="superscript"&&s.parent.type!=="mop"&&s.parent.type!=="operator"&&s.parent.type!=="extensible-symbol"&&s.hasNoSiblings){if(!V.insert(r,e,{style:a,insertionMode:"replaceSelection"})){t.undoManager.pop();return}t.snapshot("insert-mord"),mc(r);return}let o=e;o==="{"?o="\\lbrace":o==="}"?o="\\rbrace":o==="&"?o="\\&":o==="#"?o="\\#":o==="$"?o="\\$":o==="%"?o="\\%":o==="~"?o="\\~":o==="\\"&&(o="\\backslash"),V.insert(r,o,{style:a,insertionMode:"replaceSelection"})&&t.snapshot(`insert-${r.at(r.position).type}`)}function Pg(t){var e,r,n,a;if(t.selectionIsCollapsed)return(r=(e=t.at(t.position))==null?void 0:e.style)!=null?r:{};let s=le(t.selection)[0];return(a=(n=t.at(s+1))==null?void 0:n.style)!=null?a:{}}function hc(t,e,r){var n;if(!e||t.mode!=="math")return!1;let a=t.at(t.position),{parent:s}=a,o={"(":"(",")":")","{":"\\lbrace","}":"\\rbrace","[":"\\lbrack","]":"\\rbrack","|":"|"}[e];if(!o)return!1;let c=Zi[o],d=Xi[o];if(!t.selectionIsCollapsed){t.mathfield.snapshot();let[m,y]=le(t.selection),A=t.extractAtoms([m,y]),P=s.addChildrenAfter([new G("left...right",A,{leftDelim:o,rightDelim:d})],t.at(m));return t.setSelection(t.offsetOf(P.firstChild),t.offsetOf(P.lastChild)),t.mathfield.snapshot("insert-fence"),t.contentDidChange({data:o,inputType:"insertText"}),!0}if(o==="|"){let m=s instanceof G?s.leftDelim+s.rightDelim:"";if(m==="\\lbrace\\rbrace"||m==="\\{\\}"||m==="\\lbrace?")return t.mathfield.snapshot(),V.insert(t,"\\,\\middle\\vert\\,",{format:"latex",style:r}),t.mathfield.snapshot("insert-fence"),t.contentDidChange({data:o,inputType:"insertText"}),!0}if(d){if(s instanceof G&&s.firstChild===a&&(s.leftDelim==="?"||s.leftDelim==="."))return s.leftDelim=o,s.isDirty=!0,t.mathfield.snapshot(),t.contentDidChange({data:o,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;if(!(s instanceof G)){let P=a;for(;P&&!(P.type==="mclose"&&P.value===d);)P=P.rightSibling;if(P){t.mathfield.snapshot();let Z=t.extractAtoms([t.offsetOf(a),t.offsetOf(P)]);return Z.pop(),s.addChildrenAfter([new G("left...right",Z,{leftDelim:o,rightDelim:d})],a),t.position=t.offsetOf(s.firstChild)+1,t.contentDidChange({data:o,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}}let m=t.offsetOf(a.lastSibling),y;for(y=t.position;y<=m;y++){let P=t.at(y);if(P instanceof G&&(P.leftDelim==="?"||P.leftDelim===".")&&Tp(o,P.rightDelim))break}let A=t.at(y);if(y<=m&&A instanceof G){A.leftDelim=o,t.mathfield.snapshot();let P=t.extractAtoms([t.position,y-1]);return P=P.filter(Z=>Z.type!=="first"),A.addChildren(P,A.parentBranch),t.position+=1,t.contentDidChange({data:o,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}if(s instanceof G&&(s.leftDelim==="?"||s.leftDelim===".")&&Tp(o,s.rightDelim)){s.isDirty=!0,s.leftDelim=o,t.mathfield.snapshot();let P=t.extractAtoms([t.offsetOf(a.firstSibling),t.position]);for(let Z of P)s.parent.addChildBefore(Z,s);return t.contentDidChange({data:o,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}if(!(s instanceof G&&s.leftDelim==="|")){if(o==="("){let P=t.position-1,Z=!1;for(;P>=0;){let me=t.at(P);if(me.type==="first")break;if(me.type==="mord"&&me.value&&/^[\d]$/.test(me.value)){P-=1;continue}if(me.type==="group"&&((n=me.body)==null?void 0:n.length)===2&&me.body[0].type==="first"&&me.body[1].value===","){Z=!0;break}if(me.type==="mord"&&(me.value===","||me.value===".")){Z=!0;break}break}if(Z)return!1}if(t.mathfield.snapshot(),V.insert(t,`\\left${o}\\right?`,{format:"latex",style:r}),a.lastSibling.type!=="first"){let P=t.offsetOf(a.lastSibling),Z=t.extractAtoms([t.position,P]);t.at(t.position).body=Z,t.position-=1}return t.mathfield.snapshot("insert-fence"),!0}}if(c){if(o===")"){let me=t.position-1,_e=!1;for(;me>=0;){let Ge=t.at(me);if(Ge.type==="first")break;if(Ge.type==="mord"&&Ge.value&&/^[\d]$/.test(Ge.value)){_e=!0,me-=1;continue}break}if(_e&&t.at(me).type==="mopen"&&t.at(me).value==="(")return!1}let m=a;for(;m;){if(m.type==="mopen"&&m.value===c){t.mathfield.snapshot();let me=m.leftSibling,_e=t.extractAtoms([t.offsetOf(m.leftSibling),t.offsetOf(a)]);[,..._e]=_e;let Ge=new G("left...right",_e,{leftDelim:c,rightDelim:o});return s.addChildrenAfter([Ge],me),t.position=t.offsetOf(Ge),t.contentDidChange({data:o,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}m=m.leftSibling}if(s instanceof G&&a.isLastSibling&&pc(s.leftDelim,o))return t.mathfield.snapshot(),s.isDirty=!0,s.rightDelim=o,t.position+=1,t.contentDidChange({data:o,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;let y=t.offsetOf(a.firstSibling),A;for(A=t.position;A>=y;A--){let me=t.at(A);if(me instanceof G&&(me.rightDelim==="?"||me.rightDelim===".")&&pc(me.leftDelim,o))break}let P=t.at(A);if(A>=y&&P instanceof G)return t.mathfield.snapshot(),P.rightDelim=o,P.addChildren(t.extractAtoms([A,t.position]),P.parentBranch),t.contentDidChange({data:o,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;if(s instanceof G&&(s.rightDelim==="?"||s.rightDelim===".")&&pc(s.leftDelim,o))return t.mathfield.snapshot(),s.isDirty=!0,s.rightDelim=o,s.parent.addChildren(t.extractAtoms([t.position,t.offsetOf(a.lastSibling)]),s.parentBranch),t.position=t.offsetOf(s),t.contentDidChange({data:o,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;let Z=s.parent;return Z instanceof G&&(Z.rightDelim==="?"||Z.rightDelim===".")&&t.at(t.position).isLastSibling?(t.position=t.offsetOf(Z),hc(t,o,r)):!1}return!1}function pc(t,e){return t?["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(t)?[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(e):Xi[t]===e:!0}function Tp(t,e){return e?[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(e)?["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(t):Zi[e]===t:!0}pe({undo:t=>(t.undo(),!0),redo:t=>(t.redo(),!0),scrollIntoView:t=>(t.scrollIntoView(),!0),scrollToStart:t=>(t.field.scroll(0,0),!0),scrollToEnd:t=>{let e=t.field.getBoundingClientRect();return t.field.scroll(e.left-window.scrollX,0),!0},toggleKeystrokeCaption:Ap,toggleContextMenu:t=>{let e=t.toggleContextMenu();return e||t.model.announce("plonk"),e},plonk:t=>(t.model.announce("plonk"),!0),switchMode:(t,e,r,n)=>(t.switchMode(e,r,n),!0),insert:(t,e,r)=>t.insert(e,r),typedText:(t,e,r)=>(bo(t,e,r),!0),insertDecimalSeparator:t=>{let e=t.model;return e.mode==="math"&&globalThis.MathfieldElement.decimalSeparator===","&&e.at(Math.max(e.position,e.anchor)).isDigit()?(t.insert("{,}",{format:"latex"}),t.snapshot("insert-mord"),!0):(t.insert("."),!0)},commit:t=>{var e,r;let n=t.model;return n.contentWillChange({inputType:"insertLineBreak"})&&((e=t.host)==null||e.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),(r=n.parentEnvironment)!=null&&r.isMultiline&&t.executeCommand("addRowAfter"),n.contentDidChange({inputType:"insertLineBreak"})),!0},insertPrompt:(t,e,r)=>{let n=t.getPrompts(),a="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36),s=0;for(;n.includes(a)&&s<100;){if(s===99)return console.error("could not find a unique ID after 100 tries"),!1;a="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36),s++}return t.insert(`\\placeholder[${e??a}]{}`,r),!0}});pe({copyToClipboard:t=>(t.focus(),t.model.selectionIsCollapsed&&t.select(),"queryCommandSupported"in document&&document.queryCommandSupported("copy")&&document.execCommand("copy")||t.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1)},{target:"mathfield"});pe({cutToClipboard:t=>(t.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("cut")&&document.execCommand("cut")||t.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:t=>(t.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("paste")?(document.execCommand("paste"),!0):(navigator.clipboard.readText().then(e=>{e&&t.model.contentWillChange({inputType:"insertFromPaste",data:e})?(t.stopCoalescingUndo(),t.stopRecording(),t.insert(e,{mode:t.model.mode})&&(Rr(t),t.startRecording(),t.snapshot("paste"),t.model.contentDidChange({inputType:"insertFromPaste"}),U(t))):t.model.announce("plonk"),t.startRecording()}),!0))},{target:"mathfield",canUndo:!0,changeContent:!0,changeSelection:!0});function bs(t){let[e,r]=le(t.selection);if(e=Dp(t,e,"backward"),r=Dp(t,r,"forward"),e===r){let n=t.at(e);if(n.type==="leftright")return t.setSelection(t.offsetOf(n.firstChild)-1,r);if(n.type==="first"&&(n.parent.type==="leftright"||n.parent.type==="surd"))return t.setSelection(e-1,t.offsetOf(n.parent.lastChild)+1);t.setSelection(e-1,r)}else t.setSelection(e,r);return!0}function Dp(t,e,r){var n,a,s;let o=t.at(e);if(!o)return e;let c=r==="forward"?1:-1;if(o.mode==="text"){for(;o&&!(o.mode!=="text"||!Wr.test(o.value));)e+=c,o=t.at(e);return r==="backward"?e-1:e}if(o.mode==="latex"){if(/[a-zA-Z\*]/.test(o.value))if(r==="backward")for(;o&&o.mode==="latex"&&o.value!=="\\"&&/[a-zA-Z]/.test(o.value);)e+=c,o=t.at(e);else for(;o&&o.mode==="latex"&&/[a-zA-Z\*]/.test(o.value);)e+=c,o=t.at(e);else if(o.value==="{"){if(r==="forward"){for(;o&&o.mode==="latex"&&o.value!=="}";)e+=c,o=t.at(e);return e}return e-1}else if(o.value==="}"){if(r==="backward"){for(;o&&o.mode==="latex"&&o.value!=="{";)e+=c,o=t.at(e);return e-1}return e}return e-1}if(o.mode==="math"){if(o.isDigit()){for(;(n=t.at(e+c))!=null&&n.isDigit();)e+=c;return r==="backward"?e-1:e}if(o.style.variant||o.style.variantStyle){let d=(a=t.at(e))==null?void 0:a.style;for(;d&&d.variant===o.style.variant&&d.variantStyle===o.style.variantStyle;)d=(s=t.at(e+c))==null?void 0:s.style,e+=c;return r==="backward"?e-1:e}return e}return e}pe({selectGroup:t=>{let e=bs(t);return e||t.announce("plonk"),e},selectAll:t=>t.setSelection(0,t.lastOffset),extendSelectionForward:t=>ot(t,"forward",{extend:!0}),extendSelectionBackward:t=>ot(t,"backward",{extend:!0}),extendToNextWord:t=>Ir(t,"forward",{extend:!0}),extendToPreviousWord:t=>Ir(t,"backward",{extend:!0}),extendSelectionUpward:t=>ot(t,"upward",{extend:!0}),extendSelectionDownward:t=>ot(t,"downward",{extend:!0}),extendToNextBoundary:t=>Ir(t,"forward",{extend:!0}),extendToPreviousBoundary:t=>Ir(t,"backward",{extend:!0}),extendToGroupStart:t=>{let e=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).firstSibling));return e||t.announce("plonk"),e},extendToGroupEnd:t=>{let e=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).lastSibling));return e||t.announce("plonk"),e},extendToMathFieldStart:t=>{let e=t.setSelection(t.anchor,0);return e||t.announce("plonk"),e},extendToMathFieldEnd:t=>{let e=t.setSelection(t.anchor,t.lastOffset);return e||t.announce("plonk"),e}},{target:"model",changeSelection:!0});var yi=null,yo=0,xi=class Mv{static start(e,r,n,a){var s;Mv.element=e,(s=Mv.controller)==null||s.abort(),Mv.controller=new AbortController;let o={signal:Mv.controller.signal};"PointerEvent"in window?(e.addEventListener("pointermove",n,o),e.addEventListener("pointerup",a,o),e.addEventListener("pointercancel",a,o),gc(r)&&(Mv.pointerId=r.pointerId,e.setPointerCapture(r.pointerId))):(window.addEventListener("mousemove",n,o),window.addEventListener("blur",a,o),window.addEventListener("mouseup",a,o))}static stop(){var e;(e=Mv.controller)==null||e.abort(),Mv.controller=void 0,typeof Mv.pointerId=="number"&&(Mv.element.releasePointerCapture(Mv.pointerId),Mv.pointerId=void 0)}};function gc(t){return t!==null&&globalThis.PointerEvent!==void 0&&t instanceof PointerEvent}function yc(t,e){var r;if(e.buttons>1)return;t.atomBoundsCache=new Map;let n=t,a,s=!1,o=!1,c="none",d=!1,m=!1,y=e.clientX,A=e.clientY,P=Date.now(),Z=n.field,me=setInterval(()=>{d?Z.scroll({top:0,left:Z.scrollLeft-16}):m&&Z.scroll({top:0,left:Z.scrollLeft+16})},32);function _e(){xi.stop(),s=!1,clearInterval(me),t.element.classList.remove("tracking"),e&&e.preventDefault()}function Ge(He){if(!n.hasFocus()){_e();return}let De=He.clientX,Xe=He.clientY,Bs=gc(He)&&He.pointerType==="touch"?20:5;if(Date.now()<P+500&&Math.abs(y-De)<Bs&&Math.abs(A-Xe)<Bs){He.preventDefault(),He.stopPropagation();return}let wt=Z.getBoundingClientRect();m=De>wt.right,d=De<wt.left;let li=a;gc(He)&&(He.isPrimary||(li=xo(n,He.clientX,He.clientY,{bias:0})));let An=xo(n,De,Xe,{bias:De<=y?De===y?0:-1:1});li>=0&&An>=0&&(n.model.extendSelectionTo(li,An),U(t)),o&&bs(n.model)}yi&&Math.abs(yi.x-y)<5&&Math.abs(yi.y-A)<5&&Date.now()<yi.time+500?(yo+=1,yi.time=P):(yi={x:y,y:A,time:P},yo=1);let ve=Z.getBoundingClientRect();if(y>=ve.left&&y<=ve.right&&A>=ve.top&&A<=ve.bottom){if(t.flushInlineShortcutBuffer(),a=xo(t,y,A,{bias:0}),a!==t.model.anchor&&(t.defaultStyle={},t.styleBias="left"),a>=0){if(t.element.classList.add("tracking"),e.shiftKey){let He=t.model.selectionIsCollapsed;t.model.extendSelectionTo(t.model.anchor,a),Zl(t.model)||He?c="all":c="selection"}else t.model.at(a).type==="placeholder"?(t.model.setSelection(a-1,a),c="selection"):((r=t.model.at(a).rightSibling)==null?void 0:r.type)==="placeholder"?(t.model.setSelection(a,a+1),c="selection"):(t.model.position=a,Zl(t.model)?c="all":c="selection");e.detail===3||yo>2?(_e(),(e.detail===3||yo===3)&&(t.model.selection={ranges:[[0,t.model.lastOffset]]},c="all")):s||(s=!0,xi.start(Z,e,Ge,_e),(e.detail===2||yo===2)&&(o=!0,bs(t.model),c="all"))}t.hasFocus()||(c="none",t.focus({preventScroll:!0}))}else yi=null;t.stopCoalescingUndo(),c!=="none"&&(t.model.selectionIsCollapsed&&(c="all"),U(t)),e.preventDefault()}function zg(t,e,r){if(t>=r.left&&t<=r.right&&e>=r.top&&e<=r.bottom)return 0;let n=t-(r.left+r.right)/2,a=e-(r.top+r.bottom)/2;return n*n+a*a}function bc(t,e,r,n,a){if(!r.id)return[1/0,null];if(e.has(r.id))return e.get(r.id);let s=Ar(t,r);if(!s)return[1/0,null];let o=[1/0,null],c=t.model;if(r instanceof I)for(let d of r.rows)for(let m of d){let y=[c.offsetOf(m[0]),c.offsetOf(m[m.length-1])],A=hm(t,y);if(a>=A.top&&a<=A.bottom)for(let P of m){let Z=bc(t,e,P,n,a);Z[0]<=o[0]&&(o=Z)}}else if(r.hasChildren&&!r.captureSelection&&n>=s.left&&n<=s.right){let d=r.children;for(let m of d){let y=bc(t,e,m,n,a);y[0]<=o[0]&&(o=y)}}return o[1]||(o=[zg(n,a,s),r]),e.set(r.id,o),o}function Ig(t,e,r){let[,n]=bc(t,new Map,t.model.root,e,r);return n}function xo(t,e,r,n){var a;let s=t.field.querySelector(".ML__latex").getBoundingClientRect();if(!s)return 0;if(e>s.right||r>s.bottom+8)return t.model.lastOffset;if(e<s.left||r<s.top-8)return 0;n=n??{},n.bias=(a=n.bias)!=null?a:0;let o=Ig(t,e,r),c=[],d=o;for(;d;)c.unshift(d),d=d.parent;for(let y of c)if(y.captureSelection){o=y;break}let m=t.model.offsetOf(o);if(m<0)return-1;if(o.leftSibling)if(n.bias===0&&o.type!=="placeholder"){let y=Ar(t,o);y&&e<(y.left+y.right)/2&&(m=t.model.offsetOf(o.leftSibling))}else n.bias<0&&(m=t.model.offsetOf(o.leftSibling));return m}var xc=class extends V{constructor(){super("math")}onPaste(t,e){if(!e||!t.model.contentWillChange({data:typeof e=="string"?e:null,dataTransfer:typeof e=="string"?null:e,inputType:"insertFromPaste"}))return!1;let r="",n="auto",a=typeof e!="string"?e.getData("application/json+mathlive"):"";if(a)try{let s=JSON.parse(a);if(s&&Array.isArray(s)){t.snapshot();let o=ft(s),{model:c}=t;c.selectionIsCollapsed||c.deleteAtoms(le(c.selection));let d=c.at(c.position);if(d.parent instanceof I){d.parentBranch;let m=[],y=[];o[0].type==="first"&&o.shift(),o[o.length-1].type==="first"&&o.pop();for(let me of o)me.type==="first"&&y.length>0?(m.push(y),y=[me]):y.push(me);y.length>0&&m.push(y);let A=Number(d.parentBranch[0]),P=Number(d.parentBranch[1]),Z=d.parent.maxColumns;for(;d.parent.colCount-P<m.length&&d.parent.colCount<Z;)d.parent.addColumn();d.parent.addChildrenAfter(m[0],d);for(let me=1;me<m.length;me++)P++,P>=Z&&(P=0,d.parent.addRowAfter(A),A++),d.parent.setCell(A,P,m[me])}else d.parent.addChildrenAfter(o.filter(m=>m.type!=="first"),d);return c.position=c.offsetOf(o[o.length-1]),c.contentDidChange({inputType:"insertFromPaste"}),U(t),!0}}catch{}if(a=typeof e!="string"?e.getData("application/json"):"",a&&globalThis.MathfieldElement.computeEngine)try{let s=JSON.parse(a);if(typeof s=="object"&&"latex"in s&&s.latex&&(r=s.latex),!r){let o=globalThis.MathfieldElement.computeEngine.box(s);o&&!o.has("Error")&&(r=o.latex)}r||(n="latex")}catch{}if(!r&&typeof e!="string"&&(r=e.getData("application/x-latex"),r&&(n="latex")),r||(r=typeof e=="string"?e:e.getData("text/plain")),r){let s;return[s,r]=Ia(r),n==="auto"&&s&&(n="latex"),t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,r,{format:n})&&(t.startRecording(),t.snapshot("paste"),U(t)),t.startRecording(),!0}return!1}insert(t,e,r){var n,a;let s=typeof e=="string"?e:(a=(n=globalThis.MathfieldElement.computeEngine)==null?void 0:n.box(e).latex)!=null?a:"";if(!r.silenceNotifications&&!t.contentWillChange({data:s,inputType:"insertText"}))return!1;r.insertionMode||(r.insertionMode="replaceSelection"),r.selectionMode||(r.selectionMode="placeholder"),r.format||(r.format="auto");let{silenceNotifications:o}=t;r.silenceNotifications&&(t.silenceNotifications=!0);let c=t.silenceNotifications;t.silenceNotifications=!0;let d={"?":"\\placeholder{}","@":"\\placeholder{}"};d[0]=r.insertionMode==="replaceAll"?"":t.getValue(t.selection,"latex-unstyled"),r.insertionMode==="replaceSelection"?t.deleteAtoms(le(t.selection)):r.insertionMode==="replaceAll"?t.deleteAtoms():r.insertionMode==="insertBefore"?t.collapseSelection("backward"):r.insertionMode==="insertAfter"&&t.collapseSelection("forward"),!t.at(t.position).isLastSibling&&t.at(t.position+1).type==="placeholder"?t.deleteAtoms([t.position,t.position+1]):t.at(t.position).type==="placeholder"&&t.deleteAtoms([t.position-1,t.position]);let m=-1;d[0]?d["@"]=d[0]:typeof e=="string"&&/(^|[^\\])#@/.test(e)&&(m=Ng(t),m>=0&&(d["@"]=t.getValue(m,t.position,"latex"))),d[0]||(d[0]=d["?"]);let y=!1,A=Ge=>(y=!0,d[Ge]),[P,Z]=Kp(t,e,A,r);if(!Z)return!1;let me=Z.length===1&&Z[0].type==="genfrac";if(me&&m>=0&&typeof t.mathfield.options.isImplicitFunction=="function"&&t.mathfield.options.isImplicitFunction(t.at(t.position).command)?(d["@"]=d["?"],y=!1,[P,Z]=Kp(t,e,A,r)):m>=0&&t.deleteAtoms([m,t.position]),Z.length===1&&Z[0].isRoot)t.root=Z[0];else{let{parent:Ge}=t.at(t.position),ve=Ge.hasEmptyBranch("body");if(me&&P!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&Ge instanceof G&&Ge.leftDelim==="("&&ve){let De=Ge.parent,Xe=Ge.parentBranch;De.removeChild(Ge),De.setChildren(Z,Xe)}let He=t.at(t.position);He.parent.addChildrenAfter(Z,He),P==="latex"&&typeof e=="string"&&Ge?.type==="root"&&ve&&!y&&(Ge.verbatimLatex=e)}t.silenceNotifications=c;let _e=Z[Z.length-1];if(r.selectionMode==="placeholder"){let Ge=Z.flatMap(ve=>[ve,...ve.children]).find(ve=>ve.type==="placeholder");if(Ge){let ve=t.offsetOf(Ge);t.setSelection(ve-1,ve),t.announce("move")}else if(_e){let ve=_e.body,He=_e.hasEmptyBranch("body");ve&&He?t.setSelection(t.offsetOf(ve[0]),t.offsetOf(ve[ve.length-1])+1):t.position=t.offsetOf(_e)}}else r.selectionMode==="before"||(r.selectionMode==="after"?_e&&(t.position=t.offsetOf(_e)):r.selectionMode==="item"&&t.setSelection(t.anchor,t.offsetOf(_e)));return t.contentDidChange({data:s,inputType:"insertText"}),t.silenceNotifications=o,!0}};function Kp(t,e,r,n){var a;let s,o=[];if(typeof e!="string"||n.format==="math-json"){let c=globalThis.MathfieldElement.computeEngine;if(!c)return["math-json",[]];[s,e]=["latex",c.box(e).latex],o=he(e,{context:t.mathfield.context})}else typeof e=="string"&&n.format==="ascii-math"?([s,e]=Yt(e,{format:"ascii-math",inlineShortcuts:t.mathfield.options.inlineShortcuts}),o=he(e,{context:t.mathfield.context}),s!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&(o=o.map(c=>ys(c)))):(n.format==="auto"||(a=n.format)!=null&&a.startsWith("latex"))&&(n.format==="auto"&&([s,e]=Yt(e,{format:"auto",inlineShortcuts:t.mathfield.options.inlineShortcuts})),n.format==="latex"&&([,e]=Ia(e)),o=he(e,{context:t.mathfield.context,args:r}),n.format!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&(o=o.map(c=>ys(c))));return Qn(o,n.style),[s??"latex",o]}function ys(t){var e;if(t instanceof G&&t.leftDelim!=="("&&t.rightDelim===")"){let r=(e=t.body)==null?void 0:e.filter(n=>n.type!=="first");if(r?.length===1&&r[0].type==="genfrac")return r[0]}for(let r of t.branches)t.hasEmptyBranch(r)||t.setChildren(t.branch(r).map(n=>ys(n)),r);return t instanceof I&&t.forEachCell((r,n,a)=>{t.setCell(n,a,r.map(s=>ys(s)))}),t}function Ng(t){let e=t.at(t.position);if(e.mode==="text"){for(;!e.isFirstSibling&&e.mode==="text";)e=e.leftSibling;return t.offsetOf(e)}let r=e,n=!1;if(e.type==="mclose"){let a=Zi[e.value];for(;!e.isFirstSibling&&!(e.type==="mopen"&&e.value===a);)e=e.leftSibling;e.isFirstSibling||(e=e.leftSibling),n=!0}else e.type==="leftright"&&(e=e.leftSibling,n=!0);if(n)for(;!e.isFirstSibling&&(e.isFunction||Op(e));)e=e.leftSibling;else{let a=[];for(;!e.isFirstSibling&&(Op(e)||a.length>0);)e.type==="mclose"&&a.unshift(e.value),e.type==="mopen"&&a.length>0&&e.value===Zi[a[0]]&&a.shift(),e=e.leftSibling}return r===e?-1:t.offsetOf(e)}function Op(t){return t.isDigit()?!0:t.type&&/^(mord|surd|subsup|leftright|mop|mclose)$/.test(t.type)?t.type!=="extensible-symbol":!1}new xc;var vc=class extends V{constructor(){super("text")}onPaste(t,e){if(!e)return!1;let r=typeof e=="string"?e:e.getData("text/plain");return r&&t.model.contentWillChange({inputType:"insertFromPaste",data:r})?(t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,r)&&(t.model.contentDidChange({inputType:"insertFromPaste"}),t.startRecording(),t.snapshot("paste"),U(t)),t.startRecording(),!0):!1}insert(t,e,r={}){if(!t.contentWillChange({data:e,inputType:"insertText"}))return!1;r.insertionMode||(r.insertionMode="replaceSelection"),r.selectionMode||(r.selectionMode="placeholder"),r.format||(r.format="auto");let{silenceNotifications:n}=t;r.silenceNotifications&&(t.silenceNotifications=!0);let a=t.silenceNotifications;t.silenceNotifications=!0,r.insertionMode==="replaceSelection"&&!t.selectionIsCollapsed?t.deleteAtoms(le(t.selection)):r.insertionMode==="replaceAll"?(t.root.setChildren([],"body"),t.position=0):r.insertionMode==="insertBefore"?t.collapseSelection("backward"):r.insertionMode==="insertAfter"&&t.collapseSelection("forward");let s=$g(e,t.mathfield.context);if(Qn(s,r.style),!s)return!1;let o=t.at(t.position),c=o.parent.addChildrenAfter(s,o);return t.silenceNotifications=a,r.selectionMode==="before"||(r.selectionMode==="item"?t.setSelection(t.anchor,t.offsetOf(c)):c&&(t.position=t.offsetOf(c))),t.contentDidChange({data:e,inputType:"insertText"}),t.silenceNotifications=n,!0}};function $g(t,e){return t=t.replace(/\\/g,"\\textbackslash "),t=t.replace(/#/g,"\\#"),t=t.replace(/\$/g,"\\$"),t=t.replace(/%/g,"\\%"),t=t.replace(/&/g,"\\&"),t=t.replace(/_/g,"\\_"),t=t.replace(/{/g,"\\textbraceleft "),t=t.replace(/}/g,"\\textbraceright "),t=t.replace(/lbrace/g,"\\textbraceleft "),t=t.replace(/rbrace/g,"\\textbraceright "),t=t.replace(/\^/g,"\\textasciicircum "),t=t.replace(/~/g,"\\textasciitilde "),t=t.replace(/£/g,"\\textsterling "),he(t,{context:e,parseMode:"text"})}new vc;function Vt(t){return{value:t.model.getValue(),selectionIsCollapsed:t.model.selectionIsCollapsed,canUndo:t.canUndo(),canRedo:t.canRedo(),style:Fg(t.model),mode:t.model.mode}}function Fg(t){var e;if(t.selectionIsCollapsed)return(e=t.at(t.position))==null?void 0:e.style;let r=t.getAtoms(t.selection);if(r.length===0)return{};let n=p({},r[0].style);for(let a of r)for(let[s,o]of Object.entries(a.style))n[s]!==o&&delete n[s];return n}var ie=4,Pe=20,fe=2*(Pe+ie),xs=(t,e)=>`
  <line x1="${t+Pe}" y1="${e+Pe}" 
    x2="${t>e?t+Pe:7*Pe+10*ie}" 
    y2="${t<e?e+Pe:7*Pe+10*ie}"/>
  <svg id="plus" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.34-3.33,3.34h-6.67v6.66c0,1.84-1.49,3.34-3.33,3.34s-3.34-1.5-3.34-3.34v-6.66h-6.66c-1.84,0-3.34-1.5-3.34-3.34s1.5-3.33,3.34-3.33h6.66v-6.67c0-1.84,1.5-3.33,3.34-3.33s3.33,1.49,3.33,3.33v6.67h6.67c1.84,0,3.33,1.49,3.33,3.33Z"/>
  </svg>`,Bp=(t,e)=>`
  <line x1="${t+Pe}" y1="${e+Pe}" 
    x2="${t>e?t+Pe:7*Pe+10*ie}" 
    y2="${t<e?e+Pe:7*Pe+10*ie}"/>
  <svg id="minus" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.33-3.33,3.33H10c-1.84,0-3.34-1.49-3.34-3.33s1.5-3.34,3.34-3.34h20c1.84,0,3.33,1.5,3.33,3.34Z"/>
  </svg>`,vs=(t,e,r)=>`
  <svg id="arrow" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <g transform="rotate(${r})" transform-origin="20 20">
      <path class="font" d="m17.7,7.23h4.6c.52,0,.94.42.94.94v13.82c0,.52.42.94.94.94h3.39c.83,0,1.25,1.01.66,1.6l-7.56,7.56c-.37.37-.96.37-1.32,0l-7.56-7.56c-.59-.59-.17-1.6.66-1.6h3.39c.52,0,.94-.42.94-.94v-13.82c0-.52.42-.94.94-.94Z"/>
    </g>  
  </svg>`,Vg=`
<svg class="MLEP__array-buttons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
viewBox=
"-2 -2 ${8*Pe+10*ie+5} ${8*Pe+10*ie+5}">
  <rect 
      class="MLEP__array-insert-background rows"
      x="0" 
      y="${fe+ie}" 
      height="${3*fe}" 
      width="${fe}" 
      rx="${fe/2}"/>
      <rect 
      class="MLEP__array-insert-background columns"
      x="${fe+ie}" 
      y="0" 
      height="${fe}" 
      width="${3*fe}" 
      rx="${fe/2}"/>
  <g data-command='"moveDown"'>
  ${vs(2*(ie+fe),2*ie+3*fe,0)}
  </g>
  <g data-command='"moveUp"'>
  ${vs(2*(ie+fe),2*ie+fe,180)}
  </g>
  <g data-command='"moveToNextWord"'>
  ${vs(2*ie+3*fe,2*(ie+fe),-90)}
  </g>
  <g data-command='"moveToPreviousWord"'>
  ${vs(2*ie+fe,2*(ie+fe),90)}
  </g>
  <g>

  <g data-command='"addColumnBefore"'>
  ${xs(2*ie+fe,ie)}
  </g>
  <g data-command='"removeColumn"'>
  ${Bp(2*ie+2*fe,ie)}
  </g>
  <g data-command='"addColumnAfter"'>
  ${xs(2*ie+3*fe,ie)}
  </g>
  <g data-command='"addRowBefore"'>
  ${xs(ie,2*ie+fe)}
  </g>
  <g data-command='"removeRow"'>
  ${Bp(ie,2*ie+2*fe)}
  </g>
  <g data-command='"addRowAfter"'>
    ${xs(ie,2*ie+3*fe)}
  </g>
</svg>`,qg=t=>`
<svg id="matrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","matrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,Hg=t=>`
<svg id="pmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
data-command='["setEnvironment","pmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-3.96,4.6-3.96,11.4,0,16"/>
  <path class="cls-2" d="m22,4c3.96,4.6,3.96,11.4,0,16"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,Rp=t=>`
<svg id="Bmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","Bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <path class="cls-2" d="m22,4c1.1,0,2,.9,2,2v3c0,1.66.9,3,2,3-1.1,0-2,1.34-2,3v3c0,1.1-.9,2-2,2"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,Wg=t=>`
<svg id="bmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4h-3v16h3"/>
  <path class="cls-2" d="m22,4h3v16h-3"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,Ug=t=>`
<svg id="vmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="4" y1="4" x2="4" y2="20"/>
  <line class="cls-2" x1="24" y1="4" x2="24" y2="20"/>
</svg>`,jg=t=>`
<svg id="Vmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="-3.5 -3 35 30" 
  data-command='["setEnvironment","Vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="6" y1="4" x2="6" y2="20"/>
  <line class="cls-2" x1="22" y1="4" x2="22" y2="20"/>
  <line class="cls-2" x1="2" y1="4" x2="2" y2="20"/>
  <line class="cls-2" x1="26" y1="4" x2="26" y2="20"/>
</svg>`,Jg=t=>`
<svg id="cases" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","cases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m10,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <circle cx="13" cy="8" r="1"/>
  <circle cx="13" cy="16" r="1"/>
  <circle cx="21" cy="8" r="1"/>
  <circle cx="21" cy="16" r="1"/>
</svg>`,Gg=t=>`
<svg id="rcases" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","rcases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m18,20c1.1,0,2-.9,2-2v-3c0-1.66.9-3,2-3-1.1,0-2-1.34-2-3v-3c0-1.1-.9-2-2-2"/>
  <circle cx="15" cy="8" r="1"/>
  <circle cx="15" cy="16" r="1"/>
  <circle cx="7" cy="8" r="1"/>
  <circle cx="7" cy="16" r="1"/>
</svg>`,_c={matrix:qg,pmatrix:Hg,bmatrix:Wg,Bmatrix:Rp,vmatrix:Ug,Vmatrix:jg},Mc={cases:Jg,rcases:Gg,Bmatrix:Rp};function Xg(t){var e,r;let n=(e=t.model.parentEnvironment)==null?void 0:e.rows;if(!n)return;let a=0;n.forEach(Z=>{(!a||Z.length>a)&&(a=Z.length)});let s=document.getElementById("mathlive-environment-popover");s||(s=mi("mathlive-environment-popover"),Ve("environment-popover"),Ve("core"),s.setAttribute("aria-hidden","true"));let o,c=s.querySelector(".MLEP__environment-controls");c?o=c:(o=document.createElement("div"),s.innerHTML="",s.appendChild(o)),o.className="MLEP__environment-controls",o.style.display="flex",o.style.width="100%",o.style.height="100%",o.style.boxSizing="border-box",o.innerHTML=Vg;let d=[],m="",y=t.model.parentEnvironment.environmentName;if(Va(y)){let Z=Zg(y);m=_c[Z]("active");let me=_c,{[Z]:_e}=me,Ge=ki(me,[Ps(Z)]);d=Object.values(Ge).map(ve=>ve("inactive"))}else if(Km(y)){let Z=Yg(y);m=Mc[Z]("active");let me=Mc,{[Z]:_e}=me,Ge=ki(me,[Ps(Z)]);d=Object.values(Ge).map(ve=>ve("inactive"))}else Om(y)&&(m=_c.matrix("active"),d=Object.values(Mc).map(Z=>Z("inactive")));let A=document.createElement("div");A.className="MLEP__environment-delimiter-controls",A.style.display="flex",A.style.flexDirection="column",A.innerHTML=`
  <div class='MLEP__array-delimiter-options'>
  ${m}
  ${d.join("")}
  </div>`,m&&o.appendChild(A),o.querySelectorAll("[data-command]").forEach(Z=>{let me=Z.dataset.command,_e=me;try{_e=JSON.parse(me)}catch{}Z.addEventListener("mousedown",Ge=>Ge.preventDefault()),_e&&Z.addEventListener("click",()=>t.executeCommand(_e))});let P=(r=t.field)==null?void 0:r.getBoundingClientRect();P&&(s.style.top=`${window.scrollY+(P.top-s.clientHeight-15)}px`,s.style.left=`${P.left+20}px`,s.classList.add("is-visible"))}function _s(){let t=document.getElementById("mathlive-environment-popover");t?.classList.remove("is-visible")}function Pp(){document.getElementById("mathlive-environment-popover")&&(Pr("mathlive-environment-popover"),it("environment-popover"),it("core"))}function vo(t){if(!t.hasFocus())return;let e=!1;if(t.model.mode==="math"){let r=t.model.parentEnvironment;if(r!=null&&r.rows&&Dm(r.environmentName)){let n=t.options.environmentPopoverPolicy;e=n==="auto"||n==="on"}}e?Xg(t):_s()}function Zg(t){return t.replace("*","")}function Yg(t){return t==="dcases"?"cases":t}function Ms(t){let e=getComputedStyle(t).direction;return e==="ltr"||e==="rtl"?e:"ltr"}function kc(t,e,r){return e==="left"||e==="leading"&&r==="ltr"||e==="trailing"&&r==="rtl"?t.left:t.right}function wc(t,e,r,n){return r==="middle"?t-e/2:r==="start"&&n==="rtl"||r==="end"&&n==="ltr"||r==="top"||r==="right"?Math.max(0,t-e):t}function Qg(t,e,r,n){return r==="middle"?t-e/2:r==="start"&&n==="ltr"||r==="end"&&n==="rtl"||r==="top"||r==="right"?t:t-e}function zp(t,e){var r,n,a;let s=(r=Ms(t))!=null?r:"ltr";t.style.position="fixed",t.style.left="",t.style.top="",t.style.right="",t.style.bottom="",t.style.height="",t.style.width="";let o=t.getBoundingClientRect(),c=Number.isFinite(e.maxHeight)?Math.min(e.maxHeight,window.innerHeight):window.innerHeight,d=Math.min(c,(n=e.height)!=null?n:o.height),m=wc(e.location.y,d,e.verticalPos,s);m+d>window.innerHeight-8&&(e.alternateLocation?(m=wc(e.alternateLocation.y,d,e.verticalPos,s),m+d>window.innerHeight-8&&(m=void 0)):m=void 0),Number.isFinite(m)||(m=Math.max(8,window.innerHeight-8-d),8+d>window.innerHeight-8&&(t.style.bottom="8px")),d=Math.min(m+d,window.innerHeight-8)-m;let y=Number.isFinite(e.maxWidth)?Math.min(e.maxWidth,window.innerWidth):window.innerWidth,A=Math.min(y,(a=e.width)!=null?a:o.width),P=wc(e.location.x,A,e.horizontalPos,s);P+A>window.innerWidth-8&&(e.alternateLocation?(P=Qg(e.alternateLocation.x,A,e.verticalPos,s),P+A>window.innerWidth-8&&(P=void 0)):P=void 0),Number.isFinite(P)||(P=Math.max(8,window.innerWidth-8-A),8+A>window.innerWidth-8&&(t.style.right="8px")),A=Math.min(P+A,window.innerWidth-8)-P,s==="rtl"?t.style.right=`${Math.ceil(window.innerWidth-P-A).toString()}px`:t.style.left=`${Math.ceil(P).toString()}px`,t.style.top=`${Math.ceil(m).toString()}px`,d!==o.height&&(t.style.height=`${Math.ceil(d).toString()}px`),A!==o.width&&(t.style.width=`${Math.ceil(A).toString()}px`)}function Ip(t,e){return Math.hypot(e.x-t.x,e.y-t.y)}function Nr(t){return"submenu"in t}function _t(t){return"type"in t&&t.type==="command"||"onMenuSelect"in t||"id"in t}function _o(t){return"type"in t&&t.type==="divider"}function ws(t){return"type"in t&&t.type==="heading"}var Np={};function ks(t){let e=Np[t];if(!e){let r;switch(t){case"checkmark":r=`<span aria-hidden="true" class="ui-checkmark"><svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"></path></svg>
      </span>`;break;case"trailing-chevron":r='<span aria-hidden="true" class="ui-trailing-chevron"><svg focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></span>';break;case"mixedmark":r='<span aria-hidden="true" class="ui-mixedmark"><svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256c0-13.3 10.7-24 24-24H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24z"/></svg></span>'}if(r){let n=document.createElement("template");n.innerHTML=r,Np[t]=n,e=n}}if(e){if("content"in e)return e.content.cloneNode(!0);let r=document.createElement("svg");return r.innerHTML=e.innerHTML,r}}var $p=80,vn=class{constructor(t,e){this._className="",this._element=null;var r;this.parentMenu=e,this._declaration=t,Object.freeze(this._declaration),Nr(t)?(this.type="submenu",this.submenu=new _n(t.submenu,{parentMenu:e,submenuClass:t.submenuClass,columnCount:t.columnCount})):this.type=(r=t.type)!=null?r:"command",this.hasCheck=_t(t)&&t.checked!==void 0}get rootMenu(){return this.parentMenu.rootMenu}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}dispose(){var t,e;(t=this._abortController)==null||t.abort(),this._abortController=void 0,(e=this._element)==null||e.remove(),this._element=null,this.submenu&&this.submenu.dispose(),this.submenu=void 0}get menuItem(){return this._declaration}get label(){var t;return(t=this._label)!=null?t:""}set label(t){t===void 0&&(t=""),t!==this._label&&(this._label=t,this.dirty=!0)}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.dirty=!0)}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this.element&&(t?this.element.removeAttribute("aria-disabled"):this.element.setAttribute("aria-disabled","true")),this.dirty=!0}get checked(){return this._checked}set checked(t){this._checked=t,this.dirty=!0}get tooltip(){return this._tooltip}set tooltip(t){t!==this._tooltip&&(this._tooltip=t,this.dirty=!0)}get ariaLabel(){return this._ariaLabel}set ariaLabel(t){t!==this._ariaLabel&&(this._ariaLabel=t,this.dirty=!0)}get active(){var t,e;return(e=(t=this.element)==null?void 0:t.classList.contains("active"))!=null?e:!1}set active(t){this.element&&this.element.classList.toggle("active",t)}updateState(t){var e,r,n;let a=this._declaration;if(_o(a)){this.enabled=!1,this.checked=!1;return}ws(a)&&(this.enabled=!1,this.checked=!1,this.visible=!0),_t(a)&&(this.checked=(e=vi(a.checked,t))!=null?e:!1),(_t(a)||Nr(a))&&(this.enabled=(r=vi(a.enabled,t))!=null?r:!0,this.visible=(n=vi(a.visible,t))!=null?n:!0,this.visible&&this.enabled&&this.submenu&&(this.submenu.updateState(t),this.submenu.visible||(this.visible=!1))),(_t(a)||ws(a)||Nr(a))&&(this.label=vi(a.label,t),this._className=vi(a.class,t),this.tooltip=vi(a.tooltip,t),this.ariaLabel=vi(a.ariaLabel,t)),this._element&&this.updateElement()}set dirty(t){t&&this.parentMenu&&(this.parentMenu.dirty=!0)}updateElement(){var t;if(!this.visible||!this.element)return;let e=this.element;e.textContent="",e.className="",e.className=(t=this._className)!=null?t:"",this.enabled?e.removeAttribute("aria-disabled"):e.setAttribute("aria-disabled","true"),this.checked===!0?(e.setAttribute("aria-checked","true"),e.append(ks("checkmark"))):this.checked==="mixed"?(e.setAttribute("aria-checked","mixed"),e.append(ks("mixedmark"))):e.removeAttribute("aria-checked"),this.ariaLabel&&e.setAttribute("aria-label",this.ariaLabel);let r=document.createElement("span");if(r.className=this.parentMenu.hasCheck?"label indent":"label",this.type==="heading"&&r.classList.add("heading"),r.innerHTML=this.label,e.append(r),this._tooltip&&e.setAttribute("data-tooltip",this._tooltip),_t(this._declaration)&&this._declaration.keyboardShortcut){let n=document.createElement("kbd");n.innerHTML=cn(this._declaration.keyboardShortcut),e.append(n)}this.type==="submenu"&&e.append(ks("trailing-chevron"))}get element(){if(this._element)return this._element;if(_o(this._declaration)){let r=document.createElement("li");return r.setAttribute("part","menu-divider"),r.setAttribute("role","divider"),this._element=r,r}let t=document.createElement("li");this._element=t,(_t(this._declaration)||ws(this._declaration)||Nr(this._declaration))&&t.setAttribute("part","menu-item"),t.setAttribute("tabindex","-1"),this.hasCheck?t.setAttribute("role","menuitemcheckbox"):t.setAttribute("role","menuitem"),this.type==="submenu"&&(t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-expanded","false"));let e=this.abortController.signal;return t.addEventListener("pointerenter",this,{signal:e}),t.addEventListener("pointerleave",this,{signal:e}),t.addEventListener("pointerup",this,{signal:e}),t.addEventListener("click",this,{signal:e}),this._element}dispatchSelect(){var t;if(!_t(this._declaration))return;let e=new CustomEvent("menu-select",{cancelable:!0,bubbles:!0,detail:{modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data}});this.parentMenu.dispatchEvent(e)&&typeof this._declaration.onMenuSelect=="function"&&this._declaration.onMenuSelect({target:(t=this.parentMenu.host)!=null?t:void 0,modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data})}handleEvent(t){var e;if(!(!this.visible||!this.enabled)){if(t.type==="click"){this.rootMenu.state==="modal"&&this.select(),t.stopPropagation(),t.preventDefault();return}if(t.type==="pointerenter"){let r=t;this.rootMenu.cancelDelayedOperation(),this.parentMenu.isSubmenuOpen&&(e=this.parentMenu.activeMenuItem)!=null&&e.movingTowardSubmenu(r)?this.rootMenu.scheduleOperation(()=>{this.parentMenu.activeMenuItem=this,this.openSubmenu()}):(this.parentMenu.activeMenuItem=this,this.openSubmenu({withDelay:!0}));return}if(t.type==="pointerleave"){this.rootMenu.activeSubmenu===this.parentMenu&&(this.parentMenu.activeMenuItem=null);return}if(t.type==="pointerup"){this.rootMenu.state!=="modal"&&this.select(),t.stopPropagation(),t.preventDefault();return}}}select(){if(this.rootMenu.cancelDelayedOperation(),this.type==="submenu"){this.openSubmenu();return}this.active=!1,setTimeout(()=>{this.active=!0,setTimeout(()=>{this.active=!1,this.rootMenu.hide(),this.dispatchSelect()},$p)},$p)}openSubmenu(t){var e;if(this.type!=="submenu"||!this.element)return;if((e=t?.withDelay)!=null&&e){this.rootMenu.scheduleOperation(()=>this.openSubmenu());return}let r=this.element.getBoundingClientRect(),n=Ms(this.element);this.submenu.show({container:this.rootMenu.element.parentNode,location:{x:kc(r,"trailing",n),y:r.top-4},alternateLocation:{x:kc(r,"leading",n),y:r.top-4}})}movingTowardSubmenu(t){if(!this.element||this.type!=="submenu")return!1;let e=this.rootMenu.lastMoveEvent;if(!e)return!1;let r=t.timeStamp-e.timeStamp;if(r>500)return!1;let n=t.clientX-e.clientX;if(eb(n,e.clientY-t.clientY,r)<=.2)return!1;let a="right";if(this.submenu.element){let s=this.submenu.element.getBoundingClientRect(),o=this.element.getBoundingClientRect();s.left<o.left+o.width/2&&(a="left")}return a==="right"?n>0:n<0}};function eb(t,e,r){return Math.hypot(t,e)/r}function vi(t,e){return t===void 0||typeof t!="function"?t:(e!=null||(e={alt:!1,control:!1,shift:!1,meta:!1}),t(e))}var _n=class X3{constructor(e,r){this._element=null,this._activeMenuItem=null,this._dirty=!0;var n,a;this.parentMenu=(n=r?.parentMenu)!=null?n:null,this._submenuClass=r?.submenuClass,this.columnCount=(a=r?.columnCount)!=null?a:1,this.isSubmenuOpen=!1,this.menuItems=e}get children(){return Object.freeze([...this._menuItems])}set menuItems(e){let r=this.parentMenu;this.dispose(),this.parentMenu=r,e=[...e],this._menuItems=e.map(n=>n.onCreate?n.onCreate(n,this):new vn(n,this)),this.hasCheck=void 0,this.dirty=!0}dispose(){var e;this.hide(),this._element&&this._element.remove(),this._abortController&&this._abortController.abort(),(e=this._menuItems)==null||e.forEach(r=>r.dispose()),this._menuItems=[],this._activeMenuItem=null,this.parentMenu=null}handleEvent(e){if(e.type==="wheel"&&this._element){let r=e;this._element.scrollBy(0,r.deltaY),e.stopPropagation()}}dispatchEvent(e){return this.rootMenu.dispatchEvent(e)}get host(){return this.rootMenu.host}get rootMenu(){return this.parentMenu.rootMenu}updateState(e){var r,n,a;this._menuItems.forEach(m=>m.updateState(e));let s=this.hasCheck;this.hasCheck=this._menuItems.some(m=>m.visible&&m.hasCheck),this.hasCheck!==s&&this._menuItems.forEach(m=>m.updateState(e));let o,c=0;for(let m of this._menuItems)m.type==="heading"?(o&&c===0&&(o.visible=!1),o=m,c=0):m.type==="divider"&&o?(o.visible=c>0,o=void 0,c=0):o&&m.visible&&(c+=1);o&&(o.visible=c>0);let d=!0;for(let m of this._menuItems)m.type==="divider"?(m.visible=!d,d=!0):m.visible&&(d=!1);(r=this.activeMenuItem)!=null&&r.visible||(this.activeMenuItem=null),!((n=this.activeMenuItem)!=null&&n.enabled)&&((a=this.activeMenuItem)==null?void 0:a.type)==="submenu"&&this._activeMenuItem.submenu.hide(),this._dirty=!1}get enabled(){return this.updateIfDirty(),this._menuItems.some(e=>e.type!=="divider"&&e.visible&&e.enabled)}get visible(){return this.updateIfDirty(),this._menuItems.some(e=>e.type!=="divider"&&e.visible)}set dirty(e){this._dirty!==e&&e&&this.parentMenu&&(this._dirty=!0,this.parentMenu.dirty=!0)}updateIfDirty(){this._dirty&&this.updateState(this.rootMenu.modifiers)}updateElement(){var e;if(this._element){this._element.textContent="";for(let{element:r,visible:n}of this._menuItems)r&&n&&this._element.append(r);(e=this._element.querySelector("li:first-of-type"))==null||e.setAttribute("tabindex","0")}}get element(){if(this._element)return this._element;let e=document.createElement("menu");e.setAttribute("role","menu"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-orientation","vertical"),e.setAttribute("part","ui-menu-container"),this._submenuClass&&e.classList.add(this._submenuClass),e.classList.add("ui-menu-container"),this._abortController||(this._abortController=new AbortController);let r=this._abortController.signal;return e.addEventListener("focus",this,{signal:r}),e.addEventListener("wheel",this,{passive:!0,signal:r}),this._element=e,this.updateElement(),e}get activeMenuItem(){return this._activeMenuItem}set activeMenuItem(e){var r,n,a,s;if(this.rootMenu.cancelDelayedOperation(),e!==this._activeMenuItem){if(this.activeMenuItem){let o=this.activeMenuItem;o.active=!1,(r=o.submenu)==null||r.hide()}if(!((n=e?.visible)==null||n)){this._activeMenuItem=null;return}this._activeMenuItem=e,e&&(e.active=!0)}e?(a=e.element)==null||a.focus({preventScroll:!0}):(s=this._element)==null||s.focus({preventScroll:!0})}get firstMenuItem(){this.updateIfDirty();let e=0,r=!1,n=this._menuItems;for(;!r&&e<=n.length-1;){let a=n[e];r=a.type!=="divider"&&a.visible&&a.enabled,e+=1}return r?n[e-1]:null}get lastMenuItem(){this.updateIfDirty();let e=this._menuItems,r=e.length-1,n=!1;for(;!n&&r>=0;){let a=e[r];n=a.type!=="divider"&&a.visible&&a.enabled,r-=1}return n?e[r+1]:null}nextMenuItem(e){if(e===0)return this._activeMenuItem;if(!this._activeMenuItem)return e>0?this.firstMenuItem:this.lastMenuItem;if(!this.firstMenuItem||!this.lastMenuItem||!this._activeMenuItem)return null;this.updateIfDirty();let r=this._menuItems.indexOf(this.firstMenuItem),n=this._menuItems.indexOf(this.lastMenuItem),a=this._menuItems.indexOf(this._activeMenuItem),s=1;for(;a>=r&&a<=n;){a+=e>0?1:-1;let o=this._menuItems[a];if(!o)break;if(o.visible&&o.enabled){if(s===Math.abs(e))return this._menuItems[a];s+=1}}return e>0?this.lastMenuItem:this.firstMenuItem}getMenuItemColumn(e){this.updateIfDirty();let r=this._menuItems.filter(n=>n.visible&&n.enabled).indexOf(e);return r<0?-1:r%this.columnCount}static get collator(){return X3._collator||(X3._collator=new Intl.Collator(void 0,{usage:"search",sensitivity:"base"})),X3._collator}findMenuItem(e){var r;this.updateIfDirty();let n=this._menuItems.filter(c=>c.type!=="divider"&&c.visible&&c.enabled);if(n.length===0)return null;let a=Math.max(...n.map(c=>c.label.length))-e.length;if(a<0)return null;let s=null,o=0;for(;o<a&&!s;)s=(r=n.find(c=>X3.collator.compare(e,c.label.substring(o,e.length))===0))!=null?r:null,o++;return s}show(e){return!this.visible||!e.container?!1:(this.updateElement(),e.container.appendChild(this.element),zs()&&(this.element.popover="manual",this.element.showPopover()),e.location&&zp(this.element,{location:e.location,alternateLocation:e.alternateLocation,verticalPos:"bottom",horizontalPos:"start"}),Fp(),this.element.focus({preventScroll:!0}),Vp(),this.parentMenu&&(this.parentMenu.openSubmenu=this),!0)}hide(){var e,r,n,a,s,o;this.openSubmenu=null,this.activeMenuItem=null,this.parentMenu&&(this.parentMenu.openSubmenu=null),!(!((e=this._element)!=null&&e.isConnected)||!this._element.parentElement)&&(zs()&&(r=this._element)!=null&&r.popover&&this._element.hidePopover(),Fp(),(a=(n=this.parentMenu)==null?void 0:n.element)==null||a.focus(),(o=(s=this._element)==null?void 0:s.parentNode)==null||o.removeChild(this._element),Vp())}set openSubmenu(e){var r,n,a,s;let o=e!==null;((r=this.activeMenuItem)==null?void 0:r.type)==="submenu"&&((n=this.activeMenuItem.element)==null||n.setAttribute("aria-expanded",o.toString())),(s=(a=this.activeMenuItem)==null?void 0:a.element)==null||s.classList.toggle("is-submenu-open",o),this.isSubmenuOpen=o}};function Fp(){document.addEventListener("focusin",$r,!0),document.addEventListener("focusout",$r,!0),document.addEventListener("focus",$r,!0),document.addEventListener("blur",$r,!0)}function $r(t){t.stopImmediatePropagation(),t.preventDefault()}function Vp(){document.removeEventListener("focusin",$r,!0),document.removeEventListener("focusout",$r,!0),document.removeEventListener("focus",$r,!0),document.removeEventListener("blur",$r,!0)}var Ss=class Q9 extends _n{constructor(e,r){var n;super(e),this.state="closed",this.typingBufferResetTimer=0,this.hysteresisTimer=0,this._updating=!1,this._host=(n=r?.host)!=null?n:null,this.isDynamic=e.some(qp),this._modifiers={shift:!1,control:!1,alt:!1,meta:!1},this.typingBuffer="",this.state="closed"}get modifiers(){return this._modifiers}set modifiers(e){ep(this._modifiers,e)||(this._modifiers=e,this.dirty=!0)}get activeSubmenu(){let e=this;for(;e.isSubmenuOpen;)e=e.activeMenuItem.submenu;return e}set dirty(e){this._updating||this._dirty!==e&&(this._dirty=!0,e&&setTimeout(()=>{this.updateState(this.modifiers),this.updateElement()}))}updateState(e){this._updating=!0,this.modifiers=e??this.modifiers,super.updateState(this.modifiers),this._updating=!1}handleKeyupEvent(e){this.isDynamic&&(this.modifiers=Nt(e)),e.stopImmediatePropagation()}handleKeydownEvent(e){var r,n,a;if(e.key==="Tab"||e.key==="Escape"){this.hide();return}this.isDynamic&&(this.modifiers=Nt(e));let s=!0,o=this.activeSubmenu,c=o.activeMenuItem;switch(e.key){case" ":case"Space":case"Return":case"Enter":c?.select(Nt(e));break;case"ArrowRight":if(c?.type==="submenu")c.select(Nt(e)),this.activeSubmenu.activeMenuItem=this.activeSubmenu.firstMenuItem;else if(!c)o.activeMenuItem=o.firstMenuItem;else{let d=(r=o.getMenuItemColumn(c))!=null?r:-1;if(d>=0&&d<((n=o.columnCount)!=null?n:1)-1){let m=o.nextMenuItem(1);m&&(o.activeMenuItem=m)}}break;case"ArrowLeft":if(o===this.rootMenu)c||(o.activeMenuItem=o.firstMenuItem);else if((c&&(a=o.getMenuItemColumn(c))!=null?a:-1)<=0||!c){o.hide();let d=o.parentMenu.activeMenuItem;if(d){let{element:m}=d;m?.focus(),m?.classList.remove("is-submenu-open")}}else{let d=o.nextMenuItem(-1);d&&(o.activeMenuItem=d)}break;case"ArrowDown":o.activeMenuItem=o.nextMenuItem(o.columnCount);break;case"ArrowUp":o.activeMenuItem=o.nextMenuItem(-o.columnCount);break;case"Home":case"PageUp":o.activeMenuItem=o.firstMenuItem;break;case"End":case"PageDown":o.activeMenuItem=o.lastMenuItem;break;case"Backspace":if(this.typingBuffer&&(this.typingBuffer=this.typingBuffer.slice(0,-1),this.typingBuffer)){clearTimeout(this.typingBufferResetTimer);let d=o.findMenuItem(this.typingBuffer);d&&(o.activeMenuItem=d),this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer=""},500)}break;default:if(Kr(e)){isFinite(this.typingBufferResetTimer)&&clearTimeout(this.typingBufferResetTimer),this.typingBuffer+=e.key;let d=o.findMenuItem(this.typingBuffer);d&&(o.activeMenuItem=d),this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer=""},500)}else s=!1}s&&(e.preventDefault(),e.stopPropagation())}handleEvent(e){if(e.type==="keydown")this.handleKeydownEvent(e);else if(e.type==="keyup")this.handleKeyupEvent(e);else if(e.type==="pointermove")this.lastMoveEvent=e;else if(e.type==="pointerup")Number.isFinite(this.rootMenu._openTimestamp)&&Date.now()-this.rootMenu._openTimestamp<120?this.state="modal":this.state==="modal"&&e.target===this.scrim&&this.hide();else if(e.type==="contextmenu"){e.preventDefault(),e.stopPropagation();return}super.handleEvent(e)}dispatchEvent(e){return this._host?this._host.dispatchEvent(e):!0}get host(){return this._host}get scrim(){return Ae.element}connectScrim(e){let r=this.scrim;r.addEventListener("pointerup",this,!0),r.addEventListener("contextmenu",this),r.addEventListener("keydown",this),r.addEventListener("keyup",this),r.addEventListener("pointermove",this),Ae.open({root:e,onDismiss:()=>this.hide()})}disconnectScrim(){let e=this.scrim;e.removeEventListener("pointerup",this,!0),e.removeEventListener("contextmenu",this),e.removeEventListener("keydown",this),e.removeEventListener("keyup",this),e.removeEventListener("pointermove",this),Ae.state==="open"&&Ae.scrim.close()}get rootMenu(){return this}show(e){return this._onDismiss=e?.onDismiss,e!=null&&e.modifiers&&(this.modifiers=e.modifiers),this.updateState(),this.connectScrim(e?.target),super.show(f(p({},e),{container:this.scrim}))?(this._openTimestamp=Date.now(),this.state="open",!0):(this.disconnectScrim(),!1)}hide(){this.cancelDelayedOperation(),this.state!==void 0&&(this.state!=="closed"&&(this.activeMenuItem=null,Ae.element.parentElement.focus(),super.hide(),this.state="closed",this.disconnectScrim()),this._onDismiss&&(this._onDismiss(),this._onDismiss=void 0))}scheduleOperation(e){this.cancelDelayedOperation();let r=Q9.SUBMENU_DELAY;if(r<=0){e();return}this.hysteresisTimer=setTimeout(()=>{this.hysteresisTimer=0,e()},r)}cancelDelayedOperation(){this.hysteresisTimer&&(clearTimeout(this.hysteresisTimer),this.hysteresisTimer=0)}};Ss.SUBMENU_DELAY=120;var Mo=Ss;function qp(t){return _o(t)?!1:typeof t.label=="function"||typeof t.ariaLabel=="function"||typeof t.tooltip=="function"||(_t(t)||Nr(t))&&(typeof t.enabled=="function"||typeof t.visible=="function")||_t(t)&&typeof t.checked=="function"?!0:Nr(t)?t.submenu.some(qp):!1}var Mn=class{};Mn.DELAY=300,Mn.MAX_DISTANCE=10;function Hp(t){return new Promise((e,r)=>{let n=un(t);n||e(!1);let a=n,s=setTimeout(()=>{o.abort(),e(Ip(a,n)<Mn.MAX_DISTANCE)},Mn.DELAY),o=new AbortController,c=o.signal;for(let d of["pointermove","pointerup","pointercancel"])window.addEventListener(d,m=>{if(m.type==="pointerup"||m.type==="pointercancel")clearTimeout(s),o.abort(),e(!1);else if(m.type==="pointermove"){let y=un(m);y&&(a=y)}},{passive:!0,signal:c})})}async function Sc(t,e,r){if(t.defaultPrevented)return!1;if(t.type==="contextmenu"){let n=t;if(r.show({target:e,location:un(n),modifiers:Nt(n)}))return t.preventDefault(),t.stopPropagation(),!0}if(t.type==="keydown"){let n=t;if(n.code==="ContextMenu"||n.code==="F10"&&n.shiftKey){let a=e?.getBoundingClientRect();if(Wp(e)&&a&&r.show({target:e,location:{x:Math.ceil(a.left+a.width/2),y:Math.ceil(a.top+a.height/2)},modifiers:Nt(n)}))return t.preventDefault(),t.stopPropagation(),!0}}if(t.type==="pointerdown"&&t.pointerType!=="mouse"&&t.button===0){let n=t.target;for(;n&&e!==n;)n=n.parentNode;if(!n||!r.visible)return!1;let a=un(t);if(await Hp(t))return r.state!=="closed"||!Wp(e)?!1:(r.show({target:e,location:a}),!0)}return!1}function Wp(t){return t.dispatchEvent(new Event("contextmenu",{cancelable:!0}))}var Up={acute:714,grave:715,dot:729,ddot:168,dddot:8411,ddddot:8412,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};v(Object.keys(Up),"{body:auto}",{createAtom:t=>new Tr(f(p({},t),{body:C(t.args[0]),accentChar:Up[t.command.slice(1)]}))});v(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:t=>{let e=Ws(C(t.args[0]));return new Tr(f(p({},t),{body:C(t.args[0]),svgAccent:t.command.slice(1)+(e.length>5?"4":["1","1","2","2","3","3"][e.length])}))}});v(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:t=>new Tr(f(p({},t),{body:C(t.args[0]),svgAccent:"overarc"}))});v(["underarc","underparen"],"{body:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),svgBelow:"underarc"}))});v("utilde","{body:auto}",{createAtom:t=>{let e=C(t.args[0]),r=Ws(e),n="widetilde"+(r.length>5?"4":["1","1","2","2","3","3"][r.length]);return new we(f(p({},t),{body:e,svgBelow:n,boxType:Qr(e)}))}});v("^","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"â",e:"ê",i:"î",o:"ô",u:"û",A:"Â",E:"Ê",I:"Î",O:"Ô",U:"Û"}[t.args[0]])!=null?e:"^"}))}});v("`","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"à",e:"è",i:"ì",o:"ò",u:"ù",A:"À",E:"È",I:"Ì",O:"Ò",U:"Ù"}[t.args[0]])!=null?e:"`"}))}});v("'","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"á",e:"é",i:"í",o:"ó",u:"ú",A:"Á",E:"É",I:"Í",O:"Ó",U:"Ú"}[t.args[0]])!=null?e:"'"}))}});v('"',"{:string}",{createAtom:t=>{var e,r;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(r={a:"ä",e:"ë",i:"ï",o:"ö",u:"ü",A:"Ä",E:"Ë",I:"Ë",O:"Ö",U:"Ü"}[t.args[0]])!=null?r:'"'+t.args[0]:'"'}))}});v(".","{:string}",{createAtom:t=>{var e,r;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(r={a:"ȧ",e:"ė",i:"̇i",o:"ȯ",u:"̇u",A:"Ȧ",E:"Ė",I:"İ",O:"Ȯ",U:"̇U"}[t.args[0]])!=null?r:"."+t.args[0]:"."}))}});v("=","{:string}",{createAtom:t=>{var e,r;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(r={a:"ā",e:"ē",i:"ī",o:"ō",u:"ū",A:"Ā",E:"Ē",I:"Ī",O:"Ō",U:"Ū"}[t.args[0]])!=null?r:"="+t.args[0]:"="}))}});v("~","{:string}",{createAtom:t=>{var e;return new b(f(p({type:"mord"},t),{isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={n:"ñ",N:"Ñ",a:"ã",o:"õ",A:"Ã",O:"Õ"}[t.args[0]])!=null?e:"´"}))}});v("c","{:string}",{createAtom:t=>{var e;return new b(f(p({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={c:"ç",C:"Ç"}[t.args[0]])!=null?e:""}))}});v("enclose","{notation:string}[style:string]{body:auto}",{createAtom:t=>{var e,r;let n=t.args,a={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"none",svgStrokeStyle:void 0,borderStyle:void 0,style:(e=t.style)!=null?e:{}};if(n[1]){let o=n[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let c of o){let d=c.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(d)a.strokeWidth=d[1],a.strokeStyle=d[2],a.strokeColor=d[3];else{let m=c.match(/\s*([a-z]*)\s*=\s*"(.*)"/);m&&(m[1]==="mathbackground"?a.backgroundcolor=m[2]:m[1]==="mathcolor"?a.strokeColor=m[2]:m[1]==="padding"?a.padding=m[2]:m[1]==="shadow"&&(a.shadow=m[2]))}}a.strokeStyle==="dashed"?a.svgStrokeStyle="5,5":a.strokeStyle==="dotted"&&(a.svgStrokeStyle="1,5")}a.borderStyle=`${a.strokeWidth} ${a.strokeStyle} ${a.strokeColor}`;let s={};return((r=n[0])!=null?r:"").split(/[, ]/).filter(o=>o.length>0).forEach(o=>{s[o.toLowerCase()]=!0}),new tr(t.command,C(n[2]),s,a)}});v("cancel","{body:auto}",{createAtom:t=>{var e;return new tr(t.command,C(t.args[0]),{updiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});v("bcancel","{body:auto}",{createAtom:t=>{var e;return new tr(t.command,C(t.args[0]),{downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});v("xcancel","{body:auto}",{createAtom:t=>{var e;return new tr(t.command,C(t.args[0]),{updiagonalstrike:!0,downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});v(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:t=>{var e;return new we(f(p({},t),{body:C((e=t.args)==null?void 0:e[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgAbove:t.command.slice(1)}))}});v("overbrace","{:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgAbove:t.command.slice(1)}))});v(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgBelow:t.command.slice(1)}))});v(["underbrace"],"{:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgBelow:t.command.slice(1)}))});v(["xrightarrow","longrightarrow","xleftarrow","longleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","longleftrightarrow","xLeftrightarrow","xrightleftharpoons","longrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xleftrightarrows","longleftrightarrows","xRightleftharpoons","longRightleftharpoons","xLeftrightharpoons","longLeftrightharpoons"],"[:auto]{:auto}",{createAtom:t=>{var e,r,n,a,s;return new we(f(p({},t),{svgBody:t.command.slice(1),above:((r=C((e=t.args)==null?void 0:e[1]))==null?void 0:r.length)===0?void 0:C((n=t.args)==null?void 0:n[1]),below:(s=C((a=t.args)==null?void 0:a[0]))!=null?s:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"rel"}))},serialize:(t,e)=>t.command+(t.hasEmptyBranch("below")?"":`[${t.belowToLatex(e)}]`)+`{${t.aboveToLatex(e)}}${t.supsubToLatex(e)}`});v(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","deg","dim","exp","gcd","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,ifMode:"math",createAtom:t=>new gt(t.command.slice(1),f(p({},t),{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up"}))});v(["liminf","limsup"],"",{ifMode:"math",createAtom:t=>new gt({"\\liminf":"lim inf","\\limsup":"lim sup"}[t.command],f(p({},t),{limits:"over-under",variant:"main"}))});v(["lim","mod"],"",{ifMode:"math",createAtom:t=>new gt(t.command.slice(1),f(p({},t),{limits:"over-under",variant:"main"}))});v(["det","max","min"],"",{ifMode:"math",isFunction:!0,createAtom:t=>new gt(t.command.slice(1),f(p({},t),{limits:"over-under",isFunction:!0,variant:"main"}))});v("ang","{:math}",{ifMode:"math",createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>`\\ang{${t.bodyToLatex(e)}}`,render:(t,e)=>{let r=t.createBox(e),n=r.caret;r.caret=void 0;let a=new _("°",{style:f(p({},t.style),{variant:"normal",variantStyle:"up"})});return new _([r,a],{type:"inner",isSelected:t.isSelected,caret:n})}});v("sqrt","[index:auto]{radicand:expression}",{ifMode:"math",createAtom:t=>new ln(f(p({},t),{body:C(t.args[1]),index:t.args[0]?C(t.args[0]):void 0}))});v(["frac","dfrac","tfrac","binom","dbinom","tbinom"],"{:expression}{:expression}",{ifMode:"math",createAtom:t=>{let e=p({},t),r=t.command,n=t.args;switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":e.hasBarLine=!0;break;case"\\atopfrac":e.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":e.hasBarLine=!1,e.leftDelim="(",e.rightDelim=")";break;case"\\cfrac":e.hasBarLine=!0,e.continuousFraction=!0;break}switch(r){case"\\dfrac":case"\\dbinom":e.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":e.mathstyleName="textstyle";break}return new pt(n[0]?C(n[0]):[new Le],n[1]?C(n[1]):[new Le],e)},serialize:(t,e)=>{let r=t.aboveToLatex(e),n=t.belowToLatex(e);return/^[0-9]$/.test(r)&&/^[0-9]$/.test(n)?`${t.command}${r}${n}`:q(t.command,r,n)}});v(["cfrac"],"[:string]{:expression}{:expression}",{ifMode:"math",createAtom:t=>{let e=p({},t),r=t.args;return e.hasBarLine=!0,e.continuousFraction=!0,r[0]==="r"&&(e.align="right"),r[0]==="l"&&(e.align="left"),new pt(r[1]?C(r[1]):[new Le],r[2]?C(r[2]):[new Le],e)},serialize:(t,e)=>{let r=t.aboveToLatex(e),n=t.belowToLatex(e);return q(t.command,r,n)}});v(["brace","brack"],"",{infix:!0,createAtom:t=>new pt(C(t.args[0]),C(t.args[1]),f(p({},t),{hasBarLine:!1,leftDelim:t.command==="\\brace"?"\\lbrace":"\\lbrack",rightDelim:t.command==="\\brace"?"\\rbrace":"\\rbrack"})),serialize:(t,e)=>R([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});v(["over","atop","choose"],"",{infix:!0,createAtom:t=>{let e,r,n=t.args;return t.command==="\\choose"&&(e="(",r=")"),new pt(C(n[0]),C(n[1]),f(p({},t),{hasBarLine:t.command==="\\over",leftDelim:e,rightDelim:r}))},serialize:(t,e)=>R([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});v(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:t=>{var e,r;let n=t.args;return new pt(C(n[0]),C(n[1]),f(p({},t),{leftDelim:(e=n[2])!=null?e:".",rightDelim:(r=n[3])!=null?r:".",hasBarLine:!1}))},serialize:(t,e)=>`${t.aboveToLatex(e)} ${t.command}${t.leftDelim}${t.rightDelim}${t.belowToLatex(e)}`});v("pdiff","{numerator}{denominator}",{ifMode:"math",createAtom:t=>new pt(C(t.args[0]),C(t.args[1]),f(p({},t),{hasBarLine:!0,numerPrefix:"∂",denomPrefix:"∂"})),serialize:(t,e)=>R([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});v(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{ifMode:"math",createAtom:t=>new ai({coprod:"∐",bigvee:"⋁",bigwedge:"⋀",biguplus:"⨄",bigcap:"⋂",bigcup:"⋃",intop:"∫",prod:"∏",sum:"∑",bigotimes:"⨂",bigoplus:"⨁",bigodot:"⨀",bigsqcup:"⨆",smallint:"∫"}[t.command.slice(1)],f(p({},t),{limits:"auto",variant:"main"}))});v("smallint","",{ifMode:"math",createAtom:t=>new gt("∫",f(p({},t),{limits:"adjacent",variant:"main"}))});var jp={int:"∫",iint:"∬",iiint:"∭",oint:"∮",oiint:"∯",oiiint:"∰",intclockwise:"∱",varointclockwise:"∲",ointctrclockwise:"∳",intctrclockwise:"⨑",sqcup:"⊔",sqcap:"⊓",uplus:"⊎",wr:"≀",amalg:"⨿",Cap:"⋒",Cup:"⋓",doublecap:"⋒",doublecup:"⋓"};v(Object.keys(jp),"",{ifMode:"math",createAtom:t=>{let e=t.command,r=jp[e.slice(1)];return new ai(r,f(p({},t),{limits:"adjacent",variant:{"⋒":"ams","⋓":"ams"}[r]}))}});v(["Re","Im"],"",{ifMode:"math",createAtom:t=>new gt({"\\Re":"ℜ","\\Im":"ℑ"}[t.command],f(p({},t),{limits:"adjacent",isFunction:!0,variant:"fraktur"}))});v("middle","{:delim}",{ifMode:"math",createAtom:t=>{var e;return new on(f(p({},t),{delim:(e=t.args[0])!=null?e:"|",size:1}))}});v("the","{:value}",{createAtom:t=>new b(f(p({},t),{captureSelection:!0,verbatimLatex:null})),render:(t,e)=>{var r;let n=new O({parent:e},t.style),a="";t.isSelected&&(a+=" ML__selected");let s=n.evaluate(t.args[0]);return new _(((r=be(s))!=null?r:"").split("").map(o=>new _(o,{type:"ord",classes:a,mode:t.mode,isSelected:t.isSelected,style:p({variant:"main"},t.style)})),{type:"lift",style:t.style,caret:t.caret,isSelected:t.isSelected,classes:a}).wrap(n)},serialize:t=>{var e;return`\\the${(e=be(t.args[0]))!=null?e:"\\relax"}`}});v("mathtip","{:auto}{:math}",{createAtom:t=>new si(f(p({},t),{body:C(t.args[0]),tooltip:C(t.args[1]),content:"math"})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\mathtip{${t.bodyToLatex(e)}}{${b.serialize([t.tooltip],f(p({},e),{defaultMode:"math"}))}}`});v("texttip","{:auto}{:text}",{createAtom:t=>new si(f(p({},t),{body:C(t.args[0]),tooltip:C(t.args[1]),content:"text"})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\texttip{${t.bodyToLatex(e)}}{${b.serialize([t.tooltip],f(p({},e),{defaultMode:"text"}))}}`});v("error","{:math}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>`\\error{${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__error"})});v("ensuremath","{:math}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>`${t.command}{${t.bodyToLatex(f(p({},e),{defaultMode:"math"}))}}`});v("color","{:value}",{applyStyle:(t,e,r,n)=>{var a,s;return f(p({},t),{verbatimColor:(a=be(r[0]))!=null?a:void 0,color:n.toColor((s=r[0])!=null?s:{string:"red"})})}});v("textcolor","{:value}{content:auto*}",{applyStyle:(t,e,r,n)=>{var a,s;return f(p({},t),{verbatimColor:(a=be(r[0]))!=null?a:void 0,color:n.toColor((s=r[0])!=null?s:{string:"red"})})}});v("boxed","{content:math}",{createAtom:t=>new nt(f(p({},t),{body:C(t.args[0]),framecolor:{string:"black"}}))});v("colorbox","{:value}{:text*}",{applyStyle:(t,e,r,n)=>{var a,s;return f(p({},t),{verbatimBackgroundColor:(a=be(r[0]))!=null?a:void 0,backgroundColor:n.toBackgroundColor((s=r[0])!=null?s:{string:"yellow"})})}});v("fcolorbox","{frame-color:value}{background-color:value}{content:text}",{applyMode:"text",createAtom:t=>{var e,r;return new nt(f(p({},t),{body:C(t.args[2]),framecolor:(e=t.args[0])!=null?e:{string:"blue"},backgroundcolor:(r=t.args[1])!=null?r:{string:"yellow"}}))},serialize:(t,e)=>{var r,n;return e.skipStyles?t.bodyToLatex(f(p({},e),{defaultMode:"text"})):q(t.command,(r=be(t.framecolor))!=null?r:"",(n=be(t.backgroundcolor))!=null?n:"",t.bodyToLatex(f(p({},e),{defaultMode:"text"})))}});v("bbox","[:bbox]{body:auto}",{createAtom:t=>{var e;let r=t.args[0],n=C(t.args[1]);return r?new nt(f(p({},t),{body:n,padding:r.padding,border:r.border,backgroundcolor:(e=r.backgroundcolor)!=null?e:void 0})):new nt(f(p({},t),{body:n}))},serialize:(t,e)=>{var r,n;if(e.skipStyles)return t.bodyToLatex(e);let a=t.command;if(Number.isFinite(t.padding)||t.border!==void 0||t.backgroundcolor!==void 0){let s=[];t.padding&&s.push((r=be(t.padding))!=null?r:""),t.border&&s.push(`border: ${t.border}`),t.backgroundcolor&&s.push((n=be(t.backgroundcolor))!=null?n:""),a+=`[${s.join(",")}]`}return q(a,t.bodyToLatex(e))}});v(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),render:(t,e)=>{let r=new O({parent:e,mathstyle:t.command.slice(1)},t.style),n=b.createBox(r,t.body,{type:"lift"});return t.caret&&(n.caret=t.caret),t.bind(e,n)},serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`{${R([t.command,t.bodyToLatex(e)])}}`});v(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:(t,e)=>f(p({},t),{fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[e]})});v("fontseries","{:string}",{ifMode:"text",applyStyle:(t,e,r)=>{var n;return f(p({},t),{fontSeries:(n=r[0])!=null?n:"auto"})}});v("fontshape","{:string}",{ifMode:"text",applyStyle:(t,e,r)=>{var n;return f(p({},t),{fontShape:(n=r[0])!=null?n:"auto"})}});v("fontfamily","{:string}",{ifMode:"text",applyStyle:(t,e,r)=>{var n;return f(p({},t),{fontFamily:(n=r[0])!=null?n:"roman"})}});v("selectfont","",{ifMode:"text",applyStyle:t=>t});v("bf","{:rest*}",{applyStyle:t=>f(p({},t),{fontSeries:"b",fontShape:"n",fontFamily:"roman"})});v(["boldsymbol","bm","bold"],"{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variantStyle:"bold"})});v("bfseries","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"b"})});v("mdseries","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"m"})});v("upshape","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"n"})});v("slshape","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sl"})});v("scshape","{:rest*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sc"})});v("textbf","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"b"})});v("textmd","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontSeries:"m"})});v("textup","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"n"})});v("textnormal","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"n",fontSeries:"m"})});v("textsl","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sl"})});v("textit","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"it"})});v("textsc","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontShape:"sc"})});v("textrm","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontFamily:"roman"})});v("textsf","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontFamily:"sans-serif"})});v("texttt","{:text*}",{applyMode:"text",applyStyle:t=>f(p({},t),{fontFamily:"monospace"})});v("mathbf","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"normal",variantStyle:"bold"})});v("mathit","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"main",variantStyle:"italic"})});v("mathnormal","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"normal",variantStyle:"italic"})});v("mathbfit","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"main",variantStyle:"bolditalic"})});v("mathrm","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"normal",variantStyle:"up"})});v("mathsf","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"sans-serif",variantStyle:"up"})});v("mathtt","{:math*}",{applyMode:"math",applyStyle:t=>f(p({},t),{variant:"monospace",variantStyle:"up"})});v("it","{:rest*}",{applyStyle:t=>f(p({},t),{fontSeries:"m",fontShape:"it",fontFamily:"roman",variantStyle:"italic"})});v("rmfamily","{:rest*}",{applyStyle:t=>f(p({},t),{fontFamily:"roman"})});v("sffamily","{:rest*}",{applyStyle:t=>f(p({},t),{fontFamily:"sans-serif"})});v("ttfamily","{:rest*}",{applyStyle:t=>f(p({},t),{fontFamily:"monospace"})});v(["Bbb","mathbb"],"{:math*}",{applyStyle:t=>f(p({},t),{variant:"double-struck",variantStyle:to(t.variantStyle)})});v(["frak","mathfrak"],"{:math*}",{applyStyle:t=>f(p({},t),{variant:"fraktur",variantStyle:to(t.variantStyle)})});v("mathcal","{:math*}",{applyStyle:t=>f(p({},t),{variant:"calligraphic",variantStyle:to(t.variantStyle)})});v("mathscr","{:math*}",{applyStyle:t=>f(p({},t),{variant:"script",variantStyle:to(t.variantStyle)})});v("mbox","{:text}",{ifMode:"math",createAtom:t=>new b(f(p({},t),{type:"mord",body:C(t.args[0]),mode:"math"})),serialize:(t,e)=>q("\\mbox",t.bodyToLatex(f(p({},e),{defaultMode:"text"})))});v("text","{:text}",{ifMode:"math",applyMode:"text"});v(["class","htmlClass"],"{name:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>!t.args[0]||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`,render:(t,e)=>{var r;return t.createBox(e,{classes:(r=t.args[0])!=null?r:""})}});v(["cssId","htmlId"],"{id:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>{var r;return!((r=t.args)!=null&&r[0])||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var r;let n=t.createBox(e);return n.cssId=(r=t.args[0])!=null?r:"",n}});v("htmlData","{data:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>{var r;return!((r=t.args)!=null&&r[0])||e.skipStyles?t.bodyToLatex(e):`\\htmlData{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var r;let n=t.createBox(e);return n.htmlData=(r=t.args[0])!=null?r:"",n}});v(["style","htmlStyle"],"{data:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>{var r;return!((r=t.args)!=null&&r[0])||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var r;let n=t.createBox(e);return n.htmlStyle=(r=t.args[0])!=null?r:"",n}});v("href","{url:string}{content:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),render:(t,e)=>{var r;let n=t.createBox(e),a=(r=t.args[0])!=null?r:"";return a&&(n.htmlData=`href=${a}`),n}});v("em","{:rest}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`{\\em ${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__emph",boxType:"lift"})});v("emph","{:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[1])})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\emph{${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__emph",boxType:"lift"})});var Jp={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};v(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:t=>{var e;return new an(f(p({},t),{delim:(e=t.args[0])!=null?e:".",size:Jp[t.command].size,delimType:Jp[t.command].mclass}))}});v(["hspace","hspace*"],"{width:value}",{createAtom:t=>{var e;return new zt(f(p({},t),{width:(e=t.args[0])!=null?e:{dimension:0}}))}});v(["mkern","kern","mskip","hskip","mspace"],"{width:value}",{createAtom:t=>{var e;return new zt(f(p({},t),{width:(e=t.args[0])!=null?e:{dimension:0}}))}});v("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:t=>new b(t),render:(t,e)=>{let r=0,n=e.mathstyle.id;(n===jn||n===wr)&&(r=1),(n===ei||n===Ne)&&(r=2),(n===kr||n===Se)&&(r=3);let a=C(t.args[r]);return b.createBox(e,a)},serialize:(t,e)=>`\\mathchoice{${b.serialize(t.args[0],e)}}{${b.serialize(t.args[1],e)}}{${b.serialize(t.args[2],e)}}{${b.serialize(t.args[3],e)}}`});v("mathop","{:auto}",{createAtom:t=>new b(f(p({},t),{type:"mop",body:C(t.args[0]),limits:"over-under",isFunction:!0,captureSelection:!0})),render:(t,e)=>{var r;let n=b.createBox(e,t.body);if(t.superscript||t.subscript){let a=(r=t.subsupPlacement)!=null?r:"auto";n=a==="over-under"||a==="auto"&&e.isDisplayStyle?t.attachLimits(e,{base:n}):t.attachSupsub(e,{base:n})}return t.caret&&(n.caret=t.caret),new _(t.bind(e,n),{type:"op",isSelected:t.isSelected,classes:"ML__op-group"})},serialize:(t,e)=>{let r=[q(t.command,t.bodyToLatex(e))];return t.explicitSubsupPlacement&&(t.subsupPlacement==="over-under"&&r.push("\\limits"),t.subsupPlacement==="adjacent"&&r.push("\\nolimits"),t.subsupPlacement==="auto"&&r.push("\\displaylimits")),r.push(t.supsubToLatex(e)),R(r)}});v(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:t=>new b(f(p({},t),{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[t.command],body:C(t.args[0])}))});v(["operatorname","operatorname*"],"{operator:math}",{createAtom:t=>{let e=C(t.args[0]).map(r=>{var n;return r.type!=="first"&&(r.type="mord",r.value=(n={"∗":"*","−":"-"}[r.value])!=null?n:r.value,r.isFunction=!1,!r.style.variant&&!r.style.variantStyle&&(r.style.variant="main",r.style.variantStyle="up")),r});return new b(f(p({},t),{type:"mop",body:e,isFunction:!0,limits:t.command==="\\operatorname"?"adjacent":"over-under"}))},render:(t,e)=>{var r;let n=b.createBox(e,t.body);if(t.superscript||t.subscript){let a=(r=t.subsupPlacement)!=null?r:"auto";n=a==="over-under"||a==="auto"&&e.isDisplayStyle?t.attachLimits(e,{base:n}):t.attachSupsub(e,{base:n})}return t.caret&&(n.caret=t.caret),new _(t.bind(e,n),{type:"op",isSelected:t.isSelected,classes:"ML__op-group"})},serialize:(t,e)=>{let r=[q(t.command,t.bodyToLatex(e))];return t.explicitSubsupPlacement&&(t.subsupPlacement==="over-under"&&r.push("\\limits"),t.subsupPlacement==="adjacent"&&r.push("\\nolimits"),t.subsupPlacement==="auto"&&r.push("\\displaylimits")),r.push(t.supsubToLatex(e)),R(r)}});v(["char","unicode"],"{charcode:value}",{createAtom:t=>new b(f(p({},t),{type:t.mode==="text"?"text":"mord"})),serialize:t=>{var e;return`${t.command}${be((e=t.args[0])!=null?e:{number:10067,base:"hexadecimal"})}`},render:(t,e)=>{let r=e.evaluate(t.args[0]);return(!r||!("number"in r))&&(r={number:10067,base:"hexadecimal"}),t.value=String.fromCodePoint(r.number),t.createBox(e)}});v("rule","[raise:value]{width:value}{thickness:value}",{createAtom:t=>new b(t),render:(t,e)=>{var r,n,a;let s=new O({parent:e,mathstyle:"textstyle"},t.style),o=s.toEm((r=t.args[0])!=null?r:{dimension:0}),c=s.toEm((n=t.args[1])!=null?n:{dimension:10}),d=s.toEm((a=t.args[2])!=null?a:{dimension:10}),m=new _(null,{classes:"ML__rule",type:"ord"});return m.width=c,m.height=d+o,m.depth=-o,m.setStyle("border-right-width",c,"em"),m.setStyle("border-top-width",d,"em"),m.setStyle("border-color",t.style.color),m.setStyle("vertical-align",o,"em"),t.isSelected&&m.setStyle("opacity","50%"),t.bind(s,m),t.caret&&(m.caret=t.caret),m.wrap(e)},serialize:t=>`\\rule${t.args[0]?`[${be(t.args[0])}]`:""}{${be(t.args[1])}}{${be(t.args[2])}}`});v(["overline","underline"],"{:auto}",{createAtom:t=>new b(f(p({},t),{body:C(t.args[0])})),render:(t,e)=>{let r=t.command.substring(1),n=new O({parent:e,mathstyle:"cramp"},t.style),a=b.createBox(n,t.body);if(!a)return null;let s=n.metrics.defaultRuleThickness/n.scalingFactor,o=new _(null,{classes:r+"-line"});o.height=s,o.maxFontSize=s*1.125*n.scalingFactor;let c;return r==="overline"?c=new Q({shift:0,children:[{box:a},3*s,{box:o},s]}):c=new Q({top:a.height,children:[s,{box:o},3*s,{box:a}]}),t.caret&&(c.caret=t.caret),new _(c,{classes:r,type:"ignore"})}});v("overset","{:auto}{base:auto}",{createAtom:t=>{let e=C(t.args[1]);return new we(f(p({},t),{above:C(t.args[0]),body:e,skipBoundary:!1,boxType:Qr(e)}))},serialize:(t,e)=>q(t.command,t.aboveToLatex(e),t.bodyToLatex(e))});v("underset","{:auto}{base:auto}",{createAtom:t=>{let e=C(t.args[1]);return new we(f(p({},t),{below:C(t.args[0]),body:e,skipBoundary:!1,boxType:Qr(e)}))},serialize:(t,e)=>q(t.command,t.belowToLatex(e),t.bodyToLatex(e))});v("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:t=>{let e=C(t.args[2]);return new we(f(p({},t),{above:C(t.args[0]),below:C(t.args[1]),body:e,skipBoundary:!1,boxType:Qr(e)}))},serialize:(t,e)=>q(t.command,t.belowToLatex(e),t.bodyToLatex(e))});v(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:t=>new we(f(p({},t),{body:C(t.args[2]),above:C(t.args[1]),below:C(t.args[0]),skipBoundary:!1,boxType:t.command==="\\stackrel"?"rel":"bin"})),serialize:(t,e)=>q(t.command,t.aboveToLatex(e),t.bodyToLatex(e))});v("smash","[:string]{:auto}",{createAtom:t=>{var e,r,n,a;return new Pt(f(p({},t),{body:C(t.args[1]),smashHeight:(r=(e=t.args[0])==null?void 0:e.includes("t"))!=null?r:!0,smashDepth:(a=(n=t.args[0])==null?void 0:n.includes("b"))!=null?a:!0}))}});v("vphantom","{:auto}",{createAtom:t=>new Pt(f(p({},t),{body:C(t.args[0]),isInvisible:!0,smashWidth:!0}))});v("hphantom","{:auto}",{createAtom:t=>new Pt(f(p({},t),{body:C(t.args[0]),isInvisible:!0,smashHeight:!0,smashDepth:!0}))});v("phantom","{:auto}",{createAtom:t=>new Pt(f(p({},t),{body:C(t.args[0]),isInvisible:!0}))});v("mathstrut","",{createAtom:t=>new Pt(f(p({},t),{body:[new b({value:"("})],isInvisible:!0}))});v("not","{:math}",{createAtom:t=>{let e=C(t.args[0]);return e.length===0?new b(f(p({},t),{type:"mrel",value:""})):new b(f(p({},t),{body:[new ht(f(p({},t),{body:"",align:"right"})),...e],captureSelection:!0}))},serialize:(t,e)=>{let r=t.args[0],n=r&&typeof r=="object"&&"group"in r;return t.value!==""?n?`\\not{${b.serialize(r.group,e)}}`:`\\not${b.serialize(r,e)}`:n?"\\not{}":"\\not"},render:(t,e)=>{if(t.value)return t.createBox(e);let r=t.args[0]&&typeof t.args[0]=="object"&&"group"in t.args[0]?"ord":Qr(C(t.args[0])),n=b.createBox(e,t.body,{type:r});return t.caret&&(n.caret=t.caret),t.bind(e,n)}});v(["ne","neq"],"",{createAtom:t=>new b(f(p({},t),{type:"mrel",body:[new ht(f(p({},t),{body:"",align:"right",boxType:"rel"})),new b(f(p({},t),{value:"="}))],captureSelection:!0})),serialize:t=>t.command});v("rlap","{:auto}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"right"}))});v("llap","{:auto}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"left"}))});v("mathrlap","{:math}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"right"}))});v("mathllap","{:math}",{createAtom:t=>new ht(f(p({},t),{body:C(t.args[0]),align:"left"}))});v("raisebox","{:value}{:text}",{createAtom:t=>{var e;return new nt(f(p({},t),{body:C(t.args[1]),padding:{dimension:0},offset:(e=t.args[0])!=null?e:{dimension:0}}))},serialize:(t,e)=>{var r;return q("\\raisebox",(r=be(t.offset))!=null?r:"0pt",t.bodyToLatex(e))}});v("raise","{:value}{:auto}",{createAtom:t=>{var e;return new nt(f(p({},t),{body:C(t.args[1]),padding:{dimension:0},offset:(e=t.args[0])!=null?e:{dimension:0}}))},serialize:(t,e)=>{var r;return q("\\raise",(r=be(t.offset))!=null?r:"0pt",t.bodyToLatex(e))}});v("lower","{:value}{:auto}",{createAtom:t=>{var e;return new nt(f(p({},t),{body:C(t.args[1]),padding:{dimension:0},offset:(e=dt(t.args[0],-1))!=null?e:{dimension:0}}))},serialize:(t,e)=>{var r,n;return q("\\lower",(n=be(dt((r=t.offset)!=null?r:{dimension:0},-1)))!=null?n:"0pt",t.bodyToLatex(e))}});ye("0123456789/@.?!");Hs(65,90);Hs(97,122);ye([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]);ye([["\\#",35],["\\&",38],["\\parallelogram",9649],["\\spadesuit",9824],["\\heartsuit",9825],["\\diamondsuit",9826],["\\clubsuit",9827],["\\flat",9837],["\\natural",9838],["\\sharp",9839]]);ye([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\pounds",163],["\\euro",8364]]);ye([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel");ye([["\\mapsfrom",8612,"mrel"],["\\Mapsfrom",10502,"mrel"],["\\MapsTo",10503,"mrel"],["\\Yup",8516,"mord"],["\\lightning",8623,"mrel"],["\\leftarrowtriangle",8701,"mrel"],["\\rightarrowtriangle",8702,"mrel"],["\\leftrightarrowtriangle",8703,"mrel"],["\\boxdot",8865,"mbin"],["\\bigtriangleup",9651,"mbin"],["\\bigtriangledown",9661,"mbin"],["\\boxbar",9707,"mbin"],["\\Lbag",10181,"mopen"],["\\Rbag",10182,"mclose"],["\\llbracket",10214,"mopen"],["\\rrbracket",10215,"mclose"],["\\longmapsfrom",10235,"mrel"],["\\Longmapsfrom",10237,"mrel"],["\\Longmapsto",10238,"mrel"],["\\boxslash",10692,"mbin"],["\\boxbslash",10693,"mbin"],["\\boxast",10694,"mbin"],["\\boxcircle",10695,"mbin"],["\\boxbox",10696,"mbin"],["\\fatsemi",10783,"mop"],["\\leftslice",10918,"mrel"],["\\rightslice",10919,"mrel"],["\\interleave",10996,"mbin"],["\\biginterleave",11004,"mop"],["\\sslash",11005,"mbin"],["\\talloblong",11006,"mbin"]]);ye([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]);ye([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\twoheadrightarrowtail",10518],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nleftarrow",8602],["\\nrightarrow",8603],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\nvrightarrow",8696],["\\nvtwoheadrightarrow",10496],["\\nvrightarrowtail",10516],["\\nvtwoheadrightarrowtail",10519],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams");ye([["+",43],["-",8722],["−",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin");ye([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams");ye([["\\surd",8730],["\\S",167],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\varkappa",1008,"mord","ams"],["\\coppa",985,"mord","ams"],["\\koppa",985,"mord","ams"],["\\Coppa",984,"mord","ams"],["\\Koppa",984,"mord","ams"],["\\sampi",993,"mord","ams"],["\\Sampi",992,"mord","ams"],["\\emptyset",8709]]);ye([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\coloneqq",8788],["\\colonequals",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",10178],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel");ye([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams");ye([["\\wp",8472],["\\aleph",8501]]);ye([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams");ye([["\\ ",160],["~",160]],"space");v(["!",",",":",";",">","enskip","enspace","quad","qquad"],"",{createAtom:t=>new zt(t)});v("space","",{createAtom:t=>new zt(t)});ye([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct");ye([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner");ye([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);var Gp="<mo>&#x2061;</mo>",As="<mo>&#8290;</mo>";function Ls(t){return t.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ee(t,e){return!t||!e.generateID?"":` extid="${t}"`}function tb(t,e,r){var n,a,s,o,c,d,m,y;let A=!1;e=e??t.atoms.length;let P="",Z="",me=t.atoms[t.index],_e=(n=me.style)==null?void 0:n.variant,Ge=(a=me.style)==null?void 0:a.variantStyle,ve="";if(me.value&&(_e||Ge)){let De=(s=Cn(me.value,_e,Ge))!=null?s:me.value;if(De!==me.value)return t.index+=1,P=`<mi${ee(me.id,r)}>${De}</mi>`,qt(P,t,r)||(t.mathML+=P,t.lastType="mi"),!0;ve=(o={upnormal:"normal",boldnormal:"bold",italicmain:"italic",bolditalicmain:"bold-italic","updouble-struck":"double-struck","double-struck":"double-struck",boldfraktur:"bold-fraktur",calligraphic:"script",upcalligraphic:"script",script:"script",boldscript:"bold-script",boldcalligraphic:"bold-script",fraktur:"fraktur","upsans-serif":"sans-serif","boldsans-serif":"bold-sans-serif","italicsans-serif":"sans-serif-italic","bolditalicsans-serif":"sans-serif-bold-italic",monospace:"monospace"}[(Ge??"")+(_e??"")])!=null?o:"",ve&&(ve=` mathvariant="${ve}"`)}let He={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"ℏ","\\cdotp":"⋅","\\ldots":"…","\\cdots":"⋯","\\ddots":"⋱","\\vdots":"⋮","\\ldotp":"."};if(me.command==="!")return t.index+=1,P="<mo>!</mo>",qt(P,t,r)||(t.mathML+=P,t.lastType="mo"),!0;if(He[me.command]){t.index+=1;let De=`<mi${ee(me.id,r)}${ve}>${He[me.command]}</mi>`;return(t.lastType==="mi"||t.lastType==="mn"||t.lastType==="mtext"||t.lastType==="fence")&&(De=As+De),qt(De,t,r)||(t.mathML+=De,t.lastType="mi"),!0}if(me.command==="\\operatorname")Z=wn(me.body),t.index+=1;else if(_e||Ge)for(;t.index<e&&(me.type==="mord"||me.type==="macro")&&!me.isDigit()&&_e===((d=(c=me.style)==null?void 0:c.variant)!=null?d:"")&&Ge===((y=(m=me.style)==null?void 0:m.variantStyle)!=null?y:"");)Z+=wn([me]),t.index+=1,me=t.atoms[t.index];else(me.type==="mord"||me.type==="macro")&&!me.isDigit()&&(Z+=wn([me]),t.index+=1);if(Z.length>0){A=!0,P=`<mi${ve}>${Z}</mi>`;let De=t.lastType;P.endsWith(">f</mi>")||P.endsWith(">g</mi>")?(P+=Gp,t.lastType="applyfunction"):t.lastType=/^<mo>(.*)<\/mo>$/.test(P)?"mo":"mi",qt(P,t,r)||((De==="mi"||De==="mn"||De==="mtext"||De==="fence")&&(P=As+P),t.mathML+=P)}return A}function Xp(t){return t.index<t.atoms.length&&t.atoms[t.index].superscript&&t.atoms[t.index].type==="subsup"}function Zp(t){let e=-1,r=t.index,n=!1,a=!1;for(;r<t.atoms.length&&!n&&!a;){let s=t.atoms[r];n=!s.isDigit(),a=!n&&s.superscript!==void 0,r++}return a&&(e=r-1),e}function qt(t,e,r){var n;let a=e.atoms[e.index-1];if(!a)return!1;if(!a.superscript&&!a.subscript)if(((n=e.atoms[e.index])==null?void 0:n.type)==="subsup")a=e.atoms[e.index],e.index+=1;else return!1;let s=e.lastType;e.lastType="";let o=H(a.superscript,r);e.lastType="";let c=H(a.subscript,r);if(e.lastType=s,!o&&!c)return!1;let d="";return o&&c?d=`<msubsup>${t}${c}${o}</msubsup>`:o?d=`<msup>${t}${o}</msup>`:c&&(d=`<msub>${t}${c}</msub>`),e.mathML+=d,e.lastType="",!0}function rb(t,e,r){e=e??t.atoms.length;let n=t.index,a="",s=Zp(t);for(s>=0&&s<e&&(e=s);t.index<e&&t.atoms[t.index].mode==="text";)a+=t.atoms[t.index].value?t.atoms[t.index].value:" ",t.index+=1;return a.length>0?(a=`<mtext ${ee(t.atoms[n].id,r)}>${a}</mtext>`,s<0&&Xp(t)&&(s=t.index,t.index+=1),qt(a,t,r)||(t.mathML+=a,t.lastType="mtext"),!0):!1}function ib(t,e,r){e=e??t.atoms.length;let n=t.index,a="",s=Zp(t);for(s>=0&&s<e&&(e=s);t.index<e&&t.atoms[t.index].isDigit();)a+=t.atoms[t.index].asDigit(),t.index+=1;return a.length<=0?!1:(a="<mn"+ee(t.atoms[n].id,r)+">"+a+"</mn>",s<0&&Xp(t)&&(s=t.index,t.index+=1),qt(a,t,r)||(t.mathML+=a,t.lastType="mn"),!0)}function nb(t,e,r){let n=!1;e=e??t.atoms.length;let a="",s="";if(t.index<e&&t.atoms[t.index].type==="mopen"){let o=!1,c=0,d=t.index,m=-1,y=d+1;for(;y<e&&!o;)t.atoms[y].type==="mopen"?c+=1:t.atoms[y].type==="mclose"&&(c-=1),c===-1&&(o=!0,m=y),y+=1;o&&(a="<mrow>",a+=_i(t.atoms[d],r),a+=H(t.atoms,r,d+1,m),a+=_i(t.atoms[m],r),a+="</mrow>",t.index=m+1,(t.lastType==="mi"||t.lastType==="mn"||t.lastType==="mfrac"||t.lastType==="fence")&&(t.mathML+=As),qt(a,t,r)&&(n=!0,t.lastType="",a=""),s="fence")}return a.length>0&&(n=!0,t.mathML+=a,t.lastType=s),n}function ob(t,e,r){let n=!1;e=e??t.atoms.length;let a="",s="",o=t.atoms[t.index];if(!o)return!1;let c={"\\ne":"&ne;","\\neq":"&ne;","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"∥","\\mid":"∣","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lbrack":"[","\\rbrack":"]","\\lparen":"(","\\rparen":")","\\langle":"⟨","\\rangle":"⟩","\\lfloor":"⌊","\\rfloor":"⌋","\\lceil":"⌈","\\rceil":"⌉"};if(c[o.command]){t.index+=1;let d=`<mo${ee(o.id,r)}>${c[o.command]}</mo>`;return qt(d,t,r)||(t.mathML+=d,t.lastType="mo"),!0}if(t.index<e&&(o.type==="mbin"||o.type==="mrel"))a+=Lc(t.atoms[t.index],r),t.index+=1,s="mo";else if(t.index<e&&(o.type==="mop"||o.type==="operator"||o.type==="extensible-symbol")){if(o.subsupPlacement==="over-under"&&(o.superscript||o.subscript)){let d=_i(o,r);return o.superscript&&o.subscript?(a+="<munderover>"+d,a+=H(o.subscript,r),a+=H(o.superscript,r),a+="</munderover>"):o.superscript?(a+="<mover>"+d,a+=H(o.superscript,r),a+="</mover>"):o.subscript&&(a+="<munder>"+d,a+=H(o.subscript,r),a+="</munder>"),t.mathML+=a,t.lastType="mo",t.index+=1,!0}{let d=t.atoms[t.index],m=d.value==="\\operatorname",y=m?'<mi class="MathML-Unit"'+ee(d.id,r)+">"+wn(d.value)+"</mi>":_i(d,r);a+=y,!m&&!/^<mo>(.*)<\/mo>$/.test(y)?(a+=Gp,s="applyfunction"):s=m?"mi":"mo"}(t.lastType==="mi"||t.lastType==="mn")&&!/^<mo>(.*)<\/mo>$/.test(a)&&(a=As+a),t.index+=1}return a.length>0&&(n=!0,qt(a,t,r)||(t.mathML+=a,t.lastType=s)),n}function H(t,e,r,n){e!=null||(e={});let a={atoms:[],index:r??0,mathML:"",lastType:""};if(typeof t=="number"||typeof t=="boolean")a.mathML=t.toString();else if(typeof t=="string")a.mathML=t;else if(t instanceof b)a.mathML=Lc(t,e);else if(Array.isArray(t)){a.atoms=t;let s=0;for(n=n||(t?t.length:0);a.index<n;)if(rb(a,n,e)||ib(a,n,e)||tb(a,n,e)||ob(a,n,e)||nb(a,n,e))s+=1;else if(a.index<n){let o=Lc(a.atoms[a.index],e);a.lastType==="mn"&&o.length>0&&a.atoms[a.index].type==="genfrac"&&(o="<mo>&#x2064;</mo>"+o),a.atoms[a.index].type==="genfrac"?a.lastType="mfrac":a.lastType="",a.index+=1,qt(o,a,e)?s+=1:o.length>0&&(a.mathML+=o,s+=1)}s>1&&(a.mathML="<mrow>"+a.mathML+"</mrow>")}return a.mathML}function _i(t,e){let r="",n=wn(t.value);return n&&(r="<mo"+ee(t.id,e)+">"+n+"</mo>"),r}function wn(t){if(!t)return"";if(typeof t=="string")return Ls(t);if(!Array.isArray(t)&&typeof t.body=="string")return Ls(t.body);let e="";for(let r of t)typeof r.value=="string"&&(e+=r.value);return Ls(e)}function Lc(t,e){var r,n,a,s,o,c,d,m,y,A,P,Z,me,_e,Ge,ve,He,De,Xe,Bs,wt,li,An;if(t.mode==="text")return`<mi${ee(t.id,e)}>${t.value}</mi>`;let Os={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",longleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",longrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",longrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xleftrightarrows:"⇄",xRightleftharpoons:"⇌",longRightleftharpoons:"⇌",xLeftrightharpoons:"⇋",longLeftrightharpoons:"⇋"},vh={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\>":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5},Fc="",Hc="",qc,e1,df,So,th,Rs,{command:Ko}=t;if(t.command==="\\error")return`<merror${ee(t.id,e)}>${H(t.body,e)}</merror>`;let Vc={"\\vert":"|","\\Vert":"∥","\\mid":"∣","\\lbrack":"[","\\rbrack":"]","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"⟨","\\rangle":"⟩","\\lfloor":"⌊","\\rfloor":"⌋","\\lceil":"⌈","\\rceil":"⌉"},yh={"\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};switch(t.type){case"first":break;case"group":case"root":Fc=H(t.body,e);break;case"array":let wh=t;if((wh.leftDelim&&wh.leftDelim!=="."||wh.rightDelim&&wh.rightDelim!==".")&&(Fc+="<mrow>",wh.leftDelim&&wh.leftDelim!=="."&&(Fc+=`<mo>${Vc[wh.leftDelim]||wh.leftDelim}</mo>`)),Fc+="<mtable",wh.colFormat){for(Fc+=' columnalign="',df=0;df<wh.colFormat.length;df++){let k1=wh.colFormat[df];"align"in k1&&(Fc+={l:"left",c:"center",r:"right"}[k1.align]+" ")}Fc+='"'}for(Fc+=">",e1=0;e1<wh.rows.length;e1++){for(Fc+="<mtr>",qc=0;qc<wh.rows[e1].length;qc++)Fc+="<mtd>"+H(wh.rows[e1][qc],e)+"</mtd>";Fc+="</mtr>"}Fc+="</mtable>",(wh.leftDelim&&wh.leftDelim!=="."||wh.rightDelim&&wh.rightDelim!==".")&&(wh.rightDelim&&wh.rightDelim!=="."&&(Fc+=`'<mo>${Vc[wh.rightDelim]||wh.rightDelim}</mo>`),Fc+="</mrow>");break;case"genfrac":let uf=t;(uf.leftDelim||uf.rightDelim)&&(Fc+="<mrow>"),uf.leftDelim&&uf.leftDelim!=="."&&(Fc+="<mo"+ee(t.id,e)+">"+(Vc[uf.leftDelim]||uf.leftDelim)+"</mo>"),uf.hasBarLine?(Fc+="<mfrac>",Fc+=H(t.above,e)||"<mi>&nbsp;</mi>",Fc+=H(t.below,e)||"<mi>&nbsp;</mi>",Fc+="</mfrac>"):(Fc+="<mtable"+ee(t.id,e)+">",Fc+="<mtr>"+H(t.above,e)+"</mtr>",Fc+="<mtr>"+H(t.below,e)+"</mtr>",Fc+="</mtable>"),uf.rightDelim&&uf.rightDelim!=="."&&(Fc+="<mo"+ee(t.id,e)+">"+(Vc[uf.rightDelim]||uf.rightDelim)+"</mo>"),(uf.leftDelim||uf.rightDelim)&&(Fc+="</mrow>");break;case"surd":t.hasEmptyBranch("above")?(Fc+="<msqrt"+ee(t.id,e)+">",Fc+=H(t.body,e),Fc+="</msqrt>"):(Fc+="<mroot"+ee(t.id,e)+">",Fc+=H(t.body,e),Fc+=H(t.above,e),Fc+="</mroot>");break;case"leftright":let i1=t,u1=i1.leftDelim;Fc="<mrow>",u1&&u1!=="."&&(Fc+=`<mo${ee(t.id,e)}>${(r=Vc[u1])!=null?r:u1}</mo>`),t.body&&(Fc+=H(t.body,e));let h1=i1.matchingRightDelim();h1&&h1!=="."&&(Fc+=`<mo${ee(t.id,e)}>${(n=Vc[h1])!=null?n:h1}</mo>`),Fc+="</mrow>";break;case"sizeddelim":case"delim":Fc+=`<mo${ee(t.id,e)}>${Vc[t.value]||t.value}</mo>`;break;case"accent":let T1=t;Fc+='<mover accent="true"'+ee(t.id,e)+">",Fc+=H(t.body,e),Fc+="<mo>"+(yh[Ko]||T1.accent)+"</mo>",Fc+="</mover>";break;case"line":case"overlap":break;case"overunder":let p1=t;th=t.above,So=t.below,(p1.svgAbove||th)&&(p1.svgBelow||So)?Rs=t.body:th&&th.length>0?(Rs=t.body,(s=(a=t.body)==null?void 0:a[0])!=null&&s.below?(So=t.body[0].below,Rs=t.body[0].body):((c=(o=t.body)==null?void 0:o[0])==null?void 0:c.type)==="first"&&(m=(d=t.body)==null?void 0:d[1])!=null&&m.below&&(So=t.body[1].below,Rs=t.body[1].body)):So&&So.length>0&&(Rs=t.body,(A=(y=t.body)==null?void 0:y[0])!=null&&A.above?(th=t.body[0].above,Rs=t.body[0].body):((Z=(P=t.body)==null?void 0:P[0])==null?void 0:Z.type)==="first"&&(_e=(me=t.body)==null?void 0:me[1])!=null&&_e.above&&(th=t.body[1].above,Rs=t.body[1].body)),(p1.svgAbove||th)&&(p1.svgBelow||So)?(Fc+=`<munderover ${ee(t.id,e)}>`,Fc+=(Ge=Os[p1.svgBody])!=null?Ge:H(Rs,e),Fc+=(ve=Os[p1.svgBelow])!=null?ve:H(So,e),Fc+=(He=Os[p1.svgAbove])!=null?He:H(th,e),Fc+="</munderover>"):p1.svgAbove||th?(Fc+=`<mover ${ee(t.id,e)}>`+((De=Os[p1.svgBody])!=null?De:H(Rs,e)),Fc+=(Xe=Os[p1.svgAbove])!=null?Xe:H(th,e),Fc+="</mover>"):(p1.svgBelow||So)&&(Fc+=`<munder ${ee(t.id,e)}>`+((Bs=Os[p1.svgBody])!=null?Bs:H(Rs,e)),Fc+=(wt=Os[p1.svgBelow])!=null?wt:H(So,e),Fc+="</munder>");break;case"placeholder":Fc+="?";break;case"mord":{if(Fc=typeof t.value=="string"?t.value:Ko,Fc.length>0&&Fc.startsWith("\\"))typeof t.value=="string"&&t.value.charCodeAt(0)>255?Fc="&#x"+("000000"+t.value.charCodeAt(0).toString(16)).slice(-4)+";":typeof t.value=="string"&&(Fc=t.value.charAt(0));else if(t.command==="\\char"){let X1=(li=t.args)==null?void 0:li[0];if(X1!==void 0&&"number"in X1){let D1=X1.number;typeof D1=="number"&&(Fc="&#x"+("000000"+D1.toString(16)).slice(-4)+";")}}else typeof t.value=="string"?Fc=t.value:(console.error("Did not expect this"),Fc="");let k1=/\d/.test(Fc)?"mn":"mi";Fc=`<${k1}${ee(t.id,e)}>${Ls(Fc)}</${k1}>`;break}case"mbin":case"mrel":case"minner":Fc=_i(t,e);break;case"mpunct":Fc='<mo separator="true"'+ee(t.id,e)+">"+Ko+"</mo>";break;case"mop":case"operator":case"extensible-symbol":t.value!=="​"&&(Fc="<mo"+ee(t.id,e)+">",Fc+=Ko==="\\operatorname"?t.body:Ko||t.body,Fc+="</mo>");break;case"box":let j1=t;Fc='<menclose notation="box"',j1.backgroundcolor&&(Fc+=' mathbackground="'+j1.backgroundcolor+'"'),Fc+=ee(t.id,e)+">"+H(t.body,e)+"</menclose>";break;case"spacing":Fc+='<mspace width="'+((An=vh[Ko])!=null?An:0)+'em"/>';break;case"enclose":let C1=t;Fc='<menclose notation="';for(let k1 in C1.notation)Object.prototype.hasOwnProperty.call(C1.notation,k1)&&C1.notation[k1]&&(Fc+=Hc+k1,Hc=" ");Fc+=ee(t.id,e)+'">'+H(t.body,e)+"</menclose>";break;case"prompt":Fc='<menclose notation="roundexbox""">'+H(t.body,e)+"</menclose>";break;case"space":Fc+="&nbsp;";break;case"subsup":break;case"phantom":break;case"composition":break;case"rule":break;case"chem":break;case"mopen":Fc+=_i(t,e);break;case"mclose":Fc+=_i(t,e);break;case"macro":{let k1=t.command+wn(t.macroArgs);k1&&(Fc+=`<mo ${ee(t.id,e)}>${k1}</mo>`)}break;case"latexgroup":Fc+=H(t.body,e);break;case"latex":Fc+="<mtext"+ee(t.id,e)+">"+t.value+"</mtext>";break;case"tooltip":Fc+=H(t.body,e);break;case"text":Fc+=`<mtext ${ee(t.id,e)}x>${t.value}</mtext>`;break;default:if(t.command==="\\displaystyle")return`<mrow ${ee(t.id,e)} displaystyle="true">${H(t.body,e)}</mrow>`;if(t.command==="\\textstyle")return`<mrow ${ee(t.id,e)} displaystyle="false">${H(t.body,e)}</mrow>`;console.info("Unexpected element in conversion to MathML:",t)}return Fc}var kn={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"imaginary eye ","\\imaginaryJ":"imaginary jay ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\pm":"plus or minus","\\mp":"minus or plus","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","\\ne":"is not equal to ","\\neq":"is not equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","​":"","−":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},Ac={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function ab(t){let e="";return t.startsWith("\\")&&(e=" "+t.replace("\\","")+" "),e}function wo(t){let e=0;if(Y(t))for(let r of t)r.type!=="first"&&(e+=1);return e===1}function sb(t){if(Y(t)){for(let e of t)if(e.type!=="first"&&e.id)return e.id.toString()}return""}function Yp(t){let e="";if(Y(t))for(let r of t)r.type!=="first"&&typeof r.value=="string"&&(e+=r.value);return e}function lb(t){return t?t.map(e=>e.value).join(""):""}function Cs(t){if(t&&!t.some(e=>e.type!=="first"&&e.value===void 0))return t.map(e=>e.value).join("")}function Cc(t){return`<emphasis>${t}</emphasis>`}function cb(t,e){var r;let n="",a=!1,s=!1;for(let o=0;o<e.length;o++)e[o].type!=="first"&&(e[o].mode!=="text"&&(s=!1),o<e.length-2&&e[o].type==="mopen"&&e[o+2].type==="mclose"&&e[o+1].type==="mord"?(n+=" of ",n+=Cc($(t,e[o+1])),o+=2):e[o].mode==="text"?s?n+=(r=e[o].value)!=null?r:" ":(s=!0,n+=$("text",e[o])):e[o].isDigit()?a?n+=e[o].asDigit():(a=!0,n+=$(t,e[o])):(a=!1,n+=$(t,e[o])));return n}function $(t,e){var r,n,a,s,o,c,d,m;function y(ve){return globalThis.MathfieldElement.textToSpeechMarkup?/[a-z]/.test(ve)?` <say-as interpret-as="character">${ve}</say-as>`:/[A-Z]/.test(ve)?`capital <say-as interpret-as="character">${ve.toLowerCase()}</say-as>`:ve:/[a-z]/.test(ve)?" '"+ve.toUpperCase()+"'":/[A-Z]/.test(ve)?" 'capital "+ve.toUpperCase()+"'":ve}if(!e)return"";if(Y(e))return cb(t,e);let A="";if(e.id&&t==="math"&&(A+='<mark name="'+e.id.toString()+'"/>'),e.mode==="text")return A+e.value;let P="",Z="",me="",_e=!1,{command:Ge}=e;switch(Ge){case"\\vec":return"vector "+$(t,e.body);case"\\acute":return $(t,e.body)+" acute";case"\\grave":return $(t,e.body)+" grave";case"\\dot":return"dot over"+$(t,e.body);case"\\ddot":return"double dot over"+$(t,e.body);case"\\mathring":return"ring over"+$(t,e.body);case"\\tilde":case"\\widetilde":return"tilde over"+$(t,e.body);case"\\bar":return $(t,e.body)+" bar";case"\\breve":return $(t,e.body)+" breve";case"\\check":case"\\widecheck":return"check over "+$(t,e.body);case"\\hat":case"\\widehat":return"hat over"+$(t,e.body);case"\\overarc":case"\\overparen":case"\\wideparen":return"arc over "+$(t,e.body);case"\\underarc":case"\\underparen":return"arc under "+$(t,e.body);case"\\mathop":return(r=Cs(e.body))!=null?r:$(t,e.body);case"\\mathit":return(n=Cs(e.body))!=null?n:$(t,e.body);case"\\mathrm":return(a=Cs(e.body))!=null?a:$(t,e.body);case"\\mathbb":return"blackboard"+((s=Cs(e.body))!=null?s:$(t,e.body))}switch(e.type){case"prompt":let ve=e.body.length>1?'start input . <break time="500ms"/> '+$(t,e.body)+'. <break time="500ms"/> end input':"blank";A+=' <break time="300ms"/> '+ve+'. <break time="700ms"/>'+((o=e.correctness)!=null?o:"")+' . <break time="700ms"/> ';break;case"array":let He=e.rows,De=e.environmentName;if(Object.keys(Ac).includes(De)){A+=` begin ${Ac[De]} `;for(let wt=0;wt<He.length;wt++){wt>0&&(A+=","),A+=` row ${wt+1} `;for(let li=0;li<He[wt].length;li++)li>0&&(A+=","),A+=` column ${li+1}: `,A+=$("math",He[wt][li])}A+=` end ${Ac[De]} `}break;case"group":Ge==="\\ne"?A+=" not equal ":(Ge==="\\not"&&(A+=" not "),A+=$("math",e.body));break;case"root":A+=$("math",e.body);break;case"genfrac":if(P=$("math",e.above),Z=$("math",e.below),wo(e.above)&&wo(e.below)){let wt={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[Yp(e.above)+"/"+Yp(e.below)];wt?A=wt:A+=P+" over "+Z}else A+=' the fraction <break time="150ms"/>'+P+' over <break time="150ms"/>'+Z+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(me=$("math",e.body),e.hasEmptyBranch("above"))A+=wo(e.body)?" the square root of "+me+" , ":' the square root of <break time="200ms"/>'+me+'. <break time="200ms"/> End square root';else{let wt=$("math",e.above);wt=wt.trim();let li=wt.replace(/<mark([^/]*)\/>/g,"");li==="3"?A+=' the cube root of <break time="200ms"/>'+me+'. <break time="200ms"/> End cube root':li==="n"?A+=' the nth root of <break time="200ms"/>'+me+'. <break time="200ms"/> End root':A+=' the root with index: <break time="200ms"/>'+wt+', of <break time="200ms"/>'+me+'. <break time="200ms"/> End root'}break;case"leftright":{let wt=e;A+=(c=wt.leftDelim?kn[wt.leftDelim]:void 0)!=null?c:wt.leftDelim,A+=$("math",e.body),A+=(d=wt.rightDelim?kn[wt.rightDelim]:void 0)!=null?d:wt.rightDelim}break;case"rule":break;case"overunder":break;case"overlap":break;case"macro":let Xe=Ge.replace(/^\\/g,""),Bs=Ei()[Xe];Bs&&(Bs!=null&&Bs.expand?A+=$("math",e.body):A+=`${Xe} `);break;case"placeholder":A+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if(Ge==="\\mathbin"||Ge==="\\mathrel"||Ge==="\\mathopen"||Ge==="\\mathclose"||Ge==="\\mathpunct"||Ge==="\\mathord"||Ge==="\\mathinner"){A=$(t,e.body);break}let wt=e.isDigit()?e.asDigit():e.value,li=e.command;if((e.type==="delim"||e.type==="sizeddelim")&&(li=e.value,wt=li),t==="text")A+=wt;else{if(e.type==="mbin"&&(A+='<break time="150ms"/>'),wt){let An=kn[wt]||(li?kn[li.trim()]:"");if(An)A+=" "+An;else{let Os=li?ab(li.trim()):"";A+=Os||y(wt)}}else A+=$("math",e.body);e.type==="mbin"&&(A+='<break time="150ms"/>')}break}case"mop":case"operator":case"extensible-symbol":if(e.value!=="​"){let wt=e.command;if(wt==="\\sum")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let li=$("math",e.superscript);li=li.trim();let An=$("math",e.subscript);An=An.trim(),A+=' the summation from <break time="200ms"/>'+An+'<break time="200ms"/> to  <break time="200ms"/>'+li+'<break time="200ms"/> of <break time="150ms"/>',_e=!0}else if(e.hasEmptyBranch("subscript"))A+=" the summation of";else{let li=$("math",e.subscript);li=li.trim(),A+=' the summation from <break time="200ms"/>'+li+'<break time="200ms"/> of <break time="150ms"/>',_e=!0}else if(wt==="\\prod")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let li=$("math",e.superscript);li=li.trim();let An=$("math",e.subscript);An=An.trim(),A+=' the product from <break time="200ms"/>'+An+'<break time="200ms"/> to <break time="200ms"/>'+li+'<break time="200ms"/> of <break time="150ms"/>',_e=!0}else if(e.hasEmptyBranch("subscript"))A+=" the product  of ";else{let li=$("math",e.subscript);li=li.trim(),A+=' the product from <break time="200ms"/>'+li+'<break time="200ms"/> of <break time="150ms"/>',_e=!0}else if(wt==="\\int")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let li=$("math",e.superscript);li=li.trim();let An=$("math",e.subscript);An=An.trim(),A+=' the integral from <break time="200ms"/>'+Cc(An)+'<break time="200ms"/> to <break time="200ms"/>'+Cc(li)+' <break time="200ms"/> of ',_e=!0}else A+=' the integral of <break time="200ms"/> ';else if(wt==="\\operatorname"||wt==="\\operatorname*")A+=lb(e.body)+" ";else if(typeof e.value=="string"){let li=(m=kn[e.value])!=null?m:e.command?kn[e.command]:void 0;A+=li||" "+e.value}else e.command&&(e.command==="\\mathop"?A+=$("math",e.body):A+=e.command.startsWith("\\")?" "+e.command.slice(1):" "+e.command)}break;case"enclose":me=$("math",e.body),A+=" crossed out "+me+". End crossed out.";break}if(!_e&&!e.hasEmptyBranch("superscript")){let ve=$(t,e.superscript);ve=ve.trim();let He=ve.replace(/<[^>]*>/g,"");if(wo(e.superscript)){if(t==="math"){let De=sb(e.superscript);De&&(A+='<mark name="'+De+'"/>')}He==="′"?A+=" prime ":He==="2"?A+=" squared ":He==="3"?A+=" cubed ":Number.isNaN(Number.parseInt(He))?A+=" to the "+ve+"; ":A+=' to the <say-as interpret-as="ordinal">'+He+"</say-as> power; "}else Number.isNaN(Number.parseInt(He))?A+=" raised to the "+ve+"; ":A+=' raised to the <say-as interpret-as="ordinal">'+He+"</say-as> power; "}if(!_e&&!e.hasEmptyBranch("subscript")){let ve=$("math",e.subscript);ve=ve.trim(),A+=wo(e.subscript)?" sub "+ve:" subscript "+ve+". End subscript. "}return A}function Mt(t){var e,r;let n=globalThis.MathfieldElement;if(n.textToSpeechRules==="sre"&&("sre"in window||"SRE"in window)){let s=H(t);if(s){n.textToSpeechMarkup&&(n.textToSpeechRulesOptions=(e=n.textToSpeechRulesOptions)!=null?e:{},n.textToSpeechRulesOptions=f(p({},n.textToSpeechRulesOptions),{markup:n.textToSpeechMarkup}),n.textToSpeechRulesOptions.markup==="ssml"&&(n.textToSpeechRulesOptions=f(p({},n.textToSpeechRulesOptions),{markup:"ssml_step"})),n.textToSpeechRulesOptions=f(p({},n.textToSpeechRulesOptions),{rate:n.speechEngineRate}));let o=(r=window.SRE)!=null?r:globalThis.sre.System.getInstance();n.textToSpeechRulesOptions&&o.setupEngine(n.textToSpeechRulesOptions);let c="";try{c=o.toSpeech(s)}catch(d){console.error("MathLive 0.106.0: `SRE.toSpeech()` runtime error",d)}return c}return""}let a=$("math",t);if(n.textToSpeechMarkup==="ssml"){let s="";n.speechEngineRate&&(s='<prosody rate="'+n.speechEngineRate+'">'),a='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+s+"<p><s>"+a+"</s></p>"+(s?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else n.textToSpeechMarkup==="mac"&&kt()==="macos"?a=a.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):a=a.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return a}var Ht={"\\ne":"≠","\\neq":"≠","−":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\>":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" ","\\infty":"oo","\\R":"RR","\\mathbb{R}":"RR","\\N":"NN","\\mathbb{N}":"NN","\\Z":"ZZ","\\mathbb{Z}":"ZZ","\\Q":"QQ","\\mathbb{Q}":"QQ","\\C":"CC","\\mathbb{C}":"CC","\\emptyset":"O/","\\varnothing":"O/","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega"},ko={"\\pm":"+-","\\colon":" : ","\\sum":" sum ","\\prod":" prod ","\\bigcap":" nnn ","\\bigcup":" uuu ","\\int":" int ","\\oint":" oint ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" AA ","\\exists":" EE ","\\in":" in ","\\notin":" !in ","\\mapsto":"|->","\\implies":"=>","\\iff":"<=>","\\cdot":" * ","\\ast":" ** ","\\star":" *** ","\\times":" * ","\\div":" -: ","\\ltimes":" |>< ","\\rtimes":" ><| ","\\bowtie":" |><| ","\\circ":"@"},Es={"\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrack":"[","\\rbrack":"]","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"};function ub(t){let e="";for(let r of t){let n=e[e.length-1];n!==void 0&&(/\d$/.test(n)&&/^\d/.test(r)||/[a-zA-Z]$/.test(n)&&/^[a-zA-Z]/.test(r))&&(e+=" "),e+=r}return e}function ne(t,e){var r,n,a,s,o,c,d,m,y,A,P,Z,me,_e,Ge,ve,He;if(!t)return"";if(Y(t)){if(t.length===0)return"";if(t[0].mode==="latex")return t.map(Os=>ne(Os)).join("");if(t[0].mode==="text"){let Os=0,vh="";for(;((r=t[Os])==null?void 0:r.mode)==="text";)vh+=t[Os].body?ne(t[Os].body,e):t[Os].value,Os++;return e!=null&&e.plain?vh+ne(t.slice(Os),e):`"${vh}" ${ne(t.slice(Os))}`}let li=0,An=[];for(;t[li]&&t[li].mode==="math";){let Os="";for(;t[li]&&t[li].type==="mord"&&/\d/.test(t[li].value);)Os+=t[li++].value;Os?An.push(Os):An.push(ne(t[li++],e))}return An.push(ne(t.slice(li),e)),ub(An)}if(t.mode==="text")return e!=null&&e.plain?t.value:`"${t.value}"`;let De="",{command:Xe}=t,Bs;if(Xe==="\\placeholder")return`(${ne(t.body,e)})`;let wt=b.serialize([t],{expandMacro:!1,defaultMode:"math"});switch(t.type){case"accent":let li={"\\vec":"vec","\\dot":"dot","\\ddot":"ddot","\\bar":"bar","\\hat":"hat","\\acute":"acute;","\\grave":"grave","\\tilde":"tilde","\\breve":"breave","\\check":"check"}[Xe];De=`${li??""} ${ne(t.body,e)} `;break;case"first":return"";case"latexgroup":return t.body.map(Os=>Os.value).join("");case"group":case"root":De=(n=Ht[Xe])!=null?n:ne(t.body,e);break;case"genfrac":{let Os=t;(Os.leftDelim||Os.rightDelim)&&(De=Os.leftDelim==="."||!Os.leftDelim?"{:":Os.leftDelim),Os.hasBarLine?(De+="(",De+=ne(Os.above,e),De+=")/(",De+=ne(Os.below,e),De+=")"):(De+="((",De+=ne(Os.above,e),De+=") choose (",De+=ne(Os.below,e),De+="))"),(Os.leftDelim||Os.rightDelim)&&(De+=Os.rightDelim==="."||!Os.rightDelim?"{:":Os.rightDelim)}break;case"surd":t.hasEmptyBranch("above")?De+=`sqrt(${ne(t.body,e)})`:De+=`root(${ne(t.above,e)})(${ne(t.body,e)})`;break;case"latex":De=t.value;break;case"leftright":{let Os=t,vh=Os.leftDelim;vh&&Es[vh]&&(vh=Es[vh]),De+=vh==="."||!vh?"{:":vh,De+=ne(Os.body,e);let Fc=Os.matchingRightDelim();Fc&&Es[Fc]&&(Fc=Es[Fc]),De+=Fc==="."||!Fc?":}":Fc}break;case"sizeddelim":case"delim":De=t.value;break;case"overlap":break;case"overunder":break;case"mord":if(Ht[wt])return Ht[wt];De=(o=(s=(a=Ht[Xe])!=null?a:Xe)!=null?s:Xe)!=null?o:typeof t.value=="string"?t.value:"",De.startsWith("\\")&&(De+=" "),Bs=Xe?Xe.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null,Bs?De=String.fromCodePoint(Number.parseInt("0x"+Bs[1])):De.length>0&&De.startsWith("\\")&&(De=typeof t.value=="string"?t.value.charAt(0):t.command),De=db(De,t.style);break;case"mbin":case"mrel":case"minner":De=(m=(d=(c=Ht[wt])!=null?c:Ht[Xe])!=null?d:ko[Xe])!=null?m:t.value;break;case"mopen":case"mclose":De=t.value;break;case"mpunct":De=(y=ko[Xe])!=null?y:Xe;break;case"mop":case"operator":case"extensible-symbol":t.value!=="​"&&(ko[Xe]?De=ko[Xe]:De=Xe==="\\operatorname"?ne(t.body,e):(A=t.value)!=null?A:Xe,De+=" ");break;case"array":let An=t.environmentName;if(t.isMultiline)De=t.rows.map(Os=>Os.map(vh=>ne(vh,e)).join("")).join(`
`);else{let Os=(P={bmatrix:["[","]"],"bmatrix*":["[","]"]}[An])!=null?P:["(",")"],vh=[],Fc=t.rows;for(let qc of Fc){let e1=[];for(let df of qc)e1.push(ne(df,e));vh.push(Os[0]+e1.join(",")+Os[1])}let Hc=(Z={bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]}[An])!=null?Z:["(",")"];De=Hc[0]+vh.join(",")+Hc[1]}break;case"box":break;case"spacing":De=(_e=(me=Ht[wt])!=null?me:Ht[Xe])!=null?_e:" ";break;case"enclose":De="("+ne(t.body,e)+")";break;case"space":De=" ";break;case"subsup":De="";break;case"macro":De=(He=(ve=(Ge=Ht[wt])!=null?Ge:Ht[Xe])!=null?ve:ko[Xe])!=null?He:ne(t.body,e);break}if(!t.hasEmptyBranch("subscript")){De+="_";let li=ne(t.subscript,e);De+=li.length!==1?`(${li})`:li}if(!t.hasEmptyBranch("superscript")){De+="^";let li=ne(t.superscript,e);De+=li.length!==1?`(${li})`:li}return De}function db(t,e){if(!e)return t;let r=t;return e.variant==="double-struck"&&(r=`bbb "${r}"`),e.variant==="script"&&(r=`cc "${r}"`),e.variant==="fraktur"&&(r=`fr "${r}"`),e.variant==="sans-serif"&&(r=`sf "${r}"`),e.variant==="monospace"&&(r=`tt "${r}"`),e.variantStyle==="bold"&&(r=`bb "${r}"`),e.color?`color({${e.color}})(${r})`:r}function de(t,e){var r;let n=f(p({},Jn()),{renderPlaceholder:()=>new _(160,{maxFontSize:1})}),a=(r=void 0)!=null?r:"math",s="math",o="displaystyle";a==="inline-math"?o="textstyle":a==="math"?o="displaystyle":a==="text"&&(o="textstyle",s="text");let c=new O({from:n}),d=new b({type:"root",mode:s,body:he(t,{context:c,parseMode:s,mathstyle:o})}).render(c);return d?(_r(It(d,c)),Mr(d,{classes:"ML__latex"}).toMarkup()):""}function Lo(t){if(typeof t=="string"){let e=mb(t);if(!e)throw new Error(`Invalid color: ${t}`);return e}return"C"in t?hb(t):"a"in t?rh(t):t}function Mi(t){return t<0?0:t>255?255:Math.round(t)}function mb(t){if(!t||t[0]!=="#")return;t=t.slice(1);let e;return t.length<=4?(e={r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)},t.length===4&&(e.a=parseInt(t[3]+t[3],16)/255)):(e={r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)},t.length===8&&(e.a=parseInt(t[6]+t[7],16)/255)),e&&typeof e.a>"u"&&(e.a=1),e}function Kc(t){let[e,r,n]=[t.L,t.C,t.H],a=n*Math.PI/180,s={L:e,a:r*Math.cos(a),b:r*Math.sin(a)};return t.alpha!==void 0&&(s.alpha=t.alpha),s}function pb(t){let[e,r,n]=[t.L,t.a,t.b],a=Math.sqrt(r*r+n*n),s=Math.atan2(n,r)*180/Math.PI,o={L:e,C:a,H:s};return t.alpha!==void 0&&(o.alpha=t.alpha),o}function Ec(t){let[e,r,n]=[t.L,t.a,t.b],a=Math.pow(.9999999984505198*e+.39633779217376786*r+.2158037580607588*n,3),s=Math.pow(1.00000000888176*e-.10556134232365635*r-.0638541747717059*n,3),o=Math.pow(e*1.000000054672411-.0894841820949657*r-1.2914855378640917*n,3),c=4.076741661347994*a-3.307711590408193*s+.230969928729428*o,d=-1.2684380040921763*a+2.6097574006633715*s-.3413193963102197*o,m=-.004196086541837188*a-.7034186144594493*s+1.7076147009309444*o,y=A=>{let P=Math.abs(A);return P<=.0031308?A*12.92:(Math.sign(A)||1)*(1.055*Math.pow(P,1/2.4)-.055)};return[y(c),y(d),y(m)]}function Tc(t){let[e,r,n]=t;return e>=0&&e<=1&&r>=0&&r<=1&&n>=0&&n<=1}function Dc(t,e){let[r,n,a]=t;return r=Mi(r*255),n=Mi(n*255),a=Mi(a*255),e!==void 0?{r,g:n,b:a,alpha:e}:{r,g:n,b:a}}function rh(t){let[e,r,n]=Ec(t);if(Tc([e,r,n]))return Dc([e,r,n],t.alpha);let a=pb(t);if(a.C=0,[e,r,n]=Ec(Kc(a)),!Tc([e,r,n]))return Dc([e,r,n],t.alpha);let s=0,o=t.L,c=(s+o)/2;a.C=c;let d=.36/Math.pow(2,12);for(;o-s>d;)c=(s+o)/2,a.C=c,[e,r,n]=Ec(Kc(a)),Tc([e,r,n])?s=c:o=c;return Dc([e,r,n],t.alpha)}function hb(t){return rh(Kc(t))}function ih(t,e){let r=Lo(t),n=Lo(e),a=.56,s=.57,o=.62,c=.65,d=.022,m=1.414,y=.1,A=5e-4,P=1.14,Z=.027,me=1.14,_e=.027;function Ge(li){return li>=d?li:li+(d-li)**m}function ve(li){return(li<0?-1:1)*Math.pow(Math.abs(li),2.4)}let He=Ge(ve(n.r/255)*.2126729+ve(n.g/255)*.7151522+ve(n.b/255)*.072175),De=Ge(ve(r.r/255)*.2126729+ve(r.g/255)*.7151522+ve(r.b/255)*.072175),Xe,Bs,wt;return Math.abs(De-He)<A?Bs=0:De>He?(Xe=De**a-He**s,Bs=Xe*P):(Xe=De**c-He**o,Bs=Xe*me),Math.abs(Bs)<y?wt=0:Bs>0?wt=Bs-_e:wt=Bs+Z,wt*100}function Oc(t,e,r){r!=null||(r="#fff"),e!=null||(e="#000");let n=ih(t,r),a=ih(t,e);return Math.abs(n)>Math.abs(a)?r:e}function nh(t){let e=Lo(t),r=((1<<24)+(Mi(e.r)<<16)+(Mi(e.g)<<8)+Mi(e.b)).toString(16).slice(1);return e.alpha!==void 0&&e.alpha<1&&(r+=("00"+Math.round(e.alpha*255).toString(16)).slice(-2)),r[0]===r[1]&&r[2]===r[3]&&r[4]===r[5]&&r[6]===r[7]&&(r=r[0]+r[2]+r[4]+(e.alpha!==void 0&&e.alpha<1?r[6]:"")),"#"+r}function te(t){let e=oh(t),r="";for(let n of e){if(typeof n.value!="string")return"";r+=n.value}return r}function oh(t){let e=t.model.selection.ranges;if(e.length!==1)return[];let r=t.model.getAtoms(e[0]);return r.length===1&&r[0].isRoot&&(r=r[0].children),r.filter(n=>n.type!=="first")}function fb(t,e){let r=oh(t);if(r.length!==1)return!1;let n=Za[e];return n?!!n.test(r[0].value):!1}function gb(t){return te(t).length>0}function bb(t){return[Rc(t,"double-struck","mathbb","tooltip.blackboard"),Rc(t,"fraktur","mathfrak","tooltip.fraktur"),Rc(t,"calligraphic","mathcal","tooltip.caligraphic"),Pc(t,"up","mathrm","tooltip.roman-upright"),Pc(t,"bold","bm","tooltip.bold"),Pc(t,"italic","mathit","tooltip.italic")]}function yb(t){return[{id:"accent-vec",class:"ML__center-menu",label:()=>de(`\\vec{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\vec{#@}",{selectionMode:"item"})},{id:"accent-overrightarrow",class:"ML__center-menu",label:()=>de(`\\overrightarrow{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overrightarrow{#@}",{selectionMode:"item"})},{id:"accent-overleftarrow",class:"ML__center-menu",label:()=>de(`\\overleftarrow{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overleftarrow{#@}",{selectionMode:"item"})},{id:"accent-dot",class:"ML__center-menu",label:()=>de(`\\dot{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\dot{#@}",{selectionMode:"item"})},{id:"accent-ddot",class:"ML__center-menu",label:()=>de(`\\ddot{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\ddot{#@}",{selectionMode:"item"})},{id:"accent-bar",class:"ML__center-menu",label:()=>de(`\\bar{${te(t)}}`),visible:()=>te(t).length===1,onMenuSelect:()=>t.insert("\\bar{#@}",{selectionMode:"item"})},{id:"accent-overline",class:"ML__center-menu",label:()=>de(`\\overline{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overline{#@}",{selectionMode:"item"})},{id:"accent-overgroup",class:"ML__center-menu",label:()=>de(`\\overgroup{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overgroup{#@}",{selectionMode:"item"})},{id:"accent-overbrace",class:"ML__center-menu",label:()=>de(`\\overbrace{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\overbrace{#@}",{selectionMode:"item"})},{id:"accent-underline",class:"ML__center-menu",label:()=>de(`\\underline{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\underline{#@}",{selectionMode:"item"})},{id:"accent-undergroup",class:"ML__center-menu",label:()=>de(`\\undergroup{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\undergroup{#@}",{selectionMode:"item"})},{id:"accent-underbrace",class:"ML__center-menu",label:()=>de(`\\underbrace{${te(t)}}`),visible:()=>te(t).length>0,onMenuSelect:()=>t.insert("\\underbrace{#@}",{selectionMode:"item"})}]}function xb(t){return[{id:"decoration-boxed",label:()=>de(`\\boxed{${t.getValue(t.model.selection)}}}`),onMenuSelect:()=>t.insert("\\boxed{#@}",{selectionMode:"item"})},{id:"decoration-red-box",label:()=>de(`\\bbox[5px, border: 2px solid red]{${t.getValue(t.model.selection)}}`),onMenuSelect:()=>t.insert("\\bbox[5px, border: 2px solid red]{#@}",{selectionMode:"item"})},{id:"decoration-dashed-black-box",label:()=>de(`\\bbox[5px, border: 2px dashed black]{${t.getValue(t.model.selection)}}`),onMenuSelect:()=>t.insert("\\bbox[5px, border: 2px dashed black]{#@}",{selectionMode:"item"})}]}function vb(t){let e=[];for(let r of Object.keys(Ut))e.push({id:`background-color-${r}`,class:(nh(Oc(Ut[r]))==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${Ut[r]} "></span>`,ariaLabel:()=>{var n;return(n=z(r))!=null?n:r},checked:()=>{var n;return(n={some:"mixed",all:!0}[t.queryStyle({backgroundColor:r})])!=null?n:!1},onMenuSelect:()=>t.applyStyle({backgroundColor:r},{operation:"toggle"})});return e}function _b(t){let e=[];for(let r of Object.keys(jt))e.push({id:`color-${r}`,class:(Oc(jt[r])==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${jt[r]} "></span>`,ariaLabel:()=>{var n;return(n=z(r))!=null?n:r},checked:()=>{var n;return(n={some:"mixed",all:!0}[t.queryStyle({color:r})])!=null?n:!1},onMenuSelect:()=>t.applyStyle({color:r},{operation:"toggle"})});return e}var zc=class extends vn{constructor(t,e,r,n){super(t,e),this.row=r,this.col=n}set active(t){let e=this.parentMenu.children;if(t)for(let r of e)r.element.classList.toggle("active",r.row<=this.row&&r.col<=this.col);else for(let r of e)r.element.classList.remove("active")}};function Mb(t){let e=[];for(let r=1;r<=5;r++)for(let n=1;n<=5;n++)e.push({id:`insert-matrix-${r}x${n}`,onCreate:(a,s)=>new zc(a,s,r,n),label:"☐",tooltip:()=>z("tooltip.row-by-col",r,n),data:{row:r,col:n},onMenuSelect:()=>{t.insert(`\\begin{pmatrix}${Array(r).fill(Array(n).fill("#?").join(" & ")).join("\\\\")}\\end{pmatrix}`,{selectionMode:"item"})}});return e}function ah(t){return[{label:()=>z("menu.array.add row above"),id:"add-row-above",onMenuSelect:()=>t.executeCommand("addRowBefore"),keyboardShortcut:"shift+alt+[Return]",visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[n,a]=Sn(t);return e!==n}},{label:()=>z("menu.array.add row below"),id:"add-row-below",onMenuSelect:()=>t.executeCommand("addRowAfter"),keyboardShortcut:"alt+[Return]",visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[n,a]=Sn(t);return e!==n}},{label:()=>z("menu.array.add column before"),id:"add-column-before",onMenuSelect:()=>t.executeCommand("addColumnBefore"),visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[n,a]=Sn(t);return r!==a},keyboardShortcut:"shift+alt+[Tab]",enabled:()=>{let e=t.model.parentEnvironment;if(!e)return!1;let[r,n]=Bc(t);return r<e.maxColumns}},{label:()=>z("menu.array.add column after"),id:"add-column-after",onMenuSelect:()=>t.executeCommand("addColumnAfter"),keyboardShortcut:"alt+[Tab]",visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[n,a]=Sn(t);return r!==a}},{type:"divider"},{label:()=>z("menu.array.delete row"),id:"delete-row",onMenuSelect:()=>t.executeCommand("removeRow"),enabled:()=>{let[e,r]=Fr(t),[n,a]=Bc(t);return n>e},visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[n,a]=Sn(t);return e!==n}},{label:()=>z("menu.array.delete column"),id:"delete-column",onMenuSelect:()=>t.executeCommand("removeColumn"),enabled:()=>{let[e,r]=Fr(t),[n,a]=Bc(t);return a>r},visible:()=>{if(!t.isSelectionEditable||!wi(t))return!1;let[e,r]=Fr(t),[n,a]=Sn(t);return r!==a}},{type:"divider"},{label:()=>z("menu.borders"),visible:()=>(wb(t)||wi(t))&&t.isSelectionEditable,submenu:[{label:" ⋱ ",id:"environment-no-border",onMenuSelect:()=>Ao(t,"matrix")},{label:"(⋱)",id:"environment-parentheses",onMenuSelect:()=>Ao(t,"pmatrix")},{label:"[⋱]",id:"environment-brackets",onMenuSelect:()=>Ao(t,"bmatrix")},{label:"|⋱|",id:"environment-bar",onMenuSelect:()=>Ao(t,"vmatrix")},{label:"{⋱}",id:"environment-braces",onMenuSelect:()=>Ao(t,"Bmatrix")}],submenuClass:"border-submenu"},{type:"divider"},{label:()=>z("menu.insert matrix"),id:"insert-matrix",visible:()=>t.isSelectionEditable,submenu:Mb(t),submenuClass:"insert-matrix-submenu",columnCount:5},{type:"divider"},{label:()=>z("menu.insert"),id:"insert",submenu:Sb(t)},{type:"divider"},{label:()=>z("menu.mode"),id:"mode",visible:()=>t.isSelectionEditable&&t.model.selectionIsCollapsed,submenu:[{label:()=>z("menu.mode-math"),id:"mode-math",onMenuSelect:()=>{$t(t,"accept-all"),t.executeCommand(["switchMode","math"])},checked:()=>t.model.mode==="math"},{label:()=>z("menu.mode-text"),id:"mode-text",onMenuSelect:()=>{$t(t,"accept-all"),t.executeCommand(["switchMode","text"])},checked:()=>t.model.mode==="text"},{label:()=>z("menu.mode-latex"),id:"mode-latex",onMenuSelect:()=>t.executeCommand(["switchMode","latex"]),checked:()=>t.model.mode==="latex"}]},{type:"divider"},{label:()=>z("menu.font-style"),id:"variant",visible:()=>t.isSelectionEditable,submenu:bb(t),submenuClass:"variant-submenu"},{label:()=>z("menu.color"),id:"color",visible:()=>t.isSelectionEditable,submenu:_b(t),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>z("menu.background-color"),id:"background-color",visible:()=>t.isSelectionEditable,submenu:vb(t),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>z("menu.accent"),id:"accent",visible:()=>t.isSelectionEditable,submenu:yb(t),submenuClass:"variant-submenu"},{label:()=>z("menu.decoration"),id:"decoration",visible:()=>t.isSelectionEditable&&te(t).length>0,submenu:xb(t),submenuClass:"variant-submenu"},{type:"divider"},{label:()=>z("menu.evaluate"),id:"ce-evaluate",visible:()=>t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{let e=kb(t);if(!e){t.model.announce("plonk");return}t.model.selectionIsCollapsed?(t.model.position=t.model.lastOffset,t.insert(`=${e}`,{insertionMode:"insertAfter",selectionMode:"item"})):t.insert(e,{insertionMode:"replaceSelection",selectionMode:"item"})}},{label:()=>z("menu.simplify"),id:"ce-simplify",visible:()=>t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{var e,r;if(t.model.selectionIsCollapsed){let n=(e=t.expression)==null?void 0:e.simplify();if(t.model.position=t.model.lastOffset,!n){t.model.announce("plonk");return}t.insert(`=${n.latex}`,{insertionMode:"insertAfter",selectionMode:"item"})}else{let n=(r=globalThis.MathfieldElement.computeEngine)==null?void 0:r.parse(t.getValue(t.model.selection)).simplify();if(!n){t.model.announce("plonk");return}t.insert(n.latex,{insertionMode:"replaceSelection",selectionMode:"item"})}}},{label:()=>{var e;let r=globalThis.MathfieldElement.computeEngine;if(r===null)return"";let n=(e=t.expression)==null?void 0:e.unknowns[0];if(n){let a=r.box(n).latex;return z("menu.solve-for",de(a))}return z("menu.solve")},id:"ce-solve",visible:()=>{var e;return t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null&&((e=t.expression)==null?void 0:e.unknowns.length)===1&&t.expression.unknowns[0]!=="Nothing"},onMenuSelect:()=>{var e;let r=t.expression,n=r?.unknowns[0],a=(e=r.solve(n))==null?void 0:e.map(s=>{var o;return(o=s.simplify().latex)!=null?o:""});if(!a){t.model.announce("plonk");return}t.insert(`${n}=${a.length===1?a[0]:"\\left\\lbrace"+a?.join(", ")+"\\right\\rbrace"}`,{insertionMode:"replaceAll",selectionMode:"item"})}},{type:"divider"},{label:()=>z("menu.cut"),id:"cut",onMenuSelect:()=>t.executeCommand("cutToClipboard"),visible:()=>!t.options.readOnly&&t.isSelectionEditable,keyboardShortcut:"meta+X"},{label:()=>z("menu.copy"),id:"copy",submenu:[{label:()=>z("menu.copy-as-latex"),id:"copy-latex",onMenuSelect:()=>V.copyToClipboard(t,"latex"),keyboardShortcut:"meta+C"},{label:()=>z("menu.copy-as-typst"),id:"copy-latex",onMenuSelect:()=>V.copyToClipboard(t,"typst")},{label:()=>z("menu.copy-as-ascii-math"),id:"copy-ascii-math",onMenuSelect:()=>V.copyToClipboard(t,"ascii-math")},{label:()=>z("menu.copy-as-mathml"),id:"copy-math-ml",onMenuSelect:()=>V.copyToClipboard(t,"math-ml")}]},{label:()=>z("menu.paste"),id:"paste",onMenuSelect:()=>t.executeCommand("pasteFromClipboard"),visible:()=>t.hasEditableContent,keyboardShortcut:"meta+V"},{label:()=>z("menu.select-all"),id:"select-all",keyboardShortcut:"meta+A",onMenuSelect:()=>t.executeCommand("selectAll")}]}function wi(t){var e,r;let n=(r=(e=t.model.parentEnvironment)==null?void 0:e.environmentName)!=null?r:"";return["array","matrix","pmatrix","bmatrix","vmatrix","Bmatrix"].includes(n)}function wb(t){let e=t.model.at(t.model.position);if(e.type!=="array")return!1;let r=e.environmentName;return["matrix","pmatrix","bmatrix","vmatrix","Bmatrix"].includes(r)}function Bc(t){var e;let r=(e=t.model.parentEnvironment)==null?void 0:e.rows;return r?[r.length,r.reduce((n,a)=>Math.max(n,a.length),0)]:[0,0]}function Fr(t){let e=t.model.parentEnvironment;return e?[e.minRows,e.minColumns]:[0,0]}function Sn(t){let e=t.model.parentEnvironment;return e?[e.maxRows,e.maxColumns]:[0,0]}function Ao(t,e){di(t),t.flushInlineShortcutBuffer(),uc(t.model,e),U(t)}function kb(t){var e,r;let n;if(t.model.selectionIsCollapsed?n=(e=globalThis.MathfieldElement.computeEngine)==null?void 0:e.parse(t.getValue(),{canonical:!1}):n=(r=globalThis.MathfieldElement.computeEngine)==null?void 0:r.parse(t.getValue(t.model.selection),{canonical:!1}),!n)return"";let a=n.evaluate();return a.isSame(n)&&(a=n.N()),a.latex}function Rc(t,e,r,n){return{id:`variant-${e}`,label:()=>{var a;return te(t).length<12?de(`\\${r}{${te(t)}}`):(a=z(n))!=null?a:n},class:"ML__xl",tooltip:()=>{var a;return(a=z(n))!=null?a:n},visible:()=>fb(t,e),checked:()=>{var a;return(a={some:"mixed",all:!0}[t.queryStyle({variant:e})])!=null?a:!1},onMenuSelect:()=>t.applyStyle({variant:e},{operation:"toggle"})}}function Pc(t,e,r,n){return{id:`variant-style-${e}`,label:()=>{var a;let s=te(t);return s.length>0&&s.length<12?de(`\\${r}{${te(t)}}`):(a=z(n))!=null?a:n},class:()=>{let a=te(t);return a.length>0&&a.length<12?"ML__xl":""},tooltip:()=>{var a;return(a=z(n))!=null?a:n},visible:e==="bold"?!0:()=>gb(t),checked:()=>{var a;return(a={some:"mixed",all:!0}[t.queryStyle({variantStyle:e})])!=null?a:!1},onMenuSelect:()=>t.applyStyle({variantStyle:e},{operation:"toggle"})}}function Sb(t){return[{label:()=>je("abs"),id:"insert-abs",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("|#?|")},{label:()=>je("nth-root"),id:"insert-nth-root",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\sqrt[#?]{#?}")},{label:()=>je("log-base"),id:"insert-log-base",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\log_{#?}{#?}")},{type:"heading",label:()=>z("menu.insert.heading-calculus")},{label:()=>je("derivative"),id:"insert-derivative",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\dfrac{\\mathrm{d}}{\\mathrm{d}x}#?\\bigm|_{x=#?}")},{label:()=>je("nth-derivative"),id:"insert-nth-derivative",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\dfrac{\\mathrm{d}^#?}{\\mathrm{d}x^#?}#?\\bigm|_{x=#?}")},{label:()=>je("integral"),id:"insert-integral",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\int_#?^#?#?\\,\\mathrm{d}#?")},{label:()=>je("sum"),id:"insert-sum",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\sum_#?^#?#?")},{label:()=>je("product"),id:"insert-product",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\prod_#?^#?#?")},{type:"heading",label:()=>z("menu.insert.heading-complex-numbers")},{label:()=>je("modulus"),id:"insert-modulus",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\lvert#?\\rvert")},{label:()=>je("argument"),id:"insert-argument",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\arg(#?)")},{label:()=>je("real-part"),id:"insert-real-part",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\Re(#?)")},{label:()=>je("imaginary-part"),id:"insert-imaginary-part",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\Im(#?)")},{label:()=>je("conjugate"),id:"insert-conjugate",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\overline{#?}")}]}function je(t){return`<span class='ML__insert-template'> ${de(z(`menu.insert.${t}-template`))}</span><span class="ML__insert-label">${z(`menu.insert.${t}`)}</span>`}var ze={"\\ne":"!=","\\neq":"!=","−":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon.alt","\\varepsilon":"epsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta.alt","\\vartheta":"theta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi.alt","\\varphi":"phi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" #h(-1em/6) ","\\,":" thin ","\\:":" med ","\\>":" med ","\\;":" thick ","\\enskip":"space.en","\\enspace":"space.en","\\qquad":"space.quad space.quad","\\quad":"space.quad","\\infty":"infinity","\\R":"RR","\\mathbb{R}":"RR","\\N":"NN","\\mathbb{N}":"NN","\\Z":"ZZ","\\mathbb{Z}":"ZZ","\\Q":"QQ","\\mathbb{Q}":"QQ","\\C":"CC","\\mathbb{C}":"CC","\\emptyset":"emptyset","\\varnothing":"nothing","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega","\\vert":" | ","\\Vert":" || ","\\mid":" divides ","\\lbrack":" bracket.l ","\\rbrack":" bracket.r ","\\lbrace":" brace.l ","\\rbrace":" brace.r ","\\lparen":" paren.l ","\\rparen":" paren.r ","\\langle":" angle.l ","\\rangle":" angle.r ","\\differentialD":" dif ","\\diamond":" diamond.stroked.small ","\\square":" square.stroked.small ","\\lceil":" ceil.l ","\\rceil":" ceil.r ","\\lfloor":" floor.l ","\\rfloor":" floor.r ","\\aleph":" aleph ","\\bet":" bet ","\\gimel":" gimel ","\\dalet":" dalet ","\\mod":" mod ","\\equiv":" equiv ","\\subset":" subset ","\\supset":" supset ","\\subseteq":" subset.eq ","\\supseteq":" supset.eq ","\\subsetneq":" subset.neq ","\\supsetneq":" supset.neq ","\\supsetneqq":" supset.neq ","\\nsubset":" subset.not ","\\nsupset":" supset.not ","\\nsubseteq":" subset.eq.not ","\\nsupseteq":" supset.eq.not ","\\approx":" approx ","\\uparrow":" arrow.t ","\\downarrow":" arrow.b ","\\rightarrow":" arrow.r ","\\leftarrow":" arrow.l ","\\longmapsto":" mapsto.long ","\\longmapsfrom":" arrow.l.bar.long ","/":"\\/","&":"&"},sh={"[":" bracket.l ","]":" bracket.r ","{":" brace.l ","}":" brace.r ","(":" paren.l ",")":" paren.r ","<":" angle.l ",">":" angle.r ",".":""},lh={" bracket.l ":"["," bracket.r ":"]"," brace.l ":"{"," brace.r ":"}"," paren.l ":"("," paren.r ":")"," angle.l ":" angle.l "," angle.r ":" angle.r "},Co={"\\pm":"plus.minus","\\colon":" : ","\\sum":" sum ","\\prod":" product ","\\bigcap":" inter.big ","\\bigcup":" union.big ","\\int":" integral ","\\iint":" integral.double ","\\iiint":" integral.triple ","\\intop":" integral ","\\oint":" integral.cont ","\\oiint":" integral.surf ","\\oiiint":" integral.vol ","\\setminus":" without ","\\vdots":" without ","\\ddots":" dots.down ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" forall ","\\exists":" exists ","\\in":" in ","\\notin":" in.not ","\\mapsto":"|->","\\implies":"==>","\\iff":"<==>","\\cdot":" dot.op ","\\ast":" * ","\\star":" star.op ","\\times":" times ","\\div":" div ","\\ltimes":" times.l ","\\rtimes":" times.r ","\\bowtie":" ⋈ ","\\circ":" circle.stroked.small "},Lb={underarc:"underparen",underparen:"underparen",underbrace:"underbrace",underline:"underline",overarc:"overparen",overparen:"overparen",overbrace:"overbrace",overline:"overline",cancel:"cancel",displaystyle:"display",textstyle:"inline"},Ab={longrightarrow:t=>`arrow.r.long^(${re(t.above)})`,longleftarrow:t=>`arrow.l.long^(${re(t.above)})`};function Cb(t){let e="";for(let r of t){let n=e[e.length-1];n!==void 0&&(/\d$/.test(n)&&/^\d/.test(r)||/[a-zA-Z]$/.test(n)&&/^[a-zA-Z]/.test(r))&&(e+=" "),e+=r}return e}function re(t){var e,r,n,a,s,o,c,d,m,y,A,P,Z,me,_e,Ge,ve,He,De,Xe,Bs;if(!t)return"";if(Y(t)){if(t.length===0)return"";if(t[0].mode==="latex")return t.map(Hc=>re(Hc)).join("");if(t[0].mode==="text"){let Hc=0,qc="";for(;((e=t[Hc])==null?void 0:e.mode)==="text";)qc+=t[Hc].body?re(t[Hc].body):t[Hc].value,Hc++;return` "${qc}" ${re(t.slice(Hc))}`}let vh=0,Fc=[];for(;t[vh]&&t[vh].mode==="math";){let Hc="";for(;t[vh]&&t[vh].type==="mord"&&/\d/.test(t[vh].value);)Hc+=t[vh++].value;Hc?Fc.push(Hc):Fc.push(re(t[vh++]))}return Fc.push(re(t.slice(vh))),Cb(Fc)}if(t.mode==="text")return`"${t.value}"`;let wt="",{command:li}=t,An;if(li==="\\placeholder")return`"${re(t.body)}"`;let Os=b.serialize([t],{expandMacro:!0,defaultMode:"math"});switch(t.type){case"accent":let vh={"\\vec":"arrow","\\dot":"dot","\\ddot":"dot.double","\\bar":"overline","\\hat":"hat","\\acute":"acute","\\grave":"grave","\\tilde":"tilde","\\breve":"breve","\\check":"caron"}[li];wt=`${vh??""}(${re(t.body)}) `;break;case"first":return"";case"latexgroup":return t.body.map(Hc=>Hc.value).join("");case"group":case"root":wt=(r=ze[li])!=null?r:re(t.body);break;case"genfrac":{let Hc=t;Hc.hasBarLine?(wt+="(",wt+=re(Hc.above),wt+=")/(",wt+=re(Hc.below),wt+=")"):wt+=`binom(${re(Hc.above)}, ${re(Hc.below)})`}break;case"surd":t.hasEmptyBranch("above")?wt+=`sqrt(${re(t.body)})`:wt+=`root(${re(t.above)}, ${re(t.body)})`;break;case"latex":wt=t.value;break;case"leftright":{let Hc=t,qc=Hc.leftDelim;qc&&ze[qc]&&(qc=ze[qc]);let e1=Hc.matchingRightDelim();e1&&ze[e1]&&(e1=ze[e1]),qc&&(qc=(n=sh[qc])!=null?n:qc),e1&&(e1=(a=sh[e1])!=null?a:e1),qc&&e1?wt=`lr(${(s=lh[qc])!=null?s:qc}${re(Hc.body)}${(o=lh[e1])!=null?o:e1})`:wt=`lr(${qc}${re(Hc.body)}${e1})`}break;case"sizeddelim":case"delim":wt=t.value;break;case"overlap":break;case"mord":if(ze[Os])return ze[Os];wt=(m=(d=(c=ze[li])!=null?c:li)!=null?d:li)!=null?m:typeof t.value=="string"?t.value:"",wt.startsWith("\\")&&(wt+=" "),An=li?li.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null,An?wt=String.fromCodePoint(Number.parseInt("0x"+An[1])):wt.length>0&&wt.startsWith("\\")&&(wt=typeof t.value=="string"?t.value.charAt(0):t.command),wt=Eb(wt,t.style),wt=` ${wt} `;break;case"mbin":case"mrel":case"minner":wt=(P=(A=(y=ze[Os])!=null?y:ze[li])!=null?A:Co[li])!=null?P:t.value;break;case"mopen":case"mclose":wt=(Z=ze[Os])!=null?Z:t.value;break;case"mpunct":wt=(me=Co[li])!=null?me:li;break;case"mop":case"operator":case"extensible-symbol":t.value!=="​"&&(Co[li]?wt=Co[li]:wt=li==="\\operatorname"?re(t.body):(_e=t.value)!=null?_e:li,wt+=" ");break;case"array":let Fc=t.environmentName;if(t.isMultiline)wt=t.rows.map(Hc=>Hc.map(qc=>re(qc)).join("")).join(`
`);else{let Hc=t.rows,qc=Hc.map(df=>df.map(re).join(", ")),e1={pmatrix:'"("',bmatrix:'"["',"bmatrix*":'"["',Bmatrix:'"{"',vmatrix:'"|"',matrix:"#none"}[Fc];e1?wt=`mat(delim: ${e1}, ${qc.join(" ; ")})`:Fc==="cases"||Fc==="rcases"?wt=`cases(reverse: #${Fc==="rcases"}, ${qc.join(", ")})`:Fc==="aligned"?wt=Hc.map(df=>df.map(re).join(" & ")).join(" \\ "):wt=Hc.map(df=>df.map(re).join("")).join("")}break;case"box":break;case"spacing":wt=(ve=(Ge=ze[Os])!=null?Ge:ze[li])!=null?ve:" ";break;case"space":wt=" ";break;case"subsup":wt=(He=t.leftSibling)!=null&&He.value?"":'""';break;case"macro":wt=(Bs=(Xe=(De=ze[Os])!=null?De:ze[li])!=null?Xe:Co[li])!=null?Bs:re(t.body);break}if(!wt){let vh=Lb[t.command.slice(1)];vh&&(wt=`${vh}(${re(t.body)})`)}if(!wt){let vh=Ab[t.command.slice(1)];vh&&(wt=vh(t))}if(!t.hasEmptyBranch("subscript")){wt+="_";let vh=re(t.subscript);wt+=vh.length!==1?`(${vh})`:vh}if(!t.hasEmptyBranch("superscript")){wt+="^";let vh=re(t.superscript);wt+=vh.length!==1?`(${vh})`:vh}return wt}function Eb(t,e){if(!e)return t;let r=t;return e.variant==="double-struck"&&(r=`bb(${r})`),e.variant==="script"&&(r=`cal(${r})`),e.variant==="fraktur"&&(r=`frak(${r})`),e.variant==="sans-serif"&&(r=`sans(${r})`),e.variant==="monospace"&&(r=`mono(${r})`),e.variantStyle==="bold"&&(r=`bold(${r})`),r}function Vr(t,e){return typeof t=="string"?t+Mt(e):Mt(t)}function Ic(t){var e;let r;if(t.parent.type==="prompt")t.parentBranch==="body"&&(r="prompt");else if(t.parentBranch==="body"){if(t.type==="first"&&(t.parent.type==="root"?r="mathfield":t.parent.type==="surd"?r="radicand":t.parent.type==="genfrac"?r="fraction":t.parent.type==="sizeddelim"&&(r="delimiter"),r))return r;t.type==="subsup"?t.superscript&&t.subscript?r="superscript and subscript":t.superscript?r="superscript":t.subscript&&(r="subscript"):t.type&&(r=(e={accent:"accented",array:"array",box:"box",chem:"chemical formula",delim:"delimiter",enclose:"cross out","extensible-symbol":"extensible symbol",error:"error",first:"first",genfrac:"fraction",group:"group",latex:"LaTeX",leftright:"delimiter",line:"line",subsup:"subscript-superscript",operator:"operator",overunder:"over-under",placeholder:"placeholder",rule:"rule",sizeddelim:"delimiter",space:"space",spacing:"spacing",surd:"square root",text:"text",prompt:"prompt",root:"math field",mop:"operator"}[t.type])!=null?e:"parent")}else if(t.parent.type==="genfrac"){if(t.parentBranch==="above")return"numerator";if(t.parentBranch==="below")return"denominator"}else t.parent.type==="surd"?t.parentBranch==="above"&&(r="index"):t.parentBranch==="superscript"?r="superscript":t.parentBranch==="subscript"&&(r="subscript");return r??"parent"}function ch(t,e,r,n){let a="";if(e==="plonk"){globalThis.MathfieldElement.playSound("plonk"),t.flushInlineShortcutBuffer();return}if(e==="delete")a=Vr("deleted: ",n);else if(e==="focus"||e.includes("move"))a=Tb(t.model,r),a+=Db(t.model);else if(e==="replacement")a=Vr(t.model.at(t.model.position));else if(e==="line"){let s=Vr(t.model.root);t.keyboardDelegate.setAriaLabel(s)}else a=n?Vr(e+" ",n):e;if(a){let s=t.ariaLiveText.textContent.includes(" ")?"   ":"   ";t.ariaLiveText.textContent=a+s}}function Tb(t,e){if(Number.isNaN(e))return"";let r=t.at(e);if(!r||r.treeDepth<=t.at(t.position).treeDepth)return"";let n="",a=r.parent,s=t.at(t.position).parent;for(;a!==t.root&&a!==s;)n+=`out of ${Ic(a)};`,a=a.parent;return n}function Db(t){if(!t.selectionIsCollapsed)return`selected: ${Vr(t.getAtoms(t.selection))}`;let e="",r=t.at(t.position);if(r.isFirstSibling&&(e=`start of ${Ic(r)}: `),r.isLastSibling){if(!r.isFirstSibling){if(!r.parent.parent)return`${Vr(r)}; end of mathfield`;e=`${Vr(r)}; end of ${Ic(r)}`}}else e+=Vr(r);return e}var Ts=class{constructor(t,e,r){this.mathfield=t,this.mode=e,this.silenceNotifications=!1,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.root=r}dispose(){this.mathfield=void 0}getState(){let t={ranges:[...this._selection.ranges]};return this.selection.direction&&this.selection.direction!=="none"&&(t.direction=this.selection.direction),{content:this.root.toJson(),selection:t,mode:this.mode}}setState(t,e){var r;let n=this.silenceNotifications;this.silenceNotifications=(r=e?.silenceNotifications)!=null?r:!0;let a={};if(e?.type==="undo"&&(a={inputType:"historyUndo"}),e?.type==="redo"&&(a={inputType:"historyRedo"}),this.contentWillChange(a)){let s=this.silenceNotifications;this.silenceNotifications=!0,this.mode=t.mode,this.root=ft(t.content),this.selection=t.selection,this.silenceNotifications=s,this.contentDidChange(a),this.selectionDidChange()}this.silenceNotifications=n}get atoms(){return this.root.children}get selection(){return this._selection}set selection(t){this.setSelection(t)}setSelection(t,e){return!this.mathfield.contentEditable&&this.mathfield.userSelect==="none"?!1:this.deferNotifications({selection:!0,content:!0},()=>{var r,n,a;let s=this.normalizeSelection(t,e);if(s===void 0)throw new TypeError("Invalid selection");if(s.ranges.length===1&&s.ranges[0][0]===s.ranges[0][1]){let y=s.ranges[0][0];if(!this.mathfield.dirty&&!((r=this.at(y))!=null&&r.parentPrompt)&&this.mathfield.hasEditablePrompts){if((n=this.at(y-1))!=null&&n.parentPrompt){this._anchor=this.normalizeOffset(y-1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor);return}if((a=this.at(y+1))!=null&&a.parentPrompt){this._anchor=this.normalizeOffset(y+1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor);return}this._anchor=0,this._position=0,this._selection={ranges:[[0,0]]};return}this._anchor=y,this._position=y,this._selection=s;return}let o=le(s);s.direction==="backward"?[this._position,this._anchor]=o:[this._anchor,this._position]=o;let c=this.at(o[0]+1),d=this.at(o[1]),m=b.commonAncestor(c,d);m?.type==="array"&&c.parent===m&&d.parent===m?this._selection={ranges:[o],direction:s.direction}:this._selection={ranges:[o],direction:s.direction},this._position>=0&&this._position<=this.lastOffset})}setPositionHandlingPlaceholder(t){var e;let r=this.at(t);r?.type==="placeholder"?this.setSelection(t-1,t):((e=r?.rightSibling)==null?void 0:e.type)==="placeholder"?this.setSelection(t,t+1):this.position=t,r instanceof ue&&r.isSuggestion&&(r.isSuggestion=!1),this.mathfield.stopCoalescingUndo()}get position(){return this._position}set position(t){this.setSelection(t,t)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return Math.abs(this._anchor-this._position)===1?this.at(Math.max(this._anchor,this._position)).type==="placeholder":!1}collapseSelection(t="forward"){return this._anchor===this._position?!1:(t==="backward"?this.position=Math.min(this._anchor,this._position):this.position=Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(t){return this.atoms[t]}offsetOf(t){return this.atoms.indexOf(t)}getSiblingsRange(t){let e=this.at(t),{parent:r}=e;if(!r)return[0,this.lastOffset];let n=e.parent.branch(e.parentBranch);return[this.offsetOf(n[0]),this.offsetOf(n[n.length-1])]}getBranchRange(t,e){let r=this.at(t).branch(e);return[this.offsetOf(r[0]),this.offsetOf(r[r.length-1])]}getCellRange(t){var e;this.getParentCell(t);let r=this.at(t);if(r){for(;r&&((e=r.parent)==null?void 0:e.type)!=="array";)r=r.parent;if(!(!(r!=null&&r.parent)||r.parent.type!=="array"))return[this.offsetOf(r.firstSibling),this.offsetOf(r.lastSibling)]}}getAtoms(t,e,r){let n=r??{};if(Ui(t)){if(n=e??{},t.ranges.length>1)return t.ranges.reduce((m,y)=>[...m,...this.getAtoms(y,n)],[]);t=t.ranges[0]}let a,s;if(Ot(t)){if(a=t,!Ot(e))return[];s=e}else[a,s]=t,n=e??{};if(!Number.isFinite(a))return[];n.includeChildren===void 0&&(n.includeChildren=!1),a<0&&(a=this.lastOffset-a+1),s<0&&(s=this.lastOffset+s+1);let o=Math.min(a,s)+1,c=Math.max(a,s);if(!n.includeChildren&&o===1&&c===this.lastOffset)return[this.root];let d=[];for(let m=o;m<=c;m++){let y=this.atoms[m];uh(this,y,o,c)&&d.push(y)}return n.includeChildren||(d=d.filter(m=>{let y=!1,{parent:A}=m;for(;A&&!y;)y=uh(this,A,o,c),A=A.parent;return!y})),d}findAtom(t,e=0,r="forward"){let n,a=this.lastOffset;if(r==="forward"){for(let s=e;s<=a;s++)if(n=this.atoms[s],t(n))return n;for(let s=0;s<e;s++)if(n=this.atoms[s],t(n))return n;return}for(let s=e;s>=0;s--)if(n=this.atoms[s],t(n))return n;for(let s=a;s>e;s--)if(n=this.atoms[s],t(n))return n}extractAtoms(t){var e;let r=this.getAtoms(t);r.length===1&&!r[0].parent&&r[0].isRoot&&(r[0]instanceof I?r=r[0].rows.flatMap(n=>n.flatMap(a=>a)):r=[...(e=r[0].body)!=null?e:r[0].children],r=r.filter(n=>n.type!=="first"));for(let n of r)n.parent.removeChild(n);return r}deleteAtoms(t){t!=null||(t=[0,-1]),this.extractAtoms(t),this.position=t[0]}atomToString(t,e){let r=e??"latex";if(r.startsWith("latex"))return b.serialize([t],{expandMacro:r==="latex-expanded",skipStyles:r==="latex-unstyled",skipPlaceholders:r==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode});if(r==="math-ml")return H(t);if(r==="spoken")return Mt(t);if(r==="spoken-text"){let n=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="";let a=Mt(t);return globalThis.MathfieldElement.textToSpeechMarkup=n,a}if(r==="spoken-ssml"||r==="spoken-ssml-with-highlighting"){let n=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="ssml";let a=Mt(t);return globalThis.MathfieldElement.textToSpeechMarkup=n,a}return r==="typst"?re(t):r==="plain-text"?ne(t,{plain:!0}):r==="ascii-math"?ne(t):(console.error(`MathLive 0.106.0: Unexpected format "${r}`),"")}getValue(t,e,r){if(t===void 0)return this.atomToString(this.root,"latex");if(typeof t=="string"&&t!=="math-json")return this.atomToString(this.root,t);let n,a;if(Ot(t)&&Ot(e)?(n=[this.normalizeRange([t,e])],a=r):ti(t)?(n=[this.normalizeRange(t)],a=e):Ui(t)?(n=t.ranges,a=e):(n=[this.normalizeRange([0,-1])],a=t),a!=null||(a="latex"),a==="math-json"){if(!globalThis.MathfieldElement.computeEngine)return window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`The CortexJS Compute Engine library is not available.
Load the library, for example with:
import "https://esm.run/@cortex-js/compute-engine"`),'["Error", "compute-engine-not-available"]';let s=this.getValue({ranges:n},"latex-unstyled");try{let o=globalThis.MathfieldElement.computeEngine.parse(s);return JSON.stringify(o.json)}catch(o){return JSON.stringify(["Error",`'${o.toString()}'`])}}if(a.startsWith("latex")){let s={expandMacro:a==="latex-expanded",skipStyles:a==="latex-unstyled",skipPlaceholders:a==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode};return R(n.map(o=>b.serialize(this.getAtoms(o),s)))}return n.map(s=>this.getAtoms(s).map(o=>this.atomToString(o,a)).join("")).join("")}extendSelectionTo(t,e){return!this.mathfield.contentEditable&&this.mathfield.userSelect==="none"?!1:this.deferNotifications({selection:!0},()=>{let r=this.normalizeRange([t,e]),[n,a]=r,{parent:s}=this.at(a);if(s&&(s.type==="genfrac"||s.type==="subsup"))for(;s!==this.root&&Nc(this,s,[n,a]);)a=this.offsetOf(s),s=s.parent;for(s=this.at(n).parent;s!==this.root&&Nc(this,s,[n,a]);)n=this.offsetOf(s.leftSibling),s=s.parent;if(s=this.at(a).parent,s?.type==="genfrac")for(;s!==this.root&&Nc(this,s,[n,a]);)a=this.offsetOf(s),s=s.parent;this._position=this.normalizeOffset(e),this._selection={ranges:[[n,a]],direction:"none"}})}announce(t,e,r=[]){var n,a;((a=(n=this.mathfield.host)==null?void 0:n.dispatchEvent(new CustomEvent("announce",{detail:{command:t,previousPosition:e,atoms:r},cancelable:!0,bubbles:!0,composed:!0})))==null||a)&&ch(this.mathfield,t,e,r)}deferNotifications(t,e){let r=this._selection,n=this._anchor,a=this._position,s=this.silenceNotifications;this.silenceNotifications=!0;let o=this.root.changeCounter;e(),this.silenceNotifications=s;let c=n!==this._anchor||a!==this._position||am(this._selection,r)==="different";t.selection&&c&&this.selectionDidChange();let d=this.root.changeCounter!==o;return t.content&&d&&this.contentDidChange({inputType:t.type}),d||c}normalizeOffset(t){return t>0?t=Math.min(t,this.lastOffset):t<0&&(t=this.lastOffset+t+1),t}normalizeRange(t){let[e,r]=t;return e=this.normalizeOffset(e),r=this.normalizeOffset(r),e<r?[e,r]:[r,e]}normalizeSelection(t,e){var r;let n;if(Ot(t)){let a=this.normalizeOffset(t);if(Ot(e)){let s=this.normalizeOffset(e);n=a<=s?{ranges:[[a,s]],direction:"none"}:{ranges:[[s,a]],direction:"backward"}}else n={ranges:[[a,a]],direction:"none"}}else if(ti(t)){let a=this.normalizeOffset(t[0]),s=this.normalizeOffset(t[1]);n=a<=s?{ranges:[[a,s]],direction:"none"}:{ranges:[[s,a]],direction:"backward"}}else Ui(t)&&(n={ranges:t.ranges.map(a=>this.normalizeRange(a)),direction:(r=t.direction)!=null?r:"none"});return n}get parentEnvironment(){let t=this.at(this.position).parent;if(t){for(;t.parent&&t.type!=="array";)t=t.parent;if(t.type==="array")return t}}get parentCell(){return this.getParentCell(this.position)}getParentCell(t){var e;let r=this.at(t);if(r){for(;r&&((e=r.parent)==null?void 0:e.type)!=="array";)r=r.parent;if(!(!(r!=null&&r.parent)||r.parent.type!=="array"))return r.parentBranch}}contentWillChange(t={}){if(this.silenceNotifications||!this.mathfield)return!0;let e=this.silenceNotifications;this.silenceNotifications=!0;let r=this.mathfield.onContentWillChange(t);return this.silenceNotifications=e,r}contentDidChange(t){if(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this.mathfield)),this.silenceNotifications||!this.mathfield||!this.mathfield.host)return;let e=this.silenceNotifications;this.silenceNotifications=!0,setTimeout(()=>{var r;!this.mathfield||!rt(this.mathfield)||!this.mathfield.host||this.mathfield.host.dispatchEvent(new InputEvent("input",f(p({},t),{data:t.data?t.data:(r=t.inputType)!=null?r:"",bubbles:!0,composed:!0})))},0),this.silenceNotifications=e}selectionDidChange(){if(!this.mathfield)return;let t=this.silenceNotifications;t||(this.silenceNotifications=!0,this.mathfield.onSelectionDidChange()),this.silenceNotifications=t}};function uh(t,e,r,n){let a=t.offsetOf(e);if(a<r||a>n)return!1;if(!e.hasChildren)return!0;let s=t.offsetOf(e.firstChild);if(s>=r&&s<=n){let o=t.offsetOf(e.lastChild);if(o>=r&&o<=n)return!0}return!1}function Nc(t,e,r){if(!(e!=null&&e.hasChildren))return!1;let[n,a]=r,s=t.offsetOf(e.firstChild),o=t.offsetOf(e.lastChild);return s>=n&&s<=a&&o>=s&&o<=a}function Eo(t,e,r,n){var a,s,o,c,d,m;let y=r.parent;if(We(n)&&r instanceof I&&r.isMultiline&&Kb(t,r,n[0],e))return!0;if(y&&r instanceof G){let A=!n&&e==="forward"||n==="body"&&e==="backward",P=A?t.offsetOf(r.firstChild):t.offsetOf(r.lastChild);return A?r.rightDelim!=="?"&&r.rightDelim!=="."?(r.leftDelim=".",r.isDirty=!0):(y.addChildrenAfter(r.removeBranch("body"),r),y.removeChild(r),P--):r.leftDelim!=="?"&&r.leftDelim!=="."?(r.rightDelim=".",r.isDirty=!0):(y.addChildrenAfter(r.removeBranch("body"),r),y.removeChild(r),P--),t.position=P,!0}if(y&&r.type==="surd"){if(e==="forward"&&!n||e==="backward"&&n==="body"){let A=r.leftSibling;r.hasChildren&&y.addChildrenAfter(r.removeBranch("body"),r),y.removeChild(r),t.position=t.offsetOf(A)}else e==="forward"&&n==="body"?t.position=t.offsetOf(r):!n&&e==="backward"?r.hasChildren?t.position=t.offsetOf(r.lastChild):(t.position=Math.max(0,t.offsetOf(r)-1),y.removeChild(r)):n==="above"&&(r.hasEmptyBranch("above")&&r.removeBranch("above"),e==="backward"?t.position=t.offsetOf(r.leftSibling):t.position=t.offsetOf(r.body[0]));return!0}if(y&&(r.type==="box"||r.type==="enclose")){let A=n&&e==="backward"||!n&&e==="forward"?r.leftSibling:r.lastChild;return y.addChildrenAfter(r.removeBranch("body"),r),y.removeChild(r),t.position=t.offsetOf(A),!0}if(r.type==="genfrac"||r.type==="overunder"){if(!n)return r.type==="overunder"&&r.hasEmptyBranch("body")||r.type==="genfrac"&&r.hasEmptyBranch("below")&&r.hasEmptyBranch("above")?!1:(t.position=t.offsetOf(e==="forward"?r.firstChild:r.lastChild),!0);let A=xt.fractionNavigationOrder==="numerator-denominator"?"above":"below",P=A==="above"?"below":"above";if(y&&(e==="forward"&&n===A||e==="backward"&&n===P)){let Z=r.removeBranch(A),me=r.removeBranch(P);return y.addChildrenAfter([...Z,...me],r),y.removeChild(r),t.position=t.offsetOf(Z.length>0?Z[Z.length-1]:me[0]),!0}return e==="backward"?t.position=t.offsetOf(r.leftSibling):t.position=t.offsetOf(r),!0}if(r.type==="extensible-symbol"||r.type==="subsup"){if(!n&&e==="forward")return!1;if(!n){if(r.subscript||r.superscript){let A=e==="forward"?(o=(a=r.superscript)==null?void 0:a[0])!=null?o:(s=r.subscript)==null?void 0:s[0]:(m=(c=r.subscript)==null?void 0:c[0].lastSibling)!=null?m:(d=r.superscript)==null?void 0:d[0].lastSibling;return A&&(t.position=t.offsetOf(A)),!0}return!1}if(!r.hasChildren&&r.type==="subsup"){let A=e==="forward"?t.offsetOf(r):Math.max(0,t.offsetOf(r)-1);return r.parent.removeChild(r),t.position=A,!0}if(n==="superscript")if(e==="backward"){let A=t.offsetOf(r.firstChild)-1;t.position=A}else r.subscript?t.position=t.offsetOf(r.subscript[0]):t.position=t.offsetOf(r);else n==="subscript"&&(e==="backward"&&r.superscript?t.position=t.offsetOf(r.superscript[0].lastSibling):e==="backward"?t.position=t.offsetOf(r.firstChild)-1:t.position=t.offsetOf(r));if(n&&r.hasEmptyBranch(n)&&(r.removeBranch(n),r.type==="subsup"&&!r.subscript&&!r.superscript)){let A=e==="forward"?t.offsetOf(r):Math.max(0,t.offsetOf(r)-1);r.parent.removeChild(r),t.position=A}return!0}if(y?.type==="genfrac"&&!n&&r.type!=="first"){let A=t.offsetOf(r.leftSibling);return y.removeChild(r),y.hasEmptyBranch("above")&&y.hasEmptyBranch("below")?(A=t.offsetOf(y.leftSibling),y.parent.removeChild(y),t.announce("delete",void 0,[y]),t.position=A,!0):(t.announce("delete",void 0,[r]),t.position=A,!0)}if(e==="backward"&&(y?.command==="\\ln"||y?.command==="\\log")&&r.parentBranch!=="body"){let A=t.offsetOf(y.leftSibling);return y.parent.removeChild(y),t.announce("delete",void 0,[y]),t.position=A,!0}return!1}function dh(t){return!t.mathfield.isSelectionEditable||!t.contentWillChange({inputType:"deleteContentBackward"})?!1:t.selectionIsCollapsed?t.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let e=t.at(t.position);if(!(e&&Eo(t,"backward",e))){if(e!=null&&e.isFirstSibling){if(Eo(t,"backward",e.parent,e.parentBranch))return;e=null}if(!e){t.announce("plonk");return}t.position=t.offsetOf(e.leftSibling),e.parent.removeChild(e),t.announce("delete",void 0,[e])}}):Je(t,le(t.selection),"deleteContentBackward")}function mh(t){return!t.mathfield.isSelectionEditable||!t.contentWillChange({inputType:"deleteContentForward"})?!1:t.selectionIsCollapsed?t.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var e,r;let n=t.at(t.position).rightSibling;if(n&&Eo(t,"forward",n))return;if(n){if(t.at(t.position).isLastSibling&&Eo(t,"forward",n.parent,n.parentBranch))return}else{if(n=t.at(t.position),n.isLastSibling&&Eo(t,"forward",n.parent,n.parentBranch))return;n=void 0}if(t.position===t.lastOffset||!n){t.announce("plonk");return}n.parent.removeChild(n);let a=(e=t.at(t.position))==null?void 0:e.rightSibling;for(;a?.type==="subsup";)a.parent.removeChild(a),a=(r=t.at(t.position))==null?void 0:r.rightSibling;t.announce("delete",void 0,[n])}):Je(t,le(t.selection),"deleteContentForward")}function Je(t,e,r){let n=t.getAtoms(e);if(n.length>0&&n[0].parent){let a=n[0];for(;a&&!(a instanceof I);)a=a.parent;let s=n[n.length-1];for(;s&&!(s instanceof I);)s=s.parent;if(a&&a instanceof I){let y=a;if(y&&s===y&&y.isMultiline){let[A,P]=[Math.min(t.position,t.anchor),Math.max(t.position,t.anchor)],[Z,me]=t.at(A).parentBranch,[_e,Ge]=t.at(P).parentBranch;if(_e-Z+1>2){t.extractAtoms([A,P]);for(let He=Z+1;He<_e;He++)y.removeRow(He);return t.position=A,!0}}}let o=n[0].parent.firstChild;o.type==="first"&&(o=o.rightSibling);let c=n[n.length-1].parent.lastChild,d=n[0];d.type==="first"&&(d=d.rightSibling);let m=n[n.length-1];if(d===o&&m===c){let y=n[0].parent;y.parent&&y.type!=="prompt"&&(e=[t.offsetOf(y.leftSibling),t.offsetOf(y)])}if(n.length===1&&n[0].type==="placeholder"&&n[0].parent.type==="genfrac"){let y=n[0].parent,A=n[0].parentBranch==="below"?"above":"below",P=t.offsetOf(y.leftSibling);return t.deferNotifications({content:!0,selection:!0,type:r},()=>{var Z,me;let _e=y.removeBranch(A);if(_e.length===1&&_e[0].type==="placeholder")(me=y.parent)==null||me.removeChild(y),t.position=Math.max(0,P);else{let Ge=y.parent.addChildrenAfter(_e,y);(Z=y.parent)==null||Z.removeChild(y),t.position=t.offsetOf(Ge)}})}}return t.deferNotifications({content:!0,selection:!0,type:r},()=>t.deleteAtoms(e))}function Kb(t,e,r,n){if(!(e instanceof I)||!e.isMultiline||e.rows.length===1||e.rows[r].length>1)return!1;let a=e.getCell(r,0);if(e.removeRow(r),n==="backward"){let s=e.getCell(r-1,0);t.position=t.offsetOf(s[s.length-1]),e.setCell(r-1,0,[...s,...a])}else{let s=e.getCell(r,0);t.position=t.offsetOf(s[0]),e.setCell(r,0,[...a,...s])}return!0}pe({deleteAll:t=>t.contentWillChange({inputType:"deleteContent"})&&Je(t,[0,-1],"deleteContent"),deleteForward:t=>mh(t),deleteBackward:t=>dh(t),deleteNextWord:t=>t.contentWillChange({inputType:"deleteWordForward"})&&Je(t,[t.anchor,hs(t,t.position,"forward")],"deleteWordForward"),deletePreviousWord:t=>t.contentWillChange({inputType:"deleteWordBackward"})&&Je(t,[t.anchor,hs(t,t.position,"backward")],"deleteWordBackward"),deleteToGroupStart:t=>t.contentWillChange({inputType:"deleteSoftLineBackward"})&&Je(t,[t.anchor,t.offsetOf(t.at(t.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:t=>t.contentWillChange({inputType:"deleteSoftLineForward"})&&Je(t,[t.anchor,t.offsetOf(t.at(t.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:t=>t.contentWillChange({inputType:"deleteHardLineBackward"})&&Je(t,[t.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:t=>t.contentWillChange({inputType:"deleteHardLineForward"})&&Je(t,[t.anchor,-1],"deleteHardLineForward")},{target:"model",audioFeedback:"delete",canUndo:!0,changeContent:!0,changeSelection:!0});var Ob=`<svg xmlns="http://www.w3.org/2000/svg" style="width: 21px;"  viewBox="0 0 576 512" role="img" aria-label="${z("tooltip.toggle virtual keyboard")}"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg>`,Bb=`<svg xmlns="http://www.w3.org/2000/svg" style="height: 18px;" viewBox="0 0 448 512" role="img" aria-label="${z("tooltip.menu")}"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>`,Ds=class{constructor(t,e){this.focusBlurInProgress=!1,this.connectedToVirtualKeyboard=!1;var r,n,a;this.options=p(f(p({},bn()),{macros:Ei(),registers:Pa()}),gn(e)),this.eventController=new AbortController;let s=this.eventController.signal;e.eventSink&&(this.host=e.eventSink),this.element=t,t.mathfield=this,this.blurred=!0,this.keystrokeCaptionVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.defaultStyle={},this.styleBias="left",this.options.defaultMode==="inline-math"?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline"),this.dirty=!1;let o=(n=(r=e.value)!=null?r:this.element.textContent)!=null?n:"";o=o.trim();let c=sc(this.options),d=he(o,{context:this.context}),m;d.length===1&&d[0].isRoot?m=d[0]:m=new b({type:"root",mode:c,body:d}),this.model=new Ts(this,c,m),this.undoManager=new us(this.model);let y=[];if(y.push("<span contenteditable=true role=textbox aria-autocomplete=none aria-multiline=false part=keyboard-sink class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=0></span>"),y.push('<span part=container class=ML__container  style="visibility:hidden">'),y.push("<span part=content class=ML__content>"),y.push(ec(this)),y.push("</span>"),window.mathVirtualKeyboard&&(y.push(`<div part=virtual-keyboard-toggle class=ML__virtual-keyboard-toggle role=button ${this.hasEditableContent?"":'style="display:none;"'} data-l10n-tooltip="tooltip.toggle virtual keyboard">`),y.push(Ob),y.push("</div>")),y.push('<div part=menu-toggle class=ML__menu-toggle role=button data-l10n-tooltip="tooltip.menu">'),y.push(Bb),y.push("</div>"),y.push("</span>"),y.push("<span class=ML__sr-only>"),y.push("<span role=status aria-live=assertive aria-atomic=true></span>"),y.push("</span>"),this.element.innerHTML=globalThis.MathfieldElement.createHTML(y.join("")),!this.element.children){console.error("%cMathLive 0.106.0: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include `runtimeCompiler: true` in your Vue configuration. There may a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");return}this._l10Subscription=N.subscribe(()=>N.update(this.element)),N.update(this.element),this.field=this.element.querySelector("[part=content]"),this.field.addEventListener("click",P=>P.stopImmediatePropagation(),{capture:!1,signal:s}),this.field.addEventListener("wheel",this,{passive:!1,signal:s}),"PointerEvent"in window?this.field.addEventListener("pointerdown",this,{signal:s}):this.field.addEventListener("mousedown",this,{signal:s}),(a=this.element.querySelector("[part=virtual-keyboard-toggle]"))==null||a.addEventListener("click",()=>{window.mathVirtualKeyboard.visible?window.mathVirtualKeyboard.hide():(window.mathVirtualKeyboard.show({animate:!0}),window.mathVirtualKeyboard.update(Vt(this)))},{signal:s}),this.field.addEventListener("contextmenu",this,{signal:s});let A=this.element.querySelector("[part=menu-toggle]");A?.addEventListener("pointerdown",P=>{if(P.currentTarget!==A)return;let Z=this.menu;if(Z.state!=="closed")return;this.element.classList.add("tracking");let me=A.getBoundingClientRect();Z.modifiers=Nt(P),Z.show({target:A,location:{x:me.left,y:me.bottom},onDismiss:()=>this.element.classList.remove("tracking")}),P.preventDefault(),P.stopPropagation()},{signal:s}),(this.model.atoms.length<=1||this.disabled||this.readOnly&&!this.hasEditableContent||this.userSelect==="none")&&(A.style.display="none"),this.ariaLiveText=this.element.querySelector("[role=status]"),this.keyboardDelegate=tp(this.element.querySelector(".ML__keyboard-sink"),this.element,this),window.addEventListener("resize",this,{signal:s}),document.addEventListener("scroll",this,{signal:s}),this.resizeObserver=new ResizeObserver(P=>{if(this.resizeObserverStarted){this.resizeObserverStarted=!1;return}U(this)}),this.resizeObserverStarted=!0,this.resizeObserver.observe(this.field),window.mathVirtualKeyboard.addEventListener("virtual-keyboard-toggle",this,{signal:s}),Be!=="ready"&&document.fonts.ready.then(()=>ao(this)),t.querySelector("[part=container]").style.removeProperty("visibility"),this.undoManager.startRecording(),this.undoManager.snapshot("set-value"),U(this)}connectToVirtualKeyboard(){this.connectedToVirtualKeyboard||(this.connectedToVirtualKeyboard=!0,window.addEventListener("message",this,{signal:this.eventController.signal}),window.mathVirtualKeyboard.connect(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this)),vo(this))}disconnectFromVirtualKeyboard(){this.connectedToVirtualKeyboard&&(window.removeEventListener("message",this),window.mathVirtualKeyboard.disconnect(),this.connectedToVirtualKeyboard=!1,_s())}showMenu(t){var e,r;let n=(r=(e=t?.location)!=null?e:Ji(this.field))!=null?r:void 0,a=t?.modifiers,s=this.element.querySelector("[part=container]");return this._menu.show({target:s,location:n,modifiers:a})}get colorMap(){return t=>{var e,r,n;return(n=(r=(e=this.options).colorMap)==null?void 0:r.call(e,t))!=null?n:Hr(t)}}get backgroundColorMap(){return t=>{var e,r,n,a,s,o;return(o=(s=(r=(e=this.options).backgroundColorMap)==null?void 0:r.call(e,t))!=null?s:(a=(n=this.options).colorMap)==null?void 0:a.call(n,t))!=null?o:Si(t)}}get smartFence(){var t;return(t=this.options.smartFence)!=null?t:!1}get readOnly(){var t;return(t=this.options.readOnly)!=null?t:!1}get disabled(){var t,e;return(e=(t=this.host)==null?void 0:t.disabled)!=null?e:!1}get contentEditable(){return this.host?this.host.getAttribute("contenteditable")!=="false":!1}get userSelect(){if(!this.host)return"";let t=getComputedStyle(this.host);return t.getPropertyValue("user-select")||t.getPropertyValue("-webkit-user-select")}get hasEditableContent(){return this.disabled||!this.contentEditable?!1:!this.readOnly||this.hasEditablePrompts}get hasEditablePrompts(){return this.readOnly&&!this.disabled&&this.contentEditable&&this.model.findAtom(t=>t.type==="prompt"&&!t.locked)!==void 0}get isSelectionEditable(){if(this.disabled||!this.contentEditable)return!1;if(!this.readOnly)return!0;let t=this.model.at(this.model.anchor),e=this.model.at(this.model.position),r=b.commonAncestor(t,e);return!!(r?.type==="prompt"||r!=null&&r.parentPrompt)}get letterShapeStyle(){var t;return(t=this.options.letterShapeStyle)!=null?t:"tex"}get minFontScale(){return this.options.minFontScale}get maxMatrixCols(){return this.options.maxMatrixCols}queryStyle(t){let e=ts(this,t);"verbatimColor"in e&&delete e.verbatimColor,"verbatimBackgroundColor"in e&&delete e.verbatimBackgroundColor;let r=Object.keys(e).length;if(r===0)return"all";if(r>1){for(let d of Object.keys(e)){let m=this.queryStyle({[d]:e[d]});if(m==="none")return"none";if(m==="some")return"some"}return"all"}let n=Object.keys(e)[0],a=e[n];if(this.model.selectionIsCollapsed)return rr(this)[n]===a?"all":"none";let s=this.model.getAtoms(this.model.selection,{includeChildren:!0}),o=s.length;if(o===0)return"none";let c=0;for(let d of s){if(d.type==="first"){o-=1;continue}d.style[n]===a&&(c+=1)}return c===0?"none":c===o?"all":"some"}get keybindings(){var t,e;if(this._keybindings)return this._keybindings;let[r,n]=op(this.options.keybindings,(t=Dr())!=null?t:Qm());return((e=Dr())==null?void 0:e.score)>0&&(this._keybindings=r,n.length>0&&console.error("MathLive 0.106.0: Invalid keybindings for current keyboard layout",n)),r}get menu(){return this._menu!=null||(this._menu=new Mo(ah(this),{host:this.host})),this._menu}set menuItems(t){this._menu?this._menu.menuItems=t:this._menu=new Mo(t,{host:this.host})}setOptions(t){var e;this.options=p(p({},this.options),gn(t)),this._keybindings=void 0,this.options.defaultMode==="inline-math"?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline");let r=this.options.defaultMode;r==="inline-math"&&(r="math"),((e=this.model.root.firstChild)==null?void 0:e.mode)!==r&&(this.model.root.firstChild.mode=r),this.options.readOnly&&this.hasFocus()&&window.mathVirtualKeyboard.visible&&this.executeCommand("hideVirtualKeyboard");let n=b.serialize([this.model.root],{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in t||this.model.getValue()!==n)&&tc(this),("value"in t||"registers"in t||"colorMap"in t||"backgroundColorMap"in t||"letterShapeStyle"in t||"minFontScale"in t||"maxMatrixCols"in t||"readOnly"in t||"placeholderContent"in t||"placeholderSymbol"in t)&&U(this)}getOptions(t){return or(this.options,t)}getOption(t){return or(this.options,t)}async handleEvent(t){var e;if(rt(this)){if(co(t)){if(!Gi(t.origin,(e=this.options.originValidator)!=null?e:"none"))throw new DOMException(`Message from unknown origin (${t.origin}) cannot be handled`,"SecurityError");let{action:r}=t.data;if(r==="execute-command"){let n=hi(t.data.command);if(!n||nr(n)==="virtual-keyboard")return;this.executeCommand(n)}else r==="update-state"||(r==="focus"?this.focus({preventScroll:!0}):r==="blur"&&this.blur());return}switch(t.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":this.userSelect!=="none"&&yc(this,t);break;case"pointerdown":!t.defaultPrevented&&this.userSelect!=="none"&&(yc(this,t),t.shiftKey===!1&&await Sc(t,this.element.querySelector("[part=container]"),this.menu)&&xi.stop());break;case"contextmenu":this.userSelect!=="none"&&t.shiftKey===!1&&await Sc(t,this.element.querySelector("[part=container]"),this.menu)&&xi.stop();break;case"virtual-keyboard-toggle":this.hasFocus()&&vo(this),this.hasFocus()&&(this.keyboardDelegate.blur(),this.keyboardDelegate.focus());break;case"resize":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>rt(this)&&this.onGeometryChange());break;case"scroll":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>rt(this)&&this.onGeometryChange());break;case"wheel":this.onWheel(t);break;case"message":break;default:console.warn("Unexpected event type",t.type)}}}dispose(){if(!rt(this))return;N.unsubscribe(this._l10Subscription),this.keyboardDelegate.dispose(),this.keyboardDelegate=void 0,this.eventController.abort(),this.eventController=void 0,this.resizeObserver.disconnect(),window.mathVirtualKeyboard.removeEventListener("virtual-keyboard-toggle",this),this.disconnectFromVirtualKeyboard(),this.model.dispose();let t=this.element;delete t.mathfield,this.element=void 0,this.host=void 0,this.field=void 0,this.ariaLiveText=void 0,Ep(),lp(),Pp()}flushInlineShortcutBuffer(t){if(t!=null||(t={defer:!1}),!t.defer){this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=0;return}this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(t){return nr(t)==="virtual-keyboard"?(this.focus({preventScroll:!0}),window.mathVirtualKeyboard.executeCommand(t),requestAnimationFrame(()=>window.mathVirtualKeyboard.update(Vt(this))),!1):pp(this,t)}get errors(){return ja(this.model.getValue(),{context:this.context})}getValue(t,e,r){return this.model.getValue(t,e,r)}setValue(t,e){var r;e=e??{mode:"math"},e.insertionMode===void 0&&(e.insertionMode="replaceAll"),(e.format===void 0||e.format==="auto")&&(e.format="latex"),(e.mode===void 0||e.mode==="auto")&&(e.mode=(r=sm(this.model,this.model.position))!=null?r:"math");let n=this.undoManager.canUndo();V.insert(this.model,t,e)&&(U(this),n||this.undoManager.reset(),this.undoManager.snapshot("set-value"))}get expression(){let t=globalThis.MathfieldElement.computeEngine;return t?t.box(t.parse(this.model.getValue("latex-unstyled"))):(console.error("MathLive 0.106.0:  no compute engine available. Make sure the Compute Engine library is loaded."),null)}scrollIntoView(){var t;if(!this.element)return;if(this.host){if(this.options.onScrollIntoView)this.options.onScrollIntoView(this);else if(this.host.scrollIntoView({block:"nearest",inline:"nearest"}),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.container===window.document.body){let n=window.mathVirtualKeyboard.boundingRect,a=this.host.getBoundingClientRect();a.bottom>n.top&&((t=window.document.scrollingElement)==null||t.scrollBy(0,a.bottom-n.top+8))}}this.dirty&&bt(this,{interactive:!0});let e=this.field.getBoundingClientRect(),r=null;if(this.model.selectionIsCollapsed)r=Ji(this.field);else{let n=Na(this);if(n.length>0){let a=-1/0,s=-1/0;for(let o of n)o.right>a&&(a=o.right),o.top<s&&(s=o.top);r={x:a+e.left-this.field.scrollLeft,y:s+e.top-this.field.scrollTop,height:0}}}if(this.host&&r){let n=this.host.getBoundingClientRect(),a=r.y,s=this.host.scrollTop;a<n.top?s=a-n.top+this.host.scrollTop:a>n.bottom&&(s=a-n.bottom+this.host.scrollTop+r.height),this.host.scroll({top:s,left:0})}if(r){let n=r.x-window.scrollX,a=this.field.scrollLeft;n<e.left?a=n-e.left+this.field.scrollLeft-20:n>e.right&&(a=n-e.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:a})}}insert(t,e){if(typeof t!="string"||t.length===0&&(e?.insertionMode==="insertBefore"||e?.insertionMode==="insertAfter")||t.length===0&&this.model.selectionIsCollapsed)return!1;if(this.flushInlineShortcutBuffer(),e=e??{mode:"math"},e.focus&&this.focus(),e.feedback&&(globalThis.MathfieldElement.keypressVibration&&Ro()&&navigator.vibrate(ic),globalThis.MathfieldElement.playSound("keypress")),t==="\\\\")lc(this.model);else if(t==="&")cc(this.model);else if(this.model.selectionIsCollapsed){let r=p({},rr(this));!/^[a-zA-Z0-9]$/.test(t)&&this.styleBias!=="none"&&(r.variant="normal",r.variantStyle=void 0),V.insert(this.model,t,p({style:r},e))}else V.insert(this.model,t,e);return this.snapshot(`insert-${this.model.at(this.model.position).type}`),U(this),e.scrollIntoView&&this.scrollIntoView(),!0}switchMode(t,e="",r=""){if(this.model.mode===t||!this.hasEditableContent||!this.contentEditable||this.disabled)return;let{model:n}=this,a=n.mode;if(n.mode=t,this.host&&!this.host.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))){n.mode=a;return}n.mode=a,n.deferNotifications({content:!!r||!!e,selection:!0,type:"insertText"},()=>{let s=n.at(n.position),o=(y,A)=>{if(!y)return;let P=n.mode==="math"?he(Yt(y,{format:"ascii-math"})[1],{context:this.context}):[...y].map(Z=>new $e(Z,Z,{}));if(A.select){let Z=s.parent.addChildrenAfter(P,s);n.setSelection(n.offsetOf(P[0].leftSibling),n.offsetOf(Z))}else n.position=n.offsetOf(s.parent.addChildrenAfter(P,s));m=!0},c=(y,A)=>{let P=new Rt(y);s.parent.addChildAfter(P,s),A.select?n.setSelection(n.offsetOf(P.firstChild),n.offsetOf(P.lastChild)):n.position=n.offsetOf(P.lastChild),m=!0},d=()=>{let y=t==="latex"?"latex":t==="math"?"plain-text":"ascii-math",A=le(n.selection),P=this.model.getValue(A,y),Z=this.model.extractAtoms(A);return Z.length===1&&Z[0].type==="placeholder"&&(P=r),s=n.at(A[0]),P},m=!1;if(this.flushInlineShortcutBuffer(),this.stopCoalescingUndo(),$t(this,"accept"),n.selectionIsCollapsed)o(e,{select:!1}),n.mode=t,t==="latex"?c(r,{select:!1}):o(r,{select:!1});else{let y=d();n.mode=t,t==="latex"?c(y,{select:!0}):o(y,{select:!0})}return U(this),this.undoManager.snapshot(t==="latex"?"insert-latex":"insert"),m}),n.mode=t,window.mathVirtualKeyboard.update(Vt(this))}hasFocus(){return!this.blurred}focus(t){var e;this.focusBlurInProgress||(this.hasFocus()||(this.onFocus(),this.model.announce("line")),(e=t?.preventScroll)!=null&&e||this.scrollIntoView())}blur(){this.disconnectFromVirtualKeyboard(),this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]},this.focus()}applyStyle(t,e={}){var r;let n,a="set",s=!1;ti(e)?n=e:(e.operation==="toggle"&&(a="toggle"),n=e.range,s=(r=e.silenceNotifications)!=null?r:!1),n&&(n=this.model.normalizeRange(n)),n&&n[0]===n[1]&&(n=void 0);let o=ts(this,t);if(n===void 0&&this.model.selectionIsCollapsed){if(a==="set"){let d=p({},this.defaultStyle);"color"in o&&delete d.verbatimColor,"backgroundColor"in o&&delete d.verbatimBackgroundColor,this.defaultStyle=p(p({},d),o),this.styleBias="none";return}let c=p({},this.defaultStyle);for(let d of Object.keys(o))c[d]===o[d]?(d==="color"&&delete c.verbatimColor,d==="backgroundColor"&&delete c.verbatimBackgroundColor,delete c[d]):c[d]=o[d];this.defaultStyle=c,this.styleBias="none";return}this.model.deferNotifications({content:!s,type:"insertText"},()=>{if(n===void 0)for(let c of this.model.selection.ranges)eo(this.model,c,o,{operation:a});else eo(this.model,n,o,{operation:a})}),U(this)}toggleContextMenu(){var t;let e=this.menu;if(!e.visible)return!1;if(e.state==="open")return e.hide(),!0;let r=(t=$a(this,this.model.position))==null?void 0:t.bounds;if(!r)return!1;let n={x:r.right,y:r.bottom};return e.show({target:this.element.querySelector("[part=container]"),location:n,onDismiss:()=>{var a;return(a=this.element)==null?void 0:a.focus()}}),!0}getPrompt(t){return this.model.findAtom(r=>r.type==="prompt"&&r.placeholderId===t)}getPromptValue(t,e){let r=this.getPrompt(t);if(!r)return"";let n=this.model.offsetOf(r.firstChild),a=this.model.offsetOf(r.lastChild);return this.model.getValue(n,a,e)}getPrompts(t){return this.model.atoms.filter(e=>e.type!=="prompt"?!1:t?!(t.id&&e.placeholderId!==t.id||t.locked&&e.locked!==t.locked||t.correctness==="undefined"&&e.correctness||t.correctness&&e.correctness!==t.correctness):!0).map(e=>e.placeholderId)}setPromptValue(t,e,r){if(e!==void 0){let n=this.getPrompt(t);if(!n){console.error(`MathLive 0.106.0: unknown prompt ${t}`);return}let a=this.model.getBranchRange(this.model.offsetOf(n),"body");this.model.setSelection(a),this.insert(e,f(p({},r),{insertionMode:"replaceSelection"}))}r!=null&&r.silenceNotifications&&(this.valueOnFocus=this.getValue()),U(this)}setPromptState(t,e,r){let n=this.getPrompt(t);if(!n){console.error(`MathLive 0.106.0: unknown prompt ${t}`);return}e==="undefined"?n.correctness=void 0:typeof e=="string"&&(n.correctness=e),typeof r=="boolean"&&(n.locked=r,n.captureSelection=r),U(this)}getPromptState(t){let e=this.getPrompt(t);return e?[e.correctness,e.locked]:(console.error(`MathLive 0.106.0: unknown prompt ${t}`),[void 0,!0])}getPromptRange(t){let e=this.getPrompt(t);return e?this.model.getBranchRange(this.model.offsetOf(e),"body"):(console.error(`MathLive 0.106.0: unknown prompt ${t}`),[0,0])}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this))}snapshot(t){var e;this.undoManager.snapshot(t)&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this)),(e=this.host)==null||e.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}stopCoalescingUndo(){this.undoManager.stopCoalescing(this.model.selection)}stopRecording(){this.undoManager.stopRecording()}startRecording(){this.undoManager.startRecording()}undo(){var t;this.undoManager.undo()&&((t=this.host)==null||t.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var t;this.undoManager.redo()&&((t=this.host)==null||t.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"redo"}})))}resetUndo(){var t;(t=this.undoManager)==null||t.reset()}onSelectionDidChange(){var t,e;let r=this.model;if(this.keyboardDelegate.setValue(r.getValue(r.selection,"latex-expanded")),r.selectionIsCollapsed){let n=io(r),a=r.position,s=r.at(a),o=(t=s.mode)!=null?t:sc(this.options);if(n&&(a<r.offsetOf(n.firstChild)-1||a>r.offsetOf(n.lastChild)+1))$t(this,"accept",{mode:o}),r.position=r.offsetOf(s);else{let c=r.at(a+1);c?.type==="first"&&c.mode==="latex"?r.position=a+1:n&&c?.mode!=="latex"?r.position=a-1:this.switchMode(o)}}(e=this.host)==null||e.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0})),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Vt(this)),vo(this)}onContentWillChange(t){var e,r,n;return(n=(r=this.host)==null?void 0:r.dispatchEvent(new InputEvent("beforeinput",f(p({},t),{data:t.data?t.data:(e=t.inputType)!=null?e:"",cancelable:!0,bubbles:!0,composed:!0}))))!=null?n:!0}onFocus(){this.focusBlurInProgress||!this.blurred||(this.focusBlurInProgress=!0,this.blurred=!1,this.stopCoalescingUndo(),this.valueOnFocus=this.model.getValue(),this.hasEditablePrompts&&!this.model.at(this.model.anchor).parentPrompt&&this.executeCommand("moveToNextPlaceholder"),bt(this,{interactive:!0}),setTimeout(()=>{var t;if(!rt(this))return;let e=new AbortController,r=e.signal;for(let n of["focus","blur","focusin","focusout"])(t=this.host)==null||t.addEventListener(n,a=>{a.preventDefault(),a.stopPropagation()},{once:!0,capture:!0,signal:r});this.keyboardDelegate.blur(),this.keyboardDelegate.focus(),this.connectToVirtualKeyboard(),this.focusBlurInProgress=!1,e.abort()},60))}onBlur(){var t,e,r;if(!(this.focusBlurInProgress||this.blurred)&&(this.focusBlurInProgress=!0,this.stopCoalescingUndo(),this.blurred=!0,this.ariaLiveText.textContent="",Br(this),this.model.getValue()!==this.valueOnFocus&&((t=this.host)==null||t.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),this.disconnectFromVirtualKeyboard(),(e=this.host)==null||e.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),(r=this.host)==null||r.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0})),U(this),this.focusBlurInProgress=!1,_s(),mn.restoreFocusWhenDocumentFocused)){let n=new AbortController,a=n.signal;window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{rt(this)&&this.focus({preventScroll:!0})},{once:!0,signal:a})},{once:!0,signal:a}),document.addEventListener("focusin",()=>n.abort(),{once:!0}),document.addEventListener("click",()=>n.abort(),{once:!0})}}onInput(t){bo(this,t)}onKeystroke(t){return fc(this,t)}onCompositionStart(t){Je(this.model,le(this.model.selection),"insertText");let e=Ji(this.field);e&&requestAnimationFrame(()=>{bt(this),this.keyboardDelegate.moveTo(e.x,e.y-e.height)})}onCompositionUpdate(t){yp(this.model,t),U(this)}onCompositionEnd(t){xp(this.model),bo(this,t,{simulateKeystroke:!0})}onCut(t){if(!this.isSelectionEditable){this.model.announce("plonk");return}this.model.contentWillChange({inputType:"deleteByCut"})&&(this.stopCoalescingUndo(),t.clipboardData?V.onCopy(this,t):V.copyToClipboard(this,"latex"),Je(this.model,le(this.model.selection),"deleteByCut"),this.snapshot("cut"),U(this))}onCopy(t){t.clipboardData?V.onCopy(this,t):V.copyToClipboard(this,"latex")}onPaste(t){let e=this.isSelectionEditable;return e&&(e=V.onPaste(this.model.at(this.model.position).mode,this,t.clipboardData)),e||this.model.announce("plonk"),t.preventDefault(),t.stopPropagation(),e}onGeometryChange(){var t;(t=this._menu)==null||t.hide(),dn(this),vo(this)}onWheel(t){let e=5*t.deltaX;if(!Number.isFinite(e)||e===0)return;let r=this.field;e<0&&r.scrollLeft===0||e>0&&r.offsetWidth+r.scrollLeft>=r.scrollWidth||(r.scrollBy({top:0,left:e}),t.preventDefault(),t.stopPropagation())}getHTMLElement(t){let e=t;for(;!e.id&&e.hasChildren;)e=t.children[0];return this.field.querySelector(`[data-atom-id="${e.id}"]`)}get context(){var t,e;return{registers:(t=this.options.registers)!=null?t:{},smartFence:this.smartFence,letterShapeStyle:this.letterShapeStyle,minFontScale:this.minFontScale,maxMatrixCols:this.maxMatrixCols,placeholderSymbol:(e=this.options.placeholderSymbol)!=null?e:"▢",colorMap:r=>this.colorMap(r),backgroundColorMap:r=>this.backgroundColorMap(r),getMacro:r=>Ti(r,this.options.macros),atomIdsSettings:{seed:"random",groupNumbers:!1}}}};pe({speak:(t,e,r)=>Rb(t,e,r)},{target:"mathfield"});function Rb(t,e,r){var n;r=r??{withHighlighting:!1};let{model:a}=t;function s(y){let A=null;switch(y){case"all":A=a.root;break;case"selection":A=a.getAtoms(a.selection);break;case"left":{A=a.getAtoms(a.offsetOf(a.at(a.position).leftSibling),a.position);break}case"right":{A=a.getAtoms(a.position,a.offsetOf(a.at(a.position).rightSibling));break}case"group":A=a.getAtoms(a.getSiblingsRange(a.position));break;case"parent":{let{parent:P}=a.at(a.position);P!=null&&P.parent?A=P:A=a.root;break}default:A=a.root}return A}function o(y){let A="";switch(y){case"all":console.error("Internal failure: speak all failed");break;case"selection":A="no selection";break;case"left":A="at start";break;case"right":A="at end";break;case"group":console.error("Internal failure: speak group failed");break;case"parent":A="no parent";break;default:console.error('unknown speak_ param value: "'+y+'"');break}return A}let c=globalThis.MathfieldElement,d=s(e);if(d===null)return(n=c.speakHook)==null||n.call(c,o(e)),!1;(r.withHighlighting||c.speechEngine==="amazon")&&(c.textToSpeechMarkup=globalThis.sre&&c.textToSpeechRules==="sre"?"ssml_step":"ssml");let m=Mt(d);return Me()&&r.withHighlighting?(Wt().readAloudMathfield=t,bt(t,{forHighlighting:!0}),c.readAloudHook&&c.readAloudHook(t.field,m)):c.speakHook&&c.speakHook(m),!1}function ph(t){var e,r;if(!Me())return;let n=globalThis.MathfieldElement;if(!n.speechEngine||n.speechEngine==="local"){let a=new SpeechSynthesisUtterance(t);globalThis.speechSynthesis.speak(a)}else if(n.speechEngine==="amazon")if(!("AWS"in window))console.error("MathLive 0.106.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");else{let a=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),s={OutputFormat:"mp3",VoiceId:(e=n.speechEngineVoice)!=null?e:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes((r=n.speechEngineVoice)!=null?r:"Joanna")?"neural":"standard",Text:t,TextType:"ssml"};a.synthesizeSpeech(s,(o,c)=>{if(o)console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech()\` error: ${o}`);else if(c!=null&&c.AudioStream){let d=new Uint8Array(c.AudioStream),m=new Blob([d.buffer],{type:"audio/mpeg"}),y=URL.createObjectURL(m);new Audio(y).play().catch(A=>console.error(A))}})}else n.speechEngine==="google"&&console.error("MathLive 0.106.0: The Google speech engine is not supported yet. Please come again.")}function hh(t){if(t&&(t.classList.remove("ML__highlight"),t.children))for(let e of t.children)hh(e)}function $c(t,e){var r;t&&(!e||((r=t.dataset)==null?void 0:r.atomId)===e?(t.classList.add("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(n=>{n instanceof HTMLElement&&$c(n)})):(t.classList.remove("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(n=>{n instanceof HTMLElement&&$c(n,e)})))}function fh(t,e){var r;if(!Me())return;if(globalThis.MathfieldElement.speechEngine!=="amazon"){console.error("MathLive 0.106.0: Use Amazon TTS Engine for synchronized highlighting"),typeof globalThis.MathfieldElement.speakHook=="function"&&globalThis.MathfieldElement.speakHook(e);return}if(!globalThis.AWS){console.error("MathLive 0.106.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");return}let n=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),a={OutputFormat:"json",VoiceId:(r=globalThis.MathfieldElement.speechEngineVoice)!=null?r:"Joanna",Engine:"standard",Text:e,TextType:"ssml",SpeechMarkTypes:["ssml"]};Wt().readAloudElement=t,n.synthesizeSpeech(a,(s,o)=>{if(s){console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech()\` error: ${s}`);return}if(!(o!=null&&o.AudioStream))return;let c=new TextDecoder("utf-8").decode(new Uint8Array(o.AudioStream));Wt().readAloudMarks=c.split(`
`).map(d=>d?JSON.parse(d):{}),Wt().readAloudTokens=[];for(let d of Wt().readAloudMarks)d.value&&Wt().readAloudTokens.push(d.value);Wt().readAloudCurrentMark="",a.OutputFormat="mp3",a.SpeechMarkTypes=[],n.synthesizeSpeech(a,(d,m)=>{if(d){console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech("${e}") error:${d}`);return}if(!(m!=null&&m.AudioStream))return;let y=new Uint8Array(m.AudioStream),A=new Blob([y.buffer],{type:"audio/mpeg"}),P=URL.createObjectURL(A),Z=Wt();Z.readAloudAudio?Z.readAloudAudio.pause():(Z.readAloudAudio=new Audio,Z.readAloudAudio.addEventListener("ended",()=>{let me=Z.readAloudMathfield;Z.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),me?(bt(me),Z.readAloudElement=null,Z.readAloudMathfield=null,Z.readAloudTokens=[],Z.readAloudMarks=[],Z.readAloudCurrentMark=""):hh(Z.readAloudElement)}),Z.readAloudAudio.addEventListener("timeupdate",()=>{let me="",_e=Z.readAloudAudio.currentTime*1e3+100;for(let Ge of Z.readAloudMarks)Ge.time<_e&&(me=Ge.value);Z.readAloudCurrentMark!==me&&(Z.readAloudCurrentToken=me,me&&me===Z.readAloudFinalToken?Z.readAloudAudio.pause():(Z.readAloudCurrentMark=me,$c(Z.readAloudElement,Z.readAloudCurrentMark)))})),Z.readAloudAudio.src=P,Z.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),Z.readAloudAudio.play()})})}Me()||console.error('MathLive 0.106.0: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var X=new WeakMap,Pb=.5,qr={letterShapeStyle:"mf.letterShapeStyle = ...",horizontalSpacingScale:'Removed. Use `"thinmuskip"`, `"medmuskip"`, and `"thickmuskip"` registers ',macros:"mf.macros = ...",registers:"mf.registers = ...",backgroundColorMap:"mf.backgroundColorMap = ...",colorMap:"mf.colorMap = ...",enablePopover:"mf.popoverPolicy = ...",mathModeSpace:"mf.mathModeSpace = ...",placeholderSymbol:"mf.placeholderSymbol = ...",readOnly:"mf.readOnly = ...",removeExtraneousParentheses:"mf.removeExtraneousParentheses = ...",scriptDepth:"mf.scriptDepth = ...",smartFence:"mf.smartFence = ...",smartMode:"mf.smartMode = ...",smartSuperscript:"mf.smartSuperscript = ...",inlineShortcutTimeout:"mf.inlineShortcutTimeout = ...",inlineShortcuts:"mf.inlineShortcuts = ...",keybindings:"mf.keybindings = ...",virtualKeyboardMode:"mf.mathVirtualKeyboardPolicy = ...",customVirtualKeyboardLayers:"mathVirtualKeyboard.layers = ...",customVirtualKeyboards:"mathVirtualKeyboard.layouts = ...",keypressSound:"mathVirtualKeyboard.keypressSound = ...",keypressVibration:"mathVirtualKeyboard.keypressVibration = ...",plonkSound:"mathVirtualKeyboard.plonkSound = ...",virtualKeyboardContainer:"mathVirtualKeyboard.container = ...",virtualKeyboardLayout:"mathVirtualKeyboard.alphabeticLayout = ...",virtualKeyboardTheme:"No longer supported",virtualKeyboardToggleGlyph:"No longer supported",virtualKeyboardToolbar:"mathVirtualKeyboard.editToolbar = ...",virtualKeyboards:"Use `mathVirtualKeyboard.layouts`",speechEngine:"`MathfieldElement.speechEngine`",speechEngineRate:"`MathfieldElement.speechEngineRate`",speechEngineVoice:"`MathfieldElement.speechEngineVoice`",textToSpeechMarkup:"`MathfieldElement.textToSpeechMarkup`",textToSpeechRules:"`MathfieldElement.textToSpeechRules`",textToSpeechRulesOptions:"`MathfieldElement.textToSpeechRulesOptions`",readAloudHook:"`MathfieldElement.readAloudHook`",speakHook:"`MathfieldElement.speakHook`",computeEngine:"`MathfieldElement.computeEngine`",fontsDirectory:"`MathfieldElement.fontsDirectory`",soundsDirectory:"`MathfieldElement.soundsDirectory`",createHTML:"`MathfieldElement.createHTML`",onExport:"`mf.onExport`",onInlineShortcut:"`mf.onInlineShortcut`",onScrollIntoView:"`mf.onScrollIntoView`",locale:"MathfieldElement.locale = ...",strings:"MathfieldElement.strings = ...",decimalSeparator:"MathfieldElement.decimalSeparator = ...",fractionNavigationOrder:"MathfieldElement.fractionNavigationOrder = ..."},oe=class e2 extends HTMLElement{constructor(e){if(super(),this._observer=null,e){let r=[];for(let n of Object.keys(e))if(qr[n])if(qr[n].startsWith("mf."))if(qr[n].startsWith(`mf.${n}`))r.push(`Option \`${n}\` cannot be used as a constructor option. Use ${qr[n]}`);else{let a=qr[n].match(/([a-zA-Z]+) =/);r.push(`Option \`${n}\` has been renamed \`${a[1]}\``)}else r.push(`Option \`${n}\` cannot be used as a constructor option. Use ${qr[n]}`);if(r.length>0){console.group("%cMathLive 0.106.0: %cInvalid Options","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn("Some of the options passed to `new MathfieldElement(...)` are invalid. \n          See mathfield/changelog/ for details.");for(let n of r)console.warn(n);console.groupEnd()}}if(Ln()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open",delegatesFocus:!0}),this.shadowRoot&&"adoptedStyleSheets"in this.shadowRoot){this.shadowRoot.adoptedStyleSheets=[ii("core"),ii("mathfield"),ii("mathfield-element"),ii("ui"),ii("menu")],this.shadowRoot.appendChild(document.createElement("span"));let r=document.createElement("slot");r.style.display="none",this.shadowRoot.appendChild(r)}else this.shadowRoot.innerHTML="<style>"+Er("core")+Er("mathfield")+Er("mathfield-element")+Er("ui")+Er("menu")+'</style><span></span><slot style="display:none"></slot>';e&&this._setOptions(e)}static get formAssociated(){return Ln()}static get optionsAttributes(){return{"default-mode":"string","letter-shape-style":"string","min-font-scale":"number","max-matrix-cols":"number","popover-policy":"string","math-mode-space":"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","inline-shortcut-timeout":"string","script-depth":"string",placeholder:"string","virtual-keyboard-target-origin":"string","math-virtual-keyboard-policy":"string"}}static get observedAttributes(){return[...Object.keys(this.optionsAttributes),"contenteditable","disabled","readonly","read-only"]}static get fontsDirectory(){return this._fontsDirectory}static set fontsDirectory(e){e!==this._fontsDirectory&&(this._fontsDirectory=e,dp())}get fontsDirectory(){throw new Error("Use MathfieldElement.fontsDirectory instead")}set fontsDirectory(e){throw new Error("Use MathfieldElement.fontsDirectory instead")}static get soundsDirectory(){return this._soundsDirectory}static set soundsDirectory(e){this._soundsDirectory=e,this.audioBuffers={}}get soundsDirectory(){throw new Error("Use MathfieldElement.soundsDirectory instead")}set soundsDirectory(e){throw new Error("Use MathfieldElement.soundsDirectory instead")}static get keypressSound(){return this._keypressSound}static set keypressSound(e){var r,n,a;this.audioBuffers={},e===null?this._keypressSound={spacebar:null,return:null,delete:null,default:null}:typeof e=="string"?this._keypressSound={spacebar:e,return:e,delete:e,default:e}:typeof e=="object"&&"default"in e&&(this._keypressSound={spacebar:(r=e.spacebar)!=null?r:e.default,return:(n=e.return)!=null?n:e.default,delete:(a=e.delete)!=null?a:e.default,default:e.default})}static get plonkSound(){return this._plonkSound}static set plonkSound(e){this.audioBuffers={},this._plonkSound=e}static get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}static get speechEngine(){return this._speechEngine}static set speechEngine(e){this._speechEngine=e}static get speechEngineRate(){return this._speechEngineRate}static set speechEngineRate(e){this._speechEngineRate=e}static get speechEngineVoice(){return this._speechEngineVoice}static set speechEngineVoice(e){this._speechEngineVoice=e}static get textToSpeechMarkup(){return this._textToSpeechMarkup}static set textToSpeechMarkup(e){this._textToSpeechMarkup=e}static get textToSpeechRules(){return this._textToSpeechRules}static set textToSpeechRules(e){this._textToSpeechRules=e}static get textToSpeechRulesOptions(){return this._textToSpeechRulesOptions}static set textToSpeechRulesOptions(e){this._textToSpeechRulesOptions=e}static get locale(){return N.locale}static set locale(e){e==="auto"&&(e=navigator.language.slice(0,5)),N.locale=e}get locale(){throw new Error("Use MathfieldElement.locale instead")}set locale(e){throw new Error("Use MathfieldElement.locale instead")}static get strings(){return N.strings}static set strings(e){N.merge(e)}get strings(){throw new Error("Use MathfieldElement.strings instead")}set strings(e){throw new Error("Use MathfieldElement.strings instead")}static get decimalSeparator(){return this._decimalSeparator}static set decimalSeparator(e){this._decimalSeparator=e,this._computeEngine&&(this._computeEngine.decimalSeparator=this.decimalSeparator===","?"{,}":".")}get decimalSeparator(){throw new Error("Use MathfieldElement.decimalSeparator instead")}set decimalSeparator(e){throw new Error("Use MathfieldElement.decimalSeparator instead")}static get fractionNavigationOrder(){return sn.fractionNavigationOrder}static set fractionNavigationOrder(e){if(e!=="numerator-denominator"&&e!=="denominator-numerator")throw new Error("Invalid value");sn.fractionNavigationOrder!==e&&(sn.fractionNavigationOrder=e,rc())}static get computeEngine(){var e,r;if(this._computeEngine===void 0){let n=(e=window[Symbol.for("io.cortexjs.compute-engine")])==null?void 0:e.ComputeEngine;if(!n)return null;this._computeEngine=new n,this._computeEngine&&this.decimalSeparator===","&&(this._computeEngine.decimalSeparator="{,}")}return(r=this._computeEngine)!=null?r:null}static set computeEngine(e){this._computeEngine=e}get computeEngine(){throw new Error("Use MathfieldElement.computeEngine instead")}set computeEngine(e){throw new Error("Use MathfieldElement.computeEngine instead")}static get isFunction(){return typeof this._isFunction!="function"?()=>!1:this._isFunction}static set isFunction(e){this._isFunction=e,rc()}static async loadSound(e){delete this.audioBuffers[e];let r="";switch(e){case"keypress":r=this._keypressSound.default;break;case"return":r=this._keypressSound.return;break;case"spacebar":r=this._keypressSound.spacebar;break;case"delete":r=this._keypressSound.delete;break;case"plonk":r=this.plonkSound;break}if(typeof r!="string")return;r=r.trim();let n=this.soundsDirectory;if(!(n==null||n==="null"||r==="none"||r==="null"))try{let a=await(await fetch(await rs(`${n}/${r}`))).arrayBuffer(),s=await this.audioContext.decodeAudioData(a);this.audioBuffers[e]=s}catch{}}static async playSound(e){if((this.audioContext.state==="suspended"||this.audioContext.state==="interrupted")&&await this.audioContext.resume(),this.audioBuffers[e]||await this.loadSound(e),!this.audioBuffers[e])return;let r=this.audioContext.createBufferSource();r.buffer=this.audioBuffers[e];let n=this.audioContext.createGain();n.gain.value=Pb,r.connect(n).connect(this.audioContext.destination),r.start()}showMenu(e){var r,n;return(n=(r=this._mathfield)==null?void 0:r.showMenu(e))!=null?n:!1}get mathVirtualKeyboard(){throw new Error("The `mathVirtualKeyboard` property is not available on the MathfieldElement. Use `window.mathVirtualKeyboard` instead.")}onPointerDown(){window.addEventListener("pointerup",e=>{let r=this._mathfield;if(r&&e.target===this&&!r.disabled){this.dispatchEvent(new MouseEvent("click",{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,movementX:e.movementX,movementY:e.movementY,relatedTarget:e.relatedTarget,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey}));let n=this.getOffsetFromPoint(e.clientX,e.clientY);n>=0&&e2.openUrl(fm(r,n)),e.pointerType==="touch"&&this.selectionIsCollapsed&&(this.position=n)}},{once:!0})}getPromptValue(e,r){var n,a;return(a=(n=this._mathfield)==null?void 0:n.getPromptValue(e,r))!=null?a:""}setPromptValue(e,r,n){var a;(a=this._mathfield)==null||a.setPromptValue(e,r,n)}getPromptRange(e){var r,n;return(n=(r=this._mathfield)==null?void 0:r.getPromptRange(e))!=null?n:null}getPrompts(e){var r,n;return(n=(r=this._mathfield)==null?void 0:r.getPrompts(e))!=null?n:[]}get form(){var e;return(e=this._internals)==null?void 0:e.form}get name(){var e;return(e=this.getAttribute("name"))!=null?e:""}get type(){return this.localName}get mode(){var e,r;return(r=(e=this._mathfield)==null?void 0:e.model.mode)!=null?r:this.defaultMode==="text"?"text":"math"}set mode(e){var r;(r=this._mathfield)==null||r.switchMode(e)}get expression(){if(this._mathfield)return window[Symbol.for("io.cortexjs.compute-engine")]?this._mathfield.expression:(console.error(`MathLive 0.106.0: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://esm.run/@cortex-js/compute-engine"`),null)}set expression(e){var r,n;if(!this._mathfield)return;let a=(n=(r=e2.computeEngine)==null?void 0:r.box(e).latex)!=null?n:null;a!==null&&this._mathfield.setValue(a),window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`MathLive 0.106.0: The Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://esm.run/@cortex-js/compute-engine"`)}get errors(){var e,r;return(r=(e=this._mathfield)==null?void 0:e.errors)!=null?r:[]}_getOptions(e){return this._mathfield?or(this._mathfield.options,e):X.has(this)?p({},or(p(p({},bn()),gn(X.get(this).options)),e)):null}getOptions(e){return console.warn("%cMathLive 0.106.0: %cDeprecated Usage%c\n      `mf.getOptions()` is deprecated. Read the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._mathfield?or(this._mathfield.options,e):X.has(this)?or(p(p({},bn()),gn(X.get(this).options)),e):null}reflectAttributes(){let e=bn(),r=this._getOptions();Object.keys(e2.optionsAttributes).forEach(n=>{let a=ar(n);e2.optionsAttributes[n]==="on/off"?e[a]!==r[a]?this.setAttribute(n,r[a]?"on":"off"):this.removeAttribute(n):e[a]!==r[a]&&(e2.optionsAttributes[n]==="boolean"?r[a]?this.setAttribute(n,""):this.removeAttribute(n):(typeof r[a]=="string"||typeof r[a]=="number")&&this.setAttribute(n,r[a].toString()))})}getOption(e){return console.warn("%cMathLive 0.106.0: %cDeprecated Usage%c\n      `mf.getOption()` is deprecated. Read the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._getOptions([e])[e]}_getOption(e){return this._getOptions([e])[e]}_setOptions(e){if(this._mathfield)this._mathfield.setOptions(e);else if(X.has(this)){let r=p(p({},X.get(this).options),e);X.set(this,f(p({},X.get(this)),{selection:{ranges:r.readOnly?[[0,0]]:[[0,-1]]},options:r}))}else X.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:e,menuItems:void 0});this.reflectAttributes()}setOptions(e){console.group("%cMathLive 0.106.0: %cDeprecated Usage","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn(" `mf.setOptions()` is deprecated. Set the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.");for(let r of Object.keys(e))qr[r]&&console.warn(`\`mf.setOptions({${r}:...})\` -> ${qr[r]}`);console.groupEnd(),this._setOptions(e)}executeCommand(...e){var r,n;let a;if(e.length===1?a=e[0]:a=[e[0],...e.slice(1)],a)return(n=(r=this._mathfield)==null?void 0:r.executeCommand(a))!=null?n:!1;throw new Error("Invalid selector")}getValue(e,r,n){var a,s;if(this._mathfield)return this._mathfield.model.getValue(e,r,n);if(X.has(this)){let o,c,d;if(Ui(e)?([o,c]=e.ranges[0],d=r):ti(e)?([o,c]=e,d=r):Ot(e)&&Ot(r)?(o=e,c=r,d=n):(o=0,c=-1,d=e),(d===void 0||d==="latex")&&o===0&&c===-1)return(s=(a=X.get(this).value)!=null?a:this.textContent)!=null?s:""}return""}setValue(e,r){if(this._mathfield&&e!==void 0){if(this._mathfield.model.getValue()===e)return;r!=null||(r={silenceNotifications:!0,mode:"math"}),this._mathfield.setValue(e,r);return}if(X.has(this)){let a=X.get(this).options;X.set(this,{value:e,selection:{ranges:[[-1,-1]],direction:"forward"},options:a,menuItems:void 0});return}let n=Ks(this);X.set(this,{value:e,selection:{ranges:[[-1,-1]],direction:"forward"},options:n,menuItems:void 0})}hasFocus(){var e,r;return(r=(e=this._mathfield)==null?void 0:e.hasFocus())!=null?r:!1}focus(){var e;(e=this._mathfield)==null||e.focus()}blur(){var e;(e=this._mathfield)==null||e.blur()}select(){var e;(e=this._mathfield)==null||e.select()}insert(e,r){var n,a;return(a=(n=this._mathfield)==null?void 0:n.insert(e,r))!=null?a:!1}applyStyle(e,r){var n;return(n=this._mathfield)==null?void 0:n.applyStyle(e,r)}queryStyle(e){var r,n;return(n=(r=this._mathfield)==null?void 0:r.queryStyle(e))!=null?n:"none"}getOffsetFromPoint(e,r,n){return this._mathfield?xo(this._mathfield,e,r,n):-1}getElementInfo(e){return $a(this._mathfield,e)}resetUndo(){var e;(e=this._mathfield)==null||e.resetUndo()}canUndo(){return this._mathfield?this._mathfield.canUndo():!1}canRedo(){return this._mathfield?this._mathfield.canRedo():!1}handleEvent(e){var r,n,a,s,o,c,d;if(Ae.state!=="closed"||((n=(r=this._mathfield)==null?void 0:r.menu)==null?void 0:n.state)!=="closed")return;if(e.type==="pointerdown"){this.onPointerDown();let y=(a=this._mathfield)==null?void 0:a.keyboardDelegate;y?.blur(),y?.focus()}if(e.type==="focus"&&((s=this._mathfield)==null||s.focus()),e.type!=="blur")return;let m=Bo();m&&(o=window?.mathVirtualKeyboard)!=null&&o.visible||((c=Ae.scrim)==null?void 0:c.state)!=="closed"||m&&Gc()||(d=this._mathfield)==null||d.blur()}connectedCallback(){var e,r,n,a;let s=this.shadowRoot,o=s.host,c=window.getComputedStyle(this).userSelect!=="none";if(c)o.addEventListener("pointerdown",this,!0);else{let y=s.querySelector("span");y.style.pointerEvents="none"}o.addEventListener("focus",this,!0),o.addEventListener("blur",this,!0),this._observer=new MutationObserver(()=>{var y;this.value=(y=this.textContent)!=null?y:""}),this._observer.observe(this,{childList:!0,characterData:!0,subtree:!0}),Ln()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),c&&!this.hasAttribute("contenteditable")&&this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let d=s.querySelector("slot:not([name])");if(d)try{this._style=d.assignedElements().filter(y=>y.tagName.toLowerCase()==="style").map(y=>y.textContent).join("")}catch(y){console.error(y)}if(this._style){let y=document.createElement("style");y.textContent=this._style,s.appendChild(y)}let m="";if(this.hasAttribute("value")?m=this.getAttribute("value"):m=(e=d?.assignedNodes().map(y=>y.nodeType===3?y.textContent:"").join("").trim())!=null?e:"",this._mathfield=new Ds(s.querySelector(":host > span"),f(p({},(n=(r=X.get(this))==null?void 0:r.options)!=null?n:Ks(this)),{eventSink:this,value:m})),!X.has(this)){this.upgradeProperty("disabled"),this.upgradeProperty("readonly");for(let y of Object.keys(e2.optionsAttributes))this.upgradeProperty(ar(y))}if(!((a=this._mathfield)!=null&&a.model)){this._mathfield=null;return}if(X.has(this)){let y=this._mathfield,A=X.get(this),P=A.menuItems;y.model.deferNotifications({content:!1,selection:!1},()=>{let Z=A.value;Z!==void 0&&y.setValue(Z),y.model.selection=A.selection,X.delete(this)}),P&&(this.menuItems=P)}window.queueMicrotask(()=>{this.isConnected&&this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))}),pi()}disconnectedCallback(){var e,r,n;if(this.shadowRoot.host.removeEventListener("pointerdown",this,!0),!this._mathfield)return;(e=this._observer)==null||e.disconnect(),this._observer=null,window.queueMicrotask(()=>this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})));let a=or(this._mathfield.options,Object.keys(e2.optionsAttributes).map(s=>ar(s)));X.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,menuItems:(n=(r=this._mathfield.menu)==null?void 0:r.menuItems)!=null?n:void 0,options:a}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(e){if(this.hasOwnProperty(e)){let r=this[e];delete this[e],(e==="readonly"||e==="read-only")&&(e="readOnly"),this[e]=r}}attributeChangedCallback(e,r,n){if(r===n)return;let a=n!==null;switch(e){case"contenteditable":U(this._mathfield);break;case"placeholder":n===!1&&(n=""),this.placeholder=n;break;case"disabled":this.disabled=a;break;case"read-only":case"readonly":this.readOnly=a;break}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(e){let r=!!e;r?(this.setAttribute("readonly",""),Ln()?this._internals.ariaReadOnly="true":this.setAttribute("aria-readonly","true"),this.setAttribute("aria-readonly","true")):(Ln()?this._internals.ariaReadOnly="false":this.removeAttribute("aria-readonly"),this.removeAttribute("readonly"),this.removeAttribute("read-only")),this._setOptions({readOnly:r})}get disabled(){return this.hasAttribute("disabled")}set disabled(e){var r;let n=!!e;n?this.setAttribute("disabled",""):this.removeAttribute("disabled"),Ln()?this._internals.ariaDisabled=n?"true":"false":this.setAttribute("aria-disabled",n?"true":"false"),n&&(r=this._mathfield)!=null&&r.hasFocus&&window.mathVirtualKeyboard.visible&&this._mathfield.executeCommand("hideVirtualKeyboard")}get value(){return this.getValue()}set value(e){this.setValue(e)}get defaultMode(){return this._getOption("defaultMode")}set defaultMode(e){this._setOptions({defaultMode:e})}get macros(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("macros")}set macros(e){this._setOptions({macros:e})}get registers(){if(!this._mathfield)throw new Error("Mathfield not mounted");let e=this;return new Proxy({},{get:(r,n)=>{if(typeof n=="string")return e._getOption("registers")[n]},set(r,n,a){return typeof n!="string"?!1:(e._setOptions({registers:f(p({},e._getOption("registers")),{[n]:a})}),!0)},ownKeys:()=>Reflect.ownKeys(e._getOption("registers")),getOwnPropertyDescriptor:(r,n)=>{let a=e._getOption("registers")[n];if(a!==void 0)return{configurable:!0,enumerable:!0,value:a,writable:!0}}})}set registers(e){this._setOptions({registers:e})}get colorMap(){return this._getOption("colorMap")}set colorMap(e){this._setOptions({colorMap:e})}get backgroundColorMap(){return this._getOption("backgroundColorMap")}set backgroundColorMap(e){this._setOptions({backgroundColorMap:e})}get letterShapeStyle(){return this._getOption("letterShapeStyle")}set letterShapeStyle(e){this._setOptions({letterShapeStyle:e})}get minFontScale(){return this._getOption("minFontScale")}set minFontScale(e){this._setOptions({minFontScale:e})}get maxMatrixCols(){return this._getOption("maxMatrixCols")}set maxMatrixCols(e){this._setOptions({maxMatrixCols:e})}get smartMode(){return this._getOption("smartMode")}set smartMode(e){this._setOptions({smartMode:e})}get smartFence(){return this._getOption("smartFence")}set smartFence(e){this._setOptions({smartFence:e})}get smartSuperscript(){return this._getOption("smartSuperscript")}set smartSuperscript(e){this._setOptions({smartSuperscript:e})}get scriptDepth(){return this._getOption("scriptDepth")}set scriptDepth(e){this._setOptions({scriptDepth:e})}get removeExtraneousParentheses(){return this._getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(e){this._setOptions({removeExtraneousParentheses:e})}get mathModeSpace(){return this._getOption("mathModeSpace")}set mathModeSpace(e){this._setOptions({mathModeSpace:e})}get placeholderSymbol(){return this._getOption("placeholderSymbol")}set placeholderSymbol(e){this._setOptions({placeholderSymbol:e})}get placeholder(){var e;return(e=this.getAttribute("placeholder"))!=null?e:""}set placeholder(e){var r;typeof e=="string"&&((r=this._mathfield)==null||r.setOptions({contentPlaceholder:e}))}get popoverPolicy(){return this._getOption("popoverPolicy")}set popoverPolicy(e){this._setOptions({popoverPolicy:e})}get environmentPopoverPolicy(){return this._getOption("environmentPopoverPolicy")}set environmentPopoverPolicy(e){this._setOptions({environmentPopoverPolicy:e})}get menuItems(){var e;if(!this._mathfield)throw new Error("Mathfield not mounted");return(e=this._mathfield.menu._menuItems.map(r=>r.menuItem))!=null?e:[]}set menuItems(e){var r;if(!this._mathfield)throw new Error("Mathfield not mounted");if(this._mathfield){let n=(r=this._mathfield.element)==null?void 0:r.querySelector("[part=menu-toggle]");n&&(n.style.display=e.length===0?"none":""),this._mathfield.menu.menuItems=e}}get mathVirtualKeyboardPolicy(){return this._getOption("mathVirtualKeyboardPolicy")}set mathVirtualKeyboardPolicy(e){this._setOptions({mathVirtualKeyboardPolicy:e})}get inlineShortcuts(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("inlineShortcuts")}set inlineShortcuts(e){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({inlineShortcuts:e})}get inlineShortcutTimeout(){return this._getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(e){this._setOptions({inlineShortcutTimeout:e})}get keybindings(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("keybindings")}set keybindings(e){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({keybindings:e})}get onInsertStyle(){let e=this._getOption("onInsertStyle");return e===void 0?oo:e}set onInsertStyle(e){this._setOptions({onInsertStyle:e})}get onInlineShortcut(){return this._getOption("onInlineShortcut")}set onInlineShortcut(e){this._setOptions({onInlineShortcut:e})}get onScrollIntoView(){return this._getOption("onScrollIntoView")}set onScrollIntoView(e){this._setOptions({onScrollIntoView:e})}get onExport(){return this._getOption("onExport")}set onExport(e){this._setOptions({onExport:e})}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOptions({readOnly:e})}get isSelectionEditable(){var e,r;return(r=(e=this._mathfield)==null?void 0:e.isSelectionEditable)!=null?r:!1}setPromptState(e,r,n){var a;(a=this._mathfield)==null||a.setPromptState(e,r,n)}getPromptState(e){var r,n;return(n=(r=this._mathfield)==null?void 0:r.getPromptState(e))!=null?n:[void 0,!0]}get virtualKeyboardTargetOrigin(){return this._getOption("virtualKeyboardTargetOrigin")}set virtualKeyboardTargetOrigin(e){this._setOptions({virtualKeyboardTargetOrigin:e})}get selection(){return this._mathfield?this._mathfield.model.selection:X.has(this)?X.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(e){if(typeof e=="number"&&(e={ranges:[[e,e]]}),this._mathfield){this._mathfield.model.selection=e,U(this._mathfield);return}if(X.has(this)){X.set(this,f(p({},X.get(this)),{selection:e}));return}X.set(this,{value:void 0,selection:e,options:Ks(this),menuItems:void 0})}get selectionIsCollapsed(){let e=this.selection;return e.ranges.length===1&&e.ranges[0][0]===e.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:X.has(this)?X.get(this).selection.ranges[0][0]:0}set position(e){if(this._mathfield&&(this._mathfield.model.position=e,U(this._mathfield)),X.has(this)){X.set(this,f(p({},X.get(this)),{selection:{ranges:[[e,e]]}}));return}X.set(this,{value:void 0,selection:{ranges:[[e,e]]},options:Ks(this),menuItems:void 0})}get lastOffset(){var e,r;return(r=(e=this._mathfield)==null?void 0:e.model.lastOffset)!=null?r:-1}};oe.version="0.106.0",oe.openUrl=t=>{if(!t)return;let e=new URL(t);if(!["http:","https:","file:"].includes(e.protocol.toLowerCase())){oe.playSound("plonk");return}window.open(e,"_blank")},oe._fontsDirectory="./fonts/",oe._soundsDirectory="./sounds",oe.keypressVibration=!0,oe._keypressSound={spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"},oe._plonkSound="plonk.wav",oe.audioBuffers={},oe.createHTML=t=>t,oe._speechEngineRate="100%",oe._speechEngineVoice="Joanna",oe._textToSpeechMarkup="",oe._textToSpeechRules="mathlive",oe._textToSpeechRulesOptions={},oe.speakHook=ph,oe.readAloudHook=fh,oe.restoreFocusWhenDocumentFocused=!0,oe._decimalSeparator=".",oe._isFunction=t=>{var e,r;let n=globalThis.MathfieldElement.computeEngine;return(r=(e=n?.parse(t).domain)==null?void 0:e.isFunction)!=null?r:!1};var xt=oe;function ar(t){return t.replace(/[^a-zA-Z\d]+(.)/g,(e,r)=>r.toUpperCase())}function Ks(t){let e={readOnly:!1},r=xt.optionsAttributes;return Object.keys(r).forEach(n=>{var a;if(t.hasAttribute(n)){let s=t.getAttribute(n);n==="placeholder"?e.contentPlaceholder=s??"":r[n]==="boolean"?e[ar(n)]=!0:r[n]==="on/off"?(s=(a=s?.toLowerCase())!=null?a:"",s==="on"||s==="true"?e[ar(n)]=!0:s==="off"||s==="false"?e[ar(n)]=!1:e[ar(n)]=void 0):r[n]==="number"?e[ar(n)]=Number.parseFloat(s??"0"):e[ar(n)]=s}}),e}function Ln(){return!(!("ElementInternals"in window)||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var mn=xt,gh,bh,xh;if(Me()&&!((gh=window.customElements)!=null&&gh.get("math-field"))){window[bh=Symbol.for("io.cortexjs.mathlive")]!=null||(window[bh]={});let t=window[Symbol.for("io.cortexjs.mathlive")];t.version="0.106.0",globalThis.MathfieldElement=xt,(xh=window.customElements)==null||xh.define("math-field",xt)}function Vb(t,e){let r=Ee.singleton;return r?(r.show(),zr(),r.currentLayer=e,r.render(),r.focus(),!0):!1}function qb(){let t=window.mathVirtualKeyboard;return t.visible?t.hide({animate:!0}):t.show({animate:!0}),!1}pe({switchKeyboardLayer:Vb,toggleVirtualKeyboard:qb,hideVirtualKeyboard:()=>(window.mathVirtualKeyboard.hide({animate:!0}),!1),showVirtualKeyboard:()=>(window.mathVirtualKeyboard.show({animate:!0}),!1)},{target:"virtual-keyboard"});function Wt(){var t;return globalThis[t=Symbol.for("io.cortexjs.mathlive")]!=null||(globalThis[t]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}function MathInput(){const[t,e]=reactExports.useState(""),r=reactExports.useRef(null);return reactExports.useEffect(()=>{r.current&&(r.current.value=t)},[t]),jsxRuntimeExports.jsx("math-field",{ref:r,onInput:n=>e(n.target.value),className:`txtbox outline-none bg-none text-grey inline-block dark:text-light-grey\r
            focus:border-3 border-blue dark:border-blue-light w-50 mx-4 shadow-blue dark:shadow-blue-light \r
            h-10 overflow-scroll`,style:{background:"none",outline:"none",fontSize:24},children:t})}function toRoman(t){return{1:"i",2:"ii",3:"iii",4:"iv",5:"v",6:"vi",7:"vii",8:"viii",9:"ix",10:"x"}[t]??null}function Questions(){const[t,e]=reactExports.useState([]),[r,n]=reactExports.useState(0),[a,s]=reactExports.useState(0),{loadQuestions:o}=useQuestions({setQuestions:e}),[c,d]=reactExports.useState("practice"),m=48,y=2;return reactExports.useEffect(()=>{d(""),o();const A=P=>{(P.which===40||P.which===39||P.which===13)&&(o(),n(Z=>Z+1),s(0))};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[]),jsxRuntimeExports.jsxs("div",{className:"w-full h-full flex flex-col justify-items-center p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between txtbox w-9/12 max-w-xs",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Searchh Questions",className:" w-full p-1 outline-none border-none"}),jsxRuntimeExports.jsx(LuSearch,{className:"text-grey dark:text-light-grey",size:24})]}),jsxRuntimeExports.jsx(LuFilter,{className:"text-grey dark:text-light-grey m-4",size:24})]}),jsxRuntimeExports.jsx("div",{className:`h-[85%] w-[97.5%] rounded-out m-auto border-3 shadow-small \r
            border-light-grey dark:border-grey `,children:t[r]?jsxRuntimeExports.jsxs("div",{className:"flex justify-between h-full",children:[jsxRuntimeExports.jsxs("div",{className:"p-8",children:[jsxRuntimeExports.jsxs("span",{className:"txt-bold block",children:[t[r].properties.name,jsxRuntimeExports.jsxs("span",{className:"txt-sub mx-2 inline",children:["#",t[r].properties.tags.join(", ")]})]}),jsxRuntimeExports.jsx("div",{className:"flex",children:t[r].content.length>1?t[r].content.map((A,P)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center h-10",onClick:()=>{s(P)},children:[jsxRuntimeExports.jsx("p",{className:`txt mx-2 rounded-out cursor-pointer px-3 py-1 text-grey dark:text-light-grey
                                        ${a==P?"bg-light-grey/50 dark:bg-grey/50":"hover:bg-light-grey/25 dark:hover:bg-grey/25"}`,children:toRoman(P+1)}),jsxRuntimeExports.jsx(LuChevronRight,{className:`${P+1==t[r].content.length?"invisible":"visible"} text-grey dark:text-light-grey`})]},P)):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}),jsxRuntimeExports.jsxs("div",{className:"w-2/3 m-4",children:[jsxRuntimeExports.jsx(RenderMath,{text:t[r].content[a].question,className:"txt text-xl"}),jsxRuntimeExports.jsx("img",{src:t[r].content[a].image,className:" max-h-30 m-4 dark:invert-100"})]}),t[r].content[a].answer.map(()=>jsxRuntimeExports.jsx(MathInput,{}))]}),jsxRuntimeExports.jsxs("div",{className:"h-full rounded-r-out p-4",children:[jsxRuntimeExports.jsx("div",{className:c=="practice"?"nav-item-selected mb-4 mt-0":"nav-item mb-4",onClick:()=>{},children:jsxRuntimeExports.jsx(LuMessageSquareText,{strokeWidth:y,size:m,className:c=="practice"?"nav-icon-selected":"nav-icon",fill:c=="practice"?"currentColor":"none"})}),jsxRuntimeExports.jsx("div",{className:c=="practicee"?"nav-item-selected mb-4":"nav-item mb-4",onClick:()=>{},children:jsxRuntimeExports.jsx(TbCards,{strokeWidth:y,size:m,className:c=="practicee"?"nav-icon-selected":"nav-icon",fill:c=="practicee"?"currentColor":"none"})}),jsxRuntimeExports.jsx("div",{className:c=="practicee"?"nav-item-selected":"nav-item",onClick:()=>{},children:jsxRuntimeExports.jsx(LuBook,{strokeWidth:y,size:m,className:c=="practicee"?"nav-icon-selected":"nav-icon",fill:c=="practicee"?"currentColor":"none"})})]})]}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnim,loop:!0,autoplay:!0,className:"h-40 w-40"})})})]})}function Social$1(){const{user:t}=reactExports.useContext(UserContext),{setOptions:e}=reactExports.useContext(OptionsContext);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Social"}),jsxRuntimeExports.jsx("p",{className:"txt-heading-colour",children:"Default Text"}),jsxRuntimeExports.jsx("p",{className:"txt-heading",children:"Default Text"}),jsxRuntimeExports.jsx("p",{className:"txt-bold",children:"Default Text"}),jsxRuntimeExports.jsx("p",{className:"txt",children:"Default Text"}),jsxRuntimeExports.jsx("p",{className:"txt-sub",children:"Default Text"}),jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox txt",placeholder:"Default Text"}),jsxRuntimeExports.jsx("button",{className:" block blue-btn m-2 ",children:jsxRuntimeExports.jsx("p",{children:"Default Text"})}),jsxRuntimeExports.jsx("button",{className:" block plain-btn m-2 ",onClick:()=>{localStorage.setItem("THEME","dark"),e(r=>({...r,theme:"dark"}))},children:jsxRuntimeExports.jsx("p",{children:"Dark Mode"})}),jsxRuntimeExports.jsx("button",{className:" block red-btn m-2",onClick:()=>{localStorage.setItem("THEME","light"),e(r=>({...r,theme:"light"}))},children:jsxRuntimeExports.jsx("p",{children:"Light Mode"})}),jsxRuntimeExports.jsx("p",{children:t.email}),jsxRuntimeExports.jsx("p",{children:t.uid}),jsxRuntimeExports.jsx("p",{children:t.username})]})}function Social(){const[t,e]=reactExports.useState(""),r=reactExports.useRef(null);reactExports.useEffect(()=>{r.current&&(r.current.value=t)},[t]);const[n,a]=reactExports.useState(0),[s,o]=reactExports.useState(""),c=["In $\\triangle PQR$, $P(0, 0)$, $Q(8, 0)$, and $R(4, h)$. If the orthocentre is at $(4, 2)$, find $h$.","A point $P(x,y)$ moves such that its distance to line $3x - 4y + 1 = 0$ is twice its distance to line $6x - 8y - 3 = 0$. Show that $P$ lies on one of two lines and find their equations.","In a right triangle, the lengths of the legs are $a$ and $b$. If the area is $A$, find the relationship between $A$, $a$, and $b$.","Line $l: kx - 3y + 4 = 0$ makes angle $\\theta$ with $3x - y + 2 = 0$ where $\\tan\\theta = \\frac{1}{2}$. Find $k$."];return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Social"}),jsxRuntimeExports.jsx("p",{className:"txt-sub italic",children:"#Tags for the questions"}),jsxRuntimeExports.jsx("p",{className:"txt",children:"Wow so much space I actually dont know what to do with myself here"}),jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox w-full max-w-xs",placeholder:"Answer"}),jsxRuntimeExports.jsx("math-field",{ref:r,onInput:d=>e(d.target.value),style:{display:"block",minHeight:"60px",padding:"8px",backgroundColor:"#f0f0f0",border:"2px solid #888",borderRadius:"8px",fontSize:"18px",color:"black"},children:t}),jsxRuntimeExports.jsxs("p",{children:["Value: ",t]}),jsxRuntimeExports.jsx("input",{type:"text",className:"txtbox w-full max-w-xs",placeholder:"Answer",onChange:d=>o(d.target.value)}),jsxRuntimeExports.jsx(RenderMath,{text:s,className:"txt"}),jsxRuntimeExports.jsx(RenderMath,{text:c[n],className:"txt"}),jsxRuntimeExports.jsx("p",{className:"plain-btn m-4 cursor-pointer",onClick:()=>a((n+1)%c.length),children:"Next Questions"})]})}function Navbar(){const{user:r}=reactExports.useContext(UserContext),[n,a]=reactExports.useState("practice"),s=useNavigate(),o=c=>{a(c),s(`/${c}`)};return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col p-4 group transition-all duration-250 bg-light-grey/5 dark:bg-grey/5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-evenly rounded-out h-16 group-hover:bg-opaque p-2 mb-2",children:[jsxRuntimeExports.jsx("img",{src:r.picture,className:"rounded-full border-light-grey border-2 w-7 group-hover:w-9 transition-all duration-250"}),jsxRuntimeExports.jsxs("div",{className:"transition-all duration-250 group-hover:ml-2",children:[jsxRuntimeExports.jsx("p",{className:"nav-txt txt-heading-colour text-blue dark:text-blue-light",children:r.username}),jsxRuntimeExports.jsx("p",{className:"nav-txt txt-sub text-nowrap",children:"Rank: Elite"})]}),jsxRuntimeExports.jsx(LuSettings,{className:"nav-txt group-hover:w-8 text-grey dark:text-grey-light",size:24})]}),jsxRuntimeExports.jsxs("div",{className:n=="practice"?"nav-item-selected":"nav-item",onClick:()=>{o("practice")},children:[jsxRuntimeExports.jsx(LuPencil,{strokeWidth:2,size:36,className:n=="practice"?"nav-icon-selected":"nav-icon",fill:n=="practice"?"currentColor":"none"}),jsxRuntimeExports.jsx("p",{className:n=="practice"?"nav-txt-selected":"nav-txt",children:"Practice"})]}),jsxRuntimeExports.jsxs("div",{className:n=="social"?"nav-item-selected":"nav-item",onClick:()=>{o("social")},children:[jsxRuntimeExports.jsx(LuUsers,{strokeWidth:2,size:36,className:n=="social"?"nav-icon-selected":"nav-icon",fill:n=="social"?"currentColor":"none"}),jsxRuntimeExports.jsx("p",{className:n=="social"?"nav-txt-selected":"nav-txt",children:"Social"})]}),jsxRuntimeExports.jsxs("div",{className:n=="games"?"nav-item-selected":"nav-item",onClick:()=>{o("games")},children:[jsxRuntimeExports.jsx(LuGamepad2,{strokeWidth:2,size:36,className:n=="games"?"nav-icon-selected":"nav-icon",fill:n=="games"?"currentColor":"none"}),jsxRuntimeExports.jsx("p",{className:n=="games"?"nav-txt-selected":"nav-txt",children:"Games"})]})]})}const router=createBrowserRouter([{path:"/",element:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Login,{})})},{path:"/practice",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Questions,{})]})},{path:"/social",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Social$1,{})]})},{path:"/games",element:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Social,{})]})}]);function AppRouter(){return jsxRuntimeExports.jsx(RouterProvider2,{router})}function App(){const[t,e]=reactExports.useState({}),[r,n]=reactExports.useState({theme:"light"});return reactExports.useEffect(()=>{(()=>{const s=localStorage.getItem("THEME");n({theme:s})})()},[]),jsxRuntimeExports.jsx(OptionsContext.Provider,{value:{options:r,setOptions:n},children:jsxRuntimeExports.jsx(UserContext.Provider,{value:{user:t,setUser:e},children:jsxRuntimeExports.jsx("div",{className:`${r.theme=="dark"?"dark":""} bg-white
      dark:bg-black h-screen w-screen flex flex-row`,children:jsxRuntimeExports.jsx(AppRouter,{})})})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
